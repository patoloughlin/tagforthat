{"count":126570,"tag":"mysql","questions":[{"tags":["mysql","codeigniter","codeigniter-2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5,"score":0,"question_id":13281604,"title":"using localhost MySql from online Codeigniter","body":"<p>I have a Codeigniter project on a machine and it runs as public access. However the MySql database it uses is accessible only through localhost. When I run the application, I get</p>\n\n<pre><code>A Database Error Occurred\n\nUnable to connect to your database server using the provided settings.\n\nFilename: core/Loader.php\n\nLine Number: 346\n</code></pre>\n\n<p>I follwed the instructions mentioned <a href=\"http://codeigniter.com/forums/viewthread/207916/\" rel=\"nofollow\">here</a> but I am still getting the same error</p>\n\n<pre><code>Try\n\n1. print_r($params) and print_r($active_record);\n\n2. if the $params are still correct then simplify $active_record\n\n3. echo mysql_error();\n\n4. $db[‘default’][‘db_debug’] = true/false\n\n5. $db[‘default’][‘stricton’] = true/false; \n</code></pre>\n"},{"tags":["mysql","sql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6,"score":0,"question_id":13281628,"title":"SELECT INTO local variable undeclared?","body":"<p>I have the following in an sql file I am executing...</p>\n\n<pre><code>DECLARE rowcount INT;\n\nSELECT COUNT(*) INTO rowcount\nFROM VRG_PROBLEM_ACCOUNT PA \nWHERE NEW.CustName = PA.CustNAME \nAND NEW.AreaCode = PA.AreaCode \nAND NEW.PhoneNumber = PA.PhoneNumber;\n</code></pre>\n\n<p>And yet I'm getting</p>\n\n<pre><code>ERROR 1327 (42000): Undeclared variable: rowcount\n</code></pre>\n\n<p>In another file I am doing the same type of SELECT...INTO localvariable and it works.</p>\n"},{"tags":["mysql","pivot"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":122,"score":2,"question_id":11279310,"title":"Showing rows as columns in MySQL","body":"<p>I have a <code>networks</code> table and a <code>groups</code> table and they are linked by each group being connected to a network.</p>\n\n<p>Each group have a <code>type</code> and some of these groups are <code>special type</code> of groups.</p>\n\n<p>I'm trying to run query that will display each group that is a a special type to be displayed as a column showing how many people are in that group type.</p>\n\n<p>Is that something that is possible? Having each group type being displayed as a column header.</p>\n\n<p>Data:</p>\n\n<pre><code>Networks\n\nid | name\n1  | networka\n2  | networkb\n\n\ngroups\n\nid | name   | type | network\n1  | groupa | 1    | 1\n2  | groupb | 2    | 2\n3  | groupc | 3    | 1\n\ntype\n\nid | name     | special\n1  | speciala | 0\n2  | specialb | 1\n</code></pre>\n\n<p>I currently running:</p>\n\n<pre><code>SELECT Name FROM (\n\n    SELECT groups.Name FROM groups INNER JOIN group_types on groups.Type = group_types.Id WHERE group_types.SpecialType = 1 Group by groups.Type\n) as s\n</code></pre>\n\n<p>which returns the list of groups with special type. But if I want to get more information such as the number of members in that group assuming I have a <code>group_members</code> table that links back to the <code>groups</code> table or the numbers of groups with that type.</p>\n\n<p>I currently get two a row:</p>\n\n<pre><code>name\nspecialb\n</code></pre>\n\n<p>but I actually want to return back</p>\n\n<pre><code>specialb\n(sub query to get more values for that special group)\n</code></pre>\n"},{"tags":["php","mysql","database"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":3426,"score":1,"question_id":8015098,"title":"How to check if value already exists in MySQL database","body":"<p>I know this is pretty basic.. but for some reason this is not working for me. I have a form that stores a Facebook user's ID to check if they already submitted the form. I have the form that submits the User ID into the database working perfectly. Its just this part of checking if the User ID value exists in the database that is tripping me up.</p>\n\n<p>Here's my code....</p>\n\n<pre><code>$user_id = 1234567890;\n\n$checkUserID = mysql_query(\"SELECT fbUserID from submissions WHERE fbUserID = '$user_id'\");\n\nif ($checkUserID) {\necho \"GTFO BRO\";\n} \n</code></pre>\n\n<p>Whenever I do an \"echo\" on the $checkUserID variable I get this returned.. \"Resource id #9\"</p>\n"},{"tags":["mysql","query"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13280045,"title":"Getting rid of duplicates based on older date in mysql","body":"<p>Picture this... a person adds a row of data about a computer into mysql and he again adds another row of essentially same row of data except that the date is different where each date is always stamped with the insert. </p>\n\n<p>I want to be able to eliminate duplicates and show only the most recent row. </p>\n\n<p>Let's say we have a \"computers\" table with 3 fields: ID, COMPUTER, DATEADD</p>\n\n<p>inside the table goes like this</p>\n\n<pre><code>1, dell, 2010-10-09\n2, dell, 2011-10-10\n3, gateway, 2010-03-03\n4, dell, 2010-02-02\n</code></pre>\n\n<p>simple, ok... how do I get rid of dups of dell and only get dell with the latest date? </p>\n\n<p>I tried this query:</p>\n\n<pre><code> SELECT * \n  FROM  `computers` \n  GROUP BY computer\n  ORDER BY dates ASC \n</code></pre>\n\n<p>it doesnt perform as I expect - the date is not the latest.</p>\n"},{"tags":["mysql","sql","database","query","relational-database"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":12,"score":-1,"question_id":13281216,"title":"hard mysql stmnt about creating this view using various tables","body":"<p>So here are three relations:</p>\n\n<p><strong>Table Members</strong></p>\n\n<blockquote>\n  <p>Members(member_id, name, city, state)</p>\n</blockquote>\n\n<p>where member_id is the primary key</p>\n\n<p><strong>Table Borrowed</strong></p>\n\n<blockquote>\n  <p>Borrowed(borrow_id, lib_id, member_id)</p>\n</blockquote>\n\n<p>where borrow_id is the primary key </p>\n\n<p><strong>Table Libraries</strong></p>\n\n<blockquote>\n  <p>Libraries(lib_id, lib_address, lib_city, lib_state)</p>\n</blockquote>\n\n<p>where lib_id is the primary key</p>\n\n<p>Both lib_id and member_id are foreign keys</p>\n\n<p>Create a view called frequent_borrowers that reports, for every library, the member that has borrowed from that library the largest number of times. The view should contain the columns: (lib_id, member_id, name, num_borrowed). The last column is a count of how many times the borrower has made a check out at the library. (Note that you are not counting how many items the borrower has borrowed, but the number of times the borrower has gone to the library and checked out things.) In situations where multiple members tie for the most visits to a given library, include all such members in your results. Make sure your view includes every library, even ones where no members have checked out anything. Stores with no borrows should have NULL values for all columns except the lib_id column. </p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5,"score":0,"question_id":13280931,"title":"Unable to locate packege mysql admin and query browser","body":"<p>Now i am configured Mysql server. Then I want to install mysql-admin and mysql-query-browser show me \"E:Unable to locate package mysql-admin\". Why???</p>\n"},{"tags":["mysql","sql","innodb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13279681,"title":"innoDB - should i turn innodb_flush_log_at_trx_commit off?","body":"<p>I have a database table that has 100s of thousands of rows. Entering a new row or updating a row takes a little bit of time. To do 50 updates (in the format of 'update table set field = 1234 where id = 5678; update table set field = 912 where id = 582; ...') it can take 4 or 5 seconds.</p>\n\n<p>How can i reduce this time? Is it worth playing with the innodb_flush_log_at_trx_commit setting? How can I set that setting just for certain connections/queries?</p>\n\n<p>Is it safe to play with innodb_flush_log_at_trx_commit? The data isn't important, as long as one copy (either before the UPDATE command or after) is in tact (it is only setting some somewhat random data updates... no important data gets changed in these queries)</p>\n\n<p>the bulk of the queries on this tables are SELECTS so that is why i use innodb.</p>\n\n<p>thanks</p>\n"},{"tags":["mysql","magento","triggers","eventtrigger"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":12,"score":2,"question_id":13280980,"title":"Add Trigger into Magento Tables to update quantity","body":"<p>I'm trying to add a trigger on table <code>cataloginventory_stock_item</code> in magento database to modify the field quantity for all products that have the same part of an sku string.</p>\n\n<p>However the result showing me a sql syntax error.</p>\n\n<p>The trigger is:</p>\n\n<pre><code>CREATE TRIGGER UpdateQuantity AFTER UPDATE OF qty ON  `cataloginventory_stock_item`\n    FOR EACH ROW BEGIN\n    Update cataloginventory_stock_item AS csi\n    JOIN catalog_product_entity AS cpe ON cpe.entity_id = csi.product_id\n    JOIN catalog_product_entity_varchar AS cpev ON cpev.entity_id = cpe.entity_id\n    SET csi.qty = NEW.qty\n    WHERE cpev.store_id =2 and AND cpe.sku LIKE concat( '%', (SELECT SUBSTRING_INDEX(New.sku, '_', 1 ) FROM catalog_product_entity LIMIT 1 ) , '%');\n    INSERT INTO logQty VALUES(NEW.qty, old.sku,NOW());\n    END\n</code></pre>\n"},{"tags":["php","mysql","regex","search","comma"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13281179,"title":"Search string in comma separated list MySQL PHP","body":"<p>I'm trying to search a table of recipes that DON'T include any of the search terms in it's ingredients.  The ingredients of each recipe are stored in one field, separated by commas.</p>\n\n<p>I've tried using WHERE NOT MATCH...AGAINST but that doesn't work in cases like when I search for Peas.  It will return results with pea protein in them.  I need to not have that.  This is also a problem with pluralization.</p>\n\n<p>I tried using NOT REGEXP but I'm not too familiar with regular expressions and all the Googling I've done for the last two days hasn't produced a result. </p>\n\n<p>Is there ANY way I can search this field in this table for multiple values and exclude them in the results?</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13280977,"title":"LOAD DATA INFILE convert 2 dates using STR_TO_DATE(@var1,'%m/%d/%Y') - throws error","body":"<p>This is throwing an error, I am unable to figure out why, any ideas?</p>\n\n<pre><code>LOAD DATA LOCAL INFILE 'H:/Data/DB__Muni/data/msrb_AZ_short1.csv'\nINTO TABLE import_mdrp FIELDS TERMINATED BY ';' LINES TERMINATED BY '\\r\\n' \n  ( \n    Issuer, cusip6, state, Issue,\n    page_pointer, @var1, date_rng, cusip9, @var2,\n    yield, Amt_Offer_Dlr, Amt_Offer_Per, Security_Description,\n    Fitch, Moody, cusip_img, fitch_img, moody_img \n  )\nSET maturity = STR_TO_DATE(@var2,'%m/%d/%Y') \nSET issue_date = STR_TO_DATE(@var1,'%m/%d/%Y') \n;\n</code></pre>\n"},{"tags":["mysql","sql","query","postgresql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13280677,"title":"How to do a moving average on a range of dates in SQL?","body":"<p>Let's just say I have two columns, DATE and VALUE. The dates are not necessarily regularly spaced intervals. How can I create a moving average on VALUE over the past N days? I'm using postgres but mysql solutions would also be helpful.</p>\n\n<p>Data:</p>\n\n<pre><code>DATE    VALUE\n2012-11-05 10\n2012-10-29 31\n2012-10-22 108\n2012-10-17 3654\n2012-10-16 1187\n2012-10-15 12033\n2012-10-09 41\n2012-10-01 85\n2012-09-25 20\n2012-09-24 285\n2012-09-17 20\n2012-09-10 20\n2012-09-04 41\n2012-08-27 63\n2012-08-20 52\n2012-08-13 160\n</code></pre>\n"},{"tags":["mysql","sql","arrays","join"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13280875,"title":"JOIN on array of ids in sql","body":"<p>I have three tables:\nTABLE 1 contracts</p>\n\n<pre><code>-------------------\nid  |  contract_name\n--------------------\n1      test name\n2      test name 2\n2      test name 3\n4      test name 4\n</code></pre>\n\n<p>TABLE 2 rooms</p>\n\n<pre><code>-------------------\nid  |  room_name\n--------------------\n1      test name\n2      test name 2\n2      test name 3\n4      test name 4\n</code></pre>\n\n<p>TABLE 3 promos</p>\n\n<pre><code>    ----------------------------------\n    id  |  contracts_id  |   rooms_id\n    ----------------------------------\n    1          1,3            1,3,4\n    1          2              1,2,3\n</code></pre>\n\n<p>No I am trying to do an inner join to get the names of the contract and the rooms according to the ids in the array saved in database. I know this is not ideal at all, but I can not change the database set up. So here is what I would like to do with my query, but obviously it is impossible. Does anyone have any idea on how I can accomplish this?</p>\n\n<pre><code>mysql_query(\"SELECT pb.*, c.contract_name, r.room_name FROM promo_blackouts AS pb\nINNER JOIN contracts as c ON c.contract_id IS IN pb.contracts_id\nINNER JOIN rooms as r ON r.room_id IS IN pb.rooms_id \nWHERE pb.promo_id = '$promo_id'\") or die(mysql_error());\n</code></pre>\n"},{"tags":["php","mysql","arrays","explode"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":327,"score":0,"question_id":6645523,"title":"Exploding String Then Fetching from Database","body":"<p>I have an array that has userid's. I want to explode that array and fetch everything from the database by that userid. It fetches only 1 entry by each user, rather than every entry from that user. Am I missing something? Thank you!</p>\n\n<hr>\n\n<p>Edit: Sorry for being so sparse, it's been a long night of frustration, i'll elaborate.</p>\n\n<pre><code>if ( $follower_array != \"\" ) {\n\n  $followArray = explode(\",\", $follower_array);\n  $followCount = count($followArray);   \n  $i = 0;\n  $display .= \"&lt;table&gt;\";\n\n  foreach( $followArray as $key =&gt; $value ) {\n\n    $i++;\n    $sql = mysql_query(\"\n        SELECT * \n          FROM database \n         WHERE mem_id='$value' \n      ORDER BY bc_date ASC \n         LIMIT 50\n    \") or die (\"error!\");\n\n    while ( $row = mysql_fetch_assoc($sql) ) {\n      $mem_id  = $row['mem_id'];\n      $content = $row['content'];\n\n      $display .= \"&lt;td&gt;' .$content. '&lt;/td&gt;&lt;/tr&gt;\";\n    }\n    display .= \"&lt;/table&gt;\";\n}\n</code></pre>\n\n<p>The Database tables are as follows:</p>\n\n<pre><code>members|content\n---------------\n            id |id\nfollower_array |mem_id\n               |content\n</code></pre>\n\n<p>follwer array looks like \"4,5,6,7\" etc.</p>\n\n<p>I have four member id's set in the dummy data. It retrieves those in $followArray</p>\n\n<p>The output is </p>\n\n<ul>\n<li>mem_id:1 - content</li>\n<li>mem_id:2 - content</li>\n<li>mem_id:3 - content</li>\n<li>mem_id:4 - content</li>\n</ul>\n\n<p>but then stops. It only retrieves one content per member when there are more for each user. Thanks I hope I cleared that up.</p>\n"},{"tags":["c++","mysql","visual-studio-2010"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12906147,"title":"Trying to connect a remote MySQL Database to Visual Studio 2010 Pro (C++)","body":"<p>Ok guys, I've been trying to get this working for a few weeks in my spare time, and all day today, and I have nothing to show for it, so here's my question.</p>\n\n<p>First off, the end goal for this is to read and write basic information (id #s, names, etc.) from a remote mysql database, to a C++ program written in Visual Studio 2010 Pro, or something equivalent (and free). I access the server from my laptop with SSH, and I can call family members to mess with router settings and such.</p>\n\n<p>I'm trying to use a MySQL database on a Ubuntu Server machine that I access remotely from a Windows 7 laptop. I have installed MySQL Connector C++ from the MySQL website (the msi installer). NOTE: I have not done anything with the Connector install except run the exe I downloaded. Didn't think I needed to compile anything, but I'm wrong a lot. I have created a database, a user who has privileges to the database, and this user can (in theory) connect from any ip, because it is declared as 'username@'%'. I also changed the my.cnf file so that the bind-address line is commented out. I used 'mysqladmin ping -h serveraddress -u username -p' and that gave me 'mysqld is alive', so I'm assuming the database is accessible from any ip remotely. So, I opened up VS 2010 Pro, made a new project, went to tools, and then 'Connect To Database'. I selected Microsoft MySQL Server and put in the information exactly as I did for mysqladmin. I clicked Test Connection and I get an error box that ends with 'provider: Named Pipes Provider, error 40 - Could not open a connection to SQL Server'. Sorry for the block of text, just want to give all the details I can.</p>\n\n<p>Hopefully I'm close to making this work, I'm not pressed for time but I'm really tired of not being able to work on anything else in the project, since it all branches from this database connection.</p>\n\n<p>Thanks you all! I'll reply with whatever you need me to during the day, I'm not much of a night owl anymore =)</p>\n\n<p>UPDATE:\nI have the sample code from the mysql site compiling correctly, it was just a matter of finally getting a few hours to sit down and fix linker/library errors one at a time, downloaded the boost libraries, and changed include directories to direct paths when I could get them to work correctly. Now all I need to do is learn how to use it lol</p>\n\n<p>Thanks all!</p>\n"},{"tags":["mysql","duplicates"],"answer_count":13,"favorite_count":51,"up_vote_count":90,"down_vote_count":0,"view_count":78367,"score":90,"question_id":854128,"title":"Find duplicate records in MySQL","body":"<p>I want to pull out duplicate records in a MySQL Database.  This can be done with:</p>\n\n<pre><code>SELECT address, count(id) as cnt FROM list\nGROUP BY address HAVING cnt &gt; 1\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code>100 MAIN ST    2\n</code></pre>\n\n<p>I would like to pull it so that it shows each row that is a duplicate.  Something like:</p>\n\n<pre><code>JIM    JONES    100 MAIN ST\nJOHN   SMITH    100 MAIN ST\n</code></pre>\n\n<p>Any thoughts on how this can be done?  I'm trying to avoid doing the first one then looking up the duplicates with a second query in the code.</p>\n"},{"tags":["mysql","phpmyadmin"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13280766,"title":"MySQL phpMyAdmin error in a simple date query","body":"<p>In MySQL using phpMyAdmin I am trying out this simple query to fetch rows that satisfy a certain date criteria: </p>\n\n<pre><code>select * \nfrom student_invoice\nwhere date_generated &lt; '2012-01-01'\n</code></pre>\n\n<p>The date_generated is of date type. I get an error in phpMyAdmin that says: </p>\n\n<pre><code>ERROR: Unclosed quote @ 64 STR: '\n</code></pre>\n\n<p>I have closed all quotes so its not making sense. The phpMyAdmin version is 2.11.9.6</p>\n"},{"tags":["php","mysql","security"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":28,"score":2,"question_id":13279578,"title":"Confused on htmlspecialchars, real_escape_string, etc","body":"<p>I've written a decent admin interface that includes inventory management, content management, and blogging. Now its time to lock it down and make it secure (Yes, I should have been doing it from the beginning...</p>\n\n<p>For blog creation/editing, I'm using ckeditor which posts HTML output to editblog.php. Also i'm using simple text inputs for Title, Author, etc...</p>\n\n<p>I'm concerned because the blog will have img src=\"uploads/etc.jpg\", as well as divs, spans, etc...</p>\n\n<p>SO! When I sanitize this data, how do I make sure that all those quotes and slashes can be safely shoved into my SQL database, and what do i do to spit it back out on the frontend? I'm also concerned because if the blogger \"quotes\" something, I don't want that to be messed with either.</p>\n\n<p>Simple input like title, author, etc I'm using $title = mysqli_real_escape_string($title)\nBut is that enough? How do I preserve the user's intended input while avoiding attack?</p>\n\n<p>I've done my research and yet I still don't get it. I hope someone can break it down nice and simple for me...</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13279955,"title":"count the number of results of mysql query with loop","body":"<p>I am trying to write a loop in mysql, so that the results of one query informs the second. This is my current query set:</p>\n\n<pre><code> select @post_date := from_unixtime(post_date)\n from posts\n where post_date &gt; unix_timestamp('2012-10-20') and nsfw=1;\n\n select @countofpost := count(@post_date);\n\n while @countofpost &gt; 0 DO\n\n  select count(*)\n  from live_sharedata.users\n  where joined between @post_date and (@post_date + 21600) and joined_site_id=\"RS\";\n\n  set @countofpost = @countofpost -1;\n\n end while;\n</code></pre>\n\n<p>The error I receive is [Err] 1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'while @countofpost > 0 DO.</p>\n\n<p>Any thoughts would be greatly appreciated.</p>\n"},{"tags":["php","mysql","csv"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13280193,"title":"Import and Update CSV to MySQL","body":"<p>I have a scenario where the client has daily updates / inserts from a CSV file which is generally around 30,000 to 50,000 rows. This CSV will contain both new imports as well as need the ability to update existing rows.</p>\n\n<p>I am using PHP / MySQL.</p>\n\n<p>Currently I am having to check each row of the CSV and compare with what is in the database.</p>\n\n<p>This is obviously taking a really long time.</p>\n\n<p>If there is nothing in the database it does a straight import which is fast in itself.</p>\n\n<p>I have thought about the temp table and join, but did not know how that would work with the new rows compared to the update.</p>\n"},{"tags":["php","mysql","joomla"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13280400,"title":"Joomla database memory leak","body":"<p>My client has got a pretty large Joomla-based website hosted on Amazon EC2 with 1.5GB of RAM. The server hosts both Apache and MySQL. Right now the database size is around 250MB and the website gets daily traffic of about 5000. It looks like there is a severe memory leak on the website as sometimes MySQL uses about 99% of CPU memory and then crashes. I have tried optimizing database tables, modifying my<code>.cnf</code>, but still there is no improvement.</p>\n\n<p>There are finder tables used by Joomla smart search which occupy over 100MB of db size. I have disabled smart search, but still the problem occurs.</p>\n\n<p>Friends, please throw some suggestions in fixing this.</p>\n\n<p>Thanks.</p>\n"},{"tags":["php","html","mysql","database"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":37,"score":-1,"question_id":13278506,"title":"Creating a table with Search boxes for each colum","body":"<p>I need someone to show me how you would create a simple table to search each colum of data that I insert from this form. I am looking for the easiest way to create a table with search boxes that can filter each colum. DB: <code>Mysql</code> Field types: <code>text</code> Below shows the variables I am using for my form that posts the data to the database. I am new to writing code so I need a simple but full example on how someone would create a 2 colum html table that can search data per colum. Once I see it works I will get it and be able to reuse. I found this:  <a href=\"http://www.javascriptkit.com/script/script2/tablefilter.shtml\" rel=\"nofollow\">http://www.javascriptkit.com/script/script2/tablefilter.shtml</a> This is pretty much what I'm looking to do but I just dont know how to write it. </p>\n\n<p>My Code</p>\n\n<pre><code>if (isset($_POST[\"submit\"]) &amp;&amp; $_POST[\"submit\"] == \"Submit\")\n{\n    for ($count = 1; $count &lt;= 9; $count++)\n    {\n        $fields[$count] = \"\";\n        if (isset($_POST[\"field\" . $count . \"\"]))\n        {\n            $fields[$count] = trim($_POST[\"field\" . $count . \"\"]);\n            //echo $fields[$count] . \"&lt;br /&gt;\";\n        }\n    }\n\n    $con = mysql_connect(\"local\", \"user\", \"pass\");\n    mysql_select_db(\"DB\", $con);\n\n    $fromzip = mysql_real_escape_string($_POST['fromzip']);\n    $tozip = mysql_real_escape_string($_POST['tozip']);\n\n    $insert = \"INSERT INTO Carriers (`fromzip` ,`tozip` ,`date`) VALUES('$fromzip' ,'$tozip' , NOW())\";\n    mysql_query($insert) or die(mysql_error());\n\n    $select = \"SELECT `fromzip` ,`tozip` , FROM `Carriers` ORDER BY `date` DESC;\";\n    $result = mysql_query($select) or die(mysql_error());\n\n}\n?&gt;\n&lt;style =\"text-align: center; margin-left: auto; margin-right: auto;\"&gt;&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div\n style=\"border: 2px solid rgb(0, 0, 0); margin: 16px 20px 20px; width: 400px; background-color: rgb(236, 233, 216); text-align: center; float: left;\"&gt;\n&lt;form action=\"\" method=\"post\";\"&gt;\n  &lt;div\n  style=\"margin: 8px auto auto; width: 300px; font-family: arial; text-align: left;\"&gt;&lt;br&gt;\n  &lt;table style=\"font-weight: normal; width: 100%; font-size: 12px;\"\n border=\"1\" bordercolor=\"#929087\" cellpadding=\"6\" cellspacing=\"0\"&gt;\n   &lt;table\n style=\"font-weight: normal; width: 100%; text-align: right; font-size: 12px;\"\n border=\"1\" bordercolor=\"#929087\" cellpadding=\"6\" cellspacing=\"0\"&gt;\n    &lt;tbody&gt;\n            &lt;tr&gt;\n              &lt;td style=\"width: 35%;\"&gt;Pick Zip:&lt;/td&gt;&lt;td&gt; &lt;input id=\"fromzip\" name=\"fromzip\" maxlength=\"50\"\n style=\"width: 100%;\" type=\"text\"&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n              &lt;td style=\"width: 35%;\"&gt;Drop Zip:&lt;/td&gt;&lt;td&gt; &lt;input id=\"tozip\" name=\"tozip\" maxlength=\"50\"\n style=\"width: 100%;\" type=\"text\"&gt;\n        &lt;/tr&gt;\n        &lt;/tbody&gt;\n  &lt;/table&gt;\n  &lt;p style=\"text-align: center;\"&gt;&lt;input name=\"submit\" value=\"Submit\"\n class=\"submit\" type=\"submit\"&gt;&lt;/p&gt;\n  &lt;/div&gt;\n&lt;/form&gt;\n&lt;/div&gt;\n&lt;p style=\"margin-bottom: -20px;\"&gt;&amp;nbsp;&lt;/p&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>My Table</p>\n\n<pre><code>&lt;?php /**/ ?&gt;&lt;?php\n\n\n$con = mysql_connect(\"local\", \"user\", \"pass\");\nmysql_select_db(\"DB\", $con)\n\n\n//$select = \"SELECT * FROM `loads` ORDER BY `index` DESC\";\n//$select = \"SELECT * FROM `loads` ORDER BY startingstate,startingcity,destinationstate,destinationcity;\";\n$select = \"SELECT * FROM `Carriers` ORDER BY date DESC\";\n\n$result = mysql_query($select) or die(mysql_error());\n\n$table = \"&lt;table style=\\\"width:100%;font-size:12px;text-align:center;\\\" cellspacing=\\\"0px\\\" cellpadding=\\\"2px\\\" border=\\\"1px\\\" bordercolor=\\\"#929087\\\"&gt;\";\n$table .= \"&lt;tr style=\\\"font-weight:bold;\\\"&gt;&lt;td nowrap=\\\"nowrap\\\"&gt;Pick Zip&lt;/td&gt;&lt;td nowrap=\\\"nowrap\\\"&gt;Drop Zip&lt;/td&gt;&lt;td nowrap=\\\"nowrap\\\"&gt;Date&lt;/td&gt;&lt;/tr&gt;\";\n\n$count = 0;\n\nwhile($fields = mysql_fetch_row($result))\n{\n    //$table .= \"&lt;tr&gt;&lt;td&gt;&lt;input type=\\\"checkbox\\\" name=\\\"deleteme[]\\\" value=\\\"$fields[18]\\\" /&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=\\\"board_load_view.php?index=$fields[18]\\\"&gt;$fields[0]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=\\\"board_load_view.php?index=$fields[18]\\\"&gt;$fields[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=\\\"board_load_view.php?index=$fields[18]\\\"&gt;$fields[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=\\\"board_load_view.php?index=$fields[18]\\\"&gt;$fields[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=\\\"board_load_view.php?index=$fields[18]\\\"&gt;$fields[9]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href=\\\"board_load_view.php?index=$fields[18]\\\"&gt;$fields[11]&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;\";\n    $table .= \"&lt;tr&gt;&lt;td nowrap=\\\"nowrap\\\"&gt;$fields[1]&lt;/&gt;&lt;/td&gt;&lt;td nowrap=\\\"nowrap\\\"&gt;$fields[2]&lt;/&gt;&lt;/td&gt;&lt;td nowrap=\\\"nowrap\\\"&gt;$fields[9]&lt;/&gt;&lt;/td&gt;&lt;/tr&gt;\";\n    $count = $count + 1;\n}\n\n$table .= \"&lt;tr&gt;&lt;td colspan=\\\"12\\\"&gt;&lt;input type=\\\"submit\\\" name=\\\"delete\\\" value=\\\"Remove\\\" /&gt;&lt;/td&gt;&lt;/tr&gt;\";\n\nif ($count &lt; 1)\n{\n    $table = \"\";\n}\n\nmysql_close($con);\n\n//$table = strtoupper(\"You currently have \" . $count . \" LOADS posted. \" . $table);\n$table = \"You currently have \" . $count . \" LOADS posted. \" . $table;\n\necho $table;\n\n?&gt;\n</code></pre>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13280164,"title":"MySQL: Column count doesn't match value count at row 1","body":"<p>I apologise for the lengthy code, but I am trying to create an audit table (called aud_candles) which is a duplicate of 'candles' but with a new unique key, aud_can_id.  Before an update takes place on 'candles', I want the trigger to save the current state of that row in 'aud_candles'.</p>\n\n<pre><code>Target Server Type    : MySQL\nTarget Server Version : 50165\nFile Encoding         : utf-8\n\nDate: 11/07/2012 23:05:38 PM\n*/\n\nSET NAMES utf8;\nSET FOREIGN_KEY_CHECKS = 0;\n\n-- ----------------------------\n--  Table structure for `candles`\n-- ----------------------------\nDROP TABLE IF EXISTS `candles`;\nCREATE TABLE `candles` (\n  `can_id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `can_name` varchar(255) NOT NULL,\n  `can_description` varchar(1024) NOT NULL,\n  `can_dye_id` int(10) unsigned NOT NULL,\n  `can_snt_id` int(10) unsigned NOT NULL,\n  `can_wick_id` int(10) unsigned NOT NULL,\n  `can_wax_id` int(10) unsigned NOT NULL,\n  `can_retail_cost` float(10,2) NOT NULL,\n  `can_materials_cost` float(10,2) NOT NULL,\n  `can_dye_used` float(10,2) NOT NULL,\n  `can_snt_used` float(10,2) NOT NULL,\n  `can_wick_used` float(10,2) NOT NULL,\n  `can_wax_used` float(10,2) NOT NULL,\n  `can_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`can_id`),\n  KEY `idx_candles_dyes_id` (`can_dye_id`) USING BTREE,\n  KEY `idx_candles_scents_id` (`can_snt_id`) USING BTREE,\n  KEY `idx_candles_wax_id` (`can_wax_id`) USING BTREE,\n  KEY `fk_candles_wick_id` (`can_wick_id`),\n  CONSTRAINT `fk_candles_dye_id` FOREIGN KEY (`can_dye_id`) REFERENCES `dyes` (`dye_id`),\n  CONSTRAINT `fk_candles_scent_id` FOREIGN KEY (`can_snt_id`) REFERENCES `scents` (`snt_id`),\n  CONSTRAINT `fk_candles_wax_id` FOREIGN KEY (`can_wax_id`) REFERENCES `wax` (`wax_id`),\n  CONSTRAINT `fk_candles_wick_id` FOREIGN KEY (`can_wick_id`) REFERENCES `wicks` (`wic_id`)\n) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;\n\ndelimiter ;;\nCREATE TRIGGER `trg_audit_update_candles` BEFORE UPDATE ON `candles` FOR EACH ROW BEGIN  \n    INSERT INTO aud_candles \n(can_id, \ncan_name, \ncan_description, \ncan_dye_id, \ncan_snt_id, \ncan_wick_id, \ncan_wax_id, \ncan_materials_cost, \ncan_retail_cost,\ncan_updated)  \n    VALUES \n(OLD.can_id, \nOLD.can_name, \nOLD.can_description, \nOLD.can_dye_id, \nOLD.can_snt_id, \nOLD,can_wick_id, \nOLD.can_wax_id, \nOLD.can_materials_cost, \nOLD.can_retail_cost,\nOLD.can_updated);  \nEND;\n ;;\ndelimiter ;\n\n-- ----------------------------\n--  Records of `candles`\n-- ----------------------------\nBEGIN;\nINSERT INTO `candles` VALUES ('1', 'Test Name', 'Test Description', '12', '10', '102', '1', '0.00', '0.00', '5', '25.00', '15.00', '500.00', '2012-11-07 13:29:02');\nCOMMIT;\n\n\nDROP TABLE IF EXISTS `aud_candles`;\nCREATE TABLE `aud_candles` (\n  `aud_can_id` int(11) NOT NULL AUTO_INCREMENT,\n  `can_id` int(10) unsigned NOT NULL,\n  `can_name` varchar(255) CHARACTER SET latin1 NOT NULL,\n  `can_description` varchar(1024) CHARACTER SET latin1 NOT NULL,\n  `can_dye_id` int(10) unsigned NOT NULL,\n  `can_snt_id` int(10) unsigned NOT NULL,\n  `can_wick_id` int(10) unsigned NOT NULL,\n  `can_wax_id` int(10) unsigned NOT NULL,\n  `can_retail_cost` float(10,2) NOT NULL,\n  `can_materials_cost` float(10,2) NOT NULL,\n  `can_dye_used` float(10,2) NOT NULL,\n  `can_snt_used` float(10,2) NOT NULL,\n  `can_wick_used` float(10,2) NOT NULL,\n  `can_wax_used` float(10,2) NOT NULL,\n  PRIMARY KEY (`aud_can_id`),\n  KEY `idx_candles_dyes_id` (`can_dye_id`) USING BTREE,\n  KEY `idx_candles_scents_id` (`can_snt_id`) USING BTREE,\n  KEY `idx_candles_wax_id` (`can_wax_id`) USING BTREE,\n  KEY `fk_candles_wick_id` (`can_wick_id`),\n  CONSTRAINT `fk_aud_candles_dye_id` FOREIGN KEY (`can_dye_id`) REFERENCES `dyes` (`dye_id`),\n  CONSTRAINT `fk_aud_candles_scent_id` FOREIGN KEY (`can_snt_id`) REFERENCES `scents` (`snt_id`),\n  CONSTRAINT `fk_aud_candles_wax_id` FOREIGN KEY (`can_wax_id`) REFERENCES `wax` (`wax_id`),\n  CONSTRAINT `fk_aud_candles_wick_id` FOREIGN KEY (`can_wick_id`) REFERENCES `wicks` (`wic_id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8\n\n\n\n\nSET FOREIGN_KEY_CHECKS = 1;\n\nUPDATE candles set can_name = 'Test Name 2' WHERE can_id = 1;\n</code></pre>\n\n<p>When performing the update I receive:</p>\n\n<p>Error</p>\n\n<blockquote>\n  <p>Column count doesn't match value count at row 1</p>\n</blockquote>\n\n<p>If I remove the trigger everything works fine, so it must be related to the trigger?</p>\n"},{"tags":["php","mysql","database","query"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13279604,"title":"What would be a sql query of \" USA State\" come first?","body":"<p>I have MySQL table named employees with </p>\n\n<pre><code> 1. id \n 2. employee \n 3. state\n</code></pre>\n\n<p>I am not getting an idea how I can query the database where state with the name \"New York\" will come first and all other records will come normally. Here is what I have so far </p>\n\n<pre><code>$sql = \"select * from employees order by\";\n</code></pre>\n"},{"tags":["mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":277,"score":0,"question_id":7471131,"title":"copy table from one database to another, maintaining table's structure and renaming it too","body":"<p>I want to copy a table (say tbl_1) from one database (say source_db) to another database (say target_db), with <strong>following things in consideration</strong>:</p>\n\n<ul>\n<li><p>Structure of table should be preserved, including primary key and\nauto-increment key</p></li>\n<li><p>While creating a copy of tbl_1, I need to rename it to cpy_tbl_1</p></li>\n</ul>\n\n<p>How it is possible <strong>using query</strong>?</p>\n\n<p>P.S. I know there will be many similar questions like mine, but I have those special considerations too.</p>\n"},{"tags":["mysql","performance","replication"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":2706,"score":4,"question_id":2832912,"title":"How can \"set timestamp\" be a slow query?","body":"<p>My slow query log is full of entries like the following</p>\n\n<p># Query_time: 1.016361  Lock_time: 0.000000 Rows_sent: 0  Rows_examined: 0\nSET timestamp=1273826821;\nCOMMIT;</p>\n\n<p>I guess the set timestamp command is issued by replication but I don't understand how set timestamp can take over a second. Any ideas?</p>\n"},{"tags":["php","mysql","drupal-7"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":31,"score":3,"question_id":13260914,"title":"Optimum php.ini and my.cnf settings for a small Drupal 7 site on a virtual server","body":"<p>I looking for advice on how to set up the default configuration of php.ini and my.cnf for a small site (100 pages) with very little traffic (300 visitors per day). All pages have a bit of text, some images, no video, no audio, no flash/silverlight, very little javascript and jquery. For tracking I'm using GA and Piwik. The main site database is around 50MB.</p>\n\n<p>The site is hosted on a virtual server with 20GB RAM and 6 vCPUs so there's hopefully a lot of muscle to make it run very fast.</p>\n\n<p>I don't know much about tweaking php and mysql settings and would appreciate it if your answers can be as detailed as possible.</p>\n\n<p>Thanks</p>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":35,"score":-1,"question_id":13278346,"title":"Is there a way to have information written in a text box be inserted into a table in a database?","body":"<pre><code>&lt;?php\n $con = mysql_connect(\"server\",\"username\",\"password\");\n if (!$con)\n   {\n   die('Could not connect: ' . mysql_error());\n   }   \nmysql_query(\"INSERT INTO Post_Entries (Date, Time, Content)\nVALUES ('November', '9:50a.m', BlahBlahBlah)\");\n\nmysql_close($con);\n ?&gt; \n</code></pre>\n\n<p>A more clear question I guess would be should I insert the above code into a function, then call that function when a button is clicked? Or is the above code even correct? I am not very familiar with PHP or MySQL. </p>\n"},{"tags":["php","mysql","php5"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13279806,"title":"Compacting string data for storage and retrieval","body":"<p>I have some text data I would like to store in a mysql database. I currently have the data stored in a variable as a string.</p>\n\n<p>I'm concerned that the table will become quite large due to the amount of text data I have for each row. </p>\n\n<p>Therefore, what is the most easiest way (preferably php built in functions) of compacting this string data in a format ideal for storage and retrieval?</p>\n\n<p>All help is greatly appreciated.</p>\n"},{"tags":["php","mysql","mysqli"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13278909,"title":"How can I display only incorrect answers and keep same table layout","body":"<p>Below I have 4 database tables, Session, Question, Answer and Option_Type.</p>\n\n<p><strong>Session Table:</strong></p>\n\n<pre><code>SessionId  SessionName\n1          AAA\n</code></pre>\n\n<p><strong>Question Table:</strong></p>\n\n<pre><code>SessionId   QuestionId  QuestionContent       OptionId\n1           1           What is 1+1 and 4+4   2\n1           2           Does 2+2 = 4          26\n1           3           What is 3+3 and 5+5   3\n</code></pre>\n\n<p><strong>Answer Table:</strong></p>\n\n<pre><code>AnswerId  SessionId QuestionId  Answer\n1         1         1           B\n2         1         1           C\n3         1         2           Yes\n4         1         3           A\n5         1         3           C\n</code></pre>\n\n<p><strong>Option_Type</strong></p>\n\n<pre><code>OptionId OptionType\n1        A-C\n2        A-D\n3        A-E\n4        A-F\n\n.... goes up to 24 where it goes up to A-Z\n\n25       True or False\n26       Yes or No\n</code></pre>\n\n<p>Now in a jsfiddle here I have created a demo html table which you can see <a href=\"http://jsfiddle.net/WHUkh/6/\" rel=\"nofollow\">here</a></p>\n\n<p>Now if you have a good look at the html table, you will realise that what I am trying to do is display the incorrect answers under the \"Incorrect Answer\" column.</p>\n\n<p>So for example for Question 1:</p>\n\n<ul>\n<li>Option type is A-D</li>\n<li>Correct Answer is B, C</li>\n<li>So Incorrect answers that should be dislayed in table is A and D</li>\n</ul>\n\n<p>So my question is that how in my php script can I select the option_type for a question, display all of the possible answers and remove the correct answers, displaying only the incorrect answers? The layout of the table must be the same as the layout in the jsfiddle.</p>\n\n<p>Below is the table output in the php script. At the moment it is displaying similar table as in jsfiddle except difference is that it is outputting correct answers, not incorrect answers.</p>\n\n<pre><code>   $query = \"SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionContent, an.Answer, q.QuestionMarks \n   FROM Session s \n   INNER JOIN Question q ON s.SessionId = q.SessionId\n   JOIN Answer an ON q.QuestionId = an.QuestionId AND an.SessionId = q.SessionId\n   WHERE s.SessionName = ?\n   ORDER BY q.QuestionId, an.Answer\n   \";\n\n   // prepare query\n   $stmt=$mysqli-&gt;prepare($query);\n   // You only need to call bind_param once\n   $stmt-&gt;bind_param(\"s\", $assessment);\n   // execute query\n   $stmt-&gt;execute(); \n\n\n       // This will hold the search results\n    $searchQuestionId = array();\n    $searchQuestionContent = array();\n    $searchAnswer = array();\n    $searchMarks = array();\n\n    // Fetch the results into an array\n\n   // get result and assign variables (prefix with db)\n   $stmt-&gt;bind_result($dbSessionId, $dbSessionName, $dbQuestionId, $dbQuestionContent, $dbAnswer, $dbQuestionMarks);\n      while ($stmt-&gt;fetch()) {\n        $searchQuestionId[] = $dbQuestionId;\n        $searchQuestionContent[] = $dbQuestionContent;\n        $searchAnswer[] = $dbAnswer;\n        $searchMarks[] = $dbQuestionMarks;\n      } \n\n?&gt;      \n\n&lt;/head&gt;\n\n&lt;body&gt;\n\n&lt;form id=\"QandA\" action=\"&lt;?php echo htmlentities($_SERVER['PHP_SELF']); ?&gt;\" method=\"post\"&gt;\n\n&lt;?php \n\necho \"&lt;table border='1' id='markstbl'&gt;\n      &lt;tr&gt;\n      &lt;th class='questionth'&gt;Question No.&lt;/th&gt;\n      &lt;th class='questionth'&gt;Question&lt;/th&gt;\n      &lt;th class='answerth'&gt;Incorrect Answer&lt;/th&gt;\n      &lt;th class='answermarksth'&gt;Penalty per Incorrect Answer&lt;/th&gt;\n      &lt;/tr&gt;\\n\";\n$previous_question_id = null;\n$rowspans = array_count_values($searchQuestionId);\nforeach ($searchQuestionContent as $key=&gt;$question) {\n\n    // removed logic, not necessary to set empty strings if you're skipping them\n\n    echo '&lt;tr class=\"questiontd\"&gt;'.PHP_EOL;\n\n    if ($previous_question_id != $searchQuestionId[$key]) {\n        echo '&lt;td class=\"questionnumtd\" name=\"numQuestion\" rowspan=\"'.$rowspans[$searchQuestionId[$key]].'\"&gt;'.htmlspecialchars($searchQuestionId[$key]).'&lt;/td&gt;' . PHP_EOL;\n        echo '&lt;td class=\"questioncontenttd\" rowspan=\"'.$rowspans[$searchQuestionId[$key]].'\"&gt;'.htmlspecialchars($question).'&lt;/td&gt;' . PHP_EOL;\n    }\n\n    echo '&lt;td class=\"answertd\" name=\"answers[]\"&gt;';\n    echo $searchAnswer[$key];\n    echo '&lt;/td&gt;' ;\n    echo '&lt;td class=\"answermarkstd\"&gt;&lt;input class=\"individualMarks\" name=\"answerMarks[]\" id=\"individualtext\" type=\"text\" /&gt;&lt;/td&gt;' . PHP_EOL;\n\n    // moved this to the end\n    if ($previous_question_id != $searchQuestionId[$key]) {\n        $previous_question_id = $searchQuestionId[$key];\n    }\n}\n        echo '&lt;/tr&gt;';\n        echo \"&lt;/table&gt;\" . PHP_EOL;\n\n        ?&gt;\n\n&lt;/form&gt;\n</code></pre>\n\n<p>At the moment the code above is showing the correct answers under the \"Incorrect Answers\" column, not the incorrect answers.</p>\n"},{"tags":["php","mysql","mysqli"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13279518,"title":"Can I run a single SELECT rather than two nested to link two tables, omitting dupes, and return value if they match? MySQL / PHP","body":"<p>total n00b here, first post, so please be constructive! I've bought a book to teach myself PHP / MySQL - and not one which is universally praised, unfortunately - so my progress is a bit erratic. </p>\n\n<p>I have two tables which I want to link. I want to display all of the information held in table 1 (let's call it Records), but ONLY once. I then want to check whether each item in Records has a match to a specific field in table 2 (UserTable) and if it does, display a ticked checkbox, or an empty checkbox if there's no match.</p>\n\n<p>The issues I've had to date are only displaying the items from Records where there's a match, or displaying multiple instances of each item in Records where there are multiple matches. I've solved these with the code below - but I keep thinking there must be a better way to do this, perhaps with a single link?</p>\n\n<p>Anyway, here are some excerpts from the code:</p>\n\n<pre><code>$sql = \"SELECT * FROM Records\";\n$res = mysqli_query($mysqli,$sql);\n\nwhile ($iteminfo = mysqli_fetch_array($res, MYSQLI_ASSOC)) {\n$recordid2 = $iteminfo['record_id'];\n</code></pre>\n\n<p>I've omitted a section which pulls out the relevant data from Records and starts to build a table, then:</p>\n\n<pre><code>$sql2 = \"SELECT COUNT(*) AS matches FROM UserTable \nwhere usertable.item = '$recordid2' and User_ID = '$current_user_id'\";\n\n$res2 = mysqli_query($mysqli, $sql2);\n$matches = mysqli_fetch_array($res2, MYSQLI_ASSOC);\n$matches2 = $matches['matches'];\n\nif ($matches2) {\n        $output = \"&lt;input type='checkbox' name='test' checked&gt;\"; } else {\n        $output = \"&lt;input type='checkbox' name='test'&gt;\";\n</code></pre>\n\n<p>As I say, this works, but it feels a bit clumsy - I'm running a separate nested query for every item in Records, which over time could become really slow. Is there a way to run a single query for the whole which brings through all of the row info (once) and a 0 or 1 depending on whether there is a match in UserTable? I've tried using DISTINCT but couldn't get it to work.</p>\n"},{"tags":["php","mysql","sql","mysqli","mysql-num-rows"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13279248,"title":"mysqli_num_rows = 0 when it should be 1","body":"<p>I've been trying to resolve this problem on my own and for the life of me can't fix it..</p>\n\n<pre><code>//If they are, retreive them from the Person table    \nvar_dump($_POST['username']);\nvar_dump($_POST['password']);\n$select = $this-&gt; doQuery(\"SELECT * FROM Person WHERE username = '{$_POST['username']}' AND password = '\".md5($_POST['password']).\"'\");\nvar_dump($select);  \n\ntry {    \n    if (mysqli_num_rows($select) &gt; 0){\n        var_dump(mysqli_num_rows($select));\n        //fetching username and password from database\n        $fetch_array = mysqli_fetch_assoc($select);\n        var_dump($fetch_array);     \n        //Building a session for the user\n        $_SESSION['username'] = $fetch_array['username'];\n\n        //var_dump($_SESSION['username']);\n\n        //Redirecting the user to the index page        \n        header('Location:index.php');\n        return true;\n    }\n</code></pre>\n\n<p>The two var_dumps on the username and password on the 4th and 5th lines returned this: </p>\n\n<pre><code>string(8) \"johnny03\" \nstring(9) \"password3\" \nobject(mysqli_result)#3 (5) { [\"current_field\"]=&gt; int(0) [\"field_count\"]=&gt; int(8) [\"lengths\"]=&gt; NULL [\"num_rows\"]=&gt; int(0) [\"type\"]=&gt; int(0) } \n</code></pre>\n\n<p>The values that I entered for both the password and username are both valid (they are in the database under the correct columns, trust me). I have a feeling that something is wrong with my select query because the var dump on mysqli_num_rows($select) doesn't return anything.That being said, I've tried just about every change to the query that I could think of to make it work and still nothing :[  Can anyone help? </p>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13278535,"title":"Joining 3 tables to return each user's questionnaires between two dates (my challenging query)","body":"<p>I'll try to be brief and cut-to-the-chase as possible here.\nThese are my tables:</p>\n\n<p><strong>questionnaire:</strong> </p>\n\n<ul>\n<li>id[pk], </li>\n<li>name, </li>\n<li>type</li>\n</ul>\n\n<p><strong>user_x_questionnaire:</strong> </p>\n\n<ul>\n<li>id[pk],</li>\n<li>userid[fk],</li>\n<li>questionnaireid[fk references questionnaire.id]</li>\n<li>completedstate,</li>\n<li>iteration</li>\n</ul>\n\n<p><strong>questionnaire_time</strong></p>\n\n<ul>\n<li>id[pk]</li>\n<li>questionnaireid[fk references questionnaire.id]</li>\n<li>iteration</li>\n<li>publishdate[date/time]</li>\n<li>deadline[date/time]</li>\n</ul>\n\n<p>So, users want to fill out some questionnaires. Each user can be assigned to one or more that one questionnaire to fill (user_x_questionnaire). depending on the questionnaire type (one time or frequent) each questionnaire can be filled by the user more than once, therefore questionnaire_time table stores the publishdate and deadline of each of these times.</p>\n\n<p>What I want is a query that displays all the current questionnaires that the user is supposed to answer. That means the time of the questionnaire should be between publishdate and deadline. I went very close to the answer of this query until I realized all my returned results produce the same publish and deadline which is not what I wanted. This is my solution so far.</p>\n\n<pre><code>SELECT * FROM (\n   SELECT DISTINCT questionnaire.id\n        , questionnaire.`name`\n        , user_x_questionnaire.iteration\n        , completedstate\n        , questionnaire_time.publishdate\n        , questionnaire_time.deadline\n   FROM user_x_questionnaire\n      , questionnaire_time\n      , questionnaire \n   WHERE  userid={USERID} \n      AND user_x_questionnaire.questionnaireid=questionnaire.id\n      AND questionnaire.`type`='frequent' \n      AND user_x_questionnaire.questionnaireid=questionnaire_time.questionnaireid\n   ) As result\nWHERE '{CURRENT DATE}' BETWEEN publishdate AND deadline; \n</code></pre>\n\n<p>{USERID} and {CURRENT DATE} will be provided by the program.</p>\n"},{"tags":["php","mysql","database","avatar"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13260364,"title":"Assign random avatar to userprofile php","body":"<p>This topic maybe sound familiar but im not quite pleased with any of the Stackoverflow questions that are asked. See I´m creating a website with a small amount of members, say somewhere around 50. And I have created my registration form and my login form. But now I wan´t to assign a avatar to each new registered member. When i new member successfully register, a random avatar saved on the server will be assigned to them. The user will carry this avatar with them at every visit. So to clear my question:</p>\n\n<p>How can I assign a random picture to each new user and save the picture to their <code>user_id</code>?</p>\n\n<p>I'm currently using a MySQL and coding in PHP. I have a \"Select-random-picture\" function, but not sure how to store a picture with a user. I'm happy for any kind of advice.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>After some considerations, I have been able to state a clearer goal.\nI'm having images stored in a file system that i want to assign randomly to new members, AND when the image has been assign, it should be \"taken\". So if a new user register he will get a random image without the possibility to getting a already taken image.</p>\n\n<p>I have only succeded in creating a generator that uploads random images, but not assuring that the same picture won't come again:</p>\n\n<pre><code>                    $avatarDir = 'members/images/avatars/';\n                    $pics= glob($avatarDir . '*.{jpg,jpeg,png,gif}', GLOB_BRACE);\n                    $randomPics = $pics[array_rand($pics)]; \n                    $query_new_user_picture = $this-&gt;connection-&gt;query(\"INSERT INTO my_images (image) VALUES('$randomPics')\");\n                    $results = mysql_query($query_new_user_picture);\n</code></pre>\n"},{"tags":["mysql","sql","database"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":298,"score":0,"question_id":7843296,"title":"How to drop tables with cyclic foreign keys in MySQL","body":"<p>I have two tables, Parent and Child. The column Parent.favorite_child has a foreign key constraint pointing to Child.id. And the column Child.parent has a foreign key constraint pointing to Parent.id.</p>\n\n<p>Now here's the weird part. I'm trying to drop my Child table, which <strong>contains no records</strong>, but MySQL is giving me the error:</p>\n\n<pre><code>ERROR 1217: Cannot delete or update a parent row: a foreign key constraint fails\nSQL Statement:\ndrop table `mydatabase`.`Child`\n</code></pre>\n\n<p>Why is MySQL throwing this error? There are literally no records in the Child table with which anything could be pointing to or from.</p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13279153,"title":"Applying SQL Query, working for one row, to all rows","body":"<p>I'm trying to remove part of a string, after a string is found, from a text field. What I want to remove will always be at the end of the string, will not be identical, but will always start with the same string, &lt; iframe (no space between &lt; and i, I just put it there because it won't print if I don't).</p>\n\n<p>With the help of my brother-in-law, I was able to determine how to code it to run for one row, specified. But we now can't figure out how to run it for all rows. The code we have so far, for one row, is below:</p>\n\n<pre><code>update products_description  \nset products_description \n        = (select test \n            from\n            ( \n                select substr(PD.products_description,1,instr(PD.products_description, '&lt;iframe') -1) as test  \n                from products_description PD \n                where products_id=36\n            ) as x)\nwhere products_id=36\n</code></pre>\n\n<p>This is actually a followup to <a href=\"http://stackoverflow.com/questions/13132841/remove-everything-after-string\">this</a> thread, where I was unable to determine a solution.</p>\n\n<p>Thanks to anyone that can shed some light on this.</p>\n"},{"tags":["mysql","hibernate","jpa","spring-mvc","blob"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13234790,"title":"MySQLSyntaxErrorException while attempting to persist blob with hibernate","body":"<p>I'm creating some simple webpage with Spring MVC, Hibernate4 and MySQL5. One of models I use contains BLOB value (byte[]). When I try to persist that model with <code>entityManager.persist()</code> \nI get MySQLSytnaxException. Actually there are more problems with current configuration, such as persist/merge/remove ignoring @Transactional annotation, but this one is the most critical.</p>\n\n<p>I already tried using <code>session.save(object);</code> or replacing byte[] by Blob. Still the same result. All working examples I found use completely diffirent approach - e.g. they use HibernateSessionManager and HibernateTransactionManager instead of JPA ones - and I would like to found solution that doesn't require complete change in how I persist entities, when I'm still not sure that it would help.</p>\n\n<p>Could You tell me what mistakes I made in code/configuration/assumptions?</p>\n\n<p>Beginning of a stack trace together with Hibernate trace:</p>\n\n<pre><code>Hibernate: \n        insert \n        into\n            updates\n            (changelog, added, developmentVersion, filedata, filedataType, major, minor, nightly, release, package, type, uploader, id) \n        values\n            (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n22:53:10,888 TRACE BasicBinder:83 - binding parameter [1] as [VARCHAR] - sdfsd\n22:53:10,891 TRACE BasicBinder:71 - binding parameter [2] as [DATE] - &lt;null&gt;\n22:53:10,894 TRACE BasicBinder:83 - binding parameter [3] as [BOOLEAN] - false\n22:53:10,898 TRACE BasicBinder:83 - binding parameter [4] as [BLOB] - javax.sql.rowset.serial.SerialBlob@298fd36c\n22:53:10,924 TRACE BasicBinder:83 - binding parameter [5] as [VARCHAR] - image/png\n22:53:10,926 TRACE BasicBinder:83 - binding parameter [6] as [INTEGER] - 1\n22:53:10,928 TRACE BasicBinder:83 - binding parameter [7] as [INTEGER] - 0\n22:53:10,935 TRACE BasicBinder:83 - binding parameter [8] as [INTEGER] - 0\n22:53:10,936 TRACE BasicBinder:83 - binding parameter [9] as [INTEGER] - 0\n22:53:10,939 TRACE BasicBinder:83 - binding parameter [10] as [INTEGER] - 36\n22:53:10,941 TRACE EnumType:292 - Binding {0} to parameter: {1}\n22:53:10,944 TRACE BasicBinder:83 - binding parameter [12] as [INTEGER] - 18\n22:53:10,955 TRACE BasicBinder:83 - binding parameter [13] as [INTEGER] - 0\n22:53:10,998  WARN SqlExceptionHelper:143 - SQL Error: 1064, SQLState: 42000\n22:53:10,999 ERROR SqlExceptionHelper:144 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'release, package, type, uploader, id) values ('sdfsd', null, 0, _binary'â€°PNG\n' at line 1\n22:53:11,027  INFO AbstractBatchImpl:195 - HHH000010: On release of batch it still contained JDBC statements\nNov 07, 2012 10:53:11 PM org.apache.catalina.core.StandardWrapperValve invoke\nSEVERE: Servlet.service() for servlet [repoApplication] in context with path [/server] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'release, package, type, uploader, id) values ('sdfsd', null, 0, _binary'â€°PNG\n' at line 1; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'release, package, type, uploader, id) values ('sdfsd', null, 0, _binary'â€°PNG\n' at line 1] with root cause\ncom.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'release, package, type, uploader, id) values ('sdfsd', null, 0, _binary'â€°PNG\n' at line 1\n</code></pre>\n\n<p>beans.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    ...\n    &gt;\n\n    ...\n\n    &lt;!-- Hibernate configuration --&gt;    \n\n    &lt;!-- Specifies dataSource object managing connections to database --&gt;  \n    &lt;bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt; \n        &lt;property name=\"driverClassName\" value=\"${database.driver}\" /&gt; \n        &lt;property name=\"url\" value=\"${database.url}\" /&gt; \n        &lt;property name=\"username\" value=\"${database.user}\" /&gt; \n        &lt;property name=\"password\" value=\"${database.password}\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Defines SessionFactory --&gt;\n    &lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n        ...\n        &lt;property name=\"hibernateProperties\"&gt;\n            &lt;util:properties location=\"classpath:Hibernate.properties\" /&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Defines TransactionManager --&gt;\n    &lt;bean id=\"transactionManager\" class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n        &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Binds TransactionManager to annotations --&gt;\n    &lt;tx:annotation-driven transaction-manager=\"transactionManager\" /&gt;\n\n    &lt;!-- Enables Spring annotations --&gt;\n    &lt;context:annotation-config /&gt;\n\n    ...\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>Hibernate.properties:</p>\n\n<pre><code>hibernate.database         =MYSQL\nhibernate.dialect          =org.hibernate.dialect.MySQL5InnoDBDialect\nhibernate.show_sql         =true\nhibernate.format_sql       =true\nhibernate.use_sql_comments =true\nhibernate.hbm2ddl.auto     =update\n</code></pre>\n\n<p>All tables in MySQL database uses InnoDB engine.</p>\n\n<p>Update.java (model):</p>\n\n<pre><code>import java.sql.Blob;\nimport java.sql.Date;\nimport java.sql.SQLException;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.EnumType;\nimport javax.persistence.Enumerated;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.Lob;\nimport javax.persistence.ManyToOne;\nimport javax.persistence.Table;\nimport javax.persistence.Transient;\nimport javax.sql.rowset.serial.SerialBlob;\nimport javax.validation.constraints.NotNull;\n\nimport org.hibernate.annotations.Type;\nimport org.hibernate.validator.constraints.NotEmpty;\nimport org.springframework.web.multipart.commons.CommonsMultipartFile;\n\n...\n\n@Entity\n@Table(name = \"updates\")\n@VersionNumberCorrect\npublic class Update {\n    @Id\n    @Column(name = \"id\", unique = true)\n    private int id;\n\n    @NotNull\n    @ManyToOne\n    @JoinColumn(name = \"package\")\n    private Package thePackage;\n\n    @NotNull\n    @ManyToOne\n    @JoinColumn(name = \"uploader\")\n    private User uploader;\n\n    @Column(name = \"added\")\n    private Date date;\n\n    @Column(name = \"changelog\")\n    @NotNull\n    @NotEmpty\n    private String changelog;\n\n    @Column(name = \"major\")\n    private int major;\n\n    @Column(name = \"minor\")\n    private int minor;\n\n    @Column(name = \"release\")\n    private int release;\n\n    @Column(name = \"nightly\")\n    private int nightly;\n\n    @Column(name = \"developmentVersion\")\n    private boolean developmentVersion;\n\n    @Column(name = \"type\")\n    @Enumerated(EnumType.ORDINAL)\n    private EUpdateStrategy type;\n\n    @Column(name = \"filedata\")\n    @Lob\n    @Type(type = \"blob\")\n    @NotNull\n    private Blob filedata;\n\n    @Column(name = \"filedataType\")\n    private String filedataType;\n\n    public Update() {\n    }\n\n    ...\n}\n</code></pre>\n\n<p>UpdateServiceImp.java (Service):</p>\n\n<pre><code>import java.sql.SQLException;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport javax.persistence.EntityManager;\nimport javax.persistence.EntityManagerFactory;\nimport javax.persistence.EntityTransaction;\n\nimport org.hibernate.Hibernate;\nimport org.hibernate.Session;\nimport org.hibernate.criterion.Order;\nimport org.hibernate.criterion.Restrictions;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\n...\n\n@Service\n@Transactional\npublic class UpdateServiceImp implements UpdateService {\n    @Autowired\n    private SessionFactory sessionFactory;\n\n    @Override\n    public void persist(Update update) {\n        getSession().persist(update);\n    }\n\n    @Override\n    public Update merge(Update update) {\n        return (Update) getSession().merge(update);\n    }\n\n    @Override\n    public void remove(Update update) {\n        getSession().delete(update);\n    }\n\n    ...\n\n    /**\n     * Returns new Session instance.\n     * \n     * @return new Session\n     */\n    private Session getSession() {\n        return sessionFactory.getCurrentSession();\n    }\n}\n</code></pre>\n\n<p>EDIT: \nI changed EntityManagerManager usage into Hibernate's SessionFactory - I tried to change that thinking it might help. It didn't, but code got a little bit cleaner :). I've added some information from Hibernate log that might be helpful. I've also added Hibernate.properties content, since this error is most likely something Hibernate configuration related.</p>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13277973,"title":"SQL average number of requests per user over time period","body":"<p>I have a table (Requests) with the following fields:</p>\n\n<p>id, requestType, userEmail, date</p>\n\n<p>I want to find the average number of requests per user over a given period (i.e. over the last month). Any suggestions?</p>\n\n<p>Thanks!\nGreg</p>\n"},{"tags":["php","mysql","json","google-charts","google-visualization"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":7437,"score":5,"question_id":7685745,"title":"Google Chart Tools with PHP & MySQl","body":"<p>I'm trying to create a chart using the Google Visualization API, with PHP &amp; MySQL in the background.</p>\n\n<p>What I'm doing is:</p>\n\n<ul>\n<li>getting the data from db using PHP / SQL <br /><br /><code>$sth = mysql_query(\"SELECT * FROM Chart\");</code><br /><br /></li>\n<li><p>creating JSON with PHP</p>\n\n<pre><code>$rows = array();\n\nwhile($r = mysql_fetch_assoc($sth)) {\n  $rows[] = $r;\n}\n\n$jdata = json_encode($rows);\n</code></pre></li>\n<li><p>and than feeding Google Visualization API with JSON </p>\n\n<pre><code>var data = new google.visualization.DataTable(&lt;?php echo $jdata ?&gt;); \n</code></pre></li>\n</ul>\n\n<p>Just to make sure the JSON is actually in the correct format I did:</p>\n\n<p><code>$jdata = json_encode($rows);\nprint $jdata;</code> </p>\n\n<p>which returned: </p>\n\n<p><code>[{\"id\":\"1\",\"quarters\":\"1\",\"salary\":\"1250\"},{\"id\":\"2\",\"quarters\":\"2\",\"salary\":\"2500\"},{\"id\":\"3\",\"quarters\":\"3\",\"salary\":\"4526\"},{\"id\":\"4\",\"quarters\":\"4\",\"salary\":\"4569\"}]</code></p>\n\n<p>So,</p>\n\n<ul>\n<li>db connection is OK.</li>\n<li>creating JSON from PHP array is OK.</li>\n<li>JSON format is OK.</li>\n</ul>\n\n<p>Firebug is returning an error saying: <code>Table has no columns.\n[Break On This Error] b,Sl),[b]}function Zq(a,b){var c=a[xc]...\"].\")):d(l(\"Table has no columns.\"))}</code></p>\n\n<p><strong>Thequastion is how can I create columns from JSON data?</strong></p>\n\n<p><br /><br /><br />\n<hr />\n<strong>UPDATE:</strong></p>\n\n<p>Code used to create the graph below: </p>\n\n<pre><code>    // SQL Quary                \n$sth = mysql_query(\"SELECT * FROM Chart\");\n//$rows = array();\n\nwhile($r = mysql_fetch_assoc($sth)) {\n   if(!isset($google_JSON)){    \n     $google_JSON = \"{cols: [\";    \n     $column = array_keys($r);\n     foreach($column as $key=&gt;$value){\n         $google_JSON_cols[]=\"{id: '\".$key.\"', label: '\".$value.\"'}\";\n     }    \n     $google_JSON .= implode(\",\",$google_JSON_cols).\"],rows: [\";       \n   }\n   $google_JSON_rows[] = \"{c:[{v: '\".$r['id'].\"'}, {v: '\".$r['quarters'].\"'}, {v: '\".$r['salary'].\"'}]}\";\n}    \n\n// you may need to change the above into a function that loops through rows, with $r['id'] etc, referring to the fields you want to inject..\n\n$data = $google_JSON.implode(\",\",$google_JSON_rows).\"]}\";\n</code></pre>\n\n<p><strong>Output HTML CODE:</strong></p>\n\n<pre><code>        &lt;!-- load Google AJAX API --&gt;\n    &lt;script type=\"text/javascript\" src=\"http://www.google.com/jsapi\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\"&gt;  \n        //load the Google Visualization API and the chart  \n        google.load('visualization', '1', {'packages':['columnchart']});  \n\n        //set callback  \n        google.setOnLoadCallback (createChart);  \n\n        //callback function  \n        function createChart() {  \n\n            //create data table object  \n            var data = new google.visualization.DataTable({cols: [{id: '0', label: 'id'},{id: '1', label: 'quarters'},{id: '2', label: 'salary'}],rows: [{c:[{v: '1'}, {v: '1'}, {v: '1250'}]},{c:[{v: '2'}, {v: '2'}, {v: '2500'}]},{c:[{v: '3'}, {v: '3'}, {v: '4526'}]},{c:[{v: '4'}, {v: '4'}, {v: '4569'}]}]});  \n\n            //instantiate our chart objects  \n            var chart = new google.visualization.ColumnChart (document.getElementById('chart'));  \n\n            //define options for visualization  \n            var options = {width: 400, height: 240, is3D: true, title: 'Company Earnings'};  \n\n            //draw our chart  \n            chart.draw(data, options);  \n\n        }  \n    &lt;/script&gt;\n\n    &lt;div id=\"chart\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/Q7GyW.png\" alt=\"When using the code above the script is creating the graph, but something is wrong there\"></p>\n"},{"tags":["mysql","sql"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13277445,"title":"SQL query to find a winner depending on winning odds","body":"<p>I need a SQL query to determine a random winner. Each user has it's own winning odds. The more the winning_odds value is high, the more the user has chances to win. Here's a look at the table structure:</p>\n\n<pre><code>id    email            winning_odds\n1     test@test.com    3\n2     test2@test.com   5\n3     test3@test.com   2\n4     test4@test.com   1\n5     test5@test.com   9\n</code></pre>\n\n<p>MySQL database. Table has approximately 100000 rows. There's only one winner, one time. Emails are unique. Anyone has a solution?</p>\n\n<p>Thanks.</p>\n"},{"tags":["mysql","coldfusion"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13277786,"title":"Looping a query with Coldfusion","body":"<p>I have a table 'scores' that contains a companyID plus some associated scores. The companyID can appear multiple times in this table. I have another table ('company') that contains the companyID and the companyName. What I want to do is query the 'company' table to get all of the companyID's and then use this result to query the 'scores' table for the scores using the results from my previous query. I need to do some calculations as well. I'm thinking I need to loop through the first result set and place the companyID value into my second query. Just not sure how to do this. Any help would be greatly appreciated.</p>\n\n<p>I know this code won't work however it might give you a sense of what I'm trying to accomplish:</p>\n\n<pre><code>&lt;cfquery name=\"companyIDs\" datasource=\"myDB\"&gt;\n   Select companyID from company\n&lt;/cfquery&gt;\n\n&lt;cfloop&gt;\n &lt;cfquery name=\"companyScore\" datasource=\"myDB\"&gt;\n SELECT Round(sum(leadership)/Count(leadership)) as leadership,   \n Round(sum(communication)/Count(communication)) as communication, \n Round(sum(fairness)/Count(fairness)) as fairness, \n Round(sum(ethics)/Count(ethics)) as ethics, \n Round(sum(competence)/Count(competence)) as competence \n FROM scores \n Where companyID = 'companyIDs.companyID'\n &lt;/cfquery&gt;\n&lt;/cfloop&gt;\n</code></pre>\n\n<p>Than</p>\n"},{"tags":["php","mysql","query","sorting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2470,"score":0,"question_id":4537784,"title":"how to sort mysql result set after the query's done","body":"<p>I am writing a query for mysql database having 2 parameters.</p>\n\n<p>Its a basic search but the problem is I want to sort the order of the results on the basis of the selection.\nSo after I've clicked the <em>search</em> button and the browser displayied the result set I want to order this specific result set by <em>expiration-date</em> or by <em>price</em> depending wich button i click.</p>\n\n<pre><code>   //SELECTION DATA FORM \n   &lt;form action=\"EVENTS_SELECTION.PHP\"&gt;\n     &lt;select name=\"Type\"&gt;\n     &lt;option value=\"\"&gt;SPORT\n     &lt;option value=\"\"&gt;CULTURE       \n     &lt;option value=\"\"&gt;LEISURE\n     &lt;option value=\"\"&gt;GASTRONOMY\n     &lt;/select&gt;  \n\n     &lt;select name=\"WHERE\"&gt;\n     &lt;option&gt;ROME ALL\n     &lt;option&gt;ROME SOUTH\n     &lt;option&gt;ROME WEST\n     &lt;option&gt;ROME EAST\n     &lt;option&gt;ROME NORTH\n     &lt;/select&gt;\n\n     &lt;input type=\"submit\" value=\"search\"&gt;   \n &lt;/form&gt; \n</code></pre>\n\n<p>how can I achieve that??\nthanks\nLuca</p>\n"},{"tags":["java","mysql","jdbc","insert"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":193,"score":1,"question_id":9593456,"title":"How to connect to an online MySQL database from a Java application","body":"<p>For an assignment I am developing an application that need to perform insertions in a MySQL database.\nI am using JDBC but the hosting services I have don't provide support for JDBC.</p>\n\n<p>What can I do? Is this method too old? Can you suggest me any alternative to basically insert from a Java application into a remote MySQL database?</p>\n"},{"tags":["php","mysql","if-statement","pdo"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":11376084,"title":"MySQL Query - WHERE and IF?","body":"<p>SOLVED:\nDatatypes in the table for country and OS were set to VARCHAR so in my where, I changed = 0 to = '0'.\nThanks to raina77ow for pointing this out! Appreciate it.</p>\n\n<p>I'm not quite sure how to write this query. Basically, I'm going to have a table with two columns (OS and country_code) - more columns too, but those are the conditional ones. These will be either set to 0 for all, or specific ones, separated by commas.</p>\n\n<p>Now, what I'm trying achieve is pull data from the table if the OS and country_code = 0, or if they contain matching data (separated by commas).</p>\n\n<p>Then, I have a column for time. I want to select rows where the time is GREATER than the time column, unless the column time_t is set to false, in which case this shouldn't matter.</p>\n\n<p>I hope I explained it right?</p>\n\n<p>This is what I kind of have so far:</p>\n\n<pre><code>$get = $db-&gt;prepare(\"SELECT * FROM commands \n    WHERE country_code = 0 OR country_code LIKE :country_code \n    AND OS = 0 OR OS LIKE :OS \n    AND IF (time_t = 1, expiry &gt; NOW())\n\");\n$get-&gt;execute(array(\n    ':country_code' =&gt; \"%{$data['country_code']}%\",\n    ':OS' =&gt;  \"%{$data['OS']}%\"\n));\n</code></pre>\n\n<p>EDIT: This is the code I'm using now, but I still can't seem to get the OS and Country_code part working:</p>\n\n<pre><code>$get = $db-&gt;prepare(\"SELECT * FROM commands \nWHERE (country_code = 0 OR country_code LIKE :country_code) \nAND (OS = 0 OR OS LIKE :OS) \nAND (time_t &lt;&gt; 1 OR expiry &gt; NOW())\n\");\n\n$get-&gt;execute(array(\n':country_code' =&gt; \"%{$data['country_code']}%\",\n':OS' =&gt;  \"%{$data['OS']}%\"\n));\n</code></pre>\n\n<p>Data sent to the DB would be: \nOS => Windows 7 \ncountry_code => GB \nONLY one would be being sent, not more than one. The issue I'm having right now is, it's working for OS and for the time thing, but it's not working for the country. I even tried a raw query, when the data in the table is \"FR, SA\" and I did LIKE '%GB%' it still returned the row</p>\n"},{"tags":["html","mysql","css","stylesheet"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":76,"score":3,"question_id":12750231,"title":"Storing CSS in mysql database","body":"<p>I'm storing CSS (stylesheets) in a MySQL database, so when I call it, I only have one way, which is to echo it in the page itself. Is there anyway I can treat the database data as a .css file basically?</p>\n"},{"tags":["mysql","phpmyadmin","wamp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":265,"score":0,"question_id":9877814,"title":"phpMyAdmin doesn't show table list for database that definitely has tables","body":"<p>I have a website, written in php, using a MySQL database. After buying a new laptop (Windows 7), I downloaded WAMP 2.2, with MySQL 5.5.20, PHP 5.3.10 and phpMyAdmin 3.4.10.1. I exported the whole database from the live website and imported it into my wamp environment, using MySQL console.</p>\n\n<p>phpMyAdmin lists the database, but says there are no tables in it. Yet, the websites workss within the WAMP environment. Further, if I perform an SQL \"SHOW TABLES\" within phpMyAdmin, it displays the tables.</p>\n\n<p>I'm completely puzzled as to why these tables aren't listed in the leftmost column of phpMyAdmin.</p>\n"},{"tags":["mysql","subquery"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13278849,"title":"Mysql subquery return array","body":"<p>I need help with the following SubQuery in MySQL</p>\n\n<pre><code> SELECT ... # Main query \n...      \n... IN # Start of subquery that expects to return an array of a.id \n(SELECT a.id, a.multipler \nFROM a \nJOIN b ON a.id = b.id\nGROUP BY(a.id)\nHAVING COUNT(a.id) * a.multipler &lt; 5)\n</code></pre>\n\n<p>What I want to achive is to group all a.id that exist in table b (b.id). \nI want to count the results and mulitple with an unique mulitpler (a.multipler) for each a.id.</p>\n\n<p>The problem here is that I want this to be a subquery: thus I cannot have 2 results. Though, in order to use \"HAVING\" I need to have each variable in the result set.</p>\n\n<p>I only want/need \"a.id\" without \"a.multipler\" as the result. Any ideas to solve this?   </p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13276222,"title":"MySQL SELECT row if next row is different value?","body":"<p>I've Googled a lot but I can't quite figure this out. I apologize if this is a trivial question.</p>\n\n<p>I would like to SELECT a row if the 'batter' column equals a certain value AND the next row is not the same batter. I'm trying to get the row that represents the final pitch of the at bat. If it is the final pitch, then the next row would be a new batter. I'm using an auto-incremented id column if that helps.</p>\n\n<p>EDIT:</p>\n\n<p>Here's how the data is organized.\nRight now if I want to know how many times batter \"276055\" struck out I would do:</p>\n\n<pre><code>SELECT * FROM `mlb2012` WHERE batter = \"276055\" AND atbat_event = \"strikeout\" AND atbat_pitch = \"1\"\n</code></pre>\n\n<p>But if I want to know how many times he struck out looking, I would need to know the pitch_des of the last  pitch of the atbat.</p>\n\n<pre><code>ID | Batter | atbat_pitch | atbat_event | pitch_des      | \n----------------------------------------------------------\n1  | 457477 | 1           | Double      | Called Strike\n2  | 457477 | 2           | Double      | In play, no out\n3  | 452121 | 1           | Strikeout   | Foul\n4  | 452121 | 2           | Strikeout   | Foul\n5  | 452121 | 3           | Strikeout   | Called Strike\n6  | 543569 | 1           | Walk        | Ball\n</code></pre>\n"},{"tags":["php","mysql","forms","input","eval"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":39,"score":-2,"question_id":13278290,"title":"Using php eval on code from database","body":"<p>I am attempting to auto-generate a form based on information in a Mysql database.  Right now, one table stores information about the fields that are needed - the field type, maxlength, default value, etc.</p>\n\n<p>A second table contains html / php code for displaying the proper form input, based on information retrieved from the previously mentioned table. Neither of these tables include any user-inputed data. In order to process and display this stored code, I have been trying to use php's eval function. Although I'm not sure this is a good solution, the only alternative I could think of was to have dozens of one or two line files which are retrieved by using php's include or using jquery to append the contents. The main reason I didn't want to do this was to avoid having the dozens of extra files.</p>\n\n<p>Here is the eval statement that I have so far</p>\n\n<pre><code>eval(\"\\$code=\\\"$field[input_code]\\\";\");echo\"&lt;td&gt;$code&lt;/td&gt;\";\n</code></pre>\n\n<p>Here is a sample of one of the contents of $field['input_code']</p>\n\n<pre><code>&lt;input name='\".$field['form_name'].\"'type='text'placeholder='\".ucwords(str_replace('_',' ',$field['form_name'])).\"'\".if($field['req']==1){echo\"class='textvalreq'required\";}else{echo\"class='textval'\";}.\"&gt;\n</code></pre>\n"},{"tags":["mysql","ruby-on-rails","ruby","activerecord"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13278806,"title":"Rails search in db with different fields","body":"<p>I have 5 select's in my html code. I send them to controller, but for example some of them could be empty (default value is 0), so for example in some case i need to search only via <code>params[:size]</code>  is some case only via <code>params[:capacity]</code> and in other <code>params[:size] and params[:capacity]</code> both as well... But how do to this? how to operate with find etc?\nnow i have something like this:</p>\n\n<pre><code>size = \"*\"+params[:akbsize]+\"*\"\n    @accums = Accumulator.find(:all, :conditions =&gt; [\"MATCH(description) AGAINST (? in boolean mode)\", size])\n    cap = \"*\"+params[:akbcapacity]+\"*\"\n    @accums2 = Accumulator.find(:all, :conditions =&gt; [\"MATCH(description) AGAINST (? in boolean mode)\", cap])\n</code></pre>\n\n<p>But how to do as i described? Is it good to do here with metasearch gem?</p>\n"},{"tags":["mysql","sql","ruby-on-rails"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13278741,"title":"Mysql MATCH AGAINST and IN","body":"<p>I need to search some data in my database. But main problem is that i search with match against:</p>\n\n<pre><code>...MATCH(description) AGAINST (\"*52*\" in boolean mode)\n</code></pre>\n\n<p>But on one iteration (or more, but with one query) i must search not only for 52, but for <code>50,51,52,...,59</code>  as before...\nBut is it real to do? \nAlso i do it with RoR:</p>\n\n<pre><code> @accums = Accumulator.find(:all, :conditions =&gt; [\"MATCH(description) AGAINST (? in boolean mode)\", size])\n</code></pre>\n\n<p>Or i will need to do iterator on rails, and search for all of them iteration by iteration?</p>\n"},{"tags":["mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13278330,"title":"How can I get MySQL to store the result of a query from a second table in the first one?","body":"<p>I have a list of business centers. Sometimes the data entry people don't have all the information such as a missing city name, but the rest of the information is complete. I have another table of zipcodes. I want to be able to do a zipcode lookup for those addresses which don't have a city, and get the city name. I'm doing this in MySQL.</p>\n\n<p>I'm having difficulty with getting the MySQL for this right. I don't know if it's a syntax issue or the logic of the MySQL is wrong. This is what I have:</p>\n\n<pre><code>update centers city\nset centers.city = (\nselect zipcode_types.primary_city\nfrom centers, zipcode_types \nwhere centers.city=\"\" and centers.zipcode=zip);\n</code></pre>\n\n<p>This is the error I'm getting from the above MySQL:</p>\n\n<pre><code>ERROR 1093 (HY000): You can't specify target table 'city' for update in FROM clause\n</code></pre>\n\n<p>What I'm attempting to do, is find the city name from the zipcode_types table and update the \nmissing city name in the centers table. I appreciate the help, thanks!</p>\n"},{"tags":["php","mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13278088,"title":"inserting a dynamically generated $_POST values from a form into mysql from php","body":"<p>I'm trying currently to insert back into a database values from my form.</p>\n\n<pre><code> &lt;?php do { ?&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;?php echo $row_questions['question']; ?&gt;&lt;br /&gt;&lt;table&gt;&lt;tr&gt;&lt;td style=\n\n    \"padding:15px; text-align:center\"&gt;\n      &lt;label&gt;\n        &lt;center&gt;&lt;input type=\"radio\" name=\"answers_&lt;?php echo $row_questions['id']; ?&gt;_&lt;?php echo $row_questions['sub_category']; ?&gt;\" value=\"1\" id=\"answers_1\" /&gt;&lt;/center&gt;&lt;br /&gt;\n        Low&lt;/label&gt;\n      &lt;/td&gt;&lt;td style=\"padding:15px; text-align:center\"&gt;\n      &lt;label&gt;\n        &lt;center&gt;&lt;input type=\"radio\" name=\"answers_&lt;?php echo $row_questions['id']; ?&gt;_&lt;?php echo $row_questions['sub_category']; ?&gt;\" value=\"2\" id=\"answers_2\" /&gt;&lt;/center&gt;&lt;br /&gt;\n        Fairly Low&lt;/label&gt;\n      &lt;/td&gt;&lt;td style=\"padding:15px; text-align:center\"&gt;\n      &lt;label&gt;\n        &lt;center&gt;&lt;input type=\"radio\" name=\"answers_&lt;?php echo $row_questions['id']; ?&gt;_&lt;?php echo $row_questions['sub_category']; ?&gt;\" value=\"3\" id=\"answers_3\" /&gt;&lt;/center&gt;&lt;br /&gt;\n        Average&lt;/label&gt;\n      &lt;/td&gt;&lt;td style=\"padding:15px; text-align:center\"&gt;\n      &lt;label&gt;\n        &lt;center&gt;&lt;input type=\"radio\" name=\"answers_&lt;?php echo $row_questions['id']; ?&gt;_&lt;?php echo $row_questions['sub_category']; ?&gt;\" value=\"4\" id=\"answers_4\" /&gt;&lt;/center&gt;&lt;br /&gt;\n        Fairly High &lt;/label&gt;\n      &lt;/td&gt;&lt;td style=\"padding:15px; text-align:center\"&gt;\n      &lt;label&gt;\n        &lt;center&gt;&lt;input type=\"radio\" name=\"answers_&lt;?php echo $row_questions['id']; ?&gt;_&lt;?php echo $row_questions['sub_category']; ?&gt;\" value=\"5\" id=\"answers_5\" /&gt;&lt;/center&gt;&lt;br /&gt;\n        High&lt;/label&gt;\n      &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;br /&gt;\n  &lt;/tr&gt;\n  &lt;?php } while ($row_questions = mysql_fetch_assoc($questions)); ?&gt;\n</code></pre>\n\n<p>the form gets the questions from a table in my database (called questions). they are in three categories and only one categories set of questions is pulled at any one time.</p>\n\n<p>I need to insert each answer individually into another table (called user_answers). </p>\n\n<p>I'm having trouble working out quite how to go about this and it's beginning to do my head in!</p>\n\n<p>the form manages to pass through $_POST a value that when I <code>print_r($_POST);</code> I get </p>\n\n<blockquote>\n  <p>Array ( [answers_90_5] => 3 [answers_91_5] => 3 )</p>\n</blockquote>\n\n<p>With 90 &amp; 91 being the question ids and 5 being the subcategory in both instances.</p>\n\n<p>From here I am stumped. </p>\n\n<p>How do I identify these parts of each individual post along with the answer and insert them as a row each in the table?</p>\n\n<p>I'm fine with doing the MySQL insert normally and a standard form passing values etc. but I'm completely stumped on how to do this!</p>\n\n<p>Many thanks in advance!</p>\n"},{"tags":["mysql","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":421,"score":1,"question_id":12181428,"title":"ASP.NET MVC 4 EF5 with MySQL","body":"<p>So I've just picked up VS2012 and I want to start an ASP.NET MVC 4 app with EF5.</p>\n\n<p>My host does not have MSSQL so I have to use MySQL.</p>\n\n<p>How do I tell my app that it should use MySQL? (I either want to use the devart MySQL connector or the one from mysql.com)</p>\n"},{"tags":["php","mysql","database","content-management-system","photo"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":23,"score":-1,"question_id":13278239,"title":"Databases and user's photos management","body":"<p>I was wondering the best option to build a website that will allow an user to send photos to be displayed on a open part of the site and I don't know if I should build a database in mysql to receive those photos and then to this table to be pushed on the screen and it grows. Is there any other options? Like getting these photos on a folder and then make a system to get them as I'd do if programming normal html and css...Thanks guys!</p>\n"},{"tags":["mysql","if-statement","count","sum","case"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13278141,"title":"Smart counting of id in join mysql","body":"<p>Upon running this query, the COUNT function doesn't filter by the 'check_if_new_customer' flag. I read in this article: <a href=\"http://dev.mysql.com/tech-resources/articles/wizard/page4.html\" rel=\"nofollow\">http://dev.mysql.com/tech-resources/articles/wizard/page4.html</a> that SUM can be used instead of COUNT in some cases to get more accurate results, however when I try that, I get something very different, it seems to show massive doubling of numbers. I think this may be because I'm summing the UUID that is in the id field instead of counting at that point. Any suggestions on what I could put there to get a count of all of the existing customers vs the new customers?</p>\n\n<pre><code>SELECT\n  YEAR(so.date_entered),\n  so.technical_address_country,\n  so.technical_address_state,\n  COUNT(so.id) as all_sales,\n  COUNT(mf.id) as all_jobs,\n  SUM(so.total_value) as all_value,\n    COUNT(IF(so.check_if_new_customer=1,so.id,0)) as sales_order_new,\n  SUM(IF(so.check_if_new_customer = 1,so.total_value,0)) as total_value_new,\n    COUNT(IF(so.check_if_new_customer=1,mf.id,0)) as jobs_new,\n    COUNT(IF(so.check_if_new_customer=0,so.id,0)) as sales_order_existing,\n  SUM(IF(so.check_if_new_customer = 0,so.total_value,0)) as total_value_existing,\n    COUNT(IF(so.check_if_new_customer=0,mf.id,0)) as jobs_existing,\n    SUM(IF(so.check_if_new_customer=0,mf.id,0)) as jobs_existing_t\nFROM \n  sugarcrm2.so_order so \nLEFT JOIN \n  sugarcrm2.mf_job mf on so.id = mf.sales_order_id \nWHERE \n  so.date_entered &gt; \"2011-10-30\" AND \n    so.technical_address_country IS NOT NULL AND  \n  so.technical_address_state IS NOT NULL AND \n  so.deleted = 0 AND \n  so.has_been_promoted = 1 \nGROUP BY \n    YEAR(so.date_entered),\n  so.technical_address_country, \n  so.technical_address_state\nORDER BY \n  so.technical_address_country, so.technical_address_state \n</code></pre>\n"},{"tags":["mysql","sql","mysql-error-1005"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":179,"score":1,"question_id":9986287,"title":"Cannot create table with underscore in table name MySQL v5.5.14","body":"<p>I'm using Mysql v5.5.14 and when I try to execute:</p>\n\n<pre><code>mysql&gt; CREATE TABLE IF NOT EXISTS LONGBOW_products.universal_partname (\n    -&gt;    part_id SMALLINT(5) UNSIGNED NOT NULL DEFAULT 0,\n    -&gt;    PRIMARY KEY (part_id)\n    -&gt; );\n</code></pre>\n\n<p>It is returning me an error:</p>\n\n<pre><code>ERROR 1005 (HY000): Can't create table 'LONGBOW_products.universal_partname' (errno: -1)\n</code></pre>\n\n<p>However, when I tried removing the underscore from the table name, it returns true:</p>\n\n<pre><code>mysql&gt; CREATE TABLE IF NOT EXISTS LONGBOW_products.universal (\n    -&gt;    part_id SMALLINT(5) UNSIGNED NOT NULL DEFAULT 0,\n    -&gt;    PRIMARY KEY (`part_id`)\n    -&gt; );\nQuery OK, 0 rows affected (0.00 sec)\n</code></pre>\n\n<p>I wonder if you cannot use underscores anymore in table name on newer versions of Mysql?</p>\n"},{"tags":["php","mysql","forms","date","select"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13277980,"title":"Match MySQL Time in PHP","body":"<p>This seems like a simple task, and I've seen others ask the same question, but I still can't return any results from my SQL query.  I've got a date column that's set by timestamp default current.  So it reads YYYY-MM-DD HH-MM-SS.  </p>\n\n<p>My SQL query is as follows: </p>\n\n<pre><code>select `paid` from customer_det where `office` = \"Blanding\" and `date`= CURDATE();\n</code></pre>\n\n<p>I return a result set when I get rid of the and date = curdate.  So I'm curious how to match the two dates.  I just need to pull results that have been inserted today, the actual time is irrelevant.</p>\n\n<p>Thanks.</p>\n"},{"tags":["php","mysql","query","phpexcel"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":23,"score":2,"question_id":13243332,"title":"Removing fields from excel using phpexcel after MYSQL query","body":"<p>I'm using PHPExcel to export data from a MYSQL database and import it into an excel file.</p>\n\n<p><strong>I've got a database that looks like this (this is also what my excel file currently looks like when I generate it using PHPExcel):</strong></p>\n\n<pre><code>======================================================\n|           Question                  |   Answer     |\n=========+===========+===============================|\n| Do you listen to music?             |    YES       |            \n|----------------------------------------------------|\n| Who is your favorite music artists? | Justin Beiber| \n|----------------------------------------------------|\n| &lt;p&gt; Select an Answer&lt;p&gt;             |              | \n|----------------------------------------------------|\n|Are you a Male or female             |      M       | \n|----------------------------------------------------|\n</code></pre>\n\n<p><strong>I want my excel file to look like this:</strong></p>\n\n<pre><code>======================================================\n|           Question                  |   Answer     |\n=========+===========+===============================|\n| Do you listen to music?             |    YES       |            \n|----------------------------------------------------|\n| Who is your favorite music artists? | Justin Beiber| \n|----------------------------------------------------|\n|Are you a Male or female             |      M       | \n|----------------------------------------------------|\n</code></pre>\n\n<p><strong>I'm using this code:</strong></p>\n\n<pre><code>$objPHPExcel = new PHPExcel();\n\n$col = 1; \nwhile($row_data = mysql_fetch_assoc($result)) {\n    $row = 1;\n    if ($col == 1) {\n        $row_headings = array_keys($row_data);\n        foreach($row_headings as $value) {\n            $objPHPExcel-&gt;getActiveSheet()-&gt;setCellValueByColumnAndRow($col, $row, $value);\n            $row++;\n        }\n        $row = 1;\n        $col++;\n    }\n    foreach($row_data as $value) {\n      if (!strstr('&lt;p&gt;', $value)){\n        $objPHPExcel-&gt;getActiveSheet()-&gt;setCellValueByColumnAndRow($col, $row, $value);\n\n    $row++;\n         }\n    }\n    $col++;\n}\n</code></pre>\n"},{"tags":["python","mysql","localhost","mysql-python"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13277384,"title":"MySQLdb cannot resolve localhost","body":"<p>I have set up a basic transactional database using MySQL. Using python/MySQLdb, this works fine:</p>\n\n<pre><code>connection = MySQLdb.connect (host = \"127.0.0.1\", port = 3306, user = \"root\", passwd = \"password\", db = \"test\")\n</code></pre>\n\n<p>but this doesn't:</p>\n\n<pre><code>connection = MySQLdb.connect (host = \"localhost\", port = 3306, user = \"root\", passwd = \"password\", db = \"test\")\n</code></pre>\n\n<p>Using the latter generates the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"path\\to\\virtualenv\\lib\\site-packages\\MySQLdb\\__init__.py\", line 81, in Connect\n    return Connection(*args, **kwargs)\n  File \"path\\to\\virtualenv\\lib\\site-packages\\MySQLdb\\connections.py\", line 187, in __init__\n    super(Connection, self).__init__(*args, **kwargs2)\n_mysql_exceptions.OperationalError: (2003, \"Can't connect to MySQL server on 'localhost' (10061)\")\n</code></pre>\n\n<p>I have to admit I'm a bit confused as to why MySQLdb fails to resolve localhost. The C:\\Windows\\System32\\drivers\\etc\\hosts file hasn't been modified in way. Using a regular Windows command prompt, <code>ping localhost</code> and <code>telnet localhost 3306</code> both work fine.</p>\n\n<p>Environment:</p>\n\n<ul>\n<li>Windows 7 (64 bits)</li>\n<li>Python 2.7.2 (32 bits) </li>\n<li>MySQLdb 1.2.3 </li>\n<li>MySQL 5.5.28 (64 bits)</li>\n</ul>\n"},{"tags":["mysql","sql"],"answer_count":7,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":34,"score":3,"question_id":13276922,"title":"moving an entry form the end of table to the top","body":"<p>I am using mySql  and I have a record with is in end of the table.  I want to bring it to the top of the table. How can move it? I mean there are entries at top of the table, how can i replace ids of both the entries with each other.</p>\n\n<p>I want to do this because i want to move the last item to the start of the list, so that it appears first on my website.</p>\n\n<p>thanks</p>\n"},{"tags":["php","mysql","wordpress","wsod"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13278320,"title":"Wordpress WSOD on install","body":"<p>I'm having some trouble with a brand new WP-install. I'm trying to install it on a clients host. There was already an installation of WP when i began my installation. I asked the client about it and was tolk i could remove it, it was just for test from their side. I saved it however and also copied the db and stuff. </p>\n\n<p>Then, i removed all files from the FTP, i removed all the tables in the DB and all that jazz.\nThen, i took a brand new downloaded version of WP and uploaded it. I set all the proper values in wp-config.php and then launched the site and got a white screen of death. </p>\n\n<p>I removed the wp-config.php and i got the \"There's no wp-config\"-stuff. I tried to alter the file and and even used the wisard, either way i got a WSOD or a WP-error. I get redirected to \"wp-admin/install.php\" but that's it. \nIn the install.php I started to echo stuff to see where the crash were. \nIt seems that it crashed on this line:</p>\n\n<pre><code>require_once( dirname( dirname( __FILE__ ) ) . '/wp-load.php' );\n</code></pre>\n\n<p>Then, i tried to set the define('WP_HOME', '') and d define('WP_SITEURL', '') to the actual URL. \nI tried even to take the old sites .htaccess file, but it gave me nothing.\nThen i started to google and found nothing.</p>\n\n<p>After this, i gave up and installed all the old tables the client had there before for testing, and then uploaded the old site. Still a WSOD. </p>\n\n<p>Anybody who knows what's going on here? </p>\n"},{"tags":["php","mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":44,"score":-1,"question_id":13277554,"title":"Query doesn't work with WHERE AND only with WHERE","body":"<p>The single query for title works, but more than one song with the title exist. so the new query that includes artist doesn't work. ALthough EXACT search for the song title is correct and works with single query.</p>\n\n<p>what am i doing wrong</p>\n\n<pre><code>            //$checkTitle = mysql_query(\"SELECT * from lyrics WHERE title = '$querytitle'\");\n            $checkTitle = mysql_query(\"SELECT * FROM lyrics WHERE artist = '$queryArtist' AND title = '$queryTitle'\");\n            $result = mysql_fetch_array($checkTitle);\n            if (!$checkTitle) {\n                die('Query Failed');\n            } \n            if ($result['title'] == $querytitle)  {\n            ?&gt;&lt;div id='message'&gt;Song Titled Already Exist &lt;?php echo $cleanTitle; ?&gt; by Artist : &lt;? echo $artist; ?&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;?\n            } else {\n            ?&gt;&lt;div id=\"message\"&gt;Song Titled : &lt;?php echo $cleanTitle; ?&gt; has been added to the database! - &lt;a href=\"&lt;?php echo $siteURL; ?&gt;artist.php?aid=&lt;?php echo $artist; ?&gt;\" target=\"_Blank\"&gt;View Artist Page&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;&lt;br /&gt; &lt;?php echo $queryArtist; ?&gt;&lt;?\n            print_r($result); // the data returned from the query\n            }\n</code></pre>\n"},{"tags":["mysql","linux","centos","lamp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13276939,"title":"MySQL 5.5.27 crashes randomly on centOS 5","body":"<p><br/>\nI am using godaddy's dedicate server to host my web application, it's centOS 5(I have no idea why they are still using this.), I installed mysql in that server, everything was running OK since one day I got an report saying that the web application cannot connect to mysql, I checked and found out that mysql crashed, after restarting mysql, everything worked again. But the weird thing is that it will crash randomly, sometimes once in a month, sometimes once or twice in couple months. Please help me figure out what the problem is. The following is the most recent crash log from mysql. Thank you very much for your time.<br/></p>\n\n<pre><code>121015 08:59:35 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql\n121015  8:59:36 [Note] Plugin 'FEDERATED' is disabled.\n121015  8:59:36 InnoDB: The InnoDB memory heap is disabled\n121015  8:59:36 InnoDB: Mutexes and rw_locks use InnoDB's own implementation\n121015  8:59:36 InnoDB: Compressed tables use zlib 1.2.3\n121015  8:59:36 InnoDB: Using Linux native AIO\n121015  8:59:36 InnoDB: Initializing buffer pool, size = 128.0M\n121015  8:59:36 InnoDB: Completed initialization of buffer pool\n121015  8:59:36 InnoDB: highest supported file format is Barracuda.\n121015  8:59:38  InnoDB: Waiting for the background threads to start\n121015  8:59:39 InnoDB: 1.1.8 started; log sequence number 3584614\n121015  8:59:39 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306\n121015  8:59:39 [Note]   - '0.0.0.0' resolves to '0.0.0.0';\n121015  8:59:39 [Note] Server socket created on IP: '0.0.0.0'.\n121015  8:59:40 [Note] Event Scheduler: Loaded 2 events\n121015  8:59:40 [Note] /usr/libexec/mysqld: ready for connections.\nVersion: '5.5.27'  socket: '/var/lib/mysql/mysql.sock'  port: 3306  MySQL Community Server (GPL) by Remi\n121019 23:42:58 [Warning] IP address '118.186.38.55' could not be resolved: Name or service not known\n121024 05:58:39 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql\n121024  5:58:41 [Note] Plugin 'FEDERATED' is disabled.\n121024  5:58:41 InnoDB: The InnoDB memory heap is disabled\n121024  5:58:41 InnoDB: Mutexes and rw_locks use InnoDB's own implementation\n121024  5:58:41 InnoDB: Compressed tables use zlib 1.2.3\n121024  5:58:41 InnoDB: Using Linux native AIO\n121024  5:58:41 InnoDB: Initializing buffer pool, size = 128.0M\n121024  5:58:41 InnoDB: Completed initialization of buffer pool\n121024  5:58:41 InnoDB: highest supported file format is Barracuda.\nInnoDB: The log sequence number in ibdata files does not match\nnnoDB: the log sequence number in the ib_logfiles!\n121024  5:58:41  InnoDB: Database was not shut down normally!\nInnoDB: Starting crash recovery.\nInnoDB: Reading tablespace information from the .ibd files...\nInnoDB: Restoring possible half-written data pages from the doublewrite\nInnoDB: buffer...\n121024  5:58:43  InnoDB: Waiting for the background threads to start\n121024  5:58:44 InnoDB: 1.1.8 started; log sequence number 3584963\n121024  5:58:44 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306\n121024  5:58:44 [Note]   - '0.0.0.0' resolves to '0.0.0.0';\n121024  5:58:44 [Note] Server socket created on IP: '0.0.0.0'.\n121024  5:58:45 [Note] Event Scheduler: Loaded 2 events\n121024  5:58:45 [Note] /usr/libexec/mysqld: ready for connections.\nVersion: '5.5.27'  socket: '/var/lib/mysql/mysql.sock'  port: 3306  MySQL Community Server (GPL) by Remi\n121024  6:06:32 [Note] /usr/libexec/mysqld: Normal shutdown\n\n121024  6:06:32 [Note] Event Scheduler: Purging the queue. 2 events\n121024  6:06:34 [Warning] /usr/libexec/mysqld: Forcing close of thread 3  user: 'root'\n\n121024  6:06:34 [Warning] /usr/libexec/mysqld: Forcing close of thread 2  user: 'root'\n\n121024  6:06:34  InnoDB: Starting shutdown...\n121024  6:06:37  InnoDB: Shutdown completed; log sequence number 3584963\n121024  6:06:37 [Note] /usr/libexec/mysqld: Shutdown complete\n121024 06:06:37 mysqld_safe mysqld from pid file /var/run/mysqld/mysqld.pid ended\n121024 06:08:23 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql\n121024  6:08:23 [Note] Plugin 'FEDERATED' is disabled.\n121024  6:08:23 InnoDB: The InnoDB memory heap is disabled\n121024  6:08:23 InnoDB: Mutexes and rw_locks use InnoDB's own implementation\n121024  6:08:23 InnoDB: Compressed tables use zlib 1.2.3\n121024  6:08:23 InnoDB: Using Linux native AIO\n121024  6:08:23 InnoDB: Initializing buffer pool, size = 128.0M\n121024  6:08:23 InnoDB: Completed initialization of buffer pool\n121024  6:08:23 InnoDB: highest supported file format is Barracuda.\n121024  6:08:23  InnoDB: Waiting for the background threads to start\n121024  6:08:24 InnoDB: 1.1.8 started; log sequence number 3584963\n121024  6:08:24 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306\n121024  6:08:24 [Note]   - '0.0.0.0' resolves to '0.0.0.0';\n121024  6:08:24 [Note] Server socket created on IP: '0.0.0.0'.\n121024  6:08:24 [Note] Event Scheduler: Loaded 2 events\n121024  6:08:24 [Note] /usr/libexec/mysqld: ready for connections.\nVersion: '5.5.27'  socket: '/var/lib/mysql/mysql.sock'  port: 3306  MySQL Community Server (GPL) by Remi\n121026 10:49:09 [Warning] IP address '69.46.72.78' could not be resolved: Temporary failure in name resolution\n121027  7:00:57 [Warning] IP address '119.1.96.27' could not be resolved: Name or service not known\n121028  1:42:49 [Warning] IP address '211.152.54.123' could not be resolved: Name or service not known\n121029 11:48:07 [Warning] IP address '58.16.63.214' could not be resolved: Name or service not known\n121031 10:52:46 [Note] Event Scheduler: scheduler thread started with id 99\n\n121105 14:04:01 [Warning] IP address '61.134.25.4' could not be resolved: Name or service not known\n121107 09:18:43 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql\n121107  9:18:44 [Note] Plugin 'FEDERATED' is disabled.\n121107  9:18:44 InnoDB: The InnoDB memory heap is disabled\n121107  9:18:44 InnoDB: Mutexes and rw_locks use InnoDB's own implementation\n121107  9:18:44 InnoDB: Compressed tables use zlib 1.2.3\n121107  9:18:44 InnoDB: Using Linux native AIO\n121107  9:18:44 InnoDB: Initializing buffer pool, size = 128.0M\n121107  9:18:44 InnoDB: Completed initialization of buffer pool\n121107  9:18:44 InnoDB: highest supported file format is Barracuda.\nInnoDB: The log sequence number in ibdata files does not match\nInnoDB: the log sequence number in the ib_logfiles!\n121107  9:18:44  InnoDB: Database was not shut down normally!\nInnoDB: Starting crash recovery.\nInnoDB: Reading tablespace information from the .ibd files...\nInnoDB: Restoring possible half-written data pages from the doublewrite\nInnoDB: buffer...\n121107  9:18:48  InnoDB: Waiting for the background threads to start\n121107  9:18:49 InnoDB: 1.1.8 started; log sequence number 3609300\n121107  9:18:49 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306\n121107  9:18:49 [Note]   - '0.0.0.0' resolves to '0.0.0.0';\n121107  9:18:49 [Note] Server socket created on IP: '0.0.0.0'.\n121107  9:18:50 [Note] Event Scheduler: Loaded 2 events\n121107  9:18:50 [Note] /usr/libexec/mysqld: ready for connections.\nVersion: '5.5.27'  socket: '/var/lib/mysql/mysql.sock'  port: 3306  MySQL Community Server (GPL) by Remi\n121107  9:23:34 [Note] Event Scheduler: scheduler thread started with id 5\n</code></pre>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13277735,"title":"Create new table sans duplicate rows, preserve original order","body":"<p>A MySQL table has only 5 fields but hundreds of rows. With good advice (tks Lacoz) I have duplicated the table while ignoring the duplicate rows and now have a new table that does not contain the duplicated rows.</p>\n\n<p>Problem: the new table was inputted in a scrambled order (i.e. when observing the first field, called <code>rel_id</code>). While this doesn't matter in the real world, at this point it would be helpful to have them in the same order (for referring to past notes, etc).</p>\n\n<p>Example Row: (Note that <code>rel_id</code> is an auto-incrementing, primary key field)</p>\n\n<pre><code>'rel_id' =&gt; 1\n'host' =&gt; 17\n'host_type' =&gt; 'client'\n'rep' =&gt; 7\n'rep_type =&gt; 'cli_mgr'\n</code></pre>\n\n<p>Here is the method by which user Lacoz assisted me to create the new table, without duplicates:</p>\n\n<pre><code>mysql_query(\"create table rels2 like rels\");\nmysql_query(\"alter table rels2 add unique index(host,host_type,rep,rep_type)\");\nmysql_query(\"insert IGNORE into rels2 select * from rels\");\n</code></pre>\n\n<p>I tried adding \"ORDER BY\" to the final query, like this:</p>\n\n<pre><code>mysql_query(\"insert IGNORE into rels2 select * from rels ORDER BY rel_id\");\n</code></pre>\n\n<p>but it didn't solve the problem. Rows are still in scrambled order.</p>\n\n<p>First Question: Why did this happen?</p>\n\n<p>Second Question: How could I have ensured that the data was input in the correct order?</p>\n\n<p>Necessary Outcome: For various reasons I really need the data returned to its former appearance (but sans the duplicates). Can someone suggest another approach, even a php script, to accomplish this?</p>\n\n<p>PS: After several google searches I don't think it's possible to sort the table's raw data, only the output. Correct? (It is hard to be sure when a novice to both the concepts and the terminology - we all must start somewhere).</p>\n"},{"tags":["php","mysql","cpanel","elgg"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":18,"score":-2,"question_id":13277843,"title":"website log in page give error","body":"<p>i'm installing a elgg software. now i'm facing a problem on my website. </p>\n\n<p>when i'm going to log in page, enter my username and password, and after that enter then he showing this page. please see and help me</p>\n\n<blockquote>\n  <p>You don't have permission to access /engine/handlers/page_handler.php\n  on this server.</p>\n  \n  <p>Additionally, a 404 Not Found error was encountered while trying to\n  use an ErrorDocument to handle the request.</p>\n</blockquote>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13277959,"title":"Mysql query to show results from between two columns","body":"<p>Hi i have a mysql database, in which i have two columns Year_from &amp; Year_two.</p>\n\n<p>what i am trying to do is find a way where i can show the dates that are missing as buttons, for example if year from is 2006 and year to is 2008, i of course want to show 2006, <strong>2007</strong> and 2008. is this possible, as there isn't the value of 2007 in the database.</p>\n\n<p>I haven't worked on any code yet as i am not sure if this is possible, or how i would achieve it.</p>\n\n<p>Any ideas would be appreciated.</p>\n\n<p>Thanks</p>\n"},{"tags":["php","mysql","database"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13260945,"title":"Adding search filters to my table colums","body":"<p>I need someone to show me how you would create a simple table to search each colum of data that I insert from this form. I am looking for the easiest way to create a table with search boxes that can filter each colum. \nDB: Mysql\nField types: text\nBelow shows the variables I am using for my form that posts the data to the database.<br>\n  \n\n<pre><code>if (isset($_POST[\"submit\"]) &amp;&amp; $_POST[\"submit\"] == \"Submit\")\n{\n    for ($count = 1; $count &lt;= 9; $count++)\n    {\n        $fields[$count] = \"\";\n        if (isset($_POST[\"field\" . $count . \"\"]))\n        {\n            $fields[$count] = trim($_POST[\"field\" . $count . \"\"]);\n            //echo $fields[$count] . \"&lt;br /&gt;\";\n        }\n    }\n\n    $con = mysql_connect(\"local\", \"user\", \"pass\");\n    mysql_select_db(\"DB\", $con);\n\n    $fromzip = mysql_real_escape_string($_POST['fromzip']);\n    $tozip = mysql_real_escape_string($_POST['tozip']);\n\n    $insert = \"INSERT INTO Carriers (`fromzip` ,`tozip` ,`date`) VALUES('$fromzip' ,'$tozip' , NOW())\";\n    mysql_query($insert) or die(mysql_error());\n\n    $select = \"SELECT `fromzip` ,`tozip` , FROM `Carriers` ORDER BY `date` DESC;\";\n    $result = mysql_query($select) or die(mysql_error());\n\n}\n?&gt;\n&lt;style =\"text-align: center; margin-left: auto; margin-right: auto;\"&gt;&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div\n style=\"border: 2px solid rgb(0, 0, 0); margin: 16px 20px 20px; width: 400px; background-color: rgb(236, 233, 216); text-align: center; float: left;\"&gt;\n&lt;form action=\"\" method=\"post\";\"&gt;\n  &lt;div\n  style=\"margin: 8px auto auto; width: 300px; font-family: arial; text-align: left;\"&gt;&lt;br&gt;\n  &lt;table style=\"font-weight: normal; width: 100%; font-size: 12px;\"\n border=\"1\" bordercolor=\"#929087\" cellpadding=\"6\" cellspacing=\"0\"&gt;\n   &lt;table\n style=\"font-weight: normal; width: 100%; text-align: right; font-size: 12px;\"\n border=\"1\" bordercolor=\"#929087\" cellpadding=\"6\" cellspacing=\"0\"&gt;\n    &lt;tbody&gt;\n            &lt;tr&gt;\n              &lt;td style=\"width: 35%;\"&gt;Pick Zip:&lt;/td&gt;&lt;td&gt; &lt;input id=\"fromzip\" name=\"fromzip\" maxlength=\"50\"\n style=\"width: 100%;\" type=\"text\"&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n              &lt;td style=\"width: 35%;\"&gt;Drop Zip:&lt;/td&gt;&lt;td&gt; &lt;input id=\"tozip\" name=\"tozip\" maxlength=\"50\"\n style=\"width: 100%;\" type=\"text\"&gt;\n        &lt;/tr&gt;\n        &lt;/tbody&gt;\n  &lt;/table&gt;\n  &lt;p style=\"text-align: center;\"&gt;&lt;input name=\"submit\" value=\"Submit\"\n class=\"submit\" type=\"submit\"&gt;&lt;/p&gt;\n  &lt;/div&gt;\n&lt;/form&gt;\n&lt;/div&gt;\n&lt;p style=\"margin-bottom: -20px;\"&gt;&amp;nbsp;&lt;/p&gt;\n&lt;/body&gt;\n</code></pre>\n"},{"tags":["php","mysql","amazon-s3","amazon-web-services","amazon-cloudsearch"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13268566,"title":"how to get distinct record from table field in Amazon CloudSearch","body":"<p>hi i am new to Amazon CloudSearch.in mysql we are using Distinct keyword  to get  unique records.how to use this feature in  Amazon CloudSearch..please help me</p>\n"},{"tags":["php","mysql","sql","delete","condition"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13277225,"title":"Deleting from \"Table1\" if a condition is met in \"Table\" 2 SQL","body":"<p>I'm making a little messaging application in PHP using a SQL database but have faced a small problem. I will try explain this as best as possible so here goes...</p>\n\n<p>I have a table called \"users\" as following:</p>\n\n<pre><code>ID | Username | Password | Email \n-------------------------------------------\n1  | Account1 | Pass 1   | email1@mail.com\n2  | Account2 | Pass 2   | email2@mail.com\n</code></pre>\n\n<p>I then have another called \"friends\" as following:</p>\n\n<pre><code>UserID | FriendID\n------------------\n   1   |     2    \n</code></pre>\n\n<p>So what I need is a query that will delete A row from the \"Friends\" table if a condition is met in the second table.</p>\n\n<p>Example:</p>\n\n<pre><code>DELETE FROM 'friends' WHERE UserID = 1 AND (users.Password = $Password WHERE users.ID = 1)\n</code></pre>\n\n<p>I hope that was a good enough explanation but I'm finding this difficult to explain.</p>\n\n<p>Thank for your help :)</p>\n"},{"tags":["php","mysql","activerecord","yii","many-to-many"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":15,"score":3,"question_id":13277296,"title":"Yii - Multiple relations to the same model","body":"<p>How can I in <code>YII</code> get the related model for each time it has been associated to a given model or at least get a count for how many times it has happened?</p>\n\n<p><strong>The problem:</strong><br>\nI have a table of <strong>Orders</strong> and a table of <strong>Products</strong>.<br>\n<em>Each product is associated to the order 0 or more times</em>.</p>\n\n<p>How do I through the standard relational tool in YII tell how many times a product is on an order?<br>\nI have created a many-to-many relationship through a joint-table and use it to declare my relations</p>\n\n<pre><code>'products'=&gt;array(self::MANY_MANY, 'Product', 'index_order_products(order_id, product_id)')\n</code></pre>\n\n<p>Problem is when I call <em>$order->products</em> it only returns the unique products, not a product for each time it is related.  </p>\n\n<p>I only need to know how many there are of each product on the order, so I've tried</p>\n\n<pre><code>'products'=&gt;array(self::MANY_MANY, 'Product', 'index_order_products(order_id, product_id)', 'select'=&gt;'*, COUNT(product_id) as count', 'group'=&gt;'product_id')\n</code></pre>\n\n<p>But if I then try calling <code>$order-&gt;products[0]-&gt;count</code> it says count hasn't been defined.<br>\nI've managed to circumvent this by creating a empty column count in the database. This way I get the number I need, but surely there must be a better way.  </p>\n\n<p>What would be the correct way of doing something like this in YII?</p>\n"},{"tags":["mysql","query"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13274827,"title":"MySQL query with MATCH on keyword","body":"<p>I'm having troubles understanding the MATCH in MySql. I have a table with Full Text Index on a \"keywords\"-field. The keywords are comma-separated.</p>\n\n<p>I'm testing with 3 rows, with the keywords: prep,rat,mouse</p>\n\n<p>When I search for either \"prep\" or \"rat\", I get the result I want. But if I search for \"mouse\", I get no results. This is the query I'm using:</p>\n\n<pre><code>SELECT *, MATCH(Keywords) AGAINST('mouse') AS Score\nFROM fs_Files\nWHERE MATCH(Keywords) AGAINST('mouse')\nORDER BY score DESC;\n</code></pre>\n\n<p>I've also tried with <code>IN BOOLEAN MODE</code> after 'mouse', but it's the same result.</p>\n\n<p><strong>EDIT</strong>\nIn my database-entry where I used the word 'mouse', I actually used the word 'mus' (which is mouse in Norwegian). I found that if I changed this to 'musebart' (just made the word longer), the search picks it up. Could it be too short with only 3 chars? Is MySql ignoring it (stopword?) since it only contains 3 chars?</p>\n\n<p><strong>EDIT AGAIN:</strong>\nBingo, it has to be at least 4 characters to be searchable. Or else, you have to change it (if you have the permission to do so) Link: <a href=\"http://dev.mysql.com/doc/refman/5.1/en/fulltext-fine-tuning.html\" rel=\"nofollow\">http://dev.mysql.com/doc/refman/5.1/en/fulltext-fine-tuning.html</a>.</p>\n"},{"tags":["mysql","sql","sql-update"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13276480,"title":"Updating where another table equals some value","body":"<p>How do I do the following in MySQL:</p>\n\n<pre><code>UPDATE PartTbl SET aFlag = 0 \nWHERE PartId = (SELECT PartId FROM CategoryTbl WHERE cat = 100)\n</code></pre>\n"},{"tags":["mysql","database","query"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13277453,"title":"Populating fields in MySQL Database","body":"<p>I have currently created a total of 12 tables in MySQL database. 11 of those tables share correlated data and are indexing with each other. I am undergoing some difficulties populating the values in each individual field of the tables and making sure they index properly. I was wondering if there is an easier way that I can populate each field in all tables for one record without doing it manually and having to worry for the proper <code>foreign_key</code> matches with the other table(indexing). Possibly a query can do the job but I am not sure how I can build such query. Or any other suggestions specifically tying to this example.</p>\n\n<p>Below are links to the desing of tables and a query if you will like to create an exact copy of tables in my database.</p>\n\n<p><a href=\"http://webprolearner.ueuo.com/class_des/table_structure.php\" rel=\"nofollow\">TABLE STRUCTURE/DESIGN</a></p>\n\n<p><a href=\"http://webprolearner.ueuo.com/class_des/query_create.php\" rel=\"nofollow\">QUERY FOR CREATING ALL TABLES</a></p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13277253,"title":"MySQL Conditions On Multiple Rows","body":"<p>I have a MySQL table like this:</p>\n\n<pre><code>+----+------------+----------+\n| id | instanceID | answerID |\n+----+------------+----------+\n| 1  | 1          | 10       |\n| 2  | 1          | 12       |\n| 3  | 1          | 20       |\n| 4  | 2          | 12       |\n| 5  | 2          | 20       |\n| 6  | 2          | 22       |\n| 7  | 2          | 25       |\n| 8  | 3          | 20       |\n| 9  | 3          | 25       |\n| 10 | 4          | 12       |\n| 11 | 4          | 20       |\n+----+------------+----------+\n</code></pre>\n\n<p>I would like to retrieve the instanceID under certain conditions.</p>\n\n<p>This is easy using 'OR':</p>\n\n<pre><code>SELECT instanceID FROM table WHERE (answerID = 10 OR answerID = 12) GROUP BY instanceID;\nReturns:\n1,2,4\n</code></pre>\n\n<p>However, 'AND' is not so simple, as the condition is applied to each individual row, rather than each instanceID.</p>\n\n<p>For example, I would like to retrieve the instanceID where (answerID = 20 AND answerID = 25)\nwhich should return 2,3</p>\n\n<p>I need to avoid subqueries like WHERE x IN (subquery), as the table is biIIIIig.</p>\n\n<p>This is a difficult concept to search for in search engines, so I resort to asking it here.</p>\n\n<p>Thanks!</p>\n"},{"tags":["mysql","database-design"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13177235,"title":"Need help in designing the msyql database for a hospital management sytem","body":"<p>I am working on a hospital management application on a national level i.e. all the hospitals from my country will be using it.</p>\n\n<p>So I need to know how should I design the database.</p>\n\n<p>There will be hospitals and patients which are most concerned here.\nHow should I have these 2 things in a mysql database. I mean to say is it good to have patients from all the hospitals in one table and hospitals in other table and link them up by foreign key.</p>\n\n<p>Check these images below\n<img src=\"http://i.stack.imgur.com/UkpUb.jpg\" alt=\"Hospital Table\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/8GKah.jpg\" alt=\"Patients Table\"></p>\n\n<pre><code>// Save Patient - Personal Details\n$sql = \"INSERT INTO \". TABLE_PATIENTS_PERSONAL .\"\";\n$sql .= \"(hospital_id, title, first_name, middle_name, last_name, date_of_birth, age, sex, occupation, marital_status, religion, tribe, preferred_language, datecreated, datemodified) VALUES\";\n$sql .= \"($hospital_id, '$title', '$first_name', '$middle_name', '$last_name', '$date_of_birth', $age, '$sex', '$occupation', '$marital_status', '$religion', '$tribe', '$preferred_language', now(), now())\";\n$query = $mysql-&gt;query($sql);\n</code></pre>\n\n<p>I have done this so far but I am concerned as once the number of records grow, what will be the issues I am going to face.</p>\n\n<p>A patient table should be in millions once the application goes live. So I need suggestions about how ideally it should be designed so that there wont be any issue of dealing with large no of records and other common database issues etc.?</p>\n"},{"tags":["php","iphone","mysql","ios","json"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13276911,"title":"initWithObjectsAndKeys for JSON POST to MySQL via PHP - gets empty rows in DB","body":"<p>Like the title says..</p>\n\n<p>My NSDictionary initWithObjectsAndKeys for JSON, with the POST method, to do MySQL query via PHP code, by using the json_encoding and json_decoding creates empty data in my SQL database, just the ID int is auto increasing every time I post!</p>\n\n<p>My Xcode code:</p>\n\n<pre><code>-(IBAction)setJsonFromData:(id)sender\n{\n    NSDictionary *jsonDict = [[NSDictionary alloc] initWithObjectsAndKeys: @\"Welcome\", @\"title\", @\"Hello\", @\"article\", @\"123456789\", @\"timestamp\", nil];\n\n    if([NSJSONSerialization isValidJSONObject:jsonDict])\n        {\n           NSError *error = nil;\n           NSData *result = [NSJSONSerialization dataWithJSONObject:jsonDict     options:NSJSONWritingPrettyPrinted error:&amp;error];\n           if (error == nil &amp;&amp; result != nil) {\n           [self postJSONtoURL:result];\n        }\n    }\n}\n\n-(id)postJSONtoURL:(NSData *)requestJSONdata\n{\n    NSURL *url = [NSURL URLWithString:@\"http://test.com/json.php\"];\n    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];\n\n    [request setHTTPMethod:@\"POST\"];\n    [request setValue:@\"application/json\" forHTTPHeaderField:@\"Accept\"];\n    [request setValue:@\"application/json\" forHTTPHeaderField:@\"Content-Type\"];\n    [request setValue:[NSString stringWithFormat:@\"%d\", [requestJSONdata length]] forHTTPHeaderField:@\"Content-Length\"];\n    [request setHTTPBody: requestJSONdata];\n\n    NSURLResponse *response = nil;\n    NSError *error = nil;\n\n    NSData *result = [NSURLConnection sendSynchronousRequest:request returningResponse:&amp;response error:&amp;error];\n\n    NSLog(@\"RESULT: %@\", requestJSONdata);\n\n    if (error == nil)\n        return result;\n    return nil;\n}\n</code></pre>\n\n<p>My PHP code:</p>\n\n<pre><code>if (isset($_REQUEST))\n{\n    $json = $_REQUEST;\n    $data = json_decode($json);\n\n    $title = $_REQUEST['title'];\n    $article = $_REQUEST['article'];\n    $timestamp = $_REQUEST['timestamp'];\n\n    mysql_query(\"INSERT INTO news (title, article, timestamp) VALUES ('$title-&gt;title','$article-&gt;article','$timestamp-&gt;timestamp')\");\n}\n\nmysql_close();  \n</code></pre>\n"},{"tags":["mysql","nosql"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13277127,"title":"JOIN Performance Issue MySQL","body":"<p>I have a <strong>MySQL DB View</strong> which is having a <strong>JOIN on 4 Tables</strong> and all indexes have been used properly and previously response time was fair enough but as the database is growing rapidly, the <strong>response time is gradually degrading</strong>, so how can we <strong>tune the performance</strong>? I am new to solve this kind of complexity, Do I need to think about <strong>database mirroring or partitioning or NoSQl</strong> as well, if any doc can be supported on this, it would be very helpful in learning. </p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":11,"score":1,"question_id":13277087,"title":"MySQL Master-Master Replication","body":"<p>I am trying to run the following query in MySQL:</p>\n\n<pre><code>GRANT REPLICATION SLAVE ON *.* TO 'replication'@’10.141.2.%’ IDENTIFIED BY ‘slave’;\n</code></pre>\n\n<p>It keeps returning the following error:</p>\n\n<pre><code>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '??10.141.2.%’ IDENTIFIED BY ‘slave’' at line 1\n</code></pre>\n\n<p>What am i doing wrong?</p>\n\n<p>Thanks.</p>\n"},{"tags":["mysql","time","timestamp","utc","gmt"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13275650,"title":"Get unix timestamp from mysql database with offset applied","body":"<p>I have the offset in seconds to UTC, all timestamps stored on the database are in UTC, how to apply the offset during selection queries,</p>\n\n<pre><code>mysql_query(\"SELECT * FROM table WHERE unix_timestamp=unix_timestamp with offset applied\");\n\nmysql_query(\"INSERT INTO table (unix_timestamp) VALUES(UNIX_TIMESTAMP())\");\n</code></pre>\n\n<p>I'd want to insert in UTC time to the database and retrieve in local time.</p>\n\n<p>On PHP:</p>\n\n<pre><code>date_default_timezone_set('UTC');\n\n$user_timezone_offset=-7200; // -2\n</code></pre>\n\n<p>Could I substract on select's runtime of mysql to the unix_timestamp field $user_timezone_offset and that would be it?</p>\n\n<p>I am inserting in UTC which is what I need apparently, but for selection in user's local time I'd need to apply the offset to the timestamp stored in the database somehow.</p>\n\n<p>Edit: I just came across this:</p>\n\n<pre><code>$user_timezone_offset=\"-2:00\";\n\nFROM_UNIXTIME(CONVERT_TZ(unix_timestamp,'+00:00','$user_timezone_offset'))\n</code></pre>\n\n<p>Would need to know how to apply it to a select query making the selection of unix_timestamp converted for comparison inside the select and the result also becoming modified for php's fetch_array</p>\n\n<p>This seems to be the solution:</p>\n\n<pre><code> SELECT *, Unix_Timestamp(CONVERT_TZ(FROM_UNIXTIME(unix_timestamp), '+00:00', '$user_timezone_offset')) as unix_timestamp\n</code></pre>\n\n<p>Actually this has a problem - although on</p>\n\n<pre><code> mysql_fetch_array($result){ $row['unix_timestamp']; }\n</code></pre>\n\n<p>comes converted while checking on</p>\n\n<pre><code>  WHERE unix_timestamp=value //assuming unix_timestamp\n</code></pre>\n\n<p>to be converted on the select - in there it is not converted and another </p>\n\n<pre><code>  Unix_Timestamp(CONVERT_TZ(FROM_UNIXTIME(unix_timestamp), '+00:00', '$user_timezone_offset')) \n</code></pre>\n\n<p>has to be called for unix_timestamp to be \"converted\" each time a check is to be made against the converted value.</p>\n"},{"tags":["php","html","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13276482,"title":"Challenging MySQL query for html/PHP report","body":"<p>Here's a challenge for a good MySQL coder.\nWe would greatly appreciate some help on a query to create a MySQL report displayed in an html/PHP page.</p>\n\n<p>We know how to collect the data and store it, and have the PHP report layout, but are lost as to how to structure the query.</p>\n\n<p>We have two MySQL tables – \"visitors\" and \"buyers\". </p>\n\n<ol>\n<li>Visitors table – for visitors to our website coming in through a\nparticular URL which identifies the sales_rep and one of many\nmarketing  codes they create themselves.</li>\n<li>Buyers table – for those who buy something. </li>\n</ol>\n\n<p>A visitor may visit our website through the following link, for example:</p>\n\n<pre><code>www.sales_rep.website.com/index.php?marketing=code1/code2/code3\n</code></pre>\n\n<p>In the \"visitors\" table we include four fields, for: \n - sales_rep\n - date\n - marketing_CODE – (which in this case would be the \"code1/code2/code3\" in a string, but each sales_rep could have several marketing_CODES based on their advertising activities; such as \"code1a/codeTX/codeM2\" and \"market-z/ad-123\")</p>\n\n<p>When a visitor buys something, we add them to a \"buyers\" table, which includes: \n - sales_rep\n - date\n - marketing_TYPE – (which can be \"URL\", \"referral\", or some other type)\n - marketing_VALUE – (which will the marketing_CODE if the marketing_TYPE is URL)</p>\n\n<p>We need to see a report for each specific sales rep, for any specified month, sorted by marketing code, only for marketing_TYPE == \"URL\".</p>\n\n<p>This report needs to show a week-by-week breakdown of visitors and buyers activities for each marketing_CODE, as follows:</p>\n\n<p><img src=\"http://i.stack.imgur.com/GcBDj.png\" alt=\"Table Example\"></p>\n\n<p>To ensure clarity, in the above table, in WEEK 1, 8 Visitors came into the website through a link with \"code1/code2/\", and 5 of them purchased something.</p>\n\n<p>We've attempted to begin our query with the following, but don't know where to go with it:</p>\n\n<ol>\n<li><code>$chosen_month = $_POST['chosen_month'];</code></li>\n<li><code>SELECT * FROM visitors INNER JOIN buyers ON sales_rep WHERE marketing_type = \"URL\" AND sales_rep = '$sales_rep' AND date('Y-m') = $'chosen_month' ;</code></li>\n<li>Using a while statement, we would generate the table cells for each of the records found.  Using this, we know how to list every record, but we can't figure out how display non-distinct records once, display their count, then display distinct records.</li>\n</ol>\n\n<p>Thank you for your time and help.</p>\n"},{"tags":["mysql","git","expressionengine"],"answer_count":4,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":79,"score":7,"question_id":13271932,"title":"ExpressionEngine : git : local development : remote database","body":"<p>To those of you that are trying to be good little developers and version control their ExpressionEngine sites with git, how do you handle your database?</p>\n\n<p>In my limited experience with multiple developers working on one ExpressionEngine site, we've had to all run off of a single MySQL development database running on a remote web server. For those of you that have tried this, it is PAINFULLY slow. Page loads can easily take 5-10 seconds making development extremely difficult. It would be quicker to work off of a remote development server. I am trying to steer away from working off of a remote MySQL server in order to be able to work from anywhere and not depend on Internet connection speed/quality.</p>\n\n<p>Just wondering how others handle their MySQL databases.</p>\n\n<p>Do all of your developers run off of one central database? Have you dealt with slowness issues like we have?</p>\n\n<p>Do you keep your database under version control? How do you handle export/imports among multiple developers and multiple branches?</p>\n\n<p>With one developer I can import/export/commit the database very easily but as soon as you add another developer to the mix, it gets very VERY muddy. Looking forward to hearing everyone's thoughts on this mammoth topic.</p>\n\n<p>Thanks!</p>\n"},{"tags":["mysql","oracle","jdbc"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":24,"score":2,"question_id":13269564,"title":"java.lang.ClassCastException: oracle.sql.TIMESTAMP cannot be cast to java.sql.Timestamp","body":"<p>I am working on an application that streams ResultSet over a network. I ended up using a CachedRowSetImpl class. But when i connect to an Oracle DB, i get an error like this</p>\n\n<p>java.lang.ClassCastException: oracle.sql.TIMESTAMP cannot be cast to java.sql.Timestamp</p>\n\n<p>Please help.</p>\n\n<p>The source code is as follows;</p>\n\n<pre><code>ResultSet res = response.getResultSet(); //resultset from the server\nwhile (res.next()) {\n Agent agent = new Agent();\n agent.setName(res.getString(2));\n agent.setMobile(res.getString(1));\n agent.setBalance(res.getLong(4));\n agent.setLastUpdate(res.getDate(3)); //date from the result set\n agent.setAccountNumber(res.getString(5));\n}\n</code></pre>\n\n<p>The error ...\n java.lang.ClassCastException: oracle.sql.TIMESTAMP cannot be cast to java.sql.Timestamp\njava.lang.ClassCastException: oracle.sql.TIMESTAMP cannot be cast to java.sql.Timestamp\n    at com.sun.rowset.CachedRowSetImpl.getDate(CachedRowSetImpl.java:2139)</p>\n"},{"tags":["mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13273264,"title":"Finding related article based on multiple criteria","body":"<p>This question is similar to <a href=\"http://stackoverflow.com/questions/4717093/mysql-find-related-articles\">this one</a> but with a difference: I have eight different types of tags.</p>\n\n<p>Something like this:</p>\n\n<pre><code>videos      [id, title]\ntags1       [id, tag]\ntags2       [id, tag]\ntags3       [id, tag]\ntags4       [id, tag]\ntags5       [id, tag]\ntags6       [id, tag]\ntags7       [id, tag]\ntags8       [id, tag]\nvideo_tags1 [vid_id, tag_id]\nvideo_tags2 [vid_id, tag_id]\nvideo_tags3 [vid_id, tag_id]\nvideo_tags4 [vid_id, tag_id]\nvideo_tags5 [vid_id, tag_id]\nvideo_tags6 [vid_id, tag_id]\nvideo_tags7 [vid_id, tag_id]\nvideo_tags8 [vid_id, tag_id]\n</code></pre>\n\n<p>Given a single video.id I want to pick out related videos based on which have the most tags in common. I'm finding it hard to find a way to do this, let alone a way that won't bring the server to it's knees.</p>\n"},{"tags":["php","mysql","d3.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":13201749,"title":"Draw simple timeline with D3","body":"<p>I have been trying to draw a timeline with <a href=\"http://d3js.org/\" rel=\"nofollow\">D3</a> for some days, but I never used it and now I realize I don't know how to do it. I also tried with <a href=\"http://code.shutterstock.com/rickshaw/\" rel=\"nofollow\">Rickshaw</a> but still with no success.<br>\nThis is what I'm trying to accomplish:</p>\n\n<p><img src=\"http://i.stack.imgur.com/8epw8.png\" alt=\"Timeline\"></p>\n\n<p>In this example, I have a starting date (1º Jun 2011), an ending date (1º Jul 2012) and multiple events between this range.<br>\nEach event is related to one day of the calendar (although it is possible to have many events on a single day).  </p>\n\n<p>This data is fetched from a MySQL DB.</p>\n\n<p>Any help or suggestion will be highly appreciated.<br>\nThanks in advance.</p>\n"},{"tags":["mysql","index","ormlite"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":137,"score":0,"question_id":10127296,"title":"ormlite createTableIfNotExists fails if table has index","body":"<p>I have a simple class like this : </p>\n\n<pre><code>@DatabaseTable(tableName = \"VlpTag\")\npublic class VlpTag implements Serializable {\n\n    private static final long serialVersionUID = -4912974444196844860L;\n\n    @DatabaseField(generatedId = true)\n    private int id;\n\n    @DatabaseField(foreign = true, columnName = \"buid\", canBeNull = false, foreignAutoCreate = true, foreignAutoRefresh = true)\n    private VlpVirtualApp vApp;\n\n    @DatabaseField\n    private long lastUpdated;\n\n    @DatabaseField(index=true)\n    private String tagValue;\n\n    @DatabaseField(dataType = DataType.ENUM_INTEGER)\n    private TagType tagType;\n\n    public static enum TagType {\n        UUID, TAG\n    };\n\n    public VlpTag() {\n        // needed by ormlite\n    }\n}\n</code></pre>\n\n<p>Then I use TableUtils to create the table if it doesn't exists :</p>\n\n<pre><code>TableUtils.createTableIfNotExists(MySQLConnection.getInstance()\n            .getConnection(), VlpTag.class);\n</code></pre>\n\n<p>If the table doesn't exist, there is not problem, although it the table exists, ORMLite raise an exception saying that the index exists :</p>\n\n<pre><code>java.sql.SQLException: SQL statement failed: CREATE INDEX `VlpTag_tagValue_idx` ON `VlpTag` ( `tagValue` )\n    at com.j256.ormlite.misc.SqlExceptionUtil.create(SqlExceptionUtil.java:22)\n    at com.j256.ormlite.table.TableUtils.doStatements(TableUtils.java:464)\n    at com.j256.ormlite.table.TableUtils.doCreateTable(TableUtils.java:440)\n    at com.j256.ormlite.table.TableUtils.createTable(TableUtils.java:220)\n    at com.j256.ormlite.table.TableUtils.createTableIfNotExists(TableUtils.java:61)\n    at com.banctecmtl.ca.vlp.controller.listvmupdater.DatabaseUpdater.&lt;init&gt;(DatabaseUpdater.java:47)\n    at com.banctecmtl.ca.vlp.controller.listvmupdater.ListVMUpdater.&lt;init&gt;(ListVMUpdater.java:42)\n    at com.banctecmtl.ca.vlp.controller.VlpController.&lt;init&gt;(VlpController.java:75)\n    at com.banctecmtl.ca.vlp.view.webview.server.VlpControllerServiceImpl.init(VlpControllerServiceImpl.java:32)\n    at javax.servlet.GenericServlet.init(GenericServlet.java:212)\n    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:433)\n    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:256)\n    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)\n    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:616)\n    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)\n    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)\n    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)\n    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)\n    at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:468)\n    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)\n    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)\n    at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)\n    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)\n    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)\n    at org.mortbay.jetty.Server.doStart(Server.java:222)\n    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)\n    at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)\n    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)\n    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)\n    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)\n    at com.google.gwt.dev.DevMode.main(DevMode.java:311)\nCaused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Duplicate key name 'VlpTag_tagValue_idx'\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n    at java.lang.reflect.Constructor.newInstance(Unknown Source)\n    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)\n    at com.mysql.jdbc.Util.getInstance(Util.java:386)\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052)\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)\n    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2002)\n    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)\n    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2624)\n    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2127)\n    at com.mysql.jdbc.PreparedStatement.execute(PreparedStatement.java:1362)\n    at com.j256.ormlite.jdbc.JdbcCompiledStatement.runExecute(JdbcCompiledStatement.java:62)\n    at com.j256.ormlite.table.TableUtils.doStatements(TableUtils.java:458)\n    ... 29 more\n</code></pre>\n\n<p>This bug has already been <a href=\"http://sourceforge.net/tracker/?func=detail&amp;aid=3437795&amp;group_id=297653&amp;atid=1255989\" rel=\"nofollow\">reported on the bug list</a> and I was wondering it was resolved \nbeacause I have the same problem. I use MYSQL and <code>ormlite-core-4.33.jar</code>. </p>\n\n<p>Is there something I'm doing wrong here, or there is a problem with that?</p>\n\n<p>Thanks</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13276490,"title":"mysql find matching key with mismatched value","body":"<p>I am working with a database that has some duplicate data and am trying to write a query that will pull the problem data.  The table looks like:</p>\n\n<pre><code>lpID, pID, pName, etc...\n</code></pre>\n\n<p>where lpID is the unique id for this table and pID is a shared id for the whole db.  I have this to pull matching pID values (16k):</p>\n\n<pre><code>SELECT lp.pID, group_concat(lp.lpID) as lpIDs, group_concat(lp.pName) as names\nFROM lp\nINNER JOIN (\n  SELECT pID\n  FROM lp\n  GROUP BY pID\n  HAVING count(pID) &gt; 1\n) dup ON lp.pID = dup.pID\ngroup by lp.pID\n</code></pre>\n\n<p>Which works, but now I am trying to extend it such that it only pulls the 938 that have mismatched pName values.  Nothing that I try seems to work.  How can I get that done?</p>\n"},{"tags":["mysql","security","encryption","aes","ecb"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13276725,"title":"Using AES_ENCRYPT in another mode","body":"<p>Is it possible to use MySQL's AES_ENCRYPT and AES_DECRYPT functions in a mode other than ECB (like CBC)? Various questions on Stack Overflow talk about how MySQL uses ECB mode and to not use these functions. Am I better off doing the encryption/decryption in the programming language I'm working with?</p>\n"},{"tags":["mysql","query","group-by","range"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1181,"score":1,"question_id":6687534,"title":"group by range in mysql","body":"<pre><code>Table:   \nnew_table                                                    \nuser_number  | diff                  \n     2       |  0                      \n     1       |  28  \n     2       |  32  \n     1       |  40  \n     1       |  53  \n     1       |  59  \n     1       |  101  \n     1       |  105  \n     2       |  108  \n     2       |  129  \n     2       |  130    \n     1       |  144  \n\n\n            |(result)\n            v\n\nrange  | number of users  \n0-20   |  2  \n21-41  |  3  \n42-62  |  1  \n63-83  |  2  \n84-104 |  1  \n105-135|  0  \n136-156|  3\n\n\nselect t.range as [range], count(*) as [number of users]  \nfrom (  \n  select case    \n    when diff between 0 and 20 then ' 0-20'  \n    when diff between 21 and 41 then ' 21-41'  \n    when diff between 42 and 62 then ' 42-62'  \n    when diff between 63 and 83 then ' 63-83'  \n    when diff between 84 and 104 then ' 84-104'  \n    when diff between 105 and 135 then ' 105-135'  \n    else '136-156'   \n     end as range  \n  from new_table) t  \ngroup by t.diff  \n\nError:\n\nYou have an error in your SQL syntax, near '[range], count(*) as [number of users]  \nfrom (  \n  select case  \n    when' at line 1  \n</code></pre>\n"},{"tags":["mysql","sql","exception-handling"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13276337,"title":"Error While importing Schema in sql","body":"<p>Hey guys im trying to import schema from mysql vesion 5.0 to 5.1. Every time i'm trying to import schema I got this error:</p>\n\n<p>Error near Drop Proceduer service_tt_yes'\nMySql.Data.MySqlClient.MySqlException: Column count of mysql.proc is wrong. Expected 20, found 16. The table is probably corrupted.</p>\n\n<p>I try to skip that procedure but error occur in next procedure.</p>\n\n<p>Any solution!</p>\n"},{"tags":["mysql","eventtrigger"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13272330,"title":"MySQL Trigger on UPDATE not sending hours data to stats table","body":"<p>I have a MySQL trigger to update hours into a stats table based on UPDATE query being ran.</p>\n\n<p>The trigger is:</p>\n\n<pre><code>DELIMITER //\n\nCREATE TRIGGER update_stats AFTER UPDATE ON user_hours \n\nFOR EACH ROW\n\nBEGIN\n\n  IF NEW.hours_committed = 'completed' THEN\n\n\n    INSERT INTO hours_statistics (user_id, opportunity_id, completed_hours) VALUES\n\n      (OLD.user_id, OLD.opportunity_id, -OLD.completed_hours),\n\n      (NEW.user_id, NEW.opportunity_id, +NEW.completed_hours)\n\n    ON DUPLICATE KEY UPDATE\n\n      completed_hours = completed_hours + VALUES(completed_hours);\n\n\n  END IF;\n\nEND//\n</code></pre>\n\n<p>Working Query:</p>\n\n<pre><code>UPDATE user_hours JOIN user_calendar USING (user_calendar_id, opportunity_id)\nSET    user_hours.completed_hours = agreed_hours,\n       user_hours.hours_committed = 'completed'\nWHERE  user_hours.hours_committed = 'accepted' \n   AND user_hours.completed_hours IS NULL\n   AND user_calendar.date_start = CURRENT_DATE();\n</code></pre>\n\n<p>I have another query similar to the above which updates the same table but with a little difference that checked completed_hours are not null. The query is as follows:</p>\n\n<pre><code>UPDATE user_hours JOIN user_calendar USING (user_calendar_id, opportunity_id)\nSET    user_hours.hours_committed = 'completed'\nWHERE  user_hours.hours_committed = 'accepted' \n   AND user_hours.completed_hours IS NOT NULL\n   AND user_calendar.date_start = '2012-08-23'\n</code></pre>\n\n<p>The above triggers the update trigger, however in the statistics table the completed_hours show as 0 for this last update query.</p>\n\n<p>Anyone with better knowledge of triggers able to help me out?</p>\n\n<p>Thanks,</p>\n\n<p>Mark</p>\n"},{"tags":["mysql","query"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13276404,"title":"mysql run second query based on time stamp of an id from first query","body":"<p>I have a table \"test\". the stamp gets updated everytime table is updated.</p>\n\n<pre><code>id  |  text    |   stamp  \n__________________________ \n1   |  textA   |   2012-11-06 01:06:34\n2   |  textB   |   2012-11-06 01:01:34\n3   |  textC   |   2012-11-06 01:03:34\n4   |  textD   |   2012-11-06 01:05:34\n5   |  textE   |   2012-11-06 01:02:34\n6   |  textF   |   2012-11-06 01:08:34\n7   |  textG   |   2012-11-06 01:09:34\n8   |  textH   |   2012-11-06 01:04:34\n</code></pre>\n\n<p>I run a query \n\"SELECT * from test ORDER BY stamp DESC LIMIT 3\" (This returns rows with id 7,6 and 1)</p>\n\n<p>Now I have the id of the last row returned (ie 1). How do I use that id to run a second query to fetch next 3 rows where the time stamp &lt; stamp of id ? </p>\n\n<p>Expected result is rows 4,8,3.</p>\n"},{"tags":["mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13275696,"title":"need assistance on constructing sql query","body":"<p>i have three tables like follows:</p>\n\n<p>this one table : <code>m_application_resources</code></p>\n\n<pre><code> resourceid resource_name   menu_group_id   menu_name   creation_date   last_created_by updation_date   last_updated_by\n</code></pre>\n\n<p>and the second table : <code>m_roles</code></p>\n\n<pre><code>roleid  rolename    description creation_date   last_created_by updation_date   last_updated_by\n</code></pre>\n\n<p>and the third table is : <code>m_access_matrix</code></p>\n\n<pre><code>accessid    resourceid  roleid  creation_date   last_created_by updation_date   last_updated_by\n</code></pre>\n\n<p>Relationship for the table is : resourceid and roleid</p>\n\n<p>and this my query </p>\n\n<pre><code>select  am.accessid, ar.resource_name,rls.rolename\nfrom m_application_resources ar, m_roles rls,m_access_matrix am \nwhere ar.resourceid=am.resourceid \n</code></pre>\n\n<p>this returns the following :</p>\n\n<pre><code>ccessid resource_name   rolename\n1   DepartmentAction    Admin\n1   DepartmentAction    Client\n1   DepartmentAction    Doctors\n2   PositionsAction     Admin\n2   PositionsAction     Client\n2   PositionsAction     Doctor\n</code></pre>\n\n<p>the result is wrong and i don't know how to go about.</p>\n\n<p>Ex : DepartmentAction should come only once and the role name should be any one.</p>\n\n<p>Sqlfiddle<a href=\"http://www.sqlfiddle.com/#!2/2fca3/3\" rel=\"nofollow\">Fiddle</a></p>\n\n<p>Please help</p>\n"},{"tags":["php","mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13276128,"title":"Find duplicate rows in mysql simplified example","body":"<p>Confession: a mysql newb requires simple example to locate duplicate rows in somewhat large table. I have searched for and read many other threads with similar titles, but the examples are so complex that I cannot apply them to my basic situation.</p>\n\n<p>A MySQL table has only 5 fields, but there are hundreds of rows. I wish to locate duplicate rows -- I know there is one for sure and wonder if there are others.</p>\n\n<p>Example Row: (rel_id is auto-incrementing, primary key field)</p>\n\n<pre><code>'rel_id' =&gt; 1\n'host' =&gt; 17\n'host_type' =&gt; 'client'\n'rep' =&gt; 7\n'rep_type =&gt; 'cli_mgr'\n</code></pre>\n\n<p>My approach was to:<br>\n1. Read entire table into mysql query<br>\n2. row-by-row compare the 4 data fields to those of previous (\"done\") rows<br>\n3. after comparing a \"new\" row, append it to array of \"done\" rows<br></p>\n\n<p>Here is what I have tried. I am sure that there must be a much simpler solution. You will see that I am bogged down in trying to append the \"new\" row to the array of \"done\" rows:</p>\n\n<pre><code>$rRels = mysql_query(\"SELECT * FROM `rels`\");\n$a = array();\n$e = array();\n$c1 = 0;\n$c2 = 0;\nWhile ($r = mysql_fetch_assoc($rRels)) {\n    $i = $r['rel_id'];\n    $h = $r['host'];\n    $ht = $r['host_type'];\n    $r = $r['rep'];\n    $rt = $r['rep_type'];\n\n    foreach($a as $row) {\n        $xh = $row['host'];\n        $xht = $row['host_type'];\n        $xr = $row['rel'];\n        $xrt = $row['rel_type'];\n\n        if (($h==$xh) &amp;&amp; ($ht==$xht) &amp;&amp; ($r==$xr) &amp;&amp; ($rt==$xrt)) {\n            echo 'Found one&lt;br&gt;';\n            $e[] = $r;\n        }\n        $c2++;\n    }\n    $a = array_merge(array('rel_id'=&gt;$i, 'host'=&gt;$h, 'host_type'=&gt;$ht, 'rep'=&gt;$r, 'rep_type'=&gt;$rt), $a);\n    $c1++;\n}\n\necho '&lt;h3&gt;Duplicate Rows:&lt;/h3&gt;';\nforeach ($e as $row) {\n    print_r($row);\n    echo '&lt;br&gt;';\n}\necho '&lt;br&gt;&lt;br&gt;';\necho 'Counter 1: ' . $c1 . '&lt;br&gt;';\necho 'Counter 2: ' . $c2 . '&lt;br&gt;';\n</code></pre>\n"},{"tags":["java","mysql","tomcat"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13238770,"title":"How to dynamically load values into Tomcat's Context XML file","body":"<p>Given that Tomcat's Context XML file tends to contain sensitive information (often including credentials needed to connect to a Database), how can I dynamically load these values from a source other than the plain-text context.xml?</p>\n"},{"tags":["java","mysql","jpa","eclipselink"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13222677,"title":"@TableGenerator not working with EclipseLink JPA 2.0","body":"<p>I am having a weird issue.\ni am using Table Generation strategy in my JPA application. until recently, I used Toplink persistence provider as the JPA implementation. All worked fine.\nJust now I added some inheritance features that are not supported by TopLink (Table per Class Inheritance), so I had to move to EclipseLink.\nAll works fine, except for the ID Generation.\nHere is the code example which I use for all my unique IDs:</p>\n\n<pre><code>@Id\n@TableGenerator(name=\"INCOME_SEQ\", table=\"SEQUENCE_TABLE\", pkColumnName=\"SEQUENCE_NAME\",\n    valueColumnName=\"SEQUENCE_COUNT\", pkColumnValue=\"INCOME_SEQ\", allocationSize=1)\n@GeneratedValue(strategy=GenerationType.TABLE, generator=\"INCOME_SEQ\")\n@Column(name = \"INCOME_ID\")\nprivate Integer incomeId;\n</code></pre>\n\n<p>The exact same code works with Toplink but does not work with EclipseLink.\nThe Error I get is:</p>\n\n<pre><code>Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Column 'INCOME_ID' cannot be null\nError Code: 1048\n</code></pre>\n\n<p>It seems like the Table generation is not used at all...</p>\n\n<p>Here is the Table Description in my MySql database:\nTable name: SEQUENCE_TABLE</p>\n\n<pre><code>+----------------+--------------+------+-----+---------+-------+\n| Field          | Type         | Null | Key | Default | Extra |\n+----------------+--------------+------+-----+---------+-------+\n| SEQUENCE_NAME  | varchar(64)  | NO   | PRI | NULL    |       |\n| SEQUENCE_COUNT | int(11)      | NO   |     | 0       |       |\n| localized_name | varchar(128) | YES  |     | NULL    |       |\n| USER_ID        | int(11)      | NO   | MUL | 1       |       |\n+----------------+--------------+------+-----+---------+-------+\n</code></pre>\n\n<p>Can anyone please direct me to the problem?? or at least a way to get the actual reason the ID is not being created?</p>\n\n<p>Edit: This is the Income class and Table structure:</p>\n\n<pre><code>    +-------------------------+-------------------------------------------------------------------------------+------+-----+---------+-------+\n| Field                   | Type                                                                          | Null | Key | Default | Extra |\n+-------------------------+-------------------------------------------------------------------------------+------+-----+---------+-------+\n| INCOME_ID               | int(11)                                                                       | NO   | PRI | NULL    |       |\n| REFERENCE_DOCUMENT_ID   | varchar(32)                                                                   | YES  |     | NULL    |       |\n| CLIENT_ID               | int(9)                                                                        | NO   | MUL | NULL    |       |\n| income_date             | datetime                                                                      | NO   |     | NULL    |       |\n| MOVEMENT_CATEGORY_ID    | int(11)                                                                       | NO   | MUL | NULL    |       |\n| SUM_AFTER_TAX           | decimal(10,2)                                                                 | YES  |     | 0.00    |       |\n| TOTAL_SUM               | decimal(10,2)                                                                 | NO   |     | NULL    |       |\n| TAX_SUM                 | decimal(10,2)                                                                 | NO   |     | 0.00    |       |\n| VAT_PERCENT             | decimal(10,2)                                                                 | NO   |     | NULL    |       |\n| DESCRIPTION             | varchar(100)                                                                  | YES  |     | NULL    |       |\n| STATUS                  | smallint(5) unsigned                                                          | YES  |     | 0       |       |\n| REFERENCE_DOCUMENT_TYPE | enum('MANUAL_INVOICE','MANUAL_RECEIPT','INVOICE','RECEIPT','INVOICE_RECEIPT') | YES  |     | NULL    |       |\n| USER_ID                 | int(11)                                                                       | NO   | MUL | 1       |       |\n| UNIQUE_USER_SEQUENCE    | int(10) unsigned                                                              | YES  |     | NULL    |       |\n+-------------------------+-------------------------------------------------------------------------------+------+-----+---------+-------+\n</code></pre>\n\n<p>Edit: I ran the app with EclipseLink Logging level set to finest, but I still can't see anything wrong. I even can see the sequencing being correctly initialized:</p>\n\n<pre><code>  [EL Finest]: 2012-11-07 20:37:00.359--ServerSession(1832413009)--Connection(1484802679)--Thread(Thread[pool-1-thread-2,5,main])--Connection released to connection pool [default].\n[EL Finest]: 2012-11-07 20:37:00.405--ServerSession(1832413009)--Thread(Thread[pool-1-thread-2,5,main])--sequencing connected, state is NoPreallocation_State\n[EL Finest]: 2012-11-07 20:37:00.406--ServerSession(1832413009)--Thread(Thread[pool-1-thread-2,5,main])--sequence SEQ_GEN_IDENTITY: preallocation size 1\n[EL Finest]: 2012-11-07 20:37:00.406--ServerSession(1832413009)--Thread(Thread[pool-1-thread-2,5,main])--sequencing connected, state is Preallocation_Transaction_NoAccessor_State\n[EL Finest]: 2012-11-07 20:37:00.406--ServerSession(1832413009)--Thread(Thread[pool-1-thread-2,5,main])--sequence RECEIPTS_SEQ: preallocation size 1\n[EL Finest]: 2012-11-07 20:37:00.406--ServerSession(1832413009)--Thread(Thread[pool-1-thread-2,5,main])--sequence INCOME_SEQ: preallocation size 1\n\n    [EL Finest]: 2012-11-07 20:38:09.264--UnitOfWork(514772947)--Thread(Thread[AWT-EventQueue-1,6,main])--persist() operation called on:  555 וובה.\n[EL Finer]: 2012-11-07 20:38:09.265--UnitOfWork(514772947)--Thread(Thread[AWT-EventQueue-1,6,main])--begin unit of work commit\n[EL Finest]: 2012-11-07 20:38:09.288--UnitOfWork(514772947)--Thread(Thread[AWT-EventQueue-1,6,main])--Execute query DoesExistQuery(referenceClass=MovementCategories )\n[EL Finest]: 2012-11-07 20:38:09.29--UnitOfWork(514772947)--Thread(Thread[AWT-EventQueue-1,6,main])--Execute query InsertObjectQuery(חש' ידנית 555 וובה)\n[EL Finest]: 2012-11-07 20:38:09.291--ServerSession(1832413009)--Connection(1484802679)--Thread(Thread[AWT-EventQueue-1,6,main])--Connection acquired from connection pool [default].\n[EL Finer]: 2012-11-07 20:38:09.291--ClientSession(2117615354)--Connection(1484802679)--Thread(Thread[AWT-EventQueue-1,6,main])--begin transaction\n[EL Fine]: 2012-11-07 20:38:09.293--ClientSession(2117615354)--Connection(1484802679)--Thread(Thread[AWT-EventQueue-1,6,main])--INSERT INTO income (INCOME_ID, DESCRIPTION, INCOME_DATE, REFERENCE_DOCUMENT_ID, REFERENCE_DOCUMENT_TYPE, STATUS, SUM_AFTER_TAX, TAX_SUM, TOTAL_SUM, UNIQUE_USER_SEQUENCE, VAT_PERCENT, CLIENT_ID, MOVEMENT_CATEGORY_ID) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n    bind =&gt; [null, null, 2012-11-07 20:37:55.225, 555, MANUAL_INVOICE, 1, 100.0, 16.5, 116.5, null, 16.5, 334, 3]\n</code></pre>\n\n<p>The only clue I see is the  <code>Preallocation_Transaction_NoAccessor_State</code> property...\nMaybe someone can help me understand this. What should be the logging output in case of sequenced primary key ID? </p>\n"},{"tags":["mysql","sql","database","wordpress","query"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13275271,"title":"SQL Joining another table based on the ID of the initial table","body":"<p>I really just can't seem to grasb the sytanx of SQL Joins, etc ... so I'm needing some help with this (which I think is quite simple)</p>\n\n<p>I'm querying <code>bid_tag</code> as follows:</p>\n\n<pre><code>SELECT paid_date, term, pet_id FROM bid_tag WHERE active = 1\n</code></pre>\n\n<p>And I need to use the <code>pet_id</code> to then grab some information from another table <code>wp_postmeta</code>, where the table is actually in a <code>meta_key</code> <code>meta_value</code> structure (WordPress) ...</p>\n\n<p>So I need to grab the <code>meta_value</code> of <code>meta_key</code> \"bid_name\", for example... amongst other values.</p>\n\n<pre><code>TABLE\nid | meta_key | meta_value\n1    bid_name    Max\n</code></pre>\n\n<p>That <code>ID</code> is the same <code>ID</code> that I need to connect the initial table to...</p>\n\n<p>I really appreciate it!</p>\n"},{"tags":["python","mysql","django","sqlalchemy","django-orm"],"answer_count":8,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":244,"score":4,"question_id":2110238,"title":"Merging duplicates in a list? - Question is more complex than it seems","body":"<p>So I have a huge list of entries in a DB (<strong>MySql</strong>)</p>\n\n<p>I'm using <strong>Python</strong> and <strong>Django</strong> in the creation of my web application.</p>\n\n<p>This is the base Django model I'm using:</p>\n\n<pre><code>class DJ(models.Model):\n    alias = models.CharField(max_length=255)\n    #other fields...\n</code></pre>\n\n<p><strong>In my DB I have</strong> now <strong>duplicates</strong></p>\n\n<blockquote>\n  <p>eg. <em>Above &amp; Beyond</em>, <em>Above and Beyond</em>, <em>Above Beyond</em>, <em>DJ Above and Beyond</em>, \n         <em>Disk Jokey Above and Beyond</em>, ...</p>\n</blockquote>\n\n<p>This is a problem... as it blows a big hole in my DB and therefore my application.</p>\n\n<hr>\n\n<p>I'm sure other people have encountered this problem and thought about it.</p>\n\n<p>My ideas are the following:</p>\n\n<ul>\n<li><p>Create a set of rules so a new entry cannot be created?</p>\n\n<blockquote>\n  <p>eg. <strong>\"DJ Above and Beyond\"</strong> cannot be\n  created because <strong>\"Above &amp; Beyond\"</strong> is in\n  the DB</p>\n</blockquote></li>\n<li><p>Relate these aliases to each other somehow?</p>\n\n<blockquote>\n  <p>eg. relate <strong>\"DJ Above and Beyond\"</strong> to <strong>\"Above &amp; Beyond\"</strong></p>\n</blockquote></li>\n</ul>\n\n<hr>\n\n<p>I have literally no clue how to go on about this, even if someone could point me into a direction that would be very helpful.</p>\n\n<p>Any help would be very much appreciated! Thank you guys.</p>\n"},{"tags":["java","mysql","resultset"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13260092,"title":"Trying to close result set using type_forward_only before end of data set","body":"<p>We have a Java app accessing a MySql database. Some of the data sets are too large to return to the client, so we are fetching them row by row by setting up the statement as follows:</p>\n\n<pre><code>_stmt = _conn.createStatement(java.sql.ResultSet.TYPE_FORWARD_ONLY, java.sql.ResultSet.CONCUR_READ_ONLY);\n_stmt.setFetchSize(_statementFetchSize);\n</code></pre>\n\n<p>However, in the web app, if a user has not fetched all the rows, and we close the result set, the system takes a long time (proportionate to the full data set that would be returned).  Our hunch is that the statement has to scroll to the end of the result set before it can close.  Has anyone seen this behavior?  </p>\n\n<p>EDIT: going to the command line and issuing \"kill query 'session id'\" works immediately.  My assumption is that trying to issue the cancel from the same connection is blocked.  I could open another connection to kill my session, but how can I identify the correct session id?</p>\n"},{"tags":["php","mysql","math","time"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13275706,"title":"Get average time between several dates for one entry","body":"<p>I am not really sure how to explain this, but basically what I am trying to do is get the average time that it takes between a set of dates. This is what the database table looks like</p>\n\n<pre><code>id | offer_id | user |    date    | date_completed\n----------------------------------------------------\n1  |   123    | test | 1352265988 |   1352265995\n2  |   123    | admin| 1352266004 |   1352266022\n3  |   123    | kira | 1352264754 |   1352271946\n</code></pre>\n\n<p>I need to get the average time between the 2 timestamps and calculate them together so I can echo it out in my code. I am sure this would be done with a <code>foreach</code> statement, but I have no idea how to go about doing it. If there is anyone that can point me in the right direction that would be great!</p>\n"},{"tags":["php","mysql","arrays"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13255226,"title":"Loading mysql calls into arrays","body":"<p>Normally have not had to do this alot but my process didn't seem to work correctly this time so I am asking for some clarification</p>\n\n<p>This works for a single item in the query:</p>\n\n<pre><code>    $query=\"SELECT data1 as product FROM Products ORDER BY Title\"; \n    $result = mysql_query($query)\n        or die(\"Query failed -\".$query);        \n    $rows=array();\n    while($row = mysql_fetch_array($result, MYSQL_BOTH)) {\n        $rows[] = $row;\n    }\n</code></pre>\n\n<p>As I said this works fine for a single item being returned all of the items returned in the query end up in an array called $rows</p>\n\n<pre><code>    $query=\"SELECT data1 as product, data2 as info FROM Products ORDER BY Title\"; \n    $result = mysql_query($query)\n        or die(\"Query failed -\".$query);        \n    $i=0;\n    $data1=array();\n    $data2=array();\n\n    while($row = mysql_fetch_array($result, MYSQL_BOTH)) {\n        $data1[$i] = $row[0];\n        $data2[$i++] = $row[1];\n    }\n</code></pre>\n\n<p>This does not seem to do the same thing or I missed something.</p>\n\n<p>Am I missing something? \nIf not then I need to look at something else as my issue but need to make sure about this.</p>\n\n<p>The result I desire is two arrays one containing the all of first items from the query result and the second array containing all of the second items from the query result.</p>\n"},{"tags":["mysql","hibernate","jpa","playframework","full-text-search"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13095283,"title":"How can I search playframework JPA entities without sacrificing good performance?","body":"<p>I'm using playframework 1.2.4 and JPA for persistent storage.  In the <a href=\"http://www.playframework.org/documentation/1.2.4/jpa#Findusingasimplifiedquery\" rel=\"nofollow\">playframework documentation</a> there are many references of using the \"like\" operator to find entities.  I can see using this  for a search operation, but because the \"like\" operator does a full table scan, this is going to be really slow as I have more and more entities.  In other words, it doesn't scale.  What is a scalable way to search for entities efficiently?  I know that Mysql has a FullText feature to solve this problem, but how can I access this feature using JPA in playframework?</p>\n"},{"tags":["mysql","sql","database","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":32,"score":0,"question_id":13275137,"title":"Regarding formatting of the query","body":"<p>I have made an application in which I have put the sql queries in java method as below..</p>\n\n<pre><code>private static String getSaleTransactionsQuery(final String currentTradingDate){\n\n        final String query =\n            \" SELECT '990' line_code, \" +\n            \" sum(toti_wag.TTIW_CUST_CNT) amount \" +\n            \" FROM total_till_wag toti_wag \" +\n            \" where toti_wag.TOTI_TRADING_DATE = '\" + currentTradingDate + \"' \";\n\n        return query;\n    }\n</code></pre>\n\n<p>Now when I want to filter out sql queries then I have to copy this query on the sql file and have to manually remove the quotes(\"\") and the plus(+) sign in order to make them as pure sql and then have to execute them to see the query output , is there any other tool which will format all these means remove the quotes and the plus sign ,please advise</p>\n"},{"tags":["mysql","vb.net"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13275649,"title":"How do I check if a user has a certain role in their profile?","body":"<p><strong>Good-day,</strong></p>\n\n<p>I need some help.  I'm trying to query my MySQL database to see if the currently logged on user to my application has certain rights/role.  If the queried value does exist, then I want to enable a certain menu item.</p>\n\n<p>I checked out most of the similar questions as I was typing my question, but they mostly deal with ASP and JSP so that confuses me even further (as I haven't studied those yet).  I'm still learning VB.Net and MySQL.</p>\n\n<p>Your help would be greatly appreciated.</p>\n\n<p><strong>Here's my code - what am I not doing right?:</strong></p>\n\n<pre><code>Public Sub checkAccessLevel()\n    Dim dbConn As New MySqlConnection(String.Format(\"Server={0};Port={1};Uid={2};Password={3};Database=parts\", FormLogin.ComboBoxServerIP.SelectedItem, My.Settings.DB_Port, My.Settings.DB_UserID, My.Settings.DB_Password))\n    Dim dbQuery As String = \"SELECT Level = 'Admin' FROM users WHERE username = '\" &amp; FormLogin.TextBoxUsername.Text &amp; \"'\"\n    Dim dbAdapter As New MySqlDataAdapter(dbQuery, dbConn)\n    Dim dbData As MySqlDataReader\n\n    Try\n        dbConn.Open()\n        dbData = dbAdapter.SelectCommand.ExecuteReader\n        If dbData.HasRows() = True Then\n            TSMenuItemOptions.Enabled = True\n            Me.Refresh()\n        Else\n            TSMenuItemOptions.Enabled = False\n        End If\n        dbData.Close()\n\n    Catch ex As Exception\n        MessageBox.Show(\"A DATABASE ERROR HAS OCCURED\" &amp; vbCrLf &amp; vbCrLf &amp; ex.Message &amp; vbCrLf &amp; _\n                            vbCrLf + \"Please report this to the IT/Systems Helpdesk at Ext 131.\")\n    End Try\n    dbAdapter.Dispose()\n    dbConn.Close()\nEnd Sub\n</code></pre>\n"},{"tags":["mysql","database-design"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13261650,"title":"Aggregate Query depending on several tables","body":"<p>I want to create a database with information of employees, their jobs, salaries and projects</p>\n\n<p>I want to keep information of the cost of a project (real value of project and the days a employee invested) </p>\n\n<p>For employee and project each Employee has one role on the Project through the PK constraint, and allows for the addition of a new role type (\"Tertiary\" perhaps) in the future.</p>\n\n<pre><code>    CREATE TABLE Employee(\n      EmployeeID  INTEGER      NOT NULL PRIMARY KEY,\n      Name        VARCHAR(30)  NOT NULL,\n      Sex         CHAR(1)      NOT NULL,\n      Address     VARCHAR(80)  NOT NULL,\n      Security    VARCHAR(15)  NOT NULL,\n      DeptID      INTEGER      NOT NULL,        \n      JobID       INTEGER      NOT NULL\n    );\n\n    CREATE TABLE Departments  (\n        DeptID   INTEGER     NOT NULL PRIMARY KEY,\n        DeptName VARCHAR(30) NOT NULL\n    );\n\n    CREATE TABLE Jobs (\n        JobID            INTEGER      NOT NULL PRIMARY KEY,\n        JobName          VARCHAR(30)  NOT NULL,\n        JobSalary        DOUBLE(15,3) NOT NULL default '0.000', \n        JobSalaryperDay  DOUBLE(15,3) NOT NULL default '0.000', \n        DeptID           INTEGER      NOT NULL\n    );\n\n\n    CREATE TABLE Project(\n      ProjectID    INTEGER NOT NULL PRIMARY KEY,\n      ProjectDesc   VARCHAR(200) NOT NULL,\n      StartDate     DATE NOT NULL,\n      EndDate       DATE NOT NULL, \n      DaysOfWork    INTEGER NOT NULL,\n      NoEmployees   INTEGER NOT NULL,\n      EstimatedCost DOUBLE(15,3) NOT NULL default '0.000', \n      RealCost      DOUBLE(15,3) NOT NULL default '0.000' \n    );\n\n\n    CREATE TABLE `Project-Employee`(\n      ProjectID    INTEGER NOT NULL,\n      EmployeeID   INTEGER NOT NULL,\n      Note         VARCHAR(200),\n      DaysWork     INTEGER NOT NULL,\n      CONSTRAINT fk_ProjectID  FOREIGN KEY (ProjectID)  REFERENCES Project(ProjectID),\n      CONSTRAINT fk_EmployeeID FOREIGN KEY (EmployeeID) REFERENCES Employee(EmployeeID)\n    );\n\n\nINSERT INTO `Departments` VALUES (1, 'Outsourcing');\nINSERT INTO `Departments` VALUES (2, 'Technician');\nINSERT INTO `Departments` VALUES (3, 'Administrative');\n\nINSERT INTO `Jobs` VALUES (1, 'welder'    ,500.550,16.7 ,2);\nINSERT INTO `Jobs` VALUES (2, 'turner'    ,500.100,16.67,2);\nINSERT INTO `Jobs` VALUES (3, 'assistant' ,650.100,21.67,2);\nINSERT INTO `Jobs` VALUES (4, 'supervisor',800.909,26.70,3);\nINSERT INTO `Jobs` VALUES (5, 'manager'   ,920.345,30.68,3);\nINSERT INTO `Jobs` VALUES (6, 'counter'   ,520.324,17.35,1);\n\n\n\nINSERT INTO `Employee` VALUES (10, 'Joe',  'M', 'Anywhere', '927318344', 1, 3);\nINSERT INTO `Employee` VALUES (20, 'Moe',  'M', 'Anywhere', '827318322', 2, 3);\nINSERT INTO `Employee` VALUES (30, 'Jack', 'M', 'Anywhere', '927418343', 3, 4);\nINSERT INTO `Employee` VALUES (40, 'Marge','F', 'Evererre', '127347645', 1, 6);\nINSERT INTO `Employee` VALUES (50, 'Greg' ,'M', 'Portland', '134547633', 3, 5);\n\n\nINSERT INTO `Project` VALUES (1, 'The very first', '2008-7-04' , '2008-7-24' , 20, 5, 3000.50, 2500.00);\nINSERT INTO `Project` VALUES (2, 'Second one pro', '2008-8-01' , '2008-8-30' , 30, 5, 6000.40, 6100.40);\n\n\nINSERT INTO `Project-Employee` VALUES (1, 10, 'Worked all days'    , 20);\nINSERT INTO `Project-Employee` VALUES (1, 20, 'Worked just in defs', 11);\nINSERT INTO `Project-Employee` VALUES (1, 30, 'Worked just in defs', 17);\nINSERT INTO `Project-Employee` VALUES (1, 40, 'Contability '       , 8);\nINSERT INTO `Project-Employee` VALUES (1, 50, 'Managed the project', 8);\n</code></pre>\n\n<p>So to get the total amount of the cost of a project and have it for future Work quote I would just sum the working days of each job for each employee in an aggregate query. </p>\n\n<p>What would be the query to sum all working days knowing the employees involved in a particular project to know the cost generated for their work, <strong>Is it possible to know this with this design?</strong></p>\n\n<p>So lets suppose I know that in project 1, 5 employees were involved, and I know by other table \"jobs\" the salary I would pay each one of them per day</p>\n\n<p>I am doing some queries <a href=\"http://sqlfiddle.com/#!2/4744e\" rel=\"nofollow\">here with sqlfiddle</a></p>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code> CREATE TABLE `Sexes` (\n   Sex char(1) primary key\n );\n INSERT INTO Sexes values ('M');\n INSERT INTO Sexes values ('F');\n\nCREATE TABLE `Employee`(\n  EmployeeID  INTEGER      NOT NULL PRIMARY KEY,\n  Name        VARCHAR(130)  NOT NULL,\n  Sex         CHAR(1)      NOT NULL,\n  Address     VARCHAR(380)  NOT NULL,\n  Security    VARCHAR(15)  NOT NULL,\n  FOREIGN KEY (Sex) references Sexes (Sex),\n  CONSTRAINT `uc_EmployeeInfo` UNIQUE (`EmployeeID`,`Name`,`Security`)           \n);\n\nCREATE TABLE `Department`  (\n  DeptID   INTEGER     NOT NULL PRIMARY KEY,\n  DeptName VARCHAR(30) NOT NULL,\n  CONSTRAINT `uc_DeptName` UNIQUE (`DeptID`,`DeptName`)\n);\n\nCREATE TABLE `Dept-Employee`(\n  EmployeeID   INTEGER NOT NULL,          \n  DeptID       INTEGER NOT NULL,     \n  CONSTRAINT fk_DeptID     FOREIGN KEY (DeptID)     REFERENCES `Department`(DeptID),\n  CONSTRAINT fk_EmployeeID FOREIGN KEY (EmployeeID) REFERENCES `Employee`(EmployeeID)\n);\n\n CREATE TABLE `Dept-Manager`(\n  EmployeeID   INTEGER NOT NULL,          \n  DeptID       INTEGER NOT NULL,\n  CONSTRAINT fk_DeptIDs     FOREIGN KEY (DeptID)     REFERENCES `Department`(DeptID),\n  CONSTRAINT fk_EmployeeIDs FOREIGN KEY (EmployeeID) REFERENCES `Employee`(EmployeeID)\n);\n\nCREATE TABLE `Jobs` (\n  JobID            INTEGER      NOT NULL PRIMARY KEY,\n  JobName          VARCHAR(30)  NOT NULL,\n  JobSalary        DECIMAL(7,3) NOT NULL default '0000.000', \n  JobSalaryperDay  DECIMAL(7,3) NOT NULL default '0000.000', \n  CONSTRAINT `uc_jobs` UNIQUE (`JobID`,`JobName`)\n);\n\nCREATE TABLE `Jobs-Employee`(\n  EmployeeID   INTEGER NOT NULL,\n  JobID        INTEGER NOT NULL,\n  CONSTRAINT fk_JobIDs       FOREIGN KEY (JobID)      REFERENCES `Jobs`(JobID),\n  CONSTRAINT fk_EmployeeIDss FOREIGN KEY (EmployeeID) REFERENCES `Employee`(EmployeeID)\n);\n\nCREATE TABLE `Project`(\n  ProjectID     INTEGER NOT NULL PRIMARY KEY,\n  ProjectName   VARCHAR(200) NOT NULL,\n  StartDate     DATE    NOT NULL,\n  DaysOfWork    INTEGER NOT NULL,\n  NoEmployees   INTEGER NOT NULL,\n  EstimatedCost DECIMAL(9,3) NOT NULL default '000000.000', \n  RealCost      DECIMAL(9,3) NOT NULL default '000000.000', \n  CONSTRAINT `uc_project` UNIQUE (`ProjectID`,`ProjectName`)           \n);\n\nCREATE TABLE `Project-Employee`(\n  ProjectID    INTEGER NOT NULL,\n  EmployeeID   INTEGER NOT NULL,\n  Note         VARCHAR(200),\n  DaysWork     INTEGER NOT NULL,\n  CONSTRAINT fk_ProjectIDsss  FOREIGN KEY (ProjectID)  REFERENCES `Project`(ProjectID),\n  CONSTRAINT fk_EmployeeIDsss FOREIGN KEY (EmployeeID) REFERENCES `Employee`(EmployeeID)\n);\n\n\n    INSERT INTO `Department` VALUES (1, 'Outsourcing');\n    INSERT INTO `Department` VALUES (2, 'Technician');\n    INSERT INTO `Department` VALUES (3, 'Administrative');\n\n    INSERT INTO `Jobs` VALUES (1, 'welder'    ,500.550, 16.7 );\n    INSERT INTO `Jobs` VALUES (2, 'turner'    ,500.100, 16.67);\n    INSERT INTO `Jobs` VALUES (3, 'assistant' ,650.100, 21.67);\n    INSERT INTO `Jobs` VALUES (4, 'supervisor',800.909, 26.70);\n    INSERT INTO `Jobs` VALUES (5, 'manager'   ,920.345, 30.68);\n    INSERT INTO `Jobs` VALUES (6, 'counter'   ,520.324, 17.35);\n\n    INSERT INTO `Employee` VALUES (10, 'Joe',  'M', 'Joewhere', '927318344');\n    INSERT INTO `Employee` VALUES (20, 'Moe',  'M', 'Moewhere', '827318322');\n    INSERT INTO `Employee` VALUES (30, 'Jack', 'M', 'Jaswhere', '927418343');\n    INSERT INTO `Employee` VALUES (40, 'Marge','F', 'Evererre', '127347645');\n    INSERT INTO `Employee` VALUES (50, 'Greg' ,'M', 'Portland', '134547633');\n\n    INSERT INTO `Dept-Employee`  VALUES (10,1);\n    INSERT INTO `Dept-Employee`  VALUES (20,2);\n    INSERT INTO `Dept-Employee`  VALUES (30,3);\n    INSERT INTO `Dept-Employee`  VALUES (40,1);\n    INSERT INTO `Dept-Employee`  VALUES (50,3);\n\n    INSERT INTO `Jobs-Employee`  VALUES (10,3);\n    INSERT INTO `Jobs-Employee`  VALUES (20,3);\n    INSERT INTO `Jobs-Employee`  VALUES (30,4);\n    INSERT INTO `Jobs-Employee`  VALUES (40,6);\n    INSERT INTO `Jobs-Employee`  VALUES (50,5);\n\n    INSERT INTO `Project` VALUES (1, 'The very first', '2008-7-04' , 20, 5, 3000.50, 2500.00);\n    INSERT INTO `Project` VALUES (2, 'Second one pro', '2008-8-01' , 30, 5, 6000.40, 6100.40);\n\n    INSERT INTO `Project-Employee` VALUES (1, 10, 'Worked all days'    , 20);\n    INSERT INTO `Project-Employee` VALUES (1, 20, 'Worked just in defs', 11);\n    INSERT INTO `Project-Employee` VALUES (1, 30, 'Worked just in defs', 17);\n    INSERT INTO `Project-Employee` VALUES (1, 40, 'Contability '       , 8);\n    INSERT INTO `Project-Employee` VALUES (1, 50, 'Managed the project', 8);\n</code></pre>\n\n<p>To the new structure I did this </p>\n\n<pre><code>CREATE VIEW `Emp-Job` as\nSELECT e.*,j.jobID  \nFROM  Employee e,`Jobs-Employee` j\nWHERE e.EmployeeID = j.EmployeeID;\n\n\n\nCREATE VIEW `employee_pay` as\nselect e.*, j.jobname, j.jobsalary, j.jobsalaryperday\nfrom `Emp-Job` e\ninner join `Jobs` j\n        on e.JobID = j.JobID;\n\ncreate view project_pay as \nselect pe.projectid, pe.employeeid, pe.dayswork,\n       e.jobsalaryperday, (e.jobsalaryperday * dayswork) as total_salary\nfrom `Project-Employee` pe\ninner join `employee_pay` e\n        on e.employeeid = pe.employeeid\n</code></pre>\n"},{"tags":["mysql","magento","grid","indexes"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13275515,"title":"Customized Customer Grid causing MySQL table scans and filesorts aka slow performance","body":"<p>Magento Enterprise. 1.10.1.1. The data set of customers and addresses are semi-large (125k+) CSRs are often on this grid (sometimes 25+ concurrent users at a time).</p>\n\n<p>Here is the code snippet were the collection is being generated in the Customer <code>Grid.php</code> <code>Block</code> file.  Nothing fancy or out of ordinary, simply adding attributes to the collection mainly.</p>\n\n<pre><code>$collection = Mage::getResourceModel('customer/customer_collection')\n    -&gt;addNameToSelect()\n    -&gt;addAttributeToSelect('email')\n    -&gt;addAttributeToSelect('group_id')\n    -&gt;addAttributeToSelect('prod_codes')\n    -&gt;addAttributeToSelect('last_called_date')\n    -&gt;addAttributeToSelect('time_zone')\n    -&gt;addAttributeToSelect('salesrep')\n    -&gt;addAttributeToSelect('do_not_call')\n    -&gt;addAttributeToSelect('club_member')\n    -&gt;addAttributeToSelect('call_back_date')\n    -&gt;addAttributeToSelect('marketing_code_outcome')\n    -&gt;joinAttribute('billing_postcode', 'customer_address/postcode', 'default_billing', null, 'left')\n    -&gt;joinAttribute('billing_city', 'customer_address/city', 'default_billing', null, 'left')\n    -&gt;joinAttribute('billing_telephone', 'customer_address/telephone', 'default_billing', null, 'left')\n    -&gt;joinAttribute('billing_region', 'customer_address/region', 'default_billing', null, 'left');\n\n$this-&gt;setCollection($collection);\n</code></pre>\n\n<p>Generates this query, which is misbehaving causing very long load times while in the customer grid:</p>\n\n<pre><code>SELECT `e`.*, `_table_prefix`.`value` AS `prefix`, `_table_firstname`.`value` AS `firstname`, `_table_middlename`.`value` AS `middlename`, `_table_lastname`.`value` AS `lastname`, `_table_suffix`.`value` AS `suffix`, CONCAT(IF(_table_prefix.value IS NOT NULL AND _table_prefix.value != \"\", CONCAT(TRIM(_table_prefix.value),\" \"), \"\"),TRIM(_table_firstname.value),IF(_table_middlename.value IS NOT NULL AND _table_middlename.value != \"\", CONCAT(\" \",TRIM(_table_middlename.value)), \"\"),\" \",TRIM(_table_lastname.value),IF(_table_suffix.value IS NOT NULL AND _table_suffix.value != \"\", CONCAT(\" \",TRIM(_table_suffix.value)), \"\")) AS `name`, `_table_default_billing`.`value` AS `default_billing`, `_table_billing_postcode`.`value` AS `billing_postcode`, `_table_billing_city`.`value` AS `billing_city`, `_table_billing_telephone`.`value` AS `billing_telephone`, `_table_billing_region`.`value` AS `billing_region` FROM `customer_entity` AS `e` LEFT JOIN `customer_entity_varchar` AS `_table_prefix` ON (`_table_prefix`.`entity_id` = `e`.`entity_id`) AND (`_table_prefix`.`attribute_id` = '4') LEFT JOIN `customer_entity_varchar` AS `_table_firstname` ON (`_table_firstname`.`entity_id` = `e`.`entity_id`) AND (`_table_firstname`.`attribute_id` = '5') LEFT JOIN `customer_entity_varchar` AS `_table_middlename` ON (`_table_middlename`.`entity_id` = `e`.`entity_id`) AND (`_table_middlename`.`attribute_id` = '6') LEFT JOIN `customer_entity_varchar` AS `_table_lastname` ON (`_table_lastname`.`entity_id` = `e`.`entity_id`) AND (`_table_lastname`.`attribute_id` = '7') LEFT JOIN `customer_entity_varchar` AS `_table_suffix` ON (`_table_suffix`.`entity_id` = `e`.`entity_id`) AND (`_table_suffix`.`attribute_id` = '8') LEFT JOIN `customer_entity_int` AS `_table_default_billing` ON (`_table_default_billing`.`entity_id` = `e`.`entity_id`) AND (`_table_default_billing`.`attribute_id` = '13') LEFT JOIN `customer_address_entity_varchar` AS `_table_billing_postcode` ON (`_table_billing_postcode`.`entity_id` = `_table_default_billing`.`value`) AND (`_table_billing_postcode`.`attribute_id` = '29') LEFT JOIN `customer_address_entity_varchar` AS `_table_billing_city` ON (`_table_billing_city`.`entity_id` = `_table_default_billing`.`value`) AND (`_table_billing_city`.`attribute_id` = '25') LEFT JOIN `customer_address_entity_varchar` AS `_table_billing_telephone` ON (`_table_billing_telephone`.`entity_id` = `_table_default_billing`.`value`) AND (`_table_billing_telephone`.`attribute_id` = '30') LEFT JOIN `customer_address_entity_varchar` AS `_table_billing_region` ON (`_table_billing_region`.`entity_id` = `_table_default_billing`.`value`) AND (`_table_billing_region`.`attribute_id` = '27') WHERE (e.entity_type_id = '1') ORDER BY CONCAT(IF(_table_prefix.value IS NOT NULL AND _table_prefix.value != \"\", CONCAT(TRIM(_table_prefix.value),\" \"), \"\"),TRIM(_table_firstname.value),IF(_table_middlename.value IS NOT NULL AND _table_middlename.value != \"\", CONCAT(\" \",TRIM(_table_middlename.value)), \"\"),\" \",TRIM(_table_lastname.value),IF(_table_suffix.value IS NOT NULL AND _table_suffix.value != \"\", CONCAT(\" \",TRIM(_table_suffix.value)), \"\")) desc LIMIT 20 OFFSET 60\n</code></pre>\n\n<p>an <code>EXPLAIN</code> on the query shows, NOTE the Extra on table e, <em>Using temporary and Using filesort</em>:</p>\n\n<pre><code>*************************** 1. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: e\n         type: ref\npossible_keys: IDX_ENTITY_TYPE\n          key: IDX_ENTITY_TYPE\n      key_len: 2\n          ref: const\n         rows: 55556\n        Extra: Using temporary; Using filesort\n*************************** 2. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: _table_prefix\n         type: eq_ref\npossible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_VARCHAR_ATTRIBUTE,FK_CUSTOMER_VARCHAR_ENTITY,IDX_VALUE\n          key: IDX_ATTRIBUTE_VALUE\n      key_len: 6\n          ref: redcooper_prod.e.entity_id,const\n         rows: 1\n        Extra:\n*************************** 3. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: _table_firstname\n         type: eq_ref\npossible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_VARCHAR_ATTRIBUTE,FK_CUSTOMER_VARCHAR_ENTITY,IDX_VALUE\n          key: IDX_ATTRIBUTE_VALUE\n      key_len: 6\n          ref: redcooper_prod.e.entity_id,const\n         rows: 1\n        Extra:\n*************************** 4. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: _table_middlename\n         type: eq_ref\npossible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_VARCHAR_ATTRIBUTE,FK_CUSTOMER_VARCHAR_ENTITY,IDX_VALUE\n          key: IDX_ATTRIBUTE_VALUE\n      key_len: 6\n          ref: redcooper_prod.e.entity_id,const\n         rows: 1\n        Extra:\n*************************** 5. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: _table_lastname\n         type: eq_ref\npossible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_VARCHAR_ATTRIBUTE,FK_CUSTOMER_VARCHAR_ENTITY,IDX_VALUE\n          key: IDX_ATTRIBUTE_VALUE\n      key_len: 6\n          ref: redcooper_prod.e.entity_id,const\n         rows: 1\n        Extra:\n*************************** 6. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: _table_suffix\n         type: eq_ref\npossible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_VARCHAR_ATTRIBUTE,FK_CUSTOMER_VARCHAR_ENTITY,IDX_VALUE\n          key: IDX_ATTRIBUTE_VALUE\n      key_len: 6\n          ref: redcooper_prod.e.entity_id,const\n         rows: 1\n        Extra:\n*************************** 7. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: _table_default_billing\n         type: eq_ref\npossible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_INT_ATTRIBUTE,FK_CUSTOMER_INT_ENTITY,IDX_VALUE\n          key: IDX_ATTRIBUTE_VALUE\n      key_len: 6\n          ref: redcooper_prod.e.entity_id,const\n         rows: 1\n        Extra:\n*************************** 8. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: _table_billing_postcode\n         type: eq_ref\npossible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_ADDRESS_VARCHAR_ATTRIBUTE,FK_CUSTOMER_ADDRESS_VARCHAR_ENTITY,IDX_VALUE\n          key: IDX_ATTRIBUTE_VALUE\n      key_len: 6\n          ref: redcooper_prod._table_default_billing.value,const\n         rows: 1\n        Extra:\n*************************** 9. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: _table_billing_city\n         type: eq_ref\npossible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_ADDRESS_VARCHAR_ATTRIBUTE,FK_CUSTOMER_ADDRESS_VARCHAR_ENTITY,IDX_VALUE\n          key: IDX_ATTRIBUTE_VALUE\n      key_len: 6\n          ref: redcooper_prod._table_default_billing.value,const\n         rows: 1\n        Extra:\n*************************** 10. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: _table_billing_telephone\n         type: eq_ref\npossible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_ADDRESS_VARCHAR_ATTRIBUTE,FK_CUSTOMER_ADDRESS_VARCHAR_ENTITY,IDX_VALUE\n          key: IDX_ATTRIBUTE_VALUE\n      key_len: 6\n          ref: redcooper_prod._table_default_billing.value,const\n         rows: 1\n        Extra:\n*************************** 11. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: _table_billing_region\n         type: eq_ref\npossible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_ADDRESS_VARCHAR_ATTRIBUTE,FK_CUSTOMER_ADDRESS_VARCHAR_ENTITY,IDX_VALUE\n          key: IDX_ATTRIBUTE_VALUE\n      key_len: 6\n          ref: redcooper_prod._table_default_billing.value,const\n         rows: 1\n        Extra:\n11 rows in set (0.00 sec)\n</code></pre>\n\n<p>No indexes have been modified other than the default ones from Magento themselves for 1.10.1 See Structure of 1.5.1 (CE) here: <a href=\"http://www.magereverse.com/index/magento-sql-structure/version/1-5-1-0\" rel=\"nofollow\">http://www.magereverse.com/index/magento-sql-structure/version/1-5-1-0</a>  </p>\n\n<p>Here is the alias table referred to AS e. on the scan:</p>\n\n<pre><code>CREATE TABLE `customer_entity` (\n    `entity_id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,\n    `entity_type_id` SMALLINT(8) UNSIGNED NOT NULL DEFAULT '0',\n    `attribute_set_id` SMALLINT(5) UNSIGNED NOT NULL DEFAULT '0',\n    `website_id` SMALLINT(5) UNSIGNED NULL DEFAULT NULL,\n    `email` VARCHAR(255) NOT NULL DEFAULT '',\n    `group_id` SMALLINT(3) UNSIGNED NOT NULL DEFAULT '0',\n    `increment_id` VARCHAR(50) NOT NULL DEFAULT '',\n    `store_id` SMALLINT(5) UNSIGNED NULL DEFAULT '0',\n    `created_at` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',\n    `updated_at` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',\n    `is_active` TINYINT(1) UNSIGNED NOT NULL DEFAULT '1',\n    PRIMARY KEY (`entity_id`),\n    INDEX `FK_CUSTOMER_ENTITY_STORE` (`store_id`),\n    INDEX `IDX_ENTITY_TYPE` (`entity_type_id`),\n    INDEX `IDX_AUTH` (`email`, `website_id`),\n    INDEX `FK_CUSTOMER_WEBSITE` (`website_id`),\n    CONSTRAINT `FK_CUSTOMER_ENTITY_STORE` FOREIGN KEY (`store_id`) REFERENCES `core_store` (`store_id`) ON UPDATE CASCADE ON DELETE SET NULL,\n    CONSTRAINT `FK_CUSTOMER_WEBSITE` FOREIGN KEY (`website_id`) REFERENCES `core_website` (`website_id`) ON UPDATE CASCADE ON DELETE SET NULL\n)\n</code></pre>\n\n<p><strong>So the question is how can I get this query to perform better and not cause the temporary tables being created and scanned.</strong></p>\n\n<p>I'm not exactly sure what I can index to improve this queries performance, and I don't want to dig too much into modifying Magento's ORM.  </p>\n"},{"tags":["php","mysql","web-services"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13274691,"title":"Coverting Hex to Image in PHP?","body":"<p>I am developing mobile app which talks with server via <code>PHP Webservice</code>. This is my first time using PHP. I managed to upload data in to database. Now i need to send an image to store it in ftp server. For that i converted <code>image-&gt;hex</code> and sent from my app.   </p>\n\n<p><strong>Server Side</strong></p>\n\n<p>I got the hex code but not sure how to convert it in to an image and store in in ftp server. I am really struggling here. I googled it but couldn't find exact one.</p>\n\n<p>Any help is much appreciated.</p>\n"},{"tags":["java","php","mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13274978,"title":"Need advice on how to make java calculation for my website instead of using cronjobs","body":"<p>First of all thank you for looking into my question.</p>\n\n<p>The situation: I am making an online game that includes racing in several divisions.\nWhen the game becomes bigger there could be over 20 divisions, in each division there are 20 players. The leader of a division can set up 1 contest each day at a time he chooses.</p>\n\n<p>What needs to happen (code):\nIf a leader of a division sets up a game at 14.00u, the calculation for the race starts.\nI want to have an updated score/position update every 5 seconds. This is impossible with PHP and cronjobs (1min). I have made this code in PHP and it works but it is not efficient and as soon as there are more contests going on at the same time my server will be overloaded so this also a big downside for using cronjobs every minute that executes the php script with the calculation.</p>\n\n<p>My question to you:\nWhat do I need to focus on on java side? And how can it replace a cronjob? Or does it work together with a cronjob?</p>\n\n<p>Extra:\nSomeone told me that java is good as a back-end language of the website and php for front-end. But I really have no knowledge of java.</p>\n\n<p>Thank you for reading :)</p>\n"},{"tags":["mysql","jboss","nullpointerexception","resteasy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13240552,"title":"RESTeasy Database connection: NullPointer","body":"<p>I have a RESTeasy service thats running on JBOSS AS 7, that is trying to create a connection with a local database (mysql server). </p>\n\n<p>The data source is properly defined in the JBOSS management and connects fine (a JSF app can connect fine with it and it can modify the database), however when I try to connect in my RESTeasy service, it gives me a nullPointerException and I can't seem to figure out why. kumonobs is the database in question. The error occurs in the persist method, which is called through a post request. Any help would be much appreciated, if any additional information is needed please ask!</p>\n\n<pre><code>@Path(\"/RSAndroid\")\n@ApplicationScoped\npublic class HelloWorldResource implements Serializable{\n@Resource(mappedName = \"java:jboss/datasources/kumonobs\")\nprivate static DataSource dataSource;\n\nprivate static ArrayList&lt;Student&gt; students = new ArrayList&lt;Student&gt;();\n\n\n@GET()\n@Produces(\"text/plain\")\npublic String sayHello() {\n    return stringStudents(students);\n}\n\n@POST()\n@Consumes(MediaType.APPLICATION_FORM_URLENCODED)\npublic String postStudent(@FormParam(\"Student ID\") String student){\n    Date date = new Date();\n    Student kumonstudent = new Student(student, date);\n    studentCheck(kumonstudent); \n    System.out.println(kumonstudent.toString());\n    return \"OK\";\n}\n\n\npublic String stringStudents(ArrayList&lt;Student&gt; s){\n    String students = \"\";\n    for(Student student : s){\n        students += student.toString();\n    }   \n    return students;\n}\n\npublic void studentCheck(Student student){\n    boolean checkIn = true;\n    int count = 0;\n\n    for(Student s : students){\n        count++;\n        //If Student has been found in the list.\n        if(s.getStudentID().equals(student.getStudentID())){\n            //remove the student from the list.\n            students.remove(count-1);\n            // ** DO DATABASE STUFF HERE FOR REMOVING STUDENT **\n            checkIn = false;\n            break;\n        }\n    }\n    //If student needs to be checked in, add to list.\n    if(checkIn){\n        System.out.println(student.getDate());\n        students.add(student);\n        // ** DO DATABASE STUFF HERE FOR ADDING STUDENT **\n        persist(student);\n\n\n    }\n}\n//Insert student into database table.\npublic void persist(Student student) {\n     PreparedStatement stmt = null;\n       Connection connection = null;\n       try {\n           try {\n               connection = dataSource.getConnection(); //ERROR OCCURS HERE NULLPOINTER\n            try {\n                 System.out.println(\"Fourth\");\n                stmt = connection.prepareStatement(\n                        \"INSERT INTO checkin VALUES (?, ?)\");\n                stmt.setString(1, \"A00105010\");\n                stmt.setString(2, \"Sample Name\");\n                stmt.executeUpdate();\n            } finally {\n                if (stmt != null) {\n                    stmt.close();\n                }\n            }\n        } finally {\n            if (connection != null) {\n                connection.close();\n            }\n        }\n    } catch (SQLException ex) {\n        System.out.println(\"Error in persist \");\n        ex.printStackTrace();\n    }\n}\n}\n</code></pre>\n\n<p>Stack</p>\n\n<pre><code>14:29:22,040 INFO  [stdout] (http--0.0.0.0-8080-1) 2012-11-06\n14:29:22,040 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].    [/AndroidRS].[Resteasy]] (http--0.0.0.0-8080-1) Servlet.service() for servlet R\nesteasy threw exception: org.jboss.resteasy.spi.UnhandledException:    java.lang.NullPointerException\n        at         org.jboss.resteasy.core.SynchronousDispatcher.handleApplicationException(SynchronousDispatcher.java:340) [resteasy-jaxrs-2.3.2.Final.jar:]\n        at     org.jboss.resteasy.core.SynchronousDispatcher.handleException(SynchronousDispatcher.java:214)     [resteasy-jaxrs-2.3.2.Final.jar:]\n        at org.jboss.resteasy.core.SynchronousDispatcher.handleInvokerException(SynchronousDispatcher.java:190) [resteasy-jaxrs-2.3.2.Final.jar:]\n    at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:540) [resteasy-jaxrs-2.3.2.Final.jar:]\n    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:502) [resteasy-jaxrs-2.3.2.Final.jar:]\n    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119) [resteasy-jaxrs-2.3.2.Final.jar:]\n    at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:208) [resteasy-jaxrs-2.3.2.Final.jar:]\n    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55) [resteasy-jaxrs-2.3.2.Final.jar:]\n    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50) [resteasy-jaxrs-2.3.2.Final.jar:]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]\n    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]\n    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_27]\nCaused by: java.lang.NullPointerException\n    at org.jboss.samples.rs.webservices.HelloWorldResource.persist(HelloWorldResource.java:92) [classes:]\n    at org.jboss.samples.rs.webservices.HelloWorldResource.studentCheck(HelloWorldResource.java:81) [classes:]\n    at org.jboss.samples.rs.webservices.HelloWorldResource.postStudent(HelloWorldResource.java:44) [classes:]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_27]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_27]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_27]\n    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_27]\n    at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:155) [resteasy-jaxrs-2.3.2.Final.jar:]\n    at org.jboss.resteasy.core.ResourceMethod.invokeOnTarget(ResourceMethod.java:257) [resteasy-jaxrs-2.3.2.Final.jar:]\n    at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:222) [resteasy-jaxrs-2.3.2.Final.jar:]\n    at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:211) [resteasy-jaxrs-2.3.2.Final.jar:]\n    at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:525) [resteasy-jaxrs-2.3.2.Final.jar:]\n    ... 19 more\n</code></pre>\n"},{"tags":["mysql","sql","select"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13274746,"title":"Count popular tags with comma delimited field on MySQL","body":"<p>I have a comma delimited field on my table, it stores Tags like:</p>\n\n<pre><code>avengers, heroes, marvel, 2012, hulk, captain america\n</code></pre>\n\n<p>And i want to get the most used tags.</p>\n\n<p>How can i do this on one single SELECT query?</p>\n"},{"tags":["mysql","nhibernate","dynamic-linq"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13265145,"title":"Using Nihibernate with system dynamic linq for Query<T>","body":"<p>I am trying to use system.dynamic.linq to create dynamic sorting.</p>\n\n<p>this, is the query that I use:</p>\n\n<pre><code>var query = dalSession.Query&lt;T&gt;().AsQueryable();\nvar res = (from x in query orderby \"x.FirstName\" select x)\n</code></pre>\n\n<p>this is the mysql output:</p>\n\n<pre><code>select\n     affiliate0_.id as id0_,\n     affiliate0_.first_name as first6_0_,\nfrom affiliate affiliate0_ order by 'x.FirstName' //FirstName as well\n</code></pre>\n\n<p>So you can see that the output went to the mysql query is the direct string, and not its reflection, (<code>'x.FirstName'</code>) or (<code>'FirstName'</code>).<br>\nThis has no meaning in mysql context, it looks like I need order by <code>affiliate0_.first_name</code>.<br>\nIs there anyway to provide the Nhibernate the member itself?  So the compiled query will be done normally?</p>\n"},{"tags":["mysql","ruby-on-rails-3","redhat","openshift"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13274681,"title":"Redhat openshift - rails mysql response takes more than 20sec","body":"<p>I have rails (v3.0.9) with mysql running on Redhat open shift. </p>\n\n<p>I have seen that it takes around <strong>35-40 sec</strong> to get JSON response made up of all records from a single table. There are around 10000 records in this single table.</p>\n\n<p>Is there any way to make it faster? i.e To get the response atleast within 10sec.</p>\n"},{"tags":["php","mysql","database"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":18,"score":-2,"question_id":13274605,"title":"how to create stored procedure to update product stock when customer order is created","body":"<p>There is this stored procedure that I'm trying to modify. I have the following tables tables:</p>\n\n<ol>\n<li>Product (product_id, name, description,price, discounted_price, stock, image)</li>\n<li>orders (order_id, total_amount, created_on, shipped_on, customer_id)</li>\n<li>order_details (item_id, order_id, product_id, product_name, quantity, unit_cost)</li>\n</ol>\n\n<p>This stored procedure is called when a customer creates an order. </p>\n\n<pre><code>CREATE  PROCEDURE `shopping_cart_create_order`(IN inCartId CHAR(32),\n  IN inCustomerId INT, IN inShippingId INT, IN inTaxId INT)\nBEGIN\n  DECLARE orderId INT;\n\n  -- Insert a new record into orders and obtain the new order ID\n  INSERT INTO orders (created_on, customer_id, shipping_id, tax_id) VALUES\n         (NOW(), inCustomerId, inShippingId, inTaxId);\n  -- Obtain the new Order ID\n  SELECT LAST_INSERT_ID() INTO orderId;\n\n  -- Insert order details in order_detail table\n  INSERT INTO order_detail (order_id, product_id, attributes,\n                            product_name, quantity, unit_cost)\n  SELECT      orderId, p.product_id, sc.attributes, p.name, sc.quantity,\n              COALESCE(NULLIF(p.discounted_price, 0), p.price) AS unit_cost\n  FROM        shopping_cart sc\n  INNER JOIN  product p\n                ON sc.product_id = p.product_id\n  WHERE       sc.cart_id = inCartId AND sc.buy_now;\n\n\n  -- Save the order's total amount\n  UPDATE orders\n  SET    total_amount = (SELECT SUM(unit_cost * quantity) \n                         FROM   order_detail\n                         WHERE  order_id = orderId)\n  WHERE  order_id = orderId;\n\n  -- Clear the shopping cart\n  CALL shopping_cart_empty(inCartId);\n\n  -- Return the Order ID\n  SELECT orderId;\nEND$$ \n</code></pre>\n\n<p>How can I create a stored procedure that modifies the above to update the stock (in the product table) based on the quantity of products in a customer's order?</p>\n"},{"tags":["mysql","sql","query","sql-order-by","order"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13271667,"title":"MySQL order by multiple columns while grouping by one","body":"<p>So I have a weird scenario where I want the following data to be ordered in a certain way. Let the table data be:</p>\n\n<pre><code>abc 111 2     priority\nabc 111 blah  data\nabc 222 1     priority\nabc 222 blah  data\nabc 333 3     priority\nabc 333 blah  data\n</code></pre>\n\n<p>I want to order that data based on column three (where column 4 is priority) but keep the return order grouped by column 2. So the expected query result would look like:</p>\n\n<pre><code>abc 222 1     priority\nabc 222 blah  data\nabc 111 2     priority\nabc 111 blah  data\nabc 333 3     priority\nabc 333 blah  data\n</code></pre>\n\n<p>What's the best possible way of doing this. I can think of doing a query up front and an in clause, but then I would have to account for all possible priorities.</p>\n\n<p>Thanks in advance. FYI, its MySQL that I am using.</p>\n\n<p>ANSWER (but still looking to see if someone has a more efficient way)\ngiven - </p>\n\n<pre><code>CREATE TABLE my_data( name VARCHAR(20),groupid INT(5), attributekey VARCHAR(10),attributevalue VARCHAR(10));\n\nINSERT INTO my_data VALUES(\"abc\", 111, \"priority\", \"2\");\nINSERT INTO my_data VALUES(\"abc\", 111, \"someattr\", \"blah\");\nINSERT INTO my_data VALUES(\"abc\", 222, \"priority\", \"1\");\nINSERT INTO my_data VALUES(\"abc\", 222, \"someattr\", \"blah\");\nINSERT INTO my_data VALUES(\"abc\", 333, \"priority\", \"3\");\nINSERT INTO my_data VALUES(\"abc\", 333, \"someattr\", \"blah\");\n</code></pre>\n\n<p>solution -</p>\n\n<pre><code>SELECT m1.*,\n(select attributevalue from my_data m2\n   where m1.groupid=m2.groupid \n   AND m2.attributekey='priority' \n) groupidpriority \nFROM my_data m1\norder by groupidpriority;\n</code></pre>\n"},{"tags":["mysql","sql","query","optimization"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13241119,"title":"Problems with a slow Dependent Subquery","body":"<p>I have a query I'm running in MySQL.  As you can see, every part of the query is on indexed fields.  Nevertheless, the query takes forever (tens of minutes, longer than I'm willing to wait).  The Connect tables consist of two integers and two indexes (one field one, field two, the other field two, field one). Source and target are tables with a single indexed int field.  Given all the indexes, I expected this query to finish in seconds.  Any suggestions on 1: why it's taking so long, and 2: how to make it faster?</p>\n\n<p>Thanks!</p>\n\n<pre><code>mysql&gt; explain \nSELECT DISTINCT geneConnect.geneSymbolID FROM SNPEffectGeneConnector AS geneConnect \n  JOIN IndelSNPEffectConnector AS snpEConnect ON geneConnect.snpEffectID = snpEConnect.snpEffectID \n  JOIN InDels2 AS source ON source.id = snpEConnect.indelID \n  WHERE geneConnect.geneSymbolID NOT IN (\n    SELECT geneConnect.geneSymbolID FROM SNPEffectGeneConnector AS geneConnect \n    JOIN IndelSNPEffectConnector AS snpEConnect ON geneConnect.snpEffectID = snpEConnect.snpEffectID \n    JOIN InDels3 AS target ON target.id = snpEConnect.indelID);\n+----+--------------------+-------------+-------+-------------------+----------+---------+-----------------------------------------------------------------------+------+--------------------------------+\n| id | select_type        | table       | type  | possible_keys     | key      | key_len | ref                                                                   | rows | Extra                          |\n+----+--------------------+-------------+-------+-------------------+----------+---------+-----------------------------------------------------------------------+------+--------------------------------+\n|  1 | PRIMARY            | source      | index | id                | id       | 4       | NULL                                                                  | 5771 | Using index; Using temporary   |\n|  1 | PRIMARY            | snpEConnect | ref   | snpEList          | snpEList | 4       | treattablebrowser.source.id                                           |    2 | Using index                    |\n|  1 | PRIMARY            | geneConnect | ref   | snpEList          | snpEList | 4       | treattablebrowser.snpEConnect.snpEffectID                             |    1 | Using where; Using index       |\n|  2 | DEPENDENT SUBQUERY | geneConnect | ref   | snpEList,geneList | geneList | 4       | func                                                                  |    1 | Using index                    |\n|  2 | DEPENDENT SUBQUERY | target      | index | id                | id       | 4       | NULL                                                                  | 6297 | Using index; Using join buffer |\n|  2 | DEPENDENT SUBQUERY | snpEConnect | ref   | snpEList          | snpEList | 8       | treattablebrowser.target.id,treattablebrowser.geneConnect.snpEffectID |    1 | Using index                    |\n+----+--------------------+-------------+-------+-------------------+----------+---------+-----------------------------------------------------------------------+------+--------------------------------+\n</code></pre>\n\n<p>6 rows in set (0.01 sec)</p>\n"},{"tags":["php","mysql","joomla","joomla2.5"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":19,"score":-1,"question_id":13272918,"title":"How to create an article with php in joomla 2.5","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12643725/create-a-jooma-article-programatically\">Create a Jooma! Article Programatically</a>  </p>\n</blockquote>\n\n\n\n<p>I need to know, how can I create a new article in Joomla 2.5 with php code.</p>\n\n<p><em><strong>EDIT</em></strong></p>\n\n<p><strong>I found this:\n<a href=\"http://stackoverflow.com/questions/12643725/create-a-jooma-article-programatically?lq=1\">Create a Jooma! Article Programatically</a>\nit works in also joomla 2.5</strong></p>\n"},{"tags":["mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":37,"score":3,"question_id":13217854,"title":"SQL query combined column values","body":"<p>I'm really not sure how to title this question... Imagine that we have a table looking like this:</p>\n\n<pre><code>object | attribute | value\n------------------------------\n   7     country     Germany\n   7     position    12\n   7     points      12\n   8     country     Germany\n   8     position    10\n   8     points      3\n</code></pre>\n\n<p>Now I want to select all object identifiers that has country germany and position 12 or 5</p>\n\n<p>I have no idea how to write this query, is it possible?</p>\n"},{"tags":["mysql","sql","database","query","relational-database"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13267870,"title":"optimizing a delete query for table with no index?","body":"<p>Let's say we have the following tables:\nr(a, b, c)\nwhere a is some integer, and the table has 50 rows\ns(d, e, f, a)\ns.a is a foreign key onto t.a.\neach tuple is 400 bytes and s is a multiset since this is a SQL database.\ns holds about 1 million tuples. \nwhen a table is added, the database server automatically creates an index on the primary-­‐key columns in the table so for example t has an index on a. However, Oracle does not create indexes on columns that are foreign keys. So s has no index.\nWe want to delete 15 rows from t. So here is what we do:\n1) We remove rows from s that have the same a values in t. This takes 10 minutes.\n2) Then we run the statement DELETE FROM t WHERE a IN (values we are trying to remove, 15 of them to be exact)\nThis takes about 6 hours. </p>\n\n<p>So my guess is the second step takes a long time because for every tuple in t, we are comparing the value of a to every value within the query list. So how can we optimize this query to get the same result but much faster!?</p>\n"},{"tags":["mysql","drupal"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13274278,"title":"Drupal 7 PDOException: (possibly a max_packet_size issue?)","body":"<p>After saving a View i got this error come up on all pages in Drupal 7. After some research i think it's a problem with the \"max allowed packet\" in Mysql being set too low...currently 68MB. I have requested it be set to 250MB. But any further diagnosis of the problem would be welcomed.</p>\n\n<pre><code>Additional uncaught exception thrown while handling exception.\n\nOriginal\n\nPDOException: SQLSTATE[HY000]: General error: 2006 MySQL server has gone away: SELECT format, type, language FROM {date_format_locale}; Array ( ) in system_date_format_locale() (line 3650 of /home/mysite/public_html/beta1/modules/system/system.module).\n\nAdditional\n\nPDOException: SQLSTATE[HY000]: General error: 2006 MySQL server has gone away: INSERT INTO {watchdog} (uid, type, message, variables, severity, link, location, referer, hostname, timestamp) VALUES (:db_insert_placeholder_0, :db_insert_placeholder_1, :db_insert_placeholder_2, :db_insert_placeholder_3, :db_insert_placeholder_4, :db_insert_placeholder_5, :db_insert_placeholder_6, :db_insert_placeholder_7, :db_insert_placeholder_8, :db_insert_placeholder_9); Array ( [:db_insert_placeholder_0] =&amp;gt; 1 [:db_insert_placeholder_1] =&amp;gt; php [:db_insert_placeholder_2] =&amp;gt; %type: !message in %function (line %line of %file). [:db_insert_placeholder_3] =&amp;gt; a:6:{s:5:&amp;quot;%type&amp;quot;;s:12:&amp;quot;PDOException&amp;quot;;s:8:&amp;quot;!message&amp;quot;;s:132:&amp;quot;SQLSTATE[HY000]: General error: 2006 MySQL server has gone away: SELECT format, type, language FROM {date_format_locale}; Array ( ) &amp;quot;;s:9:&amp;quot;%function&amp;quot;;s:27:&amp;quot;system_date_format_locale()&amp;quot;;s:5:&amp;quot;%file&amp;quot;;s:61:&amp;quot;/home/mysite/public_html/beta1/modules/system/system.module&amp;quot;;s:5:&amp;quot;%line&amp;quot;;i:3650;s:14:&amp;quot;severity_level&amp;quot;;i:3;} [:db_insert_placeholder_4] =&amp;gt; 3 [:db_insert_placeholder_5] =&amp;gt; [:db_insert_placeholder_6] =&amp;gt; http://beta1.mysite.co.uk/ [:db_insert_placeholder_7] =&amp;gt; [:db_insert_placeholder_8] =&amp;gt; 83.244.234.228 [:db_insert_placeholder_9] =&amp;gt; 1352306457 ) in dblog_watchdog() (line 157 of /home/mysite/public_html/beta1/modules/dblog/dblog.module).\n\nUncaught exception thrown in session handler.\n\nPDOException: SQLSTATE[HY000]: General error: 2006 MySQL server has gone away in _drupal_session_write() (line 206 of /home/mysite/public_html/beta1/includes/session.inc).\n</code></pre>\n\n<p>thanks</p>\n\n<p>lee</p>\n"},{"tags":["mysql","select"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":3,"view_count":39,"score":-1,"question_id":13273016,"title":"MySQL SELECT if match one value only","body":"<p>my request seems not so difficult but i am not sure about the best way to do it.</p>\n\n<p>I have the following table:</p>\n\n<pre><code>userID  file\n   1      1\n   1      2 \n   1      3\n   2      1\n   2      3\n   3      2\n   4      1\n   4      2\n</code></pre>\n\n<p>And i would like to select UserID that <strong>only</strong> have the file number 2. In my example the result would be only 3. </p>\n"},{"tags":["php","mysql","database","cakephp","cakephp-1.2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13271267,"title":"Change id from autoincrement to char 36 in CakePHP","body":"<p>I have web application built on CakePHP 1.2.11. and mysql database. In this application I have two tables, namely, users and actions. Users hasMany actions and the user_id (id in users tables) is the foreign key in actions table. The id field is autoincrement integer.</p>\n\n<p>CakePHP documentation said that setting the id field to be Char(36) will make CakePHP able to generate Unique string for each record to be the id.</p>\n\n<p>My application is running and I don't want to loss the data records that my application already has. I need to know if it is safely possible to migrate from autoincrement integer id to char(36) keeping in mind the related table?</p>\n\n<p>In other word, How could I change integer value to the unique string id that cakephp do? Is there any rules? If there any tool automate this kind of migration, I will be appreciated to know it.</p>\n"},{"tags":["java","php","html","mysql","centos"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13262632,"title":"Find string between 2 points & move between another 2 points","body":"<p>I have a lot of urls that are sadly static, to change them I need to use some type of application or script.. I have about 400 files with urls ranging from 15-150 on each.</p>\n\n<p>Here is an example of what I'm trying to do:</p>\n\n<pre><code>Change:\n&lt;td class=\"SELECTX\"&gt;&lt;strong&gt;Text example 1 &lt;a href=\"\"&gt;&lt;/a&gt;Text Example 2 &lt;/strong&gt;&lt;/td&gt;\n\nTo:\n&lt;td class=\"SELECTX\"&gt;&lt;strong&gt; &lt;a href=\"\"&gt;&lt;/a&gt;Text example 1 Text Example 2 &lt;/strong&gt;&lt;/td&gt;\n</code></pre>\n\n<p>I would love a way to change this on all files at once, but if I can't then at least a way to where I can change all urls on 1 file without having to do manual cut and paste.</p>\n\n<p>I searched and searched for over 3 hours and found nothing... I hope someone can help.</p>\n\n<p>Edit:\nBasically I'm trying to find the text/string between <code>&lt;strong</code> and <code>&lt;a href=</code> which would be <code>\"Text example 1\"</code> then move it to go after <code>\"\"&gt;&lt;/a&gt;</code> . Which would now come before <code>\"Text Example 2\"</code></p>\n"},{"tags":["php","html","mysql","order","results"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":39,"score":0,"question_id":13272201,"title":"Display mysql results with php in columns and sorted per column","body":"<p>I have the following code to display some brands per category.</p>\n\n<pre><code>&lt;?\n$con = mysql_connect(\"localhost\",\"baba\",\"passsss\");//database connection\nmysql_select_db(\"gr_brands_igi\") or die(mysql_error());\nmysql_set_charset('utf8',$con);     \n$query = \"SELECT * FROM brands ORDER BY category_anchor ASC, brand_anchor ASC\";\n\n$result = mysql_query($query);\n\n$lasteventname = \"\";\n\necho \"&lt;table border='0' width='100%' cellspacing='0' cellpadding='0'&gt;\";\n$cell_ctr = 0;\nwhile($row=mysql_fetch_array($result))\n{\n    if($row[0] != $lasteventname){\n        $title = $row[0];\n        $lasteventname = $row[0];\n        echo \"&lt;tr&gt;&lt;td colspan=5&gt;&lt;h2&gt;$title&lt;/h2&gt;&lt;/td&gt;&lt;/tr&gt;\";\n    }\n    if(($cell_ctr % 5) == 4) // 2 is the number of columns\n    {\n        echo\"&lt;/tr&gt;\";\n        echo \"&lt;tr&gt;\";\n        $cell_ctr = 0;\n    }\n  echo \"&lt;td align='justify' cellspacing='2' cellpadding='2'&gt;\";\n  echo \"&lt;h3&gt;&lt;a href='http://www.example.com/search/search.asp?txtsearch=$row[2]&amp;catg=$row[3]&amp;intitleanddesc=1&amp;isnavbarsearch=1&amp;gallery=1'&gt;\" . $row[2] . \"&lt;/a&gt;&lt;/h3&gt;\";\n  echo \"&lt;/td&gt;\";\n  $cell_ctr++;\n}\n\nif($cell_ctr == 1)\n{\n  echo \"&lt;/tr&gt;\";\n}\nelse if($cell_ctr == 2)\n{\n  echo \"&lt;/tr&gt;\";\n}\necho\"&lt;/table&gt;\";\n?&gt;\n</code></pre>\n\n<p>right now it displays this</p>\n\n<p>Jewels</p>\n\n<ul>\n<li>1 2</li>\n<li>3 4</li>\n<li>5 6</li>\n<li>7 8</li>\n</ul>\n\n<p>But i want to order it per column like this:</p>\n\n<p>Jewels</p>\n\n<ul>\n<li>1 5</li>\n<li>2 6</li>\n<li>3 7</li>\n<li>4 8</li>\n</ul>\n\n<p>The fields in the database are:</p>\n\n<pre><code>category_anchor\nkeyword\nbrand_anchor\ncategory_id\n</code></pre>\n\n<p>I have only one while loop and with the $lasteventname i print the category only once</p>\n\n<p>Any Ideas?</p>\n"},{"tags":["java","mysql","maven","configuration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13273682,"title":"Maven How to specify a directory of sql files for create-schema command","body":"<p>I have a couple directories containing multiple sql files.  How can I configure maven to run all sql files in a directory.  My current config is like this:</p>\n\n<pre><code>      &lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;sql-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${sql-maven-plugin.version}&lt;/version&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;mysql&lt;/groupId&gt;\n                    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n                    &lt;version&gt;${mysql-connector.version}&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n            &lt;configuration&gt;\n                &lt;driver&gt;${mysql.jdbc.driver.class.name}&lt;/driver&gt;\n                &lt;url&gt;${mysql.jdbc.url}&lt;/url&gt;\n                &lt;username&gt;${mysql.jdbc.username}&lt;/username&gt;\n                &lt;password&gt;${mysql.jdbc.password}&lt;/password&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;create-schema&lt;/id&gt;\n                    &lt;phase&gt;install&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;execute&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;skip&gt;${mysql.db.skip}&lt;/skip&gt;\n                        &lt;autocommit&gt;true&lt;/autocommit&gt;\n                        &lt;srcFiles&gt;\n&lt;srcFile&gt;src/main/resources/directory1/file1.sql&lt;/srcFile&gt;\n&lt;srcFile&gt;src/main/resources/directory1/file2.sql&lt;/srcFile&gt;\n&lt;srcFile&gt;src/main/resources/directory2/file1.sql&lt;/srcFile&gt;\n&lt;srcFile&gt;src/main/resources/directory2/file2.sql&lt;/srcFile&gt;\n                        &lt;/srcFiles&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n</code></pre>\n\n<p>There are many files in each directory. </p>\n\n<p>How can use directories instead of listing each file?</p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13273463,"title":"MySQL Query to take Stock data from one table and update LIKE data on a second table","body":"<p>Ok lets see if I can put this in words. I have 2 tables, with like data. They are meant to serve as Stock data for the rest of the system to use. One of the tables is a recent addition, and 2 columns worth of data on said table need to match the data on the other tables so I can attempt to make faster running queries. That said. The columns I need to fix have very similar data to that of the one I want it to be like. As in I could do a select query from the second table onto the first one using <code>like</code> and actually get the data I want, but I can't do that in reverse. </p>\n\n<p>So Heres what I want to know if its even possible just doing it query based. Essentially I want to run over the second table that I want 2 columns of data to match that of the one in the first table. They are varchar columns, as whats in them are just strings. But using sports I guess as an example in the first table I have:</p>\n\n<p>New York Giants</p>\n\n<p>New England Patriots</p>\n\n<p>in the Second table I have:</p>\n\n<p>Patriots</p>\n\n<p>Giants</p>\n\n<p>And while this query is going on I want to update the rows in the second column to match the data in the first table. Is this possible just query based alone or is this something I have to come up with some level of server side logic to over come?</p>\n\n<p>In one table I am working with about 4000 rows in the other I am working with 1001, not sure if that helps any but worth mentioning.</p>\n"},{"tags":["mysql","sql","query"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13273343,"title":"REPLACE new line character in MYSql not working","body":"<p>I executed following query and for some reason its not replacing new line character in database . It says Rows matched 1 but no change . What can be wrong ?</p>\n\n<pre><code>mysql&gt; UPDATE aboutme SET abouttext=REPLACE(abouttext,'\\\\n','') WHERE userid='5099a95cd944b8.22468149';\nQuery OK, 0 rows affected (0.00 sec)\nRows matched: 1  Changed: 0  Warnings: 0\n</code></pre>\n"},{"tags":["mysql","sql","sql-server"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13273045,"title":"Converting mySQL select to SQL select","body":"<p>I have this mySQL select statement that works just as I need it to;</p>\n\n<pre><code>SELECT `requires`, `level` FROM `fp` WHERE `model` = '\".$model.\"' GROUP BY `level` ORDER BY `menu_order`\n</code></pre>\n\n<p>In the table both <em>requires</em> and <em>level</em> are char fields. When sorted by *menu_order* the first row of each value of <em>level</em> will always be the value of <em>requires</em> that I want to retrieve.</p>\n\n<p>For the SQL version I use;</p>\n\n<pre><code>SELECT requires, level FROM fp WHERE model = '\" &amp; model &amp; \"' GROUP BY level ORDER BY menu_order\n</code></pre>\n\n<p>Now when I try to run this same query on SQL I get;</p>\n\n<p>requires'_is_invalid_in_the_select_list_because_it_is_not_contained_in_either_an_aggregate_function_or_the_GROUP_BY_clause</p>\n\n<p>I found many examples of this error but all seem to be way more complicated than what I'm trying to do. Maybe I've been using mySQL for so long that my brain is stuck in that way of thinking.</p>\n\n<p>How should that select statement be written in SQL?</p>\n"},{"tags":["java","mysql","hibernate"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13272297,"title":"Starting a new project, how to setup UTC time correctly in java with hibernate and mysql","body":"<p>So I am starting a new project using java, hibernate and mysql (spring mvc).</p>\n\n<p>At the database level, what column type should I use?</p>\n\n<p>At the java level, I believe I should be using Joda time.  </p>\n\n<p>My users table will store their time offset, which I will then convert/format at the UI level using the UTC value from the database.</p>\n\n<p>With hibernate, do I really need that joda time hibernate plugin or is adding joda time enough?</p>\n\n<p>Can someone tell me what methods I will be needing, or an article that goes over things with source code?</p>\n"},{"tags":["mysql","count","null","return","zero"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":19,"score":2,"question_id":13272160,"title":"Mysql count, return all fields, if nothing counted return 0","body":"<p>I've been looking around for alot of people having the same problem, but the solution seems te be much more different?!</p>\n\n<p>I have a 3 tables:</p>\n\n<pre><code>+-------------------------------------------+\n| ITEM: itemid(pk), status(fk), owner(fk)   |\n|                                           |\n| STATUS: statusid(pk), statusname          |\n|                                           |\n| OWNER: ownerid(pk), ownername             |\n+-------------------------------------------+\n</code></pre>\n\n<p>I have 2 status: <em>1: Available</em>, <em>2: Broken</em>.</p>\n\n<p>In this case there is only ONE owner with ONE broken item.\nI am using this code. First it was different, but it seems LEFT JOIN and GROUP/ORDER BY should do the trick. Unfortunately for me.</p>\n\n<pre><code>SELECT ownername, SUM(price) AS  'totalbrokenpriceeach', COUNT( itemid ) AS  'totalbrokenitemseach'\n                                FROM item\n                                LEFT JOIN owner ON item.owner = owner.ownerid\n                                LEFT JOIN status on item.status = status.statusid\n                                WHERE statusid='2'\n                                GROUP BY ownerid\n</code></pre>\n\n<p>This returns: </p>\n\n<pre><code>ownername   totalbrokenpriceeach    totalbrokenitemseach\nOwner #1            60                          1\nOwner #5            180                         4\n</code></pre>\n\n<p>I'd like to have returned:</p>\n\n<pre><code>ownername   totalbrokenpriceeach    totalbrokenitemseach\nOwner #1            60                          1\nOwner #2            0                           0\nOwner #3            0                           0\nOwner #4            0                           0\nOwner #5            180                         4\n</code></pre>\n\n<p>What to do? Anyone any solutions?</p>\n\n<p><br/><br/></p>\n\n<p>EDIT:</p>\n\n<pre><code>         OWNER                          \n+-----------------------+\n| ownerid ownername     |\n|     1:    Henk        |\n|     2:    Jan         |\n|     3:    Piet        |\n|     4:    Klaas       |\n+-----------------------+\n\n         STATUS\n+-----------------------+\n| statusid statusbeschr |\n|     1:    Available   |\n|     2:    Broken      |\n+-----------------------+\n\n         ITEM\n+--------------------------------------+\n| itemid    price     owner     status |\n|     1:    90          1          1   |\n|     2:    40          2          1   |\n|     3:    20          2          1   |\n|     4:    120         3          2   |\n+--------------------------------------+\n\nI need returned:\n\n+-------------------------------------------------------+\n| ownername    SumOfBrokenItems   AmountOfBrokenItems   |\n|     Henk:       0                       0             |\n|     Jan:        0                       0             |\n|     Piet:       120                     1             |\n|     Klaas:      0                       0             |\n+-------------------------------------------------------+\n</code></pre>\n"},{"tags":["mysql","database","jsp"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13271678,"title":"MySQL Optimize query to Enhance Performance for Comparison Report","body":"<p>I have two tables \"<code>users</code>\" and \"<code>temp_users</code>\". Now, \"users\" table contains millions of data and \"temp_users\" contains thousands. Both the table contains same sort of information but sometime some record might be missing. </p>\n\n<p>So, the requirement is to compare these two tables and show the differences between them. I wrote the comparison Query but may be due to huge volume of data (millions) it is taking more than 5 minutes to execute. Any Suggestion??</p>\n\n<p>The comparison query which I wrote is below:</p>\n\n<pre><code>SELECT \n   id,\n   dateTime,\n   phone,\n   address \nFROM \n   tempUsers t1 \nWHERE NOT EXISTS (\n   SELECT id,dateTime \n   FROM users t2 \n   WHERE t1.id = t2.id \n   OR t1.dateTime=t2.dateTime\n)\n</code></pre>\n\n<p>The system is developed in JSP and MySQL and is deployed in Apache Tomcat</p>\n\n<p>Thanks,</p>\n"},{"tags":["php","javascript","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13262826,"title":"How do you deal with ', single quote in person's names in php, javascript","body":"<p>I noticed that some of name entries, like O'Rourke or O'reilly breaks javascript in some cases. I wonder how you deal with it. I pull these names out of PHP/MYSQL and put them in javascript.</p>\n\n<p>Do you replace them before entering to database or after pulling out of database?</p>\n\n<p>Thanks in advance </p>\n\n<pre><code>google.load('visualization', '1', {packages:['table']});\n      google.setOnLoadCallback(drawTable);\n      function drawTable() {\n        var data = new google.visualization.DataTable();\n        data.addColumn('string', 'First Name');\n        data.addColumn('string', 'Last Name');\n        data.addColumn('string', 'email');\n        data.addColumn('string', 'Parent email 1');\n        data.addColumn('string', 'Parent email 2');\n        data.addColumn('string', 'Advisor');\n        data.addColumn('string', 'Active');\n        data.addColumn('string', 'Edit');\n        //data.addColumn('number', '');\n        data.addRows([\n     &lt;?php\n   if(count($items))\n   {\n        foreach($items as $item)\n        {\n            foreach($advisors as $key=&gt;$advisor)\n            {\n                if($item['advisor']==$advisor['id'])\n                {\n                    $ad=$advisor['last_name'];\n                }\n            }\n            $active_icon = ($item['active']=='1'?'tick':'cross');\n            $editlink = anchor('auth/admin/members/form/'.$item['id'],$this-&gt;bep_assets-&gt;icon('pencil'));\n            echo \"['\".$item['first_name'].\"', '\".$item['last_name'].\"', '\".$item['email']\n            .\"', '\".$item['parent_email1'].\"', '\".$item['parent_email2'].\"', '\".$ad.\"', '\".$this-&gt;bep_assets-&gt;icon($active_icon).\"','\".$editlink.\"'],\";\n        }\n   }\n\n    ?&gt;\n\n        ]);\n\n        var table = new google.visualization.Table(document.getElementById('table_div'));\n        table.draw(data, {showRowNumber: true, allowHtml:true});\n      }\n</code></pre>\n"},{"tags":["mysql","sql","select"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13271843,"title":"MySQL Count matching records from multiple tables","body":"<p>Considering the following 4 tables</p>\n\n<pre><code>entity  table1        table2        table3       \n------  ------------- ------------- -------------\nid      ei(entity.id) ei(entity.id) ei(entity.id)\nname    something     somethingelse yetanother\n</code></pre>\n\n<p><strong>How can I figure out entity usage in all three tables</strong>, represented like<br></p>\n\n<pre><code>---------------------\n| id | t1 | t2 | t3 |\n---------------------\n|  1 | 14 | 23 |  0 |\n|  2 | 66 |  9 |  5 |\n...\n</code></pre>\n\n<p>My Original approach was to select from entity then left join other tables but MySQL doesn't seem to like it</p>\n\n<pre><code>SELECT e.id,count(t1.id) FROM entity AS e LEFT JOIN table1 AS t1 on e.id=t1.ei;\n</code></pre>\n\n<p>Edit: Here is the output for 1 table </p>\n\n<pre>mysql> explain select e.id,count(o.id) from entity e left join table1 t1 on e.id=o.ei where e.ty=3;\n+----+-------------+-------+------+---------------+------+---------+------+-------+-------------+\n| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows  | Extra       |\n+----+-------------+-------+------+---------------+------+---------+------+-------+-------------+\n|  1 | SIMPLE      | e     | ALL  | NULL          | NULL | NULL    | NULL |  1083 | Using where |\n|  1 | SIMPLE      | o     | ALL  | NULL          | NULL | NULL    | NULL | 90201 |             |\n+----+-------------+-------+------+---------------+------+---------+------+-------+-------------+\n2 rows in set (0.04 sec)</pre>\n\n<p>The opposite works much better, but doesn't scale to multiple tables</p>\n\n<pre><code>SELECT e.id,count(t1,id) FROM table1 AS t1 LEFT JOIN entity AS e ON t1.ei=e.id\n</code></pre>\n"},{"tags":["php","mysql","sql"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":54,"score":1,"question_id":13270945,"title":"MySql multiple queries or temporary table?","body":"<p>I need help from a SQL guru here...</p>\n\n<p>I have data in the following format:</p>\n\n<pre><code>Key  Value\n100  A\n100  B\n300  A\n400  B\n500  A\n500  B\n500  C\n600  B\n600  W\n</code></pre>\n\n<p>If I want to find all keys with A or B and A and B, but not AB with anything else...how would I do this?  Would I need a temp table or can I somehow join the table to itself?</p>\n\n<p>EDIT:  The desired output would be Key 100 since it has A &amp; B, Key 300 since it has A, Key 400 since it has B.  Not Key 500 because it also contains a C, and not key 600 because it also contains a W</p>\n"},{"tags":["c++","mysql","windows","api","mysqld"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13254196,"title":"MySQL Windows c api named pipes ERROR: \"Lost connection to MySQL server at 'Waiting for initial communication packet', system error: 0","body":"<p>I am writing a c++ program that will store everything in a mysql database.  I would like to avoid the Windows Security window from popping up and asking if mysqld can have priviledges.  If I click cancel (in response to the firewall window), the program still runs just fine because everything is local.</p>\n\n<p>I am trying to use named pipes with the --skip-networking flag to avoid this firewall window. </p>\n\n<p>START EDIT:</p>\n\n<p>I am using a portable version of mysqld.  It won't have admin priviledges.  (Thanks to Ben for pointing out that this is an important piece of information)</p>\n\n<p>END EDIT</p>\n\n<p>I am using the following command to start the mysqld server: </p>\n\n<pre><code>C:\\tmp_report\\12345\\mysqld\\mysql\\bin\\mysqld --user=root \\\n--basedir=\"C:\\tmp_report\\12345\\mysqld\\\\mysql\" \\\n--datadir=\"C:\\tmp_report\\12345\\mysqld\\data\" \\\n--pid-file=\"C:\\tmp_report\\12345\\mysqld\\mysql.pid\" \\\n--log-error=\"C:\\tmp_report\\12345\\mysqld\\mysql.err\" \\\n--skip-networking \\\n--enable-named-pipe\n</code></pre>\n\n<p>This works and I am able to connect to the database using the following command line statement:</p>\n\n<pre><code>mysql --pipe -uroot </code></pre>\n\n<p>I am trying to connect through the c-api as follows:</p>\n\n<pre><code>unsigned int mysql_timeout=200;\nunsigned int protocol=MYSQL_PROTOCOL_PIPE;\nbool mysql_reconnect=true;\nbool mysql_local_infile=true;\n\nif (mysql_options(conn,MYSQL_OPT_CONNECT_TIMEOUT, (char *)&amp;mysql_timeout)){*logstream&lt;&lt;\"mysql option error connect_timeout\";}\n\nif (mysql_options(conn,MYSQL_OPT_READ_TIMEOUT, (char *)&amp;mysql_timeout)){*logstream&lt;&lt;\"mysql option error read_timeout\";}\n\nif (mysql_options(conn,MYSQL_OPT_WRITE_TIMEOUT, (char *)&amp;mysql_timeout)){*logstream&lt;&lt;\"mysql option error write_timeout\";}\n\nif (mysql_options(conn,MYSQL_OPT_RECONNECT,                   &amp;mysql_reconnect)){*logstream&lt;&lt;\"mysql option error reconnect\";}\n\nif (mysql_options(conn,MYSQL_OPT_LOCAL_INFILE,                &amp;mysql_local_infile)){*logstream &lt;&lt;\"mysql option error local_infile\";}\n\nif (mysql_options(conn,MYSQL_OPT_NAMED_PIPE,                  NULL)){*logstream&lt;&lt;\"mysql option error MYSQL_OPT_NAMED_PIPE\";}\nif (mysql_options(conn,MYSQL_OPT_PROTOCOL,            (char *)&amp;protocol))          {*logstream&lt;&lt;\"mysql option error protocol\";}\n\nif (!mysql_real_connect(conn,\n        \"localhost\", // SERVER\n        \"root\",      // USER\n        NULL,   // PASS\n        NULL,   // DATABASE\n        0,    // port\n        NULL, // socket\n        0     // client_flag\n    )){\n    *logstream&lt;&lt;\"Database::connect mysql_real_connect failed\"&lt;&lt;endl;\n    *logstream&lt;&lt;mysql_error(conn)&lt;&lt;endl;\n    conn=NULL;\n}\n</code></pre>\n\n<p>The result of this mysql_real_connect call is:</p>\n\n<pre><code>Database::connect mysql_real_connect failed\nLost connection to MySQL server at 'waiting for initial communication packet', system error: 0\n</code></pre>\n\n<p>If I use the TCPIP connection, everything works fine except that the Windows firewall pops up.  I would really like to make this work without requiring the user to click cancel on the firewall window.</p>\n\n<p>Any help is greatly appriciated!</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":5261,"score":8,"question_id":3638689,"title":"How to see full query from SHOW PROCESSLIST","body":"<p>When I issue SHOW PROCESSLIST query, only first 100 characters of the running SQL query are returned in the info column.</p>\n\n<p>Is it possible to change Mysql config or issue a different kind of request to see complete query (the queries I'm looking at are longer than 100 characters)</p>\n"},{"tags":["php","mysql","database","cart","shopping"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":32,"score":-1,"question_id":13272617,"title":"Php code for shopping cart with pricing by weight or quantity","body":"<p>i'm building a shopping cart that selects items from a list which is pulled from the database. As the cashier selects the item, they can indicate the quantity and weight and discount if any. Some items are priced by weight whilst the others by quantity. The cart should loop all these criterias and instantly list the items in the cart, computes the total with discounts and tax. Can someone help me with this code to make it be able to calculate the pricing correctly depending on what is priced by weight or quantity and displays it in the cart also.</p>\n\n<p>Currently, I was trying to use an if statement in the for loop. Then I calculate the price and store it in a table and then fetch the value from the table and display in the cart. But the displayed value is not up to date and the calculations are mixed up sometimes.</p>\n\n<p>Code:</p>\n\n<p><pre></p>\n\n<code>&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=windows-1252\"&gt;\n&lt;title&gt;Customer Purchases&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;?php\n$time = time();\n\n  // Check if there is a cookie, if there isn't then redirect to login screen\n  if (!isset($_COOKIE['cookie_info'])) {\n      include (\"index.htm\");\n      exit;\n  }\n\n  // If there is a cookie, validate the cookie\n  else {\n\n      // Use Connect Script\n      include(\"connect.php\");\n\n      // Include the validation of user file\n      include(\"validateuser.php\");\n\n      // If user and password are correct\n      if (validateuser() == true) {\n\n          // Header\n          include(\"header.php\");\n          login();\n\n          // Use cookie and Extract the cookie data (Username and Password)\n          $cookie_info = explode(\"-\", $_COOKIE['cookie_info']);\n          $namecookie = $cookie_info[0];\n          $passcookie = $cookie_info[1];\n\n          // Get username from Database and it in a variable\n          $query = mysql_query(\"SELECT * FROM userdata WHERE userid = '$namecookie'\");\n          $nameuser = mysql_result($query,0,13);\n\n  // Check the level of the user\n  $checklevel = mysql_query(\"SELECT * FROM userdata WHERE userid = '$namecookie'\");\n  $checklevel1 = mysql_result($checklevel,0,14);\n\n  // If the user is staff\n  if (($checklevel1 == 2)||($checklevel1 == 1)) {\n\n          echo \"&lt;b&gt;&lt;center&gt;&lt;font face='Verdana'&gt;Customer Purchases&lt;/font&gt;&lt;/b&gt;&lt;/center&gt;&lt;/p&gt;\";\n?&gt;\n\n&lt;body&gt;\n&lt;form action=\"customerpurchases.php\" method=\"POST\"&gt;\n&lt;table border=\"0\"  id=\"table1\" height=\"145\"&gt;\n        &lt;tr&gt;\n                &lt;td width=\"268\" height=\"33\"&gt;&amp;nbsp;&lt;/td&gt;\n                &lt;td height=\"33\"&gt; &lt;font face=\"Verdana\"&gt;ITEM ID:&lt;/font&gt;&lt;/td&gt;\n                &lt;td width=\"187\" height=\"33\"&gt;\n                &lt;select size=\"1\" name=\"itemid\"&gt;\n&lt;?php\n  // Get all the items from the database and allow user to choose one\n  $items = mysql_query(\"SELECT * FROM items\");\n  $items1 = mysql_num_rows($items);\n  for ($x = 0; $x &lt; $items1; $x++) {\n          $itemid1= mysql_result($items,$x,0);\n?&gt;\n           &lt;option&gt;&lt;?php echo \"$itemid1\"; ?&gt; &lt;/option&gt;\n&lt;?php\n  }\n?&gt;\n                &lt;/select&gt; \n                &lt;/td&gt;\n\n                &lt;/tr&gt;\n        &lt;tr&gt;\n                &lt;td width=\"249\"&gt;&amp;nbsp;&lt;/td&gt;\n                &lt;td&gt; &lt;font face=\"Verdana\"&gt;Quantity:&lt;/font&gt;&lt;/td&gt;\n                &lt;td width=\"157\"&gt;\n                &lt;input type=\"text\" name=\"quantity\" value=\"1\"/&gt;&lt;/td&gt;\n                &lt;td width=\"450\"&gt;\n                &amp;nbsp;&lt;/td&gt;\n        &lt;/tr&gt;\n         &lt;tr&gt;\n                &lt;td width=\"249\"&gt;&amp;nbsp;&lt;/td&gt;\n                &lt;td&gt; &lt;font face=\"Verdana\"&gt;Weight (lb):&lt;/font&gt;&lt;/td&gt;\n                &lt;td width=\"157\"&gt;\n                &lt;input type=\"text\" name=\"weight\" value=\"1\"/&gt;&lt;/td&gt;\n                &lt;td width=\"450\"&gt;\n                &amp;nbsp;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n                &lt;td width=\"249\"&gt;&amp;nbsp;&lt;/td&gt;\n                &lt;td&gt; &lt;font face=\"Verdana\"&gt;Discount($):&lt;/font&gt;&lt;/td&gt;\n                &lt;td width=\"157\"&gt;\n                &lt;input type=\"text\" name=\"discount\" value=\"\"/&gt;&lt;/td&gt;\n                &lt;td width=\"450\"&gt;&lt;input type=\"hidden\" name=\"tax\" value=\"0\"/&gt;\n                &amp;nbsp;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n                &lt;td width=\"249\" height=\"47\"&gt;&amp;nbsp;&lt;/td&gt;\n                &lt;td height=\"47\"&gt; &amp;nbsp;&lt;/td&gt;\n                &lt;td height=\"47\" width=\"157\"&gt;\n &lt;input type=\"submit\" value=\"Add Item\"&gt;\n &lt;input type=\"reset\" value=\"Reset\"&gt;&lt;/form&gt; &lt;/tr&gt;\n                &lt;td height=\"47\" width=\"450\"&gt;\n                        &lt;form action=\"customerpurchases_processtransaction.php\" method=\"POST\"&gt;\n                        &lt;input type=\"submit\" value=\"Checkout\"/&gt;&lt;/form&gt;&lt;/td&gt;\n\n        &lt;/tr&gt;\n        &lt;tr&gt;\n                &lt;td width=\"249\" height=\"28\"&gt;&amp;nbsp;&lt;/td&gt;\n                &lt;td height=\"28\"&gt; &amp;nbsp;&lt;/td&gt;\n                &lt;td height=\"28\" width=\"157\"&gt;\n                &lt;/form&gt;\n                &lt;/tr&gt;\n                &lt;td height=\"28\" width=\"450\"&gt;\n &lt;/td&gt;\n        &lt;/p&gt;\n        &lt;/tr&gt;\n        &lt;/table&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n\n&lt;?php\n\n  $itemid = $_POST[\"itemid\"];\n  $quantity = $_POST[\"quantity\"];\n  $weight2 = $_POST[\"weight\"];\n  $discount = $_POST[\"discount\"];\n  $tax= $_POST[\"tax\"];\n\n  // Check that item exists in database\n  $checkitem = mysql_query(\"SELECT * FROM items WHERE itemno = '$itemid'\");\n  $checkitem1 = mysql_num_rows($checkitem);\n\n  // If there is no such item as the one typed in\n  if ($checkitem1 == 0) {\n\n      // If something was actually typing in the itemid\n      if ($itemid{1}) {\n          echo \"&lt;font face='Verdana' size='3'&gt;&lt;center&gt;No such item as $itemid&lt;BR&gt;&lt;BR&gt;\";\n      }\n  }\n\n  else {\n\n      $data = file('temp.txt'); // read the file\n\n      // If there is something in the file then use the number in the file as\n      // the table number and add the item there\n      if ($data[0]) {\n\n          // Check if the item is already in the table\n          $checkifitemexists = mysql_query(\"SELECT * FROM temp$data[0] WHERE itemid = '$itemid'\");\n          $checkifitemexists1 = mysql_num_rows($checkifitemexists);\n\n          // If item is already in the table then add this quantity to the previous quantity\n          if ($checkifitemexists1 &gt;= 1) {\n              $oldquantity = mysql_result($checkifitemexists,0,1);\n              $newquantity = $oldquantity + $quantity;\n\n              $oldquantity11 = mysql_result($checkifitemexists,0,2);\n              $newquantity22 = $oldquantity11 + $weight2;\n\n              $oldquantity111 = mysql_result($checkifitemexists,0,3);\n              $newquantity222 = $oldquantity111 + $discount;\n\n              $oldquantity1111 = mysql_result($checkifitemexists,0,4);\n              $newquantity2222 = $oldquantity1111 + $tax;\n\n              mysql_query(\"UPDATE temp$data[0] SET quantity = '$newquantity', weight2= '$newquantity22', discount2 = '$newquantity222', tax = '$newquantity2222' WHERE itemid = '$itemid'\");\n              echo \"&lt;center&gt;&lt;font face='Verdana' size='3'&gt;Item updated: $itemid&lt;br&gt;Quantity added: $quantity&lt;br&gt;Weight added: $weight&lt;br&gt;Discount added: $discount&lt;br&gt;\";\n          }\n\n          // Else insert the item into the table\n          else {\n\n\n\n\n\n\n\n\n              mysql_query(\"INSERT INTO temp$data[0] VALUES ('$itemid','$quantity','$weight2', '$discount', '$tax','0')\");\n              echo \"&lt;center&gt;&lt;font face='Verdana' size='3'&gt;Item inserted: $itemid&lt;br&gt;Quantity: $quantity&lt;br&gt;Weight added: $weight&lt;br&gt;Discount added: $discount&lt;br&gt;\";\n          }\n      }\n\n      // Make a temporary table\n      else {\n\n\n\n\n\n\n      // Make a temporary table and find if there is a temp table with the same\n      // name as we are about to name it\n      for ($x = 1; $x &lt; 1000000; $x++) {\n          if (mysql_query(\"SELECT * FROM temp$x\")) {\n              $temptabledone = 0;\n          }\n          else {\n              $temptabledone = 1;\n              break;\n          }\n      }\n\n      // Check if there is a temp table done\n      if ($temptabledone == 1) {\n          mysql_query(\"CREATE TABLE temp$x (itemid VARCHAR (50), quantity INT (10), weight2 FLOAT, discount2 FLOAT, tax FLOAT, cost FLOAT)\");\n\n          // Add the temp table number to a new file\n          $filename =\"temp.txt\";\n          $handle= fopen($filename,'a');\n          $string = \"$x\";\n          fputs($handle, $string);\n          fclose($handle);\n\n          $temptabledone = 2;\n      }\n\n      // Else print a error message\n      else {\n          echo \"An error occurred.\";\n      }\n\n      // Add the item and quantity to the Temp table\n      if ($temptabledone == 2) {\n\n\n\n\n\n\n\n\n\n     // $weight2 = $weight * $quantity;\n          mysql_query(\"INSERT INTO temp$x VALUES ('$itemid','$quantity','$weight2','$discount2', '$tax', '0')\");\n          echo \"&lt;center&gt;&lt;font face='Verdana' size='3'&gt;Item inserted: $itemid&lt;br&gt;Quantity: $quantity&lt;br&gt;Weight added: $weight&lt;br&gt;Discount added: $discount&lt;br&gt;\";\n\n      }\n\n      // Print the number of items in the temp table\n      $countitem = mysql_query(\"SELECT * FROM temp$x\");\n      $countitem1 = mysql_num_rows($countitem);\n\n      }\n  }\n\n  /* Print the items in the table */\n\n  $data = file('temp.txt'); // read the file\n\n  // If there is a number in the file then use that as the temp table number\n  if ($data[0]) {\n\n      // Print the items in the temp table\n      $countitem = mysql_query(\"SELECT * FROM temp$data[0]\");\n      $countitem1 = mysql_num_rows($countitem);\n      echo \"&lt;center&gt;&lt;font face='Verdana' size='3'&gt;There are $countitem1 items in the cart&lt;br&gt;&lt;br&gt;\";\n      echo \"\n      &lt;div align='center'&gt;\n        &lt;table border='1' id='table2' width='100%' cellspacing='0'&gt;\n                &lt;tr&gt;\n                        &lt;td width='106' align='center'&gt;&lt;b&gt;&lt;font face='Verdana'&gt;Item ID&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n                        &lt;td width='348' align='center'&gt;&lt;b&gt;&lt;font face='Verdana'&gt;Description&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n                        &lt;td width='92' align='center'&gt;&lt;b&gt;&lt;font face='Verdana'&gt;Quantity&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n                        &lt;td width='92' align='center'&gt;&lt;b&gt;&lt;font face='Verdana'&gt;Weight&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n                        &lt;td align='center'&gt;&lt;b&gt;&lt;font face='Verdana'&gt;Item Price&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n                        &lt;td width='112' align='center'&gt;&lt;b&gt;&lt;font face='Verdana'&gt;Stock after Sale&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n                        &lt;td width='112' align='center'&gt;&lt;b&gt;&lt;font face='Verdana'&gt;Weight after Sale&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n                        &lt;td width='112' align='center'&gt;&lt;b&gt;&lt;font face='Verdana'&gt;Discount&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n                        &lt;td width='103' align='center'&gt;&lt;b&gt;&lt;font face='Verdana'&gt;Total Price&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n                        &lt;td width='103' align='center'&gt;&lt;b&gt;&lt;font face='Verdana'&gt;Tax&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n                        &lt;td width='91' align='center'&gt;&lt;b&gt;&lt;font face='Verdana'&gt;Remove?&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n                &lt;/tr&gt;\";\n\n      $fullcost = 0;\n\n      // Loop for all the times already in the temptable and print them out\n      for ($y = 0; $y &lt; $countitem1; $y++) {\n          for ($z = 0; $z &lt; 2; $z++) {\n              $query = mysql_query(\"SELECT * FROM temp$data[0]\");\n              $itemandquantity = mysql_result($query,$y,$z);\n             // $itemandweight = mysql_result($query,$y,$z);\n              //$query = mysql_query(\"SELECT * FROM temp$data[0] WHERE itemid = '$itemid'\");\n\n              if ($z == 0) {\n\n                  echo \"&lt;tr&gt;&lt;td width='106' align='center'&gt;&lt;font face='Verdana' size='3'&gt;$itemandquantity&lt;/font&gt;&lt;/td&gt;\";\n                  $theitemid = $itemandquantity;\n                  $itemdes = mysql_query(\"SELECT * FROM items WHERE itemno = '$itemandquantity'\");\n                  $itemdes1 = mysql_result($itemdes,0,1);\n                  echo \"&lt;td width='348' align='center'&gt;&lt;font face='Verdana'&gt;$itemdes1&lt;/font&gt;&lt;/td&gt;\";\n\n                 // $query = mysql_query(\"SELECT * FROM temp$data[0] WHERE itemid = '$itemid'\");\n              }\n\n              else {\n                  echo \"&lt;td width='92' align='center'&gt;&lt;font face='Verdana'&gt;$itemandquantity&lt;/font&gt;&lt;/td&gt;\";\n\n                  // \n                  $query = mysql_query(\"SELECT * FROM temp$data[0] WHERE itemid = '$itemid'\");\n                   $weightnn= mysql_result($query,0,2);\n\n                   // $ddvvq = mysql_result($query,$y,5);\n\n\n                  // echo \"&lt;td align='center'&gt;&lt;font face='Verdana'&gt;$newquantity22 &lt;/font&gt;&lt;/td&gt;\";\n                  echo \"&lt;td align='center'&gt;&lt;font face='Verdana'&gt;$weightnn&lt;/font&gt;&lt;/td&gt;\";\n\n                  $itemprice1 = mysql_result($itemdes,0,3);\n                  echo \"&lt;td align='center'&gt;&lt;font face='Verdana'&gt;$$itemprice1&lt;/font&gt;&lt;/td&gt;\";\n\n                  // Check the stock and print either low, medium or high\n                  $checkstock = mysql_result($itemdes,0,2);\n                  if ($checkstock == 0) {$ww=$checkstock-$itemandquantity;\n                      echo \"&lt;td width='112' align='center'&gt;&lt;font face='Verdana'&gt;Out of Stock($ww)&lt;/font&gt;&lt;/td&gt;\";\n                  }\n                  if ($checkstock &gt;= 1 &amp;&amp; $checkstock &lt;= 5) {$ww=$checkstock-$itemandquantity;\n                      echo \"&lt;td width='112' align='center'&gt;&lt;font face='Verdana'&gt;Low($ww)&lt;/font&gt;&lt;/td&gt;\";\n                  }\n                  if ($checkstock &gt;= 6 &amp;&amp; $checkstock &lt;= 20) {$ww=$checkstock-$itemandquantity;\n                      echo \"&lt;td width='112' align='center'&gt;&lt;font face='Verdana'&gt;Medium($ww)&lt;/font&gt;&lt;/td&gt;\";\n                  }\n                  if ($checkstock &gt; 20) {\n\n                    $ww=$checkstock-$itemandquantity;\n                      echo \"&lt;td width='112' align='center'&gt;&lt;font face='Verdana'&gt;High($ww)&lt;/font&gt;&lt;/td&gt;\";\n                  }\n\n\n\n                   $checkweight = mysql_result($itemdes,0,4);\n                  if ($checkweight == 0) {$www=$checkweight-$weightnn;\n                      echo \"&lt;td width='112' align='center'&gt;&lt;font face='Verdana'&gt;Out of Stock($www)&lt;/font&gt;&lt;/td&gt;\";\n                  }\n                  if ($checkweight &gt;= 1 &amp;&amp; $checkstock &lt;= 5) {$www=$checkweight-$weightnn;\n                      echo \"&lt;td width='112' align='center'&gt;&lt;font face='Verdana'&gt;Low($www)&lt;/font&gt;&lt;/td&gt;\";\n                  }\n                  if ($checkweight &gt;= 6 &amp;&amp; $checkweight &lt;= 20) {$www=$checkweight-$weightnn;\n                      echo \"&lt;td width='112' align='center'&gt;&lt;font face='Verdana'&gt;Medium($www)&lt;/font&gt;&lt;/td&gt;\";\n                  }\n                  if ($checkweight &gt; 20) {$www=$checkweight-$weightnn;\n                      echo \"&lt;td width='112' align='center'&gt;&lt;font face='Verdana'&gt;High($www)&lt;/font&gt;&lt;/td&gt;\";\n                  }\n\n                  $ddc = mysql_result($query,0,3);\n                  // $dcost= mysql_result($query,$y,5);\n\n                   $query2 = mysql_query(\"SELECT SUM(discount2) FROM temp$data[0] \");\n                   $rowc = mysql_fetch_array($query2);\n                   $ddvv = $rowc[0];\n\n                    echo \"&lt;td width='103' align='center'&gt;&lt;font face='Verdana'&gt;$$ddc&lt;/font&gt;&lt;/td&gt;\";\n\n        //$itemid = $_POST[\"itemid\"];         \n\n                   if (($_POST['itemid']=='Small Fish Soup')) {\n\n\n                  $cal = $weightnn;\n\n\n\n\n                  }\n\n\nelse \n\n        {\n                  $cal = $itemandquantity;          \n\n\n\n                  }\n\n\n\n                  $totalprice = $itemprice1*$cal;\n\n                  $bnm = mysql_query(\"SELECT * FROM temp$data[0] WHERE itemid = '$itemid'\");\n\n              $cost = mysql_result($bnm,0,5);\n              $cow = $cost + $totalprice ;\n\n\n\n                   mysql_query(\"UPDATE temp$data[0] SET cost = '$cow' WHERE itemid = '$itemid'\");\n\n                    echo \"&lt;td width='103' align='center'&gt;&lt;font face='Verdana'&gt;$$cow&lt;/font&gt;&lt;/td&gt;\";\n\n                       $fullcost = $fullcost + $totalprice;\n                 $fullcost2 = $fullcost-$ddvv;\n                  $fulltax = 0.175*($fullcost2);\n                  $finalcost = $fulltax + $fullcost2;\n\n              $tax1 = ($totalprice-$ddc)*0.175;\n\n\n\n\n              $dcost= mysql_result($query,0,5);\n\n\n\n\n                  mysql_query(\"UPDATE temp$data[0] SET tax = '$tax1' WHERE itemid = '$itemid'\");\n\n                  echo \"&lt;td width='103' align='center'&gt;&lt;font face='Verdana'&gt;$$tax1&lt;/font&gt;&lt;/td&gt;\";\n\n                  echo \"&lt;td width='91' align='center'&gt;&lt;font face='Verdana'&gt;\n                  &lt;a href='customerpurchases_removeitem.php?itemid=$theitemid'&gt;Remove&lt;/a&gt;\n                  &lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;\";     \n\n\n              }\n          }\n\n\n      }\n\n\n\n      echo \"&lt;/table&gt;&lt;/div&gt;\";\n\n      // Print the total of all the items\n      echo \"&lt;div align='center'&gt;\n        &lt;table border='1' id='table3' width='100%' cellspacing='0'&gt;\n\n                &lt;tr&gt;\n                        &lt;td width='559' td align='center'&gt;&amp;nbsp;&lt;/td&gt;\n                        &lt;td align='center' width='219'&gt;&lt;b&gt;&lt;font face='Verdana'&gt;Total Cost:&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n                        &lt;td width='103' align='center'&gt;&lt;font face='Verdana'&gt;&lt;b&gt;$$fullcost&lt;/font&gt;&lt;/td&gt;\n                        &lt;td width='91' align='center'&gt;&amp;nbsp;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                        &lt;td width='559' td align='center'&gt;&amp;nbsp;&lt;/td&gt;\n                        &lt;td align='center' width='219'&gt;&lt;b&gt;&lt;font face='Verdana'&gt;Total Discount:&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n                        &lt;td width='103' align='center'&gt;&lt;font face='Verdana'&gt;&lt;b&gt;$$ddvv&lt;/font&gt;&lt;/td&gt;\n                        &lt;td width='91' align='center'&gt;&amp;nbsp;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                        &lt;td width='559' td align='center'&gt;&amp;nbsp;&lt;/td&gt;\n                        &lt;td align='center' width='219'&gt;&lt;b&gt;&lt;font face='Verdana'&gt;Total Tax:&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n                        &lt;td width='103' align='center'&gt;&lt;font face='Verdana'&gt;&lt;b&gt;$$fulltax&lt;/font&gt;&lt;/td&gt;\n                        &lt;td width='91' align='center'&gt;&amp;nbsp;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                        &lt;td width='579' td align='center'&gt;&amp;nbsp;&lt;/td&gt;\n                        &lt;td align='center' width='219'&gt;&lt;b&gt;&lt;font face='Verdana'&gt;Grand Total:&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n                        &lt;td width='103' align='center'&gt;&lt;font face='Verdana'&gt;&lt;b&gt;$$finalcost&lt;/font&gt;&lt;/td&gt;\n                        &lt;td width='71' align='center'&gt;&amp;nbsp;&lt;/td&gt;\n                &lt;/tr&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\";\n  }\n  }\n\n      // If user and password are not correct print error message\n      }\n      else {\n          echo \"Incorrect username/password\";\n          exit;\n      }\n  }\n?&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["php","mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13272347,"title":"SQL select rows only once","body":"<p>I have table <code>pro</code> like this :</p>\n\n<pre><code>id    category   details\n1         f        weqweq\n2         m        dqweq\n3         f        xcxzc\n4         m        eqweqw\n5         f        asweq\n6         c        xzsda\n</code></pre>\n\n<p>Now if i try something like :</p>\n\n<pre><code>SELECT DISTINCT category FROM pro\n</code></pre>\n\n<p>i get only <code>m</code> and <code>c</code> </p>\n\n<p>if i try :</p>\n\n<pre><code>  SELECT category FROM pro GROUP BY category\n</code></pre>\n\n<p>i get only <code>f</code> and <code>c</code></p>\n\n<p>How i can query to get all <code>m,f,c</code> only once?!</p>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":32,"score":1,"question_id":13272045,"title":"mysql nested select statement","body":"<p>I am newbie for relational tables. As i learn more, i see many advantages of sql statement. However i stuck on some point. </p>\n\n<p>i look for if can get a single table for desired data-set from 5 tables. One of the table named 'eta' is used to connect other 4 tables.</p>\n\n<p>Aim:\nA phone number or email can be used by many users, and users may also have multiple phone number or email address. I want to list the phone numbers or email addresses with the user name that uses them.  </p>\n\n<p>Sample Data:\nPlease  check <a href=\"http://sqlfiddle.com/#!2/60acce\" rel=\"nofollow\">http://sqlfiddle.com/#!2/60acce</a>  for the table structure and sample data-set</p>\n\n<p>The final expected final result for the phone case as follow:</p>\n\n<pre><code>  phone            name    extra\n  45336467      ABC Co.   \n  45336467      Gery      114\n  45336467      Todd      117\n  45336467      Adam      119\n</code></pre>\n\n<p>Thanks</p>\n\n<p>Edit: Explanation for the table relation.</p>\n\n<p>table 'eta' has 4 fields which have table relations. column 'own' shows the company, person etc  value 'f' for company and 'k' for person others will used for different tables </p>\n\n<p>v1_id for id of own field's referred table..</p>\n\n<p>column 'res' refers to email and phone tables. value 't' for phone and 'e' for email.\nv2_id for id of res field's referred table</p>\n"},{"tags":["mysql","email","postfix"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":60,"score":2,"question_id":12814678,"title":"best way to store mail in DB (postfix)","body":"<p>Please give me a best solution to store all mails (send, receive, forward) in mysql with postfix?\nand \nIs this the correct approach?</p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13272252,"title":"why does this search of a mysql database produce no results? Using LIKE for the first time","body":"<p>Editing someone else's code here, so I can't change the field in the database called <code>title</code> or change to MySQLi etc :/</p>\n\n<p>The code connects to the DB without problems, but always pulls in zero results.</p>\n\n<pre><code>$strSQL = \"SELECT * FROM newproducts WHERE 'title' LIKE ('%$q%')\";\n$sql = mysql_query($strSQL) or die(mysql_error());\n$num_rows = mysql_num_rows($sql);\n\nif ( $q == '' ) {\n    echo '&lt;p class=\"black-text\"&gt;Please provide a search term.&lt;/p&gt;';\n}\n\nelse if ( $num_rows &lt;= 0 ) {\n    echo '&lt;p class=\"black-text\"&gt;Your search for &lt;b&gt;'.$q.'&lt;/b&gt; returned &lt;b&gt;0&lt;/b&gt; results.&lt;/p&gt;';\n}\n\nelse { \n\n    echo '&lt;p class=\"black-text\"&gt;Your search for &lt;b&gt;'.$q.'&lt;/b&gt; returned &lt;b&gt;'.$num_rows.'&lt;/b&gt; result(s).&lt;br/&gt;&lt;br/&gt;';  \n    while($row = mysql_fetch_assoc($sql)) {\n        echo '- '.$row['title'].' &lt;a href=\"'.$row['link'].'.html\" class=\"search-link\"&gt;[Read more]&lt;/a&gt;&lt;br/&gt;';\n    }\n    echo '&lt;/p&gt;';\n}\n</code></pre>\n\n<p>Could it be a case issue? I've tried searching for lower and upper strings, but still zero results.</p>\n"},{"tags":["mysql","sql","database","query","sum"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":17,"score":3,"question_id":13272230,"title":"mysql - sum columns from multiple tables based on multiple id's","body":"<p>I have a mySQL database with a couple of identical tables. I need to join all the tables and sum up the views and hits every time the <code>id1</code> and <code>id2</code> are equal in at least 2 tables, or simply show the row if not. </p>\n\n<p>Please see below the tables structure:</p>\n\n<pre><code>Table1:\nid..id2...views...hits\n1...102...55......12\n2...103...12......22\n\nTable2:\nid..id2...views...hits\n1...123...512......13\n2...103...123......43\n\nTable3:\nid..id2...views...hits\n1...102...232......43\n2...103...100......70\n</code></pre>\n\n<p>The end result should be the following table:<br></p>\n\n<pre><code>id...id2...views...hits\n1....102...287....65   &lt;-- This one is the result of adding 1st row of table1 and 2nd row of table 2\n1....123...512....13   &lt;-- This is the 1st row of table2 as there's no other id2 = 123\n2....103...235....135 &lt;-- This is the sum of 2nd row in table1 + 2nd row in table2 + 2nd row in table3\n</code></pre>\n\n<p>I hope this makes sense and someone can help with it.</p>\n\n<p>Thanks !</p>\n"},{"tags":["mysql","wordpress","tags"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":28,"score":2,"question_id":13272065,"title":"mysql tag system","body":"<p>I need some help with a mysql query</p>\n\n<p>I am using wordpresses tagging system with some tables of my own design</p>\n\n<p>the idea is to pull back a list of items that have tags in common with the original post, I will try my best to explain</p>\n\n<p>let say you have a post with 5 tags tagA tagB tagC and so on</p>\n\n<p>I want to run a query on mysql that would pull back a list ordered by how many tags the other items have in common</p>\n\n<p>I imagine it would create a new column based on a count of tags that are associated with the original post.</p>\n\n<p>so if one post had the same 5 tags I would see post_id and 5 in the new column </p>\n\n<pre><code>| post_id | in_common |\n-----------------------\n|   35    |     5     |\n-----------------------\n|   109   |     5     |\n-----------------------\n|   100   |     4     |\n</code></pre>\n\n<p>and so on.</p>\n\n<p>But I'm not even sure where to start with this query</p>\n\n<p>The tags are in wordpresses and to get all the posts based on one single tag I could use</p>\n\n<pre><code>SELECT * \nFROM wp_posts \ninner JOIN wp_term_relationships ON wp_posts.ID = wp_term_relationships.object_ID \ninner JOIN wp_terms ON wp_terms.term_id = wp_term_relationships.term_taxonomy_id \nWHERE wp_terms.name =  'tax'\n</code></pre>\n"},{"tags":["mysql","cakephp","authentication","pdo","components"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13237165,"title":"Cakephp Auth login returns false even though SQL query finds rows","body":"<p>I have Cakephp app installed on a linux box.\nThe Mysql Driver is installed and php-pecl-acl has been removed.\nThere are no problems with the Cookies. The users and passwords exist in the database. The password is a CHAR(40) in the database. </p>\n\n<p>The Auth->login() method <strong>always returns false</strong>, even though the sql query debug log shows that rows affected = 1</p>\n\n<pre><code>array(\n'log' =&gt; array(\n    (int) 0 =&gt; array(\n        'query' =&gt; 'SELECT `User`.`id`, `User`.`username`, `User`.`password`, `User`.`email`, FROM `somedatabase`.`users` AS `User`   WHERE `User`.`username` = 'someuser' AND `User`.`password` = '2d7a34c9ef8efa2cfdf4b89175f7edec1cd0ddda'    LIMIT 1',\n        'params' =&gt; array(),\n        'affected' =&gt; (int) 1,\n        'numRows' =&gt; (int) 1,\n        'took' =&gt; (float) 2\n    )\n),\n'count' =&gt; (int) 1,\n'time' =&gt; (float) 2\n</code></pre>\n\n<p>Please help.\nThank you.</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":9,"score":-1,"question_id":13272147,"title":"Don't find mysql-server at program list","body":"<p>I also install apache2, mysql-server, php5, and phpmyadmin in ubuntu.Now mysql-server already install show me at terminal. But, I don't find at program list.</p>\n"},{"tags":["mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":79,"score":6,"question_id":12849737,"title":"Mysql Query for logarithmic aging","body":"<p>I want to implement a 'logarithmic' score-decay based on aging, and I'm trying to figure out the SUM/LOG combination. Here you have a simplified version of the current query:</p>\n\n<pre><code>SELECT SUM(1) as total_score FROM posts\nJOIN votes ON votes.post_id = posts.post_id\nWHERE 1\nGROUP BY post_id\nORDER BY total_score DESC\n</code></pre>\n\n<p>I'm currently doing SELECT 'SUM(1) as total_score' but I want to modify the query to take the date/age of the vote into consideration; where a vote from today weights 1, a vote from 15 days ago weights close to .8 and a vote from 30 days ago close to 0. I'm storing the date field on the votes table (vote_date) as a unix_timestamp.</p>\n\n<p><img src=\"http://i.stack.imgur.com/Eozq4.png\" alt=\"enter image description here\"></p>\n\n<p>I'm not really concerned about the WHERE clausule; that's pretty straightforward. What I'm trying to figure out is the logarithmic aging part.</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13271863,"title":"MySql optimization / speed that's been haunting me","body":"<p>Is there a difference between</p>\n\n<pre><code>SELECT * FROM my_table\n</code></pre>\n\n<p>and</p>\n\n<pre><code>SELECT my_column_id FROM my_table\n</code></pre>\n\n<p>where:</p>\n\n<ol>\n<li><code>my_table</code> has million(s) of rows</li>\n<li>there are a lot of concurrent users doing sql queries on the website</li>\n</ol>\n\n<p>in speed? Is it better to <code>SELECT</code> just 1 column instead of * (all) for a <code>rowCount()</code> query?</p>\n"},{"tags":["mysql","indexing","query-optimization","indexes"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13264409,"title":"What does a high key_len value indicate in optimizing a MySQL query?","body":"<p>I am adding index to mysql queries and below is the query.</p>\n\n<pre><code>SELECT * \nFROM \n    JOBSEEKER \nWHERE \n    JOBSEEKER.VCEMAIL='godavary@gmail.com' \n    AND JOBSEEKER.ITJOBSEEKERSTATUS&lt;&gt;5 LIMIT 1\n</code></pre>\n\n<p>Using <code>EXPLAIN</code>:</p>\n\n<pre><code>*************************** 1. row ***************************\n       id: 1\nselect_type: SIMPLE\n    table: JOBSEEKER\n     type: ALL\npossible_keys: NULL\n      key: NULL\n  key_len: NULL\n      ref: NULL\n     rows: 121702\n    Extra: Using where\n1 row in set (0.00 sec)\n</code></pre>\n\n<p>I added an index to the table and got the following results:</p>\n\n<pre><code>*************************** 1. row ***************************\n       id: 1\nselect_type: SIMPLE\n    table: JOBSEEKER\n     type: ref\npossible_keys: EMAIL_I\n      key: EMAIL_I\n  key_len: 103\n      ref: const\n     rows: 1\n    Extra: Using where\n1 row in set (0.00 sec)\n</code></pre>\n\n<p>I see that the key length is very high here, but previously it was nothing/NULL. After indexing query execution time is improved.</p>\n\n<p>Is this fine or should I index <code>ITJOBSEEKERSTATUS</code> as well?</p>\n"},{"tags":["php","mysql","search","sphinx"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13271656,"title":"Sphinx search sql_attr_multi - where condition","body":"<p>I need to set an index.</p>\n\n<p>sql_attr_multi = uint categories from query; SELECT item_id, category_id FROM connections WHERE value=2</p>\n\n<p>It works fine If I set the value static.</p>\n\n<p>That value is a variable so I want to assign it through a filter but it doesn`t work because I want to filter \"sql_attr_multi\" not the $sql.</p>\n\n<p>$cl->setFilter(\"value\", array(2));</p>\n\n<p>Thanks</p>\n"},{"tags":["mysql","sql","database","query"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13272029,"title":"Efficient Way to Select if a database row value match a group of string","body":"<p>Efficient Way to Select if a database row value match a group of string</p>\n\n<pre><code>  SELECT id FROM tablename where \n    LeadStatus like \"%Contact Attempt 1%\" or \n    LeadStatus like \"%Contact Attempt 2%\" or \n    LeadStatus like \"%Contact Attempt 3%\" or \n    LeadStatus like \"%Contact Attempt 4%\" or \n    LeadStatus like \"%Contact Attempt 5%\" or \n    LeadStatus like \"%Contact Attempt 6%\" or \n    LeadStatus like \"%Contact Attempt 7%\" or \n    LeadStatus like \"%Call Back/Follow-up%\" or \n    LeadStatus like \"%Working%\" or \n    LeadStatus like \"%Credit Pulled%\" or \n    LeadStatus like \"%Selected other Lender%\" or \n    LeadStatus like \"%Pre-Approved%\" or \n    LeadStatus like \"%Application Taken/Sent%\" or \n    LeadStatus like \"%Application Received%\" or \n    LeadStatus like \"%Submitted%\" or \n    LeadStatus like \"%Funded%\" or \n    LeadStatus like \"%Future Opportunity%\" or \n    LeadStatus like \"%Manager Review%\"\n</code></pre>\n\n<p>I think it clear enough that what I want?</p>\n\n<p><strong>Note :</strong> I can't change the <code>LeadStatus</code> value as it is fetched from a API not in my control </p>\n"},{"tags":["mysql"],"answer_count":9,"favorite_count":3,"up_vote_count":16,"down_vote_count":0,"view_count":46922,"score":16,"question_id":5376427,"title":"Can't connect to local MySQL server through socket '/var/mysql/mysql.sock' (38)","body":"<p>I am having a big problem trying to connect to mysql. When I run:</p>\n\n<pre><code>/usr/local/mysql/bin/mysql start\n</code></pre>\n\n<p>I have the following error :</p>\n\n<pre><code>Can't connect to local MySQL server through socket '/var/mysql/mysql.sock' (38)\n</code></pre>\n\n<p>I do have <code>mysql.sock</code> under the <code>/var/mysql</code> directory.</p>\n\n<p>In <code>/etc/my.cnf</code> I have:</p>\n\n<pre><code>[client]\nport=3306\nsocket=/var/mysql/mysql.sock\n\n[mysqld]\nport=3306\nsocket=/var/mysql/mysql.sock\nkey_buffer_size=16M\nmax_allowed_packet=8M\n</code></pre>\n\n<p>and in <code>/etc/php.ini</code> I have :</p>\n\n<pre><code>; Default socket name for local MySQL connects.  If empty, uses the built-in\n; MySQL defaults.\nmysql.default_socket = /var/mysql/mysql.sock\n</code></pre>\n\n<p>I have restarted apache using <code>sudo /opt/local/apache2/bin/apachectl restart</code></p>\n\n<p>But I still have the error.</p>\n\n<p>Otherwise, I don't know if that's relevant but when I do <code>mysql_config --sockets</code> I get</p>\n\n<pre><code>--socket         [/tmp/mysql.sock]\n</code></pre>\n"},{"tags":["mysql","sql"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13271874,"title":"How to write SQL statement in this case?","body":"<p>For some reason, I'd like to change the database. </p>\n\n<p>It's not possible to change these values manually one by one as there are so much records. </p>\n\n<p>Please advise how to write this SQL, thanks.</p>\n\n<p>From:</p>\n\n<pre><code> id  percentage    type\n  1     6        services\n  1     10       testing\n  3     8        services\n  3     20       testing\n  6     61       services\n  6     90       testing\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>id percentage    type\n1     10       services\n1     10       testing\n3     20       services\n3     20       testing\n6     90       services\n6     90       testing\n</code></pre>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13271813,"title":"editing a trigger in mysql admin","body":"<p>Is there any syntax for editing a particular trigger in mysql php myadmin db. My db contains two triggers and they can be accessed using 'SHOW TRIGGERS' . But this command only giving me the triggers i want to read or edit that particular trigger, how can i do that?? i tried this</p>\n\n<pre><code>SHOW CREATE TRIGGER\n</code></pre>\n\n<p>but its not showing me the full info about the trigger it's just giving me the row which consists the value that it is created. but how to edit it pls tell me</p>\n"},{"tags":["php","mysql","arrays"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13254645,"title":"how to reoraganize the code bellow to be a dynamic one?","body":"<p>I'm trying to do a web application with php and MySQL that can graph the estimate effort of a person based on the data stored in the data base</p>\n\n<pre><code>$luna_start = date('n',  strtotime($row_task['data_i']));\n$luna_end   = date('n',  strtotime($row_task['data_s']));\n$luna_curenta=$luna_start;\n$ultimazi_luna_curenta=  cal_days_in_month(CAL_GREGORIAN, $luna_curenta,\"2012\");\nwhile ($luna_curenta&lt;=$luna_end){\n//construieste vectorul\n    for ($i = 1; $i &lt;= $ultimazi_luna_curenta; $i++) {\n        $data_curenta=  date(\"Y-m-d\", mktime(0, 0, 0, $luna_curenta, $i, 2012));\n        if (($data_curenta&gt;=$row_task['data_i'])&amp;&amp;($data_curenta&lt;=$row_task['data_s'])){\n            $efort_a['a'.$row_task['task_id']][$data_curenta]=$efort_mediu;\n        }\n    }\n$luna_curenta++;\n}\n</code></pre>\n\n<p>all that trouble for getting an array so that i can graph. the array $efort_a looks like this:</p>\n\n<pre><code>Array(\n   [a19] =&gt; Array(\n        [2012-09-20] =&gt; 2.84\n        [2012-09-21] =&gt; 2.84\n       .......\n        [2012-10-21] =&gt; 2.84\n        [2012-10-22] =&gt; 2.84\n    )\n\n[a22] =&gt; Array\n    (\n        [2012-10-01] =&gt; 0.1\n        [2012-10-02] =&gt; 0.1\n       .....\n        [2012-11-05] =&gt; 0.1\n        [2012-11-06] =&gt; 0.1\n        [2012-11-07] =&gt; 0.1\n      ......\n        [2012-11-25] =&gt; 0.1\n      ......\n        [2012-11-30] =&gt; 0.1\n    )\n\n[a16] =&gt; Array\n    (\n        [2012-10-08] =&gt; 4\n        [2012-10-09] =&gt; 4\n        [2012-10-10] =&gt; 4\n        [2012-10-11] =&gt; 4\n       ......\n        [2012-10-18] =&gt; 4\n        [2012-10-19] =&gt; 4\n    )\n\n)\n</code></pre>\n\n<p>further more I'm doing a little more array processing.</p>\n\n<pre><code>extract($efort_a);\n$graf_data=  array_add($a19,$a22,$a16);\n$data = new GoogleChartData($graf_data);\n$chart-&gt;addData($data);\n</code></pre>\n\n<p>the problem with all this code is that it isn't a dynamic one. the arrays a19, a22, a16 are named statically and in this particular case the user had only 3 tasks (task id 19, 22 and 16) ... but what if the user has multiple tasks ?.</p>\n\n<ol>\n<li>so the questions is can this code be reorganized, maybe as a function i don't know how, to be a dynamic one ?</li>\n<li>could it be possible to do a function that graph's all the users effort (one graph, multiple lines- one for each user)</li>\n</ol>\n\n<p>ps: the function to do the adding of arrays based on keys is:</p>\n\n<pre><code> function array_add($a1, $a2) {\n            // adds the values at identical keys together\n            $aRes = $a1;\n            foreach (array_slice(func_get_args(), 1) as $aRay) {\n              foreach (array_intersect_key($aRay, $aRes) as $key =&gt; $val) $aRes[$key] += $val;\n              $aRes += $aRay; \n             }\n            return $aRes;\n    }\n</code></pre>\n\n<p>========================================= day 2 =======================</p>\n\n<p>after some thinking i thought to give another try... so in order to name the keys of array effort_a dynamically i need to know where to stop with the incrementation so :</p>\n\n<pre><code>$sql_nrtask='SELECT *, COUNT(user) AS nr_task\n                FROM task\n                WHERE user=\"ASD\"\n                ORDER BY data_i ASC\n               ';\n    $query_nrtask=  mysql_query($sql_nrtask) or die ('rrr');\n    while ($row_nrtask=  mysql_fetch_array($query_nrtask)) {\n        $nr_task=$row_nrtask['nr_task']; // no we know how many sub-arrays we'll have\n    }\nfor ($j++;$j&lt;=$nr_task;$j++){\nwhile ($luna_curenta&lt;=$luna_end){\n            //construieste vectorul\n            for ($i = 1; $i &lt;= $ultimazi_luna_curenta; $i++) {\n                $data_curenta=  date(\"Y-m-d\", mktime(0, 0, 0, $luna_curenta, $i, 2012));\n                if (($data_curenta&gt;=$row_task['data_i'])&amp;&amp;($data_curenta&lt;=$row_task['data_s'])){\n                    $efort_a['$a'.$j][$data_curenta]=$efort_mediu;\n                }\n            }\n            $luna_curenta++;\n        }\n}     \n</code></pre>\n\n<p>the problem is know that i don't know hot to merge the arrays within $efort_a with 2 conditions:</p>\n\n<ul>\n<li>keeping indexes where they are the same and adding values </li>\n<li>adding a new index where it is a new element </li>\n</ul>\n"},{"tags":["mysql","database-design"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13271493,"title":"Exporting a table in mysql","body":"<p>I am doing some prototyping and so created a database with a few tables and dependencies. The project became bigger than I thought and now want to clean up the names, dependencies etc and so want to create the DB anew. But I don't want to go through the whole process of creating individual tables again, instead I want to start with what I have, clean the creation scripts up and run them if possible. Is there a way I can export all the scripts to create the DB and tables? Are there tools or mysql command line options to do this?</p>\n\n<p>Thanks,</p>\n\n<p>-S</p>\n"},{"tags":["mysql","database-schema","bluehost"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13271422,"title":"Database creation with MySQL Query","body":"<p>My goal to create a SQL Query file that will automate the database creation process a little. I'm using MYSQLWorkbench to browse my schemas and run my SQL script. I've done lots of table creation this way, so I'm familiar with executing the file, and most simple keywords. When I try only executing:</p>\n\n<pre><code>CREATE SCHEMA `mysite_ttu` DEFAULT CHARACTER SET utf8\n</code></pre>\n\n<p>I get the error:</p>\n\n<pre><code>ERROR 1044: Access denied for user 'mysite_admin'@'myip' to database 'mysite_ttu'\n</code></pre>\n\n<p>I'm using Bluehost to host my site, and when I create a database from the cPanel, you have to add the user post-schema-creation. When you add the user it THEN gives you the option to add the various database managing privileges. I believe the issue has to do with the user 'mysite_admin' not having the necessary privileges to create the database, even though it doesn't yet exist. How would I go about accomplishing this?</p>\n"},{"tags":["php","mysql","forms","select"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13271389,"title":"MySQL Value Returns Null After Select","body":"<pre><code>if (! empty ( $fname ) &amp;&amp; ! empty ( $lname )) {\n        $query5 = \"select * from \" . $db_prefix . \"customer_det where (fname = '\" . $fname . \"' and lname = '\" . $lname . \"')\";\n            $result5 = $mysqli-&gt;query ( $query5, MYSQLI_STORE_RESULT ) or die ( mysql_error () );\n    } else {\n        $query5 = \"select * from \" . $db_prefix . \"customer_det where phone = '\" . $phone . \"'\";\n        $result5 = $mysqli-&gt;query ( $query5, MYSQLI_STORE_RESULT ) or die ( mysql_error () );\n\n    }\n    while ($row=$result5-&gt;fetch_assoc) {\n        $uid = $row['id'];\n            $visits = $row['visits'];\n        }\n        var_dump($uid);\n        var_dump($visits);\n            var_dump($result5);\n            var_dump($fname);\n            var_dump($lname);\n</code></pre>\n\n<p>I'm not sure where I'm going wrong here.  I run both of those queries in the phpMyAdmin SQL query box and it returns a row set.  Then when I run it in PHP, and var_dump the variables, $uid returns NULL as well as $visits.  Here's the var dump:</p>\n\n<pre><code>NULL NULL object(mysqli_result)#4 (5) { [\"current_field\"]=&gt; int(0) [\"field_count\"]=&gt; int(34) [\"lengths\"]=&gt; NULL [\"num_rows\"]=&gt; int(1) [\"type\"]=&gt; int(0) } string(6) \"Wesley\" string(6) \"Snipes\"\n</code></pre>\n\n<p>Any advice would be great.</p>\n"},{"tags":["mysql","constraints","information-schema"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13270411,"title":"Is it possible to update KEY_COLUMN_USAGE table in mysql?","body":"<p>After renaming a table, I have noticed that some constraints still have the old name for REFERENCED_TABLE_NAME in INFORMATION_SCHEMA.KEY_COLUMN_USAGE. Is it possible to change that field on some rows or one have to drop those constraints?</p>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13270431,"title":"SQL query and string search","body":"<p>I have that database diagram (MySQL). Each <code>Book</code> has assigned a <code>BookLanguage</code>. Each <code>BookLanguage</code> has two different <code>LanguageNames</code> (the globalization purpose). And also, each <code>Book</code> can have an additional <code>BookLanguage</code> <strong>(but it's not required)</strong>.</p>\n\n<p>And here's the problem - I'm stuck here while building a SQL query for searching for that <code>Books</code>, whose have some string in the <code>BookLanguageNames</code>. It's simple to build the query with joining the <code>BookLanguage</code> and <code>BookLanguageNames</code> but how to cope with the <code>AdditionalBookLanguages</code> ?</p>\n\n<p><img src=\"http://i.stack.imgur.com/QSDM4.png\" alt=\"enter image description here\"></p>\n"},{"tags":["mysql","join","full-text-search","match"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13271161,"title":"How to return rows in one table whose field contains a string from any row in another table?","body":"<p>I have the following table structure in MySQL 5.6:</p>\n\n<pre><code>CREATE TABLE `dictionary` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `word` varchar(80) NOT NULL,\n  PRIMARY KEY (`id`),\n  KEY `word` (`word`)\n) ENGINE=InnoDB;\n\nCREATE TABLE `sentences` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `sentence` varchar(254) NOT NULL,\n  PRIMARY KEY (`id`),\n  FULLTEXT KEY `sentencefulltext` (`sentence`)\n) ENGINE=InnoDB;\n</code></pre>\n\n<p>I want to return all the sentences that contain any of the words in my dictionary. I don't really care about word boundaries, it can be a basic substring.</p>\n\n<p>Fulltext MATCH AGAINST seems to only work with strings and not a select from another table. As for LIKE and REGEXP, they seem to take for ages since I have about 500k rows of sentences and 50k rows of words in my dictionary.</p>\n\n<p>One option would be to go through the dictionary row by row in a program and call a select on each row, but I'd rather do it in a single SQL statement.</p>\n\n<p>If someone has any ideas, please share. </p>\n\n<p>Thanks!</p>\n"},{"tags":["mysql","sql","query"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":55,"score":3,"question_id":13244369,"title":"MySql Query for generating report","body":"<p>I have one table which is having three fields:</p>\n\n<pre><code>Id, Creation Time, Fuel Level\n</code></pre>\n\n<p>Every two minutes we are getting data and inserting to database.For generating a fuel credit/debit statement i want to get starting(Stating of the day) and ending(End of the Day) Fuel Level.Can anyone help to form a query to generate this report?</p>\n\n<p>Search parameters will be date range.</p>\n\n<p>Id=10;creation time =2019-02-15 16:32:59;Fuel Level =20</p>\n\n<p>I created one sample schema here\n<a href=\"http://sqlfiddle.com/#!2/76dd5\" rel=\"nofollow\">http://sqlfiddle.com/#!2/76dd5</a></p>\n"},{"tags":["php","mysql","oop","mysqli"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13268143,"title":"Reuse MySQL connection PHP object inheritance","body":"<p>I'm writing a single PHP script to migrate topics from an old forums site to a new one.  </p>\n\n<ul>\n<li>The old forums site use database \"old_forums\"  </li>\n<li>Thew new forums site use database \"new_forums\"</li>\n<li>MySQL user \"forums\" has all privileges to both databases (I'm using 1 single user for convenience but I would not have any problems using 2 different users if required)</li>\n</ul>\n\n<p>I have both forum hosted on the the same host - localhost</p>\n\n<p>The script I have the following structure  </p>\n\n<pre><code>&lt;?php  \nclass Forum {  \n   //constants  \n   const HOST = \"localhost\";  \n   const DB_USER = \"forums\";  \n   const DB_PASS = \"forums\";  \n   ...  \n   //properties e.g. topic title, topic content\n}\nclass OldForum extends Forum {  \n   const DB_NAME_OLD = \"old_forums\";  \n   public static function exportTopics() {  \n       //some code\n   }  \n}\nclass NewForum extends Forum {\n   const DB_NAME_NEW = \"new_forums\";\n   public static function importTopics() {  \n       //some code\n   }\n}  \nOldForum::exportTopics();  \nNewForum::importTopics();  \n?&gt;   \n</code></pre>\n\n<p>I understand that I'm mixing procedural &amp; object-oriented programming PHP (OOPP) here.\nI'm new to object-oriented PHP but (I have experience with Java so I'm very open to some guide to make this pure OOPP)  </p>\n\n<p>I would like to ultilise 1 single MySQL connection for both OldForum and NewForum class.<br>\nWhere should I instantiate a mysqli object?<br>\ne.g. inside Forum class' constructor or have a new mysqli object as a property of class Forum<br>\nso that I would create a new Forum object to initiate a MySQL connection</p>\n\n<pre><code>$a_forum = new Forum();  \n</code></pre>\n"},{"tags":["mysql","hibernate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13271217,"title":"Database refusing connection for locale 'en_US'","body":"<p>I am using MySQL server for database and Hibernate as ORM framework in my application.\nWhenever hibernate tries to establish a connection with desired database, an exception occurrs  stating 'org.hibernate.exception.Genericjdbcexception cannot open connection' for locale 'en_US'. I am getting no idea how to resolve this issue. Please help.</p>\n"},{"tags":["java","mysql","jdbc","rollback","autocommit"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":44,"score":4,"question_id":13269632,"title":"mysql jdbc unsuccessful rollback","body":"<p>I've got some Java code uses JDBC to connect to a MySQL database, then the code does some read operations then a single update, all using the same connection. If there is an exception, then <code>connection.rollback()</code> is called; if there's no exception, <code>connection.commit()</code> is called. At this stage, the connection is newly created each time I run my test (i.e. it does not come from a pool). My code only ever creates one connection, and it is used throughout the test.</p>\n\n<p>The connection being used has <code>connection.setAutoCommit(false)</code> called immediately after the connection instance is created.</p>\n\n<p>For some reason, when there is an exception and <code>connection.rollback()</code> is called, it turns out that my update has been committed rather than rolled back.</p>\n\n<p>Via debugging, I have confirmed the following,</p>\n\n<ul>\n<li><p>After calling <code>connection.setAutoCommit(false)</code>, <code>connection.getAutoCommit()</code> returns a value of <code>false</code>, as expected. Also, <code>\"Select @@session.autocommit\"</code> returns a value of <code>0</code>, indicating that auto commit is off, as expected.</p></li>\n<li><p>Immediately prior to calling <code>connection.rollback()</code>, the same checks show that auto commit is off, as expected.</p></li>\n<li><p><code>connection.commit()</code> is definitely not being called and <code>connection.rollback()</code> is definitely being called.</p></li>\n</ul>\n\n<p>I have also tried explicitly running the statement <code>\"rollback;\"</code> but it does not solve my issue. I have also tried explicitly running the statement <code>\"Set AUTOCOMMIT = 0;\"</code> after creating the connection.</p>\n\n<p>All of my tables use a storage engine of InnoDB. Via SQL Workbench, with auto commit off, rollbacks and commits work as expected.</p>\n\n<p>I am using MySQL version '5.0.91-community-nt'. The MySQL jdbc driver version is 5.1.19. I'm using Java 5.</p>\n\n<p>Has anyone got any suggestions as to why my update is getting committed even though auto-commit is off, commit is never called, and rollback is explicitly called?</p>\n\n<p>Cheers.</p>\n"},{"tags":["php","mysql","pdo"],"answer_count":4,"favorite_count":5,"up_vote_count":12,"down_vote_count":0,"view_count":11069,"score":12,"question_id":1819592,"title":"Error when connecting to MySQL using PHP/PDO","body":"<p>My code was working all fine yesterday and today it suddenly just don't want to connect to my database. I have changed no settings on it or on the code and I haven't updated any software either. All I do is this:</p>\n\n<p><code>\nnew PDO('mysql:host=localhost;port=3306;dbname=test', 'username', 'password');\n</code></p>\n\n<p>And I get a nice exception message saying this:</p>\n\n<p><code>\nWarning: PDO::__construct(): [2002] No such file or directory (trying to connect via unix:///tmp/mysql.sock) in ...\n</code></p>\n\n<p>The thing is: I'm clearly not trying to connect using a unix socket but using TCP/IP. What am I doing wrong? Is there something I'm missing here?</p>\n\n<p>Thanks for any help.</p>\n"},{"tags":["mysql","osx","mamp","mysql-server"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13270821,"title":"Can't connect to MySQL with hostname wildcard","body":"<p>I installed <code>MySQL</code> to my Mac (with MAMP installer) and have a problem. When I create a user with \"@%\" hostname this way: </p>\n\n<pre><code>CREATE USER 'test'@'%' IDENTIFIED BY 'test';\n</code></pre>\n\n<p>and I try to connect via CLI: <code>mysql -u test -ptest</code>, I get this error: </p>\n\n<blockquote>\n  <p>ERROR 1045 (28000): Access denied for user 'test'@'localhost' (using\n  password: YES)</p>\n</blockquote>\n\n<p>But when I change hostname to localhost: </p>\n\n<p><code>RENAME USER 'test'@'%' TO 'test'@'localhost';</code> </p>\n\n<p>it works.</p>\n\n<p>Any idea how to make MySQL use the wildcard?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","mysql","database","tomcat","jdbc"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":166,"score":0,"question_id":10252642,"title":"What's wrong with this SQL syntax?","body":"<p>I am trying to build registration system with java servlet. And insert data into a mySQL database. But I get a syntax error. I just finished reading Wiley mySQL and Java developers guide book. </p>\n\n<p>And I am kinda new to servlet programming, so if there is easy way to do things I do please tell me.</p>\n\n<pre><code> package com.app.base;\n\n import java.io.IOException;\n import java.io.PrintWriter;\n import java.sql.Connection;\n import java.sql.DriverManager;\n import java.sql.ResultSet;\n import java.sql.Statement;\n\n import javax.servlet.RequestDispatcher;\n import javax.servlet.ServletException;\n import javax.servlet.http.HttpServlet;\n import javax.servlet.http.HttpServletRequest;\n import javax.servlet.http.HttpServletResponse;\n\n import com.app.pojo.*;\n\n public class RegisterServlet extends HttpServlet{\n\nMySqlDB mysql;\n\n@Override\npublic void init() throws ServletException {\n    // TODO Auto-generated method stub\n    mysql = new MySqlDB();\n\n}\n\n@Override\nprotected void doPost(HttpServletRequest req, HttpServletResponse resp)\n        throws ServletException, IOException {\n\n    PrintWriter out = null;\n    //Connection connection = null;\n    //Statement statement;\n    //ResultSet rs;\n\n    resp.setContentType(\"text/html\");\n    out = resp.getWriter();\n\n\n    try{\n        mysql.createConnection();\n    }catch(Error e){\n        out.write(\"Couldn't connect to mysql\");\n    }\n    String fname = req.getParameter(\"fname\");\n    String lname = req.getParameter(\"lname\");\n    String email = req.getParameter(\"email\");\n    String password = req.getParameter(\"password\");\n    String city = req.getParameter(\"city\");\n    String country = req.getParameter(\"country\");\n\n    if(fname == null){\n        String destination = \"signup.jsp?error=Complete All Fields\";\n        RequestDispatcher rd = getServletContext().getRequestDispatcher(destination);\n        rd.forward(req, resp);\n    }else if(lname == null){\n        String destination = \"signup.jsp?error=Complete All Fields\";\n        RequestDispatcher rd = getServletContext().getRequestDispatcher(destination);\n        rd.forward(req, resp);\n    }else if(email == null){\n        String destination = \"signup.jsp?error=Complete All Fields\";\n        RequestDispatcher rd = getServletContext().getRequestDispatcher(destination);\n        rd.forward(req, resp);\n    }else if(password == null){\n        String destination = \"signup.jsp?error=Complete All Fields\";\n        RequestDispatcher rd = getServletContext().getRequestDispatcher(destination);\n        rd.forward(req, resp);\n    }else if(city == null){\n        String destination = \"signup.jsp?error=Complete All Fields\";\n        RequestDispatcher rd = getServletContext().getRequestDispatcher(destination);\n        rd.forward(req, resp);\n    }else if(country == null){\n        String destination = \"signup.jsp?error=Complete All Fields\";\n        RequestDispatcher rd = getServletContext().getRequestDispatcher(destination);\n        rd.forward(req, resp);\n    }else{\n\n        String sql = \"INSERT INTO main.users(first_name, last_name, email, password, city, country, registered_time) VALUES(\"\n                + fname +\", \"+ lname + \", \"+ email +\", \" + password +\", \" + city +\",\" + country + \",Now());\";\n        int answer = mysql.insertSQL(sql);\n        if(answer == 1){\n            resp.sendRedirect( \"index.jsp?registered=true\");\n            //String destination = \"index.jsp?registered=true\";\n            //RequestDispatcher rd = getServletContext().getRequestDispatcher(destination);\n            //rd.forward(req, resp);\n        }\n    }\n\n\n}\n\n }\n</code></pre>\n\n<p>And this is the MySql Class to connect.</p>\n\n<pre><code>package com.app.pojo;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Statement;\n\npublic class MySqlDB{\n\nprivate static String username = \"root\", password = \"root\";\n\npublic Connection createConnection(){\n    Connection connection = null;\n    try{\n        //Load the JDBC driver\n        Class.forName(\"com.mysql.jdbc.Driver\");\n\n        connection = DriverManager.getConnection(\"jdbc:mysql://localhost:3306,/main\", username, password);\n        //Create a connection to the database\n\n\n    }catch(SQLException ex){\n        System.out.println(ex);\n    }catch(ClassNotFoundException e){\n        System.out.println(e);\n    }\n\n    return connection;\n}\n\npublic void runSqlStatement(String sql){\n    try{\n        Statement statement = createConnection().createStatement();\n        //statement executeQuery(Query)\n        boolean rs = statement.execute(sql);\n    }catch(SQLException ex){\n        System.out.println(ex);\n    }\n}\n\npublic ResultSet executeSQL(String sql){\n\n    Statement statement = null;\n    ResultSet rs = null;\n\n    try{\n        statement = createConnection().createStatement();\n        rs = statement.executeQuery(sql);\n\n        /*while(rs.next()){\n            System.out.println(rs.getString(1));\n        }*/\n\n\n  //            rs.close();\n  //            statement.close();\n    }catch (SQLException e) {\n        System.out.println(e);\n    }\n\n    return rs;\n}\n\npublic int insertSQL(String sql){\n\n    int rs;\n\n    try{\n        Statement statement = createConnection().createStatement();\n        rs = statement.executeUpdate(sql);\n        return rs;\n\n    }catch(SQLException ex){\n        System.out.println(ex);\n        return 0;\n    }\n\n\n}\n}\n</code></pre>\n\n<p>This is the tomcat console</p>\n\n<pre><code>INFO: Reloading Context with name [/Map] has started\nApr 21, 2012 12:59:14 AM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc\nSEVERE: The web application [/Map] registered the JDBC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.\nApr 21, 2012 12:59:17 AM org.apache.catalina.core.StandardContext reload\nINFO: Reloading Context with name [/Map] is completed\n\ncom.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '********,Colombo,Sri Lanka,Now())' at line 1\n</code></pre>\n"},{"tags":["php","html","mysql","post","file-upload"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":13270210,"title":"Upload multiple files to server and","body":"<p>My first post so be gentle! I've tried searching for this and there are many similar posts, but I can't seem to find anything exactly like my problem and I have been at this for hours! :-/</p>\n\n<p>I'm building a system in PHP (5.3) and MySQL and part of the functionality is that a user is required to upload some files based on some previous selections. An example form is as follows:</p>\n\n<pre><code>&lt;form action=\"\" method=\"post\" enctype=\"multipart/form-data\" id=\"uploadFiles\"&gt;\n&lt;p&gt;\n&lt;label for=\"file1\"&gt;Upload file 1:&lt;/label&gt;\n&lt;input type=\"file\" name=\"file1\" id=\"image\"&gt;\n&lt;/p&gt;\n&lt;p&gt;\n&lt;label for=\"file2\"&gt;Upload file 2:&lt;/label&gt;\n&lt;input type=\"file\" name=\"file2\" id=\"image2\"&gt;\n&lt;/p&gt;\n&lt;p&gt;\n&lt;input type=\"submit\" name=\"upload\" id=\"upload\" value=\"Upload\"&gt;\n&lt;/p&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>In this instance the user is required to upload two different documents. This all works for me and I can save the 2 files to the server and then insert 2 records to a table in the database with the file name, file type (pdf, jpg) and user id etc by looping through \"$_FILES\" in my Upload class.</p>\n\n<p>What I am trying to do however is somehow add the name attribute <code>&lt;input name=\"foo\"&gt;</code> to the inserted row so that \"File 1\" would have \"file1\" in a column called document_type and \"File 2\" would have \"file2\". That way I can do a basic check in MySQL to see if the user has uploaded the appropriate files.</p>\n\n<p>To cut to the chase, is there a way to assign or associate the INPUT \"name\" attribute to each file in $_FILES in my Upload class so that when when I loop through $_FILES, there is a unique document_type? </p>\n\n<p>Please let me know if you require further information regarding my setup.</p>\n"},{"tags":["mysql","import"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13270863,"title":"difference between file upload and mysqlimport function in mysql","body":"<p>whats the difference between Mysqlimport function and the file import function in Mysql. Why do i have to write a script with Mysqlimport when i can just upload the file </p>\n"},{"tags":["mysql","query","distinct","max"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13216762,"title":"Selecting most recent MySQL rows by MAX(time) WHERE time <= x","body":"<p>I am selecting the most recent entries of a MySQL table with:</p>\n\n<pre><code>SELECT MAX(time) as most_recent, userID\nFROM TableName\nGROUP BY userID\nORDER BY most_recent DESC\n</code></pre>\n\n<p>My problem is, if I want to limit the maximum time with:</p>\n\n<pre><code>WHERE time &lt;= nnn\n</code></pre>\n\n<p>The query does not work anymore. Is there a solution for with without a subquery?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["php","mysql"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":1,"view_count":3111,"score":2,"question_id":5420156,"title":"mysql move row between tables","body":"<p>I have 2 tables, table1 and table2.</p>\n\n<p>I have a row in table1 and want to move it to table2 and remove it from table1.  Basically, a cut+paste.</p>\n\n<p>I am using php.  My current plan is to select from table1, store data in php, insert into table2, then delete from table1.  This seems like a very long process.</p>\n\n<p>Is this really the best way to do this?</p>\n"},{"tags":["mysql","database","query"],"answer_count":1,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":27,"score":5,"question_id":13261636,"title":"Query: Tables with indexing/foregeing keys/correlated data","body":"<p>I am currently working with a MySQL database table structure. I found a great table structure online but i am not sure how to duplicate such thing. I am new to this and I am requesting help in creating a query that will create all tables( which have correlated data(index), foreign keys, many to many relationships, etc.). </p>\n\n<p><strong>Random</strong> I was able to make a query to select all fields:</p>\n\n<pre><code>SELECT *\n\nFROM schedule \n\nINNER JOIN semester \n\nON schedule.semester_id = semester.id\n\nINNER JOIN office_hours\n\nON office_hours.schedule_id = schedule.semester_id\n\nINNER JOIN faculty\n\nON faculty.id = office_hours.faculty_id\n\nINNER JOIN faculty_titles\n\nON faculty_titles.faculty_id = faculty.id\n\nINNER JOIN faculty_education\n\nON faculty_education.faculty_id = faculty.id \n\nINNER JOIN section\n\nON section.faculty_id = faculty.id \n\nINNER JOIN class\n\nON class.id = section.class_id\n\nINNER JOIN major_class_br\n</code></pre>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13268300,"title":"Reverse wildcard search in codeigniter","body":"<p>I am implementing a snippet-based content management system into my current project. Snippets can be associated with a page either by exact match of the full url falling back to a wildcard match on a partial url or finally a default snippet.</p>\n\n<p>To implement this I have a created table of page associations with a wildcard flag, the system first checks the current url against the non-wildcard associations and if it doesn't find a match it checks against the partial url's where the wildcard flag is set.</p>\n\n<p>In order to achieve this I am getting all the partial url's from the database and putting them into an array then walking the array to check for a match against the current url:</p>\n\n<pre><code>protected function _check_wildcard($url = NULL)\n{\n    if($url)\n    {\n        $q = $this-&gt;db-&gt;where('wildcard' ,'Y')\n                -&gt;from('content')\n                -&gt;get();\n        $wildcards = $q-&gt;result_array();\n\n        foreach($wildcards AS $wildcard)\n        {\n            if(strpos($url,$wildcard['url']) !== FALSE )\n            {\n                return $wildcard['snippet_id'];\n            }\n        }\n    }\n    else\n    {\n        return NULL;\n    }\n}\n</code></pre>\n\n<p>Can anyone suggest a better way to do this - preferably one that doesn't involve having to constantly download the full list of all the wildcards each time I load a page as I am afraid that this will have a negative effect on the scalability of the system down the line?</p>\n"},{"tags":["mysql","sql","sql-update","ranking"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1310,"score":4,"question_id":3196971,"title":"MySQL update statement to store ranking positions","body":"<p>I'm trying to get my head around a query and I just can't figure it out. I would appreciate if someone give me a pointer. As a simple example of what I'm trying to achieve, I have these records in the database</p>\n\n<pre><code>Score|Ranking\n-------------\n100  |0\n200  |0\n300  |0\n</code></pre>\n\n<p>And I would like the Ranking field to contain 1,2,3 based on who's got the highest score so the result should be:</p>\n\n<pre><code>Score|Ranking\n-------------\n100  |3\n200  |2\n300  |1\n</code></pre>\n\n<p>At the moment, I'm doing a for next loop for all these records but given that in reality that could be a few thousand - that could take forever! Does anyone have an idea on a magic query which would do this in one go?</p>\n"},{"tags":["mysql","join","relational-database"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13270301,"title":"MySQL: Show A.id and B.id where no relation is met","body":"<p>I have the following Tables:</p>\n\n<pre><code>Table A\nid | name\n1  | foo\n2  | bar\n\nTable B\nid | name | default\n1  | 123  | 1\n2  | 321  | 0\n3  | 456  | 1\n\nTable C\nA_id | B_id\n1    | 2\n1    | 3\n</code></pre>\n\n<p>now I would like to get the A-B pairs (with condition that these pairs have B.default = 1) which are not in C</p>\n\n<p>So the expected result would be:</p>\n\n<pre><code>A_id | B_id\n1    | 1\n2    | 1\n2    | 3\n</code></pre>\n\n<p>but I'm totally confused about how to join table B in:</p>\n\n<pre><code>SELECT A.id, B.id\nFROM A\n\nLEFT OUTER JOIN C\nON C.A_id = A.id\n\nLEFT OUTER JOIN B\nAND C.B_id = B.id\nAND B.default = 1\n</code></pre>\n"},{"tags":["mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":16,"score":2,"question_id":13270358,"title":"inserting multiple parameter values into a single column","body":"<p>I'm inserting into my database here with parameters from the form.</p>\n\n<p>The form has 4 input fields (current_no, current_street, current_city, current_state). I've set it up so that the client can display each of these values on the web page, but what they want is to be able to view these values in a single column.</p>\n\n<p>so basically from...</p>\n\n<blockquote>\n  <p>current_no | current_street | current_city | current_state</p>\n</blockquote>\n\n<p>to...</p>\n\n<blockquote>\n  <p>| current_no current_street current_city current_state |</p>\n</blockquote>\n\n<p>I decided I'd add another column to the table that'll store this \"full\" value and I figured that populating it would probably be easy but I think I'm missing something here:</p>\n\n<pre><code>insert into customers(current_address) values (current_no + ' ' + current_street + ' ' + current_city + ' ' + current_state)\n</code></pre>\n\n<p>Although this doesn't give me any errors, it only inserts the <code>current_no</code> value into the column.</p>\n\n<p>How can I concatenate all the values (string types) into the column on database side?</p>\n\n<p>Thanks in advance for any help!</p>\n"},{"tags":["java","mysql","tomcat","jdbc"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":13131522,"title":"java.sql.PreparedStatement.setString Function getting Varchars confused with doubles","body":"<p>I have a servlet/tomcat server written in java.</p>\n\n<p>I have a mysql class that I have written, and I have been using the functions in it to insert prepared statements into a mysql database using jdbc.</p>\n\n<p>The function I call uses <code>java.sql.PreparedStatement.setString</code> in order to set the paramaters of the prepared statement. This has been working perfectly for thousands of different inputs for months on end without issue.</p>\n\n<p>Recently however, when trying to use the function to insert an ip address into a VARCHAR type mysql column I am getting an exception thrown as follows:</p>\n\n<pre><code>com.mysql.jdbc.MysqlDataTruncation: Data truncation: Truncated incorrect DOUBLE value: '10.1.1.101'\n</code></pre>\n\n<p>This is bizarre, There is no notion of a DOUBLE anywhere in my code, and a \"Show Columns\" on the mysql table ensures that the data type is in fact a VARCHAR. I have had my colleagues look at this as well to double check that I wasn't missing something simple. However we are all stumped.</p>\n\n<p>My only theory is that the JDBC driver or the SetText function is taking a liberty and assuming a DOUBLE data type because the first part of the ip address is in the form of XX.XX</p>\n\n<p>Any help would be great, please don't tell me to do obvious stuff like check my column data types etc. I have spent a lot of time double and tripple checking everything.</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":19,"score":-2,"question_id":13270133,"title":"Storing text/image file in mysql database","body":"<p>Is it possible to store .doc/.txt or image files to stroe in database directly making attributes of type blob?I neewd a good working example for storing files inside database and also obviously retrieving them from database as original.</p>\n"},{"tags":["php","mysql","ajax","json"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13270086,"title":"How do I alert multiple results with ajax from json arrray","body":"<p>I have this query </p>\n\n<pre><code>$result = mysql_query(\"SELECT * FROM ship_data WHERE id = $ship\") or die(mysql_error());\n$rows = array();\nwhile($r = mysql_fetch_assoc($result)) {\n    $rows = $r; \necho json_encode($rows);\n}\n</code></pre>\n\n<p>And this bit of ajax to return the results</p>\n\n<pre><code> $.ajax({\n            type: \"POST\",\n            dataType: \"json\",\n            data: \"ship=\" + ship,\n            cache: false,\n            url: \"/getdata.php\",\n            success: function (data) {\n                alert(data.carrier);\n            }\n        });\n</code></pre>\n\n<p>If there is just one result in the array it works, if the array has multiple results in the array nothing is alerted.</p>\n"},{"tags":["php","mysql","pdo","doctrine","doctrine2"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13269385,"title":"Doctrine Backuptables","body":"<p>is there any way to make Backup Tables in Doctrine 2.</p>\n\n<p>I have an XML and want to import it every day with an cron job.\nFirst I create a new Schema with the end _new.</p>\n\n<pre><code>if ($newTables) {\n    $tablePastfix = new \\DoctrineExtensions\\TablePastfix('_new');\n    $evm-&gt;addEventListener(\\Doctrine\\ORM\\Events::loadClassMetadata, $tablePastfix);\n    }\n\n    $entityManager = \\Doctrine\\ORM\\EntityManager::create($conn, $config, $evm);\n\n    if ($newTables) {\n    $tool = new \\Doctrine\\ORM\\Tools\\SchemaTool($entityManager);\n    $classes = array (\n        $entityManager-&gt;getClassMetadata('MyClasses'),\n        $entityManager-&gt;getClassMetadata('MyClasses'),\n        $entityManager-&gt;getClassMetadata('MyClasses'),\n    );\n        $tool-&gt;createSchema($classes);\n}\n</code></pre>\n\n<p>After it i import the data from xml.\nAnd is all okay, i rename the Tables</p>\n\n<pre><code>$dm = Doctrine\\DBAL\\DriverManager::getConnection($conn);\n$sql = \"DROP TABLE `mytable_old`;\";\n$stmt = $dm-&gt;query($sql);\n$stmt-&gt;execute();\n\n$dm = Doctrine\\DBAL\\DriverManager::getConnection($conn);\n$sql = \"ALTER TABLE `mytable` RENAME `mytable_old`;\";\n$stmt = $dm-&gt;query($sql);\n$stmt-&gt;execute();\n\n$dm = Doctrine\\DBAL\\DriverManager::getConnection($conn);\n$sql = \"ALTER TABLE `mytable_new` RENAME `mytable`;\";\n$stmt = $dm-&gt;query($sql);\n$stmt-&gt;execute();\n</code></pre>\n\n<p>But when i want to import again, i get the following error . . . . . :(</p>\n\n<pre><code>Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY000]: General error: 1005 Can't create table 'databasename.#sql-220_87' (errno: 121)' in /Applications/MAMP/bin/php/php5.3.14/lib/php/Doctrine/ORM/Tools/ToolsException.php on line 33\n\nPDOException: SQLSTATE[HY000]: General error: 1005 Can't create table 'databasename.#sql-220_87' (errno: 121) in /Applications/MAMP/bin/php/php5.3.14/lib/php/Doctrine/DBAL/Connection.php on line 646\n\nCall Stack:\n    0.0011     761296   1. {main}() /path/to/jobs/import.php:0\n    0.0014     767024   2. require_once('/path/to/jobs/config.php') /path/to/jobs/import.php:7\n    0.0017     770536   3. require_once('/path/to/jobs/bootstrap.php') /path/to/jobs/config.php:3\n    0.0020     796264   4. require_once('/path/to/jobs/bootstrap_doctrine.php') /path/to/jobs/bootstrap.php:5\n    0.1468    7673040   5. Doctrine\\ORM\\Tools\\SchemaTool-&gt;createSchema() /path/to/jobs/bootstrap_doctrine.php:53\n    1.1216    9445080   6. Doctrine\\DBAL\\Connection-&gt;executeQuery() /Applications/MAMP/bin/php/php5.3.14/lib/php/Doctrine/ORM/Tools/SchemaTool.php:90\n    1.1216    9445656   7. PDO-&gt;query() /Applications/MAMP/bin/php/php5.3.14/lib/php/Doctrine/DBAL/Connection.php:646\n\nDoctrine\\DBAL\\DBALException: An exception occurred while executing 'ALTER TABLE doc_consultant_practice_new ADD CONSTRAINT FK_60C69DE344F779A2 FOREIGN KEY (consultant_id) REFERENCES doc_xml_consultant_new (id) ON DELETE CASCADE':\n\nSQLSTATE[HY000]: General error: 1005 Can't create table 'databasename.#sql-220_87' (errno: 121) in /Applications/MAMP/bin/php/php5.3.14/lib/php/Doctrine/DBAL/DBALException.php on line 47\n\nCall Stack:\n    0.0011     761296   1. {main}() /path/to/jobs/import.php:0\n    0.0014     767024   2. require_once('/path/to/jobs/config.php') /path/to/jobs/import.php:7\n    0.0017     770536   3. require_once('/path/to/jobs/bootstrap.php') /path/to/jobs/config.php:3\n    0.0020     796264   4. require_once('/path/to/jobs/bootstrap_doctrine.php') /path/to/jobs/bootstrap.php:5\n    0.1468    7673040   5. Doctrine\\ORM\\Tools\\SchemaTool-&gt;createSchema() /path/to/jobs/bootstrap_doctrine.php:53\n    1.1216    9445080   6. Doctrine\\DBAL\\Connection-&gt;executeQuery() /Applications/MAMP/bin/php/php5.3.14/lib/php/Doctrine/ORM/Tools/SchemaTool.php:90\n\nDoctrine\\ORM\\Tools\\ToolsException: Schema-Tool failed with Error 'An exception occurred while executing 'ALTER TABLE doc_consultant_practice_new ADD CONSTRAINT FK_60C69DE344F779A2 FOREIGN KEY (consultant_id) REFERENCES doc_xml_consultant_new (id) ON DELETE CASCADE':\n\nSQLSTATE[HY000]: General error: 1005 Can't create table 'databasename.#sql-220_87' (errno: 121)' while executing DDL: ALTER TABLE doc_consultant_practice_new ADD CONSTRAINT FK_60C69DE344F779A2 FOREIGN KEY (consultant_id) REFERENCES doc_xml_consultant_new (id) ON DELETE CASCADE in /Applications/MAMP/bin/php/php5.3.14/lib/php/Doctrine/ORM/Tools/ToolsException.php on line 33\n\nCall Stack:\n    0.0011     761296   1. {main}() /path/to/jobs/import.php:0\n    0.0014     767024   2. require_once('/path/to/jobs/config.php') /path/to/jobs/import.php:7\n    0.0017     770536   3. require_once('/path/to/jobs/bootstrap.php') /path/to/jobs/config.php:3\n    0.0020     796264   4. require_once('/path/to/jobs/bootstrap_doctrine.php') /path/to/jobs/bootstrap.php:5\n    0.1468    7673040   5. Doctrine\\ORM\\Tools\\SchemaTool-&gt;createSchema() /path/to/jobs/bootstrap_doctrine.php:53\n</code></pre>\n\n<p>Do anybody know my mistake or have an better idea to realize backup tables?</p>\n"},{"tags":["mysql","ruby-on-rails-3.2","activeadmin","timefield"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13269872,"title":"active admin saving black time field","body":"<p>I am using Active Admin, I have a model jobs with a execution_time field set as :time along with some string fields</p>\n\n<p>When saving a new job all fields are saved to the database apart from the time filed. I am at a loss, i found one post on here that had to manually same the hh and mm in separate fields. I do not really want to that. All I need is to save a time.</p>\n\n<p>Does anyone have any ideas how to make this work, or any tips on what I could be doing wrong</p>\n\n<p>Cheers</p>\n\n<p>Rich</p>\n"},{"tags":["mysql","asp.net-mvc","visual-studio"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13269830,"title":"how to add values in the database","body":"<p>In my table I have 5 fields,In those fields,Those are</p>\n\n<pre><code>1.questionId\n2.questionUserId\n3.SurveyId\n4.answer\n5.answerId\n</code></pre>\n\n<p>while I was saving records,I am passing \"answer\" field and \"survey\" field as a parameter to my action method.\nMy answer parameter is in the form of string separated my semicolumn.I am splitting this one using \"semicolumn\" and by executing the for loop I am trying to save values into the database.</p>\n\n<p>How I have to save is that,For adding new record,In the for loop all record values are same except \"answer\" and \"answerId\" which is auto incrementing.\nwhile I am saving,For the first time of execution new record is saving but for next iteration,It is throwing <code>DuplicateKeyUnhandledByUserCode</code> and <code>Instance of 'DataModel.question_answer' with identity '1850137295-2-1-2-11' already exists in the cache of the object scope.</code></p>\n"},{"tags":["mysql","sql","wordpress","wordpress-mu"],"answer_count":2,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":476,"score":4,"question_id":3817540,"title":"How can I simultaneously query all blog options table in a Wordpress multisite installation (3.0)?","body":"<p>In our Wordpress 3.0 multi-site installation, we have a custom option for all of our blogs called something like 'platform'. Admins can enter in a value for this platform when creating or editing a blog. Some blogs may have no platform.</p>\n\n<p>We need to be able to create a list of all platforms, and their associated blogs. The problem is, we dynamically create and delete blogs through other site mechanisms, so we have lots of blog options tables with numbers that are not necessarily contiguous. (ie wp_2_options, wp_4_options, wp_12_options, etc.)</p>\n\n<p>My question is this, is there a way in Wordpress to grab an option across all blogs? Conversely, is there a query I could run that would do this manually? I've tried something like this to no effect:</p>\n\n<p>SELECT * FROM\n  (SELECT table_name\n  FROM information_schema.tables\n  WHERE table_name like 'wp_%_options') as t\nWHERE option_name='platform'</p>\n\n<p>Does it make sense what I'm trying to do? Again, I apologize for my lack of MySql knowledge, but I haven't been able to find any answers about how to do this. I could also query all these table names first, and then query each table separately, but thats not really an option because we have many blogs, and we may need to run this query for many page requests simultaneously, and this would be adding hundreds of queries to each of these requests.</p>\n\n<p>Any advice or help you guys could give would be greatly appreciated.</p>\n"},{"tags":["php","mysql","csv"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":16,"score":-1,"question_id":13268903,"title":"character set issue while importing CSV (windows OS)","body":"<p>I am trying to insert data from CSV file into mysql But, I am not able to save languages other than English. It shows '???????' in csv file instead I want to save it as it is in csv file as well as in mysql. Its properly working on ubuntu but creating problem on windows.</p>\n"},{"tags":["java","mysql","database","jdbc","transactions"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13269718,"title":"How to maintain acid property of 3 sequential transaction of three diffrenet databases","body":"<p>I am currently working on a project where I have to use <strong>3 three different databases</strong>. I am using jdbc 3, mysql 5.x ,struts2.x and hibernate3.x</p>\n\n<p>suppose these databases connections are <strong>x,y,z</strong> \nI have to perform <strong>crud</strong> operations on these databases.So basically process is as follows:</p>\n\n<pre><code>1)insert some data into diffrent tables of database X\n2)insert some data into diffrent tables of database Y \n3)insert some data into diffrent tables of database Z\n</code></pre>\n\n<p>I am using savepoints to maintains integrity as well as for rollback. But my problem is with commit() operation as follows: I am committing these database one by one like this-</p>\n\n<pre><code>x.commit()\ny.commit()\nz.commit() \n</code></pre>\n\n<p>Suppose database <strong>X</strong> is successfully committed. But exception occurs while committing database <strong>Y</strong>, Then I cant rollback the <strong>Database X</strong>. or entire process.</p>\n\n<p>which is the best solution to handle these scenario. Any help would be greatly appropriate.  </p>\n"},{"tags":["php","javascript","mysql","database","mongodb"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":56,"score":-2,"question_id":13268270,"title":"Suggestion needed for developing enormous web application","body":"<p>I have been given the contract of making a big web application for a private bus transport company. Before I elaborate the question, here's a few things:</p>\n\n<p>It is a complete web based and application that will be used to:</p>\n\n<ul>\n<li>Manage Vehicles, Routes, Bus Stoppages</li>\n<li>Current location using GPS and calculations.</li>\n<li>Print tickets</li>\n<li>Online Purchase</li>\n<li>Membership</li>\n<li>Full accounts management (i.e. income, expenses, graphical reports etc)</li>\n<li>A website working simultaneously allowing to book/cancel tickets, and live chat.</li>\n</ul>\n\n<p>All that said, my question is that what would be the appropriate environment and tools to build the app?</p>\n\n<ol>\n<li>Programming Lingo: (My choice, MVC based JavaScript framework with PHP in the back to provide data and views) Give me your suggestions.</li>\n<li>DataBase: This is where I am mostly confused. Should I use mysql? or something OOP like mongoDB?</li>\n<li>Other tools: What other tools may aid me? suggest please.</li>\n</ol>\n\n<p>And, I have to do this alone. Hiring people/outsourcing/teaming is not an option.</p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13269518,"title":"How select data from same table with different status in mysql?","body":"<p>I have a table like this <img src=\"http://i.stack.imgur.com/2k8eM.png\" alt=\"my table\">.</p>\n\n<p>I want to select random 10 non fancy suite_number\nand random 10 fancy suite_number. Now am using two query to do this.\n Can i do it with one query?\nHow select data from same table with different status in mysql?</p>\n"},{"tags":["java","mysql","database","jsp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":24,"score":-4,"question_id":13269616,"title":"Insert Huge Data to MySQL and then display comparison between two tables","body":"<p>I have a requirement where 1000+ records to be inserted in MySQL database from JSP page and then these records are compared with another Table and display the differences between them. But the problem I face is I cannot insert the record, it gives me blank. The process is below </p>\n\n<ol>\n<li>There are two tables \"users\" and \"temp_users\" </li>\n<li>CSV file contains the list of users which is inserted into \"temp_users\" table. </li>\n<li>Comparison is made between \"users\" table and \"temp_users\" table.</li>\n<li>Differences is displayed which includes the record existing in \"users\" table but not in \"temp_users\" and vice versa. </li>\n</ol>\n\n<p>All these function are done in a single JSP page. Please advise what can be done to remedy this slowness. I think it will even give the problem in comparison and displaying the differences. </p>\n\n<p>The application is in Apache Tomcat, MySQL. </p>\n\n<p>Thanks,</p>\n"},{"tags":["javascript","mysql","node.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13266013,"title":"When to close MySQL connection using node-mysql?","body":"<p>Currently using: <a href=\"https://github.com/felixge/node-mysql\" rel=\"nofollow\">https://github.com/felixge/node-mysql</a></p>\n\n<p>I have the following code:</p>\n\n<pre><code>var connection = mysql.createConnection({\n    host     : 'localhost',\n    user     : 'me',\n    password : 'secret',\n    database : 'Database1'\n});\napp.put('/api/upload', function(req, res, next)\n{\n    connection.connect();\n    doMultipleQueries(function(err)\n    {\n        connection.end();\n    });          \n};\n</code></pre>\n\n<p>The put request works perfectly fine, but calling it the second time, I get the following error</p>\n\n<pre><code>events.js:68\n        throw arguments[1]; // Unhandled 'error' event\n                       ^\nError: Cannot enqueue Handshake after invoking quit.\n    at Protocol._validateEnqueue (/Users/anon/Desktop/project Web/node_modules/mysql/lib/protocol/Protocol.js:110:16)\n</code></pre>\n\n<p>Am I supposed to leave the connection open until the server dies?</p>\n\n<p>UPDATE:\nWhen I move the mysql.createConnection into the put request function like so:</p>\n\n<pre><code>var connection = null; \napp.put('/api/upload', function(req, res, next)\n{\n    connection = mysql.createConnection({\n        host     : 'localhost',\n        user     : 'me',\n        password : 'secret',\n        database : 'Database1'\n    });\n    connection.connect();\n    doMultipleQueries(function(err)\n    {\n        connection.end();\n    });          \n};\n</code></pre>\n\n<p>It works fine. Does this mean connection.end() closes what mysql.createConnection created and cannot be reconnected?</p>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13269026,"title":"SQL - choose number from string, and replace it","body":"<p>I hav the next query in SQL:\nSELECT id FROM student WHERE DATE LIKE '%$inputdate'\nthe inputDate is in the next format: 2010.08.03\nI also want to change the date of the date, by increasing the day in a week (+7).</p>\n\n<p>I try this:</p>\n\n<pre><code>SELECT id\nFROM student\nWHERE DATE LIKE '%$inputdate'\n     OR DATE Like '%CAST(RIGHT(\"2012-11-03\", 2)AS INT) + 7;\n</code></pre>\n\n<p>But it gives me SQL syntax error. How can I write it correctly?</p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13269034,"title":"Searched record first then the rest of the result set","body":"<p>I have a query where I want to output the desired record first then the rest of the result set. </p>\n\n<p>I have a list of news items with a \"read more\" beside each item. </p>\n\n<p>When a user clicks a \"read more\" link they are brought to the news page where I want the news item they chose (Lets just say its id = 1 for now) then I want the rest of the news items to be output afterwards sorted by date.</p>\n\n<p>I have so far:</p>\n\n<pre><code>\"SELECT * FROM news ORDER BY(id, 1), newsdate DESC\"\n</code></pre>\n"},{"tags":["php","javascript","mysql","google"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":36,"score":-1,"question_id":13269008,"title":"How to track url visitors who come from google?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/13268514/how-can-i-create-url-tracking\">How can I create URL tracking?</a>  </p>\n</blockquote>\n\n\n\n<p>I want to track my URL visitors who come from Google to my landing page form</p>\n\n<p>JavaScript code I used:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\nfunction update_tracking_id(field_id)\n{\nname = 'tid';\nvar regexS = \"[\\\\?&amp;]\"+name+\"=([^&amp;#]*)\";\nvar regex = new RegExp( regexS );\nvar results = regex.exec( window.location.href );\nif( results == null )\nreturn;\nelse\ndocument.getElementById(field_id).value = results[1];\n}\nupdate_tracking_id('meta_adtracking');\n&lt;/script&gt;\n</code></pre>\n\n<p>Input code for form:</p>\n\n<pre><code> &lt;input type=\"hidden\" name=\"date_add\" id=\"meta_adtracking\" value=\"\"&gt;\n</code></pre>\n\n<p>then i add new row to database called tid.</p>\n\n<p>I want tid result move automatic to this row !!</p>\n\n<pre><code>issue is i want to do maulti url's to one form like this www.url.com/ld/?tid=google www.url.com/ld/?tid=fb www.url.com/ld/?tid=1 www.url.com/ld/?tid=2 and when client visit any on of this locations ... like \"tid=google\" i want location \"google\" to storage in database with other data in form – Kawabry 10 mins ago \n</code></pre>\n\n<p><strong>here is a website explain what i want exactly</strong> \n<a href=\"http://www.fastwebcoach.com/add-a-tracking-code-to-a-url-and-track-your-autoresponder-aweber-leads/\" rel=\"nofollow\">http://www.fastwebcoach.com/add-a-tracking-code-to-a-url-and-track-your-autoresponder-aweber-leads/</a> </p>\n"},{"tags":["php","mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13269067,"title":"Constructing UPDATE statements using associative arrays in PHP","body":"<p>What is the best way to construct an UPDATE statement using associative arrays in PHP?</p>\n\n<p>For example, say I have a function like so:</p>\n\n<pre><code>/**\n * For update queries\n * \n * @param string $tableName Name of the table we're wanting to update.\n * @param array $values Associative array of columns / values to update. e.g. array('name' =&gt; 'John', 'age' =&gt; 29)\n * @param array $conditions Associative array of conditions. e.g. array('user_id' =&gt; 1) equates to \"WHERE user_id = 1\"\n */\n public function update($tableName, $values, $conditions = array()){\n      //Construct SQL\n }\n</code></pre>\n\n<p>So far, I've been able to construct simple UPDATE statements such as:</p>\n\n<pre><code>UPDATE `myTableName` SET `name` = :name, `age` = :age WHERE `user_id` = :user_id\n</code></pre>\n\n<p>Now I'm left wondering: What is the best way to approach constructing the WHERE clause? Are there similar implementations in other libraries and code bases that I can look into? For example: How do I approach the construction of WHERE clauses that have OR and AND and IN() etc? </p>\n\n<pre><code>UPDATE example SET col = :val WHERE user_id = :user_id AND (age = :age OR name = :name)\n</code></pre>\n"},{"tags":["php","mysql","propel"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":9,"score":2,"question_id":13269305,"title":"How can I get extra columns when hydrating Propel objects with custom SQL?","body":"<p>I am using custom SQL to join two tables, apply some business logic to dates, then use the results to hydrate a propel object (collection). Here's my code:</p>\n\n<pre><code>$testtypes = TesttypeQuery::create()-&gt;find();\n\nforeach ($testtypes as $testtype) {\n\n  /* work out what most recent schedule */\n  $con = \\Propel::getConnection(SchedulePeer::DATABASE_NAME);\n  $sql = \"SELECT `schedule`.*, (`schedule`.`last` + INTERVAL `duration`.`weeks` WEEK + INTERVAL `duration`.`months` MONTH + INTERVAL `duration`.`years` YEAR) AS `dueDate` FROM `schedule` LEFT JOIN `duration` ON `schedule`.`duration_id` = `duration`.`id` HAVING `schedule`.`testtype_id` = {$testtype-&gt;getId()} AND `dueDate` &lt; NOW() ORDER BY `dueDate` ASC LIMIT 1\";\n  $stmt = $con-&gt;prepare($sql);\n  $stmt-&gt;execute();\n  $formatter = new \\PropelObjectFormatter();\n  $formatter-&gt;setClass(SchedulePeer::OM_CLASS);\n  $schedules = $formatter-&gt;format($stmt);\n\n  // more stuff here ... \n}\n</code></pre>\n\n<p>This question comes in several parts, because there might be a completely better way of doing this - so please feel free to make suggestions other than just answering my specific questions:</p>\n\n<ul>\n<li>I am using <code>HAVING</code> instead of <code>WHERE</code> so that I can use the aliased column <code>dueDate</code>, which I want to use as part of the check and order, as well as returning it as part of the result-set to use later. Is there a way to grab this value but still hydrate the propel object? When I use <code>fetch()</code> or other PDO methods on <code>$stmt</code> I can no longer use this with the call to <code>format()</code>.</li>\n<li>Alternatively is there a better way to do this with pure Propel?</li>\n</ul>\n"},{"tags":["mysql","sql","database","database-design","many-to-many"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":33,"score":3,"question_id":13268579,"title":"PHP/MySQL Many to Many. How?","body":"<p>I recently thought that storing an array in MySQL database would solve my problems... then I went and banged my head on a wall until I realised that there was an easier solution to my problem. Unfortunately I can't seem to figure out what the hell I need to do. </p>\n\n<p>I have two tables. User and Entry. Each user can be the Author of any number of entries. One to many right? Well the problem comes from the fact that each entry can have many users. -_-;</p>\n\n<p>As you can imagine, doing this using arrays would be...not only cumbersome but also stupid, especially if someone managed to accumulate 2000 entries. I had anticipated that I might need to create an extra table and some resources do seem to suggest it but the resources aren't as clear as I would have hoped. I will need to get all the users for a post and somewhere else, I'll need to get all the posts for a user. </p>\n\n<p>Can someone explain the best way of doing this? (Without using arrays of course =p)</p>\n"},{"tags":["mysql","sql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13267739,"title":"I want get sales for year using MySQL","body":"<p>I want to get following result for given year </p>\n\n<pre><code>month | sales\njan     0.00\nfeb     4.00\nmar     0.00\napr     45.00\n.\n.\n.\n.\ndec    0.00\n</code></pre>\n\n<p>table that i have is \"sales\" and it has salse_value, sales_date as columns.</p>\n\n<p>question is how can get above result using case when statement in MYSQL </p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13268685,"title":"PHP Save Time HH:MM in MySQL","body":"<p>I need to save time <code>HH:MM</code> in MySQL.</p>\n\n<p>Better option is to save using <code>strtotime</code> PHP function as TIMESTAMP or <code>HH:MM:00</code> as TIME?</p>\n"},{"tags":["c#","mysql","escaping"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13268907,"title":"Using literal underscore character in a MySQL query from c#","body":"<p>From my ASP.NET application I want to issue this query to MySQL</p>\n\n<pre><code>SELECT * FROM responses WHERE field_id LIKE '3\\_%'\n</code></pre>\n\n<p>In other words I am looking for records where the second character is the underscore literal character.</p>\n\n<p>The code generated by the model designer looks like this:</p>\n\n<pre><code>    public virtual RiskAnalysis.responsesDataTable GetResponseGroupForAnalysis(int raid, string fieldid) {\n    this.Adapter.SelectCommand = this.CommandCollection[2];\n    this.Adapter.SelectCommand.Parameters[0].Value = ((int)(raid));\n    if ((fieldid == null)) {\n        throw new global::System.ArgumentNullException(\"fieldid\");\n    }\n    else {\n        this.Adapter.SelectCommand.Parameters[1].Value = ((string)(fieldid));\n    }\n    RiskAnalysis.responsesDataTable dataTable = new RiskAnalysis.responsesDataTable();\n    this.Adapter.Fill(dataTable);\n    return dataTable;\n}\n</code></pre>\n\n<p>If I call this function like so:</p>\n\n<pre><code>string filter_string = @\"3\\_%\";    \nResponsesAdapter.GetResponseGroupForAnalysis(10, filter_string);\n</code></pre>\n\n<p>the MySQL log reports the query to look like this:</p>\n\n<pre><code>SELECT     *\nFROM         responses\nWHERE     (ra_id = 10) AND (field_id LIKE '3\\\\_%')\n</code></pre>\n\n<p>In other words the I know I'm missing something blindingly obvious here, but how do I place MySQL's escape backslash in the query without C# (un)helpfully escaping it?</p>\n"},{"tags":["mysql","select"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13266545,"title":"getting multi row data into columns in mysql","body":"<pre><code>SELECT \n  Day, \n  month, \n  year,\n  GROUP_CONCAT(total), \n  GROUP_CONCAT(SP_ID)\nFROM\n(\n    SELECT \n      DATE_FORMAT(l.act_date, '%d') AS DAY, \n      DATE_FORMAT(l.act_date, '%M') AS MONTH,\n      EXTRACT(YEAR FROM l.act_date) AS YEAR, \n      COUNT(*) as total,l.sp_id \n    FROM lead_activity2 as l\n    right outer join salesperson as s on l.sp_id=s.sp_id\n    WHERE l.act_name='scb' \n      AND ((l.act_date&gt;='2012-09-07 13:03:27' ) \n      AND (l.act_date&lt;= '2012-11-07 13:03:27')) \n    GROUP BY MONTH, YEAR, DAY, l.sp_id \n    ORDER BY YEAR DESC, MONTH DESC, DAY DESC, l.sp_id DESC\n) t GROUP BY day, month, year\n</code></pre>\n\n<p><a href=\"http://sqlfiddle.com/#!2/1514d/3\" rel=\"nofollow\">http://sqlfiddle.com/#!2/1514d/3</a> - you can view the scheme and the query,</p>\n\n<p>what i would like to get is </p>\n\n<pre><code>18 | october | 2012 | 0,0,1,1 | 6,5,4,3\n</code></pre>\n\n<p>spid 6 and spid 5 have no data for 18 october but still should be shown tried doing right join and right outer join both dont seem to work... </p>\n"},{"tags":["mysql","xml","xslt"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":63,"score":2,"question_id":13239925,"title":"XLST + XML -> Word <field name=\"foo\">Value</foo>","body":"<p>I have a XML produce with MySQL Query Browser.\nI'm trying to apply a XSLT to output the result into Word tables. One table for each record.</p>\n\n<p>Here's a sample of my XML </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE ROOT SYSTEM \"NessusMSP.dtd\"&gt;\n&lt;ROOT&gt;\n    &lt;row&gt;\n      &lt;field name=\"Niveau\"&gt;Critique&lt;/field&gt;\n      &lt;field name=\"Name\"&gt;Apache 2.2 &amp;lt; 2.2.15 Multiple Vulnerabilities&lt;/field&gt;\n    &lt;/row&gt;\n    &lt;row&gt;\n      &lt;field name=\"Niveau\"&gt;Critique&lt;/field&gt;\n      &lt;field name=\"VulnName\"&gt;Microsoft Windows 2000 Unsupported Installation Detection&lt;/field&gt;\n    &lt;/row&gt;\n    &lt;row&gt;\n      &lt;field name=\"Niveau\"&gt;Haute&lt;/field&gt;\n      &lt;field name=\"VulnName\"&gt;CGI Generic SQL Injection&lt;/field&gt;\n    &lt;/row&gt;\n&lt;/ROOT&gt;\n</code></pre>\n\n<p>For the XLST I've already found out that I need to do a for-each select</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;xsl:stylesheet\n  version=\"1.0\"\n  xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"&gt;\n\n    &lt;xsl:output method=\"xml\" indent=\"yes\"/&gt;\n    &lt;xsl:template match=\"/\"&gt;\n&lt;xsl:for-each select=\"ROOT/row\"&gt;\n  Niveau : &lt;xsl:value-of select=\"????\"/&gt;\n  Name   : &lt;xsl:value-of select=\"????\"/&gt;\n&lt;/xsl:for-each&gt;\n&lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n\n<p>When I do this loop I see the same number of empty table as there is <code>&lt;row&gt;&lt;/row&gt;</code> in my file. </p>\n\n<p>But I haven't found the way to make the right \"value-of select=\". I've try the following without luck.</p>\n\n<pre><code>&lt;xsl:value-of select=\"@name\"/&gt;\n&lt;xsl:value-of select=\"name\"/&gt;\n&lt;xsl:value-of select=\"@row/name\"/&gt;\n&lt;xsl:value-of select=\"row/@name\"/&gt;\n&lt;xsl:value-of select=\"@ROOT/row/name\"/&gt;\n</code></pre>\n\n<p>And a few other that I can't remember. Any idea what I need to craft the request to get the value in my resulting file? </p>\n\n<p>I've just tried with :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;xsl:stylesheet\n  version=\"1.0\"\n  xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"&gt;\n\n    &lt;xsl:output method=\"xml\" indent=\"yes\"/&gt;\n    &lt;xsl:template match=\"/\"&gt;\n&lt;xsl:for-each select=\"ROOT/row\"&gt;\n  Niveau : &lt;xsl:value-of select=\"field/@Niveau\"/&gt;\n  Name   : &lt;xsl:value-of select=\"field/@name\"/&gt;\n&lt;/xsl:for-each&gt;\n&lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n\n<p>And it output this :</p>\n\n<pre><code>NIVEAU :  \nNAME   : name\n\nNIVEAU :  \nNAME   : Niveau\n\nNIVEAU :  \nNAME   : Niveau\n</code></pre>\n\n<p>I would like this output : </p>\n\n<pre><code>NIVEAU : Critique\nNAME   : Apache 2.2 &amp;lt; 2.2.15 Multiple Vulnerabilities\n\nNIVEAU : Critique\nNAME   : Microsoft Windows 2000 Unsupported Installation Detection\n\nNIVEAU : Haute\nNAME   : CGI Generic SQL Injection\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n\n<p>Thank you.</p>\n\n<p><H1> UPDATE </H1></p>\n\n<p>Now with this XSLT</p>\n\n<pre><code>&lt;xsl:stylesheet\n  xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n  version=\"2.0\"&gt;\n\n  &lt;xsl:output method=\"text\"/&gt;\n\n  &lt;xsl:strip-space elements=\"*\"/&gt;\n\n  &lt;xsl:template match=\"row\"&gt;\n    &lt;xsl:text&gt;NIVEAU : &lt;/xsl:text&gt;\n    &lt;xsl:value-of select=\"field[@name = 'Niveau']\"/&gt;\n    &lt;xsl:text&gt;&amp;#xa;&lt;/xsl:text&gt;\n    &lt;xsl:text&gt;NAME   : &lt;/xsl:text&gt;\n    &lt;xsl:value-of select=\"field[@name = 'Name']\"/&gt;\n    &lt;xsl:text&gt;&amp;#xa;&amp;#xa;&lt;/xsl:text&gt;\n  &lt;/xsl:template&gt;\n\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n\n<p>I get this output :</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\nNIVEAU : \nNAME   : Apache 2.2 &amp;lt; 2.2.15 Multiple Vulnerabilities\n\nNIVEAU : Critique\nNAME   : Microsoft Windows 2000 Unsupported Installation Detection\n\nNIVEAU : Haute\nNAME   : CGI Generic SQL Injection\n</code></pre>\n\n<p>As you can see the first field is empty. I could honestly live with that and fill it manually but if you see why this is happenning I'd be very happy :)</p>\n\n<h1> UPDATE </h1>\n\n<p>Using <code>&lt;xsl:value-of select=\"field[@name = 'foo']\"/&gt;</code> gave me the value I wanted. I kept the for-each as it was easier to use (for me) inside a MS Word template. </p>\n"},{"tags":["php","mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13235740,"title":"Email script sending emails but throwing up Cannot redeclare spamcheck() error","body":"<p>I have a script that send emails to multiple email addresses, the script is suppose to redirect to a success page upon completion, the emails are being sent fine with no problems, however I am getting up the following error instead of redirection.</p>\n\n<blockquote>\n  <p>Fatal error: Cannot redeclare spamcheck() (previously declared in\n  /websites/123reg/LinuxPackage22/br/ig/ht/MYSITE.co.uk/public_html/admin/mailinglistsend.php:87)\n  in\n  /websites/123reg/LinuxPackage22/br/ig/ht/MYSITE.co.uk/public_html/admin/mailinglistsend.php\n  on line 87</p>\n</blockquote>\n\n<p>The code is as follows</p>\n\n<pre><code>&lt;?php\n//initialize the session\nif (!isset($_SESSION)) {\n  session_start();\n}\n\nrequire_once('../Connections/BrightLights.php'); \n\nif (!function_exists(\"GetSQLValueString\")) {\nfunction GetSQLValueString($theValue, $theType, $theDefinedValue = \"\", $theNotDefinedValue = \"\") \n{\n  if (PHP_VERSION &lt; 6) {\n    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;\n  }\n\n  $theValue = function_exists(\"mysql_real_escape_string\") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);\n\n  switch ($theType) {\n    case \"text\":\n      $theValue = ($theValue != \"\") ? \"'\" . $theValue . \"'\" : \"NULL\";\n      break;    \n    case \"long\":\n    case \"int\":\n      $theValue = ($theValue != \"\") ? intval($theValue) : \"NULL\";\n      break;\n    case \"double\":\n      $theValue = ($theValue != \"\") ? doubleval($theValue) : \"NULL\";\n      break;\n    case \"date\":\n      $theValue = ($theValue != \"\") ? \"'\" . $theValue . \"'\" : \"NULL\";\n      break;\n    case \"defined\":\n      $theValue = ($theValue != \"\") ? $theDefinedValue : $theNotDefinedValue;\n      break;\n  }\n  return $theValue;\n}\n}\n\nmysql_select_db($database_BrightLights, $BrightLights);\n$query_mailinglist = \"SELECT * FROM mailing_list WHERE subscribed = ''\";\n$mailinglist = mysql_query($query_mailinglist, $BrightLights) or die(mysql_error());\n$row_mailinglist = mysql_fetch_assoc($mailinglist);\n$totalRows_mailinglist = mysql_num_rows($mailinglist);\n\nerror_reporting(E_ALL &amp; ~E_NOTICE);\nini_set('display_errors', TRUE);\nini_set('display_startup_errors', TRUE);\n\n\n\n\n?&gt;\n&lt;?php \n\n\n\n$subject = $_POST['subject'];\n$body = $_POST['body'];\n\ndo {\n\n$name = $row_mailinglist['name'];\n$email = $row_mailinglist['email'];\n\n\n\n    $email_from = 'mailinglist@MYSITE.com';\n    $email_subject = \"$subject\";\n    $email_body = \"\n    $name,\n\n    $body\n\n\n\n    You have received this email because you have subscribed via our website, to unsubscribe go to MYSITE/mailing-list.php?unsubscribe=$email\";\n\n\n    $to = \"$email\";\n    $headers = \"From: $email_from\";\n    mail($to, $email_subject, $email_body, $headers);\n\n\n\n\n\n    function spamcheck($field)\n    {\n        //filter_var() sanitizes the e-mail\n        //address using FILTER_SANITIZE_EMAIL\n        $field=filter_var($field, FILTER_SANITIZE_EMAIL);\n\n        //filter_var() validates the e-mail\n        //address using FILTER_VALIDATE_EMAIL\n        if(filter_var($field, FILTER_VALIDATE_EMAIL))\n        {\n            return TRUE;\n        }\n        else\n        {\n            return FALSE;\n        }\n    }\n\n    } while ($row_mailinglist = mysql_fetch_assoc($mailinglist));\n\n\nmysql_free_result($mailinglist);\n\n    header('Location: mailinglist-new.php?sent');\n\n?&gt;\n</code></pre>\n\n<p>I appreciate your help :-)</p>\n"},{"tags":["mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13268686,"title":"Column 'u_id' in where clause is ambiguous","body":"<pre><code>SELECT  `attendence`.`u_id` ,\n        DATE_FORMAT(date,'%d-%m-%Y') as  `date`,\n        `attendence`.`checkin`, \n        `attendence`.`checkout`,\n         `users`.`firstname`,\n         `users` .`lastname`\n FROM  `attendence`\n INNER JOIN  `users` ON  `attendence`.`u_id` = `users`.`u_id`\n WHERE  DATE_FORMAT( DATE,  '%Y-%m' ) =  '$combined' AND `u_id`='$u_id';\n</code></pre>\n\n<p>please help guys </p>\n\n<p>when i removed AND <code>u_id</code>='#u_id it works but returns all employee details'</p>\n"},{"tags":["php","mysql","xml","data"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13268407,"title":"Storing Huge Amount of Data from XML to MYSQL database for PDF","body":"<p>I need an advice to convert XML data to pdf format using php.I want to provide am option to download pdf whenever the download link is clicked.</p>\n\n<p>I have an XML file that contains thousand of records.I want to convert my XML records into pdf format.Previously,i used to generate pdfs from mysql.I dont know how i can convert my xml data directly to pdf using php.</p>\n\n<p>One option is to retrieve each and every XML record one by one and insert it into the database using php and mysql.</p>\n\n<p><strong>My question is :</strong> </p>\n\n<p><strong>Wont it be less efficient if i will <em>Parse xml record and run mysql insert statement</em> thousand of times to store thousand of records into the database ??</strong></p>\n\n<p>Also,more time would be required to retrieve those records from the database to generate pdf. Is there any other way around to deal with this problem efficiently and effectively ???? Please suggest me . </p>\n"},{"tags":["mysql","bash","heredoc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13268018,"title":"How to pass an asterisk into bash heredoc?","body":"<p>I execute a MySQL statement with an asterisk from within a bash shell:</p>\n\n<pre><code>query=`cat &lt;&lt;EndOfMySQL\nINSERT tmp_table\nSELECT * FROM table\n;\nEndOfMySQL\n`\n\necho $query\n\necho $query | mysql database\n</code></pre>\n\n<p>The problem is the asterisk is replaced by the list of files in the current directory and the query becomes erroneous. How to avoid this behavior? It doesn't matter whether I use backticks or <code>$()</code>. I'd expect some escape sequence like <code>\\*</code>, but at least this one doesn't work.</p>\n"},{"tags":["php","javascript","mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":41,"score":-4,"question_id":13268514,"title":"How can I create URL tracking?","body":"<p>How can I create URL tracking like this?</p>\n\n<pre><code>www.url.com/ld/?tid=google\nwww.url.com/ld/?tid=fb\n</code></pre>\n\n<p>Here I want to make track in my form page if hits come from Google automatic get the <code>tid</code> result and through it in database with another option in my form!</p>\n\n<p>Here is my code but it dosn't work </p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\nfunction update_tracking_id(field_id)\n{\nname = 'tid';\nvar regexS = \"[\\\\?&amp;]\"+name+\"=([^&amp;#]*)\";\nvar regex = new RegExp( regexS );\nvar results = regex.exec( window.location.href );\nif( results == null )\nreturn;\nelse\ndocument.getElementById(field_id).value = results[1];\n}\nupdate_tracking_id('meta_adtracking');\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>and i put this input in form</strong> </p>\n\n<blockquote>\n  <p></p>\n</blockquote>\n\n<p><strong>and make row in database called \"tid\"</strong></p>\n"},{"tags":["mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13268558,"title":"Creating a MySQL view due to NULL Values","body":"<p>I try to setup the following VIEW and defined 3 cases that lead to a specified match between columns of 2 tables in the WHERE clause.</p>\n\n<p>This works more or less, because the view has entries that should have been excluded due to my statement. Please see the screenshot with the select * output therefore.</p>\n\n<p>Can you help me here? Many thanks beforehand.</p>\n\n<pre><code>CREATE OR REPLACE VIEW `match` AS SELECT \na.`werksnr`,\nb.`werksnr` AS `werksnr_ref`, \na.`EAN`,\nb.`EAN` AS `EAN_ref`, \na.`lieferant`,\nb.`lieferant` AS `lieferant_ref`, \na.`artikel`, \nb.`artikel` AS `artikel_ref`,  \na.`artikelbezeichnung` AS `bezeichnung_suspect`,\nb.`artikelbezeichnung1`, \nb.`artikelbezeichnung2`\n\nFROM suspect as a, reference as b WHERE \n\n(a.EAN IS NOT NULL AND b.EAN IS NOT NULL AND a.werksnr IS NOT NULL and b.werksnr IS NOT NULL AND a.EAN = b.EAN AND a.werksnr = b.werksnr) OR\n(a.lieferant IS NOT NULL AND b.lieferant IS NOT NULL AND a.werksnr IS NOT NULL AND b.werksnr IS NOT NULL AND a.lieferant = b.lieferant AND a.werksnr = b.werksnr) OR\n(a.lieferant IS NOT NULL AND b.lieferant IS NOT NULL AND a.EAN IS NOT NULL AND b.EAN IS NOT NULL AND a.lieferant = b.lieferant AND a.EAN = b.EAN);\n</code></pre>\n\n<p><a href=\"http://s1.directupload.net/file/d/3067/7uu5asw4_png.htm\" rel=\"nofollow\">screenshot</a></p>\n"},{"tags":["php","mysql","facebook","apache","browser"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":15,"score":-3,"question_id":13268525,"title":"Setting up facebook app local dev environment in php","body":"<p>I am trying to learn facebook app development. I created an app and want to deploy it locally. It's in PHP. I set the env for app id and app secret in apache virtual host as well.</p>\n\n<p>However when I tries to run it in browser I get a blank page. </p>\n\n<p>Any help will be deeply appreciated.</p>\n"},{"tags":["php","mysql","sql","opencart"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13268233,"title":"Product Name Print Several times, How to fix.?","body":"<p>i had added the following Opencart module for my order report list...\n<a href=\"http://www.opencart.com/index.php?route=extension/extension/info&amp;extension_id=3597&amp;filter_search=order%20list%20filter%20model&amp;page=4\" rel=\"nofollow\">http://www.opencart.com/index.php?route=extension/extension/info&amp;extension_id=3597&amp;filter_search=order%20list%20filter%20model&amp;page=4</a></p>\n\n<p>I have problems with the column \"Products\". If there are more than one option the products name prints several times. So if I got a product with three options the product name prints three times. Is there any way to fix this problem?</p>\n\n<p>i want print product name and model number only once, any idea.?</p>\n\n<p><strong>i will attach the results what i got now...</strong>\n<img src=\"http://i.stack.imgur.com/6U18X.jpg\" alt=\"enter image description here\"></p>\n\n<p><strong>this is my sql query...</strong></p>\n\n<pre><code>public function getOrders($data = array()) { \n$sql = \"select o.order_id,o.email,o.telephone,CONCAT(o.shipping_address_1, ' ', o.shipping_address_2) AS address,CONCAT(o.firstname, ' ', o.lastname) AS customer,o.payment_zone AS state,o.payment_address_2 AS block, o.payment_address_1 AS address,o.payment_postcode AS postcode,(SELECT os.name FROM \" . DB_PREFIX . \"order_status os WHERE os.order_status_id = o.order_status_id AND os.language_id = '\" . (int)$this-&gt;config-&gt;get('config_language_id') . \"') AS  status,o.payment_city AS city,GROUP_CONCAT(pd.name) AS pdtname,GROUP_CONCAT(op.model) AS model,o.date_added,sum(op.quantity) AS quantity,GROUP_CONCAT(opt.value ) AS options, GROUP_CONCAT(opt.order_product_id )  AS ordprdid,GROUP_CONCAT(op.order_product_id )  AS optprdid, GROUP_CONCAT(op.quantity) AS opquantity from `\" . DB_PREFIX . \"order` o LEFT JOIN \" . DB_PREFIX . \"order_product op ON (op.order_id = o.order_id)  LEFT JOIN \" . DB_PREFIX . \"product_description pd ON (pd.product_id = op.product_id and pd.language_id = '\" . (int)$this-&gt;config-&gt;get('config_language_id') . \"') LEFT JOIN \" . DB_PREFIX . \"order_option opt ON (opt.order_product_id = op.order_product_id) \";\n</code></pre>\n\n<p>Product Name = <code>GROUP_CONCAT(pd.name) AS pdtname,</code></p>\n"},{"tags":["mysql","datetime","time","now"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":268,"score":1,"question_id":5209864,"title":"MySQL NOW() Returns Only Year","body":"<p>MySQL docs about NOW() function...</p>\n\n<blockquote>\n  <p>Returns the current date and time as a value in 'YYYY-MM-DD HH:MM:SS' or YYYYMMDDHHMMSS.uuuuuu format, depending on whether the function is used in a string or numeric context. The value is expressed in the current time zone.</p>\n</blockquote>\n\n<p>Here's my query...</p>\n\n<pre><code>$sql = \"\n\n    INSERT INTO `users` ( `username`, `password`, `email`, `time` )\n    VALUES ('{$username}', '\" . sha1( $password ) . \"', '{$email}', NOW() )\n\n\";\n</code></pre>\n\n<p><strong>The problem is that in the database I have not full datetime, but only year. Any solutions?</strong></p>\n"},{"tags":["mysql","import","duplicates","auto-increment"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13266448,"title":"MySQL data import auto-increment issue","body":"<p>I am attempting to import data into a table that has a field as follows:</p>\n\n<p><code>result_id</code></p>\n\n<p>This field is set to <code>AUTO_INCREMENT</code>, <code>PRIMARY</code> and <code>UNIQUE</code>.</p>\n\n<p>The data I am importing has information in the <code>result_id</code> field that is the same (in places) as the current data in the table.  SQL won't let me import as there are duplicates (which is fair enough).</p>\n\n<p>Is there a way to get SQL to append the data I am importing and not use the duplicate data in <code>result_id</code>, basically to continue the number within the SQL field.  The reason I am asking is that I am importing about 25,000 records and I don't want to manually have to remove or alter the <code>result_id</code> information from the data being imported.</p>\n\n<p>Thanks,</p>\n\n<p>H.</p>\n"},{"tags":["mysql","perl","dbi"],"answer_count":7,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":10145,"score":6,"question_id":440799,"title":"How do I know how many rows a Perl DBI query returns?","body":"<p>I'm trying to basically do a search through the database with Perl to tell if there is an item with a certain ID,. This search can return no rows, but it can also return one.</p>\n\n<p>I have the following code:</p>\n\n<pre><code>my $th = $dbh-&gt;prepare(qq{SELECT bi_exim_id FROM bounce_info WHERE bi_exim_id = '$exid'});\n$th-&gt;execute();\nif ($th-&gt;fetch()-&gt;[0] != $exid) {\n        ...\n</code></pre>\n\n<p>Basically, this tries to see if the ID was returned and if it's not, continue with the script. But it is throwing a Null array reference error on the <code>$th-&gt;fetch()-&gt;[0]</code> thing.\nHow can i just simply check to see if it returned rows or now?</p>\n"},{"tags":["mysql","cakephp-2.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13267592,"title":"How to get count of field in same table in cakephp","body":"<p>This is my table:   </p>\n\n<pre><code>ledgerid    ledgername          groupid     mainledger  status\n    1           Telephonic Expense  15              0           1\n    2           Internet Expense    15              0           1\n    3           Office Expense      15              0           1\n    4           Airtel              15              1           1\n    7           BSNL                15              1           1\n</code></pre>\n\n<p>This is i want to get the result:</p>\n\n<pre><code>ledgerid    ledgername          groupid     Count   \n1           Telephonic Expense  15              2   \n2           Internet Expense    15              0   \n3           Office Expense      15              0   \n</code></pre>\n\n<p>This is the code i used:</p>\n\n<pre><code>$this-&gt;paginate = array('conditions' =&gt; array('groupid !=\"1\" AND mainledger = 0'),\n                            'order' =&gt; 'ledgermodel.ledgerid ASC',\n                            'limit' =&gt; 5);\n$this-&gt;set('typegroup', $this-&gt;paginate('ledgermodel'));//listing with pagination\n</code></pre>\n\n<p>How can i get the result i wanted?</p>\n\n<p>CAn anyone answer it?</p>\n"},{"tags":["mysql","formatting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13254702,"title":"Change number format in MySQL (European format)","body":"<p>I need to change all the numbers in a field (type longtext), from <code>xxxxxx,yy</code> to <code>xxx.xxx,yy</code></p>\n\n<p>Being 'x' integers and 'y' decimal numbers.</p>\n\n<p>Examples:</p>\n\n<blockquote>\n  <p>6000,00 to 6.000,00 </p>\n  \n  <p>100000,00 to 100.000,00</p>\n</blockquote>\n\n<p>I've tried <code>format</code> but it changes a number from:</p>\n\n<blockquote>\n  <p>xxxxxx,yy to xxx,xxx.yy</p>\n</blockquote>\n\n<p>Example:</p>\n\n<blockquote>\n  <p>1200,00 to 1,200.00</p>\n</blockquote>\n\n<p>Any suggestion how to achieve this?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I have to use the current datatype, I'm not allowed to change it, it is not my decision. I already know that it's not the correct way to handle things.</p>\n\n<p>What I need is something equivalent to this update:</p>\n\n<pre><code>UPDATE &lt;table&gt; SET &lt;field&gt; = FORMAT(&lt;field&gt;, 2, 'de_DE');\n</code></pre>\n\n<p>However this only works with MySQL 5.5 (because of the third parameter), and I only can do this in a machine that uses MySQL 5.1</p>\n"},{"tags":["php","mysql","sql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13266068,"title":"Update column with select","body":"<p>hello I would like to set a table column I tried with the update query but I have syntax error</p>\n\n<pre><code>  $cmts=\"UPDATE stat_alert INNER  JOIN cell_cmt  ON stat_alert.cell = cell_cmt.cell SET stat_alert.`cmts` = cell_cmt.`Cmts`\";\n$cmt= mysql_query($cmts)OR DIE(\"Erreur sur la requete\");\n</code></pre>\n\n<p>I have erreur sur la requete \nwho can help me </p>\n"},{"tags":["mysql","replication"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":974,"score":3,"question_id":355202,"title":"MySQL replication: temporarily prevent specific SQL statements replicating to the slaves?","body":"<p>I want to connect and execute one (or sometimes several) SQL statements, and NOT have those replicated to the slaves.</p>\n\n<p>I have no replicate-do or replicate-ignore configs, so I can't <code>use</code> some non-replicated database to send the commands from.  And I know about:</p>\n\n<pre><code>set global sql_slave_skip_counter = 1\n</code></pre>\n\n<p>But that's on the slave.  I'd like to be able to run a similar command on the master and have the following N commands not sent out to the slaves (which I guess means not logged in the binlogs, either).</p>\n"},{"tags":["mysql","objective-c","grammar","bnf"],"answer_count":4,"favorite_count":10,"up_vote_count":14,"down_vote_count":0,"view_count":4778,"score":14,"question_id":334479,"title":"Repository of BNF Grammars?","body":"<p>Is there a place I can find Backus–Naur Form or BNF grammars for popular languages?  Whenever I do a search I don't turn up much, but I figure they must be published somewhere.  I'm most interested in seeing one for Objective-C and maybe MySQL.</p>\n"},{"tags":["php","html","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13267597,"title":"An efficient way to store <select>'s options in a database?","body":"<p>I'm making a website where there are thousands of <code>&lt;select&gt;&lt;/select&gt;</code> inputs. their <code>&lt;option&gt;&lt;/option&gt;</code> can be changed dinamicaly by an administrator at any time. I'm actually storing each select input's options on separate tables, associating an Id and a value but this is heavy and not really great because i have ~= 100 tables and i need ~= 100 queries to display all the inputs on one page.</p>\n\n<p>Is there any better storage solution ?</p>\n\n<p>Current table exemple :</p>\n\n<pre><code>Table : selectanimaltype\n\nID     NAME\n1       pig\n2       cow\n3       sheep\n4       fox\n...     ...\n</code></pre>\n\n<p>And i have a thousands of table like this one</p>\n"},{"tags":["sql","mysql","stored-procedures","ide"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":831,"score":0,"question_id":1122875,"title":"Developing MySQL Stored Procedures with Intellisense?","body":"<p>i've looking for an IDE for MySQL with intellisense, which would help a lot. Any suggestions? Thanks!</p>\n"},{"tags":["mysql","result"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13266438,"title":"why do i get the result in $result","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1777801/why-do-i-get-resource-id-4-when-i-apply-print-r-to-an-array-in-php\">Why do I get “Resource id #4” when I apply print_r() to an array in PHP?</a><br>\n  <a href=\"http://stackoverflow.com/questions/4290108/how-do-i-echo-a-resource-id-6-from-a-mysql-response-in-php\">How do i “echo” a “Resource id #6” from a MySql response in PHP?</a>  </p>\n</blockquote>\n\n\n\n<p>why do i get \"Resource id #6\" as result in $result? want 1 or 0 :P</p>\n\n<pre><code>$sql = \"SELECT * FROM members WHERE rchat=1 LIMIT 1\";\n$result = mysql_query($sql);\n\nif (!$result) {\nunlink($fn);\n//$fn = $_SESSION['sess_user'].'.txt';\n$fn = 'hittaingen.txt';\nmysql_query(\"UPDATE members SET rchat=1 room='\" . $_SESSION['sess_user'] . \"' WHERE     user='\" . $_SESSION['sess_user'] . \"'\");\n}\n\nelse {\n  //$fn = $result['room'].'.txt';\n  $fn = 'hitta.txt';\n  mysql_query(\"UPDATE members SET rchat=2 room='\" . $result['room'] . \"' WHERE user='\" . $_SESSION['sess_user'] . \"'\");\n  }\n</code></pre>\n"},{"tags":["mysql","sql","datatable","field","record"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":25,"score":-4,"question_id":13267390,"title":"search field name by record","body":"<pre><code>number | no1 | no2 | no3 | no4 | no5 |\n--------------------------------------\n1      |0    | 3   | 4   | 15  |  23 |\n2      |0    | 3   | 3   | 14  |  16 |\n3      |0    | 3   | 0   | 12  |  37 |\n4      |0    | 3   | 1   | 13  |  53 |\n5      |0    | 3   | 2   | 16  |  13 |\n6      |0    | 3   | 1   | 11  |  22 |\n7      |0    | 3   | 0   |  2  |  23 |\n8      |0    | 3   | 4   | 35  |  25 |\n</code></pre>\n\n<p>i have this table,,\ni want to know the name field by the record,,\nfor ex,,\ni have record '2',,i wanna know the record's field(no4),,</p>\n"},{"tags":["php","mysql","updates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13267193,"title":"Pulling data from one table, modifying the data, and inserting it into two others?","body":"<p>I'm trying to figure out how to modify data I copy from one table into another two.</p>\n\n<p>Currently I have it working so my form submits it pulls the data from 'prices' and puts it into 'pricestwo' and 'pricesthree'.</p>\n\n<p>However I need to modify the data before hand to make one 10% less on price, and one 20% less on price.</p>\n\n<pre><code>&lt;?php\n$priceid = $_POST['priceid'] ; \n$name = $_POST['productname'] ;\n$weight = $_POST['productweight'];\n$price = $_POST['productprice'];\nif(isset($_POST['updateprices'])) { \n\nfor($i=0;$i&lt;$count;$i++){\n\n$sql1= mysqli_query($myConnection, \"UPDATE pricestwo SET productname='$name[$i]', productweight='$weight[$i]', productprice='$pricetwo[$i]' WHERE priceid='$priceid[$i]'\");\n\n$sql2= mysqli_query($myConnection, \"UPDATE pricesthree SET productname='$name[$i]', productweight='$weight[$i]', productprice='$price[$i]' WHERE priceid='$priceid[$i]'\");\n}\necho \"&lt;meta http-equiv=\\\"refresh\\\" content=\\\"0;URL=edit_product_prices.php\\\"&gt;\";\n} \n?&gt;\n</code></pre>\n\n<p>This currently works to copy just the data, I've tried something like:</p>\n\n<pre><code>    $pricetwo = $price - ($price * 0.15);\n</code></pre>\n\n<p>to modify the data, but there are multiple rows been transferred so this just returns a 0.00 value. </p>\n\n<p>Anyone have any ideas on how to do this?</p>\n"},{"tags":["mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13267152,"title":"MySQL key ON DUPLICATE KEY UPDATE column is ambiguous","body":"<p>Have the following problem</p>\n\n<pre><code>INSERT INTO statistics_new (SELECT * FROM statistics)\n    -&gt; \n    -&gt; ON DUPLICATE KEY UPDATE\n    -&gt; \n    -&gt; end_date = IF(end_date &lt; VALUES(end_date), VALUES(end_date), end_date);\nERROR 1052 (23000): Column 'end_date' in field list is ambiguous\n</code></pre>\n\n<p>When I tried to specify column and table aliases as it recommended in <a href=\"http://dev.mysql.com/doc/refman/5.0/en/insert-select.html\" rel=\"nofollow\">http://dev.mysql.com/doc/refman/5.0/en/insert-select.html</a> I had the same result.</p>\n\n<p>Server version: 5.5.24-0ubuntu0.12.04.1 (Ubuntu)</p>\n\n<p>The following query runs without problem :</p>\n\n<pre><code>INSERT INTO statistics_new (SELECT * FROM statistics)\nON DUPLICATE KEY UPDATE\nend_date = VALUES(end_date)\n</code></pre>\n"},{"tags":["mysql","sql","subquery"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13264581,"title":"Nested queries to get count with two conditions","body":"<p>I have these 3 tables,</p>\n\n<pre><code>tbl_1-\nip  |isp    |infection\n----------------------\n1   |aaaa   |malware\n2   |bbbb   |malware\n3   |cccc   |ddos\n3   |cccc   |trojan\n4   |dddd   |ddos\n\ntbl_2-\nip  |isp    |infection\n----------------------\n1   |aaaa   |malware\n3   |cccc   |ddos\n4   |dddd   |trojan\n5   |eeee   |trojan\n6   |ffff   |other\n\ntbl_3-\nip  |isp    |infection\n----------------------\n1   |aaaa   |ddos\n6   |ffff   |\n2   |bbbb   |other\n</code></pre>\n\n<p>Which i need to get the result as follows,</p>\n\n<pre><code>result-\nip  |isp    |infection  |ipCount    |ispCount   |infectionCount\n--------------------------------------------------------------\n1   |aaaa   |malware    |3          |3          |2\n1   |aaaa   |ddos       |3          |3          |1\n2   |bbbb   |other      |2          |2          |1\n2   |bbbb   |malware    |2          |2          |1\n3   |cccc   |ddos       |3          |3          |2\n3   |cccc   |trojan     |3          |3          |1\n4   |dddd   |ddos       |2          |2          |1\n4   |dddd   |trojan     |2          |2          |1\n5   |eeee   |trojan     |1          |1          |1\n6   |ffff   |other      |2          |2          |1\n6   |ffff   |           |2          |2          |1\n\nipCount, ispCount -&gt; count of matching ip and isp\n    eg-there are 3 records with ip = 1 and isp = aaaa\n\ninfectionCount -&gt; count of matching infections per ip and isp\n    eg-there are 2 infections that says malware where ip = 1 and isp = aaaa\n</code></pre>\n\n<p>I think I need a nested a query but I don't know how to count with two conditions; can you help?</p>\n\n<p><strong>EDIT</strong> : Code I tried,</p>\n\n<pre><code>SELECT ip, isp, infection, count(ip), count(isp), count(infection)\nFROM (\n\nSELECT ip, isp, infection\nFROM tbl_1\nUNION ALL\nSELECT ip, isp, infectionType\nFROM tbl_2\nUNION ALL\nSELECT ip, isp, infection\nFROM tbl_3\n)x\n\nGROUP BY ip, isp, infection\n</code></pre>\n\n<p>But it doesnt give the result I desire cause I don't know how to do 2 types of counts in one query</p>\n"},{"tags":["mysql","remote-access","navicat"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13267195,"title":"Remote access server using Navicat or phpmyadmin","body":"<p>I need to make my server able to be accessed remotely by other computers, so i can get a database that's on another computer.. I am using Navicat for Mysql, for db management.\nI did create an user that can access from any host, but it still doesn't do the work! </p>\n\n<p>i have checked in forums for an answer but instead of finding a solution i've made a mess of what i have to do.. please help!</p>\n\n<p>regards</p>\n"},{"tags":["php","javascript","mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":49,"score":-6,"question_id":13266863,"title":"Online Exam using PHP and MySQL with TIMER","body":"<p>Guys I am creating an <strong>Online exam using PHP and MYSQL</strong>. But i have a problem, how can I check the answers of the examinees in the previous page... i have next and previous button. But my codes only compute the correct answers on the <strong>last page</strong>. it doesn't include the scores in the previous pages. </p>\n\n<p>Second, <strong>my timer resets</strong> when the next page was clicked. The exam is good for 30 minutes. I want that 30 minutes from first page until to the last page without resetting and start counting again from 30 minutes.</p>\n"},{"tags":["php","mysql","sql","query","opencart"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":13257360,"title":"Using quotation mark in MySQL","body":"<p>I have a list of 1000 products I am currently importing into OpenCart. Some of the product titles contains an quotation mark to symbolise the inches (for example 5\").</p>\n\n<p>I have imported all of these products successfully using this query:</p>\n\n<pre><code>$data['name'] = mysql_escape_string($data['name']);\n$sql = \"INSERT INTO \".DB_PREFIX.\"product-description SET language_id = '1', name = '\".$data['name'].\"'\";\n$query = mysql_query($sql);\n</code></pre>\n\n<p>When I am in OpenCart the list of products also show proberly however when I go to edit the product the title input field (which is meant to show the title) cuts out the title from the \" symbol onwards.</p>\n\n<p>Here is a visual example:\n<img src=\"http://i.stack.imgur.com/HIpsV.png\" alt=\"enter image description here\"></p>\n\n<p>Here we see the title is complete\n<img src=\"http://i.stack.imgur.com/93t7G.png\" alt=\"enter image description here\"></p>\n\n<p>Here we see the title as been cut out after the \".</p>\n\n<p>I can confirm it is not an OpenCart coding error because if I manually insert products from the interface with a \" it works fine. The error must lie within my query.</p>\n\n<p>If there is a problem with my query, is there a query where I can update all the products rather than re-insert them?</p>\n"},{"tags":["mysql","magento"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":17,"score":2,"question_id":13264467,"title":"Free AJAX Cart Module for Magento 1.7?","body":"<p>I want to Add to cart product on my Product view page so i want <strong><code>AJAX</code></strong> cart for that\nand also <strong>Update</strong> the <strong><code>shopping cart Right</code></strong> side beside.\nPlease give me the name and <strong><code>Url</code></strong> for <strong><code>Download</code></strong></p>\n\n<p>So anybody please help me out.</p>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13249894,"title":"IN Mysql Function how can return more than one row","body":"<p>I am using MySQL.I able get more row in MySQL procedure but not in function . I want to write the function by returning values more than one row .  I attach my partial code:</p>\n\n<pre><code>drop function if exists test_splitfn;\nDELIMITER $$\n\nCREATE Function test_splitfn( sSepar VARCHAR(255), saVal TEXT )\nReturns @MyTable table \nbody:\n\nBEGIN\n\n  DROP TEMPORARY TABLE IF EXISTS lib_Explode;\n  CREATE TEMPORARY TABLE lib_Explode(\n    pos int unsigned NOT NULL auto_increment,\n    val VARCHAR(255) NOT NULL,\n    PRIMARY KEY  (pos)\n  ) ENGINE=Memory COMMENT='Explode() results.';\n\n  IF sSepar IS NULL OR saVal IS NULL THEN LEAVE body; END IF;\n\n  SET @saTail = saVal;\n  SET @iSeparLen = LENGTH( sSepar );\n\n  create_layers:\n  WHILE @saTail != '' DO\n\n    # Get the next value\n    SET @sHead = SUBSTRING_INDEX(@saTail, sSepar, 1);\n    SET @saTail = SUBSTRING( @saTail, LENGTH(@sHead) + 1 + @iSeparLen );\n    INSERT INTO lib_Explode SET val = @sHead;\n\n  END WHILE;\n\n     Insert @MyTable\n      SELECT val  FROM lib_Explode;\n\n\n    return @MyTable;\nEND; $$\nDELIMITER ;\n</code></pre>\n"},{"tags":["java","mysql","sql","java-ee"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":43,"score":0,"question_id":13266393,"title":"How to monitor database connection in java?","body":"<p>i have created web application using java. In that i am using tomcat server and SQL server. I need to implement watch dog service for monitoring database connection and server connection. I mean if database is not connecting or tomcat server is down then i need to write a code for send a alerting mail to my mail id. </p>\n\n<p>pls someone help me...</p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":38,"score":-2,"question_id":13266487,"title":"PHP-@ in while(@$rows = mysql_fetch_array($result))","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php\">Reference - What does this symbol mean in PHP?</a>  </p>\n</blockquote>\n\n\n\n<p>I have some php code like </p>\n\n<pre><code>$query=\"SELECT RollNo,Name FROM student\" ;\n$result = $mysql-&gt;execute_sql_query($query);\nwhile(@$rows = mysql_fetch_array($result))\n{\n        $studentArray[] = array(\"rollNo\" =&gt; $rows['RollNo'], \"name\" =&gt; $rows['Name']);      \n }\n</code></pre>\n\n<p>My doubt is why use @ in the line</p>\n\n<p>while(@$rows = mysql_fetch_array($result)) </p>\n"},{"tags":["php","mysql","phpmyadmin"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":29,"score":3,"question_id":13265104,"title":"phpmyadmin cannot Export procedure","body":"<p>When I export MySQL database using phpMyAdmin its exports all the table data perfectly but does not export <code>PROCEDURES</code> properly. What I get is:</p>\n\n<pre><code>DELIMITER $$\n--\n-- Procedures\n--\nDROP PROCEDURE IF EXISTS `sp_users_get`$$\n$$\n\nDROP PROCEDURE IF EXISTS `sp_users_save`$$\n$$\n</code></pre>\n\n<p>It should be more code like </p>\n\n<pre><code>CREATE PROCEDURE `sp_user_get`......\n</code></pre>\n\n<p>till the procedure ends.</p>\n\n<p>Can anyone help me to successfully export database from phpMyAdmin?</p>\n"},{"tags":["mysql","synchronization"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4,"score":0,"question_id":13266440,"title":"How do I have one way replication in mysql?","body":"<p>I have n databases (all have same schema) installed in n machines and there is a server which has the same schema has the n databases. how do I get data from these n databases to the server only one way. for example:</p>\n\n<p>p machine: 10 rows\nq machine: 10 rows\nr machine: 10 rows\ns machine: 10 rows</p>\n\n<p>after sync the server must have 40 rows and nothing must be modified in the client machines. i.e., p machine: 10 rows,q machine: 10 rows,r machine: 10 rows,s machine: 10 rows</p>\n\n<p>thanks a lot for any help provided.</p>\n"},{"tags":["mysql","database"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13266408,"title":"MySQL Database collation shows gibberish data","body":"<p>I exported mysql database (structure and data) using phpmyadmin as a .sql file.\nOn the top of the dump file I have following codes:</p>\n\n<pre><code>CREATE DATABASE `my_site` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci;\nUSE `my_site`;\n</code></pre>\n\n<p>And the unicode characters are visible (readable) if the dump file is opened in notepad.</p>\n\n<p>I was using 'charset = utf8' in those fields where I had to insert unicode characters.</p>\n\n<p>Now I need to import the sql file to a new server where the whole site is being shifted.\nI tried several times to import the dump in the new server using both 'latin1_swedish_ci' and\nand 'utf8_unicode_ci' collation, but in both cases all I can see is either bunch of\nquestion marks or some weird characters. The same data were showing perfectly in the previous\nserver. I know I have done something stupid while exporting or importing.\nCould you please find a solution for it? Thanks in advance.</p>\n"},{"tags":["php","mysql","sql","pdo","mysqli"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13263094,"title":"MYSQL select field1, field2 only where field1 or field2 does not equal text","body":"<p>I have the following 2 SQL syntax that I'm looking to combine into 1 SQL syntax</p>\n\n<pre><code>SELECT sentFrom \nFROM tableName \nWHERE id = :varid \nAND sentFrom != :vartext\n\nSELECT sentTo \nFROM tableName \nWHERE id = :varid \nAND sentTo != :vartext\n</code></pre>\n\n<p>I guess I should give an example:</p>\n\n<p>MYSQL TABLE</p>\n\n<pre><code>-----------------------------------\nsentFrom          sentTo\n1                 2\n1                 3\n2                 1\n2                 3\n</code></pre>\n\n<p>query </p>\n\n<pre><code>select sentFrom where sentFrom != 1 and select sentTo where sentTo != 1\n</code></pre>\n\n<p>Returns:</p>\n\n<p>sentTo 2 but not sentFrom 1</p>\n\n<p>sentTo 3 but not sentFrom 1</p>\n\n<p>sentFrom 2 but not sentTo 1</p>\n\n<p>sentFrom 2 and sentTo 3</p>\n"},{"tags":["java","mysql","database","spring","jdbc"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":582,"score":1,"question_id":9809100,"title":"How to use same connection for two queries in Spring?","body":"<p>I have the following code in a Spring JdbcTemplate based dao - </p>\n\n<pre><code>getJdbcTemplate().update(\"Record Insert Query...\");\nint recordId = getJdbcTemplate().queryForInt(\"SELECT last_insert_id()\");\n</code></pre>\n\n<p>The problem is that my sometimes my update and queryForInt queries get executed using different connections from the connection pool.</p>\n\n<p>This results in an incorrect recordId being returned since MySql last_insert_id() is supposed to be called from the same connection that issued insert query.</p>\n\n<p>I have considered the SingleConnectionDataSource but do not want to use it since it degrades the application performance. I only want single connection for these two queries. Not for all the requests for all the services.</p>\n\n<p>So I have two questions:</p>\n\n<ol>\n<li>Can I manage the connection used by the template class?</li>\n<li>Does JdbcTemplate perform automatic transaction management? If i manually apply a transaction to my Dao method does that mean two transactions will be created per query?</li>\n</ol>\n\n<p>Hoping that you guys can shed some light on the topic.</p>\n\n<p><strong>Update</strong> - I tried nwinkler's approach and wrapped my service layer in a transaction. I was surprised to see the same bug pop up again after sometime. Digging into the Spring source code i found this -  </p>\n\n<pre><code>public &lt;T&gt; T execute(PreparedStatementCreator psc, PreparedStatementCallback&lt;T&gt; action) \nthrows DataAccessException {\n//Lots of code  \nConnection con = DataSourceUtils.getConnection(getDataSource()); \n//Lots of code \n}\n</code></pre>\n\n<p>So contrary to what I thought, there isn't necessarily one database connection per transaction, but one connection for each query executed.\nWhich brings me back to my problem. I want to execute two queries from the same connection. :-(</p>\n\n<p><strong>Update</strong> - </p>\n\n<pre><code>&lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\"\n        destroy-method=\"close\"&gt;\n        &lt;property name=\"driverClassName\" value=\"${db.driver}\" /&gt;\n        &lt;property name=\"url\" value=\"${db.jdbc.url}\" /&gt;\n        &lt;property name=\"username\" value=\"${db.user}\" /&gt;\n        &lt;property name=\"password\" value=\"${db.password}\" /&gt;\n        &lt;property name=\"maxActive\" value=\"${db.max.active}\" /&gt;\n        &lt;property name=\"initialSize\" value=\"20\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"jdbcTemplate\" class=\"org.springframework.jdbc.core.JdbcTemplate\"\n        autowire=\"byName\"&gt;\n        &lt;property name=\"dataSource\"&gt;\n            &lt;ref local=\"dataSource\" /&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n\n    &lt;bean id=\"transactionManager\"\n        class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"&gt;\n        &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;tx:advice id=\"transactionAdvice\" transaction-manager=\"transactionManager\"&gt;\n        &lt;tx:attributes&gt;\n            &lt;tx:method name=\"*\" propagation=\"REQUIRES_NEW\" rollback-for=\"java.lang.Exception\" timeout=\"30\" /&gt;\n        &lt;/tx:attributes&gt;\n    &lt;/tx:advice&gt;\n    &lt;aop:config&gt;\n        &lt;aop:pointcut id=\"pointcut\" expression=\"execution(* service.*.*(..))\" /&gt;\n        &lt;aop:pointcut id=\"pointcut2\" expression=\"execution(* *.ws.*.*(..))\" /&gt;\n\n        &lt;aop:advisor pointcut-ref=\"pointcut\" advice-ref=\"transactionAdvice\" /&gt;\n        &lt;aop:advisor pointcut-ref=\"pointcut2\" advice-ref=\"transactionAdvice\" /&gt;\n    &lt;/aop:config&gt;\n</code></pre>\n"},{"tags":["php","mysql","sql","mysqli"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":55,"score":-4,"question_id":13262882,"title":"How to display incorrect answers in example below","body":"<p>Below I have 4 database tables, Session, Question, Answer and Option_Type.</p>\n\n<p><strong>Session Table:</strong></p>\n\n<pre><code>SessionId  SessionName\n1          AAA\n</code></pre>\n\n<p><strong>Question Table:</strong></p>\n\n<pre><code>SessionId   QuestionId  QuestionContent       OptionId\n1           1           What is 1+1 and 4+4   2\n1           2           Does 2+2 = 4          26\n1           3           What is 3+3 and 5+5   3\n</code></pre>\n\n<p><strong>Answer Table:</strong></p>\n\n<pre><code>AnswerId  SessionId QuestionId  Answer\n1         1         1           B\n2         1         1           C\n3         1         2           Yes\n4         1         3           A\n5         1         3           C\n</code></pre>\n\n<p><strong>Option_Type</strong></p>\n\n<pre><code>OptionId OptionType\n1        A-C\n2        A-D\n3        A-E\n4        A-F\n\n.... goes up to 24 where it goes up to A-Z\n\n25       True or False\n26       Yes or No\n</code></pre>\n\n<p>Now in a jsfiddle here I have created a demo html table which you can see <a href=\"http://jsfiddle.net/WHUkh/6/\" rel=\"nofollow\">here</a></p>\n\n<p>Now if you have a good look at the html table, you will realise that what I am trying to do is display the incorrect answers under the \"Incorrect Answer\" column.</p>\n\n<p>So what I want to do is that for example for Question 1, if you look in the database table, the \"OptionId\" for Question 1 is 2, which means if you look up \"OptionId\" under the \"Option_Type\" table that \"OptionType\" for this OptionId is \"A-D\". So the options are \"A\", \"B\", \"C\" and \"D\". The answers for Question 1 are \"B\" and \"C\". So I don't want to display these answers in the table as they are correct but I want to display the other options \"A\" and \"D\" as that they are incorrect.</p>\n\n<p>Does this make sense? My question is virtually how can I not show the correct answers under the \"Incorrect Answer\" column but instead show the other options under this column per question in the code below:</p>\n\n<pre><code>   $query = \"SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionContent, an.Answer, q.QuestionMarks \n   FROM Session s \n   INNER JOIN Question q ON s.SessionId = q.SessionId\n   JOIN Answer an ON q.QuestionId = an.QuestionId AND an.SessionId = q.SessionId\n   WHERE s.SessionName = ?\n   ORDER BY q.QuestionId, an.Answer\n   \";\n\n   // prepare query\n   $stmt=$mysqli-&gt;prepare($query);\n   // You only need to call bind_param once\n   $stmt-&gt;bind_param(\"s\", $assessment);\n   // execute query\n   $stmt-&gt;execute(); \n\n\n       // This will hold the search results\n    $searchQuestionId = array();\n    $searchQuestionContent = array();\n    $searchAnswer = array();\n    $searchMarks = array();\n\n    // Fetch the results into an array\n\n   // get result and assign variables (prefix with db)\n   $stmt-&gt;bind_result($dbSessionId, $dbSessionName, $dbQuestionId, $dbQuestionContent, $dbAnswer, $dbQuestionMarks);\n      while ($stmt-&gt;fetch()) {\n        $searchQuestionId[] = $dbQuestionId;\n        $searchQuestionContent[] = $dbQuestionContent;\n        $searchAnswer[] = $dbAnswer;\n        $searchMarks[] = $dbQuestionMarks;\n      } \n\n?&gt;      \n\n&lt;/head&gt;\n\n&lt;body&gt;\n\n&lt;form id=\"QandA\" action=\"&lt;?php echo htmlentities($_SERVER['PHP_SELF']); ?&gt;\" method=\"post\"&gt;\n\n&lt;?php \n\necho \"&lt;table border='1' id='markstbl'&gt;\n      &lt;tr&gt;\n      &lt;th class='questionth'&gt;Question No.&lt;/th&gt;\n      &lt;th class='questionth'&gt;Question&lt;/th&gt;\n      &lt;th class='answerth'&gt;Incorrect Answer&lt;/th&gt;\n      &lt;th class='answermarksth'&gt;Penalty per Incorrect Answer&lt;/th&gt;\n      &lt;/tr&gt;\\n\";\n$previous_question_id = null;\n$rowspans = array_count_values($searchQuestionId);\nforeach ($searchQuestionContent as $key=&gt;$question) {\n\n    // removed logic, not necessary to set empty strings if you're skipping them\n\n    echo '&lt;tr class=\"questiontd\"&gt;'.PHP_EOL;\n\n    if ($previous_question_id != $searchQuestionId[$key]) {\n        echo '&lt;td class=\"questionnumtd\" name=\"numQuestion\" rowspan=\"'.$rowspans[$searchQuestionId[$key]].'\"&gt;'.htmlspecialchars($searchQuestionId[$key]).'&lt;/td&gt;' . PHP_EOL;\n        echo '&lt;td class=\"questioncontenttd\" rowspan=\"'.$rowspans[$searchQuestionId[$key]].'\"&gt;'.htmlspecialchars($question).'&lt;/td&gt;' . PHP_EOL;\n    }\n\n    echo '&lt;td class=\"answertd\" name=\"answers[]\"&gt;';\n    echo $searchAnswer[$key];\n    echo '&lt;/td&gt;' ;\n    echo '&lt;td class=\"answermarkstd\"&gt;&lt;input class=\"individualMarks\" name=\"answerMarks[]\" id=\"individualtext\" type=\"text\" /&gt;&lt;/td&gt;' . PHP_EOL;\n\n    // moved this to the end\n    if ($previous_question_id != $searchQuestionId[$key]) {\n        $previous_question_id = $searchQuestionId[$key];\n    }\n}\n        echo '&lt;/tr&gt;';\n        echo \"&lt;/table&gt;\" . PHP_EOL;\n\n        ?&gt;\n\n&lt;/form&gt;\n</code></pre>\n\n<p>At the moment the code above is showing the correct answers under the \"Incorrect Answers\" column, not the incorrect answers.</p>\n"},{"tags":["mysql","index","range","inner-join","check"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13254023,"title":"Mysql range check instead of index usage on inner join","body":"<p>I'm having a serious problem with MySQL (innoDB) 5.0.</p>\n\n<p>A very simple SQL query is executed with a very unexpected query plan.</p>\n\n<p>The query:</p>\n\n<pre><code>SELECT \nSQL_NO_CACHE\nmbCategory.*\n\nFROM \nMBCategory mbCategory \n\nINNER JOIN ResourcePermission as rp\n    ON rp.primKey = mbCategory.categoryId \n\nwhere mbCategory.groupId = 12345 AND mbCategory.parentCategoryId = 0 \nlimit 20;\n</code></pre>\n\n<p>MBCategory - contains 216583 rows</p>\n\n<p>ResourcePermission - contains 3098354 rows.</p>\n\n<p>In MBCategory I've multiple indexes (columns order as in index):</p>\n\n<pre><code>Primary (categoryId)\nA (groupId,parentCategoryId,categoryId)\nB (groupId,parentCategoryId)\n</code></pre>\n\n<p>In ResourcePermission I've multiple indexes (columns order as in index):</p>\n\n<pre><code>Primary - on some column\nA (primKey).\n</code></pre>\n\n<p>When I look into query plan Mysql changes tables sequence and selects rows from ResourcePermission at first and then it joins the MBCategory table (crazy idea) and it takes ages. So I added <code>STRAIGHT_JOIN</code> to force the innodb engine to use correct table sequence:</p>\n\n<pre><code>SELECT\n\nSTRAIGHT_JOIN SQL_NO_CACHE\nmbCategory.*\n\nFROM \nMBCategory\n mbCategory \n\nINNER JOIN ResourcePermission as rp\n    ON rp.primKey = mbCategory.categoryId \n\nwhere mbCategory.groupId = 12345 AND mbCategory.parentCategoryId = 0 \nlimit 20;\n</code></pre>\n\n<p>But here the second problem materialzie:\nIn my opinion mysql should use <code>index A (primKey)</code> on the join operation instead it performs Range checked for each record (index map: 0x400) and it again takes ages !\nForce index doesn't help, mysql still performing Range checked for each record .</p>\n\n<p>There are only 23 rows in the MBCategory which fulfill where criteria, and after join there are only 75 rows. \nHow can I make mysql to choose correct index on this operation ?</p>\n"},{"tags":["mysql","sql"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13265160,"title":"LEFT JOIN 2 Table but will only return the 1st Record from Table2","body":"<p>table1</p>\n\n<pre><code>cid\nitemdesc\nitemprice\n</code></pre>\n\n<p>table2</p>\n\n<pre><code>cid\nimagename\nstatus\n</code></pre>\n\n<p>My 1st table is has unique cid (no duplicate) I want it to LEFT JOIN TO table2 but it has multiple rows per cid</p>\n\n<pre><code>cid      imagename           status\n1        image1-of-cid1      test1\n1        image2-of-cid1      test2\n2        image1-of-cid2      test3\n2        image2-of-cid2      test4\n2        image3-of-cid2      test5\n</code></pre>\n\n<p>But I only want the Query to return the the 1st row only of the each record fom table 1</p>\n\n<p>Thanks</p>\n"},{"tags":["php","mysql","database"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1743,"score":0,"question_id":2400126,"title":"Using PHP variable inside a query","body":"<p>I am using a query inside <a href=\"http://en.wikipedia.org/wiki/PHP\" rel=\"nofollow\">PHP</a> as:</p>\n\n<pre><code> $query =  'SELECT * from #__chronoforms_UploadAuthor where text_6 like \"%'.$_GET['title'].'%\" and text_7 like \"%'.$_GET['author'].'%\" limit 0,1';\n</code></pre>\n\n<p>Where I am trying to insert a PHP variable instead of 1 in the limit..</p>\n\n<pre><code>   $query =  'SELECT * from #__chronoforms_UploadAuthor where text_6 like \"%'.$_GET['title'].'%\" and text_7 like \"%'.$_GET['author'].'%\" limit 0,\"'.$_GET['limit'].'\"';\n</code></pre>\n\n<p>but it shows me an error. There are some errors in keeping <code>$_GET['limit']</code>.</p>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":13265508,"title":"Xp and leveling system PHP MYSQL","body":"<p>Ive looked at all the question that have been asked and with the answer, but i cannot seem to find a answer that suits me the best. What im trying to do is work on making a system that when a user is at a certain xp limit that go to the next level. and it shows how much xp is needed till the next xp.</p>\n\n<p>So</p>\n\n<pre><code>lvl1 = 0 =&gt; lvl2 = 256 =&gt; lvl3 = 785 =&gt; lvl4 = 1656 =&gt; lvl5 = 2654\n</code></pre>\n\n<p>how would i go about doing that, so if xp is at certain amount show the amount and how much xp is needed for the next level.</p>\n"},{"tags":["php","mysql","yii","relational-database"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":20,"score":0,"question_id":13264359,"title":"STAT Relation on a related model's STAT relation, Yii","body":"<p>I am having a problem with STAT relation in Yii. I am not sure whether what I am looking for is possible with native Yii relations. I will try my best to describe my issue, Please ask for any specific details if something is not clear. </p>\n\n<p>I have three table and hence three models</p>\n\n<pre><code>| tablea         |\n| tableb         |\n| tablec         |\n\n\nmysql&gt; select * from tablea;\n+----+--------+\n| id | name   |\n+----+--------+\n|  1 | Item 1 |\n|  2 | Item 2 |\n+----+--------+\n2 rows in set (0.00 sec)\n\nmysql&gt; select * from tableb;\n+----+------+----------+\n| id | Aid  | name     |\n+----+------+----------+\n|  1 |    1 | B Item 1 |\n|  2 |    2 | B Item 2 |\n|  3 |    1 | B Item 3 |\n+----+------+----------+\n3 rows in set (0.00 sec)\n\nmysql&gt; select * from tablec;\n+----+------+----------+-------+\n| id | Bid  | name     | value |\n+----+------+----------+-------+\n|  1 |    1 | C Item 1 |    10 |\n|  2 |    2 | C Item 2 |    20 |\n|  3 |    1 | C Item 3 |    15 |\n|  4 |    2 | C Item 4 |     5 |\n|  5 |    3 | C Item 5 |    12 |\n+----+------+----------+-------+\n5 rows in set (0.00 sec)\n</code></pre>\n\n<p>The relation is like TableA HAS_MANY TableB and TableB HAS_MANY TableC.</p>\n\n<p>I have a value field in TableC. I am able to get the STAT relation for the sum of value from TableB. What I want is the sum of all the TableC items from TableA. I need to used= them in the GridView with sorting capability.</p>\n\n<p>Any Idea on how to implement this?</p>\n\n<p>Thanks</p>\n"},{"tags":["mysql","query"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13265250,"title":"Query to return Pokemon with HP by Type","body":"<p>I have a database full of Pokemon Cards, and I want to do a query to find the pokemon that has the highest HP by each type. I want the view to show just the name, type, and HP of that pokemon.</p>\n\n<pre><code>SELECT MAX(HP), Type, name FROM `Pokemon` group by Type\n</code></pre>\n\n<p>I have this code. It returns the max HP but not the correct Pokemon. \nWill this code show multiple rows with the same HP for a single type?</p>\n"},{"tags":["php","mysql","sql"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":70,"score":0,"question_id":13265567,"title":"SQL for getting sum of a column","body":"<p>I have three tables linked each other.</p>\n\n<pre><code>mysql&gt; select * from tablea;\n+----+--------+\n| id | name   |\n+----+--------+\n|  1 | Item 1 |\n|  2 | Item 2 |\n+----+--------+\n2 rows in set (0.00 sec)\n\nmysql&gt; select * from tableb;\n+----+------+----------+\n| id | Aid  | name     |\n+----+------+----------+\n|  1 |    1 | B Item 1 |\n|  2 |    2 | B Item 2 |\n|  3 |    1 | B Item 3 |\n+----+------+----------+\n3 rows in set (0.00 sec)\n\nmysql&gt; select * from tablec;\n+----+------+----------+-------+\n| id | Bid  | name     | value |\n+----+------+----------+-------+\n|  1 |    1 | C Item 1 |    10 |\n|  2 |    2 | C Item 2 |    20 |\n|  3 |    1 | C Item 3 |    15 |\n|  4 |    2 | C Item 4 |     5 |\n|  5 |    3 | C Item 5 |    12 |\n+----+------+----------+-------+\n5 rows in set (0.00 sec)\n</code></pre>\n\n<p>TableA is linked to TableB with Aid, TableC is linked with TableB with Bid.</p>\n\n<p>What I want is the id of tableA and the sum of values of all the TableC items comes under it.</p>\n\n<p>The result set I expect for the above example is </p>\n\n<pre><code>+-----------+--------+\n| tablea.id | sum    |\n+-----------+--------+\n|         1 |     37 |\n|         2 |     25 |\n+-----------+--------+\n</code></pre>\n"},{"tags":["mysql","testing"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":810,"score":2,"question_id":2345979,"title":"How to generate random data for testing database performance?","body":"<p>I have created a test table in MySQL and would like to insert 10 million rows with randomly generated data. How to do this random generation process? Is there any predefined method in MySQL or is there any quick query we can construct to do this job?</p>\n\n<p>Thank you for any help.</p>\n"},{"tags":["php","mysql","csv"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":44,"score":2,"question_id":13265599,"title":"CSV line break issue","body":"<p>I have this CSV file that contain this following,</p>\n\n<pre><code>10000,hello\n10000,bye\n10000,good\n</code></pre>\n\n<p>And, my code below for reading CSV file, and send them to database.</p>\n\n<pre><code>if ($_FILES[csv][size] &gt; 0) { \n\n    //get the csv file \n    $file = $_FILES[csv][tmp_name]; \n    $handle = fopen($file,\"r\"); \n\n    //loop through the csv file and insert into database \n    do { \n        if ($data[0]) { \n            mysql_query(\"INSERT INTO table_name (table_column1, table_column2) VALUES \n                ( \n                    '\".$data[0].\"', \n                    '\".$data[1]. \"'\n                ) \n            \");         \n        }\n    } while ($data = fgetcsv($handle,1000,\",\")); \n\n} \n</code></pre>\n\n<p>With the above, the data from CSV cannot go into database because, it read the file something like this below,</p>\n\n<pre><code>10000 hello 10000\nbye 10000\ngood\n</code></pre>\n\n<p><strong>May i know, what the is problem with this? Is there something wrong with the codes?</strong></p>\n\n<p>However, if the format for my CSV file is like this below (A blank line in between each line),</p>\n\n<pre><code>10000,hello\n\n10000,bye\n\n10000,good\n</code></pre>\n\n<p>All the data can go into database successsfully.</p>\n"},{"tags":["php","javascript","jquery","mysql","ajax"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":13238340,"title":"Jquery $.post is returning the wrong data","body":"<p>When my ajax is processed</p>\n\n<pre><code>$.post(\"main.php\", \n          {data: $(this).text()}, \n          function(data) {\n               //alert(\"Data saved.\");\n               $('#demo').html(data);\n          });   \n</code></pre>\n\n<p>instead of getting what I specified in the below query</p>\n\n<pre><code>if (isset($_POST['data'])){\n$data = $_POST['data'];\n\n    $query = mysql_query(\"SELECT * FROM tempusers\n    WHERE 'firstname' LIKE '%$data%' \n        OR 'lastname' LIKE '%$data%' \n        OR 'title' LIKE '%$data%'\");\n\n    while($row=mysql_fetch_assoc($query)){\n                $firstname=$row['firstname'];\n                $lastname=$row['lastname'];\n                $grade=$row['grade'];\n\n\n    echo $grade;\n</code></pre>\n\n<p>Instead I get all the elements in my page returned. So in other words in the div below</p>\n\n<pre><code> &lt;div id=\"demo\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>I'm  returning my page. So it shows as a website within a website. It won't even show <code>echo $grade;</code> I thought it was my query acting up, but I tried commenting out the query and just <code>echo $data</code> <strong><em>see below</em></strong></p>\n\n<pre><code>if (isset($_POST['data'])){\n$data = $_POST['data'];\necho $data; \n</code></pre>\n\n<p>And doing so gave me the same result as stated previously \"echoing out the website within the website\" and also echoed the $data I wanted. I would be overjoyed to understand how this happened as well as what I can do to fix this problem and get my isset function/ajax corrected. Any other tips would be greatly appreciated. I know I need to change the query to PDO and plan on it. </p>\n"},{"tags":["mysql","database","scala","playframework-2.0","anorm"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":13054935,"title":"Play 2.0 Complex join query how to parse (Anorm )","body":"<p>I am writing website using play 2.0 framework. And I have a problem when parsing results. \nThis request to mysql db gets all the links(can be several per episode) added to the database per episode together with all the information about episode and anime.</p>\n\n<pre><code>  def lastReleasedLink(limit:Long=5):List[(((Episode,Anime),Link),Genre)] = {\n    DB.withConnection { implicit c =&gt;\n      SQL(\n        \"\"\"\n          select * from yas_episodes as a\n          inner join anime as b on a.ep_anime_id=b.id\n          left outer join yas_links as c on a.ep_id=c.ep_id\n          LEFT JOIN yas_animes_genres AS d ON a.ep_anime_id = d.ag_anime_id\n          INNER JOIN yas_genres AS e ON e.g_id = d.ag_genre_id\n          where c.ep_id IS NOT NULL group by c.ep_id order by c.date desc limit {limit}\n        \"\"\").on('limit -&gt;limit)as(Episode.simple~Anime.simple~Link.simple~Genre.simple map{\n        case episode~anime~link~genre =&gt; episode -&gt; anime -&gt; link -&gt; Genre\n      } *)\n    }\n  }\n</code></pre>\n\n<p>The return value is type of List[(((Episode,Anime),Link),Genre)]\nbut how can I form output to the list of \nlet say  List[episode,anime,Seq[links]] or List[episode,anime,Seq[Genres],Seq[links]] don't know where to put genres.</p>\n\n<p>You can imagine that when you have two links per one episode information from table anime and yas_episodes will be copied for every row. So I need somehow stack them together(group) by episode record. Then it will be possible to iterate list and access to all objects.</p>\n\n<p>As you can see, in the request there is many-to-many relation of anime with genres. \nI have no idea how can I put all together to one list to be able to access it in view. Should Genre be part of Anime model?</p>\n"},{"tags":["php","html","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":52,"score":-5,"question_id":13258704,"title":"display mysql database in html table","body":"<p>I want to get all the data from my database and put it in a HTML table. My database looks like this:</p>\n\n<pre><code>username password q1 q2 q3 q4 q5 hscore lscore\n</code></pre>\n\n<p>I would like to get all of the usernames and put them with their hscore (stands for high score) with the highest highscore at the top and the smallest at the bottom. this is basicly a leaderboard. (the database is called users)</p>\n\n<p>I had a go myself but I just couldn't get anything productive. if you need more info please ask.</p>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13264194,"title":"how to get text from pdf file and save it into DB","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4780697/php-pdf-to-string\">php: pdf to string</a>  </p>\n</blockquote>\n\n\n\n<p>i am trying to save text content of pdf file in to DB. I found this link helpful <a href=\"http://stackoverflow.com/questions/4780697/php-pdf-to-string\">php: pdf to string</a>, and worked on it. But it only converts very less amount of data :( why is it so ?</p>\n\n<p>Or any other solution on how to convert complex pdf file (containing header, footer, tables, nd two column layout in some pages etc etc.) in to string and save it to DB ?</p>\n"},{"tags":["mysql","count","query-optimization"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":13265025,"title":"Optimize Slow MySQL Count Query & Group by Day","body":"<p>I'm tracking hits on a site in the following MySQL MyISAM table:</p>\n\n<pre><code>CREATE TABLE `track_hits` (\n  `hit_id` int(10) unsigned NOT NULL auto_increment,\n  `referer` varchar(255) default NULL,\n  `referer_checksum` int(10) default NULL,\n  `domain_checksum` int(10) default NULL,\n  `referer_local` enum('Yes','No') default NULL,\n  `request` varchar(255) default NULL,\n  `request_checksum` int(10) default NULL,\n  `embed_id` int(10) unsigned default NULL,\n  `embed_user_id` int(10) unsigned default NULL,\n  `embed_campaign_id` int(10) unsigned default NULL,\n  `date` datetime default NULL,\n  `day_checksum` int(10) default NULL,\n  `visit_id` int(10) unsigned default NULL,\n  PRIMARY KEY  (`hit_id`),\n  KEY `referer_checksum` (`referer_checksum`),\n  KEY `date` (`date`),\n  KEY `visit_id` (`visit_id`),\n  KEY `embed_user_id` (`embed_user_id`),\n  KEY `embed_campaign_id` (`embed_campaign_id`),\n  KEY `day_checksum` (`day_checksum`),\n  KEY `domain_checksum` (`domain_checksum`),\n  KEY `embed_id` (`embed_id`)\n) ENGINE=MyISAM DEFAULT CHARSET=utf8;\n</code></pre>\n\n<p>The table has over 5 million rows in it.</p>\n\n<p>I want total # of hits &amp; total # of uniques (based on the distinct <code>visit_id</code>'s) per campaign (<code>embed_campaign_id</code>) per day within a certain date range. I'm doing that with this query:</p>\n\n<pre><code>SELECT COUNT(DISTINCT h.`visit_id`) AS `visits`, COUNT(h.`hit_id`) AS `hits`, `date`\nFROM (`track_hits` h)\nWHERE `h`.`embed_campaign_id` = '31'\nAND `h`.`date` &gt;= '2012-10-07 07:00:00'\nAND `h`.`date` &lt;= '2012-11-07 07:59:59'\nGROUP BY `h`.`day_checksum`\n</code></pre>\n\n<p>It takes about 15-25 seconds to run.</p>\n\n<p><code>day_checksum</code> is a crc32 encoded version of the date, i.e. \"2012-11-07\". I've replaced the <code>GROUP BY</code> with <code>DATE(h.date)</code> with no increase in speed.</p>\n\n<p>EXPLAIN returns:</p>\n\n<pre><code>id  select_type table   type    possible_keys           key                 key_len     ref     rows        extra\n1   SIMPLE      h       ref     date,embed_campaign_id  embed_campaign_id   5           const   1648683     Using where; Using filesort\n</code></pre>\n\n<p>I've thought about using summary tables per day, but the site is localized and all dates in the database are in GMT. So 10/07 @ 7PM EST through 11/07 @7PM EST is going to need to return different counts than 10/07 @ 7PM PST through 11/07 @7PM PST.</p>\n\n<p>Is there any way to speed that up?</p>\n"},{"tags":["mysql","wordpress","widget","settings"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":651,"score":3,"question_id":6164831,"title":"Migrating Widget Settings in WordPress","body":"<p>I've done a lot of WordPress migrations from one server to another at work and elsewhere, but one strange thing I've never been able to understand is why widget settings never get carried over.</p>\n\n<p>I'll dump the MySQL database, find/replace localhost with the live domain, SSH the database up to the live server, and then ftp the whole WP installation (core and theme, from my local machine), and still the widget settings are wiped out. And sometimes this is also the case with values saved in theme options pages I make in the Dashboard.</p>\n\n<p>What am I missing?</p>\n"},{"tags":["mysql","database","entity-relationship","mysql-workbench"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13265204,"title":"How can I draw ER diagram for a existing mysql database with virtual realtionships which contain tables of engine: MyISAM with no contraints defined?","body":"<p>I have used <strong>SchemaSpyGui</strong> for drawing  ER diagram for a existing mysql database which contain tables of type of engine: MyISAM with no contraints defined. </p>\n\n<p>Virtual realtionship are created based on naming conventions of the column names.</p>\n\n<p>myIsam dont have the concept of foreign keys</p>\n\n<p>It works as follows :</p>\n\n<p>author(authorid,name)\nbook(authorid,isbn,name)</p>\n\n<p>It is able to create virtual relationship between the two tables if their column name are same but it didnt simply work when i gave 150 tables. It was able to draw the schema but not the ER diagram</p>\n\n<p>Iam even ok even with other pattern too, fk to be pktable_id, ...etc</p>\n\n<p>Even the <strong>Reverse Engineer</strong> of <strong>MysqlWorkbench</strong> doesnt failed.</p>\n\n<p>Does someone know any application which can draw virtual relationship for tables with MyISAM engine just with the naming convention followed ?</p>\n"},{"tags":["mysql","jdbc","recursion","artificial-intelligence","stackoverflow"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":117,"score":0,"question_id":13229722,"title":"sql stackoverflow error when creating pattern database(5-5-5) for 15-Puzzle","body":"<p>For static pattern database(5-5-5), see <a href=\"http://reference.kfupm.edu.sa/content/d/i/disjoint_pattern_database_heuristics_56916.pdf\" rel=\"nofollow\">this</a>(page 290 and 283) For <a href=\"http://en.wikipedia.org/wiki/Fifteen_puzzle\" rel=\"nofollow\">What is 15-puzzle?</a><br>\nI am creating a static patter database(5-5-5). This code to to fill entries into the first table. I am doing it via the recursive function <code>insertInDB()</code>. The first input to the recursive function is this (actually the input puzzle contains it in 1-D array. For better understanding I have represented it as 2-D below)<br></p>\n\n<hr>\n\n<p>1 &nbsp;2 &nbsp;3 &nbsp;4<br>\n0 &nbsp;6 &nbsp;0 &nbsp;0<br>\n0 &nbsp;0 &nbsp;0 &nbsp;0<br>\n0 &nbsp;0 &nbsp;0 &nbsp;0<br></p>\n\n<hr>\n\n<p>The data is inserted continuously into the db till all the recursions are over. But I don't think that the problem is due to recursion. Before putting it up on SO, I searched many forums and they recommended different thing like change the driver and set the <code>autoreconnect</code> value to true in the <code>SQL url</code>. I tried all those things; still the same result. IS there anything wrong with the logic?</p>\n\n<p><br><br>\n<strong>EDIT#1</strong><br>\nAs per suggestions below, I have separated the SQL code into different functions and have made all the <strong>functions</strong>, <strong>Connection</strong>, <strong>PreparedStatemment</strong> and <strong>ResultSet</strong> as non-static.<br></p>\n\n<pre><code>  public DBClass()\n    {\n        try {\n            Class.forName(\"com.mysql.jdbc.Driver\");\n        } catch (ClassNotFoundException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n            try {\n                connection = DriverManager\n                    .getConnection(\"jdbc:mysql://localhost/feedback?\"\n                        + \"user=ashwin&amp;password=ashwin&amp;autoReconnect=true&amp;useUnicode=true&amp;characterEncoding=utf8&amp;validationQuery=Select 1\");\n                insert_statement=\"insert into staticpdb1(hash,permutation,cost) values(?,?,?)\";\n                read_statement=\"select SQL_NO_CACHE * from staticpdb1 where hash=? and permutation= ? LIMIT 1\";\n                 ps1=connection.prepareStatement(read_statement, ResultSet.TYPE_SCROLL_SENSITIVE, \n                            ResultSet.CONCUR_UPDATABLE);\n                ps2=connection.prepareStatement(insert_statement);\n                k=0;\n            } catch (SQLException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n    }\n    public int updateIfNecessary(FifteenPuzzle sub) \n       {\n           String str=sub.toDBString();\n           try\n           {\n\n               ps1.setInt(1, sub.hashcode());\n               ps1.setString(2,str);\n               rs=ps1.executeQuery();\n           if(rs.next())\n              {\n                  //if a row exists, check if the cost is greater than sub's\n                  int cost=rs.getInt(3);\n                  if(sub.g_n&lt;cost)  //if the cost of sub is less than db row's cost\n                  {\n                      //replace the cost\n                      rs.updateInt(3, sub.g_n);\n                      rs.updateRow();\n                      return 1;   //only examine - do not insert\n                  }\n                  else\n                      return 0;   //dont examine - return\n\n              }\n           else\n               return 2;      //insert and examine\n           }\n           catch(SQLException e)\n           {\n\n               System.out.println(\"here1\"+e);\n               return 0;\n           }\n           finally{\n\n               try{\n                   rs.close();}\n               catch(final Exception e1)\n               {\n                   System.out.println(\"here2\"+e1);\n               }\n\n           }\n\n\n       }\n    public void insert(FifteenPuzzle sub)\n    {\n\n        try{\n        String str=sub.toDBString();\n\n\n         ps2.setInt(1,sub.hashcode());\n         ps2.setString(2, str);\n         ps2.setInt(3,sub.g_n);\n         ps2.executeUpdate();\n         ps2.clearParameters();\n        }catch(SQLException e)\n        {\n            System.out.println(\"here3\"+e);\n        }\n    }\n\n    public void InsertInDB(FifteenPuzzle sub) throws SQLException\n       {\n\n           System.out.println(k++);\n\n           int i;\n\n           int p=updateIfNecessary(sub);\n          if(p==0)\n          {\n              System.out.println(\"returning\");\n           return;\n          }\n          if(p==2)\n          insert(sub);\n\n\n           //FifteenPuzzle temp=new FifteenPuzzle(sub.puzzle.clone(),2,sub.g_n);\n           for(i=0;i&lt;sub.puzzle.length;i++)\n           {\n               if(sub.puzzle[i]!=0)\n               {\n                   //check the positions it can be moved to\n                   if(i%4!=0 &amp;&amp; sub.puzzle[i-1]==0)  //left\n                   {\n                       //create another clone and increment the moves\n                       FifteenPuzzle temp_inner=new FifteenPuzzle(sub.puzzle.clone(),2,sub.g_n+1);\n                       //exchange positions\n                        int t=temp_inner.puzzle[i];\n                        temp_inner.puzzle[i]=temp_inner.puzzle[i-1];\n                        temp_inner.puzzle[i-1]=t;\n                        InsertInDB(temp_inner);\n                   }\n                   if(i%4!=3 &amp;&amp; sub.puzzle[i+1]==0)  //right\n                   {\n                       //create another clone and increment the moves\n                       FifteenPuzzle temp_inner=new FifteenPuzzle(sub.puzzle.clone(),2,sub.g_n+1);\n                       //exchange positions\n                        int t=temp_inner.puzzle[i];\n                        temp_inner.puzzle[i]=temp_inner.puzzle[i+1];\n                        temp_inner.puzzle[i+1]=t;\n                        InsertInDB(temp_inner);\n                   }\n                   if(i/4!=0 &amp;&amp; sub.puzzle[i-4]==0)  //up\n                   {\n                       //create another clone and increment the moves\n                       FifteenPuzzle temp_inner=new FifteenPuzzle(sub.puzzle.clone(),2,sub.g_n+1);\n                       //exchange positions\n                        int t=temp_inner.puzzle[i];\n                        temp_inner.puzzle[i]=temp_inner.puzzle[i-4];\n                        temp_inner.puzzle[i-4]=t;\n                        InsertInDB(temp_inner);\n                   }\n                   if(i/4!=3 &amp;&amp; sub.puzzle[i+4]==0)  //down\n                   {\n                       //create another clone and increment the moves\n                       FifteenPuzzle temp_inner=new FifteenPuzzle(sub.puzzle.clone(),2,sub.g_n+1);\n                       //exchange positions\n                        int t=temp_inner.puzzle[i];\n                        temp_inner.puzzle[i]=temp_inner.puzzle[i+4];\n                        temp_inner.puzzle[i+4]=t;\n                        InsertInDB(temp_inner);\n                   }\n\n               }\n           }\n       }\n}\n</code></pre>\n\n<p><br>\nLook at the code around <code>#1</code>. I have returned <strong>false</strong> there. I am still getting <code>java.sql.SqLException:java.lang.StackOverFlowError</code>. The code has been running for the past <strong>1hour</strong>(it is still running!). This is a snap shot of the output : <br></p>\n\n<pre><code>1607221\n1607222\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607223\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607224\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607225\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607226\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607227\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607228\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607229\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607230\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607231\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607232\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607233\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607234\n1607235\n1607236\n1607237\n1607238\n1607239\n1607240\n1607241\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607242\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607243\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607244\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607245\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607246\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607247\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607248\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607249\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607250\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607251\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607252\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607253\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607254\nhere1java.sql.SQLException: java.lang.StackOverflowError\n1607255\n1607256\n1607257\n1607258\n1607259\n1607260\n1607261\n1607262\n1607263\n1607291\n</code></pre>\n\n<p><br>\nIf <code>java.sql.SQLException:java.lang.StackOverFlowError</code> was due to recursion, then why is it being thrown in the function <strong>updateIfNecessary()</strong>. Shouldn't it be thrown as soon as the recursive function is called? And not entering the recursive function and calling <strong>updateIfNecessary()</strong>. I mean to say that if there was no memory, the recursive function itself should not have been called. \n<br><br>\n<strong>EDIT#2</strong><br>\nAs per @prajeeshkumar's suggestion, I set the stack size to -<code>Xss128m</code>(1024, 512 and 256 were giving a fatal error) for stack size in run configurations. <br>\nCurrently the recursion number or the depth is <strong><code>7,500,000</code> and counting</strong>(value of <code>System.out.println(k++);</code>).\n<br> The total number of combinations possible is \n<br></p>\n\n<pre><code>16!/(16-5)! = 524160\n</code></pre>\n\n<p><br>\nBut the depth has already reached 7,500,000. This is because of generation of duplicate states. Currently the number of entries in the database is <strong>513423</strong>. You might think that there only 10,000 entries to fill up now. But now the rate at which entries are made has decreased drastically about <strong>1 entry every 30 min</strong>. This will never get over then. <br><br>\nI need a solution that is practical - <strong>with or without recursion</strong>. Is it possible?</p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13265344,"title":"Form POST data loop how to assign in a variable and compare to a DB","body":"<p>I have a shopping cart form that once I submit the form I loop the POST values to print it on a table.Here is the loop for the items sold</p>\n\n<pre><code>&lt;?php\n    for($i = 0; $i &lt; count($_POST[\"id\"]); $i++){\n        echo \"&lt;tr&gt;\";\n        echo \"&lt;td&gt;\".$_POST[\"name\"][$i].\"&lt;/td&gt;\";\n        echo \"&lt;td&gt;$ \".$_POST[\"price\"][$i].\"&lt;/td&gt;\";      \n        echo \"&lt;td&gt;\".$_POST[\"quantity\"][$i].\"&lt;/td&gt;\";\n        $total[$i] = $_POST[\"price\"][$i]*$_POST[\"quantity\"][$i];\n        echo \"&lt;td&gt;$ \".$total[$i].\"&lt;/td&gt;\";\n        echo \"&lt;/tr&gt;\"; \n ?&gt;\n</code></pre>\n\n<p>My question is based on this loop I need to compare it to a product DB that has the following fields</p>\n\n<p>|Name | Price | QtyLeft | QtySold | where QtyLeft is the current quantity in stock. So based on the code above how do I query my table to subtract the quantity of the item sold to the QtyLeft and update QtySold?</p>\n"},{"tags":["java","php",".net","mysql","jsf"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":4,"view_count":42,"score":-3,"question_id":13265458,"title":"How to build a standalone application for a dynamic PHP website","body":"<p>Is it possible to build a standalone desktop application to perform the administrator operations of a dynamic website programmed in PHP and uses MySql database. The desktop app should have access to the contents of the database over internet and allow read and write operations. Which platform is better to do this, PHP or .net or Java ?</p>\n"},{"tags":["php","mysql","paging","undefined-index"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2141,"score":0,"question_id":2776514,"title":"paging php error - undefined index","body":"<p>i've a search form with paging. when the user enters the keyword initially, it works fine and displays the required output; however, it also shows this error:</p>\n\n<pre><code>Notice: Undefined index: page in C:\\Users\\user\\Documents\\Projects\\Pro\\search.php on line 21 Call Stack: 0.0011 372344 1. {main}() C:\\Users\\user\\Documents\\Projects\\Pro\\search.php:0 \n</code></pre>\n\n<p>. .and if the user clicks on the 'next' page, it shows no output with this error thrown:</p>\n\n<pre><code>Notice: Undefined index: q in C:\\Users\\user\\Documents\\Projects\\Pro\\search.php on line 19 Call Stack: 0.0016 372048 1. {main}() C:\\Users\\user\\Documents\\Projects\\Pro\\search.php:0\n</code></pre>\n\n<p>this is my code:</p>\n\n<pre><code>&lt;?php\n\nini_set('display_errors',1);\nerror_reporting(E_ALL|E_STRICT);\n\ninclude 'config.php';\n\n\n$search_result = \"\";\n\n$search_result = trim($_GET[\"q\"]);\n\n$page= $_GET[\"page\"]; //Get the page number to show\nif($page == \"\") $page=1;\n\n$search_result = mysql_real_escape_string($search_result);\n\n//Check if the string is empty\nif ($search_result == \"\") {\n  echo  \"&lt;p class='error'&gt;Search Error. Please Enter Your Search Query.&lt;/p&gt;\" ;\n  exit();\n      }\n\nif ($search_result == \"%\" || $search_result == \"_\" || $search_result == \"+\" ) {\n  echo  \"&lt;p class='error1'&gt;Search Error. Please Enter a Valid Search Query.&lt;/p&gt;\" ;\n  exit();\n      }\n\nif(!empty($search_result))\n{\n\n\n\n  // the table to search\n  $table = \"thquotes\";\n  // explode search words into an array\n  $arraySearch = explode(\" \", $search_result);\n  // table fields to search\n  $arrayFields = array(0 =&gt; \"cQuotes\");\n  $countSearch = count($arraySearch);\n  $a = 0;\n  $b = 0;\n  $query = \"SELECT cQuotes, vAuthor, cArabic, vReference FROM \".$table.\" WHERE (\";\n  $countFields = count($arrayFields);\n  while ($a &lt; $countFields)\n  {\n    while ($b &lt; $countSearch)\n    {\n      $query = $query.\"$arrayFields[$a] LIKE '%$arraySearch[$b]%'\";\n      $b++;\n      if ($b &lt; $countSearch)\n      {\n        $query = $query.\" AND \";\n      }\n    }\n    $b = 0;\n    $a++;\n    if ($a &lt; $countFields)\n    {\n      $query = $query.\") OR (\";\n    }\n  }\n  $query = $query.\")\";\n\n     $result = mysql_query($query, $conn)\n      or die ('Error: '.mysql_error());\n\n     $totalrows = mysql_num_rows($result);\n\n     if($totalrows &lt; 1)\n        {\n             echo '&lt;span class=\"error2\"&gt;No matches found for \"'.$search_result.'\"&lt;/span&gt;';\n         }\n        else\n        {\n\n            $limit = 3; //Number of results per page\n            $numpages=ceil($totalrows/$limit);\n\n            $query = $query.\" ORDER BY idQuotes LIMIT \" . ($page-1)*$limit . \",$limit\";\n            $result = mysql_query($query, $conn)\n             or die('Error:' .mysql_error());\n?&gt;\n\n&lt;div class=\"caption\"&gt;Search Results&lt;/div&gt;\n&lt;div class=\"center_div\"&gt;\n&lt;table&gt;\n    &lt;?php while ($row= mysql_fetch_array($result, MYSQL_ASSOC)) {\n        $cQuote =  highlightWords(htmlspecialchars($row['cQuotes']), $search_result);\n        ?&gt;\n        &lt;tr&gt;\n        &lt;td style=\"text-align:right; font-size:15px;\"&gt;&lt;?php h($row['cArabic']); ?&gt;&lt;/td&gt;\n            &lt;td style=\"font-size:16px;\"&gt;&lt;?php echo $cQuote; ?&gt;&lt;/td&gt;\n            &lt;td style=\"font-size:12px;\"&gt;&lt;?php h($row['vAuthor']); ?&gt;&lt;/td&gt;\n            &lt;td style=\"font-size:12px; font-style:italic; text-align:right;\"&gt;&lt;?php h($row['vReference']); ?&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;?php } ?&gt;\n&lt;/table&gt;\n&lt;/div&gt;\n\n&lt;?php\n   //Create and print the Navigation bar\n       $nav=\"\";\n       if($page &gt; 1) {\n            $nav .= \"&lt;a href=\\\"search.php?page=\" . ($page-1) . \"&amp;string=\" .urlencode($search_result) . \"\\\"&gt;&lt;&lt; Prev&lt;/a&gt;\";\n        }\n\n       for($i = 1 ; $i &lt;= $numpages ; $i++) {\n            if($i == $page) {\n                $nav .= \"&lt;B&gt;$i&lt;/B&gt;\";\n            }else{\n                $nav .= \"&lt;a href=\\\"search.php?page=\" . $i . \"&amp;string=\" .urlencode($search_result) . \"\\\"&gt;$i&lt;/a&gt;\";\n            }\n        }\n\n        if($page &lt; $numpages) {\n            $nav .= \"&lt;a href=\\\"search.php?page=\" . ($page+1) . \"&amp;searchstring=\" .urlencode($search_result) . \"\\\"&gt;Next &gt;&gt;&lt;/a&gt;\";\n        }\n\n        echo \"&lt;br /&gt;&lt;br /&gt;\" . $nav;\n\n\n    }\n    }\n    else {\n        exit();\n    } \n\n?&gt;\n</code></pre>\n"},{"tags":["mysql","sql","wordpress","query","posts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":43,"score":-1,"question_id":13071035,"title":"SQL query to extract all WordPress posts with categories","body":"<p>I need to extract all posts from my WordPress DB along with the associated categories and not sure how to write this query. I've taken a couple of stabs at it already with no joy and would appreciate the help?</p>\n\n<p><strong>EDIT: Here's what I have tried already:</strong></p>\n\n<pre><code>SELECT post_title, wpr.object_id, wp_terms.name\nFROM wp_terms\nINNER JOIN wp_term_taxonomy ON wp_terms.term_id = wp_term_taxonomy.term_id\nINNER JOIN wp_term_relationships wpr ON wpr.term_taxonomy_id = \nwp_term_taxonomy.term_taxonomy_id\nINNER JOIN wp_posts ON ID = wpr.object_id\nWHERE taxonomy = 'category' \nAND post_type = 'post' \nORDER by post_title\n</code></pre>\n\n<p>This seems to work but it returns 1,553 where I know I only have 1343 in my DB.</p>\n\n<p><strong>EDIT:</strong> \nWe did the same thing on another SQL query a little while ago and found that it was pulling in the revisions and other post types but thought that this was resolved using post_type = 'post'</p>\n\n<p><strong>EDIT:</strong>\nUpon looking at the number of categories in the DB, I come up with a total number of 216, 6 off the number if you subtract 1553 - 1343 = 216. So I think this total number of 1553 is coming from the wp_terms table which needs to be excluded and only those that are active with published posts should be shown?</p>\n\n<p><strong>EDIT:</strong>\nThe other possibility is that each post can have multiple categories, hence the reason for having more posts (1553). So how could I separate each posts into multiple categories?</p>\n\n<p>Many thanks!</p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13262558,"title":"How to merge MySQL data","body":"<p>There are two schemas in MySQL. For example <code>db1</code> and <code>db2</code>.</p>\n\n<p>They have same structure of tables and different data to each other.</p>\n\n<p>Now I want to merge data on <code>db1</code> with data on <code>db2</code>.</p>\n\n<p>I tried below:</p>\n\n<ol>\n<li><p><code>mysqldump</code> from <code>db1</code> with no drop table option.</p></li>\n<li><p>Import dumpfile into <code>db2</code> to use RESOURCE command.</p></li>\n</ol>\n\n<p>But it didn’t work, nothing was added?</p>\n"},{"tags":["php","mysql","sql","date"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13192083,"title":"combining results of 3 queries in one result","body":"<p>i have 3 queries and i want all result be in only one result using array_merge and array_unique.</p>\n\n<p>here's the queries:</p>\n\n<pre><code>            $query1 = mysql_query(\"SELECT * FROM prereservation where '$arival' BETWEEN arrival and departure and room_id ='11' and status = 'active'\");  \n        while($rows1 = mysql_fetch_assoc($query1)){\n        echo $rows1['id']. \" - \". $rows1['qty'];\n        echo \"&lt;br /&gt;\";\n        }\n\n        $query2 = mysql_query(\"SELECT * FROM prereservation where '$departure' BETWEEN arrival and departure and room_id ='11' and status = 'active'\");\n        while($rows2 = mysql_fetch_assoc($query2)){\n        echo $rows2['id']. \" - \". $rows2['qty'];\n        echo \"&lt;br /&gt;\";\n        }\n\n        $query3 = mysql_query(\"SELECT * FROM prereservation where arrival &gt; '$arival' and departure &lt; '$departure' and room_id ='11' and status = 'active'\");\n        while($rows3 = mysql_fetch_assoc($query3)){\n        echo $rows3['id']. \" - \". $rows3['qty'];\n        echo \"&lt;br /&gt;\";\n        }\n\nexample result is:    \nfor       $rows1     |     $rows2     |     $rows3\n        id  |  qty   |   id  |  qty   |   id  |  qty\n       -----|--------|-------|--------|-------|------\n        01  |   1    |   01  |   1    |   02  |   1\n        03  |   1    |   02  |   1    |   03  |   1\n        04  |   1    |   03  |   1    |   04  |   1\n        08  |   1    |   05  |   1    |   05  |   1\n</code></pre>\n\n<p>i dont know if this is right? </p>\n\n<pre><code>$sample = array_unique(array_merge($rows1['id'], $rows2['id'], $rows3['id']))\n</code></pre>\n\n<p>i want to use array_merge and array_unique for id's of each results\nso the final result for id's that will be left is </p>\n\n<pre><code>01, 02, 03, 04, 05, 08.\n</code></pre>\n\n<p>and for the next query all i want is the sum(qty) of those id's.\nbut i don't know how to write a query for this, here's my sample:</p>\n\n<pre><code>$query = mysql_query(\"SELECT sum(qty) FROM prereservation where id = $sample\");\n\n        while($rows = mysql_fetch_array($query))\n          {\n          $total_qty = $rows['sum(qty)'];\n          }     \n</code></pre>\n\n<p>so the sum(qty) is equal to 6.\nplease correct my mistakes for coding, thanks guys...</p>\n\n<p><strong>Finally i found the solution, here it is..</strong></p>\n\n<pre><code>$a = $p['id'];\n        $query1 = mysql_query(\"SELECT DISTINCT id, SUM(qty)\n        FROM prereservation \n        WHERE \n        (\n            ( '$arival1' BETWEEN arrival AND departure ) OR \n            ( '$departure1' BETWEEN arrival AND departure ) OR \n            ( arrival &gt; '$arival1' AND departure &lt; '$departure1' )\n        )\n            AND room_id ='$a' \n            AND STATUS = 'active'\");  \n        while($rows1 = mysql_fetch_assoc($query1)){\n        $set1 = $rows1['SUM(qty)'];\n        }   \n        ?&gt; \n        &lt;select id=\"select\" name=\"qty[]\" style=\" width:50px;\" onchange=\"checkall()\"&gt;\n        &lt;option value=\"0\"&gt;&lt;/option&gt;\n        &lt;? $counter = 1; ?&gt;\n        &lt;? while ($counter &lt;= ($p['qty']) - $set1){ ?&gt;\n        &lt;option value=\"&lt;?php echo $counter ?&gt;\"&gt;&lt;?php echo $counter ?&gt;&lt;/option&gt;\n        &lt;? $counter++;\n        }?&gt;\n        &lt;/select&gt;\n</code></pre>\n\n<p><strong>solution was made by combining all of your answers, thank you guys..</strong></p>\n"},{"tags":["php","mysql","date","datetime","timezone"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13264846,"title":"convert timezone to another timezone","body":"<p>I want to convert the date I fetched from the database, which is generated via <code>CURRENT_TIMESTAMP</code> and stored in a <code>timestamp</code> column type, from GMT+8 to GMT+1.</p>\n\n<pre><code>$time = \"2012-11-07 15:05:26\"; // fetch from database\n$date = new DateTime($time, new DateTimeZone('Europe/Berlin'));\necho $date-&gt;format('Y-m-d H:i:s');\n</code></pre>\n\n<p>However this will yield an output of <strong>\"2012-11-07 15:05:26\"</strong>, which I'm pretty sure is wrong.</p>\n\n<p>What could be I'm missing in here?</p>\n"},{"tags":["php","mysql"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":11686805,"title":"echo info from a database as a link","body":"<p>is it possible to echo info from a database as a link, I tried the code below but got a parse error. is there some other way of doing it. Thanks</p>\n\n<pre><code>&lt;?php\nsession_start();\nif(isset($_SESSION['email'])){\n\n    $connect = mysql_connect(\"localhost\",\"root\",\"\") or die(\"Couldn't connect!\");\n    mysql_select_db(\"test\") or die(\"Couldn't find database\");\n    $email=$_SESSION['email'];\n    $sql = mysql_query(\"SELECT *  FROM users WHERE email='$email'\");\n    $info = mysql_fetch_assoc($sql);\n\necho\"&lt;a href='home.php'&gt; $info['firstname']&lt;/a&gt;\"\n   }\n\n      ?&gt;\n</code></pre>\n"},{"tags":["php","mysql","sql","query"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13242249,"title":"Sorting mysql results by times from 3 tables","body":"<p>I have 3 tables: <code>questions</code>, <code>articles</code> and <code>pictures</code></p>\n\n<p>The rows in each table contain a current_timestamp column <code>posted</code>, and link to an id. I'd like to sort the results of the rows of all three by their timestamp and only echo the newest of the three (for example: if the question is newest from the ID, display that only)</p>\n\n<pre><code>if(count($interests) != 0){ foreach($interests as $interests_following){\n    $interestid = mysql_result(mysql_query(\"SELECT `id` FROM `interests` WHERE `name` = '$interests_following'\"),0);\n    $interestquestions = @mysql_result(mysql_query(\"SELECT `question_text`, `posted` FROM `questions` WHERE `interest` = '$interests_following'\"),0);\n    $interestarticles = @mysql_result(mysql_query(\"SELECT `article_title`, `posted` FROM `articles` WHERE `interest_id` = '$interestid'\"),0);\n    $interestpictures = @mysql_result(mysql_query(\"SELECT `interest_pic_title`, `posted` FROM `interest_pictures` WHERE `interest_id` = '$interestid'\"),0);\n\necho '.$interests_following.': //&lt;Only display 1 newest item (article/picture/question here&gt;\n</code></pre>\n"},{"tags":["asp.net","mysql","database","books"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":16,"score":-2,"question_id":13264998,"title":"mysql book for beginner","body":"<p>I have searched for a book for mysql and found that most of the books use php/perl for examples in the book.\nCan any one help me with a book on <strong>mysql</strong> that uses <strong>asp.net</strong> with examples?</p>\n"},{"tags":["php","mysql","database-design","open-source","erp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13265218,"title":"ERP Database Design and Architecture","body":"<p>Looking for any OpenSource ERP based in PHP - mainly to understand how to do Database Design and Architecture for the same. </p>\n\n<p>We are building a custom ERP to maintain a Shoe Manufacturing Unit and looking for a starting point where we can understand what details will go into place in building the ERP.</p>\n\n<p>What i am looking for is </p>\n\n<ol>\n<li>Architecture </li>\n<li>Database Design</li>\n</ol>\n\n<p>Do we need to Use a NoSQL based system or MySQL is a good choice</p>\n"},{"tags":["java","mysql","hibernate","flex"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13249620,"title":"How to select multiple values from Database using Hibernate IN key word?","body":"<p>I have Sample applicaion Flex+Java(using mysql database).\nActually i'm sending search result from flex to java method it is working one value.</p>\n\n<pre><code>for ex: we are giving flex textbox value---- \"java\" ------it is working fine \n</code></pre>\n\n<p>but we are giving more then two keywords <code>forex: java,flex</code>----it is not working</p>\n\n<p>Here is mysql query:</p>\n\n<pre><code>from Course where coursename in (:name)\n</code></pre>\n\n<p>and setting parameter....</p>\n"},{"tags":["php","mysql","sql","date"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":94,"score":1,"question_id":13089536,"title":"Query for hotel reservation","body":"<p>I have three queries in a hotel reservation system where reserves are automatic deducted from the total number of rooms. All I want those three queries goes all in only one query. My query looks like this: </p>\n\n<p><code>$p =</code> is in a <code>foreach</code> loop where <code>$p['id']</code> is the <em>id</em> of each room class and <code>$p['qty']</code> is the maximum rooms of each room class.</p>\n\n<pre><code>$a = $p['id'];\n$query = mysql_query(\"SELECT sum(qty) FROM prereservation where '$arrival' BETWEEN arrival and departure and room_id ='$a' and status = 'active'\");\n        while($rows = mysql_fetch_array($query))\n          {\n          $inogbuwin=$rows['sum(qty)'];\n          }\n$query = mysql_query(\"SELECT sum(qty) FROM prereservation where departure BETWEEN '$arrival' and '$departure' and room_id ='$a' and status = 'active'\");\n        while($rows = mysql_fetch_array($query))\n          {\n          $inogbuwin2=$rows['sum(qty)'];\n          }\n$query = mysql_query(\"SELECT sum(qty) FROM prereservation where '$departure' BETWEEN arrival and departure and room_id ='$a' and status = 'active'\");\n        while($rows = mysql_fetch_array($query))\n          {\n          $inogbuwin3=$rows['sum(qty)'];\n          }\n\n&lt;select&gt;\n &lt;option value=\"0\"&gt;&lt;/option&gt;\n &lt;? $counter = 1; ?&gt;\n &lt;? while ($counter &lt;= ($p['qty'])-($inogbuwin + $inogbuwin2 + $inogbuwin3)){ ?&gt;\n &lt;option value=\"&lt;?php echo $counter ?&gt;\"&gt;&lt;?php echo $counter ?&gt;&lt;/option&gt;\n &lt;? $counter++;\n }?&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>Every time I put a date between the range of those three queries, the total deducted is also tripled which is the reason I want those three queries to be all in one.</p>\n\n<p>for example i have a record in database of \n<code>arrival = 27/10/2012 and departure = 29/10/2012</code></p>\n\n<p>and the input dates that are not available in range is</p>\n\n<pre><code> $arrival = 27/10/2012 and $departure = 29/10/2012 \n $arrival = 26/10/2012 and $departure = 27/10/2012 \n $arrival = 29/10/2012 and $departure = 30/10/2012 \n $arrival = 26/10/2012 and $departure = 30/10/2012 \n $arrival = 29/10/2012 and $departure = 29/10/2012 \n</code></pre>\n\n<p>so each date that in rance of those three queries are also the deductions, so i want those queries to be in one. thanks guys</p>\n\n<p>after all i fixed the errors but only one preblem left. i fixed the reservation dates in only a single month, the problem is when the inputs of arrival and departure are not in the same month it does'nt work either. here's my code again below.</p>\n\n<pre><code>&lt;?\n$a = $p['id'];\n    $query = mysql_query(\"SELECT\n    SUM(IF('$arrival' BETWEEN arrival and departure, qty, 0)) AS bu1,\n    SUM(IF('$departure' BETWEEN arrival and departure, qty, 0)) AS bu2,\n    SUM(IF(arrival &gt; '$arrival' and departure &lt; '$departure', qty, 0)) AS bu3\n    FROM prereservation WHERE room_id ='$a' and status = 'active'\");\n    $row = mysql_fetch_array($query);\n\n    $test1 = $row['bu1'];\n    if ($row['bu1'] == $row['bu2']){\n        $test2 = $row['bu2'] - $row['bu1'];\n    }else{\n        $test2 = $row['bu2'];\n    }       \n        $test3 = $row['bu3'];\n    ?&gt;      \n&lt;select id=\"select\" name=\"qty[]\" style=\" width:50px;\" onchange=\"checkall()\"&gt;\n&lt;option value=\"0\"&gt;&lt;/option&gt;\n    &lt;? $counter = 1; ?&gt;\n&lt;? while ($counter &lt;= ($p['qty']) - ($test1 + $test2 + $test3)){ ?&gt;\n    &lt;option value=\"&lt;?php echo $counter ?&gt;\"&gt;&lt;?php echo $counter ?&gt;&lt;/option&gt;\n    &lt;? $counter++;\n    }?&gt;\n</code></pre>\n\n<p>please help me guys how to solve this reservation query, or maybe there's an other way to solve this in php code. thanks guys.</p>\n\n<p><strong>Finally i'm finished and found the solution, here it is:</strong></p>\n\n<pre><code>            $a = $p['id'];\n        $query1 = mysql_query(\"SELECT DISTINCT id, SUM(qty)\n        FROM prereservation \n        WHERE \n        (\n            ( '$arival1' BETWEEN arrival AND departure ) OR \n            ( '$departure1' BETWEEN arrival AND departure ) OR \n            ( arrival &gt; '$arival1' AND departure &lt; '$departure1' )\n        )\n            AND room_id ='$a' \n            AND STATUS = 'active'\");  \n        while($rows1 = mysql_fetch_assoc($query1)){\n        $set1 = $rows1['SUM(qty)'];\n        }   \n        ?&gt; \n        &lt;select id=\"select\" name=\"qty[]\" style=\" width:50px;\" onchange=\"checkall()\"&gt;\n        &lt;option value=\"0\"&gt;&lt;/option&gt;\n        &lt;? $counter = 1; ?&gt;\n        &lt;? while ($counter &lt;= ($p['qty']) - $set1){ ?&gt;\n        &lt;option value=\"&lt;?php echo $counter ?&gt;\"&gt;&lt;?php echo $counter ?&gt;&lt;/option&gt;\n        &lt;? $counter++;\n        }?&gt;\n        &lt;/select&gt;\n</code></pre>\n\n<p><strong>thank you guys for sharing your ideas, this solution is the combinations of your answers.. thanks again!!</strong></p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13264735,"title":"#1111 - Invalid use of group function while getting data from two or more tables","body":"<p>i am not able to get single value from table b in subquery which is required in outer query. in table b there is group of dates related to table a and table c. and here i required purpose code of the latest date for the successfull execution of query. if i remove subquery and write where c.purpose_code = b.purpose_code it runs ok but the result is older. \nplease help me out.</p>\n\n<pre><code>SELECT\n  a.filing_no AS \"File No\",\n  a.case_no AS \"Registration No\",\n  a.pet_name AS Petitioner,\n  a.res_name AS Accused,\n  a.dt_of_filing AS \"Date of Inst\",\n  max(b.Next_date) AS \"Next Date\",\n  c.purpose_name AS \"Case Stage\"\nFROM\n  filing_t a, Daily_proc b, Purpose_t c\nWHERE\n  a.filing_no = b.filing_no\n  AND c.purpose_code = (\n    SELECT purpose_code FROM Daily_proc\n    WHERE filing_no = a.filing_no AND next_date = max(next_date)\n    )\n  AND a.court_no = 1\n  AND a.ci_cri = 2\n  AND a.status = 'P'\nGROUP BY\n  b.filing_no\nORDER BY\n  a.dt_of_filing DESC\nLIMIT\n  0, 2000\n</code></pre>\n"},{"tags":["php","mysql","pdo","parameter-passing","session-variables"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13265072,"title":"Passing PHP Session variable through MySQL command in PDO","body":"<p>I have the following code in PHP. I am trying to pass the log-in value from the session variable into my SELECT command in my database. The ? represents the log-in created in the session. :\n</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>try {    \n    $conn = new PDO(A_DB_HOST, A_DB_USER, A_DB_PASSWORD);\n    $conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n} catch (PDOException $e) {\n    echo 'Connection failed: ' . $e-&gt;getMessage();\n}\n$member['login'] = $_SESSION['SESS_login'];\n$qry=$conn-&gt;prepare(\"SELECT * FROM {?}_clients WHERE login=?\");\n$qry-&gt;bindParam(1, $_SESSION['SESS_login']);\n$qry-&gt;execute();\n</code></pre>\n\n<p>Currently, I am getting the following error:    </p>\n\n<blockquote>\n  <p>Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens' in /home/content/14/9957114/html/agent-member-index.php:15 Stack trace: #0 /home/content/14/9957114/html/agent-member-index.php(15): PDOStatement->execute() #1 {main} thrown in /home/content/14/9957114/html/agent-member-index.php on line 15</p>\n</blockquote>\n\n<p>Any help is greatly appreciated!</p>\n"},{"tags":["mysql","jdbc","syntax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":301,"score":0,"question_id":1228227,"title":"jdbc program to find the square of a number using callable statement (stored procedure )","body":"<pre><code>import java .sql.*;\nclass Pro\n{\npublic static void main(String args[]) throws Exception\n{\nClass.forName(\"com.mysql.jdbc.Driver\");\nString url = \"jdbc:mysql://localhost:3306/test\";\nConnection conn = DriverManager.getConnection (url,\"root\",\"password\");\nCallableStatement cst=conn.prepareCall(\"{call fileproc(?,?)}\");\ncst.setInt(1,10);\ncst.registerOutParameter(2,Types.INTEGER);\ncst.execute();\nint i=cst.getInt(2);\nSystem.out.println(\"the number is :\" +i);\ncst.close();\nconn.close();\n}\n}\n</code></pre>\n\n<p>In MYSQL:</p>\n\n<pre><code>fileproc:\nCREATE  PROCEDURE fileproc(IN x INT,OUT y INT)\nBEGIN\ny := x * x;\nEND;\n/\n</code></pre>\n\n<p>i'm getting an error at line 3 before entering END in fileproc as</p>\n\n<pre><code>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that\ncorresponds to your MySQL server version for the right syntax to use near ':= x\n* x' at line 3.\n</code></pre>\n\n<p>what is the correct syntax?\nplease help.\nThank You.</p>\n"},{"tags":["php","mysql","ajax","select"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13264965,"title":"Return value from select box","body":"<p>I have 3 select boxes drop_1,drop_2 and drop_3. The last 2 are added dynamically on the selection of the previous one. create_promo.php is the page that loads all the boxes. But i have used func.php to load dynamic select boxes.Hence I am not getting drop_2 and drop_3 values in my form processing page promo_process.php called by create_promo.php.I want to send back my drop_2 and drop_3 values back to my create_promo.php. </p>\n\n<p><strong>create_promo.php</strong></p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n$(document).ready(function() {\n$('#wait_1').hide();\n$('#drop_1').change(function(){\n$('#wait_1').show();\n$('#result_1').hide();\n    $.get(\"func.php\", {\n    func: \"drop_1\",\n    drop_var: $('#drop_1').val()\n    }, function(response){\n    $('#result_1').fadeOut();\n        setTimeout(\"finishAjax('result_1', '\"+escape(response)+\"')\", 400);\n    });\nreturn false;\n});\n});\n\nfunction finishAjax(id, response) {\n    $('#wait_1').hide();\n    $('#'+id).html(unescape(response));\n    $('#'+id).fadeIn();\n}\nfunction finishAjax_tier_three(id, response) {\n    $('#wait_2').hide();\n    $('#'+id).html(unescape(response));\n    $('#'+id).fadeIn();\n}\n&lt;/script&gt;\n\n&lt;form action=\"promo_process.php\" method=\"post\"&gt;\n&lt;tr&gt;\n    &lt;td class=\"normalfont\"&gt;SELECTION 1&lt;/td&gt;\n    &lt;td&gt;\n        &lt;select name=\"drop_1\" id=\"drop_1\"&gt;\n        &lt;option value=\"\" selected=\"selected\" disabled=\"disabled\"&gt;Select 1&lt;/option&gt;\n        &lt;?php getTierOne(); ?&gt;\n        &lt;/select&gt;\n    &lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;    \n     &lt;td class=\"normalfont\"&gt;SELECTION 2&lt;/td&gt;    \n &lt;td&gt;\n     &lt;span id=\"wait_1\" style=\"display: none;\"&gt;\n     &lt;img alt=\"Please Wait\" src=\"images/ajax-loader.gif\"/&gt;\n     &lt;/span&gt;\n     &lt;span id=\"result_1\" style=\"display: none;\"&gt;&lt;/span&gt;\n     &lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n     &lt;td class=\"normalfont\"&gt;SELECTION 3:&lt;/td&gt;\n &lt;td&gt;\n    &lt;span id=\"wait_2\" style=\"display: none;\"&gt;\n        &lt;img alt=\"Please Wait\" src=\"images/ajax-loader.gif\"/&gt;\n    &lt;/span&gt;\n    &lt;span id=\"result_2\" style=\"display: none;\"&gt;&lt;/span&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/form&gt;\n&lt;?php\n     include('connect.php');\n     function getTierOne()\n     {\n         $result = mysql_query(\"SELECT s_name FROM selection1\") or die(mysql_error());\n         while($tier = mysql_fetch_array( $result )) \n     {\n         echo '&lt;option value=\"'.$tier['s_name'].'\"&gt;'.$tier['s_name'].'&lt;/option&gt;';\n         }\n     }\n?&gt;\n</code></pre>\n\n<p><strong>func.php</strong></p>\n\n<pre><code>&lt;?php\n     include('connect.php');\n     if($_GET['func'] == \"drop_1\" &amp;&amp; isset($_GET['func'])) {\n          drop_1($_GET['drop_var']); \n     }\n     function drop_1($drop_var)\n     {\n          $result = mysql_query(\"SELECT DISTINCT a_name FROM select_2 WHERE s_id=(select s_id from s_name where s_name='$drop_var')\") or die(mysql_error());\n          echo '&lt;select name=\"drop_2\" id=\"drop_2\"&gt;\n                   &lt;option value=\" \" disabled=\"disabled\" selected=\"selected\"&gt;Select 2&lt;/option&gt;\n                   &lt;option value=\"ALL\" &gt;ALL&lt;/option&gt;';\n          while($drop_2 = mysql_fetch_array( $result ))\n          {\n              echo '&lt;option value=\"'.$drop_2['a_name'].'\"&gt;'.$drop_2['a_name'].'&lt;/option&gt;';\n          }\n      echo '&lt;/select&gt;';\n      echo \"&lt;script type=\\\"text/javascript\\\"&gt;\n       $('#wait_2').hide();\n       $('#drop_2').change(function(){\n       $('#wait_2').show();\n       $('#result_2').hide();\n               $.get(\\\"func.php\\\", {\n            func: \\\"drop_2\\\",\n            drop_var: $('#drop_2').val()\n               }, function(response){\n               $('#result_2').fadeOut();\n               setTimeout(\\\"finishAjax_tier_three('result_2', '\\\"+escape(response)+\\\"')\\\", 400);\n               });\n           return false;\n           });\n           &lt;/script&gt;\";\n   }\n   if($_GET['func'] == \"drop_2\" &amp;&amp; isset($_GET['func'])) {\n          drop_2($_GET['drop_var']);\n   }\n   function drop_2($drop_var)\n   {\n          if($drop_var==\"ALL\")\n              $result = mysql_query(\"SELECT DISTINCT h_name FROM select_3\")or die(mysql_error());\n      else  \n      $result = mysql_query(\"SELECT DISTINCT h_name FROM select_3 WHERE a_id=(select a_id from select_2 where a_name='$drop_var')\")or die(mysql_error());\n      echo '&lt;select name=\"drop_3\" id=\"drop_3\"&gt;\n                &lt;option value=\" \" disabled=\"disabled\" selected=\"selected\"&gt;Select 3&lt;/option&gt;\n            &lt;option value=\"ALL\"&gt;ALL&lt;/option&gt;';\n      while($drop_3 = mysql_fetch_array( $result ))\n     {\n    echo '&lt;option value=\"'.$drop_3['h_name'].'\"&gt;'.$drop_3['h_name'].'&lt;/option&gt;';\n         }\n     echo '&lt;/select&gt; ';\n   }\n\n?&gt;\n</code></pre>\n\n<p><strong>promo_process.php</strong></p>\n\n<pre><code>&lt;?php\ninclude 'connect.php';\n$errmsg = array(); //Array to store errors\n$errflag = false; //Error flag\n\n$drop = mysql_real_escape_string($_POST['drop_1']);\n$drop_2 = mysql_real_escape_string($_POST['drop_2']);\n$drop_3 = mysql_real_escape_string($_POST['drop_3']);\nif($drop== ' ' &amp;&amp; $drop_2== ' ' &amp;&amp; $drop_3==' ')\n{\n    $errmsg[] = 'SELECT PLEASE'; //Error\n    $errflag = true; //Set flag so it says theres an error\n}\n\nif($errflag) {\n    $_SESSION['ERRMSG'] = $errmsg; //Write errors\n    session_write_close(); //Close session\n    header(\"location: create_promo.php\"); //Rediect\n    exit(); //Block scripts\n}\n?&gt;\n</code></pre>\n\n<p>I'm getting error saying \"Undefined index drop_1 and drop_2\" in promo_process.php. How do i retain those values?</p>\n"},{"tags":["mysql","foreign-keys","sqlalchemy","sqlalchemy-migrate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13120214,"title":"Drop duplicate foreign keys with SQLAlchemy Migrate","body":"<p>By mistake I added two foreign keys referring to the same table and column. The <code>SHOW CREATE TABLE table_a</code> look like:</p>\n\n<pre><code>table_a | CREATE TABLE `table_a` (\n`id` char(36) NOT NULL,\n`fk` int(11) default NULL,\n`created_at` datetime default NULL,\nPRIMARY KEY  (`id`),\nKEY `fk` (`fk`),\nCONSTRAINT `table_a_ibfk_1` FOREIGN KEY (`fk`) REFERENCES `table_b` (`id`),\nCONSTRAINT `table_a_fkey` FOREIGN KEY (`fk`) REFERENCES `table_b` (`id`) ON DELETE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8\n</code></pre>\n\n<p>My only solution at this point is to iterate over all the keys/constraints on the column and remove them followed by adding the cascade key one more time. </p>\n\n<p>Is there a way to remove only the non-cascade constraint using <a href=\"http://sqlalchemy-migrate.readthedocs.org/\" rel=\"nofollow\">SQLAlchemy Migrate</a>?</p>\n"},{"tags":["mysql","sql","sql-server","sql-server-2008"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13263497,"title":"SQL compare strings having version as value","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6855588/split-a-string-and-return-greatest-in-mssql\">Split a string and return greatest in mssql</a>  </p>\n</blockquote>\n\n\n\n<p>I need to compare strings which have version value, for example:\nstring1 = 2.3.4\nstring2 = 2.5.6\nNow in the above case i need to check which string version is greater?</p>\n"},{"tags":["php","mysql","oop","session","handler"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":26,"score":-1,"question_id":13258311,"title":"custom database session handler - specific read issue","body":"<p>i have a very specific problem regarding a custom session handler using a mysql database. I looked through other topics since there are some topics here involving custom session handler but no one of them answered my question. \nI use a custom session handler in a class called \"sessions\":</p>\n\n<pre><code>require_once \"mySQL.php\";\n\nclass sessions {\nprivate $db;\npublic function __construct(){\n    $this-&gt;db=new mySQL('localhost', user, pw, database);\n    session_set_save_handler(array(&amp;$this,\"open\"),\n                     array(&amp;$this,\"close\"),\n                     array(&amp;$this,\"read\"),\n                     array(&amp;$this,\"write\"),\n                     array(&amp;$this,\"destroy\"),\n                     array(&amp;$this,\"gc\"));\n    register_shutdown_function('session_write_close');\n    session_start();\n} \npublic function read($sessionID){\n    $abfrage=\"SELECT * FROM sessions WHERE id='\".$sessionID.\"'\";\n    $result= $this-&gt;db-&gt;query($abfrage);\n    if ($result == false){\n        return '';\n    }\n    if (count($result) &gt; 0){\n        return $result[0][\"value\"];\n    }\n    else{ \n    return '';\n    }\n}\n</code></pre>\n\n<p>In \"mySQL.php\" there is just a class \"mySQL\" written which creates a mysqli connection to the database. This is working and not the problem. I would like to draw the focus to the \"read\" routine because this seems to be the primary problem. If i now create a session via</p>\n\n<pre><code>require_once \"classes/sessions.php\";\n$SESSION=new sessions();\n$token=hash(\"sha256\",session_id().time());\n$_SESSION['token']=$token;\n$_SESSION['running']=1\n</code></pre>\n\n<p>and write values into the session the right database value is created:</p>\n\n<pre><code>id (varchar 64) = 54ul84nhc3aimqc55efcs49js4\nlastUpdated (int 11) = 1352226239\nstart (int 11) = 1352226233\nvalue (varchar 20000) =     token|s:64:\"2b92aa848a86741ef11d800c3dce527fdcee264f50de10381941241c3d9cc9ee\";running|i:1;\n</code></pre>\n\n<p>and even the garbage collector works fine but when i reload the page and try to echo </p>\n\n<pre><code>$_SESSION['running']\n</code></pre>\n\n<p>i get the error \"Notice:Undefined index: running\". A debugger run informed that the above posted read routine returns 1 (which would be equal to the boolean \"true\"?!) instead of the value. I checked that the \"sessionID\" in the read routine for that case was the one in the session table, so i'm basically lost. It would be very nice if you can help me, because so far i'm already impressed of the possibilities offered by such custom session handler.</p>\n\n<p>Perhaps it's possible to pose also a side question here. Is it right that when i reload the page the constructor of sessions is called by \"$SESSION=new sessions();\" even when there is already a session running (however this behaviour does not change the session_id)? Or is this due to my broken session read routine?</p>\n\n<p>Thank you for your help.</p>\n\n<p>EDIT: I'm using PHP/5.4.4 and MySQL 5.5.25a in a xampp distribution along with phpmyAdmin 3.5.2 to set up the database. The session table is a table of format \"MEMORY\", that's why i'm using a varchar 20000 field instead of a text field. I just saw this article <a href=\"http://stackoverflow.com/questions/6208156/why-does-mysql-query-return-true-with-a-select-statement\">Why does mysql_query() return TRUE with a SELECT statement?</a>\nstating that a mysql_query returns true from time to time when the server interrupts connections suddenly. However i can't fiddle out what may be the reason for this.\nI'm adding now the mySQL class, perhaps a error in there is involved in this problem:</p>\n\n<pre><code>&lt;?php\nclass mySQL\n{\npublic $mySQLiObj;\npublic $lastSQLQuery;\npublic $lastSQLStatus;\npublic $lastInsertID;\npublic function __construct($server,$user,$password,$db,$port=\"3306\"){\n    //erstelle db-objekt\n    $this-&gt;mySQLiObj= new mysqli($server,$user,$password,$db,$port);\n    if (mysqli_connect_errno()){\n        echo \"Keine Verbindung zum MySQL-Server möglich.\";\n        trigger_error(\"MYSQL-Connection-Error\",E_USER_ERROR);           \n        die();\n    }\n    //Zeichensatz auf utf8 setzen\n    $this-&gt;query(\"SET NAMES utf8\");\n}\npublic function __destruct(){\n    $this-&gt;mySQLiObj-&gt;close();\n}\npublic function query($sqlQuery,$resultset=false){\n    $this-&gt;lastSQLQuery=$sqlQuery;\n    $result=$this-&gt;mySQLiObj-&gt;query($sqlQuery);\n    if($resultset == true){\n        if($result == false) {\n            $this-&gt;lastSQLStatus=false;\n        }\n        else\n        {\n            $this-&gt;lastSQLStatus = true;\n        }\n        return $result;\n    }\n    if($resultset == false) {\n        $return = $this-&gt;makeArrayResult($result);\n        return $return;\n    }\n}\nprivate function makeArrayResult($ResultObj){\n    if ($ResultObj==false){\n        //Fehler aufgetreten\n        $this-&gt;lastSQLStatus=false;\n        return false;\n    }\n    else if ($ResultObj == true) {\n        //UPDATE,INSERT etc. statement es wird nur true zurückgegeben\n        $this-&gt;lastSQLStatus = true;\n        $this-&gt;lastInsertID = $this-&gt;mySQLiObj-&gt;insert_id;\n        return true;\n    }\n    else if ($ResultObj-&gt;num_rows == 0){\n        //Kein Ergebnis bei SELECT,SHOW,DESCRIBE oder EXPLAIN Statement\n        $this-&gt;lastSQLStatus = true;\n        return array();\n    }\n    else {\n        $array = array();\n        while($line = $ResultObj-&gt;fetch_array(MYSQLI_ASSOC)){\n            array_push($array,$line);\n        }\n        $this-&gt;lastSQLStatus=true;\n        return $array;\n    }\n}\n</code></pre>\n\n<p>}\n?></p>\n"},{"tags":["mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13264486,"title":"Performance metrics for MySQL Cluster","body":"<p>What are the typical performance metrics for MySQL Cluster?</p>\n"},{"tags":["android","mysql","tomcat","servlets","nfc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13264271,"title":"How do I setup a server for android phone on my local machine?","body":"<p>I am working on a nfc project in which there is a need of client-server model.</p>\n\n<p>The Actual scenario is, when my Tag is tapped, the data in tag should proceed to the server and server then looks-up in database for that particular key data in tag and sends related information back to my android phone as a response.</p>\n\n<p>I have Apache Tomcat, Eclipse Helios and Eclipse Indigo, currently I'm thinking of get it done using servlet? But little confused as I am totally new to this scenario. Kindly guide me.\nThanks in advanced.</p>\n"},{"tags":["mysql","foreign-keys"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":20,"score":2,"question_id":13264085,"title":"error 121 mysql with constraints","body":"<p>I am trying to re define my database design adding some extra tables so There are no repeated names for example in my table Departaments and Jobs...</p>\n\n<p>But I am getting the error 121 which has to do with foreign keys, can you explain why is this problem?</p>\n\n<p><a href=\"http://sqlfiddle.com/#!2/dfaff\" rel=\"nofollow\">I am doing this in sqlfiddle</a></p>\n\n<p>I am trying to do something like this but had no luck in sqlfiddle there is what i have working at the moment</p>\n\n<pre><code> CREATE TABLE Employee(\n          EmployeeID  INTEGER      NOT NULL PRIMARY KEY,\n          Name        VARCHAR(30)  NOT NULL,\n          Sex         CHAR(1)      NOT NULL,\n          Address     VARCHAR(80)  NOT NULL,\n          Security    VARCHAR(15)  NOT NULL          \n        );\n\n        CREATE TABLE Departments  (\n            DeptID   INTEGER     NOT NULL PRIMARY KEY,\n            DeptName VARCHAR(30) NOT NULL\n        );\n</code></pre>\n\n<p>If I uncomment the code I get\n<strong>Schema Creation Failed: Can't create table 'db_2_2bf4a.project-employee' (errno: 121):</strong></p>\n\n<pre><code>        CREATE TABLE `Dept-Employee`(\n          EmployeeID   INTEGER NOT NULL,          \n          DeptID       INTEGER NOT NULL,\n          CONSTRAINT fk_DeptID     FOREIGN KEY (DeptID)  REFERENCES Departments(DeptID),\n          CONSTRAINT fk_EmployeeID FOREIGN KEY (EmployeeID) REFERENCES Employee(EmployeeID)\n        );\n\n       CREATE TABLE `Dept-Manager`(\n          EmployeeID   INTEGER NOT NULL,          \n          DeptID       INTEGER NOT NULL,\n          CONSTRAINT fk_DeptID     FOREIGN KEY (DeptID)  REFERENCES Departments(DeptID),\n          CONSTRAINT fk_EmployeeID FOREIGN KEY (EmployeeID) REFERENCES Employee(EmployeeID)\n        );\n\n        CREATE TABLE Jobs (\n            JobID            INTEGER      NOT NULL PRIMARY KEY,\n            JobName          VARCHAR(30)  NOT NULL,\n            JobSalary        DOUBLE(15,3) NOT NULL default '0.000', \n            JobSalaryperDay  DOUBLE(15,3) NOT NULL default '0.000', \n            DeptID           INTEGER      NOT NULL\n        );\n\n        CREATE TABLE `Jobs-Employee`(\n          EmployeeID   INTEGER NOT NULL,\n          JobID        INTEGER NOT NULL,\n          CONSTRAINT fk_JobID      FOREIGN KEY (JobID)      REFERENCES Jobs(JobID),\n          CONSTRAINT fk_EmployeeID FOREIGN KEY (EmployeeID) REFERENCES Employee(EmployeeID)\n        );\n\n        CREATE TABLE Project(\n          ProjectID    INTEGER NOT NULL PRIMARY KEY,\n          ProjectDesc   VARCHAR(200) NOT NULL,\n          StartDate     DATE NOT NULL,\n          EndDate       DATE NOT NULL, \n          DaysOfWork    INTEGER NOT NULL,\n          NoEmployees   INTEGER NOT NULL,\n          EstimatedCost DOUBLE(15,3) NOT NULL default '0.000', \n          RealCost      DOUBLE(15,3) NOT NULL default '0.000' \n        );\n\n\n        CREATE TABLE `Project-Employee`(\n          ProjectID    INTEGER NOT NULL,\n          EmployeeID   INTEGER NOT NULL,\n          Note         VARCHAR(200),\n          DaysWork     INTEGER NOT NULL,\n          CONSTRAINT fk_ProjectID  FOREIGN KEY (ProjectID)  REFERENCES Project(ProjectID),\n          CONSTRAINT fk_EmployeeID FOREIGN KEY (EmployeeID) REFERENCES Employee(EmployeeID)\n        );\n</code></pre>\n\n<p>So after I do not know if this queries would be correct</p>\n\n<pre><code>INSERT INTO `Departments` VALUES (1, 'Outsourcing');\n    INSERT INTO `Departments` VALUES (2, 'Technician');\n    INSERT INTO `Departments` VALUES (3, 'Administrative');\n\n    INSERT INTO `Jobs` VALUES (1, 'welder'    ,500.550,16.7 ,2);\n    INSERT INTO `Jobs` VALUES (2, 'turner'    ,500.100,16.67,2);\n    INSERT INTO `Jobs` VALUES (3, 'assistant' ,650.100,21.67,2);\n    INSERT INTO `Jobs` VALUES (4, 'supervisor',800.909,26.70,3);\n    INSERT INTO `Jobs` VALUES (5, 'manager'   ,920.345,30.68,3);\n    INSERT INTO `Jobs` VALUES (6, 'counter'   ,520.324,17.35,1);\n\n    INSERT INTO `Dept-Employee` (10,1);\n    INSERT INTO `Dept-Employee` (10,2);\n    INSERT INTO `Dept-Employee` (10,3);\n    INSERT INTO `Dept-Employee` (10,1);\n    INSERT INTO `Dept-Employee` (10,3);\n\n    INSERT INTO `Jobs-Employee` (10,3);\n    INSERT INTO `Jobs-Employee` (10,3);\n    INSERT INTO `Jobs-Employee` (10,4);\n    INSERT INTO `Jobs-Employee` (10,6);\n    INSERT INTO `Jobs-Employee` (10,5);\n\n    INSERT INTO `Employee` VALUES (10, 'Joe',  'M', 'Anywhere', '927318344');\n    INSERT INTO `Employee` VALUES (20, 'Moe',  'M', 'Anywhere', '827318322');\n    INSERT INTO `Employee` VALUES (30, 'Jack', 'M', 'Anywhere', '927418343');\n    INSERT INTO `Employee` VALUES (40, 'Marge','F', 'Evererre', '127347645');\n    INSERT INTO `Employee` VALUES (50, 'Greg' ,'M', 'Portland', '134547633');\n\n\n    INSERT INTO `Project` VALUES (1, 'The very first', '2008-7-04' , '2008-7-24' , 20, 5, 3000.50, 2500.00);\n    INSERT INTO `Project` VALUES (2, 'Second one pro', '2008-8-01' , '2008-8-30' , 30, 5, 6000.40, 6100.40);\n\n\n    INSERT INTO `Project-Employee` VALUES (1, 10, 'Worked all days'    , 20);\n    INSERT INTO `Project-Employee` VALUES (1, 20, 'Worked just in defs', 11);\n    INSERT INTO `Project-Employee` VALUES (1, 30, 'Worked just in defs', 17);\n    INSERT INTO `Project-Employee` VALUES (1, 40, 'Contability '       , 8);\n    INSERT INTO `Project-Employee` VALUES (1, 50, 'Managed the project', 8);\n</code></pre>\n"},{"tags":["mysql","database","database-design"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13263149,"title":"How to handle translations for many languages with many different contexts?","body":"<p>Forever i have been doing my translations in the same table where object/element is created.<br>\nSo for example if i work with posts and title of post needs a translation i do this -> <code>post_title_en</code>, <code>post_title_fr</code>, <code>post_title_nl</code>.<br>\nWell, this is quite terrible way to maintain application, you have to hard code in a lot of stuff in your code.</p>\n\n<p>So i'm writing an application at the moment and i would like to break out of this bad habit to translate like this. </p>\n\n<p>How would i approach translations if i don't know what kind of data length i have to hold in table fields?</p>\n\n<p>I could have translation for <code>post_title</code> witch typically would be <code>varchar(255)</code> and i could have something like <code>post_content</code> witch typically would be <code>text</code>. And how would i reference all this with main object? </p>\n\n<p>Any pointers are welcome. Thanks. </p>\n"},{"tags":["php","mysql","variables","pdo","sqlbindparameter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13264216,"title":"Checking variables against MySQL data using PDO and PHP","body":"<p>I have the following variables that were inputted in the previous login form and submitted:<br>\n</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>$login = $_POST['login'];\n$password = $_POST['password'];\n</code></pre>\n\n<p>I connect to my MySQL Database using a PDO as follows:<br>\n</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>require_once('agent-config.php');\n    try {\n$conn = new PDO(A_DB_HOST, A_DB_USER, A_DB_PASSWORD);\n$conn-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n} catch (PDOException $e) {\necho 'Connection failed: ' . $e-&gt;getMessage();\n}\n</code></pre>\n\n<p>Next, I use the variables $login and $password to select the matching username and password:\n</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>//Create SELECT query    \n$qry = $conn-&gt;prepare(\"SELECT * FROM members WHERE login=? AND passwd=?\");\n    $qry-&gt;bindParam(1, $login);\n    $qry-&gt;bindParam(2, $password);\n</code></pre>\n\n<p>Lastly, I check whether the query was successful or not using:\n</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>//Check whether the query was successful or not\n    if($qry-&gt;execute())\n    $count = $qry-&gt;rowCount();\n    echo $count;\n    print_r($qry);\n    if($count &gt;0) {\n        //Login Successful\n        session_regenerate_id();\n        $member = $qry-&gt;fetch(POD::FETCH_ASSOC);\n        $_SESSION['SESS_AGENT_ID'] = $member['member_id'];\n        $_SESSION['SESS_login'] = $member['login'];\n        session_write_close();\n        header(\"location: agent-member-index.php\");\n        exit();\n    }else {\n        //Login failed\n        header(\"location: login-failed.php\");\n        exit();\n    }\n</code></pre>\n\n<p>However, the login and password are not being passed through correctly, and my result for $count is 0. I know one problem is that the password stored in the database is the .md5 encrypted version of the password, so I tried changing <code>$password</code> to<br>\n</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>$password = '.md5($_POST['password']).';   \n</code></pre>\n\n<p>but I received errors T-STRING errors. Any help would be greatly appreciated!</p>\n"},{"tags":["mysql","sql","query"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13263615,"title":"sql error(1242) : sub query returns more than 1 row","body":"<p>i have two tables <code>a_daily</code> and <code>o_daily_lcsgeneration</code>:</p>\n\n<p>i am trying this query : </p>\n\n<pre><code>update a_daily\nset\n  a_daily.Turbine_Generation =  \n   (\n     select sum(o_daily_lcsgeneration.Turbine_Generation) \n     from o_daily_lcsgeneration \n     where o_daily_lcsgeneration.Location = 1 \n     group by o_daily_lcsgeneration.Date\n  ) \n</code></pre>\n\n<p>but received the above error saying sub query more than 1 row</p>\n"},{"tags":["php","mysql","gmt"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13263921,"title":"GMT time and mysql NOW() is giving 2 minutes difference","body":"<p>When i was checking the GMT time <a href=\"http://wwp.greenwichmeantime.com/info/current-time/\" rel=\"nofollow\"><strong><code>here</code></strong></a> it was <strong>05:40:00</strong>, at the same time i ran the below query in mysql,</p>\n\n<pre><code>SET time_zone='+00:00'; // to get GMT time\nSELECT NOW();\n</code></pre>\n\n<p>It was <strong>05:37:50</strong> from above query. So in mysql i am getting around 2 minutes time difference from <strong><a href=\"http://wwp.greenwichmeantime.com/info/current-time/\" rel=\"nofollow\">GMT</a></strong>. It has to give <strong>05:40:00</strong> instead of <strong>05:37:50</strong>. How to resolve this?</p>\n\n<p>Thanks for your valuable time.</p>\n"},{"tags":["java","mysql","schemaspy"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":160,"score":2,"question_id":11433644,"title":"How to get schemaspy to see the mysql connector?","body":"<p>I've just downloaded schemaspy and it is working perfectly apart from one thing. I always have to specify the path to the mysql connector with the -dp option.</p>\n\n<p>If I don't specify it, I get this error:</p>\n\n<pre><code>java.lang.ClassNotFoundException: com.mysql.jdbc.Driver\n\nFailed to load driver 'com.mysql.jdbc.Driver'\nThis entry doesn't point to a valid file/directory: [/mysql/mysql-connector-java-5.1.6-  bin.jar]\n</code></pre>\n\n<p>The path is:</p>\n\n<pre><code>/usr/share/java/mysql-connector-java-5.1.21/mysql-connector-java-5.1.21-bin.jar\n</code></pre>\n\n<p>And it is on the $CLASSPATH. \nI can see that the version it is expecting is different from the one I have - is that the problem and if so is there any way of making it expect the later version or do I have to download 5.1.6?</p>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":15,"score":2,"question_id":13263698,"title":"Mysql Prepared Statement using same parameter multiple times","body":"<p>I wrote stored procedure like this:</p>\n\n<pre><code>  DELIMITER $$\n   CREATE PROCEDURE searchByTerm(term VARCHAR(300))\n    BEGIN\n    SET @statment = \"Select name,description from products where name like '%?%' OR description like '%?%'\";\n    PREPARE stmt FROM @statment;\n    SET @a = term;\n    SET @b = term;\n    EXECUTE stmt USING @a,@b;\n    DEALLOCATE PREPARE stmt; \n  END$$\n</code></pre>\n\n<p>calling it as :</p>\n\n<pre><code>CALL searchByTerm('xyz');\n</code></pre>\n\n<p>it results in following error:</p>\n\n<pre><code>Error Code : 1210\nIncorrect arguments to EXECUTE\n</code></pre>\n\n<p>Am i doing anythng wrong? I know it can be done with concat statement but why it's not working like this? Can't i use same parameter multiple times? Thanks for any help..</p>\n"},{"tags":["java","mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13263519,"title":"select few rows from resultset mysql java","body":"<p>i have used a select command in my java program and stored its value in the result set. now while looping in the resultset i want to use a select command which will select the first 5 lines of the resultset and insert into other table. for the second time, it should select the next 5 lines and insert into the table. and for the third time, so on..</p>\n\n<pre><code>Statement s = connection.createStatement();\ns.executeQuery(\"Select * from table1\");\nResultSet res = s.getResultSet();\nwhile(res.next()){\n // here i want to select the first 5 lines of the result set and insert in the second       table\n}\n</code></pre>\n"},{"tags":["php","javascript","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":69,"score":-1,"question_id":13246459,"title":"php mysql dynamic table display with numbring","body":"<p>i have page where i populate table from mysql using php. I have 10 tables. \nIf there is no data in table then the table is not displayed.</p>\n\n<p>i have displayed numbering like \"1\" for table one 2 for table 2 and so on . now if table 3,6,9 have no data then page will display table of numbers 1,2,4,5,7,8,10. but i want that numbring according to the number of tables displayed.</p>\n\n<pre><code>$tbl2= \"SELECT * FROM wp_health_aanvullend_moduliar WHERE health_id=$hid\";\n$rs2 = mysql_query($tbl2);\n$count2 = mysql_num_rows($rs2);\n\n &lt;?php if($count2 &gt; 0){?&gt;\n\n&lt;table class=\"sub_front_efect\" cellpadding=\"0\" cellspacing=\"0\" style=\" border:none; margin:10px 0;\"&gt;\n&lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th colspan=\"100%\" class=\"health_sub_front\"&gt;Aanvullend moduliar&lt;/th&gt;&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n\n&lt;?php  $wp_health_aanvullend_moduliar = \"wp_health_aanvullend_moduliar\";\n             $crows = $wpdb-&gt;get_results( \"SELECT * FROM $wp_health_aanvullend_moduliar WHERE health_id=$hid\");\n              foreach ($crows as $crow) {\n                 $type          = $crow-&gt;type ;\n                 $price         = $crow-&gt;price;\n\n\n              ?&gt;\n    &lt;tr data-price=\"&lt;?php echo $price; ?&gt;\"&gt;&lt;td width=\"65%\"&gt;&lt;?php echo $type; ?&gt;&lt;/td&gt;&lt;td style=\"border-right:1px solid #ccc;\"&gt;&amp;euro; &lt;?php echo $price; ?&gt;&lt;/td&gt;&lt;/tr&gt;\n    &lt;?php \n              }\n    ?&gt;\n  &lt;/tbody&gt;\n</code></pre>\n\n<p></p>\n\n<pre><code>&lt;?php } ?&gt;\n</code></pre>\n\n<p>if all the table has data then all displayed.<img src=\"http://i.stack.imgur.com/J2t1l.png\" alt=\"tables with numbers\">\nwhat can be the logic </p>\n\n<p>thanks  </p>\n"},{"tags":["mysql","sql","relational-database","relation","relational-algebra"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":44,"score":2,"question_id":13262481,"title":"Writing a query in strictly relational algebra (AS IN NOT SQL/MYSQL)","body":"<p>So here are three relations:</p>\n\n<p><strong>Table Members</strong></p>\n\n<blockquote>\n  <p>Members(member_id, name, city, state)</p>\n</blockquote>\n\n<p>where member_id is the primary key</p>\n\n<p><strong>Table Borrowed</strong></p>\n\n<blockquote>\n  <p>Borrowed(borrow_id, lib_id, member_id)</p>\n</blockquote>\n\n<p>where borrow_id is the primary key </p>\n\n<p><strong>Table Libraries</strong></p>\n\n<blockquote>\n  <p>Libraries(lib_id, lib_address, lib_city, lib_state)</p>\n</blockquote>\n\n<p>where lib_id is the primary key</p>\n\n<p>Both lib_id and member_id are foreign keys</p>\n\n<p>So I am trying to write a query that finds all of the member_id of members that have borrowed a book at EVERY library in their city. This means that </p>\n\n<pre><code>members.city = libraries.lib_city AND members.state = libraries.lib_state\n</code></pre>\n\n<p>I was thinking about using relational division. For example you have a relation consisting of the member_id's and all of the lib_id where they have borrowed a book. And you divide this by a relation that consists of all of the lib_id in that member's city. </p>\n\n<p>However, I am confused as to how to write this in relational algebraic terms.</p>\n\n<p>In mysql/sql it is very easy but the translation to relational algebra is where I get stuck.</p>\n"},{"tags":["java","mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":20,"score":-2,"question_id":13262346,"title":"Minimum permissions required to connect and backup mysql through java application","body":"<p>I am using mysql with my java desktop application. </p>\n\n<ul>\n<li>The user of the application is allowed to access <strong>only</strong> the specified mysql \nschema through java application</li>\n<li>And, the user have to take the backup of the schema on which the\napplication is running.</li>\n</ul>\n\n<p>I want to grant the permissions or specify the roles in mysql to perform <strong>these</strong> tasks only.</p>\n\n<p>How to do this? Thank you.</p>\n"},{"tags":["mysql","query"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13262615,"title":"Construct query to create tables","body":"<p>I am currently working with a MySQL database table structure. I found a table structure online but i am not sure how to duplicate the exact tables structure. These tables share foreign keys and index with each other. I have attached a link that shows the tables are setup in the model I would like to duplicate. I am requesting help in creating a query that will create all tables with their correlated data.  <a href=\"http://webprolearner2346.zxq.net/class_des/\" rel=\"nofollow\">LINK- TABLE STRUCTURE</a></p>\n\n<p><strong>Foreign keys</strong></p>\n\n<pre><code>semester_id\nfaculty_id\nschedule_id\nsection_id\nclass_id\nmajor_minor_id\n</code></pre>\n"},{"tags":["php","javascript","html","mysql","parameter-passing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13232944,"title":"Autofill of fields in a form depending on the selection from a select tag (drop down menu)","body":"<p>I have a form which has a select tag; on selection of an item from the drop down rest of the form fields should get filled accordingly.Note that all the form data comes from mysql database. Below is my code :</p>\n\n<pre><code>    &lt;script language=\"javascript\" type=\"text/javascript\"&gt;\n            function populateData($id)\n            {\n                alert('in populateData');\n                y = document.getElementById(\"selectCard\");\n                document.getElementById(\"to_address\").value = to_address[y.selectedIndex];\n                document.getElementById(\"subject\").value = subject[y.selectedIndex];\n                document.getElementById(\"email_content\").value = email_content[y.selectedIndex];\n            }\n    &lt;/script&gt;\n    &lt;body&gt;\n        &lt;?php\n            mysql_connect(\"localhost\", \"someUser\", \"password\") or die(\"Connection Failed\");\n            mysql_select_db(\"mns\")or die(\"Connection Failed\");\n            $query = \"SELECT * FROM table\";\n            $result = mysql_query($query);\n        ?&gt;              \n        &lt;select id=\"selectCard\" class=\"dropdown\" onchange=\"populateData($id)\"&gt;\n            &lt;?php\n                while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {\n            ?&gt;  \n            &lt;option value=\"&lt;?php echo $line['source_name'];?&gt;\"&gt; &lt;?php echo $line['source_name'];?&gt;\n            &lt;?php\n                $id = $line['source_id'];           \n                $source_name = $line['source_name'];\n                $source_email = $line['source_email'];\n                $phone_no = $line['source_id'];\n                $disteller_function = $line['disteller_function'];\n                }\n            ?&gt;\n        &lt;/select&gt;               \n        &lt;P&gt;&lt;INPUT ID=\"to_address\" TYPE=\"TEXT\" NAME=\"to_address\" SIZE=\"25\"&gt;&lt;/P&gt;    \n        &lt;P&gt;&lt;INPUT ID=\"subject\" TYPE=\"TEXT\" NAME=\"subject\" SIZE=\"25\"&gt;&lt;/P&gt;         \n        &lt;P&gt;&lt;INPUT ID=\"email_content\" TYPE=\"TEXT\" NAME=\"email_content\" SIZE=\"500\"&gt;&lt;/P&gt;         \n        &lt;P&gt;&lt;INPUT TYPE=\"SUBMIT\" VALUE=\"Submit\" NAME=\"B1\"&gt;&lt;/P&gt;                       \n    &lt;/body&gt;\n</code></pre>\n\n<p>When am passing '$id' as parameter, the 'populateData($id)' function is not getting called.And When i remove the parameter the code works but i get 'undefined' in rest of the form fields.          </p>\n\n<p>Any help is much appreciated.</p>\n\n<p>Nanashi         </p>\n"},{"tags":["mysql","jsp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13263352,"title":"how to increase or decrease the quantity in a field in my sql when we enter the new quantity","body":"<p>I'm doing a project I'm encountering a problem in my project.........</p>\n\n<p>the problem is  i would like to increase or decrease the quantity in my sql quantity field when i pass the issued or delivered quantity i.e....\ninitially the quantity in the quantity filed is 1 when i intake the product of a quantity 10 then automatically it should update the quantity as 10+1=11\nso it must update as 11, if i remove a 1 quantity it should update as 0........</p>\n\n<p>how to write a code in jsp..........</p>\n\n<p>pls do help    </p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13263110,"title":"i need to know the syntax to create sequence in mysql5.5","body":"<p>I am using <strong>mysql 5.5.</strong> I want to know the syntax for creating sequence. I cannot use auto-increment because already i have a column for auto-increment. </p>\n\n<p>I tried various suggestion. But nothing worked out.</p>\n\n<p>So any one can help me please?</p>\n"},{"tags":["php","mysql","sql","phpmyadmin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13244406,"title":"MySQL Tables for School Website","body":"<p>Right now I have 40+ tables for my website and I don't think I'm using MySQL to it's full power quite right. I am making a website similar to Moodle. It basically just holds tests for students grouped by courses.</p>\n\n<p><strong>Origonal Tables</strong>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>courses - Lists all courses (ID, Name)\nc_$id   - Lists all the Tests (ID, Name, etc) for course number $id\na_$id   - Lists all questions for the test number $id (Question, A, B, C, D)\ng_$id   - Lists all grades for the course with course number $id.\nc_a     - Lists course ID and assignment ID pairs ex: (1,2) (1,3) (2,2) (2,3)\n</code></pre>\n\n<p><strong>Tables Revision 1:</strong>\n</p>\n\n<pre><code>courses   - Lists all courses (ID, Name, etc)\ntests     - Lists all tests (ID, Name, etc)\nquestions - Lists all questions from all tests (ID, Ques, Ans)\ngrades*   - Lists all grades (studentID, courseID, testID, grade)\nstudents* - Lists all students and their courses (StudentID, courseID)\n</code></pre>\n\n<p>The grades* table, it's basically 3 primary keys and a value. Something seems odd about it. Is there a better way? Same goes for the students table. Both are basically connections of the other tables. Primary key for fast searching is not possible?</p>\n\n<p><strong>Origonal Post:</strong></p>\n\n<p>What is the most efficient way to recreate this to utilize the power of MySQL?</p>\n\n<p>As of right now when a new course is made it creates a new table for that course (<code>c_$id</code>), then a table for each assignment and a list of grades for that course <code>g_$id</code>. Then when creating an assignment it creates a new <code>a_$id</code> table,adding that course and assignment pair to <code>c_a</code>.</p>\n\n<p>I have removed the \"<code>*</code>\" from most of my select statements and added \"<code>LIMIT 1</code>\" to any that are selecting a primary key, next is solving this OOP issue.</p>\n"},{"tags":["c#","mysql","query","datetime"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13262638,"title":"Search datetime in MySQL","body":"<p>I have a MySQL database, there's a table which have column Time's Type is <strong>Nvachar(50)</strong> and <strong>its values</strong> is <strong>kind like this \"05/09/2012 20:53:40:843\"</strong> *<em>(Month-date-year hour:mins:second:msecond)</em>*</p>\n\n<p>Now I want to query to get a record have Time after \"10/05/2012 01:00:30 PM\".\nI had code in C# to converted it to \"05/10/2012 13:00:30\" before making a query.\nMy Query : </p>\n\n<pre><code>SELECT * FROM ABCDFEGH WHERE capTime &gt; '05/10/2012 13:00:30' LIMIT 0, 1\n</code></pre>\n\n<p>But i got no record. So please tell me how can I can make it return record have time after the time above ???  </p>\n\n<p>More Info My C# code :</p>\n\n<pre><code>string tableName = \"ABCDFEGH\";\nstring date = \"05/10/2012 13:00:30\";\n\nvar query = \"SELECT * FROM \" + tableName + \" WHERE capTime &gt; '\" + date + \"' LIMIT 0, 1\";\n\nvar cmd = new MySqlCommand(query, connection);\nMySqlDataReader dataReader = null;\ntry\n{\ndataReader = cmd.ExecuteReader();\n}\n</code></pre>\n\n<p>I'm so so so so so so sorry. I made a mistake the query must be</p>\n\n<pre><code>SELECT * FROM ABCDFEGH WHERE capTime &gt; '05/10/2012 13:00:30' LIMIT 0, 1\n</code></pre>\n\n<p>This query is successful return the record i need :)</p>\n\n<p>But soemhow I have mistyped it into </p>\n\n<pre><code>SELECT * FROM ABCDFEGH WHERE capTime &gt; '05-10-2012 13:00:30' LIMIT 0, 1\n</code></pre>\n\n<p>Sorry again, topic close. But tks for evveryone tried :) </p>\n"},{"tags":["php","mysql"],"answer_count":8,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":8216830,"title":"MySQL Query in PHP - Not Correct?","body":"<p>What is wrong with this query? It appears to be correct to me:</p>\n\n<pre><code>mysql_query(\"UPDATE culture SET cult_desc=$culture WHERE cult_id is $UID\");\n</code></pre>\n\n<p>Modified it, NetBeans is still giving me an error. Here's my total code for the page:</p>\n\n<pre><code>$culture = $_POST[\"culture\"];\nif (isset($_POST[\"id\"]))\n    $UID = $_POST[\"id\"];\n    mysql_query(\"UPDATE culture SET cult_desc='$culture' WHERE cult_id=$UID\");\nelse\n     mysql_query(\"INSERT INTO culture\n             VALUES(cult_desc='$culture')\");\n</code></pre>\n"},{"tags":["python","mysql","macports"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12439362,"title":"Installing MySQL driver for Python on Mac","body":"<p>I am running MAMP and Python as CGI. I want to connect MySQL. I tried MySQLDb by installing it with pip but it did not work and python could not locate MySQLDb at all.</p>\n\n<p>Can you tell me how can I install it by using Macport provider I already have Apache,MySQL and Python 2.6 installed?</p>\n\n<p>Thanks</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Installing via pip gave following O/P:</p>\n\n<blockquote>\n  <p>Downloading/unpacking mysql-python   Downloading\n  MySQL-python-1.2.3.tar.gz (70Kb): 70Kb downloaded   Running setup.py\n  egg_info for package mysql-python\n      warning: no files found matching 'MANIFEST'\n      warning: no files found matching 'ChangeLog'\n      warning: no files found matching 'GPL' Installing collected packages: mysql-python   Running setup.py install for mysql-python\n      building '_mysql' extension\n      /usr/bin/gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -pipe -O2 -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Dversion_info=(1,2,3,'final',0) -D_<em>version</em>_=1.2.3 -I/usr/local/Cellar/mysql/5.5.15/include -I/opt/local/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6\n  -c _mysql.c -o build/temp.macosx-10.6-x86_64-2.6/_mysql.o -g\n      In file included from _mysql.c:36:\n      /usr/local/Cellar/mysql/5.5.15/include/my_config.h:330:1: warning: \"SIZEOF_SIZE_T\" redefined\n      In file included from /opt/local/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/Python.h:9,\n                       from pymemcompat.h:10,\n                       from _mysql.c:29:\n      /opt/local/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/pymacconfig.h:37:1:\n  warning: this is the location of the previous definition\n      In file included from _mysql.c:36:\n      /usr/local/Cellar/mysql/5.5.15/include/my_config.h:423:1: warning: \"HAVE_WCSCOLL\" redefined\n      In file included from /opt/local/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/Python.h:8,\n                       from pymemcompat.h:10,\n                       from _mysql.c:29:\n      /opt/local/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/pyconfig.h:808:1:\n  warning: this is the location of the previous definition\n      /usr/bin/gcc-4.2 -L/opt/local/lib -bundle -undefined dynamic_lookup build/temp.macosx-10.6-x86_64-2.6/_mysql.o\n  -L/usr/local/Cellar/mysql/5.5.15/lib -lmysqlclient_r -lpthread -lz -lssl -lcrypto -o build/lib.macosx-10.6-x86_64-2.6/_mysql.so\n      warning: no files found matching 'MANIFEST'\n      warning: no files found matching 'ChangeLog'\n      warning: no files found matching 'GPL' Successfully installed mysql-python Cleaning </p>\n</blockquote>\n\n<p>I am using the MySQL shipped with MAMP. I had also set PATH to Binary of MySQL within MAMP folder</p>\n\n<p><strong>Another Update</strong></p>\n\n<p>Turned out that Mysql-Python egg did not install at all in:</p>\n\n<p><strong>/Library/Python/2.6/site-packages</strong></p>\n\n<p>What am I missing?</p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":13262733,"title":"How do I check to see if \"title\" exist in mysql database","body":"<p>First stackoverflow question ever woot!</p>\n\n<p><strong>FUNCTION :</strong> To check and see if data exist before allowing INSERT - trying to make it non-case senstive and as open as possbile since the title I'm trying to avoid a dup is only for a specifc artistid (explained below)</p>\n\n<p>The table row structure is as follows</p>\n\n<ul>\n<li>id (auto_increment) </li>\n<li>artist (specfic id number only assigned to that artist) </li>\n<li>title (what we are trying to make sure we don't get a dupicate only for this artist</li>\n</ul>\n\n<p><strong>ISSUE :</strong> Does not get needed data from database or post defined error, might be wrong in if statement = unknown exactly what is issue</p>\n\n<p>$_POST['title']; is passed from user input</p>\n\n<pre><code>            if (isset($submit)) {\n                $date = date(\"Ymd\");\n                $cleanTitle =  $_POST['title'];\n                $querytitle = mysql_real_escape_string($_POST['title']);\n                $queryalbum = mysql_real_escape_string($_POST['album']);\n\n                // Check to see if Title exist for specfic Artist\n                $checkTitle = mysql_query(\"SELECT * from lyrics WHERE artist = '$artist'\");\n                if (!$checkTitle) {\n                    die('Query Failed');\n                } \n                if ($checkTitle == $cleanTitle)  {\n// do whatever\n}\n                print_r($checkTitle); // the data returned from the query\n</code></pre>\n\n<p><strong>UPDATE :</strong> INSERT IGNORE wouldn't work sicne I'm inserting the data via $artist and need to check and see if title exist on that artist first. or i might be wrong. i'm unsure on how to do it \n$artist is a specfic ID number defined higher in the code</p>\n"},{"tags":["mysql","sql","service","random"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":30,"score":3,"question_id":13262068,"title":"Is there / would be feasible a service providing random elements from a given SQL table?","body":"<p><strong>ABSTRACT</strong></p>\n\n<p>Talking with some colleagues we came accross the \"extract random row from a big database table\" issue. It's a classic one and we know the naive approach (<a href=\"http://stackoverflow.com/questions/580639/how-to-randomly-select-rows-in-sql\">also on SO</a>) is usually something like:</p>\n\n<blockquote>\n  <p>SELECT * FROM mytable ORDER BY RAND() LIMIT 1</p>\n</blockquote>\n\n<p><strong>THE PROBLEM</strong></p>\n\n<p>We also know a query like that is utterly inefficient and actually usable only with very few rows. There are some approaches that could be taken to attain better efficiency, like <a href=\"http://stackoverflow.com/questions/211329/quick-selection-of-a-random-row-from-a-large-table-in-mysql\">these ones</a> still on SO, but they won't work with arbitrary primary keys and the <em>randomness</em> will be skewed as soon as you have holes in your numeric primary keys. An answer to the last cited question links to <a href=\"http://jan.kneschke.de/projects/mysql/order-by-rand/\" rel=\"nofollow\">this article</a> which has a good explanation and some bright solutions involving an additional \"equal distribution\" table that must be maintained whenever the \"master data\" table changes. But then again if you have frequent DELETEs on a big table you'll probably be screwed up by the constant updating of the added table. Also note that many solutions rely on <code>COUNT(*)</code> which is ridiculously fast on MyISAM but \"just fast\" on InnoDB (I don't know how it performs on other platforms but I suspect the InnoDB case could be representative of other transactional database systems).</p>\n\n<p>In addition to that, even the best solutions I was able to find are fast but not <em>Ludicrous Speed</em> fast.</p>\n\n<p><strong>THE IDEA</strong></p>\n\n<p>A separate service could be responsible to generate, buffer and distribute random row ids or even entire random rows:</p>\n\n<ul>\n<li>it could choose the best method to extract random row ids depending on how the original PKs are structured. An ordered list of keys could be maintained in ram by the service (shouldn't take too many bytes per row in addition to the actual size of the PK, it's probably ok up to 100~1000M rows with standard PCs and up to 1~10 billion rows with a beefy server)</li>\n<li>once the keys are in memory you have an implicit \"row number\" for each key and no holes in it so it's just a matter of choosing a random number and directly fetch the corresponding key</li>\n<li>a buffer of random keys ready to be consumed could be maintained to quickly respond to spikes in the incoming requests</li>\n<li>consumers of the service will connect and request N random rows from the buffer</li>\n<li>rows are returned as simple keys <em>or</em> the service could maintain a (pool of) db connection(s) to fetch entire rows</li>\n<li>if the buffer is empty the request could block or return EOF-like</li>\n<li>if data is added to the master table the service must be signaled to add the same data to its copy too, flush the buffer of random picks and go on from that</li>\n<li>if data is deleted from the master table the service must be signaled to remove that data too from both the \"all keys\" list and \"random picks\" buffer</li>\n<li>if data is updated in the master table the service must be signaled to update corresponding rows in the key list and in the random picks</li>\n</ul>\n\n<p><strong>WHY WE THINK IT'S COOL</strong></p>\n\n<ul>\n<li>does not touch disks other than the initial load of keys at startup or when signaled to do so</li>\n<li>works with any kind of primary key, numerical or not</li>\n<li>if you know you're going to update a large batch of data you can just signal it when you're done (i.e. not at every single insert/update/delete on the original data), it's basically like having a fine grained lock that only blocks requests for random rows</li>\n<li>really fast on updates of any kind in the original data</li>\n<li>offloads some work from the relational db to another, memory only process: helps scalability</li>\n<li>responds really fast from its buffers without waiting for any querying, scanning, sorting</li>\n<li>could easily be extended to similar use cases beyond the SQL one</li>\n</ul>\n\n<p><strong>WHY WE THINK IT COULD BE A STUPID IDEA</strong></p>\n\n<ul>\n<li>because <em>we</em> had the idea without help from any third party</li>\n<li>because nobody (we heard of) has ever bothered to do something similar</li>\n<li>because it adds complexity in the mix to keep it updated whenever original data changes</li>\n</ul>\n\n<p><strong>AND THE QUESTION IS...</strong></p>\n\n<p>Does anything similar already exists? If not, would it be feasible? If not, why?</p>\n"},{"tags":["mysql","csv","import"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2956,"score":0,"question_id":7393221,"title":"mysql> error 1265: data truncated for column 'xxx' at row 1","body":"<p>I'm trying to import a csv file into a table in a mysql database. The table has 141 columns with datatypes of <code>INT</code>, <code>VARCHAR(20)</code>, <code>TIMESTAMP</code>,<code>TIMESTAMP</code>, and then a series of <code>TINYTEXT</code>s and <code>VARCHAR(4)</code>s.</p>\n\n<p>I'm getting 7 data truncated errors on columns with datatype <code>VARCHAR(4)</code> for which the data does <strong>not</strong> exceed 4 characters.</p>\n\n<p>I tried forcing it to continue with <code>IGNORE</code>, but then it went crazy and chopped data from <em>other</em> cells into pieces and scattered them throughout the table.</p>\n\n<p>I'm using the command-line on an MS 2008 R2 Server to run the SQL and the csv file is located in the Db's directory.</p>\n\n<p>P.S. I did read several of the other posts and google results related to mysql+import or mysql+data truncated (1265), but they didn't seem to cover this particular issue.</p>\n\n<p>Thanks!</p>\n\n<p><b>EDIT</b>: I'm pretty sure it has something to do with the <code>LOAD DATA</code> function because if I <code>INSERT</code> one row at a time, it works just fine…</p>\n\n<p>My sql for the import is:</p>\n\n<pre><code>LOAD DATA INFILE '2011-09.csv' IGNORE INTO TABLE `survey`.`2011-09` FIELDS TERMINATED BY ',' LINES TERMINATED BY '\\n';\n</code></pre>\n"},{"tags":["php","mysql","email","marketing"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":12195741,"title":"Email marketing statistics implementation","body":"<p>I will soon be tasked with making an email campaign manager, and part of it will be a statistics screen that will show how many emails were delivered successfully, how many were not, and how many people actually opened the email.</p>\n\n<p>The main thing I can't get my head around is how to code the part that deals with people opening the email.</p>\n\n<p>I know you could probably do it with a 1x1 white pixel, and then perhaps somehow have the server detect that it was loaded based on the image file name and trigger a script from that. But not all email clients have images enabled and in some cases they are disabled completely etc. I also think this method is quite dated?</p>\n\n<p>I would like to know how the big players do this like Cheetah Mail etc.</p>\n\n<p>What is the best way to do this using PHP/MySQL? </p>\n\n<hr>\n\n<p>Thanks for your reply.\nThese are opted in subscribers and there will be afew links in the body of the email that will go to certain places on our websites. Tracking of those is easy because the link will have a string appended to it which will make it easy to detect if they visit the site from an email.</p>\n\n<p>If whitepixel is the way to go at the moment, how do I go about linking the loading of that pixel to a script that is triggered on my server?</p>\n"},{"tags":["python","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13262598,"title":"Error occur installing MySQL-Python","body":"<p>An error occurs while installing MySQL - python to 'python version v2.7 required, which was not found in regstry'. What should I do? Note that I used python v2.7.3, win7 64bit</p>\n"},{"tags":["php","mysql","sql","pdo"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13244328,"title":"Updating a MySQL database via PDO and tokens - all parameters being set to last value in dataset","body":"<p>As the title states: I am trying to update specific records in a MySQL data base using PDO and tokens to secure against any injection.</p>\n\n<p>Here is my code:</p>\n\n<p>Some arrays to help build the query:</p>\n\n<pre><code>$id = 1234\n$values = array ('a','b','c',);\n$variables = array ($A, $B, $C);\n</code></pre>\n\n<p>The query built via loop:</p>\n\n<pre><code>$sql =  \"UPDATE table1 SET \";   \n        foreach($values as $value)\n        {\n        $sql .=\"$value = :$value, \";\n        }\n        $sql = rtrim($sql,', ');    \n        $sql .=\" WHERE id = '$id'\";\n</code></pre>\n\n<p>Execution of query via PDO:</p>\n\n<pre><code>try     \n{\n$pdo = new PDO('mysql:host=localhost; dbname=db01', $username, $password);\n$pdo-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n\n$stmt = $pdo-&gt;prepare($sql);\nforeach(array_combine($values, $variables) as $value=&gt;$variable)\n{\n$stmt-&gt;bindParam(\":$value\", $variable);\n}\n\n$stmt-&gt;execute();\n</code></pre>\n\n<p>The result:\nEvery field in the specified record (matching $id) is set to the same value, which is always equal to the contents of the last variable listed in the array (in this example they would all contain the value held in $C)</p>\n\n<p>echoing the SQL query shows it has been constructed correctly.</p>\n\n<p>Any ideas? Thanks for your consideration</p>\n"},{"tags":["mysql","database","query-optimization"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":42,"score":3,"question_id":13259391,"title":"How to speed up MySQL query","body":"<p>I'm trying to join two tables in a MySQL database but it doesn't seem to be using the primary key on the second table. I'm not sure if I'm querying it wrong or if the primary key can't be used, how to further optimize it. Currently the query is taking 20 seconds to run.</p>\n\n<p>The query I'm running is:</p>\n\n<pre><code>SELECT * FROM journeyPatternTimingLink2 INNER JOIN stops ON stops.atcoCode = journeyPatternTimingLink2.from WHERE journeyPatternId = '113958'\n</code></pre>\n\n<p>My table structure is as follows: </p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS `journeyPatternTimingLink2` (\n  `journeyPatternTimingLinkId` int(11) NOT NULL AUTO_INCREMENT,\n  `journeyPatternId` int(11) NOT NULL,\n  `from` varchar(15) NOT NULL,\n  `to` varchar(15) NOT NULL,\n  `direction` enum('inbound','outbound') NOT NULL,\n  `runTime` varchar(15) NOT NULL,\n  PRIMARY KEY (`journeyPatternTimingLinkId`),\n  KEY `journeyPatternId` (`journeyPatternId`),\n  KEY `from` (`from`)\n) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=13652793 ;\n\n--\n-- Table structure for table `stops`\n--\n\nCREATE TABLE IF NOT EXISTS `stops` (\n  `atcoCode` varchar(25) NOT NULL,\n  `longitude` varchar(30) NOT NULL,\n  `latitude` varchar(30) NOT NULL,\n  PRIMARY KEY (`atcoCode`),\n  KEY `location` (`longitude`,`latitude`),\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\n\n</code></pre>\n\n<p>And finally here's <a href=\"http://i.imgur.com/Rt564.png\" rel=\"nofollow\">a screenshot me running explain on the query</a>. Shouldn't I be seeing some kind of index being used on the stops table?</p>\n\n<p>Thanks.</p>\n"},{"tags":["mysql","utf-8"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13248096,"title":"MySQL utf8_general can't store Chinese characters?","body":"<p>I was trying to store some chinese characters into mysql table.</p>\n\n<p>they become something like this:</p>\n\n<pre><code>&amp;#28872;&amp;#28779;&amp;#38596;&amp;#24515;\n</code></pre>\n\n<p>They work fine when I output them in innerhtml, but if it's an html attribute, they won't show the chinese characters.</p>\n\n<p>Strangely, if I saved the data in utf8_bin or utf8_unicode, they works ok.</p>\n\n<p>Any fix to this?</p>\n\n<p>To be more specific, I'm using codeIgniter when doing this.</p>\n"},{"tags":[".net","mysql","sql-server-2008"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":11840161,"title":"Efficient way to calculate value mathematical functions on DB data","body":"<p>In .net application, either window or web application, </p>\n\n<p>To perform different mathematical functions like sqrt, maximum,minimum,avg,count on larger amount of data. \nUsing stored procedures or normal program logic using iteration. which is the best way for doing this?</p>\n"},{"tags":["mysql","vb.net","winforms","visual-studio-2010","datagridview"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13225502,"title":"Updating Multiple Selected rows in DGV in VB.NET","body":"<p>I have a <code>DataBound</code> <code>DGV</code> it has 3 <code>Columns</code> namely <code>ID(not pk)</code>, <code>Name</code>, and <code>Status</code>. I have 2 Buttons <code>Add</code> and <code>Post</code>. Add, adds <code>Data</code> to the <code>DGV</code> and <code>DataBase(MySql)</code> but in <code>Status</code>, it adds <code>\"No\"</code>. What I want to do is for example I have 3 <code>Rows</code> in my  <code>DGV</code> and highlight those 3 and click <code>Post</code>, the value in <code>Status</code> will be changed to <code>\"Yes\"</code>. Here is what I have done so far, but I'm having trouble with the syntax for the <code>UPDATE QUERY</code>. <strong>THIS CODE WORKS NOW</strong></p>\n\n<pre><code>  Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load\n        'TODO: This line of code loads data into the 'TestDataSet.testing' table. You can move, or remove it, as needed.\n        Me.TestingTableAdapter.Fill(Me.TestDataSet.testing)\n        Using _conn As New MySqlConnection(\"Server = localhost; Username= root; Password =; Database = test\")\n\n            Using cmd\n                With cmd\n                    MsgBox(\"Connection Established\")\n                    .Connection = _conn\n                    .Parameters.Clear()\n                    .CommandText = \"Select Max(TransactionID) from testing\"\n                    _conn.Open()\n                    Dim dr As MySqlDataReader\n                    dr = cmd.ExecuteReader()\n                    If dr.Read() Then\n                        If IsDBNull(dr.Item(0)) Then\n                            txtNumber.Text = \"1\"\n                        Else\n\n                            txtName.Text = dr(0).ToString() + 1\n                        End If\n\n                    End If\n                End With\n            End Using\n        End Using\n\n        FillGrid()\n\n    End Sub\n\n    Private Sub FillGrid()\n\n\n\n        Using _conn As New MySqlConnection(\"Server = localhost; Username= root; Password =; Database = test\")\n            Using _comm As New MySqlCommand\n                With _comm\n                    .CommandText = \" SELECT `ID`, `TransactionID`, `Name`, `Posted` FROM `testing`\"\n                    .Connection = _conn\n                End With\n                Using _adapter As New MySqlDataAdapter(_comm)\n                    Try\n                        _conn.Open()\n                        Dim _ds As New DataSet\n                        _adapter.Fill(_ds)\n                        GVTransaction.DataSource = _ds.Tables(0)\n                    Catch ex As Exception\n\n                    End Try\n                End Using\n            End Using\n        End Using\n    End Sub\n\n    Private Sub btnAdd_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnAdd.Click\n        Using conn As New MySqlConnection(\"Server = localhost; Username= root; Password =; Database = test\")\n            Using cmd\n                With cmd\n                    MsgBox(\"Connection Established\")\n                    .Connection = conn\n                    .Parameters.Clear()\n                    .CommandText = \"INSERT INTO testing(TransactionID, Name, Posted) VALUES (@ID, @iName, @iPosted)\"\n                    .Parameters.Add(New MySqlParameter(\"@ID\", txtNumber.Text))\n                    .Parameters.Add(New MySqlParameter(\"@iName\", txtName.Text))\n                    .Parameters.Add(New MySqlParameter(\"@iPosted\", \"No\"))\n\n\n                End With\n                Try\n                    conn.Open()\n                    cmd.ExecuteNonQuery()\n                Catch ex As MySqlException\n                    MsgBox(ex.Message.ToString())\n                End Try\n            End Using\n        End Using\n\n        MsgBox(\"Data Added to the Database\")\n\n        Me.TestingTableAdapter.Dispose()\n\n        Me.TestingTableAdapter.Fill(Me.TestDataSet.testing)\n    End Sub\n\n    Private Sub btnPost_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnPost.Click\n\n\n        Dim _ID As New List(Of String)\n        Dim _Name As New List(Of String)\n        For Each _x As DataGridViewRow In TestingDataGridView.SelectedRows\n            _ID.Add(_x.Cells(\"GVTransactionID\").Value.ToString())\n            _Name.Add(\"'\" &amp; _x.Cells(\"GVName\").Value.ToString() &amp; \"'\")\n        Next\n        Dim inClause As String = String.Join(\",\", _ID.ToArray())\n        Dim inClause1 As String = String.Join(\",\", _Name.ToArray())\n        Dim _sqlUpdate As String = String.Format(\"UPDATE testing SET Posted = @Posted WHERE TransactionID IN ({0}) AND Name IN ({1})\", inClause, inClause1)\n\n        Using _conn As New MySqlConnection(\"Server = localhost; Username= root; Password =; Database = test\")\n            Using _commm As New MySqlCommand()\n                With _commm\n                    .CommandText = _sqlUpdate\n                    .Connection = _conn\n                    .CommandType = CommandType.Text\n                    .Parameters.AddWithValue(\"@Posted\", \"YES\")\n\n                End With\n                Try\n                    _conn.Open()\n                    _commm.ExecuteNonQuery()\n                    FillGrid()\n                Catch ex As MySqlException\n                    MsgBox(ex.StackTrace.ToString)\n                End Try\n\n            End Using\n        End Using\n    End Sub\nEnd Class\n</code></pre>\n\n<p>Any Helps or tips is greatly appreciated. Please and Thank you</p>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":469,"score":1,"question_id":11860695,"title":"load images dynamically in php from mysql database into a jquery slider","body":"<p>I have written a web application that involves having users upload pictures to the site. On the homepage, I dynamically show the newest pictures/items uploaded in PHP, limiting it to ten. However, the page looks so static and I have searched on Google, bing, ask, yahoo, etc for days now and haven't had any answers. </p>\n\n<p>I have written the code to store store the images, and get them from the db.\nThe images are shown on the homepage, and the only thing i have left to do is load it in a slider.</p>\n\n<pre><code>$sql = mysql_query(\"SELECT * FROM items ORDER BY item_date_added DESC LIMIT 10\")or die(mysql_error());\n\nwhile($row = mysql_fetch_array($sql)){\n    //$user_id = $row['user_id'];\n    $item_name = $row['item_name'];\n    $item_id = $row['item_id'];\n\n    $check_pic = \"users/$item_name.jpg\";\n\n\n\n        if (file_exists($check_pic)) {\n\n              $show_pic = \"&lt;img src=\\\"users/$item_name.jpg\\\" width=\\\"100px\\\" height=\\\"100px\\\" border=\\\"5\\\" id='img'/&gt;\";\n\n             //$user_pic3 = \"&lt;img src=\\\"users/$rid/image01.jpg\\\" width=\\\"50px\\\" height=\\\"50px\\\" border=\\\"1\\\" /&gt;\";\n              //$MemberDisplayList .= '&lt;a href=\"profile2/index.php?id=' . $rid . '\"&gt;' . $user_pic3 . '&lt;/a&gt;';\n\n\n              $i++;\n               $show_new_items .= \"&lt;a href='item_view?item_id=$item_id&amp;&amp;session_item=$item_id'&gt;$show_pic&lt;/a&gt;\";\n\n        }\n\n$newly_listed_names .= \" &lt;a href='item_view?item_id=$item_id&amp;&amp;session_item=$item_id'&gt; $item_name &lt;/a&gt; | \";\n\n\n\n}\n</code></pre>\n\n<p>///////// END  SHOW NEWLY ADDED ITEMS ///////////////////////////////////////////////////</p>\n\n<p>the newly added items in echoed in a div in the body. this is the website : <a href=\"http://www.clicktradeghana.com\" rel=\"nofollow\">http://www.clicktradeghana.com</a> </p>\n\n<p>Can anyone help me please! it's been bothering me for a while now. Thanks.</p>\n"},{"tags":["mysql","delete"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13262133,"title":"Delete rows in MySQL based on values of neighboring rows","body":"<p>I have a table that looks like the following:</p>\n\n<pre><code>eventId    activity    timestamp\n1          0           2012-10-22 20:10:00\n2          0           2012-10-22 20:10:20\n3          1           2012-10-22 20:11:25\n4          1           2012-10-22 20:12:20\n5          1           2012-10-22 20:12:22\n6          0           2012-10-22 20:12:30  &lt;--\n7          1           2012-10-22 20:12:25  &lt;--\n8          0           2012-10-22 20:14:46\n9          0           2012-10-22 20:14:48\n10         1           2012-10-22 20:15:45\n11         0           2012-10-22 20:16:00\n12         0           2012-10-22 20:17:00\n13         0           2012-10-22 20:17:13\n</code></pre>\n\n<p>I would like to delete every row that has an activity of 0 and is not chronologically next to a row with activity 1. So from this example I would delete rows with eventID 1, 8, 12, and 13. It is possible for events to be inserted into the table asynchronously, as shown by row 6 and 7.</p>\n\n<p>I know I can do this in a loop by checking each individual row and issuing a query to delete it if it matches my criteria, but that is very inefficient. I was wondering if it is possible to do this all in one query.</p>\n\n<p>It seems like if I could do something similar to</p>\n\n<pre><code>delete from mytable\nwhere activity = 0\nand (rownumber()+1).activity = 0\nand (rownumber()-1).activity = 0\norder by timestamp\n</code></pre>\n\n<p>this would be simple, but I don't think such functionality is possible.</p>\n"},{"tags":["mysql","innodb","maintenance","health-monitoring","heartbeat"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13259936,"title":"How to check database integrity in production mode using another daemon?","body":"<p>I want to have a daemon to monitor a database's health to make sure it is not corrupted, it will be running a script,</p>\n\n<p>what would be the best integrity check without compromising the performance?</p>\n\n<p>1- should I have dummy values in all tables, query for them, and if they got returned, assume the database is healthy?</p>\n\n<p>2- should I keep running check table on all tables every 5 minutes?</p>\n\n<p>3- should I run mysqlcheck? (it locks all tables..)</p>\n\n<p>Please give me your suggestions, </p>\n\n<p>the database will be running on its own and no one can access it later on, I just want to detect corruption, losing the whole data is acceptable, but I have zero tolerance of corruption or down time in my system. so I want to detect corruption early, and wipe off the db if necessary and reload the db.</p>\n\n<p>My default engine is INNODB</p>\n"},{"tags":["php","mysql","mysqli"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13262128,"title":"How to output module's names as an echo?","body":"<p>Ok, this is what is happening:</p>\n\n<ol>\n<li><p>When user opens the application, it will display 2 drop down menus, one for courses and the other for modules. The courses drops down menu will display a list of all the courses while in the mean time the modules drop down menu only shows the \"Please Select\" option. </p></li>\n<li><p>When the user selects a course, it will suddenly display the relevant modules in the modules drop down menu depending on the course chosen. The modules are displayed by the editsessionadmin.php file using the jquery function to navigate to the module.php page and displaying the relevant modules options.</p></li>\n<li><p>Now when the user submits the course and modules details, it is suppose to output the Course Id and Course Name and display the Module Id and the Module Name. Now it displays everything but the Module Name. </p></li>\n</ol>\n\n<p>My question is how can I get the Module Name to be displayed.</p>\n\n<p>Below is the editsession.php script where it contains the courses drop down menu and the module drop down menu with the \"Please Select\" option:</p>\n\n<pre><code>   &lt;?php\n\n    // connect to the database\n    include('connect.php');\n\n    /* check connection */\n    if (mysqli_connect_errno()) {\n    printf(\"Connect failed: %s\\n\", mysqli_connect_error());\n    die();\n    }\n\n    $sql = \"SELECT CourseId, CourseName FROM Course ORDER BY CourseId\"; \n\n    $sqlstmt=$mysqli-&gt;prepare($sql);\n\n    $sqlstmt-&gt;execute(); \n\n    $sqlstmt-&gt;bind_result($dbCourseId, $dbCourseName);\n\n    $courses = array(); // easier if you don't use generic names for data \n\n    $courseHTML = \"\";  \n    $courseHTML .= '&lt;select name=\"courses\" id=\"coursesDrop\" onchange=\"getModules();\"&gt;'.PHP_EOL; \n    $courseHTML .= '&lt;option value=\"\"&gt;Please Select&lt;/option&gt;'.PHP_EOL;  \n\n    while($sqlstmt-&gt;fetch()) \n    { \n    $course = $dbCourseId;\n    $coursename = $dbCourseName; \n    $courseHTML .= \"&lt;option value='\".$course.\"'&gt;\" . $course . \" - \" . $coursename . \"&lt;/option&gt;\".PHP_EOL;  \n\n    $outputcourse = \"\"; \n    $outputcourse .= \"&lt;p&gt;&lt;strong&gt;Course:&lt;/strong&gt; \" . $course .  \" - \"  . $coursename . \"&lt;/p&gt;\";\n\n    } \n\n    $courseHTML .= '&lt;/select&gt;'; \n\n    $moduleHTML = \"\";  \n    $moduleHTML .= '&lt;select name=\"modules\" id=\"modulesDrop\"&gt;'.PHP_EOL; \n    $moduleHTML .= '&lt;option value=\"\"&gt;Please Select&lt;/option&gt;'.PHP_EOL;  \n    $moduleHTML .= '&lt;/select&gt;'; \n\n\n    ?&gt;\n\n    &lt;script type=\"text/javascript\"&gt;\n\n    function getModules() { \n    var course = jQuery(\"#coursesDrop\").val(); \n    jQuery('#modulesDrop').empty(); \n    jQuery('#modulesDrop').html('&lt;option value=\"\"&gt;Please Select&lt;/option&gt;'); \n    jQuery.ajax({ \n    type: \"post\", \n    url:  \"module.php\", \n    data: { course:course }, \n    success: function(response){ \n    jQuery('#modulesDrop').append(response); \n    } \n    }); \n\n\n    }\n\n\n    &lt;/script&gt; \n\n&lt;form action=\"&lt;?php echo htmlentities($_SERVER['PHP_SELF']); ?&gt;\" method=\"post\" onsubmit=\"return validation();\"&gt;&lt;table&gt;\n&lt;tr&gt;\n&lt;th&gt;Course: &lt;?php echo $courseHTML; ?&gt;&lt;/th&gt;\n&lt;th&gt;Module: &lt;?php echo $moduleHTML; ?&gt;&lt;/th&gt;\n&lt;/tr&gt;\n&lt;/table&gt;\n&lt;p&gt;&lt;input id=\"moduleSubmit\" type=\"submit\" value=\"Submit Course and Module\" name=\"moduleSubmit\" /&gt;&lt;/p&gt;\n&lt;div id=\"moduleAlert\"&gt;&lt;/div&gt;\n&lt;/form&gt;\n\n&lt;?php\n\nif (isset($_POST['moduleSubmit'])) {    \n\n$outputmodule = \"\"; \n$outputmodule = \"&lt;p&gt;&lt;strong&gt;Module:&lt;/strong&gt; \" . $_POST['modules'] . \"&lt;/p&gt;\";\n\necho $outputcourse;\necho $outputmodule;\n}\n\n?&gt;\n</code></pre>\n\n<p>Below is the module.php where it displays the modules options in the module drop down menu:</p>\n\n<pre><code>&lt;?php\n\n     // connect to the database\n include('connect.php');\n\n /* check connection */\n if (mysqli_connect_errno()) {\nprintf(\"Connect failed: %s\\n\", mysqli_connect_error());\ndie();\n}\n\n\n$course = isset($_POST['course']) ? $_POST['course'] : ''; \n\n$sql = \"\nSELECT cm.CourseId, cm.ModuleId, \nc.CourseName,\nm.ModuleName\nFROM Course c\nINNER JOIN Course_Module cm ON c.CourseId = cm.CourseId\nJOIN Module m ON cm.ModuleId = m.ModuleId\nWHERE\n(c.CourseId = ?)\nORDER BY c.CourseId, m.ModuleId\n\"; \n\n $sqlstmt=$mysqli-&gt;prepare($sql);\n\n $sqlstmt-&gt;bind_param(\"s\",$course);\n\n $sqlstmt-&gt;execute(); \n\n $sqlstmt-&gt;bind_result($dbCourseId,$dbModuleId,$dbCourseName,$dbModuleName);\n\n\n$moduleHTML  = \"\";  \n\n while($sqlstmt-&gt;fetch()) { \n    $moduleHTML .= \"&lt;option value='$dbModuleId'&gt;\" . $dbModuleId . \" - \" . $dbModuleName . \"&lt;/option&gt;\".PHP_EOL;   \n} \n\n\necho $moduleHTML; \n\n $sqlstmt-&gt;execute(); \n\n\n?&gt;\n</code></pre>\n"},{"tags":["mysql","ruby-on-rails-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13261800,"title":"Rails and Windows 8 - \"%1 is not a valid Win32 application\" error","body":"<h2>The Goal</h2>\n\n<p><strong>I'm trying to get Rails going</strong> for the first time <strong>and connected to MySQL</strong>, all on my local machine. As far as I can tell, Rails is installed according to spec. My setup is:</p>\n\n<ul>\n<li>Ruby 1.9.3 (installed via the latest version of the RubyInstaller)</li>\n<li>Rails 3.2.8</li>\n<li>Windows 8</li>\n<li>WAMP (which has the MySQL database I'd like to connect Rails to)</li>\n</ul>\n\n<h2>The Problem</h2>\n\n<p>When I run the command <code>rails s</code>, I receive the following error:</p>\n\n<pre><code>C:/wamp/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/mysql2.rb:2:in 'require': 193: %1 is not a valid Win32 application - C:/wamp/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/1.9/mysql2.so (LoadError)\n    from C:/wamp/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/\nlib/mysql2/mysql2.rb:2:in '&lt;top (required)&gt;'\n    from C:/wamp/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/\nlib/mysql2.rb:9:in 'require'\n    from C:/wamp/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/\nlib/mysql2.rb:9:in '&lt;top (required)&gt;'\n    from C:/wamp/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/\nruntime.rb:68:in 'require'\n    from C:/wamp/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/\nruntime.rb:68:in 'block (2 levels) in require'\n    from C:/wamp/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/\nruntime.rb:66:in 'each'\n    from C:/wamp/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/\nruntime.rb:66:in 'block in require'\n    from C:/wamp/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/\nruntime.rb:55:in 'each'\n    from C:/wamp/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/\nruntime.rb:55:in 'require'\n    from C:/wamp/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.1/lib/bundler.\nrb:128:in 'require'\n    from C:/Users/Andrew/Desktop/rails_test/simple_cms/config/application.rb\n:7:in '&lt;top (required)&gt;'\n    from C:/wamp/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/c\nommands.rb:53:in 'require'\n    from C:/wamp/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/c\nommands.rb:53:in 'block in &lt;top (required)&gt;'\n    from C:/wamp/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/c\nommands.rb:50:in 'tap'\n    from C:/wamp/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/c\nommands.rb:50:in '&lt;top (required)&gt;'\n    from script/rails:6:in 'require'\n    from script/rails:6:in '&lt;main&gt;'\n</code></pre>\n\n<p>So there seems to be a problem with the <code>mysql2</code> gem? My reading has shown me that ~1-2 years ago it was a big issue, but I was of the understanding that the problems with it had been resolved at this point. (And if it is indeed better than <code>mysql</code>, then I'd like to use it!)</p>\n\n<h2>What I've Tried</h2>\n\n<ul>\n<li>I <em>was</em> getting the error \"126: the specified module could not be found\"; while looking up information regarding that, I came across the suggestion to copy \"libmysql.dll\" to Ruby's bin folder. It apparently fixed the 126 error, but now I'm getting this 193 error.</li>\n<li>Completely uninstalling Ruby, Rails, and reinstalling fresh multiple times using various different guides.</li>\n<li>Found <a href=\"http://myrailslearnings.wordpress.com/2012/07/03/error-cdevruby193librubysite_ruby1-9-1rubygemscustom_require-rb36in-require-193-1-is-not-a-valid-win32-application/\" rel=\"nofollow\">this blog post</a> where the author found that another program he had running was preventing <code>rails s</code> from working, so I closed everything and tried again. Nothing.</li>\n<li>Spent the past two days reading blogs and different posts by folks having the same issue, but it seems like <em>all</em> of them are from over a year ago, linking to (apparently successful!) fixes where the links are, unfortunately, now dead.</li>\n</ul>\n\n<p>If any further information is needed, please let me know! I've been Googling this problem for a large part of the past 48 hours to absolutely no avail. Any direction would be appreciated. :) Thanks!</p>\n"},{"tags":["mysql","join"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13261282,"title":"mysql get opposite results of full join","body":"<p>This query gives me the results I want and it works perfectly.</p>\n\n<pre><code>        SELECT * \n        FROM npc5 \n        FULL JOIN joeall ON merchnumber = joeall.id \n        WHERE date='$period' \n        ORDER BY DATE\");\n</code></pre>\n\n<p>Now I would like to get the the records where the merchant number is not in the <code>joeall</code> table, something like <code>ON merchnumber != joeall.id</code> </p>\n"},{"tags":["php","mysql","excel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12950978,"title":"Using libXL with PHP and mySQL","body":"<p>I'm working on importing and exporting very high volumes of data from Excel into/out of MySQL via PHP. I have a working solution but it is very memory intensive and slow.</p>\n\n<p>I have seen that a developer has produced a Unix build PHP script incorporating libXL - a very fast C library for excel that costs about $200. This purports to process 10,000 cells in 0.03 secs using 262kb of PHP memory.</p>\n\n<p>I also notice that someone posting on this site is developing a stand alone dll based on libXL which I don't think will be suitable for my purpose. </p>\n\n<p>Questions:</p>\n\n<p>Is anyone out there looking to produce a simple to implement PHP libaray built around libXL which I could deploy on both a local Windows based XAMPP rig and onto my UNIX based host (Hostpapa while I'm developing)</p>\n\n<p>Would I need to buy libXL for both Windows and UNIX to work both locally and on-line</p>\n\n<p>Are there any other PHP solutions which are very fast and have low memory requirements</p>\n\n<p>I have tried every PHP solution suggested by the PHPExcel developer, Mark Baker (thanks Mark), and nothing meets my requirements fully so no suggestions along those lines please.</p>\n\n<p>I am considering learning Perl so I can use the excellent Excel parser that exists but unfortunately I've got time constraints and I think that will take me too long.</p>\n"},{"tags":["mysql","geometry"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13261472,"title":"Geometry in MySQL","body":"<p>I understood what <code>POINT()</code> is in <code>MySQL</code> but I just cant figure out what is this format means\n<code>1 POINT (8.04665153 -44.39902520)</code> I have the following <code>CSV</code></p>\n\n<p><code>104|104||CURR|N|14102|4428||71816|71816|1|1 POINT (8.04665153 -44.39902520)|</code></p>\n\n<p>I am using the following query to load the <code>CSV</code> into my table</p>\n\n<pre><code>LOAD DATA LOCAL INFILE '/data/disc/sad1.csv' INTO TABLE sad1 \nFIELDS TERMINATED BY '|' ENCLOSED BY '\"' lines terminated by '\\n' IGNORE 23 LINES\n(@var1, @var2,@var3,@var4,@var5,@var6,@var7,@var8,@var9,@var10,@var11,@var12)\nSET `house_number` = @var1,\n    `range_low` = @var2,\n    `range_high` = @var3,\n    `status` = @var4,\n    `unofficial_flag` = @var5,\n    `rcl_id` = @var6,\n    `rna_id` = @var7,\n    `alt_id` = @var8,\n    `se_row_id` = @var9,\n    `id` = @var10,\n    `audit_id` = @var11,\n    `shape` = GeomFromText(@var12);\n</code></pre>\n\n<p>I am getting <code>NULL</code> for the <code>shape</code> field. When I changed <code>1 POINT (8.04665153 -44.39902520)</code> to <code>POINT (8.04665153 -44.39902520)</code> I am getting some data filled in. How should I treat the prefix <code>1</code> in the above data ?</p>\n"},{"tags":["mysql","ruby-on-rails","ruby","bundle","mysql2"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":4,"score":1,"question_id":13261360,"title":"Error with mysql2 gem loading Rails env on OSX: \"Symbol not found: _rb_prohibit_interrupt\"","body":"<ul>\n<li><p>I'm on OSX 10.7.5</p></li>\n<li><p>I'm setting up an existing Rails 3 app</p></li>\n<li><p>I've got the 64-bit dmg package of MySQL (v5.5.28) installed</p></li>\n<li><p>I've installed the mysql2 gem (v0.3.11) as part of the app bundle</p></li>\n</ul>\n\n<p>Whenever i try to load the rails env (raking, loading console, etc.), I get this:\nrake aborted!\ndlopen(/Users/daretorant/.rvm/gems/ruby-1.9.3-p194@amp/bundler/gems/mysql2-f4d004ac5194/lib/mysql2/mysql2.bundle, 9): Symbol not found: _rb_prohibit_interrupt\n  Referenced from: /Users/daretorant/.rvm/gems/ruby-1.9.3-p194@amp/bundler/gems/mysql2-f4d004ac5194/lib/mysql2/mysql2.bundle\n  Expected in: flat namespace\n in /Users/daretorant/.rvm/gems/ruby-1.9.3-p194@amp/bundler/gems/mysql2-f4d004ac5194/lib/mysql2/mysql2.bundle - /Users/daretorant/.rvm/gems/ruby-1.9.3-p194@amp/bundler/gems/mysql2-f4d004ac5194/lib/mysql2/mysql2.bundle\n/Users/daretorant/.rvm/gems/ruby-1.9.3-p194@amp/bundler/gems/mysql2-f4d004ac5194/lib/mysql2.rb:9:in <code>require'\n/Users/daretorant/.rvm/gems/ruby-1.9.3-p194@amp/bundler/gems/mysql2-f4d004ac5194/lib/mysql2.rb:9:in</code>'</p>\n\n<p>.........</p>\n\n<p>Things I've tried:</p>\n\n<ul>\n<li><p>other versions of mysql2</p></li>\n<li><p>fresh install of mysql itself</p></li>\n<li><p>cleaning my gemset</p></li>\n<li><p>cleaning rvm</p></li>\n<li><p>pulling hair out</p></li>\n</ul>\n\n<p>Help?</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13261174,"title":"MySQL - multiple unique / constrain to quantity","body":"<p>My question is more general than the example, but I think the only way to illustrate the idea is with a sample.</p>\n\n<p>Let's say I want to create a database for a chat application.  There will be a list of topics.  Any \"room\" 4 users at any one time.</p>\n\n<p>Say there's a topic called \"beethoven\".  If a user selects that topic, a room is fetched or created.  Once 4 users have joined that room, another instance of the room is created (same topic), which will take up to 4 more users before another instance is created.  If a user from the first room instance leaves, that slot is open, so the 9th user to join the topic will be sent to the first room instance.</p>\n\n<p>What's the best way to manage this?  I have 2 ideas:</p>\n\n<ol>\n<li>\"Topic\" table: id, label</li>\n<li>\"Rooms\" table: id, topicId</li>\n<li>\"Population\" table: roomId, userId</li>\n</ol>\n\n<p>When a user selects/joins a topic, something like <code>SELECT COUNT(userId) FROM Population WHERE topicId = &lt;id&gt;</code>...  if count > 4, create a new Room, insert it and return the insert id.  When a user leaves a room, that row in Population is deleted.</p>\n\n<p>Or...</p>\n\n<ol>\n<li>\"Topic\" table: id, label</li>\n<li>\"Rooms\" table: id, topicId, user1, user2, user3, user4.</li>\n</ol>\n\n<p>Then when a user joins, something like <code>SELECT id FROM Rooms WHERE ISNULL(user1) OR ISNULL(user2) OR ISNULL(user3) OR ISNULL(user4) LIMIT 1</code></p>\n\n<p>If there's no matching rows, insert a new Room and return the insert id.  When a user leaves a room, that column is set to NULL.</p>\n\n<p>TYIA.</p>\n"},{"tags":["php","mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":55,"score":-1,"question_id":13256652,"title":"Inserting a date automatically","body":"<p>Can someone show me how I would add a date automatically upon submit to this page? The DB id is \"table1\" and the feild id is \"date\". </p>\n\n<p>My code:</p>\n\n<pre><code>&lt;?php\n\nif (isset($_POST[\"submit\"]) &amp;&amp; $_POST[\"submit\"] == \"Submit\")\n{\n    for ($count = 1; $count &lt;= 9; $count++)\n    {\n        $fields[$count] = \"\";\n        if (isset($_POST[\"field\" . $count . \"\"]))\n        {\n            $fields[$count] = trim($_POST[\"field\" . $count . \"\"]);\n            //echo $fields[$count] . \"&lt;br /&gt;\";\n        }\n    }\n\n    $con = mysql_connect(\"local\", \"user\", \"pass\");\n    mysql_select_db(\"DB\", $con);\n\n    $carriername = mysql_real_escape_string($_POST['carriername']);\n    $fromzip = mysql_real_escape_string($_POST['fromzip']);\n    $tozip = mysql_real_escape_string($_POST['tozip']);\n    $typeofequipment = mysql_real_escape_string($_POST['typeofequipment']);\n    $weight = mysql_real_escape_string($_POST['weight']);\n    $length = mysql_real_escape_string($_POST['length']);\n    $paymentamount = mysql_real_escape_string($_POST['paymentamount']);\n    $contactperson = mysql_real_escape_string($_POST['contactperson']);\n    $loadtype = mysql_real_escape_string($_POST['loadtype']);\n\n    $insert = \"INSERT INTO table1 (`carriername` ,`fromzip` ,`tozip` ,`typeofequipment` ,`weight` ,`length` ,`paymentamount` ,`contactperson` ,`loadtype`) VALUES('$carriername' ,'$fromzip' ,'$tozip' ,'$typeofequipment' ,'$weight' ,'$length' ,'$paymentamount' ,'$contactperson' ,'$loadtype');\";\n    mysql_query($insert) or die(mysql_error());\n\n    $select = \"SELECT `carriername` ,`fromzip` ,`tozip` ,`typeofequipment` ,`weight` ,`length` ,`paymentamount` ,`contactperson` ,`loadtype` FROM `table1` ORDER BY `paymentamount` DESC;\";\n    $result = mysql_query($select) or die(mysql_error());\n}\n?&gt;\n&lt;/script&gt;\n&lt;style =\"text-align: center; margin-left: auto; margin-right: auto;\"&gt;&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div\n style=\"border: 2px solid rgb(0, 0, 0); margin: 16px 20px 20px; width: 400px; background-color: rgb(236, 233, 216); text-align: center; float: left;\"&gt;\n&lt;form action=\"\" method=\"post\";\"&gt;\n  &lt;div\n  style=\"margin: 8px auto auto; width: 300px; font-family: arial; text-align: left;\"&gt;&lt;br&gt;\n  &lt;table style=\"font-weight: normal; width: 100%; font-size: 12px;\"\n border=\"1\" bordercolor=\"#929087\" cellpadding=\"6\" cellspacing=\"0\"&gt;\n   &lt;table\n style=\"font-weight: normal; width: 100%; text-align: right; font-size: 12px;\"\n border=\"1\" bordercolor=\"#929087\" cellpadding=\"6\" cellspacing=\"0\"&gt;\n    &lt;tbody&gt;\n    &lt;tr&gt;\n    &lt;td style=\"width: 10%;\"&gt;Carrier:&lt;/td&gt;&lt;td&gt;\n &lt;?php  \n\n$con = mysql_connect(\"local\", \"user\", \"pass\");\n    mysql_select_db(\"DB\", $con);\n\n$query=(\"SELECT * FROM table2\"); \n\n$result=mysql_query($query) or die (\"Unable to Make the Query:\" . mysql_error() ); \necho \"&lt;select name=carriername&gt;\";   \n\nwhile($row=mysql_fetch_array($result)){  \n\necho \"&lt;OPTION VALUE=\".$row['carriername'].\"&gt;\".$row['carriername'].\"&lt;/OPTION&gt;\"; \n} \n\necho \"&lt;/select&gt;\";  \n\n\n?&gt;\n              &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n              &lt;td style=\"width: 35%;\"&gt;Pick Zip:&lt;/td&gt;&lt;td&gt; &lt;input id=\"fromzip\" name=\"fromzip\" maxlength=\"50\"\n style=\"width: 100%;\" type=\"text\"&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n              &lt;td style=\"width: 35%;\"&gt;Drop Zip:&lt;/td&gt;&lt;td&gt; &lt;input id=\"tozip\" name=\"tozip\" maxlength=\"50\"\n style=\"width: 100%;\" type=\"text\"&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n              &lt;td style=\"width: 35%;\"&gt;Load Type:&lt;/td&gt;&lt;td&gt; &lt;input id=\"loadtype\" name=\"loadtype\" maxlength=\"50\"\n style=\"width: 100%;\" type=\"text\"&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n              &lt;td style=\"width: 35%;\"&gt;Rate:&lt;/td&gt;&lt;td&gt; &lt;input id=\"paymentamount\" name=\"paymentamount\" maxlength=\"50\"\n style=\"width: 100%;\" type=\"text\"&gt;\n        &lt;/tr&gt;\n          &lt;/tbody&gt;\n  &lt;/table&gt;\n  &lt;p style=\"text-align: center;\"&gt;&lt;input name=\"submit\" value=\"Submit\"\n class=\"submit\" type=\"submit\"&gt;&lt;/p&gt;\n  &lt;/div&gt;\n&lt;/form&gt;\n&lt;/div&gt;\n&lt;p style=\"margin-bottom: -20px;\"&gt;&amp;nbsp;&lt;/p&gt;\n&lt;/body&gt;\n</code></pre>\n"},{"tags":["mysql","sql","sql-order-by","order","union"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13261113,"title":"mysql order by and union and parentheses","body":"<p>so I have a query like this:</p>\n\n<pre><code>(SELECT last_updated FROM ...) UNION (SELECT last_updated FROM ...) ORDER BY last_updated\n</code></pre>\n\n<p>Notice that the ORDER BY statement is outside both parentheses...When I run the query it appears that it does a combined order by last_updated (which is what I want to do). IE. it took the combined unioned result set and order them all by last_updated as a single set.</p>\n\n<p>However, I want to confirm that this is indeed what this will do, so does anyone have any link to some docs that confirm that this will indeed happen? Can anyone confirm for a FACT that this will indeed happen if you perform the query this way? </p>\n"},{"tags":["mysql","import","load-data-infile"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13260750,"title":"MySQL \"load data local infile\" just loads 1 row","body":"<p>I need to upload a csv file to my MySQL table. For some reason, when I run the command below in Mac Terminal, just one row is inserted. How can I upload all the rows?</p>\n\n<pre><code>load data local infile 'Research/cube_sample_data.csv' \ninto table ad_spend \nfields terminated by ',' \nlines terminated by '\\n';\n</code></pre>\n\n<p>I tried <code>'\\r\\n'</code> and <code>',\\r\\n'</code> but no success. I keep getting this message:</p>\n\n<pre><code>Query OK, 1 row affected, 0 warnings (0.00 sec)\nRecords: 1  Deleted: 0  Skipped: 0  Warnings: 0\n</code></pre>\n\n<p>my file is like this: </p>\n\n<pre><code>entertainment, games, 14\n\nentertainment, movies, 12\n</code></pre>\n\n<p>and I have an empty table with 3 columns: </p>\n\n<pre><code>category (varchar), subcat (varchar), adspend (int)\n</code></pre>\n"},{"tags":["php","mysql","pdo","limit","posts"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13260783,"title":"Optional LIMIT for a function grabbing all post with PDO","body":"<p>I'm trying to create a function that will grab all posts within a table. I also wanted to add a optional LIMIT parameter. Here is an example:</p>\n\n<pre><code>function get_all_posts($conn, $limit = 0) {\nif ($limit &gt; 0) {\n    $stmt = $conn-&gt;prepare(\"SELECT * FROM posts LIMIT :limit\");\n    $stmt-&gt;execute(array(\n        ':limit' =&gt; $limit\n    ));\n    $results = $stmt-&gt;fetchAll();\n    return $results ? $results : false ;\n} else {\n    $stmt = $conn-&gt;prepare(\"SELECT * FROM posts\");\n    $stmt-&gt;execute();\n    $results = $stmt-&gt;fetchAll();\n    return $results ? $results : false ;\n}\n}\n</code></pre>\n\n<p>If I call the function without using the limit parameter it works and displays all the posts. But if I call the function like this: get_all_posts($conn, \"1\"); Then I get this error:</p>\n\n<blockquote>\n  <p>Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''1'' at line 1' in /Applications/MAMP/htdocs/sandbox/blog2/functions.php:19 Stack trace: #0 /Applications/MAMP/htdocs/sandbox/blog2/functions.php(19): PDOStatement->execute(Array) #1 /Applications/MAMP/htdocs/sandbox/blog2/index.php(12): get_all_posts(Object(PDO), '1') #2 {main} thrown in /Applications/MAMP/htdocs/sandbox/blog2/functions.php on line 19</p>\n</blockquote>\n\n<p>Can anyone show me where I've gone wrong?</p>\n"},{"tags":["mysql","perl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13260881,"title":"printing contents when connected to database using perl","body":"<p>Below, is the code to connect mysql database and retrieving results using perl.</p>\n\n<p>In the below example, samples table has 10 columns. I just want the second and third columns of record 99 into variables.</p>\n\n<p>Can some one help me in this?</p>\n\n<pre><code>use strict;\n use warnings;\n use DBI;\n\nmy $dbh = DBI-&gt;connect('dbi:mysql:perltest','root','password') or die \"Connection Error: $DBI::errstr\\n\";\nmy $sql = \"select * from samples where record='99'\";\nmy $sth = $dbh-&gt;prepare($sql);\n$sth-&gt;execute or die \"SQL Error: $DBI::errstr\\n\";\nwhile (my @row = $sth-&gt;fetchrow_array) {\n print \"@row\\n\";\n } \n</code></pre>\n\n<p>Thanks in advance</p>\n"},{"tags":["asp.net","mysql","asp.net-mvc","entity-framework"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1666,"score":2,"question_id":1440496,"title":"Problems publishing website","body":"<p>Recently I've began experimenting with ASP.NET MVC and the Entity Framework. Since my hostingprovider only provides me with MySQL I've been trying to set that up.\nLocally everything works fine, but after I publish it I get the following error:</p>\n\n<pre><code>[ProviderIncompatibleException: The store provider factory type 'MySql.Data.MySqlClient.MySqlClientFactory' does not implement the IServiceProvider interface. Use a store provider that implements this interface.]\n</code></pre>\n\n<p>Since I'm rather inexperienced with the configuring this and google is lacking a good answer I thought I'd try here.\nMy best guess is something missing in the web.config file, but can't really make out what it is. </p>\n\n<p>Any help would be greatly appreciated!</p>\n"},{"tags":["mysql","database","query"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13252509,"title":"Query for correlated tables","body":"<p>I am currently trying to run a query that will show all tables that correlate with each other. I did not make the table design. So I am running into some trouble in making: It's not clear how <code>office_hours</code> table correlates with <code>schedule</code> table? Overall how can I display properly all tables that correlate through a query? </p>\n\n<pre><code>SELECT * \nFROM schedule\nINNER JOIN semester ON schedule.semester_id = semester.id\nINNER JOIN office_hours ON office_hours.id = schedule.???\n</code></pre>\n"},{"tags":["mysql","sql","perl","relationship"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":13259737,"title":"Perl/MySQL Relationship Query","body":"<p>I have the following perl code that will eventually be a webpage:</p>\n\n<pre><code>my($dbh) = DBI-&gt;connect(\"DBI:mysql:host=dbsrv;database=database\",\"my_sqlu\",\"my_sqlp\") or die \"Canny Connect\";\nmy($sql) = \"SELECT * FROM hardware where srv_name = \\\"$srv_name\\\"\";\nmy($sth) = $dbh-&gt;prepare($sql);\n$sth-&gt;execute();\n\n$sth-&gt;bind_col( 1, \\my($db_id));\n$sth-&gt;bind_col( 2, \\my($db_srv_name));\n$sth-&gt;bind_col( 5, \\my($db_site));\n$sth-&gt;fetchrow();\n$sth-&gt;finish ();\nmy($sql) = \"SELECT sites.\\`site_code\\`, sites.\\`long_name\\` FROM \\`hardware\\` JOIN \\`sites\\` ON \\`sites\\`.id=\\`hardware\\`.\\`site\\` where \\`hardware\\`.\\`id\\`=\\'$db_id\\'\";\nmy($sth) = $dbh-&gt;prepare($sql);\n$sth-&gt;execute();\n$sth-&gt;bind_col( 1, \\my($db_site_code));\n$sth-&gt;bind_col( 2, \\my($db_long_name));\n$sth-&gt;fetchrow();\n$sth-&gt;finish ();\n$dbh-&gt;disconnect;\nprint \"$db_site_code&lt;br&gt;$db_long_name\";\n</code></pre>\n\n<p>The query above does work however what I'm trying to find out is there any way I can run one SQL query and get the db_site_code and db_long_name from the sites DB without running the 2nd query? The hardware DB has the foreign key 'id' in the sites Db.</p>\n\n<p>When you read anything about relational DBs they all say it's by far the most efficient method of getting data from your database but I just can't see how this is any quicker than just running 2 select queries. What I've done above would surely take longer than <code>\"select from hardware where srv_name = $srv_name\"</code> then <code>\"select from sites where id = db_site_id\"</code>? Any comments are greatly appreciated.</p>\n"},{"tags":["mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13260312,"title":"mysql - multiple where and search","body":"<p>I'm trying to write a SQL query that satisfies multiple criteria.</p>\n\n<p>Of these, most are connected via a column, so joins are possible, however, some queries are such that I'd have to search additional tables for the information. What would be the least expensive and best way to do this?</p>\n\n<p>Let's say that we have a few tables.</p>\n\n<p>One table contains information such as sales information for a server: the salesperson, client id, service lease term, timestamps etc. It is possible that a client has multiple sales but with a different \"service\". I'd need to pick up all of the different ones. </p>\n\n<p>Another table has the quotes for the services, I'd need to pick some information out about this, whilst another, which could be joined to this one has some more information.</p>\n\n<p>Those tables are linked by a common client ID, so joins are possible, but I'd also need to search the first table for multiple instances of the client ID. Of course, I'd want to restrict the search to certain timestamps, which I can easily do as the timestamps are stored in MySQL format. </p>\n"},{"tags":["mysql","transactions","sharding"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":273,"score":0,"question_id":10051503,"title":"Sharding and Transactions with MySQL","body":"<p>With sharding, how can you maintain a reliable transaction across multiple database servers?</p>\n\n<p>For example, if I had a table named <code>AccountLedger</code> on one database server (MySQL instance)  and a table named <code>User</code> on another database server, is it possible to run a transaction across both database instances that will both reliably commit, or rollback on failure?</p>\n\n<p>Example transaction:</p>\n\n<p>AccountLedger database server:</p>\n\n<pre><code>START TRANSACTION;\nINSERT INTO AccountLedger SET\n    UserID = @UserID,\n    Date = @Date,\n    Debit = @Debit,\n    Balance = @Balance;\n</code></pre>\n\n<p>User database server:</p>\n\n<pre><code>START TRANSACTION;\nUPDATE User SET\n    Balance = @Balance\nWHERE UserID = @UserID;\n</code></pre>\n\n<p>AccountLedger database server:</p>\n\n<pre><code>COMMIT;\n</code></pre>\n\n<p>User database server:</p>\n\n<pre><code>COMMIT; -- What happens if the COMMIT fails here (power goes out or whatever)\n</code></pre>\n\n<p>I've read a quite a lot about sharding, but I can't seem to find any information on using  transactions with sharding. Can someone point me in the right direction?</p>\n"},{"tags":["mysql","sql","sharding"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12997895,"title":"Sharding and ID generation as instagram","body":"<p>My question is regarding ID generation for sharded environment. I am following the same steps as <a href=\"http://instagram-engineering.tumblr.com/post/10853187575/sharding-ids-at-instagram\" rel=\"nofollow\">instagram did</a> for generating unique ids. I have a few question on the implementation of this id generation in MySQL.</p>\n\n<p>This is how the ID is being generated (This is a PGQL stored procedure.)</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION insta5.next_id(OUT result bigint) AS $$\nDECLARE\n    our_epoch bigint := 1314220021721;\n    seq_id bigint;\n    now_millis bigint;\n    shard_id int := 5;\nBEGIN\n    SELECT nextval('insta5.table_id_seq') %% 1024 INTO seq_id;\n\n    SELECT FLOOR(EXTRACT(EPOCH FROM clock_timestamp()) * 1000) INTO now_millis;\n    result := (now_millis - our_epoch) &lt;&lt; 23;\n    result := result | (shard_id &lt;&lt; 10);\n    result := result | (seq_id);\nEND;\n$$ LANGUAGE PLPGSQL;\n\n\n\nCREATE TABLE insta5.our_table (\n    \"id\" bigint NOT NULL DEFAULT insta5.next_id(),\n    ...rest of table schema...\n)\n</code></pre>\n\n<p><strong>MY question is</strong> how can I do that in MySQL (equivalent code).  This stored procedure should be called from a query to get the next id.</p>\n\n<p><strong>My other question</strong> is regarding querying the shards.  From what I understand they use logical shards that are maps to actual servers. If they decide to map a logical shard to a new server, this means that they have to query two servers at the same time to aggregate the results, because before they assigned a new server for the same logical shard, some data was added to the older server. I just wanted to know if there's a better way to use logical shards and having the option to query a single server where the data resides instead of querying all the servers that are and were belong to that logical shard?</p>\n\n<p>Thanks.</p>\n"},{"tags":["mysql","query","many-to-one"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":20,"score":-1,"question_id":13260335,"title":"Querying Many-to-One in Mysql","body":"<p>The following image illustrates how my database is organized:</p>\n\n<p><img src=\"http://akplebani.com/graphic.png\" alt=\"a busy cat\"></p>\n\n<p>What I'm looking for is a <strong>single</strong> query wich results gives me <strong>coordinate_name</strong>, <strong>title_project</strong>, <strong>title_solution</strong> and <strong>name_client</strong>, based on coordinate <strong>date</strong>.</p>\n\n<p>I'm trying something like this:</p>\n\n<pre><code>SELECT coordinate_name, title_project, title_solution, name_client FROM coordinate NATURAL JOIN client WHERE date BETWEEN ? AND ?\n</code></pre>\n"},{"tags":["mysql","pivot"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":13260046,"title":"MySQL: Pivot multiple rows into single column?","body":"<p><b>Database: MySQL</b></p>\n\n<p><b>Table: Teams</b></p>\n\n<pre><code>TeamID    INT\nTeamName  VARCHAR(20)\n</code></pre>\n\n<p><b>Table: People</b></p>\n\n<pre><code>PeopleID   INT\nFirstNameID INT\nLastNameID  INT\n</code></pre>\n\n<p><b>Table: TeamMembers</b></p>\n\n<pre><code>TeamID  INT\nPeopleID  INT\n</code></pre>\n\n<p><b>Table Example: Teams</b></p>\n\n<pre><code>TeamID       TeamName\n1            Team Xstream\n2            Team INsanity\n</code></pre>\n\n<p><b>Table Example: People</b></p>\n\n<pre><code>PeopleID   FirstNameID   LastNameID\n1          1351          453\n2          5463          763\n3          976           8762\n4          87            784\n5          187           465\n6          761           566\n7          376           2134\n</code></pre>\n\n<p><b>Table Example: TeamMembers</b></p>\n\n<pre><code>TeamID       PeopleID\n1            1\n1            3\n1            7\n2            2\n2            4\n2            5\n2            6\n</code></pre>\n\n<p><b>Desired Output:</b></p>\n\n<pre><code>TeamName       TeamMembers\nTeam Xstream   John Smith/Jane Doe/Daniel Davis\nTeam INsanity  Sally Sue/Tom Thomas/Jack Jones/Harry Henderson\n</code></pre>\n\n<p>There will not be a set number of TeamMembers per team, so it's not like I could have three subqueries because there will only be three team members.  I've lightly looked online, but I always get the best and most thorough answers here.  Any ideas or pointers, please let me know.  I honestly have no idea where to begin here.  Thanks.</p>\n"},{"tags":["mysql","join","count","distinct"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13249346,"title":"Counting results of join on duplicate field","body":"<p>I have a table1 containing duplicate column value </p>\n\n<p>Table1</p>\n\n<pre><code>id   code\n1   201202  0000    1111\n2   201202  0000    9999\n3   201203  0000    9999\n4   201203  0000    0999\n5   201204  1000    1999\n6   201204  2000    2999\n7   201205  3000    3999\n8   201205  4000    4999\n9   201205  5000    5999\n</code></pre>\n\n<p>Table 2</p>\n\n<pre><code>id   numbers\n1   2012020010  \n2   2012024929  \n3   2012033838\n4   2012052434\n5   2012052229\n6   2012052232\n</code></pre>\n\n<p>I want to count all the numbers in table2 that are substring of distinct code in table 1\ni.e. result should be</p>\n\n<pre><code>code   frequency\n201202   2\n201203   1\n201205   3\n</code></pre>\n\n<p>I have been able to get all the numbers for every code but can't figure out how to count them</p>\n\n<pre><code>SELECT DISTINCT table1.code , table1.id, table2.number AS ph_npa, count( * )\nFROM table1\nINNER JOIN table2 ON substr( table2.number, 1, 6 ) = table1.code\nGROUP BY table1.number\n</code></pre>\n\n<p>any help is appreciated. </p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13256782,"title":"How can I have dropdown box with the list and inserted value as default for UPDATE In PHP.?","body":"<p>First I would like to update the records.\nI created dropdown box which has values from mySQL FROM SELECT statemet it's working fine with one previously selected database entry. \nbut what I would like to have another values for the modification wich i have in another table.</p>\n\n<p><strong>DROP DOWN FOR THE UPDATE from order table value.</strong></p>\n\n<pre><code>    echo '&lt;div class = \"MediaType\" &gt;'; //Start class Media Type\n    echo '&lt;strong&gt;&lt;label for=\"rate\"&gt;Media Type&lt;/label&gt;&lt;/strong&gt;';\n    echo '&lt;br/&gt;&lt;br/&gt;' ;\n\n        $sql = \"SELECT `media_type` FROM `order` where `po_number` = '\".$ponumber.\"'\";\n        $result = mysql_query($sql);\n\n        while ($row = mysql_fetch_array($result)) \n            {\n                echo \"&lt;select class='dropdownsize' name='media_type[]' tabindex='$k'&gt;\";\n\n                echo \"&lt;option value='\" . $row['media_type'] . \"'&gt;\" . $row['media_type'] . \"&lt;/option&gt;\";\n                echo '&lt;/select&gt;';\n                echo '&lt;br/&gt;';\n            }\n\necho '&lt;/div&gt;'; //End Class Media Type\n</code></pre>\n\n<p>It's give me value \"ONLINE\" in dropdown which I selected and Inserted during the Insert process.</p>\n\n<p><strong>DROP DOWN FOR INSERT Page from media_type table</strong></p>\n\n<pre><code>echo '&lt;div class = \"MediaType\" &gt;'; //Start class Media Type\n    echo '&lt;strong&gt;&lt;label for=\"rate\"&gt;Media Type&lt;/label&gt;&lt;/strong&gt;';\n    echo '&lt;br/&gt;&lt;br/&gt;' ;\n\n        //for loop for dropdown from user index//\n        for($k=1;$k&lt;=$textboxindex;$k++)\n        {\n        $sql = \"SELECT media_type FROM media_type\";\n        $result = mysql_query($sql);\n            echo \"&lt;select class='dropdownsize' name='media_type[]' tabindex='$k'&gt;\";\n            while ($row = mysql_fetch_array($result)) \n            {\n                echo \"&lt;option value='\" . $row['media_type'] . \"'&gt;\" . $row['media_type'] . \"&lt;/option&gt;\";\n            }\n            echo '&lt;/select&gt;';\n            echo '&lt;br/&gt;';\n        }\necho '&lt;/div&gt;'; //End Class Media Type\n</code></pre>\n\n<p>table name = \"media_type\"\nvalues = \"TV\",\"ONLINE\",\"Roller\",Banner\",\"Roll Over\"</p>\n\n<p>I want to have this \"media_type\" values in my update drop box as same as the insert dropbox so enduser can modify entry with media_type values as Insert. but when it's display 1st time then default values of dropbox should be same as previous entered data.</p>\n\n<p>sorry my question is confusing.\nWhat is the best way to doing.?\nAny help will be appreciate.\nthank You </p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13252068,"title":"Mysql Load data infile ignore 1 lines not working","body":"<p>I want to import a CSV file to my Mysql table using Load data infile: here's my current code :</p>\n\n<pre><code>    LOAD DATA INFILE '../myfile.csv'\n          INTO TABLE data \n        FIELDS\n            TERMINATED BY ','\n            ENCLOSED BY '\"'\n            ESCAPED BY '\"' \nLINES TERMINATED BY '\\n' IGNORE 1 LINES (@f1,@f2...) set `f1`=@f1,...,fk=13 ;\n</code></pre>\n\n<p>This is the first part of the csv file : </p>\n\n<pre><code>Timestamp,FromName,FromID,FromA,FromAID,FromURL,ToCName,ToCID,ToCTarget,ToAName,ToAID,ToAURL,UUID,Model,OS,Country,Type,Value\n\"2012-10-29 07:02:20\",\"NH\",\"4f7898654fgh02\",\"Halloween Game\",\"589754hj67d00021\",\"78643609\",\"\",\"\",\"\",\"Game 1™\",\"4f754hj67d00014\",\"58975449\",\"988675ffgh555f3284530\",\"iPhone\",\"5.1.1\",\"GB\",\"cpi\",\"0.5\" \n</code></pre>\n\n<p>this gives me a 0 rows inserted, but if i replace IGNORE 1 LINES with IGNORE 0 LINES the file is imported successfully (of course without ignoring the first line).</p>\n\n<p>Any help is appreciated.</p>\n"},{"tags":["mysql","sql","triggers","cascade"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13259887,"title":"trigger called on cascade : MYSQL","body":"<p>I have one table in my db that is called products. Another table is called cart and another one is called user. cart is the bridge table that connects the table user with the table products. </p>\n\n<p>Now, I have specified all the foreign keys with the option CASCADE, so that if I delete one product it will be deleted also from the table cart.</p>\n\n<p>In the user table I have one attribute that is called ProductsInTheCart that counts the number of products in the cart immediately, without having to do a query every time. When I insert a new tuple in the table cart this number will increase. (and this is ok) This works also if I delete one tuple from the table cart.</p>\n\n<p>Instead, the problem is that if I delete one tuple from the table products, the tuples in tha table cart with the same key will be deleted but the attribute in the table users doesn't change. \nMaybe because the elimination of one tuple of the table cart is a consequence of the cascade?</p>\n\n<p>How Can I DO?\nthanks!</p>\n\n<p>this is the trigger:</p>\n\n<pre><code>CREATE\nDEFINER=`root`@`localhost`\nTRIGGER `m4af`.`DecrementaProdottiNelCarrello`\nAFTER DELETE ON `m4af`.`carrello`\nFOR EACH ROW\nupdate utente as U, prodotto as P\nset U.ProdottiNelCarrello = U.ProdottiNelCarrello - 1,\nP.NelCarrelloDi=P.NelCarrelloDi-1\nwhere U.username = OLD.Username AND P.barcode=OLD.Barcode$$\n</code></pre>\n"},{"tags":["php","mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13258893,"title":"MySql - Joining another table with multiple rows, inserting a query into a another query?","body":"<p>I've been racking my brain for hours trying work out how to join these two queries..</p>\n\n<p>My goal is to return multiple venue rows (from venues) based on certain criteria... which is what my current query does....</p>\n\n<pre><code>SELECT venues.id AS ven_id, \n   venues.venue_name, \n   venues.sub_category_id, \n   venues.score, \n   venues.lat, \n   venues.lng, \n   venues.short_description, \n   sub_categories.id, \n   sub_categories.sub_cat_name, \n   sub_categories.category_id, \n   categories.id, \n   categories.category_name, \n   ((ACOS(  SIN(51.44*PI()/180)*SIN(lat*PI()/180) + COS(51.44*PI()/180)*COS(lat*PI()/180)*COS((-2.60796 - lng)*PI()/180)) * 180/PI())*60 * 1.1515) AS dist\n\nFROM venues, \n  sub_categories, \n  categories \nWHERE \n  venues.sub_category_id = sub_categories.id \n  AND sub_categories.category_id = categories.id \nHAVING \n  dist &lt; 5 \nORDER BY score DESC \nLIMIT 0, 100\n</code></pre>\n\n<p>However, I need to include another field in this query (thumbnail), which comes from another table (venue_images). The idea is to extract one image row based on which venue it's related to and it's order. Only one image needs to be extracted however. So LIMIT 1.</p>\n\n<p>I basically need to insert this query:</p>\n\n<pre><code>SELECT \n  venue_images.thumb_image_filename, \n  venue_images.image_venue_id,  \n  venue_images.image_order \nFROM venue_images \nWHERE venue_images.image_venue_id = ven_id //id from above query\nORDER BY venue_images.image_order \nLIMIT 1\n</code></pre>\n\n<p>Into my first query, and label this new field as \"thumbnail\".</p>\n\n<p>Any help would really be appreciated. Thanks!</p>\n"},{"tags":["mysql","innodb","corruption"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13257757,"title":"Innodb table is corrupt when doing mysqlcheck but mysql server does not crash now or upon restart","body":"<p>I have a database that has InnoDB tables in it, and one of the InnoDB tables is marked as corrupt (and I know data is missing, etc.). However, when I restart MySQL, it doesn't crash. </p>\n\n<p>I expected it to crash, however it doesn't . ( I read before that if innodb table is corrupted, mysql server will be stopped )  </p>\n\n<p>should it not be crashing now?</p>\n\n<p>innodb is my default db engine.</p>\n"},{"tags":["php","mysql","fullcalendar"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":481,"score":0,"question_id":4538492,"title":"Viewing events in FullCalendar ordered by event ID instead of start timestamp","body":"<p>I have a calendar set up and when viewing the month view I want to display the events which have been created by their ID and not the time they are due to start.</p>\n\n<p>Is this possible? And if so, how would I go about changing the code to display the events in this manner?</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13259654,"title":"How to Insert BOOL Value to MySQL Database","body":"<p>3I am trying to insert value into a BOOL data type in MySQL database (v 5.5.20) using following script:</p>\n\n<pre><code>CREATE DATABASE DBTest;\nUSE DBTest;\nDROP TABLE IF EXISTS first;\nCREATE TABLE first (id INT AUTO_INCREMENT NOT NULL PRIMARY KEY , name VARCHAR(30) ,sale  BOOL,); \nINSERT INTO first VALUES (\"\", \"G22\",\"TRUE\");\nINSERT INTO first VALUES (\"\", \"G23\",\"FALSE\");\n</code></pre>\n\n<p>but the  insert statement just insert 0 (Zero)to the cell for both TRUE and FALSE options! Can you please let me know why this is happening?</p>\n"},{"tags":["php","mysql","file","variables"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13259766,"title":"How MySql can retrieve and display photos with PHP","body":"<p>I have a PHP site where I have uploaded 10 pictures locally. The pictures are saved in the <code>./images</code> folder and also resampled to a <code>./thumbnails</code> folder. I use this query to extract 7 photo file names from the database.</p>\n\n<pre><code>$imgQuery = \"SELECT FileName, Title, Description FROM PICTURE WHERE OwnerID='$id' LIMIT 0,7\";\n</code></pre>\n\n<p>The database saves <code>PictureID</code>(PK), <code>OwnerID</code>(UNQ, my id is 2), <code>FileName</code>(stores the file name) and <code>Title</code> for the picture and <code>Description</code> for the picture. I use this method of transferring 7 photo filenames, title and description to an array. But how can I extract them from my <code>./thumbnails</code> folder and display them on my PHP page?</p>\n\n<pre><code>if($imgResult = mysqli_query($link, $imgQuery))\n{\n while($imgRow = mysqli_fetch_row($imgResult))\n {\n\n    $filename[] = $imgRow[0];\n    $title[] = $imgRow[1];\n    $description[] = $imgRow[2];\n }\n}\n</code></pre>\n\n<p>Here is where I am displaying the thumbnails <code>t1</code> in the body. I would like to know how can assign the files retrieved by my database to these variables. The description changes based on which name i</p>\n\n<pre><code>$num = count($filename);\nwhile($i &lt; $num)\n{\n$i = 0;\nprint &lt;&lt;&lt;photo\n&lt;body&gt;\n&lt;form action='MyAlbum.php' method='post'&gt;\n    &lt;table&gt;\n        &lt;tr&gt;&lt;td colspan='7' &gt;&lt;h2 align='center'&gt;&lt;?php echo $name;?&gt;'s Album&lt;/h2&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;&lt;td colspan='7' &gt;&lt;?php echo $title[$i];?&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;&lt;td colspan='5' &gt;&lt;?php echo $filename[$i]; ?&gt;&lt;/td&gt;&lt;td colspan='2'&gt;&lt;?php echo $description[$i];?&gt; &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td&gt;&lt;?php  echo $filename[0];?&gt;&lt;/td&gt; &lt;td&gt;&lt;?php  echo $filename[1];?&gt;&lt;/td&gt; &lt;td&gt;&lt;?php echo $filename[2];?&gt;&lt;/td&gt; \n            &lt;td&gt;&lt;?php echo $filename[3]; ?&gt;&lt;/td&gt;&lt;td&gt;&lt;?php echo $filename[4]; ?&gt;&lt;/td&gt; &lt;td&gt;&lt;?php echo $filename[5]; ?&gt;&lt;/td&gt; \n            &lt;td&gt;&lt;?php echo $filename[6]; ?&gt;&lt;/td&gt; \n        &lt;/tr&gt;\n    &lt;/table&gt;\n&lt;/form&gt;\n$i++;\n&lt;/body&gt;\n&lt;/html&gt;\n\nphoto;\n }\n</code></pre>\n"},{"tags":["php","mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":23,"score":-2,"question_id":13259576,"title":"PHP saving mysql info to php variables","body":"<p>So, what i'm trying to do is that I want this to happen basically, here's my code:</p>\n\n<p>mysql_query(\"SELECT account.id FROM account WHERE account.username= \"\"\");</p>\n\n<p>I want the result of that code stored in a variable named account_id in PHP. But I wasn't able to find anything online that I was able to understand.</p>\n"},{"tags":["mysql","foreign-keys","constraints"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13247034,"title":"RDBM MySQL Foregin Key Constraint Multiple Choice","body":"<p>im just going through some past tests for one of my classes and came against this question</p>\n\n<p>Consider the following foreign key declaration in a table X.</p>\n\n<p>FOREIGN KEY a REFERENCES Y (b)</p>\n\n<p>This declaration:</p>\n\n<p>(a) establishes a master-detail relationship between master records in b and detail records in a</p>\n\n<p>(b) establishes a master-detail relationship between master records in X and detail records in Y</p>\n\n<p>(c) establishes a master-detail relationship between master records in Y and detail records in X</p>\n\n<p>(d) establishes a master-detail relationship between master records in a and detail records in b</p>\n\n<p>I understand that a Master represents lets say a \"User\"\nwhile detail as \"User's Friends\"</p>\n\n<p>is the answer d?</p>\n"},{"tags":["python","mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13259728,"title":"error when trying to insert values into MySQL table with python","body":"<p>I'm trying to insert this row of data (i parse from a list of tuples)</p>\n\n<pre><code>(0L, u'2012-11-06T16:23:36-05:00', 0L, None, 23759918L, u'baseline', u'0 to 100', nan, 105114L, 2009524L, True, u'charge', u'Charge')\n</code></pre>\n\n<p>into a mySQL database table, but i seem to have problems with the null value (NaN), because i receive this error:</p>\n\n<pre><code>OperationalError: (1054, \"Unknown column 'nan' in 'field list'\")\n</code></pre>\n\n<p>I've tried making columns nullable in mySQL, and also making all text fields, but still no dice..</p>\n"},{"tags":["mysql","database","wordpress"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13257057,"title":"Bulk delete/edit excerpts in Wordpress?","body":"<p>I've taken over and built a new theme utilizing all the goodies Wordpress comes with. I'm also using the built-in excerpts functions within Wordpress... however, the previous user wasn't using automatic excerpts and was manually typing their own excerpts.</p>\n\n<p>I was wondering if there is a method to either override the manual excerpts or to perform a bulk edit on the excerpts?</p>\n"},{"tags":["php","mysql","query","combine"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":13259250,"title":"PHP & MySQL: How to combine UPDATE and SELECT (with min function) queries","body":"<p>I'm trying to select a row with the least value from a MySQL table and update the flag column for that row using PHP. But it's not working for me. If I break it into two queries, it works, but combining the two isn't going anywhere. What am I doing wrong?</p>\n\n<p>Here's what works:</p>\n\n<pre><code>$flag = 1;\n$query = \"SELECT MIN(value) FROM \". $myTable;\n$data = mysqli_query($dbh, $query);\n$dataSet = mysqli_fetch_row($data);\n$value = $dataSet[0];\n$queryUpdate = \"UPDATE \". $myTable . \" SET flag='\" . $flag . \"' WHERE value='\" . $value. \"'\";\n$dataUpdate = mysqli_query($dbh, $queryUpdate);\n</code></pre>\n\n<p>Here are attempts I made but failed:</p>\n\n<pre><code>//attempt #1\n$flag = 1;\n$query = \"UPDATE \". $myTable . \" SET flag='\" . $flag . \"' WHERE value=( SELECT MIN(value) FROM '\". $myTable . \"')\";\n$data = mysqli_query($dbh, $query);\n\n// attempt #2\n$flag = 1;\n$query = \"UPDATE \". $myTable . \" SET flag='\" . $flag . \"' ORDER BY value ASC LIMIT 1\";\n$data = mysqli_query($dbh, $query);\n\n// attempt #3\n$flag = 1;\n$query = \"UPDATE \". $myTable . \" T1 \nINNER JOIN ( SELECT MIN(value) FROM \". $myTable . \" ) T2\nON T1.id = T2.id\nSET T1.flag=\" . $flag;\n$data = mysqli_query($dbh, $query);\n</code></pre>\n\n<p>mysqli_error() returns </p>\n\n<blockquote>\n  <p>Warning: mysqli_error() expects exactly 1 parameter, 0 given [in the $data = mysqli_query($dbh, $query) lines.]</p>\n</blockquote>\n\n<p>Any help would be so appreciated.</p>\n"},{"tags":["php","mysql","query","dynamic"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13241092,"title":"Stored MySQL Procedures vs. Dynamic MySQL Queries","body":"<p>I'm developing a basic php based function that executes MySQL queries in order to sort the data in the database and present it to the user. As a general statement, is it considered best practice to simply construct static queries and to execute them as needed, or simply piece together elements of a MySQL statement based on conditions? </p>\n\n<p>To narrow the question, I have a specific example:</p>\n\n<p>Say I have a few drop-down menus that define the search on the user's end. Let one drop-down simply contain a list of names, say Bob Smith, and the two others a date range. From there, I can easily create a search along the lines of <code>SELECT item FROM checkOUT WHERE...</code> I can definitely write a general query with parameters to be executed when ALL three of the parameters are present. Consider the case when only a date range is selected regardless of individuals - that would require only two parameters and a different general query. And what if the data is spread across multiple tables? That has to be taken into account. I should add as well that my function is based on drop-down menus - not original user input.</p>\n\n<p>Basically, what would be the best method to create the MySQL Query - prepared statements or dynamically created statements? Obviously, the end result will rely on a hybrid of the two, but to which side it leans the farthest is the issue. I'm asking this question as I am not too familiar with this particular side of handling multiple queries from one source. Typically, I simply have to execute one query to get what I need and work with it - not sorting.</p>\n\n<p>Any insight is appreciated.  </p>\n"},{"tags":["php","mysql","forms","select"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13259491,"title":"MySQL Use Array From Non Existent Column","body":"<p>I'm not sure if my title is even worded correctly.  Hopefully I can explain this in a concise manner.  I'm trying to select all from a database:</p>\n\n<pre><code>if (! empty ( $fname ) &amp;&amp; ! empty ( $lname )) {\n        $query5 = \"select * from \" . $db_prefix . \"customer_det where (fname = '\" . $fname . \"' and lname = '\" . $lname . \"')\";\n            $result5 = $mysqli-&gt;query ( $query5 ) or die ( mysql_error () );\n    } else {\n        $query5 = \"select * from \" . $db_prefix . \"customer_det where phone = '\" . $phone . \"'\";\n\n        $result5 = $mysqli-&gt;query ( $query5 ) or die ( mysql_error () );\n\n    }\n</code></pre>\n\n<p>Then my next statement basically says if $result5 === NULL then insert stuff.  Problem is I'm var_dump($result5) and it looks like it's printing out an array.</p>\n\n<pre><code>object(mysqli_result)#4 (5) { [\"current_field\"]=&gt; int(0) [\"field_count\"]=&gt; int(34) [\"lengths\"]=&gt; NULL [\"num_rows\"]=&gt; int(0) [\"type\"]=&gt; int(0) }\n</code></pre>\n\n<p>Basically what I'm trying to say is how can I write an IF $result5 = non existent statement.  Is it a count or num_rows function im looking for here?</p>\n"},{"tags":["mysql","sql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13258932,"title":"Query giving undesirable results","body":"<p>I have the following two tables:</p>\n\n<pre><code>lab_assistant\nla_id - la_firstname - la_lastname\n1 - Dennis - Rodman\n2 - Michael - Jordan\n3 - Horace - Grant\n\nhours_worked\nhw_semester - hw_date - hw_hours - la_id\nFall 2012 - 2012-11-01 - 4 - 2\nFall 2012 - 2012-11-04 - 5 - 3\nSpring 2012 - 2012-02-12 - 4 - 1\nSpring 2012 -2012-03-10 - 4 - 1\n</code></pre>\n\n<p>The result of my query is supposed to look like the following:</p>\n\n<p>and I'm trying to run the following query in order to list the Lab Assistant and the number of hours they worked each semester</p>\n\n<pre><code>SELECT DISTINCT(CONCAT(la.la_firstname, ' ', la.la_lastname)) AS 'Lab Assistant',\n   hw.hw_semester AS 'Semester Worked', hw.hw_hours AS 'Hours Worked'\nFROM lab_assistant la\n    JOIN hours_worked hw\n        ON la.la_id = hw.la_id;\n</code></pre>\n\n<p>The results of my quere are SUPPOSED to look like this:</p>\n\n<pre><code>Michael Jordan - Fall 2012 - 4\nHorace Grant - Spring 2012 - 5\nDennis Rodman - Fall 2012 - 8\n</code></pre>\n\n<p>BUT the results I'm getting are as follows:</p>\n\n<pre><code>Michael Jordan - Fall 2012 - 4\nHorace Grant - Fall 2012 - 5\nDennis Rodman - Spring 2012 - 4\n</code></pre>\n\n<p>So basically, it just isn't counting the proper hours for Dennis Rodman. It should be 8 and not 4.</p>\n\n<p>And I probably shouldn't use DISTINCT here because it's possible the same person could work different semesters.</p>\n"},{"tags":["mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13259275,"title":"Mysql tmp_table_size max_heap_table_size","body":"<p>On my server 2 days ago my tmp_table_size = max_heap_table_size(16M). </p>\n\n<p>I made a cron job that runs once an hour and generates a report starting from : created_tmp_disk_tables, created_tmp_files,created_tmp_tables</p>\n\n<p>In my report : created_tmp_disk_tables+created_tmp_files+created_tmp_tables=100% of my temporary data</p>\n\n<p>With that : </p>\n\n<p>1)\nwith tmp_table_size=max_heap_table_size=16M the report showed me the next average report :\n27.37% (created_tmp_disk_tables) \n1.16% (created_tmp_files)\n71.48% (created_tmp_tables)</p>\n\n<p>How can I optimize these results?</p>\n\n<p>2) with tmp_table_size=max_heap_table_size=20M</p>\n\n<p>in the first hour :</p>\n\n<p>23.48% (created_tmp_disk_tables) \n32.44% (created_tmp_files)\n44.07% (created_tmp_tables)</p>\n\n<p>After 7 hours (from restart) : </p>\n\n<p>21.70% (created_tmp_disk_tables) \n33.75% (created_tmp_files)\n44.55% (created_tmp_tables)</p>\n\n<p>It's not what i expected. \n- disk tables decreased from 27.37% to 21.70% -> expected much more\n- temporary files rise form 1.16% to 33.75%  -> why ?\n- memory tables decreased from 71.48% to 44.55% -> strange; expected to rise</p>\n\n<p>Sorry for my English and thanks for reading!</p>\n"},{"tags":["php","mysql","cookies"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13259126,"title":"What's a secure way to create a \"remember me\" system in PHP with cookies?","body":"<p>I'm at the beginning of a project that will have a \"remember me\" option when the user authenticates.</p>\n\n<p>My user's database table have the following basic structure for authentication:</p>\n\n<ul>\n<li>id       :   a random number generated when user is registered. (key)</li>\n<li>username :   an username choosen by the user, can be changed to another unique username.</li>\n<li>hash     :   the hash of the password created with \"phpass\" when the password is set.</li>\n</ul>\n\n<p>I'd like to know a safe way to keep the user logged in, even in more than one computer, using cookies and MySQL.</p>\n\n<p>I wish I can use the same cookies to store a temporaly session or a \"remember me\" section. I've read about tokens and about hashing all user information to a cookie but is it safe? I checked Facebook's cookies that are used after user authentication and there's user id entry, is it really necessary for what I whant to do?</p>\n\n<p>If I decide to hash information to the cookie should I use \"phpass\" that probably is slower or a simple MD5 function, seen that the authentication verification wiil be in every page and every AJAX request? Should I renew a user token every time I verify for login?</p>\n\n<p>Finally, what's the best choice I have? I know there's a lot of questions similar to this but I didn't found something like \"the best way\" to do this. In every post I find there's something different and contradictory about this subject. I'd like to know a safe and clean way to do it.</p>\n"},{"tags":["php","mysql","phpmyadmin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":70,"score":-2,"question_id":13205077,"title":"Auto Create PHP Scripts from a Mysql Database?","body":"<p>Is there any free site/software that can take a MYSQL database structure\nand auto generate the html forms, and php code to insert, modify, and delete.</p>\n\n<p>I used it a few years ago to quickly develop a prototype.</p>\n\n<p>I came across this in my search tonight:</p>\n\n<p><a href=\"http://www.fpmg.co.cc/index.php\" rel=\"nofollow\">http://www.fpmg.co.cc/index.php</a></p>\n\n<p>But it doesn't read an existing mysql database or table (that i know of)\nbut it's similar in terms that it will auto generate all the form/html and php code </p>\n\n<p><strong>* Import DDL Statements from this link does this a little bit too after looking into it\n*</strong> Not 100% what I needed, but it could help a little</p>\n\n<p>==========================</p>\n\n<h1><strong>This worked for me below.</strong> Nov.5th,2012</h1>\n\n<p>Update: using this: <a href=\"http://www.turningturnip.co.uk/free-mysql-php-generator/generator.php\" rel=\"nofollow\">http://www.turningturnip.co.uk/free-mysql-php-generator/generator.php</a> created this with this link: <a href=\"http://www.turningturnip.co.uk/free-mysql-php-generator/web-code-creator.php\" rel=\"nofollow\">http://www.turningturnip.co.uk/free-mysql-php-generator/web-code-creator.php</a></p>\n\n<pre><code>CREATE TABLE `test` (\n`id` int(6) NOT NULL auto_increment,\n`firstname` varchar(255) NOT NULL default '',\n        `lastname` varchar(255) NOT NULL default '',\n        `ssn` varchar(255) NOT NULL default '',\n        PRIMARY KEY  (`id`),\nUNIQUE KEY `id` (`id`)\n)\nENGINE=MyISAM AUTO_INCREMENT=1;\n</code></pre>\n"},{"tags":["mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13257698,"title":"calculating total rows from one table with 2 level child","body":"<p>I have one table of \"galleries\" and one for \"images\".. the galleries table goes like this..</p>\n\n<pre><code>gal_id|name\n</code></pre>\n\n<p>and images is like</p>\n\n<pre><code>img_id|gal_id|name\n</code></pre>\n\n<p>now I have say 20 galleries, and I want to display total number of images in each gallery, so I want to use one query to return the array with total images in each gallery something like this</p>\n\n<pre><code>Gallery A (Total Images : 23)\nGallery B (Total Images : 33)\nGallery C (Total Images : 523)\nGallery D (Total Images : 25)\n</code></pre>\n\n<p>What would be the best approach to do this, I dont want to put the query in loop it will put load on server, please advise..</p>\n\n<p>thanks</p>\n"},{"tags":["mysql","node.js","etherpad","vmc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13210795,"title":"There was an error processing your settings.json file: process is not defined","body":"<p>when I push my code of etherpad, it said that</p>\n\n<p>[31m[2012-11-03 15:14:00.102] [ERROR] console - [39mThere was an error process\ning your settings.json file: process is not defined</p>\n\n<p>this key code is below</p>\n\n<pre><code>/*\n  This file must be valid JSON. But comments are allowed\n\n  Please edit settings.json, not settings.json.template\n*/\n{\n  //Ip and port which etherpad should bind at\n  \"ip\": process.env.VCAP_APP_HOST,\n  \"port\" : process.env.VCAP_APP_POR,\n\n  //The Type of the database. You can choose between dirty, postgres, sqlite and mysql\n  //You shouldn't use \"dirty\" for for anything else than testing or development\n  /*\"dbType\" : \"dirty\",*/\n  //the database specific settings\n  /*\"dbSettings\" : {\n                   \"filename\" : \"var/dirty.db\"\n                 },*/\n\n  /* An Example of MySQL Configuration */\n   \"dbType\" : \"mysql\",\n   \"dbSettings\" : {\n                    \"user\"    : process.env.VCAP_SERVICES[\"etherpadDB\"][0][\"credentials\"][\"user\"], \n                    \"host\"    : process.env.VCAP_SERVICES[\"etherpadDB\"][0][\"host\"], \n                    \"password\": process.env.VCAP_SERVICES[\"etherpadDB\"][0][\"password\"], \n                    \"database\": process.env.VCAP_SERVICES[\"etherpadDB\"][0][\"name\"]\n                  },\n\n\n\n}\n</code></pre>\n"},{"tags":["php","mysql","orm","symfony1","cpu-speed"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":267,"score":1,"question_id":11294747,"title":"What performance improvements can I make to Symfony + Doctrine?","body":"<p>I've recently built a reasonably complex database application for a university handling almost 200 tables. Some tables can (e.g. Publications) hold 30 or more fields and store 10 one-to-one FK relations and up to 2 or 3 many-to-many FK relations (using crossreference-ref tables). I use integer IDs throughout and normalisation has been key every step of the way. AJAX is minimal and most pages are standard CRUD forms/processes.</p>\n\n<p>I used Symfony 1.4, and Doctrine ORM 1.2, MySQL, PHP.</p>\n\n<p>While the benefits to development time and ease of maintenance have been enormous (in using an MVC and ORM), we've been having problems with speed. That is, when we have more than a few users logged in and active at any one time the application slows considerbly (up to 20 seconds to save or edit a record).</p>\n\n<p>We're currently engaged in discussions with our SysAdmin but they say that we should have more than enough power. With 6 or more users engaged in activity, we end up queuing 4 CPUs in a virtual server environment while memory usage is low (no bleeds).</p>\n\n<p>Of course, we're considering multi-threading our mySQL application (if this will help), refining our code (though much of it is generated by the MVC) and refining our cache usage (this could be better, though the majority of the screen used is user-login specific and dynamic); we've installed APC, extra memory, de-fragmented our database, I've tried unsetting all recordsets (though I understand this is now automatic within the ORM), instigating manual garbage recycling...</p>\n\n<p>But the question I'm asking is whether mySQL, PHP, and Symfony MVC was actually a poor choice for developing an application of this size in the first place? If so, what do people normally use/recommend for a web-based database interface application of this kind of size/complexity?</p>\n"},{"tags":["php","mysql","fulltext"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13259090,"title":"Mysql Fulltext search with different number of columns","body":"<p>I've been taking my first stab at Fulltext searching and am having trouble getting the query to work. Here's the new code I've been trying (from a PHP file):</p>\n\n<pre><code>$browse_all_query = \"(SELECT master_id, title, series_id, series_number, year, date, day, month, speaker_id, speaker2_id, speaker3_id \" .\n                    \"FROM master \" .\n                    \"WHERE MATCH (title) AGAINST ($where_clause)) \" .\n                    \"UNION \" .\n                    \"(SELECT camp_name, camp_id \" .\n                    \"FROM camp \" .\n                    \"WHERE MATCH (camp_name) AGAINST ($where_clause)) \" .\n                    \"UNION \" .\n                    \"(SELECT subject_name, subject_id \" .\n                    \"FROM subject \" .\n                    \"WHERE MATCH (subject_name) AGAINST ($where_clause)) \" .\n                    \"UNION \" .\n                    \"(SELECT speaker_id, s_title, f_name, m_name, l_name, l_name2 \" .\n                    \"FROM speaker \" .\n                    \"WHERE MATCH (s_title, f_name, m_name, l_name, l_name2) AGAINST ($where_clause)) \" .\n                    \"UNION \" .\n                    \"(SELECT series_title, series_id \" .\n                    \"FROM series \" .\n                    \"WHERE MATCH (series_title) AGAINST ($where_clause)) \";\n</code></pre>\n\n<p>Now, I understand that a big issue for me here is that I have different numbers of columns in my select statements as well as different data types. What I need is to figure out how I can pull all the information I need from all the columns I've selected, yet still use fulltext search.  This is an online audio library. I'm using a regular WHERE/LIKE setup now, but unfortunately using that method, searching for one speaker's name (Glenn Clark) brings up results for \"glenn\" and \"clark\" wherever they are used as I sanitize and separate my keywords....not to mention that the \"speaker\" table has separate columns for first name and last name.</p>\n\n<p>What would be the best way around this?</p>\n\n<p>My table structure is:</p>\n\n<ol>\n<li>Master (the main table with 13 columns)</li>\n<li>Speaker (6 columns)</li>\n<li>Camp (3 columns)</li>\n<li>Series (6 columns)</li>\n<li>Subject (2 columns)</li>\n</ol>\n\n<p>In my current code I was selecting all the extra bits of information not directly relative to the search at the same time I ran the search, as I use those bits (like all the \"id\" fields) to output all the information I needed for the results as seen here:\n<img src=\"http://i.stack.imgur.com/HgNx2.jpg\" alt=\"enter image description here\"></p>\n\n<p>Am I needing additional queries or am I going about this completely the wrong way.</p>\n\n<p>Thank you for your help.</p>\n"},{"tags":["php","mysql","web-applications","seo"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":38,"score":-2,"question_id":13258532,"title":"How do sites use referral URLs without running into SEO issues?","body":"<p>I was looking through a few websites recently and noticed a trend I'm not sure I understand. Sites are creating unique referral URLs for customers in the form of:</p>\n\n<p><a href=\"http://customname.site.com\" rel=\"nofollow\">http://customname.site.com</a></p>\n\n<p>(If somebody were to use <a href=\"http://www.site.com/customname\" rel=\"nofollow\">http://www.site.com/customname</a> it would function the same way).</p>\n\n<p>I can see the sites are using 302 redirects at some point using Google Chrome then doing some sort of htaccess redirect, taking the subdomain name (customname) and applying it as a referral parameter then keeping in session during the entire process.</p>\n\n<p>However, there must be thousands of these custom URLs that people are typing in. How are each one of these \"subdomains\" not treated as separate URLs which in turn are redirected to the same page (in short, generating tons of links all pointing to the same page which Google would normally frown upon)? Additionally, the links also appear on the site themselves as clickable links so I'm not sure how these are not tracked.</p>\n\n<p>Similarly, the \"unique\" url is not indexed or cached in any Google search results. How is this capability handled?</p>\n\n<p>It does NOT highlight the referral aspect, but a true example of this is visiting <a href=\"http://sfgiants.com\" rel=\"nofollow\">http://sfgiants.com</a> which does a 302 redirect to the much longer proper San Francisco Giants MLB homepage. I am wondering how SFgiants.com is not indexed (assuming that direct shortened link appears on several MLB pages)?</p>\n\n<h2>Note:</h2>\n\n<p>Some users on here are way too uptight and think everybody is trying to scamp them or get them to signup for something. Above are made up URLs but if you want an actual site to browse for reference let me know.</p>\n"},{"tags":["php","mysql","escaping","user-input"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13258964,"title":"Storing user-contributed text with links and formatting","body":"<p>How can I store user contributed text while maintaing links, formatting, etc? (Basically exactly what stack overflow does with our posts)</p>\n\n<p>It seems extremely dangerous to allow any HTML to be stored in text. What are some existing conventions?</p>\n\n<p>Site is built in PHP, databases are MySQL if it matters. </p>\n"},{"tags":["sql","mysql","query","table","drop"],"answer_count":4,"favorite_count":4,"up_vote_count":11,"down_vote_count":0,"view_count":5107,"score":11,"question_id":1589278,"title":"SQL: deleting tables with prefix","body":"<p>i know how to delete my tables in MySQL, </p>\n\n<pre><code>DROP TABLE\n</code></pre>\n\n<p>but now i need to know how to delete my tables who all have the prefix</p>\n\n<pre><code>myprefix_\n</code></pre>\n\n<p>How to?</p>\n\n<p>--I NEED TO DO THIS IN PHPMYADMIN, IN A BROWSER. NO TERMINAL STUFF PLEASE. BATCH STUFF IS ALWAYS APRECIATED.--</p>\n"},{"tags":["mysql","sql"],"answer_count":6,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13257629,"title":"Update value based on subquery returning more than one row","body":"<p>I have this probably simple SQL question.</p>\n\n<pre><code>UPDATE parts\nSET partscnt=partscnt-1\nWHERE idparts = (SELECT idparts FROM ordercontent WHERE idOrder=4);\n</code></pre>\n\n<p>Problem is that the subquery returns 5 values, and i want the update done on each of the values.</p>\n\n<p>Update:\nThe ordercontent table has an ID for the order and a row idparts. If several of the same parts are hooked to the same order the table looks like this:</p>\n\n<pre><code>ID idparts\n4  147\n4  147\n4  147\n4  55\n4  33\n</code></pre>\n\n<p>So I need to decrement the partscount three times for the part with id 147.</p>\n\n<p>How can I change this query to achieve that?</p>\n"},{"tags":["mysql","xml","amazon-web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13257961,"title":"mysql efficiently execute millions of INSERT statements","body":"<p>I know I am probably not doing this the most efficient way. I have data stored in XML format, and I am parsing the XML data into individual INSERT INTO .. VALUES (..) statements and then executing these statements. Is there a good way of executing millions of these INSERT INTO statements as a batch?</p>\n\n<p>I cannot use regular SQL server utility tools to import the XML data because I am running this on AWS. </p>\n\n<p>Any suggestions are appreciated!</p>\n"},{"tags":["c#","mysql","linq","entity-framework","entity-framework-5"],"answer_count":5,"favorite_count":3,"up_vote_count":5,"down_vote_count":1,"view_count":109,"score":4,"question_id":13257760,"title":"Why does Entity Framework SQL generation create a nested query?","body":"<p>Why does Entity Framework SQL generation create a nested query?</p>\n\n<p>I have this code</p>\n\n<pre><code>    var db = new Context();\n    var result = db.Network.Where(x =&gt; x.ServerID == serverId)\n        .OrderBy(x=&gt; x.StartTime)\n        .Take(limit);\n</code></pre>\n\n<p>Which will be transleted into this! (Note the dubble select statement)</p>\n\n<pre><code>SELECT\n`Project1`.`Id`, \n`Project1`.`ServerID`, \n`Project1`.`EventId`, \n`Project1`.`StartTime`\nFROM (SELECT\n`Extent1`.`Id`, \n`Extent1`.`ServerID`, \n`Extent1`.`EventId`, \n`Extent1`.`StartTime`\nFROM `Networkes` AS `Extent1`\n WHERE `Extent1`.`ServerID` = @p__linq__0) AS `Project1`\n ORDER BY \n`Project1`.`StartTime` DESC LIMIT 5\n</code></pre>\n\n<p>How could I change it into one <code>select</code> statement?\nI'm using MySQL and Entity Framework with code first</p>\n\n<h1>Update</h1>\n\n<p>I have the same result whatever type I use as parameter to the <code>OrderBy()</code> method.</p>\n\n<h1>Update 2 with some timeing</h1>\n\n<pre><code>Total Time (hh:mm:ss.ms)    05:34:13.000\nAverage Time (hh:mm:ss.ms)  25:42.000\nMax Time (hh:mm:ss.ms)  51:54.000\nCount   13\nFirst Seen  Nov 6, 12 19:48:19\nLast Seen   Nov 6, 12 20:40:22\n</code></pre>\n\n<p>Raw query:</p>\n\n<pre><code>SELECT `Project?`.`Id`, `Project?`.`ServerID`, `Project?`.`EventId`, `Project?`.`StartTime` FROM (SELECT `Extent?`.`Id`, `Extent?`.`ServerID`, `Extent?`.`EventId`, `Extent?`.`StartTime`, FROM `Network` AS `Extent?` WHERE `Extent?`.`ServerID` = ?) AS `Project?` ORDER BY `Project?`.`Starttime` DESC LIMIT ?\n</code></pre>\n\n<p>I use a program to take snapshots from the current process in MySQL.</p>\n\n<p>It's other querys that could be executed at the same time. But when I change it to just one SELECT statement, it NEVER goes over one second. Maybe I have something else that's going on, I'm asking couse I'm not so into DBs...</p>\n\n<h1>Update 3 The explain statement</h1>\n\n<p>The entity framework generated</p>\n\n<pre><code>'1', 'PRIMARY', '&lt;derived2&gt;', 'ALL', NULL, NULL, NULL, NULL, '46', 'Using filesort'\n'2', 'DERIVED', 'Extent?', 'ref', 'serveridneventid,serverid', 'serveridneventid', '109', '', '45', 'Using where'\n</code></pre>\n\n<p>One liner</p>\n\n<pre><code>'1', 'SIMPLE', 'network', 'ref', 'serveridneventid,serverid', 'serveridneventid', '109', 'const', '45', 'Using where; Using filesort'\n</code></pre>\n\n<p>This is from my QA enviroment, so the timeing I pasted above is not realted to this row count explain statements. I think that there is about 500,000 records that match one server id.</p>\n"},{"tags":["mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":26,"score":-1,"question_id":13258794,"title":"Insert Date MySQL/PHP","body":"<p>Hey guys im trying to insert Dates from php to mysql table. This is the error</p>\n\n<blockquote>\n  <p>fallo mysql query You have an error in your SQL syntax; check the\n  manual that corresponds to your MySQL server version for the right\n  syntax to use near ''2000-1-1')' at line 1</p>\n</blockquote>\n\n<p><strong>My code is this:</strong></p>\n\n<pre><code>$fecha = $_POST['anio'] . '-' . $_POST['mes'] . '-' . $_POST['dia'];\n\n\n    $SQL=\"INSERT INTO Tarea VALUES ('$_POST[det]','$_POST[pre]', ,'$fecha')\";\n\n    conectarse();\n\n    consulta($SQL);\n\n    echo $SQL;\n</code></pre>\n\n<p><strong>anio, mes and dia are received by another form.</strong></p>\n\n<p><strong>Table from database</strong></p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS `Tarea` (\n   `idTarea` int(11) NOT NULL AUTO_INCREMENT,\n   `detalle` varchar(45) COLLATE latin1_danish_ci DEFAULT NULL,\n   `precio` varchar(45) COLLATE latin1_danish_ci DEFAULT NULL,\n   `idOrdenReparacion` int(11) NOT NULL DEFAULT '0',\n   `fecha` date DEFAULT NULL,\n   PRIMARY KEY (`idTarea`,`idOrdenReparacion`),\n   KEY `fk_Tarea_OrdenReparacion1_idx` (`idOrdenReparacion`)\n  ) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_danish_ci AUTO_INCREMENT=2 ;\n</code></pre>\n\n<p>Any ideas?**</p>\n"},{"tags":["mysql","join","explain-plan"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":716,"score":2,"question_id":591210,"title":"mysql explain different results on different servers, same query, same db","body":"<p>After much work I finally got a rather complicated query to work very smootly and return results very quickly. </p>\n\n<p>It was running well on both dev and testing, but now testing has slowed considerably.\nThe explain query which takes 0.06 second on dev and was about the same in testing is now 7 seconds in testing.</p>\n\n<p>The explains are slightly different, and I'm not sure why this would be\nThe explain from dev</p>\n\n<pre>\n-+---------+------------------------------+------+------------------------------\n---+\n| id | select_type | table      | type   | possible_keys           | key\n | key_len | ref                          | rows | Extra\n   |\n+----+-------------+------------+--------+-------------------------+------------\n-+---------+------------------------------+------+------------------------------\n---+\n|  1 | PRIMARY     |  | ALL    | NULL                    | NULL\n | NULL    | NULL                         |    5 |\n   |\n|  1 | PRIMARY     | tickets    | ref    | biddate_idx             | biddate_idx\n | 7       | showsdate.bid,showsdate.date |   78 |\n   |\n|  2 | DERIVED     | shows      | ALL    | biddate_idx,latlong_idx | NULL\n | NULL    | NULL                         | 3089 | Using temporary; Using fileso\nrt |\n|  2 | DERIVED     | genres     | ref    | bandid_idx              | bandid_idx\n | 4       | activehw.shows.bid           |    2 | Using index\n   |\n|  2 | DERIVED     | artists    | eq_ref | bid_idx                 | bid_idx\n | 4       | activehw.genres.bid          |    1 | Using where\n   |\n+----+-------------+------------+--------+-------------------------+------------\n</pre>\n\n<p>and in the testing</p>\n\n<pre>\n| id | select_type | table      | type   | possible_keys           | key         | key_len | ref                          | rows   | Extra                                        |\n+----+-------------+------------+--------+-------------------------+-------------+---------+------------------------------+--------+----------------------------------------------+\n|  1 | PRIMARY     |  | ALL    | NULL                    | NULL        |    NULL | NULL                         |      5 |                                              |\n|  1 | PRIMARY     | tickets    | ref    | biddate_idx             | biddate_idx |       7 | showsdate.bid,showsdate.date |     78 |                                              |\n|  2 | DERIVED     | genres     | index  | bandid_idx              | bandid_idx  |     139 | NULL                         | 531281 | Using index; Using temporary; Using filesort |\n|  2 | DERIVED     | artists    | eq_ref | bid_idx                 | bid_idx     |       4 | activeHW.genres.bid          |      1 |                                              |\n|  2 | DERIVED     | shows      | eq_ref | biddate_idx,latlong_idx | biddate_idx |       7 | activeHW.artists.bid         |      1 | Using where                                  |\n+----+-------------+------------+--------+-------------------------+-------------+---------+------------------------------+--------+----------------------------------------------+\n5 rows in set (6.99 sec)\n</pre>\n\n<p>The order of the tables is different, even though the queries are exactly the same. \nIs this what would cause the slowdown? if so, how would I fix it?\nThe dev is windows, testing is centOs. \nboth running same version of mysql 5.0, and like I said, testing was running perfectly and I haven't made any structural changes to the database. </p>\n\n<p>I ran mysqlcheck and all tables came back ok. </p>\n"},{"tags":["mysql","cluster-computing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5,"score":0,"question_id":13258727,"title":"troubleshooting mysql cluster installation","body":"<p>I was installing mysql cluster using 3 laptops 1 mgmt node and 2 data nodes..using this tutorial</p>\n\n<p><a href=\"http://blakemesdag.com/blog/tag/cluster/\" rel=\"nofollow\">http://blakemesdag.com/blog/tag/cluster/</a></p>\n\n<p>everythn went on smoothly but when i typed</p>\n\n<p>ndb_mgm> show</p>\n\n<p>it shows the following problem</p>\n\n<p>Unable to connect with connect string: nodeid=0, localhost:1186\nRetrying every 5 seconds.Attemts left:2 1,failed.</p>\n\n<p>wats the soln to dis prob...i m stuck :(</p>\n"},{"tags":["mysql","sql","query","reservation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":13239084,"title":"MySQL Reservation System - Testing for multiple conditions","body":"<p>I'm working on a reservation system in MySQL and I'm having a bit of trouble with my query for finding the next available appointment slots.</p>\n\n<p>My days are broken down into 15-minute slots (00:00:00 - 00:14:59, 00:15:00 - 00:29:59, etc.).  Table structure so far:</p>\n\n<p><strong>appointments table:</strong></p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS `appointments` (\n`appointmentID` int(9) unsigned NOT NULL AUTO_INCREMENT,\n`patientID` int(9) unsigned NOT NULL,\n`apptTitle` varchar(50) NOT NULL,\n`apptDT` datetime NOT NULL,\n`apptLength` int(4) NOT NULL,\n`apptStatus` varchar(25) NOT NULL,\n`physician` int(9) unsigned NOT NULL,\n`apptType` varchar(30) NOT NULL,\n`apptLocation` varchar(25) NOT NULL,\nPRIMARY KEY (`appointmentID`),\nKEY `patientID` (`patientID`),\nKEY `physician` (`physician`),\nKEY `apptStatus` (`apptStatus`),\nKEY `apptLocation` (`apptLocation`),\nKEY `apptType` (`apptType`)\n) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ;\n</code></pre>\n\n<p><strong>apptSlots Table:</strong></p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS `apptSlots` (\n`startDT` datetime NOT NULL,\n`endDT` datetime NOT NULL,\n) ENGINE=InnoDB  DEFAULT CHARSET=utf8;\n</code></pre>\n\n<p>The apptSlots table is already filled with all the 15 minute slots for 2012, as I explained above.</p>\n\n<p>I have a query that can successfully show me the slots that aren't taken in any way (no appointments scheduled at all).</p>\n\n<pre><code>SELECT a.*\nFROM apptSlots AS a\nLEFT JOIN appointments AS b\nON a.endDT\nBETWEEN b.apptDT AND DATE_ADD(b.apptDT, INTERVAL b.apptLength MINUTE)\nAND b.appointmentID IS NULL\n</code></pre>\n\n<p>What I need to do now is search for appointment slots across multiple physicians, multiple rooms, etc.  For example, if Physician A makes an appointment for 7am - 8am, that time slot no longer shows up in my query above.  But Physician B and C don't have any appointments for that slot, so I need to be able to schedule them.  The same goes for rooms, Room A is used by the 7am appointment, but room B and C are still free to be scheduled.</p>\n\n<p>How can I determine open slots with all these variables?  I know I can test with WHERE conditions for each combination and this works if I need to test for a specific doctor, or a specific room for a treatment.  But, if I just want to see all slots across all doctors and rooms, my query doesn't work and testing all possible combinations individually doesn't seem right, it's just a matter of how to get the right conditions into the LEFT JOIN clause.</p>\n\n<p>Please let me know if I'm being unclear, but I think this is enough info.  If not, I'll add in whatever you ask for!</p>\n\n<p>Thank you for your help, my previous question on here got me as far as my query above, now I just need some refinement.  Ask any questions you need, I'll be here to answer them!</p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13258296,"title":"Adding checks to Large SQL query","body":"<p>Here is the query:</p>\n\n<pre><code>SELECT tbl_product.id, tbl_productspecification.id AS specificationId,\n            tbl_product.ProductId, tbl_seller.CompanyName, tbl_product.ProductName, tbl_product.Description, mst_Categories.id AS 'Category',\n            tbl_productspecification.RetailPrice, tbl_productspecification.SalePrice,\n            tbl_product.image, tbl_productspecification.Discount, tbl_product.EndTime, tbl_product.Seller_Id\n            FROM tbl_product\n            LEFT OUTER JOIN tbl_seller ON tbl_seller.SelId = tbl_product.Seller_Id\n            LEFT OUTER JOIN mst_Categories ON (mst_Categories.id = tbl_product.Category OR mst_Categories.id = tbl_product.SubCategory)\n            LEFT OUTER JOIN tbl_productspecification ON tbl_productspecification.ProductId = tbl_product.ProductId\n            LEFT OUTER JOIN mst_image ON mst_image.Product = tbl_product.ProductId\n            LEFT OUTER JOIN tbl_dealinterest ON tbl_dealinterest.ProductId = tbl_product.ProductId\n            where tbl_product.Active='y' and tbl_product.StartTime &lt;= '\".date(\"Y-m-d H:i:s\").\"' and tbl_product.EndTime&gt;'\".date(\"Y-m-d\").\" 06:00:00'\n            \".$subquery.\" \".$groupby;\n</code></pre>\n\n<p>The <code>tbl_dealinterest</code> table has a few fields:</p>\n\n<pre><code>[BuyerId] [ProductId] [Active] \n</code></pre>\n\n<p>I need to filter out any records are in <code>tbl_dealinterest</code> that match <code>[BuyerId]</code> <code>[ProductId]</code> and <code>[Active]</code> does not equal <code>n</code></p>\n\n<p>I have tried a few things but not all the products are listed <code>tbl_dealinterest</code>.  Only when someone chooses an option does it get entered.</p>\n"},{"tags":["mysql","jsf","jboss","transactions","seam3"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":80,"score":2,"question_id":13120856,"title":"javax.enterprise.event.ObserverException","body":"<p>Right now I am experiencing an unpleasant issue. I have 6 projects running on my JBoss AS 7. They are deployed in standalone mode. After working for some time(5-25 hours) I start to recieve identical error in all my projects : <strong>javax.enterprise.event.ObserverException</strong> .</p>\n\n<p>Here is the stack:</p>\n\n<pre><code>ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[site.technorational.kz]] (http--192.168.1.2-80-3) Exception sending request initialized lifecycle event to listener instance of class org.jboss.seam.transaction.TransactionServletListener: javax.enterprise.event.ObserverException\n        at sun.reflect.GeneratedConstructorAccessor136.newInstance(Unknown Source) [:1.6.0_21]\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) [rt.jar:1.6.0_21]\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:513) [rt.jar:1.6.0_21]\n        at java.lang.Class.newInstance0(Class.java:355) [rt.jar:1.6.0_21]\n        at java.lang.Class.newInstance(Class.java:308) [rt.jar:1.6.0_21]\n        at org.jboss.weld.util.reflection.SecureReflections$16.work(SecureReflections.java:343) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]\n        at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]\n        at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInstantiation(SecureReflectionAccess.java:173) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]\n        at org.jboss.weld.util.reflection.SecureReflections.newInstance(SecureReflections.java:340) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]\n        at org.jboss.weld.injection.Exceptions.rethrowException(Exceptions.java:33) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]\n        at org.jboss.weld.injection.Exceptions.rethrowException(Exceptions.java:73) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]\n        at org.jboss.weld.injection.MethodInjectionPoint.invokeOnInstanceWithSpecialValue(MethodInjectionPoint.java:162) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]\n        at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:241) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]\n        at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:229) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]\n        at org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:207) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]\n        at org.jboss.weld.manager.BeanManagerImpl.notifyObservers(BeanManagerImpl.java:569) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]\n        at org.jboss.weld.manager.BeanManagerImpl.fireEvent(BeanManagerImpl.java:564) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]\n        at org.jboss.weld.event.EventImpl.fire(EventImpl.java:68) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]\n        at org.jboss.seam.transaction.TransactionServletListener.requestInitialized(TransactionServletListener.java:117) [seam-transaction-3.1.0.Final.jar:3.1.0.Final]\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) [jbossweb-7.0.13.Final.jar:]\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]\n        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]\n        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]\n        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]\n        at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_21]\nCaused by: javax.transaction.NotSupportedException: BaseTransaction.checkTransactionState - ARJUNA016051: thread is already associated with a transaction!\n        at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.begin(BaseTransaction.java:63)\n        at com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.begin(BaseTransactionManagerDelegate.java:65)\n        at org.jboss.tm.usertx.client.ServerVMClientUserTransaction.begin(ServerVMClientUserTransaction.java:142)\n        at org.jboss.seam.transaction.UTTransaction.begin(UTTransaction.java:51) [seam-transaction-3.1.0.Final.jar:3.1.0.Final]\n        at org.jboss.seam.transaction.DefaultSeamTransaction.begin(DefaultSeamTransaction.java:88) [seam-transaction-3.1.0.Final.jar:3.1.0.Final]\n        at org.jboss.seam.transaction.TransactionServletListener.requestInitialized(TransactionServletListener.java:110) [seam-transaction-3.1.0.Final.jar:3.1.0.Final]\n        ... 8 more\nCaused by: java.lang.IllegalStateException: BaseTransaction.checkTransactionState - ARJUNA016051: thread is already associated with a transaction!\n        at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.checkTransactionState(BaseTransaction.java:257)\n        at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.begin(BaseTransaction.java:59)\n        ... 13 more\n</code></pre>\n\n<p>After I was searching for answers in the logs I found that sometimes this comes before the previous exception comes out:</p>\n\n<pre><code>22:19:21,872 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS018559: Deployed \"project1-web.war\"\n22:19:21,873 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS018559: Deployed \"project2-web.war\"\n22:19:21,873 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS018559: Deployed \"project3-web.war\"\n22:19:21,875 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS018559: Deployed \"project4-web.war\"\n22:19:21,875 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS018559: Deployed \"project5-web.war\"\n22:19:21,876 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS018559: Deployed \"project6-web.war\"\n22:19:21,888 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015961: Http management interface listening on http://192.168.2.1:9990/management\n22:19:21,889 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015951: Admin console listening on http://192.168.2.1:9990\n22:19:21,889 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: JBoss AS 7.2.0.Alpha1-SNAPSHOT \"Steropes\" started in 31119ms - Started 4319 of 4426 services (98 services are passive or on-demand)\n22:24:59,256 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper) ARJUNA012117: TransactionReaper::check timeout for TX 0:ffffc0a80107:2c60f317:50914f6c:4d in state  RUN\n22:24:59,259 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper Worker 0) ARJUNA012095: Abort of action id 0:ffffc0a80107:2c60f317:50914f6c:4d invoked while multiple threads active within it.\n22:24:59,259 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper Worker 0) ARJUNA012108: CheckedAction::check - atomic action 0:ffffc0a80107:2c60f317:50914f6c:4d aborting with 1 threads active!\n22:24:59,260 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper Worker 0) ARJUNA012121: TransactionReaper::doCancellations worker Thread[Transaction Reaper Worker 0,5,main] successfully canceled TX 0:ffffc0a80107:2c60f317:50914f6c:4d\n</code></pre>\n\n<p>I have given a lot of thinking to this issue. One of my suggestions is that MySQL causes that, because there are a lot of methods that are retrieving information from database using <strong>JPA CriteriaBuilder</strong>. When I check status of MySQL, I can see that there are about 100 slow queries.</p>\n\n<p>In my projects I am using SEAM, Hibernate, JPA, PrimeFaces.</p>\n\n<p>I managed to find a some similar issues but not answers still. </p>\n\n<p>Thanks in advance,\nIlya Sidorovich</p>\n"},{"tags":["mysql","database","logging","triggers"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":605,"score":2,"question_id":2499288,"title":"How to use Triggers for Logging History of database changes in MySQL?","body":"<p>How can one use Triggers for Logging History of database changes in MySQL?<br>\nIf it is possible, can one create a separate database for trigger tables for tracking history of other Db tables?</p>\n"},{"tags":["php","mysql","doctrine2"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":73,"score":4,"question_id":13239392,"title":"Foreign key constraint fails because insert statement not yet committed (MySQL)","body":"<p>I have a PHP script using <a href=\"http://en.wikipedia.org/wiki/Doctrine_%28PHP%29\" rel=\"nofollow\">Doctrine</a> 2 which does essentially the following:</p>\n\n<pre><code>$entityManager-&gt;transactional(function($em) {\n    $foreignObject = new DoctrineEntities\\ForeignTable();\n    $em-&gt;persist($foreignObject);\n    $em-&gt;flush();\n    $aObject = new DoctrineEntities\\A();\n    $aObject-&gt;ForeignID = $foreignObject-&gt;ID;\n    $em-&gt;persist($aObject);\n    $em-&gt;flush();\n});\n</code></pre>\n\n<p>I'm getting an integrity constraint violation:</p>\n\n<blockquote>\n  <p><i>a foreign key constraint fails (dbName.A, CONSTRAINT A_ForeignID FOREIGN KEY (ForeignID) REFERENCES <code>ForeignTable</code> (<code>ID</code>) ON DELETE NO ACTION ON UPDATE NO ACTION)</i></p>\n</blockquote>\n\n<p>My guess is that the constraint is checked before the commit, and it doesn't check to see whether an insert I made that hasn't been committed yet might make the constraint pass rather than fail. But I really do want these two insert statements wrapped in the same transaction. So what can I do?</p>\n\n<hr>\n\n<p><em><strong>SQL Context</em></strong></p>\n\n<p>Table <strong>A</strong></p>\n\n<pre><code>CREATE TABLE `A` (\n  `ID` int(11) NOT NULL AUTO_INCREMENT,\n  `ForeignID` int(11) NOT NULL,\n  PRIMARY KEY (`ID`),\n  KEY `A_ForeignID` (`ForeignID`),\n  CONSTRAINT `A_ForeignID` FOREIGN KEY (`ForeignID`) REFERENCES `ForeignTable` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_swedish_ci\n</code></pre>\n\n<p>Table <strong>ForeignTable</strong></p>\n\n<pre><code>CREATE TABLE `ForeignTable` (\n  `ID` int(11) NOT NULL AUTO_INCREMENT,\n  PRIMARY KEY (`ID`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_swedish_ci\n</code></pre>\n"},{"tags":["mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13256604,"title":"MySql adding new column results in Too many connections","body":"<p>My problem is MySQL runs into a 'Too many connections' error when I add a new column to my live database.</p>\n\n<p>The database has 1 million records so it takes a while to add this. </p>\n\n<ul>\n<li>What is the reason the table locks? </li>\n<li>What to do to keep table running?</li>\n</ul>\n\n<p>The query I execute on the table with 1 million records (InnoDB)</p>\n\n<pre><code>ALTER TABLE table_name \nADD COLUMN new_table_column INT(11) NULL \nDEFAULT NULL ;\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["php","mysql","rows"],"answer_count":9,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":131,"score":3,"question_id":11323526,"title":"PHP - Multiple MySQL result, in seperate variables","body":"<p>I need to do a MySQL query to search for an inexact match / match containing the submitted value.</p>\n\n<p>The following is an example of what is in my database:</p>\n\n<pre><code>id               img\n1          1001_ABC_01.jpg\n2          1001_ABC_02.jpg\n3          1002_ABC_01.jpg\n4          1002_ABC_02.jpg\n5          1002_ABC_03.jpg\n6          1002_ABC_04.jpg\n7          1002_ABC_05.jpg\n8          1003_ABC_01.jpg\n9          1003_ABC_02.jpg\n10         1003_ABC_03.jpg\n</code></pre>\n\n<p>I need the query to search for the first part of the filename (<code>1002</code>) and and assign each returned result in the img field a different variable. The maximum amount of variables would be 5.</p>\n\n<p>For example, if I search <code>1002</code>, it should assign the following variables:</p>\n\n<pre><code>    &lt;?php\n    $img1 = '1002_ABC_01.jpg';\n    $img2 = '1002_ABC_02.jpg';\n    $img3 = '1002_ABC_03.jpg';\n    $img4 = '1002_ABC_04.jpg';\n    $img5 = '1002_ABC_05.jpg';\n    ?&gt;\n</code></pre>\n\n<p>so that way I can echo each filename result individually.</p>\n\n<p>Again, the maximum amount of variables here will be 5, so if more than 5 results are returned, only the first 5 will be assigned variables.</p>\n\n<p>Please let me know if this is possible and how to write a PHP script to do it.</p>\n"},{"tags":["php","jquery","mysql","forms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13258187,"title":"Trying to edit a shopping cart script","body":"<p>I found this shopping cart script that works great for what I need but I can't figure out how to transfer one variable to the checkout page. Basically I am calling the products page like so \"products.php?dealID=$dealID\" from my customer info form. From the products page once the customer click on checkout it should be \"checkout.php?dealID=$dealID. I can't seem to make it work. I am still learning so I am 100% sure I'm missing alot of stuff. Thanks for reading and I hope someone can help me pass that one variable over to the checkout page.</p>\n\n<p>Here is the products page code:</p>\n\n<pre><code>    &lt;div class=\"item\" data-id=\"1\" data-name=\"Item #1\" data-price=\"47.50\"&gt;\n    &lt;img src=\"images/1.jpg\" alt=\"Item #1\"/&gt;\n    &lt;p&gt;&lt;button class=\"add-to-cart\" type=\"button\"&gt;Add to Cart&lt;/button&gt;&lt;/p&gt;\n    &lt;p class=\"itemPrice\"&gt;47.50 $&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Here is the code for script</p>\n\n<pre><code>$(document).ready(function(){\n\n$(document).shoppingCart({\n\n        cartBlock: \"#cart\",\n        shopBlock: \"#shop\",\n        toCart: \".add-to-cart\",\n        currency: \"$\",\n        quantityLimit: 5,\n        checkoutAction: \"checkout.php\"\n\n});\n\n    });\n</code></pre>\n\n<p>Add to cart code</p>\n\n<pre><code>function addToCart(itemID){\n\n        if($.cookie(\"cart\")){var cartArray = stringToArray($.cookie(\"cart\"));}\n        else{var cartArray = new Array();}\n\n        var itemName = $(\".item[data-id=\"+itemID+\"]\").attr(\"data-name\");\n        var itemPrice = $(\".item[data-id=\"+itemID+\"]\").attr(\"data-price\");\n\n        if(cartArray.length == 0){\n            var cartItem = [itemID, itemName, itemPrice, 1];\n            cartArray.push(cartItem);\n        }\n        else if(cartArray.length &gt; 0){\n\n            for(var i = 0; i &lt; cartArray.length; i++){\n                if(cartArray[i][0] == itemID){\n                    var isInCart = true; index = i;\n                    break;\n                }\n                else{isInCart = false;}\n            }\n\n            if(isInCart){\n                var newQuantity = eval(cartArray[index][3]+\"+1\");\n                if(newQuantity &gt; options.quantityLimit){newQuantity = options.quantityLimit;}\n                cartArray[index][3] = newQuantity;\n            }\n            else{\n                var cartItem = [itemID, itemName, itemPrice, 1];\n                cartArray.push(cartItem);\n            }\n\n        }\n        $.cookie(\"cart\", cartArray.join(\"|\"), {path:\"/\"});\n        generateShoppingCart(options.cartBlock);\n    }\n</code></pre>\n\n<p>And here is the checkout </p>\n\n<pre><code>function checkOut(){\n\n        if($.cookie(\"cart\")){\n\n            var cartArray = stringToArray($.cookie(\"cart\"));\n\n            if($(\"#checkout-form\").length != 0){$(\"#checkout-form\").remove();}\n\n            var checkoutForm = $(\"&lt;form&gt;\", {\n                id: \"checkout-form\",\n                action: options.checkoutAction,\n                method: \"post\",\n                css: {display:\"none\"}\n            });\n\n            var cost = 0;\n\n            for(var i = 0; i &lt; cartArray.length; i++){\n\n                var itemInputGroup = '&lt;input type=\"hidden\" name=\"id[]\" value=\"'+cartArray[i][0]+'\"/&gt;'+\n                '&lt;input type=\"hidden\" name=\"name[]\" value=\"'+cartArray[i][1]+'\"/&gt;'+\n                '&lt;input type=\"hidden\" name=\"price[]\" value=\"'+cartArray[i][2]+' '+options.currency+'\"/&gt;'+\n                '&lt;input type=\"hidden\" name=\"quantity[]\" value=\"'+cartArray[i][3]+'\"/&gt;';\n\n                checkoutForm.append(itemInputGroup);\n                cost += (cartArray[i][2] * cartArray[i][3]);\n\n            }\n\n            checkoutForm.append('&lt;input type=\"hidden\" name=\"cost\" value=\"'+cost.toFixed(2)+' '+options.currency+'\"&gt;');\n            $(\"body\").append(checkoutForm);\n            checkoutForm.submit();\n\n        }\n        else{generateShoppingCart(options.cartBlock);}\n\n    }\n</code></pre>\n"},{"tags":["mysql","ubuntu","amazon-ec2","amazon-web-services"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13212454,"title":"unable to connect to the mysql localhost in ubuntu ec2 instqlance","body":"<p>I have a self managed mysql5.1 database running in ubuntu ec2 instance.<br>\nWhen I try to login to the database using <code>mysql -u root -p</code> and after entering the password, it gives an error which say's <code>Access denied for user 'root'@'private dns of the ec2 instance' (using password: YES)</code>  </p>\n\n<p>But I was suppose to connect to the localhost. I am not able to understand how I am trying to connect to the private dns.  </p>\n\n<p>Kindly help me out</p>\n"},{"tags":["php","mysql"],"answer_count":5,"favorite_count":15,"up_vote_count":34,"down_vote_count":0,"view_count":778,"score":34,"question_id":12859942,"title":"Why shouldn't I use mysql_* function in PHP?","body":"<p>What are the technical reasons that I shouldn't use <code>mysql_*</code> functions? (<code>mysql_query</code>, <code>mysql_connect</code>, <code>mysql_real_escape_string</code>)?</p>\n\n<p>Why should I change them as long as it works on my site?</p>\n"},{"tags":["php","mysql","ajax","google-maps","jquery-ajax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13252543,"title":"Save Google Maps Marker Properites to MySQL database","body":"<p>I am creating a website that on one end a user will be able to place a marker on a Google Map using the Google Maps API. I want a user on the other end to be able to load a Google Map and see the markers that were placed from the other person. Think of something like the game Battle Ship.</p>\n\n<p>The the first user's side, the following code shows an object with all the properties of the marker. I turn it into a JSON to be passed to my php script.</p>\n\n<pre><code>function packageMarker(){   \n        var markerObj = new Object();\n        markerObj.index = unitMarker.index;\n        markerObj.country = unitMarker.country;\n        markerObj.Type = unitMarker.type;\n        markerObj.Lat = unitMarker.Lat;\n        markerObj.Lng = unitMarker.Lng;\n        markerObj.Icon = unitMarker.icon;\n        markerObj.CallSign = unitMarker.labelContent;\n        markerObj.unitModel = unitMarker.unitModel;\n        markerObj.num = unitMarker.numOfUnit;\n        markerObj.package = unitMarker.packageType;\n        markerObj.cRadius = unitMarker.cRadius; //in meters\n        if(markerObj.country = \"America\"){\n            markerObj.cColor = \"Blue\";\n        }else{\n            markerObj.cColor = \"Red\";\n        }\n        markerObj.SLat = \"\";\n        markerObj.SLng = \"\";\n        markerObj.ELat = \"\";\n        markerObj.ELng = \"\";\n\n        var queryString = JSON.stringify(markerObj);\n</code></pre>\n\n<p>That all works fine.</p>\n\n<p>I now want to pass that over to my php script to place inside my MySQL database. This is were I get lost. I know I need to use an AJAX call. All the examples I find are for forum submissions but I am not doing that. Once a marker is placed (onClick Event), I want it to be added to the database.</p>\n\n<p>My php script should work. It reads in the variable, decodes it, and inserts into the database.</p>\n\n<p>In a more clear way of say what I want:<br>\nWhat a way to send my JSON object to a php script and have it return success or error not having a forum submission.</p>\n\n<p>Thank you for any help you give</p>\n"},{"tags":["mysql","foreign-keys","primary-key"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13257815,"title":"\"Key column doesn't exist in table\" when trying to define FOREIGN KEY","body":"<p>I'm trying to setup a MySQL-Script that creates 5 tables. In three tables, there is a <code>FOREIGN KEY</code>, and for all three of them the same error appears:</p>\n\n<pre><code>Error Code: 1072. Key column ... doesn't exist in table\n</code></pre>\n\n<p>whereas ... are <code>Gebaeude</code>, <code>Dept_Name</code> and <code>Mat_Nr</code></p>\n\n<p>Here's the script</p>\n\n<pre><code>use cs261_24;\n\ndrop table if exists Professor;\ndrop table if exists Departement;\ndrop table if exists Gebaeude;\ndrop table if exists Student;\ndrop table if exists Pruefung;\n\n\nCREATE TABLE Gebaeude (\n                        Gebaeude    VARCHAR(20) NOT NULL PRIMARY KEY,\n                        Hauswart    VARCHAR(20) NOT NULL,\n                        Adresse     VARCHAR(20) NOT NULL\n)engine = innodb;\n\nCREATE TABLE Professor  (\n                        P_ID        INTEGER PRIMARY KEY CHECK (P_ID &gt; 0),\n                        P_Name      VARCHAR(20) NOT NULL,\n                        Dept_Name   VARCHAR(20) NOT NULL,\n                        Raum        INTEGER UNIQUE CHECK (Raum &gt; 0),\n                        Tel         INTEGER(10) UNIQUE CHECK (Tel &gt; 210000000),\n                        FOREIGN KEY (Gebaeude) REFERENCES Gebaeude (Gebaeude) \n)engine = innodb;\n\nCREATE TABLE Departement (\n                        Dept_Name   VARCHAR(20) NOT NULL PRIMARY KEY,\n                        Vorsteher   VARCHAR(20) NOT NULL\n)engine = innodb;\n\nCREATE TABLE Student (\n                        Mat_Nr      INTEGER(8) PRIMARY KEY CHECK (Mat_Nr &gt; 0),\n                        S_Name      VARCHAR(20) NOT NULL,\n                        Semester    INTEGER CHECK(Semester &gt; 0),\n                        FOREIGN KEY (Dept_Name) REFERENCES Departement (Dept_Name) \n)engine = innodb;\n\nCREATE TABLE Pruefung (\n                        Pr_ID       INTEGER PRIMARY KEY CHECK(Pr_ID &gt; 0),\n                        Fach        VARCHAR(20) NOT NULL,\n                        Pruefer     VARCHAR(20) NOT NULL,\n                        Note        FLOAT CHECK (Note &gt;= 1 AND Note &lt;= 6),\n                        FOREIGN KEY (Mat_Nr) REFERENCES Student (Mat_Nr)\n)engine = innodb;\n</code></pre>\n\n<p>Why? I work with MySQL Workbench, and I clearly see the created tables, plus the specific columns are marked as primary keys!</p>\n"},{"tags":["mysql","sql"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":427,"score":2,"question_id":6612306,"title":"prevent sql injection","body":"<p>Is there  a way to prevent sql injection by using stored procedures?</p>\n\n<p>I have a sql query as </p>\n\n<pre><code>select column name from table where field ='@value'\ncmd.parameters.add('@value', value);\n</code></pre>\n\n<p>I am using parameterized queries with least privileges. How can i write a basic stored procedure to prevent an sql injection.  Is that possible?</p>\n"},{"tags":["mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13257591,"title":"MySQL - SELECT IN - Counting the # of rows for a user_id in a result?","body":"<p>I'm basically trying to query a table to see who might be gaming my paypal system.</p>\n\n<p>The idea is I query my table to see what payments have failed, and then total up the number of failures by <code>user_id</code>. Pretty straightforward concept, I'm just really struggling on how to do it.</p>\n\n<p>My start query:</p>\n\n<pre><code>SELECT * FROM `paypal_ipn` WHERE initial_payment_status =  'Failed'\n</code></pre>\n\n<p>I then want to use the above query, and just print out a total per <code>payer_id</code> (a column).</p>\n\n<p>Is this possible in MySQL alone or do I need to use a PHP script?</p>\n"},{"tags":["mysql","phpmyadmin"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13257661,"title":"Issue with Creating Multi Tables in Mysql Database using PHPMyAdmin","body":"<p>Can you please let me know if it is possible to create multipile tables in mysql database by SQL command in PHPMYADMIN? I already tried this command</p>\n\n<pre><code>CREATE TABLE one (name VARCHAR(30), age INTEGER, height FLOAT, date DATETIME), \nCREATE TABLE two (name VARCHAR(30), age INTEGER, height FLOAT, date DATETIME),\nCREATE TABLE three (name VARCHAR(30), age INTEGER, height FLOAT, date DATETIME);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>CREATE TABLE one (name VARCHAR(30), age INTEGER, height FLOAT, date DATETIME); \nCREATE TABLE two (name VARCHAR(30), age INTEGER, height FLOAT, date DATETIME);\nCREATE TABLE three (name VARCHAR(30), age INTEGER, height FLOAT, date DATETIME);\n</code></pre>\n\n<p>but I am encountering with syntax error message.</p>\n"},{"tags":["mysql","database"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13257697,"title":"How to make a timestamp not show the time","body":"<p>Is there a way to simply change a field properties to to not show the time? I want it to just show the date.</p>\n\n<p>My field name is \"date\". I am using mysql. It is type <code>TIMESTAMP</code>, and defaulted to current timestamp.</p>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":47,"score":-1,"question_id":13109511,"title":"SMS Exam Timetable Checking System","body":"<pre>\ntbl_student\n+-------+--------+----------+\n| s_id  | f_name |  s_name  |\n+-------+--------+----------+\n| 12715 | Gina   | Chikweya |\n|       |        |          |\n+-------+--------+----------+\ntbl_class\n +----------+-------+------+\n| cos_code | s_id  | pos  |\n+----------+-------+------+\n| bsad296  | 12715 |    5 |\n+----------+-------+------+\n\ntbl_exam\n+-----------+--------+-------------+--------+\n| cos_code  | e_time |   e_date    | e_row  |\n+-----------+--------+-------------+--------+\n| bsad296   | 10:00  | 12/12/2012  |      5 |\n+-----------+--------+-------------+--------+\n\n</pre>\n\n<p>these are tables for an exam timetable checking system the problem is my sql is limited but would want a student to input his id(s_id) i want the a query which will return cos_code, e_time, e_date, e_row the student is taking that is suppose i populate my tables with more data</p>\n"},{"tags":["mysql","sql","wordpress"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13257548,"title":"MySQL - Search for column value based on another column value","body":"<p>I have the following SQL statement to calculate several fields based on 3 Wordpress tables. What I need is to calculate the <code>SUM</code> and <code>AVG</code> which are not working in the statement below. </p>\n\n<p>I need to sum all meta_values '3279' only when <code>meta_key = image</code>. The same applies to the <code>AVG</code> formula, ie, avg all meta_values when <code>meta_key=odd</code>.</p>\n\n<p>Any help is much appreciated!</p>\n\n<pre><code>SELECT (user_nicename) AS user,\n       SELECT SUM(IF('meta_key' = 'image', 'meta_value' = '3279', 1,0)) AS won,\n       SELECT SUM(IF('meta_key' = 'image', 'meta_value' = '3280', 1,0)) AS lost,\n       COUNT('meta_key'='odd') AS total,\n       FORMAT (AVG('meta_key' = 'odd', 'meta_value'),1) AS 'average odd',\n       FORMAT (AVG ('meta_key' = 'bet', 'meta_value'),1) AS 'average bet',\n       SUM('meta_key' = 'roi', 'meta_value') AS ROI\nFROM wp_9691postmeta pm, wp_9691posts p\nINNER JOIN wp_9691posts p ON pm.post_id = p.ID \nINNER JOIN wp_9691users u ON p.post_author = u.ID\nWHERE Month(data) = MONTH(CURRENT_DATE)\nGROUP BY (user_nicename)\nORDER BY ROI DESC\n</code></pre>\n"},{"tags":["mysql","database","mysql-error-1091"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13256545,"title":"Can't DROP \"MUL\" key/index in MySQL - column listed in SHOW","body":"<p>I'm using mysql-server-5.0.45-7.el5 on CentOs 5.</p>\n\n<p>In my database, there is a table which, I don't know when, a MUL key was created (the database is shared, under control of a group), and now when I try to insert some values I get an error like shown above:</p>\n\n<pre><code>Duplicate entry '2-1-2004-09-11 13:13:41.526' for key 2:INSERT INTO ephemeris SET\nEPH_TYPE_ID = 1, FILENAME = 'CBERS_2_CCD1_DRD_2004_09_11.13_13_23', ID = 0, \nIS_NEW = 1, SATELLITE_ID = 2, TIME = '2004-09-11 13:13:41.526'\n</code></pre>\n\n<p>I got this error once, and I tried <code>ALTER TABLE ephemeris DROP INDEX SATELLITE_ID;</code>\nIt worked at first time, but now the same constraint appeared and it didn't worked at all.</p>\n\n<p>The structure of table (resumed):</p>\n\n<pre><code>mysql&gt; show columns from ephemeris;\n\n+--------------+--------------+------+-----+---------+----------------+\n| Field        | Type         | Null | Key | Default | Extra          |\n+--------------+--------------+------+-----+---------+----------------+\n| ID           | int(11)      | NO   | PRI | NULL    | auto_increment |\n| SATELLITE_ID | int(11)      | NO   | MUL | 0       |                |\n| EPH_TYPE_ID  | int(11)      | NO   |     | 0       |                |\n</code></pre>\n\n<p>When I type the <code>ALTER TABLE</code> command, mysql returns as:</p>\n\n<pre><code>mysql&gt; ALTER TABLE ephemeris DROP INDEX ephemeris.SATELLITE_ID ;\nERROR 1091 (42000): Can't DROP 'SATELLITE_ID'; check that column/key exists\n</code></pre>\n\n<p>Anybody have already gotten this error? Any help?</p>\n\n<p>Rgds.</p>\n"},{"tags":["php","html","mysql","forms"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13243772,"title":"How do I change the value of textarea by option selected?","body":"<p>I am trying to change the contents of  depending on the current option selected.</p>\n\n<p>The getData(page) comes back correctly (onChange) but it just doesn't go over to the variable I get \"Fatal error: Call to undefined function getData() in C:\\xampp\\htdocs\\pdimi\\admin\\editpages.php on line 42\"</p>\n\n<p>EDIT: This is how I finished it!</p>\n\n<p>Javascript:</p>\n\n<pre><code>&lt;script language=\"JavaScript\" type=\"text/javascript\"&gt;\nfunction getData(combobox){\nvar value = combobox.options[combobox.selectedIndex].value;\n// TODO: check whether the textarea content has been modified.\n// if so, warn the user that continuing will lose those changes and\n// reload a new page, and abort function if so instructed.\ndocument.location.href = '?page='+value;\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>Select form:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;select name=\"page\" onChange=\"getData(this)\"&gt;\n    &lt;?php\nif (isset($_REQUEST['page']))\n    $page = mysql_real_escape_string($_POST['page']);\nelse\n    $page = '';\n$query = \"SELECT pageid FROM pages;\";\n?&gt;\n&lt;option value=\"select\"&gt;Select Page&lt;/option&gt;\n    &lt;option value=\"indexpage\"&gt;Index Page&lt;/option&gt;\n    &lt;option value=\"starthere\"&gt;Start Here&lt;/option&gt;\n\n    &lt;/select&gt;\n</code></pre>\n\n<p>Textarea:</p>\n\n<pre><code>&lt;textarea class=\"ckeditor\" name=\"page_data\" cols=\"80\" row=\"8\" id=\"page_data\"&gt;\n    &lt;?php\nif (isset($_GET['page'])) {\n$sql1 = @mysql_query(\"SELECT * FROM pages WHERE pageid='\".$_GET['page'].\"'\") or die(mysql_error());\n$sql2 = @mysql_fetch_array($sql1) or die(mysql_error());\n\nif ($sql1) {\necho $sql2['content'];\n}\n}\n\n?&gt;\n&lt;/textarea&gt;\n</code></pre>\n\n<p>And that is that!</p>\n"},{"tags":["mysql","vb.net","login"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2795,"score":0,"question_id":8452406,"title":"Using MySQL to Create a Login page in Visual Studio 2010","body":"<p>I am using Visual Studio 2010. I can connect to my MySQL datababse no problem by clicking my login button.</p>\n\n<p>Now I can't figure out how to query the database and check if username and password are correct, and switch to a different form, to display the data loaded from the database.</p>\n\n<p>Can Anyone Help?? Please</p>\n\n<p>I should have posted my Code</p>\n\n<p>This is Login.vb Form</p>\n\n<pre><code>Imports MySql.Data.MySqlClient\n\nPublic Class Login\n    Dim conn As MySqlConnection\n\n    Private Sub Login_btn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Login_btn.Click\n        conn = New MySqlConnection\n        conn.ConnectionString = \"server=localhost;user id=root;password=johnny;database=test\"\n\n        Try\n            conn.Open()\n            If conn.State = ConnectionState.Open Then\n                connectionstatus.Text = \"Connected to Database\"\n                conn.Close()\n            End If\n        Catch myerror As MySqlException\n            connectionstatus.Text = \"Unable to Connect to Database\"\n        Finally\n            conn.Dispose()\n\n        End Try\n    End Sub\nEnd Class\n</code></pre>\n\n<p>When the login is completed, and username and password are correct, I want it to load Main.vb.</p>\n"},{"tags":["java","mysql","spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13256569,"title":"Hibernate issue: @OneToMany annotation returns duplicates","body":"<p>I am facing a problem with Hibernate (4.3.0) where as unidirectional @OneToMany returns duplicates.</p>\n\n<p>My database structure (MySQL with InnoDB) where as 'entry' table has a 1:N relationship with 'entry_address' table. The 'entry' table is the main table and 'entry_address' is a sub-table of 'entry' table.</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE IF NOT EXISTS `entry` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `name` varchar(500) NOT NULL,\n  `active` int(1) NOT NULL DEFAULT '0',\n  `modifiedTS` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP,\n  `createdTS` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ;\n\nINSERT INTO `entry` (`id`, `name`, `active`, `modifiedTS`, `createdTS`) VALUES\n(1, 'Test1', 0, '2012-11-05 13:41:03', '2012-11-01 10:11:22'),\n(2, 'Test2', 1, '2012-11-05 11:19:37', '2012-11-01 10:11:33'),\n(3, 'Test3', 1, '2012-11-05 11:19:37', '2012-11-01 10:11:44');\n\nCREATE TABLE IF NOT EXISTS `entry_address` (\n  `id` int(10) unsigned NOT NULL,\n  `precedence` int(1) NOT NULL DEFAULT '0',\n  `line` varchar(255) DEFAULT NULL,\n  `line2` varchar(255) DEFAULT NULL,\n  `street` varchar(255) DEFAULT NULL,\n  `street2` varchar(255) DEFAULT NULL,\n  `zip` int(5) DEFAULT NULL,\n  `city` varchar(255) DEFAULT NULL,\n  `country` varchar(255) DEFAULT NULL,\n  UNIQUE KEY `entry_address_uq` (`id`,`precedence`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nINSERT INTO `entry_address` (`id`, `precedence`, `line`, `line2`, `street`, `street2`, `zip`, `city`, `country`) VALUES\n(1, 0, 'Line4.1', 'Line4.2', 'Street4.1', 'Street4.2', 9488, 'Schellenberg', 'Liechtenstein'),\n(2, 10, 'Line1.1', 'Line1.2', 'Street1.1', 'Street1.2', 9492, 'Eschen', 'Liechtenstein'),\n(2, 20, 'Line2.1', 'Line2.2', 'Street2.1', 'Street2.2', 9490, 'Vaduz', 'Liechtenstein'),\n(2, 30, 'Line3.1', 'Line3.2', 'Street3.1', 'Street3.2', 9494, 'Schaan', 'Liechtenstein'),\n(3, 10, 'Line5.1', 'Line5.2', 'Street5.1', 'Street5.2', 9492, 'Eschen', 'Liechtenstein'),\n(3, 20, 'Line6.1', 'Line6.2', 'Street6.1', 'Street6.2', 9492, 'Eschen', 'Liechtenstein');\n\nALTER TABLE `entry_address`\n  ADD CONSTRAINT `entry_address_fk` FOREIGN KEY (`id`) REFERENCES `entry` (`id`);\n</code></pre>\n\n<p>Here's the minimal code of \"entry\" entity.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Collection;\nimport javax.persistence.*;\n\n@Entity\n@Table(name = \"entry\")\npublic class Entry {\n    @Id\n    @GeneratedValue\n    @Column(name = \"id\")\n    private Integer id;\n\n    @Column(name = \"name\")\n    private String name;\n\n    @OneToMany(fetch=FetchType.EAGER)\n    @JoinColumn(name = \"id\")\n    private Collection&lt;EntryAddress&gt; addresses;\n\n    @Override\n    public String toString() {\n        return String.format(\"Entry [id=%s, name=%s, addresses=%s]\", id, name, addresses);\n    }\n}\n</code></pre>\n\n<p>Here's the minimal code of \"entry_address\" entity:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import javax.persistence.*;\n\n@Entity\n@Table(name = \"entry_address\")\npublic class EntryAddress {\n    @Id\n    @Column(name = \"id\")\n    private Integer id;\n\n    @Column(name = \"line\")\n    private String line;\n\n    @Override\n    public String toString() {\n        return String.format(\"EntryAddress [line=%s]\", line);\n    }\n}\n</code></pre>\n\n<p>This is the query done by Hibernate (looks good!):\nHibernate: select this_.id as id0_1_, this_.name as name0_1_, addresses2_.id as id0_3_, addresses2_.id as id1_3_, addresses2_.id as id1_0_, addresses2_.line as line1_0_ from entry this_ left outer join entry_address addresses2_ on this_.id=addresses2_.id</p>\n\n<p><img src=\"http://i.stack.imgur.com/26wP3.jpg\" alt=\"MySQL Output\"></p>\n\n<p>But if I run JUnit using:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Collection;\n\nimport junit.framework.Assert;\nimport li.pitschmann.transaction.dao.EntryDao;\nimport li.pitschmann.transaction.entity.Entry;\n\nimport org.junit.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.junit4.AbstractTransactionalJUnit4SpringContextTests;\n\n@ContextConfiguration(locations={\"file:**/web-spring.xml\"})\npublic class EntryDaoTest extends AbstractTransactionalJUnit4SpringContextTests {\n    @Autowired\n    private EntryDao entryDao;\n\n    @Test\n    public void findAllEntries() {\n        Collection&lt;Entry&gt; entries = entryDao.findEntries();\n\n        Assert.assertNotNull(entries);\n\n        for (Entry e : entries) {\n            System.out.println(\"++: \" + e);\n        }\n        // Assert.assertEquals(3, entries.size());\n\n    }\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Collection;\n\nimport org.hibernate.SessionFactory;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport li.pitschmann.transaction.dao.EntryDao;\nimport li.pitschmann.transaction.entity.Entry;\n\npublic class EntryDaoImpl implements EntryDao {\n    private SessionFactory sessionFactory;\n\n    /**\n     * {@inheritDoc}\n     */\n    @SuppressWarnings(\"unchecked\")\n    @Transactional\n    public Collection&lt;Entry&gt; findEntries() {\n        return sessionFactory.getCurrentSession().createCriteria(Entry.class).list();\n    }\n\n    public void setSessionFactory(SessionFactory sessionFactory) {\n        this.sessionFactory = sessionFactory;\n    }\n}\n</code></pre>\n\n<p>Spring XML (most important part, Spring 3.1.2.RELEASE):</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;tx:annotation-driven transaction-manager=\"transactionManager\" /&gt;\n&lt;context:annotation-config /&gt;\n&lt;!-- MySQL DataSource --&gt;\n&lt;bean id=\"dataSource\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\"&gt;\n    &lt;property name=\"driverClass\" value=\"com.mysql.jdbc.Driver\" /&gt;\n    &lt;property name=\"jdbcUrl\" value=\"jdbc:mysql://localhost:3306/entry_db\" /&gt;\n    &lt;property name=\"user\" value=\"root\" /&gt;\n    &lt;property name=\"password\" value=\"\" /&gt;\n&lt;/bean&gt;\n&lt;!-- Session Factory --&gt;\n&lt;bean id=\"sessionFactory\" class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;property name=\"packagesToScan\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;li.pitschmann.transaction.entity&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/prop&gt;\n            &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n&lt;!-- Transaction Manager --&gt;\n&lt;bean id=\"transactionManager\" class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>The console log is:</p>\n\n<pre><code>++: Entry [id=1, name=Test1, addresses=[EntryAddress [line=Line4.1]]]\n++: Entry [id=2, name=Test2, addresses=[EntryAddress [line=Line1.1], EntryAddress [line=Line1.1], EntryAddress [line=Line1.1]]]\n++: Entry [id=2, name=Test2, addresses=[EntryAddress [line=Line1.1], EntryAddress [line=Line1.1], EntryAddress [line=Line1.1]]]\n++: Entry [id=2, name=Test2, addresses=[EntryAddress [line=Line1.1], EntryAddress [line=Line1.1], EntryAddress [line=Line1.1]]]\n++: Entry [id=3, name=Test3, addresses=[EntryAddress [line=Line5.1], EntryAddress [line=Line5.1]]]\n++: Entry [id=3, name=Test3, addresses=[EntryAddress [line=Line5.1], EntryAddress [line=Line5.1]]]\n</code></pre>\n\n<p>I also tried to use @OneToMany(fetch=FetchType.LAZY) instead of FetchType.EAGER - same issue with duplicate addresses.</p>\n\n<pre><code>++: Entry [id=1, name=Test1, addresses=[EntryAddress [line=Line4.1]]]\n++: Entry [id=2, name=Test2, addresses=[EntryAddress [line=Line1.1], EntryAddress [line=Line1.1], EntryAddress [line=Line1.1]]]\n++: Entry [id=3, name=Test3, addresses=[EntryAddress [line=Line5.1], EntryAddress [line=Line5.1]]]\n</code></pre>\n\n<p><strong>Expectation</strong></p>\n\n<p>This is my expecation (3 entry objects with different addresses):</p>\n\n<pre><code>++: Entry [id=1, name=Test1, addresses=[EntryAddress [line=Line4.1]]]\n++: Entry [id=2, name=Test2, addresses=[EntryAddress [line=Line1.1], EntryAddress [line=Line2.1], EntryAddress [line=Line3.1]]]\n++: Entry [id=3, name=Test3, addresses=[EntryAddress [line=Line5.1], EntryAddress [line=Line6.1]]]\n</code></pre>\n\n<p>Is there a bug in Hibernate or am I doing something wrong? Hope someone can help me to find the root cause?! Thank you :-)</p>\n"},{"tags":["php","mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13257353,"title":"Order date from most recent down","body":"<p>I'm looking to sort my info by the most recent date down as well as a cost amount from cheapest to more expensive. My date field is a timestamp in mysql that is defualted with current timestamp. I also have a \"paymentamount\" that I want to organize as well. This is what I have so far and its not working. </p>\n\n<pre><code>$select = \"SELECT * FROM `Carriers` ORDER BY date,paymentamount DESC\";\n</code></pre>\n"},{"tags":["mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":25,"score":-1,"question_id":13257308,"title":"Update rows and set column value to some string + id","body":"<p>I have a table two columns, <code>id</code> and <code>description</code>. <code>id</code> is primary key and auto increment, <code>description</code> is a varchar.</p>\n\n<p>Is there any way to make an update statement that populates the <code>descrption</code> column with something like <code>\"this row has id: @id\"</code>. Where <code>@id</code> is the current id. Hope you get the idea, otherwise ill elaborate.</p>\n"},{"tags":["mysql","sql"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":208,"score":2,"question_id":5532684,"title":"inner join for a query?","body":"<p>I want to do a sql query and have some problems:</p>\n\n<ol>\n<li><p>I want to select from table_1 the ID's Where parent_id is the value I have:</p>\n\n<pre><code>SELECT ID \n  FROM table_1 \n WHERE parent_ID = 'x'\n</code></pre></li>\n<li><p>I want to use the ID'S I got in 1. and </p>\n\n<pre><code>SELECT \n  FROM table_2 \n WHERE ID = 'The ID's from Query 1.'\n</code></pre></li>\n</ol>\n"},{"tags":["mysql","data","postgis"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13233899,"title":"MySQL / PostGIS Database File Type","body":"<p>I am trying to recover a database created in PostGIS and hosted here (under resources):</p>\n\n<p><a href=\"https://github.com/cecois/dossin_art_api\" rel=\"nofollow\">https://github.com/cecois/dossin_art_api</a></p>\n\n<p>I am able to download the file and open it as a text file but I do not know the file type extension which I should use to import this file into MySQL or view it in a meaningful way. Any help would be appreciated.</p>\n\n<p>Thank you</p>\n"},{"tags":["php","mysql","database","session"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13256560,"title":"Storing user data in sessions - from DB","body":"<p>If I have a login system or something similar, I store a session_id and a user_id  in sessions, but any other data pertaining to a certain user is stored in a database. I've seen other scripts where people store other data (<em>username, email etc</em>) in sessions. </p>\n\n<p>I was just wondering, which would be \"better\"? Saving data in sessions from the DB or having less sessions and grabbing the data from the database?</p>\n\n<p>Thanks!</p>\n"},{"tags":["mysql","sql","query","join"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13253814,"title":"MySQL query to retrieve items that have an exact match in a many-to-many relationship","body":"<p>I have the following tables:</p>\n\n<pre><code>Media:\n- mediaid\n- mediatitle\n\n\nMediaTag:\n- mediaid\n- mediatag\n\n\nTag:\n- tagid\n- tagname\n</code></pre>\n\n<p>The following tags:</p>\n\n<pre><code>Tag: (1) - Public\nTag: (2) - Premium\nTag: (3) - Restricted\n</code></pre>\n\n<p>The following media with tags:</p>\n\n<pre><code>Media: (1) - Public\nMedia: (2) - Premium &amp; Restricted\nMedia: (3) - Premium\nMedia: (4) - Restricted\nMedia: (5) - No tags\n</code></pre>\n\n<p>Assume that a user has permissions to see only <code>Public (1)</code> and <code>Restricted (3)</code> tags. If a media has a combination of tags that the user doesn't have explicit access to, he's not allowed to see it. If a media has no tag it's not visible at all. So the user in this case would be able to see only <code>Media 1</code> and <code>Media 4</code>.</p>\n\n<p>Is it possible to write a MySQL query to retrieve the media assuming I have the user permissions in the form of an array with tag IDs <code>(1,3)</code> ?</p>\n"},{"tags":["mysql","sql","database"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13257118,"title":"Link field values and ID to another table?","body":"<p>How do I link or add the field with all my users called \"username\" from my main table to another table so I can run checks and compare values without having to add a ton of rows to my main table? This would be a much cleaner and more organized setup. </p>\n\n<p>Table called login_users. This is my main table that stores their basic information</p>\n\n<pre><code>username       email                 password\nAnthony        user@email.com\nJosh           user@email.com\nTsuyoshi       user@email.com\n</code></pre>\n\n<p>Table 2 called badge_status. This table will hold their status with whether or not they have unlocked an achievement on my site. I want to bring in the <strong>usernames.</strong></p>\n\n<pre><code>username       badge1               badge2\nAnthony        locked               unlocked\nJosh           unlocked             locked\nTsuyoshi       unlocked             locked\n</code></pre>\n\n<p>Also, could table 2 automatically be updated with a new user when they sign up since all new sign ups are imported into the first table. As a side note, I am using phpmyadmin.</p>\n\n<p>Thanks for any help with getting this set up. Very much appreciated.</p>\n"},{"tags":["php","mysql","calendar","pdo"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13256947,"title":"MySQL subquery returning more than one result","body":"<p>Does someone figures out a way to make this code works even when <strong>MySQL subquery</strong> returns more than one result? It is working fine when the user has no event related to him, or when the user has one event related to him, but when a <strong>user is related to more than one event</strong>, the subquery returns more than one result and than the code gets nothing to work with.</p>\n\n<pre><code>$stmt = $db-&gt;prepare(\"SELECT * FROM events WHERE\n                  id_events = ( SELECT id_events FROM relationship_events WHERE id_user = ?)\");\n$stmt-&gt;bindParam(1, $idUser);\n$stmt-&gt;execute();\n\n$rawTimeStamps = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);\n$cleanDateArray = array();\n\nforeach ($rawTimeStamps as $t) {\n$rawDate = $t['start'];\n$rawDate = getdate($rawDate);\n$cleanDate = mktime(0,0,0,$rawDate['mon'],$rawDate['mday'],$rawDate['year']);\n$cleanDateArray[] = $cleanDate;\n}\n\nfor($list_day = 1; $list_day &lt;= $days_in_month; $list_day++):\n\n$calendar.= '&lt;td class=\"calendar-day\"&gt;';\n    $timestamp = mktime(0,0,0,$month,$list_day,$year);\n    if (!empty($cleanDateArray) &amp;&amp; in_array($timestamp, $cleanDateArray)) {\n\n    $date = getdate($timestamp);\n    $time_start = mktime(0,0,0,$date['mon'],$date['mday'],$date['year']);\n    $time_end = mktime(23,59,59,$date['mon'],$date['mday'],$date['year']);\n    $stmt = $db-&gt;prepare('SELECT title FROM events WHERE start BETWEEN ? AND ?');\n    $stmt-&gt;bindParam(1,$time_start,PDO::PARAM_INT);\n    $stmt-&gt;bindParam(2,$time_end,PDO::PARAM_INT);\n    $stmt-&gt;execute();\n    $events = $stmt-&gt;fetch(PDO::FETCH_ASSOC);\n\n    $calendar.= '&lt;div class=\"day-number day-number-event\"&gt;&lt;a href=\"#\"&gt;'.$list_day.'&lt;/a&gt;&lt;/div&gt;&lt;p&gt;'.$events[\"title\"].'&lt;/p&gt;';\n    } else {\n    $calendar.= '&lt;div class=\"day-number day-number-noevent\"&gt;'.$list_day.'&lt;/div&gt;&lt;div id=\"calendar-events\"&gt;&lt;/div&gt;';\n    }\n</code></pre>\n"},{"tags":["php","javascript","mysql","ajax","facebook"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":20,"score":-1,"question_id":13257039,"title":"After Sharing a FB-link, insert into mysql not working","body":"<p>Hey I have a problem...</p>\n\n<p>I would like to when a user has shared a link from my facebook app, that i get his id into my db.</p>\n\n<p>The way i share the link is via the facebook dialog javascript example that i have modified</p>\n\n<p><strong>The sharing javascript code</strong></p>\n\n<pre><code>&lt;script&gt;\n      FB.init({appId: 'xxxx', channelUrl: 'xxxx', status: true, cookie: true});\n\n      function postToFeed() {\n\n        // calling the API ...\n        var obj = {\n          method: 'feed',\n          link: 'https://developers.facebook.com/docs/reference/dialogs/',\n          picture: 'http://fbrell.com/f8.jpg',\n          name: 'Facebook Dialogs',\n          caption: 'Reference Documentation',\n          description: 'Using Dialogs to interact with users.'\n        };\n\n        function callback(response) {\n            xmlhttp=new XMLHttpRequest();\n            xmlhttp.onreadystatechange=function(){\n                if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200){\n                    document.getElementById('msg').innerHTML = \"Post ID: \" + response['post_id'];\n                    document.getElementById('post').style.display = \"none\";\n                }\n            }\n            xmlhttp.open(\"POST\",\"shared.php\",true);\n            xmlhttp.send(\"id=xxx\");\n        }\n\n        FB.ui(obj, callback);\n      }\n\n&lt;/script&gt;\n</code></pre>\n\n<p>The PHP Code</p>\n\n<pre><code>$con = mysqli_connect(\"xxxx\",\"xxx\",\"xxx\",\"xxx\");\n    if (!$con) {\n        die('Could not connect: ' . mysql_error());\n    };\n\n        mysqli_query($con, \"INSERT INTO xxx (fb-id) VALUES (\".$_POST['id'].\")\");\n\n    mysqli_close($con)\n</code></pre>\n\n<p>When I have shared the link I get the post_id, but the nothing in the db ?</p>\n\n<p>Can anybody tell whats wrong ?</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13256725,"title":"MySQL reports syntax error using create index inside if statement","body":"<p>I have the following code in a db update script:</p>\n\n<pre><code>set @index1 = ifnull((select count(1) from information_schema.statistics\n    where table_name = 'Entries' and index_name = 'IX_Entries_EmailAddress'),0);\n\nset @index2 = ifnull((select count(1) from information_schema.statistics \n    where table_name = 'Entries' and index_name = 'IX_Entries_FirstLastName'),0);\n\nif (@index1 = 0) then create index IX_Entries_EmailAddress on Entries (EmailAddress);\nif (@index2 = 0) then create index IX_Entries_FirstLastName on Entries (FirstName, LastName); \n</code></pre>\n\n<p>MySQL reports:</p>\n\n<p>SQL Error (1064): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'if (@index1 = 0) then create index IX_Entries_EmailAddress on Entries (EmailAddr' at line 1</p>\n\n<p>All the syntax looks correct according to the MYSQL docs, what am I missing?</p>\n\n<p>Edit: Got it, thanks to Ryan's answer.</p>\n\n<pre><code>set @sqlcmd := if(@index1 = 0, 'create index IX_Entries_EmailAddress on Entries (EmailAddress);', '');\nprepare stmt from @sqlcmd;\nexecute stmt;\n\nset @sqlcmd := if(@index2 = 0, 'create index IX_Entries_FirstLastName on Entries (FirstName, LastName);', '');\nprepare stmt from @sqlcmd;\nexecute stmt;\n</code></pre>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":2,"view_count":35,"score":-1,"question_id":13256930,"title":"Using last 'ID' value in new query","body":"<p>I'm trying to figure out some little things with SQL queries, i wan't to run 2 queries at the same time and the seconden query needs to use a value from the first query. It may sound weird and strange, but let me show you what i mean with an example:</p>\n\n<p><strong>First query</strong></p>\n\n<pre><code>INSERT INTO groups  (`id`, `name`, `desc`, `badge`, `ownerid`, `created`, `roomid`, `locked`, `privacy`) \nVALUES (NULL, '#form.name#', '#form.desc#', '#form.badge#', '#user.id#', '8', '#form.roomid#', 'open', 'open');\n</code></pre>\n\n<p><strong>Second query</strong></p>\n\n<pre><code>INSERT INTO `group_memberships` (`groupid`, `userid`) VALUES ('?', '#user.id#');\n</code></pre>\n\n<p>In the second query i want to use the value created from 'NULL' in the first query, and i really don't know how to do that.</p>\n\n<p>Kind regards,</p>\n"},{"tags":["mysql","select","join","distinct","inner-join"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13256636,"title":"SUM calculating duplicate records in MySQL join","body":"<p>I'm having problems with a join in MySQL. I have 2 tables, customerorder and customerorderpos. The pos table contains the items ordered - so there is always just one entry per order in the customerorder table but there may be several with the same customerorderid in the customerorderpos.</p>\n\n<p>Everything works in the query except when I try to do a sum calculation on customerorder. For example sum(cart_total_complete). This is returning duplicate values (it's counting more than once for the orders with multiple customerorderpos records). </p>\n\n<p>I'm sure it's something basic, either with the join type or how I use distinct, but I've been trying for hours and just can't get it to work...</p>\n\n<p>Any ideas what I'm doing wrong?\nThanks for your help!!</p>\n\n<pre><code>select concat(left(dayname(from_unixtime(customerorder.datetime)),3), ' ',\nday(from_unixtime(customerorder.datetime))) as day, \ncount(distinct customerorder.customerorderid) as count_totalorders, \ncount(distinct customerorderpos.itemid) as count_differentitems, \nsum(customerorderpos.quantity_ordered - customerorderpos.quantity_cancelled) as quantity_ordered, \nsum(customerorderpos.itemsubtotal) as item_subtotal, \nsum(customerorderpos.pricechangetotal) as item_pricechangetotal, \nsum(customerorderpos.itemtotal) as item_total, \nsum(customerorderpos.purchase_price * (customerorderpos.quantity_ordered - customerorderpos.quantity_cancelled)) as item_purchasepricetotal, \nsum(cart_discounttotal) as total_discount, \nsum(customerorderpos.itemtotal) - sum(customerorderpos.purchase_price * (customerorderpos.quantity_ordered - customerorderpos.quantity_cancelled)) - sum(cart_discounttotal) as item_earningstotal, \nsum(cart_total_shipping) as total_shipping, \nsum(cart_total_tax) as total_tax, \nsum(cart_total_complete) as total_complete \nfrom customerorder inner join customerorderpos on customerorderpos.customerorderid = customerorder.customerorderid \nwhere customerorder.status_cancelled = 0 \ngroup by day(from_unixtime(customerorder.datetime)) order by customerorder.datetime\n</code></pre>\n"},{"tags":["mysql","optimization"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":13255181,"title":"mysql table optimization with indexing","body":"<p>I want to optimise my table in order to speed up the query result. Currently I'm using MyISAM instead of InnoDB.</p>\n\n<p>The question is, very first postcode is 5 chars long and doesn't start with <strong>A</strong> letter. All those postcodes start with <strong>A</strong> letter are 6 or 7 chars long and about in the middle of the table records. Do you think records in my table should be in A-Z order or length of postcode (those with less chars listed on top of the table) is better for optimization?</p>\n\n<p>Or what else do you suggest?</p>\n\n<p><strong>TABLE STRUCTURE:</strong></p>\n\n<pre><code>CREATE TABLE `postcodes` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `postcode` varchar(10) NOT NULL,\n  `latitude` decimal(25,20) NOT NULL,\n  `longitude` decimal(25,20) NOT NULL,\n  `fk_areas_id` int(11) NOT NULL,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `unique_postcodes_postcode` (`postcode`) USING HASH\n) ENGINE=MyISAM AUTO_INCREMENT=1696089 DEFAULT CHARSET=utf8;\n</code></pre>\n\n<p><strong>QUERY:</strong></p>\n\n<pre><code>SELECT\n                    (@rownum := @rownum + 1) AS No,\n                    postcode AS Postcode,\n                    latitude AS Latitude,\n                    longitude AS Longitude,\n                    (\n                        (\n                            ACOS(SIN((SELECT latitude FROM postcodes WHERE postcode = $postcode) * PI() / 180) * SIN(latitude * PI() / 180) +\n                            COS((SELECT latitude FROM postcodes WHERE postcode = $postcode) * PI() / 180) * COS(latitude * PI() / 180) *\n                            COS(((SELECT longitude FROM postcodes WHERE postcode = $postcode) - longitude) * PI() / 180)) * 180 / PI()\n                        ) * 60 * 1.1515\n                    ) AS Distance\n                FROM postcodes, (SELECT @rownum := 0) AS No\n                HAVING Distance &lt;= 0.5 /*miles*/\n                ORDER BY Distance ASC\n</code></pre>\n"},{"tags":["mysql","truncate","mariadb"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13190697,"title":"TRUNCATE TABLE Hangs in MariaDB","body":"<p>Iam trying to migrate from mysql to mariadb. This time I can face another issue with mariadb.</p>\n\n<p>Sometimes the <code>TRUNCATE TABLE</code> query becomes hang. But in MySQL, this issue doesn't occured.</p>\n\n<p>Can anyone help me in this regard??? Iam a newone in MariaDB.</p>\n"},{"tags":["php","mysql","magento"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13256573,"title":"Multiple records for orders and invoices found in Magento store","body":"<p>Recently I upgraded my old magento store to new version. In the new version I found some records are missing for order and invoices. \nTo find the missing records I write a script which searches for records present in the old database that are not in the new. So I came to know that magento upgrade done the right job but the missing records are actually duplicate entries in the old database. Can someone explain me why duplicates entries are there for some order and invoice numbers.</p>\n"},{"tags":["php","mysql","pdo"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":51,"score":5,"question_id":13256237,"title":"php/pdo/msql - access denied","body":"<p>There is a little pdo problem, that I have been working on for a while now. Since I don't know what is wrong here, I thought about taking it to this list. Maybe some of you know more...</p>\n\n<p>I have a website with a login that checks a user and a password against a mysql driven database. When the pdo connection is made in the same file all works fine, one can log in, without any problems. Just as it is supposed to work...</p>\n\n<p>However, when moving the database connection part to a seperate function, which I include from another file, pdo fails on me, and gives me:     </p>\n\n<blockquote>\n  <p>SQLSTATE[28000] [1045] Access denied for user '...'@'...' (using\n  password: NO)\n      Fatal error: Call to a member function prepare() on a non-object in /.../.../... on line 41</p>\n</blockquote>\n\n<p>For the sake of clarity, here is the code:</p>\n\n<p><strong>Version 1:</strong></p>\n\n<p>This works:</p>\n\n<pre><code>&lt;?php\n    require \"./vars_and_functions.php\";\n\n    /* open database connection */\n    try {\n    $pdo = new PDO(\"mysql:host=$db_host;dbname=$db_name\", $db_user, $db_pass);\n\n    /* query */\n    $query = \"SELECT uname, passw FROM members WHERE uname = ? AND passw = ?\";\n    $q = $pdo-&gt;prepare($query);\n    $q-&gt;execute(array($u_name, $p_word_md5));\n    $result = $q-&gt;rowCount();\n\n    if($result == 1) { /* we have a match */                       \n    /* close the database connection */\n               $pdo = null;  \n\n                /* and redirect */\n                header(\"...\");\n\n    } /* if */\n    else { /* wrong credentials */\n        /* close the database connection */                \n                $pdo = null;\n\n                /* and go back to the login page */ \n        header(\"...\");\n    } /* else */\n        } /* try */ \n    catch(PDOException $e) {  \n        echo $e-&gt;getMessage();  \n    } /* catch */\n?&gt;\n</code></pre>\n\n<p><strong>Here is version 2</strong></p>\n\n<p>This does not work:</p>\n\n<pre><code>&lt;?php\n        require \"./vars_and_functions.php\";\n\n        /* open database connection */\n        $pdo = database_connection();\n\n\n\n    /* query */\n            $query = \"SELECT uname, passw FROM members WHERE uname = ? AND passw = ?\";\n            $q = $pdo-&gt;prepare($query);\n            $q-&gt;execute(array($u_name, $p_word_md5));\n            $result = $q-&gt;rowCount();\n\n        if($result == 1) { /* we have a match */                       \n               /* close the database connection */\n                   $pdo = null;  \n\n                    /* and redirect */\n                    header(\"...\");\n\n        } /* if */\n        else { /* wrong credentials */\n            /* close the database connection */                \n                    $pdo = null;\n\n                    /* and go back to the login page */ \n            header(\"...\");\n        } /* else */\n            } /* try */ \n    catch(PDOException $e) {  \n        echo $e-&gt;getMessage();  \n    } /* catch */\n?&gt;\n</code></pre>\n\n<p>My includefile vars_and_functions.php looks like this:</p>\n\n<pre><code>$db_host = \"...\";       \n$db_name = \"...\";           \n$db_user = \"...\";       \n$db_pass = \"...\";       \n\nfunction database_connection() {\n    try {\n    $pdo = new PDO(\"mysql:host=$db_host;dbname=$db_name\", $db_user, $db_pass);\n}  \ncatch(PDOException $e) {  \n    echo $e-&gt;getMessage();  \n}  \n\nreturn $pdo;\n}\n</code></pre>\n\n<p>The only real difference to my mind is that here, the pdo connection is made via a function call, whereas the function sits in the include file vars_and_functions.php.</p>\n\n<p>What's wrong here?</p>\n"},{"tags":["mysql","query","search-engine","information-extraction","data-extraction"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":13,"score":-1,"question_id":13256513,"title":"Extraction Error in query processing","body":"<p>In our project we have to find errors in the result extraction from search engines.\nCan anybody explain what exactly is the extraction error in query processing and what may be an example of one?</p>\n"},{"tags":["php","mysql","forms","select"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13256202,"title":"MySQL Select AND OR","body":"<p>I'm not having success with my query statement and I think it has to do with the way I'm executing it.</p>\n\n<pre><code>$query5 = \"select * from \".$db_prefix.\"customer_det where (fname = '\".$fname.\"' and lname = '\".$lname.\"') or phone = '\".$phone.\"'\";\n</code></pre>\n\n<p>Essentially I want to select all from customer_det when the first and last name match the posted first and last name.  If there's no posted first and last name, then I want it to select all where the posted phone number matches.  My three variables $fname, $lname, and $phone are all set to read from the previous form $_POST['fname']; etc...</p>\n\n<p>Is this the right logic to be using?  </p>\n"},{"tags":["mysql","query"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13255478,"title":"Simple MySQL Query Help: How to Get All Users who have one field value but not another","body":"<p>Pretty bad at MySQL as I've only done light web design and SQL on oracle dbs. Say I have a table listing all the fruits people like.</p>\n\n<pre><code>name   fruit\n------------\njohn   bananas\njohn   oranges\nmarcy  bananas\ndave   oranges\nlucy   bananas\nlucy   oranges\n</code></pre>\n\n<p>Say I wanted to get all the names of people that liked oranges but didn't specify if they liked bananas. There's only two possible fruits in this table. (It may expand to more but there are generally only two).</p>\n\n<p>What would the query be? I want a query that only returns \"dave\" because marcy has only specified she likes bananas, and john and lucy say they like both. I don't think I need a join since this is only one table.</p>\n\n<p>I'm trying</p>\n\n<pre><code>select name from table\nwhere(--uhm.. use the stuff below somehow\nselect name from table\nwhere fruit like 'bananas';\nselect name from table\nwhere fruit like 'oranges';\n)\n</code></pre>\n\n<p>I would also be really happy with a query that returned all the people that like oranges but not bananas, or bananas but not oranges instead. I don't know which query would be easier.</p>\n\n<p>Also I'm sure I'd be able to find someone else with the same problem on the internet. What query would you use on google to answer my question?</p>\n"},{"tags":["php","mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13256074,"title":"multiple queries in php using mysqli_query function","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6821184/how-do-you-do-multiple-sql-statments-in-one-mysql-query\">How do you do multiple SQL statments in one mysql_query?</a>  </p>\n</blockquote>\n\n\n\n<p>In my PHP code:</p>\n\n<pre><code>$result=mysqli_query($this-&gt;con,\"select * from tbl_user where email_id='a@a'\");\nif($result) {\n    echo \"OHEK\";\n}\nif(!$result) {\n    echo \"NOT OHEK\";\n}\n$this-&gt;closeCon();\n</code></pre>\n\n<p>It prints <code>OHEK</code>.</p>\n\n<p>Then I want to execute multiple query like:</p>\n\n<pre><code>$result=mysqli_query($this-&gt;con,\"\n     select * from tbl_user \n     where email_id='a@a';\n     DELETE FROM tbl_user\n\");\n</code></pre>\n\n<p>When I execute in mysql it execute sucessfully but when I execute it by php code the second query will not be executed.</p>\n"},{"tags":["mysql","ruby-on-rails","ruby"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13255987,"title":"Ruby on Rails - How to migrate code from float to decimal?","body":"<p>So I've got a ruby on rails code which use float a lot (lots of \"to_f\"). It uses a database with some numbers also stored as \"float\" type.</p>\n\n<p>I would like to migrate this code and the database to decimal only. Is it as simple as migrating the database columns to decimal (adding a decimal column, copying float column to decimal one, deleting float column, renaming decimal column to old float column name), and replacing \"to_f\" with \"to_d\" in the code? Or do I need to do more than that?</p>\n\n<p>Thanks a lot everyone\nRaphael</p>\n"},{"tags":["mysql","mysql-workbench"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13255685,"title":"Export tables with MySQL Workbench with INSERT statements","body":"<p>I ma trying to export the DataBase i have at MySQL Workbench but I am having troubles to generate the INSERT statements on the .sql file.</p>\n\n<p>I order to export the data, I do the reverse engineering for the database i want to export. Then, i go to </p>\n\n<blockquote>\n  <p>File / Export/ Forward Engineer SQL CREATE Script</p>\n</blockquote>\n\n<p>And once in there, i select the option <strong>Generate INSERT Statements for Tables</strong>.</p>\n\n<p>The result only generates the code for the create tables.</p>\n\n<p>Is there any way to create the insert statements for the data?</p>\n\n<p>Thanks</p>\n"},{"tags":["mysql","arrays","file","jsp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13140039,"title":"Displaying Huge Information on JSP Page","body":"<p>I have a jsp page where data are displayed directly from mysql Database. Due to the huge lump of data, sometime the jsp page shows white blank page. Is there any solution so that the information from Database are stored in ArrayList or File temporarily and when requested jsp page displays these result instead of requesting mysql database. \n    I am using Apache Tomcat, MySQL database and jsp to display the data. </p>\n\n<p>Thanks</p>\n"},{"tags":["mysql","sql-server","sql-server-2008","sql-server-2008-r2","mysql-workbench"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":289,"score":0,"question_id":11619177,"title":"SQL Server 2008 R2 to MySQL Migration","body":"<p>Is there a GUI tool out there that will allow me to migrate entire SQL Server 2008 R2 databases to MySQL?  I have MySQL Workbench installed, but it looks like there isn't a feature in it like SSIS to copy and paste entire databases from SQL Server.  I downloaded the MySQL Migration Toolkit, but it is no longer supported and I get a Java error when running it.</p>\n"},{"tags":["php","python","mysql","sphinx"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13239946,"title":"Sphinx Search indexing some fields but not others","body":"<p>I'm using generic Sphinx with Python (though I tested this against PHP as well and got the same problem). I have a table where I have several fields I want to be able to search in sphinx against but it seems like only some of the fields get indexed.</p>\n\n<p>Here's my source (dbconfig just has the connection information):</p>\n\n<pre><code>source bill_src : dbconfig\n{\n    sql_query       = \\ \n        SELECT id,title,official_title,summary,state,chamber,UNIX_TIMESTAMP(last_action) AS bill_date FROM bill\n\n    sql_attr_timestamp = bill_date\n\n    sql_query_info      = SELECT * FROM bill WHERE id=$id\n}\n</code></pre>\n\n<p>Here's the index</p>\n\n<pre><code>index bills\n{\n    source          = bill_src\n    path            = /var/data/bills\n    docinfo         = extern\n    charset_type        = sbcs\n}\n</code></pre>\n\n<p>I'm trying to use extended match mode. It seems that <code>title</code> and <code>summary</code> are fine but the <code>official_title</code>, the <code>state</code> and the <code>chamber</code> fields are ignored in the index. So for example if I do:</p>\n\n<p><code>@official_title Affordable Care Act</code> </p>\n\n<p>I get:</p>\n\n<pre><code>query error: no field 'official_title' found in schema\n</code></pre>\n\n<p>but the same query with @summary produces results. Any ideas what I'm missing?</p>\n\n<p><strong>EDIT</strong>\nHere's the table I'm trying to index:</p>\n\n<pre><code>+--------------------+--------------+------+-----+---------+----------------+\n| Field              | Type         | Null | Key | Default | Extra          |\n+--------------------+--------------+------+-----+---------+----------------+\n| id                 | int(11)      | NO   | PRI | NULL    | auto_increment |\n| bt50_id            | int(11)      | YES  | MUL | NULL    |                |\n| type               | varchar(10)  | YES  |     | NULL    |                |\n| title              | varchar(255) | YES  |     | NULL    |                |\n| official_title     | text         | YES  |     | NULL    |                |\n| summary            | text         | YES  |     | NULL    |                |\n| congresscritter_id | int(11)      | NO   | MUL | NULL    |                |\n| last_action        | datetime     | YES  |     | NULL    |                |\n| sunlight_id        | varchar(45)  | YES  |     | NULL    |                |\n| number             | int(11)      | YES  |     | NULL    |                |\n| state              | char(2)      | YES  |     | NULL    |                |\n| chamber            | varchar(45)  | YES  |     | NULL    |                |\n| session            | varchar(45)  | YES  |     | NULL    |                |\n| featured           | tinyint(1)   | YES  |     | 0       |                |\n| source_url         | varchar(255) | YES  |     |         |                |\n+--------------------+--------------+------+-----+---------+----------------+\n</code></pre>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":28,"score":-1,"question_id":13255517,"title":"MySQL Error: Unknown column in 'field list' error","body":"<p>Hey guys I have a problem with MySQL, i'm trying to insert data in a table but it's returning this error message</p>\n\n<blockquote>\n  <p>Fatal error: SQL: SELECT e.idtarea AS 'idTarea', e.detalle AS\n  'detalle', e.precio AS 'precio', e.idOrdenReparacion AS\n  'idOrdenReparacion', <code>e.fecha</code> AS 'fecha', concat( 'Editar ',\n  'Eliminar' ) AS Opciones FROM Tarea e WHERE e.idtarea like '%%' ORDER\n  BY e.idtarea;, Error: Unknown column 'e.fecha' in 'field list' in\n  /opt/lampp/htdocs/scep/tareas.php on line 75</p>\n</blockquote>\n\n<p><strong>Here is my code:</strong></p>\n\n<pre><code>    $SQL=\"\n\n      SELECT \n        e.idtarea AS 'idTarea', \n        e.detalle AS 'detalle', \n        e.precio AS 'precio', \n        e.idOrdenReparacion AS 'idOrdenReparacion', \n        e.fecha AS 'fecha', \n        concat('&lt;a href=\\'editarTarea.php?id=',e.idtarea,'\\'&gt;Editar&lt;/a&gt;&amp;nbsp;','&lt;a href=\\'eliminarTarea.php?id=',e.idtarea,'\\' onclick=javascript:confirm(\\'Eliminar?&gt;\\')&gt;Eliminar &lt;/a&gt;') AS Opciones \n      FROM Tarea e \".$FILTRAR_POR.\" \n      ORDER BY e.idtarea;\";\n\n      $RESULT = mysql_query($SQL) or trigger_error(\"SQL: $SQL, Error: \" . mysql_error(), E_USER_ERROR); \n</code></pre>\n\n<p><strong>Table Tarea from database:</strong></p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS `Tarea` (\n   `idTarea` int(11) NOT NULL AUTO_INCREMENT,\n   `detalle` varchar(45) COLLATE latin1_danish_ci DEFAULT NULL,\n   `precio` varchar(45) COLLATE latin1_danish_ci DEFAULT NULL,\n   `idOrdenReparacion` int(11) NOT NULL DEFAULT '0',\n   `fecha` date DEFAULT NULL,\n   PRIMARY KEY (`idTarea`,`idOrdenReparacion`),\n   KEY `fk_Tarea_OrdenReparacion1_idx` (`idOrdenReparacion`)\n  ) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_danish_ci AUTO_INCREMENT=2 ;\n\n.....\n\n  ALTER TABLE `Tarea`\n  ADD CONSTRAINT `fk_Tarea_OrdenReparacion1` FOREIGN KEY (`idOrdenReparacion`) \n  REFERENCES `OrdenReparacion` (`idOrdenReparacion`) ON DELETE NO ACTION ON UPDATE NO ACTION;\n</code></pre>\n"},{"tags":["php","mysql","pagination"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13254772,"title":"Php pagination based on values in column","body":"<p>I hope this question isn't a dup. I've been looking at pagnation with php but what I've seen is based on the total number of entries and a fixed amount of records on each page. How can I use pagination based on the values that appear in a particular column? </p>\n\n<p>So for example <code>SELECT answers, name FROM table</code></p>\n\n<p>Lets say there are 5 <code>answers</code> to choose from and I want to use pagnation for each <code>answer</code>.\nNot all the answers have the same amount of records allocated to them.</p>\n\n<p>This would obviously just return 5 pages of similar amount records:</p>\n\n<pre><code>$per_page = 5; \n$sql = \"SELECT answer, name FROM table\";\n$result = mysql_query($sql);\n$count = mysql_num_rows($result);\n$pages = ceil($count/$per_page)\n\n//Pagination Numbers\nfor($i=1; $i&lt;=$pages; $i++)\n{\necho '&lt;li id=\"'.$i.'\"&gt;'.$i.'&lt;/li&gt;';\n}\n</code></pre>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13255383,"title":"Should each individual column have its charset defined?","body":"<p>Simple question: when creating database tables I already specify the collation for the entire table, however, individual columns also have a  collation field. Should this be left blank or filled with the same collation as the table (for non-numeric types that is)?</p>\n\n<p>Could anyone shed some light on what this field is for exactly? My suspicion is that it is used for when the column's collation differs from the table's collation, however, I would like a confirmation.</p>\n"},{"tags":["mysql","jsf","jpa","ejb","multiuser"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13255279,"title":"Multi user web application","body":"<p>I know this question was asked a lot, but I didn`t find anything that could help me.</p>\n\n<p>I`m using Java, JSF, EJB, JPA, GlassFish, MySQL. </p>\n\n<p>I developed web sites with autentification, using these technologies, but with only from one location (one session at a time) and if another user logged in from another location (s)he could see the state of the first users session. </p>\n\n<p>Now I need to develop a multiuser web application with a commom home page and a few commom features, but the rest needs to be user dependent a multi thread access to the web application and to the database. </p>\n\n<p>I need to:</p>\n\n<ul>\n<li>limit the users capabilities to start a session from only one location, one computer</li>\n<li>have them make them register on the site for a limited period of time (the profile should be active for 1 year lets say)</li>\n<li>to give them timeouts after 1 hour\nand so on...</li>\n</ul>\n\n<p>Please help me understand what I have to do to!\nI don<code>t know how and where to start, I read a lot of articles about this, but it was just bits and pieces and I don</code>t have a full picture about this.</p>\n\n<p>Thank you for your time, happy coding and keep up the excelent work your doing here!</p>\n"},{"tags":["php","mysql","html5","time"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13254343,"title":"HTML5 input time from 24 hour to 12 hour","body":"<p>I have an HTML5 that uses an <code>&lt;input&gt;</code> tag with <code>type\"time\"</code> which submits into MySQL using PHP. The problem is, the <code>\"time\"</code> is using a 24 hour format <code>00:00:00</code> which doesn't make sense to the end user. </p>\n\n<p>I want to be able to have the user enter it in 12 hour format and also have it display on a separate page where the results are posted from MySQL in a 12 hour format. </p>\n\n<p>What's the easiest way to do this? It's a website that keeps track of when a customer walks in and leaves the lab. So being able to subtract those results is crucial. What I have right now (the 24 hour format) works just fine for our purposes (and subtracts to display total time spent) but the 24 hour format is an issue which if solved could be very useful to us. </p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1052,"score":1,"question_id":8829793,"title":"MySQL not starting, InnoDB not available","body":"<p>A client's server is running MySQL 5.0. Last night the server automatically restarted to install Windows updates. After restarting, MySQL does not want to run any more. The MySQL log indicates that it shut down normally. Windows logs shows the service can't start because \"Default storage engine (InnoDB) is not available\". MySQL was running fine for years before this and nothing was recently changed.</p>\n\n<p>Daily backups are made of the data, and the installation directory is still there.</p>\n\n<p>How do I get the MySQL service running again? </p>\n\n<p>EDIT: I just noticed the following in the server.err file in the data folder:</p>\n\n<pre><code>InnoDB: Error: log file .\\ib_logfile0 is of different size 0 10485760 bytes\nInnoDB: than specified in the .cnf file 0 25165824 bytes!\n120112  5:16:30 [ERROR] Default storage engine (InnoDB) is not available\n120112  5:16:30 [ERROR] Aborting\n</code></pre>\n"},{"tags":["php","mysql","mysql-select-db"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13253912,"title":"how i can put (dash or underscore) between words in (select php,mysql)?","body":"<p>i have selected some rows from mysql</p>\n\n<p>and i want put underscore between the words</p>\n\n<p>like this :</p>\n\n<pre><code>&lt;?php\n$query='SELECT * FROM subcates WHERE maincates_id=1';\n$result=mysql_query($query);\nwhile($row=mysql_fetch_array($result, MYSQL_ASSOC)){\n    echo \"&lt;li&gt;&lt;a href='\".$row['name'].\".php?c=\".$row['id'].\"&amp;gov=1&amp;h=1'&gt;\".$row['name'].\"&lt;/a&gt;&lt;/li&gt;\";    \n}\n?&gt;\n</code></pre>\n\n<p>i want when select the name give me this :</p>\n\n<p>in <code>database ==&gt; first second</code> </p>\n\n<p>i want it when <code>selected ==&gt; first_second</code></p>\n\n<p>thx</p>\n"},{"tags":["php","mysql",".htaccess","url","mod-rewrite"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13249846,"title":"Solved friendly URL in php? with other pages readmore in htaccess","body":"<p><strong>Hey There I Have 2 pages in selecting data from mysql frist page readmore.php to get posts with url from table posts sec page categories.php to get data  with caturl from table categories</strong>\nreadmore.php in htaccess \n        RewriteEngine On</p>\n\n<pre><code>    RewriteRule ^([a-zA-Z0-9-/]+).html$ readmore.php?url=$1\n    RewriteRule ^([a-zA-Z0-9-/]+).html/$ readmore.php?url=$1\n</code></pre>\n\n<p>categories.php in htaccess \n        RewriteEngine On</p>\n\n<pre><code>    RewriteRule ^([a-zA-Z0-9-/]+).html$ categories.php?caturl=$1\n    RewriteRule ^([a-zA-Z0-9-/]+).html/$ categories.php?caturl=$1\n</code></pre>\n\n<p><strong>My problem located when get caturl htaccess redirect me to readmore.php but i want redirect to categories.php !!</strong> </p>\n"},{"tags":["php","mysql","loops"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13254968,"title":"Need unique url but require non unique information from other columns","body":"<p>I am making a review system and I need to be able to only select the DISTINCT url from the database, but then pull the relevant page title and rating time. I have managed to get it working by using:</p>\n\n<pre><code>`&lt;?php\n#opens conection\ninclude 'conn.php';\necho $_COOKIE[\"search\"];\n$sql = \"SELECT * FROM feedback WHERE url LIKE '%$_COOKIE[search]%' GROUP BY url ORDER   BY ratingtime DESC\";\n#runs the query\n$query = mysql_query($sql);\n$linecount = 1;\n#populates the table with the information\necho '&lt;table id=\"myTable\" class=\"tablesorter\"&gt;';\necho'&lt;thead&gt;\n    &lt;tr class =\"null\"&gt;\n      &lt;th&gt;URL&lt;/th&gt;\n      &lt;th&gt;Page Title&lt;/th&gt;\n      &lt;th&gt;Date Last Modified&lt;/th&gt;\n      &lt;th&gt;Average Rating&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;';\necho '&lt;tbody&gt;';\necho '&lt;tr&gt;';\nwhile($row = mysql_fetch_array($query))\n  {\n        echo '&lt;td class=\"overFlow\"&gt;&lt;a href=\"extra_info.php?url='.$row['url'].'\"&gt;' .$row['url']. '&lt;/a&gt;&lt;/td&gt;';\n        echo '&lt;td&gt;&lt;a href=\"extra_info.php?url='.$row['url'].'\"&gt;' . $row['pagetitle'] . '&lt;/a&gt;&lt;/td&gt;';\n        echo '&lt;td&gt;' . $row['ratingtime'] . '&lt;/td&gt;';\n        $check = mysql_query(\"SELECT `rating` FROM feedback WHERE url = '$row[url]'\");\n        $totalvotes = mysql_num_rows($check);\n        $result = mysql_query(\"SELECT SUM(rating) AS 'rating_total' FROM feedback WHERE url = '$row[url]'\") or die(mysql_error());\n        $row = mysql_fetch_assoc($result);\n        $add = $row['rating_total'];\n        $average = $add / $totalvotes;\n        echo '&lt;td&gt;' .round($average, 2). '&lt;/td&gt;';\n        echo '&lt;/tr&gt;';\n        $linecount++;\n  }\necho '&lt;/tbody&gt;';\necho \"&lt;/table&gt;\";\n?&gt;`\n</code></pre>\n\n<p>I just wondered if there was a much better way to go about doing this? \nI am a complete noob when it come to php so if you provide any advice could you please provide evidence/documentation so that I can read up on it and learn.</p>\n"},{"tags":["php","javascript","jquery","mysql","ajax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":44,"score":-6,"question_id":13246124,"title":"What javascript engine/lib should i use?","body":"<p>i m going to create a dating web site. it's online game. there are will at first registration, chat and the game, where people can ask question and random users (3 boys to 3 girls) answer on each other at real time.</p>\n\n<p>at the end, people, if they want, they can choose a man.</p>\n\n<p>so, i know very good html, php, mysql. A little js, ajax, jQuery.\nwhat engine and how should i start to make this project?</p>\n\n<p>i read about Ajax Push Engine. Should i use it or search something else, another technology? Or maybe just write site on clear jQuery and mysql?</p>\n"},{"tags":["mysql","database","character-encoding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13254896,"title":"MySQL character set and collation","body":"<p>Ok, quick question regarding charset/collation.</p>\n\n<p>If I have a database where the collation_database=latin1_swedish_ci but all the tables and columns have been created using utf8 will it differ from a database that has collation_database=utf8_general_ci with the same tables/columns? (I realise that creating new tables will pick up latin1 unless specified).</p>\n\n<p>Am I right in thinking that collation_database (and character_set_database) are only defaults and they can just be overridden on table creation?</p>\n\n<p>Cheers,\nDave</p>\n"},{"tags":["php","mysql","sql","table","mysql-num-rows"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":36,"score":-4,"question_id":13254860,"title":"PHP/MYSQL mysql_num_row() error","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3698740/mysql-num-rows-supplied-argument-is-not-a-valid-mysql-result-resource\">mysql_num_rows(): supplied argument is not a valid MySQL result resource</a>  </p>\n</blockquote>\n\n\n\n<pre><code>$actcheck = \"SELECT * FROM users WHERE username='$username' AND password='$password' AND  = activated = '1'\";\n$query2 = mysql_query($actcheck);\n$count2 = mysql_num_rows($query2);\nif(!($count2==1)){\necho \"You have not activated\";\nexit();\n}\n</code></pre>\n\n<p><strong>Warning: mysql_num_rows(): supplied argument is not a valid MySQL result resource</strong>\nAny help?</p>\n"},{"tags":["php","mysql","sql"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13254694,"title":"insert into with select","body":"<p>hello I would like to insert the values ​​in a column from a select query</p>\n\n<pre><code>insert into (cmts) stat_alert \nvalues(SELECT stat_alert.cell,stat_alert.cmts,cell_cmt.cmts FROM stat_alert`LEFT OUTER JOIN cell_cmt ON cell_cmt.`cell`=stat_alert.cell WHERE stat_alert.`cell`=cell_cmt.cell )\n</code></pre>\n\n<p>I have syntax error\nwho can help me??</p>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13254176,"title":"PHP MySqlI meaningless error message. What ever could it be?","body":"<p>Fatal error: Call to a member function bind_param() on a non-object in myFile.php on line 47</p>\n\n<pre><code>45 $statement = $con-&gt;prepare('call aProcedure(?,?,?)');\n46 $statement-&gt;bind_param(\"sss\", $str1, $str1, $str1);\n47 $statement-&gt;execute();\n</code></pre>\n\n<p>Why?</p>\n\n<p>PS: It works on my local system (F€#%\"#€ i hate to say that)\nThe procedure executes successfully on both my local system and in production via. MySQL Workbench. Just refuses to run in production from PHP</p>\n"},{"tags":["php","mysql","forms","encryption","joomla"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13253928,"title":"Field Encryption in Joomla Using RSForm Pro and SSL","body":"<p>A client has an online job application form that will be collecting social security numbers for a background check. Right now we are using RSForm Pro and Joomla 1.5. I have it set up so that the form is using SSL and the ssn field is a password field (not that it really does anything), but there is no encryption on the database side. I checked with RSJoomla (the maker of RSForm) and they said there is no default capability for this. I looked at the way the database is set up, and it's a bit odd.</p>\n\n<p>My question is this- is anyone familiar with how RSForm works enough to tell me where to begin trying to encrypt/decrypt a particular field (or all of them, if that's easier)?</p>\n\n<p>And how is the best way to go about this? From what I've gathered I should use AES and probably some salt.</p>\n"},{"tags":["php","mysql","column"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":3,"view_count":30,"score":-1,"question_id":13254677,"title":"MySQL Error: Unknown column in 'field list' PHP/MySQL","body":"<p>Hey guys I have a problem with MySQL, i'm trying to insert data in a table but it's returning this error message</p>\n\n<blockquote>\n  <p>Fatal error: SQL: SELECT e.idtarea AS 'idTarea', e.detalle AS 'detalle', e.precio AS 'precio', e.idor AS 'idOrdenReparacion', e.fecha AS 'fecha', concat( 'Editar ', 'Eliminar' ) AS Opciones FROM Tarea e WHERE e.idtarea like '%%' ORDER BY e.idtarea;, Error: Unknown column 'e.idor' in 'field list' in /opt/lampp/htdocs/scep/tareas.php on line 76 </p>\n</blockquote>\n\n<p><strong>Here is my code:</strong></p>\n\n<pre><code>$SQL=\"\n\n  SELECT \n    e.idtarea AS 'idTarea', \n    e.detalle AS 'detalle', \n    e.precio AS 'precio', \n    e.idor AS 'idOrdenReparacion', \n    e.fecha AS 'fecha', \n    concat('&lt;a href=\\'editarTarea.php?id=',e.idtarea,'\\'&gt;Editar&lt;/a&gt;&amp;nbsp;','&lt;a href=\\'eliminarTarea.php?id=',e.idtarea,'\\' onclick=javascript:confirm(\\'Eliminar?&gt;\\')&gt;Eliminar &lt;/a&gt;') AS Opciones \n  FROM Tarea e \".$FILTRAR_POR.\" \n  ORDER BY e.idtarea;\";\n\n  $RESULT = mysql_query($SQL) or trigger_error(\"SQL: $SQL, Error: \" . mysql_error(), E_USER_ERROR); \n</code></pre>\n\n<p><strong>Table Tarea from database:</strong></p>\n\n<pre><code>  CREATE TABLE IF NOT EXISTS `Tarea` (\n   `idTarea` int(11) NOT NULL AUTO_INCREMENT,\n   `detalle` varchar(45) COLLATE latin1_danish_ci DEFAULT NULL,\n   `precio` varchar(45) COLLATE latin1_danish_ci DEFAULT NULL,\n   `idOrdenReparacion` int(11) NOT NULL DEFAULT '0',\n   `fecha` date DEFAULT NULL,\n   PRIMARY KEY (`idTarea`,`idOrdenReparacion`),\n   KEY `fk_Tarea_OrdenReparacion1_idx` (`idOrdenReparacion`)\n  ) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_danish_ci AUTO_INCREMENT=2 ;\n\n.....\n\n  ALTER TABLE `Tarea`\n  ADD CONSTRAINT `fk_Tarea_OrdenReparacion1` FOREIGN KEY (`idOrdenReparacion`) \n  REFERENCES `OrdenReparacion` (`idOrdenReparacion`) ON DELETE NO ACTION ON UPDATE NO ACTION; \n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["mysql","vb.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":23,"score":-1,"question_id":13254204,"title":"Vb.net error for query and database","body":"<p>Dim datetimepicker1 As String = Format(System.DateTime.Now, \"yyyy-MM-dd HH:mm:ss\")</p>\n\n<pre><code>    Try\n        Dim cmd As MySqlCommand = New MySqlCommand\n        With cmd\n            .CommandText = \"INSERT INTO tbl_product (`prod_name`,`prod_desc`, `cat_id`, `uom_id`,`uom_num`, `dept_id`, `brand_id`, `size_id`, `type_id`, `remarks`, `date`) values (@prod_name,@prod_desc,@cat_id,@uom_id,@uom_num,@dept_id,@brand_id,@size_id,@type_id,@remarks,@date)\"\n            .Connection = SQLConnection\n            .CommandType = CommandType.Text\n            .Parameters.AddWithValue(\"@prod_name\", TextBox1.Text)\n            .Parameters.AddWithValue(\"@prod_desc\", TextBox2.Text)\n            .Parameters.AddWithValue(\"@cat_id\", ComboBox1.Text)\n            .Parameters.AddWithValue(\"@uom_id\", ComboBox2.Text)\n            .Parameters.AddWithValue(\"@uom_num\", TextBox3.Text)\n            .Parameters.AddWithValue(\"@dept_id\", ComboBox3.Text)\n            .Parameters.AddWithValue(\"@brand_id\", ComboBox4.Text)\n            .Parameters.AddWithValue(\"@size_id\", ComboBox5.Text)\n            .Parameters.AddWithValue(\"@type_id\", ComboBox6.Text)\n            .Parameters.AddWithValue(\"@remarks\", RichTextBox1.Text)\n            .Parameters.AddWithValue(\"@date\", datetimepicker1)\n            .ExecuteNonQuery()\n\n        End With\n\n            MsgBox(\" SIze Successfully added\")\n        Catch ex As Exception\n            MsgBox(ex.Message.ToString)\n\n\n\n        End Try\n</code></pre>\n\n<p>cannot add or update child row foreign key constraint fails this is my error</p>\n\n<p>this is my table structure*<strong><em>*</em>**<em>*</em>**<em>*</em>****</strong>*8</p>\n\n<hr>\n\n<p>--</p>\n\n<h2>-- Table structure for table <code>tbl_brand</code></h2>\n\n<p>CREATE TABLE IF NOT EXISTS <code>tbl_brand</code> (\n  <code>brand_id</code> int(11) NOT NULL AUTO_INCREMENT,\n  <code>brand_name</code> varchar(200) NOT NULL,\n  <code>brand_desc</code> varchar(200) DEFAULT NULL,\n  PRIMARY KEY (<code>brand_id</code>)\n) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ;</p>\n\n<p>--</p>\n\n<h2>-- Dumping data for table <code>tbl_brand</code></h2>\n\n<p>INSERT INTO <code>tbl_brand</code> (<code>brand_id</code>, <code>brand_name</code>, <code>brand_desc</code>) VALUES\n(1, 'Nike ', 'Nike Air '),\n(2, 'Crocs ', 'Class A '),\n(3, 'SafeGuard ', 'SafeGuard ');</p>\n\n<hr>\n\n<p>--</p>\n\n<h2>-- Table structure for table <code>tbl_category</code></h2>\n\n<p>CREATE TABLE IF NOT EXISTS <code>tbl_category</code> (\n  <code>cat_id</code> int(11) NOT NULL AUTO_INCREMENT,\n  <code>cat_name</code> varchar(200) NOT NULL,\n  <code>cat_desc</code> varchar(200) NOT NULL,\n  PRIMARY KEY (<code>cat_id</code>)\n) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;</p>\n\n<p>--</p>\n\n<h2>-- Dumping data for table <code>tbl_category</code></h2>\n\n<p>INSERT INTO <code>tbl_category</code> (<code>cat_id</code>, <code>cat_name</code>, <code>cat_desc</code>) VALUES\n(1, 'Bath Soap ', 'Bath Soap '),\n(2, 'Detergent ', 'Detergent ');</p>\n\n<hr>\n\n<p>--</p>\n\n<h2>-- Table structure for table <code>tbl_dept</code></h2>\n\n<p>CREATE TABLE IF NOT EXISTS <code>tbl_dept</code> (\n  <code>dept_id</code> int(11) NOT NULL AUTO_INCREMENT,\n  <code>dept_name</code> varchar(200) NOT NULL,\n  <code>dept_desc</code> varchar(200) NOT NULL,\n  PRIMARY KEY (<code>dept_id</code>)\n) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;</p>\n\n<p>--</p>\n\n<h2>-- Dumping data for table <code>tbl_dept</code></h2>\n\n<p>INSERT INTO <code>tbl_dept</code> (<code>dept_id</code>, <code>dept_name</code>, <code>dept_desc</code>) VALUES\n(1, 'Shoes ', 'Shoes '),\n(2, 'Soap ', 'Soap ');</p>\n\n<hr>\n\n<p>--</p>\n\n<h2>-- Table structure for table <code>tbl_product</code></h2>\n\n<p>CREATE TABLE IF NOT EXISTS <code>tbl_product</code> (\n  <code>prod_id</code> int(11) NOT NULL AUTO_INCREMENT,\n  <code>prod_name</code> varchar(200) NOT NULL,\n  <code>prod_desc</code> varchar(200) DEFAULT NULL,\n  <code>cat_id</code> int(11) NOT NULL,\n  <code>dept_id</code> int(11) NOT NULL,\n  <code>brand_id</code> int(11) NOT NULL,\n  <code>type_id</code> int(11) NOT NULL,\n  <code>uom_id</code> int(11) NOT NULL,\n  <code>size_id</code> int(11) NOT NULL,\n  <code>date</code> datetime NOT NULL,\n  <code>remarks</code> varchar(200) DEFAULT NULL,\n  <code>uom_num</code> int(60) DEFAULT NULL,\n  PRIMARY KEY (<code>prod_id</code>),\n  KEY <code>tbl_product_ibfk_9</code> (<code>type_id</code>),\n  KEY <code>tbl_product_ibfk_10</code> (<code>uom_id</code>),\n  KEY <code>tbl_product_ibfk_11</code> (<code>size_id</code>),\n  KEY <code>tbl_product_ibfk_12</code> (<code>dept_id</code>),\n  KEY <code>tbl_product_ibfk_13</code> (<code>cat_id</code>),\n  KEY <code>tbl_product_ibfk_14</code> (<code>brand_id</code>)\n); ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;</p>\n\n<hr>\n\n<p>--</p>\n\n<h2>-- Table structure for table <code>tbl_size</code></h2>\n\n<p>CREATE TABLE IF NOT EXISTS <code>tbl_size</code> (\n  <code>size_id</code> int(11) NOT NULL AUTO_INCREMENT,\n  <code>size_name</code> varchar(100) NOT NULL,\n  PRIMARY KEY (<code>size_id</code>)\n) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ;</p>\n\n<p>--</p>\n\n<h2>-- Dumping data for table <code>tbl_size</code></h2>\n\n<p>INSERT INTO <code>tbl_size</code> (<code>size_id</code>, <code>size_name</code>) VALUES\n(1, 'Small(S) '),\n(2, 'Medium(M) '),\n(3, 'Large(L) ');</p>\n\n<hr>\n\n<p>--</p>\n\n<h2>-- Table structure for table <code>tbl_type</code></h2>\n\n<p>CREATE TABLE IF NOT EXISTS <code>tbl_type</code> (\n  <code>type_id</code> int(11) NOT NULL AUTO_INCREMENT,\n  <code>type_name</code> varchar(200) NOT NULL,\n  PRIMARY KEY (<code>type_id</code>)\n) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=9 ;</p>\n\n<p>--</p>\n\n<h2>-- Dumping data for table <code>tbl_type</code></h2>\n\n<p>INSERT INTO <code>tbl_type</code> (<code>type_id</code>, <code>type_name</code>) VALUES\n(1, 'BaskertBall Shoes '),\n(2, 'Jersey Shorts '),\n(3, 'running shoes '),\n(8, 'Bath Soap ');</p>\n\n<hr>\n\n<p>--</p>\n\n<h2>-- Table structure for table <code>tbl_uom</code></h2>\n\n<p>CREATE TABLE IF NOT EXISTS <code>tbl_uom</code> (\n  <code>uom_id</code> int(11) NOT NULL AUTO_INCREMENT,\n  <code>uom_name</code> varchar(200) NOT NULL,\n  PRIMARY KEY (<code>uom_id</code>)\n) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ;</p>\n\n<p>--</p>\n\n<h2>-- Dumping data for table <code>tbl_uom</code></h2>\n\n<p>INSERT INTO <code>tbl_uom</code> (<code>uom_id</code>, <code>uom_name</code>) VALUES\n(1, 'kilogram(kg) '),\n(2, 'Gram(g) '),\n(3, 'Milligram(Mg) '),\n(4, 'Liter(L) '),\n(5, 'Milliliters(ml) '),\n(6, 'Pieces(pcs) '),\n(7, 'foot(ft) ');</p>\n\n<hr>\n\n<p>--</p>\n\n<h2>-- Table structure for table <code>tbl_user</code></h2>\n\n<p>CREATE TABLE IF NOT EXISTS <code>tbl_user</code> (\n  <code>user_id</code> int(11) NOT NULL AUTO_INCREMENT,\n  <code>user_code</code> varchar(200) DEFAULT NULL,\n  <code>user_password</code> varchar(200) DEFAULT NULL,\n  <code>user_name</code> varchar(200) DEFAULT NULL,\n  <code>user_level</code> int(1) DEFAULT NULL,\n  <code>datetime</code> datetime NOT NULL,\n  <code>com_code</code> varchar(11) NOT NULL,\n  PRIMARY KEY (<code>user_id</code>),\n  UNIQUE KEY <code>user_code</code> (<code>user_code</code>)\n) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=10 ;</p>\n\n<p>--</p>\n\n<h2>-- Dumping data for table <code>tbl_user</code></h2>\n\n<p>INSERT INTO <code>tbl_user</code> (<code>user_id</code>, <code>user_code</code>, <code>user_password</code>, <code>user_name</code>, <code>user_level</code>, <code>datetime</code>, <code>com_code</code>) VALUES\n(1, '1024', '1024', 'Vincent Dematera', 3, '2012-01-10 18:18:33', '001'),\n(7, '14 ', '14', 'Megan Bueno', 1, '2012-10-30 21:56:14', '002'),\n(8, '13', '13', 'Anonymous', 1, '2012-10-20 21:51:00', '002'),\n(9, '9', '9', 'boom', 1, '0000-00-00 00:00:00', '003');</p>\n\n<p>--</p>\n\n<h2>-- Constraints for dumped tables</h2>\n\n<p>--</p>\n\n<h2>-- Constraints for table <code>tbl_product</code></h2>\n\n<p>ALTER TABLE <code>tbl_product</code></p>\n\n<p>ADD CONSTRAINT <code>tbl_product_ibfk_9</code> FOREIGN KEY (<code>type_id</code>) REFERENCES <code>tbl_type</code> (<code>type_id</code>),\n  ADD CONSTRAINT <code>tbl_product_ibfk_10</code> FOREIGN KEY (<code>uom_id</code>) REFERENCES <code>tbl_uom</code> (<code>uom_id</code>),\n  ADD CONSTRAINT <code>tbl_product_ibfk_11</code> FOREIGN KEY (<code>size_id</code>) REFERENCES <code>tbl_size</code> (<code>size_id</code>),\n  ADD CONSTRAINT <code>tbl_product_ibfk_12</code> FOREIGN KEY (<code>dept_id</code>) REFERENCES <code>tbl_dept</code> (<code>dept_id</code>),\n  ADD CONSTRAINT <code>tbl_product_ibfk_13</code> FOREIGN KEY (<code>cat_id</code>) REFERENCES <code>tbl_category</code> (<code>cat_id</code>),\n  ADD CONSTRAINT <code>tbl_product_ibfk_14</code> FOREIGN KEY (<code>brand_id</code>) REFERENCES <code>tbl_brand</code> (<code>brand_id</code>),\n  ADD CONSTRAINT <code>tbl_product_ibfk_2</code> FOREIGN KEY (<code>type_id</code>) REFERENCES <code>tbl_type</code> (<code>type_id</code>),\n  ADD CONSTRAINT <code>tbl_product_ibfk_3</code> FOREIGN KEY (<code>uom_id</code>) REFERENCES <code>tbl_uom</code> (<code>uom_id</code>),\n  ADD CONSTRAINT <code>tbl_product_ibfk_4</code> FOREIGN KEY (<code>size_id</code>) REFERENCES <code>tbl_size</code> (<code>size_id</code>),\n  ADD CONSTRAINT <code>tbl_product_ibfk_5</code> FOREIGN KEY (<code>dept_id</code>) REFERENCES <code>tbl_dept</code> (<code>dept_id</code>),\n  ADD CONSTRAINT <code>tbl_product_ibfk_6</code> FOREIGN KEY (<code>cat_id</code>) REFERENCES <code>tbl_category</code> (<code>cat_id</code>),\n  ADD CONSTRAINT <code>tbl_product_ibfk_7</code> FOREIGN KEY (<code>brand_id</code>) REFERENCES <code>tbl_brand</code> (<code>brand_id</code>);\nSET FOREIGN_KEY_CHECKS=1;</p>\n"},{"tags":["php","mysql","orm","fuelphp"],"answer_count":3,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":156,"score":7,"question_id":12096268,"title":"FuelPHP update of ORM results in &quot; instead of \" sporadically","body":"<p>I'm using PHP 5.4.4 and I'm getting very strange behavior with the FuelPHP ORM save and update functions.</p>\n\n<p>I'm trying to save either serialized or JSON data to a field in the database so something like <code>{\"name\":\"michael\"}</code>. When I use the <code>model-&gt;save()</code> directly after <code>Model::forge()</code> it seems to work fine 100% of the time and the string you see is the one that gets stored in the MySQL db.</p>\n\n<p>However, if I immediately change something like model->property = 'new property' (not the JSON or serialized data property) and then do another <code>model-&gt;save()</code> it will 90% of the time turn all my <code>\"</code> into <code>&amp;quot</code>;</p>\n\n<p>It seems that when I debug the issue and step through line by line, it will not reproduce this problem! It will make through the entire script and still have the correct <code>\"</code> instead of <code>&amp;quot</code>;</p>\n\n<p>This problem is driving me nuts. I would assume its a configuration thing or there would be a lot more complaints, but I can't find the right switch. I've set both \n<code>php_flag magic_quotes_gpc Off</code> and <code>php_flag magic_quotes_runtime Off</code> in my .htaccess (although it shouldn't be needed in PHP 5.4+) and verified that both are false.</p>\n\n<p>I'm out of ideas here. Anything to investigate would be really helpful.</p>\n"},{"tags":["mysql","sql","query"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13254109,"title":"How to determine the place of a row in ordered SQL table?","body":"<p>I have a table of users and a 'points' column. I would like to determine the number/place of the row across all the users ordered by 'points'.</p>\n\n<p>I could just get result of all users data and then do while loop, and stop when id equals necessary user. But I believe there is a more efficient way do to that because my table will contain ~100 000 rows.</p>\n"},{"tags":["mysql","pdo","sql-injection"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13254480,"title":"How do I safely let users build WHERE clauses in MySQL and PDO?","body":"<p>What is the best practice a scenario where you have complex, user-specified WHERE clauses and you want to use PDO and MySQL?</p>\n\n<p>My users need to be able to specify one or more selection criteria for one or more columns of the table they're querying. There are way too many possible combinations to anticipate in a case statement at the PHP end. On the other hand, allowing them to type in their criteria directly would defeat the protection parametrized queries are supposed to offer against SQL injection attacks.</p>\n\n<p>I'm trying to do exactly what this guy did:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/5093123/how-can-execute-a-mysql-query-with-multiple-where-clauses\">How can execute a MySQL query with multiple WHERE-clauses?</a></p>\n\n<p>...except I'm trying to be a good little codemonkey and use PDO instead of php_mysql, and to not rely on string-sanitizing unless that really is what people do for such scenarios.</p>\n\n<p>Oh, one more thing:</p>\n\n<p>I guess I can pass each user-supplied criterion as a <code>[column, operator, value]</code> array (e.g. <code>[ \"age\", \"&gt;\", \"30\" ]</code>). I could verify that the first two elements of that array exactly match valid column names and operator names respectively, coerce the last element to a number, and then append them to a string containing the WHERE clause in the PHP script. But what about a criterion like <code>[\"fullname\",\"like\",\"M_rty M%cFly\"]</code>? Now I'm back to sanitizing user-created character strings, aren't I?</p>\n"},{"tags":["php","mysql","arrays"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13254377,"title":"mysql select where in array (php, mysql)","body":"<p>Lets say i have an array in my mysql row:</p>\n\n<pre><code>a:3:{i:1;a:3:{i:0;s:1:\"1\";i:1;s:1:\"3\";i:2;s:1:\"5\";}i:4;a:3:{i:0;s:2:\"21\";i:1;s:2:\"25\";i:2;s:2:\"29\";}i:5;a:1:{i:0;s:2:\"33\";}}\n</code></pre>\n\n<p>It looks like this:</p>\n\n<pre><code>Array\n(\n    [1] =&gt; Array\n        (\n            [0] =&gt; 1\n            [1] =&gt; 3\n            [2] =&gt; 5\n        )\n\n    [4] =&gt; Array\n        (\n            [0] =&gt; 21\n            [1] =&gt; 25\n            [2] =&gt; 29\n        )\n\n    [5] =&gt; Array\n        (\n            [0] =&gt; 33\n        )\n\n)\n</code></pre>\n\n<p>Now, i am passing an array through _GET and i want to print out all rows that contain same values both in my mysql and passed array. For example, if i pass this array:</p>\n\n<pre><code>    Array\n    (\n        [1] =&gt; Array\n            (\n                [0] =&gt; 5\n            )\n)\n</code></pre>\n\n<p>A result should be shown, because my passed array contains option 5. I tried to do it like this:</p>\n\n<pre><code>$pecul = serialize($array);\n$q=mysql_query(\"SELECT id from table WHERE options like '%$pecul%'\")or die(mysql_error());\n</code></pre>\n\n<p>but it only prints out results with identical arrays. </p>\n"},{"tags":["mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13251097,"title":"Find all users at a certain stage in the process","body":"<p>I have a <code>Patient</code> which follows a process defined with multiple <code>Phase</code>s. When a patient is at a phase, there is a <code>Status</code> created, connecting patient and phase at a specific time stamp.</p>\n\n<p>In MySQL my tables look like:</p>\n\n<pre><code>patient:\n  id (int)\n\nphase:\n  id     (int)\n  order: (int)\n  name:  (varchar)\n\nstatus:\n  patient_id: (int, FK)\n  phase_id:   (int, FK)\n  timestamp:  (datetime)\n</code></pre>\n\n<p>Now I have phases A > B > C > D. I want to select all patients who are <strong>now</strong> at phase B or C. Patients only at phase A must be excluded, patients at phase D (so having a status for B and C) must be excluded too.</p>\n\n<p><strong>My trials</strong></p>\n\n<p>So I want a select something like this to start with:</p>\n\n<pre><code>SELECT p.*, s.*, ph.*\nFROM patient p\nLEFT JOIN status s on p.id  = s.patient_id\nLEFT JOIN phase ph on ph.id = s.phase_id\nWHERE s.id IN \n(\n  // sub query\n)\nORDER BY s.timestamp\n</code></pre>\n\n<p>I thought to select all patients with a given status x. The status x is something like this to start with:</p>\n\n<pre><code>SELECT status.*, phase.name\nFROM status\nLEFT JOIN phase ON phase.id=status.phase_id\nWHERE phase.name IN ('B', 'C')\nGROUP BY status.patient_id\n</code></pre>\n\n<p>But I cannot solve the rest: obviously there is no exclusion made for people further in the process. If I add a <code>max(status.timestamp) as max_timestamp</code> in the select, I see the <code>status.timestamp</code> and <code>max_timestamp</code> differ.</p>\n\n<p>In this query I haven't even used the <code>order</code> in the phase table, I simply wanted to order on <code>id</code> first, but since the process might change over time, I thought that would be a bad idea. So that's missing as well.</p>\n\n<p><strong>Question</strong></p>\n\n<p>Perhaps I am completely on the wrong track and I do not need the subquery at all. I think the problem is quite clear: how can I select the patients based on a list of given phases?</p>\n"},{"tags":["mysql","like","clause"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13253980,"title":"Mysql LIKE clause find 1 and not 11","body":"<p>First I want to say, I'm sorry if this question have be asked already (haven't been able to find it then).</p>\n\n<p>My problem is that I've got a <code>LIKE</code> clause in mysql where I have to find some numbers in a comma seperated row.\n(Yes I know comma separated rows aint a good thing to use, but I'm not the one who made the database structure).</p>\n\n<p>So I have the following:</p>\n\n<pre><code>  SELECT pfd.*, pu.username, pu.user_email \n  FROM phpbb_profile_fields_data pfd\n  LEFT JOIN phpbb_users pu ON pfd.user_id=pu.user_id \n  WHERE pfd.pf_pf_produktionsteknik LIKE '%\" . ($id) . \"%' \n      AND pu.user_type!=1 AND pfd.pf_status=2\";\n</code></pre>\n\n<p>But the problem is here that it returns where the <code>LIKE</code> equal <code>1</code> (as it should) but also <code>11</code> (which it should not).</p>\n\n<p>I have tried using <code>field_in_set</code> wich I couldn't get to work, and I'm now lost at what to do about it.</p>\n"},{"tags":["mysql","maven","ubuntu","glassfish-3","ejb-3.1"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13150624,"title":"application cannot start on ubuntu but starts on windows without any trouble","body":"<p>My application loads quite a lot data during start up.\nAfter restart glassfish started issuing the following warning in the log file after about 15 minutes of application initialization process</p>\n\n<pre><code>WARNING|glassfish3.1.2|com.sun.grizzly.config.GrizzlyServiceListener|_ThreadID=27;_ThreadName=Thread-2;|GRIZZLY0023: Interrupting idle Thread: admin-thread-pool-4848(3).|#]\n</code></pre>\n\n<p>after all entire process fails with the errors:</p>\n\n<pre><code>    [#|2012-10-30T16:26:08.404-0400|WARNING|glassfish3.1.2|com.sun.grizzly.config.GrizzlyServiceListener|_ThreadID=27;_ThreadName=Thread-2;|GRIZZLY0023: Interrupting idle Thread: admin-thread-pool-4848(3).|#]\n\n[#|2012-10-30T16:26:08.624-0400|INFO|glassfish3.1.2|javax.enterprise.resource.webcontainer.jsf.config|_ThreadID=61;_ThreadName=Thread-2;|Initializing Mojarra 2.1.12 ( 20120814-1522) for context ''|#]\n\n[#|2012-10-30T16:26:09.126-0400|SEVERE|glassfish3.1.2|javax.faces|_ThreadID=61;_ThreadName=Thread-2;|Application was not properly initialized at startup, could not find Factory: javax.faces.application.ApplicationFactory. Attempting to find backup.|#]\n\n[#|2012-10-30T16:26:09.136-0400|SEVERE|glassfish3.1.2|javax.enterprise.resource.webcontainer.jsf.config|_ThreadID=61;_ThreadName=Thread-2;|Critical error during deployment: \ncom.sun.faces.config.ConfigurationException: Factory 'javax.faces.application.ApplicationFactory' was not configured properly.\n    at com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:305)\n    at com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:219)\n    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:362)\n    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:223)\n    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4750)\n    at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:550)\n    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5366)\n    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)\n    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)\n    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)\n    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)\n    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)\n    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)\n    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)\n    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)\n    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)\n    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)\n    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)\n    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)\n    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)\n    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)\n    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)\n    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)\n    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)\n    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)\n    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)\n    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)\n    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)\n    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)\n    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)\n    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)\n    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)\n    at java.lang.Thread.run(Thread.java:722)\nCaused by: java.lang.IllegalStateException: Could not find backup for factory javax.faces.application.ApplicationFactory. \n    at javax.faces.FactoryFinder$FactoryManager.getFactory(FactoryFinder.java:1011)\n    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:343)\n    at com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:303)\n    ... 45 more\n|#]\n\n[#|2012-10-30T16:26:09.137-0400|SEVERE|glassfish3.1.2|org.apache.catalina.core.StandardContext|_ThreadID=61;_ThreadName=Thread-2;|PWC1306: Startup of context  failed due to previous errors|#]\n\n[#|2012-10-30T16:26:09.139-0400|SEVERE|glassfish3.1.2|org.apache.catalina.core.StandardContext|_ThreadID=61;_ThreadName=Thread-2;|PWC1305: Exception during cleanup after start failed\norg.apache.catalina.LifecycleException: PWC2769: Manager has not yet been started\n    at org.apache.catalina.session.StandardManager.stop(StandardManager.java:873)\n    at org.apache.catalina.core.StandardContext.stop(StandardContext.java:5571)\n    at com.sun.enterprise.web.WebModule.stop(WebModule.java:527)\n    at org.apache.catalina.core.StandardContext.start(StandardContext.java:5384)\n    at com.sun.enterprise.web.WebModule.start(WebModule.java:498)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733)\n    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:2018)\n    at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669)\n    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109)\n    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)\n    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)\n    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)\n    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)\n    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)\n    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)\n    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)\n    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)\n    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)\n    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)\n    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)\n    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)\n    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)\n    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)\n    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)\n    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)\n    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)\n    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)\n    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)\n    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)\n    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)\n    at java.lang.Thread.run(Thread.java:722)\n|#]\n\n.................................................................\n\n[#|2012-10-30T16:26:10.070-0400|INFO|glassfish3.1.2|org.eclipse.persistence.session.file:/home/ayksolutions/glassfish3/glassfish/domains/domain1/applications/ejb-timer-service-app/WEB-INF/classes/___EJB__Timer__App|_ThreadID=61;_ThreadName=Thread-2;|Communication failure detected when attempting to perform read query outside of a transaction. Attempting to retry query. Error was: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException\nInternal Exception: java.sql.SQLNonTransientConnectionException: Connection closed by unknown interrupt.\nError Code: 40000\nCall: SELECT COUNT(\"TIMERID\") FROM \"EJB__TIMER__TBL\" WHERE (\"APPLICATIONID\" = ?)\n    bind =&gt; [1 parameter bound]\nQuery: ReportQuery(name=\"countTimersByApplication\" referenceClass=TimerState sql=\"SELECT COUNT(\"TIMERID\") FROM \"EJB__TIMER__TBL\" WHERE (\"APPLICATIONID\" = ?)\").|#]\n\n[#|2012-10-30T16:26:10.071-0400|INFO|glassfish3.1.2|org.eclipse.persistence.session.file:/home/ayksolutions/glassfish3/glassfish/domains/domain1/applications/ejb-timer-service-app/WEB-INF/classes/___EJB__Timer__App|_ThreadID=61;_ThreadName=Thread-2;|Communication failure detected when attempting to perform read query outside of a transaction. Attempting to retry query. Error was: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException\nInternal Exception: java.sql.SQLNonTransientConnectionException: No current connection.\nError Code: 40000\nCall: SELECT COUNT(\"TIMERID\") FROM \"EJB__TIMER__TBL\" WHERE (\"APPLICATIONID\" = ?)\n    bind =&gt; [1 parameter bound]\nQuery: ReportQuery(name=\"countTimersByApplication\" referenceClass=TimerState sql=\"SELECT COUNT(\"TIMERID\") FROM \"EJB__TIMER__TBL\" WHERE (\"APPLICATIONID\" = ?)\").|#]\n\n[#|2012-10-30T16:26:10.079-0400|WARNING|glassfish3.1.2|org.eclipse.persistence.session.file:/home/ayksolutions/glassfish3/glassfish/domains/domain1/applications/ejb-timer-service-app/WEB-INF/classes/___EJB__Timer__App|_ThreadID=61;_ThreadName=Thread-2;|Local Exception Stack: \nException [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException\nInternal Exception: java.sql.SQLNonTransientConnectionException: No current connection.\nError Code: 40000\nCall: SELECT COUNT(\"TIMERID\") FROM \"EJB__TIMER__TBL\" WHERE (\"APPLICATIONID\" = ?)\n    bind =&gt; [1 parameter bound]\nQuery: ReportQuery(name=\"countTimersByApplication\" referenceClass=TimerState sql=\"SELECT COUNT(\"TIMERID\") FROM \"EJB__TIMER__TBL\" WHERE (\"APPLICATIONID\" = ?)\")\n    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:333)\n    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.processExceptionForCommError(DatabaseAccessor.java:1494)\n    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:636)\n    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:535)\n    at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:1717)\n    at org.eclipse.persistence.sessions.server.ServerSession.executeCall(ServerSession.java:566)\n    at org.eclipse.persistence.sessions.server.ClientSession.executeCall(ClientSession.java:207)\n    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:207)\n    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:193)\n    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeSelectCall(DatasourceCallQueryMechanism.java:264)\n    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.selectAllRows(DatasourceCallQueryMechanism.java:646)\n    at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllRowsFromTable(ExpressionQueryMechanism.java:2611)\n    at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectAllReportQueryRows(ExpressionQueryMechanism.java:2554)\n    at org.eclipse.persistence.queries.ReportQuery.executeDatabaseQuery(ReportQuery.java:846)\n    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:844)\n    at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1040)\n    at org.eclipse.persistence.queries.ReadAllQuery.execute(ReadAllQuery.java:392)\n    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeInUnitOfWork(ObjectLevelReadQuery.java:1128)\n    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2871)\n    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1516)\n    at org.eclipse.persistence.internal.sessions.AbstractSession.retryQuery(AbstractSession.java:1586)\n    at org.eclipse.persistence.sessions.server.ClientSession.retryQuery(ClientSession.java:593)\n    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.retryQuery(UnitOfWorkImpl.java:5464)\n    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1552)\n    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1498)\n    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1463)\n    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.executeReadQuery(EJBQueryImpl.java:485)\n    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getSingleResult(EJBQueryImpl.java:773)\n    at com.sun.ejb.containers.TimerBean.countTimersByApplication(TimerBean.java:215)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:601)\n    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)\n    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)\n    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)\n    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)\n    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)\n    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)\n    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)\n    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)\n    at sun.reflect.GeneratedMethodAccessor85.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:601)\n    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)\n    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)\n    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)\n    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)\n    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)\n    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)\n    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:88)\n    at $Proxy242.countTimersByApplication(Unknown Source)\n    at com.sun.ejb.containers.EJBTimerService._destroyTimers(EJBTimerService.java:840)\n    at com.sun.ejb.containers.EJBTimerService.destroyAllTimers(EJBTimerService.java:834)\n    at org.glassfish.ejb.startup.EjbDeployer.clean(EjbDeployer.java:378)\n    at org.glassfish.internal.data.EngineInfo.clean(EngineInfo.java:129)\n    at org.glassfish.internal.data.EngineRef.clean(EngineRef.java:175)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle$1.actOn(ApplicationLifecycle.java:303)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:465)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)\n    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)\n    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)\n    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)\n    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)\n    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)\n    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)\n    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)\n    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)\n    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)\n    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)\n    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)\n    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)\n    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)\n    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)\n    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)\n    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)\n    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)\n    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)\n    at java.lang.Thread.run(Thread.java:722)\nCaused by: java.sql.SQLNonTransientConnectionException: No current connection.\n    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)\n    at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)\n    at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)\n    at org.apache.derby.impl.jdbc.Util.noCurrentConnection(Unknown Source)\n    at org.apache.derby.impl.jdbc.EmbedConnection.checkIfClosed(Unknown Source)\n    at org.apache.derby.impl.jdbc.EmbedConnection.setupContextStack(Unknown Source)\n    at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)\n    at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)\n    at org.apache.derby.iapi.jdbc.BrokeredConnection.prepareStatement(Unknown Source)\n    at com.sun.gjc.spi.base.ConnectionHolder.prepareStatement(ConnectionHolder.java:562)\n    at com.sun.gjc.spi.jdbc40.ConnectionWrapper40.prepareCachedStatement(ConnectionWrapper40.java:255)\n    at com.sun.gjc.spi.jdbc40.ConnectionWrapper40.prepareCachedStatement(ConnectionWrapper40.java:52)\n    at com.sun.gjc.spi.ManagedConnection.prepareCachedStatement(ManagedConnection.java:993)\n    at com.sun.gjc.spi.jdbc40.ConnectionWrapper40.prepareStatement(ConnectionWrapper40.java:173)\n    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.prepareStatement(DatabaseAccessor.java:1474)\n    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.prepareStatement(DatabaseAccessor.java:1423)\n    at org.eclipse.persistence.internal.databaseaccess.DatabaseCall.prepareStatement(DatabaseCall.java:697)\n    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:585)\n    ... 84 more\nCaused by: java.sql.SQLException: No current connection.\n    at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)\n    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)\n    ... 102 more\n|#]\n\n[#|2012-10-30T16:26:10.082-0400|WARNING|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=61;_ThreadName=Thread-2;|EJB5184:A system exception occurred during an invocation on EJB TimerBean, method: public int com.sun.ejb.containers.TimerBean.countTimersByApplication(long)|#]\n.............\n</code></pre>\n\n<p>The error appears on both my *nix based machines however the same application version can normally start with the same data in the DB on my windows based developer machine. It also has no troubles on *.nix based machine if the DB contains less data.</p>\n\n<p>The application is built with maven. It has several modules including three web applications and EJB/JPA module that uses mysql RDBMS.</p>\n\n<p>server environment (Application fails to start)</p>\n\n<pre><code>OS: ubuntu 11.10 x64\nAS: glassfish 3.2.1\njava: 1.7.0_09-b05(initially it was 1.7.0_03, i've upgrade it with no effect)\n</code></pre>\n\n<p>windows based developer machine (Application can start without troubles)</p>\n\n<pre><code>OS: win7 x64\nAS: glassfish 3.2.1\njava: 1.7.0_07-b10\n</code></pre>\n\n<p>I have another server with ubuntu x32. With almost the same environment. The application has the same problem as on the described Ubuntu based machine.\nI use the same Glassfish version and the same script to configure it on all hosts.</p>\n\n<p>Any ideas what could be a reason. Thanks.</p>\n\n<p>PS. I'm going to try a newer version of GF to see if it solves the problem.\nGlassfish upgrade to version 3.1.2.2 did not help</p>\n"},{"tags":["php","mysql","date","time"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":46,"score":-2,"question_id":13254037,"title":"Calculate difference beween two dates in hours and minutes","body":"<p>I use this code to calculate difference between two dates in hours and minutes :</p>\n\n<pre><code>$all = round(($date1timestamp - $date2timestamp) / 60);\n$d = floor ($all / 1440);\n$h = floor (($all - $d * 1440) / 60);\n$m = $all - ($d * 1440) - ($h * 60);\n</code></pre>\n\n<p>Works perfectly but when I must multiple times to calculate difference between dates I must write code again and change values is there any simple way to calculate multiple times without rewrite code again ??</p>\n"},{"tags":["mysql","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":23,"score":-1,"question_id":13253058,"title":"Bash Scripting for getting files from s3","body":"<p>Can you please help me or give me a sample bash script for getting / download a file from s3 ( .sql file ) then restore it to specific tables. </p>\n\n<p>Note :</p>\n\n<p>Also the acl is not in public please include also how can i set it on public at bash.</p>\n\n<p>Thanks in Advance!</p>\n"},{"tags":["mysql","database-design","innodb","database-schema","amazon-rds"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12728340,"title":"Restructure huge unnormalized mysql database part 2","body":"<p>I have a unnormalized database with ~400 million rows, I have moved all repeating data into a new normalized database so I can represent it with id's.</p>\n\n<p>Now I need to move all the data entrys and transform it to a entry containing id's.</p>\n\n<p>The problem is that with 400m row it will take a while.. and i need help to optimize.</p>\n\n<p>This query takes 0.4 sec per row, so it would take a few months:</p>\n\n<pre><code>INSERT IGNORE INTO normalized.entry (insDate, `date`, project, keyword, url, position, competition, serachEngine)\nSELECT \nCURDATE() as insDate\n, d.id as dateId\n, p.id as projectId\n, k.id as keywordId\n, z.id AS urlId \n, old.position\n, old.competition\n, s.id as searchEngineId\n\nFROM unnormalized.bigtable old\nINNER JOIN normalized.`date` d  ON old.insDate = d.`date`\nINNER JOIN normalized.project p ON old.awrProject = p.project\nINNER JOIN normalized.searchEngine s ON old.searchEngine = s.searchEngine\nINNER JOIN normalized.keyword k ON old.keyword = k.keyword\nINNER JOIN normalized.urlHash z ON old.url = z.url\nWHERE old.id &gt;= \".$start.\" AND old.id &lt;= \".$stop.\"\";\n</code></pre>\n\n<p>If I use more php and divide it into two querys do it this way it takes only 0.07sec per entry but still that's also takes months: </p>\n\n<pre><code>$q = \"SELECT tmp.id\n              , d.id as dateId\n              , p.id as projectId\n              , k.id as keywordId\n              , tmp.position\n              , tmp.competition\n              , s.id as searchEngineId\n              , tmp.url\n              , z.id AS urlId \n               FROM unnormalized.bigtable tmp\n        INNER JOIN normalized.`date` d ON tmp.insDate = d.`date`\n        INNER JOIN normalized.project p ON tmp.awrProject = p.project\n        INNER JOIN normalized.searchEngine s ON tmp.searchEngine = s.searchEngine\n        INNER JOIN normalized.keyword k ON tmp.keyword = k.keyword\n        INNER JOIN normalized.urlHash z ON tmp.url = z.url\n        WHERE tmp.id &gt; \".$start.\" AND tmp.id &lt; \".$stop.\"\";\n        // echo $q;\n            $result = mysql_query($q, $local);\n            if (mysql_num_rows($result) &gt; 0) {\n            while ($row = mysql_fetch_array($result)) {\n            $q = \"SELECT id FROM normalized.url WHERE url = '\".$row[\"url\"].\"'\";\n            $resultUrl = mysql_query($q, $local);\n            $rowUrl = mysql_fetch_array($resultUrl);\n\n            $q = \"INSERT IGNORE normalized.entry (insDate, `date`, project, keyword, url, position, competition, serachEngine) VALUES (NOW(), '\".$row[\"dateId\"].\"', '\".$row[\"projectId\"].\"', '\".$row[\"keywordId\"].\"', '\".$rowUrl[\"id\"].\"', '\".$row[\"position\"].\"', '\".$row[\"competition\"].\"', '\".$row[\"searchEngineId\"].\"')\";\n</code></pre>\n\n<p>I don't know how I am gonna port this data without it taking half a year!\n/All help it needed</p>\n\n<p>spec: Am using  InnoDB on a RDS amazon server.</p>\n\n<p>edit: EXPLAIN SELECT of the first query:</p>\n\n<p>id,select_type,table,type,possible_keys,key,key_len,ref,rows,Extra\n1,SIMPLE,p,index,NULL,projectName,42,NULL,1346,\"Using index\"\n1,SIMPLE,s,index,NULL,searchEngine,42,NULL,2336,\"Using index; Using join buffer\"\n1,SIMPLE,k,index,NULL,keyword,42,NULL,128567,\"Using index; Using join buffer\"\n1,SIMPLE,tmp,ref,\"keyword_url_insDate,keyword,searchEngine,url,awrProject\",keyword_url_insDate,767,func,115,\"Using where\"\n1,SIMPLE,d,eq_ref,date,date,3,intradb.tmp.insDate,1,\"Using where; Using index\"\n1,SIMPLE,z,ref,url,url,767,bbointradb.tmp.url,1,\"Using index\"</p>\n\n<p>SHOW CREATE TABLE:</p>\n\n<p>'rankingUrls201001', 'CREATE TABLE <code>rankingUrls201001</code> (\n  <code>id</code> int(11) NOT NULL AUTO_INCREMENT,\n  <code>insDate</code> datetime NOT NULL,\n  <code>keyword</code> varchar(255) COLLATE utf8_swedish_ci NOT NULL,\n  <code>searchEngine</code> varchar(25) COLLATE utf8_swedish_ci NOT NULL,\n  <code>url</code> varchar(255) COLLATE utf8_swedish_ci NOT NULL,\n  <code>position</code> int(11) NOT NULL,\n  <code>competition</code> varchar(20) COLLATE utf8_swedish_ci NOT NULL,\n  <code>awrProject</code> varchar(200) COLLATE utf8_swedish_ci NOT NULL,\n  <code>server</code> varchar(20) COLLATE utf8_swedish_ci NOT NULL,\n  <code>rank</code> varchar(40) COLLATE utf8_swedish_ci NOT NULL,\n  PRIMARY KEY (<code>id</code>),\n  KEY <code>keyword_url_insDate</code> (<code>keyword</code>,<code>url</code>,<code>insDate</code>),\n  KEY <code>keyword</code> (<code>keyword</code>),\n  KEY <code>searchEngine</code> (<code>searchEngine</code>),\n  KEY <code>url</code> (<code>url</code>),\n  KEY <code>awrProject</code> (<code>awrProject</code>)\n) ENGINE=InnoDB AUTO_INCREMENT=2266575 DEFAULT CHARSET=utf8 COLLATE=utf8_swedish_ci'</p>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13252936,"title":"group exact Tandem values from 2 column?","body":"<p>I have a table with 2 column latitude and longitude and want to GROUP exact match <em>(just)</em> <strong>tandem</strong> values on 2 columns.<br>\n<strong><em>Table Rows:</em></strong></p>\n\n<pre><code>/* Points Table */\ntime    |lat    |long\n113     |2.1    |5.8\n114     |2.1    |5.6    -Set as Group\n115     |2.1    |5.6    -Set as Group\n116     |2.1    |5.6    -Set as Group\n117     |2.1    |5.6    -Set as Group\n118     |2.3    |5.2\n119     |2.4    |5.3\n120     |2.5    |5.3    -Set as Group\n121     |2.5    |5.3    -Set as Group\n122     |2.6    |5.3\n123     |2.1    |5.6    -Set as Group\n201     |2.1    |5.6    -Set as Group\n202     |2.1    |5.6    -Set as Group\n203     |2.5    |5.3\n</code></pre>\n\n<p><em><strong>Result must be:</em></strong></p>\n\n<pre><code>/* Points Table */\ntime    |lat    |long\n113     |2.1    |5.8\n114     |2.1    |5.6    -Grouped as 1 with first tandem time\n118     |2.3    |5.2\n119     |2.4    |5.3\n120     |2.5    |5.3    -Grouped as 1 with first tandem time\n122     |2.6    |5.3\n123     |2.1    |5.6    -Grouped as 1 with first tandem time\n203     |2.5    |5.3\n</code></pre>\n\n<p>I want to group just Tandem values , in above we have two time tandem of <code>2.1 &amp; 5.6</code> values and group is splited. ( for testing can work on <a href=\"http://sqlfiddle.com/#!2/5d196\" rel=\"nofollow\">http://sqlfiddle.com/#!2/5d196</a> ). ;)</p>\n"},{"tags":["mysql","database","database-design"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13242531,"title":"Recommended Database Structure for User's Information","body":"<p>I am trying to figure out how I should go about building my database structure (tables) for user information on my website. The kinds of information that I will be storing (at this time anyways) are:</p>\n\n<ul>\n<li>About Me</li>\n<li>Birthday (January, 1, 1970)</li>\n<li>Sex (Male/Female)</li>\n<li>Interested In: (Male, Female, Both)</li>\n<li>Relationship Status: (Single, In a Relationship, Engaged, Married)</li>\n<li>Website: (mywebsite.com)</li>\n<li>From: (Cupertino, California)</li>\n</ul>\n\n<p>So this is the type of information I will be storing for now. My question basically is, should I have this be one table only? Or would it be better to split the information up depending on what it was (my users have a unique ID which would go along with each table of information, obviously). So I'm not sure if I should have a table exclusively for Birthdays with the columns: userID, Month, Day, Year; or what.</p>\n"},{"tags":["php","html","mysql","table","spry"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13220897,"title":"display two tables from mysql using php and spry or something similar","body":"<p>I'm trying to display data from two different tables in mysql using php and something like spry.. Originally, I wanted to used spry tabbed panels, but i'm not sure if that's possible. I would want the tab name to be populated from one table and the contents of that tab to be populated from another table. Here's the basic html...</p>\n\n<pre><code>&lt;div id=\"TabbedPanels1\" class=\"TabbedPanels\"&gt;\n  &lt;ul class=\"TabbedPanelsTabGroup\"&gt;\n    &lt;li class=\"TabbedPanelsTab\" tabindex=\"0\"&gt;NAME_1 POPULATED FROM FIRST TABLE&lt;/li&gt;\n    &lt;li class=\"TabbedPanelsTab\" tabindex=\"0\"&gt;NAME_2 POPULATED FROM FIRST TABLE&lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;div class=\"TabbedPanelsContentGroup\"&gt;\n    &lt;div class=\"TabbedPanelsContent\"&gt;\n    &lt;table border=\"0\" cellspacing=\"5\" cellpadding=\"5\"&gt;\n        &lt;tr&gt;\n&lt;!-- CONTENT POPULATED FROM SECOND TABLE!--&gt;\n          &lt;td width=\"450\"&gt;&amp;nbsp;&lt;/td&gt;\n          &lt;td width=\"50\"&gt;&amp;nbsp;&lt;/td&gt;\n          &lt;td width=\"50\"&gt;&amp;nbsp;&lt;/td&gt;\n          &lt;td width=\"50\"&gt;&amp;nbsp;&lt;/td&gt;\n          &lt;td width=\"50\"&gt;&amp;nbsp;&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;/table&gt;&lt;/div&gt;\n   &lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The problem I think I'll have is that I won't be able to connect the tabs with the content. Since the tabs are listed first in the html... then the content. I don't know if this is possible or if there is a better way. Thanks in advance for all of you help</p>\n"},{"tags":["mysql","postgresql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13253392,"title":"Postgresql: how to change the table definition","body":"<p>The problem: I'm searching for an alternative solution to change column definition in <code>postgresql</code>. </p>\n\n<p>I would like to do something that is similar to the mysql solution:</p>\n\n<pre><code>ALTER TABLE table_name \nCHANGE [COLUMN] old_col_name new_col_name column_definition \n</code></pre>\n\n<p>Is there a way to use <em>CHANGE COLUMN</em> similar to what I've described previously? Is there any way to easily change the column definition in postgres?</p>\n\n<p>I'd like to use a similar method to my example because I'm building the alter query from code.</p>\n"},{"tags":["php","mysql","installscript"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13250737,"title":"Set MySQL config data on install PHP","body":"<p>I've made an install script for mysql tables. I want the user to set the database configurations. The configurations for mysql is hard coded in a PHP class as public variables.</p>\n\n<p>What would be best practice for creating and storing the config data on install?</p>\n"},{"tags":["php","mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13253982,"title":"Private messages database query for display","body":"<p>ok I have messages table in db like this:</p>\n\n<pre><code>id\nthread_id\nfrom_user\nto_user\nmessage\n</code></pre>\n\n<p>the problem I have is display of these messages on site. As would be normal with private messages, only receiver and sender can see the message. And there is one more thing that matters, messages are thread related, so when sender contacts the user who created a thread ( user can send messages only to thread creators, every user who would be contacted MUST have a thread he created) this conversation is related to this thread only. So, check now what I tried:</p>\n\n<pre><code>SELECT * \nFROM messages \nWHERE thread_id = '$thread_id' \n    AND (from_user = '$from' OR from_user ='$to' ) \n    AND ( to_user = '$to' OR to_user = '$from' )\n</code></pre>\n\n<p>This works in majority of cases, but what I was wondering is if this is classic query which is used to limit only to users to view the message?</p>\n\n<pre><code>$thread_id is ID of the thread passed to query\n$from is $_SESSION['id'] \n$to is ID of thread owner ( user who receives the message )\n</code></pre>\n\n<p>I tested this with few users but something is not right. Sometimes I get only 1 message that one sent, but don't see the reply</p>\n"},{"tags":["php","mysql","codeigniter","connection","mysqli"],"answer_count":5,"favorite_count":3,"up_vote_count":2,"down_vote_count":0,"view_count":14751,"score":2,"question_id":7254049,"title":"CodeIgniter: Unable to connect to your database server using the provided settings Error Message","body":"<p>I have been using CI just fine using the MySQL driver. I want to use the mysqli driver instead, but as soon as I change it (just add the ‘i’ at the end of mysql, and added the port number) I get the following error message</p>\n\n<pre><code>A Database Error Occurred\n\nUnable to connect to your database server using the provided settings.\n\nFilename: core/Loader.php\n\nLine Number: 232 \n</code></pre>\n\n<p>my setting look like this:</p>\n\n<pre><code>$db['default']['hostname'] = $hostname;\n$db['default']['username'] = $username;\n$db['default']['password'] = $password;\n$db['default']['database'] = $database;\n$db['default']['dbdriver'] = 'mysqli';\n$db['default']['port']     = \"3306\";  \n$db['default']['dbprefix'] = '';\n$db['default']['pconnect'] = TRUE;\n$db['default']['db_debug'] = TRUE;\n$db['default']['cache_on'] = FALSE;\n$db['default']['cachedir'] = '';\n$db['default']['char_set'] = 'utf8';\n$db['default']['dbcollat'] = 'utf8_general_ci';\n$db['default']['swap_pre'] = '';\n$db['default']['autoinit'] = TRUE;\n$db['default']['stricton'] = FALSE; \n\nwhere\n$hostname = 'localhost';\n$username = 'myusernamegoeshere';\n$password = 'mypasswordgoeshere';\n$database = 'mydatabasenamegoeshere'; \n</code></pre>\n\n<p>Using:\nCI 2.0.2\nphp 5.3.4\nApache/2.2.17 (Unix)\nmysql 5.5.13\nmysql.default_port 3306</p>\n\n<p>Am I doing anything wrong?</p>\n\n<p>Thank you,</p>\n"},{"tags":["php","mysql","query","where"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13242955,"title":"php mysql query error with \"where\"","body":"<p>I'm running a query on our customer order database to see the sales from the last week. The query looks like this:</p>\n\n<pre><code>select\ndistinct day(from_unixtime(customerorder.datetime)) as day,\ncount(distinct customerorder.customerorderid) as count_totalorders,\ncount(distinct customerorderpos.itemid) as count_differentitems,\nsum(customerorderpos.quantity_ordered) as quantity_ordered,\nsum(customerorderpos.itemsubtotal) as item_subtotal,\nsum(customerorderpos.pricechangetotal) as item_pricechangetotal,\nsum(customerorderpos.itemtotal) as item_total,\nsum(customerorderpos.purchase_price * customerorderpos.quantity_ordered) as item_purchasepricetotal,\nsum(distinct cart_discounttotal) as total_discount,\nsum(customerorderpos.itemtotal - (customerorderpos.purchase_price * customerorderpos.quantity_ordered) - (select distinct cart_discounttotal)) as item_earningstotal,\nsum(distinct cart_total_shipping) as total_shipping,\nsum(distinct cart_total_tax) as total_tax,\nsum(distinct cart_total_complete) as total_complete\nfrom customerorder\ninner join customerorderpos on customerorder.customerorderid = customerorderpos.customerorderid\nwhere\ncustomerorder.datetime &gt;= 1351494000 and\ncustomerorder.status_cancelled = \"0\"\ngroup by day(from_unixtime(customerorder.datetime))\norder by customerorder.datetime\n</code></pre>\n\n<p>When I enter the query in PhpMyAdmin in works fine and shows the last 7 days orders. But when we run it in our own software it gives an error.</p>\n\n<pre><code>$result = $db-&gt;query($query);\nwhile ($row = $result-&gt;fetch_assoc()){\n</code></pre>\n\n<p>This shows: \"Fatal error: Call to a member function fetch_assoc() on a non-object\"</p>\n\n<p>But.... if I take out \"where customerorder.datetime >= 1351494000\" from the query it works fine.\nIn other words the query works perfectly until I want to limit it to a specific time. Customerorder.datetime is an int(11) column with a timestamp.</p>\n\n<p>Any ideas what the problem could be?</p>\n\n<p>Thanks for your help!</p>\n"},{"tags":["mysql","ruby-on-rails","rspec","case-sensitive"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13203169,"title":"Case sensitivity in rspec mysql vs rails controller","body":"<p>I have a test for an index that filters on last name, the test is passing:</p>\n\n<pre><code>it \"finds transactions with a given customer last_name\" do\n  customer = create :customer, last_name: \"Merp\"\n  t2 = create :transaction, location_id: @location.id\n  t1 = create :transaction, location_id: @location.id, customer_id: customer.id\n  get :index, last_name: \"merp\"\n  assigns(:transactions).should eq [t1]\nend\n</code></pre>\n\n<p>Here is the important part of the controller for this question:     </p>\n\n<pre><code># =&gt; @filter = {:customers=&gt;{:last_name=&gt;\"merp\"}}\n# =&gt; @joins = [:customer]\n@transactions = Transaction\n  .joins(@joins)\n  .where(@filter)\n</code></pre>\n\n<p>But when I do the test manually in a development environment, it only returns for case sensitive matches (notice the test is not a case match).</p>\n\n<p>Why am I getting a passing test using non-case-sensitive searching while having the action fail on non-case-sensitive searches when I actually use the page?</p>\n"},{"tags":["php","mysql","json","nested","logic"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13253218,"title":"php organizing result set logic to nested JSON","body":"<p>I have a data base full of model numbers with varying length characters all delimited by periods.</p>\n\n<pre><code>Model number families:\nxxxx.xx.xxxx\nxxxx.xx.kjfd\nxxxx.kj.jkfdk\nyy.yy.a\nyy.yy.b\n</code></pre>\n\n<p>and so on.</p>\n\n<p>I'm trying to organize them into JSON resembling this with proper syntax of course.\nModel number families:</p>\n\n<pre><code>{\n    \"name\": \"xxxx\",\n    \"children\": [\n        {\n            \"name\": \"xx\",\n            \"children\": [\n                {\n                    \"name\": \"xxxx\"\n                },\n                {\n                    \"name\": \"kjfd\"\n                }\n            ]\n        },\n        {\n            \"name\": \"kj\",\n            \"children\": [\n                {\n                    \"name\": \"jkfdk\"\n                }\n            ]\n        }\n    ]\n</code></pre>\n\n<p>I have started by doing a preg_split on the model number to break the model no. down into it's components.  Then I have tried to compare the first characters before the period to the previous one and my brain freezes up and I think, \"there has to be a better way to organize these.\"</p>\n\n<p>Would it be better to store them in the DB already separated?</p>\n\n<p>Thanks for any suggestions.</p>\n\n<p>There is only one place to go, stackoverflow.</p>\n"},{"tags":["mysql","database"],"answer_count":6,"favorite_count":1,"up_vote_count":6,"down_vote_count":1,"view_count":4003,"score":5,"question_id":6924823,"title":"How to recover just deleted rows in mysql?","body":"<p>Is it possible to restore table to last time with data if all data was deleted accidentally.</p>\n"},{"tags":["mysql","sql","database","database-design"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13250277,"title":"Designing the database layout for a webshop plugin","body":"<p>I'm working on a webshop plugin for a small Content Management System.</p>\n\n<p>The idea is that a <strong>product</strong> is within a certain <strong>category</strong> (for instance T-shirts). The category determines which <strong>attributes</strong> (for instance Color and Size in case of the T-shirt, or capacity in case of an MP3 player) can apply to the product. Based on those attributes, a product can have multiple <strong>variants</strong>.</p>\n\n<p>In case of the t-shirt, those variants could be:</p>\n\n<ul>\n<li>Small Black</li>\n<li>Medium Black</li>\n<li>Large Black</li>\n<li>Small White</li>\n<li>Medium White</li>\n<li>Large White</li>\n</ul>\n\n<p>This is what I currently have:</p>\n\n<p><img src=\"http://i.stack.imgur.com/FNTlq.png\" alt=\"current database layout\"></p>\n\n<p>Does this make sense? Or can I improve this design?</p>\n\n<p>Second question is, I want to display a list of attributes to provide a way of filtering products. For instance, for attribute Color one should be able to click 'Black', which displays a list of products that</p>\n\n<ul>\n<li>have a row in product_attribute with value 'Black', or</li>\n<li>have a variant with a row in product_variant_attribute with value 'Black'</li>\n</ul>\n\n<p>Would that be possible, and how?</p>\n\n<p>Currently I have the following SQL:</p>\n\n<pre><code>SELECT\n    variant_attr.*,\n    COUNT(DISTINCT prod.id) AS prod_count\nFROM catalog_product_variant_attribute AS variant_attr\nINNER JOIN catalog_product_variant AS variant ON variant.id = variant_attr.variant_id\nINNER JOIN  catalog_product AS prod ON prod.id = variant.product_id\nWHERE variant_attr.attribute_id = 1 AND prod.category_id IN (4,6,7,5,2)\nGROUP BY variant_attr.value ASC\n</code></pre>\n\n<p>1 is the attribute's <code>id</code> and (4,6,7,5,2) are the id's of the current category and all it's children (because if category T-shirts has a parent category Clothing, I want to display all the t-shirts in Clothing as well)</p>\n"},{"tags":["java","mysql","spring","jdbc","timestamp"],"answer_count":5,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":182,"score":2,"question_id":13109982,"title":"Return Timestamp With Prepared Statement","body":"<p>I have an auto generated timestamp that is created each time a record is inserted or updated in a mysql table. Is there a way to return this timestamp in a way similar to how I would use a keyholder to return a newly created id?</p>\n\n<pre><code>KeyHolder keyHolder = new GeneratedKeyHolder();\nJdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);\n\n//Insert Contact\njdbcTemplate.update(new PreparedStatementCreator() {\n    @Override\n    public PreparedStatement createPreparedStatement(Connection connection) throws SQLException {\n        PreparedStatement preparedStatement = connection.prepareStatement(SQL_ADD, Statement.RETURN_GENERATED_KEYS);\n        preparedStatement.setString(1, contact.getFirstName());\n        preparedStatement.setString(2, contact.getLastName());\n        preparedStatement.setInt(3, contact.getOrganizationId());\n        preparedStatement.setString(4, contact.getType());\n        preparedStatement.setInt(5, contact.getUserId());\n        return preparedStatement;\n        }   \n}, keyHolder);\n//Use keyholder to obtain newly created id\ncontact.setId(keyHolder.getKey().intValue());\n</code></pre>\n\n<p>Is there some way to also return the new timestamp without having to requery the table? I have been looking for ways to return it along with the id as a key in the keyholder, but it doesn't seem to be returned as a key?</p>\n"},{"tags":["mysql","sql"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":80,"score":1,"question_id":13250635,"title":"how i can get these with mysql?","body":"<p>I am new to mysql.</p>\n\n<p>I have on survey with clicks, period(date). Now i have to find out number of clicks per month, like:</p>\n\n<pre><code>MON  CLICKS\nnov  0 \noct  34 \nsep  67 \naug  89\n</code></pre>\n\n<p>I have used code like this:</p>\n\n<pre><code>select MONTHNAME(period) mon,  IFNULL(count(id),0) as Clicks\nfrom survey\nwhere period &gt; DATE_SUB(now(), INTERVAL 3 MONTH)\ngroup by EXTRACT(MONTH FROM period)\n</code></pre>\n\n<p>It is not working for with no records.</p>\n\n<p>Here one thing I suppose there is no record in that month it should show 0: if there is no record in <code>nov</code> the number of clicks should be <code>0</code>.</p>\n\n<pre><code>my table structure was like this \nCREATE TABLE `survey` (\n  `id` int(2) NOT NULL auto_increment,\n   `period` datetime default NULL)\n</code></pre>\n\n<p>for last four weeks i have used </p>\n\n<pre><code> SELECT uq.timespan, COALESCE(tsq.TotalClicks, 0) as Clicks FROM (\nSELECT '22-28 days' as timespan\nunion SELECT '15-21 days'\nunion SELECT '8-14 days'\nunion SELECT 'up to 7 days'\n\n)uq LEFT JOIN (\nSELECT CASE \n    WHEN submitdate &gt;= NOW() - INTERVAL 4 WEEK\n                AND submitdate &lt; NOW() - INTERVAL 3 WEEK THEN '22-28 days'\n    WHEN submitdate &gt;= NOW() - INTERVAL 3 WEEK\n           AND submitdate &lt; NOW() - INTERVAL 2 WEEK THEN '15-21 days'\nWHEN submitdate &gt;= NOW() - INTERVAL 2 WEEK\n    AND submitdate &lt; NOW() - INTERVAL 1 WEEK THEN '8-14 days'\nWHEN submitdate &gt;= NOW() - INTERVAL 1 WEEK THEN 'up to 7 days'\n       END Weeksubmitdate, \n           count(id) TotalClicks\nFROM  survey \nWHERE submitdate &gt;= NOW() - INTERVAL 4 WEEK\nGROUP BY Weeksubmitdate\n)tsq ON uq.timespan = tsq.Weeksubmitdate\n</code></pre>\n\n<p>Any help?</p>\n"},{"tags":["php","mysql","arrays","prepared-statement","in-operator"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13244361,"title":"mysqli_stmt, arrays, & IN operator","body":"<p>I've looked all over, but I can't find any details on whether or not it's possible to easily and conveniently pass an array directly into the argument of the IN operator in a MySQL prepared statement.</p>\n\n<p>Most places suggest manually breaking up the array and building the statement, but there's got to be a better way.</p>\n\n<p>Is there?</p>\n\n<p>Many thanks in advance!</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Sorry, left out that this is for a prepared statement via mysqli_stmt not the traditional way.  :(</p>\n"},{"tags":["mysql","sql","inner-join"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13253050,"title":"MySQL select row from two tables even though only one table may have the row","body":"<p>I have two tables, <code>posts</code> and <code>pages</code>. The <code>posts</code> table has more columns than the <code>pages</code> table, but other than that they are the same in terms of schema. </p>\n\n<p>If a <code>slug</code> is given, the row with the right <code>slug</code> could exist in the <code>pages</code> table, or the <code>posts</code> table. I was thinking of something like</p>\n\n<pre><code>SELECT * \nFROM pages \nWHERE slug = 'about'\n\nUNION \n\nSELECT * \nFROM posts \nWHERE slug = 'about'\n</code></pre>\n\n<p>but that requires the row with the <code>slug</code> of \"about\" to be in both tables. There's probably a simple <code>INNER JOIN</code> I could use, but my SQL knowledge is limited.</p>\n\n<p>To clarify, I want to be able to search across both tables as if they were one.</p>\n\n<p>Here is the <code>posts</code> table structure:</p>\n\n<pre><code>`slug` varchar(128) NOT NULL,\n`id` varchar(100) NOT NULL,\n`title` text NOT NULL,\n`published` bigint(20) NOT NULL,\n`content` longtext NOT NULL,\n`author` text NOT NULL,\n`status` enum('published','draft','trashed') NOT NULL\n</code></pre>\n\n<p>and the <code>pages</code> structure:</p>\n\n<pre><code>`slug` varchar(128) NOT NULL,\n`id` varchar(100) NOT NULL,\n`title` text NOT NULL,\n`content` longtext NOT NULL,\n`menu_order` int(11) DEFAULT NULL,\n`status` enum('published','drafted','trashed') NOT NULL\n</code></pre>\n"},{"tags":["php","mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":8,"view_count":51,"score":-8,"question_id":13253231,"title":"Show messages asynchonously","body":"<p>My problem begins with loading a page .I have to load a page in three steps.</p>\n\n<p>Three status messages come from three different databases, telling you that your data is updated.</p>\n\n<p>These messages come together but I want them in sequences. How can I get them in sequence? (The databases take so much time due to its size.)</p>\n"},{"tags":["php","mysql","insert"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13253066,"title":"How to Unquote a string and insert it into mysql database","body":"<p>i am having one problem with data insertion.\ni have a column which contains quoted strings and using php i am inserting those values into another table.the problem occurs with quoted values and others are inserting fine.\nis there any way to unquote that and insert or make it possible using php.\nthanks in advance...</p>\n"},{"tags":["mysql","full-text-search"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13253154,"title":"Not able to add custom stopwords in MySQL Full Text Search","body":"<p>I am using MySQL version 14.14 Distrib 5.1.49, for debian-linux-gnu. </p>\n\n<p>Based on the MySQL documentation I tried following to add few stop words for MySQL -</p>\n\n<p>Created File: /etc/mysql/stopword.txt\nCopied the default keywords of MySQL followed by my custom keywords. All the keywords are tab separated and there is a line break after 4 words.</p>\n\n<p>Added following in /etc/mysql/my.cnf : </p>\n\n<pre><code>[mysqld]\nft_stopword_file=/etc/mysql/stopword.txt\n</code></pre>\n\n<p>Restarted MySQL by sudo /etc/init.d/mysql restart</p>\n\n<p>Then I recreated index using : REPAIR TABLE table_name QUICK;</p>\n\n<p>But I am still able to find the results for following query ( where 'CDO' is in Stop Word list)</p>\n\n<pre><code>select * from deal where match(deal_name) against('CDO');\n</code></pre>\n\n<p>Since 'CDO' is in stop word list I am not expecting any result.I am not sure why is this happening ?</p>\n"},{"tags":["c#","mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":65,"score":2,"question_id":13252947,"title":"Select in Table with 277,994,752 records does not work","body":"<p>I have programmed a simple C# program which creates random string and calculates the MD5, SHA-1, SHA-256, SHA-384 and the SHA-512 Hash. It stores it in my local db. But when i try to do this SQL:</p>\n\n<pre><code>SELECT Original FROM md5list WHERE md5 = 'blabla' LIMIT 0, 50\n</code></pre>\n\n<p>But after a while, the mysql Server disconnects and says that the query took too much time. How can i expand the time or make it faster? And is it possible to get the result in one hour?</p>\n"},{"tags":["mysql","phpmyadmin"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":4501,"score":3,"question_id":3694575,"title":"phpMyAdmin is throwing a #2002 cannot log in to the mysql server phpmyadmin","body":"<p>I have installed MySQL server enterprise 5.1 on my local machine and now I want to install phpMyAdmin.. but it does not work.</p>\n\n<p>I have unrared phpMyAdmin to my server root directory and browsed to \"localhost/phpMyAdmin/setup/index.php\", started a new server and the only setting I changed was filling in my MySQL password in the field \"Password for config auth\"</p>\n\n<p>So now when I am trying to log in I get a error message saying \"#2002 cannot log in to the mysql server phpmyadmin\"</p>\n\n<p>does anyone know whats wrong? I have been having problem with this since yesterday...</p>\n"},{"tags":["php","mysql","sql","group-by"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":33,"score":-1,"question_id":13247996,"title":"How to group exact Tandem values from 2 column of table?","body":"<p>I have a table with 2 column <code>latitude</code> and <code>longitude</code>.<br>\nsome of data rows have exact match tandem values on 2 columns  .</p>\n\n<pre><code>/* Points Table */\nlat |long\n2.1 |5.8\n2.1 |5.6    -Set as Group\n2.1 |5.6    -Set as Group\n2.1 |5.6    -Set as Group\n2.3 |5.2\n2.4 |5.3\n2.5 |5.3    -Set as Group\n2.5 |5.3    -Set as Group\n2.6 |5.3\n2.5 |5.3\n</code></pre>\n\n<p>I want to set as Group tandem values of 2 columns , for example the result of my SQL Query Like :  </p>\n\n<pre><code>/* Points Table */\nlat |long\n2.1 |5.8\n2.1 |5.6    -Grouped\n2.3 |5.2\n2.4 |5.3\n2.5 |5.3    -Grouped\n2.6 |5.3\n2.5 |5.3\n</code></pre>\n\n<p>How can i do this ?</p>\n"},{"tags":["mysql","sql","group-by","union"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1030,"score":2,"question_id":8572821,"title":"Group by with union mysql select query","body":"<pre><code>(SELECT COUNT(motorbike.`owner_id`) as count,owner.`name`,transport.`type` FROM transport,owner,motorbike WHERE transport.type='motobike'\nAND owner.`owner_id`=motorbike.`owner_id`\nAND transport.`type_id`=motorbike.`motorbike_id` GROUP BY motorbike.owner_id)\nUNION ALL\n(SELECT COUNT(car.`owner_id`) as count,owner.`name`,transport.`type` FROM transport,owner,car WHERE transport.type='car'\nAND owner.`owner_id`=car.`owner_id`\nAND transport.`type_id`=car.`car_id` GROUP BY car.`owner_id`)\n</code></pre>\n\n<p>The query above returns a result like this below,</p>\n\n<pre><code>count          name\n1              Linda\n2              Mary\n1              Steve\n1              Linda\n</code></pre>\n\n<p>This query is to count how many transport that owned by an owner. Linda have one car and one motorcycle,so the result should:</p>\n\n<pre><code>count          name\n2              Linda\n2              Mary\n1              Steve\n</code></pre>\n\n<p>I have tried this query,but return error:</p>\n\n<pre><code>(SELECT COUNT(motorbike.`owner_id`),owner.`name`,transport.`type` FROM transport,owner,motorbike WHERE transport.type='motobike'\nAND owner.`owner_id`=motorbike.`owner_id`\nAND transport.`type_id`=motorbike.`motorbike_id`)\nUNION ALL\n(SELECT COUNT(car.`owner_id`),owner.`name`,transport.`type` FROM transport,owner,car WHERE transport.type='car'\nAND owner.`owner_id`=car.`owner_id`\nAND transport.`type_id`=car.`car_id`)  GROUP BY motorbike.owner_id\n</code></pre>\n\n<p>Can anyone help me please?</p>\n"},{"tags":["mysql","sql","alias","nested-queries","inner-query"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13251164,"title":"How to solve unknown alias column issue without using nested queries?","body":"<p>I've the querry</p>\n\n<pre><code>SELECT ID, \n  post_title, \n  post_author,\n  max(case when meta_key='geo_latitude' then meta_value end) latitude,\n  max(case when meta_key='geo_longitude' then meta_value end) longitude,\n ( 3959 * acos( cos( radians(18.204540500000) ) \n                   * cos( radians( latitude ) ) \n                   * cos( radians( longitude ) \n                       - radians(-66.450958500000) ) \n                   + sin( radians(18.204540500000 ) )\n                   * sin( radians( latitude ) ) \n                 )\n   ) AS distance \nFROM `wp_posts` \nLEFT JOIN `wp_postmeta` \n  on ID=post_id \nWHERE post_type='place' \n  AND (meta_key='geo_latitude' OR meta_key='geo_longitude') \nGROUP BY ID, post_title, post_author\nORDER BY ID ASC\n</code></pre>\n\n<p>which results </p>\n\n<pre><code>Error Code: 1054. Unknown column 'latitude' in 'field list'\n</code></pre>\n\n<p>Is there any way to solve this without using inner/nested queries?</p>\n"},{"tags":["mysql","memory"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":13,"score":1,"question_id":13252807,"title":"Why does a MySQL MEMORY-backed table take so much more space than on disk?","body":"<p>I have a single InnoDB table on disk, with ~1,107,423 rows and taking up 45.6 MiB disk space.  The structure is:</p>\n\n<pre><code>messageid int(11)\nsignature varchar(255)\n</code></pre>\n\n<p>When I create a MEMORY-backed version of this table, it takes up 803.5 MiB of memory!  </p>\n\n<p>It seems reasonable there'd be some expansion: a lot of extra pointers from the B-tree index or something, but increasing by a factor of 16 seems awfully excessive!  What's the reason behind this?</p>\n"},{"tags":["mysql","mysqldump"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13251892,"title":"How can I generate xml file from mysqldump and where can I find this file?","body":"<p>I need to generate xml file from mysqldump and get the path for this file\nThanks</p>\n"},{"tags":["mysql","sql","join"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":33,"score":-2,"question_id":13252492,"title":"mysql query (combine 2 queries into 1)","body":"<p>I'm pretty new with sql possibilities and need help with the following:\nI have two queries, both of them work correct:</p>\n\n<pre><code> select id, text, gt, gg, status, 'XXX' as xxx, 'ZZZ' as zzz, \n concat(md5(concat('str1', 'str2')), sha1(concat('str1', 'str2'))) as yyy\n from table limit 1;\n</code></pre>\n\n<p>and</p>\n\n<pre><code> SELECT c.id \n FROM table2 c \n LEFT JOIN table3 m ON c.id = m.cid \n WHERE c.channel_type = 2 \n    and (m.mid IN ('2')) ;\n</code></pre>\n\n<p>How I can convert it into one query (with two select statements), while '2' which is used in 'IN' clause in the 2nd query is the 'id' from the 1st query?</p>\n\n<p>thanks in advance!</p>\n"},{"tags":["mysql","cakephp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12945115,"title":"CakePHP & MySQL - Using find('all') with GROUP for one field and MAX for another field","body":"<p>I have a MySQL table with 3 columns (<code>thread_id</code>, <code>message_id</code>, <code>message</code>). Along the lines of the solution found under the \"Example using GROUP BY\" in this <a href=\"http://www.techonthenet.com/sql/max.php\" rel=\"nofollow\">link</a>, I want my query to GROUP BY <code>thread_id</code>, but return the line of of the highest <code>message_id</code> (instead of default lowest) for each <code>thread_id</code>. I then want a nicely formatted array with lines/items just like you get for less complex find operations in CakePHP along the lines of <code>$array[index]['Model']['field']</code>. Using the following CakePHP syntax:</p>\n\n<pre><code>$this-&gt;Model-&gt;find('all', array(\n   'fields' =&gt; array('MAX(Model.message_id) as message_id', 'Model.thread_id', 'Model.message'),\n   'group =&gt; 'Model.thread_id'\n));\n</code></pre>\n\n<p>Now, unfortunately I am not getting that nicely formatted array. Instead I get an array which looks something like: </p>\n\n<p>Array ( [0] => Array ( [0] => Array ( [message_id] => wanted/correct_message_id ) [Model] => Array ( [message] => Message from lowest/unwanted message_id line. [thread_id] => Key from lowest/unwanted message_id line))</p>\n\n<p>Why does the <code>message_id</code> not get hooked onto the <code>[Model]</code> part of the array and why does CakePHP fetch the lowest <code>message_id</code> line and put the <code>message</code> and <code>thread_id</code> into the <code>[Model]</code> part of the array without the <code>message_id</code> column?</p>\n\n<p>I want all thre columns in the <code>[Model]</code> part of the array and I want that line to be the highest <code>message_id</code> for that <code>thread_id</code> per my initial description. Hope this question makes sense.</p>\n"},{"tags":["php","mysql"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":44,"score":0,"question_id":13252250,"title":"Mysql Connect error: not showing anything at all","body":"<p>I am currently working with <code>mysql_connect()</code> even though it's use is discouraged. My web service does not support <code>PDO</code>. I currently had my code formatted into <code>PDO</code> but now i have been forced to change it to <code>mysяl_connect()</code>. After these changes now I am receiving a page error and nothing displays. I am including a <code>database_connect.php</code> that is working with another page just not with my adapted code. What is the issue in my code that is causing this error? Here is my <a href=\"http://capstone.otiummusic.com/classes.php\" rel=\"nofollow\">PAGE</a></p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>include ('./snippets/db_connect.php');\n\n      $query = (\"SELECT  class_name, class_caption, class_credit_hours, class_description\n                 FROM class                          \n                 \");\n      $query-&gt;execute();\n\n     if ($query-&gt;execute()){\n\n    $totalhours = 0;\n\n    while ($row = mysql_fetch_assoc( $query )){  \n        print \"&lt;b&gt;\" . $row['class_name'] . \"&lt;/b&gt;&lt;br&gt;\";\n        print $row['class_caption'] . \"&lt;br&gt;\";\n        print $row['class_description'] . \"&lt;br&gt;\";\n        print $row ['class_credit_hours'] . \"hrs. &lt;br&gt;\";\n\n        print \"------------------------------&lt;br /&gt;\";\n        $totalhours += $row['class_credit_hours']; \n    }\n\n    print \"&lt;p&gt;Total hours for Major: \" . $totalhours . \".&lt;/p&gt;\";\n\n    \"&lt;div&gt; &lt;/div&gt;\"\n</code></pre>\n"},{"tags":["php","mysql","sql"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":44,"score":2,"question_id":13251933,"title":"SQL : Match IN operator with anything","body":"<p>I am trying to build a dynamic query.</p>\n\n<p>This works fine :</p>\n\n<pre><code>$qstring=\"10000, 10001, 10003, 10005\";\n\nSELECT *\nFROM orders\nWHERE order_id in ($qstring);\n</code></pre>\n\n<p>This also works fine when I have no data to match and select.</p>\n\n<pre><code>$qstring=\"\";\n\nSELECT *\nFROM orders\nWHERE order_id in ($qstring);\n</code></pre>\n\n<p>Does something like below exists to match any data? I checked out the pattern matching for SQL but found nothing that could match everything.</p>\n\n<pre><code>$qstring=\"*\";\n\nSELECT *\nFROM orders\nWHERE order_id in ($qstring);\n</code></pre>\n\n<p>Any hints? Thanks!</p>\n"},{"tags":["mysql","jpa","parallel-processing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13249260,"title":"JPA and Mysql - Multiple Client Connections but just one User Account","body":"<p>There is a central database and many clients which access it parallel per JPA. The clients have a permanent connection to the database. State synchronisation is only achieved by the database. The clients just update their views and blindly write back some input per JPA.</p>\n\n<p>Is there a possibility not to have separate database user accounts per client? I would like to use just one user for all running clients.</p>\n"},{"tags":["php","mysql","database","insert"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13241786,"title":"How to Insert info to the database","body":"<p>Sorry for the long post. I got the index.html to work with the quiz1.php, but I can't get the questions and checkbox to work right meaning be inserted to the database with the other info from the index.html. It should insert the info from index.html and the info from quiz1.php. Need help getting this to work. </p>\n\n<p>This is what I have done so far.</p>\n\n<p>Form (index.html) First page (Gets the person info)</p>\n\n<pre><code>&lt;form action=\"quiz1.php\" method=\"post\"&gt;\n    Full Name: &lt;input type=\"text\" name=\"full_name\" /&gt;\n    Quiz Name: &lt;input type=\"text\" name=\"quiz_name\" /&gt;\n    Class Name: &lt;input type=\"text\" name=\"class_name\" /&gt;\n    Date: &lt;input type=\"text\" name=\"quiz_taken\" /&gt;\n    &lt;input type=\"submit\" value=\"Submit\" class=\"flashit\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Quiz (quiz1.php) Second page (Puts the info from the index.html on the top)</p>\n\n<pre><code>&lt;?php\n// info from index.html\n$_SESSION['full_name']  = $_POST['full_name'];\n$_SESSION['quiz_name']  = $_POST['quiz_name'];\n$_SESSION['class_name'] = $_POST['class_name'];\n$_SESSION['quiz_taken'] = $_POST['quiz_taken'];\n\necho $_SESSION['full_name'];\necho \"&lt;br /&gt;\";\necho $_SESSION['quiz_name'];\necho \"&lt;br /&gt;\";\necho $_SESSION['class_name'];\necho \"&lt;br /&gt;\";\necho $_SESSION['quiz_taken'];\necho \"&lt;br /&gt;\";\necho \"&lt;br /&gt;\";\n\n?&gt;\n\n// quiz info\n\n&lt;?php\n\n$db_host = \"localhost\"; \n// Place the username for the MySQL database here \n$db_username = \"root\";  \n// Place the password for the MySQL database here \n$db_pass = \"\";  \n// Place the name for the MySQL database here \n$db_name = \"test\"; \n\n// Run the actual connection here  \nmysql_connect(\"$db_host\",\"$db_username\",\"$db_pass\") or die (\"could not connect to mysql\");\nmysql_select_db(\"$db_name\") or die (\"no database\");\n\n//retreive questions from database and put into question box\n$query2 = \"SELECT `id`, `question`, `aee`, `bee`, \"\n        . \"`cee`, `dee`, `quizAnswer` FROM `quiz1question`\";\n\n$question2    = mysql_query($query2);\n$answerFields = array(\n                    'aee'=&gt;'aee', \n                    'bee'=&gt;'bee', \n                    'cee'=&gt;'cee', \n                    'dee'=&gt;'dee'\n                );\n\nwhile ($row = mysql_fetch_array($question2))\n{\n\n    $id         = $row['id'];\n    $question   = $row['question'];\n\n    echo '&lt;form action=\"insert.php\" method=\"post\"&gt;';\n\n    // Print Question\n    printf('&lt;div id=\"ContainerQuestion\"&gt;');\n    printf('&lt;span class=\"Question\"&gt;%s. %s&lt;/span&gt;', $id, $question);\n\n    // Print Answers\n    foreach ($answerFields as $field=&gt;$ans)\n    {\n        if (array_key_exists($field, $row) &amp;&amp; $row[$field])\n        {\n            $checked = ($row[\"quizAnswer\"] == $ans) ? 'checked' : '';\n            printf(\n                '&lt;p&gt;&lt;input type=\"checkbox\" name=\"%s\" %s value=\"%s\"&gt;%s&lt;/p&gt;', \n                $id, \n                $checked, \n                $ans, \n                $row[$field]\n            );\n        }\n    }\n}\n\n echo '&lt;input type=\"submit\" value=\"Submit Quiz\"&gt;&lt;/form&gt;';\n\n?&gt;\n</code></pre>\n\n<p>results (insert.php) Third page (Input the info from page one and two to the database)</p>\n\n<pre><code>&lt;?php \n\n$localhost = \"localhost\";\n$username  = \"root\";\n$password  = \"\";\n$database  = \"test\";\n$table     = \"quiz_results\";\n\nmysql_connect(\"$localhost\",\"$username\",\"$password\") or die(mysql_error());\nmysql_select_db(\"$database\") or die(mysql_error());\n\n// question &amp; answers\n$mysql1 = \"INSERT INTO $table (question, aee, bee, cee, dee) \"\n        . \"VALUES ('$_POST[question]','$_POST[aee]',\"\n        . \"'$_POST[bee]','$_POST[cee]','$_POST[dee]')\";\n\nif(!mysql_query($mysql1)) \n{\n    die(mysql_error());\n}\n\n// insert Name, quiz name, class name, and quiz taken \n$mysql = \"INSERT INTO $table (full_name, quiz_name, class_name, quiz_taken) \"\n       . \"VALUES ('$_POST[full_name]','$_POST[quiz_name]',\"\n       . \"'$_POST[class_name]','$_POST[quiz_taken]')\";\n\nif(!mysql_query($mysql))\n{\n    die(mysql_error());\n}\n\n// echo\necho\"Thank you!\"; // mysql1\necho \"&lt;br /&gt;\";\necho\"Your Quiz has been Inserted\"; // mysql\n\nmysql_close();\n\n?&gt;\n</code></pre>\n"},{"tags":["php","mysql","mysql-real-escape-string"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":33,"score":-1,"question_id":13251870,"title":"how to escape characters from external source to insert into database?","body":"<p><code>insert.php</code> is behind <code>htaccess/passwd</code></p>\n\n<p>It is grabbing data from an external source and then converting this into variables for insertion to database.  </p>\n\n<p>I am getting a mysql error that I believe is being caused by the existence of left and right parentheses ie (some text here) in the external source.</p>\n\n<p>I've used <code>mysql_real_escape_string</code> but it doesn't seem to be working in this case.  </p>\n\n<pre><code>$con = mysql_connect(\"localhost\",\"user_name\",\"password\");\nif (!$con)\n{\n    die('Could not connect: ' . mysql_error());\n}\n\nmysql_select_db(\"user_dbname\", $con);\n\n// escape characters\n$escaped_value = mysql_real_escape_string($var);\n\n$sql = \"INSERT INTO data (field1, field2, field3, field4, field5, field6)\n        VALUES ('$_POST[field1]','$_POST[field2]','$_POST[field3]','$_POST[field4]',\n                '$field5','$escaped_value', )\";\n;\n</code></pre>\n"},{"tags":["mysql","query"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13250351,"title":"MySql: Extract products with identical options","body":"<p>I'm trying to write a query that would extract products that have identical option values assigned to them. Affected tables are:</p>\n\n<pre><code>products\n| id |\n\nrel_product_options\n| product | option | value |\n\"option\" is an id from \"options\" table\n\"value\" is an option value id from \"values\" table (an option can have multiple values. eg. option \"color\" can have \"red\", \"blue\" etc.)\n</code></pre>\n\n<p>Every product has multiple option-value combinations ir \"rel_product_options\" table. Variations of the same product cannot have identical option-value pairs and that's why prior to changing any value on any option i need to check if the next value would no conflict with some other product. Let's assume</p>\n\n<ul>\n<li>product A (color: red, size: 10)</li>\n<li>product B (color: blue, size: 10)</li>\n</ul>\n\n<p>Now if i try to change color of \"product B\" to \"red\" - i should be able to find in the database that options of \"product A\" would be identical and cancel the change. I hope the question is clear and honestly i don't even know where to start: sql is something of a mystery to me no matter how many times i use it ... I've started with something like the code below, but i think it is probably wrong on more levels than i can count to so any help is very appreciated.</p>\n\n<pre><code># my thoughts\nSELECT P1.*, PO1.*, PO2.* FROM products AS P1\n# first select the product we want to extract all options from\n# THIS ALREADY IS WRONG, because one of the options is ABOUT TO CHANGE, but this code assumes it has already done that\nJOIN rel_product_options AS PO1 ON (PO1.product = P1.id AND PO1.product = 1)\n# now join all other products that do not have identical option-value pairs\nLEFT JOIN rel_product_options AS PO2 ON (PO1.product != PO2.product AND PO1.`option` = PO2.`option` AND PO1.value = PO2.value)\n# and ... i'm lost ...\n</code></pre>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13251672,"title":"How to return the table using mysql Function","body":"<p>I am using MySQL. I want to return the table using MySQL  function. In SQL its working fine but not in MySQL.    I attach my partial code</p>\n\n<pre><code> DELIMITER $$\n\n    CREATE FUNCTION myFunction() RETURNS @tmptable TABLE (item varchar(20))\n    BEGIN  \n\n        insert  into @tmptable(item) values('raja')     \n\n\n        return\n     END; $$\n</code></pre>\n"},{"tags":["mysql","sql","oracle","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":56,"score":-4,"question_id":13251647,"title":"SQL query to get one distinct row in a table","body":"<p>In my table i am having 20 columns with redundant rows.</p>\n\n<p>What is the SQL query to get only one distinct row. <code>SELECT DISTINCT(COL1) FROM TABLE1;</code> this gives unique record for that column but i want all the rows how to do it??</p>\n"},{"tags":["java","mysql","prepared-statement"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13250826,"title":"batch insert takes only one query and fails to take all the query in java","body":"<p>i have a method which has to insert into two tables, i have used batch insert for that.\nmy problem is it takes the second query and inserts in to that table and fails to insert into first table that is <code>fails to take first query</code>.</p>\n\n<p>this is what is my code : </p>\n\n<pre><code>public String saveVillageDetails(VillagesViewModel viewmodel, String functionType) {\n        int[] saveOrupdateStatus = null;\n        StringBuffer disctrictQuery = new StringBuffer();\n        String saveOrupdateStatusMessage = \"\";\n        Connection connection = getConnection();\n        PreparedStatement districtPS = null;\n        ResultSet rs = null;\n        if (connection != null) {\n\n            try {\n                 connection.setAutoCommit(false);\n                 if(functionType.equals(\"add\")){\n                    // to insert in villages table\n                        disctrictQuery.append(\" INSERT INTO m_villages(districtid,village,creation_date,last_created_by) \");\n                        disctrictQuery.append(\" VALUES (?, ?, ?,?) \");\n                        districtPS = connection.prepareStatement(disctrictQuery.toString());\n                        districtPS.setInt(1, viewmodel.getDistrictid());\n                        districtPS.setString(2, viewmodel.getVillage());\n                        districtPS.setTimestamp(3, getCurrentDate());\n                        districtPS.setInt(4,viewmodel.getUserid());\n                        districtPS.addBatch();\n                        // to insert in regions table\n                        disctrictQuery=new StringBuffer();\n                        disctrictQuery.append(\" INSERT INTO m_regions(villageid,creation_date,last_created_by) \");\n                        disctrictQuery.append(\" VALUES (?, ?, ?) \");\n                        districtPS = connection.prepareStatement(disctrictQuery.toString());\n                        districtPS.setInt(1, getLatestVilalgeID());\n                        districtPS.setTimestamp(2, getCurrentDate());\n                        districtPS.setInt(3,viewmodel.getUserid());\n                        districtPS.addBatch();\n\n                    }else if(functionType.equals(\"edit\")){\n                        // to update villages table\n                        disctrictQuery.append(\"UPDATE m_villages SET districtid=? ,village=? ,updation_date=? ,last_updated_by=? \");\n                        disctrictQuery.append(\" WHERE villageid=? \");\n                        districtPS = connection.prepareStatement(disctrictQuery.toString());\n                        districtPS.setInt(1, viewmodel.getDistrictid());\n                        districtPS.setString(2, viewmodel.getVillage());\n                        districtPS.setTimestamp(3, getCurrentDate());\n                        districtPS.setInt(4,viewmodel.getUserid());\n                        districtPS.setInt(5,viewmodel.getVillageid());\n                        districtPS.addBatch();\n                        disctrictQuery=new StringBuffer();\n                        // to update regiions table\n                        disctrictQuery.append(\"UPDATE m_regions SET villageid=?,updation_date=? ,last_updated_by=? \");\n                        disctrictQuery.append(\" WHERE regionid=? \");\n                        districtPS = connection.prepareStatement(disctrictQuery.toString());\n                        districtPS.setInt(1, viewmodel.getVillageid());\n                        districtPS.setTimestamp(2, getCurrentDate());\n                        districtPS.setInt(3,viewmodel.getUserid());\n                        districtPS.setInt(4,getRegionID(viewmodel.getVillageid()));\n                        districtPS.addBatch();\n\n                    }\n                saveOrupdateStatus = districtPS.executeBatch();\n\n                if (saveOrupdateStatus.length &gt; 0) {\n                    if(functionType.equals(\"add\")){\n                         saveOrupdateStatusMessage = \"Village Details Added successfully\";\n                    }else if(functionType.equals(\"edit\")){\n                        saveOrupdateStatusMessage = \"Village Details Modified successfully\";\n                    }\n                    connection.commit();\n                    connection.setAutoCommit(true);\n                } else {\n                     if(functionType.equals(\"add\")){\n                         saveOrupdateStatusMessage = \"Failed to Add Village Details\";\n                    }else if(functionType.equals(\"edit\")){\n                        saveOrupdateStatusMessage = \"Failded to Modify Village Details\";\n                    }\n\n                }\n            } catch (Exception ex) {\n                ex.printStackTrace();\n                //use log to print the exception    ex.printStackTrace();\n            } finally {\n                try {\n                closeConnection(connection, rs, districtPS);\n            } catch (Exception ex) {\n                ex.printStackTrace();\n                //use logger here\n            }\n        }\n    }\n    return saveOrupdateStatusMessage;\n}\n</code></pre>\n\n<p>when i printed the statement i get like this : </p>\n\n<pre><code>com.mysql.jdbc.ServerPreparedStatement[2] -  INSERT INTO m_regions(villageid,creation_date,last_created_by)  VALUES (18, '2012-11-06 17:41:25', 1) \n</code></pre>\n\n<p>and the first query is missing in the batch.</p>\n\n<p>what could be the problem.</p>\n\n<p>Please help</p>\n\n<p>Regards</p>\n"},{"tags":["mysql","regex","ftp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":30,"score":-1,"question_id":13221462,"title":"Regex - Rename files on FTP and rename column values in MySQL","body":"<p>The regex used to clean the filenames is <code>preg_replace('/[^\\w\\._]+/', '_', $fileName);</code></p>\n\n<p>I am looking for a way to rename files in a directory on the FTP server <em>(FTP client allowing bulk renaming using regex? or some php script?)</em> using that regex.</p>\n\n<p>Also i would like to rename the values for all the rows in a column in the MySQL <em>(sql query including regex?)</em>,\nfor instance if the value is <code>http://test.com/content/plugins/audio/uploading/uploads/test song - test title 1.mp3</code> to remove the directory path and keep the basename, and rename it using the same regex.</p>\n\n<p>Output should be <code>test_song___test_title_1.mp3</code> in both FTP and MySQL.</p>\n\n<p>Unfortunately i don't have access to SSH.</p>\n\n<p>Thank you in advance!</p>\n"},{"tags":["mysql","sql","query","normalization"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":13242840,"title":"SQL query - Two tables with relation many to one (Normalization issue)","body":"<p>I have this example tables:</p>\n\n<pre><code>table ORDERS\n\nclient   orderno   cant1   code1   notes1   cant2   code2   notes2   cant[i]   code[i] [...]\n--------------------------------------------------------------------------------------\n1          1        3      AA01    Test      4      BB01    Testing\n2          2        10     XX05    Test      \n\n\n\ntable PRODUCTS\n\ncode   prod    price\n---------------------\nAA01   Engine   100  \nBB01   Wheel     50  \n\n\n\ntable CLIENTS\n\nclient   name      address     telephone\n-----------------------------------------\n  1     Maxwell   24 1st st    0987654321\n  2     Hammer    77 main st   1234567890\n</code></pre>\n\n<p>I need to relate them to get the quantity, name of the product and price for each of the product lines (they are 30 cant[i], code[i] and notes[i]) and the customer's information (name, address, etc)</p>\n\n<p>I found this case, but I don't understand how to apply it to mine: <a href=\"http://stackoverflow.com/questions/9420475/sql-query-two-tables-with-relation-one-to-many\">SQL query two tables with relation one-to-many</a></p>\n\n<p>I hope it's not too complex.</p>\n\n<p>Thanks in advance!</p>\n\n<h1>EDIT</h1>\n\n<p>Thanks to ElectricLlama I realized the problem here is the table where the order is storaged. According to his answer, the normalization of the database would improve the way I'm able to get the info.</p>\n\n<p>For anyone interested in this solution, I found this great website: <a href=\"http://www.devshed.com/c/a/MySQL/An-Introduction-to-Database-Normalization/\" rel=\"nofollow\">http://www.devshed.com/c/a/MySQL/An-Introduction-to-Database-Normalization/</a></p>\n\n<p>This SO answer clears it ALL! Super clear and understandable!\n<a href=\"http://stackoverflow.com/a/1258776/888292\">http://stackoverflow.com/a/1258776/888292</a></p>\n"},{"tags":["php","mysql","sql","join"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13251407,"title":"PHP/MYSQL join fieldname in array","body":"<p>I have a query that joins two tables that share a field name.  I want to grab the field name of one, not the other after converting the results into an array using fetch_array.</p>\n\n<p>I feel like I have accomplished this with a simple alias numerous times but this time it is not working.  Can anyone please help me find the error.  Many thanks.</p>\n\n<p>Code is:</p>\n\n<pre><code>$sql = \"SELECT i.*,ic.* FROM `items` i \n  LEFT JOIN `itemcat` ic ON i.id= ic.itemid \n  WHERE (shortdescript LIKE '%%' OR longdescript LIKE '%%') \n    AND ic.catid='23' limit 0,20 \";\n\n$res = mysql_query($sql) or die(mysql_error());  //query executes no problem\nwhile($row = mysql_fetch_array($res)) {\n$id = $row['i.id'];//I do not understand why this is not getting anything.\n$id2 = $row['id'];//returns id but from wrong table.\n\necho $id; //returns blank.  \necho $id2; //returns id of itemcat table when I want id of items table.\n}\n</code></pre>\n"},{"tags":["mysql","sql","join"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13250645,"title":"SQL syntax error - Haversine formula","body":"<p>I'm trying to <a href=\"http://stackoverflow.com/questions/4645490/get-nearest-places-google-maps-mysql-spatial-data/4979891\">get nearest places</a> from a WordPress database using <a href=\"http://en.wikipedia.org/wiki/Haversine_formula\" rel=\"nofollow\">Haversine formula</a></p>\n\n<p>My table structure below</p>\n\n<p><strong>posts</strong></p>\n\n<pre><code>+--------------+\n| Field        |\n+--------------+\n| ID           |\n| post_author  |\n| post_title   | \n| post_type    | \n+--------------+\n</code></pre>\n\n<p><strong>postmeta</strong></p>\n\n<pre><code>+--------------+\n| Field        |\n+--------------+\n| meta_id      |\n| post_id      |\n| meta_key     |\n| meta_value   |\n+--------------+\n</code></pre>\n\n<p>and have records with <code>meta_key</code> values <code>latitude</code> and <code>longitude</code> </p>\n\n<p>See the <a href=\"http://stackoverflow.com/questions/13249724/selecting-a-join-tables-column-values-as-result-column-name\">answer to my previous question</a> for the SQL I've used to get the latitude and longitude.</p>\n\n<pre><code>SELECT p.ID, \n  p.post_title, \n  p.post_author,\n  max(case when pm.meta_key='latitude' then pm.meta_value end) latitude,\n  max(case when pm.meta_key='longitude' then pm.meta_value end) longitude\nFROM `wp_posts` p\nLEFT JOIN `wp_postmeta` pm\n  on p.ID=pm.post_id \nWHERE p.post_type='place' \n  AND (pm.meta_key='latitude' OR pm.meta_key='longitude') \nGROUP BY p.ID, p.post_title, p.post_author\nORDER BY p.ID ASC\n</code></pre>\n\n<p>Now I want to incorporate above query into <a href=\"http://stackoverflow.com/questions/4645490/get-nearest-places-google-maps-mysql-spatial-data/4979891#4979891\">answer for this question</a></p>\n\n<pre><code>SELECT item1, item2, \n    ( 3959 * acos( cos( radians(37) ) \n                   * cos( radians( lat ) ) \n                   * cos( radians( lng ) \n                       - radians(-122) ) \n                   + sin( radians(37) ) \n                   * sin( radians( lat ) ) \n                 )\n   ) AS distance \nFROM geocodeTable \nHAVING distance &lt; 25 \nORDER BY distance LIMIT 0 , 20;\n</code></pre>\n\n<p>Below is by combined query</p>\n\n<pre><code>SELECT ID, \n  post_title, \n  post_author,\n  max(case when meta_key='latitude' then meta_value end) latitude,\n  max(case when meta_key='longitude' then meta_value end) longitude,\n  ( 3959 * acos( cos( radians(18.204540500000) ) \n                   * cos( radians( latitude ) ) \n                   * cos( radians( longitude ) \n                       - radians(-66.450958500000) ) \n                   + sin( radians(18.204540500000 ) \n                   * sin( radians( latitude ) ) \n                 )\n   ) AS distance \nFROM `wp_posts` \nLEFT JOIN `wp_postmeta` \n  on ID=post_id \nWHERE post_type='place' \n  AND (meta_key='latitude' OR meta_key='longitude') \nGROUP BY ID, post_title, post_author\nORDER BY ID ASC\n</code></pre>\n\n<p>But this yields syntax error </p>\n\n<pre><code>#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS distance FROM `wp_posts` LEFT JOIN `wp_postmeta` on ID=post_id WHERE po' at line 13\n</code></pre>\n"},{"tags":["java","mysql","transactions","jta"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":526,"score":0,"question_id":2867364,"title":"JTA Transaction: What happens if an exception happens but rollback is not called on the transaction?","body":"<p>We have some third party code wherein they do the following</p>\n\n<p>1) Create a User Transaction e.g.</p>\n\n<pre><code>     txn = (UserTransaction)ctx.lookup( \"UserTransaction\" );\n     txn.begin(  );\n</code></pre>\n\n<p>2) Do some work persisting to the database (via JPA) to a MySQL database</p>\n\n<p>3) txn.commit()</p>\n\n<p>They have Exception blocks but NONE of them call txn.rollback.\nGood coding practice says they NEED to call rollback if an exception occurs but my question is\nIf the txn is not commited, and an exception occurs what is the negative effect of them NOT calling rollback?</p>\n"},{"tags":["php","javascript","jquery","mysql","file"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13251102,"title":"Uploading a file from client system to server using jquery ajax request from html file","body":"<p>I am uploading a file to my server from client system.  The place i struck is,</p>\n\n<p>this is the html code,</p>\n\n<pre><code>&lt;input type=\"file\" name=\"fileCarRes\" id=\"fileCarRes\" size=\"10\" /&gt;\n</code></pre>\n\n<p>and using this jquery ajax request i am taking this file to another php file then with use of PHP function i will upload the file. The Jquery code i am using is,</p>\n\n<pre><code>file = $('#fileCarRes').val();\nurl=\"careers.php\";\n\n    $.post\n    (\n        url,\n        {\n            'act'           :   'file',\n            'file'          :    file\n        },\n        function (responseText)\n        {\n            alert(responseText);\n        },\n        \"html\"\n    );\n\nIn php file\n\nif(isset($_POST['act']) &amp;&amp; $_POST['act'] == 'file')\n    {\n        $file           =   $_POST['file'];\n\n\n                 $extension = end(explode(\".\", $_FILES[\"file\"][\"name\"]));\n        } etc... \n</code></pre>\n\n<p>In PHP <code>$_FILES[\"file\"][\"name\"]</code> is used for getting the file from the html file.  Now i am send and ajax query without using the <code>&lt;form&gt;</code>.  So i dont know, how to map the file path to this PHP function.  I am working in MVC architechture.</p>\n\n<p>'Thanks in Advance !!'</p>\n"},{"tags":["mysql","osx","command-line","osx-lion"],"answer_count":5,"favorite_count":6,"up_vote_count":10,"down_vote_count":0,"view_count":16040,"score":10,"question_id":7927854,"title":"start mySQL server from command line on Mac OS Lion","body":"<p>I installed mySQL for my Mac. Beside starting the SQL server with mySQL.prefPane tool installed in System Preference, I want to know the instruction to start from command-line.\nI do as follow:</p>\n\n<p>After</p>\n\n<blockquote>\n  <p>su root</p>\n</blockquote>\n\n<p>I start the mySQL server by command-line, it produce error as below:</p>\n\n<blockquote>\n  <p><strong>sh-3.2#</strong> /usr/local/mysql/bin/mysqld</p>\n  \n  <p><strong>111028 16:57:43</strong> [Warning] Setting lower_case_table_names=2 because\n  file system for /usr/local/mysql-5.5.17-osx10.6-x86_64/data/ is case\n  insensitive</p>\n  \n  <p><strong>111028 16:57:43</strong> [ERROR] Fatal error: Please read \"Security\" section of\n  the manual to find out how to run mysqld as root!</p>\n  \n  <p><strong>111028 16:57:43</strong> [ERROR] Aborting</p>\n  \n  <p><strong>111028 16:57:43</strong> [Note] /usr/local/mysql/bin/mysqld: Shutdown complete</p>\n</blockquote>\n\n<p>Please help me!</p>\n\n<p>EDIT:</p>\n\n<p>The reason is here: <a href=\"http://dev.mysql.com/doc/refman/5.5/en/changing-mysql-user.html\">http://dev.mysql.com/doc/refman/5.5/en/changing-mysql-user.html</a></p>\n\n<p>A solution is described in the xdazz's answer below.</p>\n"},{"tags":["php","mysql","pagination"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13250727,"title":"PHP Pagination inclusive search function and ordering","body":"<p>Anyone know a good place or a good tutorial how to set up this pagination I'm looking for?</p>\n\n<p>Before you get mad that I'm posting hundreds of lines here, let me just give a fast explaination about what I want to achieve, the codes I use to explain my situation better.</p>\n\n<p>The code below works if you only want to paginate or only want to search:<br/>\n 1. Enter the main page, and the pagination works. Hit page 1, page 2, etc and you get the result you are expecting.<br/>\n 2. Use the search, and it works, but this gives ALL records without limitation in 1 page. I could set up a limit but the pagination still will not work.</p>\n\n<p>I just don't know how to get the search variable and add it to the pagination.</p>\n\n<p>Is it possible to have an url like: search=Hello+World?orderby=custforename+custsurname?page=3..I think it is... How is something like this, '?nested get variables?' called? Anyone knows a good place around for an advanced pagination tutorial?</p>\n\n<p><hr>\nI'm using this code on my main page:\n    \n        \n        \n    </p>\n\n<pre><code>&lt;?php\n    if(isset($_POST['search']))\n    {\n        $search = $_POST['search'];\n        $search = ltrim($search, \" \");\n        $terms = explode(\" \", $search);\n        $customerlistquery = \"\n                            SELECT *\n                            FROM customer\n                            LEFT JOIN company\n                            ON customer.compid=company.compid\n                            WHERE\n                            \";\n        $i = 0;\n        foreach ($terms as $each) \n        {\n            if ($i++ &gt; 0) \n            $customerlistquery .= ' OR ';\n\n            $customerlistquery .= \"concat(custsurname, custforename, custmidname, custpostal, custphone1, custphone2, custfax, custnamecode, datemodified, modifiedby) LIKE '%$each%' \";\n        }\n        $customerlistquery .= \" ORDER BY $orderby ASC\";\n    }\n    else\n    {\n        $page = (int) (!isset($_GET[\"page\"]) ? 1 : $_GET[\"page\"]);\n        $startpoint = ($page * $limit) - $limit;\n        $customerlistquery = \"  \n                SELECT *\n                FROM customer\n                LEFT JOIN company\n                ON customer.compid=company.compid\n                ORDER BY $orderby ASC \n                LIMIT {$startpoint}, {$limit}\n                \";\n        echo pagination(\"customer\n                LEFT JOIN company\n                ON customer.compid=company.compid\n                ORDER BY $orderby ASC\",$limit,$page);       \n    }\n?&gt;\n\n\n$result=mysql_query($itemslistquery) or die(\"query fout \" . mysql_error() );\n</code></pre>\n\n<p>And at last the pagination.php code:</p>\n\n<pre><code>&lt;?php\n    function pagination($query, $per_page = 10,$page = 1, $url = '?'){        \n        $query = \"SELECT COUNT(*) as `num` FROM {$query}\";\n        $row = mysql_fetch_array(mysql_query($query));\n        $total = $row['num'];\n        $adjacents = \"2\"; \n\n        $page = ($page == 0 ? 1 : $page);  \n        $start = ($page - 1) * $per_page;                               \n\n        $prev = $page - 1;                          \n        $next = $page + 1;\n        $lastpage = ceil($total/$per_page);\n        $lpm1 = $lastpage - 1;\n\n        $pagination = \"\";\n        if($lastpage &gt; 1)\n        {   \n            $pagination .= \"&lt;ul class='pagination'&gt;\";\n                    $pagination .= \"&lt;li class='details'&gt;Page $page of $lastpage&lt;/li&gt;\";\n            if ($lastpage &lt; 7 + ($adjacents * 2))\n            {   \n                for ($counter = 1; $counter &lt;= $lastpage; $counter++)\n                {\n                    if ($counter == $page)\n                        $pagination.= \"&lt;li&gt;&lt;a class='current'&gt;$counter&lt;/a&gt;&lt;/li&gt;\";\n                    else\n                        $pagination.= \"&lt;li&gt;&lt;a href='{$url}page=$counter'&gt;$counter&lt;/a&gt;&lt;/li&gt;\";                    \n                }\n            }\n            elseif($lastpage &gt; 5 + ($adjacents * 2))\n            {\n                if($page &lt; 1 + ($adjacents * 2))     \n                {\n                    for ($counter = 1; $counter &lt; 4 + ($adjacents * 2); $counter++)\n                    {\n                        if ($counter == $page)\n                            $pagination.= \"&lt;li&gt;&lt;a class='current'&gt;$counter&lt;/a&gt;&lt;/li&gt;\";\n                        else\n                            $pagination.= \"&lt;li&gt;&lt;a href='{$url}page=$counter'&gt;$counter&lt;/a&gt;&lt;/li&gt;\";                    \n                    }\n                    $pagination.= \"&lt;li class='dot'&gt;...&lt;/li&gt;\";\n                    $pagination.= \"&lt;li&gt;&lt;a href='{$url}page=$lpm1'&gt;$lpm1&lt;/a&gt;&lt;/li&gt;\";\n                    $pagination.= \"&lt;li&gt;&lt;a href='{$url}page=$lastpage'&gt;$lastpage&lt;/a&gt;&lt;/li&gt;\";      \n                }\n                elseif($lastpage - ($adjacents * 2) &gt; $page &amp;&amp; $page &gt; ($adjacents * 2))\n                {\n                    $pagination.= \"&lt;li&gt;&lt;a href='{$url}page=1'&gt;1&lt;/a&gt;&lt;/li&gt;\";\n                    $pagination.= \"&lt;li&gt;&lt;a href='{$url}page=2'&gt;2&lt;/a&gt;&lt;/li&gt;\";\n                    $pagination.= \"&lt;li class='dot'&gt;...&lt;/li&gt;\";\n                    for ($counter = $page - $adjacents; $counter &lt;= $page + $adjacents; $counter++)\n                    {\n                        if ($counter == $page)\n                            $pagination.= \"&lt;li&gt;&lt;a class='current'&gt;$counter&lt;/a&gt;&lt;/li&gt;\";\n                        else\n                            $pagination.= \"&lt;li&gt;&lt;a href='{$url}page=$counter'&gt;$counter&lt;/a&gt;&lt;/li&gt;\";                    \n                    }\n                    $pagination.= \"&lt;li class='dot'&gt;..&lt;/li&gt;\";\n                    $pagination.= \"&lt;li&gt;&lt;a href='{$url}page=$lpm1'&gt;$lpm1&lt;/a&gt;&lt;/li&gt;\";\n                    $pagination.= \"&lt;li&gt;&lt;a href='{$url}page=$lastpage'&gt;$lastpage&lt;/a&gt;&lt;/li&gt;\";      \n                }\n                else\n                {\n                    $pagination.= \"&lt;li&gt;&lt;a href='{$url}page=1'&gt;1&lt;/a&gt;&lt;/li&gt;\";\n                    $pagination.= \"&lt;li&gt;&lt;a href='{$url}page=2'&gt;2&lt;/a&gt;&lt;/li&gt;\";\n                    $pagination.= \"&lt;li class='dot'&gt;..&lt;/li&gt;\";\n                    for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter &lt;= $lastpage; $counter++)\n                    {\n                        if ($counter == $page)\n                            $pagination.= \"&lt;li&gt;&lt;a class='current'&gt;$counter&lt;/a&gt;&lt;/li&gt;\";\n                        else\n                            $pagination.= \"&lt;li&gt;&lt;a href='{$url}page=$counter'&gt;$counter&lt;/a&gt;&lt;/li&gt;\";                    \n                    }\n                }\n            }\n\n            if ($page &lt; $counter - 1){ \n                $pagination.= \"&lt;li&gt;&lt;a href='{$url}page=$next'&gt;Next&lt;/a&gt;&lt;/li&gt;\";\n                $pagination.= \"&lt;li&gt;&lt;a href='{$url}page=$lastpage'&gt;Last&lt;/a&gt;&lt;/li&gt;\";\n            }else{\n                $pagination.= \"&lt;li&gt;&lt;a class='current'&gt;Next&lt;/a&gt;&lt;/li&gt;\";\n                $pagination.= \"&lt;li&gt;&lt;a class='current'&gt;Last&lt;/a&gt;&lt;/li&gt;\";\n            }\n            $pagination.= \"&lt;/ul&gt;\\n\";      \n        }\n\n\n        return $pagination;\n    } \n?&gt;\n</code></pre>\n"},{"tags":["mysql","database","gwt"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":19,"score":-2,"question_id":13249860,"title":"GWT DataBase implementation","body":"<p>I'm new to GWT. Someone please help me out to figure out how to connect database(preferably MySQL) and use it... </p>\n\n<p>Thanks in advance. </p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13248453,"title":"How to select non english characters?","body":"<p>I have some variables which include non english chars like İ,ş,ö. I can insert them to mysql db but they convert to some special characters. For example:</p>\n\n<blockquote>\n  <p>Faz 1/İzmir/İzmir/Konak 1. Merkezinden  Faz1/İzmir/İzmir/Konak 2.\n  Merkezine  bilgisi ile yeni Erişim kaydı yapıldı</p>\n</blockquote>\n\n<p>to</p>\n\n<blockquote>\n  <p>Faz 1/Ä°zmir/Ä°zmir/Konak 1. Merkezinden  Faz1/Ä°zmir/Ä°zmir/Konak 2.\n  Merkezine  bilgisi ile yeni Erişim kaydı yapıldı.</p>\n</blockquote>\n\n<p>it is  sql code:</p>\n\n<pre><code>$sql = \"SELECT username, islem, tarih  FROM loglar where kullanici_id= \".$gelen_id.\" order by tarih desc\" ;  \n$_SESSION[\"VT\"]-&gt;doQuery($sql);\n</code></pre>\n\n<p>Then i cannot get them. it returns null althogh it is in db. and I cannot display in extjs column</p>\n"},{"tags":["mysql","sql","query","postgresql","plpgsql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":64,"score":0,"question_id":13247632,"title":"postgresql query to mysql","body":"<p>I want create query in MySQL similiar to PostgreSQL below:</p>\n\n<pre><code>CREATE FUNCTION check_unique_pair(IN id1 INTEGER, IN id2 INTEGER) RETURNS INTEGER AS   $body$\nDECLARE retval INTEGER DEFAULT 0;\nBEGIN \n SELECT COUNT(*) INTO retval FROM (\n  SELECT * FROM edges WHERE a = id1 AND b = id2\n  UNION ALL\n  SELECT * FROM edges WHERE a = id2 AND b = id1\n)  AS pairs;\nRETURN retval;\nEND\n$body$\nLANGUAGE 'plpgsql';\n\nALTER TABLE edges ADD CONSTRAINT unique_pair CHECK (check_unique_pair(a, b) &lt; 1);\n</code></pre>\n\n<p>I am new to MySQL.</p>\n"},{"tags":["mysql","sql","datetime","time"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":32,"score":3,"question_id":13250531,"title":"Retrieve time from MySQL as HH:MM format","body":"<p>I used <code>DATETIME</code> datatype to store date and time in my Database.  It saved date as  </p>\n\n<pre><code>YY-MM-DD HH:MM:SS (2012-11-06 10:45:48)  \n</code></pre>\n\n<p>I can retrieve the time from database as <code>HH:MM:SS</code> format but I want to retrieve it in <code>HH:MM</code> format.  </p>\n\n<p>How can I do this?</p>\n"},{"tags":["mysql","sql","wordpress","join","pivot"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13249724,"title":"Selecting a join table's column values as result column name","body":"<p>I've a WordPress database with following tables</p>\n\n<p>posts</p>\n\n<pre><code>+--------------+\n| Field        |\n+--------------+\n| ID           |\n| post_author  |\n| post_title   | \n| post_type    | \n+--------------+\n</code></pre>\n\n<p>postmeta</p>\n\n<pre><code>+--------------+\n| Field        |\n+--------------+\n| meta_id      |\n| post_id      |\n| meta_key     |\n| meta_value   |\n+--------------+\n</code></pre>\n\n<p>and have records with <code>meta_key</code> values <code>latitude</code> and <code>longitude</code> </p>\n\n<p>How can I write SQL to show <code>latitude</code> and <code>longitude</code> as result column names?</p>\n\n<pre><code>+--------------+\n| Field        |\n+--------------+\n| ID           |\n| post_author  |\n| post_title   |\n| latitude     |\n| longitude    | \n+--------------+\n</code></pre>\n\n<p>Below query is my starting point</p>\n\n<pre><code>SELECT ID, post_title, meta_key, meta_value FROM `wp_posts` \nLEFT JOIN `wp_postmeta` on ID=post_id \nWHERE post_type='place' AND (meta_key='latitude' OR meta_key='longitude') \nORDER BY ID ASC\n</code></pre>\n"},{"tags":["mysql","mysqlconnection"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13250588,"title":"Unable to use MembershipProvider with MSYQL .Net Connector version 6.6.4","body":"<p>I am using .NetConnector 6.4.3 from last 6-7 months, its working fine, I tried the 6.6.4 today with same configuration, there are no error with database access but I am unable to logon, it shows false if validateUser method, same code working fine with 6.4.3.</p>\n\n<p>Please let me know how can I fix it.</p>\n\n<p>Thanks,\nLaxmilal Menaria</p>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":2,"view_count":41,"score":0,"question_id":13248598,"title":"SQL join clause to return rows with more than one occurrence without grouping","body":"<p>I want to extract the records which appear more than once from a JOIN query, but without them getting grouped.</p>\n\n<p>Example tables:</p>\n\n<pre><code>tbl_names\nid    Name\n1     Mark\n2     John\n3     Jane\n4     Paul\n\ntbl_locations\nid    Location\n1     Berlin\n2     Frankfurt\n2     Stockholm\n3     Helsinki\n3     Madrid\n3     London\n4     Paris\n</code></pre>\n\n<p>ID is a foreign key.</p>\n\n<p>Now, the result of the query would be:</p>\n\n<pre><code>id     Name    Location\n2      John    Frankfurt\n2      John    Stockholm\n3      Jane    Helsinki\n3      Jane    Madrid\n3      Jane    London\n</code></pre>\n\n<p>i.e. all JOIN records in which the record in the first table appears more than once in the JOIN clause result.</p>\n\n<p>I can get it grouped of course:</p>\n\n<pre><code>SELECT tbl_names.id, tbl_names.Name, tbl_locations.Location FROM tbl_names\n INNER JOIN tbl_locations ON (tbl_names.id = tbl_locations.id)\n GROUP BY tbl_names.id\n HAVING COUNT(tbl_names.id) &gt; 1\n</code></pre>\n\n<p>What I want is to have them not grouped at all. I have tried with a sub-clause and <code>NOT IN</code> but it is extremely slow and doesn't give me the results I want.</p>\n\n<p>Any enlightenment will be welcome.</p>\n"},{"tags":["mysql","database","database-design","primary-key","relational-database"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":312,"score":0,"question_id":8852758,"title":"Should one generate a unique id for each row in a database table that otherwise has no unique keys?","body":"<p>I'm designing a MySQL database for a startup working with patient medical records. I have several tables that can have no unique keys: medical conditions, allergies, family history, etc. For example the <code>medications</code> table might have fields <code>patient_id</code>, <code>med_name</code>, <code>usage_dates</code>, <code>dosage</code>, <code>reason</code>, etc. The only guaranteed unique key is all of the fields together.</p>\n\n<p>A web application can easily retrieve this data for a given patient by selecting for <code>patient_id</code>, but unless it is possible to save pointers to rows inside a database with multiple users, it strikes me as a clumsy system for editing or deleting rows in this table. The DBMS would have to select for each field's value in order to find the correct row. From what (little) I know about databases, I imagine this could be inefficient in a large database.</p>\n\n<p>Would it be more efficient to create a new field with an ID number to function as a primary key in each of these tables, or is the DBMS way smarter than me and this is totally unnecessary?</p>\n"},{"tags":["mysql","query"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":28,"score":-1,"question_id":13249903,"title":"mysql select multiple rows by referencing to one data field","body":"<pre><code>===========================\n= id = model_id = property =\n===========================\n= 14 = 1        = 1       =\n===========================\n= 15 = 1        = 3       =\n===========================\n= 16 = 2        = 1       =\n</code></pre>\n\n<p>I have a table like above and I want to select model_ids only where property equals to 1 AND 3</p>\n\n<p>I'd be glad if you could show me how</p>\n\n<p>thanks in advance </p>\n"},{"tags":["mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13250436,"title":"Triggers performance based on system timings","body":"<p>My question might sound stupid but i would be glad if someone answers to this:)</p>\n\n<p>when we set a trigger which performs an action like now(), curdate(), curtime() on dependency of systems date and time, does it consider the change in time that happens before the deletion or update,\n example - i have a trigger set today(6-11-2012) at 5 pm i have to delete a set of rows tomorrow i.e on 7-11-2012 at 5 pm. in this time gap i change the timings or date of my system, now does the trigger consider the newly changed date and time for deleting the rows.</p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13249977,"title":"Copying specific set of rows from one table to another table","body":"<p>I have two tables both having same column and but different no of rows.</p>\n\n<pre><code>Generation\n{Date,\nlocation,\nlocation_id,\nturbine_id,\nGeneration,}\n\nGeneration_copy\n{date,\nlocation,\nlocation_id,\nturbine_id,\nGeneration}\n</code></pre>\n\n<p>In Generation table i have 5000 rows which have rows up to date  and in Generation_copy i have only 4500 rows  which i  haven't updated the table for last one week</p>\n\n<p>Now i need to fill the unfilled  500 rows into table   Generation_copy. </p>\n"},{"tags":["php","mysql","query"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13249281,"title":"Getting extra data in MYSQL count query","body":"<p>Hi all i've had help from bluefleet (BF) with a mysql query which i've now put in a php file, the query works fine but i find i need to get extra data as well as the count, so what i need is when a match is found i need to look up the username in table tview3.</p>\n\n<p>Whichever table the ip match is found there will be a column called UID, in the table tview3 there will also be a column called USERNAME, what i'd like to do is get the username(s) for the matches and then use them in a text file.</p>\n\n<p>I have to state i'm a complete newbie at this, all help is appreciated</p>\n\n<pre><code>$myquery= \"select sum(total)\nfrom\n(\n    SELECT count(*) as total\n    FROM \" .TABLE_PREFIX.\"tview v\n    where v.ipaddress = '$ips'\n    union all\n    SELECT count(*) as total\n    FROM \" .TABLE_PREFIX.\"tview2 v1\n    where v1.ipaddress = '$ips'\n    union all\n    SELECT count(*) as total\n    FROM \" .TABLE_PREFIX.\"tview3 v3\n    where v3.ipaddress = '$ips'\n) src\";\n\n $result = mysql_query($myquery);\n    $rowCount = mysql_num_rows($result);\n    If($rowCount !=0){\n       echo \"NOT EMPTY\";\n    }else{\n      echo \"EMPTY\";\n    }\n   mysql_free_result($result);\n\n$UAM = strtoupper($_SERVER['HTTP_USER_AGENT']);\n$ips = strtoupper($_SERVER['REMOTE_ADDR']);\n$fp = fopen(\"logtext.txt\", \"a\");\n$DateOfRequest = date('m-d-Y H:i:s');\n\nfwrite($fp, \"$DateOfRequest . \\nMatched Member: . $username . \\nWith User Agent:  . $UAM . \\n\\nIP: . $ips . \\n\\n\");\n</code></pre>\n\n<p>So i'd like to populate a variable <strong>$username</strong> with the username(s) where the matches were found.</p>\n\n<p>Regards,\nSilo</p>\n"},{"tags":["php","mysql","ajax","live"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13250199,"title":"How to change icon color when new row is added in database","body":"<p>I want to make a php page that shows three icons. (icon1, icon2, icon3). Each icon displays the current status of a switch that has 2 status (ON-OFF). When each one of the switch change its status I get one new row entry in the database.\nWhat I want is, to change one icon from green to red when the switch turns off and from red to green when the switch turns on. \nThese changes must be visible in realtime (if possible) and without refreshing the php page. I want to have the php site loaded in my browser once and when something new added to my MySQL the page must show the new status.\nCan someone help me with this?</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13250223,"title":"Can I amend the properties of a column in a table after the fact","body":"<p>I have a Timestamp columnn in a MySQL table. The default value of this column is <code>CURRENT_TIMESTAMP</code>, I want to make the <strong>ON UPDATE</strong> property of this column also equal to <code>CURRENT_TIMESTAMP</code> without having to drop and re-add the column, as this would cause me to lose all of the data.</p>\n\n<p>Is this possible?</p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13250066,"title":"How to add a number to a current value in mysql (multiple times at the same time)?","body":"<p>I'm working on a points system that will give users on my site a ranking based on their points, I'm giving the user +1 points whenever someone checks his profile page. Let's say the user has 200 points, on the same exact time 10 users checked his profile page, from my understanding the code will get 200 adds 1 and the result will be 200 + 1 = 201 if the 10 users are in at the same time, how will the database act?</p>\n\n<p>Logically it will count only one visit because the time users checked the profile the value was 200, so when the MYSQL update happens it will be always 201. Am I correct ?</p>\n"},{"tags":["mysql","select"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13249868,"title":"Get rejected value from mysql query","body":"<p>I want to know if we can get the rejected values from a mysql select query.</p>\n\n<p>eg: </p>\n\n<pre><code>SELECT * FROM table where column1 ='value1' and cloumn2 ='value2'\n</code></pre>\n\n<p>This will fetch all data from table where where column1 and column2.\nIn this some values from databse will not be selected. I want to get these values also. Is this possible.</p>\n\n<p>I tried to use <code>where column !='value'</code> but in certain cases this is not applicable.\nAny suggestions. </p>\n"},{"tags":["mysql","count"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13248918,"title":"get list of counts for items","body":"<p>I have two tables symbol and rpm.</p>\n\n<p><strong>Table Details:</strong>\n<em>rpm:</em>\nEntries in rpm export symbols and consume as well.</p>\n\n<p><em>symbol:</em>\nsymbol table is a collection of all symbols(exported and consumed).</p>\n\n<p><strong>Table description:</strong></p>\n\n<p><em>symbol:</em>\nsymbols table have id, name, rpm_id (maps to id of rpm table) , flag to show whether it is exported or consumed.\nflag = 1; consumed\nflag = 0; exported</p>\n\n<p><em>rpm:</em>\nrpm table is having id, name.</p>\n\n<p><strong>More Context:</strong>\nA symbol exported by a rpm entry is consumed many times by other rpm table entries.\nHence a symbol is enlisted in the symbol table multiple times with different id, rpm_id.</p>\n\n<p><strong>Problem Statement:</strong>\nList exported symbols by a given rpm(given its id; say 35) and number of time each symbol is consumed by other rpm entries.</p>\n\n<p><strong>output layout:</strong></p>\n\n<blockquote>\n  <p>symbol.name | count(number of time this symbol is consumed)|</p>\n</blockquote>\n\n<p><strong>Tried solution:</strong></p>\n\n<blockquote>\n  <p>SELECT symbol.name, count(distinct symbol.rpm_id) </p>\n  \n  <p>FROM symbol, rpm</p>\n  \n  <p>WHERE symbol.flag = 0 &amp;&amp; symbol.rpm_id = 35 </p>\n  \n  <p>GROUP BY symbol.name;</p>\n</blockquote>\n\n<p>but I am getting '1' in count column for each symbol, which is wrong.</p>\n\n<p><strong>Semantic of query in question:</strong></p>\n\n<p>First query should get all the symbols exported by given rpm.id (rpm.id = 35),\nthen for each resulted symbol.id in result set, it should find number of times it is consumed i.e. its count and print the count in front of that symbol.</p>\n\n<h2>please suggest some way/query to get result.</h2>\n\n<p>thank you.</p>\n"},{"tags":["php","mysql","ajax","long-polling"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13249364,"title":"Is this a legitimate long polling approach?","body":"<p>Is this PhP script a legitimate approach to long polling or is this to heavy on the server?</p>\n\n<pre><code>$FoundNewContent = false;\n\n$tokens = array();\n\nwhile(!$FoundNewContent) {\n    usleep(300000);\n    clearstatcache();\n    $SQL1 = \"SELECT * FROM tokens WHERE  ID &gt; \".$_GET['tokenID'];\n    $result1 = mysql_query($SQL1);\n    while($row1 = mysql_fetch_array($result1, MYSQL_ASSOC)) {\n        array_push($tokens, $row1);\n        $FoundNewContent = true;\n    }\n}\n\n// Parse XML array    \n\nflush()\n</code></pre>\n\n<p>I am calling this script via Ajax.</p>\n"},{"tags":["mysql","foreign-keys","mysql-error-1005"],"answer_count":2,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":3786,"score":4,"question_id":1180660,"title":"MySQL errorno 121","body":"<p>I'm getting this error in MySQL create. I'm doing:</p>\n\n<pre><code>CREATE TABLE `blogReply` (\n\n    `Id`      INT(24)      NOT NULL AUTO_INCREMENT COMMENT 'Primary Key of This Table',\n    `blogId`  INT(24)      NOT NULL COMMENT 'Blog where this reply was posted',\n    `userId`  INT(24)      NULL COMMENT 'User the blog was posted by',\n    `name`    VARCHAR(100) NULL DEFAULT 'Unknown' COMMENT 'The Name of the user that the reply was posted by',\n    `email`   VARCHAR(100) NULL DEFAULT 'Unknown' COMMENT 'The Email of the user that the reply was posted by',\n    `http`    VARCHAR(300) NULL DEFAULT 'Unknown' COMMENT 'The Webaddress of the user that the reply was posted by',\n    `message` TEXT         NOT NULL COMMENT 'text of the blog',\n    `votes`   INT(10)      DEFAULT 0 COMMENT 'Rating of the Blog',\n    `ratedBy` TEXT         COMMENT 'People who have already Voted on this blog',\n    `dateReg` BIGINT       NOT NULL COMMENT 'Date the User was Registered',\n\n    PRIMARY KEY (`Id`),\n\n    CONSTRAINT `FK_userId` FOREIGN KEY(`userId`)\n        REFERENCES `user` (`Id`)\n        ON DELETE SET NULL\n        ON UPDATE CASCADE,\n\n    CONSTRAINT `FK_blogId` FOREIGN KEY(`blogId`)\n        REFERENCES `blog` (`Id`)\n        ON DELETE CASCADE\n        ON UPDATE CASCADE\n\n) ENGINE = InnoDB;\n</code></pre>\n\n<p>Any Ideas? The Error States: <code>Can't create table './xxxxxxxx/blogReply.frm' (errno: 121)</code></p>\n"},{"tags":["c#","mysql","connection-string","connection-pooling"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":73,"score":2,"question_id":13248947,"title":"Why should I use connection pooling?","body":"<p>In my C# application I connect to a <code>MySQL</code> database and run 10,000 queries. If I keep a connection to my database, these queries take roughly 14 seconds. However, if I rely on the connection pooling my queries take around 15 seconds. (I have run this test multiple times.)</p>\n\n<pre><code>// Connection pooling.\nusing (var connection = CreateConnection())\n{\n    connection.ConnectionString = ConnectionString;\n    connection.Open();\n</code></pre>\n\n<p>Most samples on the net make use of the 'connect and close' construction above. However, it seems connection pooling is slower than keeping the connection. So the question is...</p>\n\n<p><strong>Q:</strong> Why should I use connection pooling?</p>\n"},{"tags":["php","mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13248866,"title":"In a single MySQL query lookup one column's value in another table","body":"<p>In table <code>f_stock</code> I have a list of all items in an inventory. The integer in the <code>type</code> column refers to the <code>id</code> in table <code>f_type</code>.</p>\n\n<p>I want to output the contents of table <code>f_stock</code> with <code>f_type.id</code> in place of <code>f_stock.type</code>. How is this done?</p>\n\n<p>In the past I have done something along these lines:</p>\n\n<pre><code>$query = \"SELECT * FROM `f_stock`\";\n$result = mysql_query ($query) or die (mysql_error ());\nwhile ($row = mysql_fetch_array ($result, MYSQL_ASSOC)) {\n    $data[] = $row;\n}\nprint_r ($data);\n</code></pre>\n\n<p>To lookup the integer <code>f_stock.type</code> in the <code>f_type.id</code> column I have created a secondary $query/$result inside the <em>while</em> loop.</p>\n\n<p>Table <code>f_stock</code>:</p>\n\n<pre><code>`type` | `size` | `length`\n-------|--------|---------\n   1   |   3    |    12\n   1   |   3    |    16   \n   2   |   3    |    20   \n   2   |   3    |    25   \n   1   |   4    |    12   \n   1   |   4    |    16   \n   3   |   4    |    20   \n</code></pre>\n\n<p>Table <code>f_type</code>:</p>\n\n<pre><code> `id` |  `type` \n------|---------\n   1  | 'Type 1'\n   2  | 'Type 2'\n   3  | 'Type 3'\n   4  | 'Type 4'\n   5  | 'Type 5'\n   6  | 'Type 6'\n   7  | 'Type 7'\n</code></pre>\n"},{"tags":["mysql","database-design","social-networking","rdbms","database-schema"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13249090,"title":"Database Design for Social Networking Accesss Control","body":"<p>I'm building a social network where user can share objects with Public, All Friends, With Specific Friends, With Groups.</p>\n\n<p>What is the best database design to store the access controls.</p>\n\n<p>Update: What i was thinking to have VISIBILITY table with following columns.</p>\n\n<pre><code>   object_id  (the actual object id)\n   object_type ( type of object like link, status, article etc)\n   access_type (group, user, system)\n   access_id   (for group -&gt; group id, for user -&gt; user id, system -&gt; friends, public)\n</code></pre>\n\n<p>But the problem is it is not easy to get the entities that i have access for with this design.</p>\n"},{"tags":["mysql","jdbc","prepared-statement"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13249338,"title":"batch insert fails in java","body":"<p>i have a method which has to insert entries in two tables and the following is my method :</p>\n\n<p>but this method is not puts entry to any of the table and does not insert entries to any of the two table. </p>\n\n<p>what could be the problem, Please help to find it.</p>\n\n<pre><code>public String saveVillageDetails(VillagesViewModel viewmodel, String functionType) {\n    int[] saveOrupdateStatus = null;\n    StringBuffer disctrictQuery = new StringBuffer();\n    String saveOrupdateStatusMessage = \"\";\n    Connection connection = getConnection();\n    PreparedStatement districtPS = null;\n    ResultSet rs = null;\n    if (connection != null) {\n\n    try {\n         connection.setAutoCommit(false);\n         if(functionType.equals(\"add\")){\n            // to insert in villages table\n                disctrictQuery.append(\" INSERT INTO m_villages(districtid,village,creation_date,last_created_by) \");\n                disctrictQuery.append(\" VALUES (?, ?, ?,?) \");\n                districtPS = connection.prepareStatement(disctrictQuery.toString());\n                districtPS.setInt(1, viewmodel.getDistrictid());\n                districtPS.setString(2, viewmodel.getVillage());\n                districtPS.setTimestamp(3, getCurrentDate());\n                districtPS.setInt(4,viewmodel.getUserid());\n                districtPS.addBatch();\n                // to insert in regions table\n                disctrictQuery.append(\" INSERT INTO m_regions(villageid,creation_date,last_created_by) \");\n                disctrictQuery.append(\" VALUES (?, ?, ?) \");\n                districtPS = connection.prepareStatement(disctrictQuery.toString());\n                districtPS.setInt(1, viewmodel.getVillageid());\n                districtPS.setTimestamp(2, getCurrentDate());\n                districtPS.setInt(3,viewmodel.getUserid());\n                districtPS.addBatch();\n\n\n            }else if(functionType.equals(\"edit\")){\n\n                // to update villages table\n                disctrictQuery.append(\"UPDATE m_villages SET districtid=? ,village=? ,updation_date=? ,last_updated_by=? \");\n                disctrictQuery.append(\" WHERE villageid=? \");\n                districtPS = connection.prepareStatement(disctrictQuery.toString());\n                districtPS.setInt(1, viewmodel.getDistrictid());\n                districtPS.setString(2, viewmodel.getVillage());\n                districtPS.setTimestamp(3, getCurrentDate());\n                districtPS.setInt(4,viewmodel.getUserid());\n                districtPS.setInt(5,viewmodel.getVillageid());\n                districtPS.addBatch();\n                // to update regiions table\n                disctrictQuery.append(\"UPDATE m_regions SET villageid=?,updation_date=? ,last_updated_by=? \");\n                disctrictQuery.append(\" WHERE regionid=? \");\n                districtPS = connection.prepareStatement(disctrictQuery.toString());\n                districtPS.setInt(1, viewmodel.getVillageid());\n                districtPS.setTimestamp(2, getCurrentDate());\n                districtPS.setInt(3,viewmodel.getUserid());\n                districtPS.setInt(4,getRegionID(viewmodel.getVillageid()));\n                districtPS.addBatch();\n\n            }\n\n        saveOrupdateStatus = districtPS.executeBatch();\n\n        if (saveOrupdateStatus.length &gt; 0) {\n            if(functionType.equals(\"add\")){\n                 saveOrupdateStatusMessage = \"Village Details Added successfully\";\n            }else if(functionType.equals(\"edit\")){\n                saveOrupdateStatusMessage = \"Village Details Modified successfully\";\n            }\n            connection.commit();\n            connection.setAutoCommit(true);\n        } else {\n             if(functionType.equals(\"add\")){\n                 saveOrupdateStatusMessage = \"Failed to Add Village Details\";\n            }else if(functionType.equals(\"edit\")){\n                saveOrupdateStatusMessage = \"Failded to Modify Village Details\";\n            }\n\n        }\n    } catch (Exception ex) {\n        ex.printStackTrace();\n        //use log to print the exception    ex.printStackTrace();\n    } finally {\n        try {\n            closeConnection(connection, rs, districtPS);\n        } catch (Exception ex) {\n            ex.printStackTrace();\n            //use logger here\n        }\n    }\n}\nreturn saveOrupdateStatusMessage;\n}\n</code></pre>\n\n<p>Exception : </p>\n\n<pre><code>java.sql.BatchUpdateException: No value specified for parameter 4\n    at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:1103)\n    at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:853)\n    at com.secureyes.eswastha.struts.dao.VillagesDAO.saveVillageDetails(VillagesDAO.java:238)\n    at com.secureyes.eswastha.struts.action.VillagesAction.saveVillageDetails(VillagesAction.java:122)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:269)\n    at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170)\n    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:425)\n    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:228)\n    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\n    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)\n    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)\n    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)\n    at java.lang.Thread.run(Thread.java:662)\n</code></pre>\n\n<p>Please help.</p>\n"},{"tags":["mysql"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1525,"score":0,"question_id":3150798,"title":"How can I ignore the difference between upper and lower case when searching with mysql","body":"<p>How can I ignore the difference between upper and lower case when searching with mysql</p>\n"},{"tags":["java","mysql","sql","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13248737,"title":"Java Hibernate constant in sql-query","body":"<p>Below is the original content of a hibernate sql query I have:</p>\n\n<pre><code>&lt;sql-query name=\"countryOfOrigin-limit-country-city-location\"&gt;\n&lt;return alias=\"rb\" class=\"RecentBooking\"/&gt;\n    SELECT \n        bb.reserv_num as {rb.reservNum}, \n        bb.origin as {rb.countryOfOrigin}, \n        bb.pick_up_loc as {rb.locationId}, \n        bb.first_date as {rb.bookingDate}, \n        bb.pick_up_time as {rb.pickUpDate}, \n        bb.drop_off_time as {rb.dropOffDate},  \n        bb.car_price as {rb.carPrice}, \n        bb.discount as {rb.discount}, \n        bb.exchange_rate as {rb.exchangeRate},\n        SUBSTRING(a.internal_class,1,1)as {rb.carClass},\n        a.car_type as {rb.carType}, \n        bb.vehicle_type as {rb.vehicleType}, \n        s.name as {rb.supplier}, \n        vv.country as {rb.country}, \n        vv.city as {rb.city}, \n        vv.location as {rb.location}, \n        bb.cur as {rb.currency}, \n        a.pics as {rb.carImage}\n    FROM (SELECT * FROM b  WHERE first_date &gt; DATE(NOW()-1)AS bb  \n    JOIN a a ON a.id = bb.car_id\n    JOIN d  d ON d.id = bb.pick_up_loc\n    JOIN supplier s ON s.id = d.supplier_id\n    JOIN v_location_trans vv ON vv.location_id = d.location_id\n    AND vv.lang=33\n    AND vv.country = :country\n    AND vv.city = :city\n    AND vv.location = :location\n    AND bb.origin = :countryOfOrigin\n    ORDER BY bb.id DESC\n    LIMIT :limit\n&lt;/sql-query&gt;\n</code></pre>\n\n<p>The sql runs fast enough, but as you might have noticed there is a big, the NOW()-1 should be NOW() - INTERVAL 1 DAY.</p>\n\n<p>I modified the nested select statement as follows:</p>\n\n<pre><code>FROM (SELECT * FROM b WHERE first_date &gt; DATE(NOW() - INTERVAL 1 DAY)) AS bb\n</code></pre>\n\n<p>The fix works fine in terms of results, however the query slows down massively (pretty much almost instant up to a few seconds).</p>\n\n<p>I believe this is because the DATE(NOW() - INTERVAL 1 DAY) is being evaluated a large number of times (we have a very large data set). How would I go about seperating this calculation so that it only occurs once, without having to pass it in from java code like the country, city, limit, etc?</p>\n\n<p>I have very little experience with hibernate or SQL, and I have tried seperating the calculation out into a variable before the select statement, which isnt allowed. I have also tried making small changes to the SQL query but I keep getting runtime errors, presumably due to invalid SQL.</p>\n\n<p>How would I go about doing this?</p>\n\n<p>Thanks.</p>\n"},{"tags":["php","jquery","mysql","css"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":41,"score":-5,"question_id":13249010,"title":"how to do dynamic numbering of tables using jquery css or php","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/13246459/php-mysql-dynamic-table-display-with-numbring\">php mysql dynamic table display with numbring</a>  </p>\n</blockquote>\n\n\n\n<p>i have 10 tables in a page which i populate dynamically from mysql using php.\nand if table have no data it is not displayed.\nnow when the page is loaded i want to give numbering to the displayed tables.\nLet say table  1,3,5,7,10 have data and are displayed.\nnow i want to give numbering. from 1 to 5 as there are 5 tables displayed.</p>\n\n<p>is it possible to make numbering using jquery css or php. </p>\n\n<pre><code>$tbl2= \"SELECT * FROM wp_health_aanvullend_moduliar WHERE health_id=$hid\";\n$rs2 = mysql_query($tbl2);\n$count2 = mysql_num_rows($rs2);\n&lt;?php if($count2 &gt; 0){?&gt;\n\n&lt;table class=\"sub_front_efect\" cellpadding=\"0\" cellspacing=\"0\"&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n  &lt;th colspan=\"100%\" class=\"health_sub_front\"&gt;\"want numbering here\"Aanvullend moduliar&lt;/th&gt;&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n</code></pre>\n\n<p>same kinda code for each table.</p>\n\n<p><img src=\"http://i.stack.imgur.com/lCfPK.png\" alt=\"tables\">   </p>\n"},{"tags":["mysql","drupal","nginx","iptables","database-replication"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13248741,"title":"what port should I open for mysql master-master replication?","body":"<p>I have two servers running php5-fpm and a load balancer running nginx, the three servers share /var/www/drupal using nfs. nfs is working correctly.\nI replicated the two servers' database using mysql master master replication.\neverything was working fine till I added my iptables rules. \nIn my iptables script, I first drop all chains then I accept the ones I want, other than that there are no other drop statements.\nI opened port 3306 for mysql replication like this : (the rule is on both servers )</p>\n\n<pre><code>iptables -A INPUT  -p tcp -s $ip_Of_Other_Server  --dport  3306 -j ACCEPT\niptables -A OUTPUT -p tcp -d $ip_Of_Other_Server  --sport  3306 -j ACCEPT\n</code></pre>\n\n<p>The problem is, when I run both servers and I try to log in using my account on drupal it doesn't log in although I find a successful log in attempt in drupal logs.\nWhen I run only one server of them I can log in normally.\nwhen I allow everything in my iptables rules it works normally.\nI believe there's some port I need to open using iptables for the replication to work correctly but I can't find which one to open.</p>\n"},{"tags":["mysql","database-design","one-to-one"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13235053,"title":"One-to-many and one-to-one relationship mixed, how to?","body":"<p>My question might be dumb since I think it's a very common design issue, and I guess there is a simple and usual solution to it:</p>\n\n<ul>\n<li>I have a table Producer and a table Movie</li>\n<li>ONE Producer has produced MANY Movies</li>\n<li>ONE Producer has ONE favorite Movie among the ones he has produced</li>\n</ul>\n\n<p>How do I implement this in MySQL?</p>\n\n<ol>\n<li>just one ONE-TO-MANY relation between Producer and Movie, plus a 'favorite' boolean attribute in the Movie table</li>\n<li>one ONE-TO-MANY relation to represent the 'has produced' relation, and a ONE-TO-ONE relation to represent the 'is favorite' relation</li>\n</ol>\n\n<p>The first solution seems more natural to me, but when the producer wants to change his favorite movie, I guess the second solution is more efficient. As well as it should be more efficient to find a producer's favorite movie with solution #2.</p>\n\n<p>What am I missing? Is there a best solution? If not in which case should I use solution #1 and solution #2?</p>\n\n<p>(Of course, my problem is a bit more complex thant the example above...)</p>\n"},{"tags":["mysql","linux","phpmyadmin"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":16,"score":-2,"question_id":13248916,"title":"Directadmin and phpmyadmin","body":"<p>I have a question if my direct admin are deleted\nwhat will happend to my mysql can I restore all my data?\nhow do I do that?</p>\n"},{"tags":["php","mysql","ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13244528,"title":"display table columns with for loop based on user input","body":"<p>i am working on a college software and am stuck at a crucial point. i am running a query which will return studentid, names and rollno(s) and i need to display table columns with text boxes for assignment marks entry based on the teacher's input of number of assignments for a term. For instance, if user input is 3, i want to display 3 columns namely, Assignment 1, Assignment  2, Assignment 3 along with student name and rollno. the table rows will then have all students names with text boxes for entering marks for all three assignments. Also, i am displaying this table through ajax request which means php will have to create the output on the fly and display to user. I am assuming a nested loop will have to be used for this but am not sure how. Columns have to be created based on user input and rows should be based on mysql query result.</p>\n\n<p>My code is:</p>\n\n<pre><code>$userinput = 3; // hypothetical\n$q6 = mysql_query(\"select * from students\");\nwhile($row = mysql_fetch_array($q6)){\n$data[] = $row; \n}\n\necho \"&lt;table class='reglist' border='1' width='100%'&gt;\";\n// start i loop\nfor($i=1;$i&lt;=$userinput;$i++){\necho \"&lt;tr&gt;\n&lt;th style='font-size:14px;'&gt;S.No&lt;/th&gt;\n&lt;th style='font-size:14px;'&gt;Roll No&lt;/th&gt;\n&lt;th style='font-size:14px;'&gt;Name&lt;/th&gt;\n&lt;th style='font-size:14px;width:50px;'&gt;Assignment 1&lt;/th&gt; // THESE COLUMNS SHUD BE BASED         ON THE USER INPUT.  \n&lt;/tr&gt;\"; }\n</code></pre>\n\n<p>I am stuck here as to how to create table heads based on user input and then display rows according to the number of students returned by mysql.</p>\n\n<p>Please help.</p>\n"},{"tags":["mysql","ruby-on-rails","geospatial"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13248773,"title":"Rails spatial_adapter, mysql failure","body":"<p>I got following failure when starting up my local server.</p>\n\n<p>module:ConnectionAdapters': uninitialized constant ActiveRecord::ConnectionAdapters::Mysql2Column (NameError)</p>\n\n<p>Following gems are installed:</p>\n\n<pre><code>GeoRuby 1.3.4\nactiverecord 3.2.1\nspatial_adapter 1.2.0\n</code></pre>\n\n<p>I am using MySQL Server 5.5.28 and InnoDB.</p>\n\n<p>Shouldnt it be working with InnoDB already?</p>\n"},{"tags":["php","mysql","joomla","virtuemart"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":13176616,"title":"how to build a sql select query in joomla 2.5?","body":"<p>im new to joomla and im trying to build a component which is an addon for viruemart to allow users to access invoice PDF's in their user area. To do this i need to write a select query which retreives this information from the database for me.</p>\n\n<p>I have been messing around with it and came up with the following, but it doesnt seem to do anything:</p>\n\n<pre><code>$id =JFactory::getUser()-&gt;id;\n$db =&amp; JFactory::getDBO();\n$sql = \"SELECT * FROM jos_vm_orders\"; \n$db-&gt;setQuery($sql);\n$options = $db-&gt;loadObjectList();\nreturn $options; \n</code></pre>\n\n<p>Am i missing something?</p>\n"},{"tags":["mysql","architecture","multitenancy"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13248618,"title":"Multitenancy system with mysql","body":"<h2>Staring point</h2>\n\n<p>I have an existing application built on an ORM (Doctrine 2) with mysql as dbms. I'm currently evaluating the possibilty to transparently add multitenancy functionality to the data layer (mysql). The Problem now is, that I want to separate some tables/entities and to share some. Because my tenants would like to share some information and to use features like global user management for example. I'm leaning towards to a solution where I have a master database with all tables and a database for each tenanat which contains the same data, but in form of either a table or a view. A table represents private data and a view to the master database represents shared data. During development I can make the decision to wheter make the data shared or private by creating a view or a table. The tenants application always connects to it's own database, because the database is always complete (consisting of tables and views).</p>\n\n<p>I want the dbms to do the heavy lifting of <strong>ACID</strong> and abstraction. Mysql supports inserts/updates on views (as long as they contain the primary key, which is the case here) and cross schema foreign keys. </p>\n\n<p>Another possible solution would be to use tables instead of views for the shared data and use trigger to lock the master tables and transfer the data.</p>\n\n<h2>My Questions now are:</h2>\n\n<p>Am I missing something obvious which makes my architecture error prone/insecure/bad/whatever?</p>\n\n<p>Is MySQL missing some strictly needed features for this solution (e.g. cross db locks, cross db trigger etc.)?</p>\n\n<p>Do you have a better solution for my problem?</p>\n\n<p>cheers</p>\n"},{"tags":["mysql","database"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":35,"score":-4,"question_id":13248419,"title":"Want to store 3:00 AM in MySQL database","body":"<p>I know its a childish question but I m not able to fix it . plz help me out of this.</p>\n\n<p>I want to store </p>\n\n<pre><code>3:00 AM\n</code></pre>\n\n<p>in my database. </p>\n\n<p>I m taking TIME type in database . Thanks In Advance.</p>\n"},{"tags":["python","mysql","mysql-python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13247957,"title":"MySQL did not give an error, but none of the rows got filled","body":"<p>I tried to fill a table in a database using MySQLdb. It did not give any errors, and once gave the warning </p>\n\n<pre><code>main.py:23: Warning: Data truncated for column 'other_id' at row 1\n  cur.execute(\"INSERT INTO map VALUES(%s,%s)\",(str(info[0]).replace('\\n',''), str(info[2].replace('\\n','').replace(\"'\",\"\"))))\n</code></pre>\n\n<p>so I thought it was working fine. However, when it was finished and I did a row count it turned out that nothing was added. Why was the data not added to the database? The code is below</p>\n\n<pre><code>def fillDatabase():\n    db = MySQLdb.connect(host=\"127.0.0.1\", \n                         user=\"root\", \n                         passwd=\"\", \n                         db=\"uniprot_map\") \n\n    cur = db.cursor() \n    conversion_file = open('idmapping.dat')\n    for line in conversion_file:\n        info = line.split('\\t')\n        cur.execute(\"INSERT INTO map VALUES(%s,%s)\",(str(info[0]).replace('\\n',''), str(info[2].replace('\\n','').replace(\"'\",\"\"))))\n\ndef test():\n    db = MySQLdb.connect(host=\"127.0.0.1\", \n                         user=\"root\", \n                         passwd=\"\", \n                         db=\"uniprot_map\") \n\n    cur = db.cursor() \n    cur.execute(\"SELECT COUNT(*) FROM map\")\n    rows = cur.fetchall()\n\n    for row in rows:\n        print row\n\ndef main():\n    fillDatabase()\n    test()\n</code></pre>\n"},{"tags":["mysql","database","query"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13247243,"title":"Regarding query for db2","body":"<p>I have the query, I have the below relationships among the following tables </p>\n\n<pre><code>select * from PRODGP_STRUCTURE\nselect * from PRODGP_STR_LINK\nselect * from PRODUCT_GROUP\nselect * from PROD_PGRP_LINK\nselect * from PRODUCT\n</code></pre>\n\n<p>the relationship is ...</p>\n\n<pre><code>select pstr.PSTR_NAME, PG.PRGP_NAME, PRD.PROD_NAME\nfrom prodgp_structure pstr\nJOIN PRODGP_STR_LINK pgstrlnk\n  ON pgstrlnk.PSTR_ID = pstr.PSTR_ID  \nJOIN PRODUCT_GROUP pg \n  ON pgstrlnk.PRGP_CHILD_ID = PG.PRGP_ID\nJOIN PROD_PGRP_LINK prdprdgp\n  ON prdprdgp.PRGP_ID = pg.PRGP_ID\nJOIN product prd\n  ON prdprdgp.PROD_ID = prd.PROD_ID;\n</code></pre>\n\n<p>I have come up to the following query, </p>\n\n<pre><code>select * from PRODGP_STRUCTURE where pstr_id in \n(select pstr_id from PRODGP_STR_LINK where PRGP_CHILD_ID  in\n(select  prgp_id from PRODUCT_GROUP where PRGP_ID in ( select  PRGP_ID from PROD_PGRP_LINK where PROD_ID in ( select PROD_ID from product where PROD_ID=2))))\n</code></pre>\n\n<p>Please let e know is there any other way to write this query..!!</p>\n"},{"tags":["mysql","sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13242892,"title":"SQL query using group by","body":"<p>I have a table called \"EMP\" and two collumns one called \"deptno\" and the other called \"job\". I need a query to find out how many people there are in each type of job within each department.</p>\n\n<p>I know I need to use count() and group by but im not sure how to do this, any help would be appreciated.</p>\n\n<p>Thanks James. </p>\n"},{"tags":["php","android","mysql","json"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13245771,"title":"How to validate the user login credentials in android using PHP, MySql with the help of json","body":"<p>I am new to android development. I want to do the login verification, using php mysql and json. </p>\n\n<p>I am only taking care of the PHP, MySql and json part. </p>\n\n<p>If the user enters the username and password in android app, then it needs to check the user table using PHP and Mysql and it needs to send only the status code like 1 or 0 using json. </p>\n\n<p>If username and password matches then the status = 1 needs to send to the android app coding,  else 0. </p>\n\n<p>Status checking process need to be done in Android Coding part. </p>\n\n<p>If status = 1 and I need to redirect to another window in android app .</p>\n\n<p>I have seen lots of tuts and but nothing has helped me.  </p>\n\n<p>So, please kindly help me how to send the <strong>status</strong> from <strong>PHP to android app</strong> and how to <strong>get that status and validate in android</strong>.</p>\n"},{"tags":["mysql","vb.net","crystal-reports","odbc","vb.net-2010"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13243576,"title":"how to change connection string of crystall report that i already use wizard connection in crystal report designer with drag n drop field binding","body":"<p>anyone could help me to programatically change only connection string of crystal report. I already designed a report using basic drag n drop method from report desinger wizard with already bind with fields with the right panel tool that has already connected using ODBC wizard connecting wizard from there..</p>\n\n<p>all i want is i can code that a connection string can be change but the fields binding are same. this scenario may use in my system that can easily be move to other computer and connect to database with the same database.. it's like dynamic connection string but still the drag n drop bindings still on connected with the new connection string.. same database..</p>\n\n<p>I use MySQL Database , VB.NET 2010, Crystal Report for VB.Net 2010</p>\n\n<p>Thank You..</p>\n"},{"tags":["mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13246598,"title":"Join two tables and group by xyz","body":"<p>I have two tables</p>\n\n<p>Table 1:</p>\n\n<pre><code>    ref       status\n\n    abc     1\n    abc     1\n    abc     2\n    abc     3\n    abc     5(not in Table2)\n    abc     5(not in Table2)\n</code></pre>\n\n<p>Table 2:</p>\n\n<pre><code>    ref          status\n\n    abc     1\n    abc     1\n    abc     2\n    abc     3\n    abc             4(not in Table1)\n    abc     4(not in Table1)\n</code></pre>\n\n<p>I want to join these two tables and perform a grouping so that the final result looks like this:</p>\n\n<p>Resultant Table:\n        ref       status</p>\n\n<pre><code>    abc     1\n    abc     2\n    abc     3\n    abc     4\n    abc     5\n</code></pre>\n\n<p>I have tried this</p>\n\n<pre><code>    SELECT DISTINCT Table1.ref, Table1.status, Table2.ref, Table2.status\n    FROM Table1, Table2\n    GROUP BY Table1.ref, Table1.status, Table2.ref, Table2.status;\n</code></pre>\n"},{"tags":["mysql","jdbc","prepared-statement"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13248086,"title":"how to make the batch delete successfull in java","body":"<p>i have a method which has to delete entries in two tables and the following is my method :</p>\n\n<p>but this method deletes entry from second table and does not delete entries from second table. </p>\n\n<p>what could be the problem, Please help to find it.</p>\n\n<pre><code> public String deleteVillage(int villageid) {\n        int[] deleteStatus ;\n        StringBuffer villageDeleteQuery = new StringBuffer();\n        StringBuffer regionDeleteQuery = new StringBuffer();\n        String saveOrupdateStatusMessage = \"\";\n        Connection connection = getConnection();\n        PreparedStatement villagePS = null;\n        ResultSet rs = null;\n        if (connection != null) {\n            try {\n                connection.setAutoCommit(false);\n                villageDeleteQuery.append(\" DELETE FROM m_villages WHERE villageid=\"+villageid);\n                villagePS = connection.prepareStatement(villageDeleteQuery.toString());\n                villagePS.addBatch(villageDeleteQuery.toString());\n\n                regionDeleteQuery.append(\" DELETE FROM m_regions where villageid=\"+villageid);\n                villagePS = connection.prepareStatement(regionDeleteQuery.toString());\n                villagePS.addBatch(regionDeleteQuery.toString());\n\n                deleteStatus = villagePS.executeBatch();\n                connection.commit();\n               connection.setAutoCommit(true);\n                if (deleteStatus.length &gt; 0) {\n                         saveOrupdateStatusMessage = \"Village Details Deleted successfully\";\n                } else {\n                         saveOrupdateStatusMessage = \"Failed to Delete Village Details\";\n                }\n            } catch (Exception ex) {\n                ex.printStackTrace();\n                //use log to print the exception    ex.printStackTrace();\n            } finally {\n                try {\n                    closeConnection(connection, rs, villagePS);\n                } catch (Exception ex) {\n                    ex.printStackTrace();\n                    //use logger here\n                }\n            }\n        }\n        return saveOrupdateStatusMessage;\n    } \n</code></pre>\n\n<p>Regards</p>\n"},{"tags":["mysql","innodb"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13247814,"title":"InnoDB Error in Mysql","body":"<p>Last night the server was upgraded from a MySQL server with InnoDB Cpanel have much of a problem when MySQL server will shut down!\nBecause many of the sites on vps in their database to InnoDB Engine Table Does not have put up their site and say</p>\n\n<pre><code>error: Unknown table engine 'InnoDB' \n</code></pre>\n\n<p>Error</p>\n\n<p>It will enable the mysql server but it did not put the InnoDB!\nThe mysql command </p>\n\n<pre><code>show engines; \n</code></pre>\n\n<p>I noticed the following result which is not InnoDB Result</p>\n\n<pre><code>mysql&gt; show engines;\n\n | Engine | Support | Comment | Transactions | XA | Savepoints |\n\n | MyISAM | DEFAULT | Default engine as of MySQL 3.23 with great performance | NO | NO | NO |\n | MRG_MYISAM | YES | Collection of identical MyISAM tables | NO | NO | NO |\n | BLACKHOLE | YES | / dev / null storage engine (anything you write to it disappears) | NO | NO | NO |\n | CSV | YES | CSV storage engine | NO | NO | NO |\n | MEMORY | YES | Hash based, stored in memory, useful for temporary tables | NO | NO | NO |\n | FEDERATED | NO | Federated MySQL storage engine | NULL | NULL | NULL |\n | ARCHIVE | YES | Archive storage engine | NO | NO | NO |\n\n 7 rows in set (0.00 sec) \n</code></pre>\n\n<p>Log into mysql server gives an error ... </p>\n\n<pre><code>121105 18:26:50 mysqld_safe Starting mysqld daemon with databases from / var / lib / mysql\n 121105 18:26:50 [Note] Plugin 'FEDERATED' is disabled.\n 121105 18:26:50 InnoDB: Initializing buffer pool, size = 8.0M\n 121105 18:26:50 InnoDB: Completed initialization of buffer pool\n InnoDB: Error: log file ./ib_logfile0 is of different size 0 268435456 bytes\n InnoDB: than specified in the. Cnf file 0 536870912 bytes!\n 121105 18:26:50 [ERROR] Plugin 'InnoDB' init function returned error.\n 121105 18:26:50 [ERROR] Plugin 'InnoDB' registration as a STORAGE ENGINE failed.\n 121105 18:26:50 [Note] Event Scheduler: Loaded 0 events\n 121105 18:26:50 [Note] / usr / sbin / mysqld: ready for connections.\n Version: '5 .1.65-cll 'socket:' / var / lib / mysql / mysql.sock 'port: 3306 MySQL Community Server (GPL)\n</code></pre>\n\n<p>in my.cnf innodb settings for both are: </p>\n\n<pre><code> innodb_fast_shutdown = 0\n innodb_log_buffer_size = 8M\n innodb_log_file_size = 512M\n</code></pre>\n\n<p>Thanks, plz help me to solve the problem.</p>\n"},{"tags":["mysql","last-insert-id"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13247972,"title":"Is AUTO_INCREMENT implemented properly in my case?","body":"<p>This question is bit related to my <a href=\"http://stackoverflow.com/questions/8923366/getting-last-record-from-mysql\"><strong>old question, Getting last record from mysql</strong></a>.</p>\n\n<p>Per those answers, I learned that <strong><em>SELECT is not guaranteed to return rows in any specific order (without using an ORDER BY clause, of course).</em></strong></p>\n\n<p>I followed the @YaK answer and added <code>AUTO_INCREMENT</code> in table using below commands.</p>\n\n<pre><code>ALTER TABLE maxID ADD sequence INT DEFAULT NULL;\nALTER TABLE maxID ADD INDEX(sequence);\nALTER TABLE maxID MODIFY sequence INT AUTO_INCREMENT;\n</code></pre>\n\n<p>However today I got one question.</p>\n\n<p><strong>When SELECT is not guaranteed to return rows in any specific order (without using an ORDER BY clause, of course), THEN while altering table, AUTO_INCREMENT would be properly implemented?*</strong></p>\n"},{"tags":["php","mysql","encoding"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13247683,"title":"PHP and MySQL encodings and strange signs","body":"<p>I am receiving data from website in ISO-8859-2 from a website and than transform it to UTF-8 (also used as encoding in MySQL) and do some modifications and store data... </p>\n\n<p>When I print data everything seems to be fine... when I store data to my table and print it from there everything is great... but when I compare newly received data and compare to those stored in mysql I always get no match although data is the same. So I checked DB .. when I open data in DB i see that there is a sign at the end or in the middle... Example: Ä, ‡, etc.</p>\n\n<p>Any idea?</p>\n\n<p>Update: I use InnoDB storage engine to enable transactions.. and exact DB encoding is UTF8_GENERAL_CI</p>\n"},{"tags":["mysql","lucene","elasticsearch"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13247841,"title":"Push table data from mysql to elasticsearch","body":"<p>I am looking for a way to <code>push</code> data from mysql table to elasticsearch in realtime, i.e, the data gets indexed into elasticsearch as soon as any new data is inserted/updated/deleted in the mysql table. Currently I am using <a href=\"https://github.com/jprante/elasticsearch-river-jdbc\" rel=\"nofollow\">jdbc river by jprante</a>, but it has some issues, like: it reindexes the entire data specified in the 'sql query' in the subsequent periodical runs instead of adding 'only' fresh data, and it is 'polling'. I tried installing <a href=\"http://code.google.com/p/mysql-udf-http/\" rel=\"nofollow\">mysql-udf-http</a>, but in <a href=\"http://stackoverflow.com/questions/13245976/mysql-udf-http-installation-issue\">vain</a>.</p>\n"},{"tags":["java","mysql","tomcat","socketexception"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":2569,"score":0,"question_id":1956816,"title":"ClientAbortException: java.net.SocketException: Connection reset by peer: socket write error","body":"<p>I am using MySQL 5.1 and my connector version is mysql-connector-java-5.1.7. I am getting following exception frequently. What is the issue?</p>\n\n<pre><code>Dec 24, 2009 10:29:20 AM org.apache.catalina.core.StandardHostValve status\nWARNING: Exception Processing ErrorPage[errorCode=404, location=/error.jsp]\nClientAbortException:  java.net.SocketException: Connection reset by peer: socket write error\n    at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:327)\n    at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:293)\n    at org.apache.catalina.connector.Response.flushBuffer(Response.java:537)\n    at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:286)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:136)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)\n    at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)\n    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)\n    at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)\n    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: java.net.SocketException: Connection reset by peer: socket write error\n    at java.net.SocketOutputStream.socketWrite0(Native Method)\n    at java.net.SocketOutputStream.socketWrite(Unknown Source)\n    at java.net.SocketOutputStream.write(Unknown Source)\n    at org.apache.coyote.http11.InternalOutputBuffer.realWriteBytes(InternalOutputBuffer.java:746)\n    at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:433)\n    at org.apache.coyote.http11.InternalOutputBuffer.flush(InternalOutputBuffer.java:304)\n    at org.apache.coyote.http11.Http11Processor.action(Http11Processor.java:991)\n    at org.apache.coyote.Response.action(Response.java:182)\n    at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:322)\n    ... 13 more\n</code></pre>\n"},{"tags":["mysql","limit","rollup"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13204320,"title":"rollup with limit?","body":"<p>I'm having trouble with one of my MySQL queries: </p>\n\n<pre><code>SELECT id,Portfolio,Agency,Program,Objective,billion1,value11_12,\n    Proportion1,billion,value12_13,Percentage,Difference,\n    Diff_Percent,PIT,TOS,Actual_PIT,Actual_TOS,SUM(billion),SUM(Percentage),\n    SUM(PIT),SUM(TOS),SUM(Actual_PIT),SUM(Actual_TOS)\nFROM budget_table\nGROUP BY 'sum(Billion)'\nWITH ROLLUP\nLIMIT 0,100\n</code></pre>\n\n<p>The query works but I can't get the limit to work with the rollup. You can see the results of the query at <a href=\"http://budgetaus.net/results.php?Page1=001-100&amp;submit=Show#All\" rel=\"nofollow\">BudgetAus</a></p>\n\n<p>It is totalling all results rather than the first 100 which is what I am now trying to achieve. I have also tried just using LIMIT 100 but can't get anything to work. I tried using EXPLAIN (for the first time) in MySQL on the database and it said that the query executed although I didn't see any results- but as I've never used it before I wasn't sure what to look for. I'm new to programming and use WAMP rather than a CLI.</p>\n\n<p>I'm also not sure whether to start my limits from 0 or 1?</p>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13247416,"title":"Transferring contents from one page to another in php","body":"<p>I am creating a php script. What I have to do is to send contents from one page to another. </p>\n\n<p>For example :</p>\n\n<p>An employee applies for leave(from and to date). This leave details should be sent to his manager page for his approval (with from and to dates). If person 'A' is the manger and person 'B' is the employee then B's leave details should be sent only to person A page and not to all the managers. How to achieve this.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["php","mysql","pdo","mysqli","sql-injection"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":47,"score":3,"question_id":13247440,"title":"Is is safe to use mysql_* functions if PDO and mysqli is not available?","body":"<p>I have a website hosted on a shared hosting.\nThey have php 5.2.13 installed.</p>\n\n<p>I know the vulnerabilities of SQL Injection and I wan't to prevent it.</p>\n\n<p>So I want to use PDO or mysqli for preventing it.</p>\n\n<p>But the problem when I used <code>phpinfo();</code> to view the hosting environment php setup info,<br>\nI found that there was no mysql driver for PDO and there was no support for mysqli in it.</p>\n\n<p>So I wanted to know whether it will be safe to use that old mysql_* functions( along with \nfunctions like <code>mysql_real_escape_string</code>).</p>\n\n<p>I looked at this one on SO but it wasn't much helpful to me.\n<a href=\"http://stackoverflow.com/questions/11089862/prepared-statements-possible-when-mysqli-and-pdo-are-not-available\">Prepared statements possible when mysqli and PDO are not available?</a> </p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I forgot to mention that most of the queries will be simple. There are no forms used so no user input will be used to make a query. All the queries will be hard coded with necessary parameters and they will not be changed once set.</p>\n"},{"tags":["mysql","asp.net-mvc","authentication","asp.net-membership"],"answer_count":4,"favorite_count":7,"up_vote_count":9,"down_vote_count":1,"view_count":3370,"score":8,"question_id":2038993,"title":"ASP.NET Membership/Role providers for MySQL?","body":"<p>I am not at all familiar with ASP.NET membership/roles.  This is my first time using it, and my first time trying ASP.NET MVC.  When I create my first project for MVC, it gives me a lovely template to create an account.  I was excited to see that I did not have to do this manually.  However, it failed because it cannot connect to SQL Server.  I do not have SQL Server, I have MySQL.  Is there any easy way I can get this system to use MySQL instead, or will I have to create my own authentication? </p>\n"},{"tags":["php","mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13247257,"title":"storing time to a db and comparing with current time","body":"<p>i have a simple question, that just needs verification, it's about how time is stored in mysql, here is how i store it:</p>\n\n<pre><code>  if(isset($_SESSION['user']))\n{\n$u_id=$_SESSION['user'];\n//insert current time to db, i set the type of time to TIME \n$query=\"INSERT INTO time(id,u_id,time) VALUES('NULL','\".$u_id.\"',CURTIME())\";\nmysql_query($query);\n}\n</code></pre>\n\n<p>that is how i store it, now i would also need to compare it to a value, later on:</p>\n\n<pre><code> //set current time\n$curr_time=time();\n//set maximum time to 5min\n$max=300; \n//get previous time from db\n$query=\"SELECT * FROM time\";\n$result=mysql_query($query);\n$row=mysql_fetch_array($result); \n$prev_time=$row['time'];\n//get difference in time\n$diff=$curr_time-$prev_time;\n//if max time is surpassed\nif($diff&gt;$max)\n{\n  echo \"maximum time surpassed!\";\n\n    }  \n</code></pre>\n\n<p>that's the simple code, first of all, is the syntax for inserting the time to the table okay(the CURTIME() thing), also is the comparison fine, will the result stored in $diff yield seconds?thank you, and sorry if you think this question is a waste of time.  </p>\n"},{"tags":["mysql","triggers"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13134871,"title":"Fetching data from another table not working mysql trigger","body":"<p>I have a trigger like this</p>\n\n<pre><code> CREATE\n TRIGGER `hrm_to_odm_user` AFTER INSERT\n ON `ohrm_user`\n FOR EACH ROW BEGIN\n  DECLARE _dep_id INTEGER;\n        SELECT eeo_cat_code INTO _dep_id FROM hs_hr_employee WHERE emp_number = NEW.id;\n  INSERT INTO zodm_user (id, username, password, department) VALUES (NEW.id, NEW.user_name, NEW.user_password, _dep_id);\n    END\n</code></pre>\n\n<p>After inserting data to ohrm_user i fire the trigger to insert values to zodm_user</p>\n\n<p>It works fine for everything else other than this field _dep_id which i select from another table named hs_hr_employee</p>\n\n<p>I have gone thru this post </p>\n\n<p><a href=\"http://stackoverflow.com/questions/6048549/mysql-trigger-update-with-select-from-another-table\">MySQL Trigger Update with select from another table</a></p>\n\n<p>but it is not working for me</p>\n\n<p>Thanks</p>\n"},{"tags":["mysql","blob","tcl"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13245589,"title":"BLOB with TCL SCRIPTING","body":"<p>I want to upload the data in BLOB datatype in MySQL database by the help of TCL SCRIPTING \n What are the ways to do that ...I have been trying hard from last 4-5 days by converting text data into binary format by using <code>binary format formatString ?arg arg ...?</code> of TCL,but still it does not getting reflected on mysql database.... ,database fields have been keep coming blank.Please Correct me if I am wrong....&amp; tell me the correct procedure.</p>\n\n<p>I am using INNODB engine of mysql</p>\n"},{"tags":["mysql","sql"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13246326,"title":"sql query in where condition","body":"<p>Is it good if i write query like this:- (see query in where condition)</p>\n\n<pre><code>SELECT distinct(id) \"idea_id\" \nFROM ideas \nWHERE deleted_by_user = 0 AND moderation_flag = 1 AND \nuser_id in (select id \n            from users \n            where confirm like \"yes\") \nORDER BY time_of_creation DESC\n</code></pre>\n\n<p>let me know if there is some issue in this query :\nthanx in advance..</p>\n"},{"tags":["mysql","subquery","limit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13237891,"title":"The LIMIT clause in MySql doesn't seem to work with an IN() subquery","body":"<p>Suppose, I have an SQL statement like the following.</p>\n\n<pre><code>SELECT country_id, country_name \nFROM country \nWHERE country_id \nIN(SELECT country_id FROM state \n   WHERE LENGTH(state_name)&gt;=5 \n   ORDER BY LENGTH(state_name) DESC);\n</code></pre>\n\n<p>It fetches all the countries from the <code>country</code> table whose corresponding state names in the <code>state</code> table are longer than 5 or more characters using a subquery as specified.</p>\n\n<p>I want to retrieve only those countries whose corresponding <strong>first 5 states</strong> in the <code>state</code> table have 5 or more characters in length after sorting them in the descending order.</p>\n\n<p>In this case, the <code>LIMIT</code> clause with the subquery doesn't seem to work and the following query fails to work.</p>\n\n<pre><code>SELECT country_id, country_name \nFROM country \nWHERE country_id \nIN(SELECT country_id FROM state \n  WHERE LENGTH(state_name)&gt;=5 \n  ORDER BY LENGTH(state_name) DESC \n  LIMIT 5); \n</code></pre>\n\n<p>The <code>LIMIT</code> clause used with the subquery causes the error specified as follows.</p>\n\n<blockquote>\n  <p>This version of MySQL doesn't yet support 'LIMIT &amp; IN/ALL/ANY/SOME\n  subquery'</p>\n</blockquote>\n\n<p>I'm using the MySql version 5.1.48</p>\n\n<p>Is there a way to get around this situation?</p>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13247059,"title":"PHP email issue","body":"<p>I've a HTML signup form with php. After a successfully submit it sends a confirmation email to the user email address.</p>\n\n<p>Well, when user see his/her email it's shown as: </p>\n\n<pre><code>Yoursite.comr@mediaplan.ovh.net\n</code></pre>\n\n<p>But I didn't  add the <em>@mediaplan.ovh.net</em> part to the email address. Why it's showing in this address. <em>@mediaplan.ovh.net</em>? and how do i remove it?</p>\n\n<p><strong>php email code:</strong></p>\n\n<pre><code>$to = \"$email\";                     \n$subject = \"Signup | Verification\";\n$message = \"Congratulation $f_name $l_name you have been successfully registered. \nPlease click the link to active your account.\\r\\n\";\n$message .= \"http://www.maaks.fr/hotel/verify.php?email=$email&amp;hash=$hash\\r\\n\";\n\n$from = \"Yoursite.com\";\n$headers = \"MIME-Version: 1.0\\r\\n\";\n$headers .= \"Content-rype: text/html; charset=iso-8859-1\\r\\n\";\n$headers .= \"Content-Transfer-Encoding; 7bit\\r\\n\";\n$headers = \"From:\" . $from . \"r\\n\";\n\n$mailsent = mail($to,$subject,$message,$headers); \n</code></pre>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":4,"view_count":31,"score":-3,"question_id":13245640,"title":"PHP: strtotime does not shows correct value","body":"<p>from mysql i got <code>2012-1105-05 12:39:1</code> but if i used <code>date('n-Y', strtotime(2012-1105-05 12:39:1));</code> it shows <code>1-1970</code></p>\n\n<p>any idea what's problem</p>\n"},{"tags":["java","mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13246606,"title":"SQL query to select tablename","body":"<p>I want to  get all database table names that ends with _tbl like xyz_tbl, pqr_tbl,etc..\nin mysql using java.pls help me.. currently my query retreives all tablename but i jst want table names that ends with _tbl.\nMy code is...</p>\n\n<pre><code>public List selectTable() {\n    List tableNameList= new ArrayList();\n\n    try {\n        DatabaseMetaData dbm = c.conn.getMetaData();\n        String[] types = {\"TABLE\"};\n        c.rs = dbm.getTables(null, null, \"%\", types);\n        while (c.rs.next()) {\n            tableNameList.add(c.rs.getString(\"TABLE_NAME\"));\n        }            \n    } catch(Exception e) {\n        System.out.println(e.toString());              \n    }\n    return tableNameList;\n}\n</code></pre>\n"},{"tags":["mysql","flex","blazeds","amf","remoteobject"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13230667,"title":"Flex amfChannel Remote Object connection fail on large Database Insert","body":"<p>I have a Flex AIR application that call a BlazeDS service passing various parameters and a list of strings.</p>\n\n<p>Using this list, the server add each line (pictures name) to a specified table and after that do some other checks..<br>\nI got a problem during the first phase (adding rows to database).<br>\nIf there are a lots of rows the connection terminate returning an error:  </p>\n\n<p><strong>FaultCode:</strong> Channel.Call.Failed<br>\n<strong>FaultDetails:</strong> NetConnection.Call.Failed: HTTP: Failed  </p>\n\n<p>After the Call.Failer error, checking the status of mysql/blazeds, they are both good and java continue to add the rows to database..\nBut obviously that's not good enought...</p>\n\n<p>Here the code..</p>\n\n<p><strong>FLEX</strong></p>\n\n<pre><code>resetRo();          \nvar cs:ChannelSet = new ChannelSet();\nvar customChannel:Channel = new AMFChannel(\"my-amf\", Config.amfChannel);\ncs.addChannel(customChannel);\nro.channelSet = cs;                 \nro.addEventListener(ResultEvent.RESULT,function(e:ResultEvent):void{                \n  // do some stuff\n});                     \nro.requestTimeout = 600;\nro.addEventListener(FaultEvent.FAULT,function(e:FaultEvent):void{\n  // do some error stuff\n});\nro.getLista(Config.serverpassword, _listaPictures, Config.deviceID, Config.isMobile);\n</code></pre>\n\n<p><strong>JAVA</strong></p>\n\n<pre><code>/*\n* RemoteObject call this method\n*/\npublic Wrapper getLista(String serverpassword, String[] arrNewFoto, \n                        String DEV_ID, Boolean isMobile)\n{\n    if (!serverpassword.equals(Config.___serverpassword))\n        return null;\n    if (DEV_ID == null || DEV_ID == \"\" ||\n       DEV_ID.replaceAll(\" \", \"\").length() == 0 || arrNewFoto == null)\n        return null;\n\n    Wrapper w = new Wrapper();      \n    w.getListaFotoDatabase(arrNewFoto, DEV_ID, isMobile);\n    return w;\n}\n\nclass Wrapper\n{\n\n  public ArrayList&lt;String&gt; listaFotoRicevere = new ArrayList&lt;String&gt;();\n  public ArrayList&lt;String&gt; listaFotoInviare = new ArrayList&lt;String&gt;();\n\n    public void getListaFotoDatabase(String[] arrNewFoto, \n                                     String DEV_ID, Boolean isMobile)\n    {\n        if (DEV_ID == null || DEV_ID.length() == 0 || \n                DEV_ID.replaceAll(\" \", \"\").length() == 0)\n        {\n            return;\n        }\n\n        addAllPhotosToDB(arrNewFoto, DEV_ID); // add all rows to database   \n        this.listaFotoInviare = getFotoInviare(DEV_ID);\n        this.listaFotoRicevere = new ArrayList&lt;String&gt;();\n        if (!isMobile)          \n            this.listaFotoRicevere = getFotoRicevere(DEV_ID);\n    }\n    // Add all the rows to database, open connection only 1 times\n    private void addAllPhotosToDB(String[] arrNewFoto, String DEV_ID)\n    {\n        Connection c = new DB().dbConnect(null);\n        if (c != null)\n        {\n                    //even after flex error the for continue correctly until the end...\n            for (int i = 0 ; i &lt; arrNewFoto.length ; i++)\n            {               \n                addPhotoToDB(c, DEV_ID, arrNewFoto[i]);\n            }\n            try{\n                DB.closeConnection(c);              \n            }catch(SQLException e){}\n        }\n    }\n\n    private void addPhotoToDB(Connection c, String DEV_ID, String ID_FOTO)\n    {\n        PreparedStatement s = null;\n        try {           \n\n            s = c.prepareStatement(\"INSERT INTO T_PHOTO_CLIENT \" +\n                    \" (ID_DEVICE, ID_FOTO) VALUES (?,?)\");                          \n\n            s.setString(1, DEV_ID); \n            s.setString(2, ID_FOTO);            \n\n            s.executeUpdate();\n        }\n        catch(SQLException e){}\n        finally\n        {\n            if (s != null)\n            {\n                try {s.close();}catch(SQLException e) {}\n            }\n\n        }\n\n    }\n    // other methods..\n}\n</code></pre>\n\n<p>Any Advice?</p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13246621,"title":"Using MYSQL and dropdowns","body":"<p>Ok I almost got a dropdown pulling from my DB and posting to it as well to work. I got it to pull down the data and for it to submit to the DB. Still a stump. If I have example \"ABC Trucking\" as an option. It only posts \"ABC\" to table1. For whatever reason it doenst post two words? Any Ideas? See where the carriername dropdown is in the div.</p>\n\n<p>My Code:</p>\n\n<pre><code>&lt;?php\n\nif (isset($_POST[\"submit\"]) &amp;&amp; $_POST[\"submit\"] == \"Submit\")\n{\n    for ($count = 1; $count &lt;= 9; $count++)\n    {\n        $fields[$count] = \"\";\n        if (isset($_POST[\"field\" . $count . \"\"]))\n        {\n            $fields[$count] = trim($_POST[\"field\" . $count . \"\"]);\n            //echo $fields[$count] . \"&lt;br /&gt;\";\n        }\n    }\n\n    $con = mysql_connect(\"local\", \"user\", \"pass\");\n    mysql_select_db(\"DB\", $con);\n\n    $carriername = mysql_real_escape_string($_POST['carriername']);\n    $fromzip = mysql_real_escape_string($_POST['fromzip']);\n    $tozip = mysql_real_escape_string($_POST['tozip']);\n    $typeofequipment = mysql_real_escape_string($_POST['typeofequipment']);\n    $weight = mysql_real_escape_string($_POST['weight']);\n    $length = mysql_real_escape_string($_POST['length']);\n    $paymentamount = mysql_real_escape_string($_POST['paymentamount']);\n    $contactperson = mysql_real_escape_string($_POST['contactperson']);\n    $loadtype = mysql_real_escape_string($_POST['loadtype']);\n\n    $insert = \"INSERT INTO table1 (`carriername` ,`fromzip` ,`tozip` ,`typeofequipment` ,`weight` ,`length` ,`paymentamount` ,`contactperson` ,`loadtype`) VALUES('$carriername' ,'$fromzip' ,'$tozip' ,'$typeofequipment' ,'$weight' ,'$length' ,'$paymentamount' ,'$contactperson' ,'$loadtype');\";\n    mysql_query($insert) or die(mysql_error());\n\n    $select = \"SELECT `carriername` ,`fromzip` ,`tozip` ,`typeofequipment` ,`weight` ,`length` ,`paymentamount` ,`contactperson` ,`loadtype` FROM `table1` ORDER BY `paymentamount` DESC;\";\n    $result = mysql_query($select) or die(mysql_error());\n}\n?&gt;\n&lt;/script&gt;\n&lt;style =\"text-align: center; margin-left: auto; margin-right: auto;\"&gt;&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div\n style=\"border: 2px solid rgb(0, 0, 0); margin: 16px 20px 20px; width: 400px; background-color: rgb(236, 233, 216); text-align: center; float: left;\"&gt;\n&lt;form action=\"\" method=\"post\";\"&gt;\n  &lt;div\n  style=\"margin: 8px auto auto; width: 300px; font-family: arial; text-align: left;\"&gt;&lt;br&gt;\n  &lt;table style=\"font-weight: normal; width: 100%; font-size: 12px;\"\n border=\"1\" bordercolor=\"#929087\" cellpadding=\"6\" cellspacing=\"0\"&gt;\n   &lt;table\n style=\"font-weight: normal; width: 100%; text-align: right; font-size: 12px;\"\n border=\"1\" bordercolor=\"#929087\" cellpadding=\"6\" cellspacing=\"0\"&gt;\n    &lt;tbody&gt;\n    &lt;tr&gt;\n    &lt;td style=\"width: 10%;\"&gt;Carrier:&lt;/td&gt;&lt;td&gt;\n &lt;?php  \n\n$con = mysql_connect(\"local\", \"user\", \"pass\");\n    mysql_select_db(\"DB\", $con);\n\n$query=(\"SELECT * FROM table2\"); \n\n$result=mysql_query($query) or die (\"Unable to Make the Query:\" . mysql_error() ); \necho \"&lt;select name=carriername&gt;\";   \n\nwhile($row=mysql_fetch_array($result)){  \n\necho \"&lt;OPTION VALUE=\".$row['carriername'].\"&gt;\".$row['carriername'].\"&lt;/OPTION&gt;\"; \n} \n\necho \"&lt;/select&gt;\";  \n\n\n?&gt;\n              &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n              &lt;td style=\"width: 35%;\"&gt;Pick Zip:&lt;/td&gt;&lt;td&gt; &lt;input id=\"fromzip\" name=\"fromzip\" maxlength=\"50\"\n style=\"width: 100%;\" type=\"text\"&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n              &lt;td style=\"width: 35%;\"&gt;Drop Zip:&lt;/td&gt;&lt;td&gt; &lt;input id=\"tozip\" name=\"tozip\" maxlength=\"50\"\n style=\"width: 100%;\" type=\"text\"&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n              &lt;td style=\"width: 35%;\"&gt;Load Type:&lt;/td&gt;&lt;td&gt; &lt;input id=\"loadtype\" name=\"loadtype\" maxlength=\"50\"\n style=\"width: 100%;\" type=\"text\"&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n              &lt;td style=\"width: 35%;\"&gt;Rate:&lt;/td&gt;&lt;td&gt; &lt;input id=\"paymentamount\" name=\"paymentamount\" maxlength=\"50\"\n style=\"width: 100%;\" type=\"text\"&gt;\n        &lt;/tr&gt;\n          &lt;/tbody&gt;\n  &lt;/table&gt;\n  &lt;p style=\"text-align: center;\"&gt;&lt;input name=\"submit\" value=\"Submit\"\n class=\"submit\" type=\"submit\"&gt;&lt;/p&gt;\n  &lt;/div&gt;\n&lt;/form&gt;\n&lt;/div&gt;\n&lt;p style=\"margin-bottom: -20px;\"&gt;&amp;nbsp;&lt;/p&gt;\n&lt;/body&gt;\n</code></pre>\n"},{"tags":["mysql","optimization","database-indexes"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":35,"score":-1,"question_id":13235558,"title":"Speed up MySQL query that already have indexes","body":"<p>There is an SQL slow query with average execution time 1 second:</p>\n\n<pre><code>SELECT `coupons`.* FROM `coupons`  LEFT JOIN `coupon_ownerships` \n    on `coupon_ownerships`.`coupon_id`=`coupons`.id \nWHERE (`coupons`.coupon_list_id = 55 AND (coupons.expires_at IS NULL)) \n    AND ((`coupon_ownerships`.couponable_id IS NULL) AND (`coupons`.coupon_list_id = 55))  \nORDER BY expires_at LIMIT 1\\G\n</code></pre>\n\n<p>Here is an explain output:</p>\n\n<pre><code>*************************** 1. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: coupons\n         type: ref\npossible_keys: index_coupons_on_coupon_list_id,index_coupons_on_coupon_list_id_and_code,index_coupons_on_coupon_list_id_and_expires_at\n          key: index_coupons_on_coupon_list_id_and_expires_at\n      key_len: 14\n          ref: const,const\n         rows: 140014\n        Extra: Using where; Using filesort\n*************************** 2. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: coupon_ownerships\n         type: ref\npossible_keys: index_coupon_ownerships_on_coupon_id\n          key: index_coupon_ownerships_on_coupon_id\n      key_len: 5\n          ref: curebit-marketing_production.coupons.id\n         rows: 1\n        Extra: Using where\n</code></pre>\n\n<p><code>coupons</code> and <code>coupon_ownerships</code> tables has all necessary indexes:</p>\n\n<pre><code>CREATE TABLE `coupons` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `coupon_list_id` int(11) DEFAULT NULL,\n  `code` varchar(255) NOT NULL,\n  `expires_at` datetime DEFAULT NULL,\n  `uses` int(11) NOT NULL DEFAULT '0',\n  `usage_limit` int(11) DEFAULT NULL,\n  `created_at` datetime DEFAULT NULL,\n  `updated_at` datetime DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  KEY `index_coupons_on_coupon_list_id` (`coupon_list_id`),\n  KEY `index_coupons_on_coupon_list_id_and_code` (`coupon_list_id`,`code`),\n  KEY `index_coupons_on_code` (`code`),\n  KEY `test` (`coupon_list_id`,`expires_at`),\n  KEY `index_coupons_on_coupon_list_id_and_expires_at` (`coupon_list_id`,`expires_at`)\n) ENGINE=InnoDB AUTO_INCREMENT=725713 DEFAULT CHARSET=utf8\n\nCREATE TABLE `coupon_ownerships` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `coupon_id` int(11) DEFAULT NULL,\n  `couponable_id` int(11) DEFAULT NULL,\n  `couponable_type` varchar(255) DEFAULT NULL,\n  `created_at` datetime DEFAULT NULL,\n  `updated_at` datetime DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  KEY `index_coupon_ownerships_on_coupon_id` (`coupon_id`),\n  KEY `index_coupon_ownerships_on_couponable_id` (`couponable_id`)\n) ENGINE=InnoDB AUTO_INCREMENT=259449 DEFAULT CHARSET=utf8\n</code></pre>\n\n<p>Are indexes done the right way?\nIs it possible to improve this query without inventing a cache?</p>\n"},{"tags":["mysql","cakephp"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13246769,"title":"How to get the count of rows from a table in cakephp","body":"<p>I have two tables:</p>\n\n<pre><code>id  category    status\n1   test        1\n2   test1       1\n3   test2       1\n</code></pre>\n\n<p>This is the <code>group_master</code> table.</p>\n\n<pre><code>groupid     groupname   groupmaster \n1           yy          1\n2           xx          1\n3           yyyy                1\n4           xrx         1\n5           yy          2\n6           xx          2\n7           yyyy                2\n8           xfgdrx              3\n</code></pre>\n\n<p>This is the <code>membergroup</code> table.</p>\n\n<p>The <code>group_master.id</code> is same as in <code>membergroup.groupmaster</code>.That menas i want to get each row from first table and also want to get the count from second table</p>\n\n<p>That means:</p>\n\n<pre><code>id  category    status  Count\n1   test        1       4\n2   test1       1       3\n3   test2       1       1\n</code></pre>\n\n<p>This is the result i want to get.</p>\n\n<p>How can i do this in Cakephp with pagination ?</p>\n"},{"tags":["mysql","ruby-on-rails","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13161394,"title":"ActiveRecord error: SAVEPOINT active_record_1 does not exist","body":"<p>The full error is</p>\n\n<pre><code>ActiveRecord::StatementInvalid: Mysql2::Error: SAVEPOINT active_record_1 does not exist: ROLLBACK TO SAVEPOINT active_record_1\n</code></pre>\n\n<p>I am writing a unit test and getting this error whenever I try to create a new ActiveRecord object -- but only after a certain point. This occurs after these lines:</p>\n\n<pre><code>ActiveRecord::Base.connection.execute \"DROP TABLE IF EXISTS foo\"\nActiveRecord::Base.connection.execute \"CREATE TABLE foo (id INTEGER PRIMARY KEY)\"\n</code></pre>\n\n<p>(The table 'foo' will be populated with data if my test succeeds)</p>\n\n<p>Before the above lines, I can write something like</p>\n\n<pre><code>User.create(email =&gt; 'foo@bar.com')\n</code></pre>\n\n<p>and everything works fine. However, if I try writing the above line after my call to ActiveRecord::Base.connection.execute, then I get this SAVEPOINT error described above.  I've also tried putting my execute statements within a transaction, but that didn't help. I'm stumped.</p>\n\n<p>FYI - I'm using Rails 3.2.8</p>\n"},{"tags":["php","mysql","sha1"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":40,"score":-3,"question_id":13246750,"title":"Using sha1 in mysql query","body":"<p>I'm trying to run a query against my mysql database, it looks as follows;</p>\n\n<pre><code>$getuser = mysql_query('SELECT * FROM kunder WHERE SHA1(id) = \"adddfed5b0fab7d679f036573d92386cad4c6889\"');\n</code></pre>\n\n<p>I simply get a error thrown at me on the row after, nothing from the query itself, saying that \"mysql_num_rows() expects parameter 1 to be resource, null given\". I tried running that query in phpmy admin and it ran without fault, but in a .php file it does not. </p>\n\n<p>Is there some step I've missed? </p>\n"},{"tags":["mysql","left-join"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13245911,"title":"Compare mysql tables to see if a record is available for each entry","body":"<p>I have two mysql tables. jobsreqtraining and coursescompleted.</p>\n\n<p>jobsreqtraining has two columns, job and training.</p>\n\n<p>coursescompleted has two columns, course and person.</p>\n\n<p>snapshot below:</p>\n\n<p>jobsreqtraining</p>\n\n<p><img src=\"http://i.stack.imgur.com/vTevi.jpg\" alt=\"jobsreqtraining\"></p>\n\n<p>coursescompleted</p>\n\n<p><img src=\"http://i.stack.imgur.com/WNVuG.jpg\" alt=\"coursescompleted\"></p>\n\n<p>What I need to do is say if Bryan Habana does job Crane Operator, has he completed the 'MHE Drivers License' Course?</p>\n\n<p>so my query would have two variables, Job and Person. so if I chose Bryan Habana and Crane Operator my desired output would be</p>\n\n<hr>\n\n<p><strong>Training</strong>   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   <strong>Completed Course?</strong></p>\n\n<p>Crane Operator &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  No</p>\n\n<hr>\n\n<p>I beleive I have to use a left outer join to acheive this but battling to get the course required for the job to be shown even if the person has not completed the training?</p>\n\n<pre><code>select \n  n.course, \n  c.person\nfrom (select \n  training as course \n  from jobsreqtraining where Job='crane operator'\n) as n \nleft outer join coursescompleted c \n  on n.course=c.course \nwhere c.person='bryan habana'\n</code></pre>\n\n<p>Help appreciated as always,\nThanks,</p>\n"},{"tags":["jquery","mysql","ajax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":35,"score":-2,"question_id":13246558,"title":"store drag and drop elements with mysql","body":"<p>How to add the dropped elements in the cart to database using mysql.\nA row should be added to database as soon as an element is dropped to the cart without refreshing the web page.\nany AJAX query for adding such entry to database ??</p>\n"},{"tags":["php","mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":49,"score":-4,"question_id":13244690,"title":"Use MySQL data for dropdown","body":"<p>Ok now it works... Almost... I got it to pull down the data and for it to submit to the DB. Still a stump. If I have example \"ABC Trucking\" as an option. It only posts \"ABC\" to table1. For whatever reason it doenst post two words? Any Ideas? </p>\n\n<p>My code:</p>\n\n<pre><code>    &lt;?php\n    if (isset($_POST[\"submit\"]) &amp;&amp; $_POST[\"submit\"] == \"Submit\")\n    {\n     for ($count = 1; $count &lt;= 9; $count++)\n     {\n      $fields[$count] = \"\";\n      if (isset($_POST[\"field\" . $count . \"\"]))\n      {\n       $fields[$count] = trim($_POST[\"field\" . $count . \"\"]);\n       //echo $fields[$count] . \"&lt;br /&gt;\";\n      }\n     }\n     $con = mysql_connect(\"database\", \"user\", \"password\");\n     mysql_select_db(\"table1\", $con);\n     $carriername = mysql_real_escape_string($_POST['carriername']);\n     $fromzip = mysql_real_escape_string($_POST['fromzip']);\n     $tozip = mysql_real_escape_string($_POST['tozip']);\n     $typeofequipment = mysql_real_escape_string($_POST['typeofequipment']);\n     $weight = mysql_real_escape_string($_POST['weight']);\n     $length = mysql_real_escape_string($_POST['length']);\n     $paymentamount = mysql_real_escape_string($_POST['paymentamount']);\n     $contactperson = mysql_real_escape_string($_POST['contactperson']);\n     $loadtype = mysql_real_escape_string($_POST['loadtype']);\n\n        $insert = \"INSERT INTO table1 (`carriername` ,`fromzip` ,`tozip` ,`typeofequipment` ,`weight` ,`length` ,`paymentamount` ,`contactperson` ,`loadtype`) VALUES('$carriername' ,'$fromzip' ,'$tozip' ,'$typeofequipment' ,'$weight' ,'$length' ,'$paymentamount' ,'$contactperson' ,'$loadtype');\";\n     mysql_query($insert) or die(mysql_error());\n     $select = \"SELECT `carriername` ,`fromzip` ,`tozip` ,`typeofequipment` ,`weight` ,`length` ,`paymentamount` ,`contactperson` ,`loadtype` FROM `table` ORDER BY `paymentamount` DESC;\";\n     $result = mysql_query($select) or die(mysql_error());\n    }\n    ?&gt;\n    &lt;/script&gt;\n    &lt;style =\"text-align: center; margin-left: auto; margin-right: auto;\"&gt;&lt;/style&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n    &lt;div\n     style=\"border: 2px solid rgb(0, 0, 0); margin: 16px 20px 20px; width: 400px; background-color: rgb(236, 233, 216); text-align: center; float: left;\"&gt;\n    &lt;form action=\"\" method=\"post\";\"&gt;\n      &lt;div\n      style=\"margin: 8px auto auto; width: 300px; font-family: arial; text-align: left;\"&gt;&lt;br&gt;\n      &lt;table style=\"font-weight: normal; width: 100%; font-size: 12px;\"\n     border=\"1\" bordercolor=\"#929087\" cellpadding=\"6\" cellspacing=\"0\"&gt;\n       &lt;table\n     style=\"font-weight: normal; width: 100%; text-align: right; font-size: 12px;\"\n     border=\"1\" bordercolor=\"#929087\" cellpadding=\"6\" cellspacing=\"0\"&gt;\n        &lt;tbody&gt;\n             &lt;tr&gt;\n    &lt;td style=\"width: 10%;\"&gt;Carrier:&lt;/td&gt;&lt;td&gt;\n &lt;?php  \n\n$con = mysql_connect(\"Local\", \"user\", \"pass\");\n    mysql_select_db(\"DB\", $con);\n$query=(\"SELECT * FROM carrierinfo\"); \n\n$result=mysql_query($query) or die (\"Unable to Make the Query:\" . mysql_error() ); \necho \"&lt;select name=carriername&gt;\";   \n\nwhile($row=mysql_fetch_array($result)){  \n\necho \"&lt;OPTION VALUE=\".$row['carriername'].\"&gt;\".$row['carriername'].\"&lt;/OPTION&gt;\"; \n} \n\necho \"&lt;/select&gt;\";  \n\n\n?&gt;\n              &lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;tr&gt;\n                &lt;td style=\"width: 35%;\"&gt;Pick Zip:&lt;/td&gt;&lt;td&gt; &lt;input id=\"fromzip\" name=\"fromzip\" maxlength=\"50\"\n     style=\"width: 100%;\" type=\"text\"&gt;\n       &lt;/tr&gt;\n       &lt;tr&gt;\n                &lt;td style=\"width: 35%;\"&gt;Drop Zip:&lt;/td&gt;&lt;td&gt; &lt;input id=\"tozip\" name=\"tozip\" maxlength=\"50\"\n     style=\"width: 100%;\" type=\"text\"&gt;\n       &lt;/tr&gt;\n       &lt;tr&gt;\n                &lt;td style=\"width: 35%;\"&gt;Load Type:&lt;/td&gt;&lt;td&gt; &lt;input id=\"loadtype\" name=\"loadtype\" maxlength=\"50\"\n     style=\"width: 100%;\" type=\"text\"&gt;\n       &lt;/tr&gt;\n       &lt;tr&gt;\n                &lt;td style=\"width: 35%;\"&gt;Rate:&lt;/td&gt;&lt;td&gt; &lt;input id=\"paymentamount\" name=\"paymentamount\" maxlength=\"50\"\n     style=\"width: 100%;\" type=\"text\"&gt;\n       &lt;/tr&gt;\n            &lt;/tbody&gt;\n      &lt;/table&gt;\n      &lt;p style=\"text-align: center;\"&gt;&lt;input name=\"submit\" value=\"Submit\"\n     class=\"submit\" type=\"submit\"&gt;&lt;/p&gt;\n      &lt;/div&gt;\n    &lt;/form&gt;\n    &lt;/div&gt;\n    &lt;p style=\"margin-bottom: -20px;\"&gt;&amp;nbsp;&lt;/p&gt;\n    &lt;/body&gt;`\n</code></pre>\n"},{"tags":["mysql","character-encoding","sphinx"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13177560,"title":"Sphinx return empty result on cyrillic query","body":"<p>Still normal search with latin and russian translit(!)</p>\n\n<pre><code>$ search sumka   \nusing config file '/etc/sphinx/sphinx.conf'...\nindex 'test1': query 'sumka ': returned 636 matches of 636 total in 0.000 sec\n\ndisplaying matches:\n1. document=154143, weight=1660, name=Сумка Sony LCS-MS10 Gray Alpha Текстильная сумка для фотокамеры Alpha Серый цвет, casual style (сумка почтальона) [LCSMS10H.AE], description_short=Сумка Sony LCS-MS10 Gray Alpha Текстильная сумка для фотокамеры Alpha Серый цвет, casual style (сумка почтальона) [LCSMS10H.AE]\n                                     ...\n\n$ search сумка\n\nusing config file '/etc/sphinx/sphinx.conf'...\nindex 'test1': query 'сумка ': returned 0 matches of 0 total in 0.000 sec\n\nwords:\n1. 'сумка': 0 documents, 0 hits\n</code></pre>\n\n<p>Sound like charset problem here, but I have utf8 in mysql and query</p>\n\n<pre><code>mysql&gt; show variables like \"character%\";\n+--------------------------+----------------------------+\n| Variable_name            | Value                      |\n+--------------------------+----------------------------+\n| character_set_client     | utf8                       |\n| character_set_connection | utf8                       |\n| character_set_database   | utf8                       |\n| character_set_filesystem | binary                     |\n| character_set_results    | utf8                       |\n| character_set_server     | utf8                       |\n| character_set_system     | utf8                       |\n| character_sets_dir       | /usr/share/mysql/charsets/ |\n+--------------------------+----------------------------+\n\nmysql&gt; show variables like \"collation%\";\n+----------------------+-----------------+\n| Variable_name        | Value           |\n+----------------------+-----------------+\n| collation_connection | utf8_general_ci |\n| collation_database   | utf8_general_ci |\n| collation_server     | utf8_unicode_ci |\n+----------------------+-----------------+ \n\n$ file words\nwords: UTF-8 Unicode text\n$ cat words | search --stdin \n\nusing config file '/etc/sphinx/sphinx.conf'...\nindex 'test1': query 'сумка\n': returned 0 matches of 0 total in 0.000 sec\n\nwords:\n1. 'сумка': 0 documents, 0 hits\n</code></pre>\n\n<p>This is also true for php client and sphinx mysql like client.</p>\n\n<p>Full sphinx configuration is <a href=\"http://pastie.org/5166413\" rel=\"nofollow\">here</a>, but quote of significient part:</p>\n\n<pre><code>source src1\n{\n...\nsql_query_pre       = SET NAMES utf8\nsql_query_pre       = SET CHARACTER SET utf8\n...\n}\nindex test1\n{\n...\ncharset_type    = utf-8\n...\n}\n</code></pre>\n\n<p>I found only one similar problem, but there was latin1 charset in db.</p>\n\n<p>Programs versions is:</p>\n\n<pre><code>mysql  Ver 14.14 Distrib 5.5.20, for Linux (x86_64) using readline 5.1\nSphinx 2.0.6-id64-release (r3473)\ncentos 5.8\n</code></pre>\n\n<h2>UPDATE</h2>\n\n<p>Add charset_table to config with tables from <a href=\"http://sphinxsearch.com/wiki/doku.php?id=charset_tables#cyrillic\" rel=\"nofollow\">http://sphinxsearch.com/wiki/doku.php?id=charset_tables#cyrillic</a> but still no good.</p>\n\n<p>Also I installed Sphinx 2.0.5-release (r3308) on my local gentoo and it work with cyrillic queries out of the box.</p>\n"},{"tags":["java","sql","mysql","jdbc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1178,"score":1,"question_id":2854774,"title":"sql jdbc getgeneratedkeys returns column \"id\" not found, column type unknown","body":"<p>I want to retrieve the most recently updated value in the table using an insert query.</p>\n\n<p>these are the datatypes in my sql table.</p>\n\n<pre><code>int(11) // primary key auto increment, not being assigned by sqlQuery\n\nvarchar(30)\n\ntimestamp  // has a default value. but i am explicit assigning it using CURRENT_TIMESTAMP\n\nvarchar(300)\n\nvarchar(300)\n\nvarchar(300)\n\nint(11)\n\nvarchar(300)\n\n\n        // java code\n        statement.executeUpdate(sqlQuery, Statement.RETURN_GENERATED_KEYS);\n        ResultSet rs = statement.getGeneratedKeys();\n        System.out.println(\"here: \" + rs.getMetaData().getColumnCount());\n        System.out.println(\"here1: \" + rs.getMetaData().getColumnName(1));\n        // none of the following 3 works\n        System.out.println(\"id: \" + rs.getInt(1));\n        System.out.println(\"id: \" + rs.getInt(\"GENERATED_KEY\"));\n        System.out.println(\"id: \" + rs.getInt(\"id\"));\n</code></pre>\n\n<p>for a bit of background see <a href=\"http://stackoverflow.com/questions/2853066/sql-java-get-value-assigned-to-auto-increment-primary-key\">this</a></p>\n\n<p><code>rs.getMetaData().getColumnTypeName(1)</code> tells me column type <code>UNKNOWN</code></p>\n\n<p>stack trace\n        SEVERE: null\n        java.sql.SQLException\n        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)\n        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)\n        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:926)\n        at com.mysql.jdbc.ResultSetImpl.checkRowPos(ResultSetImpl.java:815)\n        at com.mysql.jdbc.ResultSetImpl.getStringInternal(ResultSetImpl.java:5528)\n        at com.mysql.jdbc.ResultSetImpl.getString(ResultSetImpl.java:5448)</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":22,"score":1,"question_id":13237633,"title":"MySQL Group selected rows on Select","body":"<p>Suppose I've got the following table:</p>\n\n<pre><code>Room | Seats | Occupied\n-----------------------\na1      20       10\nb2      15       15\nc3      45       30\nd4      20       15\ne5      10       10\n</code></pre>\n\n<p>I have a trouble (just have no idea how that can be done) generating a SELECT statement that will merge some of the rooms and will sum up their values and will return the following:</p>\n\n<pre><code>Room | Seats | Occupied\n-----------------------\na1      20       10\nb2c3d4  80       60\ne5      10       10\n</code></pre>\n\n<p>How can this be done?</p>\n\n<p>Thank you in advance!</p>\n"},{"tags":["mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13246400,"title":"DateFirst in MYSQL","body":"<p>How to set what the first day of\nthe week in MYSQL ? For e.g. if i say Set DateFirst = 1, the first day\nof the week is set to Monday. If DateFirst = 2, then first day of the\nweek is set to Tuesday In MSSQL.\nAny equivalent function in MySQL?</p>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13246016,"title":"Unable to track the logical error","body":"<p>I have the following PHP code:</p>\n\n<pre><code>if(!($rsContactList=mysql_query($sqlContactList,$con)))\n{\n    echo mysql_error();\n}\nelse\n{\n    echo mysql_num_rows($rsContactList);\n    while(($contact=mysql_fetch_array($rsContactList)))\n    {\n        $phone = $contact['telephone'];\n        echo \"&lt;option value='$phone&gt;'$phone&lt;/option&gt;\";\n    }\n}\n</code></pre>\n\n<p>I am getting number of rows more than one but unable to display. Let me know why? Thanks in advance.</p>\n"},{"tags":["mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":8,"score":1,"question_id":13246314,"title":"SQLGrammarException: could not execute native bulk manipulation query error","body":"<p>I am executing below queries in one function but getting \"SQLGrammarException: could not execute native bulk manipulation query error\" exception.</p>\n\n<p>Can any one tell me solution for it? I don't want to use HQL .  </p>\n\n<pre><code>    query = session.createSQLQuery(\"CREATE TEMPORARY TABLE temp select `\"+xAxis+\"`, sum(value) as length from (select * from \"+xAxis+\"Table union select `\"+xAxis+\"`, sum(cycles) as value from \"+Constants.TABLE_NAME+\" where datestamp &gt;= '\"+startDate+\"'  and datestamp &lt; '\"+endDate+\"'  and `\"+groupBy+\"` = '\"+groupByBar1+\"' and `\"+xAxis+\"` = 'Uptime' group by `\"+xAxis+\"`) as t group by `\"+xAxis+\"` \"+fixOrderString+\" ;CREATE TEMPORARY TABLE test select `\"+xAxis+\"`, sum(value) as length from (select * from \"+xAxis+\"Table union select `\"+xAxis+\"`, sum(cycles) as value from \"+Constants.TABLE_NAME+\" where datestamp &gt;= '\"+startDate+\"'  and datestamp &lt; '\"+endDate+\"' and  `\"+xAxis+\"` = 'Uptime' group by `\"+xAxis+\"`) as t group by `\"+xAxis+\"` \"+fixOrderString+\" ;alter table test add column `\"+groupByBar1+\"` INTEGER ;\");  \n            query.executeUpdate();              \n            query = session.createSQLQuery(\"update test,temp set `\"+groupByBar1+\"` = temp.length where test.`\"+xAxis+\"` = temp.`\"+xAxis+\"` ; drop table temp ; CREATE TEMPORARY TABLE temp select `\"+xAxis+\"`, sum(value) as length from (select * from \"+xAxis+\"Table union select `\"+xAxis+\"`, sum(cycles) as value from \"+Constants.TABLE_NAME+\" where datestamp &gt;= '\"+startDate+\"'  and datestamp &lt; '\"+endDate+\"' and  `\"+groupBy+\"` = '\"+groupByBar2+\"' and `\"+xAxis+\"` = 'Uptime' group by `\"+xAxis+\"`) as t group by `\"+xAxis+\"` \"+fixOrderString+\"  ;alter table test add column `\"+groupByBar2+\"` INTEGER ; \");\n            query.executeUpdate();\n            query = session.createSQLQuery(\"update test,temp set `\"+groupByBar2+\"` = temp.length where test.`\"+xAxis+\"` = temp.`\"+xAxis+\"` ; drop table temp ; CREATE TEMPORARY TABLE temp select `\"+xAxis+\"`, sum(value) as length from (select * from \"+xAxis+\"Table union select `\"+xAxis+\"`, sum(cycles) as value from \"+Constants.TABLE_NAME+\" where datestamp &gt;= '\"+startDate+\"'  and datestamp &lt; '\"+endDate+\"' and  `\"+groupBy+\"` = '\"+groupByBar3+\"' and `\"+xAxis+\"` = 'Uptime' group by `\"+xAxis+\"`) as t group by `\"+xAxis+\"` \"+fixOrderString+\"  ;alter table test add column `\"+groupByBar3+\"` INTEGER ;\");\n            query.executeUpdate();\n            query = session.createSQLQuery(\"update test,temp set `\"+groupByBar3+\"` = temp.length where test.`\"+xAxis+\"` = temp.`\"+xAxis+\"` ; drop table temp ; CREATE TEMPORARY TABLE temp select `\"+xAxis+\"`, sum(value) as length from (select * from \"+xAxis+\"Table union select `\"+xAxis+\"`, sum(cycles) as value from \"+Constants.TABLE_NAME+\" where datestamp &gt;= '\"+startDate+\"'  and datestamp &lt; '\"+endDate+\"' and  `\"+groupBy+\"` = '\"+groupByBar4+\"' and `\"+xAxis+\"` = 'Uptime' group by `\"+xAxis+\"`) as t group by `\"+xAxis+\"` \"+fixOrderString+\"  ;alter table test add column `\"+groupByBar4+\"` INTEGER ;\");\n            query.executeUpdate();\n            query = session.createSQLQuery(\"update test,temp set `\"+groupByBar4+\"` = temp.length where test.`\"+xAxis+\"` = temp.`\"+xAxis+\"` ; drop table temp ; CREATE TEMPORARY TABLE temp select `\"+xAxis+\"`, sum(value) as length from (select * from \"+xAxis+\"Table union select `\"+xAxis+\"`, sum(cycles) as value from \"+Constants.TABLE_NAME+\" where datestamp &gt;= '\"+startDate+\"'  and datestamp &lt; '\"+endDate+\"' and  `\"+groupBy+\"` = `\"+Constants.OTHERS+\"' and `\"+xAxis+\"` = 'Uptime' group by `\"+xAxis+\"`) as t group by `\"+xAxis+\"` \"+fixOrderString+\"  ;alter table test add column `\"+Constants.OTHERS+\"' INTEGER ;\");\n            query.executeUpdate();\n            query = session.createSQLQuery(\"update test,temp set `\"+Constants.OTHERS+\"` = temp.length where test.`\"+xAxis+\"` = temp.`\"+xAxis+\"`;\");\n            query.executeUpdate();\n            query = session.createSQLQuery(\"select * from test \"+fixOrderString+\" ;\");\n</code></pre>\n"},{"tags":["mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13245976,"title":"mysql-udf-http installation issue","body":"<p>I am trying to install <a href=\"http://code.google.com/p/mysql-udf-http/\" rel=\"nofollow\">mysql-udf-http</a> on my linux system[<code>Ubuntu-11.10 32-bit</code>] by following the instructions specified on the <a href=\"http://code.google.com/p/mysql-udf-http/\" rel=\"nofollow\">site</a>.</p>\n\n<p>Things were fine till:</p>\n\n<pre><code>ulimit -SHn 65535\nwget http://curl.haxx.se/download/curl-7.21.1.tar.gz\ntar zxvf curl-7.21.1.tar.gz\ncd curl-7.21.1/\n./configure --prefix=/usr\n</code></pre>\n\n<p>Next <code>make &amp;&amp; make install</code> ran for sometimg and threw up this:</p>\n\n<pre><code>libtool: link: gcc -g0 -O2 -Wno-system-headers -o .libs/curl main.o hugehelp.o urlglob.o writeout.o writeenv.o getpass.o homedir.o curlutil.o os-specific.o strtoofft.o strdup.o rawstr.o nonblock.o  ../lib/.libs/libcurl.so -lz\n../lib/.libs/libcurl.so: undefined reference to `SSLv2_client_method'\ncollect2: ld returned 1 exit status\nmake[2]: *** [curl] Error 1\nmake[2]: Leaving directory `/home/Ubuntu/curl-7.21.1/src'\nmake[1]: *** [all] Error 2\nmake[1]: Leaving directory `/home/Ubuntu/curl-7.21.1/src'\nmake: *** [all-recursive] Error 1\n</code></pre>\n\n<p>Then when I tried doing\n<code>echo \"/usr/local/webserver/mysql/lib/mysql/\" &gt; /etc/ld.so.conf.d/mysql.conf\n/sbin/ldconfig</code>: </p>\n\n<pre><code>bash: /etc/ld.so.conf.d/mysql.conf/sbin/ldconfig: No such file or directory\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["mysql","import","mysqldump"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13231239,"title":"ERROR 1064 (42000) while importing .sql file into MySQL","body":"<p>I'm trying to import a client's database dump into my MySQL 5.5.27 (for Win64) running on Windows Vista 64 bit. However, I get </p>\n\n<blockquote>\n  <p>ERROR 1064 (42000) at line 24: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '*/'\n  at line 8</p>\n</blockquote>\n\n<p>I've pasted the first several lines of the dump file below:</p>\n\n<pre><code>CREATE DATABASE  IF NOT EXISTS `foobar` /*!40100 DEFAULT CHARACTER SET utf8 */;\nUSE `foobar`;\n-- MySQL dump 10.13  Distrib 5.5.16, for osx10.5 (i386)\n--\n-- Host: localhost    Database: foobar\n-- ------------------------------------------------------\n-- Server version   5.5.21\n\n/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;\n/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;\n/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;\n/*!40101 SET NAMES utf8 */;\n/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;\n/*!40103 SET TIME_ZONE='+00:00' */;\n/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;\n/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;\n/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;\n/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;\n\n--\n-- Temporary table structure for view `reference`\n--\n\nCREATE TABLE `reference` (\n  `xyz` varchar(50),\n  `ABC` varchar(50),\n  `asdf` varchar(50),\n  `abcd` varchar(7),\n  `Axe` varchar(255),\n  `Age` varchar(255)\n) ENGINE=MyISAM */;\nSET character_set_client = @saved_cs_client;\n</code></pre>\n"},{"tags":["mysql","database-design","replication","database-replication"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":11,"score":1,"question_id":13245816,"title":"How can I guarantee row consistency with a Master-Master database replication?","body":"<p>I have a process that makes a call to a 3rd party system to perform some action.  My users can schedule these calls in my web application, which inserts a row in my database.  A scheduled process will check my database for any outstanding requests every hour and attempt to make the calls to the 3rd party service.  Users can also opt to manually make calls they have scheduled in the web application.</p>\n\n<p>I want to avoid a situation where the scheduled process and a user attempt to make the call at the same time.  To add this safety I introduced different row statuses: \"waiting\" for new rows, \"trying\" for rows being attempted, and then \"complete\" for completed ones and \"error\" for ones that failed.</p>\n\n<p>The first step in attempting the 3rd party call is to update the status from \"waiting\" to \"trying\" using a SQL statement like this:</p>\n\n<pre><code>UPDATE remote_calls SET status = \"trying\" WHERE status = \"waiting\" AND id = ?;\n</code></pre>\n\n<p>If rows affected = 0, exit.  If rows affected = 1, try to make the call.  Thus if the user and the scheduled process attempt to make the same call concurrently only one will succeed and the other one will exit.</p>\n\n<p>This works fine on my test box but I found out that it will be deployed in a master-master replication environment.  Do I have a problem?  I worry that if user's attempt and scheduled process attempt update different masters, both of the updates will succeed.  Is this a legitimate worry?  If so, is there any way I can guarantee that only one of these will succeed?</p>\n"},{"tags":["php","mysql","xml"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13245883,"title":"PHP generated XML occasionally missing closing \"<\"","body":"<p>I have a simple php script that pulls data from MySql and builds a feed, in this case for Amazon.   </p>\n\n<p>It generates the data correctly, but every 300-400 lines or so, it generates an isolated XML error where the closing \"&lt;\" is missing.  For example, here is a piece of my output that is not outputting the \"&lt;\" on the closing tag for Fulfillment Latency.  Sometimes it will occur under sku, quantity or update.  It will always be the \"&lt;\" on the closing tag.  </p>\n\n<pre><code>&lt;Message&gt;\n&lt;MessageID&gt;36&lt;/MessageID&gt;\n&lt;OperationType&gt;Update&lt;/OperationType&gt;\n&lt;Inventory&gt;\n&lt;SKU&gt;NRS10111&lt;/SKU&gt;\n&lt;Quantity&gt;2&lt;/Quantity&gt;\n&lt;FulfillmentLatency&gt;1/FulfillmentLatency&gt;\n&lt;/Inventory&gt;\n&lt;/Message&gt;\n</code></pre>\n\n<p>Here is part of the code (within a mysql_fetch_array loop) used to generate the XML, :</p>\n\n<pre><code>$myXML.=\n'&lt;Message&gt;\n&lt;MessageID&gt;'.$counter.'&lt;/MessageID&gt;\n&lt;OperationType&gt;Update&lt;/OperationType&gt;\n&lt;Inventory&gt;\n&lt;SKU&gt;'.$sku.'&lt;/SKU&gt;\n&lt;Quantity&gt;'.$quantity.'&lt;/Quantity&gt;\n&lt;FulfillmentLatency&gt;1&lt;/FulfillmentLatency&gt;\n&lt;/Inventory&gt;\n&lt;/Message&gt;';\n\n$counter++\n</code></pre>\n"},{"tags":["php","mysql","database"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":304,"score":1,"question_id":5170509,"title":"mysql query not inserting to database","body":"<p>i have a db query in php that is not inserting into database. Have used this format lots of times but for some reason its not working now. any ideas please </p>\n\n<pre><code>    $query = \"INSERT INTO `databasename`.`member_users` (`id`, `first_name`, `last_name`, `username`, `password`, `address1`, `address2`, `postcode`, `access`, `expires`) VALUES (NULL, '$fname', '$lname', '$email', '', '$add1', '$add2', '$postcode', '0', '')\";\n$result = mysql_query($query);\nif($result){\n    echo\"query inserted\";\n\n}else{\n\n    echo \"nope\";\n}\n</code></pre>\n"},{"tags":["mysql","query","stored-procedures","prepared-statement"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13245390,"title":"Removing Parameters from where clause to display records","body":"<p>I have a real estate website where people can search property based on Location, Property Type and Builder.</p>\n\n<p>I have a Table like below.</p>\n\n<pre>\n\nCREATE TABLE Project(ProjectId INT NOT NULL PRIMARY KEY AUTO_INCREMENT, \n                     Location  VARCHAR(255), \n                     PropertyType VARCHAR(255), \n                     Builder VARCHAR(255), \n                     ProjectName  VARCHAR(255),\n                     Status TINYINT)\n\n\nINSERT INTO Project(Location, PropertyType, Builder, ProjectName)\n             VALUES('Location A', 'Flats',     'Builder A', 'Project A', 1),\n                   ('Location A', 'Villas',    'Builder B', 'Project B', 1),\n                   ('Location B', 'Flats',     'Builder A', 'Project C', 1),\n                   ('Location C', 'Villas',    'Builder C', 'Project D', 1),\n                   ('Location B', 'Plots',     'Builder B', 'Project E', 1),\n                   ('Location A', 'Row House', 'Builder C', 'Project F', 1),\n                   ('Location A', 'Plots',     'Builder A', 'Project G', 1),\n                   ('Location C', 'Plots',     'Builder C', 'Project H', 1),\n                   ('Location C', 'Flats',     'Builder B', 'Project I', 1),\n                   ('Location C', 'Villas',    'Builder B', 'Project J', 1),\n                   ('Location A', 'Villas',    'Builder A', 'Project K', 1),\n                   ('Location C', 'Flats',     'Builder B', 'Project L', 1);\n\n</pre>\n\n<p>The search procedure which I use is in such a way that It brings back search result as per the parameters they selected i.e Property Type, Location, Builder Name</p>\n\n<p>Now there may be projects for some search parameters as below</p>\n\n<p>Flats by Builder A at Location C </p>\n\n<p>I want to change procedure in such a way the parameters in filters in where clause should change to bring result all the time by considering other possibilities like for the above </p>\n\n<p>Flats by Builder A at Location C </p>\n\n<p>There is no Flats by Builder A at Location C so it should display Flats at Location C by Other Builders</p>\n\n<pre>\n\n      Location C   Flats     Builder B    Project I\n\n</pre>\n\n<p>The Filter should Consider  PropertyType, Location and Builder Name</p>\n\n<p>Villas at Location B </p>\n\n<p>There is No Villas at Location B So </p>\n\n<pre>\n\nLocation A    Villas   Builder B   Project B\nLocation C    Villas   Builder B   Project J\nLocation A    Villas   Builder A   Project K\n\n</pre>\n\n<p>The search should happen by </p>\n\n<pre>\n\n       PropertyType -> Location -> Builder\n\n</pre>\n\n<p>If there is No project for a particular Builder in that Location then </p>\n\n<pre>\n\n       PropertyType -> Location\n\n</pre>\n\n<p>If there is No project for a particular Location then </p>\n\n<pre>\n\n       PropertyType\n\n</pre>\n\n<p>The parameters in the filters should be eliminated in such a way it brings similar result to search param.</p>\n\n<pre>\n\n       PropertyType -> Location -> Builder       No Records\n       PropertyType -> Location                  No Records\n       PropertyType                              Records Found\n\n</pre>\n\n<p>The procedure I created is as Below</p>\n\n<pre>\n\n    DROP PROCEDURE  IF EXISTS getProjectResult;\n    CREATE PROCEDURE getProjectResult(IN PropertyType VARCHAR(255), IN Location VARCHAR(255), IN BuilderName VARCHAR(255))\n    BEGIN\n      SET @strSQL = 'SELECT * \n                       FROM project\n                      WHERE status = 1 ';\n\n      IF PropertyType != '' THEN\n        SET @strSQL = CONCAT(@strSQL, ' AND PropertyType =\"', PropertyType, '\" ');\n      END IF;\n\n      IF Location != '' THEN    \n        SET @strSQL = CONCAT(@strSQL, ' AND Location =\"', Location, '\" ');\n      END IF;\n\n      IF BuilderName != '' THEN\n        SET @strSQL = CONCAT(@strSQL, ' AND Builder =\"', BuilderName, '\" ');\n      END IF;\n\n      PREPARE stmt FROM @strSQL;\n      EXECUTE stmt;  \n      DEALLOCATE PREPARE stmt; \n    END;\n\n</pre>\n\n<p>So My Procedure is Going to bring output as below</p>\n\n<pre>\n\n     CALL getProjectResult('Flats', 'Location C', 'Builder A');\n\n</pre>\n\n<p>No Output</p>\n\n<p>So it should display </p>\n\n<pre>\n\n       Location C    Flats     Builder B   Project L  \n\n</pre>\n\n<p>How to Change Procedure in such a way it remove parameters from filters so it brings result.\nThe parameters should be removed in following order builder, location and property type.</p>\n\n<p>Property type should be given highest preference followed Location and builder name</p>\n\n<p>Thanks for Reply</p>\n"},{"tags":["mysql","import","xampp"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4689,"score":0,"question_id":6042133,"title":"Import mysql DB with XAMPP in command LINE","body":"<p>I have this command:</p>\n\n<pre><code>mysql -u #myusername -p #mypasswd MYBASE &lt; c:\\user\\folderss\\myscript.sql\n</code></pre>\n\n<p>But I get the following error:</p>\n\n<pre><code>Error\nunknow command '\\U'\nunknow command '\\m'\nunknow command '\\D'\nunknow command '\\L'\n</code></pre>\n"},{"tags":["mysql","ruby-on-rails","ruby"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13245346,"title":"How to convert string into a decimal?","body":"<p>I have two strings \"0.31\" and \"0.0076\" and they need to be stored in a decimal(10,2) column in MySQL. How do I do this conversion in ruby but not in mysql directly</p>\n"},{"tags":["php","mysql","apache","windows-7","64bit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13244975,"title":"MySQL 32 bit or 64 bit - Apache 32 bit Windows 64 bit?","body":"<p>I'm using Windows 7 64 bit.</p>\n\n<p>There is no official 64 bit installer for Apache so I'm using Apache 2.2.22 32 bit (and PHP 5.3.18 32 bit btw).</p>\n\n<p>I suppose I should use MySQL 32 bit then (otherwise there would be conflicts with Apache and/or PHP as I vaguely recall my trials and errors long ago)</p>\n\n<p>Have I missed anything?</p>\n"},{"tags":["php","javascript","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13244754,"title":"Combobox that list items based in the selected item in another combobox","body":"<p>I do have a routine that uses PHP, MySQL and JavaScript. There are two tables: tbl_category and tbl_subcategory just like this:</p>\n\n<h2>tbl_category</h2>\n\n<ol>\n<li>cat_id</li>\n<li>cat_name</li>\n</ol>\n\n<h2>tbl_subcategory</h2>\n\n<ol>\n<li>scat_id </li>\n<li>cat_parent_id</li>\n<li>cat_name</li>\n</ol>\n\n<p>They have some information inside like</p>\n\n<h2>tbl_category:</h2>\n\n<ol>\n<li>Pants</li>\n<li>Shoes</li>\n<li>t-Shirts</li>\n</ol>\n\n<h2>tbl_subcategory:</h2>\n\n<ol>\n<li>1 Jeans</li>\n<li>1 Heavy Duty</li>\n<li>2 Boots</li>\n<li>2 Sandals</li>\n<li>3 Long Sleeves</li>\n<li>3 Short Sleeves</li>\n<li>3 Polo</li>\n</ol>\n\n<p>I put in the file head the link to the javascript library:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"jquery-1.8.2.min.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>of course I download previously from the jquery website(newer version).</p>\n\n<p>I have now the script routine:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n  $(document).ready(function(){\n     $(\"select[name=cat_id\").change(function(){\n        $(\"select[name=scat_id]\").html('&lt;option value=\"\"&gt;Loading...&lt;/option&gt;');\n        $.post(\"ajax_subcategory.php\",\n              {cat_id:$(this).val()},\n              function(valor){\n                 $(\"select[name=scat_id]\").html(valor);\n              }\n              )\n     })\n  })\n</code></pre>\n\n<p></p>\n\n<p>Now I have the form, with the select field Category pre-loaded with data from the table tbl_category:</p>\n\n<pre><code>&lt;form name=\"form\" method=\"post\" action=\"\" enctype=\"multipart/form-data\"&gt;\n&lt;table width=\"100%\" border=\"0\" cellspacing=\"6\" cellpadding=\"0\"&gt;\n&lt;tr&gt;\n   &lt;td align=\"right\"&gt;Category:&lt;/td&gt;\n   &lt;td&gt;&lt;select name=\"cat_id\" &gt;\n          &lt;option value=\"0\"&gt;Choose category&lt;/option&gt;\n    &lt;?php\n             $sql1 =mysql_query(\"SELECT * FROM tbl_category ORDER by cat_name\")or die(mysql_error());\n            while($row = mysql_fetch_array($sql1))\n            {\n               echo (\"&lt;option value=\\\"$row[cat_id]\\\"\" . ($sql1 == $row[\"cat_name\"] ? \" selected\" : \"\") . \"&gt;$row[cat_name]&lt;/option&gt;\");  \n            }\n          ?&gt;&lt;/select&gt; \n   &lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n   &lt;td align=\"right\"&gt;Sub-category:&lt;/td&gt;\n   &lt;td&gt;&lt;select name=\"scat_id\" selected=\"selected\" &gt;\n       &lt;option value=\"0\"&gt;Waiting category...&lt;/option&gt;\n       &lt;/select&gt; \n   &lt;/td&gt;\n &lt;/tr&gt;\n &lt;/table&gt;\n &lt;input type=\"submit\" name=\"submit\" value=\"Submit\"/&gt;\n &lt;/form&gt;\n</code></pre>\n\n<p>and then the php file called ajax_subcategory:</p>\n\n<pre><code>&lt;?php\n\ninclude \"../connect_to_mysql.php\";\n\n$cat_id = $_POST['cat_id'];\n\n$sql1 =mysql_query(\"SELECT * FROM tbl_subcategory WHERE cat_parent_id='$cat_id' ORDER by cat_name\")or die(mysql_error());\nwhile($row = mysql_fetch_array($sql1))\n {\n    echo (\"&lt;option value=\\\"$row[scat_id]\\\"\" . ($sql1 == $row[\"scat_name\"] ? \" selected\" : \"\") . \"&gt;$row[scat_name]&lt;/option&gt;\");  \n }\n ?&gt;\n</code></pre>\n\n<p>Done! Everything looks perfect and beautiful. When I select the item in the first combo I can see the Javascript in action and the Loading... showing up but the  the second ComboBox always is empty\ndon't matter what item I select it shows up empty and become smaller(width).</p>\n\n<p>This is a good routine and I saw working in the web from another website.</p>\n\n<p>Can you guys help me out to find a solution?</p>\n\n<p>Thanks</p>\n"},{"tags":["mysql","query"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13245476,"title":"Error (1093):You cant update target table for update in FROM Clause","body":"<p><strong>This is the select statement  which i have got the correct answer:</strong></p>\n\n<pre><code>select s_billing_cycle.Billing_cycle from s_billing_cycle \njoin o_daily_lcsgeneration_copy on o_daily_lcsgeneration_copy.Location=s_billing_cycle.Location where o_daily_lcsgeneration_copy.Date between s_billing_cycle.From_Date and s_billing_cycle.To_Date\n</code></pre>\n\n<p><strong>while updating the same query into another table i couldnt do that using update query getting :\nYou cant update target table \"o_daily_lcsgeneration_copy\" for update in FROM Clause \nthe query i have used is :</strong></p>\n\n<pre><code>update o_daily_lcsgeneration_copy  set o_daily_lcsgeneration_copy.Billing_cycle = (select s_billing_cycle.Billing_cycle from s_billing_cycle join o_daily_lcsgeneration_copy on o_daily_lcsgeneration_copy.Location=s_billing_cycle.Location where o_daily_lcsgeneration_copy.Date between s_billing_cycle.From_Date and s_billing_cycle.To_Date) \n</code></pre>\n\n<p>Help  me !!!</p>\n"},{"tags":["asp.net","mysql","crystal-reports"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13245445,"title":"Crystal Reports using MYSQL Prompting Database Login when given print","body":"<p>Hi I'm trying to generate crystal reports with MYSQL as my backend. I get the Reports generated correctly. But, when I try to take the print, The Crystal Reports ask Database login information like <strong>Database name, Username and Password</strong>. I searched a fix for this issue. But couldn't get one. Is there any way to get around this issue? </p>\n"},{"tags":["php","mysql","search"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":293,"score":1,"question_id":3009934,"title":"MySQL Search Within Database (Table Search)","body":"<p>Alright, I'm trying to write a piece of code (PHP and SQL), or rather a search query to display all the tables that contain a certain prefix. Something like what is displayed below (but is obviously incorrect)</p>\n\n<pre><code>SELECT TABLES LIKE chat_\n</code></pre>\n\n<p>So any table that has the chat prefix, would be displayed. I plan on formatting the output, so it's not going to be a raw output, and I also understand that \"what idiot would display table names publicly\", and security measures are being taken to prevent that \"accidental\" table drop (just trying to avoid a flame war). So, how is this accomplished? </p>\n"},{"tags":["mysql","database","linux","windows","mysql-workbench"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13225379,"title":"mysql dump from linux to windows","body":"<p>Good day stack overflow.</p>\n\n<p>I am having problems on importing an sql file to my windows machine. The sql file is from a linux machine. What happens is that the table names from linux are camel cased and when migrated to windows, all becomes lower cased. I don't want to adjust my codes to be able to access my database so is there anyway that I could achieve the camel-cased table names in windows?</p>\n\n<p>Many thanks.</p>\n\n<hr>\n\n<p>From linux table names:\n -> FooBar</p>\n\n<p>When it is imported to mysql workbench in windows:\n -> foobar</p>\n\n<p>the query looks like this:</p>\n\n<pre><code>SELECT * FROM FooBar; // when the program is pointed to the database in windows, it will spit out that the table does not exist because the table name is \"foobar\"\n</code></pre>\n"},{"tags":["mysql","wordpress"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13226927,"title":"How do I show a row based on the value of another field in a separate row?","body":"<p>In the table below, the meta keys <code>logo_ID</code> and <code>show_logo</code> are associated with each other based on the <code>post_id</code> field. How do I get the value of <code>logo_ID</code> for rows which have a <code>show_logo</code> of  <code>1</code> using <strong>only mysql</strong>?</p>\n\n<pre><code>post_id  meta_key     meta_value\n-------  -----------  ----------\n262      logo_ID      263       \n262      show_logo    0         \n260      logo_ID      261       \n260      show_logo    1         \n258      logo_ID      259       \n258      show_logo    1         \n</code></pre>\n\n<p>If it looks familiar it's because this is from the WP <code>postmeta</code> table. I'm using <code>$wpdb</code> to query the db so everything has to be in mysql (no WP functions anywhere).</p>\n"},{"tags":["mysql","sql","tsql","group"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":50,"score":3,"question_id":13238464,"title":"Group data based on certain value","body":"<p>I have a table called x, the table has id column and repeat status column. The id can store same values even 6 of them while the repeat status increments each time an id is inserted 1,2...n. If a new different id is inserted the repeat status starts from 1 e.g</p>\n\n<pre><code> xid       repeat_status\nxx123           1\nxx123           1\nxx123           2\nxx123           3\nxx123           3 \nxxx45           1\nxxx45           2\nxxx45           2\n</code></pre>\n\n<p>How can i modify the query below to return something like this:</p>\n\n<pre><code> xid           repeat_status\nxx123             1\nxx123             2\nxx123             3\n\nxxx45             1\nxxx45             2\n\nSELECT xid\n      ,repeat_status \nFROM x \nGROUP BY repeat_status;\n</code></pre>\n"},{"tags":["php","mysql","server-side","lamp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":41,"score":-1,"question_id":13244613,"title":"How to setup my server side script on web server","body":"<p>I have a server-side script which an app connects to. This works perfectly well on my LAMP server running on my development computer but when I uploaded the script to a live web server, I get errors, the latest being Error 404 which is \"Not Found\". I know it has to do with not putting the files in the right places or perhaps some security setting is responsible. Can people with experience guide me on how to set up my scripts so I can access them?</p>\n\n<p>Here is the structure on my server, and it works: In <code>/var/www</code>, I have a folder called <code>MyAPI</code> and inside this folder, I have my <code>index.php</code> file and 2 supporting files which work together. I also have a folder called <code>Store</code> inside the same <code>MyAPI</code> folder where I store uploaded documents. I also have a MySQL database which I am connecting to and can read and write from. How do I place these on the server so it is accessible? The error I am getting again is Error 404, how can I be sure the files are found? I disabled <code>.htaccess</code> temporarily but it still did not work. Please advise.</p>\n\n<p>CLARIFICATION: Note that my explanation about /var/www is what ALREADY works right now. I was just giving an explanation of the setup on my development computer. The problem is how to transfer the structure unto a LIVE server. Kindly look at the setup described and how this should be transferred to a live server.</p>\n\n<p><strong>Post Issue: Why does my question have a -1?</strong> Whoever put that should remove it as this is a real question for a real problem and it has not been solved yet.</p>\n"},{"tags":["mysql","ruby"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13245115,"title":"Non english characters getting messed up while saving in MySQL table","body":"<p>I am trying to save 'non english' characters in mysql table. But when I check the table data, it shows some junk characters.</p>\n\n<p>Text before save:</p>\n\n<p><code>КУЛИНАРНЫЕ ФЕСТИВАЛИ В ЕВРОПЕ Нужно Путешествовать ВКУСНО!...</code></p>\n\n<p>Text after save in mysql:</p>\n\n<p><code>ÐšÐ£Ð›Ð˜ÐÐÐ ÐÐ«Ð• Ð¤Ð•Ð¡Ð¢Ð˜Ð’ÐÐ›Ð˜ Ð’ Ð•Ð’Ð ÐžÐŸÐ• ÐÑƒÐ¶Ð½Ð¾ ÐŸÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ Ð’ÐšÐ£Ð¡ÐÐž!... http://t.co/JdXw8Od3</code></p>\n\n<p>Table column Settings:</p>\n\n<ul>\n<li>varchar(1024)</li>\n<li>utf-8 general-ci</li>\n</ul>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13244288,"title":"ERROR calling out CURDATE()","body":"<p>Why is there an error when i called out the CURDATE?</p>\n\n<pre><code>UPDATE TABLENAME\n    SET DATEATR= (TO_DATE(CURDATE() ,'DD-MM-YYYY') - WORKDATE /365 );\n</code></pre>\n"},{"tags":["mysql","varchar"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13244462,"title":"Why does MySQL VARCHAR allow more than the max length?","body":"<p>I have created a table with an UTF-8 <code>VARCHAR(5000)</code>, and filled it with data.\nBut it looks like this field is allowing more data than it is instructed to:</p>\n\n<pre><code>mysql&gt; DESCRIBE test;\n+---------+------------------+------+-----+---------+----------------+\n| Field   | Type             | Null | Key | Default | Extra          |\n+---------+------------------+------+-----+---------+----------------+\n| id      | int(10) unsigned | NO   | PRI | NULL    | auto_increment |\n| comment | varchar(5000)    | YES  |     | NULL    |                |\n+---------+------------------+------+-----+---------+----------------+\n2 rows in set (0.01 sec)\n\nmysql&gt; SELECT MAX(LENGTH(comment)) FROM test;\n+----------------------+\n| MAX(LENGTH(comment)) |\n+----------------------+\n|                 5001 |\n+----------------------+\n1 row in set (0.01 sec)\n</code></pre>\n\n<p>Why is that?</p>\n"},{"tags":["mysql","database-design","one-to-many"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":505,"score":3,"question_id":7411857,"title":"database structure for google plus circles?","body":"<p>I know for sure that Google does not use mysql, but in my case I happen to work on a project using mysql and has features that are very similar to circles:</p>\n\n<ol>\n<li>user can belong to many circles</li>\n<li>user can be add/removed from circles</li>\n<li>posts can be public or can be shared to circles/individual users</li>\n<li>if a post is shared to a circle, and new user is added to this circle then this user can also view the post. </li>\n<li>If a post is shared to a circle, and an user is removed from this circle then: a. he/she can still view the post if he/she replied in the post  b. he/she cannot view the post anymore otherwise</li>\n</ol>\n\n<p>As you can already see, with the above requirements there are a lot going on in the database. If I really share both to circles and individual users, i will probably need 2 One2Many tables. If I share only to individual users by getting the list of users for each circle at the very beginning, then I run into troubles later on when users edit these circles.</p>\n\n<p>Currently, my get-around hack is to <strong>share to circles only</strong>, even <strong>for each individual user I create a 1 user only circle</strong>. </p>\n\n<p>So my current database tables look a bit like this:</p>\n\n<p>circle_to_user:</p>\n\n<pre><code>id\ncircle_id\nuser_id\nfriend_id\n</code></pre>\n\n<p>post:</p>\n\n<pre><code>id\nuser_id\nis_public\n</code></pre>\n\n<p>post_to_circle</p>\n\n<pre><code>id\npost_id\ncircle_id\n</code></pre>\n\n<p>To query out the list of posts a user can view, the query is rather complicated and consists of multiple joins:</p>\n\n<pre><code>$q = Doctrine_Query::create()\n            -&gt;addSelect('s.*')\n            -&gt;addSelect('u.id, u.first_name, u.last_name, u.username, u.avatar')\n            -&gt;from('UserStatus s')\n            -&gt;leftJoin('s.User u')\n            -&gt;orderBy('s.created_at DESC');\n\n        $userId = sfContext::getInstance()-&gt;getUser()-&gt;getUserId();\n        if ($userId == $viewUserId) {\n            $q-&gt;orWhere('s.user_id = ?', $userId);\n            $q-&gt;orWhere('s.user_id IN (SELECT DISTINCT cu1.friend_id FROM CircleUser cu1 WHERE cu1.user_id = ?) AND s.is_public = ?', array($userId, true));\n            $q-&gt;orWhere('s.id IN (SELECT DISTINCT(us2.id)\n                                                        FROM\n                                                                UserStatus us2 INNER JOIN us2.UserStatusCircles usc2 ON usc2.user_status_id = us2.id\n                                                                INNER JOIN usc2.Circle c2 ON c2.id = usc2.circle_id\n                                                                INNER JOIN c2.CircleUsers cu2 ON cu2.circle_id = c2.id AND cu2.friend_id = ?)', $userId);\n        } else {\n            $q-&gt;orWhere('s.user_id = ? AND s.is_public = ?', array($viewUserId, true));\n            $q-&gt;orWhere('s.id IN (SELECT DISTINCT(us1.id)\n                                                        FROM\n                                                                UserStatus us1 INNER JOIN us1.UserStatusCircles usc1 ON usc1.user_status_id = us1.id AND us1.user_id = ?\n                                                                INNER JOIN usc1.Circle c1 ON c1.id = usc1.circle_id\n                                                                INNER JOIN c1.CircleUsers cu1 ON cu1.circle_id = c1.id AND cu1.friend_id = ?)', array($viewUserId, $userId));\n            $q-&gt;orWhere('s.id IN (SELECT DISTINCT(us2.id)\n                                                        FROM\n                                                                UserStatus us2 INNER JOIN us2.UserStatusCircles usc2 ON usc2.user_status_id = us2.id AND us2.user_id = ?\n                                                                INNER JOIN usc2.Circle c2 ON c2.id = usc2.circle_id\n                                                                INNER JOIN c2.CircleUsers cu2 ON cu2.circle_id = c2.id AND cu2.friend_id = ?)', array($userId, $viewUserId));\n        }\n</code></pre>\n\n<p>I hope that the above info is not too long, I just want to give lots of details. My questions are:</p>\n\n<ol>\n<li>Given the above requirements, is my implementation good enough, or is there anything I should change to make it better?</li>\n<li>I want to search for articles regarding this type of specific database design problem but could not find much, is there any technical term for this type of database design</li>\n<li>Would you suggest any alternatives such as using another type of database, or perhaps index the posts with a searchengine like elastic and let it handle the search instead of using mysql?</li>\n</ol>\n\n<p>Thank you very much for reading until this point, if you find anything I should change in the question to make it easier to follow and to answer, please do let me know.</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":51,"score":4,"question_id":13210521,"title":"Is there an analytical function in mysql to solve this issue?","body":"<p>I have a mysql table like below</p>\n\n<pre><code>id   trader price\n111   abc    5\n222   xyz    5.20\n333   abc    5.70\n444   xyz    5\n555   abc    5.20\n</code></pre>\n\n<p>I want to have a result to find the number of times each trader increased or decreased price\nas below</p>\n\n<pre><code>id   trader price  lagged_price   flag\n111   abc    5\n222   xyz    5.20   5        \n333   abc    5.70   5.20        increased \n444   xyz    5      5.70        increased  \n555   abc    5.20   5           reduced\n                    5.20        increased\n</code></pre>\n\n<p>lagged_price is the column which lags the original column price. I need to have a flag saying that at a particular time the trader increased or decreased price\nin the above case the final result is</p>\n\n<p>trader  abc increased price twice\n trader xyz increased price ones and decreased price ones</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13244726,"title":"Equivalent of SQL function DateFirst in MYSQL","body":"<p>There is a function called datefirst in SQL that allow you to set what the first day of\nthe week should be.So is there any equivalent function in Mysql?</p>\n"},{"tags":["mysql","sql","database","query"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13243626,"title":"Efficient Query, Table Bridge/Indexing and strucuture","body":"<p>In my PhpMyAdmin database I have 9 tables. 8 of those tables are relevant to me at this moment. I would like my queries to be executed quickly enough but I am not sure the design/structure of the tables are the most effecient. Any suggestion of merging a table with another or creating another bridge table?  Also, I am struggling in building a query that will display bridge results from the following tables: <code>semester</code>, <code>schedule</code>, <code>office_hours</code>, <code>faculty</code>, <code>section</code>, <code>major_minor</code>, <code>major_class_br</code>, <code>class</code>?</p>\n\n<p><a href=\"http://webprolearner2346.zxq.net/class_des/\" rel=\"nofollow\">TABLE STRUCTURE</a></p>\n\n<p>Basic Query- that shows class details</p>\n\n<pre><code>SELECT  class_name, class_caption, class_credit_hours, class_description\nFROM class  \n</code></pre>\n"},{"tags":["mysql","ruby-on-rails","ruby","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13240175,"title":"How to change test database schema (rails unit test)","body":"<p>I am running into a frustrating issue when trying to unit test a specific function of my app.</p>\n\n<p>The process is carried out as such:</p>\n\n<ol>\n<li>Create a temporary 'audience' table</li>\n<li>Call function foo, which inserts certain user data into the 'audience' table</li>\n<li>Drop the 'audience' table</li>\n</ol>\n\n<p>In order to test function foo, I need to create the temporary table within my unit test.  My plan is to create the table within the setup method, and drop it within the teardown method.  I'll call function foo, and depending on if data is inserted into 'audience', that will determine if my test passed or failed.  There's only one problem.  Changing the database schema within the unit test file seems to cause problems.  The error that I get is:</p>\n\n<pre><code>ActiveRecord::StatementInvalid: Mysql2::Error: SAVEPOINT active_record_1 does not exist: ROLLBACK TO SAVEPOINT active_record_1\n</code></pre>\n\n<p>It seems like changing the schema ruins the rollback feature that Rails implements in the unit tests.  Is there any way that I can create and drop this table outside of the rollback scope? One idea I had to get around this was to create a migration that added the 'audience' table to my test database, but I'd like to keep everything contained within the same unit test file.</p>\n"},{"tags":["php","mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13243080,"title":"PHP - Warning: Invalid argument supplied for foreach()","body":"<p>I can't figure out why I am getting this warning: \"Warning: Invalid argument supplied for foreach()\".  This code works locally, but when I pushed to the server I get the warning.  Any ideas why?</p>\n\n<pre><code>function updateVIfromScores($client_id, $vi__weight_array){\n    $vi = 0;\n    $sql = \"SELECT * FROM client_vulnerability_scores\n        WHERE client_id = $client_id\";\n    $result = mysql_query($sql) or die('query in updateVIfromScores failed:'.mysql_error().'&lt;br/&gt;sql:'.$sql.'&lt;br/&gt;');\n    foreach(mysql_fetch_array($result, MYSQLI_ASSOC) as $key =&gt; $value){\n        $vi += $vi__weight_array{$key} * $value;\n    }\n    return $vi;\n}\n</code></pre>\n"},{"tags":["mysql","mysqldump"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":34,"score":0,"question_id":13230557,"title":"How to import mysql dumpfile?","body":"<p>How to import MySQL Dumpfile, SQL Datafile Into My Database. I am using MySql and basically want to attach that dump file to drupal.</p>\n\n<p>Please guide , I am not using PhpMyadmin.</p>\n"},{"tags":["php","mysql","xml","date"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13244481,"title":"Convert int(11) to yyyy-mm-dd format","body":"<p>How can I convert an integer into a date format like <code>2012-12-12</code> for insertion in an XML document?</p>\n\n<pre><code>&lt;Feed&gt;\n&lt;order&gt;\n&lt;Order&gt;\n&lt;orderid&gt;71&lt;/orderid&gt;\n&lt;login&gt;krishna&lt;/login&gt;\n&lt;date&gt;1123213230&lt;/date&gt;\n</code></pre>\n\n<p>I've used the below code:</p>\n\n<pre><code>$_xml .= \"\\t&lt;date&gt;\" . $n['date'] . \"&lt;/date&gt;\\r\\n\";\n</code></pre>\n"},{"tags":["php","mysql","paypal","ipn"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13244636,"title":"php paypal ipn membership error","body":"<p>hello I integrated the membership subscription in the website,\nbut I fail to insert data to the database.</p>\n\n<p>checking out all the function I make a txt file with php with data and generates me correctly.</p>\n\n<p>but I can not verify any data and less insert.</p>\n\n<pre><code>        &lt;?php\n\n          // read the post from PayPal system and add 'cmd'\n          $req = 'cmd=_notify-validate';\n\n          foreach ($_POST as $key =&gt; $value) \n          {\n                $value = urlencode(stripslashes($value));\n                $req .= \"&amp;$key=$value\";\n          }\n\n          // Post back to PayPal system to validate\n          $header .= \"POST /cgi-bin/webscr HTTP/1.0\\r\\n\";\n          $header .= \"Content-Type: application/x-www-form-urlencoded\\r\\n\";\n          $header .= \"Content-Length: \" . strlen($req) . \"\\r\\n\\r\\n\";\n          $fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30);\n\n          // Assign posted variables to local variables\n          $item_name        = $_POST['item_name'];\n          $item_number      = $_POST['item_number'];\n          $payment_status   = $_POST['payment_status'];\n          $payment_amount   = $_POST['mc_gross'];\n          $payment_currency = $_POST['mc_currency'];\n          $txn_id           = $_POST['txn_id'];\n          $receiver_email   = $_POST['receiver_email'];\n          $payer_email      = $_POST['payer_email'];\n          $user_id          = $_POST['custom'];\n\n//Here i make the txt file and it works correctly\n//but after this does not work or make a txt file\n\n    //Insert and update data\n    if (!$fp) \n    {\n    // HTTP ERROR\n    } \n    else \n    {\n\n    fputs ($fp, $header . $req);\n\n          while (!feof($fp)) \n          {\n                $res = fgets ($fp, 1024);\n\n                if (strcmp ($res, \"VERIFIED\") == 0) \n                {\n                      //Verificamos el estado del pedido\n                      if ($payment_status == 'Completed') \n                      {\n                            $txn_id_check = mysql_query(\"SELECT Transaction_ID FROM \".$db_table_prefix.\"Users_Payments WHERE Transaction_ID='\".$txn_id.\"'\");\n                            if (mysql_num_rows($txn_id_check) !=1) \n                            {\n                                  //Si el pago se ha realizado al dueño especificado y coincide con el dueño\n                                  if ($receiver_email == $website_Payment_Email) \n                                  {\n                                        //Tipo de cuenta segun pagado\n                                        if ($payment_amount == '10.00' &amp;&amp; $payment_currency == 'EUR') \n                                        {\n\n                                        //add txn_id to database\n                                        $log_query = mysql_query(\"INSERT INTO `\".$db_table_prefix.\"Users_Payments` VALUES ('','\".$txn_id.\"','\".$payer_email.\"')\");\n\n                                        //update premium to 3\n                                        $update_premium = mysql_query(\"UPDATE \".$db_table_prefix.\"Users SET Group_ID='3' WHERE User_ID='\".$user_id.\"'\");\n\n                                        }\n                                  }\n                            }            \n                      }\n                }\n                else if (strcmp ($res, \"INVALID\") == 0) \n                {\n                // log for manual investigation\n                }\n          }\n\n    fclose ($fp);\n\n    }\n    ?&gt;\n</code></pre>\n\n<p>I call this file with require_once () with the connection to the database</p>\n\n<p>any ideas?</p>\n\n<p>thanks</p>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13244489,"title":"INSERT INTO Table from multiple tables","body":"<p>Hey so I have a Junction table linking two unrelated tables. Both the tables have ID's. I need to select the ID from each table using WHERE with different values, for example this is how I see it.</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>INSERT INTO c (aID, bID)\nVALUES (SELECT a.ID WHERE a.Name=\"Me\", SELECT b.ID WHERE b.Class=\"Math\");\n</code></pre>\n\n<p>All the examples I've seen use a join statement but the two tables have a common value, in this case they don't. </p>\n"},{"tags":["python","mysql","sqlite3","flask"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":29,"score":3,"question_id":13244314,"title":"What alterations do I need to make for my Flask python application to use a MySQL database?","body":"<p>I am new to developing applications, and I have been trying to familiarize myself with doing so with Flask. I followed their great tutorial and read their equally-detailed documentation to create my first basic app which uses a SQLite3 database. </p>\n\n<p>To accomplish this, and per their instructions, I imported the following:</p>\n\n<pre><code>from __future__ import with_statement\nfrom contextlib import closing   \n\nimport sqlite3\nfrom flask import Flask, request, session, g, redirect, url_for, \\\n     abort, render_template, flash  \n</code></pre>\n\n<p>and have a file <code>schema.sql</code> set up with the following to configure the database:</p>\n\n<pre><code>drop table if exists entries;\ncreate table entries (\n  id integer primary key autoincrement,\n  title string not null,\n  text string not null\n);\n</code></pre>\n\n<p>I access the database using commands that again came from the <a href=\"http://flask.pocoo.org/docs/tutorial/views/#tutorial-views\" rel=\"nofollow\">Flask site tutorial</a>. I am under the impression that I need to, when creating applications where users create and manage their own accounts, implement a MySQL database instead. This being the case, what sorts of things about my database-related code do I need to change? I am sure there is quite a large difference between working with these two databases, so any point of reference – suggestions of tutorials to follow or documentation to read – would be greatly appreciated.</p>\n\n<p>Many thanks in advance.</p>\n"},{"tags":["php","mysql","phpmyadmin","joomla1.5"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":45,"score":-2,"question_id":13220351,"title":"Mysql Query to fetch records","body":"<p>I have a table structure which looks like as follows<img src=\"http://i.stack.imgur.com/xmt3U.png\" alt=\"enter image description here\"></p>\n\n<p>In the above table I need the <code>team_id</code> for which <code>win+runs_scored</code> is <em>maximum</em>.</p>\n\n<p>I know that task can be accomplished by PHP code but if there is any query possible for this then it would be easier for me and also main thing is that in real table contains more then <em>15000 rows</em> so please if some can can provide me a better solution then it would be great</p>\n"},{"tags":["mysql","ios"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13244247,"title":"Static cells with an array","body":"<p>I'm using xml to export mysql information to ios, and that saves it in an array. However, I have static cells for my table. How would I be able to call a string from the array, seeing as how I cannot use objectForIndex....</p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":38,"score":3,"question_id":13244136,"title":"Compare rows in same table in mysql","body":"<p>I have a mysql table like below</p>\n\n<pre><code>id   trader price\n111  abc    5 \n222  xyz    5.20 \n333  abc    5.70 \n444  xyz    5 \n555  abc    5.20 \n</code></pre>\n\n<p>I need to compare column 1's price with column 2's price and accroding to the given sample column 2's price is less than column 1's price which means that trader xyz increased the price once, and in the same way when we compare column 2's price with column 3's price where column 3's price is higher than column 2's price which means trader abc also increased the price once. So in this manner I need to compare the entire table and find how many times each trader increased or decreased price...</p>\n\n<p>I dont have any idea to do this, can someone please help me on this</p>\n"},{"tags":["mysql","database","compatibility","psql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13244294,"title":"Errors running mysql queries in psql","body":"<p>I wrote queries in what is supposed to be standard SQL, and tested them in mySQL.</p>\n\n<p>Now when I try to run them in psql I get all sorts of errors, which I don't really understand.\nHere's the original query, that works in mySQL:</p>\n\n<pre><code>CREATE VIEW popularCSsections AS (\n    SELECT  sect.csid, COUNT(sc.sid) as numStudents\n    FROM courseSection sect, studentCourse sc, department d\n    WHERE sect.csid = sc.csid \n        AND sect.dcode = d.dcode \n        AND dname = \"Computer Science\"\n    GROUP BY sect.csid\n    HAVING numStudents &gt; 2\n);\n</code></pre>\n\n<p>gives this error:</p>\n\n<pre><code>psql:a2tables:60: ERROR:  column \"Computer Science\" does not exist\nLINE 8:   AND department.dname = \"Computer Science\" \n                                 ^\n</code></pre>\n\n<p>Can you please help me understand the nature of the errors and help me fix them?</p>\n\n<hr>\n\n<p>Additional issue:</p>\n\n<pre><code>CREATE VIEW popularCSsections AS (\nSELECT  sect.csid, COUNT(sc.sid) as numStudents\nFROM courseSection sect, studentCourse sc, department d\nWHERE sect.csid = sc.csid \n    AND sect.dcode = d.dcode \n    AND dname = 'Computer Science'\n    GROUP BY sect.csid\n    HAVING numStudents &gt; 2\n);\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>psql:a2tables:70: ERROR:  column \"numstudents\" does not exist\nLINE 8:  HAVING numStudents &gt; 2\n                ^\n</code></pre>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13228047,"title":"How to insert multiple records based from search result","body":"<p>I have a problem when inserting multiple records which is based from search result. the search field was work fine. but the problem was the insert won't work. additionally, before I insert the records I have to edit the 'grade' field section on whatever i want. here is my code.</p>\n\n<pre><code>&lt;?php\nrequire_once('../../_includes/initialize.php');\n?&gt;\n\n\n&lt;html&gt;&lt;br /&gt;\n\n&lt;form action=\"search.php\" method=\"POST\"&gt;\n&lt;?php\necho \"&lt;b&gt;&lt;center&gt;Search Results&lt;/center&gt;&lt;/b&gt;&lt;br&gt;&lt;br&gt;\";\n\nif (isset($_POST['search_name'])) {\n\n    $search_name = $_POST['search_name'];\nif (!empty($search_name)) { \n\n$query=\"SELECT * FROM students WHERE course like                          '%\".mysql_real_escape_string($search_name).\"%'\";\n\n$result=mysql_query($query);\n$num=mysql_num_rows($result);\n\nif (($num) &gt;=1) {\n//echo 'Found.';\n\n$i=0;\nwhile ($i &lt; $num) {\n$id=mysql_result($result,$i,\"id\");\n$f_name=mysql_result($result,$i,\"f_name\");\n$g=mysql_result($result,$i,\"dump\");\n\n?&gt; \n\n&lt;input name=\"id\" type=\"text\" value=\"&lt;?php echo @$id; ?&gt;\" size=\"40\" /&gt;\n&lt;input name=\"f_name\" type=\"text\" value=\"&lt;?php echo @$f_name; ?&gt;\" size=\"40\" /&gt;\n&lt;input name=\"a\" type=\"text\"  value=\"&lt;?php echo $g; ?&gt;\" size=\"40\" /&gt;\n\n&lt;br /&gt;\n\n&lt;?php\n$i++;\n}   \n\n} else {\n\necho 'No results found.';\n}  \n}\n}\n\n?&gt;\n&lt;?php\nif (isset($_POST['Submit_Grade'])) {\n\n$query = \"INSERT INTO samplestudgrade (id, name, grade) VALUES ('\".$_POST[\"id\"].\"','\".$_POST[\"f_name\"].\"','\".$_POST[\"a\"].\"')\";\n            $query_run = mysql_query($query);\n\n            }\n\n?&gt;\n\n&lt;input name=\"search_name\" type=\"text\" value=\"search...\" /&gt;\n&lt;input type=\"submit\" value=\"Search\"/&gt;\n&lt;input type=\"submit\" name=\"Submit_Grade\" value=\"submit\" /&gt;\n&lt;/form&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","mysql","exception","glassfish"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13085944,"title":"How to handle database crashes (Glassfish/MySQL)?","body":"<p>I have a 3-tiered application with Glassfish 3.1.2.2, MySQL database and a Swing client application. Is it somehow possible to handle a database server crash?</p>\n\n<p>I tried to stop the MySQL service during my application is running. Then I get javax.ejb.EJBAccessException exceptions everytime I try to access the database through one of my facade session beans.</p>\n\n<p>I want to notify the user that the database is currently down. furthermore i want to set my application in kind of a \"sleep-mode\" until the database is up and running again.</p>\n\n<p>What would be a good (and possibly easy) approach to handle such a scenario?</p>\n\n<p>Thanks for your help in advance!</p>\n"},{"tags":["mysql","django","pagination"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13244023,"title":"How to paginate by date with Django?","body":"<p>I looked up how to use the Django's built-in pagination and it doesn't look very scalable for certain cases. In my case, I am climbing a log table so what I wanted to do was something like this:</p>\n\n<pre><code>Page 1:\nSELECT ... FROM log WHERE date &gt; '2012-11-04 00:00:00' LIMIT 10;\nPage 2:\nSELECT ... FROM log WHERE date &gt; '#LAST_VALUE_FROM_PAGE_1' LIMIT 10;\nPage 3:\nSELECT ... FROM log WHERE date &gt; '#LAST_VALUE_FROM_PAGE_2' LIMIT 10;\n...\n</code></pre>\n\n<p>In other words, I want to climb an index instead of grabbing the entire result-set and iterating on that. Assuming date is indexed, this should keep things really efficient while still producing mostly the same results since I'm always ordering by date anyway.</p>\n\n<p>What I was curious about was if this has already been done and a modular way, much like how Django's built-in pagination methods worked or if I'll need to go it alone and write my own method?</p>\n"},{"tags":["php","mysql","database","wamp"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":2417,"score":-1,"question_id":4237793,"title":"MySQL Error: \"Unknown table engine 'InnoDBopt'\"","body":"<p>I'm getting the following error on some code from an old app:</p>\n\n<pre><code>A Database Error Occurred\nError Number: 1286\n\nUnknown table engine 'InnoDBopt'\n\nINSERT INTO `sessions` (`session_id`, `ip_address`, `user_agent`, `last_activity`) VALUES ('2ef196aba7f060308be6b7bc1133671f', '127.0.0.1', 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) Ap', 1290342372)\n</code></pre>\n\n<p>I'm using MySQL version 5.1.36. This app was developed a while ago, so most likely I just need to downgrade my MySQL version to run this? If so, please advise what version I need to run this.</p>\n\n<p><strong>Edit:</strong> To clarify, I had to copy my database from one mysql installation to another, so I copied everything inside `c:/mysql/data' to the other installation of MySQL, that's likely what's causing this issue.</p>\n"},{"tags":["mysql","sql","subquery"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13244144,"title":"Delete from table where key not found in other table?","body":"<p>Table 1: </p>\n\n<ul>\n<li>id </li>\n<li>name</li>\n</ul>\n\n<p>Table 2: </p>\n\n<ul>\n<li>id</li>\n<li>other_table_id </li>\n<li>table_1_id </li>\n<li>..</li>\n</ul>\n\n<p>Basically what I want to do is</p>\n\n<pre><code>Delete from table_1 \nwhere id not in (select table_1_id \n                 from table_2 \n                 group by table_1_id);\n</code></pre>\n\n<p>Which should work, what I am wondering is if the sub query is the best way to do this/ is there any other way?</p>\n"},{"tags":["mysql","sql","database"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13242427,"title":"How to structure my Users Database?","body":"<p>I have a website that allows users to be different types. Each of these types can do specific things. I am asking if I should set up 1 table for ALL my users and store the types in an enum, or should I make different tables for each type. Now, if the only thing different was the type it would be easy for me to choose only using one table. However, here's a scenario.</p>\n\n<p>The 4 users are A, B, C, D.</p>\n\n<p>User A has data for:</p>\n\n<ul>\n<li>name</li>\n<li>email</li>\n</ul>\n\n<p>User B has data for:</p>\n\n<ul>\n<li>name</li>\n<li>email</li>\n<li>phone</li>\n</ul>\n\n<p>User C has data for:</p>\n\n<ul>\n<li>name</li>\n<li>email</li>\n<li>phone</li>\n<li>about</li>\n</ul>\n\n<p>User D has data for:</p>\n\n<ul>\n<li>name</li>\n<li>email</li>\n<li>phone</li>\n<li>about</li>\n<li>address</li>\n</ul>\n\n<p>If I were to create a single table, should I just leave different fields null for the different users? Or should I create a whole separate table for each user?</p>\n"},{"tags":["mysql","sql","select","uppercase"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13243594,"title":"sql : select uppercase columns in database","body":"<p>I need to select columns that end in an uppercase extension.</p>\n\n<p>for example, look at the following table.</p>\n\n<pre><code>id - picture\n1 - abc.JPG\n2 - def.jpg\n3 - 123.jpg\n4 - xyz.JPG\n</code></pre>\n\n<p>the results should give me the rows 1 and 4 because JPG are in uppercase.</p>\n\n<p>can anyone help?</p>\n"},{"tags":["c#","mysql","c","connection","mysqlconnection"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13241931,"title":"Connecting C# to MySQL and openning connection","body":"<p>This is my simple code just to read something from MySQL. But want I want is to create connection and command when Form is opened and just to open connection when button is clicked and do the rest. But It says </p>\n\n<pre><code>\"The name 'konekcija' does not exist in the current context\"\n</code></pre>\n\n<p>Could someone help me and explain me please.</p>\n\n<pre><code>namespace mysql_windows_console\n{\n    public partial class Form1 : Form\n    {\n        public Form1()\n        {\n            InitializeComponent();\n        }\n\n        public void Form1_Load(object sender, EventArgs e)\n        {\n            /*========MYSQL KONEKCIJA===========*/\n            string baza               = \"server=localhost;database=test;user=root;password=;\";\n            MySqlConnection konekcija = new MySqlConnection(baza);\n            MySqlCommand comm         = konekcija.CreateCommand();\n            /*========MYSQL KONEKCIJA===========*/\n        }\n\n        private void button1_Click(object sender, EventArgs e)\n        {\n            konekcija.Open();\n            string sql               = \"SELECT IME,PREZIME FROM tabela\";\n            MySqlDataAdapter adapter = new MySqlDataAdapter(sql,konekcija);\n            DataTable tab            = new DataTable();\n            adapter.Fill(tab);\n            dataGridView1.DataSource = tab;\n            konekcija.Close();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["mysql","ios","xml","xcode","core-data"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13244041,"title":"Array is null in xcode","body":"<p>I have been trying to send data down in xml format to the iphone. But I just cannot get the array to properly work. NSLog keeps returning null. What should I do to correct this?</p>\n\n<pre><code>&lt;?php\n...(mysql query)\n$q = $dbh-&gt;prepare( $sql );\n\n$doc = new DOMDocument();\n$r = $doc-&gt;createElement( \"oneam\" );\n$doc-&gt;appendChild( $r );\nforeach ( $q-&gt;fetchAll() as $row) {\n    $e = $doc-&gt;createElement( \"location\" );\n\n    $e-&gt;setAttribute( 'its', $row['oneam']);\n\n    $r-&gt;appendChild( $e );\n\n}\nprint $doc-&gt;saveXML();\n?&gt;\n</code></pre>\n\n<p>My Xcode for a view controller</p>\n\n<pre><code>- (void)viewDidLoad\n{\n    [super viewDidLoad];\n    char *cStr = \"YES\";\n    NSString *str3 = [NSString stringWithUTF8String:cStr];\n\n\n    NSString *urlString = [NSString stringWithFormat:@\"(censored)\", _login];\n\n    NSXMLParser *Parser = [[[NSXMLParser alloc] initWithContentsOfURL:[NSURL URLWithString:urlString]] autorelease];\n    [Parser setDelegate:self];\n    [Parser parse];\n\n\n    if (([[oneam objectForIndex:@\"its\" ]isEqualToString:@\"YES\" ])) {\n            [switch1 setOn:YES animated:YES];\n    }\n    else {\n            [switch1 setOn:NO animated:YES];\n    }\n\n}\n\n- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {\n\n    if ( [elementName isEqualToString:@\"location\"]) {\n        [oneam addObject:[[NSDictionary alloc] initWithDictionary:attributeDict]];\n    NSLog(@\"The array is %@\", oneam);\n    }\n}\n</code></pre>\n"},{"tags":["sql","mysql","query"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":4055,"score":1,"question_id":4714239,"title":"How to delete last record(on condition) from a table in MySql","body":"<p>I have a <strong>LoginTime</strong> table like this:</p>\n\n<pre><code>id | user_id | datetime\n1  |   1     | 2011-01-17 18:51:05\n2  |   1     | 2011-01-18 18:51:05  \n3  |   1     | 2011-01-19 18:51:05  \n4  |   2     | 2011-01-19 18:51:05  \n</code></pre>\n\n<p>I want to delete last record for <code>user_id=1</code>. Last record of a user can be recognized by <code>datetime</code>.</p>\n\n<p>How can I do this with one query. </p>\n"},{"tags":["sql","mysql","sql-order-by","ordering"],"answer_count":9,"favorite_count":9,"up_vote_count":24,"down_vote_count":0,"view_count":10361,"score":24,"question_id":396748,"title":"Ordering by the order of values in a SQL IN() clause","body":"<p>I am wondering if there is away (possibly a better way) to order by the order of the values in an IN() clause.</p>\n\n<p>The problem is that I have 2 queries, one that gets all of the IDs and the second that retrieves all the information. The first creates the order of the IDs which I want the second to order by. The IDs are put in an IN() clause in the correct order.</p>\n\n<p>So it'd be something like (extremely simplified):</p>\n\n<pre><code>SELECT id FROM table1 WHERE ... ORDER BY display_order, name\n\nSELECT name, description, ... WHERE id IN ([id's from first])\n</code></pre>\n\n<p>The issue is that the second query does not return the results in the same order that the IDs are put into the IN() clause.</p>\n\n<p>One solution I have found is to put all of the IDs into a temp table with an auto incrementing field which is then joined into the second query.</p>\n\n<p>Is there a better option?</p>\n\n<p><strong>Note:</strong> As the first query is run \"by the user\" and the second is run in a background process, there is no way to combine the 2 into 1 query using sub queries.</p>\n\n<p>I am using MySQL, but I'm thinking it might be useful to have it noted what options there are for other DBs as well.</p>\n"},{"tags":["php","javascript","html","mysql"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12931305,"title":"Check User Validation in MySql with javascript","body":"<p>i want check in my mysql database if the user enter the username and password correctly and then go in the home.html, i have some javascript code that detect when the user click the login button, but i can't understand how check in the database with javascript, i know how do that in php, but i can't understand how call the php from the javascript or do it directly in the js code, this is some code:</p>\n\n<p>the form in the html:</p>\n\n<pre><code>    &lt;div id=\"password\"&gt;\n        &lt;div class=\"input username\"&gt;&lt;input type=\"text\" placeholder=\"User name\" /&gt;&lt;/div&gt;\n        &lt;div class=\"input password\"&gt;&lt;input type=\"password\" placeholder=\"Password\" /&gt;&lt;/div&gt;\n        &lt;button&gt;Log in&lt;/button&gt;\n        &lt;a href=\"#\" class=\"back\"&gt;Back&lt;/a&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>then in my Login.js file i have this:</p>\n\n<pre><code>function forgot() {\n//Se ho scritto la password allora fai l'animazione wobble, altrimenti vai in home.html\n    if($(\"#password .input.password input\").attr(\"value\")!='') {\n        $.notification( \n            {\n                title: \"Wrong password\",\n                content: \"Just leave the password field empty to log in.\",\n                icon: \"!\"\n            }\n        );\n        $(\"#password\").removeClass().addClass(\"animated wobble\").delay(1000).queue(function(){ \n            $(this).removeClass();\n            $(this).clearQueue();\n        });\n        $(\"#password .input.password input\").attr(\"value\", \"\").focus();\n    } else {\n        document.location.href = \"home.html\";\n    }\n}\n</code></pre>\n\n<p>now for the login i detect only if the field are empty, but i want detect mysql database  how i can check it? because i want if the user enter wrong username and password span a $notification alert, anyone can help me?</p>\n"},{"tags":["php","mysql","arrays","resultset"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13243486,"title":"mysql_fetch_array() not working properly, missing most values","body":"<p>Alright, so I'm trying to get an array of Key values from a mysql table and mysql_fetch_array() won;t seem to work properly. Code:</p>\n\n<pre><code>                        $x=\"select id from topics\"\n                    $set=mysql_query($x);\n                    echo mysql_num_rows($set);\n                    print_r(mysql_fetch_array($set));\n                    $ids=mysql_fetch_array($set);\n                    echo $ids[0];\n                    echo $ids[1];\n</code></pre>\n\n<p>I've moved stuff all around but nothing seems to be changing the output:</p>\n\n<p>66  //number of values in result set</p>\n\n<p>Array ( [0] => 3 [id] => 3 ) //value(singular) being moved to array</p>\n\n<p>4 //supposed single value of the above array</p>\n\n<p>I'm really not sure what is going on here...</p>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13243488,"title":"Difference of \"FROM a LEFT JOIN b\" vs. \"FROM a, b\"","body":"<p>Do the queries do the same? What is the standard?</p>\n\n<p>Will I lose performance if I change one of these ways of write the query?</p>\n\n<p>Query 1</p>\n\n<pre><code>   SELECT a.*, b.id AS b_id\n     FROM table_a AS a\nLEFT JOIN table_b AS b\n       ON a.id = b.id\n</code></pre>\n\n<p>Query 2</p>\n\n<pre><code>   SELECT a.*, b.id AS b_id\n     FROM table_a a, table_b b\n    WHERE a.id = b.id\n</code></pre>\n"},{"tags":["php","mysql","authentication"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13242987,"title":"Should I check for user authorization in every page and request?","body":"<p>I created a system that uses username/password login system with with 'phpass' class to store hashes and check passwords when user logs in.</p>\n\n<p>I also use AJAX to load user information (that can only be retrieved if user is logged) with javascript.</p>\n\n<p>My question is, should I check for user's authentication in every page and in every file that returns AJAX values or just create  a 'connection' entry in MySQL database.</p>\n\n<p>Is it wrong to use 'phpass' functions in every page and request because of performance or is it wrong to use the database method?</p>\n\n<p>What's the best method to keep user connected and check in every page if the user is logged?</p>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13243552,"title":"I'm trying to use the MySQL NOT IN command, but to no avail, could anyone point out the error in my syntax?","body":"<pre><code>(SELECT s\nFROM enrolls\nWHERE s)\nNOT IN\n(SELECT s\nFROM likes\nWHERE s);\n</code></pre>\n\n<p>I've got two tables, <code>enrolls</code> and <code>likes</code>, and I'm trying to find s from enrolls where all of the tuples of s <code>likes</code> and <code>enrolls</code> have in common are removed (or <code>enrolls - likes</code>, basically).</p>\n\n<p>I get the following error, though:</p>\n\n<blockquote>\n  <p>You have an error in your SQL syntax; check the manual that\n  corresponds to your MySQL server version for the right syntax to use\n  near 'NOT IN (SELECT s FROM likes WHERE s)' at line 4</p>\n</blockquote>\n"},{"tags":["mysql","database"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13234030,"title":"MySQL Table structure and design- effieciency","body":"<p>I am currently working with a database in <code>MyphpAdmin</code>. There are a total of 9 tables that have been structured to bridge between each other. I am not sure that our table structure is the best and most efficient possible.  I am running a query that only displays <code>class_caption</code>, <code>class_name</code>, <code>course_name</code>, and <code>class_description</code>. How can I create a MySQL query that will display all tables bridged together (except <code>event</code>)? Also, what modifications should be done to make this tables structure more efficient?</p>\n\n<p><strong>Basic Query</strong></p>\n\n<pre><code>SELECT  class_name, class_caption, class_credit_hours, class_description\nFROM class  \n</code></pre>\n"},{"tags":["mysql","indexing","left-join","explain"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13243411,"title":"MYSQL : LEFT JOIN run slowly","body":"<p>I have two tables :</p>\n\n<p><a href=\"http://pastebin.com/v4u21W2c\" rel=\"nofollow\">table 1</a></p>\n\n<p><a href=\"http://pastebin.com/6NVSFD0a\" rel=\"nofollow\">table 2</a></p>\n\n<p>then I do left join to both tables:</p>\n\n<pre><code>SELECT DATE(`Inspection_datetime`) AS Date, `Line`,`Model`, `Lot_no`, \n       COUNT(A.`Serial_number`) AS Qty,B.`name`\nFROM `inspection_report` AS A\nLEFT JOIN `Employee` AS B\nON A.`NIK` LIKE B.NIK\nGROUP BY Date , A.Model ,A.Lot_no,A.Line,B.`name`\nORDER BY Date DESC\n</code></pre>\n\n<p>This query make my Jquery DataTable plugin run very slow even the data not show. The strange point is at this field <code>B.name</code>, if I mention it in query the data won't appear but if I delete it, the data would appear (I mean not doing <code>LEFT JOIN</code>).</p>\n\n<p>Whether my query not good enough? this my <code>EXPLAIN</code>:</p>\n\n<pre><code>TABLE 1\n\nid  select_type table   type    possible_keys   key key_len ref rows    Extra\n1   SIMPLE  inspection_report   ALL NULL    NULL    NULL    NULL    334518  \n\nTABLE 2\n    id  select_type table   type    possible_keys   key key_len ref rows    Extra\n    1   SIMPLE  Employee    ALL NULL    NULL    NULL    NULL    100 \n\nQUERY\nid  select_type table   type    possible_keys   key key_len ref rows    Extra\n1   SIMPLE  B   ALL NULL    NULL    NULL    NULL    100 Using temporary; Using filesort\n1   SIMPLE  A   ALL NULL    NULL    NULL    NULL    334520  Using where; Using join buffer\n</code></pre>\n"},{"tags":["mysql","ruby-on-rails","activerecord","locking","timeout"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":994,"score":3,"question_id":4787244,"title":"ActiveRecord \"Mysql::Error: Lock wait timeout exceeded\" with no apparent locks","body":"<p>Rails version: 2.3.8</p>\n\n<p>Many times thoughout the day, my application will seemingly randomly return a 500 error with a corresponding entry in the production log:</p>\n\n<pre><code>ActiveRecord::StatementInvalid (Mysql::Error: Lock wait timeout exceeded; try restarting transaction: INSERT INTO `forum_posts` (`forum_topic_id`, `created_at`, `body`, `ancestry`, `updated_at`, `quote_limit`, `user_id`, `ancestry_depth`, `quote_root`) VALUES(1224783, '2011-01-24 19:18:38', 'Post body', '1285704', '2011-01-24 19:18:38', 1, 57931, 1, 1))\n</code></pre>\n\n<p>Inspecting the MySQL slow query log shows this entry as:</p>\n\n<pre><code># Time: 110124 11:19:29\n# User@Host: db_user[db_user] @ localhost []\n# Query_time: 51  Lock_time: 0  Rows_sent: 0  Rows_examined: 0\nSET insert_id=0;\nINSERT INTO `forum_posts` (`forum_topic_id`, `created_at`, `body`, `ancestry`, `updated_at`, `quote_limit`, `user_id`, `ancestry_depth`, `quote_root`) VALUES(1224783, '2011-01-24 19:18:38', 'Post body', '1285704', '2011-01-24 19:18:38', 1, 57931, 1, 1);\n</code></pre>\n\n<p>According to the Rails log, ActiveRecord returned an error because of a lock wait timeout. The long-running nature of this simple query seems to suggest so as well. The thing is, nowhere is the slow query log can I find an actual query that should require a long time to process - they are all similar to the above example. Plus, in this same log, not one entry has a <code>Lock_time</code> value of greater than 0. </p>\n\n<p>Does anyone here have an idea as to what could be causing this apparent lock and how to isolate it? The current tools I'm using don't seem to be helping much. </p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["php","mysql","ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13242711,"title":"refreshing table with jquery/Ajax -breaks links to database/javascript","body":"<p>I am amending some results tables that display rows from a mysql database to refresh automatically. I am new to this so have based it on\n<a href=\"http://stackoverflow.com/questions/5681380/refresh-a-table-with-jquery-ajax-ever-5-seconds\">Refresh a table with jQuery/Ajax ever 5 seconds</a></p>\n\n<p>This works fine and I have tested it by asking for making the request to the server display the time so i can see the change when the refresh occurs.</p>\n\n<p>My problem is that if i apply this to a table dislaying returned sql results (also using the jquery tablesorter). Both my sql and jquery fail unless I move all the files and code they are dependant upon to the php page i echo the table on. This is now making my pages a mess. So what is the best way to refresh and manage a results table with ajax and where should dependant files/code be located?</p>\n\n<p>cheers</p>\n"},{"tags":["php","mysql"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13243204,"title":"PHP loop to explode an array of values and loop to query newly exploded values","body":"<p>So I am attempting to loop through and print these values to an excel file. I was able to figure that out but am now attempting to add code to be able to explode the original values I was getting.</p>\n\n<pre><code>$col = 1; \nwhile($row_data = mysql_fetch_assoc($result)) {\n$row = 1;\nif ($col == 1) {\n    $row_headings = array_keys($row_data);\n    foreach($row_headings as $value) {\n</code></pre>\n\n<p>Everything works until here. The values we get come out as 111X222X333 so I want to explode them and then query a new array of values</p>\n\n<pre><code>        list($sid,$gid,$qid) = explode(\"X\", $value)\n    $results=\"select * from lime questions where sid =\".$sid.\" and gid =\".$gid.\" and qid\".$qid;\n    }\nforeach(mysql_fetch_assoc($results)){\n</code></pre>\n\n<p>these were the 3 lines I added to an already working loop. I am wondering what I am doing wrong here.</p>\n\n<pre><code>        $objPHPExcel-&gt;getActiveSheet()-&gt;setCellValueByColumnAndRow($col, $row, $results);\n        $row++;\n    }\n    }\n    $row = 1;\n    $col++;\n}\nforeach($row_data as $value) {\n    $objPHPExcel-&gt;getActiveSheet()-&gt;setCellValueByColumnAndRow($col, $row, $value);\n    $row++;\n}\n$col++;\n</code></pre>\n\n<p>}</p>\n\n<p>Where am I messing up the loops</p>\n"},{"tags":["php","html","mysql","entities"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13243158,"title":"Escaping HTML entities from database generated content PHP HTML mySQL","body":"<p>Im playing around with a web app and the content it is generating is full of html entities across the entire application about 30 pages. Do I have to escape them in every piece of generated content? or is there a way to tell the browser that this is just friendly text. Iv tried adding... </p>\n\n<pre><code>&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /&gt;\n</code></pre>\n\n<p>But this has not seemed to work. Is there an easy work around for this. The problem is the entities do not show on my development environment. But on the production server they can pop up God knows where.</p>\n\n<p>Could someone offer advice or a solution?</p>\n"},{"tags":["mysql","foreign-keys","innodb","indexes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13242525,"title":"Setting up MySQL foreign keys and indexes - Migrating to InnoDB","body":"<p>I need help setting up foreign keys for migrating to InnoDB.  The situation is that I have 3 tables: jobs, customers and contacts.</p>\n\n<p>A job belongs to a Customer and a job belongs to a Contact.  A Customer has many jobs and has many contacts.  A contact belongs to a Customer and has many Jobs.  I need help setting up foreign keys in the jobs table so that only Contacts that belong to a selected Customer can be inserted. (i.e. If Customer A has contacts A1 and A2 and Customer B has contact B1, once you select Customer A as the customer for a job, it will reject entries for Contact other than A1 or A2).  Is this possible to do with foreign keys or will I have to do the verification in the programming language of my choice?</p>\n\n<p>Here's my schema:</p>\n\n<pre><code>CREATE TABLE jobs(\n  job_id INT(11) NOT NULL AUTO_INCREMENT,\n  customer_id INT(11) DEFAULT NULL,\n  contact_id INT(11) DEFAULT NULL,\n  job_number INT(11) UNSIGNED NOT NULL DEFAULT 0,\n  status_void TINYINT(1) DEFAULT 0,\n  PRIMARY KEY (job_id),\n  INDEX active_jobs (job_number, status_void),\n  INDEX customer_id (customer_id),\n  UNIQUE INDEX job_number (job_number),\n  CONSTRAINT FK_jobs_contacts_contact_id FOREIGN KEY (contact_id)\n  REFERENCES contacts (contact_id) ON DELETE SET NULL ON UPDATE CASCADE,\n  CONSTRAINT FK_jobs_customers_customer_id FOREIGN KEY (customer_id)\n  REFERENCES customers (customer_id) ON DELETE SET NULL ON UPDATE CASCADE\n)\nENGINE = INNODB\nCHARACTER SET utf8\nCOLLATE utf8_general_ci;`\n\nCREATE TABLE customers(\n  customer_id INT(11) NOT NULL AUTO_INCREMENT,\n  inactive TINYINT(1) DEFAULT 0,\n  customer_name VARCHAR(50) NOT NULL DEFAULT '',\n  PRIMARY KEY (customer_id),\n  UNIQUE INDEX customer_name (customer_name),\n  INDEX inactive (inactive)\n)\nENGINE = INNODB\nCHARACTER SET utf8\nCOLLATE utf8_general_ci;\n\nCREATE TABLE contacts(\n  contact_id INT(11) NOT NULL AUTO_INCREMENT,\n  customer_id INT(11) DEFAULT NULL,\n  inactive TINYINT(1) DEFAULT 0,\n  first_name VARCHAR(50) DEFAULT NULL,\n  last_name VARCHAR(50) DEFAULT NULL,\n  PRIMARY KEY (contact_id),\n  UNIQUE INDEX contact_key (customer_id, last_name, first_name),\n  INDEX customer_id (customer_id),\n  INDEX inactive (inactive),\n  INDEX name (last_name, first_name),\n  CONSTRAINT fk_contacts_customers_customer_id FOREIGN KEY (customer_id)\n  REFERENCES customers (customer_id) ON DELETE RESTRICT ON UPDATE CASCADE\n)\nENGINE = INNODB\nCHARACTER SET utf8\nCOLLATE utf8_general_ci;\n</code></pre>\n\n<p>Another goal I have is to setup indexes to make listing all jobs that are not void (status_void=0) and all customers and contacts that are not inactive(inactive=0).  I don't know if a multi-column index (jobs) or two separate indexes (customers/contacts) would help in this case.</p>\n\n<p>Please take it easy on me as I'm still learning.  Thank you for your time.</p>\n"},{"tags":["mysql","performance","table","sql-tuning"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13241558,"title":"Slow mysql query on large table with GROUP BY, AVG, etc","body":"<p>I have a query on a large table(over 2 million rows) which takes ~10 seconds to complete. Is there any way to optimize it?  The query is as below:</p>\n\n<pre><code>SELECT\n    DATE_FORMAT(date0, '%Y-%m' ) AS Yr_Mo, \n    DATE_FORMAT(date0, '%p' ) AS AM_PM,\n    province AS Province,\n    SUM( IF( top_ads + left_ads =0, 1, 0 ) ) AS pagesWithRightAdsOnly, \n    AVG( top_ads ) AS top_ads, \n    AVG( left_ads ) AS left_ads, \n    AVG( right_ads ) AS right_ads\nFROM ad_counts\nGROUP BY Yr_Mo, AM_PM, Province\n</code></pre>\n\n<p>The table 'ad_counts':</p>\n\n<pre><code>date0 (timestamp)\nprovince(varchar)\nkeyword_id\nnumber_ads(int)\ntop_ads (int)\nleft_ads (int)\nright_ads (int)\n</code></pre>\n\n<p>Index on date0, but date0 is not unique.</p>\n\n<p>Any thoughts?</p>\n\n<p>Edit:\nEXPLAIN:</p>\n\n<pre>\nid  select_type table   type    possible_keys   key key_len ref rows    Extra\n1   SIMPLE  baidu_pro_ad_counts ALL NULL    NULL    NULL    NULL    2160752 Using temporary; Using filesort\n</pre>\n"},{"tags":["php","mysql","pdo","fetch"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":161,"score":0,"question_id":7032475,"title":"Why are my JOINs failing?","body":"<p>I have a function to retrieve a single row of data representing a sales report for a store on a specific date.  I'm using similar methodology to retrieve data throughout the same class and application and have never run into this problem.  My function (and fetch()) are returning false, while the execute() is returning true.</p>\n\n<p>When I run the same query in TOAD from the SQL editor, I'm getting a row of data back as expected.</p>\n\n<p>Why is fetch() failing?  Note:  I also tried fetchAll() which is returning an empty set.  I've also tried not using bound parameters, but that doesn't work either.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>    public function getFullReport($store_id, $date)\n    {\n        $pdo = $this-&gt;application-&gt;database()-&gt;PDO();\n        $user_id = $this-&gt;application-&gt;session()-&gt;user_id();\n\n        $query = &lt;&lt;&lt;SQL\nSELECT sales_reports.*,\n       labor2.hours AS labor_am,\n       labor3.hours AS labor_wa,\n       labor4.hours AS labor_associate,\n       labor5.hours AS labor_kitchen,\n       labor6.hours AS labor_training\n  FROM sales_reports\n       JOIN labor_reports AS labor2\n          ON     sales_reports.store_id = labor2.store_id\n             AND sales_reports.date = labor2.date\n             AND labor2.labor_type_id = 2\n       JOIN labor_reports AS labor3\n          ON     sales_reports.store_id = labor3.store_id\n             AND sales_reports.date = labor3.date\n             AND labor3.labor_type_id = 3\n       JOIN labor_reports AS labor4\n          ON     sales_reports.store_id = labor4.store_id\n             AND sales_reports.date = labor4.date\n             AND labor4.labor_type_id = 4\n       JOIN labor_reports AS labor5\n          ON     sales_reports.store_id = labor5.store_id\n             AND sales_reports.date = labor5.date\n             AND labor5.labor_type_id = 5\n       JOIN labor_reports AS labor6\n          ON     sales_reports.store_id = labor6.store_id\n             AND sales_reports.date = labor6.date\n             AND labor6.labor_type_id = 6\n       JOIN user_store_permissions\n          ON sales_reports.store_id = user_store_permissions.store_id\n WHERE     sales_reports.store_id = :store_id\n       AND sales_reports.date = :date\n       AND user_store_permissions.user_id = :user_id\n LIMIT 1\nSQL;\n\n        $statement = $pdo-&gt;prepare($query);\n        $statement-&gt;bindParam(':store_id', $store_id);\n        $statement-&gt;bindParam(':date', $date);\n        $statement-&gt;bindParam(':user_id', $user_id);\n\n        $statement-&gt;execute();\n\n        return $statement-&gt;fetch(PDO::FETCH_ASSOC);\n    }\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>It seems that the labor JOINs are failing for some reason.  When I use LEFT JOIN it returns a row - with all of the labor values as null.  However, I'm not seeing this result in Toad for MySQL, which performs both the LEFT JOIN and JOIN version of the query properly and returns the full row.</p>\n\n<p>So the new question is, why are my JOINs not working in my PHP PDO code but they are working on the same data, with the same parameters when running the SQL in Toad?</p>\n"},{"tags":[".net","mysql","crystal-reports"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13242848,"title":"How To Connect Crystal Reports To MySQL via .NET","body":"<p>Okay, I've been pulling my hair out over this for several days now. I've got Crystal Reports going in both the Visual studio integrated solution and the stand alone version. I've got three different versions of MySQL's ODBC drivers installed. I've gone into the Administrator Tools >> Data Sources and added the connection details I don't know how many times. </p>\n\n<p>I've tried both the ODBC and ODE ADO methods in the wizard. In the options where it allows me to pick a data source, it doesn't show anything, even though I've triple-checked that I have in fact registered them. On the options that have me input credential info, I've used the exact info I've used previously in other programs, and it always says that it's unable to connect.</p>\n\n<p>I am using the root user in the connection credentials, and I have checked and double-checked that the user has every action possible allowed, and that the allowed hosts are set to wild card. I copy/pasted the connection string into another program and tried a generic query and it worked. I've looked at a bunch of different tutorials and none of them have worked (although I have noticed a trend on how they are all using outdated versions of Crystal Reports or the MySQL ODBC driver). </p>\n\n<p>I know that the generic question of \"What am I doing wrong\" is heavily discouraged here, but I'm at a point where I don't even know what the right questions are.</p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13242609,"title":"Using a variable to output MySQL column value in PHP","body":"<pre><code>$tag = 6;   \n$user_checkn = db_query(\"SELECT \".$tag.\" FROM advent_user_check WHERE uid=\".$_SESSION ['uid'].\" LIMIT 1\");  \n$user_check = mysql_fetch_array($user_checkn);\necho $user_check[$tag]; \n</code></pre>\n\n<p>This outputs 6 instead of the db value which is 0. Why?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Figured it out: the backticks around the column name were missing:</p>\n\n<pre><code>$user_checkn = db_query(\"SELECT `\".$tag.\"` FROM advent_user_check WHERE uid=\".$_SESSION ['uid'].\" LIMIT 1\");\n</code></pre>\n"},{"tags":["mysql","sql","mysql-workbench","alter-table"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":111,"score":2,"question_id":12542409,"title":"MySQL Workbench alter table","body":"<p>I create a table with mysql workbench. </p>\n\n<p>The screenshot before \"Apply\";</p>\n\n<p><img src=\"http://i.stack.imgur.com/mru4J.png\" alt=\"enter image description here\"></p>\n\n<p>It creates the table without any error.</p>\n\n<p>After \"Alter Table...\" the screenshot;</p>\n\n<p><img src=\"http://i.stack.imgur.com/zSVwD.png\" alt=\"enter image description here\"></p>\n\n<p>Is this a turkish character problem?\nHow can i fix it?</p>\n"},{"tags":["mysql","sql"],"answer_count":0,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":100,"score":3,"question_id":12469270,"title":"MySQL Get Time of Old Record Insert?","body":"<p>I have a table in my database which contains all of the users for my application. Unfortunately, when I launched my application, I didn't think to include a column which tracked the time at which a particular user signed up, and now I wish I had (bad idea, yes indeed).</p>\n\n<p>Is there, by any shred of luck, a way that MySQL tracks when a particular record is inserted (such as in record metadata???), and would allow me to grab it and insert in into a new dedicated column for this purpose?</p>\n\n<p>I am running on a shared cPanel host, so I doubt I have access to the MySQL logs.</p>\n\n<p>Thank you for your time.</p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":23,"score":2,"question_id":13242532,"title":"MYSQL Database Joined tables query pulling up limited records and adding results","body":"<p>I have two tables in my database that I\"m trying to use one Query to get data from both for a specific report.</p>\n\n<p>Table one is \"Movies\" and it has these fields:</p>\n\n<ul>\n<li>Movies_ID</li>\n<li>Name</li>\n<li>Season</li>\n</ul>\n\n<p>Table two is \"Boxoffice\" sales income for each movie:</p>\n\n<ul>\n<li>Boxoffice_ID</li>\n<li>Movies_ID</li>\n<li>Date</li>\n<li>Amount</li>\n</ul>\n\n<p>I want to run a query to compare the opening weekends for each movie in a given season and return them as one dataset with the amounts collected added together. So I want to take each movie and get the first three days of box office for each film and add them up so that I get back a query like this</p>\n\n<ol>\n<li>Movie A, 49.1 Million</li>\n<li>Movie B, 42.2 Million</li>\n<li>Movie C, 29.5 Million</li>\n</ol>\n\n<p>Please note the amount collected only needs to output the number and I'll take care of the formatting. I'm just having trouble figuring out how to only query the first three days of box office for each movie and adding them together. </p>\n\n<p>I know I could run one query and get the movies with box office and then loop over that and re-query the database but I know that with a lot of movies that isn't the most efficient way of doing things. I'm not sure if there is a way to do all of this (first three days of each movie added together) in one query but I wanted to see if someone with more advanced knowledge could help me out.</p>\n"},{"tags":["mysql","optimization","indexes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13242654,"title":"MySQL query causing max connections","body":"<p>I have the following query running against a MySQL db every 30 seconds:</p>\n\n<pre><code>SELECT message.id FROM message WHERE userto='13689' AND tstampviewed IS NULL AND message.status != 'VOID';\n</code></pre>\n\n<p>It shows up in my slow query log a lot, but it looks to me like it is optimized as best as can be.</p>\n\n<p>The result of EXPLAIN:</p>\n\n<p>SELECT_TYPE = Simple</p>\n\n<p>TABLE = message</p>\n\n<p>TYPE = ref</p>\n\n<p>POSSIBLE_KEYS = userto,tst,stat</p>\n\n<p>KEY = userto</p>\n\n<p>KEY_LEN = 53</p>\n\n<p>REF = const</p>\n\n<p>ROWS = 1</p>\n\n<p>EXTRA = \"Using Where\"</p>\n\n<p>The keys userto, tst, and stat are all normal BTREE indexes, one for each of the varchar fields referenced in the whereclause of the query.  It is a MyISAM table with 300K rows.  Users do write to the table consistently, but reads are much more likely (10/1 ratio of reads to writes). The db server is Windows 2008 Enterprise with a lot of CPU and fast drives.</p>\n\n<p>Over the past month, we keep getting max_connection errors, even though I increased the max_connections from 750 to 1500.  Several times a day, it seems like a query hangs (I can't verify this because I don't have access to the process list in real time), and 1500 queries pile up behind it and max out the connections.  This then obviously causes a lot of other problems.</p>\n\n<p>The above query is the one that consistenly comes up in the slow query log, even though I thought it was optimized as best as possible.  Can anyone tell me otherwise or point me in the right direction to solve this problem?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["php","mysql","pdo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13241626,"title":"PDO passed as class atribute","body":"<p>I have a problem with PDO objects.  I have a class to handle with db conections, and the constructor gets a pdo object to save it and use with other functions.  This pdo object is initialized in an include file in main, this main starts an instance of this class that I have made to handle with pdo. The problem is, if I use the pdo functions in main, it works great, if I use the pdo functions in my class, nothing happens.</p>\n\n<p>included file:</p>\n\n<pre><code>$username = \"root\";\n$password = \"*****\";\n$host = \"localhost\";\n$dbname = \"dbdb\";\n$db = NULL;\n$options = array(PDO::MYSQL_ATTR_INIT_COMMAND =&gt; 'SET NAMES utf8');\n\ntry\n{\n    $db = new PDO(\"mysql:host={$host};dbname={$dbname};charset=utf8\", $username, $password, $options);\n}\ncatch(PDOException $ex)\n{\n    die(\"Failed to connect to the database: \" . $ex-&gt;getMessage());\n}\n\n$db-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n$db-&gt;setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);\n</code></pre>\n\n<p>main file:</p>\n\n<pre><code>$query = \"The query content...\";\n$pagMenu = new pages($db);\n$pagMenu-&gt;makeMenu($query);\n$pageNames = $pagMenu-&gt;GetPageNames();\n</code></pre>\n\n<p>classe to hadle PDO (pages.php):</p>\n\n<pre><code>class pages {\n\n    private $db;\n    private $pageNames;\n\n    function __construct($db) {\n        $this-&gt;db = $db;\n    }\n    function GetPageNames($isMenu = 1){\n        foreach ($this-&gt;pageNames as $key =&gt; $value) {\n                $aux[$key] = $value;\n            }\n\n        }\n        return $aux;\n    }\n</code></pre>\n\n<p>(And a function to prepare de pdo and make the query to save it in pageNames)</p>\n\n<p>I can not understand the problem. because if I use the code on the main lines instead of using separate functions in the class, it will work. and use the same code, and the functions are called in exactly the same order. seems to me that the instance of PDO is not being correctly sent to the class. that my class should be static? or something like this?</p>\n"},{"tags":["mysql","query"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13242569,"title":"Query to retrieve records containing Unix dates","body":"<p>One column in a table in my MySQL database stores date in Unix format.</p>\n\n<p>I am trying to retrieve all rows where the date is later than a specific date. How do I write a query to do this? I want something like:</p>\n\n<pre><code>SELECT * FROM table_name WHERE date &gt; \"yyyy-mm-dd\";\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["mysql","sql","join","query-optimization","outer-join"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13242293,"title":"Simplifying a query (with left outer join)","body":"<p>Our app has been using this query for a while now:</p>\n\n<pre><code>SELECT id \nFROM invoice \nWHERE id NOT IN \n(SELECT invoice_id FROM invoice_transaction) \n\n#437 rows returned\n</code></pre>\n\n<p>In a code review, this query was rewritten with a left outer join:</p>\n\n<pre><code>SELECT invoice.id \nFROM invoice \nLEFT OUTER JOIN invoice_transaction on invoice.id=invoice_transaction.invoice_id \n\n#586 rows returned\n</code></pre>\n\n<p>The first query returns 437 rows and the second (supposedly identical) query returns 586 rows.  Is this not a valid use of the left outer join?  </p>\n\n<p>What would be a better way to rewrite this query?</p>\n\n<p>Thank you!</p>\n"},{"tags":["php","python","mysql","gtfs"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13242426,"title":"How do I use GTFS Real Time to get Alerts, Delays etc?","body":"<p>I've been programming PHP for a couple of years, and I'm looking at tackling the GTFS real time feeds. I've downloaded the GTFS files for a specific agency and am parsing them with PHP using the fgetcsv function. </p>\n\n<p>What I'm stuck on right now is, how the HECK do I use this information to find service delays etc. I'm used to parsing information through XML apis etc, but have not dealt with anything like this before. It seems that it requires some python knowledge which I do not know, but am willing to learn. </p>\n\n<p>If anyone can provide me with proper guidance, I'd GREATLY appreciate it. I can get it to store the records into MySQL, but am not sure if I just need to create queries against the current timestamp vs. the expected timestamp to see if there is a delay. I'm having a hard time trying to figure out what to do next. </p>\n\n<p>Any guidance would be greatly appreciated.</p>\n"},{"tags":["php","mysql","excel"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13242321,"title":"PHP explode function loop to be used on column headers to return desired values into an excel file","body":"<p>So I used this code to return an array from a mysql query headers into an Excel file.</p>\n\n<pre><code>while($row_data = mysql_fetch_assoc($result)) {\n$row = 1;\nif ($col == 1) {\n    $row_headings = array_keys($row_data);\n    foreach($row_headings as $value) {\n        $objPHPExcel-&gt;getActiveSheet()-&gt;setCellValueByColumnAndRow($col, $row, $value);\n        $row++;\n    }\n    $row = 1;\n    $col++;\n</code></pre>\n\n<p>These query headers are returned as values such as 1111X2222X3333. I want to explode these values using this explode function somewhere in there</p>\n\n<pre><code> list($sid,$gid,$qid) = explode(\"X\", $string);\n</code></pre>\n\n<p>After this fucntion is used I want to use this query to replace all these column headers with my desired values using this query in the loop</p>\n\n<pre><code>   select * from lime_questions where sid = 1111 and gid = 2222 and qid = 3333\n</code></pre>\n\n<p>If there is a better way to do this please let me know. I appreciate the help</p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2477,"score":1,"question_id":4098951,"title":"Use MySQL to calculate difference between two entries in the same table","body":"<p>I have a series of meter reading stored in a table, each is identified by a building ID, a meter ID and the time at which it was recorded. </p>\n\n<p>For each entry I would like to search for the entry that has the same ID numbers and the closest previous time, I would then like to use the previous time and the previous reading to calculate the length of the time step and the differential between the two readings.</p>\n\n<p>so, I currently have:</p>\n\n<p><code>BuildingID | MeterID | Date_and_Time | Reading</code></p>\n\n<p>and I would like to produce:</p>\n\n<p><code>BuildingID | MeterID | Date_and_Time | Time_Since_Previous_Read | Accumulation_Since previous_Read</code></p>\n\n<p>two typical entries might look like this:</p>\n\n<p><code>1 | 1 | 2010-10-09 17:56:20 | 119.6</code></p>\n\n<p><code>1 | 1 | 2010-10-09 18:01:08 | 157.4</code></p>\n\n<p>and I would like to produce:</p>\n\n<p><code>1 | 1 | 2010-10-09 18:01:08 | 00:04:48 | 37.8</code></p>\n\n<p>If no previous entry exists (i.e. for the first reading) i woudl like to rerun zeros for the time elapsed and the accumulation.</p>\n\n<p>I would appreciate very much any help that could be offered on this, I made a concerted effort to find the answer in previous posts but to no avail, feel free to direct me to a good source if this has already been solved elsewhere.</p>\n\n<p>thank you</p>\n"},{"tags":["mysql","sql","query","group-by","case"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":13228875,"title":"Using CASE WHEN with GROUP BY","body":"<p>Background: I'm trying to display a table with the headings: id, full_name, position_7, position_8, position_9...etc if a person was an active employee for Jul and Aug, then 2012_Jul and 2012_Aug will be displayed in position_7 and 8 on one line. If I don't use GROUP BY I get the output but on 2 lines. The reason this is happening is because in the BLMths table a single person will have multiple entries due to being employed for more than 1 month. </p>\n\n<p>The below query will get every persons id, full_name and month successfully...if I don't use GROUP BY. But the problem is, if I neglect to use GROUP BY I will have 4 lines (or more) for each person in my table.   When I do use GROUP BY, I have the desired output of 1 line for each person, but the data I need in the table isn't all there.</p>\n\n<p>Does anyone know what I'm doing wrong?  Or does anyone know why when I use GROUP BY the data from some of my CASE statements appear to be missing?</p>\n\n<p>I know the answer to this has to be simple, but I can't seem to solve it.  Any help is appreciated.   Many thanks in advance.</p>\n\n<pre><code>SELECT Blm.Ags, Blmths.Id, Ie.Full_Name, Blmths.Month,\n       CASE month\n       WHEN \"2012-07-01\" THEN 1\n           ELSE NULL\n       END AS Position_7,\n       CASE month\n       WHEN \"2012-08-01\" THEN Date_Format(Blmths.Month, '%Y_%b')\n           ELSE NULL\n       END AS Position_8,\n       CASE Blmths.Month\n       WHEN \"2012-09-01\" THEN Date_Format(Blmths.Month, '%Y_%b')\n           ELSE NULL\n       END AS Position_9,\n       CASE month\n       WHEN \"2012-10-01\" THEN Date_Format(Blmths.Month, '%Y_%b')\n           ELSE NULL\n       END AS Position_10,\n       CASE Blmths.Month\n       WHEN \"2012-11-01\" THEN Date_Format(Blmths.Month, '%Y_%b')\n           ELSE NULL\n       END AS Position_11,\n       CASE Blmths.Month\n       WHEN \"2012-12-01\" THEN Date_Format(Blmths.Month, '%Y_%b')\n           ELSE NULL\n       END AS Position_12,\n       CASE month\n       WHEN '2013-01-01' THEN Date_Format(Blmths.Month, '%Y_%b')\n           ELSE NULL\n       END AS Position_1,\n       CASE month\n       WHEN \"2013-02-01\" THEN Date_Format(Blmths.Month, '%Y_%b')\n           ELSE NULL\n       END AS Position_2,\n       CASE month\n       WHEN \"2012-03-01\" THEN Date_Format(Blmths.Month, '%Y_%b')\n           ELSE NULL\n       END AS Position_3,\n       CASE Blmths.Month\n       WHEN \"2013-04-01\" THEN Date_Format(Blmths.Month, '%Y_%b')\n           ELSE NULL\n       END AS Position_4,\n       CASE Blmths.Month\n       WHEN \"2013-05-01\" THEN Date_Format(Blmths.Month, '%Y_%b')\n           ELSE NULL\n       END AS Position_5,\n       CASE Blmths.Month\n       WHEN \"2013-06-01\" THEN Date_Format(Blmths.Month, '%Y_%b')\n           ELSE NULL\n       END AS Position_6\n  FROM Bogus_Leadership_Months AS Blmths, Injection_Employees AS Ie,\nBogus_Leadership_Members AS Blm\n  WHERE Blmths.Id = Blm.Id\n    AND Ie.Ags = Blm.Ags\n    AND Ie.Centre_Id = '666'\n  GROUP BY Blm.Ags\n</code></pre>\n"},{"tags":["mysql","windows","amazon-ec2","remote-access"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12488205,"title":"Remote access to MySQL on Amazon EC2 Windows instance","body":"<p>I found some solutions for Linux <a href=\"http://stackoverflow.com/questions/9766014/connect-to-mysql-on-amazon-ec2-from-a-remote-server\">here</a>.</p>\n\n<p>But didn't find any solution for Windows. I don't have my.cnf on Windows. I only have my.ini. there is no bind-address in it.</p>\n\n<p>I have already added an inbound rule for MySQL.</p>\n\n<p>Could anybody give me some advice? Thanks a lot!!!</p>\n"},{"tags":["mysql","query"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13242268,"title":"MYSQL Query: combine columns and get count","body":"<p>I have about 9 tables that contain the same type of field. I would like to combine the 9 of them FIRST, and then get the distinct count of unique values in that combined column. This is what I've tried so far, but to no avail. I'm not also not sure this is the most efficient way to return this value?</p>\n\n<pre><code>SELECT COUNT(DISTINCT aircraft_id) FROM \n(\nSELECT aircraft_id FROM database.a_message UNION ALL\nSELECT aircraft_id FROM database.b_message UNION ALL\nSELECT aircraft_id FROM database.c_message UNION ALL\nSELECT aircraft_id FROM database.d_message UNION ALL\nSELECT aircraft_id FROM database.e_message UNION ALL\nSELECT aircraft_id FROM database.f_message UNION ALL\nSELECT aircraft_id FROM database.g_message UNION ALL\nSELECT aircraft_id FROM database.h_message UNION ALL\nSELECT aircraft_id FROM database.i_message\n) ;\n</code></pre>\n"},{"tags":["php","mysql","arrays"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12396385,"title":"mysql_fetch_array() not displaying all results","body":"<p>I have a database with a calendar table (each row represents one day) with 4 years of rows (2012, 2013, 2014, 2015). I use the column name calyear for the year.</p>\n\n<p>I use the following code to find values for distinct years then display it:</p>\n\n<pre><code>$year = mysql_query(\"SELECT DISTINCT calyear FROM calendar\");\n\nwhile($yeararray = mysql_fetch_array($year))\n{\n echo($yeararray['calyear'].\"&lt;br /&gt;\");\n}\n</code></pre>\n\n<p>The problem is it only displays the years 2013, 2014, 2015 even though when I use</p>\n\n<pre><code>echo(mysql_num_rows($year);\n</code></pre>\n\n<p>it displays the value 4 which I take to mean all 4 years are there. I'm not quite sure where I'm going wrong with this.</p>\n\n<p><em><strong></em>*</strong><em>EDIT</em><strong><em>*</em></strong></p>\n\n<p>Thanks for your suggestions but I found the problem and it was my own stupidity.</p>\n\n<p>I had the <code>$year</code> query at the top of the page and the While loop later on (where I needed it). I'd earlier put <code>$yeararray = mysql_fetch_array($year)</code> directly underneath the <code>$year</code> so I had it twice on the page, and when I removed the redundant one at the top the code worked fine.</p>\n\n<p>Thanks and sorry!</p>\n"},{"tags":["mysql","phpmyadmin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13241748,"title":"Can't change table type to MyISAM","body":"<p>I'm trying to change a table's type to MyISAM but it won't let me:</p>\n\n<pre><code>ALTER TABLE `mytable` ENGINE = MYISAM\n</code></pre>\n\n<p>MySQL said: </p>\n\n<blockquote>\n  <p>Documentation 1217 - Cannot delete or update a parent row: a foreign key constraint fails</p>\n</blockquote>\n"},{"tags":["mysql","optimization","indexing"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":31,"score":3,"question_id":12579860,"title":"When to choose hashed column against composite index","body":"<p>I would like to know in which cases a single hashed column with an index should be preferred against using a composite index.\nIn my case i have two tables with approx 1 mio datasets, one of it receives an updated value from the other table (it is an data-import routine).\nMySQL 5.1 and 5.5 is used in my environments.</p>\n\n<p>Example:</p>\n\n<pre><code>CREATE TABLE permanent (\nref_id_1 INT(10),\nref_id_2 INT(10),\nref_id_3 INT(10),\nref_id_4 INT(10),\nref_date DATE,\nvalue INT(10));\n\nCREATE TABLE import (\nref_id_1 INT(10),\nref_id_2 INT(10),\nref_id_3 INT(10),\nref_id_4 INT(10),\nref_date DATE,\nvalue INT(10));\n\n//Option 1\nALTER TABLE import ADD UNIQUE INDEX idx_composite(ref_id_1,ref_id_2,ref_id_3,ref_id_4,ref_date);\n//Option 2\nALTER TABLE import ADD hash_col CHAR(32);\nUPDATE import SET hash_col = MD5(CONCAT(ref_id_1,ref_id_2,ref_id_3,ref_id_4,ref_date)); \nALTER TABLE import ADD UNIQUE INDEX idx_hash_col(hash_col);\n</code></pre>\n\n<p>Of course, the permanent table will also have an hash_col and the required indizes.\nNow the two possible update/joins will be:</p>\n\n<pre><code>//Join via columns \nUPDATE permanent\nINNER JOIN import\nON import.ref_id_1 = permanent.ref_id_2\nAND import.ref_id_2 = permanent.ref_id_2\nAND import.ref_id_3 = permanent.ref_id_3\nAND import.ref_id_4 = permanent.ref_id_4\nAND import.ref_date = permanent.ref_date \nSET permanent.value = import.value;\n\n//Join via Hash-col\nUPDATE permanent\nINNER JOIN import\nON import.hash_col = permanent.hash_col\nSET permanent.value = import.value\n</code></pre>\n\n<p>So which approach should be preferred? Is there a rule of thumb like \"if you have more than X columns, use hash instead\".\nThanks in advance!</p>\n\n<p>p.s. this is my first question here, so please excuse if something is missing. </p>\n"},{"tags":["php","mysql","database","query","many-to-many"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":92,"score":1,"question_id":10884677,"title":"A library database","body":"<p>So me and my colleague have been assigned for making a library database as the lesson's assignement and then make an html database interface where someone would be able to perform certain tasks within the database such as inserting rows, deleting rows, finding rows etc.</p>\n\n<p>We have created the database, imported it and all that but the problem is in inserting elements into it.</p>\n\n<p>Well for example the books table has a many-to-many relationship with the authors table (where primary keys of each table are the ISBN and the authors ID respectively) so when we want to insert a book with it's authors in our DB we don't know exactly how to do it because they are in different tables. We are confused as to how we would put data from a single form in multiple tables with different primary keys.</p>\n\n<p>We have been trying to find examples like that but to no avail.</p>\n\n<p><img src=\"http://i.stack.imgur.com/FCVs4.png\" alt=\"\"></p>\n\n<p>Even links to tutorials and whatnot are mostly welcome.</p>\n\n<p>Server side code is PHP.</p>\n\n<p>Thank you very much.</p>\n"},{"tags":["php","mysql","json"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":13236819,"title":"How to fix badly formatted JSON in PHP?","body":"<p>I'm getting a data feed which is in JSON format and the only available format. In PHP, I'm using json_decode to decode the JSON, but it was breaking, and I found out that the JSON was generated in some places with double quotes in a person's nick name. I verified this using:\n<a href=\"http://jsonformatter.curiousconcept.com\" rel=\"nofollow\">http://jsonformatter.curiousconcept.com</a></p>\n\n<p>I don't have control over the creation of the data, but I have to deal with this broken format when it occurs. This data after it's parsed will be put into a MySQL TABLE.</p>\n\n<p>For example:</p>\n\n<pre><code>\"contact1\": \"David \"Dave\" Letterman\",\n</code></pre>\n\n<p>json_decode would return a NULL. If I manually saved the file, and changed it to single quotes around the nickname of Dave, then everything worked.</p>\n\n<pre><code>$json_string = file_get_contents($json_download);\n$json_array = json_decode($json_string, true);\n</code></pre>\n\n<p>How do I fix the broken JSON format in json_string before it gets processed by json_decode?\nWhat should be done to pre-process the file, backslash the double quotes of the nickname? Or change them to single quotes? Is it even a good idea to store double quotes like this in MySQL?</p>\n\n<p>I don't know when this might occur with each data feed, so I don't want to just check for contact1 if it has inner double quotes to fix them. Is there a way in PHP to take a line such as the above example, and backslash everything after the colon except the outer double quotes? Thanks!</p>\n\n<p>This is the correct code for as provided by tftd:</p>\n\n<pre><code>&lt;?php\n// This:\n// \"contact1\": \"David \"Dave\" Letterman\",\n// Needs to look like this to be decoded by JSON:\n// \"contact1\": \"David \\\"Dave\\\" Letterman\",\n\n$data ='\"contact1\": \"David \"Dave\" Letterman\",';\nfunction replace($match){\n    $key = trim($match[1]);\n    $val = trim($match[2]);\n\n    if($val[0] == '\"')\n        $val = '\"'.addslashes(substr($val, 1, -1)).'\"';\n    else if($val[0] == \"'\")\n        $val = \"'\".addslashes(substr($val, 1, -1)).\"'\";\n\n    return $key.\": \".$val;\n}\n$preg = preg_replace_callback(\"#([^{:]*):([^,}]*)#i\",'replace',$data);\nvar_dump($preg);\n$json_array = json_decode($preg);\nvar_dump($json_array);\necho $json_array . \"\\n\";\necho $preg . \"\\n\";\n?&gt;\n</code></pre>\n\n<p>Here is the output:</p>\n\n<pre><code>string(39) \"\"contact1\": \"David \\\"Dave\\\" Letterman\",\"\nNULL\n\n\"contact1\": \"David \\\"Dave\\\" Letterman\",\n</code></pre>\n"},{"tags":["php","mysql","passwords"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":2,"view_count":68,"score":0,"question_id":13241366,"title":"What's the safer way to store a password in MySQL database?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5089841/php-2-way-encryption-i-need-to-store-passwords-that-can-be-retrieved\">PHP 2-way encryption: I need to store passwords that can be retrieved</a>  </p>\n</blockquote>\n\n\n\n<p>Lately I'm a little confused reading several tutorials on storing passwords in databases. Most sites say that the best is using a hash and a salt to store the passwords or also store the passwords in two parts or add a general key for all passwords.</p>\n\n<p>I saw several methods with crypt, sha, sha256, md5 and blowfish.</p>\n\n<p>My question is, using crypt function with blowfish is safe or there are better/safer and more effective methods for storing passwords?</p>\n"},{"tags":["php","mysql","forms","symfony2","doctrine2"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13241169,"title":"How to generate timetable form in Symfony2","body":"<p>I am trying to create some timetable with administration and I have looked all over the internet and did not find the answer or tutorial how to do such a thing in Symfony2. </p>\n\n<p>The thing is:\nI have 3 entities: <strong>Sheet</strong>, <strong>SheetField</strong> and <strong>Employee</strong>. </p>\n\n<ul>\n<li>SheetField has foreign keys on Employee and Sheet + 1 column that says which day in month is it </li>\n<li>these columns are supposed to be filled in the backend and the last column that I haven't mentioned so far is filled by user in form and it may contain just some text. </li>\n<li>So the SheetField entity represents one exact field/day in the timetable for exactly one Employee in a month. </li>\n<li>And I would like to generate the form with one (or more) Employees for a whole month - 30x SheetField </li>\n<li>and I'd like to make it somehow automatized and mapped just by Symfony2 standards... Anybody?\nThank you in advance</li>\n</ul>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":26,"score":-1,"question_id":13241370,"title":"Dropping tables mySql","body":"<p>I am having terrible trouble figuring out the order these tables should be dropped in for my script I will post the script now, If anyone could help with the order they should be dropped in it would be a great help</p>\n\n<pre><code>drop table Registered_Student;\ndrop table EducateYou_VideoRating;\ndrop table EducateYou_Video;\ndrop table EducateYou_Violation;\ndrop table EducateYou_Member;\ndrop table Violation_Type;\ndrop table EducateYou_Comment;\ndrop table EducateYou_FollowList;\ndrop table EducateYou_Group;\ndrop table EducateYou_Admin;\n\ncommit;\n\n\n\ncreate table EducateYou_Violation\n(\nviolationId     number (9),\nviolationStatus char(1) DEFAULT 'X',\nvideoId number(9),\ngroupId    number (9),\ncommentId  number(9),\nCONSTRAINT pk_violationId PRIMARY KEY (violationId),\nCONSTRAINT fk_x_videoId FOREIGN KEY (videoId) REFERENCES EducateYou_Video,\nCONSTRAINT fk_y_groupId FOREIGN KEY (groupId) REFERENCES EducateYou_Group,\nCONSTRAINT fk_z_commentId FOREIGN KEY (commentId) REFERENCES EducateYou_Comment\n);\n\ncreate table EducateYou_Video(\nvideoId         number(9),\nvideoRef        varchar2(50) NOT NULL,\nvideoTitle          varchar2(15) NOT NULL,\nuploadDate DATE NOT NULL,\nvideoStatus     char(1) DEFAULT 'X',\nvideoCategory   varchar2(15) NOT NULL,\nregNo           number(6) NOT NULL,\nAdminId    number(9),\ncommentId number(9),\nCONSTRAINT pk_videoId PRIMARY KEY (videoId),\nCONSTRAINT fk_r_regNo FOREIGN KEY (regNo) REFERENCES EducateYou_Member,\nCONSTRAINT fk_p_AdminId FOREIGN KEY (AdminId) REFERENCES EducateYou_Admin,\nCONSTRAINT fk_n_commentId FOREIGN KEY (commentId) REFERENCES EducateYou_Comment\n);\n\n\ncreate table EducateYou_VideoRating(\nrating number(2) NOT NULL,\nregNo number(9),\nvideoId number(9),\nCONSTRAINT pk_video_rating PRIMARY KEY (videoId, regNo),\nCONSTRAINT fk_x_videoId FOREIGN KEY (videoId) REFERENCES EducateYou_Video,\nCONSTRAINT fk_z_regNo FOREIGN KEY (regNo) REFERENCES EducateYou_Member\n);\n\n\n\n\ncreate table EducateYou_Admin\n(\nAdminId     number(9),\nfirstName           varchar2(15),\nsurname         varchar2(15),\nadminActions    varchar2(40),\nCONSTRAINT pk_AdminId PRIMARY KEY (AdminId)\n);\n\n\n\n\n\n\n\n\n\n\ncreate table EducateYou_Group(\ngroupID         number(5) NOT NULL,\ngroupname       varchar2(15) NOT NULL,\nregNo           number(6) NOT NULL,\nCONSTRAINT pk_groupID PRIMARY KEY (groupID),\nCONSTRAINT fk_i_regNo FOREIGN KEY (regNo) REFERENCES EducateYou_Member\n);\n\ncreate table EducateYou_Comment(\ncommentId       number(9),\ncommentStatus       char(1) DEFAULT 'A',\ncommentTime             timestamp,\ncounter   number(5) DEFAULT 5,\neducateYouComment       varchar2(50),\nregNo           number(6) NOT NULL,\nCONSTRAINT pk_commentId PRIMARY KEY (commentId),\nCONSTRAINT fk_b_regNo FOREIGN KEY (regNo) REFERENCES EducateYou_Member\n);\n\ncreate table EducateYou_FollowList(\nfollowListID number(9),\nregNo        number(9),\nCONSTRAINT pk_followListID PRIMARY KEY (followListID),\nCONSTRAINT fk_z_regNo FOREIGN KEY (regNo) REFERENCES EducateYou_Member\n);\n\n\ncreate table Violation_Type \n(\n violation_TypeId varchar2(9),\n violationId number(9),\n CONSTRAINT pk_violation_TypeId PRIMARY KEY (violation_TypeId, violationId ),\n CONSTRAINT fk_m_violationId FOREIGN KEY (violationId) REFERENCES EducateYou_Violation\n );\n\n\n\n\n\n\n\n\n create table EducateYou_Member\n(\nregNo           number(6),\nstatus          char(1) DEFAULT 'A',\ncollegeId       varchar2(9) NOT NULL,\nCONSTRAINT pk_regNo PRIMARY KEY (regNo),\nCONSTRAINT fk_l_collegeId FOREIGN KEY (collegeId) REFERENCES Registered_Student\n);\n\n\n\ncreate table Registered_Student\n(\ncollegeId       varchar2(9),\npassword        varchar2(9) NOT NULL,\nfirstname       varchar2(20) NOT NULL,\nsurname         varchar2(20) NOT NULL,\ndob             date         NOT NULL,\nstreet          varchar2(25) NOT NULL,\ntown            varchar2(10) NOT NULL,\ncounty          varchar2(15) NOT NULL,\ncollege         varchar2(30) NOT NULL,\ncourse          varchar2(10) NOT NULL,\nCONSTRAINT pk_collegeId PRIMARY KEY (collegeId)\n);\n</code></pre>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13241364,"title":"mysql date_format unable to parse 20-may-2013","body":"<p>using date_format as specified in the <a href=\"http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format\" rel=\"nofollow\">doc from mysql</a></p>\n\n<pre>\nselect date_format('20-May-2013', '%d-%b-%Y');\n</pre>\n\n<p>returns null, why?</p>\n"},{"tags":["mysql","search","full-text-search","stop-words"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":13061382,"title":"Full-text search with Stopwords in MySQL","body":"<p>I am using Full-Text search in MySQL. But when search it with Stopword result is empty.</p>\n\n<p>What I want is operation like what we use with LIKE. Mean that, it do with all word. After I used Full-Text search, I think that it more powerful than LIKE, it can use with index FULLTEXT, with multiple field.</p>\n\n<p>But, when search criteria in AGAINST is in list of Stopwords the result is EMPTY.</p>\n\n<p>How can I use Full-Text search in MySQL that filter although word in Stopword?\nOr\nOthers way that I can use with search algorithm?</p>\n"},{"tags":["mysql","ios","database","database-connection","http-post"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":14,"score":-2,"question_id":13241042,"title":"Exporting fields of data from app to mysql database","body":"<p>I am developing an app for IOS that will require the user to fill out a large number of fields, but I am very new and am not sure how to export that data to a MySQL database. I am trying to avoid making this a direct web application or using email to export the data.</p>\n"},{"tags":["php","mysql","query","environment"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":65,"score":-4,"question_id":13240734,"title":"Using mysql query and result in php?","body":"<p>I've had some help from bluefleet (BF) with a mysql query, i now need to use that query in a php environment, this is what i've come up with, firstly can you tell me if it's correct and secondly do i need to release the query after i've done something with the result?</p>\n\n<p>Here's the query</p>\n\n<pre><code>    $myquery= \"select sum(total)\nfrom\n(\n    SELECT count(*) as total\n    FROM \" .TABLE_PREFIX.\"tview v\n    where v.ipaddress = $ips\n    union all\n    SELECT count(*) as total\n    FROM \" .TABLE_PREFIX.\"tview1 v1\n    where v1.ipaddress = $ips\n    union all\n    SELECT count(*) as total\n    FROM \" .TABLE_PREFIX.\"tview3` v3\n    where v3.ipaddress = $ips\n) src\";\n\nwhile ($row = mysql_fetch_array($myquery)) {\n\nIf($row !=0){\necho \"NOT EMPTY\";\n}else{\necho \"EMPTY\";\n}\n}\n</code></pre>\n"},{"tags":["php","mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13240804,"title":"disable edit on mysql after given period","body":"<p>I have developed an data capture form using phprunner and data is updated on mysql database.</p>\n\n<p>Due to typos during entry, I have allowed users to only edit their own data and further restricted this to one field (the free text and error prone one).</p>\n\n<p>Is it possible to set a lock on records after a given period say 1 day.<br>\nThe goal here would be to set a sort of expiry on user \"edit\" ability and so historical reports pulled from stored records can always be the same.</p>\n\n<p>If so how can this be achieved?</p>\n\n<p>Thanks</p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12793146,"title":"MySQL function to replace text keeping the case intact","body":"<p>Requirement is replace case sensitive text in column value based on a US English dictionary</p>\n\n<p>Below are the samples</p>\n\n<pre><code>Colour =&gt; color\nColor =&gt; Color (note that C is capitalized here)\n\nFIBRE =&gt; FIBER\n\nColour/Monochrome =&gt; Color/Monochrome\n</code></pre>\n"},{"tags":["php","mysql","forum","webbbs"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13240168,"title":"Can't create separate forum categories based on SQL output","body":"<p>I am facing a bit of a problem and I am really not sure what I may be doing wrong. What I am trying to do is to create a proprietary forum that I can use for my clients and for my own projects. I agree that it's plain silly trying to reinvent the wheel instead of just ripping phpBB apart but this is also a good way for me to learn on my mistakes.</p>\n\n<p><strong>Problem</strong>\nThe problem is in the fact that the PHP script loop's the categories. For example we have 3 categories in SQL. Cookies, Cakes and Coffee now we have 2 forums for each say Like and Dislike in a proper forum they would look as such</p>\n\n<p><strong>Cookies</strong> </p>\n\n<ul>\n<li>Like</li>\n<li>Dislike</li>\n</ul>\n\n<p><strong>Cakes</strong></p>\n\n<ul>\n<li>Like</li>\n<li>Dislike</li>\n</ul>\n\n<p>And so on. However in mine it would look as such:</p>\n\n<p><strong>Cookies</strong></p>\n\n<ul>\n<li>Like</li>\n</ul>\n\n<p><strong>Cookies</strong></p>\n\n<ul>\n<li>Dislike</li>\n</ul>\n\n<p><strong>Code</strong> Ok here is the code for StackOverflow folks to rip appart and explain to me what I am doing wrong or what I may have missed or what I should do instead to make it function as it was intended to do.</p>\n\n<pre><code>&lt;?php\n//create_cat.php\ninclude 'connect.php';\ninclude 'header.php';\n\n$sql = \"SELECT\n            categories.cat_id,\n            categories.cat_name,\n            forums.forum_id,\n            forums.forum_cat,\n            forums.forum_name,\n            forums.forum_desc,\n            forums.forum_admin,\n            COUNT(forums.forum_id) AS forums\n        FROM\n            categories\n        LEFT JOIN\n            forums\n        ON\n            forums.forum_cat = categories.cat_id\n        GROUP BY\n            forums.forum_name, forums.forum_desc, forums.forum_id\n        ORDER BY\n            categories.cat_id ASC\n        \";\n\n$result = mysql_query($sql);\n\nif(!$result)\n{\n    echo 'The categories could not be displayed, please try again later.';\n}\nelse\n{\n    if(mysql_num_rows($result) == 0)\n    {\n        echo 'No categories defined yet.';\n    }\n    else\n    {\n        //prepare the table         \n        while($row = mysql_fetch_assoc($result))\n        {       \n\n        echo '&lt;table border=\"1\"&gt;\n              &lt;tr&gt;\n                &lt;th&gt;' . $row['cat_name'] . '&lt;/th&gt;&lt;th&gt;&lt;/th&gt;\n                &lt;/tr&gt;';     \n            echo '&lt;tr&gt;';\n\n                if ($_SESSION['user_level'] != 9 AND $row['forum_admin'] == 1) { \n\n                echo \"&lt;div style='padding:8px;background-color:#fae7af;'&gt;Sorry but you this is for Admins only.&lt;/div&gt;&lt;br&gt;\";\n\n                } else {\n\n                echo '&lt;td class=\"leftpart\"&gt;';\n                    echo '&lt;h3&gt;&lt;a href=\"viewforum.php?f=' . $row['forum_id'] . '\"&gt;' . $row['forum_name'] . '&lt;/a&gt;&lt;/h3&gt;' . $row['forum_desc'];\n                echo '&lt;/td&gt;';\n                echo '&lt;td class=\"rightpart\"&gt;';\n\n                //fetch last topic for each cat\n                    $topicsql = \"SELECT\n                                    topic_id,\n                                    topic_subject,\n                                    topic_date,\n                                    topic_cat\n                                FROM\n                                    topics\n                                WHERE\n                                    topic_cat = \" . $row['forum_id'] . \"\n                                ORDER BY\n                                    topic_date\n                                DESC\n                                LIMIT\n                                    1\";\n\n                    $topicsresult = mysql_query($topicsql);\n\n                    if(!$topicsresult)\n                    {\n                        echo 'Last topic could not be displayed.';\n                    }\n                    else\n                    {\n                        if(mysql_num_rows($topicsresult) == 0)\n                        {\n                            echo 'no topics';\n                        }\n                        else\n                        {\n                            while($topicrow = mysql_fetch_array($topicsresult))\n                            echo '&lt;a href=\"viewtopic.php?t=' . $topicrow['topic_id'] . '\"&gt;' . $topicrow['topic_subject'] . '&lt;/a&gt; at ' . date('d-m-Y', strtotime($topicrow['topic_date']));\n                        }\n                    }\n                echo '&lt;/td&gt;';\n\n                }\n\n            echo '&lt;/tr&gt;';\n            echo '&lt;/br&gt;';\n        }\n    }\n}\n\ninclude 'footer.php';\n?&gt;\n</code></pre>\n\n<p>SQL</p>\n\n<pre><code>**Category**\ncat_id     | int(8) | primary | auto incr\ncat_name   | var(255)\n\n|2|Test 2\n|3|Test 3\n|1|Test 1\n\n\n**Forum**\nforum_id   | int(8) | primary | auto_incr\nforum_cat  | int(8) &lt;-- forum cat \"category\" is just ID of category it belongs to\nforum_name | var(255)\nforum_desc | var(255)\n\n|1|1|Test|Just a simple forum test\n|2|3|More Test | Just a 2nd test forum\n|3|1|Bugs|Bugs and related go here\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/vbXQp.png\" alt=\"here is what i mean by categories being looped\"></p>\n\n<p>That's about it.</p>\n"},{"tags":["php","mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13240492,"title":"Issue with Populating HTML Dropbox value from Database","body":"<p>I am trying to populate a dropbox values by fetching data from mysql database using PHP.\nHere is the code I am trying to use</p>\n\n<pre><code>    &lt;?php\n       $con = mysql_connect(\"localhost\",\"root\",\"\");\n      if (!$con)\n       {\n        die('Could not connect: ' . mysql_error());\n       }\n       mysql_select_db(\"rumi\", $con);\n       $resultList = mysql_query(\"SELECT item FROM items\");  \n       while ($row = mysql_fetch_array($resultList))\n       {\n         echo \"&lt;option value='\" . $row['item'] . \"'&gt;\" . $row['item'] . \"&lt;/option&gt;\";\n        }\n       echo \"&lt;/select&gt;\";\n       mysql_close($con);\n     ?&gt;\n</code></pre>\n\n<p>but I am encountering with following error:\nWarning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in C:\\wamp\\www\\Lst\\index.php on line 22\ncan you lease let me know why this is happening? can you also let me know how i can list the items in am HTML Unordered list?</p>\n"},{"tags":["mysql","crash","load","performance"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":228,"score":1,"question_id":859072,"title":"Mysql Connections topping out within seconds","body":"<p>i have aweird problem that has only just started happening.</p>\n\n<p>i have a small cluster (one web and one db) setup and i host a rather popular group of4 -5 sites that allow users to dynamicly create their own mobile chat communitys automaticly. each site gets its own mysql db createdand populated automaticly.</p>\n\n<p>this is all fine, </p>\n\n<p>but in the last 24hours weird things have begun happening,\npreviously i had the sql max_connections set to 500 and this was perfectly adaqute for the demand but now even when i set the connection to 4000+ they are all maxxed out within 5-10 minutes, and mysql processlist shows thousands of unauthenticated user connections sitting at login status,</p>\n\n<p>i have gone through the sites and all their mysql configs are fine so i cant see what the issue is. </p>\n\n<p>server specs below</p>\n\n<p>db server:</p>\n\n<ul>\n<li>dual amd opteron 246</li>\n<li>8GB ram</li>\n<li>120gb hd(64gb free)</li>\n<li>33gb swap (rarly used but their for emergencys)</li>\n<li>centos 5 64bit.</li>\n<li>direct 100mbit lan to web serv</li>\n</ul>\n\n<p>only mysql,ssh and webmin running, no other apps installed</p>\n\n<p>web server:</p>\n\n<ul>\n<li>amd athlon 64 3800+</li>\n<li>plesk 9.2.1 </li>\n<li>4gb rram</li>\n<li>2x120gb hds</li>\n</ul>\n\n<p>apache status onthe web server only shows 120ish http connections butthe sql keeps climbing </p>\n"},{"tags":["mysql"],"answer_count":4,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":5757,"score":5,"question_id":983400,"title":"what does unauthenticated user mean in MYSQL?","body":"<pre><code>mysql&gt; show full processlist;\n+-----+----------------------+--------------------+------+---------+------+----------------------------------+-----------------------+\n| Id  | User                 | Host               | db   | Command | Time | State                            | Info                  |\n+-----+----------------------+--------------------+------+---------+------+----------------------------------+-----------------------+\n|   1 | system user          |                    | NULL | Connect |  623 | Waiting for master to send event | NULL                  | \n|   2 | system user          |                    | NULL | Connect |    0 | Reading event from the relay log | NULL                  | \n| 400 | root                 | localhost          | v3   | Sleep   |   68 |                                  | NULL                  | \n| 585 | root                 | localhost          | v3   | Query   |    0 | NULL                             | show full processlist | \n| 748 | unauthenticated user | 172.19.0.27:32833  | NULL | Connect | NULL | login                            | NULL                  | \n| 749 | unauthenticated user | 172.19.0.27:32836  | NULL | Connect | NULL | login                            | NULL                  | \n| 750 | unauthenticated user | 172.19.0.27:32838  | NULL | Connect | NULL | login                            | NULL                  | \n| 751 | unauthenticated user | 172.19.0.27:32841  | NULL | Connect | NULL | login                            | NULL                  | \n| 752 | unauthenticated user | 172.19.0.27:32844  | NULL | Connect | NULL | login                            | NULL                  | \n| 753 | unauthenticated user | 172.19.0.27:32846  | NULL | Connect | NULL | login                            | NULL                  | \n| 754 | unauthenticated user | 172.19.0.27:32848  | NULL | Connect | NULL | login                            | NULL                  | \n| 755 | unauthenticated user | 172.19.0.139:46827 | NULL | Connect | NULL | login                            | NULL                  | \n| 756 | unauthenticated user | 172.19.0.139:46830 | NULL | Connect | NULL | login                            | NULL                  | \n| 757 | unauthenticated user | 172.19.0.139:46831 | NULL | Connect | NULL | login                            | NULL                  | \n| 758 | unauthenticated user | 172.19.0.27:32857  | NULL | Connect | NULL | login                            | NULL                  | \n| 759 | unauthenticated user | 172.19.0.27:32858  | NULL | Connect | NULL | login                            | NULL                  | \n| 760 | unauthenticated user | 172.19.0.27:32859  | NULL | Connect | NULL | login                            | NULL                  | \n| 761 | unauthenticated user | 172.19.0.27:32863  | NULL | Connect | NULL | login                            | NULL                  | \n| 762 | unauthenticated user | 172.19.0.27:32864  | NULL | Connect | NULL | login                            | NULL                  | \n| 763 | unauthenticated user | 172.19.0.27:32866  | NULL | Connect | NULL | login                            | NULL                  | \n| 764 | unauthenticated user | 172.19.0.27:32870  | NULL | Connect | NULL | login                            | NULL                  | \n| 765 | unauthenticated user | 172.19.0.27:32871  | NULL | Connect | NULL | login                            | NULL                  | \n| 766 | unauthenticated user | 172.19.0.139:46833 | NULL | Connect | NULL | login                            | NULL                  | \n| 767 | unauthenticated user | 172.19.0.27:32878  | NULL | Connect | NULL | login                            | NULL                  | \n| 768 | unauthenticated user | 172.19.0.27:32881  | NULL | Connect | NULL | login                            | NULL                  | \n| 769 | unauthenticated user | 172.19.0.27:32885  | NULL | Connect | NULL | login                            | NULL                  | \n| 770 | unauthenticated user | 172.19.0.139:46835 | NULL | Connect | NULL | login                            | NULL                  | \n| 771 | unauthenticated user | 172.19.0.27:32888  | NULL | Connect | NULL | login                            | NULL                  | \n| 772 | unauthenticated user | 172.19.0.27:32890  | NULL | Connect | NULL | login                            | NULL                  | \n| 773 | unauthenticated user | 172.19.0.139:46837 | NULL | Connect | NULL | login                            | NULL                  | \n| 774 | unauthenticated user | 172.19.0.139:46839 | NULL | Connect | NULL | login                            | NULL                  | \n| 775 | unauthenticated user | 172.19.0.139:46841 | NULL | Connect | NULL | login                            | NULL                  | \n| 776 | unauthenticated user | 172.19.0.139:46844 | NULL | Connect | NULL | login                            | NULL                  | \n| 777 | unauthenticated user | 172.19.0.139:46845 | NULL | Connect | NULL | login                            | NULL                  | \n| 778 | unauthenticated user | 172.19.0.139:46847 | NULL | Connect | NULL | login                            | NULL                  | \n| 779 | unauthenticated user | 172.19.0.27:32898  | NULL | Connect | NULL | login                            | NULL                  | \n| 780 | unauthenticated user | 172.19.0.27:32900  | NULL | Connect | NULL | login                            | NULL                  | \n| 781 | unauthenticated user | 172.19.0.139:46850 | NULL | Connect | NULL | login                            | NULL                  | \n| 782 | unauthenticated user | 172.19.0.139:46852 | NULL | Connect | NULL | login                            | NULL                  | \n| 783 | unauthenticated user | 172.19.0.139:46854 | NULL | Connect | NULL | login                            | NULL                  | \n| 784 | unauthenticated user | 172.19.0.139:46857 | NULL | Connect | NULL | login                            | NULL                  | \n| 785 | unauthenticated user | 172.19.0.139:46859 | NULL | Connect | NULL | login                            | NULL                  | \n| 786 | unauthenticated user | 172.19.0.27:32903  | NULL | Connect | NULL | login                            | NULL                  | \n| 787 | unauthenticated user | 172.19.0.139:46862 | NULL | Connect | NULL | login                            | NULL                  | \n| 788 | unauthenticated user | 172.19.0.139:46865 | NULL | Connect | NULL | login                            | NULL                  | \n| 789 | unauthenticated user | 172.19.0.139:46866 | NULL | Connect | NULL | login                            | NULL                  | \n| 790 | unauthenticated user | 172.19.0.139:46868 | NULL | Connect | NULL | login                            | NULL                  | \n| 791 | unauthenticated user | 172.19.0.139:46871 | NULL | Connect | NULL | login                            | NULL                  | \n| 792 | unauthenticated user | 172.19.0.139:46873 | NULL | Connect | NULL | login                            | NULL                  | \n| 793 | unauthenticated user | 172.19.0.27:32907  | NULL | Connect | NULL | login                            | NULL                  | \n| 794 | unauthenticated user | 172.19.0.27:32909  | NULL | Connect | NULL | login                            | NULL                  | \n| 795 | unauthenticated user | 172.19.0.27:32911  | NULL | Connect | NULL | login                            | NULL                  | \n| 796 | unauthenticated user | 172.19.0.139:46875 | NULL | Connect | NULL | login                            | NULL                  | \n| 797 | unauthenticated user | 172.19.0.27:32914  | NULL | Connect | NULL | login                            | NULL                  | \n| 798 | unauthenticated user | 172.19.0.27:32916  | NULL | Connect | NULL | login                            | NULL                  | \n| 799 | unauthenticated user | 172.19.0.139:46877 | NULL | Connect | NULL | login                            | NULL                  | \n| 800 | unauthenticated user | 172.19.0.139:46879 | NULL | Connect | NULL | login                            | NULL                  | \n+-----+----------------------+--------------------+------+---------+------+----------------------------------+-----------------------+\n57 rows in set (0.00 sec)\n</code></pre>\n"},{"tags":["java","mysql","hibernate","genericdao"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13239120,"title":"What's the best way to calling a Stored Procedure using Hibernate in a Generic DAO?","body":"<p>I'm using MySql and my query to call is like:</p>\n\n<pre><code>call SPGetChart (idNumber, nameChart);\n</code></pre>\n"},{"tags":["php","html","mysql","database"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13240327,"title":"How to address every line of a mysql table?","body":"<p>To create a dynamic table within php, I set the variable <code>$count</code> from a query, which counts the rows in specific table. Then I would like to create a table with the exact number of rows as a html table:</p>\n\n<pre><code>for($i=1;$i=&lt;$count;$i++){\n    echo\"&lt;tr&gt;&lt;td&gt;$name&lt;/td&gt;&lt;td&gt;$rights&lt;/td&gt;&lt;/tr&gt;\";\n}\n</code></pre>\n\n<p>That's the way i want the table to be displayed. But everytime the for-loop is called, the values of <code>$name</code> and <code>$rights</code> should be taken from the database-table. But how should i handle this? I thought about a simple query selecting the name from the line where ID equals i. But then i remembered that always when i delete an entry from the table there will be gaps.\nFor example when there 3 entries and i delete the second one. There just are 2 entries; so the name of the second row, which ID is 3, will never be selected. Is there any way of handling this problem in an appropriated way?</p>\n"},{"tags":["mysql","query","table","count"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":26,"score":1,"question_id":13240115,"title":"MySql find match in any of three tables?","body":"<p>im trying to find a match for an ip address in any one of three tables but my query tells me the column i'm looking in is ambiguous?</p>\n\n<pre><code>SELECT COUNT(*) \nFROM `zz_tview`,`zz_tview1`,`zz_tview3` \nWHERE `ipaddress` =\"192.168.01.01\"\n</code></pre>\n\n<p>So i get this message \"Column 'ipaddress' in where clause is ambiguous\", how would i construct this firstly so it works and secondly so the query isn't too heavy as the tables have many thousands of rows?</p>\n\n<p>Regards,\nSimon</p>\n"},{"tags":["php","mysql","database","pdo","badge"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13239104,"title":"Badge Unlocked Notification setup","body":"<p>I have been brainstorming for ideas on the best ways to notify a user that they have unlocked a badge. It does not need to be instantaneous or live. I was thinking at least every time they view their dashboard it would run to check the status then display. Here is the general direction I have been thinking. </p>\n\n<p>I have two tables. One called <strong>badge_status</strong> and another the <strong>users</strong> table.</p>\n\n<p>in the users table I have the users and the badge fields such as Badge1, Badge2, Badge3 and etc. The badge fields default value are set to \"locked\". When the users do the right actions to unlock the badge the field then becomes \"unlocked\"</p>\n\n<p>I was thinking of a set up like this for the notifications but am wondering if it is overkill or there is an easier way?</p>\n\n<pre><code>&lt;?php\n$db = new PDO('mysql:host=hostname;dbname=dbname;charset=UTF-8', 'username', 'password');\n$username = $_SESSION['jigowatt']['username'];\n$statement = $db-&gt;prepare(\"SELECT badge1, badge1_status FROM login_users, status_table WHERE username = :username\");\n$badge1 = $row['badge1'];\n$badge1_status = $row['badge1_status'];\n\n\n\nif($badge1_status == \"finished\")  {\n}\nelse if($badge1 ==\"unlocked\")   {\n// Show fade in pop up div for notification &lt;div id=\"notification-div\"&gt;Badge Unlocked!&lt;/div&gt;\n$setBadgeValue = $db-&gt;prepare(\"UPDATE status_table SET badge1_status='finished' WHERE username= :username\");\n\n}\n\n&lt;?\n</code></pre>\n\n<p>I would have the second table set up if the status of badge 1 is \"finished\" then it won't do anything, thus making sure the notification only displays once.</p>\n\n<p>if it is not finished and badge1s status is \"unlocked\" the then show the notification DIV and then write to the table for badge1_status as \"finished\".</p>\n\n<p>On a side note I am still in the process of converting over to proper PDO. Thanks for any advice, tips or improvement you can give on this setup! </p>\n"},{"tags":["php","mysql","time","mysqli","dateformat"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13239683,"title":"MySQL Date_Format isn't working with","body":"<p>I have a PHP page with a MySQL database with 2 fields that use the <code>TIME</code> type in MySQL. I want to convert those two fields from the 24 hour format <code>(00:00:00)</code> into 12 hour AM/PM format <code>(00:00 AM)</code> using MySQL's <code>DATE_FORMAT('','')</code> but it's not working. </p>\n\n<p>So far, what I have done is created a 3rd and 4th field that also uses the TIME type. I send the 1st and 2nd field into the 3rd and 4th and convert the 3rd and 4th to preserve the original. </p>\n\n<pre><code>&lt;?php\n//connection statements omitted\n\n$sql=\"SELECT * FROM $table ORDER BY date LIMIT $start, $amount\";\n$result = $mysqli-&gt;query($sql);\n\n//Sends the original time_in data to the new format_in column. \n$sql2=\"UPDATE $table SET format_in = time_in\";\n$result2=$mysqli-&gt;query($sql2);\n\n$sql3=\"SELECT DATE_FORMAT(format_in,'%l:%i %p') FROM $table\";\n$result3=$mysqli-&gt;query($sql3);\n\nwhile($row = $result-&gt;fetch_array()){\n\n?&gt;\n//other fields omitted\n&lt;td&gt;&lt;?php echo $row['format_in'];?&gt;&lt;/td&gt;\n\n//end while loop\n&lt;?php } ?&gt;\n</code></pre>\n\n<p>The only thing this code does is replicates whatever was in the time_in column. Which is the standard 24 hour format <code>00:00:00</code>. Basically, this code doesn't do anything. What am I doing wrong here?</p>\n\n<p>EDITED to show my    $result</p>\n"},{"tags":["c#","mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13239701,"title":"C# Update MySql Database not Working","body":"<p>I am trying to update my MySql database but it won't work. I have inserting and selecting working fine. Not sure if it is my syntax on the query or what.</p>\n\n<pre><code>string id = invoicenumb.Text;\nstring mysqlIns1 = \"UPDATE invoices SET Status = '\" + \n                    comboBox1.SelectedItem.ToString() + \"' WHERE id = '\" +\n                    Convert.ToInt16(id) + \"'\";\n\n\n            try\n            {\n                MySqlConnection mysqlCon = new MySqlConnection(mysqlProv);\n                mysqlCon.Open();\n\n                MySqlDataAdapter MyDA = new MySqlDataAdapter();\n                MyDA.SelectCommand = new MySqlCommand(mysqlIns1, mysqlCon);\n\n                MessageBox.Show(\"Success!\");\n                mysqlCon.Close();\n            }\n            catch\n            {\n                MessageBox.Show(\"Error Occured Please Try Again\");\n            }\n</code></pre>\n"},{"tags":["php","mysql","prepared-statement","flourishlib"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":20,"score":2,"question_id":13238911,"title":"Why Flourishlib fDatabase disable prepared query?","body":"<p>I'm discovering FlourishLib and I was looking at their fDatabase.php code to see how they handle sql queries, and I was really surprised to see that when you use MySQL, they disable prepared queries</p>\n\n<pre><code>$this-&gt;connection-&gt;setAttribute(PDO::MYSQL_ATTR_DIRECT_QUERY, 1);\n</code></pre>\n\n<p>(<a href=\"https://github.com/flourishlib/flourish-classes/blob/master/fDatabase.php#L599\" rel=\"nofollow\">line 599</a>)</p>\n\n<p>Why !?!?</p>\n\n<p>I'm used to PDO.prepare &amp; PDOStatement.execute, and I wonder why this choice. Can someone explain it to me please?</p>\n\n<p>Thanks :)</p>\n"},{"tags":["mysql","ruby-on-rails","sqlite"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":490,"score":2,"question_id":2394757,"title":"Rails keeps trying to use SQLite , despite that I've configured MySQL for my project","body":"<p>I setup my rails project \"tracks\" using:</p>\n\n<pre><code>$ rails --database=mysql tracks # OK\n$ cd tracks\n$ vim config/database.yml # correct using mysql adapter, added password spec\n$ rake db:create RAILS_ENV='development' # OK\n$ rake db:migrate # OK\n\n$ ruby script/generate scaffold user name:string password:string email:string url:string # OK\n$ rake db:migrate # OK, creates table\n$ ruby script/server # OK, starts WEBrick\n</code></pre>\n\n<p>I open up the thing in a web browser:</p>\n\n<pre><code>http://localhost:3000 # correctly shows the rails welcome splash\n</code></pre>\n\n<p>I navigate to</p>\n\n<pre><code>http://localhost:3000/users/new\n</code></pre>\n\n<p>and get a huge slew of errors:</p>\n\n<pre><code>ActiveRecord::StatementInvalid in UsersController#index\n\nSQLite3::SQLException: no such table: users: SELECT * FROM \"users\" \nRAILS_ROOT: /home/drew/tracks/trunk/tracks\n\nApplication Trace | Framework Trace | Full Trace\nvendor/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:188:in `log'\nvendor/rails/activerecord/lib/active_record/connection_adapters/sqlite_adapter.rb:132:in `execute'\nvendor/rails/activerecord/lib/active_record/connection_adapters/sqlite_adapter.rb:372:in `catch_schema_changes'\nvendor/rails/activerecord/lib/active_record/connection_adapters/sqlite_adapter.rb:132:in `execute'\nvendor/rails/activerecord/lib/active_record/connection_adapters/sqlite_adapter.rb:275:in `select'\nvendor/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:7:in `select_all_without_query_cache'\nvendor/rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:60:in `select_all'\nvendor/rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:81:in `cache_sql'\nvendor/rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:60:in `select_all'\nvendor/rails/activerecord/lib/active_record/base.rb:635:in `find_by_sql'\nvendor/rails/activerecord/lib/active_record/base.rb:1490:in `find_every'\nvendor/rails/activerecord/lib/active_record/base.rb:589:in `find'\napp/controllers/users_controller.rb:5:in `index'\n</code></pre>\n\n<p><strong>wtf? Why is ruby still trying to use SQLite? database.yml has zero mention of SQLite.</strong></p>\n\n<p>Thanks</p>\n"},{"tags":["mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":303,"score":-5,"question_id":11480129,"title":"mysql_fetch_row() vs mysql_fetch_assoc() vs mysql_fetch_array()","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1536813/mysql-fetch-array-mysql-fetch-assoc-mysql-fetch-object\">mysql_fetch_array, mysql_fetch_assoc, mysql_fetch_object</a>  </p>\n</blockquote>\n\n\n\n<p>I want a function which can return fields in the current row of a resultset into an associative array and moves the result pointer to the next row.</p>\n\n<p>Confused between </p>\n\n<pre><code>mysql_fetch_row()\nmysql_fetch_assoc()\nmysql_fetch_array()\n</code></pre>\n\n<p>Which one should I use? Any help would be appreciated.\n Thank you.</p>\n"},{"tags":["php","javascript","mysql","pdo"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13238985,"title":"Issue inserting ampersands into MySQL","body":"<p>I've been trying to fix this issue for a while, I've spent endless amounts of time on the web searching for a solution for it. So I thought I'd come to you guys since I am at wits end with this problem. Basically I have a CMS system that I designed a while back, I recently updated it to modern standards using PDO and such like, now I seem to have an issue inserting ampersands (&amp;) into the MySQL database, everything is set to 'UTF-8', the PDO connection, the MySQL collation, everything, yet for some reason when there is an ampersand in the form from the textarea's, the data is sent, but is cut off when it reaches the ampersand, as if it's parsing it and cutting it off because it thinks that the ampersand is a vulnerability.</p>\n\n<p>Here is my code for the insert in PHP:</p>\n\n<pre><code>            $fbl = $_POST['fblValue'];\n        $fbr = $_POST['fbrValue'];\n        $sbl = $_POST['sblValue'];\n        $sbr = $_POST['sbrValue'];\n        $tbl = $_POST['tblValue'];\n        $tbr = $_POST['tbrValue'];\n        $fblDisabled = $_POST['fblDisabled'];\n        $fbrDisabled = $_POST['fbrDisabled'];\n        $sblDisabled = $_POST['sblDisabled'];\n        $sbrDisabled = $_POST['sbrDisabled'];\n        $tblDisabled = $_POST['tblDisabled'];\n        $tbrDisabled = $_POST['tbrDisabled'];\n        $footer = $_POST['footerValue'];\n        $copyright = $_POST['copyrightValue'];\n\n        $statement = $conn-&gt;prepare(\"UPDATE pages SET FBL = :fbl, \n                                                    FBLDisabled = :fblDisabled, \n                                                    FBR = :fbr, \n                                                    FBRDisabled = :fbrDisabled, \n                                                    SBL = :sbl, SBLDisabled = :sblDisabled, \n                                                    SBR = :sbr, SBRDisabled = :sbrDisabled, \n                                                    TBL = :tbr, TBLDisabled = :tblDisabled, \n                                                    TBR = :tbr, TBRDisabled = :tbrDisabled, \n                                                    Footer = :footer, \n                                                    Copyright = :copyright \n                                                    WHERE ID = :pageToEdit\");\n        $statement-&gt;bindParam(\":fbl\", $fbl);\n        $statement-&gt;bindParam(\":fblDisabled\", $fblDisabled);\n        $statement-&gt;bindParam(\":fbr\", $fbr);\n        $statement-&gt;bindParam(\":fbrDisabled\", $fbrDisabled);\n        $statement-&gt;bindParam(\":sbl\", $sbl);\n        $statement-&gt;bindParam(\":sblDisabled\", $sblDisabled);\n        $statement-&gt;bindParam(\":sbr\", $sbr);\n        $statement-&gt;bindParam(\":sbrDisabled\", $sbrDisabled);\n        $statement-&gt;bindParam(\":tbl\", $tbl);\n        $statement-&gt;bindParam(\":tblDisabled\", $tbDisabled);\n        $statement-&gt;bindParam(\":tbr\", $tbr);\n        $statement-&gt;bindParam(\":tbrDisabled\", $tbrDisabled);\n        $statement-&gt;bindParam(\":footer\", $footer);\n        $statement-&gt;bindParam(\":copyright\", $copyright);\n        $statement-&gt;bindParam(\":pageToEdit\", $pageToEdit);\n        $statement-&gt;execute();              \n    }\n</code></pre>\n\n<p>Also may I add, that I use ajax to send the data, is there a possibility that it's something to do with that?</p>\n\n<p>Here is the AJAX code:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n\n        function savePage(str1, str2, str3, str4, str5, str6, str7, str8, str9, str10, str11, str12, str13, str14)\n        {\n            var xmlhttp;\n\n            if (window.XMLHttpRequest)\n            {// code for IE7+, Firefox, Chrome, Opera, Safari\n                xmlhttp=new XMLHttpRequest();\n            }\n            else\n            {// code for IE6, IE5\n                xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\");\n            }\n\n            xmlhttp.open(\"post\", \"putEditedPage.php\", true);\n            xmlhttp.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\n            xmlhttp.send(\"fblValue=\" + str1 + \"&amp;fbrValue=\" + str2 + \"&amp;sblValue=\" + str3 + \"&amp;sbrValue=\" + str4 + \"&amp;tblValue=\" + str5 + \"&amp;tbrValue=\" + str6 + \"&amp;fblDisabled=\" + str7 + \"&amp;fbrDisabled=\" + str8 + \"&amp;sblDisabled=\" + str9 + \"&amp;sbrDisabled=\" + str10 + \"&amp;tblDisabled=\" + str11 + \"&amp;tbrDisabled=\" + str12 + \"&amp;footerValue=\" + str13 + \"&amp;copyrightValue=\" + str14);\n            document.getElementById('blackout').style.display=\"block\";\n            document.getElementById('Alert').style.display=\"block\";\n            document.getElementById('Alert').style.marginTop=((window.innerHeight/2)+((window.innerHeight/100) * 35))+\"px\";\n            setTimeout(function(){\n                document.getElementById('blackout').style.display='none';           \n                document.getElementById('Alert').style.display='none';\n            }, 1250);\n        }\n        function insertTab(o, e)\n        {\n            var kC = e.keyCode ? e.keyCode : e.charCode ? e.charCode : e.which;\n            if (kC == 9 &amp;&amp; !e.shiftKey &amp;&amp; !e.ctrlKey &amp;&amp; !e.altKey)\n            {\n                var oS = o.scrollTop;\n                if (o.setSelectionRange)\n                {\n                    var sS = o.selectionStart;\n                    var sE = o.selectionEnd;\n                    o.value = o.value.substring(0, sS) + \"\\t\" + o.value.substr(sE);\n                    o.setSelectionRange(sS + 1, sS + 1);\n                    o.focus();\n                }\n                else if (o.createTextRange)\n                {\n                    document.selection.createRange().text = \"\\t\";\n                    e.returnValue = false;\n                }\n                o.scrollTop = oS;\n                if (e.preventDefault)\n                {\n                    e.preventDefault();\n                }\n                return false;\n            }\n            return true;\n        }\n\n    &lt;/script&gt;\n</code></pre>\n\n<p>Thanks in advance guys, cheers.</p>\n"},{"tags":["mysql","disaster-recovery"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13239517,"title":"Not all tables showing up when recovering MYSQL","body":"<p>I am recovering a missing mysql db with tables and have the frm files and ibdata1.</p>\n\n<p>I have used innodb_file_per_table to make each DB have its own data file and tests show that new DB now use this system when created.</p>\n\n<p>I noticed that when I to view the newly imported frms and data or write any SQL against them, they aren't being found. Several 'views' are available, but no tables.</p>\n\n<p>If I run check table sometablename, I get that the table doesn't exist. \nIf I try to create a table with the same name, I get that the table already exists.</p>\n\n<p>I have stopped and started the MYSQL service several times, hoping it would pick up the new frms, but nothing.</p>\n\n<p>Any idea?</p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13175046,"title":"Trigger in a database that should change values in a table in a different database?","body":"<p>How to create a trigger that is activated by a change in a database which changes values in a table in a different database ? </p>\n\n<p>One database contains the table which has the login information (usernames, passwords) . When a user logs in, values in a table in another database is to be updated.</p>\n\n<p>How could this be achieved ?</p>\n\n<p><strong>[edit]</strong></p>\n\n<p>Sorry, yes, the two different databases are on the same database server.</p>\n\n<p><strong>[Updated]</strong></p>\n\n<p>I have <code>mainDB.users</code> table :</p>\n\n<pre><code>username | password | NumberLogins\n---------|----------|--------------\n         |          |\n</code></pre>\n\n<p>and a <code>otherDB.history</code> table :</p>\n\n<pre><code>username | points\n---------|---------\n         |\n</code></pre>\n\n<p>How do we increment the corresponding <code>points</code> after a user has logged in ?</p>\n\n<pre><code>USE `mainDB`;\n\nDROP TRIGGER IF EXISTS `updateUserInfo`;\n\nDELIMITER ||\n\nCREATE TRIGGER `updateUserInfo` \n    BEFORE UPDATE ON `users` \n    FOR EACH ROW\n\n    BEGIN\n        IF NEW.`NumberLogins`=5 THEN\n\n            UPDATE `otherDB`.`history`\n            SET `points` = `points` + 1,\n            WHERE \n              `username`=NEW.`username`;\n\n        END IF;\n\n    END ||\n</code></pre>\n\n<p>I keep getting this error.</p>\n\n<pre><code> #1442 - Can't update table 'history' in stored function/trigger because it is already used by statement which invoked this stored function/trigger. \n</code></pre>\n"},{"tags":["mysql","sql","left-join"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13239485,"title":"Ordering joined query by multiple rows of the joined table","body":"<p>I've got a <code>posts</code> table and a <code>postmeta</code> table which contains <code>meta_key</code> and <code>meta_value</code> columns. I've included a simplified table structure below (with some demo data).</p>\n\n<pre><code>CREATE TABLE `posts` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `title` varchar(200) NOT NULL DEFAULT '',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;\n\nINSERT INTO `posts` (`id`, `title`) VALUES\n    (1,'First post'),\n    (2,'Second post'),\n    (3,'Third post'),\n    (4,'Fourth post');\n\nCREATE TABLE `postmeta` (\n  `meta_id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `post_id` int(11) NOT NULL,\n  `meta_key` varchar(200) NOT NULL DEFAULT '',\n  `meta_value` text NOT NULL,\n  PRIMARY KEY (`meta_id`)\n) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;\n\nINSERT INTO `postmeta` (`meta_id`, `post_id`, `meta_key`, `meta_value`) VALUES\n    (1,1,'rating','80'),\n    (2,1,'total_votes','500'),\n    (3,2,'rating','80'),\n    (4,2,'total_votes','501'),\n    (5,3,'rating','95'),\n    (6,3,'total_votes','200');\n</code></pre>\n\n<p>The posts need to be ordered by rating. Post without any rating need to be included too, hence the <code>LEFT JOIN</code>. No problem:</p>\n\n<pre><code>SELECT *\nFROM posts p\nLEFT JOIN postmeta m ON p.id = m.post_id AND m.meta_key = 'rating'\nORDER BY m.meta_value DESC\n</code></pre>\n\n<p>However, <strong>for posts with the same rating, I'd like to further order them by the total vote count</strong> which is stored in another row in the <code>postmeta</code> table. In the example above, the first and second post have a rating of 80 but since the second post has more votes, it should be ordered before the first post. How would you pull that off in a single query?</p>\n"},{"tags":["mysql","mamp","lamp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13238201,"title":"MAMP 1045 error on system boot only","body":"<p>My issue appears to be related to this unanswered question: <a href=\"http://stackoverflow.com/questions/10219839/mamp-1045-error\">Mamp 1045 Error</a></p>\n\n<p>I wasn't sure if I could comment there or if I had to start a new question, so sorry in advance if I'm not posting in the right spot.</p>\n\n<p>Anyway, MAMP is in my startup items so it will open automatically when I boot OSX. (I actually have it launching via Delayed Launcher -- I wondered if it failed because it was booting too early, but it doesn't matter if it boots ASAP or after 30 seconds, it still has this issue.) When MAMP starts up after a system reboot, it gives me the following error:</p>\n\n<blockquote>\n  <p>Checking MySQL databases failed</p>\n  \n  <p>Error message:</p>\n  \n  <p>/Applications/MAMP/Library/bin/mysqlcheck: Got error: 1045: Access\n  denied for user 'root'@'localhost' (using password: YES) when trying\n  to connect</p>\n</blockquote>\n\n<p>The MAMP indicator lights show that Apache Server and MySQL Server are on. If I go to localhost, it shows the default MAMP \"The virtual host was set up successfully\" page instead of the actual virtual host I have mapped to localhost, and none of my vhosts work. </p>\n\n<p><strong>If I click Ok, then click Stop Servers, then click Start Servers, it starts up no problem and I can use MAMP as usual. \nThis only happens when I boot my OS, MAMP always works again when I restart MAMP itself.</strong></p>\n\n<p>This is my mysql_error_log.err:</p>\n\n<pre><code>121105 10:15:31 mysqld_safe Starting mysqld daemon with databases from /Applications/MAMP/db/mysql\n121105 10:15:32 [Warning] You have forced lower_case_table_names to 0 through a command-line option, even though your file system '/Applications/MAMP/db/mysql/' is case insensitive.  This means that you can corrupt a MyISAM table by accessing it with different cases. You should consider changing lower_case_table_names to 1 or 2\n121105 10:15:32 [Note] Plugin 'FEDERATED' is disabled.\n121105 10:15:32 InnoDB: The InnoDB memory heap is disabled\n121105 10:15:32 InnoDB: Mutexes and rw_locks use GCC atomic builtins\n121105 10:15:32 InnoDB: Compressed tables use zlib 1.2.3\n121105 10:15:32 InnoDB: Initializing buffer pool, size = 128.0M\n121105 10:15:32 InnoDB: Completed initialization of buffer pool\n121105 10:15:32 InnoDB: highest supported file format is Barracuda.\n121105 10:15:33  InnoDB: Waiting for the background threads to start\n121105 10:15:34 InnoDB: 1.1.5 started; log sequence number 1595675\n121105 10:15:34 [Note] Event Scheduler: Loaded 0 events\n121105 10:15:34 [Note] /Applications/MAMP/Library/bin/mysqld: ready for connections.\nVersion: '5.5.9'  socket: '/Applications/MAMP/tmp/mysql/mysql.sock'  port: 3306  Source distribution\n</code></pre>\n\n<p>I checked that my user name and password are correct in all the scripts in the /Applications/MAMP/bin folder (it is) and even reset it using </p>\n\n<pre><code>/Applications/MAMP/bin/mysql4/bin/mysqladmin -u root -p password &lt;NEWPASSWORD&gt;\n</code></pre>\n\n<p>to ensure that it really was the correct password. I also followed the previous answerer's comment about running </p>\n\n<pre><code>GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION;\n</code></pre>\n\n<p>which executed fine but didn't solve the problem. </p>\n\n<p>It doesn't matter if I have MAMP set to use the default Apache/MySQL ports or the default MAMP ports, so I have it set as the former. </p>\n\n<p>Any ideas?? MAMP works again when I stop and start it, but it's really annoying to have to go through that process every time I boot up or restart my computer, since you have to put in your password whenever you stop MAMP. :/</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Uninstalled/reinstalled MAMP and it's still doing the same thing, except now it's asking for my password when it launches, too.</p>\n"},{"tags":["mysql","subquery","mysql-error-1093"],"answer_count":11,"favorite_count":22,"up_vote_count":94,"down_vote_count":1,"view_count":56814,"score":93,"question_id":45494,"title":"Mysql error 1093 - Can't specify target table for update in FROM clause","body":"<p>I have a table <code>story_category</code> in my database with corrupt entries. The next query returns the corrupt entries:</p>\n\n<pre><code>SELECT * FROM  story_category WHERE category_id NOT IN (\nSELECT DISTINCT category.id FROM category INNER JOIN story_category ON category_id=category.id);\n</code></pre>\n\n<p>I tried to delete them excuting:</p>\n\n<pre><code>DELETE FROM  story_category WHERE category_id NOT IN (\nSELECT DISTINCT category.id FROM category INNER JOIN story_category ON category_id=category.id);\n</code></pre>\n\n<p>but I get the next error: </p>\n\n<blockquote>\n  <p>#1093 - You can't specify target table 'story_category' for update in FROM clause </p>\n</blockquote>\n\n<p>How can I overcome this?</p>\n"},{"tags":["mysql","sql","triggers","referencing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13237288,"title":"MySQL: how to refer to transition tables","body":"<p>:) I have these two tables:</p>\n\n<pre><code>create table possiede (\nsoc1 integer not null,\nsoc2 integer not null,\nprimary key (soc1,soc2),\nperc double\n);\n\ncreate table contr (\nsoc1 integer not null,\nsoc2 integer not null,\nprimary key(soc1, soc2)\n);\n</code></pre>\n\n<p>I have these two triggers in a generic SQL syntax and I need to translate them into MySQL syntax:</p>\n\n<pre><code>create trigger contrDir\nafter insert on possiede\nfor each row\nwhen percent &gt; 0.5 and (soc1,soc2) not in (select * from contr)\ninsert into contr values (soc1,soc2);\n\ncreate trigger contrIndir\nafter insert on possiede\nreferencing new table as newTable\nfor each row\ninsert into possiede values\n(select P.soc1, N.soc2, P.perc+N.perc\nfrom newTable as N join possiede as P on N.soc1 = P.soc2);\n</code></pre>\n\n<p>this was my first try, but it gives me an error on \"referencing\" keyword (\"syntax error, unexpected IDENT_QUOTED, expecting FOR_SYM\") and I'm not sure the translation is correct:</p>\n\n<pre><code>create trigger controllo\nafter insert on possiede\nREFERENCING new table as newTable\nfor each row\nbegin\n    insert into possiede (select P.soc1, N.soc2, P.perc+N.perc from\n    newTable as N join possiede as P on N.soc1=P.soc2);\n    if percent &gt; 0.5 and (soc1,soc2) not in (select * from contr) then\n    insert into contr values (soc1,soc2);\n    end if;\nend;\n</code></pre>\n\n<p>also as you noticed I had to compress two triggers into one because of some MySQL constraints. Could somebody give me the right translation?</p>\n"},{"tags":["mysql","sql","query","security"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13238850,"title":"Override column value in WHERE clause?","body":"<p>I was wondering if it was possible to override column value in the Where clause of a SQL query (MySQL in my case).</p>\n\n<p>To be more clear, here is an example :</p>\n\n<p>Suppose a basic query is :</p>\n\n<pre><code>SELECT lastname, firstname FROM contacts WHERE lastname = \"Doe\";\n</code></pre>\n\n<p>Is it possible to force <code>lastname</code> and <code>firstname</code> to return value from an other table, just by modifying what is after the WHERE part ? Something like </p>\n\n<pre><code>SELECT lastname, firstname FROM contacts WHERE lastname = (SELECT name FROM companies);\n</code></pre>\n\n<p>I am currently testing a web application, and I found a SQL Injection flaw where I can change <code>Doe</code> to whatever I want, but I'm limited with only one query (<a href=\"http://php.net/mysql_query\" rel=\"nofollow\">mysql_query restriction of PHP</a>) and <code>addslashes</code> (so no \" and ').</p>\n"},{"tags":["php","mysql","ajax","jquery-ajax","logic"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":37,"score":0,"question_id":13181220,"title":"Popup notification on table change?","body":"<p>I have a table for users Badges and Achievements. The default value for a Badge is written as <strong>locked</strong> in the field value for each badge.  Then when the user unlocks the badge the field value is updated to <strong>unlocked</strong>. How could I alert the user with a popup message that alerts them that they have just unlocked a new achievement based on the value change?</p>\n"},{"tags":["php","mysql","calendar","pdo"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13239044,"title":"Getting ERROR with IN_ARRAY when variable is null","body":"<p>I'm developing this calendar that show events inside each date. The events that the user sees is just the events that the user is related. The relationship is made via MySQL many-to-many table. It is working fine. I am having problem only when my user has no events related to him. In that case, the <strong>in_array</strong> php function gives me this error:</p>\n\n<blockquote>\n  <p><strong>Notice</strong>: Undefined variable: cleanDataArray in C:\\xampp\\htdocs\\sistema-navalha\\calendario_teste.php on line 51</p>\n  \n  <p><strong>Warning</strong>: in_array() expects parameter 2 to be array, null given in C:\\xampp\\htdocs\\sistema-navalha\\calendario_teste.php on line 51</p>\n</blockquote>\n\n<p>I understand that the problem is that my user gives me no value that later will be calculated by <strong>in_array</strong> function, but I'm not able to figure out a reasonable alternative. The code that matters in this situation is this:</p>\n\n<pre><code>$stmt = $db-&gt;prepare(\"SELECT * FROM events WHERE\n                      id_events = ( SELECT id_events FROM relationship_events WHERE id_user = ?)\");\n$stmt-&gt;bindParam(1, $idUser);\n$stmt-&gt;execute();\n\n$rawTimeStamps = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);\n$cleanDateArray = array();\n\nforeach ($rawTimeStamps as $t) {\n$rawDate = $t['start'];\n$rawDate = getdate($rawDate);\n$cleanDate = mktime(0,0,0,$rawDate['mon'],$rawDate['mday'],$rawDate['year']);\n$cleanDataArray[] = $cleanDate;\n}\n\nfor($list_day = 1; $list_day &lt;= $days_in_month; $list_day++):\n\n    $calendar.= '&lt;td class=\"calendar-day\"&gt;';\n        $timestamp = mktime(0,0,0,$month,$list_day,$year);\n        if (in_array($timestamp, $cleanDataArray)) {\n\n        $date = getdate($timestamp);\n        $time_start = mktime(0,0,0,$date['mon'],$date['mday'],$date['year']);\n        $time_end = mktime(23,59,59,$date['mon'],$date['mday'],$date['year']);\n        $stmt = $db-&gt;prepare('SELECT title FROM events WHERE start BETWEEN ? AND ?');\n        $stmt-&gt;bindParam(1,$time_start,PDO::PARAM_INT);\n        $stmt-&gt;bindParam(2,$time_end,PDO::PARAM_INT);\n        $stmt-&gt;execute();\n        $events = $stmt-&gt;fetch(PDO::FETCH_ASSOC);\n\n        $calendar.= '&lt;div class=\"day-number day-number-event\"&gt;&lt;a href=\"#\"&gt;'.$list_day.'&lt;/a&gt;&lt;/div&gt;&lt;p&gt;'.$events[\"title\"].'&lt;/p&gt;';\n        } else {\n        $calendar.= '&lt;div class=\"day-number day-number-noevent\"&gt;'.$list_day.'&lt;/div&gt;&lt;div id=\"calendar-events\"&gt;&lt;/div&gt;';\n        }\n\n    $calendar.= '&lt;/td&gt;';\n    if($running_day == 6):\n        $calendar.= '&lt;/tr&gt;';\n        if(($day_counter+1) != $days_in_month):\n            $calendar.= '&lt;tr class=\"calendar-row\"&gt;';\n        endif;\n        $running_day = -1;\n        $days_in_this_week = 0;\n    endif;\n    $days_in_this_week++; $running_day++; $day_counter++;\nendfor;\n</code></pre>\n\n<p>Hope someone have a solution</p>\n"},{"tags":["java","mysql","connectivity"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13238875,"title":"Exception in thread \"AWT-EventQueue-0\" java.lang.ArrayIndexOutOfBoundsException: 1 >= 1","body":"<p>I used the following code for retrieving a table 'at' in database 'scribe' made in mysql to be displayed in a JTable 'shdtbl' but it is showing this exception : </p>\n\n<pre><code>Exception in thread \"AWT-EventQueue-0\" java.lang.ArrayIndexOutOfBoundsException: 1 &gt;= 1\n</code></pre>\n\n<p>The code:</p>\n\n<pre><code>DefaultTableModel dtm = (DefaultTableModel)shdtbl.getModel();\nint i=1,j=1;\nVector&lt;String&gt; v=new Vector();\ntry {\n    Class.forName(\"java.sql.Driver\");\n} catch (ClassNotFoundException ex) {\n    Logger.getLogger(f.class.getName()).log(Level.SEVERE, null, ex);\n}\ntry {\n    ResultSet rs0=DriverManager.getConnection(\"jdbc:mysql://localhost/scribe\",\"root\",\"shivam\").createStatement().executeQuery(\"select * from at;\");\n    while(i&lt;=4){\n        if(rs0.next()){\n             rs0.absolute(j);\n             v.addElement(rs0.getString(i));\n             if(i==4){\n                 j++;\n                 dtm.addRow(v);\n                 v.clear();\n                 i=0;\n             }\n         }\n         i++;\n     }\n} \ncatch (SQLException ex) {\n    Logger.getLogger(f.class.getName()).log(Level.SEVERE, null, ex);\n}\n</code></pre>\n\n<p>Plz help.</p>\n"},{"tags":["php","mysql","magento"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13239007,"title":"Export Magento Data to 1.7 from 1.3","body":"<p>I have a unique issue that I haven't been able to grasp yet.  I have upgraded a Magento site from 1.3.2.4 via command line on a test site to 1.7.0.2.  The problem is, when I perform this update, it deletes all data when creating/deleting the tables/columns/rows --  So I end up with the correct structure and schema I just don't have any of my data.  I performed the following:</p>\n\n<p><code>./pear mage-setup</code></p>\n\n<p><code>./pear upgrade -f magento-core/Mage_All_Latest-stable</code></p>\n\n<p><code>chmod 550 ./mage</code></p>\n\n<p><code>./mage mage-setup</code></p>\n\n<p>This got me updated to 1.4.2.0    Next I performed the following\"</p>\n\n<p><code>./mage sync</code></p>\n\n<p><code>./mage list-upgrades</code></p>\n\n<p><code>./mage config-set preferred_state stable</code></p>\n\n<p><code>./mage upgrade-all --force</code></p>\n\n<p>These all succeeded, and when I go to the mage store it reads 1.7.0.2.  Just non of my products, customers or categories are in the DB.  It's intact, and if I create new from there, it works, however I looked at the structure and it's, for the most part, different.  Has anyone out there written a script, or a series of MySQL calls to align these databases?  You'd think I could export a CSV and then import, and Magento would have a contingency for this...  But no they don't.  And their answer when contacted?  Move to the $15,000 Enterprise addition for support ..  LMAO  Whatever ... </p>\n\n<p>In short I need to migrate one database to another, or I am going to have to manually input 2500 products and 50000 customers.  Not good lol. Ideas, experience, scripts?</p>\n"},{"tags":["mysql","fluent","laravel"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13233271,"title":"Undefined variable in fluent query builder","body":"<p>I am starting to use the Laravel framework, and I have a problem with the fluent query builder. In a where condition, if I am using raw values or <code>Input::get()</code>, it retrieves the results and executes correctly, but when I use an assigned variable it shows \"Undefined variable\" errors.</p>\n\n<pre><code>$properties = Listing::where(function($query)\n{\n    if (Input::has('property-type')) $query-&gt;where('property_type', '=',Input::get('property-type'));\n})-&gt;get();\n</code></pre>\n\n<p>it  works correctly, but if I do</p>\n\n<pre><code>$pt=Input::get('property-type');\n$properties = Listing::where(function($query)\n{\n    if ($pt!='') $query-&gt;where('property_type', '=',$pt);\n})-&gt;get();\n</code></pre>\n\n<p>it returns the error</p>\n\n<pre><code>Undefined variable: pt\n</code></pre>\n\n<p>If I print the variable \"$pt\" it contains the value.</p>\n\n<p>I want to use only the variable values, because I should pass these value from the controller to the model as parameters, and build the query in the model function. Am I doing something wrong? Is the variable not assigned before the query execution? Please, can anyone help me to resolve this?</p>\n"},{"tags":["php","mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":30,"score":-1,"question_id":13238933,"title":"Paginate a Table in Multiple Databases (PHP/MySQL)","body":"<p>I have 10 MySQL databases that feature the same table structures/names in each.</p>\n\n<p>The table I am partically interested in is the <strong>Users</strong></p>\n\n<p>I need a way to display/paginate the results from each of the <strong>Users</strong> tables, and sort the data by category_colour</p>\n\n<p>The table fields are:</p>\n\n<p><strong>id:</strong> INT(11)</p>\n\n<p><strong>name:</strong> varchar(255) - e.g. Dave, Lisa, Steve</p>\n\n<p><strong>category_colour:</strong> char(1) - Can be <strong>G</strong> = Green, <strong>O</strong> = Orange, <strong>B</strong> = Blue, <strong>O</strong> = Orange.</p>\n\n<p>If I was to do this without paginate, there would be too many results, and the server would take an age to display them all.</p>\n\n<p>I need the results to be categorized and in order of category_colour (1st: <strong>Red</strong>, 2nd: <strong>Green</strong>, 3rd: <strong>Blue</strong>, 4th: <strong>Orange</strong>) - Displaying the users database <strong>id</strong></p>\n\n<p><strong>OUTPUT EXAMPLE:</strong></p>\n\n<p><strong>Category Colour: Red</strong></p>\n\n<ul>\n<li>Dave - 1</li>\n<li>Steve - 5</li>\n<li>Fred - 4</li>\n<li>.....</li>\n<li>........</li>\n<li>..........</li>\n</ul>\n\n<p><strong>Category Colour: Green</strong></p>\n\n<ul>\n<li>Richard - 6</li>\n<li>Kelly - 8</li>\n<li>........</li>\n<li>............</li>\n</ul>\n\n<p><strong>Category Colour: Blue</strong></p>\n\n<ul>\n<li>Emma - 3</li>\n<li>Scott - 2</li>\n<li>Louise - 7</li>\n<li>...</li>\n<li>....... </li>\n<li>...........</li>\n</ul>\n"},{"tags":["php","mysql","multidimensional-array"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13238787,"title":"PHP - Select & Update statement to return and update a multi dimensional array","body":"<p>I have a database that looks like the following</p>\n\n<p><img src=\"http://i.stack.imgur.com/xPowb.png\" alt=\"table contents\"></p>\n\n<p>In my database both id &amp; fb_user_id are unique. Id is an auto incremented number. </p>\n\n<p>First i would like to insert a new row for arguments say with the following </p>\n\n<pre><code>$new_first_name = \"John\";\n$new_last_name = \"Nolan\";\n$new_email = \"John@Nolan.com\";\n$new_link_url = \"Johns_Link\";\n$new_signups = 0;\n$new_order = $num_rows;\n$referred_by = 2;\n$new_fb_user_id = 4;\n</code></pre>\n\n<p>I use this insert statement </p>\n\n<pre><code>$New_Member = mysql_query(\"INSERT INTO `rotator`.`rotator` (`id`, `fb_user_id`, `first_name`, `last_name`, `email`, `link_url`, `referred_by`, `signups`, `order`) VALUES (NULL, '$new_fb_user_id', '$new_first_name', '$new_last_name', '$new_email', '$new_link_url', '$referred_by', '$new_signups', '$new_order');\");\n</code></pre>\n\n<p>And because the person was referred by fb_user_id number 2 i want to update signups as follows</p>\n\n<pre><code>$update_sponsor_order = mysql_query(\"UPDATE `rotator`.`signups` = `rotator`.`signups` + 1 WHERE `rotator`.`fb_user_id` = $referred_by;\");\n</code></pre>\n\n<p>This is where i am stuck. Maybe there is a better way to do it than inserting and updating the table as abovee.</p>\n\n<p>What i would like to do now is something like the following select statement but assigning the returned values to a multi dimensional array. Basically i return columns fb_user_id and order where signups is less than 2</p>\n\n<pre><code>$get_link = mysql_query(\"SELECT `rotator`.`fb_user_id`, `rotator`.`order` FROM `rotator`.`rotator` WHERE `rotator`.`signups` &lt; 2);\n</code></pre>\n\n<p>Now with my array i want to rotate everything that is in the column order and update the database of what entry is next in line....</p>\n\n<p>Check the following question and replys to see what i am trying to do</p>\n\n<p><a href=\"http://stackoverflow.com/questions/13117872/php-rotate-and-adding-to-an-array\">Original Question</a></p>\n"},{"tags":["java","mysql","database","jsp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13238839,"title":"Displaying Huge Calculated Statistical Information on a JSP page","body":"<p>I have a page which displays statistical data. More than 200,000+ data are calculated in Database and then result is shown in JSP page. So, I am suffering from Blank page whenever this JSP page is called upon. </p>\n\n<p>Any suggestion what can be done to improve it? I hope some of you have already gone through this problem. How did you solve it? Please share your experience which might help me a lot. </p>\n\n<p>Thank You,</p>\n"},{"tags":["mysql","mysqldump"],"answer_count":4,"favorite_count":1,"up_vote_count":10,"down_vote_count":0,"view_count":7088,"score":10,"question_id":154332,"title":"How can I use mysqldump to replicate views between accounts?","body":"<p>I'm using <strong>mysqldump</strong> to replicate a database between accounts on a particular machine.  Everything works just great, except when we get to our defined views.  Because the dump includes a line like the following ...</p>\n\n<pre><code>/*!50013 DEFINER=`user_a`@`localhost` SQL SECURITY DEFINER */\n</code></pre>\n\n<p>... when loading the dump into mysql on user_b we receive an error: </p>\n\n<pre><code>ERROR 1227 (42000) at line 657: Access denied; you need the SUPER privilege for this operation\n</code></pre>\n\n<p>Needless to say, I don't have SUPER privilege on this mysql instance.  Is there a way to convince <strong>mysqldump</strong> to dump the views in a user-agnostic way?  I can't find anything in the manual on this point.   Do I have to actually parse the dumpfile to replace the usernames?  Or am I missing something?</p>\n"},{"tags":["mysql","join","order"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13238742,"title":"Order of Joins in MySQL","body":"<p>Is Order of Joins important if there are </p>\n\n<ul>\n<li>multiple joins</li>\n<li>3rd join depends on 2nd join (lets assume and is the case in this question)</li>\n</ul>\n\n<p>I am unable to come to conclusion on this. I had multiple queries with the above criteria. Some of them seem to work, some are not producing proper result (not sure if its because of joins), some actually throw error.</p>\n\n<p>Anyone has any specific Idea on this? </p>\n"},{"tags":["java","mysql","database","file","jsp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":32,"score":-3,"question_id":13238448,"title":"JSP/MySQL Copy Database Result to File and then Display those in JSP page","body":"<p>I have a huge data to be displayed on a JSP page. I am having a problem of white page appearing whenever the jsp page is requested. I have thought of a following idea to remedy this problem. </p>\n\n<ol>\n<li>Write all the database result to a file (text,csv) </li>\n<li>Then display the data from that file in JSP page. </li>\n<li>Refresh the file in every 15 minutes so that the file contains updated data. </li>\n</ol>\n\n<p>In this way, jsp page shows the result from file and doesn't contain the heavy loading from database.  </p>\n\n<p>But the problem is I am just being limited to this theory.Please suggest me how to proceed.. some sample code?? </p>\n\n<p>This system is running on Apache Tomcat having MySQL Database. </p>\n\n<p>Thanks,</p>\n"},{"tags":["python","mysql","python-3.x"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13234614,"title":"python 3 euro sign not encoded correctly","body":"<p>I am using a script to retrieve some data from a MySQL database with prices in different currencies.</p>\n\n<p>Every currency symbol works fine, except for the euro sign (<code>€</code>), which returns the little square with the numbers <code>0 0 8 0</code>.</p>\n\n<p>It is the same result of:</p>\n\n<pre><code>print ('\\x80')\n</code></pre>\n\n<p>The collation of the table is <code>utf8_general_ci</code>.</p>\n\n<p>I have no idea of what I am doing wrong, if it's on my script or on the settings of the table</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["php","mysql","sql","table"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13238280,"title":"In SQL, how do I get the awards total for each player","body":"<p>I have two tables, one called Players and one called Awards. End-users give an \"award\" to a player, and players can receive the same award multiple times. </p>\n\n<pre><code> Awards Table\n----+------------------------------------------------------------------------+\n| ID | name                             |  player_id                         |\n+----+-----------------------------------------------------------------------+\n|  1 | Free-throw Excerpt               |  1                                 |\n|  2 | Free-throw Excerpt               |  6                                 |\n|  3 | Top Earner                       |  1                                 |\n|  4 | Top Player                       |  5                                 |\n|  5 | Free-throw Excerpt               |  1                                 |\n|  6 | Free-throw Excerpt               |  1                                 |\n|  7 | Top Earner                       |  1                                 |\n|  8 | Top Player                       |  1                                 |\n       ...\n+----+-----------------------------------------------------------------------\n\n\n `Players Table`\n----+------------------------------------------------------------------------+\n| ID | name                                                                  |\n+----+-----------------------------------------------------------------------+\n|  1 | Player A                                                              |\n|  2 | Player B                                                              |\n|  3 | Player C                                                              |\n|  4 | Player D \n       ...                                                                   |  \n+----+-----------------------------------------------------------------------\n</code></pre>\n\n<p>In my app, each player has a page, and on that page, I want to display all the awards that the player has won. For example, for Player B's page: </p>\n\n<p><strong>Player A Stats:</strong> </p>\n\n<ul>\n<li>Free Throw Excerpt: 3 votes</li>\n<li>Top Earner:         2 Votes</li>\n<li>Top Player:         1 Vote</li>\n</ul>\n\n<p>I can query the the awards table to get all the awards given to Player A, but I'm stuck here and don't know where to go. Do I need to then do a COUNT(*) to get the number of each award received? (1 for Top Player, 3 for Free Throw Excerpt).</p>\n\n<p>Thanks,</p>\n"},{"tags":["mysql","row","limit","inner-join"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13238135,"title":"In MySQL, when I use Limit in a Subquery, it returns nothing?","body":"<p>I'm trying to <code>INNER JOIN</code> a single row from a table. The query returns rows until I add the <code>LIMIT 1</code> line of code and then it returns nothing and it doesn't make any sense to me. Here is my code.</p>\n\n<pre><code>SELECT DISTINCT pd.pid, fv.flow_bmi, fv.flow_date\nFROM patient_data pd\nINNER JOIN ( ... )\nINNER JOIN (\n  SELECT pid, flow_bmi, flow_date\n  FROM flow_vitals\n  ORDER BY flow_date DESC\n) fv ON fv.pid = pd.pid\n\n#Results\n-------------------------------\n pid  | flow_bmi  | flow_date\n-------------------------------\n 6073 | 31.90     | 2011-11-06\n 6073 | 33.10     | 2011-11-05 &lt;-- I don't want this row returned\n 6072 | 32.10     | 2011-08-01\n</code></pre>\n\n<p>And now when I add <code>LIMIT 1</code></p>\n\n<pre><code>SELECT DISTINCT pd.pid, fv.flow_bmi, fv.flow_date\nFROM patient_data pd\nINNER JOIN ( ... )\nINNER JOIN (\n  SELECT pid, flow_bmi, flow_date\n  FROM flow_vitals\n  ORDER BY flow_date DESC\n  LIMIT 1\n) fv ON fv.pid = pd.pid\n\n#Expected Outcome\n-------------------------------\n pid  | flow_bmi  | flow_date\n-------------------------------\n 6073 | 31.90     | 2011-11-06\n 6072 | 32.10     | 2011-08-01\n\n#Actual Outcome\n-------------------------------\n pid  | flow_bmi  | flow_date\n-------------------------------\n No rows returned.\n</code></pre>\n\n<p>I don't know why <code>LIMIT</code> breaks this, and what I really want is an <code>INNER JOIN</code> that returns only one row based on the latest date. It seems like there are a ton of questions on this same topic but they end up using <code>MAX()</code> or <code>LIMIT</code> which both have not worked for me.</p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":13224177,"title":"why is this MySQL query so slow in MySQL 5.1.56?","body":"<p>The following query executes in 0.3 secs in MySQL 5.0.67 and 3.0 secs in MySQL 5.1.56. Why is it ten times slower in the later version?</p>\n\n<p>(Database was exported from 5.0.67 and imported into 5.1.56 so the structure is the same.)</p>\n\n<pre><code>SET @num :=0, @current_shop_id := NULL, @current_product_id := NULL;\n\n#this query limits the results of the query within it by row number (so that only 10 products get displayed per store)\n\nSELECT * FROM (\n\n#this query adds row numbers to the query within it\n\nSELECT *, @num := IF( @current_shop_id = shop_id, IF(@current_product_id=product_id,@num,@num+1), 0) AS row_number, @current_shop_id := shop_id AS shop_dummy, @current_product_id := product_id AS product_dummy FROM (\n\nSELECT shop, shops.shop_id AS\nshop_id, p1.product_id AS product_id\n    FROM products p1\n    INNER JOIN sex ON\n    sex.product_id=p1.product_id AND\n    sex.sex=0 AND\n    sex.date &gt;= (SUBDATE(NOW(),INTERVAL 7 DAY)) INNER JOIN\n    shops ON\n    shops.shop_id = p1.shop_id \n\n    ORDER BY shop\n) AS testtable\n\n) AS rowed_results WHERE\nrowed_results.row_number&gt;=0 AND\nrowed_results.row_number&lt;(0+10)\n</code></pre>\n\n<p>EXPLAIN plan for this query in 5.0.67</p>\n\n<pre><code>id  select_type table   type    possible_keys   key key_len ref rows    Extra\n1   PRIMARY &lt;derived2&gt;  ALL NULL    NULL    NULL    NULL    5433    Using where\n2   DERIVED &lt;derived3&gt;  ALL NULL    NULL    NULL    NULL    5433     \n3   DERIVED sex ALL product_id_2,product_id NULL    NULL    NULL    379571  Using where; Using temporary; Using filesort\n3   DERIVED p1  ref PRIMARY,shop_id,shop_id_2,product_id,shop_id_3  product_id  4   mydatabase.sex.product_id   1    \n3   DERIVED shops   eq_ref  PRIMARY PRIMARY 4   mydatabase.p1.shop_id   1    \n</code></pre>\n\n<p>EXPLAIN plan for this query in 5.1.56</p>\n\n<pre><code>1   PRIMARY &lt;derived2&gt;  ALL NULL    NULL    NULL    NULL    491 Using where\n2   DERIVED &lt;derived3&gt;  ALL NULL    NULL    NULL    NULL    491 \n3   DERIVED shops   ALL PRIMARY NULL    NULL    NULL    163 Using filesort\n3   DERIVED p1  ref PRIMARY,shop_id,shop_id_2,product_id,shop_id_3  shop_id_2   4   mydatabase.shops.shop_id    41  \n3   DERIVED sex eq_ref  product_id_2,product_id product_id_2    5   mydatabase.p1.product_id    1   Using where\n</code></pre>\n\n<p>INDEXES</p>\n\n<p>products table for 5.0.67</p>\n\n<pre><code>Keyname Type    Cardinality Action  Field\nPRIMARY  PRIMARY     502437              product_id\nshop_id  UNIQUE  502437              shop_id\nlink\ntitle_2  UNIQUE  502437              title\nimage\nbrand    INDEX   38649           brand\ntitle    INDEX   251218              title\ndate     INDEX   125609              date\nshop_id_2    INDEX   87              shop_id\nproduct_id   INDEX   502437              product_id\ndate\nshop_id_3    INDEX   125609              shop_id\ndate\nsale_date    INDEX   187             sale_date\n</code></pre>\n\n<p>products table for 5.1.61</p>\n\n<pre><code>Action  Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment\n Edit    Drop   PRIMARY BTREE   Yes No  product_id  493078  A       \n Edit    Drop   shop_id BTREE   Yes No  shop_id 0   A       \nlink    493078  A   \n Edit    Drop   title_2 BTREE   Yes No  title   0   A       \nimage   493078  A   \n Edit    Drop   brand   BTREE   No  No  brand   123269  A   YES \n Edit    Drop   title   BTREE   No  No  title   493078  A       \n Edit    Drop   date    BTREE   No  No  date    41089   A       \n Edit    Drop   shop_id_2   BTREE   No  No  shop_id 12026   A       \n Edit    Drop   product_id  BTREE   No  No  product_id  493078  A       \ndate    493078  A   \n Edit    Drop   shop_id_3   BTREE   No  No  shop_id 12026   A       \ndate    49307   A   \n Edit    Drop   sale_date   BTREE   No  No  sale_date   5940    A\n</code></pre>\n\n<p>shops table for 5.0.67</p>\n\n<pre><code> Keyname    Type    Cardinality Action  Field\nPRIMARY  PRIMARY     163             shop_id\n</code></pre>\n\n<p>shops table for 5.161</p>\n\n<pre><code>Action  Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment\n Edit    Drop   PRIMARY BTREE   Yes No  shop_id 163 A\n</code></pre>\n\n<p>sex table for 5.0.67</p>\n\n<pre><code>Keyname Type    Cardinality Action  Field\nproduct_id_2     UNIQUE  506094              product_id\nsex\nproduct_id   INDEX   506094              product_id\n</code></pre>\n\n<p>sex table for 5.1.61 </p>\n\n<pre><code>Action  Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment\n Edit    Drop   product_id_2    BTREE   Yes No  product_id  0   A       \nsex 496732  A   \n Edit    Drop   product_id  BTREE   No  No  product_id  496732  A\n</code></pre>\n\n<p>my.cnf file for MySQL 5.1.61</p>\n\n<pre><code>[mysqladmin]\nuser=username\n\n[mysqld]\nbasedir=/opt/bitnami/mysql\ndatadir=/opt/bitnami/mysql/data\nport=3306\nsocket=/opt/bitnami/mysql/tmp/mysql.sock\ntmpdir=/opt/bitnami/mysql/tmp\n\ncharacter-set-server=UTF8\ncollation-server=utf8_general_ci\n\nmax_allowed_packet=16M\nwait_timeout = 120\nlong_query_time = 1\nlog_slow_queries\nlog_queries_not_using_indexes\nquery_cache_limit=2M\nquery_cache_type=1\nquery_cache_size=8M\ninnodb_additional_mem_pool_size=8M\ninnodb_buffer_pool_size=16M\n#innodb_log_file_size=128M\n#tmp_table_size=64M\n#max_connections = 2500\n#max_user_connections = 2500\n#innodb_flush_method=O_DIRECT\n#key_buffer_size=64M\n\n[mysqld_safe]\nmysqld=mysqld.bin\n\n[client]\ndefault-character-set=UTF8\nport=3306\nsocket=/opt/bitnami/mysql/tmp/mysql.sock\n\n[manager]\nport=3306\nsocket=/opt/bitnami/mysql/tmp/mysql.sock\npid-file=/opt/bitnami/mysql/tmp/manager.pid\ndefault-mysqld-path=/opt/bitnami/mysql/bin/mysqld.bin\n</code></pre>\n\n<p>I noticed if I remove the outer queries for adding the row numbers, the time difference drops to 0.3 secs versus 0.7 secs.</p>\n\n<pre><code>SELECT shop, shops.shop_id AS\nshop_id, p1.product_id AS product_id\n    FROM products p1\n    INNER JOIN sex ON\n    sex.product_id=p1.product_id AND\n    sex.sex=0 AND\n    sex.date &gt;= (SUBDATE(NOW(),INTERVAL 7 DAY)) INNER JOIN\n    shops ON\n    shops.shop_id = p1.shop_id \n\n    ORDER BY shop\n</code></pre>\n"},{"tags":["mysql","sql","query"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13237570,"title":"MySQL query consuming an inordinate amount of processor time of the system's CPU","body":"<p>I have the following MySQL query which seems to be consuming an inordinate amount of processor time of the system's CPU.</p>\n\n<p>The query is suppose to get the news that has the highest number of comments in last week:</p>\n\n<pre><code>$timeago = strtotime(\"-1 week\");\n\n$query = \"SELECT * , \n    news.id, \n    news.title, \n    news.state, \n    news.date, \n    COUNT(comments.module_id) as comments_count, \n    comments.module, \n    comments.state \n    FROM news \n    LEFT OUTER JOIN comments on comments.module_id = news.id AND comments.module = 'news' AND comments.state = '1' \n    WHERE news.state = '2' \n    GROUP BY news.id, news.title, news.date \n    ORDER BY news.date &gt;= $timeago DESC, comments_count DESC limit 6\";\n\n$result = mysql_query($query) or die (mysql_error());\n$data = mysql_fetch_assoc($result);\n</code></pre>\n\n<p>The query servers me just right, it sorts out the news which has the highest number of comments in the last week. There is 17,290 record in news table. For this reason I am try to figure out to fix the query in a way that would be healthy for the CPU consumption.</p>\n\n<p>Any suggestions would be welcome.</p>\n\n<p>Explain plan says</p>\n\n<p>| id    | select_type   | table     | type  | possible_keys     | key   | key_len   | ref   | rows  | Extra</p>\n\n<p>| 1     | SIMPLE    | news  | ref   | state     | state     | 4     | const     | 17282     | Using where; Using temporary; Using filesort</p>\n\n<p>| 1     | SIMPLE    | comments  | ref   | module_id     | module_id     | 101   | saidasea_v2.news.id,const,const   | 4     </p>\n"},{"tags":["php","mysql","xampp","mamp","lamp"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13237935,"title":"Mysql_fetch_array is showing a warning for values of 0 or 1","body":"<p>My SQL query counts the number of rows that meet a criteria. Sometimes this value is 0 or 1.  This will create an error about returning a boolean. </p>\n\n<p>How can this be avoided? Should I not use \"mysql_fetch_array\"?</p>\n\n<pre><code>// Query the db to count the # of comments.\n$price_change_dbo = \n    mysql_query(\"\n        SELECT COUNT(1) AS comment_count \n        FROM comments \n        WHERE user_id = '{$user_id}';\"\n    );\n\n// Use the result. \n$price_change_row = mysql_fetch_array($price_change_dbo);\n</code></pre>\n\n<p>Here is the warning:</p>\n\n<pre><code>Warning: mysql_fetch_array() expects parameter 1 to be resource, \n         boolean given in /Applications/MAMP/... on line 1.\n</code></pre>\n"},{"tags":["php","mysql","csv","upload","import"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":30,"score":-3,"question_id":13237946,"title":"PHP Importing into mysql issue","body":"<p>I have the following PHP code, It just simply imports a CSV file contents directly to Mysql table.</p>\n\n<pre><code>$s = $_POST['supp'];\n$p = $_POST['shipment'];\n\n?&gt;\n\n&lt;form enctype=\"multipart/form-data\" action=\"&lt;?php echo $_SERVER['PHP_SELF']; ?&gt;\" method=\"post\"&gt;\n\n&lt;font style=\"font-size:18px;\"&gt;Import Excel File to New Items Table:&lt;/font&gt;&lt;br /&gt;\n\n&lt;input size='30' type='file' name='filename'&gt;\n\n&lt;input type=\"submit\" name=\"submit\" value=\"Upload File\"&gt;&lt;/form&gt;\n\n\n\n//Upload File \n    if (isset($_POST['submit'])) { \n    if (is_uploaded_file($_FILES['filename']['tmp_name'])) { \n\n    //Import uploaded file to Database \n    $row = 1; \n    $handle = fopen($_FILES['filename']['tmp_name'], \"r\"); \n\n    while (($data = fgetcsv($handle, 1000, \",\")) !== FALSE) { \nif($row == 1){ $row++; continue; }\n//Update Database Values \n\n    $import=\"INSERT into new_items (item_no,cost,sell,qty,cat,sub_cat,supplier,shipment_no,date)\n VALUES('\".mysql_real_escape_string($data[0]).\"', '\".mysql_real_escape_string($data\n[1]).\"', '\".mysql_real_escape_string($data[2]).\"', '\".mysql_real_escape_string($data\n[3]).\"', '\".mysql_real_escape_string($data[4]).\"', '\".mysql_real_escape_string($data\n[5]).\"', '\".$s.\"','\".$p.\"', '\".$date = date('Y-m-d').\"')\"; \n\n\nmysql_query($import) or die(mysql_error()); \n\n\n//Close for While  \n    } \n\n    fclose($handle); \n     }}\n</code></pre>\n\n<p>The problem is mainly about the values taken from <code>$_POST</code>, which are the <code>$s</code> and <code>$p</code>. I get the following error :</p>\n\n<p>Notice : Undefined index: supp C:\\wamp\\www\\store\\import.php on line ...</p>\n\n<p>Notice : Undefined index: shipment C:\\wamp\\www\\store\\import.php on line ...</p>\n\n<p>Why its not accepting the <code>$_POST</code> values ? However if you do an <code>echo $s</code> or <code>$p</code>, it outputs the values correctly...But inserting them into mysql is not really working :( !\nPlease Help, Thank You</p>\n"},{"tags":["php","mysql","pdo","php-5.3","laravel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13237655,"title":"SQLSTATE[HY000]: General error: 2053","body":"<p>I am getting this error randomly in my PHP project. I am using Laravel framework. I googled around a bit and found that is an issue occurring due to PDO. I tried to log the query I am trying to run just before the error occurs and when I copy and run the same query through MySQL, it runs absolutely fine. Following is the code snippet:</p>\n\n<pre><code>foreach($batches as $batch){\n        $query_post = \"INSERT INTO posts (`fb_post_id`, `page_id`, `from_user_id`,`to_user_id`, \".\n                        \"`object_id`, `from`,`to`, `message`, `picture`,`link`, `icon`, `type`,`name`, \".\n                        \"`status_type`, `privacy`,`caption`, `description`,`story`, `actions`, `created_time`, \".\n                        \"`comment_count`,`like_count`, `created_at`) VALUES \";\n        $query = '';\n        foreach($batch as $row){\n            $comma_separated = implode(\"','\", $row);\n            $query .= \"('\".$comma_separated.\"'),\";\n        }\n        $query_post .= $query;\n        $query_post= substr($query_post, 0, -1);\n        $query_post= utf8_encode($query_post);\n        Log::write('info', ' POST QUERY : '.$query_post);\n        DB::query($query_post);\n    }\n</code></pre>\n\n<p>After a few runs in the loop, I get the error:\nSQLSTATE[HY000]: General error: 2053 in laravel/database/connection.php line 293.\nIt would be a great help if someone could give me a sound solution for it. </p>\n\n<p>P.S.: A few runs means a random number and it does not occur at some specific point. My PHP version is 5.3.10 and I have got the same error on 5.4.4 as well.</p>\n"},{"tags":["python","mysql","ubuntu","python-3.x","pymysql"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":71,"score":0,"question_id":13237535,"title":"TypeError: unsupported operand type(s) for %: 'bytes' and 'tuple'","body":"<pre><code>TypeError: unsupported operand type(s) for %: 'bytes' and 'tuple'\n</code></pre>\n\n<p>The setup is as follows:\n<code>Eloipool</code> is a bitcoinmining pool software <a href=\"http://gitorious.org/bitcoin/eloipool\" rel=\"nofollow\">http://gitorious.org/bitcoin/eloipool</a>\nPyMySQL is required for the MySQL database connection <a href=\"https://github.com/petehunt/PyMySQL\" rel=\"nofollow\">https://github.com/petehunt/PyMySQL</a> .</p>\n\n<p>The system is ubuntu 12.04.</p>\n\n<pre><code>root@j064:/opt/PyMySQL# locate Python.h\n/usr/include/python2.7/Python.h\n/usr/include/python3.2mu/Python.h\n/usr/include/wx-2.8/wx/wxPython/wxPython.h\nroot@j064:/opt/PyMySQL#\n</code></pre>\n\n<p><code>Eloipool</code> (Python3 and up) is located in <code>/opt/eloipool/</code>\nPyMySQL is located in <code>/opt/PyMySQL/pymysql/</code>\nPyMySQL comes with a Python3 compilant patch located in <code>/opt/PyMySQL/py3k/pymysql/</code></p>\n\n<p>I tried symlinks to both versions in the eloipool folder, the default version will ask for all subfolders and files from <code>/opt/PyMySQL/pymysql/</code>, I could not even try as pymysql and <code>eloipool</code> have a file called util.py.</p>\n\n<p>When I symlink the <code>/opt/PyMySQL/py3k/pymysql/</code> version I get the following error when running eloipool:</p>\n\n<pre><code>root@j064:/opt/eloipool# ./eloipool.py\n\n&gt;&gt;&gt; 2012-11-05 17:27:28,138     merkleMaker     INFO    New block: 000000000000026ea479ce7585db76c170190fce7bc46c0406767523d1846e96 (height: 206615; bits: 1a0513c5)\n2012-11-05 17:27:28,246 restoreState    INFO    Restoring saved state from 'eloipool.worklog' (196 bytes)\n2012-11-05 17:27:28,248 restoreState    INFO    State restored successfully\n2012-11-05 17:27:28,248 restoreState    INFO    Total downtime: 96.0659 seconds\n2012-11-05 17:27:28,295 JSONRPCServer   INFO    Waiting 13.1 seconds to longpoll\n2012-11-05 17:27:29,214 JSONRPCServer   INFO    Ignoring longpoll attempt while another is waiting\n2012-11-05 17:27:41,431 JSONRPCServer   INFO    Longpoll woke up 1 clients in 0.000 seconds\n2012-11-05 17:28:28,353 WorkLogPruner   DEBUG   Pruned 0 jobs\n2012-11-05 17:29:28,389 WorkLogPruner   DEBUG   Pruned 0 jobs\n2012-11-05 17:29:33,805 JSONRPCHandler  ERROR   Error during JSON-RPC call: doJSON_getwork['00000002d1846e96067675237bc46c0470190fce85db76c1a479ce750000026e000000002b3b2cd67c438323e27e2d23671e4cf07e28c0c96756f5e0edef21d4d6c502795097f74d1a0513c5eef5f556000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000']\nTraceback (most recent call last):\n  File \"/opt/eloipool/jsonrpcserver.py\", line 196, in _doJSON_i\n    rv = getattr(self, method)(*params)\n  File \"/opt/eloipool/jsonrpc_getwork.py\", line 44, in doJSON_getwork\n    return self.doJSON_submitwork(data)\n  File \"/opt/eloipool/jsonrpc_getwork.py\", line 79, in doJSON_submitwork\n    self.server.receiveShare(share)\n  File \"./eloipool.py\", line 457, in receiveShare\n    i(share)\n  File \"/opt/eloipool/sharelogging/sql.py\", line 65, in logShare\n    dbc.execute(stmt, params)\n  File \"/opt/eloipool/pymysql/cursors.py\", line 108, in execute\n    query = query % escaped_args\nTypeError: unsupported operand type(s) for %: 'bytes' and 'tuple'\n\n\n&gt;&gt;&gt; exit()\n2012-11-05 17:29:38,577 stopServers     INFO    Stopping servers...\n2012-11-05 17:29:38,577 Waker for BitcoinNode   DEBUG   Read wakeup\n2012-11-05 17:29:38,587 saveState       INFO    Saving work state to 'eloipool.worklog'...\n2012-11-05 17:29:38,603 exit    INFO    Goodbye...\nTerminated\nroot@j064:/opt/eloipool#\n</code></pre>\n\n<p>The MYSQL schema:</p>\n\n<pre><code>-- phpMyAdmin SQL Dump\n-- version 3.4.10.2\n-- http://www.phpmyadmin.net\n--\n-- Host: localhost:3306\n-- Erstellungszeit: 05. Nov 2012 um 17:55\n-- Server Version: 5.5.24\n-- PHP-Version: 5.3.10\n\nSET SQL_MODE=\"NO_AUTO_VALUE_ON_ZERO\";\nSET time_zone = \"+00:00\";\n\n\n/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;\n/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;\n/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;\n/*!40101 SET NAMES utf8 */;\n\n--\n-- Datenbank: `simplec`\n--\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `accountBalance`\n--\n\nCREATE TABLE IF NOT EXISTS `accountBalance` (\n  `id` int(255) NOT NULL AUTO_INCREMENT,\n  `userId` int(255) NOT NULL,\n  `balance` varchar(40) DEFAULT NULL,\n  `sendAddress` varchar(255) DEFAULT '',\n  `paid` varchar(40) DEFAULT '0',\n  `threshold` tinyint(4) DEFAULT '0',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `userId` (`userId`),\n  KEY `b_userId` (`userId`)\n) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=706 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `locks`\n--\n\nCREATE TABLE IF NOT EXISTS `locks` (\n  `name` varchar(11) NOT NULL,\n  `locked` tinyint(4) NOT NULL,\n  PRIMARY KEY (`name`)\n) ENGINE=MyISAM DEFAULT CHARSET=utf8;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `networkBlocks`\n--\n\nCREATE TABLE IF NOT EXISTS `networkBlocks` (\n  `id` int(255) NOT NULL AUTO_INCREMENT,\n  `blockNumber` int(255) NOT NULL,\n  `timestamp` int(255) NOT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5876 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `news`\n--\n\nCREATE TABLE IF NOT EXISTS `news` (\n  `id` int(10) NOT NULL AUTO_INCREMENT,\n  `message` varchar(255) NOT NULL,\n  `timestap` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `title` varchar(255) CHARACTER SET latin1 COLLATE latin1_bin NOT NULL DEFAULT ' ',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `pool_worker`\n--\n\nCREATE TABLE IF NOT EXISTS `pool_worker` (\n  `id` int(255) NOT NULL AUTO_INCREMENT,\n  `associatedUserId` int(255) NOT NULL,\n  `username` char(50) DEFAULT NULL,\n  `password` char(255) DEFAULT NULL,\n  `allowed_hosts` text,\n  PRIMARY KEY (`id`),\n  KEY `p_username` (`username`),\n  KEY `pool_worker_associatedUserId` (`associatedUserId`),\n  KEY `pool_worker_username` (`username`)\n) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1398 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `settings`\n--\n\nCREATE TABLE IF NOT EXISTS `settings` (\n  `setting` varchar(255) NOT NULL,\n  `value` varchar(255) DEFAULT NULL,\n  PRIMARY KEY (`setting`),\n  KEY `set_setting` (`setting`)\n) ENGINE=MyISAM DEFAULT CHARSET=latin1;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `shares`\n--\n\nCREATE TABLE IF NOT EXISTS `shares` (\n  `id` bigint(30) NOT NULL AUTO_INCREMENT,\n  `rem_host` varchar(255) NOT NULL,\n  `username` varchar(120) NOT NULL,\n  `our_result` enum('Y','N') NOT NULL,\n  `upstream_result` enum('Y','N') DEFAULT NULL,\n  `reason` varchar(50) DEFAULT NULL,\n  `solution` varchar(257) NOT NULL,\n  `time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  KEY `shares_username` (`username`),\n  KEY `shares_time` (`time`),\n  KEY `shares_our_result` (`our_result`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `shares_counted`\n--\n\nCREATE TABLE IF NOT EXISTS `shares_counted` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `blockNumber` int(11) NOT NULL,\n  `userId` int(11) NOT NULL,\n  `count` int(11) NOT NULL,\n  `invalid` int(11) NOT NULL DEFAULT '0',\n  PRIMARY KEY (`id`)\n) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=614 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `unconfirmed_rewards`\n--\n\nCREATE TABLE IF NOT EXISTS `unconfirmed_rewards` (\n  `id` int(255) NOT NULL AUTO_INCREMENT,\n  `userId` int(255) NOT NULL,\n  `blockNumber` int(255) NOT NULL,\n  `amount` varchar(40) NOT NULL,\n  `rewarded` enum('N','Y') NOT NULL DEFAULT 'N',\n  `shares` int(255) NOT NULL DEFAULT '0',\n  PRIMARY KEY (`id`),\n  KEY `unconfirmed_rewards_blockNumber` (`blockNumber`),\n  KEY `unconfirmed_rewards_rewarded` (`rewarded`),\n  KEY `unconfirmed_rewards_userId` (`userId`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `userHashrates`\n--\n\nCREATE TABLE IF NOT EXISTS `userHashrates` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `userId` int(255) NOT NULL,\n  `hashrate` int(11) NOT NULL DEFAULT '0',\n  PRIMARY KEY (`id`),\n  KEY `timestamp` (`timestamp`),\n  KEY `userHashrates_id1` (`userId`),\n  KEY `userId_timestamp` (`userId`,`timestamp`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `webUsers`\n--\n\nCREATE TABLE IF NOT EXISTS `webUsers` (\n  `id` int(255) NOT NULL AUTO_INCREMENT,\n  `admin` int(1) NOT NULL,\n  `username` varchar(40) NOT NULL,\n  `pass` varchar(255) NOT NULL,\n  `email` varchar(255) NOT NULL COMMENT 'Assocaited email: used for validating users, and re-setting passwords',\n  `emailAuthPin` varchar(10) NOT NULL COMMENT 'The pin required to authorize that email address',\n  `secret` varchar(10) NOT NULL,\n  `loggedIp` varchar(255) NOT NULL,\n  `sessionTimeoutStamp` int(255) NOT NULL,\n  `accountLocked` int(255) NOT NULL COMMENT 'This is the timestamp when the account will be unlocked(usually used to lock accounts that are trying to be bruteforced)',\n  `accountFailedAttempts` int(2) NOT NULL COMMENT 'This counts the number of failed attempts for web login',\n  `pin` varchar(255) NOT NULL COMMENT 'four digit pin to allow account changes',\n  `share_count` int(11) NOT NULL DEFAULT '0',\n  `stale_share_count` int(11) NOT NULL DEFAULT '0',\n  `shares_this_round` int(11) NOT NULL DEFAULT '0',\n  `api_key` varchar(255) CHARACTER SET latin1 COLLATE latin1_bin DEFAULT NULL,\n  `activeEmail` int(1) DEFAULT NULL,\n  `donate_percent` varchar(11) DEFAULT '1',\n  `btc_lock` enum('0','1') NOT NULL DEFAULT '0',\n  PRIMARY KEY (`id`),\n  KEY `u_username` (`username`)\n) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=710 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `winning_shares`\n--\n\nCREATE TABLE IF NOT EXISTS `winning_shares` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `blockNumber` int(11) NOT NULL,\n  `username` varchar(11) NOT NULL,\n  `share_id` int(255) NOT NULL DEFAULT '0',\n  `rewarded` enum('N','Y') NOT NULL DEFAULT 'N',\n  `amount` varchar(40) NOT NULL DEFAULT '0',\n  `confirms` smallint(6) NOT NULL DEFAULT '0',\n  `txid` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,\n  `scored` enum('N','Y') NOT NULL DEFAULT 'N',\n  PRIMARY KEY (`id`),\n  KEY `winning_shares_scored` (`scored`)\n) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=14 ;\n\n/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;\n/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;\n/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;\n</code></pre>\n\n<p>My conclusion is I either installed PyMySQL the wrong way, I useed the wrong python version or its broken as a buddy claimed.</p>\n\n<p>However, this really is not a flake post, I urgently need to get this to work with my limited knowledge of the linux os, thanks for all constructive responses in advance.</p>\n"},{"tags":["php","mysql","dateformat"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":2,"view_count":40,"score":1,"question_id":13237909,"title":"Display days ago instead of date","body":"<p>I have a comment area on my website and each comment displays when it was posted in the normal date format (05/Nov/2012)... But I would like to display '1 day ago' of even '3 hours ago' instead of the normal format... Here's what I have so far:</p>\n\n<pre><code>SELECT p.poll_id, p.title, date_format(c.posted, '%D %b %y') as time, COUNT( c.poll_id ) AS count, u.username\nFROM users AS u\nJOIN polls AS p ON u.user_id = p.user_id\nLEFT JOIN comment AS c ON p.poll_id = c.poll_id\nLIMIT 5 \n</code></pre>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":76,"score":2,"question_id":13232097,"title":"how i can get 0 for no records using mysql?","body":"<p>I am new to mySql.  I have to calculate the count of clicks from table as per the week days.</p>\n\n<p>Here period depends upon database. But what happens is if last week does not have records, it was not in the list. But I need it as 0. So for that how I can do?</p>\n\n<pre><code>SELECT CASE \n    WHEN PERIOD &gt;= NOW() - INTERVAL 4 WEEK\n                AND PERIOD &lt; NOW() - INTERVAL 3 WEEK THEN '22-28 days ago'\n\n    WHEN PERIOD &gt;= NOW() - INTERVAL 3 WEEK\n                AND PERIOD &lt; NOW() - INTERVAL 2 WEEK THEN '15-21 days ago'\n\n    WHEN PERIOD &gt;= NOW() - INTERVAL 2 WEEK\n        AND PERIOD &lt; NOW() - INTERVAL 1 WEEK THEN '8-14 days ago'\n\n    WHEN PERIOD &gt;= NOW() - INTERVAL 1 WEEK\n                THEN 'up to 7 days ago'\n           END WeekPeriod, IFNULL(count(CLICKS),0) TotalClicks\n\nFROM TABLE\n\nWHERE PERIOD &gt;= NOW() - INTERVAL 4 WEEK\n\nGROUP BY CASE \n    WHEN PERIOD &gt;= NOW() - INTERVAL 4 WEEK\n                    AND PERIOD &lt; NOW() - INTERVAL 3 WEEK THEN '22-28 days ago'\n\n    WHEN PERIOD &gt;= NOW() - INTERVAL 3 WEEK\n                AND PERIOD &lt; NOW() - INTERVAL 2 WEEK THEN '15-21 days ago'\n\n    WHEN PERIOD &gt;= NOW() - INTERVAL 2 WEEK\n                AND PERIOD &lt; NOW() - INTERVAL 1 WEEK THEN '08-14 days ago'\n\n    WHEN PERIOD &gt;= NOW() - INTERVAL 1 WEEK\n                THEN '01 to 7 days ago'\n\nEND\n ORDER BY WeekPeriod\";\n</code></pre>\n\n<p>answer should be like this </p>\n\n<pre><code>1-7 0 \n8-15 14 \n16-21 34 \n21-28 45\n</code></pre>\n"},{"tags":["mysql","linux","pdo","amazon-ec2","pecl"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13237856,"title":"Does Amazon ec2 yum command install Mysql PDO via PECL?","body":"<p>I am having problems with my Auth component in an Amazon ec2 linux instance. Apparently the mysql pdo needs to be installed via easy apache rather than PECL. The command I used to instal the mysql pdo was:</p>\n\n<p>sudo yum install -y php-devel php-mysql php-pdo</p>\n\n<p>Is this command installing via PECL? How can I install the mysql pdo via easyapache instead?</p>\n"},{"tags":["mysql","load-balancing","cloudfoundry"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13219337,"title":"CloudFoundry vcap loadbalance in mysql","body":"<p>is there anyone knows that how mysql in cloud foundry (vcap.me, not cloudfoundry.com) can do load balance or not?</p>\n\n<p>I mean, does cloud foundry can take this automatically? or we need to do something to dispatch our data manually?</p>\n\n<p>thanks a lot if you could give me some advice</p>\n"},{"tags":["mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13237509,"title":"New user with just USAGE previleges was able to drop a table (MySQL)","body":"<p>I logged into MySQL from root user.</p>\n\n<p>Ran the command:-</p>\n\n<pre><code>create user new;\n</code></pre>\n\n<p>Then I logged in as user new. Ran the following commands:-</p>\n\n<pre><code>use test;\nshow grants;\n</code></pre>\n\n<p>The Output was:-</p>\n\n<pre><code>GRANT USAGE ON *.* TO ''@'LOCALHOST'\n</code></pre>\n\n<p>As I understand, the new user does not have the drop table permissions or any permissions for that matter (except USAGE) on this table.</p>\n\n<p>However when I run the following:-</p>\n\n<pre><code>DROP TABLE test_table;\n</code></pre>\n\n<p>The query is successful. Could you please explain why is this happening? How do I disable this user from dropping tables and revoke other permissions from this user.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13237659,"title":"is there a mechanism similar to operator overload in mysql?","body":"<p>suppose I have a table which has a column days('mon','tue','wed','thu','fri'), how do I implement a days-of-week order (rather than lexicographical order) to them?</p>\n\n<p>eg.</p>\n\n<pre><code>'mon'&lt;'tue' //produce true\n\n'fri'&gt;'wed' //true\n\n'fri'&lt;'thu' //false\n</code></pre>\n\n<p>Thanks in advance!</p>\n"},{"tags":["java","mysql","hibernate","jpa"],"answer_count":4,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":3946,"score":3,"question_id":1376543,"title":"Table not created by Hibernate","body":"<p>I annotated a bunch of POJO's so JPA can use them to create tables in Hibernate.  It appears that all of the tables are created except one very central table called \"Revision\".  The Revision class has an <code>@Entity(name=\"RevisionT\")</code> annotation so it will be renamed to RevisionT so there is not a conflict with any reserved words in MySQL (the target database).</p>\n\n<p>I delete the entire database, recreate it and basically open and close a JPA session.  All the tables seem to get recreated without a problem.</p>\n\n<p>Why would a single table be missing from the created schema?  What instrumentation can be used to see what Hibernate is producing and which errors?</p>\n\n<p>Thanks.</p>\n\n<p>UPDATE:  I tried to create as a Derby DB and it was successful.  However, one of the fields has a a name of \"index\".  I use <code>@org.hibernate.annotations.IndexColumn</code> to specify the name to something other than a reserved word.  However, the column is always called \"index\" when it is created.</p>\n\n<p>Here's a sample of the suspect annotations.</p>\n\n<pre><code>\n    @ManyToOne\n    @JoinColumn(name=\"MasterTopID\")\n    @IndexColumn(name=\"Cx3tHApe\")\n    protected MasterTop masterTop;\n</code></pre>\n\n<p>Instead of creating <code>MasterTop.Cx3tHApe</code> as a field, it creates <code>MasterTop.Index</code>.  Why is the name ignored?</p>\n"},{"tags":["php","mysql","sql","api","rate-limiting"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13237287,"title":"How to manage request limited API calls","body":"<p>I am using tmdb API that has a new limit on requests which is 30 requests in 10 seconds per IP. I could track these calls by having a table in MySQL that holds the amount of requests per the last 10 seconds but how can I accomplish this with the different IP addresses?</p>\n\n<p>The way my app works is:</p>\n\n<ol>\n<li><p>request is made to the application server from a desktop app. Server side php then makes a search and returns data.</p></li>\n<li><p>desktop app then makes a different call to app server and that in turns makes several api calls to tmdb (4-7) and other api's.</p></li>\n</ol>\n\n<p>There can be anywhere from a few search requests to a few thousands in some cases. What's the best way to keep track and delay api calls to keep it below the limit?</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13237487,"title":"Add rows in mysql result when specific value does not exist","body":"<p>I am trying to modify MySQL output results. </p>\n\n<pre><code>Select number_purchases, COUNT(number_purchases) as user_count\nFROM user_order\nGROUP BY number_purchases\nORDER BY number_purchases ASC\n</code></pre>\n\n<p>so I get the number of purchases in the first column and the number of users that made that number of purchases in the second column. </p>\n\n<p>I would like to modify the result a bit. I need a function around those lines:</p>\n\n<blockquote>\n  <p>If npb = 1, 2, 3... to 10 does not exist, add line with the missing\n  npb and a corresponding user_count = 0</p>\n</blockquote>\n"},{"tags":["mysql","json","format"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13237525,"title":"MySQL reformat mysql result to meet json hansontable","body":"<p>According to my previous solved issue : <a href=\"http://stackoverflow.com/questions/13221142/re-arrange-mysql-result-in-an-expected-format-for-hansontable/13221932\">Re-arrange mysql result in an expected format for hansontable</a>. I'm going to re-format mysql result from </p>\n\n<blockquote>\n  <p>[\"Superior\"],[\"Deluxe - City View\"],[\"Deluxe - Balcony\"],[\"Junior\n  Suite\"],[\"Andaman Studio\"]</p>\n</blockquote>\n\n<p>into</p>\n\n<pre><code>[\"Superior\",\"Deluxe - City View\",\"Deluxe - Balcony\",\"Junior Suite\",\"Andaman Studio\"]\n</code></pre>\n\n<p>From these codes:</p>\n\n<pre><code>$sql_rName=\"select title from room_db where hotel='1' order by id asc\";\n$result_rName=mysql_db_query($dbname,$sql_rName);\nwhile($rec_rName=mysql_fetch_array($result_rName)){\n    $_rName=$rec_rName['title'];\n    $_array[]=$_rName;\n}\necho \"{\\\"data\\\": \".json_encode($_array).\"}\";\n</code></pre>\n\n<p>mysql Table : room_db\n<img src=\"http://i.stack.imgur.com/Ru1kW.png\" alt=\"room_db\"></p>\n\n<p>Please suggest.</p>\n\n<p>ps. Thanks to Olaf Dietsche for all of these help.</p>\n"},{"tags":["mysql","stored-procedures"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13237473,"title":"Procedure: Count number of backward days until specified number of visits reached","body":"<p>I have some MySQL tables structured as follows:</p>\n\n<ul>\n<li>Web visits table (several million rows), with a referrer ID on each record as well as timestamp</li>\n<li>Referrer table which the web visits can join to </li>\n<li>Additional hierarchical referrer dimension tables for classifications</li>\n</ul>\n\n<p>I am aiming to select all referrer IDs within specified groups (i.e. will join to the hierarchical dimension table) and for each individual referrer ID calculate the number of calendar days back from the present day until 250 visits are reached. We run ETL nightly, so it would always be a count through midnight of the previous day.  </p>\n\n<p>I am looking for an efficient way to query this.  Does anyone have any ideas?  I am an intermediate SQL user and suspect that this might involve a stored proc of some sort, but I am not sure where to start.  </p>\n\n<p>Thanks in advance for your help; please let me know if I am not being clear.</p>\n\n<p>Thanks,\nJeff</p>\n"},{"tags":["mysql","sql","mysql-workbench"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":3,"view_count":47,"score":-1,"question_id":13236745,"title":"Count query with 3 columns in SQL","body":"<p>I have one database named \"Library\" with table named \"Medien\".\nHaving multiple columns among them i need to query for the following coloumn named as Fname,Mname,Lname and ISBN.</p>\n\n<p><strong>I want to calculate database total records with ISBN and without ISBN?</strong></p>\n\n<ul>\n<li>Fname = First Name of Author</li>\n<li>Mname = Middle Name of Author</li>\n<li>Lname = Last Name of Author</li>\n</ul>\n\n<p>I want to count how many record are for ISBN and how many without ISBN ?</p>\n\n<p>I have execute following command</p>\n\n<pre><code> Select COUNT(ISBN) as Fname FROM  `library`.`MEDIEN` where  Fname = `isbn`;\n Select COUNT(ISBN) as Mname FROM  `library`.`MEDIEN` where  Mname = `isbn`;\n Select COUNT(ISBN) as Lname FROM  `library`.`MEDIEN` where  Lname = `isbn`;\n Select COUNT(ISBN) as NtFname FROM `library`.`MEDIEN`where  Fname != `isbn`;\n Select COUNT(ISBN) as NtMname FROM `library`.`MEDIEN`where  Mname != `isbn`;\n Select COUNT(ISBN) as NtLname FROM `library`.`MEDIEN`where  Lname != `isbn`;\n</code></pre>\n\n<p>I am not sure i execute correct command or not.\nBecause some ISBN records have Fname,Mname or Fname,Lname or Mname,Lname or Fname , Lname,Mname only respectively.</p>\n\n<p>For example </p>\n\n<p><strong>First Author</strong></p>\n\n<p>Fname: asher\nLname: baig</p>\n\n<p>have written 5 books records but two of them with ISBN so </p>\n\n<p>Total output will be ISBN = 2</p>\n\n<p>Desire output will be like this</p>\n\n<p><code>ISBN=value and NtISBN=value</code></p>\n\n<p>Please kindly help me solving this query</p>\n"},{"tags":["mysql","database","database-design","rdbms","database-schema"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13234743,"title":"Save history editable data RDBMS","body":"<p>I want to make application like testing system. Every question has one or many variant of answers (and one or many can be right). I apologize that tutors and students use my testing system. It means that tutor can make CRUD operations with subject, questions and answers. But in this case appeares one big problem as saving version. For example,  I am a tutor and I decide edit some question or answer ( or may be several questions and several answers). When I  enter as student, I want to get a list of questions in which I made mistakes but tutor already  edited this question and I get wrong information.</p>\n\n<p>Main question: How I can save editable data in database? </p>\n\n<p><img src=\"http://i.stack.imgur.com/se0xV.png\" alt=\"My database\"></p>\n\n<p>Each test has questions and every question has naswers. Tutors can edit/add/delete any of those components. For example, he or she can modify one of the questsion's text, add several questions to a test and edit one of the answers to the question that has just been modified. Any hints how I can handle all this so that I could retreive a version of the test at the exact time in the past?</p>\n\n<p>Here is what I have come up with so far. The solution is extremely complex and I feel there is a better way of doing that.</p>\n"},{"tags":["mysql","solr","lucene","index","sphinx"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13237028,"title":"MySQL performance - can Sphinx / Lucene / Solr help in this case?","body":"<p>I have been using MySQL (InnoDB) for a social network like site and soon figured that in some cases more complex queries can get very slow. However, also very simple queries, e.g. when you have a range scan combined with <code>ORDER BY</code>.</p>\n\n<p>Mysqlperformance blog talked about this issue of mysql, and I have tried to find solutions but till now nobody directly addressed this topic whenever I asked a question for this specific issue. As I understand and can see, MySQL can use an index both for range scan and order by only, if it is the last part in a compound index. E.g. index(range,sort_field) will not work.</p>\n\n<p>Now, this basic query:</p>\n\n<pre><code>  SELECT id, username \n  FROM user \n  WHERE (birthday BETWEEN '1985-01-01' AND '1995-01-01') \n  ORDER BY timestamp_registered \n  DESC LIMIT 0,10\n</code></pre>\n\n<p>MySQL can use an index to order, and then use where to find 10 users that match the query. However, what if the majority of users is between 18 and 28, and you search for users between 78 and 79? If MySQL uses the index to order, using where will take a long time to find 10 users that match.</p>\n\n<p>Now, the same issue, if you add more specifications such as country, language, blocked_users, friends etc. Some countries with larger populations will be faster, whereas smaller countries very slow.</p>\n\n<p>Now, the question for me was, what is the solution? When I searched for fast indexing, I came across Sphinx, solr, lucene... but also as far as I understood they are all not exactly easy to implement and use and secondly are mostly mentioned for fulltext search, which is nice, but not such a high priority right now...</p>\n\n<p>Can anybody address that specific issue with MySQL using index on range, multiple range, range and order by? And secondly, whether sphinx etc could help in that case or not? A big disadvantage that I found is the re-indexing necessary with sphinx, is that correct? Changes are very frequent and new users come. I calculate with about 1,500 new users per day and about 2milion in total.</p>\n\n<p>Thank you very much in advance for any help!</p>\n"},{"tags":["php","mysql","post","foreach"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":27,"score":-1,"question_id":13237073,"title":"Process form Multiple arrays in foreach based on field and then INSERT INTO","body":"<p>Hello im a new member :)</p>\n\n<p>beginner PHP programmer and working on some nice projects to get this learning going :)</p>\n\n<p>Ive run into a small problem which for u pro programmers out there is probably very easy to fix :p</p>\n\n<p>Im trying to create a simple web app that allows somebody to create a order in my database (for now)</p>\n\n<p>this is my database layout</p>\n\n<pre><code>orderid int(11)                     \nprodid  int(11)                         \naantal  int(11)                             \nprice   decimal(10,2)                           \npickupdate  date\n</code></pre>\n\n<p>I have created an form with items grabbed from my mysql database (products)\nand creates a dynamic list.</p>\n\n<p>This is the form that i have made</p>\n\n<p><a href=\"http://i.imgur.com/ZfX2w.png\" rel=\"nofollow\">http://i.imgur.com/ZfX2w.png</a></p>\n\n<p>I have in my html code the name fields as arrays.</p>\n\n<pre><code>&lt;tr&gt; \n&lt;td height=\"29\"&gt;&lt;?PHP echo $row[\"prodid\"]; ?&gt;&lt;input type=\"hidden\" id=\"prodid\"   name=\"prodid[]\"      value=\"&lt;?PHP echo $row[\"prodid\"]; ?&gt;\"  /&gt;&lt;/td&gt;\n&lt;td height=\"29\"&gt;&lt;?PHP echo $row[\"catid\"]; ?&gt;&lt;/td&gt;\n&lt;td&gt;&lt;?PHP echo $row[\"description\"]; ?&gt;&lt;/td&gt;\n&lt;td&gt;&lt;?PHP echo $row[\"price\"]; ?&gt;&lt;input type=\"hidden\" id=\"data\" name=\"price[]\" value=\"&lt;?PHP echo  $row[\"price\"]; ?&gt;\"  /&gt;&lt;/td&gt;\n&lt;td&gt;&lt;?PHP echo $row[\"aantalindoos\"]; ?&gt;&lt;/td&gt;\n&lt;td&gt;&lt;input name=\"aanta[]\" type=\"text\" id=\"aantal\" size=\"4\" maxlength=\"4\"&gt;&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>my fields i want to process are arrays are prodid[] price[] aantal[]</p>\n\n<p>Now i want to run a foreach loop based on the field aanta[]</p>\n\n<p>and only insert rows that have a aantal behind them :)</p>\n\n<p>ive done some tests with help from this site but i cant get it to work properly</p>\n\n<p>it keeps inserting empty rows, so inserting this will result into just processing the form 15 times...</p>\n\n<p>in the example screenshot above when properly processed it should result in inserting into the DB</p>\n\n<pre><code>[orderid]1 \n[prodid]4 \n[aantal]1 \n[price]17.50\n[pickupdate]\n</code></pre>\n\n<p>and for the 2nd aantal[] field</p>\n\n<pre><code>[orderid]2\n[prodid]11\n[aantal]2\n[price]13.95\n[pickupdate]\n</code></pre>\n\n<p>now it just keeps looping until it is done with inserting empty aantal[] fields.</p>\n\n<p>Hopfully you can point me in the right direction with some example code :) since i couldnt find much about this problem :(</p>\n\n<p>help a new member out :D</p>\n"},{"tags":["php","mysql","prepared-statement"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":2,"view_count":57,"score":2,"question_id":13236712,"title":"Why is the mysql extension no longer recommended?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-function-in-php\">Why shouldn’t I use mysql_* function in PHP?</a>  </p>\n</blockquote>\n\n\n\n<p>I am looking at using Justin Vincent's <a href=\"http://justinvincent.com/ezsql\" rel=\"nofollow\">ezSQL</a> in my next PHP project, and I noticed that it uses <code>mysql_connect</code> under the hood. I know that it is not recommended to use the <code>mysql_*</code> functions in PHP anymore. I have seen my fair share of websites that were SQL injection-attacked through code like the following:</p>\n\n<pre><code>&lt;?php mysql_qyery(\"SELECT * FROM my_table WHERE id = \" . $_GET['id']); ?&gt;\n</code></pre>\n\n<p>I know that PDO has support for <a href=\"http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html\" rel=\"nofollow\">prepared statements</a>, but you are not forced to prepare your statements, so you could still write similarly insecure queries.</p>\n\n<p>I was wondering if there are any intrinsic security flaws with the <code>mysql_*</code> functions that I should be aware of if I am using a library like <a href=\"http://justinvincent.com/ezsql\" rel=\"nofollow\">exSQL</a> that handles escaping data before executing a query?</p>\n\n<p><strong>Edit:</strong> I am not asking whether I should use PDO/mysqli instead of the mysql extension or whether the mysql extension will be removed in future versions of PHP. The answers to both of these questions are readily available on the PHP manual as well as elsewhere. However, there is a lack of readily-available documentation as to <em>why</em> the mysql extension is discouraged. This is evident by the fact that the PHP manual's answer to the question, <a href=\"http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated\" rel=\"nofollow\">\"Why is the MySQL extension (ext/mysql) that I've been using for over 10 years discouraged from use? Is it deprecated? What do I use instead? How can I migrate?\"</a> does not in fact answer why it is discouraged.</p>\n\n<p>This is a problem for developers using libraries that still rely on the old mysql extension. Just because the extension is no longer supported does not make this an \"irrelevant\" question, as there are still plenty of libraries that use the old extension.</p>\n"},{"tags":["php","mysql","select","locking"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13236823,"title":"Waiting for table level lock","body":"<p>After doing some homework on the subject, i found that if i want mysql to do a \nselect without waiting for a lock, i should run : </p>\n\n<pre><code>\"SET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED\" \n</code></pre>\n\n<p>before my query. </p>\n\n<p>In theory, this should work like SELECT NOLOCK.</p>\n\n<p>In practice I might be missing something as looking at show processlist I still see :</p>\n\n<pre><code>\"Waiting for table level lock\"\n</code></pre>\n\n<p>What am i missing?</p>\n"},{"tags":["php","mysql","sql","database-design"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13236742,"title":"SQL Databases and table design/organization","body":"<p><em>(NOOB disclaimer)</em></p>\n\n<p>I'm working on a system (a type of map), that is accessed mostly via 3 fields: ID (auto incremented), X coordinate, and Y coordinate.</p>\n\n<p>As it is right now, i have all data on the map, stored in 1 table. Whenever the map display is loaded it simply queries the database for contents in x and y, and the DB gives the data (other fields in the same entry). If an item on the map is doing something, it has a flag saying its doing something, and then has an ID of the action in another table holding that type of 'actions'.</p>\n\n<p>Essentially, for all map data, its stored in 1 table. All actions of a certain type are stored in their own table.</p>\n\n<p>I'm a noob, and i'm wondering what the most effective/efficient structure for such a design? (a map that has items, and each item has stats/actions).</p>\n\n<p>I'm using PHP atm, using standard SQL queries to get my data. </p>\n\n<p>Should i split up the tables so that there are only x number of entries on a table? (coord range limits)? Should it just keep growing and growing?</p>\n\n<p>There's a lot of queries to the table... so just tryin to see what is best :/</p>\n"},{"tags":["php","mysql","database"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":256,"score":0,"question_id":7865466,"title":"Php mysql LOWER function with AES_DECRYPT","body":"<p>I have AES encrypted data stored in the database using php mysql. Which I entered using AES_ENCRYPT. Problem is that data is coming from iphone and \"first name\" of member is coming with first letter in UPPER CASE and stored as Upper. For examle 'Pooja' </p>\n\n<p>I am wondering when I go for searching the following then it does not give me any result.</p>\n\n<pre><code>SELECT *\nFROM member\nWHERE LOWER(AES_DECRYPT(fname,'xxxxxxxxxxxxxxxxx')) LIKE'%$pooja%'\n</code></pre>\n\n<p>It gives me 'Pooja' when I dont use LOWER.</p>\n\n<p>Can anybody please correct me here ?? </p>\n"},{"tags":["php","mysql","sendmail"],"answer_count":7,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":51,"score":-1,"question_id":13236291,"title":"can't send mail in php","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1104555/php-send-mail-code-not-working\">php send mail code not working</a>  </p>\n</blockquote>\n\n\n\n<p>I use these following codes to send mail in php but it won't send any mail :</p>\n\n<pre><code>$link3 = mysql_connect(\"localhost\",\"user\",\"pass\");\n mysql_select_db(\"user\");;\n $res = mysql_query(\"select * from user where pass= '$code' \");\n $row = mysql_fetch_row($res);\n\nmail('$_POST[email]','Confirm','http://www.mysitename.com/link?$row[0]');\n</code></pre>\n\n<p>what's the problem?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["mysql","excel","odbc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13236412,"title":"Call mysql through odbc and excel","body":"<p>I am calling a query through an odbc connection from excel.</p>\n\n<p>I have a where clause where I want to use dates.</p>\n\n<p>This works for a date\nsale.saledate>={d '2012-10-29'}</p>\n\n<p>But I need to add time in also</p>\n\n<p>I tried\nsale.saledate>={d '2012-10-29 3:30 PM'}</p>\n\n<p>But this does not work.</p>\n\n<p>any ideas?</p>\n"},{"tags":["mysql","sql"],"answer_count":3,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":68,"score":6,"question_id":13222525,"title":"Can I order by IN value","body":"<p>Can I sort by the value of an IN query?</p>\n\n<p>The following defaults to \"order item_id lowest first\" but i actually want the sort as entered... is this possible?</p>\n\n<p>e.g.</p>\n\n<pre><code>select item_id, item_title, item_source from items where item_id IN ('1676','1559','1672')\n</code></pre>\n\n<p>I want to return:</p>\n\n<pre><code>item_id     item_title    item_source\n-------     ----------    -----------\n1676        item_a        source_a\n1559        item_f        source_f\n1672        item_c        source_c\n</code></pre>\n"},{"tags":["mysql","real-time"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13236812,"title":"how i want to grab the process data into real time database?","body":"<p>i'm working on the real time database, the database design gps/gnss integrity monitoring system.\nhow i want to grab the process (rinex) data into my database? </p>\n\n<p>is there any source code to make my database (using mysql) in real time? please help me.</p>\n"},{"tags":["mysql","vba","excel-vba"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13236486,"title":"Adding value in result table if value doesnt exist in SQL result with VBA in Excel","body":"<p>I am trying to get a table in excel via VBA connected to MYSQL data base. My query works but I would like to modify something in the results. Right now, I am getting the number of users that purchased 1, 2, 3..... in each column depending on the time variable j. However, for various values of j, there are no users that purchases 3 times or more. I would like to add a function that would say: if number of purchases equal 3, 4, 5 up to 10 does not exist, add value = 0 to that value.</p>\n\n<p>For example: for j = 10 I get :</p>\n\n<p>nb 1     :31\nnb 3     :10</p>\n\n<p>I would like to get</p>\n\n<p>nb 1     :31\nnb 2     :0\nnb 3     :10\nnb 4     :0\n.........\nnb 10    :0 </p>\n\n<p>Here is my code:</p>\n\n<pre><code>   For j = 1 To 30\n\n    strSql = \"SELECT COUNT(nb_purchases), nb_purchases from users\" &amp; _\n     \"WHERE DATEDIFF(date_added , register_date) &gt;=\" &amp; j &amp; \" \" &amp; _\n     \"GROUP BY nb_purchases\" &amp; _\n     \"ORDER BY nb_purchases ASC ; \"\n\n    For i = 1 To 2\n    Cells(i, j) = res(0, i)\n    Next i\n    Next j\n</code></pre>\n"},{"tags":["php","mysql","dynamic-sql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":60,"score":-1,"question_id":13236007,"title":"dynamic where clause mysql php","body":"<p>i have a question here.. i have 1 dynamic table.. and i want to ask u a question, is it possible to create a where clause based on my dynamic table.. let me explain it..</p>\n\n<p>this is my table</p>\n\n<p>tabel Attribute</p>\n\n<pre><code>_____________________\nidAttribute | Name\n_____________________\n1           | Width\n2           | Diameter\n3           | AR\netc\n</code></pre>\n\n<p>Is it possible to create automatic / dynamic where clause just based on that table.Name value</p>\n\n<pre><code>width = ? AND Diameter = ? AND AR = ? AND etc\n</code></pre>\n\n<p>Any suggestion?</p>\n\n<p>Let me more explain..</p>\n\n<p>lets say i have a variabel $query that contain my condition...</p>\n\n<pre><code>$query = \"SELECT * FROM xxx WHERE \".$where;\n</code></pre>\n\n<p>Nah.. in my $where variabel, if i write it normally, based on my table above it will be..</p>\n\n<pre><code>$where = \"width = ? AND diameter = ? AND AR = ?\";\n</code></pre>\n\n<p>My question is how to create $where dynamic based on my table above, so if my table above is</p>\n\n<pre><code>idAttribute | Name\n__________________\n1           | Width\n2           | Diameter\n3           | AR\n4           | Weight\n</code></pre>\n\n<p>It will be automaticly like this</p>\n\n<pre><code>$where = \"width = ? AND diameter = ? AND AR = ? AND weight = ?\";\n</code></pre>\n\n<p>any suggestion?</p>\n"},{"tags":["php","mysql","select"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":59,"score":-1,"question_id":13236375,"title":"PHP/MYSQL - Get the value of a database column","body":"<p>Let's say I have a database, and inside the database are columns user email and activated.<br>\nI want to see what value that user and email have in activation column. \nSomethinhg like this :  </p>\n\n<p><code>SELECT dbname WHERE username = '$user' and email = '$user' GET activated VALUE</code></p>\n\n<p>I know this is was wrong, but not why</p>\n"},{"tags":["mysql","replication","magic"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13236439,"title":"MySQL replication unsafe UPDATE statement","body":"<p>I have an SQL query like</p>\n\n<pre><code>UPDATE table SET foo = 'bar' WHERE pkey = n\n</code></pre>\n\n<p>Where\n<code>pkey</code> is primary key, and <code>n</code> is integer constant.\nSince i've turned binary logging on (in statement mode), mysql error log is full of warnings:</p>\n\n<pre><code>Statement may not be safe to log in statement format.\n</code></pre>\n\n<p>What could be causing this? As you can see, the statement has no ambiguity.</p>\n\n<p>Also i have trigger <code>AFTER UPDATE</code> on this table. Whether the trigger be causing warnings?</p>\n"},{"tags":["mysql","query","optimization"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13236212,"title":"MySQL soccer league query optimization (player stats)","body":"<p>I'd like to optimize this query 'cause it really seems a mess to me... </p>\n\n<pre><code>SELECT\n    L.id,\n    L.role,\n    L.first_name,\n    L.last_name,\n    L.birth_date,\n    L.team_name,\n    L.team AS team_id,\n    L.photo,\n    L.email,\n    L.played,\n    L.vote_average,\n    L.goal_sum AS goal,\n    L.score + IFNULL(L.c_mvp, 0)*10 AS score,\n    L.y_card_sum AS y_card,\n    L.r_card_sum AS r_card,\n    IFNULL(L.c_mvp, 0) AS mvp,\n    IFNULL(unbeaten, 0) AS unbeaten\nFROM (\n    SELECT * FROM (\n        SELECT\n            dc_player. *,\n            dc_team.name AS team_name,\n            COUNT( dc_match_entry.player_id ) AS played,\n            AVG( dc_match_entry.vote ) AS vote_average,\n            SUM( dc_match_entry.goal ) AS goal_sum,\n            SUM( dc_match_entry.vote ) *10 + SUM( dc_match_entry.goal ) *10 - SUM( dc_match_entry.r_card ) *10 - SUM( dc_match_entry.y_card ) *5 - SUM( dc_match_entry.own_goal ) *10 AS score,\n            SUM( dc_match_entry.y_card ) AS y_card_sum,\n            SUM( dc_match_entry.r_card ) AS r_card_sum\n        FROM\n            dc_player,\n            dc_match_entry,\n            dc_team\n        WHERE \n            dc_player.id = dc_match_entry.player_id AND\n            dc_player.team = dc_team.id\n        GROUP BY\n            dc_player.id\n    ) LOL\n    LEFT JOIN (\n        SELECT\n            COUNT(dc_match.mvp) c_mvp,\n            mvp AS player_id\n        FROM dc_match\n        WHERE\n            dc_match.mvp IS NOT NULL\n        GROUP BY dc_match.mvp\n    ) ROFL\n    ON ROFL.player_id = LOL.id\n    ORDER BY \n        LOL.score DESC\n) L\nLEFT OUTER JOIN(\n    SELECT\n        dc_player.id,\n        COUNT(dc_match.id) AS unbeaten\n    FROM\n        dc_match,\n        dc_match_entry,\n        dc_player\n    WHERE\n        (\n            (dc_player.team=dc_match.host AND\n            dc_match.guest_score=0\n            ) OR\n            (\n                dc_player.team=dc_match.guest AND\n                dc_match.host_score=0\n            )\n        ) AND\n        dc_player.id = dc_match_entry.player_id AND dc_match.id = dc_match_entry.match_day\n    GROUP BY\n        dc_player.id\n) I\nON\n    L.id = I.id\nGROUP BY\n    id\n</code></pre>\n\n<p>I read about some subqueries mysql issues and afaik this query seems to be a little \"heavy\". Can anybody help me with it? Thanks a lot.</p>\n"},{"tags":["jquery","mysql","ajax","json","autocomplete"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13191457,"title":"Jquery UI Autocomplete from Database","body":"<p>I am trying to use jquerys autocomplete with my database but I can't figure out how to return the data from my php script as options for the autocomplete.</p>\n\n<p>Here is what I have at the moment based on another forum post:</p>\n\n<pre><code>$('input#transferto').autocomplete({\n                source: function(request, response)\n                {\n                    alert('{\"term\": \"'+request.term+'\", \"mode\": \"ENTITY_AUTOCOMPLETE\"}');\n                    $.ajax({\n                        url: SYSTEM_ROOT+'/assets/controllers/global.php',\n                        data: 'dataString={\"term\": \"'+request.term+'\", \"mode\": \"ENTITY_AUTOCOMPLETE\"}',\n                        success: function(data)\n                        {\n                            //alert(data);\n                            //data = $.parseJSON(data) ;\n                            response($.map(data, function(item) {\n                                return{\n                                    label: item.user_login_name,\n                                    value: item.user_id\n                                }\n                            }))\n                        }\n                    })\n                },\n                minLength: 3,\n                datatype: 'json',\n                cache: false,\n                delay: 500,\n</code></pre>\n\n<p>And in my php file:</p>\n\n<pre><code>if($mode == 'ENTITY_AUTOCOMPLETE')\n{\n    $query = trim(strip_tags($JSON-&gt;term));\n    $q = $query.'%' ;\n    $result = $dbh-&gt;prepare(\"SELECT id, name FROM entity_details WHERE name LIKE ?\") ;\n    $result-&gt;execute(array($q)) ;\n\n    //$data = '{' ;\n    //while($row = $result-&gt;fetch(PDO::FETCH_ASSOC)) {\n        //foreach($row as $key =&gt; $val)\n            //$data .= '\"'.$key.'\": \"'.rawurldecode($val).'\", ' ;\n    //}\n    //$data = substr($data, 0, strlen($data)-2).'}' ;\n    $data = $result-&gt;fetchAll(PDO::FETCH_ASSOC) ;\n    echo print_r($data) ;\n}\n</code></pre>\n\n<p>As you can see I have tried returning just an array and tried JSON but to no avail.</p>\n\n<p>How do I make it work?</p>\n"},{"tags":["mysql","sql","flyway"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13235438,"title":"flyway executes \"alter table ... modify `col` auto_increment\" on MySQL but doesn't change `col` values","body":"<p>When I execute these sentences from MySQL command line or Workbench...</p>\n\n<pre><code>-- 1) Add a column `id`\nALTER TABLE `DEVICES` ADD `id` BIGINT(20) NOT NULL;\n-- 2) Add an index, necessary for auto_increment\nALTER TABLE `DEVICES` ADD index `devices_id_index`(`id`);\n-- 3) Makes `id` auto_increment and inserts sequential numbers it (from 1 to N)\nALTER TABLE `DEVICES` MODIFY `id` BIGINT(20) AUTO_INCREMENT;\n</code></pre>\n\n<p>... what I get is a new column <code>id</code> that is filled with auto-increment values from 1 to N.</p>\n\n<p>But when I execute it from <strong>flyway</strong>, the column <code>id</code> has a zero in every row because the last sentence doesn't change its values.</p>\n\n<p>Do you know why?</p>\n\n<p>Any solution/workaround besides inserting those values using a procedure?</p>\n\n<p>Thank you!</p>\n\n<p>Ferran</p>\n"},{"tags":["java","mysql","datetime","timezone","timestamp"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13235191,"title":"MySQL - how to store time with correct timezone? (from Java)","body":"<p>I'm using MySQL 5.0. I need to store into one column date-time information, it means to use <code>DATETIME</code> or <code>TIMESTAMP</code> column type. But I have problem with summer-winter time change.</p>\n\n<p>My timezone is CET. In summer we use summer-time (CEST, it is GMT+2) and in winter we use winter-time (CET, it is GMT+1). In the day when the summer time changes into winter time (in this year 2012 it was on 28th of October) we have time 2:00AM two-times. The sequence of time in this day is:</p>\n\n<pre><code>... -&gt; 1:00 CEST -&gt; 2:00 CEST -&gt; 2:00 CET (= 3:00 CEST) -&gt; 3:00 CET -&gt; ...\n</code></pre>\n\n<p>So if I have timestamp/datetime '2012-10-28 02:00:00' I'm not able to say correctly if this time represents 2:00AM in summer time or in winter time.</p>\n\n<p>I have two different java dates:</p>\n\n<pre><code>Date d1 = new Date(1351382400000); // 2:00 CEST (summer-time)\nDate d2 = new Date(1351386000000); // 2:00 CET (winter-time)\n</code></pre>\n\n<p>and when I store them into database using standard timestamp/datetime format (ie. <code>'yyyy-MM-dd HH:mm:ss'</code>) both of them are store equally as '2012-10-28 02:00:00'. But when I get these values from database back into Date variables I get two same dates. So input dates were different but output dates are equal.<br />\nThe same occures if I use FROM_UNIXTIME function to store date value: <code>FROM_UNIXTIME(1351382400)</code> and <code>FROM_UNIXTIME(1351386000)</code> values are stored into database column (DATETIME or TIMESTAMP type) as same values. So when I get these values into java's Date object I get two same dates again (in winter time).</p>\n\n<p>Is there any way, how to store into MySQL information about timezone or how to handle with timezone information within DATETIME/TIMESTAMP columns?<br />\nOf course I can store into database BIGINT value with unix-timestamp. But I'm wondering if there's any way how to solve this problem with any </p>\n\n<p>MySQL date-time type.</p>\n\n<p>Any help or trick is appreciated ... :)</p>\n\n<p>Thanks a lot.</p>\n\n<p>Honza (sporak)</p>\n"},{"tags":["php","mysql","database","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":34,"score":-1,"question_id":13236102,"title":"Is j-query table possible to read 2000 rows from database?","body":"<p>I have a table with 2000 rows and 200 column and I want to read 4 columns from mysql and show theme in browser...\nwitch way is best for me\nI want to sort theme with user request like name or ... (like j-query Ajax tables )</p>\n\n<p>Is j-query table possible or its heavy?<br>\n<a href=\"http://www.jtable.org/\" rel=\"nofollow\">http://www.jtable.org/</a></p>\n"},{"tags":["php","mysql","json"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13221142,"title":"Re-arrange mysql result in an expected format for hansontable","body":"<p>I'm going to re-arrange mysql result into json with a format to use with hansontable.\nAccording to this issue : <a href=\"http://stackoverflow.com/questions/13218232/find-string-position-and-join-another-tables-row/13218284#comment18001930_13218284\">Find string position and join another table&#39;s row</a>. Mr.Olaf has his talent. I've tried to do it on my own. Yeah again - it's not work. Here's my code:</p>\n\n<pre><code>$sql_rCost=\"select date,\n       substring_index(cost, '-', 1) type_a,\n       case when cost regexp '.*-' then\n                 substring_index(substring_index(cost, '-', 2), '-', -1)\n            else ''\n       end type_b,\n       case when cost regexp '.*-.*-' th                substring_index(substring_index(cost, '-', 3), '-', -1)\n            else ''\n       end type_c,\n       case when cost regexp '.*-.*-.*-' then\n            substring_index(substring_index(cost, '-', 4), '-', -1)\n            else ''\n       end type_d,\n       case when cost regexp '.*-.*-.*-.*-' then\n            substring_index(substring_index(cost, '-', 5), '-', -1)\n            else ''\n       end type_e\nfrom room_rate_cost where rate='2' and  hotel='1' and date between '2012-11-01' and '2012-11-31' order by date asc\n\";\n$result_rCost=mysql_db_query($dbname,$sql_rCost);\nwhile($rec_rCost=mysql_fetch_array($result_rCost)){\n    $_rCostDBdate=$rec_rCost['date'];\n    $_rCostDBtypea=$rec_rCost['type_a'];\n    $_rCostDBtypeb=$rec_rCost['type_b'];\n    $_rCostDBtypec=$rec_rCost['type_c'];\n    $_rCostDBtyped=$rec_rCost['type_d'];\n    $_rCostDBtypee=$rec_rCost['type_e'];\n\n    $_rCostDBcost[]=$rec_rCost['cost'];\n\n    $_array[]=array(    $_rCostDBdate,$_rCostDBcost);\n}\n    echo \"{\\\"data\\\": [\".json_encode($_array).\"]}\";\n</code></pre>\n\n<p>After execute it the returns is:</p>\n\n<pre><code>{\"data\": [[[\"2012-11-01\",[null]],[\"2012-11-02\",[null,null]],[\"2012-11-03\",[null,null,null]],[\"2012-11-04\",[null,null,null,null]],[\"2012-11-05\",[null,null,null,null,null]],[\"2012-11-06\",[null,null,null,null,null,null]],[\"2012-11-07\",[null,null,null,null,null,null,null]],[\"2012-11-08\",[null,null,null,null,null,null,null,null]],[\"2012-11-09\",[null,null,null,null,null,null,null,null,null]],[\"2012-11-10\",[null,null,null,null,null,null,null,null,null,null]],[\"2012-11-11\",[null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-12\",[null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-13\",[null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-14\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-15\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-16\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-17\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-18\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-19\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-20\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-21\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-22\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-23\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-24\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-25\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-26\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-27\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-28\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-29\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[\"2012-11-30\",[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]]]]}\n</code></pre>\n\n<p>The expected format is :</p>\n\n<pre><code>    {\n  \"data\": [\n    [\"\", \"type_a\", \"type_b\", \"type_c\", \"type_d\", \"type_e\"],\n    [\"2011-11-01\", 4700, 5500, 6100, 6600, 7300],\n    [\"2011-11-02\", 4700, 5500, 6100, 6600, 7300],\n    [\"2011-11-03\", 4700, 5500, 6100, 6600, 7300],\n    ...\n    [\"2011-11-30\", 4700, 5500, 6100, 6600, 7300],\n  ]\n}\n</code></pre>\n"},{"tags":["mysql","transactions","sql-update","innodb","sql-insert"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13235882,"title":"MySQL which is the method to rollback a transaction effective?","body":"<p>I saw in multiple answers here and on google that rollback a transaction implies only the rollback of the last command, and i read also that implies ALL commands. (neither both documented or referenced by)</p>\n\n<p>That I need to do is create a store procedure that insert/update on table A, get the last ID of A, insert that ID into B, get the last id of B, insert it into C, etc, etc, etc.</p>\n\n<p>I want to know which is the method to commit or rollback all commands in the transaction, in order to start the transaction and if something fails, get back everything as the original.</p>\n\n<p>SQL code with IF error and last_id will be preciated, because also I saw a LOT of differents ways to get the last id and I don't know which is better.</p>\n\n<p>By the way, all tables are <strong>InnoDB</strong></p>\n\n<p>Kind regards, </p>\n"},{"tags":["mysql","odbc","mysql-connector"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":340,"score":0,"question_id":10894575,"title":"mysql-connector-odbc-5.1.11-win64 not working after installation","body":"<p>I tried to install mysql-connector-odbc-5.1.11-win64 in windows 7 64 bit computer. Installation is successful. But when I'm going to connect system DSN it says </p>\n\n<blockquote>\n  <p>The setup routines for the mysql odbc 5.1 driver could not be\n  accessed. Please reinstall the driver</p>\n</blockquote>\n\n<p>and component not found in the registry. Can anyone help me to solve the problem. </p>\n"},{"tags":["mysql","join","sql-update"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13235911,"title":"subtract value in one table from value in second table - Set result as value in second table","body":"<p>I have two tables. First table is <code>Shipping</code> with columns <code>Product</code>, <code>Quantity</code> and <code>ID</code>. Second table is <code>Inventory</code> with columns <code>Product</code> and <code>Total</code>.</p>\n\n<p>I want to take the value of <code>Shipping.Quantity</code> and subtract it from the value in <code>Inventory.Total</code> WHERE the <code>Product</code> values match in each table and <code>Shipping.ID</code> is value in url (<code>$onum</code>).  Then I want to set the new value as Inventory.Total for that product.    </p>\n\n<p>Best I could come up with:</p>\n\n<pre><code>UPDATE Inventory.Total \nCROSS JOIN Shipping \nSET Inventory.total=(Inventorytotal-Shipping.Quantity) \nWHERE Inventory.Product=Shipping.Product \n  AND Shipping.ID=$onum\n</code></pre>\n"},{"tags":["php","mysql","wordpress"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13234251,"title":"How to get a single variable in Wordpress","body":"<p>I am running a competition which is based on WP Custom Fields. I am trying to count all meta values of a meta_key='odd' for a specific user. I am using the formula below but it's not returning any result. </p>\n\n<pre><code>$meta_key = 'odd';\n$post_author = 'Admin';\n$odd = $wpdb-&gt;get_var( $wpdb-&gt;prepare(\n    \"\n    SELECT Count(meta_value)\n    FROM $wpdb-&gt;postmeta\n    INNER JOIN $wpdb-&gt;posts ON $wpdb-&gt;postmeta-&gt;post_id = $wpdb-&gt;posts-&gt;ID\n    WHERE $wpdb-&gt;postmeta-&gt;meta_key = 'odd' AND $wpdb-&gt;posts-&gt;post_author = 'Admin'\n    \",\n    $meta_key, $post_author\n) );\necho \"&lt;p&gt;Total odd {$odd}&lt;/p&gt;\";\n</code></pre>\n\n<p>Anyone can help me? Thanks in advance. </p>\n"},{"tags":["php","mysql","codeigniter","types","sqldatatypes"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13236002,"title":"CodeIgniter Active Record Return Mysql data types instead of just strings","body":"<p>I am using codeIgniter version 2.0.3.  I was wondering if there is a simple way to return data with the correct data type.  For example for schema:</p>\n\n<pre><code>+-------+--------------+------+-----+---------+----------------+\n| Field | Type         | Null | Key | Default | Extra          |\n+-------+--------------+------+-----+---------+----------------+\n| id    | int(11)      | NO   | PRI | NULL    | auto_increment |\n| term  | varchar(255) | NO   |     | NULL    |                |\n| level | int(11)      | NO   |     | NULL    |                |\n+-------+--------------+------+-----+---------+----------------+\n</code></pre>\n\n<p>active record <code>result_array</code> returns:</p>\n\n<pre><code>array(4) {\n  [0]=&gt;\n  array(3) {\n    [\"id\"]=&gt;\n    string(1) \"1\"\n    [\"term\"]=&gt;\n    string(11) \"Mesoamerica\"\n    [\"level\"]=&gt;\n    string(1) \"1\"\n  }\n  [1]=&gt;\n  array(3) {\n    [\"id\"]=&gt;\n    string(1) \"2\"\n    [\"term\"]=&gt;\n    string(6) \"Mexico\"\n    [\"level\"]=&gt;\n    string(1) \"1\"\n  }\n  [2]=&gt;\n  array(3) {\n    [\"id\"]=&gt;\n    string(1) \"3\"\n    [\"term\"]=&gt;\n    string(10) \"indigenous\"\n    [\"level\"]=&gt;\n    string(1) \"2\"\n  }\n  [3]=&gt;\n  array(3) {\n    [\"id\"]=&gt;\n    string(1) \"4\"\n    [\"term\"]=&gt;\n    string(5) \"ruins\"\n    [\"level\"]=&gt;\n    string(1) \"2\"\n  }\n}\n</code></pre>\n\n<p>The idea is to have the types come through on the result sets.  <code>ID</code> should be <code>INTEGER</code>, and <code>level</code> should be <code>INTEGER</code>.  I normally just typecast the data that I need to use.  I did not see any way to push this on codeIgniter in the documentation, but am hoping that there is an easy way to do this.  I have seen ways to do this in PDO but does codeIgniter provide some sort of convenience to do this for me?</p>\n"},{"tags":["mysql","csv","import","duplicates","updates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13235930,"title":"Is it possible to label duplicate records in a MySQL update statement?","body":"<p>I have a CSV import into a <code>temp_import_table</code> in which I'm validating the imported data before commiting to the database (<code>mysql 5.0.88</code>).</p>\n\n<p>I'm trying to search the records in the validation table for duplicate entries, but I can't get it to work like this:</p>\n\n<pre><code>&lt;cfquery datasource=\"#session.datasource#\"&gt;\n    UPDATE import_pricat_csv\n    SET err = \"ja\", errtxt = \"duplicate EAN\"\n    WHERE iln = &lt;cfqueryparam value=\"#Session.logId#\" cfsqltype=\"cf_sql_varchar\" maxlength=\"16\"&gt;\n        AND ean IN (\n            SELECT ean\n            FROM import_pricat_csv\n            GROUP BY ean\n            HAVING COUNT(ean) &gt; 1\n            )\n&lt;/cfquery&gt;\n</code></pre>\n\n<p>This throws an error:</p>\n\n<pre><code>You can't specify target table 'import_pricat_csv' for update in FROM clause \n</code></pre>\n\n<p><strong>Question:</strong><br>\nIs this not possible? Is there a better way than to loop once to get duplicates and a second time to set dup-records to <code>err=\"yes\"</code></p>\n\n<p>Thanks! </p>\n"},{"tags":["php","sql","mysql","sql-injection"],"answer_count":22,"favorite_count":518,"up_vote_count":852,"down_vote_count":4,"view_count":113984,"score":848,"question_id":60174,"title":"Best way to prevent SQL injection?","body":"<p>If user input have inserted into an SQL query directly, the application becomes vulnerable to <a href=\"http://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain/332367#332367/1228\">SQL injection</a>, like in the following example:</p>\n\n<pre><code>$unsafe_variable = $_POST['user_input'];\n\nmysql_query(\"INSERT INTO table (column) VALUES ('\" . $unsafe_variable . \"')\");\n</code></pre>\n\n<p>That's because the user can input something like <code>VALUE'); DROP TABLE table;--</code>, making the query:</p>\n\n<pre><code>INSERT INTO table (column) VALUES('&lt;strong&gt;VALUE'); DROP TABLE table;--&lt;/strong&gt;')\n</code></pre>\n\n<p>What should one do to prevent this?</p>\n"},{"tags":["mysql","coalesce"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13235847,"title":"COALESCE() for blank (but not null) fields","body":"<p>I have two fields that I'm comparing with MySQL's function <a href=\"http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce\" rel=\"nofollow\">COALESCE()</a>. For example, <code>COALESCE(Field1, Field2)</code>. The problem is, Field1 is sometimes blank but not null; since it's not null <code>COALESCE()</code> selects Field1, even though its blank. In that case, I need it to select Field2.</p>\n\n<p>I know I can write a if-then-else (CASE) statement in the query to check for this, but is there a nice simple function like <code>COALESCE()</code> for blank-but-not-null fields?</p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":29,"score":2,"question_id":13235491,"title":"mysql find duplicates","body":"<p><pre><code>\nid | apples  | oranges\n1    111       p\n2    112       p\n3    113       p\n<b><em>4    113       f</em></b>\n<b><em>5    113       -</em></b>\n6    114       p\n<b><em>7    114       f</em></b>\n8    115       -\n9    115       -\n10   116       f\n</pre></code></p>\n\n<p>Looking for a way to return only the rows where:</p>\n\n<ol>\n<li>oranges contains value 'f' or no value (empty) </li>\n<li>there are duplicate values in apples </li>\n<li>at least one duplicate in applies contains value of 'p' in oranges.  </li>\n</ol>\n\n<p>The rows 4,5 &amp; 7 in bold and italic are what I am after.  </p>\n"},{"tags":["php","mysql","phpmyadmin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":56,"score":-1,"question_id":13235456,"title":"How to prevent Duplicate entry from Multiple Insert from PHP to MYSQL","body":"<p>I have for loop for insert multiple records at 1 click button.\nIn side that I have IF statement for RATE = 0 or NULL then just Ignore the insert statement \nThat's part working fine. It's ignore the the insert if rate = 0 or null.\nBUT HERE what is strange is it insert the records 2 times which is before then the rate = 0 or NULL.</p>\n\n<p>I have PHPMYADMIN.</p>\n\n<p>Here IS my CODE</p>\n\n<pre><code>for($i=0;$i&lt;$a;$i++)\n        {\n            if(! get_magic_quotes_gpc() )\n            {\n                $po_number1[$i] = addslashes ($_POST['random']);\n                $master_vendor1[$i] = addslashes ($_POST['vendor_name']);\n                $market1[$i] = addslashes ($_POST['market'][$i]);\n                $start_date1[$i] = addslashes ($_POST['start_date'][$i]);\n                $end_date1[$i] = addslashes ($_POST['end_date'][$i]); \n                $qty1[$i] = addslashes ($_POST['qty'][$i]); \n                $rate1[$i] = addslashes ($_POST['rate'][$i]); \n                $comment1[$i] = addslashes ($_POST['comment'][$i]);\n                $media_type1[$i] = addslashes ($_POST['media_type'][$i]);\n                $sub_vendor1[$i] = addslashes ($_POST['sub_vendor'][$i]);\n            }\n            else\n            {\n                $po_number1[$i] = $_POST['random'];\n                $master_vendor1[$i] = $_POST['vendor_name'];\n                $market1[$i] = $_POST['market'][$i];\n                $start_date1[$i] = $_POST['start_date'][$i];\n                $end_date1[$i] = $_POST['end_date'][$i]; \n                $qty1[$i] = $_POST['qty'][$i]; \n                $rate1[$i] =  $_POST['rate'][$i]; \n                $comment1[$i] =  $_POST['comment'][$i];\n                $media_type1[$i] =  $_POST['media_type'][$i];\n                $sub_vendor1[$i] =  $_POST['sub_vendor'][$i];\n            }\n\n\n            if($rate1[$i] == 0 || $rate1[$i] == null)\n                {\n                // rate is 0 or null, add error\n                //  $errors[] = 'Rate is invalid in line ';\n\n                    $errors[] = \"Rate is invalid in line $i\";\n                }\n            else\n            {\n                $sql = \"INSERT INTO `order`(`po_number`, `vendor_name`, `market`, `start_date`, `end_date`, `qty`, `rate`, `comment`, `media_type`, `sub_vendor`) VALUES ('$po_number1[$i]','$master_vendor1[$i]','$market1[$i]','$start_date1[$i]','$end_date1[$i]','$qty1[$i]','$rate1[$i]','$comment1[$i]','$media_type1[$i]','$sub_vendor1[$i]')\";\n            }\n\n            mysql_select_db('mediaplan');\n            $retval = mysql_query( $sql, $conn );\n\n            if(! $retval )\n            {\n                die('Could not enter data: ' . mysql_error());\n            }\n        }   \n</code></pre>\n\n<p>ANY helps will be appreciate \nThank You..</p>\n\n<p>crate table query</p>\n\n<p>create table order (\nindex   int(255) AUTO_INCREMENT,\npo_number int(255),\nvendor_name varchar(255),\nmarket  varchar(255),\nstart_date date,\nend_date date,\nqty int(255),\nrate varchar(10),\ncomment varchar(255),\nmedia_type varchar(255),\nsub_vendor varchar(255))</p>\n"},{"tags":["mysql","query","indexing"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13235094,"title":"Indexing mysql query","body":"<p>I have this query in mysql and I wanted to be indexed, what is the best index composition?</p>\n\n<pre><code>SELECT cometchat.id, cometchat.from, cometchat.to, cometchat.message, cometchat.sent, cometchat.read, cometchat.direction\nFROM cometchat\nWHERE (\n(\ncometchat.to =  '30411'\nAND cometchat.direction &lt;&gt;2\n)\nOR (\ncometchat.from =  '30411'\nAND cometchat.direction &lt;&gt;1\n)\n)\n</code></pre>\n\n<p>I've tried these indexes but they didn't work:</p>\n\n<pre><code>ALTER TABLE  `cometchat` ADD INDEX (  `from`,`to`,`direction`)\nALTER TABLE  `cometchat` ADD INDEX (  `from`,`to`)\nALTER TABLE  `cometchat` ADD INDEX (  `to`,`direction`)\nALTER TABLE  `cometchat` ADD INDEX (  `from`,`direction`)\n</code></pre>\n\n<p>Any help would be much appreciated.</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":13,"score":1,"question_id":13235701,"title":"mySQL CONCAT_WS one database to another","body":"<p>I am trying to append some database information from an old database to a new one. Below is the code i am using however i get the following error and don't know why. </p>\n\n<pre><code>UPDATE specs s, cross_ref c \nSET s.cross_ref = CONCAT_WS(',', 's.cross_ref', 'c.comp_num) \nWHERE s.part_num = c.part_num\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>\"You have an error in your SQL syntax; check the manual that corresponds to \nyour MySQL server version for the right syntax to use near ''c.comp_num) \nWHERE s.part_num = c.part_num' at line 1\"\n</code></pre>\n"},{"tags":["mysql","utf-8"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":42,"score":3,"question_id":13234433,"title":"utf8 garbled when importing into mysql","body":"<p>Importing UTF8-encoded data into mysql is not working for me. UTF8 characters are corrupted. For example <strong>Nöthnagel</strong> is displayed as <strong>NÃ¶thnagel</strong></p>\n\n<p>I have created a sql dump file to do the importing which contains UTF-8 encoded data. For example:</p>\n\n<pre><code>INSERT INTO `users` VALUES(1, 'Fred','Nöthnagel');\n</code></pre>\n\n<p>The sequence of bytes representing <strong>ö</strong> in the file is c3 b6 which I believe is correct, as it displays correctly in vim and in my bash shell which has these environment variables set:</p>\n\n<pre><code>$ env | grep -i utf\nLANG=en_US.UTF-8\nXTERM_LOCALE=en_US.UTF-8\n</code></pre>\n\n<p>The mysql db was created as follows:</p>\n\n<pre><code>mysql&gt; CREATE DATABASE mydb CHARACTER SET utf8;\n</code></pre>\n\n<p>The mysql table was created so:</p>\n\n<pre><code>CREATE TABLE `users` (  \n    `id` int(11) NOT NULL AUTO_INCREMENT,  \n    `first_name` varchar(30) NOT NULL,  \n    `last_name` varchar(30) NOT NULL,\n    PRIMARY KEY (`id`),  \n    UNIQUE KEY `last_name` (`last_name`)  \n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;  \n</code></pre>\n\n<p>I am importing the dump file like so:</p>\n\n<pre><code> mysql -u root -psecret mydb &lt; mydump.sql\n</code></pre>\n\n<p>Please tell me what is missing from the above.</p>\n"},{"tags":["mysql","view","percentile"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12763832,"title":"MySQL VIEW with column as combined rank of other 3 VIEW columns","body":"<p>Bear with me, I'm SQL.stupid.  I've finally learned that one should use views instead of crons when possible.  Now, I have a view within a view question.</p>\n\n<p>My stack friends have gotten me this far:</p>\n\n<pre><code>CREATE VIEW tbl.sums as SELECT \n\ntable2.id, \n\nSUM( table1.column1 * 2 ) as column1Sum,\n\nSUM( table1.column2 * 2 ) as column2Sum,\n\nSUM( table1.column3 * 2 ) as column3Sum\n\nFROM table1, table2\nWHERE table1.table2_id = table2.id GROUP BY table2.id\n</code></pre>\n\n<p>I'd like to put in a 5th column into the view that's an equally-weighted rank of the other 3.</p>\n\n<p>So, the equation would be something like (1/3)*percentile(column1Sum) + (1/3)*percentile(column2Sum) + (1/3)*percentile(column3Sum) where \"percentile()\" is the percentile rank of the column vs the rest of the column.</p>\n\n<p>Please excuse the lack of clarity.  This really isn't my specialty.  Will edit as much as needed.</p>\n\n<p>Thank-you very much in advance!</p>\n\n<p><strong>Percentile Clarity</strong></p>\n\n<p>In my case, percentile is the percentage rank from highest to lowest of a given column adjusted for repeats.  So for a column with 100 values, the one with the largest, would be 100%, the one with the lowest would be 0% (or would it be 1%?).  If there were 100 but 50 duplicates, the bottom two would share 2%.</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13235221,"title":"MySQL Partition BY RANGE doesn't work with primary keys?","body":"<p>Is Partition BY RANGE can't be applied for the table which has auto incremented primary keys?\nI'm asking it because saw some (<a href=\"http://dev.mysql.com/doc/refman/5.1/en/partitioning-range.html\" rel=\"nofollow\">1</a>,<a href=\"http://vanilla47.com/MySQL%20Docs/mysql-partitioning-excerpt-5.6-en.html-chapter/partitioning-limitations.html\" rel=\"nofollow\">2</a>) examples of create table statement which doesn't have primary key definition. And also my create table statement gives me error:</p>\n\n<blockquote>\n  <p>A PRIMARY KEY must include all columns in the table's partitioning function</p>\n</blockquote>\n\n<p>Here is my statement</p>\n\n<pre><code>CREATE TABLE `tbl_point` (\n   `id` int(11) NOT NULL AUTO_INCREMENT,\n   `cord_x` double DEFAULT NULL,\n   `cord_y` double DEFAULT NULL,\n   `angle` int DEFAULT NULL,\n   PRIMARY KEY (`id`)\n)\nPARTITION BY RANGE (angle) (\n   PARTITION p0 VALUES LESS THAN (91),\n   PARTITION p1 VALUES LESS THAN (181),\n   PARTITION p2 VALUES LESS THAN (271),\n   PARTITION p3 VALUES LESS THAN (361)\n) \n</code></pre>\n\n<p>And one more question: could angle column be of double type? Because I've got this error when I set it as double:</p>\n\n<blockquote>\n  <p>The PARTITION function returns the wrong type</p>\n</blockquote>\n\n<p>Thanks.</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13234290,"title":"Lots of \"Query End\" states in MySQL, all connections used in a matter of minutes","body":"<p>This morning I noticed that our MySQL server load was going sky high. Max should be 8 but it hit over 100 at one point. When I checked the process list I found loads of update queries (simple ones, incrementing a \"hitcounter\") that were in <code>query end</code> state. We couldn't kill them (well, we could, but they remained in the <code>killed</code> state indefinitely) and our site ground to a halt.</p>\n\n<p>We had loads of problems restarting the service and had to forcibly kill some processes. When we did we were able to get MySQLd to come back up but the processes started to build up again immediately. As far as we're aware, no configuration had been changed at this point.</p>\n\n<p>So, we changed <code>innodb_flush_log_at_trx_commit</code> from 2 to 1 (note that we need ACID compliance) in the hope that this would resolve the problem, and set the connections in PHP/PDO to be persistent. This seemed to work for an hour or so, and then the connections started to run out again.</p>\n\n<p>Fortunately, I set a slave server up a couple of months ago and was able to promote it and it's taking up the slack for now, but I need to understand why this has happened and how to stop it, since the slave server is significantly underpowered compared to the master, so I need to switch back soon.</p>\n\n<p>Has anyone any ideas? Could it be that something needs clearing out? I don't know what, maybe the binary logs or something? Any ideas at all? It's extremely important that we can get this server back as the master ASAP but frankly I have no idea where to look and everything I have tried so far has only resulted in a temporary fix.</p>\n\n<p>Help! :)</p>\n"},{"tags":["php","mysql"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":54,"score":0,"question_id":13234878,"title":"Select the earliest record in a MySQL table","body":"<p>Please consider the following table structure (this is sample data, so please ignore the timestamps being identical):</p>\n\n<pre><code>+---------+---------+------------+-----------+\n| list_id | item_id | date_added | is_active |\n+---------+---------+------------+-----------+\n|    1    |     1   | 1352073600 |     1     |\n|    1    |     2   | 1372073600 |     1     |\n|    1    |     3   | 1332073600 |     1     |\n|    1    |     4   | 1302073600 |     1     |\n|    2    |     1   | 1302073600 |     1     |\n|    3    |     1   | 1302073600 |     1     |\n+---------+---------+------------+-----------+\n</code></pre>\n\n<p>Our client wishes to show how many lists were created on a certain day. The list is created when the first item is added, but the date is not explicitly stored, only the date the items have been added.</p>\n\n<p>My question is this:</p>\n\n<p>Using MySQL (and PHP for computing the timestamp), how can I return the number of lists that were created on a certain day. Essentially, the logic should be (pseudo-code):</p>\n\n<ul>\n<li>select total records from <code>tbl_list_items</code> where <code>date_added</code> >= min_age and <code>date_added</code> &lt;= max_age, and record is oldest for this list</li>\n</ul>\n\n<p>It is difficult to explain what I'm looking for, so consider the following actions:</p>\n\n<pre><code>No items added to lists yet (i.e. all lists have 0 items)\nUser added `item_id = 1` to `list_id = 1` yesterday.\nUser added `item_id = 2` to `list_id = 1` today.\nUser added `item_id = 1` to `list_id = 2` yesterday.\nUser added `item_id = 1` to `list_id = 3` yesterday.\nUser added `item_id = 2` to `list_id = 2` today.\n</code></pre>\n\n<p>If we wanted to look how many lists were created yesterday (or rather, how many lists had the first item added yesterday), I would like to return the total number where the item first added = yesterday. Given the action set above, this would return a total of 3 (i.e. <code>list_id = 1</code>, <code>list_id = 2</code> and <code>list_id = 3</code>).</p>\n"},{"tags":["php","mysql"],"answer_count":7,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":2134,"score":4,"question_id":4182843,"title":"How can I measure mysql time, the time and / or load of an sql query in php?","body":"<p>I need to find some measure of how long my queries are taking and the load on the server if possible.</p>\n\n<p>I doubt its possible, but I would like to gain the cpu usage too.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["mysql","performance","view","subquery","table-relationships"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13113411,"title":"Dissolve Nested Subqueries in View","body":"<p>First, I = MySQL.stupid, so please bear with me.</p>\n\n<p>I don't even come close to having the vocabulary to search this out, so apologies if this has already been covered.</p>\n\n<p>I've seen on many pages (older) that nested subqueries can degrade performance.  I'd like to avoid that.  Can anyone show me how to \"dissolve\" them properly into my view if possible?</p>\n\n<p>Please help.</p>\n\n<p>Many thanks in advance!</p>\n\n<pre><code>    CREATE VIEW database1.table1_output \nAS \n  SELECT table1.id                                  AS id, \n     table1.table1column1                       AS table1column1, \n     (SELECT COALESCE(Sum(table2column1), 0) \n      FROM   table2 \n      WHERE  table2column2 = 1 \n             AND table1_id = table1.id) - COALESCE(Sum( \n                                          Abs(table3.table3column1)), 0) \n                                                AS sum1, \n     (SELECT COALESCE(Count(table3column2), 0) \n      FROM   table3 \n      WHERE  ( table3column2 = table4.table4column1 \n                OR table4.table4column1 IS NULL ) \n             AND table1_id = table1.id) - (SELECT \n     COALESCE(Count(table3column2 \n              ), 0) \n                                           FROM   table3 \n                                           WHERE  table3column2 = \n                                                  -1 * table4.table4column1 \n                                                  AND table1_id = table1.id) \n     - COALESCE(Count(table3.table3column3), 0) AS sum2 \n  FROM   table4, \n     table3, \n     table1 \n  WHERE  table3.table1_id = table1.id \n     AND table4.id = table3.article_id \n  GROUP  BY table1.id \n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>I got rid of the low-hanging fruit, and now my problem is isolated to those three selects.  I'll probably change the title to reflect that; however, I have no idea what the problem is, so I can't even get started on terminology.</p>\n"},{"tags":["mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":33,"score":-2,"question_id":13235042,"title":"Changing order row in MySQL table","body":"<p>Is there any way to change the order of rows in a MySQL table?<br>\nI want to change the order what will be returned for the most basic query:</p>\n\n<pre><code>SELECT * FROM table\n</code></pre>\n\n<p>I have access just to the database. The query doesn't contain ORDER BY part.</p>\n"},{"tags":["php","mysql","sql","sql-injection"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13234068,"title":"PHP Mail sanitisation techniques","body":"<p>Im working on building my first contact form. </p>\n\n<p>I have a page similar to this with a lot of fields... \n<a href=\"http://www.missingpeople.org.uk/component/option,com_rsform/Itemid,144/lang,en/view,rsform/\" rel=\"nofollow\">http://www.missingpeople.org.uk/component/option,com_rsform/Itemid,144/lang,en/view,rsform/</a></p>\n\n<p>The form, when submitted then redirects to my process page that contains...</p>\n\n<pre><code>&lt;?php\n\nforeach ($_POST as $key =&gt; $value)\n$message .= \"Field \".htmlspecialchars($key).\" is \".htmlspecialchars($value).\"\\r\\n\";\n\nmail('liam@site.co.uk', 'sghting', $message); \n\n?&gt;\n</code></pre>\n\n<p>From what I've been reading on the process though this seems vulnerable to injections? sorry if this sounds naive im new to the process. What Im asking is where do i start in reading up on sanitizing this code? </p>\n"},{"tags":["mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13234940,"title":"can not insert big data to mysql database","body":"<p>I am trying to save big data to database I extend the max_allow_packet and post_size but nothing happened.</p>\n\n<p>the code and database released to production server and to stage server on production server is ok but on stage server not ok.</p>\n\n<p>I think the problem not in code or database because they are the same on prod. and stage</p>\n\n<p>so the problem will be in php conf, mysql conf or apache.</p>\n"},{"tags":["php","mysql"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13234108,"title":"PHP insert script for past amount of days","body":"<p>I need to populate a table with a row for each day over the past 5 years? </p>\n\n<pre><code>E.g\n1. 04/11/2012\n2. 03/11/2012\n3. 02/11/2012\n4. 01/11/2012\n5. 31/10/2012\n6. etc\n</code></pre>\n\n<p>This will just be a php script that I run once and inserts all of the records. </p>\n\n<p>The reason for doing this is for performance testing my other code with enough data in the database. </p>\n"},{"tags":["mysql","table-rename"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13234862,"title":"mysql rename table to new database","body":"<p>hope you can help with this one...  I'm looking to archive a large amount of data (250m rows), and leave just the most recent 3 months worth of data.  I've got the old data moved to another server right now and I'm looking to remove it from the live table and leave just the 3 months data I want to keep.</p>\n\n<p>After checking some other posts I decided the best way to do would be to extract out the 3 months that I want to keep, import the extract to a new database, drop the old table and then use <code>rename table</code> to move the new table back into the live database.  I tested this and it worked fine.</p>\n\n<p>The issue I'm having is, when I did the last test today before deploying this to live tomorrow morning the table left the new database, but didn't go back into the original database.  The IBD file for the table still existed in the old database, but the table didn't show and if I tried to create a table with the same name it said the table already existed.  Any ideas?</p>\n\n<p>I didn't get a note of the message that came up when renamed the table, I'm retrying it now so I'll update after that with the error message that was displayed.</p>\n\n<p>Hope you can help.</p>\n\n<p>Alex</p>\n"},{"tags":["mysql","union"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13234629,"title":"How to tell which query is the data fetched from in a MySQL statement with UNION","body":"<p>the table</p>\n\n<pre><code>id    string\n------------\n1     aaa\n2     bbb\n3     ccc\n4     ddd\n</code></pre>\n\n<p>the query</p>\n\n<pre><code>(SELECT string FROM table WHERE id &gt; 1 ORDER BY id ASC LIMIT 1)    /* num_row = 1 */\nUNION\n(SELECT string FROM table WHERE id &lt; 1 ORDER BY id DESC LIMIT 1)   /* null */\nUNION\n(SELECT string FROM table WHERE id &gt; 4 ORDER BY id ASC LIMIT 1)    /* null */\nUNION\n(SELECT string FROM table WHERE id &lt; 4 ORDER BY id DESC LIMIT 1)   /* num_row = 2 */\n</code></pre>\n\n<p>The query above will return <code>2 rows</code> since there are no id=5 and id=0.</p>\n\n<p>How can I tell which queries are these 2 rows fetched from?</p>\n\n<p>that is, <code>num_row = 1</code> from <code>1st SELECT</code>, and <code>num_row = 2</code> from <code>4th SELECT</code></p>\n"},{"tags":["mysql","sql","database","query"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":39,"score":0,"question_id":13233649,"title":"MySQL: Impossible WHERE noticed after reading const table","body":"<p>A very simple query always returns an empty result set, after running EXPLAIN, this is what I got:</p>\n\n<pre><code>EXPLAIN SELECT u.id, fname\nFROM user u\nWHERE (birthdate\nBETWEEN \"1992-04-05\"\nAND \"1990-04-05\")\nLIMIT 0,20\n</code></pre>\n\n<p>No matter, if I turn birthdays arround (1990-1992), it's the same... </p>\n\n<pre><code>id  select_type table   type    possible_keys   key key_len ref rows    Extra\n1   SIMPLE  NULL    NULL    NULL    NULL    NULL    NULL    NULL    Impossible WHERE noticed after reading const table...\n</code></pre>\n\n<p>What does this error say? I only found other issues on SO where people tried to join tables, but this query is so simple, what is the matter with it? Any ideas would be highly appreciated, thank you already!</p>\n"},{"tags":["php","mysql","twitter","twitter-api"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13228197,"title":"Twitter API User Lookup 1000 users","body":"<p>I'm trying to fetch 1000+ Twitter users from my database using <a href=\"http://api.twitter.com/1/users/lookup.format\" rel=\"nofollow\">this API call</a>. However, Twitter lookup only allows 100 users per call, so how can I do it with 10 calls?</p>\n\n<p>If I have 2232 users in my DB and I want to do a lookup on all users and get their details how to do it? Something which will count all the users being searched, break it into array of 100 elements, make the call for 100, and add the response back to database and then move onto the next 100.</p>\n\n<p>I am using the <code>tmhOAuth</code> library for Twitter.</p>\n\n<p>EDITED:\nI was able to accomplish it using this code , but my next question is how can i bind those values back to my account ? because the screen_name is a entry and not the KEY of the array, so how can i do it ? </p>\n\n<pre><code>    $accounts = $this-&gt;accounts-&gt;getAll();\n    $accounts_chunk = array_chunk($accounts,100);\n    foreach($accounts_chunk as $accounts){\n        $screen_names = \"\";\n        $last_key = end(array_keys($accounts));\n        foreach($accounts as $k =&gt; $account){\n            $screen_names .= $account-&gt;screen_name;\n            if($last_key == $k){\n                $screen_names .= \"\";\n            } else {\n                $screen_names .= \",\";\n            }          \n        }\n            $code = $this-&gt;twitter-&gt;request('GET', $this-&gt;twitter-&gt;url(\"1/users/lookup\"),array('screen_name' =&gt; $screen_names));\n            echo \"&lt;pre&gt;\";print_r(json_decode($this-&gt;twitter-&gt;response));echo \"&lt;/pre&gt;\";\n    }\n</code></pre>\n\n<p>But how to update values in DB using this .. i did a check but the sequence of the responses always changes so cannot use the current keys .. </p>\n"},{"tags":["mysql","sql","select"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":52,"score":2,"question_id":13232649,"title":"Join multiple tables","body":"<p>I have 3 tables. First one is a list of personnel:\n<p>Table <code>Personnel<pre><code>Id_personnel         Name\n1                    John\n2                    Alice\n3                    Tom\n4                    Charles\n5                    Ben</code></pre></p>\n\n<p>Table <code>Department</code></p>\n\n<pre><code>Id_personnel         Department\n1                    Department 1\n2                    Department 2\n3                    Department 3\n4                    Department 4\n5                    Department 5\n</code></pre>\n\n<p>and table with medical leave:</p>\n\n<p>Table <code>Medical</code></p>\n\n<pre><code>Id_personnel         Start_date         End_date\n1                    2012-08-02         2012-08-05\n2                    2012-08-02         2012-08-15\n3                    2012-10-04         2012-10-06\n4                    2012-10-04         2012-10-06\n5                    2012-09-20         2012-09-21\n</code></pre>\n\n<p>For a given date (let's say 2012-10-05) I want to have something like</p>\n\n<pre><code>Department 1                    John\nDepartment 2                    Alice\nDepartment 3                    Tom             2012-10-04         2012-10-06\nDepartment 4                    Charles         2012-10-04         2012-10-06\nDepartment 5                    Ben\n</code></pre>\n\n<p>Using INNER JOIN I am able to get only those sick. I have something like this:</p>\n\n<pre><code>    SELECT a.Name, b.Department, c.Start_date, c.End_date FROM Personnel a\n      INNER JOIN Department b ON a.Id_personnel = b.Id_personnel\n      INNER JOIN Medical c ON a.Id_personnel = c.Id_personnel\n   WHERE c.Start_date &lt;= 2012-10-05  AND c.End_date &gt;= 2012-10-05\n</code></pre>\n\n<p>And the obvious wrong result is:</p>\n\n<pre>Department 3                    Tom             2012-10-04         2012-10-06\nDepartment 4                    Charles         2012-10-04         2012-10-06\n</code></pre>\n"},{"tags":["php","jquery","mysql","div","multiple"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":69,"score":3,"question_id":13233848,"title":"jQuery updateing multiple #divs, one mysql_query","body":"<p>A bit complicated, but ill do my best to explain my question.</p>\n\n<p>I have a main file, dashboard.html.\nWithin that I have a jQuery function to load the mysql_query every 15sec to get the 15 or so variables that I need. (This is a financial/sales webapp...the sales agents want near realtime updates of the sales, orders, $earned..etc) which are displayed in a #div with multiple listitems contained within. No issues with this with the approach that every 15sec, query, then entire div is updated all at once. Because of this I have not attached an Jquery effect (namely fadeIn/fadeOut) to it, as then the entire div is constantly fading. Not the visual effect I would like, but as it stands, it works.</p>\n\n<p>My Goal: To be able to do the mysql_query every 15sec. Grab the variables (which Im already doing currently. But now, I would like to be able to update ONLY the ListItem that has changed and attach the fade effect to just that item, not the entire #div as a whole. </p>\n\n<p>What Im trying to avoid is separating out the query to 15 separate querys, as that obviously that is not efficient.</p>\n\n<p>Hopefully that makes some sense to everyone. Code can be provided, but I dont think it will help at this point .. I need to understand what approach I need to go to develop the correct code. Thanks everyone for your anticipated help.</p>\n\n<p>EDIT: Im adding a bit of code to help clarify where I stand:\ndashboard.html</p>\n\n<pre><code>var auto_refresh = setInterval(function (){\n$('#order_jq').load('stats_count.php')\n}, 15000); // refresh every 15 seconds\n</code></pre>\n\n<p>and then in the body:</p>\n\n<pre><code>&lt;div class=\"span8\"&gt;\n&lt;div id=\"order_jq\" class=\"centerContent\"&gt;\nPatiently loading stats ...\n&lt;/div&gt;&lt;!-- End id=\"ortder_jq --&gt;\n&lt;/div&gt;&lt;!-- End .span8 --&gt;\n</code></pre>\n\n<p>stats_count.php consists of (stripped down for clarity)</p>\n\n<pre><code>&lt;?php\nrequire \"database/connect2.php\";\n$result = mysql_query( \"SELECT .... NORMAL QUERY...NOTHING FANCY HERE\")\nwhile ($row = mysql_fetch_array($result))\n{$orders = number_format($row['ordercount']);\n$annual_order = number_format($row['annual_order']);\n}\n</code></pre>\n\n<p>and lastly contained within stats_count.php I also include the list items:</p>\n\n<pre><code>&lt;ul class=\"bigBtnIcon\"&gt;\n    &lt;li&gt;\n      &lt;a href=\"#\"&gt;\n        &lt;span class=\"icon entypo-icon-phone\"&gt;&lt;/span&gt;\n        &lt;span class=\"txt\"&gt;Orders&lt;/span&gt;\n        &lt;span class=\"notification\"&gt;&lt;?php echo $orders?&gt;&lt;/span&gt;\n      &lt;/a&gt;\n     &lt;/li&gt;\n      &lt;li&gt;\n        &lt;a href=\"#\"&gt;\n          &lt;span class=\"icon brocco-icon-mic\"&gt;&lt;/span&gt;\n          &lt;span class=\"txt\"&gt;Auburn&lt;/span&gt;\n          &lt;span class=\"notification blue\"&gt;&lt;?php echo $annual_order ?&gt;&lt;/span&gt;\n        &lt;/a&gt;\n      &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>-D</p>\n"},{"tags":["php","mysql","parameters","pdo"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":27,"score":3,"question_id":13234307,"title":"How to correctly make a PDO statement with PHP variables as parameters?","body":"<p>I currently have the following code:</p>\n\n<pre><code>$dbh = new PDO('mysql:host='.DATABASE_HOST.';dbname='.DATABASE_NAME, DATABASE_USER, DATABASE_PASSWORD);\n$dbh-&gt;setAttribute(PDO::ATTR_EMULATE_PREPARES, false);\n\n$dbh-&gt;prepare(\"INSERT INTO mdr_contacts SET fkRelatieId = 0, reseller = 0, code = :code, naam = :naam\");\n$dbh-&gt;execute(array(\":code\" =&gt; $contact[\"contact_id\"],\":naam\" =&gt; $name));\n</code></pre>\n\n<p>However this seems to fail: <code>Fatal error: Call to undefined method PDO::execute() in file.php on line 67</code></p>\n\n<p>What i've done so far to make this work:</p>\n\n<ol>\n<li>Checked if <code>$name</code> and <code>$contact</code> exists and has the right value.</li>\n<li>Executed a SELECT query before the prepare statement to make sure that PDO works.</li>\n<li>Runned the code without ATTR_EMULATE_PREPARES set to false.</li>\n</ol>\n\n<p>But none of this works, can anyone set me in the right direction?</p>\n"},{"tags":["mysql","desktop-application"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13233925,"title":"MySQL Desktop Based Administration","body":"<p>I am making a MySQL based database for a professor and she would like to have a version uploaded to the web and a version on her desktop for personal use. The web version would be \"official\" whereas the one on her desktop would be used for personal research and would have additional categories, etc. The two databases do not have to be linked but I was unsure if it would be easier to put both databases on the web and make her personal one password protected or if there was a good desktop based program. She is not very tech-savvy which is why I was leaning away from having her install MySQL and Apache on her own desktop. </p>\n\n<p>Any help would be appreciated.</p>\n\n<p>Thank you</p>\n"},{"tags":["php","mysql","orm","doctrine","doctrine-query"],"answer_count":5,"favorite_count":1,"up_vote_count":17,"down_vote_count":0,"view_count":11150,"score":17,"question_id":2095394,"title":"Doctrine - How to print out the real sql, not just the prepared statment?","body":"<p>We're using Doctrine, a PHP ORM. I am creating a query like this:</p>\n\n<pre><code>$q = Doctrine_Query::create()-&gt;select('id')-&gt;from('MyTable');\n</code></pre>\n\n<p>and then in the function I'm adding in various where clauses and things as appropriate, like this</p>\n\n<pre><code>$q-&gt;where('normalisedname = ? OR name = ?', array($string, $originalString));\n</code></pre>\n\n<p>Later on, before <code>execute()</code>-ing that query object, I want to print out the raw SQL in order to examine it, and do this:</p>\n\n<pre><code>$q-&gt;getSQLQuery();\n</code></pre>\n\n<p>However that only prints out the prepared statement, not the full query. I want to see what it is sending to the MySQL, but instead it is printing out a prepared statement, including <code>?</code>'s. Is there some way to see the 'full' query?</p>\n"},{"tags":["java","mysql","java-ee","jndi","connection-pooling"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":25,"score":-1,"question_id":13232809,"title":"Apache dbcp exception in recursion","body":"<p>I'm getting error like:</p>\n\n<pre><code>com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure\n\nThe last packet successfully received from the server was 8,374,094 milliseconds ago.  The last packet sent successfully to the server was 8,374,094 milliseconds ago.\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)\n    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)\n    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)\n    at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3364)\n    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1983)\n    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)\n    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2624)\n    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2127)\n    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2293)\n    at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)\n    at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)\n    at com.mycode.MyLoginDAO.validateUser(MycodeDAO.java:517)\n    at com.mycode.MyLoginFB.validate(MycodeFB.java:85)\n    at org.apache.struts.chain.commands.servlet.ValidateActionForm.validate(ValidateActionForm.java:58)\n    at org.apache.struts.chain.commands.AbstractValidateActionForm.execute(AbstractValidateActionForm.java:120)\n    at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)\n    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\n    at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)\n    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)\n    at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)\n    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)\n    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\n    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:200)\n    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)\n    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:775)\n    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:704)\n    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:897)\n    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\n    at java.lang.Thread.run(Thread.java:662)\nCaused by: java.net.SocketException: Broken pipe\n    at java.net.SocketOutputStream.socketWrite0(Native Method)\n    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)\n    at java.net.SocketOutputStream.write(SocketOutputStream.java:136)\n    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\n    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)\n    at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3345)\n    ... 35 more\n</code></pre>\n\n<p>when I used below code for long time or sending request to server n No.of times.</p>\n\n<p>I Configured my application with Apache dbcp on My-sql using below context.xml</p>\n\n<p>context.xml:</p>\n\n<pre><code>&lt;Resource name=\"jdbc/MYDB\" auth=\"Container\" type=\"javax.sql.DataSource\" \n        maxActive=\"100\" maxIdle=\"10\" maxWait=\"10000\" username=\"root\" password=\"12345\" \n        driverClassName=\"com.mysql.jdbc.Driver\" url=\"jdbc:mysql://localhost:3306/egDB\" \n        removeAbandoned=\"true\" removeAbandonedTimeout=\"1000\"/&gt;\n</code></pre>\n\n<p>From this DBConnection Singleton class returning connection to all calling methods in their classes and .jsp files</p>\n\n<p>DBConnection class:</p>\n\n<pre><code>package my.code;\n\nimport java.io.Serializable;\nimport java.sql.Connection;\nimport java.sql.SQLException;\n\nimport javax.naming.Context;\nimport javax.naming.InitialContext;\nimport javax.naming.NamingException;\nimport javax.sql.DataSource;\n\npublic class DBConnection implements Serializable {\n\n    private static final long serialVersionUID = 1565029633902701330L;\n    private static DBConnection dbConnection;\n    private DataSource dataSource;\n    private Connection connObj;\n    private Context initContext;\n\n    private DBConnection() {\n\n    }\n\n    public static Connection getDBConnection() {\n        if (dbConnection == null) {\n            dbConnection = new DBConnection();\n        }\n\n        Connection connectionObj = dbConnection.getConnection(dbConnection\n                .getDataSource());\n        try {\n            while (connectionObj == null || connectionObj.isClosed())\n                connectionObj = dbConnection.getConnection(dbConnection\n                        .getDataSource());\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n\n            return connectionObj;\n    }\n\n    private Connection getConnection(DataSource ds) {\n        try {\n            connObj = ds.getConnection();\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n        return connObj;\n    }\n\n    private DataSource getDataSource() {\n        if (dataSource == null) {\n            try {\n                initContext = dbConnection.getContext();\n                Context envContext = (Context) initContext\n                        .lookup(\"java:/comp/env\");\n                dataSource = (DataSource) envContext.lookup(\"jdbc/NichehireDB\");\n            } catch (NamingException e) {\n                e.printStackTrace();\n            }\n        }\n        return dataSource;\n    }\n\n    private Context getContext() {\n        if (initContext == null) {\n            try {\n                initContext = new InitialContext();\n            } catch (NamingException e) {\n                e.printStackTrace();\n            }\n        }\n        return initContext;\n    }\n}\n</code></pre>\n\n<p>Using Connection in DAO/DTO classes or jsp files:</p>\n\n<pre><code>package my.code;\n\nimport java.io.Serializable;\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.Vector;\n\npublic class MycodeDAO implements Serializable {\n\n    private static final long serialVersionUID = 7146087855230830066L;\n\n    private String jobTitle;\n    private String jobDesc;\n\n\n\n    public String getJobTitle() {\n        return jobTitle;\n    }\n\n    public String getJobDesc() {\n        return jobDesc;\n    }\n\n    public MycodeDAO() {\n\n    }\n\n    public MycodeDAO(String jobTitle, String jobDesc) {\n\n        super();\n        this.jobTitle = jobTitle;\n        this.jobDesc = jobDesc;\n\n    }\n\n    public Vector&lt;MycodeDAO&gt; getSavedJobs(String js_email_id) {\n\n        Vector&lt;MycodeDAO&gt; savedJobsVector = new Vector&lt;MycodeDAO&gt;();\n\n        Connection connObj = DBConnection.getDBConnection();\n        PreparedStatement pstmtObj = null;\n        ResultSet rsObj = null;\n        PreparedStatement appliedPstmtObj = null;\n        ResultSet appliedRSObj = null;\n\n        try {\n            pstmtObj = connObj\n                    .prepareStatement(\n                            \"select * from jobs where jobid = ?\",\n                            ResultSet.TYPE_SCROLL_SENSITIVE,\n                            ResultSet.CONCUR_UPDATABLE);\n            pstmtObj.setInt(1, 102);\n            rsObj = pstmtObj.executeQuery();\n\n            while (rsObj.next()) {\n\n                jobTitle = rsObj.getString(\"jobTitle\");\n                jobDesc = rsObj.getString(\"jobShortDesc\");\n\n\n\n                savedJobsVector.add(new MycodeDAO(jobTitle, jobDesc));\n            }\n\n        } catch (SQLException e) {\n\n            e.printStackTrace();\n        } finally {\n\n            if (connObj != null) {\n                try {\n                    if (!connObj.isClosed()) {\n                        connObj.close();\n                    }\n                } catch (SQLException e) {\n                    e.printStackTrace();\n                }\n            }\n            System.gc();\n        }\n        System.out.println(\"savedjobVector size:\\t\" + savedJobsVector.size());\n\n        return savedJobsVector;\n    }\n}\n</code></pre>\n\n<p>Like above I had so many dao,dto and jsp classes. In different classes its raising the error.\nWhen I refresh the .jsp pages which contains dao/dto code, server going down saying 5xx error and when I look into log file its saying Max active sql connections are used.</p>\n\n<p>Please let me know where I went wrong. Please do the needful to resolve this exception.\nNote: MySQL max connections: 350</p>\n"},{"tags":["php","mysql","subquery","sum","rollup"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":13151235,"title":"MySQL Sum(Total) and Sum(User) with ROLLUP","body":"<p>I am having a little bit of trouble with a complex MySQL Query. I am trying to get 3 columns from this query. The name of the Procedure, the Site Total of each procedure, and the Physician Total (user total) for each procedure. I am linking 2 tables, <code>procedures</code> and <code>tbl_syn_procedure</code>.</p>\n\n<p>There is just one condition that will get my the Physician Total (user total) and that is <code>procedures.phys_id = '##'</code>, but I am not sure how to incorporate this into the query. </p>\n\n<p>I currently have a large query that gives me half of the data that I need.</p>\n\n<pre><code>SELECT  \n  IFNULL( Synoptic, 'Total Count') AS Synoptic, Total\nFROM ( \nSELECT  \n  Synoptic, \n  SUM( Data ) AS Total\nFROM ( \n      SELECT \n        tbl_syn_procedure.name AS 'Synoptic',\n        COUNT(*) AS Data\n        FROM procedures \n        JOIN tbl_syn_procedure ON \n        procedures.proc_synoptic_id = tbl_syn_procedure.name_id \n        GROUP BY procedures.proc_synoptic_id \n     ) AS stats \n  GROUP BY Synoptic WITH ROLLUP\n) AS stats\n</code></pre>\n\n<p>This gives me a two column table that looks like this:</p>\n\n<blockquote>\n  <p>Synoptic  -------------------------- Total</p>\n  \n  <p>APBI Device Insertion ---------- 1328</p>\n  \n  <p>MRI Guided Biopsy ------------- 71</p>\n  \n  <p>Stereotactic Biopsy ------------- 10504</p>\n  \n  <p>Total Count ---------------------- 11903</p>\n</blockquote>\n\n<p>But as you can see it is missing the Physician Total (user total). If anyone could give me some advice on how to add this third column into the query.</p>\n"},{"tags":["mysql","sql","query"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13233325,"title":"Get the ID for range with smallest difference","body":"<p>Lets say that I have a table A. This table has ID, X_value, Y_value. Here is content of table A:</p>\n\n<p>Table A</p>\n\n<pre><code>ID X_value Y_value\n1  100     150\n2  110     170\n3  120     190\n</code></pre>\n\n<p>Now, if I'm comparing number <strong>130</strong> with range numbers(X_value - Y_value) I would like to get ID of range with smallest(minimal) difference! If I can name it that way? Right away we see that number <strong>130</strong> will fall into all this ranges, but I need ID of range with smallest(minimal) difference between <strong>130</strong> and numbers of range. To elaborate that difference:</p>\n\n<pre><code>For range 1: 130-100=30 and 150-130=20\nFor range 2: 130-110=20 and 170-130=40\nFor range 3: 130-120=10 and 190-130=60\n</code></pre>\n\n<p>From this elaboration we see that minimal difference is at third range(that is <strong>10</strong>) so I would like to get ID <strong>3</strong>. What will be a query for this example if I have this table within MySQL db?! </p>\n"},{"tags":["php","mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":26,"score":-2,"question_id":13233519,"title":"cheking log in page not working","body":"<p>I use these following codes for checking username and password in website but it seems it won't connect to database and this site is in the server :</p>\n\n<pre><code>    &lt;?php\n\n   mysql_connect(\"localhost\",\"user\",\"pass\");\n   mysql_select_db(\"user\");\n   $res2 = mysql_query(\"select * from joinuser where username='$_POST[username]' and pass='$_POST[pass]' and status='on'\");\n   $res = mysql_query(\"select * from joinuser where username='$_POST[username]' and pass='$_POST[pass]' and status='on'\");\n   $row=mysql_fetch_row($res2);\n    if(mysql_fetch_assoc($res))\n   {\n       header(\"location: $row[4].php\");\n\n       }\n\n\n    else\n    {\n        header(\"location: login.php?error\");\n        }   \n\n?&gt;\n</code></pre>\n\n<p>It should go to <code>$row[4].php</code> but it only stay at this page.\nIt seems it won't connect to databse.</p>\n"},{"tags":["php","mysql","doctrine2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13229753,"title":"Doctrine2 query error in OneToMany relation","body":"<p>I've got a doctrine2 problem with a MySQL database:</p>\n\n<p>I have a model <code>User</code> and a model <code>Documents</code>. Each <code>User</code> may have 0 or n <code>Documents</code>. Each <code>Document</code> is assigned to exactly one <code>User</code>. My models:</p>\n\n<p><strong>User</strong></p>\n\n<pre><code>&lt;?php\n\nnamespace Entity;\n\n/**\n* @Entity(repositoryClass=\"Entity\\Repository\\UserRepository\")\n* @Table(name=\"user\")\n*/\nclass User extends Object\n{\n    /**\n    * @Id @GeneratedValue(strategy=\"UUID\")\n    * @Column(type=\"string\", length=36)\n    * @var string\n    */\n    protected $id;\n\n    /**\n    * @OneToMany(targetEntity=\"\\Entity\\Document\", mappedBy=\"user\")\n    */\n    private $documents;\n\n    public function __construct($options = array())\n    {\n        $this-&gt;documents = new \\Doctrine\\Common\\Collections\\ArrayCollection;\n    }\n}\n</code></pre>\n\n<p><strong>Document</strong></p>\n\n<pre><code>&lt;?php\n\nnamespace Entity;\n\n/**\n* @Entity(repositoryClass=\"Entity\\Repository\\DocumentRepository\")\n* @Table(name=\"document\")\n*/\nclass Document extends Object\n{\n    /**\n    * @Id @Column(type=\"string\")\n    * @var string\n    */\n    protected $id;\n\n    /**\n    * @ManyToOne(targetEntity=\"\\Entity\\User\", inversedBy=\"documents\")\n    * @JoinColumn(name=\"user_id\", referencedColumnName=\"id\")\n    * @var User\n    */\n    private $user;\n}\n</code></pre>\n\n<p>Now I want to get the <code>User</code> of a given <code>Document</code> ID. The SQL-query would be:</p>\n\n<pre><code>SELECT u.*\nFROM `user` u\nINNER JOIN `document` d ON d.user_id = u.id\nWHERE d.id = 'mydocumentid'\n</code></pre>\n\n<p>But this does't work:</p>\n\n<pre><code>$user = $queryBuilder\n        -&gt;select('u.*')\n        -&gt;from('\\\\Entity\\\\User', 'u')\n        -&gt;innerJoin('\\\\Entity\\\\Document', 'd', \\Doctrine\\ORM\\Query\\Expr\\Join::ON, 'd.user_id = u.id')\n        -&gt;where('d.id = :documentId')\n        -&gt;setParameter('documentId', 'mydocumentid')\n        -&gt;setMaxResults(1)\n        -&gt;getQuery()\n        -&gt;getSingleResult();\n</code></pre>\n\n<p>Also the direct query doesn't work:</p>\n\n<pre><code>$query = $em-&gt;createQuery('\n    SELECT\n        u.*\n    FROM\n        Entity\\\\User u\n    INNER JOIN\n        Entity\\\\Document d ON d.user_id = u.id\n    WHERE\n        d.id = \"mydocumentid\"\n');\n</code></pre>\n\n<p>Could you please help me to get this run?</p>\n\n<p><strong>Error message</strong></p>\n\n<pre><code>[Semantical Error] line 0, col 66 near 'd ON d.user_id': Error: Identification Variable \\Entity\\Document used in join path expression but was not defined before.\n</code></pre>\n"},{"tags":["php","mysql","image","blob","mime"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13225726,"title":"I need my PHP page to show my BLOB image from mysql database","body":"<p>So my last question was on how to have my techID shown from a search :</p>\n\n<p><a href=\"http://stackoverflow.com/questions/13216866/i-am-trying-to-have-my-details-page-to-reference-two-seperate-parts-of-my-serv\">I am trying to have my &quot;Details&quot; page to reference two seperate parts of my server that are linked via techID</a></p>\n\n<p>My new question is still on this page. I have added in an echo image as well. but am having trouble using <code>Blob</code> and having it display my image and not binary JPEG data.\nI've been trying to find another instance of this but cannot find any that fix my error.</p>\n\n<pre><code>//Header ('Content-type: image/jpeg')\necho \"&lt;dt&gt;&lt;strong&gt;Technician Image:&lt;/strong&gt;&lt;/dt&gt;&lt;dd&gt;\" . '&lt;img src='.$row2['image'].' width=\"290\" height=\"290\"&gt;' . \"&lt;/dd&gt;\";\n</code></pre>\n\n<p>and </p>\n\n<pre><code>$query_Recordset2 = \"SELECT * FROM technician WHERE techID=\" . $row1[\"techID\"] ;\n$Rs2 = mysql_query($query_Recordset2) or die(mysql_error());\n</code></pre>\n\n<p>Are the only changes I have put in so far from my last question (obviously including the fix I was given that worked).</p>\n\n<p>What I do not understand is where and how to put <code>'Content-type: image/jpeg'</code> to have my page recognize the image being linked is it's MIME TYPE <code>image/jpeg</code>.</p>\n\n<p>What I am seeing on my page is this</p>\n\n<blockquote>\n  <p>Technician Image:\n  �E��j��i`=7f$D��o\"�������b���Ckkc��R��^M�;n~��0&amp;m)J��R��E)JDR��E)JDR��E)JDR��E)JDR��E)JDR��E)JDSjR��)���+��N��.R,u����i��n9,���QX~\n  ����{(����̮�:���2�12��\"��aV7�6���{���LP[�W�����گ� R$+�\n  ��LMc'hM�5�o�PA����|���ګ���.8��E��ģ��Rn\n  ��1�[��{��3>�rY��X�ۜ;<em>�Ǖ����u���z��'�vf</em>�N葟\n  ��z�Q�����k��3���O��ܨ�ۀ�?S�<em>��,N</em>�    �����[{+D�\n  �;�'�$�$�&amp;�iJR��)JR��)JR��)JR��)JR��)JR��)JR��)JR��)JR��)JR��)JR��)JR��)��\n  width=\"290\" height=\"290\"></p>\n</blockquote>\n\n<p>Obviously I have deleted a middle chunk so it's not massive. there is a little \"Broken image\" box that appears infront and when I right click and choose \"Open image in new window\" the URL it puts in is simply <code>Content-type:</code> or I get a forbidden access page with the url <code>http://      localhost/Sim5Server/Pages/%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%10JFIF%EF%BF%BD%01%02%EF%BF%BD%EF%BF%BDd%EF%BF%BDd%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BDC%EF%BF%BD</code></p>\n\n<p>I have put a space in that url since it is not a link for the internet.</p>\n\n<p>I have only used normal BLOB type as I just need it as a small less than 64Kb image</p>\n"},{"tags":["mysql","apache","vtiger"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":11,"score":-1,"question_id":13231874,"title":"How to take Vtiger 5.0.3 Backup?","body":"<p>I am using Vtiger 5.0.3, in which i am unable to take the backup file of the same.</p>\n\n<p>Can anyone help me out in this.</p>\n"},{"tags":["c#","asp.net","mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13232127,"title":"C#: How to insert multiple param dynamically in Insert Statement in MySQL","body":"<p>In My scenario, I want to insert the sql statements having 15 columns data.Is any other way to  handle the parameter for insert statements?</p>\n\n<pre><code>    public bool GetCustomersList(ref DataSet dataset, String x, String y, string z, string x1, string y1, string z1 )\n    {\n        MySqlConnection SQLConn = GetConnection();\n        try\n        {\n            string get_records;\n            if (SQLConn.State == ConnectionState.Closed)\n            {\n                SQLConn.Open();\n            }\n            if (searchtype == \"x\")\n            {\n                get_records = \"INSERT into table values(x, y,z,x1,y1,z1);\n            }\n            MySqlCommand command = new MySqlCommand(get_records, SQLConn);\n            MySqlDataAdapter mySqlAdapter = new MySqlDataAdapter(command);\n            mySqlAdapter.Fill(dataset);\n\n            if (SQLConn.State == ConnectionState.Open)\n            {\n                SQLConn.Close();\n            }\n            return true;\n        }\n        catch (Exception )\n        {\n            if (SQLConn.State == ConnectionState.Open)\n            {\n                SQLConn.Close();\n            }\n            return false;\n        }\n    }\n</code></pre>\n\n<p>Here the parameter may be extended to 15 or more?How to handle this situation in asp.net?</p>\n"},{"tags":["php","mysql","session","symfony-1.4","session-state"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13233151,"title":"Saving last SQL query state in PHP","body":"<p>For a two-player game, I need to send updated data to player every 30 seconds.</p>\n\n<p>I have a table (ideally 4 tables) from where I need to select data and sent to user once he/she login. Since it is multi-player interaction game, data needs to be sync every 30-60 seconds.</p>\n\n<p>My problem is, I've a very heavy query to run every 30-60 seconds. So ideally, I should send only updated and new rows to the player during sync (Its also a front end requirement for IPhone/Android game, app don't want whole data during every sync operation).</p>\n\n<p>I went through <a href=\"http://stackoverflow.com/questions/2723839/mysql-difference-of-two-result-sets\">MySQL: difference of two result sets</a> and hope I'll get only updated/new records through SQL but problem is, how do I save result of last query.</p>\n\n<p>Even if I save first result in Session (probably not recommended) that record will be useless as soon as new row inserted or updated. Updating session record again will definitely put lot of pressure on the server.</p>\n\n<p>Can someone please suggest the best way to achieve this requirement; Not detailed solution, just some hint/link will be sufficient.</p>\n"},{"tags":["mysql","query"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13232681,"title":"Assistance with a regular expression mysql query","body":"<p>I have a database column with data that looks like  <strong>file_name|||file_id|||field_id</strong>  I would like to run a query to replace the data with just the <strong>file_id</strong>.</p>\n\n<p>So, my query, in essence needs to parse out the file_id between the pipes, and then update the field to replace the full string with just the file id.</p>\n"},{"tags":["mysql","batch","updates"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13232581,"title":"PHP/MYSQL: batch update multiple values","body":"<p>I have figured out how to do a batch update when the value is the same for each record using:</p>\n\n<pre><code>UPDATE tbl SET col1='foo1' WHERE id IN (1,2,3)\n</code></pre>\n\n<p>If I have a comma delimited string of values, that match up to the ids, can I do a batch update that updates the values differently as in</p>\n\n<pre><code>UPDATE tbl SET col1='1,0,1' WHERE id IN (1,2,3)\n</code></pre>\n\n<p>Thanks for suggestions:</p>\n\n<p>Edit:</p>\n\n<p>The html page that sends the data to this query consists of checkboxes as follows:</p>\n\n<pre><code>&lt;input type=\"checkbox\" name=\"id[]\" value=\"1\"&gt;&lt;input type=\"hidden\" name=\"col1[]\" value=0&gt; \n&lt;input type=\"checkbox\" name=\"id[]\" value=\"2\"&gt;&lt;input type=\"hidden\" name=\"col1[]\" value=1&gt;\n&lt;input type=\"checkbox\" name=\"id[]\" value=\"3\"&gt;&lt;input type=\"hidden\" name=\"col1[]\" value=0&gt;\n</code></pre>\n\n<p>etc. up to 20 boxes.</p>\n\n<p>On the server side, the posted arrays are converted to comma delimited strings using implode so I end up with the two strings, 1,0,1 for the values and 1,2,3 for the ids.  But the user could check up to 20 boxes from this page.  Maybe I have to manipulate the arrays somehow.  Note in the real example, the ids are not 1,2,3, but could be something like 221, 433, 512, 600 etc., depending on what user checks</p>\n"},{"tags":["php","mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":36,"score":-6,"question_id":13232928,"title":"sign up page doesn't work","body":"<p>I created sign up page with php. after clicking it should connect to the other page with named : <code>data</code> which has <a href=\"http://www.mysite.com/data\" rel=\"nofollow\">http://www.mysite.com/data</a> after clicking on sign up button with this following code : </p>\n\n<pre><code>&lt;form action=\"http://www.mysite.com/data\" method=\"post\" enctype=\"multipart/form-data\" name=\"form1\" id=\"form1\"&gt;\n</code></pre>\n\n<p>And now you can see the data page codes :</p>\n\n<pre><code> &lt;?php\n //conection userinfo\n $code = rand(11111,99999);\n$link1 = mysql_connect(\"localhost\",\"username\",\"password\");\n mysql_select_db(\"username\");\n mysql_query(\"SET character_set_results= 'utf8' , character_set_client = 'utf8' , character_set_connection = 'utf8',\n character_set_database ='utf8', character_set_server = 'utf8' \");\n mysql_query(\"INSERT into user(name,family,email,gender,username,pass)\n values('$_POST[name]','$_POST[family]','$_POST[email]','$_POST[gender]','$_POST[username]','$code')\");\n mysql_close($link1);\n //connection user pass\n $link2 = mysql_connect(\"localhost\",\"username\",\"password\");\n mysql_select_db(\"username\");\n mysql_query(\"INSERT into joinuser(username,pass,permission)values('$_POST[username]','$code','user')\" );\n mysql_close($link2);\n</code></pre>\n\n<p>It says : <strong>page not found</strong></p>\n\n<p>Please help me to solve this problem</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":21,"score":2,"question_id":13232880,"title":"Trouble with MAX(col)+1 INSERT into same MySQL table","body":"<p>I need two id columns in the same table that create unique values upon insert. Since MySQL allows only one column to auto-increment, I need to do something like max(id)+1 for the other column. </p>\n\n<p>Here's the SQL I expected to work:</p>\n\n<pre><code>INSERT INTO invoices (invoiceid)\nVALUES ((SELECT MAX(invoiceid)+1 FROM invoices))\n</code></pre>\n\n<p>The select statement works independently, but within my INSERT, it's not allowed. I get the error : You can't specify target table 'invoices' for update in FROM clause</p>\n"},{"tags":["php","mysql","email"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":39,"score":0,"question_id":13232631,"title":"Get all POST data and send in email","body":"<p>Im trying to use PHP Mail function to send myself an email of all post variables. </p>\n\n<p>So far I have this...</p>\n\n<pre><code>$message = foreach ($_POST as $key =&gt; $value)\necho \"Field \".htmlspecialchars($key).\" is \".htmlspecialchars($value).\"&lt;br&gt;\";\n\n$message = wordwrap($message, 70);\n\nmail('liam@site.co.uk', 'sghting', $message);\n</code></pre>\n\n<p>Only the message being submitted is my last post record, can anybody see where im going wrong?</p>\n"},{"tags":["php","mysql","null"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2306,"score":1,"question_id":1291180,"title":"passing a null value to mysql database","body":"<p>A user fills out a form and if they choose to not fill out a field that is not required php does this:</p>\n\n<pre><code>      if($_SESSION['numofchildren']==\"\")\n         $_SESSION['numofchildren']=null;\n</code></pre>\n\n<p>But when I use the session variable in a mysql query, the result is not null, but is 0. The column is a tinyint(4) that allows NULL.</p>\n\n<p>Why am I getting a 0 instead of NULL?</p>\n"},{"tags":["mysql","date","between"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13232666,"title":"MySQL select date BETWEEN syntax prints wrong results","body":"<p>I have this long and nasty <code>MySQL</code> query:</p>\n\n<pre><code>SELECT * FROM\n    studentdates sd\n        INNER JOIN\n    students s ON s.student_id = sd.student_id\n        INNER JOIN\n    cityselections cs ON cs.city_id = s.student_city_id\n        INNER JOIN\n    customers c ON c.customer_id = s.student_customer_id\n        INNER JOIN\n    price_to_course_number ptcn ON ptcn.ptcn_course_number = sd.student_course_number\n        INNER JOIN\n    pricegroups pg ON pg.price_id = ptcn.ptcn_price_id\nWHERE\n    ('2012-10-01' OR '2012-10-31' BETWEEN sd.student_startdate AND sd.student_enddate)\n        AND cs.city_id = '12'\n        AND sd.student_course_number = '46248'\nORDER BY s.student_lastname ASC\n</code></pre>\n\n<p>This will print the following lines (edited out unnecessary columns):</p>\n\n<pre><code>+------------+--------------------+-----------------+\n| student_id | student_startdate  | student_enddate |\n+------------+--------------------+-----------------+\n| 299        | 2012-09-24         | 2012-10-21      |\n| 299        | 2012-09-17         | 2012-09-23      |\n+------------+--------------------+-----------------+\n</code></pre>\n\n<p>Notice in my query I have <code>WHERE ('2012-10-01' OR '2012-10-31' BETWEEN sd.student_startdate AND sd.student_enddate)</code></p>\n\n<p>Why do I get this as a result?</p>\n\n<p><code>| 299        | 2012-09-17         | 2012-09-23      |</code></p>\n"},{"tags":["mysql","database","enums"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13218639,"title":"how can we dont allow enum in mysql that doesn't be empty?","body":"<p>I have an enum in mysql, i want that it doesn't get some thing except it's variables.\n when i pass it a strange variable, it doesn't accept it, but the last variable is cleared.\nhow can i do that?(sorry for my poor English!)\nwhen some incorrect var inserts, it doesn't insert actually, but the last var is cleared!\ni want keep it. how can i do that?</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13232317,"title":"Get details of entries in first table form a second table in mysql","body":"<p>I have a table with a list of consignments for different users (table name is consignments). This table contains the consignment id (cons_id) as PK, the user_id and the date (and other details).</p>\n\n<p>I have another table which contains the details of these consignments (table name is consignment). It has  item_id as PK, cons_id as FK, the weight, tracking numbers and other details of the consignment. There are more than one entry in this table with the same foreign key which relates to a single entry in the first table (consignments).</p>\n\n<p>I want to select all the entries in the first table (consignments) for a specific user, together with details obtained from the 2nd table (i.e. the total weight of all the items for a specific consignment, which are entries in the 2nd table, etc.).</p>\n\n<p>I use the following mysql command:</p>\n\n<pre><code>SELECT a.cons_id, a.user_id, a.date, \n       sum(c.weight) AS weight, sum(c.weight*2) AS amount, \n       count(c.tracking) AS qty \nFROM   `consignments` AS a LEFT JOIN `consignment` AS c \n       ON c.cons_id = a.cons_id WHERE a.user_id = 103\n</code></pre>\n\n<p>This returns only the first item in the consignments table for that specific user and not the remainder of the entries. Off course, if I do not join it with the 2nd table, all the entries are returned.</p>\n\n<p>I am not sure whether the aggregates like sum is the problem and how to do it correctly.</p>\n\n<p>Any suggestion would be highly appreciated.</p>\n"},{"tags":["php","mysql","zend-framework","memory","fetchall"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":89,"score":3,"question_id":13229395,"title":"Out of memory error in php","body":"<p>I am on php 5.2.5 and executing a script from command line. In this script I am manipulating the data fetched from db. To fetch data from db I am using Zend Adapter.\nI notice an <strong>increase in memory(262144 bytes)</strong> after invoking \n <strong>\"fetchAll($sql,$data,Zend_Db::FETCH_ASSOC)\"</strong>  </p>\n\n<p>Hence finally leading to out of memory. \nTo test I just executed \"fetchAll\" without even storing the data returned by it in any variable. But still I see an increase in memory which is not reclaimed. </p>\n\n<ul>\n<li>Is there any memory leak issue with Zend FetchAll method?</li>\n<li>Why does the memory increase by 262144 or in multiples of 262144?</li>\n<li>The memory increase happens randomly and not in all fetchAll calls, why so?</li>\n</ul>\n\n<p>I have tried using memory_get_usage() to determine the cause of memory leak, but since the code is huge it is taking a lot of time, is there any  way I can get the details of all the objects in memory so that I can debug the issue better? </p>\n\n<p>The sql is:-</p>\n\n<pre><code>select b.Id as Id,b.Lang \nfrom groups g \nleft join table1 b on b.Group_Id = g.Id \nleft join table2 bs on bs.Id = b.Id \nwhere g.Id = ? and b.Lang = ?\n</code></pre>\n"},{"tags":["java","mysql","spring","hibernate","transactions"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":848,"score":0,"question_id":1635633,"title":"Spring Transactions in different DAOs does not work anyway?","body":"<p>Here is my implementation in summary</p>\n\n<p>1) all DAOs implemented using HibernateDAO support/ @Transational annotation is only used in Service layer</p>\n\n<p>2) Use MySQL / HibernateTransactionManager</p>\n\n<p>3) Test using main(String args[]) method  (do transactions work using this method? )</p>\n\n<p>Transactions does not get rollbacked and invalid entried can be seen in the database.\nWhat am I doing wrong here?</p>\n\n<p>Detailed information is given below.</p>\n\n<p>1) I have configured transactions using @Transactional annotation in service layer as:</p>\n\n<pre><code>@Transactional(readOnly=false, rollbackFor={DuplicateEmailException.class,DuplicateLoginIdException.class,IdentityException.class},propagation=Propagation.REQUIRES_NEW)\n    public void createUserProfile(UserProfile profile)\n    \t\tthrows DuplicateEmailException, DuplicateLoginIdException,\n    \t\tIdentityException {\n\n    \t//Accessing DAO (implemented using HibernateDAOSupport)\n                identityDAO.createPrincipal(profile.getSecurityPrincipal());\n    \ttry {\n                //Accessing DAO\n    \t\tuserProfileDAO.createUserProfile(profile);\n    \t} catch (RuntimeException e) {\n    \t\tthrow new IdentityException(\"UseProfile create Error\", e);\n    \t}\n\n    }\n</code></pre>\n\n<p>2) My Transation Manager configuration / datasource is as follows :</p>\n\n<pre><code>&lt;bean id=\"dataSource\"\n    \tclass=\"org.apache.commons.dbcp.BasicDataSource\"\n    \tdestroy-method=\"close\"&gt;\n    \t&lt;property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" /&gt;\n    \t&lt;property name=\"url\"\n    \t\tvalue=\"jdbc:mysql://localhost:3306/ibmdusermgmt\" /&gt;\n    \t&lt;property name=\"username\" value=\"root\" /&gt;\n    \t&lt;property name=\"password\" value=\"root\" /&gt;\n    \t&lt;property name=\"defaultAutoCommit\" value=\"false\"/&gt;\t\t\n    &lt;/bean&gt;\n\n    &lt;bean id=\"sessionFactory\"\n    \tclass=\"org.springframework.orm.hibernate3.LocalSessionFactoryBean\"&gt;\n    \t&lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\t\t\n    \t&lt;property name=\"mappingLocations\"\n    \t\tvalue=\"classpath*:hibernate/*.hbm.xml\" /&gt;\n    \t&lt;property name=\"hibernateProperties\"&gt;\n    \t\t\t&lt;prop key=\"hibernate.dialect\"&gt;\n    \t\t\torg.hibernate.dialect.MySQLDialect\n    \t\t\t&lt;/prop&gt;\t\t\t\t\n    \t\t\t&lt;prop key=\"hibernate.query.substitutions\"&gt;\n    \t\t\t\ttrue=1 false=0\n    \t\t\t&lt;/prop&gt;\n    \t\t\t&lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n    \t\t\t&lt;prop key=\"hibernate.use_outer_join\"&gt;false&lt;/prop&gt;\n    \t\t&lt;/props&gt;\n    \t&lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"transactionManager\"\n    \tclass=\"org.springframework.orm.hibernate3.HibernateTransactionManager\"&gt;\n    \t&lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;\n</code></pre>\n\n<p>3) Test using main() method as follows :</p>\n\n<pre><code>public static void main(String[] args) {\n\n    \tApplicationContext cnt=new ClassPathXmlApplicationContext(\"testAppContext.xml\");\n    \tIUserProfileService upServ=(IUserProfileService)cnt.getBean(\"ibmdUserProfileService\");\n\n    \tUserProfile up=UserManagementFactory.createProfile(\"testlogin\");//\t\t\n    \tup.setAddress(\"address\");\n    \tup.setCompany(\"company\");\n    \tup.setTelephone(\"94963842\");\n    \tup.getSecurityPrincipal().setEmail(\"security@email.com\");\n    \tup.getSecurityPrincipal().setName(\"Full Name\");\n    \tup.getSecurityPrincipal().setPassword(\"password\");\n    \tup.getSecurityPrincipal().setSecretQuestion(new SecretQuestion(\"Question\", \"Answer\"));\n\n    \ttry {\n    \t\tupServ.createUserProfile(up);\n    \t} catch(Exception e){\n    \t\te.printStackTrace();\n    \t}\n</code></pre>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13232206,"title":"Mysql query where result of one column row is added with next one","body":"<p>I have used a query\n which is like</p>\n\n<pre><code>SELECT app_id,sum(amount),date FROM abc GROUP BY app_id,date\n</code></pre>\n\n<p>Result is show as follows</p>\n\n<pre><code>1   10   1-2-2000\n2   20   1-2-2000\n3   30   1-2-2000\n1   20   2-2-2000\n2   40   2-2-2000\n3   50   2-2-2000\n</code></pre>\n\n<p>I want to get desired result with new column</p>\n\n<pre><code>1   10   1-2-2000\n2   30   1-2-2000   # sum of amount of app_id=1 and app_id=2\n3   60   1-2-2000   # sum of amount of app_id=1 and app_id=2 and app_id=3\n1   20   2-2-2000\n2   60   2-2-2000   # sum of amount of app_id=1 and app_id=2\n3  110   2-2-2000   # sum of amount of app_id=1 and app_id=2 and app_id=3\n</code></pre>\n"},{"tags":["php","mysql","email"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13232395,"title":"PHP Email sent from mysql query","body":"<p>My code below is not sending an email, when a link is clicked, it should query the database and then send an email.\nAny pointers for what I have done wrong?\nThanks for your help.</p>\n\n<pre><code>&lt;?php   \n\nrequire_once('dbconnect.php');\n$query=\"SELECT * FROM Locations WHERE id='$id'\";\n$result=mysql_query($query);\nwhile ($row = $result -&gt; fetch_assoc()) {\n $submitter = $row['submitter'];\n $submitteremail = $row['submitteremail'];\n $message .= \"$submitter\";\n}\n $to = \"$submitteremail\";\n $subject = \"Submission approved\";\n $from = \"wxyz@mail.com\";\n $headers = \"From:\".$from;\n mail($to, $subject, $message, $headers);\n\n\necho 'Email sent';\nmysql_close();\nexit();\n</code></pre>\n\n<p>?></p>\n"},{"tags":["mysql","symfony2","doctrine2","load-data-infile"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13232217,"title":"Doctrine2 and MySQL : how to activate local-infile option?","body":"<p>I want to use <code>LOAD DATA LOCAL INFILE</code> command inside a symfony2 project. </p>\n\n<p>I am looking for the equivalent of :</p>\n\n<pre><code>mysql --local-infile -uroot -ppassword mydb\n</code></pre>\n\n<p>of the mysql client for Doctrine.</p>\n\n<p>I can do (<code>escapeshellarg</code> removed here) something like :</p>\n\n<pre><code>exec(\"echo 'load data local infile .... ' | mysql --local-infile -uroot -ppassword mydb\"); \n</code></pre>\n\n<p>But this looks not very nice.</p>\n\n<p>I want such a feature because my customers upload files, my app converts them to a safe and valid CSV file, and I need to import them. This takes too much time, and I know that using <code>LOAD DATA LOCAL INFILE</code> will be faster.</p>\n\n<p>How to activate the <code>--local-infile</code> option of MySQL on Doctrine2 ?</p>\n"},{"tags":["mysql","activerecord","fluent","laravel","eloquent"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":13223512,"title":"How to select count with fluent query builder?","body":"<p>Here is my query using fluent query builder.</p>\n\n<pre><code>    $query = DB::table('category_issue')\n        -&gt;select('issues.*')\n        -&gt;where('category_id', '=', 1)\n        -&gt;join('issues', 'category_issue.issue_id', '=', 'issues.id')\n        -&gt;left_join('issue_subscriptions', 'issues.id', '=', 'issue_subscriptions.issue_id')\n        -&gt;group_by('issues.id')\n        -&gt;order_by(DB::raw('COUNT(issue_subscriptions.issue_id)'), 'desc')\n        -&gt;get();\n</code></pre>\n\n<p>As you can see, I am ordering by a count from the joined table. This is working fine. However, I want this count returned with my selections. </p>\n\n<p>Here is the my raw sequel query that works fine.</p>\n\n<pre><code>Select issues.*, COUNT(issue_subscriptions.issue_id) AS followers \nFROM category_issue JOIN Issues ON category_issue.issue_id = issues.id \nLEFT JOIN issue_subscriptions ON issues.id = issue_subscriptions.issue_id\nWHERE category_issue.category_id = 1\nGROUP BY issues.id\nORDER BY followers DESC\n</code></pre>\n\n<p>How would I go about this select using Laravel's fluent query builder? I am aware I can use a raw sql query but I would like to avoid that if possible. Any help would be appreciated, thanks in advance!</p>\n"},{"tags":["php","mysql","flex"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":301,"score":0,"question_id":5979577,"title":"flex php mysql - post multiple rows of data","body":"<p>There are a few examples on the web showing how to post a row/form to mysql with flex php. I think it will be valuable if it allows user to post multiple rows of data. Supposed I have a datagrid and its id is myDG, how can I post the datagrid data to a table in mysql? I am using Flash Builder 4 and I need a solution based on Flex 3/4 + PHP + MySQL. Any suggestions?</p>\n"},{"tags":["mysql","performance"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13228301,"title":"MySQL query performance slow down suddenly","body":"<p>I have a MySQL (InnoDB) database that contains tables with rows count between 1 000 000 and 50 000 000. \nAt night there is aggregating job which counts some information and writes them to reporting tables. </p>\n\n<p>Fist job execution is very fast. Every query executes between 100ms and 1s. \nAfter that almost every single query is very slow. </p>\n\n<p>The example query is: </p>\n\n<pre><code>SELECT count(*) FROM tableA \n  JOIN tableB ON tableA.id = tableB.tableA_id\n</code></pre>\n\n<p>execution plan for that query shows that for both tables indexes will be used. </p>\n\n<p>Important thing is that CPU, I/O, memory usage is very low. \nMySQL server version: 5.5.28 with default setup (just installed on windows 7 developer computer). </p>\n"},{"tags":["mysql","stored-procedures","triggers","dynamic-sql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":350,"score":1,"question_id":11454699,"title":"Calling stored procedure that contains dynamic SQL from Trigger","body":"<p>I am calling Stored procedure from Trigger and I get the following error:</p>\n\n<blockquote>\n  <p>Dynamic SQL is not allowed in stored function or trigger</p>\n</blockquote>\n\n<p>Why is this happening, the dynamic SQL is being executed in Stored procedure, which is called from Trigger. Maybe this is the problem, if so is there any workaround?</p>\n\n<p>Edit (added code):</p>\n\n<p>Here is Trigger from the master table:</p>\n\n<pre><code>-- Trigger DDL Statements\nDELIMITER $$\n\nUSE `TestaDataBase`$$\nCREATE TRIGGER `TestaDataBase`.`UpdateAuxilaryTable`\nAFTER INSERT ON `MainTable` FOR EACH ROW  \nBEGIN    \n    /* Here we call stored procedure with parameter id of newly inserted row. */\n    CALL TestProcedure('Year', 'Person', 'IdPerson', NEW.IdData);\nEND\n$$\n</code></pre>\n\n<p>And here is the store procedure that is called from the trigger:</p>\n\n<pre><code>DELIMITER $$\nCREATE PROCEDURE `TestDataBase`.`TestProcedure` (IN attribute CHAR(64), IN tableName CHAR(64), IN IdTable CHAR(64), IN IdLastRow MEDIUMINT)\nBEGIN\nDECLARE selectedValue MEDIUMINT;\n\nSET @statement = CONCAT('SELECT ', attribute, ' FROM ', tableName, ' WHERE ', IdTable, ' = ', IdLastRow, ' INTO selectedValue');\nPREPARE statementExecute FROM @statement;\nEXECUTE statementExecute ;\n...\n...\nEND\n</code></pre>\n"},{"tags":["mysql","database","database-design","database-schema"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":87,"score":3,"question_id":13167365,"title":"(Somewhat) complicated database structure vs. simple — with null fields","body":"<p>I'm currently choosing between two different database designs. One <strong>complicated</strong> which <strong>separates data</strong> better then the more simple one. The more complicated design will require more <strong>complex queries</strong>, while the <strong>simpler</strong> one will have a couple of <strong><code>null</code> fields</strong>.</p>\n\n<p>Consider the examples below: </p>\n\n<p><strong>Complicated:</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/XgIwO.png\" alt=\"Complicated\"></p>\n\n<p><strong>Simpler:</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/DqD5l.png\" alt=\"Simpler\"></p>\n\n<p>The above examples are for separating regular users and Facebook users (they will access the same data, eventually, but login differently). On the first example, the data is clearly separated. The second example is way simplier, but will have at least one <code>null</code> field per row. <code>facebookUserId</code> will be null if it's a normal user, while <code>username</code> and <code>password</code> will be null if it's a Facebook-user.</p>\n\n<p>My question is: <strong>what's prefered</strong>? Pros/cons? Which one is easiest to maintain over time?</p>\n"},{"tags":[".net","mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":5975,"score":2,"question_id":1102281,"title":"How do I add a reference to the MySQL connector for .NET?","body":"<p>what dows this mean: Next add reference to: MySql.Data </p>\n\n<p>actually i have downloaded mysql connector/net.\nby following these instructions:</p>\n\n<p>First, you need to install the mysql connector/net, it is located at: <a href=\"http://dev.mysql.com/downloads/connector/net/1.0.html\" rel=\"nofollow\">http://dev.mysql.com/downloads/connector/net/1.0.html</a> </p>\n\n<p>Next create a new project</p>\n\n<p>Next add reference to: MySql.Data</p>\n\n<p>Next add \"using MySql.Data.MySqlClient;\"\n but im not able to install the connector.</p>\n\n<p>website:<a href=\"http://bitdaddys.com/MySQL-ConnectorNet.html\" rel=\"nofollow\">http://bitdaddys.com/MySQL-ConnectorNet.html</a></p>\n"},{"tags":["mysql","insert","decimal","rounding"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13231836,"title":"mysql decimal rounding","body":"<p>I am inserting decimals into my MYSQL database but the values that end up in the DB are rounded, despite my having set the DB to DECIMAL(10,4). For example I set the discount to 6.5 and the DB records it as 7.</p>\n\n<p>My query is:</p>\n\n<pre><code>$save = sprintf(\"\nINSERT INTO discount\nSET         am_discount = %d,\n                tx_discount = '%s'\n\",\n    $_POST['am_discount'],\n    mysql_escape_string($_POST['tx_discount'])\n);\n</code></pre>\n\n<p>I've tried setting the <code>am_discount</code> field to <code>%u</code> and <code>%f</code> as well, but it doesn't seem to make a difference.</p>\n\n<p>As I mentioned, the am_discount field in my MYSQL DB is set to <code>DECIMAL (10,4)</code> and I've also tried (10,2) and (8,2).</p>\n\n<p>What am I missing?</p>\n"},{"tags":["mysql","monitoring","query"],"answer_count":5,"favorite_count":33,"up_vote_count":43,"down_vote_count":0,"view_count":30384,"score":43,"question_id":568564,"title":"How can I view live MySQL queries?","body":"<p>I am just wondering if its possible to trace MySQL queries on my linux server as they happen?</p>\n\n<p>For example I'd love to set up some sort of listener, then request a web page and view all of the queries the engine executed, or just view all of the queries being run on a production server.</p>\n\n<p>Are there tools to do this?</p>\n"},{"tags":["php","mysql"],"answer_count":7,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":5394,"score":5,"question_id":743346,"title":"Live update notification on database changes MYSQL PHP","body":"<p>I was wondering how to trigger a notification if a new record is inserted into a database, using PHP and MySQL.</p>\n"},{"tags":["mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":29,"score":-2,"question_id":13231131,"title":"When then in inner join condition","body":"<pre><code>SELECT col1,col2 FROM t1 INNER JOIN t2 ON t1.col1 = t2.id where t2.col2 ='1'\nSELECT col1,col2 FROM t1 INNER JOIN t2 ON t1.col2 = t2.id where t2.col1 ='1'\n</code></pre>\n\n<p>can I merge both query in single query?\nI tried using WHEN THEN!</p>\n"},{"tags":["php","mysql","database","class","global"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13231804,"title":"Call to a member function fire_query() on a non-object","body":"<p>I keep getting the error Call to a member function fire_query() on a non-object, it's really frustrating, I just don't know what is wrong.</p>\n\n<p>my class:</p>\n\n<pre><code>require_once(\"MySQLDatabase.class.php\");  \n\nglobal $database;\n$result = $database-&gt;fire_query($query);\n$object_array = array();\n</code></pre>\n\n<p>This is my MySQLDatabase class</p>\n\n<pre><code>&lt;?php   \n    require_once(\"config.php\");\n    class MySQLDatabase_class\n    {\n        //Some stuff\n\n\n        public function fire_query($query)\n        {\n            $result = mysqli_query($this-&gt;db_connection, $query) or die(\"&lt;font color='red'&gt;Error code: 1x1003&lt;/font&gt;&lt;br&gt;\".$query);\n            return $result;\n        }\n\n\n        //Some more stuff\n    }\n\n    $database = new MySQLDatabase_class();\n?&gt;\n</code></pre>\n\n<p>I have done this tons of times, and it always works.\nI just can't figure it out why \"global $database\" doesn't work.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["mysql","sql","optimization","database-indexes"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13230629,"title":"How to optimize MySQL database/query","body":"<p>Hi I was hoping I could get some help on how to optimize my database so it doesn't take a year. I know that to speed it up I need to add indexes, but I'm not exactly sure on what I should be adding them on.</p>\n\n<p>Heres the three tables in my database:</p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS `journeyPattern2` (\n  `journeyPatternId` int(11) NOT NULL AUTO_INCREMENT,\n  `serviceId` int(11) NOT NULL,\n  `direction` enum('inbound','outbound') NOT NULL,\n  PRIMARY KEY (`journeyPatternId`)\n) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;\n\nCREATE TABLE IF NOT EXISTS `journeyPatternTimingLink2` (\n  `journeyPatternTimingLinkId` int(11) NOT NULL AUTO_INCREMENT,\n  `journeyPatternId` int(11) NOT NULL,\n  `from` varchar(15) NOT NULL,\n  `to` varchar(15) NOT NULL,\n  `direction` enum('inbound','outbound') NOT NULL,\n  `runTime` varchar(15) NOT NULL,\n  PRIMARY KEY (`journeyPatternTimingLinkId`),\n) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;\n\nCREATE TABLE IF NOT EXISTS `line` (\n  `lineId` int(11) NOT NULL AUTO_INCREMENT,\n  `serviceId` int(11) NOT NULL,\n  `lineName` tinytext NOT NULL,\n  PRIMARY KEY (`lineId`)\n) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;\n\nCREATE TABLE IF NOT EXISTS `service` (\n  `serviceId` int(11) NOT NULL AUTO_INCREMENT,\n  `serviceCode` varchar(50) NOT NULL,\n  `registeredOperatorRef` varchar(50) NOT NULL,\n  `origin` tinytext NOT NULL,\n  `destination` tinytext NOT NULL,\n  PRIMARY KEY (`serviceId`)\n) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;\n</code></pre>\n\n<p>The table journeyPattern2 contains about 33000 rows, journeyPatternTimingLink2 contains around 13 million, and line and service around 70000.</p>\n\n<p>The query I'm trying to optimize is the following </p>\n\n<pre><code>SELECT DISTINCT lineName,line.serviceId  FROM `journeyPatternTimingLink2` \nINNER JOIN journeyPattern2\nON journeyPattern2.journeyPatternId=journeyPatternTimingLink2.journeyPatternId\nINNER JOIN line\nON journeyPattern2.serviceId = line.serviceId\nWHERE `from` = '13006785E'\n</code></pre>\n\n<p>I've never really worked with tables of this size before so I'm not sure if I'm joining correctly in the first place. I've also uploaded a <a href=\"http://i.imgur.com/eTO4v.png\" rel=\"nofollow\">screenshot</a> of me running EXPLAIN on the query from phpmyadmin, but I'm not exactly sure how to interpret the results so any help would be appreciated.</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["php","mysql","database","excel"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":90,"score":2,"question_id":13231547,"title":"Export simple excel data into MySQL using PHP","body":"<p>My client got a excel file with the following structure</p>\n\n<pre><code>name     |     email\n----------------------------\nName     |   email here\nName     |   email here\nName     |   email here\nName     |   email here\nName     |   email here\nName     |   email here\n</code></pre>\n\n<p>I would likes to make a MySQL database table according to this pattern and save the data into MySQL.</p>\n\n<p>I am wonder how to do this. \nAlso there is an option needed</p>\n\n<p>We have to check that if that corresponding user had a correct email address, ie of the form @ . </p>\n\n<p>Can we check the data as a loop while importing ?</p>\n\n<p>Also how to convert this data to MySQL ?</p>\n"},{"tags":["mysql","sql"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13231312,"title":"group by with value of column SQL","body":"<p>I would like to display for a given user percentages by type (M or C)\nI tried with this query:</p>\n\n<pre><code> SELECT TYPE,user_name,pourcentage_c,pourcentage_m,id_user,COUNT(TYPE) AS crtitique ,COUNT(TYPE) AS majeur\n    FROM stat_alert  \n    LEFT OUTER JOIN user_qdf  \n    ON user_qdf.`id` = id_user   \n    WHERE user_qdf.`id`=id_user AND TYPE='C'\n    GROUP BY id_user \n\n   UNION ALL\n\n SELECT TYPE,user_name,pourcentage_c,pourcentage_m,id_user,COUNT(TYPE) AS        crtitique,COUNT(TYPE) AS majeur \n    FROM stat_alert  \n    LEFT OUTER JOIN user_qdf  \n    ON user_qdf.`id` = id_user   \n    WHERE user_qdf.`id`=id_user AND TYPE='M'\n    GROUP BY id_user\n</code></pre>\n\n<p>I want to display in the same line the  percentage and the number of critical and important for a single user</p>\n\n<p><img src=\"http://i.stack.imgur.com/QEctj.png\" alt=\"enter image description here\"></p>\n"},{"tags":["mysql","regex"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13231490,"title":"Search phone number from MYSQL DB","body":"<p>I have a table with <code>phone</code> column. Phones in it looks like this +1 (123) 456-3780.\nIf user input in search field \"35\" i should show him all users with phones:</p>\n\n<pre><code>+3 (534) 000-1010\n\n+1 (350) 000-9090\n\n+1 (003) 534-2343\n\n+1 (001) 223-5323 etc.\n</code></pre>\n\n<p>i have tried to do something like that</p>\n\n<pre><code>SELECT * FROM `mytable` WHERE `phone` LIKE '%3%5'\n</code></pre>\n\n<p>but this is not the best solution, beacause query get other phones like that +3 (000) 000-500.</p>\n\n<p>I would like to use RLIKE or something like that, but do not know how create needed regular expression and how should it look?</p>\n"},{"tags":["php","mysql","excel"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":582,"score":1,"question_id":4593436,"title":"mapping excel data to mysql database","body":"<p>how to mapping excel data column name to mysql data field?\nand mapping between excel data column name and mysql data field name and getting the excel data from excel file </p>\n"},{"tags":["mysql","mysqldump"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":137,"score":2,"question_id":8520330,"title":"Ignore 'views' in mysql db backup using mysqldump","body":"<p>I need to ignore all view in my database and take backup using mysqldump. Currently i am using below option.</p>\n\n<pre><code>--ignore-table=view1 --ignore-table=view2 --ignore-table=view3\n</code></pre>\n\n<p>Is there any way to take backup omitting all views without specifying all 'view' names.?</p>\n"},{"tags":["mysql","qlikview"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12226142,"title":"Show mysql tables into qlik view?","body":"<p>I am using qlik view 11 version and Database Mysql.I have created database and one table in mysql.Now i want to load that table in qlik view.I have created data source.But my database is not showing in qlikview.</p>\n"},{"tags":["mysql","sql","sql-order-by","case"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13231167,"title":"Aliases not working in ORDER BY clause","body":"<p>This will work fine in MySQL 5:</p>\n\n<pre><code>SELECT INSTR(foo, 'Bar') as foobar\nFROM Table\nORDER BY CASE WHEN foobar = 1 THEN foo END DESC;\n</code></pre>\n\n<p>Bu in MySQL 4, I get the error:</p>\n\n<pre><code>ERROR 1054 (42S22): Unknown column 'foobar' in 'order clause'\n</code></pre>\n\n<p>However, if I change the clause to this, it will work on both versions:</p>\n\n<pre><code>SELECT INSTR(foo, 'Bar') as foobar\nFROM Table\nORDER BY CASE WHEN INSTR(foo, 'Bar') = 1 THEN foo END DESC;\n</code></pre>\n\n<p>To ensure compatibility, do I have to always use the second way?</p>\n"},{"tags":["php","mysql","datetime"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13231020,"title":"in mysql i want to make select that will show everything between 2dates","body":"<p>I have datetime in my table like this 01.08.2012 14:20 22.10.2012 10:02</p>\n\n<p>i enter 2 dates(can i enter them just as 10.08.2012 or i have to add time to ) and i want to do this</p>\n\n<pre><code> $sqlSelectMY='BDate &gt;= \"'.$fromDate.'\" AND BDate &lt;=\"'.$toDate.'\"';\n\n \"SELECT* FROM table  WHERE \".$sqlSelectMY.\";\";\n</code></pre>\n\n<p>I put the date clause in variable sqlSelectMy and than use it in the variable that i call the select from the mysql database i would like to see some examples if anyone can refer any to me thx. How to write the input dates that will do the thing that i need now with the code there is even if I input dates like i have at the top with time it doesnt do anything...</p>\n"},{"tags":["c#","mysql","windows-7"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13231208,"title":"MySQL Connector 'Extentions' is a not valid short file name?","body":"<p>MySQL not appearing in DataSourse of Visual studio 2012. i have MySQL version 6.4.4.\nif i am trying to uninstall exist MySQL connector then i have this error \n'Extensions\" is a not valid short file name. how to resolve this prob please ?</p>\n"},{"tags":["mysql","xampp"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13229342,"title":"Why does Mysql Xampp restart only when i run the mysqld.exe file manually?","body":"<ol>\n<li><p>I am using mysql-xampp v3.0.2 version.</p></li>\n<li><p>while restarting the mysql server first it show me the running status and after 2or3s it stops running automatically.</p></li>\n<li><p>So as of now i got a temporary solution like  going into xampp installation folder Xampp->mysql->bin->running the msqld.exe file.</p></li>\n</ol>\n\n<p>i dont know whether it is the correct solution or is there any alternate solution to be made !!\n please suggest me </p>\n"},{"tags":["mysql","database-performance"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":26,"score":3,"question_id":13160816,"title":"Impact of extending a column that's a part of a multicolumn primary key on index","body":"<p>I need to extend a column in a quite big table (~90M rows). (MySQL 5.1, InnoDB)</p>\n\n<p>It's a varchar(15) column that needs to be extended to varchar(20).\nThis column is a part of the primary key.</p>\n\n<p>I did some reading in the mysql documents and it looks like a temporary table will be created for that process and at the end there will be a swap done. So it won't lock the table.</p>\n\n<p>But how will be the index rebuild look? I assume it will have to be modified or not? </p>\n\n<p>Will it be rebuild 'on side' and then swapped, so no major impact?</p>\n\n<p>I'm concerned about the performance once the alteration is made.</p>\n\n<p>Cheers!</p>\n"},{"tags":["mysql","query","select","double","rename"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13230685,"title":"Fetching a result twice with deferend name","body":"<p><br/>I have 1 table with tasks named opentask:<br/>columns: id,title,description,expires,creator_id,creator_name, executer_id, executer_name, priority_id, status_id<br/>1 table with users named user:<br/>\nwith columns: user_id, username<br/>\nWhat I want is to create a query where there will be all columns from opentask table where the executer_id will be equal to the user_id of user table AND the creator_id will be equal to the user_id again. This creates a confusion because the first equality excludes the second.<br/><br/>So I need somehow to create a query where I will include the usernames for the executer with something like where \"opentask.executer_id=user_user_id\" and at the same time I will include the username again (as a differend name?) for the creator with something like \"where opentask.executer_id=user_user_id\"<br/><br/>So I try this, which of course I know that is missing something, can you help?</p>\n\n<blockquote>\n  <p>SELECT DISTINCT id, title, description, expires, creator_id, executer_id, oc_opentask.priority_id, oc_opentask.status_id, priority_name, status_name, user_id, username, (SELECT username FROM oc_opentask, oc_user WHERE oc_opentask.creator_id=oc_user.user_id) AS username2 FROM oc_opentask, oc_opentask_priority, oc_user, oc_opentask_status WHERE oc_opentask.priority_id=oc_opentask_priority.priority_id AND oc_opentask.executer_id=oc_user.user_id AND oc_opentask.status_id=oc_opentask_status.status_id ORDER BY oc_opentask.expires DESC</p>\n</blockquote>\n"},{"tags":["mysql","sql","datetime-generation"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":1,"view_count":68,"score":3,"question_id":13225902,"title":"Get sum of fields","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3954200/mysql-count-data-for-last-7-days\">MySQL Count data for last 7 days</a>  </p>\n</blockquote>\n\n\n\n<p>I have an issue where i need to show the sum of fields. Lets say I have a recordset as follows,</p>\n\n<pre><code>detectDate      |isp    |infection  | count\n--------------------------------------\n2012-10-02 01:00|aaaa   |malware    |3\n2012-10-02 01:30|bbbb   |malware    |2\n2012-10-02 01:33|bbbb   |spy-eye    |2\n2012-10-02 01:45|aaaa   |DDos       |1\n2012-10-03 01:50|cccc   |malware    |2\n2012-10-03 02:00|dddd   |TDSS       |2\n2012-10-03 04:50|dddd   |TDSS       |3\n</code></pre>\n\n<p>And i want to display an output which will show the sum of all the infections for each day as follows,</p>\n\n<pre><code>detectDate  |infection  | count\n-------------------------------\n2012-10-02  |DDos       |1\n2012-10-02  |malware    |5\n2012-10-02  |spy-eye    |2\n2012-10-02  |TDSS       |0\n2012-10-03  |DDos       |0\n2012-10-03  |malware    |2\n2012-10-03  |spy-eye    |0\n2012-10-03  |TDSS       |5\n</code></pre>\n\n<p>I used this query,</p>\n\n<pre><code>SELECT DATE_FORMAT( detectDate, '%Y-%m-%d' ) AS detectDate, infection, SUM( count )\nFROM `tbl_correlateddata`\nGROUP BY DATE_FORMAT( detectDate, '%Y-%m-%d' ) , infection\n</code></pre>\n\n<p>but it only gives an out put as follows which is <strong>NOT</strong> my requirement..</p>\n\n<pre><code>detectDate  |infection  | count\n-------------------------------\n2012-10-02  |DDos       |1\n2012-10-02  |malware    |5\n2012-10-02  |spy-eye    |2\n2012-10-03  |malware    |2\n2012-10-03  |TDSS       |5\n</code></pre>\n\n<p>any help would be much helpful :)\nThank you very much :) much appreciated :)</p>\n\n<p><strong>EDIT:</strong>\nPossible duplicate of : <a href=\"http://stackoverflow.com/questions/3954200/mysql-count-data-for-last-7-days\">MySQL Count data for last 7 days</a></p>\n\n<p><strong>but not similar</strong></p>\n"},{"tags":["php","mysql","phpmyadmin"],"answer_count":0,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":13227148,"title":"Dynamic url or pages in php","body":"<p>Well it's been my very first initiative to build a dynamic page in php. As i'm a newbie in php, i don't know much about php programming. i've made a database named \"dynamic\" and it's table name \"answer\" after that i've inserted four fields namely 'id', 'A1','A2', 'A3'. </p>\n\n<p>I inserted the value in id=1 which are A1=1,A2 and A3-0, </p>\n\n<p>In id=2, i have inserted A1=0, A2=1, A3=0</p>\n\n<p>In id-3, i have inserted A1 and A2=0 A3=1</p>\n\n<p>So now what i wanted is whenever i will click on the link of id=1 then it will display the content of id=1 and so on...\nWhat i've done so far are:-</p>\n\n<pre><code>     $conn= mysql_connect(\"localhost\",\"root\", \"\");\n      $db= mysql_select_db(\"dynamic\", $conn);\n      $id=$_GET['id'];\n      $sql= \"select * from answer order by id\";\n      $query= mysql_query($sql);\n\n       while($row=mysql_fetch_array($query, MYSQL_ASSOC))\n      {\n          echo \"&lt;a href='dynamic.php?lc_URL=\".$row['id'].\"'&gt;Click Here&lt;/a&gt;\"; \n          if($row['A1']==1)\n          {\n              echo \"A1 is 1\";\n          }\n          else if($row['A2']==1)\n          {\n              echo \"A2 is 1\";\n\n          }\n          else if($row['A3']==1)\n          {\n              echo \"A3 is 1\";\n          }\n          else {\n              echo \"Wrong query\";\n\n            }\n\n        }\n\n       ?&gt;\n</code></pre>\n\n<p>When i've executed this codes then it is showing me the exact id and it is going to the exact id but the values has not been changing..</p>\n\n<p>I want whenever i will click on the  id then it will display the exact value like if i click on id=2 then it will echo out \"A2 is 1\" nothing else....</p>\n\n<p>Can anyone please help me out?</p>\n\n<p>I also have noticed about </p>\n\n<pre><code>         $id=$_GET['id'];\n</code></pre>\n\n<p>what is it and how to use it. Can anyone explain me out..\nThanks alot in advance:)</p>\n"},{"tags":["mysql","xml","phpmyadmin"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2494,"score":1,"question_id":7458647,"title":"Importing a XML file to MySQL via phpMyAdmin","body":"<p>I'm trying to import a XML file via phpMyAdmin and map each of the child elements to their corresponding fields within a MySQL table. XML sample:</p>\n\n<pre><code>&lt;event&gt;\n&lt;date&gt;1992&lt;/date&gt;\n&lt;title&gt;Event Title&lt;/title&gt;\n&lt;description&gt;Event description goes here.&lt;/description&gt;\n&lt;/event&gt;\n</code></pre>\n\n<p>I have MySQL fields within the table with names identical to the child elements listed above, however, when I import my XML file, I get a message that says \"0 queries executed,\" and of course nothing gets imported.</p>\n\n<p>I tried looking this up via the phpMyAdmin documentation, but I couldn't find anything but a modest description of XML as an import method. How is this supposed to be done?</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13229774,"title":"how to copy the value of cursor variable to temp variable in Procedure?","body":"<pre class=\"lang-sql prettyprint-override\"><code>BEGIN\nDECLARE cur_var1 CURSOR FOR\n        SELECT sum_field1  FROM table1 where field1 = sum_val1  ;\n\nDECLARE cur_var2 CURSOR FOR\n        SELECT sum_field2   FROM table2 where field2 = sum_val2  ;\n\nEND\n</code></pre>\n\n<p>I want to hold the value of <code>cur_var1</code> to a temporary variable say <code>cur_temp</code>. Now please let me know is it possible? If possible then how should I write the code. </p>\n"},{"tags":["mysql","foreign-keys","constraints","definition"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13229701,"title":"Difference between `Constraint Symbol` and `index_name` for Foreign Keys","body":"<p>The MySQL Syntax for Adding a Foreign Key in the Alter Table Command is as follows:</p>\n\n<pre><code>ADD [CONSTRAINT [symbol]] FOREIGN KEY [index_name] (index_col_name,...)\n</code></pre>\n\n<p>What is the difference between the <code>CONSTRAINT symbol</code> and the <code>index_name</code>. From what I can make out, they are both methods of naming a Foreign Key, but I figure there must be more differences that that, can anyone enlighten me?</p>\n"},{"tags":["c#","mysql","linq"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":3,"view_count":60,"score":-1,"question_id":13230268,"title":"How can I use Sum() in Linq?","body":"<p>How do I convert this statement into LINQ?</p>\n\n<pre><code>SELECT Sum(Balance) FROM account WHERE name='stocks' AND userid=290;\n</code></pre>\n"},{"tags":["mysql","round"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13186668,"title":"MySQL round(x,1) returns 0.0 and -0.0","body":"<p>Tell me if the two zeros make sense:</p>\n\n<pre><code>select x, count(1) from (select round(rand()-0.5,1) x from tab) t group by x;\n+------+----------+\n| x    | count(1) |\n+------+----------+\n| -0.5 |     1830 |\n| -0.4 |     3726 |\n| -0.3 |     3753 |\n| -0.2 |     3835 |\n| -0.1 |     3828 |\n|  0.0 |     1909 |\n| -0.0 |     1889 |\n|  0.1 |     3831 |\n|  0.2 |     3753 |\n|  0.3 |     3793 |\n|  0.4 |     3690 |\n|  0.5 |     1887 |\n+------+----------+\n</code></pre>\n\n<p>There is a workaround (cast as decimal(10,1)) but I am curious if round() is broken. I am using MySQL 5.1</p>\n"},{"tags":["php","mysql","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":78,"score":3,"question_id":13225348,"title":"PHP execute user defined queries","body":"<p>I'm developing a project using CodeIgniter where the pages displayed have an option list with available queries (<code>SELECT</code> statements) for the displayed data on the page.  These queries are stored in a MySQL table and include User Defined queries.  </p>\n\n<p>My questions is, what's the best method of handling execution of the selected query:</p>\n\n<ol>\n<li><p>Obtain SQL Statement from Table (<code>view_id</code> key) using query command.  Replace parameters in returned SQL statement.  Execute SQL statement using query command.</p></li>\n<li><p>When loading the page, store the SQL statements in an array (could be large).  When user changes the selection on the page, grab the statement from the array, replace parameters in statement, run query.</p></li>\n<li><p>Use MySQL prepared statement.  (foresee an issue with the parameters, as all views would need the same parameter sequence)</p></li>\n<li><p>Other options?</p></li>\n</ol>\n\n<p>I'm looking for an efficient as well as secure method.</p>\n\n<p>Thanks </p>\n"},{"tags":["mysql","ruby-on-rails"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13229936,"title":"Single mass insert into database in rails","body":"<p>I want to use something like the following, to insert like 1.000.000 statements at once into my database.\nBut in my model i have a <strong>before_create :build_a_detail</strong> which inserts to every record in user_node_scores an associated record in the other table. they are associated through a has_one, belongs_to relationship and a foreign key..</p>\n\n<p>But how can i maintain this association, with a single mass insert!?</p>\n\n<pre><code>inserts = []\nTIMES.times do\n  inserts.push \"(3.0, '2009-01-23 20:21:13', 2, 1)\"\nend\nsql = \"INSERT INTO user_node_scores (`score`, `updated_at`, `node_id`, `user_id`) VALUES #{inserts.join(\", \")}\n</code></pre>\n"},{"tags":["php","javascript","mysql","div"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13230212,"title":"JavaScript cutting up PHP output into multiple variables","body":"<p>would love a hand with this issue I'm having.</p>\n\n<p>Basically I have a PHP document that is randomly selecting a mySQL database record and echo'ing the result. </p>\n\n<p>Then I have a piece of JavaScript in a HTML document that is catching the PHP result, and should be splitting up the data via the xmlHttp.responseText.split method, and loading that content on the page.</p>\n\n<p>Now, something must be wrong with the JavaScript, because I can output the PHP file just fine: <a href=\"http://lrdondmt.com/week14/ajaxprototype4.html\" rel=\"nofollow\">http://lrdondmt.com/week14/ajaxprototype4.html</a> -- its when I cut up the PHP output that things start to fall over.</p>\n\n<p>Here is my PHP:</p>\n\n<pre><code>// connect to DB\n\n    $username=\"blah\";\n    $password=\"blah\";\n    $database=\"blah\";\n    $table=\"banddb\";\n    mysql_connect(localhost,$username,$password);\n\n    @mysql_select_db($database) or die( \"Unable to select database\");\n\n// query\n\n    $sql=\"SELECT * FROM $table ORDER BY RAND() LIMIT 1\";\n\n    $result = mysql_query($sql);\n\nwhile($row = mysql_fetch_array($result))\n\n  {\n\n        echo $row['bandname'].\"[BRK]\".$row['bandcampid'].\"[BRK]\".$row['city'].\"[BRK]\".$row['state'].\"[BRK]\".$row['imgpath'].\"[BRK]\".$row['abouttheband'].\"[BRK]\".$row['bandcamplink'].\"[BRK]\".$row['facebooklink'];\n     }\n\n  mysql_close();\n\n\n?&gt;\n</code></pre>\n\n<p>Here is my JavaScript:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    function showband()\n    {\n        if (window.XMLHttpRequest)\n          {// code for IE7+, Firefox, Chrome, Opera, Safari\n          xmlhttp=new XMLHttpRequest();\n      }\n        else\n          {// code for IE6, IE5\n          xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\");\n      }\n    xmlhttp.onreadystatechange=function()\n      {\n      if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)\n        {\n            data = xmlHttp.responseText.split ( \"[BRK]\" );\n            document.getElementById(\"bandname\").innerHTML = data[0];\n            document.getElementById(\"bandcampid\").innerHTML = data[1];\n            document.getElementById(\"city\").innerHTML = data[2];\n            document.getElementById(\"state\").innerHTML = data[3];\n            document.getElementById(\"imgpath\").innerHTML = data[4];\n            document.getElementById(\"abouttheband\").innerHTML = data[5];\n            document.getElementById(\"bandcamplink\").innerHTML = data[6];\n            document.getElementById(\"facebooklink\").innerHTML = data[7];\n        }\n      }\n    xmlhttp.open(\"GET\",\"showrandom.php\",true);\n    xmlhttp.send();\n    }\n    &lt;/script&gt;\n</code></pre>\n\n<p>This function is being called on pageload with </p>\n\n<pre><code>&lt;body onload=\"showband()\"&gt;\n</code></pre>\n\n<p>And should then be outputted in these DIVs:</p>\n\n<pre><code>    &lt;div id=\"bandname\"&gt;\n        1\n    &lt;/div&gt;\n\n    &lt;div id=\"bandcampid\"&gt;\n        2\n    &lt;/div&gt;\n\n    &lt;div id=\"city\"&gt;\n        3\n    &lt;/div&gt;\n\n    &lt;div id=\"state\"&gt;\n        4\n    &lt;/div&gt;\n\n    &lt;div id=\"imgpath\"&gt;\n        5\n    &lt;/div&gt;  \n\n    &lt;div id=\"abouttheband\"&gt;\n        6\n    &lt;/div&gt;  \n\n    &lt;div id=\"bandcamplink\"&gt;\n        7\n    &lt;/div&gt;  \n\n    &lt;div id=\"facebooklink\"&gt;\n        8\n    &lt;/div&gt;  \n</code></pre>\n\n<p>What gives?</p>\n"},{"tags":["php","mysql","forms","datetime","phpmailer"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":30,"score":0,"question_id":13230179,"title":"Posting current date & time to a mail server through PHP mailer","body":"<p>the following form collects name of the visitors. it also collects current date &amp; time of their input through a hidden field.</p>\n\n<pre><code>$input_date = $_POST['DEFAULT CURRENT_TIMESTAMP'];\n\nif ((isset($_POST[\"MM_insert\"])) &amp;&amp; ($_POST[\"MM_insert\"] == \"form1\")) {    \n\n$insertSQL = sprintf(\"INSERT INTO table (name, input_date) VALUES (%s, %s)\",\n\n              GetSQLValueString($_POST['name'], \"text\"),\n              GetSQLValueString(trim($input_date), \"date\"));\n\nmysql_select_db($database_x, $x;\n$Result1 = mysql_query($insertSQL, $x) or die(mysql_error());\n\n    $insertGoTo = \"schedule.php\";\n    if (isset($_SERVER['QUERY_STRING'])) {\n    $insertGoTo .= (strpos($insertGoTo, '?')) ? \"&amp;\" : \"?\";\n    $insertGoTo .= $_SERVER['QUERY_STRING'];\n    }\n    header(sprintf(\"Location: %s\", $insertGoTo));\n</code></pre>\n\n<hr>\n\n<pre><code>    &lt;form action=\"&lt;?php echo $editFormAction; ?&gt;\" method=\"post\" name=\"form1\"   id=\"form1\"&gt;\n    &lt;table align=\"center\"&gt;\n        &lt;tr valign=\"baseline\"&gt;\n        &lt;td align=\"right\" nowrap=\"nowrap\"&gt;Enter Name:&lt;/td&gt;\n        &lt;td&gt;\n        &lt;input type=\"text\" name=\"name\" value=\"\" size=\"32\" /&gt;\n        &lt;input type=\"hidden\" name=\"input_date\" value=\"&lt;?php echo \"$input_date\"; ?&gt;\" /&gt; \n        &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr valign=\"baseline\"&gt;\n            &lt;td nowrap=\"nowrap\" align=\"right\"&gt;\n                &lt;input type=\"hidden\" name=\"MM_insert\" value=\"form1\" /&gt;\n            &lt;/td&gt;\n            &lt;td&gt;\n                &lt;input type=\"submit\" value=\"Submit Schedule\" /&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n&lt;/form&gt;\n</code></pre>\n\n<hr>\n\n<p>the field name in mysql database for the corresponding date column was defined as</p>\n\n<pre><code>`input_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n</code></pre>\n\n<p>a PHP mailer e-mails the visitors' input immeditely after they submit the form. the problem is that the mailer can't post the current date &amp; time whereas it can post other inputted data of the visitors properly to their mail server when the variables are defined in the following way in e-mail body.</p>\n\n<pre><code>Input Time: $input_date\nName: $_POST[name]\n</code></pre>\n\n<p>what i'm doing wrong here?</p>\n\n<p>thanks,</p>\n"},{"tags":["php","mysql","phpmyadmin"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":13179530,"title":"phpMyAdmin - doesn't show select results","body":"<p>My phpMyAdmin installation seems to be working just fine. I can handle databases and tables and insert datasets in tables. </p>\n\n<p><em>But</em> I cannot see the datasets in the tables. If I try to let it show the datasets by selecting \"Browse\" in the table-navigation, I get the following message:</p>\n\n<pre><code>Showing rows 0 - 0 ( 1 total, Query took 0.0061 sec)\n</code></pre>\n\n<p>BUT the table remains empty and no error messages appear. </p>\n\n<p>I can get the data using php.</p>\n\n<ul>\n<li>PHP Version: 5.2.6</li>\n<li>MySQL Version: 5.0.45</li>\n<li>phpMyAdmin Version: 3.5.3</li>\n</ul>\n"},{"tags":["mysql","sql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":13229138,"title":"Get the last 4 months of the year in MySQL?","body":"<p>i am new to mysql.  I want to know about last 4 month names from sql.</p>\n\n<p>like</p>\n\n<pre><code>  SELECT TO_CHAR(ADD_MONTHS(SYSDATE, -level), 'Month') AS month\n    FROM dual\n    CONNECT BY LEVEL &lt; 4 \n</code></pre>\n\n<p>but how this can be done with mysql?</p>\n"},{"tags":["java","mysql","database","jdbc","jndi"],"answer_count":8,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":229,"score":4,"question_id":11500257,"title":"What is faster: JDBC or JNDI?","body":"<p>I have two options to configure my application database connection - one is using JDBC, another one is using JNDI. What will be the best option in terms of how fast those connection types work with the database. </p>\n\n<p>I understand those are two different types of database connections using different principles (JDBC is a direct db connection, JNDI is a database connection pool configuration on application server side). But are there other general JDBC/JNDI pros and cons which might be more important than operating speed? If yes, what are they?</p>\n"},{"tags":["mysql","servlets","tomcat6"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13229594,"title":"Insert Error in Mysql database","body":"<p>Hello I am getting Error in <strong><em>Mysql</em></strong> Insertion of data.</p>\n\n<pre><code>Error com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '????????????????' at line 1\n</code></pre>\n\n<p>I am using <strong><em>prepared statement</em></strong> method in servlets.</p>\n\n<p>Any Solutions ????</p>\n"},{"tags":["mysql","xampp"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1091,"score":1,"question_id":9782451,"title":"mysql in xampp starts and stops in five seconds","body":"<p>I installed xampp in windows XP.  I am able to start apache and tomcat. But when I start mysql, it gets started but stops after five seconds. </p>\n\n<p>So, I am not able to work with PHPMyAdmin. </p>\n\n<p>I checked the mysql_error file inside <code>xampp/mysql/bin</code> and the following was present.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>120320 11:48:44 [Note] Plugin 'FEDERATED' is disabled.\n120320 11:48:44 InnoDB: The InnoDB memory heap is disabled\n120320 11:48:44 InnoDB: Mutexes and rw_locks use Windows interlocked functions\n120320 11:48:44 InnoDB: Compressed tables use zlib 1.2.3\n120320 11:48:45 InnoDB: Initializing buffer pool, size = 16.0M\n120320 11:48:45 InnoDB: Completed initialization of buffer pool\nInnoDB: The first specified data file C:\\xampp\\mysql\\data\\ibdata1 did not exist:\nInnoDB: a new database to be created!\n120320 11:48:45  InnoDB: Setting file C:\\xampp\\mysql\\data\\ibdata1 size to 10 MB\nInnoDB: Database physically writes the file full: wait...\n120320 11:48:45  InnoDB: Log file C:\\xampp\\mysql\\data\\ib_logfile0 did not exist: new to be created\nInnoDB: Setting log file C:\\xampp\\mysql\\data\\ib_logfile0 size to 5 MB\nInnoDB: Database physically writes the file full: wait...\n120320 11:48:45  InnoDB: Log file C:\\xampp\\mysql\\data\\ib_logfile1 did not exist: new to be created\nInnoDB: Setting log file C:\\xampp\\mysql\\data\\ib_logfile1 size to 5 MB\nInnoDB: Database physically writes the file full: wait...\nInnoDB: Doublewrite buffer not found: creating new\nInnoDB: Doublewrite buffer created\nInnoDB: 127 rollback segment(s) active.\nInnoDB: Creating foreign key constraint system tables\nInnoDB: Foreign key constraint system tables created\n120320 11:48:48  InnoDB: Waiting for the background threads to start\n120320 11:48:49 InnoDB: 1.1.8 started; log sequence number 0\n120320 11:48:52 [Note] Event Scheduler: Loaded 0 events\n120320 11:48:52 [Note] mysql\\bin\\mysqld.exe: ready for connections.\nVersion: '5.5.16'  socket: ''  port: 3306  MySQL Community Server (GPL)\n</code></pre>\n\n<p>I am using <code>xampp 1.7.7</code></p>\n\n<p>please help...</p>\n"},{"tags":["java","mysql"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":10,"view_count":77,"score":-10,"question_id":13229166,"title":"How to insert data in MySQL Database","body":"<p>How to insert two rows using one MySQL query? This is what I've tried but it does not work as expected:</p>\n\n<pre><code>String insert1=\"insert into employee values(?,?,?)\";\nPreparedStatement ps1 = connection.prepareStatement(insert1);\nps1.setString(1, s3);\nps1.setString(2, s4);\nps1.setString(3, s5);\nps1.executeUpdate();\nps1.clearParameters();\n</code></pre>\n"},{"tags":["mysql","profiling","data-profiling"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12684494,"title":"Tool for table_schema and table_name relationship","body":"<p>Do you know any tools for profiling,to see the structure and relationship of each tables inside the db? it is look like this one :</p>\n\n<p>See screenShot below,</p>\n\n<p><img src=\"http://i.stack.imgur.com/evuJS.jpg\" alt=\"enter image description here\"></p>\n\n<p><a href=\"http://www.geneontology.org/images/diag-godb-er.jpg\" rel=\"nofollow\">For <strong>bigger resolution</strong>, Please click here.</a></p>\n\n<p>Thanks In advance.</p>\n\n<p>Any help much more appreciated! :)</p>\n"},{"tags":["mysql","order"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":23,"score":2,"question_id":13229095,"title":"mysql order by custom","body":"<p>I have four rows in DB table. I would like them to order by but in the below order</p>\n\n<pre><code>id\n5\n8\n6\n7\n</code></pre>\n\n<p>How do I go for this?</p>\n\n<p>I can't take another column and set order there because DB table is not my custom table it is provided by the CMS plugin. So changing the structure of table is not a good idea.</p>\n"},{"tags":["mysql","cakephp","cakephp-2.0"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13229052,"title":"Mysql: combination of Group by , order , max. Get maximum value of grouped set and apply a condition","body":"<p>There is a table reservations in mysql database in the below format.</p>\n\n<pre><code>id | customer_id | user_id | date_booked\n1  | 1           | 1       | 2012-11-5\n</code></pre>\n\n<p>I want to get the count of customers for a particular User. so I wrote query</p>\n\n<pre><code>select count(*), user_id, customer_id,date_booked from reservations where user_id=1 group by customer_id\n</code></pre>\n\n<p>This fetches results in desired way. But date_booked , I get the first value recorded. i.e., If there are 4 records for a customer with id 2 , It fetches 1st record's date_booked value. I want the latest value , So I improved the query like below</p>\n\n<pre><code>select count(*), user_id, customer_id,max(date_booked) from reservations where user_id=1 group by customer_id\n</code></pre>\n\n<p>This fetches highest date recorded. This is still not the result set I want to fetch. I want the latest date but that should be less that current date (today).</p>\n\n<p>Is there a way to write condition like this</p>\n\n<pre><code>max(date_booked)&lt;date(now())\n</code></pre>\n\n<p>I want to fetch max date but less than today. I want to achieve this in CakePHP. If someone can help with Query I can write it cakePHP format.</p>\n\n<p><em>Please improve the question if necessary.</em></p>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13229217,"title":"Best way to filter the value in Mysql-PHP","body":"<p>I have a select box in my PHP &amp; mysql code like.</p>\n\n<pre><code>&lt;select id=\"addressbook_user\" name =\"addressbook_user\"&gt;\n&lt;option value=\"hi\"&gt;hi&lt;/option&gt;\n&lt;option value=\"hello\"&gt;hello&lt;/option&gt;\n&lt;option value=\"newa\"&gt;newa&lt;/option&gt;\n\n&lt;select&gt;\n</code></pre>\n\n<p>I am storing the selected value in a jQuery list and i am passing that list to the php code to filter the other options except list items like.</p>\n\n<pre><code>$list = $_GET['list'];\n\nprint $list;\nprint_r($list);\n$query = \"SELECT *  from demo_addressbook WHERE user_created_id IN(SELECT id FROM demo_user WHERE user_name = '$get_user_name') AND type = 1 AND guest_name NOT IN '$list' \";                               \n$sresult    = mysql_query($query) or die (mysql_error());\n</code></pre>\n\n<p>and based on the result i am trying to create the latest select box without selected value of the list .</p>\n\n<p>but unfortunately my above query is not working </p>\n\n<pre><code>hiYou have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'hi' at line 1 is the error .\n</code></pre>\n\n<p>Please suggest me the best way to filter the array data from a mysql table </p>\n"},{"tags":["c#","mysql","mysql-connector"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13227617,"title":"The underlying provider failed on open after a while, strange InnerException","body":"<p>The problem is I can't really show some code, because the error pops up at random places. The function it ususally pops up now is the following:</p>\n\n<pre><code>public cow GetRandomCow()\n{\n    lock(RunderenData.DB)\n    {\n         return (from c in RunderenData.DB.cow\n                 where c.butch_date == null\n                 select c).First();\n    }\n}\n</code></pre>\n\n<p>This is a test method to be sure there's nothing else going on. </p>\n\n<h3>Exception:</h3>\n\n<pre><code>System.Data.EntityException: {\"The underlying provider failed on Open.\"}\n</code></pre>\n\n<h3>StackTrace:</h3>\n\n<pre><code>at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean&amp; closeStoreConnectionOnFailure)\nat System.Data.EntityClient.EntityConnection.Open()\nat System.Data.Objects.ObjectContext.EnsureConnection()\nat System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)\nat System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable&lt;T&gt;.GetEnumerator()\nat System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)\nat System.Data.Objects.ELinq.ObjectQueryProvider.&lt;GetElementFunction&gt;b__1[TResult](IEnumerable`1 sequence)\nat System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle[TResult](IEnumerable`1 query, Expression queryRoot)\nat System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute[S](Expression expression)\nat System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source)\nat FlatCow.Repository.CowRepository.GetRandomCow() in C:\\Users\\leon.ILMER\\Dropbox\\[  Gosschalk  ]\\Runderbaan\\FlatCow\\Repository\\CowRepository.cs:line 191\nat FlatCow.Forms.Oormerk.OormerkManager.ProcessSuccessfullScan(cow foundCow, String lifeNumber) in C:\\Users\\leon.ILMER\\Dropbox\\[  Gosschalk  ]\\Runderbaan\\FlatCow\\Forms\\Oormerk\\OormerkManager.cs:line 203\nat FlatCow.Forms.Oormerk.OormerkManager.&lt;&gt;c__DisplayClass11.&lt;ScannerOnCodeRead&gt;b__a() in C:\\Users\\leon.ILMER\\Dropbox\\[  Gosschalk  ]\\Runderbaan\\FlatCow\\Forms\\Oormerk\\OormerkManager.cs:line 190\n</code></pre>\n\n<h3>InnerException</h3>\n\n<pre><code>System.ArgumentOutOfRangeException {\"Value to add was out of range.\\r\\nParameter name: value\"}\n</code></pre>\n\n<h3>StackTrace</h3>\n\n<pre><code>at System.DateTime.Add(Double value, Int32 scale)\nat System.DateTime.AddDays(Double value)\nat System.TimeZoneInfo.TransitionTimeToDateTime(Int32 year, TransitionTime transitionTime)\nat System.TimeZoneInfo.GetDaylightTime(Int32 year, AdjustmentRule rule)\nat System.TimeZoneInfo.GetIsDaylightSavingsFromUtc(DateTime time, Int32 Year, TimeSpan utc, AdjustmentRule rule, Boolean&amp; isAmbiguousLocalDst)\nat System.TimeZoneInfo.GetDateTimeNowUtcOffsetFromUtc(DateTime time, Boolean&amp; isAmbiguousLocalDst)\nat System.DateTime.get_Now()\nat MySql.Data.MySqlClient.MySqlPool.GetConnection()\nat MySql.Data.MySqlClient.MySqlConnection.Open()\nat System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean&amp; closeStoreConnectionOnFailure)\n</code></pre>\n\n<h3>ConnectionString:</h3>\n\n<pre><code>\"metadata=res://*/Runderen.csdl|res://*/Runderen.ssdl|res://*/Runderen.msl;provider=MySql.Data.MySqlClient;provider connection string=\\\"server=\" +\n_host1 + \";User=\" + _username1 + \";Pwd=\" + _password1 +\n\";allow zero datetime=yes;Convert Zero Datetime=true;Persist Security Info=True;database=\" +_database1 + \"\\\"\";\n</code></pre>\n\n<p>I'm using .NET Connector 6.5.4 on MySQL 5.5. The MySQL database is running on an external server.</p>\n\n<p>I actually have no idea what to do. There are Date and DateTime colums in the database. </p>\n\n<p>The strange thing is the function didn't do anything strange until about the 150th time called. The Exception seems to pop up at random. Could this have anything to do with the (MySQL) server configuration? It is a dedicated server with Team Foundation Server and MySQL with phpmyadmin. The MySQL server has been configured 'server mode' at the install. The software does a lot of querying on the server.</p>\n\n<p>Code and configuration suggestions are more than welcome.</p>\n"},{"tags":["php","mysql","excel-2007"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13228873,"title":"missing data leading with zero when import from MySql to excel format","body":"<p>Below is php script , how i download data from mysql using php </p>\n\n<pre><code>//export\n$select = \" //select statement \";\n\n$export = mysql_query($select) or die(\"Sql error : \" . mysql_error());\n\n$fields = mysql_num_fields($export);\n\nfor ($i = 0; $i &lt; $fields; $i++) {\n    $header .= mysql_field_name($export, $i) . \"\\t\";\n}\n\nwhile ($row = mysql_fetch_row($export)) {\n    $line = '';\n    foreach ($row as $value) {\n        if ((!isset($value)) || ($value == \"\")) {\n            $value = \"\\t\";\n        } else {\n            $value = str_replace('\"', '\"\"', $value);\n            $value = '\"' . $value . '\"' . \"\\t\";\n        }\n        $line .= $value;\n    }\n    $data .= trim($line) . \"\\n\";\n}\n$data = str_replace(\"\\r\", \"\", $data);\n\nif ($data == \"\") {\n    $data = \"\\n(0) Records Found!\\n\";\n}\n\nheader(\"Content-type: application/octet-stream\");\nheader(\"Content-Disposition: attachment; filename=your_desired_name.xls\");\nheader(\"Pragma: no-cache\");\nheader(\"Expires: 0\");\nprint \"$header\\n$data\";\n//export\n</code></pre>\n\n<p>My problem is when i open this xls file, the data leading with zero will disappear.\nMy data from database is <code>0164543889</code> but in Excel <code>164543889</code>.</p>\n\n<pre><code>Column = customers_telephone\nType = varchar(32)\n</code></pre>\n\n<p>How to fix this ?</p>\n"},{"tags":["mysql","sql","stored-procedures","view","sql-view"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13228026,"title":"MySQL design; View or Stored Procedure with variable","body":"<p>I've to execute a complex query, selecting several columns from 7-8 tables.</p>\n\n<p>We don't want to write that query in programming language (PHP - Symfony 1.4/Propel 1.4 in our case) but to create a view or stored procedure to have very simple select query for developers. I'm confused what will be better approach.</p>\n\n<p>We need query in following format:</p>\n\n<pre><code>SET @PlayerId = 1;\n\nSELECT CASE WHEN mat.player1id = @PlayerId THEN mat.player2id ELSE mat.player1id END as opponent\n    /*plus many other columns*/\nFROM `wzo_matches` as mat /*plus few other tables*/\nWHERE (mat.player1id =@PlayerId OR mat.player2id=@PlayerId)\n    /*plus other join conditions*/\n</code></pre>\n\n<p>Problem with view is, <code>SET @PlayerId=xx</code> statement. We don't know player id in advance but will be passed through PHP. I hope this is the reason to rule out views; is there any workaround for that?</p>\n\n<p>Other option will be stored procedure. Only issue with that is, it will create a new view for every query so operation will be very heavy for DB.</p>\n\n<p>Can someone suggest best approach so that developers can get required data from above query without writing above complex query in PHP. (Obviously through SP or view &amp; simple select query from there)</p>\n"},{"tags":["mysql","migration","gem"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":10717477,"title":"can't run migration","body":"<p>I run</p>\n\n<pre><code>  rake db:create\n</code></pre>\n\n<p>and getting strange error</p>\n\n<pre><code>     rake aborted!\n   126: ═х эрщфхэ єърчрээ√щ ьюфєы№.   - C:/Ruby192/lib/ruby/gems/1.9.1/gems/mysql2-\n   0.3.11-x86-mingw32/lib/mysql2/1.9/mysql2.so\n</code></pre>\n\n<p>I tried to reinstall bundler.\nIs it gem problem ?</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13228375,"title":"mysql query to delete results using loop id","body":"<p>I have this sql query, which I have to provide ID to work (it`s 100 in this example)</p>\n\n<pre><code>SELECT * FROM students_subjects WHERE student_id \nNOT IN \n(SELECT student_id FROM students_info WHERE class_id=(SELECT class_id FROM groups WHERE group_id=(SELECT group_id FROM teacher_groups_subjects WHERE t_g_s_id=**100**)))\n</code></pre>\n\n<p>I want to select all rows from table teacher_groups_subjects and run the query above for each ID (t_g_s_id)</p>\n\n<p>Anyone?</p>\n"},{"tags":["php","mysql","html","sql"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":480,"score":1,"question_id":11908111,"title":"Inserting SQL data into HTML textarea","body":"<p>I've been reading lots of questions at stackoverflow that have made my life easier, first time I ask something though.</p>\n\n<p>Here is my problem. I need to be able to insert different values from my SQL database into a selected &lt; textarea > field, depending on what option is selected in a &lt; select > input on the same form.</p>\n\n<p>The basic idea is that I want to edit news from the database, edit title and body. To do that, I want to show what (title / body) data contains my db to the user, by getting them from my SQL db. User may have multiple entries in the database, so when I select one entry at the &lt; select > combobox, I'd like to change the  contents to those from the selected entry from the db.</p>\n\n<p>Its a simple idea difficult to express due to my poor English...</p>\n\n<p>HTML form would be more or less as follows:</p>\n\n<pre><code>&lt;form action=\"edit.php\" method=\"post\"&gt;\n    &lt;select name=\"id\"&gt;\n       &lt;option value=\"1\"&gt;Option 1&lt;/option&gt;\n       &lt;option value=\"2\"&gt;Option 2&lt;/option&gt;\n    &lt;/select&gt;\n    &lt;textarea name=\"newsBody\"&gt;&lt;/textarea&gt;\n    &lt;input name=\"submit\" type=\"submit\" value=\"Edit\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>SQL database structure goes more or less as follows:</p>\n\n<p>DB name: database</p>\n\n<p>DB table: news (fields id, body, title, author, timestamp)</p>\n\n<p>I'd like to be able to select news from my &lt; select > getting their 'id' / 'option value', then get from the DB the corrrect value, and show it in the corresponding &lt; textarea >.</p>\n\n<p>I'm new into website coding, and do it just as a hobby, so my knowledge in PHP, MySQL is very basic. I dont provide any PHP code or options, simply because I have no idea how to resolve it... I can understand sql, php syntax though.</p>\n\n<p>I thought using &lt; select > event 'onchange' and javascript, but couldn't make it work... Neither could I using jQuery / ajax, probably because the lack of useful examples!!</p>\n\n<p>Hope that someone understands and can provide a solution!</p>\n\n<p>Many thanks in advance!</p>\n"},{"tags":["php","mysql","sql"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":129,"score":0,"question_id":11771230,"title":"php + mysql converting multiple rows into columns in a single row","body":"<p>I have a following details in my database table with columns:</p>\n\n<pre><code>currency code\ncurrency rate\ncurrency trade type\n</code></pre>\n\n<p>Eg, I had the following rows in details (database):</p>\n\n<pre><code>USD  3.33  buy \nUSD  3.43  sell\nSGD  4.33  buy\nSGD  4.43  sell\n</code></pre>\n\n<p>And then, I want to bring my database tables into PHP/HTML tables as following:</p>\n\n<pre><code>     BUY   SELL\nUSD  3.33  3.43 \nSGD  4.33  4.43\n</code></pre>\n\n<p>How to use looping to make them be like that?</p>\n"},{"tags":["mysql","sql","oracle","updatable-views"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13215119,"title":"How can I update a view with columns that is derived from case statement?","body":"<p>I created a view using this (neglected other columns):</p>\n\n<pre><code>create view view_table (is_root) as select\n  case when C1 = 'Yes' then 1\n       when C1 = 'No' then 0\n       else 0\n  end as is_root\n  from remote_db_table\n</code></pre>\n\n<p>But when I tried to update the view using:</p>\n\n<pre><code>update view_table set is_root=1\n</code></pre>\n\n<p>It does not work. Any way to do it? The view is in Oracle but the remote table is in mySQL</p>\n"},{"tags":["mysql","sql-server-2008","drupal-6","windows-server-2008","database-connection"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13221245,"title":"Sync SQL Server 2008 with database of a Drupal website","body":"<p>I have a client who's using some custom built progam which uses SQL server 2008 DB and is running on Windows Server 2008.\n On the other hand, the same client has a Drupal 6 website  with a mySQL DB.\nEach DB is stored on a different server, and the DB's have <b> some </b> tables in common but not all of them.\nThat client wants a 2 way synchronization between these DB's, which means the following: <br> <br>\n1. Those tables which are similar in both DB's have to contain the same data. <br>\n2. The client can make changes in both website and the program and the changes in one DB will be mirrored on to the second.<br> <br></p>\n\n<p>How would you approach such problem? <br><br>\nThanks for your time and trouble , any (well, almost any) piece of advice will be appreciated.<br>\nJimbo.</p>\n"},{"tags":["php","jquery","mysql","ajax"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":13212223,"title":"Data for Json in php jquery","body":"<p>I cant get my values from the database to go into the jquery tags plugin, any help would be great:</p>\n\n<p>PHP:</p>\n\n<pre><code>case 'get_tags':\n        $id         = (isset($_GET['id'])) ? intval($_GET['id']) : 0;\n        $query      = \"SELECT description FROM `tags` WHERE page_id = '?';\";\n        $query_p    = $db-&gt;prep_query($query,array($id));\n        $results    = $db-&gt;queryMakearray($query_p);\n\n        $tags = array_values($results);\n        $response   = json_encode($results);\nbreak;\n</code></pre>\n\n<p>JS</p>\n\n<pre><code>$(document).ready(function()\n{\n    var _id = parseInt($.url_param('id'), 10);\n    var _tag_items = $.get('inc/ajax.php?type=get_tags&amp;id='+_id);\n    $('#tags')\n        .textext({\n        plugins : 'tags',\n        tagsItems: _tag_items\n    });\n});\n</code></pre>\n\n<p>Response:</p>\n\n<pre><code>\"[{\\\"description\\\":\\\"test\\\"},{\\\"description\\\":\\\"test2\\\"},{\\\"description\\\":\\\"test3\\\"}]\"\n</code></pre>\n\n<p>I need it to look like this:</p>\n\n<pre><code>[\"test\",\"test2\",\"test3\"]\n</code></pre>\n\n<p><em><strong>Edit</em></strong> </p>\n\n<p>PHP:</p>\n\n<pre><code>$id         = (isset($_GET['id'])) ? intval($_GET['id']) : 0;\n        $query      = \"SELECT description FROM `tags` WHERE page_id = '?';\";\n        $query_p    = $db-&gt;prep_query($query,array($id));\n        $results    = $db-&gt;query2array($query_p);\n\n        $tags   = array_values($results);\n        $response = sanitize_output($tags);\n</code></pre>\n"},{"tags":["php","javascript","jquery","mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":577,"score":7,"question_id":9103760,"title":"How to load JSON data with jQuery, PHP and MySQL","body":"<p>I want to create a dynamic dropdown menu that one select is based on the value of another select. I tried so many times and failed. I have the code as follows. Anyone can help me to find out what the problem is.</p>\n\n<p>//template:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;  \n\n$(function(){ \n  getSelectVal(); \n  $(\"#grouptypes\").change(function(){ \n      getSelectVal(); \n\n  }); \n});\n\nfunction getSelectVal(){ \n    $.getJSON('&lt;?php echo url_for('group_utilization/GroupModification') ?&gt;', {'grouptypes':$(\"#grouptypes\").val()},function(data){ \n        var groups = $(\"#groups\"); \n        $(\"option\",groups).remove(); \n        $.each(json,function(index,array){ \n            var option = \"&lt;option value='\"+array['id']+\"'&gt;\"+array['title']+\"&lt;/option&gt;\"; \n            select.append(option); \n        }); \n    }); \n} \n\n&lt;/script&gt;\n\nGroupType: &lt;select id=\"grouptypes\"&gt;\n\n  &lt;?php foreach($grouptypes as $type) : ?&gt;\n\n  &lt;?php echo \"&lt;option value='\" . $type-&gt;name . \"'&gt;\" .$type-&gt;name. \"&lt;/option&gt;\"; ?&gt;\n\n  &lt;?php endforeach ?&gt;\n\n&lt;/select&gt;&lt;br /&gt;\n&lt;br /&gt;Result:&lt;span id=\"list-of-groups\"&gt;&lt;/span&gt;\n\n&lt;br /&gt;\nGroup: &lt;select name=\"group\" id=\"groups\"&gt;\n\n&lt;/select&gt;&lt;br /&gt;\n</code></pre>\n\n<p>Another file for returning database returned value:</p>\n\n<pre><code>if(isset($_GET[\"grouptypes\"])){\n $grouptypes = $_GET[\"grouptypes\"];\n\n $query = \"SELECT g.name FROM groups g INNER JOIN group_types gt ON(gt.id = g.group_type_id AND gt.name = ?)\";\n\n $groups = $db-&gt;getResultsForQuery($query, $grouptypes);\n echo json_encode($groups);\n }\n</code></pre>\n"},{"tags":["mysql","sql","select","variable-declaration","variable-initialization"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13226745,"title":"What are the differences in the following variable initialization styles in MySQL?","body":"<p>I'm fairly new to queries which involve variable declaration in MySQL. I have seen various styles and I'm not fully clear of what these actually do. I've questions about what these actually do.</p>\n\n<p>1)</p>\n\n<pre><code>set @row:=0;\nSELECT name, @row:=@row + 1 AS rownum\nFROM animal\n</code></pre>\n\n<p>2)</p>\n\n<pre><code>SELECT name, @row:=@row + 1 AS rownum\nFROM (SELECT @row:= 0) c, animal\n</code></pre>\n\n<p>Both returns the same:</p>\n\n<pre><code>  name rownum\n|| cat || 1 ||\n|| cat || 2 ||\n|| dog || 3 ||\n|| dog || 4 ||\n|| dog || 5 ||\n|| ant || 6 ||\n</code></pre>\n\n<p><strong>What are the differences in the above two queries and which of the two to adopt as to their scope, efficiency, coding habit, use-cases?</strong></p>\n\n<p>3) Now if I do this: </p>\n\n<pre><code>set @row:=0;\nSELECT name, @row:=@row + 1 AS rownum\nFROM (SELECT @row:= 123) c, animal\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>  name  rownum\n|| cat || 124 ||\n|| cat || 125 ||\n|| dog || 126 ||\n|| dog || 127 ||\n|| dog || 128 ||\n|| ant || 129 ||\n</code></pre>\n\n<p><strong>So doesn't that mean that the inner variable initialization is overriding the outer initialization and leaving the latter redundant hence (and hence its always a better practice to initialize in a <code>SELECT</code>?</strong></p>\n\n<p>4) If I merely do: </p>\n\n<pre><code>SELECT name, @row:=@row + 1 AS rownum\nFROM animal\n</code></pre>\n\n<p>I get </p>\n\n<pre><code>   name  rownum\n|| cat || NULL ||\n|| cat || NULL ||\n|| dog || NULL ||\n|| dog || NULL ||\n|| dog || NULL ||\n|| ant || NULL ||\n</code></pre>\n\n<p>I can understand that since <code>row</code> isn't initialized. But if I run any of the other queries (may be variable <code>row</code> is getting initialized?) I see that <code>row</code> variable is incremented every time I run the above query. That is it gives me the result on first run:</p>\n\n<pre><code>  name rownum\n|| cat || 1 ||\n|| cat || 2 ||\n|| dog || 3 ||\n|| dog || 4 ||\n|| dog || 5 ||\n|| ant || 6 ||\n</code></pre>\n\n<p>and then when re-run it yields in </p>\n\n<pre><code>  name rownum\n|| cat || 7  ||\n|| cat || 8  ||\n|| dog || 9  ||\n|| dog || 10 ||\n|| dog || 11 ||\n|| ant || 12 ||\n</code></pre>\n\n<p><strong>So is <code>row</code> being stored somewhere? And what is its scope and lifespan?</strong></p>\n\n<p>5) If I have query like this: </p>\n\n<pre><code>SELECT (CASE WHEN @name &lt;&gt; name THEN @row:=1 ELSE @row:=@row + 1 END) AS rownum, \n       @name:=name AS name\nFROM animal\n</code></pre>\n\n<p>This always yields the right result:</p>\n\n<pre><code>rownum  name\n|| 1 || cat ||\n|| 2 || cat ||\n|| 1 || dog ||\n|| 2 || dog ||\n|| 3 || dog ||\n|| 1 || ant ||\n</code></pre>\n\n<p><strong>So doesn't that mean its not always necessary to initialize variable at the top or in a <code>SELECT</code> depending on the query?</strong></p>\n"},{"tags":["mysql","datetime"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":4631,"score":2,"question_id":2149688,"title":"Create a date range in mysql","body":"<p>Best way to create on the fly, date ranges, for use with report.</p>\n\n<p>So I can avoid empty rows on my report if there's no activity for a given day.</p>\n\n<p>Mostly to avoid this issue: <a href=\"http://stackoverflow.com/questions/75752/what-is-the-most-straightforward-way-to-pad-empty-dates-in-sql-results-on-either\">http://stackoverflow.com/questions/75752/what-is-the-most-straightforward-way-to-pad-empty-dates-in-sql-results-on-either</a></p>\n"},{"tags":["mysql","concat","group-concat"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13227816,"title":"Use GROUP_CONCAT in MySQL with considering null","body":"<p>I have a table with 3 fields. This table keeps record of call duration for each day to the relevant country for last 30 days.</p>\n\n<pre><code>C_Date      Country         C_Time  \n2012-10-01  India           1316\n2012-10-01  USA             12  \n2012-10-01  UK              132     \n2012-10-01  Kuwait          134     \n2012-10-02  UK              135     \n2012-10-02  USA             136     \n2012-10-02  Singapore       137     \n</code></pre>\n\n<p>I need to generate a table and a line graph using this records and I tried to write the MySQL query. Basically I need to draw this only for selected countries.<br>Say I want India, USA and UK ; then I need to pull a record set like this:</p>\n\n<pre><code>C_Date     | Calling_Time\n-----------+----------------------------------\n2012-10-01 | 1316,12,132\n2012-10-02 | 0,136,135\n2012-10-03 | ...\n...        | ...\n</code></pre>\n\n<p>This is my Query:</p>\n\n<pre><code>SELECT C_Date, GROUP_CONCAT(C_Time\nORDER BY Country\nSEPARATOR ',') as Calling_Time\nFROM Call_Table t\nWHERE Country\nIN ('India', 'USA', 'UK')\nGROUP BY C_Date\nORDER BY  C_Date\n</code></pre>\n\n<p>The result was much closer, but it had ignored the empty results.</p>\n\n<pre><code>C_Date     | Calling_Time\n-----------+----------------------------------\n2012-10-01 | 1316,12,132\n2012-10-02 | 136,135   (expected 0,136,135)\n</code></pre>\n\n<p>Can I change my query to get the Calling_Time like <strong>0,136,135</strong> OR <strong>,136,135</strong> OR <strong>null,136,135</strong> ?(with unique numbers of segments to represent each country )<br></p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13222017,"title":"mysql - select grouped values","body":"<p>I have this result set </p>\n\n<p><a href=\"http://i.stack.imgur.com/7qb5g.jpg\" rel=\"nofollow\">http://i.stack.imgur.com/7qb5g.jpg\n</a></p>\n\n<p>and i'm trying to get entries as follow</p>\n\n<p>get the ad_id of entries that have an attribute_id = 5 and value = 'Yamaha Mate V50' and attribute_id = 6 and value = 2012</p>\n\n<p>i've tried stuff like</p>\n\n<pre><code>SELECT ad_id FROM value WHERE attribute_id = 5 &amp;&amp; value = 'Yamaha Mate V50' &amp;&amp; attribute_id = 6 &amp;&amp; value = '2012'\n</code></pre>\n\n<p>this gives an empty result set</p>\n\n<p>and if i did this</p>\n\n<pre><code>SELECT ad_id FROM value WHERE attribute_id = 5 &amp;&amp; value = 'Yamaha Mate V50' || attribute_id = 6 &amp;&amp; value = '2012'\n</code></pre>\n\n<p>i get ad_id = 1 and 3 which is good however i also get ad_id = 2 which is logical because it does have this condition (attribute_id = 6 &amp;&amp; value = '2012')</p>\n\n<p>so what should i do to select only the ad_ids that fulfill both conditions</p>\n\n<p>(attribute_id = 5 &amp;&amp; value = 'Yamaha Mate V50') \"AND\" (attribute_id = 6 &amp;&amp; value = '2012')</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["mysql","sql","database-design","foreign-keys","composite-key"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13225813,"title":"composite foreign key referencing one or more columns","body":"<p>I have a table (tableA) that joins 3 other tables with primary keys 'vehicle','engine','transmission' I would like to be able to assign parts to one or more of these eg 'only this vehicle' or 'only this vehicle with this engine' or 'any vehicle with this engine'</p>\n\n<p>My plan is to have a parts table (tableB) with also primary keys 'vehicle','engine','transmission' and I'd like to be able to insert for example:</p>\n\n<ul>\n<li><code>4844, null, null</code> to assign a part to only 'vehicle' or </li>\n<li><code>4844, 240,  null</code> to assign a part to 'only this vehicle with this engine'.</li>\n</ul>\n\n<p>Is there some way I can enforce integrity at the database level so that. </p>\n\n<ol>\n<li>the fields that are filled in in tableB must reference fields in tableA.</li>\n<li>at least one of the fields must be filled in.</li>\n<li>the option exists not to insert data into them all?</li>\n</ol>\n"},{"tags":["php","jquery","mysql","calendar"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13217240,"title":"Jquery UI calendar show mysql dates?","body":"<p>I need to get a series of dates from a mysql database using php, once I query the database and have all my dates as a result of the query, is it then possible to show those dates in for example red on the jquery UI calendar?</p>\n"},{"tags":["mysql","delphi","zeos"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":13227812,"title":"List values from store procedure function","body":"<p>I'm new to Delphi, but im a old PHP and MySQL programmer.</p>\n\n<p>I have a system that needs to be used on a desktop too, so I've created some stored procedures to list the queries from the database. The store procedures just select and join tables to show it. </p>\n\n<p>I'm using the zeos component in delphi 7.  It shows my tables in the db grid well, but i need to show the result from my store procedure. I've tried to use the zstoredproc but it returns the error <code>PROCEDURE xxxxx cant return a result set in the given context</code>.</p>\n\n<p>Please help me; I just want to show the data from the stored procedure in to a grid or combobox.</p>\n"},{"tags":["php","mysql","pdo","dynamic-sql","multiple-select-query"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13227704,"title":"Statement work on phpmyadmin but not through php","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6346674/pdo-support-for-multiple-queries-pdo-mysql-pdo-mysqlnd\">PDO support for multiple queries (PDO_MYSQL, PDO_MYSQLND)</a>  </p>\n</blockquote>\n\n\n\n<p>i have a statement here.. when i ran it from phpmyadmin.. i got my query works.. but it doesnt when i execute it from php.. </p>\n\n<p>here's my query (statement)</p>\n\n<pre><code>SET @sql = NULL;\n SELECT GROUP_CONCAT(DISTINCT CONCAT('MAX(IF(a.Name = ''', a.Name, ''', ca.value, NULL)) AS ', a.Name )) INTO @sql FROM cust_attribute ca INNER JOIN attribute a ON ca.idAttribute = a.idAttribute INNER JOIN customer c ON c.idCustomer = ca.idCustomer WHERE a.publish = 'Y';\n SET @sql = CONCAT('SELECT c.idCustomer, c.namaCustomer, ' ' c.email, c.noTelp, ', @sql, ' FROM cust_attribute ca', ' INNER JOIN attribute a ON ca.idAttribute = a.idAttribute', ' INNER JOIN customer c ON c.idCustomer = ca.idCustomer', ' GROUP BY c.idCustomer');\n SELECT @sql;\n prepare stmt FROM @sql;\n execute stmt;\n</code></pre>\n\n<p>and here's my code on php...</p>\n\n<pre><code>&lt;?php \n$uname = 'root'; //nama username database \n$pwd = ''; //Password database \n$dbname = 'eav_latihan'; //nama Database \n\n/* Initialisasi database */ \n$db = new PDO('mysql:host=localhost;dbname='.$dbname, $uname, $pwd); \n$db-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING); \n\n\n$query = \"SET @sql = NULL; \". \n\" SELECT GROUP_CONCAT(DISTINCT CONCAT('MAX(IF(a.Name = ''', \". \n\" a.Name, ''', ca.value, NULL)) AS ', a.Name )) INTO @sql \". \n\" FROM cust_attribute ca \". \n\" INNER JOIN attribute a ON ca.idAttribute = a.idAttribute \". \n\" INNER JOIN customer c ON c.idCustomer = ca.idCustomer \". \n\" WHERE a.publish = 'Y'; \". \n\" SET @sql = CONCAT('SELECT c.idCustomer, c.namaCustomer, ' \". \n\" ' c.email, c.noTelp, ', @sql, ' FROM cust_attribute ca', \". \n\" ' INNER JOIN attribute a ON ca.idAttribute = a.idAttribute', \". \n\" ' INNER JOIN customer c ON c.idCustomer = ca.idCustomer', \". \n\" ' GROUP BY c.idCustomer'); \". \n\" SELECT @sql; \". \n\" prepare stmt FROM @sql; \". \n\" execute stmt;\"; \n\n$result_array = array();\n$queryku = $db-&gt;query($query);\n$result_array = $queryku-&gt;fetchAll(PDO::FETCH_OBJ);\nvar_dump($result_array);\n?&gt;\n</code></pre>\n\n<p>Anyone can help me or give me a suggest here??</p>\n"},{"tags":["java","mysql","mysql-error-1064","mysql-workbench"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13227057,"title":"Importing mysql database from java code","body":"<p><strong>This code do restore mysql tables but application almost goes into sleep(20min plus). and my database Routines do not come in mysql workbench, can somebody tell me what is the actual solution?</strong></p>\n\n<pre><code>public static boolean restoreDB(String dbName, String dbUserName, String dbPassword, String source) {\n\n    String[] executeCmd = new String[]{\"C:\\\\Program Files\\\\MySQL\\\\MySQL Server 5.5\\\\bin\\\\mysql\", \"--user=\" + dbUserName, \"--password=\" + dbPassword, \"-e\", \"source \\\"D:/khokher/mydb.sql\\\"\"};\n\n    Process runtimeProcess;\n    try {\n\n        runtimeProcess = Runtime.getRuntime().exec(executeCmd);\n        int processComplete = runtimeProcess.waitFor();\n\n        if (processComplete == 0) {\n            System.out.println(\"Backup restored successfully\");\n            return true;\n        } else {\n            System.out.println(\"Could not restore the backup\");\n        }\n    } catch (Exception ex) {\n        ex.printStackTrace();\n    }\n\n    return false;\n}\n</code></pre>\n"},{"tags":["php","mysql","sql","pdo"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":55,"score":1,"question_id":13223483,"title":"php - Invalid parameter number: parameter was not defined","body":"<p>i have some problems with executing a simple INSERT request.\nAs said in the title, i have this message \"Invalid parameter number: parameter was not defined\". the first value is an id (primary with auto increment)</p>\n\n<pre><code>$req = $pdo-&gt;prepare('INSERT INTO championnat_classement \n                        VALUES (\n                        \"\",\n                        :Equipe,\n                        :Championnat,\n                        :Saison,\n                        :Journee,\n                        :Points,\n                        :NbMatch,\n                        :Position,\n                        :Victoire,\n                        :Nul,\n                        :Defaite,\n                        :MatchJoueDomicile,\n                        :PointsDomicile,\n                        :VictoireDomicile,\n                        :NulDomicile,\n                        :DefaiteDomicile,\n                        :ButPourDomicile,\n                        :ButContreDomicile,\n                        :MatchJoueExterieur,\n                        :PointsExterieur,\n                        :VictoireExterieur,\n                        :NulExterieur,\n                        :DefaiteExterieur,\n                        :ButPourExterieur,\n                        :ButContreExterieur     \n                        )');\nif ($req-&gt;execute(array(\n                        \"Equipe\" =&gt; $this-&gt;idEquipe1,\n                        \"Championnat\" =&gt; $this-&gt;idChamp,\n                        \"Saison\" =&gt; $this-&gt;saison,\n                        \"Journee\" =&gt; $this-&gt;journee,\n                        \"Points\" =&gt; $this-&gt;pointsTotaux,\n                        \"NbMatch\" =&gt; $this-&gt;matchJouesTotal,\n                        \"Position\" =&gt; $this-&gt;position,\n                        \"Victoire\" =&gt; $this-&gt;matchGagneeTotal,\n                        \"Nul\" =&gt; $this-&gt;matchNulTotal,\n                        \"Defaite\" =&gt; $this-&gt;matchPerduTotal,\n                        \"MatchJoueDomicile\" =&gt; $this-&gt;matchJouesDomicile,\n                        \"PointsDomicile\" =&gt; $this-&gt;pointsDomicile,\n                        \"VictoireDomicile \" =&gt; $this-&gt;matchJouesDomicile,\n                        \"NulDomicile\" =&gt; $this-&gt;matchNulDomicile,\n                        \"DefaiteDomicile\" =&gt; $this-&gt;matchPerduDomicile,\n                        \"ButPourDomicile\" =&gt; $this-&gt;butMarquesDomicile,\n                        \"ButContreDomicile\" =&gt; $this-&gt;butEncaissesDomicile,\n                        \"MatchJoueExterieur\" =&gt; $this-&gt;matchJouesExterieur,\n                        \"PointsExterieur\" =&gt; $this-&gt;pointsExterieur,\n                        \"VictoireExterieur\" =&gt; $this-&gt;matchGagneeExterieur,\n                        \"NulExterieur\" =&gt; $this-&gt;matchNulExterieur,\n                        \"DefaiteExterieur\" =&gt; $this-&gt;matchPerduExterieur,\n                        \"ButPourExterieur\" =&gt; $this-&gt;butMarquesExterieur,\n                        \"ButContreExterieur\" =&gt; $this-&gt;butEncaissesExterieur\n                    ))) {\n                return \"ok\";\n            }\n</code></pre>\n\n<p>How to solve this?</p>\n"},{"tags":["mysql","escaping","mysql-real-escape-string"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13227656,"title":"Escaping special characters while inserting in mysql","body":"<p>I am inserting multi-rows in a mysql database by concating values as in the query </p>\n\n<pre><code>INSERT INTO tableName (col1, col2, col3) VALUES('a', 'b', 'c'), ('d', 'b', 'c'), ('e', 'b', 'c');\n</code></pre>\n\n<p>However, sometimes some of the values of the entire bunch needs to be escaped, like I got <code>s-â€__83164</code> as one of my values to enter. This causes the entire bunch of request to drop when only one or two of the values are faulty.</p>\n\n<p>Is there any way to escape characters like <code>s-â€__83164</code> or do I need a modification in the type of field, I am using for it. I am currently using <code>VARCHAR</code> for storing those values.</p>\n\n<p>Please comment if I am unclear in asking my doubt !</p>\n"},{"tags":["mysql","sql","relational"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13226777,"title":"Complex query taking too long to run","body":"<p>I have a query (<a href=\"http://stackoverflow.com/questions/11336651/adding-a-sub-query-to-an-already-giant-query\">original question that has table structure too</a>) that is perfect, but it creates a temporary table which unfortunately takes like 12 seconds due to amount of data.  (1 table has 95k records, another 155k, and another 21k).</p>\n\n<p>Is there any way to go around the temporary table solution or make it run faster?  Maybe suggest which fields should be indexed?  I have ID fields, date fields, etc... indexed, but that's not helping at all.</p>\n\n<pre><code>SELECT\n    (\n        CASE\n            WHEN a.winner = a.f_a THEN \"Win\"\n            WHEN a.winner = a.f_b THEN \"Loss\"\n            WHEN a.winner IS NULL THEN a.method\n        END\n    ) AS result,\n    SUM(a.f_a IN (d.fighter_a, d.fighter_b) AND d.winner &lt;=&gt; a.f_a) AS fighter_wincount,\n    SUM(a.f_a IN (d.fighter_a, d.fighter_b) AND d.winner IS NOT NULL AND d.winner &lt;&gt; a.f_a) AS fighter_losscount,\n    SUM(a.f_a IN (d.fighter_a, d.fighter_b) AND d.method = \"Draw\") AS fighter_drawcount,\n    SUM(a.f_a IN (d.fighter_a, d.fighter_b) AND d.method = \"No Contest\") AS fighter_nocontestcount,\n    b.name AS opponent,\n    SUM(a.f_b IN (d.fighter_a, d.fighter_b) AND d.winner &lt;=&gt; a.f_b) AS opponent_wincount,\n    SUM(a.f_b IN (d.fighter_a, d.fighter_b) AND d.winner IS NOT NULL AND d.winner &lt;&gt; a.f_b) AS opponent_losscount,\n    SUM(a.f_b IN (d.fighter_a, d.fighter_b) AND d.method = \"Draw\") AS opponent_drawcount,\n    SUM(a.f_b IN (d.fighter_a, d.fighter_b) AND d.method = \"No Contest\") AS opponent_nocontestcount,\n    b.fighter_id AS opponent_id,\n    b.fighting_out_of_country AS opponent_country,\n    a.method AS method,\n    a.method_type AS method_type,\n    a.round AS round,\n    a.time AS time,\n    c.event_id AS event_id,\n    c.event_name AS event,\n    c.event_date AS date,\n    c.event_city AS event_city,\n    c.event_state AS event_state,\n    c.event_country AS event_country\nFROM\n    (\n        SELECT \n            fight_id,\n            IF(fighter_b = :fighter_id_3, fighter_b, fighter_a) AS f_a,\n            IF(fighter_b = :fighter_id_4, fighter_a, fighter_b) AS f_b,\n            winner,\n            method,\n            method_type,\n            round,\n            time,\n            event\n        FROM \n            fights\n        WHERE\n            :fighter_id_5 IN (fighter_a, fighter_b)\n    ) a\nINNER JOIN\n    fighters b ON a.f_b = b.fighter_id\nINNER JOIN\n    events c ON a.event = c.event_id\nLEFT JOIN\n    (\n        SELECT \n            a.fighter_a,\n            a.fighter_b,\n            a.winner,\n            a.method,\n            b.event_date\n        FROM\n            fights a\n        INNER JOIN\n            events b ON a.event = b.event_id\n    ) d ON \n        (a.f_a IN (d.fighter_a, d.fighter_b) OR a.f_b IN (d.fighter_a, d.fighter_b)) AND\n        d.event_date &lt;= c.event_date\nGROUP BY\n    a.fight_id\nORDER BY\n    date DESC\n</code></pre>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13227495,"title":"PHP Warning: mysql_num_rows() expects parameter 1 to be resource","body":"<p>PHP Warning:  mysql_num_rows() expects parameter 1 to be resource at line x. \nI checked for all single quotes missing and sql link . </p>\n\n<pre><code>$v = html_entity_decode($v);\n            $query_1 = sprintf(\"select part_of_speech_id from word_parts_of_speech where word = '%s'\", mysql_real_escape_string($v));\n            $res = Commons::query($query_1) ;\n            if(mysql_num_rows($res) != 0){\n                    while  ($row  =  mysql_fetch_assoc($res))  {\n\n                            if($row['part_of_speech_id']!=15){//see table down for reference\n\n                                    $query_url = \"insert into freetext_keywords(RANDOM_ID,URL,TAG_NAME,KEYWORD) values('$random_id','$url','$tagName','$v') on duplicate key update WEIGHT = WEIGHT + 1\";\n                                    $result = Commons::query($query_url);\n                            }\n                    }\n            }else{\n                    $query_url = \"insert into freetext_keywords(RANDOM_ID,URL,TAG_NAME,KEYWORD) values('$random_id','$url','$tagName','$v') on duplicate key update WEIGHT = WEIGHT + 1\";\n                    $result = Commons::query($query_url);\n            }\n\n\n    }\n</code></pre>\n"},{"tags":["mysql","query","join"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13187858,"title":"mysql query to find out non existing users","body":"<p>I am playing with 2 database tables. One is <strong>user</strong> table which contains user details like full name and active(whether the user is active or not) columns. The other one is <strong>tasks</strong> table which contains the task details of each user. So tasks table has columns called UserID and StartTime. The following query will display all user details who entered the tasks yesterday. </p>\n\n<pre><code>$today = mktime(0,0,0);\n$yesterday = $today - 86400;\n$res = $db-&gt;fetchAll(\"SELECT DISTINCT tasks.UserID,user.full_name FROM `tasks` JOIN `user` ON tasks.UserID=user.id WHERE user.active=1 AND tasks.StartTime &gt; \".$db-&gt;quote($yesterday,'integer').\" AND tasks.StartTime &lt; \".$db-&gt;quote($today,'integer'));\n</code></pre>\n\n<p>I need to find out the user details who doesn't enter the tasks yesterday. How can I modify the above query?</p>\n\n<p>Thanks!</p>\n"},{"tags":["php","mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":695,"score":-1,"question_id":5454610,"title":"Mysql remove the specific word in comma seperated string","body":"<p>My table had 'tags' field like this:</p>\n\n<h2>Tags</h2>\n\n<p>tag1,tag2,tag3</p>\n\n<p>How to remove ',tag2' including comma using mysql query. </p>\n"},{"tags":["mysql","group-concat"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":26,"score":-1,"question_id":13227175,"title":"MySQL Group Concat Single Column NULL","body":"<p>I have a column that i am looking to retrieve all matches of in one row. I am querying other data as well. Currently i am using group_concat. This has worked great until now. Sometimes there are potential NULL values in this column and this has been preventing anything from being returned.</p>\n\n<p>i have tried various other solutions posted here without success.</p>\n\n<pre><code>CREATE TABLE table1 (\nid mediumint(9) NOT NULL AUTO_INCREMENT,\nitem_num mediumint(9) NOT NULL,\nPRIMARY KEY (id)\n) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;\n\nCREATE TABLE table2 (\nid mediumint(9) NOT NULL AUTO_INCREMENT,\noneid mediumint(9) NOT NULL,\nitem_desc varchar(16) NOT NULL,\nPRIMARY KEY (id)\n) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;\n\nSELECT item_num, GROUP_CONCAT(item_desc) AS alldesc FROM table1 LEFT JOIN table2 ON table1.id = table2.oneid\n</code></pre>\n\n<p>So basically, there can be several item descripotions that may be NULL; they will be in no particular order either. So i am seeking a list with a placeholder when NULLs arise.</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13227314,"title":"Event scheduler MySql without expired time","body":"<p>I read article about the event scheduler on MySql.Then I got this structure,</p>\n\n<pre><code>CREATE\n[DEFINER = { user | CURRENT_USER }]\nEVENT\n[IF NOT EXISTS]\nevent_name\nON SCHEDULE schedule\n[ON COMPLETION [NOT] PRESERVE]\n[ENABLE | DISABLE | DISABLE ON SLAVE]\n[COMMENT 'comment']\nDO event_body;\n</code></pre>\n\n<p>I got some interested thing to know about it, \n1. Could this event schedule havent expired time?\n2. What is the ENABLE | DISABLE | DISABLE ON SLAVE mean?</p>\n\n<p>Any respon will be appreciate,Thx.</p>\n"},{"tags":["php","mysql","if-statement"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13226854,"title":"PHP syntax help on if statement","body":"<p>I'm trying to determine the right syntax from what I'm trying to do with MySQL. I'm basically saying that if a value in a certain column of a row of a table is equal to some session variables, I want to echo out info.</p>\n\n<p>I have a table with <code>subject</code>, <code>description</code> and <code>user</code>. <code>User</code> is set by taking the current user's first name and last name and inserting it into the table under <code>user</code>. This is done by the following code:</p>\n\n<pre><code>$sql=\"INSERT INTO tbl_name (subject, description, user)\nVALUES\n('$_POST[subject]','$_POST[description]','$_SESSION[firstname] $_SESSION[lastname]')\";\n</code></pre>\n\n<p>Then once I'm calling this data back out, I want to basically allow the user to delete content that they submitted themselves. The first step for me is to be able to display it in the table. I believe this is just syntax error, but I've confused myself now with how things are set up:</p>\n\n<pre><code>$sql = \"SELECT * FROM tbl_name ORDER BY subject, description \n  LIMIT {$startpoint},{$limit}\";\n$result = $mysqli-&gt;query($sql);\n$num_rows = mysqli_num_rows($result);\n\nif($num_rows&gt;0){\n$field_num = $mysqli-&gt;field_count;\necho \"&lt;h1&gt;HERE ARE SOME EXAMPLES:&lt;/h1&gt;\";\necho \"&lt;table border='0'&gt;&lt;tr&gt;\";\n\nfor($i=0; $i&lt;$fields_num; $i++)\n    {\n        $field = mysql_fetch_field($result);\n        echo \"&lt;td&gt;{$field-&gt;subject}&lt;/td&gt;\";\n        echo \"&lt;td&gt;{$field-&gt;description}&lt;/td&gt;\";\n        echo \"&lt;td&gt;{$field-&gt;user}&lt;/td&gt;\";\n        if('$field-&gt;user' == '$_SESSION[firstname] $_SESSION[lastname]'){\n          echo '&lt;td&gt;You can delete this&lt;/td&gt;';\n        }\n    }\n</code></pre>\n\n<p>I figured the <code>$field-&gt;user</code> would equal <code>$_SESSION[firstname] $_SESSION[lastname]</code> because that's how it was initially submitted to the table (without the '.' for concatenation).</p>\n\n<p>Any help would be appreciated. Thanks!</p>\n\n<h2>EDIT</h2>\n\n<p>Here's the result of my table output code. The results are actually being display with $cell instead of from within the for loop I believe. I've added the if statement in after the but it doesn't seem to recognize <code>echo \"&lt;td&gt;\".$field-&gt;user.\"&lt;/td&gt;\";</code> which makes me think that that is where the problem lies. What I would like to do is be able to add the if statement in a  immediately after `echo {$field->user}\"; to keep the code clean. I think I've confused myself thoroughly:</p>\n\n<pre><code>if($num_rows&gt;0){\n$field_num = $mysqli-&gt;field_count;\necho \"&lt;h1&gt;HERE ARE SOME JOBS:&lt;/h1&gt;\";\necho \"&lt;table border='0'&gt;&lt;tr&gt;\";\n\nfor($i=0; $i&lt;$fields_num; $i++)\n{\n    $field = mysql_fetch_field($result);\n    echo \"&lt;td&gt;{$field-&gt;subject}&lt;/td&gt;\";\n    echo \"&lt;td&gt;{$field-&gt;description}&lt;/td&gt;\";\n    echo \"&lt;td&gt;{$field-&gt;user}&lt;/td&gt;\";\n\n    if($field-&gt;user == $_SESSION[firstname].\" \".$_SESSION[lastname]){\n    echo '&lt;td&gt;You can delete this&lt;/td&gt;';\n    }\n    else{\n    echo \"&lt;td&gt;\".$field-&gt;user.\"&lt;/td&gt;\";\n    echo \"&lt;td&gt;\".$_SESSION[firstname].\" \".$_SESSION[lastname].\"&lt;/td&gt;\";\n    }\n}\n\necho \"&lt;/tr&gt;\\n\";\nwhile($row = mysqli_fetch_row($result))\n{\n    echo\"&lt;tr&gt;\";\n\n    foreach($row as $cell)\n        echo \"&lt;td&gt;$cell&lt;/td&gt;\";\n        echo \"&lt;/tr&gt;\\n\";\n}\nmysqli_free_result($result);\n}\nelse{\necho 'There are no jobs!';\n}\n</code></pre>\n"},{"tags":["mysql","vb.net","winforms","visual-studio-2010","datagridview"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13227174,"title":"Updating Data in DGV in VB.NET using UPDATE Query","body":"<p>I asked a question earlier <a href=\"http://stackoverflow.com/questions/13225502/updating-multiple-selected-rows-in-dgv-in-vb-net\">Updating Multiple Selected rows in DGV in VB.NET</a> but I didn't quite get what I was looking for. I have a <code>DataBound DGV</code> it has 3 <code>Columns</code> namely <code>ID(not pk), Name, and Status</code>. I have 2 Buttons <code>Add and Post</code>. Add, adds Data to the DGV and DataBase(MySql) but in Status, it adds \"No\". What I want to do is for example I have 3 Rows in my DGV and highlight those 3 and click Post, the value in Status will be changed to \"Yes\". Here is what I have done so far, and it's able to change \"No\" to \"Yes\" in the <code>Column</code> <code>\"Posted\"</code>. The Problem is that even the non <code>selected</code> or <code>Highlighted</code> Rows, are also updated. I want only the <code>Highlighted</code> Rows to be updated. Any Hints or Tips Would be greatly appreciated. Please and thank you.</p>\n\n<pre><code>Using _conn As New MySqlConnection(\"Server = localhost; Username= root; Password =; Database = test\")\nUsing _comm As New MySqlCommand()\n    With _comm\n      .parameters.clear()\n      .Connection = _conn\n          For nRow = TestingDataGridView.SelectedRows.Count - 1 To 0 Step -1\n                .CommandText = \"UPDATE testing SET Posted = @iChange\"\n                .CommandType = CommandType.Text\n                .Parameters.AddWithValue(\"@iChange\", \"Yes\")\n            Next\n    End With\n    Try\n        _conn.Open()\n        _comm.ExecuteNonQuery()\n    Catch ex As MySqlException\n        MsgBox(ex.Message.ToString())\n    End Try\n\nEnd Using\n</code></pre>\n\n<p>End Using</p>\n"},{"tags":["php","mysql","jpg"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13224782,"title":"stored db url does not echo image","body":"<p>I have a MySQL db with a table, that has the following field: </p>\n\n<p>txtProductBowlImage: example \" C:\\BowlPhotos\\Thumbs\\MapleTi07-030tmb.jpg\"</p>\n\n<p>I want to use the data in that field to produce an image that I can print to a text file.</p>\n\n<p>I read the data then try to echo it to the screen...and I see a small icon, but no image.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>    &lt;?php\n $con = mysql_connect(\"localhost\",\"xxxxxxx\",\"zzzzzzzzzzzzzzz\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n\nmysql_select_db(\"scwdb\", $con);\n\n$result = mysql_query(\"SELECT * FROM tblsplintersbowlinventory WHERE txtVenue = 'Shoreline'\");\n\nwhile($row = mysql_fetch_array($result))\n  {\n  echo $row['intProductID'] . \" \" . $row['txtProductBowlCode'] . \" \" . $row['txtProductBowlImage'] . \"]\";\n  echo \"&lt;br /&gt;\";\n  echo \"&lt;br /&gt;\";\n  echo 'txtProductBowlImage: ' . $row['txtProductBowlImage'];\n  echo \"&lt;br /&gt;\";\n  $img = $row['txtProductBowlImage'];\n  echo '...............$img: ' . $img;\n  echo \"&lt;br /&gt;\";\n  echo \"&lt;img src=\" . $img . \"&gt;\";\n  echo \"&lt;img src='C://BowlPhotos//Thumbs//Ash07-013_btmb.jpg'&gt;\";\n  echo \"&lt;img src='Ash07-013_btmb.jpg'&gt;\";\n  echo \"&lt;br /&gt;\";\n  echo \"==================\";\n  echo \"&lt;br /&gt;\";\n  }\n\nmysql_close($con);\n?&gt; \n</code></pre>\n\n<p>Note that I try 3 times to show an image:\n1: using the url from the db and putting it in an echo statement\n   this url uses the '\\' separater in the data.\n2: imbedding a sample of the actual text path and filename in an echo statement\n   this url uses the '/' separater in the url.\n3: imbedding only the filename, no path, in an echo statement</p>\n\n<p>When I run this, I get the following output:</p>\n\n<p><img src=\"http://i.stack.imgur.com/KpFDc.jpg\" alt=\"enter image description here\"></p>\n\n<p>Echo #1 &amp; #2 produce the icon, echo #3 shows a local copy of the image in the same folder as the php.</p>\n\n<p>From this it appears that it is the path that is not being used, either with the '\\' or '/' separater. </p>\n\n<p>I assume the '\\' may be seen as an escape, but why doesn't the url with the '/' work? </p>\n"},{"tags":["php","mysql","utf-8","character-encoding"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1432,"score":0,"question_id":3273408,"title":"PHP + MySQL encoding issues for Portuguese (PT-Br)","body":"<p>I'm developing a website in Brazilian Portuguese and I'm facing some really annoying encoding problems.</p>\n\n<p>Words that should be written this way: óbito are being written this way: �bito</p>\n\n<p>I have noticed that while the texts are still at the database they are ok. But when I use <code>echo</code> with PHP, the encoding problem comes up.</p>\n\n<p>List of things I have already done and did not help:</p>\n\n<p>1- Set the PHP files to be saved as UTF-8</p>\n\n<p>2- I'm using this meta tag <code>&lt;meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\" /&gt;</code> </p>\n\n<p>3- I used this SQL Queries: </p>\n\n<pre><code>CREATE DATABASE db_name\n    CHARACTER SET utf8\n    DEFAULT CHARACTER SET utf8\n    COLLATE utf8_general_ci\n    DEFAULT COLLATE utf8_general_ci\n    ;\n\nALTER DATABASE db_name\n    CHARACTER SET utf8\n    DEFAULT CHARACTER SET utf8\n    COLLATE utf8_general_ci\n    DEFAULT COLLATE utf8_general_ci\n    ;\n\nALTER TABLE tbl_name\n    DEFAULT CHARACTER SET utf8\n    COLLATE utf8_general_ci\n    ;\n</code></pre>\n"},{"tags":["mysql","sql","perl","query","dbi"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":66,"score":0,"question_id":13172755,"title":"Replace quotation marks in sql query in perl script","body":"<p>I have a text file of data that I am importing into a MySQL database. Some of the lines unfortunatley contain quotation marks, which causes my SQL queries to go haywire. I would like to get rid of any field that has quotation marks, or at very least ignore them in my query.</p>\n\n<p>I found something that might work, but being as this is run through a Perl script I am having issues \"escaping\" the quotation marks. I really don't know how and can't figure it out. I would like to just search through my table and delete any quotation marks (\") that it may find or replace it with a single quotation mark or space or anything really.</p>\n\n<pre><code>my $myreplacequery = \"REPLACE(s.Title, '\"','')\";\n$sth = $dbh-&gt;prepare($myreplacequery);\n$sth-&gt;execute;\n</code></pre>\n\n<p>Anyone have any ideas?</p>\n\n<p>Thanks!</p>\n"},{"tags":["mysql","subquery"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13227051,"title":"Execute a subquery in MySQL that returns multiple rows?","body":"<p>I am executing a query that obviously contains a subquery in MySQL. </p>\n\n<p>Let me just jump into the code:</p>\n\n<pre><code>SELECT DATEDIFF(CURDATE(), \n(SELECT due FROM checkOut JOIN People ON checkOut.p_id = People.p_id\n WHERE CASE WHEN DATE_SUB(date_add(CURDATE(),INTERVAL 4 MONTH), INTERVAL 3 MONTH) \n &gt;= checkOut.checkTime THEN 1 ELSE 0 END ORDER BY checkOut.due)\n );\n</code></pre>\n\n<p>The main query is the <code>SELECT DATEDIFF()</code>. Within that is my subquery which essentially searches through the table to look for items that are overdue based on an interval. I know that there will be multiple rows returned from the query and that it will not work with how I currently have it set up. </p>\n\n<p>What I want are multiple values to be returned from my <code>SELECT DATEDIFF()</code>, so that I can loop through it with php later. To elaborate, I want each of the rows returned in the subquery to have an associated value from <code>DATEDIFF()</code>. How can I modify this query to do what I want? Or if anyone has a better method, please let me know. </p>\n\n<p>Any help is appreciated.</p>\n\n<p>In case you are wondering the why there is a <code>DATE_ADD()</code> within the <code>DATE_SUB()</code>, it is to simply make the query work for today. </p>\n"},{"tags":["php","mysql","database","data","import"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13043304,"title":"Auto Import Mysql from XSLX","body":"<p>I have datas that will be added monthly, every month I must import more than 30 XSLX! When I am using Navicat I must set the relation from xslx column with mysql table column and I do it repatedly! It's wasting my time ...\nI was wondering that I can import from xlsx to MYSQL automatically, using PHP or Navicat or anything else maybe? Please help me, thanks</p>\n\n<p><hr />\nSOLVED :\nI am using SimpleXLSX, it's faster and efficient. Very recommended for everyone!</p>\n"},{"tags":["c#","asp.net","mysql","drop-down-menu"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":13226432,"title":"Populate dropdown list using c# containing MySQL db table","body":"<p>I am trying to populate the following dropdown list with information from MySQL database.</p>\n\n<pre><code>&lt;asp:DropDownList ID=\"DeleteUsersList\" runat=\"server\" AutoPostBack=\"True\" \n    onselectedindexchanged=\"DeleteUsersList_SelectedIndexChanged\"&gt;&lt;/asp:DropDownList&gt;\n</code></pre>\n\n<p>I am using a .aspx source file for the html that contains the dropdown list.\nI also have .aspx.cs file that contains C# code and I'm usying MySQL server for the database.</p>\n\n<p>Basically I am trying to populate the dropdown list using a c# connection to MySQL database when the page is loaded. I have not been able to find anything specific with this information so if anyone can help me it would greatly be appreciated.</p>\n\n<p>Thanks ahead.</p>\n"},{"tags":["c#","mysql","amazon-ec2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13226800,"title":"Desktop connection to MySQL in Amazon EC2 using C# (How To)","body":"<p>In my desktop application I need to connect to MySQL database in Amazon EC2. I tried to built the connection string but am very confused as to what parameters I need to include and how the connection string should look like and what commands need to call. Can anyone experience in this provide me with sample listings so that I can follow? Your help is very much appreciated.</p>\n\n<p>Information I have on EC2 which I use to connect successfully using Workbench:</p>\n\n<ul>\n<li>SSH Hostname</li>\n<li>SSH Username</li>\n<li>SSH Key File (reside in my PC)</li>\n<li>MySQL Hostname (ie 127.0.0.1)</li>\n<li>MySQL Server Port (ie 3306)</li>\n<li>Userpassword</li>\n</ul>\n"},{"tags":["mysql","sql","query","sql-update"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13226657,"title":"Insert text in each row of mysql field","body":"<p>I have a table with this structure :</p>\n\n<pre><code>ID | IMG\n_____________\n1  | img.jpg\n2  | otherimg.png\n3  | img2.png \n4  | someimg.gif\n5  | otherelseimg.jpg\n6  | dummy.jpg\n7  | jusimg.jpg\n</code></pre>\n\n<p>How can I modified each row to become like this :</p>\n\n<pre><code>ID | IMG\n_____________\n1  | folder/img.jpg\n2  | folder/otherimg.png\n3  | folder/img2.png \n4  | folder/someimg.gif\n5  | folder/otherelseimg.jpg\n6  | folder/dummy.jpg\n7  | folder/jusimg.jpg\n</code></pre>\n"},{"tags":["mysql","sql","phpmyadmin"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13226520,"title":"Selecting MYSQL column conditionally","body":"<p>Example schema for my question is given at <a href=\"http://sqlfiddle.com/#!2/bbe5b\" rel=\"nofollow\">SQLFiddle</a> and as follow:</p>\n\n<pre><code>CREATE TABLE `players` (\n  `player1id` int(11) NOT NULL,\n  `player2id` int(11) NOT NULL,\n  PRIMARY KEY (`player1id`,`player2id`)\n) ENGINE=InnoDB;\n\nINSERT INTO `players` values\n(1,5),\n(1,7),\n(5,3),\n(5,4),\n(2,1);\n</code></pre>\n\n<p>In a online game, I want to select opponent, which could be in player <code>player1id</code> or <code>player2id</code>.</p>\n\n<p>Example Input/ output needed</p>\n\n<pre><code>Input 1: Output 5, 7, 2\nInput 5: Output 1, 3 ,4\n&amp; so on.\n</code></pre>\n\n<p>That is, required data could be in any column but I need output in single column conditionally or any other way. I heard about MySQL conditional column but could not create query to get required output. Can someone please help with required query.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Based on <a href=\"http://forums.mysql.com/read.php?10,6639,6677#msg-6677\" rel=\"nofollow\">this link</a>, I run following query but failed.</p>\n\n<pre><code>SELECT IF(PLAYER1ID IS 1,PLAYER2ID as opponent,PLAYER1ID as opponent) \nFROM players\nWHERE PLAYER1ID = 1 OR PLAYER2ID = 1;\n</code></pre>\n"},{"tags":["mysql","idiorm"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13226655,"title":"Is Idiorm take raw query from database without array of parameter?","body":"<p>I'm trying to take a query from database to make it run with Idiorm, but I'd noticed that in order to use raw query, I must specify the variable with an array. Can I just take a query from database and assign it to a variable and put it into raw query without specify the existing variables in array? Thanks in advance.</p>\n"},{"tags":["java","android","mysql","ksoap2","android-ksoap2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13226321,"title":"java.lang.ClassCastException: org.ksoap2.serialization.SoapObject in android","body":"<p>Hi i have developed one android application.</p>\n\n<p>The app purpose is retrieve data from mysql database and display in android device.</p>\n\n<p>This is my android code:</p>\n\n<pre><code>public class RetailerActivity extends Activity {\n private final String NAMESPACE = \"http://ws.testprops.com\";\n    private final String URL = \"http://krish.jelastic.servint.net/Retrieve/services/Fetch?wsdl\";\n    private final String SOAP_ACTION = \"http://ws.testprops.com/customerData\";\n    private final String METHOD_NAME = \"customerData\";\n/** Called when the activity is first created. */\n@Override\npublic void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.main);\n    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); \n    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);\n    envelope.setOutputSoapObject(request);\n\n    HttpTransportSE ht = new HttpTransportSE(URL);\n    try {\n        ht.call(SOAP_ACTION, envelope);\n        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();\n        SoapPrimitive s = response;\n        String str = s.toString();\n        String resultArr[] = str.split(\"&amp;\");//Result string will split &amp; store in an array\n\n        TextView tv = new TextView(this);\n\n        for(int i = 0; i&lt;resultArr.length;i++){\n        tv.append(resultArr[i]+\"\\n\\n\");\n       }\n        setContentView(tv);\n\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}}\n</code></pre>\n\n<p>If i have to run the app means blank screen only displayed.it is taking too long time nearly 1 hour\nalso  am getting following error on my android console window:</p>\n\n<pre><code>  11-05 10:38:27.868: W/System.err(837): java.lang.ClassCastException: org.ksoap2.serialization.SoapObject\n  11-05 10:38:27.878: W/System.err(837):   at com.retailer.client.RetailerActivity.onCreate(RetailerActivity.java:29)\n  11-05 10:38:27.878: W/System.err(837):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)\n  11-05 10:38:27.878: W/System.err(837):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)\n  11-05 10:38:27.878: W/System.err(837):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)\n  11-05 10:38:27.878: W/System.err(837):   at android.app.ActivityThread.access$2300(ActivityThread.java:125)\n  11-05 10:38:27.878: W/System.err(837):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)\n  11-05 10:38:27.878: W/System.err(837):   at android.os.Handler.dispatchMessage(Handler.java:99)\n 11-05 10:38:27.878: W/System.err(837):   at android.os.Looper.loop(Looper.java:123)\n 11-05 10:38:27.878: W/System.err(837):   at android.app.ActivityThread.main(ActivityThread.java:4627)\n 11-05 10:38:27.878: W/System.err(837):   at java.lang.reflect.Method.invokeNative(Native Method)\n 11-05 10:38:27.878: W/System.err(837):   at java.lang.reflect.Method.invoke(Method.java:521)\n 11-05 10:38:27.878: W/System.err(837):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)\n 11-05 10:38:27.878: W/System.err(837):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)\n 11-05 10:38:27.888: W/System.err(837):   at dalvik.system.NativeStart.main(Native Method)\n</code></pre>\n\n<p>please help me.how can i resolve this error.</p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13215632,"title":"Table Lock Fails","body":"<p>I'm having trouble getting a table to lock in MySQL. I've tried testing for concurrent requests by running two scripts at the same time on different browsers.</p>\n\n<p>Script 1:</p>\n\n<pre><code>mysql_query(\"lock tables id_numbers write\");\n\n$sql = \"select number from id_numbers\";\n$result = mysql_query($sql);\n\nif ($record = mysql_fetch_array($result))\n{\n  $id = $record['number'];\n}\n\nsleep(30);\n\n$id++;\n\n$sql = \"update id_numbers set number = '$id'\";\n$result = mysql_query($sql);\n\nmysql_query(\"unlock tables\");\n</code></pre>\n\n<p>Script 2:</p>\n\n<pre><code>$sql = \"select number from id_numbers\";\n$result = mysql_query($sql);\n\nif ($record = mysql_fetch_array($result))\n{\n  $id = $record['number'];\n}\n\necho $id;\n</code></pre>\n\n<p>I start Script 1 first, then start Script 2.  Theoretically, Script 2 should wait 30+ seconds until Script 1 unlocks the table, and then output the updated ID.  But it immediately outputs the original ID, so the lock is obviously not taking effect.  What could be going wrong?</p>\n\n<p>BTW, I know I shouldn't still be using mysql_*, but I'm stuck with it for now.</p>\n"},{"tags":["mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13225824,"title":"How to generate random codes, and run an sql multiple times","body":"<p>I have a query I need to run and I have 2 problems. </p>\n\n<p>first here is my query:</p>\n\n<pre><code>INSERT INTO  `anzie_oscommerce`.`discount_codes` (\n`discount_codes_id` ,\n`discount_description` ,\n`products_id` ,\n`categories_id` ,\n`manufacturers_id` ,\n`excluded_products_id` ,\n`customers_id` ,\n`orders_total` ,\n`order_info` ,\n`exclude_specials` ,\n`discount_codes` ,\n`discount_values` ,\n`minimum_order_amount` ,\n`expires_date` ,\n`number_of_orders` ,\n`number_of_use` ,\n`number_of_products` ,\n`status`\n)\nVALUES (\n'' ,  'GALA 2012', '' , '' , '' , '' , '' ,  '2',  '1',  '0',  substr(md5(uniqid(rand(), true)), 0, 8),  250,  '0.0000',  '2013-22-06',  '0',  '1',  '0',  '1'\n);\n</code></pre>\n\n<p>The first problem is I need to generate the random code which I am trying to do with the uniqid function I took from php but I know that is not possible. Is there a way to do something similar in sql?</p>\n\n<p>The second problem is I need to run this 250 times to generate 250 different discount codes. Is there a quick way to run an sql multiple times?</p>\n"},{"tags":["mysql","count","unique-values"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13226101,"title":"Finding the unique values in MySQL by few columns","body":"<p>So, i have the following structure of my table:</p>\n\n<pre><code>id user_agent user_ip\n---------------------\n18 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko)     Chrome/22.0.1229.94 Safari/537.4 4.3.2.1\n13 Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4 1.2.3.4\n</code></pre>\n\n<p>How i can find only unique values based on two columns(user_agent and user_ip) and count of it?\nI just tried following solution: </p>\n\n<pre><code>SELECT user_agent, COUNT(*) c FROM statistics GROUP BY user_agent, user_ip HAVING c &gt; 1;\n</code></pre>\n\n<p>But it won't work as i desired.\nAny help will be appreciated. Thanks.</p>\n"},{"tags":["mysql","query"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13216427,"title":"mysql: row number for query results grouped by FK","body":"<p>I have a table that has the following columns:\nid | fk_id | rcv_date</p>\n\n<p>There may be multiple records with a common fk_id, which represents a foreign key id in a related table.</p>\n\n<p>I need to create a query that will assign a row number to each record, grouped by fk_id, sorted by rcv_date.</p>\n\n<p>I originally began with the following query, which works quite well for sorting and assigning row numbers:</p>\n\n<pre><code>SELECT @row:=@row +1 AS ordinality, c.fk_id, rcv_date\nFROM (SELECT @row:=0) r, mytable c\nORDER BY rcv_date\n</code></pre>\n\n<p>However -- the row count and sorting is done across the entire dataset. I need the counting to be within a common fk_id. For example, the following sample data would return (the first column represents the row count/ordinality):</p>\n\n<pre><code>1 | 5 | 2011-10-01\n2 | 5 | 2011-10-14\n3 | 5 | 2011-11-02\n4 | 5 | 2011-12-17\n1 | 8 | 2011-09-03\n2 | 8 | 2011-11-12\n1 | 9 | 2011-10-08\n2 | 9 | 2011-10-10\n3 | 9 | 2011-11-19\n</code></pre>\n\n<p>The middle column represents the fk_id. As you can see, the sorting and row count is within the fk_id \"grouping.\"</p>\n\n<p><strong>UPDATE</strong>\nI have a query that seems to be working, but would like some input as to whether it can be improved:</p>\n\n<pre><code>SELECT IF(@last = c.fk_id, @row:=@row +1, @row:=1) AS ordinality, @last:=c.fk_id, c.fk_id, rcv_date\nFROM (SELECT @row:=0) r, (SELECT @last:=0) l, mytable c\nORDER BY c.fk_id, rcv_date\n</code></pre>\n\n<p>So what this does is order by fk_id and then rcv_date -- which essentially handles my grouping. Then I use a second variable to compare the fk_id in the previous record with the current record: if it's the same, we increment the row; if different, we reset to 1.</p>\n\n<p>My tests with real data appear to be working. I suspect it's a pretty inefficient query though -- so if anyone has ideas for improving it, or see possible flaws, I would love to hear.</p>\n"},{"tags":["java","mysql","java-ee","tomcat"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":32,"score":0,"question_id":13225730,"title":"Storing user uploaded file in the web-server","body":"<p>We are currently developing a web-application that lets user upload their audio files(any audio files,mp3,wav,ogg etc etc).</p>\n\n<p>My question is, there are audio files that are not big enough for the database and it is not a good practice, my question is where should I place these audio files? Should I place them in a folder in the webserver or are there any alternatives like a file storage for java? Because putting these files in the database is not enough. I was thinking I'll just place the files in file path in the database. We are currently using tomcat server, and mysql database.</p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13225457,"title":"Calculating probabilities in MySQL","body":"<p>I know that my order requires many calculations but I hope you will see it as a challenge.</p>\n\n<p>I've a table named <code>matchup</code> that looks like this:</p>\n\n<p><em>note: the dataype for each column (except <code>players</code>) is <code>decimal(5,2)</code></em></p>\n\n<pre><code>+------------------------------------------------------------------+\n|players    player1 player2 player3 player4 player5 player6 player7|\n+------------------------------------------------------------------+\n|player1    NULL    47.01   52.22   47.59   47.79   43.67   47.61  |\n|player2    51.34   NULL    51.76   49.29   48.22   44.46   48.16  |\n|player3    46.00   46.33   NULL    41.90   40.46   41.17   39.66  |\n|player4    50.34   48.39   55.65   NULL    50.47   44.89   48.48  |\n|player5    50.23   49.25   56.76   46.76   NULL    47.27   47.61  |\n|player6    54.96   53.77   56.92   53.33   51.36   NULL    49.07  |\n|player7    51.03   50.00   58.12   49.12   50.20   48.55   NULL   |\n+------------------------------------------------------------------+\n</code></pre>\n\n<p>This table shows the probabilities (in%) of each player against other players. The table should be read as follows: for example player1 has 47.01% chance of winning against player2. The probability of a player against himself does not make sense here and that data should be omitted when calculating the odds.</p>\n\n<p>Imagine that you are the manager of a team and you know that your opponents team will be <strong>composed of 1-5 players</strong>. The players names will be given in the following variables <code>$a</code>, <code>$b</code>, <code>$c</code>, <code>$d</code>, <code>$e</code>. For example, it could be <code>$a='player2';</code> <code>$b='player4';</code> <code>$c='player7'</code> (in this case we have only 3 players in your opponents team).</p>\n\n<p>Given this information, the goal is to determine which are the best players to face the enemy team as well as providing their chance to win againt the other team.</p>\n\n<p>In this example, the probability for each player to win against the opponent team is given by:</p>\n\n<pre><code>player1 = mean(47.01; 47.59; 47.61) = 47.40\nplayer2 = cannot be chosen (because it is already chosen by the other team)\nplayer3 = mean(46.33; 41.90; 39.66) = 42.63\nplayer4 = cannot be chosen\nplayer5 = mean(49.25; 46.74; 47.71) = 47.87\nplayer6 = mean(53.77; 53.33; 49.07) = 52.06\nplayer7 = cannot be chosen\n</code></pre>\n\n<p>This results should be presetend as an associative array with values in descending order:</p>\n\n<pre><code>$result = array(\n'player6' =&gt; '52.06',\n'player5' =&gt; '47.87',\n'player1' =&gt; '47.40',\n'player3' =&gt; '42.63'\n);\n</code></pre>\n\n<p>Note that this table is just an extract, the code should take into account that the table may involve more than 7 players.</p>\n\n<p>Any help would be appriciated!</p>\n"},{"tags":["mysql","query"],"answer_count":1,"favorite_count":1,"up_vote_count":6,"down_vote_count":1,"view_count":53,"score":5,"question_id":13225620,"title":"Parse in MySQL using comma as delimiter","body":"<p>I have two tables</p>\n\n<p>Table1 with list of users comma separated</p>\n\n<pre><code>Name    UserID\nabc     A,B,C,D\ndef     A,B,C\n</code></pre>\n\n<p>Table2</p>\n\n<pre><code>Name   UserID\nabc    A\nabc    B\nabc    C\ndef    A\ndef    B\n</code></pre>\n\n<p>I need to find the users that are in table1 for each Name but not in table2 (There won't ever be an instance when a UserID to Name pair is present in table2 but not in table1 as CSV). </p>\n\n<p>The output should be</p>\n\n<pre><code>Name    UserID\nabc     D\ndef     C\n</code></pre>\n\n<p><em>I can do this with PHP but <strong>is there a way this can be done through a query?</em></strong> I am not sure where to begin in case I'm doing this as a query.  Can I parse in MySQL using comma as delimiter?</p>\n"},{"tags":["php","mysql","sql","pdo","dynamic-sql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13225448,"title":"SQLSTATE[HY000]: General error","body":"<p>I have a mysql dynamic-sql statement and I want to run it using pdo, and I get the following error message:</p>\n\n<blockquote>\n  <p>Warning: PDOStatement::fetchAll() [pdostatement.fetchall]:\n  SQLSTATE[HY000]: General error in C:\\xampp\\htdocs\\tags\\cobasql.php on\n  line 29</p>\n</blockquote>\n\n<p>Here's my php code:</p>\n\n<pre><code>&lt;?php \n   $uname = 'root'; //nama username database \n   $pwd = ''; //Password database \n   $dbname = 'eav_latihan'; //nama Database \n\n   /* Initialisasi database */ \n   $db = new PDO('mysql:host=localhost;dbname='.$dbname, $uname, $pwd); \n   $db-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING); \n\n\n   $query = \"SET @sql = NULL; \". \n            \" SELECT GROUP_CONCAT(DISTINCT CONCAT('MAX(IF(a.Name = ''', \". \n            \" a.Name, ''', ca.value, NULL)) AS ', a.Name )) INTO @sql \". \n            \" FROM cust_attribute ca \". \n            \" INNER JOIN attribute a ON ca.idAttribute = a.idAttribute \". \n            \" INNER JOIN customer c ON c.idCustomer = ca.idCustomer \". \n            \" WHERE a.publish = 'Y'; \". \n            \" SET @sql = CONCAT('SELECT c.idCustomer, c.namaCustomer, ' \". \n            \" ' c.email, c.noTelp, ', @sql, ' FROM cust_attribute ca', \". \n            \" ' INNER JOIN attribute a ON ca.idAttribute = a.idAttribute', \". \n            \" ' INNER JOIN customer c ON c.idCustomer = ca.idCustomer', \". \n            \" ' GROUP BY c.idCustomer'); \". \n            \" SELECT @sql; \". \n            \" prepare stmt FROM @sql; \". \n            \" execute stmt;\"; \n\n   $result_array = array();\n   $queryku = $db-&gt;query($query);\n   $result_array = $queryku-&gt;fetchAll(PDO::FETCH_OBJ);\n   echo $result_array;\n?&gt;\n</code></pre>\n\n<p>Anyone here can help me or give me a suggest please??</p>\n"},{"tags":["mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13225461,"title":"Add a positive integer constraint to a integer column in MySQL","body":"<p>How can we add a constraint which enforces a column to have only positive values.</p>\n\n<p>Tried the following mysql statement but it doesn't work</p>\n\n<pre><code>create table test ( test_column integer CONSTRAINT blah &gt; 0);\n</code></pre>\n"},{"tags":["php","mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":13225332,"title":"how to retrieve row value using php mysql","body":"<p>source code:</p>\n\n<pre><code>$display = 1004;\n$result1 = mysql_query(\"SELECT id, username FROM users where parentid=$diplay\");\n$resrow = mysql_fetch_row($result1); \n$g = $resrow[0]; \n$g1 = $resrow[1]; \n$g2 = $resrow[3]; -error not display\n$g3 = $resrow[4];\n$g4 = $resrow[5];\n\n\necho \"ID: $g\";\necho \"ID: $g2\";\necho \"ID: $g3\";\necho \"ID: $g4\";\n</code></pre>\n\n<p>i have to show 1005, 1007, 1008 but i can retrieve $g value only:</p>\n\n<p>ans: 1004 daniel</p>\n\n<p>how i can show other values 1007,1008</p>\n\n<p>Table</p>\n\n<pre><code>id           ----name  -----    parentid\n-----------------------------------\n1004            daniel         1003\n1005            peter          1004\n1007            michael        1004\n1008            sam            1004\n</code></pre>\n\n<p>ans:</p>\n\n<pre><code>        $g\n        1004\n     /        \\\n    g2         g3   \n   1005       1007\n</code></pre>\n"},{"tags":["mysql","special-characters"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13225609,"title":"MySql - trying to punctuate a sentence","body":"<p>Here is my query, which tries to put a full stop at the end of every sentence that doesn't end in proper punctuation</p>\n\n<pre><code>UPDATE SentenceTable SET sentence=concat(sentence, '.') WHERE sentence NOT LIKE '%.' OR sentence NOT LIKE '%?' OR sentence NOT LIKE '%!';\n</code></pre>\n\n<p>However, this ends up putting a full stop at the end of every single sentence. I'm afraid I have a problem with the regular expressions from above, maybe I am not escaping some special characters correctly? What am I doing wrong? How should this query read?</p>\n\n<p>Thanks!</p>\n"},{"tags":["mysql","sql","query","constraints"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":765,"score":0,"question_id":5156281,"title":"Mysql adding a constraint: force a field to get specific values","body":"<p>I have a simple mysql table with the following attributes: <code>Name, Surname, Role</code>.</p>\n\n<p>I want the Role field to get only 2 possible values: <code>Supervisor</code> or <code>Operator</code> and to result in error when a query tries to insert something different from that 2 values.</p>\n\n<p>For example, i want the following query to return an error:</p>\n\n<pre><code>INSERT INTO tablename (name,surname,role) VALUES ('max','power','footballplayer');\n</code></pre>\n\n<p>I tried setting the field <code>Role</code> as a <code>ENUM</code> or <code>SET</code> type but it will just leave the field empty instead of firing and error :(</p>\n"},{"tags":["php","mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":50,"score":0,"question_id":13225410,"title":"PHP Insert off by one","body":"<p>I'm trying to loop through images and their associated thumbnails on the filesystem and insert into a database... but I am having an off by one error at a seemingly random location.</p>\n\n<pre><code>$Charts = scandir('./images/Charts/'); \n$ChartsPath = './images/Charts/';\n$ChartsThumbs = scandir('./images/Charts/ChartsThumbs/');\n$ChartsThumbPath = './images/Charts/ChartsThumbs/';\n$j = 0;\n\nfor($x=0; $x&lt;count($Charts); $x++)\n        {           \n            if(!is_dir($ChartsPath . $Charts[$x]))\n            {\n                if(!is_dir($ChartsThumbPath . $ChartsThumbs[$x]))\n                {\n                    $sql = \"INSERT INTO \n                                comics (imgid, imgtitle, imgpath, imgthumb, imgcatidFK)                 \n                            VALUES \n                                ('$j', '$Charts[$x]', '$ChartsPath$Charts[$x]', '$ChartsThumbs[$x]', 1)\n                            ON DUPLICATE KEY UPDATE \n                                imgid=VALUES(imgid),\n                                imgtitle=VALUES(imgtitle),\n                                imgpath=VALUES(imgpath),\n                                imgthumb=VALUES(imgthumb),                          \n                                imgcatidFK=VALUES(imgcatidFK)\";         \n\n                    $mysqli-&gt;query($sql) or trigger_error($mysqli-&gt;error.$sql);     \n                    $j++;\n                }\n            }\n        }\n</code></pre>\n\n<p>In the database.. I've boxed in red where the off by one issue starts occurring...</p>\n\n<p>\"Cookie Psychology\" Should be matched with \"Cookie Psychology Thumbnail\"\n<img src=\"http://i.stack.imgur.com/4EJkA.jpg\" alt=\"enter image description here\"></p>\n\n<p>Anyone have any ideas?\nMuch appreciated!</p>\n"},{"tags":["php","html","mysql","sql","website"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":71,"score":0,"question_id":13224549,"title":"Am I protecting my website enough from sql injection?","body":"<p>I have made a website where I only display items from my db tables, I pass variables from one page to the other to display certain items, there is no adding, deleting or editing to my table items in my website is just displaying information. </p>\n\n<pre><code>$aaa = _POST['aaa'];\n\n$databasehost = \"localhost\";\n$databasename = \"mydb\";\n$databaseusername = \"user\";\n$databasepassword = \"password\";\n\n// Connect to the database server\n$dbcnx = @mysql_connect($databasehost, $databaseusername, $databasepassword);\n if (!$dbcnx) {\n echo( \"&lt;font color='red'&gt;&lt;P&gt;can't connect to server.&lt;/P&gt;&lt;/font&gt;\" );\n exit();\n  }\n // Select the database\n if (! @mysql_select_db($databasename) ) {\n echo( \"&lt;font color='red'&gt;&lt;P&gt;can't connect to db &lt;/P&gt;&lt;/font&gt;\");\n exit();\n  }\n\n $aaa = mysql_real_escape_string($aaa)\n\n // and with $aaa I do my query\n</code></pre>\n\n<p>I have read that protecting my variables with the mysql_real_escape_string() I stop any injections into my query's but I feel vulnerable with:</p>\n\n<pre><code> $databasehost = \"localhost\";\n $databasename = \"mydb\";\n $databaseusername = \"user\";\n $databasepassword = \"password\";\n</code></pre>\n\n<p>Am I just paranoid or is there a way protect this information that connects to y server and data base?</p>\n"},{"tags":["php","html","mysql","sysadmin"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":13219921,"title":"How can I populate HTML table numbered rows based on whether they match row number?","body":"<p>So, I asked <a href=\"http://stackoverflow.com/questions/13187927/php-mysql-populate-html-table-numbered-rows-based-on-whether-they-match-row-nu\">this question</a> earlier this week, and <em>@newfurniturey</em> helped me out, but now I have a new problem: I'd like to be able to put devices in that span more than one U (hence, the usize column in the devices db table) - some devices can span take up half a cabinet. Also, I'd like to be able to mark devices as being in the front or rear of the cabinet, but that should be simple enough for me to figure out.</p>\n\n<p>Here's the working code (see old question for db setup) for just 1U devices:</p>\n\n<pre><code>&lt;SCRIPT LANGUAGE=\"JavaScript\" type=\"text/javascript\"&gt;\n&lt;!--\n    function clickHandler(e)\n    {\n        var targetId, srcElement, targetElement;\n        if (window.event) e = window.event; \n        srcElement = e.srcElement? e.srcElement: e.target;\n        if (srcElement.className == \"Outline\")\n        {\n                targetId = srcElement.id + \"d\";\n                targetElement = document.getElementById(targetId);\n\n            if (targetElement.style.display == \"none\")\n                {\n                        targetElement.style.display = \"\";\n                        srcElement.src = \"images/minus.gif\";\n                    } \n            else\n                {\n                    targetElement.style.display = \"none\";\n                    srcElement.src = \"images/plus.gif\";\n                }\n        }\n    }\n    document.onclick = clickHandler;\n--&gt;\n&lt;/SCRIPT&gt;\n&lt;noscript&gt;You need Javascript enabled for this page to work correctly&lt;/noscript&gt;\n&lt;?\nfunction sql_conn()\n{\n    $username=\"root\";\n    $password=\"root\";\n    $database=\"racks\";\n    $server=\"localhost\";\n\n    @mysql_connect($server,$username,$password) or die(\"&lt;h2 align=\\\"center\\\" class=\\\"red\\\"&gt;[&lt;img src=\\\"images/critical.gif\\\" border=\\\"0\\\"&gt;] Unable to connect to $server [&lt;img src=\\\"images/critical.gif\\\" border=\\\"0\\\"&gt;]&lt;/h2&gt;\");\n    @mysql_select_db($database) or die(\"&lt;h2 align=\\\"center\\\" class=\\\"red\\\"&gt;[&lt;img src=\\\"images/critical.gif\\\" border=\\\"0\\\"&gt;] Unable to select $database as a database [&lt;img src=\\\"images/critical.gif\\\" border=\\\"0\\\"&gt;]&lt;/h2&gt;\");\n}\n\nsql_conn();\n$sql_datacenters=\"SELECT * FROM `datacenters`\";\n$result_datacenters=mysql_query($sql_datacenters);\n$j=0;\necho \"&lt;table border='1' style='float:left;'&gt;\";\nwhile ($datacenters_sqlrow=mysql_fetch_array($result_datacenters))\n{\n    echo \"&lt;tr&gt;&lt;td&gt;\";\n    echo \"&lt;h2 class='black' align='left'&gt;\";\n    echo \"&lt;IMG SRC='images/plus.gif' ID='Out\" . $j . \"' CLASS='Outline' STYLE='cursor:hand;cursor:pointer'&gt;\"; // fancy icon for expanding-collapsing section\n    echo \" \" . $datacenters_sqlrow['rack'] . \": \" . $datacenters_sqlrow['cagenum'] . \"&lt;/h2&gt;\"; // datacenter name and cage number\n    echo \"&lt;div id=\\\"Out\" . $j . \"d\\\" style=\\\"display:none\\\"&gt;\"; // opening of div box for section that is to be expanded-collapsed\n    echo $datacenters_sqlrow['notes'] . \"&lt;br /&gt;&lt;br /&gt;\"; // datacenter notes\n    $sql_cabinets=\"SELECT * FROM `cabinets` WHERE `datacenter` = '$datacenters_sqlrow[0]' ORDER BY `cabinetnumber` ASC\";\n    $result_cabinets=mysql_query($sql_cabinets);\n    while ($cabinets_sqlrow=mysql_fetch_array($result_cabinets))\n    {\n        $sql_devices=\"SELECT * FROM `devices` WHERE `datacenter` = '$datacenters_sqlrow[0]' AND `cabinet` = '$cabinets_sqlrow[1]' ORDER BY `ustartlocation` ASC\";\n        $result_devices=mysql_query($sql_devices);\n        echo \"&lt;table border='1' style='float:left;'&gt;\"; // opening of table for all cabinets in datacenter\n        echo \"&lt;tr&gt;&lt;td colspan='2' align='middle'&gt;\" . $cabinets_sqlrow[1] . \"&lt;/td&gt;&lt;/tr&gt;\"; // cabinet number, spans U column and device name column\n        $devices = array();\n        while($row = mysql_fetch_array($result_devices)) {\n            $devices[$row['ustartlocation']] = $row['devicename'];\n        }\n        for ($i = 0; $i &lt; $cabinets_sqlrow[2]; $i++) // iterates through number of U in cabinet     \n        {   \n            $u = $cabinets_sqlrow[2] - $i; // subtracts current $i value from number of U in cabinet since cabinets start their numbers from the bottom up\n            echo \"&lt;tr&gt;\";\n            echo \"&lt;td width='15px' align='right'&gt;$u&lt;/td&gt;\"; // U number\n            echo (isset($devices[$u]) ? \"&lt;td width='150px' align='middle'&gt;$devices[$u]&lt;/td&gt;\" : \"&lt;td width='150px' align='middle'&gt;empty&lt;/td&gt;\");\n            echo \"&lt;/tr&gt;\";\n        }\n        echo \"&lt;/table&gt;\"; // closes table opened earlier\n    }\n    echo \"&lt;/td&gt;&lt;/tr&gt;\";\n    echo \"&lt;/div&gt;\"; // close for div box that needs expanding-collapsing by fancy java\n    $j++; // iteration for the fancy java expand-collapse\n}\necho \"&lt;/table&gt;\";\nmysql_close();\n?&gt;\n</code></pre>\n"},{"tags":["php","mysql","cpanel"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13225355,"title":"New Database not copying over from source database","body":"<p>I have a form that i use privately, that uses the cPanel PHP API to create a database and a custom PHP script to copy the tables and content from another database into the newly created one. But the new database comes up with a size of 0.00MB, and none of the tables from the source database were copied over. What am i doing wrong? I tested it on another site and it worked fine, now i don't know. Any help would be appreciated.</p>\n\n<pre><code>&lt;?php\n        if (isset($_POST['Submit'])) {\n\n    create_subdomain($subDomain,$cPanelUser,$cPanelPass,$rootDomain);\n    echo \"&lt;br&gt;\";\n    newDB($db_host, $db_user, $db_pass, $cPanelUser, $cPanelPass, $new_db); \n    echo \"&lt;br&gt;\";    \n    copyDB($source_db, $new_db, $db_user, $db_pass);\n    echo \"&lt;br&gt;\";\n    recurse_copy($sourceDirectory,$destinationDirectory);\n    echo \"&lt;br&gt;\";\n    fixheaderinc($destinationDirectory, $subDomain);\n\n\n    echo \"New: &lt;a href='http://$subDomain.domain.com' font-size: 36px;&gt;$subDomain.domain.com&lt;/a&gt;\";\n    echo \"&lt;br&gt;\";\n\n    }\n\nfunction newDB($db_host, $db_user, $db_pass, $cPanelUser, $cPanelPass, $new_db) {\n    $xmlapi = new xmlapi($db_host);    \n    $xmlapi-&gt;set_port( 2082 );   \n    $xmlapi-&gt;password_auth(\"\".$cPanelUser.\"\",\"\".$cPanelPass.\"\");    \n    $xmlapi-&gt;set_debug(1);//output actions in the error log 1 for true and 0 false  \n    $xmlapi-&gt;set_output('array');//set this for browser output  \n\n    //create database    \n    $createdb = $xmlapi-&gt;api1_query($cPanelUser, \"Mysql\", \"adddb\", array($new_db));   \n\n    //create user \n    //$usr = $xmlapi-&gt;api1_query($cPanelUser, \"Mysql\", \"adduser\", array($db_user, $db_pass));  \n\n\n     //add user \n    $addusr = $xmlapi-&gt;api1_query($cPanelUser, \"Mysql\", \"adduserdb\", array(\"\".$new_db.\"\", \"\".$db_user.\"\", 'all'));\n}\n         function copyDB($source_db, $new_db, $db_user, $db_pass) {\n            mysql_connect('localhost', 'user', 'pass');\n            mysql_select_db($source_db);\n\n            $result=mysql_query(\"SHOW TABLES\");\n\n            $table_names=array();\n            while($row=mysql_fetch_array($result)){\n                $table_names[]=$row[0];\n            }\n\n            mysql_select_db($new_db);\n\n            for($i=0;$i&lt;count($table_names);$i++){\n                mysql_query(\"CREATE table \".$table_names[$i].\" SELECT * FROM $source_db.\".$table_names[$i]);\n            }\n        }\n\n?&gt;\n</code></pre>\n"},{"tags":["php","jquery","mysql","polling"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13225100,"title":"Simple/efficient approach to polling with PHP/JS/MySQL","body":"<p>I have a simple web app which lists a private group of people and the last message they posted.</p>\n\n<p>I'm currently just polling by using Ajax to hit a php script every 30 seconds, which gets all people and latest messages then returns as JSON. I parse that and update the DOM.</p>\n\n<p>Not very efficient since most of the time, nothing has changed but it still gets all data each 30 seconds.</p>\n\n<ol>\n<li><p>Is there anything basic I can do, just with the code to improve this?</p></li>\n<li><p>Should I use something like <a href=\"http://pusher.com\" rel=\"nofollow\">pusher.com</a>? </p></li>\n</ol>\n\n<p>There are a lot of tutorials out there on implementing long polling but I'd like to keep this simple as possible.</p>\n"},{"tags":["mysql","database","procedure"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13225069,"title":"How to avoid Unknown column when creating a procedure in mysql?","body":"<p>Having the following procedure in MySql 5.5.23:</p>\n\n<pre><code>create table if not exists t1 (col1 int);\n\nCREATE  PROCEDURE `a_proc`()\nBEGIN\n      select inexistent_column from t1;       \nEND\n</code></pre>\n\n<p>Only at runtime, when calling to this procedure, you know it has an error:</p>\n\n<pre><code>Error Code: 1054. Unknown column 'inexistent_column' in 'field list'    0.062 sec\n</code></pre>\n\n<p>As inexistent_column does not exists in t1, why this throws no errors when creating the procedure? \nIs there anything to automatically check for this while creating any procedure \"at compile time\"?</p>\n"},{"tags":["php","mysql","mailchimp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13224971,"title":"Mailchimp double opt-in and website account confirmation","body":"<p>I have a web-app where people have to confirm there creation of accounts by clicking a link in the email which moves them from the 'signedup' table to the 'accounts' tables so they can then log in. I want to start sending all my users a newsletter but I don't want to have to send them all a Mailchimp opt-in email so I was wondering if I could use the MailChimp API to combine there MailChimp opt in with my web-app confirmation and try and kill two birds with one stone?</p>\n\n<p>I have tried downloading my accounts table in a CSV and tried importing it, but I would have to do that every week with all the new users and that could take a while and could run into some problems.</p>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["php","mysql","pdo"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13221814,"title":"in PHP pdo how can i use an incremental identifier","body":"<p>I have the following challenge:</p>\n\n<p>a \"Tasks\" table:</p>\n\n<pre><code>tasksId     int\nlistId      int\ntaskOrder   float\n</code></pre>\n\n<p>in case i want to move all the tasks from list 2 to list 3 i would do something like:</p>\n\n<pre><code>// pseodo code //\n\n@lastTaskOrder = last task order in list 3\nloop - {\nUPDATE tasks SET taskOrder = @lastTaskOrder + 1, listId = 3 WHERE listId = 2;        \n@lastTaskOrder++\n}\n</code></pre>\n\n<p>thus the taskOrder stays unique.</p>\n\n<p>in case i want to move all the tasks from list 2 to the <em>beginning</em> of list 3 i would do something like:</p>\n\n<pre><code>// pseodo code //\n\n@firstTaskOrder = first task order in list 3\n@delta = @firstTaskOrder / @numberOfTasksToMove\nUPDATE tasks SET taskOrder = @firstTaskOrder + @delta, listId = 3 WHERE listId = 2;        \n@firstTaskOrder = @firstTaskOrder + @delta\n</code></pre>\n\n<p>is it possible with mySQL + PDO + PHP?</p>\n"},{"tags":["php","mysql","ajax","authorization","sessionid"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12682923,"title":"Store PHP session_id in MySQL for AJAX authorization?","body":"<p>Not too clear on how to authorize PHP AJAX calls with session_id or against any $_SESSION variables actually.</p>\n\n<p>Should it be stored in the database upon login and referenced against a $_SESSION storage on each AJAX call?</p>\n\n<p>I know these subjects have probably been discussed ad infinitum, but I can't seem to find a clear answer.</p>\n\n<p>Thanks in advance!</p>\n\n<p><strong>Revelation</strong></p>\n\n<p>Wow, so authorization is limited to whether or not there's a session?  Scary.  Makes me wonder if that's all that .net's web.config's deny=\"?\" is doing.  Thanks all for your help!</p>\n"},{"tags":["php","mysql","cakephp","model","multiple-databases"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":59,"score":3,"question_id":13223946,"title":"How to use multiple databases dynamically for one model in CakePHP","body":"<p>Ok, my first question was modified so many times that I chose to delete it and reformulate my question. I've made a small test-case project with different model-names to find a proper solution for my problem.</p>\n\n<p><strong>Warning</strong>: Don't mix the <strong>databases</strong> up with <strong>tables</strong></p>\n\n<p><strong>Motivation</strong>: I separated the user-data into multiple <strong>databases</strong> for legal &amp; performance issues.</p>\n\n<p>Currently I'm working on a <strong>CakePHP</strong> project that has multiple <code>User</code>'s and each <code>User</code> has it's own <strong>database</strong> with multiple <strong>tables</strong> (<code>cars</code> is one of the <strong>tables</strong>). Now, I need to explain something first:</p>\n\n<p>Every <code>User</code> has his own <strong>database</strong> (not a table, a <strong>database</strong>), so the database names are as follows.</p>\n\n<ul>\n<li>[DATABASE] <code>app</code> (This is the app's main database)\n<ul>\n<li>[TABLE] <code>users</code> </li>\n<li>[TABLE] <code>permissions</code> (<em>Not relevant for this question</em>)</li>\n</ul></li>\n<li>[DATABASE] <code>app_user1</code> (<code>User.id</code> 1 owns this entire <strong>database</strong>)\n<ul>\n<li>[TABLE] <code>cars</code> (a <strong>table</strong> entirely owned by <code>User.id</code> 1)</li>\n</ul></li>\n<li>[DATABASE] <code>app_user2</code> (<code>User.id</code> 2 owns this entire <strong>database</strong>)\n<ul>\n<li>[TABLE] <code>cars</code> (a <strong>table</strong> entirely owned by <code>User.id</code> 2)</li>\n</ul></li>\n<li>etc...</li>\n</ul>\n\n<p>I made a small drawing which might clarify the <strong>database</strong> / <strong>table</strong> -definitions and their relations to the models:</p>\n\n<p><img src=\"http://i.stack.imgur.com/zU6Db.png\" alt=\"How to use multiple databases dynamically for one model in CakePHP\"></p>\n\n<p><strong>The problem!!!</strong></p>\n\n<p>I don't know which <strong>database</strong> to connect to until the <code>User</code> logs in. <code>User</code>'s and their <strong>databases</strong> are created dynamically, so I cant use <code>app/Config/database.php</code>.</p>\n\n<p>So I'm currently writing an extension on the <code>Model</code> and <code>ConnectionManager</code> classes to bypass CakePHP's basic database behaviors. So the <code>Car</code> model knows which <strong>database</strong> to use. But I just have a feeling this could be done easier!</p>\n\n<p>So I guess it all boils down to one question:</p>\n\n<p><strong>Is there an easier way of doing this?!</strong></p>\n\n<p>Thanks to anyone who will take the time and effort of reading and understanding my problem!</p>\n"},{"tags":["php","mysql","sql","mysqli"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":13224614,"title":"If string in database contains number at end, it still should not generate string in php","body":"<p>I have a application which you can view <a href=\"http://helios.hud.ac.uk/u0867587/Mobile_app/Text6.php\" rel=\"nofollow\">here</a>. When you open the app, you will see a submit button, simply click on the button and you will see that it will generate  string underneath. If you keep clicking on the button it keeps generating 2 letter strings between letters \"A\" and \"B\". </p>\n\n<p>If in the database under the \"SessionId\" column, I have in a row string \"AB\". Then it would not generate string \"AB\" when I keep clicking on the submit button. I have tested this and this works fine. So this is not an issue if the string contains no number at the end.</p>\n\n<p>The problem I have is this. If I want to create multiple exams. Lets say the string is \"AA\" and that I have 3 exams, it does not insert string \"AA\" in the database as there are multiple \"AA\", so instead it concatenate a number after each \"AA\" in the database so that it displays it as \"AA1\", \"AA2\" and \"AA3\".</p>\n\n<p>But the problem is that if it does this then when you use the app again and keep clicking on the \"Submit\" button, you see that it still generates string \"AA\" when it shouldn't do as string \"AA\" was used in the database as \"AA1\", \"AA2\" and \"AA3\". I have these three values in the database at the moment yet it still generates the string in the application.</p>\n\n<p>So my question is that how can I stop it from generating the string in the application if the string is in the database with a number concatenated at the end of it?</p>\n\n<p>Below is the code for the application:</p>\n\n<pre><code>&lt;?php\n\n // connect to the database\n include('connect.php');\n\n  /* check connection */\n  if (mysqli_connect_errno()) {\n    printf(\"Connect failed: %s\\n\", mysqli_connect_error());\n    die();\n  }\n\n\nfunction id_generator(){ \n\n          $id = \"\"; \n          $a = array( \"A\" , \"B\", \"C\" ); \n\n      for( $i = 0 ; $i &lt; 2 ; $i++ ){ $r = rand( 0 , 1 );\n       $id .= $a[ $r ]; \n\n   }\n\n   return $id;\n\n   };\n\n   $is_there = true;\n\n      while( $is_there ){\n    $id = id_generator(); // your function to generate id;\n    $result = \"SELECT SessionId FROM Session WHERE SessionId LIKE CONCAT(?, '%')\";\n\n    $stmt=$mysqli-&gt;prepare($result);\n    // You only need to call bind_param once\n    $stmt-&gt;bind_param(\"1\",$id);\n    // execute query\n    $stmt-&gt;execute(); \n    // get result and assign variables (prefix with db)\n    $stmt-&gt;bind_result($dbSessionId);\n\n    $stmt-&gt;store_result();\n\n    $stmtnum = $stmt-&gt;num_rows();\n\n    if($stmtnum == 0) {\n    $is_there = false;\n}\n}\n\n ?&gt;\n\n    &lt;h1&gt;CREATING A NEW ASSESSMENT&lt;/h1&gt;\n\n        &lt;form action=\"&lt;?php echo htmlentities($_SERVER['PHP_SELF']); ?&gt;\" method=\"post\"&gt;\n        &lt;p&gt;\n        &lt;input id=\"courseSubmit\" type=\"submit\" value=\"Submit\" name=\"submit\" /&gt;\n        &lt;/p&gt;\n        &lt;/form&gt;\n\n        &lt;?php\nif (isset($_POST['submit'])) {\n\n        ?&gt;\n\n\n\n\n        &lt;br/&gt;\n\n         &lt;form action=\"QandATable.php\" method=\"post\" id=\"sessionForm\"&gt;\n         &lt;p&gt;&lt;strong&gt;1: Your Assessment ID: &lt;/strong&gt;&lt;span id=\"idFont\"&gt;&lt;?php echo $id; ?&gt;&lt;/span&gt;&lt;/p&gt;\n         &lt;input type='hidden' name='id' value='&lt;?php echo $id; ?&gt;' /&gt;\n\n\n        &lt;/form&gt;\n\n\n\n        &lt;?php\n\n        }\n        ?&gt;\n\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["php","mysql","database","file-upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":33,"score":-2,"question_id":13224611,"title":"php upload script","body":"<p>i am trying to insert data in a 'songs' column of a table with name same as the current session variable username. but it is giving following error\n    Parse error: syntax error, unexpected '\"', expecting T_STRING or T_VARIABLE or T_NUM_STRING</p>\n\n<pre><code>mysql_query(\"INSERT INTO \".$_SESSION['username'].\"('songs') VALUES(\\\"$_FILES[\"file\"][\"name\"]\\\")\");\n</code></pre>\n"},{"tags":["php","mysql","windows"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13224408,"title":"Restoring a Mysql Database with PHP?","body":"<p>What i do with this code is:\nI ask the user to select a backup to restore(Check)\nWhen the user hit the \"Submit\" button moves the file to a local carpet of the server(Check)\nI call the System function to call mysql.exe to restore the sql file that is in the local server(Problem here)</p>\n\n<pre><code>&lt;?php\n\nif($_FILES['enviar']){\n$file_name=\"Respaldo.sql\";\nmove_uploaded_file($_FILE['enviar']['tmp_name'],\"Backups/$file_name\");\n$batche=system(\"C:/WAMP/BIN/MYSQL/MYSQL5.5.24/bin/mysql.exe -u root test &lt; C:/WAMP/WWW/Backups/respaldo.sql\");\necho $batche;\n\n}\n?&gt;\n</code></pre>\n\n<p>If i copy exactly this \"C:/WAMP/BIN/MYSQL/MYSQL5.5.24/bin/mysql.exe -u root test &lt; C:/WAMP/WWW/Backups/respaldo.sql\" into a windows shell it restores the backup without any problem, Any help?.. Thanks</p>\n\n<p>----EDIT---</p>\n\n<p>The problem is that when I call the system function it doesn't do the restoring task, the DB remains Empty.</p>\n"},{"tags":["php","mysql","triggers"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13224495,"title":"PHP Page to MYSQL Trigger","body":"<p>My friend asked me can you convert a php page with sql queries to trigger.I worked hard but i can't.</p>\n\n<p>It's basic, he wants to give points after order has been confirmed.\nTrigger for \"ORDER\" table after \"UPDATE\", So <strong>$order</strong> variable will be <strong>updated</strong> in trigger.</p>\n\n<p>I know, this is not quite question and it is only for me.But this is really important can you help me a little about it?</p>\n\n<pre><code>&lt;?php \nsession_start();    \ninclude(\"dataManager.php\");\n\n    $order_id = $_GET['order_id'];\n\n    $city_id = 0;\n    $town_id = 0;\n    $customer_group_id = 0;\n\n    $manufacturer_id = 0;\n    $mainshop_id = 0;\n    $shop_id = 0;\n\n    $manufacturer_commision = 0;\n\n    $safetyFirst = \"DELETE FROM kolaydol_yeninesil.commision WHERE order_id = {$order_id}\";\n    $safetyFirstResult = mysql_query($safetyFirst,$con);\n\n    $sqlCommision = \"SELECT rate FROM kolaydol_yeninesil.manufacturer_commision WHERE id = 1\";\n    $sqlCommisionResult = mysql_query($sqlCommision,$con);\n        while (($commRow = mysql_fetch_array($sqlCommisionResult)) != null)\n        { \n            $manufacturer_commision = $commRow[\"rate\"];\n        }\n\n    $sqlOrder = \"SELECT * FROM kolaydol_yeninesil.order WHERE order_id ={$order_id}\";\n    $orderResult = mysql_query($sqlOrder,$con);\n        while (($orderRow = mysql_fetch_array($orderResult)) != null)\n        { \n            $city_id = $orderRow[\"shipping_zone_id\"];\n            $town_id = $orderRow[\"shipping_city\"];\n            $customer_group_id = $orderRow[\"customer_group_id\"];\n        }\n\n    $sqlMainshop = \"SELECT * FROM kolaydol_yeninesil.mainshop_city WHERE city_id ={$city_id}\";\n    $sqlMainshopResult = mysql_query($sqlMainshop,$con);\n        while (($mainshopRow = mysql_fetch_array($sqlMainshopResult)) != null)\n        { \n            $mainshop_id = $mainshopRow[\"mainshop_id\"];\n        }\n\n    $sqlFindMainshop = \"SELECT * FROM kolaydol_yeninesil.mainshop WHERE mainshop_id ={$mainshop_id}\";\n    $sqlFindMainshopResult = mysql_query($sqlFindMainshop,$con);\n        while (($mainshopFindRow = mysql_fetch_array($sqlFindMainshopResult)) != null)\n        { \n            $manufacturer_id = $mainshopFindRow[\"manufacturer_id\"];\n        }\n\n    $sqlShop = \"SELECT * FROM kolaydol_yeninesil.shop_town WHERE town_id ={$town_id}\";\n    $sqlShopResult = mysql_query($sqlShop,$con);\n        while (($shopRow = mysql_fetch_array($sqlShopResult)) != null)\n        { \n            $shop_id = $shopRow[\"shop_id\"];\n        }\n\n    $sqlOrderProducts = \"SELECT product_id,quantity,total,tax FROM order_product WHERE order_id = {$order_id}\";\n    $sqlOrderProductsResult = mysql_query($sqlOrderProducts,$con);\n        while (($sqlOrderProductsRow = mysql_fetch_array($sqlOrderProductsResult)) != null)\n        { \n            $quantity = $sqlOrderProductsRow[\"quantity\"];\n            $total = $sqlOrderProductsRow[\"total\"];\n\n            $currentProductId = $sqlOrderProductsRow[\"product_id\"];\n            if ($customer_group_id == 8)\n            {\n                $sqlDiscountedMsPrice = \"SELECT price FROM product_discount WHERE product_id = {$currentProductId} AND customer_group_id = 9\";\n                $sqlDiscountedMsPriceResult = mysql_query($sqlDiscountedMsPrice,$con);\n                    while (($sqlRowMS = mysql_fetch_array($sqlDiscountedMsPriceResult)) != null)\n                    { \n                        $mainshop_price = $sqlRowMS[\"price\"];\n                    }\n\n                $sqlDiscountedSPrice = \"SELECT price FROM product_discount WHERE product_id = {$currentProductId} AND customer_group_id = 6\";\n                $sqlDiscountedSPriceResult = mysql_query($sqlDiscountedSPrice,$con);\n                    while (($sqlRowS = mysql_fetch_array($sqlDiscountedSPriceResult)) != null)\n                    { \n                        $shop_price = $sqlRowS[\"price\"];\n                    }\n\n            }\n            if ($customer_group_id == 6)\n            {\n                $sqlDiscountedMsPrice = \"SELECT price FROM product_discount WHERE product_id = {$currentProductId} AND customer_group_id = 9\";\n                $sqlDiscountedMsPriceResult = mysql_query($sqlDiscountedMsPrice,$con);\n                    while (($sqlRowMS = mysql_fetch_array($sqlDiscountedMsPriceResult)) != null)\n                    { \n                        $mainshop_price = $sqlRowMS[\"price\"];\n                        echo $mainshop_price;\n                    }\n            }\n            if ($customer_group_id == 9)\n            {\n                $sqlDiscountedMsPrice = \"SELECT price FROM product_discount WHERE product_id = {$currentProductId} AND customer_group_id = 9\";\n                $sqlDiscountedMsPriceResult = mysql_query($sqlDiscountedMsPrice,$con);\n                    while (($sqlRowMS = mysql_fetch_array($sqlDiscountedMsPriceResult)) != null)\n                    { \n                        $mainshop_price = $sqlRowMS[\"price\"];\n                        echo $mainshop_price;\n                    }\n            }\n\n            if ($mainshop_price &gt; 0 &amp;&amp; $shop_price &gt; 0)\n            {\n                $sql_mainshop_points_insert = \"INSERT INTO commision (shop_id, order_id, description, points, `type`, `date_added`, product_id, quantity)  \n                    VALUES ({$mainshop_id}, {$order_id}, 'Anabayii', (({$quantity} * {$shop_price}) - ({$quantity} * {$mainshop_price})), 2, NOW(), {$currentProductId}, {$quantity});\";\n                 $sql_mainshop_points_insert_result = mysql_query($sql_mainshop_points_insert,$con); \n            }\n            if ($shop_price &gt; 0)\n            {\n                $sql_shop_points_insert = \"INSERT INTO commision (shop_id, order_id, description, points, `type`, `date_added`, product_id, quantity)  \n                    VALUES ({$shop_id}, {$order_id}, 'Bayii', (({$quantity} * {$total}) - ({$quantity} * {$shop_price})), 3, NOW(), {$currentProductId}, {$quantity});\";\n                 $sql_shop_points_insert_result = mysql_query($sql_shop_points_insert,$con); \n            }\n            if ($mainshop_price &gt; 0 &amp;&amp; $manufacturer_id &gt; 0 &amp;&amp; $manufacturer_commision &gt; 0)\n            {\n                $sql_manufacturer_points_insert = \"INSERT INTO commision (shop_id, order_id, description, points, `type`, `date_added`, product_id, quantity)  \n                    VALUES ({$manufacturer_id}, {$order_id}, 'Dagitici', ({$mainshop_price} * {$manufacturer_commision} / 100) , 1, NOW(), {$currentProductId}, {$quantity});\";\n                 $sql_manufacturer_points_insert_result = mysql_query($sql_manufacturer_points_insert,$con); \n            }\n\n        }\n\n\n?&gt;\n</code></pre>\n"},{"tags":["php","mysql","solr"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13210720,"title":"mysql like %asd% equivalent solr query","body":"<p>I have a query that I am trying to process, I searched it but could not find any answer, I am doing something wrong, What I want to search is, %asd%, but I get asd% result instead of it,</p>\n\n<p>my fieldtype is this,</p>\n\n<pre><code>&lt;fieldType name=\"text_general_edge_ngram\" class=\"solr.TextField\" positionIncrementGap=\"100\"&gt;\n        &lt;analyzer type=\"index\"&gt;\n            &lt;tokenizer class=\"solr.LowerCaseTokenizerFactory\"/&gt;\n            &lt;filter class=\"solr.EdgeNGramFilterFactory\" minGramSize=\"2\" maxGramSize=\"15\" side=\"front\"/&gt;\n        &lt;/analyzer&gt;\n        &lt;analyzer type=\"query\"&gt;\n            &lt;tokenizer class=\"solr.LowerCaseTokenizerFactory\"/&gt;\n        &lt;/analyzer&gt;\n    &lt;/fieldType&gt;\n</code></pre>\n\n<p>and my query is, name:asd, is it my query or field type ? thank you :)</p>\n"},{"tags":["mysql","data","view","ssas","source"],"answer_count":5,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1950,"score":5,"question_id":2779976,"title":"Using MySQL as data source in Microsoft SQL Server Analysis Services","body":"<p>I have installed the latest .net connector (http://www.mysql.com/downloads/connector/net/), I can add MySQL databases as Data Sources, I can even browse through the data from Business Intelligence Studio.</p>\n\n<p>The problem is that I CANNOT create a datasource view, or if I do create one without tables, trying to add them after the fact gives me the same error.</p>\n\n<p>Specifically it looks like the data source view wizard tries to submit queries against the MySQL database using square brackets/braces, and the query bombs.</p>\n\n<p>I get an error message like:</p>\n\n<pre><code>You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[my_db].[cheatType]' at line 2\n</code></pre>\n\n<p>So, in summary, has anyone been able to create a data source view using MySQL tables and, if so, can they please show me how this can be done.</p>\n\n<p>Thanks for any help!</p>\n"},{"tags":["mysql","windows","performance"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":526,"score":2,"question_id":7735546,"title":"Any MySQLTuner equivalent/alternative for Windows?","body":"<p>I know auto tuning has its limits, but it would be great to quickly determine reasonable starting points for my Windows MySQL InnoDB configuration (<code>innodb_additional_mem_pool_size, innodb_buffer_pool_size, innodb_log_file_size, innodb_log_buffer_size</code>), given the RAM that I want to allocate to MySQL (512 Mo from a total 4 GB installed).\nI found <a href=\"http://stackoverflow.com/questions/4667185/mysqltuner-pl-on-a-windows-2008-server-r2\">this previous similar question</a> but it had no answer.</p>\n\n<p>Your help is much appreciated!</p>\n"},{"tags":["php","mysql"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13108187,"title":"Multiple AND OR statements in php MYSQL","body":"<p>It seems there's something wrong with this. I don't get any distinct errors, but it's simply not doing what its supposed to be doing. I'm leaning towards there being a problem with the OR statements, but I've put the username in parenth, and the id slots in parenth, and neither work. Honestly, i'm only posting this here because five hours of looking at it got to be enough for me. \nHopefully something looks blatantly wrong and it's not somewhere else in the code :/</p>\n\n<pre><code>$fetch_userone_idslots = mysql_query(\"SELECT id_1, id_2, id_3, id_4, id_5, id_6 FROM users WHERE id_1 = '$battle_id' || id_2 = '$battle_id || id_3 = '$battle_id || id_4 = '$battle_id || id_5 = '$battle_id || id_6 = '$battle_id &amp;&amp; username == '$user_logged_in'\");\n\nwhile ($row = mysql_fetch_array($fetch_userone_idslots)){\n$useroneidslot_1 = $row['id_1'];\n$useroneidslot_2 = $row['id_2'];\n$useroneidslot_3 = $row['id_3'];\n$useroneidslot_4 = $row['id_4'];\n$useroneidslot_5 = $row['id_5'];\n$useroneidslot_6 = $row['id_6'];\n}\n</code></pre>\n"},{"tags":["mysql","restore"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":5156,"score":2,"question_id":787327,"title":"How to attach/restore MySQL database copy?","body":"<p>I need to convert a MySQL Database to SQL server. I received the database in a zip file containing only *.frm, *.MYI and *.MYD. Im not familiar with MySQL. I downloaded and installed version 5.1 server and tools. I copied that folder containing the files to the folder where the other databases are located. Using MySQL administrator, in CATALAGS-DATABASENAME->SCHEMA TABLES, I can see the tables listed. Some are in red and a message \"incorrect key file for table 'xxxxxxxx', try to repair it. I already tried to repair some of the tables and a message stating the table is corrupt appears. I don't know if the client just copy the tables from the folder or used and \"Detach\"/\"Backup\" procedure. I'm familiar with SQL server and I know that if you just copy a MDF/LDF with out detaching it first, most likely will not work. Is this the case here?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["mysql","full-text-search"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13224005,"title":"Fulltext Search for string with quotes","body":"<p>I want to perform a fulltext search for a string that contains quotes, so for example the string being <code>[\"test1\",\"test2\",\"test1test\"]</code> and i want to search only for <code>\"test1\"</code>, so it should not return <code>\"test1test\"</code>.</p>\n\n<p>I plan to use this in a procedure where the string to search is an (unqouted) input parameter, so the quotes need to be added around that parameter before matching it).\nThe call for the example above would be <code>CALL sarch(\"test\");</code> </p>\n\n<p>What would be the correct syntax?</p>\n"},{"tags":["php","javascript","jquery","html","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13223931,"title":"How do I prevent a site in a iframe from refreshing the whole site?","body":"<p>I have a simple iframe in my website that displays other websites. Users submit their websites and then other users can view that website in an iframe within my website. It works great, but the problem is that there are certain sites that refresh the whole site and the user ends up leaving my site and visits the site in the iframe. How would I prevent this from happening? I don't mind if a user clicks a link and they leave my website, but I don't want them initially leaving my website. Thank you very much.</p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13223907,"title":"mysql_query doesn´t work in custom php functions","body":"<p>I'm having trouble getting a mysql query to work within a function. I don't understand why this works:</p>\n\n<pre><code>    $datetime = date('m/d/Y h:i:s a', time());\n\n    $query = \"INSERT INTO 1_posts (title_post, time_post, key_words_post, content_post) VALUES ('$title2', '$datetime', '$keywords2', '$text2')\";\n\n    mysql_query($query, $con);\n</code></pre>\n\n<p>but this does not:</p>\n\n<pre><code>function insert_post($title2, $keywords2, $text2)\n{\n\n    $datetime = date('m/d/Y h:i:s a', time());\n\n    $query = \"INSERT INTO 1_posts (title_post, time_post, key_words_post, content_post) VALUES ('$title2', '$datetime', '$keywords2', '$text2')\";\n\n    mysql_query($query, $con);\n\n}\n</code></pre>\n\n<p>Of course, I have a connection to the db, and I am calling the function. I tried to debug with some echos and I found out that the function stops ant mysql_query, but I have no idea why.</p>\n"},{"tags":["mysql","ruby","devkit"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1121,"score":0,"question_id":8242565,"title":"Error installing mysql2 with windows","body":"<p>It's strange the I can install mysql2 with this command:\n<code>$ gem install mysql2 --platform=ruby -- '--with-mysql-lib=\"c:\\Program Files\\MySQL\\MySQL Server 5.5\\lib\" --with-mysql-include=\"c:\\Program Files\\MySQL\\MySQL Server 5.5\\include\"'</code> Following is the results:</p>\n\n<pre><code>Temporarily enhancing PATH to include DevKit...\nBuilding native extensions.  This could take a while...\nSuccessfully installed mysql2-0.3.10\n1 gem installed\nInstalling ri documentation for mysql2-0.3.10...\nInstalling RDoc documentation for mysql2-0.3.10...\n</code></pre>\n\n<p>But when I'm running <code>bundle install</code> (apperently I have a lot of gems needs to install), it is failed to install mysql2, so <code>bundle install</code> stopped there, that really drives me crazy... anyone could help? a tons of thanks!\nBelow is the result from <code>bundle install</code>:</p>\n\n<pre><code>Installing mysql2 (0.3.8) with native extensions\nGem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension\n.\n\n        c:/Ruby192/bin/ruby.exe extconf.rb\nchecking for rb_thread_blocking_region()... yes\nchecking for rb_wait_for_single_fd()... no\nchecking for main() in -llibmysql... no\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of\nnecessary libraries and/or headers.  Check the mkmf.log file for more\ndetails.  You may need configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=c:/Ruby192/bin/ruby\n        --with-mysql-dir\n        --without-mysql-dir\n        --with-mysql-include\n        --without-mysql-include=${mysql-dir}/include\n        --with-mysql-lib\n        --without-mysql-lib=${mysql-dir}/lib\n        --with-libmysqllib\n        --without-libmysqllib\n\n\nGem files will remain installed in G:/Desktop/20090319-/Rails Examples/ClockingI\nT/vendor/bundle/ruby/1.9.1/gems/mysql2-0.3.8 for inspection.\nResults logged to G:/Desktop/20090319-/Rails Examples/ClockingIT/vendor/bundle/r\nuby/1.9.1/gems/mysql2-0.3.8/ext/mysql2/gem_make.out\nAn error occured while installing mysql2 (0.3.8), and Bundler cannot continue.\nMake sure that `gem install mysql2 -v '0.3.8'` succeeds before bundling.\n</code></pre>\n"},{"tags":["mysql","plugins","phpmyadmin"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":497,"score":0,"question_id":1745224,"title":"phpMyAdmin is having a show plugins error on startup","body":"<p>My WAMP phpMyAdmin instance is now throwing a SHOW PLUGINS error on startup. It has never done this in the past, but now does this and will not start. Any ideas how to resolve this issue? I contacted support but haven't gotten a response back yet.</p>\n"},{"tags":["mysql","sql","facebook","database-design","twitter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13223270,"title":"Database design pattern for storing user data coming from external websites","body":"<p>I'm working on an application which will allow users to register via <code>facebook</code> or <code>twitter</code> and I want to be able to use their personal data from these websites and wondering how I should store it. here is what I have come up with so far:</p>\n\n<p><img src=\"http://i.stack.imgur.com/FnNlf.png\" alt=\"enter image description here\"></p>\n\n<p>The <code>user</code> table would store information that should be present regardless of how the user registered, such as the <code>first_name</code>.</p>\n\n<p>The <code>user_property</code> table would work as a <code>key-value</code> cache and store information that is specific to <code>facebook</code> or <code>twitter</code> (represented by the <code>origin</code> field). I would store properties that can be used as part of <code>API</code> calls or <code>SQL</code> queries individually, such as users' <code>facebook id</code> and I would store results of other <code>API</code> calls serialized in <code>JSON</code> format, such as users' <code>facebook friends</code>. </p>\n\n<p>That way:</p>\n\n<ul>\n<li>I have common information in <code>user</code> table and with one single <code>SELECT</code> I can get some basic useful info on a user</li>\n<li>I have some additional properties coming from <code>facebook/twitter</code> (e.g. user id) stored individually that I can still lookup with a <code>JOIN</code> between <code>user</code> and <code>user_property</code>.</li>\n<li>I can retrieve information that would too expensive to store normalized (e.g. creating a table to store people's friends and have 1 table entry per friend) still with a <code>JOIN</code> between <code>user</code> and <code>user_property</code>.</li>\n</ul>\n\n<p>And here is what I'm wondering right now:</p>\n\n<p><strong>Q1: Could this be a somewhat sustainable database design or am I getting it wrong and going to run into some issues, and if so, which ones?</strong> </p>\n\n<p><strong>Q2: When storing information that is subject to frequent changes (e.g. list of friends/followers), how do you go about keeping the information up to date (do you store information in the DB in the first place? if so what criteria/triggers do you use to decide when to pull information again)?</strong></p>\n"},{"tags":["php","mysql","json","multidimensional-array","duplicates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13221310,"title":"Output from mySql a two dimensional Json but with duplicates","body":"<p>mySql outputs this:\n<img src=\"http://i.stack.imgur.com/dAfTK.png\" alt=\"enter image description here\"></p>\n\n<p>As you can see row 3 and 4 has duplicates so I want to merge these duplicates when I output my Json. To be exact I want my json to be like this:</p>\n\n<pre><code>[\n    {\n        \"name\": \"The Crane Bar\",\n        \"lat\": \"53.2692\",\n        \"lng\": \"-9.06151\",\n        \"events\": [\n            {\n                \"name\": \"Traditional music session\",\n                \"info\": null\n            }\n        ]\n    },\n    {\n        \"name\": \"Taaffes Bar\",\n        \"lat\": \"53.2725\",\n        \"lng\": \"-9.05321\",\n        \"events\": [\n            {\n                \"name\": \"6 Nations, Italy VS Ireland\",\n                \"info\": null\n            }\n        ]\n    },\n    {\n        \"name\": \"a house\",\n        \"lat\": \"37.4401\",\n        \"lng\": \"-122.143\",\n        \"events\": [\n            {\n                \"name\": \"Party at Palo Alto\",\n                \"info\": \"Some info about the party\"\n            },\n            {\n                \"name\": \"2gdfgdf\",\n                \"info\": \"2gdfgdfgdf\"\n            }\n        ]\n    }\n]\n</code></pre>\n\n<p>You know use one one location_name, lat and lng and have nested the event_name and post_content (as info here).</p>\n\n<p>Thanks!</p>\n"},{"tags":["mysql","database-design","database-schema","organization","project-organization"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13220951,"title":"MySql/PHP - Designing my first database. Need reviews","body":"<p>I'm designing my first database and writing my first PHP project from scratch and I need someone to review database scheme.</p>\n\n<p><strong>Purpose of PHP script:</strong> To display traffic statistic for various sites in my network when I publish promotional videos on sites like Youtube, Myspace, Metacafe, Vimeo etc.</p>\n\n<p><strong>How I plan to organize it:</strong></p>\n\n<ol>\n<li>One site can have multiple categories like \"guitar lessons\",\n\"singing lessons\", \"dancing lessons\".</li>\n<li>Some categories can have subcategories. Like \"guitar lessons\" can be split to \"bass\" and \"electric\"</li>\n<li>In one category can be one promotional video. On image below, video is named <strong><em>item</em></strong>.</li>\n<li>One item (promotional video) can be created in only one category </li>\n<li>One promotional video can be submitted to multiple video sharing sites (Youtube, Vimeo etc..)</li>\n<li>One promotional video can have several different meta data like \"title\" and \"description\"</li>\n</ol>\n\n<p><strong>Scenarios that can happen:</strong></p>\n\n<ol>\n<li>Maybe someday Youtube will delete one of my promotional video, in\nthat case I would reupload it again with probably different \"title\"\nand \"description\", but I would like to show some old info in\nstatistic like previous number of views before deletion.</li>\n<li>I can't think any other right now..</li>\n</ol>\n\n<p>EDIT:\n<strong>I have added table itemStats</strong>\n<img src=\"http://i.stack.imgur.com/VwAGl.png\" alt=\"enter image description here\"></p>\n\n<p><strong>EDIT2: I'm not sure if I'm going to need separate itemStats table. I'm thinking to join it with itemMeta?</strong></p>\n"},{"tags":["mysql","query","table","search","optimization"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":13221136,"title":"How can I optimize the searching of two tables?","body":"<p>Let's say I'm some kind of newbie in MySQL. I have two tables:</p>\n\n<p>1st:</p>\n\n<pre>    CREATE TABLE IF NOT EXISTS `tags` (\n  `i` int(10) NOT NULL AUTO_INCREMENT,\n  `id` int(10) NOT NULL,\n  `k` varchar(32) COLLATE utf8_bin NOT NULL,\n  PRIMARY KEY (`i`),\n  KEY `k` (`k`)\n) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_bin AUTO_INCREMENT=1505426 ;\n</pre>\n\n<p>and 2nd:</p>\n\n<pre>CREATE TABLE IF NOT EXISTS `w` (\n  `id` int(7) NOT NULL,\n  `title` varchar(255) COLLATE utf8_bin NOT NULL,\n  `k1` varchar(24) COLLATE utf8_bin NOT NULL,\n  `k2` varchar(24) COLLATE utf8_bin NOT NULL,\n  `k3` varchar(24) COLLATE utf8_bin NOT NULL,\n  `k4` varchar(24) COLLATE utf8_bin NOT NULL,\n  `k5` varchar(24) COLLATE utf8_bin NOT NULL,\n  `k6` varchar(24) COLLATE utf8_bin NOT NULL,\n  `k7` varchar(24) COLLATE utf8_bin NOT NULL,\n  `k8` varchar(24) COLLATE utf8_bin NOT NULL,\n  `w` int(5) NOT NULL,\n  `h` int(5) NOT NULL,\n  `s` varchar(32) COLLATE utf8_bin NOT NULL,\n  `r` varchar(11) COLLATE utf8_bin NOT NULL,\n  `v` int(7) NOT NULL,\n  `c` varchar(32) COLLATE utf8_bin NOT NULL,\n  `c1` varchar(6) COLLATE utf8_bin NOT NULL,\n  `c2` varchar(6) COLLATE utf8_bin NOT NULL,\n  `c3` varchar(6) COLLATE utf8_bin NOT NULL,\n  `c4` varchar(6) COLLATE utf8_bin NOT NULL,\n  `c5` varchar(6) COLLATE utf8_bin NOT NULL,\n  `c6` varchar(6) COLLATE utf8_bin NOT NULL,\n  `m` varchar(4) COLLATE utf8_bin NOT NULL,\n  `t` int(10) NOT NULL,\n  `i` int(6) NOT NULL,\n  `o` int(6) NOT NULL,\n  `f` varchar(255) COLLATE utf8_bin NOT NULL,\n  PRIMARY KEY (`id`),\n  KEY `keywords` (`k1`,`k2`,`k3`,`k4`,`k5`,`k6`,`k7`,`k8`),\n  KEY `category` (`c`),\n  KEY `color1` (`c1`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin ROW_FORMAT=DYNAMIC;</pre>\n\n<p>I'm trying to search 2 words ($search1 + $search2) from table 'tags' and find id's at 'w' table.\n query:</p>\n\n<pre>SELECT w.id,w.title,w.k1,w.k2,w.k3,w.k4,w.k5,w.k6,w.k7,w.w,w.h,w.s,w.c1,w.c2,w.c3,w.c4,w.c5,w.c6,w.m,w.f\nFROM tags,tags as tags2,w\nWHERE tags.k ='$search1' AND tags2.k = '$search2'\nand tags.id = tags2.id and tags2.id = w.id\nORDER BY `w`.`id`desc limit 24</pre>\n\n<p>The problem is that EXPLAIN function shows \"Using where; Using temporary; Using filesort\"\nAlso I believe that there is another way to optimize this my type search system.\nActually all data is in 'w' table, I just have no idea how exactly to search it properly.\nI would be grateful for any help.</p>\n\n<p><strong>Edit</strong>:a bit more information about this</p>\n\n<p>table 'tags' 1505425 records InnoDB = 65,9 MiB</p>\n\n<p>table 'w' 398900 rercords, InnoDB = 140,3 MiB</p>\n\n<p>after this (<strong>updated</strong>) query:</p>\n\n<pre>select `w`.`id` AS `id`,`w`.`title` AS `title`,`w`.`k1` AS `k1`,`w`.`k2` AS `k2`,`w`.`k3` AS `k3`,`w`.`k4` AS `k4`,`w`.`k5` AS `k5`,`w`.`k6` AS `k6`,`w`.`k7` AS `k7`,`w`.`k8` AS `k8`,`w`.`w` AS `w`,`w`.`h` AS `h`,`w`.`s` AS `s`,`w`.`c1` AS `c1`,`w`.`c2` AS `c2`,`w`.`c3` AS `c3`,`w`.`c4` AS `c4`,`w`.`c5` AS `c5`,`w`.`c6` AS `c6`,`w`.`m` AS `m`,`w`.`f` AS `f` from `tags` join `tags` `tags2` join `w` where ((`tags`.`k` = '$search1') and (`tags2`.`id` = `tags`.`id`) and (`w`.`id` = `tags`.`id`) and (`tags2`.`k` = '$search2')) order by `tags`.`i` desc limit 0,24;</pre>\n\n<p>mysql still shows:\n<pre>\n+----+-------------+------------+--------+---------------+---------+---------+-------------+------+----------+-----------------------------+\n| id | select_type | table      | type   | possible_keys | key     | key_len | ref         | rows | filtered | Extra                       |\n+----+-------------+------------+--------+---------------+---------+---------+-------------+------+----------+-----------------------------+\n|  1 | SIMPLE      | tags       | ref    | k,id          | k       | 98      | const       |  902 |   100.00 | Using where; Using filesort |\n|  1 | SIMPLE      | tags2      | ref    | k,id          | id      | 4       | db.tags.id  |    4 |   100.00 | Using where                 |\n|  1 | SIMPLE      | w          | eq_ref | PRIMARY       | PRIMARY | 4       | db.tags2.id |    1 |   100.00 | Using where                 |\n+----+-------------+------------+--------+---------------+---------+---------+-------------+------+----------+-----------------------------+\n3 rows in set, 1 warning (0.00 sec)</p>\n\n<p></pre> 1 warning, also still everything remains the same, is there any solution for better performance? at the moment it works fine, but later everything will goes slower and slower i think.</p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13221020,"title":"Formatting SIngle MYSQL / PHP Results into Columns","body":"<p>I am not sure if this is possible, so I thought I would ask if anybody knows of a way, basically I get a looped result from my MYSQL database, called Manufacturer, now this works fine and provides me with a long list in a single column, but what I want to do is split the results in to two columns so that they are displayed side by side almost as if they are in a two column table.  </p>\n\n<p>How ever if I simply echo the manufacturer variable twice it just gives me two identical lists.</p>\n\n<p>Ok the code is a basic sql query as below, </p>\n\n<pre><code>$query1 = \"SELECT distinct manufacturer from $tableName LIMIT $start, $limit\";\n$result = mysql_query($query1);\n</code></pre>\n\n<p>And then the result is output like this: </p>\n\n<pre><code>while($row = mysql_fetch_array($result))\n    {\n\n    echo '&lt;li&gt;'.$row['manufacturer'].'&lt;/li&gt;';\n</code></pre>\n\n<p>I have left out all of the pagination information in between as it goes on for quite a while and i can not see that that would make a difference to the result, though please tell me if i am wrong.</p>\n\n<p>Is there anyway to do this, so that there is just one list of results split over two columns?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","php","android","mysql","json"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":59,"score":3,"question_id":13223101,"title":"Connecting to MySQL database using PHP for Android Development","body":"<p>I was reading a tutorial about how to connect android to mysql database over the internet using a php interface.\nI made everything as it said to.</p>\n\n<p>the php code is this:\n    \n\n<pre><code>  $q=mysql_query(\"SELECT * FROM people WHERE birthyear&gt;'\".$_REQUEST['year'].\"'\");\n  while($e=mysql_fetch_assoc($q))\n  $output[]=$e;\n\n  print(json_encode($output));\n\n  mysql_close();\n?&gt;\n</code></pre>\n\n<p>and the java code is this:</p>\n\n<pre><code>String result = \"\";\n//the year data to send\nArrayList&lt;NameValuePair&gt; nameValuePairs = new ArrayList&lt;NameValuePair&gt;();\nnameValuePairs.add(new BasicNameValuePair(\"year\",\"1980\"));\n\n//http post\ntry{\n    HttpClient httpclient = new DefaultHttpClient();\n    HttpPost httppost = new HttpPost(\"http://example.com/getAllPeopleBornAfter.php\");\n    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));\n    HttpResponse response = httpclient.execute(httppost);\n    HttpEntity entity = response.getEntity();\n    InputStream is = entity.getContent();\n}catch(Exception e){\n    Log.e(\"log_tag\", \"Error in http connection \"+e.toString());\n}\n//convert response to string\ntry{\n    BufferedReader reader = new BufferedReader(new InputStreamReader(is,\"iso-8859-1\"),8);\n    StringBuilder sb = new StringBuilder();\n    String line = null;\n    while ((line = reader.readLine()) != null) {\n            sb.append(line + \"\\n\");\n    }\n    is.close();\n\n    result=sb.toString();\n}catch(Exception e){\n    Log.e(\"log_tag\", \"Error converting result \"+e.toString());\n}\n\n//parse json data\ntry{\n    JSONArray jArray = new JSONArray(result);\n    for(int i=0;i&lt;jArray.length();i++){\n            JSONObject json_data = jArray.getJSONObject(i);\n            Log.i(\"log_tag\",\"id: \"+json_data.getInt(\"id\")+\n                    \", name: \"+json_data.getString(\"name\")+\n                    \", sex: \"+json_data.getInt(\"sex\")+\n                    \", birthyear: \"+json_data.getInt(\"birthyear\")\n            );\n    }\n}\n}catch(JSONException e){\n    Log.e(\"log_tag\", \"Error parsing data \"+e.toString());\n}\n</code></pre>\n\n<p>Now the problem is it gives me an error that the variable 'is' doesn't exist!\nwhat should I do?</p>\n\n<p>The tutorial is from website helloandroid.com :  <a href=\"http://www.helloandroid.com/tutorials/connecting-mysql-database\" rel=\"nofollow\">http://www.helloandroid.com/tutorials/connecting-mysql-database</a></p>\n"},{"tags":["c#","asp.net","mysql","mvc"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":256,"score":2,"question_id":5909381,"title":"Generate database from model using MySQL as database","body":"<p>I am using ASP.Net MVC2.  I have a model with database design, and need to create a database from that model using MySQL as the back end.</p>\n\n<p>I right-click on the model and select the <code>generate database from model</code> option, then I select MySQL as back end.  </p>\n\n<p>After that I can get a SQL query to execute. But when I execute the query, MS SQL Server is executing instead of MySQL. </p>\n\n<p>Do you know how to make a database from the model using MySQL.</p>\n"},{"tags":["mysql","sql","database"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":13213624,"title":"How to find percentages of values in SQL?","body":"<p>I use following query to find out percentage of winning by Hero in games:</p>\n\n<pre><code>SELECT Hero, (COUNT(*) * g.games) AS p\nFROM gamestatistics\nJOIN (\nSELECT 100/COUNT(*) AS games\nFROM gamestatistics\n) AS g\nWHERE PointEarned&gt;0\nGROUP BY Hero\nORDER BY p DESC\n</code></pre>\n\n<p>But this gives me percent for ALL games. And I want  to know</p>\n\n<blockquote>\n  <p><code>percentage(for Hero)=(Won games by this player)/(Played games by this hero)</code></p>\n</blockquote>\n\n<p>instead of</p>\n\n<blockquote>\n  <p>percentage(for Hero)=(Won games by this player)/(All games)<br>\n  Thanks.</p>\n</blockquote>\n"},{"tags":["mysql","hibernate","jboss-tools"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13220532,"title":"org.hibernate.exception.SQLGrammarException with MySQL5 (InnoDB or MyISAM) database, Hibernate 3/4 in a get() method","body":"<p>I am getting this exception (<strong>SQLGrammarException</strong>) when I am trying to perform a <strong>get()</strong> or a findByExample() against a <strong>MySQL</strong> database.</p>\n\n<ol>\n<li>MySQL version: <strong>MySQL 5.1.61-0ubuntu0.10.10.1</strong> </li>\n<li>Driver: <strong>mysql-connector-java 5.1.21</strong></li>\n<li>Database: MySQL world example:\n<a href=\"http://dev.mysql.com/doc/index-other.html\" rel=\"nofollow\">http://dev.mysql.com/doc/index-other.html</a> (InnoDB or MyISAM)</li>\n<li>Hibernate: <strong>3.5.1 or 4.0.1</strong> (both Final) Project setup: <em>hibernate layer</em> generated with Hibernate Tools\n(3.4.0.v20111025-0625-H210-Final) for Eclipse (Helios)</li>\n</ol>\n\n<p><code>Country instance = (Country) session.get(\"ch.cern.it.db.mw.hibernate.Country\", id);</code></p>\n\n<p>Any idea?</p>\n\n<p>Thanks in advance,</p>\n\n<p>Luis</p>\n"},{"tags":["mysql","caching","centos"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":20,"score":0,"question_id":13222680,"title":"Qcache_hits always 0","body":"<p>On Centos 6.3 I'm trying to enable query caching on Mysql.\nI have enabled query caching</p>\n\n<pre><code>SHOW VARIABLES LIKE 'query_cache_size';\nquery_cache_size    52428800\n\nSHOW VARIABLES LIKE 'query_cache_type';\nquery_cache_type    ON\n</code></pre>\n\n<p>When running a few simple select queries (select * from titles), the Qcache_hits always stays 0. </p>\n\n<p>(I'm using these sample mysql database: <a href=\"https://launchpad.net/test-db/+download\" rel=\"nofollow\">https://launchpad.net/test-db/+download</a>)</p>\n\n<pre><code>show status like \"Qcache%\";\nQcache_free_blocks  1\nQcache_free_memory  52419904\nQcache_hits 0\nQcache_inserts  0\nQcache_lowmem_prunes    0\nQcache_not_cached   50\nQcache_queries_in_cache 0\nQcache_total_blocks 1\n</code></pre>\n\n<p>I'm out of options figuring out what's wrong here. \nDoes anyone have an idea what can be wrong? </p>\n\n<p>Thanks a lot for helping out!</p>\n"},{"tags":["php","mysql","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13223223,"title":"mysql query getting all fields in table 1 and partial in from table two","body":"<p>Coming back to my very old mysql skills I have need of the following query.</p>\n\n<p>I have two tables </p>\n\n<p>One is a table of all items called products with cols item name, item num</p>\n\n<p>Two is a table of purchased items with cols item num, date</p>\n\n<p>What I need as a result is something like this</p>\n\n<pre><code>ITEM-----PURCHASED\nitem1-------0 \nitem2-------0\nitem3-------0\nitem4-------1  This item purchased\nitem5-------0\nitem6-------1  This item purchased\nitem7-------0\nitem8-------0\n.\n.\n.\nitemX-------0\n</code></pre>\n\n<p>Output contains all items and a 1 in the purchased col if the item exist in the purchased items table\nand a 0 if it has NOT been purchased.</p>\n\n<p>I am sorry if this is easy my brain is in meltdown mode currently and it has been a long time I have needed something like this</p>\n"},{"tags":["mysql","primary-key","sql-order-by","performance","limit"],"answer_count":3,"favorite_count":11,"up_vote_count":16,"down_vote_count":0,"view_count":3097,"score":16,"question_id":4481388,"title":"Why does MYSQL higher LIMIT offset slow the query down?","body":"<p>Scenario in short: A table with more than 16 million records [2GB in size]. The higher LIMIT offset with SELECT, the slower the query becomes, when using     ORDER BY *primary_key*</p>\n\n<p>So  </p>\n\n<pre><code>SELECT * FROM large ORDER BY `id`  LIMIT 0, 30 \n</code></pre>\n\n<p>takes far less than  </p>\n\n<pre><code>SELECT * FROM large ORDER BY `id` LIMIT 10000, 30 \n</code></pre>\n\n<p>That only orders 30 records and same eitherway. So it's not the overhead from ORDER BY.<br>\nNow when fetching the latest 30 rows it takes around 180 seconds. How can I optimize that simple query?</p>\n"},{"tags":["mysql","query"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13222950,"title":"Assistance writing a mysql query based on conditions","body":"<p>I'm attempting to write a MySQL statement based on an if statement.</p>\n\n<p>Here's what I want to do: I need the query to collect rows based on whether or not an item is going to be due within two weeks or if it's already passed due.</p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>select\n  t_id,\n  firstName, \n  lastName, \n  checkTime,\n  due\nfrom (checkOut join People)\nwhere checkOut.p_id = People.p_id\norder by due IF(DATE(NOW()-checkOut.due) &lt;= 2 WEEK);\n</code></pre>\n\n<p>MySQL is stating that there is a syntax error near the IF statement (I'm not surprised as I'm not familiar with writing conditional statements in MySQL). </p>\n\n<p>Another question is regarding whether or not MySQL will yield a date that is negative (i.e. to indicate that an item is passed due). Thanks in advance.</p>\n"},{"tags":["mysql","ios","encryption"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":175,"score":3,"question_id":13222767,"title":"Security of mysql with iOS","body":"<p>I have an encrypted connection from my ios app to my mysql database. My question is whether or not they would be able to intercept the connection form the ios app and find the domain with or without an encryption</p>\n"},{"tags":["php","mysql","search"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13222912,"title":"display more than one search result with php","body":"<p>Currently my search script works but its not doing what I would like it to do. At the moment it only returns one search result even though there is about 20 that should shown for a searched item. I am trying to figure out how to get the script to return those missing results that should be shown. So maybe the the experts here could help :)</p>\n\n<pre><code>include('data.php');\n    //Database Connection\n$con=@mysql_connect(\"$ip\", \"$user\", \"$pass\")\n            or die(mysql_error());\n\n//Select Database\n$dbcon=@mysql_select_db($db, $con)\n            or die(mysql_error());\n\n\n$search = $_POST['search'];\n\n$sql = mysql_query(\"select guid, name, staffmember, dateposted, id, admin_note from $whitelist where guid like '%$search%' or name like '%$search%' or staffmember like '%$search%' or dateposted like '%$search%' or id like '%$search%' or admin_note like '%$search%'\");\n\n\nwhile ($row = mysql_fetch_array($sql)) {\n    //Username\n    $name = $row['name'];\n    //GUID\n    $guid = $row['guid'];\n    //Staff Member Who Submitted\n    $staff = $row['staffmember'];\n    //ID\n    $id = $row['id'];\n    //Date Posted\n    $date = $row['dateposted'];\n    //Note From Admin\n    $admin = $row['admin_note'];\n    }\n    ?&gt;\n    &lt;html&gt;\n    &lt;body&gt;\n    &lt;table border=\"0\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" id=\"product-table\"&gt;\n                &lt;tr&gt;\n                    &lt;!--&lt;th class=\"table-header-check\"&gt;&lt;a id=\"toggle-all\" &gt;&lt;/a&gt; &lt;/th&gt;--&gt;\n                    &lt;th class=\"table-header-repeat line-left minwidth-1\"&gt;&lt;a href=\"\"&gt;ID&lt;/a&gt;  &lt;/th&gt;\n                    &lt;th class=\"table-header-repeat line-left minwidth-1\"&gt;&lt;a href=\"\"&gt;GUID&lt;/a&gt;&lt;/th&gt;\n                    &lt;th class=\"table-header-repeat line-left\"&gt;&lt;a href=\"\"&gt;Username&lt;/a&gt;&lt;/th&gt;\n                    &lt;th class=\"table-header-repeat line-left\"&gt;&lt;a href=\"\"&gt;Admin Note&lt;/a&gt;&lt;/th&gt;\n                    &lt;th class=\"table-header-repeat line-left\"&gt;&lt;a href=\"\"&gt;Staff Member&lt;/a&gt;&lt;/th&gt;\n                    &lt;th class=\"table-header-repeat line-left\"&gt;&lt;a href=\"\"&gt;Date Posted&lt;/a&gt;&lt;/th&gt;\n                    &lt;th class=\"table-header-options line-left\"&gt;&lt;a href=\"\"&gt;Options&lt;/a&gt;&lt;/th&gt;\n\n                &lt;/tr&gt;\n                &lt;tr&gt;\n\n                    &lt;td&gt;&lt;?php echo \"$id\"; ?&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;?php echo \"$guid\"; ?&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;?php echo \"$name\"; ?&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;?php echo \"$admin\"; ?&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;?php echo \"$staff\"; ?&gt;&lt;/td&gt;\n                    &lt;td&gt;&lt;?php echo \"$date\"; ?&gt;&lt;/td&gt;\n                    &lt;td class=\"options-width\"&gt;\n                    &lt;?php\n                 echo '&lt;a href=\"edit.php?id=' . $row['id'] . '\" title=\"Edit\" class=\"icon-1 info-tooltip\"&gt;&lt;/a&gt;';\n                echo '&lt;a href=\"delete.php?id=' . $row['id'] . '\" title=\"Edit\" class=\"icon-2 info-tooltip\"&gt;&lt;/a&gt;'; \n                ?&gt;\n\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n\n                &lt;/table&gt;\n                &lt;/body&gt;\n                &lt;/html&gt;\n</code></pre>\n"},{"tags":["php","mysql","query","pdo"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":46,"score":3,"question_id":13221861,"title":"PDO fetchall() performance considerations?","body":"<p>After reading a few articles on the performance impact of PHP's PDO <code>fetchall()</code> function, I am curious if there is another way to accomplish the same outcome without invoking <code>fetchall()</code>.</p>\n\n<p>To explain, most agree that <code>fetchall()</code> tends to be resource intensive.  In my case, I don't believe it will be too big of an issue. Yes, I am having to pull an entire table from my database and display it to the user, but it is going to be about a 100 rows at the very most; I don't believe that will be an issue. Hypothetically, though, if I were needing to pull 100,000 rows, what would be a more optimal solution? </p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13222815,"title":"MySQL: FROM multiple tables to Join","body":"<p>I am having a bit of a hard time representing a query. The statement that I want to convert to a SQL statement is:  </p>\n\n<pre><code>select count(*)\nfrom assigned, tasks\nwhere \nassigned.id_task = 1\nor \n(assigned.id_project=tasks.id_project and tasks.id=1)  \n</code></pre>\n\n<p>What I succeeded to come up so far is:  </p>\n\n<pre><code>select count(*) \nfrom assigned a \nleft join projects p\n  on p.id=a.id_project\nleft join tasks t\n  on t.id_project=p.id\nwhere (a.id_task=1 or t.id=1)\n</code></pre>\n\n<p>However, the second is not returning the correct result. What am I missing?</p>\n"},{"tags":["mysql","sql","visitor-statistic"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":43,"score":0,"question_id":13220121,"title":"SQL , count equivalent values in each column","body":"<p>I'm working on a URL shortener project with PHP &amp; MYSQL which tracks visits of each url. I've provided a table for visits which mainly consists of these properties :  </p>\n\n<pre><code>time_in_second | country | referrer |  os   | browser | device | url_id\n#####################################################################\n1348128639     |    US   |   direct |  win  | chrome  | mobile | 3404  \n1348128654     |    US   |   google | linux | chrome  | desktop| 3404  \n1348124567     |    UK   |   twitter| mac   | mozila  | desktop| 3404  \n1348127653     |    IND  |   direct | win   | IE      | desktop| 3465  \n</code></pre>\n\n<p>Now I want to make a query on this table. for example I want to get visits data for the url with <code>url_id=3404</code>. Because I should <em>provide statistics and draw graphs</em>, for this url, I need these data:  </p>\n\n<ul>\n<li>Number of each kind of OS for this URL , for example 20 windows, 15 linux , ...</li>\n<li>Number of visits in each desired period of time , for example each 10 minutes in past 24 hour</li>\n<li>Number of visits for each country</li>\n<li>...  </li>\n</ul>\n\n<p>As you see, some data like country may accept lots of different values.  </p>\n\n<p>One good idea which I can imagine is to make query which outputs number of each unique value in each column, for example in the country case for the data given above, on column for <code>num_US</code>, one for <code>num_UK</code>, and one for <code>num_IND</code>.  </p>\n\n<p>Now the question is how to implement such a high-performance query in sql (MYSQL) ?  </p>\n\n<p>Also if you think this is not an efficient query for performance, what's your suggestion?  </p>\n\n<p>Any help will be appreciated deeply. </p>\n\n<p><strong>UPDATE:</strong> look at this question : <a href=\"http://stackoverflow.com/questions/915260/sql-only-count-the-values-specified-in-each-column\">SQL; Only count the values specified in each column</a> . I think this question is similar to mine , but the difference is in variety of values possible (as lots of values are possible for <code>country property</code>) for each column which makes the query more complex.</p>\n"},{"tags":["mysql","date","sum"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13211274,"title":"SUM for MONTH() not being calculated properly","body":"<p>In my code, I get the number of rows present for the following times:</p>\n\n<p>Today   Yesterday   2 Days Ago  3 Days Ago  4 Days Ago  5 Days Ago  6 Days Ago  7 Days Ago  This Week   This Month  Last Month  This Year</p>\n\n<p>Now every single time is working great, except for \"This Month\". It seems that this is not being calculated properly. Here is my SQL:</p>\n\n<pre><code>$sql = mysql_query(\"select `website`, \n                    sum(case when DATE(FROM_UNIXTIME(`date_assigned`)) = DATE(CURDATE()) then 1 else 0 end) AS c_day, \n                    sum(case when DATE(FROM_UNIXTIME(`date_assigned`)) = DATE(CURDATE() - INTERVAL 1 DAY) then 1 else 0 end) AS c_yesterday, \n                    sum(case when DATE(FROM_UNIXTIME(`date_assigned`)) = DATE(CURDATE() - INTERVAL 2 DAY) then 1 else 0 end) AS c_2_days, \n                    sum(case when DATE(FROM_UNIXTIME(`date_assigned`)) = DATE(CURDATE() - INTERVAL 3 DAY) then 1 else 0 end) AS c_3_days, \n                    sum(case when DATE(FROM_UNIXTIME(`date_assigned`)) = DATE(CURDATE() - INTERVAL 4 DAY) then 1 else 0 end) AS c_4_days, \n                    sum(case when DATE(FROM_UNIXTIME(`date_assigned`)) = DATE(CURDATE() - INTERVAL 5 DAY) then 1 else 0 end) AS c_5_days, \n                    sum(case when DATE(FROM_UNIXTIME(`date_assigned`)) = DATE(CURDATE() - INTERVAL 6 DAY) then 1 else 0 end) AS c_6_days,\n                    sum(case when DATE(FROM_UNIXTIME(`date_assigned`)) = DATE(CURDATE() - INTERVAL 7 DAY) then 1 else 0 end) AS c_7_days,\n                    sum(case when WEEK(FROM_UNIXTIME(`date_assigned`)) = WEEK(CURDATE()) then 1 else 0 end) AS c_week, \n                    sum(case when MONTH(FROM_UNIXTIME(`date_assigned`)) = MONTH(CURDATE()) then 1 else 0 end) AS c_month,\n                    sum(case when MONTH(FROM_UNIXTIME(`date_assigned`)) = MONTH(CURDATE() - INTERVAL 1 MONTH) then 1 else 0 end) AS c_last_month,\n                    sum(case when YEAR(FROM_UNIXTIME(`date_assigned`)) = YEAR(CURDATE()) then 1 else 0 end) AS c_year\n                    from `assignments`\n                    where `id_dealership`!='65' and `id_dealership`!='77' and `id_dealership`!='89'\n                    group by `website`\n                    order by `website` asc\n                    \") or die(mysql_error());\n</code></pre>\n\n<p>So as you can see, <code>c_month</code> is what is causing me problems. I have no clue why this is happening considering c_last_month is working flawlessly.</p>\n\n<p>EDIT AGAIN:</p>\n\n<p>Heres the table structure and some sample data:</p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS `assignments` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `id_dealership` int(11) NOT NULL,\n  `id_lead` int(11) NOT NULL,\n  `date_assigned` int(11) NOT NULL,\n  `website` varchar(255) NOT NULL DEFAULT '',\n  `make` varchar(255) NOT NULL DEFAULT '',\n  `model` varchar(255) NOT NULL DEFAULT '',\n  `ip_address` varchar(255) NOT NULL DEFAULT '',\n  PRIMARY KEY (`id`),\n  KEY `id_dealership` (`id_dealership`),\n  KEY `id_lead` (`id_lead`)\n) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=9848 ;\n\n\n(1165, 40, 1373, 1325540129, 'website.com', 'Ford', 'Edge', ''),\n(1164, 34, 1372, 1325539601, 'website.com', 'Ford', 'F-350', ''),\n(1163, 34, 1371, 1325537245, 'website.com', 'Ford', 'Focus', ''),\n(1162, 34, 1370, 1325529221, 'website.com', 'Ford', 'Flex', ''),\n</code></pre>\n"},{"tags":["mysql","full-text-search"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":37,"score":3,"question_id":13092326,"title":"Comparing Relevance Scores From mySQL full text searches from different tables","body":"<p><strong>Scenario</strong>:</p>\n\n<p>I have 5 tables all which need to be searched. I have proper full text indexes (indices?) for each. I can search each individually using MATCH and AGAINST, and ordering by their relevance scores.</p>\n\n<p>The problem is I want to combine and interweave the search results of all 5 tables and base it off of relevance score. Like so:</p>\n\n<pre><code>(SELECT *, MATCH(column) AGAINST (query) as score\nFROM table1\nWHERE MATCH (column) AGAINST (query))\nUNION\n(SELECT *, MATCH(column) AGAINST (query) as score\nFROM table2\nWHERE MATCH (column) AGAINST (query))\nUNION\n...\nORDER BY score DESC\n</code></pre>\n\n<p>This works well and dandy except that table 1 may have twice as many rows as table 2. Thus, since mySQL takes into account uniqueness for relevance, the score for results of table 1 are most often significantly higher the results of table 2. </p>\n\n<p><strong>Ultimately</strong>: How can I normalize the scores for the results from the 5 tables of varying size if I want to weight results from each table equally?</p>\n"},{"tags":["mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13210510,"title":"Dragging some rows in the middle of the table","body":"<p>So as i say , is possible copy each row and put it on the row below or as the same move field rows to the fields below? ( have and index auto increment of course ).The result should be the old row 40 content (fields) in the row 41 and so. </p>\n\n<pre><code>REPLACE table SET column1 = previuos(column1), column2= previous(column2), column3=(previous(column3)  where id &gt; 20 and id &lt; 300 \n</code></pre>\n\n<p>They are not the last inserted, they are in the middle of the table and want to move it down , so that let me some empty rows ( with the index ) at the beginning of the selected ones</p>\n\n<pre><code>  INSERT INTO table (\n  SELECT column1,column2,column3 \n  FROM  table  WHERE id &gt; 20 AND id &lt; 200\n  ) WHERE id = 30 \n</code></pre>\n\n<p>selected row from 21 to 199 then inserted on 30 and ahead</p>\n\n<p>thank you</p>\n"},{"tags":["php","mysql","pdo","prepared-statement"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13222224,"title":"using mysql LIKE statement","body":"<p>I am trying to create a duplicate username checker and I am thinking this is probably the way to do it correct me if im wrong. Basically I want the username the user input to be stored in a variable called <code>userName</code> and then use that variable to check and see if there are any <code>LIKE</code> rows in the database and if so return a count of 1 or more to a variable named <code>$count</code>  I would then have an <code>IF ELSE</code> statement that would either yell at the user or let them continue. I have run into a problem using the <code>LIKE</code> statement. I think my syntax could be wrong since I have been trying several different methods but still no luck. </p>\n\n<h2>Main Code</h2>\n\n<pre><code>&lt;?php\n\nrequire 'DB.php';\n$userName = \"tes\";\necho $userName;\ntry{\n$stmt = $conn-&gt;prepare('SELECT COUNT(*) FROM `CLL_users` WHERE `user_name` LIKE \"% . \":userName\" . \"');\n$stmt-&gt;bindValue(':userName', $userName);\n$stmt-&gt;execute();\n$count = $stmt-&gt;fetchColumn();\nreturn $count;\necho $count;\n\n} catch (PDOException $e){\n    echo 'Connection failed: ' . $e-&gt;getMessage();\n\n    }\n\n\n?&gt;\n</code></pre>\n"},{"tags":["mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13222231,"title":"why does this query fail in MySQL 5.1.56?","body":"<p>The following query fails in MySQL 5.1.56:</p>\n\n<pre><code>SELECT \nshop_id, products.product_id AS\nproduct_id, brand, title, price, image, image_width, image_height\n\nFROM products, users LEFT JOIN\n\n(\n    SELECT fav5.product_id AS product_id, SUM(CASE \n    WHEN fav5.current = 1 AND fav5.closeted = 1 THEN 1\n    WHEN fav5.current = 1 AND fav5.closeted = 0 THEN -1\n    ELSE 0\n    END) AS favorites_count\n    FROM favorites fav5\n    GROUP BY fav5.product_id \n\n) AS fav6 ON products.product_id=fav6.product_id\nWHERE products.product_id= 46876 AND users.user_id!=products.product_id\n</code></pre>\n\n<p>The error is</p>\n\n<pre><code>#1054 - Unknown column 'products.product_id' in 'on clause'\n</code></pre>\n\n<p>This modification without the user table does not fail:</p>\n\n<pre><code>SELECT \nshop_id, products.product_id AS\nproduct_id, brand, title, price, image, image_width, image_height\n\nFROM products LEFT JOIN\n\n(\n    SELECT fav5.product_id AS product_id, SUM(CASE \n    WHEN fav5.current = 1 AND fav5.closeted = 1 THEN 1\n    WHEN fav5.current = 1 AND fav5.closeted = 0 THEN -1\n    ELSE 0\n    END) AS favorites_count\n    FROM favorites fav5\n    GROUP BY fav5.product_id \n\n) AS fav6 ON products.product_id=fav6.product_id\nWHERE products.product_id= 46876\n</code></pre>\n\n<p>Neither query fails in MySQL 5.0.67. (I exported the database from 5.0.67 and imported into 5.1.56 so the structure should be identical.)</p>\n\n<p>The products table does have a product_id column, of type int(10). The favorites table also has a product_id column of type int(10). What is going on?</p>\n"},{"tags":["iphone","mysql","ipad","asiformdatarequest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13129935,"title":"send ASIFormDataRequest request","body":"<p>I'm trying to send data from iPhone to php file to insert some data in mySql </p>\n\n<p>in iPhone I wrote the following code:</p>\n\n<pre><code>-(IBAction) SendToServer{\n\nNSString *phpUrl = @\"http://mamdouhsaleh.com/myFolder/RegisteredPersons.php\";\n\nNSString *dbName = @\"my_dbName\";\nNSString *localHost = @\"localhost\";\nNSString *dbUser = @\"my_userName\";\nNSString *dbPwd = @\"my_password\";\n\nNSString *PersonName2 = personName.text;\nNSString *CourseTitle2 = courseTitle.text;\nNSString *MobileNo2 = mobileNo.text;\nNSString *Email2 = email.text;\n\n\nNSURL *link = [NSURL URLWithString:[phpUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];\nASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:link];\n\n[request setRequestMethod:@\"POST\"];\n[request setPostValue:dbName forKey:@\"dbName\"];\n[request setPostValue:localHost forKey:@\"localHost\"];\n[request setPostValue:dbUser forKey:@\"dbUser\"];\n[request setPostValue:dbPwd forKey:@\"dbPwd\"];\n[request setPostValue:@\"\" forKey:@\"submit\"];\n\n[request setPostValue:PersonName2 forKey:@\"PersonName\"];\n[request setPostValue:CourseTitle2 forKey:@\"CourseTitle\"];\n[request setPostValue:MobileNo2 forKey:@\"MobileNo\"];\n[request setPostValue:Email2 forKey:@\"Email\"];\n\n[request setTimeOutSeconds:120];\n[request setDelegate:self];\nNSError *error = [request error];\n[request startAsynchronous];\n\nNSDictionary *questions = nil;\nif (!error) {\n    NSData *response = [request responseData];\n    NSString *json = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];\n    questions = [json objectFromJSONString];\n    NSLog(@\"Data: %@\", questions);\n\n}\n}\n</code></pre>\n\n<p>and im RegisteredPersons.php I wrote:</p>\n\n<pre><code>&lt;?php\n\nif (isset($_POST['submit'])) {\n\n$dbName = $_POST['dbName'];\n$localHost = $_POST['localHost'];\n$dbUser = $_POST['dbUser'];\n$dbPwd = $_POST['dbPwd'];\n\n$con = mysql_connect($localHost,$dbUser,$dbPwd);\n$db_found = mysql_select_db($dbName);\n\nmysql_query('SET CHARACTER SET UTF8');\nmysql_query(\"SET NAMES utf8; \");\n\n$myPageId = mysql_query(\"SELECT MAX(ID) FROM RegisteredPersons\");\n$row = mysql_fetch_row($myPageId);\n\n$personId = $row[0]++;\n$PersonName = $_POST['PersonName']; \n$CourseTitle = $_POST['CourseTitle'];\n$MobileNo = $_POST['MobileNo']; \n$Email = $_POST['Email']; \n\nmysql_query(\"INSERT INTO RegisteredPersons VALUES (\". $personId . \", '\" . $PersonName . \"', '\" . $CourseTitle . \"', \" . $MobileNo . \", '\" . $Email . \"')\");\n\n\nmysql_close();\n\n}\n\n?&gt;\n</code></pre>\n\n<p>but the insertion doesn't happen in the RegisteredPersons table. What is the wrong in my code?\nThanks in Advance</p>\n"},{"tags":["php","mysql","blob"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13222090,"title":"password protect a field in table #mysql","body":"<p>I am working on an examination project!\nI am in search of some technique to password protect a <strong><em>longblob</em></strong> field in mysql database.\nThis field is used to store question papers.\nI want to make it in such a way that even if someone hacks into my database, he cannot access the field unless he has a special passkey/password.</p>\n"},{"tags":["mysql","innodb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":24,"score":-1,"question_id":13221493,"title":"Is mysql (InnoDB) insert and update faster inside transaction than outside","body":"<p>Basically, the question is:</p>\n\n<p>In default MySQL configuration with InnoDB, is insert and update in on transaction faster then the same operation in two separate transactions.</p>\n\n<p>My assumption that it should be faster when you do in transaction but it would be great if somebody can example if it is really faster and why.</p>\n\n<p>I believe the answer depends on workload, so in which cases single transaction should be faster and in which cases two transactions should be faster. </p>\n\n<p>Does it matter which MySQL version is used? Any option influencing this?</p>\n"},{"tags":["mysql","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":18,"score":-1,"question_id":13222135,"title":"Select mutiples of one field","body":"<p>Is it possible to select individual rows within a table from a list of one column variables?</p>\n\n<p>e.g. i'm trying to select just certain products from a table of products, using a list of ID numbers</p>\n\n<p>Example table \"items\":</p>\n\n<pre><code>item_id    item_title    item_source\n-------    ----------    -----------\n123        item A        place_a\n124        item B        place_b\n125        item C        place_c\n126        item D        place_d\n</code></pre>\n\n<p>Here's what I'm trying, but it's not working:</p>\n\n<pre><code>select item_title, item_source from items where item_id IN ('123','125','126')\n</code></pre>\n\n<p>I want to return:</p>\n\n<pre><code>item A        place_a\nitem C        place_c\nitem D        place_d\n</code></pre>\n"},{"tags":["mysql","c","shared-libraries","static-libraries","ld"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13221838,"title":"ld cannot find libmysqlclient","body":"<p>I remember, years ago when I started using mySQL, it was a nightmare to set up things \"just so,\" so that the libraries were found (especially mySQL libraries!).  In my case, I believe ldconfig was the tool that sorted things out.  Flash forward to 2012 - have just installed a new \"primary\" system that includes 64-bit Ubuntu 12.04, and I'm in the process of making sure all my sources will compile.  Imagine my surprise that I'm back in the same boat with libmysqlclient.</p>\n\n<p>My web searches have revealed much to try, nothing that helps.  Along the way, I found this trick:  gcc ...  <code>mysql_config --cflags --libs</code> - very nice, but that didn't help.</p>\n\n<p>So, for example, the result of:</p>\n\n<pre><code>gcc -D_FILE_OFFSET_BITS=64 `mysql_config --cflags --libs` \\\n            -o check-my-ip \\\n            -s check-my-ip.c ../common/ini-file.c\n</code></pre>\n\n<p>is</p>\n\n<pre><code> /tmp/ccxAgCqr.o: In function `updateTables':\n /usr/local/src/check-my-ip/check-my-ip.c:373: undefined reference to `mysql_init'\n /usr/local/src/check-my-ip/check-my-ip.c:374: undefined reference to `mysql_real_connect'\n /usr/local/src/check-my-ip/check-my-ip.c:381: undefined reference to `mysql_error'\n /usr/local/src/check-my-ip/check-my-ip.c:381: undefined reference to `mysql_errno'\n /usr/local/src/check-my-ip/check-my-ip.c:397: undefined reference to `mysql_field_count'\n /usr/local/src/check-my-ip/check-my-ip.c:398: undefined reference to `mysql_use_result'\n /usr/local/src/check-my-ip/check-my-ip.c:399: undefined reference to `mysql_fetch_row'\n /usr/local/src/check-my-ip/check-my-ip.c:419: undefined reference to `mysql_free_result'\n /usr/local/src/check-my-ip/check-my-ip.c:422: undefined reference to `mysql_field_count'\n /usr/local/src/check-my-ip/check-my-ip.c:429: undefined reference to `mysql_close'\n /tmp/ccxAgCqr.o: In function `myQuery':\n /usr/local/src/check-my-ip/check-my-ip.c:439: undefined reference to `mysql_query'\n /usr/local/src/check-my-ip/check-my-ip.c:441: undefined reference to `mysql_error'\n /tmp/ccxAgCqr.o: In function `indexExists':\n /usr/local/src/check-my-ip/check-my-ip.c:464: undefined reference to `mysql_field_count'\n /usr/local/src/check-my-ip/check-my-ip.c:465: undefined reference to `mysql_use_result'\n /usr/local/src/check-my-ip/check-my-ip.c:466: undefined reference to `mysql_fetch_row'\n /usr/local/src/check-my-ip/check-my-ip.c:471: undefined reference to `mysql_free_result'\n collect2: ld returned 1 exit status\n make: *** [check-my-ip] Error 1\n</code></pre>\n\n<p>Output from  mysql_config --cflags --libs is:</p>\n\n<pre><code>-I/usr/include/mysql -DBIG_JOINS=1  -fno-strict-aliasing  -g\n-L/usr/lib/x86_64-linux-gnu -lmysqlclient -lpthread -lz -lm -lrt -ldl\n</code></pre>\n\n<p>These are some other commands that may be helpful in diagnosis:</p>\n\n<p>$ ldconfig -p | grep mysql</p>\n\n<pre><code>    libmysqlclient.so.18 (libc6,x86-64) =&gt; /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18\n    libmysqlclient.so (libc6,x86-64) =&gt; /usr/lib/x86_64-linux-gnu/libmysqlclient.so\n\n $ ls -l /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18\n lrwxrwxrwx 1 root root 24 Jun 11 10:21 /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18 -&gt; libmysqlclient.so.18.0.0\n $ ls -l /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18.0.0\n -rw-r--r-- 1 root root 3408136 Jun 11 10:21 /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18.0.0\n</code></pre>\n\n<p>I did an <code>aptitude search libmysql</code> and noted that there are 37 lines, most of which have the i386 designation (like: libmysqld-pic:i386),\nand I notice that there are zero lines with x86_64 (or -64) in that output; is that part of the problem?  (Here are those 37 lines)</p>\n\n<pre><code> $ aptitude search libmysql\n p   libmysql++-dev                            - MySQL C++ library bindings (development)\n p   libmysql++-dev:i386                       - MySQL C++ library bindings (development)\n p   libmysql++-doc                            - MySQL C++ library bindings (documentation and exampl\n p   libmysql++3                               - MySQL C++ library bindings (runtime)\n p   libmysql++3:i386                          - MySQL C++ library bindings (runtime)\n p   libmysql-cil-dev                          - MySQL database connector for CLI\n p   libmysql-diff-perl                        - module for comparing the table structure of two MySQ\n p   libmysql-java                             - Java database (JDBC) driver for MySQL\n p   libmysql-ocaml                            - OCaml bindings for MySql\n p   libmysql-ocaml:i386                       - OCaml bindings for MySql\n p   libmysql-ocaml-dev                        - OCaml bindings for MySql\n p   libmysql-ocaml-dev:i386                   - OCaml bindings for MySql\n v   libmysql-ocaml-dev-dnim6:i386             -\n v   libmysql-ocaml-dev-jygp6                  -\n v   libmysql-ocaml-dnim6:i386                 -\n v   libmysql-ocaml-jygp6                      -\n p   libmysql-ruby                             - Transitional package for ruby-mysql\n v   libmysql-ruby:i386                        -\n p   libmysql-ruby1.8                          - Transitional package for ruby-mysql\n v   libmysql-ruby1.8:i386                     -\n p   libmysql-ruby1.9.1                        - Transitional package for ruby-mysql\n v   libmysql-ruby1.9.1:i386                   -\n p   libmysql6.4-cil                           - MySQL database connector for CLI\n i   libmysqlclient-dev                        - MySQL database development files\n p   libmysqlclient-dev:i386                   - MySQL database development files\n v   libmysqlclient15-dev                      -\n v   libmysqlclient15-dev:i386                 -\n i A libmysqlclient18                          - MySQL database client library\n p   libmysqlclient18:i386                     - MySQL database client library\n p   libmysqlcppconn-dev                       - MySQL Connector for C++ (development files)\n p   libmysqlcppconn-dev:i386                  - MySQL Connector for C++ (development files)\n p   libmysqlcppconn5                          - MySQL Connector for C++ (library)\n p   libmysqlcppconn5:i386                     - MySQL Connector for C++ (library)\n i   libmysqld-dev                             - MySQL embedded database development files\n p   libmysqld-dev:i386                        - MySQL embedded database development files\n p   libmysqld-pic                             - MySQL database development files\n p   libmysqld-pic:i386                        - MySQL database development files\n</code></pre>\n\n<p>Here's the content of /usr/lib/mysql</p>\n\n<pre><code>$ find /usr/lib/mysql\n/usr/lib/mysql\n/usr/lib/mysql/plugin\n/usr/lib/mysql/plugin/qa_auth_client.so\n/usr/lib/mysql/plugin/auth.so\n/usr/lib/mysql/plugin/qa_auth_server.so\n/usr/lib/mysql/plugin/semisync_master.so\n/usr/lib/mysql/plugin/libdaemon_example.so\n/usr/lib/mysql/plugin/ha_example.so\n/usr/lib/mysql/plugin/adt_null.so\n/usr/lib/mysql/plugin/auth_test_plugin.so\n/usr/lib/mysql/plugin/auth_socket.so\n/usr/lib/mysql/plugin/qa_auth_interface.so\n/usr/lib/mysql/plugin/semisync_slave.so\n/usr/lib/mysql/plugin/mypluglib.so\n</code></pre>\n\n<p>I don't know what else to try, where else to look, and would appreciate any pointers.</p>\n"},{"tags":["mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13221273,"title":"Setting a LIMIT by a parameter other than number of rows","body":"<p>I have an application that searches and shows user recommendations of different Institutions.</p>\n\n<p>Each Institution can have any number of recommendations.</p>\n\n<p>The results are presented per institute like so:</p>\n\n<ul>\n<li>Inst A has 6 recommendations</li>\n<li>inst B has 4 recommendations</li>\n<li>and so on...</li>\n</ul>\n\n<p>I want to draw only ten <strong>Institutions</strong> at a time.</p>\n\n<p>The problem is that my query refers to <strong>recommendations</strong>, and not to institutions, and therefore I end up getting 10 recommendations instead of 10 institutions.</p>\n\n<p>Is there a way to tell MySQL that the limit refers to DISTINCT institutions, while still pulling in effect DUPLICATE institutions (i.e a number of recommendations on the same institute)?</p>\n\n<p>The simpified versions of the actual query:</p>\n\n<pre><code>SELECT * FROM institutions\nLEFT JOIN recommendations\n  ON institutions.InstitutionID = recommendations.InstitutionID\nWHERE [SOMETHING]\nLIMIT 10\n</code></pre>\n\n<p>a different way to present the question: Is it possible to make the LIMIT clause refer to the original SELECT without the JOIN?</p>\n"},{"tags":["mysql","permissions","migration","debian","mysqldump"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13217563,"title":"Migrate mysql users to another server","body":"<p>I have created a <code>mysqldump --all-databases</code>  and transferred all my databases to the new server.  It didn't work as <code>debian-sys-maint</code>users password didn't match. So I change the password of this user. After that I restart my server and got this error. </p>\n\n<blockquote>\n  <p>ERROR 1577 (HY000) at line 1: Cannot proceed because system tables\n  used by Event Scheduler were found damaged at server start ERROR 1547\n  (HY000) at line 1: Column count of mysql.proc is wrong. Expected 20,\n  found 16. The table is probably corrupted</p>\n</blockquote>\n\n<p>I dont know how many more errors will come after this. So I thought create dump with only databases which are associated with my applications (<code>mysqldump --databases</code>). </p>\n\n<p>Now how do <strong>migrate the users</strong>? Is there any standard way?</p>\n\n<h3>More Information:</h3>\n\n<pre><code>New Server version: 5.1.63-0+squeeze1 (Debian)\nOld Server version: 5.0.51a-24+lenny5 (Debian)\n</code></pre>\n"},{"tags":["mysql","sql-server","database","dedicated-server","development-machine"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13221704,"title":"MySQL configuration type?","body":"<p>I am installing MySQL and when it reaches the configuration step it is asking me to select from on of the following server configuration types:</p>\n\n<ul>\n<li>Development Machine</li>\n<li>Server Machine</li>\n<li>Dedicated Machine</li>\n</ul>\n\n<p>I am new to mysql, the reason I am installing this is because I am making an application which will store data on a database using MySQL. Now, can someone explain what does these server configurable type mean and which one should I be selecting? </p>\n"},{"tags":["php","mysql","wordpress","wordpress-plugin","e-commerce"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13158545,"title":"wp e-commerce country list at checkout","body":"<p>Ok I have a store at <a href=\"http://sergedenimes.com/products-page/\" rel=\"nofollow\">http://sergedenimes.com/products-page/</a></p>\n\n<p>It uses the wp e-commerce plugin on wordpress. I have modified the theme files to get the appearance and layout I want but the other day another site user took the liberty of updating the plugin without backing up the files thus overwriting my changes.</p>\n\n<p>(I know this shouldn't have happened and I should have the theme files in a different directory but that's a different issue)</p>\n\n<p>Anyways, luckily I managed to restore almost all of the theme files to my ones and the store is back to how it was, except for one thing: on the checkout page there is a dropdown where the user selects their country so the store can calculate delivery costs. This dropdown now has no countries listed in it. I checked the checkout theme file and it has the <code>&lt;?php echo wpsc_shipping_country_list();?&gt;</code> tag in the correct place.</p>\n\n<p>Any ideas why the country list is not populated with selections any more? How can I fix?</p>\n\n<p>(in order to see for yourself you'll need to add at least one product to cart and go to the checkout)</p>\n\n<p>Thanks</p>\n\n<p>Edit in answer to Marty's points:</p>\n\n<ul>\n<li>The total price will always include shipping - it is a physical item and shipping is added. The default shipping country is UK which is why it adds on £3.60</li>\n<li>Not sure about the zipcode box. can you provide a screenshot? For me it says nothing of providing a zip code - it says \"Please choose a country below to calculate your delivery costs\" (as it should) then there is a dropdown with no options in it to select. (which is my problem). I can't see a textfield here and there shouldn't be one.</li>\n<li>Despite perhaps being on a Canadian server the site and company is UK-based and thus the currency reflects this</li>\n<li>Thanks for the link although it doesn't seem to contain the solution. Tried deactivating/reactivating and now the checkout link in the cart widget goes to the wrong page.</li>\n</ul>\n\n<p>(OK fixed the cart widget link issue but the country dropdown is still broken)</p>\n\n<p>Another Edit:\nHere is a pastebin of my entire checkout page template file: <a href=\"http://pastebin.com/aGxqsTVt\" rel=\"nofollow\">http://pastebin.com/aGxqsTVt</a></p>\n\n<p><strong>Update</strong>:\nSo I've tried checking the queries in the core files and adding the wp_ prefix to the table names with no luck.\nStill really struggling with this and it seems like the update has messed up a lot of things, including that the store is now showing products that are saved as drafts.</p>\n\n<p>Any suggestions greatly appreciated.</p>\n\n<p>OK so I'm adding a php and mysql tag to this as that's where I believe the problem lies.</p>\n\n<p>Here is the function that I believe is supposed to produce the country list:</p>\n\n<pre><code>function wpsc_shipping_country_list( $shippingdetails = false ) {\nglobal $wpdb, $wpsc_shipping_modules, $wpsc_country_data;\n$js = '';\n$output = '';\nif ( !$shippingdetails ) {\n    $output = \"&lt;input type='hidden' name='wpsc_ajax_actions' value='update_location' /&gt;\";\n    $js = \"  onchange='submit_change_country();'\";\n}\n$selected_country = (string) wpsc_get_customer_meta( 'shipping_country' );\n$selected_region  = (string) wpsc_get_customer_meta( 'shipping_region'  );\n\nif ( empty( $selected_country ) )\n    $selected_country = esc_attr( get_option( 'base_country' ) );\n\nif ( empty( $selected_region ) )\n    $selected_region = esc_attr( get_option( 'base_region' ) );\n\nif ( empty( $wpsc_country_data ) )\n    $country_data = $wpdb-&gt;get_results( \"SELECT * FROM `\" . WP_WPSC_CURRENCY_LIST . \"` WHERE `visible`= '1' ORDER BY `country` ASC\", ARRAY_A );\nelse\n    $country_data = $wpsc_country_data;\n\n$acceptable_countries = wpsc_get_acceptable_countries();\n\n$output .= wpsc_get_country_dropdown( array(\n    'name'                  =&gt; 'country',\n    'id'                    =&gt; 'current_country',\n    'additional_attributes' =&gt; $js,\n    'acceptable_ids'        =&gt; $acceptable_countries,\n    'selected'              =&gt; $selected_country,\n    'placeholder'           =&gt; '',\n) );\n\n$output .= wpsc_shipping_region_list( $selected_country, $selected_region, $shippingdetails );\n\nif ( isset( $_POST['wpsc_update_location'] ) &amp;&amp; $_POST['wpsc_update_location'] == 'true' ) {\n    wpsc_update_customer_meta( 'update_location', true );\n} else {\n    wpsc_delete_customer_meta( 'update_location' );\n}\n\n$zipvalue = (string) wpsc_get_customer_meta( 'shipping_zip' );\nif ( ! empty( $_POST['zipcode'] ) )\n    $zipvalue = $_POST['zipcode'];\n\n$zip_code_text = __( 'Your Zipcode', 'wpsc' );\n\nif ( ( $zipvalue != '' ) &amp;&amp; ( $zipvalue != $zip_code_text ) ) {\n    $color = '#000';\n    wpsc_update_customer_meta( 'shipping_zip', $zipvalue );\n} else {\n    $zipvalue = $zip_code_text;\n    $color = '#999';\n}\n\n$uses_zipcode = false;\n$custom_shipping = get_option( 'custom_shipping_options' );\nforeach ( (array)$custom_shipping as $shipping ) {\n    if ( isset( $wpsc_shipping_modules[$shipping]-&gt;needs_zipcode ) &amp;&amp; $wpsc_shipping_modules[$shipping]-&gt;needs_zipcode == true ) {\n        $uses_zipcode = true;\n    }\n}\n\nif ( $uses_zipcode ) {\n    $output .= \" &lt;input type='text' style='color:\" . $color . \";' onclick='if (this.value==\\\"\" . esc_js( $zip_code_text ) . \"\\\") {this.value=\\\"\\\";this.style.color=\\\"#000\\\";}' onblur='if (this.value==\\\"\\\") {this.style.color=\\\"#999\\\"; this.value=\\\"\" . esc_js( $zip_code_text ) . \"\\\"; }' value='\" . esc_attr( $zipvalue ) . \"' size='10' name='zipcode' id='zipcode'&gt;\";\n}\nreturn $output;\n}\n</code></pre>\n"},{"tags":["php","mysql","pdo"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":21,"score":-2,"question_id":13221697,"title":"How to best store decimals and text in sql database","body":"<p>Okay so i am making a directory of items with versions, sometimes the version will be a whole number, sometimes a decimal, sometimes text.</p>\n\n<p>What would the best field type be to store them? I am currently using varchar but it puts any decimals below 0 to 0 (so 0.8 becomes 0).</p>\n\n<p>Any idea should i just use text to store it?</p>\n"},{"tags":["php","mysql","similarity","articles"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13221684,"title":"sql - finding similar articles","body":"<p>I'm using php and xampp. In may table 'articles' I have around 3000 articles. If a user choose article 'Computer Dell INSPIRON 8500 INTEL PENTIUM 4 2.5GHZ 768MB CDRW/DVD COMBO', then I want to show him the similar articles. Any idea how to do it? (I programmed it and it worked, but it takes a lot of time to show the result). Any idea how to optimize the search?</p>\n\n<p>My steps:<br>\n1. I saved all the results of 'select * from articles' to array.<br>\n2. I used function similar_text(), and for each line calculated the similarity<br>\n3. I used bubble sort to order them (so the first line in table has the highest similarity)<br></p>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13221437,"title":"How to echo mysql CURRENT_DATE() in PHP?","body":"<p>I would like to compare PHP:</p>\n\n<pre><code>$now = date('Y-d-m H:i:s');\n</code></pre>\n\n<p>with mysql <code>CURRENT_DATE()</code> and <code>die();</code></p>\n\n<p>I need to check if the mysql <code>current_date</code> is the same as <code>$now</code>.</p>\n\n<p>However, I don't know how to do that. I would probably need some format change to <code>CURRENT_DATE()</code> too so I can compare it with <code>$now = date('Y-d-m H:i:s');</code></p>\n\n<p>Is this possible?</p>\n\n<p>If yes, what would php code look like?</p>\n"},{"tags":["php","mysql"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13221518,"title":"How in MySQL are records added without causing duplicates?","body":"<p>I'm working in MySQL and PHP. How in MySQL do you do an update to an existing table with additional records, without causing duplicates? The records are customers and the key to each record is the customer account number such as \"1234\". </p>\n\n<p>I need to do basically three things. Add a new customer record if their customer account doesn't exist, update an existing customer's information such as their phone number or e-mail address has changed, or delete the customer record if they are no longer a customer.</p>\n\n<p>The data comes in as a feed daily, and marketing wants to have their own data base of customers with their own fields added, which is why I don't simply re-create the database from the daily feed. The goal is to keep it up to date with the feed. Thanks!</p>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13221286,"title":"can't connect to database in website","body":"<p>I use this following codes to make new users in website. it's like sign up page. it's working perfectly in localhost and data will insert to the database and the table but now in the server it won't work.</p>\n\n<pre><code>  $code = rand(11111,99999);\n    $link1 = mysql_connect(\"http://www.mysite.com\",\"username\",\"password\");\n     mysql_select_db(\"username\");\n     mysql_query(\"SET character_set_results= 'utf8' , character_set_client = 'utf8' , character_set_connection = 'utf8',\n     character_set_database ='utf8', character_set_server = 'utf8' \");\n     mysql_query(\"INSERT into user(name,family,email,gender,username,pass)\n     values('$_POST[name]','$_POST[family]','$_POST[email]','$_POST[gender]','$_POST[username]','$code')\");\n     mysql_close($link1);\n     //connection user pass\n     $link2 = mysql_connect(\"http://www.mysite.com\",\"username\",\"password\");\n     mysql_select_db(\"username\");\n     mysql_query(\"INSERT into joinuser(username,pass,permission)values('$_POST[username]','$code','user')\" );\n     mysql_close($link2);\n</code></pre>\n\n<p>It inserts the values in localhost but it won't work in the server.</p>\n\n<p>It's php with mysql database.</p>\n\n<p>Any help will be appreciated.</p>\n"},{"tags":["php","mysql","null"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13221031,"title":"How to import in mysql null values from txt file","body":"<p>I have written a code in php where I:</p>\n\n<ol>\n<li>Open a txt file, </li>\n<li>Read each line, </li>\n<li>Use the <code>explode()</code> function to break the line into pieces (Based on spaces)</li>\n<li>Assign each substring to variables and</li>\n<li>Insert everything in the database.</li>\n</ol>\n\n<p>On these lines I have numbers and sometimes <code>NULL</code> values. The problem is that when I insert everything to mysql the null values are presented as <code>0</code> instead of <code>null</code>.</p>\n\n<p>Is it possible to display the null values from the txt as.. null values in my table in db?</p>\n\n<p>Please let me know if I didn't explain something clear.</p>\n\n<p>Thank you.<br>\nd.</p>\n\n<pre><code>&lt;!DOCTYPE HTML&gt;\n&lt;?php\n\n// This code:\n// 1) opens a txt file, which is stored in a specified folder,\n// 2) reads each line of the file,\n// 3) inserts the data in the specified database\n\n\n// Connect to the database\ninclude('connect.php'); \n// Define the location of the txt file.\n$myFile = \"/Applications/MAMP/htdocs/php_test/data_correct.txt\";\n// Open the file\n$fh = fopen($myFile,'r') or die (\"Could not open:\".mysql_error());\n// !feof means \"not the end of the file\"\nwhile (!feof($fh)){\n// fgets: gets the first line of $fh and assigns it to the variable $line\n// Each line can be up to 5000 characters long\n$line = fgets($fh,5000);\n // explode function separated the string by means of \"tab\" space\n  list($WN,$TOW,$Receiver_ID,$lat,$lon,$height,$SVID,$Azimuth,$Elevation,$Total_S4_L1,$SNR_L1,$Phi01_L1,$Phi03_L1,$Phi10_L1,$Phi30_L1,$Phi60_L1,$TEC_TOW_45,$dTEC_TOW_60_45,$TEC_TOW_30,$dTEC_TOW_45_30,$TEC_TOW_15,$dTEC_TOW_30_15,$TEC_TOW,$dTEC_TOW_15_TOW,$L1_lock_time,$L2_lock_time,$SI_index_L1,$Total_S4_L2,$SNR_L2,$Phi01_L2,$Phi03_L2,$Phi10_L2,$Phi30_L2,$Phi60_L2,$Lock_L2,$SI_index_L2,$Total_S4_L5,$SNR_L5,$Phi01_L5,$Phi03_L5,$Phi10_L5,$Phi30_L5,$Phi60_L5,$Lock_L5,$SI_index_L5)=explode(\" \",$line);\n\n  // insert data into table in database. The name of the table is GPS.\n // The primary key increases automatically. The null values are acceptable.\n\n    $query = (\"INSERT INTO GPS      (WN,TOW,Receiver_ID,lat,lon,height,SVID,Azimuth,Elevation,Total_S4_L1,SNR_L1,Phi01_L1,Phi03_L1,Phi10_L1,Phi30_L1,Phi60_L1,TEC_TOW_45,dTEC_TOW_60_45,TEC_TOW_30,dTEC_TOW_45_30,TEC_TOW_15,dTEC_TOW_30_15,TEC_TOW,dTEC_TOW_15_TOW,L1_lock_time,L2_lock_time,SI_index_L1,Total_S4_L2,SNR_L2,Phi01_L2,Phi03_L2,Phi10_L2,Phi30_L2,Phi60_L2,Lock_L2,SI_index_L2,Total_S4_L5,SNR_L5,Phi01_L5,Phi03_L5,Phi10_L5,Phi30_L5,Phi60_L5,Lock_L5,SI_index_L5)  \n     VALUES   ('\".$WN.\"','\".$TOW.\"','\".$Receiver_ID.\"','\".$lat.\"','\".$lon.\"','\".$height.\"','\".$SVID.\"','\".$Azimuth.\"','\".$Elevation.\"','\".$Total_S4_L1.\"','\".$SNR_L1.\"','\".$Phi01_L1.\"','\".$Phi03_L1.\"','\".$Phi10_L1.\"','\".$Phi30_L1.\"','\".$Phi60_L1.\"','\".$TEC_TOW_45.\"','\".$dTEC_TOW_60_45.\"','\".$TEC_TOW_30.\"','\".$dTEC_TOW_45_30.\"','\".$TEC_TOW_15.\"','\".$dTEC_TOW_30_15.\"','\".$TEC_TOW.\"','\".$dTEC_TOW_15_TOW.\"','\".$L1_lock_time.\"','\".$L2_lock_time.\"','\".$SI_index_L1.\"','\".$Total_S4_L2.\"','\".$SNR_L2.\"','\".$Phi01_L2.\"','\".$Phi03_L2.\"','\".$Phi10_L2.\"','\".$Phi30_L2.\"','\".$Phi60_L2.\"','\".$Lock_L2.\"','\".$SI_index_L2.\"','\".$Total_S4_L5.\"','\".$SNR_L5.\"','\".$Phi01_L5.\"','\".$Phi03_L5.\"','\".$Phi10_L5.\"','\".$Phi30_L5.\"','\".$Phi60_L5.\"','\".$Lock_L5.\"','\".$SI_index_L5.\"')\");\n\n\n\n    $result = mysqli_query($dbcon, $query) or die('no available data');\n\n   }// end of while loop\n  fclose($fh); \n\n   ?&gt;\n</code></pre>\n\n<p>The CREATE TABLE QUERY IS:</p>\n\n<pre><code>CREATE TABLE `GPS` ( \n  `id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,\n  `WN` INT,  # GPS Week Number\n  `TOW` INT, # Time of Week (seconds)\n  `Receiver_ID` VARCHAR( 30), # Name of GPS receiver\n  `lat` FLOAT(10,6), # Latitude of the GPS receiver\n  `lon` FLOAT(10,6), # Longitude of the GPS receiver\n   `height` FLOAT(10,2), # Height\n   `SVID` INT, #Satellite ID\n   `Azimuth` INT, # Azimuth in degrees\n   `Elevation` INT, #Elevation in degrees\n   `Total_S4_L1` FLOAT(10,3), # Total S4 on L1 (dimensionless)\n   `SNR_L1` FLOAT(10,1), # SNR on L1 (db)\n   `Phi01_L1` FLOAT(10,3), # Phi01 on L1, 1-second phase sigma (radians)\n   `Phi03_L1` FLOAT(10,3), # Phi03 on L1, 3-second phase sigma (radians)\n   `Phi10_L1` FLOAT(10,3), # Phi10 on L1, 10-second phase sigma (radians)\n   `Phi30_L1` FLOAT(10,3), # Phi30 on L1, 30-second phase sigma (radians)\n   `Phi60_L1` FLOAT(10,3), # Phi60 on L1, 60-second phase sigma (radians)\n   `TEC_TOW_45` FLOAT(10,4), # TEC at TOW -45s (TECU --&gt; TEC SLUNT)\n   `dTEC_TOW_60_45` FLOAT(10,4), # dTEC from TOW -60s to TOW -45s (TECU)\n   `TEC_TOW_30` FLOAT(10,4), # TEC at TOW -30s (TECU --&gt; TEC SLUNT)\n  `dTEC_TOW_45_30` FLOAT(10,4), # dTEC from TOW -45s to TOW -30s (TECU)\n   `TEC_TOW_15` FLOAT(10,4), # TEC at TOW -15s (TECU --&gt; TEC SLUNT)\n  `dTEC_TOW_30_15` FLOAT(10,4), # dTEC from TOW -30s to TOW -15s (TECU)\n `TEC_TOW` FLOAT(10,4), # TEC at TOW (TECU --&gt; TEC SLUNT)\n  `dTEC_TOW_15_TOW` FLOAT(10,4), # dTEC from TOW -15s to TOW (TECU)\n  `L1_lock_time`  INT, # L1 lock time (seconds)\n  `L2_lock_time` INT, #L2 lock time (seconds)\n  `SI_index_L1` FLOAT (10,4), # SI Index on L1: (10*log10(Pmax)-  10*log10(Pmin))/(10*log10(Pmax)+10*log10(Pmin)) (dimensionless)\n  `Total_S4_L2` FLOAT(10,3), # Total S4 on L2 (GPS/GLO) or E5a (GAL) (dimensionless)\n   `SNR_L2` FLOAT(10,1), # SNR on L2 (dB)\n  `Phi01_L2` FLOAT(10,3), # Phi01 on L2 (GPS/GLO) or E5a (GAL),  1-second phase sigma (radians)\n   `Phi03_L2` FLOAT(10,3), # Phi03 on L2 (GPS/GLO) or E5a (GAL),  3-second phase sigma (radians)\n   `Phi10_L2` FLOAT(10,3), # Phi10 on L2 (GPS/GLO) or E5a (GAL), 10-second phase sigma (radians)\n   `Phi30_L2` FLOAT(10,3), # Phi30 on L2 (GPS/GLO) or E5a (GAL), 30-second phase sigma (radians)\n   `Phi60_L2` FLOAT(10,3), # Phi60 on L2 (GPS/GLO) or E5a (GAL), 60-second phase sigma (radians)\n  `Lock_L2`  INT, # Lock time of L2 (GPS/GLO) or E5a (GAL) (seconds)\n  `SI_index_L2` FLOAT (10,4), # SI Index on L2 (GPS/GLO) or E5a (GAL) (dimensionless)\n  `Total_S4_L5` FLOAT(10,3), # Total S4 on L5 (GPS/GLO) or E5a (GAL) (dimensionless)\n `SNR_L5` FLOAT(10,1), # SNR on L5 (dB)\n `Phi01_L5` FLOAT(10,3), # Phi01 on L5 (GPS/GLO) or E5a (GAL),  1-second phase sigma (radians)\n  `Phi03_L5` FLOAT(10,3), # Phi03 on L5 (GPS/GLO) or E5a (GAL),  3-second phase sigma (radians)\n   `Phi10_L5` FLOAT(10,3), # Phi10 on L5 (GPS/GLO) or E5a (GAL),  10-second phase sigma (radians)\n  `Phi30_L5` FLOAT(10,3), # Phi30 on L5 (GPS/GLO) or E5a (GAL),  30-second phase sigma (radians)\n  `Phi60_L5` FLOAT(10,3), # Phi60 on L5 (GPS/GLO) or E5a (GAL),  60-second phase sigma (radians)\n  `Lock_L5`  INT, # Lock time of L5 (GPS/GLO) or E5a (GAL) (seconds)\n  `SI_index_L5` FLOAT (10,4) # SI Index on L5 (GPS/GLO) or E5a (GAL) (dimensionless)\n ) # Default storage engine from version MySQL 5.5 is InnoDB\n</code></pre>\n"},{"tags":["c#","html","mysql","asp.net-mvc-3","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13219871,"title":"Play video URL links stored in database MVC","body":"<p>Hi I'm currently developing a web Application In MVC3. I have created a database called PlayLink and have integrated a media player lean-back www.leanbackplayer.com into a view.</p>\n\n<p>From my view the user can add a URL link to the database and the link appears in the main View. I now need to link the player to the url's stored the database so that when the url is clicked the associated url media file will play in the player.</p>\n\n<p>This is my code for Lean Back player it currently only plays the URL the is pre coded.</p>\n\n<pre><code>  &lt;div class=\"leanback-player-video\"&gt;\n &lt;video width=\"500\" height=\"250\" preload=\"auto\" controls    p oster=\"http://dl.dropbox.com/u/46705018/sintel.mp4.mp4\"&gt;\n     &lt;source src=\"http://dl.dropbox.com/u/46705018/sintel.mp4.mp4\" type='video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"' /&gt;\n\n    &lt;object class=\"leanback-player-flash-fallback\" width=\"500\" height=\"250\" type=\"application/x-shockwave-flash\" data=\"http://player.longtailvideo.com/player.swf\"&gt;\n        &lt;param name=\"movie\" value=\"http://player.longtailvideo.com/player.swf\" /&gt;\n        &lt;param name=\"allowFullScreen\" value=\"true\" /&gt;\n        &lt;param name=\"wmode\" value=\"opaque\" /&gt;\n        &lt;param name=\"bgcolor\" value=\"#000000\" /&gt;\n        &lt;param name=\"flashVars\" value=\"controlbar=over&amp;amp;file=http://dl.dropbox.com/u/46705018/sintel.mp4.mp4\n                &amp;amp;image=http://dl.dropbox.com/u/46705018/sintel.mp4.mp4\" /&gt;\n    &lt;/object&gt;\n\n    &lt;div class=\"leanback-player-html-fallback\" style=\"width: 500px; height: 250px;\"&gt;\n        &lt;img src=\"http://dl.dropbox.com/u/46705018/sintel.mp4.mp4\" width=\"500\" height=\"250\" alt=\"Poster Image\" \n            title=\"No HTML5-Video playback capabilities found. Please download the video(s) below.\" /&gt;\n        &lt;div&gt;\n            &lt;strong&gt;Download Video:&lt;/strong&gt;\n            &lt;a href=\"http://dl.dropbox.com/u/46705018/sintel.mp4.mp4\"&gt;.mp4&lt;/a&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/video&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>MVC Model structure:</p>\n\n<pre><code>    using System;\n using System.Data.Entity;\n using System.Collections.Generic;\n using System.Linq;\n using System.Web;\n\n namespace ProjectNCI.Models\n  {\n    public class PlayLink\n   {\n    public int ID { get; set; }\n    public string Title { get; set; }\n    public DateTime Date { get; set; }\n\n   }\n   public class PlayLinkDBContext : DbContext\n   {\n       public DbSet&lt;PlayLink&gt; PlayLink { get; set; }\n   }\n}\n</code></pre>\n"},{"tags":["php","mysql","xml"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13220382,"title":"MySql to PHP to XML RSS Feed - Ellipsis Char","body":"<p>I am generating an RSS feed using PHP with MySQL and I am getting an issue where the 'Details' field from my database (that containing more text and more special characters than any other field being fetched) had been problematic. I have searched and changed many things, including getting the dB and output to XML matching at UTF-8 character coding.</p>\n\n<p>However, I can see that there are one or two items on my feed that are not fetching the 'Details' text. Here is the feed: <a href=\"http://www.laystar.co.uk/feeds/rssmagazine.php\" rel=\"nofollow\">http://www.laystar.co.uk/feeds/rssmagazine.php</a></p>\n\n<p>Scroll down to Crazy Drivers and you can see that the Description field has only limited detail (the words from the dB aren't included).</p>\n\n<p>When users upload articles they include a blurb for their article. It's the blurb that is being fetched. However, where they might enter three dots/periods '...' to form an ellipsis, I can see that in the dB the dots are transformed/converted into one ellipsis character (nothing that my PHP is doing other than strip slashes). If I remove the ellipsis char in the dB, then all is well and the XML outputs correctly - as in the article, A Glimpse of Yorkshire, which was working until I removed the ellipsis char.</p>\n\n<p>This is driving me nuts now, so any help would be much appreciated</p>\n"},{"tags":["c#","mysql","visual-studio-2010"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":34,"score":0,"question_id":13220945,"title":"Error! mysql.data.mysqlclient.mysqlexception(0x80004005)","body":"<p>I want to remote connection with mysql . I connected in my localhost there is no error but when I want to connect remote I got this error.</p>\n\n<p>I give permissions and change the firewall settings still does not work</p>\n"},{"tags":["php","mysql","date-formatting"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":30,"score":-1,"question_id":13211383,"title":"Change the desired output method of now() tags","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4066166/displaying-date-from-database-php\">Displaying Date from database PHP</a>  </p>\n</blockquote>\n\n\n\n<p>I'm using this method in an insert.php function from a form for a small CMS/blog I'm making.\nAll i want to know is how to change the <code>now()</code> format.</p>\n\n<pre><code>mysql_query(\"INSERT INTO Blog\n(Date, Title, Message, Image) \nVALUES(now(), '$_POST[Title]' , '$_POST[Message]' , '$_POST[Image]' ) \")\nor die(mysql_error()); \n</code></pre>\n\n<p>I have a page that is using an echo </p>\n\n<pre><code> echo \"&lt;h2&gt;\" . \"Posted on:   \" . $row['Date'] . \"&lt;/h2&gt;\";\n</code></pre>\n\n<p>and this works fine, but its outputting it in a format I don't desire.\nIt's currently displayed as: </p>\n\n<pre><code>Posted on: 2012-11-03 16:17:29\n</code></pre>\n\n<p>Id prefer it to be something like</p>\n\n<pre><code>Posted on: 3rd November 2012 at 16:15\n</code></pre>\n\n<p>Is this easily done?</p>\n"},{"tags":["php","mysql","date-formatting"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":830,"score":1,"question_id":4066166,"title":"Displaying Date from database PHP","body":"<p>right now I'm storing a date in the database, in the format <code>date(\"Y-m-d\")</code> and im storing it in <a href=\"http://dev.mysql.com/doc/refman/5.1/en/datetime.html\" rel=\"nofollow\">date column</a>.</p>\n\n<p>Now, I've retrieved it from the database but how can i display it like</p>\n\n<pre><code>October 31st 2010\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["php","mysql","pdo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13220789,"title":"PHP query - on 1st, 5th, 9th record add a class","body":"<p>Im wondering if its possible with PHP to add a class to X record returned. I know I can do this with JS only I'd like it to have the class added as the records are returned. </p>\n\n<p>I have the following loop in my PHP, From what I've found in google I need to add a counter to do this only I've been unsuccessful so far...</p>\n\n<pre><code>while ($row = $sth-&gt;fetch(PDO::FETCH_ASSOC)) {\n        echo '&lt;div class=\"entry span3\"&gt;&lt;span class=\"name\"&gt;' . $row['First_Name'] . ' ' . $row['Surname'] . \"&lt;/span&gt;\";\n        echo '&lt;img src=\"' . $row[\"picture_1\"] . '\" alt=\"' . $row['First_Name'] . ' ' . $row['Surname'] . ', text ' . $row['Date'] . ' \"&gt;';\n        echo '&lt;span class=\"from\"&gt;seen in ' . ucwords($row[\"Location_County__Seen\"]) . '&lt;/span&gt;&lt;a href=\"/' . strtolower($row[\"Surname\"]) . '/' . $row[\"ID\"] . '\"&gt;View Profile&lt;/a&gt;&lt;/div&gt;';\n    }\n</code></pre>\n"},{"tags":["sql","mysql"],"answer_count":8,"favorite_count":7,"up_vote_count":12,"down_vote_count":0,"view_count":7608,"score":12,"question_id":3856435,"title":"How to convert all tables from MyISAM into InnoDB?","body":"<p>I know I can issue an alter table individually to change the table storage from MyISAM to InooDB.</p>\n\n<p>I am wondering if there is a way to quickly change all of them to InnoDB?</p>\n"},{"tags":["mysql","wordpress","mamp","appfog"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13220759,"title":"Trouble tunneling my local Wordpress install to the mysql database on appfog","body":"<p>I've set up a wordpress install on appfog (using rackspace), and cloned the install to my local machine for development. I know the install works (using MAMP) because I created a local mysql database and changed wp-config.php to point to it. However, I want to develop without having to change wp-config.php every time I commit. After doing some research, it seems like the Appfog service Caldecott lets me tunnel into the mysql database on the server, using <code>af tunnel</code>. Unfortunately, I'm having issues with getting it working. Even if I change my MAMP mysql port to something like 8889, and tunnel mysql through port 3306, it looks like it's connected but I still get \"Error establishing a database connection\" when loading my localhost Wordpress. When I quit the mysql monitor (using <code>ctrl+x, ctrl+c</code>), I get a message stating \"Error: 'mysql' execution failed; is it in your $PATH?'. Originally, no, it wasn't, but I've fixed my PATH variable on my local machine so that when I go to Terminal and just type <code>mysql</code>, it loads up.</p>\n\n<p>So I guess my question is 2 parts:<br>\n<br>1.)Am I going with the right approach for Wordpress development on my local machine\n<br><br>and<br><br> \n2.)If so, why is the tunnel not working?</p>\n"},{"tags":["mysql","xcode"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13220430,"title":"xCode Connect To MySql database","body":"<p>I've read different tutorials about Xcode and MySQL Database. But I couldn't understand.</p>\n\n<p>How to connect Xcode to a MySQL database?</p>\n\n<p>Thanks!</p>\n"},{"tags":["php","mysql","database-connection"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13220684,"title":"Won't connect to the database","body":"<p>I'm confused...I'm using the same code in a different document and in there it's not a problem to get a connection to the database.</p>\n\n<p>But in the new document it's just not working...(password, username, database name...all is checked and correct) :-/</p>\n\n<pre><code>&lt;?php\n\ndefine (\"DB_HOST\", \"db1234567.db.hello.com\"); // set database host\ndefine (\"DB_USER\", \"db1234567\"); // set database user\ndefine (\"DB_PASS\",\"password123\"); // set database password\ndefine (\"DB_NAME\",\"db1234567\"); // set database name\n\n$link = mysql_connect(DB_HOST, DB_USER, DB_PASS) or die(\"Couldn't make connection.\");\n$db = mysql_select_db(DB_NAME, $link) or die(\"Couldn't select database\");\n\n?&gt;\n</code></pre>\n\n<p>In the browser I get this: \"Warning: mysql_connect() [function.mysql-connect]: Access denied for user 'db1234567'@'123.123.12.12 (using password: YES) in /homepages/12/1234567/test/test.php on line 8\nCouldn't make connection.\"</p>\n\n<p>Would be cool if someone could help me :) I'm not seeing any error...</p>\n\n<p>Thx!</p>\n"},{"tags":["mysql","localhost","wamp"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":538,"score":1,"question_id":6612448,"title":"how to make faster my localhost Wamp Mysql?","body":"<p>I'm running Drupal 7 on my Wamp localhost. </p>\n\n<ul>\n<li>On file \"my.ini\" I have:</li>\n</ul>\n\n<p>[wampmysqld]</p>\n\n<pre><code>port        = 3306\nsocket      = /tmp/mysql.sock\nkey_buffer = 16M\nmax_allowed_packet = 1M\ntable_cache = 64\nsort_buffer_size = 512K\nnet_buffer_length = 8K\nread_buffer_size = 256K\nread_rnd_buffer_size = 512K\nmyisam_sort_buffer_size = 8M\nbasedir=c:/wamp/bin/mysql/mysql5.5.8\nlog-error=c:/wamp/logs/mysql.log\ndatadir=c:/wamp/bin/mysql/mysql5.5.8/data\nlog = c:/wamp/logs/mysql_query_log.log\n</code></pre>\n\n<p>What should I change to make it faster?</p>\n\n<p>Gracias!</p>\n"},{"tags":["php","jquery","mysql","jqgrid","subgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":112,"score":0,"question_id":12997551,"title":"subgrid jqgrid sample php mysql","body":"<p>im getting stuck when i want create subgrid, always <strong>show uncaught exception: jqGrid - No such method: addSubGridCell</strong> i already try the sample but im getting error to,,, here is JS im so confused what i must do... </p>\n\n<pre><code>$(document).ready(function(){\n            var grid = $(\"#list2\");\n            grid.jqGrid({\n                url: 'json.php', //URL Tujuan Yg Mengenerate data Json nya\n                datatype: \"json\", //Datatype yg di gunakan\n                height: \"auto\", //Mengset Tinggi table jadi Auto menyesuaikan dengan isi table\n                mtype: \"GET\",\n                colNames: ['action','id','Agen','Suplier','Hotel','Check In', 'Check Out', 'ROOMs', 'Status', 'Group Hotel', 'Notes'],\n                colModel: [{name: 'myac', width:45, fixed:true, sortable:false, search:false, align:'center', resizable: false, resize:false, formatter:'actions',\n                        formatoptions:{\n                            keys:true,editbutton: true, delbutton: true, //Key True disini adalah untuk Shorcut Tombol Enter dan Esc, Enter untuk Save, dan Escape Untuk Batal, anda juga Membuatnya jadi False jika anda tidak ingin seperti itu\n                            onSuccess:function(jqXHR) {\n                                alert(jqXHR.responseText);\n                                return true;\n                            }\n                        }\n                    },\n                    {name:'id', key:true, index:'id', hidden:true,editable:false,editrules:{required:true}},\n                    {name:'agen',index:'agen',editable:true,editrules:{required:true}},\n                    {name:'suplier',index:'suplier',editable:true,editrules:{required:true}},\n                    {name:'hotel',index:'hotel',align:'center',editable:true,editrules:{required:true}},\n                    {name:'checkin',index:'checkin',align:'center',editable:true,editrules:{required:true}},\n                    {name:'checkout',index:'checkout',align:'center',editable:true,editrules:{required:true}},\n                    {name:'rooms',index:'rooms',align:'center',editable:true,editrules:{required:true}},\n                    {name:'status',index:'status',align:'center',editable:true,editrules:{required:true}},\n                    {name:'groupHotel',index:'groupHotel',align:'center',editable:true,editrules:{required:true}},\n                    {name:'notes',index:'notes',align:'center',editable:true,editrules:{required:true}}\n                ],\n                rownumbers:true,\n                rowNum: 10,\n                rowList: [10,20,30],\n                pager: '#pager2',\n                sortname: 'id',\n                viewrecords: true,\n                sortorder: \"desc\",\n                editurl: \"crud.php\",\n                multiselect: false,\n                caption: \"Record Test\",\n                // subGrid: true,\n    //          subGridUrl : \"subrgrid1.php\",\n    //          subGridModel : [ \n             //      {\n             //      name  : ['ID', 'Id Reservation', 'Room Type', 'Total Room', ],\n             //      width : [55, 200, 80, 80, 80],\n             //      align : ['left','left','right','right','right'],\n             //      params: ['rooms'] \n             //      }\n             //    ]                    \n            });\n            grid.jqGrid('navGrid','#pager2',{view:true,edit:true,add:true,del:true});               \n        });\n</code></pre>\n\n<p>let me explain some, the comment from subgrid URL for the subgrid, without this master grid is good. </p>\n\n<p>here is the subgrid1.php </p>\n\n<pre><code>&lt;?php\n$db = mysql_connect(\"localhost\",\"root\",\"\");\n$con = mysql_select_db(\"ota\",$db);\nif(!$con){\n    echo \"Something Problem\";\n}\n\n$page  = $_GET['page'];\n$limit = $_GET['rows'];\n$sidx  = $_GET['sidx'];\n$sord  = $_GET['sord'];\n\nif(!$sidx) $sidx=1;\n\n\nfunction ToSql ($field, $oper, $val) {\n    // we need here more advanced checking using the type of the field - i.e. integer, string, float\n    switch ($field) {\n        case 'nik':\n            //return intval($val);\n            //break;\n        case 'agen':\n        case 'suplier':\n        case 'hotel':\n        case 'checkin':\n        case 'checkout':\n        case 'checkin':\n        case 'rooms':\n        case 'status':\n        case 'groupHotel':\n        case 'notes':\n\n\n            //return floatval($val);\n            //break;\n        default :\n            //mysql_real_escape_string is better\n            if($oper=='bw' || $oper=='bn') return \"'\" . addslashes($val) . \"%'\";\n            else if ($oper=='ew' || $oper=='en') return \"'%\" . addcslashes($val) . \"'\";\n            else if ($oper=='cn' || $oper=='nc') return \"'%\" . addslashes($val) . \"%'\";\n            else return \"'\" . addslashes($val) . \"'\";\n    }\n}\n\n###For Single Searching###\n\n//array to translate the search type\n$ops = array(\n        'eq'=&gt;'=', //equal\n        'ne'=&gt;'&lt;&gt;',//not equal\n        'lt'=&gt;'&lt;', //less than\n        'le'=&gt;'&lt;=',//less than or equal\n        'gt'=&gt;'&gt;', //greater than\n        'ge'=&gt;'&gt;=',//greater than or equal\n        'bw'=&gt;'LIKE', //begins with\n        'bn'=&gt;'NOT LIKE', //doesn't begin with\n        'in'=&gt;'LIKE', //is in\n        'ni'=&gt;'NOT LIKE', //is not in\n        'ew'=&gt;'LIKE', //ends with\n        'en'=&gt;'NOT LIKE', //doesn't end with\n        'cn'=&gt;'LIKE', // contains\n        'nc'=&gt;'NOT LIKE'  //doesn't contain\n);\nfunction getWhereClause($col, $oper, $val){\n        global $ops;\n        if($oper == 'bw' || $oper == 'bn') $val .= '%';\n        if($oper == 'ew' || $oper == 'en' ) $val = '%'.$val;\n        if($oper == 'cn' || $oper == 'nc' || $oper == 'in' || $oper == 'ni') $val = '%'.$val.'%';\n        return \" WHERE $col {$ops[$oper]} '$val' \";\n}\n$where = \"\"; //if there is no search request sent by jqgrid, $where should be empty\n$searchField = isset($_GET['searchField']) ? $_GET['searchField'] : false;\n$searchOper = isset($_GET['searchOper']) ? $_GET['searchOper']: false;\n$searchString = isset($_GET['searchString']) ? $_GET['searchString'] : false;\nif ($_GET['_search'] == 'true') {\n    $where = getWhereClause($searchField,$searchOper,$searchString);\n}\n\n\n            $data = mysql_query(\"SELECT COUNT(*) as count FROM reservation\".$where);\n            $row  = mysql_fetch_array($data);\n            $count = $row[\"count\"];\n            //die($count);\n            $count &gt; 0 ? $total_pages = ceil($count/$limit) :\n            $total_pages = 0;\n\n            if ($page &gt; $total_pages) $page=$total_pages;\n            $start = $limit*$page - $limit;\n\n            if($start &lt;0) $start = 0;\n            $data1 = mysql_query(\"SELECT * FROM reservation \".$where.\" ORDER BY $sidx $sord LIMIT $start, $limit\");\n            $responce = new stdclass();\n            $responce-&gt;page = $page;\n            $responce-&gt;total = $total_pages;\n            $responce-&gt;records = $count;\n            $i=0;\n            while($line = mysql_fetch_array($data1)){\n                $responce-&gt;rows[$i]['id']   = $line[\"id\"];\n    $responce-&gt;rows[$i]['cell'] = array('',$line[\"id\"],$line[\"agen\"],$line[\"suplier\"],$line[\"hotel\"],$line[\"checkin\"],$line[\"checkout\"],$line[\"rooms\"],$line[\"status\"],$line[\"groupHotel\"],$line[\"notes\"]);\n    $i++;\n}\necho json_encode($responce);\n</code></pre>\n\n<p>and here is the subgrid1.php</p>\n\n<pre><code>&lt;?php\n$examp = $_GET[\"q\"];\n\n$id = $_GET[\"idReservation\"];\n\n$db = mysql_connect($dbhost, $dbuser, $dbpassword) or die (\"Connection ERROR : \" .mysql_error());\n\nmysql_select_db($database) or die (\"Connection ERROR : \" .mysql_error());\n\n$sql = \"SELECT id, idReservation, idRoomType, totalroom FROM roomtotal WHERE id=\".$id\" ORDER BY id\";\n$result = mysql_query($sql) or die (.mysql_error());\n$i=0;\nwhile ($row = mysql_fetch_array($result, mysql_assoc)) {\n    $responce-&gt;rows[$i]['$id']=$row[\"id\"];\n    $responce-&gt;rows[$i]['cell']=array($row[\"id\"], $row[\"idReservation\"],$row[\"idRoomType\"],$row[\"totalroom\"]));\n    $i++;\n}\necho $json-&gt;encode($responce);\n</code></pre>\n\n<p>i know the wrong sql, but first i want show subgrid :)\nthanks before</p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":51,"score":3,"question_id":13219933,"title":"MySQL: Show specific records from table?","body":"<p>I have tables with following structure:</p>\n\n<p><strong>table1</strong></p>\n\n<pre><code>| ID1 | NAME | GROUP_ID |\n-------------------------\n|   1 |  AAA |      101 |\n|   2 |  A_A |      101 |\n|   3 |  BBB |        0 |\n|   4 |  CCC |      103 |\n|   5 |  C_C |      103 |\n|   6 |  DDD |        0 |\n|   7 |  EEE |        0 |\n|   8 |  FFF |        0 |\n|   9 |  GGG |        0 |\n|   10|  HHH |      104 |\n|   11|  H_H |      104 |\n</code></pre>\n\n<p><strong>table2</strong></p>\n\n<pre><code>| ID2 | NAME |\n--------------\n|   1 |  AAA |\n|   2 |  BBB |\n|   3 |  C_C |\n</code></pre>\n\n<p><strong>groups</strong></p>\n\n<pre><code>| GROUP_ID | NAME |\n-------------------\n|      101 |  AAA |\n|      101 |  A_A |\n|      103 |  CCC |\n|      103 |  C_C |\n|      104 |  HHH |\n|      104 |  H_H |\n</code></pre>\n\n<p>'table1' is a table with all elements. At this table have duplicate records founded by criteria and this elements inserted in table 'groups'. At table2 have elements who matched with elements from table1.</p>\n\n<p>I want to show all records from table1 who not in table2. If element from table2 is in table groups don't show all elements from this groups in result table. At this case the elements are AAA/A_A (group_id 101) and CCC/C_C(group_id 103) </p>\n\n<p><strong>RESULT TABLE</strong></p>\n\n<pre><code>| ID1 | NAME | GROUP_ID |\n-------------------------\n|   6 |  DDD |        0 |\n|   7 |  EEE |        0 |\n|   8 |  FFF |        0 |\n|   9 |  GGG |        0 |\n|   10|  HHH |      104 |\n|   11|  H_H |      104 |\n</code></pre>\n\n<p>The elements with names A_A and C_C not in RESULT TABLE because this items are duplicates.</p>\n\n<p>I try this:\n<a href=\"http://sqlfiddle.com/#!2/70253/3\" rel=\"nofollow\">http://sqlfiddle.com/#!2/70253/3</a></p>\n"},{"tags":["mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13220322,"title":"Is there a way in SQL to determine if certain days are in the same week?","body":"<p>I have the following table 'Schedule' in my database:</p>\n\n<pre><code>**Schedule**\nPK Weekday (ie., November 11, 2012)\nPK Punch-In (ie., 1:00 PM)\nPK Punch-Out (ie., 9:00 PM)\n</code></pre>\n\n<p>I am tasked with totaling the number of hours worked per week.</p>\n\n<p>For my example Sunday is Day 1 of the week and Saturday is Day 7.</p>\n\n<p>My question is how do I determine which days are in a \"week.\" Is there an SQL command for this? In other words, how do I determine if November 10 is the same week as November 11.</p>\n"},{"tags":["c++","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":48,"score":0,"question_id":13220281,"title":"Connecting to a local MySql database in C++","body":"<p>Is there a simple way to connect to a local MySql DataBase using C++, to then execute querys on it ?</p>\n"},{"tags":["mysql","database","eclipse","orm","jpa-2.0"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13216203,"title":"JPA generate tables from entities not doing anything","body":"<p>I am using Eclipse Indigo with Hibernate's JPA-2 implementation. The problem is that when I use that tool to \"Generate Tables from Entities\" there is no effect at all. I get 45 errors saying my tables do not exist.\nCan anyone help me figure this out, googling has not helped. I am stuck at this for a long time now.</p>\n\n<p>Here is my Hibernate Config</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;persistence version=\"2.0\" xmlns=\"http://java.sun.com/xml/ns/persistence\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"&gt;\n    &lt;persistence-unit name=\"testjpa\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n        &lt;class&gt;com.myclassregister.model.helper.enums.UserTypeEnum&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.enums.SystemRoleEnum&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.enums.SchoolRoleEnum&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.enums.PreferenceGroupEnum&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.enums.PreferenceEnum&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.enums.PostTypeEnum&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.enums.NoteTypeEnum&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.enums.NotePermissionEnum&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.enums.IssueTypeEnum&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.enums.IssueCategoryEnum&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.enums.GenderEnum&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.enums.CaseStatusEnum&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.embeddables.Recipient&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.embeddables.Name&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.embeddables.Mobile&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.embeddables.Landline&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.embeddables.BlobField&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.embeddables.AuditTrail&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.helper.embeddables.Address&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.users.UserCredential&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.users.User&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.users.Teacher&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.users.SystemUser&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.users.SystemAdmin&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.users.Student&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.users.SchoolStaff&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.users.Principal&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.users.Parent&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.users.OfficeAdmin&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.subject.Syllabus&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.subject.Subject&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.subject.Schedule&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.subject.Homework&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.subject.Grade&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.subject.ExamSeries&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.subject.Exam&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.subject.Assignment&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.preferences.UserPreference&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.preferences.SchoolPreference&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.preferences.ParentSMSFilter&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.posts.PostRecipient&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.posts.Post&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.posts.NoteSharing&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.posts.Note&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.posts.Message&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.posts.LeaveRequest&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.misc.SchoolClass&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.misc.School&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.events.EventRSVP&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.events.EventInvitee&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.events.Event&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.casemgmt.Contact&lt;/class&gt;\n        &lt;class&gt;com.myclassregister.model.base.casemgmt.Case&lt;/class&gt;\n        &lt;properties&gt;\n            &lt;property name=\"hibernate.hbm2ddl.auto\" value=\"update\"/&gt;\n            &lt;property name=\"hibernate.dialect\" value=\"org.hibernate.dialect.MySQLDialect\"/&gt;\n            &lt;property name=\"hibernate.connection.driver_class\" value=\"com.mysql.jdbc.Driver\"/&gt;\n            &lt;property name=\"hibernate.connection.url\" value=\"jdbc:mysql://localhost/dummyissoyummy\"/&gt;\n            &lt;property name=\"hibernate.connection.password\" value=\"master\"/&gt;\n            &lt;property name=\"hibernate.connection.username\" value=\"root\"/&gt;\n            &lt;property name=\"javax.persistence.jdbc.url\" value=\"jdbc:mysql://localhost:3306/dummyissoyummy\"/&gt;\n            &lt;property name=\"javax.persistence.jdbc.user\" value=\"root\"/&gt;\n            &lt;property name=\"javax.persistence.jdbc.password\" value=\"master\"/&gt;\n            &lt;property name=\"javax.persistence.jdbc.driver\" value=\"com.mysql.jdbc.Driver\"/&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n\n<p>Entity:</p>\n\n<pre><code>import java.util.Set;\n\nimport javax.persistence.Basic;\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.JoinTable;\nimport javax.persistence.ManyToOne;\nimport javax.persistence.OneToMany;\n\nimport org.hibernate.annotations.Cascade;\n\nimport com.myclassregister.model.base.casemgmt.Contact;\nimport com.myclassregister.model.base.users.UserCredential;\nimport com.myclassregister.model.helper.enums.CaseStatusEnum;\nimport com.myclassregister.model.helper.enums.IssueTypeEnum;\n\n@Entity\npublic class Case implements java.io.Serializable {\n\n    private static final long serialVersionUID = 1226071621948838470L;\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.SEQUENCE)\n    @Column(nullable=false,unique=true)\n    private Long caseID;    \n\n    @Column(nullable=true)\n    @ManyToOne(optional=true)\n    @JoinColumn(name=\"caseOwnerID\", referencedColumnName=\"userID\", nullable=true)\n    private UserCredential caseOwner;\n\n    @Column(nullable=true)\n    @ManyToOne(optional=true)\n    @JoinColumn(name=\"caseRequestorID\", referencedColumnName=\"userID\", nullable=true)\n    private UserCredential caseRequestor;\n\n    @Column(nullable=false)\n    @ManyToOne(optional=true)\n    @JoinColumn(name=\"caseStatus\", referencedColumnName=\"caseStatus\", nullable=true)\n    private CaseStatusEnum caseStatus;\n\n    @Column(nullable=false)\n    @ManyToOne(optional=true)\n    @JoinColumn(name=\"issueType\", referencedColumnName=\"issueType\", nullable=true)\n    private IssueTypeEnum issueType;\n\n    @Column(nullable=false)\n    private Integer severity=5;\n\n    @OneToMany\n    @Basic(optional=true,fetch=FetchType.LAZY)\n    @Cascade(org.hibernate.annotations.CascadeType.SAVE_UPDATE)\n    @JoinTable(name=\"caseContact\", \n               joinColumns= {@JoinColumn(name=\"caseID\",referencedColumnName=\"caseID\")}, \n               inverseJoinColumns= {@JoinColumn(name=\"contactID\", referencedColumnName = \"contactID\")}\n    )\n    private Set&lt;Contact&gt; caseContacts;\n\n    public Case() {\n    }\n\n    public Case(Long caseID, UserCredential caseOwner,\n            UserCredential caseRequestor, CaseStatusEnum caseStatus,\n            IssueTypeEnum issueType, Integer severity, Set&lt;Contact&gt; caseContacts) {\n        this.caseID = caseID;\n        this.caseOwner = caseOwner;\n        this.caseRequestor = caseRequestor;\n        this.caseStatus = caseStatus;\n        this.issueType = issueType;\n        this.severity = severity;\n        this.caseContacts = caseContacts;\n    }\n\n    public Long getCaseID() {\n        return caseID;\n    }\n\n    public void setCaseID(Long caseID) {\n        this.caseID = caseID;\n    }\n\n    public UserCredential getCaseOwner() {\n        return caseOwner;\n    }\n\n    public void setCaseOwner(UserCredential caseOwner) {\n        this.caseOwner = caseOwner;\n    }\n\n    public UserCredential getCaseRequestor() {\n        return caseRequestor;\n    }\n\n    public void setCaseRequestor(UserCredential caseRequestor) {\n        this.caseRequestor = caseRequestor;\n    }\n\n    public CaseStatusEnum getCaseStatus() {\n        return caseStatus;\n    }\n\n    public void setCaseStatus(CaseStatusEnum caseStatus) {\n        this.caseStatus = caseStatus;\n    }\n\n    public IssueTypeEnum getIssueType() {\n        return issueType;\n    }\n\n    public void setIssueType(IssueTypeEnum issueType) {\n        this.issueType = issueType;\n    }\n\n    public Integer getSeverity() {\n        return severity;\n    }\n\n    public void setSeverity(Integer severity) {\n        this.severity = severity;\n    }\n\n    public Set&lt;Contact&gt; getCaseContacts() {\n        return caseContacts;\n    }\n\n    public void setCaseContacts(Set&lt;Contact&gt; caseContacts) {\n        this.caseContacts = caseContacts;\n    }\n\n    @Override\n    public int hashCode() {\n        final int prime = 31;\n        int result = 1;\n        result = prime * result\n                + ((caseContacts == null) ? 0 : caseContacts.hashCode());\n        result = prime * result + ((caseID == null) ? 0 : caseID.hashCode());\n        result = prime * result\n                + ((caseOwner == null) ? 0 : caseOwner.hashCode());\n        result = prime * result\n                + ((caseRequestor == null) ? 0 : caseRequestor.hashCode());\n        result = prime * result\n                + ((caseStatus == null) ? 0 : caseStatus.hashCode());\n        result = prime * result\n                + ((issueType == null) ? 0 : issueType.hashCode());\n        result = prime * result\n                + ((severity == null) ? 0 : severity.hashCode());\n        return result;\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj)\n            return true;\n        if (obj == null)\n            return false;\n        if (getClass() != obj.getClass())\n            return false;\n        Case other = (Case) obj;\n        if (caseContacts == null) {\n            if (other.caseContacts != null)\n                return false;\n        } else if (!caseContacts.equals(other.caseContacts))\n            return false;\n        if (caseID == null) {\n            if (other.caseID != null)\n                return false;\n        } else if (!caseID.equals(other.caseID))\n            return false;\n        if (caseOwner == null) {\n            if (other.caseOwner != null)\n                return false;\n        } else if (!caseOwner.equals(other.caseOwner))\n            return false;\n        if (caseRequestor == null) {\n            if (other.caseRequestor != null)\n                return false;\n        } else if (!caseRequestor.equals(other.caseRequestor))\n            return false;\n        if (caseStatus == null) {\n            if (other.caseStatus != null)\n                return false;\n        } else if (!caseStatus.equals(other.caseStatus))\n            return false;\n        if (issueType == null) {\n            if (other.issueType != null)\n                return false;\n        } else if (!issueType.equals(other.issueType))\n            return false;\n        if (severity == null) {\n            if (other.severity != null)\n                return false;\n        } else if (!severity.equals(other.severity))\n            return false;\n        return true;\n    }\n}\n</code></pre>\n"},{"tags":["mysql","android"],"answer_count":1,"favorite_count":4,"up_vote_count":2,"down_vote_count":1,"view_count":11856,"score":1,"question_id":4316763,"title":"Connect MySQL database from Android","body":"<p>well this is the code snippet i use to access the getUser.php to retrive user details from a MySQL database in my application:</p>\n\n<pre><code>String result = \"\";\n\n    //the year data to send\n\n    ArrayList&lt;NameValuePair&gt; nameValuePairs = new ArrayList&lt;NameValuePair&gt;();\n\n    nameValuePairs.add(new BasicNameValuePair(\"uid\",\"demo\"));\n\n         //http post\n         try{\n                 HttpClient httpclient = new DefaultHttpClient();\n\n           HttpPost httppost = new HttpPost(\"http://192.xxx.xx.xxx/getUser.php\");\n\n            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));\n                HttpResponse response = httpclient.execute(httppost);\n                HttpEntity entity = response.getEntity();\n                InputStream is = entity.getContent();\n        }catch(Exception e){\n                Log.e(\"log_tag\", \"Error in http connection \"+e.toString());\n        }\n        //convert response to string\n        try{\n                InputStream is = null;\n                BufferedReader reader = new BufferedReader(new InputStreamReader(is,\"iso-8859-1\"),8);\n                StringBuilder sb = new StringBuilder();\n             String line = null;\n                while ((line = reader.readLine()) != null) {\n                        sb.append(line + \"\\n\");\n                }\n                is.close();\n\n                result=sb.toString();\n        }catch(Exception e){\n                Log.e(\"log_tag\", \"Error converting result \"+e.toString());\n        }\n\n        //parse json data\n        try{\n                JSONArray jArray = new JSONArray(result);\n                for(int i=0;i&lt;jArray.length();i++){\n                        JSONObject json_data = jArray.getJSONObject(i);\n                        Log.i(\"log_tag\",\"id: \"+json_data.getInt(\"id\")+\n                              \", name: \"+json_data.getString(\"fname\")+\n                                \", sex: \"+json_data.getInt(\"sex\")+\n                                \", birthyear: \"+json_data.getInt(\"dob\")\n                        );\n                }\n\n  }\n        catch(JSONException e){\n                Log.e(\"log_tag\", \"Error parsing data \"+e.toString());\n        }\n\n}\n</code></pre>\n\n<p>This snippet is taken from <a href=\"http://helloandroid.com\" rel=\"nofollow\">http://helloandroid.com</a></p>\n\n<p>Everything is configured fine: the MySQL Db, IIS with FASTCGi, PHP tools and drivers. even the script below when called from browser with url: <a href=\"http://192.xxx.xx.x.xxx/getUser.php?uid=demo\" rel=\"nofollow\">http://192.xxx.xx.x.xxx/getUser.php?uid=demo</a> works fine, But returns error in android with <strong>java.lang.NullPointerException</strong> and <strong>org.json.JSONEXCEPTION: End of input at character 0</strong></p>\n\n<pre><code>&lt;?php\nmysql_connect(\"myhost\",\"username\",\"pwd\");\nmysql_select_db(\"mydb\");\n\n$q=mysql_query(\"SELECT * FROM userinfo WHERE uid ='\".$_REQUEST['uid'].\"'\");\n\nwhile($e=mysql_fetch_assoc($q))\n        $output[]=$e;\n\nprint(json_encode($output));\n\nmysql_close();\n?&gt;\n</code></pre>\n\n<p>Can anybody help in this section?</p>\n\n<p>Regards,\nMistry Hardik</p>\n"},{"tags":["php","mysql","email","smtp","swiftmailer"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13217217,"title":"Swiftmailer: dbReplacements by user id?","body":"<p>The Swiftmailer docs says you can create your own class to handle replacements using the Decorator plugin:</p>\n\n<pre><code>class DbReplacements implements Swift_Plugins_Decorator_Replacements {\n  public function getReplacementsFor($address) {\n    $sql = sprintf(\n      \"SELECT * FROM user WHERE email = '%s'\",\n      mysql_real_escape_string($address)\n    );\n\n    $result = mysql_query($sql);\n\n    if ($row = mysql_fetch_assoc($result)) {\n      return array(\n        '{username}'=&gt;$row['username'],\n        '{password}'=&gt;$row['password']\n      );\n    }\n  }\n}\n</code></pre>\n\n<p>But in my case my database contains duplicated email address, i.e. the same address can appear on 3-4 accounts, so I need to get the replacements based on the user id instead.</p>\n\n<p>How do I modify the above class to match my criteria?</p>\n"},{"tags":["php","mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":59,"score":-5,"question_id":13219626,"title":"Is it secure way to login with php?","body":"<p>I'm creating a login form with php. Following is my php login page code.</p>\n\n<p>Is it secure way to Log In with php <strong>OR</strong> is there any better way to Log In with php and mysql? </p>\n\n<p><strong>php Login Code</strong></p>\n\n<pre><code>&lt;?php\n$login = md5(\"login\");\nif(isset($_GET['do']) &amp;&amp; $_GET['do'] == \"login\" &amp;&amp; isset($_GET['valid']) &amp;&amp;    \n$_GET['valid'] == \"$login\" )\n{\necho \"&lt;h1&gt;You are already our member? &lt;/h1&gt;\";\n\nrequire_once(\"toplevel/content/database/databd.php\");\n$action = htmlspecialchars($_SERVER['PHP_SELF']);\n$action = \"$action?do=login&amp;valid=$login\";\n\nif(isset($_POST['Submit']) &amp;&amp; $_POST['Submit'] == \"Log In\")\n{\n    $uname = mysql_real_escape_string(htmlentities(trim($_POST['uname'])));\n    $pass2 = mysql_real_escape_string(htmlentities(trim($_POST['pass'])));\n    $pass = sha1($pass2); //sha1 pass\n\n    $check = mysql_query(\"SELECT uname, pass FROM renter_user WHERE uname = \n'$uname' and pass = '$pass' \");\n    $numrow = mysql_num_rows($check);\n\n    $err = array();\n\n    if(isset($uname) &amp;&amp; isset($pass2))\n    {\n        if(empty($uname) &amp;&amp; empty($pass2))\n        {\n            $err[] = \"All field require\";   \n        }\n        else\n        {\n            if(empty($uname))\n                $err[] = \"Username require\";\n\n            if(empty($pass2))\n                $err[] = \"Password require\";\n\n        }\n\n        if(!empty($err))\n        {\n            foreach($err as $er)\n            {\n                echo \"&lt;font color=red&gt;&amp;nbsp;&amp;nbsp; $er.&lt;/font&gt;  \n&lt;br/&gt;\";\n            }\n        }\n        else\n        {\n\n            if($numrow ==1)\n            {\n                $_SESSION['uname'] = $uname;\n                $_SESSION['pass'] = $pass;\n                header(\"Location: user/content/index.php\");\n            }\n            else\n            {\n        echo \"&lt;font color=red&gt;Username or Password is not match&lt;/font&gt;\";\n            }\n\n        }/// finally go to user section\n\n    }\n\n}\n\n?&gt;\n</code></pre>\n\n<p>Thanks for your advice.</p>\n\n<p><strong>I'M NEW IN PHP AND LEARNING IT</strong></p>\n"},{"tags":["mysql","database","innodb","myisam"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13218566,"title":"mysql myisam update","body":"<p>We use MySQL with MyIsam engine and have a situation where we need to update a huge number of rows (millions) on a daily basis while users can still be accessing the database.</p>\n\n<p>We have users from different timezones from USA, UK, India, China. Data is downloaded from a third party source when the user first signs up. All users share the same set of tables, but their data does not overlap i.e. No user will ever be accessing the same rows as another user. </p>\n\n<p>The third party system modifies the data so to keep our database up to date we download a new snapshot of the user’s data every night.The user’s data is updated at midnight relative to that user timezone.  </p>\n\n<p>Since all users share the same tables, this means the data update process can be updating the data of a user in an American timezone, while the users in the UK are actively browsing their data. This is where the problem lies. We have millions of data to be updated but we are not able to do. </p>\n\n<p>Please suggest how to best update a users' data without affecting other users accessing the database.  The data stored in database are numbers and all the columns are integers. </p>\n"},{"tags":["mysql","playframework-2.0","anorm"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13212900,"title":"MySQL Exception: Execute SQL Transaction","body":"<p>I am trying to commit a sql transaction to MySQL but I get myself past an <code>MySQLSyntaxErrorException</code>.  </p>\n\n<p>The code I am using is:  </p>\n\n<pre><code>implicit connection =&gt; \n        SQL(\"\"\"\n            start transaction;\n            insert into projects(id_user, name, description) values({idUser}, {name}, {description});\n            set @last_id = last_insert_id();\n            insert into assigned(id_user, id_project) values({idUser}, @last_id);\n            commit;\n        \"\"\")\n    .on('idUser -&gt; idUser,\n        'name -&gt; project.name,\n        'description -&gt; project.description\n    ).execute()  \n</code></pre>\n\n<p>The exception I get:  </p>\n\n<pre><code>[MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'insert into projects(id_user, name, description) values(1, 'First inserted proje' at line 1]  \n</code></pre>\n\n<p>I am starting to think that I can't execute such statements at all with Anorm.</p>\n"},{"tags":["php","mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13219288,"title":"import comma delimited file to mysql","body":"<p>I am downloading and importing a remote text file to a local mysql database.</p>\n\n<p>The format has recently changed to have a comma inside one of the columns and is causing the import to fail with error \"Invalid field count in CSV input on line 1.\"  The data now looks like:</p>\n\n<pre><code>\"bonita\",\"FL\",\"212025920\",\"2012929\",\"Hooker,Bill\"\n</code></pre>\n\n<p>How do I update this code snippet to allow for a comma within quotes?</p>\n\n<pre><code>foreach(explode($lineseparator,$csvcontent) as $line) {\n\n    $lines++;\n\n    $line = trim($line,\" \\t\");\n\n    $line = str_replace(\"\\r\",\"\",$line);\n\n    /************************************\n    This line escapes the special character. remove it if entries are already escaped in the csv file\n    ************************************/\n    $line = str_replace(\"'\",\"\\'\",$line);\n    /*************************************/\n\n    $linearray = explode($fieldseparator,$line);\n\n    $linemysql = implode(\"','\",$linearray);\n\n    $linemysql = str_replace(\"\\\"\",\"\",$linemysql);###code added\n\n        $query = \"insert ignore into $databasetable values('$linemysql');\";\n</code></pre>\n"},{"tags":["mysql","query"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13219212,"title":"speed up mysql query with group by","body":"<p>I have a mysql query:</p>\n\n<p><code>SELECT date(FROM_UNIXTIME(time)) as date,<br>\ncount(view) as views<br>\nFROM ('table_1')<br>\nWHERE 'address' = 1<br>\nGROUP BY date(FROM_UNIXTIME(time))</code></p>\n\n<p>total rows in table is <code>270k</code></p>\n\n<p>this query have slow executing, in myql-slow.log is: </p>\n\n<blockquote>\n  <p>Query_time: 1.839096  Lock_time: 0.000042 Rows_sent: 155  Rows_examined: 286435</p>\n</blockquote>\n\n<p>view - it's auto increment and primary key,  (int(11))<br>\naddress - have index , (int(11))<br>\ntime - also have index, (int(11))</p>\n\n<p>with use EXPLAIN looks like below:</p>\n\n<blockquote>\n  <p>id &nbsp; select_type  &nbsp;&nbsp;&nbsp;   table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   type   possible_keys&nbsp;&nbsp;&nbsp; key       key_len &nbsp;&nbsp;&nbsp;ref   &nbsp;&nbsp;&nbsp; rows  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   Extra<br>\n  1  SIMPLE  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   table_1  &nbsp; ref   &nbsp;&nbsp;&nbsp;address    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   address  5      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const  139138 &nbsp;  Using where; Using temporary; Using filesort</p>\n</blockquote>\n\n<p>maybe somebody know how to improve this query to speed up executing? maybe better will be if I will change date in php ? but I think in php take a date as timestamp next convert to human readable and make \"group by\" will take more time then one query in mysql .   <br><br>maybe somebody know how to make this query faster?</p>\n"},{"tags":["php","android","mysql"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":36,"score":-3,"question_id":13219153,"title":"Apostrophe does not work in mysql/PHP","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1961308/apostrophes-are-breaking-my-mysql-query-in-php\">apostrophes are breaking my mysql query in PHP</a>  </p>\n</blockquote>\n\n\n\n<p>My Android App is sending a message to my server (PHP script)\nThe PHP script is writing the message into MySQL.</p>\n\n<p>It works fine, but all messages containing an apostrophe ' (e.g. he's going to school) are not written into the database.</p>\n\n<p>Here the php script:</p>\n\n<pre><code>function deq($s)\n{\n    if($s == null)\n        return null;\n    return\n        get_magic_quotes_gpc() ?\n        stripslashes($s) : $s;\n}\n\n  if(md5(deq($_REQUEST['blub']).deq($_REQUEST['blub']).\"blabla\") == $_REQUEST['hash']){\n    mysql_connect(\"localhost\", \"blub\", \"blub\") or die(mysql_error());\n    mysql_select_db(\"blub\") or die(mysql_error());\n\n   // mysql_set_charset('UTF8');  // does not work as too old php\n   mysql_query(\"SET NAMES 'utf8'\");\nmysql_query(\"SET CHARACTER SET utf8\");\nmysql_query(\"SET COLLATION_CONNECTION = 'utf8_unicode_ci'\");\n\n    $mysqldate = gmdate( 'Y-m-d H:i:s');\n\n    $language = (int) $_REQUEST['language'];\n\n    $device = $_REQUEST['device'];\n\n    $ipaddress = $_SERVER['REMOTE_ADDR'];\n\n\n    mysql_query(\"INSERT INTO test(username, text, language, rating, checked, date)\n    VALUES('\".$_REQUEST['username'].\"', '\".$_REQUEST['text'].\"', '\".$language.\"', '0' , 'false', '\".$mysqldate.\"') \")\n    or die(mysql_error());\n\n    mysql_close();\n</code></pre>\n"},{"tags":["mysql","field","where","zero","clause"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13218431,"title":"Mysql returning rows with zero (0) column data in WHERE clause","body":"<p>I have a simple query for my table:</p>\n\n<pre><code>SELECT * from delivery_receipts WHERE siid='';\n</code></pre>\n\n<p>This table's unique key is drid, (irrelevant for this question)..\nThe targeted column (<code>siid</code>) is an <code>int(11)</code> field, non index and non unique... </p>\n\n<p>Anyway my problem is that, when I run this, mysql returns ALL ROWS that has:</p>\n\n<pre><code>SELECT drid,siid from delivery_receipts WHERE siid='0'\n</code></pre>\n\n<p>But of course if I search with the <code>siid</code> specified, only the rows w/ that <code>siid</code> match comes up....</p>\n\n<p>So it seems my table is returning a match on all rows that has \"0\" when searching for ''</p>\n"},{"tags":["mysql","database"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13219197,"title":"copy table rows and paste they in same table","body":"<p>I want to copy all rows from table and insert this rows in itself this table, that is if in table are rows</p>\n\n<pre><code>column\n--------\nA\nB\n</code></pre>\n\n<p>I want obtain</p>\n\n<pre><code>column\n--------\nA\nB\nA\nB\n</code></pre>\n\n<p>This may be make with php (or other language) right? but I interest, possible make this as 1 query? own mysql can this?</p>\n"},{"tags":["php","mysql","pdo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13219148,"title":"Pagination with PDO and MySQL","body":"<p>Im trying to return all records from my database and paginate them accordingly, </p>\n\n<p>I have the following I've managed to wrangle together from a tutorial only It doesnt seem to output anything to my browser so I presume I've made an error in my syntax? </p>\n\n<pre><code>// No County Selected\n        try\n        {\n        $per_page = '3';\n        $res = $conn-&gt;prepare(\"SELECT * FROM directory WHERE user_active != ''\");\n        $rows = $res -&gt;fetchAll();\n        $total_records = count($rows);\n        $pages = ceil($total_records / $per_page); \n        $page  = (isset ($_GET['page']))  ? (int) $_GET['page'] : 1 ;\n        $start = ($page - 1) *  $per_page; \n        $query = $db-&gt;query(\"SELECT * FROM directory LIMIT $start , $per_page\");\n        while($row = $query-&gt;fetch(PDO::FETCH_ASSOC)){\n        echo '&lt;br&gt;' . $row['id'];\n        } ?&gt;\n        &lt;br&gt;&lt;br&gt;\n        &lt;?php\n        if ($pages &gt;=  1 &amp;&amp; $page &lt;= $pages){\n        //if ($page&gt;1 &amp;&amp; $page &lt;= $pages){$previous=($page -1); echo '&lt;a href=\"?page=' .$previous. '\"&gt;Previous&lt;/a&gt;';}\n        for($x=1; $x&lt;=$pages; $x++){ echo ($x == $page) ? ' &lt;strong&gt;&lt;a href=\"?page='.$x.'\"&gt;'.$x.'&lt;/a&gt;&lt;/strong&gt; ' : ' &lt;a href=\"?page='.$x.'\"&gt;'.$x.'&lt;/a&gt; ';}\n        //if ($page&gt;1  &amp;&amp; $page &lt;= $pages){ $next=($page+1) ; echo '&lt;a href=\"?page=' .$next. '\"&gt;Next&lt;/a&gt;';}\n        }\n</code></pre>\n"},{"tags":["php","mysql","sql","database","database-design"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13216196,"title":"Database relation of purchased items","body":"<p>I'm trying to come up with a database relation to keep track of purchased items that will be used for look up afterwards--for example ebooks. Ignore the ellipses--they represent miscellaneous data such as timestamp, etc...</p>\n\n<p>Here's the table I have right now:</p>\n\n<pre><code>purchased:\ntransaction_id(int)(pk)(auto_inc) | username (varchar) | purchases (text) | ...\n</code></pre>\n\n<p>In this design, the column \"purchases\" is just a string of text that would contain the item_id of items purchased, separated by commas. Simplified example: \"book1, book23, book5, book8\".</p>\n\n<p>In a successful transaction, this query would insert the transaction data into the \"purchased\" table:</p>\n\n<pre><code>INSERT INTO purchased VALUES (null, username, purchases, ...)\n</code></pre>\n\n<hr>\n\n<p>From this point on, two things can happen:     </p>\n\n<ol>\n<li>The user can lookup what ebooks they've purchased</li>\n<li>The user can make another purchase transaction.</li>\n</ol>\n\n<p>If the user (theusername) wants to see their ebooks, the system performs a selection query e.g.</p>\n\n<pre><code>SELECT purchases FROM purchased WHERE username=theusername\n</code></pre>\n\n<p>which returns a string containing the item IDs.</p>\n\n<p>One a sidenot, is it possible to get an php array of purchases without having to use extra php code, i.e. explode? <b>Can you use something besides the data type \"text\" in SQL to store a list of items?</b> If not, that's okay.</p>\n\n<hr>\n\n<p>Either way, here's the main problem. Say the user makes another transaction--there will now be two rows in \"purchased\" that contains the user's purchased items. That means that in this table, the user's purchases are split into multiple rows.</p>\n\n<p>Ideally, I want these purchases to all be in the same row. I can't use an UPDATE statement because each purchase has it's own unique transaction_id.</p>\n\n<p>I was thinking that I could make another table that contains all purchases by a user</p>\n\n<pre><code>all_purchased:\nusername (pk) | purchases (text) | ...\n</code></pre>\n\n<p>and whenever the user makes another transaction, the \"all_purchased\" table would just update its purchases column with the item ID of any new ebooks.</p>\n\n<p>But this table seems redundant because the selection query I mentioned would get the task done.</p>\n\n<p><b>What would be the best way to structure the database relation(s)?</b></p>\n"},{"tags":["mysql","mysqldump","mysql-error-1064"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13218975,"title":"error mysql : Got a packet bigger than 'max_allowed_packet' bytes","body":"<p>for import mysql database give me this error :</p>\n\n<pre><code>$ `mysql -u user -p password zxc_db &lt; zxc.sql`\nERROR 1153 (08S01) at line 96: Got a packet bigger than 'max_allowed_packet' bytes\n</code></pre>\n\n<p>Please give me a best solution to solve it ?\ntanx .</p>\n"},{"tags":["mysql","persistence"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13219012,"title":"Why CreateEntityManager returns NULL","body":"<p>I am new to java technology so please excuse me if I present a silly problem...</p>\n\n<p>I want to make a JSF 2.0 servlet and use MySql for database engine.</p>\n\n<p>The problem is that it's seems that I can't connect to server.</p>\n\n<p>I use netbeans IDE, and for guide I use a tutorial from youtube: <a href=\"http://www.youtube.com/watch?v=UBNaiVWwAZw&amp;feature=related\" rel=\"nofollow\">http://www.youtube.com/watch?v=UBNaiVWwAZw&amp;feature=related</a></p>\n\n<p>The difference is that I use Tomcat.</p>\n\n<p>My persistence.xml file is in Web/META-INF/persistence.xml and the content is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;persistence version=\"2.0\" xmlns=\"http://java.sun.com/xml/ns/persistence\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"&gt;\n  &lt;persistence-unit name=\"AnunturiJsfPU\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n    &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;\n    &lt;class&gt;my.servlets.Users&lt;/class&gt;\n    &lt;class&gt;my.servlets.UsersSessions&lt;/class&gt;\n    &lt;exclude-unlisted-classes&gt;false&lt;/exclude-unlisted-classes&gt;\n    &lt;properties&gt;\n      &lt;property name=\"javax.persistence.jdbc.url\" value=\"jdbc:mysql://localhost:3306/tz_cadastru_galati\"/&gt;\n      &lt;property name=\"javax.persistence.jdbc.password\" value=\"\"/&gt;\n      &lt;property name=\"javax.persistence.jdbc.driver\" value=\"com.mysql.jdbc.Driver\"/&gt;\n      &lt;property name=\"javax.persistence.jdbc.user\" value=\"root\"/&gt;\n    &lt;/properties&gt;\n  &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n\n<p>my servlet file is:</p>\n\n<pre><code>package my.servlets;\n\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport javax.persistence.EntityManager;\nimport javax.persistence.EntityManagerFactory;\nimport javax.persistence.PersistenceUnit;\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n\n@WebServlet(name = \"testOkServlet2\", urlPatterns = {\"/testOkServlet2\"})\npublic class testOkServlet2 extends HttpServlet {\n\n\n    @PersistenceUnit\n    EntityManagerFactory emf;\n\n\n    protected void processRequest(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n        response.setContentType(\"text/html;charset=UTF-8\");\n        PrintWriter out = response.getWriter();\n        try {\n                EntityManager em = emf.createEntityManager();\n                Users u = (Users) em.createNamedQuery(\"Users.findAll\").getResultList().get(0);\n                String myUser = u.getUserNume();\n                out.println(\"User:\" + myUser);\n        } catch (Exception e)\n        {\n            out.println(e.getMessage());\n        }\n        finally {           \n            out.close();\n        }\n    }\n\n\n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n        processRequest(request, response);\n    }\n\n\n    @Override\n    protected void doPost(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n        processRequest(request, response);\n    }\n\n\n    @Override\n    public String getServletInfo() {\n        return \"Short description\";\n    }// &lt;/editor-fold&gt;\n\n}\n</code></pre>\n\n<p>and this is my Users object:</p>\n\n<pre><code>package my.servlets;\n\nimport java.io.Serializable;\nimport java.util.Date;\nimport javax.persistence.Basic;\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.NamedQueries;\nimport javax.persistence.NamedQuery;\nimport javax.persistence.Table;\nimport javax.persistence.Temporal;\nimport javax.persistence.TemporalType;\nimport javax.xml.bind.annotation.XmlRootElement;\n\n\n@Entity\n@Table(name = \"users\")\n@XmlRootElement\n@NamedQueries({\n    @NamedQuery(name = \"Users.findAll\", query = \"SELECT u FROM Users u\"),\n    @NamedQuery(name = \"Users.findByUserID\", query = \"SELECT u FROM Users u WHERE u.userID = :userID\"),\n    @NamedQuery(name = \"Users.findByUserNume\", query = \"SELECT u FROM Users u WHERE u.userNume = :userNume\"),\n    @NamedQuery(name = \"Users.findByNumePrenume\", query = \"SELECT u FROM Users u WHERE u.numePrenume = :numePrenume\"),\n    @NamedQuery(name = \"Users.findByEmail\", query = \"SELECT u FROM Users u WHERE u.email = :email\"),\n    @NamedQuery(name = \"Users.findByParola\", query = \"SELECT u FROM Users u WHERE u.parola = :parola\"),\n    @NamedQuery(name = \"Users.findByContActiv\", query = \"SELECT u FROM Users u WHERE u.contActiv = :contActiv\"),\n    @NamedQuery(name = \"Users.findByDataAdaugarii\", query = \"SELECT u FROM Users u WHERE u.dataAdaugarii = :dataAdaugarii\"),\n    @NamedQuery(name = \"Users.findByNivelAccesID\", query = \"SELECT u FROM Users u WHERE u.nivelAccesID = :nivelAccesID\")})\npublic class Users implements Serializable {\n    private static final long serialVersionUID = 1L;\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Basic(optional = false)\n    @Column(name = \"userID\")\n    private Integer userID;\n    @Basic(optional = false)\n    @Column(name = \"userNume\")\n    private String userNume;\n    @Basic(optional = false)\n    @Column(name = \"numePrenume\")\n    private String numePrenume;\n    @Basic(optional = false)\n    @Column(name = \"email\")\n    private String email;\n    @Basic(optional = false)\n    @Column(name = \"parola\")\n    private String parola;\n    @Basic(optional = false)\n    @Column(name = \"contActiv\")\n    private boolean contActiv;\n    @Basic(optional = false)\n    @Column(name = \"dataAdaugarii\")\n    @Temporal(TemporalType.TIMESTAMP)\n    private Date dataAdaugarii;\n    @Basic(optional = false)\n    @Column(name = \"nivelAccesID\")\n    private short nivelAccesID;\n\n    public Users() {\n    }\n\n    public Users(Integer userID) {\n        this.userID = userID;\n    }\n\n    public Users(Integer userID, String userNume, String numePrenume, String email, String parola, boolean contActiv, Date dataAdaugarii, short nivelAccesID) {\n        this.userID = userID;\n        this.userNume = userNume;\n        this.numePrenume = numePrenume;\n        this.email = email;\n        this.parola = parola;\n        this.contActiv = contActiv;\n        this.dataAdaugarii = dataAdaugarii;\n        this.nivelAccesID = nivelAccesID;\n    }\n\n    public Integer getUserID() {\n        return userID;\n    }\n\n    public void setUserID(Integer userID) {\n        this.userID = userID;\n    }\n\n    public String getUserNume() {\n        return userNume;\n    }\n\n    public void setUserNume(String userNume) {\n        this.userNume = userNume;\n    }\n\n    public String getNumePrenume() {\n        return numePrenume;\n    }\n\n    public void setNumePrenume(String numePrenume) {\n        this.numePrenume = numePrenume;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getParola() {\n        return parola;\n    }\n\n    public void setParola(String parola) {\n        this.parola = parola;\n    }\n\n    public boolean getContActiv() {\n        return contActiv;\n    }\n\n    public void setContActiv(boolean contActiv) {\n        this.contActiv = contActiv;\n    }\n\n    public Date getDataAdaugarii() {\n        return dataAdaugarii;\n    }\n\n    public void setDataAdaugarii(Date dataAdaugarii) {\n        this.dataAdaugarii = dataAdaugarii;\n    }\n\n    public short getNivelAccesID() {\n        return nivelAccesID;\n    }\n\n    public void setNivelAccesID(short nivelAccesID) {\n        this.nivelAccesID = nivelAccesID;\n    }\n\n    @Override\n    public int hashCode() {\n        int hash = 0;\n        hash += (userID != null ? userID.hashCode() : 0);\n        return hash;\n    }\n\n    @Override\n    public boolean equals(Object object) {\n        // TODO: Warning - this method won't work in the case the id fields are not set\n        if (!(object instanceof Users)) {\n            return false;\n        }\n        Users other = (Users) object;\n        if ((this.userID == null &amp;&amp; other.userID != null) || (this.userID != null &amp;&amp; !this.userID.equals(other.userID))) {\n            return false;\n        }\n        return true;\n    }\n\n    @Override\n    public String toString() {\n        return \"my.servlets.Users[ userID=\" + userID + \" ]\";\n    }\n\n}\n</code></pre>\n\n<p>If I missed to post any other information please tell me and I will put it online.</p>\n\n<p>Please help me.\nManny thanks in advance.</p>\n"},{"tags":["php","mysql"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":741,"score":3,"question_id":3300482,"title":"Need to intergate IDX MLS into a website","body":"<p>Are there any free IDX or MLS integration scripts available?</p>\n\n<p>I want to do a website in which I can integrate the MLS data into the site database but I have no idea how to go about it without seeing some type of working script. Any help or direction would be greatly appreciated.</p>\n"},{"tags":["mysql","join"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13218509,"title":"Mysql not returning all results","body":"<p>I'm trying to fetch some data using only one query. I need to fetch one shop, which can have several modules (or possibly none), for each module I need one record in modules to exist.</p>\n\n<p>My problem is getting all shop_modules enabled except just the first one? Is this possible without splitting it in two queries?</p>\n\n<p>Thanks in advance</p>\n\n<pre><code>$sql = \"\n    SELECT \n      s.*, sm.config, m.internal_name \n    FROM shops s \n    LEFT JOIN shop_modules sm ON sm.shop_id = s.id \n    INNER JOIN modules m ON m.id = sm.module_id WHERE s.domain = ?\";\n\n$shop = $app['db']-&gt;fetchAssoc($sql, array($subdomain));\n</code></pre>\n"},{"tags":["mysql","query"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13218355,"title":"MySQL query: retrieve some rows based on keys in another table","body":"<p>I'm new at MySQL, so I will use an example to expose my problem...</p>\n\n<p>I have two tables:</p>\n\n<p><strong>Table1:</strong></p>\n\n<pre><code>+----+-----+-----+-----+-----+\n| id | a1  | b1  | c1  | d1  |\n+----+-----+-----+-----+-----+\n|  1 | ... | ... | ... | ... |\n|  2 | ... | ... | ... | ... |\n|  3 | ... | ... | ... | ... |\n|  4 | ... | ... | ... | ... |\n|  5 | ... | ... | ... | ... |\n|  6 | ... | ... | ... | ... |\n+----+-----+-----+-----+-----+\n</code></pre>\n\n<p><strong>Table2:</strong></p>\n\n<pre><code>+----+-----+-----+-----+---------------+\n| id | a2  | b2  | c2  | table1_row_id |\n+----+-----+-----+-----+---------------+\n|  1 | ... | ... | ... | ...           |\n|  2 | ... | ... | ... | 4             |\n|  3 | ... | ... | ... | ...           |\n+----+-----+-----+-----+---------------+\n</code></pre>\n\n<p>Table2 column <code>table1_row_id</code> is the key for table1.</p>\n\n<p>Which kind of query should I use to retrieve table1 data that is not referenced in <code>table2.table1_row_id</code> column?</p>\n\n<p>For instance, for the above tables, the query should return a table like:</p>\n\n<pre><code>+----+-----+-----+-----+-----+\n| id | a1  | b1  | c1  | d1  |\n+----+-----+-----+-----+-----+\n|  1 | ... | ... | ... | ... |\n|  2 | ... | ... | ... | ... |\n|  3 | ... | ... | ... | ... |\n|  5 | ... | ... | ... | ... |\n|  6 | ... | ... | ... | ... |\n+----+-----+-----+-----+-----+\n</code></pre>\n\n<p>Probably this is simple, but I don't know how should I do yet...</p>\n"},{"tags":["php","mysql","forms","variables","insert"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":43,"score":0,"question_id":13218293,"title":"Insert into different table using 1 form using the INSERT INTO $variable","body":"<p>Tough question to ask, but basically I have a web form with a \"title\", \"message\" and \"image\" boxes, they all work in uploading it to one table on mysql.</p>\n\n<p>What I want to do is have another field in my form for WHERE i want it to post to, I have 2 pages and 2 tables at the moment. table Blog and table Blog_2\nThey both work if I change my insert.php to INSERT INTO Blog or Blog_2</p>\n\n<p>But i want to be able to use the field and a <code>$_POST[Blog]</code>\nfunction which is linked to a field in a form, it's going to have a dropdown box to select either Blog or Blog_2</p>\n\n<p>Below is my code. I've given it a go, but I cant seem to make it work.\nI created a variable called $insert as you can see.</p>\n\n<p>Maybe its just a syntax problem, but im not that PHP savvy.</p>\n\n<pre><code>&lt;?php\n$con = mysql_connect(\"xxx\",\"xxx\",\"xxx\");\nmysql_select_db(\"databse\") or die(mysql_error());\n\n$insert = '$_POST[Blog]';\n\nmysql_query(\"INSERT INTO $insert\n(Date, Title, Message, Image) \nVALUES(now(), '$_POST[Title]' , '$_POST[Message]' , '$_POST[Image]' ) \")\nor die(mysql_error()); \n\necho \"1 record added\";\n\n\nmysql_close($con);\n?&gt;\n</code></pre>\n"},{"tags":["mysql","triggers"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13217875,"title":"Trigger to insert tupples to a table for each row in another table after insert on a third table","body":"<p>I have three table council_member, mess and rates.</p>\n\n<pre><code>council_member(student_id, field2,...)\nmess(mess_id,field2,...)\nrates(student_id,mess_id,rating)\n</code></pre>\n\n<p>student_id and mess_id are foreign keys.</p>\n\n<p>Rates stores the rating for each mess by each council member. I want to create a trigger that on insertion of a new council member, inserts tupples to the table rates for the inserted student_id and each mess_id in mess with a rating of 10.</p>\n\n<p>How do I run the insert statement in trigger for each mess_id?</p>\n"},{"tags":["mysql","join","left-join","jointable"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13218281,"title":"Left join returning duplicate rows","body":"<p><strong>Issue is being resolved with the help of comments</strong></p>\n\n<p>Following is mysql query in which i have been trying to join table <code>notes</code> with two other tables <code>user_facility</code> and <code>users</code> but when i run the query then it returns duplicate rows. I used the same way of joining with one of my similar queries and in that by using <code>Distinct</code> my issue got resolved but using that trick with the following is not doing the trick. Kindly let me know how can i resolve the issue so distinct rows being returned.</p>\n\n<p>Thanks,</p>\n\n<pre><code>SELECT DISTINCT a,b,c\n            FROM notes\n            LEFT JOIN user_facility ON notes.fk_resident_id = user_facility.fk_user_id\n            LEFT JOIN users ON notes.fk_resident_id = users.id where user_facility.fk_facility_id = 101\n</code></pre>\n"},{"tags":["python","mysql","flask"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13210265,"title":"Making a sql dump downloadable","body":"<p>I'm making a voting application in python/flask and I need to make a button that allows the user to download a mysql dump. </p>\n\n<p>The mysql code that performs the dump is this - \n<code>select * into outfile \"votes.csv\" fields terminated by ',' from vote;</code></p>\n\n<p>I have 2 questions </p>\n\n<ul>\n<li>What should be the path where this dump is saved so that the it can be downloaded?</li>\n<li>I'm using sqlalchemy. How can I execute this code from the flask application and provide a link to the file generated?</li>\n</ul>\n\n<p>Thanks a lot!</p>\n\n<p>For streaming?</p>\n\n<pre><code> @app.route('/foo')\n def foo():\n     def generate():\n         yield 'first part'\n         yield 'second part'\n     return Response(generate(), direct_passthrough=True)\n</code></pre>\n"},{"tags":["mysql","string","position","inner-join"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13218232,"title":"Find string position and join another table's row","body":"<p>I have two main questions on getting 2 set of tables.</p>\n\n<pre><code>table : room_type\nrt_id   rt_title\n1       Type A\n2       Type B\n3       Type C\n4       Type D\n5       Type E\n</code></pre>\n\n<p>Here is another table to come with.</p>\n\n<p>table: rate_cost</p>\n\n<pre><code>id     rate hotel cost                      date\n2999    7   1   4700-5400-6100-6600-7300    2012-11-01\n3000    7   1   4700-5400-6100-6600-7300    2012-11-02\n3001    7   1   4700-5400-6100-6600-7300    2012-11-03\n3002    7   1   4700-5400-6100-6600-7300    2012-11-04\n3003    7   1   4700-5400-6100-6600-7300    2012-11-05\n3004    7   1   4700-5400-6100-6600-7300    2012-11-06\n3005    7   1   4700-5400-6100-6600-7300    2012-11-07\n3006    7   1   4700-5400-6100-6600-7300    2012-11-08\n3007    7   1   4700-5400-6100-6600-7300    2012-11-09\n3008    7   1   4700-5400-6100-6600-7300    2012-11-10\n3009    7   1   4700-5400-6100-6600-7300    2012-11-11\n3010    7   1   4700-5400-6100-6600-7300    2012-11-12\n3011    7   1   4700-5400-6100-6600-7300    2012-11-13\n3012    7   1   4700-5400-6100-6600-7300    2012-11-14\n3013    7   1   4700-5400-6100-6600-7300    2012-11-15\n3014    7   1   4700-5400-6100-6600-7300    2012-11-16\n3015    7   1   4700-5400-6100-6600-7300    2012-11-17\n3016    7   1   4700-5400-6100-6600-7300    2012-11-18\n3017    7   1   4700-5400-6100-6600-7300    2012-11-19\n3018    7   1   4700-5400-6100-6600-7300    2012-11-20\n3019    7   1   4700-5400-6100-6600-7300    2012-11-21\n3020    7   1   4700-5400-6100-6600-7300    2012-11-22\n3021    7   1   4700-5400-6100-6600-7300    2012-11-23\n3022    7   1   4700-5400-6100-6600-7300    2012-11-24\n3023    7   1   4700-5400-6100-6600-7300    2012-11-25\n3024    7   1   4700-5400-6100-6600-7300    2012-11-26\n3025    7   1   4700-5400-6100-6600-7300    2012-11-27\n3026    7   1   4700-5400-6100-6600-7300    2012-11-28\n3027    7   1   4700-5400-6100-6600-7300    2012-11-29\n3028    7   1   4700-5400-6100-6600-7300    2012-11-30\n3028    8   2   4700-5400-6100-6600-7300    2012-11-01\n3028    9   3   4700-5400-6100-6600-7300    2012-11-01\n</code></pre>\n\n<p>Each dash separated number is a rate cost regarding to each room type by its position. For example 4700 is a rate cost for Type A (rt_id=1), 5400 is Type B... 7300 is Type E(rt_id=5).</p>\n\n<p>Now I'd like to create a result like following.</p>\n\n<pre><code>Day/Room type   Type A | Type B | Type C | Type D | Type E\n1 Nov 2012      4700     5400     6100     6600     7300\n2 Nov 2012      4700     5400     6100     6600     7300\n3 Nov 2012      4700     5400     6100     6600     7300\n4 Nov 2012      4700     5400     6100     6600     7300\n...\n30 Nov 2012     4700     5400     6100     6600     7300\n</code></pre>\n\n<p>I was made those result work in PHP but it cost seconds to complete. I've tried to do on my own but I lack of mySQL knowledge. So please enlighten me.</p>\n"},{"tags":["mysql","zend-framework","search","zend-db"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13214115,"title":"ZEND search with MySQL Match and Union","body":"<p>I have to confess that I cannot work out how to complete this. I can get the query working in MySql, and I can get simple table-or-view queries in Zend Framework, but this is beyond me!</p>\n\n<p>Here's the query I'm trying to run:</p>\n\n<pre><code>SELECT * from (\nSELECT \n'Tab' as 'table_name', TabId as id, `TabTitle` as title,\n(MATCH(`TabTitle`,`TabSubTitle`) AGAINST (@target)) as relevance\nfrom Tab\nUNION\nSELECT \n'Tab2' as 'table_name', \nTab2Id as id, `Tab2Title` as title,\n(MATCH(`Tab2Title`,`Tab2Desc`) AGAINST (@target)) as relevance\nfrom Tab2\n)\nas sitewide WHERE relevance &gt; 0 order by relevance DESC;\n</code></pre>\n\n<p>I'd like any pointers you can offer as to how to shoehorn this into the MVC framework of Zend!</p>\n\n<p>Edited to add:</p>\n\n<p>This is the current Model Code I'm using, which gives an error \"Argument 1 passed to Zend_Paginator_Adapter_DbTableSelect::__construct() must be an instance of Zend_Db_Select, string given,\"</p>\n\n<p>\n\n<pre><code>class Application_Model_Search extends Zend_Db_Table\n{\nprotected $_name = ‘Search’;\nprotected $_primary = 'SearchId';\n\nfunction getSearchResults($page, $searchTerm) \n{\n\n    $query = \"\nSELECT * from (\n SELECT \n 'Tab' as 'table_name', TabId as id, `TabTitle` as title,\n (MATCH(`TabTitle`,`TabSubTitle`) AGAINST (@target)) as relevance\n from Tab\n UNION\n SELECT \n 'Tab2' as 'table_name', \n Tab2Id as id, `Tab2Title` as title,\n (MATCH(`Tab2Title`,`Tab2Desc`) AGAINST (@target)) as relevance\n from Tab2\n)\nas sitewide WHERE relevance &gt; 0 order by relevance DESC;        \n    \";\n\n    echo ($query);      \n\n    $paginator = new Zend_Paginator(new Zend_Paginator_Adapter_DbTableSelect($query));\n    $paginator-&gt;setItemCountPerPage(15); //\n    $paginator-&gt;setCurrentPageNumber($page); \n    return $paginator; \n\n\n}\n\n\n}\n</code></pre>\n"},{"tags":["mysql","codeigniter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":29,"score":-4,"question_id":13218210,"title":"Get facebook or other social sites information","body":"<p>For my project requernment I need the facebook users information by using facebook api on CODEIGNITER some one please help me for that.</p>\n"},{"tags":["php","mysql","select","mysqli"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13218078,"title":"Basic mysqli select","body":"<p>I have a select statement where I want to get all rows from a table but seem to be having a mental blockage - this should be elementary stuff but can't seem to get it working.</p>\n\n<p>There are only two rows in the table 'postage_price' - and two columns : price | ref</p>\n\n<p>Select statement is as follows:</p>\n\n<pre><code>$get_postage=\"SELECT price FROM postage_price ORDER BY ref DESC\";\n$get_postage_result=mysqli_query($dbc, $get_postage) or die(\"Could not get postage\");\nwhile($post_row=mysqli_fetch_array($dbc, $get_postage_result))\n{\n$post1[]=$post_row;\n}\n</code></pre>\n\n<p>I am then trying to echo the results out:</p>\n\n<pre><code>echo $post1['0'];\necho $post1['1'];\n</code></pre>\n\n<p>this is not showing anything. My headache doesn't help either.</p>\n"},{"tags":["mysql","sql","web-applications","graph-algorithm","pagerank"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13218102,"title":"WebGraph storage in Relational Databases","body":"<p>How one can efficiently store the WebGraph in Relational databases such MySQL for playing with algorithms like PageRank? I think of creating two tables: one for URLs where only distinct URLs will be stored and another outgoing links table, for each url store its outgoing URL. Any ideas or any suggestions for efficient storage?</p>\n"},{"tags":["php","mysql","database","ms-access"],"answer_count":7,"favorite_count":7,"up_vote_count":8,"down_vote_count":0,"view_count":13375,"score":8,"question_id":470362,"title":"Tools to convert Microsoft Access to an online PHP/mySQL system","body":"<p>We have a Microsoft Access database that has been used for many years. Our staff is very used to using the Access tables and forms to query, view, update and add to the data.</p>\n\n<p>But the database is at the end of its lifetime. We want to convert it to a PHP/mySQL solution.</p>\n\n<p>I have found tools that can convert the Access database to mySQL.</p>\n\n<p>But are there any tools that can analyze the way the tables and forms look and work in Access, and generate an equivalent easy to use PHP web-based interface with the same functionality: to query, view, update and add to the data? </p>\n\n<p><hr /></p>\n\n<p>Okay. I did a bit of searching on the web and I found one tool that seems to do exactly what I'm looking for:  <a href=\"http://www.xlinesoft.com/phprunner/\">PHPrunner</a></p>\n\n<p>Does anyone have experience with this tool? Are there any other similar tools worth considering, maybe something less expensive or even free?</p>\n"},{"tags":["mysql","ruby-on-rails"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13218075,"title":"Insert Data into Database in Ruby on Rails","body":"<p>I got 2 Models, Main Model and Details Model.\nIn my Home Controller i want to insert 1.000.000 entries into the database, just for testing issues.</p>\n\n<p>But this is very slow, the inserts are happening very slow.. is it possible to speed this up? </p>\n\n<p>Maybe i did something wrong with the configuration?\nBecause i want, every time a Main entry is saved, a corresponding detail entry should be created.</p>\n\n<p>Main Model looks like:</p>\n\n<pre><code>class Main &lt; ActiveRecord::Base\n  has_one :detail, :dependent =&gt; :destroy\n  before_create :build_a_detail\n\nprivate\n  def build_a_detail\n       self.build_detail(:Bezeichnung =&gt; 'test', :Koordinaten =&gt; 10, :main_id =&gt; self.id)\n  end\nend\n</code></pre>\n\n<p>Detail Model looks like:</p>\n\n<pre><code>class Detail &lt; ActiveRecord::Base\n  belongs_to :main\nend\n</code></pre>\n\n<p>Home Controller:</p>\n\n<pre><code>def new\n    for i in 0..1000000\n      main = Main.new(:Category =&gt; 'Krankenhaus', :Latitude =&gt; 5, :Longitude =&gt; 6)\n      main.save\n    end\n  end\n</code></pre>\n"},{"tags":["php","mysql","sql","query"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":47,"score":3,"question_id":13217679,"title":"SHOW TABLES only shows tables starting with a space mysql","body":"<p>I have some code that needs to get a list of all of the tables in a database with a certain column equaling a certain thing. However, using the <code>SHOW TABLES</code> MySQL code is only listing tables that start with a space. Here is my code...</p>\n\n<pre><code>$result = mysql_query(\"SHOW FULL TABLES IN `db`\") or die(\"Error: \" . mysql_error());\nwhile ($word = mysql_fetch_array($result)) {\n    $word = $word[0];\n    $sql = \"SELECT * FROM `db`.`$word` WHERE col='$val'\";\n    $result = mysql_query($sql, $con) or die(\"Error: \" . mysql_error());\n    while ($col = mysql_fetch_array($result)) echo \"&lt;li&gt;&lt;a nav='$word' title='View $word'&gt;$word&lt;/a&gt;&lt;/li&gt;\";\n}\n</code></pre>\n\n<p>For some reason, the first <code>mysql_query()</code> is only returning one result, which happens to be a table beginning with a space. (It is the only table starting with a space in the whole thing)\nEdit: I just realized that I left out the line of code that turned $word from an array into a string... it's in there now.</p>\n"},{"tags":["php","mysql","xhtml"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":50,"score":-1,"question_id":13210132,"title":"Using variables in mysql update query","body":"<p>This is what i'm trying to do, I have a form in one page:</p>\n\n<pre><code>&lt;form action=\"update.php\" method=\"post\" value=\"\"&gt;\n&lt;textarea name=\"update\"&gt;\n&lt;?php $page_name = \"home\"; $tablename = \"pages\"; $columnname = \"content\"; $redirect=\"formulier_home.php\"; ?&gt;\n&lt;?php $result = mysql_query(\"SELECT $columnname FROM $tablename WHERE page_name = '$page_name'\"); ?&gt;\n&lt;?php include(\"../includes/content_in_textarea.php\"); ?&gt;\n&lt;/textarea&gt;\n&lt;input type=\"submit\" value=\"Publiceer\" &gt;        \n&lt;/form&gt;\n</code></pre>\n\n<p>and I update in another page:</p>\n\n<pre><code>&lt;?php require_once(\"../includes/connection.php\"); ?&gt;\n&lt;?php $opvangen = $_POST['update'];?&gt;\n&lt;?php $content = nl2br($opvangen); ?&gt;\n&lt;?php mysql_query(\"UPDATE $tablename SET $columnname='$content' WHERE page_name='$page_name'\") or die (mysql_error());\nheader(\"Location:$redirect\"); ?&gt;\n</code></pre>\n\n<p>It works fine if I don't use variables in the query like this:</p>\n\n<pre><code>&lt;?php mysql_query(\"UPDATE $tablename SET $columnname='$content' WHERE page_name='$page_name'\")or die (mysql_error());\nheader(\"Location:$redirect\"); ?&gt;\n</code></pre>\n\n<p>But I'm a little confused on how I will transfer the variables to the update page, I want to \nuse the update page for all my columns and pages that I want to adjust.</p>\n"},{"tags":["mysql","emacs","autocomplete","syntax-highlighting"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13217818,"title":"Emacs MySQL syntax highlighting / completion","body":"<p>I'm looking for an Emacs extension (library) that does</p>\n\n<ul>\n<li>MySQL Syntax highlighting</li>\n<li>MySQL Syntax auto-completion</li>\n</ul>\n\n<p>Already installed <code>mysql.el</code> for the syntax highlighting.</p>\n\n<p>Regarding completion, I tried <code>sql-completion.el</code> but couldn't get it to work. The lib was written in 2006, maybe there is something to tweak?<br>\nAdded, as required, in my <code>.emacs</code></p>\n\n<pre><code>  (require 'sql-completion)\n  (setq sql-interactive-mode-hook\n    (lambda ()\n      (define-key sql-interactive-mode-map \"\\t\" 'comint-dynamic-complete)\n      (sql-mysql-completion-init)))\n</code></pre>\n\n<p>but nothing happens (<kbd>TAB</kbd> does nothing). I guess the <code>sql-interactive-mode-hook</code> hook is linked with the SQL buffer type (<code>.sql</code> that sets <code>SQL[MySQL]</code> mode thanks to <code>mysql.el</code>), and should trigger the anon function?</p>\n\n<p>Is there something else to do to trigger the TAB completion? E.g. a <code>(global-set-key)</code>?</p>\n\n<p>Thanks</p>\n\n<p>Running <code>Emacs 23.3.1</code>.</p>\n"},{"tags":["mysql","mysqldump"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":695,"score":1,"question_id":4580417,"title":"Can I Import an updated structure into a MySQL table without losing its current content?","body":"<p>We use MySQL tables to which we add new fields from time to time as our product evolves.\nI'm looking for a way to export the structure of the table from one copy of the db, to another, without erasing the contents of the table I'm importing to.</p>\n\n<p>For example say I have copies A and B of a table, and I add fields X,Y,Z to table A. Is there a way to copy the changed structure (fields X,Y,Z) to table B while keeping its content intact?</p>\n\n<p>I tried to use mysqldump, but it seems I can only copy the whole table with its content, overriding the old one, or I can use the \"-d\" flag to avoid copying data (dumping structure only), but this will create an empty table when imported, again overriding old data.</p>\n\n<p>Is there any way to do what I need with mysqldump, or some other tool?</p>\n"},{"tags":["c++","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2510,"score":2,"question_id":5275524,"title":"Unhandled exception at 0x00b21840 in tester.exe: 0xC0000005: Access violation reading location 0x00000000","body":"<pre><code>BOOL bLoadActions()\n{\n    int iIndex = 0;\n    int iRows;\n    int iFields;\n    MYSQL_ROW myRow;\n    MYSQL_FIELD* field [200];\n\n    for (int a = 0; a &lt; 200; a++)\n        field[a] = NULL;\n\nmysql_query(con, \"SELECT * FROM `cq_action`;\");\nres= mysql_store_result(con);\nif ((iRows = (int)mysql_num_rows(res)) &gt; 0)\n{\n    iFields = (WORD)mysql_num_fields(res);\n    for(int b = 0; b &lt; iRows; b++)\n    {\n        myRow = mysql_fetch_row(res);//&lt;=== error here\n        mysql_field_seek(res, 0);\n        for(int f = 0; f &lt; iFields; f++)\n        {\n            field[f] = mysql_fetch_field(res);\n            if(field[f]) {\n            if(!strcmp(field[f]-&gt;name, \"id\"))\n            {\n                iIndex++;\n                m_pActionList[iIndex] = new class CAction;\n                m_pActionList[iIndex]-&gt;id = atoi(myRow[f]);\n                m_pActionList[iIndex]-&gt;index = iIndex;\n            }\n            else if(!strcmp(field[f]-&gt;name, \"param\"))\n            {\n                m_pActionList[iIndex]-&gt;param = new char[strlen(myRow[f])+1];\n                m_pActionList[iIndex]-&gt;param[strlen(myRow[f])] = 0;\n                memcpy(m_pActionList[iIndex]-&gt;param, myRow[f], strlen(myRow[f]));\n            }\n            else if(!strcmp(field[f]-&gt;name, \"type\"))\n                m_pActionList[iIndex]-&gt;type = atoi(myRow[f]);\n            else if(!strcmp(field[f]-&gt;name, \"id_next\"))\n                m_pActionList[iIndex]-&gt;idnext = atoi(myRow[f]);\n            else if(!strcmp(field[f]-&gt;name, \"id_nextfail\"))\n                m_pActionList[iIndex]-&gt;idfail = atoi(myRow[f]);\n            else if(!strcmp(field[f]-&gt;name, \"data\"))\n                m_pActionList[iIndex]-&gt;data = atoi(myRow[f]);\n            }\n            else{\n                if(field[f]=NULL)\n                    cout&lt;&lt;\"error\"&lt;&lt;endl;\n            }\n        }\n    }\n}\n\nreturn 0;\n</code></pre>\n\n<p>}\nidk every thing seems good.... but i get this error</p>\n\n<pre><code>Unhandled exception at 0x00b21840 in tester.exe: 0xC0000005: Access violation reading location 0x00000000.\n</code></pre>\n\n<p>after the edit the errors happens here <code>myRow = mysql_fetch_row(res);//&lt;=== error here</code></p>\n"},{"tags":["php","mysql","serialization"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13217299,"title":"serialize and then unserialize mysql result object","body":"<pre><code>class a {\n  public function getContinents () {\n    // connect to db\n    $res = $this-&gt;db-&gt;query(\"SELECT continent FROM mytable\");\n    return $res;\n  }\n}\n\n$obj = new a();\n$getContinents = $obj-&gt;getContinents();\n</code></pre>\n\n<p>So if we check variable getContinents here, it is a valid mysqli-result object</p>\n\n<pre><code>var_dump($getContinents);\n</code></pre>\n\n<p>Result is</p>\n\n<pre><code>object(mysqli_result)#4 (5) { [\"current_field\"]=&gt; int(0) [\"field_count\"]=&gt; int(1) [\"lengths\"]=&gt; NULL [\"num_rows\"]=&gt; int(6) [\"type\"]=&gt; int(0) }\n</code></pre>\n\n<p>Now I want to serialize and unserialize this object</p>\n\n<pre><code>$getContinents_to_str = serialize($getContinents);\nvar_dump(unserialize($getContinents_to_str));\n</code></pre>\n\n<p>Now result is </p>\n\n<pre><code>Warning: var_dump(): Property access is not allowed yet in ...\n\nobject(mysqli_result)#5 (5) { [\"current_field\"]=&gt; NULL [\"field_count\"]=&gt; NULL [\"lengths\"]=&gt; NULL [\"num_rows\"]=&gt; NULL [\"type\"]=&gt; NULL }\n</code></pre>\n\n<p>Please tell me why this happened? Where is it wrong?</p>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":37,"score":4,"question_id":13217317,"title":"How to transfer the project to the server","body":"<p>I am new to programming field. The company which I work with has assigned me a task to develop a sample project which contains login of members and a forum. I have developed it using mysql, php and apache server. So my question is \"how to transfer it onto the LMS server. Should I transfer the project from the server system itself or can I do it through my pc via internet?\" My question may look very simple to ask but I am still in the learning stage. Please help me. Thank you..</p>\n"},{"tags":["mysql","export-to-csv","into-outfile"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13216667,"title":"How to SELECT INTO OUTFILE with header labels enclosed by quotes but not body fields?","body":"<p>I do not believe this question is a duplicate.</p>\n\n<p>I want rows in the body to be \"OPTIONALLY ENCLOSED BY\" double quotes. Numerical values should not be enclosed. That's easy to do without a header. But when you include a header using UNION, MySQL now treats every column as a string type and encloses all the values in quotes.</p>\n\n<p>You can add a header to SELECT INTO OUTFILE like this:</p>\n\n<pre><code>SELECT \"id\", \"numerical_values\", \"string_values\" #header section of csv\nUNION ALL\nSELECT `id`, `numerical_values`, `string_values` #body section of csv\nINTO OUTFILE \"/tmp/values.csv\"\nFIELDS TERMINATED BY \",\" OPTIONALLY ENCLOSED BY '\"'\nLINES TERMINATED BY \"\\n\"\nFROM `values_table`\n</code></pre>\n\n<p>Again, if I omit the header, only <code>string_values</code> will be enclosed by quotes.\nWith the header, all columns are seen as string columns and will be enclosed.</p>\n\n<p>I tried this:</p>\n\n<pre><code>SELECT '\"', \"id\", ',\"', \"numerical_values\", ',\"', \"string_values\", '\"' \n#added quotes/commas to header\nUNION ALL\nSELECT `id`, ',', `numerical_values`, ',\"', `string_values`, '\"'\n#added commas, and add quotes around string_values\nINTO OUTFILE \"/tmp/values.csv\"\nFIELDS TERMINATED BY \"\" ENCLOSED BY '' #empty values for fields terminated and enclosed\n# empty because manually selected in query\nLINES TERMINATED BY \"\\n\" \nFROM `values_table`\n</code></pre>\n\n<p>I thought that would work, but I ended up with what looks like a bunch of extra whitespace. This is from an file I just created with the 2nd method. The header row ends at \"string7\". The 1st line of data ends after \"207\". I just put part of the 3rd line.</p>\n\n<pre><code>\"         num1\",\"                                          string1\",\"       num2\",\"                                          string2\",\"       num3\",\"                                                                        string3\",\"       num4\",\"                                                                        string4\",\"       num5\",\"                                                                        string5\",\"       num6\",\"                                                                        string6\",\"      string7\"\"\n33.95     ,\" 1023                                         \",  7.50      ,\"  207-1023                                     \",  26.95     ,\"2 1023                                                                     \",23.00     ,\"3Wx4Hx4D                                                                   \",19.00     ,\"1023                                                                       \",  0.00      ,\"UPC: 123456789012                                                          \",\" 207      \"       \n40.95     ,\" 1058                                         \",  9.00      ,\n</code></pre>\n"},{"tags":["mysql","sql-server","oracle","postgresql","liquibase"],"answer_count":1,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":141,"score":7,"question_id":11955313,"title":"How to create ordered index with liquibase?","body":"<p>I am wondering if there is a generic way to create an \"ordered index\" with liquibase.</p>\n\n<p>Something that will produce these kind of SQL statement: </p>\n\n<pre><code>CREATE INDEX idx_name ON my_table (m_column DESC)\n</code></pre>\n\n<p>I need that for oracle, postgresql, mysql, and sql server.</p>\n\n<p>If not, I'll have to do it manually with the <code>SQL</code> tag for each RDBM.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["php","mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13217170,"title":"mysql_pconnect safe for production?","body":"<p>I never used the persistent mysql_pconnect function only mysql_connect() but now I want to put the DB on its own server but was wondering if its safe for production or any issues/backups I should be aware of?</p>\n\n<p>To clarify is there some failsafe/auto reconnect when the mysterious MySQL server gone away or other connection errors come up? or do I have to implement this myself?</p>\n\n<p>Is last_insert_id() reliable for the correct connection? I read that it is (after some bug fixes) and there is no race condition but can someone who uses it for production verify? </p>\n\n<p>Any other connection issues I should be aware of before I switch over in a production environment? </p>\n\n<p>Do I need to implement some backup mysql_connect code? I do not want to  'discover' some server crashing bugs so any/all tips and info from experienced users is much appreciated </p>\n"},{"tags":["c#","mysql","vb.net"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13217066,"title":"Can MySQL use in offline system (vb.net) with online forum (c#)?","body":"<p>Currently, I am working on a system in vb.net\nThis system will have a forum which will be done in c#.\nWhat database should I use for both area?\nCan I use MySQL to do this project?\nWill it be hard to link?</p>\n"},{"tags":["php","mysql","pdo"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":584,"score":1,"question_id":8094623,"title":"PDO Multi-query \"SQLSTATE[HY000]: General error\"","body":"<p>I'm still learning PDO so I might of missed something but basically I'm trying to insert a row into a table and then select the generated id.</p>\n\n<p>I'm not sure if it likes both queries in one pdo statement. Here is the code I'm using to execute the SQL.</p>\n\n<pre><code>public function ExecuteQuery($sql, $params = array())\n    {\n\n        if($this-&gt;_handle == null)\n            $this-&gt;Connect();\n\n        $query = $this-&gt;_handle-&gt;prepare($sql);\n\n        foreach($params as $key =&gt; $value)\n        {\n            if(is_int($value)){\n                $query-&gt;bindValue(':'.$key, $value, \\PDO::PARAM_INT);\n            }else if(is_bool($value)){\n                $query-&gt;bindValue(':'.$key, $value, \\PDO::PARAM_BOOL);\n            }else if(is_null($value)){\n                $query-&gt;bindValue(':'.$key, $value, \\PDO::PARAM_NULL);\n            }else{\n                $query-&gt;bindValue(':'.$key, $value, \\PDO::PARAM_STR);\n            }\n        }\n\n        $query-&gt;execute();\n\n        $x = $query-&gt;fetchAll(\\PDO::FETCH_ASSOC);\n\n        var_dump($x);\n\n        return $x;\n    }\n</code></pre>\n\n<p>This function is part of a database class, $this->_handle is the PDO object.</p>\n\n<pre><code>public function Connect()\n    {\n        try {\n          $this-&gt;_handle = new \\PDO('mysql:host='.$this-&gt;_host.';dbname='.$this-&gt;_database, $this-&gt;_username, $this-&gt;_password);\n          $this-&gt;_handle-&gt;setAttribute( \\PDO::ATTR_ERRMODE, \\PDO::ERRMODE_EXCEPTION ); \n        }\n        catch(PDOException $e) {\n            echo $e-&gt;getMessage();\n        }\n    }\n</code></pre>\n\n<p>And the SQL I'm running is this:</p>\n\n<pre><code>INSERT INTO `users` (`Username`, `Password`, `PasswordSalt`, `Email`, `IsAdmin`, `LoginAttempts`, `LastLogin`, `LastLoginAttempt`, `Created`) VALUES (:username, :password, :passwordsalt, :email, :isadmin, :loginattempts, :lastlogin, :lastloginattempt, :created); SELECT LAST_INSERT_ID() as 'id'\n</code></pre>\n\n<p>The user is created and is there in the users table but it errors after that.</p>\n\n<p>Can anyone see what am doing wrong?  :)</p>\n\n<p>Cheers!</p>\n"},{"tags":["java","mysql","jdbc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13216868,"title":"How to add to a 'time' type in MySQL with JDBC?","body":"<p>I know how to 'SET' it, but how can I add to it? Such as...</p>\n\n<pre><code>    // Add 1 minute to the current 'time' object\n    try {\n        Connection con = DriverManager.getConnection(url, user, password);\n        String sql = \"UPDATE Table \"\n                   + \"SET 'Time Field' = 'Time Field' + ? \"\n                   + \"WHERE 'User Column' = 'Random Name'\";\n        PreparedStatement statement = con.prepareStatement(sql);\n        statement.setTime(0, new Time(60000));\n    } catch (SQLException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>I'm sure I have to use the \"ADDITEM(expr1,expr2)\" function, but how exactly would I do so? I feel like it's not as easy as just typing it into my String.</p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13216866,"title":"I am trying to have my \"Details\" page to reference two seperate parts of my server that are linked via techID","body":"<p>Okay, so I have my page \"List Customers\" which then links to \"List Jobs\" adding on <code>?custID=</code> into the URL, then on List jobs I have used <code>$_GET[\"custID\"]</code> so my query uses the <code>custID</code> from the URL. that works fine, lists out my jobs for said customer using their ID.</p>\n\n<p>My problem comes up now, I need the links on this page to give my third page the <code>techID</code> as well. But the <code>techID</code> is in <code>jobDetails</code>, so my query cannot give them the <code>techID</code> as it is querying my <code>job</code> section.</p>\n\n<p>This is my \"ListJobs.php\" page, which upon choosing a customer in the page before it, loads this page with the url <code>ListJobs.php?custID=001</code> (001 being an example, it will give the number depending on your choice of customer).</p>\n\n<pre><code>&lt;?php \n// Get data from the database depending on the value of the id in the URL\nmysql_select_db($database_con_sim5, $con_sim5);\n$query_Recordset1 = \"SELECT * FROM job WHERE custID=\" . $_GET[\"custID\"] ;\n$Rs1 = mysql_query($query_Recordset1);\n// Loop the recordset $rs\nwhile($row = mysql_fetch_array($Rs1)) {\n  $strName1 = $row['jobID'] . \" \" . $row['jobDesc'] . \" \" . $row['computerName'];\n  $strLink = \"&lt;a href = 'jobDetails.php?jobID=\".$row['jobID'].\"'&gt;\".$strName1.\"&lt;/a&gt;\";\n  // Write the data of the person\n  echo \"&lt;li&gt;\" . $strLink . \" &lt;/li&gt;\";\n}\n// Close the database connection\nmysql_close();\n?&gt;\n</code></pre>\n\n<p>Then on pressing one of the links, link to <code>jobDetails.php?jobID=</code> with the job number.\nI am able to show all the details in Job Detail with this, but I also need my <code>Tech Name</code> to appear, <code>Tech Name</code> is not in <code>Job Details</code>, but <code>Tech ID</code> is.\nHere is my Job Details page coding :</p>\n\n<pre><code>&lt;?php \n// Get data from the database depending on the value of the id in the URL\nmysql_select_db($database_con_sim5, $con_sim5);\n$query_Recordset1 = \"SELECT * FROM jobDetail WHERE jobID=\" . $_GET[\"jobID\"] ;\n$query_Recordset2 = \"SELECT technician.techName FROM technician \n  WHERE techID=\" . $query_Recordset1[\"techID\"] ;\n$Rs1 = mysql_query($query_Recordset1);\n$Rs2 = mysql_query($query_Recordset2);\nwhile($row1 = mysql_fetch_array($Rs1)) {\n  while($row2 = mysql_fetch_array($Rs2)) {\n    echo \"&lt;dt&gt;&lt;strong&gt;Job Note ID:&lt;/strong&gt;&lt;/dt&gt;&lt;dd&gt;\".$row1[\"jobNoteID\"].\"&lt;/dd&gt;\";\n    echo \"&lt;dt&gt;&lt;strong&gt;Job Notes:&lt;/strong&gt;&lt;/dt&gt;&lt;dd&gt;\".$row1[\"jobNotes\"].\"&lt;/dd&gt;\";\n    echo \"&lt;dt&gt;&lt;strong&gt;Date Completed:&lt;/strong&gt;&lt;/dt&gt;&lt;dd&gt;\".$row1[\"dateCompleted\"].\"&lt;/dd&gt;\";\n    echo \"&lt;dt&gt;&lt;strong&gt;Time Spent:&lt;/strong&gt;&lt;/dt&gt;&lt;dd&gt;\".$row1[\"timeSpent\"].\"&lt;/dd&gt;\";\n    echo \"&lt;dt&gt;&lt;strong&gt;Job ID:&lt;/strong&gt;&lt;/dt&gt;&lt;dd&gt;\".$row1[\"jobID\"].\"&lt;/dd&gt;\";\n    echo \"&lt;dt&gt;&lt;strong&gt;Technician ID:&lt;/strong&gt;&lt;/dt&gt;&lt;dd&gt;\".$row1[\"techID\"].\"&lt;/dd&gt;\";\n    echo \"&lt;dt&gt;&lt;strong&gt;Technician Name:&lt;/strong&gt;&lt;/dt&gt;&lt;dd&gt;\".$row2[\"techName\"].\"&lt;/dd&gt;\";\n  }\n}\n// Close the database connection\nmysql_close();\n?&gt;\n</code></pre>\n\n<p>The error I am getting is:</p>\n\n<blockquote>\n  <p>Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in D:\\xampp\\htdocs\\Sim5Server\\Pages\\jobDetails.php on line 129</p>\n</blockquote>\n\n<p>That line is:</p>\n\n<pre><code>while($row2 = mysql_fetch_array($Rs2)) { \n</code></pre>\n\n<p>I hope I am making any sense AT ALL.</p>\n\n<p>To sum up, I need my final page to show data from mysql technician using the Primary/index key techID. \nSome way to add techID onto either listJobs' links to job details or in job details' second Recordset.</p>\n\n<p>EDIT:\nI should probably state this will never be used on the net, I only need it to work for an assignment. in future, thanks to a comment, I will no longer be using mysql_* I am jsut using them as my entire workbook tells us to use it.</p>\n"},{"tags":["mysql","union"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13216601,"title":"MySQL key name of data array fetched with UNION","body":"<p>The table <code>objects</code></p>\n\n<pre><code>id    name    is_animal\n-----------------------\n1     dog     1\n2     cat     1\n3     chair   0\n4     rabbit  1\n</code></pre>\n\n<p>the quey</p>\n\n<pre><code>(SELECT name AS animal_name FROM objects WHERE is_animal = 1)\nUNION\n(SELECT name AS object_name FROM objects WHERE is_animal = 0)\n</code></pre>\n\n<p>and the result</p>\n\n<pre><code>[animal_name] =&gt; dog\n[animal_name] =&gt; cat\n[animal_name] =&gt; rabbit\n[animal_name] =&gt; chair    // expected: [object_name] =&gt; chair\n</code></pre>\n\n<p>I'v already used <code>AS</code> in the second SELECT, why does it return <code>animal_name</code> instead of <code>object_name</code>?</p>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13216796,"title":"how to insert values of foreign key constraint from other table?","body":"<p>table name <code>category</code> \nand table columns </p>\n\n<pre><code>1) cat_id (primary key)\n2) cat_title\n</code></pre>\n\n<p>the other table is <code>book</code>\nand the columns are</p>\n\n<pre><code>1) book_id (primary key)\n2) book_title\n3) cat_id(foreign key)\n</code></pre>\n\n<p>for the foreign key constraint i was trying the following query:</p>\n\n<pre><code>INSERT INTO book VALUES (1,'new book',(SELECT `cat_title` FROM `categroy` WHERE `cat_id`=3))\n</code></pre>\n\n<p>it is not working. is their anybody to please tell how can i improve this query so that it can come into order. help shell highly be appriciated</p>\n"},{"tags":["java","mysql","web-services","tomcat"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13207216,"title":"Cant deploy WebService that uses MYSQL in Tomcat","body":"<p>This my code for webservice.</p>\n\n<pre><code>/*\n * To change this template, choose Tools | Templates\n * and open the template in the editor.\n */\npackage customer;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Statement;\nimport java.text.Format;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport javax.jws.WebService;\n\n/**\n *\n * @author Mihir\n */\npublic class Customer {\n  String date1;\n  Format formatter;\n  Date date = new Date();\n    public String feedback(String contactno,String comments,String ambience,String service,String \n\nfood,String email,String custno,String custname,String storeno,String sno) \n    {\n\n  formatter = new SimpleDateFormat(\"dd/MM/yy\");\n  date1 = formatter.format(date);\n  Connection con = null;\n  PreparedStatement prest;\n  try{\n  Class.forName(\"com.mysql.jdbc.Driver\");\n  con = DriverManager.getConnection(\"jdbc:mysql://localhost:3306/feedback\",\"root\",\"root\");\n  Statement stmt = con.createStatement();\n\n\n\n      String sql = \"INSERT INTO fb(contact_no, \n\ndate,comments,ambience,service,food,email,cust_no,cust_name,store_no,s_no) \" +\n                    \"VALUES ('\"+contactno+\"', \n\n'\"+date1+\"','\"+comments+\"','\"+ambience+\"','\"+service+\"','\"+food+\"','\"+email+\"','\"+custno+\"',\n\n'\"+custname+\"','\"+storeno+\"','\"+sno+\"')\";\n\nstmt.execute(sql);\n\n\n  }\n\n  catch (Exception e){\n  e.printStackTrace();\n  }\n        return null;\n  }\n\n}\n</code></pre>\n\n<p>Now this is what I am trying to do.</p>\n\n<ol>\n<li>Creating folder in webapps in Tomcat with name customer_customer.</li>\n<li>Inside that two more folder - WEB-INF META-INF </li>\n<li><p>Inside META_INF context.xml with content-</p>\n\n<p>\n      </p></li>\n<li><p>Inside WEB-INF </p></li>\n</ol>\n\n<p>4.a. classes/customer/Customer.class </p>\n\n<p>4b. lib folder with jar -\n       I.  webservices-api.jar\n       II. webservices-extra.jar\n       III.webservices--extra-api.jar\n       IV. webservices-rt.jar\n       V.  webservices-tools.jar\n       VI. mysql-connector-java-5.1.18-bin.jar</p>\n\n<p>4c. web.xml -</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app version=\"2.5\" xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;com.sun.xml.ws.transport.http.servlet.WSServletContextListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;Customer&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;com.sun.xml.ws.transport.http.servlet.WSServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;Customer&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/feedback&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n&lt;/web-app&gt;  \n</code></pre>\n\n<p>4d. sun-jaxws.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;endpoints version=\"2.0\" xmlns=\"http://java.sun.com/xml/ns/jax-ws/ri/runtime\"&gt;\n  &lt;endpoint implementation=\"ws.Customer\" name=\"Adder\" url-pattern=\"/feedback\"/&gt;\n&lt;/endpoints&gt;\n</code></pre>\n"},{"tags":["php","mysql","pdo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13216293,"title":"PDO error message 1064","body":"<p>I am having trouble getting this to work I will include the code both working and what I am trying to accomplish. In the first code it is non-working and gives me an error message: <code>Connection failed: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':userName AND</code>password<code>=:userPass' at line 1</code>\nI have tried several different combinations of syntax and still no luck. In the second code example it is working code and basically I am trying to get rid of all the unnecessary code to just obtain a <code>$row</code> count from the function to verify that there was 1 row that matched the query. </p>\n\n<pre><code>function checkLogin($conn,$myusername, $mypassword) {\n\n       $stmt = $conn-&gt;prepare('SELECT COUNT(*) FROM `CLL_users` WHERE `user_name`= :userName AND `password`= :userPass');\n       $stmt-&gt;bindValue(':userName', $myusername);\n       $stmt-&gt;bindValue(':userPass', $mypassword);\n       $stmt-&gt;execute();\n       $count = $stmt-&gt;fetchColumn();\n       return $count;\n}\n</code></pre>\n"},{"tags":["php","mysql","query","pdo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13216582,"title":"Issue with value being returned from PDO query","body":"<p>I am experiencing an issue with the values being returned from my PDO statement.</p>\n\n<p>This is my code:</p>\n\n<pre><code>//Execute test\n$this-&gt;checkConnect();\n$stmt = $this-&gt;dbh-&gt;prepare(\"SELECT p_id FROM People WHERE lastName = :param1 AND firstName = :param2\");\n$stmt-&gt;bindParam(':param1', $this-&gt;lName);\n$stmt-&gt;bindParam(':param2', $this-&gt;fName);\n$stmt-&gt;execute();\n$count = $stmt-&gt;rowCount();\n\n//Determine value of test\nif($count == FALSE)\n{\n    return FALSE;\n}\nelse\n{\n    $dummyvar = $stmt-&gt;fetch();\n    $this-&gt;p_id = implode($dummyvar);\n}\n</code></pre>\n\n<p>When I was going through my database records, I noticed that a certain value was off from what I had input. When I execute a query, it is supposed to grab the value of <code>p_id</code> from the table<code>People</code>. Simple enough. However, what happens is that the number is appended twice to itself. For instance, say <code>p_id</code> is equal to 1. <code>this-&gt;p_id</code> will be equal to 11. Or is <code>p_id</code> is equal to 2, the output will be 22. I've executed this query within MySQL and the value is correct. I'm not sure what is happening in my php code. Perhaps something to do with implode? I'm not sure.</p>\n\n<p>Any insight will be appreciated.</p>\n\n<p>Addition: I should also state that <code>p_id</code> is unique, thus only one value can be returned.</p>\n"},{"tags":["python","mysql","osx","64bit","32bit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13216198,"title":"How to setup 32 and 64 bit versions of MySQL-Python on the same OSX machine?","body":"<p>I have been assigned to maintain a tool written in Python that interfaces with MySQL. Users use this tool through different applications that uses different versions of Python. </p>\n\n<p>Sometimes the Python version changes between software releases of the same application. We have no control on the application the user chooses to interact with (they all have Python interface and run under OS X though) but I got almost everything to work except for the problems with Python-MySQL. Specifically, some software uses the 64-bit versions of Python. Others come with the 32-bit version. OS X (the OS I need to support) comes with Python and Python-MySQL 32bit installed so if I try to:</p>\n\n<pre><code>import MySQLdb \n</code></pre>\n\n<p>in the software that uses Python 64-bit, the import fails and the application will say that the binary of MySQL that ships with OS X is the wrong type.</p>\n\n<p>I have downloaded, compiled and installed Python-MySQL as 64-bit app, but Python-MySQL uses Python eggs. It seems the egg is hard coded to point to a specific disk location. On my machine is <code>/usr/local/lib/mysql</code>.</p>\n\n<p>If I have the 64-bit version on that path then my tool works with the applications that have Python 64-bit but all the other tools that uses a 32-bit version of Python fails. If I have the 32-bit version of MySQL at that disk location the 32-bit tools work and the 64-bit version stops doing what I need.</p>\n\n<p>I have tried to create distinct eggs and have a 64-bit version of it where I change the egg to point to <code>/usr/local/lib/mysql_x86_64</code> but I can't figure out how to do it. I have also tried to change the setup while compiling Python-MySQL to point to that location but I can’t find a way of doing this.</p>\n\n<p>Right now I'm Googling my life away on the subject but if what I have just wrote rings a bell to anybody do you mind to enlighten me?</p>\n\n<p>I'm not a Python-MySQL expert at all.</p>\n"},{"tags":["php","mysql","pdo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13216604,"title":"trouble echoing from a function","body":"<p>So I am having trouble getting a variable to pass from the function into the page the function is called on if I writ an echo command in the function itself the variable will echo just fine, but when I echo from the file that I call the function it will not display anything at all. Here are my code examples:</p>\n\n<pre><code>//CHECK LOGIN CREDINTIALS\nfunction checkLogin($conn,$myusername, $mypassword, $count) {\n\n       $stmt = $conn-&gt;prepare('SELECT COUNT(*) FROM `CLL_users` WHERE `user_name`= :userName AND `password`= :userPass');\n       $stmt-&gt;bindValue(':userName', $myusername);\n       $stmt-&gt;bindValue(':userPass', $mypassword);\n       $stmt-&gt;execute();\n       $count = $stmt-&gt;fetchColumn();\n       echo \"$count&lt;br&gt;\";\n}\n</code></pre>\n\n<p>Here is the file I am trying to pass the variable from the function into</p>\n\n<pre><code>&lt;?php\nsession_start();\n$_SESSION['myusername'] = $myusername;\nsession_is_registered(\"myusername\");\nsession_is_registered(\"mypassword\");\n\nrequire 'functions.php';\nrequire 'DB.php';\nob_start();\n// Define $myusername and $mypassword \n$myusername =$_POST['myusername']; \n$mypassword =md5($_POST['mypassword']);\n\ncheckLogin($conn, $myusername, $mypassword, $count);\n\necho $count;\n// If result matched $myusername and $mypassword, table row must be 1 row\nif($count==1){\n\n// Register $myusername, $mypassword and redirect to file \"login_success.php\"\n\n    $myusername1 = $_SESSION['myusername'];\n    //UPDATE LAST LOGIN IN DATABASE\n    date_default_timezone_set('America/Chicago');\n    $last_login = date('m/d/Y h:i:s a', time());\n    lastLogin($conn,$myusername1,$last_login);\n    header(\"location:form.php\");\n\n\n}\nelse {\necho $count;\necho \"$mypassword&lt;br&gt;\";\necho \"$myusername&lt;br&gt;\";\necho \"Wrong Username or Password\";\n\n}\nob_end_flush();\n?&gt;\n</code></pre>\n"},{"tags":["mysql","sql"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":109,"score":1,"question_id":12065931,"title":"MySQL Select rows on first occurance of each unique value","body":"<p>Let's say you have the following table (the column of interest here is <code>cid</code>):</p>\n\n<pre><code>+-----+-------+-------+-------+---------------------+--------------+\n| cid | pid   | rid   | clink | time                | snippet      |\n+-----+-------+-------+-------+---------------------+--------------+\n| 155 | 11222 |  1499 |  1137 | 2012-08-22 03:05:06 | hi           |\n| 138 | 11222 |   241 |  1136 | 2012-08-21 05:25:00 | again        |\n| 138 | 11222 |   241 |  1135 | 2012-08-21 05:16:40 | hi           |\n| 155 | 11222 |  1499 |  1134 | 2012-08-21 05:11:00 | hi cute      |\n| 140 | 11222 | 11223 |  1133 | 2012-08-21 05:05:18 | hi           |\n| 154 | 11222 |   565 |  1132 | 2012-08-21 05:04:47 | 7            |\n| 153 | 11222 |   272 |  1131 | 2012-08-21 05:04:41 | 6            |\n| 146 | 11222 |   362 |  1130 | 2012-08-21 05:04:33 | 5            |\n| 152 | 11222 |   364 |  1129 | 2012-08-21 05:04:27 | 4            |\n| 151 | 11222 |   390 |  1128 | 2012-08-21 05:04:22 | 3            |\n| 150 | 11222 |   333 |  1127 | 2012-08-21 05:04:16 | 2            |\n| 148 | 11222 |   268 |  1126 | 2012-08-21 05:04:10 | 1            |\n| 140 | 11222 | 11223 |  1125 | 2012-08-21 04:59:57 | hi sir       |\n| 147 | 11222 |   283 |  1123 | 2012-08-21 03:29:55 | yo           |\n| 140 | 11222 | 11223 |  1121 | 2012-08-21 02:12:13 | hello!       |\n| 139 | 11222 |   249 |  1120 | 2012-08-21 02:11:53 | hi :)        |\n| 140 | 11222 | 11223 |  1119 | 2012-08-21 02:11:26 | hi :)        |\n| 140 | 11222 | 11223 |  1118 | 2012-08-21 02:11:08 | hi too       |\n| 139 | 11222 |   249 |  1117 | 2012-08-21 02:11:00 | :P           |\n| 139 | 11222 |   249 |  1116 | 2012-08-21 02:10:57 | hi           |\n| 139 | 11222 |   249 |  1115 | 2012-08-21 02:10:51 | helo         |\n| 139 | 11222 |   249 |  1114 | 2012-08-21 02:06:19 | hi           |\n| 139 | 11222 |   249 |  1113 | 2012-08-21 02:05:45 | hi baby      |\n| 139 | 11222 |   249 |  1112 | 2012-08-21 02:05:00 | hi           |\n| 139 | 11222 |   249 |  1111 | 2012-08-21 02:04:41 | hi           |\n| 140 | 11222 | 11223 |  1110 | 2012-08-21 02:04:26 | hi           |\n| 140 | 11222 | 11223 |  1108 | 2012-08-21 01:47:40 | hey :)       |\n| 139 | 11222 |   249 |  1107 | 2012-08-21 01:44:43 | hi           |\n| 138 | 11222 |   241 |  1106 | 2012-08-21 01:44:11 | hi           |\n| 138 | 11222 |   241 |  1105 | 2012-08-21 01:09:20 | conv 1 msg 1 |\n+-----+-------+-------+-------+---------------------+--------------+\n</code></pre>\n\n<p>How to extract only the first occurrence of each <code>cid</code>? The resulting table would be:</p>\n\n<pre><code>+-----+-------+-------+-------+---------------------+--------------+\n| cid | pid   | rid   | clink | time                | snippet      |\n+-----+-------+-------+-------+---------------------+--------------+\n| 155 | 11222 |  1499 |  1137 | 2012-08-22 03:05:06 | hi           |\n| 138 | 11222 |   241 |  1136 | 2012-08-21 05:25:00 | again        |\n| 140 | 11222 | 11223 |  1133 | 2012-08-21 05:05:18 | hi           |\n| 154 | 11222 |   565 |  1132 | 2012-08-21 05:04:47 | 7            |\n| 153 | 11222 |   272 |  1131 | 2012-08-21 05:04:41 | 6            |\n| 146 | 11222 |   362 |  1130 | 2012-08-21 05:04:33 | 5            |\n| 152 | 11222 |   364 |  1129 | 2012-08-21 05:04:27 | 4            |\n| 151 | 11222 |   390 |  1128 | 2012-08-21 05:04:22 | 3            |\n| 150 | 11222 |   333 |  1127 | 2012-08-21 05:04:16 | 2            |\n| 148 | 11222 |   268 |  1126 | 2012-08-21 05:04:10 | 1            |\n| 147 | 11222 |   283 |  1123 | 2012-08-21 03:29:55 | yo           |\n| 140 | 11222 | 11223 |  1121 | 2012-08-21 02:12:13 | hello!       |\n| 139 | 11222 |   249 |  1120 | 2012-08-21 02:11:53 | hi :)        |\n+-----+-------+-------+-------+---------------------+--------------+\n</code></pre>\n\n<p>Thanks in advance for any ideas.</p>\n"},{"tags":["mysql","delete","replication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13210575,"title":"MySQL Replication for Only Inserts and Updates but no Deletes","body":"<p>I have a master/slave database architecture with replication set up.\nIs is possible to only allow replication for inserts and updates but deny any deletes.</p>\n\n<p>I do a backup every night as well but if it just happens that someone fires a DELETE_ALL on the master, I do not want that to propagate down to the Slave.</p>\n"},{"tags":["php","mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13216408,"title":"Select MySQL row where column is closest to current date","body":"<p>I have a database with a bunch of rows. One of the columns is \"date\" which has a date for each row in the format: MM/DD/YYYY H:MM PM/AM</p>\n\n<p>How can I write PHP that selects the row where the date is the most recent date that has passed. Meaning if you have a date of tomorrow, a date of today, and a date of yesterday, it picks the row where the date is of yesterday.</p>\n\n<p>I've already connected to the database:</p>\n\n<pre><code>mysql_connect('localhost','username','pass');\nmysql_select_db('db_name');\n</code></pre>\n\n<p>How do I write a query to grab this?</p>\n"},{"tags":["java","mysql","struts"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13206707,"title":"Please fix the error in the following mysql query","body":"<pre><code>package com.fr.jdbc;\n\nimport java.sql.Connection;\n\nimport com.opensymphony.xwork2.ActionContext;\n\npublic class ParentEngagementReportDAO\n{\n\n\n\n        return parentEngagementReport;\n    }\n</code></pre>\n\n<p>I have used prepared statement for executing queries.I am getting the following error.</p>\n\n<pre><code>03 Nov 2012 02:30:30,212 ERROR ParentEngagementReportDAO:117 - com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL \n</code></pre>\n\n<p>Please help me. I have been spending past 2 hours on this error. </p>\n"},{"tags":["mysql","triggers"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13215438,"title":"Issue with trigger delimiters","body":"<p>I'm running into a problem with creating a trigger on a table using MySQL and phpmyadmin v3.4.5.  After some research, it seems like this is a common problem, but none of the fixes I've found are working for me.  The error I'm getting is:</p>\n\n<pre><code> #1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'END' at line 8\n</code></pre>\n\n<p>The query I'm trying to run is:</p>\n\n<pre><code> CREATE TRIGGER book_insert\n AFTER INSERT ON `books`\n FOR EACH ROW BEGIN\n INSERT INTO products\n      (ProductID,Type,Title,Price) \n VALUES \n      (books.ProductID,0,books.Title,0)\n END\n //\n</code></pre>\n\n<p>I've set the delimiter to // in the text below the query input as I've read that PHPMyAdmin doesn't like you using the delimiter keyword in the query.  I've also played around with the placement of the delimiter, having no spaces between END and '//', having one space, and trying it on a different line.  I've also tried different delimiters like the default semicolon, 2 dollar signs, and 2 pound signs.  This seems like its something really small and stupid, but I can't figure out what it doesn't like about that statement.</p>\n"},{"tags":["mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13147991,"title":"For the following mysql query I got an output. But how to modify the query so that I get results for a range of date","body":"<pre><code>select hotel.*, hotels.type \nfrom pe,se \nwhere p.hotel_Id = s.S_Id \n  and Type=\"\";\n</code></pre>\n\n<p>The output I got is </p>\n\n<pre><code> pid     SId     PName     PPlan     PMethod     PDate     numberOfParents     SType    \n ---------------------  ----------  -------------------------  -------------------------  ---------------------------  -------------------------  ------------------  ------------ \n 4                      2           kjbkjbjkbk                 jkbjbkbl                   lkblknl                      10/5/2012                  234                 abc       \n 6                      2           dfvrvt                     rvrtv                      rvrtvrt                      1/1/2012                   3                   abc       \n 9                      2           er                         \n</code></pre>\n\n<p>Now my problem is I want query so that my output will be in a such way that the data are for a range of dates. For eg, 08/09/2012 to 10/12/2012.</p>\n\n<p>Separately I could write the mysql query for a date range using >= and &lt;=. But I could not combine that date range part in the present query. Please help me. </p>\n"},{"tags":["mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":76,"score":0,"question_id":13079127,"title":"Whats wrong with the following mysql code","body":"<pre><code>Insert into hotel('fname', 'lname'...\nvalues\n  ('null', 'abc'....\nON DUPLICATE KEY UPDATE \n  fname = 'null',\n  lname = 'abc',.....\n</code></pre>\n\n<p>I get the following error:</p>\n\n<blockquote>\n  <p>Warnings: \n  W (1): You have an error in your SQL syntax; check the\n  manual that corresponds to your MySQL server version for the right</p>\n</blockquote>\n\n<p>Please help me.</p>\n"},{"tags":["mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":57,"score":3,"question_id":13216068,"title":"MySQL query to return AVG","body":"<p>Just a practice problem, little bit confusing I'd appreciate it if somebody could clear this up..</p>\n\n<p>I have a DB called Product and another one called PC. I'm trying to execute a query to \"find the average hard disk size of a PC for all those manufacturers who also make printers\"</p>\n\n<p>Here's my code:</p>\n\n<pre><code>SELECT maker, AVG(hd) \nFROM pc, product\nWHERE pc.model=product.model\nGROUP BY maker\nHAVING COUNT(type='PR')&gt;=1\n</code></pre>\n\n<p>type is an attribute of Product which either stands for printer(PR) laptop or PC, however the HAVING statement doesn't seem to single out only the makers who produce printers, instead I get back an AVG for each maker in the Product table.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>This is what the relations look like:</p>\n\n<pre><code>Product(maker, model, type)\nPC(model, hd, speed, ram, price)\nPrinter(model, color, type, price)\n</code></pre>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13214326,"title":"Complex query to update table field. Is this possible?","body":"<p>I have two database tables called Item and Inspection. An Item has many inspections. Basically, an inspection is done on an item and the inspection records it's state of bring \"not broken\" vs. \"broken\". Regular inspections are made on each item.</p>\n\n<p>I want to update a newly added field for each record in the Items table called \"last_broken_at\". It needs to be updated to the \"created\" datetime found in the oldest related Inspection for that Item, where the Inspection \"status\" field is equal to \"broken\".</p>\n\n<p>While that is definitely possible via a single MySQL update statement, here is the caveat:</p>\n\n<p>If an Item was repaired at some point and inspection found the item to be \"not broken\", but is then later found to be \"broken\" again, the Item's \"last_broken_at\" field must be updated to the \"created\" datetime of the inspection where the status was \"broken\" after an inspection of status \"not broken\".</p>\n\n<p>Basically, the \"last_broken_at\" field in the Items table must be true to its name, it must indeed be closest time we know the Item went from being \"not broken\" to \"broken\".</p>\n\n<p>Here are what the tables look like:</p>\n\n<p>Items table</p>\n\n<ul>\n<li>ID (INT)</li>\n<li>created (DATETIME)</li>\n<li>name (VARCHAR)</li>\n<li>status (VARCHAR) Note: contains latest status of the item, as per the last inspection.</li>\n<li>last_broken_at (DATETIME)</li>\n</ul>\n\n<p>Inspections</p>\n\n<ul>\n<li>id (INT)</li>\n<li>created (DATETIME)</li>\n<li>item_status (VARCHAR)</li>\n<li>item_id (INT)</li>\n</ul>\n\n<p>Thanks!!</p>\n"},{"tags":["mysql","count","group-by","left-join"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13216241,"title":"MySQL using COUNT, LEFT JOIN and GROUP by returning undesired results","body":"<p>I need some help to get the desired results, which would in this case, be 7 (the number of rows in the products table that would match).</p>\n\n<p>What I am instead getting is 7 rows with a count based on the the number of rows returned in the LEFT JOIN.</p>\n\n<pre><code>SELECT count(p.id) as theCount \n            FROM products p \n            left join tablea a on p.id = a.productId \n            left join tableb b on p.id = b.productId \n            WHERE (a.col = 'val' or b.col = 'val')\ngroup by p.id\n</code></pre>\n\n<p>If I do not group by p.id, I get back 28 rows, which is all of the rows from the LEFT JOIN.</p>\n\n<p>I know it's something simple, but I can't figure it out. </p>\n\n<p>Thanks. </p>\n"},{"tags":["php","mysql","pdo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13216261,"title":"pdo insert without variables","body":"<p>I'm trying to insert a new record into a table that contains only an auto number primary key using the following code,</p>\n\n<pre><code>$pdo_conn = new PDO(\"mysql:host=$dbhost;dbname=$dbname\", $dbuser, $dbpass);\n$sqla = \"insert into tbl_gen (gen_sk) values (null)\";\n$qa = $pdo_conn-&gt;prepare($sqla);\n$qa-&gt;execute();\n</code></pre>\n\n<p>is this the right way to go about it?\nrunning the sql command in mysql workbench does the job, I'm just feeling like maybe I'm using pdo the wrong way.</p>\n"},{"tags":["mysql","sql","database","database-design"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":7926904,"title":"CHADIM in information technology context","body":"<p>What is CHADIM in information technology context?\nMy assignment for one IT class(Relational database management system) is a investigation report on CHADIM.</p>\n\n<p>Can someone give me some pointers on the subject? i cant find anything related  on search engines.</p>\n"},{"tags":["php","mysql","pdo"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13216033,"title":"PDO row count confusion","body":"<p>Ok so this has me confused and I was wondering If someone can enlighten me as to why its happening. I am making a login page that checks for matching values in a database if the SELECT query returns a matching row with username and password then it will return a row count of 1. The way I have it coded right now when I echo the variable that stores the row count it will echo 26 for some reason and im not to sure why. If someone could look at the code and explain if I am doing something wrong or if this is normal behavior and where that value is coming from I would appreciate it.</p>\n\n<pre><code>function checkLogin($conn,$myusername,$mypassword,$row,$row1){\n   try {  \n        $sql = \"SELECT COUNT(*) FROM CLL_users WHERE user_name = 'user' AND password = 'XXXX'\";\n        if ($results = $conn-&gt;query($sql)) {\n\n            if($results-&gt;fetchColumn() &gt; 0) {\n\n                $sql = \"SELECT * FROM CLL_users WHERE user_name = 'user' AND password = 'XXXXX'\";\n                foreach ($conn-&gt;query($sql) as $row)\n                {               \n                   $rowCount = count($row);\n                   echo $rowCount;\n                    print (\"Username: \" . $row['user_name'] . \"&lt;br&gt;\");\n                     print (\"Username: \" . $row['password'] . \"&lt;br&gt;\");\n\n                    }\n\n                    echo $count;\n          }\n        else {\n            print \"NO ROWS\";\n        }\n        }\n        } catch (PDOException $e){\n    echo 'Connection failed: ' . $e-&gt;getMessage();\n}\n\n}\n</code></pre>\n"},{"tags":["php","mysql","sql","database","sync"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":31,"score":-1,"question_id":13216042,"title":"MySQL database sync betwen two servers using PHP","body":"<p>I have two same websites on two different servers. </p>\n\n<pre><code>Master Database - server1\nSlave Database - Server2\n</code></pre>\n\n<p>I wanna make PHP script which will check for changes in master database and if found any it will syncronize it with slave database. I will set chronjob for that script so it will run every few minutes.</p>\n\n<p>I found some scripts on Google but it doesn't work at all.\nI tried using PMS(<a href=\"http://sourceforge.net/projects/mysqlsync/\" rel=\"nofollow\">http://sourceforge.net/projects/mysqlsync/</a>) but i reciving:</p>\n\n<p>Notice: Use of undefined constant host - assumed 'host' in /var/www/demos/pms/pmslib.php on line 57</p>\n\n<p>Notice: Use of undefined constant user - assumed 'user' in /var/www/demos/pms/pmslib.php on line 57</p>\n\n<p>Notice: Use of undefined constant pass - assumed 'pass' in /var/www/demos/pms/pmslib.php on line 57</p>\n\n<p>Notice: Use of undefined constant base - assumed 'base' in /var/www/demos/pms/pmslib.php on line 63</p>\n\n<p>Notice: Use of undefined constant host - assumed 'host' in /var/www/demos/pms/pmslib.php on line 79</p>\n\n<p>Notice: Use of undefined constant host - assumed 'host' in /var/www/demos/pms/pmslib.php on line 57</p>\n\n<p>Notice: Use of undefined constant user - assumed 'user' in /var/www/demos/pms/pmslib.php on line 57</p>\n\n<p>Notice: Use of undefined constant pass - assumed 'pass' in /var/www/demos/pms/pmslib.php on line 57</p>\n\n<p>Notice: Use of undefined constant base - assumed 'base' in /var/www/demos/pms/pmslib.php on line 63</p>\n\n<p>Notice: Use of undefined constant host - assumed 'host' in /var/www/demos/pms/pmslib.php on line 79</p>\n"},{"tags":["java","mysql","stored-procedures"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13216066,"title":"Execute MySQL Stored Procedures in Java","body":"<p>I'm trying to execute a stored procedure using jdbcTemplate but I keep getting an error saying that GetEvents expects 0 arguments. Can anyone shed some light on why or is there a better way to execute this stored procedure?</p>\n\n<p>The error I'm getting is:<br />\norg.springframework.dao.InvalidDataAccessApiUsageException: SQL [CALL GetEvents(?, ?, ?)]: given 3 parameters but expected 0</p>\n\n<p>Procedure</p>\n\n<pre><code>mysql&gt; CREATE PROCEDURE GetEvents(IN search_table VARCHAR(255), IN start TIMESTAMP, IN end TIMESTAMP)\n    -&gt; BEGIN\n    -&gt; SELECT COUNT(*)\n    -&gt; FROM search_table\n    -&gt; WHERE time &gt;= start AND time &lt;= end;\n    -&gt; END //\nQuery OK, 0 rows affected (0.02 sec)\n</code></pre>\n\n<p>Java</p>\n\n<pre><code>public int getEnterExitsAll(DateTime start, DateTime end) {\n    Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\n    params.put(\"search_table\", TABLE_ENEX);\n    params.put(\"start\", start.toString());\n    params.put(\"end\", end.toString());\n    return template.queryForInt(\"CALL GetEvents(?, ?, ?)\", params);\n</code></pre>\n"},{"tags":["php","javascript","jquery","mysql"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":13207538,"title":"How to give each img its own name in PHP, from MySQL query","body":"<p>Below is my PHP code, i'm looking for the way to give each img its own name then i can select in jQuery.</p>\n\n<p>PHP:</p>\n\n<pre><code>$query=mysql_query($sql) or die(mysql_error());\nwhile($list=mysql_fetch_array($query)){\n    print\"\n        &lt;div class=\\\"content\\\"&gt;$list[content]&lt;/div&gt;\n        &lt;div class=\\\"contentpic\\\"&gt;$list[content_pic]&lt;/div&gt;\n    \";\n}\n\ncontent    : longtext\ncontent_pic     : text\n</code></pre>\n\n<p>1 content_pic column save several img src: <code>&lt; img src=\"http://path\"&gt;&lt; img src=\"http://path\"&gt;...</code></p>\n\n<p><p><br>\nThis is example what i try to do <a href=\"http://www.asos.com/Vans/Vans-Authentic-Plimsolls/Prod/pgeproduct.aspx?iid=691064&amp;abi=1&amp;clr=Black&amp;r=2\" rel=\"nofollow\">example site is a normal e-shop</a> <br>\n1 content page there're several content img inside, should I continue find the way give each img own name, then select in jQuery use method to move or... some act. <br>\nOR is there any better solution? </p>\n\n<p><br>\nAny suggestion will be appreciated, Thank you so much!</p>\n"},{"tags":["mysql","count","rows","total"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13216048,"title":"Mysql count total viewer each month","body":"<p>I'm going to count every viewer from a database each month. I tried many ways but I have no luck. Here is the code sample </p>\n\n<pre><code>SELECT MONTH_v, YEAR_V, \nSUM(IF(day_v=1, views, 0)) AS '1',\nSUM(IF(day_v=2, views, 0)) AS '2',\nSUM(IF(day_v=3, views, 0)) AS '3',\nSUM(IF(day_v=4, views, 0)) AS '4',\nSUM(IF(day_v=5, views, 0)) AS '5',\nSUM(IF(day_v=6, views, 0)) AS '6',\nSUM(IF(day_v=7, views, 0)) AS '7',\nSUM(IF(day_v=8, views, 0)) AS '8',\nSUM(IF(day_v=9, views, 0)) AS '9',\nSUM(IF(day_v=10, views, 0)) AS '10',\nSUM(IF(day_v=11, views, 0)) AS '11',\nSUM(IF(day_v=12, views, 0)) AS '12',\nSUM(IF(day_v=13, views, 0)) AS '13',\nSUM(IF(day_v=14, views, 0)) AS '14',\nSUM(IF(day_v=15, views, 0)) AS '15',\nSUM(IF(day_v=16, views, 0)) AS '16',\nSUM(IF(day_v=17, views, 0)) AS '17',\nSUM(IF(day_v=18, views, 0)) AS '18',\nSUM(IF(day_v=19, views, 0)) AS '19',\nSUM(IF(day_v=20, views, 0)) AS '20',\nSUM(IF(day_v=21, views, 0)) AS '21',\nSUM(IF(day_v=22, views, 0)) AS '22',\nSUM(IF(day_v=23, views, 0)) AS '23',\nSUM(IF(day_v=24, views, 0)) AS '24',\nSUM(IF(day_v=25, views, 0)) AS '25',\nSUM(IF(day_v=26, views, 0)) AS '26',\nSUM(IF(day_v=27, views, 0)) AS '27',\nSUM(IF(day_v=28, views, 0)) AS '28',\nSUM(IF(day_v=29, views, 0)) AS '29',\nSUM(IF(day_v=30, views, 0)) AS '30',\nSUM(IF(day_v=31, views, 0)) AS '31'\nFROM\n(\n SELECT DAY(vwr_date) AS day_v, \n MONTH(vwr_date) AS MONTH_v, \n Year(vwr_date) AS YEAR_V,\n date(vwr_date) AS date_v, \n count(vwr_id) AS views \n FROM car_viewer \n WHERE Year(vwr_date)='2012' AND vwr_tid='18' \n GROUP BY date_v \n) as viewz\nGROUP BY MONTH_v, YEAR_V \nORDER BY MONTH_v, YEAR_V DESC;\n</code></pre>\n\n<p>The live view is here : <a href=\"http://www.sqlfiddle.com/#!2/75aa8/1\" rel=\"nofollow\">http://www.sqlfiddle.com/#!2/75aa8/1</a></p>\n\n<p>The question is I'd like to add two columns to the right of each rows:</p>\n\n<ol>\n<li>Total = every viewer including 0 of each row.</li>\n<li>Average = average viewer of each row.</li>\n</ol>\n\n<p>Please don't hesitate to give me a hand. :)</p>\n\n<p>Ref: <a href=\"http://stackoverflow.com/questions/13042710/mysql-count-everyday-in-a-month-returns-blob-2b-instead-of-number/13042896#comment17724127_13042896\">MySQL count(*) everyday in a month returns [BLOB-2B] instead of number</a></p>\n\n<p>Credit : Ross Smith II</p>\n"},{"tags":["php","mysql","pdo"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":13215472,"title":"PDO prepared equivalent statement for mysql_num_rows","body":"<p>I hope this question does not seem vague but I am converting the old mysql statements to the PDO prepared statements and I have searched but cannot find the answer to this. What is the equivalent of <code>$count=mysql_num_rows($stmt);</code> in PDO? I have included my code so you can see what I am doing but basically I am creating a login page for users I have a PDO statement using <code>SELECT</code> to search the database for a matching username and password row. If it comes up with one then it will increase the <code>$count</code> variable to one so that my <code>IF</code> statment is true.</p>\n\n<p>CHECK_LOGIN.PHP</p>\n\n<pre><code>&lt;?php\nrequire 'functions.php';\nrequire 'DB.php';\nob_start();\n\n// Define $myusername and $mypassword \n$myusername=$_POST['myusername']; \n$mypassword =$_POST['mypassword'];\n$mypassword = md5($_POST['mypassword']);\n\ncheckLogin($conn,$myusername,$mypassword,$stmt);\n\n// Mysql_num_row is counting table row\n$count=mysql_num_rows($stmt);\n\n// If result matched $myusername and $mypassword, table row must be 1 row\nif($count==1){\n\n// Register $myusername, $mypassword and redirect to file \"login_success.php\"\n    session_start();\n    $_SESSION['myusername'] = $myusername;\n    session_is_registered(\"myusername\");\n    session_is_registered(\"mypassword\"); \n    $myusername1 = $_SESSION['myusername'];\n    //UPDATE LAST LOGIN IN DATABASE\n    date_default_timezone_set('America/Chicago');\n    $last_login = date('m/d/Y h:i:s a', time());\n    lastLogin($conn,$myusername1,$last_login);\n    header(\"location:form.php\");\n\n\n}\nelse {\n\necho \"Wrong Username or Password\";\n\n}\nob_end_flush();\n?&gt;\n</code></pre>\n\n<p>function in FUNCTION.PHP</p>\n\n<pre><code>function checkLogin($conn,$myusername,$mypassword,$stmt){\n\n$myusername = stripslashes($myusername);\n$myusername = mysql_real_escape_string($myusername);\n$stmt = $conn-&gt;prepare('SELECT * FROM `CLL_users` WHERE `user_name`=:myusername AND `password`=:mypassword');\n$stmt-&gt;execute(array(':myusername' =&gt; $myusername, ':mypassword' =&gt; $mypassword));\n}\n</code></pre>\n"},{"tags":["javascript","mysql","node.js","query-string"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":13211783,"title":"Node.js beginner- request without query strings","body":"<p>I'm new to node.js. A project I'm working on requires that a large array (625 items) be stored in a MySQL database as a string and I'm using <a href=\"http://github.com/felixge/node-mysql\" rel=\"nofollow\">Node MySQL</a> to accomplish that.</p>\n\n<p>Right now I have it so that the row is updated when a request is made to \"/(column name)?(value)\". Unfortunately, it didn't take long to learn that passing 625 items as a string to node isn't the most efficient way of doing things.</p>\n\n<p>Do you have any suggestions for alternate methods of passing a large array as a string besides querystrings?</p>\n\n<pre><code>var http = require('http'),\n   mysql = require(\"mysql\"),\n   url = require(\"url\"),\n   express = require(\"express\");\n\nvar connection = mysql.createConnection({\n   user: \"root\",\n   database: \"ballot\"\n\n});  \n\nvar app = express();\napp.use(express.bodyParser());\n\napp.options('/', function (request, response)\n{\n    response.header(\"Access-Control-Allow-Origin\", \"*\");\n    response.end();\n});\n\napp.get('/', function (request, response)\n{\n    connection.query(\"SELECT * FROM pathfind;\", function (error, rows, fields) {\n        for(i=0;i&lt;rows.length;i++)\n        {\n            response.send('&lt;div id=\"layers\"&gt;'+rows[i].layers+'&lt;/div&gt; \\\n                            &lt;div         id=\"speed\"&gt;'+rows[i].speed+'&lt;/div&gt; \\\n                            &lt;div     id=\"direction\"&gt;'+rows[i].direction+'&lt;/div&gt;');\n        }\n        response.end();\n    });\n});\n\napp.post('/', function (request, response)\n{   \n    console.log(request.param('data', null));\n    var urlData = url.parse(request.url, true);\n    if(urlData.pathname = '/layers')\n    {\n        col = \"layers\";\n    }\n    else if(urlData.pathname = '/speed')\n    {\n        col = \"speed\";\n    }\nelse if(urlData.pathname = '/direction')\n    {\n        col = \"direction\";\n    }\n    req.addListener(\"data\", function(data) {\n        connection.query(\"UPDATE pathfind SET \"+col+\"=\"+data+\" WHERE num=0\",     function (error, rows, fields) {\n            if (error)\n            {\n                app.close();\n            }\n        }); \n    });\n});\n\napp.listen(8080);**\n</code></pre>\n\n<p>EDIT: So now I know I need to use posts. I've rewritten the above code using express.js. Most examples that I look at online use posts with HTML forms, which is fine, but my project needs to post data via an AJAX request. Can someone show me how that data is parsed in node.js?</p>\n"},{"tags":["mysql","group-by","mysql-error-1064"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13215832,"title":"Update multiple rows in a table based on result from subquery","body":"<p>I have the following query:</p>\n\n<pre class=\"lang-mysql prettyprint-override\"><code>SELECT \n  stat.mcq_id, \n  ROUND( stat.total_score / stat.num_taken, 2 ) AS avg_score\n    FROM (\n      SELECT \n        user_mcq.mcq_id, \n        SUM( score ) AS total_score, \n        COUNT( user_mcq.id ) AS num_taken\n      FROM user_mcq\n      INNER JOIN user ON ( user.id = user_mcq.user_id ) \n      WHERE user.level_id =3\n      AND user_mcq.is_complete =1\n      GROUP BY user_mcq.mcq_id\n    ) AS stat\n</code></pre>\n\n<p>This produces:</p>\n\n<pre><code>mcq_id  avg_score\n1       5.75\n2       9.22\n6       8.81\n7       8.94\n14      7.00\n16      9.46\n</code></pre>\n\n<p>I would like to use this to update another table called <code>mcq</code> using <code>mcq_id</code> from the result to match against <code>mcq.id</code></p>\n\n<p>I've tried the following, but without success:</p>\n\n<pre class=\"lang-mysql prettyprint-override\"><code>UPDATE mcq SET mcq.avg_score = stats.avg_score FROM (\n  SELECT \n  stat.mcq_id, \n  ROUND( stat.total_score / stat.num_taken, 2 ) AS avg_score\n    FROM (\n      SELECT \n        user_mcq.mcq_id, \n        SUM( score ) AS total_score, \n        COUNT( user_mcq.id ) AS num_taken\n      FROM user_mcq\n      INNER JOIN user ON ( user.id = user_mcq.user_id ) \n      WHERE user.level_id =3\n      AND user_mcq.is_complete =1\n      GROUP BY user_mcq.mcq_id\n    ) AS stat\n) AS stats\nWHERE mcq.id = stats.mcq_id;\n</code></pre>\n\n<p>This gives: </p>\n\n<pre><code>#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM ( SELECT stat.mcq_id, ROUND( stat.total_score / stat.num_taken, 2 ) A' at line 1\n</code></pre>\n"},{"tags":["php","mysql","locking"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":297,"score":1,"question_id":9188985,"title":"MYSQL table locking with PHP","body":"<p>I have mysql table <code>fg_stock</code>. Most of the time concurrent access is happening in this table. I used this code but it doesn't work:</p>\n\n<pre><code>&lt;?php\n    mysql_query(\"LOCK TABLES fg_stock READ\");\n\n    $select=mysql_query(\"SELECT stock FROM fg_stock WHERE Item='$item'\");\n\n    while($res=mysql_fetch_array($select))\n    {\n        $stock=$res['stock'];\n        $close_stock=$stock+$qty_in;\n        $update=mysql_query(\"UPDATE  fg_stock SET stock='$close_stock' WHERE Item='$item' LIMIT 1\");\n    }\n\n    mysql_query(\"UNLOCK TABLES\");    \n?&gt;\n</code></pre>\n\n<p>Is this okay?</p>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13215560,"title":"Why does my query to array return an array of objects in PHP?","body":"<p>I'm trying to simply run a query and get the results in an array:</p>\n\n<pre><code>function run_query($query)\n{\n    $out = '';\n    $db = new PDO(\"mysql:host=localhost;dbname=test\",\"test\",\"test\");\n    $out = $db-&gt;query($query)-&gt;fetchAll(PDO::FETCH_OBJ);\n    return $out;\n}\n</code></pre>\n\n<p>And on the other end:</p>\n\n<pre><code>$l_o_array = $php_functions-&gt;run_query('SHOW TABLES');\n$temp = implode(',', $l_o_array);\n</code></pre>\n\n<blockquote>\n  <p>Result: Catchable fatal error: Object of class stdClass could not be converted to string</p>\n</blockquote>\n\n<p>I assume this is because I use <code>FETCH_OBJ</code>, but what do I use to just get an array of strings?</p>\n"},{"tags":["mysql","linux","apache","mysql.sock"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":54,"score":4,"question_id":13215373,"title":"MySQL suddenly stopped LAMP stack","body":"<p>I have been using the LAMP stack on a Ubuntu setup.</p>\n\n<p>It has been working fine, set up multiple databases everything is going fine, and then suddenly this morning I started getting database errors from the webpage I was using, then trying to access PHPMyAdmin got:</p>\n\n<pre><code>error #2002 Cannot log in to the MySQL server\n</code></pre>\n\n<p>I go into the bash prompt and try to log-in as the root user see whats up I get a similar error:</p>\n\n<pre><code>ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (111) \n</code></pre>\n\n<p>I checked that the mysql.sock file existed which it does, in the specified path in the error above.  Permissions where all good, and owned by mysql.  I reset the permissions just in case and still get the same error.</p>\n\n<p>Here is the file as seen from BASH:</p>\n\n<pre><code>srwxrwxrwx 1 mysql mysql 0 Oct 21 05:10 mysqld.sock\n</code></pre>\n\n<p>I thought I would just restart the service, but get the same error when trying to stop, start or restart the service.</p>\n\n<p>This really baffled me, I am no expert with linux or anything, but don't understand how this can suddenly happen when I didn't change any of the config settings, and it was running perfectly fine for the last few months.</p>\n\n<p>I tried restarting Apache, and got the error:</p>\n\n<pre><code>apache2: bad user name ${APACHE_RUN_USER}\n</code></pre>\n\n<p>I don't think that is related to the MySQL stuff but thought it could be involved.  The Apache error seems to more be with the set-up but knowing my luck being lazy has caused my to overlook simple things that has caused it all to come crashing down.</p>\n\n<p>Any help on how to fix the problem, and more importantly prevent this occurrence the future would be greatly appreciated.</p>\n\n<p>I have tried most things that were returned by a basic Google search, and a look around here.  I have not yet tried deleting and recreating the sock file, but most other things so far have not worked.</p>\n\n<p>EDIT:</p>\n\n<p>I just wanted to add that the Apache server is still running fine, nothing wrong there even though I do get the error when trying to stop and restart it.  Pages that don't rely on MySQL still load without issue.</p>\n\n<p>I have also tried killing mysql processes through searching the PIDs and also as suggested below killall mysqld (and also killall mysql just for kicks).  No processes found through these attempts.</p>\n\n<p>I don't know if it is relevant or not, but I can't open (in vim) or view the mysqld.sock file (permission denied) even when using the superuser.</p>\n"},{"tags":["mysql","windows","iis","tuning"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2128,"score":0,"question_id":6833397,"title":"Recommended MySQL tuning utility for Windows","body":"<p>I have been using MySQL Tuner (http://mysqltuner.com) on Linux for a while and am quite comfortable with it. Now, for whichever reason, we have had to start hosting other websites on IIS. Is there a similar tuning utility that may recommend config changes to MySQL on Windows Server 2008?</p>\n\n<p>Kind regards</p>\n"},{"tags":["php","mysql","query","pdo"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":24,"score":3,"question_id":13215466,"title":"Changed connection page to PDO and got mysql_error()","body":"<p>Was going over my code to turn all my queies into prepared queries (PDO). I changed my connection page accordingly. As I was cleaning up my functions page I came across the error <code>mysql_error() expects parameter 1 to be resource, integer given</code> which referred to my email function </p>\n\n<pre><code>email_exists($email){\n    $query1 = mysql_query(\"SELECT COUNT(user_id) FROM tempusers WHERE \n    `email` = '$email'\") OR die(mysql_error(0));\n    $email = sanitize($email);\n\n    return (mysql_result($query1,0)==1)? true : false;\n}\n</code></pre>\n\n<p>Because it is a function page meaning I can't call on the variables in my connection page coupled with the fact I'm still stuck in the old query ways I'm having a hard time fixing this query. I'd appreciate any ideas on the process of making this query work as well as any tips in general. </p>\n"},{"tags":["mysql","localhost","expressionengine"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":68,"score":4,"question_id":13215042,"title":"ExpressionEngine Installation Issues: Database Connection Error on Localhost","body":"<p>Running into an odd issue with a getting a successful localhost install of ExpressionEngine 2.5.3.</p>\n\n<p>I am able to run the ExpressionEngine Installation and Update Wizard where server settings, database setting and admin account information is entered. So the Apache side is working as expected, or so I assume.</p>\n\n<p>The issue crops up when I click on the Install ExpressionEngine button — the point where the installer starts working it's magic — get this error:</p>\n\n<pre><code>A Database Error Occurred\nUnable to connect to your database server using the provided settings.\nFilename: controllers/wizard.php\nLine Number: 1532\n</code></pre>\n\n<p>For the SQL Server Address, Username and Password, I am using the same values I have used in the past: localhost for the server address, root for the username and root for the password.</p>\n\n<p>Those credentials work when used with Sequel Pro 0.9.9.1.</p>\n\n<p>Permissions on config.php and database.php — both empty files — are set to 666, as suggested by the ExpressionEngine installation documentation.  </p>\n\n<p>I am trying this on a MacBook Air running 10.8.2 with the built-in Apache and MySQL running via XAMPP. I am using VirtualHost X to so <a href=\"http://baseline.loc/\" rel=\"nofollow\">http://baseline.loc/</a> points to baseline.loc in my Sites folder. There are no other instances of Apache or MySQL running.</p>\n\n<p>I am not well versed debugging server issues but I am comfortable working in the terminal. </p>\n\n<p>Any ideas what I should be looking at to figure out why this usually basic stage of a new project has become a stumbling block?</p>\n"},{"tags":["mysql","phpmyadmin"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13215396,"title":"Trigger to Calculate Total Cost from Units and Price","body":"<p>I'm enjoying all that MySQL can do.  I want to learn how I can have a MySQL Trigger to update the Total Cost of a MySQL column where UNITS * PRICE will (of course) equal total cost.</p>\n\n<p>INVOICE TABLE includes (\nPrice,\nUnits,\nTotal Cost)</p>\n\n<pre><code>    CREATE TRIGGER TRG_TOTAL_COST \n    AFTER INSERT ON INVOICE\n    FOR EACH ROW \n    BEGIN \n    --1) Get the TOTAL\n    SELECT TOTAL_COST from INVOICE\n    --2) Compute total\n    TOTAL_COST= UNITS * \n    PRICE; \n    END;\n</code></pre>\n"},{"tags":["mysql","store","credentials"],"answer_count":6,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":135,"score":0,"question_id":13037331,"title":"How to organize user credential in DB?","body":"<p>What would be the best approach to storing user credentials in MySQL database.\nI mean structure, not the data (hash vs clean text).</p>\n\n<p>I have site where we got</p>\n\n<pre><code>Root Admin (1)\n\nClient Admin (1) \nClient Sub-Admins (N)\n\nEmployer Admin (N)\nEmployer Sub-Admins (N)\n</code></pre>\n\n<p>Above users login at back end page</p>\n\n<pre><code>Users (N)\n</code></pre>\n\n<p>Users login at front end of the site</p>\n\n<p>N - means unlimited</p>\n\n<p>Guess my question is should i put all admins in same table? However employers are not so trusted as Client Admins.</p>\n\n<p>If i put admins in different tables, how i do authentication in PHP? Take data from both tables and merge into array then look in array if user exists?</p>\n"},{"tags":["mysql","database-design"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13214880,"title":"How to force category to products relationship in mysql tables","body":"<p>I am designing a database, where I want to accomplish this sitaution:\nI have a Category table, and Products table.\nI want to make it impossible to add a product without an existing category assigned to it (I believe I did that with the FK on the Products table).\nI want to force DELETE on a Category, to DELETE all the children (products) assigned to that category.\nI DONT want a category to be deleted, if/when ALL the products belonging to it are deleted.</p>\n\n<p>Currently, what I've come up with is this:\n<a href=\"http://codepad.org/eSGqtyOs\" rel=\"nofollow\">http://codepad.org/eSGqtyOs</a></p>\n\n<p>I am unsure, one guy says the FK on the Categories table, will prevent me from adding categories without a product (catch 22..), and if I add On delete CASCADE in the product table, it will automatically delete a Category, once the last product in that category is deleted...</p>\n\n<p>Please help to get this straight and right.</p>\n\n<p>Also, please do not try to convince me to keep old categories/products not \"sold\" anymore - I have my reasons, I know the requirements I have for this system.</p>\n"},{"tags":["java","sql","mysql","jdbc"],"answer_count":8,"favorite_count":10,"up_vote_count":10,"down_vote_count":0,"view_count":9289,"score":10,"question_id":1044194,"title":"Running a .sql script using MySQL with JDBC","body":"<p>I am starting to use MySQL with JDBC.</p>\n\n<pre><code>Class.forName(\"com.mysql.jdbc.Driver\");\nconn = DriverManager.getConnection(\"jdbc:mysql:///x\", \"x\", \"x\");\nstmt = conn.createStatement();\nstmt.execute( \"CREATE TABLE amigos\" +\n            \"(\"+\n            \"id          int AUTO_INCREMENT          not null,\"+\n            \"nombre      char(20)                    not null,\"+\n            \"primary key(id)\" +\n            \")\");\n</code></pre>\n\n<p>I have 3-4 tables to create and this doesn't look good.</p>\n\n<p>Is there a way to run a .sql script from MySQL JDBC?</p>\n"},{"tags":["php","mysql","whmcs"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13215284,"title":"whmcs select two custom field values per one client php mysql","body":"<p>I'm trying to select some user data from a client table and some custom field values from another. My problem seems to be looping through the results. I keep getting duplicate client rows per one custom value field.</p>\n\n<p>this is the SQL query to get the clients address details and the correct values per client from a different table <code>tblcustomfieldvalues</code>.</p>\n\n<pre><code>SELECT\n   tblhosting.userid,\n   tblclients.id,\n   tblclients.firstname,\n   tblclients.city,\n   tblclients.state,\n   tblclients.country,\n   tblclients.postcode,\n   tblclients.companyname,\n   tblclients.ip,\n   tblcustomfields.id,\n   tblcustomfields.fieldname,\n   tblcustomfieldsvalues.fieldid,\n   tblcustomfieldsvalues.value \nFROM tblhosting,tblclients,tblcustomfields,tblcustomfieldsvalues\nWHERE tblclients.id IS NOT NULL \nAND tblclients.id = tblhosting.userid \nAND tblcustomfields.id=tblcustomfieldsvalues.fieldid \nAND tblcustomfieldsvalues.relid=tblhosting.id\nAND tblcustomfieldsvalues.fieldid between 291 and 292\n</code></pre>\n\n<p>My problem is how to get the two row values from <code>tblcustomfieldsvalues</code> for each client and the <code>tblclients</code> address and so on.</p>\n\n<p>I've tried splitting the query and using while and forech loops but keep getting duplicate values from the clients table. or only one customfieldvalue per client.</p>\n"},{"tags":["php","mysql","search","search-engine"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13215262,"title":"How to add more options to the LIKE query","body":"<p>Sorry about the confusing title, I am newbie and have no idea what to call my problem. \nI am building (well..trying) to create a business listing website and I found this search script, which gets results from  table. So, I pasted this, tried it and it works, but only searches one field at a time, I can't search two fields at the same time. only data from field: \"company_name\" is retuned. But, I need to make this  flexible and append it to search from field name 'categories' so, I in short I need  PHP to search two rows i.e. \n'company_name' &amp; 'categories' field. </p>\n\n<p>Here is the script, for which I don't know how to add the additional syntax for. </p>\n\n<pre><code>       $keywords = preg_split('/[\\s]+/',$keywords); \n       $total_keywords = count($keywords); \n\n         foreach($keywords as $key=&gt;$keyword) {\n        $where .= \"`company_name`  LIKE  '%$keyword%'   \";\n        if($key != ($total_keywords - 1)) {\n        $where .= \" AND \";\n\n    }\n</code></pre>\n\n<p>the problem is in here: <code>$where .= \"</code>company_name<code>LIKE  '%$keyword%'   \";</code></p>\n\n<p>if you need to see the whole script here it is. </p>\n\n<pre><code>        function search_clients($keywords){\n\n$returned_results = array();\n$where = \"\";\n\n$keywords = preg_split('/[\\s]+/',$keywords);    \n$total_keywords = count($keywords); \n\nforeach($keywords as $key=&gt;$keyword) {\n    $where .= \"`company_name`  LIKE  '%$keyword%'   \";\n    if($key != ($total_keywords - 1)) {\n        $where .= \" AND \";\n\n    }\n}\n\n$results = \"SELECT `company_name`, LEFT(`company_details`,150)\n    as `company_details`, `category` FROM `clients`\n    WHERE $where\";\n$results_num = ($results = mysql_query($results)) ?  mysql_num_rows($results) : 0 ;\n\n\nif($results_num === 0) {\n    return false; \n} else {\n\n    while($results_row = mysql_fetch_assoc($results)) {\n\n    $returned_results[] = array(\n\n    'company_name'  =&gt; $results_row['company_name'],\n    'company_details'  =&gt; $results_row['company_details'],\n\n\n\n    );\n}\n\nreturn $returned_results;\n\n}\n\n\n}\n</code></pre>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13205375,"title":"LEFT JOIN 4 tables","body":"<p>The totals, indirect, and direct tables and pulling data from \"summary\".  The last table \"int_data\" is pulling from \"aspect_summary\" ... I can't get it to play nice with the rest of them.  My queries are only giving me 1 row of results and I can't figure out why. Suggestions? </p>\n\n<pre><code>SELECT user, \namin,\nCOALESCE(sum(tavg*tcomp)) AS d_task_min, \nCOALESCE(indirect.iminutes,0) AS i_task_min, \nCOALESCE(((amin)+(indirect.iminutes)/60),0) AS FAKE_d_call_hour,\nCOALESCE(tcomp*tavg,0) + COALESCE(indirect.iminutes,0) AS totals,\nhrs_earned, \nhrs_equiv, \nminutes, \ndiff,\nCOALESCE(SUM(tot_rec_tasks)-sum(tot_i_tasks),0) AS tot_d_tasks,\nCOALESCE(tot_i_tasks,0) AS tot_i_tasks,\nint_id,\n\nROUND(COALESCE((((amin-(sum(indirect.iminutes)))/60)+ (sum(indirect.iminutes)/60)),0),2) AS ttime2, \nROUND(COALESCE((hrs_earned / (((amin-(sum(indirect.iminutes)))/60)+ (sum(indirect.iminutes)/60)))*100,0),2) AS prod, \nROUND((COALESCE((hrs_earned / hrs_equiv),0)*100),2) AS eff,\nROUND(COALESCE(hrs_earned/(((amin-(sum(indirect.iminutes)))/60)+ (sum(indirect.iminutes)/60)),0)*100,2) AS util,\namin AS aspect_time\n\nFROM\n(\nSELECT \nU.user_name AS user, \nU.user_id AS tuser_id,\nM.minutes AS tminutes, \nta.task_type AS ttasktype,\nta.task_average as tavg,\ntc.completed as tcomp,\nROUND(SUM((((TA.task_average)*TC.completed))/60),2) AS ttime,\nROUND(SUM((((TA.task_average)*TC.completed))/60),2) AS hrs_earned, \nROUND(SUM(((TA.task_average/6)*TC.completed)),2) AS hrs_equiv,\nROUND(SUM(M.minutes/60),2) AS minutes, \nROUND((SUM(M.minutes)/60),2)-ROUND(SUM((TA.task_average*TC.completed)/60),2) AS diff,\nSUM(TC.completed) AS tot_rec_tasks\n\n    FROM summary S\n    JOIN users U \n    ON U.user_id = S.user_id\n    JOIN minutes M \n    ON M.minutes_id = S.minutes_id\n    JOIN tcompleted TC \n    ON TC.tcompleted_id = S.tcompleted_id\n    JOIN tasks TA \n    ON TA.task_id = S.task_id\n    JOIN hour_interval H \n    ON H.hourinterval_id = S.hourinterval_id \n    AND DATE(submit_date) = curdate()\n    AND TIME(submit_date) BETWEEN '00:00:00' and '23:59:59'\n    GROUP BY tuser_id) AS total\nLEFT JOIN\n    (SELECT U.user_id AS iuser_id, M.minutes AS iminutes, tc.completed AS tot_i_tasks\n    FROM summary S\n    JOIN users U \n    ON U.user_id = S.user_id\n    JOIN minutes M \n    ON M.minutes_id = S.minutes_id\n    JOIN tasks TA \n    ON TA.task_id = S.task_id\n    JOIN tcompleted TC \n    ON TC.tcompleted_id = S.tcompleted_id\n    WHERE TA.task_type='indirect'\n    AND DATE(submit_date) = curdate()\n    AND TIME(submit_date) BETWEEN '00:00:00' and '23:59:59'\n    GROUP BY iuser_id) AS indirect\nON tuser_id = iuser_id\nLEFT JOIN\n    (SELECT U.user_id AS duser_id\n    FROM summary S\n    JOIN users U \n    ON U.user_id = S.user_id\n    JOIN minutes M \n    ON M.minutes_id = S.minutes_id\n    JOIN tcompleted TC \n    ON TC.tcompleted_id = S.tcompleted_id\n    JOIN tasks TA \n    ON TA.task_id = S.task_id\n    WHERE TA.task_type='direct'\n    AND DATE(submit_date) = curdate()\n    AND TIME(submit_date) BETWEEN '00:00:00' and '23:59:59'\n    GROUP BY duser_id) AS direct\nON tuser_id = duser_id\nLEFT JOIN\n    (Select U.user_id AS int_id, SUM(M.minutes) AS amin\n    FROM aspect_summary A\n    JOIN users U ON U.user_id = A.user_id\n    JOIN minutes M ON M.minutes_id = A.minutes_id\n    JOIN hour_interval H ON H.hourinterval_id = A.hourinterval_id\n    AND DATE(submit_date) = curdate()\n    AND TIME(submit_date) BETWEEN '00:00:00' and '23:59:59'\n    GROUP BY int_id) AS int_data\nON tuser_id = int_id \n</code></pre>\n"},{"tags":["php","mysql","cakephp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13215242,"title":"Not getting data returns from DB in CakePHP","body":"<p>I am having an issue where I can not get any data returned if I do a <code>$this-&gt;Model-&gt;find('all')</code> if I use a more specific search for data such as <code>$this-&gt;Model-&gt;find('all', array('conditions' =&gt; array('Model.column LIKE' =&gt; $search))</code> I can get some values returned for that search but not all that are able to be searched. Example if I do: <code>$this-&gt;Model-&gt;find('all', array('conditions' =&gt; array('Model.column LIKE' =&gt; 1))</code> I get a return of all of the rows that contain the specified column with a value of one. If I change it to 2 then I will get a null return even though there are <code>Model.column</code> columns with 2 for the value. This is really making me go insane at the moment since I have built quite a few sites on cake and MySQL is returning no errors in the log. Here is the code I am working with as well as my db setup:</p>\n\n<p>MySQL Table:</p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS `tbl_cleps_subjects` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `subject` int(1) NOT NULL,\n  `credits` int(1) NOT NULL,\n  `course` varchar(255) NOT NULL,\n  `extract` text NOT NULL,\n  `factsheet` varchar(255) NOT NULL,\n  `study_guide` text NOT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=34 ;\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>class ClepsSubject extends AppModel {\n\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>class ClepsController extends AppController {\n\n    public $uses = array('ClepsSubject');\n\n    public function index() {\n        $this-&gt;set('return', $this-&gt;ClepsSubject-&gt;find('all'));\n    }\n\n}\n</code></pre>\n\n<p>Controller View:</p>\n\n<pre><code>&lt;?php debug($return); ?&gt; \n</code></pre>\n\n<p>Like I said im banging my head against the wall on this one any help would be greatly appreciated.</p>\n"},{"tags":["php","jquery","mysql","fancybox"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13215203,"title":"FancyBox and autoloading a file from upon fancybox exit","body":"<p>im trying to write a code where a text will appear inside a div that can be seen outside the fancybox, after a user clicks one of the options found inside a fancybox(upon choosing an option the fancybox will close)</p>\n\n<p>here is my code</p>\n\n<p>index.php</p>\n\n<pre><code>&lt;?php\nsession_start();\ninclude('connect.php');\ninclude('header.php');\n?&gt;\n\n&lt;body&gt;\n&lt;a href=\"selectfield.php\" id=\"selectfield\" class=\"fancybox.iframe\" rel=\"group\"&gt;Field&lt;/a&gt;: \n&lt;span id=\"selectedfield_label\"&gt;&lt;/span&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>selectfield.php</p>\n\n<pre><code>&lt;?php\ninclude('connect.php');\ninclude('header.php');\n?&gt;\n\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div class=\"row\"&gt;\n&lt;div class=\"span12\"&gt;\n&lt;?php\n$searchcol = mysql_query(\"SELECT * from searchcolumn\");\nwhile($search = mysql_fetch_array($searchcol)){ ?&gt;\n&lt;div class=\"span2\" style=\"font-size:10px\"&gt;\n&lt;a href=\"#\" id=\"&lt;?php echo $search['scol_id']; ?&gt;\" class=\"field\" name=\"&lt;?php echo $search['scol_id']; ?&gt;\"&gt;&lt;?php echo $search['advsearch_name']; ?&gt;&lt;/a&gt;\n&lt;/div&gt;\n&lt;?php\n}\n?&gt;\n&lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>script.js</p>\n\n<pre><code>$(document).ready(function(){\n\n$(\"#selectfield\").fancybox();\n$(\"#selectcondition\").fancybox();\n\n$(\".field\").click(function(e) {\n    var id = this.id;\n    var name = $(\"#\" + id).attr(\"name\");\n    var datastr='field='+name;\n        $.ajax({\n            url:'storefield.php',\n            type:\"POST\",\n            data:datastr,\n            dataType:\"json\",\n            success:function(result){\n                $(\"#selectedfield_label\").html(result['field']['fieldname']);\n                parent.$.fancybox.close(true);\n                }//success          \n        });//ajax   \n    });     \n});\n</code></pre>\n\n<p>storefield.php</p>\n\n<pre><code>&lt;?php\nsession_start();\ninclude('connect.php');\n$scol_id=$_POST['field'];\n\n$query = mysql_query(\"SELECT * from searchcolumn where scol_id = $scol_id\");\n$a = mysql_fetch_array($query);\n\n$_SESSION['fieldname'] = $a['advsearch_name'];\n$_SESSION['col'] = $a['advsearch_col'];\n$_SESSION['type'] = $a['advsearch_type'];\n\n$result['field']['fieldname'] = $_SESSION['fieldname'];\n$result['field']['col'] = $_SESSION['col'];\n$result['field']['type'] = $_SESSION['type'];\n\necho json_encode($result);\n?&gt;\n</code></pre>\n\n<p>i was able to get the fancybox to close upon choosing an option but i cant get its name($result['field']['fieldname']) to appear inside a div outside my fancybox</p>\n\n<p>ive already tried different combinations but i cant get it to work</p>\n\n<p>thanks in advance</p>\n\n<p>here's a sample sql data</p>\n\n<pre><code>INSERT INTO searchcolumn (advsearch_name,advsearch_col,advsearch_type) VALUES ('Title','title','varchar');\nINSERT INTO searchcolumn (advsearch_name,advsearch_col,advsearch_type) VALUES ('Last Name','ln','varchar');\nINSERT INTO searchcolumn (advsearch_name,advsearch_col,advsearch_type) VALUES ('First Name','fn','varchar');\nINSERT INTO searchcolumn (advsearch_name,advsearch_col,advsearch_type) VALUES ('Middle Name','mn','varchar');\nINSERT INTO searchcolumn (advsearch_name,advsearch_col,advsearch_type) VALUES ('Gender','gender','varchar');\nINSERT INTO searchcolumn (advsearch_name,advsearch_col,advsearch_type) VALUES ('Age','age','varchar');\nINSERT INTO searchcolumn (advsearch_name,advsearch_col,advsearch_type) VALUES ('Birthdate','bday','date');\n</code></pre>\n"},{"tags":["php","mysql","string","date"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13215062,"title":"Converting this string to date format for saving to mysql","body":"<p>I'm moving data from a text file to a database. The text file has dates in the format 'Oct 29' and 'Nov 1' (Oct and Nov are the only 2 months in this file). I'd saving the date into a mysql database. How can I convert this format to a date field (assuming year 2012) without doing it manually?</p>\n"},{"tags":["mysql","sql","database","structure","ranking"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13215230,"title":"Ranking Script - Database Structure","body":"<p>For like 2 last months I was thinking about makin ranking site for an fps game. Suddenly I had no time to start the project, so it was waiting in my mind for better times :)\nNow I would like to start it and I consider what type of database I should do for it.\nIn my opinion the relation one, should be the best, but I am not 100% is it possible to do it like that, since I saw like 2-3 ranking systems where the tables had no relations at all.</p>\n\n<p>In fact I did, such structure for the database:\n<a href=\"http://postimage.org/image/n1lackjfz/\" rel=\"nofollow\">http://postimage.org/image/n1lackjfz/</a> (no dots means 1:1, white dot-black dot means 1:n)</p>\n\n<p>I would really appreciate, if you could give me some advices. If is okey or I should forget about InnoDB one and just make an simple MyISAM engine based database.</p>\n"},{"tags":["mysql","email","ssl","ubuntu","postfix"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":752,"score":0,"question_id":5667870,"title":"Ubuntu/Thunderbird: ssl_error_rx_record_too_long","body":"<p>I installed Postfix, Courier and a bunch of other e-mail related services on my Ubuntu server. The data is fetched from a MySQL database. But when I try to connect through Thunderbird, I get this error:\n<code>ssl_error_rx_record_too_long</code>\nWhy :(? How can this be fixed??</p>\n"},{"tags":["mysql","linux"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":11327062,"title":"MySQL and letter case","body":"<p>I have errors when i try to query my MySQL tables in lowercase :</p>\n\n<pre><code>mysql&gt; select * from selection_vc limit 1;\nERROR 1146 (42S02): Table 'mydb.selection_vc' doesn't exist\n</code></pre>\n\n<p>When I use uppercase, everything is OK :</p>\n\n<pre><code>mysql&gt; select * from SELECTION_VC limit 1;\n+-------------+-------------+-------------+--------+\n| CAMPAIGN_ID | CONTACT_ID  | COLUMN_NAME | MONTH  |\n+-------------+-------------+-------------+--------+\n| ALCA-32515W | ALCA-2X08DX | A           | 201207 |\n+-------------+-------------+-------------+--------+\n1 row in set (0.00 sec)\n</code></pre>\n\n<p>I have this error(feature?) only on table names, column names can be accessed either in lowercase or uppercase. This occurs only in the database I have installed on Linux, the one on my Mac does not have this issue.</p>\n\n<p>Did i miss something in MySQL configuration or is this a bug ?</p>\n"},{"tags":["mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13214887,"title":"mySQL path change","body":"<p>I'm was trying to change the path for mysql so I can merely call mysql in Terminal to start working with my databases.</p>\n\n<p>However, although I edited my ~/.profile and inserted PATH=/usr/local/mysql/bin:$PATH in there, I still had no luck with calling mysql directly.</p>\n\n<p>Now later on, I deleted everything in the ~/.profile and ~/.bash_profile files.  Yet when I call ECHO $PATH, it shows /usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/mysql/bin.</p>\n\n<p>Why could this be happening when I removed everything from my ~/.profile and ~/.bash_profile?  Also, if it's showing the /usr/local/mysql/bin in my path, why am I still unable to get into MySQL by typing mysql into the Terminal prompt?  Also how can someone set up MySQL to be accessed via Mac OSX Terminal instead of through XAMPP (that's how I got mySQL).</p>\n\n<p>Help would be greatly appreciated.  Someone should really make a semi-decent MySQL manual too...the online documentation doesn't help much at all.</p>\n\n<p>Thanks!</p>\n"},{"tags":["php","mysql","post"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13214330,"title":"Adding to database with multiple text boxes","body":"<p>What I am trying to do with this script is allow users to update a url for their websites, and since each user isn't going to have the same amount of websites is is hard for me to just add <code>$_POST['website']</code> for each of these.</p>\n\n<p>Here is the script</p>\n\n<pre><code>&lt;?php\ninclude(\"config.php\");\ninclude(\"header.php\");\ninclude(\"functions.php\");\n\nif(!isset($_SESSION['username']) &amp;&amp; !isset($_SESSION['password'])){\n    header(\"Location: pubs.php\");\n    }\n\n$getmember = mysql_query(\"SELECT * FROM `publishers` WHERE username = '\".$_SESSION['username'].\"'\");\n$info = mysql_fetch_array($getmember);\n$getsites = mysql_query(\"SELECT * FROM `websites` WHERE publisher = '\".$info['username'].\"'\");\n\n$postback = $_POST['website'];\n$webname = $_POST['webid'];\nif($_POST['submit']){\nforeach ( $_POST['website'] as $key =&gt; $value )\n{\n $update = mysql_query(\"UPDATE `websites` SET `postback` = '\".mysql_real_escape_string($postback[$value]).\"' WHERE id = '$webname'\");\n}\n}\n\n\nprint\"\n&lt;div id='center'&gt;\n&lt;span id='tools_lander'&gt;&lt;a href='export.php'&gt;Export Campaigns&lt;/a&gt;&lt;/span&gt;\n&lt;div id='calendar_holder'&gt;\n&lt;h3&gt;Please define a postback for each of your websites below. The following variables should be used when creating your postback.&lt;br /&gt;\ncid = Campaign ID&lt;br /&gt;\nsid = Sub ID&lt;br /&gt;\nrate = Campaign Rate&lt;br /&gt;\nstatus = Status of Lead. 1 means payable 2 mean reversed&lt;br /&gt;\nA sample postback URL would be &lt;br /&gt;\nhttp://www.example.com/postback.php?cid=#cid&amp;sid=#sid&amp;rate=#rate&amp;status=#status&lt;/h3&gt;\n&lt;table class='balances' align='center'&gt;\n&lt;form method='POST' action=''&gt;\";\n\nwhile($website = mysql_fetch_array($getsites)){\nprint\"\n&lt;tr&gt;\n&lt;input type ='hidden' name='webid' value='\".$website['id'].\"' /&gt;\n&lt;td style='font-weight:bold;'&gt;\".$website['name'].\"'s Postback:&lt;/td&gt;\n&lt;td&gt;&lt;input type='text' style='width:400px;' name='website[]' value='\".$website['postback'].\"' /&gt;&lt;/td&gt;\n&lt;/tr&gt;\";\n}\nprint\"\n&lt;td style='float:right;position:relative;left:150px;'&gt;&lt;input type='submit' name='submit' style='font-size:15px;height:30px;width:100px;' value='Submit' /&gt;&lt;/td&gt;\n&lt;/form&gt;\n&lt;/table&gt;\n&lt;/div&gt;\";\n\ninclude(\"footer.php\");\n?&gt;\n</code></pre>\n\n<p>What I am attempting to do insert the what is inputted in the text boxes to their corresponding websites, and I cannot think of any other way to do it, and this obviously does not works and returns a notice stating <code>Array to string conversion</code>\nIf there is a more logical way to do this please let me know.</p>\n\n<p><strong>UPDATE</strong>\nI added a foreach statement, but this still doesn't seem to solve the problem. It doesn't update anything in the database.</p>\n"},{"tags":["php","mysql","pdo"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":24,"score":2,"question_id":13215063,"title":"PDO prepared function issue","body":"<p>I am having trouble getting this to work I think my error is in the syntax of the prepared statement but I have tried several different methods with no luck. The reason I suspect that the error is in the prepared statement is because it will <code>echo Not a Match</code> on the page if the variables dont match but when they do match it will just give me a blank page with no errors. Here is my code maybe someone can spot the error in the mean time I will keep trying different methods.</p>\n\n<pre><code>    function setPass($conn, $userCurrent, $oldPass, $newPass, $verPass)\n\n{        \n    $stmt= $conn-&gt;prepare('SELECT `password` FROM `CLL_users` WHERE `user_name`=:userCurrent');\n    $stmt-&gt;execute(array(':userCurrent' =&gt; $userCurrent));\n    while ($pass = $stmt-&gt;fetch()){\n    $oldDbPass = $pass['password'];\n    }\n\n$new_pass = md5($newPass);\n\n    if (md5($oldPass) == ($oldDbPass) &amp;&amp; ($newPass) == ($verPass)) {\ntry{\n        $stmt= $conn-&gt;prepare('UPDATE `CLL_users` SET `password`=:newPass WHERE `user_name`=:userCurrent');\n        $stmt-&gt;execute(array(':newpass' =&gt; $new_pass, ':userCurrent' =&gt; $userCurrent));\n} catch (PDOException $e){\n    echo 'Connection failed: ' . $e-&gt;getMessage();\n}\n\n        echo \"Match\";\n    } else {\n        echo \"Not a Match\";\n\n    }\n\n}\n</code></pre>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":13215072,"title":"How to find data from last week in MySQL","body":"<p>I want to display data from</p>\n\n<p>Q1: only last week of each student.</p>\n\n<p>Q2: only last month of each student.</p>\n\n<p>How can I achieve this?</p>\n\n<p><a href=\"http://sqlfiddle.com/#!2/f1fbb/3\" rel=\"nofollow\">DEMO for week</a></p>\n\n<p><a href=\"http://sqlfiddle.com/#!2/f1fbb/4\" rel=\"nofollow\">DEMO for month</a></p>\n\n<pre><code>CREATE TABLE `hw_homework` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `studentid` int(10) NOT NULL,\n  `subjectid` int(10) NOT NULL,\n  `assignment_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,\n  `teacherid` int(10) NOT NULL,\n  `date` datetime NOT NULL,\n  PRIMARY KEY (`id`)\n) ;\n\nINSERT INTO `hw_homework` (`id`, `studentid`, `subjectid`, `assignment_name`, `teacherid`, \n`date`) VALUES\n(1, 29, 5, '5E', 20, '2012-11-04 13:58:40'),\n(2, 15, 5, '32B', 20, '2012-11-04 13:59:54'),\n(3, 29, 4, 'Q2A', 20, '2012-10-30 17:53:46'),\n(4, 29, 11, '6E', 20, '2012-11-02 20:06:39'),\n(5, 29, 11, 'C15', 20, '2012-10-16 20:06:30'),\n(6, 15, 11, '7A', 20, '2012-09-19 20:08:05'),\n(7, 29, 5, '3B', 20, '2012-09-14 20:08:12'),\n(8, 29, 13, '6E', 32, '2012-10-29 20:23:46'),\n(9, 29, 11, '7E', 18, '2012-10-30 14:35:14'),\n(10, 2, 5, '5E', 20, '2012-10-21 13:58:40'),\n(11, 2, 5, '5E', 20, '2012-10-30 13:58:40'),\n(12, 2, 5, '5E', 20, '2012-10-31 13:58:40');\n</code></pre>\n\n<p>This does not work for last week. It shows this week result.</p>\n\n<pre><code>SELECT  studentID, \n        DATE_FORMAT(`date`, '%U') `WeekNo`,\n        COUNT(studentID) totalMissed\nFROM hw_homework he\nWHERE DATE_FORMAT(`date`, '%U') = (SELECT MAX(DATE_FORMAT(NOW(), '%U')) FROM hw_homework hi WHERE hi.studentID = he.studentID)\n-- AND studentID = ''\nGROUP BY studentID, DATE_FORMAT(`date`, '%U')\n</code></pre>\n\n<p>This does not work for last month. This shows this month result.</p>\n\n<pre><code>SELECT  studentID, \n        DATE_FORMAT(`date`, '%M') `Month`,\n        COUNT(studentID) totalMissed\nFROM hw_homework he\nWHERE DATE_FORMAT(`date`, '%M') = (SELECT MAX(DATE_FORMAT(NOW(), '%M')) FROM hw_homework hi WHERE hi.studentID = he.studentID)\n-- AND studentID = ''\nGROUP BY studentID, DATE_FORMAT(`date`, '%M')\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["php","mysql","pdo","limit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13214744,"title":"Force Limit on User MySQL Query","body":"<p>So I have an area where people can write their own query against my database, but I want to limit the returned results (much like PhpMyAdmin).</p>\n\n<p>So I need to check <code>$_POST['query']</code> to see if has a limit statement, if it does, make sure it's under 30, say.  If there is no limit, I need to add it.</p>\n\n<p>How would I do this?</p>\n"},{"tags":["mysql","ruby-on-rails-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13214704,"title":"set a timeframe on model attribute rails 3","body":"<p>I have an app that allows you to upload a recipe to the db, as part of the app i would like to have a \"Featured Recipe\" that is called randomly from the recipe db. I am using this method to call a random record</p>\n\n<pre><code>   @featurerecipe = Recipe.offset(rand(Recipe.count)).limit(1)\n</code></pre>\n\n<p>As expected when i refresh the page the record changes, however I would like the random record to stay in place for say 24 hours, even when the page is refreshed. I'm looking for some advice on how to go about this or perhaps someone else has done this in a project of their own? I was thinking that you could have a db column called feature and then set a \"true\" value to it, set everything else as false and then somewhere a loop needs to occur to check the time spent at value \"true\", then after 24 hours pick another random recipe? </p>\n\n<p>I may be well off here, any help appreciated</p>\n"},{"tags":["php","mysql","image","blob"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13214980,"title":"How to echo an image at a certain id in MySql table?","body":"<p>I am having a little trouble trying to display the image at ID: 2 in my store table... </p>\n\n<p>here's what i've come up with (p.s. the reason I set $id = 2 is because I plan on making this a loop where I will increment that value to print other images)</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Gallery&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n&lt;?php\n\nmysql_connect   ...\nmysql_select_db   ...\n\n$id = 2;\n$image = mysql_query(\"SELECT * FROM store WHERE id=$id\");\n$image = mysql_fetch_assoc($image);\n$image = $image['image'];\necho $image;\n\n\n?&gt;\n\n\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["mysql","sql-order-by"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13214653,"title":"Sort by the number of words in a MySQL field","body":"<p>I would like to sort a result from a MySQL query by the number of words in a specified column.</p>\n\n<p>Something like this:</p>\n\n<pre><code>SELECT bar FROM foo ORDER BY WordCountFunction(bar)\n</code></pre>\n\n<p>Is it possible?</p>\n"},{"tags":["php","mysql","ubuntu","software-distribution"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13214818,"title":"distribute php application in ubuntu software centre","body":"<p>I recently noticed that the world needs a ubuntu based POS system for SME(which is not a restaurant). I couldn't find one available. So I decided to write one for myself. I wish to share the software with rest of linux/ubuntu users.</p>\n\n<p>So does anybody know a method where by I can distribute a php application. What confuses me is:</p>\n\n<ol>\n<li>End user shouldnt be pestered while installing LAMP [ seems impossible already ]</li>\n<li>create fogger app using installer so that the application opens in a direct window instead of firefox/other browser</li>\n<li>rights/ownership decision of php files.</li>\n</ol>\n\n<p>I know its a hard question, but if this can be done, I do have skills and time to create some much needed applications.</p>\n"},{"tags":["php","mysql","sql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":63,"score":-1,"question_id":13162616,"title":"how can I fix this..in select query","body":"<p>this is a select query...</p>\n\n<pre><code>   $q = \"SELECT\n        tcs.tutor_id AS tid,\n        tcs.category_id AS cid,\n        tcs.subject_id AS sid,\n        GROUP_CONCAT( DISTINCT s.subjects SEPARATOR ', ') AS subjects,\n        t.tutor_name AS tname,\n        t.tutor_code AS tcode,\n        DATE_FORMAT(t.registration_date, '%b %D, %Y') AS date,\n        t.qualification AS qualifi,\n        GROUP_CONCAT( DISTINCT o.option_name SEPARATOR ', ') AS tutor_option,\n        timg.image_name AS img,\n        city_name AS city,\n        d.district_name AS district\n   FROM tutor_category_subject as tcs\n        INNER JOIN subject AS s ON tcs.subject_id = s.subject_id\n        INNER JOIN tutor_option AS toption ON toption.tutor_id = tcs.tutor_id\n        INNER JOIN options AS o ON toption.option_id = o.option_id\n        INNER JOIN tutors AS t ON tcs.tutor_id = t.tutor_id\n        INNER JOIN address ON address.address_id = t.address_id\n        INNER JOIN city ON city.city_id = address.city_id\n        INNER JOIN district AS d ON d.district_id = city.district_id\n        LEFT JOIN tutor_images AS timg ON timg.tutor_id = tcs.tutor_id AND timg.image_type = 'profile'\n   WHERE s.subjects LIKE '%$subject%'\n   GROUP BY tcs.tutor_id\";\n</code></pre>\n\n<p>this query is working now.. now I found a problem. it is..... so many subject may have to one particular tutor. I need to select all the subject that pertaining to a tutor with searching keyword to display with search result. In this query searching keyword is '$subject'.\nThis query only selecting subjects to the tutor similar to the given keyword. For an example if a user give a keyword like 'business' query selecting subjects to that tutor like 'business studies, business accounting., etc only'. so I need to select other subjects too through this query.. can anybody help me?</p>\n\n<p>thank you. </p>\n"},{"tags":["php","mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":54,"score":-2,"question_id":13208721,"title":"Php & MySql selection from string seperated by commas","body":"<p>I have this:</p>\n\n<pre><code>$string = \"battery,lighter,phone\";\n</code></pre>\n\n<p>I have a table <code>users</code> that has each user's tags.</p>\n\n<p>How is it possible to <code>select</code> using sql <code>where tags = $string</code> and <code>where email = '$usermail'</code> ;</p>\n\n<p>I just want to retrieve data based on <code>user email</code> and <code>user stored tags</code> that are separated by comma in the table like the above string</p>\n"},{"tags":["php","mysql","hierarchy","commenting"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":15,"score":2,"question_id":13214714,"title":"Hierarchical commenting system in threaded view: PHP and MySQL","body":"<p>I have the need to render a threaded view of a 2-levels hierarchical commenting system. The comments are stored in a database. The information about the hierarchy is given by field 'parent_id' (which is 0 for the top-level comments). I cannot change the structure of the database.\nThe present solution is by means of multiple SQL queries: </p>\n\n<ol>\n<li>an SQL query is performed to fetch all top-level comments</li>\n<li>the code loops through the top-level comments and for each of them performs an SQL query to fetch its children</li>\n</ol>\n\n<p>Now I wonder if a solution with only one SQL query to fetch all the comments as they are followed by the code suggested <a href=\"http://stackoverflow.com/questions/7673044/nested-array-third-level-is-disappearing/7673415#7673415\">here</a> to sort them by threads could be more efficient.\nAny reccomendation?</p>\n\n<p>Thanks,\nLuciano</p>\n"},{"tags":["mysql","sql","pivot","aggregate-functions"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13214601,"title":"MySQL Query: How to sum 3 different values in a column, showing total of each value in result set","body":"<p>I have a table called inventory that includes two columns as follows:</p>\n\n<p><img src=\"http://i.stack.imgur.com/ST24o.png\" alt=\"enter image description here\"></p>\n\n<p>I would like to query this table to return a result set that lists how many items of each condition I have (column headers show in example below are not wanted in result set...just show here to give clarity):</p>\n\n<p><img src=\"http://i.stack.imgur.com/Xrylg.png\" alt=\"enter image description here\"></p>\n\n<p>I guess it would look something like:</p>\n\n<pre><code>  SELECT item, sum(condition???), sum(condition???), sum(condition???) \n    FROM inventory \nGROUP BY item\n</code></pre>\n\n<p>How can I accomplish this? Thanks.</p>\n"},{"tags":["php","mysql","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13214465,"title":"Joining/Displaying Multiple Tables with Same Column Names","body":"<p>What I'm trying to do is set up a query that calls from a Database (the Chinook database in particular - <a href=\"http://chinookdatabase.codeplex.com/\" rel=\"nofollow\">http://chinookdatabase.codeplex.com/</a>)</p>\n\n<p>Now, in order to display the query output correctly, I need to join multiple tables - each that share similar column names.  With the Chinook database, there are multiple tables (Artist, Album, Genre, Media Type, Track, etc.).  Let's say I'm trying to display the contents of an Artist's Name with:</p>\n\n<pre><code>public function fetchArtistName(){\n    return $row['Name'];\n}\n</code></pre>\n\n<p>This is very ambiguous since this row would go and find the Name field for Media Type or Album Name before it finds the artist name.</p>\n\n<p>My SQL statement is as follows:</p>\n\n<pre><code>SELECT *  \nFROM track AS t  \nLEFT JOIN album al \nON t.AlbumId = al.AlbumId  \nLEFT JOIN artist ar ON al.ArtistId = ar.ArtistId  \nLEFT JOIN mediatype m ON t.MediaTypeId = m.MediaTypeId \nLIMIT 0,15; \n</code></pre>\n\n<p>Is there a way I could go about changing the table that is outputted to be like\n|  t.Name   |   al.Name   |    ar.Name    |    m.name    |</p>\n\n<p>so that I could essentially call these much easier with</p>\n\n<pre><code>public function fetchArtistName(){\n    return $row['ar.Name'];\n}\n</code></pre>\n\n<p>It has been so long since I've played with SQL and I'm really stuck.  Any help would be greatly appreciated, I've Googled and search here already.</p>\n\n<p>Thank you.</p>\n"},{"tags":["mysql","innodb"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13214496,"title":"Innodb showing incorrect count(id)","body":"<p>have a innodb table with ~3G filesize (i use innodb_file_per_table = 1), just imported from dump and ~1.3G dump file. Have no idea how many recods exist here.</p>\n\n<p>When i execute \"select count(id) from $table\" i see \"27117291\" (27,117,291 for readability).\nWhen i execute \"select count(id) from $table limit 100\" i also see \"27117291\"</p>\n\n<p>Why it is happening like this?\nIs InnoDB <em>REALLY</em> better MyISAM?!</p>\n\n<p>P.S. If i execute \"select count(id) from $table where id=73010460;\" i see \"1\".</p>\n"},{"tags":["php","mysql","database"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13214442,"title":"quering multiple tables","body":"<p>I am trying to fetch data from multiple tables depending on what is selected in a dropdown menu. My dropdown menu consists of a list of ID's (001, 002, etc). </p>\n\n<p>Once a user selects one of them, I am using AJAX to dynamically fetch data depending on what was selected. I was able to fetch a single value depending on what was selected but having problems when multiple tables are involved. </p>\n\n<p><strong>My tables are set up like this:</strong></p>\n\n<pre><code>Inventory table:\ninven_ID (primary)\ncost\ndescription\n\nOrder table:\norder_ID(primary)\norderdesc\n\nSale table:\ninven_ID\norder_ID\nquantity\nprimary(inven_ID,order_ID)\n</code></pre>\n\n<p><strong>My query is as follows:</strong></p>\n\n<pre><code>$QRY = \"SELECT \n          inven_ID, \n          order_ID, \n          cost, \n          description \n        FROM \n          Inventory, \n          Order, \n          Sale \n        WHERE Inventory.inven_ID = Sale.inven_id \n        AND Sale.order_ID = Order.order_ID \n        AND Order.order_ID ='\".$q.\"'\";\n</code></pre>\n\n<p>The <code>$q</code> represents the value from the dropdown menu (which I checked is valid). I am getting the error Column '<code>inven_ID</code>' in field list is ambiguous. Basically, when they select some order id from the drop down (say 001), it looks for <code>order_ID</code> in my Order table, and fetches the inven_ID/cost/description of that particular order ID. </p>\n\n<p>Eg. if someone ordered parts xy, yz, xyz for cost 10,20,30. </p>\n\n<pre><code>Selecting 001 would bring up:\n001 xy 10\n001 yz 20\n001 xyz 30\n</code></pre>\n\n<p>I think I am not joining tables properly since the error says its ambiguous. </p>\n\n<p>Any help on this?</p>\n\n<p>edit: yes that fixed the problem, quite obvious that I did not catch it.</p>\n"},{"tags":["javascript","jquery","mysql","ajax","handlebars.js"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1538,"score":2,"question_id":10330129,"title":"Jquery / Handlebars error message - Uncaught TypeError: Object [object Object] has no method 'match'","body":"<p>i am working on a little learning project and have run into an issue that i cant work out.</p>\n\n<p>I get the following error message on google chromes dev console :-</p>\n\n<pre><code>Uncaught TypeError: Object [object Object] has no method 'match'\nlexer.nexthandlebars-1.0.0.beta.6.js:364\nlexhandlebars-1.0.0.beta.6.js:392\nlexhandlebars-1.0.0.beta.6.js:214\nparsehandlebars-1.0.0.beta.6.js:227\nHandlebars.parsehandlebars-1.0.0.beta.6.js:507\ncompilehandlebars-1.0.0.beta.6.js:1472\n(anonymous function)handlebars-1.0.0.beta.6.js:1481\n(anonymous function)scripts.js:103\njQuery.Callbacks.firejquery.js:1046\njQuery.Callbacks.self.fireWithjquery.js:1164\ndonejquery.js:7399\njQuery.ajaxTransport.send.callback\n</code></pre>\n\n<p>Now this shows up at an error with the following code in the handlebars scrips </p>\n\n<pre><code>match = this._input.match(this.rules[rules[i]]);\nUncaught TypeError: Object [object Object] has no method 'match'\n</code></pre>\n\n<p>So what i take from this is that there must be an issue with my code and not the handlebar code even though it is in beta. </p>\n\n<p>Here is the section of code that kicked it all off.</p>\n\n<pre><code>displayJobInfo: function( e ) {\n    var self = Actors;\n\n    self.config.jobInfo.slideUp( 300 );\n    var jobnum = $(this).data( 'job_id' );\n    $.ajax({\n        data: { job_id: jobnum }\n\n    }).then(function( results ) {\n        self.config.jobInfo.html( self.config.JobInfoTemplate( { jobs: results, job_id: jobnum }) ).slideDown(300);\n    });\n    console.log($(this).data( 'job_id' ));\n    e.preventDefault();\n}\n</code></pre>\n\n<p>I have spent hours trying to work this one out myself and have got almost the same section of code working in another part of my site.</p>\n\n<p>Little  bit of background - i am using php to pull a database from mysql and then to query the database based on as users input and jquery to overlay the fields back onto the page.</p>\n"},{"tags":["jquery","mysql","ajax","codeigniter","laravel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13203711,"title":"Implementing non framework code into a framework such as laravel or codeigniter","body":"<p>I'm trying to implement <strong>AJAX Booking Calendar Pro</strong> into my Laravel application. <em>(It was purchased from CodeCanyon)</em> I've implemented most of the plugin, I just need to figure out how to connect it to the database so I can save and display the information. I'm using the controller approach. The start of the js file looks like this..</p>\n\n<pre><code>(function($)\n{\n    $.fn.DOPBookingCalendar = function(options)\n    {\n        var Data = {'Type':'BackEnd',\n                'DataURL':'/php/load.php',\n                'SaveURL':'/php/save.php',\n                'DayNames':['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n                'MonthNames':['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n                'AvailableText':'AVAILABLE', // The available text.\n                'BookedText':'BOOKED', // The Booked text.\n                'UnavailableText':'NOT AVAILABLE', // The unavailable text.\n                'DateType':1, // 1: american style; 2: european style;\n                'PopupDisplayTime':300, // The time for the Pop-Up to Show/Hide\n                'StatusLabel':'Status', // The text for Availability label.\n                'PriceLabel':'Price', // The text for Price label.\n                'Currency':'$', // The currency.\n                'SubmitBtnText':'Submit', // The text for Submit button.\n                'ResetBtnText':'Reset', // The text for Reset button.\n                'ExitBtnText':'Exit', // The text for Exit button.\n                'InvalidPriceText':'Error! Please enter a number for the price.' // The text for Invalid Price Warning.\n               },\n</code></pre>\n\n<p>It seems to me that I it could be something as simple as setting the DataURL and SaveURL to a controller/model ... but how would I connect the database, and how do I know what fields the table would have? Hopefully someone will have experience with this.</p>\n\n<pre><code>//This is the save query\n\nif (isset($_POST['dop_booking_calendar'])){\n    require_once 'opendb.php';\n    mysql_query('UPDATE schedule SET data=\"'.$_POST['dop_booking_calendar'].'\" WHERE id=1');\n}\n\n//this is the load query\n\nrequire_once 'opendb.php';\n\n$query = mysql_query('SELECT * FROM schedule WHERE id=1');\n\nwhile ($result=mysql_fetch_array($query)){\n    echo $result['data'];\n}\n</code></pre>\n"},{"tags":["mysql","sql","database","query","join"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13213948,"title":"join two tables with different rows and multiple select statements","body":"<p>I have a result as</p>\n\n<pre><code>select D.name as username, E.maxViews AS EmaxViews from (select A.video_id, A.uploaded_by AS username,max(B.numViews) AS maxViews,count(*) AS C from Videos A, (select video,count(*) AS numViews from Views GROUP BY video) B where A.video_id=B.video GROUP BY A.uploaded_by) E, Users D where D.username=E.username\n</code></pre>\n\n<p>which gives me the columns as <code>username,EmaxViews</code> and gives me 93 rows</p>\n\n<p>and I have another table as <code>Users (username,date_registered,name)</code> which has 100 queries in it</p>\n\n<p>I would like to join my above two queries as a single table as</p>\n\n<pre><code>username, date_registered, EmaxViews\n</code></pre>\n\n<p>I tried like this</p>\n\n<pre><code>select name, date_registered,G.EmaxViews from Users F LEFT OUTER JOIN (select D.name as username, E.maxViews AS EmaxViews from (select A.video_id, A.uploaded_by AS username,max(B.numViews) AS maxViews,count(*) AS C from Videos A, (select video,count(*) AS numViews from Views GROUP BY video) B where A.video_id=B.video GROUP BY A.uploaded_by) E, Users D where D.username=E.username) G ON F.username=G.username ORDER BY F.date_registered;\n</code></pre>\n\n<p>Now I am getting 100 rows and proper values for name and date_registered but I am getting NULL for EmaxViews for all the rows..</p>\n\n<p>whats wrong in my query ?</p>\n"},{"tags":["mysql","python-3.x","sqlalchemy"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13201498,"title":"SQLAlchemy error inserting multiple objects","body":"<p>This likely something simple I'm missing, but I have no idea what it is.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>from sqlalchemy import (Column, String, create_engine)\nfrom sqlalchemy.schema import FetchedValue\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import (scoped_session, sessionmaker)\n\n\nDBSession = scoped_session(sessionmaker())\nBase = declarative_base()\n\nclass Timezone(Base):\n    __tablename__ = 'timezone'\n    tz_name = Column(String(100), primary_key=True)\n    description = Column(String(100), nullable=False)\n\n\nif __name__ == '__main__':\n    engine = create_engine('mysql+mysqlconnector://root@127.0.0.1/mainserver?charset=utf8&amp;use_unicode=0', echo=True)\n    DBSession.configure(bind=engine)\n    Base.metadata.drop_all(engine)\n    Base.metadata.create_all(engine)\n    session = DBSession()\n    session.add_all([\n        Timezone(tz_name = \"Canada/Atlantic\", description = \"Atlantic (UTC-4)\"),\n        Timezone(tz_name = \"Canada/Central\", description = \"Central (UTC-6)\"),\n        Timezone(tz_name = \"Canada/Eastern\", description = \"Eastern (UTC-5)\"),\n        Timezone(tz_name = \"Canada/Mountain\", description = \"Mountain (UTC-7)\"),\n        Timezone(tz_name = \"Canada/Newfoundland\", description = \"Newfoundland (UTC-3:30)\"),\n        Timezone(tz_name = \"Canada/Pacific\", description = \"Pacific (UTC-8)\"),\n        Timezone(tz_name = \"Canada/Saskatchewan\", description = \"Saskatchewan (UTC-6)\"),\n        Timezone(tz_name = \"Canada/Yukon\", description = \"Yukon (UTC-8)\"),\n    ])\n    session.flush()\n    session.commit()\n</code></pre>\n\n<p>And here's the output with errors that occur:</p>\n\n<pre><code>2012-11-02 18:52:32,343 INFO sqlalchemy.engine.base.Engine SELECT DATABASE()\n2012-11-02 18:52:32,343 INFO sqlalchemy.engine.base.Engine {}\n2012-11-02 18:52:32,346 INFO sqlalchemy.engine.base.Engine SHOW VARIABLES LIKE 'lower_case_table_names'\n2012-11-02 18:52:32,346 INFO sqlalchemy.engine.base.Engine {}\n2012-11-02 18:52:32,347 INFO sqlalchemy.engine.base.Engine SHOW COLLATION\n2012-11-02 18:52:32,348 INFO sqlalchemy.engine.base.Engine {}\n2012-11-02 18:52:32,364 INFO sqlalchemy.engine.base.Engine SHOW VARIABLES LIKE 'sql_mode'\n2012-11-02 18:52:32,364 INFO sqlalchemy.engine.base.Engine {}\n2012-11-02 18:52:32,365 INFO sqlalchemy.engine.base.Engine DESCRIBE `timezone`\n2012-11-02 18:52:32,366 INFO sqlalchemy.engine.base.Engine {}\n2012-11-02 18:52:32,366 INFO sqlalchemy.engine.base.Engine ROLLBACK\n2012-11-02 18:52:32,367 INFO sqlalchemy.engine.base.Engine DESCRIBE `timezone`\n2012-11-02 18:52:32,367 INFO sqlalchemy.engine.base.Engine {}\n2012-11-02 18:52:32,368 INFO sqlalchemy.engine.base.Engine ROLLBACK\n2012-11-02 18:52:32,369 INFO sqlalchemy.engine.base.Engine \nCREATE TABLE timezone (\n    tz_name VARCHAR(100) NOT NULL, \n    description VARCHAR(100) NOT NULL, \n    PRIMARY KEY (tz_name)\n)\n\n\n2012-11-02 18:52:32,369 INFO sqlalchemy.engine.base.Engine {}\n2012-11-02 18:52:32,434 INFO sqlalchemy.engine.base.Engine COMMIT\n2012-11-02 18:52:32,436 INFO sqlalchemy.engine.base.Engine BEGIN (implicit)\n2012-11-02 18:52:32,437 INFO sqlalchemy.engine.base.Engine INSERT INTO timezone (tz_name, description) VALUES (%(tz_name)s, %(description)s)\n2012-11-02 18:52:32,437 INFO sqlalchemy.engine.base.Engine ({'tz_name': 'Canada/Atlantic', 'description': 'Atlantic (UTC-4)'}, {'tz_name': 'Canada/Central', 'description': 'Central (UTC-6)'}, {'tz_name': 'Canada/Eastern', 'description': 'Eastern (UTC-5)'}, {'tz_name': 'Canada/Mountain', 'description': 'Mountain (UTC-7)'}, {'tz_name': 'Canada/Newfoundland', 'description': 'Newfoundland (UTC-3:30)'}, {'tz_name': 'Canada/Pacific', 'description': 'Pacific (UTC-8)'}, {'tz_name': 'Canada/Saskatchewan', 'description': 'Saskatchewan (UTC-6)'}, {'tz_name': 'Canada/Yukon', 'description': 'Yukon (UTC-8)'})\n2012-11-02 18:52:32,438 INFO sqlalchemy.engine.base.Engine ROLLBACK\nTraceback (most recent call last):\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/engine/base.py\", line 1680, in _execute_context\n    context)\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/engine/default.py\", line 330, in do_executemany\n    cursor.executemany(statement, parameters)\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/mysql/connector/cursor.py\", line 493, in executemany\n    return self._batch_insert(operation,seq_params)\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/mysql/connector/cursor.py\", line 449, in _batch_insert\n    return self.execute(stmt)\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/mysql/connector/cursor.py\", line 418, in execute\n    self._handle_result(self._connection.cmd_query(stmt))\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/mysql/connector/connection.py\", line 512, in cmd_query\n    result = self._handle_result(self._send_cmd(ServerCmd.QUERY, query))\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/mysql/connector/connection.py\", line 434, in _handle_result\n    raise errors.get_exception(packet)\nmysql.connector.errors.ProgrammingError: 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '%(tz_name),(%(tz_name),(%(tz_name),(%(tz_name),(%(tz_name),(%(tz_name),(%(tz_nam' at line 1\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"bug2.py\", line 32, in &lt;module&gt;\n    session.flush()\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/orm/session.py\", line 1718, in flush\n    self._flush(objects)\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/orm/session.py\", line 1789, in _flush\n    flush_context.execute()\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/orm/unitofwork.py\", line 331, in execute\n    rec.execute(self)\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/orm/unitofwork.py\", line 475, in execute\n    uow\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/orm/persistence.py\", line 64, in save_obj\n    table, insert)\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/orm/persistence.py\", line 530, in _emit_insert_statements\n    execute(statement, multiparams)\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/engine/base.py\", line 1449, in execute\n    params)\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/engine/base.py\", line 1584, in _execute_clauseelement\n    compiled_sql, distilled_params\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/engine/base.py\", line 1698, in _execute_context\n    context)\n  File \"/sites/metrics_dev/lib/python3.3/site-packages/sqlalchemy/engine/base.py\", line 1843, in _handle_dbapi_exception\n    from e\nsqlalchemy.exc.ProgrammingError: (ProgrammingError) 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '%(tz_name),(%(tz_name),(%(tz_name),(%(tz_name),(%(tz_name),(%(tz_name),(%(tz_nam' at line 1 'INSERT INTO timezone (tz_name, description) VALUES (%(tz_name)s, %(description)s)' ({'tz_name': 'Canada/Atlantic', 'description': 'Atlantic (UTC-4)'}, {'tz_name': 'Canada/Central', 'description': 'Central (UTC-6)'}, {'tz_name': 'Canada/Eastern', 'description': 'Eastern (UTC-5)'}, {'tz_name': 'Canada/Mountain', 'description': 'Mountain (UTC-7)'}, {'tz_name': 'Canada/Newfoundland', 'description': 'Newfoundland (UTC-3:30)'}, {'tz_name': 'Canada/Pacific', 'description': 'Pacific (UTC-8)'}, {'tz_name': 'Canada/Saskatchewan', 'description': 'Saskatchewan (UTC-6)'}, {'tz_name': 'Canada/Yukon', 'description': 'Yukon (UTC-8)'})\n</code></pre>\n\n<p>It seems like something in the code isn't doing proper tag replacement.</p>\n"},{"tags":["mysql","optimization"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":37,"score":1,"question_id":13214014,"title":"What is the proper way to do multiple UPDATE statements?","body":"<p>I have a server which sends up to 20  <code>UPDATE</code> statements to a separate MySQL server every 3-5 seconds for a game. My question is, is it faster to concat them together(<code>UPDATE;UPDATE;UPDATE</code>). Is it faster to do them in a transaction then commit the transaction? Is it faster to just do each <code>UPDATE</code> individually?</p>\n\n<p>Any insight would be appreciated!</p>\n"},{"tags":["php","mysql","count","percentage"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13208699,"title":"Query for percent of orders for a period of time and number of orders","body":"<p>I've got a table of 'userorders' which have orderID, userID , orderStatus (which can be 1,2,3) and orderTime.</p>\n\n<p>I want to calculate percent of last 150 orders, in last 6 month for userid = 1 which has orderStatus 1.</p>\n\n<p>I tried to write two queries for both orders Status (1, 2/3) and then calculate percent of orders but my queries are not correct.</p>\n\n<p>my code and queries:</p>\n\n<pre><code>$rs1 = mysql_query(\"select count(*) as orderCount1 from userorders where \n         orderStatus = 1 and orderID in (select top 150 orderID from userorders where \n          userid = 1 and orderStatus in (1,2,3)  and  \n         orderTime &gt; \".strtotime(\"-6 month\").\" oder by orderID desc)\") or  \n         die (mysql_error());\n\n$rs2 = mysql_query(\"select count(*) as orderCount1 from userorders where \n         orderStatus in (2,3) and orderID in (select top 150 orderID from userorders where \n          userid = 1 and orderStatus in (1,2,3)  and  \n         orderTime &gt; \".strtotime(\"-6 month\").\" order by orderID desc)\") or  \n         die (mysql_error());\n\n\n$orderCount1 = $rs1['orderCount1'];\n$orderCount2 = $rs2['orderCount2'];\n\n$orderPercent = ($orderCount1/ $orderCount1+$orderCount2)*100;\n</code></pre>\n\n<p>How can I solve the problem or improve my codes.</p>\n"},{"tags":["php","mysql","database"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13213883,"title":"My MySQL query with Count/Group By doesn't work correctly","body":"<p>I'm writing a PM (private messages) system in PHP for one of my projects, and I'm stuck with a single MySQL query that uses (or should be using) Count. The query would take place in a function, which is supposed to return the value of unread messages for <code>$id</code> user.</p>\n\n<p>My table layout looks like this:</p>\n\n<pre><code>___________________________________________________________________________________\n+-message_id--||--from_user--||--to_user--||--content--||--date_sent--||--is_read-+\n</code></pre>\n\n<p>And I wrote a query like that:</p>\n\n<pre><code>$count = mysql_query(\"\n    SELECT Count(from_user) \n    FROM messages \n    WHERE to_user='$id' \n    AND is_read=0 \n    GROUP BY to_user\n\",$connection);\n</code></pre>\n\n<p>I'm not really familiar with this Count/Group By stuff, so I'm not sure about what I did wrong. I did a few Google searches, but didn't find anything which could be useful for me. </p>\n\n<p>If you could help me about this little problem, that would be awesome. </p>\n\n<p>Thanks! :)</p>\n"},{"tags":["mysql","ruby-on-rails","ruby-on-rails-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":13212200,"title":"Moving mysql query to model","body":"<p>I have the following mysql query working well. Quick backstory, this lists our customers by total money spent. </p>\n\n<pre><code>SELECT  SUM(price) AS money_spent, co.customer_id, cu.first_name, cu.last_name, cu.email_primary\nFROM customer_order AS co \nJOIN customer AS cu ON (cu.customer_id = co.customer_id) \nGROUP BY co.customer_id\nORDER BY money_spent DESC\n</code></pre>\n\n<p>I attempted moving this to the customer model, as a scope, and subclass  yet I failed both ways.  I'm somewhat new to rails (formerly client-side) but I think I'm close.  Hoping y'all could point me in the right direction. Thanks in advance!!!</p>\n\n<pre><code>def self.high_rollers  \n  options = {\n      :select   =&gt; \"SUM(price) AS money_spent, co.customer_id, cu.first_name, cu.last_name, cu.email_primary\",\n      :from     =&gt; \"customer_order AS co\",\n      :joins    =&gt; \"customer AS cu ON (cu.customer_id = co.customer_id)\",\n      :group_by =&gt; \"co.customer_id\",\n      :order    =&gt; \"money_spent DESC\"\n            }   \n</code></pre>\n\n<p>Putting the following code in my index action for this controller works, but definitely doesn't feel like the right approach!</p>\n\n<pre><code>@high_bidders = Customer.find_by_sql(&lt;&lt;-SQL\n       SELECT  SUM(price) AS money_spent, co.customer_id, cu.first_name, cu.last_name, cu.email_primary\n       FROM customer_order AS co \n       JOIN customer AS cu ON (cu.customer_id = co.customer_id) \n       GROUP BY co.customer_id\n       ORDER BY money_spent DESC\n</code></pre>\n\n<p>SQL\n )</p>\n"},{"tags":["mysql","sqldatatypes","custom-data-type"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13213710,"title":"MySQL column datatype to accept either a time or a list of words","body":"<p>Good day everyone.\nI spent a whole day looking for an answer to my question but unfortunately I did not the answer I'm looking for.</p>\n\n<p>I am trying to automate some processes that we are currently using by creating a web application in PHP and a MySQL database.</p>\n\n<p>I would like to prepare the staff schedule in excel then upload it to MySQL using php. Most of the database fields are straight forward: an employee ID that is INT, date that is in DATE format.</p>\n\n<p>The issue I am facing is in the time. When an employee is working, I would like to upload their shift start time and end time in TIME, however, if they are not working, I would like the database to store their status in letters: OFF for a day off, AL for annual leave, ML for medical leave, EL for emergency leave and so on.</p>\n\n<p>I do not know what data type will support this. ie: accept either time or an entry out of a specific list of outcome codes.</p>\n\n<p>Any assistance will be appreciated.</p>\n\n<p>Mohamed.</p>\n"},{"tags":["php","mysql","upload"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5330,"score":0,"question_id":6694839,"title":"Using PHP to upload images to a folder while saving descriptions to a database","body":"<p>The user decides to upload multiple images for their classified listing. What I need to have happen is to:</p>\n\n<ol>\n<li>Upload the images with descriptions for each of the images - SOLVED</li>\n<li>Save the images to a folder specified</li>\n<li>Save the image location to my MySQL database with descriptions - SOLVED</li>\n<li>Be able to call the images and descriptions in their classified listing in kind of a gallery setting</li>\n</ol>\n\n<p>My table schema is set up like this (simplified):</p>\n\n<pre><code>ad_id | member_id | category | subcategory | ... | photo_0_href | photo_0_desc ... | etc.\n</code></pre>\n\n<p>Could someone walk me through the process? Thanks.</p>\n\n<h3>step3.php</h3>\n\n<pre><code>&lt;form action=\"upload.php\" method=\"post\" enctype=\"multipart/form-data\"&gt;\n&lt;p&gt;\n&lt;label for=\"file0\"&gt;Filename: &lt;/label&gt;\n&lt;input name=\"file[]\" type=\"file\" id=\"file0\" size=\"20\" /&gt;\n&lt;/p&gt;\n&lt;p&gt;\n&lt;label for=\"file0desc\"&gt;Description: &lt;/label&gt;\n&lt;textarea rows=\"10\" cols=\"30\" id=\"file0desc\" class=\"textarea\"&gt;&lt;/textarea&gt;\n&lt;/p&gt;\n&lt;p&gt;\n&lt;label for=\"file1\"&gt;Filename: &lt;/label&gt;\n&lt;input name=\"file[]\" type=\"file\" id=\"file1\" size=\"20\" /&gt;\n&lt;/p&gt;\n&lt;p&gt;\n&lt;label for=\"file1desc\"&gt;Description: &lt;/label&gt;\n&lt;textarea rows=\"10\" cols=\"30\" id=\"file1desc\" class=\"textarea\"&gt;&lt;/textarea&gt;\n&lt;/p&gt;\n&lt;p&gt;\n&lt;input id=\"submit\" type=\"submit\" name=\"submit\" value=\"Continue to Step 4\" /&gt;\n&lt;/p&gt;\n&lt;/form&gt;\n</code></pre>\n\n<h3>upload.php</h3>\n\n<pre><code>&lt;?php\n\nif ((($_FILES[\"file\"][\"type\"] == \"image/gif\")\n|| ($_FILES[\"file\"][\"type\"] == \"image/jpeg\")\n|| ($_FILES[\"file\"][\"type\"] == \"image/pjpeg\")\n|| ($_FILES[\"file\"][\"type\"] == \"image/png\"))\n&amp;&amp; ($_FILES[\"file\"][\"size\"] &lt; 1048600)) // less than 1MB\n  {\n  if ($_FILES[\"file\"][\"error\"] &gt; 0)\n    {\n    echo \"Return Code: \" . $_FILES[\"file\"][\"error\"] . \"&lt;br /&gt;\";\n    }\n  else\n    {\n    header(\"Location: step4.php\");\n/*\n    echo \"Upload: \" . $_FILES[\"file\"][\"name\"] . \"&lt;br /&gt;\";\n    echo \"Type: \" . $_FILES[\"file\"][\"type\"] . \"&lt;br /&gt;\";\n    echo \"Size: \" . ($_FILES[\"file\"][\"size\"] / 1024) . \" Kb&lt;br /&gt;\";\n    echo \"Temp file: \" . $_FILES[\"file\"][\"tmp_name\"] . \"&lt;br /&gt;\";\n\n*/\n    if (file_exists(\"upload/\" . $_FILES[\"file\"][\"name\"]))\n      {\n      echo $_FILES[\"file\"][\"name\"] . \" already exists. \";\n      }\n    else\n      {\n      move_uploaded_file($_FILES[\"file\"][\"tmp_name\"],\n      \"upload/\" . $_FILES[\"file\"][\"name\"]);\n      echo \"Stored in: \" . \"upload/\" . $_FILES[\"file\"][\"name\"];\n      }\n    }\n  }\nelse\n  {\n  echo \"Invalid file\";\n  }\n?&gt;\n</code></pre>\n\n<p>I know my upload.php isn't configured for multiple image files yet, but it's a start. </p>\n\n<p>I worked out saving the descriptions to the database using <code>$_SESSION['file_n_desc']</code>. I just need to figure out how to upload the darn images to the folder and then save the locations into the database.</p>\n\n<p>I also need to have the image renamed to a random string (to prevent images being overwritten). I know I can do this with the <code>rand()</code> function.</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":16,"score":0,"question_id":13213835,"title":"MySQL Query - I need some help refining it","body":"<p>I have a database with two tables. The first ('calendar') contains only a series of dates like '2012-12-25' into the future. This was generated by a procedure. The second ('new_allocations') contains a series of stock allocations. Sample content looks like this:</p>\n\n<pre><code>+----+-------------+------------+----------+------------+\n| id | delivery_ID | date       | quantity | product_ID |\n+----+-------------+------------+----------+------------+\n|  1 |           1 | 2012-11-09 |        5 |          2 |\n|  2 |           1 | 2012-11-08 |        5 |          2 |\n|  3 |           2 | 2012-11-07 |        5 |          2 |\n|  4 |           3 | 2012-11-06 |        5 |          2 |\n|  5 |           4 | 2012-11-03 |        2 |          2 |\n|  6 |           4 | 2012-11-02 |        5 |          2 |\n|  7 |           5 | 2012-11-03 |        3 |          2 |\n|  8 |           6 | 2012-11-05 |        5 |          2 |\n|  9 |           7 | 2012-11-07 |       55 |          5 |\n| 10 |           7 | 2012-11-06 |       34 |          5 |\n| 11 |           7 | 2012-11-05 |       40 |          5 |\n+----+-------------+------------+----------+------------+\n</code></pre>\n\n<p>The following query (which basically means 'show me a list of days in the date range supplied, excluding Sundays, with a total of stock allocations for that day') is almost what I want, except that it is for all products (denoted by 'product_ID').</p>\n\n<pre><code>select datefield as Date, sum(ifnull(quantity,0)) as Qty from calendar left join new_allocations on (new_allocations.date=calendar.datefield) where (calendar.datefield&gt;='2012-10-29' and calendar.datefield&lt;='2012-11-10') and dayname(calendar.datefield) != 'Sunday' group by datefield;\n\n+------------+------+\n| Date       | Qty  |\n+------------+------+\n| 2012-10-29 |    0 |\n| 2012-10-30 |    0 |\n| 2012-10-31 |    0 |\n| 2012-11-01 |    0 |\n| 2012-11-02 |    5 |\n| 2012-11-03 |    5 |\n| 2012-11-05 |   45 |\n| 2012-11-06 |   39 |\n| 2012-11-07 |   60 |\n| 2012-11-08 |    5 |\n| 2012-11-09 |    5 |\n| 2012-11-10 |    0 |\n+------------+------+\n</code></pre>\n\n<p>So my problem is that as soon as I add \"and product_ID='2'\" the query stops returning all dates in the range:</p>\n\n<p>New query:</p>\n\n<pre><code>select datefield as Date, sum(ifnull(quantity,0)) as Qty from calendar left join new_allocations on (new_allocations.date=calendar.datefield) where (calendar.datefield&gt;='2012-10-29' and calendar.datefield&lt;='2012-11-10') and dayname(calendar.datefield) != 'Sunday' and product_ID='2' group by datefield;\n</code></pre>\n\n<p>New result:</p>\n\n<pre><code>+------------+------+\n| Date       | Qty  |\n+------------+------+\n| 2012-11-02 |    5 |\n| 2012-11-03 |    5 |\n| 2012-11-05 |    5 |\n| 2012-11-06 |    5 |\n| 2012-11-07 |    5 |\n| 2012-11-08 |    5 |\n| 2012-11-09 |    5 |\n+------------+------+\n</code></pre>\n\n<p>In fact what I want looks like this:</p>\n\n<pre><code>+------------+------+\n| Date       | Qty  |\n+------------+------+\n| 2012-10-29 |    0 |\n| 2012-10-30 |    0 |\n| 2012-10-31 |    0 |\n| 2012-11-01 |    0 |\n| 2012-11-02 |    5 |\n| 2012-11-03 |    5 |\n| 2012-11-05 |    5 |\n| 2012-11-06 |    5 |\n| 2012-11-07 |    5 |\n| 2012-11-08 |    5 |\n| 2012-11-09 |    5 |\n| 2012-11-10 |    0 |\n+------------+------+\n</code></pre>\n\n<p>I have been backwards and forwards through this and have not been able to phrase the query correctly - what am I missing?</p>\n\n<p>Many thanks in advance.</p>\n\n<pre><code>CREATE TABLE `new_allocations` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `delivery_ID` int(11) DEFAULT NULL,\n  `date` date DEFAULT NULL,\n  `quantity` int(11) DEFAULT NULL,\n  `product_ID` int(11) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n)\n\nINSERT INTO `new_allocations` (`id`, `delivery_ID`, `date`, `quantity`, `product_ID`)\nVALUES\n    (1,1,'2012-11-09',5,2),\n    (2,1,'2012-11-08',5,2),\n    (3,2,'2012-11-07',5,2),\n    (4,3,'2012-11-06',5,2),\n    (5,4,'2012-11-03',2,2),\n    (6,4,'2012-11-02',5,2),\n    (7,5,'2012-11-03',3,2),\n    (8,6,'2012-11-05',5,2),\n    (9,7,'2012-11-07',55,5),\n    (10,7,'2012-11-06',34,5),\n    (11,7,'2012-11-05',40,5);\n</code></pre>\n\n<p>For the calendar:</p>\n\n<pre><code>DROP TABLE IF EXISTS `calendar`;\nCREATE TABLE `calendar` (\n  `datefield` date DEFAULT NULL\n)\n</code></pre>\n\n<p>The procedure to fill the calendar:</p>\n\n<pre><code>DELIMITER ;;\nCREATE DEFINER=`root`@`localhost` PROCEDURE `fill_calendar`(start_date DATE, end_date DATE)\nBEGIN\n  DECLARE crt_date DATE;\n  SET crt_date=start_date;\n  WHILE crt_date &lt; end_date DO\n    INSERT INTO calendar VALUES(crt_date);\n    SET crt_date = ADDDATE(crt_date, INTERVAL 1 DAY);\n  END WHILE;\nEND;;\nDELIMITER ;\n</code></pre>\n"},{"tags":["mysql","sql"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13213265,"title":"processing blocks of records in composite primary key order","body":"<p>I'm using mysql and would like to process a very large table with a primary key of 4 parts in blocks of 10,000 (marshalling data to another system). The database is offline when I am doing the processing so I don't have to worry about any modifications. Say the primary key is (<code>A</code>, <code>B</code>, <code>C</code>, <code>D</code>) which are all integers. I first tried using <code>LIMIT OFFSET</code> to achieve this like this:</p>\n\n<pre><code>SELECT * FROM LargeTable ORDER BY (A, B, C, D) LIMIT 10000 OFFSET 0;\n</code></pre>\n\n<p>Where I increased the offset by 10000 on each call. This seemed to get very slow as it got towards the higher rows in the table. Is it not possible to do this <code>LIMIT OFFSET</code> efficiently?</p>\n\n<p>Then I tried a different approach that uses comparison on the composite primary key. I can get the first block like this:</p>\n\n<pre><code>SELECT * FROM LargeTable ORDER BY (A, B, C, D) LIMIT 10000;\n</code></pre>\n\n<p>If the last row of that block has <code>A = a</code>, <code>B = b</code>, <code>C = c</code>, and <code>D = d</code> then I can get the next block with:</p>\n\n<pre><code>SELECT * FROM LargeTable\nWHERE\n    A &gt; a OR\n    (A = a AND B &gt; b) OR\n    (A = a AND B = b AND C &gt; c) OR\n    (A = a AND B = b AND C = c AND D &gt; d)\nORDER BY (A, B, C, D) LIMIT 10000;\n</code></pre>\n\n<p>And then repeat that for each block. This also seemed to slow down greatly as I got to the higher rows in the table. Is there a better way to do this? Am I missing something obvious?</p>\n"},{"tags":["mysql","sql","debugging"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":58,"score":-1,"question_id":12885309,"title":"Please resolve the syntax error in the mysql insert query","body":"<p>I am using mysql 5.5.27</p>\n\n<p>At places where it looks like double quotes are two single quotes closer together, and they are actually null values in the excel sheetin the db.</p>\n\n<p>I get the following error,</p>\n\n<pre><code>com.mysql.jdbc.exceptions.jdbc4.MySQLS… You have an error in your SQL syntax; \n  check the manual that corresponds to your MySQL server version for the right \n  syntax to use near 'CASE,lname,fname,gender,dob,ssn,… at line 1\n</code></pre>\n\n<p>the actual query is</p>\n\n<pre><code>Insert into \n  work(CASE,lname,fname,gender,dob\n</code></pre>\n"},{"tags":["c#","mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13213671,"title":"\"Table already exists\" but it doesn't","body":"<p>I'm getting an <code>This Table already exists</code> error from Visual Studio 2012. I checked it in <code>MySqlWorkbench</code> and the <code>Xampp</code> Directory, but I didn't find anything. I've even tried it with <code>DROP TABLE IF EXISTS tablename;</code> but this doesn't work either.</p>\n\n<pre><code>public class DBConnect\n{\n    private MySqlConnection connection;\n    private string server;\n    private string database;\n    private string uid;\n    private string password;\n\n        //Constructor\n    public DBConnect()\n    {\n        Initialize();\n    }\n\n    //Initialize values\n    private void Initialize()\n    {\n        server = \"localhost\";\n        database = \"\";\n        uid = \"root\";\n        password = \"\";\n        string connectionString;\n        connectionString = \"SERVER=\" + server + \";\" + \"DATABASE=\" +\n        database + \";\" + \"UID=\" + uid + \";\" + \"PASSWORD=\" + password + \";\";\n\n        connection = new MySqlConnection(connectionString);\n        connection.Dispose();\n\n        CreateDatabase(\" DROP DATABASE IF EXISTS boerswatch; CREATE DATABASE boerswatch;\");\n\n        server = \"localhost\";\n        database = \"boerswatch\";\n        uid = \"root\";\n        password = \"\";\n        string connectionString1;\n        connectionString1 = \"SERVER=\" + server + \";\" + \"DATABASE=\" +\n        database + \";\" + \"UID=\" + uid + \";\" + \"PASSWORD=\" + password + \";\";\n\n        connection = new MySqlConnection(connectionString1);\n    }\n\n\n    //open connection to database\n    private bool OpenConnection()\n    {\n        try\n        {\n            connection.Open();\n            return true;\n        }\n        catch (MySqlException e)\n        {\n            switch (e.Number)\n           {\n                case 0:\n                    MessageBox.Show(\"Keine Verbindung zum Server Möglich!\");\n                    break;\n                case 1045:\n                    MessageBox.Show(\"Ungültiger Benutzername oder Passwort!\");\n                    break;\n            }\n                return false;\n        }\n   }\n\n\n        //Close connection\n    private bool CloseConnection()\n    {\n        try\n        {\n            connection.Close();\n            return true;\n        }\n        catch (MySqlException e)\n        {\n            MessageBox.Show(e.Message);\n            return false;\n         }\n    }\n   public void CreateDatabase(String query)\n   {\n        if (OpenConnection())\n       {\n            try\n            {\n\n                MySqlCommand cmd = new MySqlCommand(query, connection);\n                cmd.ExecuteNonQuery();\n                CloseConnection();\n            }\n            catch (MySqlException e)\n            {\n                MessageBox.Show(e.Message);\n            }\n\n        }\n    }\n\n    public void CreateTable(String query)\n    {\n        if (OpenConnection())\n        {\n            try\n            {\n                MySqlCommand cmd = new MySqlCommand(query, connection);\n                cmd.ExecuteNonQuery();\n                CloseConnection();\n            }\n            catch (MySqlException e)\n            {\n                MessageBox.Show(e.Message);\n            }\n        }\n    }\n\n    public void Insert(String query)\n    {\n        if (this.OpenConnection())\n        {\n            MySqlCommand cmd = new MySqlCommand(query, connection);\n            cmd.ExecuteNonQuery();\n            this.CloseConnection();\n        }\n    }\n}\n\npublic partial class Form1 : Form\n{    \n    static XmlSerializer serializer;\n    static FileStream stream;\n    public List&lt;Bank&gt; banks;\n    public List&lt;Object&gt; pers;\n    public DBConnect data;\n    public Form1()\n    {\n        InitializeComponent();\n        checkFiles();\n    }\n    private void checkFiles()\n    {\n        String user = System.Security.Principal.WindowsIdentity.GetCurrent().Name;\n        banks = new List&lt;Bank&gt;(5);\n        if (!Directory.Exists(@\"C:\\xampp\\mysql\\data\\boerswatch\") )\n        {\n            data = new DBConnect();\n            createBanks();\n        }\n        else\n        {\n            //loadBanks();\n            //loadAccounts(pers);\n        }\n    }\n    public void createBanks()\n    {\n        Bank b1 = new Bank(\"Raiffeisen\");\n        Bank b2 = new Bank(\"Erste Bank\");\n        Bank b3 = new Bank(\"BAWAG\");\n        banks.Add(b1);\n        banks.Add(b2);\n        banks.Add(b3);\n        data.CreateTable(\"DROP TABLE IF EXISTS Banken; CREATE TABLE Banken( name VARCHAR(20) PRIMARY KEY);\");\n        data.Insert(\"INSERT INTO Banken VALUES(\" + b1.Name + \");\");\n        data.Insert(\"INSERT INTO Banken VALUES(\" + b2.Name + \");\");\n        data.Insert(\"INSERT INTO Banken VALUES(\" + b3.Name + \");\");\n        listBox1.DataSource = banks;\n    } \n}\n</code></pre>\n"},{"tags":["php","mysql"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":52,"score":-1,"question_id":13213415,"title":"PHP & MYSQL selection","body":"<p>Ok folks. I have a Table categories with id, categoryname. </p>\n\n<p>categories has: id=1 categoryname = batteries, id=2 categoryname = flashes, id=3 categoryname glasses. </p>\n\n<p>The Second table is users. Users have id, user_eimal, my_choices. \nEvery user has store into my_choices the category name that wants to appear. </p>\n\n<p>So for example user George with user_email xxxxx@xxx.com has store in my_choices: batteries,glasses </p>\n\n<p>Now i want to bring up records from table products where categoryname is the values that user george has stored into my_choices. </p>\n\n<p>Products has id, p_title, categoryname</p>\n\n<p>for example i want to:</p>\n\n<pre><code> &lt;?php\n\n    $usenmail = $_SESSION['SESS_EMAYL_NAME'];\n\n    $q1 = \"SELECT * FROM categories WHERE id = '$id'\";\n    $q2 = mysql_query($q1, $connectiondb) or die(mysql_error());\n    $results = mysql_fetch_assoc($q2);\n\n    $my_choices = $results['my_choices']; //That means $my_choices = batteries,glasses\n\n    //Now i want to select fom my table poducts only the categories (batteries,glasses)that user has store.\n\n$trt = mysql_query (\"select * from products where categoryname = batteries,glasses\");\n\nwhile($apst = mysql_fetch_assoc($trt)) {  \n\necho '&lt;div style=\"color: #000; float: left;\"&gt;Productname: '.$['apst'].'&lt;/div&gt;'; \necho '&lt;br&gt;'; \n}\n\n?&gt;\n</code></pre>\n"},{"tags":["php","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13213669,"title":"Get a list of names from a database with multiple entries using php","body":"<p>OK, Basically I am after some advice as I am not sure how to do this, basically I have a database full of car details, what I want to do is auto populate a page with a list of the  manufacturers.  I am thinking I could do this with group, although I do not particularly need to group the results just show the name of every manufacturer just once as a link.</p>\n\n<p>Is group the best way to go?, or is there another way?.</p>\n\n<p>Any advice would be appreciated.</p>\n\n<p>Thanks</p>\n"},{"tags":["php","mysql","sql","group"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13213205,"title":"messages between users: show conversations","body":"<p>right now, I am coding a message system for user communication. In the inbox I do not want to show the user the messages he/she received. I just want to show the conversations. So as an example, if one user send or receive more than one message then in the inbox there should only be the conversation (which includes the newest message, either written or received) with the user and when the user clicks on the conversation he/she can see all past messages.</p>\n\n<p>The table structure (simplified) of 'messages' is as followed:</p>\n\n<pre><code>message_id\nuser_id_sender\nuser_id_recipient\nmessage\n</code></pre>\n\n<p>Now the problem is that the messages are saved in a database where each row is one message, so I have to group these messages in a certain way.</p>\n\n<p>The select statement I came up with is the following:</p>\n\n<pre><code>SELECT * FROM messages\nWHERE user_id_sender = 1 OR user_id_recipient = 1\nGROUP BY user_id_sender\n</code></pre>\n\n<p>But now I obviously get two messages because one which has been written by user '1' and one that he has received..</p>\n\n<p>Does anybody have an idea how to solve this?</p>\n\n<p>Thank you in advance,</p>\n\n<p>Freddy</p>\n"},{"tags":["sql","mysql","sql-order-by","group-concat"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":2442,"score":3,"question_id":1577860,"title":"Ordering in a MySQL GROUP_CONCAT with a function in it","body":"<p>I want to order the results in a GROUP_CONCAT function. The problem is, that the selection in the GROUP_CONCAT-function is another function, like this (fantasy select):</p>\n\n<pre><code>SELECT a.name,\n    GROUP_CONCAT(DISTINCT CONCAT_WS(':', b.id, c.name) ORDER BY b.id ASC) AS course\nFROM people a, stuff b, courses c\nGROUP BY a.id\n</code></pre>\n\n<p>I want to get a result like (ordered by b.id):</p>\n\n<pre><code>michael    1:science,2:maths,3:physics\n</code></pre>\n\n<p>but I get:</p>\n\n<pre><code>michael    2:maths,1:science,3:physics\n</code></pre>\n\n<p>Does anyone know how I can order by b.id in my group_concat here?</p>\n"},{"tags":["php","mysql","image","blob"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13044595,"title":"PHP will generate jpg images from BLOB but not from LONGBLOB in MySQL table","body":"<p>The following script has been outputting images from a BLOB column in MySQL for a good time now:</p>\n\n<pre><code>&lt;?\n$dbname=\"usr_web5_1\";\n$db = new mysqli($dbhost, $dbuser, $dbpwd, $dbname);\n$sql = \"SELECT foto, fototype, modified FROM `Komplettverzeichnis_extras` WHERE `WPID`= ?\";\n$stmt = $db-&gt;prepare($sql);\n$stmt-&gt;bind_param(\"s\",$_GET['id']);\nif (!$stmt-&gt;execute()) $error=true;\n$stmt-&gt;bind_result($file,$filetype,$modified);\n$stmt-&gt;fetch();\nif (!isset($filetype)) $filetype = \"image/jpeg\";\nif (!$error) {\n    header(\"Content-type: $filetype;\");\n    header(\"Last-Modified: $modified;\");\n} else {\n    echo \"Error\";\n    echo $db-&gt;error;\n}\necho $file;\n$stmt-&gt;close();\n$db-&gt;close();\n}\n?&gt;\n</code></pre>\n\n<p>I have tried both altering the column to LONGBLOB and replacing it by a new LONGBLOB colument; the images will not show. This is regardless wether I try to show the images already in place or I try and upload new ones.</p>\n\n<p>The closest problem I found is <a href=\"http://www.php.de/datenbanken/56791-erledigt-longblob-akzeptiert-kein-binary-attribut.html\" rel=\"nofollow\">here</a> (german). For altering the column I used</p>\n\n<pre><code>ALTER TABLE `Komplettverzeichnis_extras` CHANGE `foto` `foto` LONGBLOB DEFAULT NULL\n</code></pre>\n\n<p>Obviously I am willing to provide more information if necessary.</p>\n\n<p>I use phpMyAdmin in version 3.5.2.2, PHP 5.3.17, and mysql client API version (is that the mysql version?) 5.1.63.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["php","mysql","ajax","forms","autocomplete"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2963,"score":0,"question_id":10856305,"title":"autocomplete form from database PHP MYSQL AJAX","body":"<p>I hope that someone can point me in the right direction, then I should be able to figure this out and get it working...</p>\n\n<p>Basically, I have a database of locations such as:</p>\n\n<pre><code>ID   City/Town    County\n1    Newbury      Berkshire\n2    Preston      Merseyside\n</code></pre>\n\n<p>Now my website has a form that the user fills in to indicate their address, within a section I have two input fields 'city' and 'county'. Here I would like three things to happen. </p>\n\n<p>1) When the user begins to enter their city it auto completes based on results from the database (this would include their city and county, the county is just for identification so when selected would just input the city). </p>\n\n<p>2) Once the user selects their city it auto completes the county field from the database.</p>\n\n<p>3) With all this done I would like the ID from the city and county result to be entered into a hidden input element.</p>\n\n<p>I have been looking all over the internet and found plenty of auto complete scripts:\n<a href=\"http://ajaxdump.com/2010/08/11/10-cool-auto-complete-scripts-using-ajaxjquerymootoolsprototype/\" rel=\"nofollow\">http://ajaxdump.com/2010/08/11/10-cool-auto-complete-scripts-using-ajaxjquerymootoolsprototype/</a>\nhttp://www.jqueryrain.com/2012/03/35-best-ajax-jquery-autocomplete-tutorial-plugin-with-examples/</p>\n\n<p>and I have found various posts on form filling such as:\n<a href=\"http://stackoverflow.com/questions/7410091/jquery-autocomplete-and-php-populating-input-field-with-data-from-mysql-databas\">Jquery autocomplete and PHP: populating input field with data from mySQL database based on selected option in autocomplete field</a></p>\n\n<p>but I just can't seem to get them to work together. I am trying to stick with PHP, MYSQL and JavaScript. I am happy to use AJAX if needed, anything else is going beyond my knowledge of programming.</p>\n\n<p>I maybe going about this all wrong, but any feedback or information that can point me in the right direction will be very gratefully received.</p>\n\n<p>Many thanks</p>\n"},{"tags":["php","mysql","sql","collate"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13213103,"title":"MySQL Union illegal mix of collations","body":"<p>I have the following in my PHP query:</p>\n\n<pre><code>SELECT tags.tag, theValues.* \nFROM ch09.tbl_tags tags \nRIGHT JOIN ((SELECT 'dog' as 'Vals')\nUNION (SELECT 'cat' as 'Vals')) theValues on tags.tag = theValues.Vals\n</code></pre>\n\n<p>After the \"RIGHT JOIN\" everything within the brackets are created on the fly from user input.</p>\n\n<p>It worked fine in MySQL 4, but I just had a new computer and installed 5.5, imported the SQL dump as <code>UTF-8</code>. But I get: </p>\n\n<blockquote>\n  <p>\"Illegal mix of collations (latin1_swedish_ci,IMPLICIT) and (utf8_general_ci,COERCIBLE) for operation '='\"</p>\n</blockquote>\n\n<p>There's probably a better way to construct my query, all I need is everything the user inputs in one column as \"<code>Vals</code>\" and if there's a matching tag in <code>tbl_tags.tag</code> then it should be there in a column called \"tag\" else the tag column is blank.</p>\n\n<p>I have tried using Collate: <a href=\"http://www.answermysearches.com/mysql-fixing-illegal-mix-of-collations-message/352/\" rel=\"nofollow\">http://www.answermysearches.com/mysql-fixing-illegal-mix-of-collations-message/352/</a>, but I simply cannot get it to work.</p>\n\n<p>So I need to either construct a better query or use the collate function somehow, but how?</p>\n\n<p>Thanks in advance.</p>\n\n<p>Craig</p>\n"},{"tags":["java","mysql","sql","database","query"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13166471,"title":"MySQL syntax error using Java in Eclipse","body":"<p>I have the following prepared statement for sql  in Java :</p>\n\n<p>com.mysql.jdbc.JDBC4PreparedStatement@6e56103e:</p>\n\n<pre><code>INSERT INTO `game` (Id , GameStart ,Name, Lenght, MapVersion, Mode)VALUES(2502591,'2000-03-02 02:02:02','5x5 aptb wdw','00:55:48','DotA v6.75b.w3x','aptb ')ON DUPLICATE KEY UPDATE `Id`=VALUES(Id),`GameStart` = VALUES(GameStart),`Name`=VALUES(Name),`Lenght`=VALUES(Lenght),`MapVersion`=VALUES(MapVersion),`Mode`=VALUES(Mode).\n</code></pre>\n\n<p>When I execute it in Eclipse I get the following error:</p>\n\n<pre><code>com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '?,?,?,?,?,?)ON DUPLICATE KEY UPDATE `Id`=VALUES(Id),`GameStart` = VALUES(GameSta' at line 1.\n</code></pre>\n\n<p>But at the same time when I execute the same query in SQLyog I don't get an error. Rows are updated. What can be a problem? Thanks in advance</p>\n\n<p>Code:</p>\n\n<pre><code>  Class.forName(\"com.mysql.jdbc.Driver\");\n    Connection con = DriverManager.getConnection(\"jdbc:mysql://localhost:3306/dota\",\"root\",\"root\");\n    PreparedStatement updateGame = null;\n    String updatingGame = \"INSERT INTO `game` (Id , GameStart ,Name, Lenght, MapVersion, Mode)\" +\n                \"VALUES(?,?,?,?,?,?)\" +\n                \"ON DUPLICATE KEY UPDATE \" +\n                \"`Id`=VALUES(Id),\"+\n                \"`GameStart` = VALUES(GameStart),\" +\n                \"`Name`=VALUES(Name),\" +\n                \"`Lenght`=VALUES(Lenght),\" +\n                \"`MapVersion`=VALUES(MapVersion),\" +\n                \"`Mode`=VALUES(Mode)\";\n    con.setAutoCommit(false);\n    updateGame=con.prepareStatement(updatingGame);\n                updateGame.setInt(1, game.Id);\n                Timestamp timestamp = new Timestamp(100,2,2,2,2,2,2);\n                updateGame.setTimestamp(2,timestamp);\n                updateGame.setString(3, game.GameName);\n                updateGame.setTime(4, (Time) game.Time);\n                updateGame.setString(5, game.MapVersion);\n                updateGame.setString(6, game.Mode);\n                updateGame.executeUpdate(updatingGame);\n</code></pre>\n\n<p>And on:</p>\n\n<pre><code>updateGame.executeUpdate(updatingGame);\n</code></pre>\n\n<p>I get an error</p>\n"},{"tags":["mysql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13212308,"title":"Get value, which more times repeated in column","body":"<p>Given table <code>menu</code>, in him is column  <code>continent</code>, for example in him is this datas</p>\n\n<pre><code>continent\n----------\nafrica\nafrica\neurope\neurope\neurope\n</code></pre>\n\n<p>I want get continent name, which is more times in column, that is result must be <code>europe</code>.</p>\n\n<p>I write query, but I think my query is difficult and must be exist more ease solution for cases like this. are some ideas?</p>\n\n<p>this my query</p>\n\n<pre><code>    SELECT continent FROM (\n        SELECT continent, COUNT(continent) AS cnt FROM menu GROUP BY continent\n    ) AS t\n    WHERE cnt = (\n        SELECT MAX(cnt) FROM ( \n            SELECT  COUNT(continent) AS cnt FROM menu GROUP BY continent\n        ) AS t2\n    )\n</code></pre>\n"},{"tags":["mysql","sql","syntax","limit"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13213025,"title":"SQL Syntax, What am I doing wrong?","body":"<p>I have the following syntax, and all runs fine except for \"LIMIT\". All the results of the database display when only 9 results should. I have the \"0, 9\" coming from variables so they will change on each paginated link (ex. 0, 9; 10, 18; 19, 27; etc.). I checked and rechecked my syntax and I don't understand why all the results would show. Below is the exact query I'm testing.</p>\n\n<p>Also to note, I'm using XAMPP</p>\n\n<pre><code>FROM acb_accfitems WHERE itemtype = 'furniture' ORDER BY price DESC LIMIT 0, 9\n</code></pre>\n"},{"tags":["mysql","windows"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":20,"score":-1,"question_id":13213053,"title":"MySQL won't start after Windows 7 Reboot","body":"<p>I have had my PC running for around 2 weeks with Apache/MySQL running and it has been fine.</p>\n\n<p>When I restarted my computer I went to the website and none of the Database information is appearing.</p>\n\n<p>mysqld.exe is not running in Task Manager and when I try to run it from the Command Prompt it does not run..</p>\n\n<p>There are no error logs or traces available.  I need to get the database information because a lot has changed since my last backup.  Is there a way to backup the database and fix this issue so I can get my MySQL Server running again?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["php","mysql","if-statement","logic","statement"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":13212329,"title":"Does these PHP if statements have a logic error?","body":"<p>Below is a script that is run when a Change Password button is clicked for a form. The form contains 2 password fields, one for the new password, and one for confirming the new password. Here is the action script of the form:</p>\n\n<pre><code>&lt;?php\nsession_start();\n\ninclude(\"func.php\");\n\n$NewPassword = mysql_real_escape_string(md5($_POST['newpassword']));\n$Confirm = mysql_real_escape_string(md5($_POST['confirmnewpassword']));\n$userid = $_SESSION['username'];\n\nif (!isset($NewPassword) || !isset($Confirm)) {\n    header(\"Location: ../error.php\");\n    die(\"Error\");\n}else if ($NewPassword &lt;&gt; $Confirm) {\n    header(\"Location: ../error.php\");\n    die(\"Error\");\n}else{\n    dbConnect();\n\n    mysql_query(\"UPDATE users SET password='$Confirm' WHERE username='$userid'\");\n\n    mysql_close($connect);\n\n    header(\"Location: ../profile.php\");\n    die(\"Success\");\n}\n?&gt;\n</code></pre>\n\n<p>Even when the 2 password fields on the form are empty or do not match, the password is still updated in the database. Any reason for why this could be?</p>\n\n<p>I appreciate any help offered.</p>\n"},{"tags":["mysql","wampserver"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":471,"score":0,"question_id":10736487,"title":"Wamp Server icon is red","body":"<p>I recently installed wamp server 2.2 in my system. But the icon is red for some weird reason. \nI am able to see phpmyadmin but when I open MySQL(http://localhost/phpmyadmin) it says</p>\n\n<p>MySQL said:  </p>\n\n<blockquote>\n  <p>#2002 - The server is not responding (or the local MySQL server's socket is not     correctly configured)</p>\n</blockquote>\n\n<p>I checked the task manager and I can only see wampmanager.exe running. \nI tested port 80 and it says </p>\n\n<blockquote>\n  <p>Your port 80 is actually used by:\n  server:  Apache/2.2.17(Wind32) PHP/5.3.5</p>\n</blockquote>\n\n<p>Also in Apache>Service start/resume service, stop service, restart service are disabled. </p>\n\n<p>Please tell me what is the issue.</p>\n"},{"tags":["mysql","database"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13212837,"title":"Mysql database design multiple values for multiple values","body":"<p>Sorry for my ignorance about mysql and databases, but I'm kind of learning it.</p>\n\n<p>So, suppose the following situation:</p>\n\n<p>I have a table with definitions (ball_definitions) of balls of different colors:</p>\n\n<pre><code>id color\n1 red\n2 blue\n3 green\n...\nN\n</code></pre>\n\n<p>where id is the primary value.</p>\n\n<p>and I have a second table (persons) with definitions of persons:</p>\n\n<pre><code>id name\n1 John\n2 Peter\n3 Michel\n...\nM\n</code></pre>\n\n<p>(where id is the primary key)</p>\n\n<p>Now, I want to relate to each person, the amount of owned balls by that persons, conceptually, something like this:</p>\n\n<pre><code>john: 1 red ball, 3 green ball, 0 blue ball\npeter: 3 red ball, 2 green ball, 1 blue ball.\n...\n</code></pre>\n\n<p>In such a way that both the M and N can vary (for portability reasons).</p>\n\n<p>My first tough was to let persons' table to have N columns where each column was referring to each color, but that is not portable (requires triggers of each change on the ball_definitions change, and it seems quite hard to query).</p>\n\n<p>On the other hand, creating a new table with a \"ManyToMany\" relation:</p>\n\n<pre><code>persons_id ball_definitions_id amount\n1 1 1\n1 2 3\n1 3 0\n2 1 3\n2 2 2\n2 3 1\n</code></pre>\n\n<p>seemed to me a little effort when either the number of persons or the number of balls change.</p>\n\n<p>Is there any better solution?</p>\n\n<p>Cheers,\nJorge</p>\n"},{"tags":["mysql","database","database-design"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13212457,"title":"database structure - how do I know I need multiple tables","body":"<p>How do you know if data should be in a separate table or all clumped into one table per product? Is there a general rule or best practice?</p>\n\n<p>For example.</p>\n\n<p>A product has a name, brand, classifications, directions, warnings, a recommended use,  comments, notes, restrictions.</p>\n\n<p>I could see how they could all benefit from separate tables but could it work just as well with comma separated entries all under one table of products?</p>\n\n<p>How do you know if a relational database is overkill or essential?</p>\n"},{"tags":["mysql","count","group-by","having"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13211635,"title":"'GROUP BY' and subquery optimization","body":"<p>I have two tables: <code>data</code> and <code>img</code> each raw from <code>data</code> having 0, 1 or n images in <code>img</code> table.\nI want to be able to get all records from <code>data</code> having more than 1 images in <code>img</code>. Cannot use JOINs because I can not edit the first part of the sql query: <code>SELECT some_defualt_columns FROM data WHERE</code>.\nHere are my solutions:</p>\n\n<p><strong>Solution 1</strong> Takes a while to perform but works</p>\n\n<pre><code>SELECT some_defualt_columns  FROM data WHERE `id` IN\n    (SELECT data_id FROM \n        (SELECT data_id, count(*) as occ FROM \n            img GROUP BY data_id \n            HAVING occ &gt;1)\n    AS tmp)\n</code></pre>\n\n<p><strong>Solution 2</strong> This should be faster than the previous (<a href=\"http://stackoverflow.com/questions/206062/mysql-view-with-subquery-in-the-from-clause-limitation\">MySQL: View with Subquery in the FROM Clause Limitation</a>) but this literally <strong>kills</strong> my MySQL server</p>\n\n<pre><code>SELECT *  FROM data WHERE id IN \n    (SELECT data_id FROM img \n         GROUP BY `data_id` \n         HAVING count(`data_id`) &gt; 1)\n</code></pre>\n\n<p><strong>SOLUTION 3</strong> Maybe the fastes but needs the creation of a view:</p>\n\n<pre><code>CREATE VIEW my_data_with_more_than_one_img AS \n    SELECT all_columns_of_data_table FROM \n        data JOIN img \n        GROUP BY img.data_id \n        HAVING (COUNT(img.data_id) &gt; 1\n</code></pre>\n\n<p>Than execute a simple <code>SELECT</code> on this:</p>\n\n<pre><code>SELECT * FROM my_data_with_more_than_one_img WHERE 1\n</code></pre>\n\n<p>This last solution is rather fast, but I want to know if is there any faster (or smarter) way to get this done</p>\n"},{"tags":["php","mysql","sql","sqlite","pdo"],"answer_count":5,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":410,"score":1,"question_id":9244053,"title":"SQLite syntax not compatible with MySQL?","body":"<p>I'm using PDO and trying to make my application support both MySQL and SQLite, but in sqlite I get this error when I try to import my database schema:</p>\n\n<p><code>SQLSTATE[HY000]: General error: 1 near \"AUTO_INCREMENT\": syntax error</code></p>\n\n<p>The query looks like this:</p>\n\n<pre><code>CREATE TABLE events (\n\n  id INT UNSIGNED NOT NULL AUTO_INCREMENT,\n  name VARCHAR(32) NOT NULL,\n  title VARCHAR(64) NOT NULL,\n  description LONGTEXT,\n  starttime DATETIME DEFAULT '0000-00-00 00:00:00',\n\n  PRIMARY KEY(id),\n  KEY name(name)\n\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;\n</code></pre>\n\n<p>(and it works in a MySQL database.)</p>\n\n<p>I don't understand what the problem is here? Shouldn't both database systems be compatible?</p>\n"},{"tags":["php","html","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":13211382,"title":"How to display answers and text inputs within each row","body":"<p>I have a question on how to display the correct table layout in my php code:</p>\n\n<p>I want to display answers and their text inputs in a table.. Now at the moment it is displayed as below:</p>\n\n<pre><code> Question             Answer        Marks Per Answer     \n What is 2+2          B             (text input)         \n Name the 3 hobbits?  BCE           (text input)  \n</code></pre>\n\n<p>I want to change the display of the table so that it looks like this below:</p>\n\n<pre><code> Question             Answer        Marks Per Answer \n What is 2+2?         B             (text input)\n Name the 3 Hobbits?  B             (text input)                   \n                      C             (text input)\n                      E             (text input)\n</code></pre>\n\n<ol>\n<li>As you can see from the new display. I want the each answer per question to be displayed in thier own row, not all answers per question in in one row which is what it is doing at moment.</li>\n<li>I want the text inputs to also be display in its own row, like the answers:</li>\n</ol>\n\n<p>My question is that how can point 1 and 2 be achieved so that it can match the new layout?</p>\n\n<p>Below is the code for the current display:</p>\n\n<pre><code>$assessment = $_SESSION['id'] . $sessionConcat;\n\ninclude('connect.php');\n\n   $query = \"SELECT q.QuestionId, q.QuestionContent, GROUP_CONCAT(DISTINCT Answer ORDER BY Answer SEPARATOR '') AS Answer, \n   FROM Question q\n   INNER JOIN Answer an ON q.QuestionId = an.QuestionId\n   WHERE s.SessionName = ?\n   \";\n\n        // prepare query\n        $stmt=$mysqli-&gt;prepare($query);\n        // You only need to call bind_param once\n        $stmt-&gt;bind_param(\"s\", $assessment);\n        // execute query\n        $stmt-&gt;execute(); \n\n\n        // This will hold the search results\n        $searchQuestionId = array();\n        $searchQuestionContent = array();\n        $searchAnswer = array();\n\n\n        // Fetch the results into an array\n\n        // get result and assign variables (prefix with db)\n        $stmt-&gt;bind_result($dbQuestionId, $dbQuestionContent, $dbAnswer);\n        while ($stmt-&gt;fetch()) {\n        $searchQuestionContent[] = $dbQuestionId;\n        $searchQuestionContent[] = $dbQuestionContent;\n        $searchAnswer[] = $dbAnswer;\n        }   \n\n        ?&gt;      \n\n        &lt;/head&gt;\n\n        &lt;body&gt;\n\n\n        &lt;form id=\"QandA\" action=\"&lt;?php echo htmlentities($_SERVER['PHP_SELF']); ?&gt;\" method=\"post\"&gt;\n\n        &lt;?php \n\n        echo \"&lt;table border='1' id='markstbl'&gt;\n        &lt;tr&gt;\n        &lt;th class='questionth'&gt;Question&lt;/th&gt;\n        &lt;th class='answerth'&gt;Answer&lt;/th&gt;\n        &lt;th class='answermarksth'&gt;Marks per Answer&lt;/th&gt;\n        &lt;/tr&gt;\\n\";\n\n        foreach ($searchQuestionContent as $key=&gt;$question) {\n        echo '&lt;td&gt;'.htmlspecialchars($question).'&lt;/td&gt;' . PHP_EOL;\n        echo '&lt;td class=\"answertd\"&gt;'.htmlspecialchars($searchAnswer).'&lt;/td&gt;' . PHP_EOL; \n        echo '&lt;td class=\"answermarkstd\"&gt;&lt;input class=\"individualMarks\" name=\"answerMarks[]\" id=\"individualtext\" type=\"text\" \"/&gt;&lt;/td&gt;' . PHP_EOL;\n        }\n        echo \"&lt;/table&gt;\" . PHP_EOL;\n\n        ?&gt;\n\n        &lt;/form&gt;\n\n        &lt;/body&gt;\n</code></pre>\n\n<p>Below is what Question Table looks like:</p>\n\n<p>Question Table:</p>\n\n<pre><code>QuestionId (auto)  QuestionContent\n1                  What is 2+2?\n2                  Name the 3 hobbits?\n</code></pre>\n\n<p>Answer Table:</p>\n\n<pre><code>AnswerId (auto)  QuestionId   Answer\n1                 1           B   \n2                 2           B\n3                 2           C\n4                 2           E\n</code></pre>\n"},{"tags":["mysql","ruby-on-rails","ruby-on-rails-3","ruby-on-rails-3.2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13212377,"title":"Rails and mysql. Any way to view tables?","body":"<p>I have just started out on rails and I've been using the mysql2 gem with it.\nI realised that on rails, migrations are used to alter tables in the database. </p>\n\n<p>So I was just wondering if there was anyway I could view the tables in Mysql?\nAnd also some way to make insertions, deletions etc more efficient?</p>\n"},{"tags":["java","mysql","security","hibernate","tomcat"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1049,"score":1,"question_id":6290015,"title":"Tomcat security manager - c3p0 and hibernate","body":"<p>I am using a Tomcat security enabled server, and Hibernate3 with c3p0.\nHere are my policies in catalina.policy (I found these lines on the net and changed a bit):</p>\n\n<pre><code>grant codeBase \"file:${catalina.base}/webapps/omiccir/-\" \n{\n\n    /////////////// FilePermission ////////// \n    permission java.io.FilePermission \"${catalina.home}/log4j.properties\", \"read\"; \n    permission java.io.FilePermission \"${catalina.home}/logging.properties\", \"read\"; \n    permission java.io.FilePermission \"${catalina.home}/hibernate.properties\", \"read\"; \n    permission java.io.FilePermission \"${java.home}/lib/xerces.properties\", \"read\"; \n    //permission java.io.FilePermission \"opproject.log\", \"write\"; \n    //permission java.io.FilePermission \"${catalina.home}/Onepoint Project Home/-\", \"read, write, delete\"; \n\n\n    // FIXME line below is VERY system specific, take care! \n    permission java.io.FilePermission \"/tmp/tomcat6-tmp\", \"write\"; \n\n\n    // thought it was java.io.tmpdir, but may be wrong // \n    permission java.io.FilePermission \"${java.io.tmpdir}/tomcat6-tmp\", \"write\"; \n\n\n    /////////////// LoggingPermission ////////// \n    permission java.util.logging.LoggingPermission \"control\"; \n\n\n    /////////////// PropertyPermission ////////// \n    permission java.util.PropertyPermission \"org.apache.cxf.Logger\", \"read\"; \n    permission java.util.PropertyPermission \"org.apache.commons.logging.*\", \"read\"; \n    permission java.util.PropertyPermission \"log4j.*\", \"read\"; \n    permission java.util.PropertyPermission \"logger.home\", \"read\"; \n    permission java.util.PropertyPermission \"user.*\", \"read\"; \n    permission java.util.PropertyPermission \"org.apache.xerces.*\", \"read\"; \n    permission java.util.PropertyPermission \"ONEPOINT_PROJECT_HOME\", \"read\"; \n    permission java.util.PropertyPermission \"com.sun.xml.bind.v2.*\", \"read\"; \n    permission java.util.PropertyPermission \"com.sun.xml.bind.v2.runtime.JAXBContextImpl.fastBoot\", \"write\"; \n    permission java.util.PropertyPermission \"cglib.debugLocation\", \"read\"; \n    permission java.util.PropertyPermission \"org.dom4j.*\", \"read\"; \n    permission java.util.PropertyPermission \"c3p0.*\", \"read\"; \n    permission java.util.PropertyPermission \"net.sf.ehcache.*\", \"read\"; \n    permission java.util.PropertyPermission \"ANTLR_DO_NOT_EXIT\", \"read\"; \n    permission java.util.PropertyPermission \"ANTLR_USE_DIRECT_CLASS_LOADING\", \"read\"; \n\n\n    /////////////// RuntimePermission ////////// \n    permission java.lang.RuntimePermission \"accessClassInPackage.sun.jdbc.odbc\"; \n    permission java.lang.RuntimePermission \"accessClassInPackage.org.apache.tomcat.util.http\"; \n    permission java.lang.RuntimePermission \"accessClassInPackage.org.apache.tomcat.util.http.res\"; \n    permission java.lang.RuntimePermission \"accessClassInPackage.sun.reflect.generics.reflectiveObjects\"; \n    permission java.lang.RuntimePermission \"accessClassInPackage.sun.util.calendar\"; \n    permission java.lang.RuntimePermission \"defineClassInPackage.java.lang\"; \n    permission java.lang.RuntimePermission \"getClassLoader\"; \n    permission java.lang.RuntimePermission \"getProtectionDomain\"; \n\n\n\n    /////////////// ReflectPermission ////////// \n    permission java.lang.reflect.ReflectPermission \"suppressAccessChecks\"; \n\n    permission java.net.SocketPermission \"*\", \"resolve\"; \n    permission java.net.SocketPermission \"localhost:5432\", \"connect,resolve\"; \n\n    //What is this line??\n    //permission java.net.SocketPermission \"www.onepoint.at:80\", \"connect,resolve\"; \n\n\n    /////////////// MBean...Permission ///////// \n    permission javax.management.MBeanServerPermission \"createMBeanServer\"; \n    permission javax.management.MBeanPermission \"com.mchange.v2.c3p0.*\", \"*\"; \n    permission javax.management.MBeanTrustPermission \"register\"; \n\n\n    permission java.util.PropertyPermission \"*\", \"read,write\"; \n}\n</code></pre>\n\n<p>I don't know what is wrong, but it seems that there is a problem with c3p0, and this goes away when I use Tomcat without a security manager.</p>\n\n<p>This is my stack trace:</p>\n\n<pre><code>org.apache.jasper.JasperException: org.hibernate.exception.GenericJDBCException: Cannot open connection\n    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:491)\n    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)\n    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)\n    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    java.lang.reflect.Method.invoke(Method.java:597)\n    org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)\n    java.security.AccessController.doPrivileged(Native Method)\n    javax.security.auth.Subject.doAsPrivileged(Subject.java:517)\n    org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:301)\n    org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:162)\n\nroot cause\n\norg.hibernate.exception.GenericJDBCException: Cannot open connection\n    org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:140)\n    org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:128)\n    org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)\n    org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:52)\n    org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:449)\n    org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)\n    org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:160)\n    org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:81)\n    org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1473)\n    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    java.lang.reflect.Method.invoke(Method.java:597)\n    org.hibernate.context.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:345)\n    $Proxy4.beginTransaction(Unknown Source)\n    ir.omicc.classes.Publisher.getTop5News(Publisher.java:100)\n    org.apache.jsp.index_jsp._jspService(index_jsp.java:229)\n    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)\n    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)\n    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    java.lang.reflect.Method.invoke(Method.java:597)\n    org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)\n    java.security.AccessController.doPrivileged(Native Method)\n    javax.security.auth.Subject.doAsPrivileged(Subject.java:517)\n    org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:301)\n    org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:162)\n\nroot cause\n\njava.sql.SQLException: Connections could not be acquired from the underlying database!\n    com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:106)\n    com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:529)\n    com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:128)\n    org.hibernate.connection.C3P0ConnectionProvider.getConnection(C3P0ConnectionProvider.java:78)\n    org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)\n    org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)\n    org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:160)\n    org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:81)\n    org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1473)\n    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    java.lang.reflect.Method.invoke(Method.java:597)\n    org.hibernate.context.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:345)\n    $Proxy4.beginTransaction(Unknown Source)\n    ir.omicc.classes.Publisher.getTop5News(Publisher.java:100)\n    org.apache.jsp.index_jsp._jspService(index_jsp.java:229)\n    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)\n    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)\n    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    java.lang.reflect.Method.invoke(Method.java:597)\n    org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)\n    java.security.AccessController.doPrivileged(Native Method)\n    javax.security.auth.Subject.doAsPrivileged(Subject.java:517)\n    org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:301)\n    org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:162)\n\nroot cause\n\ncom.mchange.v2.resourcepool.CannotAcquireResourceException: A ResourcePool could not acquire a resource from its primary factory or source.\n    com.mchange.v2.resourcepool.BasicResourcePool.awaitAvailable(BasicResourcePool.java:1319)\n    com.mchange.v2.resourcepool.BasicResourcePool.prelimCheckoutResource(BasicResourcePool.java:557)\n    com.mchange.v2.resourcepool.BasicResourcePool.checkoutResource(BasicResourcePool.java:477)\n    com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:525)\n    com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:128)\n    org.hibernate.connection.C3P0ConnectionProvider.getConnection(C3P0ConnectionProvider.java:78)\n    org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)\n    org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)\n    org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:160)\n    org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:81)\n    org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1473)\n    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    java.lang.reflect.Method.invoke(Method.java:597)\n    org.hibernate.context.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:345)\n    $Proxy4.beginTransaction(Unknown Source)\n    ir.omicc.classes.Publisher.getTop5News(Publisher.java:100)\n    org.apache.jsp.index_jsp._jspService(index_jsp.java:229)\n    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)\n    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)\n    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    java.lang.reflect.Method.invoke(Method.java:597)\n    org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)\n    java.security.AccessController.doPrivileged(Native Method)\n    javax.security.auth.Subject.doAsPrivileged(Subject.java:517)\n    org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:301)\n    org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:162)\n</code></pre>\n"},{"tags":["mysql","django","osx"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":30,"score":-1,"question_id":13211164,"title":"Setting up Django and Mysql on Mac os","body":"<p>I know there are tones of questions like that but sadly none of them resolved my problems and as I am new to django I don't know what is wrong.\nSo I installed django and mysql successfully, then the django-mysql package. When try to import the <code>MySQLdb</code> in python (running in the terminal) it works.\nBut my question is: how do you start mysql and create a database? And how to \"link\" it to django?\nI tried running <code>mysql</code> but it doesn't work. So I tried <code>/usr/local/mysql/bin/mysql</code> which throws an error <code>ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)</code>.</p>\n\n<p>What do I have to do?</p>\n"},{"tags":["mysql","ruby-on-rails"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13212349,"title":"What version of MySQL with Ruby On Rails 3.2.8?","body":"<p>I am reading through 'Pragmatic Agile Web Dev w/ Rails 4th edition for Version 3.2' and am preparing my production environment to use Mysql. I got to the point in the book where it says:</p>\n\n<p>\"There are plenty of alternatives to SQLite, both free and commercial. We will go with MySQL. It is available via your native packaging tool in Linux, and an installer is provided for OS X on the MySQL website.2 We recommend that you download MySQL 5.1, as MySQL 5.5 is known not to work with Rails 3.1.\"</p>\n\n<p><strong>Does anybody have experience with MySQL 5.5 and Rails 3.2.8?</strong> I am wondering what problems the book is referring to and if they have been resolved in the current stable version 3.2.8. <strong>Any suggestions on what version to use?</strong> </p>\n\n<p>Thanks in advance for your help!</p>\n"},{"tags":["mysql","foreign-keys","duplicates","constraints"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13212272,"title":"ON DUPLICATE KEY UPDATE causing foreign key constraint error","body":"<p>I searched the StackOverflow, but I couldn't find an answer to my specific question.</p>\n\n<p>Recently I have become a big fan of updating records with a list, using \"INSERT INTO...ON DUPLICATE KEY UPDATE.\" However, I had problems with the following query:</p>\n\n<pre><code>INSERT INTO itens (prod_id, qtd) VALUES (410, 1),(442, -1)\nON DUPLICATE KEY UPDATE qtd = qtd + VALUES(qtd)\n</code></pre>\n\n<p>That resulted in the error: \"Cannot add or update a child row: a foreign key constraint fails.\"</p>\n\n<p>Here is the structure of the table in question. \"carrinho_id\" is a foreign key. I was puzzled by the fact that I wasn't trying to do anything with the foreign key. I simply wanted to update the quantity.</p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS `itens` (\n `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n `carrinho_id` int(10) unsigned NOT NULL DEFAULT '1',\n `prod_id` int(10) unsigned NOT NULL DEFAULT '1',\n `qtd` int(12) NOT NULL DEFAULT '0',\n PRIMARY KEY (`id`),\n KEY `carrinho_id` (`carrinho_id`)\n) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=229 ;\n</code></pre>\n"},{"tags":["php","mysql","joomla","zoo"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":27,"score":-1,"question_id":13212014,"title":"Need make manual changes in Yootheme zoo database","body":"<p>I stuck with a problem with Yoothemes Zoo component. I have product application in Zoo with some custom fields: <code>teaser image, main image, teaser description, main description, language, country</code> and so on.</p>\n\n<p>I imported products into Zoo, but now I need to make certain changes. I need to run an update of all teaser description to make it 200 symbols long of main description. If that would be plain mysql, I'd run a query like </p>\n\n<p><code>UPDATE zoo_item SET teaser_description=LEFT(main_description, 200) WHERE 1</code>.</p>\n\n<p>Problem is, that <code>zoo_item</code> Element column is encoded with JSON and all I need is to make changes inside it. Of course, maintaining all escapes, single and double quotes and Unicode characters.</p>\n\n<p>Do you have any working solution to maintain database columns encoded in JSON?</p>\n"},{"tags":["mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":26,"score":-1,"question_id":13211974,"title":"insert assocative array data into mysql","body":"<p><strong>I have the following twitter data output in an associative array format in php, how can I insert this data into mysql database table. Kindly suggest any way to do this.</strong></p>\n\n<pre><code>Array (\n [created_at] =&gt; Fri, 02 Nov 2012 18:15:57 +0000 \n[from_user] =&gt; VolksblattNews \n[from_user_id] =&gt; 828753642 \n[from_user_id_str] =&gt; 828753642 \n[from_user_name] =&gt; Volksblatt News \n[geo] =&gt; [id] =&gt; 2.6443066310356E+17 \n[id_str] =&gt; 264430663103557632 \n[iso_language_code] =&gt; de \n[metadata] =&gt; Array ( [result_type] =&gt; recent ) \n[profile_image_url] =&gt; http://a0.twimg.com/profile_images/2619216207/VB_48x48_reasonably_small_normal.gif \n[profile_image_url_https] =&gt; https://si0.twimg.com/profile_images/2619216207/VB_48x48_reasonably_small_normal.gif \n[source] =&gt; &lt;a Google&lt;/a&gt; =&gt; Bundesrat Burkhalter verstÃ¤rkt Schweizer Beziehungen zu Burma: RANGUN - Didier Burkhalter hatâ€¦ http://t.co/BF3aX2bY \n[to_user] =&gt; \n[to_user_id] =&gt; 0 \n[to_user_id_str] =&gt; 0 [\nto_user_name] =&gt; )\n</code></pre>\n\n<p><strong>I got this output from the following program:</strong></p>\n\n<pre><code> &lt;?php\n\n//a json string\n\n$jsonstring='{\n\n\n\"created_at\": \"Fri, 02 Nov 2012 18:15:57 +0000\", \n   \"from_user\": \"VolksblattNews\", \n   \"from_user_id\": 828753642, \n   \"from_user_id_str\": \"828753642\", \n   \"from_user_name\": \"Volksblatt News\", \n   \"geo\": null, \n   \"id\": 264430663103557632, \n   \"id_str\": \"264430663103557632\", \n   \"iso_language_code\": \"de\", \n   \"metadata\": {\n    \"result_type\": \"recent\"\n   }, \n   \"profile_image_url\": \"http://a0.twimg.com/profile_images/2619216207/VB_48x48_reasonably_small_normal.gif\", \n   \"profile_image_url_https\": \"https://si0.twimg.com/profile_images/2619216207/VB_48x48_reasonably_small_normal.gif\", \n   \"source\": \"&amp;lt;a href=&amp;quot;http://www.google.com/&amp;quot;&amp;gt;Google&amp;lt;/a&amp;gt;\", \n   \"text\": \"Bundesrat Burkhalter verst\\u00e4rkt Schweizer Beziehungen zu Burma: RANGUN - Didier Burkhalter hat\\u2026 http://t.co/BF3aX2bY\", \n   \"to_user\": null, \n   \"to_user_id\": 0, \n   \"to_user_id_str\": \"0\", \n   \"to_user_name\": null\n\n}';\n\n$arrayvariable=json_decode($jsonstring,true);\n\nprint_r ($arrayvariable);\n\n?&gt;\n</code></pre>\n\n<p>Regards</p>\n"},{"tags":["mysql","subquery"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":13147244,"title":"MySQL query sub query or grouping","body":"<p>Each modx_site_content record may have several records in modx_site_tmplvar_contentvalues.</p>\n\n<p>I need to retrieve both modx_site_tmplvar_contentvalues.value where the tvv.tmplvarid = 3 AND the tvv.tmplvarid = 1. where tvv.tmplvarid is a future date, I need to return the tvv.value of tvv.tmplvarid 3 which is a comma separated list of tags.</p>\n\n<p>This query does not return the values I need &amp; I'm not sure how to get just what I want. </p>\n\n<pre><code>SELECT sc.id, sc.pagetitle, tvv.value, tvv.tmplvarid, tvv.id, tvv.value\nFROM modx_site_content sc\nleft join modx_site_tmplvar_contentvalues tvv on tvv.contentid = sc.id\nwhere published = '1' \nand (tvv.tmplvarid = '3' and tvv.value &gt;= curdate())\norder by sc.id;\n</code></pre>\n\n<p>basically in the end I need to return only the list of tags (tvv.tmplvarid = 3) where the other associated record (tvv.tmplvarid = 1) is a date in the future. </p>\n\n<p>Any thoughts, can this be done with grouping instead? I don't actually need anything from the modx_site_content table.</p>\n"},{"tags":["php","mysql","pdo"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13211983,"title":"PDO and classses getting the 'PDOException' error","body":"<p>I am getting an error: <code>Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY000] [2002] Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)' in /home/content/........</code></p>\n\n<p>Althought if I do it in one file, it works fine!</p>\n\n<p>My php file:</p>\n\n<pre><code>&lt;?php\nrequire 'includes/dbc.php';\n\n$dbc = new dbc();\n$db = $dbc-&gt;openDb();\n$stmt = $dbc-&gt;getAllUsers($db);\n\nwhile ($row = $stmt-&gt;fetch(PDO::FETCH_ASSOC)) {\n    echo $row['iduser'];\n}\n?&gt;\n</code></pre>\n\n<p>my database class:</p>\n\n<pre><code>&lt;?php\n\nclass dbc {\n\n    public $dbserver = '';\n    public $dbusername = '';\n    public $dbpassword = '';\n    public $dbname = '';\n\n    function openDb() {\n\n        $db = new PDO('mysql:host=' . $dbserver . ';dbname=' . $dbname . ';charset=utf8', '' . $dbusername . '', '' . $dbpassword . '');\n        return $db;\n    }\n\n    function getAllUsers($db) {\n        $stmt = $db-&gt;query(\"SELECT * FROM user\");\n        return $stmt;\n    }\n}\n\n?&gt;\n</code></pre>\n"},{"tags":["mysql","django","satchmo"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13208205,"title":"Migrating a satchmo store from sqlite3 to mysql","body":"<p>I have a fully functional satchmo store running on sqlite3. I need to change to mysql though. Whether I create a new database or port the old database, I get http error 500s in all sorts of places. For example if I have a new db, and I create a user account all seems to be fine. If I then attempt to update the user's profile (which is actually and extended user profile), immediately I get the server 500 error. Its like it just isn't interested in that URL any more (http://127.0.0.1:8000/accounts/update/)</p>\n\n<p>The weird thing is that if I log in as an admin and go to the admin pages, then I can update that user's (extended) profile no problem at all. In fact I've never seen any errors on the admin pages.</p>\n\n<p>Here is how I set it up for mysql:</p>\n\n<pre><code>apt-get install mysql-client  \napt-get install mysql-server  \napt-get install python-mysqldb  \nmysql -u root -p  \n    mysql&gt; USE mysql;  \n    mysql&gt; CREATE DATABASE mystore CHARACTER SET utf8;  \n    mysql&gt; GRANT ALL PRIVILEGES ON mystore.* TO storeuser@localhost IDENTIFIED BY 'secret';  \n    mysql&gt; FLUSH PRIVILEGES;  \n</code></pre>\n\n<p>settings.py:</p>\n\n<pre><code>DATABASE_ENGINE = 'mysql'       \nDATABASE_NAME = 'mystore'\nDATABASE_USER = 'storeuser'\nDATABASE_PASSWORD = 'secret'\nDATABASE_HOST = ''         \nDATABASE_PORT = ''         \nDATABASE_OPTIONS = { \"init_command\": 'SET NAMES \"utf8\"' , \"init_command\":'SET storage_engine=INNODB' , }\n</code></pre>\n\n<p>Then to create a new db I just did ths:</p>\n\n<p>python manage.py syncdb<br>\npython manage.py runserver</p>\n\n<p><strong>Edit 1</strong></p>\n\n<p>Here is the code where it bombs out:</p>\n\n<pre><code>class myExtendedContactInfoForm(ExtendedContactInfoForm):\ndef __init__(self, *args, **kwargs):\n     # The following line is where it produces the error\n    super(myExtendedContactInfoForm, self).__init__(*args, **kwargs)\n</code></pre>\n\n<p><strong>Edit 2</strong></p>\n\n<p>It seems like there is something missing from the db because if I go back to using a sqlite back-end, and then delete the sqlite db (and then run 'python manage.py syncdb') I get exactly the same symptoms. Seems like I need to do something more than just syncdb.</p>\n\n<p>What am I missing here?</p>\n"},{"tags":["php","javascript","mysql","magento"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13211183,"title":"Magento Custom Block for Javascript","body":"<p>Using Magento, I need to pass values from the database to javascript in json in a custom module. I am avoiding inline javascript due to CSP. I followed <a href=\"http://www.pierrefay.com/magento-create-block-44\" rel=\"nofollow\">http://www.pierrefay.com/magento-create-block-44</a></p>\n\n<p>I am having trouble with the type attribute for the block in the layout file. When I use page/html my javascript template file displays, but sends a text/html header instead of a text/javascript which I believe is a xss risk.</p>\n\n<p>When I try a custom type, like auction/history, the javascript layout does not load. Instead it shows a blank page with the standard shop design. Below are my files</p>\n\n<p>app/code/local/Mymodule/Auction/etc/config.xml</p>\n\n<p>Here I have a custom product view page in the blocks in addition to the new block I am trying to use for the javascript.</p>\n\n<pre><code>&lt;config&gt;\n...\n  &lt;frontend&gt;\n     &lt;routers&gt;\n        &lt;routeurfrontend&gt;\n            &lt;use&gt;standard&lt;/use&gt;\n            &lt;args&gt;\n                &lt;module&gt;Mymodule_Auction&lt;/module&gt;\n                &lt;frontName&gt;auction&lt;/frontName&gt;\n            &lt;/args&gt;\n        &lt;/routeurfrontend&gt;\n     &lt;/routers&gt;\n     &lt;layout&gt;\n       &lt;updates&gt;\n            &lt;auction&gt;\n                 &lt;file&gt;history.xml&lt;/file&gt;\n             &lt;/auction&gt;\n        &lt;/updates&gt;\n     &lt;/layout&gt;\n  &lt;/frontend&gt; \n\n  &lt;global&gt;\n    &lt;blocks&gt;\n        &lt;Mymodule_Auction&gt;\n            &lt;class&gt;Mymodule_Auction_Block_Catalog_Product_View&lt;/class&gt;\n        &lt;/Mymodule_Auction&gt;\n        &lt;catalog&gt;\n            &lt;rewrite&gt;\n                &lt;product_view&gt;Mymodule_Auction_Block_Catalog_Product_View&lt;/product_view&gt;\n            &lt;/rewrite&gt;\n        &lt;/catalog&gt;\n        &lt;auction&gt;\n                &lt;class&gt;Mymodule_Auction_Block&lt;/class&gt;\n        &lt;/auction&gt;\n    &lt;/blocks&gt;\n\n     ... (code for models and helpers) ...\n\n  &lt;/global&gt;\n&lt;/config&gt;\n</code></pre>\n\n<p>app/design/frontend/Mymodule/default/layout/history.xml  If I change the type=\"auction/history\" to \"page/html\" it displays but with text/html header instead of text/javascript</p>\n\n<pre><code>&lt;layout version=\"0.1.0\"&gt;\n     &lt;default&gt;\n          &lt;reference name=\"content\"&gt;&lt;/reference&gt;\n      &lt;/default&gt;\n    &lt;auction_index_history&gt;  \n        &lt;reference name=\"content\"&gt;\n            &lt;block type=\"auction/history\" template=\"auction/history.phtml\" /&gt;\n        &lt;/reference&gt;\n    &lt;/auction_index_history&gt;  \n&lt;/layout&gt; \n</code></pre>\n\n<p>app/code/local/Mymodule/Auction/Block/History.php</p>\n\n<pre><code>&lt;?php\nclass Mymodule_Auction_Block_History extends Mage_Core_Block_Template\n{\n     public function methodblock()\n     {\n         return ‘informations about my block !!’ ;\n     }\n}\n</code></pre>\n"},{"tags":["mysql","terminal"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":2369,"score":1,"question_id":7045295,"title":"MySQL: check what version : 32 bit or 64 bit?","body":"<p>Can I tell what version (32 bit or 64 bit) of MySQL I am running by using Terminal...if s</p>\n\n<p>I am on Snow Leopard.</p>\n"},{"tags":["javascript","mysql","json","sorting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13211709,"title":"javascript sort array by multiple (number) fields","body":"<p>How can I implement a</p>\n\n<pre><code> ORDER BY sort1 DESC, sort2 DESC\n</code></pre>\n\n<p>logic in an JSON array like such:</p>\n\n<pre><code>    var items = '[\n          {\n            \"sort1\": 1,\n            \"sort2\": 3,\n            \"name\" : \"a\",\n          },\n          {\n            \"sort1\": 1,\n            \"sort2\": 2,\n            \"name\" : \"b\",\n          },\n          {\n            \"sort1\": 2,\n            \"sort2\": 1,\n            \"name\" : \"c\",\n          }\n    ]';\n</code></pre>\n\n<p>resulting in the new order :</p>\n\n<pre><code>b,a,c\n</code></pre>\n"},{"tags":["php","mysql","php-form-processing","sql-insert"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13211578,"title":"MySQL db not updating from form with php processing","body":"<p>Using the code</p>\n\n<pre><code># the data we want to insert\n$data = array($first_name, $last_name, $email_from, $telephone, $dateofbirth, $addresslone, $addressltwo, $townnm, $countynm, $typeapp, $issubscribed);\n$STH = $dbh-&gt;prepare(\"INSERT INTO members (fname, sname, email, phone, dob, addressl1, addressl2, town, county, type, subscribed) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\");\n$STH-&gt;execute($data);\n\n\n?&gt;\n&lt;!--&lt;!DOCTYPE html&gt;\n&lt;head&gt;&lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt; commented out during testing --&gt;\n\nThank you for contacting us  We will be in touch with you very soon.\n\n&lt;!-- &lt;/body&gt;&lt;/html&gt; --&gt;\n</code></pre>\n\n<p>The user is presented with the success message: </p>\n\n<blockquote>\n  <p>Thank you for contacting us  We will be in touch with you very soon.</p>\n</blockquote>\n\n<p>There are no php errors recorded.</p>\n\n<p>This is to insert into this database <img src=\"http://i.stack.imgur.com/PxQG4.png\" alt=\"MQL columns\"></p>\n\n<p>Error reporting is in the form of the PDO try catch:</p>\n\n<pre><code>catch(PDOException $e)\n    {\n    echo $e-&gt;getMessage();\n    }\n</code></pre>\n\n<p>Despite it looking as if it is working perfectly, however, the database seems unable to receive updates. :/</p>\n"},{"tags":["php","mysql","date","timezone","offset"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13206383,"title":"Timezone issues using unix time, php, mysql","body":"<p>I spend over 8 hours last night to check all the documentations, browsing various post etc and I almost fixed my problem, yet there is stil something missing that I can't understand. </p>\n\n<p>I have a table which stores various user submissions with a unix timestamp (e.g. 1351867293). I am extracting this information and counting it in order to get a total number for submissions \"today\", \"yesterday\", \"this week\" and so on. </p>\n\n<p>The code I was using (for \"today submissions\") was: </p>\n\n<pre><code>WHERE DATE(from_unixtime(comment_date)) = CURRENT_DATE\";\n</code></pre>\n\n<p>So far so good, but there was a time offset and the data wasn't displayed correctly. A user here on stackoverflow suggested to use CONVERT_TZ in order to get the offset fixed. </p>\n\n<p>And here is the point where I am stuck. I am located in the CST timezone and my server seems to be located in the EST timezone. So I used this code</p>\n\n<pre><code> WHERE DATE(CONVERT_TZ(from_unixtime(comment_date), 'EST', 'CST')) = CURRENT_DATE\";\n</code></pre>\n\n<p>...but it shows me only \"0\" as a result, though I have submissions for today. I tried different timezones but they all give me \"0\" as a result. When I replace EST and CST with numbers, for example:</p>\n\n<pre><code> WHERE DATE(CONVERT_TZ(from_unixtime(comment_date), '+00:00', '+07:00')) = CURRENT_DATE\";\n</code></pre>\n\n<p>... I get a numeric output, but the number is not right. I tried a lot of combinations, including +08:00, -05:00, but nothing seems to work. </p>\n\n<p>Basically what I am asking is what values to I have to place as those two numbers, in order to get correct results? Everything else on my website works and displays correctly in my timezone (CST), I am having only problems with this query. </p>\n\n<p>The IP of my server is 50.116.13.130 if that helps. </p>\n"},{"tags":["sql","mysql","join","query-optimization"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1924,"score":1,"question_id":3257575,"title":"Mysql query with Left Join is too very slow","body":"<p>Query:</p>\n\n<pre><code>   select `r`.`id` as `id` \n     from `tbl_rls` as `r` \nleft join `tblc_comment_manager` as `cm` on `cm`.`rlsc_id` != `r`.`id`\n</code></pre>\n\n<p>Both tables have 8k records but why is it very slow, taking 2-3 minutes and more sometimes?</p>\n\n<p>OMG , this query makes mysql server down. Will get back to you peoples in a second :(</p>\n\n<p>All peoples those suggested Indexing the columns are all Correct.\nYeh the query i wrote was silly and buggy. Thanks correcting me.</p>\n"},{"tags":["php","mysql","sql","database"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":13211439,"title":"SQL copy data from one column to another table specified column","body":"<p>i have two tables name called by <strong><code>order</code></strong> and <strong><code>order_product</code></strong>, both tables have a column same name <code>model</code>, <code>order_product</code> <code>model</code> column have lots of data, but <code>order</code> <code>model</code> empty field. </p>\n\n<p>i want copy <code>model</code> data from table <code>order_product</code> to <code>model</code> table <code>order</code>, how can i do this.? </p>\n\n<p>i tried some SQL query, but the result not like really what i want, its look all field will be duplicate...</p>\n\n<pre><code>INSERT INTO `order` (model) SELECT (model) FROM `order_product`\n</code></pre>\n"},{"tags":["mysql","postfix"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13211567,"title":"Store incoming email messages in mysql automatically","body":"<p>I am a newbieto email servers. My research shows Virtual Email Boxes for <code>POSTFIX</code> store email messages in directories of each virtual email created on the server and NOT in a database like I would like. </p>\n\n<p>What is the best way to automatically check every incoming message immediately as they come in all the directories so I can write each to the MySQL database OR is there configurations that can be set in <em>postfix</em> or <strong>sendmail</strong> to do this for me.</p>\n"},{"tags":["php","mysql","optimization"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13211281,"title":"Working with PHP and MySQL - need a good and secure OO design","body":"<p>I am new to PHP-> first time developer. I am working on my web application and it is nearly done; nevertheless, most of my sql was done directly via code using direct mysql requests. This is the way I approached it:</p>\n\n<p>In <strong>classes_db.php</strong> I declared the db settings and created methods that I use to open and close DB connections. I declare those objects on my regular pages:</p>\n\n<pre><code>class classes_db {\n\n    public $dbserver = 'server;\n    public $dbusername = 'user';\n    public $dbpassword = 'pass';\n    public $dbname = 'db';\n\n    function openDb() {\n        $dbhandle = mysql_connect($this-&gt;dbserver, $this-&gt;dbusername, $this-&gt;dbpassword);\n        if (!$dbhandle) {\n            die('Could not connect: ' . mysql_error());\n        }\n        $selected = mysql_select_db($this-&gt;dbname, $dbhandle)\n                or die(\"Could not select the database\");\n\n        return $dbhandle;\n    }\n\n\n    function closeDb($con) {\n        mysql_close($con);\n    }\n}\n</code></pre>\n\n<p>On my regular page, I do this:</p>\n\n<pre><code>&lt;?php\nrequire 'classes_db.php';\nsession_start();\n\n//create instance of the DB class\n$db = new classes_db();\n\n//get dbhandle\n$dbhandle = $db-&gt;openDb();\n\n//process query\n$result = mysql_query(\"update user set username = '\" . $usernameFromForm . \"' where iduser= \" . $_SESSION['user']-&gt;iduser);\n\n//close the connection\nif (isset($dbhandle)) {\n    $db-&gt;closeDb($dbhandle);\n}\n\n?&gt;\n</code></pre>\n\n<p>My questions is: how to do it right and make it OO and secure? I know that I need incorporate prepared queries-> how to do it the best way? Please provide some code</p>\n"}]}
