{"total":29155,"page":1,"pagesize":100,"questions":[{"tags":["json","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13271841,"title":"How to get the JsonResult of a ControllerAction into the ViewModel as a string without AJAX?","body":"<p>So I've got a Controller action that takes a string and returns a JsonResult:</p>\n\n<pre><code>public JsonResult GetMemberJSON(string memberNumber)\n{\n      var t = new { foo = memberNumber }; // does more crap, greatly simplified here....\n      return Json(t, JsonRequestBehavior.AllowGet);\n}\n</code></pre>\n\n<p>And I want to 'print' that JSON directly into the HTML of the View so that JavaScript that runs from that view can see the JSON at pageload. I do NOT want to Ajax in this JSON, there is no reason I can tell that I shouldn't be able to grab this JSON somehow in code.</p>\n\n<p>My ViewModel that needs to hold this JSON is:</p>\n\n<pre><code>public class MakePaymentViewModel : IValidatableObject \n{\n    public MyClassBlah Blah { get; set; }\n    public string MemberJSONInfo { get; set }\n\n    public void LoadThings(string memberNumber) \n    {\n        this.Blah = MyClassBlah.Get(memberNumber);\n        this.MemberJSONInfo = \"\"; // what goes here???\n    }\n}\n</code></pre>\n\n<p>And my View that will handle the JSON string as JavaScript code is:</p>\n\n<pre><code>&lt;div&gt;\n    &lt;script&gt;\n        $(document).ready(function () {\n            var json = @(new HtmlString(Model.MemberPACJSONInfo)); // mixing JS and Razor here....\n            Library.PaymentDetailManager.BlockPACFieldsAsNeeded(json);\n        });\n    &lt;/script&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I know that I CAN get this to work if the Controller action returns String instead of JsonResult, but that feels wrong to me. Also, if I run the JsonResult through the System.Web.Script.Serialization.JavaScriptSerializer() (which seems dumb to do), I get valid JSON, but it looks like: </p>\n\n<pre><code>// viewmodel\nvar cont = new MembershipCenter.Controllers.MembershipController();\nvar oSerializer = new System.Web.Script.Serialization.JavaScriptSerializer();\nvar jsonResult = cont.GetMemberJSON(this.Member.Id);\nthis.MemberPACJSONInfo = oSerializer.Serialize(jsonResult);\n\n// here's how it renders in the View\n{\"ContentEncoding\":null,\"ContentType\":null,\"Data\":{\"foo\":\"990006\"},\"JsonRequestBehavior\":0}\n</code></pre>\n\n<p>Is the above the best I can ask for? I guess it can work, but I am wondering why calling ToString() on a JsonResult doesn't just print out the JSON? </p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13298077,"title":"MVC3 Jquery viewdata disable button","body":"<p>The following piece of code is not disabling the html button. I am using MVC3 razor . Can anyone point out where I am going wrong</p>\n\n<pre><code>@{\n   bool disablebutton = bool.Parse(ViewData[\"Disablebutton\"].ToString());        \n }    \n\n $(document).ready(function () {  \n   if (@disablebutton) {\n     $('#abc').attr('disabled', 'disabled');\n   }       \n });\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5,"score":0,"question_id":13298148,"title":"Periodic query, do nothing if no change","body":"<p>By having the following line in a razor view:</p>\n\n<pre><code>&lt;META HTTP-EQUIV=\"REFRESH\" CONTENT=\"5\"&gt;\n</code></pre>\n\n<p>A controller can magically wake up every 5 second and query the database, show the data:</p>\n\n<pre><code>return View(myViewModel);\n</code></pre>\n\n<p>But if myViewModel is found to be the same as previous one, I want to do nothing leaving my page as it is (to prevent flicker). How can I accomplish this?</p>\n\n<p>Thanks in advance. Bob</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mobile","jquery-mobile"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13223970,"title":"MVC3 with jQuery mobile, having different layout page and views","body":"<p>I thought what I am trying to do what already built in, but it does not seem to be working. From what I understood, with asp.net MVC you can name your views like this:</p>\n\n<pre><code>_view.cshtml\n\n_view.Mobile.cshtml\n</code></pre>\n\n<p>and it would use the mobile one if coming from a mobile device, and use the non-mobile one on desktops.</p>\n\n<p>It is not automatically doing this for me, is there something else I need to do? I have all the jquery mobile scripts and css referenced.</p>\n"},{"tags":["asp.net-mvc-3","razor","telerik","telerik-grid","telerik-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13265470,"title":"Passing Column Values to PopUp Window through Custom Command in ASP.NET Telerik Grid","body":"<p>I have a telerik grid in my index.cshtml and i created a custom Edit Command in my Grid. I want that whenever i click on edit i want to pass every column value to a PopUp window i created and assign those values to text boxes inside PopUp Window.</p>\n\n<p>My Grid looks like as follows</p>\n\n<pre><code>@(Html.Telerik().Grid&lt;POModel&gt;().Name(\"PurchaseOrders\")\n\n     .DataKeys(keys =&gt; keys.Add(o =&gt; o.WorkOrderPaymentID))\n    .Columns(columns =&gt;\n                {\n                    columns.Bound(o =&gt; o.SuppliersInvoiceNumber).HeaderTemplate(\"&lt;div&gt;Invoice Number&lt;/div&gt;\") ;\n                    columns.Bound(o =&gt; o.PONumber).HeaderTemplate(\"&lt;div&gt;PO Number&lt;/div&gt;\").ReadOnly().Width(215);\n                    columns.Bound(o =&gt; o.VendorName).HeaderTemplate(\"&lt;div&gt;Vendor Name&lt;/div&gt;\").ReadOnly();\n\n                    columns.Bound(o =&gt; o.AmountPaidToSupplier).HeaderTemplate(\"&lt;div&gt;Total PO Amount&lt;/div&gt;\").Format(\"{0:c}\").ReadOnly();\n\n\n                    columns.Command(commands =&gt; commands\n                 .Custom(\"Edit\")\n                 .Text(\"Edit\")\n                 .SendState(false)\n                 .DataRouteValues(route =&gt;\n                 {\n                     route.Add(o =&gt; o.SuppliersInvoiceNumber).RouteKey(\"InvoiceNumber\");\n                     route.Add(o =&gt; o.PONumber).RouteKey(\"PONumber\");\n                     route.Add(o =&gt; o.VendorName).RouteKey(\"VendorName\");\n                     route.Add(o =&gt; o.AmountPaidToSupplier).RouteKey(\"AmountPaid\");\n                 })\n                   .Ajax(true)\n\n                 .Action(\"editPOList\", \"PurchaseOrder\", new { invoiceID = Model.selectedInvoiceID }));\n\n\n\n                })\n\n\n\n\n       .DataBinding(dataBinding =&gt; dataBinding.Ajax().Select(\"getPOList\", \"PurchaseOrder\", new { invoiceID = Model.selectedInvoiceID }))\n\n    .Scrollable()\n    .Editable(editing =&gt; editing.Enabled(true))\n\n\n  .Sortable() )\n</code></pre>\n\n<p>What my Grid Action for Edit should look like if i want to pass all the column values to PopUp Window?? </p>\n"},{"tags":["javascript","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":4,"up_vote_count":8,"down_vote_count":0,"view_count":871,"score":8,"question_id":8345355,"title":"Share enums between C# and Javascript in MVC Razor","body":"<p>I have seen this useful answer to a question for adding constants into a javascript file so it can be used with razor views: <a href=\"http://stackoverflow.com/questions/6217028/share-constants-between-c-sharp-and-javascript-in-mvc-razor\">Share constants between C# and Javascript in MVC Razor</a></p>\n\n<p>I'd like to be able to do the same except define enums, but I'm not sure how to convert the C# Enum into a constant in javascript.</p>\n\n<p>Off GetType(), there doesn't seem to be a way of actually getting at the constant value.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","web-services","security"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13296254,"title":"Will using a master login username and password when implementing web services considered secure","body":"<p>I am working on an asp.net mvc-4 web application and I have started implementing some web services which provides statistical information about my site. But to make sure that only authorized and authenticated consumers can call and consume the web services I am thinking of defining a master login username and password for each consumer, and when a consumer sends a web service request he should include these master login username and password (stored as a hash value ) in the web service calls.</p>\n\n<p>For example the web service link to call specific web service from my web site will look as follow:-</p>\n\n<pre><code>/web/json/statistic/getsummaryinfo/areacode?j_username=masterusername&amp;hash=D012B772672A55A0B561EAA53CA7734E\n</code></pre>\n\n<p><strong>So my question is whether the approach I am following will provide a secure solution to my web services and to the consumers? OR my approach have security holes I am unaware of ?</strong></p>\n\n<p><strong>:::EDITED::</strong></p>\n\n<p>I am using the WebAPI controllers to implement the web services inside my asp.net mvc-4.**</p>\n\n<p>Best Regards</p>\n"},{"tags":["asp.net-mvc-3","localization","model-validation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6,"score":0,"question_id":13297184,"title":"Localized modelvalidation not working in ie < 9","body":"<p>I'm using localized modelvalidation in my mvc 3 application. I did this with the Required attribute and a errormessage resource. This works on almost all browsers, except ie 7 and 8. Below you can find the sample code that I used. </p>\n\n<p>Sample code:</p>\n\n<pre><code>    [Required(ErrorMessageResourceName = \"Error_field_is_required\", ErrorMessageResourceType = typeof(Global))]\n    [StringLength(90, ErrorMessageResourceName = \"Error_max_string_90\", ErrorMessageResourceType = typeof(Global))]\n    public string LastName { get; set; }\n</code></pre>\n"},{"tags":["jquery","ajax","asp.net-mvc-3","error-handling"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6,"score":0,"question_id":13297146,"title":"Displaying server-side model-state errors on client side via ajax in ASP.NET MVC 4","body":"<p>Scenario:</p>\n\n<p>I invoke controller action of MVC4 web application via jquery $.ajax({...}) call and pass details about user I wish to save.\nWeb application connects to back-end private API and sends user data, and API returns response indicating that Username is already in use.\nI want to display property state error on property Username in a place where regular client-side validation error message would appear.</p>\n\n<p>Currently I do it manually but I'm wondering if there is jQuery compatible library that would render property-state errors for me in a way that I provide key/value errors as response from action, and library handles the rest.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":3472,"score":1,"question_id":6695022,"title":"ASP.Net MVC 3 - CheckBoxList - Need some suggestions","body":"<p>I am pretty new to ASP.Net MVC (and razor) and I have a few questions.</p>\n\n<p>1) </p>\n\n<p>I created an HTML extension to create a check box list as below:</p>\n\n<pre><code>public static HtmlString CheckBoxList(this HtmlHelper htmlHelper, string name, List&lt;InputItemInfo&gt; ItemInfo)\n        {\n            if (String.IsNullOrEmpty(name))\n                throw new ArgumentException(\"The argument must have a value\", \"name\");\n            if (ItemInfo == null)\n                throw new ArgumentNullException(\"ItemInfo\");\n            if (ItemInfo.Count &lt; 1)\n                throw new ArgumentException(\"The list must contain at least one value\", \"ItemInfo\");\n\n            StringBuilder sb = new StringBuilder();\n\n            ItemInfo.Insert(0, new InputItemInfo(\"*\", \"Select All\", ItemInfo.All(i =&gt; i.IsChecked)));\n\n            foreach (InputItemInfo info in ItemInfo)\n            {\n                TagBuilder builder = new TagBuilder(\"input\");\n                if (info.IsChecked) builder.MergeAttribute(\"checked\", \"checked\");\n                builder.MergeAttribute(\"type\", \"checkbox\");\n                builder.MergeAttribute(\"value\", info.Value);\n                builder.MergeAttribute(\"name\", name);\n                builder.InnerHtml = info.DisplayText;\n                sb.Append(builder.ToString(TagRenderMode.Normal));\n                sb.Append(\"&lt;br /&gt;\");\n            }\n\n            return new HtmlString(sb.ToString());\n        }\n</code></pre>\n\n<p>I was able to use this in my views and also get the values in the controller as shown below:</p>\n\n<pre><code>@model List&lt;AppTest.Models.InputExtensionsViewModel&gt;\n\n@{\n    ViewBag.Title = \"Check\";\n}\n\n&lt;h2&gt;Check&lt;/h2&gt;\n\n@using (Html.BeginForm())\n{\n    &lt;table border=\"0\" style=\"border:0px;\"&gt;\n        &lt;tr&gt;\n            &lt;td valign=\"top\"&gt;\n                @Html.Partial(\"CheckBoxList\", Model[0])\n            &lt;/td&gt;\n\n        &lt;/tr&gt;\n    &lt;/table&gt;\n\n    &lt;br /&gt;\n\n    &lt;input type=\"submit\" value=\"Go\" /&gt;\n}\n\n&lt;div style=\"font-weight:bolder\"&gt;\n    @ViewData[\"data\"]\n&lt;/div&gt;\n</code></pre>\n\n<p>controller:</p>\n\n<pre><code>public ActionResult Check()\n        {\n            var model = new List&lt;InputExtensionsViewModel&gt;();\n\n            var model1 = new InputExtensionsViewModel\n            {\n                Title = \"Facilities\",\n                InputElementName = \"facilities\",\n                InputElements = // a list\n            };\n\n            model.Add(model1);\n            return View(model);\n       }\n\n    [HttpPost]\n    public ActionResult Check(string[] facilities)\n    {\n               ...\n    }\n</code></pre>\n\n<p>The model is:</p>\n\n<pre><code>public class InputExtensionsViewModel\n    {\n        public string Title { get; set; }\n        public string InputElementName { get; set; }\n        public List&lt;InputItemInfo&gt; InputElements { get; set; }\n\n        public void SetSelected(string[] items)\n        {\n            if (items == null)\n                return;\n\n            this.InputElements.ForEach(delegate(InputItemInfo info)\n            {\n                if (items.Contains(info.Value))\n                    info.IsChecked = true;\n            });\n        }\n    }\n</code></pre>\n\n<p>My question is, is there a way by which I could bind the array items to a property in the InputExtensionsViewModel model? If I just add a property called facilities to the view model, it's not bound automatically and I can understand why, as I am not binding that in my view. But I cannot seem to think of a way by which I could do that.</p>\n\n<p>This check box list is a user control and I just wanted to avoid having too many string[] array for my action methods.</p>\n\n<p><em>[EDIT] - Okay, I was able to do this when I tried now. Not sure why it didn't work before.</em></p>\n\n<p>2) And, I was checking for alternatives and found out this answer in SO:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/4872192/checkboxlist-in-mvc3-0\">CheckboxList in MVC3.0</a></p>\n\n<p>And I was able to replicate this but my question is, how do i bind a label to this checkbox? My labels are dynamic and part of the model and so cannot be hard-coded. I was trying to use a Html.LabelFor but that didn't work. In the editor template, if I just @Model.Text, it won't work and will be lost after a post-back as its not bound to a property</p>\n\n<p>I googled and found suggestions to create HTML helpers which is what I did earlier (my 1st question is about that).</p>\n\n<p>Please let me know if something is unclear. I could elaborate. Any input is appreciated!</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":23,"up_vote_count":32,"down_vote_count":0,"view_count":22548,"score":32,"question_id":4872192,"title":"CheckboxList in MVC3.0","body":"<p>How can I create a checkboxList in asp.net MVC and then to handle the event with the checkboxList</p>\n"},{"tags":["asp.net-mvc-3","jquery-validate","unobtrusive-validation"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1277,"score":3,"question_id":9707973,"title":"Validate a Hidden Field","body":"<p>I'm using MVC3 with unobtrusive validation. I have a field that the user is expected to fill with some data and then press a \"search\" button. If search has never been pressed or the user has changed the input field after pressing search, the form should not be possible to submit.</p>\n\n<p>I've added a hidden field that is set to <code>true</code> by the <code>click()</code> event of the button and emptied by the <code>keyup()</code> event of the input box. Now I would like to add a validation rule that requires the hidden field to be <code>true</code> to allow submit.</p>\n\n<p>Preferably I would like to use unobtrusive validation, but if that doesn't work it is ok with something that requires some javascript, as long as it doesn't spoil the unobtrusive validation for the rest of the form.</p>\n\n<p>The following code snippet does exactly what I want, until I add <code>type=\"hidden\"</code>.</p>\n\n<pre><code>&lt;input class=\"required\" id=\"client-searched\" data-val=\"true\" \n  name=\"ClientSearched\" data-val-required=\"Press search!\"/&gt;\n&lt;span class=\"field-validation-valid\" data-valmsg-replace=\"true\" \n  data-valmsg-for=\"ClientSearched\"/&gt;\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13292110,"title":"MVC listener in View","body":"<p>Currently I make an ajax request (every interval) from a view to get a response from a controller and update view element accordingly. Is there a way to FLIP it other way around? That is to have the listener on the View and controller would fire an event to update the view?. any examples greatly appreciated.\nthanks</p>\n"},{"tags":["asp.net","asp.net-mvc-3","performance","iis-7.5"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":8,"score":2,"question_id":13295313,"title":"File upload and result pooling kills ASP.NET web app","body":"<p>We have created <code>ASP.NET MVC app</code> which accept <code>file upload</code>(up to 80mb) and has <code>result pooling implemented by AsincController</code>. Hosted on Windows 2008 R2 IIS7.5 .NET 4. Server 2 Cores 2.6GHZ, 2GB Ram, fast HDD.</p>\n\n<p>The web site has many users and Performance Monitor show <code>ASP.NET Requests/Sec ~15</code> and <code>Request Current ~270</code></p>\n\n<p>After several minutes ASP.NET starts <code>queuing request</code> and <code>ASP.NET Request Queued</code> counter starts growing and application become extremely slow. I am hunting the problem almost a month, tried to profile code, no performance issues and no memory leaks.  Increased <code>maxWorkerThreads to 400</code> and <code>maxIoThreads to 400</code>. Set <code>maxConcurrentRequestsPerCPU to 5000</code> and <code>MaxConcurrentThreadsPerCPU to 0</code> but that either didn't helps.</p>\n\n<p>One thing which seems helps is increasing app pool Maximum Worker Processes to two or three processes and making app pool web garden. After that Request Current jumps to ~350 and no request queuing. But web garden introduce several new issues which we will not mention here. </p>\n\n<p>Please post any suggestions how we could increase application performance without making our app run in IIS pool web garden?</p>\n"},{"tags":["sql","asp.net-mvc","asp.net-mvc-3","foreach"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13294801,"title":"SQL View + foreach not looping through results","body":"<p>I have a view that is returning a resultset LEFT OUTER JOIN from a SQL Database.  I'm using MVC 3 to display a partial view based on the resultset.  But....</p>\n\n<pre><code>@foreach (var category in Model.FeeScheduleRates().Distinct())\n{\n     &lt;tr&gt;&lt;td colspan=\"2\"&gt;@category.Category&lt;/td&gt;&lt;/tr&gt;\n     foreach (var item in Model.FeeScheduleRates()\n                               .Where(i=&gt;i.Cat_ID == category.Cat_ID))\n     {                               \n         &lt;tr&gt; \n             &lt;td&gt;@item.Fee_Title - @item.Description&lt;/td&gt;\n             &lt;td&gt;@item.Amount&lt;/td&gt;                                        \n         &lt;/tr&gt;\n     }                                   \n}\n</code></pre>\n\n<p>The view isn't looping through the second foreach loop.  Rather, it repeats the first entry as many times as there are matching records.  So it should create a table with a row spanning two columns for each category, and then display the items in that category (Title, Description and amount.</p>\n\n<p>Why doesn't the second foreach loop work?</p>\n\n<p>EDIT:  As requested The View</p>\n\n<pre><code>SELECT  TOP (100) PERCENT a.Cat_ID, a.Fee_Title, a.Description, a.Amount, b.Category\nFROM     dbo.Fee_Schedule AS a LEFT OUTER JOIN\n           dbo.Fee_Categories AS b ON a.Cat_ID = b.Cat_ID\nORDER BY a.Cat_ID\n</code></pre>\n"},{"tags":["asp.net","email","asp.net-mvc-3","sendmail"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":597,"score":2,"question_id":5919333,"title":"best practice to send fancy email in ASP.NET & MVC","body":"<p>HI,</p>\n\n<p>I want to send a very fancy email to users.\nthats look and feel is same as a web page.</p>\n\n<p>one very bad way to use StringBuilder and append text in it.</p>\n\n<p>but i am in search of a best practice solution. where the page is easy to redesign.</p>\n\n<p>I need solution for both ASP.NET &amp; MVC.</p>\n\n<p>any idea.</p>\n\n<p>thanks,</p>\n"},{"tags":["asp.net-mvc-3","dataannotations","modelstate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13293938,"title":"Require property if parent class is required","body":"<p>I have a problem with MVC3 model validation and DataAnnotations</p>\n\n<p>I have the following classes:</p>\n\n<pre><code>public class A\n{\n    public C SomeProperty {get;set;}\n}\n\npublic class B\n{\n    [Required]\n    public C SomeProperty {get;set;}\n}\npublic class C\n{\n    [Required]\n    public string SomeSubProperty {get;set;}\n}\n</code></pre>\n\n<p>This is because C can be required for some objects and not required for others, but if C is required i want SomeSubProperty to also be required.</p>\n\n<p>However when i call ModelState.IsValid in my controller it will return false when using both A and B as models if SomeSubProperty is not set. Is there any way i can produce this behaviour?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13293207,"title":"ASP.NET MVC optional field being treated as required","body":"<p>I have this field that for some reason when I click on submit, gets a validation message that the field is required.</p>\n\n<pre><code>[DisplayName(\"Total Budget:\")]\npublic double Budget { get; set; }\n\n\n@Html.EditorFor(model =&gt; model.account.Budget)\n@Html.ValidationMessageFor(model =&gt; model.account.Budget)\n\n\n\n\n  public class Account\n    {\n\n        [DisplayName(\"Total Budget:\")]\n        public double Budget { get; set; } //dropdown\n\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","cookies","session-cookies"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13291159,"title":"ASP.NET MVC 3 Cookies get lost","body":"<p>I am sending domain cookies from one site to my asp.net mvc application , there I setting Authentication cookie , </p>\n\n<p>In My Action Filter I can't see that cookie appears , but if I am looking in BeginRequest event of global.asax there is cookie there. Any Ideas why cookies getting lost on their way to the Action Filter ?</p>\n\n<p>Thanks.</p>\n\n<p>Adding of </p>\n\n<pre><code> &lt;machineKey validationKey=\"4B79DF965DC586D2B267BDECB4580D40EE6811EE171AC65D929BECD8865C09ED8681B92F2177FE9F72B8E822B26914C79C1FF590CCEE65469CBC6FACD7D9F203\" decryptionKey=\"SOmeKey\" validation=\"SHA1\" /&gt;\n</code></pre>\n\n<p>doesn't helped...</p>\n\n<p>Don't know what to do with this...\nUpdate2:\nI can see in Application_BeginRequest - 2 cookies , then when break point hits my custom action filter</p>\n\n<pre><code>public class SecurityFilter : FilterAttribute, IAuthorizationFilter\n    {\n        public void OnAuthorization(AuthorizationContext filterContext)\n        {\n</code></pre>\n\n<p>Here my first cookie dissapearing , and second is still exists.\nthe Expire property is set the same for both , and every property except value is the same in both cookies , why the first one gets lost ? and the second is exist ? Reading about ASP.NET MVC request pipeline doesn't opened my eyes on something , anyone please :-)</p>\n"},{"tags":["c#","asp.net-mvc-3","ef-code-first"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13293185,"title":"How to load navigation data in Entity framework Code first?","body":"<p>I have the following situation:</p>\n\n<p><a href=\"http://www.mediafire.com/view/?brjyqlj4rvjako9\" rel=\"nofollow\">http://www.mediafire.com/view/?brjyqlj4rvjako9</a></p>\n\n<p>When you read the picture in your browser you can see I have a three tables. The middle one is junction table.</p>\n\n<p>All works well except the field Room in middle table (Bookings table) that always has a NULL value:\n<a href=\"http://www.mediafire.com/view/?axz7ljskgcpl8cp\" rel=\"nofollow\">http://www.mediafire.com/view/?axz7ljskgcpl8cp</a></p>\n\n<p>So, I saw that it needs to be loaded by hand before I make a reading operation on it.\nHow is this done in Entity Framework Code First as my project is running on it?</p>\n\n<p>The relationship is many to many between guest and Room, Booking is a junction table.\nThank you</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","linq","linq-to-sql","linq-to-entities"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13292194,"title":"In MVC3 how to get a list of models with Linq?","body":"<p>In my database context class I have:</p>\n\n<pre><code>Imports System.Data.Entity\nPublic Class MusicStoreEntities\n    Inherits DbContext\n    Public Property Albums As DbSet(Of Album)\n    Public Property Descriptions As DbSet(Of Description)\nEnd Class\n</code></pre>\n\n<p>Then, I have those two models for Album and Description</p>\n\n<pre><code>Public Class Album\n    Public Property AlbumId As Integer\nEnd Class\n\nPublic Class Description\n    Public Property DescriptionId As Integer\n    Public Property AlbumId As Integer\nEnd Class\n</code></pre>\n\n<p>From an Action of a Controller I can get a single Description for an Album using Linq as the following:</p>\n\n<pre><code>Dim album_description As Description = db.Descriptions.Single(Function(g) g.AlbumId = id)\n</code></pre>\n\n<p>However, how can I get a list of Descriptions for an Album?</p>\n\n<pre><code>Dim album_descriptions As List(Of Description) = db.Descriptions.**???**(Function(g) g.AlbumId = id)\n</code></pre>\n"},{"tags":["javascript","ajax","asp.net-mvc-3","viewmodel","knockout.js"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":734,"score":1,"question_id":8509119,"title":"Populating MVC3 view model with a selected value from a JavaScript/Knockout dropdown?","body":"<p>I’m looking for advice on how to populate the viewmodel passed to the view after a list is retrieved and an item selected in a dropdown list.  Note that I also have a client side viewmodel that is used for the Ajax/Knockout client code but this is not the view model that I am trying to populate.  I may have to map from one view model to the other but I'm not sure if that is the correct solution.</p>\n\n<p><strong>View -  Form</strong> </p>\n\n<p>In my form I am using Knockout and JavaScript for my dropdowns.  How can I populate the view model m.VMResidencyWTCS.ScCountyCd field with the county code value that is selected?  Is it possible to also capture the desription?  If so, how would this be done as well?</p>\n\n<pre><code>@model Apps.Model.ViewModels.AVMApplicationInfo\n...\n@using (Html.BeginForm(\"ApplicationDetails\", \"PersonalInfo\"))\n{\n    &lt;fieldset&gt;\n        &lt;div class=\"appl-step\"&gt;\n      ...\n            &lt;div class=\"editor-label\"&gt;\n                &lt;span class=\"error\"&gt;*&lt;/span&gt;@Html.LabelFor(m =&gt; m.VMResidencyWTCS.ScCountyCd) \n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                &lt;select id='counties' \n                        data-bind='\n                            options: selectedResidencyState() ? counties : null, \n                            optionsValue : \"CountyCd\", \n                            optionsText: \"CountyDescr\", \n                            optionsCaption: \"[Please select a county]\", \n                            value: selectedCounty,\n                            visible: (counties() &amp;&amp; counties().length &gt; 0 )'&gt;\n                &lt;/select&gt;\n                &lt;span data-bind='\n                    template: {name: \"noInfoTemplate\"},\n                    visible: !(counties() &amp;&amp; counties().length &gt; 0)'&gt;\n                &lt;/span&gt;\n            &lt;/div&gt;\n</code></pre>\n\n<p><strong>View -  JavaScript</strong> </p>\n\n<p>This is my script for calling back to the controller for the county dropdown list. Note that the county dropdown is populated when a state is selected in another dropdown.</p>\n\n<pre><code>&lt;script type='text/javascript'&gt;\n    $(document).ready(function () {\n    var residency = function () {\n        this.selectedResidencyState = ko.observable();\n        this.selectedCounty = ko.observable();\n                    ...\n        this.states = ko.observableArray();\n        this.counties = ko.observableArray();\n     ...\n\n        this.selectedResidencyState.subscribe(function (stateCd) {\n            this.selectedCounty(undefined);\n            this.counties(undefined);\n\n            if (stateCd != null) {\n                $.ajax({\n                    url: '@Url.Action( \"GetCounties\", \"PersonalInfo\")',\n                    data: { stateCd: stateCd },\n                    type: 'GET',\n                    success: function (data) {\n                        residencyViewModel.counties(data);\n                    }\n                });\n            }\n        } .bind(this));\n\n    };\n\n    var residencyViewModel = new residency();\n    ko.applyBindings(residencyViewModel);\n\n    //Load the states\n    $.ajax({\n        url: '@Url.Action( \"GetResidencyStates\", \"PersonalInfo\" )',\n        type: 'GET',\n        success: function (data) {\n            residencyViewModel.states(data);\n        }\n    });\n});\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>public class PersonalInfoController : Controller\n{\n…\n    [HttpGet]\n    public virtual ActionResult GetCounties(string stateCd)\n    {\n        var counties =\n            (\n                from county in this._countyRepository.All\n                where (county.CountryCd == \"USA\" &amp;&amp; county.ResidencyStateCd == stateCd)\n                select new\n                {\n                    CountyCd = county.CountyCd,\n                    CountyDescr = county.CountyDescr,\n                    StateCd = county.ResidencyStateCd,\n                    CountryCd = county.CountryCd // Added for populating model ?Needed?\n                }\n            ).ToList();\n\n        return Json(counties, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","pingfederate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13250341,"title":"ASP.NET MVC how to use pingfederate (OpenTokenAdapter) for SP Initiated SSO?","body":"<p>Intention to ask this question is how to integrate ping in ASP.NET MVC application i.e. Service provider? We have two idps (Identity Providers) and we have to implement service provider initiated SSO.</p>\n\n<p>Let me know incase more details are required.</p>\n"},{"tags":[".net","asp.net-mvc-3","inversion-of-control","ravendb","simple-injector"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":257,"score":1,"question_id":10940988,"title":"How to configure Simple Injector IoC to use RavenDB","body":"<p>I'm using <a href=\"http://simpleinjector.codeplex.com\" rel=\"nofollow\">Simple Injector</a> for an IOC in an MVC 3 web application. I am using <a href=\"http://ravendb.net\" rel=\"nofollow\">RavenDB</a> for the data storage. There are several considerations on using RavenDB in an mvc 3 application. I've searched some on how to wire-up an IoC to use RavenDB but haven't found out how to wire-up simple injector to use RavenDB. Can anyone explain how to wire-up simple injector to use RavenDB in an MVC 3 web app?</p>\n\n<p>thanks.</p>\n"},{"tags":["asp.net-mvc-3","generics","razor","mvc-editor-templates"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":496,"score":1,"question_id":10616042,"title":"MVC3 Razor Editor/Display templates and generics","body":"<p>There were a few questions regarding mvc templates and generics however there seems to be none related to what I'm looking for. Consider the following models:</p>\n\n<pre><code>namespace MyNamespace\n{\n    public class ModelBase { /* Not important for example */ }\n\n    public class MyModel : ModelBase\n    {\n        public string Name { get; set; }\n    }\n\n    public class MyViewModel\n    {\n        public IEnumerable&lt;ModelBase&gt; Data { get; set; }\n    }\n}\n</code></pre>\n\n<p>And a controller:</p>\n\n<pre><code>public class HomeController : Controller\n{\n    public ActionResult Index \n    {\n        return View(new MyViewModel { Data = new List&lt;MyModel&gt;() })\n    }\n}\n</code></pre>\n\n<p>A Razor view Views/Home/Index.cshtml would look like:</p>\n\n<pre><code>@model MyNamespace.MyViewModel\n@Html.EditorFor(m =&gt; m.Data)\n</code></pre>\n\n<p>Nothing special there. If I want a display or editor template for that I can create a file under Views/Shared/EditorTemplate or under Views/Home/EditorTemplates called MyModel.cshtml and it finds it correctly.</p>\n\n<p>What if I want to do something different for each implementation of ModelBase when showing a list? Mvc view finder will find List'1.cshtml template correctly in any of above paths. However what I need to do is do a template for List`1[MyModel].cshtml</p>\n\n<p>I can't seem to get the correct file naming. What I've tried so far (relative to this example naming):</p>\n\n<ul>\n<li>List`1[MyModel].cshtml</li>\n<li>List`1[[MyModel]].cshtml</li>\n<li>List`1[MyNamespace.MyModel].cshtml</li>\n<li>List`1[[MyNamespace.MyModel]].cshtml</li>\n</ul>\n\n<p>If possible I want to avoid writing a custom view finder. The only alternative I can think of for now if I can't get above stuff to work is to just have List`1.cshtml call a partial with naming deduced from List.</p>\n"},{"tags":["asp.net-mvc-3","asp.net-charts"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13282535,"title":"asp.net mvc render multiple charts in a view","body":"<p>Question1:\nHow to render multiple charts in a single view? In a ABController, I have two methods\nMethodA (which matches with view name, MethodA.aspx) and MethodB.</p>\n\n<p>When I load MethodA.aspx, it renders a graph from ABController.MethodA and on the same view I want to display another graph which is from MethodB.</p>\n\n<p>Question2: Not really a question, I need a suggestion. Which is graph is best suitable for this?</p>\n\n<p>I want to display list of students who failed to attend classes (count/number).</p>\n\n<pre><code>Controller Methods:\npublic FileContentResult MethodA()\n{\n\n}\n\npublic FileContentResult MethodB()\n{\n\n}\n\nView:\n&lt;img id=\"image1\" src=\"/AB/MethodA\" alt=\"\" style=\"vertical-align:top\" /&gt;\n\n&lt;img id=\"image1\" src=\"/AB/MethodB\" alt=\"\" style=\"vertical-align:top\" /&gt;\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5,"score":0,"question_id":13291598,"title":"How to integrate Google Costume search engine (CSE) search box with webpage in ASP.Net MVC 3 razor","body":"<p>I tried to work around with the code given <a href=\"http://www.dreamincode.net/forums/topic/91528-google-cse-search-box/\" rel=\"nofollow\">http://www.dreamincode.net/forums/topic/91528-google-cse-search-box/</a>. But it is not working with me as I am new to MVC razor and trying to convert the code to the same. </p>\n\n<p>Also I from the given code I had reference issue with   Context.ApplicationInstance.CompleteRequest();, I tried to give full reference path from System.Web.UI.</p>\n\n<p>Please need help on this.</p>\n"},{"tags":["c#","asp.net-mvc-3","telerik-grid"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13291568,"title":"CheckBox in Telerik Grid","body":"<p><strong>The Objective:</strong></p>\n\n<p>Insert a CheckBox for each row of a Telerik Grid and when the user press submit recive all checkbox changes to the Controller.</p>\n\n<p>I'm using C# ASP.net MVC3</p>\n\n<p><strong>The Question:</strong> </p>\n\n<ul>\n<li>I was looking on-line tutorials and Telerik help but they allways use javascript to send the ID of the selected Items, I'm not sure if it's possible to bind directly to the model and save checkbox changes automathically to avoid javascript. </li>\n</ul>\n\n<p><strong>The code:</strong></p>\n\n<pre><code>@(Html.Telerik().Grid&lt;Article&gt;()\n.Name(\"ArticleGrid\")\n.DataKeys(keys =&gt;\n{\n    keys.Add(article =&gt; article.Code);\n})\n.Columns(columns =&gt;\n{\n    columns.Bound(c =&gt; c.Code);\n    columns.Bound(c =&gt; c.Description)\n    columns.Bound(article =&gt; article.Selected).Width(\"35px\")\n            .ClientTemplate(\"&lt;input type='checkbox' value='&lt;#= Code #&gt;' id='IsSelected&lt;#= Code #&gt;' /&gt;\")\n            .Title(\"\")\n            .HtmlAttributes(new { style = \"text-align:center\" });\n})\n.DataBinding(dataBinding =&gt; dataBinding.Ajax().Select( \"_SelectArticlesAjax\", Controllers.Valoration})\n)\n)\n</code></pre>\n"},{"tags":["asp.net-mvc-3","visual-studio-2010","iis7"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13285437,"title":"how to publish MVC 3 application to remote server from visual studio 2010","body":"<p>I have Server machine with installation of Windows 2008 R2, IIS 7, MVC 3, ASP.NET 4 Framework.\nI want to publish ASP.NET MVC 3 Razor application using visual studio 2010 from local computer to remote server. The application has also used Entity Framework. What are required tool in my server to publish mvc 3 application and neccessary steps?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13291259,"title":"How to use url from database in asp.net mvc?","body":"<p>We have a system with some products (\"for instance \"Blue Shoes\"). Our SEO team decide for each product what will be its url (for instance \"/cool-shoes/blue\" for english version \"/super-pompes/bleu\" for french version), you can see there is no id in the url).</p>\n\n<p>Our first idea was to loop through all the product and add a route for each one of them :</p>\n\n<pre><code>  routes.MapRoute(\n                \"/cool-shoes/blue\", \n                \"/cool-shoes/blue\", \n                new { controller = \"Product\", action = \"Show\", id=123,language=\"en\" } \n            );\n</code></pre>\n\n<p>If we need an url we do</p>\n\n<pre><code>@Url.ActionLink(\"Product\",\"Show\",new {id=123,language=\"en\"})\n</code></pre>\n\n<p>This is working fine, but we have some performance issue (we tried with the RouteValueDictionnary but it's not that much of an improvement).\nWe cant use UrlHelper.RouteUrl because each url has it's own route name.</p>\n\n<p>So we are looking for a better solution.</p>\n"},{"tags":["jquery","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13289801,"title":"Strange behaviour jQuery Get and mvc 3 partial view","body":"<p>I have a partial view _ImageUploader.cshtml</p>\n\n<pre><code> @model Farmer.WebUI.Areas.Images.HelperClasses.UploaderHelper\n    @using Farmer.Translations\n    @using Farmer.Translations.Views.News\n\n    @using System.Web.Optimization\n    @Scripts.Render(Url.Content(\"~/Apps/FileUploader/fileuploader.js\"))\n    @Styles.Render(Url.Content(\"~/Apps/FileUploader/fileuploader.css\"))\n\n   &lt;div id=\"file-uploader\"&gt;\n   &lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    var uploader = new qq.FileUploader({\n        element: document.getElementById('file-uploader'),\n        allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'],\n        sizeLimit: 20971520,\n        action: '@Url.Action(\"ImagesUpload\", \"Image\", new { area = \"Images\"  })',\n        multiple: true,\n        dragText: 'Drop files here to upload',\n        uploadButtonText: 'Upload a file',\n        cancelButtonText: 'Cancel',\n        failUploadText: 'Upload failed',\n        messages: {\n            typeError: \"{file} has an invalid extension. Valid extension(s): {extensions}.\",\n            sizeError: \"{file} is too large, maximum file size is {sizeLimit}.\",\n            minSizeError: \"{file} is too small, minimum file size is {minSizeLimit}.\",\n            emptyError: \"{file} is empty, please select files again without it.\",\n            noFilesError: \"No files to upload.\",\n            onLeave: \"The files are being uploaded, if you leave now the upload will be cancelled.\"\n        },\n        showMessage: function (message) {\n            $.confirm({\n                'title': 'Message',\n                'message': message,\n                'buttons': {\n                    '@CommonTrl.Ok': {\n                            'class': 'blue',\n                            'action': function () {\n                                //do nothing\n                            }\n                        }\n                    }\n            });\n        },\n        onComplete: function (id, fileName, data) {\n            if (data.success == false &amp;&amp; data.limitReached) {\n                $.confirm({\n                    'title': '@CommonTrl.Message',\n                    'message': '@ImagesTrl.LimitReached ' + data.numberOfAllowed,\n                    'buttons': {\n                        '@CommonTrl.Ok': {\n                            'class': 'blue',\n                            'action': function () {\n                                //do nothing\n                            }\n                        }\n                    }\n                });\n            } else {\n                addImage(data.idImage, data.imageType, data.showDescriptionOptions);\n            }\n        },\n        params: {\n            idSourceTable: '@Model.IdSourceTable',\n            imageType: '@Model.ImageType',\n            showDescriptionOptions: '@Model.ShowDescriptionOptions'\n        }\n    });\n\n    function addImage(idImage, imageType, showDescriptionOptions) {\n        $.ajax({\n            type: 'POST',\n            url: '@Url.Action(\"GetImagePartial\", \"Image\", new { area = \"Images\" })',\n            data:\n            {\n                __RequestVerificationToken: $('input[name=__RequestVerificationToken]').val(),\n                idImage: idImage,\n                showDescriptionOptions: showDescriptionOptions\n            },\n            success: function (data) {\n                $('#Images-' + imageType).append(data);\n            }\n        });\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>then i have view where I do this</p>\n\n<pre><code>@Html.DropDownList(\"ddlImageType\", Model.ImageTypeOptions, new { id = \"ImageType\" })\n&lt;div id=\"Uploader\"&gt;\n&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        //set default values\n        $('#ImageType').val('@((int)ImageTypes.NewsGallery)');\n        $('#ImageType').trigger('change');\n    });\n $(function () {\n        $('#ImageType').change(function () {\n            $.ajax({\n                type: 'GET',\n                url: '@Url.Action(\"GetImageUploader\", \"Image\", new { area = \"Images\" })',\n                data:\n                    {\n                        idSourceTable: '@Model.IdGuid',\n                        imageType: $('#ImageType').val(),\n                        showDescriptionOptions: '@true'\n                    },\n                success: function (data) {\n                    $('#Uploader').html(data);\n                }\n            });\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>this is my server code</p>\n\n<pre><code>public ActionResult GetImageUploader(Guid idSourceTable, int imageType, bool showDescriptionOptions)\n        {\n            return PartialView(\"Images/_ImageUploader\", new UploaderHelper(idSourceTable, imageType, showDescriptionOptions));\n        }\n</code></pre>\n\n<p>When everything is loaded the first time everything works fine. The problem is that when I change my dropdown value, the code on server side is called twice and I do not know why. I debugged in firebug and the first time is a normal ajax call ($('#ImageType').change) but the second time when call returns and success ($('#Uploader').html(data);) executes there is another call to server code which I do not find a reason why this happen</p>\n"},{"tags":["asp.net-mvc-3","logoff","redirecting"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":10,"score":1,"question_id":13290294,"title":"MVC 3/ASPNET Auth - Almost Randomly Redirecting To Account/LogOff","body":"<p>This is a very strange one for me and I've been battling with it for a while now. I really hope someone can help.</p>\n\n<p>I have a fairly typical MVC 3 Website and I only seem to be getting this problem in IE and Firefox. Chrome plays along nicely. Lucky for me, the majority of our company's clients uses Chrome at the moment.</p>\n\n<p>Problem is at a seemingly random point in time, the browser will automatically redirect me to the Account/LogOff action when I click on a link, and from there it will obviously go back to the Login page. This link will then continue with the same behavior.</p>\n\n<p>I say \"seemingly random\" because today that link will work, tomorrow it won't and all other (or the majority - I have never had more than on problem link giving this problem at a time) links will be fine. Sometimes restarting the server/dev environment will take care of the problem, other times it won't. The browser will just keep redirecting to LogOff.</p>\n\n<p>I have tried looking at the Referrer URL, but the controller/action being referred to will never be reached. (If I place a breakpoint in the action, it is missed and the next point reached would be the LogOff action)</p>\n\n<p>If I look at the stacktrace when in the LogOff Action, I can't see any info from where the application has come from. I have also tried what was suggested in this page: <a href=\"http://stackoverflow.com/questions/5008313/posting-the-stack-trace-on-asp-net-mvc\">Posting the Stack Trace on ASP.NET MVC</a>, but I cannot see why I am being redirected to the LogOff action.</p>\n\n<p>The only place I seem to be able to have a breakpoint get hit before hitting LogOff, is Application_BeginRequest in the Global.asax, but can't see where it is going from there on.</p>\n\n<p>My guess is that somewhere along the line, ASPNET Auth decides the user isn't authenticated any more and redirects to the LogOff action. Problem is that the cookies associated with ASPNET Auth all still exist, have data in them and they haven't expired yet.</p>\n\n<p>Anyway, I hope I have given enough info on the problem.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13289816,"title":"Using class in MVC3","body":"<p>Hello everyone I'm a beginner in MVC3. My question is about using class. I'm using web services to get parameter at this point I have no problem but my problem is I'm defining every connection in each controller method again and again so is there any shorcut ?</p>\n\n<p>Here is an example:</p>\n\n<pre><code>public ActionResult BeyanListe()\n        {\n\nServices_building client = new Services_built();\n            Services client_service = new Services();\n            client_service.ClientCredentials.UserName.UserName = \"service_test\";\n            client_service.ClientCredentials.UserName.Password = \"..\";\n            client_service.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;\n            client.ClientCredentials.UserName.UserName = \"service_test\";\n            client.ClientCredentials.UserName.Password = \"..\";\n            client.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;\n\nreturn View()\n}\n</code></pre>\n\n<p>As you can see top I have declared two times for clientcredentials</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13247207,"title":"How to access selected item from dropdown in asp.net mvc3","body":"<p>i am using asp.net mvc3 and i populate a create view using following model </p>\n\n<p><strong>Model</strong> </p>\n\n<pre><code>public class CategoryModel\n{\n    public  int Id { get; set; }\n    public string Name { get; set; }\n    public  string URL { get; set; }\n    public  string Description { get; set; }\n    public  string Logo { get; set; }\n    public  bool IsActive { get; set; }\n    public  bool isPopular { get; set; }\n    public IList&lt;Category&gt; Parentcategories { get; set; }\n\n}\n</code></pre>\n\n<p>In my create View i populate like this </p>\n\n<p><strong>View</strong></p>\n\n<pre><code> &lt;div class=\"editor-field\"&gt;\n        @Html.DropDownList(\"parentcategories\", new SelectList(Model.Parentcategories.Select(c =&gt; c.Name), Model.Parentcategories.Select(c =&gt; c.Name)))\n        @Html.ValidationMessageFor(model =&gt; model.Parentcategories)\n    &lt;/div&gt;\n</code></pre>\n\n<p>now how can i access the selected item in my controller method </p>\n\n<p><strong>Method</strong></p>\n\n<pre><code> [HttpPost]\n    public ActionResult Create( CategoryModel model , HttpPostedFileBase file)\n    {\n     // \n    }\n</code></pre>\n\n<p>thanks,\nAhsan </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","usercontrols"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13288981,"title":"Guidelines for designing ASP .Net MVC controls","body":"<p>I'm developing a big, ritch (lots of client-side js code) website and I'm thinking about standing out a set of reusable controls. And here comes the question: what is the best way to design these controls in MVC?\nYes, I know - there are partial views. But from my point of view this is not enough. What I want is first-class building blocks that I can reuse in my application.\nSay I have a control that consists of customer data: </p>\n\n<ul>\n<li>name</li>\n<li>surname</li>\n<li>email</li>\n<li>phone</li>\n</ul>\n\n<p>Of course I can develop a partial view and reuse it, but I need also other elements:</p>\n\n<ol>\n<li>model</li>\n<li>validation</li>\n<li>server side call that retrieves / changes the model (proper WCF calls to some application server)</li>\n<li>presentation logic (same control should be able to render as static text and also a form that allows data change)\nThese elements should be <strong>encaplsulated</strong> in one place (a control - component - assembly).</li>\n</ol>\n\n<p>Is my way of thinking reasonable or there are better design patterns in MVC?</p>\n\n<p>m.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","sms","onlinebanking"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":25,"score":-1,"question_id":13288897,"title":"SMS banking feature for asp.net mvc banking site","body":"<p>How do i implement the SMS banking feature for existing Asp.net mvc 3 banking application.</p>\n\n<p>Thanks,\nS.</p>\n"},{"tags":["view","asp.net-mvc-3","razor","partial","viewbag"],"answer_count":7,"favorite_count":3,"up_vote_count":14,"down_vote_count":1,"view_count":13263,"score":13,"question_id":4974027,"title":"Modifying MVC 3 ViewBag in a partial view does not persist to the _Layout.cshtml","body":"<p>I am using MVC 3 with the Razor view engine.  I want to set some values in the ViewBag inside a Partial View and want retrieve those values in my _Layout.cshtml.  For example, when you setup a default ASP.NET MVC 3 project you get a _Layout.cshtml file in the \"/Views/Shared\" folder.  In that _Layout.cshtml the Page Title is set like this: </p>\n\n<pre><code>&lt;title&gt;@ViewBag.PageTitle&lt;/title&gt;\n</code></pre>\n\n<p>Then in \"/Views/Home/About.cshtml\" view the contents of the ViewBag are modified:</p>\n\n<pre><code>@{\n    ViewBag.Title = \"About Us\";\n}\n</code></pre>\n\n<p>This works fine. When the About view is rendered the page title is \"About Us\".  So, now I want to render a Partial view inside my About view and I want to modify the ViewBag.Title inside my Partial view. (\"/Views/Shared/SomePartial.cshtml\")</p>\n\n<pre><code>@Html.Partial(\"SomePartial\")\n</code></pre>\n\n<p>In this Partial view I have this code:</p>\n\n<pre><code>@{\n    ViewBag.Title = \"About Us From The Partial View\";\n}\n</code></pre>\n\n<p>When I debug this code I see the ViewBag.Title get set to \"About Us\" and then in the Partial view I see it get reset to \"About Us From The Partial View\", but when the code hits the _Layout.cshtml it goes back to \"About Us\".  </p>\n\n<p>Does this mean that if the contents of the ViewBag are modified in a Partial view, those changes will not appear(be accessible) in the main view (About.cshtml) or the _Layout.cshtml?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["javascript","jquery","ajax","asp.net-mvc-3","fileresult"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":36,"score":0,"question_id":13287043,"title":"How to download file PDF using FileResult but \"only\" via $ajax request?","body":"<p>This is the web method definition:</p>\n\n<pre><code>[HttpPost]\npublic FileResult GenerateReport(string Id) {\n     //............Code .................//\n return File(response.ReportContents, \"application/pdf\");\n\n} \n</code></pre>\n\n<p>and here is my jQuery ajax call to web method:</p>\n\n<pre><code>$(\".ValuationReport\").bind('click', function () {\n        $.ajax({\n            url: \"https://localhost.com/Report/GenerateReport\n            type: \"POST\",\n            data: { Id: \"00AFCA2F-6809-4FF4-BA32-125EAEBB1321\" },\n            success: function (data) {\n\n            },\n            error: function () {\n                alert(\"error\");\n            }\n        });\n    });\n</code></pre>\n\n<p>Please help me.</p>\n"},{"tags":["javascript","css","asp.net-mvc-3","jquery-ui","accordion"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13286875,"title":"Stacked jQuery UI accordions not resizing","body":"<p>Be gentle I am new to this web dev game. I'm just trying to learn.</p>\n\n<p>CODE:</p>\n\n<pre><code>&lt;h4&gt;Monday&lt;/h4&gt;\n&lt;div id=\"first_accordian\"&gt; \n    &lt;h5&gt;First Section&lt;/h5&gt;\n    &lt;div&gt;\n        Some stuff. \n    &lt;/div&gt;\n    &lt;h5&gt;Second Section&lt;/h5&gt;\n    &lt;div&gt;\n        Some stuff. \n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;h4&gt;Tuesday&lt;/h4&gt;\n&lt;div id=\"second_accordian\"&gt; \n    &lt;h5&gt;First Section&lt;/h5&gt;\n    &lt;div&gt;\n        Some stuff. \n    &lt;/div&gt; \n&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n    $(\"[id$=_accordian]\").accordion({ collapsible: true, active: false });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>Obviously this is just a simplification of a partial view I have in and ASP.NET MVC3 app. But I am using jQuery UI and the accordion widget, so you will need to reference those for the code above to work.</p>\n\n<p>QUESTION: </p>\n\n<p>I have an issue here that when I expand an accordion element it will overlay any HTML underneath it. The behaviour I want is that I have a set of stacked accordions that all shift up or down when any element is selected in any of the accordions.</p>\n\n<p>Does anyone know how I can do this with stacked accordions? Or thinking laterally. Is there any way I can add static headers that aren't accordion elements inline to the accordion (show above as the headers above each accordion; Monday, Tuesday)?</p>\n\n<p>Is there are resizing event of something I should bind to? I'm at a loss as to where to start, any pointers welcome!</p>\n\n<p>EDIT: Have just copied my own code into a file to check and experiment... and it works exactly how I need it to. But it doesn't in my app. So I'm guessing this must be down to something else going on outside of my code.</p>\n\n<p>So... New question: What could stop something from resizing and creating this overlay problem? </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","twitter-bootstrap","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13287692,"title":"POST from edit/create partial views loaded into Twitter Bootstrap modal","body":"<p>I'm struggling with AJAX POST from the form that was loaded into Twitter Bootstrap modal dialog.</p>\n\n<p>Partial view form goes like this:</p>\n\n<pre><code>@using (Html.BeginForm())\n{\n    // fields\n    //  ... \n    // submit\n    &lt;input type=\"submit\" value=\"@ButtonsRes.button_save\" /&gt;\n}\n</code></pre>\n\n<p>Now this is being used in non AJAX editing with classic postbacks. Is it possible to use the same partial for AJAX functionality? Or should I abstract away the inputs into it's own partial view?</p>\n\n<p>Like this:</p>\n\n<pre><code>@using (Ajax.BeginForm())\n{\n    @Html.Partial(\"~/Views/Shared/ImageEditInputs.cshtml\")  \n    // but what to do with this one then?\n    &lt;input type=\"submit\" value=\"@ButtonsRes.button_save\" /&gt;\n}\n</code></pre>\n\n<p>I know how to load this into Bootstrap modal but few changes should be done on the fly:</p>\n\n<ul>\n<li>the buttons in Bootstrap modal should be placed in a special container (the modal footer),</li>\n<li>the AJAX POST should be done when clicking Save</li>\n</ul>\n\n<p>which would </p>\n\n<ol>\n<li>first, validate the form and keep the modal opened if not valid (display the errors of course)</li>\n<li>second, post and close the modal if everything went fine</li>\n<li>in the view that opened the modal, display some feedback information at the top that save was succesful.</li>\n</ol>\n\n<p>I'm mostly struggling where to put what JS code. So far I have this within the List view, which wires up the modals:</p>\n\n<pre><code>$(document).ready(function () {\n  $('.openModalDialog').click(function (event) {\n    event.preventDefault();\n    var url = $(this).attr('href');\n    $.get(url, function (data) {\n      $('#modalContent').html(data);\n      $('#modal').modal('show');\n    });\n  });\n});\n</code></pre>\n\n<p>The above code, however, doesn't take into the account the special Bootstrap modal content placeholders (header, content, footer).</p>\n\n<p>Is it possible to achieve what I want without having multiple partial views with the same inputs but different @using and without having to do hacks with moving the Submit button around?</p>\n\n<p>Maybe I should ask, is there a way to do progressive enhancement without having to modify my existing partials / keep only one copy of the edit form?</p>\n"},{"tags":["c#","asp.net-mvc-3","charts"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13286832,"title":"How to create chart for building Stacked plan in MVC3","body":"<p>I want to create chart for \"building stacked plan\" in mvc3\nfor example given image.\n <img src=\"http://i.stack.imgur.com/MZlyy.jpg\" alt=\"enter image description here\"></p>\n\n<p>if i want to create below type of chart by using \"Stackedbar\" chart of asp.net\nbut i am confused for how will be the series define in the chart \nbecause here in this scenario one row may have only single color or more than one color</p>\n\n<p>ie: if i have two rows in which first row have 5 column (colors) and second row have only 2 column (colors) </p>\n\n<p>Chart chart12 = new Chart(1000, 600, theme: ChartTheme.Vanilla3D).AddTitle(\"StackedBar\").AddLegend(\"Religious Population\");</p>\n\n<p>the below give code show wrong result as per requirement.</p>\n\n<pre><code> chart12.AddSeries(\"2002\", \"StackedBar\", xValue: new[] { \"Tentants3\", \"Tentants4\", \"Tentants5\" }, yValues: new[] { 20, 35, 45 });\n\nchart12.AddSeries(\"2001\", \"StackedBar\", xValue: new[] { \"Tentants1\", \"Tentants2\" }, yValues: new[] {70, 30 }); \n\n return File(chart12.GetBytes(\"png\"), \"image/bytes\");\n</code></pre>\n\n<p>Please suggest me...</p>\n\n<p><img src=\"http://i.stack.imgur.com/ODW5H.png\" alt=\"enter image description here\"></p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13284768,"title":"How I can use the Intranetwebapplication in mvc3","body":"<p>I want use asp.net mvc 3 and use intranet application but I don't have this option :( How I get the intranet application</p>\n\n<p><img src=\"http://i.stack.imgur.com/rMQBy.jpg\" alt=\"enter image description here\"></p>\n\n<p>and how I get mvc4 or it don't work on vs2010? </p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13286798,"title":"Pass image & data from view to controller","body":"<p>I want to pass image as well as some data from view to controller on submit button click.\nBellow is my code</p>\n\n<p>My View </p>\n\n<pre><code>@using (Html.BeginForm(\"AccountPhotoPost\", \"Post\", FormMethod.Post, new {enctype = \"multipart/form-data\", accountId = Model.accountId }))\n{\n       &lt;text&gt;Post Photo : &lt;/text&gt; &lt;input type=\"file\" name=\"file\" id=\"file\" /&gt;\n\n       &lt;input type=\"submit\" value=\"Post Photo\" id=\"saveButton\"/&gt;\n}\n</code></pre>\n\n<p>My controller action</p>\n\n<pre><code> [HttpPost]\n public ActionResult AccountPhotoPost(HttpPostedFileBase file, long accountId)\n    {\n\n    }\n</code></pre>\n\n<p>Here problem is that as it is FormMethod.Post , data is not passed from view to controller &amp; if I remove this then data is passed but image is not passed.</p>\n\n<p>How can I send both together ?</p>\n"},{"tags":["vb.net","asp.net-mvc-3","visual-studio-2010","razor","vb.net-2010"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":273,"score":1,"question_id":5501360,"title":"Edit a view in Runtime","body":"<p>I'm developing a website with ASP MVC 3 and Razor in VS2010 SP1.</p>\n\n<p>When I'm running the site from VS, if the view was open in the IDE, I can edit a view in runtime, and press F5 to show the changes, but if I open the view after run the site, then the view is locked (no message, simply I can write in the VS Editor)</p>\n\n<p>When I stop debuggin the solution, the views that are locked remains locked, and I have to close the file and open id again in order to modify the code.</p>\n\n<p>This behaviour is uncomfortable. Can anyone tell me why sometimes I can write in the VS2010 editor and other times I can't?</p>\n\n<p>Other Notes:</p>\n\n<ul>\n<li>The TFS is not the problem. </li>\n<li>It happens in all the VS 2012 SP1 of my office.</li>\n<li>It only happens in vb.net projects, not in C# proyects.</li>\n<li>It didn't happens in VS2012.</li>\n<li>I've disabled all the extensions.</li>\n</ul>\n\n<p>Thanks.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13285874,"title":"Asp.Net authentication(getting logout automatically)","body":"<p>In my application I have used Asp.Net Form Authentication, </p>\n\n<pre><code>FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(\n                    1,\n                    adminResult.UserName,\n                    DateTime.Now,\n                    DateTime.Now.AddDays(2),\n                    true,\n                    \"Administrator\",\n                    FormsAuthentication.FormsCookiePath\n                    );\n                string hash = FormsAuthentication.Encrypt(ticket);\n                HttpCookie coockie = new HttpCookie(FormsAuthentication.FormsCookieName, hash);\n                if (ticket.IsPersistent)\n                {\n                    coockie.Expires = ticket.Expiration;\n                }\n                Response.Cookies.Add(coockie);\n                if (Url.IsLocalUrl(returnUrl))\n                {\n                    return Redirect(returnUrl);\n                }\n                else\n                {\n                    return RedirectToAction(\"Dashboard\", \"Cockpit\");\n                }\n</code></pre>\n\n<p>But it's getting logout in 10 to 15 seconds automatically.</p>\n\n<p>What would be the solution ?</p>\n\n<p>Thanks</p>\n"},{"tags":["html","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":19,"score":-1,"question_id":13283556,"title":"Is it good to have multiple HTML form tags in my ASP.NET MVC app?","body":"<p>Is it better practice to have multiple form tags in my HTML script?</p>\n"},{"tags":["asp.net-mvc-3","wcf","c#-4.0","wcf-data-services"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13285932,"title":"wcf service call try catch is not working as expected","body":"<p>Here is my code </p>\n\n<pre><code>do {\n            timedout = false;\n            try\n            {\n                response = serviceCall(service);\n                return true;\n            }\n            catch (TimeoutException)\n            {\n                timedout = true;\n            }\n            catch (FaultException&lt;ValidationFault&gt; failure)\n            {\n\n              // to add failure result to model which will display on UI.\n            }\n            catch (FaultException&lt;BusinessErrorFault&gt; fault)\n            {\n               // to add failure result to model which will display on UI.\n            }\n        }\n        while (timedout &amp;&amp; --remainingTrys &gt; 0); //remaiing tries value is set to 3.\n</code></pre>\n\n<p>In above code do while loop is executed 3 time only for service call timeout exceptions.\nBut when i debug this and check the log i found that\nwhenever validation exception throws from service.  call goes to 2nd or 3rd catch.\nand timeout variable comes to true (but which is set in first catch. this weired.)\nCan anyone suggest me what need to do to handle this situation in code?\ncoz of this model error is getting added 3 times and on UI i can see 3 same error messages.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":44,"score":-1,"question_id":13285240,"title":"How to display number to 2 decimal places in mvc3,C#?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6951335/using-string-format-to-show-decimal-upto-2-places-or-simple-integer\">Using String Format to show decimal upto 2 places or simple integer</a><br>\n  <a href=\"http://stackoverflow.com/questions/13284682/how-to-set-decimal-point-in-2-decimal-places\">How to set decimal point in 2 decimal places?</a>  </p>\n</blockquote>\n\n\n\n<p>I have Price field in my view. it have the following values <code>2.5 and 44.</code>\nI want to display this value to <code>2.50 and 44.00</code> i use the following code</p>\n\n<pre><code>@{decimal prolistprice = decimal.Parse(item.OtherFields[\"Price\"].ToString());}\n  $@Math.Round(prolistprice, 2, MidpointRounding.AwayFromZero)\n</code></pre>\n\n<p>in which <code>item.OtherFields[\"price\"] is a object</code> i convert it to string and then decimal</p>\n\n<p>but Math.round is not working it shows 2.5 and 44 only..\nCan anyone help this</p>\n"},{"tags":["asp.net-mvc-3","json.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13272170,"title":"Why am I getting circular reference error with Json serializer with a unidirectional object?","body":"<p>I have the following model:</p>\n\n<pre><code>public class Address\n{\n   public int Id {get; set;}\n   public string Street1 {get; set;}\n   ...\n   public int CountryId {get; set;}\n   public Country Country {get; set;}\n}\n\npublic class Country\n{\n    public int Id {get; set;}\n    public string Name {get; set;}\n    public string ISOCode {get; set;}\n    public string Continent {get; set;}\n    public string ISOCode {get; set;}\n    public string Languages {get; set;}\n}\n\npublic class Church\n{\n    public int Id {get; set;}\n    public string Name {get; set;}\n    public int CountryId {get; set;}\n    public Country Country {get; set;}\n    public int AddressId {get; set;}\n    public virtual Address Address {get; set;}\n    public string Phone {get; set;}\n}\n</code></pre>\n\n<p>Does the serializer think that I have some kind of bi-directional relation going on with Country since both Church and Address have a Country object?  If not, then why do I get circular reference when trying to serialize a church object?</p>\n\n<p><strong>EDIT:</strong>\nWhat's even more confusing to me is that I'm not even including Country (on church) when I query:</p>\n\n<pre><code>var results = _context.Churches.Include(c =&gt; c.Address).Include(c =&gt; c.Address.Country).AsQueryable();\n</code></pre>\n\n<p>Entity Framework Context is configured so that LasyLoading is not enabled.  Seems to me that Church.Country should be null and shouldn't even be an issue here.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":2147,"score":1,"question_id":6548608,"title":"\"The name 'HTML' does not exist in the current context\" in MVC 3 Views","body":"<p>I´m starting to use \"MVC 3\" but I´m facing some little problems. In my Views, when I code something like this:</p>\n\n<pre><code>@if(Request.IsAuthenticated) {\n    &lt;text&gt;Welcome &lt;b&gt;@Context.User.Identity.Name&lt;/b&gt;!\n    [ @Html.ActionLink(\"Log Off\", \"LogOff\", \"Account\") ]&lt;/text&gt;\n}\nelse {\n    @:[ @Html.ActionLink(\"Log On\", \"LogOn\", \"Account\") ]\n}\n</code></pre>\n\n<p>The objects like @Request and @Html is indicating an error: <code>The name 'HTML' does not exist in the current context</code>. </p>\n\n<p>The same occurs with @Context, @ViewBag, @Layout, @Url and others. </p>\n\n<p>See: </p>\n\n<p><img src=\"http://i56.tinypic.com/28s1smp.jpg\" alt=\"image\"></p>\n\n<p>But the code is correctly compiled with no errors. The problem is that I cannot use the Intellisense with theses objects in the Views. Is it normal? (I don´t think so). What could be happening?</p>\n\n<p>I have reinstalled the MVC 3 framework but the same still occurs.</p>\n\n<p>Note: this is a new project from scratch, not a MVC 2 migration. This occurs both with Razor engine and ASPX.</p>\n\n<p>This is the Web.Config in the Views folder:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;sectionGroup name=\"system.web.webPages.razor\" type=\"System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"&gt;\n      &lt;section name=\"host\" type=\"System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" /&gt;\n      &lt;section name=\"pages\" type=\"System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" /&gt;\n    &lt;/sectionGroup&gt;\n  &lt;/configSections&gt;\n\n  &lt;system.web.webPages.razor&gt;\n    &lt;host factoryType=\"System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;pages pageBaseType=\"System.Web.Mvc.WebViewPage\"&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"System.Web.Mvc\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n        &lt;add namespace=\"System.Web.Routing\" /&gt;\n      &lt;/namespaces&gt;\n    &lt;/pages&gt;\n  &lt;/system.web.webPages.razor&gt;\n\n  &lt;appSettings&gt;\n    &lt;add key=\"webpages:Enabled\" value=\"false\" /&gt;\n  &lt;/appSettings&gt;\n\n  &lt;system.web&gt;\n    &lt;httpHandlers&gt;\n      &lt;add path=\"*\" verb=\"*\" type=\"System.Web.HttpNotFoundHandler\"/&gt;\n    &lt;/httpHandlers&gt;\n\n    &lt;!--\n        Enabling request validation in view pages would cause validation to occur\n        after the input has already been processed by the controller. By default\n        MVC performs request validation before a controller processes the input.\n        To change this behavior apply the ValidateInputAttribute to a\n        controller or action.\n    --&gt;\n    &lt;pages\n        validateRequest=\"false\"\n        pageParserFilterType=\"System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"\n        pageBaseType=\"System.Web.Mvc.ViewPage, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"\n        userControlBaseType=\"System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"&gt;\n      &lt;controls&gt;\n        &lt;add assembly=\"System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" namespace=\"System.Web.Mvc\" tagPrefix=\"mvc\" /&gt;\n      &lt;/controls&gt;\n    &lt;/pages&gt;\n  &lt;/system.web&gt;\n\n  &lt;system.webServer&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt;\n\n    &lt;handlers&gt;\n      &lt;remove name=\"BlockViewHandler\"/&gt;\n      &lt;add name=\"BlockViewHandler\" path=\"*\" verb=\"*\" preCondition=\"integratedMode\" type=\"System.Web.HttpNotFoundHandler\" /&gt;\n    &lt;/handlers&gt;\n  &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13285224,"title":"Cache memory does not update but my database updates","body":"<p>I have a problem in my test case for create, edit, delete. Specifically in my edit part. Here's the code.</p>\n\n<p>Test Case:</p>\n\n<pre><code>[TestClass]\npublic class UserCRUD\n{\n    [TestMethod]\n    public void TestMethod1()\n    {\n        taskModelContainer db = new taskModelContainer();\n        TaskMgr.Models.User UserEntity = new TaskMgr.Models.User();\n        UserController User = new UserController();\n        try\n        {\n            string Username = \"789zxc@t.cm\";\n            string Password = \"sdff34\";\n            string Role = \"User\";\n            string Name = \"lykers\";\n            int subsiteID = 1;\n\n            UserEntity.Username = Username;\n            UserEntity.Password = Password;\n            UserEntity.Role = Role;\n            UserEntity.Name = Name;\n            UserEntity.subsiteID = subsiteID;\n\n            ActionResult result = User.Create(UserEntity);\n\n            int id = Convert.ToInt32(User.ViewBag.id);\n            User Users = db.Users.Single(e =&gt; e.userID == id);\n\n            Assert.AreEqual(UserEntity.Username, Users.Username);\n            Assert.AreEqual(UserEntity.Password, Users.Password);\n            Assert.AreEqual(UserEntity.Role, Users.Role);\n            Assert.AreEqual(UserEntity.Name, Users.Name);\n            Assert.AreEqual(UserEntity.subsiteID, Users.subsiteID);\n\n            //Edit\n            //var qry = from e in db.Users orderby e.userID descending select e.userID;\n            //int eID = qry.First();\n\n\n            UserEntity.userID = id;\n            UserEntity.Username = \"dfsd56@y.c\";\n            UserEntity.Password = \"asc45k\";\n            UserEntity.Role = \"Administrator\";\n            UserEntity.Name = \"sfscf\";\n            UserEntity.subsiteID = 3;\n\n            ActionResult result2 = User.Edit(UserEntity);\n\n\n            //set viewbag to int\n            //int id1 = Convert.ToInt32(User.ViewBag.id);\n            //return data from database\n            User Users1 = db.Users.Single(e =&gt; e.userID == id);\n\n            //Users1.Username = UserEntity.Username;\n            //Users1.Password = UserEntity.Password;\n            //Users1.Role = UserEntity.Role;\n            //Users1.Name = UserEntity.Name;\n            //Users1.subsiteID = UserEntity.subsiteID;\n\n            Assert.AreEqual(UserEntity.userID, Users1.userID);\n            Assert.AreEqual(UserEntity.Username, Users1.Username);\n            Assert.AreEqual(UserEntity.Password, Users1.Password);\n            Assert.AreEqual(UserEntity.Role, Users1.Role);\n            Assert.AreEqual(UserEntity.Name, Users1.Name);\n            Assert.AreEqual(UserEntity.subsiteID, Users1.subsiteID);\n\n            //delete\n            //int userID = eID;\n        }\n        finally\n        {\n            ActionResult result3 = User.DeleteConfirmed(UserEntity.userID);\n\n            var del = from e in db.Users where e.userID == UserEntity.userID select e;\n            var delete = del.Count();\n\n            Assert.AreEqual(0, delete);\n        }\n    }\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Edit(User user)\n{\n    if (ModelState.IsValid)\n    {\n        db.Entry(user).State = EntityState.Modified;\n        db.SaveChanges();\n        //var qry = from e in db.Users orderby e.userID descending select e.userID;\n        //int eID = qry.First();\n        //ViewBag.id = user.userID;\n        return RedirectToAction(\"Index\");\n    }\n    ViewBag.subsiteID = new SelectList(db.Subsites, \"subsiteID\", \"subsite\", user.subsiteID);\n    return View(user);\n}\n</code></pre>\n\n<p>Whenever I go through <code>Assert.AreEqual(UserEntity.Username, Users1.Username);</code>, I'm receiving an error message that says <code>UserEntity.Username</code> does not match <code>Users1.Username</code>. Which is true whenever I hover those fields.</p>\n\n<p>Could someone/anyone help me figure out how to update the cache memory? What line of code/s should I use? In addition, I use DbContext. Not ObjectContext.</p>\n"},{"tags":["asp.net-mvc-3","session","browser"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13208723,"title":"how to maintain session for 2 different browsers?","body":"<p>I done project in ASP.net MVC3. In my project i create a session as follows in Home Controller</p>\n\n<pre><code>if (Session[\"ulclass\"] == null)\n     {\n                    Session[\"ulclass\"] = \"list\";\n     }\n</code></pre>\n\n<p>I use this session to my Product List page.. as a class for div tag as follows..</p>\n\n<pre><code>&lt;div id=\"listheading\" class=\"listHead\" @if (Session[\"ulclass\"].ToString() == \"grid\")\n                                       {\n                                           &lt;text&gt;style = \"display:none;\";&lt;/text&gt;\n                                       }&gt;\n</code></pre>\n\n<p>When i copy this Productlist URL from FireFox to Chrome...\nsession value not come.. it produce the error...</p>\n\n<p>Can any one help this ?</p>\n"},{"tags":["asp.net-mvc-3","url"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13264325,"title":"How to pass Return URL in MVC3?","body":"<p>I have the following LogOn Action \n [HttpPost]</p>\n\n<pre><code>     public ActionResult LogOn(LogOnModel user, string returnUrl)\n        {\n  if (!String.IsNullOrEmpty(returnUrl))\n                                {\n                    return Redirect(returnUrl);\n                }\n                else\n                {\n                    return RedirectToAction(\"Index\", \"Home\");\n                }\n}\n</code></pre>\n\n<p>In which My returnUrl is null..\nCan any body tell me .Why my return URL is null</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13284682,"title":"How to set decimal point in 2 decimal places?","body":"<p>I use the following code in my View </p>\n\n<pre><code>@{var prolistprice = item.OtherFields[\"Price\"];}\n$@Math.Round((decimal)prolistprice, 2, MidpointRounding.AwayFromZero) \n</code></pre>\n\n<p>It Produce the Error \"Specified cast is not valid\" </p>\n\n<p>I get prolistprice=2.5 and 44 \ni want to set this value to 2.50 and 44.00</p>\n\n<p>Can any one help for this ?</p>\n"},{"tags":["asp.net-mvc-3","linq","view","foreach"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13283351,"title":"LINQ result is not showing as expected","body":"<p>I'm trying to query for a particular column &amp; to show the item list in view properly one after another. Here is my code:</p>\n\n<p>Controller:</p>\n\n<pre><code>public ActionResult ShowImage()\n    {\n        using (var context = new ImageTrialDBEntities())\n        {\n            var pathlist = (from s in context.Images \n                           select s.ImageLink).ToList();\n\n            var model = new ImageModel();\n\n            model.ImageList = pathlist;\n\n\n            return View(model);\n        }\n\n    }\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>public class ImageModel\n{\n    public string Image { get; set; }\n    public IList&lt;string&gt; ImageList { get; set; }\n}\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;div&gt;\n@foreach (var s in Model.ImageList)\n{\n    @Html.DisplayFor(x=&gt;x.ImageList)\n    &lt;br /&gt;\n\n}\n\n&lt;/div&gt;\n</code></pre>\n\n<p>The list is showing like this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/v0Gyh.png\" alt=\"enter image description here\"></p>\n\n<p>I would like to show one at a time with a break in between. Please help.</p>\n"},{"tags":["database","asp.net-mvc-3","entity-framework","database-first"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":8,"score":1,"question_id":13283666,"title":"DbUpdateConcurrencyException when modifying data","body":"<p>I have been searching around for a bit now. I have tried a couple solutions involving catching the OptimisticConcurrency and adding:</p>\n\n<blockquote>\n  <p>\"@Html.HiddenFor(model => model.OrganizationID)\"</p>\n</blockquote>\n\n<p>to my delete page. My index (list), create, and edit pages work like a charm. However, when I go to delete a row it gives me the error below:</p>\n\n<blockquote>\n  <p>DbUpdateConcurrencyException<br>\n  Store update, insert, or delete statement affected an unexpected\n  number of rows (0). Entities may have been modified or deleted since\n  entities were loaded. Refresh ObjectStateManager entries.</p>\n</blockquote>\n\n<p>I have followed a tutorial to build a Database First application. Currently, I am just bringing in data from my Organizations table until I can get it working smoothly. My organization model looks like this (which was auto-generated from \"Add Code Generation Item\"):</p>\n\n<pre><code>//------------------------------------------------------------------------------\n// &lt;auto-generated&gt;\n//    This code was generated from a template.\n//\n//    Manual changes to this file may cause unexpected behavior in your application.\n//    Manual changes to this file will be overwritten if the code is regenerated.\n// &lt;/auto-generated&gt;\n//------------------------------------------------------------------------------\n\nnamespace VAGTC.Models\n{\n    using System;\n    using System.Collections.Generic;\n\n    public partial class Organization\n    {\n        public Organization()\n        {\n            this.Contact_Title = new HashSet&lt;Contact_Title&gt;();\n            this.Organization_Address = new HashSet&lt;Organization_Address&gt;();\n            this.Organization_Business_Type = new HashSet&lt;Organization_Business_Type&gt;();\n            this.Organization_Country = new HashSet&lt;Organization_Country&gt;();\n            this.Organization_Email = new HashSet&lt;Organization_Email&gt;();\n            this.Organization_Membership = new HashSet&lt;Organization_Membership&gt;();\n            this.Organization_Notes = new HashSet&lt;Organization_Notes&gt;();\n            this.Organization_Phone = new HashSet&lt;Organization_Phone&gt;();\n            this.Organization_Website = new HashSet&lt;Organization_Website&gt;();\n            this.Contacts = new HashSet&lt;Contact&gt;();\n            this.Organization_Industry_Code = new HashSet&lt;Organization_Industry_Code&gt;();\n        }\n\n        public int OrganizationID { get; set; }\n        public string Name { get; set; }\n\n        public virtual ICollection&lt;Contact_Title&gt; Contact_Title { get; set; }\n        public virtual ICollection&lt;Organization_Address&gt; Organization_Address { get; set; }\n        public virtual ICollection&lt;Organization_Business_Type&gt; Organization_Business_Type { get; set; }\n        public virtual ICollection&lt;Organization_Country&gt; Organization_Country { get; set; }\n        public virtual ICollection&lt;Organization_Email&gt; Organization_Email { get; set; }\n        public virtual ICollection&lt;Organization_Membership&gt; Organization_Membership { get; set; }\n        public virtual ICollection&lt;Organization_Notes&gt; Organization_Notes { get; set; }\n        public virtual ICollection&lt;Organization_Phone&gt; Organization_Phone { get; set; }\n        public virtual ICollection&lt;Organization_Website&gt; Organization_Website { get; set; }\n        public virtual ICollection&lt;Contact&gt; Contacts { get; set; }\n        public virtual ICollection&lt;Organization_Industry_Code&gt; Organization_Industry_Code { get; set; }\n    }\n}\n</code></pre>\n\n<p>This is the Delete ActionResult in my Organization controller:</p>\n\n<pre><code>//\n// GET: /Organization/Delete/5\n\npublic ActionResult Delete(int id)\n{\n    using (var db = new VAGTCEntities())\n    {\n        return View(db.Organizations.Find(id));\n    }\n}\n\n//\n// POST: /Organization/Delete/5\n\n[HttpPost]\npublic ActionResult Delete(int id, Organization organization)\n{\n    try\n    {\n        // TODO: Add delete logic here\n        using (var db = new VAGTCEntities())\n        {\n            db.Entry(organization).State = System.Data.EntityState.Deleted;\n                db.SaveChanges();\n\n        }\n            return RedirectToAction(\"Index\");\n    }\n    catch\n    {\n        return View();\n    }\n}\n</code></pre>\n\n<p>and on my Index page it declares the primary key:</p>\n\n<blockquote>\n  <p>@Html.ActionLink(\"Delete\", \"Delete\", new { id=item.OrganizationID })</p>\n</blockquote>\n\n<p>Out of curiosity I decided to try adding  </p>\n\n<blockquote>\n  <p>\"@Html.HiddenFor(model => model.OrganizationID)\"</p>\n</blockquote>\n\n<p>to the bottom, under BeginForm, instead of at the top of the page in fieldset and under legend tags: </p>\n\n<pre><code>@using (Html.BeginForm()) {\n    &lt;p&gt;\n        @Html.HiddenFor(model =&gt; model.OrganizationID)\n        &lt;input type=\"submit\" value=\"Delete\" /&gt; |\n        @Html.ActionLink(\"Back to List\", \"Index\")\n    &lt;/p&gt;\n}\n</code></pre>\n\n<p>Low and behold - it worked.\nI still want to post this! Perhaps someone else will find it and it will help them.\nAlthough I don't know 100% why it is - could someone shed some light on the matter?</p>\n"},{"tags":["asp.net-mvc-3","jqgrid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13282960,"title":"jqgrid in mvc with multiple delete","body":"<p>i want to add multiple delete functionality in my Jqgrid with MVC here there is code for my current grid in Action there is two thing View and delete but i want a check box and out side the grid one button when click on it the checked item should be delete and also before delete action fire message for confirmation please help.</p>\n\n<p>$(document).ready(function () </p>\n\n<p>{</p>\n\n<pre><code>    @if (ViewBag.Filters != string.Empty)\n    {\n        @Html.Raw(ViewBag.Filters);\n    }\n\n    $(\"#jq-grid\").jqGrid({\n        url: '/Home/GetList',//Service URL to fetch data\n        datatype: 'json',//Data Type which service will return\n        mtype: 'GET', \n        postData://Data that will be posted with every request\n        {\n            filters: function () {\n                return $.toJSON([\n                                //Here add the parameters which you like to pass to server\n                                { Key: \"EmployeeName\", Value: $(\"#txtEmployeeName\").val() },\n                                { Key: \"Id\", Value: $(\"#txtId\").val() }\n                                ]);\n                }\n        },\n        colNames: ['Employee Id', 'EmployeeName','empPhoto', 'Action'],//Column Names\n        colModel: [//Column details\n                    { name: \"Employee Id\", index: \"Employee Id\", width: \"220px\" },\n                    { name: \"Employee Name\", index: \"EmployeeName\", width: \"220px\" },\n                    { name: \"empPhoto\", index: \"empPhoto\", width: \"50px\" ,formatter:imageFormat },\n                    //Do not allow sorting on Action Column\n\n\n                   { name: \"Action\", index: \"Action\", sortable: false, width: \"220px\" }\n\n\n                  ],\n\n        autowidth: true,//Do not use auto width\n        sortname: '@ViewBag.EmployeeGridRequest.sidx',//This will persist sorting column\n        sortorder: '@ViewBag.EmployeeGridRequest.sord', // This will persist sorting order\n        imgpath: '',//if some images are used then show grid's path\n        caption: 'Employee Grid List',//Grid's Caption, you can set it to blank if you do not want this\n        scrollOffset: 0,\n        rowNum: @ViewBag.EmployeeGridRequest.rows, //Total Pages\n        page: @ViewBag.EmployeeGridRequest.page, // Current Page\n        rowList: [@ViewBag.EmployeeGridRequest.rowList], // Page Selection Options\n       viewrecords: true,\n      //  height: \"100%\",\n        altRows: true,//Use alternate row colors\n        altclass: 'jqgaltrow',//Alternate row class\n        hoverrows: true, //Do not hover rows on mouse over\n        pager: $('#jq-grid-pager'),//Div in which pager will be displayed\n        toppager: true,\n\n        pgbuttons: true,//Show next/previous buttons\n        loadtext:'Loading Data please wait ...',\n        //loadui :'block',//enable by default, block will disable inputs, remove this line if you do not want to block UI\n        loadComplete: function (response) //Incase you want to perform some action once data is loaded\n        {\n\n        }\n    });\n});\n</code></pre>\n"},{"tags":["c#",".net","asp.net-mvc-3","linq","entity"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13276745,"title":"Creating Navigation Property without foreign key?","body":"<p>I am trying to create a navigation property for my data model using an existing database.  The data has a shared key (like a foreign key) however it is not specified that way in the database.  Here is what it looks like:</p>\n\n<pre><code> [Table(\"Alpha\")]\n    public class Alpha\n    {\n        public int AlphaID { get; set; }\n\n        public int AlphaGroupID { get; set; }\n\n        public int? ParentAlphaID { get; set; }\n\n        public int? CodeID { get; set; }\n\n        public int? BracketCodeID { get; set; }\n\n        public string Title { get; set; }\n    }\n\n\n\n\n\n[Table(\"AlphaGroup\")]\n    public class AlphaGroup\n    {\n        [Column(\"AlphaGroupID\")]\n        public int AlphaGroupID { get; set; }\n\n        public string Title { get; set; }\n\n        public string TitleAddon { get; set; }\n\n    }\n</code></pre>\n\n<p>AlphaGroupID needs to be a navigation property to AlphaGroupID but is not a foreign key.  Is there a way to accomplish this?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","loops","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13282336,"title":"TextBoxFor model incrementing dynamically in a loop","body":"<p>I am building a web application for working out. When a work out day loads, it displays a FORM that has a series of text boxes for each exercise to record the amount of repetitions and the weight done for each set. Each exercise requires a different amount of sets.</p>\n\n<p>I created a class that holds two object types, a list of exercises from an ExerciseReference entity class/database table, and an entity class for recording the data that the user enters into the form and submits.</p>\n\n<p>My model looks like this:</p>\n\n<pre><code>public class ExerciseListModel\n{\n    public List&lt;ExerciseRef&gt; exercises { get; set; }\n    public ExerciseREC recordedExercises { get; set; }\n}\n</code></pre>\n\n<p>When building the Reps and Weights text boxes for each exercise, my Razor HTML looks similar to this:</p>\n\n<pre><code> @foreach(ExerciseRef item in Model.exercises)\n        {\n            &lt;div class=\"editor-label\"&gt;\n            &lt;h3&gt;@item.Name.ToString()&lt;/h3&gt;\n            &lt;/div&gt;\n            &lt;p&gt;@item.Description.ToString()&lt;/p&gt;\n\n                for (int i = 0; i &lt; item.NumberOfSets; i++)\n                {                        \n                   &lt;text&gt;Set #: &lt;/text&gt; @(i + 1)&lt;br /&gt;\n                   &lt;text&gt;REPS: &lt;/text&gt; @Html.TextBoxFor(m =&gt; m.recordedExercises.Set1Reps)&lt;br /&gt;\n                   &lt;text&gt;WEIGHT: &lt;/text&gt; @Html.TextBoxFor(m =&gt; m.recordedExercises.Set1Weight) &lt;br /&gt;&lt;br /&gt;\n\n                }\n\n        }\n</code></pre>\n\n<p>So essentially, this is a for loop within a foreach loop. The foreach loop builds the HTML list of all of the exercises, while the for loop builds the text boxes for reps and weights. </p>\n\n<p>I need the number in Set1Reps in the following line:</p>\n\n<pre><code> @Html.TextBoxFor(m =&gt; m.recordedExercises.Set1Reps)\n</code></pre>\n\n<p>To be dynamic and increment with the loop. I need it to have Set1Reps for Set 1, and change to Set2Reps for Set 2, and so on and so forth. </p>\n\n<p>Any idea how I could go about doing that?</p>\n"},{"tags":["jquery","asp.net-mvc-3","validation","jquery-validate","html.dropdownlistfor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13277806,"title":"dropdownlistfor + jquery validation","body":"<p>I am creating an application in asp .net mvc3 c#. I create a dropdown list but I am unable to do a client side validation using Jquery.</p>\n\n<p>I have looked at numerous articles related to it and know that this is a bug in asp .net mvc3. However, none of the work arounds have worked for my case. </p>\n\n<p>My code is below:</p>\n\n<p>Entity</p>\n\n<pre><code>[Required(ErrorMessage = \"Furnishing is required.\")]\n[Display(Name = \"Furnishing*\")]\npublic int FurnishedType { get; set; }\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.8.2.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n&lt;div class=\"editor-label\"&gt;\n    @Html.LabelFor(model =&gt; model.Property.FurnishedType)\n    @Html.DropDownListFor(model =&gt; model.Property.FurnishedType, Model.FurnishedTypes, \"--Select One--\")\n&lt;/div&gt;\n&lt;div class=\"editor-field add-property-error\"&gt;            \n    @Html.ValidationMessageFor(model =&gt; model.Property.FurnishedType)\n&lt;/div&gt;\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>public ActionResult AddProperty()\n{\n    AddPropertyViewModel viewModel = new AddPropertyViewModel\n    {\n        ...\n        FurnishedTypes = websiteRepository.GetFurnishedTypeSelectList(-1),\n        ...\n    };\n    return View(viewModel);\n}\n\npublic IEnumerable&lt;SelectListItem&gt; GetFurnishedTypeSelectList(int selectedId)\n{\n    return db.FurnishedType\n        .OrderBy(x =&gt; x.FurnishedTypeDescription)\n        .ToList()\n        .Select(x =&gt; new SelectListItem\n        {\n            Value = x.FurnishedTypeId.ToString(),\n            Text = x.FurnishedTypeDescription\n        });\n}\n</code></pre>\n\n<p>There is a database which has values as below</p>\n\n<pre><code>1 Furnished\n2 Part Furnished\n...\n</code></pre>\n\n<p>which is used to populate the select list.</p>\n\n<p>Now, this is a required field but I am unable to do a client side validation to see if the user chooses any value?\nAny help would be grateful</p>\n"},{"tags":["jquery","html","css","asp.net-mvc-3","jquery-ui"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":76,"score":4,"question_id":12929667,"title":"Changing screen size in the browser causes issues in our application","body":"<p>I have a MVC web application, with no razor code, that is the views are build using only HTML and javascript code. Below is the screenshot of my screen.</p>\n\n<p>Now in IE8 i am getting the following issues:</p>\n\n<p>Screenshot of my screen : <a href=\"http://www.freeimagehosting.net/ixio1\" rel=\"nofollow\">http://www.freeimagehosting.net/ixio1</a></p>\n\n<p>1.Reducing the browser zoom level distorts the elements in the screen that is the left and right panel comes one by one vertically, where increasing the zoom level works fine. </p>\n\n<p>2.And I am having a header with two sections. Top section will be always visible in the screen even when the user scrolls down. Now the buttons in the bottom part of the header are getting hidden behind the top section of header when i set back the zoom level to 100%, this also happens when I scroll to the bottom of the screen and then the vertical scroll-bar disappears on any scenario.</p>\n\n<p>Screenshot with hidden header buttons : <a href=\"http://www.freeimagehosting.net/2eq68\" rel=\"nofollow\">http://www.freeimagehosting.net/2eq68</a></p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","c#-4.0","attributes"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":9,"score":1,"question_id":13271741,"title":"Progress bar on synchronious operations in Mvc 3","body":"<p>I have long synchronious calls to MainFrame in my Mvc 3 application \nI'd like to create a custom Attribute that will decorate My controller actions which I know can take long time. And if controller is decorated with this attribute I need to render \"loading message\"</p>\n\n<p>Any Ideas please , could it be achieved ?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","partial-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13255107,"title":"Can I modify MVC viewmodel before passing it into a Partial","body":"<p>If I have a model passed onto Index.cshtml </p>\n\n<p>Can I modify a property on the model inside of a code block in Index.cshtml and then pass modified model into Html.Partial(\"_MyView\", Model)</p>\n\n<pre><code>@model.Name = \"Joe\"\n\n@Html.Partial(\"_MyView\", Model)\n\n@model.Name = \"Ann\"\n\n@Html.Partial(\"_MyView\", Model)\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","forms-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13273613,"title":"MVC: proper authentication","body":"<p>In my controller I have a login method. There I check credentials and if everything is ok call</p>\n\n<pre><code>FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);\n</code></pre>\n\n<p>It works but if I immediately check</p>\n\n<pre><code>this.User.Identity.IsAuthenticated\n</code></pre>\n\n<p>inside a controller I see that it is still false. I need to refresh a page to see that user is indeed authenticated. Is there a possibility to make user authenticated immediately, during the same request? Other partial views which are rendered after depend on it.</p>\n\n<p>In web forms development I would call something like </p>\n\n<pre><code>RedirectFromLoginPage\n</code></pre>\n\n<p>but here it is inside partial view rendered from a layout file, I can't redirect from there.</p>\n"},{"tags":["c#","unit-testing","asp.net-mvc-3","session"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":586,"score":2,"question_id":6990019,"title":"How can I properly Mock the KeysCollection in HttpSessionStateBase?","body":"<p>I setup this mock session object from the example here: <a href=\"http://stackoverflow.com/questions/340827/how-to-moq-an-indexed-property\">How to MOQ an Indexed property</a></p>\n\n<pre><code>/// &lt;summary&gt;\n/// HTTP session mockup.\n/// &lt;/summary&gt;\ninternal sealed class HttpSessionMock : HttpSessionStateBase\n{\n    private readonly Dictionary&lt;string, object&gt; objects = new Dictionary&lt;string, object&gt;();\n\n    public override object this[string name]\n    {\n        get { return (objects.ContainsKey(name)) ? objects[name] : null; }\n        set { objects[name] = value; }\n    }\n}\n</code></pre>\n\n<p>some sample code to produce an error...</p>\n\n<pre><code>var mockSession = new HttpSessionMock();\nvar keys = mockSession.Keys;\n</code></pre>\n\n<p>Error: <strong>The method or operation is not implemented.</strong></p>\n\n<p>I need to implement the Keys property, but can't create a KeysCollection object.</p>\n\n<p>What is the best way to do this?</p>\n\n<p>EDIT: [SOLUTION]</p>\n\n<p>I ended up changing the HttpSessionMock based on the answer given.  This is what I ended up with.  (I also added a reference to System.Linq).</p>\n\n<pre><code>internal sealed class HttpSessionMock : HttpSessionStateBase\n{\n    private readonly NameValueCollection objects = new NameValueCollection();\n\n    public override object this[string name]\n    {\n        get { return (objects.AllKeys.Contains(name)) ? objects[name] : null; }\n        set { objects[name] = (string)value; }\n    }\n\n    public override NameObjectCollectionBase.KeysCollection Keys\n    {\n        get { return objects.Keys; }\n    }\n}\n</code></pre>\n\n<p>note: this mock session will only store strings, not objects.</p>\n"},{"tags":["asp.net-mvc-3","multiple","input-validation","fields"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":149,"score":1,"question_id":11665358,"title":"Multiple fields validation in registration mvc3","body":"<p>In the registration view of my mvc3 project i want to validate multiple input fields.\nTo be more precise, i need to check whether the User (firstname, lastname, street and postal) already exists. I tried it with the [Remote] validation together with the AdditionalFields property but for me it seems to be the wrong approach to solve that. (but i could be wrong).</p>\n\n<p>What would be the best way to do the multiple fields validation, so that all four fields are checked for input? Do i have to write a custom validation with data annotation? </p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc-3","forms-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13280273,"title":"Forms authentication in asp.net mvc 3 - ActionResult Register method - how to?","body":"<p>can you please help me. I have written logon and logout methods correctly using forms authentication in asp.net mvc 3.</p>\n\n<pre><code>[HttpPost]\n        public ActionResult LogOn(Guest guest, String returnURL, bool RememberMe = false)\n        {\n            var isValidURL = bl.IsValidReturnUrl(returnURL);\n\n            if (!ModelState.IsValid)\n            {\n                ModelState.AddModelError(\"\", \"The username or password provider is incorrect\");\n                return View(guest);\n            }\n\n            if (bl.IsUserValidated(guest.Username, guest.Password))\n            {\n                FormsAuthentication.SetAuthCookie(guest.Username, RememberMe);\n                if (isValidURL)\n                    return Redirect(returnURL);\n                else\n                    return RedirectToAction(\"Home\", \"Index\");\n            }\n            return View(guest);\n        }\n</code></pre>\n\n<p>How to write a <strong>Register</strong> controller method, I don't know where to start, I have my own database in which I should insert new registered users with their username, password and email. Thanks</p>\n"},{"tags":["asp.net-mvc-3","grid","url-routing","telerik-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13278661,"title":"MVC url.action with \"?\" before variable from telerik grid","body":"<p>I am using Telerik MVC grid in my application, trying to open a view using the following:</p>\n\n<pre><code>columns.Template(item =&gt; Html.Raw(\"&lt;a href=\\\"\" + Url.Action(\"Action\", \"Controller\", new { id = item.ID}) + \"\\\"&gt;\" + item.Name + \"&lt;/a&gt;\")).Title(\"Go\").Width(300);\n</code></pre>\n\n<p>The url I get is:</p>\n\n<pre><code>http://localhost:xxx/Controller/Action/54\n</code></pre>\n\n<p>However, the view displays fine, however it does not funcion as it should, the url should be:</p>\n\n<pre><code>http://localhost:xxx/Controller/Action?id=54\n</code></pre>\n\n<p>I would appreciate your suggestions.  Thanks in advance.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13279297,"title":"Alternatives to DisplayName DataAnnotation when displaying run-time data in MVC3 model","body":"<p>I have a requirement to display a label whose text is determined at run-time.</p>\n\n<p>Previously, when the text was known at compile-time, I was able to use the DisplayName DataAnnotation to craft how my model represented its data.</p>\n\n<p>As an example, I used to have this:</p>\n\n<pre><code>[DisplayName(\"Task Template\")]\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; TaskTemplate { get; set; }\n\n&lt;%= Html.LabelFor(model =&gt; model.TaskTemplate) %&gt;\n&lt;%= Html.DropDownListFor(model =&gt; model.TaskTemplateFlag, new SelectList(Model.TaskTemplate, \"Key\", \"Value\"))%&gt;\n</code></pre>\n\n<p>but now the DisplayName needs to be determined at run-time.</p>\n\n<p>According to <a href=\"http://stackoverflow.com/questions/9434918/displayattribute-name-with-a-variable-dynamic-displayname\">this StackOverflow answer</a> there is no way to do this using a DataAnnotation.</p>\n\n<p>I'm left wondering what best practice is? Do I stop using LabelFor altogether? Should I just store a bunch of string properties in my model, load my values into the properties, and render using DisplayFor?</p>\n\n<p><strong>Update:</strong> I think that this is probably a good enough solution:</p>\n\n<pre><code>public string TaskTemplateLabel { get; set; }\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; TaskTemplate { get; set; }\n\n//Constructor: TaskTemplateLabel = GetLabelFromDataSource();\n\n&lt;%= Html.LabelFor(model =&gt; model.CurrentDeviceName, Model.TaskTemplateLabel)%&gt;\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13278781,"title":"How to disable client-side validation?","body":"<p>I need disable client-side validation for FORM.</p>\n\n<p>How do this?</p>\n\n<p>I do not want to just disable js files</p>\n\n<pre><code>&lt;script src=\"@Url.Content(\"~/Scripts/jquery/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n"},{"tags":["linq","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":8,"up_vote_count":13,"down_vote_count":0,"view_count":39170,"score":13,"question_id":5070762,"title":"MVC3 Razor @Html.DropDownListFor","body":"<p>I could use some help implementing @Html.DropDownListFor. My objective is to filter the list of Products by Category.</p>\n\n<p>This code will display a list box:</p>\n\n<pre><code>@model IEnumerable&lt;Sample.Models.Product&gt;\n@{\n    List&lt;Sample.Models.Category&gt; list = ViewBag.Categories;\n    var items = new SelectList(list, \"CategoryID\", \"CategoryName\");\n\n}\n@Html.DropDownList(\"CategoryID\", items)\n</code></pre>\n\n<p>But I'm having trouble getting <code>@Html.DropDownListFor</code> to work:</p>\n\n<pre><code>@model IEnumerable&lt;Sample.Models.Product&gt;\n@{\n    List&lt;Sample.Models.Category&gt; list = ViewBag.Categories;\n    var items = new SelectList(list, \"CategoryID\", \"CategoryName\");\n\n}\n@Html.DropDownListFor(???, @items)\n</code></pre>\n\n<p>I could use some help constructing the Linq portion of <code>@Html.DropDownListFor</code>.\nHere is the model:</p>\n\n<pre><code>public class Product\n{\n    public int ProductID { get; set; }\n    public string ProductName { get; set; }\n    public int CategoryID { get; set; }\n    public string QuantityPerUnit { get; set; }\n    public Decimal? UnitPrice { get; set; }\n    public short UnitsInStock { get; set; }\n\n    public virtual Category Category { get; set; }\n}\n\npublic class Category\n{\n    public int CategoryID { get; set; }\n    public string CategoryName { get; set; }\n\n    public virtual ICollection&lt;Product&gt; Products { get; set; }\n\n}\n</code></pre>\n"},{"tags":["javascript","asp.net-mvc-3","jquery-ajax","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13240548,"title":"Ajax Call before submitting the form","body":"<p>I need to check whether the data is already exists in the database before submitting the form using ajax. The most common scenario is the checking the availability of the username and email. </p>\n\n<p>It's not working but I tested the ajax function without using the from control and it works fine. The project is created in MVC 3 VB.</p>\n\n<p>Javascript:</p>\n\n<pre><code>$('#addSalesPeople').click(function () {\n   $.post(\"ajax_functions/checkDuplicate.cshtml\",\n   {\n      extension: document.getElementById('Extension').value,\n      initials: document.getElementById('Initials').value\n   },\n      function (data, status) {\n      alert(\"Data: \" + data + \"\\nStatus: \" + status);\n   });\n});\n</code></pre>\n\n<p>HTML: </p>\n\n<pre><code>@Using Html.BeginForm(\"Create\", \"SalesPeople\", FormMethod.Post)\n@Html.ValidationSummary(True)\n@&lt;fieldset&gt;  \n    ............................\n    ..............................  \n\n    @Html.TextBoxFor(Function(model) model.Extension, New With {.onkeyup = \"javascript: charCounter(this,4);\", .onblur = \"javascript: zeroPad(this, 4)\"})\n\n    @Html.TextBoxFor(Function(model) model.Initials)\n\n    &lt;input id=\"addSalesPeople\" class=\"btn span2\" type=\"submit\" value=\"Add\" /&gt;\n\n&lt;/fieldset&gt;\n</code></pre>\n\n<p>-Thanks</p>\n"},{"tags":["c#","asp.net-mvc-3","c#-4.0","castle-windsor"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":52,"score":3,"question_id":13153370,"title":"Does ASP.NET MVC 3 cache Filters?","body":"<p>I have an UnitOfWork attribute, something like this:</p>\n\n<pre><code>public class UnitOfWorkAttribute : ActionFilterAttribute\n{\n    public IDataContext DataContext { get; set; }\n\n    public override void OnActionExecuted(ActionExecutedContext filterContext)\n    {            \n        if (filterContext.Controller.ViewData.ModelState.IsValid)\n        {\n            DataContext.SubmitChanges();\n        }\n\n        base.OnActionExecuted(filterContext);\n    }\n}\n</code></pre>\n\n<p>As you can see, it has <code>DataContext</code> property, which is injected by Castle.Windsor. <code>DataContext</code> has lifestyle of PerWebRequest - meaning single instance reused for each request.</p>\n\n<p>Thing is, that from time to time I get <code>DataContext is Disposed</code> exception in this attribute and I remember that ASP.NET MVC 3 tries to cache action filters somehow, so may that causes the problem?  </p>\n\n<p>If it is so, how to solve the issue - by not using any properties and trying to use ServiceLocator inside method? </p>\n\n<p>Is it possible to tell ASP.NET MVC to not cache filter if it does cache it?</p>\n"},{"tags":["asp.net-mvc-3","charts"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":2641,"score":5,"question_id":5905908,"title":"ASP.NET MVC Chart Helper. How to set different color for each Bar/Column on chart?","body":"<p>I am using the ASP.NET MVC 3.0 Chart Helper.</p>\n\n<p>Fore some reason colors scheme (e.g <code>Rainfall</code>) applied only for Pie and Doughnut charts and not for any another types (Bar, Column etc).</p>\n\n<p>The bars/columns on all another charts has all the same color. How to fix that?</p>\n\n<p>Here is my chart:</p>\n\n<pre><code>chart = new System.Web.Helpers.Chart(width: 100, height: 200)\n                .AddSeries(\n                    chartType: Bar,\n                    legend: Rainfall\n                    xValue: new[] { \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\" },\n                    yValues: new[] { \"20\", \"20\", \"40\", \"10\", \"10\" });\n            }\n</code></pre>\n\n<p>Also i was trying to use all schemes from <code>System.Web.Helpers public static class ChartTheme</code>, none of these helped</p>\n"},{"tags":["asp.net","linq","asp.net-mvc-3","group","cfoutput"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":469,"score":0,"question_id":9202430,"title":"LINQ to SQL grouping and passing onto a view","body":"<p>I am new to Asp.Net, MVC3, Linq, and everything else related to it. I'm very used to PHP and ColdFusion so pardon my ignorance! Essentially what I am trying to do is re-create the situation in ColdFusion where I can perform the equivalent of a cfoutput's group attribute. I'm so used to just calling a stored procedure and then doing</p>\n\n<p><code>&lt;cfoutput group=\"id\"&gt;</code></p>\n\n<p>and then another inner cfoutput for any columns that have non-distinct data. Works like a charm! Not so much in Asp.Net.</p>\n\n<p>I would like to stay with using my stored procedure, which is returning a join from two tables with a one-to-many relationship. For example's sake let's say I have 3 columns: a full name, a title, and a graduation year. The graduation year is the column from the joined table, so my result from the stored procedure looks like this:</p>\n\n<p>Jim   Professor    2005<br>\nJim   Professor    2008<br>\nJim   Professor    2011</p>\n\n<p>I am sending this to the View. I am assuming it's the View's job to then group the data based on one of the columns (probably the full name). I want to output an HTML table with 3 columns and in this situation I would have ONE row:</p>\n\n<p>Jim   Professor   2005, 2008, 2011</p>\n\n<p>I have googled tons of examples that use this thing called a group key. This does not seem to help me because I'm not interested in just outputting one value \"Jim\" (or whatever the grouped value is), I need both \"Jim\" and \"Professor\" values to be output for each row. My thinking is I would need 2 foreach loops, the outer loop displaying the fullname and title and the inner loop going through all possible matches for the graduation years. I cannot seem to get the graduation years in a group, especially with this IGrouping syntax. The key can only store one value and I need every value on that row, I only really need one or two values to be iterated over. Should I try and create a custom view model after I perform a secondary linq grouping and then send that to a strongly typed view?</p>\n\n<p><strong>EDIT:</strong>\nOk, I have code that works but it seems very inefficient as I basically have to re-define all of the columns/values that I have from my stored procedure. It almost makes me want to forget stored procedures and just use LINQ for everything. It seems what I was asking for is a kind of \"group on multiple columns\" and <a href=\"http://stackoverflow.com/questions/5231845/c-sharp-linq-group-by-on-multiple-columns\">link</a> helped immensely.</p>\n\n<pre><code>var records = db.getRecords();\nvar groups = from r in records\n    group r by new\n    {\n       r.id\n    }\n    into row\n    select new ListVM()\n    {\n       id = row.Key.id,\n       fullname = row.Select(x =&gt; x.fullname).First(),\n       title = row.Select(x =&gt; x.title).First(),\n       degrees = row.Select(x =&gt; x.degree_name).ToList(),\n       majors = row.Select(x =&gt; x.major_name).ToList()\n    };\nreturn View(groups);\n</code></pre>\n\n<p>I of course had to create a ViewModel for this to work. In my view then I can use for loops to iterate over the degrees and majors lists. Is this the best way to do this? I just generally need more than just the group key to display my entire row of information, and only want to iterate over lists once or twice in a 20 column row, as opposed to only displaying the group key once and iterating over everything in most examples I see.</p>\n"},{"tags":[".net","asp.net-mvc-3","web-config","nuget"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13274580,"title":"Nuget web.config.transform oddly merges dependentAssembly section","body":"<p>I just created a custom nuget package with the goal of packaging our Devart dlls s.t. we have a proper versioning and updating mechanism in place throughout all of our projects.</p>\n\n<p>The structure of the Nuget package is according to the instructions on the <a href=\"http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package\" rel=\"nofollow\">offical wiki</a> and looks as follows:</p>\n\n<ul>\n<li>DevartOracle\n<ul>\n<li>content\n<ul>\n<li>web.config.transform</li>\n</ul></li>\n<li>lib\n<ul>\n<li>Devart.Data.Oracle.dll</li>\n<li>...</li>\n</ul></li>\n<li>DevartOracle.nuspec</li>\n</ul></li>\n</ul>\n\n<p>The content of the nuspec file is more or less the following:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;package &gt;\n  &lt;metadata&gt;\n    &lt;id&gt;DevartOracle&lt;/id&gt;\n    &lt;version&gt;6.70.311-pre6&lt;/version&gt;\n    &lt;title&gt;Devart Oracle dotConnect&lt;/title&gt;\n    ...\n    &lt;requireLicenseAcceptance&gt;false&lt;/requireLicenseAcceptance&gt;\n    &lt;description&gt;Drivers from Devart for Oracle and Entity Framework&lt;/description&gt;\n    &lt;releaseNotes&gt;&lt;/releaseNotes&gt;\n    &lt;copyright&gt;Copyright 2012&lt;/copyright&gt;\n    &lt;tags&gt;&lt;/tags&gt;\n    &lt;dependencies&gt;\n    &lt;/dependencies&gt;\n  &lt;/metadata&gt;\n&lt;/package&gt;\n</code></pre>\n\n<p>Nothing special actually. I publish the nuget package to our <a href=\"http://juristr.com/blog/2012/04/using-nuget-to-distribute-our-company/\" rel=\"nofollow\">local repository</a> using the following command:</p>\n\n<pre><code>nuget pack DevartOracle.nuspec\n</code></pre>\n\n<p>The dll's install just fine, however I also wanted to create a web.config merge. So I added a web.config.transform file as specified in the docs...again with the following content:</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n  &lt;configuration&gt;\n    &lt;runtime&gt;\n      &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n        &lt;dependentAssembly&gt;\n          &lt;assemblyIdentity name=\"Devart.Data.Oracle\" publicKeyToken=\"09af7300eec23701\" culture=\"neutral\" /&gt;\n          &lt;bindingRedirect oldVersion=\"0.0.0.0-6.70.311.0\" newVersion=\"6.70.311.0\" /&gt;\n        &lt;/dependentAssembly&gt;\n      &lt;/assemblyBinding&gt;\n    &lt;/runtime&gt;\n    &lt;system.data&gt;\n      &lt;DbProviderFactories&gt;\n        &lt;remove invariant=\"Devart.Data.Oracle\" /&gt;\n        &lt;add name=\"dotConnect for Oracle\" invariant=\"Devart.Data.Oracle\" description=\"Devart dotConnect for Oracle\" type=\"Devart.Data.Oracle.OracleProviderFactory, Devart.Data.Oracle, Version=6.70.311.0, Culture=neutral, PublicKeyToken=09af7300eec23701\" /&gt;\n      &lt;/DbProviderFactories&gt;\n    &lt;/system.data&gt;\n  &lt;/configuration&gt;\n</code></pre>\n\n<h2>The Problem</h2>\n\n<p>When I execute the merge into a web.config with a non-existent or empty <code>&lt;assemblyBinding&gt;</code> section everything works as expected, however when I have - say - the follwing content already there:</p>\n\n<pre><code>&lt;runtime&gt;\n  &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n    &lt;dependentAssembly&gt;\n      &lt;assemblyIdentity name=\"EntityFramework\" publicKeyToken=\"b77a5c561934e089\" culture=\"neutral\" /&gt;\n      &lt;bindingRedirect oldVersion=\"0.0.0.0-4.3.0.0\" newVersion=\"4.3.0.0\" /&gt;\n    &lt;/dependentAssembly&gt;\n  &lt;/assemblyBinding&gt;\n&lt;/runtime&gt;\n</code></pre>\n\n<p>then the result of the merge is this odd one:</p>\n\n<pre><code>&lt;runtime&gt;\n  &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n    &lt;dependentAssembly&gt;\n      &lt;assemblyIdentity name=\"EntityFramework\" publicKeyToken=\"b77a5c561934e089\" culture=\"neutral\" /&gt;\n      &lt;bindingRedirect oldVersion=\"0.0.0.0-4.3.0.0\" newVersion=\"4.3.0.0\" /&gt;\n      &lt;assemblyIdentity name=\"Devart.Data.Oracle\" publicKeyToken=\"09af7300eec23701\" culture=\"neutral\" /&gt;\n      &lt;bindingRedirect oldVersion=\"0.0.0.0-6.70.311.0\" newVersion=\"6.70.311.0\" /&gt;\n    &lt;/dependentAssembly&gt;\n  &lt;/assemblyBinding&gt;\n&lt;/runtime&gt;\n</code></pre>\n\n<p>Any ideas??</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","asp.net-mvc-routing","asp.net-mvc-areas"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":29,"score":2,"question_id":13277126,"title":"Force all Areas to use same Layout","body":"<p>I have the following project structure:</p>\n\n<ul>\n<li><p>/Views/Shared/_Layout;</p></li>\n<li><p>/Areas/Area1/Views/ControllerName/Index;</p></li>\n</ul>\n\n<p>...</p>\n\n<ul>\n<li>/Areas/AreaN/Views/ControllerName/Index.</li>\n</ul>\n\n<p>Is there any way to force all areas to use the <strong>_Layout</strong> as a <strong>base layout</strong>?</p>\n\n<p>Is there any way to do it without adding the <strong>_ViewStart</strong> file (for example, via the routing configuration)?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13276540,"title":"ASP.Net MVC Remote Validation submitting incorrect URL","body":"<p>I am following <a href=\"http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx\" rel=\"nofollow\">this</a> walkthrough on how to implement Remote Validation.  The remote validation method fires when expected, but it is requesting the wrong url.  It is requesting</p>\n\n<pre><code>/Validator/IsUID_Available \n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>http://localhost:23615/Validator/IsUID_Available.\n</code></pre>\n\n<p>This results in a 404 not found error. What am I missing?</p>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13276044,"title":"Creating JSON key, value in VB.NET","body":"<p>I have the following code:</p>\n\n<pre><code>    Dim result = New Dictionary(Of String, String)\n\n    For Each item In food\n\n        result.Add(StrConv(item.Shrt_Desc.Replace(\",\", \", \"), VbStrConv.ProperCase), item.Shrt_Desc)\n\n    Next\n\n    Return Json(result, JsonRequestBehavior.AllowGet)\n</code></pre>\n\n<p>I need to make it into the following key and value in JSON:</p>\n\n<blockquote>\n  <p>An array of objects with label and value properties: [ { label:\n  \"Choice1\", value: \"value1\" }, ... ]</p>\n</blockquote>\n\n<p>How can I do this?  Thank you.</p>\n"},{"tags":["c#","asp.net-mvc-3","model-binding","mvc-editor-templates"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13275702,"title":"Custom binding for DateTime not working when EditorTemplate is in place","body":"<p>As the default editors that MVC3 provides for DateTime are not HTML5 friendly, I have coded the following custom Editor Template:</p>\n\n<p>(DateTime.cshtml)</p>\n\n<pre><code>@model DateTime?\n\n&lt;input type=\"date\" value=\"@{ \n    if (Model.HasValue) {\n        @Model.Value.ToISOFormat() // my own extension method that will output a string in YYYY-MM-dd format\n    }\n}\" /&gt;\n</code></pre>\n\n<p>Now, this works fine, but then I had the problem of the dates not being correctly parsed, being that the ISO dates are not not parsed with the default DateTime binding. So, I implemented my own binder:</p>\n\n<pre><code>public class IsoDateModelBinder: DefaultModelBinder\n{\n    const string ISO_DATE_FORMAT = \"YYYY-MM-dd\";\n\n    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)\n    {\n        var value = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);\n\n        if (string.IsNullOrEmpty(value.AttemptedValue))\n            return null;\n\n        DateTime date;\n        if (DateTime.TryParseExact(value.AttemptedValue, ISO_DATE_FORMAT, CultureInfo.InvariantCulture, DateTimeStyles.None, out date));\n            return date;\n\n        return base.BindModel(controllerContext, bindingContext);\n    }\n}\n</code></pre>\n\n<p>And I have registered it (Global.asax.cs):</p>\n\n<pre><code>System.Web.Mvc.ModelBinders.Binders.Add(typeof(DateTime), new IsoDateModelBinder());\nSystem.Web.Mvc.ModelBinders.Binders.Add(typeof(DateTime?), new IsoDateModelBinder());\n</code></pre>\n\n<p>However, when the custom edit template is in place, the custom binder won't get called at all. I had removed it from the solution and the custom binder is correctly called -- although at that point the format is wrong because the custom editor hadn't provide the correct controls.</p>\n\n<p>So, what am I missing?</p>\n"},{"tags":["javascript","asp.net","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13272355,"title":"Passing Data from a partial view to a full view","body":"<p>I'm Creating a Website in Visual Studio 2010 Express. The website is supposed to connect to a database and display data. To do that I'm using ASP.NET, MVC, Razor, ajax, and java scripts. I'm very new to all of this. Please be patient with me, I started this project from scratch as the project I was supposed to edit was cryptic. I'm however using parts of code from the original project so that i avoid repetition.</p>\n\n<p>Right now I'm at the point where I want to take a the full partial view and display it in a full view. But it is not working. Please point me in the right direction.</p>\n\n<p>This is the full view</p>\n\n<pre><code>@{\nViewBag.Title = \"Bread Line OEE\";\n}\n\n&lt;!-- This page displays the Bread Line OEE --&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n\n$(function () {\n$.get('@Url.Content(\"~/OEE/BreadLineOEEResults?Hours=1\")', function (data) {\n$('#BreadLineOEE01').html(data);\n});\n\nsetInterval(function () {\n$.get('@Url.Content(\"~/OEE/BreadLineOEEResults?Hours=1\")', function (data) {\n    $('#BreadLineOEE01').html(data);\n});\n}, 10000);\n});   \n\n&lt;/script&gt;\n\n&lt;table&gt;\n&lt;tr&gt;\n&lt;td id=\"BreadLineOEE01\"&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>This is the partial view</p>\n\n<pre><code>&lt;table&gt;\n&lt;tr&gt;\n&lt;th&gt;Time Frame&lt;/th&gt;\n&lt;td&gt;Last @ViewBag.DurationHours Hours&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td&gt;Availablility&lt;/td&gt;\n&lt;td&gt;@Model.Availability&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc-3","grid","datatables"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13275305,"title":"1-N entity creating/editing View","body":"<p>I'm wasting hours (or should I say days?) on trying to put this together, so, any help would be very apreciated.</p>\n\n<p>The problem: I'm building a MVC3 View and Controller to enter data for a class that represents a Client, which has 0 or N phone numbers (that are represented with a Class ClientPhone). My problem lies on the user interface (View) for that model. So far, based on several reaserches on the net, I've created a strongly typed view for Client. I then iterate through the Phones attribute of the model, rendering a HTML Table for the Phones.\n  I'm trying to use DataTables representation of that table for all the operations on Phones data, and in the submit action (javascript) I'm sending this table through JSon for the controller (altogether with the Client's data itself).\n  My problem so far is that implementing in JS each and every one of the uses cenarios for those Phones data manipulations (like entering new phones, removing persisted phones, removing newly added - and yet not persisted - phones, updating persisted phones, ....) is such a labor! There MUST be an easier way. </p>\n\n<p>Can anyone point me a way to maintain a list of a certain class, within a view for a parent class? </p>\n\n<hr>\n\n<p>Ok, here's the code (or at least, the part that matters):</p>\n\n<p>For the Client-like class, I got this:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.ComponentModel.DataAnnotations;\nusing System.ComponentModel.DataAnnotations.Schema;\nusing System.Linq;\nusing System.Web;\nusing Olimpique.DAL;\nusing System.Data.Entity;\n\nnamespace Olimpique.Entities\n{\n[Table(\"OLIM_PROPRIETARIO\")]\npublic class Proprietario\n{\n    public int? fIDProprietario;\n    //---=== ATRIBUTOS ===---\n    [Key]\n    [Column(\"PROP_ID_PROPRIETARIO\")]\n    public int? IDProprietario { get { return this.fIDProprietario; } set { this.fIDProprietario = value; this.LoadLists(); } }\n\n    [ForeignKey(\"EstadoCivil\")]\n    [Column(\"ESCI_ID_ESTADO_CIVIL\")]\n    public int? IDEstadoCivil { get; set; }\n    public virtual EstadoCivil EstadoCivil { get; set; }\n\n    [Column(\"PROP_TX_NOME\")]\n    public string Nome { get; set; }\n\n    [Column(\"PROP_TX_CPF\")]\n    public string CPF { get; set; }\n\n    [Column(\"PROP_TX_IDENTIDADE\")]\n    public string Identidade { get; set; }\n\n    [Column(\"PROP_TX_ORGAO_IDENT\")]\n    public string OrgaoIdentidade { get; set; }\n\n    [Column(\"PROP_DT_EMISSAO_IDENT\")]\n    public DateTime? EmissaoIdentidade { get; set; }\n\n    [Column(\"PROP_TX_NACIONALIDADE\")]\n    public string Nacionalidade { get; set; }\n\n    [Column(\"PROP_TX_PROFISSAO\")]\n    public string Profissao { get; set; }\n\n    [Column(\"PROP_TX_OBS\")]\n    public string Obs { get; set; }\n\n    public List&lt;EnderecoProprietario&gt; Enderecos { get; set; } \n\n    public List&lt;TelefoneProprietario&gt; Telefones { get; set; }\n\n    //---=== METODOS ===---\n    public void LoadLists()\n    {\n        OlimpiqueDBContext myDbContext = new OlimpiqueDBContext();\n\n        var ends = (from end in myDbContext.EnderecosProprietarios\n                      where end.IDProprietario == this.IDProprietario\n                      select end);\n\n        var tels = (from tel in myDbContext.TelefonesProprietarios\n                      where tel.IDProprietario == this.IDProprietario\n                      select tel);\n\n        this.Enderecos = ends.ToList&lt;EnderecoProprietario&gt;();\n        this.Telefones = tels.ToList&lt;TelefoneProprietario&gt;();\n    }\n}\n}\n</code></pre>\n\n<p>Those 2 attributes wich are Lists, are the ones representing Phones and Addresses...</p>\n\n<p>In the View, I got (so far):</p>\n\n<pre><code>(...)\n    $(document).ready(function () {\n        // here i have used datatables.js (jQuery Data Table)\n        $('#tblTelefones').dataTable({\n            \"sDom\": 'T&lt;\"clear\"&gt;lfrtip',\n            \"oTableTools\": {\n                \"aButtons\": [],\n                \"sRowSelect\": \"single\"\n            },\n            \"bLengthChange\": false,\n            \"bFilter\": false,\n            \"bSort\": false,\n            \"bInfo\": false,\n            \"oLanguage\": {\n                \"sZeroRecords\": \" - - - \",\n                \"sEmptyTable\": \"&lt; nenhum telefone armazenado &gt;\"\n            },\n            \"aoColumns\": [\n                    /*ID*/         { \"bVisible\": false },\n                    /*Número*/     null,\n                    /*Falar com */ null,\n                    /*Obs*/        null,\n                    /*Actions*/    null,\n                    /*DataStatus*/ { \"bVisible\": false, \"sType\": \"html\" }\n            ]\n        });\n        var oTable = $('#tblTelefones').dataTable();\n\n    });\n(...)\n</code></pre>\n\n<p>This is the rendering of the DataTable representation for a table that holds data for the \"TelefoneProprietario\" instances.</p>\n\n<p>Here are some of the JS uses cenarios (like adding and deleting TelefoneProprietario data):</p>\n\n<pre><code>    function AddTel() {\n        if ($('#Telefone').val().trim() == '')\n        {\n            alert('É necessário indicar ao menos o número do telefone a incluir');\n            return;\n        }\n        $('#tblTelefones').dataTable().fnAddData(['', $('#Telefone').val(), $('#FalarCom').val(), $('#ObsTel').val(), '&lt;span onclick=\"DeleteTel(this.parentNode.parentNode);\"&gt;X&lt;/span&gt;', 'I']);\n        $('#Telefone').val(\"\");\n        $('#FalarCom').val(\"\");\n        $('#ObsTel').val(\"\");\n    }\n\n    function DeleteTel(nTr) {\n        var oTT = $('#tblTelefones').dataTable();\n        var sRow = oTT.fnGetData(nTr);\n        if (confirm('Tem certeza que deseja remover o telefone ' + sRow[1] + '?')) {\n            if (sRow[0] == '') {\n                oTT.fnDeleteRow(nTr);\n            } else {\n                oTT.fnUpdate('D', nTr, 5);\n            }\n        }\n    }\n</code></pre>\n\n<p>And here is the rendering of the Table:</p>\n\n<pre><code>        &lt;div style=\"width:75%; margin-left:auto; margin-right:auto;\"&gt;\n            &lt;fieldset style=\"width:100%;\"&gt;\n                &lt;legend&gt;Novo Telefone&lt;/legend&gt;\n                &lt;table style=\"width:100%;\"&gt;\n                    &lt;tr&gt;\n                        &lt;td style=\"width:10%;\"&gt;\n                            &lt;span class=\"editor-label\"&gt;\n                                &lt;label&gt;Telefone:&lt;/label&gt;\n                            &lt;/span&gt;\n                        &lt;/td&gt;\n                        &lt;td style=\"width:23%;\"&gt;\n                            &lt;span class=\"editor-field\"&gt;\n                                @Html.TextBox(\"Telefone\")\n                            &lt;/span&gt;\n                        &lt;/td&gt;\n                        &lt;td style=\"width:10%;\"&gt;\n                            &lt;span class=\"editor-label\"&gt;\n                                &lt;label&gt;Falar com:&lt;/label&gt;\n                            &lt;/span&gt;\n                        &lt;/td&gt;\n                        &lt;td style=\"width:23%;\"&gt;\n                            &lt;span class=\"editor-field\"&gt;\n                                @Html.TextBox(\"FalarCom\")\n                            &lt;/span&gt;\n                        &lt;/td&gt;\n                        &lt;td style=\"width:10%;\"&gt;\n                            &lt;span class=\"editor-label\"&gt;\n                                &lt;label&gt;Obs:&lt;/label&gt;\n                            &lt;/span&gt;\n                        &lt;/td&gt;\n                        &lt;td style=\"width:23%;\"&gt;\n                            &lt;span class=\"editor-field\"&gt;\n                                @Html.TextBox(\"ObsTel\")\n                            &lt;/span&gt;\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td colspan=\"6\" style=\"text-align:center;\"&gt;\n                            &lt;input type=\"button\" value=\"Adicionar telefone\" onclick=\"AddTel()\" /&gt;\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/table&gt;\n            &lt;/fieldset&gt;\n            &lt;table id=\"tblTelefones\" class=\"TabelaDados\" style=\"width:100%\"&gt;\n                &lt;thead&gt;\n                &lt;tr&gt;\n                    &lt;th&gt;ID&lt;/th&gt;\n                    &lt;th&gt;Número&lt;/th&gt;\n                    &lt;th&gt;Falar com &lt;/th&gt;\n                    &lt;th&gt;Obs&lt;/th&gt;\n                    &lt;th&gt;&amp;nbsp;&lt;/th&gt;\n                    &lt;th&gt;DataStatus(N = None / U - Updated / D - Deleted / I = Inserted)&lt;/th&gt;\n                &lt;/tr&gt;\n                &lt;/thead&gt;\n                &lt;tbody&gt;\n                @{\n                    foreach (var tel in Model.Telefones)\n                    {\n                        &lt;tr&gt;\n                            &lt;td&gt;@Html.DisplayFor(t =&gt; tel.IDTelefoneProprietario)&lt;/td&gt;\n                            &lt;td&gt;@Html.DisplayFor(t =&gt; tel.Numero)&lt;/td&gt;\n                            &lt;td&gt;@Html.DisplayFor(t =&gt; tel.FalarCom)&lt;/td&gt;\n                            &lt;td&gt;@Html.DisplayFor(t =&gt; tel.Obs)&lt;/td&gt;\n                            &lt;td&gt;&lt;span onclick=\"DeleteTel(this.parentNode.parentNode);\"&gt;X&lt;/span&gt;&lt;/td&gt;\n                            &lt;td&gt;N&lt;/td&gt;\n                        &lt;/tr&gt;\n                    }\n                }\n                &lt;/tbody&gt;\n            &lt;/table&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>Notice that this is not fully working (just for a plain use) and still it doesn't implements lots of situations...</p>\n\n<p>The way to send back this table to the controller is totally based on the \"http://code.msdn.microsoft.com/Detail-CRUD-Operations-fbe935ef\" example of what the author called \"Master Detail CRUD operations\"... </p>\n"},{"tags":["c#","asp.net-mvc-3","linq","entity-framework","lambda"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13273012,"title":"How to combine two model list to one model","body":"<p>Please see code below :</p>\n\n<pre><code>public class NewsFilterModel\n{\n    public CtArticleDetail ArticleDetail { get; set; }\n\n    public PcPage Page { get; set; }\n}\n\npublic IEnumerable&lt;NewsFilterModel&gt; GetNewsFilterModelByTagNames(string tagNames, int status)\n{\n     var resultArticle = db.CtArticleDetail.Where(m =&gt; m.tagNames == tagNames);\n     var resultPage  = db.PcPage.Where(m =&gt; m.tagNames == tagNames);\n}\n</code></pre>\n\n<p>Can anyone please advice what the best way to combine two model to one model which is NewsFilterModel ?</p>\n\n<p>What I am trying to achieve is:</p>\n\n<p>NewsFilterModelList</p>\n\n<pre><code>1.Article1\n2.Page1\n3.Article2\n4.Page2\n5.Article3\n6.Page3\n</code></pre>\n\n<p>I've ended this like below: </p>\n\n<pre><code>foreach (var item in pageResult)\n            {\n                resultList.Add(new NewsFilterModel { ArticleDetail = null, Page = item, Date = item.UpdatedOn.ToDateTime() });\n            }\n\n            foreach (var item in tempArticleList)\n            {\n                resultList.Add(new NewsFilterModel { ArticleDetail = item, Page = null, Date = item.LiveDate.ToDateTime() });\n            }\n\n            return resultList.AsEnumerable();\n</code></pre>\n\n<p>Anyone has better idea, please advice.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13256419,"title":"User Information on ASP.NET MVC","body":"<p>I'm using ASP.NET MVC and when I have an user logged in using forms authenticaion, I would like to keep some information about this user. The HttpContext User object, implemented from IPrincipal has some properties, but I would like to add some more, so that I could get these on my actions and views. What's the best way to achieve this? </p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","partial-views","child-actions"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13275101,"title":"Handling Errors in MVC Child Actions","body":"<p>My error handling collects (some manually, some automatically) the errors produced during controller execution. Then I have a partial view which renders out the error messages. \nI store the error messages in ViewData (and transfer them to TempData if I respond in a RedirectResult).</p>\n\n<p>The problem is: <strong>if a child action causes an error it will not get displayed</strong>, as they (at least the ones further down the page) are executed AFTER the partial view is rendered.</p>\n\n<p>Right now the only, somewhat desperate idea I have is to render the messages into javascript at the bottom of the layout page, and have that javascript update the error display boxes. But it smells bad, I shouldn't need client-side code for this.</p>\n\n<p>Is there a way to have a partial view \"lazy rendered\", after everything else?</p>\n"},{"tags":["c#","asp.net-mvc-3","dynamic","razor","viewmodel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13272873,"title":"How to create dynamic DropDownList with several complex types? ASP.NET MVC 3","body":"<p>guys. I have these ViewModels:</p>\n\n<pre><code>public class CandidateViewModel\n{\n    public string Name { get; set; }\n    public IList&lt;CourseViewModel&gt; Courses { get; set; }\n    //...\n}\n\npublic class OptionViewModel\n{\n    public int Number { get; set; }\n    public string Description { get; set; }\n    //...\n}\n\npublic class CourseViewModel\n{\n    public string Name { get; set; }\n    public string SelectedCourse { get; set; }\n    public IList&lt;OptionViewModel&gt; Options { get; set; }\n\n    public CourseViewModel(int options)\n    {\n        Options.Add(new OptionViewModel(-1, string.Empty));\n        for (int count = 1; count &lt;= options; ++count)\n            Options.Add(new OptionViewModel(\n                count, string.Format(\"Option {0}\", count)));\n\n        Options.Add(new OptionViewModel(0, \"Don't want it\"));\n    }\n}\n</code></pre>\n\n<p>Well, I want to create a number of DropDownLists equals the number of Courses into CandidateViewModel. Each dropdown should be as options the OptionViewModel list of CourseViewModel instance. I need my final result like this:</p>\n\n<pre><code>&lt;select name=\"Course1\"&gt;\n    &lt;option value=\"-1\"&gt;&lt;/option&gt;\n    &lt;option value=\"1\"&gt;Option 1&lt;/option&gt;\n    &lt;option value=\"2\"&gt;Option 2&lt;/option&gt;\n    &lt;option value=\"3\"&gt;Option 3&lt;/option&gt;\n    &lt;option value=\"0\"&gt;Don't want it&lt;/option&gt;\n&lt;/select&gt;\n\n&lt;select name=\"Course2\"&gt;\n    &lt;option value=\"-1\"&gt;&lt;/option&gt;\n    &lt;option value=\"1\"&gt;Option 1&lt;/option&gt;\n    &lt;option value=\"2\"&gt;Option 2&lt;/option&gt;\n    &lt;option value=\"3\"&gt;Option 3&lt;/option&gt;\n    &lt;option value=\"0\"&gt;Don't want it&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>However, my .cshtml page has CandidateViewModel as Model, and I can't create by \"Html.DropDownListFor\" trhu Razor. Can you help me, please?</p>\n\n<p>Thank you so much, guys!</p>\n"},{"tags":["javascript","jquery","asp.net-mvc-3","mvc","clientside"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13273258,"title":"How to change datasource of dropdown in jquery","body":"<p>I am looking to change to list items available in a dropdownlist via jquery (using razor in MVC3).</p>\n\n<p>I have a DDL that is populated from view data;</p>\n\n<pre><code>@Html.DropDownList(\"allusers\", null, null, new { @class = \"chosenlist\" })\n</code></pre>\n\n<p>There is also another set of viewdata called \"allNewUsers\". I have a button that is clicked that runs a bit of clientside jquery:</p>\n\n<pre><code>   $(function() {\n    $('#remove').click(function () {\n        var id = $(\"#allusers\").val();\n        var hdr = $(\"#Holdersid\").val();\n        $.ajax({\n            url: \"RemoveApprover/\" + id + \"/\" + hdr + \"/3\",\n            data: id,\n            success: function (data) {\n                $('#remove').hide();\n               $..change view data here\n            },\n            error: function (xhr, ajaxOptions, thrownError) {  \n                alert(xhr.responseText);\n            }\n        })\n    })\n    });\n</code></pre>\n\n<p>This code runs a public string back on the server and on success hides the remove button. What I then need to do is change the datasource of the DDL from allusers to allNewusers. can I do this easily in my client side code?</p>\n\n<p>many thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","iframe"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":13252467,"title":"ASP.NET MVC - Iframe Download Dialog not showing up","body":"<p>I need to make a file download that displays a loading icon during the processing of the file (because I don't know how long it is going to take), I decided to use an iframe, the code runs fine, but the <strong>problem is that the file download dialog box doesn't show up</strong>. </p>\n\n<p>I've tested in IE, Firefox and Chrome and it is not working in any of them.</p>\n\n<p>Here's my code:</p>\n\n<p>View:</p>\n\n<pre><code>&lt;table id=\"progress\" style=\"visibility:hidden\"&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            &lt;img src=\"~/Content/Images/ajax-loader.gif\" /&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;h4&gt;please wait.&lt;/h4&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n\n&lt;div class=\"buttons\"&gt;\n    &lt;input type=\"button\" value=\"Ok\" class=\"button\" id=\"downloadButton\"&gt;\n&lt;/div&gt;\n\n&lt;iframe id=\"iframe\" style=\"visibility:hidden\"&gt;&lt;/iframe&gt;\n\n&lt;script&gt;\n    $(document).ready(function () {\n\n        $('#downloadButton').click(function () {\n\n            $('#progress').show();\n            $('input:button').attr(\"disabled\", true);\n\n            $('#iframe').src = \"@Url.Action(\"GenerateFile\", \"Files\", null)\";\n\n            $('#iframe').load(\"GenerateFile\", function () {\n                $('input:button').attr(\"disabled\", false);\n                $('#progress').hide();\n            });\n        });\n\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>Server side Action:</p>\n\n<pre><code>[HttpGet]       \npublic void GenerateFile(Filters viewModel)        \n{        \n    var result = GetCustomers().WithName(viewModel.Name);        \n    StringBuilder file = new StringBuilder();\n\n    foreach (var customer in result)        \n    {        \n        // fill up the string builder with csv format       \n    }        \n\n    System.Web.HttpContext.Current.Response.AddHeader(\"content-disposition\",\"attachment; filename=Customers.csv\");        \n    System.Web.HttpContext.Current.Response.ContentType = \"application/csv\";        \n    System.Web.HttpContext.Current.Response.Write(file);        \n    System.Web.HttpContext.Current.Response.End();        \n}       \n</code></pre>\n\n<p>Any help would be appreciated, thanks!</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13272886,"title":"Hybrid asp.net 4 and MVC application","body":"<p>I am in the process of migrating a asp.net 4 project to MVC 3 - with plans to migrate to MVC4 once everything had been migrated.  I followed this post:</p>\n\n<p><a href=\"http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx\" rel=\"nofollow\">http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx</a></p>\n\n<p>Created an Area, added the Controllers and Views folders, created a controller</p>\n\n<pre><code>public class HomeController : Controller\n{\n  public ActionResult Index()\n  {\n    return View();\n  }\n}\n</code></pre>\n\n<p>Ran the application and checked the standard Aspx pages and then worked fine and then went to the path of the Controller and get the \"Error: Value can not be null. Parameter name: incomingMarkupParser\" error.  So, I then removed the return View(); and replaced it with return Content(\"Hello world\"); and this worked with no problems at all.</p>\n\n<p>So I thought to myself, is there a problem with the area... Created a Controllers and Views folder and tried again - same problem.</p>\n\n<p>System.Web.Razor is version 2.0.0.0\nSystem.Web.WebPages is version 1.0.0.0 (also tried version 2)</p>\n\n<p>Web.Config</p>\n\n<pre><code>  &lt;assemblies&gt;\n    &lt;add assembly=\"System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A\" /&gt;\n    &lt;add assembly=\"System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;add assembly=\"System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089\" /&gt;\n    &lt;add assembly=\"System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" /&gt;\n    &lt;add assembly=\"System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" /&gt;\n    &lt;add assembly=\"System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;add assembly=\"System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" /&gt;\n    &lt;add assembly=\"System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089\" /&gt;\n    &lt;add assembly=\"System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" /&gt;\n    &lt;add assembly=\"System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n  &lt;/assemblies&gt;\n\n  &lt;namespaces&gt;\n    &lt;add namespace=\"System.Web.Helpers\" /&gt;\n    &lt;add namespace=\"System.Web.Mvc\" /&gt;\n    &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n    &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n    &lt;add namespace=\"System.Web.Routing\" /&gt;\n    &lt;add namespace=\"System.Web.WebPages\"/&gt;\n  &lt;/namespaces&gt;\n</code></pre>\n\n<p>I know the problem is to do with Razor but I cannot find what.  Has anyone else experienced this, and if so how did they overcome it?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc-3","knockout.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13272789,"title":"How can I pass back a value on a visible binding in Knockout?","body":"<p>I am trying to do some refactoring on a knockout view model.  Starting with separating some view logic from the model object.</p>\n\n<p>I was wondering if there is a way to pass a value back when using a visible binding? </p>\n\n<p>My current situation I am in a Foreach loop.  I wanted to pass back either the object Knockout is iterating over, to the method that I call on the visible binding:</p>\n\n<pre><code>data-bind=\"visible: SomeMethod\"\n</code></pre>\n\n<p>to </p>\n\n<pre><code>data-bind=\"visible: SomeMethod(object)\"\n</code></pre>\n\n<p>The method is obviously a ko.computed function, and I have tried to pass back the value to it and been unsuccessful.  Its always undefined.</p>\n\n<pre><code>var SomeMethod = ko.computed(function() {\n.....\n}\n</code></pre>\n\n<p>Any ideas if this is even possible?</p>\n"},{"tags":["asp.net-mvc-3","c#-3.0","import-from-excel","oledbdataadapter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13261460,"title":"import 3 digit field with leading zero","body":"<p>ASP.NET, C#, MVC 3, Code First project</p>\n\n<p>I'm trying to import data from an Excel spreadsheet.  I've formated all cells as Text.<br>\nA sample row in the Import worksheet is as follows.</p>\n\n<pre><code>Account             Card               ThreeCode  Route  \n04562954830287127   32849321890233127  183        154839254 \n04562954830287128   32849321890233128  233\n04562954830287129   32849321890233129  082\n04562954830287130   32849321890233130  428\n</code></pre>\n\n<p>When I run in debug and drill down into the ds DataSet the Account and Card columns are imported as strings, the 3-Digit and Route columns are imported as doubles.  The problem arises with the 3 digit number starting with 0 (082) in data row 3.  It gets imported as a System.DBNull and is empty.  I need to be able to import 3 digit codes with leading zeros.  Is there a way to force the import to be all strings or another way to approach this problem?  I searched the web for and haven't found a solution.  This will run from a browser so anything to do with the registry, dll or ini files on the local machine is not an option.  The import code is below.  Thank you in advance for any help.</p>\n\n<pre><code>public ActionResult ExcelToDS(string Path = \"C;\\File.xls\")\n{ \n  string strConn = \"Provider= Microsoft.Jet.OLEDB.4.0;\" + \"Data Source=\" + Path + \"; \" + \"Extended Properties=Excel 8.0;\";\n\n  OleDbConnection conn = new OleDbConnection(strConn);\n  conn.Open(); string strExcel = \"\";\n  OleDbDataAdapter myCommand = null;\n  DataTable dt = new DataTable();\n  strExcel = \"select * from [Import$]\";\n  DataSet ds = null; \n  myCommand = new OleDbDataAdapter(strExcel, strConn);\n  ds = new DataSet(); myCommand.Fill(ds, \"table1\");\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","razor"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":313,"score":2,"question_id":8040482,"title":"Why does Razor not like this?","body":"<p>Ive got a mega annoying problem I have a view with:</p>\n\n<pre><code>@{\n\n        if(ViewBag.Section == \"Home\")\n        {\n           &lt;div id=\"headerfrontPage\"&gt;   \n        }\n        else\n        {\n            &lt;div id=\"header\"&gt;   \n        }\n\n\n     }\n</code></pre>\n\n<p>And I get a compilation error:</p>\n\n<blockquote>\n  <p>The code block is missing a closing \"}\" character.  Make sure you have\n  a matching \"}\" character for all the \"{\" characters within this block,\n  and that none of the \"}\" characters are being interpreted as markup.</p>\n</blockquote>\n\n<p>How do I conditionally write a div? Its for a hack bascially...</p>\n"},{"tags":["razor","asp.net-mvc-3"],"answer_count":4,"favorite_count":20,"up_vote_count":108,"down_vote_count":1,"view_count":15750,"score":107,"question_id":4091831,"title":"How to use ternary operator in razor (specifically on HTML attributes)?","body":"<p>With the WebForms view engine, I'll commonly use the ternary operator for very simple conditionals, especially within HTML attributes. For example:</p>\n\n<pre><code>&lt;a class=\"&lt;%=User.Identity.IsAuthenticated ? \"auth\" : \"anon\" %&gt;\"&gt;My link here&lt;/a&gt;\n</code></pre>\n\n<p>The above code will give the <code>&lt;a&gt;</code> tag a class of <code>auth</code> or <code>anon</code> depending on whether the user is authenticated.</p>\n\n<p>What is the equivalent syntax with the Razor view engine? Because Razor requires HTML tags to \"know\" when to jump in and out of code and markup, I'm currently stuck with the following:</p>\n\n<pre><code>@if(User.Identity.IsAuthenticated)  { &lt;a class=\"auth\"&gt;My link here&lt;/a&gt; }\nelse { &lt;a class=\"anon\"&gt;My link here&lt;/a&gt; }\n</code></pre>\n\n<p>This is, to put it mildly, <em>terrible</em>. </p>\n\n<p>I would love to do something <em>like</em> this, but am struggling to understand how in Razor:</p>\n\n<pre><code>&lt;a class=\"@=User.Identity.IsAuthenticated ? \"auth\" : \"anon\";\"&gt;My link here&lt;/a&gt;\n</code></pre>\n\n<p>--</p>\n\n<p><strong>Update:</strong></p>\n\n<p>In the meantime, I've created this HtmlHelper:</p>\n\n<pre><code>public static MvcHtmlString Conditional(this HtmlHelper html, Boolean condition, String ifTrue, String ifFalse)\n{\n  return MvcHtmlString.Create(condition ? ifTrue : ifFalse);\n}\n</code></pre>\n\n<p>which can be called like this from Razor:</p>\n\n<pre><code>&lt;a class=\"@Html.Conditional(User.Identity.IsAuthenticated, \"auth\", \"anon\")\"&gt;My link here&lt;/a&gt;\n</code></pre>\n\n<p>Still, I am hoping there's a way to use the ternary operator without falling back to wrapping it in an extension method.</p>\n"},{"tags":["asp.net-mvc-3","razor","webgrid","actionlink"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13269623,"title":"MVC 3 Razor pass webgrid row data to controller using actionlink","body":"<p>I have a webgrid with an actionlink which I want to use to edit the selected row in a new view. I know that I can use an actionlink to supply an arguement to my actionresult method but I don't know how to pass the webgrid's row data to my controller apart from using actionlink.</p>\n\n<pre><code>@{\n    ViewBag.Title = \"Index\";\n}\n&lt;h2&gt;\n    Index&lt;/h2&gt;\n&lt;p&gt;\n    @Html.ActionLink(\"Create New User\", \"CreateUser\")\n&lt;/p&gt;\n&lt;div class=\"webgrid-wrapper\"&gt;\n    @model IEnumerable&lt;UserManager.Models.vw_UserManager_Model_Add_Users&gt;\n@{\n    ViewBag.Title = \"Jobs\";\n    WebGrid grid = new WebGrid(Model, canPage: true, canSort: true, rowsPerPage: 15, selectionFieldName: \"selectedRow\", fieldNamePrefix: \"gridItem\");\n\n}\n    @grid.GetHtml(\n    fillEmptyRows: true,\n        tableStyle: \"webgrid\",\n                alternatingRowStyle: \"webgrid-alternating-row\",\n                headerStyle: \"webgrid-header\",\n                footerStyle: \"webgrid-footer\",\n                selectedRowStyle: \"webgrid-selected-row\",\n            rowStyle: \"webgrid-row-style\",\n        mode: WebGridPagerModes.All,\ncolumns: new[] {\n    //grid.Column(\"ApplicationId\"),\n    //grid.Column(\"salutation\"),\n\n    //grid.Column(\"PasswordSalt\"),\n\n     grid.Column(\"FirstName\"),\n\n    //grid.Column(\"LoweredEmail\"),\n    //grid.Column(\"PasswordQuestion\"),\n    //grid.Column(\"PasswordAnswer\"),\n\n    // grid.Column(\"PasswordFormat\"),\n    grid.Column(\"LastName\"),\n    grid.Column(\"Password\"),\n    grid.Column(\"isactive\"),\n    //grid.Column(\"IsLockedOut\"),\n    grid.Column(\"email\"),\n   grid.Column(\"module_name\"), \n\n    //grid.Column(\"LastLoginDate\"),\n    //grid.Column(\"LastPasswordChangedDate\"),\n    //grid.Column(\"LastLockoutDate\"),\n\n    //grid.Column(\"FailedPasswordAttemptCount\"),\n    //grid.Column(\"FailedPasswordAttemptWindowStart\"),\n    //grid.Column(\"FailedPasswordAnswerAttemptCount\"),\n    //grid.Column(\"FailedPasswordAnswerAttemptWindowStart\"),\n   // Rest of grid columns, seen previously\n    @*grid.Column(\n       \"\",\n        header: \"Actions\",\n        format: @&lt;text&gt;\n    @Html.ActionLink(\"Edit\", \"Edit\", new { id = item.email }) \n    &lt;/text&gt;\n    )   , \n     grid.Column(\n       \"\",\n        header: \"Actions\",\n        format: @&lt;text&gt;\n    @Html.ActionLink(\"Delete\", \"Delete\", new { id = item.email })\n    &lt;/text&gt;\n    )    *@\n@*     grid.Column(\n            header:\"\", \n            format:@&lt;text&gt;&lt;div id=\"btnSelectedRow\"&gt;\n                \"@item.GetSelectLink(\"Edit\")&lt;/div&gt;&lt;/text&gt;\n            ),*@\n\n\n     grid.Column(\n            header:\"\", \n            format:@&lt;text&gt;&lt;div id=\"btnSelectedRow\"&gt;\n                \"@Html.ActionLink(\"Edit record\", \n                        \"EditUser\",\n                        \"UserManager\",\n                                       new {selectedRow = grid.SelectedRow },\n                        null\n                        )&lt;/div&gt;&lt;/text&gt;\n            )\n})\n    @if (grid.HasSelection)\n    {\n        var record = grid.SelectedRow;\n@*@RenderPage(\"~/Views/UserManager/EditUser.cshtml\", new { record = grid.SelectedRow })*@\n\n    }\n&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        function jQueryUIStyling() {\n            $('input:button, input:submit').button();\n\n            // Style tables.\n            $('.webgrid-wrapper').addClass('ui-grid ui-widget ui-widget-content ui-corner-all');\n            $('.webgrid-title').addClass('ui-grid-header ui-widget-header ui-corner-top');\n            jQueryTableStyling();\n        }\n\n        //\n        // Style tables using jQuery UI theme. This function is \n        // split out separately so that it can be part of the AJAX\n        // callback of the WebGrid WebHelper in ASP.NET MVC.\n        //\n        function jQueryTableStyling() {\n            $('.webgrid').addClass('ui-grid-content ui-widget-content');\n            $('.webgrid-header').addClass('ui-state-default');\n            $('.webgrid-footer').addClass('ui-grid-footer ui-widget-header ui-corner-bottom ui-helper-clearfix');\n        }\n    });\n\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>My controller</strong></p>\n\n<pre><code> public ActionResult EditUser(System.Web.Helpers.WebGrid record)\n        {\n            record.ToString();\n\n            return View();\n        }\n</code></pre>\n\n<p><strong>Summary</strong></p>\n\n<p>How to pass row data using ActionLink from one view to another via ActionResult method.</p>\n"},{"tags":["c#","asp.net-mvc-3","projects-and-solutions"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":44,"score":-1,"question_id":13271403,"title":"How to access other projects in one solution","body":"<p>I have one empty solution Store with 3 projects Store.Domain, Store.UnitTests, Store.WebUI</p>\n\n<p>In domain I have my Data Model and I like to access through Store.WebUI. I try using Store.Domain however I got an error type or namespace could not be found are you missing using directive or an assembly reference?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","entity-framework","objectcontext"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13260422,"title":"ObjectContext Error in Dev but Not when Published","body":"<p>Given the classes below, firing up the website in Visual Studio gives me the following error when <code>home/index</code> is called (this is actually the inner exception).</p>\n\n<p><code>A transport-level error has occurred when receiving results from the server. (provider: Shared Memory Provider, error: 0 - The handle is invalid.)</code></p>\n\n<pre><code>at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)\nat System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)\nat System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()\nat System.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)\nat System.Data.SqlClient.TdsParserStateObject.ReadSni(DbAsyncResult asyncResult, TdsParserStateObject stateObj)\nat System.Data.SqlClient.TdsParserStateObject.ReadNetworkPacket()\nat System.Data.SqlClient.TdsParserStateObject.ReadBuffer()\nat System.Data.SqlClient.TdsParserStateObject.ReadByte()\nat System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)\nat System.Data.SqlClient.SqlDataReader.ConsumeMetaData()\nat System.Data.SqlClient.SqlDataReader.get_MetaData()\nat System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)\nat System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)\nat System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)\nat System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\nat System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)\nat System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\nat System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior)\nat System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior)\n</code></pre>\n\n<p>However if I publish the exact same code locally and hit the site using WebMatrix, it works fine.</p>\n\n<p>I'm using SQL Server 2008 Express too if that makes a difference. Please advise if any more information is needed.</p>\n\n<p>Controller</p>\n\n<pre><code>public class HomeController : BaseController\n{\n    public ActionResult Index()\n    {\n        var candidates = BusinessObj.AllOf&lt;Candidate&gt;().ToList();\n        return View(candidates);\n    }\n}\n</code></pre>\n\n<p>BaseController</p>\n\n<pre><code>public class BaseController : Controller\n{\n    protected ITestBusinessObject BusinessObj { get; set; }\n\n    public BaseController()\n    {\n        BusinessObj = new Business.TestBusinessObj();\n    }\n}\n</code></pre>\n\n<p>TestBusinessObj (Entities is an EF edmx class)</p>\n\n<pre><code>public class TestBusiness : ITestBusinessObject\n{\n    private Entities DB = new Entities();\n    private string ContainerName = \"Entities\";\n\n    public IEnumerable&lt;T&gt; AllOf&lt;T&gt;() where T : class, new()\n    {\n        return DB.CreateObjectSet&lt;T&gt;(ContainerName.GetEntitySetName&lt;T&gt;());\n    }\n\n    private static string GetEntitySetName&lt;T&gt;(this string containerName) where T : new()\n    {\n        var name = new T().GetType().Name;\n        if (name.EndsWith(\"y\"))\n        {\n            name = name.Substring(0, name.Length - 1) + \"ies\";\n        }\n        else\n        {\n            name = name + \"s\";\n        }\n        return string.Format(\"{0}.{1}\", containerName, name);\n    }\n}\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","asp.net-membership","asp.net-mvc-4"],"answer_count":2,"favorite_count":5,"up_vote_count":7,"down_vote_count":0,"view_count":1276,"score":7,"question_id":12236533,"title":"Migrating from ASP.NET Membership to SimpleMembership in MVC4 RTM","body":"<p>The new MVC4 RTM internet application templates use the SimpleMembership providers as descibed here <a href=\"http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx/\">SimpleMembership</a></p>\n\n<p>My existing MVC website uses the ASP.Membership framework and ideally I would like to migrate the user data in these tables to the new SimpleMembership tables.  My reasons for wanting to do this are: </p>\n\n<ol>\n<li>Cleaner integration with the rest of the my database which uses EF</li>\n<li>Support for Azure and OAuth out of the box</li>\n<li>Use latest MVC4 RTM Controllers/Views without needing to modify</li>\n<li>I've always felt the existing membership implementation was a little bloated for what I needed</li>\n</ol>\n\n<p>So I wrote a SQL script today to migrate the data in the existing ASP.Net Membership tables into the new Simple Membership tables.  This can be found <a href=\"http://gist.github.com/3585239\">here</a></p>\n\n<p>Testing the login in my MVC 4 website the password verification is failing.  I believe the SimpleMembership uses a different password algo than the old Membership framework as new passwords created under the SimpleMemberShip framework look a lot longer.</p>\n\n<p>So my question is since I was using the \"hashed\" password format in the old ASP.Net membership providers and the users original password is irretrievable, what options do I have to get the SimpleMembership provider working.</p>\n\n<p>I guessing some options are:</p>\n\n<ol>\n<li>Get my users to reset their passwords</li>\n<li>Getting the SimpleMembership provider to use the same password algo as the old ASP.Net Membership providers.</li>\n<li>Revert the new MVC 4 RTM internet application templates to use the old ASP.Net MemberShip providers.  This is the least desirable options for me as I would like to use the SimpleMemberShip framework.</li>\n</ol>\n\n<p>I would suspect many people are also looking to migrate their existing membership databases to the new SimpleMemberShip provider.</p>\n\n<p>Any help greatly appreciated.</p>\n\n<p>Cheers</p>\n\n<p>Jim </p>\n"},{"tags":["android","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13270746,"title":"How to upload audio file from android to server through .net webservice?","body":"<p>We have a web application made in MVC3 which is hosted in Android &amp; Iphone also .Now the android developer is trying to upload an audio file through our method which is written in controller as http post method . They say they are sending the file in form of multipart chunks or byte buffer body . So I took variable of type byte array[] in my method but the type is not coinciding with their datatype .  I even tried to keep string , byte , httppostedfilebase types , but still no success . Any help would be appreciated .</p>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13270097,"title":"Operation could destabilize runtime, works local, not on server","body":"<p>Here is my Action:</p>\n\n<pre><code>Imports PagedList\n\n&lt;EmployeeAuthorize()&gt;\nFunction SearchFoods(Optional ByVal date1 As String = \"\", Optional ByVal keyword As String = \"\", Optional page As Integer = 1) As ActionResult\n\n    If String.IsNullOrEmpty(date1) Then\n        date1 = Date.Now\n    End If\n\n    If String.IsNullOrEmpty(keyword) Then\n        keyword = Nothing\n    End If\n\n    Dim food = db.Tbl_Foods.Where(Function(x) x.Shrt_Desc.Contains(keyword)).OrderBy(Function(x) x.Food_ID).ToList\n\n    For Each item In food\n        item.Shrt_Desc = item.Shrt_Desc.Replace(\",\", \", \")\n    Next\n\n    ViewBag.MyDate = date1\n    ViewBag.MyKeyword = keyword\n\n    ' set the page size and number\n    Dim pageSize = 20\n    Dim pageNumber = page\n\n    TempData(\"CurrentPage\") = \"My Wellness\"\n    TempData(\"CurrentWellnessPage\") = \"Food Log\"\n    Return View(\"\", \"_FinalWellnessSubPageLayout\", food.ToPagedList(pageNumber, pageSize))\n\nEnd Function\n</code></pre>\n\n<p>I believe this is caused, somehow, by the \"ToPagedList\" since this is the first time I am using it.  It works fine on local, but not when I publish to the server.  The stack trace looks like this:</p>\n\n<blockquote>\n  <p>[VerificationException: Operation could destabilize the runtime.]<br>\n  PagedList.PagedList<code>1..ctor(IEnumerable</code>1 superset, Int32 pageNumber,\n  Int32 pageSize) +0<br>\n  PagedList.PagedListExtensions.ToPagedList(IEnumerable`1 superset,\n  Int32 pageNumber, Int32 pageSize) +62</p>\n</blockquote>\n\n<p>It also says:</p>\n\n<blockquote>\n  <p>An unhandled exception was generated during the execution of the\n  current web request. Information regarding the origin and location of\n  the exception can be identified using the exception stack trace below.</p>\n</blockquote>\n\n<p>What is the exception?  How can I find what exception \"occurred during the execution?\"</p>\n\n<p>Does anyone know how to fix this error on the server?  Thank you.</p>\n"},{"tags":["javascript","jquery","asp.net-mvc-3","telerik","telerik-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13268291,"title":"Expand/Collapse DetailView in Telerik MVC Grid","body":"<p>I´m trying to force javascript to collapse all other rows when expanding one of them, I just want to keep one row expanded at a time.  I´m fairly new to javascript so I hope anyone can point me in the right direction.</p>\n\n<p>I looked over this example I found but for some reason my code doesn´t collapse the rows:\n<a href=\"http://www.telerik.com/community/forums/aspnet-mvc/grid/expand-collapse-all-detailviews-in-a-grid.aspx\" rel=\"nofollow\">Expand/Collapse all DetailViews in a grid</a></p>\n\n<p>Shouldn´t I collapse the index like I´m doing in the javascript?</p>\n\n<p><strong>My Telerik Grid in MVC Razor View:</strong></p>\n\n<pre><code>&lt;div&gt;\n@(Html.Telerik().Grid&lt;RentableUnit&gt;()\n           .Name(\"RentableUnits\")\n           .Columns(columns =&gt;\n                        {\n                            columns.Bound(e =&gt; e.UnitID).Hidden();\n                            columns.Bound(e =&gt; e.Name).Width(800);\n                            columns.Bound(e =&gt; e.IsExpanded).Hidden();\n                        })\n           .ClientEvents(events =&gt; events.OnRowDataBound(\"employees_onRowDataBound\")\n                                       .OnDetailViewExpand(\"unit_onDetailViewExpand\")\n                                       .OnDetailViewCollapse(\"unit_onDetailViewCollapse\")\n                                       .OnDetailViewExpand(\"toggleDetail\")\n                                       )\n           .DetailView(details =&gt; details.ClientTemplate(\n               //stuff in template\n           )\n    .DataBinding(dataBinding =&gt; dataBinding.Ajax().Select(\"RentableUnits\", \"Home\"))\n    .Sortable()\n)\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>My Javascript:</strong></p>\n\n<pre><code>    function toggleDetail(e) {\n        var grid = $(this).data('tGrid');\n        grid.$rows().each(function (index) {\n            //TODO: exclude the expanded row\n            grid.collapseRow(index); //doesn´t collapse!\n    });\n}\n</code></pre>\n"}]}
{"total":29155,"page":2,"pagesize":100,"questions":[{"tags":["c#","asp.net-mvc-3","viewmodel","asp.net-mvc-viewmodel"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13252720,"title":"MVC 3 viewmodel properties","body":"<p>I have a question regarding organization of properties in viewModel. As far as I understand the viewmodel should be as simple as possible, and the main thing that it should do is bind data to view.</p>\n\n<p>The question is how to distinguish properties in viewmodel from BL model.\nI mean for example I have a BL model like : </p>\n\n<pre><code>   public class UserDetailsModel\n    { \n        public string UserName {get;set;}\n        public string SomeInfo{get;set;}\n        public string AnotherInfo{get;set;}\n        public string Anything{get;set;}\n        public string Something {get;set;}\n        ...\n\n     }\n</code></pre>\n\n<p>then I have another BL model say:</p>\n\n<pre><code> public class UserInfoModel\n        { \n            public string Info1{get;set;}\n            public string Info2{get;set;}\n            public string Info3{get;set;}\n            public string Info4{get;set;}\n            public string Info5 {get;set;}\n            ...\n\n         }\n</code></pre>\n\n<p>Now the question is what is the best practices to Create ViewModel that should have data of both BL models. </p>\n\n<p>1) Duplicate the properties from 2 models , and use Default Model binding to transfer data from view to controller , then create BL models from ViewModels and via repository update data ? In this case we have code duplication ... </p>\n\n<p>2) ViewModel should look something like: </p>\n\n<pre><code> public class UsersIdentificationViewModel \n        {\n            public UsersIdentificationViewModel()\n            {\n                UserInfoModel = new UserInfoModel();\n            }\n\n            public UserInfoModel UsersInfo { get; set; }\n\n            public UserDetailsModel UserDetails { get; set; }   \n\n        }\n</code></pre>\n\n<p>The default binding will not work in this case (Correct me if I am mistaking) and I should write custom Model binder or something like this... What approach is better for unit testing , or maybe there is another approach ?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":11,"score":-1,"question_id":13269390,"title":"Post Form data to Cross Domain using Ajax.BeginForm in MVC app","body":"<p>anyone suggest if any possiblity to post form data to cross domain [from ex.syncfusion.com to google.com] without page refresh.</p>\n\n<p>if possible means please give solution.</p>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework","stored-procedures"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":161,"score":4,"question_id":12707682,"title":"How to map a stored procedure using DBContext in ASP.NET MVC 3 Entity Framework","body":"<p>I do mapping here for tables.. How to map stored procedures here?</p>\n\n<pre><code>public class AppDBContext : DbContext\n{\n    public DbSet&lt;UserAccount&gt; UserAccount { get; set; }\n    public DbSet&lt;GetUserAccounts&gt; GetGetUserAccounts { get; set; }\n\n    protected override void OnModelCreating(DbModelBuilder modelBuilder)\n    {\n        modelBuilder.Entity&lt;UserAccount&gt;().ToTable(\"UserAccount\");\n        modelBuilder.Entity&lt;Customer&gt;().ToTable(\"Customer\");\n\n        base.OnModelCreating(modelBuilder);\n    }\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","razor"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13267914,"title":"mvc3 Razor foreach loop issues","body":"<p>Hi I have the following code but the if statement within the loop causes the statement to fail, any ideas please?</p>\n\n<pre><code>@{ var count = 1; }\n@foreach (var siteIcon in Model.SiteIconsList)\n{\n    &lt;div class=\"span2\"&gt;\n        &lt;a onclick=\"updateIcon(@siteIcon.ImageId)\" href='#'&gt;\n            &lt;img class=\"iconImage\" src=\"data:Image;base64,@(Html.Raw(Convert.ToBase64String(siteIcon.ImageData)))\" alt=\"\" /&gt;\n        &lt;/a&gt;\n    &lt;/div&gt;\n    if(count==5){\n        &lt;/div&gt;\n         &lt;div class=\"row-fluid\"&gt;\n         count=1;\n    }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","telerik","telerik-grid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13198317,"title":"Template column inside DetailView in Telerik Grid MVC","body":"<p>My nested template column is not appearing in my markup when page loads.  I´m trying to load a grid with a template column within a DetailView of another parent-grid.  I can see my data being passed and clearly the \"Name\" of the UnitPeriod appears but nothing within my template column, so it seems as the data is being passed into the grid.  I´ve checked the source with firebug and that column always loads empty.  Can any1 spot why?</p>\n\n<pre><code>&lt;div&gt;\n@(Html.Telerik().Grid&lt;RentableUnit&gt;()\n    .Name(\"RentableUnits\")\n    .Columns(columns =&gt;\n    {\n        columns.Bound(e =&gt; e.UnitID).Hidden();\n        columns.Bound(e =&gt; e.Name).Width(75);\n    })\n    .ClientEvents(events =&gt; events.OnRowDataBound(\"employees_onRowDataBound\")\n                            .OnDetailViewExpand(\"unit_onDetailViewExpand\")\n                            .OnDetailViewCollapse(\"unit_onDetailViewCollapse\"))\n    .DetailView(details =&gt; details.ClientTemplate(\n        Html.Telerik().Grid&lt;UnitPeriod&gt;()\n            .Name(\"UnitPeriod_&lt;#= UnitID #&gt;\")\n            .Columns(columns =&gt;\n                {\n                    columns.Bound(o =&gt; o.Name);\n                    columns.Template(@&lt;text&gt;\n                     @foreach (Day day in item.Days)\n                     {\n                         if (!day.IsRentable)\n                         {\n                             &lt;img src=\"../../Content/Images/Houses/icon_lokad.png\"/&gt;\n                         }\n                         else\n                         {\n                             &lt;img src=\"../../Content/Images/Houses/icon_opid.png\"/&gt;\n                         }\n                     }\n             &lt;/text&gt;);\n            })\n            .ClientEvents(events =&gt; events.OnRowDataBound(\"orders_onRowDataBound\"))\n            .DataBinding(dataBinding =&gt; dataBinding.Ajax()\n            .Select(\"SelectedUnitPeriod\", \"Home\", new { unitId = \"&lt;#= UnitID #&gt;\" }))\n            .ToHtmlString()\n    ))\n    .DataBinding(dataBinding =&gt; dataBinding.Ajax().Select(\"RentableUnits\", \"Home\"))\n    .Sortable()\n    )\n&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    var derpinski = \"\";\n    function expandFirstRow(grid, row) {\n        if (grid.$rows().index(row) == 0) {\n            grid.expandRow(row);\n        }\n    }\n\nfunction loadTabGridContent(e) {\n    var url = '/Home/TabGridContent/';\n    $.ajax({\n        type: 'GET',\n        dataType: 'html',\n        url: url,\n        success: function (data) {\n            alert('success');\n            $('#TabGridContent').html(data);\n        }\n    });\n}\n\nfunction employees_onRowDataBound(e) {\n    var grid = $(this).data('tGrid');\n    expandFirstRow(grid, e.row);\n}\n\nfunction orders_onRowDataBound(e) {\n    var grid = $(this).data('tGrid');\n    expandFirstRow(grid, e.row);\n}\n\nfunction unit_onDetailViewExpand(e) {\n    var mstRow = e.masterRow;\n    var unitNumber = mstRow.cells[1].innerHTML;\n    derpinski = derpinski + unitNumber + \",\";\n}\n\nfunction unit_onDetailViewCollapse(e) {\n    var mstRow = e.masterRow;\n    var unitNumber = mstRow.cells[1].innerHTML;\n    derpinski = derpinski.replace(unitNumber + \",\", \"\");\n}\n</code></pre>\n\n<p> </p>\n"},{"tags":["c#","asp.net-mvc-3","unit-testing","moq","mspec"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":791,"score":3,"question_id":7596426,"title":"How to test HTTP status code set by an ASP.NET MVC action with MSpec","body":"<p>I have the following controller:</p>\n\n<pre><code>public sealed class SomeController : Controller\n{\n    public ActionResult PageNotFound()\n    {\n        Response.StatusCode = 404;\n\n        return View(\"404\");\n    }\n}\n</code></pre>\n\n<p>I have created an MSpec specification:</p>\n\n<pre><code>[Subject(typeof (SomeController))]\npublic class when_invalid_page_is_requested : SomeControllerSpec\n{\n    Because of = () =&gt; result = Controller.PageNotFound();\n\n    It should_set_status_code_to_404 = \n        () =&gt; Controller.Response.StatusCode.ShouldEqual(404);\n}\n\npublic abstract class SomeControllerSpec\n{\n    protected static HomeController Controller;\n\n    Establish context = () =&gt; { Controller = new SomeController(); };\n}\n</code></pre>\n\n<p>But because of how I instantiate the controller, HttpContext is null.\nWhat would be the best way to test status code set by the <code>PageNotFound</code> action?</p>\n\n<p><strong>EDIT: Posted an answer below</strong></p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13266760,"title":"How can we use itextsharp in mvc3?","body":"<p>Hello everyone I'm a beginner in MVC3 so I'm trying to use pdf reporting with itextsharp but I'm confused to how to use it. Could you suggest me to how use itext sharp in MVC3 tutorial or example?</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13265719,"title":"Working with dateConversion","body":"<p>I'm working on creating my own datetimepicker. I want to show the date as by the dateformat. The dateformat includes \"MM-dd-yyyy\" and other formats.</p>\n\n<p>I wrote the code as below:</p>\n\n<pre><code>public DateTime getCurrentDate(string dateFormat)\n{            \n     curDate = DateTime.Now;            \n     IFormatProvider theCultureInfo = new System.Globalization.CultureInfo(\"en-us\", true);\n     return DateTime.ParseExact(curDate.ToShortDateString(), dateformat, theCultureInfo); \n}\n</code></pre>\n\n<p>When I execute the program it shows:\nString was not recognized as a valid DateTime.</p>\n\n<p>Provide me some solution to handle with error.</p>\n"},{"tags":["jquery","asp.net","html","css","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13266727,"title":"upload and apply the templates in an asp.net mvc 3 application","body":"<p>Does anyone know how can i upload and apply the tumblr template on my site.I have an asp.net mvc 3 application now it needs to have a feature for uploading and applying the templates(tumblr templates or custom made templates) on it.</p>\n\n<p>The basic idea is same as how the users can customize their existing tumblr profile using the templates which can be both custom templates or templates provided by tumblr itself.</p>\n\n<p>The user should also be able to view the preview for the selected template on the site before applying the template to the site.</p>\n\n<p>What is the approach that needs to be followed to acheive the same?\nI just need an idea how the things can be done in an asp.net mvc3 platform using C#. </p>\n\n<p>Thanks,\nS.</p>\n"},{"tags":["asp.net-mvc-3","asp.net-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13257520,"title":"Post Form data to different Domain in MVC application","body":"<p>I have tried to post Form data from my mvc site to Other domain without page refresh[<code>Ajax.post</code>]. But the form data not saved in other domain.While I am posting same data to normal form post:`This data saved into Marketo site.\nCan you suggest if there is any possible way to post the form data to cross domain without page refresh? </p>\n\n\n\nFirst Name:\n\nEmail Address:\n\nSubscription\n\n\n   \n\n  \n\n   \n\n   \n\n\n\n      \n\n  \n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":441,"score":0,"question_id":6862769,"title":"MVC3 Master Page RenderSection on HEAD","body":"<p>I have the following code in my master page (_Layout.cshtml):</p>\n\n<pre><code>//Html tag and config\n&lt;head&gt;\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /&gt;\n    &lt;meta http-equiv=\"content-language\" content=\"es\" /&gt;\n    &lt;meta http-equiv=\"Pragma\" content=\"no-cache\" /&gt;\n\n    @RenderSection(\"FacebookMetaTag\", false)\n&lt;/head&gt;\n</code></pre>\n\n<p>Then, in my Home/Index.cshtml I have:</p>\n\n<pre><code>@model Domain.Entities.Product\n\n\n@section FacebookMetaTag {\n        &lt;meta property=\"og:title\" content=\"@Model.Name\"/&gt;\n        &lt;meta property=\"og:type\" content=\"Mycompany\"/&gt;\n        &lt;meta property=\"og:url\" content=\"@Model.Url\"/&gt;\n        &lt;meta property=\"og:image\" content=\"@Model.Image\"/&gt;\n        &lt;meta property=\"og:site_name\" content=\"Mysite\"/&gt;\n        &lt;meta property=\"fb:admins\" content=\"USER_ID\"/&gt;\n        &lt;meta property=\"og:description\"\n              content=\"Model.Description\"/&gt;\n}\n\n....//Some other stuff....\n</code></pre>\n\n<p>When I run my application the FacebookMetaTag section is not in my master page.\nWhy? what can I do?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["c#",".net","asp.net-mvc-3","svn","ssl"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1031,"score":5,"question_id":8121189,"title":"Ignoring invalid SSL certificate","body":"<p>I`m trying to print out log messages from our sub version. But I'm struggling with bypassing the invalid SSL certificate. This is the error:</p>\n\n<blockquote>\n  <p>OPTIONS of\n  'https://xxxxx/svn/SiteFabrics/trunk/AppLaunch/Bloc/Frontend': Server\n  certificate verification failed: certificate issued for a different\n  hostname, issuer is not trusted (https://xxxx)</p>\n</blockquote>\n\n<p>My attempt of ignoring the certificate error was to add this line:</p>\n\n<pre><code>ServicePointManager.ServerCertificateValidationCallback += (sender, cert, chain, sslPolicyErrors) =&gt; true;\n</code></pre>\n\n<p>However that didn't make any difference as the .net error is still the same. Below is the code, can anyone see what I am doing wrong?</p>\n\n<pre><code>        using (SvnClient client = new SvnClient())\n        {\n            Collection&lt;SvnLogEventArgs&gt; list;\n            client.Authentication.DefaultCredentials = new NetworkCredential(\"user\", \"pass\");\n\n            ServicePointManager.ServerCertificateValidationCallback += (sender, cert, chain, sslPolicyErrors) =&gt; true;\n\n            SvnLogArgs la = new SvnLogArgs(); //{ Start=128; End=132; };\n            client.LoadConfiguration(Path.Combine(Path.GetTempPath(), \"Svn\"), true);\n            client.GetLog(new Uri(\"https://[svnurl]\"), la, out list);\n            ViewBag.SVNLog = list;\n        }\n</code></pre>\n\n<p>FOUND THE SOLUTION TO THIS PROBLEM:</p>\n\n<p>First add this:</p>\n\n<pre><code>        static void SVN_SSL_Override(object sender, SharpSvn.Security.SvnSslServerTrustEventArgs e)\n    {\n        e.AcceptedFailures = e.Failures;\n        e.Save = true;\n    }\n</code></pre>\n\n<p>and then replace my original magic line:</p>\n\n<pre><code>            ServicePointManager.ServerCertificateValidationCallback += (sender, cert, chain, sslPolicyErrors) =&gt; true;\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>client.Authentication.SslServerTrustHandlers += new EventHandler&lt;SharpSvn.Security.SvnSslServerTrustEventArgs&gt;(SVN_SSL_Override);\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","stream"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13265392,"title":"The downloaded file as stream in controller (ASP.NET MVC 3) will automatically disposed?","body":"<p>Let's assume the controller which download selected file:</p>\n\n<pre><code> public FileResult Download( string f ) {\n\n         Stream file = MyModel.DownloadFiles( f );\n\n         return File( file, \"application/octet-stream\", (file as FileStream).Name );\n }\n</code></pre>\n\n<p>and <strong>MyModel</strong> contains</p>\n\n<pre><code>public static Stream DownloadFiles(string file){\n\n   return new FileStream(file, FileMode.Open, FileAccess.Read);\n}\n</code></pre>\n\n<p>If I use <code>using</code> keyword in controller then the exception will be thrown: <strong><code>Cannot access closed file</code></strong>.</p>\n\n<p>Well, I want to be sure that downloaded file will be disposed (I don't know if is possible, how to do that) or not ?</p>\n\n<p>Thanks</p>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-ui","infragistics","ignite-ui"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":261,"score":1,"question_id":11400735,"title":"Adding a selection column to an Infragistics Jquery IGGrid","body":"<p>I would like to add a column to my iggrid which is used to display current users from my sqlserver db. As is typically done the row would appear as [ 'username' 'email' 'select' ]\nusinf the select to link to another mvc3 view which displays the users details. I could very easily do this using a table, however, my senior will only allow me to use the Infragistics Jquery IGGrid. And despite my research I'm at a loss. Any help would be greatly appreciated. My current code is the following:</p>\n\n<pre><code>@(Html.Infragistics().Loader()\n        .ScriptPath(Url.Content(\"../../Scripts/Infragistics/js/\"))\n        .CssPath(Url.Content(\"../../Content/Infragistics/css/\"))\n        .Theme(\"infragistics\")\n        .Render()\n    )\n\n    @(Html.Infragistics().Grid(Model.users)\n        //.DataSourceUrl(\"MCMonthlyAcctTotal\")\n        .ID(\"grid\").Width(\"auto\").Height(\"500px\")\n        .LoadOnDemand(false)\n        .AutoGenerateColumns(false)\n        .Columns(column =&gt;\n        {\n            column.For(x =&gt; x.FirstName).HeaderText(\"First Name\");\n            column.For(x =&gt; x.LastName).HeaderText(\"Last Name\");\n            column.For(x =&gt; x.Email).HeaderText(\"Email\");\n            column.For(x =&gt; x.Injected).HeaderText(\"Date Created\");\n            column.For(x =&gt; x.UserName).HeaderText(\"Username\");\n            column.For(x =&gt; x.Modified).HeaderText(\"Last Date Modified\");\n        })\n\n        .Features(features =&gt;\n        {\n            features.Paging().Type(OpType.Local).VisiblePageCount(5).ShowPageSizeDropDown(true).PageSize(10).PrevPageLabelText(\"Previous\").NextPageLabelText(\"Next\");\n            features.Sorting().Mode(SortingMode.Single).ColumnSettings(settings =&gt;\n            {\n                settings.ColumnSetting().ColumnKey(\"CustomerID\").AllowSorting(true);\n            });\n            features.Selection().MouseDragSelect(true).MultipleSelection(false).Mode(SelectionMode.Row);\n        })\n         .Width(\"auto\")\n         .DataBind()\n         .Render()\n    )\n</code></pre>\n\n<p>I hope someone will be able to give me a hand.</p>\n\n<p>Thanks!!</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","partial-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13264645,"title":"MVC3 Display the edit view on the same page as the list of items","body":"<p>I have a list of transactions. When I click one of them, I'd like to be able to display the edit form (populated with the selected item's data) to the right of the list. Any ideas?</p>\n\n<p>Below is the partial view that displays the list of transactions.</p>\n\n<pre><code>@model IEnumerable&lt;BudgetPlus.Models.Transaction&gt;\n@{\n    ViewBag.Title = \"Index\";\n}\n&lt;p&gt;\n    @Html.ActionLink(\"Create New\", \"Create\", null, new { @class = \"button-link\" })\n&lt;/p&gt;\n&lt;table&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th class=\"column-Date\"&gt;Date&lt;/th&gt;\n            &lt;th class=\"column-Description\"&gt;Description&lt;/th&gt;\n            &lt;th class=\"column-Category\"&gt;Category&lt;/th&gt;\n            &lt;th class=\"column-Amount\"&gt;Amount&lt;/th&gt;\n            &lt;th class=\"action-button\"&gt;&lt;/th&gt;\n            &lt;th class=\"action-button\"&gt;&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        @foreach (var item in Model)\n        {\n            &lt;tr&gt;\n                &lt;td&gt;\n                    @Html.DisplayFor(modelItem =&gt; item.Date)\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.DisplayFor(modelItem =&gt; item.Description)\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.DisplayFor(modelItem =&gt; item.Category.DisplayName)\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.DisplayFor(modelItem =&gt; item.Amount)\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.ActionLink(\"Edit\", \"Edit\", new { id = item.Id })\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.ActionLink(\"Delete\", \"Delete\", new { id = item.Id })\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        }\n    &lt;/tbody&gt;\n&lt;/table&gt;\n&lt;div&gt;\n    @Html.EditorForModel(\"Edit\")\n&lt;/div&gt;\n</code></pre>\n\n<p>And this is what the edit method in my TransactionController looks like.</p>\n\n<pre><code>    public ActionResult Edit(int id)\n    {\n        Transaction transaction = db.Transactions.Find(id);\n        ViewBag.CategoryId = new SelectList(db.Categories, \"Id\", \"DisplayName\", transaction.CategoryId);\n        return View(transaction);\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","razor","jquery-tokeninput"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":188,"score":0,"question_id":11393515,"title":"How to prepopulate tokenput with values found in database","body":"<p>I am using the tokeninput control found here at <a href=\"http://loopj.com/jquery-tokeninput/\" rel=\"nofollow\">http://loopj.com/jquery-tokeninput/</a> - its quite popular I believe.</p>\n\n<p>I have the following code that fills the input box nicely with author names - but I want to prepopulate the control with values found in the database when the user is in an EDIT session i.e. to find authors that have been found for that record already (looks something like this):</p>\n\n<p><img src=\"http://i.stack.imgur.com/c5s7c.png\" alt=\"enter image description here\"> </p>\n\n<p>Here's the code:</p>\n\n<pre><code> $(\"#authorlist\").tokenInput('/author/getauthors/', {\n        hintText: \"Enter surname\",\n        searchingText: \"Searching...\",\n        preventDuplicates: true,\n        allowCustomEntry: true,\n        highlightDuplicates: false,\n        tokenDelimiter: \"*\",\n        theme: \"facebook\"\n//        prePopulate: [{\"id\": 5016, \"name\": \"Test 1\" }]\n    });\n</code></pre>\n\n<p>Obviously this already gets a full list of authors (/author/getauthors/) - but it needs to prepopulate from that list too, with authors already found that record - and thats the bit I can't seem to figure out.  </p>\n\n<p>I can see that that you can use prePopulate in the javascript (I've commented it out) and I have the found author values in my Edit.cshtml i.e.</p>\n\n<pre><code>@foreach(var item in Model.AUTHORs.Select(model =&gt; new { model} ))\n        {\n            &lt;div type=\"hidden\" id=\"authorHidden\" &gt; @item.model.FULL_NAME&lt;/div&gt;\n        }\n</code></pre>\n\n<p>So it's just a case of putting those values in some kind of json format and getting the tokeninput control to populate them ready for when the form is loaded and shown to the user.</p>\n\n<p>Other code for displaying the tokeninput control in Edit.cshtml is:</p>\n\n<pre><code>&lt;div class=\"editor-label\"&gt;Authors&lt;/div&gt;\n     &lt;div class=\"authors\"&gt;\n         &lt;div class=\"editor-field\"&gt;\n             &lt;input type=\"text\" id=\"authorlist\" name=\"tiAuthors\" /&gt;\n         &lt;/div&gt;\n     &lt;/div&gt;\n</code></pre>\n\n<p>Any help or pointers are much appreciated.</p>\n"},{"tags":["c#","asp.net-mvc-3","dapper"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13254846,"title":"A parameterless default constructor is required to allow for dapper materialization error when reading object with list of child objects","body":"<p>I have this:</p>\n\n<pre><code>public class object_a\n{\n    public int ta_Id { get; set; }\n    public string ta_Label { get; set; }\n    public IEnumerable&lt;table_c&gt; SomeName { get; set; }\n}\n\npublic class table_b\n{\n    public int Id {get;set;}\n    public int SomeId {get;set;}\n    public int FK_A {get;set;}\n}\n\npublic class table_c\n{\n    public int Id {get;set;}\n    public int Max {get;set;}\n    public string Label {get;set;}\n    public int FK_A {get;set;}\n}\n</code></pre>\n\n<p>Using Dapper I retrieve a list of <code>object_a</code> with any number of child objects <code>table_c</code></p>\n\n<pre><code>using (System.Data.SqlClient.SqlConnection sqlConnection = new System.Data.SqlClient.SqlConnection(_con))\n{\n        sqlConnection.Open();\n        var sql = string.Format(\n        @\"\n        select ta.Id as ta_Id, ta.Label as ta_label, splitLimit = '', tc.Id, tc.Max, tc.Label\n        from table_a as ta\n        left join table_b as tb\n        on tb.FK_A = ta.Id\n        left join table_c as tc\n        on tc.FK_A = ta.Id\n        where tb.SomeId = SomeInt);\n\n        var items = sqlConnection.Query&lt;object_a, IEnumerable&lt;table_c&gt;, object_a&gt;(sql, (a, c) =&gt; { a.c = table_c; return a; }, splitOn: \"splitLimit\");\n        return items;\n    }\n</code></pre>\n\n<p>When calling the Dapper code from a controller I get this error:</p>\n\n<blockquote>\n  <p><em>A parameterless default constructor is required to allow for dapper materialization</em></p>\n</blockquote>\n\n<p>I have also tried this:</p>\n\n<pre><code>var items = sqlConnection.Query&lt;object_a,IEnumerable&lt;table_c&gt;, object_a&gt;(sql, (a, c) =&gt; \n{ \n                    if (c!= null) \n                    {\n                        a.SomeName = c;\n                    } \n                    return a; \n\n                }, splitOn: \"splitLimit\");\n</code></pre>\n\n<p>I think it might has something to do with the <code>IEnumerable&lt;table_c&gt;</code> but I don't understand what I am doing wrong here. I have read related questions that SO suggest, but I don't 'get' it.</p>\n\n<p>I would like to know what I am doing wrong and what the correct code is. Thanks!</p>\n"},{"tags":["asp.net-mvc-3","unity","quartz.net","quartz.net-2.0"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13060627,"title":"Unity MVC3 can't resolve object inside Quartz.net job constructor","body":"<p>Hy guys,\n   I'm getting really confused so please help me out. I'm having a problem regarding the creation of an instance using Unity. The instance i want to create is of type Client, and i want to create it inside the Job constructor, but it keeps giving me null reference error. In other cases let's say inside a controller the resolving works just fine , but inside this scheduled job it doesn't work anymore.<p> The creation of the scheduler is made inside Global.asax</p></p>\n\n<pre>\n\n    private void SchedulerStart()\n    {\n    ISchedulerFactory schedulerFactory = new StdSchedulerFactory();\n              IScheduler scheduler = schedulerFactory.GetScheduler();\n              scheduler.Start();\n              IJobDetail job = JobBuilder.Create().WithIdentity(\"CheckForCompletedJobs\").Build();\n                ITrigger trigger = TriggerBuilder.Create()\n                .WithDailyTimeIntervalSchedule\n                  (s =>\n                     s.WithIntervalInHours(24)\n                    .OnEveryDay()\n                    .StartingDailyAt(TimeOfDay.HourAndMinuteOfDay(4, 03))\n                  )\n                .Build();\n                scheduler.ScheduleJob(job, trigger);\n    }\n\n</pre>\n\n<pre>\n\n\n     public class CheckForCompletedJobs : IJob\n        {\n          private readonly IPhotoEventRepository _photoEventRepository;\n          public CheckForCompletedJobs()\n          {  \n              _clientRepository = DependencyResolver.Current.GetService();\n          }\n          public void Execute(IJobExecutionContext context)\n          {\n              //some action with the clientRepository \n          }\n        }\n\n</pre>\n"},{"tags":["asp.net-mvc-3","wcf","ninject"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13232024,"title":"consume wcf services in mvc3 project using ninject","body":"<p>I have a project that has WCF running. Now I have added that WCF as a Web Service in another MVC3 project.</p>\n\n<p>Now I want to use ninject so that I can use all the services available by using only reference  ,something like </p>\n\n<pre><code>using ninject.wcf\n</code></pre>\n\n<p>but not creating the instance of the wcf time and again for each controller.</p>\n\n<p>any help about how should I begin. Any step by step example would be much helpful. Because i am am completely new in wcf and mvc3 and never used ninject before.</p>\n\n<p>I have few controllers and each of them will diffrent services from the client i created in my new mvc project. But i dont want to initialize the client for each controller by e.g wcf client = new wcf(); rather i want to inject it so that the client is created once and i can use it for all the controller.</p>\n\n<p>more clearly, i have all the user related information stored in the DB. My wcf is dealing with that in one project on the server. Now in my mvc project I am calling that wcf by the name wcfclient. So, when i try to use a service lets say get userId and Password, i dont have to connect to the DB. I am trying to implement a custom login screen. But cant figure out where to begin.</p>\n"},{"tags":["asp.net-mvc-3","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13263226,"title":"Pass List from view to controller","body":"<p>i am trying to pass List from view to controller but i am getting null value. code is written as follows :</p>\n\n<p>model class :</p>\n\n<pre><code>public class testModel\n{\n    public int ID { get; set; }\n\n    public string Name { get; set; }\n\n    public List&lt;myModel&gt; ParameterList {get;set;}\n}\n</code></pre>\n\n<p>jquery and ajax code to post data to controller :</p>\n\n<pre><code>var myModel = {\n                  \"Name\":\"test\",      \n                  \"Description\":\"desc\"      \n                };\n\n        var Object = {\n            Name: $(\"#Name\").val(),\n            ParameterList : myModel\n        };\n\n        $.ajax({\n            url: '/controller/action',\n            type: 'POST',\n            data: JSON.stringify(Object),\n            dataType: 'json',\n            contentType: 'application/json; charset=utf-8',\n            success: function (data) {   }\n                else { }\n            }\n        });\n</code></pre>\n\n<p>i am getting value for Name property but not for ParameterList. \nWhat is wrong here ? am i missing anything ? </p>\n\n<p>Please help me out.</p>\n\n<p>Thanks</p>\n\n<p>Edit : Controller Code from comments, </p>\n\n<pre><code> public JsonResult Save(Object Obj) \n {\n // logic for managing model and db save\n } \n</code></pre>\n"},{"tags":["javascript","jquery","html","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13263623,"title":"How to move a class attribute in html element using javascript or jquery in ASP .NET MVC?","body":"<p>I have a menu selection on my web page using <code>&lt;ul&gt;</code> html tag, it has three <code>&lt;li&gt;</code> tags and on the list item it has an <code>&lt;a&gt;</code> tag. For the first load of the page I have written one of the list item tag with the class attribute. Now I want to move that class attribute from the first list item tag to the second list item tag when I click the second anchor tag and also goes for the third list item tag. My question is how will I do that in ASP .NET MVC 3 using plain JavaScript or with jQuery?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>&lt;div id=\"menu\"&gt;\n    &lt;ul&gt;\n        &lt;li class=\"current_page_item\"&gt;@Html.ActionLink(\"Index\", \"Index\", \"Home\")&lt;/li&gt;\n        &lt;li&gt;@Html.ActionLink(\"Contact Us\", \"ContactUs\", \"Home\")&lt;/li&gt;\n        &lt;li&gt;@Html.ActionLink(\"About\", \"About\", \"Home\")&lt;/li&gt;\n\n    &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13262994,"title":"Controller action method call have the parameter as NULL while calling javascript in MVC3","body":"<p>I use MVC3.\nI  have `</p>\n\n<pre><code>function userLocation_change()\n {\n    var text = $(\"#userLocation\").val();\n    alert(text);\n    var url = '@Url.Action(\"GetAllLocations\", \"Home\")';\n    var data = text;\n    $.post(url, data, function (result) {\n\n\n        });\n}\n</code></pre>\n\n<p>`</p>\n\n<p>Here is my controller action:</p>\n\n<pre><code>public JsonResult GetAllLocations(string userlocation)\n    {\n        ///...some code...\n        return Json(..Something.., JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p>The problem is whenever the controller function is called <code>\"userlocation\"</code> parameter does have a NULL value. I want the <code>data</code> value would be passed to the controller action.\nCould somebody plz tell me why this happens? Any update would be much appreciated.\nThanks.</p>\n"},{"tags":[".net","vb.net","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13263112,"title":"Debugging and Models in VB.NET 2012 MVC 4","body":"<p>In the following example, the <code>request</code> for the <code>\"color name\"</code> is done to a <code>POST method</code> - where after the successful <code>request,</code> the color name should get <code>printed out</code>. </p>\n\n<pre><code>Public Class ColorPrintOutSubmitClassController\n            Inherits System.Web.Mvc.Controller\n\n            ' This method will handle GET\n            Function PrintOutPage() As ActionResult\n                Return View(\"PrintOutPage\")\n            End Function\n\n            ' This method will handle POST\n            &lt;HttpPost&gt;\n            Function ColorPrintOut() As ActionResult\n                ' Do something\n                Response.Write(\"You submitted the color: \" &amp; Request.QueryString(\"ColorName\") &amp; \"&lt;br /&gt;\")\n                Return View()\n            End Function\n        End Class\n</code></pre>\n\n<h2>The First Question:</h2>\n\n<p>It is common in PHP to check the \"methods\" individually by giving the method a value, and have it return.</p>\n\n<ul>\n<li>How can the same be done in the scenario above, so that there's no uncertainty, if the methods are working, as applied?</li>\n</ul>\n\n<h2>The Second Question:</h2>\n\n<ul>\n<li>How can I have the <code>class</code> be <code>invoked</code>, by the <code>models</code> part of the MVC system, after the submit button is pressed?</li>\n</ul>\n\n<p>With my PHP experience, I tend to think of - <em>one, single page</em> - being scanned with each line.</p>\n"},{"tags":["javascript","jquery","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13262677,"title":"Redirect to an Action in MVC with popup countdown","body":"<p>I have an existing mvc3 application that I am adding more to.  I would like to post information in one view and have the app come to a summary page, have a dialog of some sort with a countdown to 0 and if the user doesn't \"submit\" the form after say 25 seconds, to auto-redirect to an action in my controller.. </p>\n\n<p>I can get the refresh to the action to happen using this line at the top of my summary view.</p>\n\n<pre><code>&lt;meta http-equiv=\"refresh\" content=\"25;URL=@(Url.Action(\"CancelandLogoff\", \"Account\"))\" /&gt;\n</code></pre>\n\n<p>but I would like the popup as well .. </p>\n\n<p>Can someone give me a clue how to do this?</p>\n\n<p>Thanks! \nDavid </p>\n"},{"tags":["asp.net-mvc-3","enterprise-library-5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13262411,"title":"Microsoft enterprise Library in MVC 3","body":"<p>When I am Using Enterprise Library code OnException Handle than I gor an Error :</p>\n\n<p>Resolution of the dependency failed, type = \"Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionManager\", name = \"(none)\".\nException occurred while: while resolving.</p>\n\n<h2>Exception is: InvalidOperationException - The type ExceptionManager cannot be constructed. You must configure the container to supply this value.</h2>\n\n<p>At the time of the exception, the container was:</p>\n\n<p>Resolving Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionManager,(none)</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","autocomplete","intellisense"],"answer_count":3,"favorite_count":12,"up_vote_count":22,"down_vote_count":0,"view_count":10064,"score":22,"question_id":4158573,"title":"Need razor view engine auto-complete to work in a class library?","body":"<p>We have a modular architecture where we have some views (cshtml) files in a separate project (class library).  How can we get the <del>syntax highlighting and</del> autocomplete to work when the project isn't an MVC project?</p>\n\n<p>Please note that the class library has controllers, views, models etc.  It just doesn't have the web.config, global.asax, etc that a normal mvc project would have.</p>\n\n<p>The intellisense works for everything but the so important model:\n<img src=\"http://dl.dropbox.com/u/6142956/forums/RazorModelIntellisense.png\" alt=\"screenshot of model error\"></p>\n\n<p>With MVC3 RTM, if you hover over the Model, you can now get a better error message:</p>\n\n<blockquote>\n  <p>C:\\...\\Index.cshtml: ASP.NET runtime\n  error: There is no build provider\n  registered for the extension\n  '.cshtml'. You can register one in the\n  &lt;compilation>&lt;buildProviders>\n  section in the machine.config or\n  web.config.  Make sure is has a\n  BuildProviderAppliesToAttribute\n  attribute which includes the value\n  'Web' or 'All'.</p>\n</blockquote>\n\n<p>So I added this:</p>\n\n<pre><code>&lt;compilation&gt;\n    &lt;assemblies&gt;\n      &lt;add assembly=\"System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;/assemblies&gt;\n    &lt;buildProviders&gt;\n      &lt;add\n         extension=\".cshtml\"\n         type=\"System.Web.WebPages.Razor.RazorBuildProvider, System.Web.WebPages.Razor\"/&gt;\n    &lt;/buildProviders&gt;\n  &lt;/compilation&gt;\n</code></pre>\n\n<p>Then after adding the build provider, this error message appears:</p>\n\n<blockquote>\n  <p>C:\\...\\Index.cshtml: ASP.NET runtime\n  error: Could not load file or assembly\n  'System.Web.WebPages.Razor' or one of\n  its dependencies. The system cannot\n  find the file specified.\n  (C:\\...\\machine.config line 259)</p>\n</blockquote>\n"},{"tags":["visual-studio-2010","asp.net-mvc-3","asp.net-webpages"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":2907,"score":3,"question_id":8512021,"title":"Build Errors - 'System.Web.Mvc.ModelClientValidationRule' Conflicts","body":"<p>I am trying to 'build' my MVC3 web app in VS2010 however keep getting the following error:</p>\n\n<p>Error   2   The type 'System.Web.Mvc.ModelClientValidationRule' exists in both 'c:\\Program Files (x86)\\Microsoft ASP.NET\\ASP.NET MVC 3\\Assemblies\\System.Web.Mvc.dll' and 'c:\\Program Files (x86)\\Microsoft ASP.NET\\ASP.NET Web Pages\\v2.0\\Assemblies\\System.Web.WebPages.dll'  C:\\Users\\brownp\\Documents\\Visual Studio 2010\\Projects\\Cab\\Cab\\Models\\AccountModels.cs   223 28  Cab</p>\n\n<p>Also, every time I open the solution, it prompts me with the following:</p>\n\n<p><img src=\"http://i.stack.imgur.com/J9HFk.jpg\" alt=\"VS2010 error when opening solution\"></p>\n\n<p>I install via Web Platform Installer and it installs successfully however the message reappears every time I open the solution.</p>\n\n<p>Can anyone offer any guidance?</p>\n\n<p>Thanks Paul</p>\n"},{"tags":[".net","vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13260929,"title":"$_POST['color'] for VB.NET 2012 MVC 4?","body":"<p>Through an input field the color \"green\" is submitted.</p>\n\n<p>Now, it takes requesting <strong>it</strong>.</p>\n\n<p>In PHP it would be <code>$_POST['color']</code>.</p>\n\n<p>I have thought it through, and have gotten it to this code:</p>\n\n<p><hr /></p>\n\n<h2>The Example:</h2>\n\n<p><strong>The Request for the ColorName - with VB.NET 2012 MVC 4:</strong></p>\n\n<pre><code>    Public Class ColorPrintOutSubmitClassController\n        Inherits System.Web.Mvc.Controller\n\n        ' This method will handle GET\n        Function PrintOutPage() As ActionResult\n            Return View(\"PrintOutPage\")\n        End Function\n\n        ' This method will handle POST\n        &lt;HttpPost&gt;\n        Function ColorPrintOut() As ActionResult\n            ' Do something\n            Response.Write(\"You submitted the color: \" &amp; Request.QueryString(\"ColorName\") &amp; \"&lt;br /&gt;\")\n            Return View()\n        End Function\n    End Class\n</code></pre>\n\n<p><strong>The HTML:</strong></p>\n\n<pre><code>    &lt;form action=\"\" method=\"post\"&gt;\n    &lt;input type=\"text\" name=\"ColorName\" /&gt;\n    &lt;input type=\"submit\" name=\"ColorName_SubmitButton\" value=\"Print It Out!\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p><hr /></p>\n\n<h2>The Questions:</h2>\n\n<p>The problem in this attempt is that the color name does not get <code>printed out</code>, as wanted.</p>\n\n<ol>\n<li>Could the problem be rather on <code>Reponse.Write</code>, or <code>Request.QueryString</code>?</li>\n<li>How does get the part which is to handle the <code>GET</code> - <code>\"invoked\"</code>?</li>\n</ol>\n\n<hr/>\n\n<p><em><strong><code>Invoked</code></em></strong> = to put into effect or operation\n<em>(Source: The Merriam-Webster Dictionary)</em></p>\n"},{"tags":["html","css","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3871,"score":0,"question_id":6290081,"title":"removing table border","body":"<p>I cannot get rid of this table border.</p>\n\n<p>The initial HTML/CSS is from the ASP.NET MVC default.</p>\n\n<p>I removed a lot of code and added a table on top.</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;@ViewBag.Title&lt;/title&gt;\n    &lt;link href=\"@Url.Content(\"~/Content/Site.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.5.1.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script src=\"@Url.Content(\"~/Scripts/modernizr-1.7.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;div class=\"page\"&gt;\n\n            &lt;table border=0 width=1000 style=\"border-collapse:collapse;\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n                &lt;tr&gt;\n                    &lt;td rowspan=2&gt;\n                        &lt;img src=\"/Content/Images/elk_banner.jpg\" /&gt;\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        &lt;div id=\"logindisplay\"&gt;\n                        @Html.Partial(\"_LogOnPartial\")\n                        &lt;/div&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n\n        &lt;section id=\"main\"&gt;\n            @RenderBody()\n        &lt;/section&gt;\n        &lt;footer&gt;\n        &lt;/footer&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I've tried commenting out ALL the CSS, but I can't get rid of it.</p>\n\n<p>My only guess is that one of the cryptic .js files is interferring with it. Or one of these exotic HTML containers is doing it.</p>\n\n<p>Any guesses? I've googled around, but to no avail. I suppose it's something small I'm overlooking.</p>\n"},{"tags":["c#","asp.net-mvc-3","linq-to-sql"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13259088,"title":"Linq redundant db access for related models","body":"<p>Why does my model go out to the DB again for related properties which have already been loaded in a separate LINQ join statement?</p>\n\n<p><strong>Background info:</strong></p>\n\n<p>I recently ran some Performance profiling on my ASP.NET MVC3 Linq application I got some puzzling results that I hope to resolve. </p>\n\n<p>Here is a simplified version of db structure. Foreign key relationships are set up. </p>\n\n<p><strong>Table Client:</strong></p>\n\n<pre><code>ID|Client Name|Vertical ID|\n___________________________\n1 |Client1    |2          |\n2 |Client2    |5          |\n3 |Client3    |           |\n</code></pre>\n\n<p><strong>Table Vertical</strong></p>\n\n<pre><code>ID|Vertical Name|\n_________________\n2 |Life         |\n5 |Guilt        |\n</code></pre>\n\n<p>When I display the list of clients, I am displaying them the client name and the vertical. My Controller is simple:</p>\n\n<pre><code>public ActionResult Index()\n    {\n        ...\n    var model = repository.GetAllClients();\n        return View(model);\n    }\n</code></pre>\n\n<p>Get all clients runs the join on the vertical table (as well as a few others). </p>\n\n<pre><code> public IEnumerable&lt;client&gt; GetAllClients()\n    {\n        OperationsMetricsDataContext db = new OperationsMetricsDataContext();\n        var clients = from c in db.clients\n                      join v in db.verticals on c.vertical equals v into tmp1\n                      from v in tmp1.DefaultIfEmpty()\n                      join sm in db.cel_sm_staffs on c.sm_id equals sm.cel_sm_id into tmp2\n                      from sm in tmp2.DefaultIfEmpty()\n                      join cel in db.cel_sm_staffs on c.cel_id equals cel.cel_sm_id into tmp3\n                      from cel in tmp3.DefaultIfEmpty()\n                      select c;\n        return clients;\n    }\n</code></pre>\n\n<p>In my View, I then attempt to display the vertical name I have bound using this method in my partial client class</p>\n\n<pre><code>public string getVerticalName()\n    {\n        return this.vertical == null ? \"N/A\" : this.vertical.vertical_name;\n    }\n</code></pre>\n\n<p><strong>The problem:</strong></p>\n\n<pre><code>@foreach (var item in Model) {\n&lt;tr&gt;\n    &lt;td&gt;\n        @Html.Raw(item.client_name)\n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.Raw(item.getVerticalName())\n    &lt;/td&gt;\n</code></pre>\n\n<p>The problem that I uncovered is that even though I specified the join in the original model,  (and I've been able to verify that the vertical property has a value loaded before the model is passed to the view), each time I call the getVerticalName method, Linq automatically goes out to the db again to load the vertical so that I can access the vertical name. This is pretty inefficient because I end up with a separate db call for each client just to get their vertical information.</p>\n\n<p>What am I missing here? Shouldn't LINQ know that the property is already bound and not go out to the db to retrieve it or is there something I need to specify to tell LINQ that my information already exists in the model?</p>\n"},{"tags":["asp.net-mvc-3","datatables"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6,"score":0,"question_id":13260699,"title":"MVC3 jquery.datatables.editable not picking up non visible id column","body":"<p>I have a project where I want to inline edit a value in a table generated via DataTables and am therefore using dataTables.editable\nThe table is rendering fine but when I try and to sumit an edit I get an error and if I look at the return value the id field is blank.\nThe controller action is as follows:</p>\n\n<pre><code>public ActionResult AjaxHandler(jQueryDataTableParamModel param)\n    {\n        var allMonthlyCosts = _unitOfWork.MonthlyCostRepository.Get(includeProperties: \"Period, Employee\");\n        IEnumerable&lt;MonthlyCost&gt; filteredMonthlyCosts;\n        if (!string.IsNullOrEmpty(param.sSearch))\n        {\n            filteredMonthlyCosts = _unitOfWork.MonthlyCostRepository.Get(includeProperties: \"Period, Employee\")\n                .Where(mc =&gt; mc.Period.Name.Contains(param.sSearch)\n                    ||\n                    mc.Employee.ClockNo.Contains(param.sSearch));\n        }\n        else\n        {\n            filteredMonthlyCosts = allMonthlyCosts;\n        }\n\n        var displayedMonthlyCosts = filteredMonthlyCosts\n            .Skip(param.iDisplayStart)\n            .Take(param.iDisplayLength);\n\n        var result = from mc in displayedMonthlyCosts\n                     select new { ID = mc.Id, EvisionCost = mc.EvisionCost, EmployeeNo = mc.Employee.ClockNo, PeriodName = mc.Period.Name, TotalDays = mc.TotalDays, TotalCost = mc.TotalCost() };\n\n        return Json(new\n        {\n            sEcho = param.sEcho,\n            iTotalRecords = allMonthlyCosts.Count(),\n            iTotalDisplayRecords = filteredMonthlyCosts.Count(),\n            aaData = result\n        },\n        JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p>The Javascript is as follows:</p>\n\n<pre><code>$('#myDataTable').dataTable({\n    \"bServerSide\": true,\n    \"sAjaxSource\": \"MonthlyCost/AjaxHandler\",\n    \"bProcessing\": true,\n    \"aoColumns\": [\n        { \"mData\": \"ID\",\n            \"bSearchable\": false,\n            \"bSortable\": false,\n            \"bVisible\": false\n        },\n        { \"mData\": \"EvisionCost\" },\n        { \"mData\": \"PeriodName\" },\n        { \"mData\": \"EmployeeNo\" },\n        { \"mData\": \"TotalDays\" },\n        { \"mData\": \"TotalCost\" }\n    ]\n}).makeEditable({\n    sUpdateURL: \"/MonthlyCost/UpdateData\",\n    \"aoColumns\": [\n        {},\n        null,\n        null,\n        null,\n        null]\n});\n</code></pre>\n\n<p>The error I get is:</p>\n\n<p>Cell cannot be #Updated(Server Error)</p>\n\n<p>And the returned form is as follows:</p>\n\n<pre><code>value:2505\nid:\nrowId:0\ncolumnPosition:0\ncolumnId:1\ncolumnName:EvisionCost\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc-3","uploadify"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13260567,"title":"How to post file media type of uploaded file when using Uploadify and JQuery with ASP.NET MVC 3","body":"<p>I am saving a file to sql server 2008 using uploadify in an ASP.NET MVC 3 web app. I need to get the internet media type, e.g. application/msword, application/pdf, etc., of the file the user uploads and post it along with some other information to a controller action. If not the media type, at least the file extension.</p>\n\n<p>Here's some of the code</p>\n\n<p>View - javascript section</p>\n\n<pre><code>$('#flyer').uploadify({\n            'uploader': '/Flash/uploadify.swf',\n            'script': '/File/Upload',\n            'cancelImg': '/Content/images/cancel.png',\n            'buttonText': 'Select File',\n            'folder': '/Uploads',\n            'auto': true,\n            'sizeLimit': 10485760,\n            'scriptData': { 'UserID': @Model.UserID, 'Type': 'Flyer' },\n            'fileExt': '*.doc;*.docx;*.rtf;*.pdf',\n            'fileDesc': 'Word Documents',\n            'onComplete': function(event, ID, fileObj, response, data) {\n                var resp = jQuery.parseJSON( response );\n                if( !resp.success ){\n                    alert( resp.message );\n                } else {\n                    $(\"#flyerLink\").show();\n                }\n            }\n        });\n</code></pre>\n\n<p>Controller action method header</p>\n\n<pre><code>[HttpPost]\npublic JsonResult Upload(HttpPostedFileBase FileData, int UserID, string Type)\n</code></pre>\n\n<p>Thanks in advance for any help.</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","select","repository","columnname"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13258423,"title":"Column name Entity Framework base Repository","body":"<p><strong>IRepositoryBase</strong></p>\n\n<pre><code>IQueryable&lt;T&gt; GetAll(Expression&lt;Func&lt;T, bool&gt;&gt; predicate = null, params Expression&lt;Func&lt;T, object&gt;&gt;[] includes);\n</code></pre>\n\n<p><strong>RepositoryBase</strong></p>\n\n<pre><code> public IQueryable&lt;T&gt; GetAll([OptionalAttribute][DefaultParameterValueAttribute(null)]Expression&lt;Func&lt;T, bool&gt;&gt; predicate, params Expression&lt;Func&lt;T, object&gt;&gt;[] includes)     \n {\n   var set = CreateSet().IncludeMultiple(includes);\n   return (predicate == null) ? set : set.Where(predicate);            \n }\n</code></pre>\n\n<p><strong>IAccountService</strong></p>\n\n<pre><code>IEnumerable&lt;int&gt; GetAllReferenceIds();\n</code></pre>\n\n<p><strong>AccountService</strong></p>\n\n<pre><code>public IEnumerable&lt;int&gt; GetAllReferenceIds()       \n{    \n  var accountOwners = _accountOwnerRepository.GetAll();\n  return accountOwners.Select(m =&gt; m.ReferenceId).ToList();\n}\n</code></pre>\n\n<p><strong>AccountController</strong></p>\n\n<pre><code>public ActionResult ReferenceIdPartial()      \n{\n\nViewData[\"AccountOwners\"] = accountOwnerService.GetAllReferenceIds();\n\nreturn PartialView();\n\n}\n</code></pre>\n\n<p><strong>MVC Partial View</strong> - devexpress combobox mvc extension</p>\n\n<pre><code>settings.Properties.Columns.Add(\"ReferenceId\", \"Reference Id\", Unit.Percentage(100));\n</code></pre>\n\n<p>Error - column ReferenceId Not found</p>\n\n<p>I am sending a collection of int through GetReferenceIds()</p>\n\n<p>Is there a way to call the columns from Controller. Something like  AccountOwner(a=>a.ReferenceIds, select ReferenceIds) - I should be able to get the column name as well as the data. </p>\n\n<p>Thanks for your time. </p>\n"},{"tags":["asp.net-mvc-3","web-config","app-config","appsettings"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13260006,"title":"Sharing AppSettings and ConnectionStrings between a console and a web app","body":"<p>I have a multi-tiered ASP.Net MVC 3 application in which different layers need to share some settings, and I am wondering how to best achieve this. </p>\n\n<p>For now, all my AppSettings are in the Web.config file, but I just added a new project to my solution to create a console application that will be called every night buy the Windows Task Scheduler to perform routine maintenance tasks. This console application will be using the same database, repository layer, service layer, etc. as the web application, and both applications should share the same settings for the most part. I would like to avoid duplicating the settings in two files (app.config and web.config).</p>\n\n<p>Also, I want these settings to be available to the service layer, which is in a separate project in the same solution.</p>\n\n<p>I have read the following post, but I don't fully understand the solution, and I am not sure it is the best way to do this.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/3553002/sharing-config-settings-between-web-app-and-console-app\">Sharing Config settings between Web App and Console App</a></p>\n\n<p>I also read the article linked to by that post, and I don't find the solution very elegant.</p>\n\n<p>I am using VS 2010 and EF 4.3.1.</p>\n"},{"tags":["asp.net-mvc-3","attributes"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":787,"score":3,"question_id":10143307,"title":"Using Editable attribute on MVC 3 view model","body":"<p>I'm looking to use attributes to mark view model properties as readonly so that the view fields are read only in the rendered view. Applying System.ComponentModel.DataAnnotations.EditableAttribute appears to be the exact attribute I need but it does not appear to work i.e. textbox fields are still editable. I've looked all around and can find no answers and only a few related questions. The editable attribute as applied below does not work when the view is rendered.</p>\n\n<pre><code>[Display(Name = \"Last Name\")]\n[Editable(false, AllowInitialValue = true)]\npublic string LastName { get; set; }\n</code></pre>\n\n<p>I can achieve the readonly behaviour using a view helper function like this but my preference is to use an attribute on the model property.</p>\n\n<pre><code>@functions {\n    object getHtmlAttributes()\n    {\n    if (@ViewBag.Mode == \"Edit\")\n    {\n      return new {style = \"width:100px;background:#ff6;\", @readonly = \"readonly\"};\n    }\n\n    return new { style = \"width:100px;\" };  \n}\n} \n\n@Html.TextBoxFor(model =&gt; model.FirstName, getHtmlAttributes())\n</code></pre>\n\n<p>Other attributes work perfectly ok including custom validation attributes. Can you tell me if the data annotations editable attribute works in this context, should just work as applied above or is there something else that needs to be done? Thanks.</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","validation"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13258504,"title":"jQuery unobtrusive form validator is not hiding error messages when resetting the form","body":"<p>I am attempting to properly validate and reset a form. The validation works fine -- fields which are required are successfully monitored. However, when I go to reset my form -- I only see the red background for my inputs clear, not the validation messages.</p>\n\n<p>According to the <a href=\"http://docs.jquery.com/Plugins/Validation/Validator/resetForm\" rel=\"nofollow\">jQuery validate documentation</a>:</p>\n\n<blockquote>\n  <p>Resets input fields to their original value (requires form plugin),\n  removes classes indicating invalid elements and <strong>hides error messages</strong>.</p>\n</blockquote>\n\n<p>Here's all the info I think is relevant to the issue. Please let me know if you would like to see anything else.</p>\n\n<p>Here is how I generate a DOM element in my Model. This element needs validation:</p>\n\n<pre><code>//Model.ascx\n&lt;div class=\"detailsRow required\"&gt;\n    &lt;%= Html.LabelFor(model =&gt; model.Site) %&gt;\n    &lt;%= Html.DropDownListFor(model =&gt; model.SelectedSiteID, new SelectList(Model.Site, \"Key\", \"Value\"))%&gt;\n    &lt;%= Html.ValidationMessageFor(model =&gt; model.SelectedSiteID)%&gt;\n&lt;/div&gt;\n\n//Model.cs\n[DisplayName(\"Site\")]\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; Site { get; set; }\n\n[Range(0, int.MaxValue, ErrorMessage = \"Site required\")]\npublic int SelectedSiteID { get; set; }\n</code></pre>\n\n<p>Site is a select list which starts with a value of -1. Any other selection is valid. As such, I validate on a range from 0 to max.</p>\n\n<p>Over in JavaScript, I run the following code against my form when the user presses the 'Submit' button on the form:</p>\n\n<pre><code>var form = workflowDialogContent.find('form');\n$.validator.unobtrusive.parse(form);\n//Maintain a reference to the current formValidator to be able to reset.\nvar formValidator = $.data(form[0], 'validator');\n\nif (form.valid()) {\n}\n</code></pre>\n\n<p>When the user pressed submit, the form is validated and my validation message is shown if the selected site has a value of -1.</p>\n\n<p>Now, whenever the a selection is changed, I want to reset my form. I've taken this logic from: <a href=\"http://stackoverflow.com/questions/2086287/how-to-clear-jquery-validation-error-messages\">How to clear Jquery validation error messages?</a></p>\n\n<pre><code>$(window).on('change', '#SelectedSiteID', function () {\n    //Returns the formValidator we maintained a reference to.\n    var validator = WorkflowDialogBuilder.getCurrentFormValidator();\n    validator.resetForm();\n    //TODO: resetForm's documentation says that it hides the errors, but I did not experience this, so I am doing it manually.\n    //$('.field-validation-error').empty();\n}\n</code></pre>\n\n<p>However, when I run this code... the highlighting is removed, but the error messages remain. If I call the bit of commented code -- the validation errors are hidden, but they do not re-appear the next time my form is validated.</p>\n\n<p>After validating:\n<img src=\"http://i.stack.imgur.com/0gNqs.png\" alt=\"enter image description here\">\nAfter calling resetForm:\n<img src=\"http://i.stack.imgur.com/FKqw0.png\" alt=\"enter image description here\"></p>\n\n<p>Any ideas why I would be seeing such behavior?</p>\n\n<p><strong>Update:</strong> As a work around, the following bit of code seems to do proper clean-up:</p>\n\n<pre><code>$('.field-validation-error').empty();\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13253964,"title":"DisplayFormat ApplyFormatInEditMode","body":"<p>I use MVC 3 in C#, I have a class with this Attribute  </p>\n\n<pre><code>[DisplayFormat(DataFormatString = \"{0:dd MMM yyyy}\", ApplyFormatInEditMode = true)]\n</code></pre>\n\n<p>I would like to enforce Validation when a User is in <code>EDIT MODE</code></p>\n\n<p>Data in database is stored with type <code>datetime</code> formatted like this</p>\n\n<pre><code>  6/15/2009 1:45:30 PM\n</code></pre>\n\n<p>I receive this error\n    Error String is not in correct format</p>\n\n<p>I beleive the problem is in</p>\n\n<p>DataFormatString = \"{0:dd MMM yyyy}\"</p>\n\n<p>any idea how to fix it?</p>\n"},{"tags":["jquery","entity-framework","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":429,"score":0,"question_id":6141216,"title":"mvc3 jquery ajax post error \"An entity object cannot be referenced by multiple instances of IEntityChangeTracker.\"","body":"<p>I've found a lot of posts about this error, but none of them helped, it seems that everybody else got this error in a different situation. But this is my first MVC project, so maybe I'm just not getting it :) So, I have a very simple ajax call:</p>\n\n<pre><code>         $.ajax({\n                type: \"POST\",\n                url: \"/Home/MyMethod\",\n                data: ({ SomeProperty:\"someValue\" }),\n                success: function (data) {\n                    var obj = jQuery.parseJSON(data);\n                    alert(obj.Status);\n                },\n                error: function () {\n                    alert(\"error\");\n                }\n            });\n</code></pre>\n\n<p>and the very simple <code>MyMethod</code> controller method:</p>\n\n<pre><code>        [HttpPost]\n        public JsonResult AddReport(MyModel model)\n        {\n            if (ModelState.IsValid)\n            {\n                db.MyModels.Add(model);\n                db.SaveChanges();\n                return Json(...);\n            }\n            else\n            {\n                //not good...\n            }\n        }\n</code></pre>\n\n<p>the line <code>db.MyModels.Add(model);</code> triggers the error. I have another controller in an admin area that handles the CRUD operations for the same model, and it's working just fine. I know that probably the problem is that the <code>model</code> is already attached to the <code>System.Data.Objects.ObjectContext</code> and I have to detach it, but I don't know how to do that. Any ideas?</p>\n"},{"tags":["html","asp.net-mvc-3","attributes","razor"],"answer_count":3,"favorite_count":3,"up_vote_count":10,"down_vote_count":0,"view_count":4962,"score":10,"question_id":8061647,"title":"Conditional HTML Attributes using Razor MVC3","body":"<p>The variable strCSSClass often has a value but sometimes is empty. </p>\n\n<p>I do not want to include an empty class=\"\" in this input element's HTML, which means if strCSSClass is empty, I don't want the class= attribute at all.</p>\n\n<p>The following is one way to do a conditional HTML attribute:</p>\n\n<pre><code>&lt;input type=\"text\" id=\"@strElementID\" @(CSSClass.IsEmpty() ? \"\" : \"class=\" + strCSSClass) /&gt;\n</code></pre>\n\n<p>Is there a more elegant way of doing this? Specifically one where I could follow the same syntax as is used in the other parts of the element: class=\"@strCSSClass\" ?</p>\n"},{"tags":["asp.net-mvc-3","iis","web-applications","directory","virtual"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13258743,"title":"How to virtual directory as an application in IIS","body":"<p>How do you configure a virtual directory as an application in IIS to avoid such errors?\nI have a web page build using C# visual studio and I added the virtual directory to ISS. Upon running the page, I get the error</p>\n\n<pre><code> It is an error to use a section registered as allowDefinition ='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS.\n\n\n&lt;/compilation&gt;\n    &lt;authentication mode=\"Forms\"&gt;\n    &lt;forms loginUrl=\"~/LogOn\" timeout=\"2880\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>All this code is currently in my main web.config</p>\n"},{"tags":["c#","javascript","jquery","asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":13256355,"title":"How to implement multiple dropdown lists in MVC","body":"<p>Let's say I want to show multiple Drop Down Boxes each with the same values within them within a View using the @Html.DropDownList.\nIs there an easy way to be able to render all of these Drop Down Boxes without having to bind something like the ViewBag to each of the months returned?</p>\n\n<p>For example:</p>\n\n<p>Controller</p>\n\n<pre><code>List&lt;SelectListItem&gt; items = new List&lt;SelectListItem&gt;();\n\nvar values = (from v in db.Values select v);\n\nforeach (var value in values)\n{\n    items.Add(new SelectListItem { Text = value.Name, Value = value.Id });\n}\n\nViewBag.Values = PopulateSelectList(\"Values\");\n</code></pre>\n\n<p>View</p>\n\n<pre><code>@Html.DropDownList(\"Values\")\n</code></pre>\n\n<p>But what the goal would be is to have something like</p>\n\n<pre><code>&lt;div class=\"control-group\"&gt;\n    @Html.LabelFor(model =&gt; model.DesignStyle)\n    &lt;div class=\"controls\"&gt;\n        @Html.DropDownList(\"Values\")    @Html.DropDownList(\"Values\")\n        @Html.DropDownList(\"Values\")    @Html.DropDownList(\"Values\")\n        @Html.DropDownList(\"Values\")    @Html.DropDownList(\"Values\")\n        @Html.DropDownList(\"Values\")    @Html.DropDownList(\"Values\")\n        @Html.DropDownList(\"Values\")    @Html.DropDownList(\"Values\")\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>My guess is I would need some sort of <code>@foreach (item in Model)</code> to populate each of the DropDowns on the View</p>\n\n<p>Here is a sample of my initial thought on how to get something going.</p>\n\n<pre><code>List&lt;SelectListItem&gt; results = new List&lt;SelectListItem&gt;();\nSelectListItem item = null;\n\nvar values = (from v in db.Values select v);\n\nfor (int i = 0; i &lt;= 15; i++)\n{\n     item = new SelectListItem();\n\n     item.Text = \"Select a value\";\n     item.Value = \"1\";\n\n     results.Add(item);\n\n     foreach (var thread in threads)\n     {\n         item.Text = thread.Name;\n         item.Value = thread.Id;\n\n         results.Add(item);\n     }\n }\n</code></pre>\n\n<p>What I don't want to do is duplicate the logic to populate a SelectListItem multiple times and put each of those in a separate ViewBag item.</p>\n"},{"tags":["c#","asp.net-mvc-3","datetime","serialization","json.net"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13257891,"title":"JSON.NET Custon serialization and ASP.NET MVC Model attributes","body":"<p>How to access MVC Model property attributes in Custom JSON.NET serialization? For example i want to access [DataType(DataType.Date)] model property attribute in custom JSON.NET serializer and make some decisions depending on that attribute. </p>\n"},{"tags":["asp.net-mvc-3","generated-code"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":10251792,"title":"Changing namespace names in MVC 3 applications causes compilation errors in generated files at runtime","body":"<p>I just started a new project and was reorganizing the source structure including renaming namespaces. After changing a namespace from </p>\n\n<pre><code>CRTReadmissions.Web.Helpers\n</code></pre>\n\n<p>to</p>\n\n<pre><code>Crt.Readmissions.Web.Helpers\n</code></pre>\n\n<p>I get the error shown below when trying to launch the applicaiton indicating that it can't find the old namespace. Any help is greatly appreciated.</p>\n\n<p><strong>Things I've tried</strong></p>\n\n<ol>\n<li>Clean\\Rebuild</li>\n<li>Manually delete bin directory</li>\n<li>Manually delete the contents of the directory where the generated file is located</li>\n</ol>\n\n<p><strong>Error</strong></p>\n\n<p>Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. </p>\n\n<p>Compiler Error Message: CS0246: The type or namespace name 'CRTReadmissions' could not be found (are you missing a using directive or an assembly reference?)</p>\n\n<p>Source Error:</p>\n\n<pre><code>Line 26:     using System.Web.Routing;\nLine 27:     using Cassette.Views;\nLine 28:     using CRTReadmissions.Web.Constants;\nLine 29:     using CRTReadmissions.Web.Helpers;\nLine 30:     \n</code></pre>\n\n<p>Source File: c:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\Temporary ASP.NET Files\\crtreadmission\\203bedd5\\1b724153\\App_Web_login.cshtml.3f4b83a6.wbzlumh4.0.cs    Line: 28 </p>\n"},{"tags":["asp.net-mvc-3","web-security","authorize-attribute"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13257812,"title":"Access action method parameters from custom Authorize attribute in MVC 3","body":"<p>I am writing an MVC 3 app where users will be able to log in and manage their data.  I want to prevent users from viewing or tampering with other user's data.  My first instinct was to just verify access to the relevant object in each action method like this:</p>\n\n<pre><code>public ActionResult ShowDetails(int objectId)\n{\n    DetailObject detail = _repo.GetById(objectId);\n    if (detail.User.UserID != (Guid)Membership.GetUser().ProviderUserKey)\n    {\n        return RedirectToAction(\"LogOff\", \"Account\");\n    }\n}\n</code></pre>\n\n<p>This works fine, but I thought it might be better to put the object authorization code into a custom Authorize attribute derived from AuthorizeAttribute, which I could then apply to the controller.  Unfortunately, I have not been able to find a way to access the action method parameters from within my custom Authorize attribute.  Instead, the only way I have found to access the incoming objectId is by examining httpContext.Request or filterContext.RequestContext.RouteData.Values:</p>\n\n<pre><code>public class MyAuthorizeAttribute : AuthorizeAttribute\n{\n    private int _objectId = 0;\n    private IUnitOfWork _unitOfWork;\n\n    public MyAuthorizeAttribute(IUnitOfWork uow)\n    {\n        _unitOfWork = uow;\n    }\n\n    public override void OnAuthorization(AuthorizationContext filterContext)\n    {\n        int.TryParse((string) filterContext.RequestContext.RouteData.Values[\"id\"], out _objectId);\n        base.OnAuthorization(filterContext);\n    }\n\n    protected override bool AuthorizeCore(HttpContextBase httpContext)\n    {\n        int objectId = 0;\n        if (httpContext.Request.Params.AllKeys.Contains(\"id\", StringComparer.InvariantCultureIgnoreCase))\n        {\n            int.TryParse(httpContext.Request[idKey], out objectId);\n        }\n\n        if (objectId != 0)\n        {\n            if (!IsAuthorized(objectId, httpContext.User.Identity.Name))\n            {\n                return false;\n            }\n        }\n\n        if (_objectId != 0)\n        {\n            if (!IsAuthorized(objectId, httpContext.User.Identity.Name))\n            {\n                return false;\n            }\n        }\n\n        return base.AuthorizeCore(httpContext);\n    }\n\n    private bool IsAuthorized(int objectId, string userName)\n    {\n        DetailObject detail;\n        detail = _unitOfWork.ObjectRepository.GetById(objectId);\n\n        if (detail == null)\n        {\n            return false;\n        }\n\n        if (userName != detail.User.UserName)\n        {\n            return false;\n        }\n\n        return true;\n    }\n}\n</code></pre>\n\n<p>I find this approach to be very clunky.  I really don't want to have to poke around in the RouteData or Request objects; it would be much cleaner to be able to access the action method parameters since model binding would have already pulled out the relevant data from the RouteData and Request.</p>\n\n<p>I know I can access action method parameters from a custom Action Filter (as detailed <a href=\"http://stackoverflow.com/questions/12203329/mvc-action-filters-using-parameters-passed-to-the-for-actionresult?answertab=votes#tab-top\">here</a>), but shouldn't data authorization code be placed in an Authorize Filter?  The more examples I see of Authorize filters, the more I get the impression that they are intended only to handle roles.</p>\n\n<p>My main question is: How do I access action method parameters from my custom Authorize Attribute?</p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13256587,"title":"Hiding or Showing a paticular form based on the dropdown selection in MVC and Jquery","body":"<p>When I choose Adjustment on the dropdown I am able to get Value, but when rendering the correct form the Dropdown UI in the form does not have the correct Value. It almost works, but I feel I am not doing the jquery correctly.  In the View I have 2 different forms, I use the Jquery to select which form I want to show based on the Dropdown Selection. </p>\n\n<p>HERES THE JQUERY</p>\n\n<pre><code> $(document).ready(function() {\n        $(\"#adjustments\").hide();\n        $(\".TypeClass\").change(function() {\n            var selected = $(\".TypeClass option:selected\").text();\n            alert(selected);\n            if (selected == \"Received\") {\n                $(\"#received\").show();\n                $(\"#adjustments\").hide();\n            }\n            if (selected == \"Adjustment\") {\n                $(\"#adjustments\").show();\n                $(\"#received\").hide();\n            }\n        });\n\n\n        $(\".TypeClass2\").change(function() {\n            var selected = $(\".TypeClass2 option:selected\").text();\n            alert(selected);\n            if (selected == \"Received\") {\n                $(\"#received\").show();\n                $(\"#adjustments\").hide();\n                               }\n            if (selected == \"Adjustment\") {\n                $(\"#adjustments\").show();\n                $(\"#received\").hide();\n                              }\n\n        });\n    }); \n</code></pre>\n\n<p>HERES THE VIEW</p>\n\n<pre><code>&lt;div id=\"received\"&gt;\n   &lt;fieldset&gt;\n   &lt;legend&gt;New Inventory Transaction&lt;/legend&gt;\n    &lt;table&gt;\n       &lt;tr&gt;&lt;td&gt;@Html.LabelFor(model =&gt; model.ItemName)&lt;/td&gt;&lt;td&gt;@Html.DisplayFor(model =&gt; model.ItemName)&lt;/td&gt;&lt;/tr&gt;\n       &lt;tr&gt;&lt;td&gt;@Html.LabelFor(model =&gt; model.ItemNumber)&lt;/td&gt;&lt;td&gt;@Html.DisplayFor(model =&gt; model.ItemNumber)&lt;/td&gt;&lt;/tr&gt;\n       &lt;tr&gt;&lt;td&gt;@Html.LabelFor(model =&gt; model.XactTypeId)&lt;/td&gt;&lt;td&gt;@Html.DropDownListFor(model =&gt; model.XactTypeId, (SelectList)ViewData[\"InvType\"], \"Choose Type\", new { @class = \"TypeClass\" })&lt;/td&gt;&lt;/tr&gt;   \n       &lt;tr&gt;&lt;td&gt;@Html.LabelFor(model =&gt; model.XactTotalCost)&lt;/td&gt;&lt;td&gt;@Html.EditorFor(model =&gt; model.XactTotalCost)&lt;/td&gt;&lt;/tr&gt;\n       &lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt; &lt;input type=\"submit\" value=\"Create\" /&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;     \n       &lt;/table&gt;   \n       &lt;/fieldset&gt;\n       &lt;/div&gt;    \n        &lt;div id=\"adjustments\"&gt;\n       &lt;fieldset&gt;\n       &lt;legend&gt;New Inventory Transaction&lt;/legend&gt;   \n       &lt;table&gt;\n       &lt;tr&gt;&lt;td&gt;@Html.LabelFor(model =&gt; model.ItemName)&lt;/td&gt;&lt;td&gt;@Html.DisplayFor(model =&gt; model.ItemName)&lt;/td&gt;&lt;/tr&gt;\n       &lt;tr&gt;&lt;td&gt;@Html.LabelFor(model =&gt; model.ItemNumber)&lt;/td&gt;&lt;td&gt;@Html.DisplayFor(model =&gt; model.ItemNumber)&lt;/td&gt;&lt;/tr&gt;\n        &lt;tr&gt;&lt;td&gt;@Html.LabelFor(model =&gt; model.WharehouseName)&lt;/td&gt;&lt;td&gt;@Html.EditorFor(model =&gt; model.WharehouseName)&lt;/td&gt;&lt;/tr&gt;     \n       &lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt; &lt;input type=\"submit\" value=\"Create\" /&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;   \n\n       &lt;/table&gt;\n\n       &lt;/fieldset&gt;\n       &lt;/div&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","entity-framework","design-patterns","architecture","domain-driven-design"],"answer_count":5,"favorite_count":5,"up_vote_count":6,"down_vote_count":0,"view_count":8378,"score":6,"question_id":7927382,"title":"Sample N-tier ASP.NET MVC3 application with best practices (using EF 4.1)","body":"<p>I am looking for a sample ASP.NET MVC3 N-Tier application that demonstrates best practices (uses Domain Driven Design and Entity Framework 4.1 Code first). I found the following. which one do you recommend out of these (or any other one not in this list)?</p>\n\n<p><a href=\"http://efmvc.codeplex.com/\" rel=\"nofollow\">http://efmvc.codeplex.com/</a></p>\n\n<p><a href=\"http://prodinner.codeplex.com/\" rel=\"nofollow\">http://prodinner.codeplex.com/</a></p>\n\n<p><a href=\"http://www.dofactory.com/Framework/Framework.aspx\" rel=\"nofollow\">http://www.dofactory.com/Framework/Framework.aspx</a> (not free)</p>\n"},{"tags":["asp.net","asp.net-mvc-3","cookies","session-cookies"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13255993,"title":"set secure flag to asp.net session cookie","body":"<p>Anyone knows how to set secure flag to asp.net session cookie ? please see image below.</p>\n\n<p><img src=\"http://i.stack.imgur.com/LFhF2.png\" alt=\"enter image description here\"></p>\n\n<p>It still doesn't any different although I've setup the code below into webconfig.</p>\n\n<pre><code>&lt;system.web&gt;    \n&lt;authentication mode=\"Forms\"&gt;\n      &lt;forms loginUrl=\"~/error/accessdenied\" timeout=\"2880\" requireSSL=\"true\" /&gt;\n    &lt;/authentication&gt;\n&lt;httpCookies requireSSL=\"true\" /&gt;\n&lt;system.web&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","wcf","iis","service"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13255696,"title":"My WCF Service does not see my MVC3 app environment","body":"<p>I have an MVC3 application that uses castlewindsor container. Now i have created a wcfservice to allow other application to be able to update data that my MVC application uses (this service is hosted in iis7). The problem is that It seems that my wcf service does not see the MVC app context since i´m not able to access the container. </p>\n\n<p>I mean, in the following sentence the variable c is null:</p>\n\n<pre><code>IClientService c = DependencyResolver.Current.GetService(typeof(IClientService)) as IClientService;\n</code></pre>\n\n<p>How can i make the wcf service to see the MVC application container?</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":4,"favorite_count":1,"up_vote_count":12,"down_vote_count":0,"view_count":4746,"score":12,"question_id":8320172,"title":"Use Html.RadioButtonFor and Html.LabelFor for the same Model but different values","body":"<p>I have this Razor Template</p>\n\n<pre><code>&lt;table&gt;\n&lt;tr&gt;\n    &lt;td&gt;@Html.RadioButtonFor(i =&gt; i.Value, \"1\")&lt;/td&gt;\n    &lt;td&gt;@Html.LabelFor(i =&gt; i.Value, \"true\")&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n    &lt;td&gt;@Html.RadioButtonFor(i =&gt; i.Value, \"0\")&lt;/td&gt;\n    &lt;td&gt;@Html.LabelFor(i =&gt; i.Value, \"false\")&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>That gives me this HTML</p>\n\n<pre><code>&lt;table&gt;\n&lt;tr&gt;\n    &lt;td&gt;&lt;input id=\"Items_1__Value\" name=\"Items[1].Value\" type=\"radio\" value=\"1\" /&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;label for=\"Items_1__Value\"&gt;true&lt;/label&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n    &lt;td&gt;&lt;input checked=\"checked\" id=\"Items_1__Value\" name=\"Items[1].Value\" type=\"radio\" value=\"0\" /&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;label for=\"Items_1__Value\"&gt;false&lt;/label&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>So I have the ID <code>Items_1__Value</code> twice which is - of course - not good and does not work in a browser when I click on the second label \"false\" the first radio will be activated.</p>\n\n<p>I know I could add an own Id at RadioButtonFor and refer to that with my label, but that's not pretty good, is it? Especially because I'm in a loop and cannot just use the name \"value\" with an added number, that would be end up in multiple Dom Ids in my final HTML markup as well.</p>\n\n<p>Shouldn't be a <em>good</em> solution for this?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":3,"up_vote_count":13,"down_vote_count":0,"view_count":5841,"score":13,"question_id":4160753,"title":"External ASP.NET MVC 3 area not compiling at runtime (works in Preview 1 but not RC)","body":"<p><strong>Problem</strong></p>\n\n<p>ASP.NET MVC 3 RC is giving me a compilation error at runtime (when browsing) to an external MVC area. The website itself works, but the plugin refuses to load throwing a compilation issue pertaining to an unknown model.</p>\n\n<p><em>LogOn.cshtml</em></p>\n\n<pre><code>@model TestProject.Models.LogOnModel\n@{\n    View.Title = \"Log On\";\n}\n//.....omitted for brevity\n</code></pre>\n\n<p>Error thrown at runtime.</p>\n\n<pre>\nCompilation Error\n\nDescription: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. \n\nCompiler Error Message: CS0103: The name 'model' does not exist in the current context\n\nSource Error:\n\n\nLine 38:         public override void Execute() {\nLine 39: \nLine 40: Write(model);\nLine 41: \nLine 42: WriteLiteral(\" TestPlugin.Models.LogOnModel\\r\\n\");\n</pre>\n\n<p><strong>Background</strong></p>\n\n<p>The website is an ASP.NET MVC 3 Preview 1 website I have just migrated to ASP.NET MVC 3 RC. I read the release notes and updated accordingly but still encountered an issue with WebMatrix. I found a SO question where someone from the MVC team suggested until RTM we use the following to force the namespaces to be pulled in (I put them in web.config but it didn't work).</p>\n\n<pre><code>namespace WebMatrix.Data { class Foo { } }\nnamespace WebMatrix.WebData { class Foo { } }\n</code></pre>\n\n<p>This solved my issue within the website and the website now loads up fine in MVC 3 RC. The problem however, is an external MVC area (separate assembly).</p>\n\n<p>Note I'm not using any third party libraries for this, I wrote a little plugin framework that allows loading an MVC area from another assembly. Views are compiled as embedded resources.</p>\n\n<p>So I have an authentication plugin for example that looks like.</p>\n\n<pre><code>-Controllers\n-- AccountController.cs\n-Models\n-- AccountModels.cs\n-Views\n--Account\n--- LogOn.cshtml\n--- ChangePassword.cshtml\n--- ...\n-Web.config\nAccountAreaRegistration.cs\nWeb.config\n</code></pre>\n\n<p>Other than the fact that the views are marked as embedded resources, the AccountController extending  a PluginController that knows how to load the embedded resouces and the global.asax being removed, its a pretty standard MVC area.</p>\n\n<p>I have tried creating a new empty MVC 3 test plugin project and slowly adding in the relevant code. This ensures all references and web.configs are correct. But I still receive the same model issue described above. The project compiles at design time but throws a compilation issue at runtime when it tries to emit the views it looks.</p>\n\n<p><strong>Just to be clear, this all works fine in ASP.NET MVC 3 Preview 1</strong>. However, now that I have upgraded it to MVC 3 RC I have the core website working but the external area refuses to work.</p>\n\n<p>There is nothing wrong the the plugin framework itself. It works fine in MVC 3 Preview 1. I'm looking for answers that might shed a little bit of light on what may be occuring in MVC 3 RC and why I might be using receiving this model error.</p>\n\n<p>Any ideas?</p>\n\n<p><strong>Update</strong></p>\n\n<p>Interestingly if I change the declaration of the model at the top of the view to Preview 1 syntax `@inherits System.Web.Mvc.WebViewPage</p>\n\n<p>I get a different runtime compiler error. This time I get an error just further down when the Html.ValidationSummary begins for the login form.</p>\n\n<pre><code>@inherits System.Web.Mvc.WebViewPage&lt;TestProject.Models.LogOnModel&gt;\n@{\n    View.Title = \"Log On\";\n}\n&lt;div class=\"content_item half loginform\"&gt;\n    &lt;div class=\"content_body\"&gt;\n        &lt;h1&gt;VastID Login&lt;/h1&gt;\n        @Html.ValidationSummary(true, \"Login was unsuccessful. Please correct the errors and try again.\") // &lt;=== Compilation issue here on Html.ValidationSummary\n        @using (Html.BeginForm())\n        {\n          // .. omitted for brevity\n        }\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<pre>\nCompilation Error\n\nDescription: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. \n\nCompiler Error Message: CS1061: 'System.Web.Mvc.HtmlHelper' does not contain a definition for 'ValidationSummary' and no extension method 'ValidationSummary' accepting a first argument of type 'System.Web.Mvc.HtmlHelper' could be found (are you missing a using directive or an assembly reference?)\n\nSource Error:\n\n\nLine 49: \nLine 50: \nLine 51:    Write(Html.ValidationSummary(true, \"Login was unsuccessful. Please correct the errors and try again.\"));\nLine 52: \nLine 53: WriteLiteral(\"\\r\\n\");\n</pre>\n\n<p>It's interesting that there is no compile time errors. System.Web.WebPages, System.Web.Helpers and all the necessary MVC 3 RC dll's are present. Including the necessary web.config's. It's as if these aren't available when the view is trying to be loaded however.</p>\n\n<p>The actual razor syntax I believe is part of System.Web.WebPages? Where does Html.ValidationSummary live? System.Web.Mvc or System.Web.Helpers?</p>\n"},{"tags":["c#",".net","asp.net-mvc-3","wcf","web-api"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13254185,"title":"Web Api call not returning __type in JSON response","body":"<p>We have an MVC website that was calling through to WCF Restful services but we are now replacing them with Web Api calls.  The problem is that existing code in some of the MVC controllers is relying on the \"__type\" attribute being returned for each object in the JSON so it can do different things depending on the type of the object.</p>\n\n<p>However, in the new Web Api responses, each of the objects returned don't have the \"__type\" entries in the JSON so the code is failing.</p>\n\n<p>Does anyone know how this is done?  I've found plenty about removing the __type entries for WCF services but nothing yet for making sure they're in for Web Api.</p>\n\n<p>Thanks</p>\n"},{"tags":["objective-c","ios","json","asp.net-mvc-3","asp.net-web-api"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":13161080,"title":"Using RestKit iOS to POST object to MVC4 webapi not seeing json object","body":"<p>trying to call ASP.NET 4 Web API from iOS using RestKit but the serialised json object doesn't get recognised on the server command.\nCan anyone help?</p>\n\n<p>obj C class;</p>\n\n<pre><code> #import \"NoddyModel.h\"\n @synthesize messageId;\n @synthesize message;\n @end\n</code></pre>\n\n<p>(the above are NSStrings)</p>\n\n<p>equiv C# from the mvc services;</p>\n\n<pre><code>using Core.MessageDocuments;\n\nnamespace WebApi.Models\n{\n    [DataContract]\n    public class NoddysModel : List&lt;NoddyModel&gt;\n    {\n        [DataMember(IsRequired = true)]\n        public long NumberOfMessages\n        {\n            get { return Count; }\n        }   \n    }\n\n    [DataContract]\n    public class NoddyModel\n    {\n        public NoddyModel(string MessageId, string Message)\n        {\n            MessageId = MessageId;\n            Message = Message;\n        }\n\n        [DataMember]\n        public string MessageId { get; set; }\n        [DataMember]\n        public string Message { get; set; }\n    }\n}\n</code></pre>\n\n<p>and the mvc command;</p>\n\n<pre><code>// POST api/Noddy\n[HttpPost]\npublic MessagesPostResponse Post(NoddyModel noddy)\n{\n    int count = 999;\n    try\n    {\n        count = noddy.Message.Length + 9000;\n    }\n    catch (Exception e)\n    {\n        FileStream traceLog = new FileStream(\"C:\\\\logs\\\\Traces.svclog\", FileMode.Append);\n        TextWriterTraceListener myListener = new TextWriterTraceListener(traceLog);\n        Trace.Listeners.Add(myListener);\n        myListener.WriteLine(\"Exception in POST NoddyModel calc count = \" + e.Message + \" response = \" + HttpContext.Current.Request.Params.ToString());\n        Trace.Flush();\n        myListener.Flush();\n        traceLog.Close();\n\n        return new MessagesPostResponse(false, 0);\n    }\n    try\n    {\n        FileStream traceLog = new FileStream(\"C:\\\\logs\\\\Traces.svclog\", FileMode.Append);\n        TextWriterTraceListener myListener = new TextWriterTraceListener(traceLog);\n        Trace.Listeners.Add(myListener);\n        myListener.WriteLine(\"Sending trace information : Noddy = \" + noddy);\n        Trace.Flush();\n        myListener.Flush();\n        traceLog.Close();\n\n        return new MessagesPostResponse(true, count);\n    }\n    catch (Exception e)\n    {\n        FileStream traceLog = new FileStream(\"C:\\\\logs\\\\Traces.svclog\", FileMode.Append);\n        TextWriterTraceListener myListener = new TextWriterTraceListener(traceLog);\n        Trace.Listeners.Add(myListener);\n        myListener.WriteLine(\"Exception in POST NoddyModel = \" + e.Message);\n        Trace.Flush();\n        myListener.Flush();\n        traceLog.Close();\n\n        return new MessagesPostResponse(false, 0);\n    }\n}\n</code></pre>\n\n<p>and the Obj C function;</p>\n\n<pre><code>RKURL *baseURL = [RKURL URLWithString: @\"http://ServerX/cirrusdev/api\"];\nRKObjectManager *objectManager = [RKObjectManager objectManagerWithBaseURLString: @\"http://ServerX/cirrusdev/api\"];\nobjectManager.client.baseURL = baseURL;\n[objectManager setSerializationMIMEType:RKMIMETypeJSON];\n\nRKObjectRouter *dynrouter = [RKObjectRouter new];\n[dynrouter routeClass:[NoddyModel class] toResourcePath:@\"/messages\" forMethod:RKRequestMethodPOST];\n\nobjectManager.router = dynrouter;\n\n\nRKObjectMapping* pmsg = [RKObjectMapping mappingForClass:[NSMutableDictionary class]];\n\n[pmsg mapKeyPath: @\"MessageId\"     toAttribute:@\"messageId\"    ];\n[pmsg mapKeyPath: @\"Message\"       toAttribute:@\"message\"      ];\n\nRKObjectMapping* pmsgSerializeMapping = [pmsg inverseMapping];\n[objectManager.mappingProvider setSerializationMapping:pmsgSerializeMapping forClass:[NoddyModel class]];\n\n\nNoddyModel *msg = [[NoddyModel alloc]init];\nmsg.messageId =@\"abc999\";\nmsg.message = @\"Hello Cirrus\";\n\n[objectManager postObject:msg delegate:self];\n</code></pre>\n\n<p>and the log from RestKit;</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt; 2012-10-31 15:28:26.851 ELOI[74400:c07] D\n&gt; restkit.network:RKClient.m:437 Reachability to host '0.0.0.0'\n&gt; determined for client &lt;RKClient: 0x76dda50&gt;, unsuspending queue\n&gt; &lt;RKRequestQueue: 0x76ddb90 name=(null) suspended=YES requestCount=1\n&gt; loadingCount=0/5&gt; 2012-10-31 15:28:26.851 ELOI[74400:c07] D\n&gt; restkit.network:RKRequest.m:437 Sending asynchronous POST request to\n&gt; URL `http://ServerX/cirrusdev/api/messages`. 2012-10-31 15:28:26.852\n&gt; ELOI[74400:c07] D restkit.network:RKObjectLoader.m:374 POST or PUT\n&gt; request for source object &lt;NoddyModel: 0x7696ba0&gt;, serializing to MIME\n&gt; Type application/json for transport... 2012-10-31 15:28:26.853\n&gt; ELOI[74400:c07] T restkit.network:RKRequest.m:399 Prepared POST\n&gt; URLRequest '&lt;NSMutableURLRequest\n&gt; http://ServerX/cirrusdev/api/messages&gt;'. HTTP Headers: {\n&gt;     Accept = \"application/json\";\n&gt;     \"Content-Length\" = 47;\n&gt;     \"Content-Type\" = \"application/json\"; }. HTTP Body: {\"MessageId\":\"abc999\",\"Message\":\"Hello Cirrus\"}. 2012-10-31\n&gt; 15:28:26.855 ELOI[74400:c07] D restkit.network:RKResponse.m:198\n&gt; Proceeding with request to &lt;NSURLRequest\n&gt; http://ServerX/cirrusdev/api/messages&gt; 2012-10-31 15:28:31.224\n&gt; ELOI[74400:c07] D restkit.network:RKResponse.m:219 NSHTTPURLResponse\n&gt; Status Code: 200 2012-10-31 15:28:31.224 ELOI[74400:c07] D\n&gt; restkit.network:RKResponse.m:220 Headers: {\n&gt;     \"Cache-Control\" = \"no-cache\";\n&gt;     \"Content-Length\" = 74;\n&gt;     \"Content-Type\" = \"application/json; charset=utf-8\";\n&gt;     Date = \"Wed, 31 Oct 2012 15:28:30 GMT\";\n&gt;     Expires = \"-1\";\n&gt;     Pragma = \"no-cache\";\n&gt;     Server = \"Microsoft-IIS/7.5\";\n&gt;     \"X-AspNet-Version\" = \"4.0.30319\";\n&gt;     \"X-Powered-By\" = \"ASP.NET\"; } 2012-10-31 15:28:31.225 ELOI[74400:c07] T restkit.network:RKResponse.m:231 Read response body:\n&gt; {\"Successful\":false,\"Message\":\"We have received 0\n&gt; message(s)\",\"Data\":null}\n</code></pre>\n\n<p>PS I manually edited the server name so if its different please ignore</p>\n"},{"tags":["asp.net-mvc-3","formcollection"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12787763,"title":"using formcollection to retrieve a string of a repetitive dropdownlist and textfield from mvc3 view","body":"<p>I need help to create  and retrieve a repetitive selected dropdownlist values and their corresponding input decimal values from mvc3 view into controller.</p>\n\n<p>I have paycat in dropdownlist and a corresponding payamount(decimal) in an input textbox in MVC3 view.  I  am looking for a way to get strings of selected category and corresponding  payamount and commit these to database in controller. I have tried to use in the view</p>\n\n<pre><code> @for ( var i = 0; i &lt;4 2; i++) {\n\n   &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.PId, \"PayCat\")\n    &lt;/div&gt;\n\n        &lt;div class=\"editor-field\"&gt;\n    @Html.DropDownList(\"PId\", String.Empty)\n      &lt;/div&gt;\n\n     &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Pay)\n    &lt;/div&gt; \n      &lt;div class=\"editor-field\"&gt;\n         @Html.EditorFor(model =&gt; model.Pay)\n         }\n</code></pre>\n\n<p>But  I do not know where to put indexing variable [i] for the code to run. Any help will be appreciated thanks</p>\n"},{"tags":["jquery","asp.net-mvc-3","webgrid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13252777,"title":"Getting error A jQuery script is required in order to","body":"<p>In my controller i have:</p>\n\n<pre><code>        private List&lt;Things&gt; stuff; \n    public ActionResult Index()\n    {\n        return View();\n    }\n\n    public ActionResult List()\n    {\n        InitStuff();\n        return View(\"List\",stuff);\n    }\n\n    [AjaxException]\n    public ActionResult SomeAction(string dataId)\n    {\n        InitStuff();\n\n        System.Threading.Thread.Sleep(3000);\n\n        string[] scribs = { \"zero\", \"one\", \"two\", \"three\", \"four\", \"five\", \"six\", \"seven\", \"eight\", \"nine\", \"ten\" };\n        var value = stuff[Array.IndexOf(scribs, dataId)];\n        stuff.Remove(value);\n\n        return PartialView(\"_ropeListToGrid\", stuff);\n    }\n\n    private void InitStuff()\n    {\n        stuff = new List&lt;Things&gt;();\n        string[] scribs =   { \"zero\", \"one\", \"two\", \"three\", \"four\", \"five\", \"six\", \"seven\", \"eight\", \"nine\", \"ten\" };\n\n        for (int i = 0; i &lt;= scribs.Count() - 1; i++)\n        {\n            stuff.Add(new Things\n            {\n                Id = scribs[i],\n                Name = \"Rope \" + scribs[i],\n                Description = \"Some rope \" + scribs[i]\n            });\n        }       \n    }\n</code></pre>\n\n<p>in my list.cshtml I have:</p>\n\n<pre><code>@{\nViewBag.Title = \"List\";\nLayout = \"~/Views/Shared/_Layout.cshtml\";\n}\n\n@section Javascript\n{\n&lt;script src=\"../../Scripts/Kevin.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n}\n\n@using testMvcSpinner.Models \n@model List&lt;Things&gt;\n\n\n&lt;h2&gt;Rope List&lt;/h2&gt;\n\n\n&lt;div id=\"ropeDiv\"&gt;\n@Html.Partial(\"_ropeListToGrid\",Model)\n&lt;/div&gt;\n</code></pre>\n\n<p>In my partial view I have:</p>\n\n<pre><code>@using testMvcSpinner.Models \n@model List&lt;Things&gt;\n\n@{\nvar grid = new WebGrid(\n    rowsPerPage: 5,\n    source: Model,\n    canSort: false,\n    ajaxUpdateContainerId: \"ropeDiv\");\n\ngrid.Pager(WebGridPagerModes.All);\n}\n@grid.GetHtml(tableStyle: \"tableDG\",\n              headerStyle: \"headerDg\",\n              htmlAttributes: new {id = \"thisGrid\"},                   \n              columns:\n                  grid.Columns(\n                      grid.Column(\"Id\", \"Rope Id\"),\n                      grid.Column(\"Name\", \"Rope Name\"),\n                      grid.Column(\"Description\", \"Rope Desc\"),\n                      grid.Column(header: \"Action\", format: delegate(dynamic i)\n                        {\n                        return Ajax.ActionLink(\"Remove\",\"SomeAction\", new { dataId = @i.id },\n                            new AjaxOptions\n                            {\n                                InsertionMode = InsertionMode.Replace,\n                                UpdateTargetId = \"ropeDiv\",\n                                OnBegin = \"Kevin.Views.Receiving.ReceiveItemBegin\",\n                                OnComplete = \"Kevin.Views.Receiving.ReceiveItemCompleted\" \n                            });\n                        })\n))\n\n&lt;div id=\"loadingDiv\"&gt;\n&lt;img id=\"working\" src=\"@Url.Content(\"~/Content/ajax-loader.gif\")\" alt=\"Loading... Please Wait\"  style=\"display:none; height: 20px;\"/&gt;\n&lt;/div&gt;  \n</code></pre>\n\n<p>in my js i have :</p>\n\n<pre><code>Kevin.Views.Receiving = (function () {\n\nfunction ShowWorking() {\n    $('#working').show();\n}\n\nfunction HideWorking() {\n    $('working').hide();\n}\n\nreturn {\n    ReceiveItemCompleted: function () {\n        HideWorking();\n    },\n\n    ReceiveItemBegin: function () {\n        ShowWorking();\n    }\n};\n\n})();\n</code></pre>\n\n<p>the _layout:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=\"utf-8\" /&gt;\n&lt;title&gt;@ViewBag.Title&lt;/title&gt;\n&lt;link href=\"@Url.Content(\"~/Content/Site.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.5.1.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/modernizr-1.7.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    Kevin = {};\n    Kevin.Views = {};        \n&lt;/script&gt;\n@RenderSection(\"JavaScript\", false)\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div class=\"page\"&gt;\n    &lt;header&gt;\n        &lt;div id=\"title\"&gt;\n            &lt;h1&gt;My MVC Application&lt;/h1&gt;\n        &lt;/div&gt;\n        &lt;div id=\"logindisplay\"&gt;\n            Welcome &lt;strong&gt;@User.Identity.Name&lt;/strong&gt;!\n        &lt;/div&gt;\n        &lt;nav&gt;\n            &lt;ul id=\"menu\"&gt;\n                &lt;li&gt;@Html.ActionLink(\"Home\", \"Index\", \"Home\")&lt;/li&gt;\n                &lt;li&gt;@Html.ActionLink(\"Rope\",\"Index\",\"Rope\")&lt;/li&gt;\n                &lt;li&gt;@Html.ActionLink(\"Things\",\"Index\",\"Thing\")&lt;/li&gt;\n                &lt;li&gt;@Html.ActionLink(\"About\", \"About\", \"Home\")&lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/nav&gt;\n    &lt;/header&gt;\n    &lt;section id=\"main\"&gt;\n        @RenderBody()\n    &lt;/section&gt;\n    &lt;footer&gt;\n    &lt;/footer&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I keep getting  the error \"A jQuery script is required in order to enable Ajax support in then webgrid helper.\"  I am new to this and at a loss as to what is causing the problem...</p>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p><em>*</em> turns out I had to include the jquery.unobtrusive-ajax.js file in the layout view.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-2","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":24,"score":-2,"question_id":13254485,"title":"asp.net mvc toolbar","body":"<p>I'm working on a project with Visual Studio 2010 ASP.Net MVC4 (engine view Razor) and I need create a toolbar.\nthis toolbar have six buttons (Add, Delete, Search, Edit, Cancel and Save)\nWhen into the page the buttons (Add and Search) enable and the others buttons Disables the same the textbox and combobox.\nNow the user click in the button Add then the buttos (Cancel and Save) enable the others buttons disable, textbox and combobox enable  for into data.</p>\n\n<p>How I can program this toolbar, if anybody have idea please help me.</p>\n\n<p>Regards\nRicardo</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13254150,"title":"OutputCache Ignoring Query String","body":"<p>In my MVC3 application, we are using OutputCache. The problem i have is, i have page like abc.aspx which will be cached. But user can or can't have query string parameter. One user can demand abc.aspx and another user can request abc.aspx?dl=245</p>\n\n<p>What i want is ignore any querystring parameter/value and just cache single copy of page. No data is getting changed on my page because of any query string parameter.</p>\n\n<p>I tried varyByParam, varyByHeader. Any help?</p>\n"},{"tags":[".net","asp.net-mvc-3","caching"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13254061,"title":"MVC3 Global.asax Setting private cache","body":"<p>Is there any security or other implications when setting the Response cache to private\nint the global.asax</p>\n\n<p>Response.Cache.SetCacheability(HttpCacheability.Private);</p>\n\n<p>Can somebody explain the difference between nocache and private?</p>\n"},{"tags":["asp.net-mvc-3","authentication","authorization"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13253988,"title":"ASP.NET MVC 3 Authentication/Authorization - Prompting for Credentials","body":"<p>I've looked around quite a bit here and on other sites, but I haven't found anything that has helped me solve my problem. Here's a summary of what I'm trying to accomplish: Using Windows authentication, I want to prompt for Windows credentials on every first-time request to my intranet application, authenticate the user, then check if the user belongs to a specific group. If so, allow access to application. If not, display an authorization error page.</p>\n\n<p>Here's what I've done so far with my intranet site. My Web.config file has this:</p>\n\n<pre><code>&lt;authentication mode=\"Windows\" /&gt;\n&lt;authorization&gt;\n  &lt;deny users=\"*\" /&gt;\n&lt;/authorization&gt;\n</code></pre>\n\n<p>I use <code>&lt;deny users=\"*\" /&gt;</code> because it's the only way that it'll prompt me on every first-time request. If I use <code>&lt;deny users=\"?\" /&gt;</code> it will not prompt me. It will simply take the Windows credentials I am currently logged in with and give me the authorization error page. This is partially correct because the credentials I'm logged in with are not part of that group. However, I want to be able to enter credentials first. The users of this application will not always be logged in with their authorized credentials (rarely in fact). They may need to pull up the site on another user's machine.</p>\n\n<p>My Controller has this:</p>\n\n<pre><code>[CustomAuthorize(Roles = \"MyDomain\\\\MyGroup\")]\npublic class MyController : Controller\n</code></pre>\n\n<p>My CustomAuthorizeAttribute class looks as follows (taken from SO):</p>\n\n<pre><code>[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = true, AllowMultiple = false)]\npublic class CustomAuthorizeAttribute : AuthorizeAttribute\n{\n    /// &lt;summary&gt;\n    /// The name of the master page or view to use when rendering the view on authorization failure.  Default\n    /// is null, indicating to use the master page of the specified view.\n    /// &lt;/summary&gt;\n    public virtual string MasterName { get; set; }\n\n    /// &lt;summary&gt;\n    /// The name of the view to render on authorization failure.  Default is \"Error\".\n    /// &lt;/summary&gt;\n    public virtual string ViewName { get; set; }\n\n    public CustomAuthorizeAttribute()\n        : base()\n    {\n        this.ViewName = \"Error\";\n    }\n\n    protected void CacheValidateHandler(HttpContext context, object data, ref HttpValidationStatus validationStatus)\n    {\n        validationStatus = OnCacheAuthorization(new HttpContextWrapper(context));\n    }\n\n    public override void OnAuthorization(AuthorizationContext filterContext)\n    {\n        if (filterContext == null)\n        {\n            throw new ArgumentNullException(\"filterContext\");\n        }\n\n        if (filterContext.Result is HttpUnauthorizedResult)\n        {\n            HandleUnauthorizedRequest(filterContext);\n        }\n\n        if (AuthorizeCore(filterContext.HttpContext))\n        {\n            SetCachePolicy(filterContext);\n        }\n        else if (!filterContext.HttpContext.User.Identity.IsAuthenticated)\n        {\n            // auth failed, redirect to login page\n            filterContext.Result = new HttpUnauthorizedResult();\n        }\n        else if (filterContext.HttpContext.User.IsInRole(\"MyDomain\\\\MyGroup\"))\n        {\n            // is authenticated and is in the SuperUser role\n            SetCachePolicy(filterContext);\n        }\n        else\n        {\n            ViewDataDictionary viewData = new ViewDataDictionary();\n            viewData.Add(\"Message\", \"You do not have sufficient privileges for this operation.\");\n            filterContext.Result = new ViewResult { MasterName = this.MasterName, ViewName = this.ViewName, ViewData = viewData };\n        }\n\n    }\n\n    protected void SetCachePolicy(AuthorizationContext filterContext)\n    {\n        // ** IMPORTANT **\n        // Since we're performing authorization at the action level, the authorization code runs\n        // after the output caching module. In the worst case this could allow an authorized user\n        // to cause the page to be cached, then an unauthorized user would later be served the\n        // cached page. We work around this by telling proxies not to cache the sensitive page,\n        // then we hook our custom authorization code into the caching mechanism so that we have\n        // the final say on whether a page should be served from the cache.\n        HttpCachePolicyBase cachePolicy = filterContext.HttpContext.Response.Cache;\n        cachePolicy.SetProxyMaxAge(new TimeSpan(0));\n        cachePolicy.AddValidationCallback(CacheValidateHandler, null /* data */);\n    }\n}\n</code></pre>\n\n<p>I created this custom AuthorizationAttribute class, and in the OnAuthorization method the idea was to check if the authenticated user belongs to a specific group. I placed a break point in the method, but I only get there if I enter credentials that belong to the domain group (which makes sense given the name of the method). If I enter credentials that do not belong to the domain group, it just keeps prompting me for credentials. I'd really like to authenticate, and then display a custom authorization error page if the user is not in the domain group. Am I using the wrong authentication/authorization approach here? Any ideas?</p>\n"},{"tags":["asp.net-mvc-3","razor","if-statement"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":4267,"score":2,"question_id":8549455,"title":"if else statement in Razor is not functioning","body":"<p>I am using an if else in Razor view to check for null value like this:</p>\n\n<pre><code> @foreach (var item in Model)\n    {\n        &lt;tr id=\"@(item.ShopListID)\"&gt;\n            &lt;td class=\"shoptablename\"&gt;@Html.DisplayFor(modelItem =&gt; item.Name)\n            &lt;/td&gt;\n            &lt;td class=\"shoptableamount\"&gt;\n                @if (item.Amount == null)\n                {\n                    Html.Display(\"--\");\n                }\n                else\n                {\n                    String.Format(\"{0:0.##}\", item.Amount);\n                }\n            &lt;/td&gt;\n        &lt;/tr&gt;\n\n    }\n</code></pre>\n\n<p>However, no matter my model amount is null or having a value, the html rendered do not contain any value in the amount.</p>\n\n<p>I wonder why this is happening. Any idea?</p>\n\n<p>Thanks...</p>\n\n<p>EDIT:</p>\n\n<p>Decided to did it in controller:</p>\n\n<pre><code>   // Function to return shop list food item amount\n    public string GetItemAmount(int fid)\n    {\n        string output = \"\";\n\n        // Select the item based on shoplistfoodid\n        var shopListFood = dbEntities.SHOPLISTFOODs.Single(s =&gt; s.ShopListFoodID == fid);\n\n        if (shopListFood.Amount == null)\n        {\n            output = \"--\";\n        }\n        else\n        {\n            output = String.Format(\"{0:0.##}\", shopListFood.Amount);\n        }\n        return output;\n    }\n</code></pre>\n\n<p>and call at View like:</p>\n\n<pre><code> &lt;td class=\"shoptableamount\"&gt;\n                @Html.Action(\"GetItemAmount\", \"Shop\", new { fid = item.ShopListFoodID })\n            &lt;/td&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","dependency-injection","ninject"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13252851,"title":"Confusion over MVC3 Code First / Repositories","body":"<p>Please can someone help me because I am getting confused.</p>\n\n<p>I have an Entity like this:</p>\n\n<pre><code>public class Code\n{\n    public int ID { get; set; }\n    public int UserID { get; set; }\n    public string CodeText { get; set; }\n}\n</code></pre>\n\n<p>and an Interface like this:</p>\n\n<pre><code>public interface ICodeRepository\n{\n    IQueryable&lt;Code&gt; Codes { get; }\n    void AddCode(Code code);\n    void RemoveCode(Code code);\n    Code GetCodeById(int id);\n}\n</code></pre>\n\n<p>and a Repository like this:</p>\n\n<pre><code>public class SQLCodeRepository : ICodeRepository\n{\n    private EFSQLContext context;\n\n    public SQLCodeRepository()\n    {\n        context = new EFSQLContext();\n    }\n\n    public IQueryable&lt;Code&gt; Codes\n    {\n        get { return context.Codes; }\n    }\n\n    public void AddCode(Code code)\n    {\n        context.Codes.Add(code);\n        context.SaveChanges();\n    }\n\n    public void RemoveCode(Code code)\n    {\n        context.Codes.Remove(code);\n        context.SaveChanges();\n    }\n\n    public Code GetCodeById(int id)\n    {\n        return context.Codes.Where(x =&gt; x.ID == id).FirstOrDefault();\n    }\n}\n</code></pre>\n\n<p>and a Context like this:</p>\n\n<pre><code>public class EFSQLContext : DbContext\n{\n    public DbSet&lt;User&gt; Users { get; set; }\n    public DbSet&lt;Code&gt; Codes { get; set; }\n    public DbSet&lt;PortfolioUser&gt; PortfolioUsers { get; set; }\n}\n</code></pre>\n\n<p>If I declare my controller like this:</p>\n\n<pre><code>public class SearchController : Controller\n{\n    private ICodeRepository cRepo;\n\n    public SearchController(ICodeRepository codeRepository)\n    {\n        cRepo = codeRepository;\n    }\n}\n</code></pre>\n\n<p>and then try to do <code>cRepo.GetCodeById(1)</code> nothing happens. But if I declare private <code>ICodeRepository rep = new SQLCodeRepository</code> and then call <code>rep.GetCodeById(1)</code> I can see the method in the Repository being called.</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13225090,"title":"Creating an MVC Blog with a Rich Text Editor","body":"<p>I know the basics of asp.net MVC, and want to create a nice little blog from scratch.  As for the blog portion, I need a rich text editor.  CKEditor looked good, but I'm curious as to how to save/retrieve rich text from a database.  It will be mostly images and text.  Is there an easy way to do this?  Any tips would be greatly appreciated. </p>\n\n<p>Thanks</p>\n\n<p>EDIT: Thanks for the advice, I'll look into both answers.  But no matter what I choose, is there a simple way to store/retrieve rich text from SQL?  Again with mostly images and text throughout.</p>\n"},{"tags":["asp.net-mvc-3","elmah","elmah.mvc","elmahr"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13248958,"title":"ElmahR configuration with asp.net MVC","body":"<p>I get Elmah to work correctly with MVC 3 and got down to setting up ElmahR for the same project. The configuration specified did not work for me. My configuration is below.</p>\n\n<p>I haven't changed the defaults much except adding the target Url and source Url. So not sure how to fix this. the wiki (<a href=\"https://bitbucket.org/wasp/elmahr/wiki/Elmahr.config\" rel=\"nofollow\">https://bitbucket.org/wasp/elmahr/wiki/Elmahr.config)</a> for the project says that the dashboard should be a separate app, that did not work for me either. I gues I am missing something substantial since navigating to posterrors.ashx does not seem to be the right thing to do in mvc.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;sectionGroup name=\"elmah\"&gt;\n      &lt;section name=\"security\" requirePermission=\"false\" type=\"Elmah.SecuritySectionHandler, Elmah\" /&gt;\n      &lt;section name=\"errorLog\" requirePermission=\"false\" type=\"Elmah.ErrorLogSectionHandler, Elmah\" /&gt;\n      &lt;section name=\"errorMail\" requirePermission=\"false\" type=\"Elmah.ErrorMailSectionHandler, Elmah\" /&gt;\n      &lt;section name=\"errorFilter\" requirePermission=\"false\" type=\"Elmah.ErrorFilterSectionHandler, Elmah\" /&gt;\n      &lt;section name=\"errorPost\" requirePermission=\"false\" type=\"Elmah.ErrorLogSectionHandler, Elmah\" /&gt;\n    &lt;/sectionGroup&gt;\n    &lt;section name=\"elmahr\" type=\"ElmahR.Core.Config.SectionHandler, ElmahR\" /&gt;\n  &lt;/configSections&gt;\n  &lt;elmahr&gt;\n    &lt;!-- Monitored applications list --&gt;\n    &lt;application name=\"Source Application\" sourceId=\"http://localhost:3154/elmah\"/&gt;\n  &lt;/elmahr&gt;\n  &lt;connectionStrings&gt;\n    &lt;add name=\"ApplicationServices\" connectionString=\"data source=.\\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true\" providerName=\"System.Data.SqlClient\" /&gt;\n  &lt;/connectionStrings&gt;\n  &lt;appSettings&gt;\n    &lt;add key=\"webpages:Version\" value=\"1.0.0.0\" /&gt;\n    &lt;add key=\"ClientValidationEnabled\" value=\"true\" /&gt;\n    &lt;add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" /&gt;\n    &lt;add key=\"elmah.mvc.disableHandler\" value=\"false\" /&gt;\n    &lt;add key=\"elmah.mvc.requiresAuthentication\" value=\"false\" /&gt;\n    &lt;add key=\"elmah.mvc.allowedRoles\" value=\"*\" /&gt;\n    &lt;add key=\"elmah.mvc.route\" value=\"elmah\" /&gt;\n  &lt;/appSettings&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n      &lt;assemblies&gt;\n        &lt;add assembly=\"System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n        &lt;add assembly=\"System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n        &lt;add assembly=\"System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n        &lt;add assembly=\"System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n        &lt;add assembly=\"System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n      &lt;/assemblies&gt;\n    &lt;/compilation&gt;\n    &lt;authentication mode=\"Forms\"&gt;\n      &lt;forms loginUrl=\"~/Account/LogOn\" timeout=\"2880\" /&gt;\n    &lt;/authentication&gt;\n    &lt;membership&gt;\n      &lt;providers&gt;\n        &lt;clear /&gt;\n        &lt;add name=\"AspNetSqlMembershipProvider\" type=\"System.Web.Security.SqlMembershipProvider\" connectionStringName=\"ApplicationServices\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/membership&gt;\n    &lt;profile&gt;\n      &lt;providers&gt;\n        &lt;clear /&gt;\n        &lt;add name=\"AspNetSqlProfileProvider\" type=\"System.Web.Profile.SqlProfileProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/profile&gt;\n    &lt;roleManager enabled=\"false\"&gt;\n      &lt;providers&gt;\n        &lt;clear /&gt;\n        &lt;add name=\"AspNetSqlRoleProvider\" type=\"System.Web.Security.SqlRoleProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt;\n        &lt;add name=\"AspNetWindowsTokenRoleProvider\" type=\"System.Web.Security.WindowsTokenRoleProvider\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/roleManager&gt;\n    &lt;pages&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"System.Web.Helpers\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n        &lt;add namespace=\"System.Web.Routing\" /&gt;\n        &lt;add namespace=\"System.Web.WebPages\" /&gt;\n      &lt;/namespaces&gt;\n    &lt;/pages&gt;\n    &lt;httpModules&gt;\n      &lt;add name=\"ErrorLog\" type=\"Elmah.ErrorLogModule, Elmah\" /&gt;\n      &lt;add name=\"ErrorMail\" type=\"Elmah.ErrorMailModule, Elmah\" /&gt;\n      &lt;add name=\"ErrorFilter\" type=\"Elmah.ErrorFilterModule, Elmah\" /&gt;\n      &lt;add name=\"ErrorPost\" type=\"ElmahR.Elmah.ErrorPostModule, ElmahR.Elmah\" /&gt;\n    &lt;/httpModules&gt;\n  &lt;/system.web&gt;\n  &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"&gt;\n      &lt;add name=\"ErrorLog\" type=\"Elmah.ErrorLogModule, Elmah\" preCondition=\"managedHandler\" /&gt;\n      &lt;add name=\"ErrorMail\" type=\"Elmah.ErrorMailModule, Elmah\" preCondition=\"managedHandler\" /&gt;\n      &lt;add name=\"ErrorFilter\" type=\"Elmah.ErrorFilterModule, Elmah\" preCondition=\"managedHandler\" /&gt;\n      &lt;add name=\"ErrorPost\" type=\"ElmahR.Elmah.ErrorPostModule, ElmahR.Elmah\" /&gt;\n    &lt;/modules&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt;\n  &lt;/system.webServer&gt;\n  &lt;runtime&gt;\n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"3.0.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n    &lt;/assemblyBinding&gt;\n  &lt;/runtime&gt;\n  &lt;elmah&gt;\n    &lt;errorLog type=\"Elmah.MemoryErrorLog, Elmah\" /&gt;\n    &lt;errorPost targetUrl=\"http://localhost:3154/posterror\" sourceId=\"http://localhost:3154/elmah\" /&gt;\n  &lt;/elmah&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13248616,"title":"Retrieve Logged in user information or entity in mvc 3 application","body":"<p>Is there a better way to store the logged in user's information or entity in an mvc 3 application without using a session? Because before, I would like to store it in a session. But since there is no concept of Session, what would be the best way to retrieve it?</p>\n\n<p>Here is the sample entity class of the user:</p>\n\n<pre><code>public class User\n{\n  public UserName { get; set; }\n  public Password { get; set; }\n  public SecurityGroup { get; set; }\n  public DepartmentID { get; set; }\n}\n</code></pre>\n\n<p>There will be some pages which I would need the <code>SecurityGroup</code> of the user and there will be some pages that I would need the <code>DepartmentID</code>. It will be foolish if I would retrieve the data every time I need it.</p>\n\n<p>Just need your opinion guys because I'm still starting with this technology.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13237122,"title":"Mvc application(from default) user registration","body":"<p>I make a Mvc4 application from defaults I've been given at the beginning.</p>\n\n<p>I need to store the modified UserProfile in my DB, so I have changed the UserProfile class for  fulfilling my needs and also changed the RegisterModel class. Now when I register someone, I have a correct view with all the necessary fields for it, however, when I open Server Explorer for check, I get a UserProfile table with UserId and UserName only(but by the model there should also be firstname,lastname,email and so on).</p>\n\n<p>What should be modified more for storing them correctly?</p>\n"},{"tags":["asp.net-mvc-3","frameworks","errata"],"answer_count":7,"favorite_count":3,"up_vote_count":11,"down_vote_count":0,"view_count":1590,"score":11,"question_id":6354897,"title":"Apress Pro Asp.net MVC Framework 3 - SportsStore Edit Product not working?","body":"<p>G’day All, has anyone purchased the ALPHA of Apress Pro Asp.net MVC Framework 3 and created the SportsStore?  I can’t for the life of me edit products and have the DB update successfully? No errors are displayed and unit tests all function, but no successful ‘edit’ i.e. I change some details, click save, it reports successful – I then check the results, and nothing has happened?  Did anyone else find this when working through the SportsStore? Any advice will be greatly appreciated.</p>\n\n<p>Cheers.</p>\n"},{"tags":["c#","asp.net-mvc-3","model-binding"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13249304,"title":"ASP.NET MVC 3 model binding not working for me?","body":"<p>This is the line that is not working: </p>\n\n<pre><code>ModelBinders.Binders.Add(typeof(decimal), new DecimalModelBinder())\n</code></pre>\n\n<p>To be more precise. Binders is highlated.</p>\n\n<p><a href=\"http://haacked.com/archive/2011/03/19/fixing-binding-to-decimals.aspx\" rel=\"nofollow\">I found this article</a> by Phil Haack.</p>\n\n<p>I did all it said, added refrences to <code>using System.Web.Http.ModelBinding.Binders;</code>\nAdded class <code>public class DecimalModelBinder : IModelBinder</code>to a new folder and told to Global.ascx about the folder. But the red line keeps showing underneath the <strong>Binders</strong>. Can you help me?</p>\n"},{"tags":["asp.net-mvc-3","razor","webgrid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13249809,"title":"How to pass the Checkbox Checked or Not to Controller from View in MVC3 WebGrid?","body":"<p>I have to pass the Checkbox State like checked or not to the controller.I have action method which takes the parameter as like this </p>\n\n<pre><code>public ActionResult Edit(int id, bool IsChecked)\n        {\n            if (id == null)\n            {\n                return HttpNotFound();\n            }\n            else\n            {\n\n\n                if (ModelState.IsValid)\n                {\n                    _repository.EditStudent(id, IsChecked);\n                    return RedirectToAction(\"Index\");\n                }\n                var model = _repository.GetAllStudents();\n                return View(model);\n            }\n        }\n</code></pre>\n\n<p>Now I want to pass the value from View to Controller .In my Index.cshtml code is like this </p>\n\n<pre><code>&lt;div id=\"gridDiv\"&gt;\n    @{\n        var grid = new WebGrid(source: Model, canPage: true, pageFieldName: \"Id\", rowsPerPage: 4);\n\n        @grid.GetHtml(columns: grid.Columns(\n           grid.Column(columnName: \"StudentId\", header: \"Id\", format: @&lt;b&gt;@item.StudentId\n           &lt;/b&gt;, canSort: true),\n           grid.Column(columnName: \"StudentName\", header: \"Name\", format: @&lt;b&gt;@item.StudentName&lt;/b&gt;, canSort: false),\n           grid.Column(columnName: \"Age\", header: \"Age\", format: @&lt;b&gt;@item.Age&lt;/b&gt;, canSort: false),\n    grid.Column(columnName: \"Result\", header: \"Pass/Fail\", canSort: false,\n           format: (item) =&gt; @Html.Raw(\"&lt;input type='checkbox' \" + ((item.Result == true) ? \"checked\" : \"\") + \" disabled='disabled'  /&gt;\")),\n           grid.Column(columnName: \"\", header: \"Actions\", format: @&lt;text&gt;\n        @Html.ActionLink(\"Edit\", \"\", new { id = item.StudentId }, new { @id = \"lnkEdit\" + item.studentid })\n        |\n        @Html.ActionLink(\"Save\", \"Edit\", new { id = item.studentid, IsChecked = item.Result }, new { @id = \"lnkSave\" + item.studentid })\n        &lt;/text&gt;)\n\n    ));\n    }\n&lt;/div&gt;\n</code></pre>\n\n<p>I want to pass the current state of the Checkbox value as parameter when user clicks on \"save\" link.</p>\n"},{"tags":["logging","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":2105,"score":1,"question_id":5355781,"title":"Error logging in ASP.NET MVC 3","body":"<p>I am logging errors in my ASP.NET MVC 3's Application_Error method in the Global.asax file.\nMy problem is that if customErrors in Web.config is set to true no logging happens. It does happen if it is set to Off. If an exception is thrown, Application_Error will always be called no matter the customError settings - or so I thought? What is up?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13248609,"title":"MVC- Model Binding on a Complex Type","body":"<p>If I have a Model like this:</p>\n\n<pre><code>public class Search\n{\n    public int Id { get; set; }\n    public string UserDefinedName { get; set; }\n    public SearchAge Age { get; set; }\n    public virtual ICollection&lt;SearchBachelors&gt; Bachelors { get; set; }\n}\n</code></pre>\n\n<p>And I render the partial view for Age property dynamically using something like this:</p>\n\n<pre><code>@Ajax.ActionLink(\"Age\", \"SearchAge\", new AjaxOptions { UpdateTargetId = \"search-stage\", InsertionMode = InsertionMode.InsertAfter })\n</code></pre>\n\n<p>That partial view looks like this:</p>\n\n<pre><code>@model HireWireWeb.Models.Campaign.Search.Search\n&lt;div&gt;\n    @Html.DropDownListFor(m =&gt; m.Age.MaximumAge, HireWireWeb.Models.Constants.SLIST_AGE_LIST)\n    @Html.DropDownListFor(m =&gt; m.Age.MinimumAge, HireWireWeb.Models.Constants.SLIST_AGE_LIST)\n&lt;/div&gt;\n</code></pre>\n\n<p>(Note that I'm not passing \"SearchAge\" as the model here, but rather it's parent, \"Search\" since it's only how I can get the \"SearchAge\" values posted on form submit, under the rendered \"Search\" Form) - <a href=\"http://stackoverflow.com/questions/6440693/asp-net-mvc-model-binding-complex-type\">According to this Answer</a></p>\n\n<p>My question is, how can I do the same thing with the partial view for \"Bachelors\" property, since it's an ICollection?</p>\n"},{"tags":["asp.net-mvc-3","error-handling","success"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13247571,"title":"MVC 3 Razor - How to handle success/error messages","body":"<p>I am using MVC3 for a new project and I am able to pass the values from my model to my DAL and successfully submit data to the database. Being new to MVC I am not sure how to handle success and error messages.</p>\n\n<p>What I want to do is give the user some feedback after the form is submitted and I don't know if I am meant to create a new controller for this or reuse my current controller but write some logic in the view to hide the form and show the message.</p>\n\n<p><strong>ActionResult CreateUser is the form and ActionResult CreateUser with httppost handles form submission</strong></p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing UserManager.Models;\n\nnamespace UserManager.Controllers\n{\n    public class UserManagerController : Controller\n    {\n        //\n        // GET: /UserManager/\n\n        public ActionResult Index()\n        {\n            try\n            {\n                var data = new UserManager.Models.UserManagerTestEntities();\n                return View(data.vw_UserManager_Model_Add_Users.ToList());\n\n            }\n            catch (Exception ex)\n            {\n                return View(ViewBag);\n            }\n\n        }\n\n\n        public ActionResult LookUpGroupName(string q, int limit)\n        {\n            //TODO: Map list to autocomplete textbox control\n            DAL d = new DAL();\n            List&lt;string&gt; groups = d.groups();\n\n            var GroupValue = groups\n                .Where(x =&gt; x.Contains(q))\n                .OrderBy(x =&gt; x)\n                .Take(limit)\n                .Select(r =&gt; new { group = r });\n\n            // Return the result set as JSON\n            return Json(GroupValue, JsonRequestBehavior.AllowGet);\n        }\n\n\n        public ActionResult CreateUser()\n        {\n            //var data = new UserManager.Models.UserManagerTestEntities();\n            ViewBag.Message = \"Create New User\";\n            return View();\n        }\n\n        [HttpPost]\n        public ActionResult CreateUser(vw_UserManager_Model_Add_Users newUser)\n        {\n            try\n            {\n                if (ModelState.IsValid)\n                {\n                    //var data = new UserManager.Models.UserManagerTestEntities();\n                    // Pass model to Data Layer\n                    List&lt;string&gt; outcome =  UserManager.DAL.CreateUser(newUser);\n                    //data.SaveChanges();\n                }\n                return View();\n            }\n\n            catch (Exception ex)\n            {\n                return View(ex.ToString());\n            }\n\n        }\n    }\n}\n</code></pre>\n\n<p><strong>My DAL</strong></p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Data.SqlClient;\nusing System.Data;\nusing System.Configuration;\nusing UserManager.Models;\nusing System.Security.Cryptography;\nusing System.Web.Security;\n\nnamespace UserManager\n{\n    public class DAL\n    {\n        #region hashingpassword\n        private static string CreateSalt(int size)\n        {\n            // Generate a cryptographic random number.\n            RNGCryptoServiceProvider rng = new RNGCryptoServiceProvider();\n            byte[] buff = new byte[size];\n            rng.GetBytes(buff);\n\n            // Return a Base64 string representation of the random number.\n            return Convert.ToBase64String(buff);\n        }\n\n        private static string CreatePasswordHash(string pwd, string salt)\n        {\n            string saltAndPwd = string.Concat(pwd, salt);\n            string hashedPwd =\n                FormsAuthentication.HashPasswordForStoringInConfigFile(\n                saltAndPwd, \"sha1\");\n            return hashedPwd;\n        }\n\n        #endregion\n\n        private static SqlConnection BradOnline()\n        {\n            UserManagerTestEntities DBContext = new UserManagerTestEntities();\n            string connectionstring = DBContext.Database.Connection.ConnectionString;\n            SqlConnection conn = new SqlConnection(connectionstring);\n            return conn;\n        }\n\n        public List&lt;string&gt; groups()\n        {\n            List&lt;string&gt; groups = new List&lt;string&gt;();\n            using (SqlConnection conn = BOnline())\n            {\n                using (var command = new SqlCommand(\"Select name from aspnet_Custom_Groups\", conn))\n                {\n                    try\n                    {\n                        conn.Open();\n                        command.CommandType = CommandType.Text;\n                        SqlDataAdapter adapter = new SqlDataAdapter(command);\n                        DataSet dataset = new DataSet();\n                        adapter.Fill(dataset);\n                        foreach (DataRow dr in dataset.Tables[0].Rows)\n                        {\n                            groups.Add(dr[\"name\"].ToString());\n                        }\n\n                    }\n                    catch (SqlException ex)\n                    {\n                        ex.ToString();\n                    }\n                    return groups;\n                }\n            }\n        }\n\n        public static List&lt;string&gt; CreateUser(Models.vw_UserManager_Model_Add_Users newUser)\n        {\n            List&lt;string&gt; outcome = new List&lt;string&gt;();\n            try\n            {\n                using (SqlConnection conn = BOnline())\n                {\n                    conn.Open();\n                    UserManager.Models.vw_UserManager_Model_Add_Users model = new Models.vw_UserManager_Model_Add_Users();\n                    using (var command = new SqlCommand(\"sp_UserManager_Add\", conn))\n                    {\n                        command.CommandType = CommandType.StoredProcedure;\n                        command.Parameters.Add(\"@salutation\", SqlDbType.NVarChar).SqlValue = newUser.salutation;\n                        command.Parameters.Add(\"@username\", SqlDbType.NVarChar).SqlValue = newUser.email;\n                        command.Parameters.Add(\"@firstname\", SqlDbType.NVarChar).SqlValue = newUser.firstname;\n                        command.Parameters.Add(\"@lastname\", SqlDbType.NVarChar).SqlValue = newUser.lastname;\n                        command.Parameters.Add(\"@password\", SqlDbType.NVarChar).SqlValue = newUser.password;\n\n                        string salt = CreateSalt(20);\n                        string passwordSalt = CreatePasswordHash(newUser.password, salt);\n\n                        command.Parameters.Add(\"@passwordsalt\", SqlDbType.NVarChar).SqlValue = passwordSalt;\n                        command.Parameters.Add(\"@passwordquestion\", SqlDbType.NVarChar).SqlValue = \"test\";\n                        command.Parameters.Add(\"@passwordanswer\", SqlDbType.NVarChar).SqlValue = \"test\";\n                        command.Parameters.Add(\"@email\", SqlDbType.NVarChar).SqlValue = newUser.email;\n                        command.Parameters.Add(\"@CurrentTimeUtc\", SqlDbType.DateTime).SqlValue = DateTime.UtcNow;\n\n\n                        switch (newUser.isactive)\n                        {\n                            case true:\n                                command.Parameters.Add(\"@isapproved\", SqlDbType.TinyInt).SqlValue = 1;\n                                break;\n                            case false:\n                                command.Parameters.Add(\"@isapproved\", SqlDbType.TinyInt).SqlValue = 0;\n                                break;\n                        }\n\n                        switch (newUser.alfConnect)\n                        {\n                            case true:\n                                command.Parameters.Add(\"@Connect\", SqlDbType.TinyInt).SqlValue = 1;\n                                break;\n                            case false:\n                                command.Parameters.Add(\"@Connect\", SqlDbType.TinyInt).SqlValue = 0;\n                                break;\n                        }\n\n                        switch (newUser.alfIntelligence)\n                        {\n                            case true:\n                                command.Parameters.Add(\"@Intelligence\", SqlDbType.TinyInt).SqlValue = 1;\n                                break;\n                            case false:\n                                command.Parameters.Add(\"@Intelligence\", SqlDbType.TinyInt).SqlValue = 0;\n                                break;\n                        }\n\n                        switch (newUser.brad)\n                        {\n                            case true:\n                                command.Parameters.Add(\"@rad\", SqlDbType.TinyInt).SqlValue = 1;\n                                break;\n                            case false:\n                                command.Parameters.Add(\"@rad\", SqlDbType.TinyInt).SqlValue = 0;\n                                break;\n                        }\n\n                        command.Parameters.Add(\"@ApplicationName\", SqlDbType.NVarChar).SqlValue = \"bradlink\";\n                        command.Parameters.Add(\"@Group\", SqlDbType.NVarChar).SqlValue = newUser.group_name;\n                        int rowsCreated = command.ExecuteNonQuery();\n\n\n                        if (rowsCreated &gt; 0)\n                        {\n                            outcome.Add(\"New user created successfully.\");\n                            foreach (SqlParameter p in command.Parameters)\n                            {\n                                outcome.Add(p.Value.ToString());\n                            }\n                        }\n\n                    }\n                }\n            }\n            catch (Exception ex)\n            {\n                List&lt;string&gt; error = new List&lt;string&gt;();\n                error.Add(\"Error creating new user. Check error message for more details.\");\n                error.Add(ex.Message);\n            }\n            return outcome;\n        }\n    }\n}\n</code></pre>\n\n<p><strong>My view for form submission</strong></p>\n\n<pre><code>&lt;!-- Declare model to be used for view --&gt;\n@model UserManager.Models.vw_UserManager_Model_Add_Users \n@{\n    ViewBag.Title = \"Create New User\";\n}\n&lt;h2&gt;\n    CreateUser&lt;/h2&gt;\n@using (Html.BeginForm())\n{\n    @Html.ValidationSummary(true)\n    &lt;fieldset&gt;\n        &lt;legend&gt;New User Details&lt;/legend&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(Model =&gt; Model.salutation)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; Model.salutation)\n            @Html.ValidationMessageFor(model =&gt; Model.salutation)\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(Model =&gt; Model.firstname)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; Model.firstname)\n            @Html.ValidationMessageFor(model =&gt; Model.firstname)\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(Model =&gt; Model.lastname)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; Model.lastname)\n            @Html.ValidationMessageFor(model =&gt; Model.lastname)\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(Model =&gt; Model.password)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; Model.password)\n            @Html.ValidationMessageFor(model =&gt; Model.password)\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(Model =&gt; Model.email)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; Model.email)\n            @Html.ValidationMessageFor(model =&gt; Model.email)\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(Model =&gt; Model.isactive)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; Model.isactive)\n            @Html.ValidationMessageFor(model =&gt; Model.isactive)\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.Label(\"Group Name\")\n            &lt;!-- GroupName --&gt;\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; Model.group_name, new { ID = \"group_name\" })\n            @Html.ValidationMessageFor(model =&gt; Model.group_name)\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.Label(\"Subscription Options\")\n            &lt;!-- GroupName --&gt;\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.Label(\"Connect\")\n            @Html.CheckBoxFor(Model =&gt; Model.Connect)\n            @Html.Label(\"ALF Intelligence\")\n            @Html.CheckBoxFor(Model =&gt; Model.Intelligence)\n            @Html.Label(\"BRAD\")\n            @Html.CheckBoxFor(Model =&gt; Model.rad)\n        &lt;/div&gt;\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Create\" onclick=\"return submitWith();\"/&gt;\n            &lt;span id=\"validationMessage\"&gt;&lt;/span&gt;\n        &lt;/p&gt;\n    &lt;/fieldset&gt;\n\n    &lt;div&gt;\n        @Html.ActionLink(\"Back to List\", \"Index\")\n    &lt;/div&gt;\n}\n\n&lt;script type=\"text/javascript\"&gt;\n// Count checkboxes that are checked.\n    function submitWith() {\n        var checkedCount = $(\"input:checked\").length; \n        var valid = checkedCount &gt; 0;\n        if (!valid) {\n            $('#validationMessage').html('You must select at least one option');\n        }\n        return valid;\n    }\n&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        $(\"#group_name\").autocomplete('@Url.Action(\"LookUpGroupName\")', // Call LookUpGroupName ActionResult in UserManager Controller\n        {\n        dataType: 'json',\n        parse: function (data) {\n            var rows = new Array();\n            for (var i = 0; i &lt; data.length; i++) {\n                rows[i] = {\n                    data: data[i],\n                    value: data[i].group,\n                    result: data[i].group\n                }\n            }\n            return rows;\n        },\n        formatItem: function (row, i, max) {\n            return row.group;\n        },\n        width: 300,\n        highlight: false,\n        multiple: false\n    }); // End of autocomplete\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>Any advice for handling this? Thanks</p>\n"},{"tags":["sql","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13234449,"title":"Displaying SQL view with Left Outer Join in MVC3","body":"<p>I'm using a simple view which is a left outer join on two tables to get the CATEGORY name that each FEE would fall under and group them for display.  When I simply run the view and iterate through the items it repeats the items like it isn't using the same view.  </p>\n\n<pre><code>    @foreach (var category in Model.FeeScheduleRates())\n{\n    &lt;tr&gt;&lt;td colspan=\"2\"&gt;@category.Category&lt;/td&gt;&lt;/tr&gt;\n    foreach (var item in Model.FeeScheduleRates())\n    {                                  \n\n    &lt;tr&gt; \n        &lt;td&gt;@item.Fee_Title - @item.Description&lt;/td&gt;\n        &lt;td&gt;@item.Amount&lt;/td&gt;                                        \n    &lt;/tr&gt;\n    }                                   \n}\n</code></pre>\n\n<p>So I changed my approach to a while loop for the second set of items, but that brought on OUT OF MEMORY errors and doesn't seem to work.  </p>\n\n<pre><code>@foreach (var category in Model.FeeScheduleRates())\n{   \n    &lt;tr&gt;&lt;td colspan=\"2\"&gt;@category.Category&lt;/td&gt;&lt;/tr&gt;\n    var cid = category.Cat_ID;                             \n    while (category.Cat_ID == cid)\n    {\n         &lt;tr&gt; \n            &lt;td&gt;@category.Fee_Title - @category.Description&lt;/td&gt;\n            &lt;td&gt;@category.Amount&lt;/td&gt;                                        \n        &lt;/tr&gt;       \n    }                            \n}\n</code></pre>\n\n<p>So the questions is, how to iterate through a view and group the items into their categories, displaying the category only once></p>\n\n<p>I've gone back to the drawing board and using this:</p>\n\n<pre><code>                             @foreach (var category in Model.FeeScheduleRates().Distinct())\n                            {\n                                &lt;tr&gt;&lt;td colspan=\"2\"&gt;@category.Category&lt;/td&gt;&lt;/tr&gt;\n                                foreach (var item in Model.FeeScheduleRates().Where(i=&gt;i.Cat_ID == category.Cat_ID))\n                                {                               \n                                    &lt;tr&gt; \n                                        &lt;td&gt;@item.Fee_Title - @item.Description&lt;/td&gt;\n                                        &lt;td&gt;@item.Amount&lt;/td&gt;                                        \n                                    &lt;/tr&gt;\n                                }                                   \n                            }\n</code></pre>\n\n<p>Have experienced some some form of success in that the categories are appearing as rows and then items beneath.  The funny thing is, it still just repeats the same item as many times as their are records matching that category.  I\"m still curious why it isn't iterating through the items properly and giving me each Fee_Title and Description.\nExample:</p>\n\n<p>`FREE Services</p>\n\n<p>Bank-to-Bank (B2B) Transfer - funds into FCU    FREE<br />\nBank-to-Bank (B2B) Transfer - funds into FCU    FREE<br />\nBank-to-Bank (B2B) Transfer - funds into FCU    FREE<br />\nBank-to-Bank (B2B) Transfer - funds into FCU    FREE<br />\nBank-to-Bank (B2B) Transfer - funds into FCU    FREE<br />\nBank-to-Bank (B2B) Transfer - funds into FCU    FREE<br />\nBank-to-Bank (B2B) Transfer - funds into FCU    FREE<br />\nBank-to-Bank (B2B) Transfer - funds into FCU    FREE<br />\nBank-to-Bank (B2B) Transfer - funds into FCU    FREE<br />\nBank-to-Bank (B2B) Transfer - funds into FCU    FREE<br />\nBank-to-Bank (B2B) Transfer - funds into FCU    FREE<br />\nBank-to-Bank (B2B) Transfer - funds into FCU    FREE<br />\nBank-to-Bank (B2B) Transfer - funds into FCU    FREE<br />\nSavings and Money Market Account<br />\nAutomatic transfer from Savings -   $2<br />\nAutomatic transfer from Savings -   $2<br />\nAutomatic transfer from Savings -   $2<br />\nAutomatic transfer from Savings -   $2<br />\nAutomatic transfer from Savings -   $2<br />\nAutomatic transfer from Savings -   $2<br />\nAutomatic transfer from Savings -   $2`</p>\n\n<p>So there are 12 items in the DB under the category free and 7 under the Savings and Money Market Account.  It just repeats the first one of each category as many times as there are records in the category.  I do get it!!!</p>\n"},{"tags":["javascript","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3388,"score":0,"question_id":5110213,"title":"on clicking a button, opening a streamed page in new window or tab","body":"<p>I am using .NET4 MVC3 VS2010. We are using ABCpdf to convert html to pdf and stream it to the browser.  The problem is that I need to figure out a way for the pdf be opened in a new window or tab.  I have read a bunch of posts on similar issue, but could find nothing to help with this specific case. \nUpon clicking a button (not a link) on a page, a controller action takes care of creating a memory stream from the html for that very page and then converts it to pdf and sends it to the browser.</p>\n\n<p>Code in the view for that page:\n            var pdfUrl = String.Format(\"window.location.href = '{0}';\",          Html.BuildUrlFromExpressionForAreas(c => c.GeneratePdf(myUrl)));\n            }\n            @(Html.Button(\"btnPdf\", \"Generate PDF\", HtmlButtonType.Button, pdfUrl)))</p>\n\n<p>Code in MyController action:\n        public ActionResult GeneratePdf(string url)\n            Doc pdfDoc = new Doc();\n            int docId;\n            MemoryStream outputStream = new MemoryStream();</p>\n\n<p>and a bunch of other code for pdf conversion..... then:\n            byte[] pdfData = pdfDoc.GetData();\n            outputStream.Write(pdfData, 0, pdfData.Length);\n            outputStream.Position = 0;\n            return new FileStreamResult(outputStream, \"application/pdf\");\n        }</p>\n\n<p>It works fine but the pdf is displayed in the same window/tab.  How can I stream the data to a new window or tab in the browser?\nI am a newbee and would appreciate detailed help.\ntarget property does not work for this case.  I could not work window.open into the view code for the button and I am not sure that would do the trick either.\nThanks in advance</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc-3","encryption"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13196837,"title":"Conditional encryption of file configuration file ASP.NET","body":"<p>I have a question.\nI have a solution with MVC3 progect. I need some configuration of my project for conditional encryption of config files.\nConditions:\nIf I build a debug version - file is not encrypted.\nIf I build a release version - file is encrypted.</p>\n\n<p>I find this <a href=\"http://weblogs.asp.net/scottgu/archive/2006/01/09/434893.aspx\" rel=\"nofollow\">article</a>  but I don't know how it can be automated.\nIs there some adjustments of solution properties in VS2010 needed or other?</p>\n\n<p>I want to have 2 related configs. If I made changes in non encrypted config, then after release build I receive new encrypted config with all applied changes.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["jquery","asp.net-mvc","ajax","jquery-ui","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1063,"score":0,"question_id":4844824,"title":"asp.net MVC- How to get jQuery working after ajax calls","body":"<p>Ok getting my feet wet with mvc. I am trying to build a user profile type page. The page is made up of several sections, each loaded via a partial view.</p>\n\n<p>I want to be able to edit each section individually inside of an jQuery-UI modal dialog. I have this all working properly(incduding loading the Edit views via ajax into the modal and submitting the changes.)</p>\n\n<p>My problem is that after any ajax call my jQuery-UI dialogs stop working so I am unable to close or open a dialog. </p>\n\n<p>I can, of course, fix things like button clicsk with the .live method but I cant figure out the best way to get the jQuery-UI items to continue working.</p>\n\n<p>What is the best way to go about this? I guess I am confused as to what happens to previously loaded jQuery plugins after an ajax call. Should I be able to reference elements on my ajax loaded content from my main page?</p>\n\n<p><strong>EDIT:</strong>\nOk...heres some code to show whats happening....</p>\n\n<p>user click the edit button on the user info section</p>\n\n<pre><code>$('#editInfo').live(\"click\", function () {\n        dialogInit(450, 550, 'User Information');\n        $('#dialog').dialog('open')\n        $.ajax({\n            type: 'GET',\n            url: '../info/edit',\n            data: {},\n            success: function (response) {\n                $('#dialog').html(response); //loads the partial edit view into the dialog div...works fine to here.\n\n            }\n        });\n        return false;\n    });\n</code></pre>\n\n<p>After this happens I have a modal on the screen with a save button. When the save button is clicked I post my ajax form which calls this JS function on success...</p>\n\n<pre><code>function infoUpdate(response) {\n    dialogInit(450, 550, 'User Information');\n    $('#dialog').dialog('close');\n    $('#info').html(response);\n}\n</code></pre>\n\n<p>This loads the new User info partial view into the appropriate div on the main page...works fine...</p>\n\n<p>The problem here is that the dialog is not closed...so the reference to it seems to be lost even though I am reinitializing it with my dialogInit function...which looks like this...</p>\n\n<pre><code>function dialogInit(height, width, title) {\n    $('#dialog').dialog({\n        autoOpen: false,\n        modal: true,\n        draggable: false,\n        resizable: false,\n        height: height,\n        width: width,\n        title: title\n    });\n}\n</code></pre>\n\n<p><strong>EDIT 2:</strong></p>\n\n<p>The above code also causes my ajax form to be posted multiple times...an additional time every time I click the submit button...not good</p>\n"},{"tags":["javascript","asp.net-mvc-3","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":89,"score":1,"question_id":11355569,"title":"disabling /deleting Close(X) button of ajax dailog form","body":"<p>i am calling ajax to load partial view on a div on submission of form.it work fine.partial view load correctly at define div.now i need to delete/disable close(X) button of that ajax dailog popup .how can i do that?</p>\n"},{"tags":["asp.net",".net","asp.net-mvc","asp.net-mvc-3"],"answer_count":4,"favorite_count":8,"up_vote_count":17,"down_vote_count":0,"view_count":955,"score":17,"question_id":10498135,"title":"Last-Modified Header in MVC","body":"<p>I have recently come across the Last-Modified Header.  </p>\n\n<ul>\n<li>How and where can I include it in MVC? </li>\n<li>What are the advantages of including it?</li>\n</ul>\n\n<p>I want an example how last modified header can be included in an mvc project, for static pages and database queries as well?</p>\n\n<p>Is it different from outputcache, if yes how? </p>\n\n<p>Basically, I want the browser to clear the cache and display the latest data or pages automatically, without the need for the user to do a refresh or clearing the cache.</p>\n"},{"tags":["asp.net-mvc-3","unit-testing","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13247434,"title":"db.Refresh(System.Data.Objects.RefreshMode.StoreWins, db.Users);","body":"<p>I can't figure out why I'm receiving an error in my <code>db.Refresh(System.Data.Objects.RefreshMode.StoreWins, db.Users);</code> line.</p>\n\n<pre><code>Error   1   'TaskMgr.Models.taskModelContainer' does not contain a definition for 'Refresh' and no extension method 'Refresh' accepting a first argument of type 'TaskMgr.Models.taskModelContainer' could be found (are you missing a using directive or an assembly reference?)\n</code></pre>\n\n<p>Here's my test method where the error exists:</p>\n\n<pre><code>[TestMethod]\n    public void TestMethod1()\n    {\n        try\n        {\n\n        taskModelContainer db = new taskModelContainer();\n\n        string Username = \"789zxc@t.cm\";\n        string Password = \"abc123rt\";\n        string Role = \"User\";\n        string Name = \"lykers\";\n        int subsiteID = 1;\n\n        TaskMgr.Models.User UserEntity = new TaskMgr.Models.User();\n\n        UserEntity.Username = Username;\n        UserEntity.Password = Password;\n        UserEntity.Role = Role;\n        UserEntity.Name = Name;\n        UserEntity.subsiteID = subsiteID;\n\n        UserController User = new UserController();\n\n        ActionResult result = User.Create(UserEntity);\n\n        int id = Convert.ToInt32(User.ViewBag.id);\n        User Users = db.Users.Single(e =&gt; e.userID == id);\n\n        Assert.AreEqual(UserEntity.Username, Users.Username);\n        Assert.AreEqual(UserEntity.Password, Users.Password);\n        Assert.AreEqual(UserEntity.Role, Users.Role);\n        Assert.AreEqual(UserEntity.Name, Users.Name);\n        Assert.AreEqual(UserEntity.subsiteID, Users.subsiteID);\n\n       //Edit\n        var qry = from e in db.Users orderby e.userID descending select e.userID;\n        int eID = qry.First();\n\n\n\n        UserEntity.Username = \"456zxc@asj.v\";\n        UserEntity.Password = \"asc45k\";\n        UserEntity.Role = \"Administrator\";\n        UserEntity.Name = \"sfscf\";\n        UserEntity.subsiteID = 3;\n\n        //get latest\n        db.Refresh(System.Data.Objects.RefreshMode.StoreWins, db.Users);\n        //db.Load(MergeOption.OverwriteChanges);\n\n\n        ActionResult result2 = User.Edit(UserEntity);\n\n\n        int id1 = Convert.ToInt32(User.ViewBag.id);\n        User Users1 = db.Users.Single(e =&gt; e.userID == id1);\n\n        Assert.AreEqual(UserEntity.Username, Users1.Username);\n        Assert.AreEqual(UserEntity.Password, Users1.Password);\n        Assert.AreEqual(UserEntity.Role, Users1.Role);\n        Assert.AreEqual(UserEntity.Name, Users1.Name);\n        Assert.AreEqual(UserEntity.subsiteID, Users1.subsiteID);\n\n        //delete\n\n        int userID = eID;\n\n        ActionResult result3 = User.DeleteConfirmed(UserEntity.userID);\n\n        var del = from e in db.Users where e.userID == UserEntity.userID select e;\n        var delete = del.Count();\n\n        Assert.AreEqual(0, delete);\n\n        }\n</code></pre>\n\n<p>The code does unit test for create, edit, delete controller. I wanted to refresh my database so that the <code>Assert.AreEqual</code> below Edit will not get an exception/error. Any ideas about the issue?</p>\n"},{"tags":["asp.net","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":23,"score":-2,"question_id":13247412,"title":"Basic Menu Creation in ASP.Net MVC Application Using JQuery,HTML5","body":"<p>Creating the Basic Menu in Asp.net MVC Application using jQuery,HTML5.</p>\n"},{"tags":["asp.net-mvc-3","comet","long-polling"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13234601,"title":"File attachment breaks long time polling","body":"<p>We have a long time polling solution in our app using MVC Async controllers and jQuery.\nThis has worked well, but we also have a PDF link on one of our pages which calls a MVC controller that returns a request with attachment and mime type like</p>\n\n<pre><code>HTTP/1.1 200 OK\nServer: ASP.NET Development Server/10.0.0.0\nDate: Mon, 05 Nov 2012 14:48:44 GMT\nX-AspNet-Version: 4.0.30319\nX-AspNetMvc-Version: 3.0\nContent-Disposition: attachment; filename=xxx-2012-11-05-ID36.pdf\nCache-Control: private, s-maxage=0\nContent-Type: application/pdf\nContent-Length: 61015\nConnection: Close\n</code></pre>\n\n<p>I can see using Fiddle that this will break the long time pollíng request. The link looks like this</p>\n\n<pre><code>&lt;a class=\"icon-small pdf\" title=\"Download PDF\" href=\"/XXX/File?format=PDF\"&gt;&lt;/a&gt;\n</code></pre>\n\n<p><code>target=\"_blank\"</code> on the anchor will solve it, since the Content-Disposition is set it should work anyway?</p>\n"},{"tags":["c#","sql-server","asp.net-mvc-3","visual-web-developer","dataprovider"],"answer_count":7,"favorite_count":4,"up_vote_count":26,"down_vote_count":0,"view_count":24421,"score":26,"question_id":6508516,"title":"ASP.NET MVC 3 - Unable to find the requested .Net Framework Data Provider","body":"<p><em><strong>Background-info:</em></strong>  </p>\n\n<p>I'm using Microsoft Visual Web Developer 2010 Express.<br>\nInfo about my (lack of) experience: the problem occured within the first tutorial that I'm trying to work through.   </p>\n\n<p>Some additional-info:</p>\n\n<ul>\n<li>I'm comfortable with C#, Postgres, Rails (so MVC &amp; Web-apps are not new to me)</li>\n<li>I have <strong>no</strong> experience with ASP.NET or SQL Server  </li>\n</ul>\n\n<p><em><strong>Problem Description:</em></strong></p>\n\n<p>I'm trying to following exactly the steps from the <a href=\"http://www.asp.net/mvc/tutorials/getting-started-with-mvc3-part1-cs\" rel=\"nofollow\">\"Intro to ASP.NET MVC 3\"</a>-tutorial and I'm running into a problem at <a href=\"http://www.asp.net/mvc/tutorials/getting-started-with-mvc3-part5-cs\" rel=\"nofollow\">the first step from part 5 - Adding the MoviesController: </a></p>\n\n<p>When I'm trying to add the \"MoviesController\" with the exact settings that are shown in the tutorial and click 'Add' I get the following error:</p>\n\n<blockquote>\n  <p>\"Unable to retrieve metadata for\n  MvcMovie.Models.Movie. <strong>Unable to\n  find the requested .Net Framework Data\n  Provider.</strong> It may not be installed.\"</p>\n</blockquote>\n\n<p>Google gave a ton of results when searching for the phrase \"Unable to find the requested .Net Framework Data Provider\", but nothing has solved the problem so far.  </p>\n\n<p><em><strong>What I've tried:</em></strong></p>\n\n<p>I think SQL-Server was not installed so I installed it from the Visual-Studio Express ISO- got an error then I've run a repair from the ISO and it claimed that all 15 points including SQL Server Express repair &amp;.NET 4 Framework went through successfully.</p>\n\n<p>I've run the The_.NET_Framework_Setup_Verification_Tool which succeeded for everything.\n<a href=\"http://blogs.msdn.com/b/astebner/archive/2008/10/13/8999004.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/astebner/archive/2008/10/13/8999004.aspx</a></p>\n\n<p>After the mentioned (re-)installing &amp; repairing I recreated the Project and followed every step as described in the tutorial and got the same error. </p>\n\n<p>I found that I should look for DbProviderFactories in machine.config,</p>\n\n<p>The root-Web.config of the Project has the following entries</p>\n\n<pre><code>  &lt;connectionStrings&gt;\n    &lt;add name=\"MovieDBContext\"\n     connectionString=\"Data Source=|DataDirectory|Movies.sdf\"\n     providerName=\"System.Data.SqlServerCe.4.0\"/&gt;\n</code></pre>\n\n<p>My machine config-file has only one DbProviderFactories entry:</p>\n\n<pre><code>&lt;DbProviderFactories&gt;\n&lt;add name=\"Microsoft SQL Server Compact Data Provider\" invariant=\"System.Data.SqlServerCe.3.5\" description=\".NET Framework Data Provider for Microsoft SQL Server Compact\" type=\"System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=3.5.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91\"/&gt;&lt;/DbProviderFactories&gt;\n</code></pre>\n\n<p>then I found the following quote</p>\n\n<blockquote>\n  <p>\"we have changed the way\n  DbProviderFactories.GetFactoryClasses()\n  determines the framework providers in\n  VS2010. They are no longer listed in\n  the machine.config file. \"</p>\n</blockquote>\n\n<p>from <a href=\"http://social.msdn.microsoft.com/Forums/en-ZA/adodotnetdataproviders/thread/d79129c4-ae05-4c45-8997-bd90f5765a3a\" rel=\"nofollow\">http://social.msdn.microsoft.com/Forums/en-ZA/adodotnetdataproviders/thread/d79129c4-ae05-4c45-8997-bd90f5765a3a</a></p>\n\n<p><em><strong>Question:</em></strong>  </p>\n\n<p><strong>So perhaps this is the wrong direction and since I have no clue what to try next, what steps should I take to investigate &amp; solve this problem?</strong><br>\nBtw. I have postgres installed, so if using postgres instead of SQL-server would be an easy solution let me know. For my own projects I would want to use a different DB anyway (probably postgres), but for now I would just want to be able to get successfully through the first and seemingly simple tutorial I've tried.</p>\n"},{"tags":["c#","asp.net-mvc-3","object","inheritance","model"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13246001,"title":"How to copy objects of Different classes which has same attributes?","body":"<p>Good day friends!</p>\n\n<p>I have 2 model classes say <strong>Page</strong> and <strong>PageHistory</strong>. both contains same attributes. Here whenever I edit a <strong>Page</strong> object, I need to update <strong>PageHistory</strong> object with same property values. </p>\n\n<p>I tried something like this:</p>\n\n<pre><code>[HttpPost]\n        [ValidateInput(false)]\n        public ActionResult Edit(Page page, FormCollection frm)\n        {\n            try\n            {\n                if (ModelState.IsValid)\n                {\n                    page.IsPublished = !string.IsNullOrEmpty(frm[\"BtnPublish\"]);\n                    _db.Entry(page).State = EntityState.Modified;\n                    _db.SaveChanges();\n\n                    //Add updated page in hitory, if something is modified\n                    PageHistory ph=new PageHistory();\n                    ph.ID=page.ID\n                    // likewise all attributes.....\n                    // after all values are assigned, save a History object\n                    ph.SaveChanges();\n\n                    return RedirectToAction(\"Subpages\", new { id = page.ParentId });\n                }\n            }\n            catch (DataException)\n            {\n                //Log the error (add a variable name after DataException)\n                ModelState.AddModelError(\"\", \"Unable to save changes. Try again, and if the problem persists see your system administrator (http://support.mysite.com).\");\n            }\n            return View(page);\n        }\n</code></pre>\n\n<p>It is working, But this is not so optimized, is there any alternatives available to copy objects? and one more question is, Is it possible to <strong>Inherit</strong> the <strong>PageHistory</strong> class from <strong>Page</strong> class, because both contains same attributes? which one is the best approach?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13241474,"title":"How to run/trigger javascript in controller action method?","body":"<p>I am using .Net 4.0 and a lot of solution currently on the Internet are not working, for example non-exist library.</p>\n\n<p>The whole story is: I have a main view, and within it there is 1 iframe. By clicking on the [submit] button on main view, it will trigger its own POST action as well as I make it trigger the POST of iframe by using javascript as follows:</p>\n\n<pre><code>function TriggerIframeAction() {\n    var iframe = document.getElementById(\"myIframe\");\n    var iframeForm = iframe.contentWindow.document.getElementById(\"myIframeForm\");\n    iframeForm.submit();\n}\n</code></pre>\n\n<p>However I need to make sure main frame's post always runs BEFORE iframe's post, so I am thinking to let main frame's action to trigger that JS. </p>\n\n<p>I know Ajax.BeginForm(...OnSuccess...) may help. However it seems just mean the connection is successfully? If I put my validation code in main frame's action &amp; make ModelState.IsValid = false, \"OnSuccess\" (so the iframe post) will still be executed which is not what I want ....</p>\n\n<p>Correct me if I am wrong.</p>\n"},{"tags":["asp.net-mvc-3","mvc","reference","runtime-error",".net-assembly"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13243270,"title":"MVC 3 assembly conflict How to","body":"<p>Every time I download some open source or paid MVC3 app I get some assembly conflicts, ie: missing assemblies, wrong versions etc. So I figure I should ask a more general question:</p>\n\n<p>In a typical project you have a folder called References and all assemblies seem to be in that folder, with their version numbers and Copy To Local options etc.</p>\n\n<p>However out of the 10-20 references in that folder I often find just a few in the web.config.</p>\n\n<p>I the latest case of this annoying mixup I have in web.config:</p>\n\n<pre><code>&lt;compilation debug=\"false\" targetFramework=\"4.0\"&gt;\n  &lt;assemblies&gt;\n    &lt;add assembly=\"System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;add assembly=\"System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;add assembly=\"System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;add assembly=\"System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;add assembly=\"System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n  &lt;/assemblies&gt;\n&lt;/compilation&gt;\n</code></pre>\n\n<p>I get an error that project trying to load System.Web.Helpers, Version=1.0.0.0 - it's not found. </p>\n\n<p>In the References folder the System.Web.Helpers referenced is version 2.0.0 and it's not possible to change this version number as it's greyed out. Changing to Specific Version doesn't change anything.</p>\n\n<p><strong>Question:</strong></p>\n\n<p>Why are there the 4 references in Web.config? Why not just the references folder? </p>\n\n<p>Why do i often find <em>a partial number of assembly tags</em> in web.config instead of none or alternatively  all the references seen under the References project folder?</p>\n\n<p>Thanks,</p>\n"},{"tags":["asp.net-mvc-3","logging","exception-handling","attributes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13244346,"title":"How to write a LogExceptionAttribute for MVC3 Site?","body":"<p>In each action, I write:</p>\n\n<pre><code>public ActionResult Foo()\n{\n    try\n    {\n        // Do something\n    }\n    catch(Exception ex)\n    {\n        Logger.Error(\"Foo()\", ex);\n    }\n    ...\n}\n</code></pre>\n\n<p>I know MVC3 has the ability to \"RegisterGlobalFilters\" in Global.asax, so I want to write a custom LogExceptionAttribute. which will:</p>\n\n<ol>\n<li><p>Log information of <strong>which Action</strong> cause <strong>what Exception</strong>. calling my Logger API:</p>\n\n<p>Logger.Error(string actionName, Exception ex)</p></li>\n<li><p>throw the exception again. so that CustomError in web.config will show user error page.</p></li>\n</ol>\n\n<p>How to implement this?</p>\n"},{"tags":["asp.net-mvc-3","telerik-mvc","telerik-window"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13244431,"title":"Telerik MVC3 Window showing Image or Pdf","body":"<p>I am using Telerik Window in my MVC3 project. I have bulk of files (like .Png, .JPEG, .Pdf etc.) in my local system. I wanted to show these files with Telerik Window. I have no idea that how can i do this. I need suggestions to do this. Please help me for this.</p>\n\n<p>I have a Telerik Window code like this.</p>\n\n<p><strong>View.cshtml</strong></p>\n\n<pre><code>&lt;div id=\"upload_win\"&gt;\n@{Html.Telerik().Window().Visible(false)\n        .Name(\"File\").ClientEvents(cli =&gt; cli.OnClose(\"OnClose\"))\n        .Modal(true)\n         // .LoadContentFrom(\"action\",\"Controller\")\n        .Scrollable(false)\n        .Resizable()\n        .Draggable(true)\n        .Width(870)\n        .Height(500)\n        .Render();\n}\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13243548,"title":"How to pass argument to ASP.NET MVC 3 controller that is called via onclick attribute of a html button?","body":"<p>I have the following View code (ASP:NET MVC 3):</p>\n\n<pre><code>@using(Html.BeginForm()){\n@Html.ValidationSummary(true)\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;th&gt;\n            City\n        &lt;/th&gt;\n        &lt;th&gt;\n            Hotel\n        &lt;/th&gt;\n        &lt;th&gt;\n            Room name\n        &lt;/th&gt;\n        &lt;th&gt;\n            Number of beds\n        &lt;/th&gt;\n        &lt;th&gt;\n            Price per night\n        &lt;/th&gt;\n\n        &lt;th&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n\n    &lt;tr&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(x=&gt;Model.SelectedRoom.Hotel.City.Name)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(x =&gt; Model.SelectedRoom.Hotel.Name)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(x =&gt; Model.SelectedRoom.Name)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(x =&gt; Model.SelectedRoom.NumberOfBeds)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(x =&gt; Model.SelectedRoom.PricePerNight)\n        &lt;/td&gt;\n\n    &lt;/tr&gt;\n&lt;/table&gt;\n            &lt;input type=\"hidden\" name=\"RoomID\" value=\"@Model.SelectedRoom.RoomID\" id=\"RoomID\" /&gt;\n            &lt;br /&gt;\n            &lt;br /&gt;\n            &lt;p&gt;\n                From: @Html.TextBoxFor(m=&gt;m.DateOne, new {@class=\"datepicker1\", @readonly=\"readonly\" }) \n                @Html.ValidationMessageFor(m=&gt;m.DateOne)\n\n                To: @Html.TextBoxFor(m =&gt; m.DateTwo, new { @class = \"datepicker2\", @readonly = \"readonly\" })\n                @Html.ValidationMessageFor(m=&gt;m.DateTwo)\n\n            &lt;/p&gt;\n            &lt;p&gt;\n                Total cost : @Html.TextBoxFor(m=&gt;m.TotalCost, new {@class=\"TotalAmount\", @readonly=\"readonly\" })\n            &lt;/p&gt;\n              &lt;br /&gt;\n           &lt;input type=\"button\" id=\"Reserve\" value=\"Confirm\" onclick = \"window.location.href='/Home/MakeReservation'+@Model\" /&gt;\n    }\n</code></pre>\n\n<p>Here is my Model definition for this View:</p>\n\n<pre><code>public class MakeReservationViewModel\n    {\n        BusinessLogic bl;\n\n        public MakeReservationViewModel() \n        {\n            bl = new BusinessLogic();\n        }\n\n        public Room SelectedRoom { get; set; }\n\n\n        [Required(ErrorMessage=\"Please select a starting date\")]\n        public DateTime DateOne { get; set; }\n\n        [Required(ErrorMessage = \"Please select an ending date\")]  \n        public DateTime DateTwo { get; set; }\n\n        public decimal TotalCost { get; set; }\n    }\n</code></pre>\n\n<p><strong>How to call *<em>MakeReservation</strong> controller action from above View by clicking on a button and setting it's onclick attribut to MakeReservation properly?</em>*\nHere is my Controller:</p>\n\n<pre><code>[HttpPost]\n    public ViewResult MakeReservation(MakeReservationViewModel mrvm)\n    {\n        if (ModelState.IsValid)\n        {\n\n        }\n\n        return View();\n    }\n</code></pre>\n\n<p>This is the error I ger:\nObject reference not set to an instance of an object.\non this line:\n\n<strong>How to make model accept hidden field?</strong></p>\n\n<p>SOLVED.\nI added :</p>\n\n<pre><code>@Html.TextBoxFor(m =&gt; m.SelectedRoom.RoomID, new {@class=\"RoomID\", @hidden=\"hidden\" })\n</code></pre>\n\n<p>instead of previous way that used not strongly typed property.</p>\n"},{"tags":["vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":303,"score":0,"question_id":8536262,"title":"Putting a hidden column in WebGrid MVC3","body":"<p>I want to put some hidden columns in the Webgrid. there a few key columns in my output which are not to be shown to the users but I need them to be present in the webgrid. I require these columns in the grid because when a user selects the row in the grid and clicks on modify I need those keys to get the details of selected columns.Can you please tell me how can I have a hidden column in the webgrid?(razor vb.net syntax please)</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","reporting-services","reportingservices-2005"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":374,"score":0,"question_id":8059687,"title":"Using SSRS Report in MVC razor","body":"<p>Can any one tell whether MVC razor supports report viewer for rendering reports from ssrs.If yes then how any code snippet would help.\nI have seen on internet that there is workaround to include aspx view engine for rendering report ,but we don't want to use aspx view engine.</p>\n"},{"tags":["c#","asp.net-mvc-3","visual-studio-2010"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13237705,"title":"How can I change the model without having to delete the database?","body":"<p>If I make any change in the model, now I have to delete and recreate the database. What do I resolve?</p>\n"},{"tags":["c#","asp.net-mvc-3","repository","membership"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13241561,"title":"How do I expose the Authentication Token in MVC3","body":"<p>I currently have my Authentication Token in my Base Controller.  Because of this and using the Membership API, I am having to call all my Repos in my Controllers.  I would like to have exposure to these repos in my models, but need this token available.  </p>\n\n<p>Is there a place I can set this token that will be updated on each request without affecting all users?  Is there a way to expose this only enough that my View Models can access this in some base model and call repos with it?</p>\n\n<p>Here's my current code in the Base Controller:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>/// &lt;summary&gt;\n/// Provide authentication credentials for the current user.\n/// &lt;/summary&gt;\nprotected IToken AuthenticatedUserToken\n    {\n        get\n        {\n            var userCred = (UsersCredential) this.Session [GlobalContext.UserCredentialsSessionKey];\n            if ( userCred != null )\n            {\n                return userCred.UsersToken;\n            }\n            if (Request.IsAuthenticated)\n            {\n                var name = HttpContext.User.Identity.Name;\n                var repository = new UserRepository(GlobalContext.ProvisioningApiServiceBase,\n                                                               GlobalContext.WebServiceUserAuthenticationToken);\n                var usersCredential = new UsersCredential\n                {\n                    UsersName = name,\n                    UsersToken =\n                        repository.GetAuthenticationTokenForAuthenticatedUser(name)\n                };\n                Session[GlobalContext.UserCredentialsSessionKey] = usersCredential;\n                return usersCredential.UsersToken;\n            }                \n            return null;\n        }\n    }\n\nprotected RepositoryCollection _Repositories { get; set; }\nprotected RepositoryCollection Repositories\n    {\n        get\n        {\n            if (_Repositories == null)\n            {\n                _Repositories = new RepositoryCollection(this.AuthenticatedUserToken);\n            }\n            return _Repositories;\n        }\n    }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13242224,"title":"Getting value from DropDownList in MVC3.. better way than binding the ID to another field?","body":"<p>I am wondering if there is another way to express the following bit of code. The code works as expected, but I have an issue with how it defines my naming conventions.</p>\n\n<pre><code>//Model.cs:\n[DisplayName(\"Device Manufacturer\")]\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; DeviceManufacturer { get; set; }\npublic int SelectedManufacturerID { get; set; }\n\n//Model.ascx:\n&lt;%= Html.DropDownListFor(model =&gt; model.SelectedManufacturerID, new SelectList(Model.DeviceManufacturer, \"Key\", \"Value\"))%&gt;\n</code></pre>\n\n<p>Now, whenever the selected list item is changed -- the new value is stored in SelectedManufacturerID. I am able to receive the value in my controller like so:</p>\n\n<pre><code>int selectedID = model.SelectedDataCenterID;\n</code></pre>\n\n<p><strong>However,</strong> I am unhappy with the fact that MVC gives my select list the ID 'SelectedManufacturerID' when it is not an ID field -- it is a select list. Clearly this is occurring to support the binding to the SelectedManufacturerID field.</p>\n\n<p>If I wish to work with my select list client-side, I now have code such as:</p>\n\n<pre><code>$('#SelectedManufacturerID').change(function(){\n    console.log(\"OnSelectedIndexChanged!\");\n});\n</code></pre>\n\n<p>This jQuery is very unclear. There is no indication that SelectedManufacturerID is a select DOM element. It seems impossible to have proper naming conventions using the MVC conventions at the top of this post. Does anyone else feel this way? Do I have other options?</p>\n"},{"tags":["asp.net","json","asp.net-mvc-3","entity-framework","json.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13241404,"title":"Converting Entity Framework object to JSON (without object graph)","body":"<p>Suppose I have a object structure like this </p>\n\n<pre><code>Library 1 ---- 1+ Book 1 ---- 1+ Page\n</code></pre>\n\n<p>I want to serialize a json object of a book with an array of page objects.</p>\n\n<p>Using JSON.net serializer, I can get this to serialize without getting a circular reference, but the JSON still includes all of the properties of the book in each page, which includes data about the library...which can have data on other books which is a ton of noise.</p>\n\n<p>From the answer from this question - <a href=\"http://stackoverflow.com/questions/657939/serialize-entity-framework-objects-into-json\">Serialize Entity Framework objects into JSON</a>, I know that I can do generics, but is this really the only way? This just seems like a ton of extra work. Especially if for a Json result that is Book with and array of page objects in it.</p>\n\n<p>I am using Entity Framework 4.3.1 and Json.net 4.0.30319...</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13239948,"title":"Is there an @Html.ActionLink equivilent for HttpPost?","body":"<p>I have a table that I need to add links to. The links need to go to an HTTPPost actionResult on my controller. I have a huge list that the user needs to be allowed to click on the status, hit the controller and route to the appropriate page afterward. @Html.ActionLink is an HttpGet action. Is there an equivalent for a post?</p>\n\n<pre><code>  &lt;table class=\"table table-striped table-bordered\"&gt;\n        &lt;th&gt;Ssn&lt;/th&gt;\n        &lt;th&gt;State&lt;/th&gt;\n        &lt;th&gt;File Uploaded Date&lt;/th&gt;\n        &lt;th&gt;Claim Status&lt;/th&gt;\n        @foreach (var currentClaim in Model.CurrentClaims)\n        {\n        &lt;tr &gt;\n            &lt;td&gt;&lt;span name=\"Ssn\"&gt;@currentClaim.SSN&lt;/span&gt;&lt;/td&gt;\n            &lt;td&gt;@currentClaim.StateName&lt;/td&gt;\n            &lt;td&gt;@currentClaim.ClaimDate&lt;/td&gt;\n            &lt;td&gt;@Html.ActionLink(@currentClaim.ClaimStatus, \"SubmitClaim\", \"Claim\", FormMethod.Post, new ClaimInputModel { SSN = currentClaim.SSN, StateId = currentClaim.StateId })&lt;/td&gt;\n\n         &lt;/tr&gt;\n        }\n\n    &lt;/table&gt; \n</code></pre>\n\n<p>I tried using</p>\n\n<pre><code> @using(\"SubmitClaim\", \"Claim\", FormMethod.Post, new ClaimInputModel { SSN = currentClaim.SSN, StateId = currentClaim.StateId })\n {\n      &lt;button type=\"submit\" &gt;xxx&lt;/button&gt;\n }\n</code></pre>\n\n<p>I get an HttpCompiler error with this.</p>\n"},{"tags":["c#","asp.net-mvc-3","razor","entity"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":272,"score":0,"question_id":11638191,"title":"adding \"name\" attribute to CheckBoxFor","body":"<p>I am trying to add a \"name\" attribute to my <code>CheckBoxFor</code> and can't get it to work.  </p>\n\n<pre><code>@Html.CheckBoxFor(\nmodel =&gt; model.ProvidePracticalSuggestions, \nnew { @name = \"help_practicalSuggestions\" \n                })\n</code></pre>\n\n<p>Any idea what I am doing wrong here?</p>\n\n<p>Rendered HTML:</p>\n\n<pre><code>&lt;div&gt;\n      &lt;input data-val=\"true\" data-val-required=\"The Provide practical suggestions for implementing change, e.g. step-by-step best practices field is required.\" id=\"ProvidePracticalSuggestions\" name=\"ProvidePracticalSuggestions\" type=\"checkbox\" value=\"true\" /&gt;&lt;input name=\"ProvidePracticalSuggestions\" type=\"hidden\" value=\"false\" /&gt;\n       &lt;span class=\"field-validation-valid\" data-valmsg-for=\"ProvidePracticalSuggestions\" data-valmsg-replace=\"true\"&gt;&lt;/span&gt;\n       &lt;label for=\"ProvidePracticalSuggestions\"&gt;Provide practical suggestions for implementing change, e.g. step-by-step best practices&lt;/label&gt;\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["c#","jquery","ajax","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":79,"score":2,"question_id":13240128,"title":"Why is this value zero after ajax call finishes (asp.net mvc 3 and jQuery)?","body":"<p>Here is my ajax call:</p>\n\n<pre><code>  var totalCost = 0;\n    function GetTotalCost(start, end, rID) \n    {\n        $.ajax({\n            url: '@Url.Action(\"CalculateTotalcost\")',\n            type: 'POST',\n            data: JSON.stringify({ start:start, end:end, rID:rID}),\n            dataType: 'json',\n            processdata: false,\n            contentType: 'application/json; charset=utf-8',\n            success: function (data) { totalCost = data; }\n//            error: function (xhr, ajaxOptions, thrownError) { $('.datepicker1').datepicker(\"hide\"); },\n//            complete: function (x, y) { $('.datepicker1').datepicker(\"refresh\"); }\n        });\n    }\n</code></pre>\n\n<p>Here is my function from which I call ajax:</p>\n\n<pre><code> $('.datepicker2').datepicker({\n            dateFormat: 'dd/mm/yy',\n            firstDay: 1,\n            yearRange: '2012:2100',\n            beforeShowDay: function (date) {\n                var day = date.getDate();\n                if (day in alreadyTakenDays) {\n                    return [false, '', alreadyTakenDays[day]];\n                }\n                else return [true, 'IsActive'];\n            },\n            onChangeMonthYear: function (year, month, inst) {\n                alreadyTakenDays = {};\n                getEvents(month, year);\n            },\n\n            onSelect: function (dateText, inst) {\n                var end = dateText.substring(0, 2);\n                console.log(end);\n                var rID = $('#RoomID').val();\n                console.log(rID);\n                var startingHole = $('#DateOne').val();\n                var start = startingHole.substring(0, 2);\n                console.log(start);\n                GetTotalCost(start, end, rID);\n\n                document.getElementById('TotalCost').value = totalCost.toFixed(2);\n\n            }\n        });\n</code></pre>\n\n<p>After jQuery script is executed I always get <strong>0 for totalCount?</strong>\nWhy is this happening? What should I Do?\nI would like to appoint totalCount to Html.TextBoxFor in ASP.NET MVC 3, that is why I need totalCount. Please help.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":2523,"score":3,"question_id":6840941,"title":"Group MVC3 views into sub-folders under main 'action' folder","body":"<p>E.g. I have three payment controllers, each specific to a third party payment processor, so under my root Views folder, I have one folder for each of these controllers.  I would like to move these into Views\\Payments\\Processor1, Views\\Payments\\Processor2, etc. instead of the current Views\\Processor1 etc.</p>\n\n<p>I am not ready to implement areas yet, so I'm hoping there is some way I can tell MVC to also look in subfolders, or something like that.  Can this be done and how?</p>\n"},{"tags":["asp.net-mvc-3","razor","asp.net-mvc-4"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13219874,"title":"asp.net mvc 4 tabs","body":"<p>I'm working on a project with Visual Studio 2010 ASP.Net MVC4 (engine view Razor) and need to make a tabs.\nI define this scrips and css:</p>\n\n<pre><code>&lt;link href=\"@Url.Content(\"~/Content/themes/base/jquery-ui.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.7.1.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-ui-1.8.20.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n$(function () {\n$(\"#tabs\").tabs();\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>It also defines the format html for the tabs:</p>\n\n<pre><code>&lt;div id=\"tabs\"&gt; .....\n</code></pre>\n\n<p>but when excecute don't showme the tabs, how I can solve this problem. only showme format html, this:</p>\n\n<p>Index</p>\n\n<p>Tab Header 1</p>\n\n<p>Tab Header 2</p>\n\n<p>Tab Header 3</p>\n\n<p>Content for Tab 1 goes here.</p>\n\n<p>Content for Tab 2 goes here.</p>\n\n<p>Content for Tab 3 goes here.</p>\n"},{"tags":["c","asp.net-mvc-3","visual-studio-2010"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":42,"score":-3,"question_id":13239462,"title":"Version Control for projects. Net","body":"<p>I need a simple version control, practical and preferably free, I count on the help?</p>\n"},{"tags":["c#","asp.net-mvc-3","ravendb","raven"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13237621,"title":"Ravendb Savechanges(); taking too long time to run?","body":"<p>Ran into a weird problem with RavenDB</p>\n\n<pre><code>public ActionResult Save(RandomModel model)\n{\n//Do some stuff, validate model etc..\n\nRavenSession.Store(model);\nRavenSession.SaveChanges();\n\n\nvar newListOfModels = RavenSession.Query&lt;RandomModel&gt;().ToList();\nreturn View(\"randomview\",newListOfModels);\n}\n</code></pre>\n\n<p>The newListOfModels does not contain the model i just added with the store method.</p>\n\n<p>However, if i add a Thread.Sleep(100) after savechanges the stored model is included in the new list.</p>\n\n<p>Am i storing and Saving stuff to RavenDB the wrong way?</p>\n\n<p>How should i be doing this?</p>\n\n<p>Of course there is a work around by just adding the incoming model to the newListOfModels and running SaveChanges after for example in a basecontrollers onactionexecuted method.</p>\n\n<p>My primary concern is why i need to delay the thread before i can query the documentsession and find my newly added model there.</p>\n"},{"tags":["c#","asp.net-mvc-3","visual-studio"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13237210,"title":"How do I get the ID from the first table to record the second?","body":"<p>How do I get the ID from the first table to record the second?\nRecalling that the id and generated automatic.</p>\n\n<pre><code> [HttpPost]\n    public ActionResult Create(Chamados chamados, InteracoesChamados interacoesChamados)\n    {\n        if (ModelState.IsValid)\n        {\n            db.Chamados.Add(chamados);\n            //interacoesChamados.ChamadoId = chamados.ChamadoId;  \n            db.InteracoesChamados.Add(interacoesChamados);\n\n            db.SaveChanges();\n            return RedirectToAction(\"Index\");\n        }\n\n        return View(chamados);\n    }\n</code></pre>\n\n<p>The comment and exactly what I want to do.\nI need  get the code from the first table and save  the second record.\nWhat is the best way?</p>\n"}]}
{"total":29155,"page":3,"pagesize":100,"questions":[{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":490,"score":0,"question_id":8531177,"title":"How can I display data from multiple tables using a code-first approach","body":"<p>I'm using a code-first approach to display data from multiple tables using SQL Server. For my <a href=\"http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29\" rel=\"nofollow\">C#</a> semester project, I'm building a social networking website. In my index view I want to display data from two tables, that is, from Posts and Comments.</p>\n\n<p>I'm trying a lot but nothing below is in my Index action.</p>\n\n<p>First, I was using this but later I think it performs only a simple join between tables.</p>\n\n<pre><code>public ActionResult Index()\n{\n    var myobj = DB.Comments.Include(\"Post\").ToList();\n    return View(myobj);\n}\n</code></pre>\n\n<p>If I use the SQL query below instead of above inside my Index action and pass them to the view, it generates an exception. How do I avoid that?</p>\n\n<pre><code>public ActionResult Index()\n{\n     var myobj = from u in DB.Posts\n                     join b in DB.Comments\n                     on u.UserID equals b.UserID\n                     into obj\n                     from ua in obj.DefaultIfEmpty()\n                     select new { userComments = (ua == null) ? \"\" : ua.UserComments, UserPosts = u.UserPosts };\n\n     return View(myobj);\n }\n</code></pre>\n\n<p>where inside Index.cshtml I'm using a strongly typed View:</p>\n\n<pre><code>@model IEnumerable&lt;myApp.Models.DB.Comment&gt;\n</code></pre>\n\n<p>and then display all posts and comments using a <code>foreach</code> loop.</p>\n\n<p>But it displays only those posts which postID is present in the Comments table (foreign key from post is in the comment table).</p>\n\n<p>How would I display all posts along with their comments (if any)?</p>\n\n<hr>\n\n<p>I'm using an .edmx file for the backend while for retrieving/adding data from the database I'm using a code-first approach.</p>\n\n<p>Here's a code example:</p>\n\n<pre><code>private SocialNetworkingEntities net = new SocialNetworkingEntities();\n\n    public void Add(RegisterView user)\n    {\n        DB.UserInfo User = new DB.UserInfo();\n        User.Name = user.UserName;\n        User.Password = user.UserPassword;\n        User.Email = user.UserEmail;\n        User.Birthday = user.UserDOB;\n        User.Sex = user.UserSex;\n        net.UserInfoes.Add(User);\n        net.SaveChanges();\n    }\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","performance"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":56,"score":0,"question_id":13238988,"title":"MVC3 App High Memory Usage","body":"<p>I have an MVC App that when deployed to the test server uses quite a bit of memory.  The Worker Process for the app pool that is running under is right around 1GB of memory usage. What is the best way to debug something like this?  I am not currently explicitly calling Garbage Collection because I have been told it is not necessary in MVC3.   </p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":861,"score":2,"question_id":9132477,"title":"How to call an ASP.NET MVC 3 action using jQuery?","body":"<p>How do I call ASP.NET MVC 3 action using jQuery?</p>\n\n<p>Actually, in my <code>index.cshtml</code> I have a combo-box which have sectorz names from the database. Whenever I click an option,</p>\n\n<pre><code>  onclick=\"Get_sector(\"some_sector_Name\")\"\n</code></pre>\n\n<p>the above jQuery function is called. Below is the jQuery function.</p>\n\n<pre><code>function Get_sector(sec)\n{\n    //$.post(\"/Main/selected_sector?sectrz=\" + sec , insertCallback);\n\n    $.ajax(\n    {\n        type: \"POST\",\n        url: \"/Main/selected_sector\",\n        data: \"sectrz=\" + sec,\n\n        success: function (result) {\n            alert(\"submitted\");\n        },\n\n        error: function (req, status, error) {\n            alert(\"Sorry!!\");\n        }\n    });\n}\n</code></pre>\n\n<p>Whenever I click the combo-box option I want to load a new action named <code>Selected_sector</code>. In this action complete information of the <code>selected_sectorz</code> will show. For example, the selected area has 100 houses for sale, etc. (Actually I'm developing a property portal site for my dad's business. I'm a student and new in ASP.NET MVC 3.)</p>\n\n<pre><code>public ActionResult Selected_sector(string sectrz)\n{\n    var sec = DB.sectors.Include(\"Homes_Sale\").OrderBy(m=&gt;m.sectorId).Where(m=&gt;m.sectorName==sectrz).ToList();\n    return View(sec);\n}\n</code></pre>\n\n<p>When I then insert a breakpoint at this line:</p>\n\n<pre><code>return View(); // return action of Selected_sector\n</code></pre>\n\n<p>then the Selected_sector action is not loading. <code>index.cshtml</code> is loading again.</p>\n\n<p>I have searched a lot on the Internet, but I found nothing.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","razor","html-helper"],"answer_count":4,"favorite_count":6,"up_vote_count":28,"down_vote_count":0,"view_count":15534,"score":28,"question_id":4451287,"title":"Razor: Declarative HTML helpers","body":"<p>I'm trying to write a simple declarative html helper:</p>\n\n<pre><code>@helper Echo(string input) {\n    @input\n}\n</code></pre>\n\n<p>The helper works fine if I embed it into the page I want to use it on. But if I move it to a separate <code>.cshtml</code> file and place that file in the <code>~/Views/Helpers</code> directory, my view can't be compiled anymore because the helper is not found. According to Scott Gu's <a href=\"http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx\" rel=\"nofollow\">blog article on Razor</a> it should work. </p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","session"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13235784,"title":"ASP.NET Session - Change settings depending on browser","body":"<p>I want to dynamically change the settings of the session information depending on the browser, essentially I want safari user's to use cookieless session and non safari user's to use cookie based session (cf safari cross domain cookie policy!).</p>\n\n<p>I know I can use \"UseDeviceProfile\" for this, but all I want to do is set it to true for safari (I also want to set regenerateExpiredSessionId to true for safari as well, but I suppose this can be default to true since if regenerateExpiredSessionId is true and cookieless  is false then it should'nt make any difference should it?).</p>\n\n<p>Would I need to create a new browser profile for this? How can go about doing this?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13235096,"title":"MVC Validation: Service Layer or Data Annotations","body":"<p>I hope this isn't terribly subjective, but when it comes to validating business logic, I see two paths that, unless I'm mistaken, deliver pretty much the same result:</p>\n\n<ul>\n<li><p>Use a service layer where all validation on your models is performed (ref: <a href=\"http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validating-with-a-service-layer-cs\" rel=\"nofollow\">http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validating-with-a-service-layer-cs</a>)</p></li>\n<li><p>Decorate your models with Data Annotations</p></li>\n</ul>\n\n<p>In the first instance, the model is a dumb container for data, and in the second, the model knows about its valid state. Above and beyond that, is there nuance between the two that I'm missing? Should one be used over the other in some instances?</p>\n\n<p>Thanks,</p>\n\n<p>Chris</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","ninject","repository-pattern"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13212817,"title":"using ninject to inject dependency to The Model classes or non-controller classes","body":"<p>I using Ninject 3 in Repository pattern in mvc 3 (steven sanderson Scaffolder).<br>\nand in ninject i have the class \"NinjectWebCommon\" which in the \"RegisterServices\" method i resolved the dependencies and i think im ready to go.  </p>\n\n<pre><code>  private static void RegisterServices(IKernel kernel)\n  {\n     kernel.Bind&lt;ICityRepository&gt;().To&lt;CityRepository&gt;();\n     kernel.Bind&lt;IVillageRepository &gt;().To&lt;VillageRepository&gt;();\n  }\n</code></pre>\n\n<p>i using my repositories in controllers using constructor injection and everything is fine.  </p>\n\n<pre><code>public class CityController : Controller\n{\n   private readonly ICityRepository cityRepository;\n\n   // If you are using Dependency Injection, you can delete the following constructor\n   //public CityController() : this(new CityRepository())\n   //{\n   //}\n\n   public CityController(ICityRepository cityRepository)\n   {\n      this.cityRepository = cityRepository;\n   }\n\n  // .........\n}\n</code></pre>\n\n<p>but when i use this repositories in other classes like Model(Entity) classes using property injection or field injection the dependency doesn't resolved and i get null reference exception on my Property or field.  </p>\n\n<pre><code>[MetadataType(typeof(CityMetadata))]\npublic partial class City : IValidatableObject\n{\n   [Inject]\n   public IVillageRepository VillageRepo { get; set; }\n\n   public IEnumerable&lt;ValidationResult&gt; Validate(ValidationContext validationContext)\n   {\n      var village = VillageRepo.Find(5); // will throw null reference exception on \"VillageRepo\"\n   }\n}\n\npublic partial class CityMetadata\n{\n   [ScaffoldColumn(false)]\n   public int ID { get; set; }\n\n   [Required(ErrorMessage = MetadataErrorMessages.Required)]\n   [StringLength(50, ErrorMessage = MetadataErrorMessages.ExceedMaxLength)]\n   public string Name { get; set; }\n}\n</code></pre>\n\n<p>i don't know why this happening. so whats the problem and how can i use the repositories in non-controller classes?<br>\nthanks in advance.  </p>\n"},{"tags":["javascript","asp.net-mvc-3","include"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13235063,"title":"ASP.NET Script Include Read Permissions Error","body":"<p>I have an ASP.NET MVC App with a Razor page (call it Sample.cshtml) which includes a JS script file in the Head section as follows:</p>\n\n<pre><code>&lt;script src=\"https://www.example.net/Errors/utils.Version4.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>(exact names have been changed to protect the innocent). The application is on a Shared Hosting site and through the site's Control Panel I have set IIS Permissions on the Errors subdirectory to Allow Anonymous Access for SSL and Enable Read Permissions for SSL while I have DISALLOWED Allow Anonymous Access and Enable Read Permissions.</p>\n\n<p>The issue is this: when I log on to my app and Authenticate (using Forms Authentication) and the controller loads Sample.cshtml, the js file cannot be read. If I do a View Source and click the link in the Script tag I see some error HTML that indicates I don't have permission to read the resource, Error Code 403.2. HOWEVER, if I type the src URL into the Address Bar I can download the JS file fine and view the text in my browser. </p>\n\n<p>Why would I have Read Permissions if I use the Address Bar but NOT have read permissions when the src is called from my page script include? I've experimented a bit and if I also check Enable Read Permissions (so that Read Permissions are enabled for both SSL and non-encrypted http) the problem goes away. </p>\n\n<p>I'm sure there's a logical answer that I'm just not sophisticated enough to discern but I'm desperate to fix this (and desperate to learn) so any information would be gratefully received.</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13234203,"title":"In MVC3, how can I create a route like mydomain.com/chigago and hit that route from a GET form?","body":"<p>I have an application that shows locations on a map. I have created a route so that I can have nice hackable URLs, like <a href=\"http://www.mydomain.com/paris\" rel=\"nofollow\">http://www.mydomain.com/paris</a>. This works fine just typing in the URL, but I have a search form on the home page that sends a GET request. When the form is submitted, the URL displayed in the location bar is in the format <a href=\"http://www.mydomain.com/Dashboard?location=paris\" rel=\"nofollow\">http://www.mydomain.com/Dashboard?location=paris</a>. Normally this wouldn't matter too much as it's hitting the correct action, but I have a backbone.js application running the show and it's particular about the URL structure.</p>\n\n<p>It may be impossible to do what I need without javascript or a redirect, because the location isn't known when the form ACTION attribute is populated - but can anyone confirm?</p>\n\n<p>Here are my routes.</p>\n\n<pre><code>public static void RegisterRoutes( RouteCollection routes )\n{\n    routes.IgnoreRoute( \"{resource}.axd/{*pathInfo}\" );\n    routes.MapRoute(\n        String.Empty,\n        \"{location}\",\n        new { \n            controller = \"Dashboard\",\n            action = \"Index\",\n            id = \"\"\n        }\n    );\n\n    routes.MapRoute(\n        \"Default\", // Route name\n        \"{controller}/{action}/{id}\", // URL with parameters\n        new\n        {\n            controller = \"Home\",\n            action = \"Index\",\n            id = UrlParameter.Optional\n        } // Parameter defaults\n    );\n\n}\n</code></pre>\n\n<p>Here is the controller.</p>\n\n<pre><code>public class DashboardController : Controller\n{\n    [HttpGet]\n    public ViewResult Index(string location)\n    {\n        return View(new AccItemSearch { Location = location });\n    }\n}\n</code></pre>\n\n<p>Here is the form.</p>\n\n<pre><code>        @using (Html.BeginForm(\"Index\", \"Dashboard\", FormMethod.Get)) {\n                &lt;h2&gt;Where are you going?&lt;/h2&gt;\n                &lt;input type=\"text\" placeholder=\"Area, town or postcode\" id=\"location\" name=\"location\"/&gt;\n                &lt;button&gt;Search!&lt;/button&gt;\n            &lt;/div&gt;\n        }\n</code></pre>\n\n<p><strong>To clarify</strong>: the problem I want help with is how to have the user submit the form then land on a page with the URL: <a href=\"http://www.mydomain.com/searchterm\" rel=\"nofollow\">http://www.mydomain.com/searchterm</a> and thus match the route, rather than on a page that with the URL <a href=\"http://www.mydomain.com/Dashboard\" rel=\"nofollow\">http://www.mydomain.com/Dashboard</a></p>\n"},{"tags":["asp.net-mvc-3","ef-code-first","many-to-many","datacontext","circular-reference"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13226349,"title":"Having trouble with EF code first and mvc 3.0 relationships","body":"<p>I'm getting the following error when running my application. I'm forcing the application to do a DropCreateDatabaseAlways for my context so I'm not sure why it would say that I'm trying to insert multiple entities with the same key.</p>\n\n<p>There might be a problem with how User and Message are linked. I had to add:</p>\n\n<pre><code>                modelBuilder.Entity&lt;Message&gt;()\n                    .HasRequired(m =&gt; m.UserSentFrom)\n                    .WithRequiredDependent()\n                    .WillCascadeOnDelete(false);\n</code></pre>\n\n<p>Just because I was getting a warning about circular reference and had to set the willcascadeondelete to false.</p>\n\n<p>If there is something wrong with my design, let me know, but this is what I'm trying to do:\nUser has many Messages,\nMessage has one FromUser\nMessage has many ToUsers</p>\n\n<p>Any help will be appreciated as this is driving me crazy.</p>\n\n<p>{\"Conflicting changes detected. This may happen when trying to insert multiple entities with the same key.\"}</p>\n\n<pre><code>    public class User\n        {\n            public int Id { get; set; }\n            [Required(ErrorMessage=\"Username is required\")]\n            public string Username { get; set; }\n            [Required(ErrorMessage = \"Password is required\")]\n            [DataType(DataType.Password)]\n            public string Password { get; set; }\n            [Required(ErrorMessage=\"Email Address is required\")]\n            [DataType(DataType.EmailAddress)]\n            public string UserEmailAddress { get; set; }\n            [DisplayFormat(DataFormatString=\"{0:d}\",ApplyFormatInEditMode=true)]\n            public DateTime DateCreated { get; set; }\n            [DisplayFormat(DataFormatString = \"{0:d}\", ApplyFormatInEditMode = true)]\n            public DateTime LastUpdated { get; set; }\n            public virtual ICollection&lt;Message&gt; Messages { get; set; }\n            public User()\n            {\n                Messages = new List&lt;Message&gt;();\n            }\n        }  \n\n    public class Message\n        {\n            public int Id { get; set; }\n            public DateTime DateSent { get; set; }\n            public virtual ICollection&lt;User&gt; UserSentTo { get; set; }\n            public string Title { get; set; }\n            public string Body { get; set; }\n            public int UserSentFromId { get; set; }\n            public virtual User UserSentFrom { get; set; }\n        }\n\n    protected override void OnModelCreating(DbModelBuilder modelBuilder)\n            {\n                modelBuilder.Entity&lt;Message&gt;()\n                     .HasMany(m =&gt; m.UserSentTo).WithMany(u =&gt; u.Messages)\n                     .Map(t =&gt; t.MapLeftKey(\"MessageId\")\n                         .MapRightKey(\"UserId\")\n                         .ToTable(\"MessagesUserSentTo\"));\n                modelBuilder.Entity&lt;Message&gt;()\n                    .HasRequired(m =&gt; m.UserSentFrom)\n                    .WithRequiredDependent()\n                    .WillCascadeOnDelete(false);\n            }\n\n    protected override void Seed(WebsiteGameContext context)\n            {\n                var users = new List&lt;User&gt;\n                {\n                    new User { Username = \"Admin\", UserEmailAddress=\"admin@temp.com\", DateCreated = DateTime.Now, LastUpdated = DateTime.Now},\n                    new User { Username = \"Member\", UserEmailAddress=\"member@temp.com\",DateCreated = DateTime.Now, LastUpdated = DateTime.Now}\n                };\n                users.ForEach(u =&gt; context.Users.Add(u));\n                context.SaveChanges();\n\n                var messages = new List&lt;Message&gt;\n                {\n                    new Message { DateSent=DateTime.Now, Title=\"Sent From Admin\", Body=\"There should be 2 users that this was sent to\", UserSentFromId=users[0].Id,UserSentTo= new List&lt;User&gt;()},\n                    new Message { DateSent=DateTime.Now, Title=\"Sent From Member\", Body=\"There should be 1 user that this was sent to\", UserSentFromId=users[1].Id,UserSentTo= new List&lt;User&gt;()}\n                };\n                messages.ForEach(m =&gt; context.Messages.Add(m));\n                context.SaveChanges();\n\n                messages[0].UserSentTo.Add(users[0]);\n                messages[0].UserSentTo.Add(users[1]);\n                messages[1].UserSentTo.Add(users[0]);\n                context.SaveChanges();\n            }\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc-3","user","roles"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":28,"score":2,"question_id":13231841,"title":"asp.net mvc3 user roles and access rights","body":"<p>In my ASP.NET MVC3 application, I am having users, roles and entities. User Roles will be having access to entities. So while storing users and roles in database which of following is good approach?</p>\n\n<p>1)To store user list in the entity tables</p>\n\n<p>2)Entity Ids in the user table.</p>\n\n<p>In future the number of entities may increase to 1000,10000 so I want to consider the performance aspect also.</p>\n"},{"tags":["asp.net-mvc-3","autocomplete"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13234263,"title":"Access dropdown selected value from jquery to mvc3 action","body":"<p>I am trying to fill auto complete textbox based on dropdown selected value,\nBut unable to pass selected dropdown value as parameter to autocomplete url.Action()</p>\n\n<p>Here is the code which I am using..</p>\n\n<pre><code>Dictionary&lt;string, string&gt; searchlist = new Dictionary&lt;string, string&gt;();\nsearchlist.Add(\"option1\", \"1\");\nsearchlist.Add(\"option2\", \"2\");\nsearchlist.Add(\"option3\", \"3\");\nsearchlist.Add(\"option4\", \"4\");\n\nSelectList list = new SelectList(searchlist, \"value\", \"key\");\n\n    @Html.DropDownListFor(m =&gt; m.SearchType, list, new {@id=\"category\", @class = \"select\" })\n\n       &lt;script  type=\"text/javascript\"&gt;\n           $(document).ready(function () {\n               $(\"#category\").change(function () {\n                       var selectedVal = $(\"#category option:selected\").text();\n\n                       alert(\"You selected :\" + selectedVal);\n\n               });\n           });\n\n  &lt;/script&gt; \n\n    &lt;input type=\"text\" id=\"searchField\" name=\"searchField\"  data-autocomplete-url=\"@Url.Action(\"Autocomplete\", \"Home\", new { lang = Model.Language, cattype = selectedVal  })\" class=\"select\" value=\"Search\" onBlur=\"if(this.value == '') this.value = 'Search';\" onFocus=\"if(this.value == 'Search') this.value = '';\"   /&gt;\n    &lt;a href=\"#\"&gt;&lt;img src=\"@Url.Content(\"~/Content/images/magnifier.png\")\" alt=\"Search\" title=\"Search\" /&gt;&lt;/a&gt; \n</code></pre>\n\n<p>Please help me where am I going wrong.\nThanks in advance.</p>\n"},{"tags":["asp.net-mvc-3","razor","telerik","asp.net-mvc-4","telerik-grid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":107,"score":0,"question_id":12279101,"title":"How to implement radio buttons in a column along with other columns","body":"<p>Working in telerik razor\nmy code is</p>\n\n<pre><code> .Columns(c =&gt;\n    {\n        c.Bound(itm =&gt; itm.id).Visible(false);\n        c.Bound(itm =&gt; itm.name).Title(\"FN\").Width(200);\n        c.Bound(itm =&gt; itm.name).Title(\"LN\").Width(200);\n        c.Bound(itm =&gt; itm.location).Title(\"Loc\").Width(200);\n })\n</code></pre>\n\n<p>I want to add a radio button as 1st column. Thanks</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":12,"score":1,"question_id":13233060,"title":"UrlHelper.Action generate Url without controler","body":"<p>I would like to generate Url without controller name. If I use code below...</p>\n\n<pre><code> @Url.Action(\"d\", null, new { id = Model.DownloadId })\n</code></pre>\n\n<p>...I get url like this</p>\n\n<pre><code>http://localhost:814/DefaultController/d/11234\n</code></pre>\n\n<p>I would like to get url like this</p>\n\n<pre><code>http://localhost:814/d/11234\n</code></pre>\n\n<p>My route code..</p>\n\n<pre><code>routes.MapRoute(\"Download result form\", \"d/{id}\", new { controller = \"Result\", action = \"DownloadForm\" });\n</code></pre>\n\n<p>... handles url like above(only with Action and Id without Controller name) perfectly.</p>\n"},{"tags":["asp.net-mvc-3","routes","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13233188,"title":"custom routing with mvc4","body":"<p>I am implementing a system that has a file-folder system (users can have folders and each folder can have files or folders in it again). I want to build the Url according to the folders. lets say a user has a folder 'Folder1' and in it there is another folder 'Folder2'. When I am in Folder1 I want the Url to look like 'Home/Folder1' and when user clicks 'Folder2' in 'Folder1' Url should look like 'Home/Folder1/Folder2' and it can be able to go like this forever :) </p>\n\n<pre><code>public class RouteConfig\n{\n    public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n//   THIS IS THE LINE I ADDED\n        routes.MapRoute(\n            \"Home\",\n            \"{folderPath}\",\n            new { controller = \"Home\", action = \"Index\", folderPath = UrlParameter.Optional }\n        );      \n//   END OF LINE I ADDED           \n        routes.MapRoute(\n            name: \"Default\",\n            url: \"{controller}/{action}/{id}\",\n            defaults: new { controller = \"Home\", action = \"Index\", id = -1 }\n        );\n    }\n}\n</code></pre>\n\n<p>I changed the RouteConfig file and now I am able to have 'Home/Folder1' and 'Home/Folder2' unfortunately that is not what I want :/ </p>\n\n<p>I hope I explained my problem clearly.if anyone can help me I would appreciate it. By the I am actually using MVC4.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","web-config","globalization"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13232243,"title":"Changing Language: globalization, culture depending on domain","body":"<p>I'm currently working on a MVC3 project where the globalization on a site is configured in the web.config. </p>\n\n<p></p>\n\n<p>I want to implement a functionality that changes the globalization to a different language depending on what domain your browsing from. So the globalization will change at run time depending on what site-address you browse from.  </p>\n\n<p>How can I acquire this functionality? </p>\n"},{"tags":["asp.net-mvc-3","jqgrid","modal-dialog","jqgrid-asp.net"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":221,"score":1,"question_id":11349969,"title":"Adding and editing rows using Modal Form in jqGrid using ASP.NET MVC","body":"<p>I have Add, Edit and Delete icons displaying in the navigation bar. I want to have a modal form displayed when clicking on the icons to add or edit the rows. Can someone point me to any good article or in the right direction to implement modal forms in javascript and how the controller actions should be implmented on the server side. I have researched a lot and couldn't find a good article or answer to use modal forms, most of them look complicated. Any help is greatly appreciated! </p>\n"},{"tags":["c#","asp.net-mvc-3","visual-studio-2010"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13231930,"title":"How to save data in two tables? (In Create)","body":"<p>Good Day,</p>\n\n<p>I wonder how to save the information in a create.</p>\n\n<pre><code>@model Request.Models.Chamados\n@model Request.Models.InteracoesChamados \n@{\n    ViewBag.Title = \"Create\";\n}\n</code></pre>\n\n<p>as shown in the two tables above only that of course does not work.\nplease give me an example of this because it confused me.</p>\n\n<p>NOTE: So for clarity, I fill out a form and save to 2 tables when I hit save.</p>\n\n<p>environment:\nWindows 7,\nVisual Studio 2010,\nC #,\nMVC3 + Razor Entity Framework</p>\n"},{"tags":["asp.net","asp.net-mvc","visual-studio-2010","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1982,"score":0,"question_id":5363907,"title":"Library Package Manager does not appear","body":"<p>I installed ASP MVC 3, but when I go to tools I can't see the Library Package Manager, it was supposed to install along ASP MVC 3, how come I cannot see it?</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc-3","linq-to-sql","controller","scaffolding"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2493,"score":2,"question_id":9116601,"title":"MVC3 Add Controller Scaffolding Error - Unsupported Context Type","body":"<p>I'm creating a new MVC 3 application.<BR>\nSteps taken:<BR>\n1. Added new model by right clicking on Models and adding \"LINQ to SQL Classes\"<BR>\n2. Dragged tables from Server Explorer to my new dbml layout and saved<BR>\n3. Right click on Controllers->Add->Controller<BR>\n4. Enter the following information:<BR></p>\n\n<blockquote>\n  <p><strong>Controller name:</strong> UserController<BR>\n  <strong>Template:</strong> Controller with read/write actions and views, using Entity Framework<BR>\n  <strong>Model Class:</strong> aspnet_User (TierPay)<BR> \n  <strong>Data Context Class:</strong> AgricultureDataContext (TierPay)<BR> \n  <strong>Views:</strong> Razor (VBHTML)<BR></p>\n</blockquote>\n\n<p>5.Click Add<BR>\n6.Get the following error:<BR>\n<strong>Unsupported context type.</strong></p>\n\n<p>I've Googled around and haven't found any answers.\nThanks!</p>\n"},{"tags":["c#","asp.net-mvc-3","validation"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":13159205,"title":"Fluent Validation custom validation","body":"<p>I'd like to make 2 rules using Fluent Validation (http://fluentvalidation.codeplex.com) in my MVC project.</p>\n\n<p>Nothing should happen when both Company and Name are empty.\nIf either of them is filled, nothing should happen either.\nIf either Company or Name is not filled, display a label at both of them. (the error message could be the same)</p>\n\n<p>Ive tried this so far:</p>\n\n<pre><code>RuleFor(x =&gt; x.Name)\n.NotEmpty()\n.WithMessage(\"Please fill in the company name or the customer name\")\n.Unless(x =&gt; !string.IsNullOrWhiteSpace(x.Company));\n\nRuleFor(x =&gt; x.Company)\n.NotEmpty()\n.WithMessage(\"Please fill in the company name or the customer name\")\n.Unless(x =&gt; !string.IsNullOrWhiteSpace(x.Name));\n</code></pre>\n\n<p>Ive tried combinations of When, Must and Unless, but none of them work. When i fill in nothing, no errors are shown on those 2 properties.</p>\n\n<p>Can anyone help me out?</p>\n"},{"tags":["c#","asp.net-mvc-3","nhibernate"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":275,"score":5,"question_id":12964437,"title":"List in list (Model) Factory","body":"<p>I would like to create list of data in list of data. I believe this can be difficult to explain but I will try explain my problem very clear. I created list of data but in this list some arguments are also list of data. I have to write using this code because this are restriction (Our Factory). If I take data, which are not list of data, everything working correct. Where is problem? If I write list in list I get error. Perhaps you can see there my mistake.</p>\n\n<p>Program is compile.</p>\n\n<p>Problem(I take data from third table using mapping in NHibernate):</p>\n\n<pre><code>DestynationName = (List&lt;dictionaryNewInfoSupportList&gt;x.DictImportantInformationSDestination.Select(n=&gt; new DictionaryNewInfoSupportList { Id = n.Destination.Id, Name = n.Destination.Desciption}).ToList();\n</code></pre>\n\n<p>DestynationName in Model</p>\n\n<pre><code>public Ilist&lt;dictionaryNewInfoSupportList&gt; DestynationName;\n</code></pre>\n\n<p>Class:</p>\n\n<pre><code>class dictionaryNewInfoSupportList\n{\npublic string Name {get; set;}\npublic int Id {get; set;}\n}\n</code></pre>\n\n<p>Important:</p>\n\n<pre><code>public IEnumerable&lt;DictionaryListModel&gt; OnList(DictionayDisplayModel dictionary DisplayModel, int jtStartIndex = 0, int jtPageSize = 0, string jtSorting = null)\n{\nvar displayModel = (DictionaryNewInfoDisplayModel)dictionaryDisplayModel;\nif (displayModel == null)\n\nvar list = _dictImportantInformation.GetList().Select(\nx=&gt; new DictionaryNewInfoListModel\n    {\n        Id = x.Id\n        Description = x.Description,\n        IsActiveYN = x.IsActive,\n        DestynationName = (List&lt;DictionaryNewInfoSupportList&gt;) x.DictImportantInformationXDestination.Select(n =&gt; new DictionaryNewInfoSupportList \n        { Id = n.Destination.Id, Name = Destination.Description}).To.List()\n    }\n    ).ToList();\n\nreturn list;\n\n}\n</code></pre>\n\n<p>I have got answer (Topic Closed) </p>\n\n<pre><code>var list = _dictImportantInformation.GetList().ToList().Select(\n            x =&gt; new DictionaryNewInfoListModel\n                     {\n                         Id = x.Id,\n                         Description = x.Description,\n                         IsActiveYN = x.IsActive,\n                         DeestynationName = x.DictImportantInformationXDestination.Select(n =&gt; new DictionaryNewInfoSupportList \n                         { Id = n.Destination.Id, Name = n.Destination.Description }).ToList()\n                     }\n\n            ).ToList();\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc-3","url-rewriting","web-config"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":33,"score":-1,"question_id":13230792,"title":"How can I block IP address in parallel plesk panel?","body":"<p>I had uploaded my asp.net mvc web site to parallel plesk panel. And I want to restrict some IP addresses. They shouldn't be allow to view my web site. </p>\n\n<p>How can I restrict them? Rewrite rules are not working with parallel plesk panel. Its urgent for me. </p>\n"},{"tags":["c#","jquery","ajax","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13230603,"title":"How to pick two values from two datepicker in jQuery and calculate diference in a new button on the same view (ASP.NET MVC 3)?","body":"<p>all\nI have completed code for two textboxes that should act as two datepicker jQuery. Here is the code:</p>\n\n<pre><code>&lt;script  type=\"text/javascript\"&gt;\n\n    var alreadyTakenDays = {};\n    function getEvents(month, year) {\n        $.ajax({\n            url: '@Url.Action(\"GetTakenDates\")',\n            type: 'POST',\n            data: JSON.stringify({ month: month, year: year }),\n            dataType: 'json',\n            processdata: false,\n            contentType: 'application/json; charset=utf-8',\n            success: function (data) { alreadyTakenDays = data; },\n            error: function (xhr, ajaxOptions, thrownError) { $('.datepicker1').datepicker(\"hide\"); },\n            complete: function (x, y) { $('.datepicker1').datepicker(\"refresh\"); }\n        });\n    }\n    $(function () {\n\n        $('.datepicker1').datepicker({\n            dateFormat: 'dd/mm/yy',\n            firstDay: 1,\n            minDate: new Date(),\n            yearRange: '2012:2100',\n            beforeShowDay: function (date) \n            {\n                var day = date.getDate();\n                if (day in alreadyTakenDays) \n                {\n                return [false,'',alreadyTakenDays[day]];\n                }\n                else return[true,'IsActive'];\n            },\n             onChangeMonthYear: function (year, month, inst) {\n                alreadyTakenDays = {};\n                getEvents(month, year);\n            },\n            onSelect: \n            function(dateText, inst) {\n                  var d = dateText.substring(0,2);\n                  var m = dateText.substring(3,5);\n                  var y = dateText.substring(6,10);\n                  var newDate = new Date(y,m-1,d);\n                  $('.datepicker2').val(\"\");\n                  $('.datepicker2').datepicker(\"option\",\"minDate\", newDate);\n          }\n        });\n\n          var calendarDate = $('.datepicker1').datepicker(\"getDate\");\n          getEvents(calendarDate.getMonth() + 1, calendarDate.getFullYear());\n\n        $('.datepicker2').datepicker({\n            dateFormat: 'dd/mm/yy',\n            firstDay: 1,\n            yearRange: '2012:2100'\n        });\n\n        $('.datepicker1').val(\"\");\n        $('.datepicker2').val(\"\");\n    });\n&lt;/script&gt; \n</code></pre>\n\n<p>After the first datepicker is selected another one will have the selected value as minimum allowed date. Also, every time a month is shifted in datepicker, an ajax call is made to check are there already booked days for a particular room.\nAbove explination is for those interested what the code does.\nHere is the View code for rendering two datepickers in MVC 3 using razor:</p>\n\n<pre><code> &lt;br /&gt;\n            &lt;br /&gt;\n            &lt;p&gt;\n                From: @Html.TextBoxFor(m=&gt;m.DateOne, new {@class=\"datepicker1\", @readonly=\"readonly\" }) \n                To: @Html.TextBoxFor(m =&gt; m.DateTwo, new { @class = \"datepicker2\", @readonly = \"readonly\" })\n            &lt;/p&gt;\n            &lt;p&gt;\n</code></pre>\n\n<p><strong>How do I make a calculation from difference of two datepickers and store it in another textbox that says the amount of selected days along with the cost for selected period (all <em>on the same view)?</em></strong></p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13227945,"title":"how to resolve runtime error in mvc3 razor view (Assembly 'MvcApplication2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null')","body":"<p>I want to create a mvc3 web razor application in visual studio 2010 professional. I added mvc3 web project with razor view but when i compile it it gives error of MVC.WEB.dll older version. then i updated mvc.web.dll to version 4 and web.mvc.webpages to version 2 in my refference assemblieis.</p>\n\n<p>I already added the web.config file configurations when it gives compile time error as show below</p>\n\n<pre><code>&lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n      &lt;assemblies&gt;\n        &lt;add assembly=\"System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL\" /&gt;\n        &lt;add assembly=\"System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n        &lt;add assembly=\"System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n        &lt;add assembly=\"System.Web.WebPages, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL\" /&gt;\n      &lt;/assemblies&gt;\n    &lt;/compilation&gt;\n</code></pre>\n\n<p>but now it not give the compile time error as shown below.</p>\n\n<pre><code>Assembly 'MvcApplication2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' uses 'System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' which has a higher version than referenced assembly 'System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'\n</code></pre>\n\n<p>Please help me to resolve this matter.</p>\n"},{"tags":["javascript","asp.net-mvc-3","razor","checkbox"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13230292,"title":"MVC3 Razor - at least one checkbox checked validation","body":"<p>I am new to mvc3 and razor engine and I would like it so at least one checkbox is checked for the submit button to fire.</p>\n\n<pre><code> &lt;div class=\"editor-field\"&gt;\n      @Html.Label(\"item1\")\n      @Html.CheckBoxFor(Model =&gt; Model.item1)\n      @Html.Label(\"item2\")\n      @Html.CheckBoxFor(Model =&gt; Model.item2)\n      @Html.Label(\"item3\")\n      @Html.CheckBoxFor(Model =&gt; Model.item3)\n &lt;/div&gt;\n &lt;p&gt;\n     &lt;input type=\"submit\" value=\"Create\" /&gt;\n &lt;/p&gt;\n</code></pre>\n\n<p>I know that I would need some kind of label to render text if 0 checkboxes are selected and that each checkbox needs an id so I can look at their values but is there anything in mvc3 razor to make this simpler? Thanks</p>\n"},{"tags":["asp.net-mvc-3","azure","azure-deployment"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":109,"score":1,"question_id":13224847,"title":"Azure Deployment to new OS Family","body":"<p>I have recently updated my web application to target ASP.NET 4.5 which requires a deployment to a Windows Server 2012. achieved by setting the osFamily value to 3 in the ServiceConfiguration deployment file.</p>\n\n<p>However once I have it deployed in staging I can't flip to product because production has a different OS version to staging and it errors telling me this isn't something it can do.</p>\n\n<p>Stopping short of deleting the old production environment which will result in downtime and flipping staging to replace the empty production instance, how do I transition from Windows Server 2008 to 2012 without downtime?</p>\n\n<p><strong>EDIT:</strong> This is specific to migrating from 2008 to 2012, I believe it was possible with earlier versions however I get the error below when I try to edit the osFamily value of the hosted service from 2-3.</p>\n\n<blockquote>\n  <p>The Upgrade from OS family 2 to OS family 3 is not allowed</p>\n</blockquote>\n\n<p>Thanks,</p>\n"},{"tags":["asp.net-mvc-3","iis7","forms-authentication","http-status-code-302","iis8"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":430,"score":0,"question_id":11551956,"title":"IIS 7+ MVC static content not rendering on login page (for unauthenticated users)","body":"<p>I have a login page page that should be available to unauthenticated users. On my local ASP.Net dev server it all works well. However, when deployed on IIS 7, all static content such as pictures and scripts are not downloading. Only when the user logs in the first time does it return the pictures and scripts. The server returns HTTP 302 for unauthenticated users. I am using forms authentication &amp; ASP.Net membership provider.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","iis7"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":2073,"score":2,"question_id":8205368,"title":"Request redirect to /Account/Login?ReturnUrl=%2f since MVC 3 install on server","body":"<p>We have an internal ASP.NET Webforms application running on a Windows 2008/IIS7 server which has been running fine until we installed MVC3.</p>\n\n<p>Now any requests redirect to /Account/Login?ReturnUrl=%2f.</p>\n\n<p>The website is Webforms not MVC. Because it is an internal only site we have Windows Authentication enabled for the root folder.</p>\n\n<p>We have several other websites on the same server that have not been affected by this problem, but this is the only site where the root folder is set to Windows Authentication.</p>\n"},{"tags":["jquery","ajax","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13226000,"title":"pagination for webGrid.GetHtml in MVC Razor partial view","body":"<p>I have two tabs on my page... For the first tab, I am loading the grid on page load; for the second, on click, I am using <code>Ajax.ActionLink</code> to load the grid using a partial View. </p>\n\n<p>I am using <code>webGrid.GetHtml()</code> to render the grid with default pagination in both the tabs. The pagination for the First tab is working very smoothly.  But for the grid under the second Tab, if I click on the page number, it will open the entire partial View in a new window with the second page selected.</p>\n\n<p>Any suggestion/solution will be highly appreciated.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13229384,"title":"Should I use HiddenFor for all data entity properties I'm not editing?","body":"<p>I had an issue where a Modified Date was being reset to some default on my edit post. It seems like the model binder ignores properties that are not part of the view. As soon as i add the @Html.HiddenFor(m => m.ModifiedDate) then the original value is included in the object passed into the post action.</p>\n\n<p>I would have thought all property values would persist through this process but this doesn't seem the case. I'm using a sql database for my models and in the current context some fields are not available for editing. Does this mean i should use HiddenFor for all properties that are not editable to ensure the integrity of the original data?</p>\n\n<p>If so is there a way to ensure new fields added will be automatically be included?</p>\n\n<p>an example of the post method</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult Edit(Customer customer)\n    {\n        //Some code here\n    }\n</code></pre>\n\n<p>And the view</p>\n\n<pre><code>@model MyApp.Models.Customer\n@{\n  ViewBag.Title = \"Edit\";\n}\n&lt;h2&gt;\n    Edit&lt;/h2&gt;\n@using (Html.BeginForm())\n{\n &lt;fieldset&gt;\n    @Html.HiddenFor(m =&gt; m.ModifiedData)\n    @*Some other fields*@\n &lt;/fieldset&gt;\n    &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Save\" /&gt;\n    &lt;/p&gt;\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","jquery-plugins","https","uploadify","adfs"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":331,"score":0,"question_id":7985606,"title":"JQuery uploadify not working with https in an asp.net MVC3 application throwing error 2038","body":"<p>I build a new MVC3 application and used Uploadify plugin in it. It works great. Below is my code:</p>\n\n<pre><code> $(\"#fileuploader\").fileUpload({\n        'uploader': '@Url.Content(\"~/Scripts/Uploader.swf\")',\n        'buttonText': 'Browse',\n        'cancelImg': '@Url.Content(\"~/Images/cancel.png\")',\n        'script': 'Home/Upload',\n        'fileDesc': '*.jpg;*.jpeg;*.gif;*.png;*.eml;*.msg;*.doc;*.docx;*.pdf;*.txt;*.xps;*.zip;*.ppt;*.pptx;*.pages;*.numbers;*.url;*.xls;*.xlsx;',\n        'fileExt': '*.jpg;*.jpeg;*.gif;*.png;*.eml;*.msg;*.doc;*.docx;*.pdf;*.txt;*.xps;*.zip;*.ppt;*.pptx;*.pages;*.numbers;*.url;*.xls;*.xlsx;',\n        'multi': false,\n        'auto': true,\n        'sizeLimit': 102400,\n        'onError': function (event, ID, fileObj, errorObj) {\n            alert(errorObj.info);\n            alert(errorObj.text);\n            alert(errorObj.status);\n            if (errorObj.type == \"File Size\") {\n                alert(errorObj.type + ' Limit: ' + Math.round(errorObj.sizeLimit / 1024) + 'KB');\n            }\n        }\n    });\n</code></pre>\n\n<p>Here is the method use to upload the file.</p>\n\n<pre><code> public string Upload(HttpPostedFileBase fileData)\n        {\n            //var fileName = this.Server.MapPath(\"~/uploads/\" + System.IO.Path.GetFileName(fileData.FileName));\n            var fileName = \"C:/temp/\" + System.IO.Path.GetFileName(fileData.FileName);\n            fileData.SaveAs(fileName);\n\n            return \"ok\";\n        }\n</code></pre>\n\n<p>However when I use the same code in another MVC3 application that is federated using ADFS and uses https it always throws Error 2038. Does anyone know why I am getting this error. I have checked each and every configuration settings. Is this a security issue? Any help regarding this will be highly appreciated. Thanks!</p>\n"},{"tags":["asp.net-mvc-3","jquery-ajax","callback"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13174005,"title":"whats wrong in this jquery ajax method call?","body":"<p>I'm trying to pass the value of a text box to a action method through jquery ajax method. The action method will return a bool value, based on which I need to show a message in my view. I'm trying this:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n        $(document).ready(function () {\n            $('#UserName').blur(function () {\n                var name = this.value;\n                $.get(@Url.Action(\"CheckUserName\"),{UserName:name},function(data,status){\n                if(data==true)\n                {\n                }\n                else\n                {\n                }\n                }););\n            })\n        });\n    &lt;/script&gt;\n</code></pre>\n\n<p>Now the problem is, only the if statement is executing! I have checked my action method, its returning true &amp; false accordingly. I need to know what the callback function's parameter \"data\" is supposed to do? Will it hold the data returned from the action method?</p>\n"},{"tags":["asp.net-mvc-3","http-status-code-404","custom-error-pages"],"answer_count":0,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":127,"score":4,"question_id":13155837,"title":"ASP.NET MVC Custom Error Pages with Magical Unicorn","body":"<p>my question is regarding Pure.Kromes answer to <a href=\"http://stackoverflow.com/questions/619895/how-can-i-properly-handle-404-in-asp-net-mvc\">this post</a>. I tried implementing my pages' custom error messages using his method, yet there are some problems I can't quite explain.</p>\n\n<p>a) \nWhen I provoke a 404 Error by entering in invalid URL such as localhost:3001/NonexistantPage, it defaults to the ServerError() Action of my error controller even though it should go to NotFound(). Here is my ErrorController:\n<br /></p>\n\n<pre>\n    public class ErrorController : Controller\n    {\n        public ActionResult NotFound()\n        {\n            Response.TrySkipIisCustomErrors = true;\n            Response.StatusCode = (int)HttpStatusCode.NotFound;\n            var viewModel = new ErrorViewModel()\n            {\n                ServerException = Server.GetLastError(),\n                HTTPStatusCode = Response.StatusCode\n            };\n            return View(viewModel);\n        }\n\n        public ActionResult ServerError()\n        {\n            Response.TrySkipIisCustomErrors = true;\n            Response.StatusCode = (int)HttpStatusCode.InternalServerError;\n\n            var viewModel = new ErrorViewModel()\n            {\n                ServerException = Server.GetLastError(),\n                HTTPStatusCode = Response.StatusCode\n            };\n            return View(viewModel);\n        }\n    }\n</pre>\n\n<p>My error routes in Global.asax.cs:</p>\n\n<pre><code>routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n        routes.IgnoreRoute(\"{*favicon}\", new { favicon = @\"(.*/)?favicon.ico(/.*)?\" });\n\n        routes.MapRoute(\n            name: \"Error - 404\",\n            url: \"NotFound\",\n            defaults: new { controller = \"Error\", action = \"NotFound\" }\n            );\n\n        routes.MapRoute(\n            name: \"Error - 500\",\n            url: \"ServerError\",\n            defaults: new { controller = \"Error\", action = \"ServerError\" }\n            );\n</code></pre>\n\n<p><br />\nAnd my web.config settings:</p>\n\n<pre><code>&lt;system.web&gt;\n    &lt;customErrors mode=\"On\" redirectMode=\"ResponseRewrite\" defaultRedirect=\"/ServerError\"&gt;\n    &lt;error statusCode=\"404\" redirect=\"/NotFound\" /&gt;\n&lt;/customErrors&gt;\n...\n&lt;/system.web&gt;\n\n&lt;system.webServer&gt;\n    &lt;httpErrors errorMode=\"Custom\" existingResponse=\"Replace\"&gt;\n      &lt;remove statusCode=\"404\" subStatusCode=\"-1\" /&gt;\n      &lt;error statusCode=\"404\" path=\"/NotFound\" responseMode=\"ExecuteURL\" /&gt;\n      &lt;remove statusCode=\"500\" subStatusCode=\"-1\" /&gt;\n      &lt;error statusCode=\"500\" path=\"/ServerError\" responseMode=\"ExecuteURL\" /&gt;\n&lt;/httpErrors&gt;\n...\n</code></pre>\n\n<p>The Error views are located in /Views/Error/ as NotFound.cshtml and ServerError.cshtml.</p>\n\n<p>b) \nOne funny thing is, When a server error occurs, it does in fact display the Server Error view I defined, however it also outputs a default error message as well saying that the Error page could not be found.\n<br /></p>\n\n<p><a href=\"http://i.stack.imgur.com/pAL12.jpg\" rel=\"nofollow\">Here's how it looks like:</a></p>\n\n<p><br />\nDo you have any advice how I could fix these two problems? I really like Pure.Kromes approach to implementing these error messages, but if there are better ways of achieving this don't hestitate to tell me. </p>\n\n<p>Thanks!</p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":62,"score":-2,"question_id":13226514,"title":"How to pass value to a jquery function on the run?","body":"<p>The scenario is, I have a form to sign in user, which will invoke an action method. The action method will return true/false depending on valid/invalid username. If it returns false, I want a jquery method to show a message. I can pass the value as a model view, but problem is when the page is first time requested, that value is null because action method for post is not invoked that time, therefore its showing an error like object reference is null. How to handle this kind of situation. I'm not giving the code, coz coding is not my problem, I need to know the best practice to handle this. Thanks.</p>\n\n<p>OK, Here is the Jquery method I tried.</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n        $(document).ready(function () {\n            (' #SignIn').click(function () {\n                if (@Model.test === null) //Error is showing here, on the @Model.test call\n                {\n                $(' #Message').text(\"Null\")\n                }\n                if(@Model.test===false)\n                 {\n                    $(' #Message').text(\"Invalid\");\n                }\n            });\n        });\n    &lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","html-helper","helper","viewbag"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13225477,"title":"How do I add Html Helper in mvc using ViewBag","body":"<p>I have a textarea that I need to change input type in certain conditions. I want to send this information as a ViewBag parameter, but I can't figure out how to do it. I though this in  controller:</p>\n\n<pre><code>if(inputtext == 1)\n  ViewBag.TextBox = @Html.TextBoxFor(m =&gt; m.Name, new { @class =\\\"inputtext\\\"})\nif(inputtext == 2)\n  ViewBag.TextBox = @Html.TextAreaFor(m =&gt; m.Name, new { @class =\\\"inputtext2\\\"})\n</code></pre>\n\n<p>my view looks like this:</p>\n\n<pre><code>@Html.Raw(ViewBag.TextBox)\n</code></pre>\n\n<p>But don't work. Any ideas on how to do this?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","iis"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13226069,"title":"asp.net mvc3 application host in IIS 7","body":"<p>I have two web application \n1st one is :\n  ApplicationA develop by asp.net\n2nd one is :\n  ApplicationB develop by asp.net mvc3</p>\n\n<p>My first application \"ApplicationA\" host as a default website &amp; it is run good \n//www.appliocationa.com</p>\n\n<p>Now i want to host my second application \"applicationB\" as child application </p>\n\n<p>like //www.appliocationa.com/applicationb</p>\n\n<p>is it possible?</p>\n"},{"tags":["ajax","asp.net-mvc-3","form-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13190778,"title":"MVC3 Ajax.BeginForm doesn't show ValidationMessage","body":"<p>I am using MVC3 + Razor. Now I have a form which contains Ajax.BeginForm(...). I following exact what \"Maxim\" said in this post:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/3388700/asp-net-mvc-ajax-with-html-validationmessagefor\">ASP.NET MVC AJAX with HTML.ValidationMessageFor</a></p>\n\n<p>And my validation rule is defined like:</p>\n\n<pre><code>ModelState.AddModelError(\"ControlName\", \"error message\");\n</code></pre>\n\n<p>However my </p>\n\n<pre><code>@Html.ValidationMessageFor(model =&gt; Model.OneProperty[0].AnotherProperty) \n</code></pre>\n\n<p>didn't give me anything.</p>\n\n<p>I also put these code into partial-view for \"error summary\" as well. I could see code run through the \"ValidationSummary\" PV, but it just doesn't display.</p>\n\n<pre><code> if (!ViewData.ModelState.IsValid)\n {\n    &lt;div id=\"errorMessage\" class=\"notificationArea\"&gt;\n             @Html.Partial(\"ValidationSummary\")\n    &lt;/div&gt;\n  }\n</code></pre>\n\n<hr>\n\n<p>In short, my main view is this:</p>\n\n<pre><code>@using (Ajax.BeginForm(\"SaveFromMainView\", null, new AjaxOptions\n{\n    HttpMethod = \"POST\",\n    UpdateTargetId = \"myForm\"   \n}, \n    new { id = \"myForm\" }))\n{           \n\n    @Html.Partial(\"SamTest1\")\n}\n</code></pre>\n\n<p>And within this \"SamTest1\" partial-view, there is another \"ValidationSummary\" partial-view to display bullets of error message.</p>\n\n<p>And my action method fianlly:</p>\n\n<pre><code>return PartialView(\"SamTest1\"); \n</code></pre>\n\n<p>Thanks heaps in advance!</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13224836,"title":"Datepicker - no reaction","body":"<p>I'm trying to add datapicker to my project. I have followed a tutorial.</p>\n\n<p>I have added the following code to the DatePickerReady.js file:</p>\n\n<pre><code>$(function () {\n    $(\".datefield\").datepicker(); \n});\n</code></pre>\n\n<p>I have added the following code at bottom of the head element in the Views\\Shared_Layout.cshtml file.</p>\n\n<pre><code>&lt;link href=\"@Url.Content(\"~/Content/themes/base/jquery.ui.core.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;link href=\"@Url.Content(\"~/Content/themes/base/jquery.ui.datepicker.css\")\" rel=\"stylesheet\"  type=\"text/css\" /&gt;\n&lt;link href=\"@Url.Content(\"~/Content/themes/base/jquery.ui.theme.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.ui.core.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.ui.datepicker.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/DatePickerReady.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>I have added this to Views\\Home\\Index.cshtml</p>\n\n<pre><code>@model Nullable&lt;DateTime&gt;\n\n @{\n    string dts =\"\";\n    if (Model != null)\n    {\n        dts = ((DateTime)Model).ToShortDateString();\n\n    }\n    @Html.TextBox(\"start\", String.Format(\"{0:d}\", dts), new { @class = \"datefield\", type = \"date\"  })\n} \n</code></pre>\n\n<p>But when I focus/click the textbox it does nothing. The calendar doesn't appear. I'm not  getting any errors as well.</p>\n\n<p>Any clue?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":633,"score":1,"question_id":7058349,"title":"MVC3: What is the best way to get the view path from an HtmlHelper object?","body":"<p>I have an html extension method to retrieve the URL for a file that is located in the same folder as the view.  </p>\n\n<p><strong>Example</strong></p>\n\n<pre><code>/Views/Home/Index.cshtml\n/Views/Home/Index.js\n/Views/Home/Index.css\n</code></pre>\n\n<p>Is this the best way to do this?  I don't like it because I have to do the following cast.  I am sure that RazorView is not going to work if you are using a different view engine, but IView only has a Render method on it.</p>\n\n<pre><code>((RazorView)helper.ViewContext.View).ViewPath\n</code></pre>\n\n<p>Here is the full method</p>\n\n<pre><code>public static string GetUrl(this System.Web.Mvc.HtmlHelper helper, string fileName) {\n    string virtualPath = ((RazorView) helper.ViewContext.View).ViewPath;\n    virtualPath = virtualPath.Substring(0, virtualPath.LastIndexOf(\"/\") + 1);\n    return virtualPath + fileName;\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","forms-authentication","asp.net-session"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":5669,"score":1,"question_id":10123143,"title":"ASP.NET MVC 3 - Dealing with Session variables","body":"<p>I have an app which uses Form's Authentication and when the user log's in, I retrieve the user's actual name and assign that to a session variable, like so:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult LogOn(LogOnModel model, string returnUrl)\n{\n    if (ModelState.IsValid)\n    {\n        if (Membership.ValidateUser(model.UserName, model.Password))\n        {\n            Session[\"Name\"] = client.GetName(model.UserName);\n            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);\n            return RedirectToAction(\"Index\", \"Home\"); \n        }\n    }\n}\n</code></pre>\n\n<p>This is then displayed on my Index view, like so:</p>\n\n<pre><code>&lt;h3&gt;Welcome, @Session[\"Name\"]&lt;/h3&gt;\n</code></pre>\n\n<p>So if my name was Bob, it would output \"Welcome, Bob\" on my view and this works fine. But once I navigate away from the page or close my browser and return a few minutes later, it seems as if these Session variables have been destroyed as it just outputs \"Welcome, \" but I'm still logged in so my session isnt destroyed? I've set the session to be destroyed after 60 minutes in my web.config:</p>\n\n<pre><code>&lt;sessionState regenerateExpiredSessionId=\"true\" timeout=\"60\" /&gt;\n</code></pre>\n\n<h2>Edit</h2>\n\n<p>This only happens when I check my \"Remember Me\" box when logging in, as I guess this keeps a cookie client side so when I re-open my browser Im still logged in but a new session ID is created as I did a <code>Response.Write(Session.SessionID)</code> on my Index page and the ID before I closed my browser was different to the one when I re-opened it. If I don't check my \"Remember Me\" box then I'm forced to login again upon re-opening my browser</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":24,"score":-1,"question_id":13219704,"title":"MVC3 PDF Viewer","body":"<p>Hello everyone I'm trying to do pdf viewer in mvc3 when user click the \"read the pdf\" link it will open new tab and user can read the pdf. So I checked the examples but I couldn't find. Could you suggest me any article or example ?     </p>\n"},{"tags":["jquery","asp.net-mvc-3","jslint","jshint"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13224522,"title":"Why is JS Lint is reporting an error in the JQuery library?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/505251/what-good-is-jslint-if-jquery-fails-the-validation\">What good is JSLint if jQuery fails the validation</a>  </p>\n</blockquote>\n\n\n\n<p>Why am I getting JS Hint error \"missing space after 'function'.\" for an empty mvc 3 project?</p>\n\n<p>The error is in file \"jquery-1.5.1-vsdoc.js\" on line 28 \"(function( window, undefined ) {\".</p>\n\n<p>Aren't the libraries coded to a standard? </p>\n\n<p>JS Lint/Hint is reporting the maximum number of errors in this file, and also in \"jquery-1.5.1.js\".</p>\n\n<p>I haven't modified the file - it was automatically included when I created an empty MVC3 project.</p>\n\n<p>Why is this happening?</p>\n"},{"tags":[".net","asp.net","asp.net-mvc","asp.net-mvc-3","orchardcms"],"answer_count":2,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":895,"score":6,"question_id":5693794,"title":"Render image from a theme inside Orchard","body":"<p>I've just picked up Orchard for building my blog. As part of my endeavour to create this new weblog I'm creating a custom theme. This custom theme features both CSS and images. </p>\n\n<p><strong>My question</strong></p>\n\n<p>My question basically comes down to this: How do I render an image that is part of the theme? </p>\n\n<p><strong>What I have tried so far</strong></p>\n\n<p>I have tried to use the following:</p>\n\n<pre><code>&lt;img src=\"@Html.ThemePath(\"/Content/Header.jpg\")\" alt=\"Logo\"/&gt;\n</code></pre>\n\n<p>But that doesn't work to great. It returns the following HTML markup:</p>\n\n<pre><code>&lt;img src=\"~/Themes/FizzyLogic/Content/Header.jpg\" alt=\"Logo\"/&gt;\n</code></pre>\n\n<p>Which is not exactly what it should be returning. I expected it to return the absolute path to the image inside my website.</p>\n"},{"tags":["jquery","asp.net-mvc-3","tinymce","textarea"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":290,"score":2,"question_id":7325364,"title":"TinyMCE loading lang/plugins/theme from incorrect directory","body":"<p>I am having trouble with TinyMCE. When it is searching for the lang, theme, and plugins, it is supposed to look in the directory where the base script files are located. however, instead of doing that, it is using the current loaded page as the root for searching. I am looking at the \"loadScripts\" function in the src file, but changing the path doesn't seem to provide any meaningful effect.</p>\n\n<p>Here is the unmodified loadScripts function for your review:</p>\n\n<pre><code>// Load scripts\n        function loadScripts() {\n            if (s.language)\n                sl.add(tinymce.baseURL + '/langs/' + s.language + '.js');\n\n            if (s.theme &amp;&amp; s.theme.charAt(0) != '-' &amp;&amp; !ThemeManager.urls[s.theme])\n                ThemeManager.load(s.theme, 'themes/' + s.theme + '/editor_template' + tinymce.suffix + '.js');\n\n            each(explode(s.plugins), function(p) {\n                if (p &amp;&amp; p.charAt(0) != '-' &amp;&amp; !PluginManager.urls[p]) {\n                    // Skip safari plugin for other browsers\n                    if (!isWebKit &amp;&amp; p == 'safari')\n                        return;\n\n                    PluginManager.load(p, 'plugins/' + p + '/editor_plugin' + tinymce.suffix + '.js');\n                }\n            });\n\n            // Init when que is loaded\n            sl.loadQueue(function() {\n                if (!t.removed)\n                    t.init();\n            });\n        };\n\n        loadScripts();\n    }\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13223133,"title":"MVC3 Release Strategy","body":"<p>I've built a small MVC3 Application that has some different configuration needs based upon the environment (Dev/Prod).</p>\n\n<p>This is mainly in 2 areas:</p>\n\n<ol>\n<li><p><strong>Rights</strong>: Rights are managed via Active Directory groups but my Development environment is in another domain then my Production environment:</p>\n\n<pre><code>//\n// GET: /Host/Search\n[Authorize(Roles = @\"WIN2012\\Main_v2_Read\")]\npublic ActionResult Search()\n{\n    return View();\n}\n</code></pre></li>\n<li><p><strong>Database connection</strong>: In Dev, Integrated security is fine. For production a Service Account should be used:</p>\n\n<pre><code>&lt; add name=\"MainContext\" connectionString=\"Data Source=Main-DEV;Initial Catalog=Main;Integrated Security=True\" providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre></li>\n</ol>\n\n<p>How should I handle this?</p>\n"},{"tags":["asp.net-mvc-3","file-upload","azure","windows-azure-storage","azure-storage-blobs"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":1508,"score":1,"question_id":8425824,"title":"How to upload image in Windows Azure platform: best approach","body":"<p>Ihave a register form with an Image Upload and it doesn't work when I upload my package application in my Windows Azure server.</p>\n\n<p>The image address in the server looks like this:</p>\n\n<pre><code>F:\\sitesroot\\0\\Uploads\\Users\\9259826_2121813246965_1294840438_2490950_6619588_n.jpg\n</code></pre>\n\n<p>If I had this image url like this, with it's relative path:</p>\n\n<pre><code>http://dealma.cloudapp.net/Uploads/Users/9259826_2121813246965_1294840438_2490950_6619588_n.jpg\n</code></pre>\n\n<p>I would already solve the problem.</p>\n\n<p>The current code I'm using to upload is this:</p>\n\n<pre><code>if (userImg != null &amp;&amp; userImg.ContentLength &gt; 0)\n            {\n                try\n                {\n                    var fileName = Url.Encode(userImg.FileName);\n                    //no overwrite files\n                    var pathToCheck = Server.MapPath(\"~/Uploads/Users/\" + fileName);\n                    var savePath = Server.MapPath(\"~/Uploads/Users/\");\n                    var tempfileName = fileName;\n                    int counter = 2;\n\n                    while (System.IO.File.Exists(pathToCheck))\n                    {\n                        tempfileName = counter.ToString() + fileName;\n                        pathToCheck = savePath + tempfileName;\n                        counter++;\n                    }\n\n                    fileName = tempfileName;\n\n                    var finalImg = Path.Combine(savePath, fileName);\n                    userImg.SaveAs(finalImg);\n\n                    //Img name\n                    userSet.Picture = finalImg;\n                    userSet.Thumbnail = finalImg;\n                }\n                catch (Exception ex)\n                {\n                    Response.Write(\"Não foi possível fazer upload do arquivo: \" + ex.Message);\n                }\n            }\n</code></pre>\n\n<p>Does anyone knows how to solve this problem?</p>\n"},{"tags":["c#","asp.net-mvc-3","razor"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":575,"score":1,"question_id":7206066,"title":"How to make the equivalent of @Ajax.DropDownList?","body":"<p>I have a partial view in my MVC3/Razor app for paging a grid which works fairly well currently.  When I AJAXified it, I converted all the @Html.ActionLink calls to @Ajax.ActionLink.  Now I want to add a DropDownList, but @Html.DropDownList doesn't cause the AJAX section to post back, and there's no @Ajax.DropDownList.  </p>\n\n<p>What can I do to get this dropdown to post back on change?</p>\n\n<p><strong>Edit:</strong> By preference, something that I can write into my own @Ajax.DropDownList helper would be best.  I'm sure the jQuery-based solutions below work, and I'll use them if necessary, but I'm sure I'm going to want this functionality elsewhere, and I'd prefer to not have all these little scripts floating around.</p>\n"},{"tags":["asp.net-mvc-3","web-config","custom-errors"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1269,"score":0,"question_id":9286113,"title":"Where and how to define <customErrors mode=”on”> for my asp.net MVC 3 web application","body":"<p>I want to set the custome error to be true to prevent users from viewing detailed info about my application. But I cannot find where I should write this <code>&lt;customErrors mode=\"on\"&gt;</code>; should it be in the web.config or in the web, debug.config or else where?</p>\n\n<p>BR</p>\n"},{"tags":["c#","html","mysql","asp.net-mvc-3","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13219871,"title":"Play video URL links stored in database MVC","body":"<p>Hi I'm currently developing a web Application In MVC3. I have created a database called PlayLink and have integrated a media player lean-back www.leanbackplayer.com into a view.</p>\n\n<p>From my view the user can add a URL link to the database and the link appears in the main View. I now need to link the player to the url's stored the database so that when the url is clicked the associated url media file will play in the player.</p>\n\n<p>This is my code for Lean Back player it currently only plays the URL the is pre coded.</p>\n\n<pre><code>  &lt;div class=\"leanback-player-video\"&gt;\n &lt;video width=\"500\" height=\"250\" preload=\"auto\" controls    p oster=\"http://dl.dropbox.com/u/46705018/sintel.mp4.mp4\"&gt;\n     &lt;source src=\"http://dl.dropbox.com/u/46705018/sintel.mp4.mp4\" type='video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"' /&gt;\n\n    &lt;object class=\"leanback-player-flash-fallback\" width=\"500\" height=\"250\" type=\"application/x-shockwave-flash\" data=\"http://player.longtailvideo.com/player.swf\"&gt;\n        &lt;param name=\"movie\" value=\"http://player.longtailvideo.com/player.swf\" /&gt;\n        &lt;param name=\"allowFullScreen\" value=\"true\" /&gt;\n        &lt;param name=\"wmode\" value=\"opaque\" /&gt;\n        &lt;param name=\"bgcolor\" value=\"#000000\" /&gt;\n        &lt;param name=\"flashVars\" value=\"controlbar=over&amp;amp;file=http://dl.dropbox.com/u/46705018/sintel.mp4.mp4\n                &amp;amp;image=http://dl.dropbox.com/u/46705018/sintel.mp4.mp4\" /&gt;\n    &lt;/object&gt;\n\n    &lt;div class=\"leanback-player-html-fallback\" style=\"width: 500px; height: 250px;\"&gt;\n        &lt;img src=\"http://dl.dropbox.com/u/46705018/sintel.mp4.mp4\" width=\"500\" height=\"250\" alt=\"Poster Image\" \n            title=\"No HTML5-Video playback capabilities found. Please download the video(s) below.\" /&gt;\n        &lt;div&gt;\n            &lt;strong&gt;Download Video:&lt;/strong&gt;\n            &lt;a href=\"http://dl.dropbox.com/u/46705018/sintel.mp4.mp4\"&gt;.mp4&lt;/a&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/video&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>MVC Model structure:</p>\n\n<pre><code>    using System;\n using System.Data.Entity;\n using System.Collections.Generic;\n using System.Linq;\n using System.Web;\n\n namespace ProjectNCI.Models\n  {\n    public class PlayLink\n   {\n    public int ID { get; set; }\n    public string Title { get; set; }\n    public DateTime Date { get; set; }\n\n   }\n   public class PlayLinkDBContext : DbContext\n   {\n       public DbSet&lt;PlayLink&gt; PlayLink { get; set; }\n   }\n}\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13219898,"title":"MVC 3 : Page Model not getting updated in Partial View after refreshing the page using jquery","body":"<p>I have a strange problem. I am trying to perform custom pagination in MVC using jquery. I am doing so by putting my grid in partial view of the parent page. When I update the view after the first time load, my model values are not getting updated on consecutive calls. Can someone please advise?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13216260,"title":"MVC3 DropDownListFor not selecting saved value","body":"<p>I'm displaying a list of users.  Each user record has a TrainingEvent object property (from a choice of many TrainingEvents).  I've created a viewmodel to include the User list and the TrainingEvents list.</p>\n\n<p><strong>ViewModel:</strong></p>\n\n<pre><code>public class RegistrationViewModel\n{\n  public IEnumerable&lt;Domain.Entities.User&gt; Users { get; set; }\n  public IEnumerable&lt;SelectListItem&gt; TrainingEvents { get; set; }\n}\n</code></pre>\n\n<p><em>(note: the Domain.Entities.User contains a TrainingEvent object property)</em></p>\n\n<p><strong>Controller:</strong></p>\n\n<pre><code>public ActionResult Dealership(int id)\n{\n  var model = new RegistrationViewModel\n    {\n      Users = repository.Find\n             .Where(u =&gt; u.Dealer.DealerId == id).OrderBy(u =&gt; u.LastName),\n                 TrainingEvents = repository.TrainingEvents.ToList()\n                                  .Select(x =&gt; new SelectListItem\n                                          {\n                                            Text = x.Date.ToString() + \" - \" + x.LocationName,\n                                            Value = x.TrainingEventId.ToString()\n                                          })\n    };\n\n  return View(\"East\", model);\n}\n</code></pre>\n\n<p><strong>Binding in View:</strong></p>\n\n<pre><code>@foreach(Company.Domain.Entities.User usr in Model.Users)\n  {\n     &lt;tr&gt;\n         &lt;td&gt;@usr.LastName&lt;/td&gt;\n         &lt;td&gt;@usr.FirstName&lt;/td&gt;\n         &lt;td&gt;@usr.JobDescription&lt;/td&gt;\n         &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Users.FirstOrDefault(u =&gt; u.UserId == usr.UserId).TrainingEvent, Model.TrainingEvents)&lt;/td&gt;\n     &lt;/tr&gt;\n}\n</code></pre>\n\n<p>The users are listed and each user row has a dropdown which populates with TrainingEvents.  However, the value previously saved in the user's TrainingEvent object isn't selected.  Any ideas as why not?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-web-api"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13210975,"title":"WebApi Controller returned value in Entity Framework 5 and MVC 4 project","body":"<p>I'm working on a webapi, EF5, Windsor Castle in a MVC 4 project, and I have a question...should I return the Entity (or DTO) in the Get method or Should I return an HttpResponseMessage? What's the better way and more standard way to do it?</p>\n\n<p>So, Is it this?</p>\n\n<pre><code>[System.Web.Http.HttpGet]\npublic HttpResponseMessage GetById(long id)\n{\n    var branch = Uow.Branches.GetById(id);\n    if (branch != null)\n    {\n        Request.CreateResponse(HttpStatusCode.OK, branch);\n    }\n\n    throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NotFound));\n}\n</code></pre>\n\n<p>Or this?</p>\n\n<pre><code>[System.Web.Http.HttpGet]\npublic Branch GetById(long id)\n{\n    var branch = Uow.Branches.GetById(id);\n    if (branch != null) return branch ;\n    throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NotFound));\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-2","asp.net-mvc-4","polymorphism"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13181746,"title":"ASP.NET MVC - Generic Controller Model Issue and Polymorphism","body":"<h2>Setup:</h2>\n\n<p>I have designed a Wizard (based initially on Steve Sanderson's wizard in Pro ASP.NET MVC 2).</p>\n\n<p>Essentially, the base wizard controller is declared as follows:</p>\n\n<pre><code>public abstract class WizardController&lt;TModel&gt; : Controller where TModel : class, IWizardModel, new()\n{\n   // Loads-n-loadsa-code\n}\n</code></pre>\n\n<p>To implement my wizard, therefore, I need to declare my Wizard controller as follows:</p>\n\n<pre><code>[WizardOptions(StartLabel=\"Edit &gt;&gt;\")]\npublic partial class EditFeeEarnerController : WizardController&lt;MyApp.Models.MySpecificWizardModel&gt;\n{\n     // small amounts of highly intuitive code\n}\n</code></pre>\n\n<p>Where <code>MyViewModel</code> implements <code>IWizardModel</code>.</p>\n\n<p>So far so good.  The wizard works beautifully and I am right chuffed with it, so don't get hung up on that.  </p>\n\n<p>The issue follows:</p>\n\n<h2>Issue:</h2>\n\n<p>The only issue is that my Wizard uses partial views for each step, that get \"stitched\" together with a view (<code>Wizard.cshtml</code>).</p>\n\n<p><code>Wizard.cshtml</code> is <strong>ALWAYS</strong> the same for <strong>ANY</strong> wizard <strong>EXCEPT</strong> for the <code>@model</code> declaration at the top, in my example:</p>\n\n<pre><code>@model MyApp.Models.MySpecificWizardModel\n</code></pre>\n\n<p>As a result, in an app with 20 wizards, I have the very same file appearing 20 times.  </p>\n\n<p>Definitely not DRY.</p>\n\n<h2>Question:</h2>\n\n<p>I would like to put a file in <code>~/Views/Shared/Wizard.cshtml</code> and use that for all my wizards.  The reason I can't do that is because I only know in advance that my wizard viewmodels will inherit from <code>IWizardModel</code>.  </p>\n\n<p>And I can't do this:</p>\n\n<pre><code>@model IWizardModel\n</code></pre>\n\n<p>So what is the best way to do this, or is it just not possible?</p>\n\n<p>I suppose I could have a base Wizard viewmodel that all my wizard viewmodels inherit from (instead of directly implementing <code>IWizardModel</code>).</p>\n\n<p>Would this work?</p>\n\n<h1>EDIT (With the benefit of hindsight):</h1>\n\n<p>For the record, my problem was that I was misguided in thinking that using an interface as my model, ie, <code>@model IWizardModel</code>, wouldn't work.  As Iain Galloway pointed out in his answer, it does and that solved my problem.</p>\n\n<p>The reason I thought I couldn't use an interface as my model is that I did the following:</p>\n\n<pre><code>@model IWizardModel // MyNamespace.MySpecificWizardModel\n</code></pre>\n\n<p>The problem is the comment to the right (I commented out the old model).  </p>\n\n<p>For some reason, the comment generated an error (something to do with the <code>ViewEngine</code>).  In my haste, I just presumed you couldn't use interfaces for the model.</p>\n\n<p>As olde Will said:  Great is thy power, oh delay.</p>\n\n<p>See Iain Galloway's answer and my Addendum to it.</p>\n"},{"tags":["asp.net-mvc-3","iis-7.5","ninject"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13217785,"title":"ASP.NET MVC 3 deployment error","body":"<p>When I run my ASP.NET MVC 3 application with the Ninject it works perfectly, but when I deploy it onto an IIS, it gives this error:</p>\n\n<blockquote>\n  <p></p>\n</blockquote>\n\n<pre><code>[NullReferenceException: Object reference not set to an instance of an object.]\n   Betolto.Controllers.DataInputController..ctor() +47\n   DynamicInjector7922fd15a4fb4caba8ffb4cc7f18cbcf(Object[] ) +42\n   Ninject.Activation.Providers.StandardProvider.Create(IContext context) +489\n   Ninject.Activation.Context.Resolve() +177\n   Ninject.&lt;&gt;c__DisplayClass10.&lt;Resolve&gt;b__c(IBinding binding) +30\n   System.Linq.WhereSelectEnumerableIterator`2.MoveNext() +151\n   System.Linq.Enumerable.SingleOrDefault(IEnumerable`1 source) +4222965\n   Ninject.Web.Mvc.NinjectDependencyResolver.GetService(Type serviceType) +64\n   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +51\n&gt;\n[InvalidOperationException: An error occurred when trying to create a controller of type 'Betolto.Controllers.DataInputController'. Make sure that the controller has a parameterless public constructor.]\n   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +182\n   System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType) +80\n   System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +74\n   System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController&amp; controller, IControllerFactory&amp; factory) +232\n   System.Web.Mvc.&lt;&gt;c__DisplayClass6.&lt;BeginProcessRequest&gt;b__2() +49\n   System.Web.Mvc.&lt;&gt;c__DisplayClassb`1.&lt;ProcessInApplicationTrust&gt;b__a() +13\n   System.Web.Mvc.SecurityUtil.&lt;GetCallInAppTrustThunk&gt;b__0(Action f) +7\n   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22\n   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Func`1 func) +124\n   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +98\n   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +50\n   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16\n   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8969412\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +184\n</code></pre>\n\n<p>I've searched through the internet but I've not found the solution to my problem.\nI thank for all answers.</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":13217402,"title":"Object reference not set to an instance of an object (2)","body":"<p>I am using entity framework in asp.net mvc3 and when i try to add new record to a table i get this error. Here is my code</p>\n\n<pre><code>namespace CvGenerator.Models\n{\n    public class LogInEntities:DbContext\n    {\n        public DbSet LogIn { get; set; }\n\n\n        protected override void OnModelCreating(DbModelBuilder modelBuilder)\n        {\n            modelBuilder.Conventions.Remove&lt;IncludeMetadataConvention&gt;();\n            modelBuilder.Entity&lt;LogIn&gt;().ToTable(\"LogInData\");\n            base.OnModelCreating(modelBuilder);\n        }\n    }\n\n}\n</code></pre>\n\n<p>Model controller:</p>\n\n<pre><code>public class LogIn\n{\n    public int LogInId { get; set; }\n    public string NameAndSurname { get; set; }\n    public string Email { get; set; }\n    public virtual ICollection&lt;LogIn&gt; LogInCol { get; set; }\n}\n</code></pre>\n\n<p>Method which i call using ajax to record data:</p>\n\n<pre><code>public void LogIn(string email,string nameAndSurname)\n{\n    LogInEntities logIndb = new LogInEntities();\n    LogIn logIn = new LogIn();\n\n    if(ModelState.IsValid)\n    {\n        logIn.Email = email;\n        logIn.NameAndSurname = nameAndSurname;\n        ***logIndb.LogIn.Add(logIn);***\n        logIndb.SaveChanges();\n    }\n}\n</code></pre>\n\n<p>on marked row i get the exeption</p>\n"},{"tags":["ajax","asp.net-mvc-3","jquery-ajax","asp.net-ajax"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":3855,"score":3,"question_id":8827706,"title":"mvc3 - ajax form submit and server side validation","body":"<p>I am sure this has been asked already, but I have been trying all the solutions given, but none of the given solution is solving my problem. Probably, I am not implementing it right.</p>\n\n<p>I am using MVC3, razor, jQuery.</p>\n\n<p>I have a new user registration form. Once registration is successful, I want to display the successful message (different on type of registration) in a dialog box.</p>\n\n<p>If there is any error with ModelState, means ModelState.IsValid == false, I want to display errors in ValidationSummary.</p>\n\n<p>View\n    </p>\n\n<pre><code>function OnBegin () { alert('begin'); return $('form').validate().form(); }\nfunction OnSuccess () { alert('success'); DisplaySucess()}\nfunction OnFailure () { alert('failure'); }\nfunction DisplaySuccess() {\n    var typeOfRegistration = $('input:radio[name=RegistrationType]:checked').val();\n    var msg;\n    if (typeOfRegistration == 0) {\n        msg = \"You are successfully enrolled for Algebra classes.\";\n    }\n    if (typeOfRegistration == 1) {\n        msg = \"You are registered with your email address. Someone would contact you with an email.\";\n    }\n    if (typeOfRegistration == 2) {\n        msg = \"Thank you for filling up this form. One welcome packet would be delivered with in next 15 days\";\n    }\n\n    msg = msg.replace(/\\n/g, '&lt;br /&gt;');\n    $('#dialog').html(msg);\n    $('#dialog').dialog('open');\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>@model Models.RegistrationModel\n@using (Ajax.BeginForm(\"NewRegistration\", \"Account\", new AjaxOptions() { OnBegin=\"OnBegin\", OnSuccess = \"OnSuccess\", OnFailure = \"OnFailure\" }))\n{ \n  @Html.ValidationSummary()\n    &lt;div&gt;\n    Register&lt;br /&gt;\n    @Html.RadioButton(\"RegistrationType \", \"0\", true) New Algebra class&lt;br /&gt;\n    @Html.RadioButton(\"RegistrationType \", \"1\") New user registration by email&lt;br /&gt;\n    @Html.RadioButton(\"RegistrationType \", \"2\") New user registration by mailing address&lt;br/&gt;\n   ..some more types\n&lt;/div&gt;\n&lt;div&gt;\n    …here I display/hide controls based on Registration type selected.\n        &lt;div&gt;\n    @Html.LabelFor(\"UserName\")\n    @Html.TextBox(\"UserName\")&lt;/div&gt;\n}\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>public ActionResult NewRegistration(RegistrationModel model)\n{\n\n         if (Request.IsAjaxRequest())\n         {\n             if (!ModelState.IsValid) { \n        //Ques: How do I display this in ValidationSummary. \n        return Json(new object[] { false, \"Contains Email Address\", ModelState.GetAllErrors() }); \n        }\n             else { \n        if (UserNameIsTaken){ \n            //Ques: This does not show in ValidationSummary\n            ModelState.AddModelError(\"_FORM\", \"This username is already taken. Please pick a different username.\");\n        }\n       }\n    }\n         else if (!ModelState.IsValid) { return View(model); }\n\n}\n</code></pre>\n\n<p>Model</p>\n\n<pre><code>public class RegistrationModel: IValidatableObject\n{\n[Required] //this gets displayed in ValidationSummary as Client-side validation\n    public string UserName { get; set; }\n    .. and all fields here\n}\npublic IEnumerable&lt;ValidationResult&gt; Validate(ValidationContext context)\n{\n        if (!string.IsNullOrEmpty(UserName) &amp;&amp; UserName.Contains(EmailAddress)) {\n            yield return new ValidationResult(\"Username cannot contain email address\", new[] { \"UserName\" });\n        }\n    }\n</code></pre>\n\n<p>Web.config has </p>\n\n<blockquote>\n  <p>UnobtrusiveJavaScriptEnabled=\"true\" and ClientValidationEnabled=\"true\"</p>\n</blockquote>\n\n<p>.js files included are</p>\n\n<blockquote>\n  <p>script src=\"@Url.Content(\"~/Scripts/jquery-1.7.1.min.js\")\" type=\"text/javascript\"></p>\n  \n  <p>script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"></p>\n  \n  <p>script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"></p>\n  \n  <p>script src=\"@Url.Content(\"~/Scripts/jquery.unobtrusive-ajax.min.js\")\" type=\"text/javascript\"></p>\n</blockquote>\n\n<p>What am I missing here? Any alternative?\nThanks in advance.</p>\n"},{"tags":["c#",".net","asp.net-mvc-3","unit-testing","controller"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":76,"score":0,"question_id":13213507,"title":"Unit testing a controller in ASP.NET MVC 3","body":"<pre><code>public Double Invert(Double? id)\n{\n    return (Double)(id / id);\n}\n</code></pre>\n\n<p>I have done this for this test but fails please can anyone help with this cos just started with unit testing</p>\n\n<pre><code>/* HINT:  Remember that you are passing Invert an *integer* so\n * the value of 1 / input is calculated using integer arithmetic. \n * */\n//Arrange\nvar controller = new UrlParameterController();\nint input = 7;\nDouble expected = 0.143d;\nDouble marginOfError = 0.001d;\n\n//Act\nvar result = controller.Invert(input);\n\n//Assert\nAssert.AreEqual(expected, result, marginOfError);\n\n/* NOTE  This time we use a different Assert.AreEqual() method, which\n * checks whether or not two Double values are within a specified\n * distance of one another.  This is a good way to deal with rounding\n * errors from floating point arithmetic.  Without the marginOfError \n * parameter the assertion fails.\n * */  \n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":3444,"score":4,"question_id":5609584,"title":"ASP.NET MVC3 - How to serve View() from another controller","body":"<p>So in order accomplish what I asked in <a href=\"http://stackoverflow.com/questions/5546501/asp-net-mvc3-routing-same-url-for-different-areas\">this</a> post I did the following:</p>\n\n<pre><code>    [iPhone]\n    [ActionName(\"Index\")]\n    public ActionResult IndexIPhone()\n    {\n        return new Test.Areas.Mobile.Controllers.HomeController().Index();\n    }\n\n    [ActionName(\"Index\")]\n    public ActionResult Index()\n    {\n        return View(); \n    }\n</code></pre>\n\n<p>Which still serves the same view as the Index action method in this controller. Even though I can see it executing the <code>Test.Areas.Mobile.Controllers.HomeController().Index()</code> action method just fine. What's going on here? And how do I serve the Index view from Mobile area without changing the request URL (as asked in the original post referenced above)? </p>\n"},{"tags":["jquery","asp.net-mvc-3","razor","popup","form-submit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":104,"score":0,"question_id":13175490,"title":"Form Submit on Click of button in jquery model popup","body":"<p>In my <code>MVC3 (Razor)</code> application i have a page which contains a form.</p>\n\n<pre><code> @using (Html.BeginForm(\"SaveReceipt\", \"ClinicInvoiceReceipt\", FormMethod.Post, new { id = \"form1\" }))\n   { }\n</code></pre>\n\n<p>Like above. In the same page i have <code>Jquery model popup</code> and it contains a button.\nI want to <code>submit the form form1</code> on the button click in the popup.</p>\n\n<p>i tried </p>\n\n<pre><code>    $(\"#ReceiptSave\").click(function (e) {\n        e.preventDefault();\n        $('#ConfirmationDiv').dialog('close');// for closing popup\n        $(\"#form1\").submit();\n    });\n</code></pre>\n\n<p>But it does not works. If anybody know the reason please help me. am stuck on this.</p>\n\n<p>In error console it shows the following error\n<img src=\"http://i.stack.imgur.com/9Cb5w.png\" alt=\"enter image description here\"></p>\n"},{"tags":["asp.net-mvc-3","caching"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13215414,"title":"mvc3 - load cached results into .aspx View","body":"<p><strong>Background</strong></p>\n\n<p>---- Clicking Submit on my \"Page1\" View (by the Action in the <strong>ASPX</strong> View's BeginForm(...)) runs a web service. I deserialize and query the response in the returned XML from the service. Based on the result of my query (True/False) my code decides which page the user lands on after Submit, Page1 or Page2 (If True = Page 1, If False = Page 2). Just before returning the View I CACHE the results of the FIRST SERVICE. I've worked hard on this and it works as it should.</p>\n\n<pre><code>HttpContext.Cache.Insert(resultsFromFirstService.Guid, resultsFromFirstService, null, DateTime.Now.AddMinutes(60), TimeSpan.Zero);\n</code></pre>\n\n<p>---- If the user is returned to Page1 they are to click Submit again before going to Page2. On this <strong>second</strong> Submit from Page1 there is a second web service that must be run and it's response also is deserialized ...\"crunched\" ...and portions of the results of the second service are displayed on Page2.</p>\n\n<p>Service 1 depends on Service 2. On the user's <strong>second</strong> Submit from Page1.</p>\n\n<p><strong>Question</strong></p>\n\n<p>How can I load the previously cached results of the 1st Service into the call to \"return\" the View:</p>\n\n<pre><code>return View(\"Page2\", GetMaster(), resultsFromFirstService);\n</code></pre>\n\n<p>I consistently use return small strings and key's of data back from the cache using the following:</p>\n\n<pre><code>HttpContext.Cache.Get(\"NameOfCachedKeyOrElement\");\n</code></pre>\n\n<p>Do I have to create an \"extension\" class and manually match element for element? Or is there a better way to do this?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13115822,"title":"mvc3 - how to update the action attribute for Html.BeginForm() from the controller","body":"<p>In an .ASPX View (not Razor) ...Is it possible... or... How can I modify the action on</p>\n\n<pre><code>    Html.BeginForm(\"**ACTION**\", \"controllername\",  FormMethod.Post, new { id = \"formId\" }))\n</code></pre>\n\n<p>of a view from an ActionResult of a Controller just before calling the view?</p>\n"},{"tags":["json","asp.net-mvc-3","jquery-ajax"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13212872,"title":"ajax post multiple parameters does not pass properly to asp.net mvc action","body":"<p>I am not able to pass 2 parameters to the action method as json. I have the following ASP.net MVC3 action. </p>\n\n<pre><code>    [HttpPost]\n    public JsonResult Create( PatientContactEpisodes patientcontactepisode, IList&lt;PatientContactEpisodeProcedures&gt; patientcontactepisodeprocedures)\n</code></pre>\n\n<p>And my ajax post looks like this.</p>\n\n<pre><code>     $(\"#SaveButton\")\n        .button()\n        .click(function () {\n            var episode = getpatientcontactepisode();\n            $.ajax({\n            type: 'POST',\n            traditional: true,\n            url: \"/User/PatientContactEpisodes/Create\",\n            contentType: 'application/json, charset=utf-8',\n            data: {patientcontactepisode: JSON.stringify(episode), patientcontactepisodeprocedures: JSON.stringify(createArray)},\n            //data: JSON.stringify(episode),\n            dataType: \"json\",\n            success: function (results) {                                                           \n                alert(\"success\");\n            }\n        });\n     }); \n</code></pre>\n\n<p><strong>ISSUE</strong></p>\n\n<p>The issue is that the value does not seem to be passed when I send both parameters to the action. Both are null/empty. Whereas, when i send a single parameter</p>\n\n<pre><code>    //data: JSON.stringify(episode), or //data: JSON.stringify(createarray),\n</code></pre>\n\n<p>The above works fine.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","asp.net-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13204696,"title":"ajax redirect after successful login","body":"<p>I have been all over the internet trying to figure this one out.  I am trying to add a jquery dialog window that will call an action to login a user and then upon successful login, redirect the user to their profile page, otherwise keep the dialog window open and prompt the user with the appropriate error message.  Up to this point, the login part seems to work but when the action returns it keeps the user on the same page.  What changes do I need to make to determine a successful login and redirect appropriately?  Here is my code:</p>\n\n<pre><code>\"Javascript code\"\n$.validator.unobtrusive.parse('#LogOnForm');\n$('#LogOnDialog').dialog({\n    autoOpen: false, width: 450, height: 300, modal: true,\n     buttons: {\n        'Log On': function () {\n            if ($('#LogOnForm').validate().form()){\n                $.ajax({\n                    url: '@Url.Action(\"LogOnPartial\", \"Account\")',\n                        type: 'POST',\n                        data: $('form').serialize(),\n                        datatype: 'json',\n                        success: function (result) {\n                            $('#LogOnDialog').html(result).dialog('open');\n                        }\n                    });\n                }\n            },\n            Cancel: function () { \n                $(this).dialog('close'); \n            }\n        }\n    });\n\n\n\n\n    $('#linkSignIn').live('click', function () {\n        $('#LogOnDialog').html('')\n        .dialog('option', 'title', 'Sign In')\n        .load('@Url.Action(\"LogOnPartial\", \"Account\")', function () { $('#LogOnDialog').dialog('open'); });\n    });\n\n\n\n    \"Controller Action\"\n    [HttpPost]\n    public ActionResult LogOnPartial(LogOnModel model)\n    {\n        if (ModelState.IsValid)\n        {\n            UserPrincipal principal = new UserPrincipal(model.EmailAddress, model.Password);\n            HttpContext.User = principal;\n            FormsAuthentication.SetAuthCookie(model.EmailAddress, true);\n            return PartialView(\"LogOnPartial\", model);\n        }\n\n        return PartialView(\"LogOnPartial\", model);\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","orchardcms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13211083,"title":"Orchard CMS Recent Blog Post Widget Alternate View","body":"<p>I'm new to Orchard CMS and MVC so please forgive my ignorance. I've done a search and not found anything apparently relevant....</p>\n\n<p>In one of the Footer Quad zone on my Orchard site I want to show the 5 most recent blog posts, just by title. At present it show the title, post, tags etc all in their unformatted state(Ive not style the blog yet).</p>\n\n<p>Using the tracing tool I've created an alternate view called; </p>\n\n<pre><code>Parts.Blogs.RecentBlogPosts\n</code></pre>\n\n<p>However the only content in this view is;</p>\n\n<pre><code>@Display(Model.ContentItems)\n</code></pre>\n\n<p>Which -unlike other installed widgets Ive edited alternate views for- doesn't give me anything to play around with to create the layout I'm needing to create.</p>\n\n<p>Have I selected the wrong shape / view, or do I need to get stuck in with some coding???</p>\n\n<p>As I say, I'm new to both MVC and Orchard but very keen to learn. Any help on this will, as always, be greatly appreciated.</p>\n"},{"tags":["asp.net-mvc-3","view","model"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13213026,"title":"MVC3: Create View populating data in object and in attribute object at same time","body":"<p>I'm pretty sure that this have been answered before, but i'm having trouble in finding anything that can help me. The problem is:</p>\n\n<p>I have what would be a generic class and its specialization, like a PERSON and a CLIENT (which IS a PERSON). So, i have 2 tables on the database, which are:</p>\n\n<pre><code>PESSOA_FISICA\n  ID_PESSOA_FISICA  Identity\n  TX_NOME           Varchar(120)\n  TX_CPF            Char(8)\n  DT_NASCIMENTO     DateTime\n\nCLIENTE_VAREJO\n  ID_CLIENTE_VAREJO Identity\n  ID_PESSOA_FISICA  Int      (FK to PESSOA_FISICA)\n  IN_STATUS         Char(1)\n  TX_FILIAL         Varchar(20)\n</code></pre>\n\n<p>For the C# classes, i got this:</p>\n\n<pre><code>[Table(\"PESSOA_FISICA\")]\npublic class PessoaFisica\n{\n    [Key]\n    [Column(\"ID_PESSOA_FISICA\")]\n    public int? IDPessoaFisica { get; set; }\n\n    [Column(\"TX_NOME\")]\n    public string Nome { get; set; }\n\n    [Column(\"TX_CPF\")]\n    public string CPF { get; set; }\n\n    [Column(\"DT_NASCIMENTO\")]\n    public DateTime Nascimento { get; set; }\n}\n\n[Table(\"CLIENTE_VAREJO\")]\npublic class ClienteVarejo\n{\n    [Key]\n    [Column(\"ID_CLIENTE_VAREJO\")]\n    public int? IDClienteVarejo {get;set;}\n\n    [Column(\"ID_PESSOA_FISICA\")]\n    [ForeignKey(\"PessoaFisica\")]\n    public int IDPessoaFisica { get; set; }\n\n    public virtual PessoaFisica PessoaFisica { get; set; }\n\n    [Column(\"IN_STATUS\")]\n    public String Status { get; set; }\n\n    [Column(\"TX_FILIAL\")]\n    public String Filial { get; set; }\n}\n</code></pre>\n\n<p>The problem is... I just don't know how to create a CREATE view that can accept data into the ClienteVarejo model, but also into the PessoaFisica at the same time (because, whenever i'll be entering data for a new ClienteVarejo, i'll have to be entering data for a new PessoaFisica as well).</p>\n\n<p>I've already realized that, in a View strongly typed as ClienteVarejo, i could use Razor syntax like:</p>\n\n<pre><code>@Html.EditorFor(model =&gt; model.PessoaFisica.Nome)\n</code></pre>\n\n<p>But in my case (which is: in the creation of both objects at same time), how to make the model validation occur to both objects? </p>\n\n<p>Thanks for any help that you can give me... :)</p>\n\n<p>Marcelo Myara\nRio de Janeiro, Brazil</p>\n"},{"tags":["asp.net-mvc-3","embedded-resource","code-reuse"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13146358,"title":"Can I create a controller in a common assembly which will be accessible by any assmbly which references it?","body":"<p>I have a common assembly where I put a lot of my helper functions etc.  I want to create a common <code>EmbeddedResourceController</code> (kind of like WebResource.axd was for WebForms) which all my HTML helpers can use to embed and display their scripts and styles.  The problem is, I need to be able to create an include path from my HTML helper code in a project agnostic way (ie without knowing any of the routing/controller rules in that project).</p>\n\n<p>Ideally, I want to create an include like <code>&lt;script type=\"text/javascript\" src=\"/EmbeddedResource/myJsScript.js\"&gt;&lt;/script&gt;</code> from the helper code and have it work in every project that uses my common dll.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":3,"favorite_count":5,"up_vote_count":12,"down_vote_count":0,"view_count":8178,"score":12,"question_id":6585585,"title":"MVC binding to model with list property ignores other properties","body":"<p>I have a basic ViewModel with a property that is a List of complex types. When binding, I seem to be stuck with getting either the list of values, OR the other model properties depending on the posted values (i.e. the view arrangement).</p>\n\n<p>The view model:</p>\n\n<pre><code>public class MyViewModel\n{\n    public int Id { get; set; }\n    public string Property1 { get; set; }\n    public string Property2 { get; set; }\n\n    public List&lt;MyDataItem&gt; Data { get; set; }\n}\n\npublic class MyDataItem\n{\n    public int Id { get; set; }\n    public int ParentId { get; set; }\n    public string Name { get; set; }\n    public string Value { get; set; }\n}\n</code></pre>\n\n<p>The controller actions:</p>\n\n<pre><code>    public ActionResult MyForm()\n    {\n        MyViewModel model = new MyViewModel();\n\n        model.Id = 1;\n        model.Data = new List&lt;MyDataItem&gt;() \n        { \n            new MyDataItem{ Id = 1, ParentId = 1, Name = \"MyListItem1\", Value = \"SomeValue\"}\n        }; \n\n        return View(model);\n    }\n\n    [HttpPost]\n    public ActionResult MyForm(MyViewModel model)\n    {\n        //...\n\n        return View(model);\n    }\n</code></pre>\n\n<p>Here is the basic view (without the list mark-up)</p>\n\n<pre><code>@using (Html.BeginForm()) {\n    @Html.ValidationSummary(true)\n    &lt;fieldset&gt;\n        &lt;legend&gt;My View Model&lt;/legend&gt;\n\n        @Html.HiddenFor(model =&gt; model.Id)\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.Property1)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.Property1)\n            @Html.ValidationMessageFor(model =&gt; model.Property1)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.Property2)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.Property2)\n            @Html.ValidationMessageFor(model =&gt; model.Property2)\n        &lt;/div&gt;\n\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Save\" /&gt;\n        &lt;/p&gt;\n    &lt;/fieldset&gt;\n}\n</code></pre>\n\n<p>When posted back to the controller, I get the 2 property values and a null value for the 'Data' property as expected. </p>\n\n<p><img src=\"http://i.stack.imgur.com/Uspzv.gif\" alt=\"Without List Mark-up\"></p>\n\n<p>If I add the mark-up for the List as follows (based on the information in this <a href=\"http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx\">Scott Hanselman post</a> and <a href=\"http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx\">Phil Haack's post</a>):</p>\n\n<pre><code>&lt;div class=\"editor-field\"&gt;\n@for (int i = 0; i &lt; Model.Data.Count(); i++)\n{\n    MyDataItem data = Model.Data[i];\n    @Html.Hidden(\"model.Data[\" + i + \"].Id\", data.Id)\n    @Html.Hidden(\"model.Data[\" + i + \"].ParentId\", data.ParentId)\n    @Html.Hidden(\"model.Data[\" + i + \"].Name\", data.Name)\n    @Html.TextBox(\"model.Data[\" + i + \"].Value\", data.Value)\n}\n&lt;/div&gt;\n</code></pre>\n\n<p>The 'Data' property of the model is successfully bound but the other properties are null. </p>\n\n<p><img src=\"http://i.stack.imgur.com/CAIKg.gif\" alt=\"With List Mark-up\"></p>\n\n<p>The form values posted are as follows:</p>\n\n<pre><code>Id=1&amp;Property1=test1&amp;Property2=test2&amp;model.Data%5B0%5D.Id=1&amp;model.Data%5B0%5D.ParentId=1&amp;model.Data%5B0%5D.Name=MyListItem1&amp;model.Data%5B0%5D.Value=SomeValue\n</code></pre>\n\n<p>Is there a way to get both sets of properties populated or am I just missing something obvious?</p>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>For those of you who are curious. Based on the answer from <a href=\"http://stackoverflow.com/users/2972/martinhn\">MartinHN</a>, the original generated mark-up was:</p>\n\n<pre><code>&lt;div class=\"editor-field\"&gt;\n    &lt;input id=\"model_Data_0__Id\" name=\"model.Data[0].Id\" type=\"hidden\" value=\"1\" /&gt;\n    &lt;input id=\"model_Data_0__ParentId\" name=\"model.Data[0].ParentId\" type=\"hidden\" value=\"1\" /&gt;\n    &lt;input id=\"model_Data_0__Name\" name=\"model.Data[0].Name\" type=\"hidden\" value=\"MyListItem1\" /&gt;\n    &lt;input id=\"model_Data_0__Value\" name=\"model.Data[0].Value\" type=\"text\" value=\"SomeValue\" /&gt;        \n&lt;/div&gt;\n</code></pre>\n\n<p>The new generated mark-up is:</p>\n\n<pre><code>&lt;div class=\"editor-field\"&gt;\n    &lt;input id=\"Data_0__Id\" data-val=\"true\" name=\"Data[0].Id\" type=\"hidden\" value=\"1\" data-val-number=\"The field Id must be a number.\" data-val-required=\"The Id field is required.\" /&gt;\n    &lt;input id=\"Data_0__ParentId\" name=\"Data[0].ParentId\" type=\"hidden\" value=\"1\"  data-val=\"true\" data-val-number=\"The field ParentId must be a number.\" data-val-required=\"The ParentId field is required.\" /&gt;\n    &lt;input id=\"Data_0__Name\" name=\"Data[0].Name\" type=\"hidden\" value=\"MyListItem1\" /&gt;\n    &lt;input id=\"Data_0__Value\" name=\"Data[0].Value\" type=\"text\" value=\"SomeValue\" /&gt;        \n&lt;/div&gt;\n</code></pre>\n\n<p>Which results in the following posted values:</p>\n\n<pre><code>Id=1&amp;Property1=test1&amp;Property2=test2&amp;Data%5B0%5D.Id=1&amp;Data%5B0%5D.ParentId=1&amp;Data%5B0%5D.Name=MyListItem1&amp;Data%5B0%5D.Value=SomeValue\n</code></pre>\n\n<p>Notice there's no 'model.' in the name and posted values...</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":702,"score":2,"question_id":4831944,"title":"MVC3 Validation","body":"<p>For some reason my Identity column \"ID\" gets validated by MVC3? why is this happening when i did not specify it to be required.?? I have this \"@Html.HiddenFor(model => model.Id)\" in my view, which should not cause any issues.</p>\n\n<pre><code>public class User {\n    public int Id { get; set; }\n    [Required]\n    public string Name { get; set; }\n    [Required]\n    public string Email { get; set; }\n}\n</code></pre>\n\n<p>please help.</p>\n"},{"tags":["asp.net-mvc-3","razor","virtualpathprovider"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13209998,"title":"asp.net mvc virtual views and web configuration","body":"<p>There are many examples out there which show how to store and retrieve virtual views from a file or database, but none of them show how to configure root web.config so that the application works properly, when a view's content retrieved from a file and contains for instance <code>@ViewBag.Title = \"Some Title\"</code> line.</p>\n\n<p>In this case I get <em>CS0103: The name 'ViewBag' does not exist in the current context</em> error, \njust like in cases when I remove web.config from ~/Views project folder.</p>\n\n<p>So, what config elements from the ~/Views/web.config to root web.config in order to fix the mentioned above error?</p>\n\n<p>Is it possible to load config elements into assemby at run time?</p>\n"},{"tags":["asp.net-mvc-3","forms","dll","interface","dynamic-language-runtime"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13210211,"title":"ASP.NET MVC application extendable by 3rd party DLL","body":"<p>This is a fairly tricky question to explain, but here goes.</p>\n\n<p>I am writing a dynamic form framework of sorts, similar in some ways to wufoo, jotform etc.</p>\n\n<p>The form building is all done in the database, but what I need to do is enable people to write their own \"DLL\" to extend the server side form processing.  This DLL would implement a particular interface, and would be added to the project to process the results of the form submit.  </p>\n\n<p>The interface would looks like this:</p>\n\n<pre><code> public interface IFormSubmitHandler {\n     Result SubmitForm(Dictionary&lt;string, string&gt; submittedForm, RequestSettings requestSettings);\n }\n</code></pre>\n\n<p>The Result class looks like this:</p>\n\n<pre><code>public class Result {\n    public bool Success { get; set; }\n    public string Message { get; set; }\n}\n</code></pre>\n\n<p>So the setup for the user would be to build their form, and then upload the DLL that conforms to the above interface.  The form gets submitted, passes the normal server side validation, and then gets passed to the 3rd party handler/DLL for further processing, carrying out any further logic.</p>\n\n<p>Hope that is clear enough!  So my questions are:</p>\n\n<ol>\n<li>Is there another way that would be better to achieve this extensability? </li>\n<li>Is there a way I can \"sandbox\" these DLLs, so they can work on the provided interface, and call a web service but eliminate risk of malicious code (e.g. deleting all files on the web server!).</li>\n<li>How would I go about calling a particular DLL in runtime, without registering it at compile time (the database would have a list of these, with file paths etc).</li>\n</ol>\n\n<p>Please let me know if you need any further information, and hope the question isn't too broad.</p>\n"},{"tags":["asp.net-mvc-3","checkbox","webgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13206347,"title":"inside webgrid create a checkbox","body":"<p>i want to create a checkbox option inside webgrid with value as int</p>\n\n<p>below how i have done...</p>\n\n<pre><code>grid.Column(\"\",header:\"Select\",format:(item)=&gt;Html.CheckBox(String.Format(\"{0}\",(int)item.ID),false,new{id=\"chkSelected\", Style=\"width:60px\"})),\n</code></pre>\n\n<p>it is working fine for me, but i wanted to use something like below</p>\n\n<pre><code>grid.Column(header: \"{CheckBoxHeading}\",  format:\n            @&lt;text&gt;&lt;input class=\"box\"  type=\"checkbox\" /&gt;&lt;/text&gt;)\n</code></pre>\n\n<p>note: i am using aspx engine instead on razor</p>\n\n<p>kindly help me..how do i achieve the above syntax with aspx engine</p>\n\n<p>thanks<br>\nAman</p>\n"},{"tags":["asp.net-mvc-3","telerik-grid","telerik-mvc","kendo-ui","kendo"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13207044,"title":"How to access value of collection property of Model in ClientRowTemplate of KendoUI","body":"<pre><code>@(Html.Kendo().Grid(Model)\n    .Name(\"Grid\")\n    .Columns(columns =&gt;\n    {\n        columns.Bound(p =&gt; p.AirlineCode).Title(\"Airline\");\n        columns.Bound(p =&gt; p.SegmentInfo[0].FareClass).Title(\"Fare Class\");\n    }\n    .ClientRowTemplate( \n        \"&lt;tr&gt;\"+\n        \"&lt;td style =\\\"width: 130px\\\"&gt;&lt;img src=\\\"/Content/themes/base/image/#=AirlineCode#.jpg\\\"/&gt;&lt;span&gt; #=AirlineName#&lt;/span&gt;&lt;/td&gt;\" + \n        \"&lt;td&gt;&lt;div class=\\\"ClassType\\\"&gt; //#=SegmentInfo[0].FareClass//#  &lt;/div&gt;&lt;/td&gt;\"+\"&lt;/tr&gt;\"\n    )\n</code></pre>\n\n<p>How should I write <code>//#=SegmentInfo[0].FareClass//#</code> section of could to get the value from Model Property <code>SegmentInfo</code> ,which is an class object and I need to access it's Property called <code>FareClass</code> which is string object. </p>\n\n<p>Try to give the proper syntax to access this kind of object value.</p>\n\n<p>Thanks in advance to my helper.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12802171,"title":"ASP.NET MVC 3 update field before validation","body":"<p>The problem I'm having right now it's that ASP.NET MVC validates the request object, <em>user</em> in this case</p>\n\n<pre><code>public ActionResult Edit(User user)\n</code></pre>\n\n<p>What I want to do is that if the user's password is left blank, do not update the password, just use the old password, but if it's set, update it.</p>\n\n<p>The problem is that the framework complains that user does not has a password, even if I update the <em>user</em> object, it complains</p>\n\n<pre><code>public ActionResult Edit(User user)\n{\n    user.Password = \"Something\";\n\n    // more code...\n}\n</code></pre>\n\n<p>Apparently it does the validation on the request object, is there a way I can skip the validation in this case, or at least delay it until I finished modifying the user object?</p>\n\n<p>This is the full method code</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Edit(User user)\n{    \n    if (string.IsNullOrEmpty(user.Password))\n    {\n        var oldUser = db.Users.Single(u =&gt; u.Id == user.Id);\n        user.Password = oldUser.Password;\n    }\n\n    try\n    {\n        db.SaveChanges();\n        return RedirectToAction(\"Index\");\n    }\n    catch\n    {\n        return View(user);\n    }\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":48,"score":-1,"question_id":13191793,"title":"Data Is not Displayed on Webpage in my MVC App","body":"<p>Not able to display data on webpage. Though I've checked my project thoroughly but couldn't find the problem.\n<br>There are no problems with connection String because I've checked it in another project.</p>\n\n<p>It will be appreciated if anyone could tell me the steps through which could resolve the issue.\nCheers!</p>\n\n<pre><code>namespace MvcMovieCollectionApp.Models\n{\n    public class MovieCollection\n    {\n        public int ID { get; set; }\n        public string Title { get; set; }\n        public DateTime ReleaseDate { get; set; }\n        public string Genre { get; set; }\n        public decimal Price { get; set; }\n    }\n}\n\nnamespace MvcMovieCollectionApp.DAL\n{\n    public class MovieCollectionDBContext : DbContext\n    {\n        public DbSet&lt;MovieCollection&gt; MovieCollectionPkg { get; set; }\n    }\n}\n\nnamespace MvcMovieCollectionApp.Controllers\n{\n    public class MovieCollectionController : Controller\n    {\n        MovieCollectionDBContext db = new MovieCollectionDBContext();\n        //\n        // GET: /MovieCollection/\n\n        public ActionResult Index()\n        {\n            var movCollObj = db.MovieCollectionPkg;\n            return View(movCollObj.ToList());\n        }\n\n    }\n}\n\n----------------------------------------------------------------------------------\n@model IEnumerable&lt;MvcMovieCollectionApp.Models.MovieCollection&gt;\n\n@{\n    ViewBag.Title = \"Index\";\n    Layout = \"~/Views/Shared/_Layout.cshtml\";\n}\n\n&lt;h2&gt;Adventure Items&lt;/h2&gt;\n\n&lt;table&gt;\n &lt;tr&gt;\n  &lt;th&gt;ID&lt;/th&gt;\n  &lt;th&gt; Title &lt;/th&gt;\n  &lt;th&gt; ReleaseDate &lt;/th&gt;\n  &lt;th&gt; Genre &lt;/th&gt;\n  &lt;th&gt; Price &lt;/th&gt;\n &lt;/tr&gt;\n\n@foreach (MvcMovieCollectionApp.Models.MovieCollection item in Model)\n{\n &lt;tr&gt;\n  &lt;td&gt;\n    @item.ID:\n  &lt;/td&gt;\n  &lt;td&gt;\n   @Html.DisplayFor(modelItem =&gt; item.Title)\n  &lt;/td&gt;\n  &lt;td&gt;\n   @Html.DisplayFor(modelItem =&gt; item.ReleaseDate)\n  &lt;/td&gt;\n  &lt;td&gt;\n   @Html.DisplayFor(modelItem =&gt; item.Genre)\n  &lt;/td&gt;\n  &lt;td&gt;\n   @Html.DisplayFor(modelItem =&gt; item.Price)\n  &lt;/td&gt;\n &lt;/tr&gt;\n}\n&lt;/table&gt; \n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13207355,"title":"How to generate empty href in an MVC 3 razor view","body":"<p>For starters, I'm fairly new in MVC3 so my knowledge is limited. I know that what I ask can be achieved by hardcoding plain <code>&lt;a href=\"\"&gt;</code> in the view page. But is there any way to do that using HTML helper (like ActionLink or RouteLink)?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":38,"score":-5,"question_id":13206627,"title":"How to show the text when mouse over the image?","body":"<p>I want to display a text over the image when mouse hover in asp.net mvc3.\nHelp me for this as soon as possible.</p>\n"},{"tags":["jquery","ajax","asp.net-mvc-3","webgrid"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3003,"score":1,"question_id":8590177,"title":"ASP.NET MVC 3.0 WebGrid - Ajax Enabled","body":"<p>I'm encountering the following problem: \"A JQuery script reference is required in order to enable Ajax support in the \"WebGrid\" helper\"</p>\n\n<p>I want to make my WebGrid AJAX enabled. I got this code for the Partial View</p>\n\n<pre><code>@ModelType WebGrid\n\n@Model.GetHtml(tableStyle:=\"webgrid\", headerStyle:=\"webgrid-header\", footerStyle:=\"webgrid-footer\", alternatingRowStyle:=\"webgrid-alternating-row\", selectedRowStyle:=\"webgrid-selected-row\", rowStyle:=\"webgrid-row-style\",\n                       columns:=Model.Columns(Model.Column(\n                                             columnName:=GemeentePostColumnsEnum.NISCode.ToString()),\n                                Model.Column(columnName:=GemeentePostColumnsEnum.GemeenteNaam.ToString()),\n                                Model.Column(columnName:=GemeentePostColumnsEnum.DistrictNaam.ToString()),\n                                Model.Column(columnName:=GemeentePostColumnsEnum.PostCode.ToString()),\n                                Model.Column(columnName:=GemeentePostColumnsEnum.PostNaam.ToString()),\n                                Model.Column(\n                                    format:=@@&lt;text&gt;@Ajax.ActionLink(\"Edit\", \"AddEdit\", New With {.NISCode = item.NISCode}, New AjaxOptions With {.UpdateTargetId = \"formGemeentePost\", .InsertionMode = InsertionMode.Replace, .HttpMethod = \"GET\", .OnFailure = \"failure\"})&lt;/text&gt;)))\n</code></pre>\n\n<p>And this code for the controller:</p>\n\n<pre><code>Function SearchForm(searchModel As GemeentePostWebService.GemeentePostCriteria) As PartialViewResult\n            searchModel.Taalcode = \"nl\"\n\n\n           'Code to fill up Model\n\n                ViewBag.WebGrid = CreateGrid(viewModelList)\n                Return PartialView(\"Partial/_Grid\", ViewBag.WebGrid)\n            End If\n        End Function\n\n        Private Function CreateGrid(source As List(Of GemeentePostModel)) As WebGrid\n            Return New WebGrid(source:=source, rowsPerPage:=10, ajaxUpdateContainerId:=\"grid\", defaultSort:=GemeentePostColumnsEnum.GemeenteNaam)\n        End Function\n</code></pre>\n\n<p>When I enter some search values and submit the form, I get the following error:</p>\n\n<p>\"A JQuery script reference is required in order to enable Ajax support in the \"WebGrid\" helper\"</p>\n\n<p>With as result: I got the right filtered values, but my div (updatetargetid) isn't filled up.</p>\n\n<p>I already added the jQuery and unobtrusive scripts and included them in my header:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;X&lt;/title&gt;\n    &lt;link href=\"/X/Content/Site.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;link href=\"/X/Content/themes/base/jquery.ui.all.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;script src=\"/X/Scripts/jquery-1.5.1.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script src=\"/X/Scripts/jquery-ui-1.8.11.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script src=\"/X/Scripts/jquery.unobtrusive-ajax.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n</code></pre>\n"},{"tags":["linq-to-sql","asp.net-mvc-3","razor"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":6595,"score":2,"question_id":5896842,"title":"Using System.Data.Linq in a Razor view","body":"<p>I may have a fundamental misunderstanding of what is going on here, but I'm having an issue looping through a LinqToSQL class in my razor view:</p>\n\n<pre><code>&lt;h3&gt;Owners&lt;/h3&gt;\n@foreach (var ThisOwner in Prop.PropertyOwnerships.Where(p=p.bIsOwner.Value==true))\n{\n&lt;div class=\"ODEditEntry\"&gt;\n...\n</code></pre>\n\n<p>I'm getting the following error:</p>\n\n<p>Compiler Error Message: CS0012: The type 'System.Data.Linq.EntitySet`1' is defined in an assembly that is not referenced. You must add a reference to assembly 'System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.</p>\n\n<p>I tried putting @using System.Data.Linq at the top of the cshtml file but it is telling me that Linq doesn't exist in the System.Data namespace.  This is obviously not true and, yes, I do have system.data.linq as a reference in my project.</p>\n\n<p>Any Ideas here?  Is a import needed?  Can I just not do Linq style stuff in my razor views?  That would seem....odd?</p>\n"},{"tags":["jquery","regex","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13196863,"title":"How to check multiple file extension with using javascript in MVC3?","body":"<p>Hello everyone I'm trying to put a file upload button and this button provides to upload video files with extension mp4,avi,swf so how can I check these multiple extension with javascript?</p>\n\n<pre><code>@using (Html.BeginForm(\"Index\", \"Home\", FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n    {\n        &lt;br /&gt;\n        &lt;p&gt;&lt;input type=\"file\" id=\"file\" name=\"file\" size=\"23\"/&gt;&lt;/p&gt;&lt;br /&gt;\n        &lt;p&gt;&lt;input type=\"submit\" value=\"Upload file\" /&gt;&lt;/p&gt;        \n    }  \n</code></pre>\n\n<p>Javascript:</p>\n\n<pre><code>$(function () {\n    $('form').submit(function () {\n        var selectedFile = $('#file').val();\n        var matches = selectedFile.match(/\\.(xlsx?)$/i);\n        if (matches == null) {\n            alert('please select an Excel file');\n            return false;\n        }\n        return true;\n    });\n});\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":2,"favorite_count":1,"up_vote_count":12,"down_vote_count":1,"view_count":258,"score":11,"question_id":13081884,"title":"Unexpected route chosen while generating an outgoing url","body":"<p>Please, consider the following routes:</p>\n\n<pre><code>routes.MapRoute(\n    \"route1\",\n    \"{controller}/{month}-{year}/{action}/{user}\"\n);\nroutes.MapRoute(\n    \"route2\",\n     \"{controller}/{month}-{year}/{action}\"\n);\n</code></pre>\n\n<p>And the following tests:</p>\n\n<p>TEST 1</p>\n\n<pre><code>[TestMethod]\npublic void Test1()\n{\n    RouteCollection routes = new RouteCollection();\n    MvcApplication.RegisterRoutes(routes);\n    RequestContext context = new RequestContext(CreateHttpContext(), \n                                                new RouteData());\n\n    DateTime now = DateTime.Now;\n    string result;\n\n    context.RouteData.Values.Add(\"controller\", \"Home\");\n    context.RouteData.Values.Add(\"action\", \"Index\");\n    context.RouteData.Values.Add(\"user\", \"user1\");\n    result = UrlHelper.GenerateUrl(null, \"Index\", null,\n                                    new RouteValueDictionary(\n                                        new\n                                        {\n                                            month = now.Month,\n                                            year = now.Year\n                                        }),\n                                    routes, context, true);\n    //OK, result == /Home/10-2012/Index/user1\n    Assert.AreEqual(string.Format(\"/Home/{0}-{1}/Index/user1\", now.Month, now.Year), \n                    result);\n}\n</code></pre>\n\n<p>TEST 2</p>\n\n<pre><code>[TestMethod]\npublic void Test2()\n{\n    RouteCollection routes = new RouteCollection();\n    MvcApplication.RegisterRoutes(routes);\n    RequestContext context = new RequestContext(CreateHttpContext(), \n                                                new RouteData());\n\n    DateTime now = DateTime.Now;\n    string result;\n\n    context.RouteData.Values.Add(\"controller\", \"Home\");\n    context.RouteData.Values.Add(\"action\", \"Index\");\n    context.RouteData.Values.Add(\"user\", \"user1\");\n    context.RouteData.Values.Add(\"month\", now.Month + 1);\n    context.RouteData.Values.Add(\"year\", now.Year);\n    result = UrlHelper.GenerateUrl(null, \"Index\", null,\n                                    new RouteValueDictionary(\n                                        new\n                                        {\n                                            month = now.Month,\n                                            year = now.Year\n                                        }),\n                                    routes, context, true);\n    //Error because result == /Home/10-2012/Index\n    Assert.AreEqual(string.Format(\"/Home/{0}-{1}/Index/user1\", now.Month, now.Year), \n    result);\n}\n</code></pre>\n\n<p>This test emulates a situation when I already have route values in request context and try to generate an outgoing url with UrlHelper. </p>\n\n<p>The problem is that (presented in test 2), if I have values for all the segments from the expected route (here <code>route1</code>) and try to replace some of them through <code>routeValues</code> parameter, the wanted route is omitted and the next suitable route is used.</p>\n\n<p>So test 1 works well, as the request context already has values for 3 of 5 segments of route 1, and values for the missing two segments (namely, <code>year</code> and <code>month</code>) are passed through the <code>routeValues</code> parameter.</p>\n\n<p>Test 2 has values for all 5 segments in the request context. And I want to replace some of them (namely, month and year) with other values throught <code>routeValues</code>. But route 1 appears to be  <em>not suitable</em> and route 2 is used.</p>\n\n<p>Why? What is incorrect with my routes? </p>\n\n<p>Am I expected to clear request context manually in such circumstances?</p>\n\n<p><strong>EDIT</strong></p>\n\n<pre><code>[TestMethod]\npublic void Test3()\n{\n    RouteCollection routes = new RouteCollection();\n    MvcApplication.RegisterRoutes(routes);\n    RequestContext context = new RequestContext(CreateHttpContext(), \n                                                new RouteData());\n\n    DateTime now = DateTime.Now;\n    string result;\n\n    context.RouteData.Values.Add(\"controller\", \"Home\");\n    context.RouteData.Values.Add(\"action\", \"Index\");\n    context.RouteData.Values.Add(\"month\", now.Month.ToString());\n    context.RouteData.Values.Add(\"year\", now.Year.ToString());\n    result = UrlHelper.GenerateUrl(null, \"Index\", null,\n                                    new RouteValueDictionary(\n                                        new\n                                        {\n                                            month = now.Month + 1,\n                                            year = now.Year + 1\n                                        }),\n                                    routes, context, true);\n    Assert.AreEqual(string.Format(\"/Home/{0}-{1}/Index\", now.Month + 1, now.Year + 1), \n                    result);\n}\n</code></pre>\n\n<p>This test makes things more confused. Here I'm testing route2. And it works! I have values for all 4 segments in the request context, pass other values through <code>routeValues</code>, and the generated outgoing url is OK.</p>\n\n<p>So, the problem is with route1. What am I missing?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>From <em>Sanderson S. Freeman A. -  Pro ASP.NET MVC 3 Framework Third Edition</em>:</p>\n\n<blockquote>\n  <p>The routing system processes the routes in the order that they were\n  added to the RouteCollection object passed to the RegisterRoutes\n  method. Each route is inspected to see if it is a match, which\n  requires three conditions to be met:</p>\n  \n  <ol>\n  <li>A value must be available for every segment variable defined in the URL pattern. To find values for each segment variable, the routing\n  system looks first at the <strong>values we have provided (using the\n  properties of anonymous type), then the variable values for the\n  current request, and finally at the default values defined in the\n  route.</strong></li>\n  <li>None of the values we provided for the segment variables may disagree with the default-only variables defined in the route. <em>I\n  don't have default values in these routes</em></li>\n  <li>The values for all of the segment variables must satisfy the route constraints. <em>I don't have constraints in these routes</em></li>\n  </ol>\n</blockquote>\n\n<p>So, according to the first rule I've specified values in an anonymous type, I don't have default values. <strong>The variable values for the current request</strong> - I suppose this to be the values from the request context.</p>\n\n<p>What is wrong with these reasonings for route2, while they work well for route1?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Actually everything started not from unit tests, but from a real mvc application. There I used <a href=\"http://msdn.microsoft.com/en-us/library/dd460294%28v=vs.108%29.aspx\">UrlHelper.Action Method (String, Object)</a> to generate outgoing urls. Since this method is utilized in a layout view (the parent one for the majority of all views), I've taken it into my extension helper method (to exclude extra logic from views), This extension method extracts the action name from the request context, passed to it as an argument. I know I could extract all the current route values through the request context and replace those <em>year</em> and <em>month</em> (or could I create an anonymous route value collection, containing all the values from the context), but I thought it was superfluous, as mvc automatically took into account the values contained in the request context. So, I extracted only action name, as there were no UrlHelper.Action overload without action name (or I'd have liked even to \"not specify\" action name too), and added the new month and year through anonymous route value object. </p>\n\n<p>This is an extension method:</p>\n\n<pre><code>public static MvcHtmlString GetPeriodLink(this HtmlHelper html, \n                                          RequestContext context, \n                                          DateTime date)\n{\n    UrlHelper urlHelper = new UrlHelper(context);\n    return MvcHtmlString.Create(\n              urlHelper.Action(\n                 (string)context.RouteData.Values[\"action\"], \n                 new { year = date.Year, month = date.Month }));\n}\n</code></pre>\n\n<p>As I described in the tests above, it worked for shorter routes (when request context contained only controller, year and month, and action), but failed for a longer one (when request context contained controller, year and month, action, and user).</p>\n\n<hr>\n\n<p>I've posted a workaround I use to make the routing work the way I need. </p>\n\n<p><em>While indeed I would love to find out, why on earth do I have to make any workaround in such scenario and what is the key difference between these two routes that prevents <code>route1</code> from working the way <code>route2</code> does.</em></p>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>Another remark. As far as the values in request context are of type <code>string</code>, I decided to try to set them into the context as strings to ensure there were no type confusion (int vs string). I do not understand, what has changed in this respect, but some of the routes started generating correctly. But not all...This makes yet less sense. I've changed this in a real application, not tests, as the tests have <code>int</code> in context, not strings.</p>\n\n<p>Well, I've found the condition under which <em>route1</em> is used - it's only used when the values of <code>month</code> and <code>year</code> in the context are equal to the ones given in the anonymous object. If they differ (in the tests this is true both for <code>int</code> and <code>string</code>), <em>route2</em> is used. But why?</p>\n\n<p>This confirms what I have in my real application:</p>\n\n<ol>\n<li>I had <code>string</code>s in the context, but provided <code>int</code>s through the anonymous object, it somehow confused the mvc and it couldn't use <code>route1</code>. </li>\n<li>I changed <code>int</code>s in the anonymous object to <code>string</code>s, and the urls where <code>month</code> and <code>year</code> in context are equal to the ones in the anonymous object, started generating correctly; whereas all others didn't.</li>\n</ol>\n\n<p>So, I see one rule: the properties of the anonymous object should be of type <code>string</code> to match the type of the route values in the request context.</p>\n\n<p>But this rule seems to be <strong>not compulsory</strong>, as in <em>Test3</em>, I changed the types (you may see it now above) and it still works correctly. MVC manages to cast types itself correctly.</p>\n\n<hr>\n\n<p>Finally I found the explanation to all this behaviour. Please, see my answer below.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","telerik","telerik-grid","telerik-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":11983723,"title":"How to separate (by using line) set of rows, set of rows and so on.. in a Telerik MVC Grid","body":"<p>I am having Telerik MVC Grid - It consists of 3 columns and n number of rows. Say For eg., I want to add a line for each Header. Each Header has number of rows based on number of Detail Items. 1st coulmn is Header, 2nd column is Checkbox to select the detail item, 3rd column is Detail Item.</p>\n\n<p>My Code for column bound:</p>\n\n<pre><code>columns.Bound(model =&gt; model.Item).Filterable(false).Title(\"\")\n                .ClientTemplate(\"&lt;b&gt;&lt;#= groupable(Item) #&gt;&lt;/b&gt;\");\n</code></pre>\n\n<p>groupable(Item) return header name through js.</p>\n\n<p>Note: Each Header is displayed only once since each item is grouped and so that don't need to mention header each time till the next header comes. \n<strong>I want to add a line across the columns after each Header.</strong> Thanks</p>\n"},{"tags":["asp.net","asp.net-mvc-3","telerik","telerik-grid","telerik-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":11954050,"title":"ClientGroupHeaderTemplate is not Unique and same header repeated in each row","body":"<pre><code>columns.Bound(model =&gt; model.Item).Filterable(false).Title(\"\")\n           .ClientGroupHeaderTemplate(\"&lt;span&gt; Item: &lt;#= Item #&gt; &lt;/span&gt;\");\n</code></pre>\n\n<p>How can I get the column values from item to be displayed in unique. That is, I don't need the \"Item\" values to be display each time. Just once if it displayed, it should not display again since the task is mainly for grouping Detail Items in to \"Item\" header. \n<strong>\"Items\" which are coming under \"Item\" header should have only 1 \"Item\" header and not for each row (each \"Items\")</strong></p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1873,"score":5,"question_id":5733885,"title":"Can't seem to conditionally create a new table row using Razor's foreach and if statements?","body":"<p>I want a loop to dynamically create a table up to 2 columns wide, and then increase the number of rows until there are no entries left in the list.  Sounds easy, and I came up with this:</p>\n\n<pre><code>&lt;table&gt;\n                    &lt;tr&gt;\n                        @{ var i = 0; }\n                        @foreach (var tm in Model.TeamMembers)\n                        {\n                            &lt;td&gt;@tm.FirstName @tm.LastName @tm.Role&lt;/td&gt;\n\n                            if(++i % 2 == 0)\n                            {\n                                &lt;/tr&gt;\n                                &lt;tr&gt;\n                            }\n                        }\n                    &lt;/tr&gt;\n                &lt;/table&gt;\n</code></pre>\n\n<p>But I get errors stating } expected both for the for loop and the if statement.  If I change the  tags to something else (like  for instance) it works fine.  </p>\n\n<p>My guess is it's trying to validate the end of the row, sees it and decides the loop must be over?  How can I make it NOT do that, or do I need to put the entire table inside the loop with a bunch of messy conditionals? :(</p>\n"},{"tags":["asp.net-mvc-3","knockout.js","knockout-mapping-plugin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12977467,"title":"Knockout Mapping always returns empty array","body":"<p>So here is my code:</p>\n\n<pre><code>var myData= @Html.Raw(ViewBag.MyData);\nconsole.log(myData) //log1\nvar viewModel = { };\nviewModel.model = ko.mapping.fromJS(myData);\nko.applyBindings(viewModel);\nconsole.log(viewModel.model); //log2\n</code></pre>\n\n<p>In my console, <code>log1</code> will always display the array in the <code>[Object, Object, Object]</code> format with the correct data.</p>\n\n<p>However, <code>log2</code> is always empty. I am getting no errors or anything. What could I be doing wrong?</p>\n"},{"tags":["c#","jquery","asp.net-mvc-3"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13203910,"title":"When booking a room how to make already taken dates unclickable in jQuery datepicker?","body":"<p>once more\nI am writing a jQuery script for my hotel asp.net MVC 3 application.\nI would like to make drop down calendar in jQuery so that already reserved dates for particular room are not clickable. \nThat means that first I have to read taken dates from database and then, somehow, read it in jQuery script before showing appropriate calendar for a room reservation date.</p>\n\n<p>Do I need to learn jQuery for all this, if not, how to do it? Is Ajax needed for database retrieval of appointed dates?\nCan you please help me?</p>\n\n<p>thank you very much</p>\n\n<p>P.S. If I need to learn jQuery (and/or Ajax), can you give me some quality resource hints? Thanks</p>\n"},{"tags":["asp.net-mvc-3","authorization","roles"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":28,"score":-1,"question_id":13183974,"title":"Different authorization roles per company","body":"<p>I have an MVC3 intranet application (based on s#arp architecture) which can be used to  maintain and edit info for three companies / business units. Multiple users can login to edit the info, but the rights that they have should depend on the company / business unit that they are working on. I'm using Windows authentication.</p>\n\n<p>I've already figured out that - after selection of a company / business unit by the user - I can dynamically retrieve their rights for that BU from the database and re-apply the correct roles to the user. However, I would like to know if I can support my requirement with custom authorization filters or something else that is based on the authorization standards of MVC 3.</p>\n\n<p>Thanks in advance for your reaction!</p>\n\n<p>Kind regards,\nBjörn</p>\n\n<p>UPDATE\nSome additional info as requested:</p>\n\n<p>The list of companies in the app is not static. As a result it is not possible to create a role per company (e.g. 'Comp1Manager'). I'm aware of the authorize attribute, however I can't have the roles applied to the user after logging in, because they wouldn't have chosen a company at that time and the roles differ per user per company. I know how to reset the roles of the logged in user from within a controller action, but I'm searching for a way to do this without writing code in the controller.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":42,"score":3,"question_id":13203032,"title":"Turn off HttpRequestValidationException logging?","body":"<p>We have an exception that keeps cropping up in our Event Viewer logs for our server, caused by explicit attempts to hack our site by our PCI security company. It gets annoying as it crops up all the time, and initially it was generating the 'yellow screen of death' and logging in the event viewer as an unhandled exception. We put an exception handler around the code where he exception was coming from (inside Phalanger if you are interested), so it now longer crashes and causes the yellow screen of death, but it STILL ends up in the event viewer logs as a warning!</p>\n\n<p>Any idea how to turn it off in the event viewer short of turning off request validation completely, which I was trying to avoid?</p>\n\n<p>We are using ASP.NET MVC 3 so I know I can use the new ValidateInput attribute to do this, but I would rather leave it turned on but be able to handle the exceptions ourselves and not have them get logged to the event viewer even though I catch it and handle it?</p>\n"},{"tags":["asp.net-mvc-3","razor","partial-views"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":5285,"score":1,"question_id":6791939,"title":"MVC3 Strongly typed partial view model binding","body":"<p>I have a strongly typed view, Edit, with a model named OrderModel.  In this view, I am using a strongly typed partial view that has a model named OrderTypeModel. The partial view, _OrderTypeAutoComplete, that contains a jqueryui autocomplete textbox.  If I render the view with this code,</p>\n\n<pre><code>public ActionResult Edit(){\n    return View();\n}\n</code></pre>\n\n<p>My Edit view contains the following Razor markup</p>\n\n<pre><code>&lt;div class=\"editor-field\"&gt;\n    @Html.Partial(\"_OrderTypeAutoComplete\")\n    @Html.HiddenFor(model =&gt; model.OrderTypeID)\n    @Html.ValidationMessageFor(m =&gt; m.OrderTypeID)\n&lt;/div&gt;\n</code></pre>\n\n<p>My Partial view contains this razor markup</p>\n\n<pre><code>@{\n    Layout = null;\n}\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-ui-1.8.11.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n@Html.AutoCompleteFor(model =&gt; model.OrderTypeID, x =&gt;  x.OrderType, \"Items\",\"Orders\")\n</code></pre>\n\n<p>When I render this, all is great and my autocomplete works great (using an auto-complete extension). Anyway, I needed to initialize something in my initial OrderModel, so I changed the code in my controller to this.</p>\n\n<pre><code>public ActionResult Edit(){\n    return View(OrderService.GetInitializedOrderModel()); //returns a new OrderModel\n}\n</code></pre>\n\n<p>Now when I render the view, I get the exception:\nThe model item passed into the dictionary is of type 'Testing.Models.OrderModel', but this dictionary requires a model item of type 'Testing.Models.OrderTypeModel'.</p>\n\n<p>on this line in my view\n    @Html.Partial(\"_OrderTypeAutoComplete\")</p>\n\n<p>It seems the Razor engine will create the OrderModel for the view and the OrderTypeModel for the partial view fine when I haven't supplied the OrderModel.  This will give the same results.</p>\n\n<pre><code>public ActionResult Edit(){\n    return View(new OrderModel())\n}\n</code></pre>\n\n<p>I'm new to MVC so I'm not sure what's going on here.  I'm simply trying to provide some simple dropdown values for my view in the OrderModel model that are small enough that I don't require a jquery postback to get. That's the values I'm initialing in my model for the Http Get on my Edit action.</p>\n\n<p>Any help would be appreciated.  Thanks.</p>\n"},{"tags":["c#","asp.net-mvc-3","r"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13201574,"title":"REngine rengine = REngine.CreateInstance(\"RDotNet\", new[] { \"-q\" } stops the execution further when called second time","body":"<p>I am plotting the forecast graph by using R.NET  and using ASP.NET MVC3. At first time, it creates an instance of RENgine. by </p>\n\n<pre><code>REngine rengine = REngine.CreateInstance(\"RDotNet\", new[] { \"-q\" })\n</code></pre>\n\n<p>and plots the graph as required. But when I call this same method second time by choosing another graph to be plotted, it stops to move further after this,. Please someone help me to figure out where I am going wrong. The code I have used is </p>\n\n<pre><code>using (REngine rengine = REngine.CreateInstance(\"RDotNet\", new[] { \"-q\" }))\n    {\n        rengine.EagerEvaluate(\"YrTimeSeries&lt;-c(123,234,255,456)\");\n        rengine.EagerEvaluate(\"tsValue&lt;-ts(YrTimeSeries,frequency=1,\" \n                               + dt_StartYr.Rows[0][0].ToString() + \")\");\n        rengine.EagerEvaluate(\"library(Cairo);\");\n        rengine.EagerEvaluate(\"library(forecast)\");\n        rengine.EagerEvaluate(@\"CairoPNG('C:\\\\Documents and Settings\\\\a\\\\im.png);\n        rengine.EagerEvaluate(\"plot(forecast(tsValue,h=5),main='Immunization')\");\n        rengine.EagerEvaluate(\"graphics.off();\");\n        rengine.Close();\n        rengine.Dispose();\n\n    }\n}\n</code></pre>\n"},{"tags":["javascript","asp.net-mvc-3","view","global-variables"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13201709,"title":"Accessing global variables in JavaScript functions","body":"<p>I am using C# asp.net mvc3.\nIn one of my views, say I declare a variable like this:  </p>\n\n<pre><code>@{\n    ViewBag.Title = \"title\"   \n    string mystr;  \n}\n</code></pre>\n\n<p>I need to set the value of the variable mystr in a function of the script. How do I access this variable from the script? \nSuppose I have a function like</p>\n\n<pre><code>&lt;Script type=\"text/javascript\"&gt;\nfunction(){\n    var st = \"This string is for the global variable\"\n     mystr = st;\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>mystr will later be used in the html code like this:\n<code>&lt;h2&gt;@mystr&lt;/h2&gt;</code> . \nIs there a similar way of accessing a variable from a function?</p>\n"},{"tags":["jquery","json","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13198136,"title":"How to get data from ASP.NET MVC controller to jQuery dynamically?","body":"<p>I'm relatively new to jQuery so I may just be using the wrong terminology. If so, a nudge in the right direction would be appreciated :)</p>\n\n<p>I have a jQuery function that on the click of a div element, gets that elements predefined ID value. What I want to do is load that parent elements children, so I'm planning to dynamically build some html using jQuery. What I don't know how to do, is make a call to a controller (ASP.NET MVC 3) and have the controller return a collection to the client. </p>\n\n<p>I know how to send a JSON object from jQuery to a controller, but not the other way around. I'm not looking for someone to code it for me, I just need a push in the right direction. </p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["c#","asp.net-mvc-3","visual-studio-2010"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13195770,"title":"MVC file upload UnauthorizedAccessException","body":"<p>I have this code:</p>\n\n<pre><code>[HttpPost]\n    public ActionResult Edit(Photograph photo, HttpPostedFileBase image)\n    {\n\n        if (ModelState.IsValid)\n        {\n            if (image != null)\n            {\n                byte[] imageData = new byte[image.ContentLength];\n                image.InputStream.Read(imageData, 0, image.ContentLength);\n                System.IO.File.WriteAllBytes(HttpContext.Server.MapPath(\"~/Content/Images\"), imageData);\n            }\n\n            repository.SavePhotograph(photo);\n            TempData[\"message\"] = string.Format(\"{0} has been saved\", photo.Name);\n            return RedirectToAction(\"Index\");\n        }\n        else\n        {\n            return View(photo);\n        }\n    }\n</code></pre>\n\n<p>It is meant to take the photo uploaded from a form and save it in the server (local server). I've given the folder \"Visual Studio 2010\" where all the projects are kept NETWORK SERVICE user permissions and IIS_IUSRS group permissions. I'm also running visual studio as administrator.</p>\n\n<p>For some reason it still won't let me save the file to that location. The location is within the project folder under {Project_Name\\Content\\Images}. How do I get it to save the file there?</p>\n\n<p>Thanks,</p>\n"},{"tags":["asp.net-mvc-3","razor","webgrid"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":52,"score":-1,"question_id":13200487,"title":"Mvc3 webgrid conditional statement on column","body":"<p>i have a webgrid in which i want to place a conditional statement on the column data that i will have?</p>\n\n<p>is it possible and if yes, can you provide an example?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Just a snippet</p>\n\n<pre><code>grid.Column(\"Status\",\"Status\",canSort: true)\n</code></pre>\n\n<p>if the value of the status is \"correct\", i want to display an image instead of the text.</p>\n"},{"tags":["javascript","jquery","asp.net-mvc-3","image","pageload"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":53,"score":3,"question_id":13191806,"title":"how can i update the images in my MVC 3 site?","body":"<p>i have Images in my MVC3-Webseite that they must be updates in every 30 Sec. Because the Images are updated im Server in every 30 Sec. So i have tried to update it with JQuery like :</p>\n\n<pre><code>&lt;div id=\"galerie\"&gt;\n    &lt;ul&gt;\n        &lt;li&gt;\n            &lt;img id = \"img1\" class = \"img1\" alt=\"Image 7\" src=\"@Url.Content(\"Content/Images/Image_7.jpg\")\"/&gt;\n            Image 7\n        &lt;/li&gt;\n        &lt;li&gt;\n            &lt;img id = \"img2\" class = \"img2\" alt=\"Image 5\" src=\"@Url.Content(\"Content/Images/Image_5.jpg\")\"/&gt;\n            Image 5\n        &lt;/li&gt;\n\n&lt;/div&gt; \n\n&lt;script type=\"text/javascript\"&gt; \n     function UpdateImages() { \n         $.get('@Url.Action(\"Details\",\"Display\", new { id = \"test\" } )', function (data) {\n             $('#main').replaceWith(data);\n         }); \n     } \n    function myFunction() {\n        setInterval(UpdateImages, 30000);\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>But Problem is that the Images are not still updated. They need to Pageload again. don't that?\nso i want to know how can i fire the Pageload event with JS? or is there any other solution for the Problem?\nthank you </p>\n\n<p>MarekBurkut</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","jquery-ui"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13199539,"title":"ASP MVC jQuery UI Selectmenu plugin","body":"<p>When using the jQuery UI <a href=\"https://github.com/fnagel/jquery-ui/wiki/Selectmenu\" rel=\"nofollow\">Selectmenu plugin</a>, the built-in frontend ASP MVC validation no longer behaves correctly. By this I mean the field-validation spans do not appear on submit of a form.</p>\n\n<p>Is there a simple way to correct this?  </p>\n"},{"tags":["asp.net-mvc-3","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":26,"score":-1,"question_id":13198242,"title":"how to retrieve image from database using imageid in controller","body":"<p>Save the image in a web directory and store the URL on database using this approach,i stored image url in db. based on that image id(i need to pass this image id to controller from ajax call),i need to retrieve  image.\ni got image id using jquery template, so i have passed that image id to controller. what should i write in controller? filepathresult or fileresult or is there any approach? </p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13198388,"title":"ASP.NET MVC3 Area action view location","body":"<p>I met this first time in MVC.\nI have area \"Administation\" and controller in there \"News\" with action \"List\".</p>\n\n<p>In debug i got breakpoint at </p>\n\n<pre><code>public ActionResult List()\n{\n    return View(); // Breakpoint\n}\n</code></pre>\n\n<p>and i get there</p>\n\n<p>but engine cannot find View \"List\"</p>\n\n<p>I got error: </p>\n\n<pre><code>The view 'List' or its master was not found or no view engine supports the searched locations. The following locations were searched:\n~/Views/News/List.cshtml\n~/Views/News/List.vbhtml\n~/Views/Shared/List.cshtml\n~/Views/Shared/List.vbhtml\n</code></pre>\n\n<p>View exits in location Areas/Administation/News/List.cshtml</p>\n\n<p>Why Razor don't paste Area name into view view location ?</p>\n"},{"tags":[".net","asp.net-mvc-3","templates","view","scaffolding"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":53,"score":3,"question_id":13198521,"title":"In MVC3 how to move all scripts to the bottom of the page before </body>?","body":"<p>In MVC3 I can easily move the jQuery script tag to the bottom of the page \"_Layout.vbhtml\"</p>\n\n<pre><code>&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.8.2.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>However in the ASP.NET MVC3 when you create a Controller with an editor template, the scaffolding mechanism does a good amount of work adding files to the Views folder like Create.cshtml, Delete.cshtml, Details.cshtml, Edit.cshtml, and Index.cshtml etc... and they are strongly typed.</p>\n\n<p>Inside those View files, script tags are inside the <code>&lt;body&gt;</code>, but how can I add those tags to the bottom of the page immediately before <code>&lt;/body&gt;</code> tag?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":14,"score":3,"question_id":13198071,"title":"How to load multiple related entities in DbUpdateConcurrencyException","body":"<p>I have 3 related tables</p>\n\n<ol>\n<li><p>Person entity: with two Foreign keys from Address entity (Address and Address1) and one foreign key from Owners table</p></li>\n<li><p>Address Entity has one foreign key from Owners table</p></li>\n</ol>\n\n<p>The person view has fields from Address entity and while tracking the concurrency check</p>\n\n<pre><code>var entry = ex.Entries.Single();\nvar databaseValues = (Person)entry.GetDatabaseValues().ToObject();\nvar clientValues = (Person)entry.Entity;\n</code></pre>\n\n<p>works fine for Person fields.</p>\n\n<p>However when I try to access</p>\n\n<p>databasevalues.Address.City or databasevalues.Address1.City it gives a null exception. This I think is due to Address Entity not loaded in the begining</p>\n\n<p>Request for suggestions</p>\n"}]}
{"total":29155,"page":4,"pagesize":100,"questions":[{"tags":["jquery","asp.net-mvc-3","razor","webgrid"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":850,"score":0,"question_id":8592381,"title":"Show a tooltip with more info when mousover a MVC3 Razor WebGrid row","body":"<p>I have a grid with a list of persons. On mouseover a certain persons row I would like to show additional info (photo, address etc) in a tooltip. \nAll the needed data exist in the model, but I don't know how to add the tooltip functionality inside the grid. I also wonder if the jquery ui tooltip is a good choice for this?</p>\n\n<p>TIA :)</p>\n"},{"tags":["css","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13193267,"title":"MVC3 Site.css overriding my custom styles","body":"<p>I have this HTML which is generated by MVC3 Razor Engine:</p>\n\n<pre><code>&lt;div class=\"editor-field\"&gt;\n    &lt;div id=\"autoComplete\"&gt;\n        @Html.EditorFor(model =&gt; Model.group_name, new { ID = \"group_name\" })\n        @Html.ValidationMessageFor(model =&gt; Model.group_name)\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And my custom CSS I am writing for my autocomplete functionality:</p>\n\n<pre><code>#group_name input[type='text'], input[type='password']\n{\n    padding: 0px;\n    border: 1px solid black;\n    background-color: white;\n    overflow: hidden;\n    z-index: 99999;\n}\n#group_name input[type='text'], input[type='password'] ul\n{\n    width: 100%;\n    list-style-position: outside;\n    list-style: none;\n    padding: 0;\n    margin: 0;\n}\n#group_name input[type='text'], input[type='password'] li\n{\n    margin: 0px;\n    padding: 2px 5px;\n    cursor: default;\n    display: block; /*  if width will be 100% horizontal scrollbar will apear     when scroll mode will be used */ /*width: 100%;*/\n    font: menu;\n    font-size: 12px; /*     it is very important, if line-height not setted or setted   in relative units scroll will be broken in firefox  */\n    line-height: 16px;\n    overflow: hidden;\n}\n</code></pre>\n\n<p>But it is being overrided by the site.css which comes by default with MVC 3 solution which is this:</p>\n\n<pre><code>input[type=\"text\"], input[type=\"password\"]\n{\n    border: 1px solid #ccc;\n    padding: 2px;\n    font-size: 1.2em;\n    color: #444;\n    width: 200px;\n}\n</code></pre>\n\n<p>Does anyone know what CSS I have to write to target my div and input html? Thanks.</p>\n"},{"tags":["asp.net-mvc-3","fluent-nhibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13148035,"title":"Unable to resolve property Fluent nhibernate one to one","body":"<pre><code>class CASE\n{\n   public virtual int ID\n   public virtual CASE_BUDGET Case_Budget\n}\n\nclass CASE_BUDGET\n{\n   public virtual int Case_Id;\n}\n\nclass CASE_MAP\n{\n   Id(x=&gt;x.ID).GeneratedBy.Custom(\"trigger-identity\");\n   HasOne&lt;CASE_BUDGET&gt;(x=&gt;x.Case_Budget).Cascade.All();\n}\n\nclass CASE_BUDGET_MAP\n{\n   Id(x =&gt; x.Case_Id,\"CASE_ID\").GeneratedBy.Foreign(\"CASE\");\n}\n</code></pre>\n\n<p>I received <strong>unable to resolve property:CASE</strong> as my error message when I tried to save a case with a case budget in it.</p>\n\n<p>Any help will be appreciated.</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","validation","dbcontext"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13184018,"title":"How does validation work in database-first dbContext (EF4.3.1 & MVC3)?","body":"<p>How does validation work in database-first dbContext (EF4.3.1 &amp; MVC3)?</p>\n\n<p>I'm doing this (yes, it's VB):</p>\n\n<pre><code>If ModelState.IsValid Then\n\n                db.SaveChanges()\n</code></pre>\n\n<p>But the SaveChanges throws DbEntityValidationException \"Validation failed for one or more entities. See 'EntityValidationErrors' property for more details.\"</p>\n\n<p>I expect it to return the view again with the appropriate validation messages, but clearly I'm missing something because I don't know why it should work that way!  You would expect Google to help, but most examples seem to be code-first.</p>\n\n<p>This is database first, so the model has been generated. I would expected the validation constraints to be generated too (at least simple ones like NOT NULL in SQL Server) , but that doesn't seem to work.</p>\n\n<p>Oddly, some fields are working as explected and others aren't.  </p>\n\n<p>For example, I have a non-nullable text field in the database. It appears as non-nullable in the EF designer and in the generated code. But when I submit it, I get the exception instead of returning the form with the field highlighted.</p>\n\n<p>On the other hand, I have a date field that is non-nullable. It is checked prior to trying to update the database, and the form is presented again with the field highlighted for correction.</p>\n"},{"tags":["asp.net-mvc-3","image","jquery-templates"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13194786,"title":"how to retrieve image from ms-access database in mvc3 using jquery template","body":"<p>Save the image in a web directory and store the URL on database.\nand should i use actionresult for controller or any other option available?\nin output again it is showing url like asd/dad/daaf/img.png?? should i give url from application name? or images/abc.png?</p>\n\n<blockquote>\n  <p>how to get image using filepathresult based on imageid in controller from database</p>\n</blockquote>\n"},{"tags":["asp.net-mvc-3","apache","mono","centos","orchardcms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13058346,"title":"Mono permission denied to any index or root directory access in a MVC application (Orchard)","body":"<blockquote>\n  <p>[Wed Oct 17 23:26:57 2012] [error] [client 85.55.45.215]\n  (13)Permission denied: access to / denied</p>\n  \n  <p>[Wed Oct 17 23:26:58 2012] [error] [client 85.55.45.215]\n  (13)Permission denied: access to / denied</p>\n  \n  <p>[Wed Oct 17 23:26:58 2012] [error] [client 85.55.45.215]\n  (13)Permission denied: access to / denied</p>\n  \n  <p>[Wed Oct 17 23:29:07 2012] [error] [client 85.55.45.215]\n  (13)Permission denied: access to /Refresh.html denied</p>\n  \n  <p>[Wed Oct 17 23:33:34 2012] [error] [client 85.55.45.215]\n  (13)Permission denied: access to /Refresh.html denied</p>\n  \n  <p>[Wed Oct 17 23:33:38 2012] [error] [client 85.55.45.215]\n  (13)Permission denied: access to /index.php denied</p>\n  \n  <p>[Wed Oct 17 23:33:38 2012] [error] [client 85.55.45.215]\n  (13)Permission denied: access to /index.html denied</p>\n  \n  <p>[Wed Oct 17 23:33:38 2012] [error] [client 85.55.45.215]\n  (13)Permission denied: access to /index.html.var denied</p>\n  \n  <p>[Wed Oct 17 23:33:38 2012] [error] [client 85.55.45.215]\n  (13)Permission denied: access to /index.aspx denied</p>\n  \n  <p>[Wed Oct 17 23:33:38 2012] [error] [client 85.55.45.215]\n  (13)Permission denied: access to /Default.aspx denied</p>\n  \n  <p>[Wed Oct 17 23:33:38 2012] [error] [client 85.55.45.215]\n  (13)Permission denied: access to /default.aspx denied</p>\n</blockquote>\n\n<p>I'm triying to install Orchard</p>\n\n<p>This is my conf file</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n    ServerAdmin root@localhost\n    ServerName www.mydomain.com\n\n# Change the path below to suit your configuration\nDocumentRoot /var/www/www.mydomain.com/public_html\n\n# The paths used here should be common for all Linux distributions\nErrorLog /var/www/www.mydomain.com/logs/error.log\nCustomLog /var/www/www.mydomain.com/logs/access.log combined\n\nHostnameLookups Off\nUseCanonicalName Off\nServerSignature On\n\n# Make ABSOLUTELY sure that the path in double quotes ends with a slash!\nAlias / \"/var/www/www.mydomain.com/public_html/\"\n\nAddMonoApplications OrchardDemo \"/:/var/www/www.mydomain.com/public_html\"\n\n# Orchard is a .NET 4.0 application. If your Mono was installed in a different prefix, replace /usr/bin/ with that prefix below.\nMonoServerPath www.mydomain.com /usr/local/mod-mono-server4\n\n# Helps when you get stack traces\nMonoDebug www.mydomain.com True\n\n# Orchard assumes a case-insensitive filesystem\nMonoIOMAP www.mydomain.com all\n\n&lt;Directory \"/var/www/www.mydomain.com/public_html\"&gt;\nSetHandler mono\nMonoSetServerAlias www.mydomain.com\n&lt;/Directory&gt;\n</code></pre>\n\n<p></p>\n\n<p>These are the permissions</p>\n\n<pre><code>drwxrwxr-x+ 11 apache www 4096 oct 24 23:14 public_html\n</code></pre>\n\n<p>I can access LICENSE.txt or Hello.html files</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","kendo-ui"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":198,"score":1,"question_id":12871430,"title":"How to sync Kendo UI mvc Grid with Kendo Mvc Autocomplete","body":"<p>I am working asp.net mvc witk Kendo UI MVC Tools. I am trying to display list of records in a Kendo UI Mvc Grid. and i have one kendo ui autoComplete Textbox when i type a letter it shows corresponding field record that matches the criteria will be showed like a dropdown. Now i want to sync the autocomplete textbox with kendo ui mvc grid. that means when i type a letter records that matches criteria should display in the grid. I have tried with change event but it doesnt seems work for me. </p>\n\n<pre><code> @(Html.Kendo().AutoComplete().Events(c=&gt;c.Change(\"GridChange\"))\n                                                   .Name(\"txtSearchItem\")\n                                                .Filter(\"startswith\")\n                                           .DataTextField(\"xxx\")\n                                              .Value(ViewBag.SearchValue)\n                              .BindTo((List&lt;MyRecords&gt;)Model).HtmlAttributes(new { @class = \"required\", style = \"font-size:19px;width:150px;\", onkeypress = \"return isNumericKey(event);\" })\n                                                )\n</code></pre>\n\n<p>please guide me.</p>\n"},{"tags":["c#","asp.net-mvc-3","dependency-injection","entity-framework-4.1","ninject"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":323,"score":4,"question_id":9245511,"title":"Ninject: Entity Context to Controller","body":"<p>I am aware that a thousand and one questions relating to this topic have been asked, but I have gone through at least a dozen and am still not connecting the dots. I am trying to setup dependency injection for entity contexts.</p>\n\n<p>I have always created my entity context as I have seen in the MS tutorials, like so:</p>\n\n<pre><code>public class UserController : Controller\n{\n    private DbEntities db = new DbEntities();\n\n}\n</code></pre>\n\n<p>Recent reading has told me that this is no longer (if it ever was) the best practice, and a dependency injection method should be used. Ninject is mentioned often, but I am seeing how you move from what I have, to the example give in the <a href=\"https://github.com/ninject/ninject.web.mvc/wiki/Dependency-injection-for-controllers\" rel=\"nofollow\">Ninject documentation</a>.</p>\n\n<p>It should look like this when I am done, right?</p>\n\n<pre><code>public class UserController : Controller\n{\n    private DbEntities db;\n\n    public UserController(DbEntities context)\n    {\n        db = context;\n    }\n}\n</code></pre>\n\n<p>The documentation starts out with \"In the previous step we already prepared anything that is necessary for controller injection.\" which is confusing as hell, since the previous step was installation. I used the Nuget method to install, but I don't know what it means when it says \"Now load your modules or define bindings in RegisterServices method.\" How do I do that, and is entity a module or a binding? The documentation feels so sparse.</p>\n\n<p>I am sorry if I skipped over something critical in the docs, I've been bouncing between forums for hours trying to figure out this one step.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","castle-windsor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":6933181,"title":"Controllers, in different Areas, with the same name. Can Castle Windsor handle this?","body":"<p>Let's say I have two controllers with the same name (i.e., HomeController).  The first is in the standard Controller directory (~\\Controllers) and the second is in an Area (~\\Area\\AreaName\\Controllers).  </p>\n\n<p>Can Castle Windsor handle this type of scenario?  What steps do I need to complete to get this working?</p>\n"},{"tags":["jquery","asp.net-mvc-3","smart-wizard"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":757,"score":3,"question_id":9925255,"title":"Skip validation when going backwards in SmartWizard","body":"<p>I am using the SmartWizard 2.0 (<a href=\"http://techlaboratory.net/products.php?product=smartwizard\" rel=\"nofollow\">link</a>) and I need to stop the validation from kicking in when the users hits the \"Prev\" button or in any way moves backward in the form.</p>\n\n<p>Currently I am using</p>\n\n<pre><code>// Triggers whenever you change page/tab in wizard    \nfunction leaveStep(obj) {        \n    $(\"form\").validate();\n    if ($(\"form\").valid())\n        return true;\n\n    return false;\n}\n</code></pre>\n\n<p>I know that I can use</p>\n\n<pre><code>var currentStep = obj.attr('rel'); // get the current step number\n</code></pre>\n\n<p>to find the currentStep, but I need to know which way the user is navigating - so I need to know the \"nextStep\". Don't know if this is possible.</p>\n"},{"tags":["jquery","asp.net-mvc-3","hide","show"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13195862,"title":"Cant navigate when using Jquery in MVC3","body":"<p>Hei all,</p>\n\n<p>I am trying to show / hide my login screen when user clicks the login link (div id =\"_login\") which is in the _Layout.cshtml. \nMy logIn screen is also inside a div (id =\"_logInScreen\") in the _Layout.cshtml.</p>\n\n<pre><code>$(document).ready(function() {\n               $('#_logInScreen').hide();\n               $('#_login').click(function () {                  \n                  $('#_logInScreen').show(400);\n                    return false;\n               });\n               $('#_closeLogIn').click(function () {\n                   $('#_logInScreen').hide(500);\n                   return false;\n               });\n               $('body').click(function () {\n                   $('#_logInScreen').hide(500);\n                   return false;\n               });\n               $('#_logInScreen').click(function () {                   \n                   $('#_logInScreen').show();\n                   return false;\n               });\n           });\n</code></pre>\n\n<p>It works fine.</p>\n\n<p>But while doing so, I cant navigate my menu link which uses</p>\n\n<pre><code>@Html.ActionLink(\"Home\",\"Index\", \"Home\")\n\n@Html.ActionLink(\"Help\",\"Index\", \"Help\")\n</code></pre>\n\n<p>any help?</p>\n"},{"tags":["jquery","asp.net-mvc-3","knockout.js"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":409,"score":1,"question_id":5733363,"title":"Using MVC3 html helpers break validation messages","body":"<pre><code>    private static IDictionary&lt;string, object&gt; CreateBindAttribute&lt;TModel, TProperty&gt;(Expression&lt;Func&lt;TModel, TProperty&gt;&gt; expression)\n            {\n                string exp = ExpressionHelper.GetExpressionText(expression);\n                var htmlAttributes = new Dictionary&lt;string, object&gt;();\n\n                // knockout uses data-bind to bind the UI to the viewModels\n                htmlAttributes.Add(\"data-bind\", \"value: \" + exp + \", uniqueName: true\");\n\n                return htmlAttributes;\n            }\n\npublic static MvcHtmlString KoPasswordFor&lt;TModel, TProperty&gt;(this HtmlHelper&lt;TModel&gt; htmlHelper, Expression&lt;Func&lt;TModel, TProperty&gt;&gt; expression)\n        {\n            //return htmlHelper.PasswordFor(expression, CreateBindAttribute(expression));\n            return htmlHelper.PasswordFor(expression,);\n        }\n</code></pre>\n\n<p>The above code highlights my problem.\nI have a knockoutJS html helper which adds 'data-bind' attribute to the markup.  However, I find that the validation messages on the field don't work.</p>\n\n<p>If I comment the overload which renders the bind attribute, then the validation messages show up ok.  Note that the validation still works with the commented out line, but the validation text below doesn't show.</p>\n\n<p>Can anyone confirm this behaviour and if so how to fix it?</p>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-ui","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":50,"score":-3,"question_id":13184962,"title":"MVC3 JQuery Tabs","body":"<p>I am trying to create a page with three tabs containing 3 partial views. \nMain View that hosts the tabs.</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n$(function () {\n    $(\"#tabs\").tabs();\n});\n&lt;/script&gt;\n&lt;div id=\"tabs\" style=\"display:inline; float:inherit\"&gt;\n&lt;ul&gt;\n    &lt;li&gt;@Ajax.ActionLink(\"Tab name1\",\"ActionMethod1\",\"ControllerName\",new      AjaxOptions{UpdateTargetId=\"div1\"})&lt;/li&gt;\n    &lt;li&gt;@Ajax.ActionLink(\"Tab name2\",\"ActionMethod2\",\"ControllerName\",new AjaxOptions{UpdateTargetId=\"div2\"})&lt;/li&gt;\n&lt;li&gt;@Ajax.ActionLink(\"Tab name3\",\"ActionMethod3\",\"ControllerName\",new AjaxOptions{UpdateTargetId=\"div3\"})&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;\n&lt;div id=div1&gt;&lt;/div&gt;\n&lt;div id=div2&gt;&lt;/div&gt;\n&lt;div id=div3&gt;&lt;/div&gt;\n</code></pre>\n\n<p>I have created next button in tab1 and tab2 and submit button in tab3.</p>\n\n<p>Please give the code to open tab2 from tab1 on button(next) click. and where to put this code. Is it in this main view or the partial views?</p>\n"},{"tags":["asp.net-mvc-3","razor","model-binding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13120998,"title":"Dropdownlist populated from Dictionary<int,string> not binding after POST","body":"<p>I have a ViewModel</p>\n\n<pre><code> public class MyViewModel\n    {\n        [Display(Name = \"My drop down\")]       \n        public Dictionary&lt;int, string&gt; MyDropDown { get; set; }\n\n        [Required(ErrorMessage=\"You must choose the item.\")]\n        public int MyDropDownId { get; set; }\n        public string MyDropDownLabel { get; set; }\n    }\n</code></pre>\n\n<p>After i fill it i render it in the view:</p>\n\n<pre><code> &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(model =&gt; model.MyDropDown)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;           \n                @Html.DropDownListFor(o =&gt; o.MyDropDownId, Model.MyDropDown,\n                 Model.MyDropDownLabel)\n                  @Html.ValidationMessageFor(model =&gt; model.MyDropDownId)\n            &lt;/div&gt;\n</code></pre>\n\n<p>The extension method i've wrote to pass Dictionary to DropDownListFor is:</p>\n\n<pre><code> public static MvcHtmlString DropDownListFor&lt;TModel, TProperty&gt;(this HtmlHelper&lt;TModel&gt; helper,\n          Expression&lt;Func&lt;TModel, TProperty&gt;&gt; expression, Dictionary&lt;int, string&gt; dictionary, string label)\n        {\n            var selectListItems = new SelectList(dictionary, \"Key\", \"Value\");\n            return helper.DropDownListFor(expression, selectListItems, label);\n        }\n</code></pre>\n\n<p>Everything works fine but the problem is that the values for the drop-down aren't model binding on POST. </p>\n\n<p>How would i make a model binder that will have such functionality, so that i don't need one additional DB request for the data to fill the drop-down?</p>\n"},{"tags":["c#","asp.net-mvc-3","automapper"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13194072,"title":"Automapper - Ignore mapping with condition","body":"<p>I'm using automapper and I would like to know if it's possible to ignore a mapping of a field when that's null.</p>\n\n<p>That's my code: </p>\n\n<pre><code>.ForMember(dest =&gt; dest.BusinessGroup_Id, \n           opt =&gt; opt.MapFrom(src =&gt; (int)src.BusinessGroup))\n</code></pre>\n\n<ul>\n<li><code>src.BusinessGroup type = \"enum\"</code> </li>\n<li><code>dest.BusinessGroup_Id = int</code></li>\n</ul>\n\n<p>The objective it's to ingore that Mapping if src.BusinessGroup = null.</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","ef-code-first"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13194215,"title":"The property is not a declared property on type 'class'","body":"<p>I got the error <code>The property 'Rank' is not a declared property on type 'MasterUser'. Verify that the property has not been explicitly excluded from the model by using the Ignore method or NotMappedAttribute data annotation. Make sure that it is a valid primitive property.</code> I checked my model class and it is there.</p>\n\n<pre><code>public class MasterUser\n{\n    //many other properties...\n    public virtual char Rank { get; set; }\n    //more properties below\n}\n</code></pre>\n\n<p>I also checked my db context and it is also there and mapped perfectly.<br/></p>\n\n<pre><code>public class BBDataContext : DbContext\n{\n    public DbSet&lt;MasterUser&gt; Users { get; set; }\n\n    protected override void OnModelCreating(DbModelBuilder modelBuilder)\n    {\n        #region MUSR_USRID mapping\n\n        //Mapped properties above....\n        modelBuilder.Entity&lt;MasterUser&gt;()\n            .Property(usr =&gt; usr.Rank).HasColumnName(\"MUSR_RANK\");\n        //More mapped properties..\n\n        modelBuilder.Entity&lt;MasterUser&gt;().ToTable(\"dbo.MUSR_FIL\");\n        #endregion\n\n        base.OnModelCreating(modelBuilder);\n    }\n}\n</code></pre>\n\n<p>In the table, <code>MUSR_RANK</code> is nullable with a char datatype.</p>\n\n<p>How can I fix this? Does the database have an effect on this? I am currently using SQL Server 2000.</p>\n\n<p>Thanks for the help.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13191583,"title":"how to post form in MVC 3.0 razor on radio button change","body":"<p>I want to active and inactive user account on click on form post. I am using </p>\n\n<pre><code>   @using (Ajax.BeginForm(\"SetStatus\", \"Home\", null, new AjaxOptions() { HttpMethod = \"Post\" }, null))\n                            {\n                                  if (res.Status == 1)\n                                  { \n\n                                        &lt;span class=\"userStatusSpan statusActive\"&gt;&lt;input type=\"radio\" name=\"status\" value=\"1\" checked=\"checked\" /&gt;Active&lt;/span&gt;\n                                        &lt;span class=\"userStatusSpan statusInactive\"&gt;&lt;input type=\"radio\" name=\"status\" value=\"0\"  /&gt;Inactive&lt;/span&gt;\n                                  }\n                                  else\n                                  {\n                                         &lt;span class=\"userStatusSpan statusActive\"&gt;&lt;input type=\"radio\" name=\"status\" value=\"1\" /&gt;Active&lt;/span&gt;\n                                        &lt;span class=\"userStatusSpan statusInactive\"&gt;&lt;input type=\"radio\" name=\"status\" checked=\"checked\" value=\"0\"  /&gt;Inactive&lt;/span&gt;\n\n                                  }\n                          }\n</code></pre>\n\n<p>Can anyone please tell me how to post form on check box change?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13194089,"title":"MVC3 Cannot find database file","body":"<p>I am trying to follow the <a href=\"http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/accessing-your-model%27s-data-from-a-controller\" rel=\"nofollow\">MVC tutorial</a> on the ASP website and I'm now at the stage where we add the controller. I've used my own model, a transactions log instead of the movie DB in the tutorial.</p>\n\n<p>I wanted to check the table to see the data being added, but I can't find it under the AppData folder, which the tutorial says ought to happen. I also checked the directory in windows explorer, but I couldn't see the .sdf file there either.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":13178737,"title":"Convert base64 to Image in c#","body":"<p>I am using MVC#. When i try To convert to base64 string to image, the image is not getting opened. I am getting base64 string from javascript and coverting that to image in controller. Here's my code.</p>\n\n<pre><code>var base64 = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABG4AAAH0CAYAAABsCGvoAAAgAElEQVR4Xuy9C5RV1Zmo++96P3ZVURSv4hEEFdQobYKtJESjJME+6WgTpPUQIrfpY8NRui/aKlcvY2hON0fN5TIUbh/6XDs9bgah0+1BY+gk2p2QFpIAgk9AiGBhlQgIokgVRQFVu3bd9S+c21WbXVV71157Pfb+loNh1ar5+Oc3Z/H46p9zRnqsR3ggAAEIQAACEIAABCAAAQhAAAIQgAAEAkcggrgJ3JwQEAQgAAEIQAACEIAABCAAAQhAAAIQsAkgblgIEIAABCAAAQhAAAIQgAAEIAABCEAgoAQQNwGdGMKCAAQgAAEIQAACEIAABCAAAQhAAAKIG9YABCAAAQhAAAIQgAAEIAABCEAAAhAIKAHETUAnhrAgAAEIQAACEIAABCAAAQhAAAIQgADihjUAAQhAAAIQgAAEIAABCEAAAhCAAAQCSgBxE9CJISwIQAACEIAABCAAAQhAAAIQgAAEIIC4YQ1AAAIQgAAEIAABCEAAAhCAAAQgAIGAEkDcBHRiCAsCEIAABCAAAQhAAAIQgAAEIAABCCBuWAMQgAAEIAABCEAAAhCAAAQgAAEIQCCgBBA3AZ0YwoIABCAAAQhAAAIQgAAEIAABCEAAAogb1gAEIAABCEAAAhCAAAQgAAEIQAACEAgoAcRNQCeGsCAAAQhAAAIQgAAEIAABCEAAAhCAAOKGNQABCEAAAhCAAAQgAAEIQAACEIAABAJKAHET0IkhLAhAAAIQgAAEIAABCEAAAhCAAAQggLhhDUAAAhCAAAQgAAEIQAACEIAABCAAgYASQNwEdGIICwIQgAAEIAABCEAAAhCAAAQgAAEIIG5YAxCAAAQgAAEIQAACEIAABCAAAQhAIKAEEDcBnRjCggAEIAABCEAAAhCAAAQgAAEIQAACiBvWAAQgAAEIQAACEIAABCAAA...AgkKCA4CbBouoSAQIECBAgQIAAAQIECBAgkIaA4CaNOuoFAQIECBAgQIAAAQIECBAgkKCA4CbBouoSAQIECBAgQIAAAQIECBAgkIaA4CaNOuoFAQIECBAgQIAAAQIECBAgkKCA4CbBouoSAQIECBAgQIAAAQIECBAgkIaA4CaNOuoFAQIECBAgQIAAAQIECBAgkKCA4CbBouoSAQIECBAgQIAAAQIECBAgkIaA4CaNOuoFAQIECBAgQIAAAQIECBAgkKCA4CbBourS9wLLy8vhypUrob+/Pxw8eBALAQIECBAgQIAAAQIECBAonIDgpnAlS7vBY2Nj4e7du6GpqSkMDg4KXNIut94RIECAAAECBAgQIECAQBkBwY0hUjcC09PT4enTp9kMmdIxOzsbhoeHw/z8fOjp6QlDQ0Ohubk5XL16NbS3t4epqakwMjIS2trafvTavXv3ws2bN1e+Pjo6GmZmZkJLS8ua13R0dNSNh4YQIECAAAECBAgQIECAAAHBjTFQNwLj4+Ph2LFjq86y+XzZU29vb4ghzPHjx0NfX1/W/vj11V6LAc+FCxdCDHG6urqy82NANDk5GS5evPija+oGQ0MIECBAgAABAgQIECBAgMAnAcGNYVA3AqsFN4uLi9mSqbm5uZXlUzG4KQUypRkyMbj50ms3btzIlmCVjiNHjmTBzQ+vqRsMDSFAgAABAgQIECBAgAABAoIbY6CeBCYmJrKlUgMDAyvNiq/FmTJHjx4Nly9fDpcuXQp5gpvPZ9yUbr5a2FNPHtpCgAABAgQIECBAgAABAgTMuDEG6kqgtDlxbNTp06fD4cOHw7Vr17J9aU6dOhWWlpbCmTNnvnrGTdwDp7THTWnj49UCoLrC0BgCBAgQIECAAAECBAgQaHgBwU3DDwEABAgQIECAAAECBAgQIECAQL0KCG7qtTLaRYAAAQIECBAgQIAAAQIECDS8wP8AN7hUDozwDE4AAAAASUVORK5CYII=\";\n\nbyte[] str = System.Text.Encoding.Unicode.GetBytes(base64);\nvar buffer = Convert.FromBase64String(Convert.ToBase64String(str));\nvar file = Server.MapPath(\"~/Content/images/err.png\");\nSystem.IO.File.WriteAllBytes(file, buffer);\nImage img = new Image();\nimg.ImageUrl = Server.MapPath(\"~/Content/images/err.png\");\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","checkboxlist"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13192502,"title":"Pass Selected checkbox value in MVC","body":"<p>I need to pass the selected checkboxlist to my controller Action. \nI tried using this code . <a href=\"http://stackoverflow.com/questions/220020/how-to-handle-checkboxes-in-asp-net-mvc-forms\">How to handle checkboxes in ASP.NET MVC forms?</a></p>\n\n<p>My View code: </p>\n\n<pre><code>   @foreach (var item in Model)\n      {\n     &lt;tr&gt;\n     &lt;td align=\"center\" class=\"Text_nocolor\"&gt;\n     @using (Html.BeginForm(\"ShowData\", \"Cart\", new { UserID = Request.QueryString[\"UserID\"] }, FormMethod.Post, new { id = \"newForm\" }))\n     {   \n     &lt;input type=\"checkbox\" name=\"selectedObjects\" value=\"@item.Checked\" /&gt;@item.ProductName \n     }\n&lt;/td&gt;\n         &lt;td align=\"right\" class=\"Text_nocolor\"&gt;\n        @Html.DisplayFor(modelItem =&gt; item.Rate)\n       &lt;/td&gt;\n       &lt;td align=\"right\" class=\"Text_nocolor\"&gt;\n    @Html.DisplayFor(modelItem =&gt; item.Price)\n     &lt;/td&gt;\n&lt;/tr&gt;\n}\n</code></pre>\n\n<p><br/>\nMy Action Code : <br/></p>\n\n<pre><code>public ActionResult ShowData(Guid[] selectedObjects)\n            {\n                foreach (Guid guid in selectedObjects)\n                {\n                    Response.Write(guid.ToString());\n                }\n                Response.End();\n                return (new EmptyResult());\n            }\n</code></pre>\n\n<p>I called the sumbit code in an Action Link</p>\n\n<pre><code>@Html.ActionLink(\" \", \"ShowData\", new { controller = \"Cart\", new { @class = \"btnCheckout\" })\n</code></pre>\n\n<p>It throws a null reference in guid value.\nAny suggesstions. How to get the selected checkbox item wit my model binded. ???</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":203,"score":1,"question_id":11767723,"title":"How to Display Conditional Plain Text with Razor","body":"<p>I am having issues with displaying (rather NOT displaying) plain text in an else block.</p>\n\n<pre><code>if (Model.CareerFields != null &amp;&amp; ViewBag.CFCount &gt; 0)\n{\n&lt;h3&gt;Careerfields Listing&lt;/h3&gt;\n\n&lt;table&gt;\n   &lt;tr&gt;\n      &lt;th&gt;&lt;/th&gt;\n      &lt;th&gt;Careerfield Name&lt;/th&gt;\n   &lt;/tr&gt;\n\n   @foreach (var item in Model.CareerFields)\n   {\n       &lt;tr&gt;\n       &lt;td&gt;\n          @Html.ActionLink(\"Select\", \"Index\", new { careerFieldID = item.CareerFieldId })\n       &lt;/td&gt;\n       &lt;td&gt;\n          @item.CareerFieldName\n       &lt;/td&gt;\n       &lt;/tr&gt;\n   }\n   &lt;/table&gt;\n}\nelse\n{\n  No Careerfields associated with @ViewBag.SelectedDivisionTitle\n}\n</code></pre>\n\n<p>The if blocks works fine. The text only renders when true. However, the else block text renders when the page loads, not if it evaluates to false only. </p>\n\n<p>I've tried using </p>\n\n<pre><code>Hmtl.Raw(\"No Careerfields associated with \")\n&lt;text&gt;No Careerfields associated with @ViewBag.SelectedDivisionTitle&lt;/text&gt;\n@:No Careerfields associated with @ViewBag.SelectedDivisionTitle\n</code></pre>\n\n<p>But it still renders the plaintext before evaluation.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["javascript","asp.net-mvc-3","visual-studio-2010"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13192931,"title":"Can I use break points on javascript in asp.net mvc3?","body":"<p>I want to use breakpoint in JavaScript to see the functionality.</p>\n\n<p>Is there any way to do that in asp.net mvc3, I'm using visual studio 2010?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":42,"score":-2,"question_id":13116755,"title":"How to pass value from Parent View to Partial View on load","body":"<p>I am opening one edit Profile page in my view. I want to display skills of the person in his profile Page; his skills are stored in another table. Now I want to open one Partial View to show his skills. Please help me how to show the partial View.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","entity-framework","stored-procedures"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":296,"score":0,"question_id":10282061,"title":"HOw can I access two database in single .edmx file?","body":"<p>I have created mvc3 application.</p>\n\n<p>I have one <code>.edmx</code> already created which is based on <code>Db1</code> but now\nI have created a view which is based on <code>Database2</code> and I need to use this view inside my project.</p>\n\n<p>For that I need to update my EF <code>.edmx</code> file.\nbut when I right click and select option <code>Update model from Database</code>\ni'm only getting <code>all tables , view ,sps from</code>Db1<code>` its obvious\nBut as i need to use view which is from</code>Database2<code>how can i add it into my model</code>.edmx` file?\nplease help. </p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13192637,"title":"Get specific folders path from a full way with Path class ASP.NET MVC 3","body":"<p>I have the following full path:</p>\n\n<p><code>D:\\Test1\\Test1_1\\Test2_1\\Test3_1\\Test4_1</code></p>\n\n<p>If I call </p>\n\n<p><code>Path.GetFileName(abovePath)</code> will return <code>Test4_1</code> </p>\n\n<p><a href=\"http://stackoverflow.com/questions/670819/get-directory-from-full-path\">get directory from full path</a></p>\n\n<p>Well.</p>\n\n<p>I want to get <code>Test2_1\\Test3_1</code>, for example.</p>\n\n<p>How to do that with <code>Path</code> class if is possible ? If not, how to proceed ?</p>\n\n<p>I want a generic example, do not focus only my given full path.</p>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","dataannotations"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13186158,"title":"difference between jquery validate plugin and ASP.NET MVC data annotations?","body":"<p>I am wondering what is the difference between validating Controls using JQuery Validate plugin and ASP.NET MVC DataAnnotations?</p>\n\n<p>Appreciate your responses.</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc-3","openlayers","geoserver"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13188799,"title":"Openlayers WMS layer comes up blank until I zoom in","body":"<p>I'm trying to integrate Openlayers with ASP MVC3 using Geoserver as a learning process but came across this weird problem.  When I load the view, the map canvas comes up blank with the default zoom control. Only when I press the zoom-in button the map would display.  I originally thought it's something to do with ASP's Razor View so I copy it to a separate HTML file but the problem remains.  Any suggestions?</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;script type=\"text/javascript\" src=\"http://openlayers.org/api/OpenLayers.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n\n    function init() {\n        var bounds = new OpenLayers.Bounds(\n                    -124.848974, 45.543541,\n                    -116.91558, 49.002494);\n        var options = {\n            maxExtent: bounds,\n            maxResolution: 0.0309898203125,\n            projection: \"EPSG:4326\",\n            units: 'degrees'\n        };\n        var map = new OpenLayers.Map('map', options);\n        var wms = new OpenLayers.Layer.WMS(\"Washington County Map\", \"http://localhost:8080/geoserver/tiger/wms\",\n            {\n                layers: 'tiger:county10',\n                format: 'image/png',\n                visibility: true,\n                isBaseLayer: true,\n            });\n\n        map.addLayer(wms);\n        map.zoomToExtend(bounds);\n    };\n&lt;/script&gt;\n&lt;/head&gt;\n&lt;body  onload=\"init()\"&gt;\n&lt;h2&gt;Test&lt;/h2&gt;\n&lt;p&gt;\n    To learn more about ASP.NET MVC visit &lt;a href=\"http://asp.net/mvc\" title=\"ASP.NET MVC Website\"&gt;http://asp.net/mvc&lt;/a&gt;.\n&lt;/p&gt;\n\n&lt;div id=\"map\" style=\"width:800px; height:500px;\" /&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-ajax","autocomplete"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":13180176,"title":"Why doesn't my autocomplete work MVC3 Razor Engine","body":"<p>I using code from this blog <a href=\"http://blogs.msdn.com/b/miah/archive/2008/11/13/autocompletion-textbox-in-mvc-using-jquery.aspx\" rel=\"nofollow\">Autocompletion Textbox in MVC Using jQuery</a></p>\n\n<p>but my jQuery isn't firing. I suspect its to do with my selector. I am using MVC as well but I don't see how that would make the javascript any different.</p>\n\n<p>Code:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing UserManager.Models;\n\nnamespace UserManager.Controllers\n{\n    public class UserManagerController : Controller\n    {\n        //\n        // GET: /UserManager/\n\n        public ActionResult Index()\n        {\n            try\n            {\n                var data = new UserManager.Models.UserManagerTestEntities();\n                return View(data.vw_UserManager_Model_Add_Users.ToList());\n\n            }\n            catch (Exception ex)\n            {\n                return View(ViewBag);\n            }\n\n        }\n\n        public ActionResult CreateUser()\n        {\n\n            var data = new UserManager.Models.UserManagerTestEntities();\n            ViewBag.Message = \"Create New User\";\n            return View();\n        }\n\n        public ActionResult LookUpGroupName(string q, int limit)\n        {\n            //TODO: Map list to autocomplete textbox control\n            DAL d = new DAL();\n            List&lt;string&gt; groups = d.groups();\n\n            var GroupValue = groups\n                .Where(x =&gt; x.StartsWith(q))\n                .OrderBy(x =&gt; x)\n                .Take(limit)\n                .Select(r =&gt; new { group = r });\n\n            // Return the result set as JSON\n            return Json(GroupValue, JsonRequestBehavior.AllowGet);\n        }\n    }\n}\n\n@model UserManager.Models.vw_UserManager_Model_Add_Users\n@{\n    ViewBag.Title = \"Create New User\";\n}\n&lt;h2&gt;\n    CreateUser&lt;/h2&gt;\n@using (Html.BeginForm())\n{\n    @Html.ValidationSummary(true)\n    &lt;fieldset&gt;\n        &lt;legend&gt;New User Details&lt;/legend&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(Model =&gt; Model.salutation)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; Model.salutation)\n            @Html.ValidationMessageFor(model =&gt; Model.salutation)\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(Model =&gt; Model.firstname)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; Model.firstname)\n            @Html.ValidationMessageFor(model =&gt; Model.firstname)\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(Model =&gt; Model.lastname)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; Model.lastname)\n            @Html.ValidationMessageFor(model =&gt; Model.lastname)\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(Model =&gt; Model.password)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; Model.password)\n            @Html.ValidationMessageFor(model =&gt; Model.password)\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(Model =&gt; Model.email)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; Model.email)\n            @Html.ValidationMessageFor(model =&gt; Model.email)\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(Model =&gt; Model.isactive)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; Model.isactive)\n            @Html.ValidationMessageFor(model =&gt; Model.isactive)\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.Label(\"Group Name\")\n            &lt;!-- GroupName --&gt;\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; Model.group_name)\n            @Html.ValidationMessageFor(model =&gt; Model.group_name)\n        &lt;/div&gt;\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Create\" /&gt;\n        &lt;/p&gt;\n    &lt;/fieldset&gt;\n\n    &lt;div&gt;\n        @Html.ActionLink(\"Back to List\", \"Index\")\n    &lt;/div&gt;\n}\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        $(\"#group_name\").autocomplete('@Url.Action(\"LookUpGroupName\")', \n        {\n        dataType: 'json',\n        parse: function (data) {\n            var rows = new Array();\n            alert(\"before loop\");\n            for (var i = 0; i &lt; data.length; i++) {\n                rows[i] = { data: data[i], value: data[i].group, result: data[i].group }\n            }\n            return rows;\n        },\n        formatItem: function (row, i, max) {\n            return row.group\n        },\n        width: 300,\n        highlight: false,\n        multiple: true,\n        multipleseparator: \",\"\n    });\n});\n\n&lt;/script&gt;\n</code></pre>\n\n<p>HTML rendered to browser:</p>\n\n<pre><code>&lt;input name=\"group_name\" class=\"text-box single-line\" id=\"group_name\" type=\"text\" value=\"\"/&gt;\n</code></pre>\n\n<p>Probably something simple I just cant see it. Any ideas? Thanks!</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13192018,"title":"When copy the url from one browser to another browser my session data are not coming in asp.net MVC3","body":"<p>When i copy the URL from one browser to paste it in another browser my session data not retrieved it shows \"Object reference not set to an instance of an object\".</p>\n"},{"tags":["c#","asp.net-mvc-3","mobile"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":3316,"score":4,"question_id":7034697,"title":"How can i detect if the request is coming from a mobile browser in my asp.net MVC 3","body":"<p>what i am trying to achieve is simple; Among all the view which i have in my web application, i have only two razor views that i have created a mobile version for them.\nso i need to redirect the users to these views if they are accessing the application from their mobile devices. i tried the following on the controller level but it did not redirect the users when i run my test on different mobile devices :-</p>\n\n<pre><code>if (Request.Browser.IsMobileDevice)\n            {\n                return View(\"MobileStudentStartAssessment\");\n            }\n            else {\n                return View(\"StudentStartAssessment\");\n            }\n</code></pre>\n\n<p>So is there another approach that i can follow which can detect most of the mobile devices?\nThanks</p>\n"},{"tags":["c#","asp.net-mvc-3","routes","global-asax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13191614,"title":"Global.asax Application_Start Get Action Url / RedirectToAction?","body":"<p>On application start I am checking app versions from the assembly against a value stored in the web.config. If the versions differ, I want to trigger the default installer.</p>\n\n<p>So I need to get an Action route. But this doesn't seem possible to do as the HttpContext is null? I have an Action called \"Install\" in my \"HomeController\"</p>\n\n<p>Any ideas how I can get a RedirectToAction or similar to work from the Application_Start ?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","html5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13191240,"title":"Checksum in cache manifest with ASP.NET MVC","body":"<p>I have ASP.NET MVC based mobile web application with cache manifest. This cache manifest includes javascript, css sources and pages itself:</p>\n\n<pre><code>CACHE MANIFEST\n\n# version 56517bc4-bb5d-fe72-fb2e-812379ceb0df\n\nCACHE:\n/Styles/site.css\n/images/flags-euro.png\n/mypage1\n/mypage2\n</code></pre>\n\n<p>I would like to calculate checksum based on content of every file to maintain cache.manifest versioning (for automatic site updates on the browser side). It's easy to do for static files: read file content and calculate checksum.</p>\n\n<p>But how to do it for pages? I need to get page content by requesting that page and calculate checksum. Any ideas how to do it with ASP.NET MVC?</p>\n"},{"tags":["jquery","ajax","asp.net-mvc-3","client-side","unobtrusive-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13190498,"title":"Newly added Form Elements doesn't get binded for client side validation in MVC 3","body":"<p>I have AJAX Form in MVC 3.</p>\n\n<p>In Index view:</p>\n\n<pre><code>&lt;div id=\"ajaxcontactform\"&gt;\n      &lt;% Html.RenderPartial(\"ContactForm\", Model); %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>AJAX form on ContactForm Partial View</p>\n\n<pre><code>&lt;% using (Ajax.BeginForm(\"Contact\", new AjaxOptions()\n{\n   UpdateTargetId = \"ajaxcontactform\",\n   OnBegin = \"ShowProcessing\",\n   OnComplete = \"HideProessing\",\n   InsertionMode = InsertionMode.Replace\n}))\n{%&gt;\n&lt;%: Html.ValidationSummary()%&gt;\n&lt;%: Html.TextBoxFor(m =&gt; m.Name, new { Class = \"contacttextform\" })%&gt;\n&lt;%}%&gt;\n</code></pre>\n\n<p>My controller:</p>\n\n<pre><code> [HttpPost]\n    public ActionResult Contact(ContactForm form)\n    {\n        if (Request.IsAjaxRequest())\n        {\n             // on error\n            if (!ModelState.IsValid)\n                return PartialView(\"ContactForm\", form);\n\n           // TODO: My data processing code here  \n\n           // return partial view on success\n             return PartialView(\"ContactForm\", new ContactFormModel());   \n         }\n   }\n</code></pre>\n\n<p>my client side custom validation JavaScript code:\nI just referenced this file in master page. This code runs once when DOM get loaded/created once.</p>\n\n<pre><code>    $.validator.addMethod(\"phonenumber\", function (value, element, params) {\n\n    if (!value)\n        return true;\n    var regex = /^[\\s\\d\\+\\(\\)]+$/;\n    return regex.test(value);\n   });\n   jQuery.validator.unobtrusive.adapters.addBool(\"phonenumber\");\n</code></pre>\n\n<p>My client side validation works fine when I first load my page. However, once i submit my form successfully and try to submit my form again . My client side validation doesn't work and my form validate it server side.</p>\n\n<p>I want to bind my client side validation again after adding new element or re-render my partial view. </p>\n\n<p>Also, how should I clear my form values once it submitted successfully.</p>\n\n<p>Thanks,</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":4,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":6583,"score":1,"question_id":6369979,"title":"How to display image in asp.net mvc3","body":"<p>I have develop a asp.mvc3 web application in this i have save the image name and some text into database.When i try to get the image from data base it doesn't show image.Actually in my local machine every thing is working fine but when i test in server it's not working please helpme.</p>\n\n<pre><code> &lt;% for (int v = 0; v &lt; Listdata.Count; v++)\n       { %&gt;\n    &lt;%if (j == 1)\n      { %&gt;\n\n    &lt;%if (count &lt; Listdata.Count)\n      { %&gt;\n    &lt;tr&gt;\n        &lt;%string Imageurl = Listdata[count].ToString();%&gt;\n        &lt;%string[] GetImages = Imageurl.Split(','); %&gt;\n        &lt;%string imagedata = GetImages[1].ToString(); %&gt;\n        &lt;% Getimage1 = imagedata.Substring(9, imagedata.Length - 10); %&gt;\n        &lt;li class=\"menu\"&gt;&lt;a href='&lt;%=Html.Encode(Geturl) %&gt;'&gt;\n            &lt;img src='/Images/&lt;%=Html.Encode(Getimage1)%&gt;' alt=\"\" style=\"margin-top: 0px; width: auto;\n                height: 200px;\" /&gt;&lt;/a&gt;&lt;/li&gt;\n        &lt;%} %&gt;\n        &lt;td&gt;\n            &lt;li class=\"menu\"&gt;&lt;span style=\"float: left; margin-left: 5px;\"&gt;\n                &lt;%=Html.Encode(Postdate)%&gt;&lt;/span&gt;&lt;br /&gt;\n                &lt;a href=\"DisplayData/&lt;%=Html.Encode(item.postid) %&gt;\"&gt;&lt;span class=\"name\"&gt;\n                    &lt;%=Html.Encode(item.post)%&gt;&lt;/span&gt;&lt;span class=\"arrow\"&gt;&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n            &lt;%j++; i = 2; count++; %&gt;\n            &lt;%}\n\n       }\n\n      } %&gt;\n            &lt;%} %&gt;\n        &lt;/td&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","jquery-ajax","ilist"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13189660,"title":"mvc3, $Ajax request, send IList<CustomObject> as parameter","body":"<p>I want to send list of object within request parameter to a controller action using below code.</p>\n\n<pre><code> $.ajax({\n            url: ControllerActionUrl,\n            cache: false,\n            dataType: \"jsonp\",\n            contentType: 'text/javascript',\n            success: onSuccess,\n            data: requestObject\n        });\n</code></pre>\n\n<p>in which requestObject is as below:</p>\n\n<pre><code> var requestObject = {\n            PreviousTaxBrackets: prevTaxBrackets,\n            CurrentTaxBrackets: currentTaxBrackets,\n            AnnualIncomeAmount: annualIncome.val(),\n            OtherCharges: otherCharges\n        };\n</code></pre>\n\n<p>prevTaxBrackets &amp; currentTaxBrackets are two different arrays which i want to pass to controller action.</p>\n\n<p>While looking from jQuery debugger, it shows proper values set &amp; count of array...</p>\n\n<p>But when i check within controller action request parameter, it doesn't show actual values set from jQuery but 0 (zero) instead, however it shows correct Count of the IList objects within request (which is 4 in this case)</p>\n\n<p>any idea/suggestion would be of great help..!!</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":55,"score":1,"question_id":13151761,"title":"MVC: How to know which input value from HttpPostedFileBase","body":"<p>Let me try to explain my situation as simple as possible first:</p>\n\n<p>Suppose I have a page which contains multiple [input type='File']. Some of them may be selected a file and some are not.</p>\n\n<p>In my httppost method, I know I need to use parameter like \"IEnumerable files\"  to get filenames, and also each [input] name I should define either = 'files' or 'files[0]','files[1]', etc.....</p>\n\n<p>My question is: when getting a list of HttpPostedFileBase, how could I determine which file belongs to which input control？ As some inputs may leave blank.</p>\n\n<p>Also because these [input] are created dynamically and there is no fixed number of it, I could not hard-code the parameter in httppost method for each of them.</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13189289,"title":"Excel Not Rendering base64 image","body":"<p>I used the below code to export content and image to excel, the data is rendering in excel but not an image(excel is not rendering base64 image). Any ideas to export image as well with this implementation ?</p>\n\n<pre><code>StringWriter tw = new StringWriter();\nHtmlTextWriter hw = new System.Web.UI.HtmlTextWriter(tw);\nvar result = (DataTable) TempData[\"Report\"];         \nDataGrid dgGrid = new DataGrid();\ndgGrid.DataSource = result;\ndgGrid.DataBind();\nImage img = new Image();\nimg.ImageUrl = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABG4AAAH0CAYAAABsCGvoAAAgAElEQVR4Xuy9C5RV1Zmo++96P3ZVUbwLMGVBLIwKbUdaaZGOIUY6DzwEDTnEpBPSNgS5uSSdhD4O7jiePoeR0fdyGTw6lz7XJON2Ezo3aUSajn3TSUhSRAFB8RHEWGVhIQKCKEK9hF37cddcunZWbfauvXbttdfzWxkZFrvm45/fnLseX/1zzkhKe4QHAhCAAAQgAAEIQAACEIAABCAAAQhAwHMEIogbz80JAUEAAhCAAAQgAAEIQAACEIAABCAAAZ0A4oaFAAEIQAACEIAABCAAAQhAAAIQgAAEPEoAcePRiSEsCEAAAhCAAAQgAAEIQAACEIAABCCAuGENQAACEIAABCAAAQhAAAIQgAAEIAABjxJA3Hh0YggLAhCAAAQgAAEIQAACEIAABCAAAQggblgDEIAABCAAAQhAAAIQgAAEIAABCEDAowQQNx6dGMKCAAQgAAEIQAACEIAABCAAAQhAAAKIG9YABCAAAQhAAAIQgAAEIAABCEAAAhDwKAHEjUcnhrAgAAEIQAACEIAABCAAAQhAAAIQgADihjXgGwLnzp2T9evXSywW02NeuHChLFmyxJb4Vdvf+c535Otf/7q0tbXZ1qY5XqPRiooK2bBhg9TV1RXUTyExFlJ2pCAymauyLS0tsm7dOqmsrMwbfzwel7Vr18rSpUtlzpw56Y/nzp2bt64dBVT/mzdvljVr1liK144+s7VR7HwUW79U46JdCEAAAlYJGN8PBgYGZPny5aK+DySTSdmyZYusXLky5/fEzO9Do/0eajXOUpbje1Ip6dI2BCAAgWATQNwEe34DM7pjx47J1q1bh/2wt2PHDlm2bJktv5CX4hdju9sspD0rZUdbxko9Y+G5LW727t0ru3bt0oWRXUJuNG+qQpiVQvyMJmbqQAACELCTgPp6HI1GdYlvCPWur...AgQCBBAcFNgkXVJQIECBAgQIAAAQIECBAgQCANAcFNGnXUCwIECBAgQIAAAQIECBAgQCBBAcFNgkXVJQIECBAgQIAAAQIECBAgQCANAcFNGnXUCwIECBAgQIAAAQIECBAgQCBBAcFNgkXVJQIECBAgQIAAAQIECBAgQCANAcFNGnXUCwIECBAgQIAAAQIECBAgQCBBAcFNgkXVJQIECBAgQIAAAQIECBAgQCANAcFNGnXUCwIECBAgQIAAAQIECBAgQCBBAcFNgkXVpf8JLC4uhitXroTBwcGwf/9+LAQIECBAgAABAgQIECBAoHQCgpvSlSztBk9MTIS7d++GpqamMDw8LHBJu9x6R4AAAQIECBAgQIAAAQJVBAQ3hkhhBKampsLz58+zGTKVY2ZmJoyOjoa5ubnQ29sbRkZGQnNzc7h69Wro6OgIT58+DZcvXw7t7e0/+dq9e/fCzZs3l14fGxsL09PToaWlZdVrOjs7C+OhIQQIECBAgAABAgQIECBAQHBjDBRG4Pr16+HYsWMrzrJZvuypr68vxBDm+PHjob+/P2t/fH2lr8WA5/z58yGGON3d3dn5MSC6fft2uHDhwk+uKQyGhhAgQIAAAQIECBAgQIAAgY8CghvDoDACKwU38/Pz2ZKp2dnZpeVTMbipBDKVGTIxuPnc127cuJEtwaocR44cyYKbT68pDIaGECBAgAABAgQIECBAgAABwY0xUCSBycnJbKnU0NDQUrPi1+JMmaNHj4ZLly6FixcvhjzBzfIZN5WbrxT2FMlDWwgQIECAAAECBAgQIECAgBk3xkChBCqbE8dGnTp1Khw+fDhcu3Yt25fm5MmTYWFhIZw+ffqLZ9zEPXAqe9xUNj5eKQAqFIbGECBAgAABAgQIECBAgEDDCwhuGn4IACBAgAABAgQIECBAgAABAgSKKiC4KWpltIsAAQIECBAgQIAAAQIECBBoeIH/Ap1n1LMm1eTrAAAAAElFTkSuQmCC\";\ndgGrid.RenderControl(hw);\nimg.RenderControl(hw);\nstring filename = DateTime.Now.ToShortDateString() + \"_Report.xls\";\nResponse.Clear();\nResponse.ContentType = \"application/vnd.ms-excel\";\nResponse.AppendHeader(\"Content-Disposition\", \"attachment; filename=\" + filename + \"\");\nResponse.Cache.SetCacheability(HttpCacheability.NoCache);\nResponse.Write(tw.ToString());\nResponse.End();\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13174732,"title":"MVC# Passing Image to Controller","body":"<p>I am creating image in javascript and assigning that to a img element in javascript. How to pass that image to controller on ActionButton click in MVC3?</p>\n\n<p>Javascript</p>\n\n<pre><code>var picture = jqplotToImg($('#ChartContent')); //method to change chart as picture, no needed here\nvar img = document.getElementById(\"img1\");\nimg.src = picture;\n</code></pre>\n\n<p>View</p>\n\n<pre><code>@using (Html.BeginForm())\n{\n  &lt;img id=\"img1\" name=\"img1\" /&gt;\n @Html.ActionButton(\"Export\",\"ExportData\",\"Report\")\n}\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>public void ExportReport(FormCollection fc)\n{\n}\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","checkboxes"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":13178446,"title":"How to get the selected list of items from checkboxlist and pass it to the Action in MVC4","body":"<p>I am trying to implement a checkboxlist in my MVC application. here I need to get the selected checkboxlist values pass it to @html.ActionLink().<br/>\nI have searched many sites including Stackoverflow but there is no model binding of database values and getting the selected checkbox values and passing to an action. <br/>\n<a href=\"http://stackoverflow.com/questions/5284395/checkboxlist-in-mvc3-view-and-get-the-checked-items-passed-to-the-controller.\">Eg :http://stackoverflow.com/questions/4872192/checkboxlist-in-mvc3-0</a></p>\n\n<p>and I tried from this link. <a href=\"http://stackoverflow.com/questions/3369533/checkboxlist-multiple-selections-how-to-model-bind-back-and-get-all-selections\">CheckBoxList multiple selections: how to model bind back and get all selections?</a> <br/></p>\n\n<p>How to get the selected productid from the checkbox list. \nAny examples.. ?? </p>\n"},{"tags":["asp.net-mvc-3","jquery-validate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13187598,"title":"Validation multiple text fields MVC 3","body":"<p>I want to do the validation of multiple text fields</p>\n\n<p><strong>Values ​​must be between 0 and @ViewBag.MaxNote</strong></p>\n\n<p>In the view I have the following:</p>\n\n<pre><code>@model IList&lt;RolesMVC3.Models.STUDENTS&gt;\n&lt;P&gt;Please enter a value between 0 and : @ViewBag.MaxNote&lt;P&gt;\n@using (Html.BeginForm(null, null, FormMethod.Post, new { id = \"myForm\" }))\n{\n\n  @Html.ValidationSummary(true)\n\n    @for (var i = 0; i &lt; Model.Count(); i++)\n    {\n          @Html.TextBox(\"txt\")\n    }\n &lt;input type=\"submit\" value=\"type=\"submit\" class=\"btn btn-primary\" /&gt; \n}\n</code></pre>\n\n<p>I have to validate the field depending on the value of \"@ViewBag.MaxNote\"</p>\n\n<p>How I can do this?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4,"score":0,"question_id":13186930,"title":"EntityCommandExecutionException","body":"<p>Trying to implement a tutorial @ \"http://oakdome.com/programming/MVC3_Simple_DBContext_Class.php\"</p>\n\n<p>No Idea where this \"s\" is getting add up with my database table name. I got my Database with the name of MyMovies and the table inside it, which I am trying to access, got name as MoviesTable. While execution of this application I am facing this error in which it shows that I am trying to access dbo.MoviesTables but I don't think that while carefully writing my code I wrote anywhere <img src=\"http://i.stack.imgur.com/d2fuL.png\" alt=\"enter image description here\">table name as MoviesTables. This extra \"s\" with MoviesTable causing error.<img src=\"http://i.stack.imgur.com/98kTF.png\" alt=\"enter image description here\">\nNo Idea how to correct this error.</p>\n\n<p><img src=\"http://i.stack.imgur.com/98kTF.png\" alt=\"enter image description here\"></p>\n"},{"tags":["c#","jquery","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":13166253,"title":"MVC3 DropDownList - Modify data being displayed in form on SelectedIndexChanged?","body":"<p>I have two DropDownList elements in my model. </p>\n\n<pre><code>[DisplayName(\"Site\")]\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; Site { get; set; }\npublic int SelectedSiteID { get; set; }\n&lt;%= Html.DropDownListFor(model =&gt; model.SelectedSiteID, new SelectList(Model.Site, \"Key\", \"Value\"))%&gt;\n\n[DisplayName(\"Data Center\")]\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; DataCenter { get; set; }\npublic int SelectedDataCenterID { get; set; }\n&lt;%= Html.DropDownListFor(model =&gt; model.SelectedDataCenterID, new SelectList(Model.DataCenter, \"Key\", \"Value\"))%&gt;\n</code></pre>\n\n<p>I am attempting to modify the collection of ListItem's in my second DropDownList when the user makes a change to the first's selection.</p>\n\n<p>I think that this is possible in the following manner, but I wanted to confirm that this was good practice:</p>\n\n<ul>\n<li>Using jQuery, bind to the first DropDownList's change event.</li>\n<li>When responding to the change event -- send an AJAX request to the server with the newly selected value.</li>\n<li>The server will respond with JSON representing a collection of ListItem objects for the second DropDownList.</li>\n<li>Using jQuery, I modify the second DropDownList's selection such that it contains the returned JSON elements.</li>\n</ul>\n\n<p>This all seems a bit... non-MVC3y, if you will. Is this the standard way of achieving what I am asking, or is there a more clear way?</p>\n"},{"tags":["ajax","asp.net-mvc-3","razor","partial-views"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13186130,"title":"MVC 3 Ajax returning partial view of area","body":"<p>I am trying to return a partial view via ajax. My code likes below and it works fine when partial view is not in an area. </p>\n\n<pre><code>[HttpPost]\npublic ActionResult SearchLogsAjax(string searchParams)\n{\n    // Do some searching\n    return PartialView(\"LogResults\", searchResults);\n}\n</code></pre>\n\n<p>Partial View is rendered when I first open the page. The problem occurs when I press the search button which makes an ajax call to the ActionMethod. If it is in Admin area I get the classic view not found error.</p>\n\n<pre><code>The partial view 'LogResults' was not found or no view engine supports the searched locations. The following locations were searched:\n\n~/Views/Log/LogResults.aspx \n~/Views/Log/LogResults.ascx \n~/Views/Shared/LogResults.aspx \n~/Views/Shared/LogResults.ascx \n~/Views/Log/LogResults.cshtml \n~/Views/Log/LogResults.vbhtml \n~/Views/Shared/LogResults.cshtml \n~/Views/Shared/LogResults.vbhtml\n</code></pre>\n\n<p>Why it is not looking under Admin area which is the current area?\nIs there any way for me to specify the area name I wanted, by something like <code>new { area = \"Admin\" }</code></p>\n\n<p>On the other hand when I move mouse over the partial view name in the code, ReSharper shows the view which i expected.</p>\n\n<p><img src=\"http://i.stack.imgur.com/GrJMG.png\" alt=\"enter image description here\"></p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13161524,"title":"querystring in URL is allowed or not?","body":"<p>my view have two dropdown and one submit buttom if no value is selected and if form get sumbited with GET method then my URL will be <code>http://localhost:53372/question/index?Index=List&amp;type=&amp;stage=&amp;mid=1&amp;mod=5</code>.</p>\n\n<p>but i m applying an ActionFilter with <code>OnActionExcuting()</code> overriden method. so after submitting form URL is like <code>http://localhost:53372/question/index?index=List&amp;mid=1&amp;mod=5</code>.</p>\n\n<p><strong>where other two QueryString is gone?</strong></p>\n\n<pre><code>public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        if (filterContext.RequestContext.HttpContext.Request.QueryString[\"mid\"] == null || filterContext.RequestContext.HttpContext.Request.QueryString[\"mod\"] == null)\n        {\n            mid = Convert.ToString(HttpUtility.ParseQueryString(filterContext.RequestContext.HttpContext.Request.UrlReferrer.Query)[\"mid\"]);\n            mod = Convert.ToString(HttpUtility.ParseQueryString(filterContext.RequestContext.HttpContext.Request.UrlReferrer.Query)[\"mod\"]);\n            if (!string.IsNullOrEmpty(mid) || !string.IsNullOrEmpty(mod))\n            {\n                RouteValueDictionary redirecttargetDictionary = new RouteValueDictionary();\n                NameValueCollection Qstr = null;\n                if (filterContext.HttpContext.Request.RequestType == \"GET\")\n                {\n                    Qstr = HttpUtility.ParseQueryString(filterContext.HttpContext.Request.Url.Query);\n                    foreach (string item in Qstr)\n                    {\n                        redirecttargetDictionary.Add(item, Qstr[item]);\n                    }\n                    if (Qstr[\"mid\"] == null)\n                    {\n                        redirecttargetDictionary.Add(\"mid\", mid);\n                    }\n                    if (Qstr[\"mod\"] == null)\n                    {\n                        redirecttargetDictionary.Add(\"mod\", mod);\n                    }\n                    filterContext.Result = new RedirectToRouteResult(redirecttargetDictionary);\n                }\n            }\n        }           \n    }\n</code></pre>\n\n<p>but if i select Dropdown value then all queryString is in URL.</p>\n\n<p>QueryString with no values <code>stage=&amp;type=</code> are not allowed?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","elmah","xdocument","elmah.mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13182108,"title":"Why does XDocument.Load throw exception when ELMAH is enabled?","body":"<p>I have the following code that retrieves a link to the latest post from the blog subsite:</p>\n\n<pre><code>XDocument doc = XDocument.Load(\"http://www.mysite.com/blog/syndication.axd\");\nXElement node = doc.Descendants(\"item\").FirstOrDefault();\nstring text = node.Element(\"title\").Value;\nstring uri = node.Element(\"link\").Value;\n</code></pre>\n\n<p>The code always worked fine. This week I added ELMAH.MVC via NuGet as a Package Reference. As soon as I deploy the web.config file with the added ELMAH sections, I get the following error:</p>\n\n<pre><code>System.Web.HttpException (0x80004005): Error executing child request for handler \n'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper'. \n---&gt; System.Net.WebException: The remote server returned an error: (500) Internal Server Error.\n   at System.Net.HttpWebRequest.GetResponse()\n   at System.Xml.XmlDownloadManager.GetNonFileStream(Uri uri, ICredentials credentials, IWebProxy proxy, RequestCachePolicy cachePolicy)\n   at System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials, IWebProxy proxy, RequestCachePolicy cachePolicy)\n   at System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn)\n   at System.Xml.XmlReaderSettings.CreateReader(String inputUri, XmlParserContext inputContext)\n   at System.Xml.XmlReader.Create(String inputUri, XmlReaderSettings settings, XmlParserContext inputContext)\n   at System.Xml.Linq.XDocument.Load(String uri, LoadOptions options)\n</code></pre>\n\n<p>If I put the old web.config file back, the error goes away.</p>\n\n<p>Any idea why adding ELMAH would cause XDocument.Load to fail?</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","unit-of-work","dbcontext","objectcontext"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2542,"score":1,"question_id":9176967,"title":"ObjectContext vs DbContext","body":"<p>I've DbContext class from there I have an implementation of Generic Repositories and unit of work in a such way that leads to use ObjectContext, I followed this link in general </p>\n\n<p><a href=\"http://elegantcode.com/2009/12/15/entity-framework-ef4-generic-repository-and-unit-of-work-prototype/\" rel=\"nofollow\">http://elegantcode.com/2009/12/15/entity-framework-ef4-generic-repository-and-unit-of-work-prototype/</a></p>\n\n<p>I've read lot of posts related to the ObjectContext vs DBContext which somewhat makes sense. But I've no idea about my current implementation. just wondering if its an anti-pattern or I'm playing  safe?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13129971,"title":"string formatting on view or controller?","body":"<p>Novice on this 'asp.net mvc' but familiar with mvp pattern for mobile app(mvc#).</p>\n\n<p>Required business logic is to display 'firmware version' in a format like \"1.03\".</p>\n\n<p>I found it can be formatted either in Controller:</p>\n\n<pre><code>ViewBag.deviceFirmwareVersion = String.Format(\"{0}.{1}\", result.VERSION_MAJOR[0], result.VERSION_MINOR[0]);\n</code></pre>\n\n<p>or in View:</p>\n\n<pre><code>&lt;td&gt;@String.Format(\"{0}.{1}\", Model.VERSION_MAJOR[0], Model.VERSION_MINOR[0])&lt;/td&gt;\n</code></pre>\n\n<p>Then, what is the difference? Of course I preferred doing it in a Controller. Mvc# makes view as simple as possible (dumm view) and let it depends on presenter about what to do. Is there a simliar rule here?</p>\n\n<p>[02 Nov 12] Maybe my question was a bit off focused, I ended up creating view model where I pick up necessary pieces from data entity and formatting them for view. <a href=\"http://blogs.msdn.com/b/simonince/archive/2010/01/26/view-models-in-asp-net-mvc.aspx\" rel=\"nofollow\">This link</a> helped me.</p>\n"},{"tags":["asp.net-mvc-3","div","knockout.js"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13178340,"title":"Dynamically bind data with button in Knockout.js?","body":"<p>I'm using MVC3 with Knockout.js and want to attach some data from the api to my button with data-bind=addContribute in a template. This button should open a pop up box and I need the attached button data on that pop up. How can I do this?</p>\n\n<p>My template:</p>\n\n<pre><code>&lt;div&gt;\n        &lt;ul data-bind=\"template: {name: 'membersTemplate', foreach: viewModel.membersList}\"&gt;\n        &lt;/ul&gt;\n&lt;/div&gt;\n\n&lt;script id=\"membersTemplate\" type=\"text/html\"&gt;\n    &lt;li&gt;\n        &lt;div class=\"fl width165\"&gt;\n            &lt;img src=\" ${ image } \" width=\"33\" height=\"34\" /&gt;\n            &lt;span&gt; ${ memberName } &lt;/span&gt;\n            ${ memberType }\n        &lt;/div&gt;\n        &lt;aside class=\"fr margint10\"&gt;\n            &lt;label&gt; ${ contributions } &lt;/label&gt;\n            &lt;a href=\"#\" class=\"sprite-add_img\" id=\"openContribute\" title=\"Add Contributes to Goals\" data-bind=\"click: viewModel.addContribute\" &gt;&lt;/a&gt;\n        &lt;/aside&gt;\n    &lt;/li&gt;\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":36,"score":-1,"question_id":13182055,"title":"in ASP.NET MVC3 How to bind and provide an action to the listbox with the single selection","body":"<p>In asp.net mvc3 razor view how to bind the list of strings in the listbox with the single selection.\nI am trying to bind list of Names (List) with the ListBox.</p>\n\n<pre><code>**Model**\n\nClass StudentInfo\n{\npublic string id{get,set};\npublic string names{get,set};\n}\n\n**In Conrtoller**\n[HTTPGet]\npublic ActionResult Student()\n{\n\nList&lt;StudentInfo&gt; liststudent=new LIst&lt;StudentInfo&gt;{\nnew StudentInfo{id=\"v11\",names=\"AB\"},\nnew StudentInfo{id=\"v12\",names=\"SA\"},\nreturn View(liststudent)\n}\n\n}\n[HTTPPost]\npublic ActionResult Student(string name)\n{\n\nreturn View()\n}\n\n}\n\n**In View**\n\n    &lt;div class=\"alignright\"&gt;\n    @using (Html.BeginForm())\n    {\n    @Html.ListBox(\"MyList\",new SelectList(???));\n    }\n    &lt;/div&gt;\n</code></pre>\n\n<p><strong>The problem I am encountering are:\n1. How to display the names of the student in the listbox. \n2. How to provide an action with the selection.</strong></p>\n"},{"tags":["entity-framework","asp.net-mvc-3","frameworks","entity","code-first"],"answer_count":6,"favorite_count":5,"up_vote_count":14,"down_vote_count":0,"view_count":9960,"score":14,"question_id":6312336,"title":"How can I get my database to seed using Entity Framework CodeFirst?","body":"<p>The database is created successfully (as are the tables) but is not seeded. I have spent several hours and read tons of articles but have not been able to get it. Any suggestions?</p>\n\n<p>On a side note, is it possible to call the initializer without having a reference to my DatabaseContext in the client?</p>\n\n<p>I have included all the relevant code I could think of. If anything else would be helpful, please let me know.</p>\n\n<p>Things I've Tried:</p>\n\n<ol>\n<li>I deleted my connection string (since it defaults to sqlexpress anyways, just the name changed)</li>\n<li>I changed DropCreateDatabaseIfModelChanges to DropCreateDatabaseAlways, still the same.</li>\n</ol>\n\n<p>Edit: The really weird thing is it worked once, but I have no idea how or why it broke again. I am assuming connection strings, but who knows.</p>\n\n<p>DatabaseInitializer.cs</p>\n\n<pre><code>public class DatabaseInitializer : DropCreateDatabaseIfModelChanges&lt;DatabaseContext&gt;\n{\n  protected override void Seed(DatabaseContext context)\n  {\n    // Seeding data here\n    context.SaveChanges();\n  }\n}\n</code></pre>\n\n<p>DatabaseContext.cs</p>\n\n<pre><code>public class DatabaseContext : DbContext\n{\n  protected override void OnModelCreating(DbModelBuilder mb)\n  {\n    // Random mapping code\n  }\n\n  public DbSet&lt;Entity1&gt; Entities1 { get; set; }\n  public DbSet&lt;Entity2&gt; Entities2 { get; set; }\n\n}\n</code></pre>\n\n<p>Global.asax.cs - Application_Start()</p>\n\n<pre><code>protected void Application_Start()\n{\n  Database.SetInitializer&lt;DatabaseContext&gt;(new DatabaseInitializer());\n  AreaRegistration.RegisterAllAreas();\n  RegisterGlobalFilters(GlobalFilters.Filters);\n  RegisterRoutes(RouteTable.Routes);\n}\n</code></pre>\n\n<p>Client web.config</p>\n\n<pre><code>&lt;connectionStrings&gt;\n  &lt;add name=\"DatabaseContext\" connectionString=\"data source=.\\SQLEXPRESS;Database=Database;Integrated Security=SSPI;\" providerName=\"System.Data.SqlClient\" /&gt;\n&lt;/connectionStrings&gt;\n</code></pre>\n\n<h1>SOLUTION</h1>\n\n<p>For the sake of documentation, I am sharing my solution here. Navigating all the comments would be a pain anyways. In the end I had DatabaseInitializer and DatabaseContext in separate classes. I don't really understand while these tiny changes fixed it, but here it is.</p>\n\n<p>DatabaseInitializer.cs</p>\n\n<pre><code>public class DatabaseInitializer : CreateDatabaseIfNotExists&lt;DatabaseContext&gt;\n{\n  protected override void Seed(DatabaseContext context)\n  {\n    // Seed code here\n  }\n}\n</code></pre>\n\n<p>DatabaseContext.cs</p>\n\n<pre><code>public class DatabaseContext : DbContext\n{\n  public DatabaseContext() : base(\"MyDatabase\") { }\n\n  protected override void OnModelCreating(DbModelBuilder mb)\n  {\n    // Code here\n  }\n\n  public DbSet&lt;Entity&gt; Entities { get; set; }\n  // Other DbSets\n}\n</code></pre>\n\n<p>Global.asax.cs - Application_Start()</p>\n\n<pre><code>protected void Application_Start()\n{\n  Database.SetInitializer(new DatabaseInitializer());\n  AreaRegistration.RegisterAllAreas();\n  RegisterGlobalFilters(GlobalFilters.Filters);\n  RegisterRoutes(RouteTable.Routes);\n}\n</code></pre>\n"},{"tags":["html","asp.net-mvc-3","mvc","drop-down-menu"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2123,"score":0,"question_id":6333270,"title":"Populate @Html.DropDownList with a List<string> using MVC","body":"<p>I'm trying to populate a @Html.DropDownList with a List using MVC and Razor.\nBellow is my code for the controller. So I need to pick the list out of my ViewBag and fill the dropdownlist. </p>\n\n<pre><code>public ActionResult Register()\n    {\n        sparklingEntities context = new sparklingEntities();\n        var query = (from discs in context.Disciplines\n                     select discs).ToList();\n        List&lt;string&gt; listOfDiscs = new List&lt;string&gt;();\n        foreach (var item in query)\n        {\n            listOfDiscs.Add(item.Discipline);\n        }\n        ViewBag.ListOfDisciplines = listOfDiscs;\n        return View();\n    }\n</code></pre>\n\n<p>Thanks for the help.</p>\n"},{"tags":["asp.net-mvc-3","ninject","medium-trust"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13101158,"title":"Ninject + MVC3 + Medium Trust Environment","body":"<p>Ok, read a lot of questions about this, but really didn't see any solution that works for me... So, any help will be very apreciated.</p>\n\n<p>I'm running a MVC3 web application with Ninject installed through nuGet (so i got Ninject version 3.0.1.10). Everything works great, except for when i deploy it to the hosting service (LocaWeb.com.br).</p>\n\n<p>Running the web App from there, i got the \"System.Security.SecurityException: Request failed.\"</p>\n\n<p>And the stack trace shows lots of ninject's calls.</p>\n\n<p>So i read somewhere that i should be using a Medium Trust Ninject version, wich I downloaded (ver 3.0.0.15 for Medium Trust) but i really don't have a clue on how to install it manually over the nuGet installed version, or even if this is the right path to go for solving the problem...</p>\n\n<p>Really lost here. :-/</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","entity-framework-4.1","sql-server-ce"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":12414263,"title":"EF 4.1 / SQL Server CE 4.0 without local SQL Server Express","body":"<p>I have an MVC3 project that uses EF 4.1 database first with a SQL Server CE database. On my dev box, which has SQL Server Express installed, everything works fine. However, when deploying to another server that does not have SQL Server Express installed (or any SQL Server Instance), the connection understandably fails. Is it possible to use EF 4.1 with a SQL Server CE database on a box that does not have a local SQL Server instance?  </p>\n\n<p>Even if I try to reference a remote SQL instance, I receive an error </p>\n\n<blockquote>\n  <p><em>Invalid value for key 'attachdbfilename'</em></p>\n</blockquote>\n\n<p>Here is what the connection string looks like:</p>\n\n<pre><code> &lt;add name=\"AlertsEntities\" connectionString=\"metadata=res://*/Models.AlertsModel.csdl|res://*/Models.AlertsModel.ssdl|res://*/Models.AlertsModel.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;data source=.\\SQLEXPRESS;attachdbfilename=|DataDirectory|\\Alerts.mdf;integrated security=True;connect timeout=30;user instance=True;multipleactiveresultsets=True;App=EntityFramework&amp;quot;\" providerName=\"System.Data.EntityClient\" /&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","dependency-injection","command-pattern","simple-injector"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":13183598,"title":"command pattern using Dependency Injection for MVC 3 controller","body":"<p>I read the following article <a href=\"http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=91\" rel=\"nofollow\">.NET Junkie - Meanwhile... on the command side of my architecture</a> which was suggested by another stackoverflow user that outlines the command pattern and provides a strategy for how to use it with DI at the end of the article. </p>\n\n<p>This has helped immensely but the one thing I'm missing, let's say I create a new class called <code>CheckoutCustomerCommandHandler</code>. </p>\n\n<p>Now, let's say I need to inject this command and the <code>MoveCustomerCommandHandler</code> into a controller for whatever reason via the constructor. How does this affect the DI container setup and the constructor? </p>\n\n<p>At the core, they both implement the same interface. It seems like this would result in a lookup issue for the DI container. In the article example, here is their sample injector setup:</p>\n\n<pre><code>public interface ICommandHandler&lt;TCommand&gt;\n{\n    void Handle(TCommand command);\n}\n\n// Exactly the same as before, but now with the interface.\npublic class MoveCustomerCommandHandler\n: ICommandHandler&lt;MoveCustomerCommand&gt;\n{\n    private readonly UnitOfWork db;\n\n    public MoveCustomerCommandHandler(UnitOfWork db,\n    [Other dependencies here])\n    {\n        this.db = db;\n    }\n\n    public void Handle(MoveCustomerCommand command)\n    {\n        // TODO: Logic here\n    }\n}\n\n// Again, same implementation as before, but now we depend\n// upon the ICommandHandler abstraction.\npublic class CustomerController : Controller\n{\n    private ICommandHandler&lt;MoveCustomerCommand&gt; handler;\n\n    public CustomerController(\n    ICommandHandler&lt;MoveCustomerCommand&gt; handler)\n    {\n        this.handler = handler;\n    }\n\n    public void MoveCustomer(int customerId, \n        Address newAddress)\n    {\n        var command = new MoveCustomerCommand\n        {\n            CustomerId = customerId,\n            NewAddress = newAddress\n        };\n\n        this.handler.Handle(command);\n    }\n}\n\nusing SimpleInjector;\nusing SimpleInjector.Extensions;\n\nvar container = new Container();\n\n// Go look in all assemblies and register all implementations\n// of ICommandHandler&lt;T&gt; by their closed interface:\ncontainer.RegisterManyForOpenGeneric(\n    typeof(ICommandHandler&lt;&gt;),\n    AppDomain.CurrentDomain.GetAssemblies());\n\n// Decorate each returned ICommandHandler&lt;T&gt; object with\n// a TransactionCommandHandlerDecorator&lt;T&gt;.\ncontainer.RegisterDecorator(typeof(ICommandHandler&lt;&gt;),\n    typeof(TransactionCommandHandlerDecorator&lt;&gt;));\n\n// Decorate each returned ICommandHandler&lt;T&gt; object with\n// a DeadlockRetryCommandHandlerDecorator&lt;T&gt;.\ncontainer.RegisterDecorator(typeof(ICommandHandler&lt;&gt;),\n    typeof(DeadlockRetryCommandHandlerDecorator&lt;&gt;));\n</code></pre>\n"},{"tags":["html","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13183570,"title":"MVC3 cannot get database model to show in different views","body":"<p>I'm using VB express 2012 and am new to MVC, I have created a basic database along with the controller and views. What I'm trying to do now is have my database data appear in another view. Example I have a playlist view that shows my data from the database this view works fine, I also need the data from my playlist view to show up in a profile view. </p>\n\n<p>Hope you can Help.</p>\n\n<p>Mary.  </p>\n"},{"tags":["c#","jquery","asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":13179643,"title":"MVC3 data in jQuery dialog is not posting back to server","body":"<p>I am a pretty new to MVC3, but I am writing an MVC3 app needs to load a List of DateTime in a jQuery dialog box, but when I go to post back to the server, the List of DateTime does not get sent.  </p>\n\n<p>I tired adding in a hidden element for each of the dates in the list like this</p>\n\n<pre><code>@for (int i = 0; i &lt; Model.ListOfDates.Count; i++)\n{\n    @Html.HiddenFor(x =&gt; x.ListOfDates[i])\n}\n</code></pre>\n\n<p>but then I get the following error when trying to change the date in the jQuery datepicker:</p>\n\n<blockquote>\n  <p>Microsoft JScript runtime error: Unable to set value of the property\n  'currentDay': object is null or undefined</p>\n</blockquote>\n\n<p>Could someone please tell me what I am doing wrong?  I have created a test app to demonstrate:</p>\n\n<p>Model</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\n\nnamespace Stupid_Dates_Test.Models\n{\n    public class Model\n    {\n        public string StringProperty { get; set; }\n        public int IntProperty { get; set; }\n        public List&lt;DateTime&gt; ListOfDates { get; set; }\n    }\n}\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing Stupid_Dates_Test.Models;\n\nnamespace Stupid_Dates_Test.Controllers\n{\n    public class HomeController : Controller\n    {\n        public ActionResult Index()\n        {\n            Model m = new Model();\n            m.StringProperty = \"This is a string property\";\n            m.IntProperty = 100;\n            m.ListOfDates = new List&lt;DateTime&gt;();\n            m.ListOfDates.Add(new DateTime(2012, 11, 1));\n            m.ListOfDates.Add(new DateTime(2012, 11, 2));\n            m.ListOfDates.Add(new DateTime(2012, 11, 3));\n            m.ListOfDates.Add(new DateTime(2012, 11, 4));\n            m.ListOfDates.Add(new DateTime(2012, 11, 5));\n            return View(m);\n        }\n\n        public void Save(Model m)\n        {\n            // Save Code\n        }\n    }\n}\n</code></pre>\n\n<p>View</p>\n\n<pre><code>&lt;script src=\"../../Scripts/jquery-1.5.1.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"../../Scripts/jquery-ui-1.8.11.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;link href=\"../../Content/themes/base/jquery.ui.all.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n\n@model Stupid_Dates_Test.Models.Model\n&lt;form id=\"frmMain\" action=\"\"&gt;\n@Html.EditorFor(x =&gt; x.StringProperty)\n@Html.EditorFor(x =&gt; x.IntProperty)\n\n@*@for (int i = 0; i &lt; Model.ListOfDates.Count; i++)\n{\n    @Html.HiddenFor(x =&gt; x.ListOfDates[i])\n}*@\n\n&lt;a href=\"javascript:ShowDates()\"&gt;Edit List of Dates&lt;/a&gt;\n&lt;div id=\"dlgDates\" style=\"display: none;\"&gt;\n    @for (int i = 0; i &lt; Model.ListOfDates.Count; i++)\n    {\n        @Html.EditorFor(x =&gt; x.ListOfDates[i])\n    }\n&lt;/div&gt;\n&lt;/form&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        var today = new Date();\n        var dd = today.getDate();\n        var mm = today.getMonth() + 1;\n        var yyyy = today.getFullYear();\n        if (dd &lt; 10) { dd = '0' + dd }\n        if (mm &lt; 10) { mm = '0' + mm }\n        today = mm + '/' + dd + '/' + yyyy;\n        $(\":input[data-datepicker]\").datepicker({ defaultDate: today });\n    });\n\n    function ShowDates() {\n        $(\"#dlgDates\").dialog({\n            autoOpen: true,\n            closeOnEscape: false,\n            width: 500,\n            height: 400,\n            resizable: false,\n            title: \"Dates\",\n            modal: true,\n            draggable: false,\n            open: function () {\n                $(\"#dlgDates\").show();\n            },\n            buttons: {\n                \"Save\": function () {\n                    $.ajax({\n                        type: \"POST\",\n                        url: '/Home/Save/',\n                        data: $(\"#frmMain\").serialize(),\n                        success: function () {\n                            // Save Code\n                            alert('Saved successfully!');\n                            $('#dlgDates').dialog('destroy');\n                        },\n                        error: function () {\n                            alert('Error');\n                        }\n                    });\n                }\n            }\n        });\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>DateTime Editor Template</p>\n\n<pre><code>@model System.DateTime\n@Html.TextBox(\"\", (Model == null ? \"\" : Convert.ToDateTime(ViewData.TemplateInfo.FormattedModelValue).ToShortDateString()), new { data_datepicker = true })\n</code></pre>\n"},{"tags":["javascript","jquery","css","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13170366,"title":"How can I higlight the current page by changing image on my menu?","body":"<p>This is one of the lines in my div nav:</p>\n\n<pre><code>&lt;a href=\"/Home/ShoppingCart\"&gt;&lt;img class=\"swap5\" src=\"/Static/Images/Meny_normal_06.png\"  alt=\"\" /&gt;&lt;/a&gt;\n</code></pre>\n\n<p>When someone click on this image they will get redirected to another page and I want this image to get swapped to my other image that is darker which highlights the current page.</p>\n\n<p><img src=\"http://i.stack.imgur.com/6H4Fg.png\" alt=\"enter image description here\"></p>\n\n<p>to</p>\n\n<p><img src=\"http://i.stack.imgur.com/tjlhc.png\" alt=\"enter image description here\">             &lt;--- highlighted one that I want to change to while its current page</p>\n\n<p>Here is my Jquery:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n        $(document).ready(function () {\n            $('.swap5').click(function () {\n                $(this).attr('src', '/Static/Images/Meny_clicked_01.png');\n\n\n         });  \n        });\n&lt;/script\n</code></pre>\n\n<p>></p>\n\n<p>I realized that this wont do it, beacuse the new image is gone by the time i get redirected to the other page..</p>\n\n<p>How can I do this in a smooth way? I am using MVC 3 btw</p>\n\n<p>any kind of help is appreciated</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":4185,"score":1,"question_id":7319238,"title":"loading partial view containing javascript - asp.net mvc","body":"<p>In one of my View pages I have a asp.net mvc PartialView. The PartialView contains some javascript (and jquery). In my asp.net main View I load the PartialView using ajax, within a div tag, in way given below. That is, from controller I return PartialView(\"_DonorEdit\") and in my main page I use javascript to replace the content of the div tag with the PartialView response.</p>\n\n<pre><code>&lt;div class=\"content\" id=\"content\"&gt;\n    @{Html.RenderPartial(\"_DonorEdit\");}   \n&lt;/div&gt;\n</code></pre>\n\n<p>Everything works fine except the javascript contained in the partialView (_DonorEdit). Thus the question boils down to - How do I have javascript embedded in an div tag and still get it working correctly.</p>\n\n<p>regards,\nNirvan.</p>\n\n<p>Edit:\nThis problem occurs only when the partial view is returned from the ajax call. In the above code, if I directly include the PartialView (on non-ajax request), then the javascript works properly. But if I later replace the content of div using ajax request, the javascript included in PartialView does not work. The embedded javascript simply does not appear along with the Partial View. So there seems to be some other reason, why the javascript embedded in Partial View does not get passed to browser after the ajax request success.</p>\n\n<p>Edit2: The part of my javascript code</p>\n\n<pre><code>&lt;script type=...&gt;\n//Date Picker. This works. I get Calendar popup as expected\n\n$(document).ready(function () {\n    $(\"#Donor_BirthDate\").datepicker({\n        dateFormat: \"dd-mm-yy\",\n        changeMonth: true,\n        changeYear: true,\n        yearRange: \"-75:+0\"\n    });\n\n    $(\"#Donor_DateLastDonated\").datepicker({\n        dateFormat: \"dd-mm-yy\",\n        changeMonth: true,\n        changeYear: true,\n        yearRange: \"-20:+1\"\n    });\n});\n\n\n//Dropdown handler. Does not make it in my final View.\n\nfunction residenceStateChanged(e) {\n    var url = '@Url.Action(\"_GetCities\", \"DropDown\")';\n    var cmbResidenceCityId = $('#ResidenceCityId').data('tDropDownList');\n    cmbResidenceCityId.loader.showBusy();\n\n    $.ajax({\n        type: 'GET',\n        url: url,\n        data: { StateId: e.value, AddSelectOption: true, SelectOption: 'Select' },\n        traditional: true,\n        success: function (resp, textStatus, jqXHR) {\n            cmbResidenceCityId.dataBind(resp);\n            cmbResidenceCityId.select(0);\n            cmbResidenceCityId.trigger.change();\n        },\n        error: function (jqXHR, textStatus, errorThrown) {\n            alert(jqXHR.responseText);\n        },\n        complete: function () {\n            cmbResidenceCityId.loader.hideBusy();\n        }\n    });\n}\n\n....//Some other code omitted. Does not make it in final view.\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","nopcommerce"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13182602,"title":"Is NopCommerce only usable with Javascript enabled?","body":"<p>In the demo shop (<a href=\"http://demo.nopcommerce.com\" rel=\"nofollow\">http://demo.nopcommerce.com</a>/) I cant use some essential buttons like \"Add To Cart\" or  \"Submit\" (Newsletter) if I dont have Javascript enabled.</p>\n\n<p>Is this just a frontend design issue, or are parts of the shop not implemented for use without javascript enabled?</p>\n"},{"tags":["c#","asp.net-mvc-3","design-patterns","service-layer","command-pattern"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":38,"score":-1,"question_id":13182491,"title":"Command pattern vs. Service Layer Pattern","body":"<p>Would it make sense to use the Command pattern as a replacement to the Service Layer Pattern for an MVC 3 based application?  What are the pros vs cons of Service Layer Pattern and Command Pattern and which is the preferred method?  I am starting a new project and am trying to determine which would make more sense to use.</p>\n"},{"tags":["c#","javascript","asp.net-mvc-3","jeditable"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13181578,"title":"Update jeditable text field after checking security","body":"<p>I've got a scenario where only some users have permission to update a field.  I'm trying to put jEditable in place to allow in place editing of the field, and want to check the permissions on the back end in the controller as follows:</p>\n\n<pre><code> public JsonResult UpdateComment(string MRN, string comment)\n {\n    if (this.HttpContext.User.CanComment())\n    {\n        return this.Json(new \n           { \n             Status = \"OK\", \n             value = this.service.UpdateComment(MRN, comment) \n           });\n    }\n\n    return this.Json(new { //???? });\n}\n</code></pre>\n\n<p>My View looks like:</p>\n\n<pre><code>@model MyApp.ViewModels.DetailViewModel\n&lt;div&gt;\n    ....\n    &lt;span id=\"txtSource\"&gt;@Html.DisplayFor(m=&gt;m.Source)&lt;/span&gt;\n    &lt;span id=\"txtMRN\"&gt;@Html.DisplayFor(m=&gt;m.MRN)&lt;/span&gt;\n    &lt;span id=\"@Model.CommentIdName\"&gt;@Html.DisplayFor(m=&gt;m.Comments)&lt;/span&gt;\n    ....\n&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(function() {\n        $('#editComment').editable(\"/@Model.Source/UpdateComment\",\n            {\n                id: 'mrn',\n                name: 'comment',\n                type: 'textarea',\n                cancel: 'Cancel',\n                submit: ' OK',\n                tooltip: 'Click to Edit Comment...'\n            });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>In the situation where the user doesn't have permission to 'Comment', the edit needs to be canceled, and the field value returned to its original value.</p>\n\n<p>I've already setup in my view to change the id of the field to something that jEditable isn't looking for when the view is rendered, so that takes care of most scenarios without having to deal with it on the back end.  </p>\n\n<p>I'm trying to protect the data and return a reasonable response, and I don't know what code is needed in place of the comment //????'.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Fixed javascript problem and simplified it by putting it into the view.</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":5127,"score":4,"question_id":5607890,"title":"Html.DropDownListFor() - How to set default selected value for a strongly typed view?","body":"<p>Using ASP.NET MVC 3, I have been struggling to set the selected value for dropdown using the help Html.DropDownListFor() function for a strongly typed view.</p>\n\n<p>The code for the models look like this:</p>\n\n<pre><code>public class ResourceView\n{\n   ...\n   public Language Language { get; set; }\n}\n\npublic class Language\n{\n   public string DisplayName { get; private set; }      \n   public string Code { get; private set; }    \n   public override string ToString() {  return DisplayName;  }\n}\n</code></pre>\n\n<p>and within the view:</p>\n\n<pre><code>@Html.DropDownListFor(model =&gt; model.Language, \n  new SelectList(ViewBag.AllPossibleLanguages, \n    \"Code\", \"DisplayName\", Model.Language.Code))\n</code></pre>\n\n<p>There are a few workarounds, such as using </p>\n\n<pre><code>@Html.DropDownList(\"LanguageCode\", \n   new SelectList(ViewBag.PossibleLanguages,\n      \"Code\", \"DisplayName\", Model.Language.Code))\n</code></pre>\n\n<p>and curiously enough, the code above <strong>won't</strong> work if the first parameter is set as \"Language\", same as the name of the property in the model.</p>\n\n<p>I can also do like this </p>\n\n<pre><code>@Html.DropDownListFor(model =&gt; model.Language, \n  new SelectList(ViewBag.AllPossibleLanguages))\n</code></pre>\n\n<p>which will work as well with the appropriate selected value, however only the ToString() value of the Language class will be displayed and the actual language code that i want in the option tags won't be set, which is not surprising as there is nothing identify that the Code field should be used as the value attribute.</p>\n\n<p>I can also solve this using a jquery event handler that selects the appropriate value afterwards. However I am curious as to <strong>why</strong> this doesn't work as intended and would like to solve it properly if possible.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","design-patterns","dependency-injection"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":73,"score":0,"question_id":13170705,"title":"Request-Response pattern dependency injection with MVC 3","body":"<p>I am currently using a variation of the <strong>request-response, correction command pattern</strong> for my service layer on a <code>c# mvc 3</code> project. </p>\n\n<p>Here is my issue, currently my Services implement <code>IService</code> and have a single point of execution, <code>ExecuteService</code> method which takes an associated Request object which implements the <code>IRequest</code> interface.  This seems to work fine until I have to add dependency injection to my controllers. </p>\n\n<p>Since my services only need to implement from the same interface it seems to throw a monkey wrench in registering my Services with the unity ID container.  Has anyone used the <code>request-response</code> pattern with unity DI?</p>\n\n<p>Here is a basic code scenario for how the code is organized:</p>\n\n<pre><code> public interface IServices&lt;T&gt;\n {\n    bool Execute(T request);\n }\n\n\n public class AuthenticationService : IServices&lt;AuthenticationRequest&gt;\n {\n    public bool Execute(AuthenticationRequest request)\n    {\n         switch (request.ActionToPerform)\n         {\n            ....... \n         }\n\n         return false;\n     }      \n}\n\npublic class AssociationService : IServices&lt;AssociationRequest&gt;\n{\n    public bool Execute(AssociationRequest request)\n    {\n          switch (request.ActionToPerform)\n          {\n               .......  \n          }\n\n      return false;\n    }       \n }\n</code></pre>\n"},{"tags":["c#","javascript","asp.net-mvc-3"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13181972,"title":"Save context state in Noesis Javascript.net","body":"<p>I'm using the noesis javascript.net library in my C# MVC3 application.  </p>\n\n<p>Is it possible to save a snapshot of a javascript context object and then reload that snapshot into a new javascript context instance?</p>\n"},{"tags":["asp.net","sql-server","asp.net-mvc-3","entity-framework-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3316,"score":0,"question_id":5308309,"title":"How to connect to remotely SQL Server 2008 using MVC3 EF4","body":"<p>I'm trying to connect remotely and I have the following connection string on my MVC3 using EF4 ctp5 code first</p>\n\n<pre><code>&lt;add name=\"ApplicationServicesX\"\n     connectionString=\"provider=System.Data.SqlClient;provider connection string='Data Source=asc-svr2;\n     Initial Catalog=AdventureWorks;Integrated Security=True;Connection Timeout=60;\n     multipleactiveresultsets=true'\" providerName=\"System.Data.EntityClient\" /&gt;\n</code></pre>\n\n<p>and it gives an error </p>\n\n<pre><code>[ProviderIncompatibleException: The provider did not return a ProviderManifestToken string.]\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Login failed. The login is from an untrusted domain and cannot be used with Windows authentication.\n</code></pre>\n\n<p>my controller looks like this </p>\n\n<pre><code> public ActionResult Index()\n {\n     var post = cmsDB.Posts.ToList();\n             return View(post);\n}\n</code></pre>\n\n<p>When I run the code on my local machine no problem at all but when I get into \nremotely connecting into SQL Server 2008 the problem arises.</p>\n\n<p>Thanks a lot for any help.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","textbox","passwords"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13181156,"title":"ASP.NET MVC3: Is it possible to make @Html.TextBoxFor text to be hidden","body":"<p><br>\nWould it be possible to make <code>@Html.TextBoxFor(m =&gt; EmployeeID)</code>, text in the view to be hidden, when typed in. The same functionality as <code>@Html.PasswordFor</code>. There are reasons why I cannot use PasswordFor.</p>\n\n<p><br><br>\nI want the same functionality from my previous post.<br>\n<a href=\"http://stackoverflow.com/questions/13179440/asp-net-mvc3-htmlpasswordfor-how-to-make-it-not-reset-after-post-methods\">ASP.NET MVC3 HtmlPasswordFor how to make it not reset after post methods</a></p>\n\n<p>EDIT</p>\n"},{"tags":["asp.net-mvc-3","telerik","asp.net-mvc-3-areas"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13181008,"title":"MVC View won't reflect updates to data","body":"<p>I have a Telerik Grid and Combobox. The Combobox resides in one view and the Grid resides in a separate view but it's contained within an IFrame inside the main view where the Combobox is located. The rationale for the IFrame is simply to avoid full page refreshes and confine them to the Grid View only. This works fine.</p>\n\n<p>When I change the selected Item in my combobox there is an Ajax call that posts the selected value to the Grid Controller which selects all the records from the underlying Model based on the selected value and returns the new set of data to the View. Here is my function call in the Combobox View:</p>\n\n<pre><code>    function ComboBox_OnChange() {\n    var combobox = $('#ErrorFilter').data('tComboBox');\n    var selectedValue = combobox.text();\n\n    $.ajax(\n        {\n            type: \"POST\",\n            url: \"/ErrorLog/ErrorAuditGrid/\",\n            data: { pkName: selectedValue },\n            dataType: \"html\"\n        });\n    }\n</code></pre>\n\n<p>And here is my Controller Action:</p>\n\n<pre><code>    public ActionResult ErrorAuditGrid(string pkName)\n    {\n        var errors = pkName == null ? GetErrorsByPackageName(null) : GetErrorsByPackageName(pkName);\n        return View(errors);\n    }\n</code></pre>\n\n<p>I have debugged the results of the errors variable and it contains all the expected records but the Grid never reflects the new set of data. Here is my Grid in the Grid view:</p>\n\n<pre><code>        @( Html.Telerik().Grid(Model).HtmlAttributes(new { style = \"width:1490px;\" })\n        .Name(\"Grid\")\n        .ClientEvents(events =&gt; events.OnLoad(\"Grid_OnDataBinding\"))\n        .Columns(columns =&gt;\n        {\n            columns.Bound(o =&gt; o.TimeOfErr).Title(\"Time Of Error\").Width(115);\n            columns.Bound(o =&gt; o.PackageName).Width(95);\n            columns.Bound(o =&gt; o.PackageStartTime).Width(110);\n            columns.Bound(o =&gt; o.SourceName).Width(100);\n            columns.Bound(o =&gt; o.ErrorDesc).Title(\"Title Description\").Width(500);\n        })\n        .Sortable(sorting =&gt; sorting.OrderBy(sortOrder =&gt; sortOrder.Add(field =&gt; field.ErrorId).Descending()))\n        .Scrollable(c =&gt; c.Height(\"567px\"))\n        .Pageable(pager =&gt; pager\n        .Enabled(true)\n        .PageSize(8))\n\n        )\n</code></pre>\n\n<p>I've already searched the other suggested links based on my question but can't find anyone having a similar issue that has any response that I can apply to my situation, so I'm suspecting I may be doing something wrong but can't determine what. I would have expected that returning the new set of data would result in repopulation of the Grid as it does work on the Initial Load, but it's not the case.</p>\n\n<p>Suggestions?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","security","passwords"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13179440,"title":"ASP.NET MVC3 HtmlPasswordFor how to make it not reset after post methods","body":"<p><br>\nEssentially I have a HtmlPasswordFor(m => EmployeeID), I have a button called \"Go\". Once I hit the Go textbox, I actually do not want the password to disappear on the or have the field password to be cleared. <br>\nHow would I do this?<br><br><br>\nBEFORE\n<img src=\"http://i.stack.imgur.com/vOzfF.png\" alt=\"enter image description here\">\n<br><br><br>\nAFTER\n<img src=\"http://i.stack.imgur.com/JggyK.png\" alt=\"enter image description here\"> \nI do not want the my employeeid to reset. I want to keep the passwords in <em>*</em>*'s, but I'll need the password on my next post call.\n<br><br></p>\n\n<h2>Controller</h2>\n\n<pre><code>    [HttpGet]\n    public ActionResult MainForm()\n    {\n        var model = new VTViewModel();\n        return View(model);\n    }\n\n    [HttpPost]\n    public ActionResult MainForm(VTViewModel model, string buttontype)\n    {\n        if (ModelState.IsValid)\n        {\n            string EmployeeID = (Convert.ToInt64(model.EmployeeBinaryID, 2)).ToString();\n            if (buttontype == \"Go\")\n            {\n                // GET Fields depending on the serial number.\n\n                model.ListFields = logic_model.getFormInfo(model.SerialNumber, EmployeeID);\n                if (model.ListFields[0].return_num == \"0\")\n                {\n                    model.Go = true;\n                    // Set Process\n                    // Set Header Token\n                    // Set Header Title\n\n                    ViewData[\"HEADER\"] = model.ListFields[0].HeaderName + \" | \" + model.ListFields[0].TubeType + \" | \" + model.ListFields[0].ProductLine;\n                }\n                else\n                {\n                    model.DisplayMessage = helper.checkErrors(model.ListFields[0].return_num);\n                }\n            }\n            else if (buttontype == \"Submit\")\n            {\n                model.HeaderToken = model.ListFields[0].HeaderToken; \n                string header = model.HeaderToken;\n                string check = \"\";                                                        \n                string return_num = model.ListFields[0].return_num; \n                // If the submission worked\n\n                //SUBMIT HERE INTO DB then Clear\n                List&lt;string&gt; values_to_submit = new List&lt;string&gt;(); // Creates a list to store the values to submit\n                for (int i = 0; i &lt; model.ListFields.Count; i++)\n                {\n                    // Fills in the hidden values.\n                    if (model.ListFields[i].isHidden)\n                    {\n                        if (model.ListFields[i].Token == \"SNT\" || model.ListFields[i].Token == \"SNC\")\n                        {\n                            model.ListFields[i].Value = model.SerialNumber;\n                        }\n                        else if (model.ListFields[i].Token == \"USR\")\n                        {\n                            model.ListFields[i].Value = EmployeeID;\n                        }\n                        else if (model.ListFields[i].Token == \"TMS\")\n                        {\n                            model.ListFields[i].Value = \"0\";\n                        }\n                    }\n\n                    // If it is a check box do the right conversion.\n                    if (model.ListFields[i].DataType == \"DATA-CKBOX\")\n                    {\n                        //string convertedValue = helper.trueFalseStringtToIntBool(model.ListFields[i].Value);\n                        string convertedValue = helper.boolToInt(model.ListFields[i].BoolValue).ToString();\n                        model.ListFields[i].Value = convertedValue;\n                    }\n\n                    values_to_submit.Add(model.ListFields[i].Token + model.ListFields[i].Value);\n\n                }\n\n                check = logic_model.helperSubmit(values_to_submit, header, 1);\n\n\n\n                if (check == \"Submitted\")\n                {\n                    ModelState.Clear();\n                    VTViewModel clear_model = new VTViewModel(); // Creates an empty model\n                    clear_model.DisplayMessage = \"Submitted\\n\" + model.SerialNumber + \"\\n\" + DateTime.Now;\n                    return View(clear_model);\n                }\n                else\n                {\n                    model.DisplayMessage = check; // Sets the display message to the error.\n                }\n\n            }\n            else if (buttontype == \"Clear\")\n            {\n                // Clears the screen and model\n                ModelState.Clear();\n                VTViewModel clear_model = new VTViewModel(); // Creates an empty model\n                return View(clear_model);\n            }\n        }\n        return View(model);\n\n    }\n</code></pre>\n\n<h2>View</h2>\n\n<pre><code>    div&gt;\n         &lt;fieldset&gt;\n         &lt;table id=\"main_table\"&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;@Html.LabelFor(m =&gt; m.SerialNumber)&lt;/td&gt;\n                    &lt;td&gt;@Html.LabelFor(m =&gt; m.EmployeeBinaryID)&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;@Html.TextBoxFor(m =&gt; m.SerialNumber)&lt;/td&gt;\n                    &lt;td&gt;@Html.PasswordFor(m =&gt; m.EmployeeBinaryID, new { autocomplete = \"off\" }) &lt;/td&gt;\n                &lt;/tr&gt;\n\n                &lt;tr&gt;&lt;td&gt;&lt;input type=\"submit\" value=\"Go\" name=\"buttontype\" class=\"submit_button\" id=\"btn\"/&gt;&lt;br /&gt;&lt;br /&gt;&lt;/td&gt;&lt;/tr&gt;\n         &lt;/table&gt;\n         &lt;/fieldset&gt;\n         &lt;br /&gt; \n</code></pre>\n\n<p><br><br>\nThanks</p>\n"},{"tags":["asp.net-mvc-3","multi-tenant","roleprovider"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13150548,"title":"Custom RoleProvider in a MultiTenant MVC App","body":"<p>I need to develop a custom RoleProvider for a MultiTenant web app.\nAt the DB level, we have a table that relates Users with Roles with Tenants.</p>\n\n<p><img src=\"http://i.stack.imgur.com/D24iV.jpg\" alt=\"enter image description here\"></p>\n\n<p>My problem is that RoleProvider gets user roles just passing the User as parameter, and we need to take the Tenant into account.</p>\n\n<p>In RoleProvider implementation we have:</p>\n\n<pre><code>public override string[] GetRolesForUser(string username)\n{\n    //Code to retrieve roles from repo\n}\n</code></pre>\n\n<p>As the roles are for a user in an specific Tenant, we need:</p>\n\n<pre><code>public override string[] GetRolesForUser(string username, int tenantId)\n{\n    //Code to retrieve roles from repo\n}\n</code></pre>\n\n<p>The current tenant is stored in the ControllerBase class (the one that all controllers inhereted from).</p>\n\n<p>The Membership and Role Providers are in a separate project, so I don't see a way to use the current Tenant. I think I could create my custom RoleProvider in the web app project.</p>\n\n<p>Any idea on how to implement the RoleProvider interface taking the Tenant as part of the input ? </p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13179058,"title":"Unobtrusive AJAX doesn't validate Custom attribute for 'Not Required' field","body":"<p>I am trying to implement client side validation in MVC 3 over Unobtrusive AJAX form.</p>\n\n<pre><code>    public class PhoneNumberAttribute : RegularExpressionAttribute, IClientValidatable\n{\n    private const string Message = \" must be a valid phone number\";\n    public PhoneNumberAttribute()\n        : base(@\"^[\\s\\d\\+\\(\\)]+$\")\n    {\n        ErrorMessage = \"{0}\" + Message;\n    }\n\n    public IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n    {\n        return new List&lt;ModelClientValidationRule&gt;() {\n            new ModelClientValidationRule{\n                ValidationType=\"phonenumber\",\n                  ErrorMessage= metadata.DisplayName + \" \" + Message\n            } \n        };\n    }\n}\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code> public class MyModel\n{\n    [DisplayName(\"Phone Number\")]        \n    [PhoneNumber]\n    public string PhoneNumber{ get; set; }\n }\n</code></pre>\n\n<p>HTML</p>\n\n<pre><code> &lt;% using (Ajax.BeginForm(\"Contact\", new AjaxOptions() { UpdateTargetId = \"ajaxcontactform\", \n     OnBegin = \"ShowProcessing\", \n     OnComplete = \"HideProessing\",\n     InsertionMode = InsertionMode.Replace\n }))\n {%&gt;\n           &lt;%: Html.ValidationSummary()%&gt;\n\n &lt;%: Html.TextBoxFor(m =&gt; m.PhoneNumber, new { Class = \"contacttextform\" })%&gt;\n &lt;input id=\"sendBtn\" name=\"send\" type=\"submit\" class=\"contactformbutton\" value=\"Send\" /&gt;\n&lt;%}%&gt;\n</code></pre>\n\n<p>I have included required .js files and other client side validation works for the fields which have [Required] attribute as well as custom validation attribute.</p>\n\n<p>Please suggest why its not working for PhoneNumber field?</p>\n\n<p>Thanks,</p>\n"},{"tags":["asp.net-mvc-3","list","binding","actionmethod"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13177558,"title":"Bind a class with List properties from View to Action Method in MVC3","body":"<p>I have a controller <code>HomeController</code> with the following action method:</p>\n\n<pre><code>public ActionResult DisplayData(MyViewModel myViewModel)\n{\n   // Do something with myViewModel           \n}\n</code></pre>\n\n<p>The <code>ViewModel</code>:</p>\n\n<pre><code>public class MyViewModel\n{\n    public List&lt;string&gt; Names { get; set; }\n    public List&lt;CustomViewModel&gt; CustomVM { get; set; }\n    public bool IsSpecial { get; set; }\n}\n</code></pre>\n\n<p>And the following <code>View</code></p>\n\n<pre><code>@model AppName.ViewModels.MyViewModel\n\n@{ Html.RenderPartial(\"MyPartialView\", Model);  }\n\n&lt;img src=\"@Url.Action(\"DisplayData\", \"Home\", new RouteValueDictionary(Model))\" alt=\"Image\" /&gt;\n</code></pre>\n\n<p>I use the <code>Url.Action</code> how it is described here but what I get in the <code>DisplayData</code> action method is null. In the source code I got:</p>\n\n<pre><code>&lt;img src=\"/Home/DisplayData?IsSpecial=true&amp;amp;Name=System.Collections.Generic.List%601%5BSystem.String%5D&amp;amp;CustomVM=System.Collections.Generic.List%601%5BVestibule.AppName.ViewModels.CustomViewModel%5D\"\" alt=\"Image\" /&gt;\n</code></pre>\n\n<p>so it is passing actually the type instead of the values. The only variable value passed correctly is the bool <code>IsSpecial</code></p>\n\n<p>The ViewModel instead is correctly passed to the partial view. What am I doing wrong?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","http"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13165892,"title":"Securely posting from Fiddler 2.0 to ASP.NET MVC 4","body":"<p>Given: <a href=\"http://anyurl.com/Base/Processor/\" rel=\"nofollow\">http://anyurl.com/Base/Processor/</a> is the base url to hit a controller action on Processor, I have no trouble using HTTP GET to pass values to the server using REST routes \"/value\" or form parameter \"?value=value\". </p>\n\n<p>However, when I try to post placing the payload in the http request body, I cannot get the server to accept the input. I have tried several variations of the following:</p>\n\n<pre><code>User-Agent: Fiddler\nHost: anyurl.com\nContent-Length: 11\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\n\nvalue=value\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["asp.net-mvc-3","nhibernate","fluent-nhibernate"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13174570,"title":"NHibernate.ObjectNotFoundException: No row with the given identifier exists","body":"<p>Here's my error:</p>\n\n<pre><code>NHibernate.ObjectNotFoundException: No row with the given identifier exists[Project.Core.Entities.User#(GUID)]\nat Hibernate.Impl.SessionFactoryImpl.DefaultEntityNotFoundDelegate.HandleEntityNotFound(String entityName, Object id) \nat NHibernate.Event.Default.DefaultLoadEventListener.Load(LoadEvent event, IEntityPersister persister, EntityKey keyToLoad, LoadType options)\n</code></pre>\n\n<p>One of the users of the system chanced upon getting this error, which doesn't make sense to me entirely. What I do know:</p>\n\n<ol>\n<li>A Teacher table REFERENCES a User table.</li>\n<li>Somehow the Teacher table has a row that references to a row in the User's table, but that row doesn't exist in the User's table.</li>\n</ol>\n\n<p>Any idea why is this happening? Please advise!</p>\n\n<p>Rephrase my Qn:</p>\n\n<p>I know what does the error meant, however I don't seem to figure out what caused the missing user row? I have placed it all on Cascade.ALL. I don't think it's related to deletion. What are the possible scenarios the above may happen?</p>\n\n<p>Edit 2:</p>\n\n<p>Please refer to the mapping via FNH: Any issues with this?</p>\n\n<pre><code>public void Override(AutoMapping&lt;Teacher&gt; mapping)\n    {\n        mapping.References(x =&gt; x.User).Cascade.All().Not.LazyLoad();\n    }\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["jquery","asp.net-mvc-3","flexigrid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13179140,"title":"How to make flexigrid column editable","body":"<p>Do you know how to make a specific flexigrid column editable.\nI tried searching but couldn't get anything online.\nThanks</p>\n"},{"tags":["c#","asp.net-mvc-3","jquery-validate"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":670,"score":3,"question_id":5912833,"title":"Adding a group using jQuery unobtrusive validation","body":"<p>I'm using asp.net mvc 3, and I have a scenario like the one in this post <a href=\"http://stackoverflow.com/questions/1289086/jquery-validate-multiple-fields-with-one-error\">JQuery Validate multiple fields with one error</a>. I'm using the <strong>IClientValidatable</strong> since I had to create a custom validator for my scenario. But if I apply the validator to each of the properties, I will get 3 times the error message. So I know you can use groups to tell the <strong>validator</strong> to group messages for multiple fields, and I couldn't find an option to do it from C#, so I tried to do something like this:</p>\n\n<pre><code>$(\"#frmUser\").validate({\n    groups: {\n        DateofBirth : \"Year Month Day\"\n    }\n});\n</code></pre>\n\n<p>but the whole validation stops working, so I have the feeling that line of code overrides whatever the unobtrusive code generates. So I'm wondering if there's a way to set groups in the<br>\n   <strong>validator.unobtrusive.adapters.add</strong>\nor\n   <strong>validator.addMethod</strong>\nmethods.\nThanks</p>\n"},{"tags":["asp.net-mvc-3","view","model","controller","httprequest"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13175067,"title":"Accessing model data, from MVC3 partial view, in controller without passing it explicitly in the view","body":"<p>I have a MVC3 partial view that is called with a model. </p>\n\n<pre><code>@model SomeModel\n</code></pre>\n\n<p>The model have an Id parameter.</p>\n\n<p>In the view I call <code>@Html.Action(\"SomeMethod\", \"SomeController\")</code></p>\n\n<p>Is there any way to access the Id parameter in the SomeMethod ActionResult without passing it explicitly like this:</p>\n\n<pre><code>@Html.Action(\"SomeMethod\", \"SomeController\", new {\"Id\" = Model.Id})\n</code></pre>\n\n<p>The problem is that I can not change the source code of the partial view. And I need the Id value. The Id is not used in the partial view so I can not access it via JavaScript.\nIs the model passed to the HttpContext and is there any way to pass it?</p>\n\n<p><strong>EDIT:</strong> The thing is that I am developing a plugin for <a href=\"http://nopcommerce.com/\" rel=\"nofollow\">nopCommerce</a>, like the ones that are offered by <a href=\"http://www.nop-templates.com/\" rel=\"nofollow\">nop-templates</a>. <a href=\"http://nopcommerce.com/\" rel=\"nofollow\">nopCommerce</a> is an open source software and I can change the code, but the plugin will be shipped separately, so it is not recommended to make changes in <a href=\"http://nopcommerce.com/\" rel=\"nofollow\">nopCommerce</a> views and the view that I am referring to is such.</p>\n"},{"tags":["asp.net-mvc-3","session","social-networking"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13175614,"title":"User closes the browser without logging out","body":"<p>I am developing a social network in ASP.NET MVC 3. Every user has must have the ability to see connected people.</p>\n\n<p>What is the best way to do this?</p>\n\n<p>I added a flag in the table <code>Contact</code> in my database, and I set it to <code>true</code> when the user logs in and set it to <code>false</code> when he logs out.</p>\n\n<p>But the problem with this solution is when the user closes the browser without logging out, he will still remain connected.</p>\n"},{"tags":["asp.net-mvc","multithreading","asp.net-mvc-3","castle-windsor","lifestyle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13177078,"title":"Castle Windsor lifestyle configurable per consumer? (Threading issue in ASP.NET MVC3 application.)","body":"<p>In my ASP.NET MVC3 application, the normal Castle Windsor lifestyle is \"PerWebRequest.\"\nThis has worked very well so far.</p>\n\n<p>However, now I need some tasks (e.g. email sending) to be executed on a different thread, after the web request has ended (to be exact, this is a custom form of event handling).\nWith the \"PerWebRequest\" lifestyle, this leads to ObjectDisposedExceptions.</p>\n\n<p>According to <a href=\"http://stackoverflow.com/questions/7203745/windsor-composite-lifestyle-for-asp-net-process\">this thread</a>, the Hybrid lifestyle from the Castle.Windsor.Lifestyles contrib project would do just what I want.\nBut I'd like to know if there is another option, without adding another dependency.\nLike to always have my event handlers use the \"PerThread\" lifestyle or something similar, whilst all other consumers still would use the \"PerWebRequest\" default.</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13176785,"title":"how to pass date datatype in mvc3","body":"<pre><code>[HttpPost] \npublic JsonResult GetSearchedResults(string searchedHotel)  \n{    \n  var searchingHotels = clsRepository.GetSearchedResults(searchedHotel, );\n  return json etc etc\n}\n</code></pre>\n\n<p>This is my Controller. Just Like String, I need to pass Date Datatype. I have A field Name in DataBase of Type Date.Now I need to pass this.how to pass a datatype DATE.?</p>\n\n<blockquote>\n  <p>I have a DatePicker is my main page. When i choose A date from Datepicker, that will be saved in a variable in my Jquery file. so I need to pass this variable to controller.i need to check whether selected date and date in DataBase are equal. </p>\n</blockquote>\n"},{"tags":["visual-studio-2010","svn","asp.net-mvc-3","azure","ankhsvn"],"answer_count":6,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":1661,"score":6,"question_id":6525541,"title":"Visual Studios 2010 SP1 \"Unable to copy file '...\\.svn\\all-wcprops' Access to the path 'bin\\\\.svn\\all-wcprops' is denied\"","body":"<p>I am using Visual Studio 2010 to develop an MVC 3 application for Azure. We are using AnkhSVN for subversion control, which has been slightly buggy in the past. </p>\n\n<p>The error I'm getting when I try and Build/Debug my application is:</p>\n\n<p>Unable to copy file \"C:\\Xxx_bin_deployableAssemblies.svn\\all-wcprops\" to \"bin\\.svn\\all-wcprops\". Access to the path 'bin\\.svn\\all-wcprops' is denied. </p>\n\n<p>The story gets more convoluted, since this error is not thrown on another one of our developer machines, just on mine. The only real difference in our machines is that I have SP1 installed on mine. </p>\n\n<p>Also when I updated AnkhSVN and re-checked out the app from the subversion server it work without throwing an error for the first build. After shutting my comp and then starting back up there error popped back up again. </p>\n\n<h3>Update:</h3>\n\n<p>I still haven't found a real solution. I just delete the .svn file in the folder and that takes care of the issue with Building the app. However, when I update or commit it throws an unversioned error.</p>\n\n<p>I think the problem is that the app is trying to copy the .svn file over during the build, instead of just ignoring. </p>\n\n<p>Do you know of any way to have the .svn file to be explicitly excluded from the build?</p>\n\n<p>I need to resolve this issue asap, so any help is great!</p>\n\n<p>Thanks</p>\n"},{"tags":["jquery","asp.net-mvc-3","validation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13176212,"title":"required field validator for dropdownlist using jquery in asp.netmvc3","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/7591791/mvc3-dropdownlist-not-validating-with-required-class-field-as-type-int\">MVC3 DropDownList not validating with [Required] class field as type int?</a>  </p>\n</blockquote>\n\n\n\n<p>this is my dropdownlist</p>\n\n<pre><code>@using (Html.BeginForm())\n{\n@Html.ValidationSummary(true)\n&lt;fieldset class=\"fieldset\"&gt;        \n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.CategoryID, \"Category *\")\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.DropDownList(\"CategoryID\", \"-Select Category-\")\n        @Html.ValidationMessageFor(model =&gt; model.CategoryID)\n    &lt;/div&gt;\n   &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Create\" /&gt;\n    &lt;/p&gt;\n&lt;/fieldset&gt;\n}\n</code></pre>\n\n<p>Now, here when we didn't select any of the category, it doesn't shows any required field validation though I have given required in the model. The form is getting submitted</p>\n\n<p>Model is</p>\n\n<pre><code>    [Required]\n    [DisplayName(\"Category\")]\n    public int CategoryID { get; set; }\n</code></pre>\n\n<p>Could anyone suggest any jquery to validate this</p>\n"},{"tags":["javascript","asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13174930,"title":"passing a javascript validation to dynamic textboxes in mvc3","body":"<p>Hello everyone i am working on a project similar to a shopping cart.I am using the below code to generate textboxes(for selecting the quantity) in my view:</p>\n\n<pre><code>    @foreach (var item in Model)\n     {\n      &lt;tr&gt;\n      &lt;td align=\"left\" class=\"Text_nocolor\"&gt;\n       @Html.DisplayFor(modelItem=&gt;item.ProductName)                                \n       /td&gt;\n       &lt;td align=\"right\" class=\"Text_nocolor\" valign=\"top\"&gt;\n      @using (Html.BeginForm(\"Update\", \"Cart\", new { UserID = Request.QueryString[\"UserID\"] }, FormMethod.Post, new { id = \"myForm\" }))\n       {               \n    &lt;input id=\"Quantity\" type=\"text\" class=\"Text_nocolor\" name=\"Quantity\" value=\"@item.Quantity\"  @*onblur=\"return NumberOnlyTextBox(event)\"*@  onchange=\"return allownumbers()\" maxlength=\"3\"/&gt;  \n@Html.Hidden(\"unitrate\", item.Rate)               \n                                                    &lt;input type=\"submit\" value=\"Edit\" class=\"Text_nocolor\" onkeypress=\"return validateNumbersOnly(e);\" onclick=\"return RegainFocus();\" /&gt;\n       }\n</code></pre>\n\n<p>In the above code \"id=Quantity\" represents the textboxes.\nand i have written a javascript for <strong>numbers only</strong> validation for these textboxes.\nThese are my javascript functions:</p>\n\n<pre><code> &lt;script type=\"text/javascript\"&gt;\n        function RegainFocus() {\n            if ((document.getElementById(\"Quantity\").value).length == 0) {\n                document.getElementById(\"Quantity\").focus();\n                alert(\"Quantity cannot be empty\");\n                document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                return false;\n            }\n            else if ((document.getElementById(\"Quantity\").value) &gt; 100) {\n                alert(\"There is no enough inventory for this product to fulfill your order\");\n                document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                return false;\n            }\n        }\n    &lt;/script&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        function allownumbers() {\n            //      var elements = document.getElementsByName('Quantity');\n//           for()\n            var val = parseInt(document.getElementsByName(\"Quantity\").item(1).value);\n            alert(val);\n            if (!val || val &lt; 1) {\n                alert('Please enter a valid value');\n                document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                return false;\n            }\n            document.getElementById(\"Quantity\").value = val;\n            return true;\n        }\n     &lt;/script&gt;\n</code></pre>\n\n<p>My problem is that the validation <strong>works only for the first textbox</strong> not the others.\nCan anyone pls provide a solution? Thank you</p>\n"},{"tags":["asp.net-mvc-3","jquery-ajax","webgrid"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2818,"score":0,"question_id":9235161,"title":"ASP.NET MVC3: WebGrid + Ajax Filters + Ajax Sorting & Paging","body":"<p>Basically, I'm using WebGrid and I need to filter the results. The first problem I have here is it's my first time using WebGrid and I was hoping some of you could give me a hand with it... So far, I've managed to sort grid results and filter them with Ajax, but, when re-sorting the filtered results, the subset is lost and I go back to the beginning with the full set of results. I know why it's happening of course, but I don't figure out how to make it work.</p>\n\n<p>Example:</p>\n\n<p>On my view:</p>\n\n<pre><code>@model IQueryable&lt;Cities&gt;\n@section MoreScripts\n{\n    &lt;script src=\"@Url.Content(\"~/Scripts/jquery.unobtrusive-ajax.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n}\n\n@using (Ajax.BeginForm(new AjaxOptions { InsertionMode = InsertionMode.Replace,     UpdateTargetId = \"GridData\"}))\n{\n    &lt;fieldset&gt;\n        &lt;legend&gt;Search Filters&lt;/legend&gt;\n        &lt;br /&gt;\n        &lt;div&gt;\n            Name\n        &lt;/div&gt;\n        &lt;div&gt;\n            @Html.TextBox(\"Name\")\n        &lt;/div&gt;\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Search\" /&gt;\n        &lt;/p&gt;\n    &lt;/fieldset&gt;\n}\n\n&lt;div id=\"GridData\"&gt;\n    @Html.Partial(\"Grid\", Model)\n&lt;/div&gt;\n</code></pre>\n\n<p>My Partial View: </p>\n\n<pre><code>@model IQueryable&lt;Cities&gt;\n\n@{\n    var grid = new WebGrid&lt;Cities&gt;(null,rowsPerPage: 5, defaultSort: \"Nombre\", ajaxUpdateContainerId: \"GridData\");\n    grid.Bind(Model, autoSortAndPage: true, rowCount: Model.Count());\n    @grid.GetHtml(columns: \n                    grid.Columns(\n                                grid.Column(\"Name\", \"Name\", canSort: true),\n                                grid.Column(\"CreationDate\", \"Creation Date\", canSort: true),\n                                grid.Column(\"Active\", \"Active\", canSort: true, format: @&lt;text&gt;&lt;input type=\"checkbox\" disabled=\"disabled\" value=\"@item.ID\" @(item.Active == true ? \"Checked\" : null) /&gt;&lt;/text&gt;),\n                                                                            grid.Column(format: (item) =&gt; Html.ActionLink(\"Edit\", \"Edit\", new { id = item.Id }, new { @class = \"editLink smallCell\", @title = \"Edit\" })),\n                                grid.Column(format: (item) =&gt; Html.ActionLink(\"Delete\", \"Delete\", new { id = item.Id }, new { @class = \"deleteLink smallCell\", @title = \"Delete\" }))),\n                          tableStyle: \"webgrid\",\n                          headerStyle: \"webgrid-header\",\n                          footerStyle: \"webgrid-footer\",\n                          alternatingRowStyle: \"webgrid-alternating-row\",\n                          selectedRowStyle: \"webgrid-selected-row\",\n                          rowStyle: \"webgrid-row-style\");    \n}\n</code></pre>\n\n<p>And finally what am doing wrong is here, on my controller:</p>\n\n<pre><code>    public ActionResult Index()\n    {\n        return View(repository.GetAllRecords().OrderByDescending(f =&gt; f.CreationDate));\n    }\n\n    [HttpPost]\n    public ActionResult Index(string name)\n    {\n        var data = repository.GetAllRecords();\n\n        if(!string.IsNullOrEmpty(name))\n            data = data.Where(a =&gt; a.Name.Contains(name));\n\n        data = data.OrderByDescending(f =&gt; f.CreationDate);\n\n        return PartialView(\"Grid\", data);\n    }\n</code></pre>\n\n<p>I'm also using a class WebGrid : WebGrid as seen here:\n<a href=\"http://archive.msdn.microsoft.com/mag201107WebGrid/Release/ProjectReleases.aspx?ReleaseId=5667\" rel=\"nofollow\">http://archive.msdn.microsoft.com/mag201107WebGrid/Release/ProjectReleases.aspx?ReleaseId=5667</a></p>\n\n<p>So, this actually works fine for filtering, but once you get the filtered results and then try to change the sort order of your narrowed search results, you lose the elements and the 'name' parameter's value because the WebGrid goes agains the first controller action. Probably this is not the best approach, but as I said, I've never used WebGrid so I'm willing to learn. Any help would be really appreciated. Thanks.</p>\n"},{"tags":["javascript","asp.net-mvc-3","resources"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":4788,"score":4,"question_id":5673070,"title":"Accessing Resource Files in MVC 3","body":"<p>I want to to access key/value pair from my resource files in java script and .cshtml views.\nFor some static content on my cshtml i don't want to create a property in my model so it would be nice if i could directly access resource files.</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13174380,"title":"Placing image inside Excel file","body":"<p>I am using MVC3. I am showing some content and chart(chart using jqplot) in a view. Now I want to export the content and chart to excel. I've already done exporting content to excel. Now I want to add image to excel. I've already converted chart to image and assigned as a source to one image in a view. Now is it possible to add that image to excel content from controller by taking that image source and something like that?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13174154,"title":"Can I create the javascript function run before bodyrender and after bodyrender In MVC3?","body":"<p>I have  @RenderBody() method to render In layoutpage and I want to know when it start and when it download finish by javascript. How can I do because I want my webpage have a overlay when It downloading content. I can do in ajax but I dont know how to do it in MVC @RenderBody().</p>\n"},{"tags":["asp.net","asp.net-mvc-3","iis7"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13155741,"title":"Application Error not fired for 404 page when extra custom segment","body":"<p>I have a asp.net mvc 3 application with IIS7 and IIS express on local, which is using Application_Error for logging the exceptions and redirecting to a custom error page. My application has different regions, and the application_error is called whenever the controller or the action is not matched, but not for the region.</p>\n\n<p>Here is an example of the routes used:</p>\n\n<pre><code>routes.MapRoute(\n            \"Default\",\n            \"{region}/{controller}/{action}/{id}\",\n            new { region = \"uk\", controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }, // Parameter defaults\n            new { region = new RegionWhitelistConstraint() } // constraint for valid regions\n        );\n</code></pre>\n\n<p>In this case the Application_Error would be fired for /uk/NotFoundPage but not for /foo/Home</p>\n\n<p>Here the constraint for the region:</p>\n\n<pre><code>public class RegionWhitelistConstraint : IRouteConstraint\n{\n    public bool Match(System.Web.HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)\n    {\n        var whiteList = Region.DefaultWhiteList;\n        var currentRegionValue = values[parameterName].ToString();\n        return whiteList.Contains(currentRegionValue);\n    }\n}\n</code></pre>\n\n<p>I have seen <a href=\"http://stackoverflow.com/questions/6990677/application-error-not-fired-for-404-in-mvc-3-when-url-contains-4-or-more-path-se\">this</a> question, that propose adding a catch all route, but apart from that I would like to know if there is a way of firing Application_Error as it is done for the controllers or actions.</p>\n"},{"tags":["asp.net-mvc-3","c#-4.0","enums"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13173191,"title":"Unable to get selected value of a dropdownlist binded by enum in mvc3","body":"<p>Here, I'm having a dropdownlist where I have binded the required data to it using a enum and send to the view using a viewbag. It displayed and inserted data. \nMy enum</p>\n\n<pre><code>public enum eJewelleryShape\n        {\n            Round = 10, \n            Oval = 20,\n            Plain = 30\n        }\n</code></pre>\n\n<p>in controller get method,</p>\n\n<pre><code>if (typeof(JewelleryShape.eJewelleryShape).IsEnum)\n{\n    foreach (var value in Enum.GetValues(typeof(JewelleryShape.eJewelleryShape)).Cast&lt;int&gt;())\n    {\n        var name = Enum.GetName(typeof(JewelleryShape.eJewelleryShape), value);\n        name = string.Format(\"{0}\", name);\n        items.Add(new SelectListItem() { Value = value.ToString(), Text = name });\n    }\n}\nViewBag.ddlEnumshape = new SelectList(items, \"Value\", \"Text\", ddlEnumshape);\n</code></pre>\n\n<p>My View</p>\n\n<pre><code>&lt;div class=\"editor-field\"&gt;\n                @Html.DropDownList(\"ddlEnumshape\", \"-Select shape-\")\n                @Html.ValidationMessageFor(model =&gt; model.JewelleryShape)\n &lt;/div&gt;\n</code></pre>\n\n<p>The data is been inserted and till here it works fine</p>\n\n<p>(In my database the corresponding integer values are being inserted as the datatype for this is Int)</p>\n\n<p>Now, the problem is with edit. When I click on the edit link the View doesn't show the old data in database, another problem is Required field validation is not working for that column. I have given Required attribute to my column in Model class</p>\n\n<p>Could anyone suggest me how to retrieve the data..\nThanks in advance</p>\n"},{"tags":["asp.net-mvc-3","onactionexecuting"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13173076,"title":"OnActionExcuting Removes QueryString which don't have values","body":"<p>i have one <code>ActionFilterAttribute</code> filter when i apply this filter to any <code>Action</code> if this action is fire with some QueryString without any value like <code>ProjectType=&amp;ProjectStage=&amp;mid=6</code> then after execution of filter finish i get QueryString like <code>mid=6</code> all other QueryString with no value is removed i.e ProjectType and ProjectStage</p>\n\n<p>Here is Filter Code--</p>\n\n<pre><code>public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        if ((filterContext.RequestContext.HttpContext.Request.QueryString[\"mid\"] == null || filterContext.RequestContext.HttpContext.Request.QueryString[\"mod\"] == null) &amp;&amp; filterContext.RequestContext.HttpContext.Request.UrlReferrer != null)\n        {\n            mid = Convert.ToString(HttpUtility.ParseQueryString(filterContext.RequestContext.HttpContext.Request.UrlReferrer.Query)[\"mid\"]);\n            mod = Convert.ToString(HttpUtility.ParseQueryString(filterContext.RequestContext.HttpContext.Request.UrlReferrer.Query)[\"mod\"]);\n            if (!string.IsNullOrEmpty(mid) || !string.IsNullOrEmpty(mod))\n            {\n                RouteValueDictionary redirecttargetDictionary = new RouteValueDictionary();\n                NameValueCollection Qstr = null;\n                if (filterContext.HttpContext.Request.RequestType == \"GET\")\n                {\n                    Qstr = HttpUtility.ParseQueryString(filterContext.HttpContext.Request.Url.Query);\n                    foreach (string item in Qstr)\n                    {\n                        redirecttargetDictionary.Add(item, Qstr[item]);\n                    }\n                    if (Qstr[\"mid\"] == null)\n                    {\n                        redirecttargetDictionary.Add(\"mid\", mid);\n                    }\n                    if (Qstr[\"mod\"] == null)\n                    {\n                        redirecttargetDictionary.Add(\"mod\", mod);\n                    }\n                    filterContext.Result = new RedirectToRouteResult(redirecttargetDictionary);\n                }\n            }\n        }           \n    }\n</code></pre>\n\n<p><strong>What i am doing Wrong?</strong></p>\n"},{"tags":["c#","asp.net-mvc-3","facebook-c#-sdk"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13137992,"title":"not able to logout from facebook using facebook c# sdk","body":"<p>I am Using facebook C# SDK to connect to facebook from my mvc3 application.\nI am able to login but not able to logout.\nI used bellow code for logout</p>\n\n<pre><code>var oauth = new FacebookClient();\n\n        var logoutParameters = new Dictionary&lt;string, object&gt;\n              {\n                  { \"next\", \"http://localhost:8691\" }\n              };\n\n        var logoutUrl = oauth.GetLogoutUrl(logoutParameters);\n\n        return Redirect(logoutUrl.ToString());\n</code></pre>\n\n<p>This code always redirects me to facebook home page.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","validation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":13152206,"title":"Validation of Textbox in MVC4","body":"<p>I have a an Update Action to update the value based on my textbox input. I used javascript for my validation. The script and validation works fine only for the first textbox value.<br/>\nMy View Code</p>\n\n<pre><code>     @foreach (var item in Model)\n      {     &lt;tr&gt;          \n         &lt;td align=\"right\" class=\"Text_nocolor\" valign=\"top\"&gt;\n      @using (Html.BeginForm(\"Update\", \"Cart\", new { UserID = Request.QueryString[\"UserID\"] }, FormMethod.Post, new { id = \"myForm\" }))\n     {          \n         @Html.Hidden(\"id\", @Request.QueryString[\"UserID\"] as string)\n         @Html.Hidden(\"productid\", item.ProductID as string)\n         &lt;input id=\"Quantity\" type=\"text\" class=\"Text_nocolor\" name=\"Quantity\" value=\"@item.Quantity\"  onblur=\"return allownumbers() \" maxlength=\"3\"/&gt;  \n          @Html.Hidden(\"unitrate\", item.Rate)               \n          &lt;input type=\"submit\" value=\"Edit\" class=\"Text_nocolor\" onclick=\"return RegainFocus();\" /&gt;\n     }\n       &lt;/td &gt;\n&lt;tr&gt;\n    }\n</code></pre>\n\n<p>The Script I used : <br/></p>\n\n<pre><code> &lt;script type=\"text/javascript\"&gt;\n    function RegainFocus() {\n            if ((document.getElementById(\"Quantity\").value).length == 0) {\n                document.getElementById(\"Quantity\").focus();\n                alert(\"Quantity cannot be empty\");\n                document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                return false;\n            }\n            else if ((document.getElementById(\"Quantity\").value) &gt; 100) {\n                alert(\"There is no enough inventory for this product to fulfill your order\");\n                document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                return false;\n            }           \n        }\n            function allownumbers() {\n                var val = parseInt(document.getElementById(\"Quantity\").value);\n                if (!val || val &lt; 1) {\n                    alert('Please enter a valid value');\n                    document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                    return false;                 \n                }\n                document.getElementById(\"Quantity\").value = val;\n                return true;\n            }\n    &lt;/script&gt;\n</code></pre>\n\n<p>I also checked whether I get a different ID for the Textbox. But all the textboxes have same ID and the validation doesnt works for the other textbox except the first textbox.<br/>\nAny Suggestions.</p>\n\n<p>EDIT ::<br/></p>\n\n<pre><code>  function allownumbers() {\n            alert('fasfa');\n            var elements = document.getElementsByName('Quantity');\n            for (var i = 0; i &lt; elements[i].length; i++) {  \n                alert(elements);\n                if (!elements || elements &lt; 1) {\n                    alert('Please enter a valid value');                    \n                    return false;\n                }\n                else if (elements &gt; 100) {\n                    alert('Please enter a value less than 100');\n                    return false;\n                }\n            }               \n            return true;\n        }\n</code></pre>\n\n<p>The model has values and Each textbox contain values in it. but elements return only NaN as value. </p>\n"},{"tags":["c#","asp.net-mvc-3","defaultmodelbinder","app-globalresources"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":151,"score":2,"question_id":9792915,"title":"Not getting resource file from DefaultModelBinder.ResourceClassKey","body":"<p>In my MVC3 project, in Global.Application_Start(), I have</p>\n\n<pre><code>System.Web.Mvc.DefaultModelBinder.ResourceClassKey = \"DefaultModelBinder\";\n</code></pre>\n\n<p>I also have 2 resource files in App_GlobalResources:</p>\n\n<pre><code>DefaultModelBinder.resx\nDefaultModelBinder.fr.resx\n</code></pre>\n\n<p>Why isn't the french resource being used at all?</p>\n\n<p>(It is taking the correct value from DefaultModelBinder.resx.)</p>\n"},{"tags":["asp.net-mvc-3","razor","asp.net-mvc-partialview","model-validation"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12487104,"title":"multiple partial views and one submit button in a layout view","body":"<p>Im not sure if this is the right approach to do this. In my searchs only found multiple partial views and one submit button but  not in a layout.</p>\n\n<p>I have tree different views each with their own model with the same _ViewStart.cshtml -> _Layout.cshtml (MVC convention). This is the control for the first one:</p>\n\n<pre><code>[Authorize]\n    public ActionResult UpDateData1 ()\n    {\n        return View();\n    }\n[HttpPost]\npublic ActionResult UpDateData1(Data1Model model)\n    {\n        if (ModelState.IsValid)\n        {\n            SOME CODE…\n\n        }\n        else\n        {\n            ModelState.AddModelError…\n        }\n        return View(model);\n</code></pre>\n\n<p>The 3 views are pretty generics, but I don't want a submit button in there.</p>\n\n<p>Also in  _Layout.cshtml I have a  partial view with common validation code for  the 3 views:</p>\n\n<pre><code>&lt;section id=\"main\"&gt;\n        @RenderBody()\n        &lt;div&gt;\n            @Html.Partial(\"_CommonValidation \", new store.Models.CommonValidation())\n        &lt;/div&gt;\n        &lt;div&gt;\n            &lt;input type=\"submit\" value=\"Only one Button\" /&gt;\n        &lt;/div&gt;\n        &lt;div&gt;\n            @Html.ActionLink(\"BackTo…\", \"MyAccountConfig\", \"Account\")\n        &lt;/div&gt;\n    &lt;/section&gt;\n</code></pre>\n\n<p>I don’t want a submit button in _CommonValidation view neither.</p>\n\n<p>It is possible to use \"ONLY ONE BUTTON”  submit button in the Layout.cshtml to validate the models of the partial _CommonValidation and the RenderBody() views ? it is a good practice to include strongly typed partial views in the _Layout.cshtml view?  I'm new to MVC 3 so I don’t have any idea what direction to take… JavaScripts, HTML Helpers maybe...\nThanks</p>\n"},{"tags":["css","asp.net-mvc-3","razor","postback"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":117,"score":1,"question_id":11746844,"title":"changes to css are not retained after postback","body":"<p>I have a view that loops through a property in its model and displays a bunch of checkboxes.</p>\n\n<p>These checkboxes are grouped together by their parent and I have a link that shows/hides the div wrapping each group of checkboxes (the javascript collapse function that you see in the code).</p>\n\n<p>Problem is, these checkboxes/groups are bound to the model, and after postback, the model rebuilds itself - and if the end-user had collapsed a group (calls jquery.hide()), it is no longer collapsed.</p>\n\n<p>What is the correct method to persist these css changes in MVC? do I need a hidden field keeping track of their visibility? do I need to update the model object to have a new property that says whether or not to show that group?</p>\n\n<p>coming from webforms... forgive my noobness.</p>\n\n<pre><code>     @for (int y = 0; y &lt; Model.SearchControls.Count; y++)\n     {\n&lt;div style=\"margin-top: 3px;\"&gt;\n                        &lt;h2 style=\"cursor:pointer;\" onclick=\"javascript:Collapse(@y);\"&gt;@Html.Label(Model.SearchControls[y].DisplayText)&lt;/h2&gt;\n                        &lt;/div&gt;\n\n&lt;div id=\"@string.Format(\"domainDiv{0}\", @y)\" style=\"display:none;\"&gt;\n\n                            @for (int z = 0; z &lt; Model.SearchControls[y].DomainControl.Domains.Count; z++)\n                            {\n                                @Html.CheckBoxFor(x =&gt; x.SearchControls[y].DomainControl.Domains[z].Checked)\n                                @Html.Label(\" \" + Model.SearchControls[y].DomainControl.Domains[z].DomainName)\n                                @Html.HiddenFor(x =&gt; x.SearchControls[y].DomainControl.Domains[z].DomainName)\n                                @Html.HiddenFor(x =&gt; x.SearchControls[y].DomainControl.Domains[z].DomainID)\n                                &lt;br /&gt;\n                            }\n&lt;/div&gt;\n</code></pre>\n\n<p>}</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13170647,"title":"Best way to handle a validations before a delete?","body":"<p>I need to be to perform validations during the Delete Action in my controller. Does ASP.net MVC3 have anything to assist with this type of validation? I know you can use the Attributes to handle edit validations but what about deletion?</p>\n\n<p>For example i need to check the state of the entity object and if a certain condition is met they are not allowed to delete. What's the best way to check and display an error</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13152102,"title":"Posting a List model back to the Controller","body":"<p>I'm stil new to ASP.net MVC3 and i'm trying to create a selectable list of items that can be added to a user. So the Get method looks like</p>\n\n<pre><code>    public ViewResult AddFavourite(int id)\n    {\n        ViewBag.UserId = id;\n        var movies = (from m in db.Movies\n                             select new SelectableMovie() { Movie = m });\n        return View(movies.ToList());\n    }\n</code></pre>\n\n<p>and the view looks like</p>\n\n<pre><code>@using MovieManager.Models\n@model List&lt;SelectableMovie&gt;\n@using (Html.BeginForm(\"AddFavourite\", \"Users\",\n    new { userId = ViewBag.UserId, movies = Model }, FormMethod.Post))\n{\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;th&gt;\n            Add\n        &lt;/th&gt;\n        &lt;th&gt;\n            Title\n        &lt;/th&gt;\n        &lt;th&gt;\n            Description\n        &lt;/th&gt;\n        &lt;th&gt;\n            ReleaseDate\n        &lt;/th&gt;\n    &lt;/tr&gt;\n    @foreach (var item in Model)\n    {\n        &lt;tr&gt;\n            &lt;td&gt;\n                @Html.CheckBoxFor(modelItem =&gt; item.Selected)\n            &lt;/td&gt;\n            &lt;td&gt;\n                @Html.DisplayFor(modelItem =&gt; item.Movie.Title)\n            &lt;/td&gt;\n            &lt;td&gt;\n                @Html.DisplayFor(modelItem =&gt; item.Movie.Description)\n            &lt;/td&gt;\n            &lt;td&gt;\n                @Html.DisplayFor(modelItem =&gt; item.Movie.ReleaseDate)\n            &lt;/td&gt;\n        &lt;/tr&gt;\n    }\n&lt;/table&gt;\n&lt;p&gt;\n    &lt;input type=\"submit\" value=\"Add Favourites\" /&gt;\n&lt;/p&gt;\n}\n</code></pre>\n\n<p>This displays the list as intended but when i post back to the controller i get a userId but the movies parameter is an empty list. How do i get the model used in the view back to the controller to be used in the Post Action? The Post action looks like this</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult AddFavourite(int userId, List&lt;SelectableMovie&gt; movies)\n    {\n        User user = db.Users.Single(u =&gt; u.ID == UserId);\n        //add items here\n        return View(\"Details\", user);\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","html-helper"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":296,"score":1,"question_id":10384804,"title":"Extending Html Helpers","body":"<p>I am about to re-write all common MVC Html helpers to provide some localization abilities inside. I am trying to find a way not to ruin what actually current framework helpers doing on their own. For example; i want to re-write \"LabelFor\" html helper without changing what it actually does in the MVC framework, except only changing its \"InnerHtml\". Since framework helpers return \"MvcHtmlString\", i actually don't know how to play around with it. </p>\n\n<pre><code>public static class MvcLabelExtensions\n{        \n    public static MvcHtmlString Label(this HtmlHelper html, string expression)\n    {\n       MvcHtmlString baseResult = System.Web.Mvc.Html.LabelExtensions.Label(html, expression);\n       // want to change InnerHtml here... ??? ..\n       return baseResult;\n    }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","entity-framework","plugins","mef","repository-pattern"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":92,"score":1,"question_id":12172610,"title":"Entity Framework Plugin Architecture Recommendation","body":"<p>I am trying to build a modularized ASP.NET MVC application using Areas and Dependency Injection. The application currently consists of the following projects:</p>\n\n<ul>\n<li><strong>Framework.Contracts</strong> (Interfaces for Authentication Service, Authorization, Logging)</li>\n<li><strong>Framework</strong> (Implementation of Authentication Service, Authorization, ...)</li>\n<li><strong>Framework.Web</strong> (MVC Web Application)</li>\n</ul>\n\n<p>Each plugin consists of an MVC Area project, contracts and service implementation:</p>\n\n<ul>\n<li><strong>EmployeesPlugin.Contracts</strong> (Interfaces for IEmployeesService)</li>\n<li><strong>EmployeesPlugin</strong> (Implentation for IEmployeesService)</li>\n<li><strong>EmployeesPlugin.MVC</strong> </li>\n</ul>\n\n<p>I want to use Entity Framework Database First or Model First (since I have to connect an existing database). My problem is that I do not know how to loosly couple my entities. I do not want to put them into a single shared DatabaseLayer project. Rather I would like to define central entities (User, Settings, LogEntries, ...) for the Framework project and additional entities (like Employee, Company) for each plugin. </p>\n\n<p>After reading <a href=\"http://stackoverflow.com/questions/5260200/orm-architecture-one-or-multiple-models-entity-framework\">ORM Architecture: One or Multiple Models (Entity Framework)</a> I thought about creating multiple Models (i.e. Multiple Data Contexts). Actually I do not like the idea of having redudant code. </p>\n\n<p>I thought about creating interfaces that expose the properties of each entity. These interfaces will be put in a project per Plugin. Like <code>IEmployee</code> exposing <code>FirstName</code> and <code>LastName</code>. Then I started to create an <code>IEmployeeRepository</code> to return and create, edit and delete Employees. However creating employees does not work when only exposing <code>IEmployee</code> and no concrete class. </p>\n\n<p>Another problem is that the entity <code>Employee</code> contains references to entities in other projects/plugins. Lets say a employee hosts a number of projects. Thus I thought to create a generic <code>IEmployee</code> interface without the reference to the project and an <code>IEmployeeProjects</code> interface containing the reference to the projects. That way I could create a class <code>Employee</code> in a central database layer project that implement both <code>IEmployee</code> add `IEmployeeProjects:</p>\n\n<pre><code>public class Employee : IEmployee, IEmployeeProjects\n{   \n    // From IEmployee interface\n    public string FirstName { get; set; }\n    public string LastName { get; set; }\n\n    // From IEmployeeProject interface\n    public virtual ICollection&lt;Project&gt; Projects { get; set; }\n}\n</code></pre>\n\n<p>The problem is that I do not know how to plump things together using the Entity framework. </p>\n"},{"tags":["c#","asp.net-mvc-3","validation","fluentvalidation"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":12320017,"title":"Validating against a string containing comma delimited emails","body":"<p>I'm trying to validate this property in MVC model, which can contain zero or more email addresses delimited by comma:</p>\n\n<pre><code>public class DashboardVM\n{\n    public string CurrentAbuseEmails { get; set; }\n    ...\n}\n</code></pre>\n\n<p>The question is how do I do this using the built-in fluent validation rule for Email Address?\nFor now I have a solution using Must and regular expression which works, but I don't find it .. elegant enough.</p>\n\n<pre><code>    public DashboardVMValidator()\n    {\n        RuleFor(x =&gt; x.CurrentAbuseEmails).Must(BeValidDelimitedEmailList).WithMessage(\"One or more email addresses are not valid.\");\n    }\n\n    private bool BeValidDelimitedEmailList(string delimitedEmails)\n    {\n        //... match very very long reg. expression\n    }\n</code></pre>\n\n<p>So far the closest solution including RuleFor(...).EmailAddress() was creating a custom Validator below and call Validate on each email from the string, but that didn't work for some reason (AbuseEmailValidator wasn't able to get my predicate x => x - when calling validator.Validate on each email).</p>\n\n<pre><code>public class AbuseEmailValidator : AbstractValidator&lt;string&gt;\n{\n    public AbuseEmailValidator()\n    {\n        RuleFor(x =&gt; x).EmailAddress().WithMessage(\"Email address is not valid\");\n    }\n}\n</code></pre>\n\n<p>Is there way to do this in some simple manner? Something similar to this solution, but with one string instead of list of strings, as I can't use SetCollectionValidator (or can I?): <a href=\"http://stackoverflow.com/questions/10190316/how-do-you-validate-against-each-string-in-a-list-using-fluent-validation\">How do you validate against each string in a list using Fluent Validation?</a></p>\n"},{"tags":["asp.net","asp.net-mvc-3","session"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13171061,"title":"Why session start event fire randomly","body":"<p>I have one site with lots of  session use.\nSession time out is 20 mins and session management is InProcess.</p>\n\n<p>Site is working fine\nI have maintain log for the site...but in log file i got following notification </p>\n\n<p>[10/31/2012 11:01:40 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:06:39 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:06:39 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:11:39 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:11:40 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:16:39 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:16:40 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:21:37 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:21:38 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:26:39 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:26:39 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:31:38 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:31:39 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:36:38 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:36:39 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:41:39 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:41:40 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:46:39 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:46:39 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:51:39 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:51:40 PM]: Global.asax.Session_Start : Session Start<br/>\n[10/31/2012 11:56:39 PM]: Global.asax.Session_Start : Session Start<br/></p>\n\n<p>my application's session start event fire randomly, even nobody accessing the site\ncan anybody explain, what is the problem...?</p>\n\n<p>Thanks in Adv....</p>\n"}]}
{"total":29155,"page":5,"pagesize":100,"questions":[{"tags":["asp.net-mvc-3","asp.net-membership","filtering"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12624112,"title":"Create search filter by users.IsApproved","body":"<p>I'm creating a search page in order to filter users by their usernames, approval status, and whether they're currently locked out or not.</p>\n\n<pre><code>                if (!string.IsNullOrEmpty(filterby))\n        {\n            int totalRecords;\n            if (filterby == \"all\")\n            {\n                viewModel.PaginatedUserList = Membership.GetAllUsers(page, pageSize, out totalRecords).ToPaginatedList(page, pageSize, totalRecords, searchterm, filterby);\n            }\n            else if (!string.IsNullOrEmpty(searchterm))\n            {\n                string query = searchterm + \"%\";\n                if (filterby == \"email\")\n                {\n                    viewModel.PaginatedUserList = Membership.FindUsersByEmail(query, page, pageSize, out totalRecords).ToPaginatedList(page, pageSize, totalRecords, searchterm, filterby);\n                }\n                else if (filterby == \"username\")\n                {\n                    viewModel.PaginatedUserList = Membership.FindUsersByName(query, page, pageSize, out totalRecords).ToPaginatedList(page, pageSize, totalRecords, searchterm, filterby);\n                }\n\n                else if (filterby == \"approval\")\n                {\n                    viewModel.PaginatedUserList = (PaginatedList&lt;MembershipUser&gt;) Membership.GetAllUsers(page, pageSize, out totalRecords).ToPaginatedList(page, pageSize, totalRecords, searchterm, filterby).Where(x =&gt; x.IsApproved == false);\n                }\n            }\n        }\n</code></pre>\n\n<p>I get \"Unable to cast object of type 'WhereListIterator<code>1[System.Web.Security.MembershipUser]' to type 'Project.Core.Pagination.PaginatedList</code>1[System.Web.Security.MembershipUser]'.\" whenever I try to search by approval.  Since I'm still learning, I'm not quite sure the best course of action to resolve this.  Any help would be appreciated.</p>\n"},{"tags":["asp.net-mvc-3","dependency-injection","viewmodel","constructor-injection"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":182,"score":2,"question_id":8693141,"title":"Constructor injection of a View Model instance used as an Action method parameter","body":"<p>When a view model is created you can populate the options (e.g. used in a dropdown list) into a setter property of the view model.\nThe problem is that when that view model is later passed as a parameter (by the framework!) into an action method, those property values has not become automagically\nrepopulated, so if you need to redisplay the form because of validation errors, you need to repopulate those options again.</p>\n\n<p>One potential solution, which I am asking for specifically in this question, is how to make the MVC framework instantiate the view model with constructor injection, which would provide the view model constructor with an implementation of some kind of data access object (e.g. a repository) that can be used for retrieving the options when they are requested by the view (e.g. in the helper method \"DropDownListFor\") ?</p>\n\n<p>I think the solution might have something to do with implementations of IModelBinderProvider or IModelBinder but after having experimented with these things from example code snippets here and there on the net, I am still looking for a completely working example, with downloadable executable code without any missing piece of how putting all things together.</p>\n\n<p>If you are looking for some alternative discussion about how to populate a select list, e.g. with  \"Dependecy Lookup\" instead of \"Dependecy Injection\" you may want to check out the following discussion:\nBest way to populate SelectList for ViewModel on GET/POST\n<a href=\"http://stackoverflow.com/questions/7603519/best-way-to-populate-selectlist-for-viewmodel-on-get-post\">Best way to populate SelectList for ViewModel on GET/POST</a></p>\n\n<p>Some days ago I wrote the following follow-up-question in that thread about the \"Dependecy Injection\" I am now looking for in this thread:\n<a href=\"http://stackoverflow.com/a/8674525/310457\">http://stackoverflow.com/a/8674525/310457</a>\n(which provides a code example about the problem I am looking for a solution of)</p>\n\n<p>But instead of hoping that someone will find that old thread with a less specific title, I have created this new question with a more specific subject about what I am looking for.\nAnd I will also provide a link from that thread into this new question for anyone that want to follow-up regarding this specific solution I am looking for.</p>\n"},{"tags":["asp.net-mvc-3","input-validation","setting"],"answer_count":0,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":12912294,"title":"How to disable “the error the value ‘abc’ is not valid for IntegerProperty”","body":"<p>I hope someone can help me out to disable the default validation that MVC 3 runs when I post a string value in an integer field. Currently the application will add the error “the value ‘abc’ is not valid for IntergerProperty” to the ModelState before our validators are executed.</p>\n\n<p>We don’t use client side validation and have our own validators that are loaded in the Global.asax. We only want to use these validators to check the input and would like to disable this check.</p>\n\n<p>Is it possible to disable this behavior?</p>\n\n<p>Thanks in advanced,</p>\n\n<p>André</p>\n"},{"tags":["c#","asp.net-mvc-3","repository-pattern","database-first"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13168811,"title":"How to convert repository made for Code First to Database First in MVC 3 Application","body":"<p>I'm very new to MVC 3 but not to software so when I decided to start an application in MVC 3, I wanted to make it testable. So I found this <a href=\"http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application\" rel=\"nofollow\">great article</a> on how to implement the repository pattern.</p>\n\n<p>In this article, at the end, they propose a very nice \"generic repository\" that you can re-use for most object because in normal case, we all want to be able to delete, create, update, etc.</p>\n\n<p>Everything was working fine (read compiling) until I realized that I was pointing to my old database context that was created a while ago with the \"Code First\" approach. Since that time, I decided to go with a \"Database First\" approach but I forgot to delete this old context. So I just change the name of the context in the repository hoping that everything would work fine but it doesn't work. My old context was an DBContext but my new one seems to be an ObjectContext. I'm not sure what is the difference between the 2.</p>\n\n<p>The code in my generic repository goes as follow and there is error about these 3 lines about the Set and Entry Method:</p>\n\n<pre><code>this.dbSet = context.Set&lt;TEntity&gt;();\n\nif (context.Entry(entityToDelete).State == EntityState.Detached)\n\ncontext.Entry(entityToUpdate).State = EntityState.Modified;\n</code></pre>\n\n<p>Here is the complete code for the repository</p>\n\n<pre><code>public class GenericRepository&lt;TEntity&gt; where TEntity : class\n{\n    internal RecettesMaisonDBEntities context;\n    internal DbSet&lt;TEntity&gt; dbSet;\n\n    public GenericRepository(RecettesMaisonDBEntities context)\n    {\n        this.context = context;\n        this.dbSet = context.Set&lt;TEntity&gt;();\n    }\n\n    public virtual IEnumerable&lt;TEntity&gt; Get(\n        Expression&lt;Func&lt;TEntity, bool&gt;&gt; filter = null,\n        Func&lt;IQueryable&lt;TEntity&gt;, IOrderedQueryable&lt;TEntity&gt;&gt; orderBy = null,\n        string includeProperties = \"\")\n    {\n        IQueryable&lt;TEntity&gt; query = dbSet;\n\n        if (filter != null)\n        {\n            query = query.Where(filter);\n        }\n\n        foreach (var includeProperty in includeProperties.Split\n            (new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))\n        {\n            query = query.Include(includeProperty);\n        }\n\n        if (orderBy != null)\n        {\n            return orderBy(query).ToList();\n        }\n        else\n        {\n            return query.ToList();\n        }\n    }\n\n    public virtual TEntity GetByID(object id)\n    {\n        return dbSet.Find(id);\n    }\n\n    public virtual void Insert(TEntity entity)\n    {\n        dbSet.Add(entity);\n    }\n\n    public virtual void Delete(object id)\n    {\n        TEntity entityToDelete = dbSet.Find(id);\n        Delete(entityToDelete);\n    }\n\n    public virtual void Delete(TEntity entityToDelete)\n    {\n        if (context.Entry(entityToDelete).State == EntityState.Detached)\n        {\n            dbSet.Attach(entityToDelete);\n        }\n        dbSet.Remove(entityToDelete);\n    }\n\n    public virtual void Update(TEntity entityToUpdate)\n    {\n        dbSet.Attach(entityToUpdate);\n        context.Entry(entityToUpdate).State = EntityState.Modified;\n    }\n}\n</code></pre>\n\n<p>If anyone can help me with this?</p>\n"},{"tags":["asp.net-mvc-3","razor","mvc-editor-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13154961,"title":"Error when nesting EditorTempates","body":"<p>I am working with MVC 3, Razor views and EditorFor templates. </p>\n\n<p>I have three simple nested models:-</p>\n\n<pre><code>public class BillingMatrixViewModel\n{\n    public ICollection&lt;BillingRateRowViewModel&gt; BillingRateRows { get; set; }\n\n    public BillingMatrixViewModel()\n    {\n        BillingRateRows = new Collection&lt;BillingRateRowViewModel&gt;();\n    }\n}\n\npublic class BillingRateRowViewModel\n{\n    public ICollection&lt;BillingRate&gt; BillingRates { get; set; }\n\n    public BillingRateRowViewModel()\n    {\n        BillingRates = new Collection&lt;BillingRate&gt;();\n    }\n}\n\npublic class BillingRate\n{   \n  public int Id { get; set; }\n  public int Rate { get; set; } \n}\n</code></pre>\n\n<p>The BillingMatrixViewModel has a view:-</p>\n\n<pre><code>@using System.Collections\n@using WIP_Data_Migration.Models.ViewModels\n@model WIP_Data_Migration.Models.ViewModels.BillingMatrixViewModel\n\n&lt;table class=\"matrix\" id=\"matrix\"&gt;      \n    &lt;tbody&gt;\n        &lt;tr&gt;\n           @Html.EditorFor(model =&gt; Model.BillingRateRows, \"BillingRateRow\")    \n        &lt;/tr&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>The BillingRateRow has an Editor Template called BillingRateRow:-</p>\n\n<pre><code>@using System.Collections\n@model IEnumerable&lt;WIP_Data_Migration.Models.ViewModels.BillingRateRowViewModel&gt; \n\n@foreach (var item in Model)\n{\n    &lt;tr&gt;\n        &lt;td&gt;\n    @item.BillingRates.First().LabourClass.Name\n    &lt;/td&gt;\n    @Html.EditorFor(m =&gt; item.BillingRates)\n&lt;/tr&gt;\n}\n</code></pre>\n\n<p>The BillingRate has an Editor Template:-</p>\n\n<pre><code>@model WIP_Data_Migration.Models.BillingRate\n\n&lt;td&gt;\n  @Html.TextBoxFor(model =&gt; model.Rate,\n                new {style = \"width: 20px\"})\n&lt;/td&gt;\n</code></pre>\n\n<p>The markup produced for each input is:-</p>\n\n<pre><code>&lt;input name=\"BillingMatrix.BillingRateRows.item.BillingRates[0].Rate\"    id=\"BillingMatrix_BillingRateRows_item_BillingRates_0__Rate\" style=\"width: 20px;\" type=\"text\" value=\"0\"/&gt;\n</code></pre>\n\n<p>Notice the name and ID attributes the BillingRate indexes are handled nicely but the BillingRateRows has no index instead '.item.'. From my reasearch this is because the context has been pulled out due to the foreach loop, the loop shouldn't be necessary. </p>\n\n<p>I want to achieve:-</p>\n\n<pre><code>&lt;input name=\"BillingMatrix.BillingRateRows[0].BillingRates[0].Rate\" id=\"BillingMatrix_BillingRateRows_0_BillingRates_0__Rate\" style=\"width: 20px;\" type=\"text\" value=\"0\"/&gt;\n</code></pre>\n\n<p>If I change the BillingRateRow View to:-</p>\n\n<pre><code>@model WIP_Data_Migration.Models.ViewModels.BillingRateRowViewModel\n\n&lt;tr&gt;\n    @Html.EditorFor(m =&gt; Model.BillingRates)\n&lt;/tr&gt;\n</code></pre>\n\n<p>It will throw an InvalidOperationException, 'model item passed into the dictionary is of type System.Collections.ObjectModel.Collection [BillingRateRowViewModel] but this dictionary required a type of BillingRateRowViewModel. </p>\n\n<p>Can anyone shed any light on this?</p>\n"},{"tags":["javascript","asp.net-mvc-3","razor","internet-explorer-7"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":10299,"score":4,"question_id":6911134,"title":"MVC 3 Razor PopUp Window","body":"<p>I need to open a new pop up window on click of a button in a view. The new window should be redirect to a specific actionmethod in a specific controller. I also need to provide attributes for size of the new pop up window.\nI have been trying the following code:</p>\n\n<pre><code>&lt;input type=\"button\" name = \"ClickMe\" Value=\"ClickMe\" onclick= \"javascript:window.open('/Home/Create/','Customer Search',height='window.screen.height - 100', width='200',left='window.screen.width - 250' ,top='10',status='no',toobar='no',resizable='yes',scrollbars='yes')\"/&gt;\n</code></pre>\n\n<p>On click of button, nothing happens. I get following Javascript error:</p>\n\n<blockquote>\n  <p>Line: 19 <br>\n  Char: 1  <br>\n  Error: Invalid argument. <br>\n  Code: 0</p>\n</blockquote>\n\n<p>When I check the ViewSource of the HTML rendered, I find the line to be the one which is rendering the button.\nI am using Windows Vista with IE 7. I am working on MVC 3 with Razor Engine in VS 2010</p>\n"},{"tags":["asp.net-mvc-3","onactionexecuting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":13153347,"title":"How to add QueryString in OnActionExecuting()?","body":"<p>i want to add two queryString in current request URL if it is not exsist</p>\n\n<p><strong>Edited:</strong></p>\n\n<p>I tried this ---</p>\n\n<pre><code>public override void OnActionExecuting(ActionExecutingContext filterContext)\n{\nif (filterContext.RequestContext.HttpContext.Request.QueryString[\"mid\"] == null &amp;&amp; filterContext.RequestContext.HttpContext.Request.QueryString[\"mod\"] == null)\n{\nmid = Convert.ToString(HttpUtility.ParseQueryString(filterContext.RequestContext.HttpContext.Request.UrlReferrer.Query)[\"mid\"]);\nmod = Convert.ToString(HttpUtility.ParseQueryString(filterContext.RequestContext.HttpContext.Request.UrlReferrer.Query)[\"mod\"]);\nif (!string.IsNullOrEmpty(mid) || !string.IsNullOrEmpty(mod))\n{\nRouteValueDictionary redirecttargetDictionary = new RouteValueDictionary();\nNameValueCollection Qstr = null;\nif (filterContext.HttpContext.Request.RequestType == \"GET\")\n{\nQstr = HttpUtility.ParseQueryString(filterContext.HttpContext.Request.Url.Query);\nforeach (string item in Qstr)\n{\nredirecttargetDictionary.Add(item, Qstr[item]);\n}\nif (Qstr[\"mid\"] == null)\n{\nredirecttargetDictionary.Add(\"mid\", mid);\n}\nif (Qstr[\"mod\"] == null)\n{\nredirecttargetDictionary.Add(\"mod\", mod);\n}\nfilterContext.Result = new RedirectToRouteResult(redirecttargetDictionary);\n}\n}\n}\n</code></pre>\n\n<p>This code works fine.\n-check for quesrystring exsist if no\n-then take qstring value from 'Urlreferrer'\n-if request type is GET\n-then add two querystring with exsisting querystring</p>\n\n<p>But but I having problem if querystring in current request has <code>null</code> value url like <code>http://localhost:53372/question/index?type=&amp;stage</code>.if this ll b the current request url then code ll check for mid n mod qstring as its not exsist it will add both the qstring with exsisting type n stage but value ll b null then before hitting action again <code>OnActionExecuting()</code> get call this time first 'if' is not true and then <code>index</code> method get call but I m not getting type n stage querystring which suppose to null I found url in address bar is <code>http://localhost:53372/question/index?mid=1&amp;mod=5</code>.\nIf I remove filter the I got URL <code>http://localhost:53372/question/index?type=&amp;stage=&amp;mid=1&amp;mod=5</code> here I m getting both stage n type querystring though its null.</p>\n\n<p><strong>Edited--</strong></p>\n\n<pre><code>[HttpGet]\n        public ActionResult Index(ProjectType? projectType, int? projectStageID, int? page)\n        {\n            int currentPageIndex = page.HasValue ? page.Value - 1 : 0;\n            IPagedList&lt;ProjectModule&gt; moduleList = null;\n            IDictionary&lt;string, string&gt; queryParam = new Dictionary&lt;string, string&gt;();\n            queryParam[\"ProjectType\"] = string.Empty;\n            queryParam[\"ProjectStageID\"] = string.Empty;\n            ViewBag.ProjectType = null;\n            ViewBag.ProjectStage = null;\n            ViewBag.message = \"\";\n            if ((projectType != null || projectType.HasValue) &amp;&amp; projectStageID.HasValue &amp;&amp; page.HasValue)\n            {\n\n                queryParam[\"ProjectType\"] = Request.QueryString[\"ProjectType\"];\n                queryParam[\"ProjectStageID\"] = Request.QueryString[\"ProjectStageID\"];\n                //\n                //Set View Bag\n                //\n                ViewBag.ProjectType = Enum.Parse(typeof(ProjectType), Request.QueryString[\"ProjectType\"]);\n                ViewBag.ProjectStage = Convert.ToInt32(Request.QueryString[\"ProjectStageID\"]);\n                //\n                // Set Query String formcollection for Pagging purpose\n                //           \n                ViewBag.QueryParam = queryParam;\n                moduleList = new ProjectModuleService().GetProjectModulesByProjectStageID(Convert.ToInt32(Request.QueryString[\"ProjectStageID\"])).ToPagedList(currentPageIndex, Utility.ConstantHelper.AdminDefaultPageSize); ;\n                if (moduleList.Count == 0)\n                {\n                    ViewBag.message = \"Record(s) not found.\";\n                }\n                return View(moduleList);\n\n            }\n            else\n            {\n                if (!string.IsNullOrEmpty(Request.QueryString[\"ProjectType\"]) &amp;&amp; !string.IsNullOrEmpty(Request.QueryString[\"ProjectStageID\"]) &amp;&amp; !string.Equals(Request.QueryString[\"ProjectStageID\"], \"0\"))\n                {\n                    if (!string.IsNullOrEmpty(Request.Params.Get(\"Index\")))\n                    {\n                        queryParam[\"ProjectType\"] = Request.QueryString[\"ProjectType\"];\n                        queryParam[\"ProjectStageID\"] = Request.QueryString[\"ProjectStageID\"];\n                        //\n                        //Set View Bag\n                        //\n                        ViewBag.ProjectType = Enum.Parse(typeof(ProjectType), Request.QueryString[\"ProjectType\"]);\n                        ViewBag.ProjectStage = Convert.ToInt32(Request.QueryString[\"ProjectStageID\"]);\n                        //\n                        // Set Query String formcollection for Pagging purpose\n                        //           \n                        ViewBag.QueryParam = queryParam;\n                        moduleList = new ProjectModuleService().GetProjectModulesByProjectStageID(Convert.ToInt32(Request.QueryString[\"ProjectStageID\"])).ToPagedList(currentPageIndex, Utility.ConstantHelper.AdminDefaultPageSize); ;\n                        if (moduleList.Count == 0)\n                        {\n                            ViewBag.message = \"Record(s) not found.\";\n                        }\n                        return View(moduleList);\n                    }\n\n                    else if (!string.IsNullOrEmpty(Request.Params.Get(\"Create\")))\n                    {\n                        return RedirectToAction(\"Create\", new { projectStageID = Convert.ToInt32(Request.QueryString[\"ProjectStageID\"]) });\n                        //return RedirectToAction(\"Create\", new { projectStageID = Convert.ToInt32(Request.QueryString[\"ProjectStageID\"]), projectType = Enum.Parse(typeof(ProjectType), Request.QueryString[\"ProjectType\"]) });\n                    }\n\n                }\n                if (Request.QueryString[\"ProjectType\"] == \"\" || Request.QueryString[\"ProjectStageID\"] == \"\" || string.Equals(Request.QueryString[\"ProjectStageID\"], \"0\"))\n                {\n                    ViewBag.message = \"Please select all fields.\";\n                    return View();\n                }\n                return View();\n            }\n        }\n</code></pre>\n\n<p><strong>What I m doing wrong?</strong></p>\n"},{"tags":["asp.net-mvc-3","msbuild","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13169879,"title":"MSBuild MVC Deployment Error. Looking for a removed project reference","body":"<p>I have a problem with deploying an MVC application using MSBuild 2008. Here is the scenario. I was originally using MVC 3. I upgraded to MVC and added some projects that were using MVC 4 classes.</p>\n\n<p>I removed the projects and tried to do a new deployment to our dev server using MSBuild. The solution builds fine on my local machine. </p>\n\n<p>However, when trying to deploy through MSBuild, I get an error that MSBuild can't find one of the MVC 4 projects that I removed from the solution.</p>\n\n<p>I made sure to remove all the references to the removed MVC projects from other projects. I also checked the solution file to see if there was any project references. There were none. </p>\n\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["c#","asp.net-mvc-3","kendo-ui"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":13151486,"title":"how to get the value of a kendoui dropdown list selected value in a listview","body":"<p>am having Some kendoui listviews which consists of kendoui dropdown lists and i want to get those dropdown list selected values. To do this am trying,</p>\n\n<pre><code> $(\"#cnty1\").val();\n</code></pre>\n\n<p>and here is my dropdownlist,i.e., list of countries coming from Database table,</p>\n\n<pre><code>&lt;input select STYLE=\"width:90px;height:auto\" id =\"cnty1\" data-bind=\"value:cnty1\" \nname=\"cnty1\" data-type=\"string\" data-text-field=\"cnty\" \ndata-value-field=\"cntyid\" data-source=\"sourcedata1\" class=\"k-d\"   \ndata-role=\"dropdownlist\" /&gt;\n\n&lt;span data-for=\"cnty1\" class=\"k-invalid-msg\"&gt;&lt;/span&gt;\n</code></pre>\n\n<p>here cnty1 is the id of the dropdown list, but am not getting the value instead am getting \"id\" of the slected value but not the selected value.</p>\n\n<p>And also if the value is not selected am getting the first value id by using <code>$(\"#cnty1\").val();</code></p>\n\n<p>So, please suggest me a solution so that,\n1) I should get only the Selected value and \n2) Value of the dropdown list Only if the user selects a value from the list, but don't get the value of the list without selecting. </p>\n"},{"tags":["asp.net-mvc-3","partial-views"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13169912,"title":"Not assigning proper control id to Textboxes in PartialView","body":"<p>I am developing an ASP.NET MVC 3 (Razor) application with jQuery 1.9 .</p>\n\n<p>I am loading 2 PartialViews in 2 jQuery tabs by returning PartialView from the respective controllers. I am loading the PartialViews in the _layout.cshtml page. The views are displayed properly and work fine. Both these views use similar Model classes that derive from a common class, Address.\nIn the HTML of each partial view, I am explicitly assigning the control id to each textbox and dropdown controls. This works fine for the first tab. I can see the control ids in the HTML that is returned in the response of load() call on each tab. The Razor engine also assigns name( HTML attribute) to each control which is the propertyname of the model object the view is bound to. so my HTML input control in first PartialView looks like</p>\n\n<p> </p>\n\n<p>This is working perfectly in the first view. It is correctly assigning the IDs to controls.</p>\n\n<p>Now, since the model object bound to other PartialView also uses the same base class Address, the HTML returned for second partial view looks like </p>\n\n<p> </p>\n\n<p>This is confusing as two controls are having the same name so when I collect data from controls in the second view, I get data stored in the first view. I am assigning IDs to the controls in the second view even then ASP.NET MVC engine is not assigning these IDs to the HTML controls.If I use the same model class to generate another partial view and if control IDs are generated like as in second partial view, there will be lot of controls with duplicate IDs. This will also prevent me from reusing Partial views. Another thing I noted is that this is happening only for TextBox controls, dropdown IDs are generated correctly for second partial view also.</p>\n\n<p>Is this a problem with MVC 3 or I am doing something wrong here ? Please help. </p>\n\n<p>One more thing is I do not see the partial view HTML rendered inside the page when I view page source.   </p>\n"},{"tags":["asp.net-mvc-3","model-binding"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2127,"score":2,"question_id":8332594,"title":"How do you exclude properties from binding when calling UpdateModel()?","body":"<p>I have a view model sent to the edit action of my controller. The ViewModel contains references to EntityObjects. (yea i'm fine with it and don't need to want to duplicate all the entities properties in the viewmodel).</p>\n\n<p>I instantiate the view model and then call UpdateModel. I get an error that a property is \"null\" which is fine since it is a related model. I am trying to exclude the property from being bound during model binding. On debugging it I see in the entity where the model binder is trying to set the value of the property to null.</p>\n\n<p>Here is my edit action:</p>\n\n<pre><code>var model = new SimplifiedCompanyViewModel(id);\n\nvar excludeProperties = new string[] { \n   \"Entity.RetainedEarningsAccount.AccountNo\"\n   ,\"Property.DiscountEarnedAccount.ExpenseCodeValue\"\n   ,\"Entity.EntityAlternate.EntityID\"\n   ,\"Property.BankAccount.BankAccountID\"\n   ,\"Entity.PLSummaryAccount.AccountNo\"\n   ,\"Property.RefundBank.BankAccountID\"\n   ,\"Company.Transmitter.TCC\"\n};\n\ntry\n{\n    UpdateModel&lt;SimplifiedCompanyViewModel&gt;(model, String.Empty, null, excludeProperties);\n\n    if (ModelState.IsValid)\n    {\n       //db.SaveChanges();\n    }\n       return RedirectToAction(\"Index\");\n}\ncatch\n{\n    return View(model);\n}\n</code></pre>\n\n<p>I have looked at a few other issues about specifying a \"prefix\" but I don't think that is the issue since I am telling it to bind to the viewmodel instance not just the entity object.</p>\n\n<p>Am I excluding the properties correctly? Strange thing is is only seems to happen on this item. I suspect it may be an issue with the fact that there is actually no refund bank related to my entity. But I have other related items that don't exist and don't see the same issue.</p>\n\n<p>More info... since I'm told me model isn't designed well. </p>\n\n<p>The Company is related to a BankAccount. The Company view shows the currently related BankAccount.BankAccountId and there is a hidden field with the BankAccount.Key. I use jQueryUI autocomplete feature to provide a dropdown of bank account displaying the BankAccount.BankAccountId and when one is selected the jQuery code changes the hidden field to have the correct Key value. So, when this is posted I don't want the current bankaccounts BankAccountID modified, hence I want it to skip binding that field. </p>\n\n<p>If I exclude BankAccountId in the model then on the BankAccount edit view the user would never be able to change the BankAccountId since it won't be bound. I'm not sure how this indicates a poor model design.</p>\n"},{"tags":["c#",".net","asp.net-mvc-3","model-binding"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13169825,"title":"logic behind implementation of ModelBinding in MVC3","body":"<p>I was having a problem with binding using the HTML extension to create text and hidden fields.  The value was being changed after I returned the view and I didn't know why.  After some reading, I learned that this is by design, and it's supposed to use whatever is inside the model state. </p>\n\n<p>Can anyone explain the logic behind this? I don't see a good reason why you would want a supplied parameter to be replaced with what's in the model state. </p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>        @Html.Hidden(\"UpdateMode\", \"Update\")\n</code></pre>\n\n<p><strong>Result</strong></p>\n\n<pre><code>       &lt;input id=\"UpdateMode\" name=\"UpdateMode\" type=\"hidden\" value=\"Add\" /&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","viewbag","child-actions"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":1139,"score":5,"question_id":7737124,"title":"Does a child action share the same ViewBag with its \"parents\" action?","body":"<p>I am confused with this:\nI have an action ,say Parent ,and in the corresponding view file ,I have called a child action ,say Child ,both  Parent and Child actions are in the same controller.</p>\n\n<p>and I need the Child action and the Parent action to share some data in the ViewBag.Now ,what I should do ?Here is my question:</p>\n\n<p>when I call the Child action in parent's view file ,I pass the viewbag to it like this:\n@Html.Action(ViewBag).\nin my child action ,I do this:</p>\n\n<pre><code>public PartialViewResult Child(Object ViewBag)\n{\n  //using the data in ViewBag\n}\n</code></pre>\n\n<p>Is this the right way ? Does the viewbag object passed by reference or it is a different object then the original viewbag(more memory needed)?</p>\n\n<p>Or if the Child action is sharing the viewbag with its calling parent Action by default?</p>\n\n<p>From Darin Dimitrov's answer ,I knew that I can't do something like this:@Html.Action(ViewBag)</p>\n\n<p>But I really need to pass the child action muti-parameters,what can I do ?</p>\n"},{"tags":["asp.net-mvc-3","asp.net-mvc-areas"],"answer_count":3,"favorite_count":4,"up_vote_count":7,"down_vote_count":0,"view_count":2599,"score":7,"question_id":5382524,"title":"ASP.NET MVC3 – Areas in Separate Assemblies","body":"<p>I am trying to set up an MVC3 solution using areas, but I want to have my areas in different assemblies.  For example, I want a parent assembly that contains shared resources like master pages, style sheets, scripts, login page, etc.  But I want distinct areas of business functionality in separate assemblies.</p>\n\n<p>I tried this sample that was written for the MVC2 preview:  <a href=\"http://msdn.microsoft.com/en-us/library/ee307987%28VS.100%29.aspx\">http://msdn.microsoft.com/en-us/library/ee307987%28VS.100%29.aspx</a>.  (Note, I originally found this from this Stack Overflow thread:  <a href=\"http://stackoverflow.com/questions/2585229/asp-net-mvc-separating-large-app\">ASP.NET MVC - separating large app</a>).    But it appears that MVC3 does not have the option to move view files into the main project.  I’m not crazy about using the embedded resource / VirtualPathProvider option.</p>\n\n<p>Any suggestions on how to make this work with MVC3?</p>\n\n<p>Thanks,\nSkip</p>\n"},{"tags":["asp.net","asp.net-mvc-3","connection-string"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1635,"score":0,"question_id":6491982,"title":"asp.net mvc multiple connection strings","body":"<p>I am creating asp.net MVC Application using MVC 3.0. I have 2 users but the DataBase is the same. So, Is it possible to setup two connection strings or even more in web.config? when user login, I redirect it to his database, so then he can use his DataBase.</p>\n\n<p>So major issue here is to find out which user is logged in and use connection string for that user.</p>\n\n<p>I am using default mvc account controller and for example when i want to display welcome message for user in my view i type: if (@User.Identity.Name == \"UserName\") then some message\nSo where is the best place to find out which user is logged in and set his connection string in controller or in a view? </p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","design-patterns","dependency-injection"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":37,"score":-1,"question_id":13167780,"title":"Using Request-Response pattern with MVC 3 and DI","body":"<p>I am currently using a variation of the request-response pattern for my service layer on a c# mvc 3 project.  Here is my issue, currently my Services implement IService and have a single point of execution, ExecuteService method which takes an associated Request object which implements the IRequest interface.  This seems to work fine until I have to add dependency injection to my controllers.  Since my services only need to implement from the same interface it seems to throw a monkey wrench in registering my Services with the unity DI container.  Has anyone used the request-response pattern with unity DI? </p>\n"},{"tags":["asp.net-mvc-3","jqgrid"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":1975,"score":1,"question_id":6248472,"title":"jQGrid display inline edit delete cancel buttons","body":"<p>I am using jQuery Grid plugin(jQGrid) and i am wondering how could I achieve such behavior with jQGrid inline Edit Actions like on that sample <a href=\"http://www.trirand.net/aspnetmvc/grid/EditRowInlineActionIcons\" rel=\"nofollow\">http://www.trirand.net/aspnetmvc/grid/EditRowInlineActionIcons</a> \nCurrently i setup my jQGrid with pager with edit actions:</p>\n\n<pre><code> .navGrid('#pager', { view: false, edit: true, add: true, del: true, search: false }); \n</code></pre>\n\n<p>but i want to have inline Edit Actions like in the sample above, may be some one did something like \nthat.</p>\n\n<p><img src=\"http://i.stack.imgur.com/G0adg.png\" alt=\"Inline Edit Actions\"></p>\n\n<p>Need help.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I put the property <code>editactioniconscolumn: true</code>  but still din't get the Edit Actions</p>\n\n<pre><code>colNames: ['Id', 'FName', 'LName'],\ncolModel: [{ hidden: true, name: 'Id', index: 'Id', width: 50, align: 'left', editable: true },\n{ name: 'FName', index: 'FName', width: 50, align: 'left', editable: true, editactioniconscolumn: true },\n{ name: 'LName', index: 'LName', width: 50, align: 'left', editable: true, editactioniconscolumn: true }]\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc-3","jqgrid","jqgrid-asp.net"],"answer_count":4,"favorite_count":5,"up_vote_count":5,"down_vote_count":0,"view_count":12607,"score":5,"question_id":5092866,"title":"ASP.Net MVC 3 JQGrid","body":"<p>After reading up on the JQGrid control, I decided it would be good to use it in one of my ASP.Net MVC 3 Web applications.</p>\n\n<p>Firstly I followed Phil Haacks tutorial <a href=\"http://haacked.com/archive/2009/04/14/using-jquery-grid-with-asp.net-mvc.aspx\">http://haacked.com/archive/2009/04/14/using-jquery-grid-with-asp.net-mvc.aspx</a> which is all good. I then tried to implement something similar into my app, the only difference being, I use Linq To Entities.</p>\n\n<p>My View page has all the css and Jquery classes imported, then I have my JavaScript Function and table which holds the data</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\njQuery(document).ready(function () {\n    jQuery(\"#list\").jqGrid({\n        url: '/Home/LinqGridData/',\n        datatype: 'json',\n        mtype: 'GET',\n        colNames: ['equipmentID', 'categoryTitle', 'title'],\n        colModel: [\n      { name: 'equipmentID', index: 'equipmentID', width: 40, align: 'left' },\n      { name: 'categoryTitle', index: 'categoryTitle', width: 40, align: 'left' },\n      { name: 'title', index: 'title', width: 200, align: 'left'}],\n        pager: jQuery('#pager'),\n        width: 660,\n        height: 'auto',\n        rowNum: 10,\n        rowList: [5, 10, 20, 50],\n        sortname: 'Id',\n        sortorder: \"desc\",\n        viewrecords: true,\n        imgpath: '/scripts/themes/coffee/images',\n        caption: 'My first grid'\n    });\n}); \n</code></pre>\n\n<p></p>\n\n<pre><code>&lt;h2&gt;My Grid Data&lt;/h2&gt;\n&lt;table id=\"list\" class=\"scroll\" cellpadding=\"0\" cellspacing=\"0\"&gt;&lt;/table&gt;\n&lt;div id=\"pager\" class=\"scroll\" style=\"text-align:center;\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Then in my controller, I have the following method which is suppose to return the Json data</p>\n\n<pre><code>public ActionResult LinqGridData(string sidx, string sord, int page, int rows)\n    {\n        AssetEntities context = new AssetEntities();\n\n        var query = from e in context.Equipments\n                    select e;\n\n        var count = query.Count();\n\n        var result = new\n        {\n            total = 1,\n            page = page,\n            records = count,\n            rows = (from e in query\n                    select new\n                    {\n                        id = e.equipmentID,\n                        cell = new string[]\n                        {\n                        e.equipmentID.ToString(),\n                        e.Category.categoryTitle,\n                        e.Department.title\n                        }\n\n                    }).ToArray()\n        };\n\n        return Json(result, JsonRequestBehavior.AllowGet);\n\n    }\n</code></pre>\n\n<p>When I run this, the code falls over with the following error</p>\n\n<pre><code>LINQ to Entities does not recognize the method 'System.String ToString()' method\n</code></pre>\n\n<p>Does anyone know how to fix this error? And also, am I doing this the correct way, or should I be doing it a different way from the Phil Haack explanation since he is using Linq to SQL?</p>\n\n<p>Any feedback would be much appreciated.</p>\n\n<p>Thanks Folks.</p>\n"},{"tags":["asp.net-mvc-3","pdf-generation","itextsharp","memorystream"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":42,"score":-1,"question_id":13130774,"title":"iTextSharp make one document from the first page of multiple other documents","body":"<p>I am trying to use iTextSharp to pull multiple pdf files out of a database, put page 1 from each of those files into a new pdf file (so that all of the old page ones are together in one new file), and output that as a browser result.</p>\n\n<p>In the process, I need to add some data to each of the pages (including text, an image, and a second page).</p>\n\n<p>I don't completely understand iTextSharp, so I have not been able to get the results I am hoping for.  In my multiple tries, I have gotten documents that don't open, documents that aren't combined, every page from the input documents instead of just the first page, and documents that don't add the image to the first page.  The try I put below ends up with the entire document (instead of just the first page), and it only puts the LAST document (not the other ones that I want to combine in).  It also does not add the last page with \"hello world\" on it.</p>\n\n<p>Here is my latest try.  I pulled out some of the irrelevant lines.  In the code below, the variable \"file\" represents each pdf file pulled from the database.  The variable \"signatureBytes\" represents the image that corresponds to each pdf file.</p>\n\n<pre><code>    public byte[] GetBackgroundCheckSignaturesBytes(string[] IDs, string DocumentString)\n    {\n        using (MemoryStream outputPdfStream = new MemoryStream())\n        {\n            iTextSharp.text.Document outputDoc = new iTextSharp.text.Document();\n            PdfWriter outputWriter = PdfWriter.GetInstance(outputDoc, outputPdfStream);\n\n            foreach (string ID in IDs)\n            {\n\n                    ...\n                    ...\n\n                    byte[] file = GetDocumentBytes(applicantApplication.ApplicantApplicationID, applicantApplication.ApplicationID, Functions.TranslateDocument(DocumentString));\n                    byte[] signatureBytes = GetSignatureBytes(applicantApplication.ApplicantApplicationID, Functions.TranslateSignature(DocumentString));\n\n                    ...\n                    ...\n\n                    iTextSharp.text.Image signatureImage = iTextSharp.text.Image.GetInstance(signatureBytes);\n\n                    using (Stream inputPdfStream = new MemoryStream(file, 0, file.Length, true, true))\n                    using (Stream inputImageStream = new MemoryStream(signatureBytes, 0, signatureBytes.Length, true, true))\n                    {\n                        PdfReader reader = new PdfReader(inputPdfStream);\n\n                        outputDoc.Open();\n                        PdfContentByte cbl = outputWriter.DirectContent;\n\n                        //put page 1 of the current Document into the output Document\n                        outputDoc.NewPage();\n                        PdfImportedPage page = outputWriter.GetImportedPage(reader, 1);\n\n                        cbl.AddTemplate(outputWriter.GetImportedPage(reader, 1), 1f, 0, 0, 1f, 0, 0);\n\n\n                        //add signature image as well as signature text\n                        PdfStamper stamper = new PdfStamper(reader, outputPdfStream);\n\n                        PdfContentByte cb = stamper.GetOverContent(1);\n\n                        iTextSharp.text.Image image = iTextSharp.text.Image.GetInstance(inputImageStream);\n                        image.SetAbsolutePosition(385, 100);\n                        image.ScaleAbsolute(200, 50);\n                        image.BorderWidthBottom = iTextSharp.text.Image.BOTTOM_BORDER;\n                        cb.AddImage(image);\n\n                        BaseFont bfTimes = BaseFont.CreateFont(BaseFont.TIMES_ROMAN, BaseFont.CP1252, false);\n                        cb.SetFontAndSize(bfTimes, 12);\n\n                        cb.BeginText();\n                        cb.SetTextMatrix(385, 90);\n                        cb.ShowText(\"Signature\");\n                        cb.EndText();\n\n                        iTextSharp.text.Font font = new iTextSharp.text.Font(bfTimes, 12.0f, iTextSharp.text.Font.UNDERLINE);\n\n\n                        cb.BeginText();\n                        cb.SetTextMatrix(385, 70);\n                        cb.ShowText(typedName);\n                        cb.EndText();\n\n                        cb.SetLineWidth(1.5f);\n                        cb.MoveTo(385, 68);\n                        cb.LineTo(485, 68);\n                        cb.Stroke();\n\n                        cb.BeginText();\n                        cb.SetTextMatrix(515, 70);\n                        cb.ShowText(typedDate);\n                        cb.EndText();\n\n                        cb.MoveTo(515, 68);\n                        cb.LineTo(585, 68);\n                        cb.Stroke();\n\n                        cb.BeginText();\n                        cb.SetTextMatrix(385, 55);\n                        cb.ShowText(\"Name\");\n                        cb.EndText();\n\n                        cb.BeginText();\n                        cb.SetTextMatrix(515, 55);\n                        cb.ShowText(\"Date\");\n                        cb.EndText();\n\n                        stamper.Writer.CloseStream = false;\n                        stamper.Close();\n\n                        //Add a second page with some data in it...\n                        outputDoc.Open();                                \n                        outputDoc.NewPage();\n                        outputDoc.Add(new iTextSharp.text.Paragraph(\"Hello World\"));\n                        outputDoc.Close();\n\n                    }\n                }\n            }\n            return outputPdfStream.ToArray();\n        }\n    }\n</code></pre>\n\n<p>Here is the generic process I am wanting to accomplish:</p>\n\n<pre><code>1. Create a new PdfDocument\n2. Loop through a set of already-existing PdfDocuments\n    a. Copy page one from the already-existing PdfDocument\n    b. Paste that page into the new PdfDocument\n    c. Create a new page (add text, lines, etc.)\n    d. Add the page to the new PdfDocument\n3. Return the new PdfDocument as a MemoryStream\n</code></pre>\n"},{"tags":["asp.net-mvc-3","file-download","filecontentresult","fileresult"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13164243,"title":"Downloading excel file in asp.net mvc","body":"<p>What I'm trying to implement is giving the users the ability to export the grid data to an excel file and download it, with the help of a file save dialog.</p>\n\n<p>Here's how I have coded it right now -</p>\n\n<h3>In Javascript -</h3>\n\n<pre><code>$.post(\"/irn/Identifier/Download\", { \"columnValues\": columnValues });\n</code></pre>\n\n<h3>In the Identifier controllers Download action -</h3>\n\n<pre><code>public FileResult Download(string columnValues)\n{\n    DTData headlineRows = (DTData)Newtonsoft.Json.JsonConvert.DeserializeObject(columnValues, typeof(DTData));\n    var e = new Services.DownloadToExcel();\n    return File(e.WriteData(headlineRows), \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", \"testfile.xlsx\");\n}\n</code></pre>\n\n<h3>In the DownloadToExcel class, inside the WriteData function I have -</h3>\n\n<pre><code>//Here, I'm using the EPPlus library to write the column data to an excel file and then i'm returning the data as a byte array -\n\n//Some code that writes the data\nreturn packages.GetAsByteArray();\n</code></pre>\n\n<p>When I run this code, I expect to see a File Save Dialog in the browser, but nothing happens. There aren't any errors on the C# or JavaScript side. Can anyone tell me what i could be doing wrong?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","one-click-web-publishing"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13160208,"title":"Web Deploy: How to keep files on a specific destination folder","body":"<p><strong>Scenario</strong></p>\n\n<ul>\n<li>Visual Studio 2012 web publishing: web Deploy method.</li>\n<li>\"Remove additional files at destination\" option selected.</li>\n<li>MVC3 website with a \"upload\" folder</li>\n</ul>\n\n<p><strong>Question</strong></p>\n\n<p>How to keep the existing files on destination for the upload folder without removing the \"Remove addtional files...\" option from the deployment settings?</p>\n"},{"tags":["asp.net-mvc-3","orchardcms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13132192,"title":"New Orchard User Crashes Website Each time new User Logs in","body":"<p>Can anyone advise me on this one please? I've got a fully functional Orchard Site with content and all is well. However, so far i've only EVER used the DEFAULT ADMIN account. I've added modules and everything is complete. </p>\n\n<p>Now I want to add a user that's just for EDITING and ADDING content and cannot say, add modules etc. I create a new user and approve them, then I try to LOG in as them and the Site crashes. Then I cannot get back in. I had to Recycle the Application pool to get back in as ADMIN. Anyone seen this before?</p>\n\n<pre><code>[ObjectNotFoundException: No row with the given identifier exists[Orchard.Roles.Models.PermissionRecord#27]]\n   NHibernate.Impl.DefaultEntityNotFoundDelegate.HandleEntityNotFound(String entityName, Object id) +56\n   NHibernate.Proxy.AbstractLazyInitializer.CheckTargetState() +48\n   NHibernate.Proxy.AbstractLazyInitializer.Initialize() +89\n   NHibernate.ByteCode.Castle.LazyInitializer.Intercept(IInvocation invocation) +123\n   Castle.DynamicProxy.AbstractInvocation.Proceed() +81\n   PermissionRecordProxy1b0b6ea8f5864e2c9211eba674e34740.get_Name() +84\n   Orchard.Roles.Services.RoleService.GetPermissionsForRole(Int32 id) +133\n   Orchard.Roles.Services.RoleService.GetPermissionsForRoleByNameInner(String name) +37\n   Orchard.Roles.Services.&lt;&gt;c__DisplayClasse.&lt;GetPermissionsForRoleByName&gt;b__d(AcquireContext`1 ctx) +26\n   Orchard.Caching.Cache`2.CreateEntry(TKey k, Func`2 acquire) in c:\\Build\\Orchard\\src\\Orchard\\Caching\\Cache.cs:57\n   Orchard.Caching.&lt;&gt;c__DisplayClass2.&lt;Get&gt;b__0(TKey k) in c:\\Build\\Orchard\\src\\Orchard\\Caching\\Cache.cs:19\n   System.Collections.Concurrent.ConcurrentDictionary`2.AddOrUpdate(TKey key, Func`2 addValueFactory, Func`3 updateValueFactory) +125\n   Orchard.Caching.Cache`2.Get(TKey key, Func`2 acquire) in c:\\Build\\Orchard\\src\\Orchard\\Caching\\Cache.cs:17\n   Orchard.Caching.DefaultCacheManager.Get(TKey key, Func`2 acquire) in c:\\Build\\Orchard\\src\\Orchard\\Caching\\DefaultCacheManager.cs:33\n   Orchard.Roles.Services.RoleService.GetPermissionsForRoleByName(String name) +100\n   Orchard.Roles.Services.RolesBasedAuthorizationService.TryCheckAccess(Permission permission, IUser user, IContent content) +561\n   Orchard.Security.Authorizer.Authorize(Permission permission, IContent content, LocalizedString message) in c:\\Build\\Orchard\\src\\Orchard\\Security\\Authorizer.cs:72\n   Orchard.Security.Authorizer.Authorize(Permission permission) in c:\\Build\\Orchard\\src\\Orchard\\Security\\Authorizer.cs:60\n   Orchard.Security.SecurityFilter.OnAuthorization(AuthorizationContext filterContext) in c:\\Build\\Orchard\\src\\Orchard\\Security\\SecurityFilter.cs:24\n   System.Web.Mvc.ControllerActionInvoker.InvokeAuthorizationFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor) +103\n   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +329\n   System.Web.Mvc.Controller.ExecuteCore() +115\n   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +94\n   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10\n   System.Web.Mvc.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5() +37\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0() +21\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass8`1.&lt;BeginSynchronous&gt;b__7(IAsyncResult _) +12\n   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55\n   System.Web.Mvc.&lt;&gt;c__DisplayClasse.&lt;EndProcessRequest&gt;b__d() +31\n   System.Web.Mvc.SecurityUtil.&lt;GetCallInAppTrustThunk&gt;b__0(Action f) +7\n   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +23\n   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +59\n   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9\n   Orchard.Mvc.Routes.HttpAsyncHandler.EndProcessRequest(IAsyncResult result) in c:\\Build\\Orchard\\src\\Orchard\\Mvc\\Routes\\ShellRoute.cs:147\n   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +184\n</code></pre>\n"},{"tags":["css","asp.net-mvc-3","iis7","localhost","ip-address"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":800,"score":0,"question_id":7722921,"title":"Local website renders differently using (IP address or machine name) vs localhost?","body":"<p>I have an MVC3 (razor) site published to IIS7 locally for testing purposes.</p>\n\n<p>When I access the site via \"localhost\" it looks different from when I access using the IP address or machinename?</p>\n\n<p>I have cleared my cache and re-loaded the pages to confirm and they still appear the different.  The CSS must be loading to give the correct fonts/colours etc, although \":hover\" elements appear to load much slower?</p>\n\n<p>I am using JQuery/JQueryUI on the site if that helps identify the problem?</p>\n\n<p><img src=\"http://i.stack.imgur.com/Voxfs.png\" alt=\"Localhost\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/yAGbR.png\" alt=\"IP Address\"></p>\n\n<p>Any ideas?</p>\n\n<p>Edit: More info</p>\n\n<p>The titles, labels and table definition are build from ViewBag.Title, or looping through rows in a ViewModel - nothing clever, just standard MVC3/Razor stuff.</p>\n\n<p>The same css file is used for every page, and F12 in IE8 shows the correct css has been loaded.</p>\n\n<p>Title/subtitle font sizes/colours are correct, just their positioning is out?\nTable border appears thicker?\nPositioning generally seems a little \"out\", but I can't understand why there is this difference?</p>\n\n<p>Can a firewall/AV package strip out positioning?</p>\n"},{"tags":["ajax","asp.net-mvc-3","knockout.js","json.net","form-post"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":101,"score":0,"question_id":13138778,"title":"dynamic form building with knockoutjs","body":"<p>I need to build a dynamic form from database. I have following Entity to define form fields on the fly:</p>\n\n<pre><code>    public class FormField {\n        public int ID { get; set; }\n        public string Name { get; set; }\n        public string Type { get; set; }    // Possible values are: 'Radio','Combo','Text'. A dropdown will be created for a Combo type of element, a radio set for Radio type of element and a text input for Text type of element.\n        public string Options { get; set; } // Only relevant in case of Radio/Combo type\n        public string Default { get; set; } // Default value in case of Type 'Text' and selected value in case of Type 'Radio/Combo'\n        public string Blankout { get; set; }// An expression to define when this field should be hidden \n    }\n\n    /* A sample JSON array (from the DB) to build the form would be:\n       [\n        { Name:\"Gender\", Type:\"radio\", Options:[\"Male\",\"Female\",\"Unknown\"], Default:\"Male\", Blankout:\"Never\" },\n        { Name:\"Age\", Type:\"text\", Options:\"None\", Default:15, Blankout:\"Never\" },\n        { Name:\"Neighbourhood\", Type:\"Combo\", Options:[\"Eastern\",\"Western\",\"Northern\",\"Southern\",\"Central\"], Default:\"Central\", Blankout:\"if (Age &lt; 40 or Voted='Obama')\" },\n        { Name:\"Voted\", Type:\"Combo\", Options:[\"Obama\",\"Romney\",\"Harry Potter\"], Default:\"Harry Potter\", Blankout:\"if ((Gender='Female' and Age &lt; 15) or Neighbourhood='Eastern'\" }\n       ]\n    */\n</code></pre>\n\n<p>I can build a dynamic form from the 'FormField' records in DB, BUT the problem is i need to track the changes in values of any form field, and when a change in value happens i need to send all the form data to server (asynchronously) in order to evaluate the 'Blankout' formula on Server. If i do this change tracking thing without KnockoutJS its not responsive and becomes very very complex.\nI have gone through several tutorials of KnockoutJS, but could not figure out how to organize my ViewModel for this particular problem.</p>\n\n<p>Any help would be appreciated.</p>\n\n<p><strong>Update 1</strong></p>\n\n<p>I have tried to post this form data to controller by using following code:</p>\n\n<pre><code>    $.ajax({\n            type: \"POST\",\n            url: \"/MyController/GetBlankoutElements\",\n            contentType: 'application/json',\n            dataType: 'json',\n            data: JSON.stringify(ko.toJSON(self)),\n            success: function(result) {\n                alert(result);\n                //self.HiddenElements(result.split(','));\n            }\n    });\n</code></pre>\n\n<p>In my controller i have tried following code:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult GetBlankoutElements(List&lt;MyFieldViewModel&gt; Fields)\n    {\n        return Json(Fields); // List, Fields is null here\n    }\n</code></pre>\n\n<p>Her is the what the MyFieldViewModel class looks like:</p>\n\n<pre><code>    public class MyFieldViewModel \n    {\n        public string Title { get; set; }\n        public string Name { get; set; }\n        public string Type { get; set; }\n        public string Default { get; set; }\n        public string[] Options { get; set; }\n    }\n</code></pre>\n\n<p>I have tried tips described at <a href=\"http://stackoverflow.com/questions/4789481/post-an-array-of-objects-via-json-to-asp-net-mvc3\">Post an Array of Objects via JSON to ASP.Net MVC3</a></p>\n\n<p>Following is the Json data that prints out when i execute <em>alert(ko.toJSON(self))</em></p>\n\n<pre><code>    {\"Fields\":\n        [{\"Title\":\"CCType\",\"Name\":\"CCType\",\"Type\":\"Radio\",\"Default\":\"Enterprise\",\"Options\":[\"Enterprise\",\"Express\",\"CVP\",\"PCCE\"]},{\"Title\":\"Industry\",\"Name\":\"Industry\",\"Type\":\"Combo\",\"Default\":\"Banks\",\"Options\":[\"Banks\",\"ServiceProvider\",\"Outsourcer\",\"Airlines\",\"Utilities\",\"Government\",\"Retail\"]},{\"Title\":\"Customer Lab\",\"Name\":\"CustomerLab\",\"Type\":\"Combo\",\"Default\":\"0\",\"Options\":[\"0\",\"1\"]},{\"Title\":\"No of Agents\",\"Name\":\"Agents\",\"Type\":\"Text\",\"Default\":\"if(c.CCType==\\\"CVP\\\") then 10 else 25\",\"Options\":[]},{\"Title\":\"ExpLicType\",\"Name\":\"ExpLicType\",\"Type\":\"Radio\",\"Default\":\"if(c.CCType==\\\"Express\\\") then \\\"Enhanced\\\" else \\\"None\\\"\",\"Options\":[\"None\",\"Premium\",\"Standard\",\"Enhanced\"]},{\"Title\":\"Multimedia\",\"Name\":\"Multimedia\",\"Type\":\"Combo\",\"Default\":\"WIM\",\"Options\":[\"None\",\"EIM\",\"WIM\",\"EIM&amp;WIM\",\"BSMediaRouting\",\"MCAL\"]}],\n     \"HiddenElements\":[]\n    }\n</code></pre>\n\n<p>What i need is just the field name and its selected value by the user, and i am confused even if i get this json data mapped to my <em>MyFieldViewModel</em> class, still how would i get the selected VALUES ?</p>\n\n<p><strong>Update 2</strong> <em>(JSON data Mapping worked)</em></p>\n\n<p>When i changed </p>\n\n<pre><code>    data: JSON.stringify(ko.toJSON(self))\n</code></pre>\n\n<p>with\n        data: ko.toJSON(self)</p>\n\n<p>Mapping worked perfectly on my controller, as you can see in the following screenshot:\n<img src=\"http://i.stack.imgur.com/8uHVq.png\" alt=\"Debug screenshot of Mapped list object from post json data\"></p>\n\n<p>Now, the problem remains, the whole point of posting form was to update server with user's input on the form i.e. values against every form field element. \n<strong>How do i post the current selected/typed values of form fields ?</strong>\nFor example, in above screenshot, i can see the Default but not the current selected value. </p>\n"},{"tags":["asp.net-mvc-3","membership","membership-provider","custom-membershipprovider","machinekey"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":961,"score":0,"question_id":8965502,"title":"The user name or password provided is incorrect. in MVC 3 Internet Application","body":"<p>I have a \"<strong>Internet Application</strong>\" - \"<strong>A default ASP.NET MVC 3 project with an account controller that uses forms authentication.</strong>\" called <strong>MyMv3App</strong>. I run the site in <strong>IIS Express</strong> using Ctrl + F5 and then I go to localhost:10382/Account/Register and I create a user \"<strong>test1</strong>\". Once the user is created I'm redirected to the Home page. I log off. Then I go to localhost:10382/Account/LogOn and type the username and password for the user \"test1\" and click on \"Log On\" button and the user is logged in. Cool, everything OK so far!</p>\n\n<p>Next I add a new <strong>C#</strong> \"<strong>Class Library</strong>\" project and I name it <strong>MyCustomMembershipProvider</strong>. Then I download the <strong>ProviderToolkitSamples.msi</strong> from here <a href=\"http://weblogs.asp.net/scottgu/archive/2006/04/13/442772.aspx\" rel=\"nofollow\">http://weblogs.asp.net/scottgu/archive/2006/04/13/442772.aspx</a>, run the msi installer, and go to the folder <strong>C:\\Program Files (x86)\\ASP.NET Provider Toolkit SQL Samples</strong> where all the files get installed. I then add these files to my C# Class Library project MyCustomMembershipProvider I just created, <strong>SQLMembershipProvider.cs</strong>, <strong>SecUtil.cs</strong>, <strong>SqlConnectionHelper.cs</strong> and <strong>SR.cs</strong>. (I need all these files or the C# Class Library project MyCustomMembershipProvider won't compile). Then I add a reference to <strong>System.configuration</strong>, <strong>System.Web</strong> and <strong>System.Web.ApplicationServices</strong> to the C# Class Library project MyCustomMembershipProvider. Then I build the project and then I go to MyMvc3App and\nI add a reference to the MyCustomMembershipProvider project.</p>\n\n<p>Note: Forgot to mention that I changed the namespace for all four files in the project \nMyCustomMembershipProvider to \"namespace MyCustomMembershipProvider\" and also I renamed the class name to MyCustomMembershipProvider. And also in SQLMembershipProvider.cs line 110 I changed it from name = \"SqlMembershipProvider\"; to name = \"MyCustomMembershipProvider\";</p>\n\n<p>Next I change the web.config file membership section from this:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;membership&gt;\n      &lt;providers&gt;\n        &lt;clear/&gt;\n        &lt;add name=\"AspNetSqlMembershipProvider\" type=\"System.Web.Security.SqlMembershipProvider\" connectionStringName=\"ApplicationServices\"\n             enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\"\n             maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\"\n             applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/membership&gt;\n</code></pre>\n\n<p>to this:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;membership defaultProvider=\"MyCustomMembershipProvider\"&gt;\n      &lt;providers&gt;\n        &lt;clear/&gt;\n        &lt;add name=\"MyCustomMembershipProvider\" type=\"MyCustomMembershipProvider.MyCustomMembershipProvider\" connectionStringName=\"ApplicationServices\"\n             enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\"\n             maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\"\n             applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/membership&gt;\n</code></pre>\n\n<p>The entire web.config looks like this now:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;!--\n  For more information on how to configure your ASP.NET application, please visit\n  http://go.microsoft.com/fwlink/?LinkId=152368\n  --&gt;\n\n&lt;configuration&gt;\n  &lt;connectionStrings&gt;\n    &lt;add name=\"ApplicationServices\"\n         connectionString=\"data source=.\\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true\"\n         providerName=\"System.Data.SqlClient\" /&gt;\n  &lt;/connectionStrings&gt;\n\n  &lt;appSettings&gt;\n    &lt;add key=\"webpages:Version\" value=\"1.0.0.0\"/&gt;\n    &lt;add key=\"ClientValidationEnabled\" value=\"true\"/&gt;\n    &lt;add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\"/&gt;\n  &lt;/appSettings&gt;\n\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n      &lt;assemblies&gt;\n        &lt;add assembly=\"System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n        &lt;add assembly=\"System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n        &lt;add assembly=\"System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n        &lt;add assembly=\"System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n        &lt;add assembly=\"System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n      &lt;/assemblies&gt;\n    &lt;/compilation&gt;\n\n    &lt;authentication mode=\"Forms\"&gt;\n      &lt;forms loginUrl=\"~/Account/LogOn\" timeout=\"2880\" /&gt;\n    &lt;/authentication&gt;\n\n    &lt;membership defaultProvider=\"MyCustomMembershipProvider\"&gt;\n      &lt;providers&gt;\n        &lt;clear/&gt;\n        &lt;add name=\"MyCustomMembershipProvider\" type=\"MyCustomMembershipProvider.MyCustomMembershipProvider\" connectionStringName=\"ApplicationServices\"\n             enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\"\n             maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\"\n             applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/membership&gt;\n\n    &lt;profile&gt;\n      &lt;providers&gt;\n        &lt;clear/&gt;\n        &lt;add name=\"AspNetSqlProfileProvider\" type=\"System.Web.Profile.SqlProfileProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/profile&gt;\n\n    &lt;roleManager enabled=\"false\"&gt;\n      &lt;providers&gt;\n        &lt;clear/&gt;\n        &lt;add name=\"AspNetSqlRoleProvider\" type=\"System.Web.Security.SqlRoleProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt;\n        &lt;add name=\"AspNetWindowsTokenRoleProvider\" type=\"System.Web.Security.WindowsTokenRoleProvider\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/roleManager&gt;\n\n    &lt;pages&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"System.Web.Helpers\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n        &lt;add namespace=\"System.Web.Routing\" /&gt;\n        &lt;add namespace=\"System.Web.WebPages\"/&gt;\n      &lt;/namespaces&gt;\n    &lt;/pages&gt;\n  &lt;/system.web&gt;\n\n  &lt;system.webServer&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\"/&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n\n  &lt;runtime&gt;\n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"3.0.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n    &lt;/assemblyBinding&gt;\n  &lt;/runtime&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Now I do the exact same thing I did in the first paragraph; I go to localhost:10382/Account/Register and I create a user, this time I call the user\n\"<strong>test2</strong>\". Once the user is created I'm redirected to the Home page. I log off. Then I go to\nlocalhost:10382/Account/LogOn to log in again and type the username and password for the user \"<strong>test2</strong>\" and click on \"Log On\" button and I get the error message:</p>\n\n<p><strong>Login was unsuccessful. Please correct the errors and try again.\nThe user name or password provided is incorrect.</strong></p>\n\n<p>Why? What did I miss? I haven't touched anything besides the namespace and that <strong>name</strong> variable in SQLMembershipProvider.cs in line 110. </p>\n\n<p>I tried to understand why so I googled and found that adding the machineKey element might work. So I went to this site <a href=\"http://www.developmentnow.com/articles/machinekey_generator.aspx\" rel=\"nofollow\">http://www.developmentnow.com/articles/machinekey_generator.aspx</a> and generated a ASP.NET 2.0 machineKey and copy pasted it into web.config's system.web element:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;machineKey\n        validationKey=\"A5E72C3BF96D34B9401278890361AA0949EAE806B124573AC3C1A8D77936B4E42BB1374D1DA443706C4E575B7F1234CB48F4CF52444CB4B1F343994752416569\"\n        decryptionKey=\"47869B2D1F1D3EBC92FCC4C2D7B0EFB707535925E116AEF85F470E138A6C8CB5\"\n        validation=\"SHA1\" decryption=\"AES\"\n/&gt;\n</code></pre>\n\n<p>I once again did the exact same thing as before; I go to localhost:10382/Account/Register and I create a user, I'm calling the user \"<strong>test3</strong>\" this time. Once the user is created I'm redirected to the Home page. I log off. Then I go to localhost:10382/Account/LogOn and type the username and password for the user \"<strong>test3</strong>\" and click on \"Log On\" button and BAM! the user is once again logged in!?</p>\n\n<p>Why did I have to manually configure a machineKey with a generated validationKey and decryptionKey in web.config for the MyCustomMembershipProvider to be able to work with the login page? As far as I have seen there is not a single article / page / blog that talks about adding a machineKey element to your web.config for your custom membership provider to be able to work!</p>\n\n<p><strong>UPDATE 1</strong>: Adding hashAlgorithmType=\"SHA1\" works as well: </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;membership defaultProvider=\"MyCustomMembershipProvider\" hashAlgorithmType=\"SHA1\"&gt;\n</code></pre>\n\n<p>Funny thing though is that MSDN says SHA1 is the default!?</p>\n\n<p>hashAlgorithmType\nOptional String attribute.\nSpecifies the name of the encryption algorithm that is used to hash password values.\nThe value of this attribute corresponds to the name attribute of a nameEntry element in the cryptoNameMapping configuration section. For information about specifying a custom hash algorithm, see Mapping Algorithm Names to Cryptography Classes.\n<strong>The default is SHA1</strong>.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","uiculture"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13161249,"title":"mvc load view on culture","body":"<p>I don't seem to be able to find much on this. Is there a way I can have different views per culture? Is there something built in mvc3 for this? Is there anything out there about this? I don't want to use res files for whole pages, only for validation and such. </p>\n"},{"tags":["html","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":34,"score":-1,"question_id":13151222,"title":"Browser compatability for MVC3 Application","body":"<p>I'm using Jqgrid in my pages. It's going to the right side corner of screen when viewed in IE but for Chrome and Mozila it's fine.</p>\n\n<p>Please help me to fix this. I'm new to MVC3, JQGrid and also to CSS.</p>\n\n<p>This is my the <code>&lt;head/&gt;</code> section of my code. I'm planning on including this in all the pages of my application:</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html lang=\"en\" xmlns=\"http://www.w3.org/1999/xhtml\" &gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" /&gt;\n&lt;title&gt;@ViewBag.Title&lt;/title&gt;\n&lt;link href=\"../../Content/css/bootstrap.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"../../Content/css/jquery-ui.css\" /&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"../../Content/css/ui.jqgrid.css\" /&gt;\n &lt;script type=\"text/javascript\" src=\"../../Scripts/js/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"../../Scripts/js/bootstrap-dropdown.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"../../Scripts/js/jquery-ui.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"../../Scripts/js/grid.locale-en.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"../../Scripts/js/jquery.jqGrid.src.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","drop-down-menu"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":197,"score":0,"question_id":7860305,"title":"How to internationalize DropDownList items using Razor","body":"<p>We are working on an MVC website where some list have user and system values. So, system items need to be internationalized to display in the user language, and user items are already in the user language.</p>\n\n<p>Those system items have a flag called \"<code>IsSystem</code>\" to differenciate the ones we need to internationalize. This flag also mean that the user cannot update or delete those items.</p>\n\n<p>Well, we are using <code>@Html.DropDownList</code> to render this DropDownList... so I don't find how to step in the middle of dropdownlist loading logic... in order to place an <code>if</code> statement checking for the <code>IsSystem</code> flag and getting the correct text from resource files.</p>\n\n<p>Thanks for any idea on how to handle this...</p>\n\n<p><strong>EDIT:</strong> </p>\n\n<p><strong>Controller code:</strong></p>\n\n<p><code>ViewBag.idTaskType = new SelectList(db.TaskTypes, \"idTaskType\", \"Name\");</code></p>\n\n<p>where <code>db</code> is Context from EntityFramework</p>\n\n<p><strong>View Code:</strong></p>\n\n<pre><code>@Html.DropDownList(\"idTaskType\", String.Empty)\n</code></pre>\n"},{"tags":["asp.net-mvc-3","web-deployment-project"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13151302,"title":"Web application works on web server but gives error from other machine","body":"<p>I have an ASP.Net MVC 3 application. I have created a setup for it and installed on my webserver.</p>\n\n<p>When I access the application from a web browser at <code>\"http://localhost/myapp\"</code>, it works.</p>\n\n<p>But when I tried from another machine, like <code>\"http://mywebserver/myapp\"</code> it's giving an error:</p>\n\n<blockquote>\n  <p>The model item passed into the dictionary is of type 'System.Web.Mvc.HandleErrorInfo', but this dictionary requires a model item of type myapp.Models.ErrorModel'.`\n  <br/></p>\n</blockquote>\n"},{"tags":["c#","javascript","ajax","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13160183,"title":"How can I remove a item from my session[\"cart\"] on a button click in my view?","body":"<p>These are the two actionresults I use for my cart:</p>\n\n<p>The first action I am adding the productids to my session cart by using ajax:</p>\n\n<pre><code>public ActionResult AddToCart(int ProductImageId)\n{\n    List&lt;int&gt; cart = (List&lt;int&gt;)Session[\"cart\"];\n    if (cart == null)\n    {\n        cart = new List&lt;int&gt;();\n    }\n    cart.Add(ProductImageId);\n\n    Session[\"cart\"] = cart;\n\n    return new JsonResult() { Data = new { Status = \"Success\" } };\n}\n</code></pre>\n\n<p>The second action I am filling it to my model so I can use it in my view:</p>\n\n<pre><code>public ActionResult ShoppingCart()\n        {\n        var cart = Session[\"cart\"] as List&lt;int&gt;;\n        var products = cart != null ? cart.Select(id =&gt; \n             {\n                 var productImage = repository.GetProductByID(id);\n                 return new ProductsViewModel\n                    {\n                        Name = productImage.Products.Name,\n                        Description = productImage.Products.Description.Substring(0, productImage.Products.Description.IndexOf(\".\") + 1),\n                        price = productImage.Products.Price,\n                        ProductId = productImage.Products.Id,\n                        Image = productImage.ImageUrl,\n                        ProductImageId = productImage.Id\n                    };\n             }) : new List&lt;ProductsViewModel&gt;();\n\n      return View(products);\n        }\n</code></pre>\n\n<p>Right now I have a view that is displaying the products in the shoppingcart view.</p>\n\n<p>Each product that is displayed have a button that says \"Delete\"</p>\n\n<p>My question is how can I delete the product from the session cart in the best way?</p>\n\n<p>How should the Actionresult look like?</p>\n\n<p>I have created an Ajax script to gets the ID of the product that needs to be deleted when someone click on the delete button here it is:</p>\n\n<pre><code> $(function () {\n            $(\".a\").live(\"click\", function () {\n                var $this = $(this),\n            ProductImageId = $this.data('ProductImageId');\n                $.ajax({\n                    url: '/Home/Action',  // &lt;- I have not created a actionresult yet\n                    type: \"post\",\n                    cache: false,\n                    data: { ProductImageId: ProductImageId },\n                    success: function (data) {\n                        data = eval(data);\n                        $this.addClass('productSelected');\n                    },\n                    error: function (result) {\n                        $(\".validation-summary-errors\").append(\"&lt;li&gt;Error connecting to server.&lt;/li&gt;\");\n                    }\n\n                });\n            });\n\n        });\n</code></pre>\n\n<p>If I am thinkin right with the javascript, how should the actionresult look like if I want delete the product by the ID I recieved?</p>\n\n<p>I guess It should look something like this:</p>\n\n<pre><code>public ActionResult DeleteProductFromCart(int ProductImageId)\n{\n // code..\n}\n</code></pre>\n\n<p>If I am still thinkin right how should I code inside the brackets on <code>DeleteProductFromCart</code>?</p>\n\n<p>Any kind of help is appreciated.</p>\n"},{"tags":["c#",".net","asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13159887,"title":"Partial View and Model not working","body":"<p>I\"m working in MVC 3 with Razor views.  I've created a page that calls a partial view </p>\n\n<pre><code>@Html.Partial(\"_FeaturedRatesBox\")\n</code></pre>\n\n<p>which looks like this:</p>\n\n<pre><code>@model IEnumerable&lt;AppleWeb.Models.RateViewer&gt;\n\n&lt;div class=\"col\"&gt;\n&lt;h3&gt;Today's Featured Rates&lt;/h3&gt;\n&lt;form method=\"post\" action=\"\"&gt;\n  &lt;div class=\"tabber\"&gt;\n    &lt;ul class=\"tabs unstyled\"&gt;\n      &lt;li class=\"selected\"&gt;&lt;a href=\"#tab1\"&gt;Loans&lt;/a&gt;&lt;/li&gt;\n      &lt;li&gt;&lt;a href=\"#tab2\"&gt;Deposits&lt;/a&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n    &lt;div class=\"tab\" id=\"tab1\"&gt;\n    @foreach (var item in Model)\n    {\n        &lt;div class=\"rate\"&gt; &lt;span class=\"left\"&gt;@item.AccountName &lt;br /&gt;\n        &lt;/span&gt; &lt;span class=\"right\"&gt; As low as &lt;span class=\"percent\"&gt;@item.Rate&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;\n        &lt;!-- end of rate --&gt;\n    }\n    &lt;/div&gt;\n    &lt;!-- end of tab --&gt;\n    &lt;div class=\"tab\" id=\"tab2\"&gt; Loremipsum\n    &lt;/div&gt;\n    &lt;!-- end of tab --&gt;\n    &lt;button type=\"submit\" class=\"btn alignright\"&gt;Apply Now&lt;/button&gt;\n  &lt;/div&gt;\n  &lt;!-- end of tabber --&gt;\n&lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>and the <code>rateviewer.cs</code> model looks like this:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Data;\nusing System.Data.EntityModel;\nusing AppleWeb.Models;\n\nnamespace AppleWeb.Models\n{\n    public class RateViewer\n    {\n        private PublicWebEntities pubDB = new PublicWebEntities();\n        public virtual IEnumerable&lt;DepositRate&gt; FeaturedRatesDeposit()\n        {\n            var data = from item in pubDB.DepositRates\n                       where item.Featured.Equals(true)\n                       select item;\n            return data.ToList();\n        }\n    }\n}\n</code></pre>\n\n<p>It errors out on the line calling the partial view and says</p>\n\n<blockquote>\n  <p>CS1061: 'AppleWeb.Models.RateViewer' does not contain a definition for 'AccountName' and no extension method 'AccountName' accepting a first argument of type 'AppleWeb.Models.RateViewer' could be found (are you missing a using directive or an assembly </p>\n</blockquote>\n\n<p>Well AccountName and Rate are both entity names for the DepositRates Entity Object.  From the DataModel.Designer file:</p>\n\n<pre><code>public static DepositRate CreateDepositRate(global::System.Int32 rateID, global::System.String accountName, global::System.Double rate, global::System.Double aPY, global::System.Int16 sortingOrder)\n{\n    DepositRate depositRate = new DepositRate();\n    depositRate.RateID = rateID;\n    depositRate.AccountName = accountName;\n    depositRate.Rate = rate;\n    depositRate.APY = aPY;\n    depositRate.SortingOrder = sortingOrder;\n    return depositRate;\n}\n</code></pre>\n\n<p>I'd hope to make this work as such, because then I can use this model elsewhere on the site.  </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","namespaces"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":1,"view_count":1618,"score":4,"question_id":4798293,"title":"How to alias a type with a using directive in my Razor view?","body":"<p>I need to alias a type with a <code>using</code> directive, which is normally done like so:</p>\n\n<pre><code>using LocalResources = Resources.Admin.SomeResource;\n</code></pre>\n\n<p>How can I do this inside my Razor view so that I can then use it like <code>@LocalResources.FirstName</code>?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","validation","qtip"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":1801,"score":4,"question_id":7017030,"title":"ASP.NET MVC Validation Using qTip jQuery Plugin","body":"<p>I am using the solution found <a href=\"http://stackoverflow.com/questions/6802045/integrating-qtip-with-mvc3-and-jquery-validation-errorplacement\">here</a> to show client side validation errors in a tooltip using the qTip jQuery plugin.  This solution works great for client side validation but I would love to able to display server side validation errors in the same way.  Does anyone know how to show server side validation errors in tooltips utilizing qTip?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":22,"score":-2,"question_id":13159061,"title":"how read web page of project to Variable?","body":"<p>how read web page of project to Variable? because I want to do pdf using itextsharp</p>\n"},{"tags":["asp.net","asp.net-mvc-3","entity-framework-4.1"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13155078,"title":"Entity Framework 4.1 - select Many to Many Association","body":"<p>I use Entity Framwork 4.1 and MVC 3. My question is about Join tables in Entity Framework.\nI created three tables</p>\n\n<ol>\n<li>User       - UserId, Username </li>\n<li>Role       - Role Id, Rolename    </li>\n<li><strong>UserInRoles- UserId, RoleId</strong></li>\n</ol>\n\n<p>I pulled these tables to my edmx file,\nOnly two tables appear i.e. the User and Role with a Many to Many Association between two.</p>\n\n<p>If I want to get a user's role from UserInRoles table, What is the approach?</p>\n\n<p>I did something like</p>\n\n<pre><code>var result = (from ar in roles\n                          from au in users\n                          where au.UserName == username\n                          select new {});\n</code></pre>\n\n<p>This is not working. Please help.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","iis7","http-status-code-401"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1329,"score":1,"question_id":10196991,"title":"MVC 3 401 Unauthorized on hosting server","body":"<p>I have an MVC 3 application that is giving me a 401 error when I try and access it from the remote server, but when I run it from my local computer it runs with out any error.</p>\n\n<p>The remote server has IIS 7 configured to allow both Forms and Anonymous access and successfully serves static files (content files), it's only when I try and access the MVC application that I'm getting issues.</p>\n\n<p>When I browse to the MVC application, I get a prompt that says, \"Windows Security - The server  at  requires a username and password.  Warning: This server is requesting that your username and password be sent in an insecure manner (basic authentication without a secure connection).\"</p>\n\n<p>I've tried entering all the passwords I can think of, and nothing give me access.</p>\n\n<p>When I click cancel, I get a server error that says, \"401 - Unauthorized: Access is denied due to invalid credentials. You do not have permission to view this directory or page using the credentials that you supplied.\" and I've been redirected to the <code>LogOn</code> page</p>\n\n<p>My Web.config file looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt; \n&lt;!-- \n  For more information on how to configure your ASP.NET application, please visit \n  http://go.microsoft.com/fwlink/?LinkId=152368 \n  --&gt; \n&lt;configuration&gt; \n  &lt;configSections&gt; \n    &lt;section name=\"razorJSSettings\" type=\"RazorJS.Configuration.RazorJSSettings, RazorJS\" /&gt; \n  &lt;/configSections&gt; \n  &lt;connectionStrings&gt; \n    &lt;!--&lt;add name=\"ApplicationServices\" \n         connectionString=\"data source=.\\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true\" \n         providerName=\"System.Data.SqlClient\" /&gt;--&gt; \n    &lt;add name=\"ApplicationServices\" connectionString=\"Data Source=SOURCE; Initial Catalog=thedb; User ID=thedbuser; Password='thedbuserpassword';\" /&gt; \n    &lt;add name=\"GestmeDataContext\" connectionString=\"metadata=res://*/Models.Gestme.csdl|res://*/Models.Gestme.ssdl|res://*/Models.Gestme.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;data source=SOURCE;initial catalog=thedb;persist security info=True;user id=thedbuser;password=thedbuserpassword;multipleactiveresultsets=True;App=EntityFramework&amp;quot;\" providerName=\"System.Data.EntityClient\" /&gt; \n  &lt;/connectionStrings&gt; \n  &lt;appSettings&gt; \n    &lt;add key=\"webpages:Version\" value=\"1.0.0.0\" /&gt; \n    &lt;add key=\"ClientValidationEnabled\" value=\"true\" /&gt; \n    &lt;add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" /&gt; \n  &lt;/appSettings&gt; \n  &lt;system.web&gt; \n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt; \n      &lt;assemblies&gt; \n        &lt;add assembly=\"System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt; \n        &lt;add assembly=\"System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt; \n        &lt;add assembly=\"System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt; \n        &lt;add assembly=\"System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt; \n        &lt;add assembly=\"System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt; \n        &lt;add assembly=\"System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" /&gt; \n      &lt;/assemblies&gt; \n    &lt;/compilation&gt; \n    &lt;customErrors mode=\"Off\" /&gt; \n    &lt;authentication mode=\"Forms\"&gt; \n      &lt;forms loginUrl=\"~/Account/LogOn\" timeout=\"2880\" /&gt; \n    &lt;/authentication&gt; \n    &lt;membership&gt; \n      &lt;providers&gt; \n        &lt;clear /&gt; \n        &lt;add name=\"AspNetSqlMembershipProvider\" type=\"System.Web.Security.SqlMembershipProvider\" connectionStringName=\"ApplicationServices\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\" /&gt; \n      &lt;/providers&gt; \n    &lt;/membership&gt; \n    &lt;profile&gt; \n      &lt;providers&gt; \n        &lt;clear /&gt; \n        &lt;add name=\"AspNetSqlProfileProvider\" type=\"System.Web.Profile.SqlProfileProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt; \n      &lt;/providers&gt; \n    &lt;/profile&gt; \n    &lt;roleManager enabled=\"true\"&gt; \n      &lt;providers&gt; \n        &lt;clear /&gt; \n        &lt;add connectionStringName=\"ApplicationServices\" applicationName=\"/\" name=\"AspNetSqlRoleProvider\" type=\"System.Web.Security.SqlRoleProvider\" /&gt; \n      &lt;/providers&gt; \n    &lt;/roleManager&gt; \n    &lt;pages&gt; \n      &lt;namespaces&gt; \n        &lt;add namespace=\"System.Web.Helpers\" /&gt; \n        &lt;add namespace=\"System.Web.Mvc\" /&gt; \n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt; \n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt; \n        &lt;add namespace=\"System.Web.Routing\" /&gt; \n        &lt;add namespace=\"System.Web.WebPages\" /&gt; \n      &lt;/namespaces&gt; \n    &lt;/pages&gt; \n    &lt;httpHandlers&gt; \n      &lt;add path=\"razorjs.axd\" verb=\"GET\" type=\"RazorJS.RazorJSHandler\" /&gt; \n    &lt;/httpHandlers&gt; \n  &lt;/system.web&gt; \n  &lt;system.webServer&gt; \n    &lt;httpErrors errorMode=\"Detailed\" /&gt;\n    &lt;asp scriptErrorSentToBrowser=\"true\"/&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt; \n    &lt;modules runAllManagedModulesForAllRequests=\"true\" /&gt; \n    &lt;handlers&gt; \n      &lt;add name=\"RazorJSHandler\" path=\"razorjs.axd\" verb=\"GET\" type=\"RazorJS.RazorJSHandler\" /&gt; \n    &lt;/handlers&gt; \n  &lt;/system.webServer&gt; \n  &lt;runtime&gt; \n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt; \n      &lt;dependentAssembly&gt; \n        &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\" /&gt; \n        &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"3.0.0.0\" /&gt; \n      &lt;/dependentAssembly&gt; \n      &lt;dependentAssembly&gt; \n        &lt;assemblyIdentity name=\"Newtonsoft.Json\" publicKeyToken=\"30ad4fe6b2a6aeed\" culture=\"neutral\" /&gt; \n        &lt;bindingRedirect oldVersion=\"0.0.0.0-4.0.8.0\" newVersion=\"4.0.8.0\" /&gt; \n      &lt;/dependentAssembly&gt; \n    &lt;/assemblyBinding&gt; \n  &lt;/runtime&gt; \n  &lt;razorJSSettings handlerPath=\"~/razorjs.axd\"&gt; \n    &lt;!-- If empty all paths are valid --&gt; \n    &lt;allowedPaths&gt; \n      &lt;add path=\"~/Scripts\" /&gt; \n    &lt;/allowedPaths&gt; \n  &lt;/razorJSSettings&gt; \n&lt;/configuration&gt; \n</code></pre>\n\n<p>What are all the issues that could cause 401 errors to be returned from the server?  Could it be the connection from the database to the server or the <code>aspnet_*</code> tables?  </p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","forms-authentication"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":829,"score":0,"question_id":7975311,"title":"Authorize attribute on Ajax Action methods in controller","body":"<p>I was trying to authorize ajax action methods in my MVC3 application. The problem occurs when the user session expires and an ajax action method is asked to execute. The asp.net Authentication system sends 302 redirect instead of sending 401 which seems logical for non-ajax requests. But with Ajax it all gets messed up quickly. So I decided to follow the approach suggested at <a href=\"http://stackoverflow.com/questions/3431343/asp-net-mvc-forces-an-ajax-request-be-redirected-to-the-login-page-when-the-form\">ASP.NET MVC forces an AJAX request be redirected to the login page when the FormsLogin session is no longer active</a> . \n   Basically, at the end of request we check whether the request is an ajax request and there is a redirect (302 response). If it is then we replace the response code from 302 to 401. Accordingly in the javascript we check for 401 and perform redirection from there. Here is the basic code that I have put up</p>\n\n<p>In Global.asax.cs</p>\n\n<pre><code>    protected void Application_EndRequest() {\n        var context = new HttpContextWrapper(Context);\n        // If we're an ajax request, and doing a 302, then we actually need to do a 401\n        if (Context.Response.StatusCode == 302 &amp;&amp; context.Request.IsAjaxRequest()) {\n            Context.Response.Clear();\n            Context.Response.StatusCode = 401;\n        }\n    }\n</code></pre>\n\n<p>In JQuery global error handler (included in asp.net mvc master page : _Layout.cshtml)</p>\n\n<pre><code>$(document).ajaxError(function (event, jqXHR, ajaxSettings, thrownError) {\n    if (jqXHR.status == 401) {\n        window.location.replace(loginUrl);\n    }\n});\n</code></pre>\n\n<p>I have just quickly tested this code and it seems to work fine. Is there any potential problem with this code. I am a relatively novice programmer as far as asp.net mvc and jquery are concerned, so I thought I would ask for other opinions before actually implementing the code. Any suggestions, I will be grateful.</p>\n\n<p>regards,\nNirvan.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-partialview"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13149246,"title":"Action that returns partial view of all the items in my Session[\"cart\"]","body":"<p>With Ajax I am able to add ProductIDs to my cart list in my action AddToCart.</p>\n\n<p>This is the code for that:</p>\n\n<pre><code>public ActionResult AddToCart(int productID)\n{\n    List&lt;int&gt; cart = (List&lt;int&gt;)Session[\"cart\"];\n    if (cart == null){\n       cart = new List&lt;int&gt;();\n    }\n    cart.Add(productID);\n\n    Session[\"cart\"] = cart;\n\n    return new JsonResult() { Data = new { Status = \"Success\" } };\n}\n</code></pre>\n\n<p>In my repository I have this following LINQ method to grab the details on the product by ID:</p>\n\n<pre><code>public Products GetProductByID(int id)\n{\n    return db.Products.SingleOrDefault(s =&gt; s.Id == id);\n}\n</code></pre>\n\n<p>Products have Name, Description and Price as attributes.</p>\n\n<p>I have a ViewModel that use for model-binding:</p>\n\n<pre><code>public class ProductsViewModel\n{\n    public string Description { get; set; }\n    public string Name { get; set; }\n    public double price { get; set; }\n    public string Image { get; set; }\n    public int ProductId { get; set; }\n}\n</code></pre>\n\n<p>I have another Viewmodel that holds this ProductsViewModel, Its the ProductList that I loop thru with foreach:</p>\n\n<pre><code>public class HomeIndexViewModel\n    {\n        public List&lt;ProductsViewModel&gt; Productlist { get; set; }\n    }\n</code></pre>\n\n<p>Now I need to create a action ie ShoppingCart which should return a partial view of all items in the Session[\"cart\"]. So I can display them in my view with the products details</p>\n\n<p>the action should not need any parameter. It will just look into session and return back a model with the list of products selected.</p>\n\n<p>Something im 100% sure of is that inside the ShoppingCart View I will 100% use following code line:</p>\n\n<pre><code>@model AvanShop.ViewModels.HomeIndexViewModel\n</code></pre>\n\n<p>and then do a foreach loop that looks like this:</p>\n\n<pre><code> @foreach (var item in Model.Productlist)\n            {\n             code to display the products that are inside the cart  \n            }\n</code></pre>\n\n<p>This is an example on how I did my Action index that displays all of the products in my Index view.</p>\n\n<pre><code>public ActionResult Index()\n        {\n            var Productlist = repository.GetAllProducts();\n            var model = new HomeIndexViewModel()\n            {\n                Productlist = new List&lt;ProductsViewModel&gt;()\n            };\n\n            foreach (var Product in Productlist)\n            {\n                FillProductToModel(model, Product);\n            }\n            return View(model);\n        }\n\nprivate void FillProductToModel(HomeIndexViewModel model, ProductImages productimage)\n{\n    var productViewModel = new ProductsViewModel\n    {\n\n        Description = productimage.Products.Description,\n        ProductId = productimage.Products.Id,\n        price = productimage.Products.Price,\n        Name = productimage.Products.Name,\n        Image = productimage.ImageUrl,\n    };\n    model.Productlist.Add(productViewModel);\n}\n</code></pre>\n\n<p>I have no idea how do this, any tips or help is appreciated</p>\n"},{"tags":["asp.net","asp.net-mvc","iis6","asp.net-mvc-3"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":7901,"score":2,"question_id":4186695,"title":"mvc3 rc deploy on iis6 - giving 403 Forbidden error","body":"<p>Deployed a very simple MVC3 RC app to an iis 6/windows 2003 server, and just getting a 403 forbidden error when trying to accesss the root. Right now the app is only one page, so no others to try out. </p>\n\n<p>I noticed there is no longer a default.aspx in the root to handle default requests, could this maybe be the problem? or is there some special config needed for iis6? </p>\n"},{"tags":["mysql","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13150149,"title":"Merge 3 SQL Queries, whats the right join?","body":"<p>I have a couple queries i would like to merge into 1 query and am not sure what the right join would be.</p>\n\n<p>This query gets all the arcs that match the pid:</p>\n\n<pre><code>var arcs = db.Query(\"SELECT arc FROM comics WHERE `publisher`=\" + pid + \" GROUP BY arc\").ToList();\n</code></pre>\n\n<p>This query gets the title of the arc from the arcs table:</p>\n\n<pre><code>var ar = db.QuerySingle(\"SELECT title FROM arcs WHERE id=\" + arc.arc);\n</code></pre>\n\n<p>This Query is used to get the total issues that match arc.arc and pid:</p>\n\n<pre><code>var issues = db.Query(\"SELECT id FROM comics WHERE arc=\" + arc.arc + \" AND publisher=\" + pid);\n</code></pre>\n\n<p>The Whole Code:</p>\n\n<pre><code>@{\n    var pid = Request[\"pid\"];\n\n    var db = Database.Open(\"quickly\");\n    var publisher = db.QuerySingle(\"SELECT * FROM publishers WHERE id=@0\",  pid);\n\n    Page.Title = publisher.name + \" @\";\n\n    var arcs = db.Query(\"SELECT arc FROM comics WHERE `publisher`=\" + pid + \" GROUP BY arc\").ToList();\n}\n\n&lt;div class=\"post\"&gt;\n    &lt;div class=\"post-bgtop\"&gt;\n        &lt;div class=\"post-bgbtm\"&gt;\n            &lt;h2 class=\"title\"&gt;@publisher.name&lt;/h2&gt;\n            &lt;div class=\"entry\"&gt;\n                &lt;p&gt;\n                    &lt;table width=\"100%\" border=\"0\"&gt;\n                        &lt;thead&gt;\n                            &lt;tr&gt;\n                                &lt;th align=\"left\"&gt;Title&lt;/th&gt;\n                                &lt;th&gt;Issues&lt;/th&gt;\n                            &lt;/tr&gt;\n                        &lt;/thead&gt;  \n                        &lt;tbody&gt;\n                            @foreach (var arc in arcs) {\n                                var ar = db.QuerySingle(\"SELECT title FROM arcs WHERE id=\" + arc.arc);\n                                var issues = db.Query(\"SELECT id FROM comics WHERE arc=\" + arc.arc + \" AND publisher=\" + pid);\n                            &lt;tr&gt;\n                                &lt;td&gt;&lt;a href=\"@Href(\"~/Comics/Arcs?aid=\" + arc.arc)\"&gt;@ar.title&lt;/a&gt;&lt;/td&gt;\n                                &lt;td align=\"center\"&gt;@issues.Count&lt;/td&gt;\n                            &lt;/tr&gt;\n                            }\n                        &lt;/tbody&gt;     \n                    &lt;/table&gt;\n                &lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Table Structure:</p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS `arcs` (\n  `id` int(255) NOT NULL AUTO_INCREMENT,\n  `title` varchar(255) NOT NULL,\n  `plot` longtext NOT NULL,\n  `added` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `title` (`title`)\n) ENGINE=InnoDB  DEFAULT CHARSET=latin1;\n\nCREATE TABLE IF NOT EXISTS `comics` (\n  `id` varchar(255) NOT NULL,\n  `arc` int(255) NOT NULL,\n  `title` varchar(255) NOT NULL,\n  `issue` decimal(5,1) DEFAULT NULL,\n  `price` decimal(10,2) NOT NULL,\n  `plot` longtext NOT NULL,\n  `publisher` int(255) NOT NULL,\n  `isbn` varchar(255) NOT NULL,\n  `published` date NOT NULL,\n  `cover` varchar(255) NOT NULL DEFAULT './images/nopic.jpg',\n  `added` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `views` int(255) NOT NULL DEFAULT '0',\n  `active` int(1) NOT NULL DEFAULT '0',\n  `owned` int(1) NOT NULL DEFAULT '0',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `arc` (`arc`,`title`,`issue`,`publisher`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\n\nCREATE TABLE IF NOT EXISTS `publishers` (\n  `id` int(255) NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) NOT NULL,\n  `plot` longtext NOT NULL,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `name` (`name`)\n) ENGINE=InnoDB  DEFAULT CHARSET=latin1;\n</code></pre>\n"},{"tags":["asp.net-mvc","json","asp.net-mvc-3","file-upload"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1438,"score":2,"question_id":4896353,"title":"MVC Return Json result","body":"<p>I have a controller that uploads a file. I would like to return a json result with bool success (if successfully uploaded otherwise false) and message (this could be error message that occured OR link to a file OR link to an image, depending on what was uploaded).</p>\n\n<p>What's the best way to approach this?</p>\n\n<p>I have this</p>\n\n<pre><code>public class UploadedFile\n{\n    public bool Success { get; set; }\n\n    public string Message { get; set; }\n}\n</code></pre>\n\n<p>then In my controller I would set Success to true/or/false and Message to <code>&lt;a href</code> OR <code>&lt;img</code></p>\n\n<p>am i on the right track?</p>\n\n<p>How would i then parse this in the view so that when image it will show an image, if link show a link, if error simply alert error.\nthanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","uiculture"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1206,"score":1,"question_id":4954330,"title":"MVC 3 building dynamic meta keywords meta description functionality for multi-culture site","body":"<p>I need to create db driven meta keywords/description. I would store these records in a database, xml format i presume; since it would be per culture.</p>\n\n<p>How would i go about doing this?</p>\n\n<p>any feedback, suggestions, help, greatly appreciated.\nthanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","entity-framework-4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1100,"score":1,"question_id":5040229,"title":"MVC insert/update in controller","body":"<p>I have the following in my controller (to insert/or/update news entity). I'm using EF POCO</p>\n\n<pre><code>       public class NewsViewModel\n       {\n           /// &lt;summary&gt;\n           /// Initializes a new instance of the &lt;see cref=\"NewsViewModel\"/&gt; class. \n           /// &lt;/summary&gt;\n           public NewsViewModel()\n           {\n               this.News = new News();\n               this.Categories = new List&lt;int&gt;();\n           }\n\n           /// &lt;summary&gt;\n           /// Gets or sets news.\n           /// &lt;/summary&gt;\n           public News News { get; set; }\n\n           /// &lt;summary&gt;\n           /// Gets or sets categories.\n           /// &lt;/summary&gt;\n           public IEnumerable&lt;SelectListItem&gt; SelectCategories { get; set; }\n\n           /// &lt;summary&gt;\n           /// Gets or sets GroupIn.\n           /// &lt;/summary&gt;\n           public IEnumerable&lt;int&gt; Categories { get; set; }\n    }\n\n\n    [HttpPost]\n    public ActionResult Edit(NewsViewModel row)\n    {\n        if (!ModelState.IsValid)\n        {\n            return View(row);\n        }\n\n        // Insert record\n        if (row.News.NewsId == 0)\n        {\n            foreach (var item in row.Categories)\n            {\n                row.News.NewsCategory.Add(this.NewsCategoryRepository.GetRow(item));\n            }\n\n            this.NewsRepository.Insert(row.News);\n        }\n        else\n        {\n            // Update\n            var updateRow = this.NewsRepository.GetRow(row.News.NewsId);\n            updateRow.Title = row.News.Title;\n            updateRow.ShortDescription = row.News.ShortDescription;\n            updateRow.IsActive = row.News.IsActive;\n            updateRow.PostDate = row.News.PostDate;\n            updateRow.ArchiveDate = row.News.ArchiveDate;\n            updateRow.LongDescription = row.News.LongDescription;\n            updateRow.NewsCategory.Clear();\n            foreach (var item in row.Categories)\n            {\n                updateRow.NewsCategory.Add(this.NewsCategoryRepository.GetRow(item));\n            }\n\n\n            this.NewsRepository.Update(updateRow);\n        }\n\n        this.NewsRepository.Context.SaveChanges();\n        return this.RedirectToAction(\"Index\");\n    }\n</code></pre>\n\n<ol>\n<li>Is this the best way to perform update? that is to clear all categories then re-insert and update?</li>\n<li>When updating is there a cleaner way than to pull out updateRow, reassing values and update it?</li>\n</ol>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":2905,"score":-1,"question_id":5078131,"title":"Print Page functionality in MVC","body":"<p>Anyone done this in MVC? any info would be great!.\nThanks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mail"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":239,"score":0,"question_id":5078161,"title":"Email a Friend functionality in MVC","body":"<p>Pretty much there would be an icon on the site. clicking it would bring up a pop up window with following fieds:</p>\n\n<ol>\n<li>Name</li>\n<li>Email</li>\n</ol>\n\n<p>you would then be able to fill out the page and an email would be sent to \"email\" provided in the \"Email\" field. The problem is: How do i know what page i'm on so that I can put it in the message?\nthanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":213,"score":0,"question_id":4866407,"title":"MVC3 Razorview Syntax","body":"<p>Can someone please tell me how to convert this to razor view syntax? </p>\n\n<pre><code>&lt;%= ViewData.Model.Firms.Count &gt; 0 ? Html.Pager(ViewData.Model.Firms.PageSize, ViewData.Model.Firms.PageNumber, ViewData.Model.Firms.TotalItemCount) : string.Empty%&gt;\n</code></pre>\n\n<p>thanks for help in advance.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":104,"score":0,"question_id":11754761,"title":"MVC get controller in helper class","body":"<p>I need to be able to get a controller name in my custom helper class. </p>\n\n<p>I have the following:</p>\n\n<ol>\n<li>Layout view which calls a controller: \"HelperController\", action: \"Menu\" like so:</li>\n</ol>\n\n<p><code>@Html.Action(\"Menu\", \"Helper\")</code></p>\n\n<ol>\n<li><p>This calls ActionResult and generages an html:</p>\n\n<pre><code>@model List&lt;MvcMenuItem&gt;\n@{\nLayout = null;\n}\n@{        \n@Html.Menu(this.ViewContext).ClientId(\"navMain\").AddRange(Model).Render()\n}\n</code></pre></li>\n<li><p>This calls \"<code>public static class MvcMenuExtensions</code>\" and in there (in my <code>Render()</code> method) I need to be able to get the controller name I'm currently in, NOT the controller name that is calling <code>MvcMenuExtensions</code></p></li>\n</ol>\n\n<p>I've tried this:</p>\n\n<pre><code>string controller = this.ViewContext.RouteData.Values[\"controller\"].ToString();\n</code></pre>\n\n<p>but this results in controller being \"<code>Helper</code>\" controller and not the current controller I'm in. Since this \"<code>ActionResult</code>\" is being called from anywhere on the page (it's in the layout).</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":321,"score":0,"question_id":5310606,"title":"Multistep form .net","body":"<p>I'm working in .net MVC3. I have a multi step form</p>\n\n<ol>\n<li>step1: fillin username, password, confirm password</li>\n<li>step2: fill in additional info</li>\n</ol>\n\n<p>problem:\nonce user fills in step1 he/she should not be able to go back. however there is always a case where user clicks browser 'back' button. in that case all the info (except password) is pre-filled. I want to aler user (in step2) when back button is clicked that none of the info in step 1 will be updated OR somehow disable back button. is that possible? what are some valid solutions?\nthanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","elmah"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":272,"score":2,"question_id":8892233,"title":"Elmah not logging 404 (missing files / images)","body":"<p>For some reason emlah is not logging missing images in my MVC3 app. Everything else like 'missing action' wrong url is ok. what could be the cause?\nthanks</p>\n\n<p>EDIT:</p>\n\n<p>I am running Integrated Mode and am NOT using built-in VS IIS.</p>\n\n<p><img src=\"http://i.stack.imgur.com/3Ct6f.png\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/ujEHe.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/QREqJ.png\" alt=\"enter image description here\"></p>\n\n<p>EDIT 2:</p>\n\n<p>Doesn't seem to log missing images if the images are mapped via virtual directory:\n<img src=\"http://i.stack.imgur.com/aSYbB.png\" alt=\"enter image description here\"></p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":1310,"score":7,"question_id":5114631,"title":"MVC site search functionality","body":"<p>i need a simple site search functionality for my mvc app. some of the pages are static and some dynamic (like news articles that are entered in cms). I would like the search to handle both. is this product any good? <a href=\"http://www.sitesearchasp.net\" rel=\"nofollow\">http://www.sitesearchasp.net</a> any other?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","validation"],"answer_count":1,"favorite_count":15,"up_vote_count":21,"down_vote_count":0,"view_count":6764,"score":21,"question_id":7025198,"title":"MVC3 custom validation: compare two dates","body":"<p>I've created a custom ValidationAttribute that compares 2 dates and makes sure that the second date is greater than the first:</p>\n\n<pre><code>public sealed class IsDateAfter : ValidationAttribute, IClientValidatable\n{\n    private readonly string testedPropertyName;\n    private readonly bool allowEqualDates;\n\n    public IsDateAfter(string testedPropertyName, bool allowEqualDates = false)\n    {\n        this.testedPropertyName = testedPropertyName;\n        this.allowEqualDates = allowEqualDates;\n    }\n\n    protected override ValidationResult IsValid(object value, ValidationContext validationContext)\n    {\n        var propertyTestedInfo = validationContext.ObjectType.GetProperty(this.testedPropertyName);\n        if (propertyTestedInfo == null)\n        {\n            return new ValidationResult(string.Format(\"unknown property {0}\", this.testedPropertyName));\n        }\n\n        var propertyTestedValue = propertyTestedInfo.GetValue(validationContext.ObjectInstance, null);\n\n        if (value == null || !(value is DateTime))\n        {\n            return ValidationResult.Success;\n        }\n\n        if (propertyTestedValue == null || !(propertyTestedValue is DateTime))\n        {\n            return ValidationResult.Success;\n        }\n\n        // Compare values\n        if ((DateTime)value &gt;= (DateTime)propertyTestedValue)\n        {\n            if (this.allowEqualDates)\n            {\n                return ValidationResult.Success;\n            }\n            if ((DateTime)value &gt; (DateTime)propertyTestedValue)\n            {\n                return ValidationResult.Success;\n            }\n        }\n\n        return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));\n    }\n\n    public IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n    {\n        var rule = new ModelClientValidationRule\n        {\n            ErrorMessage = this.ErrorMessageString,\n            ValidationType = \"isdateafter\"\n        };\n        rule.ValidationParameters[\"propertytested\"] = this.testedPropertyName;\n        rule.ValidationParameters[\"allowequaldates\"] = this.allowEqualDates;\n        yield return rule;\n    }\n</code></pre>\n\n<p>CalendarEntry class:\n...</p>\n\n<pre><code>public virtual DateTime StartDate { get; set; }\n\n[IsDateAfter(\"StartDate\", true, ErrorMessage=\"End date needs to be after start date\")]\npublic virtual DateTime EndDate { get; set; }\n</code></pre>\n\n<p>VIEW:</p>\n\n<pre><code>$.validator.unobtrusive.adapters.add(\n    'isdateafter', ['propertytested', 'allowequaldates'], function (options) {\n    options.rules['isdateafter'] = options.params;\n    options.messages['isdateafter'] = options.message;\n});\n$.validator.addMethod(\"isdateafter\", function(value, element, params) {\n    alert(params.propertytested);\n    var startdatevalue = $('input[name=\"' + params.propertytested + '\"]').val();\n    if (!value || !startdatevalue) return true;\n    return (params.allowequaldates) ? Date.parse(startdatevalue) &lt;= Date.parse(value) : Date.parse(startdatevalue) &lt; Date.parse(value);\n}, '');\n</code></pre>\n\n<p>This works fine when the <strong>CalendarEntry</strong> is not wrapped inside another class. HOWEVER, when I use a view model like so:</p>\n\n<pre><code>    public class TrainingDateEditViewModel\n    {\n        #region Properties\n\n        /// &lt;summary&gt;\n        /// Gets or sets CalendarEntry.\n        /// &lt;/summary&gt;\n        public CalendarEntry CalendarEntry { get; set; }\n....\n</code></pre>\n\n<p>The client validation no longer works because the html output produced is this:</p>\n\n<pre><code>&lt;input type=\"text\" value=\"\" name=\"CalendarEntry.EndDate\" id=\"CalendarEntry_EndDate\" data-val-isdateafter-propertytested=\"StartDate\" data-val-isdateafter-allowequaldates=\"True\" data-val-isdateafter=\"End date needs to be after start date\" data-val=\"true\"&gt;\n</code></pre>\n\n<p>And the </p>\n\n<pre><code>data-val-isdateafter-propertytested=\"StartDate\" and IT SHOULD BE: \"CalendarEntry.StartDate\".\n</code></pre>\n\n<p>How would I make it so that it would know to bind to \"CalendarEntry.StartDate\"\nrule.ValidationParameters[\"propertytested\"] = this.testedPropertyName; // HERE IT SHOULD BE FULL NAME??? HOW??</p>\n\n<p>thanks</p>\n"},{"tags":["asp.net-mvc-3","model-binding"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13120389,"title":"MVC3: How to bind querystring array onto model?","body":"<p>I have an action with no params. I have a form in a view which does a GET to this action.\nIn the action I instaniate an object (so I can get some defaults from DB) and then I use UpdateModel() on it which uses the DefaultModelBinder.</p>\n\n<p>So my model has the following property def:</p>\n\n<pre><code>public string[] AI { get; set; }\n</code></pre>\n\n<p>My querystring amongst other things from the form contains:</p>\n\n<pre><code>?AI=12-345&amp;AI=45-43&amp;AI=48-546\n</code></pre>\n\n<p>After the action calls UpdateModel() the AI property is null!\nHOWEVER if I change the action definition to:</p>\n\n<pre><code>MyAction(string[] AI)\n</code></pre>\n\n<p>Then the AI param is populated as I would have expect the models property to be. Is this a bug in the default model binder? I tried making the property <code>List&lt;string&gt;</code> but that didn't work either.</p>\n\n<p>Any ideas?</p>\n"},{"tags":[".net","asp.net-mvc","asp.net-mvc-3","sql-server-2008","entity-framework-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13156594,"title":"in MVC3 how to recreate the EdmMetaData Table in Sql Server?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/11215035/mvc3-edmmetadata-table-not-found\">MVC3 EDMmetadata table not found</a>  </p>\n</blockquote>\n\n\n\n<p>I downloaded the MvcMusicStore example from <a href=\"http://mvcmusicstore.codeplex.com\" rel=\"nofollow\">mvcmusicstore.codeplex.com</a> \nand I have deleted the EdmMetaData Table.</p>\n\n<p>Everytime that I run it, I get this error...</p>\n\n<blockquote>\n  <p>\"Model compatibility cannot be checked because the database does not\n  contain model metadata. Ensure that IncludeMetadataConvention has been\n  added to the DbModelBuilder conventions.\"</p>\n</blockquote>\n\n<p>how can I recreate that table?</p>\n"},{"tags":["asp.net-mvc-3","visual-studio-2010"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":165,"score":4,"question_id":10840263,"title":"Razor View Page cannot be added as a new Item - Visual Studio 2010 ","body":"<p>Background:\nI used to have VS2010 Professional. Upgraded to VS2010 Ultimate. Installed SP1. Installed MVC3, <a href=\"http://www.microsoft.com/en-us/download/details.aspx?id=1491\" rel=\"nofollow\">MVC3 Tools Update</a></p>\n\n<p>I'm currently working on some custom Orchard modules, and for some reason, I don't see Razor as an installed template. But if I fire up a new ASP.NET MVC3 app, I see it. Has anyone ran into this issue. I've tried uninstalling MVC3 and Tools Update. No luck. Is there something obvious I'm missing?</p>\n\n<p>MVC3 app - as you can see MVC3 View Page (Razor) is available...\n<img src=\"http://i.stack.imgur.com/5Da8x.png\" alt=\"enter image description here\"></p>\n\n<p>From an Orchard Module:\n<img src=\"http://i.stack.imgur.com/x5rku.png\" alt=\"enter image description here\"></p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","routes"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":13135633,"title":"File to define route in MVC3","body":"<p>I have this file :</p>\n\n<pre><code>&lt;fru&gt;\n &lt;url action=\"product\" controler=\"Home\" params=\"{id=123}\" &gt;this_is_the_an_arbitrary_url_of_a_product.html&lt;/url&gt;\n &lt;url action=\"customer\" controler=\"Home\" params=\"{id=445}\" &gt;this_is_the_an_arbitrary_url_of_a_customer.html&lt;/url&gt;\n... other urls ...\n&lt;/fru&gt;\n</code></pre>\n\n<p>I'm looking for binding this file or this object structure with the MVCHandler, in order to map the request to the good action with the params.\nIt's important for the url me that the urls doesn't respect any structure rules.</p>\n\n<p>Is there a  way to do this?</p>\n"},{"tags":["c#","ajax","asp.net-mvc","asp.net-mvc-3","session"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13156287,"title":"Why is my session cart list empty?","body":"<p>When I debugg my actionresult AddToCart. My cart gets a value of a productId which is working perfectly here it is:</p>\n\n<pre><code>public ActionResult AddToCart(int productID)\n    {\n        List&lt;int&gt; cart = (List&lt;int&gt;)Session[\"cart\"];\n        if (cart == null){\n           cart = new List&lt;int&gt;();\n        }\n        cart.Add(productID);\n\n        return new JsonResult() { Data = new { Status = \"Success\" } };\n    }\n</code></pre>\n\n<p>And I am using ajax to get the productID:</p>\n\n<pre><code>$(function () {\n            $(\".a\").live(\"click\", function () {\n                var $this = $(this),\n            productID = $this.data('productID');\n                $.ajax({\n                    url: '/Home/AddToCart',\n                    type: \"post\",\n                    cache: false,\n                    data: { productID: productID },\n                    success: function (data) {\n                        data = eval(data);\n                        $this.addClass('productSelected');\n                    },\n                    error: function (result) {\n                        $(\".validation-summary-errors\").append(\"&lt;li&gt;Error connecting to server.&lt;/li&gt;\");\n                    }\n\n                });\n            });\n\n        });\n</code></pre>\n\n<p>But when I implemented this actionresult my cart is null:</p>\n\n<pre><code>public ActionResult ShoppingCart()\n{\n    var cart = Session[\"cart\"] as List&lt;int&gt;;\n\n    var products = cart != null ? cart.Select(id =&gt; \n             {\n                 var product = repository.GetProductById(id);\n                 return new ProductsViewModel\n                    {\n                       Name = product.Name,\n                       Description = product.Description,\n                       price = product.Price\n                    }\n             }) : new List&lt;ProductsViewModel&gt;();\n\n    return PartialView(products);\n}\n</code></pre>\n\n<p>What am I doing wrong? Why is actionresult Shoppingcart have null values how is this happenin? When I debugg AddToCart, Cart gets a value and it gets added.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","error-handling"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13144031,"title":"Executing controller action from within Application_Error throws InvalidOperationException (View not found)","body":"<p>I am trying to install a nice global exception handling mechanism that centrally manages generic thrown exceptions, as well as 404, 500, ... errors; that is, without having to implement different error pages / error handling solutions for different errors.</p>\n\n<p>To that effect, I tried to <a href=\"http://stackoverflow.com/a/9026907/122764\">implement this example</a> for calling an ErrorsController from within the Application_Error method of the Global.asax.cs.</p>\n\n<p>However, when I run the code, I run into this exception:</p>\n\n<pre><code>System.InvalidOperationException was unhandled by user code\n  HResult=-2146233079\n  Message=The view 'NotFound' or its master was not found or no view engine supports the searched locations. The following locations were searched:\n~/Views/Errors/NotFound.aspx\n~/Views/Errors/NotFound.ascx\n~/Views/Shared/NotFound.aspx\n~/Views/Shared/NotFound.ascx\n/favicon.ico\n  Source=System.Web.Mvc\n  StackTrace:\n       at System.Web.Mvc.ViewResult.FindView(ControllerContext context)\n       at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)\n       at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)\n       at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass1a.&lt;InvokeActionResultWithFilters&gt;b__17()\n       at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)\n       at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass1a.&lt;&gt;c__DisplayClass1c.&lt;InvokeActionResultWithFilters&gt;b__19()\n       at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)\n       at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass1a.&lt;&gt;c__DisplayClass1c.&lt;InvokeActionResultWithFilters&gt;b__19()\n       at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)\n       at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass1a.&lt;&gt;c__DisplayClass1c.&lt;InvokeActionResultWithFilters&gt;b__19()\n       at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)\n       at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)\n       at System.Web.Mvc.Controller.ExecuteCore()\n       at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)\n       at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)\n       at Cider.MvcApplication.Application_Error(Object sender, EventArgs e) in c:\\Users\\cornelius.kopp\\Projects\\SD Cider\\Cider\\Global.asax.cs:line 88\n       at System.EventHandler.Invoke(Object sender, EventArgs e)\n       at System.Web.HttpApplication.RaiseOnError()\n  InnerException: \n</code></pre>\n\n<p>The interesting thing is that I use Razor as view engine and the template <em>definitely</em> exists. I implemented a custom <code>HandleErrorsAttribute</code> that called the ErrorsController and through that everything worked smoothly. Only when the (basically copy-and-pasted) code was called from the Application_Error method it failed.</p>\n\n<p>Trying to create an NotFound.aspx view in the project yielded the same exception, only that it only lists the favicon.ico as searched location.</p>\n\n<p>Moving the code into the Application_EndRequest, as originally written, yielded the same result</p>\n\n<p>Any explanation to this would be highly appreciated.</p>\n"},{"tags":["asp.net-mvc-3","viewmodel","ienumerable"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13148973,"title":"MVC3 Viewmodel and linq","body":"<p>In a web page I want to be able to return BlogCategoryName with the number of blogs in category. For example</p>\n\n<p>BlogNameX(3)<br>\nBlogNameY(4)<br>\n....</p>\n\n<p>I’m using the entity framework and have a blog category class    </p>\n\n<pre><code>namespace emoCard.Domain.Entities\n{\n   public class BlogCategory\n   {\n\n     public BlogCategory()\n     {\n        this.Blogs = new List&lt;Blog&gt;();\n     }\n\n     public int BlogCategoryID { get; set; }\n     public string BlogCategoryName { get; set; }\n     public string BlogCategoryDescription { get; set; }\n     public int BlogCategoryOrder { get; set; }\n\n     public List&lt;Blog&gt; Blogs { get; set; }\n\n    }\n}\n</code></pre>\n\n<p>I could setup a viewmodel along the lines of  </p>\n\n<pre><code>namespace emoCard.WebUI.Models\n{\n\n  public class BlogCategoryViewModel\n  {\n    public IEnumerable&lt;BlogCategory&gt; BlogCategories { get; set; }\n  }\n}\n</code></pre>\n\n<p>And then have a controller that looks like  </p>\n\n<pre><code>public PartialViewResult BlogCategories()\n    {\n\n        BlogCategoryViewModel viewModel = new BlogCategoryViewModel\n        {\n            BlogCategories = repository.BlogCategories.Include(b =&gt; b.Blogs)\n        };\n\n        return PartialView(viewModel);\n    }\n</code></pre>\n\n<p>I can then count the number of blogs in each category in the view.</p>\n\n<p>This works but I have a number of problems with this. These are:</p>\n\n<ul>\n<li>I need to pull back all the information (i.e. I don’t really need the blog information only the count). </li>\n<li>It doesn’t seem correct to calculate the count in the view.</li>\n</ul>\n\n<p>I think I need to change my viewmodel so that I can populate the blog categories and number of blogs associated with each category and then create a linq query that categories and blog count but not all blog information. I think the new viewmodel should be along the lines of</p>\n\n<pre><code>  public BlogCategoryMenuItem(BlogCategory blogCategories, int numberOfBlogs)\n  {\n    BlogCategories = blogCategories;\n    NumberOfBlogs = numberOfBlogs;\n\n  }\n\npublic class BlogCategoryViewModel\n{\n    public IEnumerable&lt;BlogCategoryMenuItem&gt; BlogCategoryMenuItem { get; set; }\n}\n</code></pre>\n\n<p>I have two questions:<br>\n1.  Is this the best way to solve the problem I have?<br>\n2.  How do I populate this viewmodel object using linq?<br>\nThanks for your help.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13154093,"title":"what should i add to get testmethod in visual studio 2010","body":"<p>[TestMethod] is not getting in intellisense it is showing in red colour.<br>\n  this is my controller   </p>\n\n<pre><code> [TestMethod]  \n public ActionResult Index()  \n {           \n    return View();    \n }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","azure-web-roles"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13131430,"title":"View Azure cloud service IIS logs","body":"<p>I have created a simple MVC3 site that displays data from a table in an Azure database. I have created a cloud service to run the site in and can publish it successfully. I have also run the site successfully in the Azure emulator.</p>\n\n<p>My problem is that when I select the page that displays the data there is an error as I get the default error page. I think I have the db connections set correctly but I cannot see any logs. So my questions are:</p>\n\n<ul>\n<li>Where are the IIS logs? I would like to see what the error is.</li>\n<li>Are there any other logs/diagnostics that I can use to see what the problem is?</li>\n</ul>\n\n<p>Thanks.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","datetime"],"answer_count":5,"favorite_count":4,"up_vote_count":8,"down_vote_count":0,"view_count":11285,"score":8,"question_id":7124434,"title":"Display only date and no time. C#","body":"<p>In MVC razor, I am putting current date in the database like this..</p>\n\n<pre><code>   model.Returndate = DateTime.Now.Date.ToShortDateString();\n</code></pre>\n\n<p>Since the database field is a datetime datatype and I am converting the current date to string format, this is not working.. how can I do this? I am doing the string format because I want the date in mm/dd/yyyy format and not in mm/dd/yyyy hh:mm:ss time format..</p>\n\n<p>EDIT:</p>\n\n<p>In the controller I have </p>\n\n<pre><code>        var model = new ViewModel();\n        model.ReturnDate = DateTime.Now;            \n        return PartialView(\"PartialView\", model);  \n</code></pre>\n\n<p>In the partialview, I have </p>\n\n<pre><code>   @Html.EditorFor(model =&gt; model.Returndate)\n</code></pre>\n\n<p>This is where its displaying the date as Date and Time together... I want just the date to be displayed. Not the time. I hope this edit explains better.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13153003,"title":"How can I convert a session variable to a string array?","body":"<p>I’m trying to store an array in a session variable then use it latter like this:</p>\n\n<pre><code>        Session[\"sessionVariable\"] = searchString;\n</code></pre>\n\n<p>Now here I’m trying to store the session variable into a string variable.</p>\n\n<pre><code>        String[] sv = Session[\"sessionVariable\"];\n</code></pre>\n\n<p>When I do I get his error.  </p>\n\n<p>Cannot explicitly convert type ‘Object’ to ‘String[]’, An explicit conversion exists, (are you mission a cast?)</p>\n\n<p>I’ve tried various conversions but can’t find the correct one.  Can you please help me to find the correct conversion?  Thanks.</p>\n"},{"tags":["asp.net-mvc-3","html-helper"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13152101,"title":"ASP.NET MVC - Get current controller and action name in helper","body":"<p>I'm trying to create custom html helper that will retrieve some text from XML file and render it on the view. XML is organized in hierarchy where top nodes represent controller names, following the action names and then individual keys. </p>\n\n<p>Goal is to accomplish syntax such as:</p>\n\n<pre><code>@Html.Show(\"Title\")\n</code></pre>\n\n<p>Where helper would infer controller name and action name from the view where it was called.</p>\n\n<p>Is there a way to get that information in the html helper extension method?</p>\n"},{"tags":["asp.net-mvc-3","attributes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13120173,"title":"Manager Attribute in MVC3","body":"<p>I want to manager the <code>Attribute</code> easier, so I'm finding the way control all <code>Attribute</code>.\nCurrently, each function in controller I registration one or many <code>Attribute</code>. \nEx:</p>\n\n<pre><code>[MaintenanceModeDenyAttribute]  \npublic ActionResult SaveGenericObject(GenericSaveObject saveObject)  {  }\n</code></pre>\n\n<hr>\n\n<pre><code>[MaintenanceModeDenyAttribute(\"New student\")]\npublic ActionResult ReturnGraduates() { }\n</code></pre>\n\n<p>How do manager all <code>Attribute</code> in a class, they can be applied for many functions of controller?\nWhen app start, <code>Attribute</code> class can registration.\nThank you. </p>\n"},{"tags":["c#","asp.net-mvc-3","dataannotations","unboxing","asp.net-mvc-views"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13093634,"title":"mvc3 Reflect data annotations off a concrete class from an inteface","body":"<p>I am trying to abstract my view model from various types of views.  The entire thing compiles without a issue but I am having issues with \"reflecting\" (formally known as unboxing) the data annotations.</p>\n\n<p>I have an interface:</p>\n\n<pre><code>public interface IPerson\n{\n    string FirstName { get;set;}\n    string LastName {get;set;}\n}\n</code></pre>\n\n<p>And I have two class which implement the interface as such:</p>\n\n<pre><code>public class Employee : IPerson\n{\n    [Required]\n    [Display(Description = \"Employee First Name\", Name = \"Employee First Name\")]\n    public string FirstName {get;set;}\n\n    [Required]\n    [Display(Description = \"Employee Last Name\", Name = \"Employee Last Name\")]\n    public string LastName {get;set;}\n\n    public int NumberOfYearsWithCompany {get;set;}\n}\n\npublic class Client : IPerson\n{\n    [Required]\n    [Display(Description = \"Your first Name\", Name = \"Your first Name\")]\n    public string FirstName {get;set;}\n\n    [Display(Description = \"Your last Name\", Name = \"Your last Name\")]\n    public string LastName {get;set;}\n\n    [Display(Description = \"Company Name\", Name = \"What company do you work for?\")]\n    public string CompanyName {get;set;}\n}\n</code></pre>\n\n<p>Person Edit View: views/Person/Edit as such:</p>\n\n<pre><code>@model IPerson\n\n&lt;div class=\"clear paddingbottomxxsm\"&gt;\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.FirstName)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.FirstName)\n        @Html.ValidationMessageFor(model =&gt; model.FirstName)\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"clear paddingbottomxxsm\"&gt;\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.LastName)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.TextBoxFor(model =&gt; model.LastName)\n        @Html.ValidationMessageFor(model =&gt; model.LastName)\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Employee Edit View: views/Employee/Edit:</p>\n\n<pre><code>@model Employee\n\nHtml.RenderAction(\"Edit\", \"Person\", new { person = Model });\n\n&lt;div class=\"clear paddingbottomxxsm\"&gt;\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.CompanyName)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.TextBoxFor(model =&gt; model.CompanyName)\n        @Html.ValidationMessageFor(model =&gt; model.CompanyName)\n    &lt;/div&gt;\n&lt;/div&gt;    \n</code></pre>\n\n<p>where the PersonController is:</p>\n\n<pre><code>public ActionResult Edit(IPerson person)\n{\n    return PartialView(person);\n}\n</code></pre>\n\n<p><strong>Everything compiles and renders fine</strong>.  However, the <em>data annotations</em> are being lost. </p>\n\n<p>So, Employee/Edit is coming out like:</p>\n\n<blockquote>\n  <p>FirstName [textfield] </p>\n  \n  <p>LastName [textfield] </p>\n  \n  <p>What Company do you work for? [textfield] Company Name is a required field</p>\n</blockquote>\n\n<p>Is there anyway of unboxing those data annotations for the concrete class?</p>\n\n<p><strong>Side note</strong></p>\n\n<p>I tried explicitly casting the IPerson to Employee as such:</p>\n\n<pre><code>@model IPerson\n@{\n    var employee = (Employee)Model;\n}\n&lt;div class=\"clear paddingbottomxxsm\"&gt;\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; employee.FirstName)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; employee.FirstName)\n        @Html.ValidationMessageFor(model =&gt; employee.FirstName)\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"clear paddingbottomxxsm\"&gt;\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; employee.LastName)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.TextBoxFor(model =&gt; employee.LastName)\n        @Html.ValidationMessageFor(model =&gt; employee.LastName)\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Doing this made the first name required but didn't take the display properties from the label.</p>\n\n<p><strong>Update</strong>\nAfter much discussion as to whether this is or is not unboxing, I have not yet found a simple solution of grabbing the data annotation from the (more basic) concrete class. It would really defeat the goal of simplicity to use reflection in view (or helper) to get at the data annotations of the concrete class.  </p>\n\n<p>We have a few views that essentially are the same but have slightly different required fields and display names.  It would be REALLY convenient if I could just pass a view model into an interfaced view and it would figure out the required fields and display properties.  If anyone has figured out a way to do this it would be greatly appreciated.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","session-timeout"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13151780,"title":"Session timout and authentication timeout values when application redirects user to login page in both timout cases","body":"<p>In my Asp.Net MVC 3 application, I have a custom session expiry handler attribute filter which checks if the session is expired before controller actions are invoked. </p>\n\n<p>If the session has expired, the custom filter signs out the user from forms authentication and redirects the user to the login page. I am also aware that is the authorization fails for a user when accessing authorized content, the same flow of action will take place. </p>\n\n<p>In this scenario, where a session OR authentication timout results in the same effect (the user being signed out of forms auth and redirected to login page), is it a major concern as to whether Timeout(Session) is greater or less than Timeout(authentication)?</p>\n"},{"tags":["asp.net-mvc-3","json.net","jsonresult"],"answer_count":2,"favorite_count":5,"up_vote_count":17,"down_vote_count":0,"view_count":5447,"score":17,"question_id":7109967,"title":"Using JSON.net as default JSON serializer in ASP.NET MVC 3 - Is it possible?","body":"<p>Is it possible to use <a href=\"http://json.codeplex.com/\">JSON.net</a> as default JSON serializer in ASP.NET MVC 3?</p>\n\n<p>According to my research, it seems that the only way to accomplish this is to <a href=\"http://james.newtonking.com/archive/2008/10/16/asp-net-mvc-and-json-net.aspx\">extend ActionResult</a> as <a href=\"http://stackoverflow.com/questions/6883204/change-default-json-serializer-used-in-asp-mvc3\">JsonResult in MVC3 is not virtual</a>...</p>\n\n<p>I hoped that with MVC3 that there would be a way to specify a pluggable provider for serializing to JSON.</p>\n\n<p>Thoughts?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","razor","extension-methods"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":298,"score":2,"question_id":9307814,"title":"Create a helper function that returns Razor @ tags?","body":"<p>Struggling to find an answer to my question, as I'm not exactly sure what 'type' a razor tag is.</p>\n\n<p>Essentially I want to create a helper that does something along these lines:</p>\n\n<pre><code>public static xxxxxxx ScriptTag(this HtmlHelper htmlHelper, string url)\n{\n      return @&lt;script type=\"text/javascript\" src=\"@Url.Content(\"~/\" + url)\" /&gt;;\n}\n</code></pre>\n\n<p>The reason I want this is that I am implementing the extension methods that are outlined in <a href=\"http://stackoverflow.com/questions/5433531/using-sections-in-editor-display-templates/5433722#5433722\">this post</a>.</p>\n\n<p>Basically rather than have to do:</p>\n\n<pre><code>@Html.Resource(@&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.4.4.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;, \"js\")`\n</code></pre>\n\n<p>I want to be able to do:</p>\n\n<pre><code>@Html.Resource(Html.ScriptTag(\"Scripts/jquery-1.4.4.min.js\"), \"js\");\n</code></pre>\n\n<p>Am I reaching beyond the stars here or is this possible?</p>\n\n<p>Chris</p>\n"},{"tags":["jquery","ajax","asp.net-mvc-3","session"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13131476,"title":"When storing session values in an AJAX call, they are lost when the next page is loaded","body":"<p>I am using MVC3, and I am trying to do a login page.  I am storing all my details in the session.  If I press 'login' again, it will show the values as being in the session.  When I load another page, or reload the login page, the session is empty.  I have made sure there's no code anywhere in my application that could be clearing the session.  I've found online articles about doing what I am doing, so it seems it should work ? I've set breakpoints in my session_start in app_config, and it's only called the once per session.</p>\n\n<p>Just to add, if I look at the session object, the session id is the same.  Two values are put in the session in the controller, and then 10 or so in the AJAX call.  When I reload the same page, only the 2 values are in the controller, but the AJAX call could see those two values. So, the AJAX call could see the existing session, but the values it adds, are visible if I make the same AJAX call over and over, but gone from a page load.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","iis","http-headers"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":140,"score":0,"question_id":8230001,"title":"How to change headers for specific types of files served in ISS / MVC","body":"<p>I am implementing a fix for the problem caused by 02 compression issues over 3G.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/3282373/web-site-exhibits-javascript-error-on-ipad-iphone-under-3g-but-not-under-wifi\">Web site exhibits JavaScript error on iPad / iPhone under 3G but not under WiFi</a></p>\n\n<p>The best solution seems to be <a href=\"http://stuartroebuck.blogspot.com/2010/08/official-way-to-bypassing-data.html\" rel=\"nofollow\">http://stuartroebuck.blogspot.com/2010/08/official-way-to-bypassing-data.html</a> which is basically to add the header <code>Cache-Control: no-transform</code> in ISS, however I would like to apply this only to specific file types. What is the easiest way to do this? </p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":4493,"score":3,"question_id":11071392,"title":"The type or namespace name does not exist in the namespace 'System.Web.Mvc'","body":"<p>Buiding MVC3 solution went well but have got an error in browser:</p>\n\n<p>Compiler Error Message: CS0234: The type or namespace name 'Html' does not exist in the namespace 'System.Web.Mvc' (are you missing an assembly reference?)</p>\n\n<pre><code>Source Error:\nLine 25:         &lt;add namespace=\"System.Web.Mvc\" /&gt;\nLine 26:         &lt;!--&lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;--&gt;\nLine 27:         &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\nLine 28:         &lt;add namespace=\"System.Web.Routing\" /&gt;\nLine 29:         &lt;add namespace=\"System.Web.WebPages\" /&gt;\n</code></pre>\n\n<p>I have installed packets for solution with <code>NuGet</code> and set up for all projects <code>MVC3</code>. Does <code>MVC3</code> include libraries <code>System.Web.Mvc.Ajax</code>,  <code>System.Web.Mvc.Html</code> and others? Why am I getting the error?</p>\n\n<hr>\n\n<p>In References folder I have System.Web.Mvc</p>\n\n<p><code>Runtime version: v4.0.30319</code>,</p>\n\n<pre><code>Version: 3.0.0.0\n</code></pre>\n\n<hr>\n\n<p>Web.config</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;!--\n  For more information on how to configure your ASP.NET application, please visit\n  http://go.microsoft.com/fwlink/?LinkId=152368\n  --&gt;\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 --&gt;\n    &lt;section name=\"entityFramework\" type=\"System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" requirePermission=\"false\" /&gt;\n  &lt;/configSections&gt;\n  &lt;appSettings&gt;\n    &lt;add key=\"aspnet:UseTaskFriendlySynchronizationContext\" value=\"true\" /&gt;\n    &lt;add key=\"webpages:Version\" value=\"1.0.0.0\" /&gt;\n    &lt;add key=\"ClientValidationEnabled\" value=\"true\" /&gt;\n    &lt;add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" /&gt;\n  &lt;/appSettings&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.5\" /&gt;\n    &lt;authentication mode=\"Forms\"&gt;\n      &lt;forms loginUrl=\"~/Account/LogOn\" timeout=\"2880\" /&gt;\n    &lt;/authentication&gt;\n    &lt;pages&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"System.Web.Helpers\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n        &lt;add namespace=\"System.Web.Routing\" /&gt;\n        &lt;add namespace=\"System.Web.WebPages\" /&gt;\n      &lt;/namespaces&gt;\n    &lt;/pages&gt;\n    &lt;httpRuntime targetFramework=\"4.5\" encoderType=\"System.Web.Security.AntiXss.AntiXssEncoder, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" /&gt;\n    &lt;machineKey compatibilityMode=\"Framework45\" /&gt;\n    &lt;profile defaultProvider=\"DefaultProfileProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultProfileProvider\" type=\"System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/profile&gt;\n    &lt;membership defaultProvider=\"DefaultMembershipProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultMembershipProvider\" type=\"System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/membership&gt;\n    &lt;roleManager defaultProvider=\"DefaultRoleProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultRoleProvider\" type=\"System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/roleManager&gt;\n    &lt;sessionState mode=\"InProc\" customProvider=\"DefaultSessionProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultSessionProvider\" type=\"System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" /&gt;\n      &lt;/providers&gt;\n    &lt;/sessionState&gt;\n  &lt;/system.web&gt;\n  &lt;system.webServer&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt;\n  &lt;/system.webServer&gt;\n  &lt;runtime&gt;\n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"3.0.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n    &lt;/assemblyBinding&gt;\n  &lt;/runtime&gt;\n  &lt;entityFramework&gt;\n    &lt;defaultConnectionFactory type=\"System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework\" /&gt;\n  &lt;/entityFramework&gt;\n  &lt;connectionStrings&gt;\n    &lt;add name=\"EFDbContext\" connectionString=\"Data Source=.\\SQLEXPRESS;Initial Catalog=SportStore;Integrated Security=True;Pooling=False;\" providerName=\"System.Data.SqlClient\" /&gt;\n  &lt;/connectionStrings&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/system.web.mvc.aspx\" rel=\"nofollow\">MSDN</a> the System.Web.Mvc namespace</p>\n\n<p>file <code>packages.config</code>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;packages&gt;\n  &lt;package id=\"EntityFramework\" version=\"5.0.0-rc\" /&gt;\n  &lt;package id=\"jQuery\" version=\"1.7.2\" /&gt;\n  &lt;package id=\"jQuery.UI.Combined\" version=\"1.8.11\" /&gt;\n  &lt;package id=\"jQuery.Validation\" version=\"1.9\" /&gt;\n  &lt;package id=\"Microsoft.AspNet.Mvc\" version=\"3.0.20105.1\" /&gt;\n  &lt;package id=\"Microsoft.AspNet.Providers.Core\" version=\"1.0\" /&gt;\n  &lt;package id=\"Microsoft.AspNet.Providers.LocalDB\" version=\"1.0\" /&gt;\n  &lt;package id=\"Microsoft.AspNet.Razor\" version=\"1.0.20105.408\" /&gt;\n  &lt;package id=\"Microsoft.AspNet.WebPages\" version=\"1.0.20105.408\" /&gt;\n  &lt;package id=\"Microsoft.Web.Infrastructure\" version=\"1.0.0.0\" /&gt;\n  &lt;package id=\"Modernizr\" version=\"2.0.6\" /&gt;\n  &lt;package id=\"Moq\" version=\"4.0.10827\" /&gt;\n  &lt;package id=\"Ninject\" version=\"3.0.1.10\" /&gt;\n&lt;/packages&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":37620,"score":5,"question_id":5561546,"title":"MVC 3 (Razor) - Standard way to use a Button event to call Controller","body":"<p>I have a simple Wall.cshtml view that loads a _Search.cshtml <strong>Partial View</strong> that looks like this:</p>\n\n<pre><code>&lt;h2&gt;The Wall&lt;/h2&gt;\n@{Html.RenderPartial(\"~/Views/Search/_Search.cshtml\");}\n</code></pre>\n\n<p>The _Search.cshtml Partial View (updated based on @Darin reply) looks like this: </p>\n\n<pre><code>@using (Html.BeginForm(\"Searching\", \"Search\", FormMethod.Post, new { id = \"searchForm\" }))    \n{  \n    &lt;div id=\"search\"&gt;\n        &lt;div id=\"searchbtn\"&gt;\n           &lt;input id=\"Search\" type=\"button\" value=\"Search\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"searchtxt\"&gt;\n           @Html.TextBox(\"txtSearch\")\n        &lt;/div&gt;\n  &lt;/div&gt;\n}\n</code></pre>\n\n<p>The Controller looks like this:  </p>\n\n<pre><code>public class SearchController : Controller\n{\n    public ActionResult Wall()\n    {\n        return View();\n    }\n\n    [HttpPost]\n    public ActionResult Searching()\n    {\n        // do something with the search value\n        return View();\n    }\n}\n</code></pre>\n\n<p>When I run the app, the resulting block of HTML produced looks like this:  </p>\n\n<pre><code>&lt;form action=\"/Search/Searching\" id=\"searchForm\" method=\"post\"&gt;  \n   &lt;div id=\"search\"&gt;\n      &lt;div id=\"searchbtn\"&gt;\n          &lt;input id=\"Search\" type=\"button\" value=\"Search\" /&gt;\n      &lt;/div&gt;\n      &lt;div id=\"searchtxt\"&gt;\n          &lt;input id=\"txtSearch\" name=\"txtSearch\" type=\"text\" value=\"\" /&gt;\n      &lt;/div&gt;\n   &lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p><strong>QUESTION 1:</strong>  Why would the button click never hit the <strong>Searching Controller</strong> method?<br>\n(let me restate that _Search.cshtml is a Partial view that runs inside a view named Wall.cshtml).  </p>\n\n<p><strong>QUESTION 2:</strong>  How would I get the value inside the \"txtSearch\" textbox?  </p>\n\n<p><strong>QUESTION 3:</strong>  Since this is a Partial View, how do I make the view that holds the current Search Partial View ..to refresh and update itself with the result of the Search query ? </p>\n\n<p>Thanks in advanced. </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","webforms-view-engine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13149196,"title":"Post HTML encoded Form data to server","body":"<p>I'm currently using MVC 3 (WebForm view engine) and have a form that shows user comments. </p>\n\n<p>If I have a comment which has an ampersand (&amp;), <code>&lt;%= Html.Textbox() %&gt;</code> will encode it as <code>&amp;amp;</code>. However, if the form is then posted to the server, ASP.NET kicks in thinking that the submitted content is malicious.</p>\n\n<p>I find myself having to use <a href=\"http://stackoverflow.com/a/9609450/84395\">HTML decoding methods using JavaScript</a> before the content is sent to the server.</p>\n\n<p>I am able to get the results that I want, but I feel like I'm not doing this right.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["javascript","jquery","json","asp.net-mvc-3","jstree"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":313,"score":4,"question_id":10859266,"title":"Loading a JSTree on demand with Stored Procedures","body":"<p>Currently, I have two Stored Procedures in SQL Server that handle retrieving a tree from the database:<br>\nThe first retrieves all of the nodes at a specific level when you pass in a level number.<br>\nThe other retrieves the children of a specific node when you pass in Level, Left, and Right values.</p>\n\n<p>I'm using MVC 3.<br>\nIdeally, I would like to setup JSTree to make a call to the database every time a user clicks to expand a node.  So instead of loading the entire tree up in a Json model on the server and then passing it to JSTree as is typical, I'd like to instead ONLY pass in the children for the specific node that is clicked by the user.  This will happen at every node so that ONLY the children of the immediate node will have to be passed into the JSTree instead of the entire tree.  </p>\n\n<p>Is this possible?  And if so, I would appreciate some example code for the view (especially) and possibly the controller using Microsoft's MVC 3 framework.  I'd appreciate any help.</p>\n"},{"tags":["asp.net-mvc-3","osx","mono","monodevelop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12971511,"title":"\".. must derive from WebViewPage, or WebViewPage<TModel>\" on MonoDevelop & MVC3 (OS X)","body":"<p>I'm trying to get an MVC 3 Razor project going with MonoDevelop.</p>\n\n<p>I've created a new ASP.net MVC 2 project using Mono 2.10.9 / MonoDevelop 3.0.4.7, and copied the below DLL's from an existing Windows-based MVC3 project to the \"bin\" directory of the Mono project:</p>\n\n<pre><code>System.Web.Helpers.dll\nSystem.Web.Razor.dll\nSystem.Web.WebPages.Deployment.dll\nSystem.Web.WebPages.dll\nSystem.Web.WebPages.Razor.dll\n</code></pre>\n\n<p>Have set the project to use Mono / .NET 4. The default Index file has been deleted and replaced with an Index.cshtml file. When I execute the project I get the below error:</p>\n\n<pre><code>The view at '~/Views/Home/Index.cshtml' must derive from WebViewPage, or WebViewPage&lt;TModel&gt;.\n</code></pre>\n\n<p>What's odd is that I've been through this process before and had MVC 3 pages working. It's only since upgrading Mono (which claims to support Razor...?) that it's now no longer working for me. The projects I've created previously with MVC3 all seem to compile and function in the new Mono version however.</p>\n\n<p>Much appreciated if somebody could point out where I can find some wood amongst these trees :)</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","mvvm"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":13145951,"title":"How can I display the clicked products by user on a list in another view?","body":"<p>I am using MVC3 Viewmodel pattern with Entity Framework on my webbapplication.</p>\n\n<p>My Index View is list of products with image, price and description and etc.</p>\n\n<p>Products with the information I mentioned above is in div boxes with a button that says \"buy\".</p>\n\n<p><img src=\"http://i.stack.imgur.com/MEXgU.jpg\" alt=\"divbox\"></p>\n\n<p>I will be working with 2 views one that is the Index View that will display all the products and the other view that will display the products that got clicked by the buy button.</p>\n\n<p>What I am trying to achieve is when a user click on buy button the products should get stored in the other view that is cart view and be displayed.</p>\n\n<p>I have problems on how to begin the coding for that part.</p>\n\n<p>The index View with products is done and now its the buy button function left to do but I have no idea how to start.</p>\n\n<p>This is my IndexController:</p>\n\n<pre><code>private readonly HomeRepository repository = new HomeRepository();\n\npublic ActionResult Index()\n{\n    var Productlist = repository.GetAllProducts();\n\n    var model = new HomeIndexViewModel()\n    {\n        Productlist = new List&lt;ProductsViewModel&gt;()\n    };\n\n    foreach (var Product in Productlist)\n    {\n        FillProductToModel(model, Product);\n    }\n\n    return View(model);\n\n}\n\nprivate void FillProductToModel(HomeIndexViewModel model, ProductImages productimage)\n{\n    var productViewModel = new ProductsViewModel\n    {\n\n        Description = productimage.Products.Description,\n        ProductId = productimage.Products.Id,\n        price = productimage.Products.Price,\n        Name = productimage.Products.Name,\n        Image = productimage.ImageUrl,\n    };\n    model.Productlist.Add(productViewModel);\n}\n</code></pre>\n\n<p>In my ActionResult Index I am using my repository to get the products and then I am binding the data from the products to my ViewModel so I can use the ViewModel inside my view. Thats how I am displaying all the products in my View. </p>\n\n<p>This is my Index View:</p>\n\n<pre><code>    @model Avan.ViewModels.HomeIndexViewModel\n\n         @foreach (var item in Model.Productlist)\n                    {\n                     &lt;div id=\"productholder@(item.ProductId)\" class=\"productholder\"&gt;  \n                     &lt;img src=\"@Html.DisplayFor(modelItem =&gt; item.Image)\" alt=\"\" /&gt;\n                     &lt;div class=\"productinfo\"&gt;\n                     &lt;h2&gt;@Html.DisplayFor(modelItem =&gt; item.Name)&lt;/h2&gt; \n                     &lt;p&gt;@Html.DisplayFor(modelItem =&gt; item.Description)&lt;/p&gt;    \n                     @Html.Hidden(\"ProductId\", item.ProductId, new { @id = \"ProductId\" }) \n&lt;/div&gt;\n                     &lt;div class=\"productprice\"&gt;     \n                     &lt;h2&gt;@Html.DisplayFor(modelItem =&gt; item.price)&lt;/h2&gt;\n                     &lt;input type=\"button\" value=\"Läs mer\" class=\"button\" id=\"button@(item.ProductId)\"&gt;  \n                     @Html.ActionLink(\"x\", \"Cart\", new { id = item.ProductId })  // &lt;- temp its going to be a button                   \n                    &lt;/div&gt;                                   \n                    &lt;/div&gt;\n\n             }\n</code></pre>\n\n<p>Since I can get the product ID per product I can use the ID in my controller to get the data from the database. But I still I have no idea how I can do that so when somebody click on the buy button I store the ID where? and how do I use it so I can achieve what I want to do?</p>\n\n<p>Right now I have been trying to do following thing in my IndexController:</p>\n\n<pre><code>public ActionResult cart(int id)\n        {\n            var SelectedProducts = repository.GetProductByID(id);\n\n\n            return View();\n        }\n</code></pre>\n\n<p>What I did here is that I get the product by the id. So when someone press on the temp \"x\" Actionlink I will recieve the product. All I know is that something like that is needed to achieve what im trying to do but after that I have no idea what to do and in what kind of structure I should do it.</p>\n\n<p>Any kind of help is appreciated alot!</p>\n\n<p><strong>Short Scenario:</strong></p>\n\n<p>looking at the Index I see 5 products, I choose to buy 3 products so I click on three \"Buy\" buttons. Now I click on the \"Cart\" that is located on the nav menu. New View pops up and I see the three products that I clicked to buy.</p>\n"},{"tags":["c#","ajax","serialization","asp.net-mvc-3"],"answer_count":5,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":1115,"score":3,"question_id":5861241,"title":"Can abstract class be a parameter in a controller's action?","body":"<p>I have an Action function inside of a Controller, which is being called with AJAX.  That Action is taking in 1 parameter.  Client side, I construct a JSON object which should serialize into that 1 parameter.  The problem I ran into is that the parameter class is declared as abstract.  Thus, it cannot be instantiated.  When AJAX hits that Action, I get the following:</p>\n\n<blockquote>\n  <p>Cannot create an abstract class.</p>\n  \n  <p>Stack Trace:</p>\n  \n  <p>[MissingMethodException: Cannot create\n  an abstract class.]<br>\n  System.RuntimeTypeHandle.CreateInstance(RuntimeType\n  type, Boolean publicOnly, Boolean\n  noCheck, Boolean&amp; canBeCached,\n  RuntimeMethodHandleInternal&amp; ctor,\n  Boolean&amp; bNeedSecurityCheck) +0<br>\n  System.RuntimeType.CreateInstanceSlow(Boolean\n  publicOnly, Boolean skipCheckThis,\n  Boolean fillCache) +98<br>\n  System.RuntimeType.CreateInstanceDefaultCtor(Boolean\n  publicOnly, Boolean\n  skipVisibilityChecks, Boolean\n  skipCheckThis, Boolean fillCache) +241\n  System.Activator.CreateInstance(Type\n  type, Boolean nonPublic) +69\n  ...............</p>\n</blockquote>\n\n<p>Is there any way to pull off such a scenario without creating a different parameter object, \"un-declaring\" the parameter object as abstract, or digging into mechanics of MVC?  Thanks.</p>\n\n<p>UPDATE:  I'm currently working with back-end developers to tweak their objects.  Either way, I think that would be the ultimate solution.  Thank you all for your answers.</p>\n"},{"tags":["c#","json","asp.net-mvc-3","deserialization"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":13139033,"title":"Pains deserializing C# JSON string","body":"<p>I am trying to post some data to my MVC 3 controller through a hidden text field that contains some JSON.  I have that JSON passed in via string coursesList.  Anyone have an idea why this is not working?</p>\n\n<p>All I'm doing is making a byte [] out of the JSON string, writing it to a MemoryStream, and deserializing that stream -- or, attempting to.  BookCourse bc always ends up with null properties.</p>\n\n<p>Here's something like the JSON I would be using:</p>\n\n<pre><code>[{\"coursesection\":\"1234\",\"netlogon\":\"jsmith\",\"label\":\"CRSE-1313 Generic Course Titling ~ Joe Smith\"}]\n</code></pre>\n\n<p>And here's the object to be deserialized into:</p>\n\n\n\n<pre><code>using System.Runtime.Serialization;\n\nnamespace xxxx.Models\n{\n    [DataContract]\n    public class BookCourse\n    {\n        [DataMember]\n        public string coursesection { get; set; }\n\n        [DataMember]\n        public string netlogon { get; set; }\n\n        [DataMember]\n        public string label { get; set; }\n    }\n}\n</code></pre>\n\n<p>Finally, the controller action code to do it --</p>\n\n\n\n<pre><code>var byteArray = Encoding.ASCII.GetBytes(coursesList);\n\n// Deserialize byte array to data type\nvar stream = new MemoryStream();\nstream.Write(byteArray, 0, byteArray.Length);\nvar crs = new DataContractJsonSerializer(typeof(BookCourse));\nstream.Position = 0;\n\n// Read stream to object\nad.CourseSectionIDs = new List&lt;int&gt;();\ntry\n{\n    var bc = (BookCourse) crs.ReadObject(stream);\n    while (bc.coursesection != null)\n    {\n        cs.AssociateCourseBook(bc.netlogon, bc.coursesection, ad.ISBN);\n        bc = (BookCourse)crs.ReadObject(stream);\n    }\n}\ncatch (System.Runtime.Serialization.SerializationException e)\n{\n    // Is this best practice for handling \"none\"?\n}\n</code></pre>\n"},{"tags":["c#","json","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":11652847,"title":"MVC.NET C#: Getting the emitted null values of a JSON http request?","body":"<p>I have a WebService, that expects a list of a defined type via Json.</p>\n\n<p>Class:</p>\n\n<pre><code>public class myType\n{\n    public int id { get; set;}\n    public int? varA { get; set;}\n    public string varB { get; set;}\n    public float? varC { get; set;}\n}\n</code></pre>\n\n<p>Logic:</p>\n\n<pre><code>//Passed JSON --&gt; Data:{'id':'1','valueA':''}\n[HttpPost]\npublic JsonResult Update(myType Data)\n{\n    //Data ends up with value's id = 1; varA = null; varB = null; varC = null;\n    //So how can I find that valueA was actually passed with a null value, and all the \n    //others are just nulling by default?\n    if (Data.varA.HasValue) dbItem.varA = Data.varA\n    ...\n}\n</code></pre>\n\n<p>Lets assume myType has several values, eg {id, varA, varB, varC}\nall values except id are nullable.</p>\n\n<p>Now, I purposely want to null out only 1 value</p>\n\n<p>the problem is, For bandwidth conservation, I'm only sending the id, and whatever value has been updated in JSON eg: <code>Data:{'id':'1','valueA':''}</code>, as far as the method is consurned though, the Data Object, returns the object that gives the <code>id</code>, but also gives a null value for all other variables of the object.</p>\n\n<p>So, what can I to to be able to tell which emited variables were sent via the json to the webmethod? So I can tell which variable I was really wanting to null?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13146970,"title":"Upload file MVC3","body":"<p>Here what I want to do, I'm working with a MVC 3 project.</p>\n\n<p>I have 3 buttons in the top section of my webpage, one to select file(s), upload all and cancel all.</p>\n\n<p>When the user click the select file(s) button for each files I call a jquery template to show the filename of the selected file and two button, one for upload and the other for cancel.</p>\n\n<p>So I have 2 ways to upload a file by the upload all button or the upload related to the file.</p>\n\n<p>The problem I don't find a way to achieve what I want to do... </p>\n\n<p>Anybody have an idea ? And I need to have a progress bar in both case to cancel the upload...</p>\n\n<p>Thank you</p>\n"},{"tags":["javascript","jquery","asp.net-mvc-3","url","hashtag"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13143119,"title":"window.location.hash returns hash tag in front of value","body":"<p>I have the following code in MVC3 view:</p>\n\n<pre><code> $(document).ready(function () {\n    if (window.location.hash) {\n        var manager= new Manager();\n\n        manager.doSomeStuff(window.location.hash);\n    }\n});\n</code></pre>\n\n<p>The interesting thing is that when there is no hash tag in the URL, or there is only a hash tag example:</p>\n\n<pre><code>http://localhost:1223/Index/AboutUs\n\nhttp://localhost:1223/Index/AboutUs#\n</code></pre>\n\n<p>When the <code>window.location.hash</code> is empty and the function is not executed.\nBut when there is some value in the hash tag:</p>\n\n<pre><code>http://localhost:1223/Index/AboutUs#categoryId=5&amp;manufacturerId=8\n</code></pre>\n\n<p>The value in the <code>window.location.hash</code> is <code>#categoryId=5&amp;manufacturerId=8</code></p>\n\n<p>Can you explain to me why the <code>#</code> tag is included in the value and why when the there is no value after the <code>#</code> tag, the <code>window.location.hash</code> is empty.</p>\n"},{"tags":["jquery","asp.net-mvc-3","post","form-submit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13146012,"title":"How to submit to controller with arguments?","body":"<p>I'm trying to auto submit on dropdownlist change to my controller with arguments. The POST does happen but I only get this error</p>\n\n<blockquote>\n  <p>The parameters dictionary contains a null entry for parameter 'category' of non-nullable type   'System.Int32' for method 'System.Web.Mvc.ViewResult Index(System.String, System.String, Int32)' in 'shopping.WebUI.Controllers.HomeController'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter. Parameter name: parameters</p>\n</blockquote>\n\n<p>I have a JQuery script</p>\n\n<pre><code>$(\".autoSubmit select\").change(function () {\n    $(this).closest('form').submit();\n});\n</code></pre>\n\n<p>a form on my View</p>\n\n<pre><code>@using (Html.BeginForm(\"Index\", \"Home\", FormMethod.Post))\n{\n    @Html.Action(\"ShipToCountry\", \"Filters\", new { Model.SelectedCountry })\n}\n</code></pre>\n\n<p>but need to POST to this action</p>\n\n<pre><code>[HttpPost]\npublic ViewResult Index(string country, string currency, int category)\n{\n    var viewModel = new MainViewModel\n    {\n        SelectedCountry = country,\n        SelectedCurrency = currency,\n        Categories = category }\n    };\n    return View(viewModel);\n}\n</code></pre>\n\n<p>None of the country, currency, category arguments is or can be optional.</p>\n\n<p>What changes do I need to make, on the View maybe, to pass those parameters to the Action?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc-3","linq","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":13107063,"title":"linq orderby not sorted asc not working","body":"<p>I have the following information return in the grid, but it would not order the record first order by firstname then family name. Please let me know how i can achieve this. I am currently using MVC4 and kendoui grid</p>\n\n<pre><code>public ActionResult Index()\n    {\n        return View();\n    }\n\npublic ActionResult GetSession([DataSourceRequest] DataSourceRequest request)\n{\n    Response.Cache.SetCacheability(HttpCacheability.NoCache);\n    return Json(GetAllSessionList().ToDataSourceResult(request),         JsonRequestBehavior.AllowGet);\n} \n private static IEnumerable&lt;ListsViewModel&gt; GetAllSessionList()\n    {\n        var context = new HEntities();\n\n        return context.vwSessionListConfigs\n            .OrderBy(x =&gt; x.FirstName).ThenBy(x =&gt; x.FamilyName)\n            .Select(session =&gt; new ListsViewModel\n            {\n                ConsumerID = session.ConsID,\n                ConsumerHCID = session.ConsHCL,\n                ConsumerHRN = session.ConsHRK,\n                ConsumerFirstName = session.FirstName,\n                ConsumerFamilyName = session.GivenName,\n                ConsumerGender = session.Gender,\n            });\n    }\n</code></pre>\n\n<p><strong>View:</strong></p>\n\n<pre><code>@(Html.Kendo().Grid&lt;Web_App.ViewModel.ListsViewModel&gt;()\n\n    .Name(\"SessionList\")\n    .HtmlAttributes(new { @Style = \"align:center; font-size:10px;\" })\n    .Columns(columns =&gt;\n    {\n        columns.Bound(p =&gt; p.ConsID).Visible(false);\n        columns.Bound(p =&gt; p.ConsHCL).Width(80);\n        columns.Bound(p =&gt; p.ConsHRK).Width(50);\n        columns.Bound(p =&gt; p.FirstName).Width(80);\n        columns.Bound(p =&gt; p.GivenName).Width(80);\n        columns.Bound(p =&gt; p.ConsumerAlias).Width(45);\n        columns.Bound(p =&gt; p.Gender).Width(30);\n\n        columns.Command(commands =&gt; commands.Edit()).Width(175);      \n    })\n    .Editable(editable =&gt; editable.Mode(GridEditMode.InLine))\n    .Pageable()\n    .Selectable(s =&gt; s.Mode(Kendo.Mvc.UI.GridSelectionMode.Single))\n    .Scrollable()\n    .DataSource(dataSource =&gt; dataSource\n        .Ajax()\n        .PageSize(10)\n        .ServerOperation(true)\n        .Model(model =&gt; model.Id(p =&gt; p.ConsID))\n        .Read(read =&gt; read.Action(\"GetSession\", \"Manage\").Type(HttpVerbs.Get))\n        .Update(\"Edit\", \"Manage\")         \n    )\n    .Events(events =&gt; events\n                            .Change(\"change\"))\n\n\n\n)\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","authentication","forms-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13146032,"title":"Redirect to requested page after authentication","body":"<p>I'm working on an mvc .net application and I'm using forms authentication. I want to redirect user to the page he requested after he gets authenticated. Any help would be appreciated.</p>\n"},{"tags":["asp.net-mvc-3","button","controller","submit","checkboxes"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13145812,"title":"ASP MVC3 checkbox action without submit button","body":"<p>I am using ASP.net for a program with a number of check boxes and a submit button which initiates an action depending on the selected check boxes.</p>\n\n<p>However, one of my check boxes should behave as this submit button, i.e, upon selecting/deselecting this check box, the same action as the button must be triggered. Can someone please help me in doing this (or perhaps direct me to a tutorial)</p>\n\n<p>I have a controller class and model.</p>\n\n<p>Thanks you</p>\n\n<p>EDIT\nThe program look like:</p>\n\n<pre><code>@using(Html.BeginForm(\"controllername\", FormMethod.Get)) {\n     @html.CheckBox(\"check1\");\n     @HTMl.Checkbos(\"check2\");\n     &lt;input type=\"submit\" value=\"Submit\" /&gt;\n}\n</code></pre>\n\n<p>Everything else is pretty much handled in the controller.</p>\n"},{"tags":["jquery","asp.net","asp.net-mvc-3","uploadify"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1956,"score":1,"question_id":6142760,"title":"Trying to use Uploadify in an MVC3 application what is the problem?","body":"<p>Why doesn't the file input element show up at all??? see code and screen shot below.  I've spent the last few hours researching this on every forum I can find.  I cannot get a consistent answer.</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;&lt;title&gt;\n\n    Home Page\n\n&lt;/title&gt;&lt;link href=\"mvc3/Content/Site.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;script src=\"/mvc3/Scripts/jquery-1.5.1.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script src=\"/mvc3/uploadify/jquery.uploadify.v2.1.4.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script src=\"/mvc3/uploadify/swfobject.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n        &lt;script type=\"text/javascript\"&gt;\n            jQuery.noConflict();\n            jQuery(document).ready(function () {\n                jQuery(\"#dr405\").uploadify({\n                    'uploader': 'uploadify.swf',\n                    'cancelImg': 'cancel.png',\n                    'buttonText': 'Browse Files',\n                    'script': 'Uploader.ashx',\n                    'folder': 'uploads',\n                    'fileDesc': 'Image Files',\n                    'fileExt': '*.jpg;*.jpeg;*.gif;*.png',\n                    'multi': true,\n                    'auto': true\n                });\n            }); \n    &lt;/script&gt; \n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div class=\"page\"&gt;\n        &lt;div id=\"header\"&gt;\n            &lt;div id=\"title\"&gt;\n                &lt;h1&gt;My MVC Application&lt;/h1&gt;\n            &lt;/div&gt;\n            &lt;div id=\"logindisplay\"&gt;\n\n        Welcome &lt;strong&gt;dougrchamberlain&lt;/strong&gt;!\n        [ &lt;a href=\"/mvc3/Account/LogOff\"&gt;Log Off&lt;/a&gt; ]\n\n            &lt;/div&gt; \n            &lt;div id=\"menucontainer\"&gt;\n                &lt;ul id=\"menu\"&gt;\n                    &lt;li&gt;&lt;a href=\"/mvc3/\"&gt;Home&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/mvc3/Home/About\"&gt;About&lt;/a&gt;&lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div id=\"main\"&gt;\n\n    &lt;h2&gt;Welcome to ASP.NET MVC!&lt;/h2&gt;\n\n    &lt;p&gt;Please upload your return&lt;/p&gt;   \n    &lt;input type=\"file\" name=\"dr405\" id=\"dr405\" /&gt;\n\n\n            &lt;div id=\"footer\"&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/m3jGs.png\" alt=\"enter image description here\"></p>\n\n<p><strong>Update</strong></p>\n\n<p>After fixing the url references. To actually point to the files in question, here is what I am seeing on my end.</p>\n\n<p><img src=\"http://i.stack.imgur.com/W4unm.png\" alt=\"enter image description here\"></p>\n"},{"tags":["c#","mvc","asp.net-mvc-3","gridview","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":738,"score":0,"question_id":6139912,"title":"Expandable GridView Tree","body":"<p>What is the best way to make a Expandable TreeGridView in ASP.NET MVC 3.0 . \nSomething like this, A grid with a parent like treeview.</p>\n\n<blockquote>\n  <ul>\n  <li>1 AAAAA Description\n  <ul>\n  <li>20201 100 10 B</li>\n  <li>20203 300 15 C</li>\n  </ul></li>\n  <li>2 BBBBB Description B\n  <ul>\n  <li>20201 100 10 B</li>\n  </ul></li>\n  </ul>\n</blockquote>\n\n<p>I need Something like this ... <a href=\"http://blogs.msdn.com/b/markrideout/archive/2006/01/08/510700.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/markrideout/archive/2006/01/08/510700.aspx</a></p>\n"},{"tags":["jquery",".net","asp.net-mvc-3","knockout.js"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":13145921,"title":"ko.applyBinding to refresh the search results using Knockout?","body":"<p>I want to update the contents of my databind Ul-Li list with the searched data. I am using following ViewModel</p>\n\n<pre><code>function PatientsModel(data)\n{\n    var self = this;\n\n    self.Patients = ko.observableArray([]);\n\n    self.Patients(data.Patients);\n\n    self.addPatient = function (model, event)\n    {\n        alert(\"Patients to Add: \" + model.LastName + ',' + model.FirstName);\n        //Replace with AJAX Calls : self.people.push({ name: \"New at \" + new Date() });\n    };\n\n    self.removePatient = function (model, event)\n    {\n        alert(\"Patients to Delete:\" + model.LastName + ',' + model.FirstName);\n        //Replace with AJAX calls : self.people.remove(this);\n    }\n\n    self.RefreshData = function (data)\n    {\n        self.Patients = ko.observableArray([]);\n        self.Patients(data.Patients);\n    }\n}\n</code></pre>\n\n<p>to refresh the contents I have created RefreshData, method that will update <strong>Patients</strong> which is data-bind  <strong>\"foreach: Patients\"</strong> with Ul</p>\n\n<p>I am doing following Bind:</p>\n\n<pre><code>AllPatientList.PatientsModel = null;\n                            AllPatientList.PatientsModel = new PatientsModel(data);\n                            ko.applyBindings(AllPatientList.PatientsModel, $('#AllPatientDiv&gt;div&gt;ul')[0]);\n</code></pre>\n\n<p>and Following to Update the contents of View Model:</p>\n\n<pre><code>if (AllPatientList.PatientsModel != null &amp;&amp; AllPatientList.PatientsModel != undefined)\n                            {\n                                AllPatientList.PatientsModel.RefreshData(data);\n                            }\n                            else\n                            {\n                                AllPatientList.PatientsModel = new PatientsModel(data);\n                                ko.applyBindings(AllPatientList.PatientsModel, $('#AllPatientDiv&gt;div&gt;ul')[0]);\n                        }\n</code></pre>\n\n<p>But it Doesn't work and contents of the UL are <strong>not changing</strong>.</p>\n\n<p>Further I tried to do Following:</p>\n\n<pre><code>ko.cleanNode($('#AllPatientDiv&gt;div&gt;ul')[0]);\nAllPatientList.PatientsModel = new PatientsModel(data);\n                                ko.applyBindings(AllPatientList.PatientsModel, $('#AllPatientDiv&gt;div&gt;ul')[0]);\n</code></pre>\n\n<p>It is producing the list with Repeated/Duplicate dataEntries. It is showing 9 list-items instead of 3. (Each repeating 3 times).</p>\n\n<p>I am not able to figure out what's wrong I have done here. ko.cleanNode() is not removing contents from the list as well. Please Help, how can I rebind the UL - LI list with updated Contents.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":13145141,"title":"Good ASP.NET MVC projects to look at for authentication and cookie management","body":"<p>I am new to ASP.NET MVC, so I was looking out for open-source projects either on Codeplex/Github/Bitbucket which I can look at and understand how to implement authentication, authorization and implement remember me, cookie management and stuff.</p>\n\n<p>Can some one please guide me to any good projects that has a nice implementation on authentication and cookie management.</p>\n"},{"tags":["asp.net-mvc-3","dotnetopenauth"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":13145666,"title":"Using OpenID/OpenAuth in MVC3 app with overridden authentication method","body":"<p>We override the basic authentication in an MVC3 application by calling a webservice with the user's credentials and returning a WCF structure that contains the user's ID, a \"LogonTicket\". This LogonTicket is used to \"authenticate the user for each call made to the webservice.</p>\n\n<p>Now, we override by replacing the defaultProvider in the Web.config. All we do in this overridden provider is\nto override the ValidateUser() function. That is where we call the web service with their credentials and return\nthe \"LogonTicket\".</p>\n\n<p>This is the LogOn() function from our AccountController, essentially the base code from the template:</p>\n\n<pre><code>public ActionResult LogOn(LogOnModel model)\n{\n    string ReturnUrl = \"\";\n    if (HttpContext.Request.UrlReferrer.Query.Length &gt; 11)\n    {\n        ReturnUrl = Uri.UnescapeDataString(HttpContext.Request.UrlReferrer.Query.Substring(11));\n    }\n    if (ModelState.IsValid)\n    {\n        if (Membership.ValidateUser(model.UserName, model.Password))\n        {\n            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);\n            if (Url.IsLocalUrl(ReturnUrl) &amp;&amp; ReturnUrl.Length &gt; 1 &amp;&amp; ReturnUrl.StartsWith(\"/\")\n                &amp;&amp; !ReturnUrl.StartsWith(\"//\") &amp;&amp; !ReturnUrl.StartsWith(\"/\\\\\"))\n            {\n                return Redirect(ReturnUrl);\n            }\n            else\n            {\n                return RedirectToAction(\"Index\", \"Home\");\n            }\n        }\n        else\n        {\n            ModelState.AddModelError(\"\", \"The user name or password provided is incorrect.\");\n        }\n    }\n\n    // If we got this far, something failed, redisplay form\n    ViewBag.MainWebsite = MainWebsite;\n    return View(model);\n}\n</code></pre>\n\n<p>This is the overridden ValidateUser() function from our new default provider:</p>\n\n<pre><code>public override bool ValidateUser(string username, string password)\n{\n    MyServiceClient mps = new MyServiceClient();\n    string sha1password = HashCode(password);\n    LogonInfo logonInfo = mps.GetLogonTicket(username, sha1password);\n    if (logonInfo.LogonTicket != \"\" &amp;&amp; logonInfo.LogonTicket != \"0\") \n    {\n    // Authenticated so set session variables\n        HttpContext.Current.Session[\"LogonTicket\"] = logonInfo.LogonTicket;\n        HttpContext.Current.Session[\"ParticipantID\"] = logonInfo.ParticipantID;\n        return true;\n    }\n    else\n    {\n        return false;\n    }\n}\n</code></pre>\n\n<p>I'm not really sure how to combine the use of the two, so my questions are:</p>\n\n<ol>\n<li>How can I implement OpenID and Facebook logins and keep my current authentication method?</li>\n<li>How can we \"map\" the OpenID user with our current user DB values? We MUST know so we can retrieve their info.\n I know we can retrieve their email address but what if their OpenID email is different than the one they use for their record on our site?</li>\n<li>Are there any examples of how to do this, anywhere?</li>\n</ol>\n\n<p>Thanks for looking at my question.</p>\n"},{"tags":["c#","winforms","asp.net-mvc-3","barcode","isbn"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13072676,"title":"How do I create a dynamic ISBN 13 barcode image in C#","body":"<p>I need to be able to pass in a 13 digit ISBN and have the barcode display as an image on a website dynamically. I have tried some web services at maschup.com and so far unable to get this to render correctly. </p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","controller","model-binding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13145160,"title":"Binding query string to object in ASP.NET MVC?","body":"<p>I have a grid control that I have bound to a model of IEnumerable. How ever in my controller I would like to save a record. The grid control I am using is one from Telerik 'Kendo'. The request back is a string and I would like to get my bound object 'CustomerViewModel' how ever when I pass in my object it comes back null. I have tried different types of information and it seems to only work for i specify the property I would like to pass in. Please find code below and assist?</p>\n\n<pre><code>[AcceptVerbs(HttpVerbs.Post)]\n        public ActionResult Save([DataSourceRequest] DataSourceRequest request, CustomerViewModel customerViewModel)\n        {\n            if (customerViewModel != null &amp;&amp; ModelState.IsValid)\n            {\n                var customers = Repository.GetItems&lt;Customer&gt;();\n                Repository.SaveChanges&lt;Customer, CustomerViewModel, NorthWindDataContext&gt;(customers, customerViewModel);\n            }\n            return Json(ModelState.ToDataSourceResult());\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","html.dropdownlist"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":13144810,"title":"Multiple DropDownLists with the same name (inside foreach statement)","body":"<p>I'm having trouble when loading several DropDownLists that have the same name. I attach my code here:</p>\n\n<p><strong>View:</strong></p>\n\n<pre><code>@{\n   int i = 1\n\n    foreach (var queue in Model.Queues)\n    {\n            using (Html.BeginForm(\"ChangeQueueState\", \"Home\", FormMethod.Post))\n            {\n                List&lt;SelectListItem&gt; sli = ViewBag.states[i - 1];\n            &lt;div&gt;@Html.DropDownList(\"state\", sli)&lt;/div&gt;\n            }\n     }\n    i++\n}\n</code></pre>\n\n<p>There's more code inside the view that I didn't show.</p>\n\n<p>In my controller I simply change the state of the corresponding queue and load <code>ViewBag.states</code> with the List of <code>SelectedListItem</code> which contains the List of states with the correct state as 'Selected' for each queue.</p>\n\n<p>The problem is that when the View is loaded, all the <code>DropDownLists</code> are loaded with the last modified state. For instance, if I changed the 5th queue from 'Open' to 'Closed' then all the <code>DropDownLists</code> appears with the '<code>Closed</code>' option selected (although in the DB the changes are applied correctly).</p>\n\n<p>I think the problem is due to the binding that MVC does between the <code>DropDownList</code> name and the <code>SelectListItem</code> associated, but I can't change the DDL name to <code>\"state\" + @i</code>, because state is bound to the argument received in the '<code>ChangeQueueState</code>' method of my Controller.</p>\n\n<p>I would really appreciate your help. Thanks in advance!</p>\n"},{"tags":["asp.net-mvc-3","c#-4.0","razor","entity-framework-4"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":46,"score":4,"question_id":13124325,"title":"how to print not mapped value","body":"<p>I am using complicated SQL queries, i have to use SqlQuery ... in simple way:</p>\n\n<p>MODEL:</p>\n\n<pre><code>public class C\n{\n    public int ID { get; set; }\n    [NotMapped]\n    public float Value { get; set; }\n}\n</code></pre>\n\n<p>CONTROLLER:</p>\n\n<pre><code>IEnumerable&lt;C&gt; results = db.C.SqlQuery(@\"SELECT ID, ATAN(-45.01) as Value from C);\nreturn View(results.ToList());\n</code></pre>\n\n<p>VIEW:</p>\n\n<pre><code>@model IEnumerable&lt;C&gt;\n@foreach (var item in Model) {\n    @Html.DisplayFor(modelItem =&gt; item.Value)\n}\n</code></pre>\n\n<p>and the result for item.Value is NULL.</p>\n\n<p>So my question is , how can i print the computed value from SQL Query ?</p>\n\n<p>Thank you for help.</p>\n"},{"tags":["c#","asp.net-mvc-3","mvccontrib"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":646,"score":3,"question_id":5406310,"title":"MVC3 Dynamic List Views","body":"<p>In MVC3, I've been able to rely on Html.DisplayForModel() to generate display's for my data.  Using this method, and various templates, I have a single View for displaying several of my Models.  What I'm wondering though, is there a way I can get this to work on Lists for my models?</p>\n\n<p>For example, I have a model called Networks.  My view to list out multiple networks looks like this:</p>\n\n<pre><code>@model PagedList&lt;Network&gt;\n\n&lt;div id=\"networkList\"&gt;\n@Html.Grid(Model).Columns(column =&gt; {\n        column.For(x =&gt; Html.ActionLink(x.Id.ToString(), \"NetworkDetails\", new { id = x.Id })).Named(\"Network ID\");\n        column.For(x =&gt; x.Name);\n        column.For(x =&gt; x.Enabled);\n}).Attributes(Style =&gt; \"text-align: center\")\n\n@Html.AjaxPager(Model, new PagerOptions() { PageIndexParameterName=\"page\", ShowDisabledPagerItems = false, AlwaysShowFirstLastPageNumber=true },\n                            new AjaxOptions() { UpdateTargetId = \"networkList\" })\n&lt;/div&gt;\n</code></pre>\n\n<p>I'm wondering if it is possible to use a single template when generating lists for my models.  I could rely on attributes to know which properties I would like to generate in my list, ie: [ListItem].</p>\n\n<p>The head scratcher for me is, how can I pass a dynamic model to an extension method?  If it's of any help, the Html.Grid extension is from MVCContrib.  Has anyone else done something similar?  It would be great to rely on a template as it would really chop down on the amount of code.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","visual-studio-extensions","razorgenerator"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":117,"score":3,"question_id":12975030,"title":"The custom tool 'RazorGenerator' failed. The method or operation is not implemented","body":"<p>I have just upgraded the Visual Studio extension <a href=\"http://visualstudiogallery.msdn.microsoft.com/1f6ec6ff-e89b-4c47-8e79-d2d68df894ec\" rel=\"nofollow\">RazorGenerator</a> to V1.5 (Last updated 10/14/2012) and now have the following problems. </p>\n\n<p>Each cshtml file edited now removes the generated file, if I choose to 'Run Custom Tool' I get <code>The custom tool 'RazorGenerator' failed. The method or operation is not implemented.</code></p>\n\n<p>I had it working previously in my project without issue but the upgrade seems to have broken it. Does anyone know how this can be fixed..? I can't even seem to roll back to the previous version now since it's installed via the ExtensionManager.</p>\n\n<p>The latest version of <a href=\"http://nuget.org/packages/RazorGenerator.MVC\" rel=\"nofollow\">RazorGenerator.MVC in nuget</a> is 1.4 (Friday, April 20, 2012) so perhaps the version mismatch is the issue..? </p>\n\n<p>I have tried restarting VS and my machine without success, I even un-installed the extension and re-installed and that also didn't work. </p>\n\n<pre><code>Exception calling \"RunCustomTool\" with \"0\" argument(s): \"The custom tool 'RazorGenerator' failed.  The method or operation is not implemented.\"\nAt D:\\Source\\MySolution\\MyProject\\packages\\RazorGenerator.Mvc.1.4.0.0\\tools\\RazorGenerator.psm1:32 char:32\n+         $_.Object.RunCustomTool &lt;&lt;&lt;&lt; ()\n    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException\n    + FullyQualifiedErrorId : ComMethodTargetInvocation\n\nException calling \"GetItem\" with \"1\" argument(s): \"The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))\"\nAt D:\\Source\\MySolution\\MyProject\\packages\\RazorGenerator.Mvc.1.4.0.0\\tools\\RazorGenerator.psm1:62 char:46\n+                     $solutionExplorer.GetItem &lt;&lt;&lt;&lt; (\"$SolutionName\\$ProjectName$relativePath\").UIHierarchyItems.Expanded = $false\n    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException\n    + FullyQualifiedErrorId : ComMethodTargetInvocation\n</code></pre>\n\n<p>In addition to this, I get the following build errors for each view (despite saying build succeeded):</p>\n\n<pre><code>Custom tool error: Could not load file or assembly 'file:///C:\\Users\\Rob\\AppData\\Local\\assembly\\dl3\\VQ93NZJ0.M7K\\4HA91P75.CHN\\4b53b7b1\\09b87db8_d4adcd01\\RazorGenerator.Core.v1.dll' or one of its dependencies. The system cannot find the file specified.\n</code></pre>\n\n<p>I <a href=\"http://razorgenerator.codeplex.com/SourceControl/changeset/view/5dd40e221a03\" rel=\"nofollow\">downloaded the source</a>, built locally and copied the 'RazorGenerator.Core.v1.dll' into the directory from the error message but it still didn't work. I even copied all of the RazorGenerator*.dll files into that directory but still no luck. Checking the dependencies only shows system assemblies and 'RazorGenerator.Core.dll' which is present in the same directory. </p>\n\n<p>Incidentally, the 'RazorGenerator.Core.dll' was already in the directory above. </p>\n\n<p>Looking in the Visual Studio extensions folder I have a directory for RazorGenerator as follows:</p>\n\n<pre><code>C:\\Users\\Rob\\AppData\\Local\\Microsoft\\VisualStudio\\10.0\\Extensions\\RazorGenerator contributors\\Razor Generator\\1.5\n</code></pre>\n\n<p>The following files and assemblies are within this folder:</p>\n\n<pre><code>extension.vsixmanifest\nRazorGenerator.Core.dll\nRazorGenerator.Core.v1.dll\nRazorGenerator.Core.V2.dll\nRazorGenerator.dll\nRazorGenerator.pdb\nRazorGenerator.pkgdef\n</code></pre>\n\n<p>Any help would be very much appreciated. </p>\n"},{"tags":["asp.net-mvc-3","webgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13138622,"title":"Pagination on WebGrid deactivates after adding entries","body":"<p>I'm using a WebGrid with pagination in conjunction with an AJAX popup window to add new entries. I've noticed that after I've added an entry the pagination links at the bottom of the WebGrid become inactive. </p>\n\n<p>The popup calls the controller's Save action which finishes with the following:</p>\n\n<pre><code>return PartialView(\"_PersonGrid\", pModel.Persons);\n</code></pre>\n\n<p>There are three views that are used here. An index, a grid and a popup. The grid is embedded in the index and the popup can be called by clicking on buttons on the grid and index.</p>\n\n<p>The index view has the following code:</p>\n\n<pre><code>@using (Ajax.BeginForm(new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = \"myUserGrid\" }))\n{\n\n&lt;div id=\"myUserGrid\"&gt;\n    @Html.Partial(\"_PersonGrid\", Model.Persons)\n&lt;/div&gt;\n&lt;br /&gt;\n\n    //other code\n}\n</code></pre>\n\n<p>The grid view (_PersonGrid.cshtml) is:</p>\n\n<pre><code>@model IEnumerable&lt;CIMsWebApp.Client.Group.Entities.IPerson&gt;\n\n@{  var grid = new WebGrid(Model, canSort: true, canPage: true, defaultSort: \"UserName\", ajaxUpdateContainerId: \"myUserGrid\"); }    \n\n\n@grid.GetHtml(\n    tableStyle: \"dataGrid\", \n    headerStyle: \"header\",\n    alternatingRowStyle: \"evenRow\",\n    columns: grid.Columns\n    (\n        grid.Column(header: \"User Name\", columnName: \"UserName\", format: item =&gt; Html.Raw(\"&lt;a href='#' class='userNames' data-personid='\"+item.PersonId+\"'&gt;\" + item.UserName + \"&lt;/a&gt;\"), canSort: false),\n        grid.Column(header: \"Role(s)\", columnName: \"Rolebuilder\", canSort: false),\n        grid.Column(header: \"Active\", columnName: \"ActiveIndBuilder\", canSort: false),\n        grid.Column(header: \"Action\", format:\n                                    @&lt;span&gt;&lt;input type=\"button\" class=\"edit-user\" id=\"@item.PersonId\" value=\"EDIT\" /&gt;\n                                    &lt;/span&gt;, canSort: false)\n    )\n)\n</code></pre>\n\n<p>finally the popup view is:</p>\n\n<pre><code>@model CIMsWebApp.Models.PersonModel\n@using (Html.BeginForm(\"Save\", \"Person\", FormMethod.Post, new { id = \"formUser\" }))\n{\n    //code\n\n}\n</code></pre>\n\n<p>When I first arrive at the page or If I refresh it they become active again.</p>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":111,"score":1,"question_id":12244128,"title":"Type safe URL Action in MVC3 issue","body":"<p>I don't like Url.Action(\"string\", \"string) and hence wrote below extension method</p>\n\n<pre><code>public static string Action&lt;TController&gt;(this UrlHelper urlHelper, Expression&lt;Func&lt;TController, object&gt;&gt; actionExpression)\n{\n    var controllerName = typeof(TController).GetControllerName();\n    var actionName = actionExpression.GetActionName();\n\n    return urlHelper.Action(actionName, controllerName);\n}\n</code></pre>\n\n<p>I use it in my razor view like below:</p>\n\n<pre><code>@{Url.Action&lt;ClientController&gt;(action =&gt; action.ClientDetails());}\n</code></pre>\n\n<p>It doesn't render anything. Am I making any mistake anywhere or am I missing anything? Is it possible to do this as I like the Type Safe nature, rather than hard-coding actionnames and controllers?</p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":70,"score":2,"question_id":13013552,"title":"\"proper\" way to pass control to a new page?","body":"<p>I think this is more a \"style\" question than anything else.</p>\n\n<p>I have an MVC application consisting of a main page, where the user enters search criteria, and a list page, where a list of items matching the criteria are displayed.</p>\n\n<p>When the user requests the search on the main page, MainPage.cshtml has this code to call ListPageController to generate the new page:</p>\n\n<pre><code>var ParamString = \n  \"Param1=\" + Param1\n  + \"+Param2=\" + Param2\n  + \"+Param3=\" + Param3\n  + \"+Param4=\" + Param4\n  + \"+Param5=\" + Param5;\nwindow.open(encodeURI(\"/ListPage/ShowList?\" + ParamString), \"_self\");\n</code></pre>\n\n<p>Here is the code for ShowList in ListPageController.cs:</p>\n\n<pre><code>public ActionResult ShowList\n(\n  String p_Param1\n, String p_Param2\n, String p_Param3\n, String p_Param4\n, String p_Param5\n)\n{\n    ListPageModel M = new ListPageModel;\n    M.Param1 = p_Param1;\n    M.Param1 = p_Param2;\n    M.Param1 = p_Param3;\n    M.Param1 = p_Param4;\n    M.Param1 = p_Param5;\n    return View(\"ListPage\", M);\n}\n</code></pre>\n\n<p>ListPage.cshtml then obtains the data through a jQuery Ajax call using the specified parameters.</p>\n\n<p>Is using window.open with a string of parameters the \"correct\" way to do this?  If there are a large number of parameters instead of just five, wouldn't this make the URL rather large?</p>\n\n<p>Or, for example, should the window open call be in ListPageController, which would be called by, say, a jQuery .post call?</p>\n"},{"tags":["c#","windows","asp.net-mvc-3","rights"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13142071,"title":"System.IO.Directory.Move(tempPath, newFolder) throws exception access denied","body":"<p>I am trying to move a folder from one directory to another using this </p>\n\n<pre><code>System.IO.Directory.Move(tempPath, newFolder);\n</code></pre>\n\n<p>I am Administrator on my computer, so I should have full access. I cannot figure out why I get this exception once every two trying.</p>\n\n<p><code>Access to the path 'D:\\&lt;myDirectory&gt;' is denied.</code></p>\n"}]}
{"total":29155,"page":6,"pagesize":100,"questions":[{"tags":["javascript","jquery","asp.net","asp.net-mvc-3","jquery-slider"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13138630,"title":"Background change not working in javascript. whats wrong?","body":"<p>I am using jquery slider, i have a single layout and a center div for content..i need to change the color of the layout while i slide on a different page. This is What i am doing using asp.net mvc3.   </p>\n\n<p>HTML:</p>\n\n<pre><code>    &lt;div id=\"iPhone_Product\"&gt;\n            &lt;div class=\"slides_containeriphone\" &gt;\n                @if (Model == null)\n                {\n                    &lt;div class=\"animateriphone\" id=\"1\" title=\"iphone\"&gt;\n\n                        @Html.Partial(\"`enter code here`_iPhone_Main\")\n\n                    &lt;/div&gt;\n                        &lt;div class=\"animateriphone\" id=\"2\" title=\"salah\"&gt;\n                        @Html.Partial(\"Salah\")\n                    &lt;/div&gt;\n                        &lt;div class=\"animateriphone\" id=\"3\" title=\"tasbeeh\"&gt;\n                        @Html.Partial(\"_Tasbeeh\")\n                    &lt;/div&gt;\n                }\n                else\n                { \n                    foreach (string s in Model)\n                    {\n                        &lt;div class=\"animateriphone\"&gt;\n                            @Html.Partial(s);\n                        &lt;/div&gt;\n                    }\n                }\n\n            &lt;/div&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>Javascript:\n    function color_change() {\n                var ids = new Array();\n                ids[0] = '1';\n                ids[1] = '2';\n                ids[2] = '3';</p>\n\n<pre><code>            for (var item = 0; item &lt; ids.length; item++) {\n                var x = document.getElementById(ids[item]);\n            }\n\n        if (x.id == '1' &amp;&amp; x.title=='iphone') {\n            $(\".st_tabs_container\").css({ \"background-color\": \"#c8c7c7\" });\n\n            }\n            else\n                if (x.id == '2' &amp;&amp; x.title == 'salah') {\n                    $(\".st_tabs_container\").css({ \"background-color\": \"yellow\" });\n                }\n                else\n                    if (x.id == '3' &amp;&amp; x.title == 'tasbeeh') {\n                        $(\".st_tabs_container\").css({ \"background-color\": \"#c8c7c7\" });\n                    }\n                }\n      $(document).ready(function () {\n    color_change();\n    });\n</code></pre>\n\n<p>i have used this javascript to change the background but its not working, any help would be appericiated.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13141645,"title":"How to get viewbag data in Asp.net MVC?","body":"<p>How to get viewbag data, i created one controller in that data is fetch from data base and try to show the data in view but it is not displaying data.  </p>\n\n<pre><code>  public ActionResult Show()\n    {\n        List&lt;Models.Employees&gt; lst = new List&lt;Models.Employees&gt;();\n        Models.Employees obj = new Models.Employees();\n        DataSet ds =new Models.BL.InsertBL().GetShow(obj);\n        lst = (from DataRow drw in ds.Tables[0].Rows\n               select new Models.Employees\n               {\n                   Enames = drw[\"Ename\"].ToString(),\n                   DepartId =Convert .ToInt32(drw[\"Departmentid\"]),\n                   EmailIds = drw[\"Emailid\"].ToString(),\n                   Adress = drw[\"Address\"].ToString()\n               }).ToList();\n        ViewBag.Sasi = lst; \n        return View();\n    }\n\n   @{\n    ViewBag.Title = \"Show\";\n     Layout = \"~/Views/Shared/VideoLayout.cshtml\"; \n      var vv = ViewBag.Sasi;    \n    }\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13136530,"title":"Show different View to Admin and User","body":"<p>I wish to show a different View form my Action method to an Admin and User:</p>\n\n<pre><code>public ActionResult Create()\n{\n    CreateIssue issue = new CreateIssue();\n    if (user.SupportAdmin)\n    {\n        return View(\"Admin/Create\", issue);\n    }\n\n    return View(issue);\n}\n</code></pre>\n\n<p>Then my Views look like this:</p>\n\n<pre><code>@model myApp.Models.CreateIssue\n@{\n    ViewBag.Title = \"IT HelpDesk - Create a new Issue\";\n}\n\n@Html.Partial(\"_Create\")\n</code></pre>\n\n<p>I have put the content inside a Partial called <code>_Create</code> as most of the content is the same, but I want to add an additional input to the Admin view which will sit in the middle of my <code>_Create</code> partial view. I'm not sure how to go about this, I did try to render a <code>section</code> in my Admin create view which is called inside the partial but they're only allowed on the <code>_Layout</code> page I think? </p>\n"},{"tags":["asp.net-mvc-3","file-upload","razor","partial-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13140978,"title":"How to ensure File control has non-empty and valid file name in ASP.Net MVC Razor partail view?","body":"<p>I am working on a ASP.Net MVC 3 application with Razor view.</p>\n\n<p>On click of a link, I open a JQuery Dialog which hosts a partail view. This partial view has a form with a file input control. </p>\n\n<p>This form is bound to Model. But as there is no editorFor file(<code>HttpPostedFileBase</code>) I have manually palced HTML file input control.</p>\n\n<p>How can I make sure that user can submit the form only if file input control has non-empty value and is a valid filename? I use Html.BeginForm to declare the form.</p>\n"},{"tags":["javascript","html","asp.net-mvc-3","internet-explorer","google-chrome"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13138518,"title":"Cursor jumps above the element in ie9","body":"<p>in my MVC3 application I'm switching the cursor when hovering above an -element.</p>\n\n<p>Here's the javascript code:</p>\n\n<pre><code>$('#print').hover(function () {\n    var cursorUrl = 'url(@Url.Content(\"~/Content/img/print_24.ico\")), auto';\n    $(this).css('cursor', cursorUrl);\n});\n</code></pre>\n\n<p>The problem is: google chrome shows it the way it should be. The cursor hovers and the icon is shown on the mouseposition. But internet explorer shows the cursors icon 0,5 - 1cm above the  link. I've tested browsermodus IE7, IE8 and IE9. But the icon is always above the link.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc-3","reference","null"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13139881,"title":"null reference MVC3","body":"<p>I have the following code in my MVC3 homecontroller's Index method. What I am trying is, getting values from my Resource File (.resx) and show them in  a view.</p>\n\n<pre><code>private ResourceManager rm = null;\nprivate ResourcesTexts text;\n\npublic ActionResult Index()\n{\n  text = new ResourcesTexts();\n  rm = new ResourceManager(\"Credit.SiteResources\", Assembly.GetExecutingAssembly());\n  var res = rm.GetResourceSet(CultureInfo.CurrentCulture, true, true);\n\nforeach (DictionaryEntry resource in res)\n{\n  if (resource.Key.ToString().Count() == 14)\n    {\n     string x = resource.Value.ToString();\n    text.myList.Add(x);\n    }\n}\n\nreturn View(text);\n}\n</code></pre>\n\n<p>i am getting null reference error while debugging.</p>\n\n<p>Any Help?</p>\n\n<p>In my view I am trying something like this.</p>\n\n<pre><code>@foreach(var x in Model.myList.Item)\n{\n    &lt;p&gt;@x&lt;/p&gt;\n}\n</code></pre>\n\n<p>How do I solve it?</p>\n"},{"tags":["asp.net-mvc-3","razor","html-helper"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":314,"score":0,"question_id":11603985,"title":"pass data-icon attributes in razor html helper","body":"<p>I want to following html code using asp.net mvc 3 razor html helper:</p>\n\n<pre><code>&lt;input type=\"text\" .... .   placeholder=\"Login\" data-icon=\"user\" /&gt;\n</code></pre>\n\n<p>I have try this one:</p>\n\n<pre><code>@Html.TextBoxFor(m =&gt; m.UserName, new { placeholder = \"Login\", data-icon = \"user\" })\n</code></pre>\n\n<p>or</p>\n\n<pre><code>@Html.TextBoxFor(m =&gt; m.UserName, new { placeholder = \"Login\", @data-icon = \"user\" })\n</code></pre>\n\n<p>Displayed Error:</p>\n\n<pre><code>Invalid anonymous type members declaration.\n</code></pre>\n\n<p>This might due to dash in data-icon not taken as attributes. How could I add data-icon attributes in text box field.</p>\n"},{"tags":["asp.net-mvc-3","asp.net-mvc-4","oauth-2.0","facebook-oauth","oauth-provider"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":308,"score":0,"question_id":12632458,"title":"Can ASP.Net MVC 4's OAuthWebSecurity open a pop-up","body":"<p>I'm trying to figure out how to use ASP.Net MVC 4's new OAuthWebSecurity functionality.  Is it possible when clicking on the facebook or twitter external login button to have the form post to a pop-up instead of refreshing the current page?  I've used oauth with Twitter and Facebook before using Javascript and the external authentication would happen in a pop-up.  After the results is returned asynchronously, the popup would close.  Can i do something similar to this using MVC 4's new OAuthWebSecurity functionality?  Thanks.</p>\n"},{"tags":["asp.net-mvc-3","exception-handling","error-handling","code-smell","design-principles"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":178,"score":1,"question_id":9083376,"title":"MVC global error handling pattern code smells","body":"<pre><code>public ActionResult Foo(int id)\n{\n    if (someCheckFails)\n    {\n        Log.Error(new SomeTypeOfException());\n        return View(\"SomeErrorView\");\n    }\n\n    return View();\n}\n</code></pre>\n\n<p>The above code logs an error and redirects if a failure condition is met (Unauthorised, FileNotFound or whatever).</p>\n\n<p>This doesn't quite smell right to me. It violates DRY and I'm creating an exception which never goes anywhere other than to the logger.</p>\n\n<p>The same can be achieved by setting up GlobalFilters to log and redirect different types of exception, and then simply throwing from any Action</p>\n\n<pre><code>public ActionResult Foo(int id)\n{\n    if (someCheckFails)\n        throw new SomeTypeOfException();\n\n    return View();\n}\n</code></pre>\n\n<p>The above reads nicer, is DRYer, and seems to be the MVC way. However, it occurs to me that what's really going on now is <em>using exceptions for flow control</em>, which everyone knows is bad, right?</p>\n\n<p>What are your thoughts on this? Which above snippet do you prefer? Or is there a third way I have missed?</p>\n"},{"tags":["c#","asp.net-mvc-3","razor","helper","inference"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13138967,"title":"\"The type arguments cannot be inferred from the usage\" in view with custom helper using standard helper","body":"<p>I've got some forms for an MVC3 website with alot of repeating parts. So I tried to make a helper for this. Following an example form the internet i made this:</p>\n\n<pre><code>using System;\nusing System.Linq.Expressions;\nusing System.Web.Mvc;\nusing System.Web.Mvc.Html;\nusing System.Web.Routing;\n\nnamespace Nop.Web.Themes.MyTheme.Extensions\n{\n    public static class FormLineHelper\n    {\n        public static MvcHtmlString FormLine&lt;TModel, TProperty&gt;(this HtmlHelper&lt;TModel&gt; htmlHelper,\n                                                                    Expression&lt;Func&lt;TModel, TProperty[]&gt;&gt; expression,\n                                                                    object htmlAttributes = null)\n        {\n            TagBuilder tag = new TagBuilder(\"tr\");\n            tag.MergeAttributes(new RouteValueDictionary(htmlAttributes), true);\n            var member = (MemberExpression)expression.Body;\n            string propertyName = member.Member.Name;\n\n            tag.InnerHtml += String.Format(\"&lt;td class='label'&gt;{0}&lt;/label&gt;&lt;/td&gt;&lt;td class='field'&gt;{1}&lt;/td&gt;&lt;td class='padding'&gt;{2}&lt;/td&gt;\",\n               htmlHelper.LabelFor(expression), htmlHelper.EditorFor(expression), htmlHelper.ValidationMessageFor(expression));\n\n            return MvcHtmlString.Create(tag.ToString());\n        }\n    }\n}\n</code></pre>\n\n<p>This compiles just fine. However when i do </p>\n\n<pre><code>@model Nop.Plugin.MyPlugin.Models.ViewModel\n\n@{\n    Layout = \"../Shared/_Root.cshtml\";\n}\n\n&lt;div class=\"form\"&gt;\n&lt;div class=\"form-top\"&gt;&lt;/div&gt;\n&lt;div class=\"form-center\"&gt;\n\n@using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n{\n    &lt;table&gt;\n    @Html.FormLine(model =&gt; model.FirstName)\n   &lt;/table&gt;\n}\n&lt;/div&gt;\n&lt;div class=\"form-bottom\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I made sure the web.config contains</p>\n\n<pre><code>&lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n</code></pre>\n\n<p>I get the \"The type arguments cannot be inferred from the usage\" error. Another helper that works similair, but doesn't use the standard helpers works fine. I have also tried this:</p>\n\n<pre><code>@{ Html.FormLine&lt;ViewModel, string&gt;(model =&gt; model.FirstName); }\n</code></pre>\n\n<p>Which gives the error \"Cannot implicitly convert type 'string' to 'string[]'\". </p>\n\n<p>I have seen similair questions but I haven't been able to find an answer. So what am i doing wrong?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","master-pages"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13138517,"title":"How to pass Viewdata value to masterpage in Razor MVC4","body":"<p>I use Directoryservices for login in My page. I need to pass the username to my masterpage to display the username in all the pages.<br/></p>\n\n<p>I got the username and stored it in a ViewData. How to pass the viewdata value in masterpage.<br/> \nMy code : <br/>  </p>\n\n<pre><code> [HttpPost]\n    public ActionResult Index(LoginModels model)\n    {\n        if (ModelState.IsValid)\n        {\n            string DisplayUserName = string.Empty;\n            string LoginUser = model.Userid;\n            string LoginPassword = model.Password;    \n            string  name = model.UserName\n            if (ValidateActiveDirectoryLogin(LoginUser, LoginPassword, out DisplayUserName) == true)\n            {\n                model.UserName = DisplayUserName;\n                ViewData[\"UserName\"] = \"Welcome\" + DisplayUserName;\n                return RedirectToAction(\"Index\", \"MPP\", new { UserID = LoginUser });\n            }          \n            else\n            {\n                ModelState.AddModelError(\"\",\"Invalid Username or Password\");\n            }               \n        }\n        return View();          \n    }\n</code></pre>\n\n<p>In Layout page : </p>\n\n<pre><code>   @{  @ViewData[\"UserName\"]   }\n</code></pre>\n\n<p><br/>\nI tried the following way to display the Username. But it throws nullexception.<br/>\nEDIT :<br/></p>\n\n<pre><code>@foreach (var m in IEnumerable&lt;SampleECommerce.Models.LoginModels&gt;)ViewData[\"UserName\"])\n{ \n    @m.UserName\n} \n</code></pre>\n"},{"tags":["javascript","jquery","ajax","asp.net-mvc-3","relative-path"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":500,"score":2,"question_id":10739783,"title":"Ajax, asp.net mvc3 routes and relative urls","body":"<p>I have an ASP.NET MVC3 application published to a url like this: </p>\n\n<pre><code>http://servername.com/Applications/ApplicationName/\n</code></pre>\n\n<p>In my code, I am using jquery ajax requests like this:</p>\n\n<pre><code>$.get(('a/b/c'), function (data) {}, \"json\");\n</code></pre>\n\n<p>When I run the application locally, the ajax request goes directly to the correct page (being an mvc route) because the local page ends with a \"/\" (<code>localhost/a/b/c</code>).</p>\n\n<p>However, when I publish to <code>http://servername.com/Applications/ApplicationName/</code>, the trailing \"/\" is not always present. The url could be <code>http://servername.com/Applications/ApplicationName</code>, which then causes the ajax request to try to load <code>http://servername.com/Applications/ApplicationNamea/b/c</code>, which fails for obvious reasons.</p>\n\n<p>I have already looked into rewriting the url to append a trailing slash, but A) It didn't work, and B) I feel like it's a poor solution to the problem, and that it would be better to configure the javascript urls to work properly regardless of the local folder setup.</p>\n\n<p>I did try \"../a/b/c\" and \"/a/b/c\", but neither seemed to work.</p>\n\n<p>Thanks in advance for the help!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":37,"score":4,"question_id":13118612,"title":"Difference between \"Response.PermanentRedirect\" and \"Delete Verb in MVC\"","body":"<p>When using \"Response.PermanentRedirect\"</p>\n\n<p>It will return back Http Response Code 301 which means permanent redirection to diferent location. This may not be any value for end user using the browser but for search engines it will help the search engines not to index permanently redirected urls.</p>\n\n<p><strong>Question</strong> - Does <code>Delete Verb</code> in MVC perform the same function ?</p>\n\n<hr>\n\n<p><strong>Post</strong> a new entity as an addition to a URI. <code>Put</code> replaces an entity that is identified by a URI.</p>\n\n<p><strong>Question</strong> - When performing the insert/update, the information is being submitted in both cases. Does it means in case of Insert, <code>Post verb</code> should be used and in case of Update <code>Put verb</code> should be used ?</p>\n"},{"tags":["c","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":46,"score":-5,"question_id":13128000,"title":"Gravar o código Id de uma lista (Mvc3 / C#)","body":"<p>I created a simple list with id, name.\nI filled her, but when she step into the DropDownList and save the command system does not write the code in the database.</p>\n\n<p>I searched a lot but still do not understand how it works to write the code in the database.</p>\n\n<p>Controller:</p>\n\n<pre><code>List&lt;Myclass&gt; list = new List&lt;Myclass&gt;();\n\n            foreach (var item in b) // b and an array of data \n            {\n                Myclass obj = new Myclass();\n                obj.Id = Int32.Parse(item.Value);\n                obj.Name = item.Text;\n                list.Add(obj);\n            }\n\n            ViewBag.status = list;\n</code></pre>\n\n<p>Create.cshtml :</p>\n\n<pre><code>@Html.DropDownList(\"ddlStatus\", new SelectList(ViewBag.status,\"Id\",\"Name\"))\n</code></pre>\n\n<p>Everything is okay in the list</p>\n\n<p>What I do not understand is why even indicating he did not record the ID in the database</p>\n\n<p>Sincerely,</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","partial-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13130955,"title":"Pass callback function to partial view mvc","body":"<p>I have a partial view that is used more than once on my site.  Depending on where you are after you \"Save\" the record it should do something different. </p>\n\n<p>So I was thinking of passing a callback function to the controller as a string and then pass it back to the partial view.</p>\n\n<p>Is there a better way of doing this?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","dhtmlx"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13136242,"title":"dhtmlxScheduler with mvc 3","body":"<p>I have been trying to implement DhtmlxScheduler Standard Edition v.3.5 in to my mvc3 project.\nFollowing the tutorial at <a href=\"http://www.dhtmlx.com/blog/?p=639\" rel=\"nofollow\">http://www.dhtmlx.com/blog/?p=639</a> </p>\n\n<p>The tutorial is in mvc2 I believe and I am having a bit of trouble following it.</p>\n\n<p>Here is my view page;</p>\n\n<pre><code>@*@Page Language=\"C#\" Inherits=\"System.Web.Mvc.ViewPage&lt;dynamic&gt;\";*@\n\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" &gt;\n    &lt;head runat=\"server\"&gt;\n    &lt;title&gt;Index&lt;/title&gt;\n\n    &lt;script src=\"@Url.Content(\"~/Scripts/dhtmlxscheduler.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;link href=\"@Url.Content(\"~/Scripts/dhtmlxscheduler.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt; \n\n    &lt;style type=\"text/css\"&gt;\n        html, body\n        {\n            height:100%;\n            padding:0px;\n            margin:0px;\n        }\n    &lt;/style&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        function init() {\n            scheduler.init(\"scheduler_here\", new Date(2010, 6, 1), \"month\");\n        }\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body onload=\"init()\"&gt;\n    &lt;div id=\"scheduler_here\" class=\"dhx_cal_container\" style='width:100%; height:100%;'&gt;\n        &lt;div class=\"dhx_cal_navline\"&gt;\n            &lt;div class=\"dhx_cal_prev_button\"&gt;&amp;nbsp;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_next_button\"&gt;&amp;nbsp;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_today_button\"&gt;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_date\"&gt;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_tab\" name=\"day_tab\" style=\"right:204px;\"&gt;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_tab\" name=\"week_tab\" style=\"right:140px;\"&gt;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_tab\" name=\"month_tab\" style=\"right:76px;\"&gt;&lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"dhx_cal_header\"&gt;\n        &lt;/div&gt;\n        &lt;div class=\"dhx_cal_data\"&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>When I run this page with out the style-sheet it loads the calender but it is all over the place, so I add the CSS and them I get nothing??</p>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework","serialization"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13136543,"title":"Serializing object with virtual properties using another lighter object","body":"<p>I have got a class which has many virtual properties lazy loaded</p>\n\n<pre><code>public class TestPlan\n{\n    public virtual ICollection&lt;Test&gt; Test { get; set; }\n    public virtual Commercial Commercial { get; set; }\n    ...\n}\n</code></pre>\n\n<p>and this class has to be serialized later in the program. The thing is, as those properties are virtual I've got an error (circular reference) everytime I try to serialize it. <strong>Now here is my question</strong>:</p>\n\n<p><em>My boss told me to use what he calls View Object which is the same object but without the unused properties.</em> What do you think of this? Should I set those unused properties to null or something?</p>\n\n<p><strong>Background</strong>: </p>\n\n<p>The serialized object is meant to be used in an infragistics grid (a nice array). I've already tried using the <code>[ScriptIgnore]</code> attribute on my virtuals but it didn't worked.</p>\n\n<p>I also tried retrieving my TestPlans as <code>database.TestPlans.AsNoTracking().ToList()</code> but got an error (When an object is returned with a NoTracking merge option, Load can only be called when the EntityCollection or EntityReference does not contain objects.)</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-mvc-3","visual-studio"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13136618,"title":"Display Partial View with Json Result Data In Asp.Net MVC3","body":"<p>i have a homecontroller with the following action method;</p>\n\n<pre><code>[HttpPost]\n[Authorize(Roles = \"Admin\")]\npublic JsonResult ProjectAdd(PortfolioViewModel model, int[] categories)\n{\n    using (PortfolioManager pm = new PortfolioManager())\n    {\n        using (CategoryManager cm = new CategoryManager())\n        {\n            if (ModelState.IsValid)\n            {\n                bool status = pm.AddNewProject(model, categories);\n                if (status)\n                {\n                    // ViewBag.Message = \"Inserted Sucessfully :)\";\n                }\n            }\n        }\n        return Json(pm.GetAllProjects());\n    }\n}\n</code></pre>\n\n<p>my view is called \"ProjectAdd.CSHTML\" with following content;</p>\n\n<pre><code>    &lt;table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n        &lt;thead&gt;\n           // the heading goes here\n        &lt;/thead&gt;\n        &lt;tbody id=\"projectsUpdate\"&gt;\n            @Html.Partial(\"_ProjectsPartial\", ViewBag.ProjectsList as IEnumerable&lt;MVC3Resume.Models.PortfolioViewModel&gt;)\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;p&gt;\n\n    @using (Ajax.BeginForm(\"projectAdd\", \"home\", new AjaxOptions { \n        LoadingElementId = \"loading\", \n        LoadingElementDuration = 2000, \n        Url = Url.Action(\"projectAdd\", \"home\"), \n        OnSuccess=\"OnSucess\",\n    }, \n        new { enctype = \"multipart/form-data\" }))\n    {    \n        @Html.ValidationSummary(true)\n        &lt;div id=\"SucessMessage\"&gt;&lt;/div&gt;\n        &lt;fieldset&gt;\n            &lt;legend&gt;Add New Project&lt;/legend&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(model =&gt; model.ProjectHeading)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.EditorFor(model =&gt; model.ProjectHeading)\n                @Html.ValidationMessageFor(model =&gt; model.ProjectHeading)\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.Image)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.TextBoxFor(m =&gt; m.Image, new { type = \"file\" })\n                @Html.ValidationMessageFor(model =&gt; model.Image)\n            &lt;/div&gt;\n            &lt;div class=\"editor-label\"&gt;\n                &lt;label for=\"categories\"&gt;Categories&lt;/label&gt;\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @foreach (var item in ViewBag.Categories as IEnumerable&lt;MVC3Resume.Models.CategoryViewModel&gt;)\n                {\n                    &lt;input type=\"checkbox\" name=\"categories\" value=\"@item.CategoryId\" /&gt;\n                    @item.CategoryName\n                }\n\n            &lt;/div&gt;\n            &lt;p&gt;\n                &lt;input type=\"submit\" value=\"Create\" class=\"submit\" /&gt;\n            &lt;/p&gt;\n        &lt;/fieldset&gt;\n    }\n&lt;/p&gt;\n</code></pre>\n\n<p>my javascript OnSucess function looks like;</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    function OnSucess(resultData) {\n        // all logic goes here\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>SO, my question is how do i get the json result data and populate it in partial view?</strong>\nfollowing is my result json data;</p>\n\n<pre><code>[{\"ProjectId\":1,\"ProjectHeading\":\"heading\",\"ProjecctUrl\":\"url\",\"ProjectLongDescription\":\"descripitn\",\"ProjectShortDescription\":\"...\",\"PromoFront\":false,\"Thumbnail\":null,\"ProjectThubmnail\":\"folio_140_1.jpg\",\"Image\":null,\"ProjectImage\":\"folio_preview640.jpg\",\"CategoryId\":2},{\"ProjectId\":2,\"ProjectHeading\":\"heading 2\",\"ProjecctUrl\":\"url2\",\"ProjectLongDescription\":\"description 2\",\"ProjectShortDescription\":\"...\",\"PromoFront\":false,\"Thumbnail\":null,\"ProjectThubmnail\":\"folio_140_2.jpg\",\"Image\":null,\"ProjectImage\":\"folio_preview640.jpg\",\"CategoryId\":1},{\"ProjectId\":3,\"ProjectHeading\":\"teasting heading\",\"ProjecctUrl\":\"test url\",\"ProjectLongDescription\":\"description\",\"ProjectShortDescription\":\"...\",\"PromoFront\":false,\"Thumbnail\":null,\"ProjectThubmnail\":\"folio_preview640.jpg\",\"Image\":null,\"ProjectImage\":\"folio_preview640.jpg\",\"CategoryId\":1}]\n</code></pre>\n"},{"tags":["asp.net","sql","asp.net-mvc-3","lambda","dbset"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13135741,"title":"ASP.NET MVC3 DbSet how to get a set of instances NOT IN int[] array","body":"<p>I have the fowllowing code:</p>\n\n<pre><code>public string ajax_getAllExercises(int[] exclude_list)\n{\n    JSONResponse&lt;Exercise&gt; res = new JSONResponse&lt;Exercise&gt;();\n\n    db.Configuration.ProxyCreationEnabled = false;\n    res.data = db.Exercises.Where(e =&gt; e.CourseID == null).ToList();\n    if(res.data != null)\n    {\n        res.result = true;\n    }\n\n    // Return the response to browser and set headers\n    Response.AppendHeader(\"Content-Type\", \"application/json\");\n    return res.ToJSON();\n}\n</code></pre>\n\n<p>It is not finished... I am trying to fetch a list of exercies where the ExerciseID is not in the int-array <code>exclude_list</code> and <code>CourseID == null</code>. The problem is I don't know how to create a lambda expression in a <code>Where&lt;&gt;</code> clause so it will get same functionality as a SQL statement like <code>SELECT * FROM Exercises WHERE CourseID == null AND id NOT IN (20,21,22,23)</code>. How can i get this functionality from the DbSet type without using SqlQuery so i still use the EntityFramework?</p>\n"},{"tags":["asp.net-mvc-3","caching"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13135449,"title":"mvc3 simple custom output caching","body":"<p>I'm trying to follow some tutorial where on one place I should override GetVaryByCustomString .... \nCode is following</p>\n\n<pre><code>public override string GetVaryByCustomString(HttpContext context, string arg)\n        {\n            // It seems this executes multiple times and early, so we need to extract language again from cookie.\n            if (arg == \"culture\") // culture name (e.g. \"en-US\") is what should vary caching\n            {\n                string cultureName = null;\n                // Attempt to read the culture cookie from Request\n                HttpCookie cultureCookie = Request.Cookies[\"_culture\"];\n                if (cultureCookie != null)\n                    cultureName = cultureCookie.Value;\n                else\n                    cultureName = Request.UserLanguages[0]; // obtain it from HTTP header AcceptLanguages\n\n                // Validate culture name\n                cultureName = CultureHelper.GetImplementedCulture(cultureName); // This is safe\n\n                return cultureName.ToLower();// use culture name as cache key, \"es\", \"en-us\", \"es-cl\", etc.\n            }\n\n            return base.GetVaryByCustomString(context, arg);\n        }\n</code></pre>\n\n<p>Question is: Where I should put these code, in which class?</p>\n"},{"tags":["javascript","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":164,"score":1,"question_id":9651896,"title":"MVC 3 Razor how to make complex javascript conditional?","body":"<p>I've got this multi-line javascript snippet:</p>\n\n<pre><code>$.getJSON('@Url.Action(\"ReconBases\")', \n          { modelId: selectedModelId },\n          function(selectItems) { \n            buildDropDown('#SelectedReconId', selectItems); \n          });\n</code></pre>\n\n<p>I want to conditionally add this script to the page based on a view model variable, like this:</p>\n\n<pre><code>@if ( Model.GetBases )\n{\n  &lt;snippet above&gt;\n}\n</code></pre>\n\n<p>Can anyone tell me if this is possible and the right syntax for doing this?  I've tried using @: and Html.Raw, but I can't seem to get the right format for it to work.</p>\n"},{"tags":["c#","asp.net-mvc-3","mvccontrib","portable-areas"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13132334,"title":"Portable Areas have Same Controller/Folders","body":"<p>I'm using MVC 3 and MVC Contrib to have portable areas. The problem is, the portable areas have similar views (e.g. Home, User Management...).</p>\n\n<p>For example, each portable area has a Home view (Views/Home/Index.cshtml) and a Home Controller (Controllers/Home.cs). The routing is set up so that to access the page, I would go to MySite/PortableAreaName/Controller/View.</p>\n\n<p>The problem is that it only load the first Portable Area's Home and User Management pages. It finds that view first, then loads it regardless of the area specified in the URL.</p>\n\n<p>I could just prefix everything (e.g. Area1Home, Area1UserManagement), but I'd rather find a more scalable solution. If we get 50+ portable areas each with 10 views, we'd either have to track which view names we used or prefix every single view.</p>\n\n<p>Any suggestions? If you need more info, let me know.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Resolved using the article provided by twang and adding the following code to the Main Project (\"PortableAreas\" in the linked article).</p>\n\n<p>Article: <a href=\"http://elegantcode.com/2012/04/06/mvc-portable-areas/\" rel=\"nofollow\">http://elegantcode.com/2012/04/06/mvc-portable-areas/</a></p>\n\n<p><strong>Main Project > Global.asax.cs</strong></p>\n\n<pre><code>protected void Application_Start()\n{\n    // ...\n    AreaRegistration.RegisterAllAreas();\n    PortableAreaRegistration.RegisterEmbeddedViewEngine();\n    RegisterGlobalFilters(GlobalFilters.Filters);\n    RegisterRoutes(RouteTable.Routes);\n    // ...\n}\n\npublic static void RegisterRoutes(RouteCollection routes)\n{\n    routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n    routes.MapRoute(\n        \"Default\",\n        \"{controller}/{action}/{id}\",\n        new { controller = \"Login\", action = \"Index\", id = UrlParameter.Optional },\n        new string[] { \"PortableAreas.Controllers\" } // main project namespace\n    );\n}\n</code></pre>\n\n<p><strong>Portable Area > MyPortableAreaRegistration.cs</strong></p>\n\n<pre><code>public class MyPortableAreaRegistration : PortableAreaRegistration\n{\n    public override string AreaName\n    {\n        get\n        {\n            return \"MyPortableArea\";\n        }\n    }\n\n    public override void RegisterArea(AreaRegistrationContext context, IApplicationBus bus)\n    {\n        RegisterRoutes(context);\n        RegisterAreaEmbeddedResources();\n    }\n\n    private void RegisterRoutes(AreaRegistrationContext context)\n    {\n        context.MapRoute(\n            AreaName + \"_default\",\n            base.AreaRoutePrefix + \"/{controller}/{action}/{id}\",\n            new { action = \"Index\", id = UrlParameter.Optional },\n            new[] { \"MyPortableArea.Controllers\", \"MvcContrib\" }\n        );\n    }\n}\n</code></pre>\n\n<p>As far as I understand, the following locations are the default for resources:</p>\n\n<ul>\n<li>MyPortableArea/Content/Images</li>\n<li>MyPortableArea/Scripts</li>\n</ul>\n\n<p>As long as you keep your resources in those folders, you shouldn't to register them.</p>\n"},{"tags":["asp.net-mvc-3","devexpress","partial-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":568,"score":0,"question_id":7349337,"title":"Devexpress mvc gridview in NavBar","body":"<p>I want to have navbar with 2 groups and gridview in each group.\nMy gridviews are in partial views</p>\n\n<p>I use them like this:</p>\n\n<pre><code>Html.RenderPartial(\"ManagersGridPartial\", Model)\n</code></pre>\n\n<p>Problem that i cant add  partial view in group.Items</p>\n\n<pre><code>@Html.DevExpress().NavBar(settings =&gt;\n    {\n        settings.Name = \"managersNavBar\";\n        settings.AutoCollapse = false;\n        settings.ExpandButtonPosition = ExpandButtonPosition.Right;\n        settings.SkinID = \"None\";\n        settings.Width = Unit.Percentage(98);\n        settings.Styles.Item.Paddings.Padding = 0;\n\n\n        settings.Groups.Add(group =&gt;\n        {\n            group.Text = \"First group\";\n            group.Items.Add(\"aaaaaaaasssssdddddd\");\n        });\n        settings.Groups.Add(group =&gt;\n        {\n            group.Text = \"Second group\";\n\n            group.Items.Add(\"asdasdasd\");\n        });\n\n\n    }).GetHtml()\n</code></pre>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":201,"score":0,"question_id":11446280,"title":"\"Null\" Foreign key relationship creating record on MVC3 + EF","body":"<p>I'm using EF + MVC3 + razor\nI have my userProfile model class with a Name, Surname variables + a foreign key Hobby (as I want to see it as a dropdown)\nI created a controler simply selecting this clase and Data Context. </p>\n\n<p>When I try to create the record, it doesn’t let me, as it says in the validation area: \"The Hobby field is required. \" . \nI want the \"Hobby\" dropdown not to be required. \nHow can I acomplish that?!.. </p>\n\n<p>This is what I have: </p>\n\n<p>Model:</p>\n\n<pre><code>public class UserProfile    {\n    [Key]\n    public int Id { get; set; }\n    [Required]\n    public string Name { get; set; }\n    [Required]\n    public string Surname { get; set; }\n\n    public int HobbiesId { get; set; }\n    public virtual Hobby Hobby { get; set; }}\n\npublic class Hobby\n{\n    public int HobbiesId { get; set; }\n    public string HobbieName { get; set; }\n    public virtual ICollection&lt;UserProfile&gt; UserProfiles { get; set; } \n}\n\n public class UserProfileDBContext : DbContext\n{\n    public DbSet&lt;UserProfile&gt; UserProfiles { get; set; }\n    public DbSet&lt;Hobby&gt; Hobbies{ get; set; }\n }\n</code></pre>\n\n<p>View: </p>\n\n<pre><code>[..]@using (Html.BeginForm()) {\n@Html.ValidationSummary(true)\n&lt;fieldset&gt;\n    &lt;legend&gt;UserProfile&lt;/legend&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Name)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Name)\n        @Html.ValidationMessageFor(model =&gt; model.Name)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Surname)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Surname)\n        @Html.ValidationMessageFor(model =&gt; model.Surname)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.HobbyId, \"Hobby\")\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.DropDownList(\"HobbyId\", String.Empty)\n        @Html.ValidationMessageFor(model =&gt;  model.HobbyIdId)\n    &lt;/div&gt;\n[..]\n</code></pre>\n\n<p>The controller's create is: </p>\n\n<pre><code>   [HttpPost]\n    public ActionResult Create(UserProfile userprofile)\n    {\n        if (ModelState.IsValid)\n        {\n            db.UserProfiles.Add(userprofile);\n            db.SaveChanges();\n            return RedirectToAction(\"Index\");  \n        }\n\n        ViewBag.HobbyId = new SelectList(db.Hobbies, \"HobbyId\", \"Hobby\", userprofile.HobbyId);\n return View(userprofile); }\n</code></pre>\n\n<p>I already tried modifying: </p>\n\n<pre><code> public class Hobby\n{\n    public int ?HobbiesId { get; set; }\n</code></pre>\n\n<p>but it didn't work.</p>\n\n<p>Any help?.. </p>\n\n<p>Thanks in advance!.. </p>\n\n<p>PnP</p>\n"},{"tags":["asp.net-mvc-3","iis","redirect","url-rewriting","dns"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":13132276,"title":"how to completely redirect all requests for one domain to another?","body":"<p>I have a .net mvc3 website hosted on godaddy (Deluxe 4GH plan) with an SSL and a dedicated IP address (173.201.<em>.</em>） recently ,I noticed that there is a strange domain (let's say www.strange-domain.com) <strong>which is also pointing to my dedicated IP address</strong> (173.201.<em>.</em>）.that is ,besides my own domain (say ,www.my-domain.com), this new strange domain can also access every part of my site (my application) including the admin area! I really do not want this kind of thing to happen because for the point of SEO ,the search engine  may think that two domains pointing to the same site is a kind of cheating.</p>\n\n<p>So I contacted godaddy ,they said that they can not do anything to prevent someone from pointing  his own domain to my dedicated IP address.I think it's true ,yes ,it's up to the domain owner.\nNow ,I need to implement one mechanism that can redirects all the requests of that strange domain to my own domain without the visitors know it . that is : if a visitor is requesting \n<strong>www.strange-domain.com/some/path/to/page</strong> ,then he will be redirected to <strong>www.my-domain.com/some/path/to/page</strong>  well if this can not be done ,the at least the visitor should be redirected to my domain's home page :<strong>www.strange-domain.com</strong></p>\n\n<p>I know that this maybe done with the IIS url rewriting .I tried but failed.I really not good at doing this. so may be you can help me by give me a detail implementation of this ?</p>\n\n<p>also ,since my site is powered by .NET MVC3, if the url rewriting does not work ,I want to know  if I can do it with some .NET MVC3 features ,such as the routing system,Global.asax .... if both can achieve this ,which one is preferred ,and why :)   so many questions , thank you all in advance!:)</p>\n\n<p><strong>update1:</strong>\nnow ,I have the following rewrite rules.</p>\n\n<pre><code>&lt;rewrite&gt;\n&lt;rules&gt;\n    &lt;rule name=\"Redirects to www.my-domain.com\" patternSyntax=\"ECMAScript\" stopProcessing=\"true\"&gt;\n        &lt;match url=\".*\" /&gt;\n        &lt;conditions logicalGrouping=\"MatchAny\"&gt;\n            &lt;add input=\"{HTTP_HOST}\" pattern=\"^www.my-domain.com$\" negate=\"true\" /&gt;\n        &lt;/conditions&gt;\n        &lt;action type=\"Redirect\" url=\"http://www.my-domain.com/{R:0}\" /&gt;\n    &lt;/rule&gt;\n&lt;/rules&gt;\n</code></pre>\n\n<p></p>\n\n<p>I think it is taking affect now ,since both the requests for my-domain.com(with out www prefix ) and strange-domain.com (also without wwww) are now getting the folowing error:</p>\n\n<p><img src=\"http://i.stack.imgur.com/bIweT.jpg\" alt=\"enter image description here\">\ncan you please give me any other ideas? thank you !</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":9,"score":1,"question_id":13134493,"title":"ASP.NET MVC stops executing actions when runAllManagedModulesForAllRequests=false","body":"<p>When I set <code>runAllManagedModulesForAllRequests=false</code> to increase MVC performance the MVC stops executing Actions like <code>[ActionName(\"membership.asp\")]</code>. I get <code>404</code> error on <code>IIS7.5</code>.\nAny idea how to solve this?</p>\n"},{"tags":["asp.net-mvc-3","iis","crystal-reports"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":884,"score":1,"question_id":9809287,"title":"ASP .NET + IIS + Crystal Reports + Load report failed","body":"<p>I am developping a web application by using the ASP .NET MVC 3 framework.<br>\nI have implemented an ASPX page containing a CrystalReportViewer control.</p>\n\n<p>I instantiate a ReportDocument object in my Page_Load event method of my ASPX page.<br>\nThen I load a RPT file by using the Load method of my ReportDocument.</p>\n\n<p>My RPT is correctly loaded when I use the VS2010 development web server and I can view it through my viewer.<br>\nBut the call to the Load method of my ReportDocument raises an exception when I use my IIS 5.1 local web server.</p>\n\n<p>Here are some information about the exception :</p>\n\n<ul>\n<li>Exception Type : CrystalReportsException</li>\n<li>Message : Load report failed</li>\n<li><p>StackTrace :</p>\n\n<p>à CrystalDecisions.ReportAppServer.ReportClientDocumentWrapper.EnsureDocumentIsOpened()<br>\nà CrystalDecisions.CrystalReports.Engine.ReportDocument.Load(String filename, OpenReportMethod openMethod, Int16 parentJob)<br>\nà CrystalDecisions.CrystalReports.Engine.ReportDocument.Load(String filename)<br>\nà ASP.aspnetforms_editionresultats_aspx.Page_Load(Object sender, EventArgs e) dans .aspx:ligne 43<br>\nà System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e)<br>\nà System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)<br>\nà System.Web.UI.Control.OnLoad(EventArgs e)<br>\nà System.Web.UI.Control.LoadRecursive()<br>\nà System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)</p></li>\n</ul>\n\n<p>Does someone know why the exception is raised when I use IIS ?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","learn"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":66,"score":-3,"question_id":13119710,"title":"Best ways learn mvc views","body":"<p>mvc concepts controller and model but I'm a little bit confused about creating views, how can I easily learn this? Is there any standard procedure?</p>\n"},{"tags":["asp.net-mvc-3","unobtrusive-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13133221,"title":"Getting error while using unobtrusive ajax in mvc 3","body":"<p>I'm trying to make a ajax request from my view, which will post &amp; get some data at the same time. I want to use the retrieved data to update a div content on that view page. Here is the code:</p>\n\n<p>My View:</p>\n\n<pre><code>&lt;div id=\"NewComment\" style=\"height: auto; width: 850px; background-color: Silver;\n    margin-top: 10px;\"&gt;\n    @{\n        AjaxOptions ajaxopts = new AjaxOptions { UpdateTargetId = \"Comments\" };\n    }\n    @using (Ajax.BeginForm(\"NewComment\", ajaxopts))\n    {\n        @Html.ValidationSummary()\n        &lt;span style=\"margin-left: 10px\"&gt;\n            @Html.TextAreaFor(x =&gt; x.Comments.Comments, new { @class = \"Comment\" })\n        &lt;/span&gt;\n        @Html.TextBoxFor(x =&gt; x.Posts.PostID, new { @class = \"PID\" })\n\n        &lt;br /&gt;\n        &lt;span style=\"margin-left: 10px\"&gt;\n            &lt;input type=\"submit\" value=\"Post\" style=\"height: 50px; width: 100px; text-align: center;\n                font-size: larger\" /&gt;&lt;/span&gt;\n\n    }\n&lt;/div&gt;\n&lt;div id=\"Comments\"&gt;\n    @{\n        if (Model.CommentList != null)\n        {\n            foreach (var y in Model.CommentList)\n            {\n        &lt;div id=\"DisplayComment\" style=\"height: auto; width: 500px; background-color: #559988;\n            margin-top: 10px; margin-left: 10px;\"&gt;\n            @y.UserName says:\n            &lt;br /&gt;\n            @y.Comment1\n            &lt;br /&gt;\n        &lt;/div&gt;\n            }\n        }\n        else\n        {\n        &lt;div id=\"DisplayNoComment\" style=\"height: auto; width: 500px; background-color: Yellow;\n            margin-top: 10px; margin-left: 10px;\"&gt;\n            @Html.Label(\"Be First to make a comment\")\n        &lt;/div&gt;\n        }\n    }\n&lt;/div&gt;\n</code></pre>\n\n<p>My Controller:</p>\n\n<pre><code>[HttpPost]\n    public ActionResult NewComment(PostComment model)\n    {\n        var business = new Business();\n        var entity = new Comment();\n\n        //**For inserting comments\n        entity.Comment1 = model.Comments.Comments;\n        entity.PostID = model.Posts.PostID; \n        entity.UserID = business.GetUserID(User.Identity.Name);\n        entity.UserName = User.Identity.Name;\n\n        business.PostComment(entity);\n        //For inserting comments**\n\n\n        //**for getting comments\n        var viewmodel = new PostComment();\n        if (business.GetAllComment(model.Posts.PostID) == null)\n        {\n        }\n        else\n        {\n            viewmodel.CommentList = business.GetAllComment(model.Posts.PostID);\n        }\n        //for getting comments**\n\n        return View(\"Comments\", viewmodel);\n    }\n</code></pre>\n\n<p>I'm returning a partial view named comments with the required data, everything is working fine but having a wired problem. Though I'm not using any master page in my partial view but still its showing the contents form master page. So the original view page showing the contents from master page like header &amp; footer twice. Please help.</p>\n"},{"tags":["ajax","asp.net-mvc","asp.net-mvc-3","model-binding","kendo-ui"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":127,"score":1,"question_id":13004986,"title":"Model binding the sort field from KendoUI Grid","body":"<p>I'm using KendoUI Grid to show data. I have server paging working like a charm. The each page change in the kendo grid is a new ajax request to the server and the server returns the correct page of data. I am now trying to do server-side sorting, but I'm having trouble getting model binding to bind to the sort values.</p>\n\n<p>This is what the request from the Kendo Grid looks like:</p>\n\n<p><img src=\"http://i.imgur.com/ltlSB.png\" alt=\"\"></p>\n\n<p>My action method looks like this:</p>\n\n<pre><code>public JsonResult GetReports(int pageSize, int skip, List&lt;KendoSort&gt; sort)\n{\n    // sort is not being populated with the right data.\n}\n</code></pre>\n\n<p>KendoSort is a custom class:</p>\n\n<pre><code>public class KendoSort\n{\n    public string Field { get; set; }\n    public string Dir { get; set; }\n}\n</code></pre>\n\n<p>I know I'm not doing this right. How should my action method look to correctly capture the data supplied for the sort? The screenshot shows only a single item in the sort collection, but the grid could pass more. For example, it could also have included an additional sort:</p>\n\n<pre><code>sort[1][field]: reportName\nsort[1][dir]: asc\n</code></pre>\n\n<p>Basically it would be saying \"sort by id in ascending order, then by reportName in ascending order\". How can I get this data into my action method without having to poke around in <code>Request</code> and manually parse the parameters?</p>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-ajax","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":161,"score":0,"question_id":13126253,"title":"Post model to controller using ajax jquery in MVC3","body":"<p>Can somebody help me how can I post model back to controller using jQuery and ajax.</p>\n\n<p>When I post my form, my controller is receiving an empty model. Please corrent me where I am doing a mistake.</p>\n\n<p>Model:</p>\n\n<pre><code>public class AllocateToStore\n    {\n        public IList&lt;OrderLine&gt; FailureAllocations { get; set; }\n        public IList&lt;SelectListItem&gt; AllocationStatus\n        {\n            get\n            {\n                // code to fetch list.\n            }\n        }\n    }\n\n public class OrderLine\n    {\n        public long Id { get; set; }\n        public DateTime Date { get; set; }\n        public int Status { get; set; }\n    }\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>public ActionResult AutoAllocate()\n        {\n// This action will load the view with data.\n// Get model data and send it to view.\n\n            return View(\"Allocated\",model);\n        }\n\n        [HttpPost]\n        public ActionResult ResolveUnallocatedOrders(AllocateToStore coll)\n        {\n// When user changes the selection in grid and post the page I need to get the selection // here. So that I can update that record.\n            return null;\n        }\n</code></pre>\n\n<p>And view is</p>\n\n<pre><code> @model AllocateToStore\n    @{\n        ViewBag.Title = \"Orders\";\n    }\n    @{\n        var grid = new WebGrid(Model.FailureAllocations, rowsPerPage: 100);\n    }\n\n\n        if (Model.FailureAllocations.Any())\n        {\n     &lt;form&gt;\n        &lt;div&gt;\n            @grid.GetHtml(\n                    columns: grid.Columns(\n                        grid.Column(columnName: \"Order date\", header: \"Order Date\", format: item =&gt; item.Order.Date),\n                       grid.Column(\"dropdown\", header: \"Resolution\", format:\n                                                                   @&lt;span&gt;\n                                                                       @{ var index = Guid.NewGuid().ToString(); }\n                                                                       @Html.Hidden(\"FailureAllocations.Index\", index)\n                                                                       @Html.Hidden(\"FailureAllocations[\" + index + \"].Id\", (long)item.Id)\n                                                                       @Html.DropDownList(\"FailureAllocations[\" + index + \"].Status\", new SelectList(Model.AllocationStatus, \"Value\", \"Text\", item.Status))\n                                                                   &lt;/span&gt;\n                     )\n                    ),\n                    tableStyle: \"expandable-table\",\n                    htmlAttributes: new { id = \"gridFailureAllocations\" }\n                )\n            &lt;br /&gt;\n            &lt;input type=\"submit\" value=\"Resolve\" id=\"resolve-button\" /&gt;\n        &lt;/div&gt;\n&lt;/form&gt;\n        }\n\n\n  @section scripts\n{\n    &lt;script&gt;\n        $(\"#resolve-button\").click(function () {\n            debugger;\n            alert(\"here\");\n            $.ajax({\n                url: '/OrderProcessing/ResolveUnallocatedOrders',\n                data: $('#form').serialize(),\n                type: 'POST'\n            });\n        });\n    &lt;/script&gt;\n} \n</code></pre>\n\n<p>Thanks,\nNaresh</p>\n"},{"tags":["asp.net","asp.net-mvc-3","iis-7.5","asp.net-mvc-3-areas"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":13110692,"title":"Session variables lost mvc","body":"<p>I have an MVC 3 application, it use  asp validation\nwhen the user logs in the app the validadion succeed and sotore user name in a session variable.</p>\n\n<p>At here everithing works fine. </p>\n\n<p>then in the AccountController i Set a RedirectionToAction, to another controller, here the session variables are lost. </p>\n\n<pre><code>**//HERE THE VARIABLES ARE LOST AND AN ERROR HAPPENS**\nreturn RedirectToAction(\"menuOtbr\", \"Menu\", new { area = \"Configuracion\" });\n</code></pre>\n\n<p>I've tryed </p>\n\n<ol>\n<li>Change from InProc to ServerState and problem persists, </li>\n<li>Deactivate my AV.</li>\n<li><p>Adding protected <strong>void Session_Start(){}</strong> nothing happens. the session doesn't start or restart again.</p></li>\n<li><p>Other many suggestions almost all articles published with this related topic was readed an applyed by me.</p></li>\n</ol>\n\n<p>here is my code: </p>\n\n<pre><code>        [HttpPost]\n    public ActionResult LogOn(LogOnModel model, string returnUrl)\n    {\n        if (ModelState.IsValid)\n        {\n            //  Se inicializa variables para el gestor de mensajes \n            SessionBag.Current.ErrorMessageAuto = new ArrayList();\n            SessionBag.Current.ErrorMessage = null;\n            SessionBag.Current.ErrorReturnTo = null;\n\n            //Se verifica si el usuario es válido en el contexto de SQL Server, esto para guardar \n             //compatibilidad con el diseño de Merlin para Escritorio.\n            Db_Conexion db = new Db_Conexion(model.UserName,model.Password);\n            if (!db.connect())\n            {\n                model.UserName = null;\n                model.Password = null;\n                SessionBag.Current.ErrorReturnTo = \"link\";\n                SessionBag.Current.ErrorMessage = db.ExceptionsText();\n                return View(\"Mensajes\");\n            }\n            db.close();\n\n            if (Membership.ValidateUser(model.UserName, model.Password))\n            {\n                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);\n                SessionBag.Current.UserName = model.UserName;\n\n                if (Url.IsLocalUrl(returnUrl) &amp;&amp; returnUrl.Length &gt; 1 &amp;&amp; returnUrl.StartsWith(\"/\")\n                    &amp;&amp; !returnUrl.StartsWith(\"//\") &amp;&amp; !returnUrl.StartsWith(\"/\\\\\"))\n                {\n                    return Redirect(returnUrl);\n                }\n                else\n                {\n                    **//HERE THE VARIABLES ARE LOST AND AN ERROR HAPPENS**\n                    return RedirectToAction(\"menuOtbr\", \"Menu\", new { area = \"Configuracion\" });\n                }\n            }\n            else\n            {\n                ModelState.AddModelError(\"\", \"The user name or password provided is incorrect.\");\n            }\n        }\n\n        // If we got this far, something failed, redisplay form\n        return View(model);\n    }\n</code></pre>\n\n<p>I have the account controller at root's project and another controllers structured by areas.</p>\n\n<p><img src=\"http://i.stack.imgur.com/3vqLc.png\" alt=\"Project Structure\"></p>\n\n<p>Almost 10 days spent trying to solve this. Any Ideas, help would be very apreciated.</p>\n\n<p>The same error happens boot at deployment or production. </p>\n\n<p>This article <a href=\"http://stackoverflow.com/questions/3839894/losing-my-session-variables-what-exception-might-cause-sessions-to-be-lost/13027555\">Losing my session variables - What exception might cause sessions to be lost?</a></p>\n\n<p>say about some IIS configuration. But doesn't explain exactly what things need to be configured.</p>\n\n<p>SessionBags Code</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Dynamic;\n\nnamespace ParadigmaNet.Infraestructure\n{\npublic sealed class SessionBag : DynamicObject\n{\n    private static readonly SessionBag sessionBag;\n\n    static SessionBag()\n    {\n        sessionBag = new SessionBag();\n    }\n\n    private SessionBag()\n    {\n    }\n\n    private HttpSessionStateBase Session\n    {\n        get { return new HttpSessionStateWrapper(HttpContext.Current.Session); }\n    }\n\n    public override bool TryGetMember(GetMemberBinder binder, out object result)\n    {\n        result = Session[binder.Name];\n        return true;\n    }\n\n    public override bool TrySetMember(SetMemberBinder binder, object value)\n    {\n        Session[binder.Name] = value;\n        return true;\n    }\n\n    public override bool TryGetIndex(GetIndexBinder\n           binder, object[] indexes, out object result)\n    {\n        int index = (int)indexes[0];\n        result = Session[index];\n        return result != null;\n    }\n\n    public override bool TrySetIndex(SetIndexBinder binder,\n           object[] indexes, object value)\n    {\n        int index = (int)indexes[0];\n        Session[index] = value;\n        return true;\n    }\n\n    public static dynamic Current\n    {\n        get { return sessionBag; }\n    }\n}\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","asp.net-mvc-4"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":7669,"score":4,"question_id":5710140,"title":"How do I create a MVC3 razor template for DisplayFor()","body":"<p>I have a couple of properties in my view model that are display-only but I need to retrieve their values using jQuery to perform a calculation on the page. The standard <em>Html.DisplayFor()</em> method just writes their value to the page. I want to create a razor template that will allow me to render each element as:</p>\n\n<pre><code>&lt;span id=\"ElementsId\"&gt;Element's value&lt;/span&gt;\n</code></pre>\n\n<p>I know I can specify a template in <em>Html.DisplayFor()</em> to use a particular template for rendering the property but within that template how do I identify the <em>id</em> attribute to write into the <em>span</em> tag?</p>\n\n<pre><code>@Html.DisplayFor(model =&gt; model.Element, \"MyTemplate\");\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","query-string"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":13129334,"title":"Including All querystring parameters in Html.ActionLink","body":"<p>In my page i have </p>\n\n<pre><code> @using (Html.BeginForm(\"list\", \"menu\", FormMethod.Get))\n    {\n        &lt;div&gt;\n           Show categories:\n            @Html.DropDownList(\"groupName\", (SelectList)ViewBag.groups)\n            &lt;input id=\"Submit1\" type=\"submit\" value=\"Show\" /&gt;\n        &lt;/div&gt;\n    }\n</code></pre>\n\n<p>Regarding the option the user choose i generate a list and the Querystring in my address going to be like :</p>\n\n<pre><code>localhost/menu/list?groupName=controlpanel\n</code></pre>\n\n<p>My problem is when i use HtmlActionLink for example :</p>\n\n<pre><code>@Html.ActionLink(\"Title\", \"List\", new { foo = item.foo})\n</code></pre>\n\n<p>What i got in result is result is :</p>\n\n<pre><code>localhost/menu/List?foo=123\n</code></pre>\n\n<p>instead of :</p>\n\n<pre><code> localhost/menu/List?foo=123&amp;groupName=controlpanel\n</code></pre>\n\n<p>Am i missing something ??</p>\n"},{"tags":["asp.net","asp.net-mvc-3","global-asax"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13129165,"title":"asp.net mvc3 can Global.asax accept controller-less and action-less parameters?","body":"<p>I would like to have a default parameter for the URL so that when the user sends an argument on its own, such as:</p>\n\n<p><a href=\"http://mysite.com/argument\" rel=\"nofollow\">http://mysite.com/argument</a></p>\n\n<p>that argument gets (invisibly) routed first to SomeController/SomeAction/ID=argument and then, if not found to a 404 or 301.</p>\n\n<p>I'm hoping that global.asax RegisterRoutes would have this functionality. Any help would be greatly appreciated.</p>\n"},{"tags":["asp.net-mvc-3","sql-server-2008","dapper"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13127886,"title":"Dapper returns null for SingleOrDefault(DATEDIFF(...))","body":"<p>I have a SQL statement similar to:</p>\n\n<p><code>SELECT DATEDIFF(Day, startDate, endDate) FROM Data WHERE ProjectId=@id</code></p>\n\n<p>In the case where <code>Data</code> doesn't have any records for <code>ProjectId</code>, SQL Server returns null.</p>\n\n<p>In Dapper, I execute this via:</p>\n\n<p><code>value = conn.Query&lt;int&gt;(\"...\").SingleOrDefault()</code></p>\n\n<p>In this case, I expect the semantics of <code>SingleOrDefault</code> to mean \"if this is null, return zero.\" In fact, my code is even more zero-friendly:</p>\n\n<pre><code>int toReturn = 0;\nusing (var conn = ...) {\n  toReturn = conn.Query&lt;int&gt;(\"SELECT DATEDIFF(...))\");\n}\nreturn toReturn;\n</code></pre>\n\n<p>When I debug and step into this code, I find that the line <code>yield return (T)func(reader)</code> is throwing a null pointer exception.</p>\n\n<p>Am I doing something wrong here, or is this by design?</p>\n\n<p>(FYI, the work-around is to wrap my select in an <code>ISNULL(..., 0)</code>)</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","telerik-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13127329,"title":"Treeview (Kendo UI) with TextBox on the same page best practices in MVC4?","body":"<p>Let's say I have a view with Kendo treeview bounded to remote data source.</p>\n\n<pre><code>@(Html.Kendo().TreeView()\n    .Name(\"schemas\")\n    .DataTextField(\"name\")\n    .DataSource(dataSource =&gt; dataSource.Read(read =&gt; read.Action(\"Schemas\", \"Forms\")))\n    .Events(events =&gt; events\n    .Select(\"onSelected\")))\n</code></pre>\n\n<p>So the treeview just makes a call to the <code>Schemas</code> action in my <code>FormsController</code></p>\n\n<p>Also on the same page I have a form, which is simply the textbox and a button to submit the form</p>\n\n<pre><code>@using (Html.BeginForm(\"Load\", \"Forms\", FormMethod.Post))\n{   \n    &lt;div id=\"rootNode\"&gt;\n        @Html.TextBox(\"rootElementName\")            \n        @Html.Button(\"next\")\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p>So I am just wondering what is the best way to handle user input and pass it to the the <code>Load</code> action of the <code>FormsController</code>? The user should select one of the options in the treeview and enter the value into textbox.\nOr should I create some sort of viewmodel for my view with all my nodes inside + two additional fields for the textbox input and selected node?</p>\n"},{"tags":["jquery","asp.net-mvc-3","validation"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13125608,"title":"Advanced form validation - Recommended points of validation","body":"<p>I have just finished up an online form using ASP.net MVC3 with unobtrusive.  I have all the standard validation on the form fields, such as Required fields, date formats, etc.  Now I am wondering if there is any recommended 'advanced' validation I should do to safeguard against SQL injection, etc.  For example, I have several textareas and the only validation on them is that they are required.</p>\n\n<p>Please let me know what you recommend, or even better, a link to a reference with form validation recommendations.</p>\n\n<p>EDIT:  I am not looking for tutorials on HOW to do validation, just looking for recommendations on WHAT to validate.  For example, I have textboxes for names and dates, textareas for large comments, etc.  All the basic validation is done and working great.  I guess my main concern right now is guarding against SQL injection.  I will look into reg ex validation for this.  Thank you.</p>\n\n<p>Thank you for reading.</p>\n"},{"tags":["asp.net-mvc-3","razor","asp.net-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13094663,"title":"No view updating after viewmodel been changed","body":"<p>can't find whats wrong and can't find answer anywhere. My problem is my view not updated after view model have bean changed</p>\n\n<p>ViewModel:</p>\n\n<pre><code>public class OrderView\n{\n    public Customer Customer { get; set; }\n    public Order Order { get; set; }\n}\npublic class Order\n{\n    public int OrderId { get; set; }\n    public int CustomerId { get; set; }\n    public List&lt;string&gt; DomenNames { get; set; }\n}\npublic class Customer\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public string Telephone { get; set; }\n    public string Email { get; set; }\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>private OrderView ov;\npublic ActionResult Index()\n{\n    return View(ov);\n}\n\n[HttpPost]\npublic ActionResult Index(OrderView model, FormCollection collection) {            \n    return View(\"done\");\n}\npublic ActionResult BlankEditorRow(OrderView model) {\n    ov = model;\n    ov.Order.DomenNames.Add(\"\");\n    return View(\"Index\",ov) ;\n}\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>@using (Html.BeginForm(\"Index\",\"Order\",FormMethod.Post, new {id = \"createOrder\"})) {\n@Html.ValidationSummary(true)\n&lt;fieldset&gt;\n    &lt;legend&gt;Order&lt;/legend&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Order.DomenNames)\n    &lt;/div&gt;\n\n    @for(int i = 0; i &lt; Model.Order.DomenNames.Count; i++) {\n        &lt;div&gt; \n            @Html.EditorFor(item =&gt; item.Order.DomenNames[i])\n        &lt;/div&gt;\n    }\n\n    &lt;button type=\"button\" id=\"b1\" onclick=\"setallert()\" &gt;Click me&lt;/button&gt;\n ...\n</code></pre>\n\n<p>and script:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    function setallert() {\n        $.ajax({\n            url: \"Order/BlankEditorRow\",\n            data: $('#createOrder').serialize(),\n            cache: false,\n            success: function (data) {\n                ...?\n            }\n        });\n    };    \n&lt;/script&gt;\n</code></pre>\n\n<p>it goes fine to pass model to controller and while debugging through view I can see that model is changed, but in some case it nothing happen in view. It looks like old model is in place.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":812,"score":0,"question_id":5463135,"title":"Sharing a cshtml file with UI designer team who doesn't have .NET IDE","body":"<p>We are working on an ASP.NET MVC 3 project and taking advantage of Razor syntax to resolve paths and what not.</p>\n\n<p>We are also employing a UI design team who is responsible for maintaining the design of our pages through the use of CSS and modifying the HTML in the cshtml pages.</p>\n\n<p>The problem is, they work exclusively on Mac laptops without access to a web server or a .NET IDE.</p>\n\n<p>Initially, they were just providing us a straight .html file along with a .css file and we were manually merging in their work into our ASP.NET solution (e.g., replacing paths with Razor markup, etc), but as the project grows and we become more involved, we are looking for a solution that will save us from these manual merges.</p>\n\n<p>I was thinking I could create some kind include script that would rewrite the paths depending on whether the UI designers were editing the file, or the .NET devs, but this seems archaic.</p>\n\n<p>Anyone out there been in this situation before?</p>\n"},{"tags":["asp.net-mvc-3","session","globalization","httpcontext","cultureinfo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13119030,"title":"Application_AcquireRequestState() fires multiple times","body":"<p>I use this following method in mvc3 appliacation:</p>\n\n<pre><code>protected void Application_AcquireRequestState(object sender, EventArgs e)\n        {\n          if (HttpContext.Current.Session != null)\n            {\n                CultureInfo ci = (CultureInfo)this.Session[\"Culture\"];\n\n                if (ci == null)\n                {\n                    string langName = \"az\";\n                    ci = new CultureInfo(langName);\n                    this.Session[\"Culture\"] = ci;\n                }\n\n                Thread.CurrentThread.CurrentUICulture = ci;\n                Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture(ci.Name);\n            }\n        }\n</code></pre>\n\n<p>Why does this method calling many times?\nAnd when site opens in new browser in other pc, site resources not found.</p>\n"},{"tags":["asp.net-mvc-3","view","partial","telerik-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":220,"score":0,"question_id":7998374,"title":"render partial view from a grid selection in mvc3","body":"<p>I have a telerik grid in an MVC 3 Razor project.  Next to the grid is a partial view that uses an appropriate model template.  How would I go about using the onRowSelect to render the partial view with the index from the row selected.  Essentially its calling a javascript, in the java script it specifies the index int I want to pass to the partial view.  However, I am unable to render the partial view with the new index. \nAny thoughts?</p>\n"},{"tags":["c#","asp.net-mvc-3","value-provider"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":124,"score":2,"question_id":11509274,"title":"ASP.net MVC JsonValueProvider byte type issue","body":"<p>I am posting JSON to a controller method, and it appears as if the JsonValueProvider included with ASP.Net MVC 3 is broken when it tries to cast JSON numbers into the byte type.</p>\n\n<p>Basically what is happening is that any non-null value that needs to be turned into a byte is null and my model state has errors with no error messages. As seen in the issue list in the return JSON. dnbscore and region have errors, but rating does not. The returned data has dnbscore and region as null even though when the JSON was passed, those fields had values. I can take care of this with a custom model binder, but I wonder if there is a different approach to make the JsonValueProider work as I expect it to.</p>\n\n<p>This is the object that I am trying to build:</p>\n\n<pre><code>public class APICustomerDetailsDTO\n{\n    public int customerid { get; set; }\n\n    [StringLength(30)]\n    public string customername { get; set; }\n    public decimal? globalcredit { get; set; }\n    [Range(0,5)]\n    public byte? rating { get; set; }\n    [Range(0, 100)]\n    public byte? dnbscore { get; set; }\n    [Range(0, 8)]\n    public byte? region { get; set; }\n    [Required]\n    public bool isnotactive { get; set; }\n    public string salesperson { get; set; }\n    [StringLength(30)]\n    public string newmill_venderid { get; set; }\n    [StringLength(30)]\n    public string newmill_supplierid { get; set; }\n    [StringLength(30)]\n    public string edi_receiverid { get; set; }\n    [Required]\n    public bool edi_invoice { get; set; }\n    [StringLength(15)]\n    public string bill_code { get; set; }\n}\n</code></pre>\n\n<p>This is the JSON that I am sending in the post request:</p>\n\n<pre><code>{\"bill_code\":\"good\",\"customerid\":50,\"customername\":\"Ted\",\"dnbscore\":80,\"edi_invoice\":false,\"edi_receiverid\":null,\"globalcredit\":null,\"isnotactive\":false,\"newmill_supplierid\":null,\"newmill_venderid\":null,\"rating\":null,\"region\":0,\"salesperson\":null}\n</code></pre>\n\n<p>Part of my Method that checks model state:</p>\n\n<pre><code>        if (!ModelState.IsValid)\n        {\n            var issues = ModelState.Where(m =&gt; m.Value.Errors.Any())\n                                   .Select((m)=&gt; new {field = m.Key, error = m.Value.Errors.FirstOrDefault().ErrorMessage})\n                                   .ToArray();\n\n            var result = new\n            {\n                result = \"Failure\",\n                message = \"Invalid data received. See issues for details.\",\n                issues = issues,\n                data = cust\n            };\n</code></pre>\n\n<p>Return JSON:</p>\n\n<pre><code>{\"result\":\"Failure\",\"message\":\"Invalid data received. See issues for details.\",\"issues\":[{\"field\":\"dnbscore\",\"error\":\"\"},{\"field\":\"region\",\"error\":\"\"}],\"data\":{\"customerid\":50,\"customername\":\"Ted\",\"globalcredit\":null,\"rating\":null,\"dnbscore\":null,\"region\":null,\"isnotactive\":false,\"salesperson\":null,\"newmill_venderid\":null,\"newmill_supplierid\":null,\"edi_receiverid\":null,\"edi_invoice\":false,\"bill_code\":\"good\"}}\n</code></pre>\n\n<p>For the sake of completeness here is what I did to get around this issue:</p>\n\n<p>With the information provided by Darin, I realized this is a bigger issue than just byte? to int? conversion. It would be an issue for any non-int conversions provided by the default binder. Because of this, I made a custom binder which should handle byte, decimal, etc numbers fine. See below:</p>\n\n<pre><code>public class APICustomerDetailsDTOBinder : IModelBinder\n{\n    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)\n    {\n        APICustomerDetailsDTO model = (APICustomerDetailsDTO)bindingContext.Model ??\n            (APICustomerDetailsDTO)DependencyResolver.Current.GetService(typeof(APICustomerDetailsDTO));\n\n        bool hasPrefix = bindingContext.ValueProvider.ContainsPrefix(bindingContext.ModelName);\n        string searchPrefix = (hasPrefix) ? bindingContext.ModelName + \".\" : \"\";\n\n        int customerid = 0;\n        int.TryParse(GetValue(bindingContext, searchPrefix, \"customerid\"), out customerid);\n        model.customerid = customerid;\n\n        string customername = GetValue(bindingContext, searchPrefix, \"customername\");\n        if (!String.IsNullOrEmpty(customername))\n        { model.customername = customername; }\n        else\n        { model.customername = null; }\n\n        decimal globalcredit;\n        if (decimal.TryParse(GetValue(bindingContext, searchPrefix, \"globalcredit\"), out globalcredit))\n        { model.globalcredit = globalcredit; }\n        else\n        { model.globalcredit = null; }\n\n        byte rating;\n        if (byte.TryParse(GetValue(bindingContext, searchPrefix, \"rating\"), out rating))\n        { model.rating = rating; }\n        else\n        { model.rating = null; }\n\n        byte dnbscore;\n        if (byte.TryParse(GetValue(bindingContext, searchPrefix, \"dnbscore\"), out dnbscore))\n        { model.dnbscore = dnbscore; }\n        else\n        { model.dnbscore = null; }\n\n        byte region;\n        if (byte.TryParse(GetValue(bindingContext, searchPrefix, \"region\"), out region))\n        { model.region = region; }\n        else\n        { model.region = null; }\n\n        bool isnotactive;\n        if (bool.TryParse(GetValue(bindingContext, searchPrefix, \"isnotactive\"), out isnotactive))\n        { model.isnotactive = isnotactive; }\n        else\n        { model.isnotactive = false; }\n\n        string salesperson = GetValue(bindingContext, searchPrefix, \"salesperson\");\n        if (!String.IsNullOrEmpty(salesperson))\n        { model.salesperson = salesperson; }\n        else\n        { model.salesperson = null; }\n\n        string newmill_venderid = GetValue(bindingContext, searchPrefix, \"newmill_venderid\");\n        if (!String.IsNullOrEmpty(newmill_venderid))\n        { model.newmill_venderid = newmill_venderid; }\n        else\n        { model.newmill_venderid = null; }\n\n        string newmill_supplierid = GetValue(bindingContext, searchPrefix, \"newmill_supplierid\");\n        if (!String.IsNullOrEmpty(newmill_supplierid))\n        { model.newmill_supplierid = newmill_supplierid; }\n        else\n        { model.newmill_supplierid = null; }\n\n        string edi_receiverid = GetValue(bindingContext, searchPrefix, \"edi_receiverid\");\n        if (!String.IsNullOrEmpty(edi_receiverid))\n        { model.edi_receiverid = edi_receiverid; }\n        else\n        { model.edi_receiverid = null; }\n\n\n        bool edi_invoice;\n        if (bool.TryParse(GetValue(bindingContext, searchPrefix, \"edi_invoice\"), out edi_invoice))\n        { model.edi_invoice = edi_invoice; }\n        else\n        { model.edi_invoice = false; }\n\n        model.bill_code = GetValue(bindingContext, searchPrefix, \"bill_code\");\n\n        return model;\n    }\n\n    private string GetValue(ModelBindingContext context, string prefix, string key)\n    {\n        ValueProviderResult vpr = context.ValueProvider.GetValue(prefix + key);\n        return vpr == null ? null : vpr.AttemptedValue;\n    }\n\n    private bool GetCheckedValue(ModelBindingContext context, string prefix, string key)\n    {\n        bool result = false;\n        ValueProviderResult vpr = context.ValueProvider.GetValue(prefix + key);\n        if (vpr != null)\n        {\n            result = (bool)vpr.ConvertTo(typeof(bool));\n        }\n        return result;\n    }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":20,"score":-1,"question_id":13125345,"title":"Showing record number during foreach loop","body":"<p>I am uploading a new csv everyday to my database using the code below. It is about 100 000 rows of data and I would like to have the web page display which line it is importing. I tried calling a View that auto refreshes but it does not redirect correctly after reading the first row. It gives a Server Error in '/' Application error.</p>\n\n<pre><code>   private SearchContext db = new SearchContext();\n    [HttpPost]\n    public ActionResult Index(Consumers consumers, int? page)\n    {\n        string path = AppDomain.CurrentDomain.GetData(\"DataDirectory\").ToString();\n        TempData[\"file\"] = path + \"\\\\\" + \"cons.csv\";\n        CsvFileDescription inputFileDescription = new CsvFileDescription\n        {\n            SeparatorChar = ',',\n            FirstLineHasColumnNames = true\n        };\n        CsvContext cc = new CsvContext();\n        IEnumerable&lt;Consumers&gt; consumerlist1 =\n        cc.Read&lt;Consumers&gt;(path + \"\\\\\" + \"cons.csv\", inputFileDescription);\n        var Consumers =\n            from s in consumerlist1\n            orderby s.Appno\n            select new { s.Appno, s.Sname, s.Fname, s.IDno };\n        string file = path + \"\\\\\" + \"cons.csv\" as string;\n        if (file == null)\n        {\n            return RedirectToAction(\"Index\");\n        }\n\n        List&lt;Consumers&gt; people = cc.Read&lt;Consumers&gt;(file).ToList();\n\n        foreach (Consumers s in people)\n        {\n            db.Consumers.Add(s);\n            ViewBag.forloop = db.Consumers.Count();\n            Response.AddHeader(\"Refresh\", \"1\");\n            return View(\"Progress\");\n        }\n        db.SaveChanges();\n        return RedirectToAction(\"../Consumer/Index\");\n    }\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13123266,"title":"refresh a partial view in a main view after an action occurs inside that partial view","body":"<p>I have a partial view that sits in my main view like this: </p>\n\n<pre><code> &lt;div id=\"complaintlist\"&gt;\n    @Html.Action(\"ShowCaseComplaints\", \"Cases\", new { caseid = Model.CasesID })\n&lt;/div&gt;\n</code></pre>\n\n<p>This is the partial view:</p>\n\n<pre><code>@model IEnumerable&lt;cummins_db.ViewModels.CaseComplaintsViewModel&gt;\n\n&lt;table width=\"100%\"&gt;\n &lt;tr&gt;\n    &lt;th&gt;&lt;/th&gt;\n    &lt;th&gt;&lt;/th&gt;\n    &lt;th&gt;Complaint Code&lt;/th&gt;\n    &lt;th&gt;Complaint Description&lt;/th&gt;\n    &lt;th&gt;Delete&lt;/th&gt;\n&lt;/tr&gt;  \n@foreach (var item in Model)\n    {\n&lt;tr&gt;\n    &lt;td&gt;\n         @Html.HiddenFor(modelItem =&gt; item.CasesID )    \n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.HiddenFor(modelItem =&gt; item.CaseComplaintID )    \n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.DisplayFor(modelItem =&gt; item.ComplaintCode )    \n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.DisplayFor(modelItem =&gt; item.ComplaintType)\n    &lt;/td&gt;\n    &lt;td&gt;\n        @Ajax.ActionLink(\"Delete\", \"RemoveCodeFromCase\", \"Cases\", new { caseid = item.CasesID, id = item.CaseComplaintID }, null)\n    &lt;/td&gt;        \n &lt;/tr&gt;\n    }\n &lt;/table&gt;\n</code></pre>\n\n<p>This partial view has an action that allows the user to remove a record from the model in the partial view. Here is the action called RemoveCodeFromCase:</p>\n\n<pre><code>public ActionResult RemoveCodeFromCase(int caseid, int id)\n        {\n        if (ModelState.IsValid)\n            {\n            CaseComplaint c = db.CaseComplaints.Find(id);\n            db.CaseComplaints.Remove(c);\n            db.SaveChanges();\n\n            var data = (from C in db.CaseComplaints\n                        where C.CasesID == caseid\n                        select new CaseComplaintsViewModel()\n                        {\n                            CasesID = C.CasesID,\n                            CaseComplaintID = C.ComplaintCodeID,\n                            ComplaintCode = C.ComplaintCode.ComplaintCodeName,\n                            ComplaintType = C.ComplaintCode.ComplaintType\n                        }).ToList();\n\n\n            return PartialView(\"_CaseComplaintCodes\", data);\n\n            }\n\n        return PartialView(\"_CaseComplaintCodes\");\n        }\n</code></pre>\n\n<p>I am trying to understand how to refresh my partial view after this action runs.</p>\n\n<p>Thx</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":193,"score":0,"question_id":12945737,"title":"user.identity.name and authenticationtype blank in mvc 3 with windows authentication after about 2 minutes","body":"<p>I am using windows authentication in my mvc 3 app and usually everything works fine. However, if i leave a certain page up for about 2 minutes, and then make an ajax request, the User.Identity.Name (in the controller) returns blank, as does the authenticationtype. This causes a failure when i check user.isinrole(whatever). Usually clearing the cache will fix the problem, but not regular refreshing. Sometimes i need to clear the cache a few times. </p>\n\n<p>I am using chrome, and didn't notice the bug when I tried in IE (I haven't tried waiting longer than it takes in chrome), so is it possible the bug is with chrome?\nEDIT: It happens in firefox too.</p>\n\n<p>I noticed the time to failure was similar to the issue in <a href=\"http://stackoverflow.com/questions/12675593\">User.Identity.Name sometimes blank with Windows authentication</a>\n but i did not see anything about anonymous authentication in my web.config</p>\n\n<p>in <a href=\"http://stackoverflow.com/questions/363358\">user.identity.name becames Blank after a while</a> the problem seemed to be that anonymous authentication is enabled on their IIS server, and I have that too, but I wanted it set on my server. There are certain pages that need to be accessed anonymously, so the authentication is all enforced by MVC and not by the server, so IIS has anonymous and windows authentication enabled</p>\n\n<p>I have authentication mode=\"Windows\" in my system.web tag, and nothing about authorization in web.config. In the registerglobals function in global.asax.cs, i have</p>\n\n<pre><code>filters.Add(new RequireWindowsAuth());\n</code></pre>\n\n<p>that's a class that inherits from AuthorizeAttribute, and it overrides the OnAuthorization method to do something like the following</p>\n\n<pre><code>if(!User.IsInRole(\"Admin\") &amp;&amp; AdminAttr is defined)\n     filterContext.Result = new HttpStatusCodeResult(403, \"You are not authorized to view this page\");\nelse if(AllowAnonymousAttribute is not found)\n    base.OnAuthorization(filterContext);\n</code></pre>\n\n<p>when the error happens, i get that exact 403 response from the server.</p>\n\n<p>the action requested has the admin attr and not the allowanonymous attr defined on it</p>\n\n<p>here is how i check for attrs being defined</p>\n\n<pre><code>filterContext.ActionDescriptor.IsDefined(attr, true) || filterContext.ActionDescriptor.ControllerDescriptor.IsDefined(typeof(AdminAttribute), true)\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","linq-to-entities","drop-down-menu","entity-framework-4.1"],"answer_count":1,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":1217,"score":4,"question_id":7298535,"title":"LINQ to Entities ToString() - None of the proposed solutions work?","body":"<p>I'm posting this more because I'd like to learn more, because my work-around has been to basically avoid using LINQ to Entities! It would nice if I could use it though. So if anyone can enlighten me..</p>\n\n<p>I'm working on an ASP.Net MVC 3 application (my first one) using code-first Entity Framework as my data model. It's going to be an online shop and I am working on the 'Admin' controller where, as an admin, you will be able to edit products etc. When it comes to adding a new product, you must specify a category, which means a dropdown list of categories.</p>\n\n<p>I started off by just returning an IEnumerable collection of categories in the ViewBag, based on the information I found <a href=\"http://www.mikesdotnetting.com/Article/128/Get-The-Drop-On-ASP.NET-MVC-DropDownLists\" rel=\"nofollow\">here</a>. This seemed like a really nice way to approach things.</p>\n\n<p>But I got the same error you'll see below. So following a suggestion I read online, I created a separate model specifically for creating new and editing existing products. The Categories collection is used to build a dropdown list in the view.</p>\n\n<pre><code>public class ProductModel\n{\n    public int Id { get; set; }\n    public int CategoryId { get; set; }\n    public string Name { get; set; }\n    public string Description { get; set; }\n    public double Price { get; set; }\n    public bool IsVisible { get; set; }\n\n    public IEnumerable&lt;SelectListItem&gt; Categories\n    {\n        get\n        {\n            return new DataAccess()\n                .Categories\n                .OrderBy(c =&gt; c.Description)\n                .Select(c =&gt; new SelectListItem\n                    {\n                        Value = c.Id.ToString(),\n                        Text = c.Description\n                    });\n        }\n    }\n}\n</code></pre>\n\n<p>This results in the following error message: \"<strong>LINQ to Entities does not recognize the method 'System.String ToString()' method, and this method cannot be translated into a store expression.</strong>\". One proposed online solution was to use the SqlFunction methods provided by the Entity Framework. So I tried this instead ...</p>\n\n<pre><code>    public IEnumerable&lt;SelectListItem&gt; Categories\n    {\n        get\n        {\n            return new DataAccess()\n                .Categories\n                .OrderBy(c =&gt; c.Description)\n                .Select(c =&gt; new SelectListItem\n                    {\n                        Value = SqlFunctions.StringConvert((double)c.Id),\n                        Text = c.Description\n                    });\n        }\n    }\n</code></pre>\n\n<p>But this results in this error message: \"<strong>The specified method 'System.String StringConvert(System.Nullable`1[System.Double])' on the type 'System.Data.Objects.SqlClient.SqlFunctions' cannot be translated into a LINQ to Entities store expression.</strong>\".</p>\n\n<p>I've even tried adding a read-only property to the data class called <strong>IdAsString</strong>, but this obviously makes the Entity Framework very unhappy!</p>\n\n<p>In the end, I realised that it wasn't worth all the time I was putting into it, and just stopped using LINQ altogether. This works fine, but it would be nice to know if there is a \"correct\" way to do this that actually works!</p>\n\n<p>This is my current working solution:</p>\n\n<pre><code>    public IEnumerable&lt;SelectListItem&gt; Categories\n    {\n        get\n        {\n            var dal = new DataAccess();\n            var categories = dal.Categories;\n            var items = new List&lt;SelectListItem&gt;();\n\n            foreach (var category in categories)\n                items.Add(new SelectListItem\n                    {\n                        Value = category.Id.ToString(),\n                        Text = category.Description\n                    });\n\n            return items;\n        }\n    }\n</code></pre>\n\n<p>So if anyone is already doing this and they think they're doing it the \"correct\" way, then I'd love to know what you think!</p>\n"},{"tags":["c#","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13124587,"title":"How to have two methods in API Controller with same name but different arguments?","body":"<p>I'm new to ApiControllers in MVC4 and I need to have to Get in my Api Controller with different set of arguments like below:</p>\n\n<pre><code>public Models.Response Get(int skip, int take, int pageSize, int page)\n{\n    //do something\n}\n\npublic Models.Response Get(int skip, int take, int pageSize, int page, PersonSearchModel personSearchModel)\n{\n    //search with search model\n}\n</code></pre>\n\n<p>I make a string of \"PersonSearchModel\" properties and my request look like this: (the instance of search model was empty)</p>\n\n<blockquote>\n  <p>localhost:3039/api/personapi/?Firstname=&amp;Lastname=&amp;BirthDate=1/1/0001%2012:00:00%20AM&amp;Gender=0&amp;PageIndex=0&amp;PageSize=20&amp;SortExpression=&amp;TotalItemCount=0&amp;TotalPageCount=0&amp;&amp;take=3&amp;skip=0&amp;page=1&amp;pageSize=3</p>\n</blockquote>\n\n<p>based on what I know from MVC3 it's supposed to map the url to search model and choose the second Get but I get the \"Multiple actions were found that match the request\" Exception in my firebug. what should I do? thanks</p>\n"},{"tags":["asp.net-mvc","mvc","asp.net-mvc-2","validation","asp.net-mvc-3"],"answer_count":2,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":1908,"score":3,"question_id":6495510,"title":"MVC 2 vs MVC 3 custom validation attributes using DataAnnotationsModelValidatorProvider.RegisterAdapter","body":"<p>I read on some post, but cant find it now that in MVC 3 it was not really needed to create a Validator, only the Attribute.  Is this true?  I do say I find it confusing that the attribute has the IClientValidatable on it.  So what does the DataAnnotationsModelValidator class do if the annotation has the client side script name (IClientValidatable), and the ability to validate (ValidationAttribute IsValid)?</p>\n\n<p>It would be really nice if I didnt have to register the Attribute with the Validator in the global.  Can this be done?  Did I read some bad advise?</p>\n\n<p>EDIT: Interestingly enough I just tested it by excluding the validator, put all the logic in IsValid and it works great.  I guess the only thing that might be missing would be the controller context, but I am not sure that is useful in validation.  The IsValid has ValidationContext which has ServiceContainer if I needed a service.  Any real disadvantage I am not picking up on here?</p>\n\n<p>EDIT 2:\nI will start with a validator from this example: <a href=\"http://blogs.msdn.com/b/simonince/archive/2010/06/04/conditional-validation-in-mvc.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/simonince/archive/2010/06/04/conditional-validation-in-mvc.aspx</a></p>\n\n<p>The Attribute:</p>\n\n<pre><code>public class RequiredIfAttribute : ValidationAttribute, IClientValidatable\n{\n    private RequiredAttribute innerAttribute = new RequiredAttribute();\n    public string DependentProperty { get; set; }\n    public object TargetValue { get; set; }\n\n    public RequiredIfAttribute(string dependentProperty, object targetValue)\n    {\n        this.DependentProperty = dependentProperty;\n        this.TargetValue = targetValue;\n    }\n\n    public override bool IsValid(object value)\n    {\n        return innerAttribute.IsValid(value);\n    }\n\n    public System.Collections.Generic.IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n    {\n        ModelClientValidationRule modelClientValidationRule = new ModelClientValidationRule()\n        {\n            ErrorMessage = FormatErrorMessage(metadata.DisplayName),\n            ValidationType = \"requiredifattribute\"\n        };\n        modelClientValidationRule.ValidationParameters.Add(\"requiredifattribute\", DependentProperty);\n        yield return modelClientValidationRule;\n    }\n}\n</code></pre>\n\n<p>The Validator:</p>\n\n<pre><code>public class RequiredIfValidator : DataAnnotationsModelValidator&lt;RequiredIfAttribute&gt;\n{\n    public RequiredIfValidator(ModelMetadata metadata, ControllerContext context, RequiredIfAttribute attribute)\n        : base(metadata, context, attribute)\n    {\n    }\n\n    public override IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules()\n    {\n        return base.GetClientValidationRules();\n    }\n\n    public override IEnumerable&lt;ModelValidationResult&gt; Validate(object container)\n    {\n        var field = Metadata.ContainerType.GetProperty(Attribute.DependentProperty);\n        if (field != null)\n        {\n            var value = field.GetValue(container, null);\n            if ((value == null &amp;&amp; Attribute.TargetValue == null) ||\n                (value.Equals(Attribute.TargetValue)))\n            {\n                if (!Attribute.IsValid(Metadata.Model))\n                    yield return new ModelValidationResult { Message = ErrorMessage };\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>With the current code above, I need to register in the Global.asax.cs file:</p>\n\n<pre><code>DataAnnotationsModelValidatorProvider.RegisterAdapter(typeof(RequiredIfAttribute), typeof(RequiredIfValidator));\n</code></pre>\n\n<p>But if I move everything into just the attribute, I dont have to register it:</p>\n\n<pre><code>public class RequiredIfAttribute : ValidationAttribute, IClientValidatable\n{\n    private RequiredAttribute innerAttribute = new RequiredAttribute();\n    public string DependentProperty { get; set; }\n    public object TargetValue { get; set; }\n\n    public RequiredIfAttribute(string dependentProperty, object targetValue)\n    {\n        this.DependentProperty = dependentProperty;\n        this.TargetValue = targetValue;\n    }\n\n    protected override ValidationResult IsValid(object value, ValidationContext validationContext)\n    {\n        var field = validationContext.ObjectInstance.GetType().GetProperty(DependentProperty);\n        if (field != null)\n        {\n            var dependentValue = field.GetValue(validationContext.ObjectInstance, null);\n            if ((dependentValue == null &amp;&amp; TargetValue == null) ||\n                (dependentValue.Equals(TargetValue)))\n            {\n                if (!innerAttribute.IsValid(value))\n                    return new ValidationResult(ErrorMessage);\n            }\n        }\n        return ValidationResult.Success;\n    }\n\n    public System.Collections.Generic.IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n    {\n        ModelClientValidationRule modelClientValidationRule = new ModelClientValidationRule()\n        {\n            ErrorMessage = FormatErrorMessage(metadata.DisplayName),\n            ValidationType = \"requiredifattribute\"\n        };\n        modelClientValidationRule.ValidationParameters.Add(\"requiredifattribute\", DependentProperty);\n        yield return modelClientValidationRule;\n    }\n}\n</code></pre>\n\n<p>Is there an problem with the last bit of code replacing all of the other code?  Why would I keep the validator class?</p>\n"},{"tags":["asp.net-mvc-3","twitter-bootstrap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12796125,"title":"twitter bootstrap mvc3 collapse","body":"<p>i having a wired issue with TB and MVC3 in this fidel <a href=\"http://jsfiddle.net/miko5054/YWUmb/119/\" rel=\"nofollow\">working exemple</a> it use TB v2.0.2</p>\n\n<p>but in my mvc3 project im using TB v2.1.1 and the collapse dont work...</p>\n\n<p>this is all the scripts reference </p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=\"utf-8\" /&gt;\n&lt;title&gt;MainSearch&lt;/title&gt;\n&lt;script src=\"/Scripts/jquery-1.8.1.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;link href=\"/Content/Site.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;link href=\"/Content/datepicker/css/datepicker.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;link href=\"/Content/DataTables/media/css/DT_bootstrap.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;link href=\"/Content/boostrap/css/bootstrap.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script src=\"/Scripts/modernizr-2.6.2.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/DataTable.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/jQuery.dataTables.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/DataTable.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/bootstrap-datepicker.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/bootstrap-collapse.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/bootstrap.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/DT_bootstrap.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n &lt;/head&gt;\n</code></pre>\n\n<p>thanks </p>\n\n<p>miki</p>\n"},{"tags":["asp.net","asp.net-mvc-3","validation","class","model"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13123871,"title":"In the Validation Rules of a Model in ASP.NET MVC 3, how to add error messages translated in more languages?","body":"<p>When I add validation rules to a Model class, an error message can be added to it, however only in one language; how can I add error messages translated in more languages for a single property? \nHave I to write more class \"copies\" or exists a better method to implement it?</p>\n\n<pre><code>Public Class Movie\n    Public Property ID() As Integer\n\n    &lt;Required(ErrorMessage:=\"Title is required\")&gt;\n    Public Property Title() As String\n\n    &lt;Required(ErrorMessage:=\"Date is required\")&gt;\n    Public Property ReleaseDate() As Date\n\n    &lt;Required(ErrorMessage:=\"Genre must be specified\")&gt;\n    Public Property Genre() As String\n\n    &lt;Required(ErrorMessage:=\"Price Required\"), Range(1, 100, ErrorMessage:=\"Price must be between $1 and $100\")&gt;\n    Public Property Price() As Decimal\n\n    &lt;StringLength(5)&gt;\n    Public Property Rating() As String\nEnd Class\n</code></pre>\n"},{"tags":["asp.net-mvc-3","enterprise-library","reportviewer","enterprise-library-5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13089232,"title":"Using ScriptManager in ASP.NET 3.5 ASPX page with EnterpriseLibary 5.0","body":"<p>I am working in an MVC3 application that references assemblies that use version 5 of the Microsoft Enterprise Library.</p>\n\n<p>I am doing a research project about using the ReportViewer to create reports.  I learned the ReportViewer can't be used in a Razor view, so I have to use a ASPX page.  The page is below:</p>\n\n<pre><code>&lt;%@ Page Language=\"C#\" AutoEventWireup=\"true\" CodeBehind=\"Index.aspx.cs\" Inherits=\"Test.BirthdayReport.BirthdayReport\" %&gt;\n\n&lt;%@ Register Assembly=\"Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\"\nNamespace=\"Microsoft.Reporting.WebForms\" TagPrefix=\"rsweb\" %&gt;\n\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n    &lt;head runat=\"server\"&gt;\n        &lt;title&gt;Birthday Report&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;form id=\"form1\" runat=\"server\"&gt;\n        &lt;div&gt;\n            &lt;asp:ScriptManager ID=\"ScriptManager1\" runat=\"server\"&gt;&lt;/asp:ScriptManager&gt;\n            &lt;rsweb:ReportViewer ID=\"ReportViewer1\" runat=\"server\" Width=\"100%\"&gt;                        &lt;/rsweb:ReportViewer&gt;\n        &lt;/div&gt;\n        &lt;/form&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>In order to use the ReportViewer, I have to include the ScriptManager, but when the page loads I receive this error:</p>\n\n<blockquote>\n  <p>Could not load file or assembly\n  'Microsoft.Practices.EnterpriseLibrary.Common, Version=4.1.0.0,\n  Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its\n  dependencies. The located assembly's manifest definition does not\n  match the assembly reference. (Exception from HRESULT: 0x80131040)</p>\n</blockquote>\n\n<p>I know I can't have both the 4.0 and 5.0 EnterpriseLibrary assemblies in the bin directory, so I tried added a reference to the 5.0 version of Microsoft.Practices.EnterpriseLibrary.Common in project, but I still get the same error.</p>\n\n<p>How do I use the ScriptManager with EnterpriseLibary 5.0?</p>\n"},{"tags":["jquery","ajax","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":13092181,"title":"$.ajax call receives Resource not Found but the MVC debug says route is hit?","body":"<p>I'll try to explain in as much detail as possible my setup.</p>\n\n<p>1) I'm using an Area (MVC 4).  Here's the folder and file setup:\n<img src=\"http://i.stack.imgur.com/EyUH6.jpg\" alt=\"enter image description here\">\n2) I'm resolving by default straight to my Area (not a Home controller in the root views) on purpose (I don't really need the Home controller that's not related to this question, just some background info)\n3) My global.asax registration of routes looks like this:</p>\n\n<pre><code>   protected void Application_Start()\n    {\n        AreaRegistration.RegisterAllAreas();\n\n        RouteConfig.RegisterRoutes(RouteTable.Routes);\n\n        WebApiConfig.Register(GlobalConfiguration.Configuration);\n        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);\n        BundleConfig.RegisterBundles(BundleTable.Bundles);\n    }\n</code></pre>\n\n<p>4) My route.config looks like this:</p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n{\n    routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n    // Purposely not going to use the Home Controller (just a convention I want in place)\n    routes.MapRoute(\"Default\", \"\", new { area = \"Search\", controller = \"Member\", action = \"Index\", id = UrlParameter.Optional }).DataTokens.Add(\"area\", \"Search\");\n}\n</code></pre>\n\n<p>5) My area's registration routing looks like this:</p>\n\n<pre><code>   public class MemberAreaRegistration : AreaRegistration\n    {\n\n        public override string AreaName\n        {\n            get { return \"Search\"; }\n        }\n\n\n        public override void RegisterArea(AreaRegistrationContext context)\n        {\n            context.MapRoute(\"Search_Member_GetMemberByContractNumber\", \"Search/Member/{id}\", defaults: new { controller = \"Member\", action = \"GetMemberByContractNumber\", id = UrlParameter.Optional });\n            context.MapRoute(\"Search_Default\", \"Search/{controller}/{action}/{id}\", defaults: new { controller = \"Member\", action = \"Index\", id=UrlParameter.Optional});\n        }\n\n    }\n</code></pre>\n\n<p>6) I have a controller with this action:</p>\n\n<pre><code>[HttpGet]\npublic JsonResult GetMemberByContractNumber(int contractNumber)\n{\n    Member memberDto = MemberCRUD.RetrieveMember(contractNumber);\n\n    JsonResult member = Json(memberDto, JsonRequestBehavior.AllowGet);\n\n    Json(JsonConvert.SerializeObject(member));\n\n    return member;\n} \n</code></pre>\n\n<p>7) I have a view that's trying to send an ajax request to that action:</p>\n\n<pre><code>// Get the results &amp; Bind to grid\n$(function () {\n    var members = [];\n    $.getJSON('Search/Member/26049', function (data) {\n        members = data;\n        grid = new Slick.Grid(\"#searchResults-Grid\", members, columns, options);\n    });\n});\n</code></pre>\n\n<p><strong>What works</strong>: I can run the site, it hits my Member's Index() action and loads the Member's Index View.  That's not the problem here.</p>\n\n<p><strong>What the problem is</strong>: I can't get this to resolve...it doesn't find my controller and action in the jQuery getJSON request 'Search/Member/26049'</p>\n\n<p>** The error I get in FireBug**:</p>\n\n<pre><code>http://localhost/OurappName/Search/Member/26049 404 Not Found\n        19ms\nin the response:\n&lt;b&gt; Requested URL: &lt;/b&gt;/ballysearch/Search/Member/26049&lt;br&gt;&lt;br&gt;\n</code></pre>\n\n<p><strong>What I've Tried</strong>: Originally in my area's route config, I had that first line at the end so tried moving it up.  I'm talking about the context.MapRoute(\"Search_Member_GetMemberByContractNumber\", \"Search/Member/{id}\"..I had that after my default route.  Then switched up cause I figured it's always going to obviously hit my default route..which should really just be a \"catch-all\" route at the end in this case instead.</p>\n\n<p>I have tried several variations of the url from the getJSON such as:\n'Member/26049'</p>\n\n<p>I'm <em>pretty sure</em> my controller's action is fine the way it's setup.</p>\n\n<p>I know it's probably a route issue but I do not see what it is.</p>\n\n<p>UPDATE:</p>\n\n<p>here's the route debug results</p>\n\n<p><img src=\"http://i.stack.imgur.com/4Rc6X.jpg\" alt=\"enter image description here\"></p>\n\n<p>UPDATE:</p>\n\n<p>Looks now like maybe I was thinking all along it was a route issue but at least now it's ok so not sure what this error means by \"Resource\"</p>\n\n<p>Here's the routes I have now that seem to be working in my MemberAreaRegistration.cs</p>\n\n<p><img src=\"http://i.stack.imgur.com/n9a6R.jpg\" alt=\"enter image description here\"></p>\n\n<p>context.MapRoute(\"Search_Member\", \"Search/Member/{contractNumber}\", new { controller = \"Member\", action = \"GetMemberByContractNumber\", contractNumber = UrlParameter.Optional });\n    context.MapRoute(\"Search_Default\", \"Search/{controller}/{action}/{id}\", new {controller=\"Member\", action = \"Index\", id = UrlParameter.Optional });</p>\n\n<p>now not sure why I'm getting this resource error.  In Firebug, there's some additional info but I still don't get what's wrong with my controller code if that's the case or my jQuery code if that's also an issue...I don't see it:</p>\n\n<pre><code>[HttpException]: The controller for path &amp;#39;/OurAppName/Search/Member/1234&amp;#39; was not found or does not implement IController.\n</code></pre>\n\n<p>Couple more views of the error from firebug still:</p>\n\n<p><img src=\"http://i.stack.imgur.com/ByM2i.jpg\" alt=\"enter image description here\"><img src=\"http://i.stack.imgur.com/eEN1F.jpg\" alt=\"enter image description here\"></p>\n\n<p><strong>UPDATE -------------------------------------------</strong> 10/27/2012:</p>\n\n<p><strong>Want to post my current attempt detailed info to this point</strong></p>\n\n<p>My routes are setup like this in my <strong>Route.Config</strong>:</p>\n\n<pre><code>    public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n        routes.IgnoreRoute(\"favicon.ico\");\n        routes.IgnoreRoute(\"{*favicon}\", new { favicon = @\"(.*/)?favicon.ico(/.*)?\" });\n        routes.IgnoreRoute(\"{*staticfile}\", new { staticfile = @\".*\\.(css|js|gif|jpg)(/.*)?\" });\n        routes.IgnoreRoute(\"{*robotstxt}\", new { robotstxt = @\"(.*/)?robots.txt(/.*)?\" });\n\n        // Purposely not going to use the Home Controller, we don't need it so hence the DataTokens to tell MVC to go straight to my Area called Search to look for the member controller for the default route when you first hit the View\n        routes.MapRoute(\"Default\", \"\", new { area = \"Search\", controller = \"Member\", action = \"Index\", id = UrlParameter.Optional }).DataTokens.Add(\"area\", \"Search\");\n    }\n</code></pre>\n\n<p>My Area's registration routes:</p>\n\n<pre><code>namespace OurApp.Web.Areas.Search.Views.Member\n{\n    public class MemberAreaRegistration : AreaRegistration\n    {\n\n        public override string AreaName\n        {\n            get { return \"Search\"; }\n        }\n\n\n        public override void RegisterArea(AreaRegistrationContext context)\n        {\n\n\n            context.MapRoute(\"Search_Member\", \"Search/Member/{contractNumber}\", new { controller = \"Member\", action = \"GetMemberByContractNumber\", contractNumber = UrlParameter.Optional });\n            context.MapRoute(\"Search_Default\", \"Search/{controller}/{action}/{id}\", new {controller=\"Member\", action = \"Index\", id = UrlParameter.Optional });\n        }\n\n    }\n}\n</code></pre>\n\n<p>Finally my entire Controller Code:</p>\n\n<pre><code>namespace OurApp.Web.Areas.Search.Controllers\n{\n\n    public class MemberController : Controller\n    {\n\n        public ActionResult Index()\n        {\n            return View();\n        }\n\n\n        [HttpGet]\n        public JsonResult GetMemberByContractNumber(int contractNumber)\n        {\n            Member memberDto = MemberCRUD.RetrieveMember(contractNumber);\n\n            JsonResult member = Json(memberDto, JsonRequestBehavior.AllowGet);\n\n            return Json(member, JsonRequestBehavior.AllowGet);\n\n            return member;\n        }\n\n\n        [HttpGet]\n        public ActionResult TestTheRoute(int daveIdTest)\n        {\n            return null;\n        }\n    }\n}\n</code></pre>\n\n<p><strong>1)</strong> I have no begin form tag in my View.  That's because I'm only trying to just test this $.ajax() function out and later I'll add a form and invoke that call from some event.  So that should not matter, that I don't have a form element yet right?  I simply have $.ajax call at the top of my view in the open so it fires off on its own.</p>\n\n<p><strong>2)</strong> It seems like it's hitting my routes ok as you can see above.  I just wonder if it's how I'm forming my $.ajax() call in terms of the callback and maybe related to, my controller method is not fully correct?  I'm returning json from my action but it's ok to have how I have it I assume.  I don't know, unless I can try something different in my action method that's returning the json.  I don't know if my $.ajax call needs to specify the return type expected in the callback now that I just thought about it as I am typing this but I'll check that also.</p>\n\n<p>for example when I setup the $.ajax call like this (see below), I'm getting a response back so I think that tells me IIS is able to send a response after it hit my route and controller ok.  So I'm thinking it's my action method that's not returning a correct json object, not really sure but at this point, if the route debugger from Phil Haack shows it's definitely hitting my routes, then it can't be that...the ajax call IS hitting my route.  </p>\n\n<pre><code>   $.ajax({\n        url: 'OurApp/Search/Member/26049',\n        type: \"GET\",\n        dataType: \"json\",\n        success: function (response) \n        {\n            alert('we got a mother fing response!');\n            grid = new Slick.Grid(\"#memberSearchResults-Grid\", response.data, columns, options);\n        },\n        error: function (e) { alert('response error: '); }\n    });\n</code></pre>\n\n<p>so I get the alert for the error case above, it's hitting this.  I don't know if I will always get a response...probably I assume IIS would respond in a failed request AND successful route request...?</p>\n\n<p>I tried to attach to the worker process and then refresh the page after setting a debug point on the first line of that action method that's returning json in my controller but that line is never hit.  I don't know why.  I can't get any debug points hit, not </p>\n\n<p>Here's the request header from firebug just for additional info:</p>\n\n<pre><code>GET http://localhost/OurApp/Search/Member/26049 HTTP/1.1\nHost: localhost\nUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-US,en;q=0.5\nAccept-Encoding: gzip, deflate\nProxy-Connection: keep-alive\n</code></pre>\n\n<p>Here's some of the resopnse and what's interesting is even though it shows my route is being hit on my controller, this error says no, it isn't hitting your controller so I'm so dumbfounded at this point on wtf is going on and where:</p>\n\n<p>HeadersResponseCacheHTML</p>\n\n<p>\n    \n        The resource cannot be found.\n        \n         body {font-family:\"Verdana\";font-weight:normal;font-size: .7em;color:black;} \n         p {font-family:\"Verdana\";font-weight:normal;color:black;margin-top: -5px}\n         b {font-family:\"Verdana\";font-weight:bold;color:black;margin-top: -5px}\n         H1 { font-family:\"Verdana\";font-weight:normal;font-size:18pt;color:red }\n         H2 { font-family:\"Verdana\";font-weight:normal;font-size:14pt;color:maroon }\n         pre {font-family:\"Lucida Console\";font-size: .9em}\n         .marker {font-weight: bold; color: black;text-decoration: none;}\n         .version {color: gray;}\n         .error {margin-bottom: 10px;}\n         .expandable { text-decoration:underline; font-weight:bold; color:navy; cursor:hand; }\n        \n    </p>\n\n<pre><code>&lt;body bgcolor=\"white\"&gt;\n\n        &lt;span&gt;&lt;H1&gt;Server Error in '/OurApp' Application.&lt;hr width=100% size=1 color=silver&gt;&lt;/H1&gt;\n\n        &lt;h2&gt; &lt;i&gt;The resource cannot be found.&lt;/i&gt; &lt;/h2&gt;&lt;/span&gt;\n\n        &lt;font face=\"Arial, Helvetica, Geneva, SunSans-Regular, sans-serif \"&gt;\n\n        &lt;b&gt; Description: &lt;/b&gt;HTTP 404. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable. &amp;nbsp;Please review the following URL and make sure that it is spelled correctly.\n        &lt;br&gt;&lt;br&gt;\n\n        &lt;b&gt; Requested URL: &lt;/b&gt;/OurApp/Search/Member/26049&lt;br&gt;&lt;br&gt;\n\n        &lt;hr width=100% size=1 color=silver&gt;\n\n        &lt;b&gt;Version Information:&lt;/b&gt;&amp;nbsp;Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272\n\n        &lt;/font&gt;\n\n&lt;/body&gt;\n</code></pre>\n\n<p>\n</p>\n\n<p>and related mvc route debugger result for this request:</p>\n\n<p><img src=\"http://i.stack.imgur.com/bBItP.jpg\" alt=\"enter image description here\"></p>\n\n<p>what gets me is that it shows \"The controller for path &#39;/OurApp/Search/Member/26049; was not found or does not implement IController.\"  But if the route debug is saying it is being hit, wtf?  I'm so lost.  Also again I can't debug it so that tells me it ISN'T hitting my controller or controller action.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","class","properties"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":13122877,"title":"What is the best way to declare a class with properties and populate those properties at the same time","body":"<p>Here is an example of what the code could look like from the Model</p>\n\n<pre><code>public static class SomeClass\n{\n    // Description \n    public const string String1 = \"String One\"\n    public const string String2 = \"String Two\";\n    public const string String3 = \" String Three\";\n    public const string String4 = \" String Four\";\n\n    // Position\n    public const int String1Position = 0;\n    public const int String2Position = 1;\n    public const int String3Position = 2;\n    public const int String4Position = 3;\n\n    // Filter Ranges\n    public const int String2Minimum = 0100;\n    public const int String2Maximum = 0199;\n\n    public const int String3Minimum = 1000;\n    public const int String3Maximum = 1099;\n\n    public const int String4Unknown = 9999;\n\n    private class SomeClassData\n    {\n        public string Description { get; set; }\n        public int Position { get; set; }\n        public int FilterMinimum { get; set; }\n        public int FilterMaximum { get; set; }\n    }\n}\n</code></pre>\n\n<p>I want to be able to populate the properties of this class for each of the different Descriptions, Positions and Filter Range(s) where the Description, the Position and the Filter are all related to each other.</p>\n\n<pre><code>SomeClassData.Description = \"String Two\";\nSomeClassData.Position = 1;\nSomeClassData.String2Minimum = 0100;\nSomeClassData.String2Maximum = 0199;\n</code></pre>\n\n<p>Where the Description and the Position are being used in the Controller to be able to give the View the the properties to populate a drop down box using Javascript/JQuery.\nThe Filter Range(s) will be used by the controller to be able to accept the Position value from drop down box as a parameter from the ActionResult to generate linq queries to get the data back from the database.</p>\n\n<p>I started to think that the best way to go would be to populate a List for each of the different types and then use each of the lists together but then would get messy trying to link the lists together properly.\nI have this feeling I might need to use a <code>Dictionary&lt;string, object&gt;</code> or a <code>Dictionary&lt;int, object&gt;</code> where the object is the SomeClassData populated. Not sure if I'm way off on this thought or not at this point.</p>\n"},{"tags":["asp.net-mvc-3","openxml","export-to-excel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13120809,"title":"export to excel through mvc3","body":"<p>Hello everyone i am trying to export some data to excel in the form of table in mvc3.Here is the class i am using to generate the excel file:</p>\n\n<pre><code>//------------------------------------------------------------------------------\n// &lt;copyright file=\"ExcelDocument.cs\" company=\"Microsoft\"&gt;\n//     Copyright (c) Microsoft Corporation.  All rights reserved.\n// &lt;/copyright&gt;\n// &lt;summary&gt;The Export to Excel Document class.&lt;/summary&gt;\n//  ----------------------------------------------------------------------------\nnamespace ExporToExcel.Controllers.ControllerExtensions\n{\n    using System;\n    using System.IO;\n    using System.Linq;\n    using DocumentFormat.OpenXml;\n    using DocumentFormat.OpenXml.Extensions;\n    using DocumentFormat.OpenXml.Packaging;\n    using DocumentFormat.OpenXml.Spreadsheet;\n\n\n    /// &lt;summary&gt;\n    /// Excel document.\n    /// &lt;/summary&gt;\n    public static class ExcelDocument\n    {\n        /// &lt;summary&gt;\n        /// Default spread sheet name. \n        /// &lt;/summary&gt;\n        private const string DefaultSheetName = \"Sheet1\";\n\n        /// &lt;summary&gt;\n        /// Create the exel document for streaming.\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"documentName\"&gt;Excel file name.&lt;/param&gt;\n        /// &lt;param name=\"excelWorkSheetName\"&gt;Excel worksheet name: default: sheet1.&lt;/param&gt;\n        /// &lt;param name=\"rowData\"&gt;Row data to write.&lt;/param&gt;\n        /// &lt;param name=\"headerData\"&gt;Header data.&lt;/param&gt;\n        /// &lt;param name=\"rowPointers\"&gt;Row pointers.&lt;/param&gt;\n        /// &lt;returns&gt;Memory stream.&lt;/returns&gt;\n        public static MemoryStream Create(string documentName, string excelWorkSheetName, IQueryable rowData, string[] headerData, string[] rowPointers)\n        {\n            return CreateSpreadSheet(documentName, excelWorkSheetName, rowData, headerData, rowPointers, null);\n        }\n\n        /// &lt;summary&gt;\n        /// Create the spreadsheet.\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"documentName\"&gt;Excel file name.&lt;/param&gt;\n        /// &lt;param name=\"excelWorkSheetName\"&gt;Excel worksheet name: default: sheet1.&lt;/param&gt;\n        /// &lt;param name=\"rowData\"&gt;Row data to write.&lt;/param&gt;\n        /// &lt;param name=\"headerData\"&gt;Header data.&lt;/param&gt;\n        /// &lt;param name=\"rowPointers\"&gt;Row pointers.&lt;/param&gt;\n        /// &lt;param name=\"styleSheet\"&gt;Style sheet.&lt;/param&gt;\n        /// &lt;returns&gt;Memory stream.&lt;/returns&gt;\n        private static MemoryStream CreateSpreadSheet(string documentName, string excelWorkSheetName, IQueryable rowData, string[] headerData, string[] rowPointers, Stylesheet styleSheet)\n        {\n            int rowNum = 0;\n            int colNum = 0;\n            int maxWidth = 0;\n            int minCol = 1;\n            int maxCol = rowPointers == null ? minCol : rowPointers.Length;\n            maxCol = maxCol == 1 &amp;&amp; headerData == null ? 1 : headerData.Length;\n\n            MemoryStream xmlStream = SpreadsheetReader.Create();\n            SpreadsheetDocument spreadSheet = SpreadsheetDocument.Open(xmlStream, true);\n\n            SetSheetName(excelWorkSheetName, spreadSheet);\n\n            if (styleSheet == null)\n            {\n                SetStyleSheet(spreadSheet);\n            }\n            else\n            {\n                spreadSheet.WorkbookPart.WorkbookStylesPart.Stylesheet = styleSheet;\n                spreadSheet.WorkbookPart.WorkbookStylesPart.Stylesheet.Save();\n            }\n\n            WorksheetPart worksheetPart = SpreadsheetReader.GetWorksheetPartByName(spreadSheet, excelWorkSheetName);\n\n            WriteHeaders(headerData, out rowNum, out colNum, out maxWidth, spreadSheet, worksheetPart);\n            AddCellWidthStyles(Convert.ToUInt32(minCol), Convert.ToUInt32(maxCol), maxWidth, spreadSheet, worksheetPart);\n\n            if (rowPointers == null || rowPointers.Length == 0)\n            {\n                WriteRowsFromHeaders(rowData, headerData, rowNum, out maxWidth, spreadSheet, worksheetPart);\n            }\n            else\n            {\n                WriteRowsFromKeys(rowData, rowPointers, rowNum, out maxWidth, spreadSheet, worksheetPart);\n            }\n\n            // Save to the memory stream\n            SpreadsheetWriter.Save(spreadSheet);\n            spreadSheet.Close();\n            spreadSheet.Dispose();\n            return xmlStream;\n        }\n\n        /// &lt;summary&gt;\n        /// Set the name of the spreadsheet. \n        /// &lt;/summary&gt;\n        /// &lt;param name=\"excelSpreadSheetName\"&gt;Spread sheet name.&lt;/param&gt;\n        /// &lt;param name=\"spreadSheet\"&gt;Spread sheet.&lt;/param&gt;\n        private static void SetSheetName(string excelSpreadSheetName, SpreadsheetDocument spreadSheet)\n        {\n            excelSpreadSheetName = excelSpreadSheetName ?? DefaultSheetName;\n\n            Sheet ss = spreadSheet.WorkbookPart.Workbook.Descendants&lt;Sheet&gt;().Where(s =&gt; s.Name == DefaultSheetName).SingleOrDefault&lt;Sheet&gt;();\n            ss.Name = excelSpreadSheetName;\n        }\n\n        /// &lt;summary&gt;\n        /// Add cell width styles. \n        /// &lt;/summary&gt;\n        /// &lt;param name=\"minCol\"&gt;Minimum column index.&lt;/param&gt;\n        /// &lt;param name=\"maxCol\"&gt;Maximum column index.&lt;/param&gt;\n        /// &lt;param name=\"maxWidth\"&gt;Maximum column width.&lt;/param&gt;\n        /// &lt;param name=\"spreadSheet\"&gt;Spread sheet.&lt;/param&gt;\n        /// &lt;param name=\"workSheetPart\"&gt;Work sheet.&lt;/param&gt;\n        private static void AddCellWidthStyles(uint minCol, uint maxCol, int maxWidth, SpreadsheetDocument spreadSheet, WorksheetPart workSheetPart)\n        {\n            Columns cols = new Columns(new Column() { Min = minCol, Max = maxCol, Width = maxWidth});\n\n\n            workSheetPart.Worksheet.InsertBefore&lt;Columns&gt;(cols, workSheetPart.Worksheet.GetFirstChild&lt;SheetData&gt;());\n        }\n\n        /// &lt;summary&gt;\n        /// Set the style sheet.\n        // Note: Setting the style here rather than passing it in ensures that all worksheets will have a common user interface design.\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"spreadSheet\"&gt;Spread sheet to change.&lt;/param&gt;\n        private static void SetStyleSheet(SpreadsheetDocument spreadSheet)\n        {\n            // Note: Setting the style here rather than passing it in ensures that all worksheets will have a common user interface design.\n            Stylesheet styleSheet = spreadSheet.WorkbookPart.WorkbookStylesPart.Stylesheet;\n\n            styleSheet.Fonts.AppendChild(\n                new Font(new FontSize() { Val = 11 }, new Color() { Rgb = \"FFFFFF\" }, new FontName() { Val = \"Arial\" }));\n\n            styleSheet.Fills.AppendChild(new Fill()\n            {\n                PatternFill = new PatternFill()\n                {\n                    PatternType = PatternValues.Solid,\n                    BackgroundColor = new BackgroundColor() { Rgb = \"D8D8D8\" }\n\n                }\n            });\n\n            spreadSheet.WorkbookPart.WorkbookStylesPart.Stylesheet.Save();\n        }\n\n        /// &lt;summary&gt;\n        /// Save the styl for worksheet headers. \n        /// &lt;/summary&gt;\n        /// &lt;param name=\"cellLocation\"&gt;Cell location.&lt;/param&gt;\n        /// &lt;param name=\"spreadSheet\"&gt;Spreadsheet to change.&lt;/param&gt;\n        /// &lt;param name=\"workSheetPart\"&gt;Worksheet to change.&lt;/param&gt;\n        private static void SeatHeaderStyle(string cellLocation, SpreadsheetDocument spreadSheet, WorksheetPart workSheetPart)\n        {\n            Stylesheet styleSheet = spreadSheet.WorkbookPart.WorkbookStylesPart.Stylesheet;\n            Cell cell = workSheetPart.Worksheet.Descendants&lt;Cell&gt;().Where(c =&gt; c.CellReference == cellLocation).FirstOrDefault();\n\n            if (cell == null)\n            {\n                throw new ArgumentNullException(\"Cell not found\");\n            }\n\n            cell.SetAttribute(new OpenXmlAttribute(\"\", \"s\", \"\", \"1\"));\n            OpenXmlAttribute cellStyleAttribute = cell.GetAttribute(\"s\", \"\");\n            CellFormats cellFormats = spreadSheet.WorkbookPart.WorkbookStylesPart.Stylesheet.CellFormats;\n\n            // pick tthe first cell format.\n            CellFormat cellFormat = (CellFormat)cellFormats.ElementAt(0);\n\n            CellFormat cf = new CellFormat(cellFormat.OuterXml);\n            cf.FontId = styleSheet.Fonts.Count;\n            cf.FillId = styleSheet.Fills.Count;\n            cf.Alignment.Horizontal = HorizontalAlignmentValues.General;\n            cellFormats.AppendChild(cf);\n\n            int a = (int)styleSheet.CellFormats.Count.Value;\n\n            cell.SetAttribute(cellStyleAttribute);\n\n            cell.StyleIndex = styleSheet.CellFormats.Count;\n\n            workSheetPart.Worksheet.Save();\n        }\n\n        /// &lt;summary&gt;\n        /// Replace special characters. \n        /// &lt;/summary&gt;\n        /// &lt;param name=\"value\"&gt;Value to input.&lt;/param&gt;\n        /// &lt;returns&gt;Value with special characters replaced.&lt;/returns&gt;\n        private static string ReplaceSpecialCharacters(string value)\n        {\n            value = value.Replace(\"’\", \"'\");\n            value = value.Replace(\"“\", \"\\\"\");\n            value = value.Replace(\"”\", \"\\\"\");\n            value = value.Replace(\"–\", \"-\");\n            value = value.Replace(\"…\", \"...\");\n            return value;\n        }\n\n        /// &lt;summary&gt;\n        /// Write values to the spreadsheet.\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"cellLocation\"&gt;Row Column Value.&lt;/param&gt;\n        /// &lt;param name=\"strValue\"&gt;Value to write.&lt;/param&gt;\n        /// &lt;param name=\"spreadSheet\"&gt;Spreadsheet to write to. &lt;/param&gt;\n        /// &lt;param name=\"workSheet\"&gt;Worksheet to write to. &lt;/param&gt;\n        private static void WriteValues(string cellLocation, string strValue, SpreadsheetDocument spreadSheet, WorksheetPart workSheet)\n        {\n            WorksheetWriter workSheetWriter = new WorksheetWriter(spreadSheet, workSheet);\n\n            int intValue = 0;\n            if (strValue.Contains(\"$\"))\n            {\n                strValue = strValue.Replace(\"$\", \"\");\n                strValue = strValue.Replace(\",\", \"\");\n\n                workSheetWriter.PasteValue(cellLocation, strValue, CellValues.Number);\n            }\n            else if (int.TryParse(strValue, out intValue))\n            {\n                workSheetWriter.PasteValue(cellLocation, strValue, CellValues.Number);\n            }\n            else if (string.IsNullOrEmpty(strValue))\n            {\n                workSheetWriter.PasteText(cellLocation, strValue);\n            }\n            else\n            {\n                workSheetWriter.PasteText(cellLocation, strValue);\n            }\n        }\n\n        /// &lt;summary&gt;\n        /// Write the excel rows for the spreadsheet.\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"rowData\"&gt;Excel row values.&lt;/param&gt;\n        /// &lt;param name=\"rowDataKeys\"&gt;Excel row-key values.&lt;/param&gt;\n        /// &lt;param name=\"rowNum\"&gt;Row number.&lt;/param&gt;\n        /// &lt;param name=\"maxWidth\"&gt;Max width.&lt;/param&gt;\n        /// &lt;param name=\"spreadSheet\"&gt;Spreadsheet to write to. &lt;/param&gt;\n        /// &lt;param name=\"workSheet\"&gt;Worksheet to write to. &lt;/param&gt;\n        private static void WriteRowsFromKeys(IQueryable rowData, string[] rowDataKeys, int rowNum, out int maxWidth, SpreadsheetDocument spreadSheet, WorksheetPart workSheet)\n        {\n            maxWidth = 0;\n\n            foreach (object row in rowData)\n            {\n                int colNum = 0;\n                foreach (string rowKey in rowDataKeys)\n                {\n                    string strValue = row.GetType().GetProperty(rowKey).GetValue(row, null).ToString();\n                    strValue = ReplaceSpecialCharacters(strValue);\n                    maxWidth = strValue.Length &gt; maxWidth ? strValue.Length : maxWidth;\n\n                    string cellLocation = string.Format(\"{0}{1}\", GetColumnLetter(colNum.ToString()), rowNum);\n                    ExcelDocument.WriteValues(cellLocation, strValue, spreadSheet, workSheet);\n\n                    colNum++;\n                }\n\n                rowNum++;\n            }\n        }\n\n        /// &lt;summary&gt;\n        /// Convert column number to alpha numeric value.\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"colNumber\"&gt;Column number.&lt;/param&gt;\n        /// &lt;returns&gt;ASCII value for number.&lt;/returns&gt;\n        private static string GetColumnLetter(string colNumber)\n        {\n            if (string.IsNullOrEmpty(colNumber))\n            {\n                throw new ArgumentNullException(colNumber);\n            }\n\n            string colName = null;\n\n            try\n            {\n                for (int i = 0; i &lt; colNumber.Length; i++)\n                {\n                    string colValue = colNumber.Substring(i, 1);\n\n                    int asc = Convert.ToInt16(colValue) + 65;\n\n                    colName += Convert.ToChar(asc);\n                }\n            }\n            finally\n            {\n                colName = colName ?? \"A\";\n            }\n\n            return colName;\n        }\n\n        /// &lt;summary&gt;\n        /// Write the values for the rows from headers.\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"rowData\"&gt;Excel row values.&lt;/param&gt;\n        /// &lt;param name=\"headerData\"&gt;Excel header values.&lt;/param&gt;\n        /// &lt;param name=\"rowNum\"&gt;Row number.&lt;/param&gt;\n        /// &lt;param name=\"maxWidth\"&gt;Max width.&lt;/param&gt;\n        /// &lt;param name=\"spreadSheet\"&gt;Spreadsheet to write to. &lt;/param&gt;\n        /// &lt;param name=\"workSheet\"&gt;Worksheet to write to. &lt;/param&gt;\n        private static void WriteRowsFromHeaders(IQueryable rowData, string[] headerData, int rowNum, out int maxWidth, SpreadsheetDocument spreadSheet, WorksheetPart workSheet)\n        {\n            WorksheetWriter workSheetWriter = new WorksheetWriter(spreadSheet, workSheet);\n            maxWidth = 0;\n\n            foreach (object row in rowData)\n            {\n                int colNum = 0;\n                foreach (string header in headerData)\n                {\n                    string strValue = row.GetType().GetProperty(header).GetValue(row, null).ToString();\n                    strValue = ReplaceSpecialCharacters(strValue);\n                    maxWidth = strValue.Length &gt; maxWidth ? strValue.Length : maxWidth;\n\n                    string cellLocation = string.Format(\"{0}{1}\", GetColumnLetter(colNum.ToString()), rowNum);\n\n                    ExcelDocument.WriteValues(cellLocation, strValue, spreadSheet, workSheet);\n                    colNum++;\n                }\n\n                rowNum++;\n            }\n        }\n\n        /// &lt;summary&gt;\n        /// Write the excel headers for the spreadsheet.\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"headerData\"&gt;Excel header values.&lt;/param&gt;\n        /// &lt;param name=\"rowNum\"&gt;Row number.&lt;/param&gt;\n        /// &lt;param name=\"colNum\"&gt;Column Number.&lt;/param&gt;\n        /// &lt;param name=\"maxWidth\"&gt;Max column width&lt;/param&gt;\n        /// &lt;param name=\"spreadSheet\"&gt;Maximum Column Width to write to. &lt;/param&gt;\n        /// &lt;param name=\"workSheet\"&gt;Worksheet to write to. &lt;/param&gt;\n        private static void WriteHeaders(string[] headerData, out int rowNum, out int colNum, out int maxWidth, SpreadsheetDocument spreadSheet, WorksheetPart workSheet)\n        {\n            rowNum = 1;\n            colNum = 0;\n            maxWidth = 0;\n\n            foreach (string header in headerData)\n            {\n                string strValue = ReplaceSpecialCharacters(header);\n\n                string cellLocation = string.Format(\"{0}{1}\", GetColumnLetter(colNum.ToString()), rowNum);\n                maxWidth = strValue.Length &gt; maxWidth ? strValue.Length : maxWidth;\n                maxWidth = strValue.Length+25;\n                ExcelDocument.WriteValues(cellLocation, strValue, spreadSheet, workSheet);\n                SeatHeaderStyle(cellLocation, spreadSheet, workSheet);\n                colNum++;\n            }\n\n            rowNum++;\n        }\n    }\n}\n</code></pre>\n\n<p>my problem is that i am getting all the text <strong>aligned left</strong> in my table.I want it to be <strong>aligned right</strong>.Also the column header in the table has <strong>black background</strong>.I want to change its color too.Also how to give some hard coded text in any cell? Any help would be greatly appreciated.Thank you</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13121560,"title":"Should i build Controllers for all Categories in a News Site?","body":"<p>i'm new to asp.net mvc i'm tryin to build a news site with asp.net mvc3; that's something like <a href=\"http://african.howzit.msn.com/\" rel=\"nofollow\">http://african.howzit.msn.com/</a> my question is for all the categories (Home, News, Business, Entertainment, Career) should i just go ahead and build controllers for them all and bring them together in a starting page or do i need to come up with a way to categorize these categories from just one controller; I guess i need to get the architecture right. Thanks in advance!!</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","url-rewriting","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13122078,"title":".NET MVC3 Routing URL Rewriting","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/25259/how-does-stackoverflow-generate-its-seo-friendly-urls\">How does StackOverflow generate its SEO-friendly URLs?</a>  </p>\n</blockquote>\n\n\n\n<p>I have an MVC3 site for which I would like to clean up the urls that contain spaces in the names of the products.</p>\n\n<p>Currently, the url displays as: <code>/products/some%20ugly%20url</code></p>\n\n<p>I would like to display: <code>/products/some-clean-url</code></p>\n\n<p>Is it possible with MVC3 routing to rewrite the ugly url to the clean one?</p>\n"},{"tags":["c#","javascript","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":47,"score":-1,"question_id":13085541,"title":"Passing list of items from Controller/Model to a variable in javascript - autocomplete","body":"<p>I've a method in a NamesModel which fetches all the names and returns a list of names:</p>\n\n<pre><code>public static List&lt;NamesModel&gt; GetAllNames()\n{\n    List&lt;NamesModel&gt; names = new List&lt;NamesModel&gt;();\n\n    // \n    // code to fetch records\n    //\n\n    return names;\n}\n</code></pre>\n\n<p>In my controller:</p>\n\n<pre><code>public ActionResult Index()\n{\n   NamesModel model = new NamesModel();\n   model.GetAllNames();\n\n   return View(model);\n}\n</code></pre>\n\n<p>In the view, I've got a textbox:</p>\n\n<pre><code>@Html.TextBox(\"search-name\")\n</code></pre>\n\n<p>Now in my javascript, I want to fetch all names into a variable either from a model (from method) or from controller, for example:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n $(function () {\n\n     var names = ...........\n     $(document).ready(function () {\n          $('#search-name').autocomplete({\n               source: names\n          });\n     });\n });\n&lt;/script&gt;\n</code></pre>\n\n<p>If I use hardcoding then it works but I want to use the names stored in the db. Is it possible?</p>\n\n<p>hardcoding example:</p>\n\n<pre><code>var names = [\"abc\", \"xyz\"];\n</code></pre>\n"},{"tags":["asp.net-mvc-3","appharbor","view-helpers","precompile"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13120823,"title":"How to use ASP.NET MVC view precompilation with App_Code helpers?","body":"<p>I am trying to enable view compilation to have my ASP.NET MVC3 web site load faster. My web site is hosted on AppHarbor.</p>\n\n<p>However, my views make use of MVC3 view helpers, defined in the App_Code folder.</p>\n\n<p>When I try to load my web-site, I get:\n\"The directory '/App_Code/' is not allowed because the application is precompiled.\"</p>\n\n<p>How can I stop the App_Code folder being deployed to the web-server, but still have the App_Code helpers pre-compiled?</p>\n\n<p>I've tried changing the helpers to Content=None, but this leads to an AppHarbor build error because the helper files cannot be found during pre-compilation.</p>\n"},{"tags":["asp.net-mvc-3","sqlite","portability"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":9896860,"title":"Making an SQLite ConnectionString portable","body":"<p>As a personal project I want to test the ability of using SQLite with MVC 3 and so far so good managed to get everything setup.</p>\n\n<p>The thing I am now trying to achieve is to make the solution fully portable during development, but I am unable to achieve this as the connection string is complaining that the database is missing if I try on different machines where the solution it located in different places.</p>\n\n<p>Is there any way that I can alter the connection string so it is uses a set directory each and everytime?</p>\n\n<p>I have the database housed in a datalayer solution in the same folder houses my datamodel if that is any help</p>\n"},{"tags":["asp.net-mvc","localization","asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1768,"score":5,"question_id":5090751,"title":"Changing the default ModelState error messages in ASP MVC3","body":"<p>I have my resource files in separate assembly MyApp.Resources.dll. I can use the resources without any problem but the issue appears when I want to change (localize) the default validation messages:</p>\n\n<p><em>\"The {0} field is required.\"</em> and <em>\"The value '{0}' is not valid for {1}.\"</em></p>\n\n<p>The <a href=\"http://forums.asp.net/p/1512140/3608427.aspx\">solution</a> <code>DefaultModelBinder.ResourceClassKey = \"MyApp.Resources.Global\";</code> does not work because it requires the ResourceClassKey to be under App_GlobalResources folder in the web project. </p>\n\n<p>What should be the fix for me ?</p>\n\n<p>Regards</p>\n"},{"tags":["c#","asp.net-mvc-3","reflection"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13120751,"title":"Copying object values through reflections","body":"<p>I have written a class, for copying properties from one object to another, but I caught exception: \nSystem.Reflection.TargetException: The object does not match the target type. \nI checked, that <strong>fromPropValue</strong> is of correct type, is not null, etc.\nOf course, property of recepient is Binary.</p>\n\n<pre><code>public class Reflector\n{\n    public void ReflectProperties(object from, object to) \n    { \n        Type toType = to.GetType();\n        Type fromType = from.GetType();\n        var toProperties = toType.GetProperties();\n\n        foreach (var prop in toProperties)\n        {\n            var fromProp = fromType.GetProperty(prop.Name);\n\n            if (fromProp != null)\n            {\n                var propType = prop.PropertyType;\n                var fromPropValue = fromProp.GetValue(from, null);\n\n                if (propType == typeof(Binary))\n                    prop.SetValue(this, (Binary)fromPropValue, null); // &lt;-- error\n                else if (propType == typeof(string))\n                    prop.SetValue(this, (string)fromPropValue, null);\n                else if (propType == typeof(bool))\n                    prop.SetValue(this, (bool)fromPropValue, null);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>P.S.: object <strong>from</strong> is parent of object <strong>to</strong>, and i want just to copy values of all properties from parent to child.</p>\n"},{"tags":["asp.net-mvc-3","slickupload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":166,"score":0,"question_id":9496627,"title":"SlickUpload asynchronous upload","body":"<p>Maybe someone know how to implement asynchronous upload with SlickUpload? Now when I upload several files I get Upload Action executed only when all files are uploaded. I would like to process uploaded file imidiatlly after upload without waiting for all files to be uploaded.</p>\n"},{"tags":["asp.net-mvc-3","silverlight","authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13120870,"title":"From silverlight how to reach authentication area in asp.net","body":"<p>I'm creating an asp.net mvc application and I want to add silverlight file manager to the admin area , all the solutions I've seen depends on open file manager without authentication, this is a security issue.</p>\n\n<p>The gateway action that provides the json data about folders and files names, size,.... this action is in a controller in the admin area and i'm giving access only to authenticated users.</p>\n\n<p>so the silverlight will not be able to retrieve the JSON unless it asks the user for credentials.. i want the user to sign in once through logon page then access anything silverlight and webpages. what i want is to work with silverlight as javascript</p>\n\n<p>my idea is to send commands to javascript then javascript requset json and forward it to silverlight.</p>\n\n<p>I asked this question to see if my understanding is true and to see if there is any alternative way [no services].</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":34,"score":4,"question_id":13120306,"title":"localized mvc3 app","body":"<p>I want to learn right approach in mvc3 localization approach. I do not want to use threads, user should select desired language and based on that value pages should be localized.</p>\n\n<p>I've found <a href=\"http://afana.me/post/aspnet-mvc-internationalization.aspx\" rel=\"nofollow\">this article</a> but I want to implement localization with DRY principle.</p>\n\n<p>Thanks everyone</p>\n"},{"tags":["asp.net-mvc-3","dependency-injection","repository-pattern","custom-membershipprovider"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13119622,"title":"Need help in implementing Repository Pattern with Custom Membership ASP.NET MVC","body":"<p>I am implementing Repository Pattern in one of my project based on ASP.NET MVC4 and N-Tier Architecture. I am little confused as how to implement Custom Membership with Repository Pattern. Here are how I have implemented my classes so far. </p>\n\n<p>//<strong><em>Generic Repository</em></strong></p>\n\n<pre><code>public interface IRepository&lt;T&gt; where T : class\n{\nvoid Add(T entity);\nvoid Delete(T entity);\nvoid Update(T entity);\nIQueryable&lt;T&gt; GetAll();\nT FindBy(Expression&lt;Func&lt;T, bool&gt;&gt; expression);\nIQueryable&lt;T&gt; FilterBy(Expression&lt;Func&lt;T, bool&gt;&gt; expression);\n}\n</code></pre>\n\n<p>//<strong><em>Repository Base Class</em></strong></p>\n\n<pre><code>public abstract class Repository&lt;T&gt; : IRepository&lt;T&gt; where T : class\n{\nprivate STNDataContext _stnDataContext;\nprivate readonly IDbSet&lt;T&gt; _dbSet;\n\nprotected Repository(IDatabaseFactory databaseFactory)\n{\nDatabaseFactory = databaseFactory;\n_dbSet = StnDataContext.Set&lt;T&gt;();\n}\n\nprotected IDatabaseFactory DatabaseFactory { get; private set; }\npublic STNDataContext StnDataContext\n{\nget { return _stnDataContext ?? (_stnDataContext = new STNDataContext()); }\n}\npublic void Add(T entity)\n{\n_dbSet.Add(entity);\n_stnDataContext.Commit();\n}\n\npublic void Delete(T entity)\n{\n_dbSet.Remove(entity);\n}\n\npublic void Update(T entity)\n{\n_dbSet.Attach(entity);\n_stnDataContext.Entry(entity).State = EntityState.Modified;\n_stnDataContext.Commit();\n}\n\npublic IQueryable&lt;T&gt; GetAll()\n{\nreturn _dbSet.ToList().AsQueryable();\n}\n\npublic T FindBy(Expression&lt;Func&lt;T, bool&gt;&gt; expression)\n{\nreturn FilterBy(expression).SingleOrDefault();\n}\n\npublic IQueryable&lt;T&gt; FilterBy(Expression&lt;Func&lt;T, bool&gt;&gt; expression)\n{\nreturn GetAll().Where(expression).AsQueryable();\n}\n</code></pre>\n\n<p>//<strong><em>User Repository Interface</em></strong></p>\n\n<pre><code>public interface IUserRepository : IRepository&lt;User&gt;\n{\n}\n</code></pre>\n\n<p>//<strong><em>User Repository</em></strong> </p>\n\n<pre><code>public class UserRepository : Repository&lt;User&gt;, IUserRepository\n{\npublic UserRepository(IDatabaseFactory databaseFactory)\n: base(databaseFactory)\n{\n}\n}\n</code></pre>\n\n<p>//<strong><em>Heres my Business Logic Layer</em></strong></p>\n\n<p>//<strong><em>Generic Service Interface</em></strong></p>\n\n<pre><code>public interface IService&lt;T&gt;\n{\nvoid Add(T entity);\nvoid Delete(T entity);\nvoid Update(T entity);\nIEnumerable&lt;T&gt; GetAll();\nT FindBy(Expression&lt;Func&lt;T, bool&gt;&gt; expression);\nIEnumerable&lt;T&gt; FilterBy(Expression&lt;Func&lt;T, bool&gt;&gt; expression);\n}\n</code></pre>\n\n<p>//<strong><em>Service Base</em></strong></p>\n\n<pre><code>public class Service&lt;T&gt; : IService&lt;T&gt; where T : class \n{\npublic void Add(T entity)\n{\nthrow new NotImplementedException();\n}\n\npublic void Delete(T entity)\n{\nthrow new NotImplementedException();\n}\n\npublic void Update(T entity)\n{\nthrow new NotImplementedException();\n}\n\npublic IEnumerable&lt;T&gt; GetAll()\n{\nthrow new NotImplementedException();\n}\n\npublic T FindBy(Expression&lt;Func&lt;T, bool&gt;&gt; expression)\n{\nthrow new NotImplementedException();\n}\n\npublic IEnumerable&lt;T&gt; FilterBy(Expression&lt;Func&lt;T, bool&gt;&gt; expression)\n{\nthrow new NotImplementedException();\n}\n}\n</code></pre>\n\n<p>//<strong><em>User Service Interface</em></strong></p>\n\n<pre><code>public interface IUserService : IService&lt;User&gt;\n{\n}\n</code></pre>\n\n<p>//<strong><em>User Service Implementation</em></strong></p>\n\n<pre><code>public class UserService : Service&lt;User&gt;, IUserService\n{\nprivate readonly IUserRepository _userRepository;\nprivate readonly IRoleRepository _roleRepository;\n\npublic UserService(IUserRepository userRepository, IRoleRepository roleRepository)\n{\n_userRepository = userRepository;\n_roleRepository = roleRepository;\n}\n\npublic IList&lt;User&gt; GetAllUsers()\n{\nreturn _userRepository.GetAll().ToList();\n}\n\npublic User GetUser(int id)\n{\nreturn _userRepository.FindBy(x =&gt; x.UserId == id);\n}\n\npublic User GetUser(string userName)\n{\nreturn _userRepository.FindBy(x =&gt; x.Username.Equals(userName));\n}\n\npublic void CreatUser(User user)\n{\n_userRepository.Add(user);\n}\n\npublic IList&lt;User&gt; GetUsersForRole(string roleName)\n{\nreturn _userRepository.FilterBy(x =&gt; x.Role.RoleName.Equals(roleName)).ToList&lt;User&gt;();\n}\n\npublic IList&lt;User&gt; GetUsersForRole(int roleId)\n{\nreturn _userRepository.FilterBy(x =&gt; x.Role.RoleId == roleId).ToList&lt;User&gt;();\n}\n\npublic IList&lt;User&gt; GetUsersForRole(Role role)\n{\nreturn GetUsersForRole(role.RoleId);\n}\n\n}\n</code></pre>\n\n<p>I am not very sure on Am I going the right way? If yes how do i implement my UserService class. </p>\n\n<p>If no, what changes do i need to implement.</p>\n\n<p>Any help on this is highly appreciable. Thanks in advance*<em>strong text</em>*</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13120305,"title":"How to show ModelState.AddModelError when the Model is Empty in MVC4","body":"<p>I am displaying a shopping cart. I need to check for empty values in Shopping cart and display a message like \"The Shopping Cart is empty\".<br/></p>\n\n<p>When I use ModelState.AddModelError in myAction, it throws an exception as there is null reference in Model. How to display the ErrorMessage.<br/>\nMy Action <br/></p>\n\n<pre><code>  public ActionResult Index()\n        {\n            string id = Request.QueryString[\"UserID\"];\n            IList&lt;CartModel&gt; objshop = new List&lt;CartModel&gt;();\n            objshop = GetCartDetails(id);\n            if (objshop.Count &gt; 0)\n            {\n                return View(objshop.ToList());\n            }\n            else\n            {\n                ModelState.AddModelError(\"\", \"Your Shopping Cart is empty!\");\n            }\n            return View();\n}\n</code></pre>\n\n<p>My View<br/></p>\n\n<pre><code>    @{\n         @Html.ValidationSummary(true)\n     }\n\n &lt;th &gt; @Html.DisplayNameFor(model =&gt; model.ProductName) &lt;/th&gt;\n &lt;th &gt; @Html.DisplayNameFor(model =&gt; model.Quantity)   &lt;/th&gt;\n &lt;th &gt; @Html.DisplayNameFor(model =&gt; model.Rate)      &lt;/th&gt;\n &lt;th &gt; @Html.DisplayNameFor(model =&gt; model.Price)    &lt;/th&gt;        \n @foreach (var item in Model)\n   {\n&lt;td&gt;  @Html.DisplayFor(modelItem =&gt; item.ProductName)&lt;/td&gt;\n&lt;td&gt;  @Html.DisplayFor(modelItem =&gt; item.Quantity)&lt;/td&gt;\n&lt;td&gt;  @Html.DisplayFor(modelItem =&gt; item.Rate) &lt;/td&gt;\n&lt;td&gt;  @Html.DisplayFor(modelItem =&gt; item.Price) &lt;/td&gt;\n   }\n</code></pre>\n\n<p>Any suggestions.</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":13469,"score":2,"question_id":6157293,"title":"How do I set a checkbox in razor view?","body":"<p>I need to check a checkbox by default:</p>\n\n<p>I tried all of these, nothing is checking my checkbox -</p>\n\n<pre><code>@Html.CheckBoxFor(m =&gt; m.AllowRating, new { @value = \"true\" })\n\n@Html.CheckBoxFor(m =&gt; m.AllowRating, new { @checked = \"true\" })\n\n@Html.CheckBoxFor(m =&gt; m.AllowRating, new { @checked = true })\n\n@Html.CheckBoxFor(m =&gt; m.AllowRating, new { @checked = \"checked\"})\n</code></pre>\n"},{"tags":["c#",".net","windows","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":57,"score":-2,"question_id":13120203,"title":"How to create property at compile time in C#?","body":"<p>Is it possible to create property in a class via code at compile time (Like ViewBag of MVC3) in c#.</p>\n\n<p>I want to create property of custom type in a class as we create property in ViewBag of MVC3.</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","asp.net-mvc-3","asp.net-membership","asp.net-roles"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13116969,"title":"Adding users to roles on registring failed ASP.NET MVC3","body":"<p>I like to enable users to choose their role on register in asp.net mvc web application. I have previous add roles via asp.net addministration tool. Here is the code I am using in register methods</p>\n\n<pre><code>public ActionResult Register()  \n{\nViewData[\"roleName\"] = new SelectList(Roles.GetAllRoles(), \"roleName\");\nreturn View();\n}\n\n\n [HttpPost]\n    public ActionResult Register(RegisterModel model)\n    {\n        if (ModelState.IsValid)\n        {\n            // Attempt to register the user\n            MembershipCreateStatus createStatus;\n            Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, null, out createStatus);\n\n            if (createStatus == MembershipCreateStatus.Success)\n            {\n                Roles.AddUserToRole(model.UserName, \"roleName\");\n                FormsAuthentication.SetAuthCookie(model.UserName, false /* createPersistentCookie */);\n                return RedirectToAction(\"Index\", \"Home\");\n            }\n            else\n            {\n                ModelState.AddModelError(\"\", ErrorCodeToString(createStatus));\n            }\n        }\n\n        // If we got this far, something failed, redisplay form\n        return View(model);\n    }\n</code></pre>\n\n<p>While in Register View I got this code</p>\n\n<pre><code>    &lt;label for=\"roleName\"&gt;Select Role:&lt;/label&gt;\n         @Html.DropDownList(\"roleName\")\n         @Html.ValidationMessage(\"roleName\")\n</code></pre>\n\n<p>Roles are written in the database and users although. However UsersInRoles table is empty and I got this exception</p>\n\n<p>System.Configuration.Provider.ProviderException: The role 'roleName' was not found.</p>\n\n<p>Does anybody had the same problem?</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13119863,"title":"Unable to cast object of type 'System.Web.HttpInputStream' to type 'System.IO.FileStream' MVC 3","body":"<p>I have met an issue regarding the casting type from HttpInputStream to FileStream.</p>\n\n<p>How I did ?</p>\n\n<p>I have a <code>HttpPostedFileBase</code> object and I want to have FileStream.</p>\n\n<p>I wrote:</p>\n\n<pre><code>public void Test(HttpPostedFileBase postedFile) {\n  FileStream fileStream = (FileStream)(postedFile.InputStream); // throw exception\n\n  FileStream anotherFileStream = postedFile.InputStream as FileStream; // null\n}\n</code></pre>\n\n<p>I tried also</p>\n\n<pre><code>public void Test(HttpPostedFileBase postedFile) {\n  Stream stream = postedFile.InputStream as Stream;\n\n  FileStream myFile = (FileStream)stream;\n\n}\n</code></pre>\n\n<p>But no success.</p>\n\n<p>Why at <code>postedFile.InputStream</code> comes <code>HttpInputStream</code> type ? </p>\n\n<p>And how could I solve this issue ?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","wcf","rest"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":439,"score":0,"question_id":9112531,"title":"Custom MVC AuthorizeAttribute for WCF Web API Preview 6","body":"<p>I tried to implement my own AuthorizeAttribute for my REST API that I've built with the WCF Web API Preview 6. </p>\n\n<p>Unfortunately only the constructor gets called, but non of the methods. Am I missing something with the registration?</p>\n\n<pre><code>[BasicHttpAuthorize]\n[WebGet(UriTemplate = \"\")]\npublic IEnumerable&lt;Supertext.API.Order&gt; Get()\n{\n</code></pre>\n\n<p>And this is my super simplified code.</p>\n\n<pre><code>[AttributeUsage(AttributeTargets.Method, AllowMultiple = false, Inherited = true)]\npublic class BasicHttpAuthorizeAttribute: AuthorizeAttribute\n{\n    public BasicHttpAuthorizeAttribute()\n    {\n    }\n\n    protected override bool AuthorizeCore(HttpContextBase httpContext)\n    {\n        return true;\n    }\n\n\n    public override void OnAuthorization(AuthorizationContext filterContext)\n    {\n        //do the authorization\n    }\n}\n</code></pre>\n\n<p>But as I said, neither the AuthorizeCore nor the OnAuthorization method is ever called.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["c#","javascript","asp.net-mvc-3","razor","radio-button"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":76,"score":2,"question_id":13118764,"title":"MVC3 (Razor) radio buttons checks","body":"<p>In first,I have to create some radio buttons in a mvc3 partial view.</p>\n\n<p>When I'm on the screen I need to select only one radio button and retrieved a specific value.</p>\n\n<p>How can I do this (with JS or C# for example) ?</p>\n\n<pre><code>            &lt;div id=\"UserDeleteInfosField\"&gt;\n                &lt;p&gt;\n                    @Html.RadioButton(\"HasUserLeave\", new { id = \"rb1\" })\n                    @UserAccountResources.UserLeave\n                    @Html.HiddenFor(x =&gt; x.UserLeave)   \n                &lt;/p&gt;\n                &lt;br /&gt;\n                &lt;p&gt;\n                    @Html.RadioButton(\"HasUserTransfer\", new { id = \"rb2\" })\n                    @UserAccountResources.UserTransfer\n                    @Html.HiddenFor(x =&gt; x.UserTransfer)   \n                &lt;/p&gt;\n                &lt;br /&gt;\n                &lt;p&gt;\n                    @Html.RadioButton(\"HasUserDetachment\", new { id = \"rb3\" })\n                    @UserAccountResources.UserDetachment\n                    @Html.HiddenFor(x =&gt; x.UserDetachment)   \n                &lt;/p&gt;\n                &lt;br /&gt;\n                &lt;p&gt;\n                    @Html.RadioButton(\"HasUserRetirement\", new { id = \"rb4\" })\n                    @UserAccountResources.UserRetirement\n                    @Html.HiddenFor(x =&gt; x.UserRetirement)   \n                &lt;/p&gt;\n                &lt;br /&gt;\n                &lt;p&gt;\n                    @Html.RadioButton(\"HasUserStatus\", new { id = \"rb5\" })\n                    @UserAccountResources.UserStatus\n                    @Html.HiddenFor(x =&gt; x.UserStatus)   \n                &lt;/p&gt;\n            &lt;/div&gt;\n</code></pre>\n\n<p>Thanks in advance !</p>\n\n<p>Ars_n</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","jquery-validate","datepicker","unobtrusive-validation"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":3945,"score":2,"question_id":8059093,"title":"MVC3 Unobtrusive Date Validation on a custom formatted date","body":"<p>I have a date field (i'm using the jquery ui datepicker) in a form that I've formatted, like so:</p>\n\n<p><strong>ViewModel</strong></p>\n\n<pre><code>[DisplayFormat(DataFormatString = \"{0:dd-MMM-yyyy}\", ApplyFormatInEditMode = true)]\npublic DateTime FooDate { get; set; }\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>@Html.EditorFor(m =&gt; m.FooDate)\n</code></pre>\n\n<p>This correctly shows the date the way I want it to, e.g. <code>09-Nov-2011</code></p>\n\n<p>The problem I'm getting, occurs when I press submit. It keeps telling me the date is not valid.... It IS valid, you stupid thing!</p>\n\n<p>Is there any way, i can get jquery/unobtrusive javascript to ignore this field or allow this format to pass? So far, the only way I can get the form to work, is if i don't format the date, or use {0:d} as a date format for it.</p>\n\n<p><strong>Edit</strong>:\nI've created a totally separate layout+view+controller+model for testing this stupid thing. Still doesn't work in IE/Safari.\nI have the latest jquery.validate/unobtrusive files from nuget. </p>\n\n<p>My <code>layout</code> is empty. It just loads the following files:</p>\n\n<pre><code>\"jquery-1.7.min.js\"\n\"jquery-ui-1.8.16.min.js\"\n\"jquery.validate.min.js\"\n\"jquery.validate.unobtrusive.min.js\"\n</code></pre>\n\n<p>My TestViewModel is simple:</p>\n\n<pre><code>public class TestViewModel\n{\n    [Display(Name = \"Test Date:\")]\n    [DisplayFormat(DataFormatString = \"{0:dd/MMM/yyyy}\", ApplyFormatInEditMode = true)]\n    public DateTime? TestDate { get; set; }\n}\n</code></pre>\n\n<p>My TestController goes as follows:</p>\n\n<pre><code>public class TestController : Controller\n{\n    public ActionResult Index()\n    {\n        var m = new TestViewModel();\n        m.TestDate = DateTime.Now;\n        return View(m);\n    }\n}\n</code></pre>\n\n<p>My View:</p>\n\n<pre><code>@using (Html.BeginForm())\n{\n    ViewContext.FormContext.ValidationSummaryId = \"valSumId\";\n    @Html.ValidationSummary(false, \"The following errors were found:\");\n    @Html.AntiForgeryToken()\n\n    @Html.LabelFor(m =&gt; m.TestDate)\n    &lt;input type=\"date\" id=\"TestDate\" value=\"@Model.TestDate.Value.ToString(\"dd/MMM/yyyy\")\" /&gt;\n    &lt;input type=\"submit\" /&gt;\n}\n</code></pre>\n\n<p>No worky.</p>\n\n<p>You know what the annoying thing is? If i change <code>TestDate</code> to a string, it still fails.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1947,"score":0,"question_id":6187284,"title":"Html.BeginForm in MVC3 is rendering too much","body":"<p>I have the following code. Note that I am not using a using as I want to begin and end the form in two different areas of my code. Has anyone seen this action where the helper adds \"System.Web.Mvc.Html.MvcForm\". I cannot see why this is added.</p>\n\n<pre><code>Code:\n @Html.BeginForm(new { action = ViewContext.Controller.ValueProvider.GetValue(\"action\").RawValue })\n\n@{ Html.EndForm() }\n\nResult:\n&lt;form action=\"/adminTests/Edit\" method=\"post\"&gt;System.Web.Mvc.Html.MvcForm\n</code></pre>\n\n<p>When I use the following I don't get the \"System.Web.Mvc.Html.MvcForm\" </p>\n\n<pre><code>    @using (Html.BeginForm(new { action = ViewContext.Controller.ValueProvider.GetValue(\"action\").RawValue }))\n    {\n\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","datetime","data-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":13118639,"title":"How to apply Custom Validation rules to ViewModel attribute in MVC3","body":"<p>In my MVC application I have the following <code>ViewModel</code>:</p>\n\n<pre><code>public class MyViewModel\n{\n   public int StartYear { get; set; }\n   public int? StartMonth { get; set; }\n   public int? StartDay { get; set; }\n\n   public int? EndYear { get; set; }\n   public int? EndMonth { get; set; }\n   public int? EndDay { get; set; }\n\n   [DateStart]\n   public DateTime StartDate\n   {\n       get\n       {\n           return new DateTime(StartYear, StartMonth ?? 1, StartDay ?? 1);\n       }\n   }\n\n   [DateEnd(DateStartProperty=\"StartDate\")]\n   public DateTime EndDate\n   {\n       get\n       {\n           return new DateTime(EndYear ?? DateTime.MaxValue.Year, EndMonth ?? 12, EndDay ?? 31);\n       }\n   }\n }\n</code></pre>\n\n<p>I do not use a calendar helper because I need the date in this format (there is a logic behind). Now I created my Custom Validation rule:</p>\n\n<pre><code>    public sealed class DateStartAttribute : ValidationAttribute\n    {\n        public override bool IsValid(object value)\n        {\n            DateTime dateStart = (DateTime)value;\n            return (dateStart &gt; DateTime.Now);\n        }\n    }\n\n    public sealed class DateEndAttribute : ValidationAttribute\n    {\n        public string DateStartProperty { get; set; }\n        public override bool IsValid(object value)\n        {\n            // Get Value of the DateStart property\n            string dateStartString = HttpContext.Current.Request[DateStartProperty];\n            DateTime dateEnd = (DateTime)value;\n            DateTime dateStart = DateTime.Parse(dateStartString);\n\n            // Meeting start time must be before the end time\n            return dateStart &lt; dateEnd;\n        }\n    }\n</code></pre>\n\n<p>The problem is that <code>DateStartProperty</code> (in this case <code>StartDate</code>) is not in the <code>Request</code> object since it is calculated after the form is posted to the server. Therefore the <code>dateStartString</code> is always null. How can I get the value of <code>StartDate</code>?</p>\n"},{"tags":["ajax","asp.net-mvc-3","bing-maps-api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13118881,"title":"Bing Maps. Change scalebar from Imperial to Metric?","body":"<p>As title says... been looking on <a href=\"http://www.microsoft.com/maps/isdk/ajax/\" rel=\"nofollow\">Bing Maps API</a> and can´t find anything about how to change scalebar from Imperial to Metric... any suggestions anyone?\nAJAX v6.3</p>\n\n<p>To make the question a little bit more clear... Im asking for if there is some kind of solution programmaticly to show the scalebar in metric?\nOr if there is just a method to show only the metric scalebar.</p>\n\n<p>What I´ve read, the bing map read your local settings in the browser to see if you are in a country that uses Imperial or Metric system.</p>\n\n<p>And I´ve goggle:d it too... :P </p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","authentication","authorization"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13119184,"title":"MVC3 musicstore tutorial: can't login with administrator account","body":"<p>I am currently following the MVC Musicstore tutorial from <a href=\"http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-7\" rel=\"nofollow\">http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-7</a> and got stuck on the part with the Authorization.</p>\n\n<p>To get the basics covered: I am using VS Web Developer 2012 and created a mvc4 application. \nThe \"DefaultConnection\" got replaced by \"MusicStoreConnection\". To reflect this in the code in InitializeSimpleMembershipAttribute.cs I changed a lin to:</p>\n\n<pre><code>WebSecurity.InitializeDatabaseConnection(\"MusicStoreConnection\", \"UserProfile\", \"UserId\", \"UserName\", autoCreateTables: true);\n</code></pre>\n\n<p>Now, if a run the application I can create a user and log in with the credentials. However: if a run the asp.net configuration and create a user there, assign him to the administrator role and try to login it fails.</p>\n\n<p>What do I have to do in order to get the asp.net conf created user work in my application, so I can follow the tutorial?</p>\n\n<p>Kind regards</p>\n"},{"tags":["asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13118075,"title":"Merge three applications into one in asp.net mvc 3.0","body":"<p>I have three MVC3 web project into a single solution, like admin, UI and service(WCF service).</p>\n\n<p>Now i need to merge it into a single project as i have to host it on a single IP on Network solution. Please suggest how we can combine all these project.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","asp.net-membership","bug"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":39,"score":-2,"question_id":13117817,"title":"authentication bug","body":"<p>I created a web application using asp.net 4 MVC3 and the ASP.NET membership provider.\nThe application worked fine on the localhost. I deployed the app:\nI set up the web.config to work with the production server, and created the membership tables on the host server database.\nHowever, when I hit the log in button, the website redirects to an error page.\nI was told there might be a bug in the ASP.NET 4 authentication, but I am not sure this is the problem.\nHow can I fix this so that log in will be possible?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":228,"score":1,"question_id":8255511,"title":"Handle Multiple Form Submission via ActionFilterAttribute mvc3.net","body":"<p>I am trying to handle multiple form submissions by writing an ActionFilter. I am new to the domain of ActionFilters and dont know where to start any help will be much appreciated. \nI have looked at this question but couldnt get a starting point</p>\n\n<p><a href=\"http://stackoverflow.com/questions/218907/how-to-handle-multiple-submissions-server-side\">How to handle multiple submissions server-side</a></p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1324,"score":4,"question_id":5869390,"title":"How to prevent multiple posts on MVC3?","body":"<blockquote>\n  <p>A user wants to post in his blog, he fills the field and click <code>submit</code>.</p>\n  \n  <p>The site is running slow, he clicks again, and again, and again.</p>\n  \n  <p>It was finally saved, but now he check his posts and sees <code>4</code> posts.</p>\n</blockquote>\n\n<p><strong>How can I prevent this from happening?</strong> If the user click to submit once I want to <code>do nothing</code> for the next clicks or <code>abort previous</code> and start a new post, whichever makes more sense or is recommended.</p>\n\n<p>In a form with</p>\n\n<pre><code>@using (Ajax.BeginForm(...))\n{\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","firefox","google-chrome","jquery-ajax","colorbox"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13088740,"title":"Colorbox is not loading ajax content","body":"<pre><code>&lt;a href=\"/Search/ReadChain/?CategoryID=123&amp;ParentID=5587&amp;LogDate=10/12/2012\" class=\"ReadChainDL\"&gt;Read Chain&lt;/a&gt;\n\n$(\".ReadChainDL\").colorbox();\n</code></pre>\n\n<p>When I click the Read Chain it runs the ajax and loads the colorbox, but the colorbox is blank!  I can confirm that ajax is running and pulling the correct content via firebug.  It's just not populating the generated ajax content into the colorbox.  I've confirmed via firebug that colorbox is blank.</p>\n\n<p>I've tried it in Firefox and Chrome</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13116139,"title":"How to alternate row style without javascript for DisplayFor/EditorFor bound to a list of model","body":"<p>How can I pass the index of the current element to the View for DisplayFor/EditorFor so that I can decide if the row should show the alternate style or not?</p>\n\n<p>My main view looks like this:</p>\n\n<pre><code>&lt;table&gt;\n@Html.EditorFor(model =&gt; model.MyListOfItems)\n&lt;/table&gt;\n</code></pre>\n\n<p>The view used for the EditorFor looks like:</p>\n\n<pre><code>@Html.HiddenFor(model =&gt; model.IdOfTheItem)\n&lt;tr class=\"shouldBeChangedDependingOnRowEvenOrNot\"&gt;\n&lt;td&gt;@Html.CheckBoxFor(model =&gt; model.MarkForBatchEdit)&lt;/td&gt;\n&lt;td&gt;@Html.DisplayFor(model =&gt; model.NameOfThisItem)&lt;/td&gt;\n&lt;td&gt;@Html.DisplayFor(model =&gt; model.StateOfThisItem)&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>Well I am aware of this similar question and the suggested solution: <a href=\"http://stackoverflow.com/questions/8593477/alternating-row-color-mvc\">alternating row color MVC</a></p>\n\n<p>But I can't apply them to this case.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["asp.net-mvc-3","razor","google-analytics"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1167,"score":3,"question_id":6716829,"title":"Google in-page analytics doesn't work in my ASP.NET MVC 3 Razor website","body":"<p>We've recently launched a new website <a href=\"http://atlascode.com\" rel=\"nofollow\">http://atlascode.com</a> and since the launch I've been unable to get in-page analytics working on the website.  Google also claims that my tracking code is not working but I think this is a misnomer.</p>\n\n<p>Whenever I attempt to load in-page analytics I receive the error:</p>\n\n<p>We've identified problems in your setup. These may cause problems loading In-Page Analytics.\nYour site doesn't load ga.js from Google. </p>\n\n<ul>\n<li><p>If you host the Google tracking code on your own servers, it isn't updated automatically and can miss important changes.</p></li>\n<li><p>We didn't find a tracking snippet on your site. In-Page Analytics cannot load. Please make sure you have tracking installed correctly. If your snippet is included in a separate JavaScript file, you'll have to manually check it is being loaded correctly.</p></li>\n</ul>\n\n<p>-ENDS-</p>\n\n<p>I've simply copy and pasted the tracking code on to the website and haven't done anything out of the ordinary.  I've also checked to make sure that under Web Property Settings my Web property name and default URL is atlascode.com.</p>\n\n<p>Any ideas you guys have really would be welcomed.</p>\n\n<p>EDIT: Added screenshot of Google Analytics error <a href=\"http://min.us/mdqlrhj\" rel=\"nofollow\">http://min.us/mdqlrhj</a></p>\n\n<p>Thanks in advance</p>\n\n<p>Simon</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","entity-framework","poco"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13113566,"title":"Asp.net mvc, entity framework, Poco - Architecture","body":"<p>I have a \"small\" enterprise application, aspnet mvc 3 + entity framework with POCO entity and repository pattern. I structured the solution in 4 projects:</p>\n\n<ol>\n<li>POCO entities</li>\n<li>Domain model</li>\n<li>Services</li>\n<li>web application</li>\n</ol>\n\n<p>When the application performs a query on the database, use one of the services provided, the service uses the repository and the small classes, as a result I have some dynamic proxy objects that I would like to convert in my domain entities, before using them in mvc views, but I do not know how. Dovrebber be set as the translator?</p>\n\n<p>This approach is reasonable?</p>\n"},{"tags":["asp.net","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13114983,"title":"Asp.net mvc3 - how to stop clearing HttpRuntime.Cache when debugging locally","body":"<p>I'm using asp.net mvc3. Our app heavily uses the HttpRuntime.Cache to store data in memory on the web server to reduce database calls.  </p>\n\n<p>My issue is that every time I run the app locally (F5 in Visual Studio) the cache appears to be cleared, causing a full reload of all the data from the database. i.e. I run once, get the data from the db then stop.  If I run again seconds later the cache appears to have been invalidated and the database call happens again.  My timeouts are all way in the future so not sure what's going on here. </p>\n\n<p>I really only want to get the data when the cache is really empty, not every time I hit F5 in VS.  Is there a way to turn off the setting that's clearing my cache every time I run locally?</p>\n\n<p>Thanks!  </p>\n"},{"tags":["asp.net-mvc-3","razor","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":13112780,"title":"Razor datepicker not selecting any value in update","body":"<p>i have inline editing grid with datepicker. This is working fine if i use local database(PC database) but not working if i use remote database</p>\n\n<p><strong>shared/editortemplate/DateTime.cshtml</strong></p>\n\n<pre><code>@model DateTime?\n\n\n@(Html.Kendo().DatePickerFor(m =&gt; m).Format(\"M/dd/yyyy\"))\n</code></pre>\n\n<p><strong>View:</strong></p>\n\n<pre><code>columns.Bound(p =&gt; p.DateCompleted).Format(\"{0:d}\").Width(80)  \n</code></pre>\n\n<p><strong>Model:</strong></p>\n\n<pre><code>[UIHint(\"Date\")]\n [DisplayName(\"Date Completed\")]\n public DateTime? DateCompleted { get; set; }\n</code></pre>\n\n<p>when i tried to update and pick another date the tried to save, the date value become null and it weird is only happen if i connect via remote database</p>\n\n<p>please advise</p>\n"},{"tags":["c#","asp.net-mvc-3","html-helper"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13114114,"title":"mvc3 - return bool from view to controller","body":"<p><em><strong>Background</em></strong></p>\n\n<p>I have a bool in a view model class. I have an if statement checking to see if the bool is true or false. If false I set the value to true and call a view. In the view I have button that when clicked updates and calls the view again. My problem is that the bool keeps being set to false when the view is loaded. I don't know why this is happening. Is there a way to stop the bool from being changed?</p>\n\n<p><em><strong>Attempts</em></strong></p>\n\n<p>I'm aware MVC is stateless.</p>\n\n<p>The view I've been given to work with is a .aspx view with the \"value\" attribute of the input tag already being used. So I'm unable to update the value of the Submit button.</p>\n\n<pre><code>&lt;input type=\"submit\" class=\"button\" value=\"bvCalc\" /&gt;\n</code></pre>\n\n<p><em><strong>Question</em></strong></p>\n\n<p>In whatever way, I'm looking to persist the state of the bool. I don't know how to do this and I'm unsure as to whether or not the best thing to do at this point would be to </p>\n\n<ol>\n<li>use a hidden field in the view</li>\n<li>build an HTML Helper Extension that will update the bool from true to false</li>\n<li>return the modified value with the model information being sent back to the controller so I can evaluate the data in the if statement.</li>\n</ol>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","error-handling"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13113652,"title":"What is the most standard/correct way to return logic error?","body":"<p>ASP.Net MVC 3, Kendo UI Web.</p>\n\n<p>Typical example -- there is a database and some tables, user is editing the data -- adding new entries, deleting, updating.</p>\n\n<p>Apart from technical problems (network connection down), there could be several logical ones -- for example user does not have permission to write anything, or there is a lock on data, or user tries to update something what was deleted meanwhile, and so on.</p>\n\n<p>So I would like to return in such cases an error, so I could handle it with Kendo and display, let's say some alert dialog (JS <code>alert</code>).</p>\n\n<p>Now -- what would be the most well designed way, most correct, to do so? I am not looking for \"oh, well, it just works\" approach.</p>\n\n<p>Is throwing <code>HttpException</code> a good idea in such case (I have my issues with it, because it is <strong>http</strong> exception, and the error I try to pass has nothing to do with http really)?</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13112575,"title":"mvc3 - how can I keep a bool from being reset to false","body":"<p>I have a bool in a view model class. I have an if statement checking to see if the bool is true or false. If false I set the value to true and call a view. In the view I have button that when clicked updates and calls the view again. My problem is that the bool keeps being set to false when the view is loaded. I don't know why this is happening. Is there a way to stop the bool from being changed?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13111284,"title":"How can I post a list then access it in my controller?","body":"<p>I created a list property in my model like so</p>\n\n<pre><code>public virtual List&lt;String&gt; listOfDays { get; set; }\n</code></pre>\n\n<p>then I converted and stored it in the list like this:</p>\n\n<pre><code>for (int i = 0; i &lt; 30 i++)\n{\n            var enrollment = new Enrollment();\n            enrollment.StudentID = id;\n            enrollment.listOfDays = searchString.ToList(); \n            db.Enrollments.Add(enrollment);\n            db.SaveChanges();\n}\n</code></pre>\n\n<p>I put a breakpoint here... <code>enrollment.listOfDays = searchString.ToList();</code> ... and all is well.       I see that the conversion was performed and I can see the values in listOfDays.</p>\n\n<p>So I thought I would find a column in my database called listOfDays since I'm doing code first but the property is not there.</p>\n\n<p>Then I thought I'd try accessing it anyway like this...</p>\n\n<pre><code>var classdays = from e in db.Enrollments where e.StudentID == id select e.listOfDays;\n\nvar days = classdays.ToList(); \n//here I get an error message about this not being supported in Linq.\n</code></pre>\n\n<p>Questions: </p>\n\n<ul>\n<li>Why do you think the property was not in the database?</li>\n<li>How can I post this array to my model then access it in a controller?</li>\n</ul>\n\n<p>Thanks for any help.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","action-filter"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":199,"score":2,"question_id":11001286,"title":"How to Replace ~/ with Base Directory in MVC 3?","body":"<p>I like the new feature of MVC 4 where it replaces tilde paths (app relative) with the client url:</p>\n\n<p><strong>href=\"~/\"</strong> becomes <strong>href=\"/\"</strong> or <strong>href=\"/appDir/\"</strong></p>\n\n<p><strong>src=\"~/images/test.png\"</strong> becomes <strong>src=\"/images/test.png\"</strong> or <strong>src=\"/appDir/images/test.png\"</strong></p>\n\n<p>I'm pretty sure I could accomplish the same thing using ActionFilters, but I'm not sure how efficient it is? I've also always wondered what happens when the pattern you are searching for splits across buffers since you are typically overriding the Write method for the stream:</p>\n\n<pre><code>public override void Write(byte[] buffer, int offset, int count) {\n    // output transformations go here\n}\n</code></pre>\n\n<p>For example, if my pattern is:</p>\n\n<pre><code>((href)|(src)|(action))\\s*=\\s*\"~/\n</code></pre>\n\n<p>What happens if the buffer includes <strong>href</strong> in one buffer chunk, and <strong>=\"~/\"</strong> in the next?</p>\n\n<p>Does MVC4 handle this at compilation time or using something similar to above?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","linq-to-sql","visual-web-developer"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":70,"score":-1,"question_id":13110956,"title":"MVC C# Controller Method to DYNAMICALLY return any Table","body":"<p>I'm a real beginner with MVC and my issue is this, I have a mdf database with multiple tables and I want to have a method return \"ANY\" table from the database and pass it to a aspx view.  </p>\n\n<p>Examples of other tables in the database: Articles, Products, Supplies</p>\n\n<p>Here is an example of my code to view an Article Table from the database:</p>\n\n<pre><code>//USING LINQ-SQL CONTEXT DATABASE\npublic ActionResult ArticlePage()\n{\n    db_contextDataContext context = new db_contextDataContext();\n    try\n    {\n        return View(context.Articles);\n    }\n    catch\n    {\n        return Json(false, JsonRequestBehavior.AllowGet);\n    }\n}  \n</code></pre>\n\n<p>How would I modify this method to dynamically pass any table to the view? Or should I be using something else other than Linq-to-SQL</p>\n"},{"tags":[".net","database","asp.net-mvc-3","http-post"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13113192,"title":".NET MVC3 update database","body":"<p>By debugging I could see it updates  old entry with my new model entry. However it doesn't save changes, although I called the submit changes mehtod.</p>\n\n<pre><code>    public ActionResult EditGameDetails(artikel model){\n\n        artikel old = myShop.artikels.Single(m =&gt; m.artikelnummer == model.artikelnummer);\n        old = model;\n\n        myShop.SubmitChanges();\n        return RedirectToAction(\"Games\",\"Game\");\n    }\n</code></pre>\n\n<p>Have I forgotten any codes? Could anyone please help me? thanks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":13106702,"title":"list of checkbox “true,false” value MVC 3","body":"<p>I have in the view</p>\n\n<pre><code>@model IEnumerable&lt;RolesMVC3.Models.Estudent&gt;\n.\n.\n.\n    @for (var i = 0; i &lt; Model.Count(); i++)\n    { \n              &lt;tr&gt;\n                &lt;td&gt; @Html.CheckBox(\"CheckValue\")&lt;/td&gt;\n                &lt;td&gt; @Html.DisplayFor(m =&gt; m[i].CodeEstudent)  @Html.HiddenFor(m =&gt; m[i].IdEstudent)&lt;/td&gt;\n                &lt;td&gt;@Html.DisplayFor(m =&gt; m[i].NameEstudent)  @Html.DisplayFor(m =&gt; m[i].LastNameEstudent)&lt;/td&gt;\n            &lt;/tr&gt;     \n     }\n.\n.\n.\n</code></pre>\n\n<p>In the controller:</p>\n\n<pre><code>[HttpPost]\n    public ActionResult MyController(List&lt;ESTUDENT&gt; estudents, List&lt;bool&gt; CheckValue)\n    {\n\n        ///Actions\n    }\n</code></pre>\n\n<p>But, I reciveb two CheckBox for each student.</p>\n\n<p>e.g. I am sending 29 and receive 58 in the controller</p>\n\n<p>How do I associate a CheckBox with a student on this list and get in the controller?</p>\n"},{"tags":["ajax","json","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13112930,"title":"Return a JSON result after deleting an item","body":"<p>I'm developing a web application with MVC 3 and want to return a message to the user after he has deleted an item successfully.</p>\n\n<p>MyWallController method looks like this:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult DeleteAlbum(Guid albumId)\n{\n    try\n    {\n        this.albumService.DeleteAlbum(albumId);\n        return Json(new { success = true, msg = \"Album successfully deleted\" }, JsonRequestBehavior.AllowGet);\n    }\n    catch (FPSException e)\n    {\n        return Json(new { success = false, msg = e.Message });\n    }\n    catch (Exception)\n    {\n        throw new HttpException(500, \"Error while deleting album\");\n    }\n}\n</code></pre>\n\n<p>The link:</p>\n\n<pre><code>&lt;a class=\"open-DeleteAlbumDialog\" href=\"http://localhost:2941/MyWall/DeleteAlbum?albumId=0f49b1ad-8ec1-4fca-b8e2-28bdbf47824e\"&gt;Delete&lt;/a&gt;\n</code></pre>\n\n<p>The JavaScript:</p>\n\n<pre><code>$(function () {\n    $(document).on('click', '.open-DeleteAlbumDialog', function () {\n    var answer = confirm('Are you sure you want to delete this album?')\n    if (answer) {\n        $.post(this.href, function (data) {\n            if (data.success) {\n                // do something\n            } else {\n                // do something else\n            }\n        });\n    }\n    else return false;\n});\n</code></pre>\n\n<p>However the function defined inside post is never called and what I get is a \"the resource cannot be found\". But the item has been deleted successfully.</p>\n\n<p>All kinds of help is appreciated.</p>\n"},{"tags":["asp.net-mvc-3","orchardcms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13106444,"title":"Best / Easiest recommended approach for news feed vertical column menu in Orchard","body":"<p>i'm new to Orchard but very impressed with it. I've been trying to find an easy way to have a vertical column based menu in Orchard. Because there is a lot of features and options i'm reluctant to take the wrong approach. I'd like to go in the right direction on this one by asking the experts</p>\n\n<p>I just want an image (to the left) and short paragraph to the right. This repeating downwards just like many popular newspaper websites</p>\n\n<p>Exactly like what <a href=\"http://www.dailymail.co.uk/home/index.html\" rel=\"nofollow\">http://www.dailymail.co.uk/home/index.html</a> has at the right of the page...</p>\n\n<p>Many thanks for the advice, Kind REgards, J</p>\n"},{"tags":["asp.net-mvc-3","jquery-ajax","html.actionlink"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13112262,"title":"HTML.ActionLink redirect not stopping with return false in $.ajax()","body":"<p>i've a <code>HTML.ActionLink</code> on view. what i'm doing is i'm making call to <code>$.ajax()</code> function which checks for return true or false from an <code>anction</code>. it hitting the action, returning the desired result true/false. but the problem is when it returns false. i need to show an <code>alert</code> and redirect should be only in case if its return true..</p>\n\n<p><strong>ActionLink:</strong></p>\n\n<pre><code>&lt;%: Html.ActionLink(\"Add Race\", \"AddRace\",\n     new {eventId = Model.EventId, fleetId=Model.SelectedFleet.ID}, \n          new{onclick=\"return checkFleetAddedandScroing()\"}) %&gt;\n</code></pre>\n\n<p><strong>Function:</strong></p>\n\n<pre><code> function checkFleetAddedandScroing() {\n        debugger;\n        $.ajax({\n            type: \"GET\",\n            url: '&lt;%=Url.Action(\"CheckFleetExists\", new {eventId=Model.EventId})%&gt;',\n            dataType: \"json\",\n            cache: false,\n            success: function (data, textStatus) {\n                data = eval(\"(\" + data + \")\");\n                if (data == true) {\n                    alert('Ok button clicked');\n                    return true;\n                }\n                else {\n                    alert(\"Cannot delete this fleet becasue either you have already added races to this event or the fleet has used for boat registration.\");\n                    return false;\n                }\n            }, //success\n            error: function (req) {\n\n            }\n        });\n    }\n</code></pre>\n\n<p>it redirects always..whether it returns true/false..it should redirect only if it returns true....</p>\n\n<p>Please correct me where i'm doing wrong..</p>\n"},{"tags":["asp.net-mvc-3","razor","html-helper"],"answer_count":2,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":10121,"score":8,"question_id":6255138,"title":"How to specify ID for an Html.LabelFor<> (MVC Razor)","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3065307/client-id-for-property-asp-net-mvc\">Client Id for Property (ASP.Net MVC)</a>  </p>\n</blockquote>\n\n\n\n<p>Is there a way to make Razor render an ID attribute for a Label element when using the Html.LabelFor&lt;> helper?</p>\n\n<p>Example:</p>\n\n<pre><code>.cshtml page\n@using (Html.BeginForm())\n{\n@Html.LabelFor(m =&gt; m.Foo)\n@Html.TextBoxFor(m =&gt; m.Foo)\n}\n</code></pre>\n\n<p>Rendered page</p>\n\n<pre><code>&lt;form ...&gt;\n&lt;label for=\"Foo\" id=\"Label_Foo\" /&gt;\n&lt;input type=\"text\" name=\"Foo\" id=\"Foo\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>FYI - The sole reason I'm wanting to add an ID to the Label is for CSS design. I'd prefer to reference the Label by an ID rather than wrapping the Label within a block (i.e. div) and then styling the block.</p>\n"}]}
{"total":29155,"page":7,"pagesize":100,"questions":[{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1576,"score":2,"question_id":8284207,"title":"ASP.NET MVC implement custom validator use IClientValidatable","body":"<p>I ask similar question <a href=\"http://stackoverflow.com/questions/8278883/asp-net-mvc-run-custom-validators-in-client-side/8280323#8280323\">here</a> but in this question I use another implementation, exactly <a href=\"http://stackoverflow.com/questions/7025198/mvc3-custom-validation-compare-two-dates\">this way</a> the following codes show my implementations:</p>\n\n<p><strong>Model:</strong></p>\n\n<pre><code>public class Department {\n\n    public long Id { get; set; }\n\n    [IsDateAfter(\"Date2\", true, ErrorMessage = \"O My\")]\n    public DateTime Date1 { get; set; }\n    public DateTime Date2 { get; set; }\n    public string Name1 { get; set; }\n    public string Name2 { get; set; }\n\n}\n</code></pre>\n\n<p><strong>Custom Validator:</strong></p>\n\n<pre><code>public sealed class IsDateAfter : ValidationAttribute, IClientValidatable {\n\n    private readonly string testedPropertyName;\n    private readonly bool allowEqualDates;\n\n    public IsDateAfter(string testedPropertyName, bool allowEqualDates = false)\n  {\n        this.testedPropertyName = testedPropertyName;\n        this.allowEqualDates = allowEqualDates;\n    }\n\n    protected override ValidationResult IsValid(object value, ValidationContext\n validationContext) {\n        var propertyTestedInfo = \nvalidationContext.ObjectType.GetProperty(this.testedPropertyName);\n        if (propertyTestedInfo == null) {\n            return new ValidationResult(string.Format(\"unknown property\n {0}\", this.testedPropertyName));\n        }\n\n        var propertyTestedValue =\n propertyTestedInfo.GetValue(validationContext.ObjectInstance, null);\n\n        if (value == null || !(value is DateTime)) {\n            return ValidationResult.Success;\n        }\n\n        if (propertyTestedValue == null || !(propertyTestedValue is\n DateTime)) {\n            return ValidationResult.Success;\n        }\n\n        // Compare values\n        if ((DateTime)value &gt;= (DateTime)propertyTestedValue) {\n            if (this.allowEqualDates) {\n                return ValidationResult.Success;\n            }\n            if ((DateTime)value &gt; (DateTime)propertyTestedValue) {\n                return ValidationResult.Success;\n            }\n        }\n\n        return new\n ValidationResult(FormatErrorMessage(validationContext.DisplayName));\n    }\n\n    public IEnumerable&lt;ModelClientValidationRule&gt; \nGetClientValidationRules(ModelMetadata metadata, ControllerContext context) {\n        var rule = new ModelClientValidationRule {\n            ErrorMessage = this.ErrorMessageString,\n            ValidationType = \"isdateafter\"\n        };\n        rule.ValidationParameters[\"propertytested\"] =\n this.testedPropertyName;\n        rule.ValidationParameters[\"allowequaldates\"] =\n this.allowEqualDates;\n        yield return rule;\n    }\n}\n</code></pre>\n\n<p><strong>Script:</strong></p>\n\n<pre><code>$.validator.unobtrusive.adapters.add(\n'isdateafter', ['propertytested', 'allowequaldates'], function (options) {\n    options.rules['isdateafter'] = options.params;\n    options.messages['isdateafter'] = options.message;\n});\n$.validator.addMethod(\"isdateafter\", function (value, element, params) {\nalert(params.propertytested);\nvar startdatevalue = $('input[name=\"' + params.propertytested + '\"]').val();\nif (!value || !startdatevalue) return true;\nreturn (params.allowequaldates) ? Date.parse(startdatevalue) &lt;= Date.parse(value) :\n Date.parse(startdatevalue) &lt; Date.parse(value);\n}, '');\n</code></pre>\n\n<p><strong>And My _Layout page (Master page)</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;@ViewBag.Title&lt;/title&gt;\n&lt;link href=\"@Url.Content(\"~/Content/Site.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.5.1.min.js\")\" type=\"text/javascript\"&gt;\n &lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftAjax.js\")\" type=\"text/javascript\"&gt;\n &lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftMvcAjax.js\")\" type=\"text/javascript\"&gt;\n &lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftMvcValidation.js\")\" \n type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" \n type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.js\")\" type=\"text/javascript\"&gt;\n &lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jQuery.IsDateAfter.js\")\" \n type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div class=\"page\"&gt;\n    &lt;div id=\"header\"&gt;\n        &lt;div id=\"title\"&gt;\n            &lt;h1&gt;\n                My MVC Application&lt;/h1&gt;\n        &lt;/div&gt;\n        &lt;div id=\"logindisplay\"&gt;\n            @Html.Partial(\"_LogOnPartial\")\n        &lt;/div&gt;\n        &lt;div id=\"menucontainer\"&gt;\n            &lt;ul id=\"menu\"&gt;\n        &lt;li&gt;@Html.ActionLink(\"Departments\", \"Index\", \"Department\")&lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div id=\"main\"&gt;\n        @RenderBody()\n    &lt;/div&gt;\n    &lt;div id=\"footer\"&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>of course in Edit And Create View pages the other script source are as following:</p>\n\n<pre><code>&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;\n&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\"\ntype=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p><strong>A part of Create Page Dom:</strong></p>\n\n<pre><code>&lt;fieldset&gt;\n&lt;legend&gt;Department&lt;/legend&gt;\n&lt;div class=\"editor-label\"&gt;\n&lt;label for=\"Date1\"&gt;Date1&lt;/label&gt;\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n&lt;input id=\"Date1\" class=\"text-box single-line valid\" type=\"text\" value=\"\" name=\"Date1\"\n data-val-required=\"The Date1 field is required.\" data-val-isdateafter-\n propertytested=\"Date2\" data-val-isdateafter-allowequaldates=\"False\" data-val-\nisdateafter=\"O My\" data-val=\"true\"&gt;\n&lt;span class=\"field-validation-valid\" data-valmsg-replace=\"true\" data-valmsg-\n  for=\"Date1\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;div class=\"editor-label\"&gt;\n&lt;label for=\"Date2\"&gt;Date2&lt;/label&gt;\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n&lt;input id=\"Date2\" class=\"text-box single-line valid\" type=\"text\" value=\"\" name=\"Date2\"\n data-val-required=\"The Date2 field is required.\" data-val=\"true\"&gt;\n&lt;span class=\"field-validation-valid\" data-valmsg-replace=\"true\" data-valmsg-\nfor=\"Date2\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I try All of implementation be the same as <a href=\"http://stackoverflow.com/questions/7025198/mvc3-custom-validation-compare-two-dates\">here</a> but that not work in client side and need to postback, I don't have any other implementation for example register in global.asax \nlike <a href=\"http://stackoverflow.com/questions/8278883/asp-net-mvc-run-custom-validators-in-client-side/8280323#8280323\">this</a>, Does any one know about it? I really confused, I tried 2 way but none of them give the true answer.</p>\n\n<p><strong>Edit: Find answer and another Question:</strong></p>\n\n<p>I don't know why but when I add source of my script to _Layout page that not work, but when added in Create or Edit View pages that work, does any one know about it? </p>\n"},{"tags":[".net","asp.net-mvc","asp.net-mvc-3","orchardcms"],"answer_count":2,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":3196,"score":6,"question_id":6404330,"title":"How to deploy an Orchard CMS site, including all settings and content from development environment?","body":"<p>I've been trying to build and deploy a website running on Orchard CMS. I've previously donwloaded Orchard, set up a development environment, made a few modifications to the source, added and modified a theme, added som content and so forth. I've been using the SQL CE as database. Now I want to build and deploy the complete website. I've built a deployment package by running the build script, as described <a href=\"http://www.orchardproject.net/docs/Building-and-deploying-Orchard-from-a-source-code-drop.ashx\">here</a>. It's easy to simply ftp the built package to the hosting server. However, when visiting the site I now get the install a new site procedure. Apparently, the cms settings and content from my development environment have not been reflected in the deployment package. Thus, I need to copy all the content and re-do all the settings, including creating all widgets etc. again. </p>\n\n<p>Do anyone have any good idea on how to publish an Orchard site from a development to a production environment, including the cms settings, widget setings, content, etc? All guides I've found on the web describe how to use WebMatrix to deploy an Orchard site to shared hosting or Azure, but all of those guides end up with having a clean Orchard installation. What I would like to achive is to develop the site locally, and then push the entire site to the hosting server.</p>\n"},{"tags":["c#","asp.net","sql-server","visual-studio-2010","asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":204,"score":1,"question_id":7776437,"title":"Visual Studio 2010 SQL Developement Server stopped working","body":"<p>I was making minor modifications to a view in my ASP.NET MVC3 C# appication when all of a sudden the application would no longer run.  The error message is as follows:  </p>\n\n<p>System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Shared Memory Provider, error: 40 - Could not open a connection to SQL Server)</p>\n\n<p>Upon close inspection of the server explorer I noticed that all database connections are no longer working.  I cannot expand any of the connections to view the tables and data I previously generated within.  When I attempt to, there is a pop-up window that is generated that repeats the exact same error as above.  </p>\n\n<p>It is important to note that I was not making any modifications to any portion of the aplication that pertains to a database.  I was rearangeing some of the visual components of a view in my application when all of this occurred.  I had just recently restarted my computer and had made no other modificatins since that time.  </p>\n\n<p>At first I thought that somehow SQL Express had overwritten my developement envirnments verson of sql server and began to reinstall sql express.  The installation fails every time now.  There is no specific error.  Windows generates an error message saying that the setup application \"stoped working\" and hangs until closed.  I have tried several different versions of the sql express installation package and they all result in the same error happeneing at different points in the installation process.  To be clear, I'm not even sure sql express is the problem.  I don't know why it would be since I'm using the sql server that is built into visual studio 2010.  </p>\n\n<p>I am at an impass and cannot continue with my work until this is resolved.  If I can't resolve it I don't get to continue to work so any input you can give me will be greatly appreciated.  I won't be sleeping until I can get this working again.</p>\n\n<p>D.A.P.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","mvc"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1395,"score":1,"question_id":8495706,"title":"MVC Html.ActionLink with post funtionality?","body":"<p>I'm checking to see if anyone has written an MVC extension for Html.ActionLink that you can pass in Post parameters like such:</p>\n\n<pre><code>&lt;% Html.ActionLink(\"Click me\", \"Index\", \"Home\", new { MyRouteValue = \"123\" }, null, new { postParam1 = \"a\", postParam2 = \"b\" }); %&gt;\n</code></pre>\n\n<p>That would render the link like normal but having an onClick event that submits an also rendered form with an Action url for the Action, Controller, and Route Values with additional hidden inputs from the Post Parameters like such:</p>\n\n<pre><code>&lt;a href=\"#\" onClick=\"$('#theform').submit(); return false;\"&gt;Click me&lt;/a&gt;\n&lt;form id=\"theform\" action=\"/Home/Index/123\" method=\"post\"&gt;\n   &lt;input type=\"hidden\" name=\"postParam1\" value=\"a\"&gt;\n   &lt;input type=\"hidden\" name=\"postParam2\" value=\"b\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>I'm looking to redirect users to various pages with potentially a lot of data. Not only from page to page, but from email to page also. This would be highly reusable and I think would clean up a lot of code, and would save a bunch of time writing this if its already floating around out there. I hate recreating the wheel when I don't have to. Thanks!</p>\n"},{"tags":["asp.net-mvc-3","twitter-bootstrap"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":697,"score":2,"question_id":9627630,"title":"How can i use the bootstrap dropdowns and alerts instead of the @Html.DropDownList & alert for my asp.net MVC","body":"<p>i have the following view that contains an <strong>@Html.DropDownList</strong> :-</p>\n\n<pre><code>&lt;fieldset&gt; \n        &lt;legend&gt;Answer here&lt;/legend&gt; \n        &lt;div class=\"editor-label\"&gt; \n            @Html.LabelFor(model =&gt; model.Description) \n        &lt;/div&gt; \n        &lt;div class=\"editor-field\" data-toggle=\"dropdown\"&gt; \n            @Html.EditorFor(model =&gt; model.Description) \n            @Html.ValidationMessageFor(model =&gt; model.Description) \n        &lt;/div&gt; \n        &lt;div class=\"editor-label\"&gt; \n            @Html.LabelFor(model =&gt; model.IsRight) \n        &lt;/div&gt; \n        &lt;div class=\"editor-field\"&gt; \n             @Html.DropDownList(\"IsRight\", String.Empty) \n            @Html.ValidationMessageFor(model =&gt; model.IsRight) \n        &lt;/div&gt;  \n    &lt;/fieldset&gt; \n</code></pre>\n\n<p>and the following Java Script that display a simple <strong>alert message</strong>:-</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    function removePartial2() {z\n        alert('Deletion was successful'); \n        $(this).remove();\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>i have downloaded the associated script files (bootstrap-dropdown.js &amp; bootstrap-alert.js) from bootstrap website, <strong>but i do not know how i can modify the above code to be able to use both the bootstrap dropdown and bootstrap alerts messages inside my asp.net MVC.?</strong>\nBR</p>\n"},{"tags":["asp.net-mvc-3","charts","jqplot"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":348,"score":0,"question_id":9594246,"title":"Passing MVC3 Json encoded data to ViewBag to be read and plot in jqplot","body":"<p>In 1 of my page I have 2 tabs, 1 that present data in a grid and 1 that shows a graph base on the data. My model contains the list of the object to be presented in the grid, the data for the graph is stored in a ViewBag. But how do I create a chart using Jqplot?</p>\n\n<p>I have something like this in my code:</p>\n\n<pre><code> var arr1 = new object[1];\n                    var arr2 = new object[dataModel.Count()];\n                    var ctr = 0;\n                    foreach (var dm in dataModel)\n                    {\n                        arr2[ctr++] = new object[] { dm.SkuModel, dm.Qty };\n                    }\n                    arr1[0] = arr2;\n\n                    ViewBag.ChartData = Json(arr1);\n\nfunction drawChart() {\n        $.jqplot.config.enablePlugins = true;\n        //$.parseJSON(\"{{{'Verwerkende FruedenStunde Companaziert Eine industrie', 9}, {'Retail', 8}, {'Primaire producent', 7}, {'Out of home', 6}, {'Groothandel', 5}, {'Grondstof', 4}, {'Consument', 3}, {'Bewerkende industrie', 2}}}\");\n        var chartData = $.parseJSON(\"@ViewBag.ChartData\");\n        var chartData = eval(\"@ViewBag.ChartData\");\n        plotgraph = $.jqplot('jqplot',\n            [[['Verwerkende FruedenStunde Companaziert Eine industrie', 9], ['Retail', 8], ['Primaire producent', 7], ['Out of home', 6], ['Groothandel', 5], ['Grondstof', 4], ['Consument', 3], ['Bewerkende industrie', 2]]],\n        //chartData,\n            {\n            title: ' ',\n            seriesDefaults: {\n                shadow: true,\n                renderer: $.jqplot.PieRenderer,\n                rendererOptions: { padding: 2, sliceMargin: 2, showDataLabels: true }\n            },\n            legend: { show: true, location: 'e' }\n        });\n    }\n</code></pre>\n\n<p>I've already tried several ways to read back the Json array into javascript object but I can't make it work.</p>\n\n<p>Thanks,\n<br />czetsuya</p>\n"},{"tags":["asp.net-mvc-3","filecontentresult"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":428,"score":0,"question_id":7398028,"title":"Html.RenderAction with FileContentResult","body":"<p>With MVC3, I have a controller that returns a FileContentResult, which is a JPEG. I can call this and it displays the JPEG perfectly in the browser.\nI would like to display this multiple times on the page and the only reasonable way I can think of is using calling Html.RenderAction() multiple times within a view. This works for action methods that return ViewResult but not for this one that returns FileContentResult.</p>\n\n<p>Error is\nCompiler Error Message: CS1502: The best overloaded method match for 'System.Web.WebPages.WebPageExecutingBase.Write(System.Web.WebPages.HelperResult)' has some invalid arguments</p>\n\n<p>What am I doing wrong?</p>\n\n<p>Many thanks</p>\n"},{"tags":["asp.net-mvc-3","autocomplete","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1246,"score":3,"question_id":7845851,"title":"How to add data-autocomplete HTML attribute to TextBoxFor HTML helper?","body":"<p>autocomplete text box for getting city autocomplete textbox.</p>\n\n<p>My code look like this,</p>\n\n<pre><code>&lt;input id=\"location\" type=\"text\" name=\"q\" \ndata-autocomplete=\"@Url.Action(\"locationSearch\", \"Home\", \n                       new { text = \"location\" })\"/&gt;\n</code></pre>\n\n<p>Now i want to convert this to razor syntex. I tried this but not working.</p>\n\n<pre><code>@Html.TextBoxFor(model =&gt; model.Location, \n   new { data-autocomplete = Url.Action(\"locationSearch\", \"Home\")})\n</code></pre>\n\n<p>How can i solve this??</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13110978,"title":"play music while slideshow display in mvc","body":"<p>I want to know how can I play in background sound from mp3 file while displaying image slideshow in mvc3. \nCan someone give some example please? \nAlso, as second part of the question if someone has an idea, if there are 3 images and there are 3 minutes music, I want the images to be changed every minute, if its possible.</p>\n\n<p>Thanks in advance, Laziale</p>\n"},{"tags":["asp.net-mvc-3","html5","xmlhttprequest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":197,"score":1,"question_id":8473173,"title":"How to provide Cancel option in html5 multi file upload","body":"<p>I am devlopening html5 multi file upload where i want to provide cancel option...\nbut if i call abort event it will abort all the file upload not which i want...\neg. i have file browse button which are calling same controller..on click of cancel option only particular browse button uploading file shoul stop not all the uploading file...</p>\n\n<p>xhr.addEventListener(\"abort\", uploadCanceled, false);</p>\n"},{"tags":["c#","asp.net-mvc-3","azure","azure-cache"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":13066764,"title":"Azure Session Cache Error","body":"<p>I've started getting an Azure Cache Error thrown repeatedly. It appears to be to do with expired sessions. This is a random sample - it happens for static files. </p>\n\n<pre>\nEvent code: 3005 \nEvent message: An unhandled exception has occurred. \nEvent time: 10/25/2012 9:49:15 AM \nEvent time (UTC): 10/25/2012 9:49:15 AM \nEvent ID: 004e617f16854e59b7a857ca542ae9fc \nEvent sequence: 86004 \nEvent occurrence: 720 \nEvent detail code: 0 \n\nApplication information: \n    Application domain: /LM/W3SVC/1273337584/ROOT-1-129955415508042441 \n    Trust level: Full \n    Application Virtual Path: / \n    Application Path: E:\\sitesroot\\0\\ \n    Machine name: RD00155D36A377 \n\nProcess information: \n    Process ID: 3332 \n    Process name: w3wp.exe \n    Account name: NT AUTHORITY\\NETWORK SERVICE \n\nException information: \n    Exception type: DataCacheException \n    Exception message: ErrorCode:SubStatus:Key referred to does not exist. Create objects based on a Key to fix the error.\n   at Microsoft.ApplicationServer.Caching.DataCache.ThrowException(ResponseBody respBody)\n   at Microsoft.ApplicationServer.Caching.DataCache.ExecuteAPI(RequestBody reqMsg, IMonitoringListener listener)\n   at Microsoft.ApplicationServer.Caching.DataCache.InternalResetObjectTimeout(String key, TimeSpan newTimeout, String region, IMonitoringListener listener)\n   at Microsoft.ApplicationServer.Caching.DataCache.c__DisplayClass68.b__67()\n   at Microsoft.ApplicationServer.Caching.DataCache.ResetObjectTimeout(String key, TimeSpan newTimeout)\n   at Microsoft.Web.DistributedCache.DataCacheRetryWrapper.PerformCacheOperation(Action action)\n   at Microsoft.Web.DistributedCache.DataCacheForwarderBase.ResetObjectTimeout(String key, TimeSpan newTimeout)\n   at System.Web.SessionState.SessionStateModule.BeginAcquireState(Object source, EventArgs e, AsyncCallback cb, Object extraData)\n   at System.Web.HttpApplication.AsyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()\n   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)\n\n\n\nRequest information: \n    Request URL: http://www.beko.co.uk/Scripts/jquery.nivo.slider.pack.js \n    Request path: /Scripts/jquery.nivo.slider.pack.js \n    User host address: 80.2.72.81 \n    User:  \n    Is authenticated: False \n    Authentication Type:  \n    Thread account name: NT AUTHORITY\\NETWORK SERVICE \n\nThread information: \n    Thread ID: 11 \n    Thread account name: NT AUTHORITY\\NETWORK SERVICE \n    Is impersonating: False \n    Stack trace:    at Microsoft.ApplicationServer.Caching.DataCache.ThrowException(ResponseBody respBody)\n   at Microsoft.ApplicationServer.Caching.DataCache.ExecuteAPI(RequestBody reqMsg, IMonitoringListener listener)\n   at Microsoft.ApplicationServer.Caching.DataCache.InternalResetObjectTimeout(String key, TimeSpan newTimeout, String region, IMonitoringListener listener)\n   at Microsoft.ApplicationServer.Caching.DataCache.c__DisplayClass68.b__67()\n   at Microsoft.ApplicationServer.Caching.DataCache.ResetObjectTimeout(String key, TimeSpan newTimeout)\n   at Microsoft.Web.DistributedCache.DataCacheRetryWrapper.PerformCacheOperation(Action action)\n   at Microsoft.Web.DistributedCache.DataCacheForwarderBase.ResetObjectTimeout(String key, TimeSpan newTimeout)\n   at System.Web.SessionState.SessionStateModule.BeginAcquireState(Object source, EventArgs e, AsyncCallback cb, Object extraData)\n   at System.Web.HttpApplication.AsyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()\n   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)\n\n</pre>\n\n<p>There is no code around this, it is configured in web.config</p>\n\n<pre><code>&lt;dataCacheClients&gt;\n  &lt;dataCacheClient name=\"default\"&gt;\n    &lt;hosts&gt;\n      &lt;host name=\"[mycachename]\" cachePort=\"22233\" /&gt;\n    &lt;/hosts&gt;\n    &lt;securityProperties mode=\"Message\"&gt;\n      &lt;messageSecurity authorizationInfo=\"[mykey]\"&gt;&lt;/messageSecurity&gt;\n    &lt;/securityProperties&gt;\n  &lt;/dataCacheClient&gt;\n  &lt;dataCacheClient name=\"SslEndpoint\"&gt;\n    &lt;hosts&gt;\n      &lt;host name=\"[mycachename]\" cachePort=\"22243\" /&gt;\n    &lt;/hosts&gt;\n    &lt;securityProperties mode=\"Message\" sslEnabled=\"true\"&gt;\n      &lt;messageSecurity authorizationInfo=\"[mykey]\"&gt;&lt;/messageSecurity&gt;\n    &lt;/securityProperties&gt;\n  &lt;/dataCacheClient&gt;\n&lt;/dataCacheClients&gt;\n</code></pre>\n\n<p>Edit: session state is configure as follows:</p>\n\n<pre><code>&lt;sessionState mode=\"Custom\" customProvider=\"AppFabricCacheSessionStoreProvider\"&gt;\n  &lt;providers&gt;\n    &lt;add name=\"AppFabricCacheSessionStoreProvider\" type=\"Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider, Microsoft.Web.DistributedCache\" cacheName=\"default\" useBlobMode=\"true\" dataCacheClientName=\"default\" /&gt;\n  &lt;/providers&gt;\n&lt;/sessionState&gt;\n</code></pre>\n\n<p>I'm trying to understand if there is\na) Anything I can do to fix this in config\nb) Which DLL's are involved, and what is the latest version, (so I can see if updating helps)\nc) If anyone else is seeing this.</p>\n\n<p>It started after I did quite a few application updates, and also updated the cache size in Azure. Not sure therefore what the cause was. I wouldn't have thought code changes were responsible, but its possible we have updated some DLL as one of the PC's we have used in the dev processes was newly built.</p>\n"},{"tags":["asp.net-mvc-3","partial-views","html-helper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13109838,"title":"HTML-Helper function that can render a Partial-View","body":"<p>Is it possible to create a HTML.Helper function that renders a Partial View?</p>\n\n<p>In my project, this would allow me to create a Helper for showing information messages (or error messages). This function would (for example) receive the message itself and would render a partial view with the html for showing that message.\n  I know i could just put the html together inside the helper function itself (without using a partial view) but in that case, for changing the looks of the messages shown i would have to mess with code, and not just a partial view file.</p>\n\n<p>Can anyone help me with that one?</p>\n\n<p>Thanks in advance,\nMarcelo Myara\nRio de Janeiro-Brazil</p>\n"},{"tags":["c#","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13108702,"title":"Create local login after openAuth registration","body":"<p>I have created an MVC4 application and have implemented OpenAuth Login. When a user decides to log in/ register with an external account. e.g. Google the user is taken to the Google login. Upon successful login the application asks the user to register the returned email.</p>\n\n<p>Now when I try to login with the email address locally it fails. Is there a way that when the user logs in successfully with Google then the application also creates a local user account?</p>\n"},{"tags":["asp.net-mvc-3","pdf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13096623,"title":"Return PDF from server","body":"<p>My situation is as follows:</p>\n\n<p>I am reading and returning a PDF file from the server, which is then displayed within an <code>iframe</code>. The following code works fine with IE. However, when I access the site via Chrome, I get all junk characters.</p>\n\n<pre><code>while ((byteCount = inStr.Read(buffer, 0, buffer.Length)) &gt; 0)\n{\n    if (HttpContext.Response.IsClientConnected)\n    {\n            HttpContext.Response.BufferOutput = true;\n            HttpContext.Response.ContentType = \"application/pdf\";                      \n            HttpContext.Response.OutputStream.Write(buffer, 0, buffer.Length);\n            //HttpContext.Response.Flush();\n    }\n}\n</code></pre>\n\n<p>When I flush the response, I do get to see the PDF correctly. The problem is that calling flush is resulting in <code>\"Server cannot set status after HTTP headers have been sent\"</code> warning on the server.</p>\n\n<p>Question is: Why is flush needed for Chrome and if there is a way to avoid flush? So far, I have read all the posts and unable to resolve the server error associated with flushing.</p>\n\n<p>Server - IIS7, Windows Server 2008 R2</p>\n\n<p>App - ASP.Net 4.0.30319.0, C#, Ajax</p>\n"},{"tags":["jquery","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":214,"score":0,"question_id":6628012,"title":"jQuery Ready code not executing","body":"<p>I have the following code in my <code>_Layout.cshtml</code>, targeted at a view once removed, through a layout nested one level below <code>_Layout.cshtml</code>.  </p>\n\n<pre><code>&lt;title&gt;@ViewBag.PageTitle&lt;/title&gt;\n&lt;link rel=\"icon\" type=\"image/png\" href=\"@Url.Content(\"~/Images/favicon.png\")\" /&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"@Url.Content(\"~/Content/Blueprint/screen.css\")\" media=\"screen, projection\" /&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"@Url.Content(\"~/Content/Blueprint/print.css\")\" media=\"print\" /&gt;\n@Html.Telerik().StyleSheetRegistrar().DefaultGroup(group =&gt; group.Add(\"telerik.common.css\").Add(\"telerik.simple.css\"))\n@RenderSection(\"MainBodyStyling\", false)\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.4.4.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        debugger;\n        //$(\"iframe\").width($(\"iframe\").contents().find(\"table\").width());\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>I cannot get the jQuery code to execute, in Chrome or Firefox 5.0, even just the debugger call.  This is with jQuery 1.4.4, inside an MVC3 project.  The code works when I paste it into both Firebug and Chrome JS consoles, so I know the code itself is not at fault.  </p>\n\n<p><strong>CORRECTION:</strong>  I added the erroneous document with quotes as a last ditch attempt.  I had tried my default (I'm quite used to working with jQuery), <code>$(function () {</code> syntax, with no difference.  The real problem is not my syntax, but correct code not executing.  I have removed the quotes with no difference at all.</p>\n\n<p><strong>ADDENDUM:</strong>  If I put a breakpoint on the <code>debugger</code> line, the code stops at the breakpoint in the Chrome console.  I have no idea what this is about.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1320,"score":1,"question_id":4869583,"title":"ASP.NET MVC Form loaded via ajax submits multiple times","body":"<p>I have a partial view containing an ajax form. This partial view is loaded onto my page via an ajax call. I can edit the fields and submit the form and everything works normally. However, if I reload the form N times, the form will submit N times when the save button is clicked.</p>\n\n<p>here is the code for the partial view....</p>\n\n<pre><code>@model blah blah...\n\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.4.4.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-ui.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.unobtrusive-ajax.min.js\")\"type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\"type=\"text/javascript\"&gt;&lt;/script&gt;\n\n&lt;div id=\"modalForm\"&gt;\n  @using (Ajax.BeginForm(\"Edit\", \"Info\", new{id = Model.UserId}, AjaxOptions{OnSuccess = \"infoUpdate\" }))\n  {\n\n\n       //FORM FIELDS GO HERE\n\n      &lt;input type=\"submit\" value=\"Save\" /&gt;\n\n\n  }\n&lt;/div&gt;\n</code></pre>\n\n<p>What am I doing wrong that is causing this behavior?</p>\n"},{"tags":["asp.net-mvc-3","model"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13107049,"title":"Error when using class of models instead of using Tuple","body":"<p>I have parent class of my models:</p>\n\n<pre><code>public class MyModel\n{\n    public ThemesModel themesModel { get; set; }\n    public ThemeGroupsModel themesGroupsModel { get; set; }\n    public ThemeTypsModel themesTypesModel { get; set; }\n} \n</code></pre>\n\n<p>I use it in my method:</p>\n\n<pre><code>public List&lt;MyModel&gt; getAllTheme()\n{\n    List&lt;MyModel&gt; myModelList = new List&lt;MyModel&gt;();\n    MyModel myModelTemp;\n    using (var context = new EShopThemeDBEntities(idbconnection.ConnStr))\n    {\n        var ThemeTypeQ = (//some queries... ).ToList();\n\n        if (ThemeTypeQ != null)\n        {\n             foreach (var item in ThemeTypeQ)\n             {\n                   myModelTemp = new MyModel();\n                   myModelTemp.themesTypesModel.ThemeTypeName = item.ThemeTypeName;\n                      .\n                      .\n                      .\n             } \n        } \n    }\n\n    return myModelList;   \n }\n</code></pre>\n\n<p>I get error on this line:</p>\n\n<blockquote>\n  <p>myModelTemp.themesTypesModel.ThemeTypeName = item.ThemeTypeName;</p>\n</blockquote>\n\n<p>error:</p>\n\n<blockquote>\n  <p>Object reference not set to an instance of an object.</p>\n</blockquote>\n\n<p>I had used <code>Tuple&lt;ThemeTypsModel, ThemesModel, ThemeGroupsModel&gt;</code> instead of using <code>MyModel</code> and my project had worked before.</p>\n\n<p>What should I do to solve it?         </p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12886599,"title":"How can I use my ElementAt() method to access an indexed item?","body":"<p>I’m trying to use the ElementAt() method to access items in a loop.  In my view I have two models that I’m working with:    </p>\n\n<pre><code>   List&lt;SchoolIn.ViewModels.EnrolledCourseData&gt; courses = ViewBag.Courses;        List&lt;SchoolIn.Models.Enrollment&gt; dayofclass = ViewBag.classDay;\n</code></pre>\n\n<p>Then in a foreach loop I have this:</p>\n\n<pre><code> foreach (var course in courses.Select ((x,i)=&gt;new{Data=x,Index=i}))\n  {\n\n     @course.Data.Title \n     if (course.Index &lt; dayofclass.Count())\n      { \n\n                @dayofclass.ElementAt(course.Index).classDays\n\n      }\n\n      if (Model.Enrollments != null)\n      {\n\n       @Html.DropDownList(\"searchString\", Model.WeekDays.Select(s =&gt; new SelectListItem { Text = s.ToString(), Value = s.ToString() })) \n       @Html.DropDownList(\"searchString\", Model.Enrollments.FirstOrDefault().WeekDays.Select(s =&gt; new SelectListItem { Text = s.ToString(), Value = s.ToString(), Selected = s.ToString().Equals(dayofclass.ElementAt(course.Index).classDays) })) \n\n\n      }\n\n\n }\n</code></pre>\n\n<p>This line works as expected.  It prints the string at this index of the classDays model: \n     @dayofclass.ElementAt(course.Index).classDays</p>\n\n<p>What I want is to put this same string in dropdown list using the ElementAt() method.  Here’s the part of the code that throws ArgumentOutOfRange exception:</p>\n\n<p>Equals(dayofclass.ElementAt(course.Index).classDays</p>\n\n<p>If I hard code like this… Equals(dayofclass.ElementAt(4).classDays… it works so I’m thinking there must be some way to get at elements in my classDays.  Any ideas?  </p>\n\n<p>Thanks for any help with this one. </p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13106537,"title":"MVC3 : HTTPPOST Controller db.SaveChanges() Fails with \"Invalid Column Name..\"","body":"<p>I have a create view for invoices that is failing on db.SaveChanges() on the HTTPPOST.  The exception message is {\"Invalid column name 'UserDetail_UserId'.\"}.  In the POST controller it looks like the invoiceitem object I'm trying to add to my InvoiceItems table is populated correctly with the selected username from a dropdownlistfor that gets populated by usernames from my UserDetails table.  \"UserId\" is the key column in the UserDetails table, but it's not used in the dropdownlist so I'm unclear why any data is trying to be saved to a \"UserDetail_UserId\" column.  My code below:</p>\n\n<p><strong>Models:</strong></p>\n\n<pre><code>public class InvoiceItem\n{\n    //Identity Column\n    public int ServiceID { get; set; }\n\n    [Key]\n    public string ProfileUserName { get; set; }\n\n    public DateTime InvoiceDate { get; set; }\n    public string Address { get; set; }\n    public string Note { get; set; }\n    public decimal Price { get; set; }\n    public decimal SubTotal { get; set; }\n    public bool InvoicePaid { get; set; }\n}\n\npublic class UserDetail\n{\n    [Key]\n    public Guid UserId { get; set; }\n    public string ProfileUserName { get; set; }\n    public string FirstName { get; set; }\n    public string LastName { get; set; }\n    public string FullName { get; set; }\n    public string Address { get; set; }\n    public string City { get; set; }\n    public string State { get; set; }\n    public string Zip { get; set; }\n    public string Phone { get; set; }\n    public DateTime DateUpdated { get; set; }\n    public virtual ICollection&lt;InvoiceItem&gt; InvoiceItems { get; set; }\n}\n\npublic class ProShotDB : DbContext\n{\n    public DbSet&lt;UserDetail&gt; UserDetails { get; set; }\n    public DbSet&lt;UserLinkToken&gt; UserLinkTokens { get; set; }\n    public DbSet&lt;InvoiceItem&gt; InvoiceItems { get; set; }\n}\n</code></pre>\n\n<p><strong>Controllers:</strong></p>\n\n<pre><code>public ActionResult Create()\n    {\n        ViewBag.ProfileUserNames = db.UserDetails.Select(\n        c =&gt; new\n        {\n            ProfileUserName = c.ProfileUserName,\n            NameAddress = c.FullName + \" - \" + c.Address\n        });\n        return View();\n    }\n\n    [HttpPost]\n    public ActionResult Create(InvoiceItem invoiceitem)\n    {\n        decimal Tax = 1.066m;\n        if (ModelState.IsValid)\n        {\n            invoiceitem.InvoiceDate = DateTime.Now;\n            invoiceitem.SubTotal = invoiceitem.Price*Tax;\n            invoiceitem.InvoicePaid = false;\n\n            db.InvoiceItems.Add(invoiceitem);\n            db.SaveChanges();\n            return RedirectToAction(\"Index\");\n        }\n\n        ViewBag.ProfileUserNames = db.UserDetails.Select(\n        c =&gt; new\n        {\n            ProfileUserName = c.ProfileUserName,\n            NameAddress = c.FullName + \" - \" + c.Address\n        });\n        return View(invoiceitem);\n    }\n</code></pre>\n\n<p><strong>View:</strong></p>\n\n<pre><code>@model Pro_Shot_Portal.Models.InvoiceItem\n\n@{\n    ViewBag.Title = \"Input Invoice\";\n}\n\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n@using (Html.BeginForm()) {\n@Html.ValidationSummary(true)\n&lt;fieldset&gt;\n    &lt;legend&gt;Input Invoice:&lt;/legend&gt;\n\n    &lt;div class=\"alert alert-error\" style=\"width:250px;\"&gt;\n        &lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\"&gt;×&lt;/button&gt;\n        &lt;strong&gt;Warning!&lt;/strong&gt; Assigning invoice to wrong user could cause major problems, please triple check before proceeding.\n    &lt;/div&gt;\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.ProfileUserName, \"Attach invoice to user\")\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.DropDownListFor(model =&gt; model.ProfileUserName, new SelectList(ViewBag.ProfileUserNames, \"ProfileUserName\", \"NameAddress\"), \"-- Pick Client For Invoice --\")\n        @Html.ValidationMessageFor(model =&gt; model.ProfileUserName)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Address)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Address)\n        @Html.ValidationMessageFor(model =&gt; model.Address)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Note)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Note)\n        @Html.ValidationMessageFor(model =&gt; model.Note)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Price)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Price)\n        @Html.ValidationMessageFor(model =&gt; model.Price)\n    &lt;/div&gt;\n\n    &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Create\" /&gt;\n    &lt;/p&gt;\n&lt;/fieldset&gt;\n}\n\n&lt;div&gt;\n    @Html.ActionLink(\"Cancel Invoice Creation\", \"Index\")\n&lt;/div&gt;\n</code></pre>\n\n<p>From what I can tell the invoiceitem model object properties are filled with the proper data, and the only database change I'm invoking with db.SaveChanges() is \"db.InvoiceItems.Add(invoiceitem);\".  Can anyone tell me where and why it's trying to access, write or update a column named \"UserDetails_UserId\".  Maybe I messed something up on the DropdownListFor since that's the only part interacting with the UserDetails table?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc-3","url-rewriting","web-farm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":840,"score":0,"question_id":5364736,"title":"URL Rewrite, Web Farm, and ASP.NET MVC 3: The virtual path 'null' maps to another application, which is not allowed","body":"<p>For reference: Scott Guthrie's <a href=\"http://weblogs.asp.net/scottgu/archive/2010/09/08/introducing-the-microsoft-web-farm-framework.aspx\" rel=\"nofollow\">Microsoft Web Farm entry</a>.</p>\n\n<p>Using Microsoft Web Farm, you put a \"URL Rewrite\" to direct inbound traffic to the web farm.  Using ASP.NET MVC 3, I get the following error:</p>\n\n<p><code>The virtual path 'null' maps to another application, which is not allowed.</code></p>\n\n<p>Take out the URL Rewrite, and the site fires up without issues.  In this case, I have the Controller and the Primary on the same server, which Scott Guthrie says in his post will work.</p>\n\n<p>I cannot move the URL Rewrite to the site level because it doesn't work that way for a web farm.  Maybe I should move the sites to a different tcp port like 8080?</p>\n\n<p>EDIT:</p>\n\n<p>I got part of this to work.  I NATTED the outside traffic to come in to port 591 on the server, then had the URL Rewrite go to the server farm, which is on port 80.  I needed to separate the Controller traffic from the Primary traffic.  Will keep you posted.</p>\n\n<p>The only bad part is that each day I check it, I get a 502 error.  I reboot the Controller / Primary server and it works like a charm, until the next day.</p>\n"},{"tags":["validation","asp.net-mvc-3","client-side-validation"],"answer_count":4,"favorite_count":3,"up_vote_count":18,"down_vote_count":0,"view_count":4069,"score":18,"question_id":4748703,"title":"IValidatableObject in MVC3 - client side validation","body":"<p>With MVC3 you have two new mechanisms for adding custom validation. These are (1) subclass ValidationAttribute or (2) implement IValidatableObject.</p>\n\n<p>The ValidationAttribute allows you to add client side validation relatively simply by implementing IClientValidatable (and registering a new adapter and method via jQuery).</p>\n\n<p>IValidatableObject is more suited to one-off validation requirements where reuse is not an option. It also results in slighlty simpler code. It would therefore be my choice for a number of scenarios. Unfortunately, I do not see an easy way of implementing client side validation using this method.</p>\n\n<p>So the question is what am I missing and how DO you get JS validation when using IValidatableObject?</p>\n"},{"tags":["asp.net-mvc-3","ef-code-first","dbcontext"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":580,"score":0,"question_id":6782429,"title":"MVC 3, EF4 ,Code first DataBase Initializer eror","body":"<p>I'm having some troubles when trying to set my DB using a Initializer. I've 3 tables, LabTest->LabValue&lt;-LabIndicator, and this is how I code it:</p>\n\n<pre><code>public class LabTest\n    {\n        public int ID { get; set; }\n        public DateTime ApplicationDate { get; set; }\n        public virtual ICollection&lt;LabValue&gt; LabValues { get; set; }\n    }\n\npublic class LabValue\n    {\n        public int ID { get; set; }\n        public decimal Value { get; set; }\n        public int LabTestID { get; set; }\n        public int LabIndicatorID { get; set; }\n        public virtual LabTest LabTest { get; set; }\n        public virtual LabIndicator LabIndicator { get; set; }\n    }\n\n  public class LabIndicator\n    {\n        public int ID { get; set; }\n        public string Name { get; set; }\n        public string Description { get; set; }\n        public virtual ICollection&lt;LabValue&gt; LabValues { get; set; }\n    }\n</code></pre>\n\n<p>This is how i coded my Db Intializer in my DBContext: </p>\n\n<pre><code>public class SummumnetDB : DbContext\n{\n  public DbSet&lt;LabIndicator&gt; LabIndicators { get; set; }\n  public DbSet&lt;LabTest&gt; LabTests { get; set; }\n  public DbSet&lt;LabValue&gt; LabValues { get; set; }\n\n  public class MyFirstInitializer : DropCreateDatabaseIfModelChanges&lt;SummumnetDB&gt; \n  { \n     protected override void  Seed(SummumnetDB context)\n     {\n          new List&lt;LabTest&gt;\n          {\n               new LabTest{ ApplicationDate = DateTime.Now},\n               new LabTest{ ApplicationDate = DateTime.Now},\n          }.ForEach(l =&gt; context.LabTest.Add(l));\n\n           new List&lt;LabIndicator&gt;\n           {\n                new LabIndicator{ Name=\"CHOLESTEROL\", Description = \"Cholesterol lvl\"},\n                new LabIndicator{ Name=\"HEMOGLOBIN\", Description = \"Hemoglobin lvl\"},\n                new LabIndicator{ Name=\"GLUCOSE\", Description = \"Glucose lvl\"},\n           }.ForEach(l =&gt; context.LabIndicators.Add(l));\n\n           new List&lt;LabValue&gt;\n           {\n                new LabValue{ LabTestID = 1, LabIndicatorID = 1, Value = 2.3m },\n                new LabValue{ LabTestID = 1, LabIndicatorID = 2, Value = 5.8m },\n                new LabValue{ LabTestID = 1, LabIndicatorID = 3, Value = 5.2m },\n                new LabValue{ LabTestID = 2, LabIndicatorID = 1, Value = 6.7m },\n                new LabValue{ LabTestID = 2, LabIndicatorID = 2, Value = 9.8m },\n                new LabValue{ LabTestID = 2, LabIndicatorID = 3, Value = 4.3m },\n           }.ForEach(l =&gt; context.LabValue.Add(l));\n\n           base.Seed(context);\n     }\n}\n</code></pre>\n\n<p>The thing is, when I run it, and EF tries to create the database i get this error:</p>\n\n<p>The INSERT statement conflicted with the FOREIGN KEY constraint \"LabIndicator_LabValues\". The conflict occurred in database \"SummumnetDB\", table \"dbo.LabIndicators\", column 'ID'.\nThe statement has been terminated. Hope you can work it out, thanks. </p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","partial-views","login-control"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1862,"score":0,"question_id":8768474,"title":"MVC3 Partial view inside Master Page","body":"<p>On my site, I want to display a Login box on all pages. So I wanted to make a partial view page, which I use on my _Layout.cshtml file in Shared.</p>\n\n<p>But where would the controller for this partial view go? And how would my Login button have access to it?</p>\n\n<p>So, when the Request.IsAuthenticated is true, the login box shows 'Logged in as ...', but when the result is false, I get a little table with the usual Username/Password form.</p>\n\n<p>Edit: After trying some answers below, I seem to be stuck in an endless lopp on the GET method below. It it because my partial view is trying to load me _Layout.cshtml file, as it want to accosiate the 'masterpage' with the partial view? And because my partial view is being rendered in _Layout.cshtml, it's lopping?</p>\n\n<pre><code>public class LoginController : Controller\n{\n    //\n    // GET: /Login/\n\n    public ActionResult Index()\n    {\n        return View();\n    }\n\n    [HttpPost]\n    public ActionResult Index(LoginModel loginModel)\n    {\n        if(ModelState.IsValid)\n        {\n            var g = new GallaryImage();\n            var user = g.LoginUser(loginModel.Username, loginModel.Password);\n            if(user != null) \n            {\n                FormsAuthentication.SetAuthCookie(user.username, false);\n                return RedirectToAction(\"index\", \"Home\");\n            }\n            ModelState.AddModelError(\"\", \"Invalid Username/Password\");\n        }\n        return View();\n    }\n</code></pre>\n\n<p>In my _Layout.cshtml, I am trying to load the partial view like this:</p>\n\n<pre><code>&lt;div style=\"text-align: right\"&gt;\n      @Html.Action(\"Index\", \"Login\")\n&lt;/div&gt;\n</code></pre>\n\n<p>See the issue?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13104584,"title":"mvc3 - set focus to control from Controller","body":"<p>Can I set focus to a control from a Controller when calling a View?</p>\n\n<p>(I understand the typical best practice is to use jQuery to set focus to a control when the page is loaded.)</p>\n"},{"tags":["asp.net","asp.net-mvc-3","entity-framework","exception-handling","crud"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":115,"score":0,"question_id":13104018,"title":"Asp.Net MVC 3 prevent duplicate records","body":"<p>I'm new in Asp.net MVC 3 with Entity Framework.</p>\n\n<p>I followed a tutorial to make a simple program that add/edit and delete records from a SQL database.</p>\n\n<p>My question is how and where I must prevent the duplicate records? I have the \"firstName\" field as unique. So, when the user add a record from the form, how I can control that this record don't exist?</p>\n\n<p>Many thanks in advance.</p>\n"},{"tags":["asp.net-mvc-3","partial-views","recaptcha"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":765,"score":1,"question_id":7250015,"title":"asp.net MVC 3 - JQuery ajax $.get return <nonscript> reCaptcha instead of actual html in partial view","body":"<p>This problem is kind of difficult to explain, but I'll do my best.</p>\n\n<p>I'm simply trying to render the reCaptcha input on a form that is embedded inside a partial view.</p>\n\n<p>Here's how I'm obtaining the partial view with JQuery $.get:</p>\n\n<pre><code>GetAndRenderPartialContent: function (url, obj) {\n        $.get(url, function (data) {\n            obj.replaceWith(function () {\n                var content = \"&lt;div id=\\\"\" + obj.attr('id') + \"\\\"&gt;\" + data + \"&lt;/div&gt;\";\n                return content;\n            });\n        });\n    }\n</code></pre>\n\n<p>This works great as a JQuery extension method.</p>\n\n<p>The URL that's passed in to this method is simply a controller route that returns a partial view like this:</p>\n\n<pre><code>public ActionResult GetSomeContent()\n{\n    var model = new SomeModel();\n    // set modal values\n\n    // Finally return partial view\n    return PartialView(\"_MyPartialView\", model);\n}\n</code></pre>\n\n<p>This works great. It even renders form values bound to the model.</p>\n\n<p>The problem is only with reCaptcha. In my view I have this line to render the reCaptcha:</p>\n\n<pre><code>@Microsoft.Web.Helpers.ReCaptcha.GetHtml(theme: \"clean\", publicKey: ConfigurationManager.AppSettings[\"reCaptcha:publicKey\"], language: \"en\")\n</code></pre>\n\n<p>This works when I embed it directly in the parent view.However, when it is rendered from the partial view method, I get the following results:</p>\n\n<pre><code>&lt;noscript&gt;\n    &amp;lt;iframe frameborder=\"0\" height=\"300px\" src=\"http://www.google.com/recaptcha/api/noscript?k=[MY PUBLIC KEY REMOVED FOR DEMO]\" width=\"500px\"&amp;gt;&amp;lt;/iframe&amp;gt;\n    &amp;lt;br /&amp;gt;&amp;lt;br /&amp;gt;\n    &amp;lt;textarea cols=\"40\" name=\"recaptcha_challenge_field\" rows=\"3\"&amp;gt;&amp;lt;/textarea&amp;gt;\n    &amp;lt;input name=\"recaptcha_response_field\" type=\"hidden\" value=\"manual_challenge\" /&amp;gt;\n&lt;/noscript&gt;\n</code></pre>\n\n<p>It appears that the PartialView method is HtmlEncoding the output from the reCaptcha, but not the other form elements that are embedded in the form. Has anyone encountered this or have an elegant solution to this annoying problem that has taken up a couple of hours of my time?</p>\n\n<p>The only solution I've been able to achieve is to render the reCaptcha in the parent view, hide it until the partial view page is called, then relocate it to the appropriate position in the form, which is not a desirable nor elegant solution.</p>\n\n<p>Any help is appreciated.</p>\n\n<p>Thanks.</p>\n\n<p><strong>* UPDATE **</strong>\nI tried pasting the view code here but stackoverflow's editor kept rejecting the code. Suffice it to say, there is nothing unusual about the view. The model contains properties for  binding such as:</p>\n\n<pre><code>[Required]\n[Display(Name = \"Email Address\")]\npublic string Email { get; set; }\n\n[Required]\n[Display(Name = \"Confirm Email Address\")]\n[Compare(\"Email\", ErrorMessage = \"Your email and confirmation email do not match.\")]\npublic string ConfirmEmail { get; set; }\n</code></pre>\n\n<p>The form:</p>\n\n<pre><code>@using (Html.BeginForm(\"UpdateInfo\", \"MyAccount\", FormMethod.Post, new { @id = \"InfoForm\" }))\n</code></pre>\n\n<p>Render the model items:</p>\n\n<pre><code>&lt;div class=\"editor-label\"&gt;\n     @Html.LabelFor(m =&gt; m.Email) \n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n    @Html.TextBoxFor(m =&gt; m.Email) @Html.ValidationMessageFor(m =&gt; m.Email)\n&lt;/div&gt;\n</code></pre>\n\n<p>Near the end of the form:</p>\n\n<pre><code>&lt;fieldset id=\"reCaptchaFieldset\"&gt;\n&lt;legend&gt;Captcha Authorization&lt;/legend&gt;\n@ReCaptcha.GetHtml(theme: \"clean\", publicKey: System.Configuration.ConfigurationManager.AppSettings[\"reCaptcha:publicKey\"])\n &lt;/fieldset&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13103576,"title":"Membership and Role Provider and settings web.conf","body":"<p>I have a question about setting membership and Rolls</p>\n\n<p>What are the options to do this?</p>\n\n<pre><code> &lt;roleManager enabled=\"true\" defaultProvider=\"SimpleRoleProvide\" &gt;\n  &lt;providers&gt;\n    &lt;clear/&gt;\n    &lt;add name=\"SimpleRoleProvider\" type=\"WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData\"/&gt;\n  &lt;/providers&gt;\n&lt;/roleManager&gt;\n&lt;membership&gt;\n  &lt;providers&gt;\n    &lt;clear/&gt;\n    &lt;add name=\"SimpleMembershipProvider\" type=\"WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData\"/&gt;\n  &lt;/providers&gt;\n&lt;/membership&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13100455,"title":"MVC 3 Request.Cookies value switches dynamically without purpose","body":"<p>I have a problem with redirection in my BaseController (MVC 3) I have two langage versions of my site polish and english (set by <code>$.cookie</code> plugin). If, is set the english language and user wants to go to the polish URL - I want to make a proper redirection. But, anytime I make the redirection within the <code>OnActionExecuting</code> method, in the <code>ExecuteCore</code> method, I see that the language switches for some reason - see the <code>(*)</code> line.</p>\n\n<p>What's more, in that scenario I get the infinite redirections between <code>OnActionExecuting</code> and <code>ExecuteCore</code> methods. Why ?</p>\n\n<pre><code>public class BaseController : Controller\n{\n    protected override void ExecuteCore()\n    {\n        if (Request.Cookies[\"language\"] != null)\n        {\n            if (Request.Cookies[\"language\"].Value != \"pl-PL\" &amp;&amp; Request.Cookies[\"language\"].Value != \"en-US\")\n                Request.Cookies[\"language\"].Value = \"en-US\";\n        }\n        else\n            Request.Cookies.Add(new HttpCookie(\"language\", \"en-US\"));\n\n        Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(Request.Cookies[\"language\"].Value);\n        Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;\n\n        base.ExecuteCore();\n    }\n\n    protected override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        switch (filterContext.ActionDescriptor.ActionName)\n        {\n            case \"Onas\":\n                if (Request.Cookies[\"language\"].Value == \"en-US\")\n                {\n                    filterContext.Result = new RedirectResult(\"/About\", true);\n                    return;\n                }\n                break;\n            case \"About\":\n                if (Request.Cookies[\"language\"].Value == \"pl-PL\")\n                {\n(*)                 filterContext.Result = new RedirectResult(\"/Onas\", true); // Request.Cookies[\"language\"].Value will be en-US inside the ExecuteCore method - why ?\n                    return;\n                }\n                break;\n        }\n\n        base.OnActionExecuting(filterContext);\n    }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1000,"score":4,"question_id":4809694,"title":"Razor doesn't understand unclosed html tags","body":"<p>With RazorViewEngine, I can do this:</p>\n\n<pre><code>if (somecondition) {\n     &lt;div&gt; some stuff &lt;/div&gt;\n}\n</code></pre>\n\n<p>but I can't seem to do this (Razor gets confused):</p>\n\n<pre><code>if (somecondition) {\n    &lt;div&gt;\n}\n\nif (someothercondition) {\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p>I have a situation in which I need to put my opening and closing html tags in different code blocks - how can I do this in Razor?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13102181,"title":"how to open browser in action result?","body":"<p>i have a action tresult method and in it i want to open a url in new window or new tab how can i handel it ?</p>\n\n<p>in my code it works not i mean redirect it to member account and do not open my url</p>\n\n<pre><code>public ActionResult myactionresult()\n    {\n         Response.Write(\"&lt;script language=\\\"javascript\\\"&gt;\");\n         Response.Write(\"window.open('\" + \"http://www.xxx.com\" + ,'_blank')\");\n         Response.Write(\"&lt;/script&gt;\");\n\n       return RedirectToAction(\"Index\", \"MembersAccount\");\n      }\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","telerik","telerik-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1587,"score":1,"question_id":8952263,"title":"Telerik MVC extensions date picker not putting date in textbox","body":"<p>I am using <code>ASP.NET MVC 3</code> with <code>razor</code> and the latest version of the <code>Telerik MVC extensions</code> controls.</p>\n\n<p>I have a date picker on my view:</p>\n\n<pre><code>&lt;td&gt;&lt;label&gt;From:&lt;/label&gt;&lt;/td&gt;\n&lt;td&gt;\n     @(Html.Telerik()\n          .DatePickerFor(x =&gt; x.HospitalisedStartDate)\n          .Name(\"HospitalisedStartDate\")\n     )\n&lt;/td&gt;\n</code></pre>\n\n<p>This property in my view model:</p>\n\n<pre><code>public DateTime? HospitalisedStartDate { get; set; }\n</code></pre>\n\n<p>When the view loads, I would click on the calendar icon.  The calendar pops up, I would select a date and then nothing happens.  The calendar disappears but the date is not set the textbox.  Why would this be?  If I were to type in the word \"today\" in the textbox then it will put in todays date like \"2012/01/21\".  What am I missing here that is preventing it from working?</p>\n\n<p>The markup looks like this for the style sheets and JavaScript:</p>\n\n<pre><code>&lt;link type=\"text/css\" href=\"/Content/2011.3.1115/telerik.common.min.css\" rel=\"stylesheet\"/&gt;\n&lt;link type=\"text/css\" href=\"/Content/2011.3.1115/telerik.webblue.min.css\" rel=\"stylesheet\"/&gt;\n&lt;link type=\"text/css\" href=\"/Content/Stylesheets/mystylesheet.css\" rel=\"stylesheet\"/&gt;\n\n&lt;script src=\"/Scripts/jquery-1.7.1.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/2011.3.1115/telerik.common.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/2011.3.1115/telerik.tabstrip.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/2011.3.1115/telerik.calendar.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/2011.3.1115/telerik.datepicker.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/2011.3.1115/telerik.treeview.min.js\"&gt;&lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","selectedvalue","dropdownlistfor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13101926,"title":"DropDownListFor and showing a SelectedValue","body":"<p>I have been banging my head for 2 days now with Html.DropDownListFor and MVC3.</p>\n\n<p>I have been successful in creating a drop down list and successfully updating the database\nbased on it.</p>\n\n<p>I create a drop down list for area</p>\n\n<pre><code>1 - NewYork\n2 - London\n3 - Paris\netc\n</code></pre>\n\n<p>The problem occurs when creating a edit page where the user can change the previous\nchoice. I am trying to show the previous selected value in the drop down.</p>\n\n<p>My code is as follows:</p>\n\n<p>Controller:</p>\n\n<pre><code>//\n// GET: /MyHome/UpdateProfile\n\npublic ActionResult UpdateProfile()\n{\n    var userProfile = websiteRepository.GetProfileForLoggedUser();\n    UpdateProfileViewModel viewModel = new UpdateProfileViewModel\n    {\n       AreaLookUps = websiteRepository.GetAreaLookUpSelectList(userProfile.Area),\n       UserProfile = userProfile\n    };\n    return View(\"UpdateProfile\", viewModel);\n}\n</code></pre>\n\n<p>The GetAreaLookUpSelectList method</p>\n\n<pre><code>public IEnumerable&lt;SelectListItem&gt; GetAreaLookUpSelectList(int selectedId)\n{\n   var areaLookUps = from p in db.AreaLookUp\n                     orderby p.AreaLookUpDescription\n                     select new SelectListItem\n                     {\n                        Text = p.AreaLookUpDescription,\n                        Value = SqlFunctions.StringConvert((double)p.AreaLookUpId),\n                        Selected = p.AreaLookUpId == selectedId\n                     };\n    return areaLookUps;\n}\n</code></pre>\n\n<p>View</p>\n\n<pre><code>@model NPLHWebsite.ViewModels.UpdateProfileViewModel\n\n&lt;div class=\"editor-label\"&gt;\n   @Html.LabelFor(model =&gt; model.UserProfile.Area)\n   @Html.DropDownListFor(model =&gt; model.UserProfile.Area, Model.AreaLookUps, \"--Select Area--\")\n&lt;/div&gt;\n</code></pre>\n\n<p>ViewModel</p>\n\n<pre><code>public class UpdateProfileViewModel\n{\n   public UserProfile UserProfile { get; set; }\n   public IEnumerable&lt;SelectListItem&gt; AreaLookUps { get; set; }\n}\n</code></pre>\n\n<p>Please help me display a selected value. Say \"London\" in the dropdownlist, if that option was selected while creating the profile. The database stores the value of 2 to represent London.</p>\n"},{"tags":["c#","xml","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13100713,"title":"Url.Content and reading ~ tilde in URL from xml file","body":"<p>I am using ASP.NET MVC 3 with .aspx view engine. \nI have Maps.xml file:</p>\n\n<pre><code>    &lt;imgurl&gt;\n        ../../Content/Img/BrandsLogo/samsung_logo.png\n    &lt;/imgurl&gt;\n&lt;/map&gt;\n</code></pre>\n\n<p>….</p>\n\n<p>In the MapView.aspx I have:</p>\n\n<pre><code>&lt;%: Url.Content( Model.ImgUrl ) %&gt; \n</code></pre>\n\n<p>This works well, the image is displayed as it should.</p>\n\n<p>The problem is:\nI want to use the tilde in the xml file: </p>\n\n<pre><code>    &lt;imgurl&gt;\n        ~/Content/Img/BrandsLogo/samsung_logo.png\n    &lt;/imgurl&gt;\n</code></pre>\n\n<p>But then the URL to the image is broken; somehow it adds Mobile/MapView in it. Which is the folder and .aspx file like this?</p>\n\n<p><strong>/Mobile/MapView/~/Content/Img/BrandsLogo/samsung_logo.png</strong></p>\n\n<p>When I use the ../../ in the xml file the URl is correct:\n<strong>/Content/Img/BrandsLogo/samsung_logo.png</strong></p>\n\n<p>I have tried the solution form:\n<a href=\"http://stackoverflow.com/questions/5331777/using-url-content-with-semi-relative-url\">Using Url.Content with semi-relative URL</a></p>\n\n<p>but then I get some extra spaces:\n<strong>/Content/Img/BrandsLogo%20%20%20%20%20%20%20%20%20%20%20%20/samsung_logo.png</strong></p>\n\n<p>How can I read tilde url <code>(~/Content/Img/BrandsLogo/samsung_logo.png)</code> from the xml file and use <code>Url.Content</code> method?</p>\n\n<p>Thank you.</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":413,"score":1,"question_id":6946253,"title":"AllowHTML and custom IValueProviders in MVC3","body":"<p>I have a custom IValueProvider that I wrote to handle json values. It is registered in the globa.asax via</p>\n\n<pre><code>ValueProviderFactories.Factories.Insert(0, new JsonValueProviderFactory());\n</code></pre>\n\n<p>It works fine, but I just recently needed to post a model back that contains HTML.  By default this spawns the old </p>\n\n<pre><code>A potentially dangerous Request.Form value was detected from the client\n</code></pre>\n\n<p>Error message.  It looks like the way to get around that normally is to decorate the model property with an AllowHtml attribute.  The problem is my value provider is still throwing the error.  Any idea how to get my value provider to respect the AllowHtml attribute?</p>\n\n<p>Here is the relevant code:</p>\n\n<pre><code>public class JsonValueProvider : IValueProvider, IValueDeserializer\n{\n    private ControllerContext context;\n\n    public JsonValueProvider(ControllerContext controllerContext)\n    {\n        this.context = controllerContext;\n    }\n\n    public bool ContainsPrefix(string prefix)\n    {\n        return context.HttpContext.Request.Form.AllKeys.FirstOrDefault(i =&gt; i.StartsWith(prefix)) != null; //&lt;!------- The error is thrown here\n    }\n    .....\n</code></pre>\n"},{"tags":["c#","asp.net","json","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":13099467,"title":"Parse and store json string into a class using C#","body":"<pre><code>{\n    \"id\" : 0,\n    \"name\" : \"meeting\",\n    \"text\" : \"10 pm\",\n    \"location\" : \"Place1\",\n    \"startdate\" : \"10/27/2012 17:11\",\n    \"enddate\" : \"10/27/2012 18:41\",\n    \"description\" : \"Description\",\n    \"chairman\" : \"0\",\n    \"members\" : [2, 1],\n    \"messagetype\" : {\n        \"SMS\" : false,\n        \"Email\" : true\n    },\n    \"smsmessage\" : null,\n    \"emailmessage\" : \"this is message\",\n    \"emailsubject\" : null,\n    \"reminder\" : \"5\",\n    \"timetosendemail\" : \"10/23/2012 00:00\",\n    \"timetosendsms\" : null\n}\n</code></pre>\n\n<p>This is my json string. What i need is to parse this string and store each values into specific members of a class.</p>\n\n<p>The class is like this</p>\n\n<pre><code>public class Event\n{\n\n    public int id { get; set; }\n    public string name {get;set;}\n    public string text { get; set; }\n    public DateTime start_date { get; set; }\n    public DateTime end_date { get; set; }\n    public string location { get; set; }\n    public double ReminderAlert { get; set; }\n    public MessagerType MessageType { get; set; }\n    public string SmsMessage { get; set; }\n    public string EmailMessage { get; set; }\n    public string EmailSubject { get; set; }\n    public DateTime TimeToSendEmail { get; set; }\n    public DateTime TimeToSendSMS { get; set; }   \n    public string[] members {get;set;}\n}\n</code></pre>\n\n<p>I used Json.net library to parse..and my code snippet is given below</p>\n\n<pre><code>var eventValues = JsonConvert.DeserializeObject&lt;List&lt;Dictionary&lt;string, Event&gt;&gt;&gt;(stringEvent);\n</code></pre>\n\n<p>After running this code i get this error</p>\n\n<blockquote>\n  <p>Cannot deserialize the current JSON object (e.g. {\"name\":\"value\"}) into type 'System.Collections.Generic.List<code>1[System.Collections.Generic.Dictionary</code>2[System.String,CalendarScheduler.Models.Event]]' because the type requires a JSON array (e.g. [1,2,3]) to deserialize correctly.</p>\n  \n  <p>To fix this error either change the JSON to a JSON array (e.g. [1,2,3]) or change the deserialized type so that it is a normal .NET type (e.g. not a primitive type like integer, not a collection type like an array or List) that can be deserialized from a JSON object. JsonObjectAttribute can also be added to the type to force it to deserialize from a JSON object.</p>\n  \n  <p>Path 'id', line 1, position 6.</p>\n</blockquote>\n\n<p>What should be done to avoid this exception...?</p>\n"},{"tags":["c#","asp.net-mvc-3","xss-prevention","modelstate","request-validation"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":364,"score":1,"question_id":6720428,"title":"AllowHtml, HttpRequestValidationException and ModelState","body":"<p>I have this viewmodel</p>\n\n<pre><code>public class FooBarViewModel\n{\n    public string Foo { get; set; }\n\n    [AllowHtml]\n    public string Bar { get; set; }\n}\n</code></pre>\n\n<p>Instead of throwing a <code>HttpRequestValidationException</code> if <code>.Foo</code> is submitted with html in it, I want to add a message to <code>ModelState</code>. How could I do that?</p>\n"},{"tags":["c#","asp.net-mvc-3","visual-studio"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13097112,"title":"How to get syntax highlighting of controllers and actions on HtmlHelper extension method?","body":"<p>How can I get Visual Studio to provide controller and action syntax highlighting like it offers for its own object for controller and action strings in the following?</p>\n\n<p>When you use: </p>\n\n<pre><code>Html.Action(\"Index\", \"Home\");\n</code></pre>\n\n<p>Visual Studio provides additional highlighting on the controller and action, it even tries to detect which ones are available and will present it as an option.</p>\n\n<p>I have perfectly working HtmlHelper extension method similar to the following:</p>\n\n<pre><code>public static MvcHtmlString Action(this HtmlHelper htmlHelper, string actionName, string controllerName, string myAwesomeField) {\n        return Action(htmlHelper, actionName, controllerName, null /* routeValues */, myAwesomeField);\n    }\n</code></pre>\n\n<p>My extension methods are getting picked up by intellisense in the regard that it knows I need a few strings. When you look at <a href=\"http://aspnet.codeplex.com/releases/view/58781\" rel=\"nofollow\">Microsoft's code</a>, the parameters for action and controller are strings, but Visual Studio knows whether those controllers and actions exists and provide <em>additional</em> intellisense support. How does the tooling pick up on it?</p>\n"},{"tags":["asp.net-mvc-3","drop-down-menu","razor","selecteditem"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":5380,"score":1,"question_id":6929383,"title":"Razor and Html.DropDownList: Setting selected values for a dropdown for each row in a list?","body":"<p>This seems like it should be simple, but I can't figure out how to make it work.</p>\n\n<p>My data model has a \"Server\" table, and a \"ServerType\" table. PKs for both tables are ints, and Server has a field ServerTypeId which is a fk to ServerType.Id.</p>\n\n<p>I have a Razor List.cshtml that is typed to IEnumerable:</p>\n\n<pre><code>@model IEnumerable&lt;Server&gt;\n&lt;table border=\"1\"&gt;\n    &lt;tr&gt;\n        &lt;th&gt;\n            Server Type\n        &lt;/th&gt;\n        &lt;th&gt;\n            Name\n        &lt;/th&gt;\n    &lt;/tr&gt;\n    @foreach (var item in Model)\n    {\n        &lt;tr&gt;\n            &lt;td&gt;\n                @Html.DropDownListFor(modelItem =&gt; item.ServerTypeId, (IEnumerable&lt;SelectListItem&gt;)ViewData[\"ServerType\"])\n            &lt;/td&gt;\n            &lt;td&gt;\n                @Html.DisplayFor(modelItem =&gt; item.Name)\n            &lt;/td&gt;\n        &lt;/tr&gt;\n    }\n&lt;/table&gt;\n</code></pre>\n\n<p>My controller has:</p>\n\n<pre><code>    public ActionResult List()\n    {\n        var s = GetServers();\n        ViewData[\"ServerType\"] = GetServerTypes();\n        return View(\"List\", s);\n    }\n\n    private List&lt;SelectListItem&gt; GetServerTypes()\n    {\n        string id;\n        SelectListItem si;\n        List&lt;SelectListItem&gt; sl = new List&lt;SelectListItem&gt;();\n        IQueryable&lt;ServerType&gt; items = (from t in _entities.ServerTypes select t);\n        foreach (var item in items)\n        {\n            id = item.Id.ToString();\n            si = new SelectListItem { Value = id, Text = item.Description };\n            sl.Add(si);\n        }\n        return sl;\n    }\n</code></pre>\n\n<p>This displays the data, but the value in the dropdown is not selected.  I've tried both Html.DropDownList and Html.DropDownListFor, with different permutation of names for the ViewData property, with and without the Id at the end.</p>\n\n<p>Do I need to create a viewmodel that has copies of the ServerType in order to set the Selected property?  Or is it a problem because my ids are ints, and the SelectItemList Value property is a string?  </p>\n"},{"tags":["jquery","html","asp.net-mvc-3","geolocation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13099564,"title":"HTML/JQuery navigator.geolocation.getCurrentPosition won't work second time (Firefox only)","body":"<p>I have a strange JQuery issue that I am looking for help with.</p>\n\n<p>I have a page that has the below piece of javascript. When the page loads the first time it works as it should. However if the user moves away but then comes back to the page, the load isn't called, instead it happens about 30 seconds later. </p>\n\n<p>If I have the alert uncommented it all works fine (apart from the popup appearing). This is happening in Firefox only. All other browsers are fine. This is in a MVC3 application. There is no caching on the MVC action either.  Could it be a cache issue somewhere else?</p>\n\n<pre><code> navigator.geolocation.getCurrentPosition(function (position) {\n                $(function () {\n                    //alert('1');\n                    $('#divNearestTiles').load....\n</code></pre>\n"},{"tags":["asp.net-mvc-3","anchor","actionlink"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13098617,"title":"MVC:replacing HTML.ActionLink with ahref","body":"<p>Earlier I had <code>ActionLink</code> </p>\n\n<pre><code> &lt;%: Html.ActionLink(\"Add Race\", \"AddRace\", \n          new {eventId = Model.EventId,fleetId=Model.SelectedFleet.ID}) %&gt;\n</code></pre>\n\n<p>on my page..and it is working fine. But now my requirement is it must check if some there is some data in <code>FooEntity</code> then it redirect to another view otherwise it should display an <code>alert</code> message.. </p>\n\n<p>so i changed <code>ActionLink</code> to <code>ahref</code> and thinking to use <code>$.ajax</code> call with it..but my action <code>AddRace</code> is written accordingly <code>ActionLink</code>. but now i'm using <code>ahref</code> so i want to make ajaxcall which will return some <code>boolean</code> and based on that i'll redirect or show <code>alert</code>. I need to re-write <code>AddRace Action</code>. I'm pretty new to <code>MVC</code> so confuse in changing my <code>AddRace</code> action. </p>\n\n<p><code>ahref</code>: </p>\n\n<pre><code> &lt;a href=\"#\" onclick='checkFleetAddedandScroing()'&gt;Add Race&lt;/a&gt;\n</code></pre>\n\n<p><code>Action</code> is:</p>\n\n<pre><code> public ActionResult AddRace(Guid eventId, Guid fleetId)\n    {\n        try\n        {\n            var model = new RaceModel { EventID = eventId, FleetID = fleetId, IsAddPHRFBFactors = IsAddPhrfbFactors(eventId, fleetId) };\n            SetFleetsInViewBagForAddRace(eventId);\n            return View(model);\n        }\n        catch (Exception ex)\n        {                \n            throw;\n        }            \n    }\n</code></pre>\n\n<p>Please suggest me how to do it....</p>\n"},{"tags":["c#","jquery",".net","asp.net-mvc-3","http"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":328,"score":1,"question_id":10348111,"title":"Custom Error message with HTTPStatusCodeResult & jQuery","body":"<p>I have a controller action that returns some JSON results to the jQuery Full Calendar plugin. I return a HTTPStatusCodeResult with a custom error message  if there was an error, But i cant get the custom error message to display. All that's is displayed in the alert box is the default Http status (ie: 'Forbidden', or 'Internal Server Error')</p>\n\n<p>Controller code that returns the error messages</p>\n\n<pre><code>else if(id != CurrentUser.UserId)\n{\n    return new HttpStatusCodeResult(403, \"You are not authorised to view this.\");\n}\nelse\n{\n    return new HttpStatusCodeResult(500, \"There was an error on the server.\");\n}\n</code></pre>\n\n<p>jQuery code  </p>\n\n<pre><code>$(document).ready(function () {\n             $('#calendar').fullCalendar({\n                 header: {\n                     left: 'prev,next today',\n                     center: 'title',\n                     right: 'month,agendaWeek,agendaDay'\n                 },\n                 height: 600,\n                 eventSources: [{\n                     url: events,\n                     type: 'Get',\n                     error: function(response, status, error) {\n                         alert(response.statusText);\n                     }\n                 }],\n                 allDayDefault: false,\n                 selectable: true,\n                 eventClick: function (event) {\n                     if (event.url) {\n                         $('#details').load(event.url);\n                     }\n                 },\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","html.dropdownlistfor","dropdownlistfor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":27,"score":-1,"question_id":13075484,"title":"In MVC3 I am trying to get my dropdownlistfor to have a Value of zero , instead of empty string for the starting \"Please Select ...\"","body":"<p>How can I get the first Option Value to be zero instead of an empty string. So when the user\ngoest to the form and doesnt select anything a Value would be passed like zero. I am new to MVC and have spent time trying to find an easy answer. Can this be done in Jquery? Any suggestions would be much appreciated.</p>\n\n<p>HERES my VIEW </p>\n\n<pre><code>@Html.DropDownListFor(x =&gt; x.ItemCatId,\n new SelectList(Model.CategoryddList, \"Value\", \"Text\"),\n \"Select Category\")\n</code></pre>\n\n<p>AND CONTROLLER</p>\n\n<pre><code>items.CategoryddList =\n        itemsRepository.GetItemDdl(\"Item Categories\").Select(c =&gt; new SelectListItem \n                        {\n                           Value = c.DropdownID.ToString(),\n                           Text = c.DropdownText\n                        });  \n</code></pre>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-ui"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":12617555,"title":"Jquery UI Combo box is not working","body":"<p>I am using jquery UI combo box and its not working here is my code its giving the following error, which I see in firefox console.</p>\n\n<p><strong>Error</strong></p>\n\n<p>TypeError: input.data(\"autocomplete\") is undefined\n[Break On This Error]   </p>\n\n<p>input.data(\"autocomplete\")._renderItem = function (ul, item) {</p>\n\n<p><strong>Javascript</strong></p>\n\n<pre><code> (function ($) {\n    $.widget(\"ui.combobox\", {\n        _create: function () {\n            var input,\n                self = this,\n                select = this.element.hide(),\n                selected = select.children(\":selected\"),\n                value = selected.val() ? selected.text() : \"\",\n                wrapper = this.wrapper = $(\"&lt;span&gt;\")\n                    .addClass(\"ui-combobox\")\n                    .insertAfter(select);\n\n            input = $(\"&lt;input&gt;\")\n                .appendTo(wrapper)\n                .val(value)\n                .addClass(\"ui-state-default ui-combobox-input\")\n                .autocomplete({\n                    delay: 0,\n                    minLength: 0,\n                    source: function (request, response) {\n                        var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), \"i\");\n                        response(select.children(\"option\").map(function () {\n                            var text = $(this).text();\n                            if (this.value &amp;&amp; (!request.term || matcher.test(text)))\n                                return {\n                                    label: text.replace(\n                                        new RegExp(\n                                            \"(?![^&amp;;]+;)(?!&lt;[^&lt;&gt;]*)(\" +\n                                            $.ui.autocomplete.escapeRegex(request.term) +\n                                            \")(?![^&lt;&gt;]*&gt;)(?![^&amp;;]+;)\", \"gi\"\n                                        ), \"&lt;strong&gt;$1&lt;/strong&gt;\"),\n                                    value: text,\n                                    option: this\n                                };\n                        }));\n                    },\n                    select: function (event, ui) {\n                        ui.item.option.selected = true;\n                        self._trigger(\"selected\", event, {\n                            item: ui.item.option\n                        });\n                    },\n                    change: function (event, ui) {\n                        if (!ui.item) {\n                            var matcher = new RegExp(\"^\" + $.ui.autocomplete.escapeRegex($(this).val()) + \"$\", \"i\"),\n                                valid = false;\n                            select.children(\"option\").each(function () {\n                                if ($(this).text().match(matcher)) {\n                                    this.selected = valid = true;\n                                    return false;\n                                }\n                            });\n                            if (!valid) {\n                                // remove invalid value, as it didn't match anything\n                                $(this).val(\"\");\n                                select.val(\"\");\n                                input.data(\"autocomplete\").term = \"\";\n                                return false;\n                            }\n                        }\n                    }\n                })\n                .addClass(\"ui-widget ui-widget-content ui-corner-left\");\n\n            input.data(\"autocomplete\")._renderItem = function (ul, item) {\n                return $(\"&lt;li&gt;&lt;/li&gt;\")\n                    .data(\"item.autocomplete\", item)\n                    .append(\"&lt;a&gt;\" + item.label + \"&lt;/a&gt;\")\n                    .appendTo(ul);\n            };\n\n            $(\"&lt;a&gt;\")\n                .attr(\"tabIndex\", -1)\n                .attr(\"title\", \"Show All Items\")\n                .appendTo(wrapper)\n                .button({\n                    icons: {\n                        primary: \"ui-icon-triangle-1-s\"\n                    },\n                    text: false\n                })\n                .removeClass(\"ui-corner-all\")\n                .addClass(\"ui-corner-right ui-combobox-toggle\")\n                .click(function () {\n                    // close if already visible\n                    if (input.autocomplete(\"widget\").is(\":visible\")) {\n                        input.autocomplete(\"close\");\n                        return;\n                    }\n\n                    // work around a bug (likely same cause as #5265)\n                    $(this).blur();\n\n                    // pass empty string as value to search for, displaying all results\n                    input.autocomplete(\"search\", \"\");\n                    input.focus();\n                });\n        },\n\n        destroy: function () {\n            this.wrapper.remove();\n            this.element.show();\n            $.Widget.prototype.destroy.call(this);\n        }\n    });\n})(jQuery);\n\n$(function () {\n\n    $(\"#combobox\").combobox();\n\n\n\n});\n</code></pre>\n\n<p><strong>Html</strong></p>\n\n<pre><code>&lt;div class=\"ui-widget\"&gt;\n\n&lt;select id=\"combobox\"&gt;\n        @foreach (var item in Model)\n        {\n            &lt;option value=\"@item.Name\"&gt;@item.Name&lt;/option&gt;\n        }\n&lt;/select&gt;\n</code></pre>\n\n<p></p>\n\n<p>i don't know why but its not working  . Please help me </p>\n"},{"tags":["javascript","asp.net-mvc-3","google-maps-api-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":28,"score":-1,"question_id":13083704,"title":"G Maps Api & multiple polygons","body":"<p>I need to display multiple polygons on map, but not all at same time.\nI Have json file with neighbourhoods... Something like this:</p>\n\n<pre><code>[\n  \"NeighbID\":xx, \n  \"NeighName\":\"someName\",  \n  \"Points\": \n   [ \n     {\"Latitude\":12.3123123,\"Longitude\":12.3123123},\n     {\"Latitude\":12.3123123,\"Longitude\":12.3123123},\n</code></pre>\n\n<p>.... and so on with different NeighbID</p>\n\n<p>I want to use that json and render on map poly (something like highlight Neighbourhood) when mouse is over that neighbourhood.</p>\n\n<p>Sorry for my English,\nThx</p>\n"},{"tags":["asp.net-mvc-3","httphandler"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13097549,"title":"HttpHandler behaviour I don't understand","body":"<p>I have been playing around with HttpHandlers. I was able to get a handler working no problem. The URL looks like this:</p>\n\n<pre><code>/test.axd/7775295a8610b70b589c2b8dcc510ef0/Test\n</code></pre>\n\n<p>This hits the HttpHandler as expected. However, if I add an extension to the end like so:</p>\n\n<pre><code>/test.axd/7775295a8610b70b589c2b8dcc510ef0/Test.css\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>/test.axd/7775295a8610b70b589c2b8dcc510ef0/Test.css\n</code></pre>\n\n<p>It no longer hits the HttpHandler. It doesn't seem to matter what the extension is.</p>\n\n<p>I am using ASP.NET MVC 3 with Visual Studio 2010.</p>\n\n<p>Is this the expected behavior of an HttpHandler? If yes, why?</p>\n"},{"tags":["c#","asp.net-mvc-3","template-engine","razorgenerator"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":219,"score":4,"question_id":13035427,"title":"RazorGenerator, Templates, and @Html","body":"<p>I'm trying to use <a href=\"http://razorgenerator.codeplex.com/\" rel=\"nofollow\">RazorGenerator</a> as an email template engine.  I want to take a model with the data, assemble the correct set of partial views, and return HTML that I can email out.<br>\n<strong>Edit:</strong> In addition to this workflow, any solution would need to be editable as a .cshtml file and <em>be able to be compiled into a dll</em>.  For various reasons, it is not practical to deploy the cshtml files themselves - if we can't embed all our razor views into a single file, then we can't use that suggestion.  Hence RazorGenerator.</p>\n\n<p>So far, I've worked out every part of it, except for the partials.  When I try to use @Html.Partial() in a template file, I get: <code>The name 'Html' does not exist in the current context</code>.  </p>\n\n<p>Based on <a href=\"http://stackoverflow.com/a/8562176/298754\">this answer</a>, I know that <code>@Html</code> isn't part of Razor by default, and there's many answers out there as to how to create a <code>HtmlHelper</code> in a controller.  However, I need to create one in a template, which doesn't have the <code>ControllerContext</code> that I'd need to follow those examples.  </p>\n\n<p>I've also tried using @Include, but the RazorGenerator template doesn't seem to support that.  <strong>Edit:</strong> I also tried creating a new class which inherited from <code>TemplateBase&lt;&gt;</code> and copied all the functionality of <code>RazorTemplateBase</code>, but I get <code>NullReferenceException</code>s on the <code>@Include</code> line.</p>\n\n<p>So, my primary question is: Is there a better way to include another Razor file (with model) into my file?</p>\n\n<p>Secondarily, if there isn't a better way, how can I get the HtmlHelper created?</p>\n\n<hr>\n\n<p><strong>Edit for bounty:</strong> Just to reiterate, the four things I need in an acceptable answer are:</p>\n\n<ol>\n<li>The ability to edit <code>.cshtml</code> files with the standard editor (no \"store it as a string\" or such)</li>\n<li>The ability to compile everything into a single dll which can be deployed using our current build system (we can't deploy lots of individual .cshtml's)</li>\n<li>The ability to reference one .cshtml file from another, and pass a model - equivalent to <code>@Includes</code> or <code>@Html.Partial</code> (Either of which are perfectly acceptable if they work)</li>\n<li>The ability to email out the result, with attachments. (I already have code for this, if the result is a string or convertible to one.)</li>\n</ol>\n\n<p>I currently can get most combinations of three of these working, but I can't get all four at once.  I'm open to new libraries, replacing RazorGenerator, or throwing out any part of what I already have, so long as the result works as needed.</p>\n"},{"tags":["asp.net-mvc-3","view"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":45,"score":-1,"question_id":13092928,"title":"ASP.NET MVC3 Call Controller Method from View","body":"<p>Below is an abstract of my Controller and View.  I would like to call the method GetUserDistinguished from the View.  This is only cosmetic.  The Guid is ugly and doesn't make sense to the end user, but it's the unique ID I am using for users.</p>\n\n<pre><code>namespace Users.Controllers\n{ \n    public class UsersController : Controller\n    {\n\n        public ViewResult Index()\n        {    \n            var users = db.Users.Include(\"Users\");    \n            return View(users.ToList());\n        }\n\n        public string GetUserDistinguished(string Guid)\n        {\n            return ADHelper.ConvertGuidToDn(Guid);\n        }\n    }\n}\n\n\n\n\n\n@model IEnumerable&lt;Test.GuidToDistinguishedName&gt;\n\n@{\n    ViewBag.Title = \"Index\";\n}\n\n&lt;h2&gt;Index&lt;/h2&gt;\n\n&lt;p&gt;\n    @Html.ActionLink(\"Create New\", \"Create\")\n&lt;/p&gt;\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;th&gt;\n            Name from Guid\n        &lt;/th&gt;\n    &lt;/tr&gt;\n\n@foreach (var item in Model) {\n    &lt;tr&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.Guid)\n        &lt;/td&gt;\n    &lt;/tr&gt;\n}\n\n&lt;/table&gt;\n</code></pre>\n"},{"tags":["jquery","ajax","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":525,"score":0,"question_id":8506547,"title":"Asynchronous JQuery TreeView with multiple levels of loading in MVC 3 not working","body":"<p>I am using MVC 3, jQuery, jquery.treeview.js, and jquery.treeview.async.js to load and create a treeview asynchronously.  It is a two level treeview with PartTypes being the top level and then Parts being the second level.  I have the following TreeViewNode class</p>\n\n<pre><code>public class TreeViewNode\n{\n    public TreeViewNode[] children { get; set; }\n\n    public string classes { get; set; }\n\n    public bool expanded { get; set; }\n\n    public bool hasChildren { get; set; }\n\n    public string id { get; set; }\n\n    public string text { get; set; }\n}\n</code></pre>\n\n<p>The controller is </p>\n\n<pre><code>public ActionResult PartTypes(string root)\n    {\n        var nodes = new List&lt;TreeViewNode&gt;();\n\n        if(root == \"source\")\n        {\n            var partTypes = ris.PartTypes.ToList().OrderBy(pt =&gt; pt.Name);\n\n            foreach (var partType in partTypes)\n            {\n                nodes.Add(new TreeViewNode {\n                        text = partType.Name,\n                        id = partType.Name,\n                        hasChildren = true\n                    });\n            }\n        }\n        else\n        {\n            var parts = ris.Parts.Where(p =&gt; p.PartType.Name == root).ToList();\n            foreach (var part in parts)\n            {\n                nodes.Add(new TreeViewNode {\n                        text = part.SerialNumber,\n                        id = part.SerialNumber\n                    });\n            }\n        }\n        return Json(nodes);\n    }\n</code></pre>\n\n<p>The jQuery code for loading is</p>\n\n<pre><code>$(document).ready(function() {\n$(\"#navigation\").treeview({\n    url: '/Parts/Part/PartTypes/',\n    ajax: {\n        type: 'post'\n    }\n    });\n}\n);\n</code></pre>\n\n<p>and the HTML is simply</p>\n\n<pre><code>&lt;ul id=\"navigation\" class=\"treeview\"/&gt;\n</code></pre>\n\n<p>When the page loads all the Part Types load and they load expanded.  No parts load even if you click the individual part type links.  How can I get the Part Types to load collapsed and then load the part names when you expand one of the part types.</p>\n"},{"tags":["asp.net-mvc-3","html5-video"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":451,"score":0,"question_id":6881171,"title":"How to play the videos using Html5 in asp.net mvc3","body":"<p>i have a asp.net mvc3 web application in this i have use the Htlml5 controls.I want play the Video in this mvc3 application using html5 for this i have try for this ,when run the page just it show the blak window and controls there is no visible the video i have declare like this </p>\n\n<pre><code>&lt;%@ Page Title=\"\" Language=\"C#\" MasterPageFile=\"~/Views/Shared/Site.Master\" Inherits=\"System.Web.Mvc.ViewPage&lt;IlifeLooks.Models.User&gt;\" %&gt;\n\n       &lt;asp:Content ID=\"Content1\" ContentPlaceHolderID=\"TitleContent\" runat=\"server\"&gt;\n        Window\n      &lt;/asp:Content&gt;\n   &lt;asp:content id=\"Content2\" contentplaceholderid=\"MainContent\" runat=\"server\"&gt;\n    &lt;h2&gt;\n        Window&lt;/h2&gt;\n         &lt;video width=\"560\" height=\"340\" controls&gt;\n    &lt;source src=\"../../Videos/Nenu Nuvvuantu - Orange - MyInfoland.mp4\" type='video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"'&gt;\n    &lt;source src=\"../../Videos/Meray Haath.avi\" type='video/ogg; codecs=\"theora, vorbis\"'&gt;\n&lt;/video&gt;\n&lt;video id=\"myvideo\" runat=\"server\" width=\"300px\" height=\"500px\" autoplay=\"autoplay\"\n    controls=\"controls\" src=\"~/Videos/Nenu Nuvvuantu - Orange - MyInfoland.mp4\"&gt;\n&lt;/video&gt;\n</code></pre>\n\n<p></p>\n\n<p>What can i change in my code please help me....</p>\n"},{"tags":["oracle","asp.net-mvc-3","asp.net-membership","odac"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":254,"score":0,"question_id":7106321,"title":"InstallAllOracleASPNETProviders doesn't work correctly","body":"<p>I am using asp.net mvc 3 and oracle database with ODAC1120240Beta_EntityFramework. </p>\n\n<p>I want to do authorization in my site. Database works correctly, I can do everything with Database data, but if I go to <code>ASP.NET Configuration -&gt; Provider</code> I see only <code>AspNetSqlMembershipProvider</code>. </p>\n\n<p>InstallAllOracleASPNETProviders doesn't work correctly.</p>\n\n<p>All functions, views and packages were created succesully. I do all using <a href=\"http://download.oracle.com/docs/cd/B28359_01/appdev.111/b28844/installation.htm#BABFFDIE\" rel=\"nofollow\">this Oracle Guide</a>  </p>\n\n<p>Here is part of Oracle Database Output after executing this script from Visual Studio Tools.</p>\n\n<pre><code>GRANT SELECT ON ora_vw_aspnet_Applications TO ora_aspnet_Mem_ReportAccess\n                                              *\nerror in string 1:\nORA-01917: user or role 'ORA_ASPNET_MEM_REPORTACCESS' does not exist\n\n\nGRANT SELECT ON ora_vw_aspnet_Users TO ora_aspnet_Mem_ReportAccess\n                                       *\nerror in string 1:\nORA-01917: user or role 'ORA_ASPNET_MEM_REPORTACCESS' does not exist\n\n\nGRANT SELECT ON ora_vw_aspnet_MemUsers TO ora_aspnet_Mem_ReportAccess\n                *\nerror in string 1:\nORA-00942: table or view does not exist\n</code></pre>\n"},{"tags":["c#",".net","asp.net-mvc-3","routing"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":13096206,"title":"Trouble with MVC3 Routing","body":"<p>I am stuck on trying to create another route in Global.asax.</p>\n\n<p>I am creating dynamic pages for my website using MVC3.  When I type this URL\n/Home/GetPages/About%20Us</p>\n\n<p>It pulls the correct Controller Method and pulls the data.</p>\n\n<p>However, I am trying to modify it to this\n/About%20Us</p>\n\n<p>Below is the route I added to the Global file:</p>\n\n<pre><code>        routes.MapRoute(\n            \"Pages\", // Route name\n            \"{controller}/{action}/{PageName}\", // URL with parameters\n            new { controller = \"Home\", action = \"GetPages\", PageName = UrlParameter.Optional } // Parameter defaults\n        );\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","razor","webgrid"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13093236,"title":"Check if any http query exists, not by parameter","body":"<p>Since MVC3 WebGrid sorting default is ascending via query string, &amp;sortdir=ASC.. I would like to know how to sort initially by descending.</p>\n\n<p>I've tried below, using Request.QueryString, but in the case were there is absolutely no query string \"?..\", this doesn't see, to be working:</p>\n\n<pre><code>// Force a descending sort on page load when query string is empty\nif(Request.QueryString[grid.SortDirectionFieldName].IsEmpty()){\n    grid.SortDirection = SortDirection.Descending;\n}\n</code></pre>\n\n<p>Since I have a path like ..Admin/Review initially, and not ../Admin/Review?sort=Question6&amp;sortdir=ASC, how can I test this case? Would the above condition still return true if there isn't even a query parameter?</p>\n\n<p>I believe I need to extract a query from the raw url and if it doesn't exist, set my sort direction to descending.</p>\n"},{"tags":["asp.net-mvc-3","sitecore","sitecore6"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":552,"score":1,"question_id":7249006,"title":"Sitecore and MVC3","body":"<p>I am starting a project with Sitecore, I have looked for different possibilities. I have some experience with MVC but I don't understand why you want to combine this with Sitecore (6.4). </p>\n\n<ul>\n<li>What are the benefits? Are there any examples of the implementation of (the code of) this (not the configuration on: <a href=\"http://sdn.sitecore.net/upload/sitecore6/64/integrating%20an%20asp.net%20mvc%20web%20application%20in%20sitecore%20cms-usletter.pdf\" rel=\"nofollow\">http://sdn.sitecore.net/upload/sitecore6/64/integrating%20an%20asp.net%20mvc%20web%20application%20in%20sitecore%20cms-usletter.pdf</a>)?</li>\n<li>Or why shouldn't I use MVC with Sitecore?</li>\n</ul>\n\n<p>So when should I use Sitecore 6.4 with MVC3 and when not? And are there any (code)examples?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":8,"down_vote_count":1,"view_count":2092,"score":7,"question_id":9077764,"title":"Access key value from Web.config in Razor View-MVC3 ASP.NET","body":"<p>How do I access  a key value form web.config in my razor view.</p>\n\n<p>This is in my web.config in Web Project root level.</p>\n\n<pre><code> &lt;appSettings&gt;\n   &lt;add key=\"myKey\" value=\"MyValue\"/&gt;\n&lt;/appSettings&gt;\n</code></pre>\n\n<p>I want to have to use the key in my razor View.</p>\n\n<p>Thank you</p>\n"},{"tags":["ajax","asp.net-mvc-3","validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13093186,"title":"Displaying model state errors after ajax call on Razor views","body":"<p>I have razor view with @Html.ValidationMessageFor helpers and jquery unobtrusive validation setup.</p>\n\n<p>I want to call controller/action and to show eventual model state errors returned by action by using same validation logic that is already set in place.</p>\n\n<p>I've made some code that does it but I was wandering if there is already way to do it automatically, i.e. if I capture HTTP Bad Request as AJAX response, I want to take out model state errors from response body and plug them in to unobtrusive validation.</p>\n\n<p>I'm looking for complete recommended solution, not workarounds :)</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","asp.net-mvc-3","frameworks","entity"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13094129,"title":"Populating DB with child table data via Html Dropdownfor MVC3/ entity framework","body":"<p>I am attempting to populate my database using a create action method.  Two fields on my form are dropdownfor menus.  The dropdowns are linked to two separate child tables that will ultimately post on my main parent table, via the create method.  I am having a very difficult time getting these dropdowns to populate the correct data.</p>\n\n<p>My Model:</p>\n\n<pre><code>public class County\n{\n\n[Key]\npublic string CountyName { get; set; }\n}\n\n\npublic class Contact\n{\n[Key]\npublic int ContactId { get; set; }\npublic string ContactName { get; set; }\n\n\n public class InspectionInfo\n{\n    [Key]\n    public int InspectionId { get; set; }\n\n\n\n    //[Required]\n    public Contact Contact { get; set; }\n\n\n    //[Required]\n\n    public County County { get; set; }\n</code></pre>\n\n<p>My Controller:</p>\n\n<pre><code> //\n    // GET: /Inspection1/Create\n    public ActionResult Create()\n    {\n\n\n        var model = new InspectionInfo\n        {\n\n            Submitted = DateTime.Now,\n            //Contact = new Contact()\n        };\n\n\n        ViewBag.CountyName = new SelectList(db.Counties,\"CountyName\", \"CountyName\");\n       ViewBag.Contactname = new SelectList(db.Contacts, \"ContactName\", \"ContactName\");     \n\n        return View(model);\n    }\n\n    //\n    // POST: /Inspection1/Create\n\n    [HttpPost]\n    public ActionResult Create(InspectionInfo inspectioninfo)\n    {\n            if (ModelState.IsValid)\n        {\n            db.InspectionInfos.Add(inspectioninfo);\n            db.SaveChanges();\n            return RedirectToAction(\"Index\");\n        }\n\n        return View(inspectioninfo);\n    }\n</code></pre>\n\n<p>My View:</p>\n\n<pre><code> @using (Html.BeginForm()) {\n @Html.ValidationSummary(true)\n &lt;fieldset&gt;\n &lt;div class=\"editor-label\"&gt;\n\n\n        @Html.LabelFor(model =&gt; model.County )\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-field\"&gt;\n        @Html.DropDownListFor(m=&gt;m.County.CountyName,(IEnumerable&lt;SelectListItem&gt;)ViewBag.CountyName)\n        @Html.ValidationMessageFor(model =&gt; model.County)\n    &lt;/div&gt;\n\n\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Contact)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n\n @Html.DropDownListFor(m=&gt;m.Contact.ContactName,  (IEnumerable&lt;SelectListItem&gt;)ViewBag.ContactName)\n        @Html.ValidationMessageFor(model =&gt; model.Contact)\n    &lt;/div&gt;\n</code></pre>\n\n<p>Currently, I continue to recieve a \"1\" for ContactName when checking the fields value during break.  </p>\n\n<p>Also, I recieve an exception for CountyName:</p>\n\n<p>{\"Violation of PRIMARY KEY constraint 'PK_dbo.Counties'. Cannot insert duplicate key in object 'dbo.Counties'.\\r\\nThe statement has been terminated.\"}</p>\n\n<p>ANY help here would be greatly appreciated.  </p>\n"},{"tags":["asp.net-mvc-3","sql-server-2008-r2","webserver"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13093986,"title":"Cannot find Rules Summary section in Server Manager","body":"<p>I have some troubles to begin learning ASP.NET MVC 3 from book. As writen in book of \"Sanderson S. Freeman A. -  Pro ASP.NET MVC 3 Framework Third Edition\" at page 23 :</p>\n\n<blockquote>\n  <p>The first step is to enable the Web Server (IIS) role on Windows\n  Server. Open the Server Manager tool, and select Add Roles from the\n  Rules Summary section...</p>\n</blockquote>\n\n<p>I tried different things to find that section, but couldnt. What is wrong ? or i need to install something ?</p>\n"},{"tags":["asp.net-mvc-3","datatables","filtering"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13093920,"title":"Column filtering using select menus(DataTables)","body":"<p>Good day!</p>\n\n<p>I`m using MVC3 and jquery DataTables plugin. The point is to make column filtering with select menus(further multi-select).</p>\n\n<p>Here is my JS, which is pretty similar to this <a href=\"http://datatables.net/release-datatables/examples/api/multi_filter_select.html\" rel=\"nofollow\">DataTables example</a>:</p>\n\n<pre><code> (function ($) {\n    $.fn.dataTableExt.oApi.fnGetColumnData = function (oSettings, iColumn, bUnique, bFiltered, bIgnoreEmpty) {\n        // check that we have a column id\n        if (typeof iColumn == \"undefined\") return new Array();\n\n        // by default we only want unique data\n        if (typeof bUnique == \"undefined\") bUnique = true;\n\n        // by default we do want to only look at filtered data\n        if (typeof bFiltered == \"undefined\") bFiltered = true;\n\n        // by default we do not want to include empty values\n        if (typeof bIgnoreEmpty == \"undefined\") bIgnoreEmpty = true;\n\n        // list of rows which we're going to loop through\n        var aiRows;\n\n        // use only filtered rows\n        if (bFiltered == true) aiRows = oSettings.aiDisplay;\n        // use all rows\n        else aiRows = oSettings.aiDisplayMaster; // all row numbers\n\n        // set up data array   \n        var asResultData = new Array();\n\n        for (var i = 0, c = aiRows.length; i &lt; c; i++) {\n            iRow = aiRows[i];\n            var aData = this.fnGetData(iRow);\n            var sValue = aData[iColumn];\n\n            // ignore empty values?\n            if (bIgnoreEmpty == true &amp;&amp; sValue.length == 0) continue;\n\n            // ignore unique values?\n            else if (bUnique == true &amp;&amp; jQuery.inArray(sValue, asResultData) &gt; -1) continue;\n\n            // else push the value onto the result data array\n            else asResultData.push(sValue);\n        }\n\n        return asResultData;\n    } \n} (jQuery));\n\nfunction fnCreateSelect(aData) {\n    var r = '&lt;select&gt;&lt;option value=\"\"&gt;&lt;/option&gt;', i, iLen = aData.length;\n    for (i = 0; i &lt; iLen; i++) {\n        r += '&lt;option value=\"' + aData[i] + '\"&gt;' + aData[i] + '&lt;/option&gt;';\n    }\n    return r + '&lt;/select&gt;';\n}\n$(document).ready(function () {\n    var oTable = $('#dataTable').dataTable({\n        \"sDom\": 'W&lt;\"clear\"&gt;lfrtip',\n        \"sAjaxSource\": '@Url.Action(\"ResourcesWorkflowData\", \"LineManager\")',\n        \"aoColumns\": [\n  { \"sTitle\": \"User\", \"mData\": \"User\" },\n  { \"sTitle\": \"Region\", \"mData\": \"Region\" },\n    ]\n });\n    /* Add a select menu for each TH element in the table footer */\n    $(\"tfoot th\").each(function (i) {\n        this.innerHTML = fnCreateSelect(oTable.fnGetColumnData(i));\n        $('select', this).change(function () {\n            oTable.fnFilter($(this).val(), i);\n        });\n    });\n});\n</code></pre>\n\n<p>The problem is in my aaData. If i pass an array of arrays like this:</p>\n\n<pre><code>  \"aaData\": [\n  ['User1', 'Central'],\n  ['User2', 'Central'],\n]\n</code></pre>\n\n<p>Everything goes fine, but if i make array of objects like this:</p>\n\n<pre><code>       \"aaData\": [\n  {\n      \"User\": \"User1\",\n      \"Region\": \"Central\",\n  },\n  {\n      \"User\": \"User2\",\n      \"Region\": \"Central\",\n  }\n]\n</code></pre>\n\n<p>I get \"Cannot read property 'length' of undefined \" error in this line of js:</p>\n\n<pre><code>       // ignore empty values?\n            if (bIgnoreEmpty == true &amp;&amp; sValue.length == 0) continue;\n</code></pre>\n\n<p>Why is this happening? I was trying to use some Add Ons like <a href=\"http://jquery-datatables-column-filter.googlecode.com/svn/trunk/index.html\" rel=\"nofollow\">ColumnFilter</a> or <a href=\"http://datatables.net/extras/thirdparty/ColumnFilterWidgets/DataTables/extras/ColumnFilterWidgets/\" rel=\"nofollow\">ColumnFilterWidgets</a> but in both cases i got the some problem. Any suggestions please?</p>\n"},{"tags":["c#","asp.net-mvc-3","dependency-injection","ninject","ninject.web.mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13082083,"title":"Choose injection constructor based on setting in .config file","body":"<p>I have a MCV3 app that uses Ninject as a DI container.</p>\n\n<p>I have one object that has 2 constructors (each with 1 parameter)</p>\n\n<pre><code>public MyObject(IDependencyOne dep){}\npublic MyObject(IDependencyTwo dep){}\n</code></pre>\n\n<p>How can I make Ninject choose one of the two constructors based on some boolean value read from web.config file at runtime? </p>\n"},{"tags":["asp.net-mvc","json","asp.net-mvc-3","rest","odata"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13093353,"title":".NET Mvc 3 to return OData JSON result","body":"<p>I am trying to get ASP.NET MVC3 to return an array as an OData result. </p>\n\n<p>I am not planning and do not want to use WebAPI in MVC4, because it removes the abstractions that we already have in place. Namely, we do not expose our underlying table schema/structure to the application layer - ever.</p>\n\n<p>So I intend to manually parse the OData query myself, which is not a big deal.</p>\n\n<p>However, how should I return the result set in a manner consistent with the OData (JSON) formats. I'm looking to find out if some prior work exists.</p>\n"},{"tags":["asp.net-mvc-3","table","checkbox"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13093192,"title":"Getting iterator of MVC IEnumerable EditorFor","body":"<p>I am using MVC to display a table of checkbox options.  I know that I can call EditorFor() on a collection of objects and it will produce a list of them by looping through the collection and outputting HTML based on each item's editor template.  My question is, is there a way of accessing the iterator of this loop within the editor template, so that I can start a new row of the table every, say, 3 columns?</p>\n"},{"tags":["c#","asp.net-mvc-3",".net-4.0"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13093273,"title":"How to use the same DB for authentication and data in MVC3?","body":"<p>Using MVC3, VS 2010 and SQL Express, I have been successful getting through a few tutorials.  What I'd like to do now is build my own app which will be deployed.  Using Code First, I'd like to have my user authentication and data reside in the same database.  From what I've read, it is possible, (acceptable?) but so far I have not found any info on how to get my models and membership to map to the same database - I would like to specify a different DB than aspnet.mdf. </p>\n"},{"tags":["c#","asp.net-mvc-3","iis7"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13093139,"title":"Site-Wide global variables","body":"<p>I am curious as to what is the best way to create a site-wide global variable in MVC3. </p>\n\n<p>That is, a variable which is shared among multiple requests/visitors.</p>\n\n<p>I'm guessing, that if this is possible the variable would be lost as soon as the site was recycled.. are there any other pros or cons of doing this?</p>\n\n<p>The best thing to do would offcourse be to store everything in a database, but this is more of a is it possible/experiment kind of question ;)</p>\n"},{"tags":["c#","asp.net","mvc","asp.net-mvc-3"],"answer_count":5,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":13964,"score":8,"question_id":5972536,"title":"Html.TextBoxFor formatting or Html.EditorFor htmlAttributes?","body":"<p>I am kind of stumped because, I want to format the value and add a html attribute for css class. </p>\n\n<p>If I use <code>@Html.TextBoxFor(m =&gt; m.DateModified)</code>\n- I can add html attribute but formatting does not work via DisplayFormat attribute on the member.</p>\n\n<p>If I use  <code>@Html.EditorFor(m =&gt; m.DateModified)</code>\n- Formatting works but I cannot add html attribute</p>\n\n<p>If I use <code>@Html.TextBox(\"DateModified\", Model.DateModified, ...)</code>\n- I get null reference exception when Model is null when the form is in add mode</p>\n\n<p>What is the best way to achieve this?</p>\n"},{"tags":["c#","asp.net-mvc-3","viewmodel","mschart"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":76,"score":3,"question_id":13089989,"title":"ASP MVC 3 - Chart from ViewModel","body":"<p>Using ASP MVC 3, I have created a viewmodel that I pass to a View in order to create a number of tables to display the data. However, I would also like to present some of the data in the form of chart/graph images using the Chart helper.</p>\n\n<p>Is it possible to reuse the existing viewmodel for these Charts, or will I need to go through another MVC cycle just to create this Chart? I'm trying to prevent a return trip to the database just to get the same information that I already have on-hand in the View. The \"database\" that I'm hitting is actually an API that requires a expensive log-in, fetch, log-out cycle anytime I need to get this information.</p>\n\n<p>It is not the \"end of the world\" if this is not possible, but it feels like there should be some slick way to make this happen that I'm just missing.</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","entity-framework-4","nuget"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":876,"score":7,"question_id":10219864,"title":"EF Code First: How do I see 'EntityValidationErrors' property from the nuget package console?","body":"<p>I'm at a loss for this:</p>\n\n<p>I've defined my classes for a entity framework (4.1.3) code first approach. Everything was fine (I was creating the tables etc.) until I started to Seed.</p>\n\n<p>Now when I do the </p>\n\n<pre><code>Add-Migration \"remigrate\" ; Update-Database;\n</code></pre>\n\n<p>I get an error on the package console \"Validation failed for one or more entities. See 'EntityValidationErrors' property for more details.\"</p>\n\n<p>I have a breakpoint in my Seed() method but because I'm running this on the console when the project is not running, I'm clueless as to how to get to the details (PS - I've seen the thread <a href=\"http://stackoverflow.com/questions/5400530/validation-failed-for-one-or-more-entities-while-saving-changes-to-sql-server-da\">Validation failed for one or more entities while saving changes to SQL Server Database</a> which shows how I can see the property.)</p>\n\n<p>I know that my Seed() method has a problem because if I put a return right after the method call, the error goes away. So how do I set my breakpoint so I can see what the validation error is? Kinda lost. Or is there some other way to trace it in the nuget console??</p>\n"},{"tags":["javascript",".net","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13092389,"title":"Passing server side data to JavaScript via Razor","body":"<p>I have an Asp.Net MVC web application that displays 2 select inputs side by side.  The first select is populated via Razor and drives the second so when the user selects an item an Ajax call is made to populate the second drop down.  </p>\n\n<p>I need to implement a feature that will allow the page to accept an id for the second drop-down on the URL and when the page is loaded populate both selects and select the appropriate values in each.</p>\n\n<p>For example, if the drop-downs represented countries and states, the url could contain the unique id for a particular state.  The controller would then look up the associated country and pass both the country and state ids back to the page.  When this happens, the page would automatically select that country in the first select, then load the appropriate list of states in the other and select the chosen state.</p>\n\n<p>Currently, my controller returns the two ids to the page in the view model object and there is inline JavaScript that assigns them to variables.  Then some JavaScript checks if the ids are not null and takes the appropriate action to select and load the data in the select inputs.  I am not a big fan of coupling my JavaScript to my view in this way but I can't think of a better solution.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["json","asp.net-mvc-3","jqgrid"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13087214,"title":"i want a jqGrid class that can return json by mvc","body":"<p>Using jqGrid in mvc razor</p>\n\n<p>I want a class that can go for jqGrid json format and bind the grid.</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13091817,"title":"How to Access PartialView Result in Master Page in mvc3 using razor","body":"<p>I have a method in controller like this  </p>\n\n<pre><code>public PartialViewResult CabinSearch()\n{\n    return PartialView();\n} \n</code></pre>\n\n<p>and I have created a view to this method. </p>\n\n<p>I need to access this partial view to master page  </p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13091716,"title":"HTTP POST, GET in MVC?","body":"<p>In MVC3, i created one register form. I created one model,,controller and view. This is my code:</p>\n\n<pre><code>   [HttpGet]\n    public ActionResult Insert()\n    {\n        Models.Employees objEmpl = new Models.Employees();\n        return View(objEmpl);\n    }\n\n    [HttpPost]\n    [AcceptVerbs(\"Post\")]\n    public ActionResult Insert(Models.Employees objs)\n    {\n        var v = new Models.test().InsertDl(objs);\n        return View();\n    }\n  The above is my controller\n\n   @model MvcVideo.Models.Employees\n @{\n   ViewBag.Title = \"Insert\";\n    Layout = \"~/Views/Shared/VideoLayout.cshtml\";\n  }\n&lt;h2&gt;Insert&lt;/h2&gt;\n @using(Html.BeginForm(\"Insert\",\"Home\",FormMethod.Post ))\n {\n  &lt;table&gt;\n &lt;tr&gt;\n   &lt;td&gt;\n      Employee Name\n   &lt;/td&gt;\n   &lt;td&gt;\n     @Html.TextBox(\"Ename\",@Model.Enames)\n   &lt;/td&gt;\n &lt;/tr&gt;\n &lt;tr&gt;\n   &lt;td&gt;\n     Department Id\n   &lt;/td&gt;\n   &lt;td&gt;\n     @Html.TextBox(\"Departmentid\",@Model.DepartId )\n   &lt;/td&gt;\n &lt;/tr&gt;\n &lt;tr&gt;\n   &lt;td&gt;\n      Email Id\n   &lt;/td&gt;\n   &lt;td&gt;\n      @Html.TextBox(\"Emailid\",@Model.EmailIds) \n   &lt;/td&gt;\n &lt;/tr&gt;\n  &lt;tr&gt;\n    &lt;td&gt;\n      Address\n    &lt;/td&gt;\n    &lt;td&gt;\n       @Html.TextBox(\"Address\",@Model.Adress)\n    &lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n    &lt;td colspan=\"2\" style=\"text-align:center;\" &gt;          \n    &lt;button  title =\"Ok\"   value=\"OK\"&gt;&lt;/button&gt;   \n    &lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>} </p>\n\n<p>But the <code>objs</code> object at <code>public actionresult Insert(models.Empoyees objs)</code> action method parameter is showing null values. Imean <code>Ename=Null</code>, <code>Department=0</code>, <code>Emailid=Null</code> and <code>Address=null</code></p>\n"},{"tags":["asp.net-mvc-3","url","seo","controllers"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13075395,"title":"MVC3 links SEO - how to make calls from one controller to other controller","body":"<p>I have one problem, I am not sure how to explain but I will try.\nI followed this: <a href=\"http://www.deliveron.com/blog/post/SEO-Friendly-Routes-with-ASPnet-MVC.aspx\" rel=\"nofollow\">http://www.deliveron.com/blog/post/SEO-Friendly-Routes-with-ASPnet-MVC.aspx</a>\nAnd I was able to achieve what they describe. \nBut if I have a page where i wish to call action from other controller, it doesn't work.\nIt doens't show the link in this way: \"this-is-my-link\" in the URL.</p>\n\n<p>I don't know what do I do wrong?</p>\n\n<p>in Global.asax</p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n        routes.MapRoute(\n            \"Default\", // Route name\n            \"{controller}/{action}/{id}\", // URL with parameters\n            new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n        );\n\n        routes.MapRoute(\n            \"Default2\",\n            \"{controller}/{action}/{id}/{pageTitle}\",\n            new\n                {\n                    controller = \"Home\",\n                    action = \"Index\",\n                    id = UrlParameter.Optional,\n                    pageTitle = UrlParameter.Optional\n                }\n            );\n\n    }\n</code></pre>\n\n<p>Views/Help/FAQ</p>\n\n<pre><code>@Html.ActionLink(FaqStrings.ContactUs, \"ContactUs\", \"Home\", new { id = 1, pageTitle = \"link text\".ToSeoUrl() })\n</code></pre>\n\n<p>It says that it can't resolve the ContactUs. Instead of the actions from HomeController, it sees the actions of the HelpController.</p>\n\n<p>In HomeController</p>\n\n<pre><code>[AllowAnonymous]\n    public ActionResult ContactUs()\n    {\n        var model = new ViewModelContactUs\n                        {\n                            Resultmessage = string.Empty,\n                            Youremail = string.Empty,\n                            Yourmessage = string.Empty,\n                            Yourname = string.Empty\n                        };\n        return View(model);\n    }\n\n    [AllowAnonymous]\n    [HttpPost]\n    public ActionResult ContactUs(ViewModelContactUs model)\n    {\n        Log.DebugFormat(\"HomeController-ContactUs()\");\n</code></pre>\n\n<p>........</p>\n\n<pre><code>        var model2 = new ViewModelContactUs\n                         {\n                             ......\n                         };\n\n        ModelState.Clear();\n        return View(model2);\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13091197,"title":"how to set serializable attribute on my entities?","body":"<p>my site is on a web farm for this i used my session in mode=\"StateServer\" in this mode objects must have serialize able attribute ,\ni used ado.net entity data model it works fine and i have no problems with these.</p>\n\n<p>i update my project to vs 2012 but my ef stay on 4.1 because my host don not support  upper version of  ef, when i deleted my entity and create it again it's structure changed you can look at this <a href=\"http://stackoverflow.com/questions/13029667/why-ado-net-entity-data-model-changed-in-vs-2012\">my post</a> but in new model the serialize able attribute is unavailable and do not created automatically by ef i look at codes and add it by myself but if i recreate my model all of them will be delete how can i handle this problem?</p>\n\n<p>thanks guys</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":7,"favorite_count":0,"up_vote_count":12,"down_vote_count":1,"view_count":3861,"score":11,"question_id":9384421,"title":"Installed MVC 4 Beta, now my MVC 3 projects throw an error when I rebuild all","body":"<p>I just installed MVC 4 Beta, and now my MVC 3 projects (that I haven't converted yet to 4) are throwing an error when I rebuild all:</p>\n\n<p><code>Error  18  [A]System.Web.WebPages.Razor.Configuration.HostSection cannot be cast to [B]System.Web.WebPages.Razor.Configuration.HostSection. Type A originates from 'System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' in the context 'Default' at location 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_MSIL\\System.Web.WebPages.Razor\\v4.0_1.0.0.0__31bf3856ad364e35\\System.Web.WebPages.Razor.dll'. Type B originates from 'System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' in the context 'Default' at location 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_MSIL\\System.Web.WebPages.Razor\\v4.0_2.0.0.0__31bf3856ad364e35\\System.Web.WebPages.Razor.dll'.</code></p>\n\n<p>Has anyone come across this yet? Thanks!</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":514,"score":0,"question_id":5819528,"title":"I am having some problems here-Date Picker and all javascript including client validation not working in a Dynamically loaded Partial View","body":"<p>I am working with ASP.NET MVC 3 (Razor)\nI loaded a partial view by holds a form by clicking on Ajax Link that is located on my view as follows</p>\n\n<p>@Ajax.ActionLink(\"Students List\", \"Create\", \"Student\", new AjaxOptions {OnSuccess = \"updatePlaceholder\", UpdateTargetId = \"holder\" })</p>\n\n<p>The partial view loads properly, but I discovered that the Telerek DatePicker isn't showing when I click on the button to bring it down\nand also client side validations arent working also. I followed the approch described here but it still insn't working\n<a href=\"http://www.telerik.com/help/aspnet-mvc/using-with-partial-views-loaded-via-ajax.html\" rel=\"nofollow\">http://www.telerik.com/help/aspnet-mvc/using-with-partial-views-loaded-via-ajax.html</a>\n My code is below</p>\n\n<p>HERE IS MY VIEW</p>\n\n<p>\n@Ajax.ActionLink(\"Students List\", \"Create\", \"Student\", new AjaxOptions {OnSuccess = \"updatePlaceholder\", UpdateTargetId = \"holder\" })</p>\n\n\n    function updatePlaceholder(context) {\n        // the HTML output of the partial view\n        var html = context.get_data();\n\n        // the DOM element representing the placeholder\n        var placeholder = context.get_updateTarget();\n\n        // use jQuery to update the placeholder. It will execute any JavaScript statements\n        $(placeholder).html(html);\n\n        // return false to prevent the automatic update of the placeholder\n        return false;\n    }\n\n\n<p>HERE IS MY PARTIALVIEW</p>\n\n<p>@model MyUniversity.Models.Student</p>\n\n<p>@using (Ajax.BeginForm(new AjaxOptions {UpdateTargetId=\"holder\"}))\n{\n    @Html.ValidationSummary(true)\n    \n        Student\n  @Html.Telerik().DateTimePicker().Name(\"EnrollmentDate\").Value(DateTime.Now.ToString())\n            @Html.ValidationMessageFor(model => model.EnrollmentDate)\n        </p>\n\n<pre><code>    &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Create\" /&gt;\n    &lt;/p&gt;\n&lt;/fieldset&gt;\n</code></pre>\n\n<p>}</p>\n\n\n    @Html.ActionLink(\"Back to List\", \"Index\")\n\n\n<p>Here is my _Layout.cshtml with the registered scripts</p>\n\n<p>\n\n    @ViewBag.Title</p>\n\n<pre><code>&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;link href=\"@Url.Content(\"~/Content/Site.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.4.4.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftAjax.debug.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftMvcAjax.debug.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n@(Html.Telerik().StyleSheetRegistrar().DefaultGroup(group =&gt; group.Add(\"telerik.common.css\").Add(\"telerik.telerik.css\").Combined(true).Compress(true)))\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.unobtrusive-ajax.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>@(Html.Telerik().ScriptRegistrar().Globalization(true).DefaultGroup(group => group.Combined(true).Compress(true)))\n    \n</p>\n\n<p></p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":47,"score":3,"question_id":13075604,"title":"ASP.Net MVC3 Routing Issue","body":"<p>I am working on a deal website and have defined the following route in the global.asax.</p>\n\n<pre><code>routes.MapRoute(\n    \"AboutFooter\",\n    \"about-bicker-shop\",\n    new { controller = \"Footer\", action = \"About\" }\n);\n\nroutes.MapRoute(\n    \"ContactFooter\",\n    \"contact-bickershop\",\n    new { controller = \"Footer\", action = \"Contact\" }\n);\n\nroutes.MapRoute(\n    \"PrivacyPolicyFooter\",\n    \"privacy-policy\",\n    new { controller = \"Footer\", action = \"PrivacyPolicy\" }\n);\n\nroutes.MapRoute(\n    \"TermsAndConditionsFooter\",\n    \"terms-and-conditions\",\n    new { controller = \"Footer\", action = \"TermsAndConditions\" }\n);\n\nroutes.MapRoute(\n    \"SiteMapFooter\",\n    \"sitemap\",\n    new { controller = \"Footer\", action = \"SiteMap\" }\n);\n\nroutes.MapRoute(\n    \"FAQFooter\",\n    \"faq\",\n    new { controller = \"Footer\", action = \"FAQ\" }\n);\n\nroutes.MapRoute(\n    \"UnsubscribeFooter\",\n    \"unsubscribe\",\n    new { controller = \"Footer\", action = \"Unsubscribe\" }\n);\n\nroutes.MapRoute(\n    \"GetDealsByCity\",\n    \"daily-bickers/{cityName}\",\n    new { controller = \"Home\", action = \"Home\" }\n);\n\nroutes.MapRoute(\n    \"GetDealsbyCategory\",\n    \"daily-bickers/{cityname}/{category}\",\n    new { controller = \"Home\", action = \"GetDealsByCategory\" }\n);\n\nroutes.MapRoute(\n    \"GetDealDetails\",\n    \"{cityName}/{dealName}\",\n    new { controller = \"Home\", action = \"GetDealsByDealName\" }\n);\n\nroutes.MapRoute(\n    \"DealCheckout\",\n    \"{cityName}/{dealName}/checkout\",\n    new { controller = \"Home\", action = \"CheckoutDealByDealName\" }\n);\n\nroutes.MapRoute(\n    \"Default\", // Route name\n    \"{controller}/{action}/{id}\", // URL with parameters\n    new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n);\n</code></pre>\n\n<p>It works fine till the time I am viewing the details of the deal but I am getting an error when I click on the buy button to buy the deal. </p>\n\n<p>On further research I found that on clicking the buy button, the code is invoking the <code>GetDealsByDealName</code> action and not the action <code>CheckoutDealByDealName</code>. Please suggest me the solution.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","entity-framework-5","asp.net-mvc-validation"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":133,"score":1,"question_id":13073756,"title":"MVC Validation Fundamentals (with Entity Framework)","body":"<p>MVC Validation Fundamentals (with Entity Framework)</p>\n\n<p>Scenario:</p>\n\n<p>I have a model class as below (autogenerated via Entity Framework EF.x DbContext Generator).</p>\n\n<p>(There is no view model at the moment).</p>\n\n<pre><code>public partial class Activity\n{\n    public int Id { get; set; }\n\n    public byte Progress { get; set; }\n    public decimal ValueInContractCurrency { get; set; }\n    public System.DateTime ForecastStart { get; set; }\n    public System.DateTime ForecastEnd { get; set; }\n\n    public int DepartmentId { get; set; }   \n    public int OwnerId { get; set; }\n    public int StageId { get; set; }\n    public int StatusId { get; set; }\n\n    public virtual Department Department { get; set; }\n    public virtual Owner Owner { get; set; }\n    public virtual Stage Stage { get; set; }\n    public virtual Status Status { get; set; }\n}\n</code></pre>\n\n<p>When I submit a blank form on the strongly-typed view, I get these validation messages:</p>\n\n<p>The Progress field is required.</p>\n\n<p>The ValueInContractCurrency field is required.</p>\n\n<p>The ForecastStart field is required.</p>\n\n<p>The ForecastEnd field is required.</p>\n\n<p>i.e. all the fields in the db table.</p>\n\n<p>If I fill these in, and submit again, then the controller gets called. The controller then returns back to the view page due to IsValid being false.</p>\n\n<p>The screen is then redisplayed with these validation messages:</p>\n\n<p>The StageId field is required.</p>\n\n<p>The DepartmentId field is required.</p>\n\n<p>The StatusId field is required.</p>\n\n<p>The OwnerId field is required.</p>\n\n<p>i.e. all the foreign key fields in the db table (these are also all select boxes).</p>\n\n<p>If I fill these in, the form then submits succesfully and is saved to the db.</p>\n\n<p>Questions:</p>\n\n<ol>\n<li><p>Where is the validation coming from, given that I have not used any [Required] attributes? Is this something to do with entity framework?</p></li>\n<li><p>Why is the form not validating everything right away client-side, what's different about foreign keys (or select boxes) that they are only checked by IsValid() even though they are empty and therefore clearly invalid?</p></li>\n<li><p>How do you make everything get validated in one step (for empty fields), so the user does not have to submit the form twice and all validation messages are shown at once? Do you have to turn off client side validation?</p></li>\n</ol>\n\n<p>(I tried adding [Required] attributes to the foreign key fields, but that didn't seem to make any difference (presumably they only affect IsValid). I also tried calling Html.EnableClientValidation() but that didn't make any difference either).</p>\n\n<p>4..Lastly, I've seen people using [MetadataType[MetadataType(typeof(...)]] for validation. Why would you do that if you have a viewmodel, or is it only if you don't?</p>\n\n<p>Obviously I'm missing some fundamentals here, so in addition if anyone knows of a detailed tutorial on how exactly the MVC validation process works step-by-step including javascript/controller calls, rather than just another essay on attributes, then I could do with a link to that too :c)</p>\n\n<hr>\n\n<p>More info for Mystere Man:</p>\n\n<p>Solution setup as follows:</p>\n\n<p>.NET4</p>\n\n<p>MVC3</p>\n\n<p>EF5 </p>\n\n<p>EF5.x Db Context Generator </p>\n\n<p>\"Add Code Generation Item\" used on edmx design surface to associate EF.x Db Context Generator files (.tt files)</p>\n\n<p>Controller looks like this:</p>\n\n<pre><code>    // GET: /Activities/Create\n    public ActionResult Create()\n    {\n        ViewBag.DepartmentId = new SelectList(db.Departments, \"Id\", \"Name\");\n        ViewBag.OwnerId = new SelectList(db.Owners, \"Id\", \"ShortName\");\n        ViewBag.ContractId = new SelectList(db.Contracts, \"Id\", \"Number\");\n        ViewBag.StageId = new SelectList(new List&lt;string&gt;());\n        ViewBag.StatusId = new SelectList(db.Status.Where(s =&gt; s.IsDefaultForNewActivity == true), \"Id\", \"Name\");\n        return View();\n    } \n\n\n    // POST: /Activities/Create\n    [HttpPost]\n    public ActionResult Create(Activity activity)\n    {\n        if (ModelState.IsValid)\n        {\n            db.Activities.Add(activity);\n            db.SaveChanges();\n            return RedirectToAction(\"Index\");  \n        }\n\n        ViewBag.DepartmentId = new SelectList(db.Departments, \"Id\", \"Name\");\n        ViewBag.OwnerId = new SelectList(db.Owners, \"Id\", \"ShortName\");\n        ViewBag.ContractId = new SelectList(db.Contracts, \"Id\", \"Number\");\n        ViewBag.StageId = new SelectList(db.Stages, \"Id\", \"Number\");\n        ViewBag.StatusId = new SelectList(db.Status, \"Id\", \"Name\");\n        return View(activity);\n    }\n</code></pre>\n\n<p>View is like this:</p>\n\n<pre><code>&lt;!-- this refers to  the EF.x DB Context class shown at the top of this post --&gt;\n@model RDMS.Activity  \n\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n\n@using (Html.BeginForm()) {\n    @Html.ValidationSummary(true)\n    &lt;fieldset&gt;\n        &lt;legend&gt;Activity&lt;/legend&gt;\n\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.StageId, \"Stage\")\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.DropDownList(\"StageId\", String.Empty)\n            @Html.ValidationMessageFor(model =&gt; model.StageId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.Progress)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.Progress)\n            @Html.ValidationMessageFor(model =&gt; model.Progress)\n        &lt;/div&gt;\n\n    &lt;!-- ETC...--&gt;\n\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Create\" /&gt;\n        &lt;/p&gt;\n    &lt;/fieldset&gt;\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","structuremap","aspectmap"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":99,"score":1,"question_id":11868242,"title":"Add Aspects to ASP.NET MVC controller using AspectMap","body":"<p>We're looking at using an AOP framework for handling things like logging, tracing, and exception handling. I've built a prototype using PostSharp and now I'm trying to build the same functionality using AspectMap.</p>\n\n<p>In a nutshell, I have an ASP.NET MVC 3 application and I want an aspect that I can easily attach to my controller methods that shows the entry, exit, execution time, and argument values. My PoC is the basic MVC 3 Internet Application template (File > New > Project > Web > ASP.NET MVC 3 Web Application > Internet). What I've done so far...</p>\n\n<p>Created an AspectsRegistry</p>\n\n<pre><code>public class PoCRegistry : AspectsRegistry\n{\n    public PoCRegistry()\n    {\n        ForAspect&lt;ProfileAttribute&gt;().HandleWith&lt;ProfileHandler&gt;();\n    }\n}\n</code></pre>\n\n<p>Created a StructureMapControllerFactory</p>\n\n<pre><code>public class StuctureMapControllerFactory : DefaultControllerFactory\n{\n    protected override IController GetControllerInstance( RequestContext requestContext, Type controllerType )\n    {\n        if( controllerType == null ) return null;\n\n        try\n        {\n            return ObjectFactory.GetInstance( controllerType ) as Controller;\n        }\n        catch( StructureMapException )\n        {\n            Debug.WriteLine( ObjectFactory.WhatDoIHave() );\n            throw;\n        }\n    }\n}\n</code></pre>\n\n<p>Registered everything in Application_Start</p>\n\n<pre><code>protected void Application_Start()\n{\n    AreaRegistration.RegisterAllAreas();\n\n    RegisterGlobalFilters( GlobalFilters.Filters );\n    RegisterRoutes( RouteTable.Routes );\n\n    ObjectFactory.Initialize( ie =&gt; ie.AddRegistry( new PoCRegistry() ) );\n    ControllerBuilder.Current.SetControllerFactory( new StuctureMapControllerFactory() );\n}\n</code></pre>\n\n<p>At this point the application works, and I can see it's using my StructureMapControllerFactory to build the controller (debugger steps into that code). The problem is that I can't figure out where or how to \"enrich\" the controller that is generated. In the <a href=\"http://www.chrissurfleet.co.uk/post/2012/05/29/AspectMap-%E2%80%93-Aspect-Oriented-Programming-for-Complete-Beginners.aspx\" rel=\"nofollow\">tutorial</a> it says I need to use something like the following:</p>\n\n<pre><code>For&lt;ICaseController&gt;()\n    .Use&lt;CaseController&gt;()\n    .EnrichWith( AddAspectsTo&lt;CaseController&gt; );\n</code></pre>\n\n<p>But in the tutorial that goes in the AspectRegistry, which doesn't seem like the right place in this situation because the registry isn't responsible for resolving the controller request, the controller factory is. Unfortunately the GetInstance() method in the controller factory returns an <code>object</code> and the EnrichWith() method needs a <code>SmartInstance</code>.</p>\n\n<p>At this point I'm stuck. Any hints, pointers, or assistance would be appreciated.</p>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-validate"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13078600,"title":"Unobtrusive validation - how to find a dependent property for comparison","body":"<p>working on an MVC 3 app.  I have finished my custom server side code, now working on the client side.  I want to tie it in to the existing unobtrusive, so I am using the addMethod.  The pseudo goes something like, \" If the radioValue is true, then the counterValue must be greater than zero.\"  The problem is, my function stops running at the 3rd line, when trying to get the radioValue.  It throws a generic exception \"Check you method\".  Please advise.  Oh, and this is my first time doing this, so if you see anything, please let me know.  Thanks!</p>\n\n<pre><code>$.validator.addMethod(\"requiredifyes\", function (val, elem, param) {\nvar dependantProperty = param;\nvar radioValue = document.getElementByName(dependantProperty).value;\nvar counterValue = val;\n\nif (radioValue == true) {\n    if (counterValue == 0) {\n        return false;\n    }\n}\n    return true;\n});\n\n$.validator.unobtrusive.adapters.addSingleVal(\"requiredifyes\", \"othervalue\", \"requiredifyes\");\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","binding"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13085914,"title":"Binding the Model variable to an Action Method in ASP.NET MVC3","body":"<p>I have a controller <code>HomeController</code> with the following <code>action method</code>:</p>\n\n<pre><code>[HttpPost] \npublic ActionResult DisplayData(MyViewModel myViewModel)\n{\n   // Do something with myViewModel           \n}\n</code></pre>\n\n<p>The <code>ViewModel</code>:</p>\n\n<pre><code>public class MyViewModel\n{\n    public string Name { get; set; }\n    public string Surname { get; set; }\n    public bool IsPeriod { get; set; }\n}\n</code></pre>\n\n<p>And the following <code>View</code></p>\n\n<pre><code>@model AppName.ViewModels.MyViewModel\n\n@{ Html.RenderPartial(\"MyPartialView\", Model);  }\n\n&lt;img src=\"@Url.Action(\"DisplayData\", \"Home\", new { myViewModel = Model })\" alt=\"Image\" /&gt;\n</code></pre>\n\n<p>I use the Url.Action how it is described <a href=\"http://www.codeproject.com/Tips/198477/Calling-a-MVC-Controller-and-Action-Method-using-H\" rel=\"nofollow\">here</a> but what I get in the DisplayData action method is null. In the source code I got:</p>\n\n<pre><code>&lt;img src=\"/Home/DisplayData?filters=AppName.ViewModels.MyViewModel\" alt=\"Image\" /&gt;\n</code></pre>\n\n<p>so it is passing actually the type instead of the values.</p>\n\n<p>The <code>ViewModel</code> instead is correctly passed to the partial view. What am I doing wrong?</p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":24,"score":3,"question_id":13088941,"title":"How to refer script in sitemaster","body":"<p>I know in mvc the site master page shares resource(html elements) with aspx file.Like this  it is possible to refer the script file in site master that will share with aspx?If so how to do that?</p>\n\n<p>In other word am using script file in all my aspx.\n<code>&lt;script src=\"../../../Src/Scripts/jquery.ui.widget.js\" type=\"text/javascript\"&gt;&lt;/script&gt;</code></p>\n\n<p>Whether it is possible to refer in  my sitemaster page that will make that script reference in all my aspx?(Excluding my apsx page)</p>\n\n<p>thanks in Advance</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":11304422,"title":"DropDownList filling in chain","body":"<p>I have a form with some dropdown lists similar to continent, country, city.\nThis is the first dropdown list and it represents a Customer. This is filled from a database.</p>\n\n<pre><code>@Html.DropDownListFor(model =&gt; model.CustomerID, \n                    new SelectList(Model.GetCustomers(), \"ID\", \"FullName\"), \n                                  new { onchange = \"this.form.submit();\" })\n</code></pre>\n\n<p>Here is the second ddl. This one represents all the receipts from this customer.</p>\n\n<pre><code>@Html.DropDownListFor(model =&gt; model.ReceiptID, \n                 new SelectList(Model.GetReceipts(), \"ID\", \"ReceiptNumber\"), \n                                  new { onchange = \"this.form.submit();\" })\n</code></pre>\n\n<p>Then i have a list that displays all the products that were on the receipt.</p>\n\n<pre><code>@Html.ListBox(\"Product\", new SelectList(Model.GetProducts(), \"ID\", \"Product\"), \n                            new { disabled=\"disabled\" })\n</code></pre>\n\n<p>There are also several more fields like what credit card has been used to pay for the receipt (if any), who was the seller and the total price.</p>\n\n<p>The problem is that I can get all this information if i first select the customer, then the receipt, but when i initially load the page no receipt is selected so the information isn't there.\nWhat I want to do is that when it is loaded the first receipt in the list is automatically selected and all the appropriate information is shown.\nAlso when I change the customer the receipt goes blank again and other information stays from the previously selected receipt until i select a new one.</p>\n\n<p>This is the code from the controller:</p>\n\n<pre><code>public class PregledController : Controller\n{\n    public Pregled pregled = new Pregled();\n\n    [HttpGet]\n    public ActionResult Index()\n    {\n        return View(pregled);\n    }\n\n    [HttpPost]\n    public ActionResult Index(Pregled pregled)\n    {\n        Receipt receipt = Repository.GetReceipt(pregled.ReceiptID);\n        pregled.Seller = Repository.GetSeller(receipt.SellerID).FullName;\n        pregled.CreditCard = Repository.GetCreditCard(receipt.CreditCardID).Type;\n\n        return View(pregled);\n    }\n}\n</code></pre>\n"},{"tags":["visual-studio-2010","asp.net-mvc-3","html5","css3"],"answer_count":4,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":2543,"score":6,"question_id":7323657,"title":"Make CSS 3.0 the Default in Visual Studio 2010 SP1 Web Update","body":"<p>I'm working on a HTML5 / CSS 3.0 / MVC 3 project in Visual Studio 2010. Every time I restart VS and then open a CSS file, it's always set to 'CSS 2.1'. Is there a way to tell VS I want to use CSS 3.0 always (or at least by default)?</p>\n\n<p>BTW, I have looked under \"Tools>Options>Text Editor>HTML\" - no CSS options, default is HTML5. I have also looked under \"Tools>Options>Text Editor>CSS\" - no version option as far as I can see.</p>\n\n<p>Thanks,\nMichael</p>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13088948,"title":"MVC 3 Model Properties Without Binding","body":"<p>Is it possible to include a property in a model that is not bound to the database?  For instance:</p>\n\n<pre><code>Public Class Tbl_Forum_Topic\n\n    &lt;Key()&gt; Public Property FTopic_ID() As Integer\n    &lt;ForeignKey(\"Tbl_Forum\")&gt; _\n    Public Property FTopic_Forum_ID() As Integer\n    Public Property FTopic_Employee_ID() As Integer\n    Public Property FTopic_Resource_ID() As Integer\n    Public Property FTopic_Title() As String\n    Public Property FTopic_Content() As String\n    Public Property FTopic_Create_Date() As Nullable(Of Date)\n    Public Property FTopic__Deleted() As Nullable(Of Boolean)\n    Public Property FTopic_Deleted_Date() As Nullable(Of Date)\n    Public Property FTopic_Status() As Nullable(Of Boolean)\n    Public Property FTopic_Publish() As Nullable(Of Boolean)\n\n    Public Overridable Property Tbl_Forum() As Tbl_Forum\n\n    Public Overridable Property Tbl_Forum_Replies() As ICollection(Of Tbl_Forum_Reply)\n\n    Public Overridable Property Last_Reply_User_Name() As String\n\nEnd Class\n</code></pre>\n\n<p>The last item is called <code>Last_Reply_User_Name()</code>.  It is not in my database, but I want to loop through and perform a calculation in my controller action to set it based on values from other database tables.  I get an error <code>Invalid column name 'Last_Reply_User_Name'.</code> when I try this code.</p>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","debugging","override"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12211585,"title":"Override BuildManagerViewEngine.FileExists Method is called only in debug mode (MVC 3)","body":"<p>I'm building a plugin architecture with MVC 3, where the plugins are simply another MVC 3 application (.dll with views embedded).</p>\n\n<p>I've a class (PluginViewEngine) that inherits from RazorViewEngine and in that class I've the override for the method FileExists, where I check if the View virtualPath is from a plugin or not.</p>\n\n<p>In the Global.asax.cs file I call:</p>\n\n<pre><code>ViewEngines.Engines.Clear();\nViewEngines.Engines.Add(new PluginViewEngine(arrayWithViewAllViewLocations));\n</code></pre>\n\n<p>If I've  in the web.config file every time I call an action (from a plugin or not) the method FileExist is called and everything works, but if I remove the debug=\"true\", the method FileExist is only called for the non-plugin actions.</p>\n\n<p>I can't use debug to try to figure it out, because in debug mode everything works just fine.</p>\n\n<p>Can someone give me a clue why this happens or how to figure it out?</p>\n\n<p>Many thanks!</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":95,"score":1,"question_id":12338847,"title":"MVC 3 - Client Side Validation on a child object of a view model","body":"<p>I have a view model that looks like this -</p>\n\n<pre><code>public class upgradeViewModel\n{\n    public Cart Cart { get; set; }\n    public RegisterModel RegisterModel { get; set; }\n} \n</code></pre>\n\n<p>The view model contains a property called <code>RegisterModel</code> the <code>RegisterModel</code> model object looks similar to this -</p>\n\n<pre><code>public class RegisterModel\n{\n    [Required]\n    [Display(Name = \"Your name\")]\n    public string UserName { get; set; }\n\n    [Required]\n    [DataType(DataType.EmailAddress)]\n    [Display(Name = \"Your email address\")]\n    public string Email { get; set; }\n\n    ...\n}\n</code></pre>\n\n<p>I use the <code>RegisterModel</code> property on the view model to set up a form in a view that uses <code>upgradeViewModel</code> object as it's model. On submitting the form I don't get any client side validation, although I do get server side validation for the <code>RegisterModel</code> object.</p>\n\n<p>I believe I have everything configured correctly for unobtrusive client side validation to work, and it works in other areas of the web site. Do I need to do something extra to get client side validation to work for a child object of the view model?</p>\n\n<p>Here's my view code - </p>\n\n<pre><code>@model upgradeViewModel\n\n@{\n    ViewBag.Title = \"Title\";\n    Layout = \"~/Views/Shared/_LayoutNormal.cshtml\";\n}\n\n&lt;h2&gt;Title&lt;/h2&gt;\n\nSome text ....\n\n@using (Html.BeginForm()) {\n    @Html.ValidationSummary(true, \"Account creation was unsuccessful. Please correct the errors and try again.\")\n    &lt;div&gt;\n        &lt;fieldset&gt;\n            &lt;legend&gt;Your Information&lt;/legend&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.RegisterModel.UserName)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.TextBoxFor(m =&gt; m.RegisterModel.UserName)\n                @Html.ValidationMessageFor(m =&gt; m.RegisterModel.UserName)\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.RegisterModel.Email)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.TextBoxFor(m =&gt; m.RegisterModel.Email)\n                @Html.ValidationMessageFor(m =&gt; m.RegisterModel.Email)\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.RegisterModel.Password)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.PasswordFor(m =&gt; m.RegisterModel.Password)\n                @Html.ValidationMessageFor(m =&gt; m.RegisterModel.Password)\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.RegisterModel.ConfirmPassword)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.PasswordFor(m =&gt; m.RegisterModel.ConfirmPassword)\n                @Html.ValidationMessageFor(m =&gt; m.RegisterModel.ConfirmPassword)\n            &lt;/div&gt;\n\n            &lt;p&gt;\n                &lt;input type=\"submit\" value=\"Save Details\" class=\"inputbutton\" /&gt;\n            &lt;/p&gt;\n        &lt;/fieldset&gt;\n    &lt;/div&gt;\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","visual-studio-2010","debugging"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13087712,"title":"Why won't Visual Studio break on this unhandled exception?","body":"<p>When submitting a form, a Yellow Screen of Death appeared even while in Debug mode in Visual Studio. The problem I had is solved, it was a missing resource value, but I'm interested in why I'm not able to break on the exception.</p>\n\n<p>I tried the following, but nothing changed the situation:</p>\n\n<ul>\n<li>Stepping through the code.</li>\n<li>Changing the <code>Debug -&gt; Exceptions</code> settings.</li>\n<li>Checking <code>Enable .NET Framework source stepping</code> and <code>Enable source server support</code>.</li>\n</ul>\n\n<p>How can such an exception be caught, or why is it not possible to catch it?</p>\n\n<blockquote>\n  <p><strong>Description:</strong> An unhandled exception occurred during the execution of\n  the current web request. Please review the stack trace for more\n  information about the error and where it originated in the code.</p>\n  \n  <p><strong>Exception Details:</strong> System.ArgumentNullException: Value cannot be null.\n  Parameter name: value</p>\n  \n  <p><strong>Source Error:</strong></p>\n  \n  <p>An unhandled exception was generated during the execution of the\n  current web request. Information regarding the origin and location of\n  the exception can be identified using the exception stack trace below.</p>\n  \n  <p><strong>Stack Trace:</strong></p>\n</blockquote>\n\n<pre><code>[ArgumentNullException: Value cannot be null.\nParameter name: value]\n   System.ComponentModel.DataAnnotations.ValidationContext.set_DisplayName(String value) +52015\n   System.Web.Mvc.&lt;Validate&gt;d__1.MoveNext() +135\n   System.Web.Mvc.&lt;Validate&gt;d__5.MoveNext() +318\n   System.Web.Mvc.DefaultModelBinder.OnModelUpdated(ControllerContext controllerContext, ModelBindingContext bindingContext) +139\n   System.Web.Mvc.DefaultModelBinder.BindComplexElementalModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Object model) +66\n   System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +1367\n   System.Web.Mvc.DefaultModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +449\n   System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) +317\n   System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) +117\n   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343\n   System.Web.Mvc.Controller.ExecuteCore() +116\n   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97\n   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10\n   System.Web.Mvc.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5() +37\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0() +21\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass8`1.&lt;BeginSynchronous&gt;b__7(IAsyncResult _) +12\n   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62\n   System.Web.Mvc.&lt;&gt;c__DisplayClasse.&lt;EndProcessRequest&gt;b__d() +50\n   System.Web.Mvc.SecurityUtil.&lt;GetCallInAppTrustThunk&gt;b__0(Action f) +7\n   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22\n   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60\n   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9\n   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +184\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1994,"score":0,"question_id":4623758,"title":"How can I databind in the _Layout.cshtml","body":"<p>In ASP.NET WebForms, I can use the CodeBehind of a master page to fetch data to use to bind up my navigation.</p>\n\n<p><strong>How can I achieve the same in ASP.NET MVC 3?</strong></p>\n\n<p>Ideally the main navigation would be in the <code>_Layout.cshtml</code> but this file doesn't have it's own model. i.e. It can only use the model supplied by the controller action (assuming a base class and <code>@model</code> directive in the <code>_Layout.cshtml</code>.</p>\n\n<p><strong>Edit</strong><br>\nWhile I realise MVC does not have the notion of DataBinding, I included it here to help describe the functionality I'm looking for.</p>\n"},{"tags":["wcf","asp.net-mvc-3","entity-framework","odata"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":441,"score":1,"question_id":8083101,"title":"OData in MVC3 + EF layered architecture","body":"<p>I'm a total newbie to WCF-related stuff, so forgive my naive question, but I am not sure where to start in pinpointing an error while learning OData basics.</p>\n\n<p>I have an existing MVC3 application using a database, using the universal membership provider (added via nuget) and a small SDF database accessed via SQL Server Compact Edition Client Data Provider 4.0. I created it with the following steps:</p>\n\n<p>1) create a <strong>new library project for the data layer</strong>, add EDMX from a database, then add ADO.NET DB context and entities generators templates. </p>\n\n<p>2) create a <strong>new library project for generic data interfaces</strong>: a repository interface, implemented in (1), and the entities t4 template with its output, moved from (1) into this project (changing the TT <em>inputFile</em> parameter so that it refers to the EDMX in the other project).</p>\n\n<p>3) create a new <strong>MVC application</strong> which uses Ninject to instantiate the generic repository declared in (2) with the SDF-based repository implemented in (1).</p>\n\n<p>The web application works fine, and I can view and edit data. Now I should expose some of its functions via a WCF service and I was looking at OData for this. So I added a new WCF Data Service, and changed the generated code just to test it, by adding the name of my entities class (as implemented in (1)) and the name of an entity set, e.g.:</p>\n\n<pre><code>public class ProjectService : DataService&lt;OrganizerEntities&gt;\n{\n    public static void InitializeService(DataServiceConfiguration config)\n    {\n        config.SetEntitySetAccessRule(\"Projects\", EntitySetRights.AllRead);\n        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;\n    }\n}\n</code></pre>\n\n<p>Anyway when I open the SVC in the browser I get a <em>Request Error</em>: <em>The server encountered an error processing the request. See server logs for more details.</em>. If I look at the log, I see first of all a warning like:</p>\n\n<blockquote>\n  <p>... \n  http://msdn.microsoft.com/it-IT/library/System.ServiceModel.EvaluationContextNotFound.aspx\n  <strong>Configuration evaluation context not found</strong>.\n  ...</p>\n</blockquote>\n\n<p>and then an <strong>ArgumentNullException</strong> exception whose details follow. In all the samples or tutorials I've found I see the typical not-so-real-world example where the data layer is not separated from the consumer application: create a new MVC app, add an EDMX, add a WCF Data Service, change some lines of generated code, and all magically works :). So I suppose this is related to my layered architecture, especially for the missing context warning. Could anyone help in using this service in a layered scenario like this? Thanks!</p>\n\n<blockquote>\n  <p>... Value cannot be null. Parameter name: key\n   at System.Collections.Generic.Dictionary<code>2.FindEntry(TKey\n  key) at System.Collections.Generic.Dictionary</code>2.get_Item(TKey key) at\n  System.Data.Services.Providers.ObjectContextServiceProvider.PopulateMetadata(IDictionary<code>2\n  knownTypes, IDictionary</code>2 childTypes, IDictionary<code>2 entitySets) at\n  System.Data.Services.Providers.BaseServiceProvider.PopulateMetadata()\n  at System.Data.Services.DataService</code>1.CreateProvider() at\n  System.Data.Services.DataService<code>1.HandleRequest() at\n  System.Data.Services.DataService</code>1.ProcessRequestForMessage(Stream\n  messageBody) at SyncInvokeProcessRequestForMessage(Object , Object[] ,\n  Object[] ) at\n  System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object\n  instance, Object[] inputs, Object[]&amp; outputs) at\n  System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc&amp;\n  rpc) at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean\n  isOperationContextSet) \n  System.ArgumentNullException: Value cannot be null.\n  Parameter name: key    at\n  System.Collections.Generic.Dictionary<code>2.FindEntry(TKey key)    at\n  System.Collections.Generic.Dictionary</code>2.get_Item(TKey key)    at\n  System.Data.Services.Providers.ObjectContextServiceProvider.PopulateMetadata(IDictionary<code>2\n  knownTypes, IDictionary</code>2 childTypes, IDictionary<code>2 entitySets)    at\n  System.Data.Services.Providers.BaseServiceProvider.PopulateMetadata() \n  at System.Data.Services.DataService</code>1.CreateProvider()    at\n  System.Data.Services.DataService<code>1.HandleRequest()    at\n  System.Data.Services.DataService</code>1.ProcessRequestForMessage(Stream\n  messageBody)    at SyncInvokeProcessRequestForMessage(Object ,\n  Object[] , Object[] )    at\n  System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object\n  instance, Object[] inputs, Object[]&amp; outputs)    at\n  System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp;\n  rpc)    at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp;\n  rpc)    at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc&amp;\n  rpc)    at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc&amp;\n  rpc)    at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc&amp;\n  rpc)    at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc&amp;\n  rpc)    at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc&amp;\n  rpc)    at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc&amp;\n  rpc)    at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc&amp;\n  rpc)    at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean\n  isOperationContextSet) ...</p>\n</blockquote>\n"},{"tags":["asp.net-mvc-3","visual-studio-2010","installation","sql-server-2008-r2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":104,"score":0,"question_id":12732635,"title":"SQL Server 2008 R2 Installation Error \"Trust Relationship Failed\"?","body":"<p>When I install SQL Server 2008 R2, the Database Engine Services feature don't install due to the error \"The Trust Relationship between the primary domain and the trusted domain failed.\"</p>\n\n<p>For context, I'm trying to get into ASP.NET MVC3 and when I try to add/browse a database in Visual Studio 2010, I get errors saying that it can't connect to the SQL Express database, Error 40. When I run the SQL Server Configuration Manager, and select the SQL Server Services, I get \"The remote procedure call failed [0x800706be]\"  </p>\n\n<p>I did some research, regarding this error 40; I've tried, to run Server Configuration Manager as a Administrator, change the TCP/IP settings in Client Protocols to Enabled, and it still didn't work. I uninstalled SQL Server 2008 R2 and reinstalled it and found that the Database Engine Services and SQL Server Replication failed to install, with the error message \"The Trust Relationship between the primary domain and the trusted domain failed.\"</p>\n\n<p>Any ideas?</p>\n"},{"tags":[".net","asp.net-mvc-3","entity-framework","controller","httprequest"],"answer_count":4,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":1204,"score":7,"question_id":5425920,"title":"ASP.NET MVC: Controller created for every request?","body":"<p>Very simple question: Are controllers in ASP.NET created for every http request ? Or are they created at application startup and reused throughout requests ?</p>\n\n<p>For some particular http request only the requested controller will created ? Is that right ? </p>\n\n<p>If my previous assumptions are correct can I depend on it ? I want to create database context (Entity framework) that will live only for one request. If I create it as a property initialized in controller's constructor is it granted that new instance of context will be created on for every request ?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","razor-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":64,"score":-3,"question_id":13085867,"title":"Razor and if statement","body":"<p>I'm using MS Razor in MVC 3 C#, I need to display some text \"hello\" within the IF statement.\nAt the moment I receive an error. Any idea how to solve it?</p>\n\n<p>EDIT: syntax error</p>\n\n<pre><code>   @if(Model.IsCustomEvent)\n    {\n        @Html.ActionLink(\"Edit\", \"Edit\", new {  id=Model.EventTitle }) hello\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13075591,"title":"can we share site authentication cookie?","body":"<p>i have two web site domain1.com and domain2.com user come in domain1.com and i authenticate </p>\n\n<p>it and create authenticate cookie ,is it possible to share this cookie by domain2.com,for </p>\n\n<p>example when user Soto domain2.com is authenticated because it authenticated in domain1.com?</p>\n\n<pre><code>is it possible?\nI'm looking for a simple way and these domains are not \na sub domains they are two separate site\n</code></pre>\n\n<p>notice i don't want use sql server url parameter or other ways</p>\n\n<p>thanks all</p>\n"},{"tags":["asp.net-mvc-3","knockout.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13078103,"title":"How to update knockout model in mvc3 app","body":"<p>I've been playing with MVC3 with KnockoutJs for a few weeks and I've been wondering about something</p>\n\n<p>say I have an mvc action which returns a simple list</p>\n\n<pre><code>public ActionResult AddFoos()\n{\n    List&lt;Foo&gt; funds = new List&lt;Foo&gt;();     \n    .. etc\n    return Json(funds.ToList(), JsonRequestBehavior.AllowGet);\n}     \n</code></pre>\n\n<p>which is then passed into the view model</p>\n\n<pre><code>var viewModel = {\n  fooChocies: ko.mapping.fromJS([]),\n  fooOptions: ko.mapping.fromJS([]),\n    loadInitialData: function () {\n\n        ko.mapping.fromJS(serverData, dataMappingOptions, viewModel.fooOptions);\n    },\n};\n</code></pre>\n\n<p>In my type Foo I also have properties that show or hide ui elements</p>\n\n<pre><code>var Foo = function (data, preselect) {\n\n\n    var self = this;\n    self.id = ko.observable(data.id);\n    self.Name = ko.observable(data.Name);\n    self.number = ko.observable('');\n\n\n    self.showProducts = ko.observable(false);   &lt;---\n    self.displayBigPanel = ko.observable(false);  &lt;---\n\n   }\n</code></pre>\n\n<p>My approach so far as been to dynamically create elements of the form </p>\n\n<p></p>\n\n<p>which passes through the ModelBinder and creates a List&lt; Foo > as a parameter for controller action.</p>\n\n<p>Finally the <strong>question</strong>...</p>\n\n<p>When the user navigates back to this page I need to restore the UI with the fooChoices the user made.</p>\n\n<p>It seems I have 2 choices with rebuilding the user selections (both via extension methods)</p>\n\n<ol>\n<li><p>Use raw json as seen by </p>\n\n<pre><code>ko.toJSON(viewModel.fooChoices))  \n</code></pre></li>\n</ol>\n\n<p>which in addition to basic model properties also provides info on hiding and displaying UI elements, </p>\n\n<pre><code>            sb.Append(\"viewModel.fooCghoices= ko.mapping.fromJS(\" + json + \");\");\n            sb.Append(\"ko.applyBindings(viewModel);\");\n            return new HtmlString(sb.ToString());\n</code></pre>\n\n<p>thus sending client ui info to the server and back</p>\n\n<p>or</p>\n\n<ol>\n<li><p>Manipulate the ViewModel directly in effect simulating the user actions</p>\n\n<pre><code>        sb.Append(\"viewModel.fooChoices.push(new Foo(1509));\");\n        sb.Append(\"viewModel.fooChoices()[0].selectedSubFoo = new Foo(273);\");\n        sb.Append(\"viewModel.fooChoices()[0].showProducts(true);\");\n</code></pre></li>\n</ol>\n\n<p>In either case it feels a bit off and that a better pattern is out there. Would like to know if one way is better than the other or none of the above.</p>\n\n<p>Many Thanks</p>\n"},{"tags":["asp.net-mvc-3","entity-framework-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13082443,"title":"Multiple SaveChanges calls in entity framework","body":"<p>I am building my own custom repository, based on entity framework, and I'm creating some extension methods that allow me to save partial view models as entity models so I'm building my own Add and Update methods.</p>\n\n<p>Currently, each method has SaveChanges() from DbContext called at the end which means for every model, one call will be invoked.</p>\n\n<p>I'm building this base DAL pattern for MVC4 sites which means most of the time I will access 1 model, but it does not have to be the case though.</p>\n\n<p>Is it too bad practice to call SaveChanges() for each model when updating i.e. 3 entities or should I add everything first to object context and than do SaveChanges() as some sort of transaction commit?</p>\n"},{"tags":["asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":61,"score":-3,"question_id":13085116,"title":"Scope of .NET currently and in the future as well?","body":"<p>I have just joined a company and asked to join .NET. What is the scope of .NET in current scenario and what will it take to switch to Java after having 1 or 2 years of experience in .NET?</p>\n"},{"tags":["html","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":2537,"score":6,"question_id":9109313,"title":"Maxlength for text area doesn't work in IE","body":"<p>I am trying to limit the number of characters entered in a textarea as shown:</p>\n\n<pre><code>&lt;div&gt;\n @Html.TextAreaFor(x =&gt; x.StudentName, new { @maxlength = \"1000\" })\n&lt;/div&gt;\n</code></pre>\n\n<p>This works fine in Firefox and Chrome but the maxlength attribute doesn't work in IE. How do I do that??</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","razor","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":105,"score":-1,"question_id":12969192,"title":"Kendo UI Validation for Dublicate Value Checking","body":"<p>I am facing a problem with validation for duplicate value checking from server using json.\nMy code is runing fine in each click but error message show in second click(One click in side text box put value then click out side the text box - that time code execute but error message show . again i click in that text box and again click out side text box ,again my code run and this time error message show) . Please find my mistake and help me to show validation message in single escape or single click of  text box.</p>\n\n<h2>script language=\"javascript\" type=\"text/javascript\"</h2>\n\n<p>//KendoUi Validation</p>\n\n<pre><code>    var validatable = $(\"#ApplicationNo\").kendoValidator({\n        onfocusout: true,\n        onkeyup: true,\n        rules: {\n            ApplicationNo: function (input) {\n                $.post(\"/Home/CheckAppNo\", { ApplicationNo: $(\"#ApplicationNo\").val() }, function (data) { b1 = data; })\n                return b1;\n            }\n\n        },\n\n        messages: {\n            ApplicationNo: \"Already Exist\"\n        }\n    }).data(\"kendoValidator\");\n\n   var validatable = $(\".k-content\").kendoValidator().data(\"kendoValidator\");\n</code></pre>\n\n<p></p>\n\n<h2>C # Code</h2>\n\n<pre><code>    public JsonResult CheckAppNo(string ApplicationNo)\n    {\n        bool IsOk = projectRepository.CheckAppNumber(ApplicationNo);\n        return Json(IsOk, JsonRequestBehavior.AllowGet);\n        //return new JsonResult { Data = IsOk };\n    }\n</code></pre>\n\n<h2>Html</h2>\n\n<blockquote>\n  <blockquote>\n    <p>&lt; input type=\"text\" id=\"ReferredBy\" name=\"ReferredBy\" class=\"k-textbox\" required /></p>\n  </blockquote>\n</blockquote>\n"},{"tags":["partial-views","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1217,"score":1,"question_id":4159939,"title":"Return PartialView in MVC3 Area is not searching in area","body":"<p>I am working on an ASP.Net MVC 3 RC project.  I have one area named Drivers. I have a LoadPartial() action in a controller in the Drivers area that returns a PartialView(string, object);  When this is returned I get an error on my webpage that says \"The partial view 'PublicAttendanceCode' was not found.\" It searched the following locations:</p>\n\n<pre><code>~/Views/AttendanceEvent/PublicAttendanceCode.aspx\n~/Views/AttendanceEvent/PublicAttendanceCode.ascx\n~/Views/Shared/PublicAttendanceCode.aspx\n~/Views/Shared/PublicAttendanceCode.ascx\n~/Views/AttendanceEvent/PublicAttendanceCode.cshtml\n~/Views/AttendanceEvent/PublicAttendanceCode.vbhtml\n~/Views/Shared/PublicAttendanceCode.cshtml\n~/Views/Shared/PublicAttendanceCode.vbhtml\n</code></pre>\n\n<p><strong>Why is it not searching in the Drivers Area?</strong>  </p>\n\n<p>I have the following pretty basic routes in Global.asax.cs:</p>\n\n<pre><code>        public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n        routes.MapRoute(\n            \"Default\", // Route name\n            \"{controller}/{action}/{id}\", // URL with parameters\n            new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n        );\n    }\n</code></pre>\n\n<p>And in DriversAreaRegistration.cs</p>\n\n<pre><code>        public override void RegisterArea(AreaRegistrationContext context)\n    {\n        context.MapRoute(\n            \"Drivers_default\",\n            \"Drivers/{controller}/{action}/{id}\",\n            new { action = \"RequestLeave\", id = UrlParameter.Optional }\n        );\n    }\n</code></pre>\n\n<p><strong>What am I missing that will make it look in the drivers area for the partial?</strong></p>\n"},{"tags":["jquery","asp.net","ajax","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":430,"score":0,"question_id":9607164,"title":"Request.IsAjaxRequest never returns true in MVC3","body":"<p>I am using Asp.net MVC3 and trying to do a simple Ajax post to the server which returns a partial view and updates my list of items during a search.</p>\n\n<pre><code>    @using (Ajax.BeginForm(\"PartialUpdate\", \"Listing\"\n        , new  AjaxOptions { \n                UpdateTargetId = \"ListPartialDiv\",\n                HttpMethod = \"GET\",\n                InsertionMode = InsertionMode.Replace,\n\n        }))\n    {\n        &lt;!-- Search Boxes and buttons here --&gt;\n    }\n\n    &lt;div id = \"ListPartialDiv\"&gt;\n        @{\n            Html.RenderPartial(\"_ListPartial\", Model);\n         }\n    &lt;/div&gt;\n</code></pre>\n\n<p>The ajax successfully makes a call to the server and the server responds by sending a partial view. But the partial view always renders in a new page. I found out that this is because it doesn't know that it is an ajax call coming and so it renders a new page. I HAVE included the correct jquery-ubobtrusive-ajax.min.js scripts and added the key as follows according to <a href=\"http://stackoverflow.com/questions/5164540/why-doesnt-request-isajaxrequest-work-in-asp-net-mvc-3\">This Question</a></p>\n\n<pre><code>    &lt;script src=\"@Url.Content(\"~/Scripts/jquery.unobtrusive-ajax.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.7.1.min.js\")\" type=\"text/javascript\"&gt; \n</code></pre>\n\n<p></p>\n\n<p>My controller code is very simple:</p>\n\n<pre><code>      if (Request.IsAjaxRequest())\n          return PartialView(\"_ListPartial\", list);\n\n      return View(\"Index\", list);\n</code></pre>\n\n<p>But Request.IsAjaxRequest() always returns false no matter what.\nI have also used fiddler and firebug according to <a href=\"http://stackoverflow.com/questions/1702837/request-isajaxrequest-returns-false\">This Question</a> and don't see the X-Requested-With header but I can't really figure out what that means or how to change it. The only thing I can think of is that every other example I see uses an older version of jquery. Does that have anything to do with it? Thanks for any help. </p>\n"},{"tags":["asp.net","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13082439,"title":"Pass data from view to controlller on Get Call in mvc3","body":"<p>I have dropdown which is used for displaying pagesize in view. example as</p>\n\n<pre><code>@Html.DropDownListFor(m =&gt; m.PageSize,\nnew List&lt;SelectListItem&gt;() { new SelectListItem() { Text = \"10\" }, \nnew SelectListItem() { Text = \"20\" },\nnew SelectListItem() { Text = \"50\" },\nnew SelectListItem() { Text = \"100\" }\n})\n</code></pre>\n\n<p>i have to get the selected item value inside controller action.</p>\n\n<p>my action will accept only get call. i just dont want to pass as query string. so how to achieve this?</p>\n"}]}
{"total":29155,"page":8,"pagesize":100,"questions":[{"tags":["asp.net","asp.net-mvc-3","iis7","url-routing","global-asax"],"answer_count":6,"favorite_count":3,"up_vote_count":7,"down_vote_count":0,"view_count":657,"score":7,"question_id":9273987,"title":"ASP.NET MVC Url Route supporting (dot)","body":"<p>I hope that you can help me with the below problem.</p>\n\n<p>I am using ASP.NET MVC 3 on IIS7 and would like my application to support username's with dots.</p>\n\n<p>Example: <a href=\"http://localhost/john.lee\">http://localhost/john.lee</a></p>\n\n<p>This is how my Global.asax looks like: (http://localhost/{username})</p>\n\n<pre><code>routes.MapRoute(\n    \"UserList\",\n    \"{username}\",\n    new { controller = \"Home\", action = \"ListAll\" }\n);\n</code></pre>\n\n<p>The applications works when I access other pages such as <a href=\"http://localhost/john.lee/details\">http://localhost/john.lee/details</a> etc.</p>\n\n<p>But the main user page doesn't work, I would like the app to work like Facebook where <a href=\"http://www.facebook.com/john.lee\">http://www.facebook.com/john.lee</a> is supported.</p>\n\n<p>I used below code and it didn't work for me at all:</p>\n\n<pre><code>&lt;httpRuntime relaxedUrlToFileSystemMapping=\"true\" /&gt;\n</code></pre>\n\n<p>I was able to use below code and get the app to accept dots but I definitely wouldn't like to use below code for many different reason, please tell me there is a way to overcome this problem.</p>\n\n<pre><code>&lt;modules runAllManagedModulesForAllRequests=\"false\" /&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","html5"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13080994,"title":"html5 audio control tag not working in mvc3 code","body":"<p>Here is my code:</p>\n\n<pre><code>&lt;audio controls&gt;                    \n                    &lt;source src=\"@Url.Action(@\"C:\\WS\\Soongs\\Soong\\Content\\themes\\base\\songs\\Test.wma\")\" type=\"audio/mp3\" /&gt;\n                    &lt;p&gt;Your browser does not support HTML 5 audio element&lt;/p&gt;\n                &lt;/audio&gt;  \n</code></pre>\n\n<p>Audio is coming disabled? Can anyone please tell me how to fix this issue? Or what am i doing wrong?</p>\n"},{"tags":["asp.net-mvc-3","html.actionlink"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13081607,"title":"How to check some criteria before redirection to page using @Html.Actionlink","body":"<p>i have used @Html.ActionLink for moving to one form. I want to check some condition before moving to that page. condition like If user have access rights for that (Edit) page then only he can redirect to Edit page.</p>\n\n<p>I'm trying it using jquery but it is only redirection to the edit page by default without calling jquery event . </p>\n\n<p>How to do this ? </p>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-ui","tabs"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":312,"score":1,"question_id":7233708,"title":"jQuery UI Tabs ajax not loading from remote server","body":"<p>My MVC Razor application is using jQuery UI Tabs with Ajax to load one of the tabs and I'm having different behavior when I access my application from the remote server versus my local development environment.</p>\n\n<p>Running locally, everything works out fine.  My tab calls a controller method which returns a view and that view is rendered as expected.</p>\n\n<p>When I run it off of my production server however, nothing is returned by the controller to my page.  I have put in diagnostic checks and can verify that the method is being called, the right data is being pulled from my database, and a populated ViewModel is being sent along with the \"Return View...\" call of my controller.</p>\n\n<p>But, at the client level, there is no HTML being passed back to Javascript.  The \"alert(ui.panel.innerHTML);\" line below only returns the loading image html and none of the view that is being returned.</p>\n\n<p>Does anyone know why the behavior would be different in these two circumstances?</p>\n\n<p>EDIT:  I have two different remote servers, a Dev and Cert, and neither work.</p>\n\n<p>Thanks!</p>\n\n<p>The Javascript:</p>\n\n<pre><code>    var budgetPanelLoaded = false;\n\n    $(\"#tabs\").tabs();\n\n    $(\"#tabs\").bind(\"tabsselect\", function (event, ui) {\n        if ($(ui.tab).text() == \"Budgets\") {\n            if (budgetPanelLoaded != true) {\n                $(ui.panel).append(\"&lt;img id='budgetsLoadingImage' src='/images/loading.gif' width='96' height='96' /&gt;\");\n            };\n        };\n    });\n\n    $(\"#tabs\").bind(\"tabsload\", function (event, ui) {\n        if ($(ui.tab).text() == \"Budgets\") {\n            alert(ui.panel.innerHTML);\n            $(\"#budgetsLoadingImage\").remove();\n            budgetPanelLoaded = true;\n        };\n\n    });\n</code></pre>\n\n<p>And the Controller:</p>\n\n<pre><code>    Function EditOrgBudgets(ByVal Orgid As Integer) As ActionResult\n        Dim db As New charityContainer\n        Dim o As Organization\n        Dim ovm As OrganizationViewModel\n\n        OpenContainer(db)\n\n        'Load the organization from the database\n        o = (From org In db.Organizations _\n            Where org.Id = Orgid _\n            Select org).FirstOrDefault()\n\n        If (o Is Nothing) Then\n\n            'Organization doesn't exist yet\n            Return View(\"OrganizationNotCreated\")\n        Else\n\n            'Create any empty budgets that need to be created\n            CreateBudgetsForOrganization(o, db)\n\n\n            o.OrganizationBudgets = (From ob In db.OrganizationBudgets _\n                                     Where ob.OrganizationId = o.Id _\n                                     Order By ob.Budget.Year Descending _\n                                     Select ob).ToList()\n\n\n            'Map it to the ViewModel\n            ovm = AutoMapper.Mapper.Map(Of Organization, OrganizationViewModel)(o)\n\n            Return View(\"OrganizationBudgets\", ovm)\n        End If\n\n    End Function\n</code></pre>\n"},{"tags":["asp.net-mvc-3","html5","css3","asp.net-mvc-4","responsive-design"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":88,"score":4,"question_id":13063268,"title":"Are there any Responsive templates for ASP.NET MVC 3/4","body":"<p>I was searching for responsive templates for ASP.NET MVC 3/4 which one could use as a base and  then extend as per requirement.</p>\n\n<p>After googling for a while, I came across these two options.</p>\n\n<ol>\n<li><p><a href=\"http://foundation.zurb.com/\" rel=\"nofollow\">Zurb foundation</a>, they also have a nuget package available <a href=\"http://www.nuget.org/packages/Zurb_Foundation_MVC3\" rel=\"nofollow\">here</a> and detailed procedure explained <a href=\"http://www.simple-talk.com/dotnet/asp.net/responsive-design-using-foundation-with-asp.net-mvc/\" rel=\"nofollow\">here</a>.</p></li>\n<li><p><a href=\"http://twitter.github.com/bootstrap/getting-started.html\" rel=\"nofollow\">Twitter Bootstrap</a> - have never used it, but looks promising</p></li>\n<li><p><a href=\"http://ajkochanowicz.github.com/Kickstrap/\" rel=\"nofollow\">Kickstrap</a></p></li>\n</ol>\n\n<p>Does any one know any more / compatible / better responsive templates that one could use with ASP.NET MVC websites ?</p>\n\n<p>This would certainly makes lives of all MVC developers easier if they have a responsive template to begin with. Thanks.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","caching","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12908382,"title":"How to add an object to a Cache and Access the data from cache in MVC4?","body":"<p>Hi all i have an object which returns data like this</p>\n\n<pre><code>         var productdetial=  {\n                               \"productId\": \"1\",\n                               \"productname\": \"Casualshirts\",\n                               \"productSkus\": [\n                                                   {\n                                                     \"Skuimage\": \"URL\",\n                                                     \"SKU\": [\n                                                               {\n                                                                  \"ProducSKU\": \"Shoe1001\",\n                                                                  \"Options\": [\n                                                                                {\n                                                                                  \"productOptions\": [\n                            {\n                                \"OptionID\": \"1\",\n                                \"optionname\": \"Color\",\n                                \"value\": \"Black\"\n                            },\n                            {\n                                \"OptionID\": \"2\",\n                                \"optionname\": \"Size\",\n                                \"value\": \"S\"\n                            },\n                            {\n                                \"OptionID\": \"3\",\n                                \"optionname\": \"Fit\",\n                                \"value\": \"Regular\"\n                            }\n                        ]\n                    }\n                ]\n            },\n            {\n                \"ProducSKU\": \"Shoe1002\",\n                \"Options\": [\n                    {\n                        \"productOptions\": [\n                            {\n                                \"OptionID\": \"1\",\n                                \"optionname\": \"Color\",\n                                \"value\": \"Red\"\n                            },\n                            {\n                                \"OptionID\": \"2\",\n                                \"optionname\": \"Size\",\n                                \"value\": \"S\"\n                            },\n                            {\n                                \"OptionID\": \"3\",\n                                \"optionname\": \"Fit\",\n                                \"value\": \"Regular\"\n                            }\n                        ]\n                    }\n                ]\n            },\n            {\n                \"ProducSKU\": \"Shoe1003\",\n                \"Options\": [\n                    {\n                        \"productOptions\": [\n                            {\n                                \"OptionID\": \"1\",\n                                \"optionname\": \"Color\",\n                                \"value\": \"Orange\"\n                            },\n                            {\n                                \"OptionID\": \"2\",\n                                \"optionname\": \"Size\",\n                                \"value\": \"S\"\n                            },\n                            {\n                                \"OptionID\": \"3\",\n                                \"optionname\": \"Fit\",\n                                \"value\": \"Regular\"\n                            }\n                        ]\n                    }\n                ]\n            }\n        ]\n</code></pre>\n\n<p>now what i want is i want to keep this data in cache, and i am binding this data to my view ,now what i want is when ever i make a request from my now on i should be able to access data from the above object whihc is in cache...cana ny one help me how can i do this how do i add this object to a cache and access data from there </p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":13068934,"title":"How to post data through multiple partial view in mvc3","body":"<p><strong>view:</strong></p>\n\n<pre><code>@model \n@using (Html.BeginForm(\"action\", \"Controller\"))\n{\n   @html.action(\"action1\",\"controller1\") //use model1\n   @html.action(\"action2\",\"controller2\") //use model2\n   @html.action(\"action3\",\"controller3\") //use model3\n   &lt;button type=\"submit\"&gt;submit&lt;/button&gt;\n}\n</code></pre>\n\n<p><strong>Parent Model</strong></p>\n\n<pre><code>{\n  public model model1{get; set;} \n\n  public model model2{get; set;} \n\n  public model model3{get; set;} \n}\n</code></pre>\n\n<p><strong>controller</strong></p>\n\n<pre><code>[httppost]\n public ActionResult Submit(parentmodel abc)\n    {\n\n    }\n</code></pre>\n\n<p>So my question is when I post the data the parentmodel is return as null but when I try as</p>\n\n<pre><code>[httppost]\npublic ActionResult Submit(model1 abc)\n{\n}\n</code></pre>\n\n<p>I get the form values in model1. Is my approach right? What should be done to get the form values in the parent model?</p>\n"},{"tags":["asp.net-mvc-3","json.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13071788,"title":"Serialize enum to const JsonNet","body":"<p>I am using Asp MVC 3 application.</p>\n\n<p>I have an Enum:</p>\n\n<pre><code>public enum EmployeesOptions\n    {\n        John = 1,\n        Peter = 2,\n        Andrew = 3\n    }\n</code></pre>\n\n<p>And a <code>MyViewModel</code> class</p>\n\n<pre><code>   public class MyViewModel\n    {\n        public MyViewModel()\n        {\n            Employees = new List&lt;EmployeesOptions&gt;()\n            {\n                EmployeesOptions.John,\n                EmployeesOptions.Peter,\n                EmployeesOptions.Andrew\n            };\n        }\n\n        public IEnumerable&lt;EmployeesOptions&gt; Employees { get; set; }\n    }\n</code></pre>\n\n<p>My Controller:</p>\n\n<pre><code>public ActionResult Index()\n        {\n            var vm = new MyViewModel();\n            return View(vm);\n        }\n</code></pre>\n\n<p>In My Index View:</p>\n\n<pre><code>@model MyViewModel\n\n    &lt;script type=\"text/javascript\"&gt;\n        var jsonString = '@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(this.Model))';\n\n        var data = ko.mapping.fromJSON(jsonString);\n        omega.franchiseInfo = ko.mapping.fromJS(data);\n     &lt;/script&gt;\n</code></pre>\n\n<p>My serialized data coming from the server looks like this:</p>\n\n<pre><code>    Emplyees:[1,2,3]\n</code></pre>\n\n<p>I want to be like this:</p>\n\n<pre><code>Emplyees:[\"John\",\"Peter\",\"Andrew\"]\n</code></pre>\n\n<p>What am I missing ?</p>\n\n<p>Update:</p>\n\n<pre><code>var jsonString = '@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(this.Model, Newtonsoft.Json.Formatting.None, new Newtonsoft.Json.Converters.StringEnumConverter()))';\n</code></pre>\n\n<p>This do the job!</p>\n"},{"tags":["css","asp.net-mvc-3","layout"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13075114,"title":"Reference background-image in CSS - application MVC 3 ASP.NET in IIS","body":"<p>I have an application hosted in IIS</p>\n\n<p><img src=\"http://i.stack.imgur.com/0J19Q.png\" alt=\"enter image description here\"></p>\n\n<p>But not working the <em>background-image</em> from CSS file</p>\n\n<p>The css is referenced from the layout with:</p>\n\n<pre><code>&lt;link href=\"@Url.Content(\"~/Content/themes/NewStyleSUPERADMIN/style.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n</code></pre>\n\n<p>in the <em>style.css</em>, I have:</p>\n\n<pre><code>background-image: url('/content/themes/NewStyleMeduimHarder/images/Bottom_texture.jpg');\n</code></pre>\n\n<p>or    </p>\n\n<pre><code>background-image: url('/content/themes/NewStyleMeduimHarder/images/Bottom_texture.jpg');\n</code></pre>\n\n<p>How do I display the image?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13066824,"title":"Unable to cast object of type in MVC 3.0 Razor","body":"<p>I am new MVC 3.0 Razor.  I am using LINQ to get the details of profiles.</p>\n\n<p>In the controller i am using</p>\n\n<pre><code>  var q = from m in networks.Entities\n                    join o in networks.EntityTypes on m.EntityTypeIdFk \n                    where m.Status == 1\n                    orderby m.EntityName\n                    select new { m.EntityName,m.EntityDescription,o.EntityTypeName };\n\n            ViewBag.EntitiesName = q.ToList();\n</code></pre>\n\n<p>on the View i m using</p>\n\n<pre><code>@foreach (var res in ViewBag.EntitiesName)\n    {\n        &lt;tr&gt;\n            &lt;td&gt;@res.EntityName&lt;/td&gt;\n            &lt;td&gt;@res.EntityDescription&lt;/td&gt;\n            &lt;td&gt;@res.EntityTypeName&lt;/td&gt;\n        &lt;/tr&gt;\n    }\n</code></pre>\n\n<p>in the @res i m getting the resultant array. But still i m getting error \"Unable to cast object of type\"</p>\n\n<p>Please Help me to resolve this.</p>\n\n<p>Thanks,\nSaloni</p>\n"},{"tags":["asp.net-mvc-3","reportviewer"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13077600,"title":"Not work ReportViewer and ASP.NET MVC 3 in IIS","body":"<p>I have an application that combines webforms with mvc3 hosted in IIS.</p>\n\n<p>What corresponds to MVC 3 works perfectly in IIS, but when I try to access the pages <strong>.aspx</strong> not work</p>\n\n<p>Error:</p>\n\n<p><strong>Parser Error Message: Unrecognized attribute 'targetFramework'. Note that attribute names are case-sensitive.</strong></p>\n\n<pre><code>&lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n</code></pre>\n\n<p>I have configured the Application Pools with .NET 4. The error occurs only when I try to access the pages .aspx. The rest works perfectly.</p>\n\n<p>Note: When running the alplicacion with VS 2010 all works perfectly</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":377,"score":3,"question_id":6163273,"title":"Stuck with ASPNETCOMPILER : error ASPRUNTIME: Type is not resolved for member 'FluentNHibernate.Cfg.FluentConfigurationException,FluentNHibernate","body":"<p>I'm using Team City for continual integration, for a .Net 4 ASP MVC 3 application.</p>\n\n<p>On my dev machine I can build and run my application, but on the build sever I'm getting the following error:</p>\n\n<pre><code> ASPNETCOMPILER : error ASPRUNTIME: Type is not resolved for member 'FluentNHibernate.Cfg.FluentConfigurationException,FluentNHibernate, Version=1.2.0.712, Culture=neutral, PublicKeyToken=8aa435e3cb308880'\n</code></pre>\n\n<p>The FluentNHibernate assembly is referenced by the project and I've even added the assembly to the web.config assemblies section, but I still get the error.</p>\n\n<p>What can I do to diagnose the problem?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","asp.net-webforms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13057804,"title":"Why are MVC3 bin_deployable dlls necessary for webforms application under MVC3 website?","body":"<p>I have an webforms application configured under an MVC3 site in IIS 7.5. I'm 'Could not load file or assembly...' exceptions for System.Web.Mvc and System.Web.Helpers. When I add the MVC3 dlls to the webforms application bin directory everything works. </p>\n\n<p>Why do I have to include the bin_deployable dlls in the webforms application?</p>\n"},{"tags":["asp.net-mvc-3","razor","view","controller"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":29,"score":3,"question_id":13078819,"title":"How does a MVC 3 View get binded to a Controller Action","body":"<p>This is more like a \"Architectural Understanding\" of how MVC 3 works. I really want to know how does the MVC knows which view to call for a given controller action. I can guess that when we use the Visual Studio to create a view for a controller action, it stores these bindings in some sort of file on the project, is that right?</p>\n\n<p>Thanks in advance.\nMarcelo Myara\nRio de Janeiro/Brazil</p>\n"},{"tags":["asp.net-mvc-3","signalr","signalr-hub"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13078701,"title":"Accessing SignalR hub via browser","body":"<p>How can I access signalr hub via browser? I've created hub named \"testhub\" (using <code>HubName</code> property) and method \"Hello\" in it, so I want to access it smth like that: <code>http://serverurl/signalr/testhub/Hello</code></p>\n"},{"tags":["asp.net-mvc-3","entity-framework-4"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":946,"score":4,"question_id":7221674,"title":"Entity framework Conflicting changes detected. This may happen when trying to insert multiple entities with the same key","body":"<p>I have entity <code>User</code> with a couple of <code>one-to-one</code> and <code>many-to-many</code> relations and <code>Identity primary key</code>, and <code>generic repository</code> which created on each request.</p>\n\n<p>I have an registration form with client and server validation and i decided to turn off client validation to test how server would behave in such case.</p>\n\n<p>I turned off client validation to test the registration form and put some invalid values so i get back form saying that i have some errors, after i fixed that i got very interesting error\nsaying:</p>\n\n<pre><code>_context.SaveChanges(); //towing the error below:\n\nConflicting changes detected. This may happen when trying to insert multiple entities with the same key\n</code></pre>\n\n<p>It was strange for me because i detached the entity <code>User</code> but when i found this <a href=\"http://stackoverflow.com/questions/2465933/how-to-clean-up-an-entity-framework-object-context\">How to clean-up an Entity Framework object context?</a>\nso instead detaching only <code>User</code> entity i decided to try to clean object context completely running that code:</p>\n\n<pre><code>var objectStateEntries = this.objectContext\n                             .ObjectStateManager\n                             .GetObjectStateEntries(EntityState.Added);\n\n    foreach (var objectStateEntry in objectStateEntries)\n    {\n        if(objectStateEntry.Entity != null)\n           this.objectContext.Detach(objectStateEntry.Entity);\n    }\n</code></pre>\n\n<p>So after that all working well and i didn't get <code>Conflicting changes detected</code> error any more, but i am still wondering why such situation was taking place, may be some one may explain?</p>\n"},{"tags":["c#",".net","sql","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":114,"score":1,"question_id":12942287,"title":"Unable to connect to hosted SQL Server 2008 database via MVC3 .net","body":"<p>I have had this issue for the past couple of weeks and whilst I've learned a lot I still haven't managed to find a solution.</p>\n\n<p>Basically the error I'm getting is:</p>\n\n<blockquote>\n  <p><em>A network-related or instance-specific error occurred while\n  establishing a connection to SQL Server. The server was not found or\n  was not accessible. Verify that the instance name is correct and that\n  SQL Server is configured to allow remote connections. (provider: SQL\n  Network Interfaces, error: 26 - Error Locating Server/Instance\n  Specified)</em></p>\n</blockquote>\n\n<p>Stack trace:</p>\n\n<pre><code>[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]\n   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +6351920\n   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +412\n   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity) +6366506\n   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject) +180\n   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +6366917\n   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +6366793\n   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +352\n   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +831\n   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +49\n   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +6368598\n   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +78\n   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +2194\n   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +89\n   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +6372110\n   System.Data.SqlClient.SqlConnection.Open() +300\n   System.Data.SqlClient.SqlProviderServices.UsingConnection(SqlConnection sqlConnection, Action`1 act) +132\n   System.Data.SqlClient.SqlProviderServices.UsingMasterConnection(SqlConnection sqlConnection, Action`1 act) +3981391\n   System.Data.SqlClient.SqlProviderServices.GetDbProviderManifestToken(DbConnection connection) +10513049\n   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +44\n\n[ProviderIncompatibleException: The provider did not return a ProviderManifestToken string.]\n   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +11121429\n   System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection) +239\n   System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) +61\n   System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input) +221\n   System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +442\n   System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) +25\n   System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() +89\n   System.Data.Entity.Internal.Linq.InternalSet`1.GetEnumerator() +21\n   System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) +382\n   System.Linq.Enumerable.ToList(IEnumerable`1 source) +80\n   _2ndBrain.Controllers.BrainController.Index() in c:\\users\\apis\\documents\\visual studio 2010\\Projects\\2ndBrain\\2ndBrain\\Controllers\\BrainController.cs:22\n   lambda_method(Closure , ControllerBase , Object[] ) +79\n   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +264\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +39\n   System.Web.Mvc.&lt;&gt;c__DisplayClass15.&lt;InvokeActionMethodWithFilters&gt;b__12() +129\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +826266\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +314\n   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +825488\n   System.Web.Mvc.Controller.ExecuteCore() +159\n   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +335\n   System.Web.Mvc.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5() +62\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0() +20\n   System.Web.Mvc.&lt;&gt;c__DisplayClasse.&lt;EndProcessRequest&gt;b__d() +54\n   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +469\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +375\n</code></pre>\n\n<p>I am able to connect to this database using SSMS with connection string:</p>\n\n<pre><code>&lt;add name=\"ApplicationServices\" connectionString=\"Data Source=sql7.hostinguk.net;Integrated Security=False;Database=orchard_chris;User Id=*****;Password=*******;\" providerName=\"SqlServer\" /&gt;\n</code></pre>\n\n<p>Additionally orchard is able to connect to the database with the same credentials so I dont understand why my custom built app is unable to.</p>\n\n<p>Thanks for any help,\nChris Stevens</p>\n\n<p>Edit:</p>\n\n<p>Still looking for help on this issue. I dont think it's a connection string issue as I can connect to the database via IIS and SSMS.</p>\n\n<p>I also asked my hosting provider what the issue could be and someone got back to me saying:</p>\n\n<blockquote>\n  <p>Provided the users details you are using are working, the strings you\n  have should be fine. The most common cause of this if the details are\n  correct is that you've not specified a connection string name when\n  setting membership providers, meaning they default to the machine\n  string. Check that any providers you have reference the correct string\n  name.</p>\n</blockquote>\n\n<p>Im not really sure what this means, could this be the solution?</p>\n\n<p>Edit 2:</p>\n\n<p>In addition I have confirmed 1,2 and 3 below. Im not sure how to check 4 and 5.</p>\n\n<ul>\n<li>Make sure your server name is correct, e.g., no typo on the name.</li>\n<li>Make sure your instance name is correct and there is actually\n   such an instance on your target machine. [Update: Some application\n   converts \\ to . If you are not sure about your application, please\n   try both Server\\Instance and Server\\Instance in your connection\n   string]</li>\n<li>Make sure the server machine is reachable, e.g, DNS can be\nresolve correctly, you are able to ping the server (not always\ntrue).</li>\n<li>Make sure SQL Browser service is running on the server.</li>\n<li>If firewall is enabled on the server, you need to put\n   sqlbrowser.exe and/or UDP port 1434 into exception.</li>\n</ul>\n\n<p>Also I have confirmed the server is configured to allow remote connections.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1837,"score":3,"question_id":6615541,"title":"How to get model's field name in custom editor template","body":"<p>I'm building my first custom editor template for a text area control.  My code so far is -</p>\n\n<pre><code>&lt;%@ Control Language=\"C#\" Inherits=\"System.Web.Mvc.ViewUserControl&lt;dynamic&gt;\" %&gt;\n&lt;%= Html.TextAreaFor( Model =&gt; Model , 2, 30, \n     new { @class = \"html\", @placeholder = ViewData.ModelMetadata.Watermark }) %&gt;\n</code></pre>\n\n<p>It's not much so far, but it does work.  But we need to add a character counter field to show remaining number of characters that the user can type in.  I know how to do all the JavaScript to make this work.  </p>\n\n<p>So to keep naming system same, I'm going to add a control named \".charCounter\" to display number of remaining characters left.  My problem is that I cannot figure out the correct syntax to be able to retrieve the field name for the model.</p>\n\n<p>The final version will look something like (JavaScript omitted) -</p>\n\n<pre><code>&lt;%@ Control Language=\"C#\" Inherits=\"System.Web.Mvc.ViewUserControl&lt;dynamic&gt;\" %&gt;\n&lt;%= Html.TextAreaFor( Model =&gt; Model , 2, 30, \n     new { @class = \"html\", @placeholder = ViewData.ModelMetadata.Watermark }) %&gt;\n&lt;span class=\"xxx\"&gt;Remaining characters - \n     &lt;input readonly type=\"text\" name=\"&lt;fieldName&gt;.charCounter\" /&gt;\n&lt;/span&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13077146,"title":"Entity not posted back","body":"<p>Here's the controller method that calls the view:</p>\n\n<pre><code>[HttpGet]\n        public ActionResult Edit(int? paramid)\n        {\n            var document = documentRepository.DocumentsWithEmpty.FirstOrDefault(c =&gt; c.ID == paramid.Value);\n            RC rc = new RC(document);\n            return View(\"RC\", rc);\n        }\n</code></pre>\n\n<p>Here's the view (pretty empty for the moment)</p>\n\n<pre><code>@model RC\n\n@{\n    Layout = null;\n}\n@using (Html.BeginForm()) //I've also tried by specifying the method/controller/param\n{\n   //I've also tried with some @Html.EditorFor items\n}\n</code></pre>\n\n<p>And the method in the controller to catch the posted <code>RC</code></p>\n\n<pre><code>[HttpPost]\npublic ActionResult Edit(RC rc) //If I put no parameter, it gets called correctly\n{\n    throw new Exception(\"x\");\n}\n</code></pre>\n\n<p>It is the only entity/place where it doesn't work correctly. Could it be because RC isn't an entity in my database?</p>\n\n<p>Firebug points these for both the GET and POST requests (with the POST request in red). Pretty straightforward</p>\n\n<pre><code>http://localhost:58136/Documents/Edit/23?_=1351197746968\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":12654039,"title":"how should a controller pass back different entities or collections to a view","body":"<p>Most of the samples I see online are showing CRUD with single entity class.</p>\n\n<p>If I were to create a CRM application and one of the views needs to display customer information in read only mode and on the same page, display Contacts, Notes, Attachments, Addresses, how should the controller pass these different entities to the view?<br>\nShould I be creating another model class which will be a container for the various other entities and populate that model class with the various entities and pass back to the View.</p>\n\n<p>In another scenario, say I wanted to display the Customer entity in Edit mode and the View has dropdowns for Customer Active Status, Customer StateCode, Customer Satisfaction dropdowns.  Each of these dropdowns have other entity collections that are bound to them. So, again in this scenario, how should a controller pass back the model which has all these entities and not just Customer entity.</p>\n\n<p>I continue to read on ViewModel pattern and I think this may be the way to go but would certainly appreciate more guidance and pointers.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":53,"score":4,"question_id":12690879,"title":"ASP.Net MVC View with RadioButtonList with Other freeformat selection","body":"<p>I am putting together questionairre for registering for an event.</p>\n\n<p>One of the eventr registration questions is:</p>\n\n<pre><code>What is your main job function?\n    Director/MD/Owner\n    Manager\n    Team Leader\n    Other: Please state\n</code></pre>\n\n<p>I would like this to show as a drop down box, or a radio button list in my view, but also with a textbox underneath or next to the \"Other\" radiobutton, so that a free form \"Other\" job function can be entered.  How would I bind this in my view?</p>\n\n<p>I suspect my model will contain:</p>\n\n<pre><code>    [Display(Name = \"What is your main job function?\")]\n    public string JobFunction { get; set; }\n</code></pre>\n\n<p>...where JobFunction get's populated by the selected item above.  But how in my controller, would I override the selected item, if it's \"Other\" and substitute it with the text box on the view?</p>\n\n<p>I'm sure this has been done many times before - so thank you for any help,</p>\n\n<p>Mark</p>\n"},{"tags":["asp.net","asp.net-mvc-3","razor","textbox"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13075679,"title":"@Html.TextBoxFor able to take Input from barcode scanner BUT not from keyboard input","body":"<p>How would it be possible to make a @Html.TextBoxFor( ) able to take a barcode scanner input but not a keyboard input?</p>\n\n<p>Thanks!!</p>\n"},{"tags":["asp.net-mvc-3","razor","asp.net-routing"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":7359,"score":4,"question_id":6690150,"title":"ASP.Net Mvc 3 Url.Action method uses parameter values from previous request","body":"<p>When Urls are autogenerated using the <code>Url.Action</code> helper, if a page contains a line similar to</p>\n\n<blockquote>\n  <p>@Url.Action(\"Edit\",\"Student\")</p>\n</blockquote>\n\n<p>is expected to generate a url like <code>domain/student/edit</code> and its working as expected.\nBut if the requested url contains some parameters, like <code>domain/student/edit/210</code>, the above code uses these parameters from the previous request and generates something similar even though I've not provided any such parameter to the <code>Action</code> method.</p>\n\n<p>In short, if the requested url contains any parameters, any auto generated links of the page (served for that request) will include those parameters as well no matter if I specify them or not in the <code>Url.Action</code> method.</p>\n\n<p>What's going wrong? </p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13075005,"title":"MVC3 DataAnnotaions validation 1","body":"<p>I am beginner for MVC3.</p>\n\n<p>I used ajax.beginform and unobtrusive validation and pos form.</p>\n\n<p>From this, if the validation is working, the form does not post either if the form is posted successfully, the validation is not working.</p>\n"},{"tags":[".net","asp.net-mvc-3","entity"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13073535,"title":"Custom authorize using MVC","body":"<p>I'm working a bit with MVC. I need to know something about roles when using the same controller for several users getting and showing pictures.</p>\n\n<p>I need to show pictures, but sometimes these pictures should only be shown for those who created them. So now when using the Authorize attribute and if picture and username match thrue my database I could, of course, use this to make a match. I could, of course, make a match method in the controller.</p>\n\n<pre><code>[Authorize]\ncontrollGetPicture(Picture ID){\n\ngetSomepicture..\n\nreturn picture\n}\n\nDB relations\n\nRelations\n[User] &lt;-&gt; [Pictures]\nID         FK_UserID\n</code></pre>\n\n<p>Im thinking about just getting the User ID and compare with the Picture <code>FK_UserId</code> at the picture but I think it could be smarter. How? </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","inversion-of-control","structuremap","asp.net-mvc-4"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":1999,"score":7,"question_id":9557497,"title":"Structuremap does not work on MVC4","body":"<p>I've used <code>StructureMap</code> in MVC2/3 many times without any concern, but I guess handling IoC is different in MVC4.\nWhen i used <code>StructureMap</code> for handling IoC in MVC4 I get the following exception.:</p>\n\n<h2>No parameterless constructor defined for this object</h2>\n\n<p>Why?\nI have not found any correct result in google except this: <a href=\"http://connect.microsoft.com/VisualStudio/feedback/details/725313/ioc-not-working-in-mvc4\" rel=\"nofollow\">IoC Not Working In MVC4</a>\nThese is my IoC classes:</p>\n\n<pre><code>public static class IoC {\n    public static IContainer Initialize() {\n        ObjectFactory.Initialize(x =&gt;\n                    {\n                        x.Scan(scan =&gt;\n                        {\n                            //scan.Assembly(\"DLL.Core\");\n                            scan.Assembly(\"DLL.CMS\");\n                            scan.TheCallingAssembly();\n                            scan.WithDefaultConventions();\n                        });\n                        x.For&lt;IDbContext&gt;().Use&lt;ModelEntities&gt;();\n                        x.For(typeof(IRepository&lt;&gt;)).Use(typeof(Repository&lt;&gt;));\n                        x.For&lt;IHttpControllerActivator&gt;();\n                        x.For&lt;IController&gt;();\n                    });\n\n        return ObjectFactory.Container;\n    }\n</code></pre>\n\n<p>And SmDependencyResolver is:</p>\n\n<pre><code>    public class SmDependencyResolver : IDependencyResolver\n{\n    private readonly IContainer _container;\n\n    public SmDependencyResolver(IContainer container)\n    {\n        _container = container;\n    }\n\n    public object GetService(Type serviceType)\n    {\n        if (serviceType == null) return null;\n        try\n        {\n            return serviceType.IsAbstract || serviceType.IsInterface\n                     ? _container.TryGetInstance(serviceType)\n                     : _container.GetInstance(serviceType);\n        }\n        catch\n        {\n\n            return null;\n        }\n    }\n\n    public IEnumerable&lt;object&gt; GetServices(Type serviceType)\n    {\n        return _container.GetAllInstances(serviceType).Cast&lt;object&gt;();\n    }\n}\n</code></pre>\n\n<p>And my error is:</p>\n\n<blockquote>\n  <p>No parameterless constructor defined for this object.\n      Description: An unhandled exception occurred during the execution of the current web request. Please review the                stack\n  trace for more information about the error and where it originated in\n  the code. </p>\n\n<pre><code>Exception Details: System.MissingMethodException: No parameterless constructor defined for this object.\n</code></pre>\n  \n  <p>Source Error: </p>\n  \n  <p>An unhandled exception was generated during the execution of the\n  current web request. Information regarding the origin and location of\n  the exception can be identified using the exception stack trace below.</p>\n  \n  <p>Stack Trace: </p>\n  \n  <p>[MissingMethodException: No parameterless constructor defined for this\n  object.]    System.RuntimeTypeHandle.CreateInstance(RuntimeType type,\n  Boolean publicOnly, Boolean noCheck, Boolean&amp; canBeCached,\n  RuntimeMethodHandleInternal&amp; ctor, Boolean&amp; bNeedSecurityCheck) +0<br>\n  System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean\n  skipCheckThis, Boolean fillCache) +98<br>\n  System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly,\n  Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean\n  fillCache) +241    System.Activator.CreateInstance(Type type, Boolean\n  nonPublic) +69<br>\n  System.Web.Mvc.DefaultControllerActivator.Create(RequestContext\n  requestContext, Type controllerType) +67</p>\n  \n  <p>[InvalidOperationException: An error occurred when trying to create a\n  controller of type\n  'Parsian.Web.Areas.Dashboard.Controllers.MemberController'. Make sure\n  that the controller has a parameterless public constructor.]<br>\n  System.Web.Mvc.DefaultControllerActivator.Create(RequestContext\n  requestContext, Type controllerType) +182<br>\n  System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext\n  requestContext, Type controllerType) +80<br>\n  System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext\n  requestContext, String controllerName) +74<br>\n  System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase\n  httpContext, IController&amp; controller, IControllerFactory&amp; factory)\n  +196    System.Web.Mvc.&lt;>c_<em>DisplayClass6.b</em>_2() +49    System.Web.Mvc.&lt;>c__DisplayClassb<code>1.&lt;ProcessInApplicationTrust&gt;b__a()\n  +13    System.Web.Mvc.SecurityUtil.&lt;GetCallInAppTrustThunk&gt;b__0(Action f) +7    System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action\n  action) +22<br>\n  System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Func</code>1 func)\n  +124    System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +98<br>\n  System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext,\n  AsyncCallback callback, Object state) +50<br>\n  System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext\n  context, AsyncCallback cb, Object extraData) +16<br>\n  System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()\n  +8862676    System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +184</p>\n</blockquote>\n\n<p>Thanks for correct answers. </p>\n"},{"tags":["asp.net","database","asp.net-mvc-3","database-design"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13072787,"title":"Data Retrieval including dropdownlist & database structure","body":"<p>I have a project which has three tables:</p>\n\n<ol>\n<li><p>Team</p></li>\n<li><p>Questions</p></li>\n<li><p>Options</p></li>\n</ol>\n\n<p>For each team there will be X number of questions &amp; few might have options (single select or multiple checkbox) along with user contact details. Once user fills the form I need to save the data into Database.</p>\n\n<p><strong>Example1:</strong></p>\n\n<p>Team - Technology\nQuestion - Programming Language\nOptions - C, C++, Java</p>\n\n<p><strong>Example2:</strong></p>\n\n<p>Team - Technology\nQuestion - Phone Number\nOptions - Null (i mean to get textbox here)</p>\n\n<p>My confusion here is:-</p>\n\n<ol>\n<li>How should i plan the table structure such that data retrieval is easier?</li>\n<li>Edit method is a must &amp; how can i retrieve Whatever user entered + to show the same questions &amp; also options such that user entered is selected or highlighted (checkbox or single select)?</li>\n</ol>\n\n<p>Kindly assist. Your help is really required!</p>\n\n<p>I am trying to do this iN ASP.NET MVC4 with AJAX.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13070301,"title":"AntiForgery token for domain","body":"<p>I have two application on IIS - A and B. I would like to submit form from application A to B. Unfortunately because of Anti-Forgery key and because cookie contains apppath in name I can't share cookie and input between two applilcation. Does anybody have some idea how to resolve that problem?</p>\n"},{"tags":["asp.net-mvc-3","knockout.js","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13067736,"title":"Sharing View between actions using knockout and ajax app","body":"<p>I have an application that many views can be opened simultaneously in a tabcontrol.</p>\n\n<p>I´m using knockout in all my views. </p>\n\n<p>I have two actions like below:</p>\n\n<pre><code>    public ActionResult Edit()\n    {\n        ViewData[\"Mode\"] = \"Edit\";\n        return PartialView(\"AddOrEdit\", new ParametroModel() { Codigo = \"banco\", Descricao = \"String de conexao do banco de dados\" });\n    }\n\n    public ActionResult Add()\n    {\n        ViewData[\"Mode\"] = \"Add\";\n        return PartialView(\"AddOrEdit\", new ParametroModel() { Codigo = \"banco\", Descricao = \"String de conexao do banco de dados\" });\n    }\n</code></pre>\n\n<p>Both are sharing the same partial view \"AddOrEdit\", follow my view:</p>\n\n<pre><code>@model CCL.Apoio.Web.Models.ParametroModel\n@{\n    var isEdit = ViewData[\"Mode\"] == \"Edit\";\n    var isAdd = ViewData[\"Mode\"] == \"Add\";\n}\n\n@using (Html.BeginForm(null, null, FormMethod.Post, new { id = \"formParametro\" }))\n{\n    @Html.Partial(\"_FormValidation\")\n    &lt;fieldset&gt;\n        &lt;legend&gt;Dados do parâmetro&lt;/legend&gt;\n        &lt;dl&gt;\n            &lt;dt&gt;\n                &lt;label&gt;Código&lt;/label&gt;&lt;/dt&gt;\n            @if (isAdd)\n            {\n                &lt;dd&gt;@Html.TextBoxFor(m =&gt; m.Codigo)&lt;/dd&gt;\n            }\n            else\n            {\n                &lt;dd&gt;@Html.DisplayFor(m =&gt; m.Codigo)&lt;/dd&gt;\n            }\n        &lt;/dl&gt;\n        &lt;dl&gt;\n            &lt;dt&gt;\n                &lt;label&gt;Descrição&lt;/label&gt;&lt;/dt&gt;\n            &lt;dd&gt;\n                @Html.TextAreaFor(m =&gt; m.Descricao)&lt;/dd&gt;\n        &lt;/dl&gt;\n        &lt;dl&gt;\n            &lt;dt&gt;\n                &lt;label&gt;Valor&lt;/label&gt;&lt;/dt&gt;\n            &lt;dd&gt;\n                @Html.TextAreaFor(m =&gt; m.Valor)\n            &lt;/dd&gt;\n        &lt;/dl&gt;\n\n        &lt;dl&gt;\n            &lt;dt&gt;&amp;nbsp;&lt;/dt&gt;\n            &lt;dd&gt;\n                &lt;input type=\"submit\" value=\"Cadastrar\" onclick=\"\" /&gt;&lt;/dd&gt;\n        &lt;/dl&gt;\n    &lt;/fieldset&gt;\n}\n\n&lt;script type=\"text/javascript\"&gt;\n    @if (isEdit)\n    {\n        &lt;text&gt;\n        var parametroEditModel = ko.mapping.fromJSON('@Html.Raw(Json.Encode(Model))');\n        parametroEditModel.Save = function () {\n            ModuloHelper.ajaxPut('/Api/Parametros', parametroEditModel); //Post data\n        };\n        ko.applyBindings(parametroEditModel, document.getElementById(\"formParametro\"));\n        &lt;/text&gt;\n    }\n    else if (isAdd)\n    {\n        &lt;text&gt;\n        var parametroAddModel = ko.mapping.fromJSON('@Html.Raw(Json.Encode(Model))');\n        parametroAddModel.Save = function () {\n            ModuloHelper.ajaxPost('/Api/Parametros', parametroAddModel);\n        };\n        ko.applyBindings(parametroAddModel, document.getElementById(\"formParametro\"));\n        &lt;/text&gt;\n\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>In my view I have two observable viewmodels, one for 'add' mode and another one for 'edit' mode. I can´t use the same viewmodel for both modes cause will have two objects with the same name.....in the client side when both actions are opened. Am I doing wrong this way?</p>\n\n<p>I would like to know if the is a better approach to accomplish that. Does any body can suggest another better way to do what I want?</p>\n\n<p>tks.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13067066,"title":"MVC3 @Html.ActionLink displays Text together with the address","body":"<p>I do not know what I have done wrong but all my @Html.ActionLinks are displaying the expected text together with hyperlink instead of the text alone.</p>\n\n<pre><code>@Html.ActionLink(\"About\", \"About\", \"Home\")\n</code></pre>\n\n<p>displays as </p>\n\n<pre><code>About(Home/About) \n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>About\n</code></pre>\n\n<p>In the views,</p>\n\n<pre><code> @Html.ActionLink(\"Edit\", \"Edit\", new { id = item.Id })\n</code></pre>\n\n<p>displays</p>\n\n<pre><code>Edit(Home/Edit/4) \n</code></pre>\n\n<p>instead of the text</p>\n\n<pre><code>Edit\n</code></pre>\n\n<p>Any clues would be appreciated.</p>\n"},{"tags":["c#","css","asp.net-mvc-3","iis-express"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":98,"score":0,"question_id":13060303,"title":"When using iis express no css applied on a remote pc","body":"<p>I came up with a necessity to work with my asp.net mvc site from a remote pc while developing. So, I configured it to use IIS Express.</p>\n\n<p>At first, a problem raised with windows authentication. My site is supposed to work in windows domain intranet, so I wanted to use integrated windows authentication. I managed to make it work on firefox with <a href=\"http://markmonica.com/2007/11/20/firefox-and-integrated-windows-authentication/\" rel=\"nofollow\">How To: Firefox and Integrated Windows Authentication</a> from <a href=\"http://stackoverflow.com/questions/4762538/iis-express-windows-authentication\">IIS Express Windows Authentication</a> (answer by bees73). But IExplorer still asks to print login/password, even if I open it locally, specifying my ip instead of localhost.</p>\n\n<p>The issue with IE is still not resolved, but let it be - if I print in my credentials, it does work locally. </p>\n\n<p>My question is: when I open my site on a remote PC (both in firefox (no need to print login/password) and IE (I do have to print login'n'password)) my page is rendered without applying styling. It looks like no css is available. But I don't get any errors.</p>\n\n<p>In the source code of the loaded page I do have line</p>\n\n<pre><code>&lt;link href=\"/Content/Site.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n</code></pre>\n\n<p>but when I try to see the Site.css, it says, there was some internal server error. </p>\n\n<p>I think I did not configure IIS Express properly and that's the problem. If it was OK, the integrated windows authentication had to work without asking login and password on IE at least I guess.</p>\n\n<p>So, my config:</p>\n\n<ol>\n<li>The project itself - to IIS Express, windows authentication - on, anonymous - off.</li>\n<li>netsh http add urlacl url=http://myip:myport user=domainname\\mylogin</li>\n<li>netsh http add iplisten ipaddres=myip</li>\n<li>in <em>applicationhost.config</em>:</li>\n</ol>\n\n<p>Bindings:</p>\n\n<blockquote>\n<pre><code>&lt;site name=\"MySite\" id=\"2\"&gt;\n    &lt;application path=\"/\" applicationPool=\"Clr4IntegratedAppPool\"&gt;\n        &lt;virtualDirectory path=\"/\" physicalPath=\"D:\\...\" /&gt;\n    &lt;/application&gt;\n    &lt;bindings&gt;\n       &lt;binding protocol=\"http\" bindingInformation=\"*:myport:localhost\" /&gt;\n        &lt;binding protocol=\"http\" bindingInformation=\"*:myport:myip\" /&gt;\n    &lt;/bindings&gt;\n&lt;/site&gt;\n</code></pre>\n</blockquote>\n\n<p>Authentication:</p>\n\n<blockquote>\n<pre><code>&lt;sectionGroup name=\"authentication\"&gt;\n   &lt;section name=\"anonymousAuthentication\" overrideModeDefault=\"Deny\" /&gt;\n   ...\n   &lt;section name=\"windowsAuthentication\" overrideModeDefault=\"Allow\" /&gt;\n&lt;/sectionGroup&gt; \n</code></pre>\n</blockquote>\n\n<hr>\n\n<blockquote>\n<pre><code>&lt;authentication&gt;\n    &lt;anonymousAuthentication enabled=\"false\" userName=\"\" /&gt;\n    ...\n    &lt;windowsAuthentication enabled=\"true\"&gt;\n        &lt;providers&gt;\n           &lt;add value=\"Negotiate\" /&gt;\n           &lt;add value=\"NTLM\" /&gt;\n        &lt;/providers&gt;\n     &lt;/windowsAuthentication&gt;\n&lt;/authentication&gt;\n</code></pre>\n</blockquote>\n\n<hr>\n\n<blockquote>\n<pre><code>&lt;add name=\"AnonymousAuthenticationModule\" lockItem=\"true\" /&gt;\n</code></pre>\n</blockquote>\n\n<hr>\n\n<blockquote>\n<pre><code>&lt;location path=\"MySite\"&gt;\n    &lt;system.webServer&gt;\n        &lt;security&gt;\n            &lt;authentication&gt;\n                &lt;anonymousAuthentication enabled=\"false\" /&gt;\n                &lt;windowsAuthentication enabled=\"true\" /&gt;\n            &lt;/authentication&gt;\n        &lt;/security&gt;\n    &lt;/system.webServer&gt;\n&lt;/location&gt;\n</code></pre>\n</blockquote>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","jquery-ui","jquery-ui-autocomplete"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13064797,"title":"Jquery-ui Autocomplete select Call back function is not working properly","body":"<p>I am using jquery-ui autocomplete and making a  ajax call inside the autocomplete function i am calling my controller action which returns Json , every thing is working fine but when i select some thing from suggestion dropdown then <code>select</code> call back function called and in <code>select</code> callback function <code>ui</code> is undefined . </p>\n\n<p><strong>Javascript</strong>  </p>\n\n<pre><code> function log(message) {\n            $(\"&lt;div&gt;\").text(message).prependTo(\"#log\");\n            $(\"#log\").scrollTop(0);\n        }\n\n        $(\"#search\").autocomplete({\n            source: function (request, response) {\n                $.ajax({\n                    url: \"/Home/GetCompanyNames\",\n                    dataType: \"jsonp\",\n                    data: \"searchterm=\" + request.term,\n                    success: function (data) {\n                        response($.map(data, function (item) {\n                            alert(item.Value);\n                            return {\n                                label: item.Name,\n                                value: item.Name\n                            };\n                        }));\n                    }\n                });\n            },\n            minLength: 2,\n            select: function (event, ui) {\n                alert(ui.item.Name);\n            alert(ui.item.Value);\n            alert(ui.item.LogoUrl);\n            },\n            open: function () {\n                $(this).removeClass(\"ui-corner-all\").addClass(\"ui-corner-top\");\n            },\n            close: function () {\n                $(this).removeClass(\"ui-corner-top\").addClass(\"ui-corner-all\");\n            }\n        });\n\n    });\n</code></pre>\n\n<p><strong>Action in Controller :</strong></p>\n\n<pre><code>    public JsonResult GetCompanyNames (string searchterm)\n    {\n        var companies = context.companyService.Query().Where(x =&gt; x.Name.Contains(searchterm)).ToList();\n        var list = companies.Select(item =&gt; new SearchJsonModel\n                                                {\n                                                    LogoUrl = item.Logo != null || item.Logo != \"\" ? \"&lt;img  src='/Upload/\" + item.Logo + \"' /&gt;\" : \"&lt;img src='/home/image?image=\" + item.Name + \"' /&gt;\", Name = item.Name, Value = item.InternetName\n                                                }).Select(model =&gt; (model)).ToList();\n        return Json(list, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p><strong>SearchJsonModel :</strong></p>\n\n<pre><code> public class SearchJsonModel\n{\n    public string Name { get; set; }\n    public string Value { get; set; }\n    public string LogoUrl { get; set; }\n}\n</code></pre>\n\n<p>Please ask me if you need more detail and thanks in advance . </p>\n"},{"tags":["asp.net-mvc-3","automapper"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":13051820,"title":"Mapping from ViewModel to DTo to Domain using automapper","body":"<p>I'm having a trouble do the following mapping:</p>\n\n<p>Domain (simplified version):</p>\n\n<pre><code>public class Ad\n{\n    // Primary properties\n    public int Kms { get; set; }\n\n    // Navigation properties\n    public virtual Model Model { get; set; }\n}\n</code></pre>\n\n<p>DTO:</p>\n\n<pre><code>public class CreateAdDto\n{\n    // Primary properties\n    public int Kms { get; set; }\n\n    // Navigation properties\n    public virtual ModelDto Model { get; set; }\n}\n</code></pre>\n\n<p>ViewModel:</p>\n\n<pre><code>public class CreateAdViewModel\n{\n    // Primary properties\n    public int Kms { get; set; }\n\n    public int Make_Id { get; set; }\n    public int Model_Id { get; set; }\n\n    // Navigation properties\n    public IEnumerable&lt;SelectListItem&gt; MakeList { get; set; }\n    public IEnumerable&lt;SelectListItem&gt; ModelList { get; set; }\n}\n</code></pre>\n\n<p>In the Controller, when I do the Mapping I'm loosing the Make_ID from the Dropdownlist of the View:</p>\n\n<pre><code>    public virtual ActionResult Create(CreateAdViewModel adViewModel)\n    {\n        if (ModelState.IsValid)\n        {\n            var adDto = Mapper.Map&lt;CreateAdViewModel, CreateAdDto&gt;(adViewModel);\n\n            _adService.CreateAd(adDto);\n        }\n\n        return RedirectToAction(MVC.Home.Index());\n    }\n</code></pre>\n\n<p>The mapping is:</p>\n\n<pre><code>        Mapper.CreateMap&lt;CreateAdViewModel, CreateAdDto&gt;()\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc-3","telerik-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13068194,"title":"Paging not working in my Telerik Grid","body":"<p>I'm working on a grid currently that has an issue with paging.  The grid fills up to the point it has 15 items within it.  That is the Page Size max, however, pages are not added beyond that.  I'm not entirely sure why it does not add pages.  Below is my code.</p>\n\n<p>View</p>\n\n<pre><code>var gridPageSize = EngineContext.Current.Resolve&lt;Nop.Core.Domain.Common.AdminAreaSettings&gt;().GridPageSize;\n    &lt;table class=\"adminContent\"&gt;\n        &lt;tr&gt;\n            &lt;td&gt;\n                @(Html.Telerik().Grid&lt;CategoryModel.CategoryUnitsModel&gt;()\n                    .Name(\"categoryunits-grid\")\n                    .DataKeys(keys =&gt;\n                    {\n                        keys.Add(x =&gt; x.Id);\n                        keys.Add(x =&gt; x.CategoryId);\n                        keys.Add(x =&gt; x.UnitId);\n                    })\n                    .DataBinding(dataBinding =&gt;\n                    {\n                        dataBinding.Ajax()\n                            .Select(\"CategoryUnitsList\", \"Category\", new { categoryId = Model.Id })\n                            .Insert(\"CategoryUnitsInsert\", \"Category\", new { categoryId = Model.Id })\n                            .Update(\"CategoryUnitsInsert\", \"Category\", new { categoryId = Model.Id })\n                            .Delete(\"CategoryUnitsDelete\", \"Category\", new { categoryId = Model.Id });\n                    })\n                    .Columns(columns =&gt;\n                    {\n                        columns.Bound(x =&gt; x.UnitId)\n                            .Visible(false);\n                        columns.Bound(x =&gt; x.UnitText);\n                        columns.Command(commands =&gt;\n                        {\n                            commands.Edit();\n                            commands.Delete();\n                        })\n                        .Width(100);\n                    })\n                    .ToolBar(commands =&gt; commands.Insert())\n                    .Pageable(settings =&gt; settings.PageSize(gridPageSize).Position(GridPagerPosition.Both))\n                    .ClientEvents(events =&gt; events.OnRowDataBound(\"onRowDataBound\"))\n                    .ClientEvents(events =&gt; events.OnEdit(\"onEdit\"))\n                    .EnableCustomBinding(true))\n\n                &lt;script type=\"text/javascript\"&gt;\n                    function onRowDataBound(e) {\n                        $(e.row).find('a.t-grid-edit').remove(); //remove Delete button\n                    }\n\n                    function onEdit(e) {\n                        $.getJSON('@Url.Action(\"LoadAvailableUnits\", \"Category\")', { categoryId: $(\"#Id\").val() }, function (data) {\n                            var ddl = $(\"#UnitText\").data(\"tDropDownList\");\n                            if (data.length &gt; 0) {\n                                ddl.dataBind(data);\n                                ddl.reload();\n                            }\n                            else {\n                                $('a[class=\"t-button t-grid-cancel\"]').click();\n                                alert(\"There are no Units left to select from\");\n                            }\n                        });\n                    }\n                &lt;/script&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n</code></pre>\n\n<p>EditorTemplates\\CategoryUnit</p>\n\n<pre><code>@using Telerik.Web.Mvc.UI;\n@Html.Telerik().DropDownList().Name(\"UnitText\")\n</code></pre>\n\n<p>Model (CategoryModel.CategoryUnitsModel)</p>\n\n<pre><code>public partial class CategoryUnitsModel : BaseNopEntityModel\n    {\n        public int CategoryId { get; set; }\n        public int UnitId { get; set; }\n        [NopResourceDisplayName(\"Admin.Catalog.Categories.Units.Fields.UnitText\")]\n        [UIHint(\"CategoryUnit\")]\n        public string UnitText { get; set; }\n    }\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>[HttpPost, GridAction(EnableCustomBinding = true)]\n    public ActionResult CategoryUnitsList(GridCommand command, int categoryId)\n    {\n        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))\n            return AccessDeniedView();\n\n        var categoryUnits = _unitsService.GetCategoryUnits(categoryId, command.Page - 1, command.PageSize);\n        var categoryUnitsModel = PrepareCategoryUnitsModel(categoryUnits);\n\n        var model = new GridModel&lt;CategoryModel.CategoryUnitsModel&gt;\n        {\n            Data = categoryUnitsModel,\n            Total = categoryUnitsModel.Count\n        };\n\n        return new JsonResult\n        {\n            Data = model\n        };\n    }\n\n    public JsonResult LoadAvailableUnits(int categoryId)\n    {\n        var categoryUnits = _unitsService.GetAvailableUnits(categoryId);\n        var categoryUnitsModel = PrepareAvailableUnitsInModel(categoryUnits);\n        var returnData = new SelectList(categoryUnitsModel, \"UnitId\", \"UnitText\");\n        return Json(returnData, JsonRequestBehavior.AllowGet);\n    }\n\n    [GridAction(EnableCustomBinding = true)]\n    public ActionResult CategoryUnitsInsert(GridCommand command, CategoryModel.CategoryUnitsModel model)\n    {\n        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))\n            return AccessDeniedView();\n\n        var searchForEntry = _unitsService.GetCategoryUnitByCategoryIdAndUnitId(model.CategoryId, Int32.Parse(model.UnitText));\n        if (searchForEntry != null)\n        {\n            return CategoryUnitsList(command, model.CategoryId);\n        }\n\n        var categoryUnit = new CategoryUnits\n        {\n            UnitId = Int32.Parse(model.UnitText),\n            CategoryId = model.CategoryId\n        };\n\n        _unitsService.InsertCategoryUnit(categoryUnit);\n\n        return CategoryUnitsList(command, model.CategoryId);\n    }\n\n    [GridAction(EnableCustomBinding = true)]\n    public ActionResult CategoryUnitsDelete(GridCommand command, CategoryModel.CategoryUnitsModel model, int id)\n    {\n        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))\n            return AccessDeniedView();\n\n        var categoryId = model.CategoryId;\n        _unitsService.DeleteCategoryUnit(model.CategoryId, id);\n\n        return CategoryUnitsList(command, categoryId);\n    }\n</code></pre>\n\n<p>Any help would be much appreciated.  Thanks all.</p>\n\n<p>Kindest Regards,\nChad Johnson</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13068488,"title":"How to configure routes in asp.net mvc with Areas","body":"<p>I am working on asp.net mvc 3. I have three areas in my project like,</p>\n\n<pre><code>MyProject/Areas/Blogs\nMyProject/Areas/Forums\nMyProject/Areas/Groups\n</code></pre>\n\n<p>Among these three, blogs view is startup view. for that i have set the globla.ascx as</p>\n\n<pre><code>routes.MapRoute(\n                \"Default\", // Route name\n                \"{controller}/{action}/{id}\", // URL with parameters\n                new { controller = \"Blog\", action = \"Blog\", id = UrlParameter.Optional }\n            );\n</code></pre>\n\n<p>and in BlogAreaRegistration.cs,</p>\n\n<pre><code>context.MapRoute(\n                \"Blogarea_Default\",\n                \"{controller}/{action}/{id}\",\n                new { controller = \"Blog\", action = \"Blog\", id = UrlParameter.Optional }\n            );\n</code></pre>\n\n<p>and in ForumAreaRegistration.cs,</p>\n\n<pre><code>context.MapRoute(\n                null,\n                \"Forums/{action}/{id}\",\n                new {controller=\"Forums\", action = \"Forum\", id = UrlParameter.Optional }\n            );\n</code></pre>\n\n<p>and in GroupsAreaRegisration.cs,</p>\n\n<pre><code>   context.MapRoute(\n        \"Groups_default\",\n        \"Groups/{controller}/{action}/{id}\",\n        new { controller = \"Groups\", action = \"Group\", id = UrlParameter.Optional }\n    );\n</code></pre>\n\n<p>Here Forum and Blog are work as i desire but the Group does not work it always shows <strong>404 Resource not found page</strong> so please guide me if i did any mistake in the process.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","c#-4.0"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":130,"score":1,"question_id":12476663,"title":"How to save a Bitmap using filestream","body":"<p>I have created a <code>bitmap</code> and I want to save it in my <em>upload</em> folder. How can I do this? </p>\n\n<p>My Code:</p>\n\n<pre><code>public FileResult image(string image)\n{\n    var bitMapImage = new Bitmap(Server.MapPath(\"/Content/themes/base/images/photo.png\"));\n    Graphics graphicImage = Graphics.FromImage(bitMapImage);\n    graphicImage.SmoothingMode = SmoothingMode.AntiAlias;\n    graphicImage.DrawString(image, new Font(\"Trebuchet MS,Trebuchet,Arial,sans-serif\", 10, FontStyle.Bold), SystemBrushes.WindowFrame, new Point(15, 5));\n    graphicImage.DrawArc(new Pen(Color.Red, 3), 90, 235, 150, 50, 0, 360);\n    MemoryStream str = new MemoryStream();\n    bitMapImage.Save(str, ImageFormat.Png);\n    return File(str.ToArray(), \"image/png\");\n}\n</code></pre>\n\n<p>The path I will use: </p>\n\n<pre><code>string mynewpath = Request.PhysicalApplicationPath + \"Upload\\\\\";\n</code></pre>\n"},{"tags":["asp.net-mvc-3","themes","mschart"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":279,"score":1,"question_id":9706662,"title":"How to theme Series when using a theme.xml in system.web.helpers.chart","body":"<p>The support on this is currently horrible.</p>\n\n<p>I'm creating my own theme for a System.Web.Helpers.Chart by using a XML file.</p>\n\n<p>I've figured that the XML is basically a serialized version of the UIDataVizualazation namespace.</p>\n\n<p>It works fine but I have no idea how to set theme objects tied to the Series property.</p>\n\n<pre><code>&lt;Chart &gt;\n   &lt;ChartAreas&gt;\n       &lt;ChartArea&gt;\n            &lt;AxisY&gt;\n                &lt;MajorGrid /&gt;\n            &lt;/AxisY&gt;\n            &lt;AxisX&gt;\n                &lt;MajorGrid /&gt;\n            &lt;/AxisX&gt;\n       &lt;/ChartArea&gt;\n   &lt;/ChartAreas&gt;\n    &lt;Legends&gt;\n        &lt;Legend /&gt;\n    &lt;/Legends&gt;\n&lt;/Chart&gt;\n</code></pre>\n\n<p>This is something I can manage pretty easily but according to the Chart object System.Web.UI.DataVisualization.Charting.Chart</p>\n\n<p>has a series property that is a collection of series objects and</p>\n\n<pre><code>&lt;Series&gt;\n    &lt;Series /&gt;\n&lt;/Series&gt;\n</code></pre>\n\n<p>Just doesn't do it. So if someone can point me towards a Xml schema for this or a pointer on how to access the Series property so I can change things like isValueShownAsLabel attribute I would appriciate it</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13067092,"title":"Making id'less url in asp.net mvc razor","body":"<p>I am working with URL routing , and have some issues. I want my url to be like this:</p>\n\n<p>www.domain.com/p/myproduct</p>\n\n<p>But I also want to be able to retrieve the ID of the product, without accessing the database. I thought about having a URL like:</p>\n\n<p>www.domain.com/p/myproduct/1 </p>\n\n<p>But if I could hide the ID it would be better.</p>\n\n<p>So, how do I do it the simplest way?</p>\n\n<p>Currently my Global.asax has the following route:</p>\n\n<pre><code> routes.MapLocalizedRoute(\"Product\",\n                        \"p/{productId}/{SeName}\",\n                        new { controller = \"Catalog\", action = \"Product\", SeName = UrlParameter.Optional },\n                        new { productId = @\"\\d+\" },\n                        new[] { \"Nop.Web.Controllers\" });\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","mvc","html.actionlink"],"answer_count":5,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":1743,"score":6,"question_id":8331041,"title":"How to use MVC 3 @Html.ActionLink inside c# code","body":"<p>I want to call the @Html.ActionLink method inside a c# function to return a string with a link on it.</p>\n\n<p>Something like this:</p>\n\n<pre><code>string a = \"Email is locked, click \" + @Html.ActionLink(\"here to unlock.\", \"unlock\") ;\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","jquery-ui","jquery-ui-autocomplete"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13066171,"title":"How to Show Image in Jquery-UI Autocomplete","body":"<p>i am using jquery-ui auto-complete and making a  ajax call inside the auto-complete function i am calling my controller action which returns Json , every thing is working fine now i want to show image in suggestion drop down , i am also taking image URL in json how can i show image in suggestion drop down along with Name </p>\n\n<p><strong>JavaScript</strong>  </p>\n\n<pre><code> function log(message) {\n            $(\"&lt;div&gt;\").text(message).prependTo(\"#log\");\n            $(\"#log\").scrollTop(0);\n        }\n\n        $(\"#search\").autocomplete({\n            source: function (request, response) {\n                $.ajax({\n                    url: \"/Home/GetCompanyNames\",\n                    dataType: \"jsonp\",\n                    data: \"searchterm=\" + request.term,\n                    success: function (data) {\n                        response($.map(data, function (item) {\n                            alert(item.Value);\n                            return {\n                                label: item.Name,\n                                value: item.Name\n                            };\n                        }));\n                    }\n                });\n            },\n            minLength: 2,\n            select: function (event, ui) {\n                alert(ui.item.Name);\n            alert(ui.item.Value);\n            alert(ui.item.LogoUrl);\n            },\n            open: function () {\n                $(this).removeClass(\"ui-corner-all\").addClass(\"ui-corner-top\");\n            },\n            close: function () {\n                $(this).removeClass(\"ui-corner-top\").addClass(\"ui-corner-all\");\n            }\n        });\n\n    });\n</code></pre>\n\n<p><strong>Action in Controller :</strong></p>\n\n<pre><code>    public JsonResult GetCompanyNames (string searchterm)\n    {\n        var companies = context.companyService.Query().Where(x =&gt; x.Name.Contains(searchterm)).ToList();\n        var list = companies.Select(item =&gt; new SearchJsonModel\n                                                {\n                                                    LogoUrl = item.Logo != null || item.Logo != \"\" ? \"&lt;img  src='/Upload/\" + item.Logo + \"' /&gt;\" : \"&lt;img src='/home/image?image=\" + item.Name + \"' /&gt;\", Name = item.Name, Value = item.InternetName\n                                                }).Select(model =&gt; (model)).ToList();\n        return Json(list, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p><strong>SearchJsonModel :</strong></p>\n\n<pre><code> public class SearchJsonModel\n{\n    public string Name { get; set; }\n    public string Value { get; set; }\n    public string LogoUrl { get; set; }\n}\n</code></pre>\n\n<p>Please ask me if you need more detail and thanks in advance . </p>\n"},{"tags":["asp.net-mvc-3","entity-framework-4.1","null-object"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13065324,"title":"Public ActionResult Delete(int id, brand brand) - Null brand object (MVC3 & Entity Framework)","body":"<p>I am learning MVC 3 with Entity Framework and I have a problem with my delete action result method in my controller. I have two ActionResult methods for delete, one with [HttpPost] for submitting data to the database another for populating the view with correct record based on ID.</p>\n\n<p>My problem is I have a null object in my parameter so When I try to commit a delete transaction it can't see the correct values because I have null object with null values.</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing DBFirstMVC.Models;\n\nnamespace DBFirstMVC.Controllers\n{\n    public class BrandController : Controller\n    {\n        // Instantiate model of my database when controller is called\n        //TestBradEntities db = new DBFirstMVC.Models.TestBradEntities();\n        //\n        // GET: /Brand/\n\n        public ActionResult Index()\n        {\n            using (var db = new DBFirstMVC.Models.TestBradEntities1())\n            {\n                return View(db.Brands.ToList());\n            }\n        }\n\n\n        //\n        // GET: /Brand/Details/5\n\n        public ActionResult Details(int id)\n        {\n            return View();\n        }\n\n        //\n        // GET: /Brand/Create\n\n        public ActionResult Create()\n        {\n            return View();\n        }\n\n        //\n        // POST: /Brand/Create\n\n        [HttpPost]\n        public ActionResult Create(Brand brand)\n        {\n\n            using (var db = new DBFirstMVC.Models.TestBradEntities1())\n            {\n                db.Brands.Add(brand);\n                db.SaveChanges();\n            }\n            return RedirectToAction(\"Index\");\n        }\n\n        //\n        // GET: /Brand/Edit/5\n\n        public ActionResult Edit(int id)\n        {\n            try\n            {\n                using (var db = new DBFirstMVC.Models.TestBradEntities1())\n                {\n                    return View(db.Brands.Find(id));\n                }\n            }\n            catch (Exception ex)\n            {\n                return View(ex.ToString());\n\n            }\n        }\n\n        //\n        // POST: /Brand/Edit/5\n\n        [HttpPost]\n        public ActionResult Edit(int id, Brand brand)\n        {\n            try\n            {\n                using (var db = new DBFirstMVC.Models.TestBradEntities1())\n                {\n                    db.Entry(brand).State = System.Data.EntityState.Modified;\n                    db.SaveChanges();\n                    return RedirectToAction(\"Index\");\n                }\n\n            }\n            catch (Exception ex)\n            {\n                return View();\n            }\n        }\n\n        //\n        // GET: /Brand/Delete/5\n\n        public ActionResult Delete(int id)\n        {\n            using (var db = new DBFirstMVC.Models.TestBradEntities1())\n            {\n                return View(db.Brands.Find(id));\n            }\n        }  \n\n        //\n        // POST: /Brand/Delete/5\n\n        [HttpPost]\n        public ActionResult Delete(int id, Brand brand)\n        {\n            try\n            {\n                using (var db = new DBFirstMVC.Models.TestBradEntities1())\n                {\n                    db.Entry(brand).State = System.Data.EntityState.Deleted;\n                    db.SaveChanges();\n                }\n                return RedirectToAction(\"Index\");\n            }\n            catch\n            {\n                return View();\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>This is the code with null object:</p>\n\n<pre><code> [HttpPost]\n public ActionResult Delete(int id, Brand brand)\n</code></pre>\n\n<p>Brand is null and I dont understand why. For example </p>\n\n<pre><code>[HttpPost]\npublic ActionResult Edit(int id, Brand brand)\n</code></pre>\n\n<p>Brand Parameter here in Edit actionresult has data in the object and not null values.</p>\n\n<p>Does anyone know how to fix this? Thanks.</p>\n"},{"tags":["c#",".net","asp.net-mvc-3","soap"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13066140,"title":"sending SOAP request in asp.net mvc3","body":"<p>I want to send following SOAP/XML request and get the SOAP response back in asp.net mvc/C#</p>\n\n<pre><code>&lt;?xml\n&lt;soapenv:Envelope\nxmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\nxmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\"\nxmlns:urn=\"urn:myurn\"&gt;\n   &lt;soapenv:Header/&gt;\n   &lt;soapenv:Body&gt;\n      &lt;urn:fLocHistory \nsoapenv:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\"&gt;\n         &lt;HistRequest \nxsi:type=\"urn:SubMemLocationHistoryRequest\"&gt;\n            &lt;MSID xsi:type=\"xsd:string\"&gt;test&lt;/MSID&gt;\n            &lt;AID xsi:type=\"xsd:int\"&gt;2&lt;/AID&gt;\n            &lt;MemMSISDN xsi:type=\"xsd:string\"&gt;test&lt;/MemMSISDN&gt;\n\n         &lt;/HistRequest&gt;\n      &lt;/urn:fLocHistory&gt;\n   &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n\n<p>What is the better way to send request. I have seen example regarding <code>MSXML2</code>, <code>WCF</code> or <code>asmx</code>. If you could point some good starting tutorial. I have seen some examples <a href=\"http://msdn.microsoft.com/en-us/library/ms972326.aspx\" rel=\"nofollow\">here</a> and <a href=\"http://www.asp.net/web-forms/videos/building-35-applications/an-introduction-to-soap-based-web-services-with-visual-web-developer-2008\" rel=\"nofollow\">here</a> and <a href=\"http://stackoverflow.com/questions/885883/soap-using-c-sharp\">here</a>.</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","mvc","poco","data-access-layer"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13059901,"title":"Passing POCOs or EF objects to the Web project?","body":"<p>Say I have a Visual studio solution with two projects: one web project, and one data project.</p>\n\n<p>Does it really matter whether I pass the EF object from the data project to the web project, or do I need to explicitly define POCOs in the data project to pass to the web project?</p>\n\n<p>It seems to me that needing to create POCOs instead of simply using EF objects adds yet another thing that needs to be done...and I don't particularly see the purpose.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13063931,"title":"How could I custom routing with areas in asp.net mvc","body":"<p>I am working on asp.net mvc 3. I am trying to implement the project with areas. i am facing problems with routing. I have folder structure like, <code>projectName/areas/Dashboard/</code> and in my DashboardAreaRegistration.cs </p>\n\n<pre><code>public override void RegisterArea(AreaRegistrationContext context)\n        {\n            context.MapRoute(\n                \"Default_Dashboard\",\n                \"Dashboard/{controller}/{action}/{id}\",\n                new { action = \"Index\", id = UrlParameter.Optional }\n            );\n        }\n</code></pre>\n\n<p>so my routing looks like, <code>localhost:56788/Dashboard/Dashboard/Index</code> here i need my routing should looks like <code>localhost:56788/Dashboard/Index</code> for that i have written like,</p>\n\n<pre><code>context.MapRoute(\n                \"Default_Dashboard\",\n                \"Dashboard/{action}/{id}\",\n                new { area = \"Dashboard\", controller = \"Dashboard\", action = \"PatientPortal\", id = UrlParameter.Optional },\n                new[]{typeof(Controllers.DashboardController).Namespace}\n            );\n\ncontext.MapRoute(\n                \"Default_Dashboard\",\n                \"{controller}/{action}/{id}\",\n                new { area = \"Dashboard\", controller = \"Dashboard\", action = \"PatientPortal\", id = UrlParameter.Optional },\n                new[]{typeof(Controllers.DashboardController).Namespace}\n            );\n</code></pre>\n\n<p>but no use none of them doesnt work for me that means it shows resource not found error. please guide me. </p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":20,"score":2,"question_id":13064843,"title":"Unable to reference all Model objects in MVC View","body":"<p>I have an odd problem whereby the model in my vbhtml file will correctly reference and bring up the model's attributes for 1 item but not for another.\nFYI, The page is added as a partial page, connected to another vbhtml page.</p>\n\n<p>My page is structured such that I want to list a number of people (beneficiaries), below each question (question text).</p>\n\n<p>I am referencing my Model type using the syntax: @ModelType RHEAL_START.QuestionWithAnswers, so this should automatically allow the model items to be declared when instantiated.</p>\n\n<p>The @ModelType declaration correctly allows the referencing of the 2nd model field (Model.benAnswers) but not the first one I have declared (Model.questionText).</p>\n\n<p>Both items are part of the same model and, I have tried moving the declarations above and below the  and  headers but, this did not bring up an IntelliSense for the Model.questionText.</p>\n\n<p>I looked at the following post and tried addding in a reference to the Layout file but alas, this did not bring up an IntelliSense either.\n<a href=\"http://stackoverflow.com/questions/12346274/mvc3-render-view-that-is-not-a-method-in-a-controller\">MVC3 - render view that is not a method in a controller</a></p>\n\n<p>See the code below. Can anyone suggest where I'm going wrong and what else I can try?\nIf you need more information, please let me know.</p>\n\n<pre><code>@ModelType RHEAL_START.QuestionWithAnswers\n@Code\n    Layout = \"~/Views/MedicalQuestions/MedicalQuestions.vbhtml\"\nEnd Code\n    &lt;div id=\"questionPanel\"&gt;\n        @Code \n            Dim qAndARef As Integer = 0\n        End Code\n\n            &lt;!-- Show question text and number --&gt;\n            &lt;h1&gt;&lt;a href=\"#\"&gt;Model.questionText&lt;/a&gt;&lt;/h1&gt;\n\n            &lt;table&gt;\n\n                &lt;tr&gt;\n                    &lt;td style=\"font-weight: bold\"&gt;\n                        Beneficiary &lt;/td&gt;\n                    &lt;td style=\"font-weight: bold\"&gt;\n                        Yes/No &lt;/td&gt;\n                    &lt;td style=\"font-weight: bold\"&gt;\n                        Details &lt;/td&gt;\n                &lt;/tr&gt;\n\n                &lt;!-- !!Iterating over each beneficiary for Medical Question --&gt;\n\n                @For Each benanswer As RHEAL_START.BeneficiaryAnswer In Model.benAnswers\n\n                Html.Partial(\"../MedicalQuestions/BeneficiaryAnswerPartial\", benanswer)\n\n                Next\n            &lt;/table&gt;\n\n\n        @*@Html.ValidationSummary()*@\n\n    &lt;/div&gt;\n\n@Section Scripts\n    @Scripts.Render(\"~/Scripts/RHEAL/YesNoDropDownValidation.js\")\nEnd Section\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc-3","html.dropdownlist"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":13026974,"title":"Dropdownlist selected value does not return when navigating with browser back button","body":"<p>I've got a dropdownlist. As soon as user changes its selected value, the page is reloaded. </p>\n\n<p>The html looks like this:</p>\n\n<pre><code>&lt;select id=\"period\" name=\"MyViewModel.Period\"&gt;\n    &lt;option selected=\"selected\" value=\"/Home/11-2012/Index\"&gt;November 2012&lt;/option&gt;\n    &lt;option value=\"/Home/10-2012/Index\"&gt;October 2012&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>The jquery script looks like this:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        $('select#period').change(function () {\n            var temp = $(this).find('option:selected').val();\n            document.location.href = temp;\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>Everything works great, but if a user uses browser <em>Back</em> button when the original page is loaded back, it has the selected value changed. It surely confuses a user.</p>\n\n<p>So, is it possible to avoid having dropdownlist value changed when navigating to a previous page through browser back button? </p>\n\n<p>P.S.: this <a href=\"http://stackoverflow.com/questions/1235841/asp-net-dropdownlist-autopostback-and-browser-back-button\">ASP.NET DropdownList autopostback and Browser Back Button</a> looks like a similar problem, but it has no answer, only an idea to use java script to reassign the value. But I failed to catch how... I hope turning off caching is not the only way out. I'd better give up using dropdown list then...</p>\n\n<p><a href=\"http://stackoverflow.com/questions/13025421/how-to-refresh-a-page-on-dropdownlist-value-change\">This is</a> my original post, which brought me to this question.</p>\n"},{"tags":["asp.net-mvc-3","asp.net-mvc-4","asp.net-web-api","httprequest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":13060530,"title":"Getting HttpRequest extension method written for MVC to work in Web Api","body":"<p>I'm working with OAuth 2.0 for MVC, a .NET library for Oauth2. I'm building a Web Api project, however, and am hoping to get this library to work with Web Api. </p>\n\n<p>The problem I'm running into is that the library uses two extension methods on the HttpRequestBase that it calls from the controller. </p>\n\n<p>Here are the extension methods:</p>\n\n<pre><code>public static string GetToken(this HttpRequest request)\n    {\n        var wrapper = new HttpRequestWrapper(request);\n        return GetToken(wrapper);\n    }\n\n    public static string GetToken(this HttpRequestBase request)\n    {\n        if (request == null)\n            return String.Empty;\n\n        // Find Header\n        var headerText = request.Headers[OAuthConstants.AuthorzationHeader];\n        if (!String.IsNullOrEmpty(headerText))\n        {\n            var header = new AuthorizationHeader(headerText);\n            if (string.Equals(header.Scheme, \"OAuth\", StringComparison.OrdinalIgnoreCase))\n                return header.ParameterText.Trim();\n        }\n\n        // Find Clean Param\n        var token = request.Params[OAuthConstants.AuthorzationParam];\n        return !String.IsNullOrEmpty(token)\n            ? token.Trim()\n            : String.Empty;\n    }\n</code></pre>\n\n<p>In the MVC project, they simply call Request.GetToken() from the controller. Of course, Web Api's request is an HttpRequestMessage. I'm afraid addressing the difference between HttpRequest and HttpRequest message is beyond my capabilities right now. </p>\n\n<p>Can I convert this extension method to work with HttpRequestMessage or somehow make it work in Web Api??</p>\n\n<p>Thanks!</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","jquery-ui","jquery-ui-autocomplete"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13063527,"title":"How to Map data in jquery-ui autocomplete is not working","body":"<p>i am using jquery-ui autocomplete and making a  ajax call inside the autocomplete function i am calling my controller action which returns Json , but suggestions is not showing in dropdown  </p>\n\n<p><strong>Javascript</strong>  </p>\n\n<pre><code> function log(message) {\n            $(\"&lt;div&gt;\").text(message).prependTo(\"#log\");\n            $(\"#log\").scrollTop(0);\n        }\n\n        $(\"#search\").autocomplete({\n            source: function (request, response) {\n                $.ajax({\n                    url: \"/Home/GetCompanyNames\",\n                    dataType: \"jsonp\",\n                    data: \"searchterm=\" + request.term,\n                    success: function (data) {\n                        response($.map(data, function (item) {\n                            alert(item.Value);\n                            return {\n                                label: item.Name,\n                                value: item.Name\n                            };\n                        }));\n                    }\n                });\n            },\n            minLength: 2,\n            select: function (event, ui) {\n                log(ui.item ?\n                \"Selected: \" + ui.item.label :\n                \"Nothing selected, input was \" + this.value);\n            },\n            open: function () {\n                $(this).removeClass(\"ui-corner-all\").addClass(\"ui-corner-top\");\n            },\n            close: function () {\n                $(this).removeClass(\"ui-corner-top\").addClass(\"ui-corner-all\");\n            }\n        });\n\n    });\n</code></pre>\n\n<p><strong>Action in Controller :</strong></p>\n\n<pre><code>    public JsonResult GetCompanyNames (string searchterm)\n    {\n        var companies = context.companyService.Query().Where(x =&gt; x.Name.Contains(searchterm)).ToList();\n        var list = companies.Select(item =&gt; new SearchJsonModel\n                                                {\n                                                    LogoUrl = item.Logo != null || item.Logo != \"\" ? \"&lt;img  src='/Upload/\" + item.Logo + \"' /&gt;\" : \"&lt;img src='/home/image?image=\" + item.Name + \"' /&gt;\", Name = item.Name, Value = item.InternetName\n                                                }).Select(model =&gt; (model)).ToList();\n        return Json(list, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p><strong>SearchJsonModel :</strong></p>\n\n<pre><code> public class SearchJsonModel\n{\n    public string Name { get; set; }\n    public string Value { get; set; }\n    public string LogoUrl { get; set; }\n}\n</code></pre>\n\n<p><strong>and this is what i am getting in response of ajax call ( this is the image of firebug )</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/jronT.png\" alt=\"enter image description here\"></p>\n\n<p>Please ask me if you need more detail and thanks in advance . </p>\n\n<p><strong>Edit</strong></p>\n\n<p>now i am trying to access selected value in select callback but its giving <code>Undefined</code> </p>\n\n<pre><code>select: function (event, ui) {\n           alert(ui.item.Name);\n                alert(ui.item.Value);\n                alert(ui.item.LogoUrl);\n        },\n</code></pre>\n"},{"tags":[".net","html","xml","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":37,"score":0,"question_id":13064064,"title":".NET MVC3 - reading HTML parts from XML and showing in razor view","body":"<p>I need to show some text and image data (which are in html markup) into a Razor view from a XML file. for example I have the following Xml:</p>\n\n<pre><code>&lt;newsitems&gt;\n    &lt;news id=\"1\"&gt;\n         &lt;body&gt;\n             &lt;p&gt;lorem ipsum &lt;h2&gt;dolor&lt;/h2&gt;.&lt;/p&gt;\n         &lt;/body&gt;\n    &lt;/news&gt;\n&lt;/newsitems&gt;\n</code></pre>\n\n<p>then I need to show that inner html into a view. please show me the best way and code if possible! thx.</p>\n"},{"tags":["c#","asp.net-mvc-3","authorization"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":143,"score":2,"question_id":10954907,"title":"How to write AuthorizeAttribute if a role contains space","body":"<p>I am using MVC3/4. But it is just a general question in authorization.</p>\n\n<p>One of the role I have is named \"Trip Leader\" in the database, which contains a space.</p>\n\n<p>I tried <code>[Authorize(Roles=\"'Trip Leader', Administrator\")]</code> but it failed to work. Can anyone help?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","authorization"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13063001,"title":"Can't make AuthorizeAttribute work, if role name contains spaces","body":"<p>While working over a windows domain intranet site (with <code>&lt;authentication mode=\"Windows\" /&gt;</code>) I came across the following problem:</p>\n\n<pre><code>[Authorize(Roles = \"Domain Users, Domain Admins\")]\npublic class MyController: Controller {...}\n</code></pre>\n\n<p>This controller is not available for any user because of the spaces in the names of the active directory groups. So can I make MVC (or ASP.Net) authorize correctly, while using role names (here: names of AD groups) with spaces?</p>\n\n<p>Just similar questions with no respond: </p>\n\n<ol>\n<li><a href=\"http://stackoverflow.com/questions/10611313/ad-groups-with-spaces-used-for-roles-authorization\">AD Groups with spaces used for roles authorization</a>.</li>\n<li><a href=\"http://stackoverflow.com/questions/10954907/how-to-write-authorizeattribute-if-a-role-contains-space\">How to write AuthorizeAttribute if a role contains space</a></li>\n</ol>\n"},{"tags":["asp.net","asp.net-mvc-3","validation","message","clear"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13062313,"title":"Clear server validation message before submit","body":"<p>To replicate the issue:</p>\n\n<ol>\n<li>Create an ASP.NET MVC 3 page with server validation.</li>\n<li>Submit with validation error.</li>\n<li>Server validation error appears in red.</li>\n<li>Correct the validation error and submit again, then Success\nredirected to another report page.</li>\n<li>On clicking the Back button on the report page, the validation error\nmessage still showing on the original form.</li>\n</ol>\n\n<p>Users getting annoyed seeing the server validation message when clicking the back button. </p>\n\n<ul>\n<li>I would not consider a solution to disable the back button.</li>\n<li>I would not consider a solution to refresh the page on clicking the\nback button.</li>\n</ul>\n\n<p><strong>I would consider the server validation message to disappear before making the successful form submission or any other valid solution.</strong></p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13063004,"title":"create a dropdownlist based on another dropdown list selected value in ASP.net MVC","body":"<p>I have a scenarioviewmodel which fetches the data from db and creates a selectlistitem. </p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nnamespace PerformanceCharts.Models\n{\n    public class ScenarioViewModel\n    {\n        public string scenario { get; set; }\n        public IEnumerable&lt;SelectListItem&gt; scenarios\n        {\n            get\n            {\n                List&lt;SelectListItem&gt; items= new Data2DB().fetchScenarios().Select(scenario =&gt; \n                    new SelectListItem()\n                {\n                    Value = scenario.ToString(),\n                    Text = scenario.ToString()\n                }).ToList();\n\n                var emptyItem = new SelectListItem(){\n                    Value = \"\",\n                    Text  = \"\"\n                };\n                items.Insert(0, emptyItem);\n                return items; \n            }\n        }\n    }\n}\n</code></pre>\n\n<p>In scenariosController in Index() i have created a view for scenarioviewmodel. </p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\n\nusing PerformanceCharts.Models;\n\nnamespace PerformanceCharts.Controllers\n{\n    public class ScenariosController : Controller\n    {\n        public ActionResult Index()\n        {\n            return View(new ScenarioViewModel());\n        }\n\n        [HttpPost]\n        public ActionResult Index(int year)\n        {\n            // TODO: do something with the selected year\n            return new EmptyResult();\n        }\n\n    }\n}\n</code></pre>\n\n<p>In index view, I created a dropdownlist for scenarios.   </p>\n\n<pre><code>@model PerformanceCharts.Models.ScenarioViewModel\n\n@{\n    Layout = null;\n}\n\n&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        $('#selectscenario select').change(function () {\n            $.post('@Url.Action(\"Index\", \"Scenarios\")', { scenario: $(this).val() }, function (result) {\n\n            });\n        });\n    });\n&lt;/script&gt;\n@Html.DropDownListFor(x =&gt; x.scenario, Model.scenarios)\n</code></pre>\n\n<p>In _Layout.html i added the following line : </p>\n\n<pre><code> &lt;div id=\"selectscenario\"&gt;\n                            &lt;label&gt;Select Scenario&lt;/label&gt;\n                            @Html.Action(\"Index\", \"Scenarios\")\n                        &lt;/div&gt;\n</code></pre>\n\n<p>Now I want another dropdown under this dropdown to select years of the scenario. Each scenario has specific years. It should be based on scenario selected value. Someone help me..:(</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":13062235,"title":"Add views in sub-folders in ASP.NET MVC 3","body":"<p>I am working on ASP.NET MVC 3 project. I want to divide controllers, models, and views in sub-folders for the sake of simplicity. I able to do it with controllers and models but when i create a view it creates automatically to root folder <code>Views</code>, Is there any way to solve this problem?</p>\n\n<p>eg. I can create  </p>\n\n<p>model class as,</p>\n\n<pre><code>Models/Finance/Bank.cs\nModels/Finance/Finance.cs\nModels/Production/Production.cs\n</code></pre>\n\n<p>controller as,</p>\n\n<pre><code>Controllers/Finance/BankController/Create\nControllers/Finance/BudgetController/Create\nControllers/Production/ProcessController/Create\n</code></pre>\n\n<p>but where i tried to create view for above actions, it creates in to,</p>\n\n<pre><code>Views/Bank/Create.aspx\nViews/Budget/Create.aspx\nViews/Process/Create.aspx\n</code></pre>\n\n<p>I want it should be like,</p>\n\n<pre><code>Views/Finance/Bank/Create.aspx\nViews/Finance/Budget/Create.aspx\nViews/Prodution/Process/Create.aspx\n</code></pre>\n\n<p>Is there any way to create views in same sub-folder as of that created for Controllers and models? thanks!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13062151,"title":"500 - Internal Server Error after moving my ASP MVC4 Azure to VS2012 on a new PC","body":"<p>I have just moved my fully working ASPMVC4 Cloud application to a local instance of VS2012 on a different computer. When I run the application I see the following page:</p>\n\n<p>Server Error\n500 - Internal Server Error.</p>\n\n<p>Can someone give me some advice here. I wonder if it's because I am not using the same PC as I was using before. Does it now consider I'm using a remote PC ?</p>\n\n<p>Note that when I create a new ASP MVC4 cloud application and run it then it works fine and I see the default MVC pages.</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":170,"score":0,"question_id":7293971,"title":"Question on using content from other cshtml pages in razor","body":"<p>I've read a couple of articles on using asp.net mvc3 razor (which I am fairly new to). I have a couple of .cshmtl pages which are like shared content (e.g. header). They are basically just html pages with one or two divs etc.</p>\n\n<p>To embed this in my main page, do I just use @renderPage(\"page address\"). Do I also need a call to @renderbody? Do I need to specify the/a page in the layout property?</p>\n\n<p>Thanksa</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":20,"score":-3,"question_id":13053740,"title":"Getting current user to be used in table mvc asp.net","body":"<p>I would like to get the current user session and use it to filter a table.\nThe reason I am doing this is that I want to allow the user to view only certain information in the table.</p>\n"},{"tags":["ajax","asp.net-mvc-3","jquery-ajax","asp.net-ajax"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":2858,"score":1,"question_id":10317141,"title":"Post form data to Controller's action with Ajax","body":"<p>I have a page in MVC3, with a link (Ajax.ActionLink). When user clicks it, it calls controller's action, and the result is inserted into a div, with replace.</p>\n\n<p>Code is shown below:</p>\n\n<pre><code>@Ajax.ImageActionLink(\"/Images/btn_share.png\", \"Share pool\", \"SharePool\", new { poolKey = Model.Id, poolName = Model.Name },\n    new AjaxOptions { \n        UpdateTargetId=\"popup\", \n        HttpMethod=\"GET\", \n        InsertionMode = InsertionMode.Replace,\n        LoadingElementId=\"loading_dialog\",\n        OnSuccess = \"ShowPopup('#popup_share', true, true)\"\n    } \n</code></pre>\n\n<p>ImageLinkAction is custom extension method to use image as link, and ShowPopup is a javascript function that shows the updated div (to make it look as a popup)</p>\n\n<p>Now the markup code inserted into the div which creates the popup contains a form as below</p>\n\n<pre><code>&lt;div&gt;\n@using (Html.BeginForm()) {\n\n    @Html.HiddenFor(model =&gt; model.ID)\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.EmailAddress)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.EmailAddress)\n        @Html.ValidationMessageFor(model =&gt; model.EmailAddress)\n    &lt;/div&gt;\n\n    // ... other fields\n\n    @Html.ValidationSummary(true)\n    &lt;p&gt;\n        &lt;button type =\"submit\"&gt;Share&lt;/button&gt;       \n    &lt;/p&gt;\n}\n&lt;/div&gt;\n</code></pre>\n\n<p>The issue is with the form's submit: the Submit button calls the proper action but with a postback, which cause my page to refresh. What I need is to post data with ajax, receive the response, which is another partial view that gets inserted into the </p>\n\n<p>I was trying to replace the Submit button with Ajax.ActionLink as below</p>\n\n<pre><code>    @Ajax.ActionLink(\"Share\", \"Share\",\n        new Models.MyModel \n            {\n                ID = Model.ID,\n                EmailAddress = Model.EmailAddress\n            },\n        new AjaxOptions\n            {\n                UpdateTargetId=\"popup\", \n                HttpMethod=\"POST\", \n                InsertionMode = InsertionMode.Replace,\n                LoadingElementId=\"loading_dialog\",\n                OnSuccess = \"ShowPopup('#popup_share', true, true)\"\n            }\n</code></pre>\n\n<p>The controller's code looks like this:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult SharePool(MyModel model)\n{\n    // ...\n    return PartialView(\"_MyPartialView\", model)\n}\n</code></pre>\n\n<p>The problem is, in the moment the Ajax ActionLink is rendered (when form is loaded) there is no value in Model.EmailAddress, so my POST action in controller receives only ID parameter.</p>\n\n<p>How can I handle this? Ideally, I think I should add                     </p>\n\n<pre><code>OnBegin = \"PreparePostData()\"\n</code></pre>\n\n<p>But since I know javascript only basically, I have no idea how can I implement this. I think this PreparePostData() should collect form fields and prepare the object routeValues parameter, to be set before the ajax call is invoked.</p>\n\n<p>Anyone can give me some indications on how to implement this?</p>\n\n<p>Or is any other, better approach on this problem?</p>\n\n<p>Thank you</p>\n"},{"tags":["jquery","asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":13052369,"title":"jQuery datetime picker not rendering CSS file","body":"<p>I am using the jQuery datetime picker with ASP.Net MVC3. For some reason, although the datetimepicker shows up, the stylesheet doesn't render properly. </p>\n\n<p>(I'd post a photo but I'm new here, so I'll describe it instead since I can't post photos)</p>\n\n<p>When I click on the textbox that's supposed to fire the datetime picker, much like the default example shown for the jQuery demo it opens the calendar view, but the background is missing and the text \"prevnext\" shows up above the month and year so it looks transparent against the rest of the form that it's on top of. Similar to this post - <a href=\"http://stackoverflow.com/questions/10229668/jquery-datetimepicker-not-displaying-with-css\">Jquery DateTimePicker not displaying with CSS</a> but I don't even get the blue background.</p>\n\n<p>The answer at this post : <a href=\"http://stackoverflow.com/questions/10229668/jquery-datetimepicker-not-displaying-with-css\">Jquery DateTimePicker not displaying with CSS</a> was for partial views and not full views and the solution did not help me, so I'm wondering if there's anything different for full views. </p>\n\n<p>I have the following code in Site.Master:</p>\n\n<pre><code>&lt;script src=\"&lt;%: Url.Content(\"~/Content/themes/base/jquery-ui.css\") %&gt;\" rel=\"stylesheet\"&gt;&lt;/script&gt;\n&lt;script src=\"&lt;%: Url.Content(\"~/Content/themes/base/jquery.ui.datepicker.css\") %&gt;\" rel=\"stylesheet\"&gt;&lt;/script&gt;\n&lt;script src=\"&lt;%: Url.Content(\"~/Scripts/jquery-1.8.2.js\") %&gt;\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"&lt;%: Url.Content(\"~/Scripts/jquery.ui.core.js\") %&gt;\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"&lt;%: Url.Content(\"~/Scripts/jquery.ui.widget.js\") %&gt;\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"&lt;%: Url.Content(\"~/Scripts/jquery.ui.datePicker.js\") %&gt;\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        $(\".dp\").datepicker({\n        dateFormat: 'mm/dd/yy'\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>In my content page (view) the control is declared like this: <br></p>\n\n<pre><code>    &lt;asp:TextBox ID=\"txtBirthday\" runat=\"server\" class=\"dp\" /&gt;\n</code></pre>\n\n<p>I also have another existing style sheet declared specifically to set the layout of the page:<br></p>\n\n<pre><code>    &lt;link href=\"../../Content/Site.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n</code></pre>\n\n<p>And finally, a helper viewcontrol to identify the textboxes that are set as datetimepickers: <br></p>\n\n<pre><code>&lt;%@ Control Language=\"C#\" Inherits=\"System.Web.Mvc.ViewUserControl&lt;System.DateTime?&gt;\" %&gt;\n</code></pre>\n\n<p><br></p>\n\n<pre><code>&lt;%: Html.TextBox(\"\",  String.Format(\"{0:yyyy-MM-dd}\", Model.HasValue ? Model : DateTime.Today), new { @class = \"dp\"})%&gt;\n</code></pre>\n\n<p><p>Can anyone help me with why the CSS is not rendering? </p>\n"},{"tags":["asp.net-mvc-3","asp.net-mvc-4","asp.net-mvc-routing","url-routing","asp.net-routing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13059637,"title":"MVC3 Routing with regular expressions","body":"<p>In our current project we have url's like <code>{controller}/{action}/param1/param2/...param-N</code></p>\n\n<p>and <code>{controller}/{action}/param</code>.</p>\n\n<p>I am able to get the routing for second type as it is looking straightforward.</p>\n\n<p>But I am not sure how to handle the first type where I can have multiple number of params.</p>\n\n<p>I am thinking of using regular expressions or apply some logic to find the index of <code>'/'</code> in params and send it to appropriate action and there handling the Raw url.</p>\n\n<p>But I am not quite sure how to route the first type.</p>\n\n<p>Thanks in advance</p>\n\n<p>Naresh</p>\n"},{"tags":["asp.net-mvc-3","linq-to-twitter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13050638,"title":"Retreive userId and send private message with linqtotwitter","body":"<p>I want to send private message to Twitter with my web app in asp.net mvc3. I was doing the authorization with <code>oauth</code>, here is my code:</p>\n\n<p>in AccountController:</p>\n\n<pre><code>     public ActionResult LogOn()\n    {\n        credentials.ConsumerKey = TwitterClient.ConsumerKey;\n        credentials.ConsumerSecret = TwitterClient.ConsumerSecret;\n\n        auth = new MvcAuthorizer {  Credentials = credentials };\n        auth.CompleteAuthorization(Request.Url);\n        if (!auth.IsAuthorized)\n        {\n            string callbackUrl = \"http://127.0.0.1:31891/Account/CompleteAuth\";\n            Uri uri = new Uri(callbackUrl);\n            return auth.BeginAuthorization(uri);\n        }\n        return RedirectToAction(\"Index\", \"Home\");\n     }\n</code></pre>\n\n<p>After the user is authorized , he is redirect to action <code>CompleteAuth</code>, and I get the token and <code>tokenSecret</code>, here is code of this action:</p>\n\n<pre><code>    public ActionResult CompleteAuth(string oauth_token, string oauth_verifier)\n   {          \n        string AccessToken = oauth_token;\n        string AccessTokenSecret = oauth_verifier;\n        TempData[\"AccessToken\"] = AccessToken;\n        TempData[\"TokenSecret\"] = AccessTokenSecret;\n        return RedirectToAction(\"Tweeting\",\"Home\");\n    }\n</code></pre>\n\n<p>after, it's redirect to Home in action Tweeting, when i try to get userId and send to him direct message : </p>\n\n<pre><code>    public ActionResult Tweeting()\n    {\n        var auth = new MvcAuthorizer\n        {\n            Credentials = new InMemoryCredentials()\n            {\n                ConsumerKey  = TwitterClient.ConsumerKey,\n                ConsumerSecret = TwitterClient.ConsumerSecret,\n                //OAuthToken = (string)Session[\"AccessToken\"],\n                //AccessToken = Session[\"TokenSecret\"]\n                OAuthToken = TempData[\"AccessToken\"] as string,\n                AccessToken = TempData[\"TokenSecret\"] as string\n            }\n        };\n        var twitterContext = new TwitterContext(auth);                                \n        var message = twitterContext.NewDirectMessage(auth.UserId, \"Hi ucef, cool to discuss with you\" + DateTime.Now);\n        return View();\n    }\n</code></pre>\n\n<p>But exception occured because auth.UserId is null, have you any idea !!</p>\n\n<p>Help please. </p>\n"},{"tags":["asp.net-mvc-3","c#-4.0","linq-to-twitter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13053529,"title":"Send Private message with LinqToTwitter","body":"<p>Hi i want to send private message with linqToTwitter, here is my code : </p>\n\n<pre><code> var auth = new MvcAuthorizer\n        {\n            Credentials = new InMemoryCredentials()\n            {\n                ConsumerKey  = TwitterClient.ConsumerKey,\n                ConsumerSecret = TwitterClient.ConsumerSecret,                    \n                OAuthToken = TempData[\"AccessToken\"] as string,\n                AccessToken = TempData[\"TokenSecret\"] as string\n            }\n        };            \n        var twitterContext = new TwitterContext(auth);            \n        var message = twitterContext.NewDirectMessage(auth.UserId, \"Hi ucef, cool to discuss with you\" + DateTime.Now);\n</code></pre>\n\n<p>but auth.UserId is null, have you any idea !!!</p>\n"},{"tags":["asp.net-mvc-3","mvc","models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13060812,"title":"Models - in Data Project or Web Project?","body":"<p>When creating a new ASP.NET MVC3 application, in the default project there is a <code>Models</code> folder. This <code>Models</code> folder includes the <code>AccountModels</code> - <code>RegisterModel</code>, <code>LoginModel</code>, etc. </p>\n\n<p>I have a separate project for the DAL - it includes a <code>repository</code> and a <code>service</code>.</p>\n\n<p>Now, I have a method in my <code>service</code>:</p>\n\n<p><code>TblUser Register(RegisterModel model);</code></p>\n\n<p>For this to work, I must reference the web project in my data project.</p>\n\n<p>Is this appropriate, or should I include my <code>Models</code> folder in my data project instead?</p>\n"},{"tags":["asp.net-mvc-3","validation","client-side"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":29,"score":2,"question_id":13060133,"title":"Client Side Validation on submit only","body":"<p>Ok so this is a really simple scenario which I can't figure out since I've just started with MVC. I have created a custom password validator to use both client and server side. For the meantime the client-side validator does nothing but check the length (it will do more than this once I get it working). The server-side validation works fine. This is the client side implementation</p>\n\n<pre><code>$.validator.unobtrusive.adapters.add(\"password\",\n    function (options) {\n        options.rules['password'] = {};\n        options.messages['password'] = options.message;\n    }\n);\n$.validator.addMethod(\"password\", function (value, element, params) {\n    if (value.length &lt; 8 || value.length &gt; 15) {\n        return false;\n    }\n    return true;\n}); \n</code></pre>\n\n<p>I only want this validator to fire when the form is submitted. </p>\n\n<p>Currently, as soon as you start typing it tells you that your password is invalid until the password meets the length requirements. I want it to act like the standard 'Required' validators I have on other form fields where they only validate the input once the form is submitted.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":65,"score":3,"question_id":13058577,"title":"Dynamic MVC Razor Model from Database","body":"<p>I have a database table with questions for a competition. These are created for specific competitions from an edit page that our staff can use, so each competition may have different questions.</p>\n\n<p>The Questions table has details like the field name, the type (ie checkbox) and the validation type (ie Required and Compare etc).</p>\n\n<p>Is there any way when trying to build the competition view for the customer to dynamically render the questions to the view (as each competition will have different questions)?</p>\n\n<p>I was thinking a dynamic model or something? I am not really sure. Any ideas are welcome.</p>\n\n<hr>\n\n<p>I am a little confused about how to fit my objects into this model structure. So do I create the editor template for the question of the Answer?</p>\n\n<p>Basically when an admin user set's up a competition they have an entry in the competition table with the basic comp into then they can create a number of Questions which go into the CompetitionQuestion table which is linked back to the Comp table, each comp has any number of questions - this table holds details like the field name, the type (ie checkbox) and the validation type (ie Required and Compare etc) as mentioned above.</p>\n\n<p>But when the competition view is rendered for a person to enter it it pulls info from the Comp Model (which is fine) then I need to loop through the CompetitionQuestion's (don't know how to create model for this) and render out each question for the specific comp - these are then saved when the person enters in the Entry (basic user and comp details) and EntryAnswer (answer to each question) tables.</p>\n\n<p>So do I link the EditorTemplate up to the CompetitionQuestion object or the EntryAnswer object?</p>\n\n<p>Ah so confused right now :(</p>\n"},{"tags":["asp.net-mvc-3","autofac"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":203,"score":1,"question_id":10048494,"title":"Property Injection with Autofac 2.5","body":"<p>How do I enable property injection in Autofac 2.5 so that my public ILogger Log property gets set automagically?</p>\n\n<p>I was using the following method to enable property injection in a MVC3 project with Autofac 2.4</p>\n\n<pre><code>public class InjectPropertiesByDefaultModule : Autofac.Module\n{\n    protected override void AttachToComponentRegistration (IComponentRegistry componentRegistry, IComponentRegistration registration)\n    {\n        registration.Activating += (s, e) =&gt;\n        {\n            e.Context.InjectProperties (e.Instance);\n        };\n    }\n}\n\n\nbuilder.RegisterModule&lt;InjectPropertiesByDefaultModule&gt; ();\n</code></pre>\n\n<p>but this no longer seems to work with Autofac 2.5.</p>\n"},{"tags":["asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":119,"score":0,"question_id":8100873,"title":"ASP.NET MVC 3 Unity DI - Reslove the parameter at runtime","body":"<p>I am developing ASP.NET MVC application using Unity DI framework. I am trying the scenario the web application to connect different database based URI segment. I tried several options and it is not successed. </p>\n\n<p>I am registering all the objects in the unity container on Application Load event in Gloabl.asax file. It is working fine connecting with single database.</p>\n\n<pre><code>container.RegisterType&lt;IContext, DbContext&gt;(new PerRequestLifetimeManager(), new InjectionConstructor(\"data source=.; Initial Catalog=catalog1; User ID=sa; Password=xxxxxx;\"));\n</code></pre>\n\n<p>But I want to change the connection string dynamically based on URI parameter. Like  <code>http://www.domain.com/ABC</code>. If <code>ABC</code>, want to connect different database. How do i manually reslove the <code>DbContext</code> object at runtime before connecting to the database? or what is the best alternative option?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","entity-framework-4","asp.net-mvc-4","entity-framework-5"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":125,"score":0,"question_id":13055181,"title":"Code first database on Entity Framework 5 in another project","body":"<p>I've got an ASP.NET MVC 4 site with MSSQL database generated by code first approach. I want to use this database in another project. This project should crawl several tables from db, update them and send notification to users.</p>\n\n<p>What is the best way to add existing database from the first project to the second project? I'm thinking about generating edmx by database, but this approach doesn't seem good enough.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","dynamic-content"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13055522,"title":"Dynamic content with MVC 3 razor","body":"<p>I'm developing a e-shop with mvc 3 and razor. In the part where I show the products there is a menu of categories and I want that the content of the page change according to the selected category without leaving the page.</p>\n\n<p>I have done this before with ajax but I'm new in mvc 3 and razor. I would do this that way but I think there is a way to do this with mvc and razor and I'm not sure how to make the controller to send the data I need without leaving the page.</p>\n\n<p>how can I do this? \nhow should the controller be?</p>\n\n<p>Any help is welcome\nThanks</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":14,"score":1,"question_id":13059520,"title":"Implement a RequiredIf and RequiredIfNot attribute validator, which depends on two values","body":"<p>I need to implement a RequiredIF validator which depends on two values, a checkbox and a value selected from a dropdown.\nI need if possible something like</p>\n\n<pre><code>  [RequiredIf(\"Property1\", true,\"Property2,\"value\", ErrorMessageResourceName = \"ReqField\", ErrorMessageResourceType = typeof(RegisterUser))]\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","jquery-ui","model-binding"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":13059288,"title":"Binding additional data values for jQuery UI with ASP.NET MVC3","body":"<p>Having trawled the inter-webs for an answer to this I have come up dry. </p>\n\n<p>My aim with the function below is to be able to populate an autocomplete textbox with values which will contain text visual aids, but backing values. I require these to be bound to a complex object when posted to my MVC controller within a form.</p>\n\n<p>Other than using multitudes of hidden fields, are there any other ways to achieve what I need?</p>\n\n<pre><code> $(\"#addressString\")\n                .autocomplete({\n                    source: function (request, response) {\n                        $.ajax({\n                            url: '/Send/Send/GetAddressBook',\n                            type: \"POST\",\n                            dataType: \"json\",\n                            data: { query: extractLast(request.term), groupName: $('#SelectGroupName').val() },\n                            term: extractLast(request.term),\n                            success: function (data) {\n                                response($.map(data, function (item) {\n                                    return {\n                                        label: item.label,\n                                        value: item.label,\n                                        id: item.id,\n                                        type: item.type\n                                    };\n                                }));\n                            }\n                        });\n                    },\n                    search: function () {\n                        var term = extractLast(this.value);\n                        if (term.length &lt; 1) {\n                            return false;\n                        }\n                        return true;\n                    },\n                    focus: function () {\n                        return false;\n                    },\n                    select: function (event, ui) {\n                        var terms = split(this.value);\n                        terms.pop();\n                        terms.push(ui.item.value);\n                        terms.push(\"\");\n                        this.value = terms.join(\"; \");\n                        return false;\n                    }\n                });\n        });\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13056172,"title":"Extending Html.TextBoxFor and Html.PasswordFor in ASP.NET.MVC to show tooltips, not for validaton","body":"<p>I have the following in my view at the moment:</p>\n\n<pre><code>@Html.PasswordFor(m =&gt; m.Password, new { Title = \"Passwords must be at least 6 characters long\" })\n</code></pre>\n\n<p>Works fine, but what's nagging at me is that it would be really great to be able to get the tooltip in the view model as an attribute, as all the other info is there, and it seems messy to put it in my view.</p>\n\n<p>Is there any way that I can pull the value of the attribute through so that my code is something like:</p>\n\n<pre><code>@Html.PasswordFor(m =&gt; m.Password, new { Title = m.Password.Tooltip })\n</code></pre>\n\n<p>Please note: it's not a validation message that should show / hide based on input, think of it as help text.</p>\n"},{"tags":["asp.net-mvc-3","paypal-sandbox"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":108,"score":1,"question_id":13023168,"title":"Paypal Sandbox MVC3","body":"<p>I was testing the paypal API for a website I'm making. Everything was working fine last night, but when I ran it again today, I received the following error:</p>\n\n<pre><code>Could not establish secure channel for SSL/TLS with authority 'api-aa.sandbox.paypal.com'\n</code></pre>\n\n<p>I know that this question has been asked before, but none of the answers that I looked at have helped. If anything new is out there can you please let me know. This is very urgent, thanks in advanced.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13055873,"title":"How Do I Access a Multiple Select List's Values in Controller?","body":"<p>I cannot seem to access a multiple select list's values when posting.</p>\n\n<p>The code in the view is:</p>\n\n<pre><code>&lt;select id=\"instructors\" name =\"instructors\" multiple=\"multiple\"&gt;\n    @{\n        List&lt;CMMS.WebUI.ViewModels.AssignedInstructor&gt; instructors = ViewBag.Instructors;\n\n        foreach (var instructor in instructors)\n        {\n            if (instructor.HasInstructor)\n            {\n                @:&lt;option value=\"@instructor.InstructorId\" selected=\"selected\"&gt;@instructor.InstructorName&lt;/option&gt;\n            }\n            else\n            {\n                @:&lt;option value=\"@instructor.InstructorId\"&gt;@instructor.InstructorName&lt;/option&gt;\n            }\n    }\n}\n&lt;/select&gt;\n</code></pre>\n\n<p>I have tried grabbing the values in the controller via the following ways:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Edit(int id, FormCollection formCollection)\n{\n    string[] selectedInstructors = formCollection[\"instructors\"];\n    ...\n}\n\n\n[HttpPost]\npublic ActionResult Edit(int id, string[] instructors)\n{  \n    ...\n}\n</code></pre>\n\n<p>Both ways the instructors are always null. If anyone can tell me where I am screwing this up, I would appreciate it very much.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":89,"score":1,"question_id":13033569,"title":"e.preventDefault() is not working in IE8","body":"<p>I'm working on a piece of code to prevent a Telerik Grid from contacting the server to save a duplicate piece of data.  Here is what I have thus far.</p>\n\n<p>View</p>\n\n<pre><code>@(Html.Telerik().Grid&lt;CategoryModel.CategoryUnitsModel&gt;()\n                    .Name(\"categoryunits-grid\")\n                    .DataKeys(keys =&gt;\n                    {\n                        keys.Add(x =&gt; x.Id);\n                        keys.Add(x =&gt; x.CategoryId);\n                        keys.Add(x =&gt; x.UnitId);\n                    })\n                    .DataBinding(dataBinding =&gt;\n                    {\n                        dataBinding.Ajax()\n                            .Select(\"CategoryUnitsList\", \"Category\", new { categoryId = Model.Id })\n                            .Insert(\"CategoryUnitsInsert\", \"Category\", new { categoryId = Model.Id })\n                            .Update(\"CategoryUnitsInsert\", \"Category\", new { categoryId = Model.Id })\n                            .Delete(\"CategoryUnitsDelete\", \"Category\", new { categoryId = Model.Id });\n                    })\n                    .Columns(columns =&gt;\n                    {\n                        columns.Bound(x =&gt; x.UnitId)\n                            .Visible(false);\n                        columns.Bound(x =&gt; x.UnitText);\n                        columns.Command(commands =&gt;\n                        {\n                            commands.Edit();\n                            commands.Delete();\n                        })\n                       .Width(100);\n                    })\n                    .ToolBar(commands =&gt; commands.Insert())\n                    .Pageable(settings =&gt; settings.PageSize(gridPageSize).Position(GridPagerPosition.Both))\n                    .ClientEvents(events =&gt; events.OnRowDataBound(\"onRowDataBound\"))\n                    .ClientEvents(events =&gt; events.OnSave(\"onSave\"))\n                    .EnableCustomBinding(true))\n\n&lt;script type=\"text/javascript\"&gt;\n                    function onRowDataBound(e) {\n                        $(e.row).find('a.t-grid-edit').remove(); //remove Delete button\n                    }\n\n                    function onSave(e) {\n                        $.getJSON('@Url.Action(\"CheckForCategoryUnit\", \"Category\")', { categoryId: $(\"#Id\").val(), unitId: $(\"#UnitText\").val() }, function (data) {\n                            if (data) {\n                                alert(\"Units may not be added twice for a category\");\n                                e.preventDefault();\n                            }\n                            else {\n\n                            }\n                        });\n                    }\n                &lt;/script&gt;\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>[HttpPost, GridAction(EnableCustomBinding = true)]\n    public ActionResult CategoryUnitsList(GridCommand command, int categoryId)\n    {\n        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))\n            return AccessDeniedView();\n\n        var categoryUnits = _categoryService.GetCategoryUnits(categoryId, command.Page - 1 , command.PageSize);\n        var categoryUnitsModel = PrepareCategoryUnitsModel(categoryUnits);\n\n        var model = new GridModel&lt;CategoryModel.CategoryUnitsModel&gt;\n        {\n            Data = categoryUnitsModel,\n            Total = categoryUnitsModel.Count\n        };\n\n        return new JsonResult\n        {\n            Data = model\n        };\n    }\n\n    public ActionResult CheckForCategoryUnit(int categoryId, int unitId)\n    {\n        var categoryUnit = _categoryService.GetCategoryUnitByCategoryIdAndUnitId(categoryId, unitId);\n        return Json(categoryUnit != null, JsonRequestBehavior.AllowGet);\n    }\n\n    [GridAction(EnableCustomBinding = true)]\n    public ActionResult CategoryUnitsInsert(GridCommand command, CategoryModel.CategoryUnitsModel model)\n    {\n        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))\n            return AccessDeniedView();\n\n        var categoryUnit = new CategoryUnits\n        {\n            UnitId = Int32.Parse(model.UnitText),\n            CategoryId = model.CategoryId\n        };\n\n        _categoryService.InsertCategoryUnit(categoryUnit);\n\n        return CategoryUnitsList(command, model.CategoryId);\n    }\n</code></pre>\n\n<p>At this point and time, I get an alert that I am hitting within my ajax.  However, the e.preventDefault() is not stopping the server from going on ahead and saving my data.  I've tried several different things concerning this issue, including:</p>\n\n<p>return false, e.stop(), e.returnValue = false, e.stopPropagation().</p>\n\n<p>None have worked thus far.  If anyone has any ideas, I'm open to them.  The combination of OS and browser I have are Windows XP and IE8.  Just adding in case that would help.  Thanks.</p>\n\n<p>Kindest Regards,\nChad Johnson</p>\n"},{"tags":["javascript","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13055089,"title":"javascript comments in razor mvc3","body":"<p>For <code>javascript</code> comments, I usually try to follow something similar to <a href=\"http://stackoverflow.com/questions/799179/javascript-standard-documentation-tool\">these</a> guidelines. However, the Razor engine seems to throw up when it sees stuff like this in the <code>cshtml</code> file:</p>\n\n<pre><code>/**\n * This is my function.\n * @param parm1 this is first parameter\n * @param parm2 this is second parameter\n */\n</code></pre>\n\n<p>The @ sign seems to cause parser errors, since that's a special character in Razor. Anyway, I just wondered what other people are doing. I know I could probably use Razor comments and do something like this:</p>\n\n<pre><code>@*param parm1 this is first parameter *@\n</code></pre>\n\n<p>But that just feels wrong on so many levels.</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":345,"score":1,"question_id":11995885,"title":"ASP.Net MVC 3: Add custom response header; header gets lost when a service calls throws an exception","body":"<p>I have the following code in my global.asax.cs, to enable cross domain AJAX requests for certain domains:</p>\n\n<pre><code>    protected void Application_BeginRequest(object sender, EventArgs e)\n    {\n        string whiteList =\n            System.Configuration.ConfigurationManager.AppSettings[\"AjaxCrossDomainWhitelist\"];\n\n        if (!string.IsNullOrWhiteSpace(whiteList))\n        {\n\n            string[] whiteListDomains = whiteList.Split(';');\n\n            string origin = Request.Headers[\"origin\"];\n\n            if (!string.IsNullOrEmpty(origin))\n            {\n                origin = origin.ToLower();\n\n                foreach (string domain in whiteListDomains)\n                {\n                    if (domain.ToLower() == origin)\n                    {\n                        HttpContext.Current.Response.AddHeader(\"Access-Control-Allow-Origin\", domain);\n                        break;\n                    }\n                }\n            }\n\n\n\n            if (HttpContext.Current.Request.HttpMethod == \"OPTIONS\")\n            {\n\n                //These headers are handling the \"pre-flight\" OPTIONS call sent by the browser\n                HttpContext.Current.Response.AddHeader(\"Access-Control-Allow-Methods\", \"GET, POST, OPTIONS\");\n                HttpContext.Current.Response.AddHeader(\"Access-Control-Allow-Headers\", \"Content-Type, Accept\");\n                //Access Control policy has a lifetime of one hour\n                HttpContext.Current.Response.AddHeader(\"Access-Control-Max-Age\", \"3600\");\n                HttpContext.Current.Response.End();\n            }\n        }\n\n    }\n</code></pre>\n\n<p>When one of the web services called on the website returns successfully, the \"Access-Control-Allow-Origin\" header is sent along successfully and everything works fine. However, when a service call causes an exception; the \"Access-Control-Allow-Origin\" header is still added to the HttpContext.Response; I confirmed as much by trapping Application_EndRequest and checking the Response.Headers collection. However, when I check the sent response in Firebug, Chrome Dev Tools, or Charles, the \"Access-Control-Allow-Origin\" header was not sent and I can't figure out why.</p>\n\n<p>Any pointers?</p>\n"},{"tags":["asp.net-mvc-3","iis","asp.net-mvc-routing","asp.net-mvc-areas"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":13017065,"title":"mvc3 areas have hostname","body":"<p>I am looking to create a MVC3 website.  We need at least two areas but we need different url's for each of the areas. Like this:</p>\n\n<blockquote>\n  <p>domain.com/ goes to /</p>\n  \n  <p>admin.domain.com/ goes to /areas/admin</p>\n  \n  <p>anotherSite.com/ goes to /areas/portal</p>\n</blockquote>\n\n<p>After doing some research I have found <a href=\"http://stackoverflow.com/questions/9009132/mvc3-areas-routing-and-urls\">Lucero's link</a> that you can use HostNameContraint as follows:</p>\n\n<pre><code>public class HostNameContraint : IRouteConstraint\n{\n    protected string _hostname;\n\n    public HostNameContraint(string hostname)\n    {\n        _hostname = hostname;\n    }\n\n    bool IRouteConstraint.Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)\n    {\n        if (httpContext.Request.Url.Host == _hostname)\n            return true;\n        return false;\n    }\n}\n</code></pre>\n\n<p>and then register the constraints like this:</p>\n\n<pre><code>routes.MapRoute(\n            \"Default\", // Route name\n            \"{controller}/{action}/{id}\", // URL with parameters\n            new { area = \"\", controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }, // Parameter defaults\n            new { hostname = new HostNameContraint(\"domain.com\") },\n            new[] { \"MVCProject.Controllers\" }\n        );\n\n        routes.MapRoute(\n            \"Admin_Default2\", // Route name\n            \"{controller}/{action}/{id}\", // URL with parameters\n            new { area = \"Admin\", controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }, // Parameter defaults\n            new { hostname = new HostNameContraint(\"admin.domain.com\") },\n            new[] { \"MVCProject.Controllers.Areas.Admin.Controllers\" }\n        );\n\n        routes.MapRoute(\n            \"Portal_Default2\", // Route name\n            \"{controller}/{action}/{id}\", // URL with parameters\n            new { area = \"Portal\", controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }, // Parameter defaults\n            new { hostname = new HostNameContraint(\"anotherSite.com\") },\n            new[] { \"MVCProject.Controllers.Areas.Portal.Controllers\" }\n        );\n</code></pre>\n\n<p>I have IIS setup so that they point to the root folder of the application for each of the sites.  Pointing to the root \"Domain.com\" works fine but going to either \"Admin.domain.com\" or \"Domain.com/admin/\" comes up with a 404 \"Resource cannot be found.\"</p>\n\n<p><strong>Update</strong>\nI have tried it both with the Area name at the beginning of the url and without. </p>\n\n<blockquote>\n  <p>\"Portal/{controller}/{action}/{id}\"</p>\n</blockquote>\n\n<p>The issue is that when the \"Portal\" area is in the route, the signature does not match the name as \"anotherSite.com\" and therefore it comes back and says 403.14 - Forbidden.  Cannot list contents of this directory.  It is also important to note that the constructor for HostNameConstraint is never called when the \"Portal\" area is url parameter.</p>\n"},{"tags":["asp.net-mvc-3","authentication","restsharp"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13037072,"title":"Why can't I just send rest calls to MVC3?","body":"<p>I'm trying to send requests to my MVC3 app, I've tried regular WebRequest, I'm trying it with  RestSharp applying correct Authenticator, but it still returns the redirect result of login page? </p>\n\n<p>What am i doing wrong?</p>\n\n<p>upd: How should I do forms authentication with RestSharp? I guess it's possible somehow - just need to play around that cookie...  </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":44,"score":3,"question_id":13038535,"title":"Method to encapsulate reusable view sections (i.e. tiles, portlets) with arbitrary content?","body":"<p>I'm still getting my feet wet with MVC and working on a site that uses a lot of \"tiles\" (you know, the usual \"rectangular section with standardized header and some content\" pattern) for the visual display. There's nothing fancy, just a way to put content into boxes for ease of layout and navigation. Currently the \"tiles\" (my term) are built like this:</p>\n\n<pre><code>&lt;div class=\"tile\"&gt;\n    &lt;div class=\"tile-header\"&gt;\n        &lt;h2&gt;Title&lt;/h2&gt;\n    &lt;/div&gt;\n    &lt;div class=\"tile-body\"&gt;\n        (arbitrary content)\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><em>Note: \"arbitrary content\" means any content, either static or dynamic, so not necessarily something I can plug into a variable and pass into a helper, I need a bit more flexibility.</em></p>\n\n<p>My question is, what is the optimal method to use to encapsulate this pattern and make it easier/more expressive to call from code? I know about partial views, but how would I pass arbitrary body content to a partial view? (This may simply be my limited knowledge of MVC showing) </p>\n\n<p>I tried building Razor helpers like this:</p>\n\n<pre><code>@Tile.Begin(\"Title\")\n    (arbitrary content)\n@Tile.End()\n</code></pre>\n\n<p>But Razor chokes because I can't include the \"tile-body\" closing div. (If I do then I have to pass the body content as a string variable, and that isn't always feasible)</p>\n\n<p>I could see something like this:</p>\n\n<pre><code>@using (Tile.Begin(\"Title\")) {\n    (arbitrary content)\n}\n</code></pre>\n\n<p>This seems the most elegant to me, though not as easy to scan as the @Tile.Begin() and @Tile.End() calls. From what I understand I would have to create a class and implement IDisposable, but when I tried returning a string of raw HTML tags from a helper class it simply wrote the encoded tag syntax to the screen, so I assume I'd run into the same issue here?</p>\n\n<p>Thanks for any advice. :)</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","layout","viewbag"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13052674,"title":"Rendering Global Title","body":"<p>I am trying to pull from the database a saved Title.  I want it to load every time without using the view to call it.   So I want a variable to be pulled when I call it from the Layout.  How can I do this?</p>\n\n<p>In Layout Example:</p>\n\n<pre><code>@ViewBag.ShowTitle   \n</code></pre>\n\n<p>This would show to every single page that renders the layout.  I'm not sure how I would call the field from the database to the screen without a controller.</p>\n"},{"tags":["c#","asp.net-mvc-3","appharbor","cassette"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13053331,"title":"Cassette bundle not linking every stylesheet in the folder, only 1","body":"<p>Here's how my folder is set up in Visual Studio 2010:</p>\n\n<pre><code>[solution]/Public\n              /assets\n                  /stylesheets\n                      bootstrap.css\n                      forms.less\n                      main.less\n                      tigo.less\n</code></pre>\n\n<p>I've set up some references because I want Bootstrap to appear first and forms and tigo have to appear after main.less.</p>\n\n<p>When I run this application on my local machine, this is the reference:</p>\n\n<pre><code>&lt;link href=\"/cassette.axd/asset/Public/assets/stylesheets/bootstrap.css?Fr-zb2zZgNbHEFtP2LHSlWzPcTc=\" type=\"text/css\" rel=\"stylesheet\"/&gt;\n&lt;link href=\"/cassette.axd/asset/Public/assets/stylesheets/main.less?3YJKuT131pux5i9cKZkQeAO_qLQ=\" type=\"text/css\" rel=\"stylesheet\"/&gt;\n&lt;link href=\"/cassette.axd/asset/Public/assets/stylesheets/forms.less?3j_M5YCMRn_e3APdf8XOLJrN9s0=\" type=\"text/css\" rel=\"stylesheet\"/&gt;\n&lt;link href=\"/cassette.axd/asset/Public/assets/stylesheets/tigo.less?L6L9pztQ4BxBKmO_Q3XHBJx9L8Q=\" type=\"text/css\" rel=\"stylesheet\"/&gt;\n</code></pre>\n\n<p><strong>It works fine on my machine.</strong></p>\n\n<p>However when publishing to AppHarbor, the references (minified) CSS file only contains the information from bootstrap.css</p>\n\n<p>Here is my configuration for Cassette:</p>\n\n<pre><code>namespace Foo.WebUI\n{\n    /// &lt;summary&gt;\n    /// Configures the Cassette asset bundles for the web application.\n    /// &lt;/summary&gt;\n    public class CassetteBundleConfiguration : IConfiguration&lt;BundleCollection&gt;\n    {\n        public void Configure(BundleCollection bundles)\n        {\n            bundles.Add&lt;StylesheetBundle&gt;(\"Public/assets/stylesheets\");\n            bundles.Add&lt;ScriptBundle&gt;(\"Public/assets/javascripts\");\n        }\n    }\n}\n</code></pre>\n\n<p>And here is my _Layout.cshtml file:</p>\n\n<pre><code>@{\n    Bundles.Reference(\"Public/assets/stylesheets\");\n    Bundles.Reference(\"Public/assets/javascripts\");\n}\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;@ViewBag.Title&lt;/title&gt;\n\n    &lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js\"&gt;&lt;/script&gt;\n    &lt;link rel=\"Stylesheet\" href=\"http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.10/themes/blitzer/jquery-ui.css\" /&gt;\n\n    @Bundles.RenderStylesheets()\n&lt;/head&gt;\n</code></pre>\n\n<p>Any ideas why it's not working correctly? Why is it grabbing bootstrap.css but forgetting about the other three files.</p>\n"},{"tags":["c#","asp.net-mvc-3","gridview","telerik"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":303,"score":0,"question_id":10756330,"title":"Telerik Grid Control: Ajax Insert action is not passing parameter to controller","body":"<p>This issue is frustrating me to no end, as it seems to be so simple, yet I cannot figure out what on earth is happening.</p>\n\n<p>Simply put:</p>\n\n<p>I have a Telerik MVC grid control defined and in the details <code>ClientTemplate</code> I have the following defined in the databinding section:</p>\n\n<pre class=\"lang-csh prettyprint-override\"><code>databinding.Ajax()\n  .Select(\"Index_GolfCourseHoleInfo_AjaxBinding\", \"GolfCourseHoleInfo\", new { GolfCourseId = \"&lt;#= Id #&gt;\" })\n  .Insert(\"Insert_GolfCourseHoleInfo_AjaxBinding\", \"GolfCourseHoleInfo\", new { GolfCourseId = \"&lt;#= Id #&gt;\" })\n  .Update(\"Update_GolfCourseHoleInfo_AjaxBinding\", \"GolfCourseHoleInfo\")\n  .Delete(\"Delete_GolfCourseHoleInfo_AjaxBinding\", \"GolfCourseHoleInfo\"); \n</code></pre>\n\n<p>My select then calls the following method on my controller:</p>\n\n<pre class=\"lang-csh prettyprint-override\"><code>[GridAction]\npublic ActionResult Index_GolfCourseHoleInfo_AjaxBinding(int GolfCourseId)\n{            \n    //code goes here\n}\n</code></pre>\n\n<p>GolfCourseId is passed a value and all is right with the world!</p>\n\n<p>But going back to the grid, once an insert is called it correctly calls the below controller action:</p>\n\n<pre><code>[GridAction]\n[HttpPost]\npublic ActionResult Insert_GolfCourseHoleInfo_AjaxBinding(int GolfCourseId)\n    {\n        //Code goes here\n    }\n</code></pre>\n\n<p>Yet GolfCourseId is now 0!! I have tried every combination possible, trying to resolve it. I tried to hardcode the GolfCourseId value being passed in the Grid insert but no luck. I then tried something I thought would be stupid and rename the 'GolfCourseId' variable on the Grid insert controller call and in the controller method itself, to <code>GolfCourseId2</code>.</p>\n\n<p>Voila it worked, and the value was passed!</p>\n\n<p>Can anyone explain what is happening?</p>\n"},{"tags":["c#","asp.net-mvc-3","razor","graph","partial-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13053059,"title":"How to render a graph in a View only after the filters on a Partial View have been chosen in MVC3","body":"<p>I have an <strong>ASP.NET MVC3</strong> application in <strong>C#</strong> and <strong>Razor</strong>.</p>\n\n<p>I want to create a page with filters (such as year, month) and once the user selects the filters and click the submit button, a graph is displayed. I use the following code (not working):\n<strong>View</strong> Stats.cshtml</p>\n\n<pre><code>@{\n   ViewBag.Title = \"Home Page\";\n}\n\n&lt;h2&gt;@ViewBag.Message&lt;/h2&gt;\n\n@{ Html.RenderPartial(\"StatsFilter\", Model.FilterViewModel);  }\n\n&lt;img src=\"@Url.Action(\"DrawChart\")\" alt=\"Drawing chart with HTML Helper\" /&gt;\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>public class HomeController : Controller\n    {\n        public ActionResult Index()\n        {\n            return View(\"Stats\", StatsViewModel);\n        }\n\n        [HttpPost]\n        public ActionResult Index(FiltersViewModel filters)\n        {\n            //Retrieve Data\n            return View(\"Stats\", StatsViewModel);\n        }\n\n        public ActionResult DrawChart(GraphViewModel graph)\n        {\n            var chart = new Chart(width: 500, height: 600)\n                .AddTitle(\"Chart Title\")\n                .AddSeries(\n                            chartType: \"Line\",\n                            name: \"Stats\",\n                            xValue: chartData.XValues.Keys.ToList(),\n                            yValues: chartData.XValues.Values.ToList())\n                .GetBytes(\"png\");\n            return File(chart, \"image/bytes\");\n        }\n    }\n</code></pre>\n\n<p><strong>ViewModel</strong></p>\n\n<pre><code>public class StatsViewModel\n{\n    public FilterViewModel Filters { get; set; }\n    public GraphViewModel Graph { get; set; }\n}\n</code></pre>\n\n<p>With such solution, I do not know how to pass the ViewModel to the graph. Moreover, if I make some small adjustments (like removing the <code>GraphViewModel</code> also from the <code>DrawChart</code> action method) the Graph is displayed anyway, even without data.</p>\n\n<p>I would like to give the user the possibility to choose the filters and then display the Graph. I hope I am in the right path and my code is not to be thrown away completely. </p>\n"},{"tags":["asp.net-mvc-3",".net-4.0","signalr","signalr-hub","signalr.client"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":13022415,"title":"SignalR .Net client fails to connect (upd: how to set auth. cookie?)","body":"<p>This thing is dragging me nuts. </p>\n\n<p>I have a .net 4.0 console app and I have an MVC web app. </p>\n\n<p>javascript clients can connect and talk to  the server - no problems here... </p>\n\n<p>but my .net client throws System.AggregateException with InnerException = \"Unexpected character encountered while parsing value: &lt;. Path...</p>\n\n<p>so I created an empty MVC3 app, added SignalR libraries, and .net client surprisingly connects to that. But for some reason it doesn't to the other one. I've checked everything, both MVC3 apps, both use the same SignalR libs, the same NewtonsoftJson... I thought it must be something with the routing, I guess no - js client works.</p>\n\n<pre><code>var connection = new HubConnection(\"http://localhost:58746\");\nvar hubProxy = connection.CreateProxy(\"myProxy\");\nconnection.Start().Wait() // it fails here on Wait\n</code></pre>\n\n<p>What could it be?</p>\n\n<p><strong>UPD: I have figured... it's because FormsAuthentication on the server. Now is there any way to feed .ASPXAUTH cookie to SignalR so it can connect to the server?</strong></p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","razor","encoding"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":85,"score":1,"question_id":13050430,"title":"Adding CSS class to web grid column item conditionally","body":"<p>Is it possible to conditionally set a CSS class or encode a string to html for a certain web grid column? I was able to append span tags to the item using format: in the column, but now I need to add a class to the span tags based on a helper function in razor view or a bool expression from the controller/model. <strong>I do not want to do this with JS, C# should suffice</strong>.</p>\n\n<p>Here is what I tried in view model:</p>\n\n<pre><code> @grid.GetHtml(\n headerStyle:\"reviewGridHeader\",\n    columns: grid.Columns(\n    ...[other columns]...\n    grid.Column(columnName: \"FeedBack\", format: @&lt;span&gt;@CheckFeedBack(item.FeedBack)&lt;/span&gt;)\n))\n</code></pre>\n\n<p>Helper function in view model (splits and compares string):</p>\n\n<pre><code>    static string CheckFeedBack(string item) {\n        String[] feedbacks = System.Text.RegularExpressions.Regex.Split(item, \"of\");\n\n        //if feedback complete\n        if((Convert.ToInt32(feedbacks[0]) == (Convert.ToInt32(feedbacks[1]))))\n        {\n            string newFeedback = @\"&lt;span class=\"\"feedBackComplete\"\"&gt;\"+ item +\"&lt;/span&gt;\";\n            string encodedFeedback = System.Web.HttpUtility.HtmlEncode(newFeedback);\n\n            return encodedFeedback;\n        }\n        return item;\n    }\n</code></pre>\n\n<p>And here is the presentation, which conditionally works when feedback complete:</p>\n\n<p><img src=\"http://i.stack.imgur.com/JV8dw.png\" alt=\"feedback column\"></p>\n\n<p><strong>Update:</strong> After guidance from Zach with returning a MvcHtmlString, I had some problems being able to use this helper method above in a WebGrid Column. Below shows the correct syntax:</p>\n\n<pre><code>grid.Column(columnName: \"FeedBack\", format: (item) =&gt; CheckFeedBack(item.FeedBack), style: \"webGridAlignment\")\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13052583,"title":"Issue updating dropdlownlist within grid","body":"<p>I have a grid that has a column (UnitText) within it that becomes a dropdownlist when inserting an item.  Right now, UnitText has an EditorTemplate called CategoryUnitcshtml.  Here is where things become slightly tricky.</p>\n\n<p>I want to prevent duplicates.  Currently, I load the data source for the dropdownlist within CategoryUnit.  To prevent duplicates, I decided to change the data source pending what is already within the grid.</p>\n\n<p>Ex.  Unit1 = \"NASA\", Unit2 = \"AF\", Unit3 = \"DoD\"\nThe grid currently has only one unit.  It is AF.  I want to prevent the dropdownlist from adding AF to it's selection.</p>\n\n<p>This much I have.  However, I need to update the list each time a Unit is added.  CategoryUnit is only loaded during the page being created and doesn't update.</p>\n\n<p>Thus far, this is what I have.</p>\n\n<p>View</p>\n\n<pre><code>@(Html.Telerik().Grid&lt;CategoryModel.CategoryUnitsModel&gt;()\n                    .Name(\"categoryunits-grid\")\n                    .DataKeys(keys =&gt;\n                    {\n                        keys.Add(x =&gt; x.Id);\n                        keys.Add(x =&gt; x.CategoryId);\n                        keys.Add(x =&gt; x.UnitId);\n                    })\n                    .DataBinding(dataBinding =&gt;\n                    {\n                        dataBinding.Ajax()\n                            .Select(\"CategoryUnitsList\", \"Category\", new { categoryId = Model.Id })\n                            .Insert(\"CategoryUnitsInsert\", \"Category\", new { categoryId = Model.Id })\n                            .Update(\"CategoryUnitsInsert\", \"Category\", new { categoryId = Model.Id })\n                            .Delete(\"CategoryUnitsDelete\", \"Category\", new { categoryId = Model.Id });\n                    })\n                    .Columns(columns =&gt;\n                    {\n                        columns.Bound(x =&gt; x.UnitId)\n                            .Visible(false);\n                        columns.Bound(x =&gt; x.UnitText);\n                        columns.Command(commands =&gt;\n                        {\n                            commands.Edit();\n                            commands.Delete();\n                        })\n                       .Width(100);\n                    })\n                    .ToolBar(commands =&gt; commands.Insert())\n                    .Pageable(settings =&gt; settings.PageSize(gridPageSize).Position(GridPagerPosition.Both))\n                    .ClientEvents(events =&gt; events.OnRowDataBound\"onRowDataBound\"))\n                    .EnableCustomBinding(true))\n\n                &lt;script type=\"text/javascript\"&gt;\n                    function onRowDataBound(e) {\n                        $(e.row).find('a.t-grid-edit').remove(); //remove Delete button\n                    }\n                &lt;/script&gt;\n</code></pre>\n\n<p>EditorTemplates/CategoryUnit</p>\n\n<pre><code>@using Telerik.Web.Mvc.UI;\n@using Nop.Core.Domain.Customers;\n@using Nop.Services.Units;\n\n@{    \nvar _unitsService = EngineContext.Current.Resolve&lt;IUnitsService&gt;();\nvar units = _unitsService.GetAvailableUnits(ViewBag.CategoryId);\n\nvar unitsList = new List&lt;SelectListItem&gt;();\nforeach (var unit in units)\n{\n    var text = unit.UnitName + \" (\" + unit.UnitAcronym + \")\";\n    if (text != null)\n    {\n        //Telerik has an issue when quotes are used. That'why we manually remove all quotes\n        //Find more info here: http://www.nopcommerce.com/boards/t/11413/tabs-can-not-be-selected-in-admin-edit-products.aspx\n        //TODO remove this code once it's fixed by Telerik team\n        text = text.Replace(\"\\\"\", \"\");\n    }\n    var item = new SelectListItem()\n    {\n        Text = text,\n        Value = unit.Id.ToString()\n    };\n\n    unitsList.Add(item);\n}    \n}\n\n@Html.Telerik().DropDownList().Name(\"UnitText\").BindTo(unitsList)\n</code></pre>\n\n<p>Model</p>\n\n<pre><code>public partial class CategoryUnitsModel : BaseNopEntityModel\n    {\n        public int CategoryId { get; set; }\n        public int UnitId { get; set; }\n        [NopResourceDisplayName(\"Admin.Catalog.Categories.Units.Fields.UnitText\")]\n        [UIHint(\"CategoryUnit\")]\n        public string UnitText { get; set; }\n    }\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>[HttpPost, GridAction(EnableCustomBinding = true)]\n    public ActionResult CategoryUnitsList(GridCommand command, int categoryId)\n    {\n        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))\n            return AccessDeniedView();\n\n        var categoryUnits = _unitsService.GetCategoryUnits(categoryId, command.Page - 1 , command.PageSize);\n        var categoryUnitsModel = PrepareCategoryUnitsModel(categoryUnits);\n\n        ViewBag.CategoryId = categoryId;\n\n        var model = new GridModel&lt;CategoryModel.CategoryUnitsModel&gt;\n        {\n            Data = categoryUnitsModel,\n            Total = categoryUnitsModel.Count\n        };\n\n        return new JsonResult\n        {\n            Data = model\n        };\n    }\n\n    //public ActionResult CheckCategoryUnit(int categoryId, int unitId)\n    //{\n    //    var categoryUnit = _categoryService.GetCategoryUnitByCategoryIdAndUnitId(categoryId, unitId);\n    //    return Json(categoryUnit != null, JsonRequestBehavior.AllowGet);\n    //}\n\n    [GridAction(EnableCustomBinding = true)]\n    public ActionResult CategoryUnitsInsert(GridCommand command, CategoryModel.CategoryUnitsModel model)\n    {\n        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))\n            return AccessDeniedView();\n\n        var searchForEntry = _unitsService.GetCategoryUnitByCategoryIdAndUnitId(model.CategoryId, Int32.Parse(model.UnitText));\n        if (searchForEntry != null)\n        {\n            TempData[\"PopupMessage\"] = \"Units may not be added twice for a category\";\n            return CategoryUnitsList(command, model.CategoryId);\n        }\n\n        var categoryUnit = new CategoryUnits\n        {\n            UnitId = Int32.Parse(model.UnitText),\n            CategoryId = model.CategoryId\n        };\n\n        _unitsService.InsertCategoryUnit(categoryUnit);\n\n        return CategoryUnitsList(command, model.CategoryId);\n    }\n\n    [GridAction(EnableCustomBinding = true)]\n    public ActionResult CategoryUnitsDelete(GridCommand command, CategoryModel.CategoryUnitsModel model, int id)\n    {\n        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))\n            return AccessDeniedView();\n\n        var categoryId = model.CategoryId;\n        _unitsService.DeleteCategoryUnit(model.CategoryId, id);\n\n        return CategoryUnitsList(command, categoryId);\n    }\n</code></pre>\n\n<p>Btw, the ViewBag.CategoryId currently is set during the Index of the page.  I didn't show it since the code is rather lengthly.</p>\n\n<p>Any help would be appreciated.  Thanks.</p>\n\n<p>Kindest Regards,\nChad Johnson</p>\n"},{"tags":["jquery","css","asp.net-mvc-3","jquery-ui","jquery-ui-dialog"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":13051248,"title":"jQuery ui dialog not using site.css in ASP.NET MVC 3 app","body":"<p>I am using jQuery ui dialogs in my MVC 3 app and for some reason, the style elements that are defined in my site.css file are applied everywhere except in the jquery dialogs.</p>\n\n<p>I tried finding what's wrong using the Chrome Developper Tools, but I just can't figure it out.  Any ideas?</p>\n\n<p>Thanks!</p>\n\n<p>UPDATE:</p>\n\n<p>Here is how I referenced css files in _Layout.cshtml:</p>\n\n<pre><code>    &lt;link href=\"@Url.Content(\"~/Content/Site.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;link href=\"@Url.Content(\"~/Content/themes/base/jquery-ui.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;link href=\"@Url.Content(\"~/Content/dataTables/dt_page.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;link href=\"@Url.Content(\"~/Content/dataTables/dt_table.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;link href=\"@Url.Content(\"~/Content/dataTables/dt_table_jui.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n</code></pre>\n"},{"tags":["ajax","json","asp.net-mvc-3","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13049748,"title":"Custom button in Edit form that displays result","body":"<p>I am fairly new to .NET and MVC3 - and even Ajax and Json, and am working on an MVC3 (razor) application, using jqGrid, and so far it is immense(jqgrid that is!) and has dealt with everything I have thrown at it.\nHowever, I have One Outstanding peice of functionality that I do not know How to accomplish.</p>\n\n<p>Within the Edit form of a Row, I have Placed a Custom button called 'Reset Password'. I need the Onclick Event to call a piece of functionality in my Controller to go through some logic, generate a Password, and Return the new Password to the Screen. </p>\n\n<p>Can anyone tell me How can I achieve this?</p>\n\n<p>May thanks in Advance.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":4617,"score":3,"question_id":5207382,"title":"Get data from two tables(join) with linq and return result into view","body":"<p>I have two tables: Projects and ProjectsData and I want to execute query with join and get the result in the View.</p>\n\n<p>In the Controller I have this code:</p>\n\n<pre><code>ViewBag.projectsData = (from pd in db.ProjectsData\n                                   join p in db.Projects on pd.ProjectId equals p.ID\n                                   where pd.UserName == this.HttpContext.User.Identity.Name \n                                   orderby p.Name, p.ProjectNo\n                                   select new { ProjectData = pd, Project = p });\n</code></pre>\n\n<p>What I should use in the View to extract this data. I tried that:</p>\n\n<pre><code>@foreach (var item in ViewBag.projectsData)\n{\n    @item.pd.UserName\n}\n</code></pre>\n\n<p>but it doesn't work...</p>\n"},{"tags":["jquery","ajax","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13050097,"title":"jquery click() doesn't work","body":"<p>I have a problem with jQuery click() function.</p>\n\n<p>I use this function to programatically click on a link which calls an ajax function that adds a new object to the database.</p>\n\n<p>When I submit my form, a tr is added in the object datatable for my new object with new link and I want to programatically click on this new link to load object properties and display them.</p>\n\n<p>The problem is that the new tr with td and link doesn't exist in DOM and the function <code>$.('#elem').click')</code> doesn't work.</p>\n\n<p>I saw in others post that I have to bind click event with the new .on function like this :</p>\n\n<pre><code>$('#parent-items').on('click', 'elem', function() {\n   // [...]\n});\n</code></pre>\n\n<p>I don't know what I have to write in place of [...], at the end of my javascript code, I call the click function like this :</p>\n\n<pre><code>$('#myelem').click();\n</code></pre>\n\n<p>Thanks for your help</p>\n"},{"tags":["c#","asp.net-mvc-3","table","words","aspose"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12849659,"title":"Aspose.Words spanning pages with a table C# MVC3","body":"<p>I have an MVC3 C#.Net web app.  We are using Aspose.Words to export our data into a word document.  One of the items being created in the document is a labor summary table.  This table starts in the middle of the page (in other words, it's not the first element on the page so it's starting point will vary depending on data).  Often times the table spans onto the next page, again depending how much data is above the table and how many rows are in the table.  We have a requirement from the customer that, if the table spans pages, we need to start the new page with a row of headers, then the rest of the data rows.  </p>\n\n<p>This requires me to know:\n1) how much room I have left on the first page for the table:  how much space is left from the point where the table will be inserted to the end of the page\n2) how tall the table will be when filled</p>\n\n<p>I don't know how to get either of those two pieces of data.  Can someone assist?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13048883,"title":"ASP MVC 3 create Partial View or Custom Helper with params","body":"<p>I am very new to asp.mvc 3. I am using kendoui and knockout for binding. My application looks like this sample:</p>\n\n<p>ViewModel</p>\n\n<pre><code>public class MyViewModel\n    {\n        public MyViewModel()\n        {\n            Initialize();\n        }\n\n        public IEnumerable&lt;string&gt; MyOptions1 { get; set; }\n        public string MyChoice1 { get; set; }\n\n        public IEnumerable&lt;string&gt; MyOptions2 { get; set; }\n        public string MyChoice2 { get; set; }\n\n        private void Initialize()\n        {\n            MyOptions1 = new List&lt;string&gt;()\n                             {\n                                 \"OptionA\",\n                                 \"OptionB\"\n                             };\n\n            MyOptions2 = new List&lt;string&gt;()\n                             {\n                                 \"OptionC\",\n                                 \"OptionD\"\n                             };\n        }\n    }\n</code></pre>\n\n<p>Index method of Home controller</p>\n\n<pre><code>public ActionResult Index()\n        {\n            return View();\n        }\n</code></pre>\n\n<p>Index View:</p>\n\n<pre><code>&lt;div id=\"optionsArea\"&gt;\n    &lt;table&gt;\n        &lt;tr&gt;\n            &lt;td&gt;&lt;label&gt;Option1:&lt;/label&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input id=\"options1\" data-bind=\"kendoDropDownList: { data: MyOptions1, value: MyChoice1 }\" /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td&gt;&lt;label&gt;Option2:&lt;/label&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;input id=\"options2\" data-bind=\"kendoDropDownList: { data: MyOptions2, value: MyChoice2 }\" /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>When Index view is loaded I am calling <code>OptionsData</code> method of controller which returns the populated <code>MyViewModel</code> as Json. </p>\n\n<pre><code>public ActionResult OptionsData()\n        {\n            var myModel = new MyViewModel();\n            var jsonNetResult = new JsonNetResult\n            {\n                Formatting = Formatting.Indented,\n                Data = myModel\n            };\n\n            return jsonNetResult;\n        }\n</code></pre>\n\n<p>In javascript From <code>MyViewModel</code> I create populated javascript viewmodel <code>viewModel</code> with knockout observable properties and bind it to the div in the Index View.</p>\n\n<pre><code>$(function () {\n\n    my = {\n\n    }\n\n    $.getJSON(\"/Home/OptionsData\", function (data) {\n\n        // create observable properties from MyViewModel\n        my.viewModel = ko.mapping.fromJS(data);\n\n        ko.applyBindings(my.viewModel, document.getElementById(\"optionsArea\"));\n    });\n});\n</code></pre>\n\n<p>In my application I have many elements containing label and dropdown so I want to extract that part in something like a component and reuse it calling it with some parameters to replace the bindings. I read some articles and maybe the solution is to use partial views or custom HTML helpers so I can do something like this:</p>\n\n<p>_OptionPartialView</p>\n\n<pre><code>&lt;tr&gt;\n    &lt;td&gt;&lt;label&gt;Option2:&lt;/label&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;input data-bind=\"kendoDropDownList: { data: (parameter1), value: (parameter2) }\" /&gt;&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>where somehow I want to replace parameter1 and parameter 2 when I call the partial in the Index View:</p>\n\n<pre><code>@Html.Partial(\"_OptionPartialView.cshtml\", parameter1, parameter2);\n</code></pre>\n\n<p>or with helper method:</p>\n\n<pre><code>@Html.MyCustomHelper(..., parameter1, parameter2);\n</code></pre>\n\n<p>Then I will strongly bind my Index method to the Index view:</p>\n\n<pre><code>public ActionResult Index()\n        {\n            var myModel = new MyViewModel();\n            return View(myModel);\n        }\n</code></pre>\n\n<p>And my view will look something like this:</p>\n\n<pre><code>  @model MVC3Question.Models.MyViewModel\n\n&lt;div id=\"optionsArea\"&gt;\n    &lt;table&gt;\n        @Html.Partial(\"_OptionPartialView.cshtml\", Model.MyOptions1, Model.MyChoice1);\n        @Html.Partial(\"_OptionPartialView.cshtml\", Model.MyOptions2, Model.MyChoice2);\n    &lt;/table&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>My question is which is better in this situation Partial View or Custom Helper method and more important how do I implement them with the parameters having in mind the posted sample code. Any other approches or ideas are welcome. Thanks!</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13048536,"title":"Validating and modifying a variable from MetaData Class","body":"<p>I’m using <strong>ASP.NET MVC 3</strong> for a project I have.</p>\n\n<p>The problem is that I would like to save a value to the database, which should before saving into the database be \"cleaned\" (say removing trailing and ending spaces, and also validate).</p>\n\n<p>I use a <strong>MetaData Class</strong> to validate the models before I save it to the database with data annotations, using the following code to validate:</p>\n\n<pre><code>if (ModelState.IsValid) {\n</code></pre>\n\n<p>My MetaData Class looks like this:</p>\n\n<pre><code>public class OrganizationMD {\n    [Required(ErrorMessage = \"*This field is required.\")]\n    [CustomValidationRule(ErrorMessage = \"*Another error message\")]\n    public string OrganizationNumber;\n}\n</code></pre>\n\n<p>My first idea was to give the OrganizationNumber string a getter and setter, and there let the value become “fixed”.</p>\n\n<p>For example if someone tries to save a company with \"19860415-4785\" as organizationnumber, it should automatically remove the trailing \"19\" and the dash in the string before validating and saving that new value into the database.</p>\n\n<p>I can’t give the model a getter and setter because we’re developing using Model-First, <strong>otherwise I think that should work.</strong></p>\n\n<p>Does anyone have any idea how to solve this?</p>\n"},{"tags":["c#","asp.net-mvc-3","tagbuilder"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13047908,"title":"When to use MergeAttribute over Attributes.Add","body":"<p>When using TagBuilder one can use <code>TagBuilder.Attributes.Add(..)</code> or <code>TagBuilder. MergeAttribute(..)</code> to add attributes to the HTML element under construction:</p>\n\n<pre><code>TagBuilder formBuilder = new TagBuilder(\"form\");\nformBuilder.Attributes.Add(\"method\", \"get\");\nformBuilder.Attributes.Add(\"action\", url);\n\nTagBuilder buttonBuilder = new TagBuilder(\"input\");\nbuttonBuilder.MergeAttribute(\"type\", \"submit\");\nbuttonBuilder.MergeAttribute(\"value\", buttonText);\n</code></pre>\n\n<p>But how are the two different and when should I prefer one over the other?</p>\n"},{"tags":["asp.net-mvc-3","asp.net-mvc-4","webgrid","html.dropdownlistfor","html.dropdownlist"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13018632,"title":"Dropdown list in Webgrid","body":"<p>Can somebody help me how can I put a dropdownlist in my webgrid column.</p>\n\n<p>I need to bind my dropdown list to a list from Model. And need to select an item from the list for every corresonding record in the grid.</p>\n\n<p>And I should be able to post selcetd values to the controller.</p>\n\n<p>I have tried solutions givine in few links <a href=\"http://stackoverflow.com/questions/9378208/problems-with-mvc-3-dropdownlist-in-webgrid\">Dropdownlist propbelm in mvc3</a> and few othres. </p>\n\n<p>I am pasting my sample code.</p>\n\n<p>Model:</p>\n\n<pre><code>public class AllocateToStore\n    {\n        public IList&lt;OrderLine&gt; FailureAllocations { get; set; }\n        public IList&lt;SelectListItem&gt; AllocationStatus\n        {\n            get\n            {\n                // code to fetch list.\n            }\n        }\n    }\n\n public class OrderLine\n    {\n        public long Id { get; set; }\n        public DateTime Date { get; set; }\n        public int Status { get; set; }\n    }\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>public ActionResult AutoAllocate()\n        {\n// This action will load the view with data.\n// Get model data and send it to view.\n\n            return View(\"Allocated\",model);\n        }\n\n        [HttpPost]\n        public ActionResult ResolveUnallocatedOrders(AllocateToStore coll)\n        {\n// When user changes the selection in grid and post the page I need to get the selection // here. So that I can update that record.\n            return null;\n        }\n</code></pre>\n\n<p>And view is</p>\n\n<pre><code>@model AllocateToStore\n@{\n    ViewBag.Title = \"Orders\";\n}\n@{\n    var grid = new WebGrid(Model.FailureAllocations, rowsPerPage: 100);\n}\n\n@using (Html.BeginForm(\"ResolveUnallocatedOrders\", \"OrderProcessing\", FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n{\n    if (Model.FailureAllocations.Any())\n    {\n\n    &lt;div&gt;\n        @grid.GetHtml(\n                columns: grid.Columns(\n                    grid.Column(columnName: \"Order date\", header: \"Order Date\", format: item =&gt; item.Order.Date),\n                    grid.Column(\"dropdown\", header: \"Resolution\", format:\n                                                            @&lt;span&gt;\n                                                                @{ var index = Guid.NewGuid().ToString(); }\n                                                                @Html.Hidden(\"Status.Index\", index)\n                                                                @Html.DropDownList(\"Status[\" + index + \"].SelectedValue\", Model.AllocationStatus)\n                                                            &lt;/span&gt;\n                    )\n                ),\n                tableStyle: \"expandable-table\",\n                htmlAttributes: new { id = \"gridFailureAllocations\" }\n            )\n        &lt;br /&gt;\n        &lt;input type=\"submit\" value=\"Resolve\" id=\"resolve-button\" /&gt;\n    &lt;/div&gt;\n    }\n\n}\n</code></pre>\n\n<p>Thanks,\nNaresh</p>\n"},{"tags":["visual-studio-2010","asp.net-mvc-3","iis-7.5"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":2049,"score":2,"question_id":8562221,"title":"Error Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG))","body":"<p>I have an error with my mvc3 application.</p>\n\n<p>In my application I have a reference to a vb6 DLL which is a dll of another program.</p>\n\n<p>When I debug my application with VisualStudio server developpement all is ok but I tried to deploy it in IIS7.5</p>\n\n<p>I changed in the properties of my application the server and I chose local IIS webServer. (I didn't change the properties of IIS since the installation).</p>\n\n<p>And when I try to debug my application I have an error when instanciating my dll :</p>\n\n<p>Retrieving the COM class factory for component with CLSID .... Class not registered</p>\n\n<p>This dll was registered with regsvr32.</p>\n\n<p>The same application was deploy on a server with windows server 2003 and IIS6 and it works correctly.</p>\n\n<p>If anybody have an idea ?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net","asp.net-mvc-3","routing","asp.net-mvc-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13047886,"title":"ASP.NET MVC Routing for different countries","body":"<p>I have a website that will service a few different countries. When a user hits the site, I'll use an IP locator tool to determine which country they are from. All of the countries will speak English so the views rendered will be the same, however pricing will be different as well as a few other things.</p>\n\n<p>The routing I would want is something like:</p>\n\n<ul>\n<li>mydomain.com/UK/Pricing</li>\n<li>mydomain.com/Australia/Pricing</li>\n<li>mydomain.com/UK/Features/SomeFeature</li>\n<li>mydomain.com/Australia/Features/SomeFeature</li>\n</ul>\n\n<p>You get the idea...</p>\n\n<p>Can anyone provide me with the routing I'll need in the global.asax?</p>\n\n<p>I've tried the following, but I don't want to have to create views for every country:</p>\n\n<pre><code>routes.MapRoute(\n\"Default\", \n\"{country}/{controller}/{action}/{id}\", \n new { country = \"UK\", controller = \"Home\", action = \"Index\", id = \"\" }\n );\n</code></pre>\n"},{"tags":["json","asp.net-mvc-3","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13047760,"title":"Post a json object to MVC3 controller with boolean values are always false","body":"<p>I have an object which contains several boolean values. but I have failed to post it to mvc3 controller, other values are successfully received by server.</p>\n\n<pre><code>$.ajax({\n     url: url,\n     type: 'POST',\n     data: JSON.stringify(g),\n     datatype: 'json',\n     contentType: 'application/json;charset=utf-8',\n     success: function (data) {\n      }\n});\n</code></pre>\n\n<p>call <code>JSON.stringify(g)</code> will return following string ( *partial )</p>\n\n<pre><code>\"Entry\":[\"true\",\"false\"],\"Exit\":\"false\",\"Speeding\":[\"true\",\"false\"],\"SpeedLimit\":\"110\",\"EES_Monday\":[\"true\",\"false\"],\"EES_Tuesday\":[\"true\",\"false\"],\"EES_Wednesday\":[\"true\",\"false\"],\"EES_Thursday\":[\"true\",\"false\"],\"EES_Friday\":[\"true\",\"false\"],\"EES_Saturday\":\"false\",\"EES_Sunday\":\"false\"\n</code></pre>\n\n<p>However, my server controller failed to received boolean values</p>\n\n<pre><code>[HttpPost]\npublic String Edit(EditModel g){ }\n</code></pre>\n\n<p>with all boolean values are false. But other values are received.</p>\n\n<p>What are potential causes?</p>\n\n<p>I have been stuck here for the whole afternoon. Please guide me.</p>\n"},{"tags":["javascript","jquery","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":153,"score":2,"question_id":7970196,"title":"Is there a multiple inclusion guard for javascript/jquery file?","body":"<p>I'm working on my first ASP.NET MVC 3 application with utilizes some JavaScript and jQuery here and there.  I ran into a problem with a particular jQuery plugin that ended up being referenced multiple times and this resulted in a stackoverflow/too much recursion error when I tried to use the plugin on the page.  Moving this out of my partial view file and into the <code>_Layout.cshtml</code> caused the error to go away, but I'm thinking this isn't really the solution either.</p>\n\n<p>I'm still very new to JavaScript and jQuery and was wondering if there's a guard, like I would use in a C file to avoid multiple includes of a particular header file, to do likewise with a JavaScript file.</p>\n\n<p>Or, if there's a better way to handle this, I'd be interested in hearing how.  Perhaps it is an issue just with this particular plugin file.  Any guidance on this?</p>\n"}]}
{"total":29155,"page":9,"pagesize":100,"questions":[{"tags":["sql","asp.net-mvc-3","linq","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":226,"score":1,"question_id":11596699,"title":"Convert SQL to LINQ in MVC3 with Ninject","body":"<p>I'm using MVC3 and still learning LINQ.  I'm having some trouble trying to convert a query to LINQ to Entities.  I want to return an employee object.</p>\n\n<pre><code>SELECT E.EmployeeID, E.FirstName, E.LastName, MAX(EO.EmployeeOperationDate) AS \"Last Operation\"\nFROM Employees E \nINNER JOIN EmployeeStatus ES ON E.EmployeeID = ES.EmployeeID\nINNER JOIN EmployeeOperations EO ON ES.EmployeeStatusID = EO.EmployeeStatusID\nINNER JOIN Teams T ON T.TeamID = ES.TeamID\nWHERE T.TeamName = 'MyTeam'\nGROUP BY E.EmployeeID, E.FirstName, E.LastName\nORDER BY E.FirstName, E.LastName\n</code></pre>\n\n<p>What I have is a few tables, but I need to get only the newest status based on the EmployeeOpertionDate.  This seems to work fine in SQL.  I'm also using Ninject and set my query to return Ienumerable.  I played around with the group by option but it then returns IGroupable.  Any guidance on converting and returning the property object type would be appreciated. </p>\n\n<p>Edit:  I started writing this out in LINQ but I'm not sure how to properly return the correct type or cast this.</p>\n\n<pre><code>public IQueryable&lt;Employee&gt; GetEmployeesByTeam(int teamID)\n    {\n\n        var q = from E in context.Employees\n                join ES in context.EmployeeStatuses on E.EmployeeID equals ES.EmployeeID\n                join EO in context.EmployeeOperations on ES.EmployeeStatusID equals EO.EmployeeStatusID\n                join T in context.Teams on ES.TeamID equals T.TeamID\n                where T.TeamName == \"MyTeam\"\n                group E by E.EmployeeID into G\n                select G;\n        return q;\n    }\n</code></pre>\n\n<p>Edit2:</p>\n\n<p>This seems to work for me</p>\n\n<pre><code>public IQueryable&lt;Employee&gt; GetEmployeesByTeam(int teamID)\n    {\n\n        var q = from E in context.Employees\n                join ES in context.EmployeeStatuses on E.EmployeeID equals ES.EmployeeID\n                join EO in context.EmployeeOperations.OrderByDescending(eo =&gt; eo.EmployeeOperationDate) on ES.EmployeeStatusID equals EO.EmployeeStatusID\n                join T in context.Teams on ES.TeamID equals T.TeamID\n                where T.TeamID == teamID\n                group E by E.EmployeeID into G\n                select G.FirstOrDefault();\n        return q;\n    }\n</code></pre>\n"},{"tags":["ajax","asp.net-mvc-3","model-binding"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":30,"score":2,"question_id":13047436,"title":"Nested models don't bind","body":"<p>I want to pass a JSON data structure to an MVC (3) Controller, have the JSON object be translated into a C# object, with all properties bound. One of the properties is a simple Type. That's basic model binding, right?</p>\n\n<p>Here are my models:</p>\n\n<pre><code>public class Person\n{\n    public string Name { get; set; }\n    public JobTitle JobTitle { get; set; }\n}\n\npublic class JobTitle\n{\n    public string Title { get; set; }\n    public bool IsSenior { get; set; }\n}\n</code></pre>\n\n<p>Here is my Index.cshtml page (which makes an AJAX request, passing in a JSON object which matches the strcture of the \"Person\" class):</p>\n\n<pre><code>&lt;div id=\"myDiv\" style=\"border:1px solid #F00\"&gt;&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\nvar person = { \n        Name: \"Bob Smith\",\n        JobTitle: { \n            Title: \"Developer\",\n            IsSenior: true\n        } \n    };\n\n$.ajax({\n    url: \"@Url.Action(\"ShowPerson\", \"Home\")\",\n    data: $.param(person),\n    success: function (response){\n        $(\"#myDiv\").html(response);\n    },\n    error: function (xhr) {\n        $(\"#myDiv\").html(\"&lt;h1&gt;FAIL&lt;/h1&gt;&lt;p&gt;\" + xhr.statusText + \"&lt;/p&gt;\");\n    }\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>And my HomeController looks like this:</p>\n\n<pre><code>public class HomeController : Controller\n{\n    public ActionResult Index()\n    {\n        return View();\n    }\n\n    public ActionResult ShowPerson(Person person)\n    {\n        return View(person);\n    }\n}\n</code></pre>\n\n<p>Ignore the \"ShowPerson.cshtml\" file for now because the problem occurs before that is ever needed.</p>\n\n<p>In the HomeController.ShowPerson action, the \"person.Name\" property is correctly bound and the \"person.JobTitle\" object (containing \"Title\" and \"IsSenior\" properties) is instantiated but still has the default values of \"Title = null\" and \"IsSenior = false\".</p>\n\n<p>I'm sure I have done nested model binding without problem in the past. What am I missing? Can anybody shed any light on why model binding only seems to work one level deep?</p>\n\n<p>I've searched SO, and it seems everybody else is having binding problems when sending data from forms, so maybe I'm missing something in my $.ajax() request?</p>\n"},{"tags":["asp.net-mvc-3","signalr"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":427,"score":0,"question_id":11169222,"title":"signalr chat rooms","body":"<p>i am trying to create a chat application and i've read that signalr is a good thing to use. i looked for examples of it and so far, i've done this:</p>\n\n<pre><code>&lt;script src=\"Scripts/jquery-1.6.2.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"Scripts/jquery.signalR.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n &lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        var connection = $.connection('echo');\n\n        connection.received(function (data) {\n            $('#messages').append('&lt;li&gt;' + data + '&lt;/li&gt;');\n        });\n\n        connection.start();\n\n        $(\"#broadcast\").click(function () {\n            connection.send($('#msg').val());\n        });\n    });\n&lt;/script&gt;\n&lt;input id=\"msg\"&gt;\n&lt;input id=\"broadcast\" type=\"button\"&gt;\n&lt;ul id=\"messages\"&gt;&lt;/ul&gt;\n</code></pre>\n\n<p>this only creates a single connection. i want to create multiple chat rooms, how can i make another connection and store those connections, lets say, in a database so i can have a record of those connections. </p>\n"},{"tags":["asp.net-mvc-3","display-templates"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":862,"score":1,"question_id":5583464,"title":"How to exclude a field from @Html.EditForModel() but have it show using Html.DisplayForModel()","body":"<p>I am reading up on ASP.NET MVC and all of it's fun uses and I just found out about <a href=\"http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html\" rel=\"nofollow\">DataTemplates</a>.</p>\n\n<p>In my hurry to test this thing out, I converted one of my simpler models over to using <code>@Html.DisplayForModel()</code> and <code>@Html.EditForModel()</code> and it worked like a lucky charm that it is :)</p>\n\n<p>One thing that I immediately found out though was that I could not easily define a field to show up on display views but not be present at all for editing...</p>\n"},{"tags":["visual-studio-2010","asp.net-mvc-3","sql-server-2008-r2"],"answer_count":3,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":9321,"score":0,"question_id":7246167,"title":"How to Connect to SQL Server 2008 R2 Using EF and MVC 3","body":"<p>I am simply trying to learn MVC 3 and following a book from Wrox. Things were fine until I tried to execute a small exercise. I am getting an error which is very common. I have tried everything but could't find what the problem is. Can somebody help me out.</p>\n\n<p>My configuration.</p>\n\n<ol>\n<li><p>installed VS201 and then used WebPlatForm Installer to install SP1. Which did installed SP1 and installed MVC3 templates and framework as well on my machine. So far so good.</p></li>\n<li><p>After that I installed SQL Server 2008 R2 Developer Edition, again so far so good.</p></li>\n</ol>\n\n<p>I followed step by step the exercise and found an error which is becoming a nightmare for me. the error is mentioned below.</p>\n\n<pre><code>System.Data.ProviderIncompatibleException was unhandled by user code\n  Message=The provider did not return a ProviderManifestToken string.\n  Source=System.Data.Entity\n  StackTrace:\n       at System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection)\n       at System.Data.Entity.ModelConfiguration.Utilities.DbConnectionExtensions.GetProviderInfo(DbConnection connection, DbProviderManifest&amp; providerManifest)\n       at System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection)\n       at System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext)\n       at System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input)\n       at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()\n       at System.Data.Entity.Internal.InternalContext.Initialize()\n       at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)\n       at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()\n       at System.Data.Entity.Internal.Linq.InternalSet`1.Include(String path)\n       at System.Data.Entity.Infrastructure.DbQuery`1.Include(String path)\n       at System.Data.Entity.DbExtensions.Include[T](IQueryable`1 source, String path)\n       at System.Data.Entity.DbExtensions.Include[T,TProperty](IQueryable`1 source, Expression`1 path)\n       at MvcMusicStore.Controllers.StoreManagerController.Index() in c:\\users\\uk\\documents\\visual studio 2010\\Projects\\MvcMusicStore\\MvcMusicStore\\Controllers\\StoreManagerController.cs:line 21\n       at lambda_method(Closure , ControllerBase , Object[] )\n       at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)\n       at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)\n       at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)\n       at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass15.&lt;InvokeActionMethodWithFilters&gt;b__12()\n       at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)\n  InnerException: System.Data.SqlClient.SqlException\n       Message=A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)\n       Source=.Net SqlClient Data Provider\n       ErrorCode=-2146232060\n       Class=20\n       LineNumber=0\n       Number=-1\n       Server=\"\"\n       State=0\n       StackTrace:\n            at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)\n            at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()\n            at System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity)\n            at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject)\n            at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout)\n            at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)\n            at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance)\n            at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection)\n            at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options)\n            at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject)\n            at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject)\n            at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)\n            at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)\n            at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)\n            at System.Data.SqlClient.SqlConnection.Open()\n            at System.Data.SqlClient.SqlProviderServices.UsingConnection(SqlConnection sqlConnection, Action`1 act)\n            at System.Data.SqlClient.SqlProviderServices.UsingMasterConnection(SqlConnection sqlConnection, Action`1 act)\n            at System.Data.SqlClient.SqlProviderServices.GetDbProviderManifestToken(DbConnection connection)\n            at System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection)\n       InnerException: \n</code></pre>\n\n<p>As a solution. I have checked the SQL Server Browser Service is enabled. Also I executed the PortyQry.exe from Microsoft to find out if SQL Server is responding. and received the below response. </p>\n\n<pre><code>Attempting to resolve name to IP address...\n\n\nName resolved to x.x.x.x\n\nquerying...\n\nUDP port 1434 (ms-sql-m service): LISTENING or\n\nSending SQL Server query to UDP port 1434...\n\nServer's response:\n\nServerName MVC3Machine\nInstanceName MSSQLSERVER\nIsClustered No\nVersion 10.50.1600.1\ntcp 1433\n\n ♦  ♦\n\n==== End of SQL Server query response ====\n</code></pre>\n\n<p>Also here is the connection string </p>\n\n<pre><code>&lt;add name=\"MusicStoreDB\" connectionString=\"Server=(local); Database=MusicStore; Trusted_Connection=true; Integrated Security=True\" providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n\n<p>Edit1:\nI am not using any database to build my Model. I am trying to use Code First approach of EF.</p>\n\n<p>Edit 2:</p>\n\n<pre><code>using System.Data.Entity;\n\nnamespace MvcMusicStore.Models\n{\n    public class MvcMusicStoreContext : DbContext\n    {\n        // You can add custom code to this file. Changes will not be overwritten.\n        // \n        // If you want Entity Framework to drop and regenerate your database\n        // automatically whenever you change your model schema, add the following\n        // code to the Application_Start method in your Global.asax file.\n        // Note: this will destroy and re-create your database with every model change.\n        // \n        // System.Data.Entity.Database.SetInitializer(new System.Data.Entity.DropCreateDatabaseIfModelChanges&lt;MvcMusicStore.Models.MvcMusicStoreContext&gt;());\n\n        public DbSet&lt;Album&gt; Albums { get; set; }\n\n        public DbSet&lt;Genre&gt; Genres { get; set; }\n\n        public DbSet&lt;Artist&gt; Artists { get; set; }\n    }\n}\n</code></pre>\n\n<p>Anybody can suggest me something to try... </p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework-4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1234,"score":1,"question_id":7730733,"title":"Validation failed for one or more entities - SaveChanges EF4","body":"<p>I'm trying to write a method that generates multiple invoices. This is for a college, where clients are enrolled with tutors in a class called Enrollments. With this method, I am trying to accumulate the monthly fee of the tutors clients multiplied by their commission percentages, as tutors earn a certain commission on the lessons they give. Here is my code for this:</p>\n\n<pre><code>public ActionResult CreateBulkCommissions()\n{\n    var month = DateTime.Now.ToString(\"MMMM\");\n\n    var enrolments = db.Enrollments.ToList();\n\n    var newCommissions = from enrolment in enrolments\n                         select new TutorCommission()\n                         {\n                             CommissionAmount = enrolment.MonthlyFee,\n                             CommissionMonth = month,  // string constant \n                             CommissionStatus = \"Unpaid\",\n                             Tutor = new Tutor { TutorNoID = enrolment.Tutor.TutorNoID, TutorCommissionPercentage = enrolment.Tutor.TutorCommissionPercentage }\n                         };\n    foreach (var newCommission in newCommissions)\n    {\n        List&lt;TutorCommission&gt; TutorComs = newCommissions.GroupBy(g =&gt; g.Tutor).Select(s =&gt; new TutorCommission\n        {\n            CommissionAmount = s.Sum(u =&gt; u.CommissionAmount) * s.Key.TutorCommissionPercentage,\n            TutorNoID = s.Key.TutorNoID\n\n        }).ToList();\n\n        db.TutorCommission.Add(newCommission);\n        db.SaveChanges();\n    }\n\n    return RedirectToAction(\"Index\");\n}\n</code></pre>\n\n<p>On SaveChanges, I receive the error that validation failed for one or more entities. When I view the values of newCommissions during debug, I notice that in TutorCommission, CommissionID and TutorNoID are 0, which might be the problem? How do I resolve this? Here's a screenshot of that: <img src=\"http://i.stack.imgur.com/wjuR0.jpg\" alt=\"Debug Error\"></p>\n\n<p>These are the relevant classes:</p>\n\n<pre><code>public class Enrollment\n{\n    [Key]\n    [Display(Name = \"Enrollment ID Number\")]\n    public long EnrollmentIDNumber { get; set; }\n    [Display(Name = \"Client ID Number\")]\n    public long ClientNumberID { get; set; }\n    [Display(Name = \"Tutor ID Number\")]\n    public long TutorNoID { get; set; }\n    [Display(Name = \"Course Name\")]\n    public string CourseName { get; set; }\n    [Display(Name = \"Lesson Time\")]\n    public string LessonTime { get; set; }\n    [Display(Name = \"Lesson Day\")]\n    public string LessonDay { get; set; }\n    [Display(Name = \"Lesson Location\")]\n    public string LessonLocation { get; set; }\n    [Display(Name = \"Lesson Type\")]\n    public string LessonType { get; set; }\n    [Display(Name = \"Lesson Level\")]\n    public string LessonLevel { get; set; }\n    [Display(Name = \"Monthly Fee\")]\n    public long MonthlyFee { get; set; }\n\n    public virtual Client Client { get; set; }\n    public virtual Tutor Tutor { get; set; }\n\n}\n\npublic class TutorCommission\n{\n    [Key]\n    [Display(Name = \"Commission ID\")]\n    public long CommissionID { get; set; }\n    [Display(Name = \"Commission Month\")]\n    public string CommissionMonth {get; set;}\n    [Display(Name = \"Commission Amount\")]\n    public double CommissionAmount { get; set; }\n    [Display(Name = \"Commission Status\")]\n    public string CommissionStatus { get; set; }\n    [Display(Name = \"Tutor ID Number\")]\n    public long TutorNoID { get; set; }\n\n    public virtual Tutor Tutor { get; set; }\n    public virtual ICollection&lt;CommissionPayments&gt; CommissionPayments { get; set; }\n\n}\n\npublic class Tutor\n{\n    [Key]\n    [Display(Name = \"Tutor ID Number\")]\n    public long TutorNoID { get; set; }\n    [Required]\n    [StringLength(50, ErrorMessage=\"First name must be less than 50 characters\")]\n    [Display(Name = \"First Name\")]\n    public string TutorFirstName { get; set; }\n    [StringLength(50, ErrorMessage = \"Last name must be less than 50 characters\")]\n    [Display(Name = \"Last Name\")]\n    public string TutorLastName { get; set; }\n    [DisplayFormat(DataFormatString = \"{0:d}\", ApplyFormatInEditMode = true)]\n    [Display(Name = \"Birth Date\")]\n    public DateTime? TutorBirthDate { get; set; }\n    [Display(Name = \"Cellphone Number\")]\n    public string TutorCellphoneNumber { get; set; }\n    [Display(Name = \"Home Number\")]\n    public string TutorHomeNumber { get; set; }\n    [RegularExpression(\"^[a-z0-9_\\\\+-]+(\\\\.[a-z0-9_\\\\+-]+)*@[a-z0-9-]+(\\\\.[a-z0-9-]+)*\\\\.([a-z]{2,4})$\", ErrorMessage = \"Not a valid email address\")]\n    [Display(Name = \"Email Address\")]\n    public string TutorEmailAddress { get; set; }\n    [Display(Name = \"Street Address\")]\n    public string TutorStreetAddress { get; set; }\n    [Display(Name = \"Suburb\")]\n    public string TutorSuburb { get; set; }\n    [Display(Name = \"City\")]\n    public string TutorCity { get; set; }\n    [Display(Name = \"Postal Code\")]\n    public string TutorPostalCode { get; set; }\n    [Display(Name=\"Full Name\")]\n    public string FullName\n    {\n        get\n        {\n            return TutorFirstName + \" \" + TutorLastName;\n        }\n    }\n    [Display(Name=\"Commission Percentage\")]\n    [Required]\n    public double TutorCommissionPercentage { get; set; }\n\n    public virtual ICollection&lt;Enrollment&gt; Enrollments { get; set; }\n    public virtual ICollection&lt;TutorCommission&gt; TutorCommissions { get; set; }\n\n}\n</code></pre>\n\n<p><strong>In EntityValidationErrors:</strong></p>\n\n<p>Count = 1<br>\n{System.Data.Entity.Validation.DbEntityValidationResult}</p>\n\n<p>Thanks,\nAmy</p>\n"},{"tags":["asp.net-mvc-3","jquery-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":100,"score":2,"question_id":12196988,"title":"Retrieving data posted to a jquery dialog","body":"<p>My question is somewhat related to this answer - <a href=\"http://stackoverflow.com/a/3458299/1635958\">http://stackoverflow.com/a/3458299/1635958</a>. </p>\n\n<p>I am working on Asp.Net MVC 3.0.</p>\n\n<p>I have Page1 where I have many controls. When I click on a Button1, I want the ability to make a list of json  objects (lets say List personList ) and send that list to a Controller action. I want the view to be opened as a dialog. </p>\n\n<p>So I am trying something like</p>\n\n<pre><code>var $dialog = $('&lt;div&gt;&lt;/div&gt;')\n    .load(\"http://localhost:XXXX/Controler1/Action1\")\n    .dialog({\n   autoOpen: false,\n   title: \"SomeTitle\",\n   width: 500,\n   height: 300\n});\n\n$dialog\n    .data(\"personList\", personList)\n    .dialog('open');\n</code></pre>\n\n<p>Once I do this, I want the ability to deserialize this data at the controller's side and pass it to a view. Is this doable through this approach? Is there a better approach?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Requirement is something like this -><br>\n1. Page1 will display a grid of book details. <br>\n2. There is an Action column for each row, which is a checkbox<br>\n3. User can select the rows he is interested in, and click on a button outside the grid for a specific Action.<br>\n4. I should be able to collate data about all the books selected, and pass that data onto a jQuery dialog that gets opened. <br>\n5. The jQuery dialog should display the collated data to the user and present him with the ability to take some extra actions. <br></p>\n\n<p><strong>Edit 2</strong>\nWhat is the best practice to have modal dialogs in MVC? \nI have a view which shows a grid of items. I want to provide the ability of selecting a subset of the rows, clicking a button, and opening a modal dialog with the selected rows for editing the selected rows and doing more actions. What is the best practice to get this done in MVC? When we click the button, if we call a controller, what is the recommended way to pass data to that controller?</p>\n"},{"tags":["asp.net-mvc-3","localization","resources"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":13030140,"title":".net mvc application load wrong language resource file","body":"<p>Hello everyone I'm writing a small asp.net mvc application and i want to make it localized and support more than one language I've found many useful articles</p>\n\n<p>I added routing for languages\nI used a custom actionfilter attribute to choose current culture of current thread depending on the language code in url like \"site.com/en/controller/action\" for english or \"site.com/ar/controller/action\" for arabic.</p>\n\n<p>i created \"Resources\\Views\\Shared\\Layout.resex\" for english language and \"Resources\\Views\\Shared\\Layout.ar.resex\" for arabic language.</p>\n\n<p>the problem that it is stuck with arabic localization only and i set the current thread culture manually to english and removed actionfilter attribute but it still display arabic content!! what is the problem this is crazr</p>\n"},{"tags":["ajax","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13022656,"title":"MVC3 Ajax Ajax.ActionLink in Views Shared _Layout.cshtml","body":"<p>I have an mvc3 web app I used a shared view under\nViews\n    Shared_Layout.cshtml</p>\n\n<p>_Layout.cshtml contains markups which acts like a master page for our app</p>\n\n<pre><code>@using .............\n@using ......\n\n&lt;!DOCTYPE html&gt;\n&lt;html style=\"overflow: hidden\"&gt;\n    &lt;head&gt;\n        &lt;title&gt;@ViewBag.Title&lt;/title&gt;\n\n        &lt;link href=\"@Url.Content(\"~/Content/Site.min.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n        &lt;link href=\"@Url.Content(\"~/Content/themes/metro-light/jquery-ui-1.8.16.custom.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n        @RenderSection(\"CSS\", false)\n        &lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.6.2.min.js\")\" type=\"text/javascript\"&gt; &lt;/script&gt;\n        &lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt; &lt;/script&gt;\n        &lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt; &lt;/script&gt;\n        &lt;script src=\"@Url.Content(\"~/Scripts/jquery-ui-1.8.16.custom.min.js\")\" type=\"text/javascript\"&gt; &lt;/script&gt;\n        &lt;script src=\"@Url.Content(\"~/Scripts/jquery.unobtrusive-ajax.min.js\")\" type=\"text/javascript\"&gt; &lt;/script&gt;\n        ...... (some other scripts here)\n        ......\n\n    &lt;/head&gt;\n    &lt;body style=\"height: 100%\"&gt;\n        &lt;!-- page --&gt;\n        &lt;div class=\"page\"&gt;\n            &lt;div id=\"header\"&gt;\n                &lt;div id=\"title\"&gt;\n                    &lt;img alt=\"\" src=\"@Url.Content(\"~/Content/images/Logo.png\")\"/&gt;@ViewBag.ApplicationName\n                &lt;/div&gt;\n                &lt;div id=\"logindisplay\"&gt;\n                    Welcome &lt;strong&gt;@User.Identity.Name&lt;/strong&gt;\n                &lt;/div&gt;\n                &lt;ul id=\"menu\"&gt;              \n                    &lt;li&gt;@Ajax.ActionLink(\"Dashboard\", \"Index\",\"Dashboard\", new {@class = \"Map View\".Equals(ViewBag.Title) ? \"selected\" : null},new AjaxOptions { UpdateTargetId = \"main\", InsertionMode = InsertionMode.Replace, HttpMethod = \"GET\" })&lt;/li&gt;\n                    &lt;li&gt;@Ajax.ActionLink(\"Map View\", \"Index\", \"Map\", new { @class = \"Map View\".Equals(ViewBag.Title) ? \"selected\" : null },new AjaxOptions { UpdateTargetId = \"main\", InsertionMode = InsertionMode.Replace, HttpMethod = \"GET\" })&lt;/li&gt;\n                    &lt;li&gt;@Ajax.ActionLink(\"Settings\", \"Index\", \"Settings\", new { @class = \"Settings\".Equals(ViewBag.Title) ? \"selected\" : null }, new AjaxOptions { UpdateTargetId = \"main\", InsertionMode = InsertionMode.Replace, HttpMethod = \"GET\" })&lt;/li&gt;\n                    &lt;li&gt;@Ajax.ActionLink(\"About\", \"Index\", \"AppInfo\", new { @class = \"About\".Equals(ViewBag.Title) ? \"selected\" : null }, new AjaxOptions { UpdateTargetId = \"main\", InsertionMode = InsertionMode.Replace, HttpMethod = \"GET\" })&lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n            &lt;div id=\"main\"&gt;\n                @RenderBody()\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;!-- footer --&gt;\n        &lt;div id=\"footer\"&gt;\n\n        &lt;/div&gt;\n        &lt;form id=\"__ajaxAntiForgeryForm\" action=\"#\" method=\"post\"&gt;@Html.AntiForgeryToken()&lt;/form&gt;\n    &lt;/body&gt; \n\n&lt;/html&gt;\n</code></pre>\n\n<p>Basically, from the above code I am replacing my \"main\" div with whatever the controller return</p>\n\n<pre><code>new AjaxOptions { UpdateTargetId = \"main\", InsertionMode = InsertionMode.Replace, HttpMethod = \"GET\" }\n</code></pre>\n\n<p>Here are my controllers (nothing special)</p>\n\n<p><em>DashboardController</em></p>\n\n<pre><code>[UiException]\npublic ActionResult Index()\n{\n    return View();\n}\n</code></pre>\n\n<p><em>MapController</em></p>\n\n<pre><code>[UiExceptionAttribute]\npublic ActionResult Index()\n{\nreturn View();\n}\n</code></pre>\n\n<p>When I load the page and click on the links \"Dashboard\" or \"Map View\", the whole page flickers and refresh.  Supposed to be @Ajax.ActionLink does not refresh the whole page but instead just the \"main\" div.  Is there a way to have an ajax like behavior refreshing only the content section?  Can anybody help?  Thanks!</p>\n"},{"tags":["asp.net-mvc-3","jquery-validate","jquery-globalization"],"answer_count":3,"favorite_count":8,"up_vote_count":9,"down_vote_count":0,"view_count":2559,"score":9,"question_id":7438754,"title":"Localizing jquery validation with asp.net mvc 3","body":"<p>I am using Asp.Net Mvc3 and the unobtrusive jquery validation. I'd like to have my dates validation localized, I mean, jquery is validating my date as being MM/dd/yyyy but I would like it to be dd/MM/yyyy.</p>\n\n<p>I'm trying to use the jQuery Globalize plugin (http://github.com/jquery/globalize).\nI added references to the scripts globalize.js and globalize.culture.pt-BR.js and when my page loads I'm running the follwing script:</p>\n\n<pre><code>(function() {\n  $(function() {\n    $.datepicker.setDefaults($.datepicker.regional['pt-BR']);\n    Globalize.culture(\"pt-BR\");\n  });\n}).call(this);\n</code></pre>\n\n<p>The jQuery UI plugin works as charm, but the validation doesn't.\nWhat else am I missing?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","reflection"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":236,"score":2,"question_id":8271330,"title":"ASP.NET MVC3 : Is there a way to get the reflection MethodInfo for the resolved Action?","body":"<p>From a custom HtmlHelper extension, I would like to get the <code>MethodInfo</code> for the action.</p>\n\n<p>I know I can get the Type of the controller, and the string name of the action from:</p>\n\n<pre><code>public static void MyHelper(this HtmlHelper helper)\n{\n  var controller = helper.ViewContext.Controller;\n  var actionName = ViewContext.Controller.ValueProvider.GetValue(\"action\").RawValue;\n}\n</code></pre>\n\n<p>But I really want the <code>MethodInfo</code> because I want to pull a custom <code>Attribute</code> off the action method. I can't just call reflection <code>.GetMethod(actionName);</code> because there is usually more than 1 with the same name (two actions with the same name, one for the http GET and one for the POST).</p>\n\n<p>At this point I am thinking I might have to manually get all methods with the action name, and run through all the info in <code>ViewContext.Controller.ValueProvider</code> to see what method has parameters that match the values in the provider, but I am hoping the MethodInfo is already available somewhere...</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":112,"score":2,"question_id":11541758,"title":"How to get ActionDescriptor using action and controller names","body":"<p>Given the action name, controller name and HTTP verb (GET, POST .. etc), is it possible to check whether the action has (ie. is decorated by) a specific action filter attribute?</p>\n\n<p>Please note: The action and controller are not the current action and controller but can be any action and controller in the app.</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13042819,"title":"How do I get the MethodInfo of an action, given action, controller and area names?","body":"<p>What I have is the following extension method:</p>\n\n<pre><code>public MyCustomAttribute[] GetActionAttributes(\n    this Controller @this,\n    string action,\n    string controller,\n    string area,\n    string method)\n{\n}\n</code></pre>\n\n<p>How does ASP.NET MVC 3 find the action method, given the area, controller, action names and the method (GET, POST)?</p>\n\n<p>To this moment I have nothing... no clues on how to do this.</p>\n\n<p>I am currently looking for the stack trace inside a controller action, to find out how MVC dicovered it.</p>\n\n<p><strong>Why I need these attributes</strong></p>\n\n<p>My attributes contain information about whether a given user can or not access it... but depending on whether they can or not access it, I wan't to show or hide some html fields, links, and other things that could call that action.</p>\n\n<p><strong>Other uses</strong></p>\n\n<p>I have thought of using this to place an attribute over an action, that tells the css class of the link that will be rendered to call it... and some other UI hints... and then build an HtmlHelper that will render that link, looking at these attributes.</p>\n\n<p><strong>Not a duplicate</strong></p>\n\n<p>Yes, some will say this is possibly a duplicate of this question...\nthat does not have the answer I want:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/10814147/how-can-i-get-the-methodinfo-of-the-controller-action-that-will-get-called-given\">How can i get the MethodInfo of the controller action that will get called given a request?</a></p>\n\n<p>That's why I have specified the circumstances of my question.</p>\n"},{"tags":["asp.net-mvc-3","datagrid","mvccontrib","mvccontrib-grid"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":105,"score":1,"question_id":12711021,"title":"How to get the MVC contrib grid custom colum working with aspx","body":"<p>I am using the MVC Contrib Grid for rendering, sorting and filtering my data grid, but I am having problems now that it has been upgraded for MVC3 and Razor. The Custom method in my columns collection does not work for aspx pages , and the columns Action method is now obsolete.</p>\n\n<p>I use grids action method to render my columns like this in MVC 2:</p>\n\n<pre><code> ...\n &lt;% Html.Grid(Model).Columns(column =&gt; {\n            column.For(x =&gt; x.Id);\n            column.For(x =&gt; x.Name);\n            column.For(x =&gt; x.Email);\n            column.For(x =&gt; x.DateOfBirth);\n            column.For(\"View User\").Named(\"Tools\").Action(x =&gt; { %&gt;\n                 &lt;td&gt;\n                   &lt;%= Html.ActionLink(\"View\", \"View\", new { id = p.Id })%&gt;\n                   &lt;%= Html.ActionLink(\"Edit \", \"Edit\", new { id = p.Id })%&gt;\n                   //Snip as there are too many tools :-)\n                   //.....\n                   &lt;%= Html.ActionLink(\"Delete\", \"Delete\", new { id = p.Id })%&gt;\n                &lt;/td&gt;\n            &lt;% });\n ...\n</code></pre>\n\n<p>Now with the latest version there is a Custom method that replaces the obsolete Action method. I looked at how it can be done <a href=\"http://stackoverflow.com/questions/6391737/how-to-use-a-custom-column-in-a-mvccontrib-grid-model\">in here</a>, which basically works for me now, but I loose all my helpers in the aspx view (url, etc), and now need to render my contents in another method in my model like below:</p>\n\n<pre><code> ...\n &lt;% Html.Grid(Model).Columns(column =&gt; {\n            column.For(x =&gt; x.Id);\n            column.For(x =&gt; x.Name);\n            column.For(x =&gt; x.Email);\n            column.For(x =&gt; x.DateOfBirth);\n            //the new custom column \n            column.Custom(Model.ToolsRenderer);\n            &lt;% });\n ...\n</code></pre>\n\n<p>The grid model method below called ToolsRenderer is used to render my html string.</p>\n\n<pre><code> public UserManagementViewModel : BaseModel {\n   //..snip\n   //\n     public object ToolsRenderer(Client client)\n     {\n        List&lt;string&gt; links = new List&lt;string&gt;();\n\n        var editLink = new TagBuilder(\"a\");\n        // here is my biggest problem, before  Html.ActionLink used to make\n        // sure that I don't have any missing links or help me if i need to \n        // refactor an action / controller name :-(\n        editLink.Attributes[\"href\"] = GetEditUserLink(client,   HttpContext.Current.Request.Url.AbsoluteUri);\n        editLink.SetInnerText(\"edit\");\n        links.Add(editLink.ToString());\n        ...\n        ...lots of links to be generated here\n        ...\n        return MvcHtmlString.Create(string.join(\" |\", links))\n        }\n   //..snip\n}\n</code></pre>\n\n<p>This works for now, but is there a way to get my aspx page working like the razor views like below?</p>\n\n<pre><code>@Html.Grid(Model).Columns(column =&gt;\n{\n  column.For(x =&gt; x.Id).\n  column.For(x =&gt; x.Name);\n  column.Custom(@&lt;td&gt;&lt;a href='@Html.Actionlink(\"edit\",\"user\",new {id})' alt=\"@item.email\"/&gt;&lt;a&gt;&lt;/td&gt;)\n\n})\n</code></pre>\n\n<p>I want to say something like:</p>\n\n<pre><code>...     \ncolumn.Custom(%&gt;&lt;td&gt;&lt;a href='&lt;%=Html.Actionlink(\"edit\",\"user\",new {id})%&gt;' alt=\"&lt;%=item.email%&gt;\"/&gt;&lt;a&gt;&lt;/td&gt;&lt;%)\n...\n</code></pre>\n"},{"tags":["asp.net-mvc-3","layout","razor","renderpartial"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13033808,"title":"Using Razor \"RenderPartial\" and \"RenderBody\", the body is rendered on top","body":"<p>I am developing a site with Header, Main Menu, Body and Footer sections. I am using a web page base layout (_Layout.cshtml) where I use the RenderPartial() method to render the Header, Main Menu and Footer. For the body, I am using the RenderBody() method. In _Layout.cshtml I have the following code:</p>\n\n<pre><code>&lt;body style=\"margin: 0\"&gt;\n&lt;form name=\"FormStart\" method=\"post\" action=\"Start.aspx\" id=\"FormStart\"&gt;\n&lt;table cellspacing=\"0\" cellpadding=\"0\" width=\"100%\" align=\"center\" border=\"0\"&gt;\n    &lt;tr&gt;\n        &lt;td valign=\"top\" width=\"1px\"&gt;&lt;/td&gt;\n        &lt;td valign=\"top\" align=\"center\" width=\"972\" bgcolor=\"#FFFFFF\"&gt;\n            &lt;table id=\"Table1\" cellspacing=\"0\" cellpadding=\"0\" width=\"972\" border=\"0\" bordercolor=\"yellow\"&gt;\n                 &lt;!-- HEADER --&gt;\n                 @{Html.RenderPartial(\"_Header\");}\n\n                 &lt;!-- MAIN MENU --&gt;\n                 @{Html.RenderPartial(\"_Menu\");}\n\n                 &lt;!-- CONTENT --&gt;\n                 @RenderBody()\n             &lt;/table&gt;\n             &lt;br /&gt;\n             &lt;!-- FOOTER --&gt;\n             @{Html.RenderPartial(\"_Footer\");}\n         &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n&lt;/form&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>On the other hand, I created a very simple view with the following code</p>\n\n<pre><code>@{\n    ViewBag.Title = \"Page\";\n    Layout = \"~/Views/Shared/_Layout.cshtml\";\n}\n\n&lt;h3&gt;You just clicked &lt;/h3&gt;&lt;h1&gt;NATURAL ALOE SECTION&lt;/h1&gt;\n</code></pre>\n\n<p>The thing is, that the content of this simple view is displayed at the very top of the page, whereas the rest is on the bottom. Instead of displaying <strong>HEADER-MAINMENU-<em>my site</em>-FOOTER</strong> it displays it in the order of <strong><em>my site</em>-HEADER-MAINMENU-FOOTER</strong>. </p>\n\n<p>I am quite new with MVC all around; I have been reading <a href=\"http://stackoverflow.com/questions/6018362/how-to-layout-a-page-with-mvc3-razor\">here</a> about the possibility of using RenderSection instead of RenderPartial in my main Layout site, but could this be the reason while it is displaying this way? Probably I am way off base, any advice is much appreciated.</p>\n\n<p>Thanks in advance. </p>\n"},{"tags":["asp.net-mvc-3","form-validation","unobtrusive-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13043830,"title":"Required Validation based on condition","body":"<pre><code>     public string InsuredName\n              {\n                  get;\n                  set;\n              }\n  public string Card_No\n          {\n              get { return this.card_No; }\n              set { this.card_No = value; }\n          }\n</code></pre>\n\n<p>here i have two properites,  <code>CardNo</code> will be required only for some <code>InsuredNames</code>.when User types InsuredName then i want to go to database and check wheather it has Card_No validation if yes then i want to validate it as required other wise not, i tried remote validation but it is not working</p>\n"},{"tags":["asp.net-mvc-3","iis7","ical","plesk"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":98,"score":1,"question_id":13023519,"title":"How to remove unwanted WWW-Authenticate headers","body":"<p>From an MVC app, I'm sourcing an iCal subscription with authentication following the answer to this SO question:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/10973751/serving-an-icalendar-file-in-aspnet-mvc-with-authentication\">Serving an iCalendar file in ASPNET MVC with authentication</a></p>\n\n<p>The iCal stream is being created dynamically from events in the DB using the DDay.iCal library.</p>\n\n<p>This solution works fine on the local development server: both OSX Calendar and Outlook can subscribe to and receive updates from the app.</p>\n\n<p>However, on the shared server at my web host, the authentication fails for both Calendar and Outlook. That is, they both keep asking me for user &amp; password after the (correct) ones fail.</p>\n\n<p>EDIT: If I point a browser at the calendar URL it also fails authentication.</p>\n\n<p>EDIT: Getting weirder—Firefox authenticates and gets the iCal file. Safari, Chrome and IE fail authentication.</p>\n\n<p>If I point curl at the calendar URL with the same credentials I'm successful (i.e. I get the desired iCal file). And, of course, the same credentials can be used to login to the MVC app.</p>\n\n<p>EDIT — I think I know what's going on, but I don't know how to fix it. In my <code>OnAuthorization()</code> I add only <code>WWW-Authentication Basic</code> but with Fiddler I can see that three types of authentication are offered:</p>\n\n<pre><code>HTTP/1.1 401 Unauthorized\nWWW-Authenticate: Basic realm=\"Secure Calendar\"\nWWW-Authenticate: Negotiate\nWWW-Authenticate: NTLM\n... etc ...\n</code></pre>\n\n<p>At this point only Firefox responds with Basic Authorization, which succeeds.</p>\n\n<pre><code>GET &lt;&lt;URL&gt;&gt; HTTP/1.1\n...\nAuthorization: Basic &lt;&lt;encoded credentials&gt;&gt;\n</code></pre>\n\n<p>IE responds with Negotiate, which fails</p>\n\n<pre><code>GET &lt;&lt;URL&gt;&gt; HTTP/1.1\n...\nAuthorization Negotiate &lt;&lt;encoded stuff&gt;&gt;\n</code></pre>\n\n<p>Who is adding the other two and how can I make it stop? Here's more detail from the server response:</p>\n\n<pre><code>HTTP/1.1 401 Unauthorized\nCache-Control: private\nTransfer-Encoding: chunked\nContent-Type: text/html\nServer: Microsoft-IIS/7.5\nX-AspNetMvc-Version: 3.0\nWWW-Authenticate: Basic realm=\"Secure Calendar\"\nX-AspNet-Version: 4.0.30319\nWWW-Authenticate: Negotiate\nWWW-Authenticate: NTLM\nX-Powered-By: ASP.NET\nX-Powered-By-Plesk: PleskWin\nDate: Tue, 23 Oct 2012 13:27:48 GMT\n</code></pre>\n\n<p>Thanks,\nEric</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","routing","subfolder"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":13039836,"title":"MVC3 routing with subfolder structure","body":"<p>I've been learning MVC3 a bit for a while and although I understand most of the basics, the routing is something I just can't seem to get a hang off. I'm not sure whether I'm doing/thinking it in a correct way and the other answers I've read on stackoverflow/google only seem to confuse me more. </p>\n\n<p>Anyway here's the situation. I've got a solution (cleaned it up for this question), where I'd like to create a structure in my views folder to organize everything in a structure I've been using for my asp.net webforms projects.</p>\n\n<p><img src=\"http://i.stack.imgur.com/XDqyx.png\" alt=\"solution\"></p>\n\n<p>Anyway, I was wondering whether it would be possible to get this kind of structure, where I could organize all my partial views into a specific subfolder called UserControls in which there are more subfolders where I would group every partial view I'd need for a specific page. </p>\n\n<p>Ideally, my Views folder would contain 2 folders: Pages and UserControls and everything I'd need would go into a subfolder, or a sub sub folder.</p>\n\n<p>Okay so if this is possible, how would I start routing this? I've been trying multiple ways of getting any result but they all end up in a 404 errors. </p>\n\n<p>If this is a wrong approach of me, what would be a better alternative?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-membership"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13024844,"title":"How to use MembershipUser.IsApproved for account confirmation","body":"<p>Here's what I want to achieve with ASP.Net MVC 3 :</p>\n\n<p>Before a user can actively use my website, I want them to fill a form and give a few details. Unless they have done so, they get redirected to the form website.</p>\n\n<p>I thought this would be feasible by registering the account with the IsApproved-flag set to false, but actually such users cannot login at all (<code>Membership.ValidateUser(model.UserName, model.Password)</code> always returns false).</p>\n\n<p>Is there any mechanism in forms authentication that supports this scenario? Or will I have to track this in a custom database table?</p>\n\n<p>Thanks in advance!</p>\n\n<p>EDIT : Thanks to MystereMan (read his reply first) and a few other great posts here on SO, here's the ActionFilter (Attribute and its usage):</p>\n\n<pre><code>[AttributeUsage(AttributeTargets.Method, AllowMultiple = true)]\npublic class RedirectUserInRoleAttribute : ActionFilterAttribute\n{\n    public string RoleName { get; set; }\n\n    public string TargetControllerName { get; set; }\n\n    public string TargetActionName { get; set; }\n\n    public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        MembershipUser user = Membership.GetUser();\n        if (user != null)\n        {\n            string[] roles = Roles.GetRolesForUser(user.UserName);\n\n            if (roles.Any(x =&gt; x == RoleName))\n            {\n                RouteValueDictionary redirectTargetDictionary = new RouteValueDictionary();\n                redirectTargetDictionary.Add(\"action\", TargetActionName);\n                redirectTargetDictionary.Add(\"controller\", TargetControllerName);\n\n                filterContext.Result = new RedirectToRouteResult(redirectTargetDictionary);\n            }\n        }\n    }\n}\n\n\n[Authorize]\n[RedirectUserInRole(RoleName = \"Pending\", TargetControllerName = \"Home\", TargetActionName = \"Index\")]\npublic ActionResult ChangePassword()\n{\n  //...\n}\n\n[Authorize]\n[RedirectUserInRole(RoleName = \"Member\", TargetControllerName = \"Home\", TargetActionName = \"Index\")]\npublic ActionResult Confirm()\n{\n  // show confirm form here!\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","mvc","html-helper"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1707,"score":4,"question_id":8698720,"title":"When using Html.TextBoxFor, add the name of the model as prefix to id","body":"<p>I have an asp mvc 3 project When I use</p>\n\n<pre><code>@Html.TextBoxFor(model =&gt; model.Name)\n</code></pre>\n\n<p>the TexBoxFor render as</p>\n\n<pre><code>&lt;input id=\"Name\" name=\"Name\" type=\"text\" value=\"\" /&gt;\n</code></pre>\n\n<p>my model is \"UserModel\" :</p>\n\n<pre><code>[DisplayName(\"Name\")]\npublic string Name{ get; set; }\n</code></pre>\n\n<p>Is there a way to add to the name of the model as prefix in the id? maybe some attribute?</p>\n\n<p>I want that the text box will render as</p>\n\n<pre><code>&lt;input id=\"UserName\" name=\"UserName\" type=\"text\" value=\"\" /&gt;\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","health-monitoring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12148926,"title":"Health Monitoring is not logging errors when CustomError is set to \"On\" or \"RemoteOnly\"","body":"<p>I am using Health Monitoring for catching all errors and sending them to email. While it works in the development environment it did not when I deploy it in Prod. The only difference being the \"customerrors\" set to \"on/off\". So, I verified it again and it seems it will not log when the custom errors is set to \"On/RemoteOnly\". Below is part of my configuration in question. </p>\n\n<p>Is there a workaround to this issue? Thanks. </p>\n\n<pre><code>&lt;healthMonitoring enabled=\"true\"&gt;\n</code></pre>\n\n<p>\n    </p>\n\n<pre><code>&lt;add name=\"All Errors\" type=\"System.Web.Management.WebBaseErrorEvent\"\nstartEventCode=\"0\" endEventCode=\"2147483647\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>\n    </p>\n\n<pre><code>&lt;add\n  name=\"SimpleMailWebEventProvider\"\n  type=\"System.Web.Management.SimpleMailWebEventProvider\"\n  to=\"dev@net\"\n  from=\"de@net\"\n  buffer=\"false\"\n/&gt;\n</code></pre>\n\n<p></p>\n\n<p>\n    </p>\n\n<pre><code>&lt;add name=\"All Errors Default\" eventName=\"All Errors\" provider=\"SimpleMailWebEventProvider\"\nprofile=\"Default\" minInstances=\"1\" maxLimit=\"Infinite\" minInterval=\"00:00:00\" /&gt;\n</code></pre>\n\n<p>\n</p>\n\n<p>--update\nThis is MVC3 project</p>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-validation-plugin","asp.net-mvc-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":636,"score":0,"question_id":10496952,"title":"Validating File Upload - Jquery and \"Accept\" attribute","body":"<p>I am using a form to upload a file. I want only PDF files to be uploaded. This is my code:</p>\n\n<p>A input box to allow the user to choose a file:</p>\n\n<pre><code>@Html.FileBox(m =&gt; m.FileName, new { id = \"FileName\", accept = \"application/pdf\" })\n</code></pre>\n\n<p>and a place to display error message(s):</p>\n\n<pre><code>@Html.ValidationMessageFor(m=&gt;m.FileName)\n</code></pre>\n\n<p>The code generated for the input field is:</p>\n\n<pre><code>    &lt;input id=\"FileName\" type=\"file\" name=\"FileName\" data-val-required=\"The File Name field is required.\" data-val-length-max=\"512\" data-val-length=\"The field File Name must be a string with a maximum length of 512.\" data-val=\"true\" accept=\"application/pdf\"&gt;\n</code></pre>\n\n<p>Now even if I choose a PDF file, I get an error <code>Please enter a value with a valid extension.</code></p>\n\n<p>I am using MVC 3, and unobstrusive jquery to validate the form.</p>\n"},{"tags":["c#","asp.net-mvc-3","list","razor","checkbox"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13017884,"title":"Dynamically generated list of checkboxes not retaining checked property properly","body":"<p>I am making an ASP.NET MVC3 partial view to generate a list of checkboxes according to a model and some ViewBag parameters.  Here is the current code:</p>\n\n<pre class=\"lang-razor prettyprint-override\"><code>@model List&lt;XXXXData&gt;\n\n&lt;table style=\"width: 100%\"&gt;\n    &lt;tr&gt;\n        @{\n            var i = 0;\n            var colCount = ViewBag.ColCount ?? 3;\n            List&lt;string&gt; checkList = ViewBag.CheckList;\n            foreach (var item in Model)\n            {\n                // convert all non-alphanum id characters to '-'\n                var idText = item.Name.Aggregate(\n                    \"\",\n                    (current, letter) =&gt; (Char.IsLetterOrDigit(letter)) \n                        ? current + letter \n                        : current + '-');\n                &lt;td&gt;\n                    @Html.CheckBox(\n                        ViewBag.ListName as string, \n                        checkList.Contains(item.Name), \n                        new {\n                            id = item.ID, \n                            @class = \"listCheckbox\", \n                            value = item.ID, \n                            title = item.Description\n                        })\n                    &lt;label \n                        for=\"@(item.ID)\" \n                        id=\"@(idText)\" \n                        title=\"@(item.Description)\"&gt;\n                        @(item.Name)\n                    &lt;/label&gt;\n                &lt;/td&gt;\n                if (i++ % colCount == colCount - 1)\n                {\n                    @:&lt;/tr&gt;&lt;tr&gt;\n                }\n            }\n        }\n    &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>This generates a table of checkboxes, whose width is specified by ViewBag.ColCount (default 3).  The model is a list of objects containing ID, Text, and Description fields; the description shows as a tooltip and the text as a label, and the ID is used to let the programmer know what was selected.  If the unique name of an item is in ViewBag.CheckList, the corresponding checkbox is selected.  </p>\n\n<p>The whole thing seems to work well enough, except for when the user hits Refresh.  While I appreciate the page feature where if I select a checkbox and refresh, the box is still selected, it does not seem to work so well with a generated list of boxes:  \"Hard checks,\" where the above code hard-assigns selection to a box, seem to persist properly.  However, for \"soft checks,\" where I select a new item not in the CheckList, a refresh will shift the \"soft checks\" over two boxes.  Does anyone have an idea why this happens?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","back-button"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":102,"score":2,"question_id":12962696,"title":"asp.net mvc 3 : how to get data in table on browser back button","body":"<p>my problem is: on my layout page I have links to different dashboards. When I click on a link it displays data in table: Each link calls a action method and get a view which displays data in a html table. \nin each table, there a hyperlink field (column) which displays details about that particular record. This hyperlink calls another action method in controller. \nSo when I click a link on Layout, it displays table and a hyper link in the table displays details about that particular record.\nfrom this details page, when I click on browser back button, I need the data in the currently opened table. but I am not getting this table it is again going to Index action method.\nHow to get this?</p>\n\n<p>help please...</p>\n"},{"tags":["asp.net","asp.net-mvc-3"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13038541,"title":"Newbie: MVC3 authentication / remember me","body":"<p>I am new to MVC, so this question may be trivial.\nIn my LogOn action, I do the following:</p>\n\n<pre><code>public ActionResult LogOn(UserModel userModel, string returnUrl)\n    {\n        ActionResult retvalue = null;\n        UserProfile user = MyDatabaseAccess.Instance.GetAuthenticatedUser(userModel.EmailAddress, userModel.Password);\n        if (user != null)\n        {\n            FormsAuthentication.SetAuthCookie(userModel.EmailAddress, userModel.RememberMe);\n            Session[\"LoggedOnUser\"] = user;\n            if (Url.IsLocalUrl(returnUrl))\n            {\n                retvalue = Redirect(returnUrl);\n            }\n            else\n            {\n                retvalue = RedirectToAction(\"Home\", \"Home\");\n            }\n        }\n        else\n        {\n            retvalue = RedirectToAction(\"LogOn\", \"Account\");\n        }\n        return retvalue;\n    }\n</code></pre>\n\n<p>At this point my session has the full UserProfile object and I use it throught the website, so far things are working correctly.</p>\n\n<p>Next time the user hit the website the user is already Authenticated (rememberme was set to true), and the User.Identity.Name has the email address of the user that was authenticated previously which is correct.\nThe problem is that I would like to load UserProfile into the session the same way I do it in the LogOn action.\nI want a single place where I do that, rather than in every [Authorized] action.</p>\n\n<p>Is there such way ?</p>\n"},{"tags":[".net","asp.net-mvc-3","unit-testing","moq","app-globalresources"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13013075,"title":"How do you Moq a .resx that lives in App_GlobalResource?","body":"<p>I'm writing unit tests for a controller in an MVC3 web project, but my tests throw exceptions when they try and access a resource like this:</p>\n\n<pre><code>return Index(Resources.Strings.MyStringResource);\n</code></pre>\n\n<p>The resource is a <code>.resx</code> file titled <code>Strings</code>.</p>\n\n<p>I'm using the <a href=\"http://code.google.com/p/moq/\" rel=\"nofollow\">Moq</a> libraries to achieve unit test for <code>HttpContextBase</code> functionality, so I was wondering how I would go about using the Moq libraries to access an App_GlobalResource.</p>\n\n<p>Any help or pointers would be greatly appreciated!</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":13037388,"title":"Allowing numbers from 1 to 100 with EditorFor","body":"<p>I've tried to use the following RegEx annotation, but it didn't work:</p>\n\n<pre><code>[RegularExpression(@\"([0-9]|[0-9]\\d|100)$\"]\n</code></pre>\n\n<p>(<a href=\"http://stackoverflow.com/a/4806298/457500\">this</a> answer suggest that it's a bad approach)</p>\n\n<p>I also tried with maskedInput 1.2.2 (jQuery), but it won't accept any single digit value</p>\n\n<pre><code>jQuery(function ($) {\n    $(\"#MyControl\").mask(\"99\"); //also tried \"9?9\"\n});\n</code></pre>\n\n<p>Is it ever possible to have a mask accepting value from 1 to 100 only? </p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":50,"score":3,"question_id":13019553,"title":"How can I get intellisense to start working again in my razor views?","body":"<p>So I installed a trial version of Windows 8 and started having issues my Visual Web Developer 2010 Express so I uninstalled Visual Web Developer 2010 Express.  After re-installing the Web Developer I noticed that the code in the views no longer allows intellisense to happen.  Is there some additional component that I need to download?   </p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1620,"score":0,"question_id":8436375,"title":"mvc3 Html.ActionLink as image not as text","body":"<pre><code>&lt;div class=\"orderby_name\"&gt;\n@Html.ActionLink(\" \", \"DisplayCategory\", \"Categories\", new { articleSortBy = \"Name\", articleSortType = \"asc\" }, null)\n&lt;/div&gt;\n</code></pre>\n\n<p>i am lookin in razor if exist ImageLink. Now i have @Html.ActionLink and becouse i do not have any text name i can not click on it. I want to have image as link.</p>\n\n<p>How can i make image as link in razor?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","back-button","asp.net-mvc-3-areas"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":61,"score":0,"question_id":13020930,"title":"Back Button takes to the Previous page with no data MVC 3","body":"<p>I am using ASP.NET MVC3 for my web application. In that application a user has to go through a series of questions and then there is a details page after that (Answer Page). </p>\n\n<p>If user decide to change an answer. They instinctively click the back button and are taken to the previous page. Which happens to be a blank questioner.</p>\n\n<p>I think the back button is refreshing the page. Their previously entered answers are not being populated in the questioner. </p>\n\n<p>How to get same data at previous page, while clicking \"Back\" button on current page </p>\n\n<p>Do you need to handle a event or something for the back ?</p>\n"},{"tags":["asp.net-mvc-3","jquery-ajax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12895735,"title":"Creating a dropdownlist using ajax and jquery in MVC3","body":"<p>I'm currently working on a project where I need to load a dropdownlist using ajax when a row within a Telerik Grid is being edited.  Currently, my Ajax seems to work, however, when it tries to load the results from the server, it throws an error concerning the append property of jQuery.  I guess my question is is there a way of doing this?  Here is what I have thus far.</p>\n\n<p>View</p>\n\n<pre><code>@(Html.Telerik().Grid&lt;ProductSpecificationAttributeModel&gt;()\n                    .Name(\"specificationattributes-grid\")\n                    .DataKeys(x =&gt;\n                    {\n                        x.Add(y =&gt; y.Id).RouteKey(\"psaId\");\n                    })\n                    .Columns(columns =&gt;\n                    {\n                        columns.Bound(x =&gt; x.SpecificationAttributeOptionId).ReadOnly().Visible(false);\n                        columns.Bound(x =&gt; x.SpecificationAttributeName).Width(200).ReadOnly();\n                        columns.Bound(x =&gt; x.SpecificationAttributeOptionName).Width(200);\n                        columns.Bound(x =&gt; x.AllowFiltering).Width(100);\n                        columns.Bound(x =&gt; x.ShowOnProductPage).Width(100);\n                        columns.Bound(x =&gt; x.DisplayOrder).Width(100);\n                        columns.Command(commands =&gt;\n                        {\n                            commands.Edit();\n                            commands.Delete();\n                        }).Width(180);\n\n                    })\n                    .Editable(x =&gt;\n                    {\n                        x.Mode(GridEditMode.InLine);\n                    })\n                    .DataBinding(dataBinding =&gt;\n                    {\n                        dataBinding.Ajax().Select(\"ProductSpecAttrList\", \"Product\", new { productId = Model.Id })\n                            .Update(\"ProductSpecAttrUpdate\", \"Product\")\n                            .Delete(\"ProductSpecAttrDelete\", \"Product\");\n                    })\n                    .ClientEvents(events =&gt; events.OnEdit(\"onProductSpecificationAttributeOptionEdit\"))\n                    .EnableCustomBinding(true))\n            &lt;/div&gt;\n            &lt;script type=\"text/javascript\"&gt;\n                function onProductSpecificationAttributeOptionEdit(e) {\n                    $.getJSON('@Url.Action(\"GetSpecificationAttributeOptionNames\", \"Product\")', { selectedId: e.dataItem.SpecificationAttributeOptionId }, function (data) {\n                        var ddl = $('#SpecificationAttributeOptionName');\n                        alert(ddl.html());\n                        ddl.empty();\n                        var options = \"\";\n                        $.each(data, function (index, item) {\n                            options += \"&lt;OPTION value='\" + item.Value + \"'&gt;\" + item.Text + \"&lt;/OPTION&gt;\";\n                            alert(options);\n                        });\n                        ddl.html(options);\n                    });\n}\n            &lt;/script&gt;\n</code></pre>\n\n<p>EditorTemplates\\ProductSpecificationAttributeOptions.cshtml</p>\n\n<pre><code>@model string\n@using Telerik.Web.Mvc.UI;\n\n@Html.Telerik().DropDownList().Name(\"SpecificationAttributeOptionName\")\n</code></pre>\n\n<p>Model (ProductSpecificationAttributeModel.cs)</p>\n\n<pre><code>public int SpecificationAttributeOptionId { get; set; }\n\n    [NopResourceDisplayName(\"Admin.Catalog.Products.SpecificationAttributes.Fields.SpecificationAttribute\")]\n    [AllowHtml]\n    public string SpecificationAttributeName { get; set; }\n\n    [NopResourceDisplayName(\"Admin.Catalog.Products.SpecificationAttributes.Fields.SpecificationAttributeOption\")]\n    [AllowHtml]\n    [UIHint(\"ProductSpecificationAttributeOptions\")]\n    public string SpecificationAttributeOptionName { get; set; }\n\n    [NopResourceDisplayName(\"Admin.Catalog.Products.SpecificationAttributes.Fields.AllowFiltering\")]\n    public bool AllowFiltering { get; set; }\n\n    [NopResourceDisplayName(\"Admin.Catalog.Products.SpecificationAttributes.Fields.ShowOnProductPage\")]\n    public bool ShowOnProductPage { get; set; }\n\n    [NopResourceDisplayName(\"Admin.Catalog.Products.SpecificationAttributes.Fields.DisplayOrder\")]\n    public int DisplayOrder { get; set; }\n</code></pre>\n\n<p>Controller (ProductController.cs)</p>\n\n<pre><code>public ActionResult GetSpecificationAttributeOptionNames(int selectedId)\n    {\n        var specificationAttributeOptions = _specificationAttributeService.GetSpecificationAttributeOptionsList(selectedId);\n        var returnData = new SelectList(specificationAttributeOptions, \"Id\", \"Name\");\n        returnData.Where(x =&gt; x.Value == selectedId.ToString()).FirstOrDefault().Selected = true;\n        return Json(returnData, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p>Any help would be appreciated.  Thanks.</p>\n"},{"tags":["asp.net-mvc-3","validation","dataannotations","jquery-ui-datepicker"],"answer_count":5,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1921,"score":3,"question_id":7889038,"title":"ASP.NET MVC datetime culture issue when passing value back to controller","body":"<p><strong>How can i tell my controller/model what kind of culture it should expect for parsing a datetime?</strong></p>\n\n<p>I was using some of <a href=\"http://blogs.msdn.com/b/stuartleeks/archive/2011/01/25/asp-net-mvc-3-integrating-with-the-jquery-ui-date-picker-and-adding-a-jquery-validate-date-range-validator.aspx\" rel=\"nofollow\">this post</a> to implement jquery datepicker into my mvc application.</p>\n\n<p>When i submit the date it gets \"lost in translation\" i'm not using the US formatting for the date, so when it gets sent to my controller it simply becomes null.</p>\n\n<p>I have a form where the user chooses a date:</p>\n\n<pre><code>@using (Html.BeginForm(\"List\", \"Meter\", FormMethod.Get))\n{\n    @Html.LabelFor(m =&gt; m.StartDate, \"From:\")\n    &lt;div&gt;@Html.EditorFor(m =&gt; m.StartDate)&lt;/div&gt;\n\n    @Html.LabelFor(m =&gt; m.EndDate, \"To:\")\n    &lt;div&gt;@Html.EditorFor(m =&gt; m.EndDate)&lt;/div&gt;\n}\n</code></pre>\n\n<p>I've made an edit template for this, to implement the jquery datepicker:</p>\n\n<pre><code>@model DateTime\n@Html.TextBox(\"\", Model.ToString(\"dd-MM-yyyy\"), new { @class = \"date\" }) \n</code></pre>\n\n<p>I then create the datepicker widgets like this.</p>\n\n<pre><code>$(document).ready(function () {\n    $('.date').datepicker({ dateFormat: \"dd-mm-yy\" });\n});\n</code></pre>\n\n<p>All this works fine.</p>\n\n<p>Here is where the problems start, this is my controller:</p>\n\n<pre><code>[HttpGet]\npublic ActionResult List(DateTime? startDate = null, DateTime? endDate = null)\n{\n    //This is where startDate and endDate becomes null if the dates dont have the expected formatting.\n}\n</code></pre>\n\n<p>This is why i would like to somehow tell my controller what culture it should expect?\nIs my model wrong? can i somehow tell it which culture to use, like with the data annotation attributes?</p>\n\n<pre><code>public class MeterViewModel {\n    [Required]\n    public DateTime StartDate { get; set; }\n    [Required]\n    public DateTime EndDate { get; set; }\n}\n</code></pre>\n\n<hr>\n\n<p>Edit: <a href=\"http://weblogs.asp.net/melvynharbour/archive/2008/11/21/mvc-modelbinder-and-localization.aspx\" rel=\"nofollow\">this link</a> explains my issue and a very good solution to it aswell. Thanks to gdoron</p>\n"},{"tags":["c#","asp.net-mvc-3","active-directory","roleprovider","form-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":13035935,"title":"MVC3 C# LDAP active directory with forms authentication using roles","body":"<p>I have been tasked with changing my authentication to Active directory and need a little bit of help. \nI am referancing another post because you cannot add to it anymore (comments). \n<a href=\"http://stackoverflow.com/questions/726837/user-group-and-role-management-in-net-with-active-directory\">stackoverflow.com/questions/726837/user-group-and-role-management-in-net-with-active-directory</a></p>\n\n<p>I actually am using the example that this was taken from. I am looking for how i am supposed to use the role portion. Meaning here is what i have and it does not seem to work it throws an exception that says the AD database cannot be querried. group name not found. So i did some debugging and inside the <code>public override String[] GetRolesForUser(String username)</code>, everything is looped through and then for some reason it comes back through on a particular group (so this one is twice) and then throws the exception. </p>\n\n<p>Here is what i am calling out in the code that runs the role class:</p>\n\n<pre><code>                @if (User.IsInRole(\"RoleName\"))\n                     {\n                &lt;li&gt;@Html.ActionLink(\"QA Tracking\", \"Index\", \"AuditSchedule\")&lt;/li&gt;\n                     }\n</code></pre>\n\n<p>I am simply hiding the button and when someone logs in - it checks to see if it should be shown. Here is the code that runs:</p>\n\n<pre><code>        public override String[] GetRolesForUser(String username)\n    {\n        // If SQL Caching is enabled, try to pull a cached value.\n        if (_EnableSqlCache)\n        {\n            String CachedValue;\n            CachedValue = GetCacheItem('U', username);\n            if (CachedValue != \"*NotCached\")\n            {\n                return CachedValue.Split(',');\n            }\n        }\n        ArrayList results = new ArrayList();\n        // CHANGED FOR ADDED NON IIS\n        using (PrincipalContext context = new PrincipalContext(ContextType.Domain, null, _DomainDN))\n        //using (PrincipalContext context = new PrincipalContext(ContextType.Domain, _DomainName, _DomainDN))\n        //using (PrincipalContext context = new PrincipalContext(ContextType.Domain, _DomainName, _DomainDN, ContextOptions.SimpleBind, _Username, _Password))\n        {\n            try\n            {\n                UserPrincipal p = UserPrincipal.FindByIdentity(context, IdentityType.SamAccountName, username);\n                var groups = p.GetAuthorizationGroups();\n                //System.Collections.Generic.List&lt;string&gt; bob = new System.Collections.Generic.List&lt;string&gt;();\n                //foreach (GroupPrincipal g in groups)\n                //{\n                //    bob.Add(g.SamAccountName);\n                //}\n                //PrincipalSearchResult&lt;Principal&gt; fred;\n\n                foreach (GroupPrincipal group in groups)\n                {\n                    if (!_GroupsToIgnore.Contains(group.SamAccountName))\n                    {\n                        if (_IsAdditiveGroupMode)\n                        {\n                            if (_GroupsToUse.Contains(group.SamAccountName))\n                            {\n                                results.Add(group.SamAccountName);\n                            }\n                        }\n                        else\n                        {\n                            results.Add(group.SamAccountName);\n                        }\n                    }\n                }\n            }\n            catch (Exception ex)\n            //catch (NoMatchingPrincipalException exception)\n            {\n                throw new ProviderException(\"Unable to query Active Directory.\", ex);\n                //StreamWriter sw = new StreamWriter(\"errorlog.txt\", true);\n                //sw.WriteLine(exception.Message);\n                //sw.Close();\n            }\n        }\n        // If SQL Caching is enabled, send value to cache\n        if (_EnableSqlCache)\n        {\n            SetCacheItem('U', username, ArrayListToCSString(results));\n        }\n        return results.ToArray(typeof(String)) as String[];\n    }\n</code></pre>\n\n<p>I also changed the code where the exception is to write out an error log. However when i did that it seems to not fault out, but i think it is because it is writing it to the log file - which i currently cannot find where it is. usually it is thrown in the debug folder but i do not have a debug folder for some reason - must be a MVC project thing. </p>\n\n<p>Anyway i am looking for 2 answers\nIs this what i should be implementing to check for roles \nand how should i check it - from example of what i am using already. </p>\n\n<p>thanks </p>\n\n<p>Also just so you know - I know that i can use windows authentication and the world would be great, however i have users that will be using IPads to login on this so there would be no windows authentication. </p>\n"},{"tags":["c#","asp.net-mvc-3","logging","action-filter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12938621,"title":"How can I log all query parameters in an action filter?","body":"<p>I am implementing a logger that should capture details through an action filter for the purposes of user activity recording and fault finding.</p>\n\n \n\n<pre><code>   public interface ISessionLogger\n    {\n        void LogUserActionSummary(int sessionId, string userActionType);    \n        void LogUserActionDetail(int session, string userActionType, DateTime userActionStartedUtc, long actionDurationInMilliseconds, string queryParams, string referredFrom);\n    }\n</code></pre>\n\n<p>I would like <code>queryParams</code> to capture all keys and values from the form collection, route values, action params, json calls and the querystring, which sounds like I would need </p>\n\n<p><code>filterContext.Controller.ValueProvider</code></p>\n\n<p>but it doesn't seem possible to loop through this. So in my FilterAttribute I have </p>\n\n<pre><code>public void OnActionExecuting(ActionExecutingContext filterContext)\n{\n    var paramList = new List&lt;string&gt;();\n    if(filterContext.ActionParameters != null)\n    {\n        paramList.AddRange(filterContext.ActionParameters.Select(param =&gt; String.Format(\"{0}:{1}\", param.Key, param.Value.ToString())));\n    }\n    if(filterContext.Controller.ValueProvider != null)\n    {\n        //loop through the valueprovider and save the key value pairs to paramList\n    }\n\n    _queryParams = string.Join(\",\", paramList);\n}\n</code></pre>\n\n<p>Is there another way to achieve this within the OnActionExecuting method of an action filter?</p>\n"},{"tags":["asp.net-mvc-3","linq"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13017991,"title":"MVC 3 controller GroupBy View error","body":"<p>Im creating an MVC 3 view from a controller. My model \"MyList\", contains a large number of records. When I create my model using the following linq statement:</p>\n\n<pre><code>var model = _db.MyList.GroupBy(r =&gt; r.myKey);\n</code></pre>\n\n<p>I'm getting the error: \"The model item passed into the dictionary is of type 'System.Collections.GenericlList' 1... but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable' ...</p>\n\n<p>In the view I have the following code in the first line:</p>\n\n<pre><code>@model IEnumerable&lt;MyApp.Models.MyList&gt;\n</code></pre>\n\n<p>I tried returning</p>\n\n<pre><code>return View(model.ToList());\n</code></pre>\n\n<p>from the controller, but no joy. What am I missing?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","visual-studio-2010","web-deploy"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":13034355,"title":"Web Deploy to 2 separate web servers?","body":"<p>I have an MVC3 application that I deploy to IIS 7.5 using the \"Web Publish\" feature in Visual Studio.  I need to setup a 2nd server that will be hardware load-balanced and will mirror the setup on the 1st server.</p>\n\n<p>I am aware of the Web Farm Framework and that is an option, however I don't like the idea of the controller server being the weakest link in the chain.  I think I would rather just use the hardware load balancer to direct traffic.</p>\n\n<p>Is it possible to write a manual Web Deploy script that will target 2 separate servers each time it is run?  </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-2","asp.net-mvc-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13027245,"title":"how to replace underline with dash in inside area?","body":"<p>I'm using asp.net MVC 3 for my website , I want to replace underlines with dashes in my addresses . I can do it . but when I want to replace them inside a area I can't do it . </p>\n\n<p>who can help me ?</p>\n\n<p>this is my code : </p>\n\n<pre><code>public class HyphenatedRouteHandler : MvcRouteHandler\n        {\n            protected override IHttpHandler GetHttpHandler(RequestContext requestContext)\n            {\n                requestContext.RouteData.Values[\"controller\"] = requestContext.RouteData.Values[\"controller\"].ToString().Replace(\"-\", \"_\");\n                requestContext.RouteData.Values[\"action\"] = requestContext.RouteData.Values[\"action\"].ToString().Replace(\"-\", \"_\");\n                return base.GetHttpHandler(requestContext);\n            }\n        }\n</code></pre>\n\n<p>and this is my area route : </p>\n\n<pre><code>context.MapRoute(\n                \"products_default\",\n                \"products/{controller}/{action}\",\n                new { controller = \"All\", action = \"Index\" }\n            );\n</code></pre>\n\n<p>I want to navigate this address :</p>\n\n<p>localhost:1559/products/store-builder/boronz</p>\n\n<p>product is my area name . of course when I navigate this address :</p>\n\n<p>localhost:1559/products/store_builder/boronz</p>\n\n<p>it shows page . </p>\n\n<p><strong>EDIT :</strong> </p>\n\n<p>I use this for my area route but it can't detect this is an area :</p>\n\n<pre><code>//context.Routes.Add(\n//    new Route(\"products/{controller}/{action}\",\n//    new RouteValueDictionary(\n//        new { controller = \"\", action = \"Index\" }),\n//        new MyProject.MvcApplication.HyphenatedRouteHandler())\n//);\n</code></pre>\n\n<p>how can I fix this ?</p>\n"},{"tags":["asp.net-mvc-3","openxml","documentation-generation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13033579,"title":"Web application - Having users updating document templates","body":"<p>I'm developing in ASP.NET MVC 3.  We want to take Word (perhaps PDF as well) template documents and present them to the user to update appropriate fields.  Some fields would be populated automatically if DB values exist.  The updated document would be validated to ensure required fields are populate and then saved somewhere.   </p>\n\n<p>We don't want to open Word instances on a server.  I'm looking at OpenXML development as a possible solution.  </p>\n\n<p>Does OpenXML handle the scenario I described above?  Does anyone know of any sample ASP.NET MVC applications that I could reference?      </p>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13032727,"title":"About Lists and Objects","body":"<p>This works:</p>\n\n<pre><code>data.Add(New Object() {activityDate, types(\"Aerobics - low\"), types(\"Aerobics - high\")})\n</code></pre>\n\n<p>However, I need for the second and third variables to be database driven (coming from a List in the following example):</p>\n\n<pre><code>Dim var1 = New List(Of Object)\nvar1.Add(types(\"Aerobics - low\"))\nvar1.Add(types(\"Aerobics - high\"))\ndata.Add(New Object() {activityDate, var1.ToList})\n</code></pre>\n\n<p>This doesn't seem to work.  How do I put my objects inside of another object?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I have also tried <code>data.Add(New Object() {activityDate, var1.ToArray})</code> but that doesn't work either.  I just want to get the dynamic elements of my list into an object of the format above.</p>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12939364,"title":"Can't Use Path in ASP MVC Action","body":"<p>I am trying to use Path() but it has a blue line under it and says, \"local variable (path) cannot be referred to until it is declared.\"  How can I use Path()?</p>\n\n<pre><code>Imports System.Globalization\nImports System.IO\n\nPublic Class MessageController\n    Inherits System.Web.Mvc.Controller\n\n    &lt;EmployeeAuthorize()&gt;\n    &lt;HttpPost()&gt;\n    Function SendReply(ByVal id As Integer, ByVal message As String, ByVal files As IEnumerable(Of HttpPostedFileBase)) As JsonResult\n\n\n            ' upload files\n            For Each i In files\n\n                If (i.ContentLength &gt; 0) Then\n\n                    Dim fileName = path.GetFileName(i.FileName)\n                    Dim path = path.Combine(Server.MapPath(\"~/App_Data/uploads\"), fileName)\n                    i.SaveAs(path)\n\n                End If\n\n            Next\n\n\n    End Function\n\nEnd Class\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","caching"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12860332,"title":"Does ASP MVC use a cached production database?","body":"<p>Someone changed my admin password that I use to login to my website.  I changed it back, and I can now log in to the MVC site on localhost.  However, it won't log in on the server when I publish the site out.  This happened yesterday, too, but eventually the production server started letting me log in again.  They both use the same database.  There seems to simply be a a time delay or some sort of caching going on here.  Does ASP MVC do something like this?  Does anyone know how to refresh it so that I can log in to both sites again?</p>\n\n<p>Thank you.</p>\n"},{"tags":["c#","asp.net-mvc-3","session"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":1279,"score":4,"question_id":10634419,"title":"Reusing session across controllers in C# MVC3","body":"<p>I'm creating a website in C# using MVC3. The website is a client that uses a web service. The web service uses a unique session id per user, which is given as the last parameter in each service call. You get the session id when you log in.</p>\n\n<p>I'm able to get the session id and save it in a property in my user controller:</p>\n\n<pre><code>private string Sid\n{\n    get\n    {\n        var sid = Session[\"Sid\"];\n        return sid == null ? \"\" : sid.ToString();\n    }\n    set\n    {\n        Session[\"Sid\"] = value;\n    }\n}\n</code></pre>\n\n<p>In my other controllers I'm able to get the session id with a similar property (just without the setter), but when it asks the user controller to do something where it accesses its own property to get the id the session is null.</p>\n\n<p>It seems like the sessions don't get transferred between the controllers, but I don't know how to do that. I would like to access the session from one central place, instead of having properties in each controller, but I can't figure out how to do it.</p>\n\n<p>After three days of searching Google hasn't been able to give me the answer. Do you have any ideas?</p>\n"},{"tags":["asp.net-mvc-3","entity-framework-4.1","visual-studio-2012"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":197,"score":2,"question_id":13030416,"title":"how can i use Entity Framework 4.1 in Visual Studio 2012?","body":"<p>I have a web application on a web farm and i use .NET 4 and entity data model 4.1.</p>\n\n<p>when i started working on this web application i used visual studio 2010, and today i have uninstalled it and installed new version (Visual Studio 2012).</p>\n\n<p>Due to some reasons, i have deleted my ado.net entity data model to recreate it, but i<br>\npay attention that visual studio 2012 use <code>entity framework 5</code> not 4.1. I have updated it but in old model i can context constructor to change my connection string but in this new model have no constructor, is that true?</p>\n\n<p>I have installed <code>EF 4.1</code> but it doesn't works and I've added version 5 to my project.\nBackground info: my web application is on a shared host and i can not update it to EF 5.</p>\n\n<p>How can i use entity framework 4.1 in visual studio 2012 ?\nis that possible? if yes, how?</p>\n"},{"tags":["asp.net-mvc-3","nhibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13010511,"title":"how to use distinct keyword to filter object","body":"<p>i have a project list where i can get all details about projects. In project class,i have object of customer in project ,  i just want to filter that list according to customer. how can i do this .</p>\n\n<pre><code>public ICollection&lt;Project&gt; GetProjectBasicDetailsByProjectTypeCustomerID(ProjectType projectType, string custName, string cordinatorName, string projectName)\n    {\n        oLog.Debug(\"Started\");\n        ISession session = DataAccessLayerHelper.OpenReaderSession();\n        ITransaction transaction = null;\n        ICollection&lt;Project&gt; projectList = null;\n        try\n        {\n            transaction = session.BeginTransaction();\n            ICriteria criteria = session.CreateCriteria(typeof(Project),\"Project\")\n                .CreateAlias(\"Project.customer\",\"customer\",NHibernate.SqlCommand.JoinType.InnerJoin)\n                .CreateAlias(\"Project.Coordinator\", \"Coordinator\", NHibernate.SqlCommand.JoinType.InnerJoin)\n                .Add(Restrictions.Eq(\"Project.ProjectType\", projectType));\n\n\n            projectList = criteria.List&lt;Project&gt;().ToList();\n\n            session.Flush();\n            transaction.Commit();\n        }\n        catch (Exception ex)\n        {\n            if (transaction != null &amp;&amp; transaction.IsActive)\n                transaction.Rollback();\n            oLog.Error(ex);\n        }\n        finally\n        {\n            if (transaction != null)\n                transaction.Dispose();\n\n            if (session != null &amp;&amp; session.IsConnected)\n                session.Close();\n        }\n        oLog.Debug(\"End\");\n        return projectList;\n    }\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc-3","vbscript","c#-3.0","scheduled-tasks"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":286,"score":1,"question_id":11083087,"title":"Call MVC Controller from Windows task scheduler","body":"<p>I am using ASP.NET MVC 3.  I have one special controller for job scheduler.  I need to call this controller every night at midnight from the Windows task scheduler (like calling a .bat file from windows task scheduler).</p>\n\n<p>Somebody told me that this is possible using VB script.  We can call VB script from Windows task scheduler and VB script will call ASP.NET MVC controller.  But I do not know how to do this.</p>\n\n<p>If anybody has any ideas, please share with us.</p>\n"},{"tags":[".net","asp.net-mvc-3","jquery-plugins"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13030582,"title":"Differentiate multiple jpickers on single page","body":"<p>I have a problem, I am using multiple jpickers on my page using mvc3 UIHINT attribute but i am not able to treat each jpicker as uniquely because jpickers are rendered by the UIHINT attribute, so these are all same. can any one help?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13029667,"title":"why ado.net entity data model changed in vs 2012?","body":"<p>i created two samples of windows application </p>\n\n<p>first on vs 2010 and .net framework 4 and \nsecond on vs2012 and .net framework 4 too.</p>\n\n<p>i add ado.net entity data model to them but this model is deferente on theme first have this files:</p>\n\n<pre><code>1-mymodel.Designer.cs\n</code></pre>\n\n<p>second :</p>\n\n<pre><code>1-mymodel.Context.tt\n2-mymodel.Designer.cs\n3-Mymodel.tt\n4-mymodel.edms.diagram\n</code></pre>\n\n<p>why thee are deference is that new in vs 2022 and it is important for me that first has default constructor that let you create your own connection string but second hasn't any constructor,why?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13000309,"title":"how to autenticate from one domain to another?","body":"<p>i have to website,one of theme is main site and another is for my company services\nuser must register in firs website and can use my services in another site.</p>\n\n<p>another website is a sub domain in first.</p>\n\n<pre><code>now i have a question, how can i move user \nlog in authentication after user log in, in first site to second site?\n\n what is the best and secure way?\n</code></pre>\n\n<p>i user form authentication in first site to authenticate my users and user validate in first site's database.\nmy firs site is in mvc3 razor and .net4.0.</p>\n\n<p>thanks all</p>\n"},{"tags":["sql-server","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13028791,"title":"MVC Refactoring Approach? How to introduce more generic functionality?","body":"<p>I am developing a complex wizard driven document creation application. I understand the initial domain's requirement and thus can create an explicit database model for this using explicit column names. Also I am a slight novice with MVC. I know that I will need to make the application more generic ie the Wizard will change, different attributes will need to be stored. My current view/instinct is to implement what is known at present using the most traditional techniques that the tools MVC/EF most closely support then refactor to support the more generic functionality at a later date using technologies such as XML features in SQL Server and WF Foundation etc. Doing all this now seems a big step.</p>\n\n<p>So my question is about the virtue of keeping it simple to start with then refactor in the more sophisticated features later on, rather than building it generic to start with.</p>\n\n<p>Thoughts and wisdom great appreciated.</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc-3","tinymce"],"answer_count":0,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":31,"score":3,"question_id":12425186,"title":"TinyMCE NetAdvImage virtual path","body":"<p>I am trying to have a virtual directory outside of the my web where I upload files via TinyMCE for company marketing data, etc... For images, I'm using the netadvimage image uploader.</p>\n\n<p>To set this up, I removed the physical directory /content/images/upload and created a virtual directory \"uploaded\" under /content/images/ in IIS7.</p>\n\n<p>When the image uploader/selector comes up, it appends the physical path to the file name.  The window will come up with broken links and have something like this for the image. src=\"https://dev.mysite.comC:/MyUploaded/myimages/1-200X200.jpeg\" \nC:/MyUploaded is where my virtual directory exists.  Since that is the case, it puts that instead of /content/images/uploaded (the virtual directory path)\nIs there a way to tell it to  use the virtual path instead of the physical path?</p>\n\n<p>The site is hosted in IIS 7 and is using Microsoft MVC3/c#.</p>\n\n<p>Thanks in advance.   This has me stumped.</p>\n"},{"tags":["jquery","asp.net-mvc-3","jstree"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13010738,"title":"Jstree fails after postback","body":"<p>I'm using the Jstree to generate a tree stucture in my MVC3 project.</p>\n\n<p>It works ok on load, but when an postback/submit happens the tree will not render.\nIt simple shows the list in \"normal\" Ul/li fashion.</p>\n\n<p>From what I can tell the classes that Jstree normalle attach to the Ul/Li is not attached after postback.</p>\n\n<p>My Jquery is like this.. very basic</p>\n\n<pre><code>jQuery(document).ready(function($) {\n    $(\"#testTree\").bind(\"loaded.jstree\", function(event, data) {\n\n    }).jstree({\n        themes: {\n            theme: \"default\",\n            dots: false,\n            icons: false\n        },\n        core: {\n            animation: 200,\n            open_parents: false\n        },\n        cookies: {\n            cookie_options: {\n                path: '/'\n            }\n        },\n        plugins: [\"themes\", \"html_data\", \"cookies\"]\n    });\n});\n</code></pre>\n\n<p>It appears that the problem only happens when I have the jquery.mobile 1.2 (http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js\") on the page.\nIf I remove this all is working ok.</p>\n\n<p>Any input would be appreciated</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":13015250,"title":"MVC3 button click to populate html table and removed personal passage","body":"<p>I am new to MVC3 and trying to work on my first small project at work. I have a HomeController with two actions, Index() and GetData(). Index just returns the Index view. When the Index page loads, I want there to be an html Button or Input of type Button. When I click on this button, I want the GetData action to run, which selects some data based on a linq query and returns a List. Then in the Index view itself, below the button which i clicked, I want the list to be populated onto an html table .....I assume using a foreach loop.</p>\n\n<p>This is not working, and I think I am clearly misunderstanding the concept of this MVC pattern.</p>\n\n<p>My Controller Code:</p>\n\n<pre><code>    private ReferenceDataContext data = new ReferenceDataContext();\n\n    public ActionResult Index()\n    {\n\n        return View();\n\n    }\n\n    public ActionResult GetData()\n    {\n\n        using (data)\n        {                \n            var hosp = (from x in data.Hospitals\n                          where x.HAcode == \"Q36\"\n                          select x).ToList();\n            ViewData[\"hosp\"] = hosp;\n            return RedirectToAction(\"Index\");                \n        }\n\n    } \n</code></pre>\n\n<p>My View Code:</p>\n\n<pre><code>@model IEnumerable&lt;NursingHomes.Models.Hospitals&gt;\n\n@{\n    ViewBag.Title = \"Hospitals Verify\";\n}\n\n\n&lt;br /&gt;\n&lt;br /&gt;\n@using (Html.BeginForm(\"GetData\", \"Home\")) \n{ \n&lt;input type=\"submit\" value=\"Submit\" title=\"Get Data\" /&gt;  \n\n&lt;h2&gt;Nursing Homes&lt;/h2&gt;\n\n&lt;table&gt;\n&lt;tr&gt;\n&lt;th&gt;Code&lt;/th&gt;\n&lt;th&gt;HAcode&lt;/th&gt;\n&lt;th&gt;Name&lt;/th&gt;\n\n&lt;/tr&gt;\n\n@foreach (NursingHomes.Models.Hospitals item in (List&lt;NursingHomes.Models.Hospitals&gt;)    ViewData[\"hosp\"])\n{ \n&lt;tr&gt;\n&lt;td&gt;\n@Html.DisplayFor(modelItem=&gt;item.Code)\n&lt;/td&gt;\n&lt;td&gt;\n@Html.DisplayFor(modelItem=&gt;item.HAcode)\n&lt;/td&gt;\n&lt;td&gt;\n@Html.DisplayFor(modelItem=&gt;item.Name)\n&lt;/td&gt;\n\n&lt;/tr&gt;\n\n}\n\n&lt;/table&gt;\n\n} \n</code></pre>\n\n<p>I am doing something wrong above? Is is this simply not possible without the use of JQuery?</p>\n\n<p>Basic question is, how can click on that button on the Index page, and tell it to run the GetData action and then build the table below the button using the returned List from the GetData action.</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12265499,"title":"MVC3 RenderPage never renders content","body":"<p>So I have this master/detail setup with a WebGrid. All is well until I try and use RenderPage to display the detail when a record is clicked:</p>\n\n<pre><code>&lt;div class=\"innerbox\"&gt;\n    @{\n        if(gdEligibility.HasSelection){\n             @RenderPage(\"~/Views/Eligibility/EligibilityPolicyDetailView.cshtml\",\n                 new { Customer = gdEligibility.SelectedRow })\n        }\n    }\n&lt;/div&gt;\n</code></pre>\n\n<p>Everything works, if I put a break point I can step through the detail view's cshtml file no problem, no errors. But nothing is ever rendered between the outer div's. Ever. Why doesn't RenderPage return anything? I even tried adding .ToHtmlString() on the end of the line but still nothing.</p>\n\n<p>The detail cshtml:</p>\n\n<pre><code>@{ foreach(TravelInsurance.Models.Policy p in Page.Customer.Policies){\n\n&lt;fieldset&gt;\n    &lt;legend&gt;Policy&lt;/legend&gt;\n\n    &lt;div class=\"display-label\"&gt;Policy Number&lt;/div&gt;\n    &lt;div class=\"display-field\"&gt;\n        @Html.DisplayFor(model =&gt; p.PolicyNumber)\n    &lt;/div&gt;\n\n    &lt;div class=\"display-label\"&gt;Premium&lt;/div&gt;\n    &lt;div class=\"display-field\"&gt;\n        @Html.DisplayFor(model =&gt; p.Premium)\n    &lt;/div&gt;\n&lt;/fieldset&gt;\n}}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","dependency-injection","simple-injector","entity-framework-4.3.1"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":98,"score":5,"question_id":12046690,"title":"How to reduce number of injected dependencies on controller","body":"<p>I am using MVC3, Entity Framework v4.3 Code First, and SimpleInjector. I have several simple classes that look like this:</p>\n\n<pre><code>public class SomeThing\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n}\n</code></pre>\n\n<p>I have another entity that looks like this:</p>\n\n<pre><code>public class MainClass\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public virtual AThing AThingy { get; set; }\n    public virtual BThing BThingy { get; set; }\n    public virtual CThing CThingy { get; set; }\n    public virtual DThing DThingy { get; set; }\n    public virtual EThing EThingy { get; set; }\n}\n</code></pre>\n\n<p>Each Thingy (currently) has its own Manager class, like so:</p>\n\n<pre><code>public class SomeThingManager\n{\n    private readonly IMyRepository&lt;SomeThing&gt; MyRepository;\n\n    public SomeThingManager(IMyRepository&lt;SomeThing&gt; myRepository)\n    {\n        MyRepository = myRepository;\n    }\n} \n</code></pre>\n\n<p>My MainController consequently follows:</p>\n\n<pre><code>public class MainController\n{\n    private readonly IMainManager MainManager;\n    private readonly IAThingManager AThingManager;\n    private readonly IBThingManager BThingManager;\n    private readonly ICThingManager CThingManager;\n    private readonly IDThingManager DThingManager;\n    private readonly IEThingManager EThingManager;\n\n    public MainController(IMainManager mainManager, IAThingManager aThingManager, IBThingManager bThingManager, ICThingManager cThingManager, IDThingManager dThingManager, IEThingManager eThingManager)\n    {\n        MainManager = mainManager;\n        AThingManager = aThingManager;\n        BThingManager = bThingManager;\n        CThingManager = cThingManager;\n        DThingManager = dThingManager;\n        EThingManager = eThingManager;\n    }\n\n    ...various ActionMethods...\n}\n</code></pre>\n\n<p>In reality, there are twice as many injected dependencies in this controller. It smells. The smell is worse when you also know that there is an OtherController with all or most of the same dependencies. I want to refactor it.</p>\n\n<p>I already know enough about DI to know that property injection and service locator are not good ideas. </p>\n\n<p>I can not split my MainController, because it is a single screen that requires all these things be displayed and editable with the click of a single Save button. In other words, a single post action method saves everything (though I'm open to changing that if it makes sense, as long as it's still a single Save button). This screen is built with Knockoutjs and saves with Ajax posts if that makes a difference.</p>\n\n<p>I humored the use of an Ambient Context, but I'm not positive it's the right way to go.\nI humored the use of injecting a Facade as well.\nI'm also wondering if I should implement a Command architecture at this point.\n(Don't all of the above just move the smell somewhere else?)</p>\n\n<p>Lastly, and perhaps independent of the three above approaches, is should I instead have a single, say, LookupManager with explicit methods like GetAThings(), GetAThing(id), GetBThings(), GetBThing(id), and so on? (But then that LookupManager would need several repositories injected into it, or a new type of repository.)</p>\n\n<p>My musings aside, my question is, to reiterate: what's a good way to refactor this code to reduce the crazy number of injected dependencies?</p>\n"},{"tags":["asp.net-mvc-3","jquery-validate","maskedinput"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":2764,"score":2,"question_id":6472098,"title":"Validating integer Input using a Mask (Asp .NET MVC 3.0) ","body":"<p>My Model :</p>\n\n<pre><code>public virtual int? NumberTest { get; set; }\n</code></pre>\n\n<p>My View</p>\n\n<pre><code>@Html.LabelFor(model =&gt; model.NumberTest)\n&lt;br /&gt;\n@Html.TextBoxFor(model =&gt; model.NumberTest)\n</code></pre>\n\n<p>I'm using <a href=\"http://digitalbush.com/projects/masked-input-plugin/\" rel=\"nofollow\">Masked Input Plugin</a>, so I have in my View :</p>\n\n<pre><code>$(\"#NumberTest\").mask(\"99999-999\");\n</code></pre>\n\n<p>My Html generated :</p>\n\n<pre><code>&lt;input data-val=\"true\" data-val-number=\"The field NumberTest must be a number.\" id=\"NumberTest\" name=\"NumberTest\" type=\"text\" value=\"\" /&gt;\n</code></pre>\n\n<p>So it automatically generated a number validation on my Integer input... And I'm using a mask with non-integer char to format number.... </p>\n\n<p>This validatior is always called when I fill the input ... How can I fix that?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","sendmail"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":462,"score":3,"question_id":11932116,"title":"System.Security.Cryptography.CryptographicException: The handle is invalid","body":"<p>I am getting exception while sending mail through C# for </p>\n\n<pre><code>SmtpClient client = new SmtpClient() \n</code></pre>\n\n<p>as <strong>System.Security.Cryptography.CryptographicException: The handle is invalid.</strong></p>\n\n<pre><code>MailMessage mail = new MailMessage(from,to);\n\n            mail.To.Add(to);\n            mail.From = new MailAddress(from, \"\", System.Text.Encoding.UTF8);\n\n            mail.Subject = \"This is a test mail\";\n\n            mail.SubjectEncoding = System.Text.Encoding.UTF8;\n\n            mail.Body = fr.message;\n\n            mail.BodyEncoding = System.Text.Encoding.UTF8;\n\n            mail.IsBodyHtml = true;\n\n            mail.Priority = MailPriority.High;\n\n            SmtpClient client = new SmtpClient();\n\n            //Add the Creddentials- use your own email id and password\n            client.Credentials = new System.Net.NetworkCredential(from, Password);\n\n            client.Port = 587; // Gmail works on this port\n\n            client.Host = \"smtp.gmail.com\";\n\n            client.EnableSsl = true; //Gmail works on Server Secured Layer\n\n                client.Send(mail);\n</code></pre>\n\n<p>I am not getting why this happens?</p>\n"},{"tags":["javascript","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13028208,"title":"Call Controller Action through Javascript","body":"<p>I have call controller action through javascript using window.location</p>\n\n<pre><code>window.location = \"/SomeController/SomeAction/\";  \n</code></pre>\n\n<p>it's working fine but when i will develop it in on sub-domain it not constructing  URL properly  </p>\n\n<p>My URL Is</p>\n\n<pre><code>http://testgecianet/pms/\n</code></pre>\n\n<p>when i call the action it construct URL like </p>\n\n<pre><code>http://testgecianet/SomeController/SomeAction\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>http://testgecianet/pms/SomeController/SomeAction \n</code></pre>\n\n<p>how i can construct correct path when application deploy on SubDomain.?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":35,"score":-1,"question_id":13027118,"title":"MVC form post not reaching controller","body":"<p>I have a form that on submit doesn't reach the controller method (I put a breakpoint there)</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult SaveBilling( FormCollection fc )\n    {\n...\n}\n</code></pre>\n\n<p>the frontend code is something like this</p>\n\n<pre><code>&lt;form action=\"/PersonSettings/SaveBilling\" method=\"post\" &gt;\n...\n&lt;input type='submit' value=\"save\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>any ideas ?</p>\n\n<p>not sure if it is a route handler problem because it does reach the GET version if i go to /PersonSettings/SaveBilling in browser but the post method just yields a blank page and doesnt go into the code</p>\n"},{"tags":["c#",".net","vb.net","asp.net-mvc-3","visual-studio"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":13013064,"title":"How to add parameters to OnActionExecuting?","body":"<p>I want to add Params in current request in  OnActionExecuting() filter i tried this </p>\n\n<pre><code>filterContext.HttpContext.Request.Params.Add(\"mid\", \"amogh\");\n</code></pre>\n\n<p>It gives error that says this is <code>read only</code>.</p>\n\n<p>I also want to access this added Params in next request.can i access this Params by using filterContext.RequestContext.HttpContext.Request.UrlReferrer object.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","httpresponse"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13014261,"title":"How to bufferise the response from the action?","body":"<p>How can I send some part of the web response without waiting the all rendering process finish?\nI prefer do that in an Action.</p>\n\n<p>I used to use <code>Response.Buffer = false;</code> in .net 2.0 but now with MVC 3 I don't know how to do that.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13024911,"title":"Hide link value","body":"<p>Here is part of my mvc3 project code.</p>\n\n<pre><code>@Html.ActionLink(item.PolicyNo, \"MasterView\", new { PolicyNo = item.PolicyNo })\n</code></pre>\n\n<p>It will passing the \"PolicyNo\" to Controller, and the link bar will show this for example: \n\"http://localhost:49237/Policy/Details1?PolicyNo=1001\"</p>\n\n<p>now my question is how to hide the value become :\n\"http://localhost:49237/Policy/Details1\" only?</p>\n"},{"tags":["javascript","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13026154,"title":"Unable to get value of the property '2' : object is null or undefined","body":"<p>I encounter some problem when I am trying to copy (non-duplicated) selected content from one listbox to another. I keep getting \"Unable to get value of the property : object is null or undefined\" exception.</p>\n\n<p>Below are my codes</p>\n\n<pre><code>function CopyItem(from, to) {\n    var src = document.getElementById(from);\n    var dest = document.getElementById(to);\n\n    for (var i = 0; i &lt; src.options.length; i++) {\n        if (src.options[i].selected) {\n            var found = false;\n\n            for (var j = 0; j &lt; dest.options.length; j++) {\n                if (dest.options[j].value == src.option[i].value) {\n                    found = true;\n                    break;\n                }\n            }\n\n            if (!found) {\n                var newOption = document.createElement(\"option\");\n                newOption.text = src.options[i].text;\n                newOption.value = src.options[i].value;\n                dest.options[dest.options.length] = newOption;\n            }\n        }\n    }\n}\n\n@Html.ListBox(\"lvDataList\", Model.DataList, new { id = \"SelectionList\", Multiple = \"multiple\", Size = 15, style = \"width: 100%;\" })\n@Html.ListBoxFor(x =&gt; x.SelectedData, Model.SelectedDataList, new { id = \"SelectedList\", Multiple = \"multiple\", Size = 15, style = \"width: 100%;\" })\n&lt;input type=\"button\" id=\"btnAdd\" title=\"Add Selected Events\" onclick=\"CopyItem('SelectionList', 'SelectedList', true)\" /&gt;\n</code></pre>\n\n<p>Can someone please explain where did I code wrongly?\nThanks.</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13025421,"title":"How to refresh a page on dropdownlist value change?","body":"<p>I've got a common layout page for views. This layout page contains a dropdown list, which shows the list of available dates. What I want is to reload this page having changed the data param only. The controller, action and any other params should be somehow taken from the current request context.</p>\n\n<p>If I wanted to do it manually on every view, I'd say it would be equal to </p>\n\n<pre><code>@Html.ActionLink(\n     \"\",                                        \n     \"I need to have current action name here\", \n     new { date = \"The Value of the chosen SelectListItem\" });\n</code></pre>\n\n<p>How can I achieve this? Or is there any different approach?</p>\n"},{"tags":["jquery","json","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":838,"score":5,"question_id":9771680,"title":"MVC3 Complex JSON List Binding","body":"<p>Having issues getting ASP.NET MVC3 to bind my complex JSON object that contains a list.</p>\n\n<p>Here's the structure I have for my objects.</p>\n\n<pre><code>public class PageModel\n{\n    public PageModel() { }\n    public CustomObject1 CustomObject { get; set; }\n    public IEnumerable&lt;CustomObject2&gt; Objects { get; set; }\n\n}\n\npublic class CustomObject1\n{\n    public CustomObject1() { }\n    [Required]\n    public int CustomId1 { get; set; }\n    public string CustomName { get; set; }\n}\n\npublic class CustomObject2\n{\n    public CustomObject2() { }\n    [Required]\n    public int Custom2Id { get; set; }\n    public CustomObject3 SubItem { get; set; }\n    public int SubItemId { get; set; }\n}\n</code></pre>\n\n<p>You can assume <code>CustomObject3</code> is of similar structure - no need to duplicate yet another made up class, so I figure you can use your imagination :)</p>\n\n<p>Here's the Javascript/Jquery that makes the POST call (assume all the JS leading up to this provides the correct data):</p>\n\n<pre><code>//$obj1 has all data for the first object\nvar firstObj = { };\nfirstObj.CustomId1 = $obj1.Id;\nfirstObj.CustomName = $obj1.Name;\n\nvar i = 0;\n\n//$objects is an array with all the data\n$.each($objects, function() {\n    objsArray[i] = {\n    Custom2Id: $(this).Id,\n    SubItemId: $(this).itemId\n    };\n\n    ++i;\n});\n\n$.ajax({\n    type: 'POST',\n    url: '/Action/Method',\n    data: { CustomObject: firstObj, Objects: objsArray },\n    //Success/error handlers here\n});\n</code></pre>\n\n<p>And finally (I know, quite some code) here's an overview of the method I have:</p>\n\n<pre><code>public class ActionController : Controller {\n    public JsonResult Method(PageModel model) {\n        //Gets here - model.CustomObject is filled correctly, and model.Objects has a correct count of whatever data I passed to the method - but all of the properties are empty!\n    }\n}\n</code></pre>\n\n<p>As I said, the first object is filled and all of the data is there when I debug and step through. If I pass two objects in the <code>Objects</code> array in the JSON object, I see a <code>Count</code> of 2 in the controller, but <code>Custom2Id</code> and <code>SubItemId</code> are empty.  What gives?</p>\n\n<p>When I specify a <code>contentType</code> of <code>'application/json'</code> in my <code>$.ajax</code> call, MVC complains about the data being passed. Also tried splitting the <code>model</code> parameter in the MVC method into two separate parameters, but it does not help.</p>\n\n<p>Any help is greatly appreciated - this one has me stumped!</p>\n"},{"tags":["ajax","asp.net-mvc","asp.net-mvc-3","authorization"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":198,"score":2,"question_id":11290338,"title":"How create Ajax Helpers in MVC3","body":"<p>i crate @Html.ActionLink helper here i check permissions of user. if yes i show this link otherwise not. now problem is with @Ajax.ActionLink can i make helper for Ajax.ActionLink? i make custom helpers to check permissions. it works fine with html.actionlink helper. How i check permissions in ajax actions ?</p>\n\n<pre><code> public static IHtmlString CustomActionLink(this HtmlHelper htmlHelper, int userId, string reqController, string reqAction,  string linkText,int reqActionId = 0)\n    {\n\n        bool isAllowed = checkPermission(userId, reqController, reqAction, reqActionId);\n        if (isAllowed == false)\n        {\n            return MvcHtmlString.Empty;\n        }\n        return htmlHelper.ActionLink(linkText, reqAction, new { id =reqActionId });\n    }\n</code></pre>\n\n<p>i want to do this same check in Ajax Actions.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":43,"score":-4,"question_id":13024960,"title":"ASP.NET MVC4 application and jquery","body":"<p>The jpegcam plugin for taking photos via webcam is working on my local host machine, but when i deployed my application on Apphabor, the jpegcam plugin did not enable my webcam in other to take photos. what could be wrong please?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":173,"score":6,"question_id":13024030,"title":"Validation of @Html.Textbox in MVC4","body":"<p>I use an update action to update based on the input from the @Html.Textbox. </p>\n\n<pre><code>@using (Html.BeginForm(\"Update\", \"Shopping\", new { UserID = Request.QueryString[\"UserID\"] }, FormMethod.Post, new { id = \"myForm\" }))\n   {               \n   @Html.ValidationSummary()                \n   @Html.Hidden(\"id\", @Request.QueryString[\"UserID\"] as string)\n   @Html.Hidden(\"productid\", item.ProductID as string)\n   @Html.TextBox(\"Quantity\", item.Quantity)   \n   @Html.ValidationMessage(\"Quantity\", \"*\") \n   @Html.Hidden(\"unitrate\", item.Rate)               \n   &lt;input type=\"submit\" value=\"Update\" /&gt;\n   }\n</code></pre>\n\n<p>and In My Model class  </p>\n\n<pre><code>        [Required(ErrorMessage = \"Quantity is required.\")]\n        [Display(Name = \"Quantity\")]\n        [Range(2, 100, ErrorMessage = \"There is not enough inventory for the product to fulfill your order.\")]\n        public int? Quantity { get; set; }\n</code></pre>\n\n<p>The problem is I m not getting the validation message when the textbox is empty.\nBut when I use @Html.TextBoxFor</p>\n\n<pre><code>   @Html.TextBoxFor(modelItem =&gt; item.Quantity)\n   @Html.ValidationMessageFor(modelitem =&gt; item.Quantity) \n</code></pre>\n\n<p><br/>\nI am getting the validation message. and my update action is not working.\n<br/>\nHere I have two options.\n<br/>\n1. How to pass the textbox name \"qty\" in @Html.TextboxFor ?? (or)\n<br/>\n2. How to get the validation message in @Html.Textbox() using @Html.ValidationMessage()</p>\n\n<p>Any suggestions ..</p>\n\n<p>EDIT :\nMy Update Action<br/></p>\n\n<pre><code>[HttpPost]\n   public ActionResult Update(string id, string productid, int Quantity, decimal unitrate)\n        {\n        if (ModelState.IsValid)\n         {\n                   int _records = UpdatePrice(id, productid, Quantity, unitrate);\n                    if (_records &gt; 0)\n                    {\n                        return RedirectToAction(\"Index1\", \"Shopping\", new { UserID = Request.QueryString[\"UserID\"] });\n                    }\n                    else\n                    {\n                        ModelState.AddModelError(\"\",\"Can Not Update\");\n                    }\n                }\n                return View(\"Index1\");\n            }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":13023304,"title":"How to make an object globally accessible in MVC","body":"<p>I have created a custom caching provider for my MVC application.  I will use this class to store/retrieve session data to an outside service (like memcached or Redis).</p>\n\n<p>I would like to create the object instance once at application start so that I can reference the object from any controller, and only have to 'new up' the instance once.  I was thinking that I would instantiate the class in the Global.asax Application_Start method.  However, the instance does not seem to be accessible in any of the controllers.</p>\n\n<p>What is the preferred way to instantiate and then access a (global) class in MVC?</p>\n\n<p>Here is a copy of my 'simplified' class:</p>\n\n<pre><code> public class PersistentSession : IPersistentSession\n    {\n        // prepare Dependency Injection\n        public ICache cacheProvider { get; set; }\n\n        public bool SetSessionValue(string key, string value)\n        {\n            return cacheProvider.PutToCache(key, value);\n        }\n\n        public bool SetSessionValue(string key, string value, TimeSpan expirationTimeSpan)\n        {\n            return cacheProvider.PutToCache(key, value, expirationTimeSpan);\n        }\n\n        public string FetchSessionValue(string key)\n        {\n            return cacheProvider.FetchFromCache(key);\n        }\n    }\n</code></pre>\n\n<p>I want to instantiate it one time so that I can access it from all controllers application wide, something like this:</p>\n\n<pre><code> // setup PersistentSession object\n persistentSession = new PersistentSession();\n string memcachedAddress = WebConfigurationManager.AppSettings[\"MemcachedAddress\"].ToString();\n string memcachedPort = WebConfigurationManager.AppSettings[\"MemcachedPort\"].ToString();\n\n persistentSession.cacheProvider = new CacheProcessor.Memcached(memcachedAddress, memcachedPort);\n</code></pre>\n\n<p>Where/How in MVC should the object be instantiated to get global access from all controllers?</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","iis","publish"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":200,"score":0,"question_id":11010131,"title":"Publish MVC 3.0 Site in IIS 7.0","body":"<p>I program website with MVC 3.0 which uses EntityFrame work 4.0, In controller layer I Have this:<br/></p>\n\n<pre><code>  public ViewResult Index()\n    {\n     return View(_DatabaseSMSEntities.People.ToList());\n    }\n</code></pre>\n\n<p>And in View Layer I used Telerik Grid:</p>\n\n<pre><code>&lt;% Html.Telerik().Grid&lt;ProjectWebsite.Models.People&gt;(Model)\n                    .Name(\"People\")\n                    .Columns(columns =&gt;\n                    {\n                        columns.Bound(o =&gt; o.PersonID).Format(\n                         \"&lt;a href='../WebPage/PersonSMSPage.aspx?personID=\" + \"{0}\" + @\"' &lt;br/&gt;runat=\"\"server\"\"&gt;\" +\n                         \"&lt;img src='../../Content/themes/base/images/RegisterSMS.png' &lt;br/&gt;alt='{0}' /&gt;\"&lt;br/&gt;\n                        );                                           \n\n                    })\n                    .RowAction(row =&gt;\n                    {\n                        if (row.Index == 0)\n                        { row.DetailRow.Expanded = false; }\n                    })                   \n                     .Render();%&gt;\n</code></pre>\n\n<p>I published it in IIS 7.0. But it does not work. </p>\n\n<pre><code>&lt;connectionStrings&gt;\n    &lt;add name=\"ApplicationServices\" connectionString=\"data source=.\\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true\" providerName=\"System.Data.SqlClient\" /&gt;\n    &lt;add name=\"DatabaseSMSEntities\" connectionString=\"metadata=res://*/Models.ModelDatabaseSMS.csdl|res://*/Models.ModelDatabaseSMS.ssdl|res://*/Models.ModelDatabaseSMS.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\DatabaseSMS.mdf;Integrated Security=True;MultipleActiveResultSets=True&amp;quot;\" providerName=\"System.Data.EntityClient\" /&gt;\n    &lt;add name=\"cn1\" connectionString=\"data source=~/ErrorsLog/Errors.db\" /&gt;\n  &lt;/connectionStrings&gt;\n</code></pre>\n\n<p>First, I  published it in D:\\Pardis, But I got error:</p>\n\n<pre><code>   CREATE DATABASE permission denied in database 'master'.\n    An attempt to attach an auto-named database for file D:\\Pardis\\App_Data\\DatabaseSMS.mdf failed. A database with the same name\nexists, or specified file cannot be opened, or it is located on UNC share.\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: System.Data.SqlClient.SqlException: CREATE DATABASE permission denied in database 'master'.\nAn attempt to attach an auto-named database for file D:\\Pardis\\App_Data\\DatabaseSMS.mdf failed. A database with the same name exists, or specified file cannot be opened, or it is located on UNC share.\n\nSource Error: \n\n\nLine 20:         public ViewResult Index()\nLine 21:         {\nLine 22:             return View(_DatabaseSMSEntities.People.ToList());\nLine 23:         }\nLine 24: \n</code></pre>\n\n<p>Then, I published it in Inetup but I got error.\nI do not have ASPNET user in user list to set security.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":67,"score":4,"question_id":13003615,"title":"MVC3 default membership properties with custom model properties in view (use ModelView?)","body":"<p>I've started learning MVC3 development and have hit a bit of a stumbling block.  In my project I've moved the default aspnet_ membership tables into a separate SQL Server 2008 Express database.  I then added my own tables to hold extra profile data.  I'd like to now build a view that will list usernames (from aspnet_Users), email addresses (from aspnet_Membership), First and Last Name (from custom built table UserDetails with userid as PK and FK to aspnet_Users) and the role of users (aspnet_UsersInRoles and aspnet_Roles).</p>\n\n<p>So far to read and write from my database I've built models for each of my custom built tables with a dbcontext class:</p>\n\n<pre><code>    public class UserDetail\n{\n\n    [Key]\n    public Guid UserId { get; set; }\n\n    public string FirstName { get; set; }\n\n    public string LastName { get; set; }\n\n    public string Address { get; set; }\n\n    public string City { get; set; }\n\n    public string State { get; set; }\n\n    public string Zip { get; set; }\n\n    public string Phone { get; set; }\n\n    public DateTime DateUpdated { get; set; }\n}\n\npublic class UserLinkToken\n{\n    [Key]\n    public Guid UserId { get; set; }\n\n    public string LinkToken { get; set; }\n\n    public DateTime DateUpdated { get; set; }\n}\n\npublic class ProShotDB : DbContext\n{\n    public DbSet&lt;UserDetail&gt; UserDetails { get; set; }\n    public DbSet&lt;UserLinkToken&gt; UserLinkTokens { get; set; }\n}\n</code></pre>\n\n<p>I've had to name my tables \"UserDetails\" and \"UserLinkTokens\" for my app to write and update my database, when the names of models and dbcontext didn't match my database and table names the app would end up creating another database with tables and write the data there.</p>\n\n<p>From what I can tell to send an object to view with properties from aspnet_ tables and properties from my custom tables I will want to build a ModelView.  After reading through lots of modelview examples I'm still not clear on how it should look for my app.</p>\n\n<p>Could someone give me an example of a modelview that I could use to display a list of data rows and update all the respective table columns referenced in the modelview given a userid?</p>\n\n<p>For the example lets say I just wanted a view of all the FirstNames (UserDetails table) and their corresponding Emails (aspnet_Membership).</p>\n\n<p>My ultimate goal is a view that will display the users with their assigned roles.  Each user listed will have a link that will lead to a controller that will assign them as administrator if they are not currently of that role or remove the administrator role if they are currently an administrator.</p>\n\n<p>Sorry if this type of question has been answered before in other questions.  I've read quite a few of them and feel like they probably should have answered my question but none seemed to quite match.  Most likely my confusion stems from not fully understanding how my app is making the connections to my database.  I sort of understand that my models represent a row of data for a table and the dbcontext takes a set of these data row models and connects it to the table in the database (dbset&lt;(datarow/model object)> (table of datarows / set of model objects)).  Since I don't see a dbcontext class for the aspnet_ tables/model objects I don't have a good concept of how data in those tables are retrieved, updated or written.</p>\n\n<p>Thanks for any help clearing up my ignorance on how this works or giving me a simple example of how to accomplish what I need. </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13021802,"title":"mvc using bool in model class to change property in db","body":"<p>So I'm using mvc3 to create a database website for a rental system.</p>\n\n<p>In my rental.cs in my model folder it goes like...</p>\n\n<pre><code>public class Rental\n{\n    public int RentalID { get; set; }\n\n    public int CustomerID { get; set; }\n\n    public int MovieID { get; set; }\n\n    public bool? OnHire { get; set; }\n   // public static bool test;\n   //On another note i had to take out the 'static' in public static bool? onhire\n   //as it threw an error when I tried to load the rentals page.\n}\n</code></pre>\n\n<p>The error being:</p>\n\n<pre><code> @Html.DisplayFor(modelItem =&gt; item.OnHire)\n</code></pre>\n\n<p>So here I was trying to use a static bool, which will allow me to use it in a different class.</p>\n\n<p>Then in the movies class I was trying to say when the rental.OnHire = true, the movie.onHire will also be true.</p>\n\n<p>The idea being when the user rents out a copy they change the onHire to yes on the rental page, which will change the movie on the movies page from 'false' to 'true' for 'Onhire'</p>\n\n<pre><code>public class Movie\n{\n    public int MovieID { get; set; }\n\n    public string Title { get; set; }\n\n    public string Producer { get; set; }\n\n    public string Genre { get; set; }\n\n    public bool? OnHire { get; set; }\n\n   // if (Rental.Onhire)\n    //{\n        //OnHire = true;\n   // }\n\n}\n</code></pre>\n\n<p>Although it wasnt picking up the bool. Could someone please advise where I am going wrong. Am I going about this the right way?</p>\n"},{"tags":["jquery","asp.net-mvc-3","events","javascript-events","jquery-events"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":181,"score":0,"question_id":12981524,"title":"Jquery Modal Popup opens twice on Single Click with ASP.Net MVC3","body":"<p>I am using Modal Popup in my MVC3 application it works fine but opens twice for a single Click on the link. \nThe Modal pop is triggered from the 'Index' view of my Home Controller. I am calling a view 'PopUp.cshtml' in my modal popup. The related ActionMethod 'PopUp' for the respective view is in my 'Home' controller.</p>\n\n<p>Here is the code,</p>\n\n<p><strong>Jquery code on layout.cshtml page,</strong></p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $.ajaxSetup({ cache: false });\n\n    $(document).ready(function () {\n        $(\".openPopup\").live(\"click\", function (e) {\n            e.preventDefault();\n\n            $(\"&lt;div&gt;&lt;/div&gt;&lt;p&gt;\")\n                    .attr(\"id\", $(this).attr(\"data-dialog-id\"))\n                    .appendTo(\"body\")\n                    .dialog({\n                        autoOpen: true,\n                        title: $(this).attr(\"data-dialog-title\"),\n                        modal: true,\n                        height: 250,\n                        width: 900,\n                        left: 0,\n                        buttons: { \"Close\": function () { $(this).dialog(\"close\"); } }\n                    })\n                    .load(this.href);\n        });\n\n        $(\".close\").live(\"click\", function (e) {\n            e.preventDefault();\n            $(this).dialog(\"close\");\n        });\n    });\n    &lt;/script&gt;\n</code></pre>\n\n<p><strong>cshtml code in 'PopUp.cshtml'</strong></p>\n\n<pre><code>@{\n    ViewBag.Title = \"PopUp\";\n    Layout = null;\n}\n\n&lt;h2&gt;PopUp&lt;/h2&gt;\n\n&lt;p&gt;\nHello this is a Modal Pop-Up\n&lt;/p&gt;\n</code></pre>\n\n<p><strong>Call modal popup code in Index view of Home Controller,</strong></p>\n\n<pre><code>&lt;p&gt;\n   @Html.ActionLink(\"Click here to open modal popup\", \"Popup\", \"Home\",null, new { @class = \"openPopup\", data_dialog_id = \"popuplDialog\", data_dialog_title = \"PopUp\" })\n&lt;/p&gt;\n</code></pre>\n\n<p>What am I doing wrong that the modal pop up opens twice ?</p>\n\n<p>Thanks in Advance !</p>\n"},{"tags":["asp.net-mvc-3","model-binding","value-provider"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13020919,"title":"ASP.NET MVC3 ValueProvider drops string input to a double property","body":"<p>I'm attempting to validate the input of a text box which corresponds to a property of type <code>double</code> in my model. If the user inputs <code>\"foo\"</code> I want to know about it so I can display an error. However, the <code>ValueProvider</code> is dropping the value silently (no errors are added to the <code>ModelState</code>).</p>\n\n<p>In a normal submission, I fill in <code>\"2\"</code> for the text box corresponding to <code>myDouble</code> and submit the form. \nInspecting <code>controllerContext.HttpContext.Request.Form</code> shows that <code>myDouble=2</code>, among other correct inputs. <code>bindingContext.ValueProvider.GetValue(\"myDouble\") == 2</code>, as expected. The <code>bindingContext.ModelState.Count == 6</code> and <code>bindingContext.ModelState[\"myDouble\"].Errors.Count == 0</code>. Everything is good and the model binds as expected.</p>\n\n<p>Then I fill in \"foo\" for the text box corresponding to <code>myDouble</code> and submitted the form.\nInspecting <code>controllerContext.HttpContext.Request.Form</code> shows that <code>myDouble=foo</code>, which is what I expected. However, <code>bindingContext.ValueProvider.GetValue(\"myDouble\") == null</code> and <code>bindingContext.ModelState.Count == 5</code> (The exact number isn't important, but it's one less than before). Looking at the <code>ValueProvider</code>, is as if <code>myDouble</code> was never submitted and the model binding occurs as if it wasn't. This makes it difficult to differentiate between a bad input and no input.</p>\n\n<p>Is this the expected behavior of <code>ValueProvider</code>? Is there a way to get <code>ValueProvider</code> to report when conversion fails without implementing a custom <code>ValueProvider</code>? Thanks!</p>\n"},{"tags":["asp.net","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":2785,"score":4,"question_id":6904078,"title":"My app keeps me redirecting to Account/LogOn?ReturnUrl=%2f","body":"<p>I created an MCV 3 app and deployed it to a development server in my organization. It works OK in my development machine. However, I noticed that in the dev server, the application redirects me to Account/LogOn?ReturnUrl=%2f web page even after I've logged in correctly. I also see that sometimes some of the assets(CSS, Javascript, images) are not served either. </p>\n\n<p>The error message shown is below. After refreshing the page, the application works just fine. If I don't accesss the app in a little while, the error comes back.\nAny ideas?</p>\n\n<blockquote>\n  <p>Server Error in '/' Application.</p>\n  \n  <p>The resource cannot be found.</p>\n  \n  <p>Description: HTTP 404. The resource you are looking for (or one of its\n  dependencies) could have been removed, had its name changed, or is\n  temporarily unavailable.  Please review the following URL and make\n  sure that it is spelled correctly. </p>\n  \n  <p>Requested URL: /Account/LogOn</p>\n</blockquote>\n"},{"tags":["c#","asp.net-mvc-3","model","controller"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13020202,"title":"Passing a model object to a RedirectToAction without polluting the URL?","body":"<p>Here's what I'm trying to do:</p>\n\n<pre><code>public ActionResult Index()\n{\n    return View();\n}\n\n[HttpPost]\npublic ActionResult Index(ContactModel model)\n{\n    if (ModelState.IsValid)\n    {\n        // Send email using Model information.\n\n        return RedirectToAction(\"Gracias\", model);\n    }\n\n    return View(model);\n}\n\npublic ActionResult Gracias(ContactModel model)\n{\n    return View(model);\n}\n</code></pre>\n\n<p>All three action methods are in the same controller. Basically, a user type up some data in the contact form and I want to redirect them to a thank you page using their name in the Model object.</p>\n\n<p>As the code is, it works, but the URL passed along with GET variables. Not ideal.</p>\n\n<pre><code>http://localhost:7807/Contacto/Gracias?Nombre=Sergio&amp;Apellidos=Tapia&amp;Correo=opiasdf&amp;Telefono=oinqwef&amp;Direccion=oinqef&amp;Pais=oinqwef&amp;Mensaje=oinqwef\n</code></pre>\n\n<p>Any suggestions?</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13020178,"title":"Setting Selected Value of DropDownList in MVC 3","body":"<p>I have gone through numerous methods of trying to set the value of a dropdownlist and must be doing something silly because none of the methods are working.</p>\n\n<pre><code>@Html.DropDownList(\"startTime\", @Model.startTimeList, new { @class = \"startTime\", style = \"width: 100px;\" })\n</code></pre>\n\n<p>Its a generated list of half hour increments.</p>\n\n<p>In my controller I set this string value..</p>\n\n<pre><code>model.startTime = myTime + \" \" + amOrPm;  //ex 10:30 PM\n</code></pre>\n\n<p>My List looks like this.</p>\n\n<pre><code>List&lt;SelectListItem&gt; startTimeList = new List&lt;SelectListItem&gt;();    \n\nSelectListItem time12 = new SelectListItem { Text = \"12:00 PM\", Selected = false, Value = \"12:00PM\" };\nstartTimeList.Add(time12);\n\nSelectListItem time12Half = new SelectListItem { Text = \"12:30 PM\", Selected = false, Value = \"12:30PM\" };\nstartTimeList.Add(time12Half);\n</code></pre>\n\n<p>My list always defaults to 12:00 PM because its the first one entered into the list.  I want that if model.startTime has a value it sets to that value.</p>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework","localization","string-similarity"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":86,"score":5,"question_id":13019140,"title":"Recognizing similarity in strings","body":"<p>I'm working on a system which allows imported files to be localized into other languages. </p>\n\n<p>This is mostly a private project to get the hang of MVC3, EntityFramework, LINQ, etcetera. Therefore I like doing some crazy things to spice up the end result, one of those things would be the recognition of similar strings.</p>\n\n<p>Imagine you have the following list of strings - borrowed from a game I've worked with in the past:</p>\n\n<ul>\n<li>Megabeth: Holy Roller Uniform - Includes Head, Torso, and Legs</li>\n<li>Megabeth: Holy Roller Uniform Head</li>\n<li>Megabeth: Holy Roller Uniform Legs</li>\n<li>Megabeth: Holy Roller Uniform Torso</li>\n<li>Megabeth: PAX East 2012 Uniform - Includes Head, Torso, and Legs</li>\n<li>Megabeth: PAX East 2012 Uniform Head</li>\n<li>Megabeth: PAX East 2012 Uniform Legs</li>\n<li>Megabeth: PAX East 2012 Uniform Torso</li>\n</ul>\n\n<p>As you can see, once users have translated the first 4 strings, the following 4 share a lot of similarities, in this case:</p>\n\n<ul>\n<li>Megabeth</li>\n<li>Uniform</li>\n<li>Includes Head, Torso, and Legs</li>\n<li>Head</li>\n<li>Legs</li>\n<li>Torso</li>\n</ul>\n\n<p>Consider the first 4 strings are indeed already translated, when a user selects the 5th string from the list, what kind of algorithm or technique can I use to show the user the 1st string (and potentially others) under a sub-header of \"Similar strings\"?</p>\n\n<p>Edit - A little comment on the Levenshtein Distance:\nI'm currently targeting 10k strings in the database. Levenshtein Distance compares string per string, so in this case 10k x (10k -1) possible combinations. How would I approach this in a feasible way? Is there a better solution that this particular algorithm?</p>\n"},{"tags":["asp.net-mvc-3","razor","underscore.js"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13016859,"title":"How do I stop an HTML helper from encoding the value attribute of an HTML element?","body":"<p>I have this input element which works fine with underscore templating.</p>\n\n<pre><code>&lt;input id=\"color\" name=\"color\" value=\"&lt;%= color %&gt;\" /&gt;\n</code></pre>\n\n<p>I want to use the <code>Html.Helper</code> method to generate the element instead.</p>\n\n<p>I initially tried just the basic helper</p>\n\n<pre><code>@Html.TextBox(\"color\", \"&lt;%= color %&gt;\")\n</code></pre>\n\n<p>But that gives me </p>\n\n<pre><code>&lt;input id=\"color\" name=\"color\" type=\"text\" value=\"&amp;lt;%= color %&gt;\" /&gt;\n</code></pre>\n\n<p>I tried wrapping the value attribute with <code>Html.Raw</code> but that gives the same result, and wrapping the entire helper results in the same thing.</p>\n\n<p>The entire block is wrapped in a <code>&lt;script type=\"text/template\"&gt;</code> tag.</p>\n\n<p>Why is it converting <code>&lt;</code> to <code>&amp;lt;</code> and how do I get it to stop?</p>\n\n<p>This works, but is a little messy</p>\n\n<pre><code>@MvcHtmlString.Create(Html.TextBox(\"color\", \"&lt;%= color %&gt;\").ToString().Replace(\"&amp;lt;\", \"&lt;\"))\n</code></pre>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13018018,"title":"Trigger Razor validation without submitting form","body":"<p>I have a screen with multiple divs that together cause a \"Wizard affect\". As the user navigates from one to the other I give them \"Next\" and \"Previous\" buttons without submitting the form.</p>\n\n<p>I toggle with jquery between which divs are visible. But I don't submit the form until all data for Account creation is entered.</p>\n\n<p>Unfortunately I lose razor (unobtrusive) validation for my controls</p>\n\n<p>I attempted to get the same affect by capturing by using</p>\n\n<pre><code>$('#wiz form').validate\n</code></pre>\n\n<p>This almost had the desired affect. My div toggling stops but I don't get the Razor error messages or the Editbox color highlighting.</p>\n"},{"tags":["asp.net-mvc-3","dropdownlistfor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13017655,"title":"MVC dropdownlist , data not displaying when model is not Ienumerable","body":"<p>I am having a problem passing to the View a Model that contains the dropdown data and the model.\nWith this code my page loads, but the dropdownlist contains  \"SYSTEM.WEB.MVC.SELECTLIST\" when selected. </p>\n\n<p>HERES MY CONTROLLER CODE.</p>\n\n<pre><code>public ActionResult Index(string productNameFilter, string productCategoryFilter, String productTypeFilter )\n        {\n            var ddl = new Items();\n            ddl.CategoryddList = itemsRepository.GetItemDdl(\"Item Categories\").Select(c =&gt; new SelectListItem\n            {\n                Value = c.DropdownID.ToString(),\n                Text = c.DropdownText\n            });\n           ViewBag.CategoryDD = new SelectList(ddl.CategoryddList, \"Value\", \"Text\");\n            var model = itemsRepository.GetItemByName(productNameFilter);\n            return View(model);\n        }\n</code></pre>\n\n<p>HERES MY VIEW</p>\n\n<pre><code>@model Ienumerable&lt;Models.items.items&gt;\n\n    @Html.DropDownList(\"productCategoryFilter\", new SelectList(ViewBag.CategoryDD), \"---Select Category---\") \n</code></pre>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13018475,"title":"Programmatic Object Creation","body":"<p>I have the following hard coded object:</p>\n\n<pre><code>data.Add(New Object() {\"Date\", \"Minutes\"})\n</code></pre>\n\n<p>How do I create an object like this from a for each?  For instance:</p>\n\n<pre><code>For each item in group\n\n    ' do something\n\nNext\n</code></pre>\n\n<p><em>(When \"group\" contains \"Date\" and \"Minutes.\")</em></p>\n\n<p>Thank you.</p>\n"},{"tags":["jquery","ajax","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13017286,"title":"when run the document.ready() event ,some times ajax request not working properly","body":"<pre><code>var casualDays;\nvar days;\n\n  $(document).ready(function(){\n\n    $(function(){\n        $('select, input').styledSelect();\n    });\n\n    $(function (){\n    var usernameSelected = $(\"input#Employee_UserName\" ).val().toString();\n    var username;\n    $.ajax({\n        url: '@Url.Action(\"GetLeaveConsumedDays\", \"ApplyLeave\")',\n        type: 'POST',\n\n        data: { username: usernameSelected },\n\n        success: function (results) {\n           days=results;\n        }, \n        error: function () {\n            alert(\"error\");\n        }\n    });\n    });\n    $(function (){\n    var usernameSelected = $(\"input#Employee_UserName\" ).val().toString();\n    var username;\n    $.ajax({\n        url:'@Url.Action(\"GetLeaveConsumedDaysCasual\", \"ApplyLeave\")',\n        type: 'POST',\n\n        data: { username: usernameSelected },\n\n        success: function (results) {\n           casualDays=results;\n        }, \n        error: function () {\n            alert(\"error\");\n        }\n    });\n    });\n</code></pre>\n\n<p>K</p>\n\n<p>this is my document.ready event, After run the page its work two or three time correctly.but after several times its not working properly.its not giving value for 'days' and 'casualdays' there value are get some error.After refreshing two or three time again its work.I cant think what is the reason for that.please any one can help me</p>\n"},{"tags":["asp.net-mvc-3","model-binding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12995939,"title":"datetime has changed format mvc","body":"<p>In a <code>Edit</code> action I retrieve a model from database and send it to the view. in the view have created a hidden tag for <code>createdDate</code> property of the model. When I click on <code>submitt</code> button to post back the model <code>modelstate.isvalid</code> is <code>false</code> and it generates this error.The value <code>20.10.2012 22:29:39</code> is not valid for <code>DateCreate</code>. when I right click and choose view source the hidden tag contains <code>20.10.2012 22:29:39</code> instead of <code>2012-10-22 22:29:39</code>. I don't know why the format of the date is changed. I have tried to solve problem and I think I am been convinced that it is best to don't use <code>DateTime</code> as a property of a model. It is best to have a string instead.</p>\n"},{"tags":["c#","asp.net-mvc-3","forms","session","tempdata"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":110,"score":1,"question_id":12942511,"title":"MVC multi page form losing session","body":"<p>I have a multi-page form that's used to collect leads. There are multiple versions of the same form that we call campaigns. Some campaigns are 3 page forms, others are 2 pages, some are 1 page. They all share the same lead model and campaign controller, etc. There is 1 action for controlling the flow of the campaigns, and a separate action for submitting all the lead information into the database.</p>\n\n<p>I cannot reproduce this locally, and there are checks in place to ensure users can't skip pages. Session mode is InProc.</p>\n\n<p>This runs after every POST action which stores the values in session:</p>\n\n<pre><code>    protected override void OnActionExecuted(ActionExecutedContext filterContext)\n    {\n        base.OnActionExecuted(filterContext);\n\n        if (this.Request.RequestType == System.Net.WebRequestMethods.Http.Post &amp;&amp; this._Lead != null)\n            ParentStore.Lead = this._Lead;\n    }\n</code></pre>\n\n<p>This is the Lead property within the controller:</p>\n\n<pre><code>    private Lead _Lead;\n\n    /// &lt;summary&gt;\n    /// Gets the session stored Lead model.\n    /// &lt;/summary&gt;\n    /// &lt;value&gt;The Lead model stored in session.&lt;/value&gt;\n    protected Lead Lead\n    {\n        get\n        {\n            if (this._Lead == null)\n                this._Lead = ParentStore.Lead;\n\n            return this._Lead;\n        }\n    }\n</code></pre>\n\n<p>ParentStore class:</p>\n\n<pre><code>public static class ParentStore\n{\n    internal static Lead Lead\n    {\n        get { return SessionStore.Get&lt;Lead&gt;(Constants.Session.Lead, new Lead()); }\n        set { SessionStore.Set(Constants.Session.Lead, value); }\n    }\n</code></pre>\n\n<p>Campaign POST action:</p>\n\n<pre><code>    [HttpPost]\n    public virtual ActionResult Campaign(Lead lead, string campaign, int page)\n    {\n        if (this.Session.IsNewSession)\n            return RedirectToAction(\"Campaign\", new { campaign = campaign, page = 0 });\n\n        if (ModelState.IsValid == false)\n            return View(GetCampaignView(campaign, page), this.Lead);\n\n        TrackLead(this.Lead, campaign, page, LeadType.Shared);\n\n        return RedirectToAction(\"Campaign\", new { campaign = campaign, page = ++page });\n    }\n</code></pre>\n\n<p>The problem is occuring between the above action, and before the following Submit action executes:</p>\n\n<pre><code>    [HttpPost]\n    public virtual ActionResult Submit(Lead lead, string campaign, int page)\n    {\n        if (this.Session.IsNewSession || this.Lead.Submitted || !this.LeadExists)\n            return RedirectToAction(\"Campaign\", new { campaign = campaign, page = 0 });\n\n        lead.AddCustomQuestions();\n        MergeLead(campaign, lead, this.AdditionalQuestionsType, false);\n\n        if (ModelState.IsValid == false)\n            return View(GetCampaignView(campaign, page), this.Lead);\n\n        var sharedLead = this.Lead.ToSharedLead(Request.Form.ToQueryString(false)); //Error occurs here and sends me an email with whatever values are in the form collection.\n        EAUtility.ProcessLeadProxy.SubmitSharedLead(sharedLead);\n        this.Lead.Submitted = true;\n        VisitorTracker.DisplayConfirmationPixel = true;\n\n        TrackLead(this.Lead, campaign, page, LeadType.Shared);\n\n        return RedirectToAction(this.ConfirmationView);\n    }\n</code></pre>\n\n<p>Every visitor to our site gets a unique GUID visitorID. But when these error occurs there is a different visitorID between the Campaign POST and the Submit POST. Because we track each form submission via the TrackLead() method during campaign and submit actions I can see session is being lost between calls, despite the OnActionExecuted firing after every POST and storing the form in session.</p>\n\n<p>So when there are errors, we get half the form under one visitorID and the remainder of the form under a different visitorID. Luckily we use a third party service which sends an API call every time a form value changes which uses it's own ID. These IDs are consistent between the first half of the form, and the remainder of the form, and the only way I can save the leads from the lost session issues.</p>\n\n<p>I should also note that this works fine 99% of the time.</p>\n\n<p><strong>EDIT:</strong>\nI've modified my code to explicitly store my lead object in TempData and used the TempData.Keep() method to persist the object between subsequent requests. I've only deployed this behavior to 1 of my 3 sites but so far so good.</p>\n\n<p>I had also tried storing my lead objects in Session directly in the controller action i.e.,</p>\n\n<pre><code>Session.Add(\"lead\", this._Lead);\n</code></pre>\n\n<p>which uses HTTPSessionStateBase, attempting to circumvent the wrapper class, instead of HttpContext.Current.Session which uses HTTPSessionState. This modification made no difference on the issue, as expected.</p>\n\n<p><strong>EDIT #2:</strong>\nChecking my email this morning I noticed two Session errors despite saving my lead model in TempData. Something is causing session to clear, most likely an app pool recycle of some sort, but I haven't been able to figure it out yet. I'm probably going to start storing session in SQL Server...</p>\n\n<p>SessionStore.cs code by request:</p>\n\n<pre><code>public static class SessionStore\n{\n    private static HttpSessionState Session\n    {\n        get { return HttpContext.Current.Session; }\n    }\n\n    public static T Get&lt;T&gt;(object name, T defaultValue)\n    {\n        var key = name.ToString();\n        return SessionStore.Session.ContainsKey(key) ? (T)Session[key] : defaultValue;\n    }\n\n    public static void Set(object name, object value)\n    {\n        SessionStore.Session.Add(name.ToString(), value);\n    }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","sql-server-2008","entity-framework-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":58,"score":-1,"question_id":12991660,"title":"Unable to find the requested .Net Framework Data Provider. MVC 4 with Entity Framework","body":"<p>Am using the MVC 4 in VS2010 SP1 installed machine. Am getting the following error</p>\n\n<p>Unable to find the requested .Net Framework Data Provider. It may not be installed. </p>\n\n<p>My WebConfig look like this </p>\n\n<pre><code>      &lt;connectionStrings&gt;\n    &lt;add name=\"BuildEntities\" connectionString=\"metadata=res://*/Entity.Build.csdl|res://*/Entity.Build.ssdl|res://*/Entity.Build.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;Data Source=www.xxxx.com,8754;Initial Catalog=xxxx;Persist Security Info=True;User ID=xxx;Password=xxxx;MultipleActiveResultSets=True&amp;quot;\"\n         providerName=\"System.Data.EntityClient\" /&gt;\n &lt;/connectionStrings&gt;\n</code></pre>\n\n<p>I had SQL Server 2008 installed in my lap.</p>\n"},{"tags":["php","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":27,"score":-1,"question_id":13016608,"title":"Integrating PHP pages into ASP.NET MVC 3 appication and deploying on IIS 7","body":"<p>Our application is built on ASP.NET MVC 3 &amp; Entity Frame Work, currently we deployed our application on IIS 7.</p>\n\n<p>Now Our client wants to add couple of pages designed in PHP to our application. One of the page is a login page, and the others are self registration pages for which the code is already implemented in our asp.net mvc 3 application controllers.</p>\n\n<p>1) How would I load PHP page from my asp.net MVC controller action (default route).</p>\n\n<p>2) How would I call a controller action from PHP page.</p>\n\n<p>3) And how would I utilize entity framework classes inside my PHP page. or how to pass data (objects not variables) to my controller.</p>\n\n<p>Thanks all for your help</p>\n"},{"tags":["asp.net","asp.net-mvc-3","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13016582,"title":"Adding selected attribute to select list in razor view post initialization","body":"<p>I have a list  of selectlistitem in a view model which i am passing to a my view.</p>\n\n<p>What I would like to do is use this as a DisplayBoxFor() to display this list within a razor view each time setting the initial selected item based on a string. This was so that I only need one custlist in my model. I'm setting a prperty within the model based upon the selection of the custlist in a editable form. A sample of my attempt is below.</p>\n\n<pre><code>@for(var i = 0; i &lt; Model.AllocationList.Count; i++)\n                    {\n                        &lt;tr class=\"body\"&gt;                        \n                            **&lt;td&gt;@Html.DropDownListFor(m =&gt; m.AllocationList[i].CustName, new SelectList(Model.CustList).SelectedValue = Model.AllocationList[i].CustName.ToString())&lt;/td&gt;**\n                            &lt;td&gt;@Html.DropDownListFor(m =&gt; m.AllocationList[i].BranchName, new SelectList(null))&lt;/td&gt;\n                            &lt;td&gt;@Html.EditorFor(m=&gt;m.AllocationList[i].PaymentPercentage)&lt;/td&gt;\n                            &lt;td&gt;&lt;img alt=\"close button\" title=\"Remove this allocation\" class=\"remove_row\" src=\"@Url.Content(\"~/Content/images/dialog-close.png\")\" /&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n\n                    }\n</code></pre>\n\n<p>Any advice would be greatly appreciated.</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13015512,"title":"Save page data when leaving page","body":"<p>I have an edit form that that has 2 buttons on it, 'Save' (duh) and 'Return To List' ( which performs a save before actually returning ).  The problem is the page also has Side Navigation and Top Navigation. So when the user selects any link in those the page doesn't save.  Is there a way to perform a save even when Side or Top Navigation links are selected? </p>\n\n<p>Note, this is an MVC3 C# project.  </p>\n"},{"tags":["asp.net-mvc-3","file-upload"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13016240,"title":"Uploading a file in MVC3 without using <input type=\"file\">","body":"<p>I am trying to click my action link and have it do the same thing that the  tag does.</p>\n\n<pre><code>@Html.ActionLink(\"Import Excel Document\", \"ImportFromExcel\", \"ExcelUpload\",FormMethod.Post , new {@enctype = \"multipart/form-data\", @class = \"btn btn-inverse\"})\n</code></pre>\n\n<p>Basically I want to click the button and immediately pull up the choose file window and upon selection send that to the controller. I do not want to use the input tag if I can avoid it (does not style well with the outlook of my site).</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","asp.net-mvc-3","mvchtmlstring"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":13015930,"title":"Embed MvcHtmlString containing <script> with Javascript","body":"<p>The following method of embedding some <code>Html</code> from a <code>string</code> in a <code>&lt;div&gt;</code> with Javascript (using some JQuery) works:</p>\n\n<pre><code>var div = $('#someId');\nvar testHtml = '&lt;script&gt;&lt;/script&gt;&lt;div&gt;dummy Content&lt;/div&gt;';\ndiv.html(testHtml);\n</code></pre>\n\n<p>The Html code gets embedded and displayed in the div. If I put some <code>alert('Test')</code>-statement in the <code>&lt;script&gt;</code> tags, the alert would show up.</p>\n\n<p>What also works is this:</p>\n\n<pre><code>&lt;div id=\"someId\"&gt;@MvcHtmlString.Create(\"&lt;script&gt;&lt;/script&gt;&lt;div&gt;dummy Content&lt;/div&gt;\")&lt;/div&gt;\n</code></pre>\n\n<p>However I need to pass a <code>MvcHtmlString</code> to a javascript function and then embed this string with javascript.</p>\n\n<p>This works if there is no javascript code inside the string:</p>\n\n<pre><code>var div = $('#someId');\nvar inputItem = '@MvcHtmlString.Create(\"&lt;div&gt;dummy Content&lt;/div&gt;\")';\ndiv.html(inputItem);\n</code></pre>\n\n<p>However if there is javascript content inside the string, the <code>&lt;script&gt;</code>-part does not get embedded and the content doesn't get displayed properly.</p>\n\n<p>So this doesn't work properly:</p>\n\n<pre><code>var div = $('#someId');\nvar inputItem = '@MvcHtmlString.Create(\"&lt;script&gt;&lt;/script&gt;&lt;div&gt;dummy Content&lt;/div&gt;\")';\ndiv.html(inputItem);\n</code></pre>\n\n<p>Can someone explain why this doesn't work? Is there a simple trick to it?</p>\n"},{"tags":["asp.net","asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":388,"score":2,"question_id":9087608,"title":"Correct MVC3 Model type of multiselect box?","body":"<p>is the correct datatype for a multi-select box in mvc3 DataType.MultilineText? These are ultimately derived from a many-to-many type relationship.</p>\n\n<p>Thanks</p>\n\n<p>Example\nA Channel can have multiple Ad Slots, and an Ad Slot can have multiple Channels.</p>\n\n<p>My current model is:</p>\n\n<pre><code>[Display(Name = \"Ad Slots\")]\n[DataType(DataType.MultilineText)]\npublic string[] AdSlots { get; set; }\n</code></pre>\n\n<p>Is that right for a multiselect?</p>\n"},{"tags":["c#",".net","asp.net-mvc-3","wcf","exception-handling"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":965,"score":2,"question_id":11343563,"title":"WCF Service returning \"requested service '...' could not be activated\" the first time it's accessed from an MVC site","body":"<p>We have a WCF service (with no security) that is being accessed by an MVC3 website.</p>\n\n<p>On the developer machines we have no problems with it but when our TeamCity setup builds the central version and deploys it under IIS7 the first time we load the MVC3 site and it accesses the WCF service - the service call returns the message:</p>\n\n<blockquote>\n  <p>System.ServiceModel.ServiceActivationException: The requested service, 'http://localhost:83/ABCStaticData/StaticDataService.svc' could not be activated. See the server's diagnostic trace logs for more information.**</p>\n</blockquote>\n\n<p>If we immediately hit the same site again, everything works fine.</p>\n\n<p>The server stack track when it throws the error is:</p>\n\n<p>Server stack trace:</p>\n\n<pre><code>at System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResponse(HttpWebRequest request, HttpWebResponse response, HttpChannelFactory1 factory, WebException responseException, ChannelBinding channelBinding)\nat System.ServiceModel.Channels.HttpChannelFactory1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)\nat System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)\nat System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)\nat System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout\nat System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)\nat System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) Exception rethrown at [0]: at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)\nat System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type) \nat ABC.StaticData.Editor.StaticDataServiceProxy.IStaticDataService.GetAllMarkets()\nat ABC.StaticData.Editor.StaticDataServiceProxy.StaticDataServiceClient.GetAllMarkets() in c:\\BuildAgent\\work\\55a3bcc468adcccb\\StaticData\\ABC.StaticData.Editor\\Service References\\StaticDataServiceProxy\\Reference.cs:line 3195\nat ABC.StaticData.Editor.Controllers.MarketsController.&lt;&gt;c__DisplayClass22.&lt;.ctor&gt;b__13() in c:\\BuildAgent\\work\\55a3bcc468adcccb\\StaticData\\ABC.StaticData.Editor\\Controllers\\MarketsController.cs:line 263\nat ABC.StaticData.Editor.Controllers.MarketsController.Index() in c:\\BuildAgent\\work\\55a3bcc468adcccb\\StaticData\\ABC.StaticData.Editor\\Controllers\\MarketsController.cs:line 306\n</code></pre>\n\n<p>Does anyone have any ideas on what could be causing the problem or where to start looking?</p>\n\n<p>UPDATE: I forgot to mention the first that if we then don't access the site for a while and then go back, it gives the same error - then works again the second time.</p>\n\n<p>UPDATE2: This is the event log entry text:</p>\n\n<pre><code>WebHost failed to process a request.\n Sender Information: System.ServiceModel.ServiceHostingEnvironment+HostingManager/3043589\n Exception: System.ServiceModel.ServiceActivationException: The service '/ABCStaticData/StaticDataService.svc' cannot be activated due to an exception during compilation.  The exception message is: Could not load type 'System.Runtime.CompilerServices.AsyncStateMachineAttribute' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.. ---&gt; System.TypeLoadException: Could not load type 'System.Runtime.CompilerServices.AsyncStateMachineAttribute' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.\n   at System.ModuleHandle.ResolveType(RuntimeModule module, Int32 typeToken, IntPtr* typeInstArgs, Int32 typeInstCount, IntPtr* methodInstArgs, Int32 methodInstCount, ObjectHandleOnStack type)\n   at System.ModuleHandle.ResolveTypeHandleInternal(RuntimeModule module, Int32 typeToken, RuntimeTypeHandle[] typeInstantiationContext, RuntimeTypeHandle[] methodInstantiationContext)\n   at System.Reflection.RuntimeModule.ResolveType(Int32 metadataToken, Type[] genericTypeArguments, Type[] genericMethodArguments)\n   at System.Reflection.CustomAttribute.FilterCustomAttributeRecord(CustomAttributeRecord caRecord, MetadataImport scope, Assembly&amp; lastAptcaOkAssembly, RuntimeModule decoratedModule, MetadataToken decoratedToken, RuntimeType attributeFilterType, Boolean mustBeInheritable, Object[] attributes, IList derivedAttributes, RuntimeType&amp; attributeType, IRuntimeMethodInfo&amp; ctor, Boolean&amp; ctorHasParameters, Boolean&amp; isVarArg)\n   at System.Reflection.CustomAttribute.IsCustomAttributeDefined(RuntimeModule decoratedModule, Int32 decoratedMetadataToken, RuntimeType attributeFilterType, Boolean mustBeInheritable)\n   at System.Reflection.CustomAttribute.IsDefined(RuntimeMethodInfo method, RuntimeType caType, Boolean inherit)\n   at System.Reflection.RuntimeMethodInfo.IsDefined(Type attributeType, Boolean inherit)\n   at Ninject.Infrastructure.Language.ExtensionsForMemberInfo.HasAttribute(MemberInfo member, Type type)\n   at Ninject.Selection.Heuristics.StandardInjectionHeuristic.ShouldInject(MemberInfo member)\n   at Ninject.Selection.Selector.&lt;&gt;c__DisplayClassa.&lt;SelectMethodsForInjection&gt;b__9(IInjectionHeuristic h)\n   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)\n   at Ninject.Selection.Selector.&lt;SelectMethodsForInjection&gt;b__8(MethodInfo m)\n   at System.Linq.Enumerable.WhereArrayIterator`1.MoveNext()\n   at Ninject.Planning.Strategies.MethodReflectionStrategy.Execute(IPlan plan)\n   at Ninject.Planning.Planner.&lt;&gt;c__DisplayClass1.&lt;CreateNewPlan&gt;b__0(IPlanningStrategy s)\n   at Ninject.Infrastructure.Language.ExtensionsForIEnumerableOfT.Map[T](IEnumerable`1 series, Action`1 action)\n   at Ninject.Planning.Planner.CreateNewPlan(Type type)\n   at Ninject.Planning.Planner.GetPlan(Type type)\n   at Ninject.Activation.Providers.StandardProvider.Create(IContext context)\n   at Ninject.Activation.Context.Resolve()\n   at Ninject.KernelBase.&lt;&gt;c__DisplayClass10.&lt;Resolve&gt;b__c(IBinding binding)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)\n   at Ninject.Planning.Targets.Target`1.GetValue(Type service, IContext parent)\n   at Ninject.Planning.Targets.Target`1.ResolveWithin(IContext parent)\n   at Ninject.Activation.Providers.StandardProvider.GetValue(IContext context, ITarget target)\n   at Ninject.Activation.Providers.StandardProvider.&lt;&gt;c__DisplayClass4.&lt;Create&gt;b__2(ITarget target)\n   at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()\n   at System.Linq.Buffer`1..ctor(IEnumerable`1 source)\n   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)\n   at Ninject.Activation.Providers.StandardProvider.Create(IContext context)\n   at Ninject.Activation.Context.Resolve()\n   at Ninject.KernelBase.&lt;&gt;c__DisplayClass10.&lt;Resolve&gt;b__c(IBinding binding)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)\n   at Ninject.Planning.Targets.Target`1.GetValue(Type service, IContext parent)\n   at Ninject.Planning.Targets.Target`1.ResolveWithin(IContext parent)\n   at Ninject.Activation.Providers.StandardProvider.GetValue(IContext context, ITarget target)\n   at Ninject.Activation.Providers.StandardProvider.&lt;&gt;c__DisplayClass4.&lt;Create&gt;b__2(ITarget target)\n   at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()\n   at System.Linq.Buffer`1..ctor(IEnumerable`1 source)\n   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)\n   at Ninject.Activation.Providers.StandardProvider.Create(IContext context)\n   at Ninject.Activation.Context.Resolve()\n   at Ninject.KernelBase.&lt;&gt;c__DisplayClass10.&lt;Resolve&gt;b__c(IBinding binding)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source)\n   at Ninject.Extensions.Wcf.BaseNinjectServiceHostFactory.CreateServiceHost(Type serviceType, Uri[] baseAddresses)\n   at System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses)\n   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.CreateService(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)\n   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.ActivateService(ServiceActivationInfo serviceActivationInfo, EventTraceActivity eventTraceActivity)\n   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)\n   --- End of inner exception stack trace ---\n   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)\n   at System.ServiceModel.ServiceHostingEnvironment.EnsureServiceAvailableFast(String relativeVirtualPath, EventTraceActivity eventTraceActivity)\n Process Name: w3wp\n Process ID: 3248\n</code></pre>\n\n<p>Just another point that we're developing using .NET 4.5 and Visual Studio 2012 RC.</p>\n"},{"tags":["ajax","json","asp.net-mvc-3","dictionary","deserialization"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":439,"score":0,"question_id":6881440,"title":"Problems deserializing Dictionarys in MVC 3 for AJAX request (an approach that works out of the box with classic ASP.NET Webforms)","body":"<p>I've been successfully WebForms for AJAX calls with relatively complex set of parameters (called using jQuery.ajax).  We're attempting to try using the same approach in MVC 3 but seem to be falling at the first hurdle with MVC failing to deserialize Dictionary arrays successfully.</p>\n\n<p>The approach that works without issue in ASP.NET WebForms \"classic\" is below:</p>\n\n<pre><code>[WebMethod]\npublic static JQGrid.JQGridData GetListForJQGrid(int? iPageSize, int? iPage, int? iMaxRecords, string sSortField, string sSortOrder,\n  Dictionary&lt;string, string&gt; dSearchOptions, Dictionary&lt;string, object&gt;[] aOriginalColumnDefinition, string[] aExtraDataColumns)\n</code></pre>\n\n<p>And below is the MVC 3 equivalent: (nb exactly the same name/parameters - different return type but I don't think that is relevant)</p>\n\n<pre><code>[HttpPost]\npublic JSONResult GetListForJQGrid(int? iPageSize, int? iPage, int? iMaxRecords, string sSortField, string sSortOrder,\n  Dictionary&lt;string, string&gt; dSearchOptions, Dictionary&lt;string, object&gt;[] aOriginalColumnDefinition, string[] aExtraDataColumns)\n</code></pre>\n\n<p>With the WebMethod all the data deserializes perfectly.  However, when the MVC method is called all the simple parameters deserialize fine but for some unknown reason the array of Dictionary's arrives as an array of nulls.</p>\n\n<p>So, off the back of that a number of questions:</p>\n\n<ul>\n<li>Has anyone else experienced problems with MVC 3 deserialization of arrays of dictionaries?  </li>\n<li>Does MVC 3 by default not use System.Web.Script.Serialization.JavaScriptSerializer which is I think what ASP.NET WebMethods use under the bonnet?</li>\n<li>Can I force MVC 3 to use System.Web.Script.Serialization.JavaScriptSerializer instead of what it is using?</li>\n<li>Or am I missing something / should my approach be slightly different?  Please note that at least for now we'll need to share the client side code between classic ASP.NET WebMethods and MVC 3 and so we want that to remain as is if possible.</li>\n<li>Finally, I can see there is a possible workaround that could be used looking at this question: <a href=\"http://stackoverflow.com/questions/4710729/post-json-dictionary-asp-net-mvc\">POST json dictionary asp.net mvc</a> .  Is this workaround the only game in town or have things improved since this question was posed?</li>\n</ul>\n\n<p>jQuery AJAX call:</p>\n\n<pre><code>$.ajax(_oJQGProperties.sURL, //URL of WebService/PageMethod used\n{\n  data: JSON.stringify(oPostData),\n  type: \"POST\",\n  contentType: \"application/json\",\n  complete: DataCallback\n});\n</code></pre>\n\n<p>Example JSON.stringify(oPostData):</p>\n\n<pre><code>{\n\"dSearchOptions\":{},\n\"aOriginalColumnDefinition\":\n[\n{\"name\":\"ID\",\"sortable\":false,\"hidedlg\":true,\"align\":\"right\",\"title\":false,\"width\":40},\n{\"name\":\"URL\",\"sortable\":false,\"hidedlg\":true,\"align\":\"left\",\"title\":false,\"width\":250,\"link\":\"javascript:DoSummat(this,'{0}');\",\"textfield\":\"Name\"},\n{\"name\":\"Description\",\"sortable\":false,\"hidedlg\":true,\"align\":\"left\",\"title\":false,\"width\":620}\n],\n\"aExtraDataColumns\":[\"Name\"],\n\"_search\":false,\n\"iPageSize\":-1,\n\"iPage\":1,\n\"sSortField\":\"\",\n\"sSortOrder\":\"\",\n\"iMaxRecords\":0\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","reportviewer"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13015221,"title":"ASP.NET Razor ( MVC 3 ) ReportViewer does not renders data","body":"<p>So I have MVC 3 Project. I want create a report system. I have created .rdlc file and configured.</p>\n\n<p><strong>ReportController Controller:</strong></p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\n\n\nnamespace Accounting.Controllers\n{\n    public class ReportController : Controller\n    {\n        //\n        // GET: /Report/\n\n        public ActionResult Index()\n        {\n            return View();\n        }\n\n    }\n}\n</code></pre>\n\n<p><strong>Index.apsx ( View )</strong></p>\n\n<pre><code>&lt;%@ Page Language=\"C#\" Inherits=\"System.Web.Mvc.ViewPage&lt;dynamic&gt;\" %&gt;\n\n\n&lt;%@ Register assembly=\"Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" namespace=\"Microsoft.Reporting.WebForms\" tagprefix=\"rsweb\" %&gt;\n\n\n&lt;!DOCTYPE html&gt;\n\n&lt;html&gt;\n&lt;head id=\"Head1\" runat=\"server\"&gt;\n    &lt;title&gt;Report&lt;/title&gt;\n    &lt;style type=\"text/css\"&gt;\n        #form1\n        {\n            height: 454px;\n            width: 798px;\n        }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;form id=\"form1\" runat=\"server\"&gt;\n        &lt;div&gt;\n\n            &lt;rsweb:ReportViewer ID=\"ReportViewer1\" runat=\"server\" Font-Names=\"Verdana\" \n                Font-Size=\"8pt\" InteractiveDeviceInfos=\"(Collection)\" \n                WaitMessageFont-Names=\"Verdana\" WaitMessageFont-Size=\"14pt\" Width=\"794px\"&gt;\n                &lt;LocalReport ReportPath=\"Views\\Report\\Report1.rdlc\"&gt;\n                    &lt;DataSources&gt;\n                        &lt;rsweb:ReportDataSource DataSourceId=\"EntityDataSource1\" Name=\"DataSet1\" /&gt;\n                    &lt;/DataSources&gt;\n                &lt;/LocalReport&gt;\n            &lt;/rsweb:ReportViewer&gt;\n\n\n            &lt;asp:EntityDataSource ID=\"EntityDataSource1\" runat=\"server\" \n                ConnectionString=\"name=Mofacademy_fas_1Entities\" \n                DefaultContainerName=\"Mofacademy_fas_1Entities\" EnableFlattening=\"False\" \n                EntitySetName=\"MofQuestionnaireUsers\" \n                Select=\"it.[ID], it.[UserType], it.[OrganizationName], it.[Experience], it.[BirthDate], it.[Gender], it.[Education], it.[CreateDate]\"&gt;\n            &lt;/asp:EntityDataSource&gt;\n\n\n            &lt;asp:ScriptManager ID=\"ScriptManager1\" runat=\"server\"&gt;\n            &lt;/asp:ScriptManager&gt;\n\n        &lt;/div&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>But, when i build project in browser, only renders header of report but data does not. I can't understood what mistake is there.</p>\n"},{"tags":["asp.net-mvc-3","asp.net-mvc-4","webgrid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13014627,"title":"Select an item in a dropdown list which ic in WebGrid","body":"<p>I need to have a dropdown list in my web grid. And fron the list an item should be selected based on the model property.</p>\n\n<p>I have followed this link <a href=\"http://stackoverflow.com/questions/9378208/problems-with-mvc-3-dropdownlist-in-webgrid\">DropDownList in Webgrid</a> to populate list.</p>\n\n<p>But I am not sure how to specify thespecify the selected item.</p>\n\n<p>Can somebody help me on this.</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-mvc-3","cqrs"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":124,"score":1,"question_id":12851479,"title":"CQRS practical example?","body":"<p>I came across a new term named CQRS(Command Query Responsibility Segregation) which states that the conceptual model should be split into command model and query model as a typical CRUD model in which the command and query happens in the same model.</p>\n\n<p>I am reading this article: <a href=\"http://martinfowler.com/bliki/CQRS.html\" rel=\"nofollow\">http://martinfowler.com/bliki/CQRS.html</a></p>\n\n<p>and it has all theory information. But I don't understand how will I be implementing this in my project. My project is in asp.net MVC3, EF 4.3, Jquery.</p>\n\n<p>Can anybody suggest me how to practically implement it in my project?</p>\n"},{"tags":["database","asp.net-mvc-3","file-upload"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13013884,"title":"How do I use the FileUpload Class in an MVC web app","body":"<p>I am using <a href=\"http://stackoverflow.com/questions/10447015/uploading-an-excel-sheet-and-importing-the-data-into-sql-server-database\">this post</a> as a reference for what I want to do. I am trying to add a button on my web app that allows the user to click a button upload an excel document straight to a database. In the example I am referencing they use the FileUpload class but It appears I do not know how to use this in a web app. </p>\n\n<p>I attempted putting it in a service file:</p>\n\n<pre><code> FileUpload fileUpload1 = new FileUpload();\n</code></pre>\n\n<p>but I cannot reference the fileUpload1 variable in that context. My best guess at this point is that this is a web app and I am trying to use a windows form class. I get a reference to System.Web.UI.WebControls; when I use it though.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["asp.net-mvc-3","mvcmailer"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12947240,"title":"How can I remove MvcMailer, T4Scaffolding, and other dependancies and restore my program?","body":"<p>I tried to install MvcMailer and as soon as I added the package my project it died.  I started getting all kinds of error messages concerning dependency conflicts with different versions of  T4Scaffolding..versions 1.0.7 and 1.0.8.  So I uninstalled the MvcMailer.  </p>\n\n<p>When I run the program I still get the same message:  A different version of T4Scaffolding is already running in this instance of Visual Studio\nPlease restart Visual Studio to avoid unexpected behavior.\nYou won't be able to use scaffolding until you restart Visual Studio.</p>\n\n<p>And my models have error message like:</p>\n\n<p>The type or namespace name 'ColumnAttribute' could not be found (are you missing a using directive or an assembly reference?)</p>\n\n<p>Or </p>\n\n<p>The type or namespace name DatabaseGenerated could not be found (are you missing a using directive or an assembly reference?)</p>\n\n<p>I am using EntityFramework 4.50501 SP1Re    l.  </p>\n\n<p>MvcMailer seems like a great idea but since I installed it I can't run my program anymore.  Is there anyway that I can simply get back to having my program revert back to the settings before I installed MvcMailer?</p>\n"},{"tags":["jquery","html","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13013103,"title":"jquery is undefined from the 2nd row of a table, but works in the first row","body":"<p>I am displaying data in a table and in the table i have a link. If user clicks that link, my target is to open a jquery dialog which will contain a form to submit.</p>\n\n<p>The problem is, from the 2nd row to downwards if I click on the link, it says 'jquery is undefined', it does not find the jquery.\nBUT, on the first row, if I click the link, It works fine.</p>\n\n<p>code:</p>\n\n<pre><code>&lt;script&gt;\nvar linkObj;\n$(function () {\n\n    $('#ratingpopup').dialog({\n        autoOpen: false,\n        width: 450,\n        resizable: false,\n        modal: true,\n        buttons: {\n            \"Send\": function () {\n                $(\"#edit-message\").html(''); //make sure there is nothing on the message before we continue                         \n\n                $(\"#updateRatingForm\").submit();\n            },\n            \"Cancel\": function () {\n                $(this).dialog(\"close\");\n            }\n        },\n        title:\"Rating/Comment\"\n    });\n    $(\"#rating\").click(function () {\n        linkObj = $(this);\n        var dialogDiv = $('#ratingpopup');\n        var viewUrl = linkObj.attr('href');\n        $.get(viewUrl, function (data) {\n            dialogDiv.html(data);\n\n            var $form = $(\"#updateRatingForm\");\n\n            $form.unbind();\n\n            dialogDiv.dialog('open');\n        });\n        return false;\n    });\n\n});\n&lt;/script&gt;\n\n&lt;div class=\"dataTable\"&gt;\n&lt;table&gt;\n\n    &lt;tr&gt;\n        &lt;td&gt;Ordernr.&lt;/td&gt;\n        &lt;td&gt;Dato&lt;/td&gt;\n        &lt;td&gt;Restaurant&lt;/td&gt;\n        &lt;td&gt;Address&lt;/td&gt;\n        &lt;td&gt;Delivery?&lt;/td&gt;\n        &lt;td&gt;Accepted?&lt;/td&gt;\n        &lt;td colspan=\"3\"&gt;Action&lt;/td&gt;\n    &lt;/tr&gt;\n\n    &lt;%foreach (var i in Model)\n  { %&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;%:i.OrderNo %&gt;&lt;/td&gt;\n        &lt;td&gt;\n        &lt;%\n        DateTime today = DateTime.Now;\n        DateTime orderDate = Convert.ToDateTime(i.OrderDate);\n        if (today.Date == orderDate.Date)\n        {%&gt;\n        &lt;b&gt; i dag&lt;/b&gt;\n        &lt;%}\n        else\n        { %&gt;\n        &lt;%:i.OrderDate%&gt;\n        &lt;%} %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%:i.RestaurantInfo.Name %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%:i.RestaurantInfo.Address %&gt;, &lt;%:i.RestaurantInfo.Postcode %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%:i.IsForDelivery %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%:i.IsAccepted %&gt;&lt;/td&gt;\n\n        &lt;td&gt;&lt;a href='&lt;%:Url.Action(\"Add\", \"Rating\", new { name = i.RestaurantInfo.Name     }) %&gt;' id=\"rating\"&gt;Rating&lt;/a&gt;&lt;/td&gt; // this is the link\n    &lt;/tr&gt;\n  &lt;%} %&gt;\n\n&lt;/table&gt;\n\n&lt;/div&gt;\n&lt;div id=\"ratingpopup\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>This is kind of weird to me...Anyone knows about this behavior??</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","mini-profiler"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":211,"score":2,"question_id":6798028,"title":"MVC Mini Profiler Exception on MiniProfiler.Stop()","body":"<p>I'm just added Mini Profiler to my MVC3 project with nuget and I've followed the basic steps to get it set up. Starting the profile on Application_BeginRequest() and stopping it on Application_EndRequest()</p>\n\n<pre><code>    protected void Application_BeginRequest()\n    {\n        if (Request.IsLocal)\n        {\n            MiniProfiler.Start();\n        }\n\n    }\n\n    protected void Application_EndRequest()\n    {\n        MiniProfiler.Stop();\n    }\n</code></pre>\n\n<p>MiniProfiler.Stop() is throwing an exception - <strong>\"Server cannot append header after HTTP headers have been sent.\"</strong></p>\n\n<p>Has anybody else seen this? </p>\n"}]}
{"total":29155,"page":10,"pagesize":100,"questions":[{"tags":["asp.net-mvc-3","openid","openauth"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13009660,"title":"OpenId and OpenAuth with mvc application","body":"<p>I need to login with facebookx, twitter, gmail, openid, yahoo and other site in MVC3. \nI already search for Openauth and openID but could not get the proper solution. come solution run and went to the site but never come back with identty. </p>\n\n<p>So can i get the proper solution in running mode with MVC3. Also please provide me the dll and also nuget template or packages details.</p>\n\n<p>Can i test with localhost for openauth/openid?</p>\n"},{"tags":["asp.net-mvc-3","views","virtualpathprovider","griffin.mvccontrib"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":102,"score":0,"question_id":12167045,"title":"Loading non embedded views from other projects","body":"<p>I'm working on a mvc3 project which should support modules. So for example I have a MVC3 core project and a MVC3 module project (MyModule).</p>\n\n<p>Now I wish to load and display the views from the MVC3 module project in the core project.\nI wrote a custom VirtualPathProvider class and a VirtualFile class which fetches the views from other locations than the core project.</p>\n\n<p>Somehow I get the following error: <code>CS0103: The name 'ViewBag' does not exist in the current context.</code></p>\n\n<p>What I'm doing is loading the assembly from the module project in my core project using the following line of code in the AssemblyInfo class in the core project:</p>\n\n<pre><code>[assembly: PreApplicationStartMethod(typeof(ModuleLoader), \"Init\")]\n</code></pre>\n\n<p>The ModuleLoader class fetches the DLL and uses <code>BuildManager.AddReferencedAssembly</code> to add the assembly.</p>\n\n<p>Now I can call action methods in MyModuleController.cs by navigating to <code>http://localhost/MyModule</code>. In the Index ActionResult method of MyModuleController.cs I return the View like this:</p>\n\n<pre><code>return View(\"~/Modules/MyModule/Index.cshtml\");\n</code></pre>\n\n<p>The VirtualPathProvider checks if the path starts with ~/Modules/ and fetches the view (MyModule -> Views -> Index.cshtml) from the module project.</p>\n\n<p>Now I've searched for the error and I read about missing Web.config files, but I have everything in the module project, because it's a complete MVC3 web project.</p>\n\n<p>I read a lot about loading <strong>embedded</strong> views from assemblies, but is what I described above even possible?</p>\n\n<p>Thanks in advance!</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Decided to go the Griffin-MvcContrib way and use its plugin system, which seems to provide everything I need and on top of that it uses Autofac, which I already decided to use for IOC!</p>\n\n<p><a href=\"http://blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/\" rel=\"nofollow\">Griffin.MvcContrib - The plugin system</a> </p>\n"},{"tags":["asp.net-mvc-3","jquery-ajax","post","file-upload"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13010939,"title":"Upload Image before submit form in mvc3 asp.net","body":"<p>i am using asp.net MVC3</p>\n\n<p>I want to upload the image before form is submit.</p>\n\n<p>below is my code</p>\n\n<pre><code> &lt;div&gt;\n   @using (Html.BeginForm(\"SaveData\", \"Home\", FormMethod.Post, new { @enctype =      \"multipart/form-data\" }))\n   {\n     &lt;div&gt; Image: \n           &lt;input type=\"file\" name=\"uploadFile\" onchange=\"upload(this);\" /&gt;&lt;/div&gt;\n     &lt;div&gt; Name: \n           @Html.TextBoxFor(model =&gt; model.Name)&lt;/div&gt;\n     &lt;div&gt; Address:  \n           @Html.TextBoxFor(model =&gt; model.Address)&lt;/div&gt;\n     &lt;div&gt; Phone: \n           @Html.TextBoxFor(model =&gt; model.Phone)&lt;/div&gt;\n\n     &lt;input type=\"submit\" name=\"save\" id=\"savedata\" title=\"save\" \n        value=\"save\"  /&gt;\n}         \n&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n   function UploadFile(image) {\n        //call controller action UploadFile\n         $.ajax({\n            type: \"Post\",\n            url: \"Home/UploadFile\",\n            data: image,       //This is wrong\n            contentType: \"application/json; charset=utf-8\",\n            dataType: \"json\"\n        });\n   }\n&lt;/script&gt;\n</code></pre>\n\n<p>Now on Controller side</p>\n\n<pre><code> public ActionResult UploadFile(HttpPostedFileBase uploadFile)\n {\n     //save image\n }\n</code></pre>\n\n<p>can any one can suggest how can i upload the image before posting my form to save data.</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":53,"score":0,"question_id":13011590,"title":"link in string of asp.net MVC 3 Razor view","body":"<p>I am working in asp.net MVC 3 application with Razor view.</p>\n\n<p>I have string where I need to add a link in it like this:</p>\n\n<pre><code>var closingMsg = \"Thank you for submitting your dispute. If you wish, you may &lt;a href='&lt;%= Url.Action('Index', 'Product') %&gt;purchase our SMS alert service&lt;/a&gt; for immediate notification of any creditor response or request.\"; \n</code></pre>\n\n<p>But it is giving error.</p>\n\n<p>Please suggest how to do it using href or HTML.actionLink. I need to apply styles to link as well.</p>\n"},{"tags":["asp.net-mvc-3","razor","telerik","telerik-grid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13002997,"title":"Custom Cliente Template Telerik Grid","body":"<p>Hi all im kind of new using Telerik Grid, basically what im trying to accomplish here is the following scenario, i have a form that have some fields and via ajax calls another action on my controller to generate the model to a partial view that have the following grid, my problem is that i need to create some actions depending on some business logic, i know i can do that using a column template, the thing is that since im using ajax binding it \"loose\" my template, looking around on internet i found that u can do that using a js function go generate the links, my question is isnt that kind of messy ?? im duplicating the same business logic on the server and on the client, there's must be a better way to accomplish this ??          </p>\n\n<pre><code>      Html.Telerik().Grid(Model)\n          .Name(\"Grid\")\n          .DataBinding(binding =&gt; binding.Ajax().OperationMode(GridOperationMode.Client))\n          .Columns(column =&gt;\n          {\n              column.Bound(c =&gt; c.Id).Title(\"Id\").Width(30);\n              column.Bound(c =&gt; c.Status);\n              column.Bound(c =&gt; c.DateReg);\n              column.Template(\n                  @&lt;text&gt;\n                       &lt;div class=\"ActionsProvGrid\"&gt;\n                           &lt;a href=\"@Url.Action(\"SomeAction\", \"Controller\", new {id = item.id})\"&gt;\n                               &lt;img src=\"../../Content/icons/ViewMore.png\" alt=\"ViewMore\" /&gt;\n                           &lt;/a&gt;\n                           @if (@item.Status.Equals(\"ACT\"))\n                           {\n                               &lt;a href=\"@Url.Action(\"SomeOtherAction\", \"Controller\", new {idOportunidad = item.id})\"&gt;\n                                   &lt;img src=\"../../Content/icons/invoice.png\" alt=\"invoice\"/&gt;\n                               &lt;/a&gt;\n                           }\n\n                       &lt;/div&gt;                                                      \n                   &lt;/text&gt;\n                  ).ClientTemplate(\"&lt;#= GenearteIcons(data)  #&gt;\");\n          })\n        .Sortable()\n</code></pre>\n"},{"tags":["c#",".net","asp.net-mvc-3","signalr"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":422,"score":1,"question_id":10426163,"title":"When SignalR made 8-10 connections at a time live chat doesn't work","body":"<p>I am developing live chat using SignalR. It is great library. But i coped with one problem that I cant resolve for some time. So problem in when signalR made 8-10 connections at a time live chat doesn't work any more. Maybe it is b/c i run everything on local machine?</p>\n\n<p>I thought maybe I made mistake somewhere. So I found simplest chat. You can download it <a href=\"http://geekswithblogs.net/jeroenb/archive/2011/12/14/signalr-starter-application.aspx\" rel=\"nofollow\">here</a>.\n I opened it in 10 windows and it dont work anymore. Is that performance issue of signalR or programmers mistake? How can i make it work faster? </p>\n\n<p>Also I found <a href=\"https://github.com/davidfowl/JabbR\" rel=\"nofollow\">JabbR chat</a> . And it has <a href=\"http://jabbr.net/\" rel=\"nofollow\">live demo</a>  and it works for a lot of people. They dont make anything special and it work greatly. </p>\n\n<p>Can someone help with this issue?</p>\n\n<p>Great thanks for any help,\nDima.</p>\n"},{"tags":["asp.net",".net","asp.net-mvc-3","entity-framework","entity"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12963820,"title":"ASP.NET retrieving data from nowhere","body":"<p>I am going through <a href=\"http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3\" rel=\"nofollow\">ASP.NET MVC 3 tutorial</a>. Got to the point where <a href=\"http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/adding-a-model\" rel=\"nofollow\">EnityFramework was used for model classes</a>. I ran the the application without having connection strings in the web.config specified and it worked.</p>\n\n<p>I could add, edit, delete records. And the weirdest thing is that they are sill there even after I stop development server and start debugging application again as if table was created somewhere in memory and stayed alive for some reason. Can anybody explain what was going on?</p>\n\n<p>Here's a link to an image:\noi48.tinypic.com/fnbeba.jpg</p>\n\n<p>Was it supposed to use the the connection string for which name matches the name of the class derived from DbContext?</p>\n\n<p>EDIT1:<br>\nBecause I had no connection string in web.config it was generated by Enity Framework using namespace and the name of the class derived from DBContext. By default EF uses SQL Express, hence database file was created in database server's DATA direcotry C:\\Program Files\\Microsoft SQL Server\\MSSQL10_50.SQLEXPRESS\\MSSQL\\DATA.</p>\n\n<p>The last thing I don't understand why it wouldn't create the database file in App_Data dir if DBContext derived class is</p>\n\n<pre><code>public class MoviesDBContex : DbContext\n{\n    public DbSet&lt;Movie&gt; Movies { get; set; }\n\n    // Passing name of the connections string shouldn't be even necessary\n    public MoviesDBContex()\n        : base(\"MoviesDBContex\")\n    { }\n}\n</code></pre>\n\n<p>and web.config contains</p>\n\n<pre><code>  &lt;connectionStrings&gt;\n    &lt;add name=\"MoviesDBContext\"\n      connectionString=\"Data Source=|DataDirectory|Movies.sdf\"\n      providerName=\"System.Data.SqlClient\"/&gt;\n  &lt;/connectionStrings&gt;\n</code></pre>\n\n<p>Thist what the Microsoft guide about ER connections and models (msdn.microsoft.com/en-us/data/jj592674.aspx) says:</p>\n\n<blockquote>\n  <p>If the name of the connection string matches the name of your context (either with or without namespace qualification) then it will be found by DbContext when the parameterless constructor is used. If the connection string name is different from the name of your context then you can tell DbContext to use this connection in Code First mode by passing the connection string name to the DbContext constructor.</p>\n</blockquote>\n\n<p>Any idea why database file isn't created in App_Data?</p>\n\n<p>EDIT2:<br>\nThere was a missing 't' in the class name and hence it didn't match the name of the connection string.</p>\n\n<p>I does work as expected when provider is SQL Server Compact providerName=\"System.Data.SqlServerCe.4.0\", but if I change it to providerName=\"System.Data.SqlClient\" I get an exception added below. Shouldn't regular SQL Server be able to create a database file also?</p>\n\n<blockquote>\n  <p>A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)</p>\n  \n  <p>Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. </p>\n</blockquote>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13008904,"title":"Can I create an ASP MVC route that only accepts uppercase in the URL?","body":"<p>I have the following route:</p>\n\n<pre><code>context.MapRoute(\n    \"content\",\n    \"{page}/{title}\",\n    new { controller = \"Server\", action = \"Index\" },\n    new { page = @\"^[AFL][0-9A-Z]{4}$\" }\n);\n</code></pre>\n\n<p>This route is used for pages such as:</p>\n\n<pre><code>/A1234\n/F6789\n/L0123\n</code></pre>\n\n<p>However it also catches: <code>/Admin</code> which is something I do not want.</p>\n\n<p>I put a temporary solution in place that looks like this:</p>\n\n<pre><code>context.MapRoute(\n    \"content\",\n    \"{page}/{title}\",\n    new { controller = \"Server\", action = \"Index\" },\n    new { page = @\"^[AFL][0-9][0-9A-Z]{3}$\" }\n);\n</code></pre>\n\n<p>This only works because right now all my pages have a 0 in the second digit. </p>\n\n<p>Is there a way I could configure my route to accept A,F or L followed by 4 upper case characters but have it not catch \"dmin\" ?</p>\n\n<p>Not sure if this is the case but I am thinking the regular expression should not accept \"dmin\" as it's in lower case and I only specify A-Z. However when used as an MVC route it does take \"dmin\". Does anyone know if ASP MVC internally converts this to all uppercase?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13005037,"title":"How to render only the div from controller action in mvc.","body":"<pre><code>I have used PartialView but it renders the whole view after success full ajax post\nThis is my view\n my ul which i want to update\n&lt;ul id=\"ULdinnerlist\"&gt;\n    @* my foreach loop*@\n    @foreach (var item in Model)\n    {\n\n        &lt;li&gt;  Title : @Html.DisplayFor(modelItem =&gt; item.Title)&lt;br /&gt;\n              EventDate : @Html.Encode(item.EventDate.ToShortDateString()+ \" @ \" + item.EventDate.ToShortTimeString()) \n              &lt;p&gt;Description : @Html.DisplayFor(modelItem =&gt; item.Description)&lt;/p&gt;&lt;br /&gt;\n               HostedBy : &lt;b&gt;@Html.DisplayFor(modelItem =&gt; item.HostedBy)&lt;/b&gt; (@item.ContactPhone)&lt;br /&gt;\n        &lt;/li&gt;\n    }\n\n\n&lt;/ul&gt;\n</code></pre>\n\n<p>my ajax route link\n    @Ajax.RouteLink(\">>>\",new { page = Model.PageIndex + 1 },new AjaxOptions { UpdateTargetId = \"ULdinnerlist\" })</p>\n\n<pre><code>ON controller: my action for reindering \n\npublic ActionResult Index(int? Page)\n        {\n            int PageSize = 5;\n            IQueryable&lt;Dinner&gt; dines = from dine in db.Dinners orderby dine.EventDate select dine;\n            var paginatedDinners = new PagingList&lt;Dinner&gt;(dines, Page ?? 0, PageSize);\n\n            checking ajax post and rendering accordingly    \n            if (Request.IsAjaxRequest())\n            {\n                return PartialView(paginatedDinners);\n            }\n            return View(paginatedDinners);\n        }\n</code></pre>\n\n<p>Problem is it renders the whole view when i do the paging.\nThanks</p>\n"},{"tags":["asp.net-mvc-3","jquery-ajax","asp.net-ajax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12910032,"title":"How To post Form data to Cross Domain Without Page Refresh","body":"<p>I have tried lot regarding Post form data to Cross domain using Ajax post method. but i received success response. but the Form data is not posted to the requested cross domain instead of shows 404 network error in browser.</p>\n\n<p>can anyone suggest How to Post the Form Data to Cross domain in ASP.NET MVC application?</p>\n"},{"tags":["c#","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1195,"score":1,"question_id":6866654,"title":"MVC 3 image button","body":"<p>Is there any way to make an @Html.actionLink an image to click instead of just a hyper link? Currently we have an old  that has an onclick attribute linking to a code behind so it needs to be converted to a link that links to the controller, not code behinds which don't exist any more in MVC3.</p>\n"},{"tags":["asp.net-mvc-3","iis"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12988064,"title":"MVC3 web site on IIS 6","body":"<p>When I try to deploy an ASP .NET MVC 4 web app on IIS 6, I get the error saying </p>\n\n<p><strong>Access to the web.config is denied.</strong></p>\n\n<p>Identity of the app pool of the web site : <strong>Network Service</strong></p>\n\n<p>The folder C:\\inetpub\\wwwroot\\ <em>appname</em>  has <strong>full Control</strong> access by Network service. But I am confused whether this permission gets applied recursively. </p>\n\n<p>How can I get the site working ?  </p>\n\n<p><strong>Screenshot of the error</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/Rrx9o.jpg\" alt=\"enter image description here\"></p>\n"},{"tags":["javascript","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12974085,"title":"How to pass variable value to JScript in MVC view?","body":"<p>I am developing MVC application in which I want to pass the Variable to the JScript which is in that view itself.\nHow to do that? </p>\n\n<p>I want to send the value of AccessMode to the Javascript.<br>\nI have declared that Variable but don't know how to use it in JScript.</p>\n\n<pre><code>&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.8.0.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n@model CRMEntities.Settings\n\n\n\n\n@{\n    ViewBag.Title = \"CustomSettings3\";\n    //Layout = \"~/Views/Shared/_Layout.cshtml\";\n}\n\n&lt;h2&gt;CustomSettings3&lt;/h2&gt;\n&lt;!DOCTYPE html&gt;\n\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;CustomSettings3&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n       @{string AccessMode; }\n     @{string Ratings; }\n\n\n       &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.AccessMode)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n           @* @Html.EditorFor(model =&gt; model.AccessMode)*@\n            @Html.DropDownList(\"AccessMode\")\n            @Html.ValidationMessageFor(model =&gt; model.AccessMode)\n             //Assigning value.\n            AccessMode = model.AccessMode\n        &lt;/div&gt;\n\n         &lt;div class=\"editor-field\"&gt;\n\n         @Html.DropDownList(\"RatingsCount\")\n        @Html.ValidationMessageFor(model =&gt; model.RatingsCount)\n         @{\n             Ratings = Html.DropDownList(\"RatingsCount\");\n        }\n    &lt;/div&gt;\n\n\n        &lt;p&gt;\n            &lt;input type=\"button\" value=\"Save\" class=\"SaveSettings\"/&gt;       \n\n        &lt;/p&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n\n\n\n\n  &lt;script type=\"text/javascript\"&gt;\n\n$(document).ready( function(){\n\n    $('.SaveSettings').click(function ()\n    {\n\n\n           $.ajax\n            ({\n\n            type: 'post',\n            url: '@Url.Content(\"~/Settings/SaveBasicSettings\")',\n            dataType: 'json',\n            data:\n            { 'AccessMode': \"@AccessMode\" },\n            success: function (data) \n            {\n\n\n            }\n\n            });\n\n\n       });\n\n  });\n\n&lt;/script&gt;\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/RwSEe.jpg\" alt=\"enter image description here\"></p>\n"},{"tags":["c#","asp.net-mvc-3","enums"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13006935,"title":"Get Enums for dropdownlist in asp.net mvc3","body":"<p>This is my enum</p>\n\n<pre><code>public class Woodshape\n    {\n        public enum eWoodShape\n        {\n            Round = 10, \n            Oval = 20, \n            Plain = 30\n        }\n    }\n</code></pre>\n\n<p>Now i want to add this as a dropdownlist in my controller</p>\n\n<pre><code>public ActionResult Create()\n        {\n            List&lt;string&gt; li = new List&lt;string&gt;();\n            FieldInfo[] myEnumFields = typeof(Woodshape.eWoodShape).GetFields();\n            foreach (FieldInfo myField in myEnumFields)\n            {\n                if (!myField.IsSpecialName &amp;&amp; myField.Name.ToLower() != \"notset\")\n                {\n                    int myValue = (int)myField.GetValue(0);\n                    li.Add(myField.Name);\n                }\n            }\n            ViewBag.ddlEnumshape = new SelectList(myEnumFields, \"myValue\", \"Name\");\n\n            return View();\n        } \n</code></pre>\n\n<p>and In my view binded it as..</p>\n\n<pre><code>&lt;div&gt;\n@Html.DropDownList(\"ddlEnumshape\", \"-Select shape-\")\n/&lt;div&gt;\n</code></pre>\n\n<p>but, it is showing error</p>\n\n<pre><code>System.Reflection.RtFieldInfo' does not contain a property with the name 'myValue'.\n</code></pre>\n\n<p>Could anyone help me</p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":13006630,"title":"ajax request is caching on kiosk browser","body":"<p>I have a mvc 3 razor project that on pc is working very good there are one problem on Ipad I have a list of artikel and a added button for test then i press added button it is return the date time now then i press the added buttom it is return a date time, then I press the second time it is return the same date time, my project on Ipad is taked value from cache I think, can every one help me???\nThis jquery code:</p>\n\n<pre><code>$(document).ready(function (){        \n    $(\".AddButton\").live(\"click\", function(){                \n        var buttonId = $(this).attr(\"id\");                \n        var id = buttonId.substr(buttonId.indexOf(\"_\"));\n        $.ajax({                \n            type:'POST',\n            dataType:'json',                \n            url: \"@Url.Action(\"AddCommandArtikelJson\",\"Home\")\",\n            data: {id:$(\"#Id\"+id).val(), id_priceOnPad: $(this).attr(\"name\")},\n            cache: false,\n            success: function(result){            \n                $(\"#commandsCount\").text(result);\n            }\n        });\n\n    });\n});\n</code></pre>\n\n<p>and this controller function:</p>\n\n<pre><code> [HttpPost]\n    public JsonResult AddCommandArtikelJson(int id, int id_priceOnPad)\n    {//my code\n         return Json(DateTime.Now);\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","mvcsitemapprovider"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12998336,"title":"MVCSitemapProvider current node not detected","body":"<p>I am using MvcSiteMapProvider 3.3.3.0 and have a file <code>MvcSiteMap.sitemap</code> which contains two nodes defined as follows:</p>\n\n<pre><code>&lt;mvcSiteMapNode title=\"Node1\" controller=\"MyController\" action=\"MyAction\" type=\"A\" /&gt;\n&lt;mvcSiteMapNode title=\"Node2\" controller=\"MyController\" action=\"MyAction\" type=\"B\" /&gt;\n</code></pre>\n\n<p>My routes in global.asax.cs are configured \"out of the box\", so the URLs are:</p>\n\n<pre><code>Node 1: http://server/MyController/MyAction?type=A\nNode 2: http://server/MyController/MyAction?type=B\n</code></pre>\n\n<p>Now if I navigate to Node 2, I find that <code>MenuHelper.GetCurrentNode()</code> returns Node 1.</p>\n\n<p>Why is this and is there a way to get MvcSiteMapProvider to recognize a current node based on the querystring parameter?</p>\n"},{"tags":["c#","jquery","asp.net-mvc-3","twitter-bootstrap"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":512,"score":3,"question_id":8093633,"title":"What's the best way to call a modal dialog in ASP.NET MVC using Twitter Bootstrap?","body":"<p>I'm currently using <a href=\"http://twitter.github.com/bootstrap/#popovers\" rel=\"nofollow\">Twitter's Bootstrap toolkit</a> on a new project and I had a question on the best way to use the modal dialog in ASP.NET MVC3.</p>\n\n<p>Is the best practice to have a Partial that contains the modal's markup and then use javascript to render that onto the page or is there a better approach?</p>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":1,"question_id":12997613,"title":"Would an existing non mobile MVC3 project benefit from upgrading to MVC4?","body":"<p>I've two projects both are <em>Asp.net MVC <strong>3</em></strong> both don't target mobile users.<br>\nOne was released already, and the other is in the middle of  the development phase.  </p>\n\n<p>I thought of upgrading those two projects to <em>Asp.net MVC <strong>4</em></strong>, so I read the <a href=\"http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253807\" rel=\"nofollow\">New Features in ASP.NET MVC 4</a> section in the release notes of <em>Asp.net MVC 4</em>, it seems like there're no features that an existing Asp.net-MVC3 project cab benefit from.  </p>\n\n<p>All the features are related to mobile users and enhanced templates. What about speed? cache? bug fixes?</p>\n\n<p>So should I upgrade my projects?</p>\n"},{"tags":["asp.net",".net","asp.net-mvc-3","fluentvalidation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13005939,"title":"Fluent Validation for .NET show one message per time","body":"<p><br>Hello,everyone.<br></p>\n\n<p>I am using FluentValidation in my server side validation. <br/></p>\n\n<pre><code>RuleFor(data =&gt; data.ConfirmPassword).Equal(data =&gt; data.Password).WithLocalizedName(() =&gt; ValidatorString.TwoFieldsAreNotMatched);\n</code></pre>\n\n<p>Above is my code.\nIn my case, I want to show a Localized error message \"Two Fields Are Not Matched\".<br/>\nBut actually,It occurs \" Two Fields Are Not Matched. and  'Password' not matched.   \"<br/>\nIs there any way just show Localized error message?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","crud"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13002800,"title":"bools for tables + search","body":"<p>Attempting to database driven website for video rentals</p>\n\n<p>So I have two tables in my database (movie, and rental), \nI have a column set in each table 'OnHire' which has the data value of 'bit'\nwith NULL values selected.</p>\n\n<p>So I have all the CRUD features working but...</p>\n\n<p>When the user creates a new rental record in the rental table and turns 'OnHire' to true\nI am trying to use a bool which will then turn the 'OnHire' in movies to true.</p>\n\n<p>Allowing the user to know by looking at the movies table whether it is on hire or not\nit is telling me i cant convert a type bool? to bool, a conversion exists(are you missing a cat)?</p>\n\n<pre><code>HttpPost]\n    public ActionResult Create(Rental rentals)\n    {\n        try\n        {\n            // TODO: Add insert logic here\n            _entities.AddToRentals(rentals);\n            _entities.SaveChanges();\n\n            Movie mov = new Movie();\n\n            if (rentals.OnHire)\n            {\n                mov.OnHire = true;\n            }\n            else\n            {\n                mov.OnHire = false;\n            }\n\n            return RedirectToAction(\"Index\");\n        }\n        catch\n        {\n            return View();\n        }\n    }\n</code></pre>\n\n<p>Then I am probably pushing my luck here but if that is successfull I was going to do the opposite and throw an error message if the user tries to hire out a video already on hire</p>\n\n<pre><code>            if (mov.OnHire)\n            {\n                //error message\n            }\n</code></pre>\n\n<p>Any suggestions?</p>\n\n<p>Also on completion of the CRUD for database I was looking to implement a search feature?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":53,"score":-2,"question_id":12979268,"title":"multiple conditions with mvc3","body":"<p>I need to add a third condition to this syntax so that the the S139a field becomes invisible.</p>\n\n<pre><code>&lt;div style=\"float: left; width: 80px; visibility: visible\"&gt;S139a:&lt;/div&gt;\n&lt;div style=\"float: left;\"&gt;@if (Model.xyz == 0)\n{@Html.Raw(\"No\")}\nelse\n{@Html.Raw(\"Yes\")}\n&lt;/div&gt;\n&lt;div style=\"clear: both;\"&gt;&lt;/div&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":13002069,"title":"How to return proper message on 403 forbidden on MVC3?","body":"<p>I know I can fill the <code>ReasonPhrase</code> property of a <code>HttpResponseMessage</code> using Web API Framework. But how can I do the same with the normal \"MVC\" ? </p>\n\n<p>This is my current code:</p>\n\n<pre><code>if (filterContext.Exception != null &amp;&amp; filterContext.Exception is ArgumentException) \n{\n    filterContext.HttpContext.Response.StatusCode = 403;\n    filterContext.HttpContext.Response.StatusDescription = filterContext.Exception.Message;\n    //filterContext.HttpContext.Response.Write(filterContext.Exception.Message);\n    filterContext.ExceptionHandled = true;\n    filterContext.Exception = null;\n}\n</code></pre>\n\n<p>I also know that the commented line would provide the error message to the client but in the Response body. I don't know if this is the best practice.</p>\n\n<p>What I would like to do is the same as this <a href=\"http://www.dotnetspeaks.com/DisplayArticle.aspx?ID=238\" rel=\"nofollow\">link</a>.</p>\n"},{"tags":["sql-server","asp.net-mvc-3","video-streaming"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13002394,"title":"How to stream a video from Database to be shown with Html5 in Asp.Net MVC3?","body":"<p>I'm developing for showing videos and I need to save the video on Sql Server and displaying them with Html5 in my views, is it possible to do so? doea it make any diffrence with downloading files? does it cause much overhead on my server? thanks</p>\n"},{"tags":["c#","asp.net-mvc-3","kendo-ui"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":110,"score":0,"question_id":12955673,"title":"How to change the height of Kendo ui Grid","body":"<p>How do I change the height of the Kendo Grid when using wrappers?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","remote-validation"],"answer_count":5,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":148,"score":0,"question_id":12848464,"title":"MVC Remote validation, parameter is null","body":"<pre><code>public class UserModel\n    {\n        public LogOnModel LogOnModel { get; private set; }\n        public RegisterModel RegisterModel { get; private set; }\n    }\n</code></pre>\n\n<p>in my RegisterModel I have email address like this:</p>\n\n<pre><code>[RegularExpression(@\"^([a-zA-Z0-9_\\-\\.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.)|(([a-zA-Z0-9\\-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$\")]\n        [Required]\n        [Display(Name = \"E-mail\")]\n        [Remote(\"IsEmailAddressAvailable\", \"Validation\", HttpMethod = \"POST\")]\n        public string EmailAddress { get; set; }\n</code></pre>\n\n<p>My validationController:</p>\n\n<pre><code>public class ValidationController : Controller\n    {\n        public JsonResult IsEmailAddressAvailable([string emailAddress)\n        {\n            return Json(false, JsonRequestBehavior.AllowGet);\n\n        }\n}\n</code></pre>\n\n<p>The view @Model is UserProfile, the emailAddress in ValidationController is null.</p>\n\n<p>I tried to change the ValidationController to look like this with no luck:</p>\n\n<pre><code>public class ValidationController : Controller\n    {\n        public JsonResult IsEmailAddressAvailable([Bind(Include = \"EmailAddress\")]RegisterModel register)\n        {\n            return Json(false, JsonRequestBehavior.AllowGet);\n\n        }\n\n\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","image","ef-code-first","structuremap"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12965031,"title":"MVC4 EF 4.1 occassional \"Connection must be opened\" error when showing multiple images in a View","body":"<p>My current app is using .NET MVC3 with EF 4.1 Code First and an Oracle back end. Everything works fine practically all the time except in one scenario, which is where we have a View that displays multiple images. Sometimes all images are loaded fine, other times some of them fail to load and I get one of 2 error messages - \"The connection was not closed\" or \"Connection must be opened\". The image are stored in the db as BLOBs and not on the server's file system.\nI have a view model containing a collection of Documents (which are images) and use an EditorTemplate to render the collection in the View. The rendered code makes a call to a Controller action to retrieve each image in the collection. Here's the Razor code that renders the collection:</p>\n\n<p>Parent View:</p>\n\n<pre><code>&lt;div  id=\"carousel1\" class=\"data-carousel\"&gt;\n    @Html.EditorFor(x =&gt; x.Documents)\n&lt;/div&gt;\n</code></pre>\n\n<p>Editor template:</p>\n\n<pre><code>&lt;div&gt;\n    &lt;img style=\"border: solid; border-color: lightgrey; border-width: thin\" src=\"@Url.Action(\"GetImage\", \"Product\", new {docId = Model.DocumentID, width = 250, height = 250})\" alt=\"\"/&gt;           \n&lt;/div&gt;\n</code></pre>\n\n<p>so this code gets written to the browser</p>\n\n<pre><code>&lt;img style=\"border: solid; border-color: lightgrey; border-width: thin\" src=\"http://localhost:9613/Product/GetImage?docId=1&amp;width=250&amp;height=250\" alt=\"\"/&gt;\n&lt;img style=\"border: solid; border-color: lightgrey; border-width: thin\" src=\"http://localhost:9613/Product/GetImage?docId=2&amp;width=250&amp;height=250\" alt=\"\"/&gt;\n&lt;img style=\"border: solid; border-color: lightgrey; border-width: thin\" src=\"http://localhost:9613/Product/GetImage?docId=3&amp;width=250&amp;height=250\" alt=\"\"/&gt;\n&lt;img style=\"border: solid; border-color: lightgrey; border-width: thin\" src=\"http://localhost:9613/Product/GetImage?docId=4&amp;width=250&amp;height=250\" alt=\"\"/&gt;\n</code></pre>\n\n<p>As you can see this creates a link that passes some params including the id to an action method which returns the image as a byte array:</p>\n\n<pre><code>public void GetImage(int docId, int width, int height)\n{\n    // Load image from database\n    var doc = productRepository.Documents.SingleOrDefault(f =&gt; f.DocumentID == docId);\n    var image = doc.FileContent;\n\n    new WebImage(image)\n   .Resize(width, height, true, true)\n   .Crop(1, 1)\n   .Write();\n}\n</code></pre>\n\n<p>I'm pretty sure what's happening is that the Controller action is being called for each image (potentially up to 10), and the db connection isn't closed before the next request comes in. I tried creating a method on the repository that creates a new instance of the Context in a \"using\" statement to see if this would improve things but it didn't.\nSo is there anything I can do? Should I be looking at the new async maybe, or is there some other pattern I can use to retrieve multiple images in a View?</p>\n\n<p>TIA</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>The application is hosted in IIS7 with it's own application pool in Classic pipeline mode. I use StructureMap as an IoC container so this controls the creation and lifetime of the DbContext. The instantiation happens when the Controller gets instantiated:</p>\n\n<p>SM setup:</p>\n\n<pre><code>public static class StructuremapMvc \n{\n    public static void Start() \n    {\n        var container = (IContainer)IoC.Initialize();\n        DependencyResolver.SetResolver(new SmDependencyResolver(container));\n    }\n}\n\npublic static IContainer Initialize() \n{\n    ObjectFactory.Initialize(x =&gt;\n    {\n        x.Scan(scan =&gt;\n        {\n            scan.TheCallingAssembly();\n            scan.WithDefaultConventions();\n        });\n        x.For&lt;IProductRepository&gt;().Use&lt;ProductRepository&gt;();\n        x.For&lt;IProductContext&gt;().Use&lt;ProductContext&gt;();\n    });\n\n    return ObjectFactory.Container;\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>public class ProductController : Controller\n{\n    private readonly IProductRepository productRepository;\n\n    public ProductController(IProductRepository productRepository)\n    {\n        this.productRepository = productRepository;\n    }\n\n    public void GetImage(int docId, int width, int height)\n    {\n        // Load image from database\n        var doc = productRepository.Documents.SingleOrDefault(f =&gt; f.DocumentID == docId);\n        var image = doc.FileContent;\n\n        new WebImage(image)\n       .Resize(width, height, true, true)\n       .Crop(1, 1)\n       .Write();\n    }\n\n    // etc.\n}\n</code></pre>\n\n<p>Repository:</p>\n\n<pre><code>public class ProductRepository : IProductRepository\n{\n    private readonly IProductContext productContext;\n\n    public ProductRepository(IProductContext productContext)\n    {\n        productContext = productContext;\n    }\n\n    public IQueryable&lt;Document&gt; Documents\n    {\n        get { return productContext.Documents; }\n    }\n\n    // etc.\n}\n</code></pre>\n\n<p>Context:</p>\n\n<pre><code>public class ProductContext : DbContext, IProductContext\n{\n    // DbSets\n    public IDbSet&lt;Document&gt; Documents { get; set; }\n\n    public void SetModified(object entity)\n    {\n        Entry(entity).State = EntityState.Modified;\n    }   \n\n    protected override void OnModelCreating(DbModelBuilder modelBuilder)\n    {\n        // etc.\n    }\n\n    // etc. \n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","active-directory"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12998679,"title":"ASP.NET MVC 3 application with AD environnement","body":"<p>I'm developping an application with ASP.NET MVC3 and I have to give an access to client to see some files, this files are in local server and change permanantly\nWe are working in active directory environement\nI need to have an Idea how to give this acces in secure manner. Do I need to create a user in read only and authenticate him from the app\nI need to imagine the scenario and how make it work\nSome Ideas please</p>\n"},{"tags":["entity-framework","asp.net-mvc-3","ef-code-first"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":3361,"score":5,"question_id":5686272,"title":"MVC 3 & ASP.Net with Entity Framework scaffolding error : No model classes are available","body":"<p>I am trying to use MVC3 with the Entity framework with Code First, but the code Template generation process in MS Visual Web Developer 2010 - is not detecting my Model in the models folder - giving a message - \"No Model classes are available\" - although I do have model classes for which I want to create controllers.</p>\n\n<p>The templating option I've selected is \"Controller with read/write actions and views using the Entity Framework\".</p>\n\n<p>I've uninstalled and reinstalled Web Developer 2010, but still having the same error.</p>\n\n<p>Anyone know how I can get around this error?</p>\n"},{"tags":["c#","json","entity-framework","serialization","asp.net-mvc-3"],"answer_count":8,"favorite_count":8,"up_vote_count":16,"down_vote_count":0,"view_count":7808,"score":16,"question_id":5588143,"title":"EF 4.1 - Code First - JSON Circular Reference Serialization Error","body":"<p>I am getting an a Circular Reference Serialization Error although, to my knowledge I do not have any circular references. I am retrieving a set of Orders from the database and sending them to the client as JSON. All the code is shown below.</p>\n\n<p>This is the error:</p>\n\n<blockquote>\n  <p><strong>Error</strong></p>\n  \n  <p>A circular reference was detected\n  while serializing an object of type\n  'System.Data.Entity.DynamicProxies.Order_83CECF2AA4DE38232F9077D4B26941AB96BC61230419EA8AC42C9100E6072812'.\n  Description: An unhandled exception\n  occurred during the execution of the\n  current web request. Please review the\n  stack trace for more information about\n  the error and where it originated in\n  the code. </p>\n  \n  <p>Exception Details:\n  System.InvalidOperationException: A\n  circular reference was detected while\n  serializing an object of type\n  'System.Data.Entity.DynamicProxies.Order_83CECF2AA4DE38232F9077D4B26941AB96BC61230419EA8AC42C9100E6072812'.</p>\n  \n  <p>Source Error: </p>\n  \n  <p>An unhandled exception was generated\n  during the execution of the current\n  web request. Information regarding the\n  origin and location of the exception\n  can be identified using the exception\n  stack trace below.</p>\n</blockquote>\n\n<p>My classes are as follows:</p>\n\n<p><strong>Order</strong></p>\n\n<pre><code>public class Order\n{\n    [Key]\n    public int OrderId { get; set; }\n\n    public int PatientId { get; set; }\n    public virtual Patient Patient { get; set; }\n\n    public int CertificationPeriodId { get; set; }\n    public virtual CertificationPeriod CertificationPeriod { get; set; }\n\n    public int AgencyId { get; set; }\n    public virtual Agency Agency { get; set; }\n\n    public int PrimaryDiagnosisId { get; set; }\n    public virtual Diagnosis PrimaryDiagnosis { get; set; }\n\n    public int ApprovalStatusId { get; set; }\n    public virtual OrderApprovalStatus ApprovalStatus { get; set; }\n\n    public int ApproverId { get; set; }\n    public virtual User Approver { get; set; }\n\n    public int SubmitterId { get; set; }\n    public virtual User Submitter { get; set; }\n\n    public DateTime ApprovalDate { get; set; }\n\n    public DateTime SubmittedDate { get; set; }\n    public Boolean IsDeprecated { get; set; }\n}\n</code></pre>\n\n<p><strong>Patient</strong></p>\n\n<pre><code>public class Patient\n{\n    [Key]\n    public int PatientId { get; set; }\n    public string FirstName { get; set; }\n    public string LastName { get; set; }\n    public string MiddleInitial { get; set; }\n    public bool IsMale;\n    public DateTime DateOfBirth { get; set; }\n\n    public int PatientAddressId { get; set; }\n    public Address PatientAddress { get; set; }\n\n    public bool IsDeprecated { get; set; }\n}\n</code></pre>\n\n<p><strong>Certification Period</strong></p>\n\n<pre><code>public class CertificationPeriod\n{\n    [Key]\n    public int CertificationPeriodId { get; set; }\n    public DateTime startDate { get; set; }\n    public DateTime endDate { get; set; }\n    public bool isDeprecated { get; set; }\n}\n</code></pre>\n\n<p><strong>Agency</strong></p>\n\n<pre><code>public class Agency\n{\n    [Key]\n    public int AgencyId { get; set; }\n    public string Name { get; set; }\n\n    public int PatientAddressId { get; set; }\n    public virtual Address Address { get; set; }\n}\n</code></pre>\n\n<p><strong>Diagnosis</strong></p>\n\n<pre><code>public class Diagnosis\n{\n    [Key]\n    public int DiagnosisId { get; set; }\n    public string Icd9Code { get; set; }\n    public string Description { get; set; }\n    public DateTime DateOfDiagnosis { get; set; }\n    public string Onset { get; set; }\n    public string Details { get; set; }\n}\n</code></pre>\n\n<p><strong>OrderApprovalStatus</strong></p>\n\n<pre><code>public class OrderApprovalStatus\n{\n    [Key]\n    public int OrderApprovalStatusId { get; set; }\n    public string Status { get; set; }\n}\n</code></pre>\n\n<p><strong>User</strong></p>\n\n<pre><code>public class User\n{\n    [Key]\n    public int UserId { get; set; }\n    public string Login { get; set; }\n    public string FirstName { get; set; }\n    public string LastName { get; set; }\n    public string NPI { get; set; }\n    public string Email { get; set; }\n\n}\n</code></pre>\n\n<blockquote>\n  <p><strong>NOTE: ADDRESS CLASS IS NEW ADDITION DURING EDIT</strong></p>\n</blockquote>\n\n<p><strong>Address</strong></p>\n\n<pre><code>public class Address\n{\n    [Key]\n    public int AddressId { get; set; }\n    public string StreetAddress { get; set; }\n    public string City { get; set; }\n    public string State { get; set; }\n    public string Zip { get; set; }\n    public string Phone { get; set; }\n    public string Title { get; set; }\n    public string Label { get; set; }\n}\n</code></pre>\n\n<p>The code that executes the serialization is here:</p>\n\n<p><strong>Excerpt from OrderController</strong></p>\n\n<pre><code>    public ActionResult GetAll()\n    {\n        return Json(ppEFContext.Orders, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":45,"score":0,"question_id":12997812,"title":"How to add some class to div element, depending of some condition in Razor?","body":"<p>I'm quite confused in Razor syntax ))) For example I have an element:</p>\n\n<pre><code>&lt;div class=\"category-block\"&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p>I have a parameter </p>\n\n<p><code>string viewMode = Html.ViewContext.HttpContext.Request.QueryString[\"view\"];</code> </p>\n\n<p>and I need to add <code>list-block</code> class to my div element with class <code>category-block</code> and to get </p>\n\n<pre><code>&lt;div class=\"category-block list-block\"&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>if</strong></p>\n\n<p><code>viewMode != null &amp;&amp; viewMode.Equals(\"list\", StringComparison.OrdinalIgnoreCase)</code>. </p>\n\n<p>I trie to do something like:</p>\n\n<pre><code>&lt;div class=\"category-block @(viewMode != null &amp;&amp; viewMode.Equals(\"list\", StringComparison.OrdinalIgnoreCase)) ? list-block : string.Empty \"&gt;\n</code></pre>\n\n<p>but every time I get a lot of syntax errors... I don't know is it possible to write something inside opened attribure brackets;</p>\n"},{"tags":[".net","asp.net-mvc-3","forms-authentication"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":743,"score":0,"question_id":7425204,"title":".net mvc3 get roles of user","body":"<p>I am trying to get a list of roles for a particular user (not the current one logged in). </p>\n\n<p>I figured out how to do this: </p>\n\n<pre><code>var theUser = Membership.GetUser(username)\n</code></pre>\n\n<p>But that just returns a MembershipUser object, which doesn't seem to have a isInRole method. </p>\n\n<p>Is if I have the username as a string, how do I get a list of roles, or check that the user is in a particular role?</p>\n\n<p>I am using all of the default authentication and membership providers. </p>\n"},{"tags":[".net","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":9,"down_vote_count":0,"view_count":1910,"score":9,"question_id":7649733,"title":"MVC3 Partial View vs. Regular View","body":"<p>Just curious if there was anything that made a partial view different from a regular view other than convention. </p>\n\n<p>Code-wise they look and work similar but I was curious if there was a difference (other than specifying the template page, etc at the top). </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","form-validation"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":8330527,"title":"Changing text if a form has an error","body":"<p>I currently have a summary message at the top of my form, inviting my user to login. If the form does not validate on submit, I wish for this to then be replaced with the relevant error.</p>\n\n<p>The only way I can think of is by hiding the initial text (perhaps in a <code>@Html.Label</code>) and then showing a <code>@Html.ValidationSummary</code>. However, I feel there is most likely a far more efficient way of doing this. </p>\n\n<p>Can anybody help?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":48,"score":-2,"question_id":12978522,"title":"controller mvc3 unit test","body":"<p>How to write unit test for</p>\n\n<pre><code>public ActionResult Details()\n{\n    EmployeeDTO employee = this.EmployeeService.GetLoggedInEmployee();\n    EmployeeModel model = assembler.ToEmployeeModel(employee);\n    model.Title = GetEmployeeNameTitle(employee);\n    model.Controller = \"LoanProcessor\";\n    model.SelectedTab = MainNavTabs.LoanProcessor;\n    return View(model);\n}\n</code></pre>\n\n<p>I have no idea how to solve it.</p>\n"},{"tags":["facebook","asp.net-mvc-3","facebook-graph-api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12997312,"title":"How to delete \"app_data\" from \"signed_request\"","body":"<p>In my application i need to clear \"app_data\" from \"signed request\", after first usage.I perform redirect :</p>\n\n<pre><code>var appData = new ApplicationData { ImageId = Id }.ToRequestUrlParameter();\nvar urlParams = new List&lt;string&gt; { \"sk=app_\" + ConfigurationManager.AppSettings[\"AppId\"], \"app_data=\" + appData };\n\nViewBag.Url = string.Concat(page.Link,\n                        page.Link.Contains('?') ? \"&amp;\" : \"?\",\n                                string.Join(\"&amp;\", urlParams));\n</code></pre>\n\n<p>And then i perform redirect in View:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    top.location.href = '@Html.Raw(ViewBag.Url)';\n&lt;/script&gt;\n</code></pre>\n\n<p>After redirect application will enter to homeController index action:</p>\n\n<pre><code>public ActionResult Index(int? id){...}\n</code></pre>\n\n<p>And i check:</p>\n\n<pre><code>                        if (id.HasValue)\n                        {\n                           //Do something\n                           //Clear app data from signed request\n                        }\n</code></pre>\n\n<p>So, my question is how i can clear \"app_data\" from \"signed_request\"?</p>\n"},{"tags":["c#","asp.net-mvc-3",".net-4.0","ninject"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":113,"score":1,"question_id":12996547,"title":"webapi with ninject","body":"<p>I'm having a trouble, making Ninject and WebAPI.All working together. I'll be more specific: <br/>\nFirst, I played around with WebApi.All package and looks like it works fine to me. <br/>\nSecond, I added to <code>RegisterRoutes</code> in <code>Global.asax</code> next line: <br /></p>\n\n<pre><code>routes.Add(new ServiceRoute(\"api/contacts\", new HttpServiceHostFactory(), typeof(ContactsApi)));\n</code></pre>\n\n<p>So the final result was:\n</p>\n\n<pre><code>\npublic static void RegisterRoutes(RouteCollection routes)\n        {\n            routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n            routes.Add(new ServiceRoute(\"api/contacts\", new HttpServiceHostFactory(), typeof(ContactsApi)));\n\n            routes.MapRoute(\n                \"Default\", // Route name\n                \"{controller}/{action}/{id}\", // URL with parameters\n                new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n            );\n\n            ControllerBuilder.Current.SetControllerFactory(new NinjectControllerFactory());\n\n        }\n</code></pre>\n\n<p>Everything seems to be fine, but when I'm trying to redirect user to a specific action, something like:\n<code></p>\n\n<pre><code>return RedirectToAction(\"Index\", \"Home\");\n</code></pre>\n\n<p></code>\nUrl in browser is <code>localhost:789/api/contacts?action=Index&amp;controller=Home</code>\n Which is not good. I swaped lines in <code>RegisterRoute</code> and now it looks:\n</p>\n\n<pre><code>\npublic static void RegisterRoutes(RouteCollection routes)\n        {\n            routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n            routes.MapRoute(\n                \"Default\", // Route name\n                \"{controller}/{action}/{id}\", // URL with parameters\n                new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n            );\n            routes.Add(new ServiceRoute(\"api/contacts\", new HttpServiceHostFactory(), typeof(ContactsApi)));\n            ControllerBuilder.Current.SetControllerFactory(new NinjectControllerFactory());\n\n        }\n</code></pre>\n\n<p>Now the redirection works fine, but when I try to access to my API actions, I get error telling me that \n<code> Ninject couldn't return controller \"api\"</code> which is absolutely logical, I don't have such controller.<br /><br />\nI did search some info how to make Ninject work with WebApi, but everything I found was only for MVC4 or .Net 4.5. By the technical issues I can't move my project to a new platform, so I need to find a working solution for this versions. <br /> <br />\n <a href=\"http://stackoverflow.com/questions/7602327/ninject-working-with-wcf-web-api-preview-5?answertab=active#tab-top\">This answer</a> looked like a working solution, but when I'm trying to launch project I get compiler error in line\n</p>\n\n<pre><code>CreateInstance = (serviceType, context, request) => kernel.Get(serviceType);</code></pre>\n\n<p>telling me: <br /><br />\n<code>System.Net.Http.HttpRequestMessage  is defined in an assembly that is not referenced</code><br /><br /> and something about adding refference in assembly <br /> <br /><code>System.Net.Http, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35</code>\n<br /><br />\n I have no Idea what to do next, I couldn't find any useful info about ninject with webapi on .NET 4 and MVC3. Any help would be appreciated.</p>\n"},{"tags":["jquery","asp.net-mvc-3","razor","pagination","webgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":452,"score":0,"question_id":9647097,"title":"how to retain checkbox value in mvc3 webgrid on pagination","body":"<p>I am using an MVC3 Webgrid to display some data, and have applied server side paging/sorting.  I also have a checkbox column in the grid.  My problem is that when I change pages, I am losing the selected records.  I am able to store the selected row IDs in a session variable, but am unable to retrieve the values from the session and bind to the checkboxes in the Webgrid.</p>\n\n<p>Can someone throw some light on this issue?  Please also let me know if there is any other/better approach.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":908,"score":1,"question_id":5712557,"title":"MVC 3 Form issue","body":"<p>I have just migrated my application from MVC2 to MVC3</p>\n\n<p>And i found that whenever my login page is loaded the Action attribute remains <strong>BLANK</strong></p>\n\n<p>Following is the code : </p>\n\n<pre><code>&lt;% using (Html.BeginForm(\"ValidateUser\", \"Account\", FormMethod.Post, new { id = \"formLogin\", name = \"formLogin\" }))\n   { %&gt;;\n\n  ........\n\n&lt;%}%&gt;;\n</code></pre>\n\n<p>in Browser it shows like following : </p>\n\n<pre><code>&lt;form name=\"formLogin\" method=\"post\" id=\"formLogin\" action=\"\"&gt;\n\n........\n\n\n&lt;/form&gt;\n</code></pre>\n\n<p>where Action is EMPTY</p>\n\n<p>Please help me in this issue</p>\n\n<p>Thanks,</p>\n\n<p>Manoj</p>\n"},{"tags":["asp.net-mvc-3","jquery-ui","jquery-ajax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2706,"score":0,"question_id":8146812,"title":"How open the Jquery Popup modal window in mvc3","body":"<p>i have develop a mvc3(Razor) application in that i have try to open the  jquery modal popup window.I have a partial view which I want to open by using JQuery Modal Popup,but when click the link it redirect to the view not open the pop window,what can i do to open the partial view in jquery model window please help me.</p>\n\n<p>Here i post my code what i did to open the Jquery window.</p>\n\n<pre><code> View\n        @{\nLayout = \"~/Views/Shared/_Layout.cshtml\";\n}\n @*&lt;link href=\"../../Content/themes/jquery.ui.all.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n &lt;script src=\"../../Scripts/uiDialog/jquery-ui-1.8.custom.min.js\" type=\"text/javascript\"&gt;          &lt;/script&gt;\n       &lt;script src=\"../../Scripts/uiDialog/jquery.effects.core.js\" type=\"text/javascript\"&gt; &lt;/script&gt;\n       &lt;script src=\"../../Scripts/uiDialog/jquery.effects.fade.js\" type=\"text/javascript\"&gt;&lt;/script&gt;*@\n       &lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.4.4.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n      &lt;script src=\"@Url.Content(\"~/Scripts/jquery-ui.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n      &lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n     &lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n      &lt;script src=\"@Url.Content(\"~/Scripts/jquery.unobtrusive-ajax.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n      &lt;script type=\"text/javascript\"&gt;\n         alert(\"Test\");\n           $.ajaxSetup({ cache: false });\n\n       $(document).ready(function () {\n          $(\".openDialog\").live(\"click\", function (e) {\n                e.preventDefault();\n\n             $(\"&lt;div&gt;&lt;/div&gt;\")\n            .addClass(\"dialog\")\n            .attr(\"id\", $(this).attr(\"data-dialog-id\"))\n            .appendTo(\"body\")\n            .dialog({\n                title: $(this).attr(\"data-dialog-title\"),\n                close: function () { $(this).remove() },\n                modal: true\n            })\n            .load(this.href);\n    });\n\n    $(\".close\").live(\"click\", function (e) {\n        e.preventDefault();\n        $(this).closest(\".dialog\").dialog(\"close\");\n    });\n});\n   &lt;/script&gt;\n     &lt;div id=\"bookInfo\"&gt;\n          &lt;div id=\"bookResult\" class=\"resultMsg\"&gt;\n     &lt;/div&gt;\n       &lt;p&gt;\n             @Html.ActionLink(\"Add Book\", \"SelectItem\", null, new { @class = \"abookCreate\", title = \"Selected Item\" })\n      &lt;/p&gt;\n      &lt;a id=\"page-help\" href=\"/Home/SelectItem/\" onclick=\"window.open(this.href, 'popupwindow', 'width=500,height=300'); return false;\"&gt;\n    what is this?&lt;/a&gt;&lt;/div&gt;\n      @Html.ActionLink(\"Contact Us\", \"SelectItem\", \"Home\", null,\n   new { @class = \"openDialog\", data_dialog_id = \"emailDialog\", data_dialog_title = \"Contact Us\" })\n</code></pre>\n\n<p>please help me how can solve this ....</p>\n"},{"tags":["c#","asp.net-mvc-3","dependency-injection","autofac"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":11582331,"title":"With Autofac, how do I enable property injection on a single mvc controller after RegisterControllers has been called?","body":"<p>I'm calling Autofac.mvc.integration extension method registercontrollers in the global.asax startup</p>\n\n<pre><code>builder.RegisterControllers(Assembly.GetExecutingAssembly());\n</code></pre>\n\n<p>Notice propertiesAutowired is not being applied.  I need to enable property injection on a single controller type.  How can I do that? Do I re-register the type? Unregister and reregister? I'm fearful of breaking something if I apply prop injection to all controllers at once.  Any tips, tricks, code, links, etc.. are always appreciated. Cheers! </p>\n"},{"tags":[".net","asp.net-mvc-3","amazon-s3","amazon-web-services","amazon"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":2,"question_id":12994892,"title":"Intermittent 500 Error when connecting to Amazon S3 server","body":"<p>I am connecting to Amazon S3 server through the dll for uploading and downloading.</p>\n\n<p>I get a error as \"Could not connect to host 187.6.78.8:443\".\nSometimes it connects and sometimes it doesnt.</p>\n\n<p>What could be the reason?What is the solution for this?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1085,"score":0,"question_id":6309359,"title":"Why won't Html.ListBoxFor() highlight current selected items?","body":"<p>I am trying to understand why my <code>Html.ListBoxFor()</code> is not highlighting current selected items when the view loads.</p>\n\n<p>I have a database model:</p>\n\n<pre><code>    public class Issue\n    {\n        [Key]\n        public int      IssueId     { get; set; }\n        public int      Number      { get; set; }\n        public string   Title       { get; set; }\n        public DateTime Date        { get; set; }\n\n        public virtual ICollection&lt;Creator&gt; Creators { get; set; }\n    }\n\n    public class Creator\n    {\n        [Key]\n        public int      CreatorId   { get; set; }\n        public string   FirstName   { get; set; }\n        public string   MiddleName  { get; set; }\n        public string   LastName    { get; set; }\n\n        public virtual ICollection&lt;Issue&gt; Issues { get; set; }\n    }\n\n    public class Icbd : DbContext\n    {\n        public DbSet&lt;Issue&gt; Issues { get; set; }\n        public DbSet&lt;Creator&gt; Creators { get; set; }\n    }\n</code></pre>\n\n<p>I then have an editing model:</p>\n\n<pre><code>public class IssueEditModel\n{\n    public Issue Issue { get; set; }\n    public IEnumerable&lt;Creator&gt; Creators { get; set; }\n    public IEnumerable&lt;Creator&gt; SelectedCreators { get {return Issue.Creators;} }\n}\n</code></pre>\n\n<p>Then, in my controller I populate <code>IssueEditModel</code>:</p>\n\n<pre><code>    public ActionResult EditIssue( int id = 0 )\n    {\n        IssueEditModel issueEdit = new IssueEditModel{\n            Creators = db.Creators.ToList(),\n            Issue = new Issue{ Creators = new List&lt;Creator&gt;()},\n        };\n        if (id &gt; 0)\n        {\n            issueEdit.Issue = db.Issues.Include(\"Creators\").Where(x =&gt; x.IssueId == id).Single();\n        }\n\n        return View(issueEdit);\n    }\n</code></pre>\n\n<p>This populates all objects correctly (as far as I can tell, anyway.) In my View, I am writing a listbox like this:</p>\n\n<pre><code>    &lt;%: Html.ListBoxFor(\n                x =&gt; x.SelectedCreators, \n                new SelectList(\n                    Model.Creators, \n                    \"CreatorId\", \n                    \"LastName\"\n        )\n            )%&gt;\n</code></pre>\n\n<p>This lists all the options correctly, but I cannot get the currently select items to highlight. I almost want to write my own Html Helper because this is such a simple operation, I don't understand why this is being so difficult.</p>\n\n<p>Why wont the Html Helper highlight the current items?</p>\n"},{"tags":["c#","asp.net-mvc-3","iis","subdomain"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":91,"score":5,"question_id":12994128,"title":"How to allow users to create their own subdomains on my MVC website?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/278668/is-it-possible-to-make-an-asp-net-mvc-route-based-on-a-subdomain\">Is it possible to make an ASP.NET MVC route based on a subdomain?</a>  </p>\n</blockquote>\n\n\n\n<p>I'm going to build a website that will allow users to create their own virtual store, hosted by my website.</p>\n\n<p>Think eBay; letting small businesses create their stores.</p>\n\n<p>For example:</p>\n\n<pre><code>www.foo.com                 - The main website.\nwww.georgestires.foo.com    - \"George's Tires\" online store.\n</code></pre>\n\n<p>I would let the users create their own stylesheets and customizations to an extent, but that's for later. Right now I'm wondering about how to implement this feature on an MVC 3 website.</p>\n\n<p>I'm literally at ground zero here with no legs to stand on. Any and all advice is appreciated. I know that in IIS I can create a \"bar.foo.com\" subdomain binding and have that direct flow to my ASP.Net MVC3 application, but does that mean that every time someone creates their store I will have to programatically create a new binding?</p>\n\n<p>Is that even possible? Should I be looking at that approach?</p>\n"},{"tags":["asp.net-mvc-3","localization","translation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1118,"score":1,"question_id":5857810,"title":"ASP.NET mvc3 Custom resource provider","body":"<p>I am having some trouble with mvc3 and a custom resource provider. I created a custom resource provider with a database.</p>\n\n<p>I added the settings in my web.config.</p>\n\n<p>But how can I get localized strings in my views with the resourceprovider ?</p>\n\n<p>I can't find info anywhere.</p>\n\n<p>Can someone please help ?</p>\n"},{"tags":["c#","asp.net-mvc-3","templates","code-generation"],"answer_count":5,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":197,"score":3,"question_id":12876865,"title":"Is there anyway to generate Razor views (.cshtml) based on a template beside T4?","body":"<p>I'm developing some code generator for generating models, controllers and views based on databases tables so I could make a Asp.Net MVC3 website. I can generate models and controllers with CodeDOM now but for generating views I need something to make the templates , like generating a .cshtml from a .cs , I thought T4 would be good idea but some of my colleagues insist on not using T4, is there any other ways? thanks </p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1236,"score":4,"question_id":4738709,"title":"How can I reset/get back razor intellisense and syntax highlighting?","body":"<p>I had a problem with my Visual Studio 2010 install - managed to sort it by a repair, and reinstall my addon's etc., but now the intellisense and syntax highlighting has disappeared from my cshtml files - I've reinstalled the asp.net mvc 3 RTM and that hasn't fixed it...I've trying a devenv /ResetSettings, but no change.</p>\n\n<p>Is there anything else I can do to try and bring back my lovely highlighting?!</p>\n"},{"tags":["asp.net-mvc-3","editorfor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4473,"score":0,"question_id":7460304,"title":"make Html.Editorfor field readonly in mvc3","body":"<p>I am using this, an editor template (located in the Shared\\EditorTemplates folder in my solution)   </p>\n\n<pre><code>  &lt;%@ Page Language=\"C#\" Inherits=\"System.Web.Mvc.ViewUserControl&lt;System.DateTime?&gt;\" %&gt;\n  &lt;%=Html.TextBox(\"\", (Model.HasValue ? Model.Value.ToString(\"MM/dd/yyyy\") : string.Empty), ViewData )%&gt;\n</code></pre>\n\n<p>and this in my view</p>\n\n<pre><code>  @Html.EditorFor(model =&gt; model.ModifiedDate)\n</code></pre>\n\n<p>how to make this field readonly in the view</p>\n"},{"tags":["asp.net-mvc-3","excel","mvc","interop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12985769,"title":"Return Excel file as result from MVC","body":"<ol>\n<li>If I opt for using Interop, does it require to have Excel installed on server-side?</li>\n<li>Are there any additional reasons why not to use Interop?</li>\n<li>Should I go for <code>System.Web.UI.WebControls.GridView</code> server-side solution, populate it and write it in result?</li>\n<li>Any other intelligent solution that preserves MVC logic and features?</li>\n</ol>\n"},{"tags":["c#","json","jquery-ajax","asp.net-mvc-3","cascadingdropdown"],"answer_count":1,"favorite_count":22,"up_vote_count":33,"down_vote_count":0,"view_count":20772,"score":33,"question_id":5497524,"title":"Easiest way to create a cascade dropdown in ASP.NET MVC 3 with C#","body":"<p>I want to create two dropdown lists in a cascade using MVC3 (preferably Razor) with C#.</p>\n\n<p>I would like to have one dropdown where you can choose the year and another one where you can choose a specific set of months depending on the selected year.</p>\n\n<p>Let's put it simple. When I choose the current year (i.e. 2011) in the dropdown list \"year\", the dropdown list \"month\" gets populated wih the months until the current month (i.e. March). For the other cases (other years) no restriction is given. Moreover it would be nice to \"block\" the dropdown list \"month\" before any element in the dropdown list \"year\" is selected.</p>\n\n<p>I already looked in the Internet for some solutions, using jQuery or even homemade approaches, but they all refer to past versions of MVC and some commands are deprecated in MVC3.</p>\n\n<p>Thank you very much for helping.</p>\n"},{"tags":["javascript","asp.net-mvc-3","asp.net-mvc-routing","requirejs"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12991283,"title":"conditional change of script tag based on url routing mvc 3","body":"<p>I am using requireJS for my hybrid app . Now I need to change the script tag located into my layout page with conditions on url . The script tag looks something like this </p>\n\n<pre><code>&lt;script data-main=\"@Url.Content(\"~/Scripts/main\")\" src=\"@Url.Content(\"~/Scripts/Libs/Requirejs/require.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Now when the page loads the <strong><code>/Home/Login</code></strong> the script tag above should be changed to </p>\n\n<pre><code>&lt;script data-main=\"@Url.Content(\"~/Scripts/login\")\" src=\"@Url.Content(\"~/Scripts/Libs/Requirejs/require.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Again when I load the page <strong><code>/Mail/Index</code></strong> The script tag above should change to </p>\n\n<pre><code>&lt;script data-main=\"@Url.Content(\"~/Scripts/mail\")\" src=\"@Url.Content(\"~/Scripts/Libs/Requirejs/require.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Now Note that All of the three pages uses the same <code>**_Layout.cshtml**</code> page . And the above script tag is located in <code>**_Layout.cshtml**</code> page only .Now how do I track this scripts to change the script tag on change of the Url routing as mentioned above ? </p>\n"},{"tags":["c#","asp.net-mvc-3","encryption","access-token"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12989939,"title":"MVC WebAPI parameters encryption","body":"<p>I'm trying to figure out how to encrypt and decrypt data for MVC3 WebAPI. The situation is:\n I'm making a feedbacks application which have user registration and user may register projects.\n Project must be used as as feedback foreign key (I mean feedback must be assigned to specific project).\n Problem is: how should i encrypt project Id (It will be GUID) and decrypt it on server-side. Should i use MD5 + salt. What should I use as salt? Maybe timestamp, but how should I pass this timestamp? Well, don't know where to start and what to do. Any help would be appreciated.\n Note: I don't need authorization to access to API methods, I need to pass secret parameter (as a key).</p>\n"},{"tags":["asp.net-mvc-3","asp.net-mvc-4","jquery-tabs"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12983485,"title":"MVC3 multiple tabs returning partial view with different data","body":"<p>I have few tabs in my view and have a partial view.</p>\n\n<p>Partial view contains a web grid. Depending on the selected tab grid has to be loaded with specific data.</p>\n\n<p>Using RenderAction to return partial view. But I am getting overflow exception when I post my view.</p>\n\n<p>This is my code.</p>\n\n<pre><code>&lt;div id=\"tabs\"&gt;\n    &lt;ul&gt;\n        &lt;li&gt;&lt;a href=\"#tabs-1\"&gt;Sage Pay&lt;/a&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;a href=\"#tabs-2\" &gt;Pay Pal&lt;/a&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n    &lt;div id=\"tabs-1\"&gt;\n        @{Html.RenderAction(\"SagePayPayments\", \"OrderProcessing\");}\n    &lt;/div&gt;\n    &lt;div id=\"tabs-2\"&gt;\n        @{Html.RenderAction(\"PayPalPayments\", \"OrderProcessing\");}\n    &lt;/div&gt;\n</code></pre>\n\n<p>\n</p>\n\n<p>And my controller is </p>\n\n<pre><code>public ActionResult PayPalPayments()\n    {\n        var model = new OrderContext().GetNewPayments(PaymentType.PayPal);\n        return PartialView(\"_PaymentsToVerify\", model);\n    }\n\n    public ActionResult SagePayPayments()\n    {\n        var model = new OrderContext().GetNewPayments(PaymentType.SagePay);\n        return PartialView(\"_PaymentsToVerify\", model);\n    }\n\n    [HttpPost]\n    public ViewResult VerifyPayments(FormCollection formData)\n    {\n        var context = new OrderContext();\n        var orderIds = formData.GetValues(\"chkSelected\");\n        if (orderIds != null)\n        {\n            IList&lt;long&gt; selectedOrders = orderIds.Select(orderId =&gt; Convert.ToInt64(orderId)).ToList();\n            context.VerifyPayments(selectedOrders);\n        }\n        return View(\"Unverified\");\n    }\n</code></pre>\n\n<p>Can somebody help me what I am missing.</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc-3","http","authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":46,"score":0,"question_id":12990224,"title":"Getting urname / password from http url","body":"<p>Is it possible to get the username / password in asp.net (mvc3) from a http url where it is formated like this?</p>\n\n<p><a href=\"http://user:password@example.com/path\" rel=\"nofollow\">http://user:password@example.com/path</a></p>\n\n<p>or is it only possible with the ftp protocol?</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","entity-relationship"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":59,"score":3,"question_id":12989699,"title":"Entity FrameWork many-to-many","body":"<pre><code>public class Project\n{\n\n\n    public virtual int ID { get; set; }\n\n    [Required]\n    public virtual String Title { get; set; }\n\n\n    public String Definition { get; set; }\n    public DateTime StartDate { get; set; }\n\n\n    [Required]\n    public int CreaterID { get; set; }\n\n    public virtual ICollection&lt;Status&gt; Status { get; set; }\n    public virtual ICollection&lt;Task&gt; Tasks { get; set; }\n    public virtual ICollection&lt;User&gt; Users { get; set; }\n\n    public Project()\n    {\n        Users = new HashSet&lt;User&gt;();\n    }\n\n\n}\n\n\npublic class User\n{\n    public int ID { get; set; }\n\n\n    [DisplayName(\"Kullanıcı Adı\")]\n    [Required]\n    [MinLength(5, ErrorMessage = \"Kullanıcı Adı En Az 5 Karakter Olmalıdır\")]\n    public string username { get; set; }\n\n    [DataType(DataType.Password)]\n    [DisplayName(\"Şifre\")]        \n    [Required]\n    [MinLength(3,ErrorMessage=\"Şifre En Az  3 Karakter Olmalıdır\")]\n    public string password { get; set; }\n\n    [Required]\n    public String Name { get; set; }\n\n    [Required]\n    public String Surname { get; set; }\n\n    public int? CreaterID { get; set; }\n    public int level { get; set; }\n\n    public ICollection&lt;Task&gt; Tasks { get; set; }\n    public ICollection&lt;Project&gt; Projects { get; set; }\n\n    public User()\n    {\n        Projects = new HashSet&lt;Project&gt;();\n    }\n}\n\n\npublic class TaskDB : DbContext\n{\n    public DbSet&lt;Comment&gt; Comments { get; set; }\n    public DbSet&lt;Project&gt; Projects { get; set; }\n    public DbSet&lt;Situation&gt; Situaitons { get; set; }\n    public DbSet&lt;Task&gt; Tasks { get; set; }\n    public DbSet&lt;User&gt; Users { get; set; }\n\n    protected override void OnModelCreating(DbModelBuilder modelBuilder)\n    {\n        modelBuilder.Entity&lt;Project&gt;().\n          HasMany(c =&gt; c.Users).\n          WithMany(p =&gt; p.Projects).\n          Map(\n           m =&gt;\n           {\n               m.MapLeftKey(\"ProjectId\");\n               m.MapRightKey(\"UserId\");\n               m.ToTable(\"ProjectUser\");\n           });\n    }\n\n}\n</code></pre>\n\n<p>If I add project , current user added to project users list but project not added current user's projects list \nThis is my project add code</p>\n\n<pre><code>[HttpPost]\n    public ActionResult Create(Project proje,Status status)\n    {\n\n        proje.StartDate = DateTime.Now;\n        proje.Status = new HashSet&lt;Status&gt;();\n        var user = _db.Users.Single(r=&gt; r.ID == UserRole.ID);\n        proje.Users.Add(user);\n        proje.Status.Add(status);\n        user.Projects.Add(proje);\n\n\n        if (ModelState.IsValid)\n        {\n            var projeler = _db.Projects;\n            projeler.Add(proje);\n            _db.SaveChanges();\n\n            return RedirectToAction(\"Index\");\n\n        }\n\n\n            return View(proje);\n\n    }\n</code></pre>\n\n<p>I Search this problem's cause I did not find , I want to learn why entity framework add user to project's list but not add project to user's list </p>\n"},{"tags":["asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12989892,"title":"MVC3 (Razor) Passing Model Data","body":"<p>I'm making Memo web application.</p>\n\n<p>and the main page contain 'Create and List and Modify' functions.</p>\n\n<p>But I don't know how to pass Model (for create) and List (for List) to View(Razor) from controller.</p>\n\n<p>this is my note model,</p>\n\n<pre><code>[Table(\"note\")]\npublic class Note\n{\n        [Key]\n        public int id { get; set; }\n\n        [Required(ErrorMessage=\"Content is required\")]\n        [DisplayName(\"Note\")]\n        public string content { get; set; }\n        public DateTime date { get; set; }\n\n        [Required(ErrorMessage = \"User ID is required\")]\n        [DisplayName(\"User ID\")]\n        public string userId {get; set;}\n        public Boolean isPrivate { get; set; }\n        public virtual ICollection&lt;AttachedFile&gt; AttachedFiles { get; set; }\n\n}\n</code></pre>\n\n<p>I tried,</p>\n\n<h1>1)</h1>\n\n<pre><code>public ActionResult Index()\n{\n     var notes = unitOfWork.NoteRepository.GetNotes();\n     return View(notes); \n}\n</code></pre>\n\n<p>Then, in view, </p>\n\n<pre><code>@model Enumerable&lt;MemoBoard.Models.Note&gt;\n//I can not use this, because the model is Enumerable type\n@Html.LabelFor(model =&gt; model.userId)\n</code></pre>\n\n<p>So, I made viewModel</p>\n\n<h1>2)</h1>\n\n<pre><code>public class NoteViewModel\n{\n    public IEnumerable&lt;Note&gt; noteList { get; set; }\n    public Note note { get; set; }\n}\n</code></pre>\n\n<p>In Controller,</p>\n\n<pre><code>public ActionResult Index()\n{\n    var notes = unitOfWork.NoteRepository.GetNotes();\n    return View(new NoteViewModel(){noteList=notes.ToList(), note = new Note()});\n}\n</code></pre>\n\n<p>and In View,</p>\n\n<pre><code>@model MemoBoard.Models.NoteViewModel\n@Html.LabelFor(model =&gt; model.note.userId) \n</code></pre>\n\n<p>it looks well, BUT in source view, it's showing</p>\n\n<pre><code>&lt;input data-val=\"true\" data-val-required=\"User ID is required\" id=\"note_userId\" name=\"note.userId\" type=\"text\" value=\"\" /&gt;\n</code></pre>\n\n<p>the name is <strong>note.userId</strong> not <strong>userId</strong>.</p>\n\n<p>List this case, how should I do to make working?</p>\n\n<p>Please advice me. </p>\n\n<p>Thanks</p>\n\n<p><strong>[EDIT]\n(First of all, thanks for all advices)</strong></p>\n\n<p>Then, How can I change this controller </p>\n\n<pre><code>[HttpPost]\npublic ActionResult Index(Note note) \n{\n    try\n    {\n    if (ModelState.IsValid)\n    {\n        unitOfWork.NoteRepository.InsertNote(note);\n        unitOfWork.Save();\n        return RedirectToAction(\"Index\");\n    }\n    }catch(DataException){\n    ModelState.AddModelError(\"\", \"Unable to save changes. Try again please\");\n    }\n\n    return RedirectToAction(\"Index\");\n}\n</code></pre>\n\n<p>If I change parameter type to NoteViewModel, then how should I do for valid check?</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Index(NoteViewModel data) \n{\n    try\n    {\n    if (ModelState.IsValid) &lt;===\n</code></pre>\n"},{"tags":["asp.net-mvc-3","internationalization"],"answer_count":3,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":1902,"score":4,"question_id":6494824,"title":"ASP.NET MVC language change link","body":"<p>I have an ASP.NET MVC site that it's in two languages using Resources. To allow the server to present the site in the apropiate language (depending on the one that's configured in the user's browser) I put the following in my web.config:</p>\n\n<pre><code>&lt;globalization culture=\"es-es\" uiCulture=\"auto\" /&gt;\n</code></pre>\n\n<p>How can I add a link to change the uiCulture? I want to store the selection in a cookie and if it's not present, then fall back to the browser configuration... Is it possible?</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12818471,"title":"Mvc 3 Action signature","body":"<p>Is it possible to get the action arguments signature when overriding OnActionExecuting to match between the client sent parameter types to the wanted action parameter types?</p>\n"},{"tags":["c#","asp.net-mvc-3","stackoverflowexception"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":354,"score":0,"question_id":9795001,"title":"On starting my MVC3 application, getting \"An unhandled exception of type 'System.StackOverflowException' occurred in mscorlib.dll\"?","body":"<p>I can't capture what is happening here.  My global.asax file has nothing exotic in it, but I simply cannot start my MVC3 application on my local IIS Express server now:</p>\n\n<pre><code>public class MvcApplication : System.Web.HttpApplication\n{\n    public static void RegisterGlobalFilters(GlobalFilterCollection filters)\n    {\n        filters.Add(new HandleErrorAttribute());\n    }\n\n    public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n        routes.MapRoute(\n            \"Paginate\",\n            \"{controller}/Paginate/{itemsPerPage}/{pageNumber}/{searchPhrase}\", //URL with parameters\n            new { controller = \"Home\", action = \"Paginate\", itemsPerPage = Configuration.DefaultPageSize, pageNumber = 1, searchPhrase = UrlParameter.Optional },\n            new { itemsPerPage = @\"\\d+\", pageNumber = @\"\\d+\" }\n        );\n\n        routes.MapRoute(\n            \"Default\", // Route name\n            \"{controller}/{action}/{id}\", // URL with parameters\n            new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n        );\n    }\n\n    protected void Application_Start()\n    {\n        AreaRegistration.RegisterAllAreas();\n        RegisterGlobalFilters(GlobalFilters.Filters);\n        RegisterRoutes(RouteTable.Routes);\n    }\n}\n</code></pre>\n\n<p>The exception is captured at <code>RegisterGlobalFilters(GlobalFilters.Filters);</code> but if I comment it out it will happen at <code>AreaRegistration.RegisterAllAreas();</code>.  If I comment both out, it happens at <code>RegisterRoutes(RouteTable.Routes);</code>.  How do I even troubleshoot this?  I can't put in a breakpoint that will catch!</p>\n\n<p><strong>Update:</strong> here are the call stacks I am capturing:</p>\n\n<p>This is from having all three enabled:</p>\n\n<pre><code>mscorlib.dll!System.Reflection.RuntimeModule.GetTypes() + 0x5 bytes \nmscorlib.dll!System.Reflection.Assembly.GetTypes() + 0x4f bytes \nSystem.Web.Mvc.dll!System.Web.Mvc.TypeCacheUtil.FilterTypesInAssemblies(System.Web.Mvc.IBuildManager buildManager, System.Predicate&lt;System.Type&gt; predicate) + 0xa5 bytes    \nSystem.Web.Mvc.dll!System.Web.Mvc.TypeCacheUtil.GetFilteredTypesFromAssemblies(string cacheName = \"MVC-AreaRegistrationTypeCache.xml\", System.Predicate&lt;System.Type&gt; predicate, System.Web.Mvc.IBuildManager buildManager = {System.Web.Mvc.BuildManagerWrapper}) + 0x40 bytes  \nSystem.Web.Mvc.dll!System.Web.Mvc.AreaRegistration.RegisterAllAreas(System.Web.Routing.RouteCollection routes = Count = Cannot evaluate expression because the current thread is in a stack overflow state., System.Web.Mvc.IBuildManager buildManager, object state = null) + 0x57 bytes   \nSystem.Web.Mvc.dll!System.Web.Mvc.AreaRegistration.RegisterAllAreas(object state) + 0x2e bytes  \nSystem.Web.Mvc.dll!System.Web.Mvc.AreaRegistration.RegisterAllAreas() + 0x7 bytes   \n&gt;GHM.DFP.AdminUI.DLL!GHM.DFP.AdminUI.MvcApplication.Application_Start() Line 36 C#\n[Native to Managed Transition]  \nSystem.Web.dll!System.Web.HttpApplication.InvokeMethodWithAssert(System.Reflection.MethodInfo method, int paramCount, object eventSource, System.EventArgs eventArgs) + 0x3c bytes  \nSystem.Web.dll!System.Web.HttpApplication.ProcessSpecialRequest(System.Web.HttpContext context = {System.Web.HttpContext}, System.Reflection.MethodInfo method, int paramCount, object eventSource, System.EventArgs eventArgs, System.Web.SessionState.HttpSessionState session) + 0xef bytes  \nSystem.Web.dll!System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(System.Web.HttpContext context = {System.Web.HttpContext}, System.Web.HttpApplication app) + 0x13e bytes \nSystem.Web.dll!System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(System.IntPtr appContext = 723127104, System.Web.HttpContext context = {System.Web.HttpContext}, System.Reflection.MethodInfo[] handlers) + 0x84 bytes  \nSystem.Web.dll!System.Web.HttpApplication.InitSpecial(System.Web.HttpApplicationState state, System.Reflection.MethodInfo[] handlers, System.IntPtr appContext = 723127104, System.Web.HttpContext context) + 0xc3 bytes    \nSystem.Web.dll!System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(System.IntPtr appContext, System.Web.HttpContext context) + 0x154 bytes  \nSystem.Web.dll!System.Web.Hosting.PipelineRuntime.InitializeApplication(System.IntPtr appContext = 723127104) + 0xfe bytes  \n[Appdomain Transition]  \n[Native to Managed Transition]  \nwebengine4.dll!RegisterModule()  + 0x3740 bytes \n[Frames below may be incorrect and/or missing, no symbols loaded for webengine4.dll]    \nwebengine4.dll!RegisterModule()  + 0x47e bytes  \niiscore.dll!01d328cd()  \niiscore.dll!01d1a777()  \niiscore.dll!01d33247()  \niiscore.dll!01d334c2()  \niiscore.dll!01d25d67()  \niiscore.dll!01d26196()  \niiscore.dll!01d2686c()  \niiscore.dll!01d26d04()  \nw3dt.dll!HTTP_WRAPPER::QueryState()  + 0x17fc bytes \nw3dt.dll!HTTP_WRAPPER::QueryState()  + 0x23 bytes   \nw3tp.dll!THREAD_POOL::PostCompletion()  + 0xd6 bytes    \nw3tp.dll!THREAD_POOL::TerminateThreadPool()  + 0xa5 bytes   \nw3tp.dll!0f311f55()     \nkernel32.dll!BaseThreadInitThunk()  + 0x12 bytes    \nntdll.dll!RtlInitializeExceptionChain()  + 0xef bytes   \nntdll.dll!RtlInitializeExceptionChain()  + 0xc2 bytes   \n</code></pre>\n\n<p>I disable <code>AreaRegistration.RegisterAllAreas()</code> and this is what I get:</p>\n\n<pre><code>mscorlib.dll!System.Reflection.RuntimeModule.GetTypes() + 0x5 bytes \nmscorlib.dll!System.Reflection.Assembly.GetTypes() + 0x4f bytes \nSystem.Web.Mvc.dll!System.Web.Mvc.TypeCacheUtil.FilterTypesInAssemblies(System.Web.Mvc.IBuildManager buildManager, System.Predicate&lt;System.Type&gt; predicate) + 0xa5 bytes    \nSystem.Web.Mvc.dll!System.Web.Mvc.TypeCacheUtil.GetFilteredTypesFromAssemblies(string cacheName = \"MVC-ControllerTypeCache.xml\", System.Predicate&lt;System.Type&gt; predicate, System.Web.Mvc.IBuildManager buildManager = {System.Web.Mvc.BuildManagerWrapper}) + 0x40 bytes    \nSystem.Web.Mvc.dll!System.Web.Mvc.ControllerTypeCache.EnsureInitialized(System.Web.Mvc.IBuildManager buildManager) + 0x80 bytes \nSystem.Web.Mvc.dll!System.Web.Mvc.DefaultControllerFactory.GetControllerTypeWithinNamespaces(System.Web.Routing.RouteBase route = {System.Web.Routing.Route}, string controllerName = \"Home\", System.Collections.Generic.HashSet&lt;string&gt; namespaces = null) + 0x4d bytes    \nSystem.Web.Mvc.dll!System.Web.Mvc.DefaultControllerFactory.GetControllerType(System.Web.Routing.RequestContext requestContext, string controllerName) + 0x234 bytes \nSystem.Web.Mvc.dll!System.Web.Mvc.DefaultControllerFactory.System.Web.Mvc.IControllerFactory.GetControllerSessionBehavior(System.Web.Routing.RequestContext requestContext = {System.Web.Routing.RequestContext}, string controllerName) + 0x3e bytes   \nSystem.Web.Mvc.dll!System.Web.Mvc.MvcRouteHandler.GetSessionStateBehavior(System.Web.Routing.RequestContext requestContext) + 0x7d bytes    \nSystem.Web.Mvc.dll!System.Web.Mvc.MvcRouteHandler.GetHttpHandler(System.Web.Routing.RequestContext requestContext = {System.Web.Routing.RequestContext}) + 0x2a bytes   \nSystem.Web.Mvc.dll!System.Web.Mvc.MvcRouteHandler.System.Web.Routing.IRouteHandler.GetHttpHandler(System.Web.Routing.RequestContext requestContext) + 0xb bytes \nSystem.Web.dll!System.Web.Routing.UrlRoutingModule.PostResolveRequestCache(System.Web.HttpContextBase context = {System.Web.HttpContextWrapper}) + 0x108 bytes  \nSystem.Web.dll!System.Web.Routing.UrlRoutingModule.OnApplicationPostResolveRequestCache(object sender, System.EventArgs e) + 0x57 bytes \nSystem.Web.dll!System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() + 0x95 bytes   \nSystem.Web.dll!System.Web.HttpApplication.ExecuteStep(System.Web.HttpApplication.IExecutionStep step = {System.Web.HttpApplication.SyncEventExecutionStep}, ref bool completedSynchronously = false) + 0x4c bytes   \nSystem.Web.dll!System.Web.HttpApplication.PipelineStepManager.ResumeSteps(System.Exception error) + 0x39f bytes \nSystem.Web.dll!System.Web.HttpApplication.BeginProcessRequestNotification(System.Web.HttpContext context, System.AsyncCallback cb) + 0x5a bytes \nSystem.Web.dll!System.Web.HttpRuntime.ProcessRequestNotificationPrivate(System.Web.Hosting.IIS7WorkerRequest wr = {System.Web.Hosting.IIS7WorkerRequest}, System.Web.HttpContext context = {System.Web.HttpContext}) + 0xbe bytes   \nSystem.Web.dll!System.Web.Hosting.PipelineRuntime.ProcessRequestNotificationHelper(System.IntPtr managedHttpContext, System.IntPtr nativeRequestContext = 730752100, System.IntPtr moduleData, int flags) + 0x247 bytes \nSystem.Web.dll!System.Web.Hosting.PipelineRuntime.ProcessRequestNotification(System.IntPtr managedHttpContext, System.IntPtr nativeRequestContext, System.IntPtr moduleData, int flags) + 0x29 bytes    \nwebengine4.dll!RegisterModule()  + 0x19b7 bytes \n[Frames below may be incorrect and/or missing, no symbols loaded for webengine4.dll]    \nwebengine4.dll!RegisterModule()  + 0x25e8 bytes \nwebengine4.dll!MgdGetServerVariableA()  + 0x2fd6 bytes  \nwebengine4.dll!MgdGetServerVariableA()  + 0x3485 bytes  \niiscore.dll!005f086a()  \niiscore.dll!005f1724()  \niiscore.dll!005de053()  \niiscore.dll!005e0779()  \niiscore.dll!005e2cd6()  \niisfreb.dll!RegisterModule()  + 0x1870 bytes    \niiscore.dll!005e0f63()  \nwebengine4.dll!MgdReleaseNativeConfigSystem()  + 0x9e bytes \nwebengine4.dll!MgdIndicateCompletion()  + 0x24 bytes    \n[Managed to Native Transition]  \nSystem.Web.dll!System.Web.Hosting.PipelineRuntime.ProcessRequestNotificationHelper(System.IntPtr managedHttpContext, System.IntPtr nativeRequestContext, System.IntPtr moduleData, int flags) + 0x2cc bytes \nSystem.Web.dll!System.Web.Hosting.PipelineRuntime.ProcessRequestNotification(System.IntPtr managedHttpContext, System.IntPtr nativeRequestContext, System.IntPtr moduleData, int flags) + 0x29 bytes    \n[Appdomain Transition]  \nwebengine4.dll!RegisterModule()  + 0x19b7 bytes \nwebengine4.dll!MgdGetServerVariableA()  + 0x2cc0 bytes  \nkernel32.dll!BaseThreadInitThunk()  + 0x12 bytes    \nntdll.dll!RtlInitializeExceptionChain()  + 0xef bytes   \nntdll.dll!RtlInitializeExceptionChain()  + 0xc2 bytes   \n</code></pre>\n\n<p>Commenting out <code>RegisterGlobalFilters(GlobalFilters.Filters)</code> gets me this:</p>\n\n<pre><code>mscorlib.dll!System.Reflection.RuntimeModule.GetTypes() + 0x5 bytes \nmscorlib.dll!System.Reflection.Assembly.GetTypes() + 0x4f bytes \nSystem.Web.Mvc.dll!System.Web.Mvc.TypeCacheUtil.FilterTypesInAssemblies(System.Web.Mvc.IBuildManager buildManager, System.Predicate&lt;System.Type&gt; predicate) + 0xa5 bytes    \nSystem.Web.Mvc.dll!System.Web.Mvc.TypeCacheUtil.GetFilteredTypesFromAssemblies(string cacheName = \"MVC-ControllerTypeCache.xml\", System.Predicate&lt;System.Type&gt; predicate, System.Web.Mvc.IBuildManager buildManager = {System.Web.Mvc.BuildManagerWrapper}) + 0x40 bytes    \nSystem.Web.Mvc.dll!System.Web.Mvc.ControllerTypeCache.EnsureInitialized(System.Web.Mvc.IBuildManager buildManager) + 0x80 bytes \nSystem.Web.Mvc.dll!System.Web.Mvc.DefaultControllerFactory.GetControllerTypeWithinNamespaces(System.Web.Routing.RouteBase route = {System.Web.Routing.Route}, string controllerName = \"Home\", System.Collections.Generic.HashSet&lt;string&gt; namespaces = null) + 0x4d bytes    \nSystem.Web.Mvc.dll!System.Web.Mvc.DefaultControllerFactory.GetControllerType(System.Web.Routing.RequestContext requestContext, string controllerName) + 0x234 bytes \nSystem.Web.Mvc.dll!System.Web.Mvc.DefaultControllerFactory.System.Web.Mvc.IControllerFactory.GetControllerSessionBehavior(System.Web.Routing.RequestContext requestContext = {System.Web.Routing.RequestContext}, string controllerName) + 0x3e bytes   \nSystem.Web.Mvc.dll!System.Web.Mvc.MvcRouteHandler.GetSessionStateBehavior(System.Web.Routing.RequestContext requestContext) + 0x7d bytes    \nSystem.Web.Mvc.dll!System.Web.Mvc.MvcRouteHandler.GetHttpHandler(System.Web.Routing.RequestContext requestContext = {System.Web.Routing.RequestContext}) + 0x2a bytes   \nSystem.Web.Mvc.dll!System.Web.Mvc.MvcRouteHandler.System.Web.Routing.IRouteHandler.GetHttpHandler(System.Web.Routing.RequestContext requestContext) + 0xb bytes \nSystem.Web.dll!System.Web.Routing.UrlRoutingModule.PostResolveRequestCache(System.Web.HttpContextBase context = {System.Web.HttpContextWrapper}) + 0x108 bytes  \nSystem.Web.dll!System.Web.Routing.UrlRoutingModule.OnApplicationPostResolveRequestCache(object sender, System.EventArgs e) + 0x57 bytes \nSystem.Web.dll!System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() + 0x95 bytes   \nSystem.Web.dll!System.Web.HttpApplication.ExecuteStep(System.Web.HttpApplication.IExecutionStep step = {System.Web.HttpApplication.SyncEventExecutionStep}, ref bool completedSynchronously = false) + 0x4c bytes   \nSystem.Web.dll!System.Web.HttpApplication.PipelineStepManager.ResumeSteps(System.Exception error) + 0x39f bytes \nSystem.Web.dll!System.Web.HttpApplication.BeginProcessRequestNotification(System.Web.HttpContext context, System.AsyncCallback cb) + 0x5a bytes \nSystem.Web.dll!System.Web.HttpRuntime.ProcessRequestNotificationPrivate(System.Web.Hosting.IIS7WorkerRequest wr = {System.Web.Hosting.IIS7WorkerRequest}, System.Web.HttpContext context = {System.Web.HttpContext}) + 0xbe bytes   \nSystem.Web.dll!System.Web.Hosting.PipelineRuntime.ProcessRequestNotificationHelper(System.IntPtr managedHttpContext, System.IntPtr nativeRequestContext = 730145292, System.IntPtr moduleData, int flags) + 0x247 bytes \nSystem.Web.dll!System.Web.Hosting.PipelineRuntime.ProcessRequestNotification(System.IntPtr managedHttpContext, System.IntPtr nativeRequestContext, System.IntPtr moduleData, int flags) + 0x29 bytes    \nwebengine4.dll!RegisterModule()  + 0x19b7 bytes \n[Frames below may be incorrect and/or missing, no symbols loaded for webengine4.dll]    \nwebengine4.dll!RegisterModule()  + 0x25e8 bytes \nwebengine4.dll!MgdGetServerVariableA()  + 0x2fd6 bytes  \nwebengine4.dll!MgdGetServerVariableA()  + 0x3485 bytes  \niiscore.dll!0fcd086a()  \niiscore.dll!0fcd1724()  \niiscore.dll!0fcbe053()  \niiscore.dll!0fcc0779()  \niiscore.dll!0fcc2cd6()  \niisfreb.dll!RegisterModule()  + 0x1870 bytes    \niiscore.dll!0fcc0f63()  \nwebengine4.dll!MgdReleaseNativeConfigSystem()  + 0x9e bytes \nwebengine4.dll!MgdIndicateCompletion()  + 0x24 bytes    \n[Managed to Native Transition]  \nSystem.Web.dll!System.Web.Hosting.PipelineRuntime.ProcessRequestNotificationHelper(System.IntPtr managedHttpContext, System.IntPtr nativeRequestContext, System.IntPtr moduleData, int flags) + 0x2cc bytes \nSystem.Web.dll!System.Web.Hosting.PipelineRuntime.ProcessRequestNotification(System.IntPtr managedHttpContext, System.IntPtr nativeRequestContext, System.IntPtr moduleData, int flags) + 0x29 bytes    \n[Appdomain Transition]  \nwebengine4.dll!RegisterModule()  + 0x19b7 bytes \nwebengine4.dll!MgdGetServerVariableA()  + 0x2cc0 bytes  \nkernel32.dll!BaseThreadInitThunk()  + 0x12 bytes    \nntdll.dll!RtlInitializeExceptionChain()  + 0xef bytes   \nntdll.dll!RtlInitializeExceptionChain()  + 0xc2 bytes   \n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12988704,"title":"Why isn't FileStreamResult (and possibly ActionResult) IDisposable?","body":"<p>The <code>FileStreamResult</code> class owns an <code>IDisposable</code> stream if instantiated from a Controller with the constructor that takes a <code>Stream</code> argument:</p>\n\n<pre><code>public FileResult MyController()\n{\n    ...\n    Stream stream = ...\n    return File(stream, \"text/plain\", fileName);\n}\n</code></pre>\n\n<p>Surely it (and probably its base class <code>ActionResult</code>) should therefore implement <code>IDisposable</code>?</p>\n\n<p>Of course, if all goes well, <code>FileStreamResult.WriteFile()</code> method will dispose the <code>Stream</code>.  And when using the built-in Action Invoker <code>ControllerActionInvoker</code>, there doesn't seem to be much risk of an Exception being thrown before this happens.</p>\n\n<p>But given the extensible architecture of MVC, it seems to me that there is the potential for situations where an <code>Exception</code> would prevent the Stream being disposed when using a custom Action Invoker.</p>\n\n<p>I would have thought that <code>ActionResult</code> ought to implement <code>IDisposable</code>, and Action Invokers should be required  to guarantee they are disposed.</p>\n\n<p>Is this a design flaw or is there a good reason for this?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>From Henk Holterman's answer:</p>\n\n<blockquote>\n  <p>Note that the Action Invoker couldn't close the file either, it would be to soon.</p>\n</blockquote>\n\n<p>I don't understand what you're saying here - probably because I don't know enough about the handler framework.  As far as I can see, the Stream is currently disposed as follows by the built-in Action Invoker:</p>\n\n<p>InvokeAction => InvokeActionResult => ActionResult.ExecuteResult => FileStreamResult.WriteFile</p>\n\n<p>So why can't InvokeAction use a try/finally block to ensure an <code>IDisposable</code> ActionResult would be disposed - conceptually (and probably oversimplified) something like:</p>\n\n<pre><code>bool InvokeAction(ControllerContext controllerContext, string actionName)\n{\n    ...\n    ActionResult actionResult;\n\n    try\n    {\n        ...\n        actionResult = ... call Action method\n        ...\n        actionResult.ExecuteResult(controllerContext);\n    }\n    finally\n    {\n        if (actionResult != null) actionResult.Dispose();\n    }\n}\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":251,"score":3,"question_id":6080554,"title":"Add Controller after recent tools update fails with dependency error","body":"<p>Since installing the recent tools update for MVC3 adding a controller through the \"Add Controller\" context menu is often failing with the error:</p>\n\n<blockquote>\n  <p>Could not load file or assembly 'Newtonsoft.Json, Version=3.5.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed' or one of its dependencies. The system cannot find the file specified.</p>\n</blockquote>\n\n<p>Or simimlar (sometimes another dependency, such as \"Mono.Addins\" etc).</p>\n\n<p>The references it complains about aren't needed by the project directly, but are referenced by other references this project has.  The project builds find without the references, but Add Controller fails.</p>\n\n<p>Adding the reference mentioned in the error doesn't fix this either.  Even after adding a reference to Newtonsoft.Json (with the correct version and token) the error remains.</p>\n\n<p>I suspect this due to the reflection the Add Controller dialog does to provide a list of model types that can be used, but I can't understand why it still errors even after adding the requested reference.</p>\n\n<p>The \"Add View\" dialog is slightly better but still fails.  The dialog opens, but when you tick \"Create a strongly-typed view\" the dialog immediately closes.</p>\n\n<p>At the moment my work around is to manually add Controllers, and to add non-strongly types views and edit them by hand afterwards, but this is becoming really frustrating - especially since I can't take advantage of our customer T4 templates for scaffolding views and controllers.</p>\n\n<p>Anyone else experienced this since the update and know how to fix it?</p>\n"},{"tags":["vb.net","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12553683,"title":"Checking if mobile browser is acessing site","body":"<p>I would like to check what browser (basically if mobile or not) is accessing my application (ASP.net in VB) as I would like to send them to a different master layout page? Any ideas on how this can be done?</p>\n"},{"tags":["asp.net-mvc","unit-testing","integration-testing","asp.net-mvc-3"],"answer_count":3,"favorite_count":5,"up_vote_count":16,"down_vote_count":0,"view_count":1012,"score":16,"question_id":4278790,"title":"MvcIntegrationTestFramework or an alternative updated for ASP.NET MVC 3","body":"<p>I'm interested in using Steve Sanderson’s <a href=\"http://blog.stevensanderson.com/2009/06/11/integration-testing-your-aspnet-mvc-application/\" rel=\"nofollow\">MvcIntegrationTestFramework</a> <strong>or a very similar alternative</strong> with ASP.NET MVC 3 Beta.</p>\n\n<p>Currently when compiling <strong>MvcIntegrationTestFramework</strong> against MVC 3 Beta I get the following error due to changes in MVC:</p>\n\n<p><code>Error  6</code>\n<code>'System.Web.Mvc.ActionDescriptor.GetFilters()' is obsolete: '\"Please call System.Web.Mvc.FilterProviders.Providers.GetFilters() now.\"'</code>    <code>\\MvcIntegrationTestFramework\\Interception\\InterceptionFilterActionDescriptor.cs Line 18</code></p>\n\n<h2>Questions</h2>\n\n<h3>1. Can anybody provide the MvcIntegrationTestFramework working for ASP.NET MVC 3 Beta?</h3>\n\n<p>--- and / or ---</p>\n\n<h3>2. Are there similar alternatives you would recommend?</h3>\n\n<hr>\n\n<p><strong>EDIT #1:</strong> Note I have e-mailed Steve the creator of MvcIntegrationTestFramework, also hoping for some feedback there.</p>\n\n<p><strong>EDIT #2 &amp; #3:</strong> I have received a message from Steve. Quoted for your reference:<br>\n<em>I haven't needed to use that project with MVC 3, so sorry, I don't have an updated version of it. As far as I'm aware it should be possible to update it to work on MVC 3, but you'd need to figure that out perhaps by inspecting the MVC 3 source code to notice any changes in how actions, filters, etc are invoked now. If you do update it, and if you decide to adopt it as an ongoing project (e.g., putting it on Github or similar), let me know and I'll post a link to it!</em> (Thanks Steve!)</p>\n\n<p><strong>EDIT #4:</strong> Honestly had a quick stab at using <code>System.Web.Mvc.FilterProviders.Providers.GetFilters()</code> didn't get anywhere fast and simply adding the <code>[Obsolete]</code> found that there was an error in the internals of the MVC requests. Anybody else had a dabble?</p>\n\n<p><strong>EDIT #5:</strong> Please comment if you are using an alternative Integration Test Framework with MVC 3. </p>\n"},{"tags":["asp.net-mvc-3","authorization","roleprovider"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12987115,"title":"Implemeting CustomRoleProvider and use the role for the authorisation in MVC3 asp.net","body":"<p>I've been learning how to implement CustomRoleProvider from a few tutorials and managed to implement 2 main methods as below</p>\n\n<pre><code>    public override string[] GetRolesForUser(string userName)\n    {\n        string connectionString =\n          ConfigurationManager.ConnectionStrings[\"myDb\"].ConnectionString;\n        DataContext context = new DataContext(connectionString);\n        Table&lt;UserObj&gt; usersTable = context.GetTable&lt;UserObj&gt;();\n        UserObj userObj = usersTable.SingleOrDefault(u =&gt; u.UserName == userName);\n        string roleId = userObj.UserRoleID;\n\n        if (roleId != null)\n            return roleId.Select(c =&gt; c.ToString()).ToArray();\n        else\n            return new string[] { }; \n\n    }\n\n    public override bool IsUserInRole(string userName, string roleName)\n    {\n        string connectionString =\n         ConfigurationManager.ConnectionStrings[\"myDb\"].ConnectionString;\n        DataContext context = new DataContext(connectionString);\n        Table&lt;UserObj&gt; usersTable = context.GetTable&lt;UserObj&gt;();\n        UserObj userObj = usersTable.SingleOrDefault(u =&gt; u.UserName == userName);\n\n        if (userObj != null)\n        {\n            string roleId = userObj.UserRoleID;\n            if (roleId.Equals(roleName))\n                return true;\n        }\n       return false;\n    }\n</code></pre>\n\n<p>Then I added [Authorize(Roles = \"admin\")] on the index method of a controller which I want only admin to get access. When I tried to access the page, it seems to perform a restriction ok, for example, if I entered url:  </p>\n\n<pre><code>       http://localhost:60353/module\n</code></pre>\n\n<p>..it redirected me to </p>\n\n<pre><code>        http://localhost:60353/Account/LogOn?ReturnUrl=%2fmodule\n</code></pre>\n\n<p>However, the role didn't seem to be checked.</p>\n\n<p>What have I done wrong here?</p>\n"},{"tags":[".net","asp.net-mvc-3","mvcsitemapprovider"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12845929,"title":"How to show partial site map including current node with MvcSiteMapProvider","body":"<p>I'm migrating a site from ASP.NET WebForms to MVC3, and am using MvcSiteMapProvider 3.3.3.0 for navigation.</p>\n\n<p>I want to display a left menu with a part of the site map including the node corresponding to the currently displayed page.  </p>\n\n<p>With ASP.NET WebForms, I could do this with a Menu control, and a SiteMapDataSource configured to start 2 levels above the current node:</p>\n\n<pre><code>&lt;asp:SiteMapDataSource ...            \n    ShowStartingNode=\"false\" StartingNodeOffset=\"-2\" StartFromCurrentNode=\"true\" /&gt;\n</code></pre>\n\n<p>How can I achieve the same thing using the MvcSiteMapProvider HtmlHelper \"Menu\" function?</p>\n\n<p>I can't find an overload that takes an \"offset\" parameter similar to the SiteMapDataSource \"StartingNodeOffset\" attribute.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<blockquote>\n  <p>Is that current node and its children? </p>\n</blockquote>\n\n<p>No.  <code>StartingNodeOffset=-2</code> means go to up two levels from the current node (to its \"grandparent\"), and display all the children of the \"grandparent\".</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12986000,"title":"I Develop MVC 3.0 web application How to hosting panel setting?","body":"<p>I am Develop MCV 3.0 Web application and Host to server and Hosting panel setting is Entity Frame work 4.0 that time show the error<br>\n                              \n                                             <br>\nwhat can i do?</p>\n"},{"tags":["asp.net-mvc-3","jquery-ajax","html-helper"],"answer_count":4,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":1665,"score":6,"question_id":7414351,"title":"MVC 3 - Html.EditorFor seems to cache old values after $.ajax call","body":"<p>This is a follow on from the following question:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/7404334/mvc-3-ajax-response-seems-to-be-caching-output-from-partial-view\">MVC 3 + $.ajax - response seems to be caching output from partial view</a></p>\n\n<p>There is a detailed description of the problem over there.  However, I have now managed to narrow down the problem, that seems to be with the Html.EditorFor helpers, hence the new question.</p>\n\n<p>The issue:</p>\n\n<p>I post data to the server using $.ajax, then return the html of the partial view that holds the input controls.  The problem is that, despite passing a newly created object to the Partial Views model, the various @Html.EditorFor and @Html.DropDownListFor helpers return the OLD DATA!.</p>\n\n<p>I can prove that the model has correctly passed in a new object to the helpers, by printing the value out beside the Html helper.  Ie:</p>\n\n<pre><code>@Html.EditorFor(model =&gt; model.Transaction.TransactionDate) \n@Model.Transaction.TransactionDate.ToString()\n</code></pre>\n\n<p>As the following image shows, the @Html.EditorFor is returning the wrong data:</p>\n\n<p><img src=\"http://i.stack.imgur.com/L53qi.jpg\" alt=\"Cached response...\"></p>\n\n<p>[Note that the value beside the Comentario text box is a date time, because I was testing replacing the default values with a value that would change with each post, ie, a DateTime.]</p>\n\n<p>If I replace the @Html.EditorFor for TransactionDate with a plain old @Html.TextBox():</p>\n\n<pre><code>@Html.TextBox(\"Transaction_TransactionDate\", Model.Transaction.TransactionDate)\n</code></pre>\n\n<p>Then it renders the correct TransactionDate value for a new Transaction object, ie, DateTime.MinValue (01/01/0001...).</p>\n\n<p>Therefore...</p>\n\n<p>The problem is with the @Html.EditorFor helpers.  The problem also happens with TextBoxFor and DropDownListFor.</p>\n\n<p><strong>The problem being that these helpers seem to cache the old value.</strong></p>\n\n<p>What am I doing wrong??!</p>\n\n<h2>EDIT:</h2>\n\n<p>I have just tried debugging in the custom Editor template for dates, and in there, ViewData.TemplateInfo.FormattedModelValue shows the correct value, ie, \"01/01/0001\".  However, once it gets to Fiddler, the response is showing the old date, eg, \"01/09/2011\" in the image above.</p>\n\n<p>As a result, I just think that there is some caching going on here, but I have none set up, so nothing makes any sense.</p>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-ui","jquery-ajax"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2938,"score":0,"question_id":7036598,"title":"Creating a ajax login dialog box with MVC 3 and jQueryUI","body":"<p>I'm using Asp.Net MVC 3 (with Razor) and jQuery/jQueryUI to create a dialog login box.\nI'm still quite new to these technologies and have run into a problem.</p>\n\n<p>The login form is in a partial view, I use the following jQuery code to load it into the page:</p>\n\n<pre><code> $('#log-in').click(function () {\n        if (ServerModel.UserId == 0) {//User not logged in, open login dialog\n            $(\"&lt;div&gt;&lt;/div&gt;\")\n            .addClass(\"dialog\")\n            .addClass(\"form-dialog\")\n            .attr(\"id\", \"login-dialog\")\n            .appendTo(\"body\")\n            .dialog({\n                title: 'LOGIN',\n                close: function () { $(this).remove() },\n                modal: true,\n                width: 323,\n                resizable: false\n            })\n            .load(ActionUrls.LogOn);\n        }\n    });\n</code></pre>\n\n<p>ActionUrls.LogOn, has the path for the Logon action method in the controller.</p>\n\n<p>The partial view with the login form looks along these lines:</p>\n\n<pre><code>    @using (Ajax.BeginForm(new AjaxOptions { HttpMethod = \"POST\", UpdateTargetId = \"login-dialog\" }))\n{    \n    //Login form fileds in here with submit button at the end\n}\n</code></pre>\n\n<p>Here's the code for the controller:</p>\n\n<pre><code>[HttpGet]\n    public ActionResult LogOn()\n    {\n       return PartialView(\"_Logon\");\n    }\n\n    [HttpPost]\n    public ActionResult LogOn(LogOnModel model)\n    {\n        if (ModelState.IsValid)\n        {\n            CustomSqlMembershipProvider provider = new CustomSqlMembershipProvider();\n\n            if (provider.ValidateUser(model.UserName, Security.ComputeHash(model.Password)))\n            {\n                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);\n                return RedirectToAction(\"Index\", \"Home\");                    \n            }\n            else\n            {\n                ModelState.AddModelError(\"\", \"The user name or password provided is incorrect.\");\n            }\n        }\n\n        // something failed, redisplay partial view with the model\n        return PartialView(\"_Logon\", model);\n    }\n</code></pre>\n\n<p>This all works fine, however the problem I'm having, is that when the user is authenticated, as can be seen in the controller code. I try to RedirectToAction(\"Index\", \"Home\"), this with the intent that the page should reload with the user logged in and the dialog closed.</p>\n\n<p>However at the moment, just the login dialog box reloads with the whole page content in it. I understand that this is probably normal behavior, as I'm telling the form in the logon view to update the UpdateTargetId of the dialog box.</p>\n\n<p>So the question is, can I reach my desired result of the whole page reloading and if so, how??</p>\n\n<p>Any help and hints would be most appreciated.</p>\n\n<p>/Ola</p>\n"},{"tags":["c#","asp.net-mvc-3","debugging","razor","visual-studio-debugging"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":11489234,"title":"Get current generated html while debugging mvc3 view","body":"<p>While stepping through the generation of a View.  Is there a way to see the HTML that has been generated to that point?  I've tried looking through the locals variable list, but am having trouble finding it.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","mobile","redirecttoaction"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1120,"score":1,"question_id":7113430,"title":"Redirecting to mobile page in Asp.Net MVC 3","body":"<p>I'm trying to use a different login page for an Asp.Net MVC application that is modified to fit mobile devices, primarily iPhone/Android. All I basically need is to modify the login view, because the actual content is in a particular part of the application, I'm not trying to make a mobile version of the entire site.</p>\n\n<p>So I tried to follow this: <a href=\"http://www.asp.net/learn/whitepapers/add-mobile-pages-to-your-aspnet-web-forms-mvc-application\" rel=\"nofollow\">http://www.asp.net/learn/whitepapers/add-mobile-pages-to-your-aspnet-web-forms-mvc-application</a></p>\n\n<p>But I don't know the authentication well enough to know exactly how to do the logon action methods for the mobile version. I feel like I'm probably missing a specific mobile post action,and I don't understand what to do with the url passed in the redirect. Here's what I've got so far:</p>\n\n<pre><code>public ActionResult LogOn()\n        {\n            string returnUrl = Request.QueryString[\"ReturnUrl\"];\n            if ((returnUrl != null) &amp;&amp; returnUrl.StartsWith(\"/Mobile/\",\n                                       StringComparison.OrdinalIgnoreCase))\n            {\n                return RedirectToAction(\"LogOnMobile\", \"Account\",\n                                        new { ReturnUrl = returnUrl });\n            }\n            return View();\n        }\n\n        public ActionResult LogOnMobile(string returnurl)\n        {\n            return View();\n\n        }\n\n\n\n        [HttpPost]\n        public ActionResult LogOn(LogOnModel model, string returnUrl)\n        {\n            if (ModelState.IsValid)\n            {\n                if (MembershipService.ValidateUser(model.UserName, model.Password))\n                {\n                    FormsService.SignIn(model.UserName, model.RememberMe);\n                    if (Url.IsLocalUrl(returnUrl))\n                    {\n                        return Redirect(returnUrl);\n                    }\n                    else\n                    {\n                        return RedirectToAction(\"Index\", \"Home\");\n                    }\n                }\n                else\n                {\n                    ModelState.AddModelError(\"\", \"The user name or password provided is incorrect.\");\n                }\n            }\n\n            // If we got this far, something failed, redisplay form\n            return View(model);\n        }\n</code></pre>\n\n<p>And this doesn't work. I get to the mobile login page (or actually so far I've just tried out that the action method works by commenting out the if clause), but when I try to login I just get to the same page again, but strangely without the fields...</p>\n\n<p>What do I need to do to get this to work?</p>\n"},{"tags":["asp.net-mvc-3","architecture","controller","repository","inversion-of-control"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":364,"score":2,"question_id":7080539,"title":"MVC 3: Injecting multiple repositories into a single controller","body":"<p>My presentation layer is in MVC 3. </p>\n\n<p>I have a data access layer which returns repositories. Each repository is mapped to a single table. </p>\n\n<p>For example, I have the following repository interfaces: </p>\n\n<ul>\n<li>ICustomerRepository</li>\n<li>ICustomerTypeRepository</li>\n</ul>\n\n<p>I have Entity Framework implementations of these repositories. These implementations get injected at a runtime with Ninject. </p>\n\n<p>I have two controllers:</p>\n\n<ul>\n<li>CustomerController</li>\n<li>CustomerTypeController</li>\n</ul>\n\n<p>Each controller has a set of CRUD routines. Customer must have a type. </p>\n\n<p>In order to create a customer record, I need to use EFCustomerTypeRepository. </p>\n\n<p>I now have a constructor within a CustomerController which looks this:</p>\n\n<pre><code>public class CustomerController: Controller\n{\n   private ICustomerRepository customerRepository;        \n   private ICustomerTypeRepository customerTypeRepository; \n\n   public CustomerController(ICustomerRepository customerRepository, \n                             ICustomerTypeRepository customerTypeRepository)\n   {\n      this.customerRepository = customerRepository;            \n      this.customerTypeRepository = customerTypeRepository;\n   }     \n\n...\n</code></pre>\n\n<p>Development is in early phase, and if I take this approach, then within next few days this constructor will have 5 or more parameters. This doesn't look right.</p>\n\n<p>I could store all this logic in EFCustomerRepository, however, this will break single responsibility principle. So I'm not going to do that. </p>\n\n<p>Finally, I can wrap these repositories and pass a single RepositoryWrapper type object to my controller. </p>\n\n<p>I don't want to introcude any more frameworks, tools than I have to. I'm aiming to achieve loose coupling and easy extensibility, but currently I'm stuck between passing more parameters to a constructor, or writing a wrapper for repositories. </p>\n\n<p>I'm using MVC 3, EF 4.1, Ninject, Moq and Automapper. Thank you</p>\n"},{"tags":["ajax","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12983659,"title":"ASP.NET MVC 3 Ajax.BeginForm() cannot find the Controller Action when in Views/Shared Folder?","body":"<p>Anyone know what's the deal here?  If I put an Ajax.BeginForm into a cshtml file in the </p>\n\n<h2>Views/Shared folder</h2>\n\n<p>it does not work:</p>\n\n<pre><code> @using (Ajax.BeginForm(\"TestAction\", \"Test\", new AjaxOptions\n {\n     HttpMethod = \"Post\"\n }\n , new { id = \"submitTestForm\" })) {}\n</code></pre>\n\n<p>but a regular Html.BeginForm does:</p>\n\n<pre><code>@using (Html.BeginForm(\"TestAction\",\"Test\",FormMethod.Post,new {id=\"submitTestForm\"})) {}\n</code></pre>\n\n<p>But if I move it up under the </p>\n\n<h2>Views/Test folder (the controller in this case would be TestController)</h2>\n\n<p>It works fine. </p>\n\n<p>Is this a bug? Or am I doing something wrong here?</p>\n"},{"tags":["asp.net-mvc-3","performance","linq-to-sql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12973604,"title":"Using LINQ-to-SQL containers","body":"<p>I'm using MVC3 and currently i'm following a practice such that I declare one instance of DB Container for every controller. I use that container instance for every request coming to that controller. If I need to go to my models for a query or sth, I send that instance as a parameter to the model's function. So for the whole application, I create and use 4-5 different instances of DB Container class. My question is, does this have a good or bad effect on my database operations? Does it matter to create a seperate container instance? What is the proper way to use container classes?</p>\n\n<p>I believe the mentioned class was called DBContext before.</p>\n"},{"tags":[".net","asp.net-mvc-3","firefox","iis"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12981484,"title":"Firefox is not reading IIS Virtual Paths properly","body":"<p>In our current project we have two virtual paths set up, one for images and one for file uploads. The virtual paths pull the images and files from a separate server. I am currently working with cross-browser compatibility and Firefox seems to be reading the virtual paths differently than all other browsers. It seems like its not be rendering the URL properly. They work fine in Chrome, Safari, and in IE 7/8/9. </p>\n\n<p>Currently using IIS 7</p>\n\n<p><strong>Final Result:</strong></p>\n\n<p>In this case, the user can see a list of all disclosure PDFs that they have uploaded. The user can then click on one of the file names and the PDF will open up in a new tab / window. </p>\n\n<p>In IE, Chrome, and Safari the path looks like this (Correct):</p>\n\n<p><code>http://localhost:1798/disclosures/bf1bb8bf-ef34-4c93-a4c3-540bab158644.pdf</code></p>\n\n<p>However, in Firefox it looks like this:</p>\n\n<p><code>http://localhost:1798/Disclosure\\disclosures\\bf1bb8bf-ef34-4c93-a4c3-540bab158644.pdf</code></p>\n\n<p>This is the URL of the current page:</p>\n\n<p><code>http://localhost:1798/Disclosure/Disclosures?lenderProductID=19&amp;lenderID=64</code></p>\n\n<p>Why does it look like it is trying to combine the current URL with the virtual path? When I do click on one of the PDF links it opens a new tab / window but it reroutes me back to the index page. </p>\n\n<p>Im not the best with IIS so any help would greatly be appreciated! Thank you in advance.</p>\n"},{"tags":["asp.net-mvc-3","backbone.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12980985,"title":"Backbone.js + MVC3. Nested collection doesn't get populated","body":"<p>I have a backbone collection on the client.\nModel of the collection has some properties along with another collection</p>\n\n<p>When I do <code>fetch()</code> my action method on the server returns some data, collection gets populated, all the properties too, except that nested collection. </p>\n\n<p>What could be the reason?</p>\n\n<pre><code>var Job = Backbone.Model.extend();\nvar Jobs = Backbone.Collection.extend({model: Job})\n\nvar Foo = Backbone.Model.extend({ \n    initialize:function(){\n      this.jobs = new Jobs();\n}})\nvar FooCollection = Backbone.Collection.extend({model: Foo})\n\nvar fooCol = new FooCollection()\nfooCol.fetch();\n\nfooCol.first().get('name') // =&gt; returns name\nfooCol.first().jobs.toJSON() // returns nothing\n// although this will\nfooCol.first().get('jobs') //it will return an array\n</code></pre>\n\n<p>So somehow nested Backbone collection becomes just a regular property (Array)</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","linq","entity"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12981979,"title":"Creating HiddenFor IEnumerable<String> in View","body":"<p>I have a Property that is an IEnumerable</p>\n\n<pre><code>public IEnumerable&lt;string&gt; ChangesOthersResult { get; set; }\n</code></pre>\n\n<p>I need to collect all values from ChangesOthersResult and post from a view back to the controller.  How can I loop through the Ienumerable and create hidden fields that will bind back to the ViewModel in the controller?</p>\n\n<pre><code>foreach(var item in Model.ChangesOthersResult)\n   {\n       @Html.HiddenFor(x =&gt; x.ChangesOthersResult);\n   }\n</code></pre>\n\n<p>Is giving me the Raw SQL statement as text.  </p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":538,"score":0,"question_id":10597762,"title":"MVC3 WebGrid - @Url.Action using image button","body":"<p>I got a problem that actually I do not yet solved. For some reasons I had a request to replace the text used in Html.ActionLink with a more visual design using images as button inside a WebGrid for the usuale operations like modify, duplicate, publish and delete. \nReading I have tried many ways but none led me to the final stage: </p>\n\n<pre><code>@{\n    var grid = new WebGrid(Model, new List&lt;string&gt;(), canPage: true, rowsPerPage: 5);\n    grid.Pager(WebGridPagerModes.NextPrevious);\n        @grid.GetHtml(tableStyle: \"webGrid\",\n        htmlAttributes: new { id = \"DataTable\" },\n        headerStyle: \"header\",\n        alternatingRowStyle: \"alt\",\n        columns:\n        grid.Columns(\n        grid.Column(\"Description\", header: \"Description\"),\n        grid.Column(\"DateCreation\", header: \"Creation Date\"),\n        grid.Column(\"CompanyOwner\", header: \"Company\"),\n        grid.Column(\"Owner\", header: \"User\"),\n        grid.Column(\"Status\", header: \"Status\"),\n        grid.Column(\"Action\", header: \"Action\", \n                          format: (item) =&gt; @Url.Action(\"publish\", \n                                                        \"PublishItem\",  \n                                                        new { id = item.ID })))\n        );\n    } \n</code></pre>\n\n<p>To do that I start with a model created with a linq to entities where I added the column Action, the one that I want to use to place my buttons. How do I place the images to work as buttons as I done in a normal table: </p>\n\n<pre><code>&lt;a href=\"@Url.Action(\"PublishPill\", new { id = item.ID })\"&gt;\n&lt;img src=\"../../Images/world_32px.png\", alt=\"Edit\" title=\"Publish\" border=\"0\" /&gt;&lt;/a&gt;  \n</code></pre>\n"},{"tags":["c#","jquery","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":83,"score":2,"question_id":12981715,"title":"jQuery AutoComplete text not saving to db via create view using MVC3","body":"<p>This is my first post so please go easy on me fellas.  I am trying to implement a create form that utilizes jquery autocomplete.  The create form allows users to enter data that will be saved to my database, via a submit button.  Here is my code:</p>\n\n<p>Controller</p>\n\n<pre><code>    // GET: /Inspection1/Create\n    public ActionResult Create()\n    {\n        InspectionInfo model = new InspectionInfo\n        {\n            Submitted = DateTime.Now,\n            Contact = new Contact()\n        };\n\n        ViewBag.CountyName = new SelectList(db.Counties, \"CountyName\", \"CountyName\");\n\n\n        return View(model);\n    }\n\n    //\n    // POST: /Inspection1/Create\n\n    [HttpPost]\n    public ActionResult Create(InspectionInfo inspectioninfo)\n    {\n            if (ModelState.IsValid)\n        {\n            db.InspectionInfos.Add(inspectioninfo);\n            db.SaveChanges();\n            return RedirectToAction(\"Index\");\n        }\n\n        return View(inspectioninfo);\n    }\n\n    // this allows for autocompletion behavior\n    public ActionResult QuickSearchContact(string term)\n    {\n        var contacts = db.Contacts\n                        .Where(r =&gt; r.ContactName.Contains(term))\n                        .Take(10)\n                        .Select(r =&gt; new { label = r.ContactName });\n        return Json(contacts, JsonRequestBehavior.AllowGet);\n\n    }\n</code></pre>\n\n<p>Models</p>\n\n<pre><code>  public class InspectionInfo\n  {\n    [Key]\n    public int InspectionId { get; set; }\n\n    [DataType(DataType.Date)]\n    public virtual DateTime Submitted { get; set; }\n    [DataType(DataType.MultilineText)]\n    [MaxLength(1000)]\n    public string Comments { get; set; }\n\n    [Required]\n    public Contact Contact { get; set; }\n\n\n public class Contact\n {\n    [Key]\n    public string ContactName { get; set; }\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Contact)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        &lt;input type =\"text\" name =\"q\" data-autocomplete=  \n       \"@Url.Action(\"QuickSearchContact\", \"Inspection\")\"/&gt; \n        @Html.ValidationMessageFor(model =&gt; model.Contact.ContactName)\n    &lt;/div&gt;\n</code></pre>\n\n<p>JS</p>\n\n<pre><code>$(document).ready(function () {\n\n  $(\":input[data-autocomplete]\").each(function () {\n\n  $(this).autocomplete({ source: $(this).attr(\"data-autocomplete\")});\n  });\n</code></pre>\n\n<p>The autocomplete function seems to be working fine.  It will pull column data from the database as I require.  However, any data entered in the autocomplete text box, appears NULL in the database after the user has saved the form. Help here would be greatly appreciated. </p>\n"},{"tags":["asp.net-mvc-3","devexpress"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":192,"score":0,"question_id":10497979,"title":"Save Grid Layout Data","body":"<p>I have this in grid settings:</p>\n\n<pre><code>    var gridLayoutRepository = new GridLayoutRepository();\n\n    settings.ClientLayout = (s, e) =&gt;\n    {\n        Debug.Write(e.LayoutData);\n\n        if (e.LayoutMode == ClientLayoutMode.Loading)\n        {\n            e.LayoutData = gridLayoutRepository.Load();\n        }\n        else\n        {\n            gridLayoutRepository.Save(e.LayoutData);\n        }\n    };\n</code></pre>\n\n<p>I want to have one button for saving gridstate in database and one button for resetting it. Can you help me?</p>\n"},{"tags":["c#","asp.net-mvc-3","localization"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12981016,"title":"resx localization in mvc 3","body":"<p>I have three resource files in App_GlobalResources for a view:</p>\n\n<pre><code>ConditionsLabels.en.resx\nConditionsLabels.ua.resx\nConditionsLabels.ru.resx\n</code></pre>\n\n<p>But I can't get any value. \nI specified custom namespaces (ViewRes), but in the view autocomplete suggests the only variant <code>@ViewRes.ConditionsLabels_ua</code>. (it's class)</p>\n\n<p>How can I use that?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":262,"score":1,"question_id":9009132,"title":"MVC3 areas, routing and urls","body":"<p>Having absorbed myself in MVC over the last 9 months or so, the one area I seem to be struggling with are Areas and Routing.</p>\n\n<p>A couple of questions if anyone may help:</p>\n\n<p>1.) Can an MVC3 application and it's associated areas have different Urls?</p>\n\n<p>Example:</p>\n\n<ul>\n<li>Main app (root) = www.mymvcapp.com </li>\n<li>Mobile app (area) = m.mymvcapp.com</li>\n<li>Admin app (area) = admin.mymvcapp.com</li>\n<li>CustomerService (area) = custsvc.mymvcapp.com</li>\n</ul>\n\n<p>etc, etc, etc...</p>\n\n<p>Any tips or solutions greatly appreciated in advance. It just seems that a lot of the books out there on MVC trend to just glaze over Areas and Routing in general.</p>\n\n<p>Again, this is pretty specific to \"AREAS\" and routing.</p>\n\n<p>Thanks in advance.</p>\n\n<p><strong>EDIT 26 JAN 2012:</strong></p>\n\n<p>First thing was to get the actual area to work. I've never had any luck with this until I dove in late yesterday.</p>\n\n<p>I created a test MVC project (MvsAreas) with a \"Home\" controller and a single \"Index\" action method and view, so good so far.  :)</p>\n\n<p>Added an area called \"Admin\", added a controller called \"HomeController\" and added a single \"Index\" action method and view.</p>\n\n<p>Because I have two home controllers, you will get a run time error. Resolution: use namespaces and then use the overloaded MapRoute method to pass in the namespace.</p>\n\n<p>Root application controller:</p>\n\n<pre><code>Namespace MvcAreas.Web.Mvc.Controllers\n\n    Public Class HomeController\n        Inherits Controller\n\n        Function Index() As ActionResult\n\n            Return View()\n\n        End Function\n\n    End Class\n\nEnd Namespace\n</code></pre>\n\n<p>Admin area controller:</p>\n\n<pre><code>Namespace MvcAreas.Areas.Admin.Controllers\n\n    Public Class HomeController\n        Inherits Controller\n\n        Function Index() As ActionResult\n\n            Return View()\n\n        End Function\n\n    End Class\n\nEnd Namespace\n</code></pre>\n\n<p><strong>Global.asax</strong></p>\n\n<pre><code>Namespace MvcAreas.Web.Mvc\n\n    Public Class MvcApplication\n        Inherits HttpApplication\n\n        Shared Sub RegisterGlobalFilters(ByVal filters As GlobalFilterCollection)\n\n            filters.Add(New HandleErrorAttribute())\n\n        End Sub\n\n        Shared Sub RegisterRoutes(ByVal routes As RouteCollection)\n\n            routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\")\n\n            routes.MapRoute(\n                \"Root_Default\",\n                \"{controller}/{action}/{id}\",\n                New With {.controller = \"Home\", .action = \"Index\", .id = UrlParameter.Optional},\n                New String() {\"MvcAreas.Web.Mvc.Controllers\"}\n            )\n\n        End Sub\n\n        Sub Application_Start()\n\n            AreaRegistration.RegisterAllAreas()\n\n            RegisterGlobalFilters(GlobalFilters.Filters)\n            RegisterRoutes(RouteTable.Routes)\n\n        End Sub\n\n    End Class\n\nEnd Namespace\n</code></pre>\n\n<p><strong>AdminAreaRegistration.vb</strong></p>\n\n<pre><code>Namespace MvcAreas.Areas.Admin\n\n    Public Class AdminAreaRegistration\n        Inherits AreaRegistration\n\n        Public Overrides ReadOnly Property AreaName() As String\n            Get\n                Return \"Admin\"\n            End Get\n        End Property\n\n        Public Overrides Sub RegisterArea(ByVal context As System.Web.Mvc.AreaRegistrationContext)\n\n            context.MapRoute(\n                \"Admin_default\",\n                \"Admin/{controller}/{action}/{id}\",\n                New With {.controller = \"Home\", .action = \"Index\", .id = UrlParameter.Optional},\n                New String() {\"MvcAreas.Areas.Admin.Controllers\"}\n            )\n\n        End Sub\n\n    End Class\n\nEnd Namespace\n</code></pre>\n\n<p>That will get the area and the root working.</p>\n\n<p>Next step; attempt to use some of the reference link below to set up Urls.</p>\n\n<p>If anyone has any suggestions, please feel free to add.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","razor","entity-framework-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12978693,"title":"using a ViewModel giving null exception error","body":"<p>I am using this view model:</p>\n\n<pre><code>public class CaseComplaintsViewModel\n{\n    public int CasesID { get; set; }\n    public int CaseComplaintID { get; set; }\n    public string ComplaintCode { get; set; }\n    public string ComplaintType { get; set; }\n}\n</code></pre>\n\n<p>This is the view that uses the view model.</p>\n\n<pre><code>@model IEnumerable&lt;cummins_db.ViewModels.CaseComplaintsViewModel&gt;\n\n&lt;table width=\"100%\"&gt;\n    &lt;tr&gt;\n        &lt;th&gt;&lt;/th&gt;\n        &lt;th&gt;&lt;/th&gt;\n        &lt;th&gt;Complaint Code&lt;/th&gt;\n        &lt;th&gt;Complaint Description&lt;/th&gt;\n        &lt;th&gt;Delete&lt;/th&gt;\n    &lt;/tr&gt;  \n    @foreach (var item in Model)\n    {\n        &lt;tr&gt;\n            &lt;td&gt;\n                @Html.HiddenFor(modelItem =&gt; item.CasesID )    \n            &lt;/td&gt;\n            &lt;td&gt;\n                @Html.HiddenFor(modelItem =&gt; item.CaseComplaintID )    \n            &lt;/td&gt;\n            &lt;td&gt;\n                @Html.DisplayFor(modelItem =&gt; item.ComplaintCode )    \n            &lt;/td&gt;\n            &lt;td&gt;\n                @Html.DisplayFor(modelItem =&gt; item.ComplaintType)\n            &lt;/td&gt;\n            &lt;td&gt;\n                @Ajax.ActionLink(\"Delete\", \"RemoveCodeFromCase\", \"Cases\", new {    caseid           item.CasesID, id = item.CaseComplaintID }, null)\n            &lt;/td&gt;        \n        &lt;/tr&gt;\n    }\n&lt;/table&gt;\n</code></pre>\n\n<p>This is my controller action that returns this partial view to the main view:</p>\n\n<pre><code>public ActionResult SelectForCase(int caseid, int compid)\n{\n    if (ModelState.IsValid)\n    {\n        CaseComplaint c = new CaseComplaint\n        {\n            CasesID = caseid,\n            ComplaintCodeID = compid\n        };\n        db.CaseComplaints.Add(c);\n        db.SaveChanges();\n\n        var data = (from C in db.CaseComplaints\n                    where C.CasesID == caseid\n                    select C).ToList().Select( x =&gt; new CaseComplaintsViewModel()\n                    {\n                        CasesID = x.CasesID,\n                        CaseComplaintID = x.ComplaintCodeID,\n                        ComplaintCode = x.ComplaintCode.ComplaintCodeName,\n                        ComplaintType = x.ComplaintCode.ComplaintType\n                    }).ToList();\n\n        return PartialView(\"_CaseComplaintCodes\", data);\n    }\n\n    return PartialView(\"_CaseComplaintCodes\");\n}\n</code></pre>\n\n<p>After the <code>db.SaveChanges</code> when I try to load the ViewModel I get a null exception on the line <code>ComplaintCode = x.ComplaintCode.ComplaintCodeName</code></p>\n\n<p>This view model is intended to return a view of <code>CaseComplaints</code> and the ComplaintCode models.</p>\n\n<p>Breakpoints in the code show the <code>ComplaintCode</code> is not loaded. I know I am missing something but not sure what.</p>\n\n<p>Thanks</p>\n\n<p><em><strong></em>**<em>*</em>***</strong><em>EDIT</em><strong><em>*</em>**<em>*</em>**<em>*</em>*</strong>\nThis is my case model</p>\n\n<pre><code>public class Cases\n    {\n    //case data model for call center\n    //implement lists for all related child tables too\n\n    [Key]\n    public int CasesID { get; set; }\n\n    public string CaseNumber { get; set; }\n\n    [Required(ErrorMessage = \"Customer is Required\")]\n    public int CustomerID { get; set; }\n    public virtual Customer Customer { get; set; }\n\n    [MaxLength(50)]\n    public string UserName { get; set; }  //get user name from the aspnet membership\n\n    [Required(ErrorMessage = \"Case Category is Required\")]\n    public int CaseCategoryID { get; set; }\n\n    public int TechnicianID { get; set; }\n    public virtual Technician Technicians { get; set; }\n\n    [Required(ErrorMessage = \"Engine Model is Required\")]\n    public int EngineModelID { get; set; }\n    public virtual EngineModel EngineModel { get; set; }\n\n    [MaxLength(50)]\n    public string BMSWorkorder { get; set; }\n\n    [MaxLength(50)]\n    [Required(ErrorMessage = \"Status is Required\")]\n    public string CaseStatus { get; set; }\n\n    [MaxLength(50)]\n    public string OpenedBy { get; set; }\n\n    [Required(ErrorMessage = \"Opened Date is Required\")]\n    [DataType(DataType.DateTime)]\n    public DateTime? OpenedDate { get; set; }\n\n    [MaxLength(50)]\n    public string ClosedBy { get; set; }\n\n    [DataType(DataType.DateTime)]\n    public DateTime? ClosedDate { get; set; }\n\n    [MaxLength(50)]\n    [Required(ErrorMessage=\"Caller First Name is Required\")]\n    public string CallerFirstName { get; set; }\n\n    [MaxLength(50)]\n    [Required(ErrorMessage = \"Caller Last Name is Required\")]\n    public string CallerLastName { get; set; }\n\n    [MaxLength(100)]\n    public string AdditionalContact { get; set; }\n\n    [MaxLength(10)]\n    [Required(ErrorMessage = \"Qualified is Required\")]\n    public string Qualified { get; set; }\n\n    public string Description { get; set; }\n\n    [MaxLength(50)]\n    [Required(ErrorMessage = \"ESN is Required\")]\n    public string ESN { get; set; }\n\n    [MaxLength(50)]\n    [Required(ErrorMessage = \"Mileage is Required\")]\n    public string Mileage { get; set; }\n\n    [DataType(DataType.Date)]\n    public DateTime? DateInService { get; set; }\n\n    [MaxLength(50)]\n    public string ESTR { get; set; }\n\n    [MaxLength(50)]\n    public string EDS { get; set; }\n\n    [MaxLength(50)]\n    public string GensetSerialNumber { get; set; }\n\n    [MaxLength(50)]\n    public string GensetModelNumber { get; set; }\n\n    //child Case Notes records\n    public virtual ICollection&lt;CaseNotes&gt; CaseNotes { get; set; }\n\n    //child case attachment records\n    public virtual ICollection&lt;Attachment&gt; Attachments { get; set; }\n\n    //child case complaint records\n    public virtual ICollection&lt;CaseComplaint&gt; CaseComplaint { get; set; }\n\n    //tracking fields\n    public DateTime? CreatedOn { get; set; }\n    [MaxLength(50)]\n    public string CreatedBy { get; set; }\n    public DateTime? ModifiedOn { get; set; }\n    [MaxLength(50)]\n    public string ModifiedBy { get; set; }\n    }\n</code></pre>\n\n<p>This is my case complaint model</p>\n\n<pre><code>public class CaseComplaint\n    {\n    [Key]\n    public int CaseComplaintID { get; set; }\n    public int CasesID { get; set; }\n    public int ComplaintCodeID { get; set; }\n    public virtual Cases Cases { get; set; }\n    public virtual ComplaintCode ComplaintCode { get; set; }\n    }\n</code></pre>\n\n<p>this is my complaintcode model</p>\n\n<pre><code>public class ComplaintCode\n        {\n        public int ComplaintCodeID { get; set; }\n\n        [MaxLength(50)]\n        [Required(ErrorMessage=\"Complaint Code is required\")]\n        public string ComplaintCodeName { get; set; }\n\n        [MaxLength(50)]\n        [Required(ErrorMessage=\"Complaint Type is required\")]\n        public string ComplaintType { get; set; }\n\n        public virtual ICollection&lt;CaseComplaint&gt; CaseComplaint { get; set; }\n\n        }\n</code></pre>\n"},{"tags":["c#","html","asp.net-mvc-3","url","knockout.js"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":57,"score":4,"question_id":12978095,"title":"Alter URL parameter using C#, MVC 3 and KO","body":"<p>Here is my situation:</p>\n\n<p>I have a search page that pulls data from a database.  Each record shown has a key attached to it in order to pull data from the database for that record.  When a link to a document for a record is clicked, this key is added on to the URL using KO data-bind and control is passed to the corresponding MVC Controller.</p>\n\n<p>Here is my problem:</p>\n\n<p>That key is displayed in the URL.  I cannot allow that.  A user of this website is only allowed access to certain records.  It is unacceptable if the user is able to see any record simply by changing the last number or two of the key in the URL.  The best solution I've come up with so far is to use AES256 encryption to encrypt each key as the search results are processed, then decrypt after the encryption is passed to another controller.  This works great except when I get to the environment where HTTPS is used.  I get 400 errors.</p>\n\n<p>Am I over-thinking this?  Is there a way, using MVC and KO, to mask the key from the URL entirely?  Or should the encryption be allowed in the URL even when using HTTPS?</p>\n\n<p>Here are some examples for clarification:</p>\n\n<p>Without any changes to my code, here is how a URL would look:</p>\n\n<blockquote>\n  <p><a href=\"https://www.website.com/Controller/Method/1234\" rel=\"nofollow\">https://www.website.com/Controller/Method/1234</a></p>\n</blockquote>\n\n<p>Using encryption, I come up with something like this:</p>\n\n<blockquote>\n  <p><a href=\"https://www.website.com/Controller/Method/dshfiuij823o==\" rel=\"nofollow\">https://www.website.com/Controller/Method/dshfiuij823o==</a></p>\n</blockquote>\n\n<p>This would work fine as long as it works with HTTPS.</p>\n\n<p>One way or another, I need to scramble the key in the URL or get rid of it.  Or determine a way to not run a search with the key every time the controller is called. </p>\n\n<p>Thank you all for any help.</p>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework","asp.net-mvc-4","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12978053,"title":"Should I detach entity from EF context when exposed it through Web API","body":"<p>I am using EF5 code-first approach and I am just wondering should I detach entity from EF context when exposed it through the Web API?</p>\n\n<p>Let's say I have API action method</p>\n\n<pre><code>[HttpGet]\npublic HttpResponseMessage Get(int id)\n{\n    var user = _userRepository.GetById(id);\n\n    if (user != null)\n    {\n        // detach here???\n        _userRepository.Detach(user);\n\n        return Request.CreateResponse(HttpStatusCode.Found, user);\n    }\n\n    return Request.CreateErrorResponse(HttpStatusCode.NotFound, string.Format(\"No user with id={0} is found\", id));\n}\n</code></pre>\n\n<p>Actually what are the best practices for that? Should I create the projection of the entity and then exposed it?</p>\n"},{"tags":["asp.net-mvc-3","razor","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1281,"score":0,"question_id":11090424,"title":"MVC 4 - Passing view model from view page to jQuery popup and back again","body":"<p>I have a view that is bound to a view model. On that view I have a link that will popup a modal jquery dialog (using a partial view).</p>\n\n<p>What I need is to be able to pass the model to the model popup, update it, then pass it back to the view page.</p>\n\n<p>I have the modal popups loading with an action method in my controller (partial view). But struggling with passing the model to it.</p>\n\n<p>Any suggestions?</p>\n\n<p>Thanks so much in advance.</p>\n\n<p><strong>Script (on view page):</strong></p>\n\n<pre><code>// ZipLocator modal popup\n$(function () {\n    $('#ZipLocatorDialog').dialog({\n        autoOpen: false,\n        width: 400,\n        resizable: false,\n        draggable: false,\n        title: 'hi there',\n        modal: true,\n        show: { effect: 'blind' },\n        open: function (event, ui) {\n            // Load the ZipLocator action which will return the partial view _ZipLocator\n            $(this).load('@Url.Action(\"ZipLocator\", \"Shop\", New With { .area = \"Shop\"})');\n        },\n        buttons: {\n            \"Close\": function () {\n                $(this).dialog('close');\n            }\n        }\n    });\n\n    $('#ZipLocatorOpener').click(function () {\n        $('#ZipLocatorDialog').dialog('open');\n    });\n});\n</code></pre>\n\n<p><strong>Controller Action for partial view:</strong></p>\n\n<pre><code>&lt;HttpGet()&gt;\n    &lt;Compress()&gt;\n    Public Function ZipLocator(model As ShopModel) As ActionResult\n\n        Return PartialView(\"~/Areas/Shop/Views/Shared/Partials/Popups/_ZipLocator.vbhtml\", model)\n\n    End Function\n</code></pre>\n\n<p>As I said, the jQuery modal popup is working, I am just having a hard time passing my model to it.</p>\n\n<p>Step One is to pass the model TO the partial view (jQuery modal popup).\nStep Two is to pass the updated model back to the view after the dialog is dismissed.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","visual-studio-2010"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":640,"score":0,"question_id":11033669,"title":"Conflicting versions of ASP.NET Web Pages detected","body":"<p>I just moved from php to asp.net. I'm trying to deploy a very basic mvc 3 application to my hosting provider. After it deploys, I visit the website, and it displays: </p>\n\n<p><strong>Conflicting versions of ASP.NET Web Pages detected: specified version is \"1.0.0.0\", but the version in bin is \"2.0.0.0\". To continue, remove files from the application's bin directory or remove the version specification in web.config.</strong> </p>\n\n<p>I'm not sure where to look. Its the 'out of the box' mvc 3 application with no modification.  I tried to use this method, \"http://stackoverflow.com/questions/10896878/conflicting-versions-of-asp-net-web-pages-detected-specified-version-is-1-0-0\" but had no luck.</p>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["html","arrays","asp.net-mvc-3","option"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12901912,"title":"Array of integers as value for an option in a html select","body":"<p>i have a question about the <code>&lt;option&gt;</code> of a <code>&lt;select&gt;</code> tag in my mvc3 c# application.\nCan i pass an array of ints to an action using a <code>&lt;option&gt;</code> tag?\nI mean, something like this:</p>\n\n<pre><code>&lt;select name=\"status_filter\"&gt;\n   &lt;option value=\"1,2,3,4\"&gt;All&lt;/option&gt;\n   &lt;option value=\"2,3\"&gt;Some&lt;/option&gt;\n   &lt;option value=\"2\"&gt;One&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>and in my action method:</p>\n\n<pre><code>public ActionResult Filter(int[] status_filter)\n</code></pre>\n\n<p>Can be done?</p>\n\n<p>Thanks,\nGonzalo.</p>\n"},{"tags":["asp.net-mvc-3","azure","acs"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1210,"score":0,"question_id":7871960,"title":"AZURE ACS - Windows Live ID - How do I get the email and name of the authenticated user?","body":"<p>Here is the scenario:</p>\n\n<p>MVC 3 application runing in AZURE Dev enviroment\nAuthentication in AZURE ACS implemented the same way found here <a href=\"http://msdn.microsoft.com/en-us/library/hh127794.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/hh127794.aspx</a></p>\n\n<p>I am trying to get the users name, and email, but I can't find a way to configure the \"Claim Rule\", in a way that I would get a clear text value, instead I get a string that seems to be encrypted.\nSo can I configure the rule in a way that I get it in clear text? Or can I unencrypt the value returned?\nIs any of this possible or am I looking at the wrong thing here.</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc-3","linq","linq-to-entities","entity-framework-4.1"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12952590,"title":"Linq To Entities Exclude Related Data","body":"<p>I am building an ASP.Net MVC 3 Web application which uses Entity Framework 4.1. I also use the Unit of Work pattern with a Generic Repository. I have two Entities in my Model, <strong>Shift</strong> and <strong>ShiftDate</strong>. Please see the diagram below for their structure. The idea is, a <strong>Shift</strong> can have 1 or many <strong>ShiftDates</strong>, and a <strong>ShiftDate</strong> can belong to only one <strong>Shift</strong>.</p>\n\n<p><img src=\"http://i.stack.imgur.com/GwYce.png\" alt=\"enter image description here\"></p>\n\n<p>I wish to create a query which will return a List of all <strong>Shifts</strong> like so</p>\n\n<pre><code>public IList&lt;Shift&gt; GetShifts(int id)\n{\n   return _UoW.Shifts.Get(s =&gt; s.organisationID == id).OrderBy(s =&gt; s.startDate).ToList();\n}\n</code></pre>\n\n<p>Then in my Razor View, I wish to use a foreach loop and list the details of each Shift. One of these details is the total number of <strong>ShiftDates</strong> each <strong>Shift</strong> has. To do this I will do something like</p>\n\n<pre><code>foreach(var shiftDate in Model.Shifts)\n{\n    @Html.DisplayFor(modelItem =&gt; item.ShiftDates.Count)\n}\n</code></pre>\n\n<p>This works fine, however, I want the count to exclude <strong>ShiftDates</strong> whose shiftDateStatusID is set to 442. To do this I tried amending my Linq Query to this</p>\n\n<pre><code>return _UoW.Shifts.Get(s =&gt; s.organisationID == id &amp;&amp; s.ShiftDates.Any(sd =&gt; sd.shiftDateStatusID != 442))\n.OrderBy(s =&gt; s.startDate).ToList();\n</code></pre>\n\n<p>However, this still pulls back ShiftDates who have a shiftDateStatusID of 442.</p>\n\n<p>Hopefully this makes sense.</p>\n\n<p>Any feedback would be greatly appreciated.</p>\n\n<p>Thanks.</p>\n"},{"tags":["jquery","ajax","asp.net-mvc-3","mvc","telerik"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":688,"score":1,"question_id":9689876,"title":"MVC3 - Server validation with Telerik Modal Window using Ajax call","body":"<p><strong>SOLVED</strong></p>\n\n<p>I´m going to paste my code before I ask the question.</p>\n\n<p><strong>My script:</strong></p>\n\n<pre><code>    function showDialog(arg) {\n    var url = '/Home/ReserveRent/';\n    $.ajax({\n            type: \"GET\",\n            url: url,\n            data: { saleslineId: arg },\n            dataType: \"html\",\n            success: function(data) { $('#ModalPay' + arg).html(data); },\n            error: function() { alert(url + '  ' + arg); }\n        });\n    $(\"#Window\" + arg).data(\"tWindow\").center().open().refresh();\n}\n</code></pre>\n\n<p><strong>My Controller ActionResult GET and POST:</strong></p>\n\n<pre><code>        public ActionResult ReserveRent(int salesLineId)\n    {\n        if(User.Identity.IsAuthenticated)\n        {\n            var salesLine = _salesLineLogic.GetSalesLine(salesLineId);\n\n            if (!salesLine.IsAvailable)\n            {\n                ViewBag.AvailableSalesLine = @\"Þessi orlosfeign er því miður ekki lengur til leigu á þessu tímabili.\";\n                return RedirectToAction(\"Index\", \"Home\");\n            }\n\n            salesLine.IsAvailable = false;\n            _salesLineLogic.SaveToDatabase();\n\n            var payment = new Payment { FK_SalesLineID = salesLineId, EditedBy = \"PayRent.cshtml (GET)\", EditedOn = DateTime.Now };\n\n            return PartialView(new HomeFormViewModel(payment, salesLineId));\n        }\n        else\n        {\n            return RedirectToAction(\"LogOn\", \"Account\");\n        }\n    }\n\n    [HttpPost]\n    [Authorize]\n    public ActionResult ReserveRent(int salesLineId, Payment payment)\n    {\n        //removed a lot of code since it is not relevant to question\n\n        var cardValidation = new CreditCardAttribute();\n\n        if (cardValidation.IsValid(payment.VirtualCardnumber))\n        {\n            try\n            {\n                //removed a lot of code since it is not relevant to question\n                //here is success\n\n                return RedirectToAction(\"RentPaid\", \"Payment\", payment);\n            }\n            catch (_ErrorException e)\n            {\n                //Code removed, error handling\n            }\n        }\n        else\n        {\n            //Code removed\n            ModelState.AddModelError(\"\", @\"Kortanúmerið (\" + payment.VirtualCardnumber + @\") er ekki löglegt, vinsamlegast reynið aftur.\");\n            return PartialView(new HomeFormViewModel(payment, salesLineId));\n        }\n\n        return PartialView(new HomeFormViewModel(payment, salesLineId));\n    }\n</code></pre>\n\n<p><strong>My foreach loop within my Index page rendering Telerik Windows:</strong></p>\n\n<pre><code>&lt;div&gt;\n@foreach (ShowAvailability availability in Model.ShowAvailabilities)\n{\n    foreach (var salesLine in availability.SalesLinesForSale)\n    {\n        SalesLine line = salesLine;\n        string modalPay = \"ModalPay\" + line.SalesLineID;\n        Html.Telerik().Window()\n        .Name(\"Window\" + line.SalesLineID)\n        .Title(line.Unit.Name)\n        .Content(@&lt;text&gt;\n            @using (Html.BeginForm(\"ReserveRent\", \"Home\", new { salesLineId = line.SalesLineID }, FormMethod.Post, new { id = \"feedback-form\" }))\n            {\n\n                &lt;p class=\"note\"&gt;This is &lt;strong&gt;salesLine&lt;/strong&gt; @line.SalesLineID.&lt;/p&gt;\n\n                &lt;div style=\"@modalPay\"&gt;\n                    @{Html.RenderPartial(\"ReserveRent\", Model);}\n                &lt;/div&gt;\n                &lt;div class=\"form-actions\"&gt; &lt;button onclick=\"cancelModalRent('@line.SalesLineID')\" type=\"button\" class=\"t-button t-state-default\"&gt; Hætta við&lt;/button&gt; \n            &lt;button type=\"submit\" class=\"t-button t-state-default\"&gt; Bóka&lt;/button&gt;                         \n            &lt;button type=\"button\" onclick=\"showDialog('@line.SalesLineID')\" class=\"t-button t-state-default\"&gt;eeeeeee&lt;/button&gt;&lt;/div&gt;\n            }\n    &lt;/text&gt;)\n        .Buttons(b =&gt; b.Maximize())\n        .Width(500)\n        .Draggable(true)\n        .Modal(true)\n        .Visible(false)\n        .Render();\n    }\n}\n</code></pre>\n\n<p></p>\n\n<p><strong>My FormViewModel:</strong></p>\n\n<pre><code>    public class HomeFormViewModel\n    {\n    private readonly UnitLogic _unitLogic = new UnitLogic();\n\n    public ShowAvailability ShowAvailability            { get; private set; }\n    public List&lt;ShowAvailability&gt; ShowAvailabilities    { get; private set; } \n    public List&lt;Unit&gt; Units                             { get; private set; }\n    public List&lt;Unit&gt; Areas                             { get; private set; }\n    public List&lt;SelectListItem&gt; AreaSelectList          { get; private set; }\n    public Payment Payment                              { get; private set; }\n    public int SalesLineId                              { get; private set; }\n\n    public HomeFormViewModel(ShowAvailability showAvailability)\n    {\n        ShowAvailability = showAvailability;\n\n        Units = _unitLogic.GetAllUnits();\n    }\n\n    public HomeFormViewModel(List&lt;ShowAvailability&gt; showAvailabilities)\n    {\n        ShowAvailabilities = showAvailabilities;\n\n        Units = _unitLogic.GetAllUnits();\n\n        Areas = _unitLogic.GetAllAreas();\n\n        var selectListItems = new List&lt;SelectListItem&gt;\n                                  {\n                                      new SelectListItem\n                                          {\n                                              Selected = true,\n                                              Text = @\"Öll svæði\",\n                                              Value = \"0\"\n                                          }\n                                  };\n\n        selectListItems.AddRange(Areas.Select(unit =&gt; new SelectListItem\n                                                          {\n                                                              Selected = false,\n                                                              Text = unit.Name,\n                                                              Value = unit.UnitID.ToString()\n                                                          }));\n        AreaSelectList = selectListItems;\n    }\n\n    public HomeFormViewModel(Payment payment, int salesLineId)\n    {\n        SalesLineId = salesLineId;\n        Payment = payment;\n    }\n}\n</code></pre>\n\n<p><strong>My partial View (the one that should stay open when validation occur):</strong></p>\n\n<pre><code>@model AFLOrlofMVC3.Controllers.HomeFormViewModel\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n@{\n    string modalPay = \"ModalPay\" + Model.SalesLineId;\n}\n&lt;div&gt;\n@Html.ValidationSummary(true)\n&lt;div style=\"margin-top: 5px; margin-bottom: 3px;\"&gt;\n    @Html.LabelFor(model =&gt; model.Payment.PayerName)\n&lt;/div&gt;\n&lt;div&gt;\n    @Html.TextBoxFor(model =&gt; model.Payment.PayerName, new { style = \"width: 175px;\" })\n    @Html.ValidationMessageFor(model =&gt; model.Payment.PayerName)\n&lt;/div&gt;\n&lt;div style=\"margin-top: 5px; margin-bottom: 3px;\"&gt;\n    @Html.LabelFor(model =&gt; model.Payment.VirtualCardnumber)\n&lt;/div&gt;\n&lt;div&gt;\n    @Html.TextBoxFor(model =&gt; model.Payment.VirtualCardnumber, new { style = \"width: 125px;\" })\n    @Html.ValidationMessageFor(model =&gt; model.Payment.VirtualCardnumber)\n&lt;/div&gt;\n&lt;div style=\"margin-top: 5px; margin-bottom: 3px;\"&gt;\n    @Html.LabelFor(model =&gt; model.Payment.CVC)\n&lt;/div&gt;\n&lt;div&gt;\n    @Html.TextBoxFor(model =&gt; model.Payment.CVC, new { style = \"width: 50px;\" })\n    @Html.ValidationMessageFor(model =&gt; model.Payment.CVC)\n&lt;/div&gt;\n&lt;div style=\"margin-top: 5px; margin-bottom: 3px;\"&gt;\n    @Html.LabelFor(model =&gt; model.Payment.ExpirationDate)\n&lt;/div&gt;\n&lt;div&gt;\n    @Html.TextBoxFor(model =&gt; model.Payment.ExpirationDate, new { style = \"width: 50px;\" })\n    @Html.ValidationMessageFor(model =&gt; model.Payment.ExpirationDate)\n&lt;/div&gt;\n&lt;div style=\"margin-top: 5px; margin-bottom: 3px;\"&gt;\n    @Html.LabelFor(model =&gt; model.Payment.EditedOn)\n&lt;/div&gt;\n&lt;div&gt;\n    @Html.TextBoxFor(model =&gt; model.Payment.EditedOn, new { style = \"width: 50px;\" })\n    @Html.ValidationMessageFor(model =&gt; model.Payment.EditedOn)\n&lt;/div&gt;\n&lt;div style=\"margin-top: 5px; margin-bottom: 3px;\"&gt;\n    @Html.LabelFor(model =&gt; model.Payment.EditedBy)\n&lt;/div&gt;\n&lt;div&gt;\n    @Html.TextBoxFor(model =&gt; model.Payment.EditedBy, new { style = \"width: 50px;\" })\n    @Html.ValidationMessageFor(model =&gt; model.Payment.EditedBy)\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>Screenshots:  First picture is my dialog window, second picture what happens on submit</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/f0013.png\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/FjKU8.png\" alt=\"enter image description here\"></p>\n\n<p><strong>My question:</strong></p>\n\n<p>If I want to only refresh my dialog window with the result from my Ajax call, should I change the ajax call in any way for that to work or should I return something else than PartialView()?   I´m thinking mainly about the server side validation and the validationsummary should display the error.</p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12974290,"title":"DropDownListFor, setting ID for <option>","body":"<p>Is this even possible with MVC3?</p>\n\n<p>I want to filter two different dropdowns with same options, in a way that when in first an option is selected, in second dropdown that value should be hidden.</p>\n\n<pre><code> $('#ddl1').change(function() {\n    var selectedValue = $(this).val();\n    $('#ddl2 option').each(function() {\n        $(this).toggle($(this).val() !== selectedValue);\n    });\n});​\n</code></pre>\n\n<p><a href=\"http://jsfiddle.net/b4MjY/2/\" rel=\"nofollow\">http://jsfiddle.net/b4MjY/2/</a>  This all works well if all <code>values</code> are same.\n<em>But what I need is that it does the same thing when values are different. So it filters by <code>Text</code> or <code>ID</code> of option and not <code>value</code></em></p>\n\n<p>I'm just not sure if there's a way to assign anything on it through MVC, without changing or creating helpers.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Is it possible perhaps to get value from <code>innerHTML</code> from option and filter by that value?</p>\n\n<p><strong>UPDATE</strong>\nThanks for all who helped!</p>\n\n<p>This is what worked in the end as simplest possible solution.\n<a href=\"http://jsfiddle.net/b4MjY/23/\" rel=\"nofollow\">http://jsfiddle.net/b4MjY/23/</a></p>\n\n<p>Although all solutions listed are good in different occasions.</p>\n"},{"tags":["javascript","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12975042,"title":"Razor View Engine: Complex looping with JS","body":"<p>Hi I am wondering how do I add javascript if condition inside in nested foreach loop expamle:</p>\n\n<pre><code>function validation(){\n  @foreach (var region in Model.DefaultDeliver)\n  {\n  //js code\n  if(document.getElementByName('#@( region.Region.RegionName)') != null){ \n      foreach (var country in region.Region.Countries)\n       {    \n          //js code      \n          if(document.getElementByName('#@(region.Region.RegionName)') != null){\n\n           }\n        }\n      } \n  }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","image","razor"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":6445,"score":2,"question_id":5974262,"title":"How to display an dynamic image name with Razor","body":"<p>I'm rather new to MVC and have recently started a Asp.Net MVC3 project, using the Razor view engine.</p>\n\n<p>At the moment I'm having trouble with outputting an image name into an html img tag with Razor.</p>\n\n<p>Say I have a Car class in my model, with a string property called ModelName. I also have a folder with images of the car model, they are named after the car model so that I can by convention show the image of a specific model, by just using the name. </p>\n\n<p>From my controller I pass down a collection of Cars to my view and do the following to show a list of car model images:</p>\n\n<pre><code>@foreach (var item in Model) {\n&lt;img src='@item.ModelName.png' /&gt;\n}\n</code></pre>\n\n<p>However if I try to run this, I get the error:</p>\n\n<blockquote>\n  <p>Compiler Error Message: CS1061:\n  'string' does not contain a definition\n  for 'png' and no extension method\n  'png' accepting a first argument of\n  type 'string' could be found (are you\n  missing a using directive or an\n  assembly reference?)</p>\n</blockquote>\n\n<p>I also tried </p>\n\n<pre><code>    @foreach (var item in Model) {\n     &lt;img src='@{item.ModelName}.png' /&gt;\n    }\n</code></pre>\n\n<p>But that results in:</p>\n\n<blockquote>\n  <p>Compiler Error Message: CS1528: Expected ; or = (cannot specify constructor arguments in >declaration)\n  Source Error:</p>\n  \n  <p>Line 84:             #line default\n  Line 85:             #line hidden Line\n  86: WriteLiteral(\".png\\'\n  \">\\r\\n\"); Line 88:</p>\n</blockquote>\n\n<p>I can get around it by doing:</p>\n\n<pre><code>@foreach (var item in Model) {\n     string imageName = string.Format(\"{0}.png\", item.ModelName);\n     &lt;img src='@imageName' /&gt;\n    }\n</code></pre>\n\n<p>But that feels quite clunky, surely there must be a better way??</p>\n"},{"tags":["c#","asp.net-mvc-3","linq","forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":63,"score":-1,"question_id":12973649,"title":"Autocomplete field in a form ? []","body":"<p>I work with c# MVC3 &amp; razor, Entity Framework and Linq.</p>\n\n<p>I have a form, with two field, the first one <strong>Client ID</strong>  and the second one <strong>Store Name</strong>.\nI would like, when the user enter the ID, then my StoreName field fill automatically... The data would come from a database where this two data are stored.</p>\n"},{"tags":["jquery","css","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12973207,"title":"CSS tabular layout when using Html.DisplayForModel","body":"<p>I have an MVC3 view as follows:</p>\n\n<pre><code>&lt;div id=\"table\"&gt;\n    @Html.DisplayForModel()\n&lt;/div&gt;\n</code></pre>\n\n<p>which renders as follows:</p>\n\n<pre><code>&lt;div id=\"table\"&gt;\n    &lt;div class=\"display-label\"&gt;Label 1&lt;/div&gt;\n    &lt;div class=\"display-field\"&gt;Value 1&lt;/div&gt;\n    &lt;div class=\"display-label\"&gt;Label 2&lt;/div&gt;\n    &lt;div class=\"display-field\"&gt;Value 2&lt;/div&gt;\n    ... etc ...\n    &lt;div class=\"display-label\"&gt;Label n&lt;/div&gt;\n    &lt;div class=\"display-field\"&gt;Value n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Is there a pure CSS way of making this into a tabular layout - the equivalent of:</p>\n\n<pre><code>&lt;table&gt;\n    &lt;tr&gt;&lt;td&gt;Label 1&lt;/td&gt;&lt;td&gt;Value 1&lt;/td&gt;\n    &lt;tr&gt;&lt;td&gt;Label 2&lt;/td&gt;&lt;td&gt;Value 2&lt;/td&gt;\n    &lt;tr&gt;&lt;td&gt;Label 3&lt;/td&gt;&lt;td&gt;Value 3&lt;/td&gt;\n    &lt;tr&gt;&lt;td&gt;Label 4&lt;/td&gt;&lt;td&gt;Value 4&lt;/td&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Or failing that, a CSS + jQuery solution. For example, I could imagine there must be a way using jQuery to wrap each field/value pair in a div:</p>\n\n<pre><code>&lt;div&gt;\n    &lt;div class=\"display-label\"&gt;Label 1&lt;/div&gt;\n    &lt;div class=\"display-field\"&gt;Value 1&lt;/div&gt;\n&lt;/div&gt;\n&lt;div&gt;\n    &lt;div class=\"display-label\"&gt;Label 1&lt;/div&gt;\n    &lt;div class=\"display-field\"&gt;Value 1&lt;/div&gt;\n&lt;/div&gt;\n...\n</code></pre>\n\n<p>which can then be styled as a table:</p>\n\n<pre><code>#table\n{\n    display:table;\n}\n#table &gt; div\n{\n    display: table-row;\n}\n#table .display-label\n,#table .display-field\n{\n    display:table-cell;\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12970406,"title":"Specific parts of model for drop down list","body":"<p>This is what I'm trying to accomplish.</p>\n\n<p>Basically I have <code>Currency</code> model which contains <code>ID</code>,<code>Name</code>, <code>BuyValue</code>, <code>MidValue</code>, <code>SellValue</code>, and <code>DateCreated</code>.</p>\n\n<p>Now I want to use them in converter I've come up with. It has two drop down lists, where first ddl is <strong>From</strong> which currency is converted and second <strong>To</strong> which currency it is converter. Regular stuff.</p>\n\n<p>The first ddl should always contain <code>Name</code> as text in ddl and <code>BuyValue</code> as value, whereas second should always contain <code>Name</code> as text and <code>SellValue</code> as value. Something like this in simple HTML terms.</p>\n\n<pre><code>&lt;select id=\"ddlFirst\"&gt;\n    &lt;option value=\"BuyValue1\"&gt;Name1&lt;/option&gt;\n    &lt;option value=\"BuyValue2\"&gt;Name2&lt;/option&gt;\n    ...\n&lt;/select&gt;\n&lt;select id=\"ddlSecond\"&gt;\n    &lt;option value=\"SellValue1\"&gt;Name1&lt;/option&gt;\n    &lt;option value=\"SellValue2\"&gt;Name2&lt;/option&gt;\n    ...\n&lt;/select&gt;\n</code></pre>\n\n<p><em>Of course this isn't the code for it, it's just clarifying the explanation above.</em><br />\nI'm quite a beginner on this matter, and literally have no clue where to start. What gets me the most is should I somehow separate those values into different models and create a view model out of them or could I just use them somehow. To be honest I'm quite confused so any help is appreciated.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code>var currencies = db.Currencies.Where(c =&gt; c.DateCreated.Equals(today));\nvar list = currencies.Select(s =&gt; new { s.ID, s.Name, s.BuyValue, s.SellValue }).ToList();\n\nvar model = new ConverterViewModel\n{\n    FromValues = list.Select( x =&gt; new SelectListItem { Value = x.BuyValue.ToString(), Text =  x.Name}),\n    ToValues = list.Select(x =&gt; new SelectListItem { Value = x.SellValue.ToString(), Text = x.Name }),\n};\n</code></pre>\n\n<p>This comes up empty though. :( And I know it's not.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":131,"score":3,"question_id":12797487,"title":"Application_EndRequest triggered before request end?","body":"<p>I have some simple classes that need to be disposed a the end of the request.</p>\n\n<p>For that end I call the <code>Dispose</code> method on those objects from the <code>Application_EndRequest</code> event in <code>Global.asax</code>.</p>\n\n<p>This \"works fine on my machine\" but causes some problems on my production server where I get <code>Cannot access a disposed object.</code> This happens in some MVC helpers.</p>\n\n<p>It seemed to me like Application_EndRequest is triggered at the end of the request. Is this not the case? Is there another event I should be using to dispose my objects?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12970360,"title":"Advanced JTable list of data","body":"<p>I would like to create listbox in option \"add new record\" JTable and list of items in Jtable.  </p>\n\n<p>My model:</p>\n\n<pre><code>  namespace CRM.ViewModels.Administrator.Dictionary.OfferNewInformation\n    {\n        public class DictionaryNewInfoListModel : DictionaryListModel\n        {\n            public string Description { get; set; }\n            public bool IsActiveYN { get; set; }\n            public bool CPGroupType { get; set; }\n            public bool TCPGroupType { get; set; }\n            public bool CCGroupType { get; set; }\n            public bool HOGroupType { get; set; }\n            public bool TSGroupType { get; set; }\n            public int CityId { get; set; }\n            public List&lt;DictionaryNewInfoSupportList&gt; DeestynationName { get; set; }\n\n          //  public IList&lt;SelectListItem&gt; DestinationList { get; set; }\n\n        }\n    }\n</code></pre>\n\n<p>Important thing (this class have list Id and Name): </p>\n\n<pre><code>public List&lt;DictionaryNewInfoSupportList&gt; DeestynationName { get; set; }\n</code></pre>\n\n<p>Class</p>\n\n<pre><code>public class DictionaryNewInfoSupportList\n{\n    public int Id;\n    public string Name;\n}\n</code></pre>\n\n<p>In View I show example:</p>\n\n<pre><code>fields: {\n                    Id:\n                    {\n                        key: true,\n                        create: false,\n                        edit: false,\n                        list: false\n                    },\n                    Description: {\n                        title: 'Treść'\n\n                    }/*,\n                    DeestynationName: {\n                        title: 'Treść'\n\n                    }*/,\n                    CPGroupType: {\n                        title: \"CP\",\n                        edit: true,\n                        type: 'checkbox',\n                        values: { 'false': 'Nie', 'true': 'Tak' }\n                    },\n                    TCPGroupType: {\n                        title: \"TCP\",\n                        edit: true,\n                        type: 'checkbox',\n                        values: { 'false': 'Nie', 'true': 'Tak' }\n                    },\n                    CCGroupType: {\n                        title: \"CC\",\n                        edit: true,\n                        type: 'checkbox',\n                        values: { 'false': 'Nie', 'true': 'Tak' }\n                    },\n                    HOGroupType: {\n                        title: \"Centrala\",\n                        edit: true,\n                        type: 'checkbox',\n                        values: { 'false': 'Nie', 'true': 'Tak' }\n                    },\n                    TSGroupType: {\n                        title: \"Kasjer\",\n                        edit: true,\n                        type: 'checkbox',\n                        values: { 'false': 'Nie', 'true': 'Tak' }\n                    }\n</code></pre>\n\n<p>but as you can see I don`t know how declare DeestynationName.</p>\n\n<p>List of items(example - what I need)  </p>\n\n<pre><code>if(DeestynationName.id==model.id) show list of Name\n</code></pre>\n\n<p>In \"add new record\" I need listbox with elements which are in this list (example - what I need): </p>\n\n<pre><code>@Html.DropDownListFor(m =&gt; m.CurrentVoucher, new System.Web.Mvc.SelectList(Model.DictionaryNewInfoSupportList, \"Id\", \"Name\"), new { style = \"width:140px\" })\n</code></pre>\n"},{"tags":["asp.net-mvc-3","html.listboxfor"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":876,"score":1,"question_id":10028882,"title":"How to Populate ListBoxFor in Mvc3?","body":"<p>I have a list of type stored procedure which have an ID and a Name as data in it.\ni have property of int type in model and a list of same stored procedure.\nnow i want to bind this information into ListBoxFor</p>\n\n<p>in view i have written this </p>\n\n<pre><code>@Html.ListBoxFor(x =&gt; x.HobbyId, new MultiSelectList(Model.listHobby, \"pkHobbyId\", \"Hobby\"))\n</code></pre>\n\n<p>but i am getting an error</p>\n\n<blockquote>\n  <p>The parameter 'expression' must evaluate to an IEnumerable when multiple selection is allowed.</p>\n</blockquote>\n\n<p>Please Help how to bind.</p>\n"},{"tags":["asp.net-mvc-3","multi-select","viewbag","html.listboxfor"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":403,"score":2,"question_id":8659969,"title":"ViewBag oddity in creating a MultiSelectList","body":"<p>I have spent a lot of time scouring the various forums for help on MultiSelectLists in asp.net MVC3. Finally figured out how to solve my issue now I'm trying to cut down on my code and I've come across something weird with ViewBags. First the code, than I'll explain the behavior.</p>\n\n<p><strong>My function that creates the MultiSelectList to used by the Controller</strong></p>\n\n<pre><code>public MultiSelectList GetPermissionList(string[] selectedValues)\n        {\n\n            List&lt;SelectListItem&gt; permissions = new List&lt;SelectListItem&gt;()\n            {\n\n                new SelectListItem{ Value = \"\", Text = \"None\"},\n                new SelectListItem{ Value = \"View\", Text = \"View\"},\n                new SelectListItem{ Value = \"Add\", Text = \"Add\"},\n                new SelectListItem{ Value = \"Edit\", Text = \"Edit\"},\n                new SelectListItem{ Value = \"Delete\", Text = \"Delete\"}\n            };\n            return new MultiSelectList(permissions, \"Value\", \"Text\", selectedValues);\n        }\n</code></pre>\n\n<p><strong>partial code from the edit action from the controller</strong> </p>\n\n<pre><code>public ActionResult Edit(int id)\n        { \n            ViewBag.Title = \"Edit a Security Role\";\n            SecurityRoles securityroles = Repository.Details(id);\n\n\n            ViewBag.Orders = securityroles.Orders.Split(',');\n            ViewBag.OrdersListBox = GetPermissionList(ViewBag.Orders);\n\n            return View(securityroles); \n        }\n</code></pre>\n\n<p><strong>partial code from the View</strong></p>\n\n<pre><code>&lt;td class=\"rightAlign topAlign editor-label\"&gt;\n  @Html.MyLabel(m =&gt; m.Orders, \"lblOrders\")   \n&lt;/td&gt;\n&lt;td class=\"editor-field\"&gt;  \n  @Html.ListBoxFor(m =&gt; m.Orders, ViewBag.OrdersListBox as MultiSelectList, new { size = \"5\" }) \n&lt;/td&gt;\n</code></pre>\n\n<p>Keep in mind I've cut out a large chunk of code from the edit Action, I have roughly 9 list boxes I'm creating for this security role manager.</p>\n\n<p>My goal, in the edit action is to simply have 1 line of code, calling the <strong>GetPermissionList</strong> and having it return to the viewbag so I can just display that in the view, as opposed to the 2 lines per listbox that I currently have.</p>\n\n<p>Just looking at the code, it seems obvious if I were to make the call this way:</p>\n\n<blockquote>\n  <p>ViewBag.OrdersListBox = GetPermissionList(securityroles.Orders.Split(','));</p>\n</blockquote>\n\n<p>It should work, but the selected values do not come through. To compound the oddity, here is something else I tried and it worked fine, but it makes no sense why.</p>\n\n<blockquote>\n  <p>ViewBag.Orders = securityroles.Orders.Split(',');</p>\n  \n  <p>ViewBag.OrdersListBox = GetPermissionList(securityroles.Orders.Split(','));</p>\n</blockquote>\n\n<p><strong>ViewBag.Orders</strong> plays no role in the <strong>ViewBag.OrdersListBox</strong> nor is it used in the view, but when I simply assign it a value than the 2nd line of code works.</p>\n\n<p>Does this make sense to anyone? Any suggestions on how to create a way for the <strong>GetPermissionList</strong> to simply work correctly by sending it a string array instead of passing it the ViewBag object?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","html-helper","html.listboxfor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":766,"score":1,"question_id":8579789,"title":"MVC Method to output unordered list from the ListBoxFor method","body":"<p>In MVC3, I want to change the HTML output by the Html.ListBoxFor method so that instead of an HTML list box with all the available values (and the selected values highlighted), I want to simply output an unordered list (UL, LI) of the selected items and not a SELECT element.  The issue is that I want to keep <strong>exactly the same method signature as the ListBoxFor method</strong>, accepting a MultiSelectList object and a List which is the selected values.  I then want the unordered list to only output the selected item values (not keys) as UL/LI html.  Here is the method signature I would like to have.  How can this be accomplished?</p>\n\n<pre><code>public static MvcHtmlString ListBoxForAsUnorderedList &lt;TModel, TProperty&gt;\n    (this HtmlHelper&lt;TModel&gt; htmlHelper, \n          Expression&lt;Func&lt;TModel, TProperty&gt;&gt; expression, \n          IEnumerable&lt;SelectListItem&gt; selectList)\n</code></pre>\n"}]}
{"total":29155,"page":11,"pagesize":100,"questions":[{"tags":["asp.net-mvc-3","razor","html.listboxfor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":491,"score":0,"question_id":8189886,"title":"Using ListBoxFor Helper Method without having to modify existing Model","body":"<p>Using the MvcMusicStore tutorial, I decided to modify the \"Album\" model to contain a list of \"Genres\" insted of a single \"Genre\", and in the \"Edit\" view for the \"Album\" i'd like to have a list of all possible Genres listed and have the Genres associated with the particular Album pre-selected.</p>\n\n<pre><code>public class Album\n{\n    public int      AlbumId         { get; set; }\n\n    public int      GenreId         { get; set; }\n    public int      ArtistId        { get; set; }\n    public string   Title           { get; set; }\n    public decimal  Price           { get; set; }\n    public string   AlbumArtUrl     { get; set; }\n    //public Genre    Genre           { get; set; }\n    public List&lt;Genre&gt;    Genres           { get; set; }\n    public Artist   Artist          { get; set; }\n}\n</code></pre>\n\n<p>Now, in the \"Edit\" action method in the controller I've done the following</p>\n\n<pre><code>public ActionResult Edit(int id)\n{\n    Album album = db.Albums.Include(\"Genres\").Single(g =&gt; g.AlbumId == id);\n    ViewBag.ArtistId = new SelectList(db.Artists, \"ArtistId\", \"Name\", album.ArtistId);\n    ViewBag.GenresList = db.Genres.ToList();\n    ViewBag.SelectedGenres = album.Genres.Select(g =&gt; g.GenreId);\n    //ViewBag.SelectedList = db.Genres.Where()\n    return View(album);\n}\n</code></pre>\n\n<p>And int the \"Edit\" view I've done the following:</p>\n\n<pre><code>@Html.ListBoxFor(model =&gt; model.Genres, new MultiSelectList(ViewBag.GenresList, \"GenreId\", \"Name\", ViewBag.SelectedGenres))\n</code></pre>\n\n<p>This results in a ListBox with all the available \"Genres\" but none of them are selected, even though every the model (Album) has one or more (Genres) included in it.</p>\n\n<p>All the pertinent examples I've seen online require that one add a new preoperty in the model to hold a list of ids for every \"Genre\" assocaited with that model (something I'd like to avoid).</p>\n\n<p>Any idea how this can be accomplished?</p>\n"},{"tags":["asp.net-mvc-3","drop-down-menu","selectlist","multiselectlist","html.listboxfor"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2328,"score":2,"question_id":8422718,"title":"How do you properly create a MultiSelect <select> using the DropdownList helper?","body":"<p>(sorry, there are several item here but none seems to allow me to get this working.)</p>\n\n<p>I want to create a DropDownList which allows multiple selection. I am able to populate the list but I can't get the currently selected values to seem to work.</p>\n\n<p>I have the following in my controller:</p>\n\n<p><pre><code>ViewBag.PropertyGroups = from g in db.eFinGroups\n                              where g.GroupType.Contents == \"P\"\n                              select new\n                              {\n                                  Key = g.Key,\n                                  Value = g.Description,\n                                  Selected = true\n                              };</p>\n\n<p>ViewBag.SelectedPropertyGroups = from g in company.Entities\n                   .First().Properties.First().PropertyGroups \n                   select new { \n                                g.eFinGroup.Key, \n                                Value = g.eFinGroup.Description };</pre></code></p>\n\n<p>In the view I have:</p>\n\n<p><pre><code>@Html.DropDownListFor(model => model.PropertyGroupsX, \n   new MultiSelectList(ViewBag.PropertyGroups\n             , \"Key\", \"Value\"\n             , ViewBag.SelectedPropertyGroups), \nnew { @class = \"chzn-select\", data_placeholder = \"Choose a Property Group\", multiple = \"multiple\", style = \"width:350px;\" })</pre></code></p>\n\n<p>PropertyGroupX is a string[] in the model.</p>\n\n<p>I have tried all types of iterations with the selected properties... passing just the value, just the key, both, etc. </p>\n\n<p>Also, what type is PropertyGroupX supposed to be? Is string array correct? Or should it be a dictionary that contains the current propertygroups? I really am having a hard time finding doc on this.</p>\n\n<p>Someone suggested I should be using ListBoxFor. I have changed to that and still have the same issue. The selected values are not being set as selected when the option tags are rendered. Here is what I have tried:</p>\n\n<p>@Html.ListBoxFor(model => model.PropertyGroups, new MultiSelectList(ViewBag.PropertyGroups, \"Key\", \"Value\"))</p>\n\n<p>I have tried the model.PropertyGroups as a collection of string matching the Values, as a collection of Guid matching this IDs and as an anonymous type with both a Key and Value to match the items in the ViewBag. Nothing seems to work.</p>\n"},{"tags":["asp.net-mvc-3","html.listboxfor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":672,"score":0,"question_id":7325114,"title":"MVC 3 - Getting all selected values from a listbox on postback","body":"<p>I have an MVC3 project that has a listbox (listboxfor) like this:</p>\n\n<pre><code>@Html.ListBoxFor(m =&gt; m.cat_fam_codes, new SelectList(BaanWrapper.GetAllCategoryFamilies(), \"Code\", \"Description\"), new { @size = \"10\" })\n</code></pre>\n\n<p>When testing, I am able to select multiple entries in the list and even added a event handler to popup the comma-limited list of the selected values when the they are selected.  However, when I post the form back to the controller, I only get the first selected value returned.  For example, if I select value 1,2,3,4 - my JQuery event handler will popup \"1,2,3,4\".  No problem - but on post back, the bound object referenced in the controller only shows a \"1\".</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Create(EventReport eventReport)\n{\n    return View(eventReport);\n}\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p>EDIT:</p>\n\n<p>Here's the EventReport data model/class:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.ComponentModel;\nusing System.ComponentModel.DataAnnotations;\nusing System.Linq;\n\nnamespace EWS.Models\n{\n    [MetadataType(typeof(EventReportMetaData))]\n    public partial class EventReport\n    {\n        private static readonly EWSDataContext db = new EWSDataContext();\n\n        #region Nested type: MetaData\n\n        private sealed class EventReportMetaData\n        {\n            [DisplayName(\"Alert Email Body\")]\n            [Required(ErrorMessage = \"Required\")]\n            public string alert_body { get; set; }\n\n            [DisplayName(\"Alert Email Subject\")]\n            [Required(ErrorMessage = \"Required\")]\n            public string alert_subject { get; set; }\n\n            [DisplayName(\"Categories\")]\n            public string cat_codes { get; set; }\n\n            [DisplayName(\"Category Families\")]\n            public string cat_fam_codes { get; set; }\n\n            [DisplayName(\"CCR Codes\")]\n            public string ccr_codes { get; set; }\n\n            [Required(ErrorMessage = \"Required\")]\n            public DateTime create_dtm { get; set; }\n\n            [Required(ErrorMessage = \"Required\")]\n            public int created_by { get; set; }\n\n            [DisplayName(\"Email List\")]\n            [Required(ErrorMessage = \"Required\")]\n            [IsInteger(ErrorMessage = \"Invalid Email List\")]\n            [IsGreaterThanZero(ErrorMessage = \"Required\")]\n            public int email_list_id { get; set; }\n\n            [DisplayName(\"Begin Date\")]\n            public DateTime begin_dtm { get; set; }\n\n            [DisplayName(\"End Date\")]\n            public DateTime end_dtm { get; set; }\n\n            [DisplayName(\"Event Threshold\")]\n            [Required(ErrorMessage = \"Required\")]\n            [IsInteger(ErrorMessage = \"Invalid Threshold\")]\n            public int event_count { get; set; }\n\n            [DisplayName(\"Disabled\")]\n            public bool is_disabled { get; set; }\n\n            [DisplayName(\"Notify Over Threshold\")]\n            [Required(ErrorMessage = \"Required\")]\n            public bool notify_over_events { get; set; }\n\n            [DisplayName(\"Notify Under Threshold\")]\n            [Required(ErrorMessage = \"Required\")]\n            public bool notify_under_events { get; set; }\n\n            [Required(ErrorMessage = \"Required\")]\n            public int report_id { get; set; }\n\n            [DisplayName(\"Report Title\")]\n            [Required(ErrorMessage = \"Required\")]\n            public string report_title { get; set; }\n\n            [DisplayName(\"Reset By\")]\n            public int reset_by { get; set; }\n\n            [DisplayName(\"Reset Date\")]\n            public DateTime reset_dtm { get; set; }\n\n            [DisplayName(\"SKUs\")]\n            public string skus { get; set; }\n\n            [DisplayName(\"Source System\")]\n            [Required(ErrorMessage = \"Required\")]\n            public string source_system { get; set; }\n\n            [DisplayName(\"Sub-Categories\")]\n            public string sub_cat_codes { get; set; }\n\n            [DisplayName(\"# of Time Units\")]\n            [Required(ErrorMessage = \"Required\")]\n            public int window_dt_part_count { get; set; }\n\n            [DisplayName(\"Unit of Time\")]\n            [Required(ErrorMessage = \"Required\")]\n            public string window_dt_part { get; set; }\n        }\n\n        #endregion\n    }\n}\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net","asp.net-mvc-3","html.listboxfor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":304,"score":0,"question_id":7285560,"title":"ASP.NET MVC3 - problem handling multiple values from a strongly typed Listbox","body":"<p>I'm having a problem handling multiple values from a strongly typed Listbox.\nI have an Event Class that can have multiple Technology classes.</p>\n\n<p>Here's my simplified Event class:</p>\n\n<pre><code>public class Event\n{\n    public int ID { get; set; }\n    public IEnumerable&lt;Technology&gt; Technologies { get; set; }\n}\n</code></pre>\n\n<p>I was using this</p>\n\n<pre><code>public List&lt;Technology&gt; Technologies { get; set; }\n</code></pre>\n\n<p>and changed to </p>\n\n<pre><code>public IEnumerable&lt;Technology&gt; Technologies { get; set; }\n</code></pre>\n\n<p>but still got the same error.</p>\n\n<p>Here's the Technology class, it's a really simple one</p>\n\n<pre><code>public class Technology\n{\n    public int ID { get; set; }\n    public String Description{ get; set; }\n}\n</code></pre>\n\n<p>here's my simplified Controller</p>\n\n<pre><code>public ActionResult Create()\n    {\n        var TechnologyQry = from d in db.Technology\n                              orderby d.Description\n                              select new { d.ID, d.Description };\n        ViewBag.eventTechnology = new MultiSelectList(TechnologyQry ,\"ID\",\"Description\");\n        return View();\n    }\n</code></pre>\n\n<p>and here's the view portion that renders the ListBox</p>\n\n<pre><code>@Html.ListBoxFor(model =&gt; model.Technologies, (MultiSelectList)ViewBag.eventTechnology)\n</code></pre>\n\n<p>and thit's the error I'm getting</p>\n\n<blockquote>\n  <p>The ViewData item that has the key 'Technologies' is of type 'System.Collections.Generic.List`1[[stuff.Models.Technology, stuff, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' but must be of type 'IEnumerable'./</p>\n</blockquote>\n\n<p>Sorry, English is not my main language.\nI'd appreciate any help I can get.\nThank you.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvcscaffolding","html.listboxfor"],"answer_count":1,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":638,"score":6,"question_id":7145464,"title":"ListBox for ArgumentNullException Parameter name: source","body":"<h2>Setup:</h2>\n\n<p>I have scaffolded a controller using MvcScaffolding.</p>\n\n<p>For a property, Model.IdCurrencyFrom, the scaffolding created an Html.DropDownListFor:</p>\n\n<pre><code>@Html.DropDownListFor(model =&gt; model.IdCurrencyFrom, \n    ((IEnumerable&lt;FlatAdmin.Domain.Entities.Currency&gt;)ViewBag.AllCurrencies).Select(option =&gt; new SelectListItem {\n        Text = (option == null ? \"None\" : option.CurrencyName), \n        Value = option.CurrencyId.ToString(),\n        Selected = (Model != null) &amp;&amp; (option.CurrencyId == Model.IdCurrencyFrom)\n    }), \"Choose...\")\n</code></pre>\n\n<p>This works fine, both with new records, or editing existing ones.</p>\n\n<h2>Problem:</h2>\n\n<p>There are only 3 currencies, AR$, US$ and GB£.  So, instead of a drop down list, I want a ListBox.</p>\n\n<p>So I changed the above to:</p>\n\n<pre><code>@Html.ListBoxFor(model =&gt; model.IdCurrencyFrom, \n    ((IEnumerable&lt;FlatAdmin.Domain.Entities.Currency&gt;)ViewBag.AllCurrencies).Select(option =&gt; new SelectListItem {\n        Text = (option == null ? \"None\" : option.CurrencyName), \n        Value = option.CurrencyId.ToString(),\n        Selected = (Model != null) &amp;&amp; (option.CurrencyId == Model.IdCurrencyFrom)\n    }))\n</code></pre>\n\n<p>I now get an ArgumentNullException, Parameter name: source, but only when editing an existing record.  Creating new records, this works fine.</p>\n\n<h2>Questions:</h2>\n\n<p>What is happening?!</p>\n\n<p>Nothing has changed.  Switching back to DropDownListFor and it all works fine.  Switching to ListBox (as opposed to ListBoxFor) and I get the error.</p>\n\n<p>The model is not null (like I said, it works fine with the DropDownListFor)... and I've run out of ideas.</p>\n"},{"tags":["asp.net-mvc-3","datepicker","telerik-grid","dateformat"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":113,"score":0,"question_id":12971406,"title":"Telerik asp.net for MVC datepicker format in grid related issue","body":"<p>I have specified date format as dd/mm/yyyy for telerik datepicker. However, it is recognized as mm/dd/yyyy only. For example, if i enter date as 18/10/2012 error on saving record is thrown as date format is not valid as date entered here as 18 is treated as month. I have defined view for date as:</p>\n\n<pre><code>@model DateTime?           \n@(Html.Telerik().DatePickerFor(m =&gt; m)\n  .Name(ViewData.TemplateInfo.GetFullHtmlFieldName(string.Empty))      \n  .Format(\"dd/MM/yyyy\")\n  .HtmlAttributes(new { id = ViewData.TemplateInfo.GetFullHtmlFieldName(string.Empty) + \"_wrapper\" })\n  .InputHtmlAttributes(new {style=\"width:160px;\"}))\n</code></pre>\n\n<p>And in model validation for date field is defined as:</p>\n\n<pre><code>[Required(ErrorMessage = \"Date Required\")]\n[DataType(DataType.Date)]\npublic DateTime? DATE_CALL { get; set; }\n</code></pre>\n\n<p>Also, in grid has defined column as:</p>\n\n<pre><code>col.Bound(r =&gt; r.DATE_CALL).Format(\"{0:dd/MM/yyyy}\").Title(\"DATE_CALL\").Width(170);\n</code></pre>\n\n<p>So, can't figure out what the error is? Any help will be appreciated.</p>\n"},{"tags":["asp.net-mvc-3","inheritance","web-config"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12971505,"title":"Does inheritInChildApplications Web.config attribute work in ASP.NET MVC 3?","body":"<p>We have an MVC3 application deployed on IIS 7.5, and now need to deploy another app in a subdirectory of the main one. After running into Web.config inheritance conflict we tried to wrap the system.web section of the parent app's config file in <code>&lt;location path=\".\" inheritInChildApplications=\"false\"&gt;</code>, as recommended in the accepted answer to <a href=\"http://stackoverflow.com/questions/6296168/web-config-how-to-prevent-all-inheritance\">web.config - how to prevent all inheritance</a>, but we're getting an error: </p>\n\n<blockquote>\n  <p>InheritInChildApplications cannot be set to \"false\" if the location\n  path is referring to machine.config or the root web.config.</p>\n</blockquote>\n\n<p>What are we doing wrong?</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","transactions","dbcontext"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1218,"score":0,"question_id":8655643,"title":".NET MVC 3 Rollback in Dbcontext","body":"<p>in MVC 3 is it possible to rollback the database after calling DbContext.SaveChanges() ?</p>\n\n<p>My entities class:</p>\n\n<pre><code>public class BipEntities : DbContext\n{\n    public DbSet&lt;Page&gt; Pages { get; set; }\n    public DbSet&lt;ImageFile&gt; ImageFiles { get; set; }\n}\n</code></pre>\n\n<p>What I'm trying to do is insert a ImageFile record into the db, then by using the auto-incremented id as the image filename, save the image file into somewhere else. \nWhen System.IO fails, I would like to rollback the database.</p>\n\n<pre><code>BipEntities db = new BipEntities();\ndb.Database.Connection.Open();\nDbTransaction tranx = db.Database.Connection.BeginTransaction();\n\nImageFile img = new ImageFile { CreatedAt = DateTime.Now };\ndb.ImageFiles.Add(img);\ndb.SaveChanges();\n\nstring filename = \"img\" + img.Id.ToString() + \".png\";\ntry {\n    //Works on system IO to process file\n    tranx.Commit();\n\n} Catch ( Exception) {\n    tranx.Rollback();\n}\n\ndb.Database.Connection.Close();\n</code></pre>\n\n<p>However, the above code gives me this error message:</p>\n\n<pre><code>EntityConnection can only be constructed with a closed DbConnection.\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","binding"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":12970641,"title":"Html.HiddenFor binding to wrong element","body":"<p>I have an ASP.NET MVC application that displays a list of items. In my view page I loop over the items and render each item with partial view, like so:</p>\n\n<pre><code>@foreach(var item in Model.items)\n{\n   &lt;li&gt;\n       @Html.Partial(\"ItemView\", item)\n   &lt;/li&gt;\n}\n</code></pre>\n\n<p>In the item view, I wrap each item with a form that has a 'Delete' button, like this:</p>\n\n<pre><code>@using(Html.BeginForm(...))\n{\n    @Html.HiddenFor(m=&gt;m.Id)\n    &lt;label&gt;@Model.Name (@Model.Id)&lt;/label&gt;\n    &lt;input type=\"submit\" value=\"Delete\"/&gt;\n}\n</code></pre>\n\n<p>The items are rendered properly, the resulting page has a nice list of all the items with their proper names and IDs displayed. </p>\n\n<p>EDIT: The same happens with @Hidden, apparently, contrary to what I wrote before.</p>\n\n<p>In addition, this only happens the second time the form is rendered (that is, after one of the Delete buttons is clicked), the first time everything is working properly. My action methods looks like this:</p>\n\n<pre><code>public ActionResult AllItems()\n{\n    var model = new AllItemsModel();\n    return PartialView(model);\n}\n\npublic ActionResult Delete(DeleteModel model)\n{\n    .... Perform the delete ...\n    return PartialView(\"AllItems\", new AllItemsModel());\n}\n</code></pre>\n\n<p>Why is this happening? </p>\n"},{"tags":["jquery","asp.net-mvc-3","plugins","file-upload","sample"],"answer_count":2,"favorite_count":3,"up_vote_count":1,"down_vote_count":0,"view_count":5415,"score":1,"question_id":9361789,"title":"Sample project plugin jquery File Upload plugin implemented in ASP .NET MVC3","body":"<p>I need to implement in my project ASP .NET MVC3 the jquery file upload plugin:\n<a href=\"http://blueimp.github.com/jQuery-File-Upload/\" rel=\"nofollow\">http://blueimp.github.com/jQuery-File-Upload/</a></p>\n\n<p>But I have been googling and i haven't found a whole project, only pieces of code, and i don't know how implement it.</p>\n\n<p>Can someone help me?Can someone tell me where i can download a sample project or code?</p>\n\n<p>Thank you very much!</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12970135,"title":"How to go from one view to another in MVC3","body":"<p>I am still learning and not sure how to do this, I have in  my controller:</p>\n\n<pre><code>[HttpGet]\npublic ActionResult Detail(int userId)\n{\n  var user = ZincService.GetUserForId(userId);\n  UserDetailViewModel userDetail = new UserDetailViewModel();\n  userDetail.UserId = userId;\n  userDetail.Email = user.Email;\n  userDetail.Firstname = user.Firstname;\n  userDetail.Surname = user.Surname;\n  return View(userDetail);\n}\n\n[HttpGet]\npublic ActionResult ChangeEmailAddress()\n{\n  return View();\n}\n</code></pre>\n\n<p>In my Detail view:</p>\n\n<pre><code>  &lt;div class=\"section _100\"&gt;\n     &lt;%: Html.LabelFor(model =&gt; model.Email)%&gt; \n         &lt;div&gt;\n             &lt;%: Model.Email  %&gt;\n             &lt;%: Model.UserId %&gt;\n         &lt;/div&gt;\n         &lt;div&gt;                                      \n             &lt;%: Html.ActionLink(\"Change Email Address\",  \"ChangeEmailAddress\", \"User\", new { area = \"Admin\", @id = Model.UserId, @email = Model.Email, @name = Model.Firstname }, 0) %&gt;  \n\n             &lt;%: Html.ValidationMessageFor(model =&gt; model.Email)%&gt;    \n         &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>I just want to go from here in the view to another view(ChangeEmailAddress) where the user can actually change his email from old to new?</p>\n\n<p>Thanks     </p>\n"},{"tags":["asp.net-mvc-3","azure","asp.net-membership","membership-provider"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":141,"score":3,"question_id":12857647,"title":"Membership authentication on windows azure ASP.NET MVC 3 - couldn't find column","body":"<p>I've try to migrate my ASP.NET MVC 3 project (with CodeFirst) to Windows Azure. Offcurse I changed the Providers.I've check the azure sql db and there are new tables like: Applications, Memberships, Profiles,Roles,Users</p>\n\n<p>but now I got error:</p>\n\n<pre><code>[SqlException (0x80131904): Invalid column name 'ApplicationId'.\nInvalid column name 'UserName'.\nInvalid column name 'UserId'.\nInvalid column name 'ApplicationId'.\nInvalid column name 'UserName'.\nInvalid column name 'IsAnonymous'.\nInvalid column name 'LastActivityDate'.]\n   System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +2091750\n   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5103168\n   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +260\n   System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2294\n   System.Data.SqlClient.SqlDataReader.ConsumeMetaData() +33\n   System.Data.SqlClient.SqlDataReader.get_MetaData() +86\n   System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +311\n   System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async) +987\n   System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result) +162\n   System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method) +32\n   System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method) +141\n   System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior) +12\n   System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior) +10\n   System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior) +443\n\n[EntityCommandExecutionException: An error occurred while executing the command definition. See the inner exception for details.]\n   System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior) +479\n   System.Data.Objects.Internal.ObjectQueryExecutionPlan.Execute(ObjectContext context, ObjectParameterCollection parameterValues) +736\n   System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption) +149\n   System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable&lt;T&gt;.GetEnumerator() +44\n   System.Linq.Enumerable.FirstOrDefault(IEnumerable`1 source) +182\n   System.Data.Objects.ELinq.ObjectQueryProvider.&lt;GetElementFunction&gt;b__1(IEnumerable`1 sequence) +41\n   System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle(IEnumerable`1 query, Expression queryRoot) +59\n   System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute(Expression expression) +150\n   System.Data.Entity.Internal.Linq.DbQueryProvider.Execute(Expression expression) +87\n   System.Linq.Queryable.FirstOrDefault(IQueryable`1 source) +265\n   System.Web.Providers.QueryHelper.GetUser(MembershipContext ctx, String userName, String applicationName) +2104\n   System.Web.Providers.DefaultMembershipProvider.Membership_CreateUser(String applicationName, String userName, String password, String salt, String email, String passwordQuestion, String passwordAnswer, Boolean isApproved, DateTime&amp; createDate, Boolean uniqueEmail, Int32 passwordFormat, Object&amp; providerUserKey) +151\n   System.Web.Providers.DefaultMembershipProvider.CreateUser(String username, String password, String email, String passwordQuestion, String passwordAnswer, Boolean isApproved, Object providerUserKey, MembershipCreateStatus&amp; status) +836\n   System.Web.Security.Membership.CreateUser(String username, String password, String email, String passwordQuestion, String passwordAnswer, Boolean isApproved, Object providerUserKey, MembershipCreateStatus&amp; status) +207\n   GameiDemo.Controllers.HomeController.Index(User model) +99\n   lambda_method(Closure , ControllerBase , Object[] ) +108\n   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17\n   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27\n   System.Web.Mvc.&lt;&gt;c__DisplayClass15.&lt;InvokeActionMethodWithFilters&gt;b__12() +55\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263\n   System.Web.Mvc.&lt;&gt;c__DisplayClass17.&lt;InvokeActionMethodWithFilters&gt;b__14() +19\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191\n   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343\n   System.Web.Mvc.Controller.ExecuteCore() +116\n   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97\n   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10\n   System.Web.Mvc.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5() +37\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0() +21\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass8`1.&lt;BeginSynchronous&gt;b__7(IAsyncResult _) +12\n   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62\n   System.Web.Mvc.&lt;&gt;c__DisplayClasse.&lt;EndProcessRequest&gt;b__d() +50\n   System.Web.Mvc.SecurityUtil.&lt;GetCallInAppTrustThunk&gt;b__0(Action f) +7\n   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22\n   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60\n   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9\n   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8969201\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +184\n</code></pre>\n\n<p>Web.config:</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;!--\n  For more information on how to configure your ASP.NET application, please visit\n  http://go.microsoft.com/fwlink/?LinkId=152368\n  --&gt;\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 --&gt;\n    &lt;section name=\"entityFramework\" type=\"System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" requirePermission=\"false\" /&gt;\n  &lt;/configSections&gt;\n  &lt;connectionStrings&gt;\n\n    &lt;!--\n    &lt;add name=\"ApplicationServices\"\n         connectionString=\"data source=mssql01\\sql01;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true\"\n         providerName=\"System.Data.SqlClient\" /&gt;\n         --&gt;\n    &lt;!--&lt;add name=\"ApplicationServices\" connectionString=\"Server=tcp:...database.windows.net,1433;Database=...;User ID=...@...;Password={your_password_here};Trusted_Connection=False;Encrypt=True;Connection Timeout=30;\" providerName=\"System.Data.SqlClient\" /&gt;--&gt;\n    &lt;!--&lt;add name=\"DBConnection\" connectionString=\"Server=tcp:....database.windows.net,1433;Database=...;User ID=...@...;Password={your_password_here};Trusted_Connection=False;Encrypt=True;Connection Timeout=30;\" providerName=\"System.Data.SqlClient\" /&gt;/--&gt;\n\n    &lt;!--\n    &lt;add name=\"DBConnection\" connectionString=\"data source=.\\SQLEXPRESS;initial catalog=GameiDemo;integrated security=True;multipleactiveresultsets=True;\" providerName=\"System.Data.SqlClient\" /&gt;\n    --&gt;\n    &lt;!--&lt;add name=\"ApplicationServices\" connectionString=\"data source=.\\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true\"\n      providerName=\"System.Data.SqlClient\" /&gt;//--&gt;\n    &lt;add name=\"DefaultConnection\" providerName=\"System.Data.SqlClient\" \n         connectionString=\"Data Source=tcp:....database.windows.net,1433;Initial Catalog=gamei_db;User Id=...@...;Password=123aba321!;Trusted_Connection=False;Encrypt=True;Connection Timeout=130;**MultipleActiveResultSets=True**\" /&gt;\n     &lt;/connectionStrings&gt;\n\n\n  &lt;appSettings&gt;\n    &lt;add key=\"webpages:Version\" value=\"1.0.0.0\" /&gt;\n    &lt;add key=\"ClientValidationEnabled\" value=\"true\" /&gt;\n    &lt;add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" /&gt;\n  &lt;/appSettings&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n      &lt;assemblies&gt;\n        &lt;add assembly=\"System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n        &lt;add assembly=\"System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n        &lt;add assembly=\"System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n        &lt;add assembly=\"System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n        &lt;add assembly=\"System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n      &lt;/assemblies&gt;\n    &lt;/compilation&gt;\n    &lt;authentication mode=\"Forms\"&gt;\n      &lt;forms loginUrl=\"~/Account/LogOn\" timeout=\"2880\" /&gt;\n    &lt;/authentication&gt;\n\n    &lt;membership defaultProvider=\"DefaultMembershipProvider\"&gt;\n      &lt;providers&gt;\n        &lt;clear /&gt;\n        &lt;!-- &lt;add name=\"AspNetSqlMembershipProvider\" type=\"System.Web.Security.SqlMembershipProvider\" connectionStringName=\"ApplicationServices\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\" /&gt; //--&gt;\n        &lt;add name=\"DefaultMembershipProvider\" type=\"System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/membership&gt;\n    &lt;profile defaultProvider=\"DefaultProfileProvider\"&gt;\n      &lt;providers&gt;\n        &lt;clear /&gt;\n        &lt;!-- &lt;add name=\"AspNetSqlProfileProvider\" type=\"System.Web.Profile.SqlProfileProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt; //--&gt;\n        &lt;add name=\"DefaultProfileProvider\" type=\"System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" applicationName=\"/\" /&gt;\n\n\n\n      &lt;/providers&gt;\n    &lt;/profile&gt;\n    &lt;roleManager enabled=\"false\" defaultProvider=\"DefaultRoleProvider\"&gt;\n      &lt;providers&gt;\n        &lt;clear /&gt;\n        &lt;!--&lt;add name=\"AspNetSqlRoleProvider\" type=\"System.Web.Security.SqlRoleProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt;--&gt;\n\n        &lt;add name=\"AspNetWindowsTokenRoleProvider\" type=\"System.Web.Security.WindowsTokenRoleProvider\" applicationName=\"/\" /&gt;\n        &lt;add name=\"DefaultRoleProvider\" type=\"System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/roleManager&gt;\n    &lt;pages&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"System.Web.Helpers\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n        &lt;add namespace=\"System.Web.Routing\" /&gt;\n        &lt;add namespace=\"System.Web.WebPages\" /&gt;\n      &lt;/namespaces&gt;\n    &lt;/pages&gt;\n    &lt;sessionState mode=\"InProc\" customProvider=\"DefaultSessionProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultSessionProvider\" type=\"System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" /&gt;\n      &lt;/providers&gt;\n    &lt;/sessionState&gt;\n  &lt;/system.web&gt;\n  &lt;system.webServer&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\" /&gt;\n  &lt;/system.webServer&gt;\n  &lt;runtime&gt;\n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"3.0.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n    &lt;/assemblyBinding&gt;\n  &lt;/runtime&gt;\n  &lt;system.web&gt;\n    &lt;customErrors mode=\"Off\" /&gt;\n  &lt;/system.web&gt;\n  &lt;entityFramework&gt;\n    &lt;defaultConnectionFactory type=\"System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework\" /&gt;\n  &lt;/entityFramework&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>I change username and serwer adres with \"...\" :)</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","validation","client-side"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":117,"score":1,"question_id":12968542,"title":"Use Client-Side Validation when custom [required] attribute is used","body":"<p>on this project we do not use the default dataannotation attributes from the <code>System.ComponentModel.DataAnnotations</code> namespace, but custom attributes are built.</p>\n\n<p>So we do place a <code>[required]</code> attribute on a property, but it's a custom built one.</p>\n\n<p>For server side validation we managed to override the validation with a custom validation provider, but we are stuck with tthe client side validation.</p>\n\n<p>As i read in the docs, i see that when you use the default <code>[required]</code> attribute, these kind of attributes are rendered on the html elements:</p>\n\n<pre><code>data-val-lengthmax=\"10\" data-val-length-min=\"3\" data-val-required=\"The ClientName field is required.\"\n</code></pre>\n\n<p>I presume that is done by the framework, which reads the normal <code>required</code> attribute, and then renders the html attributes.</p>\n\n<p>Can we make the framework render these attributes for us too?</p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3079,"score":0,"question_id":5370305,"title":"jQuery form .submit() callback","body":"<p>I use an Ajax form i MVC 3. I want to trigger the submit with:</p>\n\n<pre><code>$(\"form\").submit();\n</code></pre>\n\n<p>and I want to do a callback function after the form submits successfully, how can I do that?</p>\n"},{"tags":["c#","jquery","css","asp.net-mvc-3","slider"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12273941,"title":"How to prevent slider from stretching?","body":"<p>Just getting acquainted with jQuery UI. So, this is a block of code from my view:</p>\n\n<pre><code>&lt;label id=\"min\"&gt;\n    5000&lt;/label&gt;\n&lt;div id=\"slider\"&gt;\n&lt;/div&gt;\n&lt;label id=\"max\"&gt;\n    9000&lt;/label&gt;\n</code></pre>\n\n<p>And a part of the script:</p>\n\n<pre><code>    $('#slider').slider({\n        animate: true,\n        range: true,\n        min: 5000,\n        max: 9000,\n        values: [5000, 9000],\n        slide: function (event, ui) {\n            //doing smth\n        }\n    });    \n</code></pre>\n\n<p>Everything works fine, but the slider is stretched and takes the whole line. The labels are below and under it.\nI expected them all to be in one line.</p>\n\n<p>What should I do to achieve it?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>This is what I am expecting:</p>\n\n<p><img src=\"http://i.stack.imgur.com/ZmQy1.png\" alt=\"Correct\"></p>\n\n<p>And this is what I have:</p>\n\n<p><img src=\"http://i.stack.imgur.com/abGte.png\" alt=\"Error\"></p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I tried to override the slider css by adding the following code to my <em>Site.css</em> file:</p>\n\n<pre><code>.ui-slider .ui-slider-handle\n{\n    position: absolute;\n    z-index: 2;\n    width: 0.5em !important;\n    height: 1.2em !important;\n    cursor: default;\n}\n</code></pre>\n\n<p>but nothing changed. How can I make jQuery use this css?</p>\n\n<p><strong>Another note</strong>: the original css looks like this:</p>\n\n<pre><code>.ui-slider .ui-slider-handle\n{\n    position: absolute;\n    z-index: 2;\n    width: 1.2em;\n    height: 1.2em;\n    cursor: default;\n}\n</code></pre>\n\n<p>So, is css the issue here? Or something else makes my slider stretch??</p>\n\n<p><strong>MORE</strong></p>\n\n<p>This is the generated html:</p>\n\n<pre><code>&lt;div id=\"slider\" class=\"ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all\"&gt;\n    &lt;div class=\"ui-slider-range ui-widget-header\" style=\"left: 25.95%; width: 74.05%;\"&gt;\n    &lt;/div&gt;\n    &lt;a href=\"#\" class=\"ui-slider-handle ui-state-default ui-corner-all\" style=\"left: 25.95%;\"&gt;\n    &lt;/a&gt;\n    &lt;a href=\"#\" class=\"ui-slider-handle ui-state-default ui-corner-all\" style=\"left: 100%;\"&gt;\n    &lt;/a&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>At last</strong></p>\n\n<p>I had to override <code>.ui-slider</code> class, not <code>.ui-slider .ui-slider-handle</code>. That was the issue.</p>\n\n<p>Rajesh Rolen- DotNet De, thank you!</p>\n"},{"tags":["json","asp.net-mvc-3","entity-framework-4.1"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2900,"score":1,"question_id":5678015,"title":"Entity Framework 4.1, MVC3 JsonResult and Circular References","body":"<p>I'm trying to learn Entity Framework Code First development with ASP.NET MVC3.</p>\n\n<p>Let's say I have a simple data Model for an Auction and Bids and I'd like to query all the Auctions and their Bids.</p>\n\n<p>I have turned off LazyLoadingEnabled and ProxyCreationEnabled.</p>\n\n<p>Here is the code I have:</p>\n\n<pre><code>public class MiCoreDb2Context : DbContext\n{\n    public MiCoreDb2Context()\n        : base()\n    {\n        this.Configuration.LazyLoadingEnabled = false;\n        this.Configuration.ProxyCreationEnabled = false;\n    }\n\n    public DbSet&lt;Auction&gt; Auctions { get; set; }\n    public DbSet&lt;Bid&gt; Bids { get; set; }\n}\n\npublic class Auction\n{\n    public int AuctionId { get; set; }\n    public virtual ICollection&lt;Bid&gt; Bids { get; set; }\n}\n\npublic class Bid\n{\n    public long BidId { get; set; }\n    public int AuctionId { get; set; }\n\n    [ForeignKeyAttribute(\"AuctionId\")]\n    public virtual Auction Auction { get; set; }\n}\n\n\npublic JsonResult Thing()\n{\n    List&lt;Auction&gt; auctions;\n\n    using (var db = new MiCoreDb2Context())\n    {\n        var auctions = (from a in db.Auctions.Include(\"Bids\") select a).ToList();\n    }\n\n    return Json(auctions, JsonRequestBehavior.AllowGet);\n}\n</code></pre>\n\n<p>When I load the page, a circular reference occurs. How will I get around this?</p>\n"},{"tags":["javascript","asp.net-mvc-3","flash","swf","swfobject"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12966900,"title":"SWF doesn't render in IE9 (but does in Chrome/FF)","body":"<p>The following code is <strong>NOT</strong> rendering a swf from a remote webpage hosted from IIS7 in IE9 but does so in Chrome and FF.</p>\n\n<p>What am I missing? </p>\n\n<p>File: <a href=\"http://srv.ab.com/page/swftestpage.htm\" rel=\"nofollow\">http://srv.ab.com/page/swftestpage.htm</a></p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n        (function () {\n\n            var object = document.createElement('object');\n            object.setAttribute('width', '300');\n            object.setAttribute('height', '250');\n            object.setAttribute('classid', 'clsid:d27cdb6e-ae6d-11cf-96b8-444553540000');\n\n            var param1 = document.createElement('param');\n            param1.setAttribute('name', 'movie');\n            param1.setAttribute('value', 'http://srv.ab.com/test.swf');\n\n            var embed = document.createElement('embed');\n            embed.setAttribute('src', 'http://srv.ab.com/test.swf');\n            embed.setAttribute('width', '300');\n            embed.setAttribute('height', '250');\n\n            var param2 = document.createElement('param');\n            param2.setAttribute('name', 'wmode');\n            param2.setAttribute('value', 'transparent');\n\n            object.appendChild(param1);\n            object.appendChild(embed);\n            object.appendChild(param2);\n\n            var container = document.getElementById('myDivID');\n            while (container.firstChild) { container.removeChild(container.firstChild); }\n            container.appendChild(object);\n        })();\n\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc-3","google-maps","asp.net-mvc-4","jquery-ui-map"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":105,"score":0,"question_id":12965588,"title":"JQUERY-UI-MAP \"Uncaught TypeError: Object [object Object] has no method 'gmap' \"","body":"<p>I'm using jquery-ui-map 3.0 RC to simplify the process of using json to place markers on a google map using javascript api v3. </p>\n\n<p>When I prototyped using html files it worked fine. Once I started to use embed code within an MVC4 project and debug using iis express I'd get an error in Google Chrome Developer Tools \"Uncaught TypeError: Object [object Object] has no method 'gmap'.</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"http://maps.google.com/maps/api/js?key=MYBROWSERAPIKEYISHERE&amp;sensor=true\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"../../Scripts/jquery.ui.map.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"../../Scripts/gmap3.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n\n\n$(document).ready(function () {\n    initialize();\n});\n\nfunction getMarkers() {\n    // This URL won't work on your localhost, so you need to change it\n    // see http://en.wikipedia.org/wiki/Same_origin_policy\n    $.getJSON('../../Data/Australia-WA-Perth.json', function (data) {\n        $.each(data.markers, function (i, marker) {\n            $('#map_canvas').gmap('addMarker', {\n                'position': new google.maps.LatLng(marker.latitude, marker.longitude),\n                'bounds': true\n            }).click(function () {\n                $('#map_canvas').gmap('openInfoWindow', { 'content': marker.content }, this);\n            });\n        });\n    });\n}\n\nfunction initialize() {\n    var pointCenter = new google.maps.LatLng(-31.95236980, 115.8571791);\n\n    var myMapOptions = {\n        zoom: 17,\n        center: pointCenter,\n        mapTypeId: google.maps.MapTypeId.ROADMAP  //TERRAIN\n    };\n\n    var map = new google.maps.Map(document.getElementById(\"map_canvas\"), myMapOptions);\n\n    google.maps.event.addListenerOnce(map, 'idle', function () {\n        getMarkers();\n    });\n\n}\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","session-timeout"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3355,"score":1,"question_id":8002323,"title":"Increase session timeout on .net mvc 3","body":"<p>I've added this inside the system.web node of my web.config</p>\n\n<pre><code>&lt;sessionState mode=\"InProc\" timeout=\"600\" /&gt;\n</code></pre>\n\n<p>but my sessions are timing out within 30 minutes.</p>\n\n<p>is there something else I need to do to increase my session timeout length?</p>\n\n<p>There is a forms authentication node in my web.config as well but I'm not using any authentication on the web site.  The forms authentication has a timeout value of 2880...but again, I'm not doing any authentication at all...</p>\n"},{"tags":["asp.net-mvc-3","drop-down-menu","onchange","webgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3153,"score":0,"question_id":5603567,"title":"Webgrid column contain dropdownlist onchange of dropdown must update in object i want the uniquie id of the row or object","body":"<p>sample code:-\nView Code</p>\n\n\n    function ViewDataChange() {\n\n        alert(\"In\");\n    }\n\n     function GetPage(data) {\n        debugger;\n        var item = document.getElementById(\"AppId\").value;\n        var i=0;\n        for (i = 0; i \n\n<p>@{using (Ajax.BeginForm(\"DeleteAttendee\", \"Calls\", new AjaxOptions { UpdateTargetId = \"GridAttendee\", HttpMethod = \"Post\", LoadingElementId = \"LoadingImageAttendees\" }))\n              {  </p>\n\n<pre><code>        @usersGrid.GetHtml(\n        htmlAttributes: new { OnItemCreated = \"this.ViewDataChange()\" },\n        tableStyle: \"grid TBLGrid\",\n        mode: WebGridPagerModes.Numeric,\n\n        headerStyle: \"header\",\n        alternatingRowStyle: \"alt\",\n\n        rowStyle: \"row\",\n                columns: usersGrid.Columns(\n                  usersGrid.Column(null, null, format: @&lt;input type=\"hidden\" name=\"AppId\" value=\"@item.AppUserId\"/&gt;, style: \"\", canSort: false),\n                  usersGrid.Column(\"Name\", \"Name \", style: \"\", canSort: false),\n                  usersGrid.Column(\"ListItemId\", \"Booking Role\", format: (item) =&gt; Html.DropDownList(\"ddlBookingRole\", ViewBag.BookingRoleList as SelectList, new { onchange = \"GetPage(this);\" }), style: \"width:70%\", canSort: false),\n                  usersGrid.Column(\"PortaCallParticipantId\", \"Delete\", format: @&lt;input type=\"image\" src=\"../../Content/images/deleteIcon.gif\" name=\"Id\" value=\"@item.AppUserId\" /&gt;, style: \"align:center\", canSort: false)\n                 )\n                 )\n          }\n\n        } \n</code></pre>\n\n<p>I want to pass two parameter in GetPage(this,@item.AppUserId) but i am not getting how to do the same plese suggest me its urgent\nThanks in advance.</p>\n"},{"tags":["c#","html","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":4,"view_count":79,"score":-2,"question_id":11691009,"title":"How I can pass to value to a link in MVC Razor","body":"<p>I am new to MVC Razor and I have this problem</p>\n\n<p>Ex: \n<a href=\"https://ag.de/goto.asp?id=123456\" rel=\"nofollow\"></a> </p>\n\n<p>I want to pass a value to id, so this is what I did:</p>\n\n<pre><code>&lt;a href=\"https://ag.de/goto.asp?id=@Model.LinkDirect\"&gt;&lt;/a&gt; \n</code></pre>\n\n<p>Can anyone tell me it is right or wrong?\nThanks</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12964826,"title":"How to access item index in MVC list view","body":"<p>I'm creating a view where the model is List of Foo.  I want to create a list with an actionlink to select a given Foo item and need to pass it back to the controller. However, there is nothing unique enough in Foo to tie to the actionlink. I'd like to pass the index of the item in Foo but don't know how to get the index from the model inside of the view. </p>\n\n<p>Is this possible to do this without creating a viewmodel that contains the index?</p>\n"},{"tags":["asp.net-mvc","entity-framework","asp.net-mvc-3"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1044,"score":0,"question_id":4650136,"title":"Performance reprogramming website in MVC3 with Entity Framework","body":"<p>At the moment I have a fairly big website with about 10k visitors a day.</p>\n\n<p>This is a community website with news/blogs/videos and a big forum. </p>\n\n<p>This all runs on a self made PHP5 application which performance faily well, has good performance. The database is a MySQL5.1 database.</p>\n\n<p>Now I am getting fedup with PHP and the loose typed framework, lack of namespacing and a proper MVC setup, so I am thinking of rewriting the site in MVC3 ASP.NET.</p>\n\n<p>Now I have experience with this, but not in the MVC framework yet, and I have a few questions about the performance, especially the Entity Framework:\nIs it even worth using the entity framework? Will it cost alot of overhead and performance degration? I am not sure yet if I should switch to MSSQL.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","post","web"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12964126,"title":"Can POST and GET methods go to different views?","body":"<p>Would it be possible to have my POST method go to a different view to my GET method?</p>\n\n<p>Example:<br>\n<br></p>\n\n<h2>GET</h2>\n\n<pre><code>    [HttpGet]\n    public ActionResult Output()\n    {\n        var model = new VTOutputModel();\n        return View(model);\n    }\n</code></pre>\n\n<h2>POST</h2>\n\n<pre><code>    [HttpPost]\n    public PartialViewResult OutputPartialView(VTOutputModel model)\n    {\n        return PartialView(model);\n    }\n</code></pre>\n\n<p>Here I attempted to have the POST method pop up with a new webpage/view. Differing from the GET method. This doesn't work because it still expects a view called \"Output\"</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-membership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12941556,"title":"MVC 3 Membership service resetpassword Issue","body":"<p>I currently have an MVC 3 application which requires the Security Answer to be correct when user forgets the password.</p>\n\n<p>However, I want a System Administrator to be able to Reset the Password of any user without knowing the Security Answer.</p>\n\n<p>Any possible solution for this?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":253,"score":0,"question_id":11612730,"title":"ASP.NET MVC4 Pluggable website using Areas","body":"<p>I want to create simple pluggable website with administration using ASP.NET MVC 4.\nI have seen a lot of articles about pluggable architecture solutions, for example: <a href=\"http://nileshhirapra.blogspot.sg/2012/02/aspnet-mvc-pluggable-application.html\" rel=\"nofollow\">http://nileshhirapra.blogspot.sg/2012/02/aspnet-mvc-pluggable-application.html</a></p>\n\n<p>It is a simple solution of pluggable architecture, but I want to have administration of these modules on website, to activate or deactivate plugin/module or install module uninstall module directly on administration section.</p>\n\n<p>Help me, I would like to know which solution of pluggable architecture is the best for this purpose?</p>\n\n<p>Do you know any simple example of website with pluggable architecture?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":12963139,"title":"Html.ActionLink magic","body":"<p>I have the following model:</p>\n\n<pre><code>public class AccountDetailsViewModel\n{\n   public Guid ID { get; set; }\n   public string FirstName { get; set; }\n   public string LastName { get; set; }\n}\n</code></pre>\n\n<p>Then I have AccountController with followign action</p>\n\n<pre><code>public ActionResult Details(Guid? id)\n{\n    var model = new AccountDetailsViewModel\n    {\n        ID = 2,\n        FirstName = \"FirstName\",\n        LastName = \"LastName\"\n    };\n    return View(model)\n}\n</code></pre>\n\n<p>And strongly type view for this action</p>\n\n<pre><code>@model AccountDetailsViewModel\n...\n@Html.ActionLink(\"My Page\", \"Details\", \"Account\")\n...\n//display info about user\n</code></pre>\n\n<p>The idea is that when user access Account/Details url without id parameter his own info is displayed, and when id is present in the url info about user with that id is shown.</p>\n\n<p>The problem is that when user access url with id (someone's other page), the link My Page(on the top of the view) points to the same page. ActionLink takes id of the currently displayed user, and this is a problem, as I want My Page link always point to Account/Details (to my page). This id for ActionLink is not taken from @Model as I thought first, it look like there is some other magic which i am not fammiliar with.</p>\n\n<p>The same problem I have with other pages.</p>\n\n<p>So what is going on and how to prevent this type of behaviour?</p>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-selectors","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12962724,"title":"Expand and collapse in MVC3 Webgird","body":"\n\n<p>Can somebody help me in implementing Expand/Collapse functionality?</p>\n\n<p>On clicking the <em>Expand</em> button, I need to get related data for that corresponding record and display it as a child row.</p>\n\n<pre><code>grid.Column(header: \"Expand\", \n    format: @&lt;text&gt;\n        &lt;a href='#' class=\"expandable-open-button\" rel=\"1\" &gt;&amp;gt;&lt;/a&gt; \n        &lt;div class=\"expandable-child-row\"&gt;&lt;/div&gt; \n     &lt;/text&gt;)\n</code></pre>\n\n<p>I am thinking of using jQuery. On click of 'Expand' link can we get the data from the database and set the webgrid html to  element.</p>\n"},{"tags":["asp.net-mvc-3","siteminder"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":113,"score":1,"question_id":12867667,"title":"ASP.Net MVC and siteminder","body":"<p>I am new to siteminder. I need to build a ASP.Net MVC application and use siteminder for Single Sign On process. It would be great if someone can guide me the right direction. Looking for tutorial or real world sample application.</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12962310,"title":"Wrapping Radio Buttons in one Html.BeginForm + MVC3 Razor","body":"<p>UI is generated by iterating the model properties. I want to wrap all the radio buttons in one new HTML.BeginForm instead of wrapping on indivdual forms. Currently it is following format.   </p>\n\n<pre><code> @using (Html.BeginForm(\"ActionMethod\", \"Controller\", FormMethod.Post, new { id = \"formname\" }))\n    {\n                   @for (int i = 0; i &lt; Model.childItems.Count; i++)\n            {         \n    if (Model.childItems[i].Type == \"Radio\")\n                                    {                                   \n                                    &lt;input value=\"@Model.childItems[i]Value\" name=\"something\" type=\"radio\"/&gt;@Model.childItems[i].Display                                        \n                                    }\n}\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":714,"score":2,"question_id":4170290,"title":"jQuery Templates and Razor?","body":"<p>Can someone shed some light on how these compare/complement each other in the context of an ASP.NET MVC application? </p>\n"},{"tags":["asp.net-mvc-3","unobtrusive-validation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12960527,"title":"Dropdown list validation not working client side with ViewModel - MVC/Jquery","body":"<p>I have a dropdown list, the property is in the Person model:</p>\n\n<pre><code>    [Required(ErrorMessage = \"Select a volunteer location\")]\n    [Display(Name = \"Name of School or Location:\")]\n    public int? RequestedVolunteerLocation { get; set; }\n</code></pre>\n\n<p>The Person model is then passed into/called by (not sure on terminology yet) the ViewModel:</p>\n\n<pre><code>public class PersonLocationModel\n{\n    // This is a combination of the person and location models, \n    // so they can be use together in the index view\n\n    public Person PersonModel { get; set; }\n    public Location LocationModel { get; set; }\n}\n</code></pre>\n\n<p>Then the ViewModel is passed to the View,  Here is the ddl code in the View:\nEDITTED to show more of the view code.  There are NO Partials in use here.</p>\n\n<pre><code>@model EligibityForm.Models.CompositeModels.PersonLocationModel\n\n\n&lt;fieldset class=\"editForm\"&gt;\n&lt;legend&gt;Volunteer Role&lt;/legend&gt;\n\n    &lt;div id=\"VolunteerRole\"&gt;\n        &lt;div class=\"h3-container\" &gt;\n            &lt;h3&gt;Role and Location Volunteering for:&lt;/h3&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"formGroup\" style=\"height: 100px;\"&gt;\n            &lt;div class=\"editor-field\"&gt;\n                &lt;table class=\"rolesTable\"&gt;\n                    &lt;tr&gt;\n                        &lt;td class=\"rolesFirstCell\"&gt;@Html.RadioButtonFor(model =&gt; model.PersonModel.RequestedVolunteerRole, \"Volunteer\") Volunteer&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td class=\"rolesFirstCell\"&gt;@Html.RadioButtonFor(model =&gt; model.PersonModel.RequestedVolunteerRole, \"Mentor\") Mentor&lt;/td&gt;                \n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td class=\"rolesFirstCell\"&gt;@Html.RadioButtonFor(model =&gt; model.PersonModel.RequestedVolunteerRole, \"Volunteer Coach\") Volunteer Coach&lt;/td&gt;\n                   &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td class=\"rolesFirstCell\"&gt;@Html.RadioButtonFor(model =&gt; model.PersonModel.RequestedVolunteerRole, \"Student Teacher\") Student Teacher&lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/table&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n\n&lt;div class=\"formGroup\" style=\"width: 400px; margin-top: 45px;\"&gt;\n  &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.RequestedVolunteerLocation)\n  &lt;/div&gt;\n  &lt;div class=\"editor-field\"&gt;\n                    @Html.DropDownListFor(model =&gt; model.RequestedVolunteerLocation, new SelectList(Model.VolunteerLoc, \"Value\", \"Text\"), \"Select\")\n&lt;span class=\"validation-error\"&gt;@Html.ValidationMessageFor(model =&gt; model.RequestedVolunteerLocation)&lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>All other fields will validate client side when the submit button is clicked, if I fill everything in the form except this dropdown, it <strong>hits the server</strong> then returns with the validation error.</p>\n\n<p>But if I move the property from the Person model directly into the ViewModel it works perfectly.  I guess I could leave it in there, but I would rather not have a random property sitting around.  Any ideas?</p>\n\n<p>Thank you for reading my post, and long live neck beards.</p>\n\n<p>\"I watched The View on tv the other day thinking it would be a show regarding MVC.\"</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12960623,"title":"MVC3 Html.DisplayFor -- Is it possible to have this control generate an ID?","body":"<p>I want to be able to display some text, but also have the text be modifiable via jQuery.</p>\n\n<pre><code>&lt;%= Html.DisplayFor(model =&gt; model.DeviceComponentName)%&gt;\n</code></pre>\n\n<p>If I used EditorFor instead of DisplayFor I would see an ID for the input control. I do not want the value to be editable in that way, though. So, I have made it a DisplayFor, but it does not generate an ID property for the element.</p>\n\n<p>Should I just wrap the DisplayFor in a div and do something like:</p>\n\n<pre><code>&lt;div id=\"&lt;%= ViewData.TemplateInfo.GetFullHtmlFieldName(\"DeviceComponentName\") %&gt;\"&gt;\n    &lt;%= Html.DisplayFor(model =&gt; model.DeviceComponentName)%&gt;\n&lt;/div&gt;\n\n$('#DeviceComponentName').text('newValue');\n</code></pre>\n\n<p>Or is there a cleaner way of achieving this?</p>\n\n<p><strong>Update:</strong> Is there a way which doesn't depend on hard-coded strings? Something that ties to the object itself so if my property name changes I'd get a compile error?</p>\n\n<p>Also, I am using this code, but I do not see an ID value appear:</p>\n\n<pre><code>&lt;td class=\"editableValue\"&gt;\n    &lt;%--Label should be editable, so it needs an ID, but only will be edited by jQuery so it can't be an EditorFor--%&gt;\n    &lt;%= Html.DisplayFor(model =&gt; model.DeviceComponentName, new { id = \"DeviceComponentName\" })%&gt;\n    &lt;button type=\"button\" id=\"ComponentTreeButton\" class=\"nestedDialogButton\"&gt;...&lt;/button&gt;\n&lt;/td&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","asp.net-mvc-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":108,"score":1,"question_id":12960490,"title":"TextBox Value gets blank on Submit","body":"<p>I created a application in MVC2 by choosing (ASP.Net MVC 2 Web Application). This provided some Home/About Controllers/Models/Views.</p>\n\n<h2>I additionally created a Model with the Name of Index like below...</h2>\n\n<pre><code>namespace MvcApplication1.Models\n{\n    public class Index\n    {\n        [DataType(DataType.Text)]\n        public String Name { get; set; }\n    }\n}\n</code></pre>\n\n<h2>Following is my Index View</h2>\n\n<pre><code>&lt;asp:Content ID=\"Content1\" ContentPlaceHolderID=\"TitleContent\" runat=\"server\"&gt;\n    Index\n&lt;/asp:Content&gt;\n&lt;asp:Content ID=\"Content2\" ContentPlaceHolderID=\"MainContent\" runat=\"server\"&gt;\n    &lt;% using (Html.BeginForm()) \n        {%&gt;\n    &lt;%:Html.TextBoxFor(x=&gt; x.Name) %&gt;\n    &lt;input type=\"submit\" name=\"Click here\" /&gt;\n    &lt;%} %&gt;\n&lt;/asp:Content&gt;\n</code></pre>\n\n<h2>Following is my Controller</h2>\n\n<pre><code>[HttpPost]\npublic ActionResult Index(Index Model)\n{\n      ViewData[\"Message\"] = \"Welcome to ASP.NET MVC!\";\n      return View();\n}\n</code></pre>\n\n<h2>Question</h2>\n\n<p>When I keep the Index controller like below. and If I click the submit button. This is clearing the TextBox COntrols. Like below</p>\n\n<pre><code>    public ActionResult Index()\n    {\n          ViewData[\"Message\"] = \"Welcome to ASP.NET MVC!\";\n          return View();\n    }\n</code></pre>\n\n<p>TextBox will not be cleared in case in incorporating the Model as Parameter in the Action method...</p>\n\n<p>What's the reason for this behaviour ?</p>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12957889,"title":"Can't Upload More Than One File at a Time in MVC","body":"<p>I post to the following controller action:</p>\n\n<pre><code>&lt;EmployeeAuthorize()&gt;\n&lt;HttpPost()&gt;\nFunction SendNewMessage(ByVal files1 As HttpPostedFileBase, ByVal files2 As HttpPostedFileBase) As JsonResult\n\n    Debug.Print(\"files1=\" + files1.ToString)\n    Debug.Print(\"files2=\" + files2.ToString)\n\n\n\n    Dim result = New Dictionary(Of String, String)\n\n\n\n\n    Dim fileName = Path.GetFileName(files1.FileName)\n    Dim filePath = Path.Combine(Server.MapPath(\"~/App_Data/uploads\"), fileName)\n\n    files1.SaveAs(filePath)\n\n\n    Dim fileName2 = Path.GetFileName(files2.FileName)\n    Dim filePath2 = Path.Combine(Server.MapPath(\"~/App_Data/uploads\"), fileName)\n\n    files2.SaveAs(filePath)\n\n\n\n\n    Return Json(result)\n\nEnd Function\n</code></pre>\n\n<p>I get an error on the <code>Debug.Print(\"files2=\" + files2.ToString)</code> line that says, \"<code>NullReferenceException Object reference not set to an instance of an object.</code>\"</p>\n\n<p>This is the view I am using:</p>\n\n<pre><code>        @Using Html.BeginForm(\"SendNewMessage\", \"Message\", FormMethod.Post, New With {.id = \"sendForm\", .enctype=\"multipart/form-data\"})\n\n            @&lt;div class=\"sendBox\"&gt;\n\n\n                &lt;h2 style=\"margin: 10px 0 0 0;\"&gt;Attachments:&lt;/h2&gt;\n                &lt;label&gt;Attachment 1: &amp;nbsp;&lt;input type=\"file\" name=\"files1\" id=\"file1\" class=\"files\"/&gt;&lt;/label&gt;\n                &lt;label&gt;Attachment 2: &amp;nbsp;&lt;input type=\"file\" name=\"files2\" id=\"file2\" class=\"files\"/&gt;&lt;/label&gt;\n                &lt;label&gt;Attachment 3: &amp;nbsp;&lt;input type=\"file\" name=\"files3\" id=\"file3\" class=\"files\"/&gt;&lt;/label&gt;\n\n                &lt;input type=\"submit\" value=\"Send\" /&gt;\n\n        &lt;/div&gt;\n\n        End Using\n</code></pre>\n\n<p>The first file is fine (<code>files1</code>).  Why can't I upload more than one file?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","input-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12751565,"title":"DropDownListFor enum doesn't bind back to the model","body":"<p>On my MVC form, I need to bind a drop down box to an enumeration on my ViewModel.  The best way I found to do that is described <a href=\"http://stackoverflow.com/a/8538813/356544\">here</a>.</p>\n\n<p>It appeared to work at first, but now that I've added validation to my form, I've discovered it does not bind back to the ViewModel.</p>\n\n<p>Here's my razor code:</p>\n\n<pre><code>&lt;div class=\"editor-field\"&gt;\n    @Html.DropDownListFor(model =&gt; model.response, \n                          new SelectList(Enum.GetValues(typeof(Vouchers.Models.ResponseType))),\n                          \"Please Select\")\n&lt;/div&gt;\n</code></pre>\n\n<p>And here's my view model definition for the field:</p>\n\n<pre><code>[DisplayName(\"Response\")]\n[Range(1, int.MaxValue, ErrorMessage = \"You must select a response before submitting this form.\")]\npublic ResponseType response { get; set; }\n</code></pre>\n\n<p>The problem is that I cannot submit the form; even after selecting a response from my drop down, the Validation error message for the Range attribute is displayed and the client side validation prevents the form from submitting.</p>\n\n<p>I believe this is because the SelectList for the drop down contains only the string names of the enum, not the underlying integer value.</p>\n\n<p>How can I solve this problem?</p>\n"},{"tags":["asp.net-mvc-3","google-chrome","content-disposition"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12955224,"title":"production vs dev server content-disposition filename encoding","body":"<p>I am using asp.net mvc3, download file in the same browser (Chrome 22). Here is the controller code:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Uploadfile(HttpPostedFileBase file)//HttpPostedFileBase file, string excelSumInfoId)\n{\n    ...\n    return File(\n        result.Output,\n        \"application/vnd.ms-excel\",\n        String.Format(\"{0}_{1:yyyy.MM.dd-HH.mm.ss}.xls\", \"Суммирование\", DateTime.Now));\n}\n</code></pre>\n\n<p>On my dev machine I download a programmatically created file with the correct name \"Суммирование_2012.10.18-13.36.06.xls\".</p>\n\n<p><strong>Response:</strong></p>\n\n<pre><code>Content-Disposition:attachment; filename*=UTF-8''%D0%A1%D1%83%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_2012.10.18-13.36.06.xls\nContent-Length:203776\nContent-Type:application/vnd.ms-excel\nDate:Thu, 18 Oct 2012 09:36:06 GMT\nServer:ASP.NET Development Server/10.0.0.0\nX-AspNet-Version:4.0.30319\nX-AspNetMvc-Version:3.0\n</code></pre>\n\n<p>And from production server I download a file with the name of the controller's action + correct extension \"Uploadfile.xls\", which is wrong.</p>\n\n<p><strong>Response:</strong></p>\n\n<pre><code>Content-Disposition:attachment; filename=\"=?utf-8?B?0KHRg9C80LzQuNGA0L7QstCw0L3QuNC1XzIwMTIuMTAuMTgtMTMuMzYu?=%0d%0a =?utf-8?B?NTUueGxz?=\"\nContent-Length:203776\nContent-Type:application/vnd.ms-excel\nDate:Thu, 18 Oct 2012 09:36:55 GMT\nServer:Microsoft-IIS/7.5\nX-AspNet-Version:4.0.30319\nX-AspNetMvc-Version:3.0\nX-Powered-By:ASP.NET\n</code></pre>\n\n<p>Web.config files are the same on both machines.</p>\n\n<p>Why does filename gets encoded differently for the same browser? Are there any kinds of default settings in web.config that are different on machines that I am missing?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","facebook-oauth"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12959387,"title":"asp.net-mvc3 Facebook Access Token","body":"<p>How do I get the facebook access token for getting insights.</p>\n\n<p>The following is used to get the client data only, but I want the user information/fan page insight. I would like to know if I can get the insights data programatically(without logging into facebook and allowing access) with some examples in Asp.Net MVC. Logging in to facebook and granting access should also be done programmatically, I do not want the end user to be involved.</p>\n\n<pre><code>var fb = new FacebookClient();\ndynamic result = fb.Get(\"oauth/access_token\", new { \nclient_id     = \"app_id\", \nclient_secret = \"app_secret\", \ngrant_type    = \"client_credentials\" \n});\nfb.AccessToken = result.access_token;\n</code></pre>\n\n<p>I tried using the above as but I cannot get the insight data. Can anyone please help me. If you do not understand I would be happy to explain in detail.</p>\n\n<pre><code>var fb = new FacebookClient();\ndynamic result = fb.Get(\"oauth/access_token\", new { \nclient_id     = \"app_id\", \nclient_secret = \"app_secret\", \ngrant_type    = \"client_credentials\",\nredirect_uri = \"redirect_uri\",\nscope= \"read_insights\"\n});\nfb.AccessToken = result.access_token;\n</code></pre>\n\n<p>Thank you.</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12959113,"title":"How can i set image link without adding it to my project?","body":"<p>I have a webproject where I want to read the <code>Content/Images/Funny/</code> for all my funny images :-) I would want to generate a list in my controller of image urls and push it to the view.</p>\n\n<p>How do I access it using relative path from project root? Dont want to use <code>Server.MapPath</code> since it will reveal my whole path on the server.</p>\n\n<p>I started a new mvc3 project and Its Content folder I want to map up. Any hints?</p>\n"},{"tags":["asp.net-mvc-3","validation","jquery-validate"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12955332,"title":"Validation of child object","body":"<p>I have an object that contains a child object. eg.</p>\n\n<pre><code>public class Person\n{\n    public string Name { get; set; }\n    public Car Car { get; set; }\n }\n\n public class Car\n {\n     public int CarId{get;set;\n     public string Name { get; set; }\n     public string Year { get; set; }\n }\n</code></pre>\n\n<p>Then on my Razor view i use a DropDownlistFor, with the list of cars that the user can select. I bind the Dropdownlist like </p>\n\n<pre><code>    @Html.LocalLabelFor(m =&gt; m.Person.Car)\n    @Html.DropDownListFor(m =&gt; m.Person.Car, new SelectList(Model.Cars, \"CarID, \"Name\"), \"Select\")\n</code></pre>\n\n<p>When the user does not select a car, then the jquery validation still validates the CarId as not being selected. The car object must be nullable.</p>\n\n<p>I know I can get around this by creating a flat viewmodel. </p>\n\n<p>Is there any other way to make the car optional on the form ?</p>\n"},{"tags":["asp.net-mvc-3","webgrid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12956357,"title":"WebGrid set CheckBox Limit","body":"<p>Iam using Webgrid mvc3 with razor.\nDisplaying a datatable with webgrid, i have to apply a condition that only upto 3 checkboxes can be checked and did that successfully but i noticed that it is taking upto 3 checkboxes for each page rather than 3 checkboxes for all the pages, and it is no remembering the selection in previous pages. where do you think i should make the change here is my controller: </p>\n\n<pre><code>var grid = new WebGrid(@Model, canSort: true, canPage: true, rowsPerPage: 5, sortFieldName: \"TotalVotes\");\ngrid.Pager(WebGridPagerModes.FirstLast);\nvar cols = new List&lt;WebGridColumn&gt;();\nif (!IsVoted)\n{\n    cols.Add(grid.Column(header: \"Vote\", format: @&lt;text&gt;&lt;input id = \"chkVote_\"+ @item.Id type=\"checkbox\" onchange=\"onChkChanged(this)\" class=\"chkVote\" value= @item.Id /&gt;&lt;/text&gt;));\n}\ncols.Add(grid.Column(\"Id\", \"Id\"));\ncols.Add(grid.Column(\"UserWish\", \"Big Idea\"));\ncols.Add(grid.Column(\"TotalVotes\", \"Total Votes\"));\ncols.Add(grid.Column(\"Status\", \"Status\"));\n\n@grid.GetHtml(columns: grid.Columns(cols.ToArray()), tableStyle: \"table\",\n    alternatingRowStyle: \"alternate\",\n    headerStyle: \"header\");\n</code></pre>\n\n<p>And Here is my JScript</p>\n\n<pre><code>var onChkChanged = function (e) {\nvar chkbox = $(e);\nvar boxes = $(\":checkbox:checked\");\nif (boxes.length &gt; 3) {\n    alert('You cannot choose more than 3 choices');\n    $(e).attr(\"checked\", false);\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["c#","asp.net-mvc-3","unity"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":49,"score":3,"question_id":12956065,"title":"Unity MVC3 Controller Constructor issue","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/2343532/unity-ioc-container-and-how-to-resolve-different-instances-of-the-same-interface\">Unity IOC container and how to resolve different instances of the same interface</a>  </p>\n</blockquote>\n\n\n\n<p>I have a controller constructor that has two parameters that implement the same interface shown below. I have tried to register these types in Unity also shown below but I have run into a problem.</p>\n\n<p><em><strong>Controller Constructor</em></strong></p>\n\n<pre><code>public ControlController(IAdapter daveAdapter, IAdapter bobAdapter)\n{\n        DaveAdapter = daveAdapter;\n        BobAdapter = bobAdapter;\n}\n</code></pre>\n\n<p><em><strong>Unity registration</em></strong></p>\n\n<pre><code> container\n.RegisterType&lt;IAdapter, DaveAdapter&gt;()\n.RegisterType&lt;IAdapter, BobAdapter&gt;()\n</code></pre>\n\n<p>When the controller is constructed both adapters are resolved as DaveAdapter's instead of one Dave and one Bob. How can I tell unity to differentiate between the two adapters so that the controller has an adapter of each type?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","web-config"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12955790,"title":"Alternate web.config for different servers","body":"<p>I was reading this <a href=\"http://blogs.msdn.com/b/webdev/archive/2009/05/04/web-deployment-web-config-transformation.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/webdev/archive/2009/05/04/web-deployment-web-config-transformation.aspx</a> but when I right click on web.config in Visual Studio the \"Add Coding Transforms\" is grayed out.  (I am not debugging or anything.)</p>\n\n<p>Basically, I want to change my connection strings based on what server I'm publishing to.  I have a dev server, and I have a productions server.</p>\n\n<p>What way can I accommodate this in ASP.NET MVC?</p>\n\n<p>Currently, there exist two files under my web.config: <code>Web.Debug.Config</code> and <code>Web.Release.Config</code>.</p>\n\n<p>Thank you.</p>\n"},{"tags":["html","asp.net-mvc-3","razor","enums"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12954123,"title":"Filling dropdownlist from different sources","body":"<p>I have a dropdownlist and a form. Form fields change dynamically according to selected value. I can add dropdownlist values from user interface, but at the beginning I always have three values there (which I'll call 'statics'). When selecting from dropdownlist, if selected value matches one of the static's value, then form fields must be added (different fields for each of three statics), if not, then form must be empty. I have 'Dictionary' table in database, where is filled with for example countries, citizenships (I hope you understand what type of values are inserted in this table). I think I have two different ways to accomplish this:</p>\n\n<p>1.Write statics in enumeration called Static (Static1 = -1, Static2 = -2 ... //negative numbers, to avoid conflict between Dictionary.Id and enumeration value) then merge with values dynamically added in dictionary:</p>\n\n<pre><code>    switch(selectedValue)\n    {\n        case (int)Static.Static1:\n            @(inputs for static1)\n            break;\n        case (int)Static.Static2:\n            @(inputs for static2)\n            break;\n        case (int)Static.Static3:\n            @(inputs for static3)\n            break;\n        default:\n            //empty\n    }\n</code></pre>\n\n<p>Dropdown will look like this:</p>\n\n<pre><code> &lt;select&gt;\n     &lt;option value=-1&gt; Static1 &lt;/option&gt;\n     &lt;option value=-2&gt; Static2 &lt;/option&gt;\n     &lt;option value=-3&gt; Static3 &lt;/option&gt;\n     &lt;option value=0&gt; Dynamic1 &lt;/option&gt;\n     ...\n &lt;/select&gt;\n</code></pre>\n\n<p>2.Write statics and dynamics all together in Dictionary table:</p>\n\n<pre><code>    switch(selectedText)\n    {\n        case \"static1\":\n            @(inputs for static1)\n            break;\n        case \"static2\":\n            @(inputs for static2)\n            break;\n        case \"static3\":\n            @(inputs for static3)\n            break;\n        default:\n            //empty\n    }\n</code></pre>\n\n<p>Dropdown will look like this:</p>\n\n<pre><code> &lt;select&gt;\n     &lt;option value=0&gt; Static1 &lt;/option&gt;\n     &lt;option value=1&gt; Static2 &lt;/option&gt;\n     &lt;option value=2&gt; Static3 &lt;/option&gt;\n     &lt;option value=3&gt; Dynamic1 &lt;/option&gt;\n     ...\n &lt;/select&gt;\n</code></pre>\n\n<p>In 2nd case we must prohibit user to add names which match statics names.</p>\n\n<p>Which solution would you prefer? Or if you have better solution, please tell me</p>\n"},{"tags":["asp.net","asp.net-mvc-3","events","authentication","iis7"],"answer_count":0,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":12954880,"title":"Clarify Sequence of ASP.NET Lifecycle Events","body":"<p>I've found an MSDN article which is perhaps the most helpful I've yet seen on the <a href=\"http://msdn.microsoft.com/en-us/library/bb470252%28v=vs.100%29.aspx\" rel=\"nofollow\">sequence and workings of the IIS integrated pipeline</a>.  But it raises interesting questions regarding authentication.</p>\n\n<p>Forms Authentication is shown as \"executing\" very early in the pipeline.  The \"Execute\" handler, such as for ASP.NET MVC routing and controller execution, is shown much later.  But all too often the authentication story for ASP.NET MVC looks like this:</p>\n\n<pre><code>public ViewResult Login(LoginModel login)\n{\n    if (ModelState.IsValid)\n    {\n        if (Membership.ValidateUser(...)){\n            FormsAuthentication.SetAuthCookie(...);\n        }\n    }\n    //...\n}\n</code></pre>\n\n<p>The above code suggests that (forms) authentication occurs during the \"Execute\" handler stage, not the much earlier \"Authentication\" IIS stage.</p>\n\n<p>Can somebody clarify this seeming discrepency?  </p>\n\n<p>My own guess about this is that the IIS \"authentication\" stage will execute FormsAuthenticate.Authorize(...), when indicated, if no membership provider has been configured by me.  But if I configure my own membership provider, then the IIS \"authentication\" stage effectively does nothing - and waits for the \"execute\" stage so that my own authentication code can execute.  </p>\n\n<p>If my guess is correct, then if I've configured my own membership provider, it means that the \"Acquire State\" IIS stage will also not function as expected: it will not yet \"see\" session established because session won't be established until I have done my authentication step inside my MVC controller.  Or perhaps the \"Authenticate\" and \"Acquire State\" related application events will \"hold-off\" and not be raised <em>until</em> my controller has executed its authentication code?</p>\n\n<p>Yes? No?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","redirect","routing"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":12948650,"title":"Handling Wrong/Bad Routes in MVC 3","body":"<p>In my MVC application, the controllers are being created using spring IOC as controller factory. If the user is requesting for a wrong controller by editing the url in the browser I am displaying in the browser  'the resource is not exist' message. Instead I want to direct him to the login page of the application.</p>\n\n<pre><code> public class ControllerFactory : IControllerFactory\n{\n    private static readonly ILog log =\n      LogManager.GetLogger(typeof(ControllerFactory));\n    public IController CreateController(RequestContext requestContext, string controllerName)\n    {\n        log.Debug(\"ControllerFactory.CreateController :controllerName =\" + controllerName);\n        controllerName = controllerName.ToLower();\n        IApplicationContext ctx = ContextRegistry.GetContext();\n        Controller ControllerObj = null;\n\n        if(ctx.ContainsLocalObject(controllerName))\n        {\n            ControllerObj = (Controller)ctx[controllerName];\n            log.Debug(\"Controller Object is created :\" + controllerName);\n        }\n        else\n        {\n               //Showing error message\n            requestContext.HttpContext.Response.Write(String.Format(\"&lt;br/&gt;&lt;b&gt;&lt;valign=\\\"center\\\"&gt;&lt;Font Size=\\\"6\\\" Font Color=\\\"Red\\\"&gt; The Resource {0} is not available&lt;/b&gt;\", controllerName));\n         // **Insteadd of showing the above message I want to direct user to the login page.**\n         // **\"Account/Login\"**\n            log.Error(\"there is no controller defintion with \" + controllerName);\n            requestContext.HttpContext.Response.End();\n        }\n        return ControllerObj;\n    }\n\n\n    public SessionStateBehavior GetControllerSessionBehavior(RequestContext requestContext, string controllerName)\n    {\n        return SessionStateBehavior.Default;\n    }\n\n    public void ReleaseController(IController controller)\n    {\n        IDisposable disposable = controller as IDisposable;\n        if (disposable != null)\n        {\n            disposable.Dispose();\n        }\n    }\n}\n</code></pre>\n\n<p>How can I redirect user to login page(\"/Account/Login\") instead of showing error message?</p>\n"},{"tags":["asp.net-mvc-3","cookies"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12954167,"title":"how can i find cookie of new registration user and use its value in partial view mvc3?","body":"<p>i have two methodes : one for registering new user <strong>AddNewUser(MemberRegisterModel mm)</strong> , and another for creating cookie for him  <strong>CreateCookie(MemberLoginModel member)</strong>.\ni want to use this cookie that has been created after registering to show username top of all page until he log off.</p>\n\n<p>i traced my code and saw cookie was created.\ni use this code in <strong>HeaderPartial.cshtml</strong> to give username from cookie.</p>\n\n<pre><code>&lt;div id=\"top\"&gt;\n@if (HttpContext.Current.Response.Cookies[FormsAuthentication.FormsCookieName] != null)\n  {\n    HttpCookie cookie =\n    HttpContext.Current.Request.Cookies.Get(FormsAuthentication.FormsCookieName);\n    var formAuthTicket = FormsAuthentication.Decrypt(cookie.Value);\n    string CookieValue = formAuthTicket.UserData.ToString();\n    &lt;text&gt; welcome &lt;b&gt; @Html.Label(CookieValue)&lt;/b&gt;! \n    [@Html.ActionLink(\"Log off\", \"logout\", \"Members\", new { area = \"Members\" }, null)]\n    &lt;/text&gt;\n}\nelse\n{\n &lt;text&gt;Welcome Guest!&lt;/text&gt;\n    @:[ @Html.ActionLink(\"Log in\", \"Login\", \"Members\", new { area = \"Members\" }, null)]\n\n}\n</code></pre>\n\n<p></p>\n\n<p>but it doesn't work and shows error on this line:</p>\n\n<pre><code>    var formAuthTicket = FormsAuthentication.Decrypt(cookie.Value);\n</code></pre>\n\n<p>error:</p>\n\n<blockquote>\n  <p>Invalid value for 'encryptedTicket' parameter.</p>\n</blockquote>\n\n<p>what should i do?\ni want to show username top of all page, and all username's db values in personal page of him.\nand he will be log on and surf all page until he sign out.</p>\n"},{"tags":["asp.net-mvc-3","sql-server-2008","entity-framework"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2149,"score":1,"question_id":10408182,"title":"A network-related or instance-specific error occurred while establishing a connection to SQL Server - ASP.NET MVC Entity Framework","body":"<p>I am using ASP.Net MVC 3 (Entity Framework) with Sql server 2008. Connection string is fine in web.config. But sometimes i get the following exception from my application:</p>\n\n<pre><code>    System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)\n\nGenerated: Wed, 02 May 2012 05:05:21 GMT\n\nSystem.Data.EntityException: The underlying provider failed on Open. ---&gt; System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)\n   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)\n   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()\n   at System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity)\n   at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject)\n   at System.Data.SqlClient.SqlInternalConnectionTds.LoginWithFailover(Boolean useFailoverHost, ServerInfo primaryServerInfo, String failoverHost, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout)\n   at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)\n   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance)\n   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection)\n   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options)\n   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject)\n   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject)\n   at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)\n   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)\n   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)\n   at System.Data.SqlClient.SqlConnection.Open()\n   at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean&amp; closeStoreConnectionOnFailure)\n   --- End of inner exception stack trace ---\n   at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean&amp; closeStoreConnectionOnFailure)\n   at System.Data.EntityClient.EntityConnection.Open()\n   at System.Data.Objects.ObjectContext.EnsureConnection()\n   at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)\n   at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable&lt;T&gt;.GetEnumerator()\n   at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)\n   at System.Data.Objects.ELinq.ObjectQueryProvider.&lt;GetElementFunction&gt;b__2[TResult](IEnumerable`1 sequence)\n   at System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle[TResult](IEnumerable`1 query, Expression queryRoot)\n   at System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute[S](Expression expression)\n   at System.Linq.Queryable.SingleOrDefault[TSource](IQueryable`1 source)\n   at MyApp.Data.UserRepository.GetUserDetails(String username)\n   at MyApp.Core.Services.SiteService.GetUserDetails(String username, Int64 userId)\n   at MyApp.PublicSite.Web.Controllers.BaseController.Initialize(RequestContext requestContext)\n   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)\n   at MyApp.PublicSite.Web.Controllers.BaseController.Execute(RequestContext requestContext)\n   at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)\n   at System.Web.Mvc.MvcHandler.&lt;&gt;c__DisplayClass6.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5()\n   at System.Web.Mvc.Async.AsyncResultWrapper.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0()\n   at System.Web.Mvc.Async.AsyncResultWrapper.&lt;&gt;c__DisplayClass8`1.&lt;BeginSynchronous&gt;b__7(IAsyncResult _)\n   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()\n   at System.Web.Mvc.MvcHandler.&lt;&gt;c__DisplayClasse.&lt;EndProcessRequest&gt;b__d()\n   at System.Web.Mvc.SecurityUtil.&lt;GetCallInAppTrustThunk&gt;b__0(Action f)\n   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)\n   at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)\n   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)\n   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()\n   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously)\n</code></pre>\n\n<p>The Connection string is:</p>\n\n<pre><code>    &lt;connectionStrings&gt;\n    &lt;add name=\"MyAppDBContainer\" connectionString=\"metadata=res://*/MyAppDB.csdl|res://*/MyAppDB.ssdl|res://*/MyAppDB.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;data source=SERVERNAME;initial catalog=MyAppDB;persist security info=True;user id=USERID;Password=PASSWORD;multipleactiveresultsets=True;App=EntityFramework&amp;quot;\" providerName=\"System.Data.EntityClient\" /&gt;\n  &lt;/connectionStrings&gt;\n</code></pre>\n\n<p>This exception occurs randomly and not able to get/reproduce it everytime. Any possible settings i may be missing here? Please suggest.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":12953495,"title":"Creating a simple site to display my apps, having some routing issues","body":"<p>I want to create a site where I display my apps. I use MVC 3.</p>\n\n<p>My Home controller is a typical overview page where I'll list all my apps. Then there is the App controller, where if you click on a app on a overview could get more info... url scenario would be:</p>\n\n<pre><code>http://myhost.com                 &lt;-- overview\nhttp://myhost.com/App/app_name    &lt;-- render info about that app\n</code></pre>\n\n<p>But I'm having a small problem understanding routes, thought i did it right:</p>\n\n<pre><code>            routes.MapRoute(\n                \"App\", // Route name\n                \"{controller}/{id}\", // URL with parameters\n                new { controller = \"App\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n            );\n\n            routes.MapRoute(\n                \"Default\", // Route name\n                \"{controller}/{action}/{id}\", // URL with parameters\n                new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n            );\n</code></pre>\n\n<p>And how do I get a hold of id in the controller?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12954026,"title":"How can I open a text file relative to my MVC project?","body":"<p>In my bin file I have set up som test data, and I want my application to be able to access logfiles that are stored in <code>bin/log/log00001.txt</code>.</p>\n\n<p>However, in my crontroller, when I try to use a TextReader on the following path it goes somewhere else: <code>new StreamReader(\"log/log00001.txt\")</code></p>\n\n<p>How do I read stuff relative to my project?</p>\n"},{"tags":["asp.net-mvc-3","routing"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":47,"score":3,"question_id":12943566,"title":"MVC3 routing confusion","body":"<p>I want to be able to access the following through one route constraint declaration:</p>\n\n<pre><code>/picks                        \n/picks/{teamID}/{week}        \n/picks/save/{teamID}/{week}   \n</code></pre>\n\n<p>This does not work for the second request: <code>/picks/{teamID}/{week}</code></p>\n\n<pre><code>routes.MapRoute(\n  \"picks\",\n  \"picks/{action}/{teamID}/{week}\",\n  new { controller = \"Picks\", \n        action = \"Index\", \n        teamID = UrlParameter.Optional, \n        week = UrlParameter.Optional });\n</code></pre>\n\n<p>It seems to me the action should be defaulted to <code>Index</code> since I don't supply one, but I'm assuming it's actually trying to find the action <code>{teamID}</code> (which is a number).  </p>\n\n<p>How do I make this constraint handle all 3 scenarios?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12953087,"title":"Fill values in ViewModel by just having an ID?","body":"<p>I am not sure if and how one can do this but in my controller I have:</p>\n\n<pre><code>[HttpGet]\npublic ActionResult Detail(int userId)\n{\n  UserDetailViewModel user = new UserDetailViewModel();\n  user.UserId = userId;\n  user.Email = Email;\n  return View(user);\n}\n</code></pre>\n\n<p>My UserDetailViewModel:</p>\n\n<pre><code>  namespace Zinc.Web.Areas.Admin.ViewModels.User\n\n  public class UserDetailViewModel\n  {\n    [LocalizedRequired]\n    [DisplayName(\"UserId\")]\n    public int UserId { get; set; }\n\n    [LocalizedRequired]\n    [DisplayName(\"Email\")]\n    public string Email { get; set; }\n  } \n</code></pre>\n\n<p>I have the Id of the user but need to get the rest of the details like email, name, surname etc.. I have just put email down for now..\nMust I pass into the view another model that has those details?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","jquery-validate"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1934,"score":3,"question_id":8022695,"title":"ASP.net MVC 3 jQuery Validation; Disable Unobtrusive OnKeyUp?","body":"<p>Is there a way to disable the jQuery Validation for a certain validator (creditcard) so that it only occurs onblur, instead of onkeyup?</p>\n\n<p>Based on the jQuery Validator documentation I thought I could do something like this:</p>\n\n<pre><code>$(function () {\n    $(\"[data-val-creditcard]\").validate({\n        onkeyup: false\n    })\n});\n</code></pre>\n\n<p>However, it doesn't seem to be working.</p>\n\n<p>I also tried doing the following on my validator:</p>\n\n<pre><code>public class CreditCardValidator : DataAnnotationsModelValidator&lt;CreditCardAttribute&gt;\n{\n    string _message;\n\n    public CreditCardValidator(ModelMetadata metadata, ControllerContext context, CreditCardAttribute attribute)\n        : base(metadata, context, attribute)\n    {\n        _message = attribute.ErrorMessage;\n    }\n\n    public override IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules()\n    {\n        var rule = new ModelClientValidationRule\n        {\n            ErrorMessage = _message,\n            ValidationType = \"creditcard\"\n        };\n        rule.ValidationParameters.Add(\"onkeyup\", false);\n        return new[] { rule };\n    }\n}\n</code></pre>\n\n<p>It doesn't work either, but I was just taking a stab at the appropriate use of ValidationParameters.</p>\n\n<p>It is kind of annoying to be entering a credit card number in a form and having it randomly change from invalid to valid, then back to invalid.</p>\n\n<p>Any ideas?  Thanks!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","performance","mini-profiler"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":11154966,"title":"Strange MVC3 performance issue","body":"<p>I have a strange issue that is occurring before my code appears to reach my controller.</p>\n\n<p>From using the SO Mini-MVC-Profiler, I've found that a certain request is taking 500ms (500ms!!!), and for what I know it is doing; it's excessively high!</p>\n\n<p><img src=\"http://i.stack.imgur.com/QUz2B.png\" alt=\"enter image description here\"></p>\n\n<p>We do use unity IoC to create our dependencies, and in the ase of the below EntityController being created, there is a AppServices dependently to be created, which does require some service classes to be instantiated, but I wouldn't expect this takes 500ms, it's simply constructors.</p>\n\n<p>Is there any way I could debug to find out specifically where time is being taken up?</p>\n\n<p>Thanks,</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12947415,"title":"Style With razor tag Didn't work in IE?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/2324250/style-display-none-doesnt-work-on-option-tags-in-chrome-but-it-does-in-firefo\">style.display=‘none’ doesnt work on option tags in chrome, but it does in firefox, anyone know why? or a workaround?</a>  </p>\n</blockquote>\n\n\n\n<pre><code> @For Each myItem In Data\n      @&lt;option style=\"display: none; \" value=\"@myItem.dataCode\" child=\"@myItem.dataCodeChild\" &gt;\n          @myItem.dataCode\n      &lt;/option&gt;                                \n Next myItem\n</code></pre>\n\n<p>All Option tags still show but style's in IE. element still show style=\"display: none; \". \nBut it work on Chrome. How can fix it to work in IE.?</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":10,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":8238,"score":8,"question_id":5314476,"title":"How do you include .html or .asp file using razor?","body":"<p>Is it possible to use server side include in Razor view engine to include .html or .asp file?  We have an .html file and .asp files that contain website menus that are used for all of our websitse.  Currently we use server side include for all of our sites so that we only need to change the mensu in one place.</p>\n\n<p>I have the following code in the body of my _Layout.cshtml</p>\n\n<pre><code>&lt;body&gt;\n&lt;!--#include virtual=\"/serverside/menus/MainMenu.asp\" --&gt;   \n&lt;!--#include virtual=\"/serverside/menus/library_menu.asp\" --&gt;\n&lt;!--#include virtual=\"/portfolios/serverside/menus/portfolio_buttons_head.html\" --&gt;\n@RenderBody()\n&lt;/body&gt;\n</code></pre>\n\n<p>Instead of including the content of the file, if I do a view source, I see the literal text.</p>\n\n<pre><code>\" &lt;!--#include virtual=\"/serverside/menus/MainMenu.asp\" --&gt; \n    &lt;!--#include virtual=\"/serverside/menus/library_menu.asp\" --&gt;\n    &lt;!--#include virtual=\"/portfolios/serverside/menus/portfolio_buttons_head.html\" --&gt;\"\n</code></pre>\n"},{"tags":["asp.net-mvc-3","c#-4.0","c#-3.0","asp.net-mvc-4"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":63,"score":3,"question_id":12836888,"title":"Append HTML code to a existing Razor section","body":"<p>Is it possible to append the HTML code to a existing razor section? </p>\n\n<p>Below is my scenario:</p>\n\n<p>My _layout.cshtml contains something like this:</p>\n\n<pre><code>@RenderSection(\"BottomSection\", required: false)\n</code></pre>\n\n<p>and in one of the view - _article.cshtml, I have defined the section like below:</p>\n\n<pre><code>@section BottomSection\n{\n &lt;script src='~/Scripts/module/article_details.js' type='text/javascript'&gt;&lt;/script&gt;\n &lt;script src='~/Scripts/module/modal.js' type='text/javascript'&gt;&lt;/script&gt;\n @MvcHtmlString.Create(Model.ExtraStuff)   \n}\n</code></pre>\n\n<p>and in a partial view named _counter.cshtml, which is used by the above view; I would like to add more HTML code to the same section i.e., BottomSection. </p>\n\n<p>I tried declaring the BottomSection section again in the partial view:</p>\n\n<pre><code>@section BottomSection{\n&lt;text&gt;More data&lt;/text&gt;\n}\n</code></pre>\n\n<p>But it didn't worked out. </p>\n\n<p>Is there any way to achieve this - dynamically append more code to an already defined razor section in MVC 4? \nPlease note that the partial view doesn't expects any data from the parent view/model.\n And I'm using MVC 4 with .Net Framework 4.0/VS2010.</p>\n"},{"tags":["asp.net-mvc-3","e-commerce"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12785566,"title":"What's a good PAID FOR ASP.NET MVC3 ecommerce solution?","body":"<p>Has anyone got any experience with a good PAID FOR .Net E-comms platform?</p>\n\n<p>I just need to set up a half good shop for a friend but all of the free ones seem poorly archictected and I'm hoping the paid for ones might be a bit higher quality?</p>\n\n<p>I'd like it to be built using Asp.Net Mvc 3 and be able to handle UK payments and shipping with little if any fuss.</p>\n\n<p>[Update]</p>\n\n<p>I have started blogging about my attempts to develop my own solution. Rather than just being negative and blasting me for my opinion - why not participate in a conversation!? </p>\n\n<p><a href=\"http://iwayneo.blogspot.co.uk/2012/10/building-www.html\" rel=\"nofollow\">http://iwayneo.blogspot.co.uk/2012/10/building-www.html</a></p>\n\n<p><a href=\"http://iwayneo.blogspot.co.uk/2012/10/building-www_16.html\" rel=\"nofollow\">http://iwayneo.blogspot.co.uk/2012/10/building-www_16.html</a></p>\n\n<p>This question should not have been closed as it is an exact replica of another question asking for specifically OS solutions - and that question is PROTECTED!!!!!</p>\n"},{"tags":["asp.net-mvc-3","validation"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":104,"score":2,"question_id":12950640,"title":"How to disable data annotation required field validator in MVC","body":"<p>I am trying to design a page that has two radio button options and two text boxes with each radio button. I am validating these text boxes using data annotation validation attribute.\nI am using jquery slider.toggle() to display each text boxes according to the radio button clicked. When i submit the page, required field validators of both text boxes are triggered. What I want to do is to disable the first text box validation when the second radio button is clicked. \nIs there any method in MVC to disable the validation of text boxes when the radio button associated to it is not selected?</p>\n"},{"tags":["javascript","asp.net-mvc-3","firefox","scrollbar"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12950017,"title":"Scroll bar in firefox","body":"<p>I have a Javascript code that opens a pop-up windows which contains a table. The problem is that table contains too many rows to be displayed on the screen area. On IE and Chrome i have a scroll bar to move up and down, but on Firefox i don't.\nThis is the javascript code:</p>\n\n<pre><code>    function openWindowInsertResp() {\n     .............\ndropDownValueA + \"&amp;subactivityID=\" + dropDownValueS, \"PartialTask\", \"status = 1,height = auto,width = 900,top = 100,left=250,resizable = 1\");\n.............\n    }\n</code></pre>\n\n<p>and this is the HTML:</p>\n\n<pre><code>&lt;table style=\"border:none; width:100%;\"&gt;\n&lt;tr&gt;\n&lt;th style=\"text-align:center;\"&gt;\nNo.&lt;/th&gt;\n&lt;th style=\"text-align:center;\"&gt;Description&lt;/th&gt;&lt;/tr&gt;\n@{\n    int i=1;\n    foreach (Project.Domain.Entities.Labor_JobDesc cr in contracts)\n    {\n        &lt;tr style=\"border:none\"&gt;\n        &lt;td style=\"text-align:center; width:2%;\"&gt;@i&lt;/td&gt;\n        &lt;td style=\"text-align:center;\"&gt;\n         &lt;textarea cols=\"auto\"; rows=\"auto\"; style=\"width:100%;\"; readonly=\"readonly\"&gt; @cr.Res&lt;/textarea&gt;\n        &lt;/td&gt;\n        &lt;/tr&gt;\n        i++;\n    }\n}\n&lt;/table&gt;\n</code></pre>\n\n<p>What I have to do to have a scroll bar on Firefox? Any ideas?\nThanks in advance.</p>\n"},{"tags":["asp.net-mvc-3","webgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12489279,"title":"Webgrid MVC 3 conditional row style","body":"<p>I am using a WebGrid to display a list of items,</p>\n\n<p>I like to set the background color of the rows based on a condition. I want to set the background color of the entire row, not just one cell.</p>\n\n<p>Any example?</p>\n\n<p>thank you</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12949479,"title":"How to make use of Viewbag in my View","body":"<p>I dont understand, I have my in my Controller:</p>\n\n<pre><code>[HttpGet]\npublic ActionResult Detail(int userId)\n{\n  var user = ZincService.GetUserForId(userId);\n  if (user != null)\n  { \n      ViewBag.user = userId;\n      ViewBag.email = user.Email;\n      ViewBag.title = user.JobTitle;\n      ViewBag.node = user.Node;\n  }\n  return View(user);\n}\n</code></pre>\n\n<p>then my view, Detail.aspx</p>\n\n<pre><code>&lt;div id=\"user-details-view\"&gt;\n&lt;div&gt;\n  Title:\n&lt;/div&gt;\n&lt;div&gt;\n   &lt;%: Model.JobTitle %&gt;\n   &lt;%: Model.News %&gt;\n   &lt;%: Model.Node %&gt;\n&lt;/div&gt;\n&lt;div&gt;\n   &lt;%: Html.ActionLink(\"Change Email Address\", \"ChangeEmailAddress\", new { @id = Model.UserId })%&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>when I run my app i get an error:</p>\n\n<p>The resource cannot be found. \nDescription: HTTP 404. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. </p>\n\n<p>Requested URL: /Areas/Admin/Views/User/Detail.aspx</p>\n\n<p>I dont understand? Is it because of syntax errors?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":674,"score":1,"question_id":7676994,"title":"DropDownListFor(...) selecting boolean false by default","body":"<p>I have typical YesNo kind of dropdown in the application. For that, I have developed model (rather ViewModel Utility) class for future extension prupose.</p>\n\n<pre><code>public string Text { get; set; } // represents text part\n        public bool Value { get; set; } // represent value\n        public List&lt;DropDown&gt; DropDowns { get; set; } //list for binding\n        public void BuildYesNoDropDown()\n        {\n            DropDowns = new List&lt;DropDown&gt;();\n            DropDowns.Add(new DropDown { Text = \"Yes\", Value = true });\n            DropDowns.Add(new DropDown { Text = \"No\", Value = false });\n        }\n</code></pre>\n\n<p>Then, I bind it in view like following:</p>\n\n<pre><code>@Html.DropDownListFor(x =&gt; x.SelectedValue, new SelectList(Model.DropDowns, \"Value\", \"Text\",1),\"Select\") //last para - OptionLabel\n</code></pre>\n\n<p>On the view, all three parameters are getting display i.e. \"Select\", \"Yes\" and \"No\". But, by default \"No\" has been selected. If I make \"Value\" property as integer then it works fine and by default \"Select\" gets selected, but as mentioned in the code, if I tend to go with bool type then \"No\" gets selected. </p>\n\n<p>How to get normal behavior when DataValueField is bool?</p>\n"},{"tags":["asp.net-mvc-3","unobtrusive-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":33,"score":-1,"question_id":12948365,"title":"How to get immediate effect while using unobtrusive ajax in mvc 3","body":"<p>I'm trying to introduce some unobtrusive ajax in my simple blog site, there is  a viewpost page, where I want the comment to be ajax enabled. I can post the comments by using ajax, but that comment not showing instantly, page needs to be refreshed to see the comments. Also I have two action as next &amp; previous, which will navigate through the posts, but relevant comments is not showing when pressing the next or previous button.</p>\n\n<p>here is view:</p>\n\n<pre><code>@model  Presentation.Models.PostComment\n@{\nViewBag.Title = \"ViewPost\";\nLayout = \"~/Views/Shared/_Layout.cshtml\";\n\n}\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;View Post&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div id=\"viewStory\" style=\"height: auto; width: 850px; background-color: Silver\"&gt;\n    &lt;h3&gt;@Html.DisplayFor(x =&gt; x.Posts.PostTitle)&lt;/h3&gt;\n    &lt;br /&gt;\n    &lt;br /&gt;\n    @Html.Raw(System.Web.HttpUtility.HtmlDecode(Model.Posts.PostStory))\n    &lt;br /&gt;\n    @{\n        var PID = Model.Posts.PostID;\n    }\n    @Html.TextBoxFor(x =&gt; x.Posts.PostID, new { @class = \"PIDPost\" })\n&lt;/div&gt;\n&lt;div id=\"Button\" style=\"height: auto; width: 850px\"&gt;\n    &lt;span id=\"Next\" style=\"float: left; margin-top: 10px; margin-left:  10px;\"&gt;@Html.ActionLink(\"Previous\", \"PreviousPost\", \"Home\", new { @model = PID }, null)&lt;/span&gt;\n    &lt;span id=\"Previous\" style=\"float: right; margin-top: 10px; margin-right: 10px;\"&gt;@Html.ActionLink(\"Next\", \"NextPost\", \"Home\", new { @model = PID }, null)&lt;/span&gt;\n    &lt;br /&gt;\n&lt;/div&gt;\n&lt;br /&gt;\n&lt;div id=\"CommetPartial\" style=\"height: auto; width: 850px; background-color: Silver;\"&gt;\n    @Html.Label(\"Comment:\")\n    @*@Html.Partial(\"Comment\", @ViewData)*@\n&lt;/div&gt;\n&lt;div id=\"NewComment\" style=\"height: auto; width: 850px; background-color: Silver;\n    margin-top: 10px;\"&gt;\n    @{\n        AjaxOptions ajaxopts = new AjaxOptions { HttpMethod = \"Post\" };\n    }\n    @using (Ajax.BeginForm(\"NewComment\", ajaxopts))\n    {\n        @Html.ValidationSummary()\n        &lt;span style=\"margin-left: 10px\"&gt;\n            @Html.TextAreaFor(x =&gt; x.Comments.Comments, new { @class = \"Comment\" })\n        &lt;/span&gt;\n        @Html.TextBoxFor(x =&gt; x.Posts.PostID, new { @class = \"PID\" })\n\n        &lt;br /&gt;\n        &lt;span style=\"margin-left: 10px\"&gt;\n            &lt;input type=\"submit\" value=\"Post\" style=\"height: 50px; width: 100px; text-align: center;\n                font-size: larger\" /&gt;&lt;/span&gt;\n\n\n\n    }\n    @{\n        if (Model.CommentList != null)\n        {\n            foreach (var y in Model.CommentList)\n            {\n        &lt;div id=\"DisplayComment\" style=\"height: auto; width: 500px; background-color: #559988;\n            margin-top: 10px; margin-left: 10px;\"&gt;\n            @y.UserName says:\n            &lt;br /&gt;\n            @y.Comments\n            &lt;br /&gt;\n        &lt;/div&gt;\n            }\n        }\n        else\n        {\n        &lt;div id=\"DisplayNoComment\" style=\"height: auto; width: 500px; background-color: Yellow;\n            margin-top: 10px; margin-left: 10px;\"&gt;\n            @Html.Label(\"Be First to make a comment\")\n        &lt;/div&gt;\n        }\n    }\n&lt;/div&gt;\n</code></pre>\n\n<p>\n</p>\n\n<p>Here is the action methods that is associated with view:</p>\n\n<pre><code>[HttpGet]\n   public ActionResult ViewPost()\n   {\n       var business = new Business();\n\n       var PostEntity=business.GetAllPost();\n\n       var ViewModel = new PostComment();\n\n       //**For getting Post\n       if (PostEntity != null)\n       {\n           ViewModel.Posts.PostTitle = PostEntity.First().PostTitle;\n           ViewModel.Posts.PostStory = PostEntity.First().PostStory;\n           ViewModel.Posts.PostID = PostEntity.First().PostID;\n       }\n\n       else\n       {\n       }\n\n\n\n       //**For getting comments\n       if (business.GetAllComment(PostEntity.First().PostID) == null)\n       {\n\n       }\n       else\n       {\n           ViewModel.CommentList = business.GetAllComment(PostEntity.First().PostID);\n       }\n       //For getting comments**\n\n\n\n\n       return View(\"ViewPost\", ViewModel);\n   }\n\n    [HttpPost]\n    public ActionResult NewComment(PostComment model)\n    {\n        var business = new Business();\n        var entity = new Comment();\n\n        //**For inserting comments\n        entity.Comments = model.Comments.Comments;\n        entity.PostID = model.Posts.PostID; \n        entity.UserID = business.GetUserID(User.Identity.Name);\n        entity.UserName = User.Identity.Name;\n\n        business.PostComment(entity);\n        //For inserting comments**\n\n\n        //**for getting comments\n        var viewmodel = new PostComment();\n        if (business.GetAllComment(model.Posts.PostID) == null)\n        {\n        }\n        else\n        {\n            viewmodel.CommentList = business.GetAllComment(model.Posts.PostID);\n        }\n        //for getting comments**\n\n        return View(\"ViewPost\", viewmodel);\n    }\n\n\n\n    [HttpGet]\n    public ActionResult NextPost(int model)\n    {\n        var business = new Business();\n\n        var temp=business.GetNextPost(model);\n\n        var viewmodel = new PostComment();\n        if (temp != null)\n        {\n            viewmodel.Posts.PostID = temp.First().PostID;\n            viewmodel.Posts.PostTitle = temp.First().PostTitle;\n            viewmodel.Posts.PostStory = temp.First().PostStory;\n        }\n        else\n        {\n        }\n\n        if (business.GetAllComment(model) == null)\n        {\n\n        }\n        else\n        {\n            viewmodel.CommentList = business.GetAllComment(model);\n        }\n        return View(\"ViewPost\", viewmodel);\n\n    }\n\n    [HttpGet]\n    public ActionResult PreviousPost(int model)\n    {\n        var business = new Business();\n        var temp=business.GetPreviousPost(model);\n\n        var viewmodel = new PostComment();\n        if (temp != null)\n        {\n            viewmodel.Posts.PostID = temp.First().PostID;\n            viewmodel.Posts.PostTitle = temp.First().PostTitle;\n            viewmodel.Posts.PostStory = temp.First().PostStory;\n        }\n        else\n        {\n        }\n\n\n        if (business.GetAllComment(model) == null)\n        {\n\n        }\n        else\n        {\n            viewmodel.CommentList = business.GetAllComment(model);\n        }\n\n        return View(\"ViewPost\", viewmodel);\n    }\n</code></pre>\n\n<p>What is wrong in the codes? Thanks.</p>\n"},{"tags":["asp.net-mvc-3","image"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":719,"score":1,"question_id":10448310,"title":"How to save image in a file and save the name of image to database using MVC3?","body":"<p>I need to save image that user select from file upload control to a file in the site like Content/Images and use a GUID for name of this image and save this GUID to database.\nI'm new in MVC so please help me with details.\nThank you All.\nHere is my Controller...</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult Create(Product product,HttpPostedFileBase file)\n    {\n        if (file!=null&amp;&amp;file.ContentLength&gt;0)\n        {\n            var FileName = string.Format(\"{0}.{1}\",Guid.NewGuid(),file.ContentType);\n            var path = Path.Combine(Server.MapPath(\"~/Content/Images\"), FileName);\n            file.SaveAs(path);\n        }\n        if (ModelState.IsValid)\n        {\n            db.Products.AddObject(product);\n            db.SaveChanges();\n            return RedirectToAction(\"Index\");\n        }\n\n        ViewBag.CategoryID = new SelectList(db.Categories, \"CategoryID\", \"CategoryName\", product.CategoryID);\n        return View(product);\n    }\n</code></pre>\n\n<p>And here is my View...</p>\n\n<pre><code>        @using (Html.BeginForm(\"Create\", \"Product\", FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n        {\n            &lt;input type=\"file\" name=\"Uploader\" /&gt;\n        }\n</code></pre>\n\n<p>I don't know what happend at all...\nbut there is no HttpPostedFileBase instance so The if statement is fail.</p>\n"},{"tags":["asp.net-mvc-3","image","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":247,"score":1,"question_id":11807569,"title":"Display image from location stored in Database asp.net mvc 3","body":"<p>I have complete image location stored in <code>Database</code>.The image is stored in that particular location. I want to display the image in the view. How to do this?</p>\n"},{"tags":["asp.net-mvc-3","image","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":317,"score":1,"question_id":8042477,"title":"return list of images as bytes in mvc 3","body":"<p>I am trying to return a list of images as bytes to display on my view.\nI know how to return a single image by putting this in my controller</p>\n\n<pre><code>public FileContentResult DisplayImages(string packageID)\n\n{\n\n            byte[] byteArray = imageConverter.GetImageAsBytes(\n                \"\\\\filepath-to-image.jpeg\");\n\n            return new FileContentResult(byteArray, \"image/jpeg\"\n}\n</code></pre>\n\n<p>How do I modify this to return a list of byte[] and then according call it in my View.</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc-3","cookies","csrf","antiforgerytoken"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12948219,"title":"When does Request Verification Token expire","body":"<p>I am using <code>ValidateAntiForgery</code> attribute to avoid CSRF in login forms. It seems the attribute will render a hidden field with name <code>__RequestVerificationToken</code> and also set a cookie with the same name</p>\n\n<ol>\n<li><p>Why does the cookie need to end during session (Browser close/Timeout)?</p></li>\n<li><p>It seems when i use the attribute in more forms then more cookies are created, Can i avoid this?</p></li>\n<li><p>How do i change the name of the cookie?</p></li>\n</ol>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12947034,"title":"Jquery .val() method is not working when change text box ,","body":"<p>I have been developing MVC3 application.this is my edit view, text box that i want to edit</p>\n\n<pre><code>@Html.TextBoxFor(model =&gt; model.NoOfDays, new { @class=\"text_box_size\",@size = \"5\" })\n</code></pre>\n\n<p>I use Jquery to change other text box according to value of above text box</p>\n\n<pre><code>$(function () {\n            $(\"input#NoOfDays\").change(function () {\n                var value =$(\"#NoOfDays\").val();\n\n                validation();\n\n            });\n        });\n</code></pre>\n\n<p>after change text box value I call validation function that I have pre written.but its not working.Always return of the $(\"#NoOfDays\").val(); function is old value.not new value.Please anyone can  help me</p>\n"},{"tags":["asp.net",".net","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12947341,"title":"MVC4 link automatically redirected to default INDEX page/action even if defined action name with controller","body":"<p>i am creating web mobile application in mvc4.\nMy problem is when I click on particular link in my application,it works well,\nbut sometimes it automatically redirected to <code>INDEX</code> page that is set as default page in <code>global.asax</code> as</p>\n\n<pre><code>routes.MapRoute(\n                \"Default\", // Route name\n                \"{controller}/{action}/{id}\", // URL with parameters\n                new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional         } // Parameter defaults\n            );\n</code></pre>\n\n<p>Now I don't know why its automatically redirected to INDEX page,even if I have already defined controller and action name where it show redirected as,</p>\n\n<pre><code>&lt;a href='@(Url.Action( \"ActivityWall\", \"Home\"))' &gt; &lt;/a&gt;\n</code></pre>\n\n<p>logically it should redirect to \"<code>ActivityWall</code>\" page,which it does.but sometime only it goes to INDEX page.then when I clear my cookie problem will again solved but after some time it again start redirecting to INDEX page.</p>\n\n<p>I also posted question related to cookies issue yesterday,but I think that is nit main issue.</p>\n\n<p>can someone help please ?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","entity-framework","entity-framework-4.3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12946099,"title":"Keyword not supported: 'metadata'.? with Sql Connection in Entityt Framework with MVC3","body":"<p>I  am  using  Entity Framework 4 with my Asp.Net MVC3  application. My  problem  is  that  I  am  using  Entity Framework  to  perform  action  with  my  database ,  That  is  working  fine.  For  some  other  purpose I am  also  using  Sql Connection  to  Store  and  Retrieve  my  data  from database. I  am  getting  </p>\n\n<pre><code>[Keyword not supported: 'metadata']\n</code></pre>\n\n<p>error   while  connecting  with  my  database.</p>\n\n<p>This  is  my  web  config  </p>\n\n<pre><code>  &lt;add name=\"VibrantEntities\" connectionString=\"metadata=res://*/Vibrant.csdl|res://*/Vibrant.ssdl|res://*/Vibrant.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;data source=KAPS-PC\\KAPSSERVER;initial catalog=vibrant;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&amp;quot;\" providerName=\"System.Data.EntityClient\" /&gt;\n</code></pre>\n\n<p>I  am  using  class  Library,  So  this  is  my   App Config.</p>\n\n<pre><code>   &lt;section name=\"entityFramework\" type=\"System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" /&gt;\n\n   &lt;add name=\"VibrantEntities\" connectionString=\"metadata=res://*/Vibrant.csdl|res://*/Vibrant.ssdl|res://*/Vibrant.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;data source=KAPS-PC\\KAPSSERVER;initial catalog=vibrant;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&amp;quot;\" providerName=\"System.Data.EntityClient\" /&gt;\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":235,"score":1,"question_id":10681363,"title":"How to enable/use cross-origin resource sharing with MVC 3?","body":"<p>I want to submit a form using AJAX to a MVC 3 Controller.</p>\n\n<p>The form and the controller are on two different domains, which is why i want to use CORS. </p>\n\n<p>I have read that the following code should do the trick in ASP.NET:</p>\n\n<pre><code>Response.AppendHeader(\"Access-Control-Allow-Origin\", \"*\");\n</code></pre>\n\n<p>from <a href=\"http://enable-cors.org/#how-asp.net\" rel=\"nofollow\">http://enable-cors.org/#how-asp.net</a></p>\n\n<p>Should this code go directly in the controller that takes the form data?\nAs far as i know, there has to be some exchange of data between the client posting data and the server, to determine wether CORS is enabled/supported or not, so i figure that the one line of code has to go somewhere else?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc-3","razor","ef-code-first","web-security","sql-server-ce-4"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":419,"score":1,"question_id":6701086,"title":"SecurityException: Request failed. - Entity Framework Code First (Sql Compact 4)","body":"<ol>\n<li>I created an <strong>assembly (dll)</strong> with the following classes:</li>\n</ol>\n\n<p><strong>Person.cs</strong></p>\n\n<pre><code>[Table(\"People\")]\npublic class Person\n{\n    [Key]\n    public int ID { get; set; }\n    public string Name { get; set; }\n\n}\n</code></pre>\n\n<p><strong>DataContext.cs</strong></p>\n\n<pre><code>public class DataContext : DbContext\n{\n    public DbSet&lt;Person&gt; People { get; set; }\n\n    public DataContext()\n        : base(\"name=DataConnection\")\n    {\n\n    }\n\n    protected override void OnModelCreating(ModelBuilder modelBuilder)\n    {\n        modelBuilder.Conventions.Remove&lt;PluralizingTableNameConvention&gt;();\n        base.OnModelCreating(modelBuilder);\n    }\n}\n</code></pre>\n\n<p><strong>Calc.cs</strong></p>\n\n<pre><code>public class Calc\n{\n    public int Sum(int num1, int num2)\n    {\n        return num1 + num2;\n    }\n}\n</code></pre>\n\n<p>Using Nuget installed the following package:</p>\n\n<blockquote>\n  <p>Install-Package EFCodeFirst.SqlServerCompact</p>\n</blockquote>\n\n<ol>\n<li>I created a new <strong>site MVC 3</strong></li>\n</ol>\n\n<p>I added the dll reference to previously created</p>\n\n<p>I modified the following actions on <code>HomeController</code></p>\n\n<p><strong>HomeController.cs</strong></p>\n\n<pre><code>public ActionResult Index()\n{\n    ViewBag.Message = \"Sample Security Error\";\n    return View();\n}\n\npublic ActionResult Sum(int num1, int num2)\n{\n    ViewBag.Message = \"Sample Security Error\";\n    return View(\"Index\", num1 + num2);\n}\n</code></pre>\n\n<p>Added a new controller</p>\n\n<p><strong>PeopleController.cs</strong></p>\n\n<pre><code>public ActionResult Index()\n{\n    using (var db = new DataContext())\n    {\n        var people = from p in db.People\n                        select p;\n\n        return View(people.ToList());\n    }\n}\n</code></pre>\n\n<p>I changed the <code>View/Home</code> with the following code:</p>\n\n<p><strong>Index.cshtml</strong></p>\n\n<pre><code>@model int?\n@{\n    ViewBag.Title = \"Home Page\";\n}\n\n&lt;h2&gt;@ViewBag.Message&lt;/h2&gt;\n@Html.ActionLink(\"Sum\", \"Sum\", new { num1 = 2, num2 = 4})\n@if (Model.HasValue)\n{ \n    &lt;p&gt;The value is: @Model.Value&lt;/p&gt;\n}\nelse\n{ \n    &lt;p&gt;No value&lt;/p&gt;\n}\n</code></pre>\n\n<p>New <code>View/People</code></p>\n\n<p><strong>Index.cshtml</strong></p>\n\n<pre><code>@model IEnumerable&lt;Error.SecurityException.Model.Person&gt;\n@{\n    ViewBag.Title = \"People\";\n}\n\n&lt;h2&gt;@ViewBag.Title&lt;/h2&gt;\n&lt;ul&gt;\n@foreach (var item in Model)\n{\n    &lt;li&gt;@item.Name&lt;/li&gt;\n}\n&lt;/ul&gt;\n</code></pre>\n\n<p><strong>In Web.config I added the connection string</strong></p>\n\n<pre><code>&lt;connectionStrings&gt;\n  &lt;add name=\"DataConnection\" connectionString=\"Data Source=|DataDirectory|Data.sdf;\" providerName=\"System.Data.SqlServerCe.4.0\" /&gt;\n&lt;/connectionStrings&gt;\n</code></pre>\n\n<p><code>App_Data</code> folder created the database <code>Data.sdf</code> with the same structure as the <code>Person.cs</code> class.</p>\n\n<p>Using Nuget installed the following package:</p>\n\n<blockquote>\n  <p>Install-Package EFCodeFirst.SqlServerCompact</p>\n</blockquote>\n\n<p><strong>Result</strong></p>\n\n<p>The code in local IIS worked perfectly!</p>\n\n<p><strong>Sum values</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/JnFYo.png\" alt=\"Sum value\"></p>\n\n<p><strong>Display persons</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/96PBg.png\" alt=\"Dados do Data.sdf\"></p>\n\n<p><strong>Error</strong></p>\n\n<p>When I published the site, while trying to display the persons, a security error message is displayed;</p>\n\n<blockquote>\n  <p>System.Security.SecurityException: Request failed.</p>\n</blockquote>\n\n<p>The sum values is normally done!</p>\n\n<p>I published the project <a href=\"http://teste.sextaigreja.com.br/\" rel=\"nofollow\">this</a> address.</p>\n\n<p>Clicking the <code>People</code> menu you can see the error!</p>\n\n<p>Compact the sample project and published at <a href=\"http://teste.sextaigreja.com.br/Error.SecurityExeption.rar\" rel=\"nofollow\">this address</a>.</p>\n\n<p>I appreciate the help!</p>\n"},{"tags":["c#","asp.net-mvc-3","master-pages"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":12946130,"title":"How to pass viewmodel to a layout/master page?","body":"<p>Having googling for some time, I'm a little bit confused with how to do this in asp mvc 3.</p>\n\n<p>So, the task is to have a common layout (or master?) page for several controllers' views. All the views are strongly-typed themselves... This layout page in fact visualizes some strongly-typed object. So, I need this object to be passed to the layout page to pass it to `Html.RenderPartial()' or to render it right in the page.</p>\n\n<p>The article <a href=\"http://www.asp.net/mvc/tutorials/older-versions/views/passing-data-to-view-master-pages-cs\" rel=\"nofollow\">Passing Data to View Master Pages (C#)</a> (though an old one for mvc2) gives an example to provide a base abstract controller class, passing the model to <code>ViewData</code>. This could be the cure. </p>\n\n<p>But...</p>\n\n<p>In some threads I found a way one could make a strongly-typed master page:</p>\n\n<pre><code>&lt;%@ Master ... Inherits=\"System.Web.Mvc.ViewMasterPage&lt;MyWeb.Models.Client&gt;\" %&gt;\n</code></pre>\n\n<p>So, is there the same approach in mvc3? Or the only way to pass data to a layout page is to use ViewBag or ViewData?</p>\n\n<p>Having read <a href=\"http://stackoverflow.com/questions/7539384/what-is-the-best-way-to-bind-viewmodel-data-to-master-page-in-asp-net-mvc\">what is the best way to bind ViewModel data to master page in asp.net-mvc</a>, I've considered Darin's answer, but still think that this bunch of views will have the same layout, and see no reason to go against DRY principle.</p>\n\n<p>So, how to pass strongly-typed objects to layout pages? Or have I mixed something up?</p>\n"},{"tags":["asp.net-mvc-3","entity-framework-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12945832,"title":"editing records in two tables from one view in an mvc3 entity framework project","body":"<p>I am new to mvc. I have been using the entity framework for a while and would like to use it with mvc3.\nSo i have created my entity set from the db and have an edmx file.\nNow i want to have a view that displays/edits data from <strong>two</strong> entities. \nI tried the basic CRUD for a controller but this only uses one entity. So i created a controller for each entity with CRUD functionality and then in the create view for one entity i referenced the edit view for the other entity \n@Html.Partial(\"~/Views/Contact/Edit.cshtml\", Model) so i have a partial view in my create view.</p>\n\n<p>When i run this view i can see the partialview has rendered html text to the view but no dynamic data. i put a break point on the create (get) and also create (post) but neither are triggered either on page load or clicking the save button.\nEverything else in the main view works as it should.</p>\n\n<p>So how should i be going about editing two entities in one view? I want to make this as simple and logical as possible. </p>\n\n<p>I have read suggestions that i need to create a new view class with the two entities that i require. This does not seem to be using the entity framework and i assume that it will be tricky to update the new view class from the db, I really like that with the edmx i can just right click to update from the db.\nAlso i see that i need a mapper if i am to create my own view class.\nCan complex pages like the view i'm trying to make be created using the entity framework eg edmx file? Or do i need to find a hacky way round for this page?\nI've been looking into this for a days and could really do with some advice.</p>\n\n<p>Thanks :)</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","radiobuttonlist"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12909595,"title":"MVC Razor RadioButtonList without any preselected values","body":"<p>Im using RadioButtonList to generate my radio buttons, in a MVC Razor project.\nHere's an example of my code:</p>\n\n<pre><code>@Html.RadioButtonList(n =&gt; n.HouseType)\n</code></pre>\n\n<p>For some reason my radio button lists gets a preselected value. The first checkbox is always checked, which makes my UI kinda confusing.</p>\n\n<p>How do I disable this in a good way?</p>\n\n<p>One way is to loop through the whole page with Jquery and unselect each box. But thats not a pretty work around imho.</p>\n\n<p><strong>EDIT:</strong>\nHere's more info about HouseType, which is a  custom enum.</p>\n\n<pre><code>    public enum HouseType\n{\n    House,\n    Apartment,\n    Garage\n};\n</code></pre>\n\n<p>and its called upon by using this line</p>\n\n<pre><code>public HouseType HouseType { get; set; }\n</code></pre>\n"},{"tags":["mysql","asp.net-mvc-3","mysql-connector"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12944570,"title":"How to customize MySql Connector/net?","body":"<p>MySql Connector/Net is not working properly. The team working on bugs is only 3 people and they do not resolve complex issues. There are still unresolved issues from 2009. I want to customize their connector so that it works for my complex situation. How can I use a customized version in my project instead of theirs?</p>\n"},{"tags":["asp.net-mvc-3","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":445,"score":0,"question_id":11381744,"title":"The property 'Id' is part of the object's key information and cannot be modified","body":"<p>I am developing an asp.net mvc 3.0 app and using EF 4.1 for my data access layer and unit of work pattern.</p>\n\n<p>Here are my models :</p>\n\n<pre><code> public class UpdateUserViewModel\n    {\n        public User User { get; set; }\n    }\n\npublic partial class Role\n    {\n        public int Id { get; set; }\n\n     }\n\n\n    public partial class User\n    {\n        public Guid Id { get; set; }\n\n        public virtual Role Role { get; set; }\n    }\n</code></pre>\n\n<p>I pass UpdateUserViewModel to a view and then post the form in the view to the following action :</p>\n\n<pre><code>public ActionResult UpdateUser(User user)\n        {\n            var userObj = unitofwork.UserRepository.GetByID(user.Id);\n\n            TryUpdateModel(userObj, \"User\");\n\n            userObj.Role = unitofwork.RoleRepository.GetByID(user.Role.Id);\n\n            unitofwork.UserRepository.Update(userObj);\n\n            unitofwork.Save();\n        }\n</code></pre>\n\n<p>Problem raises when I Update user role in the view (it is a dropdown list) and try to update it. it gives me the following error :</p>\n\n<pre><code>The property 'Id' is part of the object's key information and cannot be modified. \n</code></pre>\n\n<p>But if i dont update the user role, it works fine.</p>\n\n<p>Would you help me please ?</p>\n"},{"tags":["asp.net-mvc-3","web-config","mysql-connector"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12886068,"title":"What is in a mysql provider?","body":"<p>I have been toiling with an issue with mysql connector on and off for the past 3 months using a workaround. I even filed a <a href=\"http://bugs.mysql.com/bug.php?id=67183\" rel=\"nofollow\">bug report</a> recently. However, I have found multiple instances of mysql connector failing in situations of advanced linq use. Some dating back to 2009 ( 3 years ) and still unresolved. In almost every instance, the user switched connectors.</p>\n\n<p>I am considering doing the same. However, I came across looking at where mysql connector exists inside of my project. From what I can tell, it is only an included <code>.dll</code> (mysql.data and mysql.data.entity). After that, it is referenced only in web.config.</p>\n\n<p>The first reference to the connector is in the connection string, <code>providerName = \"MySql.Data.MySqlClient\"</code>.</p>\n\n<p>The second reference is the definition of the provider</p>\n\n<pre><code>&lt;system.data&gt;\n &lt;DbProviderFactories&gt;\n  &lt;clear /&gt;\n  &lt;add name=\"MySQL Data Provider\" invariant=\"MySql.Data.MySqlClient\" \n    description=\".Net Framework Data Provider for MySQL\"\n    type=\"MySql.Data.MySqlClient.MySqlClientFactory, mysql.data, Version=6.5.4.0,\n          Culture=neutral, PublicKeyToken=c5687fc88969c44d\" /&gt;\n &lt;/DbProviderFactories&gt;\n&lt;/system.data&gt;\n</code></pre>\n\n<p>The third is inside of the assemblies</p>\n\n<pre><code>&lt;add assembly=\"mysql.data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d\" /&gt;\n</code></pre>\n\n<p>And the last is another assembly reference</p>\n\n<pre><code>&lt;dependentAssembly&gt;\n    &lt;assemblyIdentity name=\"MySql.Data\" publicKeyToken=\"c5687fc88969c44d\" culture=\"neutral\" /&gt;\n    &lt;bindingRedirect oldVersion=\"0.0.0.0-6.5.4.0\" newVersion=\"6.5.4.0\" /&gt;\n&lt;/dependentAssembly&gt;\n</code></pre>\n\n<p>Is this really the whole footprint of the connector?</p>\n"},{"tags":["asp.net-mvc-3","visual-studio-2012","incompatibility"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12943385,"title":"Invalid child element 'MvcBuildViews' for MVC 3 in Visual Studio 2012","body":"<p>I have a Visual Studio 2012 that doesn't open a MVC 3 project, saying it is incompatible. When I open the <code>.csproj</code> this element <code>MvcBuildViews</code> is the error:</p>\n\n<blockquote>\n  <p>The element 'PropertyGroup' in namespace\n  'http://schemas.microsoft.com/developer/msbuild/2003' has invalid\n  child element 'MvcBuildViews' in namespace\n  'http://schemas.microsoft.com/developer/msbuild/2003'. List of\n  possible elements expected: 'Property' in namespace\n  'http://schemas.microsoft.com/developer/msbuild/2003'.</p>\n</blockquote>\n\n<p>I tried to repair Visual Studio 2012, tried to install MVC 3 with the Web Platform Installer, tried to update the WPI 4.0 and nothing has happened.</p>\n\n<p><strong>Note:</strong> the project opens in Visual Studio 2010.</p>\n\n<p><em>Please</em>, help me guys.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12938624,"title":"Ignoring requests with route constraints","body":"<p>I've couple of routes defined in <code>Global.asax.cs</code></p>\n\n<pre><code>routes.MapRoute(\n        \"Custom\",\n        \"party/get/{a}~{b}\",          \n        new { controller = \"party\", action = \"get\" },\n        new { a = @\"\\d+\", b = @\"\\d+\" }\n);\n\nroutes.MapRoute(\n        \"Default\",\n        \"{controller}/{action}/{id}\",\n        new { controller = \"Party\", action = \"Index\", id = UrlParameter.Optional }\n);\n</code></pre>\n\n<p>If the request is <code>http://localhost:58684/party/get/37~12</code> then it will be matched by the first route and the values of <code>a</code> and <code>b</code> are <code>37</code> and <code>12</code> respectively.</p>\n\n<p>If the request is <code>http://localhost:58684/party/get/37~-12</code> then the first route don't matches this request since <code>-12</code> not matches the constraint <code>@\"\\d+\"</code> and the default route matches the request (<strong>I don't want this behavior</strong>).</p>\n\n<p><strong>If a request is not matched by one route due to some constraint how can I avoid the other following routes matching the request? I'm not interested to set any constraint for the following routes.</strong></p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":12943245,"title":"Access global page variable in helper","body":"<pre><code>@{\n    int i = 0;\n}\n\n@helper Text() {\n    &lt;input type=\"text\" name=\"Ans[@i].Text\" /&gt;\n}\n</code></pre>\n\n<p><code>i</code> is not accessible in helper. How to access it?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":161,"score":1,"question_id":12883869,"title":"Grouping radio buttons in c# mvc","body":"<p>I Have a form in which I display a menu. Each menu has a section and choices as below:</p>\n\n<pre><code>Starters\n\nPrawn Cocktail \nSoup\n\nMains\n\nBeef\nLamb\n</code></pre>\n\n<p>I am looping through the menu sections and menu choices for that section, for each menu option I want a radio button and to group them together per section so that only one menu option can be selected per section. By default the top selection will be selected. This is what I have so far</p>\n\n<p>In the model</p>\n\n<pre><code>public List&lt;MenuCourses&gt; courses {get; set;}\npublic List&lt;MenuOptions&gt; options {get;set;}\n</code></pre>\n\n<p>and in the view</p>\n\n<pre><code>@for ( int i = 0; i &lt; Model.MenuCourses.Count(); i++ ){\n\n      @Html.DisplayFor(m=&gt; m.MenuCourses[i].CourseTitle )\n\n      // loop options\n      for ( int k = 0; k &lt; Model.MenuOptions.Count(); k++ ){\n\n          if(Model.MenuOptions[k].MenuCoursesID == Model.MenuCourses[i].MenuCoursesID){\n\n             @Html.DisplayFor(m=&gt; m.MenuOptions[k].Title)\n             //NEED RADIO BUTTON HERE BUT HOW DO I BIND TO THE MODEL?\n\n           }\n       }\n</code></pre>\n\n<p>I need each menu option to have a radio button grouped to that section, and when the user hits save I need to pick up which menu options has been selected.</p>\n\n<p>Any help would be greatly appreciated</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":49,"score":-1,"question_id":12899281,"title":"how to do validation on telerik date picker","body":"<p>I am working on MVC razor. I want to apply validation on  control of mvc telerik datepicker.</p>\n\n<p>My scenario is below mentioned</p>\n\n<ul>\n<li>if date is not be selected by user then no need to do anything.</li>\n<li>if date is selected by user and date is not be future date then show\nvalidation message.</li>\n</ul>\n\n<p>How to implement this scenario on client side?</p>\n"},{"tags":["c#","asp.net","json","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12941864,"title":"Pass complex json via hidden variable and read in mvc 3 controller","body":"<p>I want to do the following.</p>\n\n<ol>\n<li>Pass a complex json object in a hidden input variable </li>\n<li>Get that hidden variable through the form collection object.</li>\n<li>Convert that hidden text value to a dynamic object which I can loop through to\nget the data from it</li>\n</ol>\n\n<p>So I think the first two items above I can do.</p>\n\n<ol>\n<li>$(\"#hiddenVariableID\").val(JSON.stringify(data)); </li>\n<li>Have a parameter called FormCollection collection in the MVC controller. \n    Then get the value the following way  String data =\n    collection.Get(\"hiddenVariableID\");</li>\n<li>?? Not sure how to do this.</li>\n</ol>\n\n<p>The data I'm passing is an array of objects.  The objects are never the same so that is why I need to convert the results in some type of dynamic object that I can loop through.</p>\n\n<p>I can't do an ajax call to do this because I want to stream down the data passed in the hidden variable. So it has to be through a form submission.</p>\n\n<p>Thank you,\n-Tesh</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","linq","entity"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12941901,"title":"Selecting several objects based on array of IDs","body":"<p>I have an array of ProgramIDs and would like to create a number of Select statements dynamically depending on how many ProgramIds there are.</p>\n\n<p>For example:</p>\n\n<pre><code>  var surveyProgramVar = surveyProgramRepository.Find().Where(x =&gt; x.ProgramId == resultsviewmodel.ProgramIds.FirstOrDefault());\n</code></pre>\n\n<p>This is an example of the select statement working with a single ProgramId.FirstOrDefault().  How do I create a list/array of SurveyProgramVars and select for each ProgramIds in the array?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","google","razor","google-calendar"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":460,"score":2,"question_id":11127090,"title":"Google Calendar Api v3 .net MVC - Displaying in Razor view","body":"<p>I cannot for the life of me find how to display a calendar inside my view. I can do the coding I would just love an example of displaying the calendar inside of an iframe using the new API and and a razor view</p>\n\n<p>This is the code from google. The issue is the AuthenticatorFactory.. it doesn't exist. And if you go get the class to use outside of the .dll it also references classes that don't exist, and methods with improper arguments. </p>\n\n<p>I obviously didn't use a \"Main\" method, but there was no way to implement this code due to the authorizationfactory and several other missing classes/methods</p>\n\n<pre><code>   public static void Main(string[] args)\n  {\n      // Register the authenticator. The Client ID and secret have to be copied from the API Access\n      // tab on the Google APIs Console.\n      var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description);\n      provider.ClientIdentifier = \"YOUR_CLIENT_ID\";\n      provider.ClientSecret = \"YOUR_CLIENT_SECRET\";\n      AuthenticatorFactory.GetInstance().RegisterAuthenticator(\n              () =&gt; new OAuth2Authenticator(provider, GetAuthentication));\n\n      // Create the service. This will automatically call the previously registered authenticator.\n      var service = new CalendarService();\n\n\n  }\n\n  private static IAuthorizationState GetAuthentication(NativeApplicationClient arg)\n  {\n      // Get the auth URL:\n      IAuthorizationState state = new AuthorizationState(new[] { CalendarService.Scopes.Calendar.GetStringValue() });\n      state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);\n      Uri authUri = arg.RequestUserAuthorization(state);\n\n      // Request authorization from the user (by opening a browser window):\n      Process.Start(authUri.ToString());\n      Console.Write(\"  Authorization Code: \");\n      string authCode = Console.ReadLine();\n      Console.WriteLine();\n\n      // Retrieve the access token by using the authorization code:\n      return arg.ProcessUserAuthorization(authCode, state);\n  }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","msbuild","visual-studio-2012"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":113,"score":0,"question_id":12937013,"title":"Visual Studio 2012 publish web project vs. MSBuild","body":"<p>I added a new Configuration to my MVC app. Visual Studio 2012 added the configuration block to the top of the .csproj. When I then attempt to build the project via msbuild:</p>\n\n<p><code>msbuild WebApp.csproj /t:Clean;Build;_WPPCopyWebApplication /p:Configuration=QA;WebProjectOutputDir=c:\\builds\\webapp\\qa</code></p>\n\n<p><code>C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\Microsoft.Common.targets(609,5): error : The OutputPath property is not set for project 'WebApp.csproj'.  Please check to make sure that you have specified a valid combination of Configuration and Platform for this project.  Configuration='QA'  Platform='AnyCPU'.  You may be seeing this message because you are trying to build a project without a solution file, and have specified a non-default Configuration or Platform that doesn't exist for this project. [c:\\code\\WebApp.csproj]</code></p>\n\n<p>Does anyone know how I can get new Configurations added <i>AFTER</i> the default configuration block? MSBuild works just fine once I move the configuration block down with the other Configurations.</p>\n\n<p>EDIT to show how Visual Studio 2012 adds configurations:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n</code></pre>\n\n<p><code>&lt;Project ToolsVersion=\"4.0\" DefaultTargets=\"Build\" xmlns=\"http://schemas.microsoft.com/developer/msbuild/2003\"&gt;</code></p>\n\n<pre><code>&lt;!-- NEW CONFIGURATIONS ARE ADDED HERE --&gt;\n\n&lt;PropertyGroup Condition=\"'$(Configuration)|$(Platform)' == 'QA|AnyCPU'\"&gt;\n&lt;/PropertyGroup&gt;\n\n&lt;!-- DEFAULT PropertyGroup is here --&gt;\n\n&lt;Import Project=\"$(MSBuildExtensionsPath)\\$(MSBuildToolsVersion)\\Microsoft.Common.props\" Condition=\"Exists('$(MSBuildExtensionsPath)\\$(MSBuildToolsVersion)\\Microsoft.Common.props')\" /&gt;\n&lt;PropertyGroup&gt;\n &lt;Configuration Condition=\" '$(Configuration)' == '' \"&gt;Debug&lt;/Configuration&gt;\n &lt;Platform Condition=\" '$(Platform)' == '' \"&gt;AnyCPU&lt;/Platform&gt;\n &lt;!-- blah blah --&gt;\n&lt;/PropertyGroup&gt;\n</code></pre>\n\n<p><code>&lt;!-- EXISTING CONFIGURATIONS ARE DOWN HERE --&gt;</code>\n...</p>\n"},{"tags":["jquery","asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12940535,"title":"How to Upload Files in MVC","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc-3-0\">File Upload ASP.NET MVC 3.0</a>  </p>\n</blockquote>\n\n\n\n<p>I am trying to just print out the name of the file in the debugger to make sure I am getting it this far:</p>\n\n<pre><code>&lt;EmployeeAuthorize()&gt;\n&lt;HttpPost()&gt;\nFunction SendNewMessage(ByVal file1 As HttpPostedFileBase) As JsonResult\n\n\n    Dim fileName = Path.GetFileName(file1.FileName)\n    Debug.Print(fileName)\n\n    Return Nothing\n\nEnd Function\n</code></pre>\n\n<p>I am sending the data with this:</p>\n\n<pre><code>var file1 = $('#file1').val();\n\n            $(this).parent('li').hide();\n            $('#pleaseWait').show();\n\n            $.ajax({\n                url: '/Message/SendNewMessage',\n                type: 'post',\n                data: { file1: file1 },\n                dataType: 'json',\n                success: function (result) {\n                    // update with results\n                    //alert(JSON.stringify(result));\n                    $.each(result, function (i, item) {\n                        // do nothing\n                    });\n                    $('#myDiv').html(JSON.stringify(result));\n\n                },\n                error: function (result) {\n                    alert('An error occurred when updating the database.  Please contact technical support.  ');\n\n                }\n            });\n</code></pre>\n\n<p>It doesn't print any data in my console.  It gives a <code>NullReferenceException</code> so I can assume it's not getting the filename at all.  What am I doing wrong?  Thanks.</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","godaddy"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":535,"score":0,"question_id":10353595,"title":"Deploying EF Code First CREATE DATABASE permission denied","body":"<p>I am trying to deploy my site to a godaddy web host and I am receiving this error</p>\n\n<pre><code>CREATE DATABASE permission denied in database 'master'.\n</code></pre>\n\n<p>From what I have read, my only options are to either use another account that has permission to create a database, or manually create my database one table at a time. being that its a godaddy host I cant grant myself access, so is there any alternatives to manually creating the database.</p>\n\n<p><strong>Are there any tools that will help me auto generate insert.sql scripts from my local server ?</strong></p>\n\n<p>My connection string is</p>\n\n<pre><code>&lt;add name=\"DataContext\" \nconnectionString=\"Server=servername.db.9485321.hostedresource.com; \nDatabase=databasename; User ID=userid; Password=password; Trusted_Connection=False\" \nproviderName=\"System.Data.SqlClient\" /&gt; \n</code></pre>\n\n<p>I have also tried this in my Application_Start(), but it still tries to create a database</p>\n\n<pre><code>Database.SetInitializer&lt;MyContext&gt;(null);\n</code></pre>\n"},{"tags":["c#","jquery","asp.net-mvc-3","jquery-ui","datatable"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":200,"score":0,"question_id":10543937,"title":"JQuery Data table paging buttons scrunched together when bjqueryui is true","body":"<p>Here's my data table...</p>\n\n<pre><code> oTable = $('#example').dataTable({\n       \"sDom\": 'T&lt;\"clear\"&gt;lfrtip',\n        //\"sDom\": 'R&lt;\"H\"Tlfr&gt;t&lt;\"F\"ip&gt;',\n        // \"bServerSide\": true,\n        \"sAjaxSource\": '@Url.Action(\"GetAllDonors\", \"Person\")',\n        /* Reduced data set */\n        \"bProcessing\": true,\n         \"sScrollX\": \"100%\",\n        \"sScrollXInner\": \"100%\",\n        \"bScrollCollapse\": true,\n        \"bJQueryUI\": true,\n        \"sPaginationType\": \"full_numbers\",\n        \"iDisplayLength\": 10,\n        \"fnInitComplete\": function (oSettings) {\n            $(oTable.fnGetNodes()).click(function () {\n                var iPos = oTable.fnGetPosition(this);\n                var aData = oSettings.aoData[iPos]._aData;\n                location.href = '/Person/Details?id=' + aData[0];\n                //alert('Data at index 0: '+aData[0]);\n            });\n        },\n        \"aoColumns\": [\n        { \"bVisible\": false },\n        { \"sTitle\": \"Name\" },\n        { \"sTitle\": \"Address\" },\n        { \"sTitle\": \"Phone\" },\n        { \"sTitle\": \"Email\" },\n        { \"sTitle\": \"Company\" }\n    ]\n\n    });\n});\n</code></pre>\n\n<p>when I enable the ui theme, the paging buttons get pushed together so some are overlapping/can't click on them. Any thoughts?</p>\n\n<p>Here's a screen shot of what it looks like: <img src=\"http://i.stack.imgur.com/vwBwn.png\" alt=\"enter image description here\"></p>\n"},{"tags":["asp.net","asp.net-mvc","mvc","asp.net-mvc-3"],"answer_count":4,"favorite_count":4,"up_vote_count":8,"down_vote_count":0,"view_count":1872,"score":8,"question_id":4947854,"title":"How to get the column titles from the Display(Name=) DataAnnotation for a strongly typed list scaffold view at runtime?","body":"<p>how do i get the [Display(Name=\"Some Title\")] DataAnnotations \"Some Title\" rendered in the List scaffold view's output?</p>\n\n<p>I create a strongly typed list scaffold view for this class:</p>\n\n<pre><code>public class CompanyHoliday\n{\n    [Key]\n    public int Id { get; set; }\n\n    [Required]\n    [Display(Name = \"Datum\")]\n    [DataType(System.ComponentModel.DataAnnotations.DataType.Date)]\n    public DateTime Date { get; set; }\n\n    [Required]\n    [StringLength(50)]\n    [Display(Name = \"Feiertag Name\")]\n    public string Name { get; set; }\n}\n</code></pre>\n\n<p>The view looks like this:</p>\n\n<pre><code>@model IEnumerable&lt;Zeiterfassung.Domain.CompanyHoliday&gt;\n\n@{\n    ViewBag.Title = \"Year\";\n}\n\n&lt;h2&gt;Year&lt;/h2&gt;\n\n&lt;p&gt;\n    @Html.ActionLink(\"Create New\", \"Create\")\n&lt;/p&gt;\n&lt;table&gt;\n&lt;tr&gt;\n    &lt;th&gt;&lt;/th&gt;\n    &lt;th&gt;\n        Date\n    &lt;/th&gt;\n    &lt;th&gt;\n        Name\n    &lt;/th&gt;\n&lt;/tr&gt;\n\n@foreach (var item in Model) {\n&lt;tr&gt;\n    &lt;td&gt;\n        @Html.ActionLink(\"Edit\", \"Edit\", new { id=item.Id }) |\n        @Html.ActionLink(\"Details\", \"Details\", new { id=item.Id }) |\n        @Html.ActionLink(\"Delete\", \"Delete\", new { id=item.Id })\n    &lt;/td&gt;\n    &lt;td&gt;\n        @String.Format(\"{0:g}\", item.Date)\n    &lt;/td&gt;\n    &lt;td&gt;\n        @item.Name\n    &lt;/td&gt;\n&lt;/tr&gt;\n}\n\n&lt;/table&gt;\n</code></pre>\n\n<p>However i don't want \"Date\" and \"Name\" in the table header - i want \"Datum\" and \"Feiertag Name\" rendered there dynamically. </p>\n\n<p>The actual column header titles should come from the Display Dataannotation.</p>\n\n<p>How to do this?</p>\n\n<p>Thanks, toebens</p>\n"},{"tags":["c#","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12939065,"title":"Add Css class to div from controller C#","body":"<p>What would be the best way to add/remove a css class to a div from the controller?</p>\n\n<p>I have a div in a razor view like so (simplified)</p>\n\n<pre><code>&lt;div id=\"divToToggle\" class=\"hidden\"&gt;\n     //content\n&lt;/div&gt;\n</code></pre>\n\n<p>In my controller, depending if there is content or not, I want to add or review that class=\"hidden\".</p>\n\n<pre><code>if (model.name.HasAValue())\n{\n    model.company = Method();\n    //Toggle div to visible here.\n}\n</code></pre>\n\n<p>I have thought about making a new property in the model and setting that value and then in the razor view doing like class=\"@Model.CssName\" However, I have numerous tabs to deal with and don't want to clutter the model up with another set of css properties.  What would be the most efficient way to do this?</p>\n"},{"tags":["asp.net-mvc","json","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12940073,"title":"Export results from a grid mvc asp.net","body":"<p>I'm trying to export results from a grid.  So I thought to be generic, I would pass back the results from the grid to the controller and then my action result method would stream down the results as csv file. Then I realized my Ajax call to pass the data over to the controller would not work because an Ajax call does not allow you to stream down a file.  </p>\n\n<p>The main problem is that the grid data is dynamic meaning it does not bind to a model when it reaches the controller. So I got it working right now that I can read the grid data using dynamic object.  But since I can't use an Ajax call to stream the file down, how do I pass this data over to the controller?  Maybe in a hidden input box.  But then in the controller from the form collection how do I get the data back so I can loop through the grid data?</p>\n\n<p>Now I'm kind of lost on how about to do this. Any ideas?</p>\n\n<p>Thank you,</p>\n\n<p>-Tesh</p>\n\n<p>Action Result Method</p>\n\n<pre><code>[HttpPost]\n    public ActionResult Load(String session_id, [DynamicJson(MatchName = true)] dynamic data, List&lt;Metadata&gt; metaData)\n    {\n\n        System.Text.StringBuilder sbResult = new System.Text.StringBuilder();\n        System.Text.StringBuilder sbHeader = new System.Text.StringBuilder();\n\n        //Build header for file\n        foreach (Metadata mtemp in metaData)\n        {\n            sbHeader.Append(Utility.EscapeCsvField(mtemp.label) + \",\");\n        }\n\n        sbHeader.Append(Utility.EscapeCsvField(\" \") + \",\");\n        sbResult.AppendLine(sbHeader.ToString());\n\n        foreach (System.Web.Helpers.DynamicJsonObject item in data)\n        {\n            //Convert row into dynamic object\n            dynamic objItem = ((dynamic)item);\n\n            System.Text.StringBuilder record = new System.Text.StringBuilder();\n\n            //Build string for a record\n            foreach (Metadata md in metaData)\n            {\n                record.Append(Utility.EscapeCsvField(objItem[md.name]) + \",\");\n            }\n\n            record.Append(Utility.EscapeCsvField(\" \") + \",\");\n            sbResult.AppendLine(record.ToString());\n\n        }\n\n        byte[] array = Encoding.ASCII.GetBytes(sbResult.ToString());\n\n        String fileName = String.Format(\"gridExport_{0}.csv\", Utility.FileDateTime());\n\n        return File(array, \"application/vnd.ms-excel\", fileName);\n\n    }\n</code></pre>\n\n<p>Ajax Call</p>\n\n<pre><code>var parm = JSON.stringify({ session_id: sessionId, data: data, metaData: metaData })\n\n    var ret = \"\";\n    $.ajax({\n        type: 'post',\n        cache: false,\n        url: path + \"/Common/Export/Load\",\n        data: parm,\n        dataType: \"json\",\n        contentType: \"application/json; charset=utf-8\",\n        async: false,\n        success: function (data) {\n            //ret = data.Table[0].Column1;\n        },\n        error: function (event, request, settings) {\n            //alert('save error: ' + JSON.stringify(request)) + ', ' + JSON.stringify(settings); \n        }\n    });\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","architecture","service-layer"],"answer_count":4,"favorite_count":15,"up_vote_count":20,"down_vote_count":1,"view_count":3010,"score":19,"question_id":8735466,"title":"Fat model / thin controller vs. Service layer","body":"<p>I have been developing enterprise applications for many years using .Net \nMy apps usually have a domain model containing entities mapping to SQL DB tables.\nI use a Repository pattern, Dependency injection and a service layer.</p>\n\n<p>Recently we started working on MVC 3 projects and we had a debate where to put which logic.\nI came accross thin Controller / FAT Model architecture and was wondering how the service layer would fit in</p>\n\n<h2>Option 1 - Model talks to services</h2>\n\n<p>Controller is thin, calls methods on the models. The models \"know\" how to load themselfs from the DB and talk to repositories or services.\nE.g. customerModel has a Load(id) method and loads the customer and some child objects like GetContracts().</p>\n\n<h2>Option 2 - Controller talks to services</h2>\n\n<p>Controller asks Services to retrieve model objects. The logic of loading / storing etc. Is in the service layer. The model is a pure entity model with data only.</p>\n\n<p>Why would option 1 be a better choice especially when we talk about enterprise applictions my experience tells me to separate concerns, keep models AND Controllers as thin as possible and have specialized services doing the Business logic (imcl. The DB interaction)</p>\n\n<p>Thanks for all advices and references to good resources.</p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12767992,"title":"why javascript or jquery codes doesn't work in Area layout page?","body":"<p>I want to add jquery accordion menu in my \"AdminLayout.cshtml\".\nWhen I use all code in root, menu works truly, but when I add them to \"AdminLayout.cshtml\" in Admin Area, it's JavaScript code doesn't work! \nMy roating is true.\nWhy?</p>\n\n<p>jquery code:</p>\n\n<pre><code>  &lt;script type=\"text/javascript\"&gt;\n   $(document).ready(function ($) {  \n       $('#accordion-3').dcAccordion({\n           eventType: 'click',\n           autoClose: false,\n           saveState: false,\n           disableLink: false,\n           showCount: false,\n           speed: 'slow'\n       });\n  &lt;/script&gt;\n</code></pre>\n\n<p>Html code:</p>\n\n<pre><code>    &lt;ul class=\"accordion\" id=\"accordion-3\"&gt;\n        &lt;li&gt;&lt;a href=\"#\"&gt;Home&lt;/a&gt;  &lt;ul&gt;\n                &lt;li&gt;&lt;a href=\"#\"&gt;Page 1&lt;/a&gt;&lt;/li&gt;\n                &lt;li&gt;&lt;a href=\"#\"&gt;Page 2&lt;/a&gt;&lt;/li&gt;\n                &lt;li&gt;&lt;a href=\"#\"&gt;Page 3&lt;/a&gt;&lt;/li&gt;\n                &lt;li&gt;&lt;a href=\"#\"&gt;Page 4&lt;/a&gt;&lt;/li&gt;\n            &lt;/ul&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;a href=\"#\"&gt;Products&lt;/a&gt;&lt;ul&gt;\n            &lt;li&gt;&lt;a href=\"#\"&gt;Mobile Phones &amp;#038; Accessories&lt;/a&gt;&lt;ul&gt;\n                &lt;li&gt;&lt;a href=\"#\"&gt;Product 1&lt;/a&gt;\n                    &lt;ul&gt;\n                        &lt;li&gt;&lt;a href=\"#\"&gt;Part A&lt;/a&gt; &lt;/li&gt;\n                        &lt;li&gt;&lt;a href=\"#\"&gt;Part B&lt;/a&gt;&lt;/li&gt;\n                        &lt;li&gt;&lt;a href=\"#\"&gt;Part C&lt;/a&gt;&lt;/li&gt;\n                        &lt;li&gt;&lt;a href=\"#\"&gt;Part D&lt;/a&gt;&lt;/li&gt;\n                    &lt;/ul&gt;\n                &lt;/li&gt;\n            &lt;/ul&gt;\n            &lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"#\"&gt;Accessories&lt;/a&gt;\n            &lt;ul&gt;\n                &lt;li&gt;&lt;a href=\"#\"&gt;Product 14&lt;/a&gt;&lt;/li&gt;\n                &lt;li&gt;&lt;a href=\"#\"&gt;Product 15&lt;/a&gt;&lt;/li&gt;\n            &lt;/ul&gt;\n            &lt;/li&gt;\n        &lt;/ul&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n</code></pre>\n\n<p>and use these file:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"../../Scripts/jquery.cookie.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"../../Scripts/jquery.hoverIntent.minified.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"../../Scripts/jquery.dcjqaccordion.2.7.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n"},{"tags":["c#",".net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12938592,"title":"inline models editor MVC3. Again","body":"<p>amigos..\nI have one more trouble. \nStupid may be, but I can't see, what's wrong.</p>\n\n<pre><code>    public ActionResult Images(Guid? id)\n    {\n        ViewBag.Gallery = _core.GetGalleryByID(_client, (Guid)id);\n\n        List&lt;ImageModel&gt; models = new List&lt;ImageModel&gt;();\n\n        foreach (var img in _core.GetImagesByGalleryID(_client, (Guid)id))\n        {\n            ImageModel model = new ImageModel(_client);\n            model.Thumbneil = img.Thumbneil;\n            model.Description = img.Description;\n            model.AlternateText = img.AlternateText;\n            model.GalleryID = img.GalleryID;\n            model.ID = img.ID;\n            models.Add(model);\n        }\n\n        ViewBag.Images = models;\n        return View();\n    }\n\n    [HttpPost]\n    public ActionResult SaveImageInfo(ImageModel imageModel)\n    {\n        Image img = _core.GetImageByID(_client, imageModel.ID);\n        img.AlternateText = imageModel.AlternateText;\n        img.Description = imageModel.Description;\n\n        _core.SaveImageInfo(_client, img);\n        return View();\n    }\n</code></pre>\n\n<p>This is part of controller.\nThis is part of view:</p>\n\n<pre><code>@model WebUI.Models.ImageModel\n@{\n    ViewBag.Title = \"Images\";\n    Layout = \"~/Views/Admin/_Layout.cshtml\";\n}\n\n&lt;h2&gt;@ViewBag.Gallery.Name&lt;/h2&gt;\n\n&lt;table id=\"grid-table\" &gt;\n\n    @foreach (var image in ViewBag.Images)\n    {\n    &lt;tr&gt;\n        ....\n        &lt;td &gt;\n            @using(Html.BeginForm(\"SaveImageInfo\", \"Admin\", FormMethod.Post))\n            {\n                @Html.HiddenFor(m =&gt; m.ID)\n                @Html.TextAreaFor(m =&gt; m.Description) &lt;br /&gt;\n                @Html.TextBoxFor(m =&gt; m.AlternateText) &lt;br /&gt;\n\n                &lt;div id=\"item-post\" &gt;\n                    &lt;input title=\"Подтвердить\" type=\"submit\" value=\"Подтвердить\" /&gt;\n                &lt;/div&gt;\n            }\n        &lt;/td&gt;\n\n    &lt;/tr&gt;\n    }\n\n&lt;/table&gt;\n</code></pre>\n\n<p>And model:</p>\n\n<pre><code>    public class ImageModel\n{\n    public Byte[] Thumbneil { get; set; }\n\n    [Required]\n    public String Description { get; set; }\n\n    [Required]\n    public Guid GalleryID { get; set; }\n\n    [Required]\n    public String AlternateText { get; set; }\n\n    [Required]\n    public Guid ID { get; set; }\n}\n</code></pre>\n\n<p>In ActionResult SaveImageInfo(ImageModel imageModel) I should have 2 Guids: ID and GalleryID. BUT.\nI have this:\n<img src=\"http://i.stack.imgur.com/CXnHy.png\" alt=\"watch at run time\">\nAnd this is my question: WHY? I can't see...</p>\n"},{"tags":["javascript","asp.net-mvc-3","image","bytearray"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":211,"score":0,"question_id":11841335,"title":"Displaying a byte array as an image in MVC3","body":"<p>I've stored an image as a byte array, and now I need to display it back from a byte array.So I have an <code>&lt;img&gt;</code> tag, and I've assigned the source of that tag at runtime to a method which will fetch the image.</p>\n\n<p>View:</p>\n\n<pre><code>document.getElementById(\"Logo\").setAttribute(\"src\",'@Url.Action(\"GetImage\",\"AdminLogoManager\", new { id = Model.Asset.AssetID})');\n\n&lt;img id=\"Logo\" /&gt;\n</code></pre>\n\n<p>Code in the Controller:</p>\n\n<pre><code>private List&lt;LogoModel&gt; LogoModelList\n        {\n            get\n            {\n                var logoModelList = GetLogoModelListFromSomewhere();\n                return logoModelList;\n            }\n            }\n        }\n\npublic FileContentResult GetImage(int id)\n        {\n            LogoModel m = LogoModelList.Find(p =&gt; p.Asset.AssetID == id);\n            return new FileContentResult(m.Asset.Document, \"image/jpeg\");\n        }\n</code></pre>\n\n<p>But it's not displaying the image. I checked on Chrome debugger, and it says:\nServer responded with an error of 500 (Internal Server Error)\nCan anyone help me get this to work?? I know that the LogoModelList is not null or empty, and that the ID is probably correct</p>\n\n<p>PS: It doesn't even debug. I can't set a debug point on <code>GetImage()</code></p>\n"},{"tags":["asp.net-mvc-3","c#-4.0","json.net","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":296,"score":1,"question_id":10489611,"title":"HttpClient PutAsync doesn't send a parameter to api","body":"<p>I am building RestFulAPI using MVC3.</p>\n\n<p>On the controller Put is as following:</p>\n\n<p>[HttpPut]\n[ActionName(\"putname\")]\n        public JsonResult putname(string name)\n        {\n            var response = _.......\n            ...............\n            return Json(response);<br>\n        }</p>\n\n<p>The issue is on the when consuming this API via following</p>\n\n<pre><code>        using (httpClient = new HttpClient())\n        {\n            string name = \"abc\";\n            string jsonString = JsonConvert.SerializeObject(name);\n            var requestUrl = new Uri(\"http:...../controller/putname/\");\n            HttpResponseMessage response = null;\n            using (HttpContent httpContent = new StringContent(jsonString))\n            {\n                    httpContent.Headers.ContentType = new MediaTypeHeaderValue(\"application/json\");\n                    response = httpClient.PutAsync(requestUrl, httpContent).Result;\n                }\n</code></pre>\n\n<p>This code doesn't pass the parameter name to controller. I even tried changeing uri to /putname/\" + name.\nEnvironment: Newtonsoft.Json, System.Net.Http -> Version 2.0.0.0</p>\n\n<p>Thanks for any help.</p>\n"},{"tags":["asp.net-mvc-3","cookies","formsauthenticationticket"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":178,"score":0,"question_id":11266292,"title":"FormsAuthentication cookie not persistent","body":"<p>I'm attempting to save the FormsAuthenticationTicket to a cookie using the following code (in AccountController.cs):</p>\n\n<pre><code>FormsAuthenticationTicket ticket = new FormsAuthenticationTicket\n          (1, user.UserEmail, DateTime.Now, \n           DateTime.Now.AddMinutes(FormsAuthentication.Timeout.TotalMinutes), \n           false, null);\n\nstring encTicket = FormsAuthentication.Encrypt(ticket);\nHttpCookie faCookie = new HttpCookie(FormsAuthentication.FormsCookieName,\nticket.ToString());\nHttpContext.Response.Cookies.Add(faCookie);\n\nif (Url.IsLocalUrl(returnUrl) &amp;&amp; returnUrl.Length &gt; 1 &amp;&amp; returnUrl.StartsWith(\"/\")\n           &amp;&amp; !returnUrl.StartsWith(\"//\") &amp;&amp; !returnUrl.StartsWith(\"/\\\\\"))\n           {\n             return Redirect(returnUrl);\n           }\n           else\n          {\n             return RedirectToAction(\"Index\", \"Home\");\n          }\n</code></pre>\n\n<p>As I step through the debugger, everything seems just fine. Until I get to <code>Application_AuthenticateRequest</code>, where I try to retrieve the cookie:</p>\n\n<pre><code>HttpCookie authCookie = Request.Cookies[FormsAuthentication.FormsCookieName];\n\n        if (authCookie != null)\n        {\n         //do stuff here\n        }\n</code></pre>\n\n<p>When I look in the Cookies collection, there's just nothing there. I can add another normal cookie in the AccountController code and it shows up just fine. The problem persists whether or not I include UserData, so I don't think it's a size issue. </p>\n\n<p>Thanks for any insight you can provide.</p>\n"}]}
{"total":29155,"page":12,"pagesize":100,"questions":[{"tags":["c#","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":682,"score":0,"question_id":8915804,"title":"MVC 3 Razor DropdownListFor - How to \"filter\" the view after value is selected","body":"<p>So I took some advice to create a DropDownListFor element in my view, which meant to create a model view called   </p>\n\n<p><strong>MODEL</strong><br>\n<code>class StudentModelView</code>.</p>\n\n<p>I have two properties.</p>\n\n<pre><code>StudentID{get;set;}\nIEnumerable&lt;SelectListItem&gt; SelectPeopleList { get;set;}\n</code></pre>\n\n<p>I get the list to populate nicely with this code</p>\n\n<p><strong>VIEW</strong>  </p>\n\n<pre><code>    @Html.DropDownListFor(x =&gt; x.StudentID, Model.SelectPeopleList,\"--Select Students--\", new Dictionary&lt;string,object&gt;{ {\"class\",\"dropdowns\"},{\"id\",\"selectPeopleDDL\"}})  \n\n//NEED A BUTTON TO SUBMIT \n</code></pre>\n\n<p><strong>CONTROLLER</strong>  </p>\n\n<pre><code> public ActionResult Index()\n        {\n\n\n            return View(new StudentModelView());\n        }  \n</code></pre>\n\n<ol>\n<li>What kind of button do I need to make it post</li>\n<li>After posting, how do I update my view to show the new filtered list? Am I missing a POST controller or just ajax? What's the best approach?</li>\n</ol>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":239,"score":8,"question_id":10026974,"title":"Can MVC Views access all projects even though they aren't referenced by the project where the views are?","body":"<p>Ok, so I'm a bit confused as to what is going on with the following data.</p>\n\n<p>We have the following Structure in our application:</p>\n\n<ul>\n<li><strong>Portal.Web</strong> - An MVC 3 Web App which basically contains all the\nviews, scripts, css and HTML helper extension methods</li>\n<li><strong>Portal.Core</strong> - A Class Library which is basically our Business Objects, we have all of our models contained within this project.</li>\n<li><strong>Portal.Data</strong> - Another Class Library which contains our NHibernate config and our DTO classes.</li>\n</ul>\n\n<p>Here's our usage: In the controller we call the model located in Portal.Core, which populates by calling Portal.Data, so basically Web can never see data.</p>\n\n<p>Here's the catch: In the controller, say for example I try and instantiate a new DTO object called Client like so:</p>\n\n<pre><code>var client = new Client();\n</code></pre>\n\n<p>It won't work, which is expected it has no idea what Client is and even specifying a using won't cut it. That's fine.</p>\n\n<p><strong>BUT</strong> if I try and do that exact same line in the View, Resharper adds the using to the view and then no complaints, the project runs and we can use DTO classes in our views.</p>\n\n<p>So the question is, why is this? I'm trying to stop our juniors from using DTO classes in Views, so I've purposely removed the reference to the Data project in Web, but they can still use the classes. Can someone shed some light?</p>\n"},{"tags":["asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12937450,"title":"Hide webgrid column \"Edit\" link based on condition in MVC3","body":"<p>I have a webgrid <code>MVC3</code> contains 4 columns Name, Address, age &amp; Edit. I want to hide <code>Edit</code> link for row if age is greater than 55. Help me to do it.</p>\n\n<p>Is there any event like <code>OnItemDataBound</code> event?</p>\n\n<p>Thank you</p>\n"},{"tags":["asp.net-mvc-3","image"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":305,"score":0,"question_id":10094185,"title":"How do I wrap an image in an ActionLink in MVC3?","body":"<p>I have a partial view where need to wrap an image in an ActionLink so when the user clicks on it, it will go and edit the image.  I have a content handler called img.ashx.</p>\n\n<p>Here is my image text:\n </p>\n\n<p>Here is my ActionLink:\n@Html.ActionLink(item.Title, \"EditMediaItem\", new { location = item.Location, id = item.Id })</p>\n\n<p>How can this be done?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc-3","image"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":236,"score":0,"question_id":11797817,"title":"how to Display the Image From Database and Display In View in MVC3?","body":"<p>Hi All  i have a FileUpload Control where users can upload Images and Doc files and i am saving the Url of the Path in My Database\nnow when i am retrieving the data from database i want to check wether the file is .doc or image if it is Doc it will open the file my problem is how do i do it for Image how can i check wether its a image And i have to show the image in a image control never worked on image controls in MVC3 </p>\n\n<p>here is my Controller Code</p>\n\n<pre><code>       public ActionResult ViewAttachments(string AttachmentName)\n    {\n        try\n        {\n            AttachmentName = Session[\"AttachmentUrl\"].ToString();\n            var fs = System.IO.File.OpenRead(Server.MapPath(\" \"+ AttachmentName+\" \"));\n            return File(fs, \"application/doc\", AttachmentName);\n        }\n        catch\n        {\n            throw new HttpException(404, \"Couldn't find \" + AttachmentName);\n        }\n    } \n</code></pre>\n\n<p>i am using an aspx page here What html i have to use and what is the Code i have to change here any suggestion please</p>\n"},{"tags":["asp.net-mvc-3","image"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":536,"score":0,"question_id":11773416,"title":"Display image returned as byte array from MVC Controller through Ajax call","body":"<p>When a row in the HTML table is clicked , the ajax call is made to the MVC3 Controller that returns a json object with a byte array of the image , but Empty image getting displayed in the view. This should work from IE 7 TO 9</p>\n\n<p>The controller code is :</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult RenderImage(string code)\n    {\n        ImageVM viewmodel = GetImage(code)\n        return Json(viewmodel.Chart, \"image/png\");\n     }\n</code></pre>\n\n<p>The javascript code for raising the ajax call and display the image is </p>\n\n<p></p>\n\n<pre><code>  $(document).ready(function () {\n      $('#Table tr').click(function (event) { \n      var id= $(this).attr('id')\n         $.post(\"/Gateway/RenderImage\", { \"code\": id },\n     function (data) {\n                alert(data);\n            $('#ChartDiv').html('&lt;img height=\"200\" width=\"250\" src=\"data:image/png;base64,' + data + '\" /&gt;');\n\n            });\n       });\n  });\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12936604,"title":"How to add ModelState.AddModelError message when model item is not binded","body":"<p>I am new to MVC4. Here I added the ModelState.AddModelError message to display when the delete operation is not possible. <br/></p>\n\n<pre><code>  &lt;td&gt;\n    &lt;a id=\"aaa\" href=\"@Url.Action(\"Delete\", \"Shopping\", new { id = Request.QueryString[\"UserID\"], productid = item.ProductID })\" style=\"text-decoration:none\"&gt;\n    &lt;img alt=\"removeitem\" style=\"vertical-align: middle;\" height=\"17px\" src=\"~/Images/remove.png\"  title=\"remove\" id=\"imgRemove\" /&gt;\n      &lt;/a&gt;\n      @Html.ValidationMessage(\"CustomError\")\n    &lt;/td&gt; \n    @Html.ValidationSummary(true)\n</code></pre>\n\n<p><br/>\nIn my controller \n<br/></p>\n\n<pre><code>public ActionResult Delete(string id, string productid)\n        {             \n            int records = DeleteItem(id,productid);\n            if (records &gt; 0)\n            {\n              ModelState.AddModelError(\"CustomError\", \"The item is removed from your cart\");\n               return RedirectToAction(\"Index1\", \"Shopping\");\n            }\n            else\n            {\n                ModelState.AddModelError(string.Empty,\"The item cannot be removed\");\n                return View(\"Index1\");\n            }\n        }\n</code></pre>\n\n<p>Here I didnt pass any of the model item in the View to check for the item in Model and I couldnt get the ModelState error message ..<br/> Any suggestions</p>\n"},{"tags":["asp.net-mvc-3","image","razor","drop-down-menu"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":530,"score":-1,"question_id":6491220,"title":"Show Image on Select Change in MVC3 Razor","body":"<p>I have a select list which contains some values representing status of some task. </p>\n\n<p>The values for select list will come from a property in ViewModel. The object representing status also contains path of associate image like:</p>\n\n<pre><code>class Status\n{\n    public int Id{get;set;}\n    public string Title{get;set;}\n    public string ImagePath{get;set;}\n}\n</code></pre>\n\n<p>Example values for <strong>Rejected</strong> status:</p>\n\n<pre><code>var s=new Status{ Id=1, Title=\"Rejected\", ImagePath=\"~/images/rej.png\"};\n</code></pre>\n\n<p>The image path is relative to root directory.</p>\n\n<p>I want to display image representing the status on change of the select list in an image besides it. What is the best way to do this using  MVC3 Razor?</p>\n"},{"tags":["asp.net-mvc-3","image"],"answer_count":1,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":3169,"score":3,"question_id":7560830,"title":"Convert Byte Array to Image and Display in Razor View","body":"<p>I am using <strong>EF 4.1 Code First</strong> and for the sake of simplicity, let's say I have the following Entity class:</p>\n\n<pre><code>public class Person\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public Byte[] Image { get; set; }\n}\n</code></pre>\n\n<p>I have managed to create a working Create View that allows the Addition of a Person object into the Database.</p>\n\n<p>But when I come to display the details for a Person, I <strong><em>get stuck on displaying the Image</em></strong>. After searching Google for many hours, I have the following:</p>\n\n<pre><code>// To convert the Byte Array to the author Image\npublic FileContentResult getImg(int id)\n{\n    byte[] byteArray = DbContext.Persons.Find(id).Image;\n    if (byteArray != null)\n    {\n        return new FileContentResult(byteArray, \"image/jpeg\");\n    }\n    else\n    {\n        return null;\n    }\n}\n</code></pre>\n\n<p>And in the View where I am attempting to list the Person details, I have the following to get the Image to display:</p>\n\n<pre><code>&lt;img src=\"@Html.Action(\"getImg\", \"Person\", new { id = item.Id })\" alt=\"Person Image\" /&gt;\n</code></pre>\n\n<p>However the above is <strong>not working</strong>, my image source <strong>[src] attribute returns empty</strong>.</p>\n\n<p>I would <strong><em>greatly appreciate some help</em></strong> with getting my images to display.</p>\n\n<p>Thank You.</p>\n\n<p>Ciwan.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12936286,"title":"Required attribute not displaying","body":"<pre><code>Public Class Duration \n{\n  [Required]\n  Public DurationUnit Unit\n  [Required]\n  Public int Length\n}\n\nPublic Class Employee\n{\n  [RequiredAttribute]\n  public virtual Duration NotificationLeadTime { get; set; }\n}\n</code></pre>\n\n<p>The fields <em><code>Unit</code></em> and <em><code>Length</code></em>, when not suplied are getting highlighted in Red but the error message is not getting displayed.</p>\n\n<p>I tries also giving <code>[Required(ErrorMessage=\"sadfdsf\")]</code>,but this is also not working.\nI also tried inheriting the class with <code>IValidatableObject</code> but that also didn't work.</p>\n\n<p>How to display the error message ?</p>\n"},{"tags":["asp.net-mvc","entity-framework","asp.net-mvc-3","code-first","ef-code-first"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":5414,"score":1,"question_id":5465686,"title":"EF 4.1 Code First: \"non-null value of type 'DateTime'\" Issue","body":"<p>After initial dev and testing I have now pointed my MVC3 application at an existing database which contains live data.</p>\n\n<p>However I am getting this error related to the field called Date1 of type \"datetime\".</p>\n\n<pre><code>The 'Date1' property on 'StaffAttachment' could not be set to a 'null' value. You must set this property to a non-null value of type 'DateTime'. \n</code></pre>\n\n<p>Is this telling me that all rows in the date must have a date and not be null? What do I do if I dont want to set a date on specific row?</p>\n\n<p>Can anyone offer advice on resolving this issue?</p>\n\n<p>Thanks Paul</p>\n\n<p>EDIT 1 (Posting Model)</p>\n\n<pre><code>public class StaffAttachment\n{\n    [Key]\n    public int AttachmentID { get; set; }\n\n    public int? StaffID { get; set; }\n\n    public int? TypeID { get; set; }\n\n    [Required]\n    [DisplayName(\"Proof of ID\")]\n    public int? AttachmentTypeID { get; set; }\n\n    [Required]\n    [DisplayName(\"ID Reference\")]\n    public string Reference1 { get; set; }\n\n    public string Reference2 { get; set; }\n\n    public string DateType { get; set; }\n\n    [DisplayName(\"Expiry Date\")]\n    public DateTime Date1 { get; set; }\n\n    [Required]\n    public DateTime Date2 { get; set; }\n\n    public DateTime Date3 { get; set; }\n\n    public DateTime Date4 { get; set; }\n\n    public string AttachmentPath { get; set; }\n\n    public int? ValidatedUserID { get; set; }\n\n    public DateTime ValidatedDate { get; set; }\n\n    public int? CreatedUserID { get; set; }\n\n    public DateTime CreatedDate { get; set; }\n\n    public int? EditedUserID { get; set; }\n\n    public DateTime EditedDate { get; set; }\n\n    public TimeSpan TimeStamp { get; set; }\n\n    public string FileName { get; set; }\n\n    public byte[] FileImage { get; set; }\n\n    public int AttachmentSection { get; set; }\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","visual-studio-2010","unit-testing","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":12910232,"title":"Finding difficulty in unit testing a Controller Action method using NUnit","body":"<p>I want to Unit test the method ExecLogin() using NUnit testing framework. But I'm having problem while writing code for the testing because the GenerateInput() method is declared as internal virtual. So, I'm not being able pass the SessionUserId parameter to it which I think is needed. Please guide me how to write the unit test code for ExecLogin(). I'm new to testing.</p>\n\n<p>This is related to ASP.NET MVC3 testing controller actions.</p>\n\n<pre><code>    public class BaseController : Controller\n    {\n        public string SessionUserId\n        {\n            get { return Session[\"UserId\"] as string; }\n            set { Session[\"UserId\"] = value; }\n        }\n\n        internal virtual SomeType GenerateInput(SomeType inputData)\n        {\n             var finalInput = new StringBuilder(600);\n\n             finalInput.Append(\"&lt;Root&gt;\")\n             .Append(\"&lt;UserId&gt;\")\n             .Append(SessionUserId)\n             .Append(\"&lt;/UserId&gt;\")\n             .Append(\"&lt;IPAddress&gt;\")\n             .Append(this.GetClientIpAddress())\n             .Append(\"&lt;/IPAddress&gt;\")\n             .Append(inputData.InputValue)\n             .Append(\"&lt;/Root&gt;\");\n\n             inputData.InputValue = finalInput.ToString();\n             return inputData;\n        }\n    }\n\n    public class LoginController : BaseController\n    {\n        [HttpPost]\n        public JsonResult ExecLogin(JsonRequest&lt;LoginModel&gt; request)\n        {\n            var loginObj = request.InputObject;\n\n            var login = new StringBuilder(300);\n            login.Append(\"&lt;UserName&gt;\").Append(loginObj.UserName).Append(\"&lt;/UserName&gt;\")\n                .Append(\"&lt;Password&gt;\").Append(EncodingHelper.GetHashedPassword(loginObj.Password)).Append(\"&lt;/Password&gt;\")\n                .Append(\"&lt;RememberMe&gt;\").Append(loginObj.RememberMe).Append(\"&lt;/RememberMe&gt;\")\n                ;\n        var input = new SomeType { Operation = request.Operation, PageName = ActionName, InputValue = login.ToString() };\n\n        var returnValue = SomeDelegate.Instance.ExecuteOperation(GenerateInput(input));\n        return Json(new JsonResponse&lt;string&gt; { Status = returnValue.Status, Result = this.PopulateSession(returnValue) });\n        }\n    }\n</code></pre>\n\n<p>This is our model classes:</p>\n\n<pre><code>   public class LoginModel\n   {\n       public string UserId { get; set; }\n       public string UserName { get; set; }\n       public string Password { get; set; }\n       public bool RememberMe { get; set; }\n       public bool IsValidUser { get; set; }\n   }\n\n   public class JsonRequest&lt;T&gt;\n   where T : class\n   {\n       public string Operation { get; set; }\n       public T InputObject { get; set; }\n   }\n</code></pre>\n\n<p>While learning Dependency Injection pattern I came to know that use of concrete classes makes code more tightly coupled. And the more tightly coupled the code the harder it becomes to test. Is this why I'm not being able to test it properly? Please help.</p>\n"},{"tags":["c#","asp.net-mvc-3","http-post"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12935638,"title":"inline models editor MVC3","body":"<p>Ola.. I have a problem with editing of few models in table. I have a List of models on page (with foreach), something like</p>\n\n<pre><code>&lt;table id=\"grid-table\" &gt;\n\n@foreach (var image in ViewBag.Images)\n{\n    &lt;tr&gt;\n\n        &lt;td &gt;\n            &lt;a href=\"@Url.Action(\"ShowFullImage\", new { id = @image.ID })\" rel=\"lightbox[roadtrip]\" title=\"@image.Description\" &gt;\n                &lt;img src=\"@Url.Action(\"ShowImageThumbneil\", new { id = @image.ID })\" alt=\"@image.AlternateText\" /&gt;\n            &lt;/a&gt;\n        &lt;/td&gt;\n\n        &lt;td &gt;\n            @using (Html.BeginForm(\"SaveImageInfo\", \"Admin\", FormMethod.Post))\n            {\n                @Html.TextAreaFor(m =&gt; m.Description) &lt;br /&gt;\n                @Html.TextBoxFor(m =&gt; m.AlternateText) &lt;br /&gt;\n                @Html.LabelFor(m =&gt; m.ID)\n\n                &lt;div id=\"item-post\" &gt;\n                    &lt;input title=\"Подтвердить\" type=\"submit\" value=\"Подтвердить\" /&gt;\n                &lt;/div&gt;\n            }\n        &lt;/td&gt;\n\n    &lt;/tr&gt;\n}\n</code></pre>\n\n<p></p>\n\n<p>and I want to have a way to edit ONE model item. In controller I have something like this:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult SaveImageInfo(ImageModel imageModel)\n    {\n        Image img = _core.GetImageByID(_client, imageModel.ID);\n        img.AlternateText = imageModel.AlternateText;\n        img.Description = imageModel.Description;\n\n        _core.SaveImageInfo(_client, img);\n        return View();\n    }\n</code></pre>\n\n<p>but, of course, it's not works.. \nCan somebody help me?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","visual-studio-2010"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":117,"score":2,"question_id":11462482,"title":"Automatically compress html and css on Publish?","body":"<p>I can't find a decent answer to this question. I see there are a couple other similar questions that have been asked, but they do not provide me with decent answers.</p>\n\n<p>In Visual Studio, is there a way to compress all files that should be compressed (HTML, XML, CSS) automatically when the application is published? </p>\n\n<p>It seems a bit pointless and wasteful to have all the extra white space, comments, and other things on the server. I have looked for different Extensions and NuGet packages, but have been unable to find anything that provides me with a solution. </p>\n"},{"tags":["asp.net-mvc-3","ninject"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":12682398,"title":"Ninject: Choosing the wrong constructor","body":"<p>I have an ASP.NET MVC 3 application with Ninject v2.2.1.4.  Everything was working great and then suddenly we started seeing Ninject attempting to create our DbContext using a constructor with a parameter over the parameterless constructor.  Here are the bindings:</p>\n\n<pre><code>kernel.Bind&lt;MyContext&gt;().ToSelf().InRequestScope();\n\nkernel.Bind&lt;IUnitOfWork&gt;().ToMethod(ctx =&gt; ctx.Kernel.Get&lt;MyContext&gt;());\nkernel.Bind&lt;DbContext&gt;().ToMethod(ctx =&gt; ctx.Kernel.Get&lt;MyContext&gt;());\n</code></pre>\n\n<p>The MyContext is a DbContext object that implements the IUnitOfWork interface as well.  I have set it up this way so the same context is injected into multiple repositories that are used in a single request.  The MyContext constructors look like this:</p>\n\n<pre><code>public MyContext() { }\npublic MyContext(string connectionString) { }\npublic MyContext (long accountID) { }\npublic MyContext (Connection connection) { }\n</code></pre>\n\n<p>There are different constructors for different applications as they all use the same MyContext class.  Looking at the bindings you would think when a MyContext class was requested that the parameterless constructor would be called but for whatever reason, it is not.  The one with the long accountID parameter is called even though no accountID is being specified.  This obviously throwns and exception statement that \"No matching bindings are available, and the type is not self-bindable\"  It actually throws the exception when trying to generate a IUnitOfWork.</p>\n\n<p>If I comment out the last three constructors everything works fine and the parameterless constructor is used.  If I comment out any two of the parameterized constructors it tries to use the other and not the parameterless one.</p>\n\n<p>The suggestions provided by Ninject are:</p>\n\n<pre><code>Suggestions:\n  1) Ensure that you have defined a binding for long.\n  2) If the binding was defined in a module, ensure that the module has been loaded into the kernel.\n  3) Ensure you have not accidentally created more than one kernel.\n  4) If you are using constructor arguments, ensure that the parameter name matches the constructors parameter name.\n  5) If you are using automatic module loading, ensure the search path and filters are correct.\n</code></pre>\n\n<p>We don't have anything for 1 as we don't want to.  I'm not sure what 2 and 5 mean.  I do not believe we have done 3 and we are not doing 4.</p>\n\n<p>Any thoughts as to why it wouldn't use the parameterless constructor in this scenario.</p>\n"},{"tags":["asp.net-mvc-3","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12935172,"title":"Url.RouteUrl returning empty","body":"<p>I´m trying to get full url but the RouteUrl is returning empty.</p>\n\n<p>I can´t understand why is not returning correctly.</p>\n\n<p>In the View, I´m calling like that:</p>\n\n<pre><code>    alert('@Url.RouteUrl(\"Api\", new { controller = \"Parametros\", id = \"\" })');\n</code></pre>\n\n<p>Here is my routes configurations:</p>\n\n<pre><code>    public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n        routes.MapHttpRoute(\n            name: \"Api\",\n            routeTemplate: \"api/{controller}/{id}\",\n            defaults: new { id = RouteParameter.Optional }\n        );\n\n        routes.MapRoute(\n            name: \"Default\",\n            url: \"{controller}/{action}/{id}\",\n            defaults: new { controller = \"Usuario\", action = \"Login\", id = UrlParameter.Optional }\n        );\n    }\n</code></pre>\n\n<p>and my apicontroller:</p>\n\n<pre><code>public class ParametrosController : ApiController\n{\n    ISistemaService _sistemaService;\n    public ParametrosController(Empresa empresa, ISistemaService sistemaService)\n    {\n        _sistemaService = sistemaService;\n    }\n\n\n    public PagedDataModel&lt;ParametroDTO&gt; Get([FromUri]ParametroFiltro filter, int page, int pageSize)\n    {\n        int total = 0;\n        var list = _sistemaService.Paging(filter, page, pageSize, out total);\n        return new PagedDataModel&lt;ParametroDTO&gt;(page, pageSize, total, list);\n    }\n\n    public ParametroDTO Get(string codigo)\n    {\n        return _sistemaService.GetParametroPorCodigo(codigo);\n    }\n\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","controller","http-post"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3491,"score":0,"question_id":5633571,"title":"Calling another Controller post method","body":"<p>I am using ASP.NET MVC 3 for my website. </p>\n\n<p>I have created a partial view that has \"Previous, Next and Save\" buttons. I am calling this partial view on my master page. </p>\n\n<p>My requirement is that on what ever <code>View</code> I am I must be able to call different <code>Save</code> methods in different controllers by passing respective <code>Model</code> data to controller actions.</p>\n\n<p><strong>Example</strong></p>\n\n<ul>\n<li>I have 4 step data input, I have a different controller for each step. </li>\n<li>If i am on step 1 and i click Save the form Values should go to <code>Step1Controller</code>'s action method,</li>\n<li>If I am on step 2 then post should call <code>Step2Controller</code></li>\n</ul>\n\n<p>Something like this this:</p>\n\n<pre><code>public ActionResult Save(GenericModel model)\n{\n    //use reflection to find out model type\n\n    //call appropriate controller action with model\n\n    return RedirectToAction(\"Create\", new { Controller = \"Conference\", Action = \"Create\" });\n}\n</code></pre>\n\n<p>This save method will be called for <code>Save</code> button on the <code>Master page</code>. How can I achieve this?</p>\n"},{"tags":["asp.net-mvc-3","mvccontrib","mvccontrib-grid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":141,"score":0,"question_id":12853599,"title":"MvcContrib grid and checkboxes","body":"<p>Lets say I render a Checkbox:</p>\n\n<pre><code>@Html.CheckboxFor(x =&gt; x.Checked) // Checked is true by default\n</code></pre>\n\n<p>ASP will turn that as:</p>\n\n<pre><code>&lt;input checked=\"checked\" data-val=\"true\" data-val-required=\"The field is required.\" id=\"Checked\" name=\"Checked\" type=\"checkbox\" value=\"true\" /&gt;\n&lt;input name=\"Checked\" type=\"hidden\" value=\"false\" /&gt;\n</code></pre>\n\n<p>Since ASP outputs two inputs with the same name for a Checkbox, we also get two GET parameters in the URL when submitting the form with the checkbox:</p>\n\n<pre><code>http://...?Checked=true&amp;Checked=false\n</code></pre>\n\n<p>Lets say I'm also using MvcContrib for displaying a table with sorting.</p>\n\n<p>When I sort a column, MvcContrib is unable to understand the duplicate GET parameters, and instead of writing <code>?Checked=true&amp;Checked=false</code>, it writes <code>?Checked=true%2Cfalse</code>, which can't be parsed to a bool by MVC3. The error message after sorting is:</p>\n\n<pre><code>String was not recognized as a valid Boolean.\n</code></pre>\n\n<p>Has anyone else experienced this problem with the MvcContrib grid?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","visual-studio-2010","iis","razor"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":578,"score":1,"question_id":11211765,"title":"ASP.NET MVC3 not working in Windows 8","body":"<p>is there anything special I need to do to get ASP.NET MVC3 enabled on my Windows 8 Release Preview install? Creating even a blank ASP.Net MVC3 Razor application in VS2010, deploying to the local IIS instance as a new application, and loading the page in the browser doesn't work. I'm met with the following error:</p>\n\n<p>HTTP Error 403.14 - Forbidden</p>\n\n<p>The Web server is configured to not list the contents of this directory.</p>\n\n<p>So I've then gone in to the new VS2010 project, right click, select \"Add Deployable Dependencies\" and selected \"ASP.NET MVC\" along with \"ASP.NET Web Page with Razor syntax\"\n Then I re-deploy the project to local IIS application. No change. Still \"web server not configured to list contents of the directory\".</p>\n\n<p>It's worth noting the VS 2010 Development Web Server works fine.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","razor","content-management-system","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12915235,"title":"What content management systems are available for MVC3 or MVC4 with the Razor Syntax?","body":"<p>When mvc3 with razor first came out I was drawn to it and one of the first sites I created was a content management systems (CMS). I did this mostly because it was a simple way to learn mvc3, and because there were no other CMS's available to use.</p>\n\n<p>Lately I have come back to my old application, to make it more efficient and complete. I assume that by now there are a good amount of CMS's (free, open source and purchasable,) that are built with MVC3/MVC4. However, I've only found a couple that are MVC3/MVC4 and use the Razor Syntax. Since mvc3 and razor have been around for a while (not to exclude mvc4,) I want to know what CMS's are available for these frameworks? Especially if they use entity-framework?</p>\n\n<p>Also, which of these do you think is best, and why?</p>\n\n<p>Thanks</p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":67,"score":0,"question_id":12933178,"title":"Needed jQuery to move items between 2 Listboxes condition it should not send data when the other listbox already that item","body":"<p>In asp.Net Mvc3 I'm having 2 Listboxes. 2nd listbox may sometimes have data. Now we should transfer items from 1st listbox to 2nd which are not there in 2nd listbox</p>\n\n<p>Could anyone get me the needed jquery</p>\n\n<p>I have tried the faollowing</p>\n\n<p>My script is</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n    $(document).ready(function () {\n        $('#add').click(function (e) {\n            var selectedOpts = $('#ListBox2 option:selected');\n            if (selectedOpts.length == 0) {\n                alert(\"Nothing to move.\");\n                e.preventDefault();\n            }\n\n            $('#ListBox1').append($(selectedOpts).clone()); //add to 2nd\n            $(selectedOpts).remove(); //remove in first\n            e.preventDefault();\n        });\n\n\n\n        $('#remove').click(function (e) {\n            var selectedOpts = $('#ListBox1 option:selected');\n            if (selectedOpts.length == 0) {\n                alert(\"Nothing to move.\");\n                e.preventDefault();\n            }\n\n            $('#ListBox2').append($(selectedOpts).clone());\n            $(selectedOpts).remove();\n            e.preventDefault();\n        });\n</code></pre>\n\n<p>In my view..</p>\n\n<pre><code>@using (Html.BeginForm())\n{    \n    @Html.ValidationSummary(true)\n&lt;div&gt;\n @Html.ListBox(\"ListBox1 \")\n&lt;br/&gt;\n @Html.ListBox(\"ListBox2\", new List&lt;SelectListItem&gt;())\n&lt;/div&gt;\n</code></pre>\n\n<p>In the pageload.. the ListBox2 will have some data. I have binded to it using ViewBag.</p>\n\n<p>Now I'm facing the problem of items repetition</p>\n\n<p>Thanks in advance..</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1812,"score":0,"question_id":7275317,"title":"Adding new pages to MVC 3 project results in \"Resource not found\" error","body":"<p>I have an existing MVC 3 project I've been working on for a while. Today I decided to add a new page. I added a new view, hooked it up with an actionresult on an existing controller but no dice. I get a 404. I thought maybe something was wonky with the view so I did a response.write in the controller (to take the view out of the equation). No dice. I tried creating a new controller. Same thing. I tried moving an existing page. Same thing. All existing pages work, but I can't add new ones or move existing ones. My keyboard is covered in hair. Please help.</p>\n\n<p>My global.asax:</p>\n\n<pre><code>public static void RegisterGlobalFilters(GlobalFilterCollection filters)\n    {\n        filters.Add(new HandleErrorAttribute());\n    }\n\n    public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n        routes.MapRoute(\n            \"Default\", // Route name\n            \"{controller}/{action}/{id}\", // URL with parameters\n            new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n        );\n\n        routes.MapRoute(\n            \"Home\",\n            \"\",\n            new { controller = \"Home\", action = \"Index\" }\n        ); \n    }\n\n    protected void Application_Start()\n    {\n        AreaRegistration.RegisterAllAreas();\n\n        RegisterGlobalFilters(GlobalFilters.Filters);\n        RegisterRoutes(RouteTable.Routes);\n    }\n</code></pre>\n\n<p>The view I'm trying to add is /Views/Restaurants/Nearby.</p>\n\n<p>The controller is /Controllers/RestaurantsController and the ActionResult is:</p>\n\n<pre><code>public ActionResult Nearby()\n    {\n        return View();\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":2,"up_vote_count":14,"down_vote_count":0,"view_count":11421,"score":14,"question_id":6025522,"title":"Getting \"A potentially dangerous Request.Path value was detected from the client (&)\"","body":"<p>I've got a legacy code issue that requires that I support random urls as if they were requests for the home page. Some of the URLs have characters in them that generate the error <strong>\"A potentially dangerous Request.Path value was detected from the client (&amp;)\"</strong>. The site is written with ASP.Net MVC 3 (in C#) and is running on IIS 7.5.</p>\n\n<p>Here's an example URL...</p>\n\n<pre><code>http://mywebsite.com/Test123/This_&amp;_That\n</code></pre>\n\n<p>Here's how I have my catch-all route setup (I have other routes to catch specific pages)...</p>\n\n<pre><code>routes.MapRoute(\n    \"Default\", // Route name\n    \"{garb1}/{garb2}\", // URL with parameters\n    new { controller = \"Website\", action = \"Home\", garb1 = UrlParameter.Optional, garb2 = UrlParameter.Optional } // Parameter defaults\n);\n</code></pre>\n\n<p>I've added the following things to my web.config file...</p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;system.web&gt;\n        &lt;pages validateRequest=\"false\" /&gt;\n        &lt;httpRuntime requestValidationMode=\"2.0\" /&gt;\n    &lt;/system.web&gt;\n&lt;configuration&gt;\n</code></pre>\n\n<p>I've also Added the ValidateInput attribute to the action that should be catching the urls...</p>\n\n<pre><code>public class WebsiteController : Controller\n{\n    [ValidateInput(false)]\n    public ActionResult Home()\n    {\n        return View();\n    }\n}\n</code></pre>\n\n<p>But I'm still getting the error. Any ideas why? Did I miss something? Right now I'm just running on my local dev server (I haven't tried these fixes in production yet).</p>\n"},{"tags":["c#","asp.net-mvc-2","asp.net-mvc-3","http-post"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":6880,"score":3,"question_id":5247485,"title":"HTTPPost does not work asp mvc 3","body":"<p>I am really confused,\nhere is the code :</p>\n\n<pre><code> [HttpPost]\n    public ActionResult Settings(string SubmitButton)\n    {\n        if (SubmitButton == \"Sign In\") {\n            ServiceLocator.Current.GetInstance&lt;IAppContext&gt;().LoggedUser = null;\n            Response.Cookies[\"loginuser\"].Expires = DateTime.Now;\n            return RedirectToAction(\"Logon\", \"Account\");\n        }\n        if (SubmitButton == \"Sign Up\") { return RedirectToAction(\"register\", \"Account\"); }\n        if (SubmitButton == \"Change Default Ride Settings\") { return RedirectToAction(\"changeSettings\", \"Home\"); }\n        return View();\n    }\n</code></pre>\n\n<p>The view contain    </p>\n\n<pre><code>&lt;% using (Html.BeginForm()) {  %&gt;\n\n   Three input ,\n\n&lt;% } %&gt;\n</code></pre>\n\n<p>the controller is not fired with httppost but fired with httpget</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","redirect","saml"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":231,"score":2,"question_id":9670590,"title":"How do I post to another website with a SAML assertion in MVC3?","body":"<p>I have a SAML token formatted like so:</p>\n\n<pre><code>&lt;saml:Assertion xmlns:saml=\"urn:oasis:names:tc:SAML:1.0:assertion\" MajorVersion=\"1\" MinorVersion=\"1\" AssertionID=\"_341bea3b-f497-4a4f-adff-2bd65e44fd67\" Issuer=\"http://127.0.0.1:81/\" IssueInstant=\"2012-03-12T15:08:26.618Z\"&gt;\n&lt;saml:Conditions NotBefore=\"2012-03-12T15:08:26.585Z\" NotOnOrAfter=\"2012-04-23T07:08:26.585Z\"&gt;\n    &lt;saml:AudienceRestrictionCondition&gt;\n        &lt;saml:Audience&gt;http://127.0.0.2:83/&lt;/saml:Audience&gt;\n    &lt;/saml:AudienceRestrictionCondition&gt;\n&lt;/saml:Conditions&gt;\n&lt;saml:AttributeStatement&gt;\n    &lt;saml:Subject&gt;\n        &lt;saml:SubjectConfirmation&gt;\n            &lt;saml:ConfirmationMethod&gt;urn:oasis:names:tc:SAML:1.0:cm:bearer&lt;/saml:ConfirmationMethod&gt;\n        &lt;/saml:SubjectConfirmation&gt;\n    &lt;/saml:Subject&gt;\n    &lt;saml:Attribute AttributeName=\"name\" AttributeNamespace=\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims\"&gt;\n        &lt;saml:AttributeValue&gt;tempName&lt;/saml:AttributeValue&gt;\n    &lt;/saml:Attribute&gt;\n&lt;/saml:AttributeStatement&gt;\n&lt;ds:Signature xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n&lt;ds:SignedInfo&gt;\n    &lt;ds:CanonicalizationMethod Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/&gt;\n    &lt;ds:SignatureMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256\"/&gt;\n    &lt;ds:Reference URI=\"#_341bea3b-f497-4a4f-adff-2bd65e44fd67\"&gt;\n        &lt;ds:Transforms&gt;\n            &lt;ds:Transform Algorithm=\"http://www.w3.org/2000/09/xmldsig#enveloped-signature\"/&gt;\n            &lt;ds:Transform Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/&gt;\n        &lt;/ds:Transforms&gt;\n        &lt;ds:DigestMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#sha256\"/&gt;\n        &lt;ds:DigestValue&gt;4dssZKnMKbLVftPXnSxZlDjrKnDtyQ8Sb7FRup6wkwE=&lt;/ds:DigestValue&gt;\n    &lt;/ds:Reference&gt;\n    &lt;/ds:SignedInfo&gt;\n&lt;ds:SignatureValue&gt;\nREkPevPfjE86v+SCxGiomP2CConIVjTxuUpCIFDc+sAWUtEq3cMYZDwYfGKgEaSboIv1SUfYl8dUAEhQ+CjlCg7p3jF38f64HxexWHuLty2K+us74OmvK2F8CtG+xgwURAtJ14a6j/dTzuqzpn3hhHI7EXmrW1C5vrSAMQrVcyk=\n&lt;/ds:SignatureValue&gt;\n&lt;KeyInfo xmlns=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n&lt;X509Data&gt;\n    &lt;X509Certificate&gt;\n    MIICeDCCAeGgAwIBAgIBADANBgkqhkiG9w0BAQQFADCBgDELMAkGA1UEBhMCR0IxDzANBgNVBAgTBkxvbmRvbjERMA8GA1UEBxMIVmljdG9yaWExITAfBgNVBAoTGFRob21zb25zIE9ubGluZSBCZW5lZml0czEUMBIGA1UECxMLRGV2ZWxvcG1lbnQxFDASBgNVBAMTC1Rlc3RpbmdDZXJ0MCAXDTExMDkxOTAwMDAwMFoYDzQwMDAwNzE5MTgwMzMzWjCBgDELMAkGA1UEBhMCR0IxDzANBgNVBAgTBkxvbmRvbjERMA8GA1UEBxMIVmljdG9yaWExITAfBgNVBAoTGFRob21zb25zIE9ubGluZSBCZW5lZml0czEUMBIGA1UECxMLRGV2ZWxvcG1lbnQxFDASBgNVBAMTC1Rlc3RpbmdDZXJ0MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDC16AgeosO1rNdNU1nzAODZTcRuhoew3wJdVAbIcYqU57MLAYIhGIU/tovSGEOHnKjzNciYmXwLV6dVSCuygoOADNMAAgsfWYHDk2iZZLM8XuM2N6VVtJk/pc4wEITxBHLMqeCrJXTN/6JvTB1AHZWmfFm8jqMuMpXlowNEGoMJQIDAQABMA0GCSqGSIb3DQEBBAUAA4GBAExdjee3nfJ5wFtOrQcIwblrrM/XWfzhaj4Zzd6Bc/dofP44/PpMqwdyiJWYf/DmsXTM4YZ2HbdJyWXHCR+m/neWE1diVXlEAuArrjHDFWvsmqqK3bpKzSzabQF4wVxHaxbn49zUqale+tr5gXK36MKwq3I54ohd0T2i7HO8hKhF\n    &lt;/X509Certificate&gt;\n&lt;/X509Data&gt;\n&lt;/KeyInfo&gt;\n&lt;/ds:Signature&gt;\n&lt;/saml:Assertion&gt;\n</code></pre>\n\n<p>I want to redirect from a MVC controller to another page in a separate MVC application and pass this SAML token along. What is the best way to go about this?</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12928328,"title":"Bind values to the listbox corresponding to the value selected in dropdownlist in mvc3","body":"<p>Here, I'm having a dropdownlist and a listbox. I have retrived data using DbContext and binded data for a dropdownlist using a Viewbag in my controller and displayed. Till here it works fine.</p>\n\n<p>My controller..</p>\n\n<pre><code>public ActionResult Index()\n        {\n            ViewBag.StudentList = new SelectList(db.Students, \"StudentID\", \"StudentName\");          \n            return View();\n        }\n</code></pre>\n\n<p>My View..</p>\n\n<pre><code>@using (Html.BeginForm())\n{    \n    @Html.ValidationSummary(true)\n    &lt;div&gt;\n     @Html.DropDownList(\"StudentList\", \"-Select-\")\n     &lt;br/&gt;\n      @Html.ListBox(\"StudentMarks\", new SelectList(\"\"))\n     &lt;p&gt;\n          &lt;input type=\"submit\" value=\"Save\" /&gt;\n     &lt;/p&gt;\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p>Now the problem is I need to bind data to the listbox according to the value selected in dropdownlist selected value. Initially, here it was an empty listbox.</p>\n\n<p>Could anyone help me.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["c#","asp.net-mvc-3","azure"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":55,"score":0,"question_id":12929443,"title":"Connection of MVC3 database to azure cloud server","body":"<p>I have tried connecting my webapp database to the azure cloud server using a connectionstring (provided by azure) from the web.config. But theres always an error that says <strong>\"Format of the initialization string does not conform to specification starting at index 0.\"</strong> </p>\n\n<p>Anyone encountered this error before? Please help.</p>\n\n<p>connection string below :</p>\n\n<pre><code>&lt;add name=\"SQLAzureConnection\"\n        connectionString=\"Server=tcp:mnftprvzdk.database.windows.net,1433;Database=mydb;User ID=user;Password=pass;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;\"\n        providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","html.dropdownlistfor"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":85,"score":3,"question_id":12927098,"title":"Html.DropDownListFor value not selected on edit mode","body":"<p>I am succesfullly able to save value to database (title value) on insert , but when i render the same view in edit mode then title field must hold the selected value but in my case no value is selected by title dropdown...dont know why i am getting a dropdown with nothing selected while title field holds the stored value(at backend).</p>\n\n<pre><code>@Html.DropDownListFor(model =&gt; model.title, new SelectList(Model.titles, \"Value\", \"Text\"),\"-Select-\") // nothing selected on edit mode\n\n @Model.title //displaying the stored value which the user selected initially.\n</code></pre>\n\n<p><br/>\n<strong>values for title</strong></p>\n\n<pre><code>titles = new SelectList(ListItem.getValues().ToList(), \"Value\", \"Text\").ToList();\n</code></pre>\n\n<p>getValue function</p>\n\n<pre><code> public static List&lt;TextValue&gt; getValues()\n      {\n    List&lt;TextValue&gt; titles= new List&lt;TextValue&gt;();\n    TextValue T= new TextValue();\n\n\n   T.Value = \"Mr\";\n   T.Text = \"Mr\";\n   titles.Add(T);\n\n    T= new TextValue();\n    T.Value = \"Mrs\";\n    T.Text =\"Mrs\";\n       titles.Add(T);\n\n     T= new TextValue();\n   T.Value = \"Miss\";\n   T.Text = \"Miss\";\n    titles.Add(T);\n\n    T= new TextValue();\n    T.Value =\"Other\";\n   T.Text = \"Other\";\n   titles.Add(T);\n\n\n    return titles;\n\n   }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","performance","debugging","entity-framework-4.1"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12914089,"title":"Count maximum and opened EF connections","body":"<p>I have ASP.NET MVC app which suffer from performance bottleneck. I would like to profile EF connections and find out maximum allowed EF connections and current opened connections. Any suggestions how to do that? </p>\n\n<p>My Repository code</p>\n\n<pre><code>    using EntityFramework.Patterns;\n\n\n     public class ServiceRepository : IServiceRepository\n        {\n            private readonly IRepository&lt;User&gt; _userRepository;\n            private readonly IUnitOfWork _unitOfWork;\n\n\n            public ServiceRepository(DbContext dbContext)\n            {\n                var dbContextAdapter = new DbContextAdapter(dbContext);\n                _unitOfWork  = new UnitOfWork(dbContextAdapter);            \n                _userRepository = new Repository&lt;User&gt;(dbContextAdapter);\n            }\n\n            public IQueryable&lt;User&gt; GetUsersByProduct(int productId)\n            {\n                return _userRepository.AsQueryable().Where(p =&gt; p.Orders.Any(o =&gt; o.ProductId == productId));\n            }\n//Skip code\n\n        public void Commit()\n        {\n            _unitOfWork.Commit();\n        }\n\n    }\n</code></pre>\n\n<p>Injection with Ninject</p>\n\n<pre><code>private static void RegisterServices(IKernel kernel)\n{\n       var connectionString = ConfigurationManager.ConnectionStrings[\"Entities\"].ConnectionString;\n       kernel.Bind(typeof(DbContext)).ToMethod(context =&gt; new DbContext(connectionString)).InRequestScope();           \n       kernel.Bind&lt;IServiceRepository&gt;().To&lt;ServiceRepository&gt;().InRequestScope();\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","deployment","iis7","asp.net-webforms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12833699,"title":"Asp.Net webforms and Asp.Net MVC together deployment issue","body":"<p>I am trying to combine Asp.Net Webforms and Asp.Net MVC together for hybrid application, as per our requirement. I am referring the hanselman's <a href=\"http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx\" rel=\"nofollow\">article</a> for this. It is working fine while running from Visual Studio. But when I have deployed over IIS7, it is giving issue when I tried to visit page which is there, developed using MVC.</p>\n\n<p>It is giving 500 internal server error. And when I try to debug the deployed site it is not even hitting the controller but directly giving error. </p>\n\n<p>I am unable to found the issue and also unable to run page developed using MVC.</p>\n\n<p>Please let me know if any further details needed. </p>\n\n<p>Attaching image here. <img src=\"http://i.stack.imgur.com/KBspa.png\" alt=\"enter image description here\"></p>\n"},{"tags":["asp.net-mvc-3","telerik-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12926212,"title":"How do I invoke a controller action on node click of Telerik MVC Treeview","body":"<p>How to invoke a controller action on selecting or on click the node of Telerik MVC treeview?</p>\n\n<pre><code>&lt;%\n= Html.Telerik().TreeView()\n            .Name(\"TreeView1\")\n            .ClientEvents(events =&gt; events\n                        .OnSelect(\"onSelect\")\n                    )\n            .BindTo(Model, mappings =&gt;\n            {\n                mappings.For&lt;Models.Samples&gt;(binding =&gt; binding\n                        .ItemDataBound((item, mno) =&gt;\n                        {\n                            item.Text = mno.A;\n                            item.Value = mno.B;\n                        }));                     \n            })            \n%&gt;\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12927814,"title":"How can i check website content plagiarism by posting a particular Url in my Asp.net MVC Project?","body":"<p>I need to implement a method for checking plagiarism in website content.</p>\n\n<p>When I submit a particular URL I need to get the places where the web content is used or manipulated.</p>\n\n<p>Is there any API to do that?</p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12894653,"title":"Sorting multiple columns in jquery DataTable is not working","body":"<p>I have a requirement where all the columns in the datatable should have sorting option. by default the ID (first column) should be sorted in ascending order. But the issue is the id column is getting sorted as a string instead of numeric, hence the sorting is not perfect. I have the below jquery...</p>\n\n<pre><code>    $(document).ready(function () {\n    $('#Environment').dataTable({\n        \"bPaginate\": true,\n        \"bSort\": true,\n        \"bJQueryUI\": true,\n        \"sPaginationType\": \"full_numbers\",\n        \"aaSorting\": [[0, 'asc']]\n    });\n});\n</code></pre>\n\n<p>all the columns are enabled with sorting option... but the first column is not applied with ascending order.</p>\n\n<p>what is wrong with the code?????... can anyone please help????</p>\n\n<p><img src=\"http://i.stack.imgur.com/kypqa.png\" alt=\"enter image description here\"></p>\n"},{"tags":["jquery","asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12927316,"title":"jquery Infinite Scroll page number","body":"<p>I'm using a jQuery plugin called InfiniteScroll (<a href=\"https://github.com/paulirish/infinite-scroll\" rel=\"nofollow\">https://github.com/paulirish/infinite-scroll</a>) and I have a URL with this pattern: <code>'/category/2/'</code>, when I paged the result I use the following pattern: <code>\"/category/2?page=2\"</code>.</p>\n\n<p>When Infinite Scroll makes de request, he increments the wrong number, in the case above, the request is: <code>\"/category/3?page=2\"</code> in place of <code>\"/category/2?page=3\"</code>.</p>\n\n<p>Anyone knows how workaround this?</p>\n"},{"tags":["javascript","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":45,"score":-4,"question_id":12926875,"title":"Call Controller action from JavaScript","body":"<p>I Have Controller action in my Bank Controller (\"BankController\") name Add that illustrate below  :</p>\n\n<pre><code>public ActionResult Add()\n{\n    return View();\n}\n</code></pre>\n\n<p>Now How can i call my action from java script.\nNote : My action return type is \"ActionResult\"</p>\n"},{"tags":["ajax","asp.net-mvc","asp.net-mvc-3","razor","webgrid"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3100,"score":3,"question_id":8949003,"title":"Asp Mvc3 webgrid Paging and Filtering by ajax","body":"<p>I Have a little problem with WebGrid control for Asp.Net MVC3. What I want is to perform a search view using ajax and webgrid; something like this:</p>\n\n<p>Search Criteria  <strong><em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__</strong></p>\n\n<p>Subject: <strong><em>_</em>__<em>_</em>_</strong></p>\n\n<p>Task Type: <strong><em>_</em>____</strong></p>\n\n<p>SUBMIT SEARCH</p>\n\n<hr>\n\n<p>WebGrid withPaging</p>\n\n<p>.</p>\n\n<p>When I click the button search it call the HTTPost action by ajax and apply the search criteria; however when I try to do paging it goes to the HTTPGet action; in this way, the filter according to the search criteria doesn't execute.</p>\n\n<p>I put the grid inside a partial view; there is the code:</p>\n\n<pre><code>    @model IEnumerable&lt;MVC3.Models.Task&gt;\n@{\n    var grid = new WebGrid(null, rowsPerPage: 2, canPage: true, canSort: true, ajaxUpdateContainerId: \"myGrid\");\n    grid.Bind(Model, rowCount: 3, autoSortAndPage: true);\n    grid.Pager(mode: WebGridPagerModes.All);\n    @grid.GetHtml(\n    columns: grid.Columns(\n            grid.Column(format: (item) =&gt; Html.ActionLink(\"Assign Notifications\", \"AssignNotifications\", new { id = item.TaskId })),\n            grid.Column(format: (item) =&gt; Html.ActionLink(\"Edit\", \"Edit\", new { id = item.TaskId })),\n            grid.Column(format: (item) =&gt; Html.ActionLink(\"Delete\", \"Delete\", new { id = item.TaskId })),\n            grid.Column(\"Subject\"),\n            grid.Column(\"Comment\"),\n            grid.Column(columnName: \"Status\", header: \"Status\", format: (item) =&gt; item.TaskStatu.Name),\n            grid.Column(columnName: \"StartDate\", header: \"Start Date\", format: (item) =&gt; item.StartDate.ToString(\"MM/dd/yyy\")),\n            grid.Column(columnName: \"Deadline\", header: \"Dead Line\", format: (item) =&gt; item.Deadline.ToString(\"MM/dd/yyy\"))\n            )\n    );\n}\n</code></pre>\n\n<p>And my Index view looks like: </p>\n\n<pre><code>@model MVC3.ViewModel.TaskSearchViewModel\n@{\n    ViewBag.Title = \"Index\";\n    Layout = \"~/Views/Shared/_Layout.cshtml\";\n}\n&lt;h2&gt;\n    Task Index&lt;/h2&gt;\n&lt;hr /&gt;\n@using (Ajax.BeginForm(new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = \"myGrid\" }))\n{\n    &lt;div id=\"Filters\"&gt;\n        &lt;fieldset&gt;\n            &lt;legend&gt;Search criteria&lt;/legend&gt;\n            &lt;br /&gt;\n            &lt;table&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                        @Html.LabelFor(x =&gt; x.Subject)\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.TextBoxFor(x =&gt; x.Subject, new { style = \"width: 255px;\" })\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                        @Html.LabelFor(x =&gt; x.TaskTypeId)\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.DropDownListFor(x =&gt; x.TaskTypeId, Model.GetTaskTypesSelectList(), \"Select\", new { style = \"width: 260px;\" })\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                        @Html.LabelFor(x =&gt; x.ResponsableId)\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.DropDownListFor(x =&gt; x.ResponsableId, Model.GetResponsablesSelectList(), \"Select\", new { style = \"width: 260px;\" })\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                        @Html.LabelFor(x =&gt; x.StatusId)\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.DropDownListFor(x =&gt; x.StatusId, Model.GetStatusSelectList(), \"Select\", new { style = \"width: 260px;\" })\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n        &lt;/fieldset&gt;\n    &lt;/div&gt;\n    @Html.Hidden(\"page\")\n    &lt;input id=\"btnSearch\" type=\"submit\" value=\"Search\" /&gt;\n}\n&lt;br /&gt;\n&lt;div id=\"myGrid\"&gt;\n    @Html.Partial(\"_TaskSearchResult\", Model.ResultTask)\n&lt;/div&gt;\n&lt;br /&gt;\n@Html.ActionLink(\"Create new Task\", \"NewTask\")\n</code></pre>\n\n<p>So if anyone know how to solve my problem I'll be grateful.</p>\n\n<p>Greeting\nArturo</p>\n"},{"tags":["asp.net-mvc-3","css3","twitter-bootstrap"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":12925789,"title":"How can I add a class attribute to Html.BeginForm() in MVC3/4 preserving the minimal overload","body":"<p>I'm in the process of upgrading my app to Bootstrap 2.1.1 and I need to add a class attribute (class=\"form-horizontal\") to many of the form tags. The problem is, most of the forms use the rather beautiful</p>\n\n<pre><code>@using (Html.BeginForm()) {\n</code></pre>\n\n<p>format which I'd rather keep. The obvious way to get the class attribute in there is to use the following overload, for example:</p>\n\n<pre><code>@using (Html.BeginForm(\"Register\", \"Account\", FormMethod.Post, new { @class = \"form-horizontal\" })) {\n</code></pre>\n\n<p>But I'd rather not do that. What is the best way to add a class attribute to my form?</p>\n\n<p>I've thought about using a <strong>jQuery</strong> document ready handler to .addClass(\"form-horizontal\") to forms, but am worried that users would see the dreaded 'flash of unstyled content'.</p>\n\n<p>Another approach might be to use a <strong>less</strong>-style mix-in, to add the .form-horizontal class to all form style rules but I haven't used less yet, so I'm not sure about this one.</p>\n\n<p>Anyone know the best way to solve this problem?</p>\n"},{"tags":["asp.net-mvc-3","web-services"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12925726,"title":"How to post JSON data from asp.net mvc 3 to web service","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/727649/consuming-rest-based-web-services-in-net\">Consuming REST based web services in .Net</a>  </p>\n</blockquote>\n\n\n\n<p>I have the project of asp.net MVC, and my partner works on RESTFUL web service. Then I'm the one who post the JSON data to the web service. But I never work with posting data to web service. Could anyone give me any idea of how to posting JSON data to Restful using asp.net mvc 3.0.</p>\n\n<p>Thanks for any help anyone can give me!</p>\n"},{"tags":["asp.net-mvc-3","razor","mocking","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":103,"score":0,"question_id":12656927,"title":"Strongly typed Razor Views as an Email Template engine","body":"<p>I do know there are several similar questions out there that address this topic, but I am not happy with the answers.</p>\n\n<p>What I'd like is to take full advantage of the Razor View engine that can use <em>strongly typed views with layout pages and partial views</em>. I'd like to declare the model at the top of my views and just pass in that model. So simple! No dynamic models that need to be constructed explicitly just before passing them into the view. <strong>EDIT:</strong> I'd like to do this <em>outside</em> of a Web application, inside a class library that can construct email bodies. That's the real issue here is making use of the Razor View Engine that is not a web app.</p>\n\n<p>The idea behind this is if I have a <code>User</code> object with 20 properties on it and my first version of the Welcome email only uses the Name, but later I want to edit the template to use their <code>City</code>, <code>State</code> or <code>Email</code> address, then I want to be able to update the Razor view without having to add code and recompile and redeploy. </p>\n\n<p>I see <strong><a href=\"http://razorengine.codeplex.com\" rel=\"nofollow\">RazorEngine</a></strong> and I love the idea and simplicity, but everything is a dynamic type. My issue here is that I'll be pulling data as models from the database. By having to shove things into a dynamic type, I don't get all my properties on the View. </p>\n\n<p>I also see <strong><a href=\"https://github.com/smsohan/MvcMailer\" rel=\"nofollow\">MvcMailer</a></strong>, which is also nice in theory but it suffers from the same issue which is that all data models passed into the view are dynamic and not strongly typed. </p>\n\n<p>I've begun to build out my own version of this, which will require several web namespaces like System.Web.Mvc, System.Web.Razor and System.Web.WebPages - and I'm okay with that. The issue is the lack of HttpContext and ControllerContext and RouteData .... which I'm trying to mock/stub so the. I'm currently trying to investigate DisplayModes and figure out how to mock these outside a real Web context.</p>\n\n<p>Is there a better way? If you're going to suggest one of the two previously mentioned frameworks, please note my issues and let me know if there are workarounds.</p>\n\n<p><strong>EDIT 2:</strong> After playing a bit more with the RazorEngine, the strongly typed models is not necessarily as much of an issue as I thought. What I'm left wishing for now is the ability to use a Layout page and partial views as well. I can hack around this with string placeholders that get replaced, but probably not very efficient AND not very flexible. </p>\n"},{"tags":["asp.net","ajax","asp.net-mvc","asp.net-mvc-3","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":158,"score":0,"question_id":9013268,"title":"Ajax action URL to a controller inside a partial view","body":"<p>I have a partial view which has dual list boxes and four buttons; exactly like this \n<a href=\"http://www.meadmiracle.com/dlb/DLBPlugin.aspx\" rel=\"nofollow\">http://www.meadmiracle.com/dlb/DLBPlugin.aspx</a></p>\n\n<p>Now I want to reuse this partial view all throughout the site and every time a user clicks on the buttons to move things in and out of the list, I want this to be persisted in the database via Ajax, I am making an Ajax call using JQuery; this poses a difficulty because the URL of the Ajax call will be different based on the controller that is responding to the call!</p>\n\n<pre><code>$.ajax({\n        type: \"POST\",\n        url: '@Url.Action(\"######HOW TO FIGRE OUT WHICH CONTROLLER #######\")',\n        success: function (data) {\n    //Show some message to the user\n        }\n    });\n</code></pre>\n\n<p>Now how do I determine the URL? it will be dynamic, it will be based on the controller that is responding to the initial Index page.</p>\n\n<p>e.g.: if I am in the Cities or Towns page, the user moves Cities and Towns to the list boxes, how do I know it’s the CityController ajax action or the TownController ajax action, how would we know this in the partial view where to post for the ajax call?</p>\n"},{"tags":["asp.net","asp.net-mvc","caching",".net-4.0","asp.net-mvc-3"],"answer_count":8,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":663,"score":6,"question_id":4929528,"title":"Strategies for \"Pre-Warming\" an ASP.NET Cache","body":"<p>I have an ASP.NET MVC 3 / .NET Web Application, which is <em>heavily</em> data-driven, mainly around the concept of \"Locations\" (New York, California, etc).</p>\n\n<p>Anyway, we have some pretty busy database queries, which get cached after they are finished.</p>\n\n<p>E.g:</p>\n\n<pre><code>public ICollection&lt;Location&gt; FindXForX(string x)\n{\n   var result = _cache.Get(x.ToKey()) as Locaiton; // try cache\n\n   if (result == null) {\n      result = _repo.Get(x.ToKey()); // call db\n      _cache.Add(x.ToKey(), result); // add to cache\n   }\n\n   return result;\n}\n</code></pre>\n\n<p>But i don't want to the unlucky first user to be waiting for this database call.</p>\n\n<p>The database call can take anywhere from 40-60 seconds, well over the default timeout for an ASP.NET request.</p>\n\n<p>I want to \"pre-warm\" these calls for certain \"popular\" locations (e.g New York, California) when my app starts up, or shortly after.</p>\n\n<p>I don't want to simply do this in <strong>Global asax</strong> (Application_Start), because the app will take too long to start up. (i plan to pre-cache around 15 locations, so that's a few minutes of work).</p>\n\n<p>Is there any way i can fire off this logic asynchronously? Maybe a service on the side is a better option?</p>\n\n<p>The only other alternative i can think of is have an <strong>admin page</strong> which has buttons for these actions. So an administrator (e.g me) can fire off these queries once the app has started up. That would be the easiest solution.</p>\n\n<p>Any advice?</p>\n"},{"tags":["jquery","html","asp.net-mvc-3","html5"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12921797,"title":"jQuery won't get called from MVC view","body":"<p>I use a <a href=\"http://trentrichardson.com/examples/timepicker/\" rel=\"nofollow\">jQuery DateTimePicker</a> in many places in my web app. It works fine everywhere exept in one place where the calendar just won't pop up. Here's the source code of the page (view in Chrome). </p>\n\n<pre><code>&lt;script&gt;\n    $('#example9').datetimepicker({ timeFormat: 'h:mm', stepMinute: 5, dateFormat: 'yy-mm-dd'\n&lt;/script&gt;\n\n&lt;div&gt;\n    &lt;input type=\"text\" name=\"example9\" id=\"example9\" value=\"2012-10-16 15:00\" /&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>As you can see, I've reduced the code to the simplest and added an event listener. Nothing is triggered and nothing happens whenever I click the input. </p>\n\n<p>Any clue? </p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","session-cookies"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":11993552,"title":"\"User already logged\" HttpContext or Request DB","body":"<p>So, im working in a huge .NET MVC 3 system. As many users could be logged in at same time. I was just writting a way of \"hey there's still someone logged with this key\" with HttpContext. But, is this the best practice ? is it better to Query DB ?</p>\n\n<p>what i wrote:</p>\n\n<pre><code>     MvcApplication.SessionsLock();\n\n        if (!force &amp;&amp; MvcApplication.Sessions.Values.Any(p =&gt; p.ID.Equals(acesso.id_usuario.ToString(CultureInfo.InvariantCulture)) &amp;&amp; p.Valid))\n            throw new BusinessException(\"There's another user logged with this key. Continue ?\");\n\n     MvcApplication.SessionsUnlock();\n</code></pre>\n\n<p>our I can query my DB.. maybe cookies ? any ideas would be appreciated</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","layout","razor","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":39,"score":0,"question_id":12923456,"title":"MVC layout not being found","body":"<p>I have an MVC 3 application that has a default view and a second view, which I will refer to as SecondView.  SecondView has a corresponding controller, SecondViewController.</p>\n\n<p>SecondViewController.cs contains two procedures: <code>Index()</code> and <code>LoadSecondView(id)</code>, both return <code>View(\"SecondView\")</code>.</p>\n\n<p>SecondView.cshtml consists of:</p>\n\n<pre><code>@{\n    ViewBag.Title = \"SecondView\";\n    Layout = \"~/Views/_MasterLayout.cshtml\";\n}\n\n&lt;h2&gt;Second View&lt;/h2&gt;\n</code></pre>\n\n<p>If my main index.cshtml calls window.open(\"SecondView\"), then the page loads as expected, using the layout that is in Views/_MasterLayout.cshtml.</p>\n\n<p>However, if it calls window.open(\"SecondView/LoadSecondView/id-parameter-string\"), then _MasterLayout thinks the \"current directory\" is /SecondView/LoadSecondView rather than /, and all of the links to (e.g.) images now point to the wrong place, so the entire layout is ignored.  (The same thing happens if LoadSecondView does not take any parameters, and the call URL is just \"SecondView/LoadSecondView\".)</p>\n\n<p>Is there a way to call a procedure (other than \"index\") in a controller that would then load a view that would look in the correct place for layout?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12918435,"title":"Passing User Info to MVC Controller","body":"<p>I am looking at various methods to implement Authentication in my MVC3 app. I would like to use my own code to do the authentication – something similar to <a href=\"http://stackoverflow.com/questions/1438151/is-it-possible-to-create-a-logon-system-with-asp-net-mvc-but-not-use-the-members\">Is it possible to create a Logon System with ASP.NET MVC but not use the MembershipProvider?</a> <em>(I know that there are other methods.)</em> I would like to know once I authenticate a user using one of these methods, how do I get the user information to the Controller constructor. <em>(By user information I mean username or userID).</em> </p>\n\n<p>One of the options I considered is putting that info into the <code>Session</code>. This works, but it is difficult to test since I get the <code>Session</code> out of the <code>Context</code> which does not exist during the test. </p>\n\n<p>I would appreciate any ideas for how to pass user info to the controller constructor. </p>\n"},{"tags":["javascript","jquery","asp.net-mvc-3","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12923337,"title":"Is there a way to open a file on the users local machine via JS/jQuery/asp.net mvc?","body":"<p>Here's the background -</p>\n\n<p>The user enters the file path among other information. My application will display all the information back to the user. I need a way to display this file path as a link, such that the user can directly open this file by clicking on the link.</p>\n\n<p>The file will reside on the users local machine.</p>\n\n<p>What I've tried so far -</p>\n\n<p>Adding the file path as a link -></p>\n\n<pre><code>&lt;a href=\"file:///H|\\US\\Connecticut\\Stamford\\Test\\9.9 MB.doc\"&gt;File to open&lt;/a&gt;\n</code></pre>\n\n<p>However, nothing happens when i click on this link. Any suggestions?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","html5","c#-4.0"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":1896,"score":0,"question_id":9840337,"title":"MVC Validation for US phone number (000)-000-0000 or 000-000-0000","body":"<p>How can you annotate phone number data annotation for phone number validation?</p>\n\n<p>Is there way to allow this format in front-end like using HTML5 pattern? I know that there is data type for phone number in both HTML5 and MVC3 but was wondering if we can format that in something like (000)-000-0000 or 000-000-0000 so user can not enter more than 10 digits and if he enters a phone it displays in above formats. I tried this so far:</p>\n\n<pre><code>    [Required]\n    [DataType(DataType.PhoneNumber)]\n    [RegularExpression(@\"^(\\d{10})$\", ErrorMessage = \"Please enter proper phone number.\")]\n    [Display(Name = \"phone\")]\n    public string Phone { get; set; }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","binding","collections"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12919846,"title":"how to bind a dropdownlist to model properly to be able to pass values back from view to controller","body":"<p>I am trying to update a compound page model which as one of its properties has a list of objects. </p>\n\n<p>My Model looks like this:</p>\n\n<pre><code>public class PageViewModel \n{\n    public ProgramListVM ProgramsDDL { get; set; }\n\n    public PageViewModel()\n    {\n        this.ProgramsDDL = new ProgramListVM();\n    }\n}\n</code></pre>\n\n<p>The <code>ProgramListVM</code> class is:</p>\n\n<pre><code>public class ProgramListVM\n{\n    public List&lt;ProgramVM&gt; Program_List { get; set; }\n    public int SelectedValue { get; set; }\n\n    public ProgramListVM()\n    {\n        this.Program_List = new List&lt;ProgramVM&gt;();\n        this.SelectedValue = 0;\n    }\n}\n</code></pre>\n\n<p>and <code>ProgramVM</code> is:</p>\n\n<pre><code>public class ProgramVM\n{\n    public int ProgramID { get; set; }\n    public string ProgramDesc { get; set; }\n\n    public ProgramVM(int id, string code)\n    {\n        this.ProgramID = id;\n        this.ProgramDesc = code;\n    }\n}\n</code></pre>\n\n<p>I try to render this dropdownlist by the following two:</p>\n\n<p>1-</p>\n\n<pre><code>  &lt;%: Html.DropDownList(\"ProgramsDDL\", new SelectList(Model.Page6VM.ProgramsDDL.Program_List, \"ProgramID\", \"ProgramDesc\", Model.Page6VM.ProgramsDDL.SelectedValue))%&gt;\n</code></pre>\n\n<p>2-</p>\n\n<pre><code> &lt;%: Html.DropDownListFor(m =&gt; m.Page6VM.ProgramsDDL.Program_List, new SelectList(Model.Page6VM.ProgramsDDL.Program_List, \"ProgramID\", \"ProgramDesc\"), Model.Page6VM.ProgramsDDL.SelectedValue)%&gt;\n</code></pre>\n\n<p>But when I try to update my model through a controller action </p>\n\n<pre><code>[HttpPost]\n    public ActionResult UpdateUser(PageViewModel model)  \n    {\n    }\n</code></pre>\n\n<p><code>model.ProgramsDDL.count</code> is zero. </p>\n\n<p>What is the best way to render this dropdownlist and be able to set the selected index, and also be able to send the selected index back to the controller?</p>\n"},{"tags":["asp.net-mvc-3","validationattribute"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12917497,"title":"Don't understand the mechanics of writing own validation attribute","body":"<p>I have written an attribute before, but I I have not written a validation attribute before.  I am seriously confused about how it all works together.  I have read most of the tutorials online about how to go about accomplishing this.  But I am left with a couple of questions to ponder.  </p>\n\n<p>Keep in mind that I am trying to write a requiredIf attribute that will only call a remote function if a certain Jquery variable is set... which incidentally is a variable that is pulled from view state... I guess I could make that part of my view model.  But I digress</p>\n\n<p>1) The C# code is slightly confusing.  I know my attribute should extend the ValidationAttribute, IClientValidatable class and interface respectively.  But I am a little confused about what each of the overidden methods should be doing?  I am trying to write a requiredIf, how does overwriting these methods help me accomplish this goal?</p>\n\n<p>2)  If the variable is not there, I simply don't want the remote function to attempt to validate the field.  I don't want any message to pop up on my form.  Alot of the tutorials seem to revolve around that.  </p>\n\n<p>3)  I am confused about what I need to do with the jquery to add this function to the view...  What do I need to add to the JQuery to get this thing to work...  It seems like a lot of extra coding when I could simply just type up a jquery function that did the same thing with just the same ore less coding...  I know it also adds server side validation which is good.  But still...</p>\n\n<p>Here is what I have for my jquery side of this equation...</p>\n\n<pre><code>(function ($) {\n    $validator.unobtrusive.adapters.addSingleVal(\"requiredifattribute\", \"Dependent\");\n    $validator.addMethod(\"requiredifattribute\", function (value, element, params) {\n        if (!this.optional(element)) {\n            var otherProp = $('#' + params)\n            return (otherProp.val() != value);\n        }\n        return true;\n    })\n}(jQuery));\n</code></pre>\n\n<p>Here is my Attribute (which is basically carbon copied out of one the required if tutorials... I know I need to customize it more, but once I get a better idea of what every piece is doing I will do that...</p>\n\n<pre><code>[AttributeUsage(AttributeTargets.Property)]\npublic class RequiredIfAttribute  : ValidationAttribute, IClientValidatable {\n    private const string errorMessage = \"The {0} is required.\";\n    //public string \n    private RequiredAttribute innerAttribute = new RequiredAttribute();\n    public string DependentProperty { get; set; }\n    public object TargetValue { get; set; }\n\n    public RequiredIfAttribute(string dependentProperty, object targetValue){\n        this.DependentProperty = dependentProperty;\n        this.TargetValue = targetValue;\n    }\n\n    protected override ValidationResult IsValid(object value, ValidationContext validationContext) {\n        var field = validationContext.ObjectInstance.GetType().GetProperty(DependentProperty);\n        if (field != null) {\n            var dependentValue = field.GetValue(validationContext.ObjectInstance, null);\n            if ((dependentValue == null &amp;&amp; TargetValue == null) || (dependentValue.Equals(TargetValue))) {\n                if (!innerAttribute.IsValid(value))\n                    return new ValidationResult(ErrorMessage);\n            }\n        }\n        return ValidationResult.Success;\n    }\n\n    public IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context) {\n        ModelClientValidationRule modelClientValidationRule = new ModelClientValidationRule {\n            ErrorMessage = FormatErrorMessage(metadata.DisplayName),\n            ValidationType = \"requiredifattribute\"\n        };\n        modelClientValidationRule.ValidationParameters.Add(\"dependent\", DependentProperty);\n        yield return modelClientValidationRule;\n    }\n}\n</code></pre>\n\n<p><strong>UPDATE:  What I have simply isn't working</strong></p>\n\n<p>Here is how a property in my model is anotated with the above attribute</p>\n\n<pre><code>    [RequiredIf(\"isFlagSet\", true)]\n    [Remote(\"ValidateHosFin\", \"EditEncounter\", AdditionalFields = \"hospitalFin, encflag\", ErrorMessage = \"Got Damn this is complex!\")]\n    [MinLength(6)]\n    public string HostpitalFinNumber { get; set; }\n</code></pre>\n\n<p>The value in my view that I was trying to key this validation on is set up like so...</p>\n\n<pre><code>   ViewData[\"ADDENCOREDITTEMP\"] = encflag;\n   if (encflag == \"AddEnc\"){\n       isFlagSet = true;\n   }\n</code></pre>\n\n<p>I embed it into my page like so...</p>\n\n<pre><code>@Html.Hidden(\"isFlagSet\", isFlagSet, new { id = \"isFlagSet\"}) \n</code></pre>\n\n<p>I can't get my form to submit...  The person who said he just tried this and got it to work, could you post the code?</p>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12921360,"title":"ASP MVC SelectList() Name Concatenation","body":"<p>I have the following code which works:</p>\n\n<pre><code>ViewBag.Resources = New SelectList(db1.Tbl_Resources, \"Resource_ID\", \"Resource_FirstName\")\n</code></pre>\n\n<p>I want to not only show the first name, but also the last name so I tried this:</p>\n\n<pre><code>ViewBag.Resources = New SelectList(db1.Tbl_Resources, \"Resource_ID\", \"Resource_FirstName\" + \" \" + \"Resource_LastName\")\n</code></pre>\n\n<p>However, it didn't work because it seems to look for a model property called \"<code>Resource_FirstNameResource_LastName</code>.\"  How can I concatenate these for use in the SelectList() method?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12920763,"title":"Html.LabelFor labelText with HTML","body":"<p>Is there an easy way to get this to properly output HTML?</p>\n\n<p><code>@Html.LabelFor(m =&gt; m.DisplayName, Html.Raw(Html.Partial(\"_Tooltip\", new Tooltip { Title = Model.DisplayName, Description = \"This is my test description\" }).ToString()).ToString())</code></p>\n\n<p>Currently it's returning the HTML as a string.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":70,"score":4,"question_id":12920753,"title":"Upgrading an ASP.NET MVC 3 Project to ASP.NET MVC 4","body":"<p>I have an asp.net MVC3 project I made an upgrade to asp.net mvc4 following this tutorial:\n<a href=\"http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806\" rel=\"nofollow\">http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806</a></p>\n\n<p>I get the following error when I execute the project</p>\n\n<blockquote>\n  <p>[A]System.Web.WebPages.Razor.Configuration.HostSection cannot be cast\n  to [B]System.Web.WebPages.Razor.Configuration.HostSection. Type A\n  originates from 'System.Web.WebPages.Razor, Version=1.0.0.0,\n  Culture=neutral, PublicKeyToken=31bf3856ad364e35' in the context\n  'Default' at location\n  'C:\\Windows\\Microsoft.Net\\assembly\\GAC_MSIL\\System.Web.WebPages.Razor\\v4.0_1.0.0.0__31bf3856ad364e35\\System.Web.WebPages.Razor.dll'.\n  Type B originates from 'System.Web.WebPages.Razor, Version=2.0.0.0,\n  Culture=neutral, PublicKeyToken=31bf3856ad364e35' in the context\n  'Default' at location\n  'C:\\Windows\\Microsoft.Net\\assembly\\GAC_MSIL\\System.Web.WebPages.Razor\\v4.0_2.0.0.0__31bf3856ad364e35\\System.Web.WebPages.Razor.dll'.</p>\n</blockquote>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3531,"score":3,"question_id":9359108,"title":"MVC3:unable to retrieve metadata for my model class when i want to accesse model data from controller","body":"<p>I am new to asp.net MVC3 platform i am following the tutorial which is posted on the asp.net website:\n<a href=\"http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/getting-started-with-mvc3-part1-cs\" rel=\"nofollow\">http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/getting-started-with-mvc3-part1-cs</a></p>\n\n<p>But in the fifth step which i need to access my model class data from a controller i am facing some troubles, i have created model class and the context class but when i want to create a controller class using the scaffolding template(controller with read/write actions and views using entity framework) it gives me an error as below:</p>\n\n<blockquote>\n  <p>unable to retrieve metadata for 'full name of my modelclass'.\n  Configuration system failed to initialize</p>\n</blockquote>\n"},{"tags":["sql-server","asp.net-mvc-3","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12920402,"title":"EF 4.1 in MVC 3 - Date from form submission overwriting default in DB","body":"<p>So I have a small table and one of the columns is a date, with a a default GETDATE() constraint for use as a timestamp.</p>\n\n<p>Neither the model, nor the ViewModel have a property for this date, but I have an edmx file, so obviously it does.  I don't capture the date at any point in the app.</p>\n\n<p>The issue is that when the changes are submitted to the db, the model contains the date '0001-01-01' and this is overwriting the default in the db.</p>\n\n<p>Is there some way to ignore date from the client side?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","validation","controller"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":120,"score":0,"question_id":10122355,"title":"How to validate a Search String using Model First approach in MVC 3?","body":"<p>I am trying to validate a search box in MVC 3 using C# , so that when a user enters nothing a message will appear in the ViewBag saying 'Please enter a Search Query'.Any help would be much appreciated.</p>\n\n<pre><code>public ViewResult Index(string sortOrder, String searchString)\n{\n   ViewBag.NamesSortParm = String.IsNullOrEmpty(sortOrder) ? \"Name desc\" : \"\";\n   ViewBag.UserSortParm = sortOrder == \"UserID\" ? \"Name\" : \"Song\";\n   var User = from s in db.User select s;\n\n   if (!String.IsNullOrEmpty(searchString))\n   {\n      User = Users.Where(s =&gt; s.Name.ToUpper().Contains(searchString.ToUpper())\n                           || s.Songs.ToUpper().Contains(searchString.ToUpper()));\n   }\n   switch (sortOrder)\n   {\n      case \"Name\":\n        Users = Users.OrderByDescending(s =&gt; s.Name);\n        break;\n      case \"Songs\":\n        Users = Users.OrderByDescending(s =&gt; s.Song);\n        break;\n      default:\n        Users = Users.OrderBy(s =&gt; s.Name);\n        break;\n   }\n\n   // ...\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12919449,"title":"Url.Parameter for MvC routing for SHA2","body":"<p>I'm not sure how I should ask the question, but I am trying to route a SHA1 encryption to be accepted by the ID.</p>\n\n<p><strong>Example</strong></p>\n\n<pre><code>/Home/Index/Id\n/Home/Index/A8-75-93-36-DA-4F-74-E1-E0-6B-78-98-DC-AE-FF-1F-17-CA  \n</code></pre>\n\n<p>Is there a better way to do this?  </p>\n"},{"tags":["c#","asp.net-mvc-3","iis","asp.net-membership"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12910771,"title":"Show login page when website is accessed from outside the intranet","body":"<p>I'm developing an intranet web application in ASP.NET MVC3 with some simple content management features. The website can be viewed by anyone within in the intranet, but edited only by registered users. From outside the intranet, the website should not be viewable by anyone but the registered users.</p>\n\n<p>Is there a way to check whether someone is accessing the website from outside the intranet somehow and redirect them to the login page? Should this be done in IIS or C#? I really don't know which way to approach this problem. I would still like to use the highly convenient [Authorize] attributes.</p>\n\n<p>Can anyone help? Thank you very much in advance.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":113,"score":1,"question_id":11762638,"title":"MVC3 vCard download fails on mobile devices","body":"<p>I'm trying to write an MVC3 application that dynamically builds a vCard(.vcf) file to be downloaded by folks on a mobile device when they scan a QR code. I found an example <a href=\"http://weblogs.asp.net/gunnarpeipman/archive/2010/05/22/creating-vcard-action-result.aspx\" rel=\"nofollow\">here</a> to build and return vCards. After some manipulation I was able to get it working on my desktop machine, but every time I try to download the file on a mobile device the download fails. I had thought it was something wrong with the headers it was sending, so I did some digging and found some useful information on HTTP headers for android <a href=\"http://www.digiblog.de/2011/04/android-and-the-download-file-headers/\" rel=\"nofollow\">here</a>. Unfortunate even tweaking the headers did not change anything.</p>\n\n<p>The first part is the controller, later this will be taking URL parameters. Keeping it simple for testing.</p>\n\n<pre><code>public class APIController : Controller\n{\n\npublic vCardResult vCard()\n{\n    vCard card = new vCard\n    {\n        FirstName = \"First\",\n        LastName = \"Last\",\n        StreetAddress = \"70 Street Adr.\",\n        City = \"Atlanta\",\n        State = \"GA\",\n        CountryName = \"United States\",\n        Mobile = \"5558675309\",\n        Organization = \"MyCompany\",\n        HomePage = \"www.Google.com\",\n        JobTitle = \"Software Developer\",\n        Zip = \"30318\",\n        Email = \"FirstLast@MyCompany.com\",\n    };\n\n    return new vCardResult(card);\n}\n</code></pre>\n\n<p>And here is the vCard Model</p>\n\n<pre><code>public class vCard\n{\n    //I cut out the properties to save space\n\n    public override string ToString()\n    {\n\n        var builder = new StringBuilder();\n\n        builder.AppendLine(\"BEGIN:VCARD\");\n        builder.AppendLine(\"VERSION:2.1\");\n        builder.AppendLine(\"FN:\" + FirstName + \" \" + LastName);\n        builder.AppendLine(\"N:\" + LastName + \";\" + FirstName);\n        builder.AppendLine(\"TEL;CELL:\" + Mobile);\n        builder.AppendLine(\"TEL:\");\n        builder.AppendLine(\"EMAIL;INTERNET:\" + Email);\n        builder.AppendLine(\"TEL;FAX:\");\n        builder.AppendLine(\"TITLE:\" + JobTitle);\n        builder.AppendLine(\"ORG:\" + Organization);\n        builder.AppendLine(\"ADR:;;\" + StreetAddress + \";\" + City + \";\" + \";\" + Zip + \";\");\n        builder.AppendLine(\"REV:20120730T15034z\");\n        builder.AppendLine(\"END:VCARD\");\n\n        return builder.ToString();\n\n    }\n}\n</code></pre>\n\n<p>And lastly the action result</p>\n\n<pre><code>public class vCardResult : ActionResult\n{\n    private vCard _card;\n\n    protected vCardResult() { }\n\n    public vCardResult(vCard card)\n    {\n        _card = card;\n    }\n\n    public override void ExecuteResult(ControllerContext context)\n\n    {\n        var response = context.HttpContext.Response;\n        response.ContentType = \"text/vcard\";\n        response.AddHeader(\"Content-Disposition\", \"attachment; fileName=\\\"\" + _card.FirstName + \"_\" + _card.LastName + \".VCF\\\"\");\n\n        var cardString = _card.ToString();\n        var inputEncoding = Encoding.Default;\n        var outputEncoding = Encoding.GetEncoding(\"windows-1257\");\n        var cardBytes = inputEncoding.GetBytes(cardString);\n\n        var outputBytes = Encoding.Convert(inputEncoding,\n                                outputEncoding, cardBytes);\n\n        response.OutputStream.Write(outputBytes, 0, outputBytes.Length);\n    }\n}\n</code></pre>\n\n<p>Not too much different from the example I listed earlier but I wanted to get at least this functioning before I went too much further.</p>\n\n<p>I examined the response sent from the server with the response of a similar working system (one that I have no access to source code) and I don't see many differences so I'm not sure why their vCard opens the phone's contact list to add as a new contact and my download fails. The responses are as follows.</p>\n\n<p><strong>Example Response (working):</strong></p>\n\n<pre><code>HTTP/1.1 200 OK\nServer: Apache-Coyote/1.1\nContent-Disposition: attachment; filename=5240000053568089.vcf\nContent-Type: text/x-vcard\nTransfer-Encoding: chunked\nDate: Tue, 31 Jul 2012 21:18:31 GMT\n\n110\nBEGIN:VCARD\nVERSION:2.1\nFN:First Last\nN:Last;First\nTEL;CELL:5558675309\nTEL:\nEMAIL;INTERNET:FirstLast@MyCompany.com\nTEL;FAX:\nTITLE:Software Developer\nORG:MyCompany\nADR:;;70 Street Adr.;Atlanta;GA;30318;\nREV:20120523T150346Z\nEND:VCARD\n\n0\n</code></pre>\n\n<p><strong>The response from <em>my</em> application</strong></p>\n\n<pre><code>HTTP/1.1 200 OK\nCache-Control: private\nTransfer-Encoding: chunked\nContent-Type: text/vcard\nServer: Microsoft-IIS/7.0\nX-AspNetMvc-Version: 3.0\nContent-Disposition: attachment; fileName=First_Last.vcf\nX-AspNet-Version: 4.0.30319\nX-Powered-By: ASP.NET\nDate: Tue, 31 Jul 2012 20:14:02 GMT\n\n105\nBEGIN:VCARD\nVERSION:2.1\nFN:First Last\nN:Last;First\nTEL;CELL:5558675309\nTEL:\nEMAIL;INTERNET:FirstLast@MyCompany.com\nTEL;FAX:\nTITLE:Software Developer\nORG:MyCompany\nADR:;;70 Street Adr.;Atlanta;GA;30346;\nREV:20120730T15034z\nEND:VCARD\n\n0\n</code></pre>\n\n<p>Thanks in advance for reading this and for any help/advice you are able to offer!</p>\n"},{"tags":["asp.net","asp.net-mvc-3","forum"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":706,"score":2,"question_id":10347619,"title":"Looking for ASP.NET ( MVC 3 ) forum engine","body":"<p>I am looking for forum engine.</p>\n\n<p>There are some requirements:</p>\n\n<ol>\n<li>platform is ASP.NET(MVC 2,3)</li>\n<li>MS SQL or MySql database</li>\n<li>Open source</li>\n<li>Customizeable (change theme, moderator settings, account settings etc.)</li>\n<li>High performance</li>\n</ol>\n\n<p>Could somebody advice most applicable solution?</p>\n"},{"tags":["javascript","asp.net-mvc-3","backbone.js"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":590,"score":1,"question_id":9355157,"title":"Backbone - Validation not working on create, only update/edit?","body":"<p>So, I am able to validate just fine when I am editing an existing item. However, if I want to create, validation for some reason is not getting kicked off. Instead, I am seeing the errors below:</p>\n\n<pre><code>//this is if the field I want to validate is empty\nUncaught TypeError: Object #&lt;Object&gt; has no method 'get'\n\n//this is if everything in the form is filled out\nUncaught TypeError: Cannot call method 'trigger' of undefined\n</code></pre>\n\n<p>Here is(what I think is) the relative portion of my js. Sorry if its an overload, I wanted to add as much as I can to be as specific as possible:</p>\n\n<pre><code>Comic = Backbone.Model.extend({\n    initialize: function () {\n        this.bind(\"error\", this.notifyCollectionError);\n        this.bind(\"change\", this.notifyCollectionChange);\n    },\n    idAttribute: \"ComicID\",\n    url: function () {\n        return this.isNew() ? \"/comics/create\" : \"/comics/edit/\" + this.get(\"ComicID\");\n    },\n    validate: function (atts) {\n        if (\"Name\" in atts &amp; !atts.Name) {\n            return \"Name is required\";\n        }\n        if (\"Publisher\" in atts &amp; !atts.Publisher) {\n            return \"Publisher is required\";\n        }\n    },\n    notifyCollectionError: function (model, error) {\n        this.collection.trigger(\"itemError\", error);\n    },\n    notifyCollectionChange: function () {\n        this.collection.trigger(\"itemChanged\", this);\n    }\n});\nComics = Backbone.Collection.extend({\n    model: Comic,\n    url: \"/comics/comics\"\n});\ncomics = new Comics();\n\nFormView = Backbone.View.extend({\n    initialize: function () {\n        _.bindAll(this, \"render\");\n        this.template = $(\"#comicsFormTemplate\");\n    },\n    events: {\n        \"change input\": \"updateModel\",\n        \"submit #comicsForm\": \"save\"\n    },\n    save: function () {\n        this.model.save(\n            this.model.attributes,\n            {\n                success: function (model, response) {\n                    model.collection.trigger(\"itemSaved\", model);\n                },\n                error: function (model, response) {\n                    model.trigger(\"itemError\", \"There was a problem saving \" + model.get(\"Name\"));\n                }\n            }\n        );\n\n        return false;\n    },\n    updateModel: function (evt) {\n        var field = $(evt.currentTarget);\n        var data = {};\n        var key = field.attr('ID');\n        var val = field.val();\n        data[key] = val;\n        if (!this.model.set(data)) {\n            //reset the form field\n            field.val(this.model.get(key));\n        }\n    },\n    render: function () {\n        var html = this.template.tmpl(this.model.toJSON());\n        $(this.el).html(html);\n        $(\".datepicker\").datepicker();\n        return this;\n    }\n});\n\nNotifierView = Backbone.View.extend({\n    initialize: function () {\n        this.template = $(\"#notifierTemplate\");\n        this.className = \"success\";\n        this.message = \"Success\";\n        _.bindAll(this, \"render\", \"notifySave\", \"notifyError\");\n        comics.bind(\"itemSaved\", this.notifySave);\n        comics.bind(\"itemError\", this.notifyError);\n    },\n    events: {\n        \"click\": \"goAway\"\n    },\n    goAway: function () {\n        $(this.el).delay(0).fadeOut();\n    },\n    notifySave: function (model) {\n        this.message = model.get(\"Name\") + \" saved\";\n        this.render();\n    },\n    notifyError: function (message) {\n\n        this.message = message;\n        this.className = \"error\";\n        this.render();\n    },\n    render: function () {\n        var html = this.template.tmpl({ message: this.message, className: this.className });\n        $(this.el).html(html);\n        return this;\n    }\n});\n\nvar ComicsAdmin = Backbone.Router.extend({\n\n    initialize: function () {\n        listView = new ListView({ collection: comics, el: \"#comic-list\" });\n        formView = new FormView({ el: \"#comic-form\" });\n        notifierView = new NotifierView({el: \"#notifications\" });\n    },\n    routes: {\n        \"\": \"index\",\n        \"edit/:id\": \"edit\",\n        \"create\": \"create\"\n    },\n    index: function () {\n        listView.render();\n    },\n    edit: function (id) {\n        listView.render();\n        $(notifierView.el).empty();\n        $(formView.el).empty();\n        var model = comics.get(id);\n        formView.model = model;\n        formView.render();\n    },\n    create: function () {\n        var model = new Comic();\n        listView.render();\n        $(notifierView.el).empty();\n        $(formView.el).empty();\n        formView.model = model;\n        formView.render();\n\n    }\n});\n\njQuery(function () {\n    comics.fetch({\n\n        success: function () {\n            window.app = new ComicsAdmin();\n            Backbone.history.start();\n        },\n        error: function () {\n\n        }\n    });\n})\n</code></pre>\n\n<p>So, shouldnt my create be getting validated too? Why isnt it?</p>\n"},{"tags":["javascript","asp.net","asp.net-mvc-3","razor","confirm"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":130,"score":3,"question_id":12917479,"title":"Javascript confirm dialog and middle/right mouse click","body":"<p>I'm working on an ASP.NET MVC 3 project, and I want to display a confirmation message before deletion, I've wrote the following line:</p>\n\n<pre><code>@Html.ActionLink(\"Delete\", \"Delete\", new { id = item.ID }, new { onclick = \"return confirm('Are you sure?')\" })\n</code></pre>\n\n<p>Which is ok and works fine, however when I click middle button on the mouse or right click then choose 'Open Link in New Tab', the record will be deleted without displaying the confirm dialog which is weird!</p>\n\n<p>I have tried the upper code with <code>onMouseDown</code>, the dialog displays but no action is happening when I click on OK button! (the record wont be deleted)</p>\n\n<p>My question is how can I display a confirmation message before I delete a record and that link will only respond to left mouse click?</p>\n"},{"tags":["asp.net-mvc-3","publish","windows-live-writer"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12915932,"title":"Allow admins to publish html via Windows Live Writer and/or Word","body":"<p>Currently I have a WYSIWYG editor for admins to post HTML pages on an MVC3 website (with forms authentication.) However I saw <a href=\"http://www.youtube.com/watch?feature=player_detailpage&amp;v=c7uLIuMOc_c#t=287s\" rel=\"nofollow\">this video</a> (~4:45 mins in, if it doesn't take you there,) where a person is able to publish to the MVC3 site by clicking the publish button on Windows Live Writer (and maybe Word, but I don't have either to confirm or play around with;) and everything was published quite easily. </p>\n\n<p>I looked into this cool feature of these programs, but wasn't able to find any information on how to implement it on an MVC3 website. I saw some info on how to use this with Blogger or WordPress, but not MVC (it doesn't help that I don't have either Live Writer or Word on my windows system.)</p>\n\n<p>So I'm asking if anyone knows how to do this, can you point me to a tutorial about this Windows editor feature and how to use it in an MVC3 program? Thanks!</p>\n"},{"tags":["jquery","html","asp.net-mvc-3","table","partial-page-refresh"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":95,"score":3,"question_id":12915538,"title":"HTML Table Row gets too wide after refresh with JQuery load","body":"<p>I have got a problem with a customer website (within Internet Explorer only, tested with Internet Explorer 9). Everytime a table inside a div gets refreshed using JQuery's load-Function a single table row get's too wide as seen in the screenshot below. I already checked the generated HTML Code and the JQuery-Function and I cannot find any mistakes.</p>\n\n<p>Has anyone seen something like this or just know how to solve it?</p>\n\n<p>Furthermore the website work just fine in Firefox and Chrome.</p>\n\n<p>I would like the table to be of dynamic width. The current layout of the page consists of a navigation area on the left with fixed width and content area on the right, which should be scaled dynamically.</p>\n\n<p><strong>Screenshot of the malformatted website</strong>\n<img src=\"http://i.stack.imgur.com/l7Vyz.png\" alt=\"3rd last row is getting too wide\"></p>\n\n<p><strong>Html-Code for screenshot</strong></p>\n\n<pre><code>&lt;table class=\"tableBenutzerverwaltung\" cellpadding=\"5px\" rules=\"rows\" &gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;td align=\"right\" valign=\"top\" colspan=\"6\"&gt;&lt;a href='javascript:showNewUserDialog();' class=\"NewButton\"/&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;th align=\"left\" valign=\"top\"&gt;Username&lt;/th&gt;\n            &lt;th align=\"left\" valign=\"top\"&gt;Vorname&lt;/th&gt;\n            &lt;th align=\"left\" valign=\"top\"&gt;Nachname&lt;/th&gt;\n            &lt;th style=\"width:16px;\"&gt;&amp;nbsp;&lt;/th&gt;\n            &lt;th style=\"width:16px;\"&gt;&amp;nbsp;&lt;/th&gt;\n            &lt;th style=\"width:16px;\"&gt;&amp;nbsp;&lt;/th&gt;\n        &lt;/tr&gt;\n   &lt;/thead&gt;\n    &lt;tbody&gt;\n            &lt;tr&gt;\n                &lt;td align=\"left\" valign=\"top\"&gt;&lt;label for=\"User\"&gt;UserDomain\\JohnDoe&lt;/label&gt;&lt;/td&gt;\n                &lt;td align=\"left\" valign=\"top\"&gt;John&lt;/td&gt;\n                &lt;td align=\"left\" valign=\"top\"&gt;Doe&lt;/td&gt;\n\n                &lt;td align=\"right\" valign=\"top\"&gt;&amp;nbsp;&lt;/td&gt;\n                &lt;td align=\"right\" valign=\"top\"&gt;&lt;a href='javascript:showEditUserDialog(\"b97d5f56-1edc-4dba-b170-f75ccb8f37d2\");' class=\"EditButton\"/&gt;&lt;/td&gt;\n                &lt;td align=\"right\" valign=\"top\"&gt;&lt;a href='javascript:showDeleteUserDialog(\"b97d5f56-1edc-4dba-b170-f75ccb8f37d2\");' class=\"Delete\"/&gt;&lt;/td&gt;\n            &lt;/tr&gt; \n</code></pre>\n\n<p><strong>JQuery-Code for the refresh of the table</strong></p>\n\n<pre><code>$(function()\n{\n    $(\"#dlgBenutzer\").dialog(\n    {\n        modal: true,\n        autoOpen: true,\n        resizable: true,\n        width: 375,\n        height: 220,\n        title: \"@ViewBag.Title\",\n        buttons:\n        {            \n            Speichern: function()\n            {\n                $.post(\"@Url.Action(\"AddUser\", \"Administration\")\",\n                {\n                    objectOneId: $('#userId').val(),\n                    username: $('#username').val(),\n                    vorname: $('#vorname').val(),\n                    nachname: $('#nachname').val()\n                },\n                function(data, status, xhr)\n                {\n                    $(\".UserList\").load(\"@Url.Action(\"UserList\", \"Administration\")/?random=\" + unique_requestid());\n                    $('#dlgBenutzer').dialog(\"close\");\n                    $('#dlgBenutzer').dialog(\"destroy\");\n                    $('#dlgBenutzer').remove();\n                });\n            },\n            Abbrechen: function()\n            {\n                $(this).dialog(\"close\");\n                $(this).dialog(\"destroy\");\n            }\n        },\n        close: function()\n        {\n            $(this).dialog('destroy').remove();\n        }\n    });\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","knockout.js","asp.net-mvc-4","knockout-2.0"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":114,"score":0,"question_id":12914483,"title":"Knockout: select element options binding + value binding + optionsCaption binding + late ajax response = weird","body":"<p>Consider the following ko bindings on a <code>select</code> element:</p>\n\n<pre><code>&lt;select data-bind=\"value: valueObservable, options: optionsObservableArray, \n    optionsCaption: '[None] - this is an optional field'\"&gt;\n</code></pre>\n\n<p>... given a viewmodel like the following:</p>\n\n<pre><code>function MyViewModel()\n{\n    var self = this;\n    self.valueObservable = ko.observable();\n    self.optionsObservableArray = ko.observableArray();\n\n    // ajax call to load options\n    ko.computed(function() {\n        $.ajax(...)\n        .success(function(optionsResponse) {\n            self.optionsObservableArray(optionsResponse)\n        });\n    });\n\n    // ajax call to load data value\n    ko.computed(function() {\n        $.ajax(...)\n        .success(function(valueResponse) {\n            self.valueObservable(valueResponse)\n        });\n    });\n}\n</code></pre>\n\n<p>What's weird about this is when the second (data) ajax call returns before the first (options) ajax call. Since the <code>select</code> element has an <code>optionsCaption</code> binding, here is what I believe is happening:</p>\n\n<ol>\n<li>The data ajax call completes, setting the <code>valueObservable</code> to some value (like 6, abc, or some other non-falsy value). </li>\n<li>Because there is only 1 <code>option</code> in the <code>select</code> element (due to the <code>optionsCaption</code>), and because the <code>valueObservable</code> is bound to it (via the <code>value</code> binding), this causes the <code>valueObservable</code> to be changed to <code>undefined</code>.</li>\n<li>Finally, the <code>optionsObservableArray</code> completes and adds new <code>option</code> elements to the <code>select</code>, but by this time it is too late: The <code>valueObservable</code> is now wrapping an <code>undefined</code> value rather than the real data value returned from the first ajax call.</li>\n</ol>\n\n<p>Question: What is the best way to work around this? Here is what I can think of:</p>\n\n<ol>\n<li>Make the first ajax call run with <code>async: false</code>. This may slow page rendering.</li>\n<li>Create a separate observable for binding to the select value (such as <code>value: selectedValueObservable</code>). Then subscribe to the <code>optionsObservableArray</code> and use the subscription to do something like <code>self.selectedValueObservable(self.valueObservable())</code>. This seems like a bandaid fix.</li>\n<li>Render the select &amp; options to the page before any javascript executes by sending the options data from the server (using MVC viewmodel). This makes it a little more difficult to deal with the options as an <code>observableArray</code>.</li>\n</ol>\n\n<p><strong>Update</strong></p>\n\n<p>There is another concern which I omitted from this question to simplify the example code. In actuality, this viewmodel is used to create an editable list of data items. So there is actually more than 1 dropdown list that gets rendered to the page. The data ajax call really returns an array, and its success function really sets an <code>observableArray</code> of complex items. Since the dropdown list options are reused in every inline form, it is placed on the <code>$parent</code> viewmodel and only loaded once. It is also difficult to pass the select options in a single ajax call because the data items are retrieved via WebAPI (which returns an <code>IEnumerable</code>, no room to send additional dropdown options). </p>\n"},{"tags":["asp.net-mvc-3","list","post","ienumerable"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":127,"score":2,"question_id":12284941,"title":"Mvc3 IEnumerable<QuestionModel> have a List<QuestionOptionModel> property. When I post, I get null list","body":"<p>I'm making a survey application. Survey has Questions and Questions have QuestionOption.  haveThere is a example <a href=\"http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/\" rel=\"nofollow\">here.</a>\nI am trying to use this technique in a large form with a list(List) but when I post back, the Viewmodel.Order that should’ve contained list of items and activities return with the lists empty.</p>\n\n<p>My QuestionModel.cs like this. </p>\n\n<pre><code> public int Id { get; set; }       \n public string QuestionText { get; set; }     \n public System.Nullable&lt;bool&gt; OptionType1 { get; set; }\n public System.Nullable&lt;bool&gt; OptionType2 { get; set; }\n public List&lt;QuestionOptionModel&gt; OptionList = new List&lt;QuestionOptionModel&gt;();\n</code></pre>\n\n<p>When I post back \"IEnumerable questions\" List OptionList comes null. How can I do this? </p>\n\n<pre><code> public ActionResult CallSurvey()\n    {\n        IEnumerable&lt;QuestionModel&gt; questionModelList = (IEnumerable&lt;QuestionModel&gt;)SessionHelper.GetSessionObject(SessionKeys.SurveyKey);\n       questionModelList = questionSrv.GetQuestionModel();\n        return View(questionModelList);\n\n    }\n</code></pre>\n\n<p>questionModelList include all my survey question and question options. When I post it, post back is coming with only null optionList.</p>\n\n<pre><code> [HttpPost]\n    public ActionResult CallSurvey(IEnumerable&lt;QuestionModel&gt; questions)\n    { ..... }\n</code></pre>\n\n<p>CallSurvey.cshtml</p>\n\n<pre><code>   &lt;body&gt;\n    @using ((Html.BeginForm()))\n    {\n        @ViewBag.Test\n        &lt;section class=\"slides layout-regular template-kendo\"&gt;\n        @foreach (var item in Model)\n        {&lt;article&gt;\n\n                @Html.Partial(\"QuestionEditor\", item)\n               &lt;/article&gt;\n        }\n   &lt;div class=\"slide-area\" id=\"prev-slide-area\"&gt;&lt;/div&gt;\n        &lt;div class=\"slide-area\" id=\"next-slide-area\"&gt;&lt;/div&gt;\n      &lt;/section&gt; \n    }\n&lt;/body&gt;\n</code></pre>\n\n<p>QuestionEditor.cshtml</p>\n\n<pre><code>    @model LSMM.Business.Model.Survey.QuestionModel\n@using LSMM.Web.Helpers\n&lt;div&gt;\n    @using (Html.BeginCollectionItem(\"Questions\"))\n    {\n\n        &lt;table id=\"table1\"&gt;\n            &lt;tr&gt;\n                &lt;td&gt;\n                    &lt;div id=\"@Model.Id\" class=\"hint\"&gt;\n                        @Html.HiddenFor(m =&gt; m.Id)\n                        @Html.HiddenFor(m =&gt; m.QuestionText)\n                        @Html.HiddenFor(m =&gt; m.OptionType1)\n                        @Html.HiddenFor(m =&gt; m.OptionType2)\n\n\n\n                        @for (int i = 0; i &lt; Model.OptionList.Count; ++i)\n                        {\n                        @Html.LabelFor(m =&gt; m.OptionList[i].Id)\n                        @Html.LabelFor(m =&gt; m.OptionList[i].QuestionId)\n                        @Html.LabelFor(m =&gt; m.OptionList[i].Checked)\n                        @Html.LabelFor(m =&gt; m.OptionList[i].Description)\n                        @Html.LabelFor(m =&gt; m.OptionList[i])\n                   }\n                        &lt;span id=\"sorular\"&gt;@Model.Id. @Model.QuestionText&lt;/span&gt;\n                        &lt;br /&gt;\n                        &lt;br /&gt;\n                    &lt;/div&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;\n                    &lt;div class=\"hint2\"&gt;\n                        @Html.Partial(\"QuestionOptionEditor\", Model)\n                    &lt;/div&gt;\n                &lt;/td&gt;\n                &lt;td&gt;\n                    &lt;div id=\"@Model.Id-Img\"&gt;\n                        &lt;h2 style=\"top: 200px; right: 0;\"&gt;\n                            &lt;img src=\"../../Content/css/img/@Model.Id-Img.png\"&gt;&lt;/h2&gt;\n                    &lt;/div&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;  \n</code></pre>\n\n<p>and QuestionOptionEditor.cshtml </p>\n\n<pre><code>   @model LSMM.Business.Model.Survey.QuestionModel\n\n @using LSMM.Web.Helpers               \n\n\n\n@foreach (var option in @Model.OptionList)\n{\n\n\n    &lt;p&gt;\n        @if (@Model.OptionType1 == false)\n        { \n            @Html.Partial(\"QuestionOptionModel\", option)\n\n        }\n        else\n        { \n            @Html.Partial(\"../Shared/DisplayTemplates/QuestionOptionModel\", option)\n\n        }\n    &lt;/p&gt;\n\n}\n</code></pre>\n\n<p>Here QuestionOptionModel views like this;</p>\n\n<pre><code>@model LSMM.Business.Model.Survey.QuestionOptionModel\n\n      @(Html.RadioButtonFor(m =&gt; m.Id, true, new { Id = @Model.Id, Name = @Model.QuestionId })) @Html.Label(\"Evet\")  \n      &lt;br /&gt; \n      &lt;br /&gt;\n      @(Html.RadioButtonFor(m =&gt; m.Id, false ,new { Id=@Model.Id, Name = @Model.QuestionId})) @Html.Label(\"Hayır\")\n</code></pre>\n"},{"tags":["asp.net-mvc-3","visual-studio-2010"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12916389,"title":"Adding a CSHTMLpage in a Visual Studio MVC3 app","body":"<p><strong>FIXED - the problem went away when I moved the new CSHTML page from the app's main folder to its Views folder</strong></p>\n\n<p>I have a VS 2010 web app that uses multiple pages.  Right now, it is based on a single physical web page that consists pretty much of just a  block, and JavaScript code that fills it with XHTML code to show what appear to be different pages.</p>\n\n<p>I want to change this to use actual different physical pages; however, when I add a CSHTML page with Visual Studio, the new page generates this warning:</p>\n\n<pre><code>The pre-application start initialization method Start on type\nSystem.Web.WebPages.Deployment.PreApplicationStartCode\nthrew an exception with the following error message:\nException has been thrown by the target of an invocation.. \n</code></pre>\n\n<p>First of all, am I doing the right thing by having multiple CSHTML pages, as opposed to the one Javascript-driven master page method?</p>\n\n<p>Second, how do I add additional CSHTML pages without generating the error?</p>\n\n<p>Note that the only place where \"webpages-enabled\" appears in any of the Web.config  blocks has it set to False.  I tried removing it entirely, but the problem remained.</p>\n"},{"tags":["asp.net-mvc-3","iis","javascript-library","third-party-controls"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12916820,"title":"Hosting MVC 3 application on IIS with External .js files","body":"<p>I have successfully hosted my mvc3 web application on IIS, but when I browse my website, I got a very annoying issue, every thing is working fine but all those .js files that I hosted with my Application are not working. I am using firefox to browse my hosted site and in the firebug all files are visible but these are not working. The page with no scripting are working fine. I don't know what is the issue.</p>\n\n<p>I have also used a third party control which is also Client side and I am using that in my .js files. would this caused my .js files to work in my application?</p>\n\n<p>Actually all inputs and grids in a webpage is defined on my .js file. but not displayed.</p>\n\n<p>Kindly help me out</p>\n\n<p>Thanks in advance..</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","runtime-error"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":101,"score":0,"question_id":12915673,"title":"Error System.Web.HttpCompileException (0x80004005)","body":"<p>I am now suddenly getting the following message in only 1 page. What could be the issue?</p>\n\n<p>I am doing a web site with MVC ASP .NET. </p>\n\n<blockquote>\n  <p>System.Web.HttpCompileException (0x80004005):\n  c: \\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\Temporary ASP.NET\n  Files\\root\\fcd5a636\\19fe4d1\\App_Web_create.cshtml.c6727781.9mayykrj.0.cs(162):\n  error CS1528: Expected ; or = (cannot specify constructor arguments in\n  declaration) at System.Web.Compilation.AssemblyBuilder.Compile() at\n  System.Web.Compilation.BuildProvidersCompiler.PerformBuild() at\n  System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath\n  virtualPath) at\n  System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath\n  virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean\n  allowBuildInPrecompile, Boolean throwIfNotFound, Boolean\n  ensureIsUpToDate) at\n  System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext\n  context, VirtualPath virtualPath, Boolean noBuild, Boolean\n  allowCrossApp, Boolean allowBuildInPrecompile, Boolean\n  throwIfNotFound, Boolean ensureIsUpToDate) at\n  System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath\n  virtualPath, HttpContext context, Boolean allowCrossApp, Boolean\n  throwIfNotFound) at\n  System.Web.Compilation.BuildManager.GetObjectFactory(String\n  virtualPath, Boolean throwIfNotFound) at\n  System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String\n  virtualPath) at\n  System.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext\n  controllerContext, String virtualPath) at\n  System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext\n  controllerContext, List<code>1 locations, String name, String\n  controllerName, String areaName, String cacheKey, String[]&amp;\n  searchedLocations) at\n  System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext\n  controllerContext, String[] locations, String[] areaLocations, String\n  locationsPropertyName, String name, String controllerName, String\n  cacheKeyPrefix, Boolean useCache, String[]&amp; searchedLocations) at\n  System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext\n  controllerContext, String viewName, String masterName, Boolean\n  useCache) at\n  System.Web.Mvc.ViewEngineCollection.&lt;&gt;c__DisplayClassc.&lt;FindView&gt;b__b(IViewEngine\n  e) at System.Web.Mvc.ViewEngineCollection.Find(Func</code>2 lookup, Boolean\n  trackSearchedPaths) at\n  System.Web.Mvc.ViewEngineCollection.FindView(ControllerContext\n  controllerContext, String viewName, String masterName) at\n  System.Web.Mvc.ViewResult.FindView(ControllerContext context) at\n  System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)\n  at\n  System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext\n  controllerContext, ActionResult actionResult) at\n  System.Web.Mvc.ControllerActionInvoker.&lt;>c_<em>DisplayClass1c.b</em>_19()\n  at\n  System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter\n  filter, ResultExecutingContext preContext, Func<code>1 continuation) at\n  System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass1c.&lt;&gt;c__DisplayClass1e.&lt;InvokeActionResultWithFilters&gt;b__1b()\n  at\n  System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext\n  controllerContext, IList</code>1 filters, ActionResult actionResult) at\n  System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext\n  controllerContext, String actionName) at\n  System.Web.Mvc.Controller.ExecuteCore() at\n  System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)\n  at\n  System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext\n  requestContext) at\n  System.Web.Mvc.MvcHandler.&lt;>c_<em>DisplayClass6.&lt;>c</em>_DisplayClassb.b_<em>5()\n  at\n  System.Web.Mvc.Async.AsyncResultWrapper.&lt;>c</em>_DisplayClass1.b_<em>0()\n  at\n  System.Web.Mvc.Async.AsyncResultWrapper.&lt;>c</em>_DisplayClass8<code>1.&lt;BeginSynchronous&gt;b__7(IAsyncResult\n  _) at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult</code>1.End() at\n  System.Web.Mvc.MvcHandler.&lt;>c_<em>DisplayClasse.b</em>_d()\n  at System.Web.Mvc.SecurityUtil.b__0(Action f)\n  at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action\n  action) at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult\n  asyncResult) at\n  System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult\n  result) at\n  System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()\n  at System.Web.HttpApplication.ExecuteStep(IExecutionStep step,\n  Boolean&amp; completedSynchronously)</p>\n</blockquote>\n"},{"tags":["c#","javascript","jquery","asp.net-mvc-3","html5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":93,"score":-5,"question_id":12915871,"title":"adding and removing the textboxes using jquery","body":"<p>I have a view in mvc where i have to add and remove more than one textboxes  which are in rows after clicking on the link Add the row of textboxes must be added and  after clicking on Remove row must be deleted.Suggest me some thing with respect to this..</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12665664,"title":"How can I have the values from my model match the selected values in my dropdown lists?","body":"<p>How can I have the values from my model match the selected values in my dropdown lists?</p>\n\n<p>What I would like to do is to have the dropdown list reflect the property value of the model. I've only been able to show the same value in all of the dropdown lists.  I've been trying to do this:    </p>\n\n<pre><code>@Html.DropDownList(\"searchString\", Model.Enrollments.FirstOrDefault().WeekDays.Select(s =&gt; \n   new SelectListItem { Text = s.ToString(), Value = s.ToString(), \n   Selected = s.ToString().Equals(Model.Enrollments.FirstOrDefault().classDays) }))\n</code></pre>\n\n<p>but with no luck.</p>\n\n<p>A snippet of my Enrollment model:</p>\n\n<pre><code>    public string[] weekDays = new string[6] { \"Day\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\" };\n\n    public string[] WeekDays\n\n    {\n\n        get { return weekDays; }\n\n    }\n</code></pre>\n\n<p>My view is of type: @model SchoolIn.Models.Student but I would like to interject another model, Model.Enrollments and minipulate the dropdown list items.</p>\n\n<pre><code>  &lt;table&gt;\n     &lt;tr&gt;\n              @{\n     int cnt = 0;\n        List&lt;SchoolIn.ViewModels.EnrolledCourseData&gt; courses = ViewBag.Courses;\n\n        foreach (var course in courses)\n        {\n            if (cnt++ % 4 == 0)\n            {\n\n                       @:  &lt;/tr&gt; &lt;tr&gt;\n\n\n             }\n                       @: &lt;td &gt;  \n                      &lt;br /&gt;&lt;br /&gt;&lt;br /&gt;\n                    &lt;input type=\"checkbox\"  \n                           name=\"selectedCourses\"  \n                           value=\"@course.CourseID\"  \n                           @(Html.Raw(course.Assigned ? \"checked=\\\"checked\\\"\" : \"\")))\n\n   /&gt;  \n\n\n                    @*course.CourseID @:  @course.Title*@\n                    @course.Title&lt;br /&gt;  &lt;br /&gt;\n\n      if (Model.Enrollments != null)\n      {\n\n\n\n       @Html.DropDownList(\"searchString\", Model.Enrollments.FirstOrDefault().WeekDays.Select(s =&gt; new SelectListItem { Text = s.ToString(), Value = s.ToString(), Selected = s.ToString().Equals(Model.Enrollments.FirstOrDefault().classDays) })) \n\n     }\n\n\n\n\n                                 @:&lt;/td&gt; \n\n\n\n       }\n                                @:&lt;/tr&gt; \n\n }\n\n          &lt;/table&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12915099,"title":"binding dropdownlist by another dropdownlist in mvc 3","body":"<p>I'm new with mvc and I have 2 dropdownlists and I need to bind second one by first one using mvc 3.. </p>\n\n<p>Code sample </p>\n\n<pre><code>@&lt;table&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            @Html.DropDownList(\"Brands\", Model.Brands, \"Select Brand\", New With {.style = \"width:150px;\"})\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            @Html.DropDownList(\"Models\", Model.Models, \"Select Model\", New With {.style = \"width:150px;\"})\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            @Html.DropDownList(\"Devices\", Model.Devices, \"Select Device\", New With {.style = \"width:150px;\"})\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            @Html.DropDownList(\"Systems\", Model.Systems, \"Select System\", New With {.style = \"width:150px;\"})\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>I need to fill Models by Brands and Fill Devices by Models.\nany help please..</p>\n\n<p>Thanks</p>\n"},{"tags":["jquery","asp.net-mvc-3","maskedinput"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":291,"score":1,"question_id":12037582,"title":"Set value in jQuery Masked Textbox from MVC3 model","body":"<p>I am using  jQuery Masked Input Plugin. </p>\n\n<pre><code>$(\"#txtBoxId\").mask(\"###-##-####\");\n</code></pre>\n\n<p>Everything works fine if I set the complete value from model i.e. <code>123-45-6789</code>.\nBut I want to display only the last inputs i.e. <code>6789</code>.</p>\n\n<p>Is there any way to set the value of the textbox in the format <code>###-##-6789</code>?</p>\n"},{"tags":["asp.net-mvc-3","orchardcms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12914634,"title":"How to use Tags Service to get Tags associated with a content type in Orchard CMS?","body":"<p>I have a page called Careers which lists all the Jobs posted with their tags. After clicking on a job and going to their description, I want to display a list of Similar Jobs. For this, I  am trying to use Tags module of Orchard to get all the Tag Names and put it into a searchbuilder.</p>\n\n<pre><code>namespace SimpleJobs.Handlers\n  {\n    public class SimpleJobsHandler : ContentHandler\n    {\n        //adding IContentManager and IIndexmanager which performs actual search\n\n        private readonly IContentManager _contentManager;\n        private readonly IIndexManager _indexManager;\n        private readonly ITagService _tagService;\n\n        public SimpleJobsHandler(IRepository&lt;SimpleJobsPartRecord&gt; simpleJobsPartRepository,\n            IContentManager contentManager,\n            IIndexManager indexManager,\n            ITagService tagService\n            )\n        {\n            _contentManager = contentManager;\n            _indexManager = indexManager;\n            _tagService = tagService;\n            Filters.Add(StorageFilter.For(simpleJobsPartRepository));\n\n        }\n\n        //building display shape\n        protected override void BuildDisplayShape(BuildDisplayContext context)\n        {\n            if (context.ContentItem.ContentType == \"Jobs\")\n            {\n                var similarJobs = GetSimilarJobs(context.ContentItem);\n                if (similarJobs.Any())\n                {\n                    context.Shape.SimilarJobs = context.New.SimilarJobs(Jobs: similarJobs);\n\n                }\n\n            }\n\n        }\n\n     //getting similar jobs using tags\n        private IEnumerable&lt;ContentItem&gt; GetSimilarJobs(ContentItem displayedJob)\n        {\n            StringBuilder tagStringBuilder = new StringBuilder();\n\n            var searchBuilder = GetSearchBuilder();\n\n\n\n            var simpleJobsTags = _tagService.GetTags();\n\n\n\n\n            foreach (var tag in simpleJobsTags){\n\n                tagStringBuilder.Append(\" \");\n                tagStringBuilder.Append(tag.TagName);\n            }\n\n\n            var similarItemsIds = searchBuilder\n                .WithField(\"type\", \"Jobs\").Mandatory().ExactMatch()\n                .Parse(\"simplejobs-tags\", tagStringBuilder.ToString()).Mandatory()\n                .Search()\n                .Where(h =&gt; h.ContentItemId != displayedJob.Id)\n                .Select(h =&gt; h.ContentItemId)\n                .Take(5).ToList();\n\n\n            return _contentManager.GetMany&lt;ContentItem&gt;(similarItemsIds, VersionOptions.Published, QueryHints.Empty);\n\n            }\n\n        //to check if the user has lucene type implementer enabled otherwise \n        //return a nullsearchbuilder instead of an error\n\n        private ISearchBuilder GetSearchBuilder()\n        {\n            return _indexManager.HasIndexProvider()\n                ? _indexManager.GetSearchIndexProvider().CreateSearchBuilder(\"Search\")\n                : new NullSearchBuilder();\n        }\n    }\n  }\n</code></pre>\n\n<p>This code does not seem to work however. Please advise.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["c#","jquery","asp.net-mvc","asp.net-mvc-3","html5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12915494,"title":"I want to add collection of Labels & textboxes in <div class=\"form-inliine\"> how can I do this?","body":"<p>This is my code below of view.</p>\n\n<pre><code> &lt;div class=\"carpet bs-docs-example bs-docs-carpet\"&gt;\n\n            &lt;h4&gt;Please Provide details about your carpetting needs &lt;/h4&gt;\n\n\n            &lt;div class=\"form-inline\"&gt;\n                &lt;label class=\"control-label\"&gt;&lt;b&gt;Length&lt;/b&gt;&lt;/label&gt;\n                &lt;input type=\"text\" name=\"Carpet.Room.Length.Feet\" id=\"Carpet_Room_Length_Feet\" style=\"width: 80px\" class=\"floor-text\" /&gt;Ft\n            &lt;input type=\"text\" name=\"Carpet.Room.Length.Inch\" id=\"Carpet_Room_Length_Inch\" class=\"floor-text\" /&gt;Inch\n                &lt;label&gt;&lt;b&gt;Width&lt;/b&gt;&lt;/label&gt;\n                &lt;input type=\"text\" name=\"Carpet.Room.Width.Feet\" id=\"Carpet_Room_Width_Feet\" class=\"floor-text\" /&gt;Ft\n             &lt;input type=\"text\" name=\"Carpet.Room.Width.Inch\" id=\"Carpet_Room_Width_Inch\" class=\"floor-text\" /&gt;Inch&lt;br /&gt;\n            &lt;/div&gt;\n            &lt;div&gt;&lt;/div&gt;\n            &lt;a href=\"#\" class=\"addroom\"&gt;Add Room&lt;/a&gt; / &lt;a href=\"#\" class=\"removeroom\"&gt;Remove Room&lt;/a&gt;\n            &lt;br /&gt;\n            &lt;div class=\"control-group\"&gt;\n                @Html.Label(\"Removing Old flooring\", new { @class = \"control-label\" })\n                &lt;div class=\"controls\"&gt;\n                    @Html.DropDownListFor(model =&gt; Model.Carpet.RemoveOldFlooring, new List&lt;SelectListItem&gt;() { new SelectListItem() { Text = \"Yes\", Value = \"True\" }, new SelectListItem() { Text = \"No\", Value = \"False\" } })\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"control-group\"&gt;\n                @Html.Label(\"Molding\", new { @class = \"control-label\" })\n                &lt;div class=\"controls\"&gt;\n                    @Html.DropDownListFor(model =&gt; Model.Carpet.Molding, new List&lt;SelectListItem&gt;() { new SelectListItem() { Text = \"Yes\", Value = \"True\" }, new SelectListItem() { Text = \"No\", Value = \"False\" } })\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"control-group\"&gt;\n                @Html.Label(\"Stairs Included?\", new { @class = \"control-label\" })\n                &lt;div class=\"controls\"&gt;\n                    @Html.DropDownListFor(model =&gt; Model.Carpet.Stairs, new List&lt;SelectListItem&gt;() { new SelectListItem() { Text = \"Yes\", Value = \"True\" }, new SelectListItem() { Text = \"No\", Value = \"False\" } })\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"control-group\"&gt;\n                @Html.Label(\"How many Steps\", new { @class = \"control-label\" })\n                &lt;div class=\"controls\"&gt;\n                    @Html.EditorFor(x =&gt; x.Carpet.StairSteps)\n                &lt;/div&gt;\n            &lt;/div&gt;\n\n\n\n\n    &lt;/div&gt;​\n</code></pre>\n\n<p>and I am using Jquery as below</p>\n\n<pre><code> $('body').on('click','a.addroom', function(e) {\n     e.preventDefault();\n\n     var $cloned = $('.form-inline:eq(0)').clone();\n\n     $('body').append($cloned);\n\n }); \n\n\n $('body').on('click', 'a.removeroom' ,function(e) {\n     e.preventDefault();\n     $(this).closest('div').remove();\n}); ​\n</code></pre>\n\n<p>Its adding But not removing it.\nI just want to add the contents which are in  tag and remove those on clicking the Links \"Add Room\" &amp; \"Remove Room\".</p>\n"},{"tags":["asp.net-mvc-3","controller","edit"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12913912,"title":"In the Controller of the MVC3 in the Edit Result Data not being passed back to the View","body":"<p>I created a dropdownlist that passes that data fine. However when I want to edit the form the old values in the GET operation wont populate in the Form. I am new to MVC so a concise example would be great.  Update - I think I know whats going on and need help solving. The ddl only contains my dropdown data, so I am passing only the dropdown data to the Model in the Edit View. The data for the form is in the variable model below in my code , how can I pass the ddl and the model in the View?</p>\n\n<p>HERES MY CODE IN THE CONTROLLER</p>\n\n<pre><code>public ActionResult Edit(int id)\n        {\n            var ddl = new Users();\n            ddl.DropDowns = userRepository.Getddl(\"Departments\").Select(c =&gt; new SelectListItem\n            {\n                Value = c.DropdownID.ToString(),\n                Text = c.DropdownText\n            });\n                        var model = userRepository.GetUserId(id);\n            return View(ddl);\n        }\n\n        [HttpPost]\n        public ActionResult Edit(Models.Users users)\n        {\n            userRepository.UpdateUser(users);\n            return RedirectToAction(\"Index\");\n        }\n</code></pre>\n\n<p>VIEW</p>\n\n<pre><code>@model Models.Users\n\n@{\n    ViewBag.Title = \"Edit\";\n}\n\n&lt;h2&gt;Edit&lt;/h2&gt;\n\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n@using (Html.BeginForm()) {\n    @Html.ValidationSummary(true)\n    &lt;div id=\"stylized\" class=\"myform\"&gt;\n    &lt;fieldset&gt;\n        &lt;legend&gt;User Account&lt;/legend&gt;     \n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.UserFullName)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.UserFullName)\n            @Html.ValidationMessageFor(model =&gt; model.UserFullName)\n        &lt;/div&gt;\n       &lt;br/&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.UserName)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.UserName)\n            @Html.ValidationMessageFor(model =&gt; model.UserName)\n        &lt;/div&gt;\n        &lt;br/&gt;\n         &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.ProfileName)\n        &lt;/div&gt;\n          &lt;div class=\"editor-field\"&gt;\n       @Html.DropDownListFor(x=&gt; x.DeptID,new SelectList(Model.DropDowns,\"Value\",\"Text\"),\"Select\")      \n\n        &lt;/div&gt; \n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12913637,"title":"Ajax call after postback in jquery function in mvc3","body":"<p>I am having problem for Ajax call from Jquery function after postback in mvc3. The action method mentioned in the ajax section below doesn't get called after postback whereas it works fine before postback.\n    actually I am trying to get value for textbox. here is my Jquery function..</p>\n\n<pre><code>  $(\"#ddlDiagnosis\").change(function () {\n            alert($(\"#ddlDiagnosis\").val());\n            var selection = $(\"#ddlDiagnosis\").val();\n            var datatosend = { selectedValue: selection };\n\n            $.ajax({\n                url: \"home/GetDiagnosisICDCode\",\n                type: 'POST',\n                data: { selectedValue: $(this).val() },  //datatosend,\n                datatype: 'json',\n                success: function (data) {\n                    var elements = \"\";\n                    $.each(data, function () {\n                        $(\"#txtICDCode\").val(this.ICDcode)\n                    })\n                }\n            });\n\n       });\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","nunit","moq","rhino-mocks-3.5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":84,"score":-1,"question_id":12911630,"title":"Unit Testing using NUnit and RhinoMocks","body":"<p>If Mock Repository pattern is not used in model classes then, can I unit test the controller action using Moq or RhinoMocks combined with NUnit testing framework? Please help.</p>\n\n<p>The Controller action is:</p>\n\n<pre><code>        [HttpPost]\n        public JsonResult ExecLogin(JsonRequest&lt;LoginModel&gt; request)\n        {\n            var loginObj = request.InputObject;\n\n            var login = new StringBuilder(300);\n            login.Append(\"&lt;UserName&gt;\").Append(loginObj.UserName).Append(\"&lt;/UserName&gt;\")\n                .Append(\"&lt;Password&gt;\").Append(EncodingHelper.GetHashedPassword(loginObj.Password)).Append(\"&lt;/Password&gt;\")\n                .Append(\"&lt;RememberMe&gt;\").Append(loginObj.RememberMe).Append(\"&lt;/RememberMe&gt;\")\n                ;\n        var input = new SomeType { Operation = request.Operation, PageName = ActionName, InputValue = login.ToString() };\n\n        var returnValue = SomeDelegate.Instance.ExecuteOperation(GenerateInput(input));\n        return Json(new JsonResponse&lt;string&gt; { Status = returnValue.Status, Result = this.PopulateSession(returnValue) });\n        }\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc-3","entity-framework","dbcontext","objectcontext"],"answer_count":1,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":1843,"score":5,"question_id":9020809,"title":"Why does Entity Framework automatically use the ObjectContext instead of the DbContext when mapping database tables using ADO.NET Entity datamodel","body":"<p>I am following the database approach first; I have created the tables in my SQL Server 2008 database, then I map those tables to Entity Framework classes using an ADO.NET Entity Data Model. But when I opened the designer.cs file I found the following code in the class definition which was created automatically:</p>\n\n<pre><code>public partial class PortalEntities : ObjectContext\n</code></pre>\n\n<p>so I have the following three question that get my confused:</p>\n\n<ol>\n<li><p>Why does my <code>PortalEntities</code> class derive from <code>ObjectContext</code> and not <code>DbContext</code> as I was expecting?</p></li>\n<li><p>Is there a major difference between <code>ObjectContext</code> &amp; <code>DbContext</code>, or they are mainly the same and offer that same capabilities</p></li>\n<li><p>When I try to write the something similar to the following code:</p>\n\n<pre><code>Student student = db.Students.Find(id);\n</code></pre></li>\n</ol>\n\n<p>I found that I cannot use <code>.Find()</code> method as I used to do using <code>DbContext</code>, so does this mean that <code>ObjectContext</code> &amp; <code>DbContext</code> have different methods that I can use?</p>\n\n<p>BR</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","mono","outputcache"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12913856,"title":"How to clear OutputCache in Mono MVC2 application","body":"<p>AddCacheItemDependency is used to clear OutputCache in Mono Apache MVC2 application using code below.\nThis is described in  <a href=\"http://stackoverflow.com/questions/11585/clearing-page-cache-in-asp-net\">Clearing Page Cache in ASP.NET</a></p>\n\n<p>In Mono, OutputCache is not cleared.\nLooking into source code in GitHub shows that AddCacheItemDependency  is not implemented in Mono.\nHow to fix this so that OutputCache can cleared ?</p>\n\n<p>Andrus.</p>\n\n<pre><code>[OutputCache(Duration = 3600, VaryByParam = \"none\")]\npublic ActionResult Index()\n{\n  HttpContext.Current.Response.AddCacheItemDependency(\"Pages\");\n  return View();\n}\n\npublic ActionResult Refresh()\n{\nHttpRuntime.Cache.Insert( \"Pages\", DateTime.Now);\n}\n</code></pre>\n\n<p>in Global.asax.cs:</p>\n\n<pre><code>protected void Application_Start()\n{\nHttpRuntime.Cache.Insert( \"Pages\", DateTime.Now);\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","asp.net-ajax"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12912267,"title":"calculate number of days in ajax calender extender","body":"<p>I want to calculate the number of days in asp.net by AJAX calender extender on text box. But i am not getting the right output which i want. I can't find the error which is coming in output. The code is </p>\n\n<pre><code>    string a = TextBox1.Text;\n    string b = TextBox2.Text;\n    DateTime t1 = Convert.ToDateTime(a);\n    DateTime t2 = Convert.ToDateTime(b);\n    TimeSpan days = t2 - t1;\n    int zile = Convert.ToInt32(Math.Ceiling(365-(days.TotalDays)));\n    TextBox3.Text = zile.ToString();\n</code></pre>\n\n<p>I am not getting the right output.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":877,"score":0,"question_id":5886792,"title":"Adding element if user is in role","body":"<p>I do something like that:</p>\n\n<pre><code> &lt;ul id=\"menu\"&gt;\n     @if (HttpContext.Current.User.IsInRole(\"admin\")) {\n         &lt;li&gt;@Html.ActionLink(\"Administration\", \"Index\", \"Administration\")&lt;/li&gt;\n    }\n &lt;/ul&gt;\n</code></pre>\n\n<p>Is there a better way?</p>\n"},{"tags":["asp.net-mvc-3","session"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12912974,"title":"Can I release an MVC3 session early","body":"<p>Currently, MVC3 synchronizes requests on a user's Session. This means that requests are served one at a time for any particular authenticated client. Is there a method for releasing the session lock earlier from inside an MVC3 controller? There are points in my code where I am finished with the session and I am happy for another request to be served.</p>\n\n<p>I am interested in the session contents at some point, so a sessionless controller doesn't work.</p>\n\n<p>I'd like to manually release the lock on the session to allow the next request to be served. Can this be done without rewriting large portions of the MVC3 session mechanism?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12911782,"title":"In ASP.NET MVC, where the file is created by default, if I just specify the file name, and no path?","body":"<p>In ASP.NET MVC, where the file is getting created by default, if I just specify the file name, and no path?</p>\n\n<p>I'm creating the file as :</p>\n\n<pre><code>System.IO.File.WriteAllText(\"MYSTERIOUS_log.txt\", DateTime.Now.Precise() + msgString, Encoding.Unicode);\n</code></pre>\n\n<p>I looked inside the ASP.NET temporary folders, and also in the bin folder of application path of the current mvc web application. It might sound funny, but I even scanned my entire computer(all drives), for the specified file name, but still could not find it.</p>\n\n<p>PS: </p>\n\n<ol>\n<li>I can assure you, that there are no exceptions and the file is getting created properly.</li>\n<li>I'm running my application in VS2010, on the MVC 3 framework, on a XP machine.</li>\n<li>The application has also been hosted in IIS(ver 5.1).</li>\n</ol>\n\n<p>So, where is my file gone?</p>\n"},{"tags":["javascript","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12596299,"title":"How to get height and width after window resize","body":"<p>I have a scorm module which launches in a new window with resizable = 1 in window.open in my js file:</p>\n\n<pre><code>function OpenScormModuleWindow(scormModuleId, scormModuleUrl, title, width, height) \n{\n  _scormModuleId = scormModuleId;\n  InitializeUserScormModule();\n  scormModuleWindow = window.open(scormModuleUrl, \"title\", \"width=\" + width + \", height=\" + height + \", resizable = 1\");\n  scormModuleWindow.focus();\n}\n</code></pre>\n\n<p>in my view I have:</p>\n\n<pre><code>  var myWidth = 0, myHeight = 0;\n  if (typeof (window.innerWidth) == 'number')\n  {\n      myWidth = window.innerWidth;\n      myHeight = window.innerHeight;\n  }\n  else if (document.documentElement &amp;&amp; (document.documentElement.clientWidth || document.documentElement.clientHeight))\n  {\n      myWidth = document.documentElement.clientWidth; myHeight = document.documentElement.clientHeight;\n  }\n  else if (document.body &amp;&amp; (document.body.clientWidth || document.body.clientHeight))\n  {\n      myWidth = document.body.clientWidth; myHeight = document.body.clientHeight;\n  }\n</code></pre>\n\n<p>I get height and width but is not correct     </p>\n\n<p>the user can now resize, when the window is the correct size, how can I get the height and width please?</p>\n\n<p>I need to get these values so I can save it, next time the window opens it is the correct size.</p>\n\n<p>thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mongodb","cloud"],"answer_count":2,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":1420,"score":6,"question_id":6263969,"title":"Hosting ASP.NET MVC 3 application using MongoDB","body":"<p>I'd like to hear if any of you had experiences developing and hosting such an application?</p>\n\n<p>What do you think about combining the two? Is there a way to host it somewhere in cloud (Azure, Amazon...)? What resources (tools, drivers, documentation) have you used for development?</p>\n\n<p>Thanks! :)</p>\n"},{"tags":["asp.net-mvc-3","asp.net-membership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12896401,"title":"Compilation error when using MVC 3 Membership : 'Models' does not exist in the type 'System.Web.Security.Membership'","body":"<p>I'm trying to follow a couple of tutorials on using the standard ASP.NET membership in MVC 3, as soon as I create an MVC 3 web application (Internet Application) in Visual Studio 2010 and I run the sample solution and click 'Log In' on the generated template I get an error:</p>\n\n<pre><code>Compiler Error Message: CS0426: The type name 'Models' does not exist in the type 'System.Web.Security.Membership'\n\nLine 28:     \nLine 29:     public class _Page_Views_Account_LogOn_cshtml : System.Web.Mvc.WebViewPage&lt;Membership.Models.LogOnModel&gt; {\n</code></pre>\n\n<p>I searched around but I can't seem to find any solutions. It's obviously something trivial, any ideas?</p>\n\n<p>Thanks.</p>\n"},{"tags":["javascript","jquery","asp.net-mvc-3","request","rawurl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":483,"score":0,"question_id":8484401,"title":"Alternate for Request.RawUrl in javascript/jquery?","body":"<p>I was using a <code>Request.RawUrl</code> to get the URL after localhost. i.e if my url is <code>localhost:52482/something/somethingelse</code>, then this used to return <code>/something/somethingelse</code>.</p>\n\n<p>I accessed this in a base controller(MVC3).But i found out that if there are some entries made in the page ,say some textbox and other selections, this would return a query string kind of value. How do I solve this?</p>\n\n<p>I was thinking about perform this operation in javascript to see if i can get just the URL without query string. Let me know how should I proceed here?</p>\n\n<p>Thanks,\nAdarsh</p>\n"},{"tags":["asp.net-mvc-3","jqgrid","checkbox","jqgrid-asp.net"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12910157,"title":"Getting rowID from row of a jqgrid","body":"<p>In my <code>asp.net MVC 3</code> application am using <code>Jqgrid</code> as my grid. It contains a checkbox and i managed the event as below</p>\n\n<pre><code> $(\"#list\").find('input[type=checkbox]').live('change', function () {\n                if ($(this).is(':checked')) {\n                    var _row = $(this).parent().parent();\n}\n});\n</code></pre>\n\n<p>i got the row using <code>$(this).parent().parent()</code> i want to <code>get the id of the _row</code> . How can i get the id? Is there any method please share</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":76,"score":-1,"question_id":12909956,"title":"Insert data into multiple table MVC3","body":"<p>I am new about MVC+EF</p>\n\n<p>I need to insert data into 3 table at a time but can not Figure out how can I do this\nMy data model is </p>\n\n<pre><code>public class UserLogin\n    {\n        [Key]public int UserID { get; set; }\n        public string LoginName { get; set; }\n        public byte Password { get; set; }\n    }\n    public class UserDetails\n    {\n        [Key]\n        public int DetailID { get; set; }\n        [ForeignKey(\"UserLogin\")]\n        public int UserID { get; set; }\n        public string UserName { get; set; }\n        public string Address { get; set; }\n    }\n    public class UserType\n    {\n        [Key]\n        public int TypeID { get; set; }\n        [ForeignKey(\"UserLogin\")]\n        public int UserID { get; set; }\n        public string TypeName { get; set; }\n        public string TypeDiscription { get; set; }\n    }\n    public class UserBDCon : DbContext\n    {\n        public DbSet&lt;UserLogin&gt; logins { get; set; }\n        public DbSet&lt;UserDetails&gt; Detail { get; set; }\n        public DbSet&lt;UserType&gt; Type { get; set; }\n    }\n</code></pre>\n\n<p>Can anyone tell me how does look the controller and view file for this model ?</p>\n"},{"tags":["jquery","asp.net-mvc-3","mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":99,"score":0,"question_id":12910589,"title":"Pass jquery parameters to Controller Action","body":"<p>I want to pass 2 parameters with ajax function to the Controller Action, but the code that I use it's not working. \nThe action is called but without parameters; what is wrong in the code below? Please help.\nThank you!</p>\n\n<p>view code:</p>\n\n<pre><code>        &lt;fieldset&gt;\n            @Html.Label(\"Start date: *\")\n            @Html.TextBoxFor(model =&gt; model.startDate, new { Class = \"calendar\", data_mini = true, data_role = \"datebox\", data_options = \"{\\\"mode\\\":\\\"calbox\\\",\\\"useNewStyle\\\": true,\\\"overrideStyleClass\\\": \\\"calendar\\\",\\\"fieldsOrderOverride\\\": [\\\"d\\\",\\\"m\\\",\\\"y\\\"],\\\"headerFormat\\\":\\\"%A,%d, %-m, %Y\\\",\\\"dateFormat\\\":\\\"DD-MM-YYYY\\\",\\\"useTodayButton\\\":true}\" })\n        &lt;/fieldset&gt;\n        &lt;fieldset&gt;\n            @Html.Label(\"End date: *\")\n            @Html.TextBoxFor(model =&gt; model.endDate, new { Class = \"calendar\", data_mini = true, data_role = \"datebox\", data_options = \"{\\\"mode\\\":\\\"calbox\\\",\\\"useNewStyle\\\": true,\\\"overrideStyleClass\\\": \\\"calendar\\\",\\\"fieldsOrderOverride\\\": [\\\"d\\\",\\\"m\\\",\\\"y\\\"],\\\"headerFormat\\\":\\\"%A,%d, %-m, %Y\\\",\\\"dateFormat\\\":\\\"DD-MM-YYYY\\\",\\\"useTodayButton\\\":true}\" })\n        &lt;/fieldset&gt;\n        &lt;fieldset&gt;\n            @Html.Label(\"Submited: *\")\n        &lt;/fieldset&gt;\n        &lt;a data-role=\"button\" id=\"search\" name=\"search\" data-theme=\"a\" class=\"book ui-btn ui-btn-corner-all ui-shadow ui-btn-up-a\"&gt;\n        &lt;span class=\"ui-btn-inner ui-btn-corner-all\"&gt;&lt;span class=\"ui-btn-text\"&gt;Search&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;\n</code></pre>\n\n<p>Jquery code:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n $(\"#search\").click(function () {\n    GetNewDaysList();\n   });\n//gets elements for the selected dates\nfunction GetNewDaysList() {\nvar action = '@Url.Action(\"GetNewDays\", \"ApproveWork\")';\nvar criteria = new Array($(\"#startDate\").val(),$(\"#endDate\").val());\n    var opt = {\n        type: \"GET\",\n        data: { criteria: criteria },\n        url: action,\n        success: DaysListSuccess,\n        error:DaysListFailed\n    };\n    jQuery.ajax(opt);\n}\n\n  function DaysListSuccess(data) {\n    if (data != undefined) {\n        $.mobile.hidePageLoadingMsg();\n        $('ul').hide();\n        $(\"#employeeDays\").html(data).trigger('create');\n        $(\"#searchSection\").show();\n        $(\"#employeeDays\").show();\n    }\n}\n\n  function DaysListFailed() {\n //\n}\n});\n</code></pre>\n\n<p></p>\n\n<p>Controller code:</p>\n\n<pre><code>    [HttpGet]\n      public ActionResult GetNewDays(IEnumerable&lt;string&gt; criteria)\n    {\n        List&lt;string&gt; criteriaList = criteria.ToList();\n        DateTime start = DateTime.ParseExact(criteriaList[1],\"dd-MM-yyyy\", System.Globalization.CultureInfo.InvariantCulture);\n        string startToString = start.ToString(\"yyyyMMdd\");\n        DateTime end = DateTime.ParseExact(criteriaList[2], \"dd-MM-yyyy\", System.Globalization.CultureInfo.InvariantCulture);\n        string endToString = end.ToString(\"yyyyMMdd\");            \n        List&lt;string&gt; daysList = new List&lt;string&gt;();\n       var model = new ApproveWorkModel();\n       model.daysList = daysList;\n       return PartialView ( \"EmployeeDays\",model);\n    }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12909969,"title":"mvc 3.0 with wcf pass inputs from view and fetch result and bind to gridview","body":"<p>am completely new to MVC 3.0\nam asked to create a MVC 3.0 application with WCF. I have already created a WCF service and also created MVC application. Am kinda doubtful on the process of how i can link the service to the view of the MVC application. I have created a controller named TMReportController. I have a view BenchEmployee. I need to pass inputs from the View ie., i need to pass values of a dropdown to the service fetch the dataset it returns and bind it to a grid that is present in the view BenchEmployee. Do not my view is an aspx page.\ncan some one please explain to me how this can be done?\nthanks in advance.</p>\n"},{"tags":["asp.net-mvc-3","data-binding","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12904784,"title":"ASP.NET MVC 3 dropdown binding","body":"<p>I encountered the next indexer syntax during binding my model with collection to view.</p>\n\n<p>Here is what I have:</p>\n\n<pre><code>public class CustomerModel\n{\n    public List&lt;Customer&gt; Customers { get; set; }\n}\n\npublic class Customer\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public ImportAction ImportAction { get; set; }\n}\n\npublic enum ImportAction\n{\n    Skip,\n    Add,\n    Merge\n}\n</code></pre>\n\n<p>My view:</p>\n\n<pre><code>@using (Html.BeginForm(\"Edit\", \"Home\"))\n{\n    var index = 0;\n    foreach (var customer in Model.Customers)\n    {\n        &lt;span&gt;Name: @customer.Name&lt;/span&gt;\n        @Html.DropDownListFor(x =&gt; x.Customers[index].ImportAction, customer.ImportAction.ToListItems())\n        index++;\n    }\n    &lt;button type=\"submit\"&gt;\n        Submit&lt;/button&gt;\n}\n</code></pre>\n\n<p>How to avoid this <strong>[index]</strong> usage? Any other correct syntax? Take to the look, that without it <code>@Html.DropDownListFor</code> would not work and update my model on post back.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12909351,"title":"Newline in a ValidationMessage","body":"<p>I'm testing a list of things for null. Every time I find one, I save it in an array to implement it in a validationmessage.</p>\n\n<p>Output I want looks like this:</p>\n\n<p>Field 1 is required<br/>\nField 4 is required<br/>\netc...</p>\n\n<p>But I can't seem to be able to start a new line.</p>\n\n<p>Now, it looks like this:</p>\n\n<p>Field 1 is required Field 4 is required </p>\n\n<p>Does anybody know how to achieve this?</p>\n\n<p>EDIT:</p>\n\n<p>controller:</p>\n\n<pre><code> IDictionary&lt;int, String&gt; emptyFields = new Dictionary&lt;int, String&gt;();\n\n        foreach (Something thing in AnotherThing.Collection)\n        {\n            if (thing.Property == null)\n               emptyFields.add(thing.Index, thing.Name);                   \n        }\n\n        if (emptyFields.Any())\n            throw new CustomException() { EmptyFields = emptyFields };\n</code></pre>\n\n<p>This exception is handled here:</p>\n\n<pre><code>catch (CustomException ex)\n            {                   \n                ModelState.AddModelError(\"file\", ex.GetExceptionString());\n                return View(\"theView\");\n            }    \n</code></pre>\n\n<p>CustomException:</p>\n\n<pre><code>public class CustomException: Exception\n{\n    public IDictionary&lt;int,String&gt; EmptyFields { get; set; }\n    public override String Label { get { return \"someLabel\"; } }\n    public override String GetExceptionString()\n    {\n        String msg = \"\";\n        foreach (KeyValuePair&lt;int,String&gt; elem in EmptyFields)\n        {\n            msg += \"row: \" + (elem.Key + 1).ToString() + \" column: \" + elem.Value + \"&lt;br/&gt;\";      \n        }\n        return msg;        \n    }\n}\n</code></pre>\n\n<p>view:</p>\n\n<pre><code>&lt;span style=\"color: #FF0000\"&gt;@Html.Raw(Html.ValidationMessage(\"file\").ToString())&lt;/span&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12880562,"title":"Mvc base viewmodel render data within layout","body":"<p>I have created a base viewmodel that all of my view models inherit from. That part is easy.</p>\n\n<p>All views are bound to a viewmodel (all are inherited from the base view model)</p>\n\n<p>Within the OnActionExecuted method I insert a true/false value onto a property within the baseviewmodel depending on some conditions.</p>\n\n<p>From the view side of things. I have a single layout page that some how I want to be able to read the property's value and render a different partial view based on the value.</p>\n\n<p>Is this possible? I dont want to have to add the code to each of the views but I don't think I should be binding the layout to my baseviewmodel either.</p>\n\n<p>If I can stay away from inserting the value into the valuebag that would be great as I need to be able to access these values anywhere in the application via strongly typed names.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12909337,"title":"How to preserve input ids when editing lists in ASP.NET MVC?","body":"<p>I'm working with ASP.NET MVC 4, but I on't think that matters for the purpose of this question.</p>\n\n<p>I have a relatively complex model for my edit view. Like this:</p>\n\n<pre><code>public class Recipe_model\n{\n    public string Name { get; set; }\n\n    public List&lt;Recipe_Ingredient_model&gt; Ingredients { get; set; }\n}\n</code></pre>\n\n<p>where Ingredients is</p>\n\n<pre><code>public class Recipe_Ingredient_model\n{\n    public int RecipeID { get; set; }\n\n    public int? UnitID { get; set; }\n\n    public double? Quantity { get; set; }\n\n    public Ingredient_model Ingredient { get; set; }\n}\n</code></pre>\n\n<p>which itself contains the Ingredient model.</p>\n\n<p>When I make a form for this, the built-in <code>Html.EditorFor()</code> doesn't work for anything past the properties of the <code>Recipe_model</code>, so I'm using partial views to display the editor for each of the sub-models.</p>\n\n<p>That works fine as far the interface goes, but when I submit the form to the controller and try to bind to the <code>Recipe_model</code> automatically using </p>\n\n<pre><code>    [HttpPost]\n    public ActionResult Edit(Recipe_model model)\n    {\n        return View(model);\n    }\n</code></pre>\n\n<p>it fails because the ids of the input elements in the partial views do not conform to the correct pattern (I think ParentModel_Property). </p>\n\n<p>Short from hard-coding the ids in the partial view or binding manually from the <code>FormCollection</code> in the controller, is there some way to get the correct ids generated in the partial view so that the model will bind automatically on submit?</p>\n"},{"tags":["asp.net-mvc-3","webgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12843954,"title":"Present multiple IEnumberables and single value properties in single webgrid","body":"<p>I have an Inventory Class that contains not only its own fields but several reference IDs to other classes.</p>\n\n<pre><code>public class Inventory {\n\n  public int Id { get; set; }\n\n  public string RtNum { get; set; }\n\n  public string AcntNum { get; set; }\n\n  public string CardNum { get; set; }\n\n  public string Num { get; set; }\n\n  [Range(1,3)]\n  public int Type { get; set; }\n\n  public int CompanyId { get; set; }\n\n  public int BranchId { get; set; }\n\n  public int PersonId { get; set; }   }\n</code></pre>\n\n<p>In my action I generate several IEnumerable lists of the relevant fields from the other classes. I also have several non-list values I want to pass to the View. I know how to create a ViewModel to pass everything to the webgrid but have no way of iterating through the lists.  I also know how to AutoMap an index to one list, see <a href=\"http://stackoverflow.com/questions/12034460/how-to-display-row-number-in-mvc-webgrid\">How to display row number in MVC WebGrid</a>. \nHow would you combine the two so that you could use the index to iterate through multiple lists?</p>\n\n<p><strong>Update #1  (more detail)</strong></p>\n\n<pre><code>public class Company {\n  public int Id { get; set; } \n  public string Name { get; set; }   }\n\npublic class Branch {\n  public int Id { get; set; } \n  public string Name { get; set; }   }\n\npublic class Person  {\n  public int Id { get; set; } \n  public string Name { get; set; }   }\n\npublic class MyViewModel  {\n  public int PageNumber { get; set; }\n  public int TotalRows { get; set; }\n  public int PageSize { get; set; }\n  public IEnumerable&lt;Inventory&gt; Inventories { get; set; }\n  public int Index { get; set; }\n  public IEnumerable&lt;string&gt; CmpNm { get; set; }\n  public IEnumerable&lt;string&gt; BrnNm { get; set; }\n  public IEnumerable&lt;string&gt; PrnNm { get; set; }        }\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>public class InventoryController : Controller\n{  // I have a paged gird who’s code is not relevant to this discussion but a pagenumber,\n   //  pagesize and totalrows will be generated\n   private ProjectContext _db = new ProjectContext();\n\n   public ActionResult Index()  {\n     IEnumerable&lt;Inventory&gt; inventories = _db.Inventories;\n     List&lt;string&gt; cmpNm = new List&lt;string&gt;; List&lt;string&gt; brnNm = new List&lt;string&gt;; List&lt;string&gt;     prnNm = new List&lt;string&gt;;\n     foreach (var item in inventories) { string x1 = \"\"; \n     Company cmps = _db. Company.SingleOrDefault(i =&gt; i.Id == item.CompanyId); if (cmps!= null)\n      { x1 = cmps.Name; } cmpNm.Add(x1); x1 = \"\";\n     Branch brns = _db. Branch.SingleOrDefault(i =&gt; i.Id == item. Branch Id); if (brns!= null) { x1 = brns.Name; } brnNm.Add(x1); x1 = \"\";\n     Person pers = _db.Persons.SingleOrDefault(i =&gt; i.Id == item. PersonId);\n      if (pers!= null) { x1 = pers.Name; } prnNm.Add(x1); \n\n     // the MyViewModel now needs to populated with all its properties and generate an index\n     // something along the line of \n     new MyViewModel { PageNumber= pagenumber, PageSize= pagesize,  TotalRows=Totalrows, Inventories = inventories;  CmpNm=cmpNm, BrnNm=brnNm, PrnNm=prnNm}\n</code></pre>\n\n<p>View  (How to create the Index is the problem)</p>\n\n<pre><code>@model.Project.ViewModels.MyViewModel\n@{ var grid = new WebGrid(Model.Inventories, Model.TotalRows, rowsPerPage: Model.PageSize); }\n@grid.GetHtml( columns: grid.Columns( \n    Grid.Column(“PrnNm”, header: \"Person\", format: @Model.PrnNm.ElementAt(Index))\n    Grid.Column(“BrnNm”, header: \"Branch\", format: @Model.BrnNm.ElementAt(Index))\n    Grid.Column(“CmpNm”, header: \"Company\", format: @Model.CmpNm.ElementAt(Index))\n    grid.Column(\"RtNum\", header: \"Route\"), \n    grid.Column(\"AcntNum\", header: \"Account\"), \n    grid.Column(\"CardNum\", header: \"Card\")\n    …      )    )\n</code></pre>\n\n<p>What the grid should look like is self-evident.</p>\n"},{"tags":["asp.net-mvc-3","razor","crystal-reports","viewer"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":743,"score":0,"question_id":9600691,"title":"Inserting a Crystal Reports 2011 viewer in a Razor page","body":"<p>I am developping a web application by using the ASP .NET MVC 3 framework.<br>\nI want to generate an HTML5 page via a Razor page with \".cshtml\" extension.<br>\nI want to insert a viewer in my HTML5 page to visualize a report made with Crystal Reports 2011.<br>\nI never did such an insertion so I am wondering what ways are available to achieve this.\nDoes a viewer implemented in JavaScript exist ?</p>\n\n<p>I read on the Internet that a Crystal Reports 2011 viewer can be inserted in a web form.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12909002,"title":"There is no ViewData item of type 'IEnumerable<SelectListItem>' that has the key \"student\". error","body":"<p>Iam using ASP.Net MVC3 Razor, </p>\n\n<p>I have a controller where i binded the data    </p>\n\n<pre><code>public Actionresult Index()\n    {\n        ViewBag.student= new SelectList(db.Collection, \"ID\", \"Name\"); \nViewBag.student1= new SelectList(db.Collection, \"ID\", \"Name\"); \nreturn view(); \n  }\n</code></pre>\n\n<p>This is my view</p>\n\n<pre><code>&lt;table&gt;\n&lt;tr&gt;\n    &lt;td&gt;\n    @Html.DropDownList(\"student\")\n\n    &lt;/td&gt;\n    &lt;td&gt;\n\n    @Html.DropDownList(\"student1\")\n    &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>What is the problem in my code, could any one help me ...\nThanx in advance..</p>\n"},{"tags":["jquery","asp.net","json","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":110,"score":0,"question_id":12888657,"title":"Post a JSON object (array) to MVC3 Controller","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4789481/post-an-array-of-objects-via-json-to-asp-net-mvc3\">Post an Array of Objects via JSON to ASP.Net MVC3</a>  </p>\n</blockquote>\n\n\n\n<p>I'm trying to post a JSON object to an MVC3 controller.  I seen solutions for this in stackoverflow, but most of the solutions are where the JSON object is then binded to a model.  How do I make so that the post JSON object (array) is convert to an array of generic c# Object types? Or something that allows me to loop through the json objects.  Please keep in mind the object is never the same.  I basically want to create one controller that will allow me to loop the json object and the get the data from there. Currently right now I get an array of objects in the MVC controller, but then I can't seem to see the data in them.  Any ideas?</p>\n\n<p>Don't know if I'm going down the right path.</p>\n\n<p>Thank you,\n-Tesh</p>\n\n<p>Javascript:</p>\n\n<pre><code> var parm = JSON.stringify({ session_id: sessionId, data: data, metaData: metaData })\n\n    var ret = \"\";\n    $.ajax({\n        type: 'post',\n        cache: false,\n        url: path + \"/Common/Export/Load\",\n        data: parm,\n        dataType: \"json\",\n        contentType: \"application/json; charset=utf-8\",\n        traditional: true,\n        async: false,\n        success: function (data) {\n            //ret = data.Table[0].Column1;\n        },\n        error: function (event, request, settings) {\n            //alert('save error: ' + JSON.stringify(request)) + ', ' + JSON.stringify(settings); \n        }\n    });\n</code></pre>\n\n<p>MVC Controller </p>\n\n<pre><code>[HttpPost]\n    public ActionResult Load(String session_id, List&lt;object&gt; data, Object metaData)\n    {\n\n\n\n\n        return View();\n    }\n</code></pre>\n\n<p>JSON Object Passed to Controller.  The object can at any time.</p>\n\n<pre><code>{\n</code></pre>\n\n<p>\"Table\": [\n    {\n      \"first_name\": John,\n      \"last_name\": Doe,\n      \"creation_date\": \"2012-10-04T15:50:37.55\",\n      \"created_by\": Mary Jane,\n      \"last_modified_date\": \"2012-10-04T15:50:37.55\",\n      \"last_modified_by\": Jon Mitchell</p>\n\n<pre><code>},\n{\n   \"first_name\": Bill,\n  \"last_name\": Doe,\n  \"creation_date\": \"2012-10-04T15:50:37.55\",\n  \"created_by\": Jane Wick,\n  \"last_modified_date\": \"2012-10-04T15:50:37.55\",\n  \"last_modified_by\": Jon Mitchell\n}\n</code></pre>\n\n<p>]\n}</p>\n"},{"tags":["javascript","asp.net-mvc","json","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1522,"score":4,"question_id":8591998,"title":"IE tries to download JSON in ASP. NET MVC 3","body":"<p>I was trying to return Json from my action and after that IE tried to download it and showed me save dialog.\nI tested it in Firefox, and there it works fine.</p>\n\n<pre><code>return Json(new { success = false, message = ex.Message }, \"application/json\");\n</code></pre>\n\n<p>What is the reason of that behavior and how can I solve that issue?</p>\n\n<p>After that in Javascript part I try this</p>\n\n<pre><code> if (responseJSON.success == false) {\n                        alert(responseJSON.message);\n                        cancel();\n                    }\n</code></pre>\n\n<p>But IE doesn't show alert anyway. It brings me save dialog.</p>\n\n<p>I tried to change <code>\"application/json\"</code> with <code>\"text/plain\"</code> and save dialog disappeared, but I am not able to see alert yet. What am I missing?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Here is my complect Javascript, I am using Valums qquploader(ex-Ajaxupload) for uploading images</p>\n\n<pre><code> var uploader = new qq.FileUploader({\n                element: document.getElementById(\"image-upload\"),\n                action: '/Home/ImageUpload',\n                allowedExtensions: ['jpg', 'png', 'gif'],\n                sizeLimlit: 2048,onComplete: function (id, fileName, responseJSON) {\n                    if (responseJSON.success == false) {\n                        alert(responseJSON.message);\n                        cancel();\n                    }\n                    else {\n                         alert(\"success\");\n                          //some code here\n                        }\n                     }\n                   });\n</code></pre>\n\n<p>I had tested with <code>alert(\"success\");</code> in my else part and forwarded json as <code>\"text/plain\"</code> and after that I saw the alert. But in that time <code>responseJSON.success != false</code> for me. Have you any suggestions about that?</p>\n"}]}
{"total":29155,"page":13,"pagesize":100,"questions":[{"tags":["asp.net-mvc-3","dotnetnuke","dotnetnuke-6"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12908160,"title":"DotNetNuke.SqlDataProvider method does not have an implementation","body":"<blockquote>\n  <p><strong>Method 'AddFile' in type 'DotNetNuke.Data.SqlDataProvider' from\n  assembly 'DotNetNuke.SqlDataProvider, Version=6.2.1.11,\n  Culture=neutral, PublicKeyToken=null' does not have an implementation.</strong></p>\n</blockquote>\n\n<p>A random error. My website has stopped working suddenly! Any idea on what might be going on?</p>\n"},{"tags":["asp.net-mvc-3","linq-to-entities","model-binding"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12893201,"title":"Need clarification for using linq in asp.net mvc apps","body":"<p>I have method to retrieve data from DAL as follows:</p>\n\n<pre><code>public List&lt;Comment&gt; GetAllComment(int _UserID)\n    {\n        using (var context = new TourBlogEntities1())\n        {\n            var AllComment = from s in context.Comments\n                             where s.UserID == _UserID\n                             select s;\n\n            return AllComment.ToList&lt;Comment&gt;();\n        }\n    }\n</code></pre>\n\n<p>Now I'm trying to call this method from my controller as follwos:</p>\n\n<pre><code>[HttpPost]\n    public ActionResult NewComment(PostComment model)\n    {\n        var business = new Business();\n\n        var entity = new Comment();\n        entity.Comments = model.Comments.Comments;\n        //entity.PostID = model.Posts.PostID; HOW TO PASS POSTID???\n        entity.UserID = business.GetUserID(User.Identity.Name);\n\n        business.PostComment(entity);\n\n        var CommentsListFromEntity = business.GetAllComment(business.GetUserID(User.Identity.Name));\n\n        var viewmodel = new PostComment();\n        viewmodel.CommentsListFromModel = CommentsListFromEntity.ToList&lt;CommentInfo&gt;(); // Error is showing here  \n\n        return View(\"ViewPost\", viewmodel);\n    }\n</code></pre>\n\n<p>I bind my view with the model, but could not use the list, Even if I try to pass the list itself to view, still I can't use that list in view!</p>\n\n<p>My model class is as follows:</p>\n\n<pre><code>public class PostComment\n{\n    public PostComment()\n    {\n        Posts = new NewPost();\n        Comments = new CommentInfo();\n        User = new UserInfoModel();\n    }\n\n    public NewPost Posts { get; set; }\n    public CommentInfo Comments { get; set; }\n    public UserInfoModel User { get; set; }\n    public List&lt;CommentInfo&gt; CommentsListFromModel { get; set; }\n\n}\n</code></pre>\n\n<p>So how to use the list in view? I need the help badly!</p>\n"},{"tags":["c#","jquery","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":82,"score":0,"question_id":12907768,"title":"Want to add labels and textboxes on clicking a Href link","body":"<p>I am using MVC my code is as below,</p>\n\n<pre><code>    &lt;div class=\"form-inline\"&gt;\n    &lt;label class=\"control-label\"&gt;&lt;b&gt;Length&lt;/b&gt;&lt;/label&gt;\n\n    &lt;input type=\"text\" name=\"Refinishing.Room.Length.Feet\" id=\"Refinishing_Room_Length_Feet\" style=\"width: 80px\" class=\"floor-text\" /&gt;Ft\n    &lt;input type=\"text\" name=\"Refinishing.Room.Length.Inch\" id=\"Refinishing_Room_Length_Inch\" class=\"floor-text\" /&gt;Inch\n\n    &lt;label&gt;&lt;b&gt;Width&lt;/b&gt;&lt;/label&gt;\n\n    &lt;input type=\"text\" name=\"Refinishing.Room.Width.Feet\" id=\"Refinishing_Room_Width_Feet\" class=\"floor-text\" /&gt;Ft\n    &lt;input type=\"text\" name=\"Refinishing.Room.Width.Inch\" id=\"Refinishing_Room_Width_Inch\" class=\"floor-text\" /&gt;Inch&lt;br /&gt;\n\n    &lt;a href=\"#\"&gt;Add Room&lt;/a&gt; / &lt;a href=\"#\"&gt;Remove Room&lt;/a&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>and I want to add the contents of \"&lt;div&gt;\" on clicking the link \"Add Room\".\nHow can it be done?</p>\n"},{"tags":["ajax","asp.net-mvc-3","razor","submit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12903208,"title":"MVC3: How to link view form HTML UI with different ID to one controller/Model","body":"<p>At first - sorry for my broken English. May be it is stupid question, but....\nSo, I have a model </p>\n\n<pre><code>public class AAAModel {\n  public int I1 {get; set}\n  public string S1 ...\n  public Guid G1 ...\n}\n</code></pre>\n\n<p>I have a controller</p>\n\n<pre><code>public ActionResult Create(AAAModel WhatToCreate){\n  ...\n}\n</code></pre>\n\n<p>And I have a proper view to enter the data... All was fine, but now I must reorganize view to create several form and give the user ability to dynamically create new objects (model) and send query to the server. The data, that I got from server cames as Ajax query and parsed to the table grid... User may view this data, correct it and may send it back.\nSo, I make several forms wich I duplicate from initial view and change the ID and Name of the controls\nOriginally it was like </p>\n\n<pre><code>@Html.TextBoxFor(model =&gt; model.I1)\n@Html.TextBoxFor(model =&gt; model.S1)\n@Html.TextBoxFor(model =&gt; model.G1)\n</code></pre>\n\n<p>And now it bacame like</p>\n\n<pre><code>&lt;input id=\"I1_1\" name=\"I1_1 ...&gt;\n&lt;input id=\"S1_1\" name=\"S1_1 ...&gt;\n&lt;input id=\"G1_1\" name=\"G1_1 ...&gt;\n</code></pre>\n\n<p>in form 1; </p>\n\n<pre><code>&lt;input id=\"I1_2\" name=\"I1_2 ...&gt;\n&lt;input id=\"S1_2\" name=\"S1_2 ...&gt;\n&lt;input id=\"G1_2\" name=\"G1_2 ...&gt;\n</code></pre>\n\n<p>in form 2, and so on...\nStupid question, but how can I modify the controller or what I have to do to got these values? </p>\n\n<p>P.S. These forms will send via ajax... and host-page will not reload.</p>\n"},{"tags":["c#","asp.net-mvc-3","asp.net-mvc-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12906668,"title":"Setting up a ASP.NET MVC3 web application using SQL and XML sources","body":"<p>I just started a tutorial for <code>MVC3 applicaton</code> on C# and I set up the project. The tutorial does not have any content on how I can add the two sources to my project:</p>\n\n<ol>\n<li><p><code>SQL</code>: the Orders and Customers tables from the classical <code>SQL Northwind</code> database, given as a standalone file, Northwnd.mdf,</p></li>\n<li><p><code>XML</code>: the <code>XOrders.xml</code> and <code>XCustomers.xml</code> files, which are XML mappings of the above Orders and Customers tables.</p></li>\n</ol>\n\n<p>Now my question is that how can I add these tables to my project (similar to mvc2)? If someone has a link for any tutorial or even know how to do it can you please share it.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","autofac","nopcommerce"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":245,"score":2,"question_id":10667075,"title":"Understanding how Nop Commerce settings are loaded from the database","body":"<p>I am working with <code>Nop Commerce</code> and wondering if someone can please help me with my confusion.</p>\n\n<p>I have debugged the code many times trying to find out how the settings are loaded on start up of the web application.  I just don't get it!</p>\n\n<p>All settings classes implement the <code>ISettings</code> interface.  Lets take customer settings for example..  I have found out that it is represented by the <code>CustomerSettings</code> class.  In the database there is a <code>Setting table</code>.  Data for customer settings looks somethng like this:</p>\n\n<pre><code>customersettings.usernamesenabled\ncustomersettings.checkusernameavailabilityenabled\ncustomersettings.allowuserstochangeusernames\n... and so on...\n</code></pre>\n\n<p>How and where are each of these settings mapped from <code>customersettings</code> to the <code>CustomerSettings</code> class and a property like <code>usernamesenabled</code> mapped to the <code>UsernamesEnabled</code> property in the CustomerSettings class?  And why was it implemented this way?</p>\n\n<p>I know it has something to do with the following code in the <code>DependencyRegistrar</code> class:</p>\n\n<pre><code>builder.RegisterGeneric(typeof(ConfigurationProvider&lt;&gt;)).As(typeof(IConfigurationProvider&lt;&gt;));\nbuilder.RegisterSource(new SettingsSource());\n</code></pre>\n\n<p>If someone can point me in the right direction then it would be appreciated.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","file-download"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12900289,"title":"FileContentResult writes to response body","body":"<p>Why does this write \"w,w,w\" to the response instead of opening a save file dialog?</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult Export(int id)\n    {            \n        var contentType = \"text/csv\";\n        var content = \"w,w,w\";\n        var bytes = Encoding.UTF8.GetBytes(content);\n        var result = new FileContentResult(bytes, contentType)\n                {\n                    FileDownloadName = \"www.csv\"\n                };\n        return result;\n    }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12899478,"title":"How to update part of a displayed view in MVC3","body":"<p>I have a view which calls a partial view using:</p>\n\n<pre><code>Html.RenderPartial\n</code></pre>\n\n<p>I'd like to call this in isolation using a controller method to stop the whole page having to be refreshed but controller methods returning void seem to destroy the existing view (I get a blank screen).</p>\n\n<p>I have the javascript code to update the HTML document section but I can't see how to retain the view/get a reference to it in the controller to call the javascript method.</p>\n\n<p>I should add that I'm fairly new to this MVC3 thing.</p>\n\n<p>N.B. to cut a long story short, using JQuery is not an option so we're limited to Javascript unfortunately.</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":102,"up_vote_count":168,"down_vote_count":0,"view_count":60381,"score":168,"question_id":5193842,"title":"File Upload ASP.NET MVC 3.0","body":"<p>I want to upload an Excel file in ASP.NET MVC 3.0. How can I upload the file using html input file control?</p>\n"},{"tags":[".net","asp.net-mvc-3","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12900829,"title":"Mapping built-in UserProfile to UserProfileId column in table","body":"<p>I have a table Tale with definition</p>\n\n<pre><code>public class Tale\n{\n    public int Id { get; set; }\n    public string Title { get; set; }\n    public string Text { get; set; }\n    public DateTime ReleaseDate { get; set; }\n\n    public int enum_TaleAuthorTypeId { get; set; }\n    public virtual enum_TaleAuthorType enum_TaleAuthorType { get; set; }\n\n    public int CommentableId { get; set; }\n    public virtual Commentable Commentable { get; set; }\n}\n</code></pre>\n\n<p>and when i type 'update-database' in console, i have nice relationships with one column for CommentableId and one for enum_TaleAuthorTypeId.</p>\n\n<p>Now, i'd like to add UserProfile and try to type something like:</p>\n\n<pre><code>public int UserProfileId { get; set; }\npublic virtual UserProfile UserProfile { get; set; }\n</code></pre>\n\n<p>but after add-migration, i have this:</p>\n\n<pre><code>AddColumn(\"dbo.Tales\", \"UserProfileId\", c =&gt; c.Int(nullable: false));\nAddColumn(\"dbo.Tales\", \"UserProfile_UserId\", c =&gt; c.Int());\n</code></pre>\n\n<p>How should i get just one column for value? Why it's create two columns?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":91,"score":3,"question_id":12902763,"title":"Using razor to set javascript variables inline, is it good practice/safe?","body":"<p>If I wanted to set some javascript variables from my model would that be a safe practice?  For example:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    var myVariable = '@Model.myVar';\n&lt;/script&gt;\n</code></pre>\n\n<p>Is this an ok practice?  I cant think of a better way to really do it, besides maybe doing hidden input, but that seems like too much work compared to this.  I just dont know if this is vulnerable or if there's something im overlooking by doing this.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12867954,"title":"Use model data on Url.Action attributes","body":"<p>I need to add an attribute to the form tag (Html.BeginForm) and the value of this attribute must be the parameter of the edit action (ID).</p>\n\n<p>How can I do this?</p>\n\n<p>Here is my action code:</p>\n\n<pre><code>    //\n    // GET: /Panel/Partners/Edit/5\n\n    public ActionResult Edit(int id)\n    {\n        var repository = new PartnersRepository();\n\n        var data = repository.Find(id);\n\n        return View(data);\n    }\n</code></pre>\n\n<p>And here is the code for the form tag:</p>\n\n<pre><code>    @using (Html.BeginForm(\"Edit\", \"Partners\", \n    FormMethod.Post, \n    new { \n        enctype = \"multipart/form-data\", \n        id = \"partnersForm\", \n        data_removelogo = @Url.Action(\"RemoveLogo\", \"Partners\", new { Area = \"Panel\", id = Model.ID }) }\n        ))\n</code></pre>\n\n<p>The Url.Action from the data_removelogo attribute doesn't work with the Model.ID property.</p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12897015,"title":"AJAX: Post the Form details without page refresh","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/298745/how-do-i-send-a-cross-domain-post-request-via-javascript\">How do I send a cross-domain POST request via JavaScript?</a>  </p>\n</blockquote>\n\n\n\n<p>Created a HTML Page with Form field, while hitting form , the form details Posted in    other domain Marketo site.</p>\n\n<pre><code>&lt;form  method=\"Post\"  action=\"http://app-o.marketo.com/index.php/leadCapture/save\"  name=\"mktForm_6\" id=\"mktForm_6\"&gt;\n\n&lt;label&gt;First Name:&lt;/label&gt;&lt;span class='mktInput'&gt;&lt;input  name=\"FirstName\" id=\"FirstName\" type='text' value=\"\"  maxlength='255' tabIndex='1' /&gt;\n\n&lt;label&gt;Email Address:&lt;/label&gt;&lt;input  name=\"Email\" id=\"Email\" type='text' value=\"\"  maxlength='255' tabIndex='2'`enter code here` /&gt;\n\n&lt;label&gt;Subscription&lt;/label&gt;&lt;input class='mktFormHidden' name=\"Subscription_Expiration__c\" id=\"Subscription_Expiration__c\" type='hidden' value=\"Newsletter Subscription\" /&gt;\n&lt;input id='mktFrmSubmit' type='submit' style=\"width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;\" value='Submit'  /&gt;\n\n   &lt;input type=\"hidden\" name=\"lpId\" value=\"1030\" /&gt;\n\n  &lt;input type=\"hidden\" name=\"subId\" value=\"123\" /&gt;\n\n   &lt;input type=\"hidden\" name=\"searchstr\" value=\"\" /&gt;\n\n   &lt;input type=\"hidden\" name=\"formid\" value=\"6\" /&gt;\n\n&lt;input type=\"hidden\" name=\"_mkt_disp\" value=\"return\" /&gt;\n\n      &lt;input type=\"hidden\" name=\"_mkt_trk\" value=\"id:668-TIV-019&amp;token:_mch-syncfusion.com-1350287989102-87089\" /&gt;\n\n  &lt;/form&gt;\n</code></pre>\n\n<p>But now I want to post the form details via Ajax: because normal form post refresh the page:</p>\n\n<p>Can anyone suggest how to post the details in Ajax.post method with clear details?</p>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-validation-plugin"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12904088,"title":"Display:none fields not being posted to controller","body":"<p>I have a lightbox that contains a bunch of input elements that I have set up using HTML helpers for a create action.  They are optional fields, but I do apply the digit rule to them in jquery validation.  </p>\n\n<p>The user can open up this lightbox, and fill out the fields if they would like to, but they are not required.  It is in the same form as the rest of the data, but to submit, they have to close this lightbox.  </p>\n\n<p>On submit, not of the values from the lightbox are posted to the controller.  If I remove the inputs from the lightbox, it works fine.  It must have something to do with it being hidden, but why would that happen?  Is it jquery?  I have 'voavi-ignore' as my ignore class, so it should still be validating these.  I'm a bit confused and burnt out on this one as I've been a it for a while.  Everything else on my page works fine, and I just added these new fields to the lightbox.  </p>\n\n<p>js:</p>\n\n<pre><code>$(document).ready(function () {\n    InitTab();\n    $(\"#caseProductions\").hide();\n    $(\".chzn-select\").chosen();\n    $(\".filetypes\").click(OnNewVOAVIClick);\n    $(\".countPerCase\").change(OnCaseProdChange);\n    $(\".caseCount\").change(OnCaseProdChange);\n    $(\".drinkWindow\").change(OnDrinkWindowChange);\n    $(\"#lnkCaseProduction\").click(OnCaseProdOpen);\n\n    VintageUpAlert();\n\n    $.validator.addMethod(\"decimalNumber\", function (value, element) {\n        return this.optional(element) || (!isNaN(value));\n    }, \"Must be a valid number\");\n\n    wineValidator = $(\"form\").validate({\n        errorPlacement: function (error, element) {\n            var x = element.parent();\n            error.appendTo(element.closest(\"td\"));\n        },\n        ignore: \".voavignore\",\n        rules: {\n            \"Wine.VarTypeID\": { min: 1 },\n            \"Wine.OriginID\": { min: 1 },\n            \"Wine.AppID\": { min: 1 },\n            \"Wine.VintageID\": { min: 1 },\n            \"VOAVIRequest.VarType\": { required: true },\n            \"VOAVIRequest.Origin\": { required: true },\n            \"VOAVIRequest.App\": { required: true },\n            \"VOAVIRequest.Vintage\": { required: true },\n            \"Wine.CaseProduction\": { digits: true },\n            \"Wine.AlcoholContent\": { number: true,\n                min: 0, max: 100\n            },\n            \"Wine.pH\": { number: true,\n                min: 0, max: 7\n            },\n            \"Wine.RS\": { decimalNumber: true,\n                min: 0, max: 1000\n            }\n        },\n        messages: {\n            \"Wine.VarTypeID\": { min: \"Varietal/Type Required\" },\n            \"Wine.OriginID\": { min: \"Origin Required\" },\n            \"Wine.AppID\": { min: \"Appellation Required\" },\n            \"Wine.VintageID\": { min: \"Vintage Required\" },\n            \"VOAVIRequest.VarType\": { required: \"Varietal/Type Required\" },\n            \"VOAVIRequest.Origin\": { required: \"Origin Required\" },\n            \"VOAVIRequest.App\": { required: \"Appellation Required\" },\n            \"VOAVIRequest.Vintage\": { required: \"Vintage Required\" },\n            \"Wine.CaseProduction\": { digits: \"Please enter whole numbers only\" }\n        }\n    });\n\n    CaseProdValidation();\n});\n\nfunction CaseProdValidation() {\n    $(\".caseCount\").rules(\"add\", { digits: true });\n}\n</code></pre>\n\n<p>html (This is just the lighbox as the rest quite a bit of markup):</p>\n\n<pre><code>&lt;div class=\"lightbox\" id=\"caseProductions\"&gt;\n    &lt;a href=\"#\" class=\"ui-icon ui-icon-circle-close closer\"&gt;&lt;/a&gt;\n    &lt;table&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;td&gt;\n                    &lt;h4&gt;\n                        Format&lt;/h4&gt;\n                &lt;/td&gt;\n                &lt;td&gt;\n                    &lt;h4&gt;\n                        Cases&lt;/h4&gt;\n                &lt;/td&gt;\n                &lt;td&gt;\n                    &lt;h4&gt;\n                        Bottles/Case&lt;/h4&gt;\n                &lt;/td&gt;\n                &lt;td&gt;\n                    &lt;h4&gt;\n                        Total Bottles&lt;/h4&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            &lt;tr&gt;\n                &lt;td&gt;@Html.LabelFor(m =&gt; m.Wine.cc187ml)\n                &lt;/td&gt;\n                &lt;td&gt;@Html.TextBoxFor(m =&gt; m.Wine.cc187ml, new { @class = \"caseCount\" })\n                &lt;/td&gt;\n                &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Wine.cpc187ml, new SelectList(Model.BottlesPerCase, \"Key\", \"Value\", 24), new { @class = \"countPerCase\" })\n                &lt;/td&gt;\n                &lt;td class=\"totalBottleCalc\"&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;@Html.LabelFor(m =&gt; m.Wine.cc375ml)\n                &lt;/td&gt;\n                &lt;td&gt;@Html.TextBoxFor(m =&gt; m.Wine.cc375ml, new { @class = \"caseCount\" })\n                &lt;/td&gt;\n                &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Wine.cpc375ml, new SelectList(Model.BottlesPerCase, \"Key\", \"Value\", 12), new { @class = \"countPerCase\" })\n                &lt;/td&gt;\n                &lt;td class=\"totalBottleCalc\"&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;@Html.LabelFor(m =&gt; m.Wine.cc500ml)\n                &lt;/td&gt;\n                &lt;td&gt;@Html.TextBoxFor(m =&gt; m.Wine.cc500ml, new { @class = \"caseCount\" })\n                &lt;/td&gt;\n                &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Wine.cpc500ml, new SelectList(Model.BottlesPerCase, \"Key\", \"Value\", 12), new { @class = \"countPerCase\" })\n                &lt;/td&gt;\n                &lt;td class=\"totalBottleCalc\"&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;@Html.LabelFor(m =&gt; m.Wine.cc750ml)\n                &lt;/td&gt;\n                &lt;td&gt;@Html.TextBoxFor(m =&gt; m.Wine.cc750ml, new { @class = \"caseCount\" })\n                &lt;/td&gt;\n                &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Wine.cpc750ml, new SelectList(Model.BottlesPerCase, \"Key\", \"Value\", 12), new { @class = \"countPerCase\" })\n                &lt;/td&gt;\n                &lt;td class=\"totalBottleCalc\"&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;@Html.LabelFor(m =&gt; m.Wine.cc1p5L)\n                &lt;/td&gt;\n                &lt;td&gt;@Html.TextBoxFor(m =&gt; m.Wine.cc1p5L, new { @class = \"caseCount\" })\n                &lt;/td&gt;\n                &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Wine.cpc1p5L, new SelectList(Model.BottlesPerCase, \"Key\", \"Value\", 1), new { @class = \"countPerCase\" })\n                &lt;/td&gt;\n                &lt;td class=\"totalBottleCalc\"&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;@Html.LabelFor(m =&gt; m.Wine.cc3L)\n                &lt;/td&gt;\n                &lt;td&gt;@Html.TextBoxFor(m =&gt; m.Wine.cc3L, new { @class = \"caseCount\" })\n                &lt;/td&gt;\n                &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Wine.cpc3L, new SelectList(Model.BottlesPerCase, \"Key\", \"Value\", 1), new { @class = \"countPerCase\" })\n                &lt;/td&gt;\n                &lt;td class=\"totalBottleCalc\"&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;@Html.LabelFor(m =&gt; m.Wine.cc5L)\n                &lt;/td&gt;\n                &lt;td&gt;@Html.TextBoxFor(m =&gt; m.Wine.cc5L, new { @class = \"caseCount\" })\n                &lt;/td&gt;\n                &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Wine.cpc5L, new SelectList(Model.BottlesPerCase, \"Key\", \"Value\", 1), new { @class = \"countPerCase\" })\n                &lt;/td&gt;\n                &lt;td class=\"totalBottleCalc\"&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;@Html.LabelFor(m =&gt; m.Wine.cc6L)\n                &lt;/td&gt;\n                &lt;td&gt;@Html.TextBoxFor(m =&gt; m.Wine.cc6L, new { @class = \"caseCount\" })\n                &lt;/td&gt;\n                &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Wine.cpc6L, new SelectList(Model.BottlesPerCase, \"Key\", \"Value\", 1), new { @class = \"countPerCase\" })\n                &lt;/td&gt;\n                &lt;td class=\"totalBottleCalc\"&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;@Html.LabelFor(m =&gt; m.Wine.cc9L)\n                &lt;/td&gt;\n                &lt;td&gt;@Html.TextBoxFor(m =&gt; m.Wine.cc9L, new { @class = \"caseCount\" })\n                &lt;/td&gt;\n                &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Wine.cpc9L, new SelectList(Model.BottlesPerCase, \"Key\", \"Value\", 1), new { @class = \"countPerCase\" })\n                &lt;/td&gt;\n                &lt;td class=\"totalBottleCalc\"&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;@Html.LabelFor(m =&gt; m.Wine.cc12L)\n                &lt;/td&gt;\n                &lt;td&gt;@Html.TextBoxFor(m =&gt; m.Wine.cc12L, new { @class = \"caseCount\" })\n                &lt;/td&gt;\n                &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Wine.cpc12L, new SelectList(Model.BottlesPerCase, \"Key\", \"Value\", 1), new { @class = \"countPerCase\" })\n                &lt;/td&gt;\n                &lt;td class=\"totalBottleCalc\"&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;@Html.LabelFor(m =&gt; m.Wine.cc15L)\n                &lt;/td&gt;\n                &lt;td&gt;@Html.TextBoxFor(m =&gt; m.Wine.cc15L, new { @class = \"caseCount\" })\n                &lt;/td&gt;\n                &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Wine.cpc15L, new SelectList(Model.BottlesPerCase, \"Key\", \"Value\", 1), new { @class = \"countPerCase\" })\n                &lt;/td&gt;\n                &lt;td class=\"totalBottleCalc\"&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;@Html.LabelFor(m =&gt; m.Wine.cc18L)\n                &lt;/td&gt;\n                &lt;td&gt;@Html.TextBoxFor(m =&gt; m.Wine.cc18L, new { @class = \"caseCount\" })\n                &lt;/td&gt;\n                &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Wine.cpc18L, new SelectList(Model.BottlesPerCase, \"Key\", \"Value\", 1), new { @class = \"countPerCase\" })\n                &lt;/td&gt;\n                &lt;td class=\"totalBottleCalc\"&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;@Html.LabelFor(m =&gt; m.Wine.cc27L)\n                &lt;/td&gt;\n                &lt;td&gt;@Html.TextBoxFor(m =&gt; m.Wine.cc27L, new { @class = \"caseCount\" })\n                &lt;/td&gt;\n                &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Wine.cpc27L, new SelectList(Model.BottlesPerCase, \"Key\", \"Value\", 1), new { @class = \"countPerCase\" })\n                &lt;/td&gt;\n                &lt;td class=\"totalBottleCalc\"&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;@Html.LabelFor(m =&gt; m.Wine.ccOther)\n                &lt;/td&gt;\n                &lt;td&gt;@Html.TextBoxFor(m =&gt; m.Wine.ccOther, new { @class = \"caseCount\" })\n                &lt;/td&gt;\n                &lt;td&gt;@Html.TextBoxFor(m =&gt; m.Wine.cpcOther, new { @class = \"countPerCase\" })\n                &lt;/td&gt;\n                &lt;td class=\"totalBottleCalc\"&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n    &lt;div style=\"display: inline-block\"&gt;\n    &lt;input type=\"button\" value=\"Save\" /&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","ninject"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":89,"score":1,"question_id":12903785,"title":"Passing parameters to the Controller Constructor using Ninject","body":"<p>This is an MVC application where the controllers need a <code>DataContextCreator</code> and a <code>CustomerID</code> in the constructor. My <code>ControllerFactory</code> looks like: </p>\n\n<pre><code>public class NinjectControllerFactory : DefaultControllerFactory\n    {\n        private IKernel ninjectKernel;\n\n        public NinjectControllerFactory()\n        {\n            ninjectKernel = new StandardKernel();\n            AddBindings();\n        }\n\n\n        protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)\n        {\n            if (controllerType == null)\n            {\n                return null;\n            }\n            else\n            {\n                string customerID =  requestContext.HttpContext.Session[\"CustomerID\"].ToString();\n                return (IController)ninjectKernel.Get(controllerType, new IParameter[]{new Parameter(\"CustomerID\", customerID, true)});\n            }\n        }\n\n        private void AddBindings()\n        {\n            ninjectKernel.Bind&lt;IDataContextCreator&gt;().To&lt;DefaultDataContextCreator&gt;();\n        }\n    }\n</code></pre>\n\n<p>I get the following error when navigating to the Page i.e. triggering the creation of the Controller:</p>\n\n<pre><code> Ninject.ActivationException: Error activating int\nNo matching bindings are available, and the type is not self-bindable.\nActivation path:\n 2) Injection of dependency int into parameter CustomerID of constructor of type MyController\n 1) Request for MyController\n</code></pre>\n\n<p>All of the above is using MVC3 .Net 4 on Win 7. Thanks for your help.</p>\n"},{"tags":["jquery","asp.net-mvc-3","html.dropdownlistfor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12894280,"title":"How to write @Html.DropDownListFor (and so) inside jQuiery $('#id').http('')?","body":"<p>I need to inject some UI element inside table getting by AJAX, I has an ID of element and I can write the value like this</p>\n\n<pre><code>$('#s-@ViewData.Model.SomeID').html('&lt;input type=\"submit\" id=\"submitInternalData\" value=\"\" class=\"icon-ok\"/&gt;');\n</code></pre>\n\n<p>Thats works fine\nNow I need to write some dropdown element. </p>\n\n<pre><code>$('#v-@ViewData.Model.SomeID').html('&lt;b&gt;some text:&lt;/b&gt; @Html.DropDownListFor(model =&gt; model.VMtoAdd, (IEnumerable&lt;SelectListItem&gt;)ViewBag.VMServers, \"your server\");');\n</code></pre>\n\n<p>And got an error becase Html.DropDownListFor insert a new line\nHow can I fix it?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12902674,"title":"Equivalent for validateRequest in mvc3","body":"<p>I am reading here: <a href=\"http://msdn.microsoft.com/en-us/library/ff649310.aspx#paght000004_step1\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/ff649310.aspx#paght000004_step1</a> on the very first step in your machine.config  to set:</p>\n\n<pre><code>&lt;system.web&gt;\n  &lt;pages buffer=\"true\" validateRequest=\"true\" /&gt;\n&lt;/system.web&gt;\n</code></pre>\n\n<p>Is this already handled in mvc3 with the [Authorize] filter? or should i still put this in my web.config</p>\n"},{"tags":["javascript","asp.net-mvc-3","viewbag"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":8963,"score":5,"question_id":6192950,"title":"Store a value in ViewBag from javascript","body":"<p>How can I store a value in the ViewBag accessing it from javascript?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","entity-framework","entity-framework-4.1"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":572,"score":1,"question_id":8004479,"title":"Entity Framework TryUpdateModel Child Objects?","body":"<p>I know most of you will suggest that I should use ViewModels specific to the form I am using, but I am curious as to why my child object is not binding on TryUpdateModel.</p>\n\n<pre><code>@using (Html.BeginForm()) {\n    @Html.ValidationSummary(true)\n    &lt;fieldset&gt;\n        &lt;legend&gt;User&lt;/legend&gt;\n\n        @Html.HiddenFor(model =&gt; model.UserId)\n    @Html.HiddenFor(model =&gt; model.PrimaryAddress.AddressId)\n    &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.PrimaryAddress.FirstName)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.PrimaryAddress.FirstName)\n            @Html.ValidationMessageFor(model =&gt; model.PrimaryAddress.FirstName)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.PrimaryAddress.LastName)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.PrimaryAddress.LastName)\n            @Html.ValidationMessageFor(model =&gt; model.PrimaryAddress.LastName)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.UserName)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.UserName)\n            @Html.ValidationMessageFor(model =&gt; model.UserName)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.Email)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.Email)\n            @Html.ValidationMessageFor(model =&gt; model.Email)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.IsApproved)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.IsApproved)\n            @Html.ValidationMessageFor(model =&gt; model.IsApproved)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.IsEmployee)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.IsEmployee)\n            @Html.ValidationMessageFor(model =&gt; model.IsEmployee)\n        &lt;/div&gt;\n\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Save\" /&gt;\n        &lt;/p&gt;\n    &lt;/fieldset&gt;\n}\n</code></pre>\n\n<p>And the controller code:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Edit(int id, FormCollection form)\n{\n    var user = Token.DB.Users.Include(\"PrimaryAddress\").Single(x =&gt; x.UserId == id);\n    if (TryUpdateModel(user, new string[] { \"UserName\", \"Email\", \"IsApproved\", \"IsEmployee\", \"PrimaryAddress.FirstName\", \"PrimaryAddress.LastName\" }))\n    {\n        try\n        {\n            Token.DB.SaveChanges();\n            return RedirectToAction(\"index\");\n        }\n        catch (Exception ex)\n        {\n            while (ex.InnerException != null)\n                ex = ex.InnerException;\n            if (ex.Message.ToLowerInvariant().Contains(\"unique\"))\n                ModelState.AddModelError(\"UserName\", \"UserName already exists\");\n        }\n    }\n    return View(User);\n}\n</code></pre>\n\n<p>The code doesn't throw any exceptions, it just doesn't populate the user.PrimaryAddress.FirstName or user.PrimaryAddress.LastName from the form. I'd like to know why?</p>\n\n<p>I already know I can fix the issue with a specific ViewModel and mapping the info in the background. I can also do something like this:</p>\n\n<pre><code>&lt;!-- Edit.cshtml --&gt;\n&lt;div class=\"editor-field\"&gt;\n    @Html.EditorFor(model =&gt; model.PrimaryAddress.FirstName, null, \"FirstName\")\n    @Html.ValidationMessageFor(model =&gt; model.PrimaryAddress.FirstName)\n&lt;/div&gt;\n\n&lt;div class=\"editor-label\"&gt;\n    @Html.LabelFor(model =&gt; model.PrimaryAddress.LastName)\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n    @Html.EditorFor(model =&gt; model.PrimaryAddress.LastName, null, \"LastName\")\n    @Html.ValidationMessageFor(model =&gt; model.PrimaryAddress.LastName)\n&lt;/div&gt;\n\n// UsersController.cs\nif (TryUpdateModel(user, new string[] { \"UserName\", \"Email\", \"IsApproved\", \"IsEmployee\"})\n&amp;&amp; TryUpdateModel(user.PrimaryAddress, new string[] {\"FirstName\", \"LastName\" }))\n</code></pre>\n\n<p>So the real question is why isn't it binding in the first example?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":737,"score":3,"question_id":12410673,"title":"Using the same DbCompiledModel to create contexts against different types of database servers is not supported","body":"<p>I am learning ASP.NET MVC from tutorials of Microsoft : </p>\n\n<p><a href=\"http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/accessing-your-model\" rel=\"nofollow\">http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/accessing-your-model</a>'s-http://stackoverflow.com/editing-helpdata-from-a-controller</p>\n\n<p>At the link above mentioned, while adding a controller named \"MoviesController\" , i am getting this error</p>\n\n<p>\"Unable to retreive metadata for 'MvcMovie.Models.Movie'. Using the same DbCompiledModel to create contexts against different types of database servers is not supported. Instead, create a separate DbCompiledModel for each type of server being used\"</p>\n\n<p>How can i fix that?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12900741,"title":"Using ASP.NET MVC3 AntiForgery token from CCW","body":"<p>I have some legacy application that are currently posting basic information to a MVC3 form. I would like to seperate that out to a GET and pass the values in the querystring. Easy enough. However, I would like to add an anti-forgery token to the request. First of all, does this seem like a good option? Second, are there any examples of implementing such functionality from a non-MVC3 module to an MVC3 form?</p>\n\n<p>My other alternative would be to encrypt the querystring.</p>\n"},{"tags":["c#","asp.net-mvc-3","wcf","rest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12900874,"title":"WCF RESTful or Web API to use here as the latest and correct implementation?","body":"<p>I have a project to write a middleware with predominantly two features.</p>\n\n<ol>\n<li>Client (typically browser) asks for list of parts for a given product. Typical question and answer type.</li>\n<li>Wants to upload the data file as attachment when all the details are collected in the step 1.</li>\n</ol>\n\n<p>I can use the latest .Net Framework and technologies.</p>\n\n<p>The above feature are used by browser based applications. Some third party companies are building their web applications based on my API.</p>\n\n<p>I can think of WCF Rest service as one solution. But getting lost when I see the Web API technology.</p>\n\n<p>Please enlighten me on to decide which makes more sense here?</p>\n"},{"tags":[".net","asp.net-mvc-3","webgrid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12900138,"title":"Add custom attributes to table rendered by WebGrid","body":"<p>I am using an MVC3 WebGrid, and want to add custom attributes of the form \"data-xxx\" to the <code>&lt;table&gt;</code> element rendered by <code>WebGrid.GetHtml()</code>.</p>\n\n<p>I tried to do this as follows:</p>\n\n<pre><code>grid.GetHtml(...\n    htmlAttributes: new { data_xxx = \"value\" }\n);\n</code></pre>\n\n<p>However this renders as:</p>\n\n<pre><code>&lt;table ... data_xxx=\"value\"&gt;\n</code></pre>\n\n<p>instead of the expected:</p>\n\n<pre><code>&lt;table ... data-xxx=\"value\"&gt;\n</code></pre>\n\n<p>I.e. unlike other MVC helpers, it doesn't replace the underscore in the property name with a hyphen.</p>\n\n<p>After a bit of spelunking with Reflector it seems that:</p>\n\n<ol>\n<li><p><code>WebGrid.GetHtml()</code> calls <code>System.Web.WebPages.Html.ObjectToDictionary</code> to convert the anonymous attributes object to a dictionary.  Unlike the method <code>System.Web.Mvc.HtmlHelper.AnonymousObjectToHtmlAttributes</code> used by other helpers, this doesn't replace \"_\" by \"-\".</p></li>\n<li><p>Unlike most other MVC helpers, <code>WebGrid.GetHtml()</code> does not have an overload that takes an <code>IDictionary&lt;string, object&gt;</code>, so I can't work around the bug by specifying the attributes in this way.</p></li>\n</ol>\n\n<p>This looks like a bug to me, and I've submitted it to Connect:</p>\n\n<p><a href=\"http://connect.microsoft.com/VisualStudio/feedback/details/767456/webgrid-gethtml-helper-does-not-allow-data-attributes-to-be-set\" rel=\"nofollow\">http://connect.microsoft.com/VisualStudio/feedback/details/767456/webgrid-gethtml-helper-does-not-allow-data-attributes-to-be-set</a></p>\n\n<p>Any suggestions for a workaround?  Or is it fixed in MVC4?</p>\n"},{"tags":["asp.net-mvc","mvc","jquery-ui","asp.net-mvc-2","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":255,"score":1,"question_id":6678122,"title":"How to get the event of the partialview button in a jQuery modal dialog","body":"<p>I have a partial view named xyz and I have a lot of buttons on it which implements different functionality.</p>\n\n<pre><code> $('#dialog').dialog({\n        autoOpen: false,\n        width: 700,\n        resizable: false,\n        modal: true,\n        open: function (event, ui) { $(this).load('&lt;%=Url.Action(\"PushButton\",\"Body\",new {Parm=\"text\",Parm1=\"Value\"}) %&gt;'); },\n        position: 'top' \n    });\n</code></pre>\n\n<p>I'm opening this partial view XYZ in a jQuery modal dialog box. I have some buttons in the partialview XYZ. I'm not getting how to fire the event explicitly. Like if I want to close the dialog box by click of the button created in Partialview.</p>\n"},{"tags":["asp.net-mvc-3","authentication","authorization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12898381,"title":"How do I point my login page to the database instead of the web.config credentials?","body":"<p>I have a log in page created and I have used the ASP.NET configuration tool to create two users with passwords. </p>\n\n<p>When I try and log in with the created users I get invalid username/password error that I setup. The problem is I know I am typing the exactly the way that I set them up. I can however; go to the </p>\n\n<pre><code> &lt;credentials&gt;\n        &lt;User&gt;\n &lt;/credentials&gt;\n\n &lt;roleManager enabled=\"true\" defaultProvider=\"SqlRoleProvider\"&gt;\n  &lt;providers&gt;\n    &lt;clear/&gt;\n    &lt;add name=\"SqlRoleProvider\" applicationName=\"UCX\" connectionStringName=\"UCXDBConnectionString\"\n         type=\"System.Web.Security.SqlRoleProvider\" /&gt;\n  &lt;/providers&gt;\n&lt;/roleManager&gt;\n\n  &lt;authentication mode=\"Forms\"&gt;\n  &lt;forms loginUrl=\"~/Account/LogOn\" timeout=\"3\"&gt;\n    &lt;credentials passwordFormat=\"Clear\"&gt;\n      &lt;!--&lt;user name=\"admin\" password=\"password\"/&gt; If I uncomment this I can access site. --&gt;\n    &lt;/credentials&gt;\n  &lt;/forms&gt;\n&lt;/authentication&gt; \n\n    &lt;authorization&gt;\n  &lt;allow roles=\"Admin\" /&gt;\n&lt;/authorization&gt;\n&lt;membership\n           defaultProvider=\"SqlProvider\" userIsOnlineTimeWindow=\"20\"&gt;\n  &lt;providers&gt;\n    &lt;clear/&gt;\n    &lt;add name=\"SqlProvider\" type=\"System.Web.Security.SqlMembershipProvider\" connectionStringName=\"UCXDBConnectionString\" enablePasswordRetrieval=\"false\" /&gt;\n\n  &lt;/providers&gt;\n&lt;/membership&gt;\n</code></pre>\n\n<p>In my web config and if I log in with that user I am able to access the site. This however is very bad for what we want. I have checked the database and the users are there. I just cannot access them.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":[".net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12898509,"title":"How to include images and css files from server","body":"<p>I have my css files on a server and I want to include them.  When I had my css files local, I was using </p>\n\n<pre><code>@Assets.CSS(\"base/images.css\")\n</code></pre>\n\n<p>How do I reference the css files on the server?</p>\n"},{"tags":["asp.net-mvc-3","mvvm","viewmodel","partial-views"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":188,"score":0,"question_id":11216674,"title":"MVC3 / Partial Views / Multiple Paginated Lists","body":"<p><strong>How to I render out two paginated lists on my Home Page?</strong></p>\n\n<p>I am willing to do what it takes - If it means tailoring my code to fit a solution or tailoring an existing solution to fit my code.</p>\n\n<p>I have successfully rendered one paginated list to the home page using a partial view. </p>\n\n<p>Take a look at my code:\nViews\n..Home > Index.cshtml</p>\n\n<pre><code>@foreach (var m in Model.First)\n{\n    Html.RenderPartial(\"FirstSummary\", m);\n}\n&lt;div class=\"pager\"&gt;\n    @Html.PageLinks(Model.PagingInfo, x =&gt; Url.Action(\"Index\", new { page = x }))\n&lt;/div&gt;\n</code></pre>\n\n<p>Views\n..Shared > FirstSummary.cshtml</p>\n\n<pre><code>@model MovinMyStuff.Domain.Entities.First\n@{\n    if (@Model.IsActive)\n    {\n    &lt;div class=\"first-list-item\"&gt;\n        &lt;ul&gt;\n            &lt;li&gt;\n                &lt;span class=\"first-name\"&gt;\n                    @Model.Property.ToString() \n                    @Model.Property.ToString()\n                    @Model.Property.ToString() -\n                    @Model.Property.ToString() \n                    @Model.Property.ToString()\n                    @Model.Property.ToString()\n                &lt;/span&gt;\n            &lt;/li&gt;\n            &lt;li&gt;\n                @Html.ActionLink(\"Details\", \"Details\", \"First\", new { area = \"\", id = @Model.FirstId }, new { @class = \"button\" })\n        &lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/div&gt;\n}   \n</code></pre>\n\n<p>}</p>\n\n<p>Controllers > HomeController.cs</p>\n\n<pre><code>        public ViewResult Index(int page = 1)\n    {\n        FirstListViewModel viewModel = new FirstListViewModel\n        {\n            First = repository.First\n            .OrderByDescending(m =&gt; m.FirstId)\n            .Skip((page - 1) * PageSize)\n            .Take(PageSize),\n            PagingInfo = new PagingInfo\n            {\n                CurrentPage = page,\n                ItemsPerPage = PageSize,\n                TotalItems = repository.First.Count()\n            }\n        };\n\n        return View(viewModel);\n    }\n</code></pre>\n\n<p>Models > FirstListViewModel.cs</p>\n\n<pre><code>using System.Collections.Generic;\nusing MovinMyStuff.Domain.Entities;\n\nnamespace MovinMyStuff.WebUI.Models\n{\n    public class FirstListViewModel\n    {\n        public IEnumerable&lt;First&gt; Firsts { get; set; }\n        public PagingInfo PagingInfo { get; set; }\n    }\n}\n</code></pre>\n\n<p>ViewModels > FirstAndSecond.cs</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing MovinMyStuff.WebUI.Models;\nnamespace MovinMyStuff.WebUI.ViewModels\n\nnamespace MovinMyStuff.WebUI.ViewModels\n{\n    public class MovesAndMovers\n    {\n        public MovesListViewModel movesList { get; set; }\n        public MoversListViewModel moversList { get; set; }\n        public MovesAndMovers()\n        {\n            movesList = new MovesListViewModel();\n            moversList = new MoversListViewModel();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","stream","ram"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":95,"score":1,"question_id":12433132,"title":"How to properly stream big data from MVC3 without using too much RAM?","body":"<p>I'd like to use <code>HttpResponse.OutputStream</code> together with <code>ContentResult</code> so that I can <code>Flush</code> from time to time to avoid using too much RAM by .Net.</p>\n\n<p>But all examples with MVC <code>FileStreamResult, EmptyResult, FileResult, ActionResult, ContentResult</code> show code that gets all the data into memory and passes to one of those. Also one post suggest that returning <code>EmptyResult</code> together with using <code>HttpResponse.OutputStream</code> is bad idea. How else can I do that in MVC ?</p>\n\n<p>What is the right way to organize flushable output of big data (html or binary) from MVC server ? </p>\n\n<p>Why is returning <code>EmptyResult</code> or <code>ContentResult</code> or <code>FileStreamResult</code> a bad idea ?</p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12898377,"title":"search or filter using jquery templates and MVC and .aspx [not .cshtml]","body":"<p>I would like to have a generic advanced search filter similar to the one mentioned in jQueryinAction,SecondEdition book in chapter 4.I'am using Jquery Templates with .aspx page as View in MVC3.</p>\n\n<p>The parent dropdown will contain a list of values on selection of which the child dropdown [which is a template] will be populated.This child dropdown has values like contain,equal,greater than,lesser than etc.On change of this value the thrid control either a dropdown or a textbox will be added.On click of Add button one more such row will be added again.On click of remove button the corresponding row will be removed.The control's value change till the Final Search button click should be tracked.The value can be change inbetween and the row which is edited should be updated with correct values.Please help!</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":4845,"score":5,"question_id":4692977,"title":"ASP.NET MVC 3 _Layout.cshtml Controller","body":"<p>Can anyone help me with the subject? I'm using Razor view engine and I need to pass some data to _Layout. How can I do it?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12846850,"title":"Accessing a partial view from a different control from within an area","body":"<p>Within an MVC view I'd like to access a partial view from a different controller. Before I explain my issue at hand you should know where everything is in my solution:</p>\n\n<pre><code>Areas      \n   MyArea    \n        Views\n         Cont1\n           PartialPages\n           ViewImIn\n         Cont2\n            PartialPages\n               ViewICall\n</code></pre>\n\n<p>Now, in ViewImIn.cshtml I call ViewIcall.cshtml like this: </p>\n\n<pre><code>@Html.Partial(\"~/Views/Cont2/PartialPages/ViewICall.cshtml\", Model)\n</code></pre>\n\n<p>But I keep getting the error stating that the \"partial view was not found or view engine does not support searched locatio...\"</p>\n\n<p>Please help.. I've also tried \"../Cont2/PartialPages/ViewICall\" and variations of it</p>\n"},{"tags":["asp.net-mvc-3","performance","debugging","profiling"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":12897336,"title":"ASP.NET MVC lost in finding botleneck","body":"<p>I have <code>ASP.NET MVC</code> app which accept file uploads and has result pooling using SignalR. The app hosted on Prod server with IIS7, 4 Gb Ram and two cores CPU. </p>\n\n<p>The app on Dev server works perfectly but when I host it on Prod server with about <code>50 000 users per day</code> the app become unrresponsible after five minutes of running. The web page request time increase dramatically and it takes about 30 seconds to load one page. I have tried to record all <code>MvcApplication.Application_BeginRequest</code> event call and got <code>9000</code> hits in <code>5 minutes</code>. Not sure is this acceptable number of hits or not for app like this.</p>\n\n<p>I have used ANTS Performance Profiler(not useful in Prod app profiling, slow and eats all memory) to profile code but profiler do not show any time delay issues in my code/MSSQL queries. </p>\n\n<p>Also I have tried to monitored CPU and RAM spike problems but I didn't find any. CPU percentage sometimes goes to 15% but never up and memory usage is normal.</p>\n\n<p>I suspect that there is something wrong with request or threads limits in ASP.NET/IIS7 but don't know how to profile it.  </p>\n\n<p>Could someone suggest any profiling solutions which could help in this situation? Tried to hunt the problem for two week already without any result :(</p>\n"},{"tags":["asp.net-mvc-3","dropdownlistfor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12896244,"title":"How do I add more than one Dropdownlist in an ActionResult in MVC3","body":"<p>I want to add another dropdownlist. The below code works for one dropdown, but how would I add one for Categories?</p>\n\n<pre><code>public  ActionResult Create()\n        {\n            var ddl = new Users();\n            ddl.DropDowns = userRepository.Getddl(\"Departments\").Select(c =&gt; new SelectListItem\n                                                                    {\n                                                                        Value = c.DropdownID.ToString(),\n                                                                        Text = c.DropdownText\n                                                                    });\n\n\n            ViewData[\"ListofProfiles\"] = new SelectList(ListofProfiles, \"Value\", \"Text\");\n\n            return View(ddl);\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","iis7"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12893191,"title":"ASP.NET & MVC3 & IIS7 HTTP Error 500.19","body":"<p>I'm trying to deployed my ASP.NET MVC3 Application but when I run it with IIS 7 (passing by Browse *:80(http)), i get this error message :\n<a href=\"http://hpics.li/4dc7c93\" rel=\"nofollow\">http://hpics.li/4dc7c93</a></p>\n\n<p>After that, I tried to give to my Web.config and to the folder of my project all the permissions for the user \"IIS_IUSRS\" and for my other users but I get a blank page with no errors messages or anything else.</p>\n\n<p>In my Server Manager, I've checked if \"HTTP Errors\" and \"HTTP Redirection\" were installed and it's the case.</p>\n\n<p>More, I've checked my Event Viewer and I've seen this error : <a href=\"http://hpics.li/1ee5563\" rel=\"nofollow\">http://hpics.li/1ee5563</a>. I don't know if this have a link with my problem.</p>\n\n<p>For information, my Application Pool is DefaultAppPool using .NET Framework 4 and I'm working with Windows Server 2008 R2 Standard, IIS7 and .NET Framework 4.</p>\n\n<p>Do you have any suggestion to resolve this problem ? I'm totally stuck  :/</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","build"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":113,"score":2,"question_id":12889456,"title":"MVC 3 Stops working after MVC4 Installation","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/9471263/mvc-4-beta-side-by-side-installation-error\">MVC 4 Beta side by side installation error</a>  </p>\n</blockquote>\n\n\n\n<p>I have an MVC3 application in progress. I want to start another application in MVC4. But MVC 3 application stopped working after MVC 4 installation(not beta). getting some dll conflicting errors. One of the error is like this.</p>\n\n<pre><code>The type 'System.Web.Helpers.Json' exists in both 'c:\\Windows\\Microsoft.NET\\assembly\\GAC_MSIL    \\System.Web.Helpers\\v4.0_2.0.0.0__31bf3856ad364e35\\System.Web.Helpers.dll' and 'c:\\Windows    \\Microsoft.NET\\assembly\\GAC_MSIL\\System.Web.Helpers    \\v4.0_1.0.0.0__31bf3856ad364e35\\System.Web.Helpers.dll' `at      System.Web.Compilation.AssemblyBuilder.Compile()\n   at System.Web.Compilation.BuildProvidersCompiler.PerformBuild()\n   at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)\n   at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean    noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean    ensureIsUpToDate)\n   at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context,    VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile,    Boolean throwIfNotFound, Boolean ensureIsUpToDate)\n   at System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath,    HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)\n   at System.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound)\n   at System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)\n   at System.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext controllerContext, String   virtualPath)\n   at System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]&amp; searchedLocations)\n   at System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]&amp; searchedLocations)\n   at System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache)\n   at System.Web.Mvc.ViewEngineCollection.&lt;&gt;c__DisplayClassc.&lt;FindView&gt;b__b(IViewEngine e)\n   at System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)\n   at System.Web.Mvc.ViewEngineCollection.Find(Func`2 cacheLocator, Func`2 locator)\n   at System.Web.Mvc.ViewEngineCollection.FindView(ControllerContext controllerContext, String viewName, String masterName)\n   at System.Web.Mvc.ViewResult.FindView(ControllerContext context)\n   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)\n   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)\n   at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass1c.&lt;InvokeActionResultWithFilters&gt;b__19()\n   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)\n   at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass1c.&lt;&gt;c__DisplayClass1e.&lt;InvokeActionResultWithFilters&gt;b__1b()\n   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)\n   at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass1c.&lt;&gt;c__DisplayClass1e.&lt;InvokeActionResultWithFilters&gt;b__1b()\n   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)\n   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)`\n</code></pre>\n\n<p>what would be a fix for this?</p>\n"},{"tags":["asp.net-mvc-3","paypal"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12895354,"title":"Paypal MVC3 integration","body":"<p>this is my first post on stackoverflow so bare with me :-)</p>\n\n<p><strong>Scenario</strong>\nMVC application with custom shopping cart. Shopping cart integrates with a PayPal, passing sale data like client information, product items and prices (for each item and total price) but not credit card or paypal information. This would be set on paypal.</p>\n\n<p><strong>Problem</strong>\nPaypal describes how to use the cart upload to integrate with custom shopping carts here:\n<a href=\"https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&amp;content_ID=developer/e_howto_html_cart_upload#id09BLDK0007Q\" rel=\"nofollow\">https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&amp;content_ID=developer/e_howto_html_cart_upload#id09BLDK0007Q</a>\nBut there is very little detail on how to do it.</p>\n\n<p>After a while i found an example of how to do the MVC-Paypal interaction (even though is not cart upload but it is a mater of configuration) here:\n<a href=\"http://www.arunrana.net/2012/01/paypal-integration-in-mvc3-and-razor.html\" rel=\"nofollow\">http://www.arunrana.net/2012/01/paypal-integration-in-mvc3-and-razor.html</a></p>\n\n<p>The problem in this solution is that it appears to have some security problems. Sensitive data is set to a view and sent to the client in hidden fields and post is set by javascript, making this unacceptable right? Or am i seeing this wrong?</p>\n\n<p><strong>Intended Solution</strong></p>\n\n<ol>\n<li>User sees shopping car and clicks checkout button, causing a post to <em>myserver.com/Controller/Action</em> passing client data like name, address, etc.</li>\n<li>The controller action <em>myserver.com/Controller/Action</em> builds a post server side, adding the client post data information more sensitive information like prices and paypal merchant specific information and posts request to paypal OR invoques paypal webservice.</li>\n<li>Paypal returns a token, or some other information and <em>myserver.com/Controller/Action</em> redirects client to Paypal to make the payment.</li>\n</ol>\n\n<p><strong>Question</strong>\nIs my intended solution possible? How can i, in response of a post from the client, make some processing in the controller, post/invoke Paypal with the result of that processing and ultimately pass paypals response to the client for him to interact directly with Paypal?\nOtherwise i can't see how it could be \"secure\".</p>\n\n<p>If not, surely someone have done something similar and can point me into the right direction :-)</p>\n"},{"tags":["asp.net-mvc-3","razor","jqgrid","scrollbar"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":219,"score":0,"question_id":12804719,"title":"jqGrid Horizontal Scrollbar / gridwidth using mvc3 razor","body":"<p>Aplologies if this has been posted before somewhere, I cannot see a problem which describes this issue....</p>\n\n<p>I'm using mvc3/razor with jqGrid, and it seems it is not calculating the width properly - It is cutting off the Last column. </p>\n\n<p>Could anyone tell me why?</p>\n\n<p>I am using an unchanged ui.jqgrid.css and and jQueryUI themeroller theme, if that makes a difference!</p>\n\n<p>My Index.cshtml :</p>\n\n<pre><code>@{\n    ViewBag.Title = \"Index\";\n}\n\n&lt;h2&gt;@ViewBag.Message&lt;/h2&gt;\n&lt;div id=\"content\"&gt;\n    &lt;div id=\"content-left\"&gt;\n        @Html.Partial(\"SearchPanel\")\n    &lt;/div&gt;\n    &lt;div id=\"content-main\"&gt;\n        &lt;table id=\"jpgCustomers\" cellpadding=\"0\" cellspacing=\"0\"&gt;&lt;/table&gt;\n        &lt;div id=\"jpgpCustomers\" style=\"text-align:center;\"&gt;&lt;/div&gt;\n        &lt;div id=\"dlgCustomer\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;div id=\"CustomerEdit\"&gt;&lt;/div&gt;\n@section JavaScript \n{\n&lt;script type=\"text/javascript\"&gt;\n\n    $(document).ready(function () \n    {\n        $('#jpgCustomers').jqGrid({\n            //url from wich data should be requested\n            url: '@Url.Action(\"Customers\")',\n            //type of data\n            datatype: 'json',\n            //url access method type\n            mtype: 'POST',\n            //columns model\n            //columns names\n            colNames: ['No Of Banks','Name', 'FullName', 'Description', 'Enabled', 'Tranbase', 'Group ID', 'Email Address', 'Phone', 'Pager', 'Fax', 'Comments', ' '],\n            colModel: [\n                        //displayed Columns\n                        { name: 'BankLinks', index: 'BankLinks', align: 'center', width:40, editable:false },\n                        { name: 'LogonName', index: 'LogonName', align: 'left', width:80, editable:true },\n                        { name: 'FullName', index: 'FullName', align: 'left', editable:true, width: 200 },\n                        { name: 'Description', index: 'Description', align: 'left', width: 200, editable:true, edittype:'textarea'},\n                        { name: 'Enabled', index: 'Enabled', align: 'center', width: 60, editable:true},\n                        { name: 'IsTranbase', index: 'IsTranbase', align: 'center', width: 60, editable:true, formatter: YesNoFormatter, unformat:YesNoUnformatter, edittype:'checkbox', editoptions:{value:'1:0'}},\n\n                        //Hidden Columns\n                        { width: 60,name: 'GroupID', index: 'GroupID', hidden: true, editable:true, editrules:{required:false, edithidden:true} },\n                        { width: 60,name: 'Email', index: 'Email', hidden: true, editable:true, editrules:{required:false, edithidden:true}, editype:'email' },\n                        { width: 60,name: 'Phone', index: 'Phone', hidden: true, editable:true, editrules:{required:false, edithidden:true, number: true, minValue: 0 }, editype:'text'},\n                        { width: 60,name: 'Pager', index: 'Pager', hidden: true, editable:true, editrules:{required:false, edithidden:true, number: true, minValue: 0 }, editype:'text'},\n                        { width: 60,name: 'Fax', index: 'Fax', hidden: true, editable:true, editrules:{required:false, edithidden:true, number: true, minValue: 0 }, editype:'text'},\n                        { width: 60,name: 'Comments', index: 'Comments', align: 'left', hidden: true, editable:true, edittype:'textarea'},\n\n                        //Action column\n                        { name: 'myac', width:80, fixed:true, sortable:false, resize:false, editable:false, formatter:'actions', formatoptions: { \n                                                                                                                    keys:true, \n                                                                                                                    delOptions: { url : encodeURI('@Url.Action(\"Delete\")') } \n                                                                                                                 }\n                        }\n                      ],\n            //pager for grid\n            pager: $('#jpgpCustomers'),\n            //number of rows per page\n            rowNum: 10,\n            //initial sorting column\n            sortname: 'FullName',\n            //initial sorting direction\n            sortorder: 'asc',\n            //we want to display total records count\n            viewrecords: true,\n            //grid height\n            height: '100%',\n            editurl: encodeURI('@Url.Action(\"Edit\")'),\n            //subgrid\n            subGrid: true,\n            //subrid model\n            subGridRowExpanded: function(subgrid_id, row_id) {\n                var subgrid_table_id, pager_id;\n                subgrid_table_id = subgrid_id+\"_t\";\n                pager_id = \"p_\"+subgrid_table_id;\n                $(\"#\"+subgrid_id).html(\"&lt;table id='\"+subgrid_table_id+\"' class='scroll'&gt;&lt;/table&gt;&lt;div id='\"+pager_id+\"' class='scroll'&gt;&lt;/div&gt;\");\n                $(\"#\"+subgrid_table_id).jqGrid({\n                    url: encodeURI('@Url.Action(\"BankLinks\")' + '?id=' + row_id),\n                    datatype: 'json',\n                    mtype: 'POST',\n                    colNames: ['Bank', 'Folder', 'Enabled'],\n                    colModel: \n                    [\n                        {name:\"Bank\",index:\"Bank\",width:20,key:true},\n                        {name:\"Folder\",index:\"Folder\",width:20},\n                        {name:\"Enabled\",index:\"Enabled\",width:10,align:\"left\"}\n                    ],\n                    rowNum:20,\n                    pager: pager_id,\n                    sortname: 'Bank',\n                    sortorder: \"asc\",\n                    viewrecords: true,\n                    height: '100%'\n                });\n                $(\"#\"+subgrid_table_id).jqGrid('navGrid',\"#\"+pager_id,{edit:false,add:false,del:false})\n            },\n        });\n        $(\"#jpgCustomers\").jqGrid('navGrid', '#jpgpCustomers', \n                    { add: true, del: true, edit: true, search: false},\n                    { width: 'auto', url: '@Url.Action(\"Edit\")'},\n                    { width: 'auto', url: '@Url.Action(\"Edit\")' },\n                    { width: 'auto', url: '@Url.Action(\"Delete\")' });\n\n    });\n\n    function YesNoFormatter(cellvalue, options, rowObject) {\n        var cellValueInt = parseInt(cellvalue);\n        if (cellValueInt == 1)\n            return \"&lt;img src='@Url.Content(\"~/Content/images/tick.gif\")' title='\"+ cellvalue + \"' /&gt;\";\n        else \n            return \"&lt;img src='@Url.Content(\"~/Content/images/cross.gif\")' title='\"+ cellvalue + \"' /&gt;\";\n    };\n\n    function YesNoUnformatter (cellvalue, options, cell) {\n        return $('img', cell).attr('title');\n    };\n\n    &lt;/script&gt;\n}\n</code></pre>\n\n<p>my controller actions:</p>\n\n<pre><code>    [AcceptVerbs(HttpVerbs.Post)]\n    public ActionResult Customers(JqGridRequest request)\n    {\n        ISession session = NHibernateHelper.GetCurrentSession();\n        try\n        {\n            IEnumerable&lt;Customer&gt; customers = session.QueryOver&lt;Customer&gt;().List().Skip&lt;Customer&gt;(0).Take&lt;Customer&gt;(request.RecordsCount);\n\n            int totalRecords = customers.Count();\n\n            //Prepare JqGridData instance\n            JqGridResponse response = new JqGridResponse()\n            {\n                //Total pages count\n                TotalPagesCount = (int)Math.Ceiling((float)totalRecords / (float)request.RecordsCount),\n                //Page number\n                PageIndex = request.PageIndex,\n                //Total records count\n                TotalRecordsCount = totalRecords\n            };\n            //Table with rows data\n            foreach (Customer customer in customers)\n            {\n                response.Records.Add(new JqGridRecord(Convert.ToString(customer.Id), new List&lt;object&gt;()\n            {\n                customer.Banks.Count(),\n                customer.LogonName,\n                customer.FullName,\n                customer.Description,\n                customer.Enabled,\n                customer.IsTB,\n                customer.GroupID,\n                customer.Email,\n                customer.Phone,\n                customer.Pager,\n                customer.Fax,\n                customer.Comments\n            }));\n            }\n\n            //Return data as json\n            return new JqGridJsonResult() { Data = response };\n\n        }\n        catch (Exception ex)\n        {\n            return HttpNotFound();\n        }\n\n    }\n\n    [AcceptVerbs(HttpVerbs.Post)]\n    public ActionResult BankLinks(int Id, JqGridRequest request)\n    {\n        ISession session = NHibernateHelper.GetCurrentSession();\n\n        Customer customer = session.Get&lt;Customer&gt;(Id);\n\n        int totalRecords = customer.Banks.Count();\n\n        //Prepare JqGridData instance\n        JqGridResponse response = new JqGridResponse()\n        {\n            //Total pages count\n            TotalPagesCount = (int)Math.Ceiling((float)totalRecords / (float)request.RecordsCount),\n            //Page number\n            PageIndex = request.PageIndex,\n            //Total records count\n            TotalRecordsCount = totalRecords\n        };\n\n        foreach (Bank bank in customer.Banks.ToList&lt;Bank&gt;())\n        {\n            //IEnumerable&lt;CustomerBank&gt; bankLink = session.CreateQuery(\"from CustomerBank where Bank_ID = :bankId\").SetParameter(\"bankId\", bank.Id).List&lt;CustomerBank&gt;();\n            CustomerBank bankLink = session.QueryOver&lt;CustomerBank&gt;().Where(x =&gt; x.BankId == bank.Id).Where(y =&gt; y.CustomerId == customer.Id).List&lt;CustomerBank&gt;().FirstOrDefault();\n            //IEnumerable&lt;CustomerBank&gt; bankLink2 = session.QueryOver&lt;CustomerBank&gt;().List&lt;CustomerBank&gt;();\n\n            response.Records.Add(new JqGridRecord(null, new List&lt;object&gt;()\n            {\n                bank.BankCode,\n                bank.Folder,\n                bankLink.Enabled \n            }));\n        }\n\n        return new JqGridJsonResult() { Data = response };\n    }\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc-3","asp.net-mvc-3-areas"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12893755,"title":"Common controller, multiple areas - need routing?","body":"<p>I have a controller defined in a library. I'd like this controller to be accessible via any of my 3 areas. At the moment, the controller (let's say \"contact\") is not being found when accessed via for example the \"admin\" area (i.e. url of /admin/contact). It does however work when accessed via \"/contact\".</p>\n\n<p>Is there any route configuration required to Areas in order to allow the access of a common controller though these areas?</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","asp.net-mvc-3","html-helper"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":108,"score":1,"question_id":11633953,"title":"HTML Helper for page link creation - trying to understand","body":"<p>Below is the complete source for my HTML helper file (PageHelper.cs) and it works perfectly.  I am learning ASP.NET MVC 3 and using the 'Pro ASP.NET MVC 3 Framework' book by aPress.  I love the flow of the book and am learning a lot, however every now and then it provides working code without a real explanation as to why it works and this is one of these examples.  I've spent a considerable amount of time with Google and Stack on this one. To get to the point now...</p>\n\n<p>I am hoping someone can explain the flow of what is happening within the 'public static MvcHtmlString PageLinks'.  I'm trying to learn this and not simply follow along in the book (NOTE:  The excessive comments in the code are my own - meant to reinforce learning).  </p>\n\n<p>My take on it is <b>MvcHtmlString</b> is used to tell the browser not to reencode the HTML again because the resulting HTML already is.  <b>this</b> is used to capture the page the user is currently on.  <b>html</b> is the instantiation of the <b>HtmlHelper</b> class? (although <b>html</b> is never mentioned again - why is that?).  <b>pagingInfo</b> is the instantiation of my <b>PagingInfo</b> class that holds properties used in the HTML creation that gets returned.  Here is the part I can't wrap my head around at all....the <b>Func</b> part.  The book explains that the <b>Func</b> parameters provide the ability to pass in a delegate that will be used to generate the links to view other pages - not sure what this means and why the function route is needed at all.</p>\n\n<p>The rest of the code I can follow along.  Sorry for the long winded post, but I'm seeking clarity.  If any of my code comments or explanations are incorrect, please correct me.  Thanks in advance!</p>\n\n<pre><code>using System;\nusing System.Text;\nusing System.Web.Mvc;\nusing SportsStore.WebUI.Models;\n\n//You use HTML helpers in a view to render HTML content. An HTML helper, in most \n//cases, is just a method that returns a string.  You can build an entire ASP.NET\n//MVC application without using a single HTML helper. However, HTML helpers make \n//your life as a developer easier. By taking advantage of helpers, you can build\n//your views with far less work.  Write once, reuse often.  \n\n//We use 'MvcHtmlString' so that the result doesn't get re-encoded in the view. \n//It is part of the MVC framework and when you create your own HTML helper\n//methods like this one, always use it.\n\nnamespace SportsStore.WebUI.HtmlHelpers\n{\n    //This is public so it can be accessed in other areas, however the 'static'\n    //means it can't be instantiated.\n    public static class PagingHelpers\n    {\n        //This is an HTML Helper method that we call 'PageLinks', which generates\n        //HTML for a set of page links using the info provided in a PagingInfo\n        //object.  Remember that extension methods are only available for use\n        //when the namespace that contains it is in scope.  In a code file, this\n        //is done with a 'using' statement, but for a Razor view, we must add a \n        //configuration entry to the View-specific Web.config file OR add a\n        //'@using' statement to the view itself.  For this project we chose to \n        //use the Web.config file to keep the View less cluttered.\n\n        public static MvcHtmlString PageLinks(this HtmlHelper html,\n                                              PagingInfo pagingInfo,\n                                              Func&lt;int, string&gt; pageUrl)\n        {\n            StringBuilder result = new StringBuilder();\n            for (int i = 1; i &lt;= pagingInfo.TotalPages; i++)\n            {\n                TagBuilder tag = new TagBuilder(\"a\"); //Construct an &lt;a&gt; tag\n                tag.MergeAttribute(\"href\", pageUrl(i));\n                tag.InnerHtml = i.ToString();\n                if (i == pagingInfo.CurrentPage)\n                    tag.AddCssClass(\"selected\");\n                result.Append(tag.ToString());\n            }**\n\n            return MvcHtmlString.Create(result.ToString());\n        }\n    }\n}\n</code></pre>\n"},{"tags":["sql","asp.net-mvc-3","iis7","model"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3876,"score":1,"question_id":5680003,"title":"Sorry, an error occurred while processing your request. in MVC3 Model Entities","body":"<p>I am new in MVC, made an app that works on my local machine (Windows 7 with SQLExpress) but when I deploy live on Windows 2008 R2, SQL 2008 R2 and IIS7, I get this error: \"Sorry, an error occurred while processing your request\"</p>\n\n<p>Below are snippets of the code in question:</p>\n\n<p>WEB.CONFIG connectionStrings</p>\n\n<pre><code>add name=\"RentalEntities\" connectionString=\"Data Source=[ServerName];Initial Catalog=[DatabaseName];Integrated Security=True\" providerName=\"System.Data.SqlClient\" \n</code></pre>\n\n<p>HOMECONTROLLER</p>\n\n<pre><code>namespace Rental.Controllers\n\n{\n\n   RentalEntities rentalDB = new RentalEntities();\n\n   ...\n\n   public ActionResult Index()\n\n{    \n\n      var listings = from l in rentalDB.Listings\n                     select l;\n      return View(listings.ToList());    \n   }\n</code></pre>\n\n<p>HOME/INDEX.CSHTML</p>\n\n<pre><code>@model List&lt;Rental.Models.Listing&gt;\n\n@foreach (var listing in Model)\n\n{\n\n    @listing.ListingName &lt;br /&gt; \n\n}\n</code></pre>\n\n<p>The error occurred on this line \"@foreach (var listing in Model)\", something to do with being null - note that NONE of the fields in the database are null. Any help will be appreciated.</p>\n\n<p>Below is the full error message: [ where line 13 is:   <code>foreach (var listing in Model)</code></p>\n\n<p><strong>Sorry, an error occurred while processing your request.</strong> </p>\n\n<p>System.NullReferenceException: Object reference not set to an instance of an object. at ASP._Page_Views_Home_Index_cshtml.Execute() in c:\\inetpub\\wwwroot\\projects\\Rentals\\Views\\Home\\Index.cshtml:line 13 at System.Web.WebPages.WebPageBase.ExecutePageHierarchy() at System.Web.Mvc.WebViewPage.ExecutePageHierarchy() at System.Web.WebPages.StartPage.ExecutePageHierarchy() at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) at System.Web.Mvc.ControllerActionInvoker.&lt;>c_<em>DisplayClass1c.b</em>_19() at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func<code>1 continuation) at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList</code>1 filters, ActionResult actionResult) at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)</p>\n"},{"tags":["asp.net-mvc-3","google","search","asp.net-mvc-4","engine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":90,"score":-1,"question_id":12892670,"title":"how to build search engine like google using asp.net MVC 3 or Asp.net MVC 4?","body":"<p>i need to build the small search engine like google using asp.net MVC 3 or asp.net mvc4. i need some good book and tutorial about \"How to build search engine.\". if anybody has any idea or resource , please share with us.</p>\n\n<p>thanks</p>\n"},{"tags":["json","asp.net-mvc-3","exception-handling"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12705345,"title":"MVC3 return JSON on error instead of HTML","body":"<p>I tried doing it with a global attribute</p>\n\n<p><strong>edit:</strong> Updated with final solution</p>\n\n<pre><code>public class HandleAndLogErrorAttribute : HandleErrorAttribute\n{\n    private static readonly ILog log = Log&lt;HandleAndLogErrorAttribute&gt;.Create();\n\n    public override void OnException(ExceptionContext filterContext)\n    {\n        if (!filterContext.ExceptionHandled)\n        {\n            log.Error(\"Unhandled exception\", filterContext.Exception);\n            if (filterContext.HttpContext.Request.IsAjaxRequest())\n            {\n                filterContext.Result = new { Message = filterContext.Exception.Message, StackTrace = filterContext.Exception.StackTrace }.AsJson();\n                filterContext.ExceptionHandled = true;\n                filterContext.HttpContext.Response.Clear();\n                filterContext.HttpContext.Response.StatusCode = 500;\n                filterContext.HttpContext.Response.TrySkipIisCustomErrors = true;      \n            }\n            else\n                base.OnException(filterContext);\n        }\n    }\n}\n</code></pre>\n\n<p>The problem is that MVC will ignore the Result and render the error page, if I set <code>filterContext.ExceptionHandled = true;</code> it will not ignore the Result but it will return code 200 instead of 500 so my generic error handler on the client wont detect the error. I cant return 200 because then my success methods for the calls will fire with unexpected behavior.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["c#","asp.net-mvc-3","razor","google-maps-api-2"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":12847095,"title":"Error in binding to .ADO Model using Google Maps API","body":"<p><strong>Why I get this error?</strong></p>\n\n<blockquote>\n  <p>Compiler Error Message: CS1061: 'System.Collections.Generic.IEnumerable' does not contain a definition for 'lat' and no extension method 'lat' accepting a first argument of type 'System.Collections.Generic.IEnumerable' could be found (are you missing a using directive or an assembly reference?)</p>\n</blockquote>\n\n<p><b>.Ado Model <br></b>\nint, lat, lng, contents</p>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing MapApp.Models;\n\nnamespace MapApp.Controllers\n{\n    [HandleError]\n    public class HomeController : Controller\n    {\n        mapEntities _db = new mapEntities();\n\n        public ActionResult Index()\n        {\n            return View(_db.river);\n        }\n\n        public ActionResult About()\n        {\n            return View();\n        }\n    }\n}\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>@model IEnumerable&lt;MapApp.Models.river&gt;\n@{\n    ViewBag.Title = \"Index\";\n    Layout = \"~/Views/Shared/_Layout.cshtml\";\n}\n&lt;h2&gt; Index&lt;/h2&gt;\n&lt;script type=\"text/javascript\"&gt;\n@foreach (var item in Model)\n{\n    &lt;text&gt;\n      var markerlatLng = new google.maps.LatLng(@(Model.lat), @(Model.lng));\n      var contents = '@(Model.contents)';\n\n      var infowindow = new google.maps.InfoWindow({\n          content: contents\n      });\n\n      var marker = new google.maps.Marker({\n          position: markerlatLng,\n          title: contents,\n          map: map,\n          draggable: false\n      });\n\n      google.maps.event.addListener(marker, 'click', function () {\n          infowindow.open(map, marker);\n      });\n\n   &lt;/text&gt;\n}\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","httprequest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12892112,"title":"Determine if request is PartialView or AJAX request in ASP.NET MVC 3","body":"<p>I have to give access rigths to the users of a website.\nI am doing the filtering here:</p>\n\n<pre><code>protected override void OnActionExecuting(ActionExecutingContext filterContext)\n{\n}\n</code></pre>\n\n<p>The problem is that I cannot distinguish full View request such as 'Index' from PartialViewRequests or AJAX calls requests.</p>\n\n<p>Therefore the page <code>'Index'</code> has access but the <code>'PartialViewGridViewForIndex'</code> does not have access.</p>\n\n<p>The property <code>ControllerContext.IsChildAction</code> does not help either.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12889291,"title":"Dropdownlist in MVC using entity framework","body":"<p>I am using entity framework in mvc3. I have a table in which two entries are coming from an another table in the shape of drop down list. Like emp_no and emp_name.\nNow i want that when i select Emp_no from the first drop down list,the corresponding emp_name \nwill be selected automatically.</p>\n\n<p>Is this possible ?\nThanks in advance.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12891564,"title":"How can i restric listbox to single select in asp.net MVC3,razor","body":"<p>Iam using ASP.Net MVC3 Razor, I have two listboxes in .cshtml, let's say lbox1 and lbox2. I have binded data in the controller and sent to listboxes using viewbag. Both the listboxes have same data in it like A,B,C,D.But we can select more than one items from the listbox.. Now i want lbox1 selectionmode as single.\nHow can i restric it to single select ??? </p>\n\n<p>I have a controller where i binded the data</p>\n\n<pre><code>public Actionresult Index()\n{\n    ViewBag.lbox1= new SelectList(db.boxes, \"ID\", \"Name\");\n}\n</code></pre>\n\n<p>This is my view</p>\n\n<pre><code>&lt;table&gt;\n&lt;tr&gt;\n    &lt;td&gt;\n    @Html.ListBox(\"lbox1\")\n\n    &lt;/td&gt;\n    &lt;td&gt;\n\n    @Html.ListBox(\"lbox2\")\n    &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>could any one help me</p>\n"},{"tags":["jquery","asp.net-mvc-3","ckeditor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":136,"score":0,"question_id":12330387,"title":"CKEditor onSubmit doesn't work after text is entered in the control","body":"<p>So I have installed ckeditor on my project. The control loads fine and you are able to view it. The error occurs when you type something in the textarea. The 'Next' button doesn't work. If there is no text in the textarea the 'Next' button works just fine. When there is text and you press the 'Next' button, I am also noticing these errors in the browser.</p>\n\n<p>EDIT: Please note that the View here is a <strong>Partial View</strong>.</p>\n\n<p><img src=\"http://i.stack.imgur.com/xWQ2B.png\" alt=\"Error in Browser\"></p>\n\n<p>I am using <strong>ckeditor 3.6.4</strong>. I installed it using <strong>Nuget</strong>. I have the proper files that came with it.</p>\n\n<p>In my _Shared/Layout Files I include the following:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"@Url.Content(\"~/Scripts/ckeditor/ckeditor.js\")\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"@Url.Content(\"~/Scripts/ckeditor/adapters/jquery.js\")\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>In my View  I have the following:</p>\n\n<pre><code>@using (Ajax.BeginForm(\"SomeAction\", \"SomeController\", new { id = Model.Id}, new AjaxOptions { HttpMethod = \"Post\", UpdateTargetId = \"dynamicData\", InsertionMode = InsertionMode.Replace }))\n        {\n            &lt;div class=\"grid_6\"&gt;\n                @Html.TextAreaFor(x =&gt; x.SomeText, new { @class = \"someTextArea\" })\n            &lt;/div&gt;\n\n            &lt;div class=\"grid_6 alpha omega\"&gt;\n                &lt;input type=\"submit\" value=\"Next\" class=\"grid_6 alpha omega button drop_4 gravity_5\" /&gt;\n            &lt;/div&gt;\n        }\n</code></pre>\n\n<p>and in my javascript I have the following:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        ReBindCKEditor();\n    });\n\n    function BindCKEditor() {\n        var elem = $('#SomeText');\n        elem.ckeditor(function () { }, { toolbar: [\n        ['Source'],\n        ['Preview'],\n        ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Scayt'],\n        ['Undo', 'Redo', '-', 'Find', 'Replace', '-', 'SelectAll', 'RemoveFormat'],\n        ['Image', 'Table', 'HorizontalRule'],\n        ['Styles', 'Format'],\n        ['Bold', 'Italic', 'Strike'],\n        ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', 'Blockquote'],\n        ['Link', 'Unlink', 'Anchor']\n        ]\n        });\n    }\n\n    function ReBindCKEditor() {\n        delete CKEDITOR.instances['SomeText'];\n        BindCKEditor();\n    }\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","encoding","razor","controller","authentication"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2238,"score":1,"question_id":6963782,"title":"Error: The view 'xx' or its master was not found or no view engine supports the searched locations... on logon?","body":"<p>In view logon, log on with.</p>\n\n<p><strong>User</strong>: admin\n<strong>Password</strong>: xxx</p>\n\n<p>I can log in normally.</p>\n\n<p>When you try to:</p>\n\n<p><strong>User</strong>: tavaresdemelo.adv.br\n<strong>Password</strong>: xx</p>\n\n<p>The error is displayed:</p>\n\n<blockquote>\n  <p>The view 'tavaresdemelo.adv.br' or ITS master was not found or the\n  view engine supports the searched locations. The Following Were\n  searched locations: ~ / Views / account / tavaresdemelo.adv.br.aspx ~\n  / Views / account / tavaresdemelo.adv.br.ascx ~ / Views / Shared /\n  tavaresdemelo.adv.br.aspx ~ / Views / Shared /\n  tavaresdemelo.adv.br.ascx ~ / Views / account /\n  tavaresdemelo.adv.br.cshtml ~ / Views / account /\n  tavaresdemelo.adv.br.vbhtml ~ / Views / Shared /\n  tavaresdemelo.adv.br.cshtml ~ / Views / Shared /\n  tavaresdemelo.adv.br.vbhtml</p>\n</blockquote>\n\n<p><strong>Account Controller</strong></p>\n\n<pre><code>public ActionResult LogOn()\n{\n    return View();\n}\n\n[HttpPost]\npublic ActionResult LogOn(string userName, string password, string returnUrl)\n{\n    if (ModelState.IsValid)\n    {\n        if (Membership.ValidateUser(userName, password))\n        {\n            FormsAuthentication.SetAuthCookie(userName, false);\n            if (Url.IsLocalUrl(returnUrl) &amp;&amp; returnUrl.Length &gt; 1 &amp;&amp; returnUrl.StartsWith(\"/\")\n                &amp;&amp; !returnUrl.StartsWith(\"//\") &amp;&amp; !returnUrl.StartsWith(\"/\\\\\"))\n                return Redirect(returnUrl);\n            return RedirectToAction(\"Index\", \"Home\");\n        }\n        ModelState.AddModelError(\"\", \"Usuário ou senha estão inválidos\");\n    }\n\n    // If we got this far, something failed, redisplay form\n    return View(userName);\n}\n\npublic ActionResult LogOff()\n{\n    FormsAuthentication.SignOut();\n    return RedirectToAction(\"Index\", \"Home\");\n}\n</code></pre>\n\n<p><strong>View Logon</strong></p>\n\n<pre><code>@model string\n@{\n    ViewBag.Title = \"Login\";\n}\n\n&lt;div id=\"login\"&gt;\n    &lt;h2&gt;@ViewBag.Title&lt;/h2&gt;\n    @Html.ValidationSummary(true, \"Erro ao tentar efetuar o login.\")\n    @using (Html.BeginForm())\n    {\n        &lt;fieldset class=\"login\"&gt;\n            &lt;legend&gt;Entre com seu usuário e senha&lt;/legend&gt;\n            &lt;div class=\"inline\"&gt;\n                @Html.Label(\"userName\", \"Usuário: \")\n                @Html.TextBox(\"userName\", Html.Encode(Model))\n                @Html.ValidationMessage(\"userName\")\n            &lt;/div&gt;\n\n            &lt;div class=\"inline\"&gt;\n                @Html.Label(\"password\", \"Senha: \")\n                @Html.Password(\"password\")\n                @Html.ValidationMessage(\"password\")\n            &lt;/div&gt;\n\n            &lt;div class=\"form-buttons\"&gt;\n                &lt;input type=\"submit\" class=\"button\" value=\"Login\" title=\"Login\" /&gt;\n            &lt;/div&gt;\n        &lt;/fieldset&gt;\n    }\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","entity-framework-4.1","ef-database-first"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12891355,"title":"How can I develop a quick search in multiple relational table in asp.net mvc3 with entity framework data first approch","body":"<p>I have going to develop a search query in asp.net mvc3. And I’m using Entity Framework data first approach. The Scenario little bit complex. I have a table named <strong>Group</strong>. A Group can contain multiple <strong>Sub-Groups</strong> and every Sub Group has different <strong>Item</strong>. And Item can be registered in different <strong>Content</strong>. Say the contents are –</p>\n\n<p><strong>Articles</strong>, <strong>Books</strong>, <strong>Magazine</strong>, <strong>Comics</strong>, <strong>Movies</strong>, <strong>Software</strong> etc. and they are separate entity in Database. One item may be registered in Article, Books and Comics but not in Movies. Other item can be registered in Comics and Software only. </p>\n\n<p>Now I have to develop a relational database with these information and make a Quick Search, like user first will select the Group, then Sub-Group and then Item, and then Contents. </p>\n\n<p>How can I achieve these? </p>\n"},{"tags":["sql-server","asp.net-mvc-3","stored-procedures"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":100,"score":-1,"question_id":12891036,"title":"How to call stored procedure in MVC controller ?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4259989/asp-net-mvc-best-way-to-call-stored-procedure\">ASP.NET MVC: Best Way To Call Stored Procedure</a>  </p>\n</blockquote>\n\n\n\n<p>I am developing MCV3 application.</p>\n\n<p>I  want to call store procedure in one of the controller of the applicaiton. </p>\n\n<p>I have already saved store procedure in DB which I am using for applicaiton.</p>\n\n<p>The Query is </p>\n\n<pre><code>Create Procedure ConvertLeadToCustomer1\n@CompanyID int\nas\nbegin \nupdate Companies set __Disc__ = 'Customer' where CompanyID = @CompanyID\nend\n</code></pre>\n\n<p>Now, I wan to call this procesure into controller...</p>\n\n<pre><code>namespace CRMWeb.Controllers\n{ \n    public class LeadController : Controller\n    {\n        private CRMWebContainer db = new CRMWebContainer();\n\n        //\n        // GET: /Lead/\n\n        public ViewResult Index()\n        {\n            //return View(db.Companies.ToList());\n            return View(db.Companies.OfType&lt;Lead&gt;().ToList());\n\n        }\n\n           public ActionResult Convert(int id)\n        {\n\n            // I want to write code here to call stored procedure...\n\n\n        }\n    }\n}\n</code></pre>\n\n<p>How to call it ? </p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","active-directory"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12890138,"title":"How to use PrincipalContext with MVC Web Application","body":"<p>I have a website in MVC .Net 3.5, I need to use the code below in a Controller. \nSo I'm referencing the name space</p>\n\n<p><code>System.DirectoryServices.AccountManagement</code></p>\n\n<p>And I receive an error:</p>\n\n<pre><code>Error   1   The type or namespace name 'DirectoryServices' does not exist in the namespace 'System' (are you missing an assembly reference?)\n</code></pre>\n\n<p>Which assembly Am I missing and how to add it in the project?</p>\n\n<pre><code>        // set up domain context\n        PrincipalContext ctx = new PrincipalContext(ContextType.Domain);\n\n        // find a user\n        UserPrincipal user = UserPrincipal.FindByIdentity(ctx, \"SomeUserName\");\n\n        if (user != null)\n        {\n            // do something here.... \n            string givenName = user.GivenName;\n        }\n</code></pre>\n"},{"tags":[".net","asp.net-mvc-3","permissions"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12890160,"title":"MVC3 Permissions based checkboxs list","body":"<p>I try to find a way to show / hide actions.\ni want to let the system admin choose the specific permissions for the user.\nfor example: \nread\nwrite\ncreate \nsend message\nforward message\netc...\neach page will contain parts that will or will not shown, depend the permission. \nwhat is the best way to do that?</p>\n"},{"tags":["javascript","jquery","json","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1691,"score":0,"question_id":10153884,"title":"How to convert string to JSON Object","body":"<p><strong>timeline.js + MVC + Ajax + JSON</strong></p>\n\n<p>hello,</p>\n\n<p>I have problem while converting string to Json Object</p>\n\n<p>I have to display timeline on my webpage, I have used Timeline.js for the same, I am able to run the timeline using static data that is as following</p>\n\n<h1>Static Data</h1>\n\n<pre><code>// Create a JSON data table\ndata = [\n{\n        'start': new Date(2010, 7, 23),\n    'content': 'Conversation'\n},\n{\n    'start': new Date(2010, 7, 23),\n    'content': 'New Conversation'\n},\n{\n    'start': new Date(2010, 7, 23),\n    'content': 'Very New Conversation'\n}\n</code></pre>\n\n<p>now when I do </p>\n\n<pre><code>alert(data);\n</code></pre>\n\n<p>it gives me</p>\n\n<pre><code>[object Object],[object Object],[object Object]\n</code></pre>\n\n<p>but now I have to display a data from the DB, so I am calling the following function on controller</p>\n\n<h1>GetTimeLine method on controller</h1>\n\n<pre><code>public JsonResult GetTimeline()\n{\n      JsonResult jr = new JsonResult();\n      var objtimeline = objEntities.Timelines.Where(tl =&gt; tl.StudentID == Sessions.StudentID).ToList().AsQueryable();\n      String newstr = \"[\";\n      foreach(var tml in objtimeline)\n      {\n            DateTime date1 = Convert.ToDateTime(tml.CalculatedDate);\n            newstr += \"{'start': new  Date(\"+date1.Year+\",\"+date1.Month+\",\"+date1.Day+\",\"+date1.Hour+\",\"+date1.Minute+\",\"+date1.Second+\"),'content':'\"+tml.Description+\"'},\";\n      }\n      newstr = newstr.TrimEnd(',');\n      newstr += \"];\";\n      jr.Data = newstr;\n      jr.JsonRequestBehavior = JsonRequestBehavior.AllowGet;\n      return jr;\n}\n</code></pre>\n\n<h1>function to call controller method</h1>\n\n<pre><code>jQuery.ajax({\n    type: \"POST\",\n    url: \"@Url.Content(\"~/Student/GetTimeline\")\",\n    success: function (result) {\n        data = result;\n    },\n});\nalert(data);\n</code></pre>\n\n<p>it gives me the following alert</p>\n\n<pre><code>[{'start': new Date(2012,2,11,0,0,0),'content':'Parents meeting'},{'start': new Date(2012,2,15,0,0,0),'content':'Exam Meeting'}];\n</code></pre>\n\n<p>so the problem is with conversion of string to Json Object,</p>\n\n<p>How can I convert string returned from controller to Json Object on my view...</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":129,"score":1,"question_id":12889771,"title":"To get listbox selected values in asp.net mvc3","body":"<p>In asp.net Mvc3 razor, I have binded some data with dbcontext in my controller viewbag using selectlist</p>\n\n<p>My controller..</p>\n\n<pre><code>public ActionResult Index()\n        {\n            ViewBag.students = new SelectList(db.StudentList, \"StudentID\", \"StudentName\");\n            return View();\n        } \n</code></pre>\n\n<p>Then I binded it to the ListBox using viewbag</p>\n\n<p>My View..</p>\n\n<pre><code>@using (Html.BeginForm(\"Save\", \"Student\"))\n{    \n    @Html.ValidationSummary(true)\n    &lt;div&gt;\n     @Html.ListBox(\"students\")\n    &lt;p&gt;\n        &lt;input type=\"submit\" name=\"Save\" id=\"Save\" value=\"Save\" /&gt;\n    &lt;/p&gt;\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p>Now, in my controller, in that Save action, I need to capture the listbox selected values\nI have tried the following </p>\n\n<pre><code>[AcceptVerbs(HttpVerbs.Post)]\n        public ActionResult Save(FormCollection formValue) \n        {\n            //need code to capture values                \n            return View(\"Index\");\n        }\n</code></pre>\n\n<p>Could anyone help</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["asp.net","asp.net-mvc-3","html.actionlink"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":731,"score":2,"question_id":7961298,"title":"Usage of Html.ActionLink","body":"<p>I need to use the Html.ActionLink in the format: property of the grid.Column specification. \nMy code goes as below:</p>\n\n<pre><code>grid.GetHtml(\n\n  grid.Columns( \n    grid.Column(header: \"Column 1\", format: (item) =&gt; @&lt;div class='webgrid-bookname-column-style'&gt; @item.BookName &lt;/div&gt;),\n    grid.Column(header: \"Column 2\", format: (item) =&gt; Html.ActionLink(item.StartTime, \"ShowShippingFileMessage\", new { @id = item.BookName }))\n  )\n)\n</code></pre>\n\n<p>When I use this syntax, it gives me the compilation error of \nThe best overloaded method match for <code>System.Web.Helpers.WebGrid.Column(string, string, System.Func&lt;dynamic,object&gt;, string, bool)</code> has some invalid arguments\nWhen I change the item.StartTime above with a normal text like \"Edit\" then it works fine.</p>\n\n<p>I am new to ASP.NET, can anyone please help me understand what is wrong with the above statements?</p>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":12888542,"title":"Passing HTML Elements in as Func<> in Razor View Engine","body":"<p>I was checking out some sample codes and I saw something like this:</p>\n\n<pre><code>@(Html.DataList&lt;ProductOverviewModel&gt;(Model, 4,\n      @&lt;div class=\"item-box\"&gt;\n        &lt;div class=\"item\"&gt;\n          &lt;div class=\"picture\"&gt;\n            &lt;a href=\"@Url.RouteUrl(\"Product\", new { productId = item.Id, SeName = item.SeName })\" title=\"@item.DefaultPictureModel.Title\"&gt;\n              &lt;img alt=\"@item.DefaultPictureModel.AlternateText\" src=\"@item.DefaultPictureModel.ImageUrl\" title=\"@item.DefaultPictureModel.Title\" /&gt;&lt;/a&gt;\n          &lt;/div&gt;\n          &lt;div class=\"product-title\"&gt;\n            &lt;a href=\"@Url.RouteUrl(\"Product\", new { productId = item.Id, SeName = item.SeName })\" title=\"@item.DefaultPictureModel.Title\"&gt;\n              @item.Name&lt;/a&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n))\n</code></pre>\n\n<p>so basically there is a <code>DataList</code> helper method that's signature is this:</p>\n\n<pre><code>public static IHtmlString DataList&lt;T&gt;(this HtmlHelper helper, IEnumerable&lt;T&gt; items, int columns, Func&lt;T, HelperResult&gt; template) where T : class\n</code></pre>\n\n<p>and they passed the following part as <code>Func&lt;T,HelperResult&gt; template</code> and it works perfectly:</p>\n\n<pre><code>  @&lt;div class=\"item-box\"&gt;\n    &lt;div class=\"item\"&gt;\n      &lt;div class=\"picture\"&gt;\n        &lt;a href=\"@Url.RouteUrl(\"Product\", new { productId = item.Id, SeName = item.SeName })\" title=\"@item.DefaultPictureModel.Title\"&gt;\n          &lt;img alt=\"@item.DefaultPictureModel.AlternateText\" src=\"@item.DefaultPictureModel.ImageUrl\" title=\"@item.DefaultPictureModel.Title\" /&gt;&lt;/a&gt;\n      &lt;/div&gt;\n      &lt;div class=\"product-title\"&gt;\n        &lt;a href=\"@Url.RouteUrl(\"Product\", new { productId = item.Id, SeName = item.SeName })\" title=\"@item.DefaultPictureModel.Title\"&gt;\n          @item.Name&lt;/a&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>What rule is this and how is it possible?</p>\n"},{"tags":["asp.net-mvc-3","pagination","user-input"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":59,"score":-1,"question_id":12879800,"title":"How to iterate through a list using next & previous button in mvc 3?","body":"<p>I have a method which returns a list of item, now I need to show the items in a view page one at a time, I want to show 2 buttons as next &amp; previous which will navigate to the next item respectively. I need a guide line to implement this, I tried to search, but couldn't find much. Another requirement is, I need to manage user comments in my apps just like espnstar.com do, How that can be done, do I need to track every comment manually using id or is there anything more efficient? </p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12439764,"title":"html routing helpers are making a call against a storing data","body":"<p>It doesn't make any sense for me; I thought that constraints will only be hit when the user clicks on the link and not when the link is created. Am I missing something here?</p>\n\n<p>With amount of links on the page, opening a new data context and running a query for each route link is a huge performance drawback. Is there a way to set all Html.RouteLink helpers (and others) to not hit the constraints when creating the link?</p>\n\n<p>Thanks a lot!</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12887458,"title":"ASP.Net MVC Global Error Handling with JSON output?","body":"<p>I'm trying to implement some global error handling in my MVC site which is used as an API.<br>\nEvery response from this site is in the form of JSON.<br>\nIs there any way that I can make Error.cshtml (or some other page) display information in JSON format instead of as an HTML page?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1698,"score":1,"question_id":6425936,"title":"Absolute (external) URLs with Html.ActionLink","body":"<p>I'm unable to get Html.ActionLink to produce absolute urls.</p>\n\n<pre><code>Html.ActionLink(DataBinder.Eval(c.DataItem, \"Name\").ToString(), DataBinder.Eval(c.DataItem, \"Path\").ToString())\n</code></pre>\n\n<p>This pulls the data from my model correctly, but appends the path to the end of the current page, producing URLs like \"http://localhost:24590/www.google.com\"</p>\n\n<p>How can I get this to work how I want it to?</p>\n"},{"tags":["c#","asp.net-mvc-3","caching","outputcache"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":12881939,"title":"OutputCache on server","body":"<p>I define OutputCache attributes on top of my controller actions, so that the server can give the same response quickly to different users. Bu it caches the <strong>whole</strong> page. I mean the master page is also cached if I have cached an action that returns a <code>View()</code>. So the user account information on top of the master page gets shared by every user. I want to cache only the content page, not the master page, _Layout.cshtml. How can I exclude that?</p>\n\n<p>Edit:\nThe part where I'm having trouble is this:</p>\n\n<pre><code>@if(Request.IsAuthenticated) {\n    &lt;text&gt;Hello &lt;strong&gt;@User.Identity.Name&lt;/strong&gt;!&lt;/text&gt;\n    @: | \n    @Html.ActionLink(\"Index\", \"Index\", \"Account\")\n    @: |\n    @Html.ActionLink(\"Logout\", \"Logout\", \"Account\")\n}\nelse\n{\n    @:|\n   @Html.ActionLink(\"Login\", \"Login\", \"Account\")\n}\n</code></pre>\n\n<p>When I cache a controller action, the returned view also carries this userlogin part from the cache, so it gives wrong salutes to almost every user. How can I dynamically generate this part even if the page is cached?</p>\n"},{"tags":["regex","asp.net-mvc-3","model"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2566,"score":2,"question_id":9038522,"title":"Regular Expression for any number greater than 0?","body":"<p>Applying validation to a model in MVC and would like to do it using Regex.</p>\n\n<p>Looking to validate that an ID on my model is greater than 0 on submit.</p>\n\n<p>I'm unfamiliar with Regex... could someone help me out?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net","mysql","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12872714,"title":"Cannot connect to mysql database in .NET MVC3","body":"<p>I've having some trouble in connecting mvc 3 application in .net. I know that mysql database instance has to be created before using web.config file to connect the it. My \nconnectionStrings as below:</p>\n\n<pre><code>&lt;connectionStrings&gt;\n&lt;add name=\"epmsDb\" \n  connectionString=\"Server=localhost;Database=database1;\n                     Uid=root;Pwd=mypassword\"\n  providerName=\"System.Data.SqlClient\" /&gt;\n&lt;/connectionStrings&gt;\n</code></pre>\n\n<p>and I've got a database name call epmsDb created in Server explorer. Then I tried to get the connectionString in the code using this :</p>\n\n<pre><code>  string connectionString =\n          ConfigurationManager.ConnectionStrings[\"epmsDb\"].ConnectionString;\n        context = new DataContext(connectionString);\n        usersTable = context.GetTable&lt;UserObj&gt;();\n</code></pre>\n\n<p>Every time I tried to access the database, I threw this exception:</p>\n\n<pre><code>   A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)\n</code></pre>\n\n<p>I've been trying to overcome this for a week now. Does anyone have ideas why this occurres?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12840712,"title":"Error when passing Model object to my view","body":"<p>I have created the following model object:-</p>\n\n<pre><code>namespace MvcApplication1.Models\n\n    {\n        public class listofpack\n        {\n           public string packageName { get; set; }\n           public string packageId { get; set; }\n        }\n    }\n</code></pre>\n\n<p>Which i am populating its value on the controller as follow:-</p>\n\n<pre><code>public ActionResult Index()\n        {\n            ViewBag.Message = \"Modify this template to jump-start your ASP.NET MVC application.\";\n            using (var client = new WebClient())\n            {\n                var query = HttpUtility.ParseQueryString(string.Empty);\n                query[\"j_username\"] = \"kermit\";\n                query[\"hash\"] = \"9449B5ABCFA9AFDA36B801351ED3DF66\";\n                query[\"loginAs\"] = \"admin\";\n                query[\"loginAs\"] = User.Identity.Name;\n\n                var url = new UriBuilder(\"http://localhost:8080/jw/web/json/workflow/package/list\");\n                url.Query = query.ToString();\n                string json = client.DownloadString(url.ToString());\n                var model = new JavaScriptSerializer().Deserialize&lt;listofpack&gt;(json);\n                return View(model);\n                // return Content(json, \"application/json\");\n            }\n\n        }\n</code></pre>\n\n<p>After that on the view i am trying to loop through the model as follow:-</p>\n\n<pre><code>@model IEnumerable&lt;MvcApplication1.Models.listofpack&gt;\n@{\n    ViewBag.Title = \"Home Page\";\n}\n@foreach(var item in Model) { \n\n        @Html.ActionLink(item.packageId.ToString(), \"about\", \"Home\", new { id = \"crm\"},null)\n\n}\n</code></pre>\n\n<p>but when i run the view i will get the following error:-</p>\n\n<pre><code>The model item passed into the dictionary is of type 'MvcApplication1.Models.listofpack', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[MvcApplication1.Models.listofpack]'. \n</code></pre>\n\n<p>BR</p>\n\n<p><strong>:::UPDATE::::\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------</strong></p>\n\n<p>i have updated the controller code to be:-</p>\n\n<pre><code>public ActionResult Index()\n        {\n            ViewBag.Message = \"Modify this template to jump-start your ASP.NET MVC application.\";\n            using (var client = new WebClient())\n            {\n                var query = HttpUtility.ParseQueryString(string.Empty);\n                query[\"j_username\"] = \"kermit\";\n                query[\"hash\"] = \"9449B5ABCFA9AFDA36B801351ED3DF66\";\n                query[\"loginAs\"] = \"admin\";\n                query[\"loginAs\"] = User.Identity.Name;\n\n                var url = new UriBuilder(\"http://localhost:8080/jw/web/json/workflow/package/list\");\n                url.Query = query.ToString();\n                string json = client.DownloadString(url.ToString());\n                var model = new JavaScriptSerializer().Deserialize &lt;List&lt;listofpack&gt;&gt;(json);\n                return View(model);\n                            }\n            }\n</code></pre>\n\n<p>and on the view:-</p>\n\n<pre><code>@model List&lt;MvcApplication1.Models.listofpack&gt;\n@Model.Count();\n@foreach(var item in Model) { \n\n        @Html.ActionLink(item.packageId.ToString(), \"about\", \"Home\", new { id = \"crm\"},null)\n\n}\n</code></pre>\n\n<p>But the problem is that nothing will be displayed in the view and the <code>.count()</code> will return zero although there should be 5 jason objects passed to the view. So what might be going wrong??\nBest Regards</p>\n"},{"tags":["sql-server","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12881069,"title":"Use SQL Server 2005 Express Edition Service Pack 4 with Visual Studio 2012","body":"<p>I've got SQL Server 2005 Express and I want to use it in setting up the database to be used with Visual Studio 2012. Will they be compatible with each other? Where can I find a good tutorial of how to set them up?</p>\n"},{"tags":["jquery","asp.net-mvc-3","asynchronous","progressive-enhancement"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12882356,"title":"prevent Html.Action with JQuery","body":"<p>Quick question guys, I have this on my view</p>\n\n<pre><code>    &lt;div class=\"product_list\"&gt;\n        @Html.Action(\"GetProducts\", \"Products\")\n    &lt;/div&gt;\n</code></pre>\n\n<p>and the controller is simply</p>\n\n<pre><code>public ActionResult GetProducts(string country, string currency, int category){\n    var viewModel = new ProductsViewModel{\n        Products = _proxy.GetProducts(country, currency, category, page)};\n\n    return PartialView(viewModel);\n}\n</code></pre>\n\n<p>Then the GetProducts View just renders each product in a foreach loop</p>\n\n<p>I would like to prevent this to happen if JS is enabled and with JQuery call te service asynchronously. Something like</p>\n\n<pre><code>$(\".product_list\").SOMETHING(function(event) {\n    event.preventDefault();\n    ...\n });\n</code></pre>\n\n<p>How can I do this?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":6,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":5115,"score":4,"question_id":8159725,"title":"MVC. HttpPostedFileBase is always null","body":"<p>I need some help. I'm trying to upload file using . Here is my View:</p>\n\n<pre><code>@using (Html.BeginForm(\"BookAdd\", \"Admin\", FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n{\n    &lt;input type=\"file\" name=\"files[0]\" id=\"files[0]\" /&gt;\n    &lt;input type=\"file\" name=\"files[1]\" id=\"files[1]\" /&gt;\n    &lt;input type=\"submit\" value=\"Upload Book\" /&gt;\n}\n</code></pre>\n\n<p>And here is an Action which should process uploaded file.</p>\n\n<pre><code>[HttpPost]\n    public ActionResult BookAdd(IEnumerable&lt;HttpPostedFileBase&gt; files)\n    {\n        // some actions\n        return View();\n    }\n</code></pre>\n\n<p>The problem is that \"files\" always contains two elements which are \"null\"'s.\nWhat can be doneб to fix it.</p>\n\n<p>PS. sorry for my English, it must be just horrible.</p>\n\n<p>It's time for some news. It seems like I found the problem, but I still dont know how to fix it. It appears that despite the fact I'm using \"multipart/form-data\" here:</p>\n\n<pre><code>@using (Html.BeginForm(\"BookAdd\", \"Admin\", FormMethod.Post, new { enctype=\"multipart/form-data\" }))\n{\n    &lt;input type=\"file\" name=\"File\" id=\"file1\" /&gt;\n    &lt;input type=\"file\" name=\"File\" id=\"file2\" /&gt;\n    &lt;input type=\"submit\" value=\"Upload Book\" /&gt;\n}\n</code></pre>\n\n<p>Request.ContentType remains \"application/x-www-forum-urlencoded\" in controller.. </p>\n"},{"tags":["asp.net-mvc-3","ext.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":11574695,"title":"How getValue except from attribut ID in EXT.Net Razor Engine?","body":"<p>code in listeners bellow get value from ID #{CheckAll}, \nI want get value from other attribute. </p>\n\n<pre><code>@Html.X().ResourceManager()\n\n@Html.X().Checkbox()\n        .Name(\"CheckAll\")\n        .BoxLabel(\"CheckAll\")\n        .ID(\"CheckAll\")\n        .Checked(false)\n        .Listeners(l =&gt; l.Change.Handler = @\"var checkAll = #{CheckAll}.getValue();\n        if(checkAll){            \n            #{CheckAll2}.setValue(true);\n        }\");\n</code></pre>\n"},{"tags":["entity-framework","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1363,"score":0,"question_id":6306415,"title":"MVC3 Customizing DropdownList items in strongly typed view","body":"<p>I have an auto generated DropDownList from Entity Framework in a strongly typed view: </p>\n\n<pre><code> &lt;div class=\"editor-field\"&gt;\n    @Html.DropDownList(\"User_FK\", String.Empty)\n    @Html.ValidationMessageFor(model =&gt; model.User_FK)\n&lt;/div&gt;\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/7eGLm.jpg\" alt=\"Auto Generated drop down list\"></p>\n\n<p>Here is the action code: </p>\n\n<pre><code>public ActionResult Create()\n{\n    ViewBag.SystemMaster_FK = new SelectList(db.SystemMasters, \"System_PK\", \"Name\");\n    ViewBag.User_FK = new SelectList(db.Users, \"User_PK\", \"NetworkLogin\");\n    return View();\n} \n</code></pre>\n\n<p>I need this list to display the names of people loaded from Active Directory. How do I customize the select list options seperately?</p>\n"},{"tags":["asp.net-mvc-3","entity-framework"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1450,"score":0,"question_id":8313825,"title":"Using sample data to seed database for Entity Framework doesn't create database","body":"<p>I'm pretty new to using Entity Framework, as well as to using ASP.NET MVC. I've been able to complete a couple of tutorials on the ASP.NET MVC website and thought I would start my own project based on the MVC Music Store application.</p>\n\n<p>I can't tell where I went wrong (it all looks the same to me), but for some reason my seed data isn't creating the database.</p>\n\n<p>Item class:</p>\n\n<pre><code>namespace MySite.Models\n{\n    public class Item\n    {\n        public int Id { get; set; }\n        public string Name { get; set; }\n    }\n}\n</code></pre>\n\n<p>Tag class:</p>\n\n<pre><code>namespace MySite.Models\n{\n    public class Tag\n    {\n        public int Id { get; set; }\n        public string Name { get; set; }\n    }\n}\n</code></pre>\n\n<p>ItemTag class:</p>\n\n<pre><code>namespace MySite.Models\n{\n    public class ItemTag\n    {\n        public int Id { get; set; }\n        public int ItemId { get; set; }\n        public int TagId { get; set; }\n    }\n}\n</code></pre>\n\n<p>MySiteEntities class:</p>\n\n<pre><code>namespace MySite.Models\n{\n    public class MySiteEntities : DbContext\n    {\n        public DbSet&lt;Item&gt; Items { get; set; }\n        public DbSet&lt;Tag&gt; Tags { get; set; }\n        public DbSet&lt;ItemTag&gt; ItemTags { get; set; }\n    }\n}\n</code></pre>\n\n<p>Global.asax class:</p>\n\n<pre><code>namespace MySite\n{\n    public class MvcApplication : System.Web.HttpApplication\n    {\n        ...\n\n        protected void Application_Start()\n        {\n            System.Data.Entity.Database.SetInitializer(new MySite.Models.SampleData());\n\n            AreaRegistration.RegisterAllAreas();\n\n            RegisterGlobalFilters(GlobalFilters.Filters);\n            RegisterRoutes(RouteTable.Routes);\n        }\n    }\n}\n</code></pre>\n\n<p>Web.config file:</p>\n\n<pre><code>&lt;configuration&gt;\n  ...\n\n  &lt;connectionStrings&gt;\n    &lt;add name=\"MySiteEntities\"\n      connectionString=\"Data Source=|DataDirectory|MySite.sdf\"\n      providerName=\"System.Data.SqlServerCe.4.0\" /&gt;\n  &lt;/connectionStrings&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>SampleData class:</p>\n\n<pre><code>namespace MySite.Models\n{\n    public class SampleData : DropCreateDatabaseIfModelChanges&lt;MySiteEntities&gt;\n    {\n        protected override void Seed(MySiteEntities context)\n        {\n            new List&lt;Item&gt;\n            {\n                new Item { Id = 1, Name = \"Bob Jones\" },\n                new Item { Id = 2, Name = \"George Smith\" },\n                new Item { Id = 3, Name = \"Boys and Girls\" },\n                new Item { Id = 4, Name = \"The President's Hair\" },\n                new Item { Id = 5, Name = \"Invaders From Mars\" },\n                new Item { Id = 6, Name = \"Tank Shooter\" },\n                new Item { Id = 7, Name = \"Stew's Blog\" },\n                new Item { Id = 8, Name = \"Social Mania\" }\n            }.ForEach(i =&gt; context.Items.Add(i));\n\n            new List&lt;Tag&gt;\n            {\n                new Tag { Id = 1, Name = \"Author\" },\n                new Tag { Id = 2, Name = \"Movie\" },\n                new Tag { Id = 3, Name = \"Video Game\" },\n                new Tag { Id = 4, Name = \"Website\" }\n            }.ForEach(t =&gt; context.Tags.Add(t));\n\n            new List&lt;ItemTag&gt;\n            {\n                new ItemTag { Id = 1, ItemId = 1, TagId = 1 },\n                new ItemTag { Id = 2, ItemId = 2, TagId = 1 },\n                new ItemTag { Id = 3, ItemId = 3, TagId = 2 },\n                new ItemTag { Id = 4, ItemId = 4, TagId = 2 },\n                new ItemTag { Id = 5, ItemId = 5, TagId = 3 },\n                new ItemTag { Id = 6, ItemId = 6, TagId = 3 },\n                new ItemTag { Id = 7, ItemId = 7, TagId = 4 },\n                new ItemTag { Id = 8, ItemId = 8, TagId = 4 }\n            }.ForEach(x =&gt; context.ItemTags.Add(x));\n        }\n    }\n}\n</code></pre>\n\n<p>That's pretty much everything. I did delete the database file at one point. Shouldn't it get created again when I build the solution?</p>\n"},{"tags":["javascript","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12881847,"title":"calling controller from method from javascript","body":"<p>I am developping a web site using MVC 3 razor. in wich\n   I have the folowing situation:</p>\n\n<ol>\n<li><p>A controller method:</p>\n\n<p>public ActionResult MyControllerMethod(int parameter){</p>\n\n<pre><code>    ''go to bd a do some staff\n\n    IList&lt;My_Custom&gt; datafromDB = MyService.GetData(parameter);           \n\n    'returns to my string tuped view\n    return View(datafromDB );\n</code></pre>\n\n<p>}</p></li>\n<li><p>A strong typed view in wich i use javascript:</p>\n\n<p>@model IList</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n function getData()\n { \n   var parameter = document.getElementById('myParamater').value;  \n\n   $.get('/MyController/MyControllerMethod/' + parameter, function (data) {\n\n      loadData();\n\n   }\n   );\n</code></pre>\n\n<p>}</p>\n\n<pre><code>function loadData() \n{ \n  clearData();\n\n  datos = @Html.Raw(Json.Encode(Model));  \n\n  //do some stuff with datos\n\n}\n\n&lt;/script&gt;\n</code></pre>\n\n<p>The javascript call to the controller works fine but my problem is that the string typed view seens like is not taking the new value for the @model, so keeps loading the same information.</p></li>\n</ol>\n\n<p>Althought i have debugged the accion controller and it returns diferent data every time.\nSo is there any way to refresh the Model value of a string typed view???.</p>\n\n<p>I also tried to proccess the data value of that line</p>\n\n<p>$.get('/MyController/MyControllerMethod/' + parameter, function (data) {</p>\n\n<p>but i wasn´t succesfull doing that.</p>\n\n<p>I would appreciate any help or cllue.</p>\n\n<p>Thanks for reading my post</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":584,"score":1,"question_id":8305233,"title":"ASP.NET MVC 3 user Profiles not being generated","body":"<p>For my ASP.NET MVC 3 app (using Razor) my <code>web.config</code> has this:</p>\n\n<pre><code>&lt;profile&gt;\n  &lt;providers&gt;\n    &lt;clear/&gt;\n    &lt;add name=\"AspNetSqlProfileProvider\" type=\"System.Web.Profile.SqlProfileProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt;\n  &lt;/providers&gt;\n  &lt;properties&gt;\n    &lt;add name=\"FirstName\"/&gt;\n    &lt;add name=\"LastName\"/&gt;\n  &lt;/properties&gt;\n&lt;/profile&gt;\n</code></pre>\n\n<p>It is my understanding from reading the docs that ASP.NET will automatically generate properties off the HttpContext so that I can access these like this:</p>\n\n<pre><code> // MyController.cs\n\n Email = u.Email;\n FirstName = HttpContext.Profile.FirstName;\n LasttName = HttpContext.Profile.LastName;\n</code></pre>\n\n<p>However, the compiler is bitching that <code>.FirstName</code> and <code>.LastName</code> don't exist.</p>\n\n<p>What is going on here? </p>\n"},{"tags":["asp.net-mvc-3","form-validation","helpers"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12881640,"title":"Form Validation in html helper in asp.net","body":"<p>i av a small web project that displays post/article from the database,and because several post will be displayed on a page,i decided to use an helper.\nThe helper shows a good number of post and and also allow users to make comments on a post.Im now having problems providing validation for the comment form in this helper.</p>\n\n<p>Below is the code for my html helper \"ArticleHelper.cshtml\"</p>\n\n<pre><code>    @helper Render(Article article,System.Web.Mvc.HtmlHelper html,bool  showComments)\n{\n    &lt;div class=\"articleTitle\" &gt;&lt;a href=\"@Href(\"~/Article/Details/\" + article.ID)\"&gt;@article.Title&lt;/a&gt;&lt;/div&gt;\n    &lt;div class=\"articleContainer\"&gt;\n    &lt;div class=\"articleTabs\"&gt;\n            &lt;div class=\"dateTab\"&gt;\n            &lt;div class=\"month\"&gt;@article.AddedDate.ToString(\"MMM\").ToUpper()&lt;/div&gt;\n            &lt;div class =\"day\"&gt;@article.AddedDate.ToString(\"dd\")&lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"commentsTab\"&gt;\n            &lt;a href=\"@Href(\"~/Article/Details/\" + article .ID + \"#comments\")\"&gt;@article.Comments.Count&lt;/a&gt;\n            &lt;/div&gt;\n\n    &lt;/div&gt;\n    &lt;div class=\"postContent\"&gt;\n        &lt;div class=\"articleBody\"&gt;@html.Raw(article.Body)&lt;/div&gt;\n                &lt;div class=\"tagList\"&gt;\n                @foreach (Tag tag in article.Tags)\n                {\n                    &lt;span class=\"tag\"&gt;&lt;a href=\"@Href(\"~/Article/Tags/\" + tag.Name )\"&gt;@tag.Name&lt;/a&gt;&lt;/span&gt;\n                }\n\n                &lt;/div&gt;\n        &lt;/div&gt;\n        @if (Roles.IsUserInRole(\"Administrator\"))\n                    {\n               &lt;div id=\"articleControlPanel\"&gt;\n               &lt;a href=\"@Href(\"~/Article/Delete/\" + article.ID)\"&gt;Delete&lt;/a&gt;\n               &lt;a href=\"@Href(\"~/Article/Edit/\" + article.ID)\"&gt;Edit&lt;/a&gt;\n\n               &lt;/div&gt;\n            }\n\n    &lt;/div&gt;\n    if(showComments)\n    {\n\n        &lt;div id=\"commentContainer\"&gt;\n        &lt;a id=\"comments\"&gt;&lt;/a&gt;\n        @foreach (Comment comment in article.Comments.OrderBy(X=&gt;X.AddedDate))\n        {\n            &lt;div class=\"comment\"&gt;\n                &lt;div class=\"commentName\"&gt;\n                @if(!string .IsNullOrWhiteSpace(comment.Email))\n                {\n                    &lt;a href=\"mailto:comment.Email\"&gt;@comment.Name&lt;/a&gt;\n                }\n                else\n                {\n                    @comment.Name;\n                }\n                &lt;/div&gt;\n                said:\n                &lt;div class=\"commentBody\"&gt;@html.Raw(html.Encode(comment.Body).Replace(\"\\n\",\"&lt;br/&gt;\"))&lt;/div&gt;\n                &lt;div class=\"commentTime\"&gt;at @comment.AddedDate.ToString(\"HH:mm\") on @comment.AddedDate.ToString(\"yyyy/dd\")&lt;/div&gt;\n\n                @if (Roles.IsUserInRole(\"Administrator\"))\n                    {\n                    &lt;div id=\"commentControlPanel\"&gt;\n\n\n                     &lt;a href=\"@Href(\"~/Article/DeleteComment/\" + comment.ID)\"&gt;Delete Comment&lt;/a&gt;\n\n                    &lt;/div&gt;\n                    }\n\n\n            &lt;/div&gt;\n        }\n\n        &lt;div id=\"commentEditor\"&gt;\n        &lt;div id=\"commentPrompt\"&gt;Leave a comment!&lt;/div&gt;\n\n\n        &lt;form action =\"@Href(\"~/Article/Comment/\" + article .ID )\" method=\"post\"&gt; &lt;div class=\"editor-label\"&gt; Name (Required)&lt;/div&gt; &lt;div class=\"editor-field\"&gt; &lt;input type=\"text\" name =\"name\" id=\"commentNamePrompt\" /&gt;&lt;/div&gt; &lt;div class=\"editor-label\"&gt;Email (Required) &lt;/div&gt; &lt;div class=\"editor-field\"&gt; &lt;input type=\"text\" name =\"email\" id=\"commentEmailPrompt\"/&gt;&lt;/div&gt; &lt;div class=\"editor-label\"&gt;Comment!&lt;/div&gt; &lt;div class=\"editor-field\"&gt; &lt;textarea name =\"body\" id=\"commentBodyInput\" rows =\"10\" cols =\"80\"&gt;&lt;/textarea&gt;&lt;/div&gt; &lt;br /&gt; &lt;input type =\"submit\" id=\"commentSubmitInput\" name=\"submit\" value =\"Submi!t\" /&gt; &lt;/form&gt;\n\n        &lt;/div&gt;\n\n\n\n\n        &lt;/div&gt;\n    }\n\n\n}\n</code></pre>\n\n<p>and this is how the view calls the helper</p>\n\n<pre><code>@ArticleHelper.Render(Model, Html, true)\n</code></pre>\n\n<p>and this is the controller action</p>\n\n<pre><code>public ActionResult Comment(int id, string Name, string Email, string Body)\n        {\n            if (!ModelState.IsValid){\n                return View();}\n\n            Article article = GetArticle(id);\n            Comment comment = new Comment();\n            comment.Article = article;\n            comment.AddedDate = DateTime.Now;\n            comment.Name = Name;\n            comment.Email = Email;\n            comment.Body = Body;\n\n            model.AddToComments(comment);\n            model.SaveChanges();\n            return RedirectToAction(\"Details\", new { id = id });\n        }\n</code></pre>\n\n<p>The above code works fine,what i need now is validation,i used database first approach and iv created the buddy classes for \"comments\" but yet,the comment form wont validate yet,it simply submits even if the forms fields are empty</p>\n"},{"tags":["asp.net","asp.net-mvc-3","wcf","wcf-binding","wcf-client"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12879752,"title":"WCF Service throwing exception while receiving a list of more than 40 objects","body":"<p>I have a WCF service using a BasicHttpBinding. I am sending the request to the service from the controller by passing a list of custom object as follows:</p>\n\n<p>Service code:</p>\n\n<pre><code>public List(Information) AddData(List(Information) InformationList, out string errorMessage)   \n{ }\n</code></pre>\n\n<p>List(Information) is a class with 40 fields.</p>\n\n<p>Now my controller code is:</p>\n\n<pre><code>Service.AddData(InformationList);\n</code></pre>\n\n<p>The problem is that when I try to hit the service with more than 100 objects I receive an error \"400 Error Bad Request\" with no details in the inner exception.</p>\n\n<p>The configuration in web.config is as follows:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;binding\n  maxBufferSize=\"2147483647\"\n  maxBufferPoolSize=\"2147483647\"\n  maxReceivedMessageSize=\"2147483647\" /&gt;\n\n&lt;readerQuotas \n  maxDepth=\"32\" \n  maxStringContentLength=\"2147483647\"\n  maxArrayLength=\"2147483647\"\n  maxBytesPerRead=\"2147483647\"\n  maxNameTableCharCount=\"2147483647\" /&gt;\n</code></pre>\n\n<p>This is the configuration for both the server and UI web.config.</p>\n\n<p>Is there any settings or solution for sending the list of more than 100 objects to the service without getting the 400 bad request error?</p>\n"},{"tags":["asp.net-mvc-3","c#-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12879386,"title":"What am i doing wrong? Entries are not getting logged into database","body":"<p>Here is Index:\nIt goes through folder and should add entries to database. But when i run it no entries are getting added. Is something wrong with this code? \n(Basically code goes through couple folders gets image file and songs under the folder and add to database, but it is not working.)</p>\n\n<pre><code>public ActionResult Index()\n        {            \n            DemoDb db = new DemoDb();\n            var movies = new List&lt;SongModel&gt;();\n            MovieModel movie = new MovieModel();\n            SongModel song = new SongModel();\n            //Function to get all the folders present in that particular location,Use\n            var folders = Directory.GetDirectories(Server.MapPath(\"~/Content/themes/base/songs\"));\n\n            foreach (var folder in folders)\n            {\n                movie.MovieName = new DirectoryInfo(folder).Name;\n                string[] files = Directory.GetFiles(folder);\n                string img = string.Empty;\n                var list = new List&lt;string&gt;();\n                foreach (var file in files)\n                {\n                    if (Path.GetExtension(file) == \".jpg\" ||\n                        Path.GetExtension(file) == \".png\")\n                    {\n                        movie.Image = Path.Combine(Server.MapPath(\"~/Content/themes/base/songs\"), file);\n                    }\n                    else\n                    {\n                        song.MovieId = movie.MovieId;\n                        song.Song = Path.Combine(Server.MapPath(\"~/Content/themes/base/songs\"), file);                        \n                    }     \n                }\n                db.movies.Add(movie);\n                db.songs.Add(song);\n                db.SaveChanges();\n            }              \n            return View();\n        }\n</code></pre>\n\n<p>Here are classes and database design too:</p>\n\n<pre><code>public class MovieModel\n    {\n        [Key]\n        public int MovieId { get; set; }\n        public string MovieName { get; set; }\n        public int SongId { get; set; }\n        public string Image { get; set; }\n    }\n    public class SongModel\n    {\n        [Key]\n        public int SongId { get; set; }\n        public int MovieId { get; set; }\n        public string Song { get; set; }\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","authorization","action-filter"],"answer_count":2,"favorite_count":2,"up_vote_count":13,"down_vote_count":0,"view_count":2626,"score":13,"question_id":6860686,"title":"Extend AuthorizeAttribute Override AuthorizeCore or OnAuthorization","body":"<p>Using ASP.NET MVC I am creating a custom Authorize attribute to take care of some custom authorization logic.  I have looked at a lot of examples and it is pretty straight forward but my question is which method is best to override, AuthorizeCore or OnAuthorization?  I have seen many examples overriding one or the other.  Is there a difference?  </p>\n"},{"tags":["asp.net-mvc-3","mvvm","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":223,"score":0,"question_id":12872974,"title":"How to use the templates for Kendo UI autocomplete using MVVM observable","body":"<p>I'm new to Kendo UI and still learning a lot. My requirement is to create a multi-column auto complete drop down list. I followed the below link using Kendo UI autocomplete text box with templates. \n<a href=\"http://demos.kendoui.com/web/autocomplete/template.html\" rel=\"nofollow\">http://demos.kendoui.com/web/autocomplete/template.html</a>.</p>\n\n<p>However I could not find an example that uses templates with an auto completion using..</p>\n\n<blockquote>\n  <p>kendo.observable.</p>\n</blockquote>\n\n<p>I use MVVM observable to binds the data to an input box as below.</p>\n\n<pre><code> &lt;div id=\"form-container\"&gt;\n    &lt;h2&gt;\n        Advisors&lt;/h2&gt;\n    Select Advisor:\n    &lt;div class=\"autocomplete\"&gt;\n        &lt;input id=\"div-template\" data-role=\"autocomplete\" data-text-field=\"AdvisorName\" data-filter=\"contains\" data-bind=\"source: advisorsSource, value: selectedAdvisor\" /&gt;\n    &lt;/div&gt;\n &lt;/div&gt;\n\n\n&lt;script type=\"text/javascript\"&gt;\n\n $(document).ready(function () {\n\n    var viewModel = kendo.observable({\n        advisorsSource: new kendo.data.DataSource({\n            minLength: 2,\n            template: '&lt;tr&gt;' +\n                    '&lt;td&gt;${ AdvisorCode }&lt;/dt&gt;&lt;td&gt;${ AdvisorName }&lt;/td&gt;&lt;td&gt;${ Organisation }&lt;/td&gt;' +\n                  '&lt;/tr&gt;',\n            transport: {\n                type: \"json\",\n                serverFiltering: true,\n                read: \"Home/Advisors\",\n                parameterMap: function(options, operation) {\n                    if (operation !== \"read\" &amp;&amp; options.models) {\n                        return {\n                            models: kendo.stringify(options.models)\n                        };\n                    }\n                    return {\n                        prefix: options.filter.filters[0].value\n                    }; \n                }\n            },\n            schema: {\n                model: { id: \"AdvisorCode\" }\n            }               \n        })\n    });\n\n    kendo.bind($(\"#form-container\"), viewModel);\n})\n\n&lt;/script&gt;\n</code></pre>\n\n<p>HomeController has the Action which return Json as below:</p>\n\n<pre><code> public JsonResult Advisors(string prefix)      \n {\n       var list = new List&lt;Advisor&gt;()\n       {\n              new Advisor { AdvisorCode = 002, AdvisorName = \"Alex\" , Organisation = \"Blue Co\"},\n              new Advisor { AdvisorCode = 003, AdvisorName = \"Foo\" , Organisation = \"Yellow Co\"},\n              new Advisor { AdvisorCode = 004, AdvisorName = \"Smith\", Organisation = \"Green Co\" },\n              new Advisor { AdvisorCode = 005, AdvisorName = \"David\", Organisation = \"Yellow Co\" },\n              new Advisor { AdvisorCode = 006, AdvisorName = \"Alex\" , Organisation = \"Blue Co\"},   \n        };\n\n        return Json(list, JsonRequestBehavior.AllowGet);\n   }\n</code></pre>\n\n<p>The auto completion works ok. However it only shows AdvisorName. It seems like my template does not work as expected. </p>\n\n<p>I need to display multi-column (AdvisorCode | AdvisorName | Organisation) in the drop down, and the search should be based on any of these columns ( not just the AdvisorName). </p>\n\n<p>Can anyone please point me to the right direction on how to use the template so I can display multi columns?</p>\n\n<p>Thanks and much appreciated.</p>\n"},{"tags":["ajax","json","asp.net-mvc-3","cross-domain"],"answer_count":3,"favorite_count":4,"up_vote_count":5,"down_vote_count":0,"view_count":6026,"score":5,"question_id":7547672,"title":"Ajax json post to Controller across domains, \"not allowed by\" Access-Control-Allow-Headers","body":"<p>I create a simple MVC Controller action, that takes some json data - then return true or false. </p>\n\n<pre><code>    [AllowCrossSiteJson]\n    public JsonResult AddPerson(Person person)\n    {\n            //do stuff with person object\n           return Json(true);\n    }\n</code></pre>\n\n<p>I call it from javascript:</p>\n\n<pre><code>        function saveData(person) {\n            var json = $.toJSON(person); //converts person object to json\n            $.ajax({\n                url: \"http://somedomain.com/Ajax/AddPerson\",\n                type: 'POST',\n                dataType: 'json',\n                data: json,\n                contentType: 'application/json; charset=utf-8',\n                success: function (data) {\n                    alert(\"ok\");\n                }\n            });\n        }\n</code></pre>\n\n<p>Everything works as long as I am on the same domain, but as soon as I call it from another domain, I run into problems.</p>\n\n<p>On the controller is an action filter \"AllowCrossSiteJson\" that sets the header \"Access-Control-Allow-Origin\" to \"*\", allowing any origin to access the controller action.</p>\n\n<pre><code>public class AllowCrossSiteJsonAttribute : ActionFilterAttribute\n{\n    public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        filterContext.RequestContext.HttpContext.Response.AddHeader(\"Access-Control-Allow-Origin\", \"*\");\n        base.OnActionExecuting(filterContext);\n    }\n}\n</code></pre>\n\n<p>However - I then get this error in firebug, when calling across domains:</p>\n\n<blockquote>\n  <p>OPTIONS <a href=\"http://somedomain.com/Ajax/AddPerson?packageId=3\">http://somedomain.com/Ajax/AddPerson?packageId=3</a> 500 (Internal Server Error)\n  XMLHttpRequest cannot load <a href=\"http://somedomain.com/Ajax/AddPerson\">http://somedomain.com/Ajax/AddPerson</a>. Request header field Content-Type is not allowed by Access-Control-Allow-Headers.</p>\n</blockquote>\n\n<p><strong>What is wrong here?</strong></p>\n\n<p>I have been looking through possible solutions for hours, and it seems to be something to do with jquery using OPTIONS (not POST as I would expect). </p>\n\n<p>If that is indeed the problem, how can I fix that?</p>\n"},{"tags":["asp.net-mvc-3","dropdownlistfor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12877601,"title":"Binding a Generic List to a Dropdownlistfor in MVC3","body":"<p>I have a generic list method that returns a CategoryID and CategoryName.\nI have spent enough time researching and cant seem to put it together. I very new at MVC.</p>\n\n<p><strong>Here is my DropdownList Method in a repository. I get back the data... So far so good.</strong></p>\n\n<pre><code>public List&lt;DropdownList&gt; GetDDl()\n{\n\nreturn catDDL; \n}\n</code></pre>\n\n<p><strong>Here is my CONTROLLER CODE(attempt at it)</strong>   </p>\n\n<pre><code>   IEnumerable&lt;SelectListItem&gt; liCat =\n userRepository.Getddl().Select(c =&gt; new SelectListItem\n{\n   Value = c.DropDownID.ToString(),\n   Text = c.DropDownText\n}\nViewBag.catItems = new SelecList(liCat,\"Value\",\"Text\");\n</code></pre>\n\n<p><strong>Here is my VIEW</strong></p>\n\n<pre><code>@Html.Dropdownlist(\"catItems\",\"Select Category)\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":127,"score":0,"question_id":12877553,"title":"Empty textbox on button click by jquery in mvc3 viewpage","body":"<p>I have a page in mvc where I have 4 textbox with id and i want to clear the textbox on button click but my code does not seem to do any thing. Here's my piece of code:</p>\n\n<pre><code>&lt;td&gt;&lt;%: Html.TextBoxFor(model =&gt; model.fdose, new { id = \"pls\", style = \"width:100px;\"            })%&gt; &lt;/td&gt;\n&lt;td&gt;&lt;%: Html.TextBoxFor(model =&gt; model.fduration, new { id = \"plss\", style =   \"width:100px;\" })%&gt;&lt;/td&gt;     \n&lt;td&gt; &lt;button type=\"submit\" class=\"t-button\" name=\"med\" value=\"med\" id=\"clearmed\"&gt;+&lt;/button&gt;&lt;/td&gt;\n</code></pre>\n\n<p>And here's my script:</p>\n\n<pre><code>$(\"#clearmed\").click(function (event) {\n$(\"#plss\").val(\"\");\n$(\"#pls\").val(\"\");\n$(\"#abc\").val(\"\");\n$(\"#abcd\").val(\"\");\n });\n</code></pre>\n"},{"tags":["asp.net-mvc-3","razor","outputcache"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":321,"score":2,"question_id":11765190,"title":"MVC3 razor ----> Refresh OutputCache after record deleted","body":"<p>I am using OutputCaching on my Index page where a list of employee records are displayed</p>\n\n<pre><code>[OutputCache(Duration = 120, VaryByParam = \"empId;page;sort;\")]\n</code></pre>\n\n<p>But when I delete one record from the list , because of caching ,the deleted record is also is getting listed until the Outputcache  expires .\nIs there a way I can refresh the outputcache if a delete operation happens ?.\nI am using this on my MVC3 razor pages.</p>\n\n<p>I have 100's of records listed on my page and each record has a \"Delete\" button to delete that particular record.I am also using OutputCaching on the page so that the page loads faster.</p>\n\n<p>Now if I delete one record by hitting the delete button ,due to OutputCaching ,even the deleted record is also shown on the page until the outputcache expires.\nIs there a way ,I can get around with this problem?</p>\n\n<p><strong>Is there a way,I can just remove only the deleted record from my outputCache?</strong></p>\n\n<p>or If am adding a new record ,I don't want to delete the OutputCache and recreate theCache again,instead i want append my new record to existing outputCache ?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","asp.net-membership","asp.net-roles"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":243,"score":0,"question_id":11793901,"title":"ASP.NET MVC project for management Membership , Role and Profile","body":"<p>every body knows working with Membership , Roles and Profiles are common in most of ASP.NET project.</p>\n\n<p>I am looking for  a simple project to do this activity with UI for end users. like \"add user\" , \"add role\" , \"assign user to roles\" and so on.</p>\n\n<p>It's better be solution in MVC[3].</p>\n\n<p>any idea?</p>\n"},{"tags":["asp.net-mvc-3","asp.net-membership","asp.net-profiles"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":514,"score":1,"question_id":9611887,"title":"Create Membership Profile MVC 3","body":"<p>I'm creating an Admin page for my ASP.Net MVC 3 application.  I can create a new user, like this:</p>\n\n<pre><code>MembershipUser mu = Membership.CreateUser(user.UserName, user.Password);\nMembership.UpdateUser(mu);\n</code></pre>\n\n<p>I can assign roles like this:</p>\n\n<pre><code>Roles.AddUserToRole(user.UserName, \"Customer\");\n</code></pre>\n\n<p>But how do I create and attach a new profile?</p>\n\n<p><code>ProfileManager</code> has methods to Find and Delete profiles, but no method to create one.</p>\n\n<p>If it matters, I have added custom profile properties like this:</p>\n\n<pre><code>&lt;properties&gt;\n  &lt;add name=\"FirstName\" /&gt;\n  &lt;add name=\"LastName\" /&gt;\n&lt;/properties&gt;      \n</code></pre>\n\n<p>I assume that a profile is not automatically created when the user is created, because a subsequent call to</p>\n\n<pre><code>ProfileInfoCollection profiles = \n    ProfileManager.GetAllProfiles(ProfileAuthenticationOption.All);\n</code></pre>\n\n<p>returns an empty collection, while <code>Membership.GetAllUsers()</code> returns the one user I just created.</p>\n"},{"tags":["c#",".net","asp.net-mvc-3","web-applications"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":99,"score":0,"question_id":12876442,"title":"Iterate through a site relative path to find files (ASP.NET MVC 3)","body":"<p>I have a folder in my web application (ASP.NET MVC 3) which contains a set of images. I want to use a foreach loop to iterate through the folder to get the site relative paths which I can then append to an image tag.</p>\n\n<p>Example</p>\n\n<pre><code>&lt;div class=\"slides\"&gt;\n@foreach(string file in ?????)\n{\n    &lt;img src=\"@file\" alt=\"filename without extension\"&gt;\n}\n&lt;/div&gt;\n</code></pre>\n\n<p>How do I do this?</p>\n\n<p>NOTE: my current foreach loop is trying to look through a physical path and returns this error</p>\n\n<pre><code>Could not find a part of the path 'C:\\Content\\Images\\Photography\\Slides\\'.\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12875302,"title":"including another razor page","body":"<p>I'd like to know how to include another razor page in running razor view. Just as php's \"include\" term. It can be considered as partial classes. Half of work is done at a.cshtml and half of works are done at b.cshtml. But in reality two of them are build one razor page.  </p>\n\n<p>Any ideas will be appreciated...</p>\n"},{"tags":["c#","asp.net-mvc-3","image-resizing","user-profile"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1188,"score":0,"question_id":6344346,"title":"ASP.NET MVC3 resizing images for user profile","body":"<p>I want to create user profile with image. That user can upload his photo, in his profile there would be this photo and in forum there would be small image created from original photo. I have no problem with showing image but with resizing. I have this code in controller where user can change his information (name, age, ...) and can upload photo:</p>\n\n<pre><code>[HttpPost, ValidateInput(false)]\npublic ActionResult Upravit(int id, FormCollection collection, HttpPostedFileBase file)\n{\n    try\n    {\n        var user = repo.Retrieve(id);\n\n        if (TryUpdateModel(user))\n        {\n            if (file.ContentLength &gt; 0)\n            {\n                var fileName = Path.GetFileName(file.FileName);\n                var path = Path.Combine(Server.MapPath(\"~/Fotky/Profilove/\"), (user.Name.Name + \" \" + user.Name.Surname + Path.GetExtension(fileName)));\n                file.SaveAs(path);\n                user.ImagePath = \"/Fotky/Profilove/\" + user.Name.Name + \" \" + user.Name.Surname + Path.GetExtension(fileName);\n\n            }\n            repo.Save(user);\n            return RedirectToAction(\"Index\");\n        }\n        return View();\n    }\n    catch\n    {\n        return View();\n    }\n}\n</code></pre>\n\n<p>and my view looks like this:</p>\n\n<pre><code>@using (Html.BeginForm(\"Upravit\", \"Uzivatel\", FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n{\n    @Html.ValidationSummary(true)\n    &lt;fieldset&gt;\n        &lt;legend&gt;User&lt;/legend&gt;\n        @Html.HiddenFor(model =&gt; model.UserID)\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.UserName)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.UserName)\n            @Html.ValidationMessageFor(model =&gt; model.UserName)\n        &lt;/div&gt;\n        .\n        .\n        &lt;input type=\"file\" name=\"file\" id=\"file\" /&gt;\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Save\" /&gt;\n        &lt;/p&gt;\n    &lt;/fieldset&gt;\n}\n</code></pre>\n\n<p>As I said I just need help with adding code to controller which create small image from original and save it to. Thanks for any help</p>\n"},{"tags":["asp.net","asp.net-mvc-3","wcf","rest","asp.net-web-api"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":114,"score":0,"question_id":12872603,"title":"HttpResponse in Webapi controller in MVC","body":"<p>I am using Web api controller as follows:</p>\n\n<pre><code>[HttpPost]    \npublic HttpResponseMessage PostMethod(string filename)    \n{\n    Stream downloadStream = BL.method(fileName);    \n    HttpResponseMessage response = new HttpResponseMessage();    \n    response.content= new StreamContent(downloadStream);    \n    return response;    \n}\n</code></pre>\n\n<p>When I try to call the above method using fiddler I am getting an exception saying </p>\n\n<blockquote>\n  <p>'downloadStream.ReadTimeout' threw an exception of type\n  'System.InvalidOperationException'.</p>\n</blockquote>\n\n<p>Can the stream be set in response and sent? Is there any modification for the above code?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-membership","membership-provider"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12873822,"title":"Multiple membership providers, one user","body":"<p>I am learning ASP.NET MVC 3 and trying to create a web application where users can upload some data and manage it.</p>\n\n<p>Here is my problem:\nI need to associate users to data in my database therefore I need users to have unique ids. However, users need to be able to log in from multiple membership providers (sql and ldap). So I can't assume their ProviderUserKey is unique nor can I assume what type it is.</p>\n\n<p>What I need is some way to merge the users provided by the different membership providers into one user class that has unique user ids usable in my database. Can anyone give me some pointers on how to do this?</p>\n\n<p>I am new to ASP.NET MVC 3 framework, so I don't know if something like this already exist or not.</p>\n\n<p>E: I want the business logic to be oblivious to how the user logged in. It shouldn't matter to it.</p>\n"},{"tags":["asp.net-mvc-3","unit-testing","entity-framework-4.1","ef-code-first"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12863452,"title":"ASP.NET MVC 3 - Unit Test in Respository","body":"<p>I'm using a class test that checks login entity that is being done correctly, but an error occurs that does not seem to return the query in the database, but the application developed in ASP.NET MVC 3 Code First query returns data, I would to know what is wrong and what can be done to solve it.</p>\n\n<p>Upon return of the query gives the following message in the variable:\n<strong><em>\"Enumeration yielded no results\"</em></strong></p>\n\n<p>Test Method:</p>\n\n<pre><code>[TestMethod()]\npublic void efetuarLoginTest()\n{\n            EntidadeRepository target = new EntidadeRepository();\n            string cnpj = \"12345678\";\n            string senha = \"lalado\";\n            Entidade expected = null; // TODO: Initialize to an appropriate value\n            Entidade actual;\n            actual = target.efetuarLogin(cnpj, senha);\n            Assert.AreNotEqual(expected, actual);\n}\n</code></pre>\n\n<p>Method repository of the entity with the task of returning to the login query:</p>\n\n<pre><code>public Entidade efetuarLogin(string cnpj, string senha)\n        {\n\n            var consulta = from usu in bd.Entidades\n                           where usu.cnpj == cnpj &amp;&amp; usu.senha == senha\n                           select usu;\n\n            if (consulta.Count() &gt; 0)\n            {\n                Entidade e = new Entidade();\n                e.id_entidade = consulta.First().id_entidade;\n                e.razao_social = consulta.First().razao_social;\n                e.cnpj = consulta.First().cnpj;\n                e.senha = consulta.First().senha;\n\n                return e;\n            }\n            else\n            {\n                return null;\n            }\n        }\n</code></pre>\n\n<p>Class persistence database using the Entity Framework 4.1:</p>\n\n<pre><code>internal class BancoDados: DbContext\n    {\n        protected override void OnModelCreating(DbModelBuilder modelBuilder)\n        {\n            modelBuilder.Conventions.Remove&lt;System.Data.Entity.ModelConfiguration.Conventions.PluralizingEntitySetNameConvention&gt;();\n            modelBuilder.Conventions.Remove&lt;System.Data.Entity.ModelConfiguration.Conventions.PluralizingTableNameConvention&gt;();\n\n            base.OnModelCreating(modelBuilder);\n        }\n\n        public DbSet&lt;Entidade&gt; Entidades { get; set; }\n        public DbSet&lt;Estado&gt; Estados { get; set; }\n        public DbSet&lt;Administrador&gt; Administradores { get; set; }\n        public DbSet&lt;Leilao&gt; Leiloes { get; set; }\n        public DbSet&lt;Lance&gt; Lances { get; set; }\n    }\n</code></pre>\n\n<p>Thank You.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":81,"score":0,"question_id":12871092,"title":"Can I user Enums inside my Razor views?","body":"<p>I have the following Enum:</p>\n\n<pre><code>namespace Storage.Constants.References { \n    public enum RoleType {\n        Guest = 1,\n        User = 2,\n        Admin = 3,\n        Super = 4\n    } \n}\n</code></pre>\n\n<p>The following viewmodel:</p>\n\n<pre><code>public class   BaseViewModel\n{\n    public int Role { get; set; }\n}\n</code></pre>\n\n<p>In my code I have the following. Note that the Enum is recognized by the code. </p>\n\n<pre><code>@if (Model.Role &gt;= RoleType.Admin) {\n   xx\n}\n</code></pre>\n\n<p>My code fails at runtime with the following message:</p>\n\n<p>error CS0019: Operator '>=' cannot be applied to operands of type 'int' and 'Storage.Constants.References.RoleType'</p>\n"},{"tags":["asp.net-mvc-3","dataannotations","partial-views","custom-attributes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":187,"score":0,"question_id":12863589,"title":"MVC3 custom server-side data annotation validation not working in partial view","body":"<p>I am trying to add custom data validation via data annotations.  I am only concerned about server-side validation at this point.  Everything I have seen here and elsewhere references client-side validation.  I've stripped down all my code, ran a few test cases and I can get this working just fine on a regular view but as soon as the form is in a partial view, the code no longer breaks in the method to override IsValid.</p>\n\n<p>In either case I can see the custom attribute being initialized.  When the form is in a regular view I can see the override method being executed upon submitting the form, but when in a partial view the code never gets executed and it goes right to the HttpPost action.</p>\n\n<p>I have spent the better parts of two days trying to figure this out and am at a loss.  Any help would be GREATLY appreciated.</p>\n\n<p>Note:\nThe code below does return the same view when it enters the HttpPost action.  I have it like this for testing purposes.  I know my override is never getting called from the partial view and thus IsValid is always true.</p>\n\n<p>View showing form where the validation works</p>\n\n<pre><code>@model eRecruitBoard.ViewModels.HomeIndexViewModel\n@{\n    ViewBag.Title = \"eRecruitBoard\";\n}\n@*&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;*@\n\n&lt;h2&gt;Login/homepage&lt;/h2&gt;\n\n&lt;br /&gt;&lt;br /&gt;\n &lt;div class=\"errorMessage\"&gt;\n @Html.DisplayFor(m =&gt; m.LoginErrorMsg)\n&lt;/div&gt;\n&lt;br /&gt;\n\n@using (Html.BeginForm(\"Index\", \"Home\")) {\n    &lt;div id=\"loginControlBox\"&gt;\n        &lt;fieldset&gt;\n            &lt;legend&gt;Welcome to eRecruitBoard&lt;/legend&gt; \n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.UserName)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.TextBoxFor(m =&gt; m.UserName)\n                @Html.ValidationMessageFor(m =&gt; m.UserName)\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.Password)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.PasswordFor(m =&gt; m.Password)\n                @Html.ValidationMessageFor(m =&gt; m.Password)\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.CheckBoxFor(m =&gt; m.RememberMe)\n                @Html.LabelFor(m =&gt; m.RememberMe)\n            &lt;/div&gt;\n            &lt;div class=\"editor-label\"&gt;\n                @Html.EditorFor(m =&gt; m.Date)\n                @Html.ValidationMessageFor(m =&gt; m.Date)\n            &lt;/div&gt;\n            &lt;p&gt;\n                &lt;input type=\"submit\" value=\"Log In\" /&gt;\n            &lt;/p&gt;\n        &lt;/fieldset&gt;\n    &lt;/div&gt;\n}\n    &lt;div&gt;\n        @Html.Action(\"BlankForm\", \"TestForm\")\n    &lt;/div&gt;\n</code></pre>\n\n<p>Partial View (these script calls also come in via _Layout, but I had them here for testing as well)</p>\n\n<pre><code>@model eRecruitBoard.ViewModels.TestFormViewModel\n\n    &lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftAjax.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;    \n    &lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftMvcAjax.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftMvcValidation.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n@using (Html.BeginForm(\"NewActivity2\", \"TestForm\", FormMethod.Post))\n{\n&lt;fieldset&gt;\n    &lt;legend&gt;Test Form&lt;/legend&gt;\n    &lt;br /&gt;\n    @Html.LabelFor(m =&gt; m.Date)\n    @Html.EditorFor(m =&gt; m.Date)\n    @Html.ValidationMessageFor(m =&gt; m.Date)\n    &lt;input id=\"activityTimelineSubmit\" type=\"submit\" value=\"Submit\" /&gt;\n&lt;/fieldset&gt;\n}\n</code></pre>\n\n<p>ViewModel (for partial view)</p>\n\n<pre><code>namespace eRecruitBoard.ViewModels\n{\n    public class TestFormViewModel\n    {\n        [Required]\n        [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = \"{0:MM/dd/yyyy}\")]\n        [NonFutureDate()]\n        [Display(Name = \"Date\")]\n        public DateTime Date { get; set; }\n    }\n}\n</code></pre>\n\n<p>Controller (for partial view)</p>\n\n<pre><code>namespace eRecruitBoard.Controllers\n{\n    public class TestFormController :BaseController\n    {\n        public ActionResult BlankForm()\n        {\n            var viewModel = new TestFormViewModel\n            {\n                Date = DateTime.Today\n            };\n\n            return PartialView(\"_TestForm\", viewModel);\n        }\n\n        [HttpPost]\n        public ActionResult NewActivity2(DateTime Date)\n        {\n            if (!ModelState.IsValid)\n                return RedirectToAction(\"Index\", \"Home\");\n            else\n                return RedirectToAction(\"Index\", \"Home\");\n        }\n    }\n}\n</code></pre>\n\n<p>Validation code</p>\n\n<pre><code>using System;\nusing System.ComponentModel.DataAnnotations;\n\nnamespace eRecruitBoard.WebLibrary.Validation\n{\n    [AttributeUsageAttribute(AttributeTargets.Class | AttributeTargets.Method | AttributeTargets.Property | AttributeTargets.Field | AttributeTargets.Parameter, AllowMultiple = false, Inherited = true)]\n    public class NonFutureDateAttribute : ValidationAttribute  //public sealed class \n    {\n        public NonFutureDateAttribute(): base(\"Activity can only be saved for today or dates in the past.\")\n        {\n        }\n        public override bool IsValid(object value)\n        {\n            DateTime dateToCheck = (DateTime)value;\n            return (dateToCheck &lt;= DateTime.Today);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["c#",".net","asp.net-mvc-3","blogs","forum"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12871870,"title":"Looking for MVC3/4 Blog, Forum and Client Area","body":"<p>Im looking for a Blog and Forum engine that uses MVC 3 or 4. Im looking for something like <a href=\"http://umbraco.org/\" rel=\"nofollow\">Umbraco</a> which allow you to bolt on various addons like blogs and forums. Basically some sort of client area.</p>\n\n<p>Preferably i would like something thats opensource but im also willing to pay for the right tool. Does anyone have anything in mind?</p>\n\n<p>I have looked at sepparate tools like <a href=\"http://www.orchardproject.net/\" rel=\"nofollow\">Orchard</a> and MVC Forum but it seems like it will be extra work to get both things setup.</p>\n\n<p>If there is nothing like this out there whats the fastest way I can get all this functionality into a website, and be able to add some of my own functionality?</p>\n"},{"tags":["asp.net-mvc-3","validation","collections","modelstate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":101,"score":0,"question_id":12869588,"title":"MVC matching ModelState keys to ViewModel collection","body":"<p>Is it possible to match a ViewModel property to the matching ModelState.Key value when the ViewModel is a (has a) collection?</p>\n\n<p>Example: To edit a collection of viewmodel items, I am using the <a href=\"http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/\" rel=\"nofollow\">extension found here</a>.</p>\n\n<p>That adds a GUID to the id of the fields on the page.</p>\n\n<p>example:</p>\n\n<pre><code>class Pets\n{\n    string animal;\n    string name;\n}\n</code></pre>\n\n<p>For a list of Pets, the generated html source is like this:</p>\n\n<pre><code>&lt;input name=\"Pets.index\" autocomplete=\"off\" value=\"3905b306-a9...\" type=\"hidden\"&gt;\n&lt;input value=\"CAT\" id=\"Pets_3905b306-a9...__animal\" name=\"Pets[3905b306-a9...].animal\" type=\"hidden\"&gt;\n&lt;input value=\"MR. PEPPERS\" id=\"Pets_3905b306-a9...__name\" name=\"Pets[3905b306-a9...].name\" type=\"hidden\"&gt;\n\n\n&lt;input name=\"Pets.index\" autocomplete=\"off\" value=\"23342306-b4...\" type=\"hidden\"&gt;\n&lt;input value=\"DOG\" id=\"Pets_23342306-b4...__animal\" name=\"Pets[23342306-b4...].animal\" type=\"hidden\"&gt;\n&lt;input value=\"BRUTICUS\" id=\"Pets_23342306-b4...__name\" name=\"Pets[23342306-b4...].name\" type=\"hidden\"&gt;\n</code></pre>\n\n<p>So when this gets bound on post, the ModelState gets loaded with all the form fields.\nIn ModelSTate.Keys, there is:</p>\n\n<pre><code>Pets[23342306-b4...].name\nPets[23342306-b4...].animal\nPets[3905b306-a9...].name\nPets[3905b306-a9...].animal\n</code></pre>\n\n<p>Everything good so far, but I am doing some business logic validation, things like, cant add new animal if one exists with the same name. In that case, I want to be able to highlight the input field  that is in error.</p>\n\n<p>So if my create function fails, it will return an error/key value pair like this:</p>\n\n<pre><code>{ error = \"Duplicate Name\", key=\"name\" }\n</code></pre>\n\n<p>So I at least will now what property caused the problem.</p>\n\n<p>But since my repository functions don't know about the view field ids, how can I match the key \"name\" to the appropriate ModelState key (in this case, either Pets[23342306-b4...].name or Pets[3905b306-a9...].name)?</p>\n"},{"tags":["asp.net-mvc-3","entity-framework-4.1","lazy-loading"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":834,"score":1,"question_id":7496076,"title":"Entity Framework 4.1 code-first, required lazy load reference is null on save","body":"<p>I'm building a forum project for ASP.NET MVC 3, running on .NET 4 with the latest version of Entity Framework.</p>\n\n<p>I have the usual forum design, with a Board with Categories, and Categories with Forums, Forums with Topics and Topics with Posts etc.</p>\n\n<p>Simplified:</p>\n\n<pre><code>public class Category {\n    [Required]\n    public virtual Board Board { get; set; }\n}\npublic class Forum {\n    [Required]\n    public virtual Category Category { get; set; }\n}\npublic class Topic {\n    [Required]\n    public virtual Forum Forum { get; set; }\n}\npublic class Post {\n    [Required]\n    public virtual Topic Topic { get; set; }\n}\n</code></pre>\n\n<p>When a new post is created the topic is informed, and when a topic is changed, the forum is informed.</p>\n\n<p>So, again simplified:</p>\n\n<pre><code>public class Forum {\n    public void TopicChanged(Topic topic) {\n        // Do stuff\n    }\n}\npublic class Topic {\n    public void PostAdded(Post post) {\n        // Do stuff\n        this.Forum.TopicChanged(this);\n    }\n}\n</code></pre>\n\n<p>So after creating a new Post (and committing it to the database), I call PostAdded on the parent topic. Now this is where it get odd!</p>\n\n<p>When I commit the changes to my repositories, I get a validation error, Category on Forum is required.</p>\n\n<p>If I look in the database, the Forum has a reference to the parent Category. If I stop the code and looks at the Forum object, it has a Category instance. So this looks like an issue with lazy loading, especially because if I add this line:</p>\n\n<pre><code>var cat = this.Category\n</code></pre>\n\n<p>At the bottom of the TopicChanged method in the Forum class, there's no longer any errors.</p>\n\n<p>Am I doing something totally wrong here, have I run into a borderline issue, or what is going on? I figured EF would see that the reference is a lazy loaded reference, and if it hasn't been changed, there's no reason why this should fail on save???</p>\n\n<p>Thanks,\nSteen</p>\n"},{"tags":["asp.net","asp.net-mvc-3","file-upload"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":125,"score":0,"question_id":8588487,"title":"Images folder in separate applications","body":"<p>I have a web application with an admin panel. The admin panel is a webform project and I also have an MVC project to list products inserted in admin panel. But when I upload images to ProductImgs folder in webform project, how can I get them from MVC project? Or can I save them to the MVC project folder?</p>\n"},{"tags":["jquery","asp.net","asp.net-mvc-3","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":428,"score":1,"question_id":12161527,"title":"how to pass data between two kendo UI window controls","body":"<p>I have two kendo UI window controls. First (parent) window to get the customer details, along with search button. Second (child) window to search the customer using customer firstname, lastname etc.. </p>\n\n<p>Search result will shown in grid control of child window, like </p>\n\n<blockquote>\n  <p>Title FirstName LastName Address1 Subrub<br>\n  Mr John Karter Goyal garden, NSW<br>\n  Miss Emile Watson Garden brown, VC</p>\n</blockquote>\n\n<p>If i choose any customer in the grid, i need to populate the customer details in the corresponding controls of first (parent) window. So i call js function on change event as below</p>\n\n<pre><code>@(Html.Kendo().Grid((IEnumerable&lt;OnlineABThemes.Data.GetCustomers_Result&gt;)ViewData[\"CustomerSearchGrid\"])\n    .Name(\"ChildWindowCustomerGrid\")\n    .Columns(columns =&gt; {\n        columns.Bound(p =&gt; p.ID).Visible(false);\n        columns.Bound(p =&gt; p.Title).Width(60);\n        columns.Bound(p =&gt; p.FirstName).Width(130);\n        columns.Bound(p =&gt; p.LastName).Width(100);\n        columns.Bound(p =&gt; p.Address1).Width(150);\n        columns.Bound(p =&gt; p.Suburb).Width(80);\n        columns.Bound(p =&gt; p.State).Width(80);\n        columns.Bound(p =&gt; p.PostCode).Width(120);\n        columns.Bound(p =&gt; p.Phone).Width(100);\n        columns.Bound(p =&gt; p.Mobile).Width(100);\n        columns.Bound(p =&gt; p.Email).Width(120);\n    })\n    .Sortable()\n    .Scrollable()\n    .Filterable()\n    .DataSource(ds =&gt; ds.Server()\n    .Model(model =&gt; model.Id(p=&gt;p.ID))\n)\n.Selectable(s=&gt;s.Mode(GridSelectionMode.Single))\n.Events(events =&gt; events.Change(\"CustomerChanged\"))\n)\n</code></pre>\n\n<p>Here is my js function</p>\n\n<pre><code>function CustomerChanged() {\n    var grid = $('#ChildWindowCustomerGrid').data('kendoGrid');\n    var customerID = grid.select(\"ID\");\n\n    $.ajax({&lt;br&gt;\n        url: \"/Customer/GetCustomer\",\n        type: \"POST\",\n        data: { customerId: customerID }\n    })\n\n    $(\"#childWindow\").data(\"kendoWindow\").close();\n    .fail(function (r, o) {\n        alert(\"Failed : \" + r.responseText);\n    });\n}\n</code></pre>\n\n<p>I unable to get the customerID and how to fill the customer details which is in First (parent) window. ie,l how to fill customer details by passing customerID from one window to another window.</p>\n\n<p>thanks<br>\nSanthosh</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","client-side-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":694,"score":2,"question_id":5328254,"title":"how to Disable permanently mvc client validation for specific fields?","body":"<p>in my MVC3 application, I've a form with 2 dropdownlists that aren't required. So, I haven't added any annotation to the related attributes on the partial class. Viewing the html code generated when I add a new object, no client validation code is added and all goes fine. The problem rises when I try to modify an object that has values on attributes related with the dropdownlists because automatically is added this code </p>\n\n<blockquote>\n  <p>data-val=\"true\" data-val-number=\"The field IDCategory must be a number.\" data-val-required=\"The IDCategory field is required.\" id=\"ddlCategory\" name=\"List.Category.IDCategory\"</p>\n</blockquote>\n\n<p>So, if on this object I try to set no value on the dropdownlists and after submit the form, it is fired the validation error.\nI think that the solution are 2:</p>\n\n<ul>\n<li>Add some annotation on the related attribute to always avoid the generation of validation code</li>\n<li>Add an attribute to the object in the view (like the cancel class on the buttons, I tried to add to them, but it doesn't works)</li>\n</ul>\n\n<p>Thanks in advance!</p>\n"},{"tags":["c#","asp.net-mvc-3","nunit","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":129,"score":2,"question_id":12850299,"title":"Mocking HttpContext.Current using moq on NUnit Test","body":"<p>I am testing an MVC 3 controller that calls methods on this class:</p>\n\n<pre><code>public class SessionVar\n{\n    /// &lt;summary&gt;\n    /// Gets the session.\n    /// &lt;/summary&gt;\n    private static HttpSessionState Session\n    {\n        get\n        {\n            if (HttpContext.Current == null)\n                throw new ApplicationException(\"No Http Context, No Session to Get!\");\n\n            return HttpContext.Current.Session;\n        }\n    }\n\n    public static T Get&lt;T&gt;(string key)\n    {\n        return Session[key] == null ? default(T) : (T)Session[key];\n    }\n    ...\n}\n</code></pre>\n\n<p>My test method, following recommendations from <a href=\"http://www.hanselman.com/blog/ASPNETMVCSessionAtMix08TDDAndMvcMockHelpers.aspx\" rel=\"nofollow\" title=\"Hanselman's blog\">Hanselman's Blog</a> is:</p>\n\n<pre><code>    [Test]\n    public void CanRenderEmployeeList()\n    {\n\n        _mockIEmployeeService.Setup(s =&gt; s.GetEmployees(StatusFilter.OnlyActive))\n            .Returns(BuildsEmployeeList().Where(e =&gt; e.IsApproved));\n\n        var httpContext = FakeHttpContext();\n        var target = _employeeController;\n        target.ControllerContext = new ControllerContext(new RequestContext(httpContext, new RouteData()), target);\n        var result = target.Index();\n\n        Assert.IsNotNull(result);\n        Assert.IsInstanceOf&lt;ViewResult&gt;(result);\n\n        var viewModel = target.ViewData.Model;\n        Assert.IsInstanceOf&lt;EmployeeListViewModel&gt;(viewModel);\n    }\n\n    public static HttpContextBase FakeHttpContext()\n    {\n        var context = new Mock&lt;HttpContextBase&gt;();\n        var request = new Mock&lt;HttpRequestBase&gt;();\n        var response = new Mock&lt;HttpResponseBase&gt;();\n        var session = new Mock&lt;HttpSessionStateBase&gt;();\n        var server = new Mock&lt;HttpServerUtilityBase&gt;();\n\n        context.Setup(ctx =&gt; ctx.Request).Returns(request.Object);\n        context.Setup(ctx =&gt; ctx.Response).Returns(response.Object);\n        context.Setup(ctx =&gt; ctx.Session).Returns(session.Object);\n        context.Setup(ctx =&gt; ctx.Server).Returns(server.Object);\n\n        return context.Object;\n    }\n</code></pre>\n\n<p>But my test keeps failing, I get:</p>\n\n<pre><code>CanRenderEmployeeListSystem.ApplicationException : No Http Context, No Session to Get!\n</code></pre>\n\n<p>Which is the Exception message to be thrown when HttpContext.Current == null. </p>\n\n<p>I just need the Session object to 'exist', not the actual values stored on the Session.</p>\n\n<p>Can you tell me what am I doing wrong?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc-3","modelbinding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12865424,"title":"Model binding for mvc3 to edit form data on the same view","body":"<p>I am new to MVC3 and after 2 days of reading, I cannot find what I am doing wrong. \nHere is the scenario:</p>\n\n<p>I have a strongly typed view:</p>\n\n<pre><code>&lt;%@ Page Title=\"\" Language=\"C#\" \nMasterPageFile=\"~/Views/Shared/NestedMasterPage.Master\"    \nInherits=\"System.Web.Mvc.ViewPage&lt;AdminToolMVC.Models.PageModels.MembershipVM&gt;\" %&gt;\n\n&lt;% using (Html.BeginForm(\"UpdateUser\", \"Admin\")) \n{ %&gt;\n   &lt;%: Html.CheckBoxFor(m =&gt; m.Tab6VM.Programs[0].Selected, \n      new { id = \"prog1\" })%&gt;\n   &lt;%: Model.Tab6VM.Programs[0].Description %&gt;&lt;/br&gt;\n   &lt;%: Html.CheckBoxFor(m =&gt; m.Tab6VM.Programs[1].Selected, \n      new { id = \"prog2\" })%&gt;\n   &lt;%: Model.Tab6VM.Programs[1].Description %&gt;&lt;/br&gt;\n   &lt;%: Html.CheckBoxFor(m =&gt; m.Tab6VM.Programs[2].Selected, \n     new { id = \"prog3\" })%&gt;\n   &lt;%: Model.Tab6VM.Programs[2].Description %&gt;&lt;/br&gt;\n   &lt;%: Html.CheckBoxFor(m =&gt; m.Tab6VM.Programs[3].Selected, \n     new { id = \"prog4\" })%&gt;\n   &lt;%: Model.Tab6VM.Programs[3].Description %&gt;&lt;/br&gt;\n   &lt;input type=\"submit\" id=\"btnUpdate\"  value=\"Update\"  /&gt;\n&lt;%} %&gt;\n</code></pre>\n\n<p>In my admin controller:</p>\n\n<pre><code>public ActionResult Index()\n{\n     //return some view\n}\n\n[HttpPost]\n    public ActionResult UpdateUser(MembershipVM pageModel)  \n    {\n        UserAdminDW dataWriter;\n        Models.PageModels.MembershipVM = \n          new  Models.PageModels.MembershipViewModel();\n        try\n        {\n            model = StateHelper.MEMBERSHIP;\n        }\n        catch (Exception e)\n        {\n\n            return RedirectToAction(\"SessionExpired\", \"Error\");\n        }\n    }\n</code></pre>\n\n<p>I was under the impression that my strongly typed view page should send the the data that the user is changing inside the form to the UpdateUser method in my AdminController class.</p>\n\n<p>But instead, I am getting the \"no parameterless constructor defined for this object.\" error.</p>\n\n<p>I tried to add a parameter to the controller call from within the view, but the page model that comes through to the controller is null. All I want to do is after displaying the user data on the page, enable the user to update some of the information and send it back to the controller, so I can save it in the database. What am I missing?  I am not using Razor engine, only the classic MVC3. Thanks for the help.</p>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12861305,"title":"Grabbing current DateTime using EF MVC","body":"<p>I want to apply a timestamp to my Entity Framework project. I have a class listed below. I hoped that this class would grab the current DateTime. But instead it provides me a field to enter my datetime. I want this to grab the current datetime.</p>\n\n<pre><code> public class Answer\n    {\n        public int ID { get; set; }\n        public string Answers {get; set;}\n        public System.DateTime DateCreated { get; set; }\n        public string Division { get; set; }\n        public string Phone { get; set; }\n        public string Description { get; set; }\n\n\n\n    }\n</code></pre>\n\n<p>Below is the line of code that i know is wrong. </p>\n\n<pre><code>public System.DateTime DateCreated { get; set; }\n</code></pre>\n\n<p>i am a little unsure of how to go about this. I am new to entity and new to MVC.  Any help would be greatly appreciated. </p>\n"}]}
{"total":29155,"page":14,"pagesize":100,"questions":[{"tags":["sql-server","asp.net-mvc-3","connection-string","edmx"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":33,"score":-1,"question_id":12867499,"title":"Change connection string to remote production server causes error","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3491165/the-specified-named-connection-is-either-not-found-in-the-configuration-not-int\">The specified named connection is either not found in the configuration, not intended to be used with the EntityClient provider, or not valid</a>  </p>\n</blockquote>\n\n\n\n<p>I'm having a hard time trying to connect a SQL Server 2000 database from an ASP.NET MVC3 app in the production server.</p>\n\n<p>To test the connection I tried the connection from my local web server but when I changed the connection string in web.config to the remote sql server I get this error:</p>\n\n<blockquote>\n  <p><em>The specified named connection is either not found in the\n  configuration, not intended to be used with the EntityClient provider,\n  or not valid.</em></p>\n</blockquote>\n\n<p>Do you know what this is about?\nThanks in advance!</p>\n\n<p>Let me clarify because it's not the same as the topic mentioned. The edmx file is in the web application and not in a different project. All I did was change the server and credentials to the production server.</p>\n"},{"tags":["asp.net-mvc-3","backbone.js","twitter-bootstrap","jquery-validation-plugin","unobtrusive-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":430,"score":1,"question_id":12834358,"title":"Fire jquery unobtrusive validation with bootstrap , Asp.net Mvc 3 and backbone","body":"<p>I tried to find the bits of information available on the net, But couldn't hook it up together. I have an application which makes use of a login page. Now I'm not binding the view to any model. However I have two inputs (Username and password). I want to fire the jquery unobtrusive validation feature that comes with Asp.net Mvc. Here are the samples: </p>\n\n<p>Backbone Template with Twitter bootstrap which is the Login template (underscore templating engine).</p>\n\n<pre><code>@using (@Html.BeginForm(\"Login\", \"Home\", FormMethod.Post, new { @class = \"form-horizontal\" }))\n               {\n               &lt;div class=\"modal-body\"&gt;\n                   &lt;div class=\"control-group\"&gt;\n                        &lt;label class=\"control-label\" for=\"inputEmail\"&gt;Email&lt;/label&gt;\n                        &lt;div class=\"controls\"&gt;\n                            @*&lt;input type=\"text\" id=\"inputEmail\" placeholder=\"Email\"&gt;*@\n                            @Html.TextBox(\"Email\", \"\", new { @placeholder = \"Email\" })\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"control-group\"&gt;\n                        &lt;label class=\"control-label\" for=\"inputPassword\"&gt;Password&lt;/label&gt;\n                        &lt;div class=\"controls\"&gt;\n                            &lt;input type=\"password\" id=\"inputPassword\" placeholder=\"Password\"&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"control-group\"&gt;\n                    @*&lt;div class=\"controls\"&gt;\n                        &lt;label class=\"checkbox\"&gt;\n                            &lt;input type=\"checkbox\"&gt; Remember me\n                        &lt;/label&gt;\n                        &lt;button type=\"submit\" class=\"btn\"&gt;Sign in&lt;/button&gt;\n                    &lt;/div&gt;*@\n                &lt;/div&gt;\n             &lt;/div&gt;\n               &lt;div class=\"modal-footer\"&gt;\n                    @*&lt;a class=\"btn\" href=\"#\" id=\"closeBtn\"&gt;Close&lt;/a&gt;*@ &lt;button type=\"submit\" class=\"btn btn-primary\" &gt;Login&lt;/button&gt;\n               &lt;/div&gt;\n               }  \n</code></pre>\n\n<p>The Coffeescript for Login view</p>\n\n<pre><code>require ['backbone','bootstrap','jqValUnobtrusive'],(Backbone) -&gt;   \nclass LoginView extends Backbone.View\n\n    el:$(\"#content\")        \n\n    initialize: -&gt;                      \n        @render()\n        @validationOptions = @options.validationOptions\n\n    validationOptions:\n        rules:\n            'Email':\n                required:true\n            'user[password]':\n                required:true\n    close:-&gt;\n        console.log \"hello\"\n    render : -&gt;     \n        $(@el).find(\"#login\").html _.template $(\"#loginTemplate\").html() \n\nApp = new LoginView\n</code></pre>\n\n<p>And My controller to add Server side logic to validation rule in absence of javascript from the browser </p>\n\n<pre><code>[HttpPost]\n    [ValidateInput(true)]\n    public ActionResult Login(FormCollection Form)\n    {\n        ViewBag.Message = \"Method posted\";\n        if (Form[\"Email\"] == string.Empty)\n        {\n            ModelState.AddModelError(\"Email\", \"Please Provide a Username\");\n            ModelState.SetModelValue(\"Email\", ValueProvider.GetValue(\"Email\"));\n\n        }\n        return View();\n    }\n</code></pre>\n\n<p>Would someone be able to shine some light on this problem? How to put the twitter bootstrap validation messages with this jquery unobtrusive code to show the errors? Or extend the jquery unobtrusive validation plugin to work with twitter bootstrap / backbone to perform the validation? </p>\n\n<p>My criteria is the username and password shouldn't be NULL or blank . A simple case for study for validating a form without model binding (I dont want to bind the Login page to any model). Rather hook up the jquery unobtrusive plugin with extending backbone and twitter bootstrap styling! </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12866527,"title":"Ckfinder duplicate assembly error in mvc3","body":"<p>I'm trying to add ckfinder to ckeditor for uploading image. When I first built my project I got a System.Web.UI error, and added System.Design from .NET to references. That solved the first error but this time I get:</p>\n\n<pre><code>Error   14  Duplicate 'AssemblyCompany' attribute   C:\\Users\\Projects\\Documents\\Visual Studio 2010\\Projects\\MvcApplication6\\MvcApplication6\\Properties\\AssemblyInfo.cs  11  12  MvcApplication6\n</code></pre>\n\n<p>How can I fix this error ?</p>\n"},{"tags":["c#",".net","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12866613,"title":"@Html.RadioButtonFor and Editing?","body":"<p>the <code>@Html.RadioButtonFor</code> always confuses me right now I have in a ViewModel a property of an enum(lets say DayOfWeek as it is built in)</p>\n\n<pre><code>public class VM\n{\n    public DayOfWeek  SelectedDayOfWeek { get; set; }\n}\n</code></pre>\n\n<p>in my view I have</p>\n\n<pre><code>@Html.RadioButtonFor(x =&gt; x.Vm.SelectedDayOfWeek,false, new {@id = \"Sun\"})\n@Html.RadioButtonFor(x =&gt; x.Vm.SelectedDayOfWeek,false, new {@id = \"Mon\"})  \n</code></pre>\n\n<p>Now this works but how do I get it to work for editing. For instance they want to edit the day of week they set. I want to show them which option they choose. </p>\n\n<p>How could I do this. As you see right now it is hardcoded to false.</p>\n\n<p>Don't really want to do this</p>\n\n<pre><code>   @Html.RadioButtonFor(x =&gt; x.Vm.SelectedDayOfWeek,@SelectedSunValue, new {@id = \"Sun\"})\n    @Html.RadioButtonFor(x =&gt; x.Vm.SelectedDayOfWeek,@SelectedMonValue, new {@id = \"Mon\"})\n</code></pre>\n"},{"tags":["ajax","asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":152,"score":2,"question_id":12866144,"title":"JQuery Load using MVC3 @Url.Action does not pass parameters properly","body":"<p>I noticed that doing <code>@Url.Action(\"myAction\", new { param1 = 123, param2 = 456})</code> provides me with an invalid URL <code>Home/myAction?param1=123&amp;amp;param2=456</code>. </p>\n\n<p>I am attempting to do</p>\n\n<pre><code>$(\"#myAjaxDiv\").load(url);\n</code></pre>\n\n<p>But only <code>param1</code> is getting populated in the action method.</p>\n\n<p>When I remove the <code>&amp;amp;</code> and make it just <code>&amp;</code> then it works, but doing a string replace is super hacky.</p>\n\n<pre><code>url = url.replace(\"&amp;amp;\", \"&amp;\");\n</code></pre>\n\n<p>Am I missing something here?</p>\n\n<p><em>EDIT:</em> Per request I'm including some of my sample app. (you can create a new MVC app and just add these quickly and see for yourself)</p>\n\n<p>Controller:</p>\n\n<pre><code>public ActionResult AjaxTest(int? year, int? month)\n{\n    ViewBag.Message = string.Format(\"Year: {0}, Month: {1}\", year.HasValue ? year.ToString() : \"no year\", month.HasValue ? month.ToString() : \"no month\");\n    return PartialView(\"AjaxTest\");\n}\n</code></pre>\n\n<p>AjaxTest View:</p>\n\n<pre><code>@ViewBag.Message\n</code></pre>\n\n<p>Index View:</p>\n\n<pre><code>&lt;script&gt;\n    $(function () {\n        var url=\"\";\n        $(\"#noParams\").click(function () {\n            url = \"Home/AjaxTest\";\n            $(\"#ajaxy\").load(url)\n            $(\"#url\").text(url);\n        });\n        $(\"#yearParam\").click(function () {\n            url = \"Home/AjaxTest?year=2012\";\n            $(\"#ajaxy\").load(url)\n            $(\"#url\").text(url);\n        });\n        $(\"#yearAndMonthParam\").click(function () {\n            url = \"Home/AjaxTest?year=2012&amp;month=10\";\n            $(\"#ajaxy\").load(url)\n            $(\"#url\").text(url);\n        });\n\n        $(\"#generated\").click(function () {\n            url = \"@(Url.Action(\"AjaxTest\", new { year=2012, month=10}))\";\n            $(\"#ajaxy\").load(url);\n            $(\"#url\").text(url);\n        });\n\n    });\n&lt;/script&gt;\n\n&lt;a id=\"noParams\" href=\"#\"&gt;No Params&lt;/a&gt; &lt;br /&gt;\n&lt;a id=\"yearParam\" href=\"#\"&gt;Year Param&lt;/a&gt; &lt;br /&gt;\n&lt;a id=\"yearAndMonthParam\" href=\"#\"&gt;Year and Month Param&lt;/a&gt; &lt;br /&gt;\n&lt;a id=\"generated\" href=\"#\"&gt;Generated&lt;/a&gt; &lt;br /&gt;\n&lt;div id=\"ajaxy\"&gt;\n\n&lt;/div&gt;\n\n&lt;div&gt;\nURL: &lt;span  id=\"url\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","html.dropdownlistfor"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":80,"score":2,"question_id":12866080,"title":"MVC3 Html.DropDownListFor with both static and dynamic values","body":"<p>I'd like to populate a Html.DropDownListFor with both static and dynamic values in my controller.  I can't seem to figure out how to make this work.  I've tried a few different approaches, but most center around (1) define the static values in a variable, (2) try to append the dynamic values (3) pass all values via the viewModel to my partial view.</p>\n\n<p>Here is a sample of the above approach.</p>\n\n<pre><code>//retrieve categories from DB\nList&lt;Category&gt; categoryFromDb = new GetCategory().GetCategoryDropdownList(MySession.Current.AccountId).FindAll(c =&gt; c.StageId == currentStage);\n\n//local variable with static values and trying to add the dynamic values from above\n    var categoryDropDown = new [] {\n                                      new {CategoryId = \"\", CategoryName = \"Select Activity\"},\n                                      new {CategoryId = \"0\", CategoryName = \"Note\"},\n                                      new {CategoryId = categoryFromDb[0], CategoryName = categoryFromDb[3]}  //THIS IS THE LINE I CAN'T FIGURE OUT\n                                  };\n\n    var viewModel = new ActivityTimelineViewModel\n    {\n        ActivityTimeline = new GetActivity().GetActivityTimeline(MySession.Current.AccountId, MySession.Current.CandidateId),\n        CategoryList = categoryDropDown,\n        Date = DateTime.Today\n    };\n</code></pre>\n\n<p>I'm sure given my novice ability I am missing something simple.\n-Tim</p>\n"},{"tags":["jquery","asp.net-mvc-3","user-interface","formatting","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":116,"score":0,"question_id":12865190,"title":"kendo ui: how to do default sorting, phone number formatting and replace the word null to none","body":"<p>in my code, i want to do the gird table with default sorting by last name ascending, phone number formatting with (xxx)-xxx-xxxx and replace the word null to none,for example some mobiel number is null, i want to display as none </p>\n\n<pre><code>{\n                    field: \"LName\",\n                    width: 100,\n                    title: \"Last Name\",\n                    defaultSorting: true\n\n                }, {\n                    field: \"DateOfBirth\",\n                    width: 100,\n                    title: \"Date of Birth\",\n                    type: 'date',\n                    template: '#= kendo.toString(DateOfBirth,\"MM/dd/yyyy\") #'\n\n                }, {\n                    field: \"Email\",\n                    width: 230,\n                    title: \"Email\"\n                }, {\n                    field: \"MobileNumber\",\n                    width: 100,\n                    title: \"Mobile Number\"\n\n\n                },\n</code></pre>\n\n<p>any one done this before, or have idea plz help </p>\n"},{"tags":["asp.net-mvc-3","nhibernate","web-applications","hosting","pool"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":294,"score":0,"question_id":10767540,"title":"how to know is application pool memory enough?","body":"<p>I'm thinkin to use shared hosting which have application pool of 200MB. Before I buy this service I need to know how much memory my app actually consuming. </p>\n\n<p>And what happens when that application pool size iz reached. With having nhibernate mvc3 applications in mind when sessionFactory is build it should stay in application pool memory and after pool is reached this session factory should be created again. Correct me if wrong.</p>\n\n<p>cheers</p>\n"},{"tags":[".net","json","asp.net-mvc-3","stream","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":154,"score":0,"question_id":12863311,"title":"Web api controller method giving exception while serializing the Stream object","body":"<p>I have a web api controller method as follows:</p>\n\n<pre><code>[HttpPost]\npublic string PostMethod(int id)\n{\n  Stream downloadStream = Service.downloadStream(id);  \n  JavaScriptSerializer jsonSerializer = new JavaScriptSerializer();\n  string output  = jsonSerializer.Serialize(downloadStream);\n}\n</code></pre>\n\n<p>I am calling this method from java applet with url as:</p>\n\n<pre><code>http://localhost1/api/PostMethod/1\n</code></pre>\n\n<p>I get an exception in line number 3  saying as:</p>\n\n<p>\"timeouts are not supported on this stream,The 'ObjectContent`1' \ntype failed to serialize the response body for content type 'application/json;\n charset=utf-8'.\"</p>\n\n<p>What could be the possible solution for this?How to send the stream through Webapi controller method as JSON object?</p>\n"},{"tags":["c#","javascript","asp.net-mvc","asp.net-mvc-3","unobtrusive-validation"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":109,"score":1,"question_id":12841108,"title":"Disable mvc3 client-side validations under certain conditions","body":"<p>I am building a search form which needs multiple fields. A radio button indicates which fields are required for input like so :</p>\n\n<pre><code>[ ] Field 1\n[.] Field 2\n    Field 3\n[ ] Field 4\n</code></pre>\n\n<p>In the above case, <code>Field 2</code> and <code>Field 3</code> are now required since the associated radio button is checked. To accomplish this, I have implemented the <code>RequiredIf</code> validation attribute, and it works properly.</p>\n\n<p>My problem are the other validations. In this case, <code>Field 1</code> also has a minimum length validation. If <code>Field 1</code> has any value that does not respect the minimum length validation, the form is now invalid and cannot be submitted.</p>\n\n<p><strong>I need a way to disable validation on the fields that are not required.</strong> (And also be able to set them back as another radio button is checked).</p>\n\n<p>The fields cannot be set to \"disabled=disabled\" which solves the issue because of client requirements.</p>\n\n<p>I have tried removing the <code>data-val</code> attributes or setting them to <code>false</code> on the said fields, then parsing my form again, failing miserably.</p>\n\n<p>Edit: Just making sure. <strong>The problem is client-side validations</strong>.</p>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework","slickgrid"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12863893,"title":"usage of slickgrid in MVC3 entity framework","body":"<p>I would like to use slickgrid in my project to make editing a schedule easy. I downloaded it and found that the documentation in the folder and on the sites i have visited to be very vague. they do not show code as to how you would pull from a database. Does anyone have or know of any examples that show a view, model, and controller for slickgrid implementation? There is an example on code project but it uses data that is not in a database and is very simple in concept.</p>\n"},{"tags":["asp.net-mvc-3","unit-testing"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":63,"score":2,"question_id":12859172,"title":"Why Unit test fails using mstest command line but not in VS2010 Professional?","body":"<p>I have a little problem with UnitTests for asp.net mvc3 application.</p>\n\n<p>If I run some unit-tests in Visual Studio 2010 <strong>Professional</strong>, they have been passed successfully.</p>\n\n<p>If I use the Visual Studio 2010 Professional command line</p>\n\n<pre><code>mstest /testcontainer:MyDLL.dll /detail:errormessage /resultsfile:\"D:\\A Folder\\res.trx\"\n</code></pre>\n\n<p>Then the error occurred:</p>\n\n<pre><code>[errormessage] = Test method MyDLL.AController.IndexTest threw exception:\nSystem.NullReferenceException: Object reference not set to an instance of an object.\n</code></pre>\n\n<p>and <strong>my controller</strong>:</p>\n\n<pre><code>public ActionResult Index(){\n   RedirectToAction(\"AnotherView\");\n}\n</code></pre>\n\n<p>and in the <strong>test</strong></p>\n\n<pre><code>AController myController = new AController();\nvar result = (RedirectToRouteResult)myController.Index();\n\nAssert.AreEqual(\"AnotherView\", result.RouteValues[\"action\"]);\n</code></pre>\n\n<p>How to solve this to work properly in both situations (VS2010 and mstest.exe) ?</p>\n\n<p>Thank you</p>\n\n<p>PS: I read <a href=\"http://stackoverflow.com/questions/2761587/test-run-errors-with-mstest-in-vs2010\">Test run errors with MSTest in VS2010</a> but that could solve if I have VS2010 Ultimate/Premium.</p>\n"},{"tags":["asp.net-mvc-3","signalr","signalr-hub","signalr.client"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12856520,"title":"SignalR opens new connection for the same user","body":"<p>I am new to SignalR and trying to implement long running result pooling. I have added JS to my ASP.NET MVC app and created bug class.</p>\n\n<p>JS</p>\n\n<pre><code>  &lt;script type=\"text/javascript\"&gt;\n        var message= $.connection.messageHub;\n        $(function () {\n            message.addMessage = function (htmlstring) {            \n                alert(htmlstring);\n            };\n\n            $.connection.hub.start(function () {\n                message.longRunningMethod('@HttpContext.Current.Session.SessionID');\n            });        \n        });\n    &lt;/script&gt;\n</code></pre>\n\n<p>c# code</p>\n\n<pre><code>[HubName(\"messageHub\")]\npublic class MessagesHub : Hub\n{\npublic void longRunningMethod(string sessionId)\n{\n   var repeatChecking = 0;\n   while (repeatChecking &lt; 3000000)\n       {\n          Caller.addMessage(\"Test\");\n          repeatChecking++;\n          Thread.Sleep(TimeSpan.FromSeconds(1));                        \n       }\n}\n}\n</code></pre>\n\n<p>The code works fine but there is one problem. Every time the same user refresh web page new Hub class is created and new longRunningMethod method is executed. I would like to resume connection and attach to the same hub instance and resume receiving messages. Could anyone explain how to implement this?</p>\n"},{"tags":["database","asp.net-mvc-3","entity-framework","code-first-migrations"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12864299,"title":"How do I ReSeed a database table with my data every time I run my app?","body":"<p>I have a web-app that uses EF5. I have two tables that are my main concern. I have a members table and a claims table. I have false members that I need for testing purposes and this saves their claims to the claims table. </p>\n\n<p>There is real data in these tables as well that I do not want to change. Some of the false members are missing different data or need specific things to process said claim. How do repopulate my false members exactly as I want them without dropping the database.</p>\n\n<p>I have looked into Code First Migrations on www.pluralsight.com but I am not sure how to tell it to always seed the 10 false members and remove the new claims from the claims table. Some of the members have past claims so I only wanna remove the ones that get added during testing.</p>\n\n<p>Anyone have any suggestions?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12755080,"title":"Adding user info to session data right when user logins","body":"<p>I currently have the following login script:</p>\n\n<pre><code>[HttpPost]\n        public ActionResult LogOn(LogOnModel model)\n        {\n            if (ModelState.IsValid)\n            {\n                if (Membership.ValidateUser(model.UserName, model.Password))\n                {\n                    FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);\n                    Guid MyUserId = (Guid)Membership.GetUser().ProviderUserKey;\n                    System.Web.HttpContext.Current.Session[MyUserId.ToString()] = profileRepository.GetFullProfile(MyUserId);\n                    return Json(true);                  \n                }\n                else\n                {\n                    return Json(\"The user name or password provided is incorrect.\");\n                }\n            }else\n                return Json(\"The user name or password provided is incorrect.\");\n\n        }\n</code></pre>\n\n<p>I get an error on the <code>Membership.GetUser()</code> saying the <code>object reference</code> error.  I researched this and i found it was because only my next http request will be authenticated, so what is the best way to save a user's data into session when the user logins?  will it be assured to be in the session until the user's session expires and kicks him out or will there ever be an instance where the user is logged in without the session data set?  If so ill need something to handle that as well.</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":51,"score":-1,"question_id":12860922,"title":"Breaking apart and recombining objects","body":"<p>The problem is the current model is stored in a single table and the powers to be want to split these up into three tables.\nI am retrieving the object</p>\n\n<pre><code>Note note = subject.Notes.FirstorDefault(.....);\n</code></pre>\n\n<p>The object \"note\" has an inherit object which inherits another object.</p>\n\n<pre><code> Data.Model.Note\n   Data.Module.AnalystNote\n     Data.Model.XXObject\n</code></pre>\n\n<p>I can extract the data and put the data into new modules and store these to the database. by using</p>\n\n<pre><code>var NNotes = new NotesDB()\n{\n    xxx = note.Id\n    // other stuff\n}\nvar AAnote = new AnalystNoteDB()\n{\n    xxx = note.Text;\n    // other stuff\n}\nvar ONotes = new XXXObjectDB()\n{\n    xxx = note.Agent;\n    //other stuff\n}\n\ndb.NotesDB.Add(NNotes);\ndb.AnalystNoteDB.Add(AAnote);\ndb.XXXObjectDB.Add(ONote);\ndb.SaveChanges();\n</code></pre>\n\n<p>Now I need to do the reverse. Now I need to retrieve the data from the three tables and rebuild a simaliar object like the orginal. That is create a new tiered inherted style object.  </p>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-ui"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12860907,"title":"Dialog closes on backspace","body":"<p>Does anyone know why juqery dialog closes when backspace on a readonly input box is pressed?</p>\n\n<p>There are other issues as well when other keys are pressed on readonly textbox say space key. Thus, my assumption is that it has something to do with readonly input box.</p>\n\n<p>I need to make this input readonly so user should not be able to change the value. I cannot make it disabled because then my controller cannot recive the values of disabled controls.</p>\n\n<p>I am wroking in MVC3.</p>\n\n<p>Please help. Thanks</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I press backspace when dialog is open, it closes the dialog. Difference is on Add dialog I have to press backspace twice. For Edit it closes on one backspace key press.</p>\n\n<p>this is how I am opening the dialog on two links - Add and Edit</p>\n\n<pre><code>$('#add').click(function () {\n            $('#popup-form-dialog').load('@Url.Action(\"Add\", \"Home\")', function (html)\n                    { $('#dialog').html(html); });\n            $('#dialog').dialog('option', 'title', 'Add');\n            $('#dialog').parent().css({ position: \"fixed\" }).end().dialog('open');\n        });\n\n        $('#edit a').live('click', function () {\n            var id = $(this).attr('id');\n            $('#dialog').load('@Url.Action(\"Edit\",\"Home\")/' + id, function (html)\n                    { $('#dialog').html(html); });\n            $('#dialog').dialog('option', 'title', 'Edit');\n            $('#dialog').parent().css({position:\"fixed\"}).end().dialog('open');\n            return false;\n        });\n\n$('#dialog').dialog({\n            bgiframe: true,\n            autoOpen: false,\n            resizable: false,\n            width: 500,\n            modal: true,\n            close: function () {\n               //make changes to the parent page\n            }\n\n    });\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Noticed - backspace on dialog is actually doing backspace of browser. I wonder why it is happening when I have the modal dialog? And how to stop this? Any thoughts?</p>\n"},{"tags":["c#","asp.net-mvc-3","mvc-editor-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12863954,"title":"MVC Editor Template accessing common data for multiple records","body":"<p>I want to have a list of editable rows in a table for my object</p>\n\n<pre><code>class Widget\n{\n    string shape;\n    string color;\n}\n</code></pre>\n\n<p>The color will be coming from a drop down list, so I have a View model like this </p>\n\n<pre><code>class WidgetListViewModel\n{\n    List&lt;Widget&gt; widgets;\n    SelectList colorsSelectList;\n}\n</code></pre>\n\n<p>and I have an EditorTemplate (WidgetEditorTemplate) for Widget.</p>\n\n<p>here is how the template would be called in the view:</p>\n\n<pre><code>for(int i=0; i&lt; in WidgetListViewModel.widgets.Count; i++)\n{\n    EditorFor(WidgetListViewModel.widgets[i], \"WidgetEditorTemplate\");\n}\n</code></pre>\n\n<p>My problem is, in the WidgetEditorTemplate, how can I access the colorsSelectList?</p>\n\n<p>I know I could just add colorsSelectList to the Widget model (or new viewmodel) but then I would have to load colorsSelectList for each widget record.</p>\n"},{"tags":["mysql","asp.net-mvc-3","asp.net-mvc-2","mono","mysql-connector"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12851078,"title":"What version of MySQL Connector will work with Mono 2.10.1","body":"<p>I am trying to bring an ASP .NET 2.0 app up to 4.0 running under mod_mono. The 2.0 app is using the 6.3.5 version of the DLLs build against the 2.x platform and it works fine. </p>\n\n<p>Here are the versions of the connector DLLs I've tried thus far: </p>\n\n<ul>\n<li>6.3.5 - 2x</li>\n<li>6.3.5 - 4x</li>\n<li>6.5.4 - 4x</li>\n</ul>\n\n<p>I am adding mono/4.0/machine.config like so:</p>\n\n<pre><code>&lt;add name=\"MySQL Data Provider\" invariant=\"MySql.Data.MySqlClient\" description=\".Net Framework Data Provider for MySQL\"\n         type=\"MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.3.5.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d\"/&gt;\n</code></pre>\n\n<p>The PublicKeyToken seems to be the same for all the different versions.</p>\n\n<p>When I run the app though, I get this: </p>\n\n<pre><code>Unhandled Exception: System.IO.FileLoadException: The assembly name is invalid.\n  at System.Reflection.AssemblyName..ctor (System.String assemblyName) [0x00045] in /root/mono-2.10.1/mcs/class/corlib/System.Reflection/AssemblyName.cs:93 \n  at Mono.CSharp.ImportedAssemblyDefinition.ReadAttributes () [0x000c5] in /root/mono-2.10.1/mcs/mcs/import.cs:1522 \n  at Mono.CSharp.MetadataImporter.GetAssemblyDefinition (System.Reflection.Assembly assembly) [0x00028] in /root/mono-2.10.1/mcs/mcs/import.cs:821 \n  at Mono.CSharp.ReflectionImporter.ImportAssembly (System.Reflection.Assembly assembly, Mono.CSharp.RootNamespace targetNamespace) [0x00000] in /root/mono-2.10.1/mcs/mcs/reflection.cs:88 \n  at Mono.CSharp.DynamicLoader.LoadReferences (Mono.CSharp.ModuleContainer module) [0x0003e] in /root/mono-2.10.1/mcs/mcs/reflection.cs:587 \n  at Mono.CSharp.Driver.Compile () [0x00159] in /root/mono-2.10.1/mcs/mcs/driver.cs:1535 \n  at Mono.CSharp.Driver.Main (System.String[] args) [0x0003d] in /root/mono-2.10.1/mcs/mcs/driver.cs:243 \n</code></pre>\n\n<p>I've read a number of posts saying this version works or that version works, I am wondering if anyone knows for sure so I don't get stuck downloading a whole bunch of dlls and jumping from one to the other when it doesn't work.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","dataannotations","fluentvalidation"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12848468,"title":"Access all validation rules & validation metadata on a model from model binder","body":"<p>I am trying to build a custom model binder inheriting from <code>DefaultModelBinder</code>. In this implementation, I want to access the validation rules metadata (from FluentValidation), as they contain information I need to <a href=\"http://stackoverflow.com/questions/646270/asp-net-mvc-custom-validation-message-for-value-types/2698899#2698899\">override the <code>ModelState</code> error messages</a>.</p>\n\n<p>Note that the answer in that link won't help me, as I'm not using resources for validation messages. The messages are stored in FluentValidation rules. The reason normal validation doesn't work, similar to the issue in that link, is because .NET's model binders take over and set the message as well as nulling out the value, thus making the value valid, as far as the FluentValidation rules are concerned.</p>\n\n<p>I can get this to work, if only I could access my model's validation rules, per property and rule.</p>\n\n<p>Here is an example model:</p>\n\n<pre><code>[Validator(typeof(SampleValidator))]\npublic SampleModel\n{\n    public DateTime SomeDate { get; set; }\n    public int SomeInt { get; set; }\n    public decimal SomeDecimal { get; set; }\n}\n</code></pre>\n\n<p>FluentValidation, out of the box, doesn't provide validation for data types, so I have built my own client-side validators to override the validation messages (via Fluent adapters). My problem is just with the server-side validation, which is taken over by .NET's default model binder, as mentioned in that linked discussion.</p>\n\n<p>I'm trying to do this from the DefaultModelBinder.SetProperty override:</p>\n\n<pre><code>protected override void SetProperty(\n    ControllerContext controllerContext, \n    ModelBindingContext bindingContext, \n    System.ComponentModel.PropertyDescriptor propertyDescriptor, \n    object value)\n{\n}\n</code></pre>\n\n<p>Here is a sample validator. THe server-side validation <code>IsValid</code> always returns true bacuase, as I said above, the <code>DefaultModelBinder</code> always overrides the value to null when a non-date is entered:</p>\n\n<pre><code>public class DateValidator : PropertyValidator, IDateValidator\n{\n    public DateValidator()\n        : base(() =&gt; \"{PropertyName} must be a date.\")\n    {\n    }\n\n    protected override bool IsValid(PropertyValidatorContext context)\n    {\n        return true;\n    }\n}\n</code></pre>\n\n<p>The validation adapter just wires up the validator to the client-side adapter and parameters:</p>\n\n<pre><code>public class DateFluentValidationPropertyValidator : FluentValidationPropertyValidator\n{\n    private IDateValidator DateValidator\n    {\n        get { return (IDateValidator)Validator; }\n    }\n\n    public DateFluentValidationPropertyValidator(ModelMetadata metadata, ControllerContext controllerContext, PropertyRule rule, IPropertyValidator validator)\n        : base(metadata, controllerContext, rule, validator)\n    {\n        ShouldValidate = false;\n    }\n\n    public override IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules()\n    {\n        if (!ShouldGenerateClientSideRules()) yield break;\n\n        var formatter = new MessageFormatter().AppendPropertyName(Rule.GetDisplayName());\n        string message = formatter.BuildMessage(DateValidator.ErrorMessageSource.GetString());\n\n        yield return new ModelClientValidationRule\n        {\n            ValidationType = \"date\",\n            ErrorMessage = message\n        };\n    }\n}\n</code></pre>\n\n<p>And here is how I would wire a property up to the rule:</p>\n\n<pre><code>public class SampleValidator : AbstractValidator&lt;SampleModel&gt;\n{\n    public SampleValidator()\n    {\n        this.RuleFor(m =&gt; m.SomeDate).Date();\n    }\n}\n</code></pre>\n\n<p>How can I access the validation rules &amp; metadata for my model with these values?</p>\n"},{"tags":["c#","asp.net-mvc-3","mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12850028,"title":"MVC3 Html.DropDownList — Value of DropDownList never changes","body":"<p>I have a DropDownList control inside of my model, TaskDetailsModel. I've declared my DropDownList as:</p>\n\n<pre><code>&lt;%= Html.DropDownListFor(model =&gt; model.TaskType, new SelectList(Model.TaskTypeDisplayNames, Model.TaskTypes))%&gt;\n</code></pre>\n\n<p>My model's corresponding class contains the following property declarations:</p>\n\n<pre><code>public class TaskDetailsModel\n{        \n    [DisplayName(\"Task Type\")]\n    public TaskType TaskType { get; set; }\n\n    public List&lt;TaskType&gt; TaskTypes = new List&lt;TaskType&gt; { TaskType.Decommission, TaskType.Install, TaskType.Modify, TaskType.Move, TaskType.Other, TaskType.Rename };\n    public List&lt;string&gt; TaskTypeDisplayNames = new List&lt;string&gt; { \"Decommission\", \"Install\", \"Modify\", \"Move\", \"Other\", \"Rename\" };\n}\n</code></pre>\n\n<p>When everything loads and displays to the user -- the correct TaskType selection has been made. That is, I have no problem loading with the non-default select option. As such, I believe that at least part of this code is working properly.</p>\n\n<p>However, any changes made to the select are lost. When I attempt to post my form back to the server -- I see that my selected option never changes. I was wondering what I am doing incorrectly to incur such behavior.</p>\n\n<p><strong>Update:</strong></p>\n\n<pre><code>public TaskDetailsModel(Task task)\n{\n    TaskType = task.TaskType;\n}\n\n//Client-side code to retrieve form values:\nvar getDialogData = function () {\n    var dialogData = {};\n\n    $(workflowDialogContent).find('input,p,select').each(function () {\n        if ($(this).is('input')) {\n            dialogData[this.id] = $.trim($(this).val());\n        }\n        else if ($(this).is('select')) {\n            //At this point in time the selected option does not match what I see on the screen. The user has modified the selected value. I do not see it reflected here.\n            console.log(\"Inside here for:\", this);\n            dialogData[this.id] = $.trim($(this).find('option:selected').val());\n        }\n        else {\n            dialogData[this.id] = $.trim($(this).text());\n        }\n    });\n\n    return JSON.stringify(dialogData);\n};\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12863050,"title":"Batch printing mvc cshtml forms with query string","body":"<p>I would like to batch print mvc3 cshtml forms based on a url with parameters. For instance, I would like to iterate through urls something like: </p>\n\n<pre><code>for(int i=0; i&lt;10: i++) \n    print(http://mysite/myController/myAction/i);\n</code></pre>\n\n<p>or are there more preferred techniques to achieve this goal.</p>\n"},{"tags":["c#","asp.net-mvc-3","visual-studio-2010","razor","asp.net-mvc-4"],"answer_count":2,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":98,"score":8,"question_id":12859577,"title":"Detect when Visual Studio is test-firing the website for intellisense","body":"<p><em>There's a lot of exposition here - but it's needed.</em></p>\n\n<p>Not sure how many people are aware of this, but, the Razor code editor in Visual Studio causes your website to be 'test-fired' up to just before the <code>Application_Start</code> event - and this is causing some annoying issues in my current project, which uses WebActivator to do a lot of the site initialisation.</p>\n\n<p><em><strong>Update - On closer inspection it's not just Razor - it looks like it's Visual Studio-wide - hence the change of title</em></strong></p>\n\n<p>I need to be able to detect when website code is being run by Visual Studio and not by a web server.</p>\n\n<p>To demonstrate - do the following (<strong>exactly</strong> as written to ensure it reproduces):</p>\n\n<ul>\n<li>Create a new MVC 4 site, I used the Internet Application template so there were some pages there on creation.</li>\n<li>Add the WebActivator package from nuget</li>\n<li>Add a class to the App_Start folder called <code>RazorPageBugTest</code></li>\n<li>Paste this code (changing the relevant namespace):</li>\n</ul>\n\n<pre class=\"lang-cs prettyprint-override\"><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing MvcApplication6.App_Start;\nusing System.IO;\n\n[assembly: WebActivator.PreApplicationStartMethod(\n  typeof(RazorPageBugTest), \"Start\", Order = 0)]\n\nnamespace MvcApplication6.App_Start\n{\n  public static class RazorPageBugTest\n  {\n    public static void Start()\n    {\n      using (var writer = File.Open(@\"c:\\trace.txt\", FileMode.Create))\n      {\n        using (var tw = new StreamWriter(writer))\n        {\n          tw.AutoFlush = true;\n          tw.WriteLine(\"Written at {0}\", DateTime.Now);\n        }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Notice that this code is not something that would usually work on a web server anyway - given that it's writing to drive C: (indeed this might not work on your machine if you don't run VS as administrator).</p>\n\n<ul>\n<li>Now build the project.</li>\n<li><em>This next bit works best if you already have Explorer open on C:</em> Once that's completed, find a Razor view and open it</li>\n<li>Wait for all the C#/VB bits to be highlighted</li>\n<li>Take a look at drive C - oh look, there's a file called 'trace.txt' and the date is within the last few seconds!</li>\n</ul>\n\n<p>So that demonstrates the problem here - the Razor code editor is firing up an AppDomain and, effectively, shelling the website in order to get intellisense (including things like stuff in the App_Helpers folder etc).  Now it doesn't actually trigger the <code>Application_Start</code> method - but when you have WebActivator in the project as well, any of its pre-application-start methods <strong><em>are</em></strong> triggered.</p>\n\n<p>In my case this is causing huge issues - high CPU usage and memory usage in <code>devenv.exe</code> (equivalent to the website having just been started) because I initialise DI containers and god-knows what else at this point, but one in particular is proving <em>really</em> annoying.</p>\n\n<p>My website has a component that listens on the network for status and cache-invalidation messages from other machines in the web farm.  In QA and Live environments this listener never fails to open the port and listen - on my dev machine, however, it frequently fails - saying the port's already in use.  When I look for the process that's holding it open - it's always <code>devenv.exe</code>.</p>\n\n<p>You guessed it - I start this listener in a WebActivator-initialised boot-strapping call.</p>\n\n<p>So the question is - does anyone know of a way to detect that the code <em>isn't</em> being run by a 'proper' web host so I can stop it being run?  I'm particularly hopeful for this as it'll also mean that my Visual Studio and Razor editing experience will become a damn-site faster as a result!</p>\n\n<p>As a bonus, any fix could legitimately be sent to David Ebbo - author of WebActivator - so he can stick it earlier in his stack to prevent the problem completely!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":74,"score":2,"question_id":12862856,"title":"Can I access a C# enum in my Razor view?","body":"<p>I have the following:</p>\n\n<pre><code>namespace Storage.Constants.References {\n    public enum RoleType {\n        Guest = 1,\n        User = 2,\n        Admin = 3,\n        Super = 4\n    }\n}\n</code></pre>\n\n<p>In my web.config I added:</p>\n\n<pre><code>&lt;add namespace=\"Storage.Constants.References\" /&gt;\n</code></pre>\n\n<p>However in my view below I still don't get any intellisense for the RoleType and it appears to not know what it is:</p>\n\n<pre><code>@model WebUx.ViewModels.BaseViewModel\n@{ Layout = \"~/Views/Shared/_Layout.cshtml\"; }\n@section status {\n\n    @if (Model.Role &gt;= RoleType.Admin)\n    {\n</code></pre>\n\n<p>However it works if I change this to:</p>\n\n<pre><code>@if (Model.Role &gt;= Storage.Constants.References.RoleType.Admin)\n</code></pre>\n\n<p>Should it not work without my specifying \"Storage.Constants.References\" ?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12861541,"title":"Changing routing's default parameter name","body":"<p>I used to keep the default routing, but a conflict caused me to change the default parameter <code>id</code> to <code>paramid</code>.</p>\n\n<p>Normally, I was using code like this in a view:</p>\n\n<pre><code>@Url.Action(\"Edit\", \"Suivis\", new {o.ID})\n</code></pre>\n\n<p>And this in the controller:</p>\n\n<pre><code>public ActionResult Edit(int id) { ... }\n</code></pre>\n\n<p>But it doesn't work anymore, it forces me to use:</p>\n\n<pre><code>@Url.Action(\"Edit\", \"Suivis\", new {paramid = o.ID})\n</code></pre>\n\n<p>This is the code in my controller:</p>\n\n<pre><code>public ActionResult Edit(int paramidid) { ... }\n</code></pre>\n\n<p>My question is: Why do I now have to specify the parameter name in the view? </p>\n"},{"tags":["asp.net-mvc-3","spark-view-engine"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12823655,"title":"Preventing browser caching after web app release: change how ASP.NET MVC3 converts virtual URLs","body":"<p>I'd like to prevent browser caching of JavaScript, CSS, and image files for a given release of my software.</p>\n\n<p>I'm using ASP.NET MVC3 with the Spark view engine, and I believe I can do this by appending a custom query string parameter to image, script, and stylesheet URLs rendered using the virtual paths in every instance where this is done.  As in, <code>&lt;script type=\"text/javascript\" src=\"~/path/to/script.css\"&gt;&lt;/script&gt;</code> would be rendered as <code>&lt;script type=\"text/javascript\" src=\"/myApplication/path/to/script.css?2.3.0\"&gt;&lt;/script&gt;</code>.</p>\n\n<p>Is this something that can be done?  Am I on the right track, or is there something else that I can do?</p>\n\n<p>Thanks!</p>\n\n<p><strong>edit</strong></p>\n\n<p>I was looking at ETags in IIS, and this seems like it'll do the job just fine.  I did a little testing, and it seems to work.  Does that seem like reasonable solution?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc-3","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12860646,"title":"how to hide dropdownlist1 selected values in dropdownlist2 dynamically in ASP.Net Mvc3Razor","body":"<p>Iam using ASP.Net MVC3 Razor, I have two dropdowns in .cshtml, let's say ddl1 and ddl2.\nI have binded data in the controller and sent to dropdowns using viewbag.\nBoth the ddls have same data in it like A,B,C,D. If I select A in ddl1, it should hide A in ddl2; if select B it should hide B in ddl2.  Could any one help me out using javascript or jquery. </p>\n\n<p>This is my controller where I have binded..</p>\n\n<pre><code> public ActionResult Index()\n        {\n            ViewBag.ddl1 = new SelectList(db.Collection, \"ID\", \"Name\");\n            ViewBag.ddl2 = new SelectList(db.Collection, \"ID\", \"Name\");\n            return View();\n        }\n</code></pre>\n\n<p>and the View is(.cshtml for the above action)</p>\n\n<pre><code>&lt;table class=\"table\"&gt;\n    &lt;tr&gt;\n        &lt;td&gt;      \n       @Html.DropDownList(\"ddl1\", \"-select name-\")\n        &lt;/td&gt;\n        &lt;td&gt;\n        @Html.DropDownList(\"ddl2\",\"-select name-\")\n          &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;/table&gt;\n</code></pre>\n\n<p>Thanx in Advance</p>\n"},{"tags":["c#","database","asp.net-mvc-3","entity-framework"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":12860229,"title":"How do I seed specific values in a database every time the app runs?","body":"<p>I have an app that uses SSN's to look up people in a database. I am trying to force the 10 \"ssn's\" that I use for testing purposes to seed every time I run the app. I am currently dropping the table and reseeding the data with my false data but we are importing data from a real database to ours and I no longer want to do this. </p>\n\n<p>Can someone lead me to a site or give me a hint on how I could go about this?</p>\n"},{"tags":["asp.net-mvc-3","serialization","properties","http-post"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12860558,"title":"MVC Model property names with square brackets - is this possible?","body":"<p>When POSTing data to a third-party payment provider, I usually serialize an MVC model which represents the fields.  I have used this technique many times and has worked perfectly.</p>\n\n<p>However now I am faced with this specification:\n<img src=\"http://i.stack.imgur.com/N7OKJ.jpg\" alt=\"http post parameters\"></p>\n\n<p>Note that the field names contain square brackets.  I can't work out how to include the full field name in my model properties, currently the model looks like this:</p>\n\n<pre><code>public string action { get; set; }\npublic string api_key { get; set; }\npublic string RetailerUniqueRef { get; set; }\npublic string InstallationID { get; set; }\npublic float Price { get; set; }\npublic string Description { get; set; }\npublic string Code { get; set; }\npublic float Deposit { get; set; }\npublic string SchemeCode { get; set; }\n</code></pre>\n\n<p>As you can see, the property names are only part of the field names.  If I add the square brackets like so:</p>\n\n<pre><code>public string identification[api_key] { get; set; }\n</code></pre>\n\n<p>This fails as the compiler quite rightly thinks it's an array.\nHow can I include the square brackets in the property names, or is there another way round this?</p>\n"},{"tags":["c#","asp.net-mvc-3","automapper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":145,"score":0,"question_id":11838010,"title":"AutoMapping entities to models through an action filter attribute?","body":"<p>In <strong><a href=\"http://lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/\" rel=\"nofollow\">this article</a></strong>, <a href=\"http://stackoverflow.com/users/58508/jimmy-bogard\">Jimmy Bogard</a> goes on to explain some of the best-practices he endorses when doing MVC.</p>\n\n<p>The article in general is pretty good and I've found his advice in general (in other blog posts) to be pretty solid. However, he suggests using an attribute to map entities to models.</p>\n\n<p>How is this</p>\n\n<pre><code>[AutoMap(typeof(Product), typeof(ShowProduct))]\npublic ActionResult Details(int id)\n{\n    var product = _productRepository.GetById(id);\n    return View(product);\n}\n</code></pre>\n\n<p>Any better than this (which in my opinion is way more declarative as to the actual intent of the piece of code</p>\n\n<pre><code>public ActionResult Details(int id)\n{\n    var product = _productRepository.GetById(id);\n    var model = Mapper.Map&lt;Product, ShowProduct&gt;(product);\n    return View(model);\n}\n</code></pre>\n\n<p>Besides that one point, there seem to be scenarios where this is rather impractical, such as action methods returning different models based on input, or even simpler scenarios such as this:</p>\n\n<pre><code>    [HttpGet]\n    public ActionResult Index()\n    {\n        return List();\n    }\n\n    public ActionResult Until(long id) // \"id\" is the timestamp\n    {\n        return List(id);\n    }\n\n    [NonAction]\n    internal ActionResult List(long? timestamp = null, int count = 8)\n    {\n        IEnumerable&lt;Post&gt; posts = postService.GetLatest(timestamp, count);\n        PostListModel model = mapper.Map&lt;IEnumerable&lt;Post&gt;, PostListModel&gt;(posts);\n        return ContextView(\"List\", model);\n    }\n</code></pre>\n\n<p>Is this actually a good practice, or just unjustified, an unwarranted obfuscation of code that was already pretty simple to begin with?</p>\n\n<p>I ask out of ignorance, not personally attacking someone I regard as an awesome blogger, besides I love AutoMapper already.</p>\n"},{"tags":["javascript","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12859429,"title":"Can I use Javascript to trigger a method in my MVC controller?","body":"<p>I have a controller for \"Question\" objects; if these Questions are of Type \"MultipleChoice\" then I want to be able to add a collection of \"MultipleChoiceOption\" objects to the Question... so far, so good.  </p>\n\n<p>The problem I have is that when I edit a Question, change it's type to MultipleChoice, then add options, it is necessary to return to the Edit Question view and commit the edited question, otherwise the change in Question.Type is lost.  Obviously this is a little annoying, so what I'd like to do is hook up a method that fires the relevant method in the QuestionController whenever the dropdownlist value is changed.</p>\n\n<p>I have the following in my Edit Question View:</p>\n\n<pre><code>@Html.DropDownListFor(model =&gt; model.Type, Helper.GetSelectList(), new { id = \"QuestionTypeDropDown\", onchange = \"OnChange();\" })\n\n&lt;script type=\"text/javascript\"&gt;\n\n\nfunction OnChange(text) {\n    ...do something here\n\n        }\n\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>and this method in my Question Controller:</p>\n\n<pre><code>[HttpPost]\n    public ActionResult QuestionTypeEdited(Question question)\n    {\n        if (ModelState.IsValid)\n        {\n            SaveQuestion(question, false);\n            return RedirectToAction(\"Edit\", \"Question\", new { id = question.OwningPulseId });\n        }\n        return View(question);\n    }\n</code></pre>\n\n<p>But I don't know how to hook them up.  I tried one method using Ajax that I found online, but this just stopped the js from firing at all (perhaps I don't have Ajax? Sorry I don't know anything about Ajax so that may be a dumb statement!).  Is it possible using \"simple\" Javascript? </p>\n\n<p>If I need to specify the controller explicitly, please be sure to mention how if you know :-)</p>\n\n<p>Cheers</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":65,"score":-2,"question_id":12859346,"title":"Moving routines to new class","body":"<p>I want to move some routines I have in a Controller to their own Class file under the Helper Folder.  So I created the new Class file in Helpers. I copied the routines from from the Controller file to the new file in Helper.  At first I was getting errors in the new class file until I added:</p>\n\n<pre><code>using XXX.Web.Controller\n</code></pre>\n\n<p>to the new class file and that cleared up the errors. But now I get an error when I try to access the routines from within my controller class. How do I get access?</p>\n\n<p>I tried</p>\n\n<pre><code>xsubject = DoDB.GetNewSubject(model.Subject[0].Id, xsubject);\n</code></pre>\n\n<p>Here is the new class:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Data.Entity;\nusing System.ComponentModel.DataAnnotations;\nusing XXX.Web.Models;\n\nnamespace XXX.Web.Helpers\n{\n  public class DoDB\n  {\n     NotesDB nNote;\n     AnanstNoteDB aaNote;\n     XXXObjectDB cpoNote;\n\n     public object GetNotes(string Id, NotesDB Notes)\n     {\n       // Do stuff\n       //\n       return (Notes);\n     }\n   }\n }\n</code></pre>\n\n<p>And the controller:</p>\n\n<pre><code>using System;\n.\n.\nXXX.Web.Helpers;\n\nnamespace XXX.web.Controllers\n{\n    public partial class SController : BaseController\n    {\n       public ActionResult Index(...............)\n       {\n           bool SPage = false;\n           SubjectDB xsubject = new SubjectDB();\n           xsubject = DoDB.GetNotes(model.Subjects[0].Id, xsubject);\n</code></pre>\n\n<p>This following error appears on the last line:</p>\n\n<blockquote>\n  <p>An object reference is required for the non-static method or property........</p>\n</blockquote>\n"},{"tags":["asp.net-mvc-3","linq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12859022,"title":"selecting distinct value in linq mvc3","body":"<p>i am binding the below data to a drop down but am not able to get disctinct value. Please help. Find the code snippet below</p>\n\n<pre><code>var SalesOrgTypes = (from s in tblSales\n                         orderby s.SalesOrg ascending\n                         select new DropDownItem\n                         {\n                             Value = s.SalesOrg,\n                             Text = s.SalesOrg + \" - \" + s.SalesOrgDesc\n                         }).Distinct();\n</code></pre>\n"},{"tags":["asp.net-mvc-3","html-helper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5457,"score":0,"question_id":5807614,"title":"MVC3 html.TextBox","body":"<p>I have login view that takes a LoginPageViewModel:</p>\n\n<pre><code>public class LoginPageViewModel : PageViewModel\n{\n    public string ReturnUrl { get; set; }\n\n    public bool PreviousLoginFailed { get; set; }\n\n    public LoginFormViewModel EditForm { get; set; }\n}\n</code></pre>\n\n<p>which is rendered in the view. When a user tries to log in I only want to post the LoginFormViewModel (Model.EditForm) to the controller:</p>\n\n<pre><code>public ActionResult Login(LoginFormViewModel loginDetails)\n{\n     //do stuff\n}\n</code></pre>\n\n<p>Using Html.TextBox I can specify the name of the form field manually 'loginDetails.UserName' and post back to the controller and everything works.</p>\n\n<pre><code>@model Web.Controllers.User.ViewModels.LoginPageViewModel\n\n@using (Html.BeginForm()){\n@Html.Hidden(\"loginDetails.ReturnUrl\", Model.ReturnUrl)\n\n    @Html.LabelFor(x =&gt; x.EditForm.UserName, \"User Name:\")\n    @Html.TextBox(\"loginDetails.UserName\", Model.EditForm.UserName)\n    @Html.ValidationMessageFor(x =&gt; x.EditForm.UserName)\n\n.....\n</code></pre>\n\n<p>But what I want to do is to use the staticaly typed helper, something like:</p>\n\n<pre><code>@Html.TextBoxFor(x =&gt; x.EditForm.UserName)\n</code></pre>\n\n<p>But I'm unable to get this to work.</p>\n\n<p>Are you only able to post back the same model when useing the strongly typed helpers? Is there something I'm missing on this? Intellisense doesn't seem to give any clues such as a form field string.</p>\n"},{"tags":["asp.net-mvc-3","authorization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12858523,"title":"How to impliment MVC Authorization when older system is in place and returns a string","body":"<p>I am not using any of <strong>asp.net</strong> Authentication in my code. It is handled by an outside library. I get back a success or failure from the function. So all the work is done for me.sCould I get some examples of how I would implement this in MVC3. I know a little, I have had 2 weeks experience. </p>\n\n<p>Thanks.</p>\n\n<pre><code>  AuthFunction(\"UserName\", \"password\");    \n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12851348,"title":"the front page appear download dialog box sometimes,why?","body":"<p>I updated mvc3 view file, then open the front page will appear download dialog box, I clicked and saved, and then it is the source code, I can't understand, why will the front page appear download dialog box when I updated mvc3 view file?</p>\n\n<p><em>Environment:</em> windows server 2008, iis7.5, sql server 2005</p>\n\n<p><em>Software versions:</em> net4, mvc3</p>\n\n<p>In my project I used: Bundle,dotless,Gzip Compress,razor view engine</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12850451,"title":"Sending a Bounding Box from JavaScript to an Action Method","body":"<p>I have a JavaScript variable which is basically an array of bounding boxes (called <code>bounds</code>).  Each array element is in the form of:</p>\n\n<pre><code>{\n    XHigh: -71.00742992911023,\n    XLow: -71.00670274612378,\n    YHigh: 42.09467040703646,\n    YLow: 42.09458047487587\n}\n</code></pre>\n\n<p>And I'm trying to send it to an action method via POST:</p>\n\n<pre><code>$.ajax({\n    url: '/Map/GetLocations',\n    type: 'POST',\n    data: { boxes: bounds },\n    success: function(data) {\n        // doing something with the result\n    }\n});\n</code></pre>\n\n<p>On the server, I consume the data into the action method as such:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult GetLocations(IList&lt;BoundingBox&gt; boxes)\n{\n    // do something with boxes and return some json\n}\n</code></pre>\n\n<p>With the DTO class defined as:</p>\n\n<pre><code>public class BoundingBox\n{\n    public decimal XHigh { get; set; }\n    public decimal XLow { get; set; }\n    public decimal YHigh { get; set; }\n    public decimal YLow { get; set; }\n}\n</code></pre>\n\n<p>Within the action method the <code>boxes</code> value does contain the correct number of elements that I sent in the POST.  However, all of the decimal values are 0.  I tried changing them to <code>double</code>s in the DTO, still 0.0.  I tried changing them to <code>string</code>s and they were empty.</p>\n\n<p>Am I missing something in the model binding on how to populate these values?  How can I send this array of objects to my action method?</p>\n"},{"tags":["c#","asp.net-mvc-3","serialization","httpcontext"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12858064,"title":"Serializing HttpContext object to store in a database","body":"<p>We have a C# ASP.Net MVC website.  I would like to store everything contained in the <code>HttpContext.Current.Request</code> object in a table in SQL Server for later analysis.  </p>\n\n<p>I attempted serializing the object into a Byte Array, then storing it in a binary field in SQL Server, however the serializer won't serialize the <code>HttpContext</code> object since it is not marked <code>Serializable</code>.  </p>\n\n<p>Is there any way to mark a System.Web class as serializable?  Or is there another way to accomplish this?</p>\n"},{"tags":["javascript","ajax","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12857736,"title":"How to send div id as data with ajax in mvc3","body":"<p>Hello everyone I would like to send div id as data  with ajax. As you can see at below I'm trying send only \"fallout\" </p>\n\n<pre><code> &lt;script  type=\"text/javascript\"&gt;\n      var mydiv = $(\"#fallout\").html();\n       $.ajax({\n           type: \"get\", url: \"test\", data: { mydata: mydiv },\n             success: function (data) {\n\n                    $(\"#font).html(data);\n             }\n         });\n    &lt;/script&gt;\n</code></pre>\n\n<p>Here is my div </p>\n\n<pre><code>&lt;div id=\"fallout\"&gt;&lt;p id=\"font&gt;\"Test&lt;/p&gt;&lt;/div&gt;\n</code></pre>\n\n<p>But it returns as null </p>\n"},{"tags":["asp.net-mvc-3","mvcsitemapprovider"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":12850209,"title":"MVCSiteMapProvider dynamic nodes not showing","body":"<p>I am currently implementing breadcrumb in a MVC3 Razor application, using <a href=\"https://github.com/maartenba/MvcSiteMapProvider\" rel=\"nofollow\" title=\"Maartenba's MVC Sitemap Provider\">Maartenba's MVC Sitemap Provider</a>. The problem occurs when I try to create dynamic nodes, for the blog posts. What I want to achieve is to display <em>Home>Blog</em> for the blog page and <em>Home>Blog><strong>BlogPostTitle</em></strong> for the post page, where <strong><em>BlogPostTitle</em></strong> is the title of the currently displayed post. What I actually get is: <em>Home>Blog</em> both for the blog page and for any post page.</p>\n\n<p>To test the dynamic nodes generation, I also included on the _Layout a call to @Html.MvcSiteMap().Menu(false, true, true). The displayed menu confirms that the nodes are correctly generated:</p>\n\n<ul>\n<li>Home   </li>\n<li>About   </li>\n<li>Blog<br>\n<ul>\n<li>Article #1 title</li>\n<li>Article #2 title   </li>\n</ul></li>\n<li>Contact</li>\n</ul>\n\n<p>Still, the @Html.MvcSiteMap().SiteMapPath() displays <em>Home>Blog</em> both for the blog page and for the articles.</p>\n\n<p>Here is the code:</p>\n\n<p>Sitemap:</p>\n\n<pre><code>&lt;mvcSiteMapNode title=\"Home\" controller=\"Home\" action=\"Index\"&gt;\n    &lt;mvcSiteMapNode title=\"About\" controller=\"Home\" action=\"About\"/&gt;\n    &lt;mvcSiteMapNode title=\"Blog\" controller=\"BlogPost\" action=\"Index\" key=\"News\" &gt;\n        &lt;mvcSiteMapNode title=\"\" controller=\"BlogPost\" action=\"Details\" dynamicNodeProvider =\"MyApp.Helpers.BlogPostDynamicNodeProvider, myApp\" /&gt;\n    &lt;/mvcSiteMapNode&gt;\n    &lt;mvcSiteMapNode title=\"Contact\" controller=\"Home\" action=\"Contact\"/&gt;\n&lt;/mvcSiteMapNode&gt;\n</code></pre>\n\n<p>Dynamic node provider:</p>\n\n<pre><code>public class BlogPostDynamicNodeProvider : DynamicNodeProviderBase\n{\n    public BlogPostRepository _repository = new BlogPostRepository();\n    public List&lt;BlogPost&gt; articles = new List&lt;BlogPost&gt;();\n\n    public override IEnumerable&lt;DynamicNode&gt; GetDynamicNodeCollection()\n    {\n        articles = _repository.FindAllBlogPosts();\n        var returnValue = new List&lt;DynamicNode&gt;();\n\n        foreach (var article in articles)\n        {\n            DynamicNode node = new DynamicNode();\n            node.ParentKey = \"News\";\n            node.Title = article.PostTitle;\n            node.RouteValues.Add(\"id\", article.Post_ID);\n            returnValue.Add(node);\n        }\n        return returnValue;\n    }\n\n    public override CacheDescription GetCacheDescription()\n    {\n        return new CacheDescription(\"BlogPostDynamicNodeProvider\")\n        {\n            SlidingExpiration = TimeSpan.FromMinutes(1)\n        };\n    }\n}\n</code></pre>\n\n<p>BlogPostCOntroller</p>\n\n<pre><code>    public ViewResult Index(long? BlogPost_ID)\n    {\n\n        var BlogPostList = new PagedData&lt;BlogPost&gt;();\n        BlogPostList.Data = repository.FindAllBlogPostsPaged(1, 3, 1);\n\n        BlogPostList.NumberOfPages = Convert.ToInt32(Math.Ceiling((double)repository.NumberOfPosts(1) / 3));\n        BlogPostList.CurrentPage = 1;\n\n       BlogPost pBlogPost = new BlogPost();\n            pBlogPost.PostDate = DateTime.Now;\n\n            return View(new BlogPostPagedViewModel(pBlogPost, repository.FindAllBlogPosts()\n                new SelectList(ctgRepository.FindAllBlogCategories(), \"Category_ID\", \"Category_Name\")));\n    }\n\n    [SiteMapPreserveRouteData]\n    public ActionResult Details(long id)\n    {\n        BlogPost post = repository.FindABlogPostByID(id);\n        return PartialView(\"_Details\", post);\n    }\n</code></pre>\n\n<p>_Layout</p>\n\n<pre><code>&lt;div id=\"pagecontent\"&gt;\n    @Html.MvcSiteMap().Menu(false, true, true)   &lt;!-- for test purpose only --&gt;\n    @Html.MvcSiteMap().SiteMapPath() \n    @Html.Partial(\"_PagedList\", Model.BlogPostList)\n&lt;/div&gt;&lt;!-- page blogcontent --&gt;\n</code></pre>\n\n<p>Blog Index view</p>\n\n<pre><code>&lt;div id=\"blogcontent\"&gt;\n    @Html.Partial(\"_PagedList\", Model.BlogPostList)\n&lt;/div&gt;&lt;!-- end blogcontent --&gt;\n</code></pre>\n\n<p>Blog _PagedList partial view</p>\n\n<pre><code>@using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = \"blogcontent\", InsertionMode = InsertionMode.Replace }))\n{\n    foreach (var item in Model.Data)\n    {\n        &lt;h2 class=\"posttitle\"&gt;\n            @Ajax.ActionLink(item.PostTitle, \"Details\", \"BlogPost\", new { id = item.Post_ID }, new AjaxOptions { UpdateTargetId = \"blogcontent\" }, null)            \n        &lt;/h2&gt;\n    }\n}\n</code></pre>\n\n<p>Details view</p>\n\n<pre><code>@model MyApp.Models.BlogPost\n@using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = \"blogcontent\", InsertionMode = InsertionMode.Replace }))\n{\n    &lt;div class=\"blogpost\"&gt;\n    ...\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p>_ Edit _\nI discovered that, if I remove <code>@Html.MvcSiteMap().SiteMapPath()</code> from _Layout and place it instead in the blog Index view and in the Details view, the breadcrumb displays the current location correctly.</p>\n\n<p>But that means I need to place it on every page from the project, which is in contradiction with the role of the _Layout shared view!</p>\n\n<p>Where is the mistake in my code?</p>\n"},{"tags":["c#","jquery","asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":64,"score":0,"question_id":12853077,"title":"How to edit event which was saved ealier from full calender in MVC 4?","body":"<p>I am using Full Calender in my application and want to edit the events which was saved earlier.\nHow can I edit the events? My code is as shown below.\nI am using SQL as a database. Just want to edit the event which are displyed in the full calender.</p>\n\n<pre><code>@{\n    ViewBag.Title = \"schedule\";\n}\n\n@Html.Partial(\"_Calendar\")\n\n\n&lt;script type=\"text/javascript\"&gt;\n\n    $(function () {\n        var date = new Date();\n        var d = date.getDate();\n        var y = date.getFullYear();\n        var m = date.getMonth();\n        var calendar = $('#calendar').fullCalendar({\n            header: { left: 'prev,next today', center: 'title' },\n            selectable: true,\n            theme: true,\n            minTime: '8:00',\n            defaultEventMinutes: 30,\n            maxTime: '17:00',\n            allDaySlot: false,\n            defaultView: 'agendaWeek',\n            weekends: false,\n            firstHour: 9,\n            selectHelper: true,\n\n            select: function (start, end, allDay) {\n                //var date1 = dateFormat(new Date(start).toGMTString(), 'mm/dd/yyyy HH:MM:ss');\n                //var date2 = dateFormat(new Date(end).toGMTString(), 'mm/dd/yyyy HH:MM:ss');\n\n\n                var title = prompt('Event Title:');\n\n                    if (!!title) {\n                        $.ajax({\n                            type: \"POST\",\n                            data: { Start: start.toJSON(), End: end.toJSON(), Note: title },\n                            url: rootURL + \"Contractor/schedule/SaveSchedule\",\n                            color:'yellow',\n                            dataType: \"json\",\n                            success: function (data) {\n                                $('#eventToAdd').modal('hide');\n                                calendar.fullCalendar('renderEvent', { title: title, start: start, end: end, allDay: allDay }, true);                                        \n                            },\n                            error: function (XMLHttpRequest, textStatus, errorThrown) {\n                                $(\"#eventToAdd\").dialog(\"close\");\n                            }\n                        });\n                    }\n                    calendar.fullCalendar('unselect');\n\n            },\n            eventDrop: function (event, dayDelta, minuteDelta, allDay, revertFunc, calEvent, jsEvent, ui, view) {\n                var date1 = dateFormat(new Date(event.start), 'mm/dd/yyyy HH:MM:ss');\n                var date2 = dateFormat(new Date(event.end), 'mm/dd/yyyy HH:MM:ss');\n                $.ajax({\n                    type: \"POST\",\n                    data: { 'id':event.id, 'Start': date1, 'End': date2},\n                    url: \"/Contractor/schedule/UpdateSchedule\",\n                    dataType: \"json\",\n                    success: function (data) {\n\n\n                    },\n                    error: function (XMLHttpRequest, textStatus, errorThrown) {\n\n                    }\n                });\n            },\n            editable: true,\n            events: '@Url.Action(\"Getevent\",\"Schedule\")',\n            eventColor: '#028323'\n\n        });\n\n\n    });\n\n   &lt;/script&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12817433,"title":"Generating route specific views in an MVC 3 Application","body":"<p>As I am new to MVC 3 development I need some advice on the best approach to a development task I am currently working on.</p>\n\n<p>I am currently developing a payment forms application for the payment of various programmes eventually this will include a reasonable number of programmes most of which have at least three ways they can be paid (full payment, deposit and remainder - some also include discounts and a few can only be paid in full).</p>\n\n<p>I need to decide on a best method for implementing a routes based strategy which will allow users to enter specific URLs for the programme they are looking to pay for, essentially all of the programmes require the same information to be entered the only differences being the cost of each programme and the date or dates that programme runs on.</p>\n\n<p>I am trying to decide whether it would be better to have multiple views for each programme and then enter routes for each separate programme (I currently have over 30 programmes this includes full, deposit and remainder and a couple of discounts as well - this is likely to increase) or if it is possible to use routes to generate specific information for each programme in a single view so that I don't have to replicate essentially the same code for 30+ views and controllers.  </p>\n"},{"tags":["c#","asp.net-mvc-3","timespan"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":79,"score":3,"question_id":12855704,"title":"Timespan not accepting day in MVC3","body":"<p>I have a MVC3 application in which i want to set a timespan to for example 2 days and 5 hours.\nwhen i enter 02:05:00:00 it gives me the following exception:</p>\n\n<pre><code>System.OverflowException: SqlDbType.Time overflow.  Value '2.05:00:00' is out of range.  Must be between 00:00:00.0000000 and 23:59:59.9999999.\n</code></pre>\n\n<p>When i enter 05:00:00 it correctly saves 5 hours into the database. according to MSDN timespan has a property for days. How do i correctly set the days?</p>\n\n<p>Model:</p>\n\n<pre><code>public class ProductionTimeVM\n{        \n    [Required]\n    public TimeSpan DefaultTime { get; set; }\n}\n</code></pre>\n\n<p>In my view i just use:</p>\n\n<pre><code>@Html.TextBoxFor(x =&gt; x.DefaultTime)\n</code></pre>\n\n<p>For my controller:</p>\n\n<pre><code>public ActionResult SaveProductionTime(ProductionTimeVM vm)\n{           \n   ProductionTime productionTime = new ProductionTime();\n   productionTime.Default = vm.DefaultTime;\n\n   //some more code\n }\n</code></pre>\n\n<p>Any idea's?</p>\n"},{"tags":["c#",".net","asp.net-mvc-3","razor","view"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":45,"score":-2,"question_id":12851536,"title":"What's the reason of this? when I updated mvc3 view file,but open the front page will appear download box","body":"<p>when I updated mvc3 view file,but open the front page will appear download box, I clicked and saved, and then the file is  the source code,who can tell me why? thanks very much at first.\nIIS and MVC3 installed,my mvc project runs normal before I update it \n></p>\n\n<p>Environment :windows server 2008,iis7.5,sql server 2005</p>\n\n<blockquote>\n  <p></p>\n</blockquote>\n\n<p>Software versions:net4,mvc3</p>\n\n<p>In my project I used: Bundle,dotless,Gzip Compress,razor view engine</p>\n"},{"tags":["asp.net-mvc-3","tdd"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12855392,"title":"MVC3 and TDD pre or post coding","body":"<p>I am still getting to grips with MVC3, and now I am looking into TDD, and the thing that keeps coming up that makes no sense is.</p>\n\n<pre><code>The first step is to quickly add a test, basically just enough code to fail. \n</code></pre>\n\n<p>why create a test for your code to just pass.To me it makes much more sense to write my code then test it and see if it fails, and fix any and all bugs with that may occur then.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","active-directory"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12855490,"title":"Active Directory How to view hidden attributes","body":"<p>Premise, it is first time I work with Active Directory (my project is a web app in Asp.Net MVC).</p>\n\n<p>For a User in Active Directory I need to read an attribute <code>givenName</code> in my C#.</p>\n\n<p>My questions:</p>\n\n<ol>\n<li><p>Using Active Directory Browser on Windows Server I cannot see <code>givenName</code> attribute for a user. Can this attribute be hidden from the view in Active Directory?</p></li>\n<li><p>Could you provide me a sample of code which allow me to take the <code>givenName</code> attribute knowing the UserName for the user?</p></li>\n</ol>\n"},{"tags":["javascript","jquery","asp.net-mvc","asp.net-mvc-3","client-side-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":127,"score":0,"question_id":12844270,"title":"Custom client-side ASP.NET MVC 3 Validation","body":"<p>I'd like to change the default behavior of the client-side validation that ASP.NET MVC 3 uses in this way:</p>\n\n<p>If there is an error,  I don't want any span added to the HTML to show me my mistake.\nThe only thing I want is to change the color of the input field which has the error.</p>\n\n<p>I don't know if this is the \"right\" way to do it but this is what I already did:</p>\n\n<p>I edited the jquery.validate.unobtrusive.js:</p>\n\n<pre><code>  function onError( error, inputElement )\n  {  // 'this' is the form element\n        var container = $( this ).find( \"[data-valmsg-for='\" + inputElement[0].name + \"']\" ),\n        replace = $.parseJSON( container.attr( \"data-valmsg-replace\" ) ) !== false;\n\n  container.removeClass( \"field-validation-valid\" ).addClass( \"field-validation-error\" );\n\n  inputElement.addClass( \"custom-validation-error\" ); // &lt;--------- this is my edit\n  error.data( \"unobtrusiveContainer\", container );\n\n  if( replace )\n  {\n     container.empty();\n     error.removeClass( \"input-validation-error\" ).appendTo( container );\n  }\n  else\n  {\n     error.hide();\n  }\n }\n</code></pre>\n\n<p>This only adds the class named custom-validation-error which changes the color of the input field.\nBut, how do I remove this class, if everything is ok? </p>\n\n<p>And how do I stop from adding the spans to my HTML?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc-3","elmah"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":161,"score":1,"question_id":6873614,"title":"Elmah logPath outside wwwroot","body":"<p>We're trying to deploy our project but we can't get elmah to create the xml logs outsite the wwwroot. It's currently logging to inetpub{site}\\wwwroot\\App_Data because that's the only path that seemed to work. We would like to have it logging to our inetpub{site}\\logs folder. Any ideas on getting this to work? We've already tried ..\\ and ../ paths to the folder but they didn't seem to work. </p>\n"},{"tags":["html","css","asp.net-mvc-3","orchardcms"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":12854474,"title":"Adding different CSS files to different pages in Orchard CMS?","body":"<p>Let's say we have two pages in Orchard CMS. The homepage and the About US page. I want to use a RoyalSlider on the homepage which has its own CSS file. How do I include it only on the homepage and not on the about us page?</p>\n\n<p>In Orchard CMS I am using Contoso as the theme and I tried including the royalslider.css file on the <code>Layout.cshtml</code> using <code>Style.Include</code> but this will include the CSS file over all the pages in the website which is not a good practice.</p>\n"},{"tags":["asp.net-mvc","json","asp.net-mvc-3","http","post"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12854189,"title":"Is it possible to use [HttpPost] attribute on JsonResult","body":"<p>I use MVC 3 in Asp.net I need to send HTTP POST date to a Control.\nThe control should send back some JSON as response.\nAt the moment I'm using this code, but I'm not able to get the Form field in the <code>collection</code> .</p>\n\n<p>Any idea what is wrong?  </p>\n\n<pre><code>         [HttpPost]\n            public JsonResult LogOn(FormCollection collection, string returnUrl)\n            {\n    ...\nreturn this.Json(new { success = \"true\", msg = messages[0] });\n    }\n</code></pre>\n\n<hr>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;\n        Test LogOn&lt;/h1&gt;\n    &lt;form action=\"/Controller/LogOn\" method=\"post\"&gt;\n    UserName:\n    &lt;input type=\"text\" name=\"UserName\"&gt;&lt;br&gt;\n    Password:\n    &lt;input type=\"text\" name=\"Password\"&gt;&lt;br&gt;\n    RememberMe:\n    &lt;input type=\"hidden\" name=\"RememberMe\" value=\"true\"&gt;\n    &lt;input type=\"submit\" value=\"Submit\"&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","authentication","asp.net-authentication"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":683,"score":0,"question_id":10066025,"title":"ASP MVC 3 Basic Register / Login / Logout on a different table","body":"<p>I have seen the default 'Account' Model and Controller which comes default with a standard MVC3 Application, how ever, as I have generated my Database first. </p>\n\n<p>I already have designed my own 'Users' table, which I'd like a simple Registration / Log in / Log out to be implemented. </p>\n\n<p>Are there are good tutorials showing me how to do this or any advice from yourselves? Many thanks for your time.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","google-chrome"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12853411,"title":"Manually Write Stream Without CHUNKED Response","body":"<p>I am trying to manually write my response stream and close it so that I can continue doing some stuff after the response is closed.  I acheive this successfully by doing the following:</p>\n\n<pre><code>Response.StatusCode = 200\nResponse.ContentType = \"application/json; charset=utf-8\"\nResponse.Write(j)\nResponse.Flush()\nResponse.Close()\nDOWORK()\n</code></pre>\n\n<p>This works perfect in most instances, however for Chrome / Flash, there is a bug in flash were it is causing this to assume it's an IO error.  When analyzing the headers, the difference between manually sending a response with Return Json(results) and how I did it above is that when I return the data normally it uses a header of:</p>\n\n<pre><code>Content-Length: 44\n</code></pre>\n\n<p>Where as when I send it with the code above I get:</p>\n\n<pre><code>Transfer-Encoding: chunked\n</code></pre>\n\n<p>Is it possible to do what I want but not have the data chunked?  I know this is not ASP.net specific, rather a bug in flash for chrome, but I would like to solve this.</p>\n"},{"tags":["c#","jquery","asp.net-mvc-3",".net"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":11769406,"title":"Is there a way (or a library) that takes ADOMD CellSet class and creates a Pivot table","body":"<p>I can get CellSet from the OLAP cube.</p>\n\n<p>I want to create a generic function that takes a valid CellSet and renders into a pivot table format.</p>\n\n<p>My current technologies are C#, jquery (javascript) and mvc3.</p>\n\n<p>Can someone please recommend a plugin in jquery or give an understanding of how to take a cell set and create a pivot table with drill down functionality of it?</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12633982,"title":"How do I do Sub Object Custom Validation mvc3","body":"<p>I have an object (header) that has a list of sub-ojects (details) that I want to do custom validation on prior to accepting data.  I've tried ModelState.IsValid and TryValidateModel, but it doesn't seem to fire the Validate method on the sub-objects (only the header object).</p>\n\n<p>So on submission I see the validation fire for the header, but not the sub-ojects.  Then if I do a TryValidateModel I again see (breakpoint) the validation method get called on the header, but not on the sub-objects.</p>\n\n<p>The annotated validation (must be number, etc...) seems to be working on the sub-objects, just not the custom logic added via the IValidatableObject interface.  Any help would be greatly appreciated.</p>\n"},{"tags":["c#","asp.net-mvc-3","mini-profiler"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12852466,"title":"How can MiniProfiler display details from several levels of depth, or from ModelBinders?","body":"<p>I've just integrated MiniProfiler into a product on which I've been working.</p>\n\n<p>It's great, and straightforward, however there's not that much documentation that I've found for things that go beyond the most vanilla of usages.</p>\n\n<p>For example, the following example code. (I know it could probably be refactored to reduce the levels of nesting, but assume that's not possible for this question)</p>\n\n<p>There are 3 levels of nesting, below the overall action. From what I can tell, MiniProfiler will only display the first two levels of depth. Is this really the case, i.e. is it a feature? Or am I not using it correctly?</p>\n\n<pre><code>private MiniProfiler Profiler { get; set; }\n\npublic ThingController()\n{\n    Profiler = MiniProfiler.Current;\n}\n\npublic ActionResult GetPageSection(User user)\n{\n    List&lt;RecordViewModel&gt; viewModel;\n    using (Profiler.Step(\"Get Section\"))\n    {\n        using (Profiler.Step(\"Get Records from user\"))\n            {\n                viewModel = user.Records.Where(r =&gt; r.Active).Select(\n                    r =&gt;\n                        {\n                            Item item\n                            using (Profiler.Step(\"Get Item from service\"))\n                            {\n                                item = GetItem(r);\n                            }\n\n                            using (Profiler.Step(\"Build record view model\"))\n                            {\n                                return new RecordViewModel(r, item);\n                            }\n                        }).ToList();\n            }\n    }\n    return PartialView(viewModel);\n}\n</code></pre>\n\n<p>The other issue is when trying to use the MiniProfiler from within a ModelBinder, e.g.:</p>\n\n<pre><code>public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)\n{\n    using (Profiler.Step(\"Bind user\"))\n    {\n        // Do stuff\n    }\n}\n</code></pre>\n\n<p>The MiniProfiler is null.</p>\n\n<p>Is there any way to get the MiniProfiler to work for either of these scenarios?</p>\n\n<p>Note: I'm not using MiniProfiler.MVC3. I'm just using MiniProfiler. I'm not sure if this would make a difference.</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":12851899,"title":"load dropdown based on radiobutton select using kendo","body":"<p>I am new to MVC3 razor and also to Kendo, I have a scenerio like based on radio button select value I need to populate the dropdown and based on that I need to load the grid. </p>\n\n<p>And also my screen contains 5 buttons how to get the ID of these buttons on the controller because based on some logic I need to disable the buttons. I have checked the below option but this doen't support for bubttons.</p>\n\n<pre><code>  object displayMode = (Convert.ToBoolean(ViewData[\"Flag\"])) ? null : new { disabled = \"disabled\" };\n  @Html.TextBox(\"CompanyName\", \"\", displayMode)\n</code></pre>\n"},{"tags":["asp.net-mvc-3","antiforgerytoken"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12840970,"title":"AntiForgeryConfig.CookieName inconsistent with HttpContext.Request.Cookies - why?","body":"<p>We have an app written in ASP.NET MVC 3, that uses <code>@Html.AntiForgeryToken()</code>.</p>\n\n<p>We want to validate the token in our custom attribute (without a need of specifying the default attribute <code>[ValidateAntiForgeryToken]</code>). This should be pretty straightforward, but I've found an interesting inconsistency.</p>\n\n<ol>\n<li><p>All the code below is running within the following method:</p>\n\n<pre><code>[AttributeUsage(AttributeTargets.Method | AttributeTargets.Class, AllowMultiple = false, Inherited = true)]\npublic class ValidateJsonAntiForgeryTokenAttribute : FilterAttribute, IAuthorizationFilter\n{  \n    public void OnAuthorization(AuthorizationContext filterContext)\n    {\n    ...\n</code></pre></li>\n<li><p><code>AntiForgeryConfig.CookieName</code> value is <code>__RequestVerificationToken</code>. That seems to make sense.</p></li>\n<li><p><code>filterContext.HttpContext.Request.Cookies</code> contains 1 cookie - but its name is <code>__RequestVerificationToken_Lw__</code>.</p></li>\n</ol>\n\n<p><strong>Question:</strong> aren't those two supposed to be the same so I can use following snippet to get the cookie?</p>\n\n<pre><code>var cookie = filterContext.HttpContext.Request.Cookies[AntiForgeryConfig.CookieName];\n</code></pre>\n"},{"tags":["asp.net-mvc-3","razor","radio-button"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":12844763,"title":"Getting a list of radio button values in ASP MVC 3","body":"<p>I am developing a page for rating questions.</p>\n\n<p>In the view, I have a list of questions and 5 radio buttons in front of each one of them.</p>\n\n<pre><code>&lt;input name=\"evalId\" type=\"hidden\" value=\"@Model.Evaluation.EvalId\" /&gt;\nforeach (var question in questionList)\n{\n     &lt;input name=\"questionId\" type=\"hidden\" value=\"@question.QuestionId\" /&gt;\n     &lt;div class=\"row_star\" style=\"border-bottom : 0 none; background: none;\"&gt;\n       @if (!String.IsNullOrEmpty(question.QuestionTitre))\n       {\n         &lt;p&gt;@question.QuestionTitre.TrimEnd()&lt;/p&gt;\n       }\n\n       @* here goes the code for 5 radio buttons*@\n}\n</code></pre>\n\n<p>Now, in my controller I want to be able to know which radio button was checked for each question.</p>\n\n<p>How can I do that ?</p>\n\n<p>Here is my ViewModel</p>\n\n<pre><code>public class EvaluationViewModel\n{\n    /// &lt;summary&gt;\n    /// \n    /// &lt;/summary&gt;\n    public EvalEvaluation Evaluation\n    {\n        get;\n        set;\n    }\n\n    /// &lt;summary&gt;\n    /// \n    /// &lt;/summary&gt;\n    public Dictionary&lt;EvalQuizz, List&lt;EvalQuestion&gt;&gt; EvalQuizzQuestionList\n    {\n        get;\n        set;\n    }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12837288,"title":"Updating multiple items within same view","body":"<p>I am trying to make a stock take application, My view loads all my stock with one editor.\nMy controller is not getting any of the data from the view?</p>\n\n<p>I want to be able to edit all my stock at the same time? \nHow can I do this </p>\n\n<p>Model Code</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\n\nnamespace FlatSystem.Models\n{\npublic class Stock\n{\n    public int ID { get; set; }\n    public string Item_Name { get; set; }\n    public int Actual_Stock { get; set; }\n    public int Wanted_Stock { get; set; }\n\n\n}\n}\n</code></pre>\n\n<p>View Code</p>\n\n<pre><code>@model IEnumerable&lt;FlatSystem.Models.Stock&gt;\n\n@using (Html.BeginForm())\n{\n@Html.ValidationSummary(true)\n&lt;div class=\"sidemenu\"&gt;\n&lt;div class=\"sidemenu-heading\"&gt;\n    ReStock\n&lt;/div&gt;\n&lt;div class=\"div-body\"&gt;\n&lt;table&gt;\n&lt;tr&gt;\n    &lt;th&gt;\n        Item Name\n    &lt;/th&gt;\n    &lt;th&gt;\n        Wanted Stock\n    &lt;/th&gt;\n    &lt;th&gt;\n        Stock On Hand\n    &lt;/th&gt;\n    &lt;th&gt;&lt;/th&gt;\n&lt;/tr&gt;\n@foreach (var item in Model)\n{\n&lt;tr&gt;\n    &lt;td&gt;\n        @Html.DisplayFor(modelItem =&gt; item.Item_Name)\n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.DisplayFor(modelItem =&gt; item.Wanted_Stock)\n    &lt;/td&gt;\n    &lt;td&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(modelItem =&gt; item.Actual_Stock)\n        @Html.ValidationMessageFor(modelItem =&gt; item.Actual_Stock)\n    &lt;/div&gt;\n    &lt;/td&gt;\n    @Html.HiddenFor(modelItem =&gt; item.ID)\n    &lt;/tr&gt;\n    }\n    &lt;/table&gt;\n    &lt;/div&gt;\n    &lt;/div&gt;\n&lt;input type=\"submit\" value=\"Submit\" /&gt;\n}\n</code></pre>\n\n<p>Controller Code</p>\n\n<pre><code>        [HttpPost]\n    public ActionResult ReStock(List&lt;Stock&gt; stock)\n    {\n        foreach (var item in stock)\n        {\n            if (ModelState.IsValid)\n            {\n                GR.InsertOrUpdate(item);\n            }\n        }\n        GR.Save();\n        return RedirectToAction(\"Restock\");\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","sharp-architecture"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":325,"score":2,"question_id":8931161,"title":"Sharp Architecture Simple CRUD Application","body":"<p>i am trying to get start with the Sharp Architecture by building the test application mentioned <a href=\"https://github.com/sharparchitecture/Sharp-Architecture/wiki/Simple-crud-application\" rel=\"nofollow\"><strong>here</strong></a>, i have followed through the steps given in the tutorial but hit a road block where the database schema generation is described. According to the tutorial running the test </p>\n\n<pre><code>IceCreamYouScreamCorp.Tests.SharpArchTemplate.Data.NHibernateMaps.CanGenerateDatabaseSchema\n</code></pre>\n\n<p>will generate the schema in the Database folder, i couldn't find this test in the generate application by <a href=\"http://weblogs.asp.net/alecwhittington/archive/2010/10/10/using-templify-to-create-a-new-s-arp-architecture-solution.aspx\" rel=\"nofollow\">Templify</a>. Please anybody who knows the solution guide me how to run this test so to generate the database schema...</p>\n"},{"tags":["c#","asp.net-mvc-3","model-binding"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12850169,"title":"MVC3 - HiddenFor Dictionary Values","body":"<p>I have a dictionary property called Week:</p>\n\n<pre><code>public IDictionary&lt;DayOfWeek, Day&gt; Week { get; private set; }\n</code></pre>\n\n<p>And I'm trying to pass its values off to <code>HiddenFor</code> (Days)</p>\n\n<pre><code>@Html.HiddenFor(x =&gt; x.Week.Values)\n</code></pre>\n\n<p>It has to be a property of the Model so I can't do <code>x.Week.Values.ToList();</code></p>\n\n<p>How would I go about passing the Dictionary Values to the <code>Html.HiddenFor</code>?</p>\n"},{"tags":["asp.net","html","asp.net-mvc-3","forms","twitter-bootstrap"],"answer_count":3,"favorite_count":5,"up_vote_count":9,"down_vote_count":1,"view_count":1594,"score":8,"question_id":11065442,"title":"Integrating Twitter Bootstrap with Asp.net MVC 3 forms","body":"<p>I am using Asp.net MVC 3 and Twitter Bootstrap. What I want is to integrate both of them. The big problem for me is forms. I am using the <code>HtmlHelper</code> and it is a problem, when it comes to the validation, I want it to generate HTML like this:</p>\n\n<pre><code>&lt;div class=\"control-group error\"&gt;\n   &lt;label for=\"field\" class=\"control-label\"&gt;OMG this label is so awesome: &lt;/label&gt;\n   &lt;div class=\"controls\"&gt;\n      &lt;input type=\"text\" name=\"field\" id=\"field\" value=\"yeah\" /&gt;\n      &lt;span class=\"help-inline\"&gt;Eventually some error :C&lt;/span&gt;\n   &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Here is my HtmlHelper code:</p>\n\n<pre><code>@Html.LabelFor(x =&gt; x.Field)\n@Html.EditorFor(x =&gt; x.Field)\n@Html.ValidationMessagesFor(x =&gt; x.Field)\n</code></pre>\n\n<p>The problem is that I want the class error on outermost div to be set only if there actually is an error on this field. Other problem is that I don't know how to enforce using span tag for errors. I could write my method in HtmlHelper, but it'd make me reimplement almost all of the functionality of the <code>LabelFor</code>, <code>EditorFor</code> and <code>ValidationMessageFor</code>. Is there a simpler way to do this? And what about the unobtrusive validation?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":12848200,"title":"Clear text of a Html.TextBoxFor with Javascript or JQuery","body":"<p>I can't seem to figure out how to clear the text from a razor Textbox.</p>\n\n<p>I've tried this:</p>\n\n<pre><code>@Html.TextBoxFor(m =&gt; m.Field)\n\n\n    $(document).ready(function () {\n        $(\".link\").click(function () {                \n            $(\"#Field\").value = \"\";\n            return false;\n        });    \n    });\n</code></pre>\n\n<p>Didn't work. </p>\n"},{"tags":["jquery","html","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":202,"score":2,"question_id":12844757,"title":"How to show popup on button click in MVC3 using jQuery?","body":"<p>I want to show popup box on simple HTML button click using jQuery in MVC3.  What would be a sample of how to do this?</p>\n"},{"tags":["ajax","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":12847154,"title":"ASP MVC nested arrays model binding","body":"<p>I have the followingsimple models:</p>\n\n<pre><code>public class MainModel\n{\n    public int Id {get;set;}\n    public List&lt;Question&gt; Questions {get;set;}\n}\n\npublic class Question\n{\n    public string Text {get;set;}\n    public List&lt;Answer&gt; Answers {get;set;}\n}\n\npublic class Answer\n{\n    public byte No {get;set;}\n    public string Text {get;set;}\n    public bool Correct {get;set;}\n}\n</code></pre>\n\n<p>I have strongly typed view to MainModel which allows users to add custom number of questions and answers for each question (and remove them as well).</p>\n\n<p>I'm using the method with adding hidden indexing field and it works ok for the Question level (dynamically added questions are being included on POST). However, when it comes to dynamically added answers, it's not working properly. This is the HTML I'm having rendered as a result:</p>\n\n<pre><code>&lt;div class=\"answer\"&gt;\n&lt;input type=\"hidden\" value=\"1\" name=\"Questions[2].Answers.Index\"&gt;\n&lt;input type=\"checkbox\" data-checkbox-for=\"Questions[2].Answers[1].Correct\" checked=\"checked\"&gt;\n&lt;input type=\"hidden\" value=\"1\" name=\"Questions[2].Answers[1].No\"&gt;\n&lt;input type=\"text\" value=\"2.1\" name=\"Questions[2].Answers[1].Text\"&gt;\n&lt;input type=\"hidden\" value=\"true\" name=\"Questions[2].Answers[1].Correct\"&gt;\n&lt;span class=\"remove-answer link\"&gt;Remove&lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12846325,"title":"Autocomplete using jQuery/AJAX combination under ASP.NET MVC 3 fails (on some inputs)","body":"<p>I have a searchfield for searching between employees. The code for the view looks like this:</p>\n\n<pre><code>&lt;input id=\"employeeSearchText\" name=\"employeeSearchText\" type=\"text\" autocomplete=\"off\" /&gt;  \n\n&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n    $(\"#employeeSearchText\").autocomplete({\n        source: function (request, response) {\n            $.ajax({\n                url: \"/Medarbejdere/Soeg\",\n                type: \"POST\",\n                dataType: \"json\",\n                data: { searchText: request.term },\n                success: function (data) {\n                    response($.map(data, function (item) {\n                        return { label: item.Firstname + \" \" \n                 + item.Lastname, value: item.description, id: item.description }\n                    }))\n                }\n            })\n        }\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>The path \"/Medarbejdere/Soeg\" is defined in the controller as:</p>\n\n<pre><code>[HttpPost]\npublic JsonResult Soeg(string searchText)\n{\n    EmployeeRepository repo = new EmployeeRepository();\n    var result = repo.SearchByKeywords(searchText.Trim(), 10);\n    return Json(result, JsonRequestBehavior.AllowGet);\n}\n</code></pre>\n\n<p>My problem is that for some inputs, the result never shows up. Actually typing just one letter and waiting for the input, the same 5 letters of the english alphabet never gives back a result, consistently.</p>\n\n<p>Putting a breakpoint in the \"Soeg\" action is correctly reached for all inputs and repo.SearchByKeywords() also returns the correct result for all inputs, but for some reason, when the result is returned to the AJAX call, it never renders.</p>\n\n<p>I have absolutely no idea how to go about debugging at this stage. I use the MVC mini-profiler, which shows the following behaviour (assuming the letter 'c' does not give results and the letter 'e' does)</p>\n\n<p>Typing 'e' will fire a call to the action, trigger the breakpoint and the mvc-mini-profiler debug information on the left side of the browser will show how long the call took.\nTyping 'c' will fire a call to the action, trigger the breakpoint but will NOT show up in the mvc-mini-profiler debug window.</p>\n\n<p>Now if I type another 'c' so that the search string is \"cc\", the profiler will actually show two calls to the action, but ONLY upon typing the second 'c'</p>\n\n<p>Any ideas for a solution or even suggestions as to how I further debug the problem?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["json","asp.net-mvc-3","kendo-ui"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":100,"score":-2,"question_id":12845016,"title":"Kendo UI - InvalidOperationException: A circular reference was detected while serializing an object of type","body":"<p>Posted 3 hours ago (permalink)</p>\n\n<p>I am getting the following error when binding my Model to a Kendo Grid.</p>\n\n<p><em>A circular reference was detected while serializing an object of type [my type]</em></p>\n\n<p>What is strange is that the type of the object that is causing the circular reference is not the same as the type of object of the Model for this page... ie:</p>\n\n<pre><code>@model IEnumerable&lt;Models.Type&gt;\n</code></pre>\n\n<p>Is not the same type that is causing this error. What could be the problem?</p>\n\n<p>Here is the code that is generating this exception:</p>\n\n<pre><code>@(Html.Kendo().Grid(Model)\n    .Name(\"Grid\")\n    .Columns(columns =&gt;\n    {\n        columns.Bound(p =&gt; p.Name).Groupable(false);\n    })\n    .Pageable()\n    .Sortable()\n    .Scrollable()\n    .Filterable()  \n    .DataSource(dataSource =&gt; dataSource      \n        .Ajax()\n        .ServerOperation(false)      \n     )\n)\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","kendo-ui"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":142,"score":0,"question_id":12834086,"title":"How to format the row based on condition in kendo ui mvc grid","body":"<p>I am working on asp.net mvc. I am trying to display list of messages in a Kendo mvc ui grid. \nI have written the code like,</p>\n\n<pre><code>Html.Kendo().Grid((List&lt;messages&gt;)ViewBag.Messages))\n                .Name(\"grdIndox\")\n                .Sortable(m =&gt; m.Enabled(true).SortMode(GridSortMode.MultipleColumn))\n                .HtmlAttributes(new { style = \"\" })\n                .Columns(\n                col =&gt;\n                {\n                    col.Bound(o =&gt; o.RecNo).HtmlAttributes(new { style = \"display:none\" }).Title(\"\").HeaderHtmlAttributes(new { style = \"display:none\" });\n                    col.Bound(o =&gt; o.NoteDate).Title(\"Date\").Format(\"{0:MMM d, yyyy}\");\n                    col.Bound(o =&gt; o.PatName).Title(\"Patient\");\n                    col.Bound(o =&gt; o.NoteType).Title(\"Type\");\n                    col.Bound(o =&gt; o.Subject);\n\n                }\n\n                )\n                .Pageable()\n                .Selectable(sel =&gt; sel.Mode(GridSelectionMode.Single).Type(GridSelectionType.Row))\n                .DataSource(\n\n                           ds =&gt; ds.Ajax().ServerOperation(false).Model(m =&gt; m.Id(modelid =&gt; modelid.RecNo))\n                         .PageSize(10)\n                            //.Read(read =&gt; read.Action(\"Messages_Read\", \"Msg\"))\n                )\n\n                .Events(ev =&gt; ev.Change(\"onSelectingGirdRow\"))\n                ) \n</code></pre>\n\n<p>and i have the field in the table like IsRead-boolean type. so if the message is unread message then i need to format that record with bold font. I have used clientTemplates but with that i am able to format only particular cells i want format entire row. Please guide me.</p>\n"},{"tags":["asp.net-mvc-3","razor","lambda","webgrid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12846369,"title":"column formatting in webgrid","body":"<p>I have been working on formatting a column in webgrid. The requirement for this column is if the text is greater than 30, display [+] after 30 characters. Upon clicking the '+\", entire text should be displayed.<br>\nMy approach for this was to implement a div along with text if length is greater than 30 and later handle it using jquery(not sure how I am going to do this part though)           </p>\n\n<pre><code>grid.Column(x=&gt;x.Text, format: x=&gt;x.Text.Length &lt;=30 ? x.Text : string.Format(\"{0}{1}\", x.Text.SubString(0,30).Trim(),\"&lt;div id = 'moreId' Text = '[+]' /&gt;\")), \n//Other coumns\n</code></pre>\n\n<p>Please suggest how it needs to be handled.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12845926,"title":"Embedding an object inside another object","body":"<p>I am trying to duplicate a complex object. The orginal object is like</p>\n\n<pre><code>         Note note = db.Notes.FirstorDefault(n............);\n</code></pre>\n\n<p>When I mouse over the Note object is see this stuctor</p>\n\n<p>Note | Data.Model.Note</p>\n\n<p>If drill down I see</p>\n\n<p>Base Data.Model.AnalyNote</p>\n\n<p>If drill down again I see</p>\n\n<p>Base Data.Model CPObject</p>\n\n<p>if look at the varible \"note\" I see this in the first layer</p>\n\n<blockquote>\n<pre><code>         +base Data.Model.Note\n         +AnalyNotes\n          FisYear\n          Quarter\n          QReport\n</code></pre>\n</blockquote>\n\n<p>If I look at the second layer</p>\n\n<blockquote>\n<pre><code>         +base Data.Model.AnalyNote\n         +Attachments\n         +Classify\n          Headline\n          IsDraft\n</code></pre>\n</blockquote>\n\n<p>If I go to third layer</p>\n\n<blockquote>\n<pre><code>         +Data.Model.CPObject\n          EntryId\n         +EntryDate\n          Id\n</code></pre>\n</blockquote>\n\n<p>Each of these ( Note, AnalyNote, CPObject ) are seperate Models. I can create the seperate Models but do not understand how to embed them to duplicate the orginal Note model. I created the three\nusing</p>\n\n<pre><code>         var NNotes = new Notes()\n         {\n            data.....\n         }\n\n         var AAnote = new AnalyNote()\n         {\n            data......\n         }\n\n         var CPONote = new CPObject()\n         {\n            data.....\n         }\n</code></pre>\n\n<p>This is as far as I have gotten.</p>\n"},{"tags":["javascript","asp.net-mvc-3","jquery-ui","filtering","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":215,"score":0,"question_id":12828777,"title":"Kendo UI unable to filtering the grid table","body":"<p>I want to filter the table by last name, but cant work, here is my code</p>\n\n<p>in controller</p>\n\n<pre><code>  public JsonResult Filtering()\n    {\n        HealthContext rc = new HealthContext();\n        var last = rc.Profiles.Select(lastt =&gt; new SelectListItem { Text = lastt.LastName, Value = lastt.Id.ToString() }).ToList();\n        return Json(last.ToList(), JsonRequestBehavior.AllowGet);\n\n\n    }\n</code></pre>\n\n<p>in view</p>\n\n<pre><code>  &lt;script type=\"text/x-kendo-template\" id=\"template\"&gt;\n            &lt;div class=\"toolbar\"&gt;\n                &lt;label class=\"category-label\" for=\"Last name\"&gt; by last name:&lt;/label&gt;\n                &lt;input type=\"search\" id=\"LastName\" style=\"width: 230px\"&gt;&lt;/input&gt;\n            &lt;/div&gt;\n        &lt;/script&gt;\n</code></pre>\n\n<p>and also</p>\n\n<p>the following snippet is for display table and filtering the last name</p>\n\n<pre><code>&lt;script&gt;\n                  $(document).ready(function() {\n                      $(\"#grid\").kendoGrid({\n                          dataSource: {\n\n                              transport: {\n                                  read: {\n                                      url: \"/Profiles/GetJsonData\",\n                                      dataType: \"json\"\n                                  }\n                              },\n\n                              pageSize: 10,\n\n                          },\n                        toolbar: kendo.template($(\"#template\").html()),\n                          height: 250,\n                          filterable: true,\n                          sortable: true,\n                          pageable: true,\n                          defaultSorting: 'LastName ASC',\n                          columns: [{\n                                  field: \"Id\",\n                                  filterable: false\n                              },\n\n                              {\n                                  field: \"FirstName\",\n                                  title: \"First Name\",\n\n                                  width: 100,\n\n                              }, {\n                                  field: \"LastName\",\n                                  title: \"Last Name\",\n\n                                  width: 200\n                              }, {\n                                  field: \"Gender\",\n                                  title: \"Gender\"\n                              }\n                          ]\n                      });\n\n\n                      var dropDown = grid.find(\"#LastName\").kendoDropDownList({\n                                            dataTextField: \"LastName\",\n                                            dataValueField: \"Id\",\n                                            autoBind: false,\n                                            optionLabel: \"All\",\n                                            dataSource: {\n\n                            severFiltering: true,\n                             transport: {\n                                  read: {\n                                      url: \"/Profiles/Filtering\",\n                                      dataType: \"json\"\n                                  }\n                              },\n                        },\n                        change: function() {\n                            var value = this.value();\n                            if (value) {\n                                grid.data(\"kendoGrid\").dataSource.filter({ field: \"Id\", operator: \"eq\", value: parseInt(value) });\n                            } else {\n                                grid.data(\"kendoGrid\").dataSource.filter({});\n                            }\n                        }\n\n                });\n                });\n              &lt;/script&gt;\n</code></pre>\n\n<p>so the problem is the drop down list is not show up as well as the value/ data, any idea guys? </p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12844034,"title":"regular expression for multiple emails allowing comma and semicolon both","body":"<p>I need regular expression for multiple emails allowing comma and semicolon both. </p>\n\n<p>I have used this pattern for comma separated emails:</p>\n\n<pre><code>[RegularExpression(RegexStrings.MULTIEMAILS, ErrorMessage = \"Please enter valid email address(es)\")]\n</code></pre>\n\n<p>But it is not working for semicolons.</p>\n\n<p>What is the correct expression for multiple emails following either comma or semicolon with them?</p>\n"},{"tags":["c#","asp.net-mvc-3","file-upload"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":12668978,"title":"Uploading file through an action of a controller - two forms in one view","body":"<p>The problem is I have two forms in the same view. The controller is <code>Users</code> and I have two actions for the two forms: Edit and UploadPhoto.</p>\n\n<p>I have been using the Edit portion for awhile and it's working. Now I want to allow users to upload their photo on the same page. There is a separate button for saving the user information and another for saving the picture.</p>\n\n<p><img src=\"http://i.stack.imgur.com/dFjFY.png\" alt=\"enter image description here\"></p>\n\n<p>The page model is <code>@model sportingbiz.Models.ViewModels.UserEditViewModel</code></p>\n\n<p>The second form</p>\n\n<pre><code>&lt;fieldset title=\"Upload photo\"&gt;\n    &lt;legend&gt;Change Profile Picture&lt;/legend&gt;\n    &lt;div&gt;\n        @using(Html.BeginForm(\"UploadPhoto\", \"Users\", FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n        {\n            &lt;table&gt;\n            &lt;tr&gt;\n                &lt;td&gt;\n                    &lt;img src=\"@Url.Content(\"~/Content/images/noprofilepic.jpg\")\" \n                &lt;/td&gt;\n                &lt;td&gt;\n                    &lt;input type=\"file\" name=\"photoFile\" /&gt;\n                    &lt;br /&gt;&lt;br /&gt;\n                    &lt;input type=\"submit\" value=\"Upload\" /&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;/table&gt;                \n        }\n    &lt;/div&gt;\n&lt;/fieldset&gt;\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>public class UsersController : Controller\n{\n    UsersRepository usersRepo = new UsersRepository();\n\n\n    [Authorize]\n    [HttpPost]\n    public void UploadPhoto(HttpPostedFile photoFile)\n    {\n        if (photoFile == null)\n        {\n            return;\n        }\n\n        if (photoFile.ContentLength &lt;= 0)\n        {\n            return;\n        }\n\n        string filename = Path.GetFileName(photoFile.FileName);\n        if (Path.GetExtension(filename) == \"\")\n            return;\n\n    }\n}\n</code></pre>\n\n<p>When I click upload my page navigates to <code>http://localhost/mvcapp/Users/UploadPhoto</code> with a blank screen. What I want is to return to the Edit page and probably show errors to the user that file was not uploaded. Features like <code>ModelState.IsValid</code> or <code>ModelState.AddModelError</code></p>\n\n<p>There is also no option of returning the same view e.g. return View(model)</p>\n\n<p>Am I doing this wrong way? Some suggestion is to use Ajax uploader or Uploader. Am also thinking of separating the forms putting the Upload portion in its own view. Can PartialView help in this respect</p>\n"},{"tags":["asp.net-mvc-3","asynchronous","postback","renderpartial","sitefinity-5"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":97,"score":1,"question_id":12844143,"title":"MVC Async Postback & RenderPartial","body":"<p>Apologies if the Title is a bit misleading, I'm just not sure how to go about doing this.</p>\n\n<p>Ok here's the scenario. I am developing a feedback mvc widget that is housed in a Sitefinity 5.1 website. This widget is effectively just a div that is displayed when the user hovers over the feedbackLaunch label using jquery.</p>\n\n<p><strong>VIEW / WIDGET</strong></p>\n\n<pre><code>@using (Html.BeginFormSitefinity())\n{  \n    &lt;label for=\"feedbackLaunch\"&gt;\n        &lt;span class=\"FeedbackHighlight feedbackLaunch\"&gt;Feedback&lt;/span&gt;\n    &lt;/label&gt;\n\n    &lt;div class=\"feedback\"&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"FeedbackContent\" style=\"display: none\"&gt;\n        &lt;h1&gt;Feedback&lt;/h1&gt;\n        &lt;h2&gt;I thought this page was:\n            &lt;br /&gt;\n            &lt;br /&gt;\n            @Html.DropDownListFor(x =&gt; x.PageRatingId, new SelectList(Model.Rating, \"PageRatingId\", \"PageRatingName\"))\n            &lt;br /&gt;&lt;br /&gt;\n            Please give further detail:\n            &lt;br /&gt;&lt;br /&gt;\n             @Html.TextAreaFor(model =&gt; model.PageDetails, new { @style = \"height: 100px;\" })\n              &lt;br /&gt;&lt;br /&gt;\n       &lt;input type=\"submit\" value=\"Submit\" /&gt;\n\n        &lt;/h2&gt;\n    &lt;/div&gt;\n\n}\n</code></pre>\n\n<p>So I have a rendered page in the background with this feedback div now popped up. Lovely.</p>\n\n<p>However, what I now want to do is do a submit click but without doing a postback, since the feedback div would disappear. Upon submission, I would essentially displaying a new div, or view, informing the info has been posted sent (that'll be fired off to a webservice).</p>\n\n<p>What would be the best approach to do this?</p>\n\n<p>Should I have two partial views, one for the submission form and the other for the \"Thank you\" section?</p>\n\n<p>I have mentioned Sitefinity just in case there are any gotchas involved with that given it's quite a new feature of the CMS.</p>\n\n<p>Any pointers gratefully received.</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":106,"score":-3,"question_id":12832926,"title":"How to add string to IEnumerable - C#","body":"<p>I have following class:</p>\n\n<pre><code>class A\n{\n  public IEnumerable Song { get; set; }\n}\n</code></pre>\n\n<p>Then in Index i have code like this:</p>\n\n<pre><code>public ActionResult \n{\n    a.Song = (Path.Combine(Server.MapPath(\"~/Content/themes/base/songs\"),\n                           file)).ToList();\n    return View();\n}\n</code></pre>\n\n<p>This code is not working how can i add string path to IEnumerable Song? Or is there a better way or other way to do this rather than using IEnumerable?</p>\n\n<p>-- I dont understand -ve ratings? It is a legit question? \nAs i described above i am trying to collect 4 or 5 url's as string under a.Song. \nThe above code returs character like 134 char string array. Which is not what i am trying to get. I hope this explaination helps but i still dont understand -ve ratings. Can people who assing -ve rating explain why they did that?</p>\n"},{"tags":["asp.net-mvc-3","signalr","signalr-hub","signalr.client"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":12824742,"title":"SignalR in Asp.net MVC 3: hub is undefined","body":"<p>I'm a newbie in SignalR. I'm trying to do this <a href=\"http://msdn.microsoft.com/en-us/magazine/hh852586.aspx\" rel=\"nofollow\">Progress Bar example</a>.<br>\nI can't download and install the packages via NuGet, cause there is a proxy in my work that denies the access. So I include de DLLs and the scripts in project by myself.</p>\n\n<p>My view code is below:</p>\n\n<pre><code>&lt;h2&gt;@ViewBag.Message&lt;/h2&gt;\n&lt;input type=\"button\" id=\"bookButton\" value=\"Book flight\" /&gt;\n&lt;br /&gt;\n&lt;b&gt;Status:&lt;/b&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span id=\"msg\"&gt;&lt;/span&gt;\n&lt;hr /&gt;\n&lt;input type=\"button\" id=\"percButton\" value=\"Process pending emails\" /&gt;\n&lt;div id=\"bar\" style=\"border: #000 1px solid; width: 300px;\"&gt;\n&lt;/div&gt;\n&lt;link href=\"@Url.Content(\"~/Content/Site.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;link href=\"@Url.Content(\"~/Content/gauge-bar.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.6.4.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/json2.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.signalr.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/signalr/hubs\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/simple-gauge-bar.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        var bookingHub = $.connection.bookingHub;\n        $(\"#percButton\").click(function () {\n            bookingHub.processPendingEmails();\n        });\n\n        $(\"#bookButton\").click(function () {\n            bookingHub.bookFlight(\"fco\", \"jfk\");\n        });\n\n        bookinghub.updategaugebar = function (perc) {\n            $(\"#bar\").html(gaugebar.generate(perc));\n        };\n        bookinghub.displaymessage = function (message) {\n            $(\"#msg\").html(message);\n        };\n\n        $.connection.hub.start();\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>My Hub code:</p>\n\n<pre><code> public class BookingHub : Hub\n{\n    public void Send(String message)\n    {\n\n        // Call the addMessage method on all clients.\n        Clients.displayMessage(message);\n    }\n\n    public void BookFlight(String from, String to)\n    {\n        // Book first leg\n        Clients.displayMessage(String.Format(\"Booking flight: {0}-{1} ...\", from, to));\n        Thread.Sleep(2000);\n\n        // Book return \n        Clients.displayMessage(String.Format(\"Booking flight: {0}-{1} ...\", to, from));\n        Thread.Sleep(3000);\n\n        // Book return \n        Clients.displayMessage(String.Format(\"Booking flight: {0}-{1} ...\", to, from));\n        Thread.Sleep(2000);\n\n        // Some return value\n        Clients.displayMessage(\"Flight booked successfully.\");\n    }\n\n    public void ProcessPendingEmails()\n    {\n        Clients.updateGaugeBar(10);\n        Thread.Sleep(2000);\n\n        Clients.updateGaugeBar(40);\n        Thread.Sleep(3000);\n\n        Clients.updateGaugeBar(64);\n        Thread.Sleep(2000);\n\n        Clients.updateGaugeBar(77);\n        Thread.Sleep(2000);\n\n        Clients.updateGaugeBar(92);\n        Thread.Sleep(3000);\n\n        Clients.updateGaugeBar(99);\n        Thread.Sleep(2000);\n\n        Clients.updateGaugeBar(100);\n    }\n}\n</code></pre>\n\n<p>When I ran the project, I noticed the bookingHub is undefined, and I've got null reference errors at this point.</p>\n\n<p>What Am I doing wrong to get this error?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["python","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":37,"score":0,"question_id":12842292,"title":"Use Python code inside ASP MVC 3 application","body":"<p>I have an ASP MVC 3 application and I have to use dmcloud API which exists only in Python or PHP or Java.</p>\n\n<p><a href=\"http://www.dmcloud.net/doc/api/\" rel=\"nofollow\">http://www.dmcloud.net/doc/api/</a></p>\n\n<p>How can I use the API inside the application even though it is not the same technology.</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","asp.net-mvc-3","jquery-ui"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12842210,"title":"How to save time with jQueryUI datapicker without timepicker","body":"<p>So I'am using Jquery ui datapiker it work fine but now I have to save the time also to the database,\nI have search and could add a timepiker but i dont want that I just want  that the user pick from the calendar and save the date with the current time in the server \nhow can I achieve that?</p>\n\n<p>my code so far</p>\n\n<p>my: Date.cshtml</p>\n\n<pre><code> @inherits System.Web.Mvc.WebViewPage&lt;System.DateTime?&gt; \n\n    @Html.TextBox(\"\", (Model.HasValue ? Model.Value.ToString(\"yyyy-MM-dd\") : DateTime.Today.ToString(\"yyyy-MM-dd\")), new { @class = \"date\" }) \n</code></pre>\n\n<p>and in my script</p>\n\n<pre><code>$(document).ready(function () {\n    $('.date').datepicker(\n        $.datepicker.regional['es']\n    );\n});\n\n\n  // LOCALIZACION DATEPICKER\n    jQuery(function ($) {\n        $.datepicker.regional['es'] = {\n            closeText: 'Cerrar',\n            prevText: '&amp;#x3c;Ant',\n            nextText: 'Sig&amp;#x3e;',\n            currentText: 'Hoy',\n            monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',\n            'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],\n            monthNamesShort: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun',\n            'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],\n            dayNames: ['Domingo', 'Lunes', 'Martes', 'Mi&amp;eacute;rcoles', 'Jueves', 'Viernes', 'S&amp;aacute;bado'],\n            dayNamesShort: ['Dom', 'Lun', 'Mar', 'Mi&amp;eacute;', 'Juv', 'Vie', 'S&amp;aacute;b'],\n            dayNamesMin: ['Do', 'Lu', 'Ma', 'Mi', 'Ju', 'Vi', 'S&amp;aacute;'],\n            weekHeader: 'Sm',\n            dateFormat: 'yy-mm-dd',\n            firstDay: 1,\n            isRTL: false,\n            showMonthAfterYear: false,\n            yearSuffix: ''\n        };\n        $.datepicker.setDefaults($.datepicker.regional['es']);\n    });\n</code></pre>\n\n<p>my viewmodel date field </p>\n\n<pre><code>[Display(Name = \"Fecha Registro\")]\n        [DataType(DataType.Date)]\n        [Required(ErrorMessage = \" * \")]\n        public DateTime FechaReg { get; set; }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","pdf-generation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12837503,"title":"How to add image in pdf file","body":"<p>I have used <a href=\"http://www.semanticarchitecture.net/www/pdf-reporting-using-asp-net-mvc/\" rel=\"nofollow\">this</a> blog for adding a dynamic pdf in my project. when i am tryng to add a image than it is compelling me to have a Image folder in C:\\ . How can i add a image from project.</p>\n"},{"tags":["c#","asp.net-mvc-3","datetime","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":129,"score":3,"question_id":12708898,"title":"How to format the DateTime Property using MVC3 Razor?","body":"<p>I am having the following Razor Code to Render TextBox for ValidFrom Property of DateTime type.</p>\n\n<pre><code>@Html.TextBox(\"ValidFrom\", (Model.ValidFrom.ToString(\"dd-MMM-yyyy\")), new { @class = \"FrmTextBox\" })\n</code></pre>\n\n<p>And the same is rendering the Default Date(01-01-0001 00:00:00)  as '01-Jan-0001' while opening of my Form and my values are also getting stored into the database once I submitted the form. </p>\n\n<p>But, If I try to update the ValidFrom Property of the Subjected Record from the Database then the Record returning as 02-10-2012 00:00:00 but the Date is being displayed in the 02/10/2012 00:00:00 format only.</p>\n\n<p>How to format the above DateTime Value into 02-Oct-2012.?</p>\n\n<p>Could anyone please help..</p>\n\n<p>Thanks in Advance.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12841649,"title":"Conflict with using Master Model comprised of two models in ASP.NET MVC3","body":"<p>I'm creating a login screen for my MVC3 website. Obviously, the user logs in from this page but if they have forgotten their password they can click a link then Javascript hides the LogOn  and then a forgotten  appears where they can enter their email address. So I have a LogOnModel which requires the username and password fields to have a value. The ForgotModel requires that the emailAddress field have a value. Then on the page I use a LogOnMaster model that consists of both of these.</p>\n\n<pre><code>public class LogOnMasterModel : MasterViewModel\n{\n    public LogOnModel LoginViewModel { get; set; }\n    public ForgettenModel ForgottenViewModel { get; set; }\n} \n</code></pre>\n\n<p>The problem is when I click the submit button for LogOn, it wants the email address field to have a value. How can I make it only validate the LoginViewModel on the log in submit button and only validate the ForgottenModel when the forgotten submit button is clicked. </p>\n\n<p>I can share code if need be. </p>\n\n<p>I am open to completely different solutions. </p>\n"},{"tags":["asp.net-mvc-3","entity-framework","entity-framework-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12841467,"title":"Many lookups in one table, foreign key or non enforced code","body":"<p>I am modelling a customer entity in EF Designer, and use Model Based DB generation. A good number of the fields(about 10) will be sourced from the APS.NET MVC interface via dropdowns. I want to keep it simple. I also did not want to normalise the DB in the Nth degree as this could complicate the queries. Typically 2 or 3  values ie \"Male\",\"Female\"  I have a number of options:</p>\n\n<p>1) Use a code table with name, and store just code in customer table without enforcing FK constraint, ie 10 for \"Female\", 20 for \"Male\".</p>\n\n<p>2) Use enforcing FK constraint against code table</p>\n\n<p>3) Use Lookup from Code Table, and put Code Name into Customer field.</p>\n\n<p>4) Use some form of ASP.NET enumeration and populate Customer field with value.</p>\n\n<p>1) may be an issue with \"LINQ include\" commands since the child record will be unknown.\nI am sure there is a standard MVC/EF solution for this scenario.</p>\n\n<p>Many thanks in advance,</p>\n"},{"tags":["asp.net-mvc-3","drop-down-menu","webgrid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12841160,"title":"using dropdownlist in webgrid mvc3","body":"<p>I am binding my webgrid </p>\n\n<p>Model :</p>\n\n<pre><code>public List&lt;SelectListItem&gt; listItemsProducts = new List&lt;SelectListItem&gt;(); \npublic int  Quantity { get; set; }\npublic decimal Rate { get; set; }\npublic decimal Gross { get; set; }\n</code></pre>\n\n<p>In my view I am trying to bind the model list but the dropdownlist is not binding.</p>\n\n<p>View :\ncolumns: </p>\n\n<pre><code>grid.Columns(   \n    grid.Column(header: \"\", format: @&lt;text&gt; @Html.DropDownList(\"listItemsProducts\")&lt;/text&gt;),\n    grid.Column(\n    columnName: \"Quantity\",\n    format: @&lt;text&gt;&lt;input name=\"Quantity\" type=\"text\" value=\"@item.Quantity\" /&gt;&lt;/text&gt;\n           ),\n    grid.Column(\n    columnName: \"Rate\",\n    format: @&lt;text&gt;&lt;input name=\"Rate\" type=\"text\" value=\"@item.Rate\" /&gt;&lt;/text&gt;\n    ),\n    grid.Column(\n    columnName: \"Gross\",\n    format: @&lt;text&gt;&lt;input name=\"Gross\" type=\"text\" value=\"@item.Gross\" /&gt;&lt;/text&gt;\n    ),\n    grid.Column(\n    header: \"\",\n    format: @&lt;text&gt;@item.GetSelectLink(\"Edit\")&lt;/text&gt;\n    )\n)\n</code></pre>\n\n<p>Any help will be appreciated.</p>\n"},{"tags":["asp.net-mvc-3","razor","model-binding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":65,"score":-2,"question_id":12840290,"title":"Dynamically bind items to a listbox and send to another in asp.net MVC3","body":"<p>Here I'm passing a remote data to a ListBox to the view and now I need to send selected items to another listbox dynamically in Asp.Net MVC3</p>\n\n<p>Could anyone could fix it\nThanks in advance</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12834451,"title":"How to detect which views that are in use?","body":"<p>I have started to write my map routes like this:</p>\n\n<pre><code>routes.MapRoute(\"Image/{fileID}/{width}/{height}/{fileName}\",\n  (ContentController c) =&gt; c.Thumbnail(SITE_ID, FILE_ID, WIDTH, HEIGHT, null));\n</code></pre>\n\n<p>(having my own extender class that defines my own MapRoute function)</p>\n\n<p>and I am also referring to actions in a strictly way like this:</p>\n\n<pre><code>var foo = \"@Url.Action((FileManagerController c)=&gt; c.Select(0, 0, null, null))\"\n</code></pre>\n\n<p>...again including some of my own magic.</p>\n\n<p>Now I easily can see which controllers and actions that are in use. And I can use F12 navigation etc etc.</p>\n\n<p>But... how can I know which views I use?</p>\n\n<p>Are they classes with some strange names?</p>\n"},{"tags":["html","asp.net-mvc-3","forms","post","model-binding"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":79,"score":3,"question_id":12300281,"title":"ASP.NET MVC Model list binding","body":"<p>Here is my model:</p>\n\n<pre><code>public class Items\n    {\n        public string Foo { get; set; }\n        public string Bar { get; set; }\n    }\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>public ActionResult Index()\n    {\n        var model = new List&lt;Items&gt;\n                        {\n                            new Items\n                                {\n                                    Foo = \"foo\",\n                                    Bar = \"bar\"\n                                },\n                            new Items\n                                {\n                                    Foo = \"ai\",\n                                    Bar = \"ia\"\n                                },\n                            new Items\n                                {\n                                    Foo = \"one\",\n                                    Bar = \"two\"\n                                }\n                        };\n        return View(model);\n    }\n\n    [HttpPost]\n    public ActionResult Index(List&lt;Items&gt; model)\n    {\n        return View(model);\n    }\n</code></pre>\n\n<p>View (Index):</p>\n\n<pre><code>@using (Html.BeginForm())\n{\n    for (int i = 0; i &lt; Model.Count; i++)\n    {\n        &lt;div onclick=\"$(this).remove();\"&gt;\n            @Html.TextBoxFor(model =&gt; model[i].Foo) &lt;br/&gt;\n            @Html.TextBoxFor(model =&gt; model[i].Bar)\n        &lt;/div&gt;\n    }\n    &lt;div&gt;\n        &lt;input type=\"submit\"/&gt;\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p>I delete second pair:</p>\n\n<pre><code>    &lt;div onclick=\"$(this).remove();\"&gt;\n        &lt;input name=\"[0].Foo\" type=\"text\" value=\"foo\"&gt; &lt;br&gt;\n        &lt;input name=\"[0].Bar\" type=\"text\" value=\"bar\"&gt;\n    &lt;/div&gt;\n\n    &lt;div onclick=\"$(this).remove();\"&gt;\n        &lt;input name=\"[2].Foo\" type=\"text\" value=\"one\"&gt; &lt;br&gt;\n        &lt;input name=\"[2].Bar\" type=\"text\" value=\"two\"&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>When posting, i get only first pair (\"foo\" and \"bar\"). It's because third pair has index \"2\". I want to get both pairs(Not using FormCollection. I want it to bind automatically). In reality, I have many other inputs on form, so i don't want to reload and reattach indices to each input. Can you help me?</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":314,"score":0,"question_id":8396927,"title":"ASP.NET MVC Dynamic External URL","body":"<p>I have a site where users can supply a URL of their choice.</p>\n\n<p>I'm sure it's a security hole so what should I do to tighten that down without losing too much flexability?</p>\n\n<p>If I were to leave it, how could I render a link or build a route such that I could link users externally?\nThis doesn't work (of course):</p>\n\n<pre><code>&lt;a href=\"@item.Location\" target=\"_self\"&gt;@item.Title&lt;/a&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":221,"score":1,"question_id":9311471,"title":"Can you edit a CSHTML without building again","body":"<p>I have a CSHTML file on the server. can I change part of the html code in the page without having ro rebuild my solution? Or everytime you edit the CSHTML you have to rebuild.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":61,"score":0,"question_id":12835541,"title":"Url redirection without registering redirection url in global.asax MVC3 project","body":"<p>I have  redirection URL like \"https://www.syncfusion.com/msdn\" . if we entered this URL in browser, it goes to \"https://www.syncfusion.com/home/aboutus?utm_medium=msdn\".</p>\n\n<p>For this URL Redirection , created Route map in global.asax file \"</p>\n\n<pre><code> routes.MapRouteLowercase(\n      \"MSDN\", // Route name\n      \"newsletter\", // URL with parameters\n      new { Controller = \"root\", Action = \"Redirection\", key = \"msdn\" } \n     // Parameter defaults\n );\n</code></pre>\n\n<p>here i created seperate action to handle URL redirection.</p>\n\n<p>So my request without registering Redirection URL in Global and without seperate action can we have redirecting URL to specified URL?.</p>\n"},{"tags":["asp.net-mvc-3","partialview"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12838827,"title":"MVC 3 Render Partial view","body":"<p>I've had some problems when I try to render a PartialView.</p>\n\n<p>My Controller:</p>\n\n<pre><code>public ActionResult Index()\n    {\n        var db = new fanganielloEntities();\n        List&lt;imovel&gt; imoveis = (from s in db.imovel\n                                where s.StatusImovel == 3\n                                select s).ToList();\n\n        return PartialView(imoveis);\n    }\n\n     public ActionResult Listar()\n     {\n         return View();\n     }\n</code></pre>\n\n<p>The View:</p>\n\n<pre><code> @Html.Partial(\"TesteLista\")\n</code></pre>\n\n<p>The Partial:</p>\n\n<pre><code>@model List Mvc4Web.Models.imovel\n    @if (Model != null)\n    {\nforeach (var item in Model)\n{\n            @Html.DisplayFor(modelItem =&gt; item.DescricaoImovel)\n }\n    }\n</code></pre>\n\n<p>The Error:</p>\n\n<blockquote>\n  <p>Object reference not set to an instance of an object.</p>\n  \n  <p>Source Error: </p>\n  \n  <p>Line 5:   Line 6:   Line 7:  @foreach (var item in Model)  Line 8:   {\n  Line 9:</p>\n</blockquote>\n\n<p>Thank in advanced!!!</p>\n"},{"tags":["asp.net-mvc-3","mvc","pdf-generation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":51,"score":0,"question_id":12839103,"title":"how do I put an image in a PDF document using iTextSharp?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12837503/how-to-add-image-in-pdf-file\">How to add image in pdf file</a>  </p>\n</blockquote>\n\n\n\n<p>How to add an image in pdf file, as i tried to generate a pdf using <a href=\"http://www.semanticarchitecture.net/www/pdf-reporting-using-asp-net-mvc/\" rel=\"nofollow\">This</a> Blog.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12839055,"title":"JavaScript Html.DropDownList and Model View Controller","body":"<p>I have a Custom MVC Project. I'm using Jquery but I'm not good at it.I have two dropdownlist created. Apart from other controls, I have a dropdownlist1, anchor link delete and another dropdownlist2 and a textbox.</p>\n\n<p>When I click on the first dropdownlist I'm using a Jquery and fetching the data from controller. The selected value would be displayed in the label and the second dropdownlist would be populated as Viewdata from controller.</p>\n\n<p>All these work I have to do from the javascript/Jquery.</p>\n\n<pre><code>function GetRuleCondition() {\n\n     var e = document.getElementById(\"FilterCondition\");         \n     if (e.value != \"\") {\n         action = 'RuleCondition/RuleSettings?FilterCondition=' + e.value;\n         $.getJSON(action, function (data) {\n             if (data != null) {\n                 PopulateFilterCondition(data);\n             }\n             //alert(data);\n             // for (var i = 0; i &lt; data.length; i++) {\n             //         $(\"#FilterRule\").append(\n             //         $('&lt;option /&gt;', {\n             //         'value': data[i].id,\n             //         'name': data[i].name,\n             //         'text': data[i].name\n             //     })\n             // );   \n         });\n     }\n     e.SelectedIndex=0;\n }\n\n function PopulateFilterCondition(data) {\n     addlist();\n     var str = data.toString();\n     var array = str.split(\",\");\n     var e = document.getElementById(\"FilterCondition\");\n     var labels = document.getElementsByTagName('label');\n     var numi = document.getElementById('theValue').value;\n     if (document.getElementById(\"LblFilterConditionName\" + numi)) {\n         var lblname = document.getElementById(\"LblFilterConditionName\" + numi);\n         lblname.innerHTML = e.options[e.selectedIndex].value;\n     }\n }\n\n function addlist() {\n     var control = document.getElementById(\"FilterLst0\");\n     var lst = document.getElementById(\"FilterLst\");\n     var i = 1;\n     //control = control;\n     //if (control.style.visibility == \"visible\" || control.style.visibility != \"\") {\n         control.style.display =\"none\";\n    // }\n     var div = document.getElementById('UnOrderLst');\n     var numi = document.getElementById('theValue');\n     num = (document.getElementById('theValue').value - 1) + 2;\n     numi.value = num;\n     var divIdName = lst + num;\n     var lblFilterid = \"LblFilterConditionName\" + num;\n     //         // var ConditionDrpdwnlst = document.getElementById('FilterRuleCondition'); &lt;%= Html.DropDownList('FilterRuleCondition', (SelectList)ViewData['FilterRuleCondition'])%&gt;\n     var content = \"&lt;li class='lstclass' id= '\" + divIdName + \"'&gt;&lt;a href='#' onfocus='blur();' class='icon cancel'&gt;Cancel&lt;/a&gt;&lt;label class='frmLabel' id='\" +lblFilterid +\"'&gt;&lt;/label&gt;&lt;div class='ddComponent'&gt;Dropdownlist&lt;/div&gt;&lt;span class='inputBX conTrol'&gt;&lt;input type='text' class='inputTXT conTrol'&gt;&lt;/span&gt;&lt;/li&gt;\";\n     //alert(content);\n     div.innerHTML += content;\n     //var lblname = document.getElementById(lblFilterid); //.value = e.value;\n     ////         if (e != null &amp;&amp; lblname != null) {\n     //lblname.innerHTML = e.options[e.selectedIndex].value;\n</code></pre>\n\n<p>Please let me know how to accomplish this task as I need it urgently.</p>\n"},{"tags":["asp.net","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12838872,"title":"safe family search in my website by C#","body":"<p>I am developing asp.net mvc3 website using c#, the website has a search page uses an api to search for products.</p>\n\n<p>one of the client requirements is to add a filter to the search box to avoid searching for porn or sexual content I thought about checking the word entered in the textbox if it content a sexual content dont do anything but the problem is in the large words that i have to avoid </p>\n\n<p>any suggestion </p>\n"},{"tags":["deployment","iis7","asp.net-mvc-3","connection-string"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":9020,"score":3,"question_id":5219676,"title":"Format of the initialization string does not conform to specification starting at index 0","body":"<p>I have an ASP.Net MVC application which runs fine on my local development machine. But when deployed to IIS7 gives the following error when trying to log in:</p>\n\n<p>\"Format of the initialization string does not conform to specification starting at index 0\"</p>\n\n<p>Most people who post this error resolve it by changing their connection string in some way. However my connection string on the local and deployed application are the same. The connection string is like this:</p>\n\n<pre><code>&lt;add name=\"ApplicationServices\" connectionString=\"Data Source=*server*\\*instance*;Initial Catalog=*database*;Integrated Security=True;\"\n      providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n\n<p>What is causing this error in my case?</p>\n"},{"tags":["asp.net-mvc","json","asp.net-mvc-3","knockout.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":66,"score":-1,"question_id":12838387,"title":"How can I save from knockoutjs json list data to asp.net mvc 3 controller","body":"<p>I Have this json data from knockoutjs </p>\n\n<pre><code>[{\"Title\":\"test\",\"Description\":\"tset\",\"Price\":\"500.00\",\"Status\":\"Reserved\"}, \n {\"Title\":\"s\",\"Description\":\"d\",\"Price\":\"400\",\"Status\":\"Reserved\"}]\n</code></pre>\n\n<p>How can I save this to my controller in asp.net mvc 3?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc-3","upload","textbox","telerik"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":12837531,"title":"Binding text box to telerik upload control MVC3","body":"<p>I want my textbox to display the name of file selected by telerik upload control. Please find the code snippet below.</p>\n\n<pre><code>&lt;td&gt;\n@Html.TextBox(txtBox, null, new { style = string.Format(\"width:200px\") })\n&lt;/td&gt;\n&lt;td style=\"padding-top: 1%; padding-left: 8%\"&gt;\n@(Html.Telerik().Upload().Name(BrowseButton)\n//.HtmlAttributes(new { @class = \"myCustomClass\" }).Multiple(false))\n</code></pre>\n\n<p>Currently the textbox is displaying null.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12837465,"title":"Can i pass JSON instead of Model from my controller to my Razor view","body":"<p>I have a view that inherit the following:-</p>\n\n<pre><code>@model MvcApplication.Models.Application\n</code></pre>\n\n<p>But i need to know if it is possible to pass JSON objects to my view in the same way i am passing the model objects?\nSince i have the following Controller:-</p>\n\n<pre><code>    public ActionResult ListPackages()\n            {\n                using (var client = new WebClient())\n                {\n                    var query = HttpUtility.ParseQueryString(string.Empty);\n    //code goes here ....\n                    return Content(json, \"application/json\");\n                }\n            }\n</code></pre>\n\n<p>which returns JSON using a API call, and then i am displaying the JOSN on the view using javaScrip as follow:</p>\n\n<pre><code> $.ajax({\n            url: $('#geturl').data('url'),\n            type: 'GET',\n            cache: false,\n            success: function (result) {\n                $.each(result.data, function (key, val) {\n                    var str = val.packageName;\n                    $('&lt;li/&gt;', { text: str })\n                        .appendTo($('#products'));\n                });\n            }\n</code></pre>\n\n<p>The problem with displaying the JSON using javaScript is that it will make to difficult for me to work easily with the JSN objects, such as creating links based on the return JSON , creating table that contain the JSON. So my question is if it is possible to pass JSON objects instead of Model object from my controller to my view?</p>\n\n<p>BR</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":26,"score":-1,"question_id":12837254,"title":"How can I create MDB Files with MVC3?","body":"<p>I need to Create MDB File from ms sql server with MVC3.\n an UPDATE query on a large MDB file (~30mb), is it possible? how?</p>\n"},{"tags":["javascript","asp.net-mvc-3","script"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12836564,"title":"How to use value in view bag as attribute of <script> tag?","body":"<p>I need to assign value from viewbag as one of the attribute of javascript  tag in cshmt file. Im using asp .net mvc3. Im having value inside viewbag[\"myvalue\"] . I need to use this value like</p>\n\n<pre><code>&lt;script src=\"https://abcb.js?session_ id=1234&amp;mytext=\"+'viewbag[\"myvalue\"]' type=\"text/javascript\"&gt; &lt;/script&gt;\n</code></pre>\n\n<p>Is it possible to do this? Please provide the code if it is possible</p>\n\n<p><strong>Edited</strong> : Im using razor view engine</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12836712,"title":"how to write css for specific page in asp.net mvc3","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5021552/how-to-reference-a-css-file-on-a-razor-view\">How to reference a .css file on a razor view?</a>  </p>\n</blockquote>\n\n\n\n<p>How to add page specfic css in asp.net mvc3 views but i dont want to add </p>\n\n<p>css for page in header  , <strong>is there any other solution ???</strong></p>\n"}]}
{"total":29155,"page":15,"pagesize":100,"questions":[{"tags":["asp.net-mvc-3","visual-studio","express"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":173,"score":0,"question_id":12836612,"title":"Visual Studio 2012 Express MVC 3 deployment","body":"<p>I have developed a a MVC 3 application in Visual Studio 2012 express and I'm trying to create a web deployment package following the documentation in this link: </p>\n\n<p><a href=\"http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&amp;l=EN-US&amp;k=k(WebApplicationProjects.PackagePublishOverview);k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.0)&amp;rd=true\" rel=\"nofollow\">http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&amp;l=EN-US&amp;k=k(WebApplicationProjects.PackagePublishOverview);k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.0)&amp;rd=true</a></p>\n\n<p>I have a couple of issues.\n1. I cannot select deploy check box in the configuration manager, it is greyed out\n2. The zip file is not being created</p>\n\n<p>Is this a limitation of the version of visual studio or am I going about deploying this type of project wrong. Due to the nature of the application the web deployment package is the best deployment option.</p>\n"},{"tags":["asp.net","css","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":60,"score":3,"question_id":12836323,"title":"Css is not working properly in asp.net mvc3 Razor Views","body":"<p>i have a application on asp.net mvc3 and working on razor view , </p>\n\n<p>on my layout page i attach a css file and put some css in that file   </p>\n\n<p>but when i access <code>/Account/LogOn</code> view that css not works there   </p>\n\n<p>it only works if i attach css on <code>Logon</code> view , Anyone have idea that  </p>\n\n<p>why my css attached on layout page is not working on Account/LogOn page  </p>\n\n<p>i also tried by including following code , </p>\n\n<pre><code>@{\nLayout = \"~/Views/Shared/_Layout.cshtml\";\nViewBag.Title = \"xyz.com – Login\";\n }\n</code></pre>\n\n<p>but it still not working . Thanks in advance </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","api","asp.net-mvc-4"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12834930,"title":"Calling a JSON API from my controller instead of from the view in my asp.net mvc web application","body":"<p>I need to call a JSON API for a BPM engine from my asp.ner mvc web application . The API call to the BPM is constructed as follow:-</p>\n\n<pre><code>http://localhost:8080/jw/web/json/workflow/process/list?j_username=kermit&amp;hash=9449B5ABCFA9AFDA36B801351ED3DF66&amp;loginAs=' + username\n</code></pre>\n\n<p>where both the j_user &amp; hash paramertes represents a master login username and password which are set at the BPM engine side.\nCurrently i am calling the API using java/script at the view level from my asp.net mvc:-</p>\n\n<pre><code>$(document).ready(function () {\n    var fullurl = 'http://localhost:8080/jw/web/json/workflow/package/list?j_username=kermit&amp;hash=9449B5ABCFA9AFDA36B801351ED3DF66&amp;loginAs=' + username ;\n    $.ajax({\n        type: \"GET\",\n        url: fullurl, \n\n        dataType: \"JSONP\",\n        // contentType: \"application/json; charset=utf-8\",\n        success: function (result) {\n\n            $.each(result.data, function (key, val) {\n\n                // Format the text to display.\n             //   var str = val.packageName + ' | ' + val.packageId;\n                var str = val.packageName ;\n                // Add a list item for the product.\n                $('&lt;li/&gt;', { text: str })\n                .appendTo($('#products'));\n\n            });\n        }\n    });\n\n\n});\n</code></pre>\n\n<p>But i was told that exposing both the master-login username and password and also the LoginAS username which represents the username of the login user at the asp.net mvc is not secure, AND THAT I SHOULD PERFORM THE API CALL AT THE SERVER SIDE INSTEAD OF MAKING THE API CALL FROM A JAVASCRIPT.</p>\n\n<p>but my question is how i can convert my above code to receive the JSON from the mvc controller side and then pass the JSON to the view?\nBest Regards</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12710722,"title":"Why is RouteData.Values[\"someValue\"] showing null in Controller?","body":"<p>My URL is this: <code>http://localhost:2570/Test/Index/5/100100/44</code>, where 5 = id, 100100 = jobno, and 44 = instid. However, when I try to access these values in the Controller all I get is null. What am I missing?</p>\n\n<p>TestController.cs</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing InspectionWebFormsMVC.ViewModels;\nusing InspectionWebFormsMVC.Models;\nusing InspectionWebFormsMVC.Services;\nusing System.Data;\n\nnamespace Stuff.Controllers\n{\n    public class TestController : Controller\n    {\n        private WebFormsDataDbContext dbModels;\n\n        public TestController()\n        {\n            dbModels = new WebFormsDataDbContext();\n        }\n\n        [HttpPost]\n        public ActionResult SaveEmailStatus(string empid, int? instid, long? emailid, long? ctrltypeid)\n        {\n\n            if (ModelState.IsValid)\n            {\n            }\n\n            var bar = this.ControllerContext.RouteData.Values[\"id\"];\n            var blah = this.RouteData.Values[\"id\"];\n            var foo = this.RouteData.Values[\"instid\"];\n            int? iid = instid;\n            int? formid = Convert.ToInt32(RouteData.Values[\"id\"].ToString());\n            return RedirectToAction(\"Index\", new { id = formid.Value, instid = iid.Value});\n        }\n    }\n}\n</code></pre>\n\n<p>Index.cshtml</p>\n\n<pre><code>@model IEnumerable&lt;Stuff.Models.Part&gt;\n\n@{\n    ViewBag.Title = \"Testing Editor Templates\";\n}\n\n@using System.Web.WebPages;\n@using System.Web.Script.Serialization;\n@using Stuff.ViewModels;\n\n&lt;h2&gt;Test Control for Webforms&lt;/h2&gt;\n\n\n@using (Html.BeginForm(\"SaveEmailStatus\", \"Test\", new { instid = ViewContext.RouteData.Values[\"instid\"], empid = \"107\" }, FormMethod.Post))\n{\n    &lt;div style=\"clear:both;\"&gt;\n        &lt;div style=\"float:right;\"&gt;\n            &lt;div style=\"text-align:left;\"&gt;                \n                @foreach (var line in ViewBag.EmailStatus as List&lt;FormRowModel&gt;)\n                {\n                    @line.Description.ToString()\n                    &lt;br /&gt;&lt;br /&gt;\n                    @line.RowInput[0].RowCtrl.DefaultValues[0].Label \n                    @: &amp;nbsp; \n                    @line.RowInput[0].InputtedDate.ToString()\n                    &lt;br /&gt;  \n                    @line.RowInput[1].RowCtrl.DefaultValues[0].Label \n                    @: &amp;nbsp; \n                    @line.RowInput[0].InputtedData\n                    &lt;br /&gt;&lt;br /&gt;\n                    @Html.Hidden(\"emailid\", line.RowInput[0].InputtedDataID)\n                    @Html.Hidden(\"ctrltypeid\", line.RowInput[0].RowCtrl.CtrlTypeID)\n                }               \n                &lt;input type=\"submit\" value=\"Send Email\" /&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p>Global.asax.cs</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing System.Web.Routing;\n\nnamespace Stuff\n{\n    // Note: For instructions on enabling IIS6 or IIS7 classic mode, \n    // visit http://go.microsoft.com/?LinkId=9394801\n\n    public class MvcApplication : System.Web.HttpApplication\n    {\n        public static void RegisterGlobalFilters(GlobalFilterCollection filters)\n        {\n            filters.Add(new HandleErrorAttribute());\n        }\n\n        public static void RegisterRoutes(RouteCollection routes)\n        {\n            routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n            routes.MapRoute(\n                \"ProjectInfos\", // Route name\n                \"ProjectInfo/{action}/{id}/{jobno}/{instid}/{section}\", // URL with parameters\n                new { controller = \"ProjectInfo\", action = \"Index\", id = UrlParameter.Optional, jobno = UrlParameter.Optional, instid = UrlParameter.Optional, section = UrlParameter.Optional } // Parameter defaults\n            );\n\n            routes.MapRoute(\n                \"SectionsData\", // Route name\n                \"Test/Sections/{id}/{jobno}/{instid}/{section}\", // URL with parameters\n                new { controller = \"TestEdit\", action = \"Sections\", id = UrlParameter.Optional, jobno = UrlParameter.Optional, instid = UrlParameter.Optional, section = UrlParameter.Optional } // Parameter defaults\n            );\n\n            routes.MapRoute(\n                \"Sections\", // Route name\n                \"Test/Index/{id}/{jobno}/{instid}\", // URL with parameters\n                new { controller = \"TestEdit\", action = \"Index\", id = UrlParameter.Optional, jobno = UrlParameter.Optional, instid = UrlParameter.Optional } // Parameter defaults\n            );\n\n            routes.MapRoute(\n                \"Pumps\", // Route name\n                \"Home/Main/{id}/{jobno}\", // URL with parameters\n                new { controller = \"Home\", action = \"Main\", id = UrlParameter.Optional, jobno = UrlParameter.Optional } // Parameter defaults\n            );\n\n            routes.MapRoute(\n                \"Jobs\", // Route name\n                \"Home/Jobs/{id}\", // URL with parameters\n                new { controller = \"Home\", action = \"Jobs\", id = UrlParameter.Optional } // Parameter defaults\n            );\n\n            routes.MapRoute(\n                \"Default\", // Route name\n                \"{controller}/{action}/{id}\", // URL with parameters\n                new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n            );\n\n        }\n</code></pre>\n"},{"tags":["visual-studio-2010","asp.net-mvc-3"],"answer_count":5,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":14889,"score":7,"question_id":5812102,"title":"How do I add ASP.NET MVC 3 Web Application in Visual Studio 2010?","body":"<p>I have VS 2010 as follow: </p>\n\n<pre><code>Microsoft Visual Studio 2010\nVersion 10.0.30319.1 RTMRel\nMicrosoft .NET Framework\nVersion 4.0.30319 RTMRel\n\nInstalled Version: Ultimate\n</code></pre>\n\n<p>ASP.NET MVC 3 Web Application project template is not available.\nI just see ASP.NET MVC 2 Web Application project template. How do I add MVC 3?</p>\n\n<p>Just trying to follow the right path before I screw up my current installation.</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc-3","silverlight-4.0"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":12687076,"title":"while publishing asp.net mvc 3 application which integrated silverlight 4 application view doesn't get published?","body":"<p>I have my first silverlight 4 application which runs well when integrated with asp.net visual studio 2010 but when i publish it in asp.net core the view doesn't get publish. Why that's happening i got no idea?</p>\n\n<p>Provide me some better solution..\nThank you.</p>\n"},{"tags":["jquery","asp.net-mvc-3","datatables"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":116,"score":0,"question_id":12750067,"title":"Jquery DataTables FIlter Plug in - How to populate filter dynamically getting data from the DB","body":"<p>I downloaded the Jquery Data Table and the Jquery DataTable.Filter Plugin.</p>\n\n<p>Here is the code i am working on.</p>\n\n<pre><code>var oTable = $('#myDataTable').dataTable({\n        \"bServerSide\": true,\n        \"sAjaxSource\": \"/User/DataProviderAction\",\n        \"bJQueryUI\": true\n    });\n\n    oTable.columnFilter({ sPlaceHolder: \"head:before\",\n        aoColumns: [{ type: \"select\", values: [\"Box Office\", \"Concessions\"] },\n                    { type: \"select\",values: [\"Administrator\",\"Sales People\"]},\n                    {type: \"text\"}\n\n                    ]\n    });\n</code></pre>\n\n<p>QUESTION:  Instead of hardcoding the values in aoColumns how would I go about getting it to load values from the database.  I am using MVC. I do have a method set up returning string values in my repository, if that helps.</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12834075,"title":"formmethod.post vs formmethod.get in mvc3?","body":"<p>i'm working on a cascading dropdownlist in mvc3, when i used formmethod.post im able to select a value in dropdownlsi1 and based on the that selection im able to get values in dropdownlist2 and after selecting an item in dropdownlist2 , im getting a button which on clicking will give the user a message u have selected X and Y.....this is fine and i have no issue with it</p>\n\n<p>but when i used formmethod.get, im able to get the 1st dropdownlist and based on the selection in the 1st dropdownlist im able to get 2nd dropdownlist nd items in the 2nd dropdownlist, after the selection in the 2nd dropdownlist , i got a button , but after clicking the button, again im seeing the same page when i get when i load the page i.e  only the 1t dropdownlist..</p>\n\n<p>In what scenario we should use formmethod.post and formmethod.get?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","entity-framework","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":12828347,"title":"Ajax.ActionLink post entire model from a view?","body":"<p>I have a view that is strongly typed to a ViewModel.  Is it possible to pass all of the data from a model in the view, back to a controller action?  Something like this?  </p>\n\n<pre><code>@Ajax.ActionLink(\"(Export to Excel)\", \"ExportCsv\", \"SurveyResponse\", new {  \nResultsViewModel = Model }, new AjaxOptions {HttpMethod = \"POST\"})\n</code></pre>\n\n<p>And then collect the data from ResultsViewModel as a parameter in another controller</p>\n\n<pre><code>public ActionResult ExportCsv(ResultsViewModel resultsviewmodel)\n{\n\n}\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":8,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":11036,"score":4,"question_id":9629647,"title":"How to send email from Asp.net Mvc-3?","body":"<p>How to send a mail through mvc-3 asp.net using c#?</p>\n\n<p>i have to send a forgot password so how can i do this ?\nmy code is below.</p>\n\n<p>Model code..</p>\n\n<pre><code> using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.ComponentModel.DataAnnotations;\n\nnamespace TelerikLogin.Models.ViewModels\n{\n    public class ForgotPassword\n    {\n        public int user_id { get; set; }\n        public string user_login_name { get; set; }\n        public string user_password { get; set; }\n\n        [Required]\n        [Display(Name=\"Email Address : \")]\n        public string user_email_address { get; set; }\n    }\n}\n</code></pre>\n\n<p>Controller code..</p>\n\n<pre><code>  public ActionResult ForgotPassword()\n        {\n            return View();\n        }\n\n        [HttpPost]\n        public ActionResult ForgotPassword(string user_email_address)\n        {\n            SqlConnection conn = new SqlConnection(@\"Data Source=.\\SQLEXPRESS;AttachDbFilename=E:\\MVC3\\TelerikLogin\\TelerikLogin\\App_Data\\Login.mdf;Integrated Security=True;User Instance=True\");\n\n            DataTable dt1 = new DataTable();\n\n            string strQuery = string.Format(\"SELECT user_password FROM [user_master] WHERE user_email_address='{0}'\",user_email_address);\n            conn.Open();\n            SqlDataAdapter da1 = new SqlDataAdapter(strQuery, conn);\n            da1.Fill(dt1);\n            conn.Close();\n\n            if (dt1.Rows.Count &gt; 0)\n            {\n\nMailMessage msg = new MailMessage();\n\n            msg.From = new MailAddress(\"abc@gmail.com\");\n            msg.To.Add(user_email_address);\n            msg.Subject = \"Password\";\n            msg.Body = \"Test1\";\n            msg.Priority = MailPriority.High;\n\n            SmtpClient client = new SmtpClient();\n\n\n\n\n            client.Credentials = new NetworkCredential(\"abc@gmail.com\", \"disha\", \"smtp.gmail.com\");\n            client.Host = \"smtp.gmail.com\";\n            client.Port = 587;\n            client.DeliveryMethod = SmtpDeliveryMethod.Network;\n            client.EnableSsl = true;\n            client.UseDefaultCredentials = true;\n\n            client.Send(msg);\n\n\n               return RedirectToAction(\"About\", \"Home\");\n            }\n            return View();\n        }\n</code></pre>\n\n<p>here i fetched the password of user from database through entered email address..</p>\n\n<p>View code..</p>\n\n<pre><code>&lt;% using (Html.BeginForm(\"ForgotPassword\", \"Account\", FormMethod.Post))\n   { %&gt;\n\n   &lt;%: Html.LabelFor(m =&gt; m.user_email_address) %&gt;\n   &lt;%: Html.TextBox(\"user_email_address\")%&gt;\n      &lt;%: Html.ValidationSummary(true) %&gt;\n\n&lt;input type=\"submit\" value=\"Submit\"/&gt;\n\n   &lt;%} %&gt;\n</code></pre>\n\n<p>It gives me an error on these line</p>\n\n<pre><code> client.Send(msg);\n</code></pre>\n\n<p>Error messege is: </p>\n\n<pre><code>The SMTP server requires a secure connection or the client was not authenticated. The server response was: 5.7.0 Must issue a STARTTLS command first. x1sm1264662igc.16\n</code></pre>\n\n<p>How to solve it?\nthanks in advance</p>\n"},{"tags":["asp.net-mvc-3","view","model"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12833299,"title":"Having issue while trying to pass two model to the same view at a time in mvc 3","body":"<p>I'm trying to create my profile type page for my simple blog site. I have two simple model class like this:  </p>\n\n<pre><code>public class UserInfoModel\n{\n\n    public string UserName { get; set; }\n\n\n    public string Email { get; set; }\n\n\n    public string Password { get; set; }\n\n\n    public string ConfirmPassword { get; set; }\n\n\n\n}\n\n\npublic class NewPost\n{\n\n    public string PostTitle { get; set; }\n\n\n    public string PostStory { get; set; }\n\n}\n</code></pre>\n\n<p>I have created a joint model class of user &amp; post to pass to view like this:</p>\n\n<pre><code>public class UserPostModel\n{\n    public UserInfoModel User { get; set; }\n    public NewPost Post { get; set; }\n}\n</code></pre>\n\n<p>The methods I wrote to retrieve the user &amp; post info are like this:</p>\n\n<pre><code>public int GetUserID(string _UserName)\n    {\n        using (var context = new TourBlogEntities1())\n        {\n            var UserID = from s in context.UserInfoes\n                         where s.UserName == _UserName\n                         select s.UserID;\n            return UserID.Single();\n\n        }\n    }\n\n    public UserInfo GetUserDetails(int _UserID)\n    {\n        using (var context = new TourBlogEntities1())\n        {\n            var UserDetails = (from s in context.UserInfoes\n                              where s.UserID == _UserID\n                              select s).Single();\n            return UserDetails;\n        }\n    }\n\n    public Post GetUserPosts(int _UserID)\n    {\n        using (var context = new TourBlogEntities1())\n        {\n            var entity = (from s in context.Posts\n                         where s.UserID == _UserID\n                         select s).Single();\n\n            return entity;\n        }\n    }\n</code></pre>\n\n<p>And finally I'm calling all my method from my controller action like this:</p>\n\n<pre><code>[Authorize]\n   public ActionResult MyProfile()\n   {\n       var Business = new Business();\n       var UserID=Business.GetUserID(User.Identity.Name);\n       var UserEntity=Business.GetUserDetails(UserID);\n       var PostEntity=Business.GetUserPosts(UserID);\n\n\n\n\n       var model = new UserPostModel();\n       model.User.UserName = UserEntity.UserName; // problem showing here\n       model.User.Email = UserEntity.Email;\n       model.Post.PostTitle = PostEntity.PostTitle;\n       model.Post.PostStory = PostEntity.PostStory;\n\n\n\n\n       return View(\"MyProfile\",model);\n   }\n</code></pre>\n\n<p>A run time error showing like \" object is not referenced to a object type or null object\". I worked ok in a very similar way while passing single model. Whats I'm doing wrong here?</p>\n"},{"tags":["asp.net-mvc-3","http","jquery-ajax","iis7","httpwebrequest"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":220,"score":3,"question_id":12662282,"title":"Content Length of HTTP Request > body size","body":"<p>I'm managing a web site which is running fine for last couple of months over IIS 7.5 built with MVC 3.0 ASP.net. Every now and then we are facing a problem when our AJAX POST request (fired through jQuery) fails as the JSON being posted is getting truncated.</p>\n\n<p>What we've found so far is that for all such request, the \"Content-Length\" header of the request has more data than we are actually getting in the request. </p>\n\n<p>We've already set <strong>maxRequestLength</strong> to 51200 in our web.config and I believe the value of <strong>maxAllowedContentLength</strong> has a pretty large default value (we've not set that in our configuration). Also I have a failed request with \"Content-Length\" as low as 7301 (bytes) but we managed to get only 2179 bytes of it. So I'm not suspecting this to be hitting any limit. </p>\n\n<p>Request Headers for a problematic request are as follows</p>\n\n<ul>\n<li>Cache-Control: no-cache</li>\n<li>Connection: keep-alive</li>\n<li>Pragma: no-cache</li>\n<li>Content-Length: 7301</li>\n<li>Content-Type: application/json; charset=utf-8;</li>\n<li>Accept: application/json, text/javascript, <em>/</em>; q=0.01</li>\n<li>Accept-Encoding: gzip, deflate</li>\n<li>Accept-Language: en-us,en;q=0.5</li>\n<li>User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1</li>\n<li>X-Requested-With: XMLHttpRequest</li>\n</ul>\n\n<p>Any ideas ??</p>\n\n<hr>\n\n<p><strong>Update</strong> : I've been able to further isolate the problem from our code. Have written an independent controller that accepts a JSON string and just deserializes it. In case of an error, it logs the error. </p>\n\n<p>When I hit this controller in parallel with 150 concurrent threads in a loop of 50 requests then I get a few failures where the JSON that this controller receives is truncated. Now we are strongly focussed on optimizing IIS and reading more about various parameters that may be related (currently we are running with default parameters on IIS). </p>\n\n<p>I strongly feel that 150 concurrent connections should not be a big deal and am sincerely hoping that tuning some parameters we should be able to get past this problem. Once we get past this problem, will share my findings. </p>\n\n<hr>\n\n<p>*<em>Update 2 (October 8) *</em> : I have further narrowed down the problem. I turned on error log in IIS and discovered that my failed request gets the following error while reading data</p>\n\n<pre><code>BytesReceived = 0\nErrorCode = 2147943395\nError Description = \"The I/O operation has been aborted because of either a thread exit or an application request.(0x800703e3)\"\n</code></pre>\n\n<p>I am finding information about this error on iis forums but am yet to experiment with (mutliple) suggestions being given. The following link can be a good starting point for searching more on this</p>\n\n<p><a href=\"http://forums.iis.net/p/1149787/1917288.aspx\" rel=\"nofollow\">http://forums.iis.net/p/1149787/1917288.aspx</a></p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12831413,"title":"How to pass info to View from Index in this scenario - MVC3","body":"<p>I have written following code:</p>\n\n<pre><code>public ActionResult Index()\n        {                            \n            var folders = Directory.GetDirectories(Server.MapPath(\"~/Content/themes/base/songs\"));\n\n            foreach (var folder in folders)\n            {\n                var movieName = new DirectoryInfo(folder).Name;\n                string[] files = Directory.GetFiles(folder);\n                string img = string.Empty;\n                List&lt;string&gt; song = new List&lt;string&gt;();\n                foreach (var file in files)\n                {\n                    if (Path.GetExtension(file) == \".jpg\" ||\n                        Path.GetExtension(file) == \".png\")\n                    {\n                        img = Path.Combine(Server.MapPath(\"~/Content/themes/base/songs\"), file);\n                    }\n                    else \n                    {\n                        song.Add(Path.Combine(Server.MapPath(\"~/Content/themes/base/songs\"), file));\n                    }\n                }\n            }\n            return View();\n        }\n</code></pre>\n\n<p>What i am trying to do is pass 20 movie names with movie images and each movie has about 4 or 5 songs that should display under it. I have figured out how to capture all this info above but i am not sure how to pass it into view to Display. Can someone please help me?</p>\n"},{"tags":["jquery","asp.net-mvc-3","jqgrid-asp.net"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12803376,"title":"CSS tag live click not firing","body":"<p>I have an anchor tag that is produced dynamically by a 3rd party library, JQGrid MVC.</p>\n\n<p>It looks something like this:</p>\n\n<pre><code>&lt;a id=\"xx\" class=\"someClass\" href=\"javascript:void(0)\"&gt;Does Stuff&lt;/a&gt;\n</code></pre>\n\n<p>I want to hook into it's click event as follows:</p>\n\n<pre><code>$(\".someClass\").on(\"click\", function(){\n    alert('hello');\n});\n</code></pre>\n\n<p>Here is a <a href=\"http://jsfiddle.net/y2qfG/\" rel=\"nofollow\">jsfiddle link</a> to it.</p>\n\n<p>This event is not firing, I believe because the 3rd party control that creates it has already got an event handler on it.</p>\n\n<p>Is it at all possible to have my click event called and also then allow the 3rd party one to be called afterwards?</p>\n\n<p>I'm using JQuery 1.7.2 and JQGrid 4.2.0</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12831567,"title":"MVC change the contain without refresh the default view","body":"<p>Now I am try to do like this in mvc3 , when I click refresh or change the page, it was refresh whole thing and before that there will become a blank page. Now what I want is when I click the refresh button or go to another views, only some part of page is change. Let say I have 3  : header , main , and footer.\nThe header and footer will be the default. </p>\n"},{"tags":["json","asp.net-mvc-3","asp.net-mvc-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12831314,"title":"MVC2 To MVC3 Html.Raw(Json.Encode","body":"<p>I have a project developed in MVC2 / ASPX / c#.  I updated it to MVC and it works well. Just noticed when I publish it, get propblem with System.Web.Helpers; and copy it manually.</p>\n\n<p>Since the application is very complex I develop additional compenents in new projects.  I used MVC3 ASPX views, in my view I use:    </p>\n\n<pre><code>var series =  &lt;%= Html.Raw(Json.Encode(ViewBag.Series)) %&gt;;\n</code></pre>\n\n<p>it works great, when I integrate the controller, view and master page in the older application I get this error:</p>\n\n<pre><code>The name 'Json' does not exist in the current context\n</code></pre>\n\n<p>Would appreciate your suggestions.</p>\n"},{"tags":["asp.net-mvc-3","forms-authentication"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":5387,"score":2,"question_id":7282938,"title":"Add User Roles on Registration (Forms Authentication) MVC3","body":"<p>I am developing an MVC 3 project and want to add a user to a role when they are registered, using Forms Authentication. So I'd like to create some check boxes, or a drop down list showing the roles, which are selected and the user is assigned to the role as they are registered.</p>\n\n<p>I have this code so far, which works:</p>\n\n<pre><code>    public ActionResult Register()\n    {\n        ViewData[\"roleName\"] = new SelectList(Roles.GetAllRoles(), \"roleName\");\n        return View();\n    }\n</code></pre>\n\n<p>And in the view I have:</p>\n\n<pre><code>&lt;label for=\"roleName\"&gt;Select Role:&lt;/label&gt;\n@Html.DropDownList(\"roleName\")\n@Html.ValidationMessage(\"roleName\")\n</code></pre>\n\n<p>This is HttpPost section of the controller, and this is the part that I don't know what to code:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult Register(RegisterModel model)\n    {\n        if (ModelState.IsValid)\n        {\n            // Attempt to register the user\n            MembershipCreateStatus createStatus;\n            Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, null, out createStatus);\n\n            if (createStatus == MembershipCreateStatus.Success)\n            {\n                FormsAuthentication.SetAuthCookie(model.UserName, false /* createPersistentCookie */);\n                return RedirectToAction(\"Index\", \"Home\");\n            }\n            else\n            {\n                ModelState.AddModelError(\"\", ErrorCodeToString(createStatus));\n            }\n        }\n\n        // If we got this far, something failed, redisplay form\n        return View(model);\n</code></pre>\n\n<p>So, all the roles do show up in the view. All I need to know is what to add to the HttpPost section to get this working.</p>\n\n<p>Thanks a lot, Amy</p>\n"},{"tags":["asp.net-mvc-3","drop-down-menu","razor","selected"],"answer_count":5,"favorite_count":4,"up_vote_count":8,"down_vote_count":0,"view_count":30308,"score":8,"question_id":6807256,"title":"dropdownlist set selected value in MVC3 Razor","body":"<p>here my model</p>\n\n<pre><code> public class NewsCategoriesModel\n{\n    public int NewsCategoriesID { get; set; }        \n    public string NewsCategoriesName { get; set; }\n}\n</code></pre>\n\n<p>my Controller</p>\n\n<pre><code>public ActionResult NewsEdit(int ID, dms_New dsn)\n    {\n        dsn = (from a in dc.dms_News where a.NewsID == ID select a).FirstOrDefault();\n        var categories = (from b in dc.dms_NewsCategories select b).ToList();\n        var selectedValue = dsn.NewsCategoriesID;\n        SelectList ListCategories = new SelectList(categories, \"NewsCategoriesID\", \"NewsCategoriesName\",selectedValue);\n\n\n        // ViewBag.NewsCategoriesID = new SelectList(categories as IEnumerable&lt;dms_NewsCategory&gt;, \"NewsCategoriesID\", \"NewsCategoriesName\", dsn.NewsCategoriesID);\n        ViewBag.NewsCategoriesID = ListCategories;\n        return View(dsn);\n    }\n</code></pre>\n\n<p>and then my view</p>\n\n<pre><code>@Html.DropDownList(\"NewsCategoriesID\", (SelectList)ViewBag.NewsCategoriesID)\n</code></pre>\n\n<p>when i run, the dropdownlist not selecte value i set.. it's alway select the first</p>\n"},{"tags":["c#","asp.net-mvc-3","knockout.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12830885,"title":"how to specify mvc3 action links with knockout templates","body":"<p>I have a knockout template (using koExternaltemplateEngine_all.js) in which I want an edit link that will direct to a controller/action. I quite like what knockout provides for me in terms of MVVM, but uncertain if I'm trying to mix apples and oranges by specifying an action link in a knockout view. I'd like to knock what is the best way to accomplish this?</p>\n\n<p>Thanks in advance!</p>\n\n<pre><code>&lt;p&gt;\n  &lt;b&gt;&lt;span data-bind='text: Title'&gt;&lt;/span&gt;&lt;/b&gt;\n  &lt;span data-bind='text: ArticleDate'&gt;&lt;/span&gt;\n&lt;/p&gt;\n&lt;span data-bind='text: BodyText'&gt;&lt;/span&gt;\n</code></pre>\n\n<p>Something like</p>\n\n<pre><code>&lt;a data-bind=\"attr: { 'href': '@Url.Action(\"Details\" .. ?\n</code></pre>\n\n<p>The Model</p>\n\n<pre><code>    public class SecureModel\n    {\n       public SecureModel()\n       {\n\n       }\n\n       private List&lt;Article&gt; _articles;\n\n       public List&lt;Article&gt; Announcements\n       {\n          get\n          {\n              return _articles;\n          }\n          set\n          {\n              _articles = value;\n          }\n       }\n    }\n</code></pre>\n\n<p>View </p>\n\n<pre><code>    @model UI.Models.SecureModel\n    @{\n      ViewBag.Title = \"Announcements\";\n    }\n    var viewModel = {\n\n    isEditable: ko.observable(false),\n    articles: ko.mapping.fromJS([]),\n    loadInitialData: function () {\n        ko.mapping.fromJS(serverData, dataMappingOptions, viewModel.articles);\n    },\n    loadUpdatedData: function () {\n        ko.mapping.fromJS(serverData, dataMappingOptions, viewModel.articles);\n    }\n};\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12830907,"title":"Different between 'Label' and 'LabelFor' in C# MVC?","body":"<p>What is the different between </p>\n\n<pre><code> @Html.LabelFor \n</code></pre>\n\n<p>and</p>\n\n<pre><code> @Html.Label\n</code></pre>\n\n<p>And also what is </p>\n\n<pre><code>@using Telerik.Web.Mvc.UI;\n</code></pre>\n\n<p>Why we use it??</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":625,"score":3,"question_id":7429393,"title":"ASP.NET MVC Razor render SelectList without encoding","body":"<p>How can I get my select list to render without HTML coding</p>\n\n<pre><code>@{\n    var noiceList = new SelectList(new[] { new {ID = \"\", Name = \"\"}, \n                                   new {ID = \"y\", Name = \"Yes&amp;nbsp;&amp;nbsp;&amp;nbsp;after3Space\"}, \n                 \"ID\", \"Name\"); \n }\n @Html.DropDownList(\"noice\", @noiceList )\n</code></pre>\n\n<p>rendered</p>\n\n<pre><code>..\n&lt;option value=\"y\"&gt;Yes&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;3Space&lt;/option&gt;\n...\n</code></pre>\n\n<p>How do I get it to instead render</p>\n\n<pre><code>&lt;option value=\"y\"&gt;Yes&amp;nbsp;&amp;nbsp;&amp;nbsp;after3Space&lt;/option&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","linq-to-sql"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":268,"score":1,"question_id":11133811,"title":"using LINQ update particular column in asp.net mvc 3","body":"<p>I have following code for updating user's column</p>\n\n<pre><code> public void UpdateLastModifiedDate(string username)\n        {\n            using (AppEntities db = new AppEntities())\n            {\n                var result = from u in db.Users where (u.UserName == username) select u;\n\n                if (result.Count() != 0)\n                {\n                    var dbuser = result.First();\n\n                    dbuser.LastModifiedDate = DateTime.Now;\n                    db.SaveChanges();\n                }\n            }\n        }\n</code></pre>\n\n<p>I have other's 2 function of almost same of above function for UpdateLastLogOutDate, UpdateLastLoginDate. So, I decided to define single function for all to update Last Date like:</p>\n\n<pre><code>public void UpdateLastDate(string username, string ColumnName);\n</code></pre>\n\n<p>Here, I can not put ColumnName variable like this:</p>\n\n<pre><code>dbuser.ColumnName = DateTime.Now;\n</code></pre>\n\n<p>Is there any other way to do this using LINQ </p>\n"},{"tags":["jquery","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":10014430,"title":"Need to click the page before i am able to click any links","body":"<p>I am using JQuery and MVC3 razor on a project and I have a rather strange issue with mouse clicks.\nWhat happens is that when the page loads, I am forced to click somewhere in the page before the mouse/browser/webpage recognizes that I am clicking on a link. This happens on every page, regardless of what link, button, input, etc. that I click. </p>\n\n<p>I could post some code, but I am not sure which code to post since this problem permeates the entire site and there is way more code than I could possibly get into one post. I believe it has something to do with jquery/javascript but I am unsure.</p>\n\n<p>I am at a loss as to where to look for the problem, has anyone ran into this problem before? If so, how did you correct the issue?</p>\n\n<p>Thanks in advance for any help.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12829537,"title":"Post Array of values from View back to controller","body":"<p>I am trying to pass all data from an array inside my view back to a controller.  I'm not sure how to do this using my ViewModel.  </p>\n\n<p>Model Class</p>\n\n<pre><code>public class ResultsViewModel\n{\n    public int?[] ProgramIds { get; set; }\n\n}\n</code></pre>\n\n<p>Form inside of the View</p>\n\n<pre><code>@using (Html.BeginForm(\"ExportCsv\", \"SurveyResponse\", FormMethod.Post))\n\n{\n\n   // Should I be looping through all values in the array here?\n    @Html.HiddenFor(x =&gt; x.ProgramIds)\n\n    &lt;input type=\"submit\" value=\"Submit\" /&gt;\n}\n</code></pre>\n\n<p>Controller I am posting to</p>\n\n<pre><code>        [HttpPost]\n        public ActionResult ExportCsv(ResultsViewModel ResultsViewModel)\n        {\n\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12827444,"title":"Form field values aren't binding to model","body":"<p>I've created a simple MVC application that takes information from a form and passes it to a controller</p>\n\n<p>View:</p>\n\n<pre><code>@model MvcApplication1.Models.BetChargeModel\n\n\n@using (Html.BeginForm())\n{\n&lt;div&gt;\n    @Html.TextBoxFor(m=&gt;m.numerators[0])   /   @Html.TextBoxFor(m=&gt;m.denominators[0])\n&lt;/div&gt;\n\n&lt;div&gt;\n    @Html.TextBoxFor(m =&gt; m.numerators[1])   /   @Html.TextBoxFor(m =&gt; m.denominators[1])\n&lt;/div&gt;\n\n&lt;div&gt;\n    &lt;input type=\"submit\" value=\"Calculate\" /&gt;\n&lt;/div&gt;\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code> public ActionResult Index()\n    {\n        BetChargeModel model = new BetChargeModel();\n        model.numerators = new List&lt;double&gt;();\n        model.denominators = new List&lt;double&gt;();\n        model.denominators.Add(1);\n        model.denominators.Add(1);\n        model.numerators.Add(0);\n        model.numerators.Add(0);\n\n        return View(model);\n    }\n\n[HttpPost]\n    public ActionResult Index(BetChargeModel model)\n    {\n        double odds1 = model.numerators[0] / model.denominators[0];\n        double odds = model.numerators[1] / model.denominators[1];\n\n//other code\n}\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code> public class BetChargeModel\n{\n    public List&lt;double&gt; numerators { get; set; }\n\n    public List&lt;double&gt; denominators { get; set; }\n\n    public double result { get; set; }\n\n}\n</code></pre>\n\n<p>When I run this and try and post back information from the View the Model is coming back empty (full of null fields and zeros). Why is the data in my Textbox's not binding to the model?</p>\n\n<p>(Edit: I've changed the model properties and reference to Numerators, Denominators and Result but haven't updated those here for sake of brevity)</p>\n"},{"tags":["asp.net-mvc-3","c#-4.0","asp.net-mvc-3-areas"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12827118,"title":"Posting data to controller via model mvc3 asp.net","body":"<p><img src=\"http://i.stack.imgur.com/CNF61.png\" alt=\"enter image description here\">I am trying to edit data for entities that were outputted via a list of objects.</p>\n\n<p>The initial model looks like:</p>\n\n<pre><code>    namespace FuelPortal.Models.ViewModels\n{\n    public class ThirdPLAllocationViewModel\n    {\n        public int AllocationID { get; set; }\n        public int ProgramID { get; set; }\n        public int CustomerID { get; set; }\n        public string CustName { get; set; }\n        public int FuelCardID { get; set; }\n        public string BranchName { get; set; }\n        public double PaymentPercentage { get; set; }\n        public double GLCode { get; set; }\n        public DateTime EffectiveDate { get; set; }\n        public DateTime? EndDate { get; set; }\n\n    }\n}\n</code></pre>\n\n<p>The view model looks like:</p>\n\n<pre><code>    using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Web.Mvc;\n\nnamespace FuelPortal.Models.ViewModels\n{\n    public class ThirdPLDrillDownViewModel\n    {\n        public ThirdPLDrillDownViewModel()\n        {\n            ThirdPL = new ThirdPLViewModel();\n            Allocation = new ThirdPLAllocationViewModel();\n            AllocationList = new List&lt;ThirdPLAllocationViewModel&gt;();\n            CustList = new List&lt;SelectListItem&gt;();\n        }\n\n        public ThirdPLViewModel ThirdPL { get; set; }\n        public ThirdPLAllocationViewModel Allocation { get; set; }\n        public List&lt;ThirdPLAllocationViewModel&gt; AllocationList { get; set; }\n        public List&lt;SelectListItem&gt; CustList { get; set; }\n        public List&lt;IEnumerable&lt;ThirdPLAllocationViewModel&gt;&gt; AllocationLists { get; set; }\n    }\n}\n</code></pre>\n\n<p>The controller is populates the view model with the following code:</p>\n\n<pre><code> public ActionResult Edit3PL(int fid, int sid, int pid)\n        {\n            ThirdPLDrillDownViewModel thirdPL = new ThirdPLDrillDownViewModel();\n            thirdPL.ThirdPL = repository.getThirdPLDetail(fid, sid);\n            **thirdPL.AllocationList = repository.getThirdPLAllocations(pid);**\n            ***thirdPL.CustList = selectListRepository.get3PLCustomers(Int32.Parse(Session[\"UserID\"].ToString()));***\n            return PartialView(\"_Edit3PL\",thirdPL);\n        }\n</code></pre>\n\n<p>The data is outputted like so:</p>\n\n<pre><code>@foreach (var item in Model.AllocationList)\n                {\n                    &lt;tr class=\"body\"&gt;                        \n                        &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Allocation.CustName,Model.CustList)\n                        @item.CustName&lt;/td&gt;\n                        &lt;td&gt;@item.BranchName&lt;/td&gt;\n                        &lt;td&gt;@item.PaymentPercentage%&lt;/td&gt;\n                        &lt;td&gt;@item.EffectiveDate&lt;/td&gt;\n                        &lt;td&gt;&lt;img alt=\"close button\" title=\"Remove this allocation\" src=\"@Url.Content(\"~/Content/images/dialog-close.png\")\" /&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n\n                }\n</code></pre>\n\n<p>The problem is how would i edit and get the data back to the controller. I'm at a loss here. I understand that I will need @html.editorfor() for the each outputted valu but if I tried to submit it back to the model wouldn't each entity overwrite the other? Any help would be greatly appreciated!!!!!!</p>\n\n<p>Sincerely, </p>\n\n<p>The Entire Partial View looks Like so:</p>\n\n<pre><code> @model FuelPortal.Models.ViewModels.ThirdPLDrillDownViewModel\n@{\n            //insert stuff\n}\n\n&lt;div class=\"frmBG\" id=\"frmBG\"&gt;\n\n    &lt;script type=\"text/javascript\" src=\"@Url.Content(\"~/Scripts/data_tables.js\")\" /&gt;\n    &lt;div class=\"infr_data\"&gt;\n\n        &lt;h2&gt;@Model.ThirdPL.ProgramName&lt;/h2&gt;    \n        &lt;div class=\"detail_head\"&gt;\n            @Html.ActionLink(\"[Back to Details]\", \"Detail3PL\", \"ThirdPL\", new { fid = Model.ThirdPL.FuelCardID, sid=Model.ThirdPL.SubAccountID, pid=Model.ThirdPL.ThirdPLProgramID }, new { @class = \"ajax_load\" })   \n\n        &lt;/div&gt;\n        @if (Model.ThirdPL != null)\n        {  \n            using(Ajax.BeginForm(new AjaxOptions { UpdateTargetId = \"frmBG\" }))\n            {\n                &lt;table class=\"detail_table\"&gt;  \n                    &lt;tr&gt;\n                        &lt;td class=\"title\"&gt;Employee Pattern: &lt;/td&gt;\n                        &lt;td&gt;@Html.EditorFor(x =&gt;x.ThirdPL.FuelCardNum)&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td class=\"title\"&gt;Sub Account:&lt;/td&gt;\n                        &lt;td&gt;@Model.ThirdPL.SubAccount&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td class=\"title\"&gt;Fuel Allowance:&lt;/td&gt;\n                        &lt;td&gt;@Html.EditorFor(x =&gt;x.ThirdPL.GalAllowance)&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td class=\"title\"&gt;Effective Date:&lt;/td&gt;\n                        &lt;td&gt;@Html.TextBoxFor(x =&gt;x.ThirdPL.EffectiveDate)&lt;/td&gt;\n                    &lt;/tr&gt;\n\n                &lt;/table&gt;      \n\n\n                &lt;div class=\"table_head\"&gt;&lt;h3&gt;@Model.ThirdPL.ProgramName's Financial Allocation&lt;/h3&gt;\n\n                &lt;/div&gt;\n                &lt;table class=\"data_table\"&gt;                \n                    &lt;thead&gt;\n                    &lt;tr class=\"head\"&gt;\n                        &lt;th&gt;Company&lt;/th&gt;\n                        &lt;th&gt;Branch&lt;/th&gt;\n                        &lt;th&gt;Allocation Percentage&lt;/th&gt;\n                        &lt;th&gt;Effective Date&lt;/th&gt; \n                        &lt;th&gt;&lt;/th&gt;               \n                    &lt;/tr&gt;\n                    &lt;/thead&gt;\n                    @foreach (var item in Model.AllocationList)\n                    {\n                        &lt;tr class=\"body\"&gt;                        \n                            &lt;td&gt;\n                            @item.CustName&lt;/td&gt;\n                            &lt;td&gt;@item.BranchName&lt;/td&gt;\n                            &lt;td&gt;@item.PaymentPercentage%&lt;/td&gt;\n                            &lt;td&gt;@item.EffectiveDate&lt;/td&gt;\n                            &lt;td&gt;&lt;img alt=\"close button\" title=\"Remove this allocation\" src=\"@Url.Content(\"~/Content/images/dialog-close.png\")\" /&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n\n                    }\n                &lt;/table&gt;\n                &lt;div class=\"table_foot\"&gt;&lt;/div&gt;\n                &lt;input type=\"submit\" value=\"Save\" /&gt;\n            }\n\n        }\n        else\n        {&lt;div class=\"error_text\"&gt; @ViewBag.Error &lt;/div&gt;}\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","c#-4.0","razor","modelbinder"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":344,"score":4,"question_id":6337246,"title":"How to convert a http-request into the right object?","body":"<p>In my ASP.Net MVC3 project I have created a ModelBinder which binds a basemodel. In my View i create a object from a Model that inherit from my basemodel. Now i wan´t to know which Model was created via reflection in my ModelBinder when i press the submit-button, but how?</p>\n\n<p>ModelBinder:</p>\n\n<pre><code>public class MBTestBinder : IModelBinder\n{\n    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)\n    {\n        //need to know which Model was created -&gt; convert into the right object\n        //reflection?\n    }\n}\n</code></pre>\n\n<p>Models:</p>\n\n<pre><code>[ModelBinder(typeof(MBTestBinder))]\npublic class MBTest\n{\n    public string Name { get; set; }\n    public MBTest()  {}\n}\n\npublic class MBAbl : MBTest\n{\n    public MBAbl()  {}\n    public string House { get; set; }\n}\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>@model ModelBinderProject.Models.MBTest\n\n@using (Html.BeginForm(\"Index\", \"Home\")) {\n&lt;fieldset&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorForModel(Model)\n    &lt;/div&gt;\n    &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Create\" /&gt;\n    &lt;/p&gt;\n&lt;/fieldset&gt;\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>public ActionResult Create(MBTest testItem)\n{\n    //on init get a view from a class that hast inherit the class MBTest\n    if (testItem.Name == null ) testItem = new MBAbl();\n\n    return View(testItem);\n}\n</code></pre>\n\n<p>edit:</p>\n\n<p>with <code>bindingContext.ValueProvider.GetValue(\"House\")</code> i can get the value of the Form but <code>bindingContext.ModelType</code> thinks that my Model is <code>MBTest</code></p>\n"},{"tags":["c#","asp.net-mvc","wcf","asp.net-mvc-3","asynchronous"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1244,"score":1,"question_id":6287670,"title":"MVC 3 - How to RedirectToAction immediately after asynchronous WCF call","body":"<p>How do i get my MVCcontroller method to call a long running WCF task asynchronously and redirect immediately after the asynchronously call is fired?</p>\n\n<p>I have configured my WCF service reference to \"Generate asynchronously operations\" yet when the method is called i can see in the debugger that code steps through and <strong>passes</strong> the \"RedirectToAction(\"RedirectToActionTestCompleted\")\" line but the browser does not redirect until the WCF task is finished.</p>\n\n<pre><code>public class HomeController : Controller\n{\n    public ActionResult Index()\n    {\n        return View();\n    }\n\n    public ActionResult About()\n    {\n        return View();\n    }\n\n    public ActionResult RedirectToActionTest()\n    {\n        Service1Client client = new Service1Client();\n        client.TestWcfCallAsync();\n        return RedirectToAction(\"RedirectToActionTestCompleted\");\n    }\n\n    public ActionResult RedirectToActionTestCompleted()\n    {\n        return View();\n    }\n}\n</code></pre>\n\n<p>And the WCF service method</p>\n\n<pre><code>public void TestWcfCall()\n{\n    Thread.Sleep(30000); //30 seconds\n}\n</code></pre>\n\n<p>Why is the web page waiting for the WCF method to complete?</p>\n"},{"tags":["asp.net-mvc-3","http-response-codes","response.filter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12826659,"title":"How to modify HTTP Response Using Filters in MVC 3 Razor?","body":"<p><strong>HtML section in _Layout.cshtml</strong></p>\n\n<pre><code>&lt;div id=\"header\"&gt;\n      &lt;div class=\"logo\"&gt;&lt;a href=\"#\"&gt;&lt;img src=\"@Url.Content(\"~/!(IMAGEPATH)!/logo.png\")\" alt=\"\" /&gt;&lt;/a&gt;&lt;/div&gt;\n      &lt;div class=\"fb_like\"&gt;&lt;img src=\"@Url.Content(\"~/!(IMAGEPATH)!/fb_like_btn.png\")\" alt=\"\" /&gt;&lt;/div&gt;\n      &lt;div class=\"google_plus\"&gt;&lt;img src=\"@Url.Content(\"~/!(IMAGEPATH)!/google_plus.png\")\" alt=\"\" /&gt;&lt;/div&gt;\n      &lt;div class=\"header_rt\"&gt;\n        &lt;ul&gt;\n          &lt;li&gt;Call us: 1500 258 789&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"#\"&gt;Live chat&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"#\"&gt;My Account&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"#\"&gt;Sign in&lt;/a&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n        &lt;div class=\"search\"&gt;\n          &lt;input type=\"text\" value=\"Type your keyword...\" class=\"srh_txt\" /&gt;\n          &lt;input name=\"Submit\" type=\"submit\" value=\"Submit\" class=\"srh_btn\" /&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;div id=\"main\"&gt;\n      @RenderBody()\n &lt;/div&gt;\n</code></pre>\n\n<p><strong>Html section in Index.cshtml</strong></p>\n\n<pre><code>@{\n   ViewBag.Title = \"Home Page\";\n}\n&lt;div class=\"clr\"&gt;&lt;/div&gt;\n&lt;div id=\"banner\"&gt;\n&lt;div id=\"slider\"&gt;&lt;img src=\"@Url.Content(\"~/!(IMAGEPATH)!/banner.jpg\")\" alt=\"\" /&gt;&lt;/div&gt;\n&lt;div class=\"banner_rt\"&gt;\n  &lt;div class=\"adv1\"&gt;&lt;img src=\"@Url.Content(\"~/!(IMAGEPATH)!/adv1.jpg\")\" alt=\"\" /&gt;&lt;/div&gt;\n  &lt;div class=\"adv2\"&gt;&lt;img src=\"@Url.Content(\"~/!(IMAGEPATH)!/adv2.jpg\")\" alt=\"\" /&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p><strong>Using bellow code I able to Replace !(IMAGEPATH)! only in _Layout.cshtml</strong></p>\n\n<pre><code>   void Application_PostReleaseRequestState(object sender,EventArgs e)\n   {\n      if(string.CompareOrdinal(Response.ContentType,\"text/html\") == 0)\n      {\n         Response.Filter = new ResponseFilter(Response.Filter);\n      }\n   }\n</code></pre>\n\n<p>But above described code not affecting child pages like <strong>Index.cshtml</strong>. Please tell me any event in <strong>ASP.NET MVC3</strong> like old <strong>protected override void OnPreInit(EventArgs e)</strong> of Classic ASP.NET !!!!</p>\n\n<p>I want to know which event effecting all the child pages before rendering in MVC3 ?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","drop-down-menu","telerik"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":731,"score":1,"question_id":9017683,"title":"Telerik grid with dropdownList","body":"<p>Now i have tryed to solve the problem for several hours and im about to give up...</p>\n\n<p>I am using MVC 3 grid kontrol from Telerik. In my grid i want dropdownlists selected item to be corresponding to Role of the user. Dropdownlist have all the User Roles.   </p>\n\n<pre><code>@(Html.Telerik().Grid(Model)\n    .Name(\"Grid\").TableHtmlAttributes(new { width=\"800\"})\n    .Columns(columns =&gt;\n    {\n        //if (userIsInWhateverRole){\n        //    columns.Template(o =&gt; Html.Action(GenerateYourLinkStuffHere));\n        //}\n        columns.Bound(o =&gt; o.Name).Width(150);\n        columns.Bound(o =&gt; o.Email).Width(120);\n        columns.Template(\n            @&lt;text&gt;\n                @Html.DropDownList(item.Role, (IEnumerable&lt;SelectListItem&gt;)item.Roles)\n                @Html.DropDownListFor(x =&gt; item.Role, (IEnumerable&lt;SelectListItem&gt;)item.Roles)\n            &lt;/text&gt;\n        ).Width(120);\n    })\n    .Sortable()\n    .Scrollable()\n    .Groupable()\n    .Filterable()\n    .Pageable(paging =&gt; paging.PageSize(5))\n)\n</code></pre>\n"},{"tags":["asp.net-mvc-3","dataannotations"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":11801723,"title":"AllowHtml Not Working - But Works Fine With Different Model/Controller","body":"<p>I have two very similar processes, both requiring HTML input and the AllowHtml attribute... One process creates an HTML Email, while the other creates an Update Message to display to logged in users.</p>\n\n<p>The AllowHtml Attribute is working fine when creating the Emails but when I try to create an Update Message it throws the 'A potentially dangerous Request.Form value...' error.</p>\n\n<p><strong>What would cause AllowHtml to work in for one and not the other?</strong></p>\n\n<p>I've poured over all of my code and can't figure out what is different between the two that could cause this problem.</p>\n\n<hr>\n\n<p><strong>Here is my code in the Email Controller:</strong></p>\n\n<pre><code>public ActionResult Create()\n{\n    return View(new EmailBlast());\n}\n[HttpPost]\npublic ActionResult Create(EmailBlast Email)\n{\n    if (ModelState.IsValid)\n    {\n        var EmailID = _emailblasts.Create(Email);\n    }\n    return View(Email);\n}\n</code></pre>\n\n<p><strong>And here is the Email model:</strong></p>\n\n<pre><code>public class EmailBlast\n{\n    public decimal EmailID { get; set; }\n\n    [Required(ErrorMessage = \"Please Enter a Subject\")]\n    [StringLength(250, ErrorMessage = \"Subject Too Long\")]\n    public string Subject { get; set; }\n\n    [Required(ErrorMessage = \"Please Include a Message\")]\n    [AllowHtml]\n    public string HTMLBody { get; set; }\n    ....\n}\n</code></pre>\n\n<p><strong>Here is my code in the Update Messages Controller:</strong></p>\n\n<pre><code>public ActionResult Create()\n{\n    return View(new CreateUpdateMessage());\n}\n[HttpPost]\npublic ActionResult Create(CreateUpdateMessage message)\n{\n    if (ModelState.IsValid)\n    {\n        var Message = _updatemessages.Create(message);\n        return RedirectToAction(\"View\", new { id = Message.ID });\n    }\n    return View(message);\n}\n</code></pre>\n\n<p><strong>And the Update Message model:</strong></p>\n\n<pre><code>public class CreateUpdateMessage\n{\n    [Required(ErrorMessage = \"Please Enter a Subject\")]\n    [StringLength(250, ErrorMessage = \"Subject Too Long\")]\n    public string Subject { get; set; }\n\n    [Required(ErrorMessage = \"Please Include a Message\")]\n    [AllowHtml]\n    public string Message { get; set; }\n}\n</code></pre>\n\n<hr>\n\n<p>Ok, so I figured out the problem... \"Message\" must be a reserved parameter or something because I changed CreateUpdateMessage.Message to \"MessageHTML\" and everything works fine now.</p>\n\n<pre><code>public class CreateUpdateMessage\n{\n    [Required(ErrorMessage = \"Please Enter a Subject\")]\n    [StringLength(250, ErrorMessage = \"Subject Too Long\")]\n    public string Subject { get; set; }\n\n    [Required(ErrorMessage = \"Please Include a Message\")]\n    [AllowHtml]\n--&gt; public string MessageHTML { get; set; }\n}\n</code></pre>\n"},{"tags":["sql","asp.net-mvc-3","mvc","dataprovider"],"answer_count":5,"favorite_count":0,"up_vote_count":11,"down_vote_count":0,"view_count":15918,"score":11,"question_id":6865249,"title":"Unable to find the requested .Net Framework Data Provider. It may not be installed. - when following mvc3 asp.net tutorial","body":"<p>I am following the ASP.NET MVC 3 Music store application tutorial but I keep getting stuck in part 4: <a href=\"http://www.asp.net/mvc/tutorials/mvc-music-store-part-4\">http://www.asp.net/mvc/tutorials/mvc-music-store-part-4</a>. It keeps telling me that I do not have the SQL data provider installed:</p>\n\n<p>Exact error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>System.ArgumentException was unhandled by user code\n  Message=Unable to find the requested .Net Framework Data Provider.  It may not be installed.\n  Source=System.Data\n  StackTrace:\n       at System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName)\n       at System.Data.Entity.Internal.LazyInternalConnection.TryInitializeFromAppConfig(String name)\n       at System.Data.Entity.Internal.LazyInternalConnection.Initialize()\n       at System.Data.Entity.Internal.LazyInternalConnection.get_ConnectionHasModel()\n       at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()\n       at System.Data.Entity.Internal.InternalContext.Initialize()\n       at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)\n       at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()\n       at System.Data.Entity.Internal.Linq.InternalSet`1.GetEnumerator()\n       at System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable&lt;TResult&gt;.GetEnumerator()\n       at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)\n       at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)\n       at MusicApplication.Controllers.StoreController.Index() in C:\\Users\\Michelle\\documents\\visual studio 2010\\Projects\\MusicApplication\\MusicApplication\\Controllers\\StoreController.cs:line 18\n       at lambda_method(Closure , ControllerBase , Object[] )\n       at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)\n       at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)\n       at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)\n       at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass15.&lt;InvokeActionMethodWithFilters&gt;b__12()\n       at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)\n  InnerException: \n</code></pre>\n\n<p>I have added the reference to System.Data.SqlServerCe - still have the same error. Any guidance would be really appreciated</p>\n"},{"tags":["jquery","asp.net-mvc-3","validation","unobtrusive-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12825443,"title":"mvc3 + jQuery validation: how to catch error or ok events","body":"<p>I'm using MVC3 C# and I have a model with some data annotation (validation rules)</p>\n\n<p>In my view.cshtml file I have a form with some complex logic that draw some figures using absolute coordinates over existing elements.</p>\n\n<p>When user submit the form with incorrect data the jQuery check makes visible some fields of @Html.ValidationMessageFor(...)\nAnd now user may correct data - and instant the @Html.ValidationMessageFor(...) messages dissapear. </p>\n\n<p>So, this showing/hiding moves other page-elements and this movement breaks my absolute positioning and I need to invoke redraw function ( CorrectSizesAndPos(); ).</p>\n\n<p>How can I catch these nasty highlite/unhigligt events?</p>\n\n<p>For now:</p>\n\n<ol>\n<li><p>I add the id to my form:</p>\n\n<pre><code>@using (Html.BeginForm(\"Action1\", \"Controller1\", FormMethod.Post, \n        new {id=\"VMCreateForm\"}))\n</code></pre></li>\n<li><p>I add event to check data on submit:</p>\n\n<pre><code>$(\"#VMCreateForm\").submit(function () {\n    if (true == $(\"#VMCreateForm\").valid()) {\n        $(\":disabled\").removeAttr('disabled'); //&lt;-- I need this to transfer data to server from some disabled fields... \n    }\n    CorrectSizesAndPos();\n    return true;\n});\n</code></pre></li>\n<li><p>I can catch if form is not good before submit:</p>\n\n<pre><code>$(document).ready(function () {\n    $(\"#VMCreateForm\").bind('invalid-form.validate',\n        function (form, validator) {\n            console.log('invalid-form.validate');\n            CorrectSizesAndPos();\n        }\n    );\n });\n</code></pre></li>\n<li><p>I try to add some events also inside $(\"#VMCreateForm\").validate({ .. }) but they did not invoked... </p></li>\n</ol>\n\n<p>How can I catch when unobstrusive validation shows or hides validation messages?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":860,"score":2,"question_id":10825849,"title":"MVC3 Action File Size Limit","body":"<p>I'm implementing a jquery based file upload plugin <a href=\"http://blueimp.github.com/jQuery-File-Upload/\" rel=\"nofollow\">http://blueimp.github.com/jQuery-File-Upload/</a>. There is a sample MVC3 app that you can download <a href=\"https://github.com/maxpavlov/jQuery-File-Upload.MVC3\" rel=\"nofollow\">https://github.com/maxpavlov/jQuery-File-Upload.MVC3</a>.</p>\n\n<p>The author of the sample has a comment in the Home View:\n</p>\n\n<blockquote>\n  <p>@*IN ORDER TO USE MVC ACTIONS AS HANDLERS OF AJAX CALLS, USE THE FORM DECLARATION BELOW. (THE ONE COMMENTED OUT)\n  IT IS NOT ADVISED SINCE WHEN USING MVC CONTROLLER TO HANDLE REQUESTS ONE CAN'T CONTROL THE maxMessageLength OF THE POST REQUEST\n  THIS CASTS THE FUNCTIONALITY OF UPLOADING LARGE FILES USELESS, UNLESS YOU SUCRIFICE THE SECURITY AND ALLOW LARGE \n  POST MESSAGE SIZES SITE-WIDE.</p>\n  \n  <p>IT IS BETTER TO USE HTTP HANDLER TO PROCESS UPLOAD REQUESTS UNTIL MVC FRAMEWORK PROVIDES WAYS TO SET maxMessageLength ON\n  PER ACTION BASIS *@</p>\n</blockquote>\n\n<p>Is this still the case?</p>\n\n<p>I've found out I can set the <code>&lt;httpRuntime maxRequestLength=\"x\" /&gt;</code> in the web.config, but my understanding is that this is a security vulnerability. Is the case also?</p>\n\n<p>I would prefer to handle my upload in the controller instead of using an HttpHandler but don't want to be limited by file size and don't want to introduce any security vulnerabilities if I don't have to.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>According to this post <a href=\"http://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc3-0\">File Upload Asp.net Mvc3.0</a> the default file size limit is 4mb. I've confirmed this limit <a href=\"http://msdn.microsoft.com/en-us/library/e1f13641.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/e1f13641.aspx</a> and understand the vulnerability. </p>\n\n<p><strong>Is this the only way to upload a file thru a controller action beyond 4mb?</strong></p>\n"},{"tags":["visual-studio-2010","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1513,"score":1,"question_id":7275117,"title":"System.Web.WebPages - Not in Add Reference dialog","body":"<p>I'm trying to add a reference to System.Web.WebPages<br>\nHowever, it's not in my \"add reference\" dialog.</p>\n\n<p>I'm already using MVC 3, and Razor views...</p>\n\n<p>What am I missing?</p>\n"},{"tags":[".net","asp.net-mvc-3","visual-studio-2010"],"answer_count":0,"favorite_count":0,"up_vote_count":6,"down_vote_count":1,"view_count":1176,"score":5,"question_id":11034228,"title":"System.Web.Mvc.ModelClientValidationRule' exists in both locations error","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/9471263/mvc-4-beta-side-by-side-installation-error\">MVC 4 Beta side by side installation error</a>  </p>\n</blockquote>\n\n\n\n<p>I get this error</p>\n\n<blockquote>\n  <p>Error 1    The type 'System.Web.Mvc.ModelClientValidationRule' exists in\n  both  'c:\\Program Files (x86)\\Microsoft ASP.NET\\ASP.NET Web\n  Pages\\v2.0\\Assemblies\\System.Web.WebPages.dll'  and 'c:\\Program Files\n  (x86)\\Microsoft ASP.NET\\ASP.NET MVC 3\\Assemblies\\System.Web.Mvc.dll'</p>\n</blockquote>\n\n<p>After I have changed <code>Copy Local</code> to <strong>false</strong> for some ASP .NET MVC3 DLLs</p>\n\n<p>How can I stop this error from occurring?</p>\n"},{"tags":["javascript","asp.net-mvc-3","knockout.js","knockout-mapping-plugin","ko.observablearray"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12824979,"title":"Knockout copying observable array issue","body":"<p>I am trying to copy one observably array to another observable array.  I have a form that has a billing address, shipping address and checkbox that when clicked allows the user to copy all of their shipping info to their billing address.  The problem I am having is when I copy one observable array to another, then any time I make a change to either observable both observable arrays get updated.  I would like to keep both observable array values seperate just copy the values from one to the other.</p>\n\n<p>My observable arrays are set up using the <a href=\"http://knockoutjs.com/documentation/plugins-mapping.html\" rel=\"nofollow\" title=\"mapping plugin\">mapping plugin</a>:</p>\n\n<pre><code>self.billingAddress = ko.mapping.fromJS(InitialEmptyAddressModel);\nself.shippingAddress = ko.mapping.fromJS(InitialEmptyAddressModel);\n</code></pre>\n\n<p>Then to copy shipping info to billing after entering shipping information and clicking on 'Use Shipping Address':</p>\n\n<pre><code> self.CopyAddress = function() {\n    self.billingAddress(self.shippingAddress());\n    }\n</code></pre>\n\n<p>I've also tried the following:\n<a href=\"http://stackoverflow.com/questions/6509297/what-is-the-best-way-of-cloning-copying-an-observablearray-in-knockoutjs\">What is the best way of cloning/copying an observablearray in knockoutJS?</a></p>\n\n<p>Any help would be appreciated thank you.</p>\n"},{"tags":["c#","asp.net-mvc-3","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":41,"score":-1,"question_id":12824734,"title":"Script works on Create, but in Edit doens't","body":"<p>guys.</p>\n\n<p>I have a View on my ASP.NET MVC Project.\nThis View has a lot of fields and a script to search some data.</p>\n\n<pre><code>&lt;link href=\"@Url.Content(\"~/Content/styles/people.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/people.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n\n&lt;input type=\"hidden\" id=\"selectiveAccess\" name=\"selectiveAccess\" value=\"@ViewBag.SelectiveAccess\" /&gt;\n&lt;input type=\"hidden\" id=\"peopleID\" name=\"peopleID\" value=\"@ViewBag.PeopleID\" /&gt;\n\n&lt;div id=\"content\"&gt;\n&lt;h1&gt;People - Create&lt;/h1&gt;\n&lt;h3&gt;All the fields with (*) are required.&lt;/h3&gt;\n\n\n@using (Html.BeginForm(\"Save\", \"People\", FormMethod.Post))\n{\n    @Html.Partial(\"EnabledCourses\")\n    @Html.Partial(\"GeneralData\")    \n    @Html.Partial(\"AddressData\")\n    @Html.Partial(\"ContactData\")    \n    @Html.Partial(\"OtherInformations\")\n    @Html.Partial(\"Research\")\n\n    &lt;a href=\"#top\"&gt;Back to the top&lt;/a&gt;\n    &lt;div id=\"divErrors\"&gt;&lt;/div&gt;\n\n    &lt;div id=\"actions\"&gt;\n        &lt;ul style=\"list-style: none;\"&gt;\n            &lt;li style=\"display: inline\"&gt;&lt;input type=\"reset\" id=\"clear\" style=\"height: 3em; width: 10em\" value=\"Clear form\" /&gt;&lt;/li&gt;\n            &lt;li style=\"display: inline\"&gt;&lt;input type=\"submit\" id=\"continue\" style=\"height: 3em; width: 10em\" value=\"Continue\" /&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p></p>\n\n<p>When I call Index(), the script works fine.</p>\n\n<pre><code>public ActionResult Index()\n{\n    ViewBag.PeopleID = string.Empty;\n    return View();\n}\n</code></pre>\n\n<p>When I call Edit(), the same script doensn't works.</p>\n\n<pre><code>public ActionResult Edit(long peopleID)\n{\n    ViewBag.PeopleID = peopleID;\n    return View(\"Index\");\n}\n</code></pre>\n\n<p>This is the script:</p>\n\n<pre><code>function searchCityByPostalCode() {\n\nvar postalCode = {\n    'postalCode': $('#postalCode').val()\n};\n\n$.get(\n    'people/SearchCityByPostalCode',\n    postalCode,\n    function (city) {\n        // do something that works.\n    }\n);\n}\n</code></pre>\n\n<p>Anyone knows the problem?\nThanks!!!</p>\n"},{"tags":["c#",".net","asp.net-mvc-3","new-window"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":12820592,"title":"MVC New Window Bottlenecking","body":"<p>I encountered a bizarre issue that I hadn't previously and I thought I would inquire here to see if anyone had any recommendations.</p>\n\n<p>Currently, my application has an area to create a new \"recording\" <em>(which uses a Flash module within a new window to record audio)</em> and when the recording is finish, the user submits the form and all of the audio data is posted to my controller. </p>\n\n<p>This process can range in duration depending on the size of the audio, so the window will remain open until the uploading is finish and then it closes.</p>\n\n<p>The problem occurs during the upload process, if the user uploads a recording and while it is uploading, attempts to open a new window <em>(which is populated with the \"Create Recording\" view)</em> and the loading of the new window contents stalls until the upload is complete.</p>\n\n<p>The entire process works fine if I open up multiple windows for the Create Recording prior to actually uploading one of them, however if I start uploading one and then attempt to open a new window then it will \"wait\" on the upload operation to finish before populating the new window contents.</p>\n"},{"tags":["html","asp.net-mvc-3","twitter-bootstrap","navbar"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12824563,"title":"Use bootstrap navbar in ASP.NET MVC website","body":"<p>I want to use Bootstrap in my new ASP.Net MVC project, as you know the structure of Navbar is like:</p>\n\n<pre><code>&lt;div class=\"navbar\"&gt;\n  &lt;div class=\"navbar-inner\"&gt;\n    &lt;a class=\"brand\" href=\"#\"&gt;Title&lt;/a&gt;\n    &lt;ul class=\"nav\"&gt;\n      &lt;li class=\"active\"&gt;&lt;a href=\"#\"&gt;Home&lt;/a&gt;&lt;/li&gt;\n      &lt;li&gt;&lt;a href=\"#\"&gt;Link&lt;/a&gt;&lt;/li&gt;\n      &lt;li&gt;&lt;a href=\"#\"&gt;Link&lt;/a&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n&lt;/div&gt;  \n</code></pre>\n\n<p>as you see the active Url have <strong>active</strong> class.\nI want to know how can I sense the active url and get it active class?</p>\n\n<p>I use MVC 3 with Razor.</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12823555,"title":"Review required. Client disconnected exception during online zip archive generation","body":"<p>I created a custom action result to send zipped archive of multiple files downloaded from another server.</p>\n\n<p>Sorry for a ton of code, but there it is.</p>\n\n<pre><code>using ICSharpCode.SharpZipLib.Zip;\n\n/// &lt;summary&gt;\n/// Downloads the files using specified URLs and continuously streams zipped result to the client \n/// &lt;/summary&gt;\npublic class MultipleFileZipResult : ActionResult\n{\n    private readonly ILog log;\n    private const int BufferSize = 32 * 1024;\n\n    /// &lt;summary&gt;\n    /// Initializes a new instance of the &lt;see cref=\"MultipleFileZipResult\"/&gt; class.\n    /// &lt;/summary&gt;\n    /// &lt;param name=\"urls\"&gt;The URLs to download.&lt;/param&gt;\n    /// &lt;param name=\"resultFileName\"&gt;Name of the result file.&lt;/param&gt;\n    /// &lt;param name=\"log\"&gt;The logger.&lt;/param&gt;\n    public MultipleFileZipResult(IEnumerable&lt;DownloadableZipDescriptor&gt; urls, string resultFileName, ILog log)\n    {\n        this.log = log;\n        this.Urls = urls;\n        this.ResultFileName = resultFileName;\n    }\n\n    /// &lt;summary&gt;\n    /// Gets or sets the list of URLs to download.\n    /// &lt;/summary&gt;\n    public IEnumerable&lt;DownloadableZipDescriptor&gt; Urls { get; set; }\n\n    /// &lt;summary&gt;\n    /// Gets or sets the name of the zip result file.\n    /// &lt;/summary&gt;\n    public string ResultFileName { get; set; }\n\n    /// &lt;summary&gt;\n    /// Enables processing of the result of an action method by a custom type that inherits from the &lt;see cref=\"T:System.Web.Mvc.ActionResult\"/&gt; class.\n    /// &lt;/summary&gt;\n    /// &lt;param name=\"context\"&gt;The context in which the result is executed. The context information includes the controller, HTTP content, request context, and route data.&lt;/param&gt;\n    public override void ExecuteResult(ControllerContext context)\n    {\n        try\n        {\n            context.HttpContext.Response.ContentType = \"application/zip\";\n            context.HttpContext.Response.CacheControl = \"private\";\n            context.HttpContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);\n            context.HttpContext.Response.AddHeader(\"content-disposition\", string.Format(\"attachment; filename=\\\"{0}\\\"\", this.ResultFileName));\n            context.HttpContext.Response.Flush();\n\n            var buffer = new byte[BufferSize];\n\n            using (var zippedUploadStream = new ZipOutputStream(context.HttpContext.Response.OutputStream))\n            {\n                zippedUploadStream.SetLevel(0);\n\n                foreach (var url in this.Urls)\n                {\n                    Stream downloadStream = null;\n                    WebResponse response = null;\n\n                    try\n                    {\n                        var request = WebRequest.Create(url.DownloadUrl);\n                        request.Proxy = null;\n                        response = request.GetResponse();\n                        downloadStream = response.GetResponseStream();\n\n                        if (downloadStream != null)\n                        {\n                            var zipEntry = new ZipEntry(url.SaveFileName);\n                            zippedUploadStream.PutNextEntry(zipEntry);\n\n                            int read;\n                            while ((read = downloadStream.Read(buffer, 0, buffer.Length)) &gt; 0)\n                            {\n                                zippedUploadStream.Write(buffer, 0, read);\n                                context.HttpContext.Response.Flush();\n                            }\n                        }\n                    }\n                    catch (Exception exception)\n                    {\n                        this.log.Error(exception);\n                    }\n                    finally\n                    {\n                        if (response != null)\n                        {\n                            response.Close();\n                        }\n\n                        if (downloadStream != null)\n                        {\n                            downloadStream.Close();\n                        }\n                    }\n\n                    if (!context.HttpContext.Response.IsClientConnected)\n                    {\n                        break;\n                    }\n                }\n\n                zippedUploadStream.Finish();\n            }\n\n            if (context.HttpContext.Response.IsClientConnected)\n            {\n                context.HttpContext.Response.Flush();\n                context.HttpContext.Response.End();\n            }\n        }\n\n        catch (Exception exception)\n        {\n            this.log.Error(exception);\n            throw;\n        }\n    }\n}\n</code></pre>\n\n<p>Everything worked fine, untill customer tried to download zipped archive from the same network where servers are located. It is strange, becaues by some reason download works fine for me.</p>\n\n<p>Only noticable difference is the download speed for me and he. His download speed is ~11 mbps, while mine is 0.4 mbps.</p>\n\n<p>The exceptions being logged:</p>\n\n<pre><code>System.Web.HttpException (0x800704CD): The remote host closed the connection. The error code is 0x800704CD.\n   at System.Web.Hosting.IIS7WorkerRequest.RaiseCommunicationError(Int32 result, Boolean throwOnDisconnect)\n   at System.Web.Hosting.IIS7WorkerRequest.ExplicitFlush()\n   at System.Web.HttpResponse.Flush(Boolean finalFlush)\n   at System.Web.HttpResponseWrapper.Flush()\n\nSystem.Web.HttpException (0x80004005): An error occurred while communicating with the remote host. The error code is 0x800703E3. ---&gt; System.Runtime.InteropServices.COMException (0x800703E3): The I/O operation has been aborted because of either a thread exit or an application request. (Exception from HRESULT: 0x800703E3)\n   at System.Web.Hosting.IIS7WorkerRequest.RaiseCommunicationError(Int32 result, Boolean throwOnDisconnect)\n   at System.Web.Hosting.IIS7WorkerRequest.ExplicitFlush()\n   at System.Web.HttpResponse.Flush(Boolean finalFlush)\n   at System.Web.HttpResponseWrapper.Flush()\n   at Infrastructure.MultipleFileZipResult.ExecuteResult(ControllerContext context)\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","validation"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":69,"score":3,"question_id":12801658,"title":"MVC Model Binding - Validate EVERY property?","body":"<p>I have some generic validation I want blanket applied to every string property on every model.  I'm looking at subclassing the <code>DefaultModelBinder</code> and adding logic by overridding the <code>BindProperty</code> method.  Would this be an appropriate thing to do?</p>\n"},{"tags":["asp.net-mvc-3","form-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":395,"score":1,"question_id":10606340,"title":"How to Implement MVC3 Model URL Validation?","body":"<p>I've successfully implemented client side validation to require input in my textbox.  However, I want to evaluate the contents of the textbox to see if it is a well formed URL.  Here's what I have thus far:\nIndex.cshtml:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"@Url.Content(\"~/Scripts/jquery-1.5.1.js\")\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"@Url.Content(\"~/Scripts/jquery.unobtrusive-ajax.js\")\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"@Url.Content(\"~/Scripts/jquery.validate.js\")\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.js\")\"&gt;&lt;/script&gt;\n@model Ticket911.Models.ValidationModel                          \n@{\nViewBag.Title = \"Home Page\";\n}\n\n&lt;h2&gt;@ViewBag.Message&lt;/h2&gt;\n@using (Ajax.BeginForm(\"Form\", new AjaxOptions() { UpdateTargetId = \"FormContainer\" , OnSuccess = \"$.validator.unobtrusive.parse('form');\" }))\n\n{\n&lt;p&gt;\n    Error Message: @Html.ValidationMessageFor(m =&gt; m.URL)\n&lt;/p&gt;\n&lt;p&gt;\n@Html.LabelFor(m =&gt;m.URL):\n@Html.EditorFor(m =&gt; m.URL)\n&lt;/p&gt;\n&lt;input type=\"submit\" value=\"Submit\" /&gt;\n</code></pre>\n\n<p>ValidationModel:</p>\n\n<pre><code> public class ValidURLAttribute : ValidationAttribute\n{\n    public override bool IsValid(object value)\n    {\n        return (value != null);\n    }\n}\n\npublic class ValidationModel\n{\n    [Required]\n    public string URL {get; set;}\n}\n</code></pre>\n\n<p>How do I ensure that the model URL validation occurs?  When the Submit button is clicked, what must be done to navigate to the URL entered into the textbox?</p>\n\n<p>Thanks much:)</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","c#-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12822417,"title":"MVC3: CompareAttribute for case insensitive comparison","body":"<p>I am using <code>CompareAttribute</code> in <code>MVC3</code> and its working fine. But I want to use case insensitive classCode. Is there any way to get that working</p>\n\n<p>Thanks in Advance</p>\n\n<pre><code>[CompareAttribute(\"ClassCode\", ErrorMessageResourceName = \"ClassCode_DontMatch\", ErrorMessageResourceType = typeof(Resources.Class))]\npublic string ConfirmClassCode {get; set; }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","unit-testing","moq","elmah"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":341,"score":1,"question_id":10657961,"title":"Elmah error logging FromCurrentContext breaks when unit testing","body":"<p>When writing unit tests using Moq anytime I call the <code>Elmah.ErrorSignal.FromCurrentContext</code> it fails with a null reference exception. I am able to mock the <code>ControllerContext</code> and I would like to just use an error log command like this..</p>\n\n<pre><code>Elmah.ErrorSignal.FromContext(ControllerContext.HttpContext).Raise(e);\n</code></pre>\n\n<p>but unfortunately the <code>ControllerContext.HttpContext</code> is of type <code>HttpContextBase</code> and won't work with this error logging method. </p>\n\n<p>Is there a better way to call the Elmah error logging directly? Unfortunately the <code>Application.HttpContext</code> object cannot be mocked (below example) or that would also serve the purpose. </p>\n\n<p>Mock <code>Application</code> and <code>Application.HttpContext</code>:</p>\n\n<pre><code>ctrlCtx.SetupGet(x =&gt; x.HttpContext.ApplicationInstance)\n           .Returns(new Mock&lt;HttpApplication&gt;().Object);\nctrlCtx.SetupGet(x =&gt; x.HttpContext.ApplicationInstance.Context)\n           .Returns(new Mock&lt;HttpContext&gt;().Object);\n</code></pre>\n\n<p>Error Produced:</p>\n\n<p>Invalid setup on a non-virtual (overridable in VB) member</p>\n"},{"tags":["xml","asp.net-mvc-3","dependency-injection","structuremap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12427340,"title":"How to use StructureMap from xml","body":"<p>In my project I'm using StructureMap for DI and associations are set up in the web.config file like this:</p>\n\n<pre><code>&lt;StructureMap MementoStyle=\"Attribute\"&gt;\n    &lt;DefaultInstance PluggedType=\"CTRMModels.Models.Repository, CTRMModels\" PluginType=\"CTRMModels.Models.IRepository, CTRMModels\" Scope=\"HttpContext\" /&gt;\n    &lt;DefaultInstance PluggedType=\"ActiveReports.Security.CtrmSecurityProvider, ActiveReports.Security\" PluginType=\"ActiveReports.Server.Security.ISecurityProvider, ActiveReports.Server.Extensibility\" Scope=\"HttpContext\"&gt;\n    &lt;Property Name=\"connectionString\" Value=\"Data Source=.;Initial Catalog=db;Persist Security Info=True;Integrated Security=True;\" /&gt;\n&lt;/DefaultInstance&gt;\n</code></pre>\n\n<p>The first setup works but the second doesn't. The CtrmSecurityProvider class' constructor looks like this:</p>\n\n<pre><code>public CtrmSecurityProvider( string connectionString ){...}\n</code></pre>\n\n<p>What am I doing wrong? \nThanks in advance.</p>\n"},{"tags":["asp.net-mvc-3","wcf","security","azure","webrole"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12820368,"title":"Azure: security between web roles","body":"<p>In Azure, if you choose to use internal endpoint (instead of input endpoint), https is not an option. http &amp; tcp are the only options. Does it mean internal endpoint is 100% secure and you don't need encryption. </p>\n\n<p>Then it comes to another question. If i choose to use input endpoint between mvc application and wcf service. Is it really necessary to have https between them? Is it OK if i have 2 input endpoints for wcf. One with http on port 80, which is supposed to be used by mvc application. Another with https on port 443, which can be used by somebody else. (not our own application) </p>\n"},{"tags":["c#","asp.net-mvc-3","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12820881,"title":"There are an execution context for unit tests in C#?","body":"<p>I know that <code>HttpContext</code> is for ASP.NET service and <code>OperationContext</code> is for WCF service method.</p>\n\n<p>What is the execution context for Unit test methods ?</p>\n\n<p>I have a function which construct an url based on given controller and action but it is used inside unit test method.</p>\n\n<pre><code>[TestMethod]\npublic void GetUrlFromSpecificController(){\n   Assert.IsTrue(string.IsNullOrEmpty(MyClass.TransformUrl(\"AController\", \"AnAction\")));\n}\n</code></pre>\n\n<p>And the method:</p>\n\n<pre><code>public static string GetUrlFromSpecificController(string controller, string action)\n{\n   UriBuilder urlBuilder = null;\n\n   if(HttpContext.Current != null){\n      UrlHelper urlHelper = new UrlHelper(HttpContext.Current.Request.RequestContext);\n      urlBuilder = new UriBuilder(HttpContext.Current.Request.Url.AbsoluteUri) {\n         Path = urlHelper.Action(action, controller)\n      }; \n   } else {\n      string url = OperationContext.Current.IncomingMessageHeaders.To.AbsoluteUri; // for WCF service\n      urlBuilder = new UriBuilder(url);\n      urlBuilder.Path = string.Concat(urlBuilder.Path, \"/\", controller, \"/\", action);\n   }\n\nreturn HttpUtility.UrlDecode(urlBuilder.ToString());\n}\n</code></pre>\n\n<p>How if is possible to construct the request url using UnitTest (by calling HttpContext or OperationContext) ?</p>\n\n<p>I have to set up something in UnitTests before ?</p>\n\n<p>I have also put in UnitTest using the <a href=\"http://stackoverflow.com/users/250230/anton\">Anton</a>'s advice here: <a href=\"http://stackoverflow.com/questions/3234693/using-httpcontext-in-unit-test\">Using httpcontext in unit test</a> but without success.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":12816454,"title":"Razor textbox, \"value\" property not showing","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6445274/watermark-for-textbox-in-mvc3\">Watermark for Textbox in MVC3</a>  </p>\n</blockquote>\n\n\n\n<p>Im switching my HTML code from basic html to use html helpers and Html.TextBoxFor...</p>\n\n<p>This is my old code </p>\n\n<pre><code>&lt;input type=\"text\" disabled=\"disabled\" value=\"Phone\" name=\"Phone\" id=\"cust-cellphone\" class=\"tonedDown\" /&gt;\n</code></pre>\n\n<p>And this is the new version</p>\n\n<pre><code>@Html.TextBoxFor(x =&gt; x.Customer.Phone_Personal, new { @class = \"text-adr-fld tonedDown\", @value = \"Phone\", @disabled = \"disabled\" })\n</code></pre>\n\n<p>Everything is working fine, except that the Value property is gone. What I mean is that it's not showing as a default predefined value inside the textbox.\nI read that you can use Placeholder, but it doesnt seem to work with IE9 (which is a requirement from my client).</p>\n\n<p>So the question is, how do I add input Value property to the TextboxFor method that works with IE9?</p>\n\n<p>Edit:\nThere might be a possible workaround somehow.\nMy original purpose with this is to display a \"placeholder like value\", ie a default value which shows what the user is supposed to type in the textbox. E.g. the textbox that handles phonenumber should display \"Phone\", until the user clicks and enters a value.</p>\n\n<p>Does anyone know another way of doing this (except \"placeholder\" and \"value\")?</p>\n"},{"tags":["asp.net-mvc-3","knockout.js","knockout-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12820127,"title":"Knockout validation pattern throwing error on everything","body":"<p>I added the knockout validation however it seems its throwing everything I put in the field: a,1,?, etc -- only thing works is having the field empty. I'm using the ko validation library and am extending it by using the pattern rule.</p>\n\n<p>The ko template:</p>\n\n<pre><code>&lt;script type=\"text/html\" id=\"solutionRowTemplate\"&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;\n                            &lt;input type=\"text\" class=\"whole\" data-bind=\"value: firstWhole, valueUpdate: 'afterkeydown'\" /&gt;\n                        &lt;/td&gt;\n&lt;/tr&gt;\n&lt;/script&gt;\n</code></pre>\n\n<p>The ko viewmodel:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    var solutionData = @Html.Raw(new JavaScriptSerializer().Serialize(Model.SolutionList));\n\n    function SolutionModel(firstWhole) {\n        this.firstWhole = ko.observable(firstWhole);\n    }\n\n    var viewModel = {\n        solutions: ko.observableArray(ko.utils.arrayMap(solutionData, function (item) {\n            var model = new SolutionModel(item.FirstWhole);\n            model.firstWhole.extend({ pattern: '^[a-z0-9].$' });\n            return model;\n        })),\n        addSolution: function () {\n            this.solutions.push(new SolutionModel('', '', '', '', '', '', '', '', '', '', '', ''));\n        },\n    };\n\n    ko.applyBindings(viewModel);\n&lt;/script&gt;\n</code></pre>\n\n<p>Won't be surprised if its wrong on how I'm adding the extend...</p>\n\n<p>Thanks,\n-rob</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","jquery-ajax","charts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12818751,"title":"Show a dynamic chart in MVC3 view","body":"<p>I have a situation where in I need to show a chart in MVC3 view.\nTill now I have done the following\nin my controller</p>\n\n<pre><code>public ActionResult MyChart()\n        {\n            var bytes = new Chart(width: 400, height: 200)\n                .AddSeries(\n                    chartType: \"bar\",\n                    xValue: new[] {\"Math\", \"English\", \"Computer\", \"Urdu\"},\n                    yValues: new[] {\"60\", \"70\", \"68\", \"88\"})\n                .GetBytes(\"png\");\n            return File(bytes, \"image/png\");\n        }\n</code></pre>\n\n<p>in my Jquery file</p>\n\n<pre><code>function getChart() {\n    $.ajax({\n        url: ('/Home/MyChart'),\n        type: 'GET',\n        cache: false,\n        success: function (result) {\n            alert(result.length);\n            $('#BottomGrid').html(result);\n        },\n        error: function () { alert(\"error\"); }\n    });\n    }\n</code></pre>\n\n<p>and in my view I am simply calling the getChart() method. \nmy view is an .aspx view and bottomgrid is a div on the view where I need to show the chart.</p>\n\n<p>Running the above code in IE gives me a png sign and in firefox it shows me special characters.</p>\n\n<p>Any Idea where am I going wrong?</p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":12780136,"title":"How to mention path of action method in external JS function?","body":"<p>i have written a jquery functions in external JS file and included that file where ever i required. </p>\n\n<p>In jquery function i called action method from my controller. Now my problem is i'm not able to locate that action method path from the external JS. It is throwing error that is method not found like that. </p>\n\n<p>Now <strong>how i can write the action path name in the external JS which will work from any where.</strong></p>\n\n<p>I tried following for mentioning/calling action method -</p>\n\n<pre><code>1. url: \"/Employee/AutocompleteSuggestions\" \n\n\n2. url: \"AutocompleteSuggestions\"\n\n3. @Html.Raw(Url.Action(\"AutocompleteSuggestions\", \"Employee\", new { @term = \"Term\", @moduleName=\"ModuleName\"}))\n</code></pre>\n\n<p>3rd is not working because of razor syntax.</p>\n\n<p>How to resolve this problem ?</p>\n\n<p>I used the JS like below -</p>\n\n<pre><code>       $.ajax({\n                url: \"AutocompleteSuggestions\",\n                dataType: \"json\",\n                contentType: \"application/json; charset=utf-8\",\n                type: \"POST\",\n                data:\n                    JSON.stringify({\n                        term: request.term,\n                        moduleName: \"Employee\"\n                    }),\n                success: function (data) {\n                    response($.map(data, function (item) {\n                        return { label: item.FullName, value: item.Id }\n                    }\n                    ))\n                },\n                error: function (xhr, ajaxOptions, thrownError) { alert(thrownError); }\n            })\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12818766,"title":"How to make a DropDownListFor not selectable in Razor","body":"<p>In my View in Razor I use a DroDownList I would like to have this control not Selectable. How to do it, (please post a sample)?</p>\n\n<pre><code> &lt;div class=\"editor-field\"&gt;\n        @Html.DropDownListFor(x =&gt; x.CandidateId, Model.CandidatesList)\n    &lt;/div&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12818591,"title":"asp.net mvc3 - displaying a list of RadioButtons","body":"<p>I m trying to get a list of radiobuttons from the controller and display it on the View but it dosent seem to be working. I have the following model </p>\n\n<pre><code>public class Module\n{\n\n    public int ModuleId { get; set; }\n\n    public string Title { get; set; }\n\n    public string Description { get; set; }\n\n    public bool IsActive { get; set; }\n</code></pre>\n\n<p>}</p>\n\n<p>In the controller I am getting the list of modules and passing it to the view:</p>\n\n<pre><code>[HttpGet]\n    public ActionResult SelectAdmin()\n    {\n        //getting the list of modules from db\n        List&lt;Module&gt; modulelst = GetModules(); \n        ViewBag.lstm = modulelst;\n\n        return PartialView();\n    }\n</code></pre>\n\n<p>Now in the View I'm trying to display the list of modules in the form of RadioButtons/Checkboxes and getting the corresponding id for the module which is selected.</p>\n\n<p>The code for the View I am trying is as follows:</p>\n\n<pre><code>@model List&lt;MyFriday.Domain.Model.Client&gt;\n</code></pre>\n\n<p>@using (Ajax.BeginForm(\"SelectAdmin\", \"CMAdmin\", null,\n        new AjaxOptions\n        {\n            UpdateTargetId = \"update-message\",\n            InsertionMode = InsertionMode.Replace,\n            HttpMethod = \"POST\",\n            OnSuccess = \"UpdateSuccess\"\n        }, new { @id = \"EditForm\" }))\n{\n     @Html.ValidationSummary(true)</p>\n\n<pre><code>&lt;fieldset&gt;\n\n&lt;div class=\"content\"&gt;                     \n            @using (Html.BeginForm())\n            {\n                &lt;div&gt;\n                Select the Admin Type:\n                 &lt;/div&gt;\n                &lt;div id=\"divModules\"&gt;\n                @foreach (var Modules in ViewBag.lstm)\n                {\n                    &lt;div class=\"formlabel\"&gt;\n                        &lt;div align=\"right\" class=\"label\" style=\"cursor: pointer; position: relative;\"&gt;\n                            @(Modules.First().Title)\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"formelement\"&gt;\n                        &lt;input type=\"radio\" id=\"\"/&gt;\n                            @(Modules.First().ModuleId)\n\n                    &lt;/div&gt;\n                    &lt;div style=\"clear: both;\"&gt;\n                    &lt;/div&gt;\n                }\n                &lt;/div&gt;\n                &lt;input id=\"Submit1\"  type=\"submit\" value=\"Submit\"/&gt;\n                &lt;input type=\"button\" value=\"Cancel\" onclick=\"javascript:cancelconfirm(this)\"/&gt;   \n\n            }\n            &lt;div style=\"clear: both;\"&gt;\n                &amp;nbsp;&lt;/div&gt;\n\n        &lt;/div&gt;\n\n&lt;/fieldset&gt; \n</code></pre>\n\n<p>} </p>\n\n<p>The Above View is not getting displayed</p>\n\n<p>Can anyone please suggest me a solution ?</p>\n"},{"tags":["c#","asp.net-mvc-3","testing","integration-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12818991,"title":"Are Integration Tests asynchronously (using C# code) in VS2010 when debug code?","body":"<p>I have met the following problem regarding the integration tests.</p>\n\n<p>The code (simple using some other functions). I have put breakpoint on <code>AddItem</code> function.</p>\n\n<pre><code>[TestInitialize]\n      public void MyTestInitialize() {\n         Assert.IsTrue( AddItem() );\n      }\n\n [TestCleanup]\n      public void MyTestCleanup() {\n         Assert.IsTrue( RemoveItem() );\n      }\n\n[TestMethod]\npublic void ListTest(){\n   AClass test = new AClass();\n   Assert.IsTrue(test.List().Count &gt; 0);\n}\n\nprivate bool AddItem() {\n  AClass obj = new AClass();\n\n  Assert.IsTrue(obj.Add(\"test\", \"123\")); //no duplicate will be allowed ! (return false if duplicate found)\n\n  obj.Files = ConstructFiles();\n  ...\n  ...\n}\n\nprivate string[] ConstructFiles(){\n  return Directory.GetFiles(@\"/folder/files\", \"*.doc\"); \n    //when execute the above code then the breakpoint from `AddItem` is reached !!!\n}\n</code></pre>\n\n<p>When testing <code>ListTest</code> will automatically call <code>AddItem</code> (because of <code>TestInitialize</code> attribute).</p>\n\n<p>First call is ok but when this function(<code>AddItem</code>) call another function <code>ConstructFiles</code> then the breakpoint for <code>AddItem</code> is reached and execute again the function.</p>\n\n<p>Why ?</p>\n\n<p>Of course, I have another tests using <code>TestMethod</code> attribute but something is unclear when call first time <code>AddItem</code> and it calls <code>ConstructFiles</code>.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12818547,"title":"How do I detect in code from which View POST was made, in MVC 3?","body":"<p>I am wondering how to check in an Action, from which View I made POST to it.\nSo after the action is complete I can make a return back to that same View.</p>\n\n<p>Like:</p>\n\n<pre><code>if (enteredfromView1)\n{\n    return RedirectToAction(\"View1\",\"Controller\");\n}\nelse\n    return RedirectToAction (\"View2\",\"Controller\");\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12818435,"title":"How to refresh a webgrid with data instead of view?","body":"<p>I want to add a checkbox to a page and that page having the web grid. so if i check the checkbox it has to fire the action and return the view with some more records to the list.\nBut the webgrid is not refreshing and not showing the recent records. How can i solve my issue.Please help me...</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","entity-framework-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12812920,"title":"Error No. 3034 mapping fragments isssue","body":"<p>I am developing MVC Application with EF 4.1.\nI have used TPH approch to genrate the DB. </p>\n\n<p>I have two entities, 1. company and 2. Lead , Lead is inherited from Company. </p>\n\n<p>please check below image :</p>\n\n<p><img src=\"http://i.stack.imgur.com/4VUOe.jpg\" alt=\"enter image description here\"></p>\n\n<p>Now I have below mappaings...</p>\n\n<p><img src=\"http://i.stack.imgur.com/ojY51.jpg\" alt=\"enter image description here\"></p>\n\n<p>here is edmx file with XML </p>\n\n<pre><code>&lt;EntitySetMapping Name=\"Companies\"&gt;\n            &lt;EntityTypeMapping TypeName=\"IsTypeOf(Model1.Company)\"&gt;\n                &lt;MappingFragment StoreEntitySet=\"Companies\"&gt;\n                    &lt;ScalarProperty Name=\"Id\" ColumnName=\"Id\" /&gt;\n                    &lt;ScalarProperty Name=\"Name\" ColumnName=\"Name\" /&gt;\n          &lt;Condition ColumnName=\"__Disc__\" Value=\"Company\" /&gt;\n                &lt;/MappingFragment&gt;\n            &lt;/EntityTypeMapping&gt;\n            &lt;EntityTypeMapping TypeName=\"Model1.Lead\"&gt;\n                &lt;MappingFragment StoreEntitySet=\"Companies\"&gt;\n    // Gives Error -&gt;   &lt;ScalarProperty Name=\"Id\" ColumnName=\"Id\" /&gt;\n    // Gives Error -&gt;   &lt;ScalarProperty Name=\"Name\" ColumnName=\"Name\" /&gt;\n    // Gives Error -&gt;   &lt;ScalarProperty Name=\"Status\" ColumnName=\"Status\" /&gt;\n                    &lt;Condition ColumnName=\"__Disc__\" Value=\"Lead\" /&gt;\n                &lt;/MappingFragment&gt;\n            &lt;/EntityTypeMapping&gt;\n</code></pre>\n\n<p>Error 3034: Problem in mapping fragments starting at lines 47, 54:An entity is mapped to different rows within the same table. Ensure these two mapping fragments do not map two groups of entities with identical keys to two distinct groups of rows.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","nested-forms"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":150,"score":3,"question_id":12809386,"title":"In a MVC 3 Razor view, how to post to different actions, when layout would require forms to be nested?","body":"<p>Working with some of my MVC 3 Razor views, I find the need to nest forms, which is not possible (not allowed in HTML).</p>\n\n<p>There's one form, targeting a specific action, that contains a table. But on some/all/one_particular tablerow I need to target a separate action. For example:</p>\n\n<pre><code>@using (Html.BeginForm(\"EditPersons\"))\n{\n    &lt;table&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Name&lt;/th&gt;\n            &lt;th&gt;Age&lt;/th&gt;\n        &lt;/tr&gt;\n        @for (int i=0; i &lt; Model.Persons.Count; i++)\n        {\n            &lt;tr&gt;\n                &lt;td&gt;@Html.TextBox(...)&lt;/td&gt;\n                &lt;td&gt;@Html.TextBox(...)&lt;/td&gt;\n            &lt;/tr&gt;\n        }\n            &lt;tr&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td&gt;\n                    @using (Html.BeginForm(\"AddPerson\")\n                    {\n                        &lt;input type=\"submit\" value=\"Add person\" /&gt;\n                    }\n                &lt;/td&gt;\n            &lt;/tr&gt;\n    &lt;/table&gt;\n}\n</code></pre>\n\n<p>Now, I can obviously put the \"Add person\" button below the entire table, but then how would I get it aligned with the second table column?</p>\n\n<p>Also, I could have the \"Add person\" button put some \"command\" in a hidden field, and have the EditPersons action check that to see if it should add a person or save updated data for existing persons, but I feel that would somewhat defeat the paradigm of single purpose actions (as opposed to the horrific old-school ASP \"post to itself\" forms).</p>\n\n<p>So, how do I solve this?</p>\n"},{"tags":["asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":124,"score":0,"question_id":10821091,"title":"Vanity URL rerouting","body":"<p>I am trying to allow for users on a website to specify and change their own unique Vanity Url.</p>\n\n<p>I am going to store the chose url within the database and I want to call upon it to re-route to the user.</p>\n\n<p>As of now this is what I have, but I am not really sure where to go from here.</p>\n\n<pre><code>routes.MapRoute(\n            \"User\", // Route name\n            \"User/Profile/{id}\", // URL with parameters\n            new { controller = \"User\", action = \"Profile\", id = UrlParameter.Optional }, // Parameter defaults\n            new string[] { typeof(MvcApplication).Namespace + \".Controllers\" }\n        );\n</code></pre>\n\n<p>Is there any way for me to take in the Vanity Url and reroute it to the PersonID?</p>\n\n<p>I also tried to Manipulate the ActionResult to either handle the string Vanity Url or the int PersonID but that did not seem to be going in the right direction so I went back to routes.Maproute.</p>\n\n<p>Edit:</p>\n\n<p>I want the user to be able to enter in </p>\n\n<pre><code>http://localhost:60619/User/Profile/Vanity \n</code></pre>\n\n<p>and they will end up in the same place as if they entered </p>\n\n<pre><code>http://localhost:60619/User/Profile/224 Assuming the PersonID is 224\n</code></pre>\n\n<p>ActionResult:</p>\n\n<pre><code>        public ActionResult Profile(int ID)\n    {\n        ppUser viewerChoice = DB.ppUser_GetUserByPersonID(ID);\n        return View(ID);\n    }\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12816541,"title":"How should one send data to MVC controller via jQuery while minimizing the effects of regional settings?","body":"<p>I am developing an MVC application leveraging jQuery. The application requires date manipulation with JavaScript in various places dnd so we make constant use of the Date object. In some situations the date needs to be sent via an AJAX call to various MVC controllers.</p>\n\n<p>I am confused as to the problems I might face with different regional settings on browsers and so I wanted to ensure that the controller always received the date in the same format. I am only concerned with the date and not the time.</p>\n\n<p>I made use of <code>Date.toUTCString()</code> in javascript, and made the controllers all accept a string parameter for the dates (so fromDateUtc as an example). I then use <code>Date.TryParse</code> on the server side to convert the date to the proper format, this works great for every browser except IE. Which returns \"UTC\" at the end of the UTC string instead of GMT.</p>\n\n<p>I'd like to avoid a hack on the server side where I replace UTC with GMT because I am unsure if this owuld effectively change the meaning of the date.</p>\n\n<p>So my question is does any one have a solution or workaround that would get IE to return the date in the same format? </p>\n\n<p>At this point we are quite far in development, so unfortunately using a jQuery date library is not an option, but I'd accept any other solutions. Also any one who can point out flaws in my reasoning would be greatly appreciated!</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net","asp.net-mvc-3","sms"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":675,"score":0,"question_id":7385962,"title":"download link for smpp client api for smpp 3.4","body":"<p>Plese provide a smpp client that can be used for my mvc3 app. My sms provider is using smpp protocol 3.4 and i need a free client api for this. form where i can download same and use . </p>\n"},{"tags":["asp.net-mvc-3","user-authentication","userid"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12815374,"title":"How to get the userID of a logged in user?","body":"<p>I'm trying to get the userid of the currently logged in user. Here is my code:</p>\n\n<pre><code>public int GetUserID(string _UserName)\n    {\n        using (var context = new TourBlogEntities1())\n        {\n            var UserID = from s in context.UserInfoes\n                         where s.UserName == _UserName\n                         select s.UserID;\n            return  Int32.Parse(UserID.ToString()); //error is showing here\n\n        }\n    }\n</code></pre>\n\n<p>I'm calling the method from my controller using this:</p>\n\n<pre><code>public ActionResult NewPost(NewPost model)\n   {\n       var Business = new Business();\n       var entity = new Post();\n       entity.PostTitle = model.PostTitle;\n       entity.PostStory = model.PostStory;\n       entity.UserID = Business.GetUserID(User.Identity.Name);\n\n\n\n       Business.NewPost(entity);\n       Business.ViewPost(entity);\n       return View(\"ViewPost\", model);\n\n   }\n</code></pre>\n\n<p>The error is showing as \"input string is not in correct format\". Please help. Thanks.</p>\n"},{"tags":["asp.net-mvc-3","ssl"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":12815825,"title":"ASP.Net MVC 3 IF Statement outside Controller Action","body":"<p>I am developing an ASP.Net MVC 3 Web Application. I need to have my website secured with an SSL certificate, however, I only want this used when the application is on my live server, NOT on my test server.</p>\n\n<p>Therefore, I setup an AppSetting in my Web Config like so</p>\n\n<pre><code>&lt;appSettings&gt;\n    &lt;add key=\"SSL\" value=\"false\" /&gt;\n&lt;/appSettings&gt;\n</code></pre>\n\n<p>Then in my Account Controller I get this value (either True or False) and using the value, decide whether or not to set the <strong>RequiresHttps</strong> attribute on my LogOn Action. I would like to do something like so</p>\n\n<pre><code>public class AccountController : Controller\n{\n        public string SSL = System.Configuration.ConfigurationManager.AppSettings[\"SSL\"];\n\n        if (SSL.Equals(\"true\"))\n        {\n            [RequireHttps]\n        }\n        public ActionResult LogOn()\n        {\n            return View();\n        }\n}\n</code></pre>\n\n<p>But I know I can't put my IF statement where it currently is, however, hopefully you get the idea of what I am trying to achieve.</p>\n\n<p>Does anyone have any suggestions as to how I can implement my idea?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","tempdata"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12815739,"title":"TempData won't destroy after second request","body":"<p>I'm putting a value into TempData on first request in an actionfilter.</p>\n\n<pre><code>filterContext.Controller.TempData[\"value\"] = true;\n</code></pre>\n\n<p>after that a second request comes in and I check for the value</p>\n\n<pre><code>filterContext.Controller.TempData.ContainsKey(\"value\")\n</code></pre>\n\n<p>the value is there. Then a third request comes in and I check for the value again</p>\n\n<pre><code>filterContext.Controller.TempData.ContainsKey(\"value\")\n</code></pre>\n\n<p>and the value is still present. Shouldn't be this value destroyed after the second request ? All request are AJAX requests.</p>\n"},{"tags":["asp.net-mvc-3","mvc","webgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12814260,"title":"MVC3 WebGrid Pagination hide the next and previous links for a certain count of pages","body":"<p>I am developing MVC3 website and using mvc3 webgrid control in it.</p>\n\n<p>The problem which I encounter is to hide the <strong>></strong> and <strong>&lt;</strong> links for Previous and Next page of pagination when the page size is 5 or less otherwise it displays Normally.</p>\n\n<pre><code>@{\nvar grid = new WebGrid(source: Model, defaultSort: \"FirstName\", rowsPerPage: 5,\ncanPage:true, canSort: true);\n }\n\n@grid.GetHtml(tableStyle: \"grid\", headerStyle: \"table-heading\",\n              footerStyle: \"pager\",\n              alternatingRowStyle: \"gird-second-row\",\n              selectedRowStyle: \"gird-first-row\",\n              rowStyle: \"gird-first-row\", columns: new[] {\n      grid.Column(\"Title\", header: \"FirstName\")\n})\n</code></pre>\n\n<p>Any help?</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12814139,"title":"How can I redirect to different views on authorization failure?","body":"<p>While using mvc intranet template with domain authorization, how can I redirect to some certain error page on authorization failure depending on the controller? </p>\n\n<p>So, I have a controller class:</p>\n\n<pre><code>    [AuthorizeWithRedirect(Users = @\"user\")]\n    public class MyController : Controller\n    {\n    ...\n    }\n</code></pre>\n\n<p>By default I'm not redirected anywhere. I see only a blank page, if I open the page under another user. The issue is that I want the request to be redirected to different pages for different controllers if the authorization fails. That is, one page for <code>MyController</code>, another page for other controller, etc. </p>\n\n<p>I know I could derive from <code>AuthorizeAttribute</code> and override <code>HandleUnauthorizedRequest</code> method. But I can't make it work:</p>\n\n<pre><code>public class AuthorizeWithRedirect : AuthorizeAttribute\n{\n   protected override void HandleUnauthorizedRequest(AuthorizationContext context)\n   {\n       UrlHelper urlHelper = new UrlHelper(context.RequestContext);\n       context.Result = new RedirectResult(urlHelper.Action(\"MyErrorPage\"));\n   }\n}\n</code></pre>\n\n<p>I get an error, saying that the specified url is not found, while <code>MyErrorPage.cshtml</code> does present in the <code>Views\\Shared</code> folder. </p>\n\n<p><strong>EDIT</strong></p>\n\n<pre><code>    [Authorize(Users = @\"user\")]//should be redirected to ErrorPage1\n    public class MyController1 : Controller\n    {\n    ...\n    }\n</code></pre>\n\n<p>while </p>\n\n<pre><code>    [Authorize(Users = @\"user\")]//should be redirected to ErrorPage2\n    public class MyController2 : Controller\n    {\n    ...\n    }\n</code></pre>\n\n<p>That is, different error pages for different controllers on one and the same authorization failure</p>\n"},{"tags":["asp.net-mvc-3","telerik-grid"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2483,"score":0,"question_id":5642175,"title":"Telerik MVC 3 Grid selected row binding to Model property","body":"<p>I have a Telerik Grid in my View. I want to know if there is a way by which I can bind the Datakey of the selected row  to the Model Property -</p>\n\n<pre><code>&lt;%@ Page Title=\"\" Language=\"C#\" MasterPageFile=\"~/Views/Shared/Site1.Master\" Inherits=\"System.Web.Mvc.ViewPage&lt;Mitek.MobileImagingTest3.Models.JobFileStatisticsModel&gt;\" %&gt; \n</code></pre>\n\n<p></p>\n\n<p>&lt;% using (Html.BeginForm()) { %><br>\n                     </p>\n\n<pre><code>            &lt;div class=\"editor-label\"&gt;       \n                &lt;br /&gt;                        \n               &lt;label&gt;Select Which Job:&lt;/label&gt;\n            &lt;/div&gt;\n            &lt;div&gt;\n               &lt;%= Html.Telerik().Grid((IEnumerable&lt;Mitek.MobileImagingTest3.Models.JobFileStatisticsModel&gt;)ViewData[\"JobFilesDataList\"])\n                        .Name(\"JobFileGrid\")\n                        .EnableCustomBinding(true)\n                        //.BindTo((IEnumerable&lt;Mitek.MobileImagingTest3.Models.JobFileStatisticsModel&gt;)ViewData[\"JobFilesDataList\"])\n                        .DataKeys(keys =&gt; keys.Add(o =&gt; o.JobFileId))                       \n                        .Columns(columns =&gt;\n                        {\n                            columns.Bound(o =&gt; o.JobFileId).Hidden(true);\n                            columns.Bound(o =&gt; o.JobFileName).Title(\"Job File Name\").Width(500);\n                            columns.Bound(o =&gt; o.JobFileVersion).Title(\"Job File Version\").Width(200);\n                            columns.Bound(o =&gt; o.JobFileDateCreated).Title(\"Date Created\").Format(\"{0:MM/dd/yyyy}\").Width(300);\n                        })                            \n                        .HtmlAttributes(new { style = \"width: 1000px; font-family:arial; font-size: .9em;\" })                           \n                        .ClientEvents(events =&gt; events.OnRowSelected(\"onRowSelected\"))\n                        .DataBinding(dataBinding =&gt; dataBinding.Ajax().Select(\"SelectJobFile\", \"Admin\"))                          \n                        .Pageable()\n                        .Sortable()\n                        .Selectable() \n                        .RowAction(row =&gt;\n                        {\n                            row.Selected = row.DataItem.JobFileId.Equals(ViewData[\"JobFileId\"]);\n                            //Model.JobFileId = ViewData[\"JobFileId\"].ToString();\n                        })                          \n                 %&gt;\n               &lt;/div&gt;\n               &lt;div&gt;\n\n               &lt;/div&gt;\n               &lt;div&gt;\n                    &lt;br /&gt;\n                   &lt;button type= \"submit\" name=\"button\" class=\"t-button\"  &gt;Run Report&lt;/button&gt;\n\n               &lt;/div&gt;\n\n    &lt;/div&gt;\n\n    &lt;% } %&gt; \n\n\n\nenter code here\n\n\n    &lt;script type=\"text/javascript\"&gt;\n\n        function onRowSelected(e) {\n            var id = e.row.cells[0].innerHTML;            \n            alert(id);\n        }\n\n    &lt;/script&gt;\n</code></pre>\n\n<p></p>\n\n<p>My model is -</p>\n\n<pre><code>  public class JobFileStatisticsModel\n{\n    public string JobFileId { get; set; }\n\n    public string JobFileName { get; set; }\n\n    public string JobFileVersion { get; set; }\n\n    public string JobFileDateCreated { get; set; }\n}\n</code></pre>\n\n<p>How do I bind the Datakey of the selected row in the Grid to the Model.JobFileId property?\nPlease help.</p>\n\n<p>Thanks,\nSDD</p>\n"},{"tags":["asp.net-mvc-3","compare","validator"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12801922,"title":"MVC3 - Compare Attribute doesn't work after postback","body":"<p>I am having a situation. </p>\n\n<p>We have MVC3 application and using data annotations for client side validations. Everything is working fine except the compare attribute after page is posted back due to server side validation. </p>\n\n<p>I am using compare attribute for confirm password field to validate it against the password. it works perfectly fine when the page is loaded for the first time. </p>\n\n<p>After the page is submitted and if there fails any business validation on the server side, page is posted back. Now, since the page is posted back, both \"password\" and \"confirm password\" fields are wiped out. I enter value in the \"password\" field which is different than what I have entered before page is posted back. and the same new value in the \"Confirm password\" field. </p>\n\n<p>In this case, the compare validation attribute tries to validate it against the old password value entered before the page is posted back but doesn't compare it with the newly added password. </p>\n\n<p>It is a strange problem we got stuck into.</p>\n\n<p>Here is what I use in the User Model:</p>\n\n<pre><code>&lt;Required(ErrorMessage:=\"You must specify a password\")&gt; _\n&lt;DataType(DataType.Password)&gt; _\n&lt;Remote(\"ValidatePassword\", \"Account\")&gt;\nPublic Property Password() As String\n\n&lt;DataType(DataType.Password)&gt; _\n&lt;Compare(\"Password\", ErrorMessage:=\"The new password and confirm password do not match.\")&gt;\nPublic Property ConfirmPassword() As String\n</code></pre>\n\n<p>In my View, I am just showing the control and validation message under the ajax form like :</p>\n\n<pre><code>@Html.Password(\"Password\", \"\", New With {.size = \"30\", .maxlength = \"30\"}) &amp;nbsp; @Html.ValidationMessageFor(Function(model) model.Password) \n@Html.Password(\"ConfirmPassword\", \"\", New With {.size = \"30\", .maxlength = \"30\"}) &amp;nbsp; @Html.ValidationMessageFor(Function(model) model.ConfirmPassword)\n</code></pre>\n\n<p>fyi, I am using a partial view for the controls and only the partial view is refreshed upon clicking the submit button. </p>\n"},{"tags":["asp.net-mvc-3","asp.net-ajax","pagedlist"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":131,"score":0,"question_id":12812956,"title":"Ajax paged list pass object to controller","body":"<p>I am working on some advanced searching functionality and I have run into a roadblock.  I would like to use AJAX for my search results and use the PagedList additons to handle paging.  I have an AdvancedSearchResults action which takes a search filters class and the current page.  The issue is how can I pass the search Filters class into this action correctly.  I am sure something I am doing just isnt organized correctly as I would think this would be fairly common.  I would really appreciate any help.  Thanks in advance.      </p>\n\n<p>Controller Action:</p>\n\n<pre><code>  public ActionResult AdvancedSearchResults(AdvancedSearchFilters searchFilters, int ? page)\n  {\n      //DO STUFF\n\n      return PartialView(\"_SearchResults\", results);\n  }\n</code></pre>\n\n<p>AdvancedSearchResults Filters:</p>\n\n<pre><code>public class AdvancedSearchFilters\n{\n   public string SearchText { get; set; }\n   public List&lt;string&gt; SelectedTableTypes { get; set; }\n   public List&lt;Guid&gt; SelectedGenreIds { get; set; }\n   public List&lt;Guid&gt; SelectedPlatformIds { get; set; }\n   public int YearMax { get; set; }\n   public int YearMin { get; set; }\n   public int RatingMin { get; set; }\n   public int RatingMax { get; set; }\n}\n</code></pre>\n\n<p>Search Results Partial View:</p>\n\n<pre><code>    @model List&lt;SearchResultItem&gt;\n\n@using PagedList\n@using PagedList.Mvc\n\n&lt;!-- 15 Per Page --&gt;\n&lt;h2&gt;Search Results&lt;/h2&gt;\n@if (ViewBag.OnePageOfSearchItems.Count &gt; 0)\n{\n    &lt;div class=\"pagination\"&gt;\n        @Html.PagedListPager((IPagedList)ViewBag.OnePageOfSearchItems, page =&gt; Url.Action(\"AdvancedSearchResults\", \"Search\", new { searchFilters = ViewBag.AdvancedSearchFilters, page = page }), \n                              PagedListRenderOptions.EnableUnobtrusiveAjaxReplacing(PagedListRenderOptions.OnlyShowFivePagesAtATime, \"#main-results\"))\n    &lt;/div&gt;\n    foreach (var searchResultItem in Model)\n    {\n        &lt;a href=\"@Url.Action(searchResultItem.ResultType, searchResultItem.ResultType, new { id = searchResultItem.ResultId })\" class=\"result\"&gt;\n            @if (searchResultItem.ProfileImageLocation != null)\n            {\n                &lt;img src=\"@searchResultItem.ProfileImageLocation\" alt=\"@searchResultItem.ResultName\" /&gt;\n            }\n            &lt;div class=\"result-info\"&gt;\n                &lt;h3&gt;@searchResultItem.ResultName&lt;/h3&gt;\n                &lt;p&gt;@searchResultItem.DisplayText&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/a&gt;\n    }\n    &lt;div class=\"pagination\"&gt;\n        @Html.PagedListPager((IPagedList)ViewBag.OnePageOfSearchItems, page =&gt; Url.Action(\"AdvancedSearchResults\", \"Search\", new { searchFilters = ViewBag.AdvancedSearchFilters , page = page }), \n                              PagedListRenderOptions.EnableUnobtrusiveAjaxReplacing(PagedListRenderOptions.OnlyShowFivePagesAtATime, \"#main-results\"))\n    &lt;/div&gt;\n}\nelse\n{\n    &lt;span&gt;No Matches.&lt;/span&gt;\n}\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc-3","entity-framework","entity-framework-4","ef-code-first"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":12811931,"title":"EF Code first : Cannot insert explicit value for identity column in table 'myTable' when IDENTITY_INSERT is set to OFF","body":"<p>Set the primary key to identity in database (SQL Server)</p>\n\n<p>When using EF to insert data I am getting error </p>\n\n<blockquote>\n  <p>Cannot insert explicit value for identity column in table 'myTable'\n  when IDENTITY_INSERT is set to OFF</p>\n</blockquote>\n\n<p>with this particular entity, though I am using the same approach with other entities to insert the data and getting no error with them.</p>\n\n<pre><code>   public class MyTable \n    {\n    [Key/*,DatabaseGenerated(DatabaseGeneratedOption.Identity)*/]\n    public int ID{get;set;}\n    public string name {get;set;}\n    public string type {get;set;}\n    public string status {get;set;}\n    public int country {get;set;}\n    public DateTime start_date {get;set;}\n    public DateTime due_date {get;set;}\n    }`\n</code></pre>\n\n<p>Query</p>\n\n<pre><code>    MyTable check= new MyTable();\n            check.name = checkName;\n            check.type = \"DB\";\n            check.status = \"New\";\n            check.country = country;\n            check.start_date = DateTime.Now;\n            check.due_date = dueDate;\n            db.myTables.Add(check);\n            db.SaveChanges();\n</code></pre>\n\n<p><b>Updated </b>:</p>\n\n<p>After uncommenting the above line </p>\n\n<pre><code>(DatabaseGenerated(DatabaseGeneratedOption.Identity)) \n</code></pre>\n\n<p>it's throwing an exception </p>\n\n<blockquote>\n  <p>A dependent property in a ReferentialConstraint is mapped to a\n  store-generated column. Column: 'ID'</p>\n</blockquote>\n"},{"tags":["c#",".net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":12812293,"title":"How do i change a form's action on rendering a view? (aka via ViewBag or ViewData)","body":"<p>I wanted to what action a view called programmatically by specifying the action name via the ViewBag or ViewData components, but I was unable to do so. why!?</p>\n\n<pre><code>@using (Html.BeginForm(ViewData[\"SubmitType\"], \"Person\"))\n{...\n</code></pre>\n\n<p>when I run this I get:</p>\n\n<blockquote>\n  <p>Description: An error occurred during the compilation of a resource\n  required to service this request. Please review the following specific\n  error details and modify your source code appropriately. </p>\n  \n  <p>Compiler Error Message: CS1928:\n  'System.Web.Mvc.HtmlHelper' does not contain a\n  definition for 'BeginForm' and the best extension method overload\n  'System.Web.Mvc.Html.FormExtensions.BeginForm(System.Web.Mvc.HtmlHelper,\n  string, string)' has some invalid arguments</p>\n  \n  <p>Source Error:</p>\n  \n  <p>Line 11:  Line 12:  Line 13: @using\n  (Html.BeginForm(ViewData[\"SubmitType\"], \"Person\")) Line 14: { Line 15:\n  @Html.ValidationSummary(true)</p>\n</blockquote>\n"},{"tags":["asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1947,"score":2,"question_id":6689011,"title":"How to set IE as default browser for mvc3 application","body":"<p>I have set IE as my default browser but when I run the ASP.Net MVC3 application it opens by default <em>IN</em> Mozilla Firefox. How can I set that when I run the MVC3 application so it opens in IE by default instead?</p>\n"},{"tags":["asp.net-mvc-3","iis"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":918,"score":1,"question_id":6948217,"title":"Error (0x80070542) in website using custom account in application pool","body":"<p>My ASP.NET MVC 3 website was working fine, and then this afternoon I started getting a 500 error, although the only thing I changed was to enable 32-bit applications.   I changed that back but the error remains.  I've even deleted my app pool and web site and recreated them in IIS with no luck.  </p>\n\n<p>If I revert the app pool back to AppPoolIdentity I do not get this error (but I cannot access my database then, I need that custom account to read my database with integrated security).</p>\n\n<p>Can anyone point me in the right direction?</p>\n\n<pre><code>ModuleName IIS Web Core \nNotification 2 \nHttpStatus 500 \nHttpReason Internal Server Error \nHttpSubStatus 0 \nErrorCode 2147943746 \nConfigExceptionInfo  \nNotification AUTHENTICATE_REQUEST \nErrorCode Either a required impersonation level was not provided, or the provided impersonation level is invalid. (0x80070542) \n</code></pre>\n\n<p>UPDATE:</p>\n\n<p>I enabled impersonation and impersonated a user with admin access to the machine.  I received this error in response, which does not tell me much more:</p>\n\n<pre><code>Could not load file or assembly 'Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. Either a required impersonation level was not provided, or the provided impersonation level is invalid. (Exception from HRESULT: 0x80070542) \n</code></pre>\n"},{"tags":["javascript","ajax","asp.net-mvc-3","jquery-ajax"],"answer_count":2,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":2479,"score":6,"question_id":9882692,"title":"Valums file-uploader doesn't work under Internet Explorer 9","body":"<p><a href=\"http://valums.com/ajax-upload/\">Valums file-uploader</a> doesn't work under Internet Explorer 9 but wors fine under Chrome.</p>\n\n<p>So under IE it shows the name of the file  and button CANCEL and no % of uploading.</p>\n\n<p>Any clue?</p>\n\n<p><img src=\"http://i.stack.imgur.com/409GU.png\" alt=\"enter image description here\"></p>\n\n<hr>\n\n<p>UPDATES: </p>\n\n<p>Solution is here as well <a href=\"http://stackoverflow.com/questions/4888632/mvc-valums-ajax-uploader-ie-doesnt-send-the-stream-in-request-inputstream\">MVC Valums Ajax Uploader - IE doesn&#39;t send the stream in request.InputStream</a></p>\n"},{"tags":["c#","asp.net-mvc-3","model","model-binding"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12810807,"title":"MVC3 View Model - List of Complex Objects, containing Lists","body":"<p>How do I bind such a complex model with multiple layers that contain multiple objects? \nRight now I pass the model to the view - (populating a form / a check box tree) and I would like the exact model back (SubjectSelectionModel) but it's not binding correctly.</p>\n\n<p>Could anyone elaborate on the process I need to take in order to bind these correctly in my view?</p>\n\n<p>View Model:</p>\n\n<pre><code>public class SubjectSelectionModel\n{\n    public IList&lt;Subject&gt; Subjects { get; set; }\n}\n</code></pre>\n\n<p>Subject Class:</p>\n\n<pre><code>public class Subject\n{\n    public String Name { get; set; }\n    public IList&lt;Bin&gt; Bins { get; set; }\n\n    public Subject()\n    {\n\n    }\n\n    public Subject(IList&lt;Course&gt; courses)\n    {\n\n    }\n}\n</code></pre>\n\n<p>Bin Class:</p>\n\n<pre><code>public class Bin \n{\n    public Subject Subject { get; set; }\n    public int Amount { get; set; }\n\n    public IList&lt;Foo&gt; Foos { get; set; }\n}\n</code></pre>\n\n<p>Foo Class:</p>\n\n<pre><code>public class Foo\n{\n    public int Number { get; set; }\n}\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","automapper","automapper-2"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12801559,"title":"How to retrieve an Entity when using AutoMapper","body":"<p>I use MVC in Asp.net using <a href=\"http://automapper.codeplex.com/\" rel=\"nofollow\">AutoMapper</a>.</p>\n\n<p>As you can see from this code</p>\n\n<pre><code> Event eventObj = Mapper.Map&lt;EventEditViewModel, Event&gt;(eventEditViewModel);\n</code></pre>\n\n<p>I'm trying to convert map EventEditViewModel to Event.</p>\n\n<p>I would need need to use my Service layer to convert the CandidateId to an actual Entity.</p>\n\n<p>Any idea if it is possible to do this in AutoMapper? how to setup it</p>\n\n<p>public class Event()\n    {\n         public Class Candidate {get; set;}\n    }</p>\n\n<pre><code>public class EventEditViewModel()\n{\n    public string CandidateId {get; set;}\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","gdi+"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12801029,"title":"Adding Texts on the Image : A generic error occurred in GDI+","body":"<p>i want to write 3 text on the specific image.\nThere isn't any problem on localhost.\nBut on the server,i try everything but nothing has changed.\nalways say:   A generic error occurred in GDI+.</p>\n\n<p>if i write text on the image step by step,i got same error. After i add first text, second and third text can not be added on the image because of proccessing on the image with first text.</p>\n\n<p>Summary:</p>\n\n<p>First i want to add text1 on img1 and Dispose.\nSecond i want to add text2 on img1 and Dispose.\nThird i want to add text3 on img1 and Dispose.</p>\n\n<pre><code>  using (Bitmap bitmapMasterImage = new Bitmap(stringMasterImageName))\n            {\n                using (Graphics graphicsMasterImage = Graphics.FromImage(bitmapMasterImage))\n                {\n                    graphicsMasterImage.DrawString(stringText1, new Font(\"Arial\", 20, FontStyle.Bold), new SolidBrush(colorStringColor), new Point(233, 134), stringformatWriteTextFormat);\n                    graphicsMasterImage.DrawString(stringText2, new Font(\"Arial\", 20, FontStyle.Bold), new SolidBrush(colorStringColor), new Point(233, 210), stringformatWriteTextFormat);\n                    graphicsMasterImage.DrawString(stringText3, new Font(\"Arial\", 20, FontStyle.Bold), new SolidBrush(colorStringColor), new Point(233, 300), stringformatWriteTextFormat);\n                }\n\n                Response.Clear();\n                Response.ContentType = \"image/jpeg\";\n\n                using (MemoryStream stream = new MemoryStream())\n                {\n                    bitmapMasterImage.Save(stream, ImageFormat.Jpeg);\n                    bitmapMasterImage.Save(stringOutPutFileName);\n                    stream.WriteTo(Response.OutputStream);\n                }\n            }\n</code></pre>\n\n<p>Thank You</p>\n"},{"tags":["asp.net-mvc-3","checkbox"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12810548,"title":"Multiple check-boxs with two types of models","body":"<p>This solution is working. I'm looking for a more efferent way of testing between the different types of Models.</p>\n\n<p>ATM I have to if statements that checks what next type is, my input is a int array holding ID of to different type of modes, so it determent the different types i have to use DBcontex.find, But if it inst the right type it crash's. I contended this with to empty try catch statements. The codes works fine I'm just not so sure this is a very good way of doing things.</p>\n\n<p>View Code</p>\n\n<pre><code> @using (Html.BeginForm())\n {\n &lt;div class=\"sidemenu\"&gt;\n &lt;div class=\"sidemenu-heading\"&gt;\n    Flow_OUT  @Html.ValidationSummary()\n &lt;/div&gt;\n&lt;div class=\"div-body\"&gt;\n\n&lt;table&gt;\n&lt;tr&gt;\n    &lt;th&gt;\n        Bill Name\n    &lt;/th&gt;\n    &lt;th&gt;\n        Date\n    &lt;/th&gt;\n    &lt;th&gt;\n        Cost\n    &lt;/th&gt;\n    &lt;th&gt;\n    Payed\n    &lt;/th&gt;\n&lt;/tr&gt;\n@foreach (var item in Model.Out)\n{\n&lt;tr&gt;\n    &lt;td&gt;\n       @Html.DisplayFor(modelItem =&gt; item.Bill.Name)\n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.DisplayFor(modelItem =&gt; item.Date)\n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.DisplayFor(modelItem =&gt; item.Bill.Cost)\n    &lt;/td&gt;\n    &lt;td&gt;\n        @if (item.Payed)\n        {\n        &lt;input type=\"checkbox\" checked=\"true\" disabled=\"true\"/&gt; \n        }\n        else\n        {\n        &lt;input type=\"checkbox\" name=\"updatePayed\" value=\"@item.ID\" /&gt;\n        }\n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.ActionLink(\"Edit\", \"Edit\", new { id = item.ID }) |\n        @Html.ActionLink(\"Details\", \"Details\", new { id = item.ID })\n\n    &lt;/td&gt;\n&lt;/tr&gt;\n}\n&lt;/table&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"sidemenu\"&gt;\n&lt;div class=\"sidemenu-heading\"&gt;\n    Flow_IN \n&lt;/div&gt;\n&lt;div class=\"div-body\"&gt;\n&lt;table&gt;\n&lt;tr&gt;\n    &lt;th&gt;\n        Tenant Name\n    &lt;/th&gt;\n    &lt;th&gt;\n        Date\n    &lt;/th&gt;\n    &lt;th&gt;\n        Rent\n    &lt;/th&gt;\n    &lt;th&gt;\n       Payed\n    &lt;/th&gt;\n&lt;/tr&gt;\n@foreach (var item in Model.In)\n{\n&lt;tr&gt;\n    &lt;td&gt;\n       @Html.DisplayFor(modelItem =&gt; item.Tenant.Firstname)\n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.DisplayFor(modelItem =&gt; item.Date)\n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.DisplayFor(modelItem =&gt; item.Tenant.Rent)\n    &lt;/td&gt;\n    &lt;td&gt;\n        @if (item.Payed)\n        {\n        &lt;input type=\"checkbox\" checked=\"true\" disabled=\"true\"/&gt; \n        }\n        else\n        {\n\n        &lt;input type=\"checkbox\" name=\"updatePayed\" value=\"@item.ID\" /&gt;\n        }\n    &lt;/td&gt;\n    &lt;td&gt;\n    &lt;/td&gt;\n&lt;/tr&gt;\n}\n&lt;/table&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;input type=\"submit\" value=\"Submit\" /&gt;\n}\n</code></pre>\n\n<p>Controller Action Code</p>\n\n<pre><code>    [HttpPost, ActionName(\"Index\")]\n    public ActionResult IndexPost(int[] updatePayed)\n    {\n        PaymentViewModel viewModel = new PaymentViewModel();\n        viewModel.Out = PaymentGR.All.OrderBy(d =&gt; d.Date);\n        viewModel.In = PaymentReceivedGR.All.OrderBy(d =&gt; d.Date);\n\n        if (updatePayed == null)\n        {\n            ModelState.AddModelError(\"\", \"None of the reconds has been selected\");\n            return RedirectToAction(\"Index\");\n        }\n        //////////////////////////////////////////// Bill\n        foreach (var item in updatePayed)\n        {\n            try\n            {\n                try\n                {\n                    if (PaymentGR.Find(item).GetType() == typeof(Payment)) //item.GetType()\n                    {\n                        PaymentGR.Find(item).Payed = true;\n                        PaymentGR.InsertOrUpdate(PaymentGR.Find(item));\n                    }\n                }\n                catch { \n\n                }\n\n                try\n                {\n                    if (PaymentReceivedGR.Find(item).GetType() ==      typeof(PaymentReceived))\n                    {\n                        PaymentReceivedGR.Find(item).Payed = true;\n                        PaymentReceivedGR.InsertOrUpdate(PaymentReceivedGR.Find(item));\n                    }\n                }\n                catch { \n\n                }\n\n\n            }\n            catch (Exception err)\n            {\n                ModelState.AddModelError(\"\", \"Failed On Id \" + item.ToString() + \" : \" + err.Message);\n                return RedirectToAction(\"Index\");\n            }\n        }\n\n            PaymentGR.Save();\n            ModelState.AddModelError(\"\", updatePayed.Count().ToString() + \" record(s) has been successfully updated!\");\n\n        return RedirectToAction(\"Index\");\n    }\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","html5","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12782978,"title":"Need uploadcontrol in a ajax.beginform using asp.net mvc3 html5 razor","body":"<p>I've been looking for a long time for this but I'm still stuck, I need to have an upload control where the user can upload a document and give additional information.</p>\n\n<p>I've had to do this before without the upload control so what I do is I get an ajax.beginform that will give all the input from the user to the controller and than close the popup trough a onsucces function, so this looks like this:</p>\n\n<p>view:</p>\n\n<pre><code>@using (Ajax.BeginForm(\"Save\", \"Documents\", new AjaxOptions { HttpMethod = \"Post\", OnSuccess = \"CloseDialog\" }, new { @class = \"form-inline\", id = \"FormId\" }))\n{\n    @Html.Label(\"Description\", \"Description\")\n            &lt;div class=\"span3\"&gt;\n                @Html.TextBoxFor(m =&gt; m.Description)\n            &lt;/div&gt; \n\n}\n</code></pre>\n\n<p>I tried adding there an Html.BeginForm but then I found out that it is not possible to use nested forms so I deleted this.</p>\n\n<p>In my controller I have:</p>\n\n<pre><code>public PartialViewResult Index(string description)\n{\n     var model = new DocumentsModel{ Description = description};\n\n     return PartialView(model);\n}\n\n[HttpPost]\npublic ActionResult UploadFile(HttpPostedFileBase file, string description)\n{\n     if (file != null &amp;&amp; file.ContentLength &gt; 0)\n     {\n         var fileName = Path.GetFileName(file.FileName);\n         var path = Path.Combine(Server.MapPath(@\"D:\\Documentds\\\"), fileName);\n         file.SaveAs(path);\n     }\n     return RedirectToAction(\"Index\", new { description = description });\n}\n</code></pre>\n\n<p>Ofcourse because the html.beginform won't work this controlleraction won't work either\nSo my question is how to do this without having to use a html.beginform?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","validation","fluentvalidation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12733679,"title":"FluentValidation and server+client remote validator","body":"<p>I am trying to build a generic remote validator extension for FluentValidation, similar to what is discussed in <a href=\"http://fluentvalidation.codeplex.com/discussions/258348\" rel=\"nofollow\">this thread</a>. There is client-side solution posted in <a href=\"http://nripendra-newa.blogspot.com/2011/05/fluent-validation-remote-validation.html\" rel=\"nofollow\">this blog</a>, but I need the remote validator to work both client- and server-side.</p>\n\n<p>The rule would look something like this:</p>\n\n<pre><code>IRuleBuilderOptions&lt;T, TProperty&gt; Remote(string action, \n                                         string controller, \n                                         Expression&lt;Func&lt;T, object&gt;&gt;[] properties, \n                                         IComparable[] values, \n                                         HttpVerbs httpVerb = HttpVerbs.Get);\n</code></pre>\n\n<p>Where:<br>\n<code>action</code> and <code>controller</code> are the names of the action/controller<br>\n<code>properties</code> is an array of model property expressions (m => m.FirstName)<br>\n<code>values</code> is an array of literal values</p>\n\n<p>The setting up a rule for the validator may look something like this:</p>\n\n<pre><code>this.RuleFor(m =&gt; m.Username).Remote(\"UsernameUnique\", \"RemoteController\", null, null);\n</code></pre>\n\n<p>I think I can figure out the client-side piece, as I will just build a jQuery adapter to invoke the action method, passing in the values.</p>\n\n<p>What I can't figure out is how, from the <code>IsValid</code> method of the validator, to invoke the same controller action.</p>\n\n<p>Here are some options I've considered:</p>\n\n<ul>\n<li><p>Somehow invoke the controller action remotely, creating a stub context. Not sure how to inject dependencies using IoC though. Service locators?</p></li>\n<li><p>Use a normal .NET method, and invoke that from both the validator and the action method.</p></li>\n</ul>\n\n<p>I think this would be a powerful validator to have available, but it seems like any option I come up with will be ugly, even if I manage to get it working. </p>\n\n<p>Are there better ways to tackle this? I'm totally open to anything that will work, I'm just not finding very many options, at least not elegant ones. But at this point, I would even be ok with a non-elegant solution, if there are no alternatives.</p>\n"},{"tags":["c#","asp.net-mvc-3","dependency-injection","autofac","signalr"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":138,"score":4,"question_id":12802073,"title":"Scope error when using Autofac with SignalR","body":"<p>I'm trying to inject an <code>HttpContextBase</code> in my SignalR hub:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public class EventHub : Hub, IDisconnect\n{\n    private readonly HttpContextBase _httpContextBase;\n\n    public EventHub(HttpContextBase httpContextBase)\n    {\n        _httpContextBase = httpContextBase;\n    }\n\n    [...]\n}\n</code></pre>\n\n<p>The registration code looks like this:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>private static void InitAutofac()\n{\n    var builder = new ContainerBuilder();\n\n    var assembly = typeof (MvcApplication).Assembly;\n\n    builder.RegisterControllers(assembly).PropertiesAutowired();\n    builder.RegisterModule(new AutofacWebTypesModule());\n    builder.RegisterFilterProvider();\n\n    builder.RegisterAssemblyTypes(assembly)\n        .Where(InterfaceBasedInjectedClasses())\n        .AsImplementedInterfaces()\n        .InstancePerLifetimeScope();\n\n    builder.RegisterAssemblyTypes(assembly)\n        .Where(InterfaceLessInjectedClasses())\n        .InstancePerLifetimeScope();\n\n    builder.RegisterType&lt;SurvivalContainer&gt;().InstancePerLifetimeScope();\n\n    builder.RegisterType&lt;EventHub&gt;().InstancePerLifetimeScope();\n\n    var container = builder.Build();\n\n    DependencyResolver.SetResolver(new AutofacDependencyResolver(container));\n\n\n    GlobalHost.DependencyResolver = new SignalR.Autofac.AutofacDependencyResolver(container);\n\n    RouteTable.Routes.MapHubs();\n}\n</code></pre>\n\n<p>And the error I'm getting is:</p>\n\n<blockquote>\n  <p>[DependencyResolutionException: No scope with a Tag matching\n  'httpRequest' is visible from the scope in which the instance was\n  requested. This generally indicates that a component registered as\n  per-HTTP request is being reqested by a SingleInstance() component (or\n  a similar scenario.) Under the web integration always request\n  dependencies from the DependencyResolver.Current or\n  ILifetimeScopeProvider.RequestLifetime, never from the container\n  itself.]</p>\n</blockquote>\n\n<p>Stacktrace:</p>\n\n<pre><code>Autofac.Core.Lifetime.MatchingScopeLifetime.FindScope(ISharingLifetimeScope mostNestedVisibleScope) +160\nAutofac.Core.Resolving.InstanceLookup..ctor(IComponentRegistration registration, IResolveOperation context, ISharingLifetimeScope mostNestedVisibleScope, IEnumerable`1 parameters) +57\nAutofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, IComponentRegistration registration, IEnumerable`1 parameters) +102\nAutofac.Core.Resolving.ResolveOperation.Execute(IComponentRegistration registration, IEnumerable`1 parameters) +64\nAutofac.Core.Lifetime.LifetimeScope.ResolveComponent(IComponentRegistration registration, IEnumerable`1 parameters) +164\nAutofac.Core.Container.ResolveComponent(IComponentRegistration registration, IEnumerable`1 parameters) +14\nAutofac.ResolutionExtensions.TryResolveService(IComponentContext context, Service service, IEnumerable`1 parameters, Object&amp; instance) +70\nAutofac.ResolutionExtensions.TryResolve(IComponentContext context, Type serviceType, Object&amp; instance) +70\nSignalR.Autofac.AutofacDependencyResolver.GetService(Type serviceType) in D:\\etc\\Dev\\SignalR.Autofac\\AutofacDependencyResolver.cs:30\nSignalR.Hubs.DefaultHubActivator.Create(HubDescriptor descriptor) +60\nSignalR.Hubs.DefaultHubManager.ResolveHub(String hubName) +27\nSignalR.Hubs.HubDispatcher.CreateHub(IRequest request, HubDescriptor descriptor, String connectionId, TrackingDictionary state, Boolean throwIfFailedToCreate) +445\nSignalR.Hubs.HubDispatcher.OnReceivedAsync(IRequest request, String connectionId, String data) +246\nSignalR.&lt;&gt;c__DisplayClass6.&lt;ProcessRequestAsync&gt;b__4(String data) +29\nSignalR.Transports.ForeverTransport.ProcessSendRequest() +63\nSignalR.Transports.ForeverTransport.ProcessRequestCore(ITransportConnection connection) +70\nSignalR.Transports.ForeverTransport.ProcessRequest(ITransportConnection connection) +5\nSignalR.PersistentConnection.ProcessRequestAsync(HostContext context) +560\nSignalR.Hubs.HubDispatcher.ProcessRequestAsync(HostContext context) +120\nSignalR.Hosting.AspNet.AspNetHandler.ProcessRequestAsync(HttpContextBase context) +422       SignalR.Hosting.AspNet.HttpTaskAsyncHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +68\nSystem.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +301\nSystem.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +155\n</code></pre>\n\n<p>I'm just getting started with autofac and SignalR and I find myself a little stuck. None of the related topics on SO helped. Any idea on what I'm doing wrong?</p>\n"},{"tags":["asp.net-mvc-3","asp.net-membership","windows-authentication","intranet"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":111,"score":4,"question_id":12459994,"title":"MVC3 Intranet Membership","body":"<p>I am building a MVC3 <strong>Intranet</strong> application using the default MembershipProvider, ProfileProvider, and RoleProvider connected to a SQL Server dB.  If I use Forms authentication, the roles provider populates properly.  When I switch to Windows authentication, the roles provider no longer populates.  This is tested by putting a breakpoint in the code and looking at \"Roles.GetRolesForUser()\".  What I suspect is happening is that the userid that is being passed to the database is 'DOMAIN\\USERID' (this is what is in User.Identity.Name), whereas what is in the database is just the userid.</p>\n\n<p>Since everything is default, there is not much code to post.</p>\n\n<pre><code>&lt;authentication mode=\"Windows\" /&gt;\n&lt;authorization&gt;\n  &lt;deny users=\"?\"/&gt;\n&lt;/authorization&gt;\n  &lt;membership defaultProvider=\"AspNetSqlMembershipProvider\"&gt;\n    &lt;providers&gt;\n    &lt;clear /&gt;\n    &lt;add name=\"AspNetSqlMembershipProvider\" type=\"System.Web.Security.SqlMembershipProvider\" connectionStringName=\"ApplicationServices\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\" /&gt;\n  &lt;/providers&gt;\n&lt;/membership&gt;\n&lt;profile&gt;\n  &lt;providers&gt;\n    &lt;clear /&gt;\n    &lt;add name=\"AspNetSqlProfileProvider\" type=\"System.Web.Profile.SqlProfileProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt;\n  &lt;/providers&gt;\n  &lt;properties&gt;&lt;/properties&gt;\n&lt;/profile&gt;\n  &lt;roleManager enabled=\"true\" defaultProvider=\"AspNetSqlRoleProvider\" cacheRolesInCookie=\"true\"&gt;\n    &lt;providers&gt;\n    &lt;clear /&gt;\n    &lt;add connectionStringName=\"ApplicationServices\" applicationName=\"/\" name=\"AspNetSqlRoleProvider\" type=\"System.Web.Security.SqlRoleProvider\" /&gt;\n    &lt;add applicationName=\"/\" name=\"AspNetWindowsTokenRoleProvider\" type=\"System.Web.Security.WindowsTokenRoleProvider\" /&gt;\n  &lt;/providers&gt;\n&lt;/roleManager&gt;\n</code></pre>\n\n<p>My first thought, is can we just remove the domain before the identity is passed to the membership provider, but User.Identity.Name is get only.  </p>\n\n<p>What would be the best route at correcting this, without having to change my entire database to have domain\\userid instead of just userid?  Can this be done without having to write a custom membership/profile/role provider?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12808413,"title":"What is the best practice for login attempts and locking account accounts in asp.net membership provider","body":"<p>While I was testing my application, I realized that after 5 login attempts, the out of the box membership provider will lock your account.  How does a user go about getting his account unlocked?  Is the standard process just emailing the admin?  Or is there some form that i can build? email confirmation link?  Basically, the best practice for handling multiple failed login attempts.  I have increased the number to 10, and also I do not have a secret question and answer installed and would hope to avoid using it.</p>\n"},{"tags":["asp.net-mvc-3","jquery-ajax","mvc-editor-templates","asp.net-mvc-partialview"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":109,"score":2,"question_id":12808480,"title":"Dynamically populate ASP.NET MVC 3 Editor Templates based on selection in a dropdown","body":"<p>I am using ASP.NET MVC 3 and am attempting to populate a list of editor templates dynamically based on the selection made in a dropdown. I have no code to post because I am not sure what is the best way to achieve my purpose. My question is not how to use editor templates, but how to use editor templates when the list of related objects changes based on a user selection of the \"parent\".</p>\n\n<p><strong>Background</strong>:</p>\n\n<p>Employees need to complete training checklists for operations they are trained on. The employee will select a checklist template from a dropdown menu, and then checklist items will populate based on the selected checklist template. (Each template has a different set of related items.) Each checklist item is associated with a blank response that the user must mark was completed. The checklist item is for display only; the response is what is being edited.</p>\n\n<p>I know I can populate the checklist items via AJAX &amp; Json, but is there a way to do this using editor templates--with the result of checklist items dynamically displaying based on the checklist template selected? One solution is to use one page to select the template, and then another page to display the checklist items; I would like to avoid this and keep everything on one page if possible. The goal is to populate the checklist items (and blank responses) based on the checklist template selected.</p>\n\n<p><strong>Caveat</strong>:\nEach checklist will have a predefined number of blank responses based on what items are related to the checklist template, so the list size will not change during the completion of the form.</p>\n\n<p><strong>Model</strong>:</p>\n\n<p>[ChecklistTemplate]  1------------* [ChecklistItem]</p>\n\n<p>[ChecklistTemplate]  1------------* [Checklist]</p>\n\n<p>[Checklist]          1------------* [ChecklistResponse]</p>\n\n<p>[ChecklistResponse]  *------------1 [ChecklistItem]</p>\n\n<p>Any and all help is appreciated. Thank you.</p>\n"},{"tags":["c#","asp.net-mvc-3","ssrs-reports","pdf-conversion"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12808180,"title":"converting ssrs report with bookmarks into pdf","body":"<p>I have a report with couple bookmarks in ssrs... I can successfully convert it into pdf by rendering it...however I cannot get the bookmarks rendered correctly like it is in ssrs... I read here <a href=\"http://technet.microsoft.com/en-us/library/dd255291%28SQL.105%29.aspx\" rel=\"nofollow\">clickable link</a> that </p>\n\n<pre><code>Bookmarks are not supported in PDF rendering.\n</code></pre>\n\n<p>I used AddOutline to see if it works, it shows up on the bookmark section but does nothing.</p>\n\n<pre><code>var BookMarkSection = AddOutline(pdfConcatenate.Writer, \"MyBookMark\");\n</code></pre>\n\n<p>Is there no way around to convert the report into pdf with bookmarks? Any input will be highly appreciated.. Thank You.</p>\n"},{"tags":["asp.net-mvc-3","dotnetopenauth","nerddinner"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12808359,"title":"OpenIdSelector button","body":"<p>I'm using NerdDinner 3.2 as a base.\nI want to allow only google logins.\nI removed the Yahoo selector provider button and all is well.\nHowever, if I remove the selector Open Id Button the login stops working.</p>\n\n<p>How can I have just the google image and still retain the nice Ajax popup window style login?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc-3","swfupload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12800914,"title":"SWFUpload with .net MVC require Windows login","body":"<p>i have a problem whith using SWFUpload in my MVC application. On some workstations uploader shows the Windows authentication dialog. I have no idea what it means. Project deployed on IIS 7. For some cliets it works for another no. Does anyone know why it happens?</p>\n"},{"tags":["jquery","asp.net-mvc-3","c#-4.0","dynamic","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":678,"score":1,"question_id":9133802,"title":"Dynamic JqGrid ColModel MVC3 (Razor)","body":"<p>I am needing to have a dynamic jqgrid on my asp.net mvc3 app. The page has 10 search criteria at the top of the page to determine what will be displayed in the grid.</p>\n\n<p>There are about 10-12 columns that are static that will always be in the grid. Then based on the search criteria the rest of the columns are added to the grid.</p>\n\n<p>I also need to have the ability to edit/delete etc. on the data in the grid.</p>\n\n<p>I don't know how to build the colModel and pass it to my view then populate the data.</p>\n\n<p>I have seen examples where a model is being past in, but it doesnt show how that model is being built etc.</p>\n\n<p>Does anyone have an idea on how to accomplish this?</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["asp.net-mvc","mvc","asp.net-mvc-3","knockout.js"],"answer_count":4,"favorite_count":4,"up_vote_count":3,"down_vote_count":0,"view_count":2402,"score":3,"question_id":5741929,"title":"Knockoutjs - how can you pass the model to the view","body":"<p>I've just started looking at <a href=\"http://knockoutjs.com/\" rel=\"nofollow\">knockoutjs</a> after watching the <a href=\"http://channel9.msdn.com/Events/MIX/MIX11/FRM08\" rel=\"nofollow\">MIX 11</a> talk and it looks very promising. </p>\n\n<p>I can understand how to pass your model back to your controller as json and update/save the model but how can I pass my model to my view and make it observable?</p>\n\n<p>For example if I have the following class:</p>\n\n<pre><code>public class Person {\n  public string FirstName { get; set; }\n  public string LastName { get; set; }\n}\n</code></pre>\n\n<p>I can pass it from my controller as json using a JsonResult so I send something like to my view:</p>\n\n<pre><code>{ \n  firstName : \"Bob\",\n  lastName : \"Jones\"\n};\n</code></pre>\n\n<p>But how do I make the properties observable and make this a viewModel within my code?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc-3","dll","visual-web-developer-2010"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12806430,"title":"Microsoft Visual Web Developer 2010 Express cannot find .dll.r24 file","body":"<p>I was hoping this would be a quick and easy fix. I am picking up on a project that someone else left off on and am getting stuck with a weird error. I got Microsoft Visual Web Developer 2010 Express setup, installed the MVC3 Framework Package, and setup the publish profile. Now when I click \"Publish web\" I get the following error:</p>\n\n<pre><code>Copying file bin\\&lt;project_name&gt;.dll.r24 to obj\\Release\\Package\\PackageTmp\\bin\\&lt;project_name&gt;.dll.r24 failed. Could not find file 'bin\\&lt;project_name&gt;.dll.r24'\n</code></pre>\n\n<p>The .dll exists in the bin directory, but I am not sure what the \".r24\" extension means since I have never seen it before. </p>\n\n<p>As a disclaimer, I don't normally do projects in ASP.NET, I prefer using php/cgi so I am not too well versed in what I am doing here. If I left anything out just ask and I will get you the relevent information.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","http","rest"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1129,"score":1,"question_id":7046161,"title":"Returning XML or JSON depending on the HTTP request","body":"<p>I am trying to develop a RESTful Web service as an ASP.NET MVC 3 Web Application.</p>\n\n<p>(I know, I should use the right tool for the job, which in this case means I should use WCF. But WCF has too many abstraction layers and is thus too big to fit inside my head. It would be cool for a research project, but I am trying to do my job. <s>Besides I previously tried it, and now I am of the opinion that, despite its big promises, WCF sucks big time.</s>)</p>\n\n<p>Anyway, what I want to do is simple: I want my Web service to return its results as either XML or JSON, depending on the type specified in the HTTP request (by, default, JSON). How do I do that?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12806225,"title":"why does'nt my RedirectToAction() work?","body":"<p>I have the following controller method</p>\n\n<pre><code>////  public ActionResult Poll(List&lt;string&gt;  id)\n        {\n\n                string Name = User.Identity.Name.ToString();\n                User user = db.user.Find(Name);\n                if (user != null)\n                {\n                    VoteLog voteLog = new VoteLog();\n                    voteLog.EmployeeId = user.EmployeeId;\n                    voteLog.Choice1 = Convert.ToInt32(id[0]);\n                    if (id.Count &gt;= 2)\n                        voteLog.Choice2 = Convert.ToInt16(id[1]);\n                    if (id.Count == 3)\n                        voteLog.Choice3 = Convert.ToInt32(id[2]);\n                    voteLog.EntryDate = DateTime.Today;\n\n                    db.VoteLog.Add(voteLog);\n                    db.SaveChanges();\n                    foreach (var i in id)\n                    {\n                        Idea idea = db.Ideas.Find(Convert.ToInt32(i));\n                        idea.TotalVotes = idea.TotalVotes + 1;\n                        db.SaveChanges();\n\n                    }\n                }\n\n                return RedirectToAction(\"index\");\n        }\n</code></pre>\n\n<p>this is basically a poll application where a user can vote upto 3 choices once a day.\nafter saving to the database iam trying to redirect to a view called index or poll results. but thats not happening neither its being refreshed after hitting submit.could anyone tell me what am I missing.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","c#-4.0","razor","asp.net-4.0"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1391,"score":1,"question_id":8729171,"title":"Autopost back in mvc drop down list","body":"<p>Requirment: I have a drop down list on my view page, displaying a list of vendors. When a vendor is selected from the dropdown, the page displays the details of selected vendor. By default i need to keep first vendor selected and its details displayed. I could accomplish this by using following code.</p>\n\n<p>Problem: Dont know how to accomplish <strong>autopostback = true</strong>  in MVC. I need to display the details of selected vendor on selection of vendor in the dropdown list.</p>\n\n<p>I am using ASP.net 4.0, MVC3, Entity Framework 4.0. Here is my code:</p>\n\n<pre><code>    [AcceptVerbs(\"POST\")]\n    public ActionResult SearchResult(FormCollection collection)\n    {\n        try\n        {\n            string vendorName = collection[\"searchItem\"].ToString();\n\n            vendorName = vendorName.Trim();\n            List&lt;Vendor&gt; vendorList = Queries.compiledVendorQuery(dbContext, vendorName).ToList&lt;Vendor&gt;();\n\n            if(vendorList.Count() == 0)\n                return View(\"EmptySearch\");\n\n            List&lt;SelectListItem&gt; vendorSelectList = new List&lt;SelectListItem&gt;();\n            foreach (Vendor vendor in vendorList)\n            {\n                vendorSelectList.Add(new SelectListItem\n                {\n                    Text = vendor.vendorName.ToString(),\n                    Value = vendor.vendorId.ToString()\n                });\n            }\n\n            Vendor selectedVendor = vendorList[0];\n\n            VendorDetails vendorDeatils = Queries.compiledVendorDetailsQuery(dbContext, selectedVendor.vendorId.ToString()).FirstOrDefault();\n\n            VendorResult vendorResult = new VendorResult();\n\n            vendorResult.vendorSelectList = vendorSelectList;\n            vendorResult.vendorDetails = vendorDeatils;\n\n            return View(vendorResult);\n        }\n        catch (Exception e)\n        {\n            return View(\"EmptySearch\");\n        }\n    }\n\n\npublic class VendorResult\n{\n    public List&lt;SelectListItem&gt; vendorSelectList { get; set; }\n    public VendorDetails vendorDetails {get; set;}\n}\n\n\npublic class VendorDetails\n{\n    public string vendorId { get; set; }\n    public string vendorName { get; set; }\n    public string address1 { get; set; }\n    public string address2 { get; set; }\n    public string address3 { get; set; }\n    public string city { get; set; }\n    public string state { get; set; }\n    public string zip { get; set; }\n    public decimal noteIndex { get; set; }\n    public string comment1 { get; set; }\n    public string comment2 { get; set; }\n    public string phone { get; set; }\n    public string interPhone { get; set; }\n    public string fax { get; set; }\n    public string interFax { get; set; }\n}\n</code></pre>\n\n<p>Edit: Code defining my dropdown list.</p>\n\n<pre><code>@model KeleTools.Models.VendorResult\n\n@{\n    ViewBag.Title = \"Vendor LookUp Tool\";\n    Layout = \"~/Views/Shared/_ResultLayout.cshtml\";\n}\n\n&lt;h2&gt;Vendor Details&lt;/h2&gt;\n\n&lt;p&gt; Select a vendor to display details:&lt;/p&gt;\n\n@Html.DropDownList(\"VendorList\", @Model.vendorSelectList, null, new {target=\"_self\"})\n\n@using (Html.BeginForm(\"SearchResult\", \"VendorLookUp\"))\n{\n   &lt;div class=\"margin-10-top\" &gt;\n    &lt;table id= \"OrderDetail\" class=\"OrderDetail\"&gt;\n    &lt;tr class=\"OrderDetail\"&gt;\n        &lt;td class=\"PropertyName\"&gt;Vendor Id:&lt;/td&gt;\n        &lt;td class=\"PropertyValue\"&gt;@Model.vendorDetails.vendorId.ToString().Trim()&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr class=\"OrderDetail\"&gt;\n        &lt;td class=\"PropertyName\"&gt;Vendor Name:&lt;/td&gt;\n        &lt;td class=\"PropertyValue\"&gt;@Model.vendorDetails.vendorName.ToString().Trim()&lt;/td&gt;\n    &lt;/tr&gt;\n    @{\n                             string address = @Model.vendorDetails.address1.ToString().Trim();\n                             address = address + \"\\n\";\n                             address = address + @Model.vendorDetails.address2.ToString().Trim();\n                             address = address + \"\\n\";\n                             address = address + @Model.vendorDetails.address3.ToString().Trim();\n\n        &lt;tr class=\"OrderDetail\"&gt;\n            &lt;td class=\"PropertyName\"&gt;Address&lt;/td&gt;\n            &lt;td class=\"PropertyValue\"&gt;@address.TrimEnd()&lt;/td&gt;\n        &lt;/tr&gt;\n    }\n    @{\n                                 string city = @Model.vendorDetails.city.ToString().TrimEnd();\n                                 city = city + \", \";\n                                 city = city + @Model.vendorDetails.state.ToString().Trim();\n                                 city = city + \" \";\n                                 city = city + @Model.vendorDetails.zip.ToString().Trim();\n\n        &lt;tr class=\"OrderDetail\"&gt;\n            &lt;td class=\"PropertyName\"&gt;&amp;nbsp;&lt;/td&gt;\n            &lt;td class=\"PropertyValue\"&gt;@city&lt;/td&gt;\n        &lt;/tr&gt;\n\n                                 string phoneNumber = null;\n                                 if (!string.IsNullOrEmpty(@Model.vendorDetails.phone.ToString().Trim()))\n                                 {\n                                     phoneNumber = @Model.vendorDetails.phone.ToString().TrimEnd().Substring(0, 3);\n                                     phoneNumber = phoneNumber + \"-\";\n                                     phoneNumber = phoneNumber + @Model.vendorDetails.phone.ToString().TrimEnd().Substring(3, 3);\n                                     phoneNumber = phoneNumber + \"-\";\n                                     phoneNumber = phoneNumber + @Model.vendorDetails.phone.ToString().TrimEnd().Substring(6, 4);\n                                     if (@Model.vendorDetails.phone.ToString().Trim().Length &gt; 10)\n                                     {\n                                         phoneNumber = phoneNumber + \" Ext: \";\n                                         phoneNumber = phoneNumber + @Model.vendorDetails.phone.ToString().TrimEnd().Substring(10);\n                                     }\n                                 }\n\n        &lt;tr class=\"OrderDetail\"&gt;\n            &lt;td class=\"PropertyName\"&gt;Phone Number:&lt;/td&gt;\n            &lt;td class=\"PropertyValue\"&gt;@phoneNumber&lt;/td&gt;\n        &lt;/tr&gt;\n                                 phoneNumber = null;\n                                 if (!string.IsNullOrEmpty(@Model.vendorDetails.fax.ToString().Trim()))\n                                 {\n                                     phoneNumber = @Model.vendorDetails.fax.ToString().TrimEnd().Substring(0, 3);\n                                     phoneNumber = phoneNumber + \"-\";\n                                     phoneNumber = phoneNumber + @Model.vendorDetails.fax.ToString().TrimEnd().Substring(3, 3);\n                                     phoneNumber = phoneNumber + \"-\";\n                                     phoneNumber = phoneNumber + @Model.vendorDetails.fax.ToString().TrimEnd().Substring(6, 4);\n                                     if (@Model.vendorDetails.fax.ToString().Trim().Length &gt; 10)\n                                     {\n                                         phoneNumber = phoneNumber + \" Ext: \";\n                                         phoneNumber = phoneNumber + @Model.vendorDetails.fax.ToString().TrimEnd().Substring(10);\n                                     }\n                                 }\n\n        &lt;tr class=\"OrderDetail\"&gt;\n            &lt;td class=\"PropertyName\"&gt;Fax:&lt;/td&gt;\n            &lt;td class=\"PropertyValue\"&gt;@phoneNumber&lt;/td&gt;\n        &lt;/tr&gt;\n                                 phoneNumber = null;\n                                 if (!string.IsNullOrEmpty(@Model.vendorDetails.interPhone.ToString().Trim()))\n                                 {\n\n                                     phoneNumber = @Model.vendorDetails.interPhone.ToString().TrimEnd().Substring(0, 3);\n                                     phoneNumber = phoneNumber + \"-\";\n                                     phoneNumber = phoneNumber + @Model.vendorDetails.interPhone.ToString().TrimEnd().Substring(3, 3);\n                                     phoneNumber = phoneNumber + \"-\";\n                                     phoneNumber = phoneNumber + @Model.vendorDetails.interPhone.ToString().TrimEnd().Substring(6, 4);\n                                     if (@Model.vendorDetails.interPhone.ToString().Trim().Length &gt; 10)\n                                     {\n                                         phoneNumber = phoneNumber + \" Ext: \";\n                                         phoneNumber = phoneNumber + @Model.vendorDetails.interPhone.ToString().TrimEnd().Substring(10);\n                                     }\n                                 }\n\n        &lt;tr class=\"OrderDetail\"&gt;\n            &lt;td class=\"PropertyName\"&gt;International Phone:&lt;/td&gt;\n            &lt;td class=\"PropertyValue\"&gt;@phoneNumber&lt;/td&gt;\n        &lt;/tr&gt;\n                                 phoneNumber = null;\n                                 if (!string.IsNullOrEmpty(@Model.vendorDetails.interFax.ToString().Trim()))\n                                 {\n                                     phoneNumber = @Model.vendorDetails.interFax.ToString().TrimEnd().Substring(0, 3);\n                                     phoneNumber = phoneNumber + \"-\";\n                                     phoneNumber = phoneNumber + @Model.vendorDetails.interFax.ToString().TrimEnd().Substring(3, 3);\n                                     phoneNumber = phoneNumber + \"-\";\n                                     phoneNumber = phoneNumber + @Model.vendorDetails.interFax.ToString().TrimEnd().Substring(6, 4);\n                                     if (@Model.vendorDetails.interFax.ToString().Trim().Length &gt; 10)\n                                     {\n                                         phoneNumber = phoneNumber + \" Ext: \";\n                                         phoneNumber = phoneNumber + @Model.vendorDetails.interFax.ToString().TrimEnd().Substring(10);\n                                     }\n                                 }\n\n        &lt;tr class=\"OrderDetail\"&gt;\n            &lt;td class=\"PropertyName\"&gt;International Fax:&lt;/td&gt;\n            &lt;td class=\"PropertyValue\"&gt;@phoneNumber&lt;/td&gt;\n        &lt;/tr&gt;\n        }\n      &lt;tr class=\"OrderDetail\"&gt;\n        &lt;td class=\"PropertyName\"&gt;Comment 1:&lt;/td&gt;\n        &lt;td class=\"PropertyValue\"&gt;@Model.vendorDetails.comment1.ToString().TrimEnd() &lt; /td&gt;\n    &lt; /tr&gt;\n    &lt;tr class=\"OrderDetail\"&gt;\n        &lt;td class=\"PropertyName\"&gt;Comment 2:&lt;/td&gt;\n        &lt;td class=\"PropertyValue\"&gt;@Model.vendorDetails.comment2.ToString().Trim()&lt;/td&gt;\n    &lt; /tr&gt;\n\n&lt; /table&gt; \n&lt; /div&gt;\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","razor","html-helper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12805281,"title":"Where to get all html helper's documentation of razor","body":"<p>I would like to know about all the html helpers. Perhaps i need a documentation that describes all the helper functions' parameter and all overloads.</p>\n\n<p>I hope any of you can give a link or any book reference.\nThank you.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","url","iis-7.5","httphandler"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12805851,"title":"Early Redirect in IIS / ASP.NET MVC3","body":"<p>If the request URI that IIS has received needs to be redirected or rewritten, on condition that it matches a regex patten, what are a couple \"easy\" recommended places to hook the request/response sequence to supply a redirect or rewrite <em>before</em> I have reached an MVC controller/action?</p>\n\n<p>I see someone has an <a href=\"http://www.dotnetperls.com/urlmappings\" rel=\"nofollow\">HttpModule urlRewrite</a> approach.  Others have used some more <a href=\"http://stackoverflow.com/questions/799511/how-to-simulate-server-transfer-in-asp-net-mvc/1242525#1242525\">precarious techniques</a>.  </p>\n\n<p>One approach that I like, if it works, is to make my own IRouteHandler:</p>\n\n<pre><code>routes.Add(\"Hello\", new Route(\"&lt;regex&gt;\", new MyCustomRouteHandler()));\n</code></pre>\n\n<p>MyCustomRouteHandler could then return a custom IHttpHandler, which then could perform a redirect or urlRewrite.  </p>\n\n<p>I'd like comments on these various approaches, perhaps with some fleshing-out.  For example, if others agree the custom IRouteHandler / IHttpHandler is the way to go, what should that code look like (particularly the HttpHandler code)?  It bugs me to think there is an easier way to use the routing mechanism to achieve this goal, but it eludes me.  Thoughts?</p>\n\n<p>If all the approaches become too ugly, then I may just fall-back to assume that the IIS_rewrite module is installed, and use <a href=\"http://stackoverflow.com/a/1185171/284758\">this approach</a>.</p>\n"},{"tags":["asp.net-mvc-3","razor","viewmodel","actionmethod"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12805230,"title":"passing model to action method in form","body":"<p>I have a view which look like this</p>\n\n<pre><code>    @model UI.Models.BidOnAuctionViewModel\n\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n@{\n    var disableButton = Model.AuctionOpen ? \"\" : \"bid-btn-disabled\";         \n}\n\n@using (Html.BeginForm(\"ConfirmBid\", \"Lot\"))\n{\n    &lt;fieldset&gt;\n        @Html.HiddenFor(model =&gt; model.AuctionId)\n\n        &lt;p&gt;\n            &lt;label &gt;&amp;pound;@Model.NextBidAmount&lt;/label&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            @if (Model.AuctionOpen)\n            {\n                 &lt;input type=\"submit\" value=\"Place bid\" class=\"bid-btn @disableButton\" /&gt;\n            }\n        &lt;/p&gt;\n    &lt;/fieldset&gt;\n}\n</code></pre>\n\n<p>When I click on the Place bid button, I go to the confirmBid action method</p>\n\n<pre><code>[Authorize]\n[HttpPost]\npublic ActionResult ConfirmBid(BidOnAuctionViewModel model)\n</code></pre>\n\n<p>The problem is that even though in the view the model was not null, for some reason it is null in this action method.  Why is this?</p>\n"},{"tags":["jquery","ajax","asp.net-mvc-3","jquery-ajax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12805516,"title":"When calls cshtml, scripts doesn't work","body":"<p>I have a Json search method in my PartnerController:</p>\n\n<pre><code>public JsonResult SearchCityByPostalCode(string postalCode)\n{\n    CitiesRepository citiesRepository = new CitiesRepository();\n    var city = citiesRepository.SearchCityByPostalCode(postalCode);\n    return Json(city, JsonRequestBehavior.AllowGet);\n}\n</code></pre>\n\n<p>Well, I'm using partial views to create my Create Page, and I have this Partial View:</p>\n\n<pre><code>&lt;label class=\"inline\" for=\"postalCode\"&gt;\n    Postal Code:\n    &lt;input type=\"text\" id=\"postalCode\" name=\"postalCode\" /&gt;\n&lt;/label&gt;\n\n&lt;label class=\"inline\" for=\"cities\"&gt;\n    City:\n    &lt;select id=\"states\" name=\"states\"&gt;\n        @foreach (City city in ViewBag.Cities)\n        {  \n            &lt;option value=\"@city.ID\"&gt;@city.Name&lt;/option&gt;\n        }\n    &lt;/select&gt;\n&lt;/label&gt;\n</code></pre>\n\n<p>I'm using a AJAX function to get data to fill this content:</p>\n\n<pre><code>$('#postalCode').blur(function() {\n\n    var postalCode = { 'postalCode' : $(this).val() };\n    $.get('Partner/SearchCityByPostalCode', postalCode, function (city) {\n        // do something with cities select.\n    }\n});\n</code></pre>\n\n<p>Well, when I call Index() method:</p>\n\n<pre><code>public class PartnerController : Controller\n{\n    public ActionResult Index()\n    {\n        return View();\n    }\n}\n</code></pre>\n\n<p>This code works perfectly.\nI created also a Editing Page, with the same body of Create Page, called by another method in PartnerController class:</p>\n\n<pre><code>public class PartnerController : Controller\n{\n    //\n    // GET: /Partner/\n    public ActionResult Index()\n    {\n        return View();\n    }\n\n    //\n    // GET: /Partner/{partnerID}\n    public ActionResult Editing(long partnerID)\n    {\n        ViewBag.PartnerID = partnerID;\n        return View();\n    }\n}\n</code></pre>\n\n<p>When I call Editing method, the script to search by AJAX doesn't work. Any ideas about this problem?</p>\n\n<p>Thanks, guys!!!</p>\n"},{"tags":["asp.net","asp.net-mvc-3","linq","dynamic-data"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":131,"score":0,"question_id":12471478,"title":"Dynamic Data asp.net Foreign key relationship in DropdownList, how to customise?","body":"<p>I'm working on <code>Asp.Net Dynamic Data project with linq to sql</code>. </p>\n\n<p>I've created a database that has <code>one to one relationship</code> between two tables specified using a foreign key.</p>\n\n<p>i.e. I have a table <code>Employee</code> and table <code>Department</code></p>\n\n<pre><code>Employee table\nempid empname address departmentId \n\nDepartment table\ndepartmentId departmentname\n</code></pre>\n\n<p>now <code>Student</code> table takes an <code>departmentId</code> as a <code>foreign key</code></p>\n\n<p>when I navigated to <code>/Insert.aspx</code> that it would display the a list of <code>department_name</code> in a dropdown list. </p>\n\n<p>It does this - but it shows all the <code>department_name</code> into dropdownlist</p>\n\n<blockquote>\n  <p>How and where I could write linq query so that i can customize those department_name values</p>\n</blockquote>\n\n<p>If suppose I want to only populate <code>computers</code> as a department_name in that dropdownlist\nhow could I achieve this ?</p>\n\n<p>Code:\nIn FieldTemplate folder <code>ForeignKey_Edit.ascx.cs</code></p>\n\n<pre><code>protected void Page_Load(object sender, EventArgs e)\n    {\n        if (DropDownList1.Items.Count == 0)\n        {\n            if (Mode == DataBoundControlMode.Insert || !Column.IsRequired)\n            {\n                DropDownList1.Items.Add(new ListItem(\"[Not Set]\", \"\"));\n            }\n            PopulateListControl(DropDownList1);\n        }\n\n        SetUpValidator(RequiredFieldValidator1);\n        SetUpValidator(DynamicValidator1);\n    }\n</code></pre>\n\n<p>data dynamics is populating dropdownlist internally.</p>\n\n<p>here before or after this statement <code>PopulateListControl(DropDownList1);</code></p>\n\n<p>what should I code so that i can populate only specific value..?</p>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12804760,"title":"Two tables related in one view","body":"<p>This is in reference to question:\n<a href=\"http://stackoverflow.com/questions/11271249/multiple-checkboxes-to-select-and-save-values-in-database-table-c-sharp-mvc3\">Multiple Checkboxes to select and save values in database table C# MVC3</a></p>\n\n<p>I have taken the answer and used this - it works well! I have also created another viewModel that uses this same script. It works but not the way I need it too. </p>\n\n<p>I need to do everything that the view model does plus show a question that the checkboxes relate to. I have a table of questions and a table of answers. The answers get updated, the questions are just for show. The tables are related by <code>MainQuestionID</code>. I currently use the <code>MainQuestion</code> model to call the list of questions executed by a link click for that subcategory. So the questions return to list where the subcategory is = to. I would like to implement this but instead of using the <code>MainQuestions</code> model to display - use the viewModel and combine the list to the view. \nI have tried using <code>ICollection</code> in the view but it will not make question available for the view. </p>\n\n<p>My <code>MainAnswers</code> table that needs updated by the checkboxes gets populated with the <code>MainQuestionID</code> of all the questions via a stored procedure. </p>\n\n<p>Could someone give an example of how to do this it would be much appreciated. </p>\n\n<p>thanks </p>\n"}]}
{"total":29155,"page":16,"pagesize":100,"questions":[{"tags":["c#","mysql","asp.net-mvc-3","mini-profiler","dapper"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":287,"score":3,"question_id":8830123,"title":"Dapper conversion of TinyInt","body":"<p>I'm attempting to write my own DatabaseStorageBase for mini-profiler, and I'm running into issues in my</p>\n\n<pre><code>private List&lt;T&gt; LoadFor&lt;T&gt;(DbConnection conn, object idParameter)\n</code></pre>\n\n<p>method.  Dapper keeps yelling at me with</p>\n\n<pre><code>Error parsing column 5 (level=0 - SByte)\n</code></pre>\n\n<p>I'm storing level as <code>tinyint(4)</code>, so I'm assuming dapper cannot make the conversion from Tiny Int to what looks like an Enum (<code>ProfileLevel</code>)?  Could someone suggest how I should store the level in mysql so I can solve my conversion woes?</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12804652,"title":"Dropdownlist and unobtrusive clientside validation - selected value of dropdownlist does not appear to change when viewing data server-side","body":"<p>I am attempting to implement client-side validation of my MVC3 model. I am able to successfully populate a DropDownList object with a series of enumerated values. I am now trying to apply an attribute to this Enum property and, when the user attempts to submit the forum, I would like to verify that the selected Enum is valid.</p>\n\n<p>As such, I have the following bits of code:</p>\n\n<pre><code>&lt;%= Html.DropDownListFor(model =&gt; model.OrderStatus, new SelectList(Model.OrderStatuses, Model.OrderStatusesDisplaynames))%&gt;\n\npublic class OrderDetailsModel\n{        \n    [DisplayName(\"Order ID\")]\n    public int ID { get; set; }\n    [DisplayName(\"Order Status\"), EnsureOrderStatus(\"ID\")]\n    public OrderStatus OrderStatus { get; set; }\n    public List&lt;OrderStatusModel&gt; OrderStatusModels = new List&lt;OrderStatusModel&gt;();\n\n    public OrderDetailsModel()\n    {\n        OrderStatusModels.Add(new OrderStatusModel { EnumStatus = OrderStatus.Active, StringStatus = \"Active\" });\n        OrderStatusModels.Add(new OrderStatusModel { EnumStatus = OrderStatus.Completed, StringStatus = \"Completed\" });\n        OrderStatusModels.Add(new OrderStatusModel { EnumStatus = OrderStatus.Future, StringStatus = \"Future\" });\n    }\n}\n\npublic enum OrderStatus\n{\n    Future,\n    Active,\n    Completed\n};\n\npublic class OrderStatusModel\n{\n    public string StringStatus { get; set; }\n    public OrderStatus EnumStatus { get; set; }\n}\n\npublic class EnsureOrderStatus : ValidationAttribute, IClientValidatable\n{\n    private readonly string OrderIDPropertyName;\n\n    public EnsureOrderStatus(string orderIDPropertyName)\n    {\n        OrderIDPropertyName = orderIDPropertyName;\n    }\n\n    protected override ValidationResult IsValid (object value, ValidationContext validationContext)\n    {\n        ValidationResult validationResult = ValidationResult.Success;\n\n        var propertyTestedInfo = validationContext.ObjectType.GetProperty(OrderIDPropertyName);\n        if (propertyTestedInfo == null)\n        {\n            validationResult = new ValidationResult(string.Format(\"Unknown property {0}\", OrderIDPropertyName));\n        }\n        else\n        {\n            int orderID = (int)propertyTestedInfo.GetValue(validationContext.ObjectInstance, null);\n\n            OrderStatus orderStatus = (OrderStatus)value;\n\n            if (orderID == 0 &amp;&amp; orderStatus != OrderStatus.Future)\n            {\n                validationResult = new ValidationResult(string.Format(\"Order must have have an Order Status of Future when being created.\"));\n            }\n        }\n\n        return validationResult;\n    }\n\n    public IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n    {\n        var rule = new ModelClientValidationRule\n            {\n                ErrorMessage = ErrorMessage,\n                ValidationType = \"ensureorderstatus\"\n            };\n\n        rule.ValidationParameters[\"orderid\"] = OrderIDPropertyName;\n        yield return rule;\n    }\n}\n</code></pre>\n\n<p>I am building off <a href=\"http://stackoverflow.com/questions/12790777/mvc3-html-selectlist-always-see-initial-value-during-validation-even-if-select\">a question I asked yesterday</a></p>\n\n<p>Although the user is able to change DropDownList from 'Future' to 'Active' or 'Completed', when I get into EnsureOrderStatus after calling $('#FormID').valid() from client-side, all I ever see is 'Future'</p>\n\n<p>I believe this is an issue with how I am declaring my DropDownList mark-up. I thought that using a second model, OrderStatusModel, would help separate concerns and simplify the process of databinding to the DropDownList, but apparently I am still missing something.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","deployment","iis7"],"answer_count":1,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":59,"score":5,"question_id":12799420,"title":"MVC Deployment - Relative Path issue with respect to Application Path","body":"<p>While deploying my MVC Project, I have faced an issue of relative path w.r.t server.\nI am hosting the project as an application in IIS. Finally the url to my application will look like <code>http://localhost/portal/Account/Login</code> here 'portal' is the application name in IIS. In the ASP.net development server everything was working fine. while deploying it needed the relative path with respect to server. Because of this my jquery ajax requests started failing.\nTo fix this issue I kept the actions in hidden field and accessing from there and using for ajax request. The following is the code.</p>\n\n<pre><code> &lt;input type=\"hidden\" value=\"@Url.Action(\"GetNewOffersSearch\", \"Updates\")\" id=\"NewOffersSearchUrl\" /&gt;\n\nvar NewoffersUrl = document.getElementById(\"NewOffersSearchUrl\").value;\n\n\n $.ajax({\n            type: 'GET',\n            url: NewoffersUrl ,\n            cache: false,\n            timeout: 10000,\n            contentType: \"application/json; charset=utf-8\",\n            success: function (_results) {\n                $(\"#updatesContent\").html(_results);\n            },\n            error: function (_results) {\n\n            }\n        });\n</code></pre>\n\n<p>Initially NewoffersUrl was <code>\"/Updates/GetNewOffersSearch\"</code> and  it was throwing a path error. But now it is <code>\"/portal/Updates/GetNewOffersSearch\"</code> and its working fine</p>\n\n<p>I just want to know the approach I am following is correct or not. Is there any better fixes for this issue?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12802957,"title":"Look for MVC Views in other locations","body":"<p>I have three web projects on Asp.net MVC3:</p>\n\n<p>Portal.Web -> Common controllers and models</p>\n\n<p>Portal.WebsiteCustom -> Custom website 1</p>\n\n<p>Portal.WebsiteCustom2 -> Custom website 2</p>\n\n<p>Both custom sites uses the controllers and models of Portal.Web.</p>\n\n<p>Now i would like to add the common views on this project and set MVC to look on Portal.Web project for common views.</p>\n\n<p>Is this possible?</p>\n\n<p>How i could archieve this?</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","asp.net-mvc-3","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":3,"view_count":119,"score":0,"question_id":12802099,"title":"Convert string (with UTC) to DateTime","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12675421/datetime-parseexact-format-string\">DateTime.ParseExact format string</a>  </p>\n</blockquote>\n\n\n\n<p>How do I convert a string to a DateTime object?</p>\n\n<p>Example:</p>\n\n<blockquote>\n  <p>Sun Oct 07 2012 00:00:00 GMT+0500 (Pakistan Standard Time)</p>\n</blockquote>\n\n<p>I have tried, DateTime.Parse, Convert.TODateTime, etc. None work. I get an error that it is not a valid DateTime string.</p>\n\n<p>Here is how I am sending datetime to MVC controller's action method from jquery:</p>\n\n<pre><code>$.ajax({\n        url: '@Url.Action(\"actionMethodName\", \"controllerName\")',\n        type: \"GET\",\n        cache: false,\n        data: {\n               startDate: start.toLocaleString(),\n               endDate: end.toLocaleString()\n         },\n         success: function (data) {\n         }\n});\n</code></pre>\n\n<p>I need to be able to get the datetime back in the controller action method:</p>\n\n<pre><code>public JsonResult actionMethodName(string startDate, string endDate)\n{\n        if (!string.IsNullOrEmpty(startDate) &amp;&amp; !string.IsNullOrEmpty(endDate))\n        {\n            var start = DateTime.Parse(startDate); //Get exception here\n            var end = DateTime.Parse(endDate);     //Get exception here \n        }\n\n        //Rest of the code\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","export-to-csv"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":101,"score":1,"question_id":12795174,"title":"How do I export text data to csv using MVC 3?","body":"<p>I need to export text data to csv in MVC3.\nI do the following:</p>\n\n<p>VIEW:</p>\n\n<pre><code>$(\".export\").click(function() {\n    $.get(\"@Url.Action(\"Export\",\"Log\")\");\n});\n</code></pre>\n\n<p>CONTROLLER:</p>\n\n<pre><code>    public ActionResult Export()\n    {\n        var sb = new StringBuilder();\n\n        var list = this.systemLogRepository.GetFilterList(\n            null, this.ControllerContext.RequestContext.HttpContext.Request.QueryString, null);\n\n        foreach (var item in list)\n        {\n            sb.AppendFormat(\n                \"{0},{1},{2},{3},{4}\", item.Machine.Name, item.PackageID, item.ErrorDescription, item.OccurenceTime, Environment.NewLine);\n        }\n\n        return this.File(new UTF8Encoding().GetBytes(sb.ToString()), \"text/csv\", string.Format(\"Log-{0}.csv\", DateTime.Now.ToString(\"g\").Replace(\"/\",\"-\").Replace(\":\",\"_\").Replace(\" \", \"-\")));\n    }\n</code></pre>\n\n<p>This returns the content but does not pop up a window with Save As and Open options\n??\nthanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12793894,"title":"MVC 3 Pass multiple ints / collection via ajax to controller","body":"<p>On my form I have several hidden fields with the same name (RemoveId)</p>\n\n<pre><code>&lt;input type=\"hidden\" value=\"1\" name=\"RemoveId\" /&gt;\n&lt;input type=\"hidden\" value=\"2\" name=\"RemoveId\" /&gt;\n&lt;input type=\"hidden\" value=\"3\" name=\"RemoveId\" /&gt;\n&lt;input type=\"hidden\" value=\"4\" name=\"RemoveId\" /&gt;\n&lt;input type=\"hidden\" value=\"5\" name=\"RemoveId\" /&gt;\n</code></pre>\n\n<p>I would like to pass checked items (int(s)) to a controller via ajax/json</p>\n\n<p>How would i do it?\nthanks</p>\n"},{"tags":["asp.net-mvc-3","razor","partial-views","ascx"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1228,"score":3,"question_id":6538869,"title":"MVC3 Razor: Is it Possible to Render a Legacy ASCX?","body":"<p>With the Razor view engine in MVC3,</p>\n\n<blockquote>\n  <p>Is it possible to render a legacy ascx?</p>\n</blockquote>\n\n<hr>\n\n<p>I was expecting to be able to do something like:</p>\n\n<pre><code>@Html.RenderPartial(\"Footer.ascx\")\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc-3","asynchronous"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12794280,"title":"Asynchronously swap section of html in ASP.Net MVC 3?","body":"<p>In ASP.Net MVC 3 I have a Controller and View with a portion of the view's html in a <code>&lt;div&gt;</code> whose text I would like to swap out, depending on some action-- a button press, for instance.</p>\n\n<p>Assuming my view has two <code>&lt;div&gt;s,</code> the top being the part I'd like to swap out based on an input element in the lower <code>&lt;div&gt;</code> being selected, what is a good way to asynchronously do this?  jQuery and ajax are welcome for the task though not required.</p>\n\n<p>[edit] I should have mentioned originally, I'd like to render the content of the asynchronous  by calling a partial view or something similar.  Unfortunately I'm a little new to that and was hoping for quick guidance on how (if?) to call a partial view using ajax or other such techniques.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":532,"score":4,"question_id":8989749,"title":"Timeout not working in ASP.Net MVC FormsAuthentication","body":"<p>I'm using FormsAuthentication, I'm having problems setting the TimeOut value. </p>\n\n<p>I've seen some other posts related to this, but they don't seem to be exactly my problem or the solution suggested doesn't help.</p>\n\n<p>My web.config has the following:</p>\n\n<pre><code>&lt;authentication mode=\"Forms\"&gt;\n  &lt;forms loginUrl=\"~/Account/LogOn\"\n         timeout=\"1\"\n         cookieless=\"UseCookies\" /&gt;\n&lt;/authentication&gt;\n</code></pre>\n\n<p>I have put an AuthorizeAttribute on the controllers that I want to secure.</p>\n\n<p>I can view the .ASPXAUTH cookie (using FireCookies) and I can see that it is set to expire in 1 minute after a login.</p>\n\n<p>If I debug through my code I can see that FormsAuthentication.Timeout = 1.</p>\n\n<p>However my ticket doesn't seem to timeout in 1 minute. After 1 minute of inactivity I can still browse to controllers with AuthorizeAttribute.</p>\n\n<p>In fact I can actually delete the .ASPXAUTH cookie using FireCookies and I can still browse to controllers with an AuthorizeAttribute.</p>\n\n<p>Bizarrely after being inactive for a long time (sorry don't have an exact time - I was out for lunch!) the TimeOut occurs and I am redirected \nto the login screen.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["asp.net-mvc-3","visual-studio-2010"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12799074,"title":"Visual Studio automatically deleting file on start up","body":"<p>Yesterday I edited the Global.asax.cs file of an MVC project in Visual Studio 2010 and this morning when I opened Visual Studio the file was gone. Visual Studio had deleted the file on disk including my local changes.</p>\n\n<p>I restored the file from source control and restarted Visual Studio and it again deleted the file on start up. The file appears in Solution Explorer initially while VS is initialising, and after about 5 seconds it disappears... VS deletes it from the disk. Source control shows it as missing.</p>\n\n<p>I can reproduce this again and again.</p>\n\n<p>Things I've tried:\n- Repairing VS.\n- Disabling ReSharper.\n- Restarting my machine.\n- Fresh source control checkout.\n- Opening a different MVC project to see if the same thing happens there. It doesn't.</p>\n\n<p>Anyone have any further ideas? Much abliged.</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc","asp.net-mvc-3"],"answer_count":5,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":114,"score":4,"question_id":12798288,"title":"Dont we need DAL Layer In MVC3 architecture?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3679263/where-to-write-database-and-business-logic-in-mvc\">Where to write Database and Business logic in MVC?</a>  </p>\n</blockquote>\n\n\n\n<p>I have just started with MVC3 pattern. How do we do data access in MVC3? Do we make the 'MODEL' as Data Access Layer or Do we add another 'DAL' layer and call it from 'MODEL' Layer?</p>\n"},{"tags":["c#","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12798135,"title":"How to used Goto statement in MVC3 razor view page?","body":"<p>i am Develop MVC3 razor Web application. View page i am try to used goto statement but do not work. How to write or syntax of goto statement in view page or .chtml file please help me.\nthank you for advance.</p>\n"},{"tags":["asp.net-mvc-3","mvc"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12796940,"title":"How to make a pdf report of a particular view in mvc3","body":"<p>I wanted to get all student information in tabular format so i created appropriate view. Now can i make a pdf report of that view(By passing that view to any action)  which will look exactly as view is looking???</p>\n"},{"tags":["json","asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":12797343,"title":"showing data from JSON to table in MVC3","body":"<p>I have a table in my .aspx view in MVC3 project.\nI am using .aspx views in MVC3 instead of Razor engine or .cshtml views.\nI have the underwritten function in my jquery that gets me a JSON object from controller with some values in it.</p>\n\n<pre><code>function GetUsers() {\n    $.ajax({\n        url: ('/Home/GetUsers'),\n        type: 'POST',\n        contentType: 'application/json',\n        data: JSON.stringify(),\n\n        success: function (result) {\n            alert(result.length);\n            var partnersTable = $('#PartnersTable');\n            partnersTable.html();\n\n        },\n        error: function () { alert(\"error\"); }\n    });\n}\n</code></pre>\n\n<p>Now I have a table in my view </p>\n\n<pre><code>&lt;div id = \"topGrid\"&gt;\n    &lt;table id=\"PartnersTable\" style=\"float: left; width: 49%\"&gt;\n        &lt;th style=\"width: 75%\"&gt;Partner&lt;/th&gt;\n        &lt;th style=\"width:25%\"&gt;Users&lt;/th&gt;\n    &lt;/table&gt;\n</code></pre>\n\n<p>This is how I am getting the JSON object. right now its just dummy data but willb e populaed from DB later</p>\n\n<pre><code>public JsonResult GetUsers()\n        {\n            var model = new List&lt;UsersModel&gt;();\n            var item = new UsersModel();\n            for (int i = 1; i &lt;= 10; i++)\n            {\n                item.Partner = \"Partner\" + Convert.ToString(i);\n                item.Count = i;\n                model.Add(item);\n            }\n            return Json(model, JsonRequestBehavior.AllowGet);\n        }\n</code></pre>\n\n<p>I need to show the data from above JSON object in my table. \nhow can I achieve this?</p>\n\n<p>I am utterly new to MVC3 so please let me know if I have missed anything that is required to answer this question and please be as detailed as you can.</p>\n"},{"tags":["asp.net-mvc-3","forms-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12797710,"title":"Checking username & password using form authentication in mvc?","body":"<p>I'm trying to write a method that authenticate a user in the web apps. Here is the code:</p>\n\n<pre><code>public void SignIn(UserInfo Entity)\n    {\n        if(this.CheckUser(Entity.UserName, Entity.Password))\n\n        {\n            FormsAuthentication.RedirectFromLoginPage(Entity.UserName, false);\n        }\n        else\n        {\n\n        }\n    }\n\n    public bool CheckUser(String _UserName, string _Password)\n    {\n        using (var context = new TourBlogEntities1())\n        {\n            List&lt;UserInfo&gt; test = null;\n            test = (from s in context.UserInfoes\n                       where s.UserName == _UserName &amp;&amp; s.Password == _Password\n                       select s).ToList&lt;UserInfo&gt;();\n\n            if(test==null)\n            {\n                return false;\n            }\n            else\n            {\n                return true;\n            }\n\n        }\n\n    }\n</code></pre>\n\n<p>The problem is I can sign in with any username &amp; password, which are not actually registered. What I have done wrong? Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12796873,"title":"Adding strictness to @{Html.RenderAction(\"Controller\", \"Action\");}. Does it require a lot of extension methods because of method overloads?","body":"<p>I am trying to change</p>\n\n<pre><code>@{Html.RenderAction(\"Foo\", \"TheAction\");}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>@{Html.RenderAction((FooController c) =&gt; c.TheAction );}\n</code></pre>\n\n<p>which is nicer in a lot of ways, it improves:</p>\n\n<ul>\n<li>F12-navigation</li>\n<li>Type usage detection (resharper etc)</li>\n<li>Method usage detection</li>\n<li>Strictness</li>\n<li>...the possibility to keep dead links away from the project</li>\n</ul>\n\n<p>...so I have written an extension class like this:</p>\n\n<pre><code>using System;\nusing System.Linq.Expressions;\nusing System.Reflection;\nusing System.Text.RegularExpressions;\nusing System.Web.Mvc;\nusing System.Web.Mvc.Html;\n\nnamespace V3NET.MVC.Extensions\n{\n    public static class HtmlHelperExtension\n    {\n        public static void RenderAction&lt;T&gt;\n            (this HtmlHelper helper, Expression&lt;Func&lt;T, Func&lt;int, int?, ActionResult&gt;&gt;&gt; action)\n        {\n            var actionName =\n                (\n                    (MethodInfo)\n                    (\n                        (ConstantExpression)\n                        (\n                            (MethodCallExpression)\n                            (\n                                ((UnaryExpression)action.Body).Operand\n                            )\n                        ).Object\n                    ).Value\n               ).Name;\n\n            var controllerType = action.Parameters[0].Type;\n            var controllerName = new Regex(\"Controller$\").Replace(controllerType.Name, \"\");\n\n            helper.RenderAction(actionName, controllerName);\n        }\n    }\n}\n</code></pre>\n\n<p>...but as you can see, I have to write it specific for an action taking int, int? as arguments.</p>\n\n<p>How do I express this more generally so I dont have to write a zillion of overloads?</p>\n"},{"tags":["c#","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12793537,"title":"Why do I get a variable scope error (CS0136) in a Html.HiddenFor?","body":"<p>Here is a stripped-down code snippet from a MVC3/Razor view file:</p>\n\n<pre><code>@foreach (var item in Model.Stuff.Items){\n&lt;tr&gt;\n  &lt;td&gt;@item.Title&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n  &lt;td&gt;\n    @using (Html.BeginForm()) {\n        @item.Title\n        @Html.HiddenFor(item =&gt; item.Title)\n    }\n  &lt;/td&gt;\n&lt;/tr&gt;\n}  @* End of Items foreach loop *@\n</code></pre>\n\n<p>The title shows on the first row.\nIt also shows inside the form. But trying to use it in the <code>HiddenFor</code> I get error <a href=\"http://msdn.microsoft.com/en-us/library/973aa6bt%28v=vs.80%29.aspx\" rel=\"nofollow\">CS0136</a>: <em>A local variable named 'item' cannot be declared in this scope because it would give a different meaning to 'item', which is already used in a 'parent or current/child' scope to denote something else</em></p>\n\n<p>I don't get why that would be the case; in <code>item =&gt; item.Title</code> the first \"item\" is effectively just a parameter name in an anonymous function, isn't it?</p>\n\n<p>When I change it to: <code>@Html.HiddenFor(s =&gt; s.Title)</code> I get error CS1963, <em>An expression tree may not contain a dynamic operation.</em></p>\n\n<p>Background: the intention is to have two table rows per entry in Model.Stuff.Items, the first giving current information as static HTML, the second an edit form for it. (One or the other will be hidden at any time using javascript.) The form will submit to another action on this controller. All the forms submit to the same URL; the hidden values will identify which row is being updated.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","configuration","web-config","custom-errors"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12796423,"title":"Setting CustomErrors to On in Web.Config crashes site","body":"<p>I have an ASP.NET MVC3 site where CustomErrors are set to Off in Web.config. Naturally, I want to set it to on. However, when setting it to on:</p>\n\n<pre><code>&lt;customErrors mode=\"On\" defaultRedirect=\"~/Error.aspx\" /&gt;\n</code></pre>\n\n<p>accessing the site gives the error-page promptly.</p>\n\n<p>Having it to Off doesn't give an error, and the site functions perfectly. Is there a silent error, that customErrors catches, but I don't see? Does it have something to do with me using session-variables?</p>\n\n<p>This happens when deployed to IIS, but not in my dev-environment.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12796188,"title":"How to display a DropDownList in a Edit View with selected a value from a DataBase","body":"<p>I use MVC 3 in ASP.Net my web app is design with ViewModel and <a href=\"http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx\" rel=\"nofollow\">ViewModel builder</a>.</p>\n\n<p>I use a Builder class to populate some data in a ViewModel. In my case I have a Create View a DropDownList, with this code work fine. My problem is when trying to create an Edit View, I receive this error:</p>\n\n<pre><code>   {\"The ViewData item that has the key 'CandidateId' is of type 'System.Int32' but must be of type 'IEnumerable&lt;SelectListItem&gt;'.\"}\n</code></pre>\n\n<p>My idea it would be to populate a DropDownList with some value but have pre-selected one as for databse record.</p>\n\n<p>So How to display a DropDownList in a Edit View with selected a value from a DataBase?</p>\n\n<p>VIEW</p>\n\n<pre><code>    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.CandidateId)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.DropDownListFor(x =&gt; x.CandidateId, Model.CandidatesList, \"None\")\n    &lt;/div&gt;\n</code></pre>\n\n<p>VIEW MODEL</p>\n\n<pre><code>    public Nullable&lt;int&gt; CandidateId { get; set; }\n    public IEnumerable&lt;SelectListItem&gt; CandidatesList;\n</code></pre>\n\n<p>VIEW MODEL BUILDER</p>\n\n<pre><code>// We are creating the SelectListItem to be added to the ViewModel\n        eventEditVM.CandidatesList = serviceCandidate.GetCandidates().Select(x =&gt; new SelectListItem\n            {\n                Text = x.Nominative,\n                Value = x.CandidateId.ToString()\n            });\n</code></pre>\n"},{"tags":["asp.net-mvc-3","linq","list"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12795989,"title":"How to show a particular post for the logged in user in a simple blog site?","body":"<p>The scenario is, I have simple Post table with just title &amp; story. after posting a new post I want to show the post using my view page.I have write the method to display the post as follows: </p>\n\n<pre><code>  \\\\Post is the class name &amp; item is the obj to bind it from the view form.\npublic List&lt;Post&gt; ViewPost(Post item)\n    {\n        using(var context=new TourBlogEntities1())\n        {\n            var post= from s in context.Posts\n                      where s.PostID=item.PostID //showing error here.\n                      select s;\n\n            return post.ToList&lt;Post&gt;();\n        }\n    }\n</code></pre>\n\n<p>I'm getting an error saying 'can't convert the lambada expression to type string because its not a delegate type'.</p>\n\n<p>Whats need to be done? some more information would also be helpfull, like I have a field name userid in post table, which I want to fill automatically by using the logging info. How can I do that?  Thanks.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12795969,"title":"how to send email to multiple users based on checkbox selected values in MVC3","body":"<p>I have table with check box :</p>\n\n<pre><code>&lt;table&gt;\n    &lt;tr&gt;\n        &lt;th&gt;            \n            &lt;input type=\"checkbox\"/&gt;\n        &lt;/th&gt;\n        &lt;th&gt;\n            FirstName\n        &lt;/th&gt;\n        &lt;th&gt;\n            EmailId\n        &lt;/th&gt;\n\n    &lt;/tr&gt;   \n&lt;% foreach (var item in Model)\n   { %&gt;\n    &lt;tr&gt;\n        &lt;td&gt;            \n            &lt;input type=\"checkbox\" name=\"check\" value=\"&lt;%: item.ProfileId %&gt;\" /&gt; \n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;%: Html.DisplayFor(modelItem =&gt; item.FirstName)%&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;%: Html.DisplayFor(modelItem =&gt; item.EmailId)%&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;%}%&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>another action link as</p>\n\n<pre><code>[HttpGet]\n        public ActionResult ChkBxSendMail(int[] check)\n        {\n            return View();\n        }\n\n        [HttpPost]\n        public ActionResult ChkBxSendMail(int[] check, Profile profile, mail email)\n        {\n            foreach (var item in check)\n            {\n                var dbprofile = db.Profile.Single(p =&gt; p.ProfileId == item);\n                string Emailid = dbprofile.EmailId;\n\n                //var mailid = from p in db.Profile where p.ProfileId == id select p.EmailId;\n\n                MailMessage msg = new MailMessage();\n                MailAddress fromAddress = new MailAddress(\"\");\n                msg.From = fromAddress;\n                msg.To.Add(Emailid);\n                msg.Subject = email.Subject;\n                msg.Body = email.Body;\n                msg.Priority = MailPriority.High;\n\n                SmtpClient client = new SmtpClient(\"smtp.gmail.com\", 587);\n                client.EnableSsl = true;\n                client.DeliveryMethod = SmtpDeliveryMethod.Network;\n                client.Credentials = new NetworkCredential(\"\", \"\");\n                client.Send(msg);\n            }\n            return RedirectToAction(\"Profiles\", \"profile\");\n        }\n</code></pre>\n\n<p>And this action has a view code as</p>\n\n<pre><code> &lt;% using (Html.BeginForm()) { %&gt;\n        &lt;%: Html.ValidationSummary(true) %&gt;\n        &lt;fieldset&gt;\n            &lt;legend&gt;mail&lt;/legend&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                &lt;%: Html.LabelFor(model =&gt; model.Subject) %&gt;\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                &lt;%: Html.EditorFor(model =&gt; model.Subject) %&gt;\n                &lt;%: Html.ValidationMessageFor(model =&gt; model.Subject) %&gt;\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                &lt;%: Html.LabelFor(model =&gt; model.Body) %&gt;\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                &lt;%: Html.EditorFor(model =&gt; model.Body) %&gt;\n                &lt;%: Html.ValidationMessageFor(model =&gt; model.Body) %&gt;\n            &lt;/div&gt;\n\n            &lt;p&gt;\n                &lt;input type=\"submit\" value=\"Send\" /&gt;\n            &lt;/p&gt;\n        &lt;/fieldset&gt;\n    &lt;% } %&gt;\n</code></pre>\n\n<p><strong>Problem</strong></p>\n\n<p>Here i have problem that\n when i select the check boxes, the selected records should be passed to the action ChkBxSendMail. But am unable to retrive those values. </p>\n"},{"tags":["asp.net-mvc-3","jquery-ajax"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":121,"score":0,"question_id":12707697,"title":"ASP.NET MVC3: Ajax postback doesnot post complete data from the view","body":"<p>Hi Greetings for the day!</p>\n\n<h3>(1) The view model <i>(MyViewModel.cs)</i> which is bound to the view is as below...</h3>\n\n<pre><code>public class MyViewModel\n{    \n   public int ParentId { get; set; }  //property1       \n   List&lt;Item&gt; ItemList {get; set;}   //property2\n\n   public MyViewModel()   //Constructor\n   {\n     ItemList=new List&lt;Item&gt;();  //creating an empty list of items\n   }\n}\n</code></pre>\n\n<h3>(2) I am calling an action method through ajax postback <i>(from MyView.cshtml view)</i> as below..</h3>\n\n<pre><code>function AddItem() {\n    var form = $('#MyForm');\n    var serializedform = form.serialize();\n    $.ajax({\n        type: 'POST',\n        url: '@Url.Content(\"~/MyArea/MyController/AddItem\")',\n        cache: false,\n        data: serializedform,\n        success: function (html) {$('#MyForm').html(html);}\n    });\n}\n</code></pre>\n\n<p><strong>The below button click will call the ajax postback...</strong></p>\n\n<pre><code>&lt;input type=\"button\" value=\"Add\" class=\"Previousbtn\" onclick=\"AddItem()\" /&gt;\n</code></pre>\n\n<h3>(3) I have an action method in the <i>(MyController.cs controller)</i> as below...</h3>\n\n<pre><code>public ActionResult AddItem(MyViewModel ViewModel)\n{\n   ViewModel.ItemList.Add(new Item());\n   return View(\"MyView\", ViewModel);\n}\n</code></pre>\n\n<p><strong>Now the issue is, after returning from the action, there is no data in the viewmodel. But i am able to get the data on third postback !! Can you pls suggest the solution..</strong></p>\n\n<blockquote>\n  <p>The complete form code in the view is below...</p>\n</blockquote>\n\n<pre><code>    @model MyViewModel\n\n    &lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n        function AddItem() {\n            var form = $('#MyForm');\n            var serializedform = form.serialize();\n            $.ajax({\n                type: 'POST',\n                url: '@Url.Content(\"~/MyArea/MyController/AddItem\")',\n                cache: false,\n                data: serializedform,\n                success: function (html) {\n                    $('#MyForm').html(html);\n                }\n            });\n        }\n\n        function RemoveItem() {\n            var form = $('#MyForm');\n            var serializedform = form.serialize();\n            $.ajax({\n                type: 'POST',\n                url: '@Url.Content(\"~/MyArea/MyController/RemoveItem\")',\n                cache: false,\n                data: serializedform,\n                success: function (html) {\n                    $('#MyForm').html(html);\n                }\n            });\n        }\n\n     function SaveItems() {    \n        var form = $('#MyForm');\n        var serializedform = forModel.serialize();\n        $.ajax({\n            type: 'POST',\n            url: '@Url.Content(\"~/MyArea/MyController/SaveItems\")',\n            cache: false,\n            data: serializedform,\n            success: function (html) {\n                $('#MyForm').html(html);\n            }\n        });\n    }\n\n    &lt;/script&gt;\n    @using (Html.BeginForm(\"SaveItems\", \"MyController\", FormMethod.Post, new { id = \"MyForm\" }))\n    {    \n        @Html.HiddenFor(m =&gt; Model.ParentId)\n        &lt;div&gt;\n             &lt;input type=\"button\" value=\"Save\" onclick=\"SaveItems()\" /&gt;\n        &lt;/div&gt;\n        &lt;div&gt;\n            &lt;table&gt;\n                &lt;tr&gt;\n                    &lt;td style=\"width: 48%;\"&gt;\n                        &lt;div style=\"height: 500px; width: 100%; overflow: auto\"&gt;\n                            &lt;table&gt;\n                                &lt;thead&gt;\n                                    &lt;tr&gt;\n                                        &lt;th style=\"width: 80%;\"&gt;\n                                            Item\n                                        &lt;/th&gt;\n                                        &lt;th style=\"width: 10%\"&gt;\n                                            Select\n                                        &lt;/th&gt;\n                                    &lt;/tr&gt;\n                                &lt;/thead&gt;\n                                @for (int i = 0; i &lt; Model.ItemList.Count; i++)\n                                {\n                                    @Html.HiddenFor(m =&gt; Model.ItemList[i].ItemId)                                \n                                    @Html.HiddenFor(m =&gt; Model.ItemList[i].ItemName)                                \n                                    &lt;tr&gt;\n                                        @if (Model.ItemList[i].ItemId &gt; 0)\n                                        {\n\n                                            &lt;td style=\"width: 80%; background-color:gray;\"&gt;\n                                                @Html.DisplayFor(m =&gt; Model.ItemList[i].ItemName)\n                                            &lt;/td&gt;\n                                            &lt;td style=\"width: 10%; background-color:gray;\"&gt;\n                                                &lt;img src=\"@Url.Content(\"~/Images/tick.png\")\" alt=\"Added\"/&gt;\n                                                @Html.HiddenFor(m =&gt; Model.ItemList[i].IsSelected)\n                                            &lt;/td&gt;\n                                        }\n                                        else\n                                        {                            \n                                            &lt;td style=\"width: 80%;\"&gt;\n                                                @Html.DisplayFor(m =&gt; Model.ItemList[i].ItemName)\n                                            &lt;/td&gt;\n                                            &lt;td style=\"width: 10%\"&gt;\n                                                @if ((Model.ItemList[i].IsSelected != null) &amp;&amp; (Model.ItemList[i].IsSelected != false))\n                                                {\n                                                    &lt;img src=\"@Url.Content(\"~/Images/tick.png\")\" alt=\"Added\"/&gt;                                            \n                                                }\n                                                else\n                                                {\n                                                    @Html.CheckBoxFor(m =&gt; Model.ItemList[i].IsSelected, new { @style = \"cursor:pointer\" })\n                                                }\n                                            &lt;/td&gt;\n                                        }\n                                    &lt;/tr&gt;\n                                }\n                            &lt;/table&gt;\n                        &lt;/div&gt;\n                    &lt;/td&gt;\n                    &lt;td style=\"width: 4%; vertical-align: middle\"&gt;\n                        &lt;input type=\"button\" value=\"Add\" onclick=\"AddItem()\" /&gt;\n                        &lt;input type=\"button\" value=\"Remove\" onclick=\"RemoveItem()\" /&gt;\n                    &lt;/td&gt;                \n                &lt;/tr&gt;\n            &lt;/table&gt;\n        &lt;/div&gt;    \n    }\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":78,"score":-1,"question_id":12794131,"title":"MVC3 create multiple tables on .aspx view","body":"<p>I have a situation where in I need to show a bunch of tables on a .aspx view in MVC3 project. </p>\n\n<p>I have to use only tables and no grids \nPlease help </p>\n\n<p>EDIT: \nSo here'e the situation\nI have a .aspx view in my MVC3 project. \non that I need to show data coming from various tables in databae. \ndata from each table will be shown in a different table on the screen </p>\n\n<p>say for example</p>\n\n<pre><code>&lt;table for data from table1&gt; &lt;table for data from table2&gt;\n&lt;table for data from table3&gt; \n&lt;table for data from table4&gt;\n</code></pre>\n\n<p>I can not use grids to display data \nonly thing i need to use is <code>&lt;table&gt;&lt;/table&gt;</code> with div and span</p>\n\n<p>Also I need to show the data using JSON object and not using the model.\nI need to keep the page as light as possible</p>\n\n<p>Hope I make my self clear this time.</p>\n"},{"tags":["asp.net-mvc-3","validation","mvc-editor-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":117,"score":0,"question_id":12791361,"title":"MVC3 Master-Details Validation not Displaying","body":"<p>I have an MVC3 page with an object (Header) that has data and a list of objects (Details) that I want to update on a single page.  On the details object I have custom validation (IValidatableObject) that also needs to run.</p>\n\n<p>This appears to generally be working as expected, validations are running and returning ValidationResults and if I put an @Html.ValidationSummary(false); on the page it displays those validations.  However I don't want a list of validations at the top, but rather next to the item being validated i.e. Html.ValidationMessageFor which is on the page, but not displaying the relevant message.  Is there something I'm missing?  This is working on other pages (that don't have this Master-Details situation), so i'm thinking it is something about how I'm going about setting up the list of items to be updated or the editor template for the item?</p>\n\n<p>Edit.cshtml (the Header-Details edit view)</p>\n\n<pre><code>@foreach (var d in Model.Details.OrderBy(d =&gt; d.DetailId))\n{\n   @Html.EditorFor(item =&gt; d, \"Detail\")\n}\n</code></pre>\n\n<p>Detail.ascx (the Details Editor Template)</p>\n\n<pre><code>&lt;%@ Control Language=\"C#\" Inherits=\"System.Web.Mvc.ViewUserControl&lt;Detail&gt;\" %&gt;\n\n&lt;tr&gt;            \n    &lt;td&gt;\n        &lt;%= Model.Name %&gt;\n        &lt;%= Html.HiddenFor(model =&gt; model.DetailId) %&gt;\n    &lt;/td&gt;\n    &lt;td class=\"colDescription\"&gt;\n        &lt;%= Html.EditorFor(model =&gt; model.Description) %&gt;\n        &lt;%= Html.ValidationMessageFor(model =&gt; model.Description) %&gt;\n    &lt;/td&gt;\n    &lt;td class=\"colAmount\"&gt;\n        &lt;%= Html.EditorFor(model =&gt; model.Amount) %&gt;\n        &lt;%= Html.ValidationMessageFor(model =&gt; model.Amount) %&gt;\n    &lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>Model is Entity Framework with Header that has Name and HeaderId and Detail has DetailId, HeaderId, Description and Amount</p>\n\n<p>Controller Code:</p>\n\n<pre><code>public ActionResult Edit(Header header, FormCollection formCollection)\n{\n   if (formCollection[\"saveButton\"] != null)\n   {\n      header = this.ProcessFormCollectionHeader(header, formCollection);\n      if (ModelState.IsValid)\n      {\n         return new RedirectResult(\"~/saveNotification\");\n      }\n      else\n      {\n         return View(\"Edit\", header);\n      }\n   }\n   else\n   {\n      return View(\"Edit\", header);\n   }\n}\n</code></pre>\n\n<p>[I know controller code can be cleaned up a bit, just at this state as a result of trying to determine what is occuring here]</p>\n\n<p>IValidatableObject implementation:</p>\n\n<pre><code>public IEnumerable&lt;ValidationResult&gt; Validate(ValidationContext validationContext)\n{\n   if (this.Name.Length &lt; 5) &amp;&amp; (this.Amount &gt; 10))\n   {\n      yield return new ValidationResult(\"Item must have sensible name to have Amount larger than 10.\", new[] { \"Amount\" });\n   }\n}\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":157,"score":-3,"question_id":12794470,"title":"How to create an admin panel in Asp.net mvc4","body":"<p>Please help me in making a admin panel in MVC4.\n   can anyone supply me with the stepwise coding if i want to create it from scratch..\n   Thanks in Advance..</p>\n\n<p>This is my basic model what next???</p>\n\n<pre><code>public class userlogon\n{\n    [Required]\n    [Display(Name = \"Admin Login\")]\n    public string UserName { get; set; }\n\n    [Required]\n    [DataType(DataType.Password)]\n    [Display(Name = \"Password\")]\n    public string Password { get; set; }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","date-format"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":139,"score":0,"question_id":7951023,"title":"Binding list of Dates using specific culture in asp.net mvc 3 fails","body":"<p>i have this scenario where i need to accept three meeting schedules , below are the details </p>\n\n<p>meeting Schedule model</p>\n\n<pre><code>public class MeetingSchedule\n{\n    public DateTime Date { get; set; }\n\n}\n</code></pre>\n\n<p>Form looks like</p>\n\n<pre><code>&lt;form action=\"@Url.Action(\"Schedule\")\" method=\"post\" &gt;\n    &lt;input type=\"text\" name=\"meetingSchedules[1].Date\" id=\"schedule2\" class=\"datepicker\" /&gt;\n    &lt;input type=\"text\" name=\"meetingSchedules[2].Date\" id=\"schedule3\" class=\"datepicker\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>and Action</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Schedule(List&lt;MeetingSchedule&gt; meetingSchedules)\n    {}\n</code></pre>\n\n<p>i set the culture</p>\n\n<pre><code>&lt;system.web&gt;    \n    &lt;globalization uiCulture=\"en-GB\" culture=\"en-GB\" /&gt;\n&lt;/system.web&gt;\n</code></pre>\n\n<p>Still could not  bind Date of format \"dd/MM/yyyy\", ex: if i choose any one date as 26/10/2011 , the model binder could not bind it , instead show default DateTime Value.</p>\n\n<p>Please help me with this</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc-3","unit-testing","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":144,"score":2,"question_id":12792378,"title":"System.ArgumentNullException: Value cannot be null","body":"<p>I'm creating a Unit Test for my CRUD and receiving this kind of error in my Delete test method: </p>\n\n<pre><code>System.ArgumentNullException: Value cannot be null.\n</code></pre>\n\n<p>I checked and found out that whenever I'm running the test, the contents under my userID was already deleted but receiving a \"Failed\" status in my Test Results bar. Can anyone help me resolve my issue?</p>\n\n<pre><code>Error Message: Test method TestProject1.UserTest.Delete threw exception: \nSystem.ArgumentNullException: Value cannot be null.\nParameter name: entity\n</code></pre>\n\n<p>Here's my code:</p>\n\n<pre><code>[TestMethod]\npublic void Delete()\n{\ntaskModelContainer db = new taskModelContainer();\n\nint userID = 7;\n\nTaskMgr.Models.User UserEntity = new TaskMgr.Models.User();\n\nUserEntity.userID = userID;\n\nUserController User = new UserController();\n\nActionResult result = User.DeleteConfirmed(UserEntity.userID);\nint id = Convert.ToInt32(User.ViewBag.id);\nUser Users = db.Users.Single(e =&gt; e.userID == id);\n\n\nAssert.IsNull(Users.userID);\n\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>[HttpPost, ActionName(\"Delete\")]\n    public ActionResult DeleteConfirmed(int id)\n    {\n        User user = db.Users.Find(id);\n        db.Users.Remove(user);\n        db.SaveChanges();\n        var qry = from e in db.Users orderby e.userID descending select e.userID;\n        int eID = qry.First();\n        ViewBag.id = user.userID;\n        return RedirectToAction(\"Index\");\n    }\n</code></pre>\n\n<p>It stops at this line of the controller: db.Users.Remove(user);</p>\n"},{"tags":["asp.net","asp.net-mvc-3","razor","chosen"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":274,"score":0,"question_id":11048677,"title":"Default Text not displayed in Chosen (JQuery) DropDownList","body":"<p>I'm using <a href=\"http://harvesthq.github.com/chosen/\" rel=\"nofollow\">Chosen</a> JQuery Plugin for a ASP.NET MVC (Razor) Project. For a Dropdownlist it does not display the Default Text value set by <code>data_placeholder</code>, instead it displays the First Item of the list.</p>\n\n<pre><code>&lt;div class=\"editor-field\"&gt;\n    @Html.DropDownList(\"AuthorId\", (IEnumerable&lt;SelectListItem&gt;)ViewBag.AuthorId, new\n    {\n        @class = \"chzn-dropdown\",\n        data_placeholder = \"Select Author...\",\n        style = \"width:270px;\"\n    })\n    @Html.ValidationMessageFor(model =&gt; model.Author)\n&lt;/div&gt;\n</code></pre>\n\n<p>How to display the default Text for the Dropdown list?</p>\n"},{"tags":["html","css","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12793256,"title":"Disabling maxlength validation in asp.net mvc3","body":"<p>My application is based on asp.net mvc3. I have a text box which takes an amount and has a maxlength 7 chars (max amount user can enter is 1000000). on blur of the text box i am formatting the amount to currency form. so if the user enters 1000000 it will be formatted to $ 1,00,00,00. So formatting makes the input length to 12. When i submit the form i get validation error on this control telling \"it is more than 7 chars.\".</p>\n\n<p>I tried with writing a custom validation attribute MaxValueAttribute which will limit the maximum value that user can enter to 1000000. the problem with the attribute is that it is not disabling user input (as when we user maxlength attribute on text box) after he enters 7 chars.</p>\n\n<p>Is there any way i can skip the maxlength validation.</p>\n\n<p>Edit 1: Here is the MaximumValueAttribute </p>\n\n<pre><code> public class MaximumValueAttribute : ValidationAttribute, IClientValidatable\n {\n    private double MaximumValue { get; set; }\n\n    public MaximumValueAttribute(double maxValue)\n    {\n        MaximumValue = maxValue;           \n    }\n\n    protected override ValidationResult IsValid(object value, ValidationContext validationContext)\n    {            \n        if ((double)value &lt;= MaximumValue)\n            return null;\n\n        return new ValidationResult(base.ErrorMessageString);\n    }\n\n    public IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n    {\n        var rule = new ModelClientValidationRule\n        {\n            ErrorMessage = base.ErrorMessageString,\n            ValidationType = \"maximumamount\",\n        };\n\n        rule.ValidationParameters[\"maximumvalue\"] = MaximumValue;\n\n        yield return rule;\n    }\n }\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":168,"score":0,"question_id":10171464,"title":"ASP.NET MVC - Having a confirmation button with a Form","body":"<p>I have an strongly typed view for my model and what I'd like is that when the user clicks on submit, a confirmation box pop up confirming that the user does indeed wish to submit the form, if they click cancel then it shouldn't fire the <code>HttpPost</code> Action for that View, is this possible?</p>\n"},{"tags":["asp.net-mvc-3","ado.net","model","html.dropdownlistfor","html.dropdownlist"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12791498,"title":"MVC trying to populate my dropdownlist from my repository using ADO.net only","body":"<p>I need help on writing this. I am very new to MVC(2 weeks). I cant use EF, just plain ADO.net. \nI just need it to return a SelectList so I could populate a dropdownlist.</p>\n\n<pre><code>public List&lt;System.Web.Mvc.SelectListItem&gt; GetGenderList()\n        {\n            SqlConnection con = new SqlConnection(connectionString);\n            SqlCommand cmd = new SqlCommand(\"GetGenders\", con);\n            cmd.CommandType = CommandType.StoredProcedure;\n            List&lt;Dog&gt; dogGender = new List&lt;Dog&gt;();\n            try\n            {\n\n                con.Open();\n                SqlDataReader reader = cmd.ExecuteReader();\n\n                while (reader.Read())\n                {\n                    Dog dog = new Dog()\n                    {\n                        Gender = (string)reader[\"Gender\"]\n\n                    };\n\n                    dogGender.Add(dog);\n                }\n\n                return dogGender\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":12789481,"title":"MVC 3 EditorFor lists while specifying a template","body":"<p>I am late to the game. i am struggling with EditorFor. </p>\n\n<p>Instead of using the template to display the name of the entity in a textbox, the name is written to screen. It appears to be writing the first property of the object as in my real project a guid is being written.</p>\n\n<p>How can I use the editorfor while specifying the template?</p>\n\n<p><strong>Home Controller</strong></p>\n\n<pre><code>public ActionResult Index()\n    {\n            HomeModel homeModel = new HomeModel();\n            homeModel.RoomModels = new List&lt;RoomModel&gt;();\n            homeModel.RoomModels.Add(new RoomModel() { RoomName = \"Room-1\" });\n            homeModel.RoomModels.Add(new RoomModel() { RoomName = \"Room-2\" });\n            homeModel.RoomModels.Add(new RoomModel() { RoomName = \"Room-3\" });\n\n            return View(homeModel);\n    }\n</code></pre>\n\n<p><strong>Home Model</strong></p>\n\n<pre><code>public class HomeModel\n    {\n        public List&lt;RoomModel&gt; RoomModels { get; set; }\n    }\n</code></pre>\n\n<p><strong>Room Model</strong></p>\n\n<pre><code>public class RoomModel\n{\n    public string RoomName { get; set; }\n}\n</code></pre>\n\n<p><strong>/Views/Home/Index.cshtml</strong></p>\n\n<pre><code>@model MVC.Temp.Models.Home.HomeModel\n\n&lt;h1&gt;Home&lt;/h1&gt;\n&lt;div id=\"RoomModels\"&gt;\n    @Html.EditorFor(m =&gt; m.RoomModels, \"_RoomModelEditor\")\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>/Views/Home/_RoomModelEditor.cshtml</strong></p>\n\n<pre><code>@model MVC.Temp.Models.Home.RoomModel\n@Html.TextBoxFor(x =&gt; x.RoomName)\n</code></pre>\n\n<p><strong>Current Output:</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/uHtxk.png\" alt=\"enter image description here\"></p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12790777,"title":"MVC3 Html.SelectList - Always see initial value during validation even if selected option has changed","body":"<p>I am creating a select list which is populated with enum values:</p>\n\n<pre><code>&lt;%= Html.DropDownListFor(model =&gt; model.OrderStatus, new SelectList(Enum.GetValues(typeof(OrderStatus))))%&gt;\n</code></pre>\n\n<p>I am now performing client-side validation to ensure that OrderStatus is set properly:</p>\n\n<pre><code>[DisplayName(\"Order Status\"), EnsureOrderStatus(\"ID\")]\npublic OrderStatus OrderStatus { get; set; }\n\n\npublic class EnsureOrderStatus : ValidationAttribute, IClientValidatable\n    {\n        private readonly string OrderIDPropertyName;\n\n        public EnsureOrderStatus(string orderIDPropertyName)\n        {\n            OrderIDPropertyName = orderIDPropertyName;\n        }\n\n        protected override ValidationResult IsValid (object value, ValidationContext validationContext)\n        {\n            ValidationResult validationResult = ValidationResult.Success;\n\n            var propertyTestedInfo = validationContext.ObjectType.GetProperty(OrderIDPropertyName);\n            if (propertyTestedInfo == null)\n            {\n                validationResult = new ValidationResult(string.Format(\"Unknown property {0}\", OrderIDPropertyName));\n            }\n            else\n            {\n                int orderID = (int)propertyTestedInfo.GetValue(validationContext.ObjectInstance, null);\n                OrderStatus orderStatus = (OrderStatus)value;\n\n                if (orderID == 0 &amp;&amp; orderStatus != OrderStatus.Future)\n                {\n                    validationResult = new ValidationResult(string.Format(\"Order must have have an Order Status of Future when being created.\"));\n                }\n            }\n\n            return validationResult;\n        }\n\n        public IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n        {\n            var rule = new ModelClientValidationRule\n                {\n                    ErrorMessage = ErrorMessage,\n                    ValidationType = \"ensureorderstatus\"\n                };\n\n            rule.ValidationParameters[\"orderid\"] = OrderIDPropertyName;\n            yield return rule;\n        }\n    }\n</code></pre>\n\n<p>The value of 'value' inside of IsValid is always the first enum value of OrderStatus. I was wondering if there was other steps which need to be taken to ensure that the selected value of a DropDownList element updates properly.</p>\n\n<p><strong>UPDATED CODE:</strong></p>\n\n<pre><code>//OrderDetailsModel:\n[DisplayName(\"Order Status\"), EnsureOrderStatus(\"ID\")]\npublic OrderStatus OrderStatus { get; set; }\npublic List&lt;OrderStatusModel&gt; OrderStatusModels = new List&lt;OrderStatusModel&gt;();\n\npublic OrderDetailsModel()\n{\n    OrderStatusModels.Add(new OrderStatusModel { EnumStatus = OrderStatus.Active, StringStatus = \"Active\" });\n    OrderStatusModels.Add(new OrderStatusModel { EnumStatus = OrderStatus.Completed, StringStatus = \"Completed\" });\n    OrderStatusModels.Add(new OrderStatusModel { EnumStatus = OrderStatus.Future, StringStatus = \"Future\" });\n}\n\n\n&lt;%= Html.DropDownListFor(model =&gt; model.OrderStatus, new SelectList(Model.OrderStatusModels, \"StringStatus\", \"EnumStatus\"))%&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","entity-framework","linq-to-entities"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":70,"score":5,"question_id":12789837,"title":"Concatenated Where clause with array of strings","body":"<p>I am wondering if there is a way to create a concatenated WHERE clause using an array of int.  I need to get the results for the entire array combined.  Can I do something like:</p>\n\n<pre><code>public ViewResult Results(int? programId, int? programYear, int? programTypeId, string toDate, string fromDate, int?[] programTypeIdList, int?[] programIdList)\n{\n    surveyResponseRepository.Get().Any(x =&gt; x.ProgramId == programIdList);\n}\n</code></pre>\n"},{"tags":[".net","asp.net-mvc-3","viewbag"],"answer_count":4,"favorite_count":11,"up_vote_count":68,"down_vote_count":0,"view_count":24705,"score":68,"question_id":4705426,"title":"What's the difference between ViewData and ViewBag?","body":"<p>I saw the <code>ViewBag</code> in MVC 3. How's that different than <code>ViewData</code> in MVC 2?</p>\n"},{"tags":["c#","jquery","asp.net-mvc-3","modal","partial-views"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1082,"score":1,"question_id":7832351,"title":"JQuery Modal - Hidden Div's vs Partial Views (MVC3)","body":"<p>I am creating a website using MVC3/C#/ASP.NET which contains a view page that will show a JQuery Modal type popup (the implementation is a bit different than a traditional modal window, but the functionality is quite similar). Currently I have the markup that will go into the modal window stored as a partial view (with a separate associated model).</p>\n\n<p>I was doing a little research on JQuery modal windows, and it seems a lot of the examples I am seeing online are using a single view with a hidden div, and the modal window is just populated with the markup from inside the hidden div. In these examples there is only one view (the main view for the page), and the model data behind the hidden div's input fields (etc) are just stored in the model associated with the main view (as opposed to having a separate view and model for the markup I want to display, as would be the case if I were to use a partial view implementation scheme).</p>\n\n<p><em>I was wondering if anyone can give some insight as to which method is preferred or what the standard practice is (if any) on this. Is this just a matter of personal preference? Is one way more efficient than the other?</em></p>\n\n<p><strong>Which way should I be doing this:</strong></p>\n\n<ul>\n<li><strong>A Partial View for the modal window markup with a separate view/model</strong></li>\n<li><strong>A Hidden Div within the existing view/model</strong></li>\n</ul>\n\n<p>Note: I am working as part of a development team, so keeping things aligned with standard practice is very important.</p>\n\n<p>Any thoughts on this matter would be greatly appreciated,\nThanks</p>\n\n<p><strong>Edit</strong>: I asked my fellow developers who are on the same project how they were doing things similar to this. It looks like no matter how much I debate this issue with them, they all seem to agree that the \"<em>best</em>\" and \"<em>most efficient way</em>\" to do this is to render partial views, each with a separate model. I really do not understand why they all think that this method is any more efficient than using hidden divs, but since I am currently \"the new guy\" I did not push the issue too much and basically just pretended to agree with the point they were trying to make about efficiency.</p>\n\n<p>TL;DR : I am now using partial views, whether I like it or not. I would still like to hear some more opinions on this though.</p>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework-4","javascriptserializer","scriptignore"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12788021,"title":"Skip [ScriptIgnore] just once","body":"<p>Environment for this situation:\n<li>asp.net mvc 3\n<li>c#\n<li>Entity Framework 4.3.1\n<li>JavaScriptSerializer</p>\n\n<p>I have come across a situation where it would be nice to include a field which has been marked up as <code>[ScriptIgnore]</code>. The field, if left without the attribute, would constitute a circular reference and cause an exception to be thrown. The reason is something similar to this:</p>\n\n<pre><code>public class Foo\n{\n public int FooId { get; set; }\n\n [ScriptIgnore]\n public virtual Collection&lt;Bar&gt; Bars { get; set; }\n}\n\npublic class Bar\n{\n public int BarId { get; set; }\n public int FooId { get; set; }\n public virtual Foo Foo { get; set; }\n}\n</code></pre>\n\n<p>So you can see here, a <code>Foo</code> can have many associated <code>Bars</code>. And a <code>Bar</code> has an associated <code>Foo</code>.</p>\n\n<p>Back to the situation. I am loading this association in a controller using an include statement:</p>\n\n<pre><code>.Include( foo =&gt; foo.Bars );\n</code></pre>\n\n<p>There are no errors thrown because include is not affected by the <code>[ScriptIgnore]</code> annotation. Upon debug, the association is properly constructed when inspected. There is a list of <code>foos</code>, and each <code>foo</code> has an associated list of <code>Bars</code>.</p>\n\n<p>Now I want to serialize this constructed list. I have a view model that gets filled with data, it looks like this:</p>\n\n<pre><code>public class FooView\n{\n public List&lt;Foo&gt; Foos { get; set; }\n\n public string AsJson()\n {\n  var serializer = new JavaScriptSerializer();\n  return serializer.Serialize(this);\n }\n}\n</code></pre>\n\n<p>So I pass this viewmodel into the view and serialize it:</p>\n\n<pre><code>@model FooView\n&lt;script type=\"text/javascript\"&gt;\n var fooViewModel = @( Html.Raw( Model.AsJson() ) );\n&lt;/script&gt;\n</code></pre>\n\n<p>No exceptions are thrown, however, the serialization properly skips the field (<code>Bars</code>) marked with <code>[ScriptIgnore]</code>. Upon <code>consol.log(fooViewModel)</code> inspection it is clear that there is an array of <code>Foo</code>, however, there is no associated array of <code>Bar</code> in any of the <code>Foos</code>.</p>\n\n<p>Is there a way that I can skip this <code>[ScriptIgnore]</code> tag just the one time? I realize that if it skipped every time then the serializer would serialize Foo, look and see a collection of type Bar, serialize each Bar, notice that Bar had an associated Foo, serialize Foo, notice that Foo had a collection of type  Bar...etc. I only want to grab the collection of <code>Bar</code> the first time. Is there any way to accomplish this? I realize it will try to serialize <code>Foo</code> from Bar, but it will be empty. This is all done with eager loading and the entire object graph is already constructed.</p>\n"},{"tags":["asp.net-mvc-3","http-caching"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":254,"score":2,"question_id":12052294,"title":"MVC3 OutputCache not working on Server and Client as expected","body":"<p>I'm having trouble using the OutputCache attribute in Microsoft's MVC3 framework.</p>\n\n<p>Please imagine the following controller action, which can be used as part of an AJAX call to get a list of products based on a particular manufacturerId:</p>\n\n<pre><code>public JsonResult GetProducts(long manufacturerId)\n{\n    return Json(this.CreateProductList(manufacturerId), JsonRequestBehavior.AllowGet);\n}\n</code></pre>\n\n<p>I want this result to be cached on the server to avoid making excessive database queries. I can achieve this by configuring the attribute thus:</p>\n\n<pre><code>[OutputCache(Duration = 3600, Location = OutputCacheLocation.Server, VaryByParam = \"manufacturerId\")]\n</code></pre>\n\n<p>This works as I expected - the browser makes an intitial request which causes the server to create and cache the result, subsequent requests from the same or different browser get the cached version.</p>\n\n<p>But... I also want the browser to cache these results locally; if I filter first on manufacturer X, then Y then go back to X, I don't want it to make another request for X's products - I want it to just use its cached version.</p>\n\n<p>I can make this happen, by changing the OutputCache to this:</p>\n\n<pre><code>[OutputCache(Duration = 3600, Location = OutputCacheLocation.Client)]\n</code></pre>\n\n<p>Here's the question: how do I combine these so that I can have both sets of behaviour? I tried setting the Location to ServerAndClient but this just made it behave the same as when Location was Server.</p>\n\n<p>I'm sure that the problem has something to do with the \"Vary: *\" response header I get with ServerAndClient but I don't know how to get rid of it.</p>\n\n<p>I welcome comments about the rationality of my intentions - the fact that I'm not getting the results I expect makes me think I might have some fundamental misunderstanding somewhere...</p>\n\n<p>Many thanks.</p>\n\n<p>PS: This is on a local dev environment, IIS Express from VS2010.</p>\n"},{"tags":["ajax","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12788568,"title":"MVC3 Ajax.begin form works in chrome and IE, but not firefox?","body":"<p>I am working on an MVC3 project, and am at my wits end trying to sort this one out. It's probably something super simple I'm overlooking, but I just don't see it right now. The problem is when I click the submit button in firefox, literally nothing happens. There are no errors in the console, it never hits my controller, just straight up nothing. Watching the I watch the XHR requests in chrome, and it does exactly what it's supposed to. Watching the XHR requests in firebug, and nothing. </p>\n\n<p>Here is the code.. \nView. -- This is just the partial view, In the head of the full view template file, I did include jquery.ajax-unobtrusive.js, Microsoft.ajax.js, and Microsoft.mvcajx.js...In that order</p>\n\n<pre><code>@using Infragistics.Web.Mvc\n@model FuelPortal.Models.ViewModels.UserMaintenanceViewModel\n\n@*changed this div and ajax update from wrapperData to wrapperData because having it as wrapperData was screwing up the JS on user submit, it had two of the same id's...*@\n    &lt;style type=\"text/css\"&gt;\n        input[type=text] \n        {\n            margin-bottom: 10px; \n        }\n\n        .disabled \n        {\n            background-color: #CECECE !important;\n            background-image: url('') !important;\n        }\n    &lt;/style&gt;\n&lt;script src=\"../../Scripts/jquery.unobtrusive-ajax.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;div id=\"wrapperData2\"&gt;   \n   &lt;!-- jared's table thingymabobber starts here yo --&gt;\n   @if (Model != null)\n   { \n   &lt;div class='frmBG'&gt;\n        &lt;table width='100%' style='margin-top: 10px'&gt;\n          @using (Ajax.BeginForm(\"DetailUser\", new AjaxOptions { UpdateTargetId = \"wrapperData2\", InsertionMode = InsertionMode.Replace, HttpMethod = \"POST\" }))\n          {\n\n                    &lt;tr&gt;\n                        &lt;td&gt;&lt;b&gt;First Name:&lt;/b&gt;&lt;/td&gt;\n                        &lt;td&gt;@Html.TextBoxFor(mbox =&gt; mbox.User.firstName)&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;&lt;b&gt;Last Name:&lt;/b&gt;&lt;/td&gt;\n                        &lt;td&gt;@Html.TextBoxFor(mbox =&gt; mbox.User.lastName)&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;&lt;b&gt;Email:&lt;/b&gt;&lt;/td&gt;\n                        &lt;td&gt;@Html.TextBoxFor(mbox =&gt; mbox.User.email)&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;&lt;b&gt;Username:&lt;/b&gt;&lt;/td&gt;\n                        &lt;td&gt;@Html.TextBoxFor(mbox =&gt; mbox.User.userName, new {@readonly=\"true\", @class=\"disabled\"})&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;&lt;b&gt;Phone:&lt;/b&gt;&lt;/td&gt;\n                        &lt;td&gt;@Html.TextBoxFor(mbox =&gt; mbox.User.phone)&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;&lt;b&gt;Account Expiration Date:&lt;/b&gt;&lt;/td&gt;\n                        &lt;td&gt;@Html.TextBoxFor(mbox =&gt; mbox.User.expireDate)&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;@Html.HiddenFor(mbox =&gt; mbox.User.LoginAccountId)&lt;/td&gt;\n                        &lt;td&gt;&lt;input type=\"submit\" value='Save' /&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n\n          }\n        &lt;/table&gt;\n   &lt;/div&gt; \n   }\n&lt;/div&gt;\n</code></pre>\n\n<p>Controller action -- the first action is what executed when the partial view is loaded, the HTTP POST overload is executed when the partial view's form is submitted. </p>\n\n<pre><code>  //view details \n    public ActionResult DetailUser(int id)\n    {\n        UserMaintenanceViewModel model = new UserMaintenanceViewModel();\n        model = repository.getUserById(Session[\"UserId\"].ToString(), id);\n\n        return PartialView(\"_ViewUserDetail\", model); \n\n    }\n\n    [HttpPost]\n    public ActionResult DetailUser(int id, UserMaintenanceViewModel model)\n    {\n        var test = model.User.LoginAccountId;\n        var test2 = model.User.firstName; \n         var result = repository.updateUser(model.User);\n         return PartialView(\"_ViewUserDetail\", model);\n    }\n</code></pre>\n\n<p>Any help is greatly appreciated, cheers everyone!</p>\n"},{"tags":["javascript","asp.net-mvc-3","razor","asp.net-web-api","asp.net-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":194,"score":1,"question_id":12739635,"title":"Setting asp.net MVC4 web api route url in javascript is returning empty string","body":"<p>Here is the code that I am using to set the api url:</p>\n\n<pre><code>var clientUrl = '@Url.RouteUrl(\"ApiControllerAction\", new { httproute=\"\", controller = \"Client\"})';\n</code></pre>\n\n<p>In my route.config the route looks like this:</p>\n\n<pre><code>routes.MapHttpRoute(\n            name: \"ApiControllerAction\",\n            routeTemplate: \"api/{controller}/{action}/{id}\"\n        );\n</code></pre>\n\n<p>And the action on my controller that I am trying to hit is this:</p>\n\n<pre><code>[ActionName(\"clients\")]\n    public IQueryable&lt;Client&gt; GetClients(int id)\n    {\n        return Uow.Clients.GetClients(id);\n    }\n</code></pre>\n\n<p>I have a function in javascript that is trying to hit this api, but I am getting a 404:</p>\n\n<pre><code>var getClients = function (id) {\n            return $.ajax(clientUrl + \"/clients/\" + id)\n        };\n</code></pre>\n\n<p>When I call getClients(1) the url is trying to hit is this:</p>\n\n<pre><code>localhost:12345/clients/1\n</code></pre>\n\n<p>Rather than my expected url of this:</p>\n\n<pre><code>localhost:12345/api/client/clients/1\n</code></pre>\n\n<p>Any idea where this is going wrong? I had this working in another project and can't remember if there is something else I am supposed to do. If I inspect the javascript the clientUrl = ''.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":77,"score":0,"question_id":12786602,"title":"asp.net MVC browse for folder path","body":"<p>I am trying to work out what is the best way in an MVC3 form to have an input on a form where you browse for a folder path, not a file.</p>\n\n<p>If this was for a file I would do something like this, but what is the equivalent for a folder? </p>\n\n<pre><code>MODEL\npublic HttpPostedFileBase File { get; set; }\nVIEW\n@Html.TextBoxFor(m =&gt; m.File, new { type = \"file\" })  \n</code></pre>\n"},{"tags":["asp.net-mvc-3","frameworks","entity","code-first"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":152,"score":0,"question_id":12774812,"title":"Code First entity framework connection string","body":"<p>I have 3 class projects in my solutions. \n1. MVC4 project\n2. Domain \n3. Tests</p>\n\n<p>In the MVC4 project I have added a web.config file with the connection string as</p>\n\n<p></p>\n\n<pre><code>&lt;add name=\"EfDbContext\"  connectionString=\"Data Source=.;Initial Catalog=SportsStore;Integrated Security=true;\" providerName=\"System.Data.SqlClient\"/&gt;\n</code></pre>\n\n<p></p>\n\n<p>I have a class by name EfDbContext in Domain project which inherits DbContext.</p>\n\n<p>When I view the website in browser, I get the server not found error.</p>\n\n<p>I debugged the EfDbContext class and found that the Database.Connection.ConnectionString\nis set to \\SqlExpress with database as EfDbContext.</p>\n\n<p>Why is that?</p>\n"},{"tags":["c#","javascript","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":97,"score":2,"question_id":12785086,"title":"MVC3 Ajax Form Validation not Working","body":"<p>I have a strange problem where the unobtrusive validations inside a partial view (which is being rendered by a Ajax.ActionLink) does not work.</p>\n\n<p>This is the Partial View:</p>\n\n<pre><code>@model MyWeb.Models.PersonSkill\n@using (Ajax.BeginForm(\"EditSkill\", null, new AjaxOptions { UpdateTargetId = \"skills\" }, new { id = \"EditSkillForm\" }))\n{\n@Html.HiddenFor(model =&gt; model.Id)\n&lt;div class=\"editor-label\"&gt;\n@Html.LabelFor(model =&gt; model.Name)\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n    @Html.EditorFor(model =&gt; model.Name)\n    @Html.ValidationMessageFor(model =&gt; model.Name)\n&lt;/div&gt;\n\n&lt;div class=\"editor-label\"&gt;\n    @Html.LabelFor(model =&gt; model.YearsOfExperience)\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n    @Html.EditorFor(model =&gt; model.YearsOfExperience)\n    @Html.ValidationMessageFor(model =&gt; model.YearsOfExperience)\n&lt;/div&gt;\n\n&lt;p&gt;\n    &lt;input type=\"submit\" value=\"Save\"/&gt;\n&lt;/p&gt;\n}\n</code></pre>\n\n<p>And this is called by:</p>\n\n<pre><code>@Ajax.ActionLink(\"Edit\", \"LoadEditSkill\", new { id = item.Id }, new AjaxOptions() { UpdateTargetId = \"editSkillDialog\" }, new { @class = \"editSkill\" })\n</code></pre>\n\n<p>The view is rendered fine. It posts back data to the server, but it just doesn't validate.</p>\n"},{"tags":["c#","asp.net-mvc-3","exception-handling"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":102,"score":1,"question_id":11224901,"title":"What's the best way to trap a HttpRequestValidationException and add it to the ModelState?","body":"<p>Regarding the decorator <code>[AllowHtml]</code> on a property or even the <code>[ValidateInput(false)]</code> on a method, what is the best way to catch the <code>HttpRequestValidationException</code> and append it to the ModelState to show as a friendly error on the user side and not show an error page (either throwing a new page under <code>Application_Error</code> or make the use of custom error pages.</p>\n\n<p>Inside the <code>global.asax</code> I have a trap:</p>\n\n<pre><code>protected void Application_Error()\n{\n    // http://romsteady.blogspot.dk/2007/06/how-to-catch-httprequestvalidationexcep.html\n    // Code that runs when an unhandled error occurs\n\n    System.Exception ex = Server.GetLastError();\n\n    if (ex is System.Web.HttpRequestValidationException)\n    { \n        // I got the exception here, I can do plenty now!\n\n        Server.ClearError(); // no need to continue, I know the error\n    }\n}\n</code></pre>\n\n<p>how do I get <strong>from here to the model state</strong>, without using any Session/Application variables (thinking about cloud here and all those different server hosting the user request)?</p>\n\n<p>I was thinking add to the route, or <code>TempData</code> but such is not available here... maybe a <code>Cookie</code> but seams to hacky...</p>\n\n<blockquote>\n  <p><strong>Any ideas?</strong></p>\n</blockquote>\n"},{"tags":["asp.net","asp.net-mvc-3","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1561,"score":2,"question_id":8902406,"title":"Could not load file or assembly 'System.Web.Mvc","body":"<p>I have a solution with differents projects in it, One those is an MVC 3 project, and the other is a test project.</p>\n\n<p>From the test project, I'm trying to test my controllers behavior. But when I'm running a test the system throws an error telling me this:</p>\n\n<blockquote>\n  <p>System.IO.FileNotFoundException: Could not load file or assembly 'System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.<br>\n  WRN: Assembly binding logging is turned OFF.To enable assembly bind failure logging, set the registry value <code>[HKLM\\Software\\Microsoft\\Fusion!EnableLog]</code> (DWORD) to 1.</p>\n</blockquote>\n\n<p>The code from the test os the following:</p>\n\n<pre><code>[TestMethod]\npublic void TestMethod()\n{\n    var myService = new Mock&lt;IMyService&gt;();\n    myService.Setup(a =&gt; a.ReadAuthorizationRequest())\n        .Returns&lt;EndUserAuthorizationRequest&gt;(null);\n    int error = 0;\n    var controller = new myController(myService.Object);\n\n    try\n    {\n        var actionResult = controller.Authorize();\n    }\n    catch (HttpException exception)\n    {\n        error = exception.GetHttpCode();\n    }\n    Assert.AreEqual(403, error);\n}\n</code></pre>\n\n<p>the controller:</p>\n\n<pre><code>public class myController: Controller\n{\n    private readonly IMyService _service;\n\n    public OAuthController(IMyService service)\n    {\n        _service = service;\n    }\n\n    [Authorize, AcceptVerbs(HttpVerbs.Get | HttpVerbs.Post)]\n    public ActionResult Authorize()\n    {\n        ClientApplication requestingClient;\n        var request = _service.ReadAuthorizationRequest();\n        if (request == null)\n        {\n            throw new HttpException((int) HttpStatusCode.BadRequest,\n                \"Missing authorization request.\");\n        }\n     }\n}\n</code></pre>\n\n<p>As you can see, I'm trying to test the controller behavior, so that, whenever the service doesn't read the request the controller should throw an httpException with httpStatusCode 403.</p>\n\n<p>What is wrong with this. Thank you in advance.  </p>\n"},{"tags":["json","asp.net-mvc-3","linq","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12785598,"title":"string linq to entities error - json","body":"<p>I am trying to map various markers on google map with a info window. It is all working fine till I try to pass a string through the controller.</p>\n\n<p>I get the error below:</p>\n\n<blockquote>\n  <p>\"LINQ to Entities does not recognize the method 'System.String GetMainPhoto(Int32)' method, and this method cannot be translated into a store expression.\"</p>\n</blockquote>\n\n<p>I have read this is mainly caused because ToString method or some other methods are not valid to use. But, I am not really sure how to correct this error in this case.</p>\n\n<p>Basically, I have a db - PropertyPhoto that holds the filename of the pictures. GetMainPhoto basically looks up all the rows and returns the main pic file name.</p>\n\n<pre><code>public string GetMainPhoto(int id)\n        {\n            return db.PropertyPhotos.Single(p =&gt; p.PropertyId == id &amp;&amp; p.MainPic == true).PhotoLocation;\n\n        }\n</code></pre>\n\n<p>Controller is as follows:</p>\n\n<pre><code>public ActionResult Map()\n        {\n            if (Request.IsAjaxRequest())\n            {\n                var properties = websiteRepository.FindAllProperties();\n\n                var jsonProperties = from property in properties\n                                     select new JsonProperty\n                                     {\n                                         PropertyId = property.PropertyId,\n                                         NoOfBedroom = property.NoOfBedrooms,\n                                         Price = property.Price,\n                                         Address1 = property.PropertyAddress.Address1,\n                                         MainPicSrc = websiteRepository.GetMainPhoto(property.PropertyId),\n                                         Latitude = property.PropertyAddress.Latitude,\n                                         Longitude = property.PropertyAddress.Longitude\n                                     };\n\n                return Json(jsonProperties.ToList(), JsonRequestBehavior.AllowGet);\n            }\n            else \n            {\n                return View();\n            }\n        }\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":60,"score":-1,"question_id":12773142,"title":"Need similar routing configuration for area as with normal routing configuration","body":"<p>I am using <code>ASP.NET MVC3</code>. I am trying to configure my routes but there seems to be conflicting routes. Not sure how to fix it, hoping that someone can point me in the right direction.</p>\n\n<p>I have 2 sections in my website where applications can be viewed. A normal user of the website can view only his/her applications.  And an administrator can view the all the applications that were captured by using the administration area.</p>\n\n<p>Notes can be added to an already existing application. Notes are just additional information that can be captured at any time during the process of the application.  I am looking to display all the notes already captured for an application like this:</p>\n\n<pre><code>/Application/1001/Notes\n/Administration/Application/1001/Notes\n</code></pre>\n\n<p>This is how I configured my routes:</p>\n\n<pre><code>Routes.MapRoute(\n     \"ApplicationNote\",\n     \"{controller}/{applicationId}/Notes\",\n     new { controller = \"Application\", action = \"Notes\" },\n     new { applicationId = @\"\\d+\" },\n     new[] { \"MyProject.Web.Controllers\" });\n\nRoutes.MapRoute(\n     \"AdminApplicationNote\",\n     \"{area}/{controller}/{applicationId}/Notes\",\n     new { area = \"Administration\", controller = \"Application\", action = \"Notes\" },\n     new { applicationId = @\"\\d+\" },\n     new[] { \"MyProject.Web.Areas.Administration.Controllers\" });\n</code></pre>\n\n<p>To display the first link (next to each application in the data table) I have the following in my controller that will generate the action link for each record:</p>\n\n<pre><code>string actionLinks = string.Empty;\nactionLinks += \"&lt;a href=\\\"\" + Url.Action(\"Notes\", \"Application\", new { area = string.Empty, applicationId = application.Id }) + \"\\\"&gt;\" + \"Notes&lt;/a&gt;\";\n</code></pre>\n\n<p>The second link I display like this (from my controller action, same as above):</p>\n\n<pre><code>string actionLinks = string.Empty;\nactionLinks = \"&lt;a href=\\\"\" + Url.Action(\"Notes\", new { applicationId = application.Id, area = \"Administration\", controller = \"Application\" }) + \"\\\"&gt;\" + \"Notes&lt;/a&gt;\";\n</code></pre>\n\n<p>The first configuration works well:</p>\n\n<pre><code>/Application/1001/Notes\n</code></pre>\n\n<p>...but the second not so well.  When I hover over the link of the second configuration then the status shows:</p>\n\n<pre><code>/Administration/Application/Notes?applicationId=1001\n</code></pre>\n\n<p>What am I doing wrong with the admin area's route configuration?</p>\n"},{"tags":["asp.net-mvc-3","webgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":12735821,"title":"How can the View be aware of what page the ajax MVC WebGrid is on?","body":"<p>I have a view that contains a partial view containing a WebGrid that pages via ajax.\nHowever, I am having trouble getting the parent view to be aware of what page the WebGrid is on. What I'm trying to accomplish is this:  I have a \"create\" button on the containing View that navigates to a new page, but I'd like it to pass the current page # as a query string parameter to the new page, so that if they cancel the creation, the original view will load with the previous page rather than loading the first page by default.</p>\n\n<p>The problem I am seeing is, the Model of the parent view doesn't change when the partial view's grid updates.  And, though I can create a method for the ajaxUpdateCallback, I haven't figured out how to tell this method what the current page is.</p>\n\n<p>My the pertinent sections of my code looks like this:\nOn the parent view:</p>\n\n<pre><code>&lt;div id=\"divList\"&gt;\n    @Html.Partial(\"_MatterList\", Model) //This is where the grid is defined\n&lt;/div&gt;\n&lt;br/&gt;\n&lt;div id=\"newSection\"&gt;\n\n&lt;input type=\"button\" value=\"New Matter\" onclick=\"newMatter();\"&gt;&lt;/input&gt;\n&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\n\n    var _Page; //I tried creating a javascript variable to hold the page, but can't get it to populate with anything but the default 1.\n\n    function newMatter() \n    {\n        var urlAction = \"@Url.Action(\"Create\", \"Matter\", new { area = \"Admin\" })\";\n        var subclientid = $(\"#SubClientID &gt; option:selected\").attr(\"value\"); //defined in a form not displayed here\n        var clientid = $(\"#ClientID &gt; option:selected\").attr(\"value\");//defined in a form not displayed here\n        redirect(urlAction, clientid, subclientid);\n\n    }\n    function redirect(urlAction, clientid, subclientid) {\n        if(clientid &gt; 0 || subclientid &gt; 0 ) {\n            urlAction += \"?\";\n        }\n        if(clientid &gt; 0) {\n            urlAction += \"clientid=\" + clientid;\n            if(subclientid &gt; 0) {\n                urlAction += \"&amp;subclientid=\" +subclientid;\n            }\n        }\n        //I want to be able to add page in here as well. a la &amp;page=_Page\n        window.location = urlAction;\n    }\n</code></pre>\n\n<p>In the _MatterList partial view:</p>\n\n<pre><code> &lt;div id=\"matterListing\"&gt;\n\n    @{\n\n        var grid = new WebGrid&lt;Matter&gt;(null, rowsPerPage: 10, canSort: false, defaultSort: \"Name\", ajaxUpdateContainerId: \"matterListing\",ajaxUpdateCallback:\"afterUpdate\");\n        grid.Bind(Model.Matters, rowCount: Model.TotalRows, autoSortAndPage: false);\n        @grid.GetHtml(\n            tableStyle: \"table90\",\n            alternatingRowStyle: \"tableAltRows\",\n            headerStyle: \"tableHeaders\",\n            columns: grid.Columns(\n\n                grid.Column(...  //there are a lot of columns, removed them because not important to the problem.\n\n\n                )\n                   )\n    }\n    &lt;script type=\"text/javascript\"&gt;\n        function afterUpdate() {\n            _Page = @Model.PageNumber; //I tried this but it only ever shows 1 because it evaluates when the page first loads.  What I need is for it to dynamically get the correct page at execution time.\n        }\n    &lt;/script&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I am thinking that what would be needed is for the afterUpdate method to take a parameter with the current page (i.e. call afterUpdate(2) instead of using @Model.PageNumber), but I don't know how to force the WebGrid to pass that along on the callback.  Does anyone have a solution to this issue?</p>\n"},{"tags":["c#","asp.net-mvc-3","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12784785,"title":"MVC3 - service references","body":"<p>We have a web service for our MVC3 app that communicates with our Oracle database. When I'm debugging, I use the Web.Debug.config file to point to the copy on our development server that connects to our development database (system.serviceModel->client->endpoint). And our Web.Release.config points to the one on our live server that connects to our production database.</p>\n\n<p>Sometimes we modify the development web service in order to test new functionality.</p>\n\n<p>My question is, when I want to publish to the live server, do I need to refresh my service reference in my project before publishing if we have different functionality in the development copy of the web service?</p>\n"},{"tags":[".net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":28,"score":0,"question_id":12784450,"title":"MVC and Sub or Sub Sub Folder","body":"<p>I have to migrate an Asp Intranet.</p>\n\n<p>But, when i look for create an MVC Intranet, i realise that i can't do that :</p>\n\n<p>For Example, in the Area \"Folder 1\"</p>\n\n<p>/Folder1/Home (In Real : /Folder1/Controller/HomeController.vb)\n/Folder1/Application/Agency/Home (In Real : /Folder1/Controller/Agency/HomeController.vb)\n/Folder1/Application/Agency/Edition/MyAppEdition/Home (In Real : /Folder1/Controller/Agency/Edition/MyAppEdition/HomeController.vb)</p>\n\n<p>is it possible to do that? Or in MVC, it's not recommanded and i have to create only to Sub Folder like \"/Folder1/View/MyApp\" ?</p>\n\n<p>Thank'</p>\n\n<p>Portekoi</p>\n"},{"tags":["c#","asp.net-mvc-3","controller"],"answer_count":6,"favorite_count":6,"up_vote_count":25,"down_vote_count":0,"view_count":8151,"score":25,"question_id":7842293,"title":"Multiple types were found that match the controller named 'Home'","body":"<p>I currently have two unrelated MVC3 projects hosted online.</p>\n\n<p>One works fine, the other doesn't work, giving me the error:</p>\n\n<blockquote>\n  <p>Multiple types were found that match the controller named 'Home'. This\n  can happen if the route that services this request\n  ('{controller}/{action}/{id}') does not specify namespaces to search\n  for a controller that matches the request. </p>\n  \n  <p>If this is the case,\n  register this route by calling an overload of the 'MapRoute' method\n  that takes a 'namespaces' parameter.</p>\n</blockquote>\n\n<p>The way my hoster works is that he gives me FTP access and in that folder I have two other folder, one for each of my applications.</p>\n\n<blockquote>\n  <p>ftpFolderA2/foo.com</p>\n  \n  <p>ftpFolderA2/bar.com</p>\n</blockquote>\n\n<p>foo.com works fine, I publish my application to my local file system then FTP the contents and it works.</p>\n\n<p>When I upload and try to run bar.com, the issue above fires and prevents me from using my site. <strong>All while foo.com still works</strong>.</p>\n\n<p>Is bar.com searching from controllers EVERYWHERE inside of ftpFolderA2 and that's why it's finding another <code>HomeController</code>? How can I tell it to only look in the Controller folder as it should?</p>\n\n<p>Facts:</p>\n\n<ol>\n<li>Not using areas. These are two COMPLETELY unrelated projects. I place each published project into each respective folder. Nothing fancy.</li>\n<li>Each project only has 1 HomeController.</li>\n</ol>\n\n<p>Can someone confirm this is the problem?</p>\n"},{"tags":["c#","asp.net-mvc-3","forms-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12783471,"title":"Forms authentication, auto redirect in MVC3 project","body":"<p>I'm working on an MVC3 project and i have to add a login mechanism. I have to use the <code>&lt;authentication&gt;</code> method. I thought that this would automatically redirect users to the login page? But nothing is happening.</p>\n\n<p>I have this in my <code>web.config</code> file:</p>\n\n<pre><code>&lt;authentication mode=\"Forms\"&gt;\n  &lt;forms loginUrl=\"~/Account/LogOn\" timeout=\"2880\" /&gt;\n&lt;/authentication&gt;\n</code></pre>\n\n<p>But my login controller isn't invoked automatically. What do i have to do to make it work the way i want?</p>\n"},{"tags":["asp.net-mvc-3","seo","asp.net-mvc-routing"],"answer_count":3,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":216,"score":6,"question_id":10015042,"title":"ASP.NET MVC 3 routing: prevent ~/home access?","body":"<p>I'm fine with ~/ mapping to Home Index, and with ~/Blog mapping to Blog Index, but how do I prevent ~/Home mapping to Home Index as well? I don't want routes to be accessible from more than a single endpoint.</p>\n\n<p>Similarly, how do I prevent every other \"Index\" action being accessible from both ~/Controller and ~/Controller/Index?</p>\n\n<p>OK ~/<br>\nNO ~/Home<br>\nNO ~/Home/Index<br>\nOK ~/AnyOtherController<br>\nNO ~/AnyOtherController/Index  </p>\n\n<p>I guess the rule should be something like preventing any default actions to be accessible explicitly, and in the case of home also prevent it being accessible with just the controller.</p>\n\n<p>Can this be done? Has it been done in the past? SO for instance doesn't do this (you can access either <a href=\"http://stackoverflow.com/\">here</a> or <a href=\"http://stackoverflow.com/home\">there</a>) and both render the home page; and they probably have a different default action name than \"index\", which possibly is probably an accessible route too.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":286,"score":3,"question_id":8762910,"title":"MVC3: Use of ActionMethodSelectorAttribute causes HttpPostAttribute to be ignored","body":"<p>The following attribute is used to restrict use of an action to an ajax request:</p>\n\n<pre><code>public class AjaxRequestAttribute : ActionMethodSelectorAttribute\n{\n    public override bool IsValidForRequest(ControllerContext controllerContext, System.Reflection.MethodInfo methodInfo)\n    {\n        return controllerContext.HttpContext.Request.IsAjaxRequest();\n    }\n}\n</code></pre>\n\n<p>I have the following controller action methods defined:</p>\n\n<pre><code>[AjaxRequest]\npublic ActionResult Login()\n{\n     ...\n}\n\n[HttpPost, AjaxRequest]\npublic ActionResult Login(LoginModel model, string returnUrl)\n{\n    ...\n}\n</code></pre>\n\n<p>The following error occurs when the ajax post is made:</p>\n\n<p><em>The current request for action 'Login' on controller type 'AgentController' is ambiguous between the following action methods:\nSystem.Web.Mvc.ActionResult Login() on type NappWebsiteMvc.Controllers.AgentController\nSystem.Web.Mvc.ActionResult Login(NappWebsiteMvc.Models.Agent.LoginModel, System.String) on type NappWebsiteMvc.Controllers.AgentController</em></p>\n\n<p>It seems that the HttpPost attribute is ignored when using the additional attribute. If I remove the AjaxRequest attribute from the two methods, then the code works.</p>\n\n<p>What should be the correct implementation? Thanks!</p>\n"},{"tags":["c#","asp.net-mvc-3","list","csv"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12781889,"title":"for csv convert List<class> into byte array","body":"<p>I have a Action </p>\n\n<pre><code> public FileContentResult DownloadCSV()\n    {\n        var people = new List&lt;Person&gt; { new Person(\"Matt\", \"Abbott\"), new Person(\"John\",\"Smith\") };\n        string csv = \"Charlie, Chaplin, Chuckles\";\n        Extensions.ToCSV(new DataTable());\n        return File(new System.Text.UTF8Encoding().GetBytes(csv), \"text/csv\", \"Report123.csv\");\n    }\n</code></pre>\n\n<p>and a class </p>\n\n<pre><code>public static class Extensions\n{\n    public static string ToCSV(DataTable table)\n    {\n        var result = new StringBuilder();\n        for (int i = 0; i &lt; table.Columns.Count; i++)\n        {\n            result.Append(table.Columns[i].ColumnName);\n            result.Append(i == table.Columns.Count - 1 ? \"\\n\" : \",\");\n        }\n\n        foreach (DataRow row in table.Rows)\n        {\n            for (int i = 0; i &lt; table.Columns.Count; i++)\n            {\n                result.Append(row[i].ToString());\n                result.Append(i == table.Columns.Count - 1 ? \"\\n\" : \",\");\n            }\n        }\n\n        return result.ToString();\n    }\n}\n</code></pre>\n\n<p>new System.Text.UTF8Encoding().GetBytes(csv)</p>\n\n<p>create</p>\n\n<pre><code>string csv = \"Charlie, Chaplin, Chuckles\"\n</code></pre>\n\n<p>into byte array how to convert </p>\n\n<pre><code>var people = new List&lt;Person&gt; { new Person(\"Matt\", \"Abbott\"), new Person(\"John\",\"Smith\") };\n</code></pre>\n\n<p>into byte array with formatted header for csv</p>\n"},{"tags":["c#","asp.net-mvc-3","url-rewriting","route","nopcommerce"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12782907,"title":"MVC 3 NopCommerce '$' character as part of the name of an url parameter","body":"<p>I am working with NopCommerce by implementing the payment by credit card.I'm not using plugin but a simple redirect to the page of payment.Payment done then I get redirected to the page\\view (http://localhost/Nop240/CreditCardPayment/Result) where I analyze the resultof the transaction reading the url parameters.</p>\n\n<p>In the RouteProvider.cs class i have mapped the return url like this:</p>\n\n<pre><code>routes.MapLocalizedRoute(\"CreditCardPaymentResult\",  \"CreditCardPayment/Result/s/{session_id}/s/{codAut}/s/{alias}/s/{orario}/s/{data}/s/{mac}/s/{importo}/s/{cognome}/s/{nazionalita}/s/{pan}/s/{divisa}/s/{email}/s/{scadenza_pan}/s/{esito}/s/{codTrans}/s/{nome}/s/{messaggio}/s/{tipo_servizio}/s/{$BRAND}/\", new { controller = \"Checkout\", action = \"CreditCardPaymentResult\" }, new[] { \"Nop.Web.Controllers\" }); \n</code></pre>\n\n<p>In the controller i have writen this code</p>\n\n<pre><code>public ActionResult CreditCardPaymentResult(string session_id, string codAut, string alias, string orario, string data, string mac, string importo,                                                    string BRAND, string cognome, string nazionalita, string pan, string divisa, string email, string scadenza_pan,string esito, string codTrans, string nome, string messaggio, string tipo_servizio)\n</code></pre>\n\n<p>The return url is something like this </p>\n\n<pre><code>http://localhost/Nop240/CreditCardPayment/Result?session_id=w5pl05e3s2f1ki5bdg30xymy&amp;codAut=TESTOK&amp;alias=payment_testm_urlmac&amp;orario=142525&amp;data=20121008&amp;mac=c62373ff789d451bcda0bb84d1d679114107aecd&amp;importo=1&amp;$BRAND=MasterCard&amp;cognome=wwww&amp;nazionalita=ITA&amp;pan=525599XXXXXX9992&amp;divisa=EUR&amp;email=fabrizio%40xxx.net&amp;scadenza_pan=201402&amp;esito=OK&amp;codTrans=0000000000000162&amp;nome=wwww&amp;messaggio=Message+OK&amp;tipo_servizio=null\n</code></pre>\n\n<p>the problem is how intercept $BRAND url parameter.\nCan help me please?</p>\n"},{"tags":["asp.net-mvc-3","twilio","restsharp"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":248,"score":1,"question_id":9534431,"title":"Outbound calls with Twilio Rest Api are not executed","body":"<p>I'm building an application and one of the features is integrated with Twilio.</p>\n\n<p>I have all the IVR flow done with Asp.Net Mvc 3 and everything is working correctly so far. \nHowever, one of the features is to have the user input a phone number and have Twilio call that number and play something once the other user answers.</p>\n\n<p>I'm using the Twilio REST API to make the call, but the call is not being done and I don't have any error on the application or on Twilio.</p>\n\n<p>What I'm doing is this: I have an Action that receive the data from twilio </p>\n\n<pre><code>\npublic ActionResult Dial(Call request, int opt)\n{\n\n    var twilio = new TwilioRestClient(Configuration.TwilioAccKey, Configuration.TwilioAuthKey);\n    twilio.InitiateOutboundCall(Configuration.TwilioPhoneNumber, \n                                \"+\" + request.Digits,\n                                string.Format(\"{0}/Calls/Endorsement/Play?opt={1}\", Configuration.BaseUrl, opt));\n\n    var response = new TwilioResponse();\n    response.Redirect(\"/Calls/Endorsement/Play?opt=\" + opt, \"GET\");\n    return TwiML(response);\n}\n</code></pre>\n\n<p>The response after the REST call is being executed and the outbound call doesn't throw any error.\nWhat am I doing wrong?</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":67,"score":3,"question_id":12746037,"title":"MVC, passing classes between controller and view","body":"<p>I have a scenario as follows; a \"Survey\" contains a list of type \"Question\"; \"Question\" is made up of an id and a string called \"Text\".  Here are the class definitions:</p>\n\n<pre><code>public class Survey\n{\n    public int SurveyId { get; set; }\n    public string Title { get; set; }\n    public List&lt;Question&gt; Questions { get; set; }\n\n    public Survey()\n    {\n        this.Questions = new List&lt;Question&gt;();\n    }\n}\n\npublic class Question\n{\n    public int QuestionId { get; set; }\n    public string QuestionText { get; set; }\n    public int OwningSurveyId { get; set; }\n}\n</code></pre>\n\n<p>I would like to be able to link from the page for a specific Survey to create a new Question (which works fine), but when the Question form is submitted I want to do two things; 1) ensure that the OwningSurveyId is set correctly, and 2) add the Question to Survey.Questions List.  </p>\n\n<p>I am open to any solution to get this functionality - the approach I've taken may not be the best.  What I decided to do was pass the Survey object into the Create form for the Question, so that when the form is submitted, the form contains both objects, and so I can perform both tasks above (1 &amp; 2) correctly.</p>\n\n<p>I set up the Create Question page in the QuestionController as follows:</p>\n\n<pre><code>// GET: /Question/Create\n\n    public ActionResult Create(Survey OwningSurvey)\n    {\n        return View(OwningPulse);\n    }\n\n[HttpPost]\n    public ActionResult Create(Pulse OwningPulse, Question NewQuestion)\n    {\n        ModelState[\"OwningSurveyId\"].Errors.Clear();\n\n        if (ModelState.IsValid)\n        {\n            OwningPulse.Questions.Add(NewQuestion);\n            db.Questions.Add(NewQuestion);\n            db.SaveChanges();\n            return RedirectToAction(\"Index\", \"Survey\");\n        }\n\n        return View(OwningSurvey);\n    }\n</code></pre>\n\n<p>and the Create.cshtml file for the Question has the following:</p>\n\n<pre><code>@model MoodTool.Interface.Models.Survey\n\n@{\nViewBag.Title = \"Create\";\n\nvar Question = new MoodTool.Interface.Models.Question();\nQuestion.OwningPulseId = Model.SurveyId;\n}\n\n@using (Html.BeginForm(\"Create\", \"Question\", \"{NewQuestion}\", FormMethod.Post, new { NewQuestion = Question }))\n{... code follows\n</code></pre>\n\n<p>The problem I have is that the value of the \"Model\" in the .cshtml file is null, and therefore the page crashes.  The value of OwningSurvey in the Create method of the Question controller (\"GET\" version) is also null.</p>\n\n<p>Can anyone guide me in the right direction?  I realise that I'm probably doing something either majorly wrong (design patterns), or have made a simple syntax error, but I'm new to MVC and going round in circles.</p>\n\n<p>Thanks</p>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-selectors","telerik-mvc"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12781608,"title":"Hide list under ul using Jquery","body":"<p>I was trying to hide HTML list using the Jquery. Please tell me the suggestion where i am doing wrong.</p>\n\n<p>This is the rendered code:</p>\n\n<pre><code>&lt;div id=\"TabStrip_3\" class=\"t-widget t-tabstrip t-header\"&gt;\n    &lt;ul class=\"t-reset t-tabstrip-items\"&gt;\n        &lt;li class=\"t-item t-state-default t-state-active\"&gt;\n            &lt;a class=\"t-link\" href=\"#TabStrip_3-1\"&gt;Details&lt;/a&gt;\n        &lt;/li&gt;\n        &lt;li id=\"3\" class=\"t-item t-state-default\"&gt;\n            &lt;a class=\"t-link\" href=\"/Acquisition/PoDetails/Create/3\"&gt;Create New Detail&lt;/a&gt;\n        &lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I need to hide the li using its Id. Please help for this.</p>\n\n<p>Thanks,</p>\n"},{"tags":["asp.net-mvc-3","remote-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12781546,"title":"Remote validation attribute in MVC3 invalid get format","body":"<p>I trying to use remote validation for the first time, but am encountering problems with the parameters passed inot the remote validation method. </p>\n\n<p>My model is as follows:</p>\n\n<pre><code>public class PerinatalWomanView : IPerinatalWoman\n{\n[Required(ErrorMessage = \"The woman's postcode is required\")]\n    [Display(Name = \"Woman's postcode\")]\n    [Remote(\"PostcodeCheck\", \"Validation\", \"Validation\")]\n    [RegularExpression(\"^[a-zA-Z]{1,2}[0-9][0-9A-Za-z]{0,1} [0-9][A-Za-z]{2}$\", ErrorMessage = \"A valid postcode is required\")]\n    public string Postcode { get; set; }\n</code></pre>\n\n<p>The view snippet is:</p>\n\n<pre><code>&lt;div class=\"editor-label control-label\"&gt;\n  @Html.LabelFor(m =&gt; m.perinatalWomanView.Postcode)\n&lt;/div&gt;\ndiv class=\"editor-field controls\"&gt;\n  @Html.EditorFor(m =&gt; m.perinatalWomanView.Postcode)\n  @Html.ValidationMessageFor(m =&gt; m.perinatalWomanView.Postcode)\n&lt;/div&gt;\n</code></pre>\n\n<p>and the validation controller is:</p>\n\n<pre><code>public class ValidationController : Controller\n{\n    //\n    // GET: /Validation/Validation/\n\n    [HttpGet]\n    public JsonResult PostcodeCheck(string Postcode)\n    {\n\n        //  postcode has already been checked for correct format\n        //  now look it up to see if it exists\n\n        string mbrraceCommonCodeEntitiesConnectionString = ConfigurationManager.ConnectionStrings[\"MbrraceCommonCodeEntities\"].ConnectionString;\n        if (PostcodeChecks.CheckPostcodeExists(mbrraceCommonCodeEntitiesConnectionString, Postcode))\n        { return Json(true, JsonRequestBehavior.AllowGet); }\n\n        return Json(\"This postcode was not found in the database\", JsonRequestBehavior.AllowGet);\n\n    }\n</code></pre>\n\n<p>When the controller is called the value of Postcode is null. The actual call - from Firebug - is:</p>\n\n<pre><code>http://localhost:57881/Validation/Validation /PostcodeCheck?perinatalWomanView.Postcode=OX4+1SU\n</code></pre>\n\n<p>How do I read the postcode string parameter correctly becuase it is clearly not null?</p>\n\n<p>HELP!</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","entity","rename"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":12780297,"title":"How to rename an entity in Entity Framework","body":"<p>I am surprised I havent found an easy way to achieve this. I want to rename a table with existing data in it. </p>\n\n<p>For example:</p>\n\n<pre><code>class Person : Entity\n{\n   long PersonId;\n   string name;\n}\n</code></pre>\n\n<p>I would like to rename this to:</p>\n\n<pre><code>class Client : Entity\n{\n   long clientId;\n   string name;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>What I have tried:</strong></p>\n\n<ul>\n<li>Simply renaming the class, and creating a migration. The migration drops the person table, and creates a new client table.</li>\n<li>Create migration first with: <code>RenameTable(\"Person\", \"Client\");</code> This gives me: </li>\n</ul>\n\n<blockquote>\n  <p>Either the parameter @objname is ambiguous or the claimed @objtype (OBJECT) is wrong.</p>\n</blockquote>\n"},{"tags":["c#","json","asp.net-mvc-3","google-maps-api-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":115,"score":0,"question_id":12780947,"title":"google map api v3 + Json not working + asp .net mvc3 c#","body":"<p>Hi I am trying to populate markers on google map and using Json to read latitude and longitude from database.</p>\n\n<p>As a first step all I am trying to do is to see if I am getting any response back. The code is below:</p>\n\n<p>Entities is as follows:</p>\n\n<pre><code>public class Property\n{\n    public int PropertyId { get; set; }\n    ...\n    public virtual PropertyAddress PropertyAddress { get; set; }\n}\n\npublic class PropertyAddress\n{\n    [Key]\n    public int PropertyId { get; set; }\n    ...\n    public float Latitude { get; set; }\n    public float Longitude { get; set; }\n}\n</code></pre>\n\n<p>Json Property Model:</p>\n\n<pre><code>public class JsonProperty\n{\n    public int PropertyId { get; set; }\n    public float Latitude { get; set; }\n    public float Longitude { get; set; }\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>    public ActionResult Map()\n    {\n        if (Request.IsAjaxRequest())\n        {\n            var properties = websiteRepository.FindAllProperties();\n\n            var jsonProperties = from property in properties\n                                 select new JsonProperty\n                                 {\n                                     PropertyId = property.PropertyId,\n                                     Latitude = property.PropertyAddress.Latitude,\n                                     Longitude = property.PropertyAddress.Longitude\n                                 };\n\n            return Json(jsonProperties.ToList());\n        }\n        else \n        {\n            return View();\n        }\n    }\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>@section Scripts_footer {\n    &lt;!-- Google Map Script --&gt;\n    &lt;script type=\"text/javascript\" src=\"http://maps.google.com/maps/api/js?sensor=false\"&gt;&lt;/script&gt;\n\n    &lt;script type=\"text/javascript\"&gt;\n        $(document).ready(function () {\n            var map = new google.maps.Map(document.getElementById(\"map\"), {\n                center: new google.maps.LatLng(19.0759837, 72.8776559),\n                zoom: 13,\n                mapTypeId: google.maps.MapTypeId.ROADMAP\n            });\n\n            $.getJSON(\"/Search/Map\", function (json) {\n                alert(json);\n            });\n        });\n    &lt;/script&gt;\n}\n\n&lt;div id=\"map\" style=\"width: 500px; height: 300px\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>I was expecting an alert message with object object object ... not really sure why that is not happening.</p>\n"},{"tags":["asp.net-mvc-3","validation","dataannotations","model-validation"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":11899002,"title":"Default property values in MVC3","body":"<p>I have 2 classes containg POCO entities in MVC3</p>\n\n<pre><code>public class TeamMember \n{\n  public DateTime JoinDate { get; set; }\n  [Required]\n  Public string Name{ get; set; }\n} \n\npublic class Project\n{\n   [Required]\n   public string Name { get; set; }  \n   public DateTime StartDate { get; set; }\n}\n</code></pre>\n\n<p>I want to set the default value of TeamMember <code>JoinDate</code> with Project <code>StartDate</code>.\nCan anybody pull me out of this</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":173,"score":0,"question_id":12780090,"title":"How to call a Controller ActionResult method from @Html.ActionLink","body":"<p>I want to call a controller ActionResult method from anchor tag without changing the url in MVC3 razor engine.</p>\n\n<p>My url is: \"http://localhost:2993/admin/adminindex\" and I have one anchor tag \"SingOut\" and i want to remove my session.</p>\n\n<p>This is my syntax on View page:</p>\n\n<pre><code>&lt;div&gt;@Html.ActionLink(\"SingOut\", \"signout\", \"Admin\")&lt;/div&gt;\n</code></pre>\n\n<p>And on Admincontroller I want  to call this ActionResult method</p>\n\n<pre><code>public ActionResult signout()\n{\n      Session.Abandon();\n      return View(\"~/Views/admin/admin.cshtml\");         \n}\n</code></pre>\n\n<p>When I click on signout, it always goes to Index ActionResult method.\nIs it Possible to call Controller ActionResult method from javascrit not jquery?\nI want it only pure javascript not jquery.</p>\n"},{"tags":["c#","facebook","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12779902,"title":"MVC3 C# Facebook Login Integration","body":"<p>I am trying to create an MVC3 C# simple application that uses facebook to login based on the following tutorial:</p>\n\n<p><a href=\"http://facebooksdk.codeplex.com/wikipage?title=Getting%20Started%20with%20an%20ASP.NET%20MVC%203%20Website\" rel=\"nofollow\">http://facebooksdk.codeplex.com/wikipage?title=Getting%20Started%20with%20an%20ASP.NET%20MVC%203%20Website</a></p>\n\n<p>I have setup an application in facebook with the following settings:</p>\n\n<ol>\n<li>Wesite with facebook login chosen</li>\n<li>Url for website: <code>http://localhost:14568/</code> &lt;-- 14568 is the same port number I have setup in VS2010 for the project.</li>\n<li>I have added my appId and appSecret that I receive from facebook to my webconfig file as show in the tutorial.</li>\n</ol>\n\n<p>When I run my application and click on my facebook login icon, it redirects me to facebook, I then login to facebook, choose don't save device. After this step I get the following error in facebook:</p>\n\n<p><strong>An error may have occurred as part of the login process. You can close this window and try returning to the application, though it may ask you to login again. This is likely due to a bug in the application.</strong></p>\n\n<p>I have followed the tutorial exactly but get this error, I have noticed in the tutorial, seting up the aplication in facebook looks different. Is there something I am missing?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12779672,"title":"Drop-down not working in ToSelectList extension method","body":"<p>I've got a nullable enum that, unlike others on the same page, doesn't work. I have an enum, <code>Title</code> whereby using the extension method will help to populate a drop-down list on the page. Here's what the ViewBag declaration looks like:</p>\n\n<pre><code>ViewBag.TitleList = EnumExtensions.ToSelectList&lt;Title&gt;(\"[select]\");\n</code></pre>\n\n<p>Now, perhaps someone could explain it to me, but this is where the black magic happens when it comes to binding in MVC. If the page is invalid when calling <code>if(ModelState.IsValid)</code> then upon re-rendering the screen, the above statement is called again. However this time, the correct drop-down item will be selected (dependent on which one you had selected at the time).</p>\n\n<p>Digging deeper, this is the method declarations:</p>\n\n<pre><code>    public static SelectList ToSelectList&lt;TEnum&gt;(string nullEntry = null) where TEnum : struct\n    {\n        return ToSelectList&lt;TEnum&gt;(nullEntry, null);\n    }\n\n\n    public static SelectList ToSelectList&lt;TEnum&gt;(string nullEntry = null, string selectedValue = null) where TEnum : struct\n    {\n        var enumType = typeof(TEnum);\n        var values = Enum.GetValues(enumType).OfType&lt;TEnum&gt;();\n        List&lt;SelectListItem&gt; items =  ToSelectList&lt;TEnum&gt;(values, nullEntry, selectedValue);\n        SelectList sl = new SelectList(items, \"Value\", \"Text\", selectedValue);\n        return sl;\n    }\n\n    public static List&lt;SelectListItem&gt; ToSelectList&lt;T&gt;(this IEnumerable&lt;T&gt; enumerable, string nullEntry, string selectedValue = null)\n    {\n        List&lt;SelectListItem&gt; items;\n\n        if ((typeof(T).IsEnum))\n        {\n            items = enumerable.Select(f =&gt; new SelectListItem()\n            {\n                Text = f.GetDescription(),\n                Value = f.ToString(),\n                Selected = f.ToString() == selectedValue\n            }).ToList();\n        }\n        else\n        {\n            items = enumerable.Select(f =&gt; new SelectListItem()\n            {\n                Text = f.ToString(),\n                Value = f.ToString()\n            }).ToList();\n        }\n\n        if (!string.IsNullOrEmpty(nullEntry))\n        {\n            items.Insert(0, new SelectListItem() { Text = nullEntry, Value = \"\" });\n        }\n\n        return items;\n    }\n</code></pre>\n\n<p>There's just some overloads to handle random cases, although presumably some of these won't be needed.</p>\n\n<p>As I say, the correct item will be selected for other enumerations, but for this particular one, Title, it will not. Here's the enum declaration:</p>\n\n<pre><code>public enum Title\n{\n    Mr,\n    Miss,\n    Mrs,\n    Ms\n}\n</code></pre>\n\n<p>And finally, the declaration using <code>DropDownListFor</code> on the page itself;</p>\n\n<pre><code>@Html.DropDownListFor(x =&gt; x.Title, (SelectList)ViewBag.TitleList)\n</code></pre>\n\n<p>The problem is that when I first visit the page, the selected item is always \"[select]\" (when the provided enum value is null in the model). However, the model property <code>Title</code> <em>definitely</em> has a value set, and the <code>SelectedItem</code> property is set for the drop-down list too, but on screen, it defaults to \"[select]\" which is unexpected.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","cookies"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12779748,"title":"Cookie not always being set in MVC3","body":"<p>I have the following code in my MVC3 Controller:</p>\n\n<pre><code>HttpCookie cookie = new HttpCookie(cookieName);\ncookie.Values[\"ID\"] = commonSessionId;\ncookie.Expires = DateTime.MaxValue;\nResponse.Cookies.Add(cookie);\n\nreturn Redirect(Url.Content(\"~/\"));\n</code></pre>\n\n<p>However, the cookie is not always being set. Through my testing, sometimes the cookie will apply, but sometimes this is just ignored.</p>\n\n<p>Are there any obvious reasons as to why this is occurring?</p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12779094,"title":"Issue Numeric Validation for German Culture on deployed MVC 3","body":"<p>Currently I set the culture and ui culture of my application to de-De, I am also using jquery globalization. </p>\n\n<p>On my dev machine everything works fine, once I deployed it, the validation is triggering that the values inputted are not valid numeric values. </p>\n\n<p>I am not sure what is causing this in the serve, I already checked the config and the culture is set.</p>\n\n<p>As of now I remove jquery validation so that my users can test with it for now :(</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","active-directory","ntlm"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":12382917,"title":"Asp.Net MVC 3: intranet application with user in a special AD group?","body":"<p>I saw I can create an intranet authentication which uses NTLM auth. It's almost what I need. In addition I'm required too check that the user is in a specified group in the AD.</p>\n\n<p>Is there a simple way to do this? It's for a very small web application(8-10 day of dev).</p>\n\n<p>Thank you</p>\n"},{"tags":["asp.net-mvc-3","linq"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12777021,"title":"How to solve this in LINQ query?","body":"<p>I was working on MVC3 project. I need help writting Linq expression. My model is something like this.</p>\n\n<p><strong>Model Class</strong></p>\n\n<pre><code>    public int Id { get; set; }\n    public int DetCount { get; set; }\n</code></pre>\n\n<p>I need to do something like this,</p>\n\n<pre><code>DetCount = (from sel in db.PoDetails where sel.PoId == Id select sel).Count();  // Id is current model Id.\n</code></pre>\n\n<p>Based on the parent table Id, i need to get the child table records count.</p>\n\n<p><strong>Example</strong></p>\n\n<p>Parent Table</p>\n\n<pre><code> Id                  Name\n\n  1                   XYZ\n  2                   ABC\n</code></pre>\n\n<p>Child Table</p>\n\n<pre><code>Id         P_Id\n\n 1          1\n 2          1\n 3          2\n\n\nDetCount = (from sel in db.child where sel.P_Id == Id select sel).Count(); // if Id= 1\n</code></pre>\n\n<p><strong>Result</strong></p>\n\n<pre><code>DetCount = 2;\n</code></pre>\n\n<p>I have written the code something like this.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>model = ...\nselect new porders\n                     {\n                         Id = p.Id,  //This Id is passed to next statement for DetCount.\n                         DetCount = (from sel in db.PoDetails where sel.PoId == Id select sel).Count();    // I need to pass value from another linq query.\n                      }\n</code></pre>\n\n<p>Please help me for this.</p>\n\n<p>Thanks,</p>\n"},{"tags":["javascript","asp.net-mvc-3","knockout.js","upshot"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":99,"score":1,"question_id":12659544,"title":"How do I access descendants from a different branch in the same viewModel?","body":"<p>I am currently working on a website spa application and attempting to use knockout.js. it's on an mvc platform with and a dbdatacontroller api using upshot for data and javascript view models. I have a complex view model and am running into difficulty, mainly due to being new to knockout. My biggest problem seems to be in accessing the observables. The database is organized thusly:</p>\n\n<pre><code>    function AdvanceSearch(data) {\nvar self = this;\nself.AdvanceSearchID = ko.observable(data.AdvanceSearchID);\nself.FieldTypeEnum = ko.observable(data.FieldTypeEnum);\nself.AnswerType = ko.observable(data.AnswerType);\nself.UserValues = ko.observableArray(ko.utils.arrayMap(data.UserValues, function (item) {\n    return new UserValue(item);\n}));\nupshot.addEntityProperties(self, \"AdvanceSearch:#A.Lib.Repository\");\n};\n\nfunction UserValue(data) {\nvar self = this;\n\nself.UserProfileID = ko.observable(data.UserProfileID);\nself.LoginID = ko.observable(data.LoginID);\nself.AdvanceSearchID = ko.observable(data.AdvanceSearchID);\nself.FieldValueCount = ko.observable(data.FieldValueCount);\nself.FieldValueText = ko.observable(data.FieldValueText);\n    upshot.addEntityProperties(self, \"UserValue:#A.Lib.Repository\");\n});\n};\n\n\nfunction AnswerType(data) {\nvar self = this;\nself.AnswerTypeID = ko.observable(data.AnswerTypeID);\nself.AnswerTypeText = ko.observable(data.AnswerTypeText);\nself.Answers = ko.observableArray(ko.utils.arrayMap(data.Answers, function (item) {\n    return new Answer(item);\n}));\nself.AnswerSliders = ko.observableArray(ko.utils.arrayMap(data.AnswerSliders, function (item) {\n    return new AnswerSlider(item);\n}));\nupshot.addEntityProperties(self, \"AnswerType:#A.Lib.Repository\");\n}\n\nfunction Answer(data) {\nvar self = this;\nself.AnswerTypeID = ko.observable(data.AnswerTypeID);\nself.AnswerEnum = ko.observable(data.AnswerEnum);\nself.AnswerText = ko.observable(data.AnswerText);\nupshot.addEntityProperties(self, \"Answer:#A.Lib.Repository\");\n}\n\nfunction AnswerSlider(data) {\nvar self = this;\nself.SliderID = ko.observable(data.SliderID);\nself.AnswerTypeID = ko.observable(data.AnswerTypeID);\nself.SliderType = ko.observable(data.SliderType);\nself.Seed = ko.observable(data.Seed);\nupshot.addEntityProperties(self, \"AnswerSlider:#A.Lib.Repository\");\n}\n</code></pre>\n\n<p>And my view model is just this:</p>\n\n<pre><code>function ASViewModel() {\n// Private\nvar self = this;\nvar dataSourceOptions = {\n    providerParameters: {\n        url: \"/api/Dating\",\n        operationName: \"GetDatingProfile\"\n    },\n    entityType: \"AdvanceSearch:#A.Lib.Repository\",\n    bufferChanges: false,\n    mapping: AdvanceSearch\n};\n\n// Public Properties\nself.dataSource = new upshot.RemoteDataSource(dataSourceOptions)\n                            .refresh();\nself.AdvanceSearchs = self.dataSource.getEntities();\n}\n</code></pre>\n\n<p>So my markup is something like</p>\n\n<pre><code>    &lt;ol data-bind=\"foreach: AdvanceSearch\"&gt;\n   &lt;!-- ko if: FieldTypeEnum()===5 --&gt;\n       &lt;select data-bind=\"options: AnswerType().Answers, optionsText: 'AnswerText', optionsValue: 'AnswerEnum', optionsCaption: 'Not Specified', value: UserValues().FieldValueText\"&gt;&lt;/select&gt;\n   &lt;!-- /ko --&gt;\n    &lt;!-- ko if: FieldTypeEnum()===11 --&gt;\n        &lt;input type=\"text\" class=\"multilinetext\" data-bind=\"attr: { id: 'value_'+AdvanceSearchID()}, value: UserValues().FieldValueText\" /&gt;\n    &lt;!-- /ko --&gt;\n</code></pre>\n\n<p>So basically, no matter what I do, I cannot seem to access the values of the items. Anywhere I have accessed the one branch, ie. <code>AdvanceSearch().AnswerType().Answers</code>, trying to get <code>$parents[1].UserValues[].FieldValueText</code> seems always to be undefined. Like I said, I'm new to knockout, so I'm probably just missing something. Or should I be using multiple viewmodels or something similar? (And if so, how would I do that?)\nThanks.</p>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-slider"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":112,"score":1,"question_id":12708882,"title":"jQuery Slider in IE","body":"<p>I'm using a page with lot's of jquery sliders. Everything works fine in Chrome, Firefox, Safari, ...\nBut sometimes it doesn't work in Internet Explorer. And with sometimes I mean that it's really random. It's really strange.\nMost of the time I get all of the sliders, sometimes I get none and sometimes a get some of the sliders.</p>\n\n<p>It's an ASP.NET MVC 3 project and I'm using one view with multiple EditorTemplates.\nThere is jquery code inside the View and inside the Editor Templates.\n(I'm just mentioning this to see if this could be a problem)</p>\n\n<p>Has anyone seen this behavior before?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Here's my code.</p>\n\n<p>My View:</p>\n\n<pre><code>    &lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        $(\".guideSlider\").slider({\n            range: \"min\",\n            value: 0,\n            min: 0,\n            max: 7,\n            step: 1,\n            disabled: true,\n            animate: true\n        });\n        $(\".average\").slider({\n            range: \"min\",\n            min: 0,\n            max: 7,\n            step: 0.1,\n            animate: true,\n            disabled: true\n        });\n        var current = 0;\n        var currentPage = 1;\n        $(\".next\").click(function (e) {\n            e.preventDefault();\n            if (submitForm(currentPage)) {\n                currentPage++;\n                current += 600;\n                $('#wrapper').animate({\n                    scrollLeft: current\n                }, 1000);\n            }\n            return false;\n        });\n\n        $(\"#toOpenQuestions\").click(function (e) {\n            if (!submitForm(currentPage)) {\n                e.preventDefault();\n                return false;\n            }\n            return true;\n        });\n\n        $(\".previous\").click(function (e) {\n            e.preventDefault();\n            currentPage--;\n            current -= 600;\n            $('#wrapper').animate({\n                scrollLeft: current\n            }, 1000);\n            return false;\n        });\n        $(\".matrixItem .slider\").bind(\"slidestop\", function () {\n            var competenceId = $(this).parents(\"div[id$=competence]\").attr(\"id\");\n            setAverage(competenceId);\n        });\n        $(\"form\").submit(function () {\n            $.ajax({\n                url: this.action,\n                type: this.method,\n                data: $(this).serialize()\n            });\n            return false;\n        });\n    });\n\n    function setAverage(competenceId) {\n        var counter = 0;\n        var value = 0;\n        $(\"#\" + competenceId + \" div.matrixItem div.slider\").each(function () {\n            var itemValue = $(this).slider(\"value\");\n            if (itemValue &gt; 0) {\n                counter++;\n                value += itemValue;\n            }\n        });\n        if (counter &gt; 0)\n            value = value / counter;\n        $(\"#\" + competenceId + \" div.ui-state-active div.average\").slider(\"value\", value);\n    }\n\n    function submitForm(currentPage) {\n        var valid = true;\n        $(\"#page\" + currentPage + \" .competenceWrapper\").each(function () {\n            var counter = 0;\n            $(this).children(\"div.matrixItem\").children(\"div.slider\").each(function () {\n                var itemValue = $(this).slider(\"value\");\n                if (itemValue &gt; 0) {\n                    counter++;\n                }\n            });\n            if (counter &lt; 2) valid = false;\n        });\n        if (valid)\n            $(\"#matrixForm\").submit();\n        else\n            alert(\"You have to provide a score for at least 2 items per Competence\");\n\n        return valid;\n    }\n\n&lt;/script&gt;\n&lt;style type=\"text/css\"&gt;\n    .ui-slider-handle\n    {\n        z-index: 101 !important;\n    }\n&lt;/style&gt;\n&lt;div class=\"myVdp\"&gt;\n    &lt;div id=\"wrapper\"&gt;\n        &lt;div id=\"mask\"&gt;\n            @using (Html.BeginForm(\"Matrix\", \"Home\", FormMethod.Post, new { id = \"matrixForm\" }))\n            {\n                @Html.HiddenFor(m =&gt; m.RequestId)\n                @Html.EditorFor(m =&gt; m.Pages)\n            }\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        $(\"div[id$=competence]\").each(function () {\n            var competenceId = $(this).attr(\"id\");\n            setAverage(competenceId);\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>MatrixPage EditorTemplate</p>\n\n<pre><code>    @{ \n    string pageId = \"page\" + Model.PageNumber;\n    string progressBarId = \"progressBar\" + Model.PageNumber;\n    string guideClass = (Model.PageNumber % 2 == 0) ? \"normal\" : \"flipBg\";\n}\n&lt;div id=\"@pageId\" class=\"item\"&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        $(document).ready(function () {\n            var value = ((@Model.PageNumber-1)/@ViewBag.TotalPages)*100;\n            $(\"#@progressBarId\").progressbar({ value: value });\n        });     \n    &lt;/script&gt;\n    &lt;div id=\"guideBgColor\" class=\"@guideClass\"&gt;\n        &lt;div id=\"guideBgImage\" class=\"@guideClass\"&gt;\n            &lt;div id=\"guide\"&gt;\n                &lt;span id=\"zero\"&gt;No score&lt;/span&gt; &lt;span id=\"one\"&gt;High need for improvement&lt;/span&gt;\n                &lt;span id=\"seven\"&gt;Being a grandmaster&lt;/span&gt;\n                &lt;div class=\"sliderBackground\"&gt;\n                    &amp;nbsp;&lt;/div&gt;\n                &lt;div class=\"slider guideSlider\"&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;ul id=\"score\"&gt;\n                &lt;li&gt;0&lt;/li&gt;\n                &lt;li&gt;1&lt;/li&gt;\n                &lt;li&gt;2&lt;/li&gt;\n                &lt;li&gt;3&lt;/li&gt;\n                &lt;li&gt;4&lt;/li&gt;\n                &lt;li&gt;5&lt;/li&gt;\n                &lt;li&gt;6&lt;/li&gt;\n                &lt;li class=\"lastItem\"&gt;7&lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    @{\n        &lt;div class=\"innerPage\"&gt;\n            @Html.EditorFor(m =&gt; m.MatrixCompetences)\n        &lt;/div&gt;\n        &lt;div class=\"progressbar\" id=\"@progressBarId\"&gt;\n        &lt;/div&gt;\n        if (Model.PageNumber &gt; 1)\n        {\n            string previousPage = \"page\" + (Model.PageNumber - 1);\n        &lt;a href=\"#@previousPage\" class=\"previous\"&gt;\n            &lt;img src=\"@Url.Content(\"~/Content/Images/Left.png\")\" alt=\"previous\" /&gt;&lt;/a&gt;\n        }\n\n        if (Model.PageNumber &lt; ViewBag.TotalPages)\n        {\n            string nextPage = \"page\" + (Model.PageNumber + 1);\n        &lt;a href=\"#@nextPage\" class=\"next\"&gt;\n            &lt;img src=\"@Url.Content(\"~/Content/Images/right.png\")\" alt=\"next\" /&gt;&lt;/a&gt;\n        }\n        else\n        {\n        &lt;a href=\"@Url.Action(\"MatrixOpenQuestions\", \"Home\", new { requestId = @ViewBag.requestId })\" id=\"toOpenQuestions\"&gt;\n            &lt;img src=\"@Url.Content(\"~/Content/Images/right.png\")\" alt=\"next\" /&gt;&lt;/a&gt;\n        }\n    }\n&lt;/div&gt;\n</code></pre>\n\n<p>MatrixCompetence EditorTemplate</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        $(\"#@Model.CompetenceId.ToString()_competence .slider .ui-slider-range\").css(\"background\", \"@Model.ColorHex\");\n        $(\"#@Model.CompetenceId.ToString()_competence .slider .ui-slider-handle\").css(\"border-color\", \"@Model.ColorHex\");\n    });                     \n&lt;/script&gt;\n&lt;div id=\"@Model.CompetenceId.ToString()_competence\" class=\"competenceWrapper\"&gt;\n    &lt;div class=\"ui-state-active competence\"&gt;\n        &lt;div class=\"competenceText\"&gt;@Model.Text&lt;/div&gt;\n        &lt;div class=\"slider average\"&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    @Html.EditorFor(m =&gt; Model.MatrixItems)\n&lt;/div&gt;\n</code></pre>\n\n<p>MatrixItem EditorTemplate</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n        $(\"#@Model.ItemId\").slider({\n            range: \"min\",\n            value: @Model.Score,\n            min: 0,\n            max: 7,\n            step: 1,\n            animate: true,\n            slide: function(event,ui) {\n                $(this).siblings(\"input[id$=Score]\").val(ui.value);\n            }\n        });\n        $(\"#@Model.ItemId  .ui-slider-range\").css(\"background\", \"@Model.ColorHex\");\n        $(\"#@Model.ItemId  .ui-slider-handle\").css(\"border-color\", \"@Model.ColorHex\");\n    });\n&lt;/script&gt;\n&lt;div class=\"matrixItem\"&gt;\n    &lt;div class=\"itemText\"&gt;\n        @Model.Text&lt;/div&gt;\n    &lt;div class=\"sliderBackground\"&gt;\n        &amp;nbsp;&lt;/div&gt;\n    &lt;div id=\"@Model.ItemId\" class=\"slider\"&gt;\n    &lt;/div&gt;\n    @Html.HiddenFor(m=&gt;Model.ItemId)\n    @Html.HiddenFor(m =&gt; Model.Score)\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Here's a screenshot. You can see that a few sliders are generated, but after 3 it suddendly doesn't work.\n<img src=\"http://i.stack.imgur.com/pMf04.png\" alt=\"screenshot\"></p>\n\n<p>After pressing F5, it shows this. That should be the case from the start.</p>\n\n<p><img src=\"http://i.stack.imgur.com/1j0s1.png\" alt=\"after refresh\"></p>\n\n<p>This is one page of the \"live\" code.</p>\n\n<pre><code>&lt;div id=\"page1\" class=\"item\"&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        $(document).ready(function () {\n            var value = ((1-1)/11)*100;\n            $(\"#progressBar1\").progressbar({ value: value });\n        });     \n    &lt;/script&gt;\n    &lt;div id=\"guideBgColor\" class=\"flipBg\"&gt;\n        &lt;div id=\"guideBgImage\" class=\"flipBg\"&gt;\n            &lt;div id=\"guide\"&gt;\n                &lt;span id=\"zero\"&gt;No score&lt;/span&gt; &lt;span id=\"one\"&gt;High need for improvement&lt;/span&gt;\n                &lt;span id=\"seven\"&gt;Being a grandmaster&lt;/span&gt;\n                &lt;div class=\"sliderBackground\"&gt;\n                    &amp;nbsp;&lt;/div&gt;\n                &lt;div class=\"slider guideSlider\"&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;ul id=\"score\"&gt;\n                &lt;li&gt;0&lt;/li&gt;\n                &lt;li&gt;1&lt;/li&gt;\n                &lt;li&gt;2&lt;/li&gt;\n                &lt;li&gt;3&lt;/li&gt;\n                &lt;li&gt;4&lt;/li&gt;\n                &lt;li&gt;5&lt;/li&gt;\n                &lt;li&gt;6&lt;/li&gt;\n                &lt;li class=\"lastItem\"&gt;7&lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n        &lt;div class=\"innerPage\"&gt;\n            &lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        $(\"#1_competence .slider .ui-slider-range\").css(\"background\", \"#004c97\");\n        $(\"#1_competence .slider .ui-slider-handle\").css(\"border-color\", \"#004c97\");\n    });                     \n&lt;/script&gt;\n&lt;div id=\"1_competence\" class=\"competenceWrapper\"&gt;\n    &lt;div class=\"ui-state-active competence\"&gt;\n        &lt;div class=\"competenceText\"&gt;Structured&lt;/div&gt;\n        &lt;div class=\"slider average\"&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n        $(\"#1\").slider({\n            range: \"min\",\n            value: 0,\n            min: 0,\n            max: 7,\n            step: 1,\n            animate: true,\n            slide: function(event,ui) {\n                $(this).siblings(\"input[id$=Score]\").val(ui.value);\n            }\n        });\n        $(\"#1  .ui-slider-range\").css(\"background\", \"#004c97\");\n        $(\"#1  .ui-slider-handle\").css(\"border-color\", \"#004c97\");\n    });\n&lt;/script&gt;\n&lt;div class=\"matrixItem\"&gt;\n    &lt;div class=\"itemText\"&gt;\n        He is organised and works in a structured manner.&lt;/div&gt;\n    &lt;div class=\"sliderBackground\"&gt;\n        &amp;nbsp;&lt;/div&gt;\n    &lt;div id=\"1\" class=\"slider\"&gt;\n    &lt;/div&gt;\n    &lt;input data-val=\"true\" data-val-number=\"The field ItemId must be a number.\" data-val-required=\"The ItemId field is required.\" id=\"Pages_0__MatrixCompetences_0__MatrixItems_0__ItemId\" name=\"Pages[0].MatrixCompetences[0].MatrixItems[0].ItemId\" type=\"hidden\" value=\"1\" /&gt;\n    &lt;input data-val=\"true\" data-val-number=\"The field Score must be a number.\" data-val-required=\"The Score field is required.\" id=\"Pages_0__MatrixCompetences_0__MatrixItems_0__Score\" name=\"Pages[0].MatrixCompetences[0].MatrixItems[0].Score\" type=\"hidden\" value=\"0\" /&gt;\n&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n        $(\"#2\").slider({\n            range: \"min\",\n            value: 0,\n            min: 0,\n            max: 7,\n            step: 1,\n            animate: true,\n            slide: function(event,ui) {\n                $(this).siblings(\"input[id$=Score]\").val(ui.value);\n            }\n        });\n        $(\"#2  .ui-slider-range\").css(\"background\", \"#004c97\");\n        $(\"#2  .ui-slider-handle\").css(\"border-color\", \"#004c97\");\n    });\n&lt;/script&gt;\n&lt;div class=\"matrixItem\"&gt;\n    &lt;div class=\"itemText\"&gt;\n        He sets priorities and deadlines.&lt;/div&gt;\n    &lt;div class=\"sliderBackground\"&gt;\n        &amp;nbsp;&lt;/div&gt;\n    &lt;div id=\"2\" class=\"slider\"&gt;\n    &lt;/div&gt;\n    &lt;input data-val=\"true\" data-val-number=\"The field ItemId must be a number.\" data-val-required=\"The ItemId field is required.\" id=\"Pages_0__MatrixCompetences_0__MatrixItems_1__ItemId\" name=\"Pages[0].MatrixCompetences[0].MatrixItems[1].ItemId\" type=\"hidden\" value=\"2\" /&gt;\n    &lt;input data-val=\"true\" data-val-number=\"The field Score must be a number.\" data-val-required=\"The Score field is required.\" id=\"Pages_0__MatrixCompetences_0__MatrixItems_1__Score\" name=\"Pages[0].MatrixCompetences[0].MatrixItems[1].Score\" type=\"hidden\" value=\"0\" /&gt;\n&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n        $(\"#3\").slider({\n            range: \"min\",\n            value: 0,\n            min: 0,\n            max: 7,\n            step: 1,\n            animate: true,\n            slide: function(event,ui) {\n                $(this).siblings(\"input[id$=Score]\").val(ui.value);\n            }\n        });\n        $(\"#3  .ui-slider-range\").css(\"background\", \"#004c97\");\n        $(\"#3  .ui-slider-handle\").css(\"border-color\", \"#004c97\");\n    });\n&lt;/script&gt;\n&lt;div class=\"matrixItem\"&gt;\n    &lt;div class=\"itemText\"&gt;\n        He plans well in advance.&lt;/div&gt;\n    &lt;div class=\"sliderBackground\"&gt;\n        &amp;nbsp;&lt;/div&gt;\n    &lt;div id=\"3\" class=\"slider\"&gt;\n    &lt;/div&gt;\n    &lt;input data-val=\"true\" data-val-number=\"The field ItemId must be a number.\" data-val-required=\"The ItemId field is required.\" id=\"Pages_0__MatrixCompetences_0__MatrixItems_2__ItemId\" name=\"Pages[0].MatrixCompetences[0].MatrixItems[2].ItemId\" type=\"hidden\" value=\"3\" /&gt;\n    &lt;input data-val=\"true\" data-val-number=\"The field Score must be a number.\" data-val-required=\"The Score field is required.\" id=\"Pages_0__MatrixCompetences_0__MatrixItems_2__Score\" name=\"Pages[0].MatrixCompetences[0].MatrixItems[2].Score\" type=\"hidden\" value=\"0\" /&gt;\n&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n        $(\"#4\").slider({\n            range: \"min\",\n            value: 0,\n            min: 0,\n            max: 7,\n            step: 1,\n            animate: true,\n            slide: function(event,ui) {\n                $(this).siblings(\"input[id$=Score]\").val(ui.value);\n            }\n        });\n        $(\"#4  .ui-slider-range\").css(\"background\", \"#004c97\");\n        $(\"#4  .ui-slider-handle\").css(\"border-color\", \"#004c97\");\n    });\n&lt;/script&gt;\n&lt;div class=\"matrixItem\"&gt;\n    &lt;div class=\"itemText\"&gt;\n        He arrives on time.&lt;/div&gt;\n    &lt;div class=\"sliderBackground\"&gt;\n        &amp;nbsp;&lt;/div&gt;\n    &lt;div id=\"4\" class=\"slider\"&gt;\n    &lt;/div&gt;\n    &lt;input data-val=\"true\" data-val-number=\"The field ItemId must be a number.\" data-val-required=\"The ItemId field is required.\" id=\"Pages_0__MatrixCompetences_0__MatrixItems_3__ItemId\" name=\"Pages[0].MatrixCompetences[0].MatrixItems[3].ItemId\" type=\"hidden\" value=\"4\" /&gt;\n    &lt;input data-val=\"true\" data-val-number=\"The field Score must be a number.\" data-val-required=\"The Score field is required.\" id=\"Pages_0__MatrixCompetences_0__MatrixItems_3__Score\" name=\"Pages[0].MatrixCompetences[0].MatrixItems[3].Score\" type=\"hidden\" value=\"0\" /&gt;\n&lt;/div&gt;\n\n&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        $(\"#2_competence .slider .ui-slider-range\").css(\"background\", \"#004c97\");\n        $(\"#2_competence .slider .ui-slider-handle\").css(\"border-color\", \"#004c97\");\n    });                     \n&lt;/script&gt;\n&lt;div id=\"2_competence\" class=\"competenceWrapper\"&gt;\n    &lt;div class=\"ui-state-active competence\"&gt;\n        &lt;div class=\"competenceText\"&gt;Result Oriented&lt;/div&gt;\n        &lt;div class=\"slider average\"&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n        $(\"#5\").slider({\n            range: \"min\",\n            value: 0,\n            min: 0,\n            max: 7,\n            step: 1,\n            animate: true,\n            slide: function(event,ui) {\n                $(this).siblings(\"input[id$=Score]\").val(ui.value);\n            }\n        });\n        $(\"#5  .ui-slider-range\").css(\"background\", \"#004c97\");\n        $(\"#5  .ui-slider-handle\").css(\"border-color\", \"#004c97\");\n    });\n&lt;/script&gt;\n&lt;div class=\"matrixItem\"&gt;\n    &lt;div class=\"itemText\"&gt;\n        He sets achievable goals/priorities.&lt;/div&gt;\n    &lt;div class=\"sliderBackground\"&gt;\n        &amp;nbsp;&lt;/div&gt;\n    &lt;div id=\"5\" class=\"slider\"&gt;\n    &lt;/div&gt;\n    &lt;input data-val=\"true\" data-val-number=\"The field ItemId must be a number.\" data-val-required=\"The ItemId field is required.\" id=\"Pages_0__MatrixCompetences_1__MatrixItems_0__ItemId\" name=\"Pages[0].MatrixCompetences[1].MatrixItems[0].ItemId\" type=\"hidden\" value=\"5\" /&gt;\n    &lt;input data-val=\"true\" data-val-number=\"The field Score must be a number.\" data-val-required=\"The Score field is required.\" id=\"Pages_0__MatrixCompetences_1__MatrixItems_0__Score\" name=\"Pages[0].MatrixCompetences[1].MatrixItems[0].Score\" type=\"hidden\" value=\"0\" /&gt;\n&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n        $(\"#6\").slider({\n            range: \"min\",\n            value: 0,\n            min: 0,\n            max: 7,\n            step: 1,\n            animate: true,\n            slide: function(event,ui) {\n                $(this).siblings(\"input[id$=Score]\").val(ui.value);\n            }\n        });\n        $(\"#6  .ui-slider-range\").css(\"background\", \"#004c97\");\n        $(\"#6  .ui-slider-handle\").css(\"border-color\", \"#004c97\");\n    });\n&lt;/script&gt;\n&lt;div class=\"matrixItem\"&gt;\n    &lt;div class=\"itemText\"&gt;\n        He focuses on the result.&lt;/div&gt;\n    &lt;div class=\"sliderBackground\"&gt;\n        &amp;nbsp;&lt;/div&gt;\n    &lt;div id=\"6\" class=\"slider\"&gt;\n    &lt;/div&gt;\n    &lt;input data-val=\"true\" data-val-number=\"The field ItemId must be a number.\" data-val-required=\"The ItemId field is required.\" id=\"Pages_0__MatrixCompetences_1__MatrixItems_1__ItemId\" name=\"Pages[0].MatrixCompetences[1].MatrixItems[1].ItemId\" type=\"hidden\" value=\"6\" /&gt;\n    &lt;input data-val=\"true\" data-val-number=\"The field Score must be a number.\" data-val-required=\"The Score field is required.\" id=\"Pages_0__MatrixCompetences_1__MatrixItems_1__Score\" name=\"Pages[0].MatrixCompetences[1].MatrixItems[1].Score\" type=\"hidden\" value=\"0\" /&gt;\n&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n        $(\"#7\").slider({\n            range: \"min\",\n            value: 0,\n            min: 0,\n            max: 7,\n            step: 1,\n            animate: true,\n            slide: function(event,ui) {\n                $(this).siblings(\"input[id$=Score]\").val(ui.value);\n            }\n        });\n        $(\"#7  .ui-slider-range\").css(\"background\", \"#004c97\");\n        $(\"#7  .ui-slider-handle\").css(\"border-color\", \"#004c97\");\n    });\n&lt;/script&gt;\n&lt;div class=\"matrixItem\"&gt;\n    &lt;div class=\"itemText\"&gt;\n        He meets his deadlines.&lt;/div&gt;\n    &lt;div class=\"sliderBackground\"&gt;\n        &amp;nbsp;&lt;/div&gt;\n    &lt;div id=\"7\" class=\"slider\"&gt;\n    &lt;/div&gt;\n    &lt;input data-val=\"true\" data-val-number=\"The field ItemId must be a number.\" data-val-required=\"The ItemId field is required.\" id=\"Pages_0__MatrixCompetences_1__MatrixItems_2__ItemId\" name=\"Pages[0].MatrixCompetences[1].MatrixItems[2].ItemId\" type=\"hidden\" value=\"7\" /&gt;\n    &lt;input data-val=\"true\" data-val-number=\"The field Score must be a number.\" data-val-required=\"The Score field is required.\" id=\"Pages_0__MatrixCompetences_1__MatrixItems_2__Score\" name=\"Pages[0].MatrixCompetences[1].MatrixItems[2].Score\" type=\"hidden\" value=\"0\" /&gt;\n&lt;/div&gt;\n\n&lt;/div&gt;\n\n        &lt;/div&gt;\n        &lt;div class=\"progressbar\" id=\"progressBar1\"&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>Hopefully you guys can help me out. Because I don't know what to try anymore.</p>\n\n<p>Kind Regards\nTim</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","unit-testing","nunit"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":100,"score":2,"question_id":12012044,"title":"TryUpdateModel fails only in unit tests to update child objects","body":"<p>I am able to get the following code to work on the server, but not in a unit test. In the unit test, the simple properties are set correctly, but the child objects are not. I've been beating my head against the wall for too long, so any advice would be welcome.</p>\n\n<h3>Controller:</h3>\n\n<pre><code>[HttpPost]\npublic bool Save(int id)\n{\n        var itemFromRepository = this.itemRepository.FetchById(id);\n\n        if (itemFromRepository != null)\n        {\n            this.TryUpdateModel(\n                itemFromRepository,\n                \"Item\",\n                new[] { \n                    \"AnIntProperty\", \n                    \"AStringProperty\",\n                    \"Category.Id\"\n                });\n\n            if (itemFromRepository.Category!= null)\n            {\n                itemFromRepository.Category= this.categoryRepository.FetchById(itemFromRepository.Category.Id);\n            }\n\n            if (ModelState.IsValid)\n            {\n                this.itemRepository.Update(itemFromRepository);\n                return true;\n            }\n        }\n\n        return false;\n}\n</code></pre>\n\n<h3>UnitTest:</h3>\n\n<pre><code>    this._controller.ControllerContext = new ControllerContext();\n    Item item = this.items.First();\n    var updatedCategory = this.categories.Last();\n    var updatedStringProperty = \"Fake Value\";\n    var updatedIntProperty = 4;\n\n    var formValues = new FormCollection {\n        { \"Item.AnIntProperty\", updatedStringProperty},\n        { \"Item.Category.Id\", updatedCategory.Id.ToString() },\n        { \"Item.AStringProperty\", updatedIntProperty.ToString() }\n    };\n\n    var result = this._controller\n        .WithIncomingValues(formValues)\n        .Save(item.Id);\n</code></pre>\n\n<p>This passes:</p>\n\n<pre><code>    Assert.That(\n        item.AStringProperty,\n        Is.EqualTo(updatedStringProperty));\n    Assert.That(\n        item.AnIntProperty,\n        Is.EqualTo(updatedIntProperty));\n</code></pre>\n\n<p>This doesn't:</p>\n\n<pre><code>    Assert.That(\n        item.Category,\n        Is.Not.Null);\n    Assert.That(\n        item.Category.Name,\n        Is.EqualTo(updatedCategory.Name));\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","entity-framework","razor"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":11810558,"title":"MVC 3 - Exception Details: System.InvalidOperationException","body":"<p>I trying  get all data from my two tables but I have a lot of compile problems. Do you know where is it problem? Also I would like to declaration two tables here return \"View(repository.Towar);\" Now is visible one but I don`t know what should I do also this \"se.Towar_zakupiony\". </p>\n\n<p><strong>I found solution myself:</strong> </p>\n\n<p>code:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing SportsStore.Abstract;\nusing SportsStore.Entities;\n\nnamespace SportsStore.WebUI.Controllers\n{\n    public class ProductController : Controller\n    {\n        //\n        // GET: /Product/\n            public ITowarRepository repository;\n            public IKategorieRepository re;\n\n            public ProductController(ITowarRepository productRepository, IKategorieRepository kategorie) \n            {\n            repository = productRepository;\n            re = kategorie;\n            }\n\n            public ViewResult List()\n            {\n                SomeViewModel viewModel = new SomeViewModel\n                {\n                    Towar = repository.Towar\n                    .OrderBy(p =&gt; p.Id_tow),\n                    Kategorie = re.Kategorie\n                    .OrderBy(p =&gt; p.Id_kat)\n\n                };\n\n                return View(viewModel);\n            }\n\n    }\n}\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\n\nnamespace SportsStore.Entities\n{\n    public class SomeViewModel\n    {\n        public IEnumerable&lt;SportsStore.Entities.Towar&gt; Towar { get; set; }\n        public IEnumerable&lt;SportsStore.Entities.Kategorie&gt; Kategorie { get; set; }\n        public IEnumerable&lt;SportsStore.Entities.Zdjecie&gt; Zdjecie { get; set; }\n        public IEnumerable&lt;SportsStore.Entities.Typ_zdjecia&gt; Typ_zdjecia { get; set; }\n        public IEnumerable&lt;SportsStore.Entities.Zakup&gt; Zakup { get; set; }\n        public IEnumerable&lt;SportsStore.Entities.Adres&gt; Adres { get; set; }\n        public IEnumerable&lt;SportsStore.Entities.Status&gt; Status { get; set; }\n        public IEnumerable&lt;SportsStore.Entities.Towar_Zakupiony&gt; Towar_zakupiony { get; set; }\n\n\n    }\n}\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>@model SportsStore.Entities.SomeViewModel\n\n@{\n    ViewBag.Title = \"List\";\n    Layout = \"~/Views/Shared/_Layout.cshtml\";\n}\n\n&lt;h2&gt;List&lt;/h2&gt;\n\n@foreach (var p in Model.Towar)\n{\n&lt;div class=\"item\"&gt;\n&lt;h3&gt;@p.Nazwa&lt;/h3&gt;\n@p.Opis\n&lt;h4&gt;@p.Cena.ToString(\"c\")&lt;/h4&gt;\n&lt;/div&gt;\n}\n\n&lt;h2&gt;List&lt;/h2&gt;\n\n@foreach (var b in Model.Kategorie)\n{\n&lt;div class=\"item\"&gt;\n&lt;h3&gt;@b.Nazwa&lt;/h3&gt;\n&lt;/div&gt;\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12777655,"title":"How to create aDropDown list list from IDictionary<string, string> using Razor in ASp.Net Mvc3","body":"<p>How to create a DropDown list from IDictionary using Razor in ASp.Net Mvc3?? I=m trying the following code wit no success.</p>\n\n<pre><code> public IDictionary&lt;string, string&gt; CandidatesList = new Dictionary&lt;string, string&gt;();\n\n\n    Html.DropDownListFor(modal =&gt; modal.CandidatesList, new SelectList(Model.CandidatesList, \"Value\", \"Key\"))\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","entity-framework","mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12777458,"title":"How To Get Value From DB While Editting Entry with Null value","body":"<p><strong>Error Message:</strong>\nAn object with the same key already exists in the ObjectStateManager. The ObjectStateManager cannot track multiple objects with the same key.</p>\n\n<p>I want to get Image Url from database if fileupload has null value(not change).\nI mean if i change smallImage and not change LargeImage,then it should get largeImage value from DB.</p>\n\n<pre><code>[HttpPost]\n    public ActionResult Edit(Blog blog, HttpPostedFileBase smallImage, HttpPostedFileBase largeImage)\n    {\n        if (ModelState.IsValid)\n        {\n            if (smallImage != null)\n            {\n                blog.SmallImage = smallImage.ContentLength + \"_\" + smallImage.FileName;\n                string filepath = Path.Combine(Server.MapPath(\"~/Content/Blog/\"), smallImage.ContentLength + \"_\" + smallImage.FileName);\n                smallImage.SaveAs(filepath);\n            }\n            else\n            {\n                blog.SmallImage = db.Blogs.Find(blog.ID).SmallImage;\n            }\n            if (largeImage != null)\n            {\n                blog.LargeImage = largeImage.ContentLength + \"_\" + largeImage.FileName;\n                string filepath = Path.Combine(Server.MapPath(\"~/Content/Blog/\"), largeImage.ContentLength + \"_\" + largeImage.FileName);\n                largeImage.SaveAs(filepath);\n            }\n            else\n            {\n                blog.LargeImage = db.Blogs.Find(blog.ID).LargeImage;\n            }\n            blog.PostDate = Convert.ToDateTime(DateTime.Now.ToShortDateString());\n            db.Entry(blog).State = EntityState.Modified;\n            db.SaveChanges();\n            return RedirectToAction(\"Index\");\n        }\n        return View(blog);\n    }\n</code></pre>\n\n<p>Thank you.</p>\n"},{"tags":["javascript","ajax","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12776495,"title":"call controller Actinresult type action from javascript with parameter","body":"<p>I try following way :</p>\n\n<p>My Action is :</p>\n\n<pre><code>[HttpPost]\n        public ActionResult PaymentVoucherCommit(string sParameter)\n        {\n            try\n            {\n                _oVoucher = new Voucher();\n                _oVoucher = _oVoucher.CommitVoucherNo(2, 1); // Here 2 refere VoucherTypeID that is PaymentVoucher &amp; 1 refere jam company ID\n                _oVoucher.BaseCurrencyId = 1; //jas......this code is temporary \n                _oVoucher.CompanyID = 1;//jas......this code is temporary \n                _oVoucher.VoucherTypeID = 2;//jam for temporary basis code 2 is paymenttypeid that is payment voucher\n                _oVoucher.CurrencyId = 1;\n                _oVoucher.BaseCurrencyNameSymbol = \"Taka[Tk]\"; //jas......this code is temporary\n                _oVoucher.VoucherDetailLst = VoucherDetail.Gets(_oVoucher.VoucherID);\n                _oVoucher.LstCurrency = Currency.Gets();\n                _oVoucher.Operation = \"AddPaymnetVoucher\";\n                _oVoucher.DebitAccountHeadName = \"Press Enter\";\n                _oVoucher.CreditAccountHeadName = \"Press Enter\";\n                return View(_oVoucher);\n            }\n            catch (Exception ex)\n            {\n                return View(ex.Message);\n            }\n        }\n</code></pre>\n\n<p>And my javascript code is :</p>\n\n<pre><code>$('#btnCommit').keypress(function (e) {\n        debugger;\n        var keyCode = e.keyCode || e.which;\n        if (keyCode == 13) {\n            $.ajax({\n                type: \"POST\",\n                dataType: \"text json\",\n                url: '@Url.Action(\"PaymentVoucherCommit\", \"Voucher\")',\n                data: { sParameter: \"Bangladesh\" },\n                contentType: \"application/json; charset=utf-8\",\n                success: function (data) {\n                    //                        debugger;\n                    alert(data);\n                },\n                error: function (xhr, status, error) {\n                    alert(error);\n                }\n            });\n            return false;\n        }\n    })\n</code></pre>\n\n<p>please fix this bug.</p>\n\n<p>Note : same type of task i am successfully complete for [httpGet] request. But i a triad for post type action(Action Result)</p>\n"},{"tags":["asp.net-mvc-3","authorization"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":299,"score":1,"question_id":10337268,"title":"Setting authorization on a specific ASP .NET MVC 3 field?","body":"<p>Is it possible to set authorization on a specific field in MVC 3?</p>\n\n<p>My initial thought (and MSDN research) indicates that the [Authorize] tag is only for controller level actions (create,edit,index,etc).  I can do this on the controller action:</p>\n\n<pre><code>[Authorize(Roles = \"RoleA,RoleB\")]\n   public ActionResult Create()\n    {            \n        return View(new Tracking());\n    } \n</code></pre>\n\n<p>The scenario is that two roles (RoleA and RoleB) can access the 'Edit' controller.  But only RoleA can change the first field.  The other role (B) can only view the field.</p>\n\n<p>I would like to do something like this on a specific field:</p>\n\n<pre><code>[Required]\n[Range(1, 99)]\n[Authorize(Roles = \"RoleA\")]\npublic int Sequence { get; set; }\n</code></pre>\n\n<p><strong>UPDATE1:</strong></p>\n\n<p>A little more research down the StackOverflow rabbit roles reveals that I need to use partial views.</p>\n\n<p>So in my view I add this code:</p>\n\n<pre><code>&lt;div&gt;\n    @if (Context.User.IsInRole(\"RoleA\"))\n    {\n        @Html.Partial(\"_SequenceEdit\")\n    }\n    else\n    {\n       @Html.Partial(\"_SequenceView\")\n    }\n\n&lt;/div&gt;\n</code></pre>\n\n<p>So if the user is RoleA they get a partial view that allows editing of the 'sequence' field.  Otherwise they get a view only of the 'sequence' field.</p>\n\n<p>My view only partial view looks like this:</p>\n\n<pre><code>&lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Sequence)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.DisplayFor(model =&gt; model.Sequence)\n        @Html.HiddenFor(model =&gt; model.Sequence)\n        @Html.ValidationMessageFor(model =&gt; model.Sequence)\n    &lt;/div&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","design-patterns","viewmodel"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12776119,"title":"Does it make sense to have Business Logic within a ViewModel in MVC?","body":"<p>I'm learning about Design Pattern, at the moment I'm working on Asp.Net MVC using: Repository, Unit-Of-Work patterns, Service Layer and ViewModels.</p>\n\n<p>In this project every View is linked to a ViewModel Class, the Controllers are thin-one, so the Business Layer reside on a Service Layer.</p>\n\n<p>I create instances of ViewModel class in the Controller and pass it to the view like this</p>\n\n<pre><code>    public ActionResult Create()\n    {\n        EventCreateViewModel eventViewModel = new EventCreateViewModel();\n        return View(eventViewModel);\n    }\n</code></pre>\n\n<p>In some ViewModel I use to call the Service Layer.</p>\n\n<p>The system works, but I would like to know if it is a good idea adding call to a Service Layer in the ViewModel or better would be leave this operation only to the Controller.</p>\n\n<hr>\n\n<pre><code> public class EventCreateViewModel\n    {\n\n        public CandidateListViewModel CandidateList = new CandidateListViewModel();\n\n        public EventCreateViewModel()\n        {\n            DateTimeStart = DateTime.UtcNow;    // Add a default value when a Date is not selected\n        }\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\n\nusing System.Web.Mvc;\nusing System.ComponentModel.DataAnnotations;\n\n    using System;\n    using System.Collections.Generic;\n    using System.Linq;\n    using System.Web;\n\n    using XXX.Models;\n    using XXX.Service;\n\n        namespace XXX.ViewModels\n        {\n            public class CandidateListViewModel\n            {\n                // We are using the Service Layer\n                private ICandidateBL serviceCandidate;\n\n                // Property\n                public IDictionary&lt;string, string&gt; Candidates = new Dictionary&lt;string, string&gt;();\n\n                // An utility method that convert a list of Canddates from Enumerable to SortedDictionary\n                // and save the result to an inner SortedDictionary for store\n                public void ConvertSave(IEnumerable&lt;Candidate&gt; candidates)\n                {\n                    Candidates.Add(\"None\", \"0\");    // Add option for no candidate\n                    foreach (var candidate in candidates)\n                        Candidates.Add(candidate.Nominative, candidate.CandidateId.ToString());\n                }\n\n                #region Costructors\n                public CandidateListViewModel()\n                {\n                    serviceCandidate = new CandidateBL();\n                    ConvertSave(serviceCandidate.GetCandidates());\n                }\n\n                // Dependency Injection enabled constructors\n                public CandidateListViewModel(ICandidateBL serviceCandidate)\n                {\n                    this.serviceCandidate = serviceCandidate;\n                }\n\n                public CandidateListViewModel(IEnumerable&lt;Candidate&gt; candidates)\n                {\n                    serviceCandidate = new CandidateBL();\n                    ConvertSave(candidates);\n                }\n                #endregion\n            }\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1120,"score":1,"question_id":9357025,"title":"ASP.NET MVC3: View POSTed model value is NULL","body":"<p>I have the following controller and view. It is listing the values correctly using GET. When I click on the button it causes a POST. However the value received in the controller is NULL. How do we correct it?</p>\n\n<p>HIGHLIGHTED CODE</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult CastVote(IEnumerable&lt;Program&gt; theProgramList)\n</code></pre>\n\n<p>GET Image</p>\n\n<p><img src=\"http://i.stack.imgur.com/n9z6p.jpg\" alt=\"enter image description here\"></p>\n\n<p>CODE</p>\n\n<pre><code> public enum RatingEnum { Poor = 0, Neutral, Good, Excellent };\n\npublic class Program\n{\n    public int ProgramID { get; set; }\n    public string ProgramName { get; set; }\n    public RatingEnum RatingID { get; set; }\n    public string ProgramCategory { get; set; }\n}\n</code></pre>\n\n<p>CONTROLLER</p>\n\n<pre><code>namespace MyProgramRatingApp.Controllers\n{\npublic class ProgramController : Controller\n{\n\n\n\n\n    List&lt;Program&gt; programList = new List&lt;Program&gt;()\n                          {\n                            new Program\n                            {\n                                ProgramID = 1,ProgramName = \"Program1\",\n                                ProgramCategory = \"A\"\n                            },\n                            new Program\n                            {\n                                ProgramID = 2,ProgramName = \"Program2\",\n                                ProgramCategory = \"B\"\n                            },\n                            new Program\n                            {\n                                ProgramID = 3,ProgramName = \"Program3\",\n                                ProgramCategory = \"A\"\n                            }\n\n                          };\n\n\n\n\n    // GET: /Program/\n    public ActionResult CastVote()\n    {\n        ViewBag.RatingEnum = GetRstingSelectList();\n        return View(programList);\n    }\n\n\n    // POST: /StoreManager/Create\n    [HttpPost]\n    public ActionResult CastVote(IEnumerable&lt;Program&gt; theProgramList)\n    {\n        if (ModelState.IsValid)\n        {\n            //Save the book in DB first and then redirectToAction.\n\n\n            return RedirectToAction(\"CastVote\");\n        }\n\n        return View(theProgramList);\n    }\n\n\n    public static SelectList GetRstingSelectList()\n    {\n        Array values = Enum.GetValues(typeof(RatingEnum));\n        List&lt;System.Web.UI.WebControls.ListItem&gt; items = new List&lt;System.Web.UI.WebControls.ListItem&gt;(values.Length);\n\n        foreach (var i in values)\n        {\n            items.Add(new System.Web.UI.WebControls.ListItem\n                                    {\n                                        Text = Enum.GetName(typeof(RatingEnum), i),\n                                        Value = ((int)i).ToString()\n                                    }\n                       );\n        }\n\n        return new SelectList(items);\n    }\n\n\n    }\n}\n</code></pre>\n\n<p>VIEW</p>\n\n<pre><code>@model IEnumerable&lt;MyProgramRatingApp.Program&gt;\n\n@{\nViewBag.Title = \"CastVote\";\n}\n\n&lt;h2&gt;CastVote&lt;/h2&gt;\n\n@using (Html.BeginForm())\n{\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;th style=\"border:1px solid Teal; background-color:Gray\"&gt;\n            ProgramName\n        &lt;/th&gt;\n        &lt;th style=\"border:1px solid Teal; background-color:Gray\"&gt;\n            RatingID\n        &lt;/th&gt;\n        &lt;th style=\"border:1px solid Teal; background-color:Gray\"&gt;\n            ProgramCategory\n        &lt;/th&gt;\n        &lt;th style=\"border:1px solid Teal; background-color:Gray\"&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n\n@foreach (var item in Model)\n{\n    &lt;tr&gt;\n        &lt;td style=\"border:1px solid Teal\"&gt;\n            @Html.DisplayFor(modelItem =&gt; item.ProgramName)\n        &lt;/td&gt;\n        &lt;td style=\"border:1px solid Teal\"&gt;\n            @Html.DisplayFor(modelItem =&gt; item.RatingID)\n        &lt;/td&gt;\n        &lt;td style=\"border:1px solid Teal\"&gt;\n            @Html.DisplayFor(modelItem =&gt; item.ProgramCategory)\n        &lt;/td&gt;\n        &lt;td style=\"border:1px solid Teal\"&gt;\n            @Html.DropDownListFor(model =&gt; item.RatingID, (SelectList)ViewBag.RatingEnum, String.Empty)\n        &lt;/td&gt;\n\n    &lt;/tr&gt;\n}\n\n&lt;/table&gt;\n\n&lt;p&gt;\n    &lt;input type=\"submit\" value=\"Cast Vote\" /&gt;\n&lt;/p&gt;\n\n}\n</code></pre>\n\n<p>READING:</p>\n\n<ol>\n<li><p><a href=\"http://stackoverflow.com/questions/6807256/dropdownlist-set-selected-value-in-mvc3-razor\">dropdownlist set selected value in MVC3 Razor</a></p></li>\n<li><p><a href=\"http://stackoverflow.com/questions/5037580/asp-net-mvc-3-partial-vs-display-template-vs-editor-template\">ASP.NET MVC 3 - Partial vs Display Template vs Editor Template</a></p></li>\n<li><p><a href=\"http://stackoverflow.com/questions/9005785/ienumerable-property-with-mvc3-editortemplate\">IEnumerable property with MVC3 EditorTemplate</a></p></li>\n<li><p>ASP.NET Wire Format for Model Binding to Arrays, Lists, Collections, Dictionaries</p></li>\n<li><p>Model Binding To A List</p></li>\n</ol>\n\n<hr>\n"},{"tags":["asp.net-mvc-3","razor","jqgrid","parameter-passing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":179,"score":0,"question_id":12750172,"title":"MVC3 jqGrid subgrid using subGridrowExpanded","body":"<p>I'm developing an MVC3/razor application, and I am trying to use the subGridRowExpanded to nest a jqGrid inside another (so I can use the formatter amongst other things), how do i pass the id value Of the parent Grid to the Child grid?</p>\n\n<p>The below code runs the main grid, and populates it with Data from the \"Search/Customers\"  URL, but I do not know how to select the record I've Selected in the 'Search/BankLinks' URL controller</p>\n\n<p>Can anyone tell me how to do this?</p>\n\n<p>Thanks in advance\nAndrew.</p>\n\n<p><strong>My Index.cshtml</strong></p>\n\n<pre><code>@{\n    ViewBag.Title = \"Index\";\n}\n\n&lt;h2&gt;@ViewBag.Message&lt;/h2&gt;\n&lt;div id=\"content\"&gt;\n    &lt;div id=\"content-left\"&gt;\n        @Html.Partial(\"SearchPanel\")\n    &lt;/div&gt;\n    &lt;div id=\"content-main\"&gt;\n        &lt;table id=\"jpgCustomers\" cellpadding=\"0\" cellspacing=\"0\"&gt;&lt;/table&gt;\n        &lt;div id=\"jpgpCustomers\" style=\"text-align:center;\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n@section JavaScript\n{\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function ()\n    {\n        $('#jpgCustomers').jqGrid({\n            //url from wich data should be requested\n            url: '@Url.Action(\"Customers\")',\n            datatype: 'json',\n            mtype: 'POST',\n            colNames: ['Name', 'FullName', 'SFTP Enabled', 'IsTranbase'],\n            colModel: [\n                { name: 'LogonName', index: 'LogonName', align: 'left' },\n                { name: 'FullName', index: 'FullName', align: 'left' },\n                { name: 'Enabled', index: 'Enabled', align: 'left' },\n                { name: 'IsTran', index: 'IsTranbase', align: 'left' }\n            ],\n            pager: $('#jpgpCustomers'),\n            rowNum: 10,\n            sortname: 'FullName',\n            sortorder: 'asc',\n            viewrecords: true,\n            height: '100%',\n            subGrid: true,\n            subGridRowExpanded: function(subgrid_id, row_id) {\n                var subgrid_table_id, pager_id;\n                subgrid_table_id = subgrid_id+\"_t\";\n                pager_id = \"p_\"+subgrid_table_id;\n                $(\"#\"+subgrid_id).html(\"&lt;table id='\"+subgrid_table_id+\"'class='scroll'&gt;&lt;/table&gt;&lt;div id='\"+pager_id+\"'class='scroll'&gt;&lt;/div&gt;\");\n                $(\"#\"+subgrid_table_id).jqGrid({\n                    url: '@Url.Action(\"BankLinks\")',\n                    datatype: 'json',\n                    mtype: 'POST',\n                    colNames: ['Bank', 'Folder', 'Enabled'],\n                    colModel:[\n                        {name:\"Bank\",index:\"Bank\",width:80,key:true},\n                        {name:\"Folder\",index:\"Folder\",width:130},\n                        {name:\"Enabled\",index:\"Enabled\",width:70,align:\"left\"}\n                    ],\n                    rowNum:20,\n                    pager: pager_id,\n                    sortname: 'Bank',\n                    sortorder: \"asc\",\n                    viewrecords: true,\n                    height: '100%'\n                });\n                $(\"#\"+subgrid_table_id).jqGrid('navGrid',\"#\"+pager_id,{edit:false,add:false,del:false})\n            },\n        });\n    });\n&lt;/script&gt;\n}\n</code></pre>\n\n<p><strong>My Controller Actions:</strong></p>\n\n<p><em>Customers</em></p>\n\n<pre><code>[AcceptVerbs(HttpVerbs.Post)]\npublic ActionResult Customers(JqGridRequest request)\n{\n    ISession session = NHibernateHelper.GetCurrentSession();\n    IEnumerable&lt;Customer&gt; customers = session.QueryOver&lt;Customer&gt;().List().Skip&lt;Customer&gt;(0).Take&lt;Customer&gt;(request.RecordsCount);\n\n    int totalRecords = customers.Count();\n\n    //Prepare JqGridData instance\n    JqGridResponse response = new JqGridResponse()\n    {\n        //Total pages count\n        TotalPagesCount = (int)Math.Ceiling((float)totalRecords / (float)request.RecordsCount),\n        //Page number\n        PageIndex = request.PageIndex,\n        //Total records count\n        TotalRecordsCount = totalRecords\n    };\n    //Table with rows data\n    foreach (Customer customer in customers)\n    {\n        response.Records.Add(new JqGridRecord(Convert.ToString(customer.Id), new List&lt;object&gt;()\n        {\n            customer.FtpDetails.LogonName,\n            customer.FtpDetails.FullName,\n            customer.FtpDetails.Enabled,\n            customer.IsTran\n        }));\n    }\n\n    //Return data as json\n    return new JqGridJsonResult() { Data = response };\n}\n</code></pre>\n\n<p><em>BankLinks</em></p>\n\n<pre><code>[AcceptVerbs(HttpVerbs.Post)]\npublic ActionResult BankLinks(JqGridRequest request)\n{\n    ISession session = NHibernateHelper.GetCurrentSession();\n\n    //IN THIS LINE I HAVE HARDCODED value 14 - I need this value to be passed from the \n    //Parent Grid!\n    Customer customer = session.Get&lt;Customer&gt;(14);\n\n    int totalRecords = customer.Banks.Count();\n\n    //Prepare JqGridData instance\n    JqGridResponse response = new JqGridResponse()\n    {\n        //Total pages count\n        TotalPagesCount = (int)Math.Ceiling((float)totalRecords / (float)request.RecordsCount),\n        //Page number\n        PageIndex = request.PageIndex,\n        //Total records count\n        TotalRecordsCount = totalRecords\n    };\n\n    foreach (Bank bank in customer.Banks.ToList&lt;Bank&gt;())\n    {\n        CustomerBank bankLink = session.QueryOver&lt;CustomerBank&gt;().Where(x =&gt; x.BankId == bank.Id).Where(y =&gt; y.CustomerId == customer.Id).List&lt;CustomerBank&gt;().FirstOrDefault();\n\n        response.Records.Add(new JqGridRecord(null, new List&lt;object&gt;()\n        {\n            bank.BankCode,\n            bank.Folder,\n            bankLink.Enabled \n        }));\n    }\n     return new JqGridJsonResult() { Data = response };\n }\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","c#-4.0","razor"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":240,"score":3,"question_id":12635928,"title":"calling an Action in the Controller through JQuery from the cshtml and returning a value back","body":"<p>I have a cshtml page, with 3 text boxes and 3 dropdowns.</p>\n\n<p>My idea is to have the user make a decision on the first question dropdown (YES/NO), and depending on this answer, populate the second text box, and enable the second dropdown (YES/NO), and same process for the third textbox.</p>\n\n<p>I have the following at the moment:-</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n$(document).ready(function () {\n\n    //disable the textboxes \n    $(\"#T_FirstQuestion\").attr('disabled', true);\n    $(\"#T_SecondQuestion\").attr('disabled', true);\n    $(\"#T_ThirdQuestion\").attr('disabled', true);\n\n    //and the dropdowns intially\n    $(\"#SecondQuestYesNo\").attr('disabled', true);\n    $(\"#ThirdQuestYesNo\").attr('disabled', true);\n\n    $(\"#FirstQuestYesNo\").change(function () {\n        val = $(\"#FirstQuestYesNo\").val();\n        PostValue(val);\n\n    });\n\n    function PostValue(val) {\n        var url = \"/Home/DecisionFirstQuest\";\n        $(\"#T_SecondQuestion\").attr('enabled', true);\n        $.ajax({\n            type: \"POST\",\n            url: url,\n            data: { value: val }\n        }).done(function (msg) {\n            alert(\"Data Saved: \" + msg);\n        });\n    }\n\n\n});\n\n&lt;/script&gt;\n\n@using (Html.BeginForm(\"Decision\", \"Home\", FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n\n{\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;td&gt; &lt;font face=\"Arial\" size=\"2\"&gt;&lt;b&gt;1&lt;/b&gt;&lt;/font&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n           @Html.TextBox(\"T_FirstQuestion\", ViewData[\"T_FirstQuestion\"], new { @class = \"NormalTextBox\" })\n        &lt;/td&gt;\n        &lt;td&gt;\n           @Html.DropDownList(\"FirstQuestYesNo\", ViewData[\"FirstQuestYesNoData\"] as SelectList, new { @class = \"normalDropdowns\" })\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt; &lt;font face=\"Arial\" size=\"2\"&gt;&lt;b&gt;1&lt;/b&gt;&lt;/font&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n           @Html.TextBox(\"T_SecondQuestion\", ViewData[\"T_SecondQuestion\"], new { @class = \"NormalTextBox\" })\n        &lt;/td&gt;\n        &lt;td&gt;\n           @Html.DropDownList(\"SecondQuestYesNo\", ViewData[\"SecondQuestYesNoData\"] as SelectList, new { @class = \"normalDropdowns\" })\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt; &lt;font face=\"Arial\" size=\"2\"&gt;&lt;b&gt;1&lt;/b&gt;&lt;/font&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n           @Html.TextBox(\"T_ThirdQuestion\", ViewData[\"T_ThirdQuestion\"], new { @class = \"NormalTextBox\" })\n        &lt;/td&gt;\n        &lt;td&gt;\n           @Html.DropDownList(\"ThirdQuestYesNo\", ViewData[\"ThirdQuestYesNoData\"] as SelectList, new { @class = \"normalDropdowns\" })\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n}\n</code></pre>\n\n<p>and my Controller is as follows :-</p>\n\n<pre><code>        public ActionResult DecisionFirstQuest(string value)\n    {\n        string strMessage = \"\";\n\n        if (value == \"Yes\")\n        {\n            strMessage = \"You have chosen YES!\";\n        }\n        else\n        {\n            strMessage = \"You have chosen NO!\";\n        }\n\n        ViewData[\"T_SecondQuestion\"] = strMessage;\n\n        return RedirectToAction(\"Decision\");\n    }\n\n    public ActionResult DecisionSecondQuest(string value)\n    {\n        string strMessage = \"\";\n\n        if (value == \"Yes\")\n        {\n            strMessage = \"You have chosen YES!\";\n        }\n        else\n        {\n            strMessage = \"You have chosen NO!\";\n        }\n\n        ViewData[\"T_ThirdQuestion\"] = strMessage;\n\n        return RedirectToAction(\"Decision\");\n    }\n\n    public ActionResult Decision()\n    {\n\n        string FirstQuestYesNo = HttpContext.Request[\"FirstQuestYesNo\"];\n\n        ViewData[\"T_FirstQuestion\"] = \"First Question Text\";\n\n        var ddlYesNoData = new SelectList(new[]\n                                      {\n                                          new {ID=\"\",Name=\"Please Select\"},\n                                          new {ID=\"Yes\",Name=\"Yes\"},\n                                          new{ID=\"No\",Name=\"No\"},\n                                      },\n                        \"ID\", \"Name\", 1);\n\n        if (!String.IsNullOrEmpty(FirstQuestYesNo))\n            ViewData[\"FirstQuestYesNoData\"] = FirstQuestYesNo;\n        else\n            ViewData[\"FirstQuestYesNoData\"] = \"Yes\";\n\n        ViewData[\"FirstQuestYesNoData\"] = ddlYesNoData;\n        ViewData[\"SecondQuestYesNoData\"] = ddlYesNoData;\n        ViewData[\"ThirdQuestYesNoData\"] = ddlYesNoData;\n\n\n\n        return View();\n    }\n</code></pre>\n\n<p>I am managing to get the value of the first dropdown, and redirecting to the Decision action, however I am not getting the second question textbox filled up. Also I am getting like a popup with some HTML code, which I would like to avoid.</p>\n\n<p>So basically my question is, how can I fill up the second text box, and after the user chooses the (YES/NO), then fill up the third textbox.</p>\n\n<p>Also, am I using the correct approach or is there a better way to do this using MVC?</p>\n\n<p>Thanks for your help and time!</p>\n\n<p>-------------------UPDATE--------------------------------------------\nI decided to go for a more easy example</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n$(document).ready(function () {\n\n    $(\"#YesNo\").change(function () {\n        val = $(\"#YesNo\").val();\n        var url = \"../Home/Decision\";\n        $.post(url, { value: val});\n\n    });\n\n\n\n});\n\n&lt;/script&gt;\n\n@using (Html.BeginForm(\"Decision\", \"Home\", FormMethod.Post, new { enctype = \"multipart/form-data\", id=\"Decision\" }))\n{\n\n@Html.DropDownList(\"YesNo\", new List&lt;SelectListItem&gt;\n                     {\n                        new SelectListItem{ Text=\"Select\", Value = \"\" }, \n                        new SelectListItem{ Text=\"Yes\", Value = \"Yes\" },\n                        new SelectListItem{ Text=\"No\", Value = \"No\" }\n                     })\n\nstring FirstQuestText = ViewBag.FirstQuestData;\n\n @Html.TextBox(\"T_FirstQuestion\", FirstQuestText, new { @class = \"NormalTextBox\" })   \n}\n</code></pre>\n\n<p>And the Controller Actions:-</p>\n\n<pre><code>        [HttpPost]\n    public ActionResult Decision(string value)\n    {\n        string strMessage = \"\";\n        if (value == \"Yes\")\n        {\n            strMessage = \"This is the Second Yes Question\";\n        }\n        else\n        {\n            strMessage = \"This is the Second No Question\";\n        }\n\n        ViewBag.FirstQuestData = strMessage;\n        return View();\n    }\n</code></pre>\n\n<p>The problem now is that I am getting the ViewBag.FirstQuestData populating correctly, however it is not displayed in the @Html.TextBox</p>\n\n<p>-----------------------------------JSON UPDATE---------------------------------------\ncshtml</p>\n\n<pre><code>        $(\"#YesNoQuest1\").change(function () {\n        alert('change');\n        val = $(\"#YesNoQuest1\").val();\n        var url = \"../Home/Decisions1\";\n        $.getJSON(url, function(data) {\n             alert(data.message);\n        });\n</code></pre>\n\n<p>controller</p>\n\n<pre><code>        [HttpPost]\n    public JsonResult Decisions1(string value)\n    {\n        string strMessage = \"\";\n        if (value == \"Yes\")\n        {\n            strMessage = \"This is the Second Yes Question\";\n        }\n        else\n        {\n            strMessage = \"This is the Second No Question\";\n        }\n\n        return Json(new { message = strMessage }, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12776257,"title":"How to show a partial view on click of actionlink in mvc","body":"<p>I have the following two action links on a page:</p>\n\n<pre><code>@Html.ActionLink(\"User List\",\"list\");\n@Html.ActionLink(\"Admin List\",\"admin\");\n</code></pre>\n\n<p>On their click I want to show/hide a partial view using jQuery. Help me with solution for this.</p>\n"},{"tags":["asp.net-mvc-3","razor","html.textbox"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12776291,"title":"Html.Display does not work with ViewBag","body":"<p>Html.Display does not work with ViewBag.</p>\n\n<pre><code>@Html.Display(\"disp\", (string)@ViewBag.disp)\n</code></pre>\n\n<p>I must use this viewbag because it can be modified by a search button selecting another disp.</p>\n\n<pre><code>@Html.TextBox(\"disp\", (string)@ViewBag.disp)\n</code></pre>\n\n<p>If I use TextBox instead of Display it works, but I want to be read-only. How it is possible?</p>\n"},{"tags":["asp.net-mvc-3","linq-to-sql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12775860,"title":"Does not contain a definition for 'IdCriterion'","body":"<p>I have a ViewModel in: RolesMVC3.Area.Asesor.Models.ListNotesViewModel</p>\n\n<p>is the following:</p>\n\n<pre><code>public class ListNotesViewModel\n    {\n           public decimal IdTime { get; set; }\n\n           public decimal IdArea { get; set; }\n\n           public decimal IdCriterion { get; set; }\n\n           public decimal Notes { get; set; }\n\n           public decimal IdEstudent { get; set; }\n    }\n</code></pre>\n\n<p>I have a controller that uses this ViewModel.</p>\n\n<p>is the following: </p>\n\n<pre><code>public ActionResult EstudentsQualification()\n   {\n\n    var newItems = (from n in db.Qualification\n                    join a in db.AREA on n.IdArea equals a.IdArea\n                    join e in db.ESTUDENT on n.IdEstudent equals e.IdEstudent\n                    join p in db.TIME on n.IdTime equals p.IdTime\n                    join c in db.CRITERION on n.IdCriterion equals c.IdCriterion\n                    where n.IdArea == 1 \n                    select new ListNotesViewModel { IdCriterion = c.IdCriterion, IdTime = p.IdTime, Notes=n.Note, IdEstudent==e.IdEstudent }).ToList();\n\n\n\n     var estu = (from n in db.Qualification\n                 join e in db.ESTUDENT on n.IdEstudent equals e.IdEstudent\n                 where n.IdArea == 1\n                 select e).Distinct().ToList();\n\n     ViewBag.Estudents = estu;\n     ViewBag.Time = db.TIME;\n     ViewBag.Criterion = db.CRITERION;\n     ViewBag.Notes = newItems;\n\n     return View();\n }\n</code></pre>\n\n<p>the associated view is:</p>\n\n<pre><code>@{\n    ViewBag.Title = \"Index\";\n}\n\n&lt;table border=\"1\"&gt;\n\n@foreach (var item4 in ViewBag.Estudents)\n{\n    &lt;tr&gt;\n        &lt;td&gt;\n             @item4.CodEstudents - @item4.NameEstudents \n        &lt;/td&gt;\n         @foreach (var item2 in ViewBag.Time)\n         {\n             foreach (var item3 in ViewBag.Criterion)\n             {\n                &lt;td&gt;\n\n                 @if (ViewBag.Notes.IdCriterion == item3.IdCriterion &amp;&amp; ViewBag.Notes.IdTime == item2.IdTime &amp;&amp; ViewBag.Notes.IdEstudent == item4.IdEstudent)\n                 {\n                     @ViewBag.Notes.Note \n                 }\n                 else\n                 {\n                     @:nothing\n                 }    \n               &lt;/td&gt;                                                                                                                                                                       \n\n             }\n         }\n\n    &lt;/tr&gt;\n}\n\n&lt;/table&gt;\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>'System.Collections.Generic.List&lt;RolesMVC3.Area.Asesor.Models.ListNotesViewModel&gt;' does not contain a definition for 'IdCriterion'\n</code></pre>\n\n<p>I can't figure out what the problem is.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":12775881,"title":"Asp.net mvc3 web site extension","body":"<p>Want to implement this feature but how?</p>\n\n<p>We know that stack overflow has been written in asp.net mvc3 from <a href=\"http://blog.stackoverflow.com/2008/09/what-was-stack-overflow-built-with/\">what was stack overflow built with?</a> .</p>\n\n<p>When i am here i have never noticed .aspx extension in URL, but it should be there as all asp.net web site has it. it may be the silly point to ask. but i am very curious to know how to exactly hide the extension for asp.net web site. </p>\n"},{"tags":["vb.net","asp.net-mvc-3","razor","html-attributes"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":7717,"score":2,"question_id":5584886,"title":"HtmlAttributes on ASP.NET MVC 3 with Razor view in VB.Net","body":"<p>Can anybody tell me how do I add this htmlAttribute on MVC 3 Razor view?</p>\n\n<pre><code>New With {.watermark = \"sometext\", .title = \"sometext\"}\n</code></pre>\n\n<p>I tried the C# way but it's not working (@watermark) but it's not working.</p>\n\n<p>Thanks.</p>\n\n<p>UPDATE here is the current usage I am trying but it's not working.</p>\n\n<pre><code>  @Html.EditorFor(Function(model) model.FirstName, New With {.maxlength = \"50\"})\n</code></pre>\n\n<p>This isn't working either</p>\n\n<pre><code> @Html.EditorFor(Function(model) model.FirstName, New Object() {\"maxlength=50\"})\n</code></pre>\n\n<p>Bear in mind that I am doing this on vb.net.\nPLEEASE HELP!</p>\n"},{"tags":["c#","asp.net-mvc-3","visual-studio-2010","playing-cards"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12711845,"title":"Loop won´t excecute unless I step through it","body":"<p>Let me start by saying sorry for my terrible grammar and spelling.</p>\n\n<p>I have a MVC3 project that creates a Deck and adds 52 cards to it.\nThen i added a shuffle function that only work´s when <strong>I step through</strong> the loop in the shuffle method.</p>\n\n<p>In my class Deck i create an Array that holds 52 PlayingCard objects. \nDeck has a method that copies the Array to a List that is displayed in my View, \nand it has also a method that shuffles the list.</p>\n\n<p>Not easy to explain but the code only runs <strong>one time</strong> unless i step through it.</p>\n\n<p>My shuffle method in my Deck model.</p>\n\n<pre><code> public void Shuffle()\n {\n    for (int i = 0; i &lt; 51; i++)\n    {\n        PlayingCard temp;\n        temp = myDeck[i];\n        Random rnd = new Random();\n        int randomNr = rnd.Next(51);\n        myDeck[i] = myDeck[randomNr];\n        myDeck[randomNr] = temp;\n    }   \n}\n</code></pre>\n\n<p><strong>Output after shuffle, whithout step through:</strong></p>\n\n<p>*<strong>4     diamonds</strong>\n1    hearts\n2    hearts\n3    hearts\n4    hearts\n5    hearts\n6    hearts\n7    hearts\n8    hearts\n9    hearts\n10   hearts\n11   hearts\n12   hearts\n13   hearts\n1    spades\n2    spades\n3    spades\n4    spades\n5    spades\n6    spades\n7    spades\n8    spades\n9    spades\n10   spades\n11   spades\n12   spades\n13   spades\n1    clubs\n2    clubs\n3    clubs\n4    clubs\n5    clubs\n6    clubs\n7    clubs\n8    clubs\n9    clubs\n10   clubs\n11   clubs\n12   clubs\n13   clubs\n1    diamonds\n2    diamonds\n<strong>12     diamonds</strong>\n3    diamonds\n5    diamonds\n6    diamonds\n7    diamonds\n8    diamonds\n9    diamonds\n10   diamonds\n11   diamonds\n13   diamonds\n*</p>\n\n<p><strong>Output after step through 15 times:</strong></p>\n\n<p><em>2   spades\n3    clubs\n5    spades\n3    diamonds\n12   diamonds\n13   hearts\n11   hearts\n1    spades\n6    clubs\n5    diamonds\n1    clubs\n12   hearts\n7    clubs\n13   spades\n2    clubs\n10   hearts\n3    spades\n4    spades\n3    hearts\n6    spades\n7    spades\n8    spades\n9    spades\n10   spades\n11   spades\n12   spades\n8    hearts\n7    hearts\n1    hearts\n2    hearts\n4    clubs\n5    clubs\n9    hearts\n6    hearts\n8    clubs\n9    clubs\n10   clubs\n11   clubs\n12   clubs\n13   clubs\n1    diamonds\n2    diamonds\n4    hearts\n4    diamonds\n5    hearts\n6    diamonds\n7    diamonds\n8    diamonds\n9    diamonds\n10   diamonds\n11   diamonds\n13   diamonds</em></p>\n\n<p><strong>Output after stepping through the entire loop:</strong></p>\n\n<p><em>10  hearts\n6    clubs\n8    hearts\n5    hearts\n5    clubs\n7    diamonds\n5    spades\n11   diamonds\n12   spades\n12   clubs\n8    diamonds\n5    diamonds\n1    clubs\n9    spades\n10   diamonds\n12   hearts\n8    spades\n9    clubs\n13   clubs\n6    hearts\n1    spades\n11   spades\n1    hearts\n12   diamonds\n4    clubs\n3    clubs\n8    clubs\n9    diamonds\n7    clubs\n2    clubs\n3    diamonds\n1    diamonds\n7    spades\n10   spades\n2    hearts\n6    spades\n13   spades\n4    spades\n2    spades\n6    diamonds\n4    hearts\n2    diamonds\n4    diamonds\n11   clubs\n7    hearts\n11   hearts\n3    spades\n3    hearts\n10   clubs\n13   hearts\n9    hearts\n13   diamonds</em></p>\n\n<p>As shown the loop only runs when i step through it. \nI tried different loops, made a new project, move the shuffle funtion to the controller, nothing helps. </p>\n\n<p>Anyone have any ideas how I should solve this?</p>\n"},{"tags":[".net","asp.net-mvc-3","ubuntu","mono"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12774561,"title":"Mono/ MVC3 Only home page displays, everything else is 404","body":"<p>Scratching my head here.  I'm running Ubuntu 12.04.1 LTS with the latest mono that it comes with.  My windows dev box works fine, but on the linux box the only page that comes up is the default home page... less the CSS and scripts.  Looking at the debug tools, it looks like everything else gets a 404.</p>\n\n<p>There's a similar scenario on SO for IIS6, suggesting that this may be an issue of mono trying to use the wrong framework version, but I can't figure out where to tell it differently, and I'm not convinced that is the problem.</p>\n\n<p>Does anyone have insight into this?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","formatting"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12774005,"title":"Reusable Model Formatting in Views","body":"<p>How can I format the presentation of a model inside a view any way I want?\nbeing able to implement custom formatters that I can reuse.</p>\n\n<p>For example - I have a <code>Model.Name</code> which has the value of \"david kim\" and i want to capitalize the first letters. So, instead of showing the actual name - \"<strong>david kim</strong>\", it will display \"<strong>David Kim</strong>\" instead.</p>\n\n<p>More examples:</p>\n\n<p>Removing numbers from strings: <strong>helloworld123 -> hellowworld</strong>.</p>\n\n<p>Converting text to leet speech: <strong>Hello world -> H3110 w0r1d</strong>.</p>\n\n<p>by using something as easy as that:</p>\n\n<pre><code>// Here I use the Capital Letter custom formatter.\n@Html.DisplayFormatFor(model =&gt; model.Address, new CapitalLetterFormatter())\n</code></pre>\n"},{"tags":["asp.net-mvc-3","dependency-injection","ninject","ninject-extensions"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12753395,"title":"Trouble injecting factory into custom membership provider in ASP.NET MVC 3 with Ninject 3.0.0 with Factory extension","body":"<p>I am creating an ASP.NET MVC 3 webapp that has a custom membership provider. I am using <code>Ninject.Extensions.Factory 3.0.0</code> to try to inject a factory into a public property on my custom membership provider, but it's not going smoothly.</p>\n\n<p>Here is my custom membership class and factory interface:</p>\n\n<pre><code>public class MtgMembershipProvider : MembershipProvider\n{\n    [Inject]\n    public IUnitOfWorkFactory UnitOfWorkFactory { get; set; }\n\n    ...\n}\n\npublic interface IUnitOfWorkFactory\n{\n    IUnitOfWork GetEFUnitOfWork();\n}\n</code></pre>\n\n<p>Here is my membership initialization module:</p>\n\n<pre><code>public class MtgMembershipInitializationModule : IHttpModule\n{\n    public MtgMembershipInitializationModule(MembershipProvider membershipProvider)\n    {\n    }\n\n    public void Dispose()\n    {            \n    }\n\n    public void Init(HttpApplication context)\n    {\n    }\n}\n</code></pre>\n\n<p>Here's the RegisterServices code from NinjectWebCommon.cs:</p>\n\n<pre><code>private static void RegisterServices(IKernel kernel)\n{\n    kernel.Bind&lt;IUnitOfWork&gt;()\n        .To&lt;EFUnitOfWork&gt;()\n        .NamedLikeFactoryMethod((IUnitOfWorkFactory f) =&gt; f.GetEFUnitOfWork());\n\n    kernel.Bind&lt;MembershipProvider&gt;().ToMethod(ctx =&gt; Membership.Provider);\n    kernel.Bind&lt;IHttpModule&gt;().To&lt;MtgMembershipInitializationModule&gt;();\n}\n</code></pre>\n\n<p>In web.config, I have the following:</p>\n\n<pre><code>&lt;system.web&gt;\n  &lt;membership defaultProvider=\"MtgMembershipProvider\"&gt;\n    &lt;providers&gt;\n      &lt;clear /&gt;\n      &lt;add name=\"MtgMembershipProvider\" type=\"MtgManager.WebUI.Infrastructure.MtgMembershipProvider\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"MtgManager_WebUI\" /&gt;\n    &lt;/providers&gt;\n  &lt;/membership&gt;\n&lt;/system.web&gt;\n</code></pre>\n\n<p>When I launch the webapp, I get an exception during module initialization:</p>\n\n<pre><code>Error activating IUnitOfWorkFactory\nNo matching bindings are available, and the type is not self-bindable.\nActivation path:\n 3) Injection of dependency IUnitOfWorkFactory into property UnitOfWorkFactory of type MtgMembershipProvider\n 2) Injection of dependency MembershipProvider into parameter membershipProvider of constructor of type MtgMembershipInitializationModule\n 1) Request for IHttpModule\n\nSuggestions:\n 1) Ensure that you have defined a binding for IUnitOfWorkFactory.\n 2) If the binding was defined in a module, ensure that the module has been loaded into the kernel.\n 3) Ensure you have not accidentally created more than one kernel.\n 4) If you are using constructor arguments, ensure that the parameter name matches the constructors parameter name.\n 5) If you are using automatic module loading, ensure the search path and filters are correct.\n</code></pre>\n\n<p>I'm not sure what I'm doing wrong.  I've followed Remo Gloor's blog post about <a href=\"http://www.planetgeek.ch/2012/02/08/asp-net-provider-injection-with-ninject-3-0-0/\" rel=\"nofollow\">ASP.NET Provider dependency injection with Ninject 3.0.0</a>, and the <a href=\"http://stackoverflow.com/questions/5596441/inject-repository-to-custom-membership-provider-with-ninject/10394860#10394860\">related StackExchange discussion</a>, as well as <a href=\"http://stackoverflow.com/questions/11557856/namedlikefactorymethod-in-ninject-extensions-factory-working-in-non-compliance-w\">this question about NamedLikeFactoryMethod</a> and numerous other posts, but I am stuck.  What am I missing?</p>\n"},{"tags":["asp.net-mvc-3","csv","download","internet-explorer-9"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1554,"score":0,"question_id":9425257,"title":"Exporting a CSV file from MVC3 - Internet Explorer Issue","body":"<p>I'm trying to create a CSV export for some data I have. Seems simple enough, and works beautifully in Firefox and Chrome, but in Internet Explorer I just get a message saying the file could not be downloaded. No other error messages, no break in Visual Studio, no debugging information that I can find.</p>\n\n<p>Here's my code. Perhaps I'm doing something wrong?</p>\n\n<pre><code>public ActionResult ExportStudentsCSV(IEnumerable&lt;Student&gt; students) {\n    MemoryStream output = new MemoryStream();\n    StreamWriter writer = new StreamWriter(output, System.Text.Encoding.UTF8);\n    writer.WriteLine(\"Username,Year Level,School Name,State,Date Joined\");\n    foreach (Student student in students) {\n        writer.WriteLine(\n                    \"\\\"\" + student.username\n            + \"\\\",\\\"\" + student.year_level\n            + \"\\\",\\\"\" + student.SchoolName\n            + \"\\\",\\\"\" + student.state\n            + \"\\\",\\\"\" + student.join_date\n            + \"\\\"\"\n        );\n    }\n    writer.Flush();\n    output.Seek(0, SeekOrigin.Begin);\n\n    return File(output, \"text/csv\", \"Students_\" + DateTime.Now.ToShortDateString().Replace('/', '-') + \".csv\");\n}\n</code></pre>\n\n<p>And I'm calling this function in my controller with:</p>\n\n<pre><code>    return ExportStudentsCSV(model.StudentReport.StudentList);\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","razor","covariance"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12773505,"title":"ASP.NET MVC 3 views, super classes don't work for subclasses?","body":"<p>I have the following classes -</p>\n\n<pre><code>public abstract class BusinessObject { }\npublic abstract class Form: BusinessObject { }\npublic abstract class BillableForm: Form { }\npublic class MembershipForm: BillableForm { }\n\npublic abstract class Dto&lt;T&gt;: where T: BusinessObject { }\npublic abstract class InboxDto&lt;T&gt;: Dto&lt;T&gt; where T: Form { }\npublic class MembershipFormDto: InboxDto&lt;MembershipForm&gt; { }\n</code></pre>\n\n<p>And I have the following views -</p>\n\n<pre><code>membershipform.cshtml:\n@model AdminSite.Models.MembershipFormDto\n@{\n    Layout = \"~/Views/Inbox/Shared/_LayoutForm.cshtml\"\n}\n\n_LayoutForm.cshtml:\n@model InboxDto&lt;Form&gt;\n</code></pre>\n\n<p>When I land on the membershipform.cshtml page, I get the following exception stating:</p>\n\n<p>The model item passed into the dictionary is of type 'AdminSite.Models.MembershipFormDto', but this dictionary requires a model item of type 'AdminSite.Infrastructure.Models.InboxDto`1[BusinessLogic.Inbox.Form]'.</p>\n\n<p>From everything I can tell, <code>MembershipFormDto</code> IS-A <code>InboxDto</code> of type <code>MembershipForm</code>, where <code>MembershipForm</code> IS-A <code>Form</code>.  What gives?</p>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework-4.1"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12773169,"title":"SaveChanges in Edit action of MVC3","body":"<p>I'm a new to MVC and getting troubles with saving edited information of an action.\nEvery time I trying to SaveChanges I'm getting:\n<strong>Store update, insert, or delete statement affected an unexpected number of rows (0). Entities may have been modified or deleted since entities were loaded. Refresh ObjectStateManager entries.</strong></p>\n\n<p>Here is my code:</p>\n\n<pre><code>    [Authorize]\n    [HttpPost]\n    public ActionResult Profile(designer thisDesigner)\n    {\n        if (ModelState.IsValid)\n        {\n            db.Entry(thisDesigner).State = System.Data.EntityState.Modified;\n\n            try\n            {\n                db.SaveChanges();\n            }\n            catch (Exception)\n            {\n                return View(thisDesigner);\n            }\n        }\n\n        return RedirectToAction(\"Profile\");\n    }\n</code></pre>\n\n<p>Also tried to query for new object and then to set and save the new values, in this case doesn't getting the exception, but the data is't saved.\nHere is the code:</p>\n\n<pre><code>    [Authorize]\n    [HttpPost]\n    public ActionResult Profile(designer thisDesigner)\n    {\n        designer updateDesigner = db.designers.Find(thisDesigner.designer_id);\n\n        if (ModelState.IsValid &amp;&amp; updateDesigner != null)\n        {\n            db.Entry(updateDesigner).OriginalValues.SetValues(thisDesigner);\n\n            db.Entry(updateDesigner).State = System.Data.EntityState.Modified;\n\n            try\n            {\n                db.SaveChanges();\n            }\n            catch (Exception)\n            {\n                return View(thisDesigner);\n            }\n        }\n\n        return RedirectToAction(\"Profile\");\n    }\n</code></pre>\n"},{"tags":["javascript","asp.net-mvc-3","knockout.js","signalr"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":634,"score":2,"question_id":9487003,"title":"Trying to impliment SignalR with Knockout ViewModel","body":"<p>I have the following code and it appears to not be calling the client and updating the KnockOutJS viewmodel with the information.  The GetOuting() gets called on page load and the correct information is fed into the viewmodel.  Chrome shows no JS errors in the developer tools.  From that point forward I am having trouble figuring out how to troubleshoot it.  Any help is appreciated.\nSignalR Hub</p>\n\n<pre><code>public class Outings : Hub\n{\n    private static Dictionary&lt;Guid, OutingViewModel&gt; outings = new Dictionary&lt;Guid, OutingViewModel&gt;();\n\n    public void GetOuting(string id)\n    {\n        var guidID = new Guid(id);\n        bool containsOuting = outings.ContainsKey(guidID);\n        if (!containsOuting)\n        {\n            var outingAccessor = new OutingAccessor();\n            outingAccessor.ID = guidID;\n            outingAccessor.Load();\n            var outingVM = new OutingViewModel(outingAccessor);\n            outings.Add(guidID, outingVM);\n        }\n        var outing = outings[guidID];\n        this.Clients.updateOuting(outing);\n    }\n\n    public void SaveOuting(string outingNumber, OutingViewModel outing)\n    {\n        var guidID = new Guid(outingNumber);\n        outings[guidID] = outing;\n        this.Clients.updateOuting(outing);\n    }\n}\n</code></pre>\n\n<p>ViewModel</p>\n\n<pre><code>public class OutingViewModel\n{\n    public OutingViewModel(OutingAccessor outingAccessor)\n    {\n        ID = outingAccessor.ID;\n        OutingNumber = outingAccessor.OutingNumber;\n        var outingGeneralAccessor = new OutingGeneralAccessor();\n        var outingGeneral = outingGeneralAccessor.GetOutingGeneralByOutingID(outingAccessor.ID);\n        this.OutingName = outingGeneral.Name;\n    }\n    public Guid ID { get; set; }\n    public int OutingNumber { get; set; }\n    public string OutingName { get; set; }\n}\n</code></pre>\n\n<p>HTML + JavaScript</p>\n\n<pre><code>@model string\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.7.1.min.js\")\" type=\"text/javascript\"&gt; &lt;/script&gt;\n&lt;script src=\"@this.Url.Content(\"~/Scripts/jquery.signalR.js\")\" type=\"text/javascript\"&gt;     &lt;/script&gt;\n&lt;script src=\"@this.Url.Content(\"~/Scripts/knockout.js\")\" type=\"text/javascript\"&gt; &lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/signalr/hubs\"&gt; &lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(function() {\n        function outingDataViewModel() {\n            this.hub = $.connection.outings;\n            this.ID = ko.observable();\n            this.OutingNumber = ko.observable();\n            this.OutingName = ko.observable();\n            //Initializes the view model\n            this.init = function() {\n                this.hub.getOuting('@this.Model');\n            };\n            this.hub.updateOuting = function(data) {\n                ID(data.ID);\n                OutingName(data.OutingName);\n                OutingNumber(data.OutingNumber);\n            };\n        }\n        var vm = new outingDataViewModel();\n        ko.applyBindings(vm);\n        // Start the connection\n        $.connection.hub.start(function() { vm.init(); });\n    });\n&lt;/script&gt;\n&lt;h1&gt;Outing Number&lt;/h1&gt;\n&lt;div id=\"OutingSummary\"&gt;\n    &lt;div data-bind=\"text:OutingNumber\"&gt;&lt;/div&gt;\n    &lt;div data-bind=\"text:OutingName\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Upon further debugging it appears to be in the lines </p>\n\n<pre><code>ID(data.ID);\nOutingName(data.OutingName);\nOutingNumber(data.OutingNumber);\n</code></pre>\n\n<p>It looks like I am getting an exception of \"undefined_method\" when it tries to set ID.  Does that make sense to anyone else?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","jquery-validate"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1482,"score":1,"question_id":7187773,"title":"MVC3 jquery validation MinLength filter not working","body":"<p>I have this in my mode:</p>\n\n<pre><code>[Required(AllowEmptyStrings = false, ErrorMessageResourceType = typeof(Registration), ErrorMessageResourceName = \"NameRequired\")]\n[MinLength(3, ErrorMessageResourceType = typeof(Registration), ErrorMessageResourceName = \"NameTooShort\")]\npublic String Name { get; set; }\n</code></pre>\n\n<p>This ends up in:</p>\n\n<pre><code>    &lt;div class=\"editor-label\"&gt;\n        &lt;label for=\"Name\"&gt;Name&lt;/label&gt;\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        &lt;input class=\"text-box single-line\" data-val=\"true\" data-val-required=\"Name is required\" id=\"Name\" name=\"Name\" type=\"text\" value=\"\" /&gt;\n        &lt;span class=\"field-validation-valid\" data-valmsg-for=\"Name\" data-valmsg-replace=\"true\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>How come MinLength is being ignored by the compiler? How can I \"turn it on\"?</p>\n"},{"tags":[".net","asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":4668,"score":2,"question_id":4710411,"title":"HttpContext.Current.Session null item","body":"<p>i'm storing in HttpContext.Current.Session current user, SiteUser is single-tone class that presents current active siteuser, and when he logged i'm creating new SiteUser() in controller and in constructor adding him to the session:</p>\n\n<pre><code>public static SiteUser Create()\n{\n    HttpContext.Current.Session[sessionKey] = new SiteUser();\n\n    return HttpContext.Current.Session[sessionKey] as SiteUser;\n}\n</code></pre>\n\n<p>then, with every request to the server services i'm check is user available in session:</p>\n\n<pre><code>public static SiteUser Current\n{\n    get\n    {\n        if (HttpContext.Current.Session == null || HttpContext.Current.Session[sessionKey] == null)\n        {\n            throw new SiteUserAutorizationExeption();\n        }\n\n        return HttpContext.Current.Session[sessionKey] as SiteUser;\n    }\n}\n</code></pre>\n\n<p>otherwise i'm generate non-auth-user exception and redirect him to the logon page. \nbut sometimes HttpContext.Current.Session[sessionKey] is null, but HttpContext.Current.Session doesn't null and FormsAuthenticationTicket is available and Expired property is also false. \ncan somebody help me, why HttpContext.Current.Session[sessionKey] can be null?</p>\n\n<p><strong>UPD</strong>: webconfig session settings: <code>&lt;sessionState mode=\"InProc\" timeout=\"20\" /&gt;</code></p>\n\n<p><strong>UPD</strong>: sessionKey is: <code>public const string sessionKey = \"SiteUser\";</code></p>\n\n<p><strong>UPD2</strong>: i'm forget to add, that in session also stored Culture settings:</p>\n\n<pre><code>HttpContext.Current.Session[\"Culture\"]\n</code></pre>\n\n<p>and when exception hits, that HttpContext.Current.Session[sessionKey] is null, culture-item isn't</p>\n\n<p><strong>UPD3</strong>: i have downloaded symbol tables of source .NET Framework and set breakpoints at SessionStateItemCollection on changing collection items. and i resolved some mistakes:\n1) all collection items are null — \"culture\" is setting up after\n2) it happens at the session end event\ni can't understand how it can be, because at web.config session timeout is set 20</p>\n"},{"tags":["asp.net-mvc-3","session"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12771041,"title":"Store id into variable and use in another controller in MVC3","body":"<p>i'm creating a web site for users in MVC3 , one scenario is that the user can create projects and add tasks the project </p>\n\n<p>What i need to do is when i create a project and hit save the website displays a page asking the user if he wants to add tasks to that project or not </p>\n\n<p>I need to keep the variable SelectedProjectID , which you need to set ,  both if you create a new project and also if you press the edit link</p>\n\n<p>so from the edit page you can press \"Add tasks\" and then you go into the tasks page and press the link \"use Task \" and that inserts values into the many to many table </p>\n\n<p>i need to have the SelectedProjectID  variable with unique values for each user , because the user can only see his projects and so all the users doesn't add tasks to the same project :) </p>\n\n<p>Is it possible to use session variables in this scenario </p>\n\n<p>HttpContext.Current.Session[\"SelectedProjectID\"] = project.Id \nand then retrieve the value where i need to use it</p>\n\n<p>i know i cannot use the variables as static since that keeps the state for the whole app domain \nif i have the variable as public int , then i cannot use it in the other controller because i need to new the controller and than i get the variable as 0 </p>\n\n<p>what is the best way to handle this ? </p>\n"},{"tags":["jquery","asp.net-mvc-3","modal-dialog"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12769253,"title":"Retrieve a variable from jQuery Dialog?","body":"<p>I want to load a page into jQuery Dialog plugin (by using that code <a href=\"http://stackoverflow.com/questions/3837166/jquery-load-modal-dialog-contents-via-ajax\">jQuery: Load Modal Dialog Contents via Ajax</a>) In that page user will select some data. After the selection, when he closes the Dialog window, I need to retrieve the user's selected data from that Dialog window. How can I do that ?</p>\n"}]}
{"total":29155,"page":17,"pagesize":100,"questions":[{"tags":["c#","asp.net","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":461,"score":2,"question_id":12414632,"title":"ASP.NET MVC4 WebSecurity - DB Storage Location","body":"<p>I just installed MVC 4 and made a default internet project. I was able to create a username/login/change password. </p>\n\n<p>In MVC 3, after creating a user, I would see an ASPNETDB.MDF file in the App_Data folder, and I would also be able to manage users/roles in the Website Administration Tool.</p>\n\n<p>with MVC 4, I do not see an ASPNETDB.MDF file, even if i click show all files. Also, any new users created are not shown in the Website Administration Tool. </p>\n\n<p>Is there anywhere else I can look to retrieve users / set rolls ?</p>\n\n<p>Thanks</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","jquery-ajax"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":348,"score":1,"question_id":12767078,"title":"MVC: used partial view for jquery modal popup, issues with validation","body":"<p>So i have a button in a view that opens up a modal pop up form. This modal pop up form is a partial page. My issue with this is that:</p>\n\n<p>Whenever I don't fill up the required fields on the form, the TryUpdate check will obviously fail, but it will just refresh the whole page cuz of the line \"window.location.reload\" on the jquery. What I wanted to do is that instead of refreshing, it would still stay as it is (the page with the modal showing) and validation summary or validations will show up saying, this and that are required. Is this possible or am I complicating stuff with it?</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        $(function () {\n            $('#modal-link').click(function () {\n                var href = this.href;\n                $('#load-modal').dialog({\n                    modal: true,\n                    draggable: false,\n                    position: \"top\",\n                    open: function (event, ui) {\n                        $(this).load(href, function (result) {\n                            $('#new-academy-form').submit(function () {\n                                $.ajax({\n                                    url: this.action,\n                                    type: this.method,\n                                    data: $(this).serialize(),\n                                    success: function (json) {\n                                        window.location.reload(true);\n                                    },\n                                    error: function (data) {\n                                            var errmessage = '&lt;div class=\"error-repo\"&gt;Error&lt;/div&gt;';\n                                            $('#messages').html(errmessage);\n                                        }\n                                });\n                                return false;\n                            });\n                        });\n                    }\n                });\n                return false;\n            });\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>This is the button:</p>\n\n<pre><code>&lt;div class=\"width3\"&gt;\n                &lt;%: Html.ActionLink(\"Submit New\", \"Create\", \"Propose\", null, new { @class = \"results\", id = \"modal-link\" })%&gt;\n            &lt;/div&gt;\n</code></pre>\n\n<p>This is the action:</p>\n\n<pre><code>public ActionResult Create()\n        {\n            return PartialView(Propose.LoadDetails(context, null));\n        }\n\n        [HttpPost]\n        public ActionResult Create(FormCollection formCollection)\n        {\n            Propose propose= new Propose ();\n            if(TryUpdateModel(propose, \"Propose \")){\n                context.Propoe.Add(propose);\n                context.SaveChanges();\n                var proposals = new System.Text.StringBuilder();\n                return Json(new { propose= proposals});\n            }\n            return PartialView(Propose.LoadDetails(context, null));\n        }\n</code></pre>\n"},{"tags":["c#","asp.net","regex","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12767231,"title":"Regular expression, specific string with symbol","body":"<p>I have the following regular expression in my data annotation:</p>\n\n<pre><code>[RegularExpression(@\"test|test2|test3|test4-5\", ErrorMessage = \"Please select your status.\")]\n</code></pre>\n\n<p>I want the value to accept \"test4-5\", but it doesnt seem to like the dash symbol, how would i make this accept the exact string \"test4-5\"</p>\n"},{"tags":["asp.net-mvc-3","visual-studio-2010","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":132,"score":1,"question_id":12669082,"title":"mvc 3 System.AccessViolationException with vs 2012","body":"<p>I installed Visual Studio 2012 Ultimate last week. We currently use VS 2010 Professional, so using the 2012 was my only easy option for testing.</p>\n\n<p>I opened up VS 2012 Ultimate and opened a MVC 3 project that was written in VS 2010. and then undo checkout code. then doesn't run project and get the following error but similar projects work correctly.</p>\n\n<blockquote>\n  <p>System.AccessViolationException was unhandled HResult=-2147467261\n  Message=Attempted to read or write protected memory. This is often an\n  indication that other memory is corrupt. Source=WebDev.WebHost40\n  StackTrace: at\n  Microsoft.VisualStudio.WebHost.Host.ProcessRequest(Connection conn) at\n  Microsoft.VisualStudio.WebHost.Server.OnSocketAccept(Object\n  acceptedSocket) at\n  System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(Object\n  state) at\n  System.Threading.ExecutionContext.RunInternal(ExecutionContext\n  executionContext, ContextCallback callback, Object state, Boolean\n  preserveSyncCtx) at\n  System.Threading.ExecutionContext.Run(ExecutionContext\n  executionContext, ContextCallback callback, Object state, Boolean\n  preserveSyncCtx) at\n  System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()\n  at System.Threading.ThreadPoolWorkQueue.Dispatch() at\n  System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()\n  InnerException:</p>\n</blockquote>\n"},{"tags":[".net","asp.net-mvc-3","com","asp.net-mvc-4","intranet"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12766295,"title":"Access a COM Object on Client Machine for Intranet Application","body":"<p>We have a 3rd Party Piece of software that I'm wanting to apply some automation to through a COM Object that they make available.  I've been using a Windows Forms App so far, but would really like to start working on an intranet site for the company which is something that they are lacking at the moment.</p>\n\n<p>So is this something that is possible?  Are you able to access a COM Object through an ASP.NET Application (MVC3 or 4) in an intranet situation?</p>\n\n<p>I've looked at simply having the server control the application through the software that is installed ON the server, but the application uses our Active Directory to control access and they don't provide a good way to pass the credentials around so unless I'm missing something I would need to have a user that has all the access that anyone would need and then enforce the restrictions through code which is enough of a reason that I will continue with a Windows Forms App instead of an intranet app.</p>\n\n<p>EDIT: Accessing the COM Object from javascript is also an option if this is possible somehow.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-2","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12758177,"title":"why my url shows all index actions?","body":"<p>in my asp.net mvc project all links shows index action\nfor example : </p>\n\n<blockquote>\n  <p>localhost:1559/Home/Index <br>\n  localhost:1559/about-us/Index <br>\n  localhost:1559/contact-us/Index <br>\n  localhost:1559/portfolio/Index <br></p>\n</blockquote>\n\n<p>why it does not hide the index action ?</p>\n\n<p>I want to show like this :</p>\n\n<blockquote>\n  <p>localhost:1559/Home <br>\n  localhost:1559/about-us <br>\n  localhost:1559/contact-us <br>\n  localhost:1559/portfolio <br></p>\n</blockquote>\n\n<p>this is my global file codes :</p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n        {\n            routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n            routes.Add(\n            new Route(\"{controller}/{action}/{Q1}/{Q2}\",\n                new RouteValueDictionary(\n                    new { controller = \"Home\", action = \"Index\", Q1 = UrlParameter.Optional, Q2 = UrlParameter.Optional }),\n                    new HyphenatedRouteHandler())\n            );\n            routes.Add(\n            new Route(\"{controller}/{action}/{Q1}\",\n                new RouteValueDictionary(\n                    new { controller = \"Home\", action = \"Index\", Q1 = UrlParameter.Optional }),\n                    new HyphenatedRouteHandler())\n            );\n            routes.Add(\n            new Route(\"{controller}/{action}\",\n                new RouteValueDictionary(\n                    new { controller = \"Home\", action = \"Index\"}),\n                    new HyphenatedRouteHandler())\n            );\n        }\n</code></pre>\n\n<p>who can help me ?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","asp.net-membership","password-recovery"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":130,"score":0,"question_id":12764694,"title":"asp.net mvc 3 reset password by admin and force user to change it","body":"<p>I'm using asp.net Membership, I develop an admin page who can regenerate a temp password to send to the user, then when the user log on for first time, the password must be changed, but I cant figure out who to know if the password was reseted.</p>\n\n<p>I tried something like in a base controller:</p>\n\n<pre><code>if (user.LastPasswordChangedDate &gt;= user.LastLoginDate)\n{\n    filterContext.Result = RedirectToAction(\"ChangePassword\", \"Account\");\n}\n</code></pre>\n\n<p>But, I already have updated the LastLoginDate because the ChangePassword Action need to be with a autenticated user. </p>\n\n<p>I was thinking when reseting the password to lock/unlock the user to get updated the \"LastLockoutDate\" and do:</p>\n\n<pre><code>if (user.LastPasswordChangedDate &gt;= user.LastLockoutDate)\n{\n    filterContext.Result = RedirectToAction(\"ChangePassword\", \"Account\");\n}\n</code></pre>\n\n<p>But, I can't find a method to do manual lockout</p>\n\n<p>Thanks!!!</p>\n"},{"tags":[".net","asp.net","asp.net-mvc","asp.net-mvc-3","orchardcms"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":672,"score":2,"question_id":5054922,"title":"Better understanding of Orchard's idea of 'Shape'","body":"<p><a href=\"http://orchardproject.net/docs/Basic-Orchard-Concepts.ashx\" rel=\"nofollow\">Basics uses this phrase to define/describe Shapes</a>:</p>\n\n<blockquote>\n  <p>...object that contains all the information...</p>\n</blockquote>\n\n<p>Implies the ability to filter according to user type / role. </p>\n\n<p>Exactly where can i see this magic in action / which learning curve twist do i bark up?</p>\n\n<p>thx</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12762925,"title":"ASP.NET MVC 3 Already contains a defenition for","body":"<p>Me and my friend having a problem while doing a homework assignment.</p>\n\n<p>We have made 4 print screens. The problem is we both get the same error\"</p>\n\n<p>The error is:\n<strong>Error 1 The type 'Jabber.Models.Jab' already contains a definition for 'Message'</strong></p>\n\n<p><a href=\"http://i.stack.imgur.com/lI60N.png\" rel=\"nofollow\">http://i.stack.imgur.com/lI60N.png</a></p>\n\n<p><a href=\"http://i.stack.imgur.com/S0dkb.png\" rel=\"nofollow\">http://i.stack.imgur.com/S0dkb.png</a></p>\n\n<p><a href=\"http://i.stack.imgur.com/L1Qko.png\" rel=\"nofollow\">http://i.stack.imgur.com/L1Qko.png</a></p>\n\n<p><a href=\"http://i.stack.imgur.com/YEW8t.png\" rel=\"nofollow\">http://i.stack.imgur.com/YEW8t.png</a></p>\n\n<p><img src=\"http://i.stack.imgur.com/lI60N.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/S0dkb.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/L1Qko.png\" alt=\"enter image description here\"><img src=\"http://i.stack.imgur.com/YEW8t.png\" alt=\"enter image description here\"></p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":572,"score":0,"question_id":10653759,"title":"Cannot use NuGet PagedList ASP.NET MVC # View","body":"<p>I can't use the following namespace <code>PagedList</code> to use razor \n<code>@model PagedList.IPagedList&lt;PhoneBook.Models.Contact&gt;</code>in the topmost of view <code>Index.cshtml</code></p>\n\n<p>I already installed PagedList and i used already the code below in my Controller</p>\n\n<pre><code> using PagedList;\n</code></pre>\n\n<p>there's no error in the controller page but why ican't use the namespace in Index.cshtml (View)? Please help..</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","session","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12763472,"title":"Making sure user has session key loaded on specific views, or else get again or relogin","body":"<p>Currently I have this line of code at the top of my master page</p>\n\n<pre><code>@{\n    MyApp.Domain.Concrete.FullUserProfile fullUser = (MyApp.Domain.Concrete.FullUserProfile)HttpContext.Current.Session[Membership.GetUser().ProviderUserKey.ToString()];\n}\n</code></pre>\n\n<p>This gets the user's profile information in the cache, but my question is will this always be available?  What if the user is logged in for a long time or something.  How do I make it so his or her information isn't stored in session it will retrieve it from database again?  I have a hard time understanding because I don't know if all this code should be in the view, and if it is how u would call a method from the code behind in order to trigger the database call and saving to the cache.  The reason I didn't want to put this in the controller it seemed repetitive.</p>\n"},{"tags":["asp.net-mvc-3","c#-4.0","filestream"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12763525,"title":"File path not found trying to upload mp3 file - c#","body":"<p>I have following code:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Create(HttpPostedFileBase file)\n{\n    var filename = System.Web.HttpContext.Current.Request.MapPath(file.FileName);\n    if (ModelState.IsValid)\n    {\n        FileStream fs = new FileStream(filename, FileMode.Open, FileAccess.Read);                \n        byte[] song = ReadFully(fs);         \n    }\n\n    return View();\n}\n</code></pre>\n\n<p>File i am trying to upload is at: C:\\Users\\CompUser\\Desktop\\Songs\\Downloaded\\song.mp3</p>\n\n<pre><code>c:\\users\\CompUser\\documents\\visual studio 2012\\Projects\\Demo\\Demo\\SongDownload\\04 - song.mp3\n</code></pre>\n\n<p>which is not correct. I also tried </p>\n\n<pre><code>Path.GetFullPath(file.FileName)\n</code></pre>\n\n<p>which returns this path: C:\\Program Files (x86)\\IIS Express\\04 - song.mp3</p>\n\n<p>which is not correct either. Can anyone please help me how can i resolve this and get correct path??</p>\n"},{"tags":[".net","asp.net","asp.net-mvc","asp.net-mvc-3","orchardcms"],"answer_count":4,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":2816,"score":6,"question_id":5100193,"title":"Orchard CMS Performance","body":"<p>I've started playing around with Orchard CMS for one of my websites and have noticed a fairly lengthy initial load time of my home page. I've not added much content to speak of, so what I am seeing is fairly close to the out of the box experience. I'm suspicious of this being somehow related to using Sql server compact on my shared hosting but don't yet know enough about what's under the hood to determine this. I'm looking for suggestioms of things to check that could be performance bottlenecks in Orchard's load times.</p>\n\n<p>My next plan is to point my site to a sql server other than compact to see if performance improves, but I'd appreciate any suggestions of anything else I can check. </p>\n"},{"tags":["c#",".net","asp.net-mvc-3","image-processing","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12761968,"title":"Using stream with fileupload manipulating the result somehow","body":"<p>Suddenly pictures that was showing before stopped showing on the page and checking the folder * discovered the image don't show when I click on them. Debugging my code I found the commented lines were causing it. Was the code below manipulating the stream in anyway?</p>\n\n<pre><code>public ActionResult UploadPhoto(UserPhotoUploadModel photoFileModel)\n{\n        HttpPostedFileBase photoFile = photoFileModel.PhotoFile;\n    string uploadPath = Server.MapPath(\"~/Content/users/photos\");\n    string autoFileName = String.Format(\"{0}_{1}\", Guid.NewGuid().ToString(), filename);\n    string fileDestName = Path.Combine(uploadPath, autoFileName);\n\n    //Starting from here is where the issue lies\n    Stream imgStream = photoFile.InputStream;\n    using (imgStream)\n    {\n        Image img = Bitmap.FromStream(imgStream);\n        int width = img.Width;\n        int height = img.Height;\n\n        if (width &gt; 100 || height &gt; 100)\n        {\n            ModelState.AddModelError(\"PhotoFile\", \"Photo dimension should be 100 by 100 or less\");\n            return View(photoFileModel);\n        }\n    }\n    //the issue ends here\n\n    photoFile.SaveAs(fileDestName);\n\n    return RedirectToAction(\"Profile\", new {id = loggedinUser.ProviderUserKey});\n}\n</code></pre>\n\n<p>The saved files had the right image extension e.g. JPG. Am using the stream to determine the dimension of the uploaded image. </p>\n\n<p>The commented portion is what is causing this issue. How can I do this with the Input stream still intact?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc-3","azure","simplemembership"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":164,"score":0,"question_id":12762125,"title":"SimpleMembership MVC3 Could not load file or assembly WebMatrix.Data","body":"<p>I'm using the SimpleMembership.MVC3 package to manage membership. Everything works fine at development but when I deploy to my Azure web role, It throws the following exception:</p>\n\n<blockquote>\n  <p>Could not load file or assembly 'WebMatrix.Data, Version=1.0.0.0,\n  Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its\n  dependencies. The located assembly's manifest definition does not\n  match the assembly reference. (Exception from HRESULT: 0x80131040)</p>\n  \n  <p>stack trace: [FileLoadException: Could not load file or assembly\n  'WebMatrix.Data, Version=1.0.0.0, Culture=neutral,\n  PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The\n  located assembly's manifest definition does not match the assembly\n  reference. (Exception from HRESULT: 0x80131040)]<br>\n  WebMatrix.WebData.PreApplicationStartCode.Start() +0</p>\n  \n  <p>[InvalidOperationException: The pre-application start initialization\n  method Start on type WebMatrix.WebData.PreApplicationStartCode threw\n  an exception with the following error message: Could not load file or\n  assembly 'WebMatrix.Data, Version=1.0.0.0, Culture=neutral,\n  PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The\n  located assembly's manifest definition does not match the assembly\n  reference. (Exception from HRESULT: 0x80131040).]<br>\n  System.Web.Compilation.BuildManager.InvokePreStartInitMethods(ICollection`1\n  methods) +11711966<br>\n  System.Web.Compilation.BuildManager.CallPreStartInitMethods() +465<br>\n  System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager\n  appManager, IApplicationHost appHost, IConfigMapPathFactory\n  configMapPathFactory, HostingEnvironmentParameters hostingParameters,\n  PolicyLevel policyLevel, Exception appDomainCreationException) +1167</p>\n  \n  <p>[HttpException (0x80004005): The pre-application start initialization\n  method Start on type WebMatrix.WebData.PreApplicationStartCode threw\n  an exception with the following error message: Could not load file or\n  assembly 'WebMatrix.Data, Version=1.0.0.0, Culture=neutral,\n  PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The\n  located assembly's manifest definition does not match the assembly\n  reference. (Exception from HRESULT: 0x80131040).]<br>\n  System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +11700896\n  System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context)\n  +141    System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest\n  wr, HttpContext context) +4869125</p>\n</blockquote>\n\n<p>There's no WebMatrix.Data assembly downloaded when I install the Nuget Package. \nI've manually added the WeBMatrix.Data.DLL found at my Program Files/Microsoft ASP.NET directory, but the version of this assembly is 2.x, and the one missing is version 1.x</p>\n\n<p>What is missing?</p>\n"},{"tags":["asp.net-mvc-3","linq","controller","html.dropdownlist"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12760979,"title":"Search and Filter in MVC3 Razor I am using Linq, is there a better way to do this","body":"<p>Heres my Code and it works fine. I just dont like all the If else,  what If I keep adding field to filter, its going to get messy.  Ps: I am not using EF and cannot on this. Thanks.</p>\n\n<p>CONTROLLER CODE</p>\n\n<pre><code>var books = from b in bookRepository.GetDogs() select b;    \nif (!String.IsNullOrEmpty(searchString))\n{\n\n    if (!String.IsNullOrWhiteSpace(searchString) &amp;&amp; searchGender != String.Empty &amp;&amp; searchHand != String.Empty)\n    {\n        books = books.Where(b =&gt; b.Name.ToUpper().Contains(searchString.ToUpper())\n                                 &amp;&amp; b.Gender == searchGender &amp;&amp; b.Handedness == searchHand);\n    }\n    else if (!String.IsNullOrWhiteSpace(searchGender) &amp;&amp; searchString == String.Empty &amp;&amp; searchHand == String.Empty)\n    {\n        books = books.Where(b =&gt; b.Gender == searchGender);\n    }\n    else if (String.IsNullOrWhiteSpace(searchGender) &amp;&amp; searchString != String.Empty &amp;&amp; searchHand == String.Empty)\n    {\n        books = books.Where(b =&gt; b.Name.ToUpper().Contains(searchString.ToUpper()));\n    }\n}\n\nreturn View(books);\n</code></pre>\n\n<p>HERES MY VIEW</p>\n\n<pre><code>&lt;p&gt;Find by Name : @Html.TextBox(\"searchString\", ViewBag.CurrentFilter as string)\n\n\n@Html.DropDownList(\"searchGender\", new SelectList(ViewBag.BookNames), \"-- Select All --\")\n@Html.DropDownList(\"searchHand\", new SelectList(ViewBag.HandNames), \"---Select All--\")\n</code></pre>\n"},{"tags":["jquery","ajax","asp.net-mvc","asp.net-mvc-3","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12758948,"title":"Ajax.ActionLink and jquery execution in PartialView after Ajax request","body":"<p>I load some PartialView in page as response to Ajax form post. This partial contains two Ajax.ActionLink by self. After response load ActionLinks doesn't work properly - it send request to server but doesn't updates UpdateTarget with returned content.\nSeems like jquery-ui provided widgets (like draggable) can't bind to elements in way like this (code placed in partial view):</p>\n\n<pre><code>$(function(){ $('#target').draggable();});\n</code></pre>\n\n<p>I would appreciate for any solutions.</p>\n\n<p>PS> ActionLinks starts work after target id correction, but jquery ui steel don't work</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":149,"score":0,"question_id":12760532,"title":"Could not load file or assembly 'EntityFramework' or one of its dependencies","body":"<p>My ASP.NET MVC3 web application was working fine. but when i restarted my pc and then trying to update the application in MS VS 2010 it shows an error during running the application:</p>\n\n<pre><code>Could not load file or assembly 'EntityFramework' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))\n</code></pre>\n\n<p><strong>Description:</strong></p>\n\n<pre><code>An unhandled exception occurred during the execution of the current web request. Please \nreview the stack trace for more information about the error and where it originated in the code. \n</code></pre>\n\n<p><strong>Exception Details:</strong> System.IO.FileLoadException: Could not load file or assembly 'EntityFramework' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))</p>\n\n<p><strong>Source Error:</strong> </p>\n\n<p>An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.</p>\n\n<p>Assembly Load Trace: The following information can be helpful to determine why the assembly 'EntityFramework' could not be loaded.</p>\n\n<p>WRN: Assembly binding logging is turned OFF.\nTo enable assembly bind failure logging, set the registry value [HKLM\\Software\\Microsoft\\Fusion!EnableLog] (DWORD) to 1.\nNote: There is some performance penalty associated with assembly bind failure logging.\nTo turn this feature off, remove the registry value [HKLM\\Software\\Microsoft\\Fusion!EnableLog].</p>\n\n<p><strong>Stack Trace:</strong> </p>\n\n<pre><code>[FileLoadException: Could not load file or assembly 'EntityFramework' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))]\n\n[FileLoadException: Could not load file or assembly 'EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))]\nSystem.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark&amp; stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0\nSystem.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark&amp; stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +39\nSystem.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark&amp; stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks) +132\nSystem.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark&amp; stackMark, Boolean forIntrospection) +144\nSystem.Reflection.Assembly.Load(String assemblyString) +28\nSystem.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +46\n\n[ConfigurationErrorsException: Could not load file or assembly 'EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))]\nSystem.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +618\nSystem.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +209\nSystem.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) +130\nSystem.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +178\nSystem.Web.Compilation.BuildManager.GetPreStartInitMethodsFromReferencedAssemblies() +94\nSystem.Web.Compilation.BuildManager.CallPreStartInitMethods() +332\nSystem.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +591\n\n[HttpException (0x80004005): Could not load file or assembly 'EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))]\nSystem.Web.HttpRuntime.FirstRequestInit(HttpContext context) +8946484\nSystem.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97\nSystem.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +258\n</code></pre>\n\n<p>Then i clear all windows temp file and ASP.NET temp file then run the application again. but situation is not improved. Could you please help me to solve this.Thank you.</p>\n"},{"tags":["asp.net-mvc-2","printing","asp.net-ajax","asp.net-mvc-3","label"],"answer_count":7,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":1693,"score":3,"question_id":5048288,"title":"Printing Avery labels from ASP.NET MVC","body":"<p>I'm trying to dynamically generate and print Avery labels from an ASP.NET MVC 2 application. The labels will be limited to about 5 or so different templates. I am wondering what the best way for doing this is? The Labels are critical to our application and as such, we need to reduce printing error as much as possible.</p>\n\n<p>I have heard I can go for the kludgey approach and make HTML templates, however there will be numerous printing errors. The better approach I've come across is to print to PDF. Are there any pitfalls for this approach and how difficult is it to implement? Also would I go about doing this?\nDoes anyone know of any API's or third party software that would take care of this functionality?</p>\n"},{"tags":["asp.net-mvc-3","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12755158,"title":"Unauthorized AJAX request succeeds","body":"<p>I have following controller method:</p>\n\n<pre><code>[HttpPost]\n[Authorize(Roles=\"some_role_actual_user_is_NOT_in\")\npublic ActionResult AJAXMethod()\n{\n    return Json(new { message = \"server message\");\n}\n</code></pre>\n\n<p>and page with script:</p>\n\n<pre><code>function sendReq()\n{\n    $.ajax({\n        type: \"POST\",\n        data: { somedata: \"somedata\" },\n        url: \"/Path/To/AJAXMethod\",\n        success: onAJAXSuccess,\n        error: onAJAXError\n    });\n}\n\n\nfunction onAJAXSuccess(response, status, xhr)\n{\n    alert(\"success: \" + response.message);\n    alert(status);\n}\n\nfunction onAJAXError(xhr,status,error)\n{\n    alert(\"error: \" + status);\n    alert(error);\n}\n</code></pre>\n\n<p>When I call <code>sendReq</code> with user not in the authorized role the AJAX call still suceed - callback <code>onAJAXSuccess</code> is called, but <code>response.message</code> is undefined.</p>\n"},{"tags":["asp.net-mvc-3","website-admin-tool"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12759513,"title":"Web Site Administration Tool:Unable to connect to SQL Server database","body":"<p>I am developing an ASP.NET MVC3 application using,</p>\n\n<ol>\n<li>MS SQL Server Pro 2008</li>\n<li>MS VS 2010 pro</li>\n<li>Entity FrameWork as model class.</li>\n</ol>\n\n<p>When i start ASP.NET Web Site Administration Tool by clicking ASP.NET Configuration from solution explorer, in Security tab it shows an error:</p>\n\n<p><strong>Unable to connect to SQL Server database.</strong></p>\n\n<p>C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\Config\\machine.config has a connection string as,</p>\n\n<pre><code>&lt;connectionStrings&gt;\n        &lt;add name=\"LocalSqlServer\" connectionString=\"data   source=.\\MSSQLSERVER;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true\" providerName=\"System.Data.SqlClient\"/&gt;\n&lt;/connectionStrings&gt;\n</code></pre>\n\n<p>I opened the \nC:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\aspnet_regsql.exe\nand configure the database default named 'aspnetdb'. But situation is not being improved. So, would you please help me to solve it. \nThank you.</p>\n"},{"tags":["asp.net","facebook","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12395893,"title":"Post in facebook from my asp.net mvc 3 website not appear in the timeline of friends","body":"<p>I'm posting straight from my website to my facebook wall. Alright.\nThe problem is that my publication does not appear in the timeline of my friends, they can only view my publication is accessing my wall.\nIn a normal publication via my friends facebook wall view in them. Notification.\nFollow my code.</p>\n\n<pre><code>private static dynamic PostToFacebookWall(string token, string message, long facebookId)\n{\n    var FbApp = new FacebookClient(token);\n    IDictionary&lt;string, object&gt; postArgs = new Dictionary&lt;string, object&gt;();\n    postArgs[\"message\"] = \"test\";\n    postArgs[\"description\"] = \"test description\";\n    postArgs[\"name\"] = \"test name\";\n    postArgs[\"link\"] = \"http://www.cityto.us/Divulgar-Servico-Festas-e-Eventos-Jo-Fantasias-%E2%80%93-Aluguel-de-Fantasias/a/34/78\";\n    postArgs[\"privacy\"] = new { value = \"EVERYONE\" };\n    if (token != null) postArgs[\"access_token\"] = token;\n    postArgs[\"uid\"] = facebookId;\n    var result = FbApp.Post(\"/\" + facebookId + \"/feed\", postArgs);\n    return result;\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12758995,"title":"Should I include a check of ModelState when doing a try catch for my MVC login?","body":"<p>Can someone help me with this. I am looking to put this code into a try catch. But I can't say how best to implement this:</p>\n\n<pre><code>public JsonResult JsonLogin(LoginModel model, string returnUrl)\n        {\n            if (ModelState.IsValid)\n            {\n                if (Membership.ValidateUser(model.UserName, model.Password))\n                {\n                    FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);\n                    return Json(new JsonDialog\n                    {\n                        Redirect = returnUrl,\n                        Success = true\n                    });\n                }\n                else\n                {\n                    ModelState.AddModelError(\"\", \"The user name or password provided is incorrect.\");\n                }\n            }\n            // If we got this far, something failed\n            return Json(new JsonDialog\n            {\n                Errors = GetErrorsFromModelState(),\n                Success = false\n            });\n        }\n</code></pre>\n\n<p>Should I put all of the code including the first \"if\" within the try catch?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":3,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":6721,"score":0,"question_id":5798965,"title":"mvc3 code-first error on sqlexpress","body":"<p>when using sqlexpress </p>\n\n<pre><code>&lt;add name=\"SchoolContext\"\n     connectionString=\"Data Source=.\\SQLEXPRESS;Initial Catalog=CatomMvc;Integrated Security=True\"\n     providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n\n<p>i get an error    </p>\n\n<p>\"Model compatibility cannot be checked because the database does not contain model metadata. Ensure that IncludeMetadataConvention has been added to the DbModelBuilder conventions.\"  </p>\n\n<p>when i change to </p>\n\n<pre><code>&lt;add name=\"SchoolContext\" connectionString=\"Data Source=|DataDirectory|School.sdf\" providerName=\"System.Data.SqlServerCe.4.0\"/&gt;\n</code></pre>\n\n<p>it's work but i want to use sqlexpress or sql 2008 that gave the same error</p>\n"},{"tags":["asp.net-mvc-3","caching","thread-safety"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12754239,"title":"Thread safe caching","body":"<p>I am trying to analyze what problem i might be having with unsafe threading in my code.</p>\n\n<p>In my mvc3 webapplication i try to the following:</p>\n\n<pre><code>// Caching code\npublic static class CacheExtensions\n{\n    public static T GetOrStore&lt;T&gt;(this Cache cache, string key, Func&lt;T&gt; generator)\n    {\n        var result = cache[key];\n        if(result == null)\n        {\n          result = generator();\n          lock(sync) {\n              cache[key] = result;\n          }\n        }\n    return (T)result;\n    }\n}\n</code></pre>\n\n<p>Using the caching like this:</p>\n\n<pre><code>// Using the cached stuff\npublic class SectionViewData \n{\n    public IEnumerable&lt;Product&gt; Products {get;set;}\n    public IEnumerable&lt;SomethingElse&gt; SomethingElse {get;set;}\n}\n\nprivate void Testing() \n{\n    var cachedSection = HttpContext.Current.Cache.GetOrStore(\"Some Key\", 0 =&gt; GetSectionViewData());\n\n    // Threading problem?\n    foreach(var product in cachedSection.Products)\n    {\n         DosomestuffwithProduct...\n    }\n}\n\nprivate SectionViewData GetSectionViewData() \n{\n    SectionViewData viewData = new SectionViewData();\n    viewData.Products = CreateProductList();\n    viewData.SomethingElse = CreateSomethingElse();\n\n    return viewData;\n}\n</code></pre>\n\n<p>Could i run inte problem with the IEnumerable? I dont have much experience with threading problems. The cachedSection would not get touched if some other thread adds a new value to cache right? To me this would work!</p>\n\n<p>Should i cache Products and SomethingElse indivually? Would that be better than caching the whole SectionViewData??</p>\n"},{"tags":["asp.net-mvc-3","entity-framework-4","dynamic-data","ef-database-first"],"answer_count":3,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":996,"score":4,"question_id":5807168,"title":"Adding dynamic data (for data scaffolding) to an ASP.NET MVC 3 site","body":"<p>I'm doing my first ASP.NET MVC 3 project here, and since I need to support stored procedures, I decided to use Entity Framework 4.1 with the \"database-first\" approach, e.g. with all the EDMX goodness.</p>\n\n<p>Since I absolutely need the stored procedure support, I <strong>cannot</strong> use code-first (as much as I'd love to).</p>\n\n<p>All the cool new MVC scaffolding stuff seems to be based on code-first (which I cannot use - see above) -- or is there a way / a setting to influence it so that it'll use <code>ObjectContext</code> instead of <code>DbContext</code>??.</p>\n\n<p>So how do I create a quickie section of my MVC 3 app to scaffold some lookup tables - using the EF 4.1 database-first approach? Can I use dynamic data? How do I add this to an existing MVC 3 (.NET 4) project?? Can't seem to find any \"add new item\" entry for dynamic data..... and all the how-to videos I find are for MVC 1 or 2 and .NET 3.5 - do they still apply??</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","routes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":12756924,"title":"Can I have more than one action in a single routemap?","body":"<p>I have the following route set up:</p>\n\n<pre><code>    context.MapRoute(\n        \"MyAccount_default\",\n        \"MyAccount/{controller}/{action}/{id}\",\n        new { action = \"Index\", id = UrlParameter.Optional }\n    );\n</code></pre>\n\n<p>and the following links:</p>\n\n<pre><code>/MyAccount/Access/Login\n/MyAccount/Access/Logout\n/MyAccount/Access/Register\n</code></pre>\n\n<p>Is there some way that I can create a routemap so that entering:</p>\n\n<pre><code>/Login\n/Logout\n/Register \n</code></pre>\n\n<p>Would direct the request to the MyAccount area, Access controller and Login/Logout or Register methods? If I have\nthe routemap then can it belong inside the routemap of the MyAccount area or does it need to be outside that?</p>\n"},{"tags":["entity-framework","asp.net-mvc-3","entity-framework-4.1"],"answer_count":2,"favorite_count":5,"up_vote_count":16,"down_vote_count":0,"view_count":4233,"score":16,"question_id":5414611,"title":"Entity Framework Validation confusion - maximum string length of '128'","body":"<p>I'm faced with a confusing problem where in my Edit or Create action result methods, EF4 will throw a DbEntityValidationException with the inner message stating:</p>\n\n<blockquote>\n  <p>The field Body must be a string or\n  array type with a maximum length of\n  '128'.</p>\n</blockquote>\n\n<p>The model in question looks like this:</p>\n\n<pre><code>[Table(\"tblArticles\")]\npublic class Article\n{\n    [Key]\n    public int ID { get; set; }\n    [Required(ErrorMessage=\"Title must be included\")]\n    public string Title { get; set; }\n    [AllowHtml]\n    public string Body { get; set; }\n    [Required(ErrorMessage=\"Start Date must be specified\")]\n    [Display(Name=\"Start Date\")]\n    [DisplayFormat(DataFormatString=\"dd-mm-yyyy\")]\n    public DateTime? StartDate { get; set; }\n    [Required(ErrorMessage = \"End Date must be specified\")]\n    [Display(Name = \"End Date\")]\n    public DateTime? EndDate { get; set; }\n    public int Priority { get; set; }\n    public bool Archived { get; set; }\n\n    public virtual ICollection&lt;ArticleImage&gt; Images { get; set; }\n}\n</code></pre>\n\n<p>The \"Body\" field in the actual database is of type Text, so there's no obvious limit there.  The data that I'm trying to post is this:</p>\n\n<blockquote>\n<pre><code>&lt;p&gt;\nThis is an example to confirm that new articles are looking right.&lt;/p&gt;\n&lt;p&gt;\n&lt;img alt=\"\" src=\"http://www.google.co.nz/logos/2011/houdini11-sr.jpg\"\nstyle=\"width: 160px; height: 56px; float: left;\" /&gt;&lt;/p&gt;\n</code></pre>\n</blockquote>\n\n<p>An example of the Edit method looks like this:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Edit(Article article)\n{\n    if (ModelState.IsValid)\n    {\n        try\n        {\n            articleRepository.Update(article);\n        }\n        catch (DbEntityValidationException dbevEx)\n        {\n            ErrorSignal.FromCurrentContext().Raise(dbevEx);\n            ModelState.AddModelError(\"FORM\", dbevEx);\n            return View(\"Edit\", article);\n        }\n        // Other exception handling happens...\n    }\n\n    return RedirectToAction(\"Index\");\n}\n</code></pre>\n\n<p>And finally, the method that actually does the grunt work is:</p>\n\n<pre><code>public void Update(T Entity)\n{\n    dbset.Attach(Entity);\n    db.Entry(Entity).State = System.Data.EntityState.Modified;\n    db.Commit();\n}\n</code></pre>\n\n<p>I can't see anything in code or in the database that might be causing the problem, so where else should I look?</p>\n"},{"tags":["asp.net-mvc-3","telerik-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12716815,"title":"Asp.net MVC Telerik chart.options.series.push","body":"<p>my application is asp.net MVC, using Telerik MVC charts.  I am trying to hide and show series using Javascript:</p>\n\n<p>Here is the chart:</p>\n\n<pre><code>@(Html.Telerik().Chart&lt;MyVDC.Models.ChartData.PatientGroupData&gt;()\n          .Name(\"Chart\")\n           .Title(title =&gt; title\n            .Text(\"Representative Sales vs. Total Sales\"))\n            .Series(series =&gt;\n            {\n                //series.Line(s =&gt; s.Diastolic).Name(\"Diastolic\");\n                series.Line(s =&gt; s.Systolic).Name(\"Systolic\");\n                series.Line(s =&gt; s.HeartRate).Name(\"Heart Rate\");\n            })\n             .CategoryAxis(axis =&gt; axis\n                .Categories(s =&gt; s.Day).Labels(labels =&gt; labels.Template(\"${ formatDate(value) }\"))\n    )\n           .DataBinding(dataBinding =&gt; dataBinding\n                            .Ajax().Select(\"_PatientGroupChartData\", \"BP\"))\n\n                         )\n</code></pre>\n\n<p>Here is the script for showing Diastolic series:</p>\n\n<pre><code> function ShowDiastolic() {\n        var chart = $(\"#Chart\").data(\"tChart\");\n        chart.options.series.push({ color: \"red\", data: [chart.Diastolic], name: \"Diastolic\", type: \"Line\" });\n        chart.refresh();\n    }\n</code></pre>\n\n<p>I did not have any luck, I would appreciate your suggestions.  Thanks in advance.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":108,"score":0,"question_id":12748511,"title":"Using jqGrid 4.4.0 Dependent select drop downs, have 2nd drop down load from dataUrl dynamically based upon other columns value","body":"<p>In the grid I have a country drop down and a province/state drop down. When the user selects the Country drop down I need to get the list to load with the provinces/states for the currently selected country in its row.</p>\n\n<p>I get my lists from the server (using MVC 3, .Net) using a dataUrl. I have written code in the grid's column to define the dataInit editoption to change the dataUrl to contain my current country Id. However, it appears that the dataUrl is called before the dataInit event occurs.</p>\n\n<p>To further complicate this, I have created a base grid view which is re-used throughout our application. This is needed as we have 30-60 different grids within the application. So the user of each grid merely defines the columns, their types, edittypes, formats, etc. The base grid view merely generates the jqgrid on the fly (its written using RAZOR view engine within Vs.Net's MVC 3 frmaework).</p>\n\n<p>In my razor code (basegrid) for each column of select type which is defined to have a dependent column, I generate the code for the dataInit function to get that value and update the dataUrl for the column's definition.</p>\n\n<p>MY CONCLUSIONS:</p>\n\n<p>It appears that my province/state column's dataInit method is called AFTER the dataUrl is called (i.e. after I have called server to get the list). If this is the normal behaviour of dataInit, I need a different column event method. </p>\n\n<p>REQUIREMENTS:</p>\n\n<p>1) I can't use the standard grid 'BeforeEditCell' events since I may have multiple selects which may depend upon other columns. As well, the user of my basegrid will determine, at runtime, the dependency relationship. (The razor code iterates through each column and generates the grid syntax).</p>\n\n<p>2) I would like the dataUrl to be modified BEFORE the url is invoked for loading. I do not want to perform to load calls for the list</p>\n\n<p>3) I would like to avoid loading the lists into javascript array. So have to use dataUrl.</p>\n\n<p>Here is a snippet of what gets declared. I have removed the other columns as they follow simpler setup, but similar in script.</p>\n\n<pre><code>jQuery(\"#gridList\").jqGrid({\n    url: '/Home/HonourAwardGridData',\n    datatype: \"json\",\n    colNames: [\n    'Country',\n    'Province / State',\n        ],\n    colModel: [\n{\nname: 'Country',\nindex: 'Country',\nwidth: 90,\nsortable: true,\neditable: true,\neditrules: {\n        edithidden: false,\nrequired: false    },\n        hidden: false,\n                    edittype: 'select',\n                    editoptions: {\n                    dataEvents: [\n                                 { type: 'change', fn: function(e) { $(\"#gridList\").jqGrid(\"saveCell\", saveRow, saveCol); } },\n                                ],\n                    dataUrl: '/Common/GetCountryValues?pageId=HonourAward',\n                    buildSelect: BuildLookupEntitySelect\n                    },\n},\n{\nname: 'ProvinceState',\nindex: 'ProvinceState',\nwidth: 90,\nsortable: true,\neditable: true,\neditrules: {\n        edithidden: false,\nrequired: false    },\n        hidden: false,\n                    edittype: 'select',\n                    editoptions: {\n                    dataEvents: [\n                                 { type: 'change', fn: function(e) { $(\"#gridList\").jqGrid(\"saveCell\", saveRow, saveCol); } },\n                                ],\n                    dataUrl: '/Common/GetProvinceValues?pageId=HonourAward&amp;countryId={0}',\n                        dataInit: function(elem) {\n                                      var myGrid = $('#gridList');\n                                      var selRowId = mygrid.jqGrid('getGridParam', 'selrow');\n                                      var depColName = 'Country';\n                                      var depColValue = mygrid.jqGrid('getCell', selRowId, depColName);\n                                      var newDataUrl = '/Common/GetProvinceValues?pageId=HonourAward&amp;countryId={0}';\n                                      newDataUrl = newDataUrl.replace(\"{0}\", depColValue);\n\n                                      $(\"#grid\").jqGrid('setColProp', depColName, {dataUrl: newDataUrl}); \n                                  },\n                    buildSelect: BuildLookupEntitySelect\n                    },\n}\n    ],\n    rowNum: 200,\n        cellEdit: true,\n        cellSubmit: 'remote',\n        cellurl: '/Home/EditHonourAwardGridData',\n    multiselect: true,\n    grouping: false,\n    jsonReader: {\n        root: \"rows\", //array containing actual data\n        page: \"page\", //current page\n        total: \"total\", //total pages for the query\n        records: \"records\", //total number of records\n        repeatitems: false,\n        id: 'RecordId' //index of the column with the PK in it\n    },\n    toppager: true,\n    shrinkToFit: false,\n    rownumbers: false,\n    autowidth: true,\n    height: 'auto',\n    autoencode: true,\n    altRows : true,\n    pager: '#gridPager',\n    viewrecords: true,\n    sortable: false, \n    afterEditCell: function (id, name, val, IRow, ICol) { \n            saveRow = IRow; \n            saveCol = ICol; \n        }\n});\njQuery(\"#gridList\").jqGrid('navGrid', '#gridPager', { search: false,\n                                                      edit: true,\n                                                      add: false,\n                                                      del: false,\n                                                      editfunc: function(id) { \n                                                            var row = jQuery(\"#gridList\").jqGrid('getRowData', id);\n                                                            var dialogTitle = 'Honours and Career Awards' + ' - ' + row['Name'];\n                                                            LoadReportUpdateView('HonourAwardUpdate', dialogTitle, row.RecordId);\n                                                      },\n                                                      addfunc: function() { \n                                                            LoadReportAddView('HonourAwardAdd', 'Honours and Career Awards' + ' - Add New');\n                                                      }\n                                                    })\n                          .navButtonAdd('#gridPager', {\n                              caption: \"Columns\",\n                              onClickButton: function () {\n                                  ChooseColumns(\"#gridList\", 'HonourAward', 'Select columns for Honours and Career Awards grid');\n                              },\n                              position: \"last\"\n                          });\n});\n</code></pre>\n\n<p>Thank you in advance for any help, or direction that you can provide.</p>\n"},{"tags":["arrays","json","asp.net-mvc-3","posting"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":30,"score":0,"question_id":12748235,"title":"Posting multiple Arrays of objects from Javascript to MVC","body":"<p>I have found many answers for posting 1 array of objects to MVC, but I'm struggling with multiple. It's probably something small I'm missing.</p>\n\n<p>This is my JS:</p>\n\n<pre><code> $.ajax({\n                type: \"POST\",\n                url: encodeURI(\"&lt;%:Url.Action(\"SaveSimulator\")%&gt;\"),\n                data: JSON.stringify({ \n                    gevelshapes: (gevelshapes), \n                    gevelgaten:(gevelgaten),\n                    dakshapes:(dakshapes),\n                    dakgaten:(dakgaten),\n                    dakrandshapes:(dakrandshapes), \n                    dakrandgaten:(dakrandgaten) \n                }),\n                success: function(data){\n                    $(\"form\").submit();\n                },\n                contentType: 'application/json',\n                dataType: \"json\"\n            });\n</code></pre>\n\n<p>These are arrays containing objects with an x and y coordinate. Like so:</p>\n\n<pre><code>var gevelshapes = [{ x: \"1\", y: \"2\" },{ x: \"2\", y: \"1\" }];\n</code></pre>\n\n<p>My MVC controller looks like this:</p>\n\n<pre><code>[HttpPost]\n    public JsonResult SaveSimulator(List&lt;Coordinaat&gt; gevelshapes , List&lt;Coordinaat&gt; dakrandshapes, List&lt;Coordinaat&gt; dakshapes,List&lt;Coordinaat&gt; gevelgaten , List&lt;Coordinaat&gt; dakrandgaten, List&lt;Coordinaat&gt; dakgaten)\n    {\n\n        //do something \n    }\n</code></pre>\n\n<p>I am missing something because MVC thinks that <code>List&lt;Coordinaat&gt; gevelshapes</code> has 1 object with an empty x and y string instead of an array with 2 'coordinaat' objects.</p>\n\n<p>Any help would be great :)</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12755163,"title":"Why does CSS caching not work?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3644748/cache-css-and-js-files\">Cache CSS and JS files</a>  </p>\n</blockquote>\n\n\n\n<p>I created a simple MVC 3.0 application. I want to cache a CSS file.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>[OutputCache(Duration = 30, VaryByParam = \"none\")]\n  public ActionResult Index()\n    {\n        return View();\n    }\n</code></pre>\n\n<p>And the reference to the CSS file in my view:</p>\n\n<pre><code>&lt;head&gt;\n &lt;meta name=\"viewport\" content=\"width=device-width\" /&gt;\n&lt;link href=\"@Url.Content(\"/Contents/StyleSheet1.css\")\" rel=\"stylesheet\"\n   type=\"text/css\" /&gt;\n\n &lt;title&gt;Index&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div class=\"a\"&gt;\n       test\n &lt;/div&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>I tested it using Firefox version 15 and FireBug, but it did not work. Just the page cached not the CSS.</p>\n\n<pre><code>http://localhost:3944/                            304 Not Modified\nhttp://localhost:3944/Contents/StyleSheet1.css    200 OK\n</code></pre>\n\n<p>How can I cache the CSS file?</p>\n\n<p>Thanks All</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","collections"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12754026,"title":"How to retrieve only an ASP.NET MVC3 Collection's Count without element properties","body":"<p>I am using ASP.NET MVC 3 to track hits on a set of stored links.  I run into problems when displaying the hits' counts.  I think this is because since I am using lazy loading, whenever I call</p>\n\n<pre><code>link.Hits.Count\n</code></pre>\n\n<p>it loads all of each hit's data, including such things as agent and referrer information.  (Hits is a Collection.)  This is an issue when a link has over 9000 hits.  Is there a way of just getting the Hits' Count without it pulling in the Hits' data?</p>\n"},{"tags":["c#",".net","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12754516,"title":"New Table row every 4th loop","body":"<p>How do I create a new table row on every 4th loop in my Razor View?  This is creating a new row for each number before 4, and then quits creating new rows:</p>\n\n<pre><code>  @{\n            int i = 0;\n         }\n         @foreach (var item in ViewBag.ProgramIdList)\n         {\n\n          if((i / 4) == 0)\n          {\n              @:&lt;tr&gt;\n          }\n          &lt;td&gt;\n          &lt;input type=\"checkbox\" name=\"@item.ProgramId\" id=\"@item.ProgramId\" /&gt;   \n         &lt;label for=\"@item.ProgramTitle\"&gt;@item.ProgramTitle&lt;/label&gt;\n         &lt;/td&gt;\n        if((i / 4) == 0) \n        {\n        @:&lt;/tr&gt;\n          }\n             i++;\n         }\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","mvcmailer"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12753715,"title":"MVC Mailer pass a model to the mail view","body":"<p>I'm using the MVC Mailer - I have this in my controller:</p>\n\n<pre><code>    //\n    // POST: /ExhibitorInterest/Create\n\n    [HttpPost]\n    public ActionResult Create(ExhibitorInterest exhibitorinterest)\n    {\n        if (ModelState.IsValid)\n        {\n            db.ExhibitorInterests.Add(exhibitorinterest);\n            db.SaveChanges();\n\n            UserMailer.ExhibitorInterest().Send();\n\n            return RedirectToAction(\"Thankyou\");\n        }\n\n        return View(exhibitorinterest);\n    }\n</code></pre>\n\n<p>But I want to pass the model <strong>exhibitorinterest</strong> to the mailer view:</p>\n\n<p>The UserMailer.cs has:</p>\n\n<pre><code>public virtual MvcMailMessage ExhibitorInterest()\n    {\n        //ViewBag.Data = someObject;\n        return Populate(x =&gt;\n        {\n            x.Subject = \"ExhibitorInterest\";\n            x.ViewName = \"ExhibitorInterest\";\n            x.To.Add(\"me@myemail.co.uk\");\n        });\n    }\n</code></pre>\n\n<p>Any ideas how I get exhibitorinterest into the UserMailer.cs - so I can add it to the mail view please?</p>\n\n<p>Thank you,</p>\n\n<p>Mark</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":271,"score":0,"question_id":12646258,"title":"Styles.Render/Scripts.Render does not render in MVC 3","body":"<p>I am using bundling and minification with MVC 3 with .NET Framework 4. Created BundleConfig.cs \n    and placed under App_Data folder. Called BundleConfig.RegisterBundles(BundleTable.Bundles); \n    from Application_Start() of Global.asax file. From master file I called \n    &lt;% Styles.Render(\"~/Content/themes/base\"); %>\n    &lt;% Scripts.Render(\"~/Scripts\",\"~/Scripts/Controllers\",\"~/Scripts/Views\");%> on header tag.However\n    CSS not rendered as expected and JQuery not recognized as Scripts.Render does not work as<br>\n    expected.</p>\n\n<pre><code>my BundleConfig.cs class definition follows here...\n\n public class BundleConfig\n {\n    public static void RegisterBundles(BundleCollection bundles)\n    {\n        bundles.Add(new StyleBundle(\"~/Content/themes/base\").Include(\n\n                        \"~/Content/themes/base/Blueprint-Liquid.css\",\n                        \"~/Content/themes/base/ex.css\",\n                        \"~/Content/themes/base/exNav.css\",\n                        \"~/Content/themes/base/ie.css\",\n                        \"~/Content/themes/base/jquery-ui-1.8.14.custom.css\",\n                        \"~/Content/themes/base/jquery.qtip.css\",\n                        \"~/Content/themes/base/reset.css\",\n                        \"~/Content/themes/base/Site.css\",\n                        \"~/Content/themes/base/structure-fixed.css\",\n                        \"~/Content/themes/base/structure-fluid.css\",\n                        \"~/Content/themes/base/tipsy.css\",\n                        \"~/Content/themes/base/typography.css\",\n                        \"~/Content/themes/base/ui.jqgrid.css\"\n                       )\n                 );\n\n        bundles.Add(new ScriptBundle(\"~/Scripts/Controllers\").Include(\n                            \"~/Scripts/Controllers/ProjectController.js\",\n                            \"~/Scripts/Controllers/RequestController.js\",\n                            \"~/Scripts/Controllers/SystemController.js\"\n                                   )\n                                );\n\n        bundles.Add(new ScriptBundle(\"~/Scripts/Views\").Include(\n                            \"~/Scripts/Views/ProjectView.js\",\n                            \"~/Scripts/Views/RequestView.js\",\n                            \"~/Scripts/Views/SystemView.js\"\n                                )\n                            );\n\n        bundles.Add(new ScriptBundle(\"~/Scripts\").Include(\n              \"~/Scripts/Dialog.js\",\n              \"~/Scripts/EX.Computing.js\",\n              \"~/Scripts/exNav.js\",\n              \"~/Scripts/grid.locale-en.js\",\n              \"~/Scripts/jquery-1.6.2.js\",\n              \"~/Scripts/jquery-1.6.2.min.js\",\n              \"~/Scripts/jquery-ui-1.8.14.js\",\n              \"~/Scripts/jquery-ui-1.8.14.min.js\",\n              \"~/Scripts/jquery.jqGrid.fluid.js\",\n              \"~/Scripts/jquery.jqGrid.min.js\",\n              \"~/Scripts/jquery.jqGrid.src.js\",\n              \"~/Scripts/jquery.qtip.js\",\n              \"~/Scripts/jquery.tipsy.js\",\n              \"~/Scripts/jquery.jquery.unobtrusive-ajax.js\",\n              \"~/Scripts/jquery.jquery.unobtrusive-ajax.min.js\",\n              \"~/Scripts/jquery.jquery.validate-vsdoc.js\",\n              \"~/Scripts/jquery.validate.js\",\n              \"~/Scripts/jquery.validate.min.js\",\n              \"~/Scripts/jquery.validate.unobtrusive.js\",\n              \"~/Scripts/jquery.validate.unobtrusive.min.js\",\n              \"~/Scripts/json2.js\",\n              \"~/Scripts/Labels.js\",\n              \"~/Scripts/modernizr-1.7.js\",\n              \"~/Scripts/SessionTimeOut.js\",\n              \"~/Scripts/underscore.js\"\n\n             )\n          );\n       BundleTable.EnableOptimizations = true; \n\n      }\n I am wondering what I am missing? Any help grately appreciated!\n\n Thanks,\n Ramani\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12753884,"title":"Null Parameter Error","body":"<p>I am having a problem calling an Edit method in an application I am creating. In the view an ActionLink is clicked that should be passing the order number to the Edit method as a parameter and opening an edit page with the info for the order populated in the fields. However upon clicking the link I receive the error:</p>\n\n<blockquote>\n  <p>The parameters dictionary contains a null entry for parameter 'orderNum' of non-nullable type 'System.Int32' for method 'System.Web.Mvc.ViewResult Edit(Int32)' in 'AddressUpdater.WebUI.Controllers.OrderController'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter.\n      Parameter name: parameters</p>\n</blockquote>\n\n<p>However the parameter is present in the URL. Here are the relevant method:</p>\n\n<pre><code>public ViewResult Edit(int orderNum)\n{\n    Order order = repository.Orders.First(o =&gt; o.OrderNumber == orderNum);\n    return View(order);\n}\n</code></pre>\n\n<p>If if change the parameter to <code>int? orderNum</code> the page will render without an error but none of the data is there.</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12753572,"title":"ASP.NET MVC 3: Are multiple nested Views with @section not supported in @RenderSection?","body":"<p>Here is my setup in ASP.NET MVC 3:\nMaster Page --(RenderBody)-> Index View --(Html.Action)-> Partial View.</p>\n\n<p>The Master Page has a <code>@RenderSection</code> and the Partial View has a <code>@section</code> block but the content isn't being included on the Master Page. I can, however, put the <code>@section</code> block on the Index View and that works. Are multi-nested Sections not supported in MVC 3? I really don't want to move the section block up a level but will if there is no other way.</p>\n\n<p>And just FYI this particular RenderSection is at the bottom of the Master Page for including JavaScript blocks. If a partial view needs to execute some script it can include the @section block to keep everything organized.</p>\n\n<p>Cheers!</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","entity-framework","ado.net"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":99,"score":1,"question_id":12753476,"title":"Data validation with entity framework","body":"<p>I am using ADO.Net entity framework with asp.net mvc3. I have a model which is database first. The data validation does not work in some cases, as I will explain.</p>\n\n<p>I have a form, when I submit that form, some items are being validated while others are not. I am simply using a form like this,</p>\n\n<pre><code>    @using (Html.BeginForm()) {\n    @Html.ValidationSummary(true)\n\n\n   &lt;fieldset&gt;\n        &lt;legend&gt;&lt;/legend&gt;\n\n\n         &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.VERSION_ID)\n            @Html.EditorFor(model =&gt; model.VERSION_ID)\n            @Html.ValidationMessageFor(model =&gt; model.VERSION_ID)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-field\"&gt;\n            @Html.LabelFor(model =&gt; model.ENTITY2.Name)\n            @Html.EditorFor(model =&gt; model.ENTITY2.Name)\n            @Html.ValidationMessageFor(model =&gt; model.ENTITY2.Name)\n        &lt;/div&gt;\n    &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Create\" /&gt;\n    &lt;/p&gt;\n</code></pre>\n\n<p> </p>\n\n<p>Now, the version_id has validation working while the Name does not.  I am getting the name from another entity. Any ideas on why the validation is not working? I can input empty fields which should not be allowed as that field is required, but when i press submit i get an error.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","viewmodel","databinder"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":12752824,"title":"ASP.NET MVC 3 DataBinder.Eval on Viewmodel object throws \"does not contain property\"","body":"<p>I have a view that was using a standard Model but now I need to add information from two different models on the page.  I created a ViewModel after doing some research to handle this.  Now I am getting an error when tring to show my view saying: </p>\n\n<p>DataBinding: 'VirtualAuthtech.ViewModels.CMSCalculatorViewModel' does not contain a property with the name 'WORKCY'.</p>\n\n<p>Here's my viewmodel</p>\n\n<pre><code>namespace VirtualAuthtech.ViewModels\n{\n    public class CMSCalculatorViewModel\n    {\n        public CPT CPT { get; set; }\n        public GPCI GPCI { get; set; }\n    }\n}\n</code></pre>\n\n<p>CPT is the first  model I was originally using and then I need to add GPCI</p>\n\n<p>Here is the ActionResult for my view</p>\n\n<pre><code>public ActionResult _CMSCalculator()\n        {\n            string CPTCode = string.Empty;\n            string MOD = string.Empty;\n            string GPCIPayID = \"31146\";\n            string GPCIYear = \"2011\";\n            if (Request.Params[\"CPT1\"] != null)\n            {\n                CPTCode = Request.Params[\"CPT1\"];\n                MOD = Request.Params[\"MOD\"];\n            }\n            return PartialView(\"_CMSCalculatorPanel\", (string.IsNullOrEmpty(CPTCode) ? null as CMSCalculatorViewModel : CPTDataHelper.GetCPTGPCI(CPTCode, MOD, GPCIPayID, GPCIYear)));\n        }\n</code></pre>\n\n<p>Here is the method to get the data from my models</p>\n\n<pre><code>    public static CMSCalculatorViewModel GetCPTGPCI(string CPTCode, string MOD, string GPCIPayID, string GPCIYear)\n    {\n        using (var DB = new VADataContext())\n        {\n            var view = new CMSCalculatorViewModel();\n            if (String.IsNullOrWhiteSpace(MOD))\n            {\n                view.CPT = (from cpt in DB.CPTs\n                            where cpt.CPT1 == CPTCode\n                            select cpt).FirstOrDefault&lt;CPT&gt;();\n                view.GPCI = (from gpci in DB.GPCIs\n                             where gpci.PAYID == GPCIPayID &amp;&amp; gpci.YEAR == GPCIYear\n                             select gpci).FirstOrDefault&lt;GPCI&gt;();\n            }\n            else\n            {\n                view.CPT = (from cpt in DB.CPTs\n                            where cpt.CPT1 == CPTCode &amp;&amp; cpt.MOD == MOD\n                            select cpt).FirstOrDefault&lt;CPT&gt;();\n                view.GPCI = (from gpci in DB.GPCIs\n                             where gpci.PAYID == GPCIPayID &amp;&amp; gpci.YEAR == GPCIYear\n                             select gpci).FirstOrDefault&lt;GPCI&gt;();\n            }\n            return view;\n        }\n    }\n</code></pre>\n\n<p>Now my view is using the new ViewModel and I'm trying to display a field:</p>\n\n<pre><code>&lt;div style='float:left; width: 35px; margin: 0; padding: 0; text-align: center; color: #094ab2'&gt;@VirtualAuthtech.CallbackPanelHelper.GetFieldNumber(Model, \"WORKCY\")&lt;/div&gt;\n</code></pre>\n\n<p>And I'm getting an error in this piece of code: </p>\n\n<pre><code>public static double GetFieldNumber(object data, string fieldName)\n        {\n            object text = DataBinder.Eval(data, fieldName);\n            if (text == null || text.ToString() == string.Empty)\n                return 0;\n            double number = Convert.ToDouble(text);\n            return number;\n        }\n</code></pre>\n\n<p>It's saying my model does not contain the property of the field I'm looking for.  Do I need to tell it to look in the CPT part of my view model?</p>\n\n<p>This is the first ViewModel I've ever created so I might be going about this all wrong.  Any help to send me in the right direction would be greatly appreciated!</p>\n"},{"tags":["javascript","jquery","html","asp.net-mvc-3"],"answer_count":5,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":89,"score":-2,"question_id":12752834,"title":"Read the first column values of a HTML table with jquery","body":"<p>I got a table:</p>\n\n<pre><code>&lt;table id=\"ItemsTable\" &gt;​\n    &lt;tbody&gt;\n   &lt;tr&gt;\n     &lt;th&gt;\n       Number\n     &lt;/th&gt;\n     &lt;th&gt;\n       Number2\n     &lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;tr&gt;\n    &lt;td&gt;32174711&lt;/td&gt;     &lt;td&gt;32174714&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n    &lt;td&gt;32174712&lt;/td&gt;     &lt;td&gt;32174713&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>I need the values 32174711 and 32174712 and every other value of the column number into an array or list, i'm using jquery 1.8.2.</p>\n"},{"tags":["asp.net-mvc-3","data-access-layer"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12751280,"title":"mvc3 and linq to sql architecture","body":"<p>I am building an MVC3 application and I am using Linq to sql for my DAL. My DAL is called MyDataReader and handles creating/initializing datacontext, plus it defines all the methods that retrieve data from the database. All the methods are instance methods, so in order to call the methods, I need to instantiate a MyDataReader object. </p>\n\n<p>My questions is: what is the best way to call the methods in my DAL. Initially, I was instantiating a MyDataReader object from the controllers whenever I needed to call a DAL method. Then I realized every time I instantiate a MyDataReader object, the datacontext object is created and a connection gets established. </p>\n\n<p>In my second approach, I created a static parameter in the Global.asax file as:</p>\n\n<pre><code>public class MvcApplication : System.Web.HttpApplication\n{\n\n        public static MyDataReader reader;\n        protected void Application_Start()\n         {\n            reader = new MyDataReader();\n            AreaRegistration.RegisterAllAreas();\n            RegisterGlobalFilters(GlobalFilters.Filters);\n            RegisterRoutes(RouteTable.Routes);\n         }\n}\n</code></pre>\n\n<p>This limits the database initialization operation to minimum. I can call the DAL methods from all my controllers by: </p>\n\n<pre><code>MvcApplication.reader.CallTheMethod()\n</code></pre>\n\n<p>Is this a good way? What is the best way to call DAL methods?</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc-3","asp.net-web-api"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":93,"score":0,"question_id":11855357,"title":"WebAPI and MVC on separate Machines","body":"<p>I have both a design question along with an overall question of the way WebAPI works. </p>\n\n<p>We have an Internal Website that houses many applications ( a seperate MVC Area for each application). We then have sectioned out the DAL Logic into libraries that are front ended by Web Service calls. The Models/Repositories will call to CRUD things inside several databases (some internal, some third party). So It looks like this</p>\n\n<p>UI -> Model-> Repository -> WebServices -> DB.</p>\n\n<p>This was originally done because we needed to be able to access multiple data access points and funnel them back to the Internal Website for various applications and it seemed like a good way to abstract out all the logic so that the Web Application only focuses on the View end. This pattern has proven to be good for seperation of concerns, but now we are looking into making this available to more than just .NET applications/clients and that points me to begin to look at WebAPI.</p>\n\n<p>Here are my questions:</p>\n\n<ol>\n<li>My main question is, knowing that the Web Services are all done in WCF ( contract based), how hard would it be to convert this to using WebAPI keeping in mind that we wish to make sure the WebAPI webservice is on a separate server from the UI. </li>\n<li>Is there any way to set up WebAPI to have contracts and still use the HTTP verbs?\n<ul>\n<li>If i am remotely accessing the WebAPI web service via an MVC application on another server and another solution, is there any way to still get that strongly typed objects that you get when you consume a WCF contract?</li>\n</ul></li>\n<li>What are people's thoughts on this design pattern?</li>\n</ol>\n"},{"tags":["ajax","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12752870,"title":"How to add a Model object into my AJAX.ActionLink","body":"<p>I have an Html.ActionLink that I need to post to the server:</p>\n\n<pre><code>@Html.ActionLink(\"Some Text\", \"controller\", \"service\", Model, new { @class = \"btn btn-primary\", @id = \"someText\" })\n</code></pre>\n\n<p>I tried Turning this into an AJAX post with:</p>\n\n<pre><code>@Ajax.ActionLink(\"Some Text\", \"controller\", \"service\", Model, new { @class = \"btn btn-primary\", @id = \"someText\" }, new AjaxOptions(){HttpMethod = \"POST\"})\n</code></pre>\n\n<p>There is no overload for string, string, string, object, object like the above Html.Actionlink.</p>\n\n<p>I am not very familiar with AJAX but is there a way to tell AJAX to pass the same data?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","ninject","ioc-container"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12752143,"title":"Custom ModelMetadataProvider is a singleton but depends on a request-scoped service","body":"<p>In my ASP.NET MVC project, I have a custom ModelMetadataProvider that requires a service <code>PropertyAccess</code>. I'm currently using constructor injection and an IOC container (Ninject) to do the dirty work. The problem is that <code>PropertyAccess</code> is request scoped, while my ModelMetadataProvider is only created once (at application start up). This results in the <code>PropertyAccess</code> service being out of date/incorrect.</p>\n\n<p>In case it matters, here is how I'm setting up my ModelMetadataProvider in my Global.asax:</p>\n\n<pre><code>private void RegisterModelMetadataProvider()\n{\n    var metadataProvider = DependencyResolver.Current.GetService&lt;CustomModelMetadataProvider&gt;();\n    ModelMetadataProviders.Current = metadataProvider;\n}\n</code></pre>\n"},{"tags":["jquery","ajax","asp.net-mvc-3","ajax.beginform","unobtrusive"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12750898,"title":"jQuery.Ajax vs Ajax.beginform with unobtrusive JavaScript","body":"<p>First post, please be gentle :)</p>\n\n<p>I am relatively new to MVC3 and am building a webapp at work.</p>\n\n<p>I have several pages with CheckBoxes that turn features on/off and when they change I submit via a jQuery Ajax call and return a json success/fail to me so I can display a message.</p>\n\n<p>I have some forms with a bunch of fields that I was just submitting (not with Ajax) and checking if the modelstate is valid etc.. and redisplaying the form with messages if not.  I want to do this using Ajax instead.</p>\n\n<p>I have a form using Ajax.BeginForm which submits properly to the controller, the model is validated and if it has errors, i return a partial view which is replaced using the UpdateTargetId.</p>\n\n<p>The thing I want to do is this... If the model was valid and the save successful, I need to return a partial view nonetheless because the UpdateTargetId will replace my form no matter what.  I would like to send back a 'success' flag of some kind so I can then display a message to say 'your data was saved' or something.</p>\n\n<p>OnSuccess fires if the Ajax call was successful, and doesn't care if the model was valid.</p>\n\n<p>I could use jQuery.Ajax to submit the form and in the controller return the return the PartialView as well as a success or fail I think?</p>\n\n<p>Can anyone tell be what the best practices are when building 'Ajax' web apps?</p>\n"},{"tags":["c#","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":333,"score":0,"question_id":12744932,"title":"DropDown List Selected Index Change Event In MVC 3 Razor","body":"<p>How to written MVC 3 Razor web application Selected Index Change Event of Drop Down List</p>\n"},{"tags":["jquery","asp.net-mvc-3","signalr"],"answer_count":5,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":3673,"score":5,"question_id":8920621,"title":"SignalR - StartUp","body":"<p>I am looking for the quick and dirty answer.  I am just blanking, and after staring at a screen for over 12 hours now, I think I am shot.</p>\n\n<p>I want to do a simple SignalR application as a tutorial.  I found this <a href=\"http://iwantmymvc.com/mvc-3-signalr-knockout-real-time-notifications\">example</a>, but I keep getting the error that tickets is undefined.  I have found a couple more, and keep getting the same error.  I compared the sample project to mine and I cannot find any descrepencies.</p>\n\n<p>It seems as though <code>$.connection.ticketHub</code> or <code>$.connection.chat</code> are returning undefined objects.  Is there something special that I need to do with <code>/signalr/hubs</code>?  Any other thoughts are greatly appreciated.</p>\n"},{"tags":["asp.net-mvc-3","signalr"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1018,"score":2,"question_id":9518394,"title":"signalR maintaining user connection ids","body":"<p>I am trying to maintain a connection id for the user ,i mean even he refreshes the page he gets the same connectionid  </p>\n\n<p>This is what i could do till now</p>\n\n<p>the javascript part     </p>\n\n<pre><code>// Start the connection            \n\n            $.connection.hub.start(function () { chat.join(projectId, userId, userName); }).done(function () {\n                alert(\"Connected!\");\n                var myClientId = $.connection.hub.id;\n                setCookie(\"srConnectionid\", myClientId, 1);\n\n            });\n\n\n            function setCookie(cName, value, exdays) {\n\n              try{\n\n                var exdate = new Date();\n                exdate.setDate(exdate.getDate() + exdays);\n\n                var c_value = escape(value) + ((exdays == null) ? \"\" : \"; expires=\" + exdate);\n                document.cookie = cName + \"=\" + c_value;\n\n              }\n\n             catch(err){\n\n             alert(err.Description);             \n\n             }\n       }   \n</code></pre>\n\n<p>and then i made a class that inherits IConnectionIdFactory like this</p>\n\n<pre><code>  public class MyConnectionFactory : IConnectionIdFactory\n  {\n    public string CreateConnectionId(IRequest request)\n    {\n        if (request.Cookies[\"srconnectionid\"] != null)\n        {\n            return request.Cookies[\"srconnectionid\"];\n        }\n\n        return Guid.NewGuid().ToString();\n    }\n  }\n</code></pre>\n\n<p>i registerd the above class in Application_start() as below </p>\n\n<pre><code>protected void Application_Start()\n    {\n\n        AspNetHost.DependencyResolver.Register(typeof(IConnectionIdFactory), () =&gt; new MyConnectionFactory());     \n        AreaRegistration.RegisterAllAreas(); \n        RegisterGlobalFilters(GlobalFilters.Filters);\n        RegisterRoutes(RouteTable.Routes);\n    }\n</code></pre>\n\n<p>My problem is everytime MyConnectionFactory class is called inside the CreateConnectionId\nrequest.Cookies[\"srconnectionid\"] is null everytime,so the user is assigned new connectionid everytime.I could find only one link that helped me to maintain connection ids.It is <a href=\"http://www.kevgriffin.com/maintaining-signalr-connectionids-across-page-instances\" rel=\"nofollow\">http://www.kevgriffin.com/maintaining-signalr-connectionids-across-page-instances</a></p>\n\n<p>Can any one suggest how to fix my problem or is there any other approach to reuse the connection id for the same user...?</p>\n\n<p>The Cookie value is set in the clientside.I have been trying this for 2 days.It would be great help</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12725200,"title":"committing calculated values to database from mvc3 controller","body":"<p>I am wondering if what I want to do will be feasible in MVC3 Controller.  I have 3 tables; members, payment and paycategory.  I have  3 different payment categories in the categories table(CatA,CatB and CatC). In the payment view is a form for accepting member id and  payment value(decimal).  What I wish to do is when a value is passed through the form to the controller that value is split into 3 in a ratio and for each category the calculated value, and  the same  member Id is committed to the database.  For example if CatA is 30%, CatB is 50% and CatC is 20% and member Id is 1010 and 100.00 is passed on to controller,  the following should be committed to the database</p>\n\n<blockquote>\n  <p>pId |  mId  |  catid | value</p>\n  \n  <p>1  | 1010  |  1     | 30.00</p>\n  \n  <p>2   | 1010  |  2     | 50.00</p>\n  \n  <p>3   | 1010  |  3     | 20.00</p>\n</blockquote>\n\n<p>Any leads or help of any kind will  be much appreciated.\ncontroller</p>\n\n<pre><code>    // POST: /AutoPay/Create\n    [HttpPost]\n    public ActionResult Create(AutoPay autopay, int tcd, int id, int tzid, FormCollection formCollection)\n    {\n        if (ModelState.IsValid)\n        {\n\n         string[] rawpaysplit = formCollection[\"PayCatSplit\"].Split(' ');\n          foreach (var x in rawpaysplit){             \n\n          if (x.Equals (rawpaysplit[0])){\n          autopay.PId = 3;}\n          if (x.Equals (rawpaysplit[1])){\n          autopay.PId = tzid;}   \n          if (x.Equals (rawpaysplit[2])){\n          autopay.PId = 4;}\n          autopay.Pay= Convert.ToDecimal(x);\n          autopay.UId = id;\n          autopay.Tcd = tcd;\n          autopay.PDate = DateTime.Now;\n          autopay.LastUpdate = DateTime.Now;\n            autopay.PEntryId = Membership.GetUser().UserName;\n            db.AutoPays.Add(autopay);\n\n            db.SaveChanges();\n }\n            return RedirectToAction(\"Index\");\n        }\n</code></pre>\n\n<p>Model</p>\n\n<pre><code> public class AutoPay\n{\n    [Key]\n    public int Id { get; set; }\n\n    public int? Tcd { get; set; }\n    public int UId { get; set; }\n    public virtual Member Member { get; set; }\n    public int PId { get; set; }\n    public virtual PayCat PayCat { get; set; }\n    public int YId { get; set; }\n    public virtual DateYear DateYear { get; set; }\n    public int MId { get; set; }\n    public virtual DateMonth DateMonth { get; set; }\n    [DisplayFormat(DataFormatString = \"{0:F2}\", ApplyFormatInEditMode = true)]\n    [DisplayName(\"Amount\")]\n    public decimal Pay { get; set; }\n    [ScaffoldColumn(false)]\n    public DateTime PDate { get; set; }\n    [DisplayName(\"Entry By\")]\n    public string PEntryId { get; set; }\n    [DisplayName(\"last Upadated By\")]\n    public string PUpdatedBy { get; set; }\n    [DisplayName(\"Receipt No\")]\n    public string RecNo { get; set; }\n    [DisplayName(\"Book No\")]\n    public int BId { get; set; }\n    public virtual ReceiptBook ReceiptBook { get; set; }\n    public bool POK { get; set; }\n    [ScaffoldColumn(false)]\n    public DateTime LastUpdate { get; set; }\n    public string PayCatSplit\n    {\n        get { return string.Format(\"{0} {1} {2}\", Math.Round((this.Pay * 0.773211m), 2), Math.Round((this.Pay * 0.123703m),2), Math.Round((this.Pay * 0.103086m))); }\n    }\n</code></pre>\n\n<p>I passed a lot of the variables in the querystring to reduce the number of fields in the views form.\nI managed to do this coding but it skips the first two values and save only the last correct entry in the database.  I need experts help</p>\n"},{"tags":["javascript","jquery","asp.net-mvc-3","web-security"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":138,"score":0,"question_id":12748531,"title":"IE Issue: IE + MVC3 + Fineuploader","body":"<p>I am having what appears to be an issue with Internet Explorer and it's default security settings for internet sites.</p>\n\n<p>Im using MVC3 with <a href=\"http://Fineuploader.com\" rel=\"nofollow\">Fineuploader</a></p>\n\n<p>When I try to upload a file it runs the onCompleate function but no files are uploaded and the response is null.</p>\n\n<p>We identified that if the site is added to the \"Local Intranet Sites\" in Internet Explorer everything works fine. However if the site is left as an external site with default settings applied is not working. </p>\n\n<p>Some code:</p>\n\n<pre><code>function createUploader() {\n    jQuery.ajaxSettings.traditional = true;\n    var uploader = new qq.FileUploaderBasic({\n        //element: document.getElementById('uploadButton'), //$(\"#file-upload\"),\n        button: $(\"#file-uploader-basic\").get(0),\n        action: APPLICATION_ROOT + '/SharedWorkflow/UploadImg',\n        params: {\n            ImageID:        $('.imageShow').attr('data-ImageID'),\n            testorderID:    $('.imageShow').attr('data-TestOrderID'),\n            CaseNumber:     $('.imageShow').attr('data-CaseNumber'),\n            Caption:        $('#newImgCaption').val()\n        },\n        debug: false,\n        onSubmit: function (id, fileName) {\n            if ($(\"#file-uploader-basic\").hasClass('fired') == false) {\n                $('#file-uploader-basic').addClass('fired');\n                $.blockUI({\n                    message: 'Uploading image...'\n                });\n            } else {\n                alert('You are currently uploading an image.');\n                return false;\n            }\n        },\n        onComplete: function (id, fileName, responseJSON) {\n            newImageName = fileName;\n            debugger;\n            $(\".AddImage\").attr('src', APPLICATION_ROOT + '/SharedWorkflow/GetImage?CaseNumber=' + responseJSON.Case.CaseNumber + '&amp;r=' + Math.random());\n            fillImageList(responseJSON.Image);\n            $.growlUI('Image uploaded...', '');\n            $('#file-uploader-basic').removeClass('fired');\n        },\n        onError: function (id, fileName, errorReason) {\n            alert(errorReason);\n        }\n    });\n}\n</code></pre>\n\n<p>Initially I thought it had to do with the Fineuploader component but after several attempts using different controller the same type of error is encountered when accessing the change method for input type='file'</p>\n\n<p>Note : I have a project in ASP.NET working fine with Fileuploader from the Ajaxcontroltoolkit.</p>\n"},{"tags":["facebook","asp.net-mvc-3","membership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12331254,"title":"Facebook C# SDK and asp.NET Membership. What if the user changes email?","body":"<p>I have users connecting to my app with Facebook connect. As far as I have read I should use the facebook data like email and name to register them with asp.NET membership provider.</p>\n\n<p>This I should probably be able to do, but what happens if the user changes his name or email on facebook?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12604412,"title":"jqGrid - subgrid: need to use value from main grid row as subgrid column header...how?","body":"<p>Is there a \"simple/elegant\" way to set one of the column headers (all others can be constant) of a jqGrid subgrid based on a value of one of the cells from the row it's detailing from the main grid?</p>\n"},{"tags":["asp.net-mvc-3","visual-studio-2010","parameter-passing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12716079,"title":"Partial view returns the Model with empty fields","body":"<p>In a web application using ASP.NET MVC 3, I pass from the controller a model with initialized properties as parameter to a partial view. </p>\n\n<p>The view displays a dialog with a single textbox and on submit an action  in the starting controller is fired (the action takes the same model type as parameter). <br/>The problem is that at this point only the property relative to the textbox field has a value, the one inserted by the user, while all the others are null, even if in the view they had a proper value.</p>\n\n<p>How can I do in order to keep the properties from the view to controller once the submit button is clicked?</p>\n\n<p>EDIT (added code):</p>\n\n<pre><code> //----------   This method in the controller call the Partial View and pass the model  --------\n[HttpPost]\npublic PartialViewResult GetAddCustomFormerClubDialog()\n    {\n        var order = GetCurrentOrder();\n        //Order has here all properties initialized\n\n        var dialogModel = new dialogModel&lt;Order&gt; { Entity = order, ControllerAddEntityActionName = \"SelectOrder\"};\n\n        return PartialView(\"Dialogs/AddOrder\", dialogModel);\n    }\n\n\n\n//-----------------   Here the Partial View   -----------------------------------\n@model FifaTMS.TMS.Presentation.Model.Wizard.WizardDialogModel&lt;Club&gt;\n\n&lt;div&gt;\n@using (Ajax.BeginForm(Model.ControllerAddEntityActionName, \"Orders\", new AjaxOptions { HttpMethod = \"POST\"}))\n{\n    @Html.LabelFor(a =&gt; a.Entity.Name)\n    @Html.TextBoxFor(a =&gt; a.Entity.Name, new { @class = \"isrequired\", style=\"width: 250px;\" })\n }\n&lt;/div&gt;\n\n\n\n//--------  Here the method from the view (in the same controller as the first code portion)  -----\n [HttpPost]\n public JsonResult SelectOrder(dialogModel&lt;Order&gt; OrderModel)\n    {\n       var order= OrderModel.Entity;\n      // But order has only the property Name set (in the view)\n\n     ...\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","inheritance","razor","kendo-ui","csla"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":625,"score":0,"question_id":11970203,"title":"How do I make a Kendo UI batch grid that uses dervied objects on a CSLA framework","body":"<p>What I'm attempting to do is have a \"Super\" entity class for saved products.  Depending on where the product is in the application, certain extra attributes are necessary (but not always).</p>\n\n<p>For example, when the product is being used within a grid, I want to have a ViewModel that derives from the Entity (inheriting all of the common fields) and then add a unique identifier attribute like \"rowNumber\" for easy searching by the kendo ui grid CRUD.</p>\n\n<p>I thought I had all of this working, but I've hit a snag...  Everything renders fine and operates correctly until I click \"save\" for the batch grid.  It executes the function and all the data is present, but when it returns from the CRUD, it breaks.  In firebug, I see that an exception is being thrown, but it never finishes (the ajax spinner stays there) and all information within the exception is empty...</p>\n\n<p>I'm not sure if this is some issue with c# not playing well with CSLA or not.  I'm unsure.</p>\n\n<p>Any help would be appreciated!  I can't upload images because my rep isn't high enough or else I would put a picture of the exception, but I'll at least put what appears in the Firebug console.  Everything else about it is empty though...</p>\n\n<p><strong>Exception with endless execution and no response:</strong></p>\n\n<pre><code>GET http://localhost:32574/Exception/SystemException/00000000-0000-0000-0000-000000000000\n</code></pre>\n\n<p><strong>Entity:</strong>\nThis file is auto-generated by a CodeSmith template so it is kind of nonsensical, but it holds field values that appear in the view (see below).  The exception to what is on the view vs what is in the entity are fields that are not 'flattened' in the entity, as Kendo UI does not currently support this inside of editable grids. </p>\n\n<p><strong>ViewModel:</strong></p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.ComponentModel.DataAnnotations;\n\nnamespace Project.MVC.Models\n{\n    //The MetaData Class is where to put all annotations and validations\n    [MetadataType(typeof(Project.Business.Shipment.ItemMetaDataClass))]\n    public class ItemModel : Project.Business.Shipment.Item\n    {\n        public ItemModel()\n        {\n        }\n\n        public long rowNumber { get; set; }\n\n        public decimal Length { get; set; }\n        public decimal Width { get; set; }\n        public decimal Height { get; set; }\n\n        [Display(Name = \"UoMDim\")]\n        [UIHint(\"ItemGrid_RefUnitOfMeasurementListingDimension\")]\n        public string DimensionUnitOfMeasure { get; set; }\n\n        [Display(Name = \"UoMW\")]\n        [UIHint(\"ItemGrid_RefUnitOfMeasurementListingWeight\")]\n        public string WeightUnitOfMeasure { get; set; }\n\n        [Display(Name = \"Weight\")]\n        public decimal WeightValue { get; set; }\n\n        [Display(Name = \"Type\")]\n        [UIHint(\"ItemGrid_RefUnitTypeListing\")]\n        public string QuantityUnitOfMeasure { get; set; }\n\n        [Display(Name = \"Units\")]\n        public decimal QuantityValue { get; set; }\n}\n}\n</code></pre>\n\n<p><strong>Grid Controller:</strong></p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing Kendo.Mvc.UI;\nusing Kendo.Mvc.Extensions;\n\nnamespace Project.MVC.Controllers\n{\n    [Authorize]\n    public class ItemGridController : Csla.Web.Mvc.Controller\n    {\n        public ActionResult GetProducts([DataSourceRequest]DataSourceRequest request)\n        {\n            Project.MVC.Models.ShipmentModel shipmentModel = (Project.MVC.Models.ShipmentModel)ControllerBase.State.Object;\n\n            return Json(shipmentModel.ItemModelList.ToDataSourceResult(request));\n        }\n\n        [AcceptVerbs(HttpVerbs.Post)]\n        public ActionResult CreateProducts([DataSourceRequest]DataSourceRequest request, [Bind(Prefix = \"models\")]IEnumerable&lt;Models.ItemModel&gt; itemsToAdd)\n        {\n            Project.MVC.Models.ShipmentModel shipmentModel = (Project.MVC.Models.ShipmentModel)ControllerBase.State.Object;\n            var results = new List&lt;Models.ItemModel&gt;();\n\n            if (ModelState.IsValid)\n            {\n                foreach (Models.ItemModel newItem in itemsToAdd)\n                {\n\n                    if (shipmentModel.ItemModelList.Count &gt; 0)\n                    {\n                        var nextID = (from i in shipmentModel.ItemModelList\n                                      select i.rowNumber).Max() + 1;\n\n                        newItem.rowNumber = nextID;\n                    }\n\n                    shipmentModel.ItemModelList.Add(newItem);\n                    results.Add(newItem);\n                }\n            }\n\n            return Json(results.ToDataSourceResult(request, ModelState));\n        }\n\n        [AcceptVerbs(HttpVerbs.Post)]\n        public ActionResult UpdateProducts([DataSourceRequest]DataSourceRequest request, [Bind(Prefix = \"models\")]IEnumerable&lt;Models.ItemModel&gt; itemsToUpdate)\n        {\n            Project.MVC.Models.ShipmentModel shipmentModel = (Project.MVC.Models.ShipmentModel)ControllerBase.State.Object;\n            var results = new List&lt;Models.ItemModel&gt;();\n\n            foreach (var item in itemsToUpdate)\n            {\n                Models.ItemModel target = shipmentModel.ItemModelList.Find(i =&gt; i.rowNumber == item.rowNumber);\n                if (target != null)\n                {\n                    target = item;\n                }\n            }\n\n            return Json(ModelState.ToDataSourceResult());\n        }\n\n        [AcceptVerbs(HttpVerbs.Post)]\n        public ActionResult DeleteProducts([DataSourceRequest]DataSourceRequest request, [Bind(Prefix = \"models\")]IEnumerable&lt;Models.ItemModel&gt; itemsToDelete)\n        {\n            Project.MVC.Models.ShipmentModel shipmentModel = (Project.MVC.Models.ShipmentModel)ControllerBase.State.Object;\n\n            foreach (var item in itemsToDelete)\n            {\n                shipmentModel.ItemModelList.Remove(item);\n            }\n\n            return Json(ModelState.ToDataSourceResult());\n        }\n    }\n}\n</code></pre>\n\n<p><strong>View:</strong></p>\n\n<pre><code>@model Project.MVC.Models.ShipmentModel\n@using Kendo.Mvc.UI\n\n@(Html.Kendo().Grid&lt;Project.MVC.Models.ItemModel&gt;()\n    .Name(\"QuoteItemGrid\")\n    .Columns(columns =&gt;\n    {\n        columns.Bound(i =&gt; i.FreightClass)\n            .EditorTemplateName(\"ItemGrid_RefFreightClassListing\")\n            .Width(50);\n        columns.Bound(i =&gt; i.Length).Width(30);\n        columns.Bound(i =&gt; i.Width).Width(30);\n        columns.Bound(i =&gt; i.Height).Width(30);\n        columns.Bound(i =&gt; i.DimensionUnitOfMeasure)\n            .EditorTemplateName(\"ItemGrid_RefUnitOfMeasurementListingDimension\")\n            .Width(50);\n        columns.Bound(i =&gt; i.QuantityValue).Width(30);\n        columns.Bound(i =&gt; i.QuantityUnitOfMeasure)\n            .EditorTemplateName(\"ItemGrid_RefUnitTypeListing\")\n            .Width(50);\n        columns.Bound(i =&gt; i.WeightValue).Width(30);\n        columns.Bound(i =&gt; i.WeightUnitOfMeasure)\n            .EditorTemplateName(\"ItemGrid_RefUnitOfMeasurementListingWeight\")\n            .Width(50);\n        columns.Bound(i =&gt; i.NmfcCode).Width(50);\n        columns.Bound(i =&gt; i.ItemDescription).Width(100);\n        columns.Command(command =&gt;\n        {\n            command.Destroy();\n        }).Width(60);\n    })\n    .ToolBar(toolbar =&gt;\n    {\n        toolbar.Create();\n        toolbar.Save();\n    })\n    .Editable(editable =&gt; editable.Mode(GridEditMode.InCell).CreateAt(GridInsertRowPosition.Bottom))\n    .Pageable()\n    .Sortable()\n    .Scrollable()\n    .Resizable(resize =&gt; resize.Columns(true))\n    .DataSource(dataSource =&gt; dataSource\n        .Ajax()\n        .Batch(true)\n        .ServerOperation(false)\n        .Events(events =&gt; events.Error(\"QuoteItemGrid_ErrorHandler\"))\n        .Model(model =&gt;\n        {\n            model.Id(i =&gt; i.rowNumber);\n            model.Field(i =&gt; i.DimensionUnitOfMeasure).DefaultValue(\"in\");\n            model.Field(i =&gt; i.WeightUnitOfMeasure).DefaultValue(\"lbs\");\n        })\n        .Create(create =&gt; create.Action(\"CreateProducts\", \"ItemGrid\"))\n        .Read(read =&gt; read.Action(\"GetProducts\", \"ItemGrid\"))\n        .Update(update =&gt; update.Action(\"UpdateProducts\", \"ItemGrid\"))\n        .Destroy(destroy =&gt; destroy.Action(\"DeleteProducts\", \"ItemGrid\"))\n    )\n)\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12733168,"title":"MVC3 Wrong form submits","body":"<p>From every page of a website I'm making, you're able to sign in. On pages with other forms, I get the following error after submitting: \"Child actions are not allowed to perform redirect actions.\" All forms worked fine until I added the Sign In. In addition, the Sign In works correctly when you use it. The error only appears if I submit a different form. I've set a breakpoint and I've watched what happens when I hit the other submit. For some reason, the SignIn Post ActionResult is trying to run.\nAny help would be appreciated.</p>\n\n<h3>Error:</h3>\n\n<blockquote>\n  <p>Child actions are not allowed to perform redirect actions. Line 67: @{Html.RenderAction(\"SignIn\", \"Account\");}</p>\n</blockquote>\n\n<h3>Sign In View</h3>\n\n<pre><code>@using (Html.BeginForm(\"SignIn\", \"Account\", FormMethod.Post))\n{\n    &lt;input class=\"signInSubmit\" type=\"submit\" name=\"submitButton\" value=\"\" /&gt;\n}\n</code></pre>\n\n<h3>Another Form in View</h3>\n\n<pre><code>@using (Html.BeginForm(\"Confirm\", \"Cart\", null, FormMethod.Post, new { @id = \"productDetailsForm\" }))\n{\n    &lt;input class=\"addToCart\" type=\"submit\" name=\"submit\" value=\"\" /&gt;\n}\n</code></pre>\n\n<h3>Sign In Controller</h3>\n\n<pre><code>// GET: /Account/SignIn\npublic ActionResult SignIn()\n{\n    return PartialView();\n}\n\n// POST: /Account/SignIn\n[HttpPost]\npublic ActionResult SignIn(Customer customer)\n{\n    try\n    {\n        //Stuff is here\n        return RedirectToAction(\"Index\", \"Home\");\n    }\n    catch\n    {\n        return RedirectToAction(\"Registration\");\n    }\n}\n</code></pre>\n\n<h3>Other form Controller</h3>\n\n<pre><code>// GET: /Cart/\npublic ActionResult Index()\n{\n  CartViewModel cart = getCart();\n  return View(cart);\n}\n\n//POST: Cart/Confirm\n[HttpPost]\npublic ActionResult Confirm(int productID, bool certs, int quantity)\n{\n  CartItemViewModel viewModel = new CartItemViewModel\n  {\n    Item = productRep.GetProductByID(productID),\n    Certs = certs,\n    Quantity = quantity\n  };\n  return View(viewModel);\n}\n</code></pre>\n\n<h3>HTML Source Code</h3>\n\n<pre><code>&lt;form action=\"/Account/SignIn\" method=\"post\"&gt;\n    &lt;input class=\"signInSubmit\" type=\"submit\" value=\"\" /&gt;\n&lt;/form&gt;\n&lt;form action=\"/Cart/Confirm\" id=\"productDetailsForm\" method=\"post\"&gt;\n    &lt;input class=\"addToCart\" type=\"submit\" value=\"\" /&gt;\n&lt;/form&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","razor","mef"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":11208532,"title":"Razor View must derive WebPageView but I have a reference to it","body":"<p>This is my razor view:</p>\n\n<pre><code>@inherits System.Web.Mvc.WebViewPage\n\n&lt;h2&gt;Index&lt;/h2&gt;\n</code></pre>\n\n<p>It recognizes <code>@inherits System.Web.Mvc.WebViewPage</code> but when I try to run it from my main app, it says the view must derive from WebViewPage.</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":12747856,"title":"How to create a button that will call a page as HttpGet","body":"<p>I'm learning MVC and ASP.NET. I have a table in which the last column contains an Edit button for each row. This works fine and I like the look and feel of the button vs a link, but when it opens the page, the HttpPost action is called in the controller.  I understand why this is happening, its a submit button, and its acting like that page is being submitted.  How do I modify this so that I have a button that redirects to a HttpGet for that page?  (In Razor ...)</p>\n\n<pre><code>@using (Html.BeginForm(\"Update\", \"Purchase\"))\n{\n    @Html.HiddenFor(x =&gt; x.Id)\n    &lt;input type=\"submit\" value=\"Update\" /&gt;\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12747797,"title":"how to add a static element to @Html.DropDownListFor","body":"<p>I use this code to display a drop down menu list in my View, I would like to add a STATIC value at the beginning of the List with text like None and value as \"\". How to do it in Razor?</p>\n\n<pre><code>  @Html.DropDownListFor(modal =&gt; modal.Candidates, new SelectList(Model.Candidates, \"Value\", \"Key\"))\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":110,"score":1,"question_id":12745541,"title":"Upload file in asp.net mvc3","body":"<p>I need to upload a file and I have found several ways to do so. The best way I thought to do it was according to this blog:\n<a href=\"http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx\" rel=\"nofollow\">Blog</a></p>\n\n<p>I also found a usefull post here:\n<a href=\"http://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc3-0\">stackoverflow topic</a></p>\n\n<p>But when I try it, it fails. I get the following error in visual studio:</p>\n\n<p>Sequence contains more than one element, with not much more to go further on.</p>\n\n<p>My code looks like this:</p>\n\n<p>Controller:</p>\n\n<pre><code>public PartialViewResult Index(parameterlist)\n    {\n        var model = new Model();\n\n\n        return PartialView(model);\n    }\n\n[HttpPost]\n    public ActionResult Index(HttpPostedFileBase file)\n    {\n        // Verify that the user selected a file\n        if (file != null &amp;&amp; file.ContentLength &gt; 0) \n        {\n            // extract only the filename\n            var fileName = Path.GetFileName(file.FileName);\n\n            var path =         Path.Combine(Server.MapPath(@\"Path\"), fileName);\n            file.SaveAs(path);\n        }\n        // redirect back to the index action to show the form once again\n        return RedirectToAction(\"Index\");            \n    }\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>            &lt;div class=\"span6\"&gt;                                \n            @using (Html.BeginForm(\"null\", \"null\", FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n            {\n                &lt;input type=\"file\" name=\"file\" /&gt;\n                &lt;input type=\"submit\" value=\"OK\" /&gt;\n            }\n        &lt;/div&gt;\n</code></pre>\n\n<p>So the moment this partialview gets called it goes to the actionResult method, ofcourse there is no file selected because the view hasn't been opened yet. There are some other textboxes and dropdowns in the view. But nothing special, anyone has an idea on what it is that I'm doing wrong? I've got the feeling I'm missing something crucial ...</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12745333,"title":"MVC 3 - checkbox send value","body":"<p>I would like to prepare two checkbox. First checkbox will always have value true and always be checked, but I do not know how to do it.</p>\n\n<p><img src=\"http://i.stack.imgur.com/2xVVg.png\" alt=\"enter image description here\"></p>\n\n<p>In second checkbox, if customer will agree this checkbox will send me some values. This is my example, but doesn't work correct.</p>\n\n<pre><code>@Html.CheckBoxFor(m =&gt; m.SaleAgree)\n@{\n    ViewData[\"SaleAgree\"] = true;  \n}\n</code></pre>\n"},{"tags":["javascript","asp.net-mvc-3","gridview","devexpress"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12727763,"title":"Javascript table on the fly","body":"<p>I've got some issues with javascript. Which causes some problems.\nI'm using DevExpress MVC GridView, ASP.Net MVC 3 and javascript.</p>\n\n<p>This my problem:</p>\n\n<p>I've got a gridview, with for example customers.\nI want them to select the customers, and show them in a table generated by javascript so we dont get all those refreshes. And they can then add other information so that they can be saved again to another table, but thats not really important.</p>\n\n<p>I perform some calculations before generating the table row from the selected customer. Another problem is, the devexpress gridview has an event that calls on each selection change instead of a nice ~100 ms wait so that the user can multiselect quick without triggering method 3/4 times.</p>\n\n<p>Im keeping track of my own table through an array. And the GridView from DevExpress got his own events that can give me the right information, so no need to worry about that.\nSo I got a method receiveSelectionFields(Values){ //do something } where I receive that information from the gridview on every selection.\nThen I check my array to see if they added or removed a selection, and which.\nThen I call addtablerow(customer)  or removetablerow(customer). Which removes the customer from my table and then from my array.</p>\n\n<p>Because I make some heavy calculations in between, there is a ~60ms delay before the calculation is done (on mine computer). So if the users makes 2 selections in 60 ms. My array will have the wrong value (not being modified by the first call that adds/removes a customer) and my javascript will cause an error e.g. the table row is not deleted. I check on length of my own array and on the length of the received array to see if something has been added or removed.</p>\n\n<p>So what did I try?\nMaking my method a recursive method, that when the problem occurs it waites 60 ms and then redo the method. But this isn't working properly.</p>\n\n<p>I tried adding a global variable busy, which is true when the method is still busy. And false when it ends. But my browser just quits when doing that. This was the code:</p>\n\n<pre><code>    while (true) {\n\n        setTimeout(function () {\n            if (busy === false) {\n                break;\n            }\n        }, 50);\n    }\n</code></pre>\n\n<p>But I got the feeling it just endlessly loops.</p>\n\n<p>And these are all workarounds, there must be a nice way to solve this. Any thoughts?</p>\n\n<p>In short:\nI want a way to let the functions go off in synch. even if their being called asynch. by the user so that my array doesn't mess up.</p>\n\n<p>Found the answer why my problem exists:\nSince javascript is a synch. language (1 thread). the functions should've triggered at the right time. The problem is the callback from DevExpress Gridview for MVC Extensions. It makes a callback to the server, which responds in for example ~150ms with the selected field values. This will give an error if you quickly trigger the devexpress function twice. The second trigger has a window to return FASTER then the first trigger. Which would mean my coding of the table get ruined since I check if something has been added or removed. So when the first trigger (which returns after the second trigger) and my table gets updated. It shows the table prior to my last selection. Thus missing 1 row or has 1 more row then it should've.</p>\n\n<p>So I got to make a function that retrieves all the events, and then place them in an order ~200 ms after each order. To make sure there is enough time for the callback to retrieve. Though this is ofcourse still not reliable, I think I will just change the requirements on this. </p>\n"},{"tags":["c#","asp.net-mvc-3","caching","data-caching"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12746626,"title":"System.Web.Caching.Cache throws null exception in a model","body":"<p>Maybe the questio should be easy but it is not. I read <a href=\"http://stackoverflow.com/questions/531014/problem-using-the-system-web-caching-cache-class-in-asp-net\">Problem Using the System.Web.Caching.Cache Class in ASP.NET</a>.</p>\n\n<p>I have the singleton class:</p>\n\n<pre><code>private System.Web.Caching.Cache _cache;\nprivate static CacheModel _instance = null;\n\nprivate CacheModel() {\n   _cache = new Cache();\n}\n\npublic static CacheModel Instance {\n         get {\n            return _instance ?? new CacheModel();\n         }\n      }\n\npublic void SetCache(string key, object value){\n   _cache.Insert(key, value);\n}\n</code></pre>\n\n<p>If I call in anywhere else the following code:</p>\n\n<pre><code>CacheModel aCache = CacheModel.Instance;\naCache.SetCache(\"mykey\", new string[2]{\"Val1\", \"Val2\"});  //this line throws null exception\n</code></pre>\n\n<p>Why does second line throw null exception ?</p>\n\n<p>Maybe I made some mistake anywhere in the code?</p>\n\n<p>Thank you.</p>\n"},{"tags":["c#","asp.net-mvc-3","http-post","visual-studio-2012","iis-express"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":169,"score":0,"question_id":12735652,"title":"Fresh Windows + VS2012 = MVC3 Problems","body":"<p>I just recently got a fresh install of Windows 7 on a my PC running VS2012/VS2010.  I have an MVC3 project that ran just fine before I pulled it onto this PC to run.  The project still compiles on this PC and I can navigate through my site while running the app in studio (2010 or 2012), but when I tried to POST from ANY form in ANY view and pass an ID by means of the URL like this:</p>\n\n<pre><code>    &lt;form id=\"ScriptForm\" action=\"/MyApp/ControllerName/ActionName/@ViewBag.IDNumber\" method=\"post\"&gt;\n    ...\n    &lt;/form&gt;\n</code></pre>\n\n<p>...I got <a href=\"http://stackoverflow.com/q/4610433/590783\">this error</a>.  I did some digging and playing around to try to fix this, ultimately taking these steps to try to resolve:</p>\n\n<ol>\n<li>Actually installed ASP.NET via the Windows Components form in Control Panel</li>\n<li>Changed the application to use IIS Express</li>\n</ol>\n\n<p>Well, when I changed it to run under IIS Express, I started getting a different error.</p>\n\n<pre><code>HTTP Error 404.0 - Not Found\nThe resource you are looking for has been removed, had its name changed, or is \ntemporarily unavailable.\n\nMost likely causes:\nThe directory or file specified does not exist on the Web server.\nThe URL contains a typographical error.\nA custom filter or module, such as URLScan, restricts access to the file.\n\nThings you can try:\nCreate the content on the Web server.\nReview the browser URL.\nCheck the failed request tracing log and see which module is calling SetStatus. For more information, click here.\n\nDetailed Error Information:\nModule     IIS Web Core\nNotification       MapRequestHandler\nHandler    StaticFile\nError Code     0x80070002\nRequested URL      http://localhost:51596/MyApp/ControllerName/ActionName/1\nPhysical Path      C:\\CODE\\MyApp\\ControllerName\\ActionName\\1\nLogon Method       Anonymous\nLogon User     Anonymous\nRequest Tracing Directory      C:\\Users\\cbarlow\\Documents\\IISExpress\\TraceLogFiles\\MYAPP\n\nMore Information:\nThis error means that the file or directory does not exist on the server. Create the file or directory and try the request again.\nView more information »\n</code></pre>\n\n<p>It's almost as if it is not recognizing that this is a route and is trying to resolve the URL to a physical file (like 1.html) which obviously does not exist.  But why isn't it \"doing the MVC thing\" and using the route?  I have this in my global.asax:</p>\n\n<pre><code>  public static void RegisterRoutes(RouteCollection routes)\n  {\n     routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n     routes.MapRoute(\n         \"Default\", // Route name\n         \"{controller}/{action}/{id}\", // URL with parameters\n         new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n     );\n\n  }\n</code></pre>\n\n<p>And I know this is running because I can breakpoint it.\n<hr>\nSpecs:\nWindows 7 | Visual Studio 2010/2012 | Microsoft MVC3 | IIS Express</p>\n\n<hr>\n\n<p>I've read all these SO posts, none seem to apply in this situation or do not help (mostly, because they apply to actual aspx pages, where I am trying to load pages via controllers):</p>\n\n<p><a href=\"http://stackoverflow.com/q/1851155/590783\">The HTTP verb POST used to access path &#39;/&#39; is not allowed</a></p>\n\n<p><a href=\"http://stackoverflow.com/q/5238080/590783\">The HTTP verb POST used to access path is not allowed</a></p>\n\n<p><a href=\"http://stackoverflow.com/q/758780/590783\">The HTTP verb POST used to access path &#39;/Membership/user/&#39; is not allowed</a></p>\n\n<p><a href=\"http://stackoverflow.com/q/8350398/590783\">The HTTP verb POST used to access path &#39;/Main/[object Object]&#39; is not allowed</a></p>\n\n<p><a href=\"http://stackoverflow.com/q/4610433/590783\">The HTTP verb POST used to access path &#39;[my path]&#39; is not allowed</a></p>\n\n<p><a href=\"http://stackoverflow.com/q/4699375/590783\">HTTP verb POST used to access path &#39;/&#39; is not allowed in Facebook app</a></p>\n\n<hr>\n\n<p>Any ideas?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12745627,"title":"How can add null to ActionLink as string linkText in MVC3?","body":"<p>Hello everyone how can I write  string linkText as null </p>\n\n<pre><code> &lt;i class=\"icon-pencil\" &gt;@Html.ActionLink( null,\"edit\", new { id = item.content_id }) &lt;/i&gt;\n</code></pre>\n"},{"tags":["c#","jquery","asp.net","asp.net-mvc-3","jquery-ajax"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12744445,"title":"jquery dialog not closing after ajax login","body":"<p>I'm using JQuery UI Dialog for a popup login box on my MVC3 application. Currently I've got it working to log the user in and refresh the \"login-status\" div on the parent page, show the validation errors in the popup if unsuccessful.  However, if I press the cancel button in the login form, the popup doesn't close, and it also doesn't close on a successful login.  Can anyone see something obviously wrong with my code?  Thanks very much.</p>\n\n<p>Log in button click event: </p>\n\n<pre><code>$('a#login').click(function (e) {                    \nvar url = '@Url.Action(\"LogOnPartial\", \"Account\")';\nvar dialog = $('&lt;div id=\"ModalDialog\" style=\"display:none\"&gt;&lt;/div&gt;').appendTo('body');\n$.get('@Url.Action(\"LogOnPartial\", \"Account\", null)', function (response) {\n    dialog.html(response)\n    dialog.dialog({\n        bgiframe: true,\n        modal: true,           \n        width: 500,                       \n        closeOnEscape: false,\n        buttons: {\n            \"Submit\": function () {\n                $(\"#refresh\").submit();\n            },\n            \"Cancel\": function () {\n                $(\"#ModalDialog\").dialog(\"close\");\n                // EDIT - This part now working - solution below:\n                //dialog.dialog(\"close\");\n            }\n        }\n    });\n});\n});\n</code></pre>\n\n<p>Login form partial view</p>\n\n<pre><code>    @using (Ajax.BeginForm(\"LogOn\", \"Account\", new AjaxOptions { OnSuccess = \"success\",  UpdateTargetId = \"loginDialog\" }, new { @id = \"refresh\"}))\n    {\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.UserName)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.TextBoxFor(m =&gt; m.UserName)\n                @Html.ValidationMessageFor(m =&gt; m.UserName)\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.Password)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.PasswordFor(m =&gt; m.Password)\n                @Html.ValidationMessageFor(m =&gt; m.Password)\n            &lt;/div&gt;\n            &lt;a href=\"@Url.Content(\"~/Account/ForgotPassword\")\"&gt;Forgot Password?&lt;/a&gt;\n            &lt;div class=\"editor-label\"&gt;\n                @Html.CheckBoxFor(m =&gt; m.RememberMe)\n                @Html.LabelFor(m =&gt; m.RememberMe)\n            &lt;/div&gt;\n            &lt;input type=\"submit\" value=\"Log On\" style=\"display:none\" /&gt;\n    }\n\n&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    function success(result) {\n        if (result.success) {\n            $('#loginStatus').load(\"@Url.Content(\"~/Account/LogOnStatus\")\");\n            $(this).dialog('destroy').remove();\n        } \n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>I can post up controller code too if that is necessary.  Basically if successful it returns <code>json success = true</code>, and if not returns the partial view with validation errors.</p>\n"},{"tags":["asp.net-mvc-3","razor","routevalues"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12745867,"title":"Pass dictionary from view to controller after form submit","body":"<p>Razor view: </p>\n\n<pre><code>@using (Html.BeginForm(\"Move\", \"Details\", new { dict= dictionary}, FormMethod.Post)) {\n    //table with info and submit button\n    //dictionary =&gt; is a dictionary of type &lt;Sales_Order_Collected, string&gt;\n}\n</code></pre>\n\n<p>Controller action:</p>\n\n<pre><code>[HttpPost]\npublic string Move(Dictionary&lt;Sales_Order_Collected, string&gt; dict) {\n    return \"\";\n}\n</code></pre>\n\n<p>Is there a way to pass the model dictionary to the controller? Because my parameter is always null. </p>\n"},{"tags":["css","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12739838,"title":"change the color of textbox on pageload","body":"<p>Is there any way to change the color of the textbox which is defined as required in model. The color should appear when the page load not when the submit button is hit and anything fails. </p>\n\n<p>I need this without assigning any extra class or id in the view. Is there any such property?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc-3","asp.net-membership","roles"],"answer_count":2,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":203,"score":4,"question_id":6519494,"title":"How far to 'drill down' roles in a .NET MVC application?","body":"<p>Bare with me on this one,</p>\n\n<p>I've written a few complex MVC applications which are all role based and use .NET Membership. On my first project I used roles with structure similar to this:</p>\n\n<ul>\n<li>Admin</li>\n<li>Manager</li>\n<li>Approver</li>\n</ul>\n\n<p>I quickly discovered that wasn't very scalable, for example a customer would say \"I want specific user x to have all manager privileges but <strong>not</strong> delete\". I would then have to put a hack in the controller for that user.</p>\n\n<p>Therefore, my second implementation led to this role structure:</p>\n\n<ul>\n<li>CanCreate</li>\n<li>CanDelete</li>\n<li>CanEditAll</li>\n<li>CanEditOwn</li>\n</ul>\n\n<p>This approach then led to literally <strong>dozens</strong> of roles based on whether they could edit particular items globally or just their own etc. It also leads to a lot more controller actions and considerably more code - though maybe thats just the case in a complex application!</p>\n\n<p>My question is, am I approaching this in the correct way, and are there any good online resources on the \"correct\" way to approach <strong>complex</strong> applications with loads of roles. Am I doing this correctly?</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1039,"score":2,"question_id":5407652,"title":"ASP.NET Remote Validation only on blur?","body":"<p>I'm using the remote validation in MVC 3, but it seems to fire any time that I type something, if it's the second time that field's been active. The problem is that I have an autocomplete box, so they might click on a result to populate the field, which MVC views as \"leaving\" it.</p>\n\n<p>Even apart from the autcomplete thing, I don't want it to attempt to validate when they're halfway through writing. Is there a way that I can say \"only run validation n milliseconds after they are finished typing\" or \"only run validation on blur?\"</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":161,"score":0,"question_id":8459175,"title":"MVC - Use remote SQL database","body":"<p>How do you change an MVC3 web app to use a remote server for the data context? I tried changing the connection string the in web config (and restarted everything) but it still uses the local SQL database. </p>\n\n<p><strong>Edit:</strong> my connection string is below</p>\n\n<pre><code>&lt;add name=\"ApplicationServices\" connectionString=\"Data Source=zzz.database.windows.net;Initial Catalog=SMS;Persist Security Info=True;User ID=xyz;Password=abc\" providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n\n<p>Edit 2: I tried commenting out everything inside the <code>&lt;connectionStrings&gt;</code> tag. The site still works. I'm a bit confused, is the connection set somewhere else?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12422524,"title":"Can i programmatically get a list of the helpers within an MVC 3 Razor view?","body":"<p>As the title states. I have an MVC 3 Razor view which i would like to programmatically instantiate and obtain a list of it's Html helpers. </p>\n\n<p>anyone have any good suggestions on how to approach this?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":12712601,"title":"MVC how to ignore validation of nested view model","body":"<p>I have a page with which i post two view models to the controller, Enquiry and Appointment. Appointment is nested within enquiry. A user can choose to submit an enquiry with our without creating an appointment . </p>\n\n<p>I use the built in MVC required attributes on the view model properties.</p>\n\n<p>My question is, when the user chooses to create an enquiry without an appointment, how can I elegantly ignore the validators on the nested Appointment view model and have ModelState.IsValid return true?</p>\n\n<pre><code>if(!viewModel.CreateAppointment)\n            {\n                //ignore the nested view models validation                            \n            }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","iis7","global-asax"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":245,"score":1,"question_id":12591930,"title":"Global.asax.cs is not visible at the server","body":"<p>Running under Server08 | IIS7. I have a website project and am in the habit of hand editing the Global.asax.cs at the deployed site many times in the past. Recently I've found that only the Global.asax is present and has only:</p>\n\n<pre><code>&lt;%@ Application Codebehind=\"Global.asax.cs\" Inherits=\"myDomain.MvcApplication\" Language=\"C#\" %&gt;\n</code></pre>\n\n<p>There are simply no Global.asax.cs files present/visible for any of my active, functioning websites anymore. </p>\n\n<p>I've checked here <a href=\"http://stackoverflow.com/questions/9535244/global-asax-cant-find-code-behind-class\">Global.asax can&#39;t find code-behind class</a> and here <a href=\"http://stackoverflow.com/questions/8189215/where-is-the-codes-in-global-asax-in-mvc3\">where is the codes in Global.asax in mvc3?</a> without getting anywhere. The second link contains the comment: <em>'That's because it's a compiled web application. You'll have to view it in Visual Studio as a project.'</em></p>\n\n<p>But since my project has always been a website - and I've not converted it (intentionally) I'm puzzled by the changed behavior.</p>\n\n<p>But when i step into VS12 and look at the context menu for the solution's WebProject it presents 'Convert to Web Application'. The sites' folder structures do <strong>not</strong> contain App_Data or App_Start. To my mind, these 2 fact establish at VS is treating the project as a website, why then, is the Global.cs compiled down to the /bin?</p>\n\n<p>I'll close by repeating - I've hand edited these things in the past - I'm not positive but it's probably accurate to say that this is the first time I've tried to do so after installing VS12. And, coming to think on it harder - it's only recently that I've implemented the 'One Click Publishing' service so that could be coming into play. </p>\n\n<p>verify? <del>I'd like</del> I need to edit a simple update without full re-deployment.</p>\n\n<p>thx</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","c#-4.0","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":52,"score":3,"question_id":12740960,"title":"How to display encoded HTML as decoded in MVC 3 Razor","body":"<p>I'm using Razor in MVC 3 and Asp.net C#.</p>\n\n<p>I have a View with the following code. model.ContentBody has some HTML tags.</p>\n\n<p>I would need display this HTML content as DECODED.</p>\n\n<p>How shall I change my code in the View?</p>\n\n<pre><code> &lt;div class=\"display-field\"&gt;\n        @Html.DisplayFor(model =&gt; model.ContentBody)\n &lt;/div&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","knockout.js"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1150,"score":1,"question_id":10744239,"title":"Binding Model data to Knockout ViewModel?","body":"<p>Is it possible to bind data from your model to a knockout viewmodel. Heres an example:</p>\n\n<pre><code>public ActionResult Edit(int id)\n{\n    Product product = _db.Products.FirstOrDefault(x=&gt;x.ItemId == id);\n    return View(product);\n}\n</code></pre>\n\n<p>Then in the View I would traditionally do something like so:</p>\n\n<pre><code>@model myApp.Models.Product\n\n@using(Html.BeginForm())\n{\n    @Html.EditorFor(x=&gt;x.ItemName)\n    @Html.ValidationMessageFor(x=&gt;x.ItemName)\n\n    &lt;input type=\"submit\" value=\"Update\" /&gt;\n}\n</code></pre>\n\n<p>But with Knockout I would create a <code>EditProductViewModel</code> from where I would do something like:</p>\n\n<pre><code>var EditProductViewModel = {\n    ItemName = ko.observable('')\n};\n\nEditProductViewModel.Edit = function() {\n    $.ajax({\n        url: \"Home/Edit\",\n        data: ko.ToJson(this),\n        success: function() {\n            // do something\n        }\n    });  \n};\n\n$(function() {\n    ko.applyBindings(EditProductViewModel);\n});\n</code></pre>\n\n<p>And instead of using the Html Helpers I would do something like so in my view:</p>\n\n<pre><code>&lt;form data-bind=\"submit: Edit\"&gt;\n    &lt;input type=\"text\" data-bind=\"value: ItemName\" /&gt;\n    &lt;input type=\"submit\" value=\"Update\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>So how can I populate this with the data returned from my controller?</p>\n"},{"tags":["asp.net-mvc-3","internet-explorer","firefox","google-chrome","css3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":12740951,"title":"Chrome and Firefox doesnot show anchor tag","body":"<p><a href=\"http://stackoverflow.com/questions/4884498/anchor-tag-not-working-in-firefox-and-chrome\">possible duplicate</a></p>\n\n<p>I also had the same case. </p>\n\n<p>when an image and anchor tags are nested within div tag, the anchor tag doesnot show up when mouse is hoverd on it in firefox and chrome, but works in IE.</p>\n\n<p>I have many div tags in my .cshtml page. Some of the anchor tags in div worked in FF and Chrome</p>\n\n<p>My Application is an MVC3 Application.</p>\n\n<p>here is my code:</p>\n\n<pre><code>&lt;div class=\"mainDiv\"&gt;\n    &lt;div class=\"CssDivs\"&gt;\n    &lt;a href=\"#\"&gt;\n    &lt;img  src=\"@Url.Content(\"~/Content/images/home.gif\")\" alt=\"home\" border=\"0\" /&gt;&lt;/a&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<hr>\n\n<p>The css is :</p>\n\n<pre><code>.CssDivs\n{\nfloat: left;\npadding: 5px;\n}\n.mainDiv\n{\n    text-align: center;\n    font-size: 28px;\n    color: #FFFFFF;\n    font-family: Verdana, Geneva, sans-serif;\n    font-weight: normal;\n    float: left;\n    padding: 200px 13px 7px 13px;\n    position: absolute;\n}\n</code></pre>\n\n<p>If any one has solution, please post it.</p>\n\n<p>Here is my jsfiddle: <a href=\"http://jsfiddle.net/Bzzt6/\" rel=\"nofollow\">http://jsfiddle.net/Bzzt6/</a>\nthis fiddle is working, but it is not working when execute through Visual Studio 2010. what might be the problem?</p>\n\n<p><strong>Edit:</strong> I've tried <code>position: relative;</code> in my css, but it does not make any difference.</p>\n\n<p>Thanks,</p>\n"},{"tags":["asp.net","asp.net-mvc-3","pageload"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12742512,"title":"How can I run a method every page load in MVC3?","body":"<p>With WebForms, if I wanted to run a method on every page load, then I would call this method in the <code>Page_Load()</code> method of the main Master Page.</p>\n\n<p>Is there an alternative, perhaps better solution, when using MVC3?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":12742272,"title":"When rendering a view the model is not updated only the viewbag","body":"<p>So.... I have an action in my controller that basically copies the current model and returns a new view based on that copy. To inform the user that this is a copy I append a message via the viewbag stating that it's a copy. All seemed to be working until I noticed that it's not the copy that is being used when rendering the new view instead it's the original, but the viewbag on the other hand is updated so the message is shown. </p>\n\n<p>Hmm, don't know if that's understandable so I'll try to show what i mean with some pseudo-code as well:</p>\n\n<h2>Model</h2>\n\n<pre><code>public class Model{\n    [ScaffoldColumn(false)]\n    [HiddenInput(DisplayValue = false)]\n    public Guid Id { get; set; }\n\n    public string Name { get; set; }\n}\n</code></pre>\n\n<h2>View</h2>\n\n<pre><code>&lt;input type=\"submit\" name=\"Copy\" value=\"@_(\"Copy\")\"/&gt;\n</code></pre>\n\n<h2>Controller</h2>\n\n<pre><code>public ActionResult Copy(model) {\n    ViewBag.Message = _(\"This is a copy.\");\n    var clone = model.Clone();\n    return View(\"Index\", clone);\n}\n</code></pre>\n\n<p>I'm having a real hard time trying to wrap my head around this so any help/tips/pointers are really appreciated.</p>\n\n<p>Oh, I've stepped through the code several times to ensure that the clone is really a clone. The only thing that differentiates them is the Id property and that is the new one in the controller but when the view renders it's back to the old one.</p>\n"},{"tags":["asp.net-mvc-3","passwords","domain-driven-design","onion-architecture"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":135,"score":0,"question_id":11799412,"title":"Where should I hash my password in a DDD based architecture (Onion Architecture)?","body":"<p>I'm trying to figure out the best place to hash my password for Authentication in my architecture. This is my request flow:</p>\n\n<pre><code>MVC3-&gt;MembershipProvider-&gt;AccountService-&gt;UserRepository-&gt;NHibernate-&gt;Database\n</code></pre>\n\n<p>I'm torn between hashing at the service level vs the repository level. I'm seeing advantages to both, but does anyone know the standard place to take care of this? I'm storing the hash password in the database.</p>\n"},{"tags":["css","asp.net-mvc-3","layout"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12738696,"title":"Highlight menu when submenu was selected","body":"<p>I'm working with .net mvc3 css and layout page and i want to allow a menu to be highlighted as well when it's submenu was selected. I able to make the submenu highlighted but somehow not the menu tab. Anyone can help me on this?</p>\n\n<p>Currently i have my css and layout page like this</p>\n\n<p><strong>Layout</strong></p>\n\n<pre><code>&lt;ul id=\"menu2\"&gt;\n&lt;li&gt;&lt;a href=\"#\"&gt;Home&lt;/a&gt;\n    &lt;ul id = \"submenu\"&gt;\n        &lt;li&gt;@Html.MenuLink(\"Home\", \"Home\", \"General\", null)&lt;/li&gt;\n        &lt;li&gt;@Html.MenuLink(\"About\", \"About\", \"General\", null)&lt;/li&gt;\n        &lt;li&gt;@Html.MenuLink(\"Contact\", \"Contact\", \"General\", null)&lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/li&gt; \n&lt;/ul&gt;\n</code></pre>\n\n<p><strong>CSS</strong></p>\n\n<pre><code>ul#menu2 {\n    border-bottom: 1px #5C87B2 solid;\n    padding: 0 0 2px;\n    position: relative;\n    margin: 0;\n    text-align: right;\n}\n\nul#menu2 li\n{\n    display:inline-block;\n    position: relative;\n    line-height: 0px;   \n}\n\nul#menu2 li a \n{\n    padding: 10px 20px;\n    font-weight: bold;\n    text-decoration: none;\n    line-height: 2.8em;\n    background-color: #e8eef4;\n    color: #034af3;\n    border-radius: 4px 4px 0 0;\n    -webkit-border-radius: 4px 4px 0 0;\n    -moz-border-radius: 4px 4px 0 0;\n} \n\nul#menu2 li ul\n{\n    display: none;\n    text-decoration: none;\n    float:left;\n}\nul#menu2 li:hover ul \n{\n    width: 110px;\n    display:block;\n    position:absolute;\n    right: 5px;\n    top: 29px;\n    text-align: left;\n    float:left;\n    z-index: 9999;\n}\nul#menu2 li:hover ul li\n{\n    margin: 0px;\n    padding: 1px;\n    display: block;\n    text-decoration: none;\n    float: left;\n    background-color: #E4E4E4;\n}   \n\nul#menu2 li:hover ul li a\n{ \n    width: 150px;\n    display: inline-block;\n    padding: 1px 0px 1px 10px;\n    font-size: 12px;\n    line-height: 25px;\n    height: 25px;\n    text-decoration: none; \n}\n\nul#menu2 li a:hover\n{\n    background-color: #FFFFCC;\n    text-decoration: none;\n}\n\n#current-page { background-color: #a6e2a6 !important;}\n</code></pre>\n\n<p><strong>helper extension</strong></p>\n\n<pre><code>public static MvcHtmlString MenuLink(this HtmlHelper htmlHelper, string linkText, \n        string defaultAction, string controller, List&lt;string&gt;actions)\n    {\n        var currentAction = (string)htmlHelper.ViewContext.RouteData.Values[\"action\"];\n        var currentController = (string)htmlHelper.ViewContext.RouteData.Values[\"controller\"];\n\n        if (currentController == controller)\n        {\n            if (actions == null)    // Highlight tab for all action of the controller\n            {\n                return htmlHelper.ActionLink(linkText, defaultAction, controller,\n                    new { id = \"current-page\" });\n            }\n            else   // actions != null\n            {\n                if (actions.Contains(currentAction))    // Highlight tab for defined actions of the controller\n                {                  \n                    return htmlHelper.ActionLink(linkText, defaultAction, controller,\n                        new { id = \"current-page\" });\n                }\n            }\n        }\n\n        return htmlHelper.ActionLink(linkText, defaultAction, controller);\n    }\n</code></pre>\n"},{"tags":[".net","asp.net-mvc-3","validation","dataannotations","model-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":144,"score":0,"question_id":12686655,"title":".Net Data annotation and model hierarchy","body":"<p>everyone! I'm confusing with implementing a piece of code to make work .net data annotation in asp.net mvc 3 with model with different required fields in several cases (6).\nI have a model:</p>\n\n<pre><code>  public class OpportunityModel\n{\n    public Guid OpportunityId { get; set; }\n\n    [Display(Name = \"Value\")]\n    [RegularExpression(@\"^[-+]?\\d{1,10}(\\.\\d{0,4})?$\", ErrorMessage = \"Must be a number\")]\n    public decimal? ActualValue { get; set; }  \n\n    [Display(Name = \"Name\")]\n    [Required(ErrorMessage = \"Name is required\")]\n    public string Name { get; set; } \n    public string Product { get; set; } \n\n    [Display(Name = \"Estimated Date\")]\n    public DateTime? EstimateDate { get; set; }\n\n\n    public bool? Sales6ixFallDown { get; set; }\n\n\n    [Display(Name = \"Stage\")]\n    public Stages Sales6ixStage { get; set; }\n\n    public DateTime? Sales6ixDateInBoard { get; set; }\n\n    public DateTime? Sales6ixDateInCurrentStage { get; set; }\n\n    public DateTime? Sales6ixNextAppointmentDate { get; set; }\n\n    [Display(Name = \"Description\")]\n    public string Description { get; set; }\n\n    public string Sales6ixNextAppointmentDescription { get; set; }\n\n    public int NewColumn { get; set; }\n\n    public Guid? CustomerId { get; set; }\n\n    public string CustomerName { get; set; }\n}\n</code></pre>\n\n<p>What I need is the possibility dynamically change required fiefs in it. After some googling that's impossible and came to idea to use model inheritance. I mean: I have a base model like this:</p>\n\n<pre><code>  public class BaseOpportunityModel\n{\n    public Guid OpportunityId { get; set; }\n\n    public virtual decimal? ActualValue { get; set; }  \n    public virtual string Name { get; set; }  \n\n    public string Product { get; set; } \n\n    public DateTime? EstimateDate { get; set; }\n\n    public bool? Sales6ixFallDown { get; set; }\n\n\n    [Display(Name = \"Stage\")]\n    public Stages Sales6ixStage { get; set; }\n\n    public DateTime? Sales6ixDateInBoard { get; set; }\n\n    public DateTime? Sales6ixDateInCurrentStage { get; set; }\n\n    public DateTime? Sales6ixNextAppointmentDate { get; set; }\n\n    [Display(Name = \"Description\")]\n    public string Description { get; set; }\n\n    public string Sales6ixNextAppointmentDescription { get; set; }\n\n    public int NewColumn { get; set; }\n\n    public Guid? CustomerId { get; set; }\n\n    public string CustomerName { get; set; }\n}\n</code></pre>\n\n<p>where virtual properties are properties that may be or not a required fields. And then I have several derived model from base like this one:</p>\n\n<pre><code>  public class OpportunityModel0: BaseOpportunityModel\n{\n    [Display(Name = \"Value\")]\n    [Required(ErrorMessage = \"Name is required\")]\n    [RegularExpression(@\"^[-+]?\\d{1,10}(\\.\\d{0,4})?$\", ErrorMessage = \"Must be a number\")]\n    public override decimal? ActualValue { get; set; }  \n\n    [Display(Name = \"Name\")]\n    [Required(ErrorMessage = \"Name is required\")]\n public override string Name { get; set; }  \n</code></pre>\n\n<p>}</p>\n\n<p>And then I be able to use in View and Controller base model BaseOpportunityModel. But I encountered follow problem: </p>\n\n<ul>\n<li>Validation use annotation attributes from BaseOpportunityModel and ignore attributes in derived models.</li>\n</ul>\n\n<p>What do I wrong? Can somebody steer me in the right direction or help me with this issue? Thanks in advance.</p>\n"},{"tags":["asp.net-mvc-3","jquery-ui-autocomplete","external-js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12741551,"title":"How to user @Html.Raw is not working in ui jquery autocomplete?","body":"<p>I used ui jquery auto-complete in my MVC3 web project and kept jquery in external js file and included it in the web page but it is not working. </p>\n\n<p>I used following code in js file for ui jquery auto-complete :</p>\n\n<pre><code>$(function () {\n    $(\"#ReportsTo_FullName\").autocomplete({\n        source: function (request, response) {\n            var linkPath = \"@Html.Raw(Url.Action(\"AutocompleteSuggestions\", \"Employee\", new { @term = \"Term\", @moduleName=\"ModuleName\"}))\";\n            linkPath = linkPath.replace(\"Term\", request.term);\n            linkPath = linkPath.replace(\"ModuleName\", \"Employee\");\n\n            $.post(linkPath, function (data) {\n                response($.map(data, function (item) {\n                    return { label: item.FullName, value: item.Id }\n                }\n               ));\n            })\n            $.error(function (xhr, ajaxOptions, thrownError) { alert(thrownError); })\n        },\n        minLength: 1,\n        focus: function (event, ui) {\n            $(\"#ReportsTo_FullName\").val(ui.item.label);\n            return false;\n        },\n        select: function (event, ui) {\n            if (ui.item) {\n                $(\"#ReportsTo_FullName\").css('border', '');\n                $(\"#ReportsTo_FullName\").val(ui.item.label);\n                $(\"#ReportsToId\").val(ui.item.value);\n                return false;\n            }\n        },\n        change: function (event, ui) {\n            if (ui.item == null) {\n                $(\"#ReportsTo_FullName\").css({ 'border': '1px solid #ff0000' });\n                $(\"#ReportsToId\").val(null);\n            }\n        }\n    });\n});\n</code></pre>\n\n<p>But it is failed to execute and its not showing autocomplete.</p>\n\n<p>Whats wrong in above jquery ?</p>\n\n<p>How to resolve this problem ?</p>\n"},{"tags":["c#","sql-server","asp.net-mvc-3","nhibernate"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12738902,"title":"SQL Server or NHibernate truncating text","body":"<p>I have an MVC 3 project. In sql server I have a field called NewsContent which is a text field. </p>\n\n<p>Here is the definition of the property in the Model:</p>\n\n<pre><code>    [Display(Name = \"Content\")]\n    [DataType(DataType.MultilineText)]\n    [AllowHtml]\n    public virtual string NewsContent { set; get; }\n</code></pre>\n\n<p>When i save it to database it truncates. Well it is <code>Text</code> why is it truncating? </p>\n\n<p>How can i fix it?</p>\n\n<p>I can see in debugger that the object has all the text, when I look at database it is truncated.</p>\n"},{"tags":["c#","asp.net-mvc-3","bonjour"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12703234,"title":"Device Discovery using Bonjour in asp.net mvc 3","body":"<p>Everyone</p>\n\n<p>I have developed one demo application to discover network devices using windows application with C# language. It is working fine.</p>\n\n<p>My actual purpose is that I want to discover network devices from web app. I have been trying to discover network devices from web client but It gives me the below error:</p>\n\n<p><em><strong>Attempted to read or write protected memory. This is often an indication that other memory is corrupt.</em></strong></p>\n\n<p>I am using Interop.Bonjour.dll to discover devices.</p>\n\n<p>My code:</p>\n\n<p>Controller code:</p>\n\n<pre><code>public HomeController(ICatalogManager service)\n{\n  this._catalogService = service;\n  this._catalogService.StartDeviceDiscovery();\n}\n</code></pre>\n\n<p>My Manager Code:</p>\n\n<pre><code>public void StartDeviceDiscovery()\n{\n  _deviceDiscoveryManager.Discover(0, \"_http._tcp\", null);\n}\n</code></pre>\n\n<p>My DeviceDiscovery Class that actually perform all Dicovery related tasks:</p>\n\n<pre><code>public DeviceDiscoveryManager()\n{\n  try\n  {\n    service = new DNSSDService();\n  }\n  catch (Exception ex)\n  {\n    throw new Exception(\"Bonjour service is not available\", ex);\n  }\n}\n\n\npublic void Discover(uint interfaceIndex, string regtype, string domain)\n{\n  if (browser != null)\n  {\n    browser.Stop();\n  }\n\n  browser = service.Browse(0, interfaceIndex, regtype, null, eventManager); //throws error\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","csrf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":105,"score":1,"question_id":12706415,"title":"ASP.NET MVC3 - Anti-CSRF and Session timeout","body":"<p>I am implementing Anti-Forgery framework as described here:</p>\n\n<p><a href=\"http://weblogs.asp.net/srkirkland/archive/2010/04/14/guarding-against-csrf-attacks-in-asp-net-mvc2.aspx\" rel=\"nofollow\">http://weblogs.asp.net/srkirkland/archive/2010/04/14/guarding-against-csrf-attacks-in-asp-net-mvc2.aspx</a></p>\n\n<p>Plus, to minimize the coding effort, I did the token insertion part at client side handling <em>form.onsumit</em> and <em>ajaxsend</em> events. Everything works fine – until the session expires.</p>\n\n<p>In my application, I display a popup when the user session gets timed out where the user can re-login and continue without refreshing the current page so that the work-in-progress will be safe. But this doesn't  go well with the Anti-CSRF logic. When the user tries to re-login after a timed-out session, this throws a CSRF exception as the cookie (<code>__RequestVerificationToken_Lw__</code>) is already expired and all the future POSTs will be invalid until next page refresh. </p>\n\n<p>Is there any way to set the cookie end time to a future date rather than 'session'? I tried to edit <em>Response.Cookie</em> but that made the cookie invalid.</p>\n\n<p>Any help would be appreciated. \nThanks</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-routing","url-routing"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":101,"score":3,"question_id":12739653,"title":"ASP.NET MVC routing with one mandatory parameter and one optional parameter?","body":"<p>I've been working on a large MVC application over the past month or so, but this is the first time I've ever needed to define a custom route handler, and I'm running into some problems. Basically I have two parameters to pass. The first one is required and the second one is optional.</p>\n\n<p>I'm following this answer <a href=\"http://stackoverflow.com/a/2246508\">here</a>.</p>\n\n<p>Here is my custom route:</p>\n\n<pre><code>routes.MapRoute(\n    \"MyRoute\",\n    \"{controller}/{action}/{param1}/{param2}\",\n    new { \n        controller = \"MyController\", \n        action = \"MyAction\", \n        param1 = \"\", \n        param2 = \"\" // I have also tried \"UrlParameter.Optional\" here.\n    }\n);\n</code></pre>\n\n<p>And my action method signature:</p>\n\n<pre><code>public ActionResult MyAction(string param1, string param2)\n</code></pre>\n\n<p>If I try the URL <code>http://[myserver]/MyController/MyAction/Test1/Test2</code> then it works like I expect it to, with param1 = \"Test1\" and param2 = \"Test2\"</p>\n\n<p>If I try the URL <code>http://[myserver]/MyController/MyAction/Test1</code> then both parameters are null.</p>\n\n<p>Hopefully somebody can tell me what I'm doing wrong here, because I'm lost.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","jquery-ajax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12740223,"title":"Unable to scroll to the top due to the longer content loading in jquery ajax call","body":"<p>I am working on asp.net mvc. I am trying to load the view asynchronously using jquery ajax calls. my ajax call returns pure html page but it's height is longer than height of the document so it is scroll down to the bottom of the document. so when i am try to see my page starting contents i am unable to see that content due to scrolling is not working. i have tried using <code>$('#content').load('/MyControler/myaction')</code> but it gives the save results.\nI have tried some scripts deal with scroll bars,</p>\n\n<pre><code>$(window).scroll(function(){\n        if  ($(window).scrollTop() == $(document).height() - $(window).height()){\n           myajaxcallfunc();\n        }\n});\n</code></pre>\n\n<p>so please guide me.</p>\n"},{"tags":["c#","jquery","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":103,"score":3,"question_id":12737022,"title":"Proper use of TempData in ASP.NET MVC3?","body":"<p>I have an ASP.NET MVC3 application where my action generates a list of ids that I want to make available to a subsequent AJAX request.  This is so that I can run a long process in the background and poll on it.  The list of ids are the necessary input to this long running process.  I don't want to pass them in the URL as a parameter, because the list could potentially be very long and cause issues in IE.</p>\n\n<p>My Controller</p>\n\n<pre><code>public ActionResult Run()\n{\n    List&lt;MyObjs&gt; objs = _db.MyObjs.ToList&lt;MyObjs&gt;();\n\n    string uniqueId = Guid.NewGuid().ToString();\n    ViewData[\"UniqueID\"] = uniqueId;\n    TempData[\"ObjIdList\" + uniqueId] = String.Join(\",\", objs .Select(o =&gt; o.ObjID).ToArray&lt;int&gt;());\n\n    return View(objs);\n}            \n\npublic void StartProcess(string uid)\n{\n    string ids = TempData[\"ObjIdList\" + id].ToString().Split(',');\n    ...        \n}\n</code></pre>\n\n<p>My View</p>\n\n<pre><code>var uniqueId = '@ViewData[\"UniqueID\"]';\n\n$(document).ready(function (event) {\n    $('#startProcess').click(function () {\n        $.post(\"/Scheduler/StartProcess\", { uid: uniqueId }, function () {\n            getStatus();\n        });\n        event.preventDefault;\n    });\n});\n\nfunction getStatus() {\n    var r = new Date().getTime(); // cache killer for IE\n    var url = '/Scheduler/GetCurrentProgress/' + uniqueId + \"?r=\" + r;\n    $.get(url, function (data) {\n        if (data != \"100\") {\n            $('#status').html(data);\n            setTimeout(function () { getStatus(); }, 100);\n        } else {\n            $('#status').html(\"Done\");\n        };\n    });\n}\n</code></pre>\n\n<p>This is working in my intial test, albeit on my laptop with one concurrent user.  Is this safe, or is there a better way to pass this data?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","attributes","roles"],"answer_count":1,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":1925,"score":6,"question_id":7286299,"title":"How to hide tabs based on roles defined in attributes in MVC3?","body":"<p>In a default install of a MVC3 website tabs are created in the top left. I would like to hide/show these tabs based on whether the current user would have access to the index ViewResult. The allowed roles to the ViewResult are defined by attributes. Is there any way of getting the list of roles for a ViewResult?</p>\n"},{"tags":["asp.net-mvc-3","c#-4.0","mongodb","mongodb-csharp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12720655,"title":"update in a nested array using C# Driver in MongoDB","body":"<p>Here is my exact schema:</p>\n\n<blockquote>\n  <p>{</p>\n  \n  <p>\"_id\" : ObjectId(\"4fb4fd04b748611ca8da0d45\"),</p>\n  \n  <p>\"Name\" : \"Agent name\",</p>\n  \n  <p>\"City\" : \"XXXX\",</p>\n  \n  <p>\"BranchOffice\" : [{</p>\n\n<pre><code>\"_id\" : ObjectId(\"4fb4fd04b748611ca8da0d46\"),\n\n\"Name\" : \"Branch name\",\n\n\"City\" : \"XXXX\",\n\n\"SubBranch\" : [{\n\n    \"_id\" : ObjectId(\"4fb4fd04b748611ca8da0d47\"),\n\n    \"Name\" : \"Sub-Branch Name\",\n\n   \"City\" : \"XXXX\"\n\n    \"Users\" : [{\n\n              \"_id\" : ObjectId(\"4fb4fd04b748611ca8da0d48\"),\n\n            \"Name\" : \"User\",\n\n           \"City\" : \"XXXX\"\n\n           }]\n    }]\n</code></pre>\n  \n  <p>}]\n  }</p>\n</blockquote>\n\n<p>Its Inserted successfully in c#. insert code was below  but update condition is failed .</p>\n\n<p>I want to update field 3 level and 4 level of array using SubBranch and users</p>\n\n<p><em><strong>Insert code</em></strong></p>\n\n<blockquote>\n  <p>IMongoQuery query = Query.And(Query.EQ(\"_id\", new ObjectId(4fb4fd04b748611ca8da0d45)),</p>\n\n<pre><code>       Query.EQ(\"BranchOffice._id\", new ObjectId(4fb4fd04b748611ca8da0d46)));\n</code></pre>\n  \n  <p>Agent agent = dc.Collection.FindOne(query);</p>\n  \n  <p>BsonDocument branchOffice = agent.BranchOffice.Find(objId => objId._id ==    </p>\n\n<pre><code>               new ObjectId(4fb4fd04b748611ca8da0d46)).ToBsonDocument();\n</code></pre>\n</blockquote>\n\n<p>subBranch I had get List object convert to BsonDocument</p>\n\n<p>Files: name,city,_Id, and users for array</p>\n\n<blockquote>\n  <p>BsonDocument subBranchOffice = <strong>subBranch.ToBsonDocument()</strong>;</p>\n  \n  <p>if (branchOffice.Contains(\"SubBranch\"))</p>\n\n<pre><code>       {\n\n   if (branchOffice[\"SubBranch\"].IsBsonNull)\n\n          {\n\n          branchOffice[\"SubBranch\"] = new   \n\n                            BsonArray().Add(BsonValue.Create(subBranchOffice));\n\n           }\n\n  else\n\n     {                                     \n</code></pre>\n  \n  <p>branchOffice[\"SubBranch\"].AsBsonArray.Add(BsonValue.Create(subBranchOffice));</p>\n\n<pre><code>     }\n</code></pre>\n  \n  <p>var update = Update.Set(\"BranchOffice.$.SubBranch\",branchOffice[\"SubBranch\"]); </p>\n  \n  <p>SafeModeResult s = dc.Collection.Update(query, update,                      UpdateFlags.Upsert,SafeMode.True);</p>\n  \n  <p>}</p>\n</blockquote>\n\n<p><strong>Here SafemodeResult is UpdateExisting = true</strong></p>\n\n<p><strong>Here Inserted Option is successfully</strong></p>\n\n<p>next I try to update in else Statement. I am not get it answer </p>\n\n<p><em><strong>Update code</em></strong></p>\n\n<blockquote>\n  <p>else</p>\n  \n  <p>{</p>\n  \n  <p>var queryEdit = Query.And(Query.EQ(\"_id\", new ObjectId(4fb4fd04b748611ca8da0d45)), </p>\n\n<pre><code>Query.EQ(\"BranchOffice._id\", new ObjectId(4fb4fd04b748611ca8da0d46)),\n\nQuery.EQ(\"SubBranchlist._id\", new ObjectId(4fb4fd04b748611ca8da0d47)));\n</code></pre>\n  \n  <p><strong>//Index value 1 or 2 or 3</strong></p>\n  \n  <p>var update = Update.Set(\"BranchOffice.$.SubBranch.\"index value\".Name\", \"sname\").</p>\n  \n  <p>Set(\"BranchOffice.$.SubBranch.\"index value\".city\", \"yyyyy\" ?? string.Empty);</p>\n  \n  <p>SafeModeResult s = dc.Collection.Update(queryEdit, update, UpdateFlags.None,SafeMode.True);</p>\n  \n  <p>}</p>\n</blockquote>\n\n<p><strong>Here SafemodeResult is UpdateExisting = False</strong></p>\n\n<p><strong>Here updated Option is fail</strong></p>\n\n<p>Please explain how to solve this probelm and how to update field 2 and 3 level of array </p>\n\n<p>Please show any Example</p>\n"},{"tags":["asp.net-mvc-3","telerik-grid","telerik-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":6153,"score":2,"question_id":6918402,"title":"Telerik MVC Grid ClientTemplate checkbox not displayed initially","body":"<p>I have a very similar problem to the post located here:\n<a href=\"http://stackoverflow.com/questions/4249736/telerik-grid-with-checkbox-checkbox-not-showing-up-when-the-grid-initially-pain\">Telerik grid with checkbox - Checkbox not showing up when the grid initially paints</a></p>\n\n<p>Basically, I have a telerik MVC3 razor grid with a ClientTemplate column that consists of a checkbox. When the page loads initially, the checkbox is not there - instead it is what I want the value of the checkbox to be. However, when ajax is fired (such as grouping columns together), the checkbox shows with no problem.</p>\n\n<p>I don't really understand the solution to the thread I pasted above....so maybe that is the answer and I just don't know how to call the grid's constructor. Here's the code I have:</p>\n\n<p><strong>research.cshtml</strong></p>\n\n<pre><code>@(Html.Telerik().Grid(Model)\n    .Name(\"Grid\")\n    .DataKeys(keys =&gt; keys.Add(m =&gt; m.MessageInformation.MessageGUID))\n    .DataBinding(databinding =&gt; databinding.Ajax()\n        .Select(\"_ViewMessages\", \"Results\")\n        .Update(\"_UpdateSelectedMessage\", \"Results\"))\n    .Columns(columns =&gt;\n                 {\n                     columns.Bound(o =&gt; o.MessageInformation.MessageGUID)\n                         .ClientTemplate(\"&lt;input type='checkbox' id='chkMessage' name='checkedRecords' value='&lt;#= MessageInformation.MessageGUID #&gt;' /&gt;\")\n                         .Title(\"Check\")\n                         .Width(50)\n                         .HtmlAttributes(new { style = \"text-align:center\" });\n                     columns.Bound(o =&gt; o.MessageInformation.MessageGUID).Title(\"ID\");\n                     columns.Bound(o =&gt; o.MessageInformation.MessageReceivedDateTime).Title(\"Received Date\").Format(\"{0:d}\");\n                     columns.Bound(o =&gt; o.MessageInformation.MessageReceivedDateTime).Title(\"Received Time\").Format(\"{0:t}\");\n                     columns.Bound(o =&gt; o.MessageInformation.MedVAMessageTypeString).Title(\"Message Type\");\n                     columns.Bound(o =&gt; o.MessageStatus).Title(\"Status\");\n                     columns.Command(commands =&gt; commands.Edit().ButtonType(GridButtonType.Text)).Title(\"Edit\");\n                 })\n\n    .Editable(editing =&gt; editing.Mode(GridEditMode.PopUp))\n    .Scrollable(scrolling =&gt; scrolling.Enabled(true))\n    .Sortable(sorting =&gt; sorting.Enabled(true))\n    .Pageable(paging =&gt; paging.Enabled(true))\n    .Filterable(filtering =&gt; filtering.Enabled(true))\n    .Groupable(grouping =&gt; grouping.Enabled(true))\n    .Footer(true)\n    )\n</code></pre>\n\n<p><strong>ResultsController.cs</strong></p>\n\n<pre><code>        [GridAction]\n        public ActionResult Research()\n        {\n            ViewBag.Message = \"Research\";\n\n            return View(DataAccess.Get_Messages());\n        }\n\n        [GridAction]\n        public ActionResult _ViewMessages()\n        {\n            ViewBag.Message = \"Research\";\n\n            return View(new GridModel(DataAccess.Get_Messages()));\n        }\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","linq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12735272,"title":"asp.net mvc Linq exclude values from other table","body":"<p>I have an exhibition scenario.</p>\n\n<p>How do I exclude a list of available Stands below, from the drop down list I would show in the Exhibitor view.</p>\n\n<p>In Sql I would:</p>\n\n<pre><code>Select StandID, Description from Stand \nWhere StandID not in (Select StandID from Exhibitor)\n</code></pre>\n\n<p>Exhibitors register - and select the stand they want from a dropdown list (StandID/Stand) as per the model below:</p>\n\n<pre><code> public class Exhibitor\n{\n    public int ExhibitorID { get; set; }\n    public string CompanyName { get; set; }\n    public string ContactName { get; set; }\n    public int StandID { get; set; }\n    public virtual Stand Stand { get; set; }\n }\n</code></pre>\n\n<p>The Stand Model is as follows:</p>\n\n<pre><code>  public class Stand\n{\n    public int StandID { get; set; }\n    public string Description { get; set; }\n    public bool Booked { get; set; }\n}\n</code></pre>\n\n<p>I can get a list of Stands as follows:</p>\n\n<pre><code>var stands = db.Stands.ToList().Where(s =&gt; s.Booked==false)\n          .Select(s =&gt; new SelectListItem\n          {\n              Value = s.StandID.ToString(),\n              Text = s.StandNumber + \": \" + s.Description + \": \" + s.Size + \": £\" + s.Rate.ToString()\n          });\n</code></pre>\n\n<p>But how do I exclude the (Select StandID from Exhibitor) from the stands list?</p>\n\n<p>I tried:</p>\n\n<pre><code>var booked = db.Exhibitors.Select(s =&gt; new { s.StandID }).ToList();\n</code></pre>\n\n<p>then using:</p>\n\n<pre><code>var stands = db.Stands.ToList().Where(s =&gt; s.Booked==false)\n          .Except(booked)\n          .Select(s =&gt; new SelectListItem\n          {\n              Value = s.StandID.ToString(),\n              Text = s.StandNumber + \": \" + s.Description + \": \" + s.Size + \": £\" + s.Rate.ToString()\n          });\n</code></pre>\n\n<p>But that didn't work.</p>\n\n<blockquote>\n  <p><strong>UPDATE</strong></p>\n</blockquote>\n\n<p>This appears to work - but I'm no expert, so would appreciate any advise on if it;s the best practice way or not?</p>\n\n<pre><code>var stands = db.Stands.ToList().Where(s =&gt; !db.Exhibitors\n.Any(bk =&gt; bk.StandID == s.StandID) &amp;&amp; s.Booked == false)\n          .Select(s =&gt; new SelectListItem\n          {\n              Value = s.StandID.ToString(),\n              Text = s.StandNumber + \": \" + s.Description + \": \" + s.Size + \": £\" + s.Rate.ToString()\n          });\n</code></pre>\n\n<p>Thanks for any help?</p>\n\n<p>Mark</p>\n"},{"tags":["asp.net-mvc-3","web-config"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":167,"score":2,"question_id":12737984,"title":"Web.config transformation: Unrecognized attribute 'xmlns:xdt'. Note that attribute names are case-sensitive","body":"<p>I'm getting this strange intermitent bug in a MVC 3.0 project\nWhen I build the project sometimes I get the following error message:</p>\n\n<blockquote>\n  <p>Unrecognized attribute 'xmlns:xdt'. Note that attribute names are\n  case-sensitive.</p>\n</blockquote>\n\n<p>This is referring to the standard web.config tranformation file (Web.Release.config copied below)\nThere are no other errors or warnings.  This is happening in debug mode and release.\nSometimes it clears if I clean the solution</p>\n\n<p><strong>BEGIN UPDATE</strong></p>\n\n<p>Found the issue.  In the MVC Project file (MyProject.csproj) I had set build views to true</p>\n\n<pre><code>&lt;MvcBuildViews&gt;true&lt;/MvcBuildViews&gt;\n</code></pre>\n\n<p>Once put back to <strong>false</strong> the above error goes away.  I'd like to have the view build as it stops alot of stupid view code errors etc and is a performance enhancement (pages are precompiled instead of jit)</p>\n\n<p>Anyone know what this is causing the error?  is this a bug?</p>\n\n<p><strong>END UPDATE</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n\n&lt;!-- For more information on using Web.config transformation visit http://go.microsoft.com/fwlink/?LinkId=125889 --&gt;\n\n&lt;configuration xmlns:xdt=\"http://schemas.microsoft.com/XML-Document-Transform\"&gt;\n  &lt;!--\n    In the example below, the \"SetAttributes\" transform will change the value of \n    \"connectionString\" to use \"ReleaseSQLServer\" only when the \"Match\" locator \n    finds an atrribute \"name\" that has a value of \"MyDB\".\n\n    &lt;connectionStrings&gt;\n      &lt;add name=\"MyDB\" \n        connectionString=\"Data Source=ReleaseSQLServer;Initial Catalog=MyReleaseDB;Integrated Security=True\" \n        xdt:Transform=\"SetAttributes\" xdt:Locator=\"Match(name)\"/&gt;\n    &lt;/connectionStrings&gt;\n  --&gt;\n  &lt;system.web&gt;\n    &lt;compilation xdt:Transform=\"RemoveAttributes(debug)\" /&gt;\n    &lt;!--\n      In the example below, the \"Replace\" transform will replace the entire \n      &lt;customErrors&gt; section of your Web.config file.\n      Note that because there is only one customErrors section under the \n      &lt;system.web&gt; node, there is no need to use the \"xdt:Locator\" attribute.\n\n      &lt;customErrors defaultRedirect=\"GenericError.htm\"\n        mode=\"RemoteOnly\" xdt:Transform=\"Replace\"&gt;\n        &lt;error statusCode=\"500\" redirect=\"InternalError.htm\"/&gt;\n      &lt;/customErrors&gt;\n    --&gt;\n  &lt;/system.web&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12731953,"title":"How to login with 3 parameters in asp.net mvc","body":"<p>I have an application where one username can belong to many companies. Thus to distinguish them, i need to use the both username and password as unique pair to login.</p>\n\n<p>I'm using ASP.NET MVC and i struggle to understand where the Login occurs.\nActually i can see where it validates the user but i don't find where it retrieves the user.</p>\n\n<p>So where the </p>\n\n<blockquote>\n  <p>Select user where username=xx and password=xx occurs ?</p>\n</blockquote>\n\n<p>Asked differently : i did not find wher User is set ? I see User.Identity.Name it in the code, but i don't see :\nUser=Select....</p>\n\n<p>Thanks\nJohn</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":2446,"score":3,"question_id":5287005,"title":"Disable OutputCaching in MVC3 when running in DEBUG or under Debugger?","body":"<p>I am trying to disable output caching in a MVC3 app when in debug.  I am specifying output caching in the controllers (via the attribute) but don't want to have to #if DEBUG all over my code. I expected this to work:</p>\n\n<pre><code>// In Web.config.debug\n  &lt;system.web&gt;\n    &lt;caching&gt;\n      &lt;outputCache enableOutputCache=\"false\"\n                   xdt:Transform=\"Replace\" /&gt;\n    &lt;/caching&gt;\n</code></pre>\n\n<p>But this seems to be ignored.  Any other ideas how to do it system wide without nasty global.asax code or #if DEBUGs everwhere?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12736524,"title":"asp.net mvc3/4 request.form to return the selected value and the selected text from selectlist","body":"<p>How would I get in my controller, the text part of Request.Form[\"StandID\"]</p>\n\n<pre><code>&lt;div class=\"editor-field\"&gt;\n&lt;select id=\"StandID\" name=\"StandID\"&gt;\n&lt;option value=\"\"/&gt;\n&lt;option value=\"3\"&gt;Mark&lt;/option&gt;\n&lt;option value=\"5\" Selected&gt;Brian&lt;/option&gt;\n&lt;option value=\"6\"&gt;Ian&lt;/option&gt;\n&lt;option value=\"7\"&gt;Vin&lt;/option&gt;\n&lt;/select&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>So in my controller, Request.Form[\"StandID\"] = 5</p>\n\n<p>Is it possible to retrieve the text (I know this isn't posted as part of the form - is there a way to do that)?</p>\n\n<p>So I could like to return \"Brian\" - as well as the ID of 5?</p>\n\n<p>Thank you,</p>\n\n<p>Mark</p>\n"},{"tags":["asp.net-mvc-3","visual-studio-2010","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12712147,"title":"Error with Asp.net MVC3 app after loading into Visual Studio 2012","body":"<p>I opened an existing ASP.NET MVC3 project that formerly worked just fine in a newly built machine with Visual Studio 2012 installed.</p>\n\n<p>I'm now getting null exceptions in the following code.  After a User logs in, the following code is then executed to perform page fragment-level access.</p>\n\n<p>The null exception is thrown on the WebViewPage.User object.  However, when in debug mode, I can actually inspect a real instance of the object (see image below)</p>\n\n<pre><code> public static class WebViewPageExtensions\n {\n      public static bool HasAccess(this WebViewPage pg)\n        {\n            if (pg == null) throw new ArgumentNullException(\"WebViewPage is null\");\n            if (pg.User == null) throw new ArgumentNullException(\"WebViewPage User is null\");              \n            return pg.User.IsInRole(User.ACCESS_LEVEL_A) || pg.User.IsInRole(User.ACCESS_LEVEL_B);\n        }\n }\n</code></pre>\n\n<p>Note: this could be something with the way my environment is configured (web.config maybe?), but not really sure where to start.  As it is, the code that this is happening on is the same code running in production and the former developer environment.</p>\n\n<p>All the references are still referring to the ASP.NET MVC3 version of the framework running on the .NET 4.0 platform.</p>\n\n<p><img src=\"http://i.stack.imgur.com/3Ncwn.png\" alt=\"Inspecting the &quot;null&quot; pg.User object\"></p>\n\n<p>EDIT: Here's the callilng code from a Razer view:</p>\n\n<pre><code> @if (this.HasAccess()) {                 \n        &lt;div&gt;\n                HTML here\n        &lt;/div&gt;  \n    }\n</code></pre>\n\n<p>Any thoughts?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","ninject"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12736047,"title":"How to inject my database context into all my repository classes","body":"<p>Each of my repository classes look like this:</p>\n\n<pre><code>public class ProfileRepository : IProfileRepository{\n\n   private MyEntities myEnt = new MyEntities();\n   ...\n\n}\n</code></pre>\n\n<p>I am injecting my repository classes like so:</p>\n\n<pre><code>private static void RegisterServices(IKernel kernel)\n        {\n            kernel.Bind&lt;IProfileRepository&gt;().To&lt;ProfileRepository&gt;();\n            ....\n            GlobalHost.DependencyResolver =  new NinjectDependencyResolver(kernel);\n            GlobalHost.DependencyResolver.Register(typeof(IConnectionIdGenerator), () =&gt; new MyConnectionFactory());\n            RouteTable.Routes.MapHubs(new NinjectDependencyResolver(kernel));\n        }       \n</code></pre>\n\n<p>I want to inject MyEntities context into all my repository classes so I don't have an instance of it in each repository class.  How do I accomplish this?  Would this be a better practice?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":219,"score":1,"question_id":5189663,"title":"FindView in release mode always uses useCache = true","body":"<p>I've read online that when MVC is compiled in release mode the FindView and FindPartialView method of the IViewEngine interface always is called with useCache = true. Is this true? If it is, is it a bug in MVC? If it is not a bug, what's the reasoning behind it?</p>\n"}]}
{"total":29155,"page":18,"pagesize":100,"questions":[{"tags":["asp.net","asp.net-mvc-3","linq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12719026,"title":"Aggregating data with query for ASP MVC 3 controller","body":"<p>I have three tables:</p>\n\n<blockquote>\n  <p>PackageName: PackageNameID,PackageName </p>\n  \n  <p>Food: FoodID,Food</p>\n  \n  <p>PackageContent: PackageContentID, PackageNameID, FoodID, Qty</p>\n</blockquote>\n\n<p>What I'm trying to do is display something like this:</p>\n\n<blockquote>\n  <ul>\n  <li><p>PackageName (Food=Qty, Food=Qty) Edit | Details | Delete</p></li>\n  <li><p>A (Onions=4,Peppers=3)   Edit | Details | Delete</p></li>\n  <li>B (Rolls=2,Onions=2) Edit | Details | Delete</li>\n  </ul>\n</blockquote>\n\n<p>Here is my view model:</p>\n\n<pre><code>public class PackageViewModel\n{\n  public int ID { set;get;}\n  public string Name { set;get;}\n  public List&lt;FoodItem&gt; FoodItems { set;get;}\n  public PackageViewModel()\n  {\n     FoodItems=new List&lt;FoodItem&gt;();\n  }\n}\npublic class FoodItem\n{\n  public string FoodName { set;get;}\n  public int Quantity { set;get;}\n}\n</code></pre>\n\n<p>Here is my view:</p>\n\n<pre><code>@model List&lt;PackageViewModel&gt;\n\n@foreach(var item in Model)\n{\n  &lt;tr&gt;\n   &lt;td&gt;@item.Name&lt;/td&gt;\n   &lt;td&gt;\n       foreach(var food in item.FoodItems)\n       {\n         @food.FoodName - @food.Quantity\n       }\n   &lt;/td&gt;\n   &lt;td&gt;\n      @Html.ActionLink(\"Edit\",\"Edit\",new {@id=item.ID})\n   &lt;/td&gt;\n  &lt;/tr&gt;\n}\n</code></pre>\n\n<p>This is the query I am using in my controller:</p>\n\n<pre><code>List&lt; PackageViewModel &gt; listVM=new List&lt; PackageViewModel &gt;();\n\nlistVM =\n\n        from pn in db.PackageNames\n        from pc in db.PackageContents\n            .Where(p =&gt; p.PackageNameID == pn.PackageNameID).DefaultIfEmpty()\n        from f in db.Foods\n            .Where(f =&gt; f.FoodID == pc.FoodID).DefaultIfEmpty()\n        select new PackageViewModel { PackageNameID = pc.PackageNameID, PackageName = pn.PackageName, FoodItems = f.Food.ToList() };\n\n    return View(listVM);  \n</code></pre>\n\n<p>But, I get the following error: \n<strong>Cannot implicitly convert type 'System.Collections.Generic.List' to 'System.Collections.Generic.List'</strong></p>\n\n<p>Further, the select line isn't right anyway....I need to assign both the name of the food (\"Food\" from the \"Food\" table) and the quantity of this food item (\"Qty\" from the \"PackageContent\" table) to the \"FoodItems\" list in the model. How do I do this?</p>\n\n<p>Thanks very much!!</p>\n"},{"tags":["asp.net","asp.net-mvc-3","asynchronous","azure","azure-web-roles"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":12729038,"title":"MVC3 AsyncController - Can we send heartbeat data to the client?","body":"<p>In order to overcome the (apparent) 4 minute idle connection timeout on the Azure load balancer, it seems necessary to send some data down the pipe to the client every now and again to keep the connection from being regarded as idle.</p>\n\n<p>Our controller is set up as an AsyncController, and it fires several different asynchronous methods on other objects, all of which are set up to use IO Completion Ports. Thus, we return from our method immediately, and when the completion packet is processed, IIS hooks back up to the original request so that we can render our View.</p>\n\n<p>Is there any way to periodically send a few bytes down the wire in this case? In a \"classic\" situation, we could have executed the method and then just spun while we waited, sending data every few seconds until the asynchronous method was complete. But, in this situation, the IIS thread is freed to go do other business, and we hook back up to it in our completion callback. What to do? Is this possible?</p>\n"},{"tags":["asp.net-mvc-3","iis7","web-config","asp.net-membership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12734062,"title":"Publishing to IIS7 with custom MemberShipProvider gives error","body":"<p>I've built a website with MVC3, .Net 4.0, and I'm trying to get it to work on my test server. The server is a default installation of win2008 r2.</p>\n\n<p>While testing and debugging (with the ASP.Net development server) the site works just fine. When I publish the site to my server, the site works fine, until I press submit on my login form. The error I get is found below.</p>\n\n<p>Configuration Error</p>\n\n<p>Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. </p>\n\n<pre><code>Parser Error Message: Schema specified is not valid. Errors: \n(0,0) : warning 0005: Could not find schema information for the attribute 'Namespace'.\n(0,0) : warning 0005: Could not find schema information for the attribute 'Provider'.\n(0,0) : warning 0005: Could not find schema information for the attribute 'ProviderManifestToken'.\n(0,0) : warning 0005: Could not find schema information for the attribute 'Alias'.\n(0,0) : error 0010: The element Schema in namespace http:// schemas.microsoft.com/ado/2009/11/edm/ssdl was unexpected for the root element. The expected Schema in one of the following namespaces: http:// schemas.microsoft.com/ado/2006/04/edm/ssdl, http:// schemas.microsoft.com/ado/2009/02/edm/ssdl.\n</code></pre>\n\n<p>Source Error: </p>\n\n<pre><code>Line 36:       &lt;providers&gt;\nLine 37:         &lt;clear/&gt;\nLine 38:         &lt;add name=\"CovleUserProvider\" type=\"FileUpload.Models.CovleMembershipProvider\" connectionStringName=\"UserInfo\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\"/&gt;\nLine 39:       &lt;/providers&gt;\nLine 40:     &lt;/membership&gt;\n</code></pre>\n\n<p>Source File: C:\\inetpub\\wwwroot\\web.config    Line: 38 </p>\n\n<p>Some side info:\nThe name and namespace of the membership provider is correct (it works on the dev machine), The membership provider is part of the web project, but it references dll's from other projects. All references are there in the bin folder. </p>\n\n<p>What I've tried:\nTrust level is on full.\nI shouldn't have to reference my own assemblies in the web.config (as far as I can tell from online resources) </p>\n\n<p>Can anyone tell me what I'm doing wrong?</p>\n"},{"tags":["asp.net-mvc-3","telerik-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12685147,"title":"Conditional TabStrip in Telerik MVC3","body":"<p>I need to implement conditional TabStrip in Telerik MVC Grid. The parent grid row contains the cell value of Status. If the status is Active i dont suppose to show the tabstrip in the child grid. If the status is Pending, then i need to show the TabStrip to create new item.</p>\n\n<p>I have to do something like this:</p>\n\n<pre><code>if (\"&lt;#= Status #&gt;\" == \"Pending\") // The condition is not working here. Always show this tab.\n                    {\n                        items.Add().Text(\"Create New Detail\").Url(\"/Acq/PoDet/Create/&lt;#=Id#&gt;\");\n                    }\n                })\n                .ToHtmlString()\n</code></pre>\n"},{"tags":["javascript","asp.net","json","asp.net-mvc-3"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":211,"score":0,"question_id":12615147,"title":"Posting JSON string to ASP.NET MVC 3 action results in null parameter","body":"<p>I am posting a JSON string to asp.net MVC as follows.</p>\n\n<p>AJAX call</p>\n\n<pre><code>$.ajax({\n            type: \"POST\",\n            url: \"@(storeLocation)IDR/OpcInsertCustomerProfile/\",\n            data: JSON.stringify(currSelection),\n            contentType: \"application/json\",\n            success: function(data) {\n              alert('success : ' + JSON.stringify(data));\n            },\n            error: function(data) {\n             alert('Error : ' + JSON.stringify(data));\n            }\n          }\n        );\n</code></pre>\n\n<p>In the controller:</p>\n\n<pre><code>[HttpPost]\n        [ActionName(\"OpcInsertCustomerProfile\")]\n        public JsonResult OpcInsertCustomerProfile(string currSelectionData)\n        {\n            try\n            {\n                JavaScriptSerializer ser = new JavaScriptSerializer();\n                var res = ser.Serialize(currSelectionData);\n                return Json(currSelectionData, JsonRequestBehavior.AllowGet);\n\n            }\n            catch (Exception exc)\n            {\n                return Json(new { error = 1, message = exc.Message });\n            }\n        }\n</code></pre>\n\n<p>Debugger indicates the action gets called successfully, however the incoming string parameter being received is always null. Firebug 'post' shows outgoing parameter is proper json object. I am expecting to see the JSON string as incoming parameter. Please note that I don't want to de-serialise it into proper object. All I want to do is store the string in JSON format 'as-it-is' in a database. Later on it needs be retrieved ans passed to Javascript as it is.</p>\n"},{"tags":["asp.net-mvc-3","mvc","routing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12453114,"title":"Url routing in mvc 3.0","body":"<p>I want to have below specific Url routing for my website</p>\n\n<p><a href=\"http://www.MyWebsite?Region=US&amp;Area=South\" rel=\"nofollow\">http://www.MyWebsite?Region=US&amp;Area=South</a></p>\n\n<p>based on passed Region and Area query string parameter, i want to redirect to a specific controller action.</p>\n\n<p>Problems: </p>\n\n<ol>\n<li>What should be the Url Routing ?</li>\n<li>Whether creating a common controller action which redirects to specific action will work here?</li>\n</ol>\n\n<p>Any help would be greatly appriciated !!</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12733700,"title":"MVC SelectList setting width of control in view","body":"<p>Thanks to help I got here - I have the following code in my controller:</p>\n\n<pre><code> var stands = db.Stands.ToList().Where(s =&gt; s.ExhibitorID == null)\n              .Select(s =&gt; new SelectListItem\n              {\n                  Value = s.StandID.ToString(),\n                  Text = s.Description + \"-- £\" + s.Rate.ToString()\n              });\n\n\n        ViewBag.StandID = new SelectList(stands, \"Value\", \"Text\");\n</code></pre>\n\n<p>And render it in my view like this:</p>\n\n<pre><code>&lt;div class=\"editor-field\"&gt; \n    @Html.DropDownList(\"StandID\", new {style = \"width:150px\"})\n&lt;/div&gt; \n</code></pre>\n\n<p>However in the view, I get the following error:</p>\n\n<p>CS1928: 'System.Web.Mvc.HtmlHelper' does not contain a definition for 'DropDownList' and the best extension method overload 'System.Web.Mvc.Html.SelectExtensions.DropDownList(System.Web.Mvc.HtmlHelper, string, string)' has some invalid arguments</p>\n\n<p>It's fine when I remove the new {style=....</p>\n\n<p>How can I set the width of the dropdownlist, without getting this error?</p>\n\n<p>Thank you,</p>\n\n<p>Mark</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":1462,"score":3,"question_id":4151062,"title":".NET 4.0 MEF. Pluggable ASP.NET MVC 3.0 Approach","body":"<p>I am going to start new MVC 3.0 .NET 4.0 application.</p>\n\n<p>I want to implement each component for my web site once and simply reuse it then for another web sites i going to build.</p>\n\n<p>Currently i am looking the best practice i can use to achieve my goal.</p>\n\n<p>I did some research and found that I may get a lot of advantages using MEF.</p>\n\n<p>I found interesting MEF MVC solution called plugable MVC <a href=\"http://www.thegecko.org/index.php/2010/06/pluggable-mvc-2-0-using-mef-and-strongly-typed-views\" rel=\"nofollow\">http://www.thegecko.org/index.php/2010/06/pluggable-mvc-2-0-using-mef-and-strongly-typed-views</a>.</p>\n\n<p>Is it really worth to use such kind of approach(Plugabble MVC) of building MVC apps?</p>\n\n<p>Advantages disadvantages of pluggable MVC?</p>\n\n<p>May be somebody may suggest something else?</p>\n"},{"tags":["json","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12733091,"title":"DataBinder not binding JSON array object to List field in Model","body":"<p>Below is the javascript code that I'm using to create a JSON object with which to return values to a controller. vm Refers to an array elsewhere which is populated by numbers. I create an object that is an array of numbers.</p>\n\n<pre><code>$(\"#saveUser\").live(\"click\", function() {\n\n            var username = $(\"#UserName\").val();\n            var email = $(\"#Email\").val();\n            var phoneNumber = $(\"#PhoneNumber\").val();\n            var personCode = $(\"#PersonCode\").val();\n            var managerId = $(\"#ManagerId\").val();\n            var officeId = $(\"#OfficeId\").val();\n            var address = $(\"#Address\").val();\n            var activeInd = $(\"#ActiveInd\").val();\n\n            var roles = [];\n            for(i=0;i&lt;vm.RoleDdList().length ;i++) {\n                    roles.push(vm.RoleDdList()[i].role());   \n                }\n\n            var jsonObj = \n                {\n                    username:username,\n                    email:email,\n                    phoneNumber:phoneNumber,\n                    personCode:personCode,\n                    managerId:managerId,\n                    officeId:officeId,\n                    address:address,\n                    activeInd:activeInd,\n                    roles:roles\n            };\n\n\n            $.ajax({\n               type:\"POST\",\n               async:true,\n               url:\"Users/Save\",\n               data:jsonObj,\n               dataType: \"json\",\n               success:function (data) {\n                   dlg.dialog(\"close\");\n               },\n               error:function (data) \n               {\n                   alert(\"An error occurred when saving the contact.\");    \n               }\n            });\n        });\n</code></pre>\n\n<p>Controller Method:</p>\n\n<pre><code>[HttpPost]\n    public void Save(UsersModel model)\n    {\n        //code\n    }\n</code></pre>\n\n<p>I can see using the debugger that the roles field is not being passed to the controller. It is generated and populated though on the client side. The model expects a List of strings for that particular field. All of the other objects are passed through and matched up.</p>\n\n<p>I have altered the code to convert the numbers in the vm array to be strings but I still get nothing passed through. (The List in the model is null).</p>\n\n<p>Anyone know what I am doing wrong?</p>\n"},{"tags":["asp.net-mvc-3","azure","sql-azure"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":357,"score":0,"question_id":11331777,"title":"MVC app deployed on Azure cannot connect to SQL Azure Database but can connect via SSMS","body":"<p>I have an MVC 3 app using Entity Framework that was happily hosted in Azure and talking to SQL Azure Database 2 days ago. I then had a minor schema change to the database and so dropped and re-created the database via SSMS and also published the application again as I had added the default MVC app login role controls to the site - since then I cannot get my app to connect to the database and get the following error logged in an Elmah xml file:</p>\n\n<p>A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)\" source=\".Net SqlClient Data Provider\" detail=\"System.Data.EntityException</p>\n\n<p>I can connect to the SQL Azure Database using SSMS and when I run my application in the Azure emulator connected to the SQL Azure Database everything runs perfectly but once published it refuses to connect. Any help would be massively appreciated!</p>\n"},{"tags":["visual-studio","asp.net-mvc-3","razor","web-platform-installer","asp.net-webpages"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1570,"score":3,"question_id":9519776,"title":"\"Missing web components\" error when opening MVC3 project in Visual Studio 11 Beta","body":"<p>When I open a solution containing an MVC3 project in Visual Studio 11 Beta, I see the following message:</p>\n\n<p><img src=\"http://i.stack.imgur.com/oLVRI.png\" alt=\"The Web project 'Landboss.Web' requires missing web components to run with Visual Studio. Would you like to download and install them using the Web Platform Installer now? (Note: Some components might require restart to take effect.) ASP.NET Web pages with Razor syntax 1.0.0.0\"></p>\n\n<blockquote>\n  <p>The Web project 'Landboss.Web' requires missing web components to run\n  with Visual Studio. Would you like to download and install them using\n  the Web Platform Installer now? (Note: Some components might require\n  restart to take effect.)</p>\n  \n  <p>ASP.NET Web pages with Razor syntax 1.0.0.0</p>\n</blockquote>\n\n<p>When I click <strong>Yes</strong>, the Web Platform Installer opens and tells me this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/PrvPv.png\" alt=\"enter image description here\"></p>\n\n<blockquote>\n  <p><a href=\"http://learn.iis.net/page.aspx/604/troubleshooting-problems-with-microsoft-web-platform-installer-30/\" rel=\"nofollow\">The product you are trying to install is not supported on your\n  operating system. Click here for more information.</a></p>\n</blockquote>\n\n<p>So far I've installed Visual Studio 11 Beta on two machines and both have this same problem.</p>\n"},{"tags":["visual-studio-2010","entity-framework","asp.net-mvc-3"],"answer_count":14,"favorite_count":5,"up_vote_count":12,"down_vote_count":0,"view_count":31042,"score":12,"question_id":5741109,"title":"The type or namespace name 'DbContext' could not be found","body":"<p>I am VERY new to ASP.NET MVC (3) and am having a hard time resolving a build error in Visual Studio:</p>\n\n<p>The type or namespace name 'DbContext' could not be found (are you missing a using directive or an assembly reference?)</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.ComponentModel.DataAnnotations;\nusing System.Data.Entity;\n\nnamespace MyProjectName.Models\n{   \n    public class MachineModel\n    {\n        // name\n        [Required]\n        [Display(Name = \"Nom de la machine\")]\n        public string Name { get; set; }\n\n        // IP\n        [Required]\n        [RegularExpression(@\"(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\",\n           ErrorMessage = \"Donnez une adresse IPv4 valide.\")]\n        [Display(Name = \"Adresse IP de la machine\")]\n        public string IP { get; set; }\n    }\n\n    public class MachineDbContext : DbContext\n    {\n        public DbSet&lt;MachineModel&gt; Machines{ get; set; }\n    }\n}\n</code></pre>\n\n<p>The two errors I am getting are:</p>\n\n<ul>\n<li>The type or namespace name\n'DbContext' could not be found (are\nyou missing a using directive or an\nassembly reference?) </li>\n<li>The type or namespace name 'DbSet'\ncould not be found (are you\nmissing a using directive or an\nassembly reference?)</li>\n</ul>\n\n<p>What am I missing?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":337,"score":1,"question_id":6293293,"title":"asp.net mvc Complex form how to store them","body":"<p>I am still quite new to MVC, I had a complex form in my project. The form is student form, with all common fields such as firstname,lastname etc. On the form, it also need to add multiple addresses &amp; notes for this student and display them. Once everything has been provided, it persist student with other data into multiple tables (I have separate address table and notes table). </p>\n\n<p>Currently when user click add address button I use jquery popup an address dialog, once user complete the form, I use ajax to save the data into session, and same applies to notes. I am a bit worried, first session might be expired. second my form is more complex than what I've described, so there will be a lot of data in the session which in webform I hardly use that. </p>\n\n<p>So can someone give me a better solution?</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["c#","asp.net-mvc-3","html5"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12605821,"title":"Invalid text in search box doesn't hit the Else statement","body":"<p>Aspx Engine</p>\n\n<p>When I enter an invalid User Id in the text box and  hit search, \"No Class found\" is suppose to be displayed. Now \"Search Result\" is displayed.  It seems not to be hitting the else statement.</p>\n\n<p><strong>html</strong></p>\n\n<pre><code>&lt;div align=\"center\"&gt;\n    &lt;form id=\"searchUser\" method=\"post\" action=\"Search\"&gt;\n        &lt;table align=\"center\"&gt;\n    &lt;tr&gt;\n        &lt;td class=\"label\"&gt;\n            Enter ID:\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input type=\"text\" name=\"UserId\" id=\"UserId\" value=\"&lt;%=(string)(ViewBag.userid)%&gt;\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n      &lt;tr style =\"display:none;\"&gt;\n        &lt;td class=\"label\"&gt;\n            Email:\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input type=\"text\" name=\"Email\" id=\"Text1\" value=\"&lt;%=(string)(ViewBag.email)%&gt;\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n      &lt;tr style =\"display:none;\"&gt;\n        &lt;td class=\"label\"&gt;\n            lastFourDigits:\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input type=\"text\" name=\"LastFourDigits\" id=\"Text2\" value=\"&lt;%=(string)(ViewBag.lastFourDigits)%&gt;\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            &lt;button class=\"searchButton\" id=\"searchButton\"&gt;Search&lt;/button&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/table&gt;\n &lt;/form&gt;\n  &lt;/div&gt;\n  &lt;hr /&gt; \n\n  &lt;% if (ViewBag.searchClass !=null)\n    { %&gt;\n    &lt;h2&gt;Search Resuls&lt;/h2&gt;\n    &lt;br /&gt;\n    &lt;%List&lt;AAlexUsers.Models.SearchClass&gt; searchClassList= ViewBag.searchClass;%&gt;\n    &lt;%if(searchClassList.Count&gt;0)\n    &lt;table&gt;\n          &lt;%foreach (AAlexUsers.Models.SearchClass searchClass in searchClassList)\n     {%&gt;\n      &lt;tr&gt;\n         &lt;td&gt;\n            UserID:\n        &lt;/td&gt;\n        &lt;td class=\"content\"&gt;\n          &lt;%=searchClass.userId%&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            Email:\n        &lt;/td&gt;\n        &lt;td class=\"content\"&gt;\n         &lt;%=searchClass.email%&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n        Last Four Digits:\n        &lt;/td&gt;\n        &lt;td class=\"content\"&gt;\n          &lt;%=searchClass.lastFourdigits%&gt;\n         &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;%} %&gt;\n    &lt;%} %&gt;\n &lt;/table&gt;\n\n    &lt;%} else %&gt;\n &lt;%{ %&gt;\n    &lt;h2&gt;No Class found.&lt;/h2&gt;\n &lt;%} %&gt;\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>public ActionResult Search()\n{\n    string userId = Request[\"UserId\"];\n    string email = Request[\"Email\"] ?? string.Empty;\n    string lastFourdigits = Request[\"LastFourDigits\"] ?? string.Empty;\n\n    bool view = false;\n\n    if (string.IsNullOrEmpty(userId))\n    {\n        view = true;\n    }\n    if (!view)\n    {\n        List&lt;AAlexUsers.Models.SearchClass&gt; searchClass = \n            AAlexUsers.Models.SearchClass.Users(userId,email,lastFourdigits);\n        {\n            ViewBag.searchClass = searchClass;\n            ViewBag.lastFourdigits = lastFourdigits;\n            ViewBag.userId = userId;\n            ViewBag.email = email;\n        }\n    }\n    return View();\n}\n</code></pre>\n\n<p><strong>Model</strong></p>\n\n<pre><code>public class SearchClass\n{\n    public string userId { get; set; }\n    public string email { get; set; }\n    public string lastFourdigits { get; set; }\n\n    public static List&lt;AAlexUsers.Models.SearchClass&gt; \n        Users(string userId, string email, string lastFourdigits)   \n    {\n        SearchClass Alex = new SearchClass();\n        Alex.userId = \"1234\";\n        Alex.email = \"Alex@gmail.com\";\n        Alex.lastFourdigits = \"1885\";\n\n        SearchClass Emilio = new SearchClass();\n        Emilio.userId = \"0928\";\n        Emilio.email = \"Cubano@gmail.com\";\n        Emilio.lastFourdigits = \"0706\";\n\n        SearchClass Ulysses = new SearchClass();\n        Ulysses.userId = \"0914\";\n        Ulysses.email = \"lysses@gmail.com\";\n        Ulysses.lastFourdigits = \"01zx\";\n\n        var list = new List&lt;SearchClass&gt;();\n        list.Add(Alex);\n        list.Add(Emilio);\n        list.Add(Ulysses);\n\n\n        IEnumerable&lt;SearchClass&gt; result = list;\n        if (!string.Empty.Equals(userId))\n            result = result.Where(u =&gt; u.userId == userId);\n\n        return result.ToList();\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12731064,"title":"How do I return a FileStreamResult from a View in MVC","body":"<p>In my Controller I have a GenerateDocument method that returns a FileStreamResult.</p>\n\n<p>In my view I have javascript that simply opens a new like so; window.open('/controller/GenerateDocument/?id=blah');</p>\n\n<p>I need my GenerateDocument method to:\n1. return a pdf when the document can be created/fetched without errors,\n2. return a new page/view when there are errors.</p>\n\n<p>Here's the Controller code:</p>\n\n<pre><code>    public FileStreamResult GenerateDocument(int id)\n    {\n        string errorResult = string.Empty;\n\n        try\n        {\n            DocumentDetail documentDetail =\n                 DocumentGenerator.GenerateAgreements(id, DcmDocumentEntityType.Sponsor, GetAuthUser());\n\n            if (documentDetail == null) return null;\n\n            Stream stream = DocumentGenerator.RetrieveFile(documentDetail);\n\n            return new FileStreamResult(stream, \"application/pdf\");\n        }\n        catch (Exception ex)\n        {\n            errorResult = FormatException(ex);\n            Trace.TraceError(errorResult);\n        }\n\n        //ViewBag.Error = HttpUtility.HtmlEncode(errorResult).Replace(\"\\n\", \"&lt;br /&gt;\");\n\n        //return View(\"DocGenerationError\");\n        return null;\n    }\n</code></pre>\n\n<p>I tried using using ActionResult and returning the view in case of an error, but as I noted in a comment on this thread, in the page javascript, window.open(url) would not work right.</p>\n\n<p>Here's the view code:</p>\n\n<pre><code>  $('#ActionMenu').change(function() {\n      var action = $(this).val();\n\n      switch (action) {            \n      case 'Generate Sponsor Agreement':\n          window.open('/Sponsor/GenerateDocument/?id=@(Model.SponsorID)');\n          break;\n\n      other cases\n\n      default:\n      }\n  });\n</code></pre>\n\n<p>Note: the Controller code above WORKS. It's when I switch to returning an ActionResult and uncomment out the exception handling stuff that it stops working.</p>\n"},{"tags":["c#","asp.net-mvc-3","caching","razor","iis-7.5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":151,"score":0,"question_id":12731503,"title":"ASP.Net MVC 3 Razor Views (cshtml Files) hosted on IIS 7.5 seem to be cached somehow (no client or outputcaching)","body":"<p>we have a caching issue when editing cshtml files. Our ASP.net MVC 3 application is hosted with IIS 7.5 on Windows Server 2008. Now, when we edit a cshtml file the changes won't show until we reset iis - which is something we do not want to do too frequently on our production system. </p>\n\n<p>According to fiddler, STRG-F5 and Firebug it's not a client-side caching issue (which would have been weird anyway). So no caching related HTTP headers are sent to the client. We do have staticContent configured in our web.config though.</p>\n\n<p>There's no OutputCaching configured in anyway for the corresponding controller actions, either. Actually, we do not use OutputCaching at all in this project. We couldn't find much on the internet and are kinda puzzled at what is actually happening here.</p>\n\n<p>Any idea why IIS, ASP.Net MVC or something in between the client and the web server is seemingly caching the content of cshtml files? </p>\n\n<p>Related views are no child views.</p>\n\n<p>Note: this is not an issue with cassini. Also, Partial Views with dyamic content within an updated View behaves correctly. Which also leads to the conclusion (for me) that it's not related to OutputCaching whatsoever.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc-3","partialviews"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12730991,"title":"How to replace a partial view by another?","body":"<p>I want to show a list of \"Latest news\" articles and, on click on \"Read more\" link, to show the full content of the clicked article. For that, I use a partial view in my Index.cshtml view. The first time the Index view is displayed, the partial view is populated with the list of articles. What I want is: to reuse the same partial view to show the full article, on click.</p>\n\n<p>For some reason I can't manage to do that and I can't see why. Using the debugger and Firebug, I can trap no error. Furthermore, the application goes through all steps and it seems even to display the _Details partial view, but actually, on the screen is still the list.</p>\n\n<p>Thank you for pointing me out the error.</p>\n\n<p><em>Edit:</em></p>\n\n<p>I have all the necessary scripts referenced in _Layout.cshtml: <em>jquery-1.8.2.min.js, jquery-ui-1.8.24.custom.min.js, jquery.ui.core.min.js, jquery.validate.min.js, jquery.validate.unobtrusive.min.js</em> and <em>jquery.unobtrusive-ajax.js</em> and also I have <em>\"UnobtrusiveJavaScriptEnabled\"=\"true\"</em> in web.config.</p>\n\n<p><strong>Index.cshtml</strong></p>\n\n<pre><code>@model MyApp.ViewModels.NewsViewModel\n\n&lt;div id=\"content\" class=\"content_style\"&gt; \n   &lt;text&gt;Some static content&lt;/text&gt;\n   &lt;div class=\"active_part\"&gt;\n        @Html.Partial(\"_List\", Model.NewsList)\n   &lt;/div&gt;&lt;!-- end active_part --&gt;\n&lt;/div&gt;&lt;!-- end content --&gt;\n</code></pre>\n\n<p><strong>_List.cshtml</strong></p>\n\n<pre><code>@model IEnumerable&lt;MyApp.Models.News&gt;\n@using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = \"active_part\", InsertionMode = InsertionMode.Replace }))\n{\n    foreach (var item in Model)\n    {\n    &lt;h2 class='title\"&gt;\n    @Ajax.ActionLink(item.Title, \"Details\", \"News\", new { id = item.News_ID }, new AjaxOptions { UpdateTargetId = \"active_part\" }, null)\n        &lt;/h2&gt;\n\n        &lt;div class=\"body\"&gt;\n            @Html.Raw(item.Body)\n            @Ajax.ActionLink(\"Read more\", \"Details\", \"News\", new { id = item.News_ID }, new AjaxOptions { UpdateTargetId = \"active_part\" }, null)\n    &lt;/div&gt;\n    }\n}\n</code></pre>\n\n<p><strong>_Details.cshtml</strong></p>\n\n<pre><code>@model MyApp.Models.News\n@using (Ajax.BeginForm(new AjaxOptions{ UpdateTargetId = \"active_part\", InsertionMode = InsertionMode.Replace }))\n{\n\n    &lt;div class=\"single\"&gt;\n        &lt;h2 class=\"title\"&gt;@Model.Title&lt;/h2&gt;\n        &lt;div class=\"entry-content\"&gt;\n            @Html.Raw(Model.Body)\n        &lt;/div&gt;\n    &lt;div class=\"clear\"&gt;&lt;/div&gt;    \n    &lt;/div&gt;\n}\n</code></pre>\n\n<p><strong>ViewModel</strong></p>\n\n<pre><code>public class NewsViewModel\n{\n    // Properties\n    public News CurrentNews { get; set; }\n    public List&lt;News &gt; NewsList {get; set;}\n\n    // Constructor\n    public NewsViewModel() { }\n\n    public NewsViewModel(News pCurrentNews , List&lt;News&gt; pNewsList)\n    {\n        CurrentNews = pCurrentNews ;\n        NewsList = pNewsList;\n    }\n}\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>    public ViewResult Index()\n    {\n        return View( new NewsViewModel(null, repository.FindAllNews()));\n    }\n\n    public ActionResult Details(long id)\n    {\n        News article = repository.FindAnArticleByID(id);\n        return PartialView(\"_Details\", article);\n    }\n\n\n    public ActionResult ListNews()\n    {\n        return PartialView(\"_List\", repository.FindAllNews());\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":691,"score":5,"question_id":6033154,"title":"using @data-bind in ASP.NET MVC htmlAttributes throws exception","body":"<p>I am using ASP.NET MVC 3.0 and <code>KnockoutJS</code>. I was trying to add the binding into my View Helpers like this ...</p>\n\n<pre><code>@Html.TextBoxFor(model =&gt; model.Name, new { @placeholder = \"Name\", @size = \"35\", @data-bind = \"value: aName\" })\n</code></pre>\n\n<p>But this throws the exception ...</p>\n\n<blockquote>\n  <p>Invalid anonymous type member declarator. Anonymous type members must be declared with a member assignment, simple name or member access.</p>\n</blockquote>\n\n<p>Can anyone enlighten me on what this means - and moreover, how to solve it?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12722402,"title":"How to add parameter's id to link at controller method with using ajax in MVC3?","body":"<p>I get parameters with using ajax. At this point there is no problem but how to add parameter id's with giving a link at the Controller Method. Because I want to display a link at the view and when I click that link I want to route another view with parameter's id</p>\n\n<p>Here is my controller:</p>\n\n<pre><code>public string corporate()\n        {\n\n            var management = \"\";\n            var management_id=\"\"; ? How can I add this paremeter to link to route another View with this parameter\n            foreach (var query in db.corporate)\n            {\n\n                management =management + \"&lt;li&gt;&lt;input type='checkbox'/&gt;&lt;label&gt;\"+query.person_position+\"&lt;/label&gt;&lt;/li&gt;\";\n            }\n            return (management);\n        }\n</code></pre>\n\n<p>you know MVC has @Html.Actionlink() tag and I can't add so how can I add parameter id  with using ajax ?</p>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12729059,"title":"How to load content pages asynchrously from the click on layout page link","body":"<p>I am working on Asp.net mvc. I have a legacy layout page that contains left pane and center pane(content pane) i.e. my left pane contains some tabs like home, events etc. when the user clicks on any tab the respective action will takes place and the page is loaded. but i want to \nload the content pane asynchronously i.e. without loading the entire page i.e both layout and content pages i just want to load the content page only. for that i have used jquery ajax calls and RenderPartial views mechanism like,</p>\n\n<pre><code>$('#lnkHome').click(function () {\n                $.ajax({\n                    url: '/Home/Home',\n                    type: 'POST',\n                    cache: false,\n                    success: function (data) {\n                        $('div.ContentPane').html(data);\n                    }\n                });\n            });\npublic actionresult Home()\n{\nreturn Partial(\"_home\");\n}\n</code></pre>\n\n<p>But i am unable to use all my javascript code i think it is overlapped with layout page scripts. Does there any way to load the pages asyncornously that match to my scenario. please guide me.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","c#-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12727652,"title":"ViewData[var] being populated by the same SelectList, not a different one","body":"<p>I have a list of Band Titles, and I wish to attach a SelectList with each one of them, depending on the BandID.</p>\n\n<p>So first I am getting the list:-</p>\n\n<pre><code>List&lt;BandQuestionTitles&gt; bandQuestTitles = viewModel.PopulateBandQuestionTitles();\n</code></pre>\n\n<p>and then I have a loop on the BandQuestionTitles to populate a ViewData[var] from a SelectList:-</p>\n\n<pre><code>foreach (var bandQuestTitleItem in bandQuestTitles)\n    {\n        //populate the dropdownlist\n        string strViewDataString = bandQuestTitleItem.BandQuestTitlesText + \"Data\";\n        ViewData[strViewDataString] = new SelectList(viewModel.bandQuestionList.Where(p =&gt; p.BandQuestTitleID == bandQuestTitleItem.BandQuestTitlesID), \"BandQuestID\", \"BandQuestText\");\n    }\n</code></pre>\n\n<p>However for some reason, although I am getting correctly the 7 ViewData[\"\"], I am always getting the same SelectList</p>\n\n<p>When I hard code it, it works fine :-</p>\n\n<pre><code>ViewData[\"PersonalData\"] = new SelectList(viewModel.bandQuestionList.Where(p =&gt; p.BandQuestTitleID == 1), \"BandQuestID\", \"BandQuestText\");\nViewData[\"BusinessData\"] = new SelectList(viewModel.bandQuestionList.Where(p =&gt; p.BandQuestTitleID == 2), \"BandQuestID\", \"BandQuestText\");\n</code></pre>\n\n<p>What am I doing wrong in the loop?</p>\n\n<p>Thanks for your help and time</p>\n"},{"tags":["javascript","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12524595,"title":"Partial View not working propely in index view.","body":"<p>I am developing MVC application and using razor syntax.</p>\n\n<p>In this application I am giving comment facility.</p>\n\n<p>I have added a partial view, which loads the comment/Records from DB.</p>\n\n<p>In below image, we can see the comment box which is called run-time for employee index view.</p>\n\n<p>Now as we can see comment box, I called at run-time, which is partial view, but problem is I can add comment for only on first record...after first record that button wont work at all... </p>\n\n<p>anything is missing ? \nIs there separate process when we call any partial view run-time and make in action on it ? </p>\n\n<p>See the pic...</p>\n\n<p><img src=\"http://i.stack.imgur.com/jteEw.jpg\" alt=\"enter image description here\"></p>\n\n<p>Here is the code....</p>\n\n<pre><code>@model PagedList.IPagedList&lt;CRMEntities.Customer&gt;\n\n\n  &lt;link href=\"../../Content/Paging.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n  &lt;link href=\"../../Content/EventEntity.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n  &lt;script src=\"&lt;%=Url.Content(\"~/Scripts/jquery.unobtrusive-ajax.min.js\")%&gt;\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n&lt;div id=\"ListBox\"&gt;\n    &lt;div id=\"ListHeader\"&gt;   \n        All customers(@Model.TotalItemCount)\n    &lt;/div&gt;\n\n    @foreach (var item in Model)\n    {        \n\n    &lt;div id=\"ListContent\"&gt;\n          &lt;span class=\"ContentTitleField\"&gt;@Html.ActionLink(item.Name, \"Details\", new { id = item.Id }, new { @style=\"color:#1A6690;\" })&lt;/span&gt;\n          @if (item.Owner != null)\n          {               \n            &lt;span class=\"ContentSecondaryField\"&gt;@Html.ActionLink(item.Owner.FullName, \"Details\", \"Employee\", new { id = item.OwnerId }, new { @style = \"color:#1A6690;\" })&lt;/span&gt;          \n          }\n          &lt;span class=\"ContentSecondaryField\"&gt;@Html.DisplayFor(modelItem =&gt; item.Address)&lt;/span&gt;\n          &lt;span id=\"flagMenus\"&gt;\n            @Html.Action(\"ShowFlag\", \"Flagging\", new { entityId=item.Id, entityType=\"Customer\"})\n          &lt;/span&gt;\n          @if (item.Opportunities.Count &gt; 0)\n          {\n                        &lt;span class=\"FlagOpportunity\"&gt;@Html.ActionLink(\"opportunities(\" + item.Opportunities.Count + \")\", \"Index\", \"Opportunity\", new { custid = item.Id }, new { @style = \"color:#fff;\" })&lt;/span&gt;\n          }\n\n           &lt;div style=\"float:right;\"&gt;\n             @Html.Action(\"SetRate\", \"Rating\", new { entityId = item.Id, rating = item.Rating, entityname = \"Customer\" })\n\n           &lt;/div&gt;\n           &lt;div id=\"subscribeStatus\" style=\"float:right;\"&gt;\n                @Html.Action(\"ShowSubscribedStatus\", \"Subscribing\", new { entityId = item.Id, entityType = \"Customer\" })\n            &lt;/div&gt;\n          &lt;div class=\"ListLinks\"&gt;          \n          &lt;span class=\"ListEditLinks\"&gt;\n            &lt;span style=\"float:left;\"&gt;@Html.ActionLink(\"edit\", \"Edit\", new { id = item.Id })&lt;/span&gt;\n            &lt;span class=\"LinkSeparator\"&gt;&lt;/span&gt;            \n           &lt;/span&gt;\n           &lt;span class=\"ListAddLinks\"&gt;\n            &lt;span style=\"float:left;\"&gt;@Html.ActionLink(\"+opportunity\", \"Create\", \"Opportunity\", new { custid = item.Id }, null)&lt;/span&gt;\n            &lt;span class=\"LinkSeparator\"&gt;&lt;/span&gt;\n            &lt;span&gt;@Ajax.ActionLink(\"+Comment\", null, null, null, new { id = item.Id, @class = \"addremark\" })&lt;/span&gt;                                  \n          &lt;/span&gt;\n\n        &lt;div class=\"RemarkBox\"&gt;&lt;/div&gt;\n\n          &lt;/div&gt;    \n\n             &lt;span class=\"CommentAdd\"&gt;\n\n             &lt;/span&gt;\n\n          &lt;div class=\"CommentBlock\"&gt;\n\n\n        &lt;/div&gt;\n\n         &lt;span&gt;@Ajax.ActionLink(\"Add Comment\", null, null, null, new { id = item.Id, @class = \"addremark\" })&lt;/span&gt;                                  \n\n\n\n    &lt;/div&gt;    \n    } \n\n    &lt;div class=\"PagingBox\"&gt;\n        @Html.Action(\"CreateLinks\", \"Pager\", new { hasPreviousPage = Model.HasPreviousPage, hasNextPage = Model.HasNextPage, pageNumber = Model.PageNumber, pageCount = Model.PageCount })\n    &lt;/div&gt;\n\n&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n\n    $(document).ready(function () {\n\n        $('.RemarkBox').hide();\n\n        $('a.addremark').click(function () {\n\n\n            var url=\"@Html.Raw(Url.Action(\"ShowCommentBox\", \"Comment\", new { Id = \"idValue\", EntityType = \"Customer\" }))\";\n\n            url=url.replace(\"idValue\",event.target.id);\n            $('.RemarkBox').load(url);\n\n            $(this).closest('div').find('div.RemarkBox').slideToggle(300);\n            return false;\n        });\n\n\n         $(\"a.pagenumber\").click(function () {             \n            var page = 0;\n            page = parseInt($(this).attr(\"id\"));\n\n            $.ajax({\n                url: '@Url.Action(\"GetPagedCustomers\")',\n                data: { \"page\": page },\n                success: function (data) { $(\"#customerlist\").html(data); }\n            });\n            return false;\n        });\n\n    });\n\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3","entity-framework","stored-procedures"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":218,"score":0,"question_id":12017089,"title":"How to use a stored procedure for Entity Framework model?","body":"<p>Hi before I use to retrieve and manipulate data directly from my DB..but this time I am using Entity Data Model.. I have all the tables in my <code>.edmx</code> file .... I have some queries in my DB for retrieving data but now as I am using Entity Data Model I don't know how to call that procedure in my controller as I am using MVC 3 here can any one tell me how to get the data using my stored procedure or write a Linq query similar to my stored procedure in my controller</p>\n\n<p>Here is my stored procedure:</p>\n\n<pre><code>  ALTER procedure [dbo].[ProjectReports]\n   (\n    @ProjectID int,\n    @ReleasePhaseID int\n   )\n   as\n   begin\n   select distinct projectName,ReleasePhase,\n   (Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and           \n     ReleasePhaseID=a.ReleasePhaseID and\n     bugid in (select BugID from BugHistory where [status]='New')) as Newbugs,\n     (Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and    \n     ReleasePhaseID=a.ReleasePhaseID and\n     bugid in (select BugID from BugHistory where [status]='Assigned')) as  \n     Assignedbugs,\n     (Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and  \n     ReleasePhaseID=a.ReleasePhaseID and\n     bugid in (select BugID from BugHistory where [status]='Fixed')) as Fixedbugs,\n      (Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and\n       ReleasePhaseID=a.ReleasePhaseID and\n     bugid in (select BugID from BugHistory where [status]='Re-Opened')) as \nReopenedbugs,\n    (Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and \n     ReleasePhaseID=a.ReleasePhaseID and\n     bugid in (select BugID from BugHistory where [status]='Closed')) as Closedbugs,\n     (Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and  \n     ReleasePhaseID=a.ReleasePhaseID and\n     bugid in (select BugID from BugHistory where [status]='Deffered')) as Defferedbugs,\n     (Select  COUNT(1) from Bugs where ProjectId=a.ProjectId and  \n      ReleasePhaseID=a.ReleasePhaseID and\n      bugid in (select BugID from BugHistory where [status]='Not a Bug')) as NotaBug\n      from Bugs a\n      inner join Projects p on p.ProjectId=a.ProjectId\n      inner join ReleasePhase Rp on rp.ReleasePhaseID=a.ReleasePhaseID\n      where a.ProjectId=@ProjectID and a.ReleasePhaseID=@ReleasePhaseID\n     end\n</code></pre>\n\n<p>How do I do this?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":2627,"score":2,"question_id":6466588,"title":"Web grid MVC 3- If syntax for checking a condition","body":"<p>I have a syntax error here, Could any one point out what is this please?</p>\n\n<p>I have ViewBag.IsAdmin from the Controller</p>\n\n<pre><code>//code- I am writing this in a view-webgrid\ngrid.Column(format : (item) =&gt; {\n                                 if(ViewBag.isAdmin)\n                                  {\n\n                                          Html.ActionLink(\"Edit\", \"EditSingleAbsence\",\"Absence\", new { AbsenceId = item.id }, null);\n                                  }\n                               }\n          )    \n/code ended\n</code></pre>\n\n<p>It compalines with this error:</p>\n\n<pre><code>  CS1502: The best overloaded method match for 'System.Web.Helpers.WebGrid.Column(string, string, System.Func&lt;dynamic,object&gt;, string, bool)' has some invalid arguments\n</code></pre>\n\n<p>I have found answer from here</p>\n\n<p><a href=\"http://forums.asp.net/p/1669919/4371225.aspx/1?WebGrid%20conditional%20content\" rel=\"nofollow\">Here</a>\n<strong>Solution</strong></p>\n\n<p>No Need to use if condition.. This is so cool..</p>\n\n<pre><code>grid.Column(format:(item) =&gt; ViewBag.isAdmin ? Html.ActionLink(\"Edit\", \"EditSingleAbsence\", \"Absence\", new { AbsenceId = item.id }, null) : Html.Raw(\"\")) \n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","url-rewriting","url-rewrite-module"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12728139,"title":"When to use routes vs. rewrite rules?","body":"<p>I'm trying to debug a problem with routing and I've just realized that MVC routes do something extremely similar to url rewriting but I don't have a good understanding of which situations call for routing and which call for url rewriting.  Can someone please explain where these two technologies differ and for which situations each is appropriate?</p>\n"},{"tags":["c#","asp.net-mvc-3","banking"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":2,"view_count":69,"score":-1,"question_id":12728177,"title":"How to implement a bank account access for a web site in MVC using c#","body":"<p>I have created a website using C# and MVC3. I would like to add the facility to make credit card payments to a bank account using my site and I am unsure of how to do this. Is there a plugin that will do this like paypal for eg or is it better to write the code myself?</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","ef-model-first"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12724088,"title":"How to check unique constraint using EF model first approach?","body":"<p>I'm developing website using MVC3 using <strong>model first approach</strong>.</p>\n\n<p>I have a field in my \"Employee\" model that is \"username\". <strong>And this field is neither a unique field nor foreign key</strong>. my application requirement is <code>username should be unique, and if user enters duplicate value then it show error message</code>. </p>\n\n<p><strong>For my mvc project, i created entity framework as a class library and added its reference in the mvc project for accessing model classes and all this related to entity framework i created for my website.</strong> </p>\n\n<p><strong>How to do this in model itself using EF model first approach ?</strong></p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":102,"score":3,"question_id":12727285,"title":"MVC SelectList combining multiple columns in text field","body":"<p>How would I generate a select list, where the text field, is made up of two or more text columns, eg: Where I have a Description and Rate field in my database, I want to combine these to show:</p>\n\n<pre><code>Large--£200\nMedium--£150\nSmall--£100\n</code></pre>\n\n<p>Controller code is:</p>\n\n<pre><code> var stands = db.Stands.Where(s =&gt; s.ExhibitorID == null).ToList();\n ViewBag.StandID = new SelectList(stands,\"StandID\", \"Description\" + \"-- £\" + \"Rate\");\n</code></pre>\n\n<p>...and my view is (currently):</p>\n\n<pre><code>    &lt;div class=\"editor-field\"&gt; \n        @Html.DropDownList(\"StandID\", \"--Select--\") \n    &lt;/div&gt; \n</code></pre>\n\n<p>...but the \"Description\" + \"-- £\" + \"Rate\"); won't run:</p>\n\n<blockquote>\n  <p>DataBinding:\n  'System.Data.Entity.DynamicProxies.Stand_63F8C9F623B3C0E57D3008A57081AFCD9C39E1A6B79B0380B60840F1EFAE9DB4'\n  does not contain a property with the name 'Description--£Rate'.</p>\n</blockquote>\n\n<p>Thanks for any help,</p>\n\n<p>Mark</p>\n"},{"tags":["asp.net-mvc-3","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":295,"score":0,"question_id":12559404,"title":"How can i achieve this in Kendo MVC Grid?","body":"<p>I was just using Kendo UI Hierarchy Grid in my MVC3 project. The hierarchy is about 2 levels. I need to customize the 2nd level hierarchy with my own custom actionlink for adding the details.</p>\n\n<p>The flow of execution is something simple. The Kendo Grid will populate with default records. If the user is selecting to view inner detail of any of the records it should show another hierarchy grid with actionlink for adding new record.</p>\n\n<p>Here is my child grid code:</p>\n\n<pre><code>&lt;script id=\"pordersTemplate\" type=\"text/kendo-tmpl\"&gt;\n\n@Html.ActionLink(\"Create PoDetails\", \"Create\", \"PoDetails\", new { id = \"#=Id#\" }, null)   \n // Here i need to get the current selected ID to use it on the create page.\n\n    @(Html.Kendo().Grid&lt;Models&gt;()\n        .Name(\"PoDetails_#=Id#\")\n        .Columns(columns =&gt;\n        {\n\n            columns.Bound(o =&gt; o.Copies).Width(140).ClientTemplate(Html.ActionLink(\"\\\\#=Copies\\\\#\", \"Edit\", \"PoDetails\", new { Id = \"id\" }, null).ToHtmlString().Replace(\"id\", \"\\\\#=Id\\\\#\"));\n            columns.Bound(o =&gt; o.Title).Width(150);\n            columns.Bound(o =&gt; o.UnitPrice).Width(200);\n            columns.Bound(o =&gt; o.Account).Width(200);\n            columns.Bound(o =&gt; o.Status).Width(200);\n            columns.Command(command =&gt; command.Destroy()).Width(110).Title(\"Action\");\n        })\n\n        .DataSource(dataSource =&gt; dataSource\n        .Ajax()\n        .Read(read =&gt; read.Action(\"HierarchyBinding_PoDetails\", \"Porders\", new { PoId = \"#=Id#\" }))\n        .Batch(false)\n        .ServerOperation(true)\n        .Events(events =&gt; events.Error(\"error_handler\"))\n        .Model(model =&gt; model.Id(p =&gt; p.Id))\n        .Destroy(\"Delete\", \"PoDetails\")\n        )\n        .Pageable()\n        .Sortable()\n        .Groupable()\n        .Filterable()\n        .ToClientTemplate()\n)\n</code></pre>\n\n<p></p>\n\n<p>Plase tell me some suggestions to add this actionlink with the grid.</p>\n\n<p>Thanks,</p>\n"},{"tags":["asp.net","asp.net-mvc-3","web-config","gac","assembly-resolution"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":822,"score":3,"question_id":9593591,"title":"Bin deployed DLLs priority over GAC'd DLL's for Web app?","body":"<p>I am having a problem where an older GAC'd assembly is being used instead of a newer version assembly in the bin.  </p>\n\n<p>Server:</p>\n\n<pre><code>Assembly version: ASP.NET MVC 3 RC 1 (3.0.11029.0)\nFull name: System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\nCode base: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Web.Mvc/v4.0_3.0.0.0__31bf3856ad364e35/System.Web.Mvc.dll\nDeployment: GAC-deployed \n</code></pre>\n\n<p>Development machine:</p>\n\n<pre><code>Assembly version: Unknown version (3.0.20105.0)\nFull name: System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\nCode base: file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Web.Mvc/v4.0_3.0.0.0__31bf3856ad364e35/System.Web.Mvc.dll\nDeployment: GAC-deployed \n</code></pre>\n\n<p>The newer RTM version (3.0.20105.0) is in the bin directory of the application.  However, the application is using the one in the GAC instead of the local bin.  My experience from windows applications is the local bin deployed DLL always takes precedence because the GAC is checked only if the DLL isn't found in the same directory as the application.  This convention appears to not be the case for a web application.</p>\n\n<p>How can I force it to use my newer version bin deployed DLL (3.0.20105.0)?</p>\n\n<p>Edit:\nI actually did try a binding redirect like so:</p>\n\n<pre><code>&lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n&lt;bindingRedirect oldVersion=\"3.0.11029.0\" newVersion=\"3.0.20105.0\" /&gt;\n</code></pre>\n\n<p>I tried several variations on the oldversion such as <code>0.0.0.0-4.0.0.0</code>.  In all my attempts usually it either loaded the older version, or gave me this exception message:</p>\n\n<pre><code>Could not load file or assembly 'System.Web.Mvc' or one of its dependencies. \nThe located assembly's manifest definition does not match the assembly reference. \n</code></pre>\n\n<p>The binding log didn't have any errors except this was last two lines:</p>\n\n<pre><code>WRN: Comparing the assembly name resulted in the mismatch: Build Number\nERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated.\n</code></pre>\n"},{"tags":["database","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12644710,"title":"Filling a List in a Model from a database table","body":"<p>Subject Models</p>\n\n<pre><code>  public class Subject : TObject\n  {\n     piblic string SubjectID   {get; set; } \n     public string FirstName   {get; set; }\n     public string LastName    {get; set; }\n     public bool   IsT         {get; set; }\n     public DateTime EntryDate {get; set; }\n     public List&lt;Address&gt; Addresses  {get; set; }\n  }\n</code></pre>\n\n<p>Model for List Addresses</p>\n\n<pre><code>  public class Addresses : TObject\n  {\n     public string SubjectID      {get; set; }\n     public string Street1        {get; set; }\n     public string City           {get; set; }\n     public string State          {get; set; }\n     public string Zip            {get; set; }\n     public string Country        {get; set; }\n  }\n</code></pre>\n\n<p>Can I read a database table into the Subject Model that contains everything except for the LIST, then read the second table into Addresses model, and then do a .add of the model to the LIST in the Subject Model? Basicly I need to fill each element in the Model Subject from the database.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","caching","localization","outputcache"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":99,"score":0,"question_id":12653343,"title":"OutputCache not let to change site language","body":"<p>I want to use OutputCache to open pages quickly.</p>\n\n<p>I wrote in controller:</p>\n\n<pre><code>public class HomeController : Controller\n{\n[OutputCache(Duration=3600,VaryByParam=\"none\", VaryByCustom=\"lang\")]\npublic ActionResult Index()\n{\n   //........\n }\n\npublic ActionResult ChangeCulture( string lang, string returnUrl )\n{\n  Session[\"Culture\"] = new CultureInfo( lang );\n  return Redirect( returnUrl );\n}\n}\n</code></pre>\n\n<p>In Layout.cshtml:</p>\n\n<pre><code>&lt;a href=\"@Url.Action( \"ChangeCulture\", \"Home\", new { lang = \"en\", returnUrl = this.Request.RawUrl } )\"&gt;Eng&lt;/a&gt;\n&lt;a href=\"@Url.Action( \"ChangeCulture\", \"Home\", new { lang = \"az\", returnUrl = this.Request.RawUrl } )\"&gt;Az&lt;/a&gt;\n</code></pre>\n\n<p>In Global.asax:</p>\n\n<pre><code>protected void Application_AcquireRequestState( object sender, EventArgs e )\n{\n//It's important to check whether session object is ready\nif ( HttpContext.Current.Session != null )\n{\nCultureInfo ci = ( CultureInfo )this.Session[\"Culture\"];\n\n//Checking first if there is no value in session and set default language this can happen for first user's request\nif ( ci == null )\n{\n//Sets default culture to english invariant\nstring langName = \"az\";\n\n//Try to get values from Accept lang HTTP header\nif ( HttpContext.Current.Request.UserLanguages != null &amp;&amp;\nHttpContext.Current.Request.UserLanguages.Length != 0 )\n{\n//Gets accepted list \nlangName = HttpContext.Current.Request.UserLanguages[0].Substring( 0, 2 );\n}\nci = new CultureInfo( langName );\nthis.Session[\"Culture\"] = ci;\n}\n//Finally setting culture for each request\nThread.CurrentThread.CurrentUICulture = ci;\nThread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture( ci.Name );\n}\n}\n\npublic override string GetVaryByCustomString( HttpContext context, string value )\n{\nif ( value.ToLower() == \"lang\" )\n{\nreturn Thread.CurrentThread.CurrentUICulture.Name;\n}\nreturn base.GetVaryByCustomString( context, value );\n}\n</code></pre>\n\n<p>But I cannot change site language. For example, I switch language to English, It changes, but then want to return Azerbaijan language, it did not changes. What is my mistake?  (Sorry for bad English)</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12726394,"title":"Alternate way for ajax?","body":"<p>I am working with MVC 3. On select of dropdown I have a jquery ajax method which returns a partial view.</p>\n\n<pre><code>$.ajax({\n    url: '/Date/GetNextData',\n    type: 'GET',\n    async: false,\n    data: { ID: dataID },\n    success: function (result) {\n        $('followup').html(result);\n    }\n});\n</code></pre>\n\n<p>Is there any alternate way to do this without using ajax?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["css","asp.net-mvc-3","visual-studio-2010","html5","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12726248,"title":"Aligning a div element with content vertically centered irrespective of the resolution","body":"<p>I have an application in which i'm troubling with the div elements.</p>\n\n<p>I have div with the content, which contains many div's,span and some img tags.</p>\n\n<p>I need to vertically center the content of the div element irrespective of the screen resolution and the browser.</p>\n\n<p>I've tried like this:</p>\n\n<pre><code>&lt;div style=\"padding-top: 4%;position:fixed;height:2%;&gt;\nmy content\n&lt;/div&gt;\n</code></pre>\n\n<p>This works perfectly in all my browsers(FF,IE,CHROME,SAFARI).</p>\n\n<p>However, this is not working in my friend pc, whose monitor is not a wide screen monitor.</p>\n\n<p>please suggest me ideal css to work with any kind of resolutions.</p>\n\n<p>EDIT:<code>my content</code> contains divs some are aligned horizontally and some of them are next to each other. </p>\n\n<p>Thanks,</p>\n"},{"tags":["asp.net-mvc-3","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":531,"score":1,"question_id":5278438,"title":"Making Asynchronous calls in ASP.Net MVC 3","body":"<p>I'm using $.ajax asynchronously to send some json to a controller marked with [HttpPost], like this: </p>\n\n<pre><code> $.ajax({\n            url:          location.href,\n            type:        'post',\n            contentType: 'application/json',\n            dataType:    'json',\n            data:        theJson,\n            async:       true,\n        });\n</code></pre>\n\n<p>This works fine, but the method expects an ActionResult, I guess with a new view. But I don't want that - I just want to do a little update on the server without updating the page.</p>\n\n<p>Is there any way to set up a method on the server to do the update, independent of the view? </p>\n"},{"tags":["asp.net-mvc-3","jquery-ui","jqgrid-asp.net","subgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":274,"score":0,"question_id":8539544,"title":"Hide subgrid header in jqgrid","body":"<p>I have inplemented a JQGrid alog with a subgrid.</p>\n\n<p>I have a requirement of hiding only the subgrid headers(the outer main grid headers should still be visible).</p>\n\n<p>I tried using the following code  $(\".ui-jqgrid-hdiv\", \"#gbox_\" + subgrid_id).hide() on subGridRowExpanded ,  which did not solve the problem.</p>\n\n<p>Any help on this will be deeply appreciated.</p>\n"},{"tags":["c#","asp.net-mvc-3","memcached","enyim.caching"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12726406,"title":"Memcache - Error handling or server not found handler","body":"<p>I'm having the issue with memcache on production server.  I have two severs. One for website. Another one for memcahe server.  From website's server, I can ping to memcahe's server sometime. In that condition, everything works perfectly.</p>\n\n<p>But When the ping is failed, the website is being hanging forever.  So, I wonder If I can add handler to memcahe server. The example code of eniym memcache is as below - </p>\n\n<pre><code> public TemplatePageModel Get(string key)\n    {\n\n        var result = cacheService.Get&lt;TemplatePageModel&gt;(string.Format(\"{0}_{1}_{2}\", \n            ConfigHelper.ServerEnvironment, \n            ConfigHelper.CurrentBrand, \n            key));\n\n        if (result == null)\n        {\n            //PcPage pcPage = db.PcPages.FirstOrDefault(m =&gt; m.Url == key &amp;&amp; m.Status == ConfigHelper.Published);\n            PcPage pcPage = db.PcPages.FirstOrDefault(m =&gt; m.Url == key &amp;&amp; m.Status == (int)PageStatus.Published);\n            if (pcPage != null)\n            {\n                PageModel pageModel = ReadPageModelXml(pcPage.TemplateConfiguration);\n                SidebarModel sidebarModel = ReadSidebarModelXml(pcPage.TemplateConfiguration);\n                TemplatePageModel templatePageModel = new TemplatePageModel();\n                templatePageModel.Page = pageModel;\n                templatePageModel.Sidebar = sidebarModel;\n                templatePageModel.PcPage = pcPage;\n                result = templatePageModel;\n\n\n                //store it in the cache, with the key\n                //Store(result, key);\n                cacheService.Store&lt;TemplatePageModel&gt;(result, string.Format(\"{0}_{1}_{2}\", \n                    ConfigHelper.ServerEnvironment, \n                    ConfigHelper.CurrentBrand, \n                    key));\n            }\n\n        }\n\n        return result;\n    }\n</code></pre>\n\n<p>Here is my memcahe server:</p>\n\n<pre><code> public class CacheService : ICacheService\n{\n    IMemcachedClient _memcachedClient;\n    public CacheService(IMemcachedClient memcachedClient)\n    {\n        _memcachedClient = memcachedClient;\n    }\n\n    public T Get&lt;T&gt;(string key)\n    {\n        return _memcachedClient.Get&lt;T&gt;(key);\n    }\n\n    public void Store&lt;T&gt;(T obj, string key)\n    {\n        _memcachedClient.Store(StoreMode.Set, key, obj, new TimeSpan(24, 20, 0));\n    }\n\n    public void Expire(string key)\n    {\n        _memcachedClient.Remove(key);\n    }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","capitalization"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":143,"score":0,"question_id":12712875,"title":"How to capitalize first letter razor","body":"<p>I am new to MVC and have not found a solution for this online.</p>\n\n<p>I have the html as : </p>\n\n<pre><code>@Html.DisplayFor(model =&gt; model.Address1) &lt;br /&gt;\n</code></pre>\n\n<p>I want all the first letter of address1 to be capital letters e.g. Something Road instead of something road.</p>\n\n<p>Now I have a class client and property Address1 and using EF to get the address as follow:</p>\n\n<pre><code> public class MyDBContext : DbContext\n    {\n        public DbSet&lt;Client&gt; Clients { get; set; }\n    }\n</code></pre>\n\n<p>Hope it makes sense.</p>\n"},{"tags":["asp.net-mvc-3","design"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12725574,"title":"Beyond Mac Address: Uniquely Identifying Devices on the Server Side","body":"<p>I'm working on an analytics tool. I would like to be able to reasonably identify unique users (or more likely, unique machines) -- some degree of inaccuracy is okay. I need to support both low-level devices (Android/iOS) and web (JS/Flash), because I'm building the clients in Haxe. (The other caveat of this is that I can't use language-specific APIs.)</p>\n\n<p>Previously, I used the tuple of <code>(ip, mac address)</code> to uniquely identify users. However, in Flash (and Javascript), you don't have access to the mac address. It occurred to me that I should store and manage identity on the server side, perhaps with a GUID. The client would request a GUID (or some sort of ID) from the server, and use that for any subsequent requests from the same device.</p>\n\n<p>However, I'm not sure if a GUID is a good idea; or if I should supplement it with the IP or other information. (I do have access to get the IP from the client side.)</p>\n\n<p>The workflow on the client would be:</p>\n\n<ul>\n<li>Check for a stored unique identifier</li>\n<li>If it exists, send it with all requests</li>\n<li>If it doesn't, make a call to request a unique identifier and store it</li>\n<li>Send the unique identifier with all subsequent calls</li>\n</ul>\n\n<p>Of course, this would only be unique per device, and there may be some way to get a false positive of two users by removing the identifier on the local device.</p>\n\n<p>On the server side, it would be as simple as generating a new GUID and sending it to the user when they request a unique identifier.</p>\n\n<p>Is this a good approach? Is there a better approach?</p>\n"},{"tags":["database","asp.net-mvc-3","architecture","sql-server-2008-r2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12191071,"title":"Implement read only / write only database server architecture","body":"<p>We have an ASP.NET MVC3 Web Application which consists of following:</p>\n\n<ul>\n<li>Website (MVC3)</li>\n<li>Data Access Service (WCF + EF)</li>\n<li>Database Server (SQL Server 2008 R2)</li>\n</ul>\n\n<p>We were suggested to implement an architecture to the following for performance benefits:</p>\n\n<ul>\n<li>Web Server Cluster (Website + Data Access Service)\n<ul>\n<li>It has <strong>Round Robin Load Balancing</strong></li>\n<li>Each server in this cluster has a <strong>Cache</strong> (read-only) database</li>\n<li>We have a set of SPs that we can distinctly divide into two categories - <strong>Read SPs</strong> and <strong>Write SPs</strong></li>\n<li>Each Read SP will connect to <strong>Cache DB</strong> and each Write SP will connect to <strong>Write DB</strong></li>\n</ul></li>\n<li>Database Server(s) with Replication/Mirroring\n<ul>\n<li>This is the <strong>Write DB</strong>.</li>\n<li>Whenever it changes, it propogates <strong>all the changes</strong> to all the <strong>Cache DBs</strong></li>\n<li>In addition to that, it has replication/mirroring implemented so it has backups when it goes down.</li>\n</ul></li>\n</ul>\n\n<p>This is very rough idea and I am not sure it will give our system a performance boost. </p>\n\n<p>The argument in favor of it was <strong>80%</strong> of the times, the operations are read-only. They can be made on <strong>Cache DBs</strong> (since there are configured to be read-only, they are faster). The other <strong>20%</strong> can be made on <strong>Write DBs</strong>.</p>\n\n<p>But, I have following questions:</p>\n\n<ul>\n<li><strong>Read-Only Configuration</strong>: can we actually configure <strong>Cache DBs</strong> to be read-only? Since <strong>Write DB</strong> will need to push changes to them whenever it changes.</li>\n<li><strong>Sync</strong>: with all this complexity over the network, how easy it is to make sure that everything is in sync? \n<strong>Network Latency</strong>: and what about network overheads to keep everything in sync?</li>\n<li><strong>Complexity and Maintenance</strong>: is it really worth the added maintenance overheads and the added complexity to the system?</li>\n</ul>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12724434,"title":"dynamically changing @section in asp.net view","body":"<p>I am working on asp.net MVC 3 application and I have a layout page with a section like this:</p>\n\n<pre><code>   &lt;div class=\"rt-block\"&gt;\n                                &lt;div id=\"rt-mainbody\"&gt;\n                                    @if (IsSectionDefined(\"BodyTitle\"))\n                                    {\n                                        &lt;div class=\"rt-headline\"&gt;\n                                            &lt;h1 class=\"rt-article-title\"&gt;\n                                                @RenderSection(\"BodyTitle\", false)\n                                            &lt;/h1&gt;\n                                        &lt;/div&gt;   \n                                    }\n                                    &lt;div class=\"clear\"&gt;\n                                    &lt;/div&gt;\n                                    &lt;div&gt;\n                                        @RenderBody()\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n</code></pre>\n\n<p>In My View, I am defining the section like this:</p>\n\n<pre><code>@section BodyTitle {\n    &lt;span&gt;Verify&lt;/span&gt; Your Identity\n}\n\npartail view here\n</code></pre>\n\n<p>This View loads one of two partial views depending on link click.</p>\n\n<p>I want that when one partial view is loaded then section has different text where it should have different text when other partial view is loaded. How can I change section contents on change of partial view ? </p>\n\n<p>I tried to move section to partial views but in that case it is not loaded at all. Can't we define section in partial view which is declared in layout view ? </p>\n\n<p>Please suggest</p>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":132,"score":0,"question_id":12723808,"title":"jquery live() appending click events causing multiple clicks","body":"<p>I have some strange behaviour going on with the jQuery ajax functionality in my asp.net MVC3 application.</p>\n\n<p>I have several boxes of data each containing a link to open a popup and change the data in each box. To do this I've added a jquery <code>live()</code> click event to process the data via a jQuery ajax call.  In the \"success\" method of the ajax call, i take the return data and open a UI Dialog popup (a partial view) which contains a list of radio buttons.  I select a different radio button and press 'close' - the close button fires another <code>live()</code> click event, processes that new data via an ajax call which refreshes the data in the box on the main page.</p>\n\n<p>This works perfectly first time.  If you then click to change it again, the popup opens, allows you to select a new value, but this time pressing close on the popup triggers two click events which throws an null error in my MVC controller.  </p>\n\n<p>If you repeat this process it triggers 3 click events, so it's clear that <code>live()</code> is appending these events somewhere.</p>\n\n<p>I've tried using <code>on()</code> and <code>click()</code>, but the page itself is made up of panels loaded in via ajax so I used <code>live()</code> to automatically bind the events.</p>\n\n<p>Here is the code I'm using:</p>\n\n<p>HTML</p>\n\n<pre><code>&lt;p&gt;&lt;!--Data to update goes here--&gt;&lt;/p&gt;\n&lt;a href=\"#\" class=\"adjust\"&gt;Update Data&lt;/a&gt;\n</code></pre>\n\n<p>First Click event calling popup with Partial View</p>\n\n<pre><code>$('a.adjust').live('click', function (e) { \n    var jsonData = getJsonString(n[1]);\n    var url = '@Url.Action(\"ChangeOptions\", \"Search\")';\n    var dialog = $('&lt;div id=\"ModalDialog\" style=\"display:none\"&gt;&lt;/div&gt;').appendTo('body');\n    // load the data via ajax\n    $.ajax({\n        url: url,\n        type: 'POST',\n        cache: false,\n        contentType: \"application/json; charset=utf-8\",\n        data: jsonData,\n        success: function (response) {\n            dialog.html(response);\n            dialog.dialog({\n                bgiframe: true,\n                modal: true\n                }\n            });\n        }\n    });\n    e.preventDefault();\n});\n</code></pre>\n\n<p>Second click event the takes the new info to return updated partial view</p>\n\n<pre><code>$('a#close').live('click', function (event) { \n    var jsonData = getJsonString(n[1]);\n    var url = '@Url.Action(\"GetChangeInfo\", \"Search\")';\n    $.ajax({\n        url: url,\n        type: 'POST',\n        contentType: \"application/json; charset=utf-8\",\n        data: jsonData,\n        success: function (response) {\n            $('#box-' + @column).html(response);  //this refreshes the box on the main page\n        },\n        error: function () {\n        }\n    });\n    $('#ModalDialog').dialog('close');\n    event.preventDefault();\n});\n</code></pre>\n\n<p>Anybody know what might be happening here, and how I could resolve it?</p>\n"},{"tags":["asp.net-mvc-3","validation","jquery-validate","unobtrusive-validation","validationattribute"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":843,"score":1,"question_id":10260248,"title":"Data annotations, unobtrusive validation. Min age, max age","body":"<p>What do I want to achieve:</p>\n\n<ol>\n<li>To show a seperate validation message for failing minimum age check and one for maximum age check</li>\n<li>To store the minimum and maximum age in one area as integers. Not in js/ validator... only in the model. which I hope to change to look at a config file. </li>\n<li>For the validation to work with jquery unobtrusive and server side, and to be in one place against the model (and obv some jquery)</li>\n<li>To be enabled using data annotations</li>\n<li>I wanted to check against DOB as a datetime, not have the user put in there age as an int. If i did I could have used [Min] notation and [Max] notation for age. It wasn't good enough.</li>\n<li>Why didn't I use a range notation. I wanted to fire a different validation message for each min fail and max fail. I looked into this and had no look. I'd also have to pass in the range as a datetime and its static or something so I couldn't have done DateTime.Now.AddYears(-90) for instance.</li>\n</ol>\n\n<p>My problems</p>\n\n<ol>\n<li>I'm a noob at MVC, JQuery validation and the whole MVC architecture!</li>\n<li>What I've come up with works. However, as you can see there is alot repeated code, I'd like to conform to DRY.</li>\n<li><p>My first hack was to pass in the value that i'm checking against into the validation message. I got around this by doing...</p>\n\n<p>[MaximumAgeCheck(90,\"You have to be at most {0} to apply\")]</p></li>\n</ol>\n\n<p>and inside the validation attribute</p>\n\n<pre><code>    private readonly int _min;\n    private readonly string _defaultErrorMessage = \"\";\n    public MinimumAgeCheck(int min, string defaultErrorMessage)\n        : base(defaultErrorMessage)\n    {\n        _min = min;\n        _defaultErrorMessage = defaultErrorMessage.Replace(\"{0}\", _min.ToString());\n    }\n</code></pre>\n\n<p>and I used it for instance like so..</p>\n\n<pre><code>return new ValidationResult(_defaultErrorMessage);\n</code></pre>\n\n<p><strong>I know this isn't the right way to do it, and wondered what is the best way to do this?</strong></p>\n\n<p>Second hack!</p>\n\n<p>I'm passing in two validation parameters which I want to be able to access in the jQuery.validator.addMethod... method.</p>\n\n<p>I tried to access these parameters by doing the following... params.[thevalueiadded], params[0]... etc, I even logged out params into console.log but it never showed me all the params, only the first value as a string!</p>\n\n<p>My work around was to store the javascript variables at the top and load them from the adapters.add.</p>\n\n<p>I'm probabily making little sense so here is the code, that works...I warn you, it is messy!</p>\n\n<p><strong>Model property and data annotation</strong></p>\n\n<pre><code>[Required(ErrorMessage = \"Date of birth required\")]\n        [Display(Name = \"Date of Birth\")]\n        [DisplayFormat(DataFormatString = \"{0:dd/MM/yyyy}\")]\n        [DataType(DataType.DateTime, ErrorMessage = \"Date of birth should be in dd/mm/yyyy format\")]\n        [MinimumAgeCheck(18,\"You have to be at least {0} to apply\")]\n        [MaximumAgeCheck(90,\"You have to be at most {0} to apply\")]\n        public DateTime? DateOfBirth { get; set; }\n</code></pre>\n\n<p><strong>Minimum Age Check and Maximum age check</strong></p>\n\n<p><em>validation attributes</em> </p>\n\n<pre><code>public class MinimumAgeCheck : ValidationAttribute, IClientValidatable\n    {\n        private readonly int _min;\n        private readonly string _defaultErrorMessage = \"\";\n        public MinimumAgeCheck(int min, string defaultErrorMessage)\n            : base(defaultErrorMessage)\n        {\n            _min = min;\n            _defaultErrorMessage = defaultErrorMessage.Replace(\"{0}\", _min.ToString());\n        }\n\n\n        protected override ValidationResult IsValid(object value, ValidationContext validationContext)\n        {\n            DateTime dtV = (DateTime)value;\n            long lTicks = DateTime.Now.Ticks - dtV.Ticks;\n            DateTime dtAge = new DateTime(lTicks);\n\n            if (!(dtAge.Year &gt;= _min &amp;&amp; dtAge.Year &lt;= 30))\n            {\n                return new ValidationResult(_defaultErrorMessage);\n            }\n            return ValidationResult.Success;\n        }\n\n        public override string FormatErrorMessage(string name)\n        {\n            return String.Format(CultureInfo.CurrentUICulture, ErrorMessageString, _min);\n        }\n\n        public IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n        {\n            ModelClientValidationRule mcvrTwo = new ModelClientValidationRule();\n            mcvrTwo.ValidationType = \"checkminimumage\";\n            mcvrTwo.ErrorMessage = _defaultErrorMessage;\n            mcvrTwo.ValidationParameters.Add(\"todaysdate\", DateTime.Now.ToString(\"dd/MM/yyyy\"));\n            mcvrTwo.ValidationParameters.Add(\"lowerage\", _min.ToString());\n\n            return new List&lt;ModelClientValidationRule&gt; { mcvrTwo };\n        }\n    }\n\n\n  public class MaximumAgeCheck : ValidationAttribute, IClientValidatable\n    {\n        private readonly int Max;\n        private readonly string _defaultErrorMessage = \"\";\n        public MaximumAgeCheck(int max, string defaultErrorMessage)\n            : base(defaultErrorMessage)\n        {\n            Max = max;\n            _defaultErrorMessage = defaultErrorMessage.Replace(\"{0}\", Max.ToString());\n        }\n\n\n        protected override ValidationResult IsValid(object value, ValidationContext validationContext)\n        {\n            DateTime dtV = (DateTime)value;\n            long lTicks = DateTime.Now.Ticks - dtV.Ticks;\n            DateTime dtAge = new DateTime(lTicks);\n\n            if (!(dtAge.Year &gt;= Max &amp;&amp; dtAge.Year &lt;= 30))\n            {\n                return new ValidationResult(_defaultErrorMessage);\n            }\n            return ValidationResult.Success;\n        }\n\n        public override string FormatErrorMessage(string name)\n        {\n            return String.Format(CultureInfo.CurrentUICulture, ErrorMessageString,Max);\n        }\n\n        public IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n        {\n            ModelClientValidationRule mcvrTwo = new ModelClientValidationRule();\n            mcvrTwo.ValidationType = \"checkmaximumage\";\n            mcvrTwo.ErrorMessage = _defaultErrorMessage;\n            mcvrTwo.ValidationParameters.Add(\"todaysdate\", DateTime.Now.ToString(\"dd/MM/yyyy\"));\n            mcvrTwo.ValidationParameters.Add(\"upperage\", Max.ToString());\n\n            return new List&lt;ModelClientValidationRule&gt; { mcvrTwo };\n        }\n    }\n</code></pre>\n\n<p><strong>The Jquery</strong></p>\n\n<pre><code>(function ($) {\n\n    var mintodaysDateVal;\n    var maxtodaysDateVal;\n    var lowerageVal;\n    var upperageVal;\n    jQuery.validator.unobtrusive.adapters.add(\"checkminimumage\", ['lowerage', 'todaysdate', 'upperage'], function (options) {\n        options.rules[\"checkminimumage\"] = options.params;\n\n        mintodaysDateVal = options.params.todaysdate;\n        lowerageVal = options.params.lowerage;\n\n        options.messages[\"checkminimumage\"] = options.message;\n    });\n\n\n\n    jQuery.validator.addMethod(\"checkminimumage\", function (value, element, params) {\n\n        var currDate = mintodaysDateVal;\n        var sdoc = currDate.split('/');\n        var dobDate = value;\n        var sdob = dobDate.split('/');\n\n\n\n        //pass year,month,date in new Date object.\n        var vDOB = new Date(sdob[2], sdob[1] - 1, sdob[0]);\n        var vDOC = new Date(sdoc[2], sdoc[1] - 1, sdoc[0]);\n        //getAge user define function to calculate age.\n\n        var vYrs = getAge(vDOB, vDOC);\n        var result = false;\n        if (vYrs &gt;= lowerageVal) { result = true; }\n        return result;\n    });\n\n\n\n    jQuery.validator.unobtrusive.adapters.add(\"checkmaximumage\", ['lowerage', 'todaysdate', 'upperage'], function (options) {\n        options.rules[\"checkmaximumage\"] = options.params;\n\n        maxtodaysDateVal = options.params.todaysdate;\n        upperageVal = options.params.upperage;\n\n        options.messages[\"checkmaximumage\"] = options.message;\n    });\n\n\n\n    jQuery.validator.addMethod(\"checkmaximumage\", function (value, element, params) {\n        var currDate = maxtodaysDateVal;\n        var sdoc = currDate.split('/');\n        var dobDate = value;\n        var sdob = dobDate.split('/');\n\n        var vDOB = new Date(sdob[2], sdob[1] - 1, sdob[0]);\n        var vDOC = new Date(sdoc[2], sdoc[1] - 1, sdoc[0]);\n\n        var vYrs = getAge(vDOB, vDOC);\n        var result = false;\n        if (vYrs &lt;= upperageVal) { result = true; }\n        return result;\n    });\n\n\n    function getAge(oldDate, currDate) {\n        return currDate.getFullYear() - oldDate.getFullYear();\n    }\n} (jQuery));\n</code></pre>\n\n<p>I hope this makes sense, I've read it over and its quite garbled... so i'll be happy to answer any comments.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-membership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12723294,"title":"How to limit the access to a Controller or a folder in MVC?","body":"<p>I use Asp.Net MVC 3, C# together with ApplicationServices Membership (the standard way suing MS Sql 2008 db).</p>\n\n<p>My folder structure is</p>\n\n<pre><code>CONTROLLERS\n-- PageAController.cs\n-- ADMIN\n   -- PageBController.cs\n</code></pre>\n\n<p>I have a Users some with Role \"AdminRole\", some with no rules associated (anonymouse).</p>\n\n<p>I would like <strong>DENY</strong> access to the specific Controller and show a LOGIN page for <code>PageAController.cs</code> and to all Controllers within folder <code>ADMIN</code> for User that HAVE NOT the \"AdminRole\" associated.</p>\n\n<ul>\n<li>What it the way to go?</li>\n<li>Do I need setup Web.Config... how?</li>\n</ul>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12723392,"title":"How to assign ajax parameter which is returned from controller method to a string at the View in MVC3?","body":"<p>Hello everyone how can I assign a parameter which is returned from controller method to a string at the View ? Here is my controller:</p>\n\n<pre><code>public string corporate()\n        {\n            var management = \"1\";\n\n            return (management);\n        }\n</code></pre>\n\n<p>And my view:</p>\n\n<pre><code>@{\nstring parameter=\"\"+ @:&lt;div id=\"ajaxvalue\"&gt;&lt;/div&gt;;\n}\n</code></pre>\n\n<p>But I can't assign the parameter how can I do ? </p>\n"},{"tags":["windows","asp.net-mvc-3",".net-4.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12723349,"title":"do.net 4.0 and asp.net mvc 3 work in Windows Server 2012 without breaking?","body":"<p>We are planning to buy Windows Server 2012 server. And we have some web applications and windows services that runs on .net 4.0 and asp.net mvc 3.0. Web applications now hosted under iis 6.0. </p>\n\n<p>When I migrate my projects to server 2012, what kind of problems I'll get and could they be solved?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12721683,"title":"How do I implement multiform validation in ASP.NET MVC 3 Razor?","body":"<p>I have 3 tables: </p>\n\n<blockquote>\n  <p>TableMaster &lt;-- TableDetails1 (One-Many relation)<br/>\n  TableMaster &lt;-- TableDetails2</p>\n</blockquote>\n\n<p>How can I implement this just on a single page using ASP.NET MVC 3 Razor?<br/>\nI think I should use multiform and validation for each form, but I don't know how to do it.</p>\n"},{"tags":["asp.net-mvc-3","telerik-grid"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12723102,"title":"How can I add multiple data binding in telerik grid?","body":"<p>I want working on telerik grid in asp.net mvc3. I have to bind in telerik grid by button click.\nOne case is when page load and another case is where I click on button grid must load my data.\ndefault data binding method is </p>\n\n<pre><code>.DataBinding(dataBinding =&gt; dataBinding.Ajax().Select(\"OrderList\", \"Order\", Model))\n</code></pre>\n\n<p>and on my button click I have to bind data from method \"OnDateOrderList\"\nSo code will be</p>\n\n<pre><code>.DataBinding(dataBinding =&gt; dataBinding.Ajax().Select(\"OnDateOrderList\", \"Order\", Model))\n</code></pre>\n\n<p>So how can I do this in telerik grid? Please advice me.</p>\n"},{"tags":["asp.net-mvc-3","session","asp.net-mvc-4","asp.net-web-api","web-api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":70,"score":-1,"question_id":12722463,"title":"How to retreive and set session values in web api controller","body":"<p>I have a web api controller.</p>\n\n<p>I am having problem in receiving the set session values in the apllication.It is giving as null all time.</p>\n\n<p>Is there any way to use session variables in web api controller?</p>\n"},{"tags":["asp.net-mvc-3","c#-4.0","authentication","iis-7.5"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12459753,"title":"Alternative authentication if certificate authentication fails (IIS,C#,ASP.NET MVC3)","body":"<p>Our project(web application <code>C# ASP.NET MVC3</code>) is hosted on <code>IIS 7.5</code> and we use certificate authentication. So we have SSL-require configured <code>IIS</code>. </p>\n\n<p>Now we have a business task to allow some users to use our system. And there is no way to provide client certificates for them. In that case we need to use some additional authentication model (user-password or ntdomain based).</p>\n\n<p>I don't know how to realize such model:</p>\n\n<ol>\n<li>User gets on our project url;</li>\n<li>If he has valid client certificate - we let him iteract with our application; </li>\n<li>If he hasn't cert we show him a login form with \"user-password\";</li>\n</ol>\n\n<p>If we use SSL-required configured <code>IIS</code> users would not be able to iteract with application without valid certificate at all right? And how to authenticate with certificate if <code>IIS</code> is configured with SSL-Accept?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":140,"score":0,"question_id":12721278,"title":"Passing Checkbox selected value to modal popup","body":"<p>I need to send email to multiple users based on checkboxs selected.</p>\n\n<p>In Controller: </p>\n\n<pre><code> [HttpGet]\n        public ActionResult ChkBxSendMail(int[] check)\n        {\n            return View();\n        }\n\n    [HttpPost]\n    public ActionResult ChkBxSendMail(int[] check, Profile profile, mail email)\n    {\n        foreach (var item in check)\n        {\n            var dbprofile = db.Profile.Single(p =&gt; p.ProfileId == item);\n            string Emailid = dbprofile.EmailId;\n\n            //var mailid = from p in db.Profile where p.ProfileId == id select p.EmailId;\n\n            MailMessage msg = new MailMessage();\n            MailAddress fromAddress = new MailAddress(\"xxxx\");\n            msg.From = fromAddress;\n            msg.To.Add(Emailid);\n            msg.Subject = email.Subject;\n            msg.Body = email.Body;\n            msg.Priority = MailPriority.High;\n\n            SmtpClient client = new SmtpClient(\"smtp.gmail.com\", 587);\n            client.EnableSsl = true;\n            client.DeliveryMethod = SmtpDeliveryMethod.Network;\n            client.Credentials = new NetworkCredential(\"xxxxxx\", \"xxxx\");\n            client.Send(msg);\n        }\n        return RedirectToAction(\"Profiles\", \"profile\");\n    }\n</code></pre>\n\n<p>In View:</p>\n\n<p>\"input type=\"checkbox\" name=\"check\" value=\"&lt;%: item.ProfileId %>\" /> \"\nfor a table..</p>\n\n<p><strong>Problem</strong><br>\n   Unable to pass check box selected  value to action result.</p>\n"},{"tags":["json","asp.net-mvc-3","stringify"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":12700258,"title":"Formcollection cannot process JSON with \"=\"","body":"<p>When I try to do something like this:</p>\n\n<pre><code>$.post('@Url.Action(\"PostComment\")', {\"Id\":32,\"Title\":\"=\",\"Desc\":\"=\",}, function (data) {\n    ....\n}\n</code></pre>\n\n<p>My controller receives this value in the FormCollection:</p>\n\n<pre><code>public ActionResult PostComment(FormCollection comment) {\n    ....\n}\n</code></pre>\n\n<p>Strangelly the value looks like: </p>\n\n<pre><code>\",\"Desc\":\"=\"}\n</code></pre>\n\n<p>(The value is made with: JSON.stringify( { Id: 32, Title: \"=\", Desc: \"=\" })</p>\n\n<p>However, when the characters are other than \"=\" the object is received correctly.</p>\n\n<p>How can I send a JSON object with this special character? Seems like MVC3 cannot process those values...</p>\n"},{"tags":["json","asp.net-mvc-3","jqgrid","export-to-excel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":134,"score":0,"question_id":12720131,"title":"how to convert a jqgrid data to excel","body":"<p>Hi in my <code>MVC3(Razor)</code> application am using <code>Jqgrid</code> and <code>JSON</code> as its input.\nI want to <code>export all the data into excel</code>.\nIs there any method to <code>export jqgrid to excel</code> or <code>export JSON to excel</code>?\nIf any body knows please share.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","rest"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":37,"score":3,"question_id":12719733,"title":"Looking for authentication/impersonation strategies for a RESTful API","body":"<p>I've got a requirement to allow impersonation (\"act as\") in my API.  So a user with the appropriate permission can exercise the API as another user.  I'm wondering if there are some specific strategies employed in this space?</p>\n\n<p>I can create an endpoint to begin and end the impersonation.  Beginning the impersonation might involve getting a user and their permissions and loading them into memory for the current request, easy enough.  What about subsequent requests?  Is it bad practice to add an HTTP header indicating a \"Impersonated-User\"? If that header exists, use it to do auth on subsequent requests?  What about using a cookie with that UserId? Or additional information?</p>\n\n<p>Is there added benefit (assuming a .NET impl) to assigning the impersonated users to the Thread.CurrentPrincipal? The current permission and role implementation is custom, essentially using a bit array (although this is on the table for change in the future).</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12720721,"title":"How to translate validation messages in asp.net mvc?","body":"<p>There is a form with some input fields. Information in those field is validated by </p>\n\n<pre><code>    &lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>The question is: how to translate messages to other language ?</p>\n"},{"tags":["jquery","json","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12716903,"title":"ASP.NET MVC 3 - Json result behavior inconsistent","body":"<p>I am having inconsistent behavior with an Ajax call.</p>\n\n<p>Controller...</p>\n\n<pre><code>public JsonResult checkWwid(string wwid)\n    {\n        EMPLOYEE employee = db.EMPLOYEES.SingleOrDefault(e =&gt; e.ID == wwid.ToUpper());\n        if (employee != null)\n        {\n            return Json(employee, JsonRequestBehavior.AllowGet);\n        }\n\n        employee = new EMPLOYEE();\n        employee.ID = \"Unknown\";\n        employee.NAME = \"Unknown\";\n        employee.ORGANIZATION_ID = \"Unknown\";\n        employee.WORK_SITE_ID = \"Unknown\";\n\n        return Json(employee, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p>When a user enters an employee ID that isn't recognized, I return an employee object that has all values of \"Unknown\". This works fine. However, when the employee ID entered matches a result in the database, for some reason, the \"else\" condition does not get reached--despite the fact the an employee Json object is successfully being returned to the view.</p>\n\n<p>View...</p>\n\n<pre><code>$('#Wwid').change(function () {\n\n    $(\"#wwid_alert\").hide();\n\n    var selectedWwid = $(this).val();\n\n    $.getJSON('@Url.Action(\"checkWwid\")', { wwid: selectedWwid }, function (employee) {\n        alert(employee.NAME);\n\n        if (employee.ID == 'Unknown') {\n            alert(employee.NAME);\n            $(\"#wwid_alert\").show();\n            $(\"#wwid_alert\").text(\"This WWID is not in the database; you will not be able to sucessfully submit this form.\");\n\n        } else { // This is not working even though I am getting a JSON result.\n\n            alert(employee.NAME);\n            $(\"#wwid_alert\").show();\n            $(\"#wwid_alert\").text(employee.NAME);\n        }\n\n    });\n\n});\n</code></pre>\n\n<p>Through debugging, I know the Json result is being returned to the View. I have used this same algorithm in another application (that uses the exact same database), and that works fine. I am at a loss for how to solve this. Any suggestions or recommendations would be valued greatly. Thank you.</p>\n"},{"tags":["asp.net-mvc-3","azure","azure-web-roles","servicebus","azureservicebus"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":238,"score":1,"question_id":12602546,"title":"Azure Service Bus - Two Way Communication Performance Challenge","body":"<p>I need to establish a two-way communication between a Publisher and a Subscriber. This is to facilitate a front-end MVC3 application defining a Subscription with a Correlation Filter, and then placing a message onto a Topic. Finally, the MVC3 controller calls BeginReceive() on the SubscriptionClient, and awaits the response.</p>\n\n<p>The issue seems to be the creation and deletion of these Subscription objects. The overhead is enormous, and it slows the application to a crawl. This is not to mention the various limitations to work around, such as no more than 2000 Subscriptions on a Topic.</p>\n\n<p>What is the best practice for establishing this kind of two-way communication between a Publisher and Subscriber? We want the MVC3 app to publish a message and then wait for a response to that exact message (via the CorrelationId property and a CorrelationFilter). We already cache the NamespaceManager and MessagingFactory, as those are also prohibitively expensive, resource-wise, and also because we were advised that Service Bus uses an explicit provisioning model, where we are expected to pre-create most of these things during role startup.</p>\n\n<p>So, this leaves us with the challenge of correlating request to response, and having this tremendous overhead of the creation and deletion of Subscriptions. What better practice exists? Should we keep a cache of SubscriptionClients, and swap the Filter each time? What does everyone else do? I need to have a request throughput on the order of 5 to 10 thousand MVC3 requests per second through the Web Role cluster. We are already using AsyncController and employing the asynchronous BeginReceive() on SubscriptionClient. It appears to be the creation and deletion of the Subscriptions by the thousands that is choking the system at this point.</p>\n\n<p><strong>UPDATE1:</strong>\nBased on the great advice provided here, we have updated this solution to keep a cache of SubscriptionClient objects on each web role instance. Additionally, we have migrated to a MessageSession oriented approach.</p>\n\n<p>However, this is still not scaling. It seems that AcceptMessageSession() is a very expensive operation. Should MessageSession objects also be cached and re-used? Does each open MessageSession object consume a connection to the Service Bus? If so, is this counted against the Subscription's concurrent connection quota?</p>\n\n<p>Many thanks. I think we are getting there. Most of the example code on the web shows: Create Topic(), then CreateSubscription(), then CreateSubscriptionClient(), then BeginReceive() on the client, then teardown of all of the objects. All I can say is if you did this in real life, your server would be crushed, and you would max out on connections in no time.</p>\n\n<p>We need to put thousands of requests per second through this thing, and it is very apparent that these objects must be cached and reused heavily. So, is MessageSession yet another item to cache? I will have fun caching that, because we will have to implement a reference counting mechanism, where only one reference to the MessageSession can be given out at a time, since this is for http request-specific request/response, and we cannot have other subscribers using the MessageSession objects concurrently.</p>\n\n<p><strong>UPDATE2:</strong>\nOK, it is not feasible to cache MessageSession for re-use, because they only live as long as the LockDuration on the Subscription. This is a bummer, because the maximum LockDuration is 5 minutes. These appear to be for pub/sub of short duration, not for long-running distributed processes. It looks like we need to back to polling Azure Tables.</p>\n\n<p><strong>SUMMARY/COMMENTARY</strong>\nWe tried to build on Service Bus because of the scale potential and its durability and delivery semantics. However, it seems that there are situations, high-volume request/response among them, that are not suited to it. The publishing part works great, and having competing consumers on the back-end is great, but having a front-end request wait on a defined, single-consumer response, does not scale well at all, because the MessageSessions take way too long to create via AcceptMessageSession() or BeginAcceptMessageSession(), and because they are not suited to caching.</p>\n\n<p>If someone has an alternative view, I would love to hear it.</p>\n"},{"tags":["asp.net-mvc-3","deployment","web-config","cassette"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12720552,"title":"Error deploying MVC3 - Cassette application on IIS8","body":"<p>Works fine on the local machine, but when deployed this error message pops up:</p>\n\n<pre><code>HTTP Error 500.19 - Internal Server Error\nThe requested page cannot be accessed because the related configuration data for the page is invalid.\n\nDetailed Error Information:\nModule     IIS Web Core\nNotification       BeginRequest\nHandler    Not yet determined\nError Code     0x80070021\nConfig Error       This configuration section cannot be used at this path. This happens when the section is locked at a parent level. Locking is either by default (overrideModeDefault=\"Deny\"), or set explicitly by a location tag with overrideMode=\"Deny\" or the legacy allowOverride=\"false\".\nConfig File    \\\\?\\C:\\inetpub\\foo\\web.config\nRequested URL      http://foo.net:80/\nPhysical Path      C:\\inetpub\\foo\nLogon Method       Not yet determined\nLogon User     Not yet determined\n\nConfig Source:\n   71:     &lt;/modules&gt;\n   72:     &lt;handlers&gt; &lt;--- This part is highlighted on the error page.\n   73:       &lt;add name=\"CassetteHttpHandler\" path=\"cassette.axd\" preCondition=\"integratedMode\" verb=\"*\" allowPathInfo=\"true\" type=\"Cassette.Aspnet.CassetteHttpHandler, Cassette.Aspnet\" /&gt;\n\nMore Information:\nThis error occurs when there is a problem reading the configuration file for the Web server or Web application. In some cases, the event logs may contain more information about what caused this error.\n</code></pre>\n\n<p>Any ideas on what I can do to solve this issue?</p>\n"},{"tags":["asp.net-mvc-3","c#-4.0","razor","orchardcms"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12635440,"title":"Orchard cms in mvc 3 application how to remove unwanted url content","body":"<p>Orchard CMS in MVC3 Application.</p>\n\n<p>How to remove the unwanted \"url\" content?</p>\n\n<p>Example: <a href=\"http://www.xxxxxx.com/\" rel=\"nofollow\">http://www.xxxxxx.com/</a><strong>HotelsOnly/HotelList</strong>/Region?region=2114&amp;total=848</p>\n\n<pre><code> In routes {area,” HotelsOnly”} ,{controller,”HotelList”}  \n</code></pre>\n\n<p>Url How to change or remove this(/HotelsOnly/HotelList)</p>\n\n<p>Example: <a href=\"http://www.xxxxxx.com\" rel=\"nofollow\">http://www.xxxxxx.com</a><strong>/Region</strong>?region=2114&amp;total=848</p>\n\n<p>Explain how to remove? Please show any Example.</p>\n"},{"tags":["json","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12718628,"title":"MVC 3: JSON get request is not fully deserialized","body":"<p>I'm trying to send a GET request, with JSON string in parameters.\nLooks something like this:</p>\n\n<pre><code>var params = { \"Url\": \"http://www.asdf.com\", \"Users\": [{ \"Name\": \"Bob\" }, { \"Name\": \"Bill\"}] };\n</code></pre>\n\n<p>Sending via jQuery's get, query string on a server side is this:</p>\n\n<blockquote>\n  <p>Url=http%3a%2f%2fwww.asdf.com&amp;Users%5b0%5d%5bName%5d=Bob&amp;Users%5b1%5d%5bName%5d=Bill</p>\n</blockquote>\n\n<p>The problem is, the model gets the URL property populated, and it sees 2 items in users array, however, the user names stay null.</p>\n\n<p>Is there a way to fix this ?</p>\n\n<p>Edit:</p>\n\n<p>This is the model:</p>\n\n<pre><code>public class Parameters\n    {\n        public string Url { get; set; }\n        public User[] Users { get; set; }\n    }\n\n    public class User\n    {\n        public string Name { get; set; }\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","entity-framework-4","model-binding"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":159,"score":1,"question_id":12643081,"title":"Edit on Model - complex types not updated properly","body":"<p>I have this two objects - Magazine and Author (M-M relationship):</p>\n\n<pre><code>public partial class MAGAZINE\n    {\n        public MAGAZINE()\n        {\n            this.AUTHORs = new HashSet&lt;AUTHOR&gt;();\n        }\n\n        public long REF_ID { get; set; }\n        public string NOTES { get; set; }\n        public string TITLE { get; set; }\n\n        public virtual REFERENCE REFERENCE { get; set; }\n        public virtual ICollection&lt;AUTHOR&gt; AUTHORs { get; set; }\n    }\n\npublic partial class AUTHOR\n{\n    public AUTHOR()\n    {  \n         this.MAGAZINEs = new HashSet&lt;MAGAZINE&gt;();\n    }\n\n            public long AUTHOR_ID { get; set; }\n            public string FULL_NAME { get; set; }\n\n            public virtual ICollection&lt;MAGAZINE&gt; MAGAZINEs { get; set; }\n        }\n}\n</code></pre>\n\n<p>My problem is that I can't seem to update the number of authors against a magazine e.g. if I have 1 author called \"Smith, P.\" stored already against a magazine, I can add another called \"Jones, D.\", but after the post back to the Edit controller the number of authors still shows 1 - i.e. \"Smith, P.H\".  </p>\n\n<p>Please not that I have successfully model bound the number of authors back to the parent entity (Magazine), it uses a custom model binder to retrieve the authors and bind to the Magazine (I think), but it still doesn't seem to update properly.</p>\n\n<p>My code for updating the model is straight forward - and shows the variable values both before and after:</p>\n\n<pre><code>public ActionResult Edit(long id)\n    {\n        MAGAZINE magazine = db.MAGAZINEs.Find(id);\n        return View(magazine);\n    }\n</code></pre>\n\n<p><em>and here are the variables pre-editing/updating -</em> </p>\n\n<p><img src=\"http://i.stack.imgur.com/SgFyy.png\" alt=\"enter image description here\"></p>\n\n<pre><code>[HttpPost]\npublic ActionResult Edit(MAGAZINE magazine)\n   {\n       if (ModelState.IsValid)\n       {\n           db.Entry(magazine).State = EntityState.Modified;\n           db.SaveChanges();\n           return RedirectToAction(\"Index\");\n       }\n\n       return View(magazine);\n   }\n</code></pre>\n\n<p><em>...and here are the variables after a new author has been added...</em></p>\n\n<p>I am getting suspicious that the author entity is showing, post edit that it is not bound to any magazine and I am guessing this is why it is not being updated back to the magazine entity - but it is perplexing as I am effectively dealing with the same magazine entity - I guess it may be something to do with the custom model binder for the author.</p>\n\n<p>Can anyone help on this matter?</p>\n\n<p>For completeness - I have included my AuthorModelBinder class too - </p>\n\n<pre><code>public class AuthorModelBinder : IModelBinder\n    {\n        public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)\n        {\n            var values = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);\n            if (values != null)\n            {\n                // We have specified asterisk (*) as a token delimiter. So\n                // the ids will be separated by *. For example \"2*3*5\"\n                var ids = values.AttemptedValue.Split('*');\n\n                List&lt;int&gt; validIds = new List&lt;int&gt;();\n                foreach (string id in ids)\n                {\n                    int successInt;\n                    if (int.TryParse(id, out successInt))\n                    {\n                        validIds.Add(successInt);\n                    }\n                    else\n                    {\n                        //Make a new author\n                        AUTHOR author = new AUTHOR();\n                        author.FULL_NAME = id.Replace(\"\\'\", \"\").Trim();\n                        using (RefmanEntities db = new RefmanEntities())\n                        {\n                            db.AUTHORs.Add(author);\n                            db.SaveChanges();\n                            validIds.Add((int)author.AUTHOR_ID);\n                        }\n                    }\n                }\n\n                 //Now that we have the selected ids we could fetch the corresponding\n                 //authors from our datasource\n                var authors = AuthorController.GetAllAuthors().Where(x =&gt; validIds.Contains((int)x.Key)).Select(x =&gt; new AUTHOR\n                {\n                    AUTHOR_ID = x.Key,\n                    FULL_NAME = x.Value\n                }).ToList();\n                return authors;\n            }\n            return Enumerable.Empty&lt;AUTHOR&gt;();\n        }\n    }\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/4uyRu.png\" alt=\"enter image description here\"></p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1037,"score":2,"question_id":7680236,"title":"Changing the form action dynamically with jQuery","body":"<p>I have a form on my page that looks like so:</p>\n\n<pre><code>&lt;form action=\"/home/email\" enctype=\"multipart/form-data\" id=\"email-form\" method=\"post\"&gt;\n// form elements\n&lt;/form&gt;\n</code></pre>\n\n<p>Depending on the page, I would like to dynamically change the attributes of the form with jQuery; specifically the action attribute.  </p>\n\n<pre><code>$('#send-email').click(function () {\n   $('#email-form').attr('action', '@Url.Action(\"emailaccounting\", \"home\")')\n )};\n</code></pre>\n\n<p>The jQuery above successfully renders to:</p>\n\n<pre><code>&lt;form action=\"/home/emailaccounting\" enctype=\"multipart/form-data\" id=\"email-form\" method=\"post\"&gt;\n// form elements\n&lt;/form&gt;\n</code></pre>\n\n<p>So I'm able to alter the form attributes when clicking a link that opens a popup form to send an email.  However, when I submit the form, the action that gets hit is the original - \"email\" not \"emailaccounting\".  </p>\n\n<p>I played around a bit more and on the submit click handler for the email form, I added the following:</p>\n\n<pre><code>  $('.send-email').click(function (e) {\n    // The original form action post will be hit without this...\n    e.preventDefault();\n    $('#email-form').submit();\n  };\n</code></pre>\n\n<p>With the above snippet, the correct action -- \"emailaccounting\" is called.  Why? I don't know...I'm hoping someone can explain that.  But I'm not out of the woods yet - I have an input element to upload a file.  Now when I try to upload a file on the same form that worked previously, I hit submit and it goes to the \"email\" action.  If I do not attempt to do a file upload, it hits the \"emailaccounting\" action.</p>\n\n<ol>\n<li>Why does the e.preventDefault() followed by the submit of the form hit the correct action?</li>\n<li>Why does uploading a file direct it to the original form action; not the one altered by jQuery?</li>\n</ol>\n\n<p>Thanks!</p>\n"},{"tags":[".net","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12718702,"title":".NET OnServerValidate clear form data","body":"<p>I have an aspx which have an ascx control, this has a CustomValidator which uses a \"OnServerValidate\" method.\nWhen the validator returns false, then the page is reloaded and all user form data is lost, however, this only happens the first time, the second and next times when I enter wrong data and press submit, I get the required behavior, that is to have the error message and the user form values preserved after the refresh.<br>\nDoes anyone knows how to avoid this?</p>\n"},{"tags":["asp.net","database","asp.net-mvc-3","inheritance"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12717453,"title":"ASP.NET MVC3 EF model Inheritance Cannot implicitly convert type","body":"<p>I am sure i am just missing some pretty basic here, but i can't seem to figur it out.. maybe because its been a while since i have been on the .NET platform.</p>\n\n<p>Anyway, I have this database structure i the ASP.NET MVC3 framework where i have \"Coruse\", \"Tool\" and \"ToolADL\"(Inheritance from Tool). A \"Course\" can have one-or-more \"Tools\" where one of the \"Tool\"-types is \"ToolADL\".</p>\n\n<p>Models/Course.cs:</p>\n\n<pre><code>public class Course {\n    [Key]\n    public int CourseID { get; set; }\n\n    [Required(ErrorMessage = \"{0} er påkrævet\")]\n    [Display(Name = \"Værktøj\")]\n    public virtual ICollection&lt;Tool&gt; Tools { get; set; }\n}\n</code></pre>\n\n<p>Models/Tool.cs:</p>\n\n<pre><code>public abstract class Tool {\n    public Tool(){\n        Priority = 0;\n    }\n    [Key]\n    public int ToolID { get; set; }\n\n    [Required]\n    public int CourseID { get; set; }\n\n    [Required]\n    public int Priority { get; set; }\n}\n</code></pre>\n\n<p>Models/ToolADL.cs:</p>\n\n<pre><code>public class ToolADL : Tool {\n    [Required]\n    public string Image { get; set; }\n}\n</code></pre>\n\n<p>aaand the Models/ProjectContext:</p>\n\n<pre><code>public class ProjectContext : DbContext {\n    // Course context\n    public DbSet&lt;Course&gt; Courses { get; set; }\n\n    // Tools\n    public DbSet&lt;Tool&gt; Tools { get; set; }\n\n    // ToolADL\n    public DbSet&lt;ToolADL&gt; ToolADLs { get; set; }\n}\n</code></pre>\n\n<p>Now when i try to create the controller and connect to DbContext and the Model to it so the entity framwork can do its magic, I get the following error in the ToolADL controller Details function (and others) where time i use \"find()\":</p>\n\n<p>ToolADLController.Details(int):</p>\n\n<pre><code>private ProjectContext db = new ProjectContext();\npublic ViewResult Details(int id){\n    ToolADL tooladl = db.Tools.Find(id);\n    return View(tooladl);\n}\n</code></pre>\n\n<blockquote>\n  <p>Error 1   Cannot implicitly convert type 'Project.Models.Tool'\n  to 'caREhab_community.Models.ToolADL'. An explicit conversion exists\n  (are you missing a cast?) C:\\Users\\Thor\\Documents\\Visual Studio\n  2010\\Projects\\Project\\Project\\Project\\ToolADLController.cs    29  31  Project</p>\n</blockquote>\n\n<p>(I changed the name of the orginal project to \"Project\")</p>\n\n<p>I simply cannot figur out what I am doing wrong, Is it wrong types, some really basic about Inheritance i left out or something else?</p>\n\n<p>Hope some kind soul can tell me why I am an idiot and can't figure this out :)</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","c#-4.0","asp.net-web-api"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":341,"score":2,"question_id":12593001,"title":"Web API Model Binding with Multipart formdata","body":"<p>Is there a way to be able to get model binding (or whatever) to give out the model from a multipart form data request in <strong>ASP.NET MVC Web API</strong>?</p>\n\n<p>I see various blog posts but either things have changed between the post and actual release or they don't show model binding working.</p>\n\n<p>This is an outdated post: <a href=\"http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2\" rel=\"nofollow\">Sending HTML Form Data</a></p>\n\n<p>and so is this: <a href=\"http://blogs.msdn.com/b/henrikn/archive/2012/03/01/file-upload-and-asp-net-web-api.aspx\" rel=\"nofollow\">Asynchronous File Upload using ASP.NET Web API</a></p>\n\n<p>I found this code (and modified a bit) somewhere which reads the values manually:</p>\n\n<p><strong>Model:</strong></p>\n\n<pre><code>public class TestModel\n{\n    [Required]\n    public byte[] Stream { get; set; }\n\n    [Required]\n    public string MimeType { get; set; }\n}\n</code></pre>\n\n<p><strong>Controller:</strong></p>\n\n<pre><code>    public HttpResponseMessage Post()\n    {\n        if (!Request.Content.IsMimeMultipartContent(\"form-data\"))\n        {\n            throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);\n        }\n\n        IEnumerable&lt;HttpContent&gt; parts = Request.Content.ReadAsMultipartAsync().Result.Contents;\n\n\n        string mimeType;\n        if (!parts.TryGetFormFieldValue(\"mimeType\", out mimeType))\n        {\n            return Request.CreateResponse(HttpStatusCode.BadRequest);\n        }\n\n        var media = parts.ToArray()[1].ReadAsByteArrayAsync().Result;\n\n        // create the model here\n        var model = new TestModel()\n            {\n                MimeType = mimeType,\n                Stream = media\n            };\n        // save the model or do something with it\n        // repository.Save(model)\n\n        return Request.CreateResponse(HttpStatusCode.OK);\n    }\n</code></pre>\n\n<p><strong>Test:</strong></p>\n\n<pre><code>[DeploymentItem(\"test_sound.aac\")]\n[TestMethod]\npublic void CanPostMultiPartData()\n{\n    var content = new MultipartFormDataContent { { new StringContent(\"audio/aac\"),  \"mimeType\"}, new ByteArrayContent(File.ReadAllBytes(\"test_sound.aac\")) };\n\n    this.controller.Request = new HttpRequestMessage {Content = content};\n    var response = this.controller.Post();\n\n    Assert.AreEqual(response.StatusCode, HttpStatusCode.OK);\n}\n</code></pre>\n\n<p>This code is basically fragile, un-maintainable and further, doesn't enforce the model binding or data annotation constraints. </p>\n\n<p>Is there a better way to do this?</p>\n\n<p><strong>Update:</strong> I've seen this <a href=\"http://byterot.blogspot.com/2012/04/aspnet-web-api-series-part-5.html\" rel=\"nofollow\">post</a> and this makes me think - do I have to write a new formatter for every single model that I want to support?</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12717079,"title":"How to use inline template with multiple inputs in MVC Razor view","body":"<p>Inside my view I currently have</p>\n\n<pre><code>@{\n    Func&lt;Website.Security.User[], object&gt; renderUserList = @&lt;text&gt;\n        &lt;div class=\"span4\"&gt;\n            @*&lt;h2&gt;@title&lt;/h2&gt;*@\n            &lt;ul&gt;\n                @foreach (var user in item)\n                {\n                    &lt;li&gt;@user.UserName - &lt;a href=\"/Config/User/Edit/@user.UserName\"&gt;Edit&lt;/a&gt;&lt;/li&gt;\n                }\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/text&gt;;\n}\n@renderUserList(Model.AdminUsers)\n</code></pre>\n\n<p>How can I rework this so that the renderUserList expression can take in a second input for the section title?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12716297,"title":"MVC4 TextBoxFor overwritting model property","body":"<p>Say I have a model:</p>\n\n<pre><code>public MyClass\n{\n    public int Id {get;set;}\n    public string Name {get;set;}\n    public int ContentId {get;set;}\n}\n</code></pre>\n\n<p>Let's assume I access the action of the controller:</p>\n\n<pre><code>[HttpGet]\npublic ActionResult Create(int id)\n{\n    MyClass mc = new MyClass();\n    mc.Id = 49;\n    mc.ContentId = id;\n    mc.Name = \"Sample\";\n    return View(\"Create\", mc);\n}\n</code></pre>\n\n<p>\"Create\" view is strongly-typed with MyClass, and it has helper @Html.TextBoxFor(x => x.Id).</p>\n\n<p>If I call action by invoking MyController/Create?id=15, textbox will show value 15 instead of 49. MVC will ignore my ID property set in action, and use the one from the query.</p>\n\n<p>I find this rather odd considering this behavior is nowhere documented.</p>\n\n<p>Any good comments on this?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","azure","acs"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":285,"score":0,"question_id":11953277,"title":"Windows Azure Role Based authentication (ACS)","body":"<p>I have a Asp.net mvc4 project running on  Windows Azure Cloud already. But so far it hasn't any user management thing. any one can log in(I have a windows live single sign on).\nBut now I need to do the simplest role based authentication.</p>\n\n<p>1.I want to register user roles(administrator,user,content manager)/it can be done manually.\n2.I need to authenticate users based on roles when they log in .</p>\n\n<p>Can any one give me a hint, or link to a clear tutorial or suggest me any idea?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","file-download"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":12713710,"title":"Returning Multiple Files from MVC Action","body":"<p>So I've got an MVC 3 application that has a couple places where a text file gets generated and returned in an action using:</p>\n\n<pre><code>return File(System.Text.Encoding.UTF8.GetBytes(someString),\n                 \"text/plain\", \"Filename.extension\");\n</code></pre>\n\n<p>and this works fabulously. Now i've got a situation where I'm trying to return a pair of files in a similar fashion. On the view, i have an action link like \"Click here to get those 2 files\" and i'd like both files to be downloaded much like the single file is downloaded in the above code snippet.</p>\n\n<p>How can I achieve this? Been searching around quite a bit and haven't even seen this question posed anywhere...</p>\n"},{"tags":["asp.net-mvc-3","c#-4.0","viewmodel"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":98,"score":2,"question_id":12713157,"title":"Creating View Models consisting of objects of other models in MVC3","body":"<p>I have a model and an enumerable of that model that I am putting together into a view model in asp.net mvc3 like so.</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.ComponentModel.DataAnnotations;\n\n\nnamespace FuelPortal.Models.DBModels\n{\n    public class UserDBModel\n    {\n\n        public int userId { get; set; }\n\n        [Required, Display(Name = \"User Name\")]\n        public string userName { get; set; }\n\n        [Required, Display(Name = \"Password\")]        \n        public string password { get; set; }\n\n        [Required, Display(Name = \"First Name\")]\n        public string firstName { get; set; }\n\n        [Required, Display(Name = \"Last Name\")]\n        public string lastName { get; set; }\n\n        [Required, Display(Name = \"Email\")]\n        public string email { get; set; }\n\n        [Display(Name = \"Phone\")]\n        public string phone { get; set; }\n\n        [Display(Name = \"Account Expiration Date(Optional)\")]\n        public DateTime expireDate { get; set; }\n\n        [Display(Name = \"Password Expiration Date\")]\n        public DateTime passwordExpireDate { get; set; }\n\n        [Display(Name = \"Last Date Modified\")]\n        public DateTime DateModified { get; set; }\n\n    }\n}\n\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing FuelPortal.Models.DBModels;\n\nnamespace FuelPortal.Models.ViewModels\n{\n    public class UserMaintenanceViewModel\n    {\n\n        public UserDBModel user = new UserDBModel();\n        public List&lt;UserDBModel&gt; userList = new List&lt;UserDBModel&gt;();\n    }\n}\n</code></pre>\n\n<p>Now I strongly type a view to use the view model.</p>\n\n<pre><code>@model FuelPortal.Models.ViewModels.UserMaintenanceViewModel  \n&lt;div class=\"frmBG\"&gt;\n        @using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = \"wrapperData\" }))\n        {\n\n                &lt;h5&gt;Create New User&lt;/h5&gt; \n                &lt;br /&gt;\n                &lt;table cellpadding=\"2\" cellspacing=\"10\" border=\"0\"&gt;\n                &lt;tr&gt;&lt;td&gt;\n                &lt;div class=\"editor-label\"&gt;\n                    @Html.LabelFor(model =&gt; model.user.userName)\n                &lt;/div&gt;&lt;/td&gt;&lt;td&gt;\n\n                &lt;div class=\"editor-field\"&gt;\n                    @Html.EditorFor(model =&gt; model.user.userName)\n                    @Html.ValidationMessageFor(model =&gt; model.user.userName)\n                &lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;\n\n                &lt;tr&gt;&lt;td&gt;\n                &lt;div class=\"editor-label\"&gt;\n                    @Html.LabelFor(model =&gt; model.user.password)\n                &lt;/div&gt;&lt;/td&gt;&lt;td&gt;\n                &lt;div class=\"editor-field\"&gt;\n                    @Html.PasswordFor(model =&gt; model.user.password)\n                    @Html.ValidationMessageFor(model =&gt; model.user.password)\n                &lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;\n\n                &lt;tr&gt;&lt;td&gt;\n                &lt;div class=\"editor-label\"&gt;\n                    @Html.LabelFor(model =&gt; model.user.firstName)\n                &lt;/div&gt;&lt;/td&gt;&lt;td&gt;\n                &lt;div class=\"editor-field\"&gt;\n                    @Html.EditorFor(model =&gt; model.user.firstName)\n                    @Html.ValidationMessageFor(model =&gt; model.user.firstName)\n                &lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;\n\n                &lt;tr&gt;&lt;td&gt;\n                &lt;div class=\"editor-label\"&gt;\n                    @Html.LabelFor(model =&gt; model.user.lastName)\n                &lt;/div&gt;&lt;/td&gt;&lt;td&gt;\n                &lt;div class=\"editor-field\"&gt;\n                    @Html.EditorFor(model =&gt; model.user.lastName)\n                    @Html.ValidationMessageFor(model =&gt; model.user.lastName)\n                &lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;\n\n                &lt;tr&gt;&lt;td&gt;\n                &lt;div class=\"editor-label\"&gt;\n                    @Html.LabelFor(model =&gt; model.user.email)\n                &lt;/div&gt;&lt;/td&gt;&lt;td&gt;\n                &lt;div class=\"editor-field\"&gt;\n                    @Html.EditorFor(model =&gt; model.user.email)\n                    @Html.ValidationMessageFor(model =&gt; model.user.email)\n                &lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;\n\n                &lt;tr&gt;&lt;td&gt;\n                &lt;div class=\"editor-label\"&gt;\n                    @Html.LabelFor(model =&gt; model.user.phone)\n                &lt;/div&gt;&lt;/td&gt;&lt;td&gt;\n                &lt;div class=\"editor-field\"&gt;\n                    @Html.EditorFor(model =&gt; model.user.phone)\n                    @Html.ValidationMessageFor(model =&gt; model.user.phone)\n                &lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;\n\n                &lt;tr&gt;&lt;td&gt;\n                &lt;div class=\"editor-label\"&gt;\n                    @Html.LabelFor(model =&gt; model.user.expireDate)\n                &lt;/div&gt;&lt;/td&gt;&lt;td&gt;\n                &lt;div class=\"editor-field\"&gt;\n                    @Html.EditorFor(model =&gt; model.user.expireDate)\n                    @Html.ValidationMessageFor(model =&gt; model.user.expireDate)\n                &lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;\n\n                &lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;\n                &lt;p&gt;\n                    &lt;input type=\"submit\" value=\"\" class=\"create\" /&gt;&lt;input type=\"button\" value=\"\" class=\"close_tab\"/&gt;\n                &lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;\n                &lt;/table&gt;\n        }\n    &lt;/div&gt;\n</code></pre>\n\n<p>For some reason on post it does not populate the object within the view model. So when i create a post action all values of (UserMaintenanceViewModel  model) are null. Like so..</p>\n\n<pre><code> [HttpPost]\n        public ActionResult CreateUser(UserMaintenanceViewModel model)\n        {\n            try\n            {\n                /// TODO: Add insert logic here\n                var result = repository.insertNewUser(Session[\"UserId\"].ToString(), model.user.UserName, model.user.Password, model.user.FirstName,\n                                                      model.user.LastName, model.user.Email, model.user.Phone, model.user.ExpireDate);\n                // If result &gt; 0 user insert successful\n</code></pre>\n\n<p>Also, if I switch to getting postback through a (FormCollection form) I see that the names of the html elements are \"user.UserName\" instead of the expected \"UserName\". Any guidance would be greatly appreciated I feel like I should be able to accomplish this.</p>\n\n<p>Thanks so much</p>\n"},{"tags":["asp.net-mvc-3","signalr","signalr-hub"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12651169,"title":"SignalR and large number of groups","body":"<p>I'm using SignalR's latest version and it's great.  However, I've recently hit an interesting scaling issue: it seems that SignalR sends all the client's groups from the client in the query string.  My system requires that a person join numerous groups, which represent all the projects that the user is subscribed to, and receive notifications on any of them.  </p>\n\n<p>this large number of groups (and me using GUIDs for ids) has caused the querystring to reach its maximum size, and SignalR to stop working.  </p>\n\n<p>This is what Fiddler shows in the request webform (using long polling for the Azure bug):</p>\n\n<pre><code>transport   longPolling\nconnectionId    bbed6f35-8379-4be3-ac28-ef3e618382ae\nconnectionData  [{\"name\":\"jethub\"}]\nmessageId   85\ngroups  [\"JetHub.f9f81bcc-8417-46bd-bae5-c4134972601d\",\"JetHub.5139a8de-04c2-48da-9427-39666e52fabd\",\"JetHub.6b12e333-4d22-47c3-8587-7a9ad5026184\",\"JetHub.252ea279-7a71-40e7-b03c-7d63e69f07ab\",\"JetHub.a4843a77-1e6d-4693-b3de-b392ef465410\",\"JetHub.27feb53a-3c2d-4b11-92f7-dbdffb874b25\",\"JetHub.8840dfcf-e6be-4b72-965b-b282a60446e8\",\"JetHub.bf7d3301-6fc0-4499-bee8-fe22f1bc2281\",\"JetHub.655cba0e-7f72-402c-b80b-dcb740546163\",\"JetHub.85d817e2-67a3-4291-b564-5320598339f6\",\"JetHub.e3079263-3f6e-4a54-ad88-0dfc5dd2ce18\",\"JetHub.33f00a67-9b05-4293-8119-4617e2fed9b0\",\"JetHub.6323cfe8-fb81-4716-b553-79b9d72641a5\",\"JetHub.b4359f8a-030a-4ac9-aacd-c05b42163bcc\", ... many more]\n</code></pre>\n\n<p>I know I can increase the querystring size in IIS, but is there a better way to manage groups, or should I try to create my server-side grouping scheme and broadcast to each client separately? can PersistenConnections help in that regard?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net","ajax","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12708205,"title":"javascript in partial view mvc 3","body":"<p>I have partial view named MyPView contains a javascript </p>\n\n<pre><code>function loadMe(){\nalert('Done');\n} \n</code></pre>\n\n<p>and a _layout with a </p>\n\n<pre><code>ajax.ActionLink(\"MyTrouble\",\"Controller\",\"MyPView\",\n                 new ajaxOption{ OnSuccess=\"loadMe\"})\n</code></pre>\n\n<p>. I want to run loadMe function when the partial loads but, it doesn't.</p>\n\n<p>I know that I can put loadMe function in _layout but I dont want to do that, is there any other way to run that function?</p>\n\n<p>Thank you all, and specially Youm who answer this. ;)</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","routes","asp.net-mvc-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":70,"score":2,"question_id":12715667,"title":"Set default action (instead of index) for controller in ASP.NET MVC 3","body":"<p>I have a controller called <code>Dashboard</code> with 3 actions: <code>Summary</code>, <code>Details</code>, and <code>Status</code>, none of which take an ID or any other parameters. I want the URL <code>/Dashboard</code> to route to the <code>Summary</code> action of the <code>Dashboard</code> controller, as <code>/Dashboard/Summary</code> does, but I can't figure out the correct way to add the route. In <code>Global.asax.cs</code>, I have the following:</p>\n\n<pre><code>routes.MapRoute(\n    \"Default\", // Route name\n    \"{controller}/{action}/{id}\", // URL with parameters\n    new {controller = \"Home\", action = \"Index\", id = UrlParameter.Optional} // Parameter defaults\n    );\n\nroutes.MapRoute(\n    \"/Dashboard\",\n    \"Dashboard\",\n    new { controller = \"Dashboard\", action = \"Summary\" }\n    );\n</code></pre>\n\n<p>For the second part, I've also tried:</p>\n\n<pre><code>routes.MapRoute(\n    \"/Dashboard\",\n    \"{controller}\",\n    new { controller = \"Dashboard\", action = \"Summary\" }\n    );\n</code></pre>\n\n<p>and</p>\n\n<pre><code>routes.MapRoute(\n    \"/Dashboard\",\n    \"{controller}\",\n    new { action = \"Summary\" }\n    );\n</code></pre>\n\n<p>but I always get a 404 when trying to access <code>/Dashboard</code>. I'm pretty sure I'm missing something about the format for the parameters to <code>MapRoute</code>, but I don't know what it is...</p>\n"},{"tags":["c#","asp.net-mvc-3","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":533,"score":2,"question_id":12109783,"title":"Is it possible to have different editor templates for the same Kendo UI Grid?","body":"<p>I have have got a MVC 3 Project where I use a Kendo UI Grid quite a lot.</p>\n\n<p>A typical View looks like this:</p>\n\n<pre><code>@using Kendo.Mvc.UI\n@model List&lt;ActionViewModel&gt;\n@(Html.Kendo().Grid&lt;ActionViewModel&gt;()\n.Name(\"#grid\")    \n.Columns(columns =&gt;\n    {\n        columns.Bound(p =&gt; p.Name);\n        columns.Command(command =&gt; { command.Edit(); command.Destroy(); });\n})\n.ToolBar(toolbar =&gt; toolbar.Create().Text(Resources.Grid.Create))\n.Editable(editable =&gt; editable.Mode(GridEditMode.PopUp)))\n.Sortable()\n.Scrollable()\n.Filterable(f=&gt;f.Extra(true))\n.DataSource(dataSource =&gt; dataSource        \n    .Ajax() \n    .Events(events =&gt; events.Error(\"error_handler\"))\n    .Model(model =&gt; model.Id(p =&gt; p.Id))\n    .Create(update =&gt; update.Action(\"Create\", \"Action\"))\n    .Read(read =&gt; read.Action(\"Read\", \"Action\"))\n    .Update(update =&gt; update.Action(\"Update\", \"Action\"))\n    .Destroy(update =&gt; update.Action(\"Delete\", \"Action\"))\n))\n</code></pre>\n\n<p>I often have to define custom editor templates for my viewmodels, these are used in Kendo UI's edit popup.</p>\n\n<p>In a Kendo UI Grid it is possible to create, update, and delete elements. The popup for edit and create uses the same editor template by default. Is there a simple way to have two separate editor templates for edit and delete?</p>\n"},{"tags":["javascript","asp.net-mvc-3","validation","client-side"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12715125,"title":"How to completely disable javascript validation in asp.net mvc 3","body":"<p>I want to write all the code that will be sent to the browser to have it under my complete control.</p>\n\n<p>For this I need to completely disable javascript validation that is provided with aps.net mvc.</p>\n\n<p>How can i achieve this?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":222,"score":0,"question_id":10042013,"title":"How to pass 2 columns from a WEBGRID to an AJAX call","body":"<p>I have a WEBGRID that contains 2 columns.</p>\n\n<p>I then make a row clickable by using Jquery and Ajax. I can pass in 1 value, which is the first column in the webgrid to the AJAX call, and this works fine. But i am unable to pass in 2 values to the AJAX call. </p>\n\n<p>How can i do this ?</p>\n\n<p>WEGRID CODE in a VIEW() .cshtml:</p>\n\n<pre><code>        @grid.GetHtml(columns: grid.Columns(\n                        grid.Column(\"projectCode\", \"Project Code\", canSort: true),\n                        grid.Column(\"spUserName\", \"Provider Name\", canSort: true)),\n        tableStyle: \"webgrid\",\n        headerStyle: \"webgrid-header\",\n        footerStyle: \"webgrid-footer\",\n        selectedRowStyle: \"webgrid-selected-row\",\n        rowStyle: \"webgrid-row-style\")    \n</code></pre>\n\n<p>JavaScript/AJax Call in the same VIEW() .cshtml:</p>\n\n<pre><code>            &lt;script type=\"text/javascript\"&gt;\n            $(function () {\n            $('tbody tr').live('hover', function () {\n                $(this).toggleClass('clickable');\n            }).live('click', function () {  \n                $.ajax(\n                            {\n                                type: \"POST\",\n                                url: \"/Projects/OtherProjectHeaderSP\",                              \n                                data : { projectCode: $(this).find('td:first').text(),\n                                         spUserName: $(this).find('td:second').text()},\n                                success: function (data) {\n                                        $('#container1').html (data);                         \n                                    }\n                            });\n            });\n        });\n        &lt;/script&gt; \n</code></pre>\n\n<p>The problem is that it doesnt pick up spUserName: $(this).find('td:second).text()},\nwhich is rthe spUserName. If i only pass in the $(this).find('td:first').text(), it works 100% with the projectCode being sent through to the controller. But by adding the second one, it causes a failure.</p>\n\n<p>How can i pass in 2 values from the WEBGRID?</p>\n\n<p>The other option is to use JSON. But i have tried and unable to assign the td values to a JSON object.</p>\n\n<p>Any help please</p>\n"},{"tags":["asp.net-mvc-3","css3","jquery-mobile"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12714002,"title":"Change placeholder style with MVC3 validation","body":"<p>I am using the jQuery 1.2 mobile framework with MVC3 and Chrome for testing.  My form fields have placeholder elements that are used as watermarks for lack of a better term.  These are styled with the following:</p>\n\n<pre><code>.input-list ::-webkit-input-placeholder {color:#949493;}\n.input-list :-moz-placeholder {color:#949493;}\n</code></pre>\n\n<p>The output HTML code looks like this:</p>\n\n<pre><code>&lt;ul class=\"input-list\"&gt;\n    &lt;li&gt;&lt;input data-val=\"true\" data-val-length=\"Email address must be 80 characters or less.\" data-val-length-max=\"80\" data-val-required=\"E-mail Address is required.\" id=\"txtLoginExistingEmailAddress\" name=\"Returning.EmailAddress\" placeholder=\"E-mail Address*\" type=\"email\" value=\"\" /&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;input data-val=\"true\" data-val-required=\"Password is required.\" id=\"txtLoginExistingPassword\" name=\"Returning.Password\" placeholder=\"Password*\" type=\"password\" value=\"\" /&gt;&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>The style on the placeholder works perfectly, but when validation occurs, I am trying to use the following style so it will apply when the \"input-validation-error\" class is applied.  These are added as the very last lines of my css and no other styles appear to be overriding them.  Here are some of my variations.</p>\n\n<pre><code>/* variation 1 */\n.input-validation-error::-webkit-input-placeholder {color:red;}\n.input-validation-error:-moz-placeholder {color:red;}\n\n/* variation 2 */\n.input-list .input-validation-error::-webkit-input-placeholder {color:red;}\n.input-list .input-validation-error:-moz-placeholder {color:red;}\n\n/* variation 3 */\n.input-validation-error::-webkit-input-placeholder {color:red !important;}\n.input-validation-error:-moz-placeholder {color:red !important;}\n\n/* variation 4 */\n.input-list .input-validation-error::-webkit-input-placeholder {color:red !important;}\n.input-list .input-validation-error:-moz-placeholder {color:red !important;}\n</code></pre>\n\n<p>This doesn't appear to work.  I assume I am applying the incorrect style to it, but I have tried many variations to no avail.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12506102,"title":"Is there any tool/api or code to create digg style story from a link","body":"<p>I searched web for few hours but did not find anything so far. So just putting it out here, is there a way that using a link i can create a digg style story? With image, headline and story preview? Is there any api in which can be used in mvc3 or any code out there which does this already? Would appreciate any help in this!</p>\n\n<p>I am putting a bounty on this question. Anyone who can provide me simple asp.net code to get a story from news site using a link, will get the bounty. Thanks!</p>\n"},{"tags":["asp.net-mvc-3","ninject","ninject-extensions"],"answer_count":1,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":1367,"score":7,"question_id":5018333,"title":"Ninject and OnePerRequestModule","body":"<p>I have recently tried out <code>Ninject</code> with the <code>Ninject.Web.Mvc</code> extension, and I've noticed something peculiar and, while not breaking, confusing.</p>\n\n<p>In the <code>NinjectHttpApplication</code> abstract class, there is a constructor defined as follows.. </p>\n\n<pre><code>    /// &lt;summary&gt;\n    /// Initializes a new instance of the &lt;see cref=\"NinjectHttpApplication\"/&gt; class.\n    /// &lt;/summary&gt;\n    protected NinjectHttpApplication()\n    {\n        this.onePerRequestModule = new OnePerRequestModule();\n        this.onePerRequestModule.Init(this);\n    }\n</code></pre>\n\n<p>I have placed a debugger breakpoint here, and this gets called a few times. I cannot find any real documentation on it. In the implementation code, there is this line that catches my eye.</p>\n\n<pre><code>            if (kernel.Settings.Get(\"ReleaseScopeAtRequestEnd\", true))\n            {\n                OnePerRequestModule.StartManaging(kernel);\n            }\n</code></pre>\n\n<p>My questions are as follows... </p>\n\n<ul>\n<li>What is <code>OnePerRequestModule</code></li>\n<li>Why is this constructor being called multiple times?</li>\n<li>What is the purpose of this <code>StartManaging</code> method, if the constructor is called multiple times?</li>\n</ul>\n"},{"tags":["asp.net-mvc-3","linq","linq-to-sql","objectdisposedexception"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12711405,"title":"ObjectDisposedException after returning from LINQ to SQL query","body":"<p>I am using MVC3 with .NET 4.0 and when my create form is invoked I get an ObjectDisposedException saying that the object has been disposed. The exception ocurrs on this MVC3 page statement:</p>\n\n<pre><code>@Html.DropDownListFor(model =&gt; model.Country, GeneralActivity.GetCountriesMVC(\"NL\"))\n</code></pre>\n\n<p>And the invoked method is like this:</p>\n\n<pre><code>IEnumerable&lt;SelectListItem&gt; GetCountriesMVC(string preselectCountryCode)\n{\n   ... some error checking code omited for simplicity ...\n   IEnumerable&lt;SelectListItem&gt; qlist;\n   using (Data.MyDataContext ctx = new Data.MyDataContext()) {\n      qlist = from p in ctx.Countries select new SelectListItem {\n          Text = p.CountryName,\n          Value = p.CountryCodeId,\n          Selected = (p.CountryCodeId == preselectCountryCode)\n      };\n   }\n   return qlist;\n}\n</code></pre>\n\n<p>During debug I execute up to the return statement and then it leaves and brings me to the invoking @Html statement on the MVC page and the exception is thrown.</p>\n\n<p>The qlist instance is declared outside the USING statement and initialized by the LINQ query so I don't see why it says the object has been disposed.</p>\n"},{"tags":["asp.net-mvc-3","active-directory","windows-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12711495,"title":"Authorize against active directory groups very slow","body":"<p>I'm checking roles against active directory groups in my ASP.Net MVC 3 application. It works, but is extremly slow. This is how it looks in my web.config: </p>\n\n<pre><code>  &lt;authentication mode=\"Windows\" /&gt;\n    &lt;authorization&gt;\n      &lt;deny users=\"?\" /&gt;\n    &lt;/authorization&gt;\n     &lt;roleManager enabled=\"true\" defaultProvider=\"AspNetWindowsTokenRoleProvider\" cacheRolesInCookie=\"true\"&gt;\n      &lt;providers&gt;\n        &lt;clear /&gt;\n        &lt;add name=\"AspNetWindowsTokenRoleProvider\" type=\"System.Web.Security.WindowsTokenRoleProvider\" applicationName=\"/\"  /&gt;\n      &lt;/providers&gt;\n    &lt;/roleManager&gt;\n</code></pre>\n\n<p>On my controller I have:</p>\n\n<p>[Authorize(Roles = @\"MYDOMAIN\\MYGROUP\")]</p>\n\n<p>Am doing something obviously wrong?</p>\n"},{"tags":["c#",".net","asp.net-mvc-3","ninject"],"answer_count":14,"favorite_count":6,"up_vote_count":30,"down_vote_count":0,"view_count":4620,"score":30,"question_id":5910376,"title":"Ninject MVC3 - bootstrapper throwing \"Already Initialized\" exception","body":"<p>I've created an empty Asp.Net MVC3 project, and used nuget <code>install-package Ninject.MVC3</code></p>\n\n<p>Without doing anything else (no services registered and not even a controller created) I run the application.</p>\n\n<p>The Project breaks on line 22 in NinjectMVC3.cs with the following exception:</p>\n\n<blockquote>\n  <p>[InvalidOperationException: Already Initialized!]\n     Ninject.Web.Mvc.Bootstrapper.Initialize(Func`1 createKernelCallback) in c:\\Projects\\Ninject\\Maintenance2.2\\ninject.web.mvc\\mvc3\\src\\Ninject.Web.Mvc\\Bootstrapper.cs> :58\n     Mvc.App_Start.NinjectMVC3.Start() in c:\\Projects\\Events\\Events\\App_Start\\NinjectMVC3.cs:22</p>\n  \n  <p>[TargetInvocationException: Exception\n  has been thrown by the target of an\n  invocation.]<br>\n  System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo\n  method, Object target, Object[]\n  arguments, SignatureStruct&amp; sig,\n  MethodAttributes methodAttributes,\n  RuntimeType typeOwner) +0<br>\n  System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo\n  method, Object target, Object[]\n  arguments, Signature sig,\n  MethodAttributes methodAttributes,\n  RuntimeType typeOwner) +72<br>\n  System.Reflection.RuntimeMethodInfo.Invoke(Object\n  obj, BindingFlags invokeAttr, Binder\n  binder, Object[] parameters,\n  CultureInfo culture, Boolean\n  skipVisibilityChecks) +335<br>\n  System.Reflection.RuntimeMethodInfo.Invoke(Object\n  obj, BindingFlags invokeAttr, Binder\n  binder, Object[] parameters,\n  CultureInfo culture) +28<br>\n  System.Reflection.MethodBase.Invoke(Object\n  obj, Object[] parameters) +19<br>\n  WebActivator.BaseActivationMethodAttribute.InvokeMethod()\n  +199    WebActivator.ActivationManager.RunActivationMethods()\n  +330    WebActivator.ActivationManager.RunPreStartMethods()\n  +27    WebActivator.ActivationManager.Run()\n  +39</p>\n</blockquote>\n\n<p>The line in NinjectMVC3.cs is:</p>\n\n<pre><code>public static void Start() \n        {\n            DynamicModuleUtility.RegisterModule(typeof(OnePerRequestModule));\n            DynamicModuleUtility.RegisterModule(typeof(HttpApplicationInitializationModule));\n            bootstrapper.Initialize(CreateKernel); // &lt;- this one right here...\n        }\n</code></pre>\n\n<p>What is going on with this? I've used Ninject for MVC3 in other projects without problems at all. I do notice that the second line in the Start() method is not included in older (weeks) packages of Ninject.MVC3, so maybe something else has been broken in a recent update also?</p>\n\n<p>Please help!</p>\n\n<p><strong>Edit to address answer from Remo</strong></p>\n\n<p>This is from my global.asax.cs</p>\n\n<pre><code> public class MvcApplication : System.Web.HttpApplication\n {\n</code></pre>\n\n<p>The global.asax is 100% standard aswell. No adjustments done.</p>\n\n<p><strong>EDIT - Problem is gone...</strong></p>\n\n<p>I honestly have no idea what caused this, but after a few restarts of Visual Studio, and a full reboot, the project is working as it should. Neither can I recreate the problem in new projects.</p>\n\n<p>Sorry for wasting your time :)</p>\n"},{"tags":["json","asp.net-mvc-3","view","controller"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12660461,"title":"passing an object with json data","body":"<p>I am using <code>jsonData</code> to bind to a <code>jqgrid</code> but I also want to use <code>model.total amount</code> in a field.</p>\n\n<p>So how can I return it with <code>jsonData</code> to use it inside this <code>&lt;td&gt;</code>?</p>\n\n<p><strong>View</strong></p>\n\n<pre><code>&lt;table&gt;\n&lt;tr&gt;\n\n&lt;td&gt;@Model.TotalAmount&lt;/td&gt;\n\n&lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code> public ActionResult GetDocPendingDetails(string strPA, string strEmpCode, string StrModeOfPayment) // Sends PA to bind the gridview\n        {\n            string StrEmpcode = \"\"; // to be changed\n            cmn_top objCmn_top = new cmn_top();\n            DataTable dtData = new DataTable();\n            Items objitem = new Items();\n            if (StrModeOfPayment == \"All\")\n            {\n                StrModeOfPayment = \"\";\n            }\n            dtData = objCmn_top.Reports_GetData__DocPendingPayment(strPA, StrEmpcode, StrModeOfPayment);\n            ViewBag.TotalAmount = dtData.AsEnumerable().Sum(x =&gt; x.Field&lt;double&gt;(\"fl_approvedamt\")).ToString();           // to be changed later\n            int totalRecords = dtData.Rows.Count;\n            var jsonData = new\n            {\n                totalamount = ViewBag.TotalAmount,\n                total = totalRecords,\n                rows =\n                (\n                from dtRow in dtData.AsEnumerable()\n                select new\n                {\n                    cell = new string[]\n                    {                       \n                       dtRow.Field&lt;string&gt;(\"ch_docno\"),dtRow.Field&lt;string&gt;(\"ch_empcode\"),dtRow.Field&lt;string&gt;(\"ch_sapvoucherno\"), dtRow.Field&lt;string&gt;(\"CH_PSA_CODE\"),dtRow.Field&lt;double&gt;(\"fl_approvedamt\").ToString()\n                    }\n                }\n                )\n            };\n            return Json(jsonData, JsonRequestBehavior.AllowGet);\n\n        }\n</code></pre>\n\n<p><strong>This is my jqgrid</strong></p>\n\n<pre><code>    $(\"#list\").GridUnload();\n    $(\"#list\").jqGrid({\n        url: '/Reports/GetDocPendingDetails',\n        datatype: 'json',\n        mtype: 'GET',\n        colNames: ['Document No.', 'Document Owner', 'SAP Document No', 'PSA', 'Approved Amount'],\n        colModel: [\n              { name: 'ch_docno', index: 'ch_docno', width: 100, align: 'center' },\n              { name: 'ch_empcode', index: 'ch_empcode', width: 250, align: 'left' },\n              { name: 'ch_sapvoucherno', index: 'ch_sapvoucherno', width: 100, align: 'center' },\n              { name: 'CH_PSA_CODE', index: 'CH_PSA_CODE', width: 200, align: 'left' },\n                 { name: 'fl_approvedamt', index: 'fl_approvedamt', width: 100, align: 'center' }\n\n            ],\n        emptyrecords: \"Empty records\",\n        height: 'auto',\n        loadtext: 'Loading.....',\n        sortorder: 'asc',\n        caption: \" Documents Pending For Payment \",\n        shrinkToFit: true,\n        rownumbers: true,\n        rowNum: -1,\n        postData: { strPA: selectedPA, StrModeOfPayment: modeOfPayment },\n        viewrecords: true,\n        gridComplete: function () {\n            var recs = parseInt($(\"#list\").getGridParam(\"records\"));\n            if (isNaN(recs) || recs == 0) {\n                $(\"#gridWrapper\").hide();\n                $(\"#DivEmptyRecords\").show();\n\n            }\n            else {\n                $('#gridWrapper').show();\n                $(\"#DivEmptyRecords\").hide();\n\n            }\n        }\n    });\n//document.getElementById(\"tdTotalAmount\").innerHTML = jsonData.TotalAmount;\n\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12708714,"title":"Why Can't I Do This Foreach in MVC?","body":"<p>This is my controller action:</p>\n\n<pre><code>&lt;EmployeeAuthorize()&gt;\nFunction HRA_Table() As ActionResult\n\n    ' get current employee's id\n    Dim db1 As EmployeeDbContext = New EmployeeDbContext\n    Dim user1 = db1.Tbl_Employees.Where(Function(e) e.Employee_EmailAddress = User.Identity.Name).Single()\n    Dim empId = user1.Employee_ID\n    Dim empSSN = user1.Employee_SSN\n\n    Dim hra = db.Tbl_HRAs.Where(Function(x) x.SSN = empSSN)\n\n    Return View(hra.ToList)\n\nEnd Function\n</code></pre>\n\n<p>This is my model:</p>\n\n<pre><code>Public Class Tbl_HRA\n\n    &lt;Key()&gt; Public Property HRA_ID() As Integer\n    Public Property SSN() As String\n    Public Property Height() As Double\n    Public Property Weight() As Double\n    Public Property Nic_EE() As String\n    Public Property Nic_SP() As String\n    Public Property BMI() As Double\n    Public Property BP_S() As Double\n    Public Property BP_D() As Double\n    Public Property HDL() As Double\n    Public Property LDL() As Double\n    Public Property Tot_Chol() As Double\n    Public Property Continine() As String\n    Public Property Glucose() As Double\n    Public Property Waist() As Double\n    Public Property Hip() As Double\n    Public Property Triglycerides() As Double\n    Public Property A1C() As Double\n    Public Property LDL_HDL() As Double\n\nEnd Class\n</code></pre>\n\n<p>This is my view:</p>\n\n<pre><code>@ModelType IEnumerable(Of GemcoBlog.Tbl_HRA)\n\n@Code\n    Layout = Nothing\nEnd Code\n\n@For Each item In Model\n\n    @item.Height\n\nNext\n</code></pre>\n\n<p>The error I get is:</p>\n\n<blockquote>\n  <p>The 'Height' property on 'Tbl_HRA' could not be set to a 'String'\n  value. You must set this property to a non-null value of type\n  'Double'.</p>\n</blockquote>\n\n<p>I can't seem to understand why this error is occurring.  I tried changing it to <code>double</code> based on some articles I read, but still it won't work!</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["jquery","asp.net-mvc-3","validation","jquery-validate"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12708735,"title":"jQuery validate greater than & less than","body":"<p>How do I ensure that a user cannot enter a value smaller or bigger than a certain value ?</p>\n\n<p>The problem lies in making a validation of a field having a value smaller or bigger than another field.</p>\n"},{"tags":["c#","javascript","facebook","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12701390,"title":"Facebook login is reloading the page forever","body":"<p>This is the script on my webpage:</p>\n\n<pre><code>&lt;div id=\"fb-root\"&gt;&lt;/div&gt;\n&lt;script&gt;\n    window.fbAsyncInit = function () {\n        FB.init({\n            appId: '419349611446911', // App ID\n            status: true, // check login status\n            cookie: true, // enable cookies to allow the server to access the session\n            xfbml: true  // parse XFBML\n        });\n\n        // Additional initialization code here\n        FB.Event.subscribe('auth.authResponseChange', function (response) {\n            if (response.status === 'connected') {\n                // the user is logged in and has authenticated your\n                // app, and response.authResponse supplies\n                // the user's ID, a valid access token, a signed\n                // request, and the time the access token \n                // and signed request each expire\n                var uid = response.authResponse.userID;\n                var accessToken = response.authResponse.accessToken;\n                // TODO: Handle the access token\n                // Do a post to the server to finish the logon\n                // This is a form post since we don't want to use AJAX\n                var form = document.createElement(\"form\");\n                form.setAttribute(\"method\", 'post');\n                form.setAttribute(\"action\", '@Url.Action(\"FacebookLogin\", \"Account\")');\n\n                var field = document.createElement(\"input\");\n                field.setAttribute(\"type\", \"hidden\");\n                field.setAttribute(\"name\", 'accessToken');\n                field.setAttribute(\"value\", accessToken);\n                form.appendChild(field);\n\n                document.body.appendChild(form);\n                form.submit();\n\n            } else if (response.status === 'not_authorized') {\n                // the user is logged in to Facebook, \n                // but has not authenticated your app\n            } else {\n                // the user isn't logged in to Facebook.\n            }\n        });\n    };\n\n    // Load the SDK Asynchronously\n    (function (d) {\n        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];\n        if (d.getElementById(id)) { return; }\n        js = d.createElement('script'); js.id = id; js.async = true;\n        js.src = \"//connect.facebook.net/en_US/all.js\";\n        ref.parentNode.insertBefore(js, ref);\n    } (document));\n&lt;/script&gt;\n</code></pre>\n\n<p>And here is my <code>:LogOnPartial</code>:</p>\n\n<pre><code>@if(Request.IsAuthenticated) {\n    &lt;text&gt;Hola, &lt;strong&gt;@User.Identity.Name&lt;/strong&gt;!\n    [ @Html.ActionLink(\"Log Off\", \"LogOff\", \"Account\") ]&lt;/text&gt;\n}\nelse {\n    &lt;div class=\"fb-login-button\" data-show-faces=\"false\" data-width=\"200\" data-max-rows=\"1\"&gt;&lt;/div&gt;\n}\n</code></pre>\n\n<p>When I change to <code>auth.login</code> clicking the login button doesn't log in or even redirect anywhere. Just a small flash of loading and nothing else. When I use <code>auth.authReponseChange</code>, I can correctly log in using Facebook, but the page reloads over and over again.</p>\n\n<p>What I'm asking is, how can I fix this bug? And why is the <code>auth.authResponseChange</code> event being fired every single time?</p>\n\n<p>Example:</p>\n\n<p>I log out of my local website:</p>\n\n<pre><code>FormsAuthentication.SignOut();\n</code></pre>\n\n<p>And even then, the Facebook button auto logs me in, and the loop continues. What is firing the login button click?</p>\n"},{"tags":["asp.net-mvc-3","jquery-mobile","forms-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":12652817,"title":"jQuery mobile + ASP .NET MVC forms authentication","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/11297287/chrome-on-ios-shows-weird-url-for-jquery-mobile-page-asp-net-mvc\">Chrome on iOS shows weird url for jQuery Mobile page (ASP.NET MVC)</a>  </p>\n</blockquote>\n\n\n\n<p>I have been using MVC for years, and just last night I started playing with jQuery mobile.  I developed a nice little mobile version of my application, and I can't figure out why this garbage is being prepended to my query string in all URLs beyond the logon page.</p>\n\n<p>It looks like this:</p>\n\n<pre><code>http://hostname.com/application_name/(F(iPF1BcLSVortwvEsPbnDww4OLya-IL_-pZtm4zHaqOdzX8XJXVMs-PT_8oaW66SMq2NI2W9p7seVyD1xlYD-Bpj9sVUbFSmENn5vQz-kQagyIJyJCeaE5a3z_RXbtC4GPuntcFkK6ggf6MkzvTFVjb2isOc1))/area_name/controller_name/action_name/id\n</code></pre>\n\n<p>At the recommendation of someone on another post, I added this to my main mobile js library, but it didn't have any effect:</p>\n\n<pre><code>$(document).bind('mobileinit', function() {\n    $.mobile.ajaxEnabled = false;\n});\n</code></pre>\n\n<p>It does NOT happen if I browse the site on a desktop browser, nor does it happen when I select \"Request Desktop Site\" on Chrome for iOS.</p>\n\n<p>Anyone run into this before?</p>\n"},{"tags":[".net","asp.net-mvc-3","c#-4.0","forms-authentication"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":125,"score":0,"question_id":12708674,"title":"ASP.NET MVC 3 Forms Authentication security risk","body":"<p>I am using ASP.Net MVC3 and IIS 7.0. On my site I have implemented Forms Authentication over https (requireSSL=\"true\"). I have set some expiration date(e.g 5 days) for the .ASPXAUTH cookie. All works good, but after successful login from one browser I can copy (without problem) cookie   .ASPXAUTH to another browser or another computer and enter on my site without a login and password.</p>\n\n<p>How can I do so that I could go to the site only from the browser or the computer on which I typed login password and could not access from another browser, on which I copied the .ASPXAUTH cookie?</p>\n\n<p>Thanks in advance, Olexiy</p>\n"},{"tags":["jquery","asp.net-mvc-3","mvc","jquery-ajax"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":147,"score":1,"question_id":12491044,"title":"passing model from view to controller using jquery","body":"<p>I have a view</p>\n\n<pre><code>@using staffInfoDetails.Models\n@model staffInfo\n\n&lt;link href=\"../../Content/myOwn.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n@{staffInfo stf = Model; \n  }\n\n&lt;div id=\"education1\"&gt;\n@using (Html.BeginForm(\"addNewEdu\",\"Home\",FormMethod.Post))\n{\n    @Html.HiddenFor(x=&gt;x.StaffId)\n    &lt;table&gt;    \n    &lt;tr&gt;\n        &lt;th&gt;Country&lt;/th&gt;\n        &lt;th&gt;Board&lt;/th&gt;\n        &lt;th&gt;Level&lt;/th&gt;\n        &lt;th&gt;PassedYear&lt;/th&gt;\n        &lt;th&gt;Division&lt;/th&gt;\n    &lt;/tr&gt;     \n    &lt;tr&gt; \n       @Html.EditorFor(x =&gt; x.eduList)\n    &lt;/tr&gt;\n    &lt;tr&gt;\n    @*&lt;td&gt;&lt;input type=\"submit\" value=\"create Another\" id=\"addedu\"/&gt; &lt;/td&gt;*@\n    @*&lt;td&gt;@Html.ActionLink(\"Add New\", \"addNewEdu\", new {  Model })&lt;/td&gt;*@    \n    &lt;/tr&gt;\n    &lt;/table&gt;  \n}\n&lt;button id=\"addedu\"&gt;Add Another&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I want to pass the model staffInfo to controller using jquery as below</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        $(\"#addedu\").live('click', function (e) {\n//            e.preventDefault();           \n            $.ajax({\n                url: \"Home/addNewEdu\",\n                type: \"Post\",\n                data: { model: stf },//pass model\n                success: function (fk) {\n                    //                    alert(\"value passed\");\n                    $(\"#education\").html(fk);\n                }\n\n            });\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>the jquery seems to pass only elements not whole model so how can I pass model from the view to the controller so that I don't have to write the whole parameters list in jquery</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":72,"score":3,"question_id":12706875,"title":"asp.net mvc 3 access DateTime model property in javascript","body":"<p>In Asp.Net MVC I have a model containing a property of type <code>DateTime</code>.  </p>\n\n<p>How can I access it in JavaScript? </p>\n\n<p>Using <code>@(Model.PrimitiveTypeProperty)</code> works just fine, but not when it comes to a property of <code>DateTime</code>. </p>\n\n<p>The problem is more complex, but I need to at least have an alter with this value.<br>\nIs it possible?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12707249,"title":"Creating a list of radio buttons","body":"<p>I m working with asp.net mvc3 to create a list of radiobuttons. I need to get a <strong><em>list</em></strong> from the controller and display it in the view. For each corresponding list in the view I have YES/NO radio button and need to generate a string at the end saying for each item in the list if the radiobutton is yes then 1 else 0. </p>\n\n<p>So for example if I have 10 items in the list then I need to display them in the view (default values of the items being false) and then generate a string on submit where each character in the string corresponds to the bool value of each item in the list. </p>\n\n<p>Can anyone give me an idea how do I do this in mvc3 ?\nThanks for the help in advance.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Here is the code I am trying :</p>\n\n<p>My class has two properties :</p>\n\n<pre><code>public List&lt;Module&gt; lstModules { get; set; } // gives the list of items\n\npublic List&lt;bool&gt; IsModuleActivelst { get; set; } //gives the bool values \n</code></pre>\n\n<p>Here in controller I need to create a list and the corresponding bool values for that. I am stuck here and not able to generate the code. Anyways I ll explain the pseudocode</p>\n\n<pre><code>public class MMController : Controller\n{\n    [HttpGet]\n    public ActionResult Clients()\n    {\n        //I need to generate the list - using lstModules prop\n\n        // Assign the list with the predefined values and if not just give the default values- using IsModuleActivelst  prop\n\n     }\n}\n</code></pre>\n\n<p>Here I create the view :</p>\n\n<pre><code> @foreach (var i in Model.lstModules)\n{\n    &lt;div class=\"formlabel\"&gt;\n        &lt;div align=\"right\" class=\"label\"&gt;\n\n            @Html.LabelFor(model =&gt; model.lstModules):&lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"formelement\"&gt;\n     &lt;label for=\"radioYes\" class=\"visible-enable\" style=\"cursor:pointer;position:relative;\"&gt;\n                @Html.RadioButtonFor(model =&gt; model.IsModuleActivelst, \"True\", new { @id = \"radioYes\", @style = \"display:none;\" })\n               &lt;span&gt;Yes&lt;/span&gt;&lt;/label&gt;\n                &lt;label for=\"radioNo\" class=\"visible-disable\" style=\"cursor:pointer;position:relative;\"&gt;\n                @Html.RadioButtonFor(model =&gt; model.IsModuleActivelst, \"False\", new { @id = \"radioNo\", @style = \"display:none;\" })\n                 &lt;span&gt;No&lt;/span&gt;&lt;/label&gt;\n    &lt;/div&gt;\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","wif","adfs2.0","saml-2.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12707515,"title":"WIF SAML 2, MVC 3 sign in on demand and AD FS 2 integration","body":"<p>Has anyone managed to integrate between these 3 microsoft products?\n<br/>\nIm building an application where a user can surf annonymously, and can sign in on demand (by clicking a \"sign in\" button), and also to sign out once he is signed in.\nThe WIF SAML2 extensions provide the <code>Saml2AuthenticationModule</code>, which has a SignIn and a SignOut methods, however itt seems like using those methods in the following way doesnt work</p>\n\n<pre><code>public ActionResult Login()\n{\n    Saml2AuthenticationModule.Current.SignIn(\"~/Authentication/FinishAuthentication\");\n    return new EmptyResult();\n}\n\n\n    public ActionResult Logout()\n    {\n        Saml2AuthenticationModule.Current.SignOut(\"~/Authentication/FinishAuthentication\");\n        return new EmptyResult();\n    }\n</code></pre>\n\n<p>The signin action redirects to the sign in page of AD FS2 and when I sign in, it redirects me back to the requestion action, however if i browse another AD FS dependant application later, im still redirected to AD FS' sign-in page, as if the authentication cookie was not created by AD FS.\n<br/>\nThe signout method seems to do nothing: The IClaimsIdentity remains the same, of the user I've authenticated with, and the <code>IsAuthenticated</code> property remains set to <code>true</code></p>\n\n<p>Is there a way to make it work? Is there another supported way (without writing the SAML2 messages myself) to do it?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":58,"score":3,"question_id":12707173,"title":"ValidationMessage for MVC3 collection","body":"<p>Our MVC3 model includes a collection of strings like this</p>\n\n<pre><code>[CannotBeEmpty(ErrorMessageResourceName = \"ColorCodes\", ErrorMessageResourceType = typeof(Resources.Strings))]\n[Display(ResourceType = typeof(Resources.Strings), Name = \"ColorCodes\")]\npublic List&lt;string&gt; ColorCodes { get; set; }\n</code></pre>\n\n<p>I display this model in my View using </p>\n\n<pre><code>&lt;div class=\"editor-field colors\"&gt;\n     @Html.EditorFor(model =&gt; model.ColorCodes)\n     @Html.ValidationMessageFor(model =&gt; model.ColorCodes)\n&lt;/div&gt;\n</code></pre>\n\n<p>My problem is that myValidationMessageFor only renders 1 row while in the example below, the EditorFor reders 3 input fields. </p>\n\n<pre><code> &lt;input class=\"text-box single-line\" id=\"ColorCodes_0_\" name=\"ColorCodes[0]\" type=\"text\" value=\"#d6c0d6\"&gt;\n &lt;input class=\"text-box single-line\" id=\"ColorCodes_1_\" name=\"ColorCodes[1]\" type=\"text\" value=\"\"&gt;\n &lt;input class=\"text-box single-line\" id=\"ColorCodes_2_\" name=\"ColorCodes[2]\" type=\"text\" value=\"#fcfcfc\"&gt;\n &lt;span class=\"field-validation-valid\" data-valmsg-for=\"ColorCodes\" data-valmsg-replace=\"true\"&gt;&lt;/span&gt;\n</code></pre>\n\n<p>As you can see data-valmsg-for contains \"ColorCodes\" which is wrong. It should contain ColorCodes_0_, ColorCodes_1_ and ColorCodes_2_. \nHow should I use the ValidationMessageFor when the model contains a Collection. </p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":12363465,"title":"How to URL Rewrite in MVC3","body":"<p>i have this url <a href=\"http://example.com/Book/Details?Bookid=15\" rel=\"nofollow\">http://example.com/Book/Details?Bookid=15</a> this url</p>\n\n<p>i want rewrite url like this <a href=\"http://example.com/Book/Details/BlackBook/\" rel=\"nofollow\">http://example.com/Book/Details/BlackBook/</a></p>\n\n<p>Please help thanks</p>\n"},{"tags":["c#","asp.net-mvc-3","query","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":32,"score":1,"question_id":12706703,"title":"EF query - getting entities of a certain type","body":"<p>I am trying to filter out entities of a certain type. I am using Entity Framework, and I have a parent entity, and various children that inherit from the parent entity. I am trying to filter out one of these children. </p>\n\n<p>For example, I have the following structure:</p>\n\n<ul>\n<li>Address : Entity\n<ul>\n<li>PostCode : Address</li>\n<li>Street : Address</li>\n</ul></li>\n</ul>\n\n<p>A User entity has a reference to one address. How can I obtain a list of users that are associated to an address of type PostCode?</p>\n\n<p>i.e. I tried: </p>\n\n<pre><code> var query = from User p in context.Users\n                        where p.Address.GetType() == typeof(PostCode)\n                        select p;\n</code></pre>\n\n<p>But I get: </p>\n\n<blockquote>\n  <p>LINQ to Entities does not recognize the method 'System.Type GetType()'\n  method, and this method cannot be translated into a store expression.</p>\n</blockquote>\n\n<p>I have seen couple of solutions that involve obtaining the list of Users first, and then selecting those of a certain type. Problem with this solution is that the query obtains all the users first; I would like my query to include the filter since I have quite a few Users.</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc-3","nopcommerce"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":102,"score":1,"question_id":12615751,"title":"How to show all products in nopCommerce?","body":"<p>I would like to show all products without creating any new category and mapping to it. </p>\n\n<p>Can any one help me?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc-3","asp.net-webpages","simplemembership"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":106,"score":1,"question_id":12705990,"title":"WebSecurity.CreateUserAndAccount Sql Collation Issue","body":"<p>If Sql Server database collation is <strong>Turkish_CI_AS</strong>, I get that error at below cause UPPER function in SELECT Query in \"GetUserId\" method of <strong>SimpleMembershipProvider.cs</strong> class.</p>\n\n<p>SQL UPPER('info') is not equal to \"info\".ToUpperInvariant() in Turkish_CI_AS</p>\n\n<p>Sql Server Database Collation : Turkish_CI_AS</p>\n\n<pre><code>WebSecurity.CreateUserAndAccount(\"info\", \"123456\");\n</code></pre>\n\n<blockquote>\n  <p><strong>Exception Details: System.Web.Security.MembershipCreateUserException: The Provider\n  encountered an unknown error.</strong></p>\n</blockquote>\n"},{"tags":["asp.net-mvc-3","ssl","iis-7.5","requirehttps"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12705165,"title":"MVC3 RequireHTTPS Simple","body":"<p>Im running an MVC3 app within an IIS7.5 instance on a winsvr2008 R2 box. Now if i set RequireHttps either globally or on each class, my url never gets rewritten at all, in fact it changes nothing? Im using my own custom forms authentication module BTW,which encrypts the forms auth ticket on the client.....would this be preventing the RequireHttps attrib from working?</p>\n"},{"tags":["asp.net","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12706236,"title":"Restricting access to Register User in Asp.net MVC","body":"<p>I have an asp.net mvc application. All the pages are accessible in the asp.net mvc application only after authentication (Authorize attribute) except for the login page (Annonymous). In the login page we have Register link for the new users. How can I restrict the Register link to be accessible only for specific users or for specific roles. </p>\n\n<p>We do not want everyone to use the Register page to create a user name and password.</p>\n\n<p>How is this possible with ASP.NET MVC authorization. We are using the standard SQL Membership and role provider in the application.</p>\n"},{"tags":["asp.net-mvc-3","razor","webgrid","custom-paging"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":102,"score":0,"question_id":12706019,"title":"Custom Paging in MVC3 and Razor","body":"<p>The question is simple: How can i get insert images in the pager of the webgrid?</p>\n\n<p>I want to create a customized pager for my webgrid.</p>\n\n<p><strong>* Simple Model *</strong></p>\n\n<pre><code>public class MyDataModels\n    {\n        public string Title { get; set; }\n        public string Author { get; set; }\n        public String DatePublished { get; set; }\n\n    public List&lt;MyDataModels&gt; MyList()\n    {\n            List&lt;MyDataModels&gt; list = new List&lt;MyDataModels&gt;{\n                new MyDataModels   { Title=\"Music\", Author =\"1\",DatePublished=\"1/1/2011\" },\n                new MyDataModels   { Title=\"Dancing\", Author =\"2\",DatePublished=\"2/2/2012\"},\n                new MyDataModels   { Title=\"Cinema\", Author =\"3\",DatePublished=\"3/3/2013\"},\n                new MyDataModels   { Title=\"Reading\", Author =\"4\",DatePublished=\"4/4/2014\"},\n                new MyDataModels   { Title=\"Swimming\", Author =\"5\",DatePublished=\"5/5/2015\"}\n            };\n            return list;\n    }\n\n}\n</code></pre>\n\n<p><strong>* Controller *</strong></p>\n\n<pre><code>public class MyDataController : Controller\n    {\n        MyDataModels dc = new MyDataModels();\n\n        public ActionResult Index()\n        {\n          return View(dc.MyList().ToList());\n        }\n    }\n</code></pre>\n\n<p>and finally, the index page</p>\n\n<pre><code>@{\n    var grid = new WebGrid(source: Model, rowsPerPage: 1, canPage: true, canSort: true);\n\n    }\n\n@grid.GetHtml()\n\n  @grid.Pager(\n    mode:WebGridPagerModes.All,\n    nextText: **PUT MY IMAGE HERE**,\n    lastText: **PUT MY IMAGE HERE**\n    )\n</code></pre>\n\n<p>Can you help me out please?</p>\n"}]}
{"total":29155,"page":19,"pagesize":100,"questions":[{"tags":["asp.net-mvc-3","jquery-datepicker"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12705771,"title":"Datepicker date format on server","body":"<p>I have a probleme with date picker I have already created controllers with read/write actions and views using EF everything was OK\nTill I have need to create a controller with a modelView so I chosed an empty controller and I created the views by myself\nThe problem is when I use datepicker with dd/MM/yy it is shown OK but when I check the value sent to the server it's null if day is >12\nI tried to introduce 02/19/2008 it accepts it in the server it is sent as 19/02/2008\nI didn't understand why \nI try to set globalization culture and uiculture to en-US en-GB fr-FR nothing work\nIs there a way to specify how date picker parse the date( I already used the datepicker.parseDate)\nNeed your help please</p>\n"},{"tags":["asp.net","asp.net-mvc-3","log4net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":159,"score":0,"question_id":12406260,"title":"Using Log4net in ASP.NET MVC 3 but any log not store in sql server database?","body":"<p>I have perform all the possible step as configuration in web.config, manage global.aspx page and so on but record not stored in database table.\nI have a contoller named Account controller when we enter username=\"sameer\" and password is=\"singh123\" but i entered  wrong password i want to save this error log in database\n\n    \n  \n  \n    \n      </p>\n\n<pre><code>  &lt;logger name=\"SMSBA\"&gt;\n    &lt;appender-ref ref=\"ADONetAppender\" /&gt;\n  &lt;/logger&gt;\n  &lt;param name=\"File\" value=\"log-file.txt\" /&gt;\n  &lt;param name=\"AppendToFile\" value=\"true\" /&gt;\n  &lt;rollingStyle value=\"Size\" /&gt;\n  &lt;maxSizeRollBackups value=\"10\" /&gt;\n  &lt;maximumFileSize value=\"10MB\" /&gt;\n  &lt;staticLogFileName value=\"true\" /&gt;\n  &lt;connectionType value=\"System.Data.SqlClient.SqlConnection, System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" /&gt;\n  &lt;add name=\"SMSBA\" connectionString=\"data source=.\\SQLEXPRESS;Integrated Security=SSPI;Initial Catalog=SMSBA;\" providerName=\"System.Data.SqlClient\" /&gt;\n  &lt;commandText value=\"INSERT INTO Log ([Date],[Thread],[Level],[Logger],[Message]) VALUES (@log_date, @thread, @log_level, @logger, @message)\" /&gt;\n  &lt;parameter&gt;\n    &lt;parameterName value=\"@log_date\" /&gt;\n    &lt;dbType value=\"DateTime\" /&gt;\n    &lt;layout type=\"log4net.Layout.PatternLayout\" value=\"%date{yyyy'-'MM'-'dd HH':'mm':'ss'.'fff}\" /&gt;\n  &lt;/parameter&gt;\n  &lt;parameter&gt;\n    &lt;parameterName value=\"@thread\" /&gt;\n    &lt;dbType value=\"String\" /&gt;\n    &lt;size value=\"255\" /&gt;\n    &lt;layout type=\"log4net.Layout.PatternLayout\" value=\"%thread\" /&gt;\n  &lt;/parameter&gt;\n  &lt;parameter&gt;\n    &lt;parameterName value=\"@log_level\" /&gt;\n    &lt;dbType value=\"String\" /&gt;\n    &lt;size value=\"50\" /&gt;\n    &lt;layout type=\"log4net.Layout.PatternLayout\" value=\"%level\" /&gt;\n  &lt;/parameter&gt;\n  &lt;parameter&gt;\n    &lt;parameterName value=\"@logger\" /&gt;\n    &lt;dbType value=\"String\" /&gt;\n    &lt;size value=\"255\" /&gt;\n    &lt;layout type=\"log4net.Layout.PatternLayout\" value=\"%logger\" /&gt;\n  &lt;/parameter&gt;\n  &lt;parameter&gt;\n    &lt;parameterName value=\"@message\" /&gt;\n    &lt;dbType value=\"String\" /&gt;\n    &lt;size value=\"4000\" /&gt;\n    &lt;layout type=\"log4net.Layout.PatternLayout\" value=\"%message\" /&gt;\n  &lt;/parameter&gt;\n&lt;/appender&gt;\n&lt;root&gt;\n  &lt;level value=\"All\"/&gt;\n  &lt;appender-ref ref=\"AdoNetAppender_SqlServer\"/&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>\nthis is web.config file</p>\n\n<pre><code>public class MvcApplication : NinjectHttpApplication\n{\n    private static readonly log4net.ILog log = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);\n    public static void RegisterGlobalFilters(GlobalFilterCollection filters)\n    {\n        //filters.Add(new log4netExceptionFilter()); \n        filters.Add(new HandleErrorAttribute());\n\n    }\n\n    public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n        routes.MapRoute(\n            \"Default\", // Route name\n            \"{controller}/{action}/{id}\", // URL with parameters\n            new { controller = \"Account\", action = \"LogOn\", id = UrlParameter.Optional } // Parameter defaults\n        );\n\n\n\n\n\n    }\n    protected override void OnApplicationStarted()\n    {\n        log4net.Config.XmlConfigurator.Configure();\n        log4net.ILog log = log4net.LogManager.GetLogger(this.GetType());\n        log.Info(\"stuff\");\n        log.Info(\"stuff\");\n\n        log.Debug(\"log Debug\");\n            log.Info(\"log Info\");\n            log.Warn(\"log Warn\");\n            log.Error(\"log Error\");\n            log.Fatal(\"log Fatal\"); \n        SMSBAContextInitializer.Init();\n        const string userName = \"Administrator\";\n        if (Membership.GetUser(userName) == null)\n        {\n            Membership.CreateUser(userName, \"test##123\");\n        }\n        AreaRegistration.RegisterAllAreas();\n        RegisterGlobalFilters(GlobalFilters.Filters);\n        RegisterRoutes(RouteTable.Routes);\n        RegisterAllControllersIn(Assembly.GetExecutingAssembly());\n    }\n\n    protected override IKernel CreateKernel()\n    {\n        var modules = new INinjectModule[]\n        {\n            new ServiceModule()\n        };\n\n        return new StandardKernel(modules);\n    }\n    internal class ServiceModule : NinjectModule\n    {\n        public override void Load()\n        {\n            Bind&lt;IFormsAuthenticationService&gt;().To&lt;FormsAuthenticationService&gt;();\n            Bind&lt;IMembershipService&gt;().To&lt;AccountMembershipService&gt;();\n            Bind&lt;MembershipProvider&gt;().ToConstant(Membership.Provider);\n            Bind&lt;IDepartmentRepository&gt;().To&lt;DepartmentRepository&gt;();\n            Bind&lt;IPersonnelRepository&gt;().To&lt;PersonnelRepository&gt;();\n            Bind&lt;IPersonnelTitleRepository&gt;().To&lt;PersonnelTitleRepository&gt;();\n            Bind&lt;IProcessInputRepository&gt;().To&lt;ProcessInputRepository&gt;();\n            Bind&lt;ILoggingService&gt;().To&lt;Logging&gt;();\n        }\n    }\n}\n</code></pre>\n\n<p>this is global .asax\n file</p>\n\n<pre><code>public ActionResult LogOn(LogOnModel model, string returnUrl)\n        {\n            try\n            {\n                if (ModelState.IsValid)\n                {\n                    if (MembershipService.ValidateUser(model.UserName, model.Password))\n                    {\n                        FormsService.SignIn(model.UserName, model.RememberMe);\n                        if (Url.IsLocalUrl(returnUrl))\n                        {\n                            return Redirect(returnUrl);\n                        }\n                        else\n                        {\n                            return RedirectToAction(\"Index\", \"Department\");\n                        }\n                    }\n                    else\n                    {\n                        _loggingService.Log(\"Password changed for user \" + model.UserName);\n                       // AddError(\"The user name or password provided is incorrect.\");\n                        ModelState.AddModelError(\"\", \"The user name or password provided is incorrect.\");\n                    }\n                }\n\n            }\n\n            catch (Exception ex)\n            {\n                if (Logger.IsErrorEnabled)\n                {\n                    AddError(ex.Message);\n                    Logger.Error(\"login error : \" + ex.Message);\n                }\n            }\n            return View(model);\n        }\n</code></pre>\n\n<p>this is controller code</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12702783,"title":"How to check if user role has read/write access to a specific view","body":"<p>I have a <code>ASP.NET MVC 4</code> application.  I am trying to implement a solution where I check if a user can access a view, if not then display an error.  If the user can access a view then I need to check if that user has <code>read access</code> or <code>read and edit access</code> to that view.  If the user has read access then just a normal details view is displayed, if read and edit access then the user can see a details view or can edit the data.</p>\n\n<p>Is something like this possible?  I have tried looking through a couple of starter kits that I found on Codeplex but I can't find something like I want.  How would this be implemented?  If possible, if anyone knows of any sample project that I can download then I will appreciate.  I like to work through code, I learn more this way.</p>\n\n<p>I want this all to be database-driven.</p>\n"},{"tags":["asp.net-mvc-3","html5","jquery-ajax","kendo-ui","websync"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":264,"score":1,"question_id":12617610,"title":"Range Refresh + Partially refreshing + Kendo Datasource + Kendo Grid + WebSync","body":"<p>We have been implementing a web site with following technologies. </p>\n\n<p><strong>Client:</strong> Html5, KendoUI, WebSync(Publish, Subscriber)</p>\n\n<p><strong>Server:</strong> ASP.net MVC 3.0</p>\n\n<p>Grid has particular operations for each row. For example, we need to update the status of each row by clicking the operation menu after selecting the check boxes in particular rows. </p>\n\n<p>When we do this operation on menu, we send ajax request to MVC Controller to update the record in database and it will simply return true to client.Here, we have used WebSync <strong>publisher- subscriber</strong> model to actually notify client when this request complete, because these operations need sometime to process.</p>\n\n<p>When we get the callback from <strong>Web Sync</strong>, we update the kendo data grid as follows.</p>\n\n<pre><code>onMoveActionMessageReceived = function (data) {\n\n     $(\"#resultGrid\").data(\"kendoGrid\").dataSource.read();\n     WebSyncClient.UnsubscribeToMoveTransactionActions($('#moveTransactionIdTxt').val());\n }\n</code></pre>\n\n<p>As we have over 400k records in database for the grid data and we use paging, this solution is a time consuming solution and it affects on the user experience.</p>\n\n<p>Is there anyway to refresh the kendo datasource with given dataitems(ie.not total datasource).(Grid range update) ?\nor Are there any other solutions ?</p>\n"},{"tags":["asp.net-mvc-3","asp.net-mvc-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1866,"score":0,"question_id":9821025,"title":"What is the difference between mvc2 and mvc3 template in visual studio?","body":"<p>What is the difference between mvc2 and mvc3 template in visual studio? Can I use MVC2 template instead of MVC3 template? Just a beginner, so want to create some samples in MVC3 framework.</p>\n"},{"tags":["jquery","asp.net-mvc-3","prettyphoto"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":383,"score":0,"question_id":9068666,"title":"Prettyphoto changing lightbox height and width","body":"<p>I am trying to modify the height and width of the image box that opens when I click on a thumbnail but have not had any success.</p>\n\n<p>This is my code so far</p>\n\n<pre><code>@for (int i = 0; i &lt; Model.count; i++)\n{\n    &lt;a href= \"@Url.Action(\"GetImage\", \"Image\", new { id = i })\" rel=\"prettyPhoto[pp_gal]\"&gt;\n    &lt;img src= \"@Url.Action(\"GetImage\", \"Image\", new { id = i })\" alt=\"Image @(i+1)\" width=\"240\" height=\"240\" /&gt;&lt;/a&gt;\n}    \n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        $(\"a[rel^='prettyPhoto']\").prettyPhoto({\n            autoplay_slideshow: false,\n            show_title: true,\n            default_width: 300, //I have tried playing with these values\n            default_height: 200, //I have tried playing with these values\n            theme: 'pp_default',\n            overlay_gallery: false,                  \n            social_tools: false\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["asp.net-mvc","generics","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":4,"up_vote_count":30,"down_vote_count":0,"view_count":3568,"score":30,"question_id":4760783,"title":"Is it possible to create a generic @helper method with Razor?","body":"<p>I am trying to write a helper in Razor that looks like the following:</p>\n\n<pre><code>@helper DoSomething&lt;T, U&gt;(Expression&lt;Func&lt;T, U&gt;&gt; expr) where T : class\n</code></pre>\n\n<p>Unfortunately, the parser thinks that <code>&lt;T</code> is the beginning of an HTML element and I end up with a syntax error.  Is it possible to create a helper with Razor that is a generic method?  If so, what is the syntax?</p>\n"},{"tags":["html","asp.net-mvc-3","razor","view","jeditable"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12694589,"title":"jEditable TextArea, I need to maintain formatting on save but show user friendly text on edit (MVC3)","body":"<p>I am using the jEditable plugin on a textarea in my program.  What I would like to do is when I click in the text area I would like to enter something like:\nDo this first\nDo this second\nDo this third.</p>\n\n<p>When I submit, I would like jEditable to keep the formatting I have in place, which my current textarea does, however when I click on the textarea to edit again, it displays the following:\nDo this first<br>Do this second<br>Do this third.</p>\n\n<p>I want to be able to click in the textarea again to edit and then have it show user friendly text, not the html that it does, but I need the formatting to remain in place.</p>\n\n<p>Below is my javascript, view, and controller.  Any help would be great!</p>\n\n<p>Javascript:</p>\n\n<pre><code>$(\".textarea\").editable(\"/ShoppingList/UpdateNotesReminders\",\n{\n     type      : 'textarea',\n     rows      : 7,\n     columns   : 15,\n     cancel    : 'Cancel',\n     submit    : 'Save',\n     method: 'POST',\n     placeholder     : 'No Notes have been entered',\n     callback: function(value, settings) { \n    var retval = value.replace(/\\n/gi, \"&lt;br&gt;\"); \n    $(this).html(retval);\n}\n});\n</code></pre>\n\n<p>Action:</p>\n\n<pre><code>//This action is called when save button is clicked after editing notes and reminders.\n        [ValidateInput(false)]\n        public string UpdateNotesReminders(string id, string value)\n        {\n            HttpCookie notesRemindersCookie = new HttpCookie(\"notesRemindersCookie\");\n            notesRemindersCookie.Value = value.Replace(\"&lt;br&gt;\", \"%0a\");\n            notesRemindersCookie.Expires = DateTime.Now.AddDays(1);\n\n            this.ControllerContext.HttpContext.Response.Cookies.Add(notesRemindersCookie);\n            return value;\n        }\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;div class=\"textarea dynform\" id=\"NotesReminders\"&gt;@Html.Raw(Model.NotesReminders)&lt;/div&gt; \n</code></pre>\n"},{"tags":["javascript","jquery","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12686641,"title":"restrict user to temper the address url","body":"<p>i am creating a small web application using asp.net mvc3    </p>\n\n<pre><code>http://localhost:1871/ManageMember/Admin/MemberDetail/3\n</code></pre>\n\n<p>for example i have the above url...as you can see that the parameter 3 is easily visible and can be changed by user and similarly can view the details regarding that particular id parameter </p>\n\n<pre><code>  http://localhost:1871/ManageMember/Admin/MemberDetail/5\n</code></pre>\n\n<p>I want to stop the user to temper the url </p>\n"},{"tags":["asp.net",".net","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":140,"score":0,"question_id":12700943,"title":"MVC ViewModel Error - No parameterless constructor defined for this object","body":"<p>I would like to know how can I use my ViewModel on the Create Action? I tried several examples I found here in the forum, but none solved my problem. I've been racking my brain for a few days, but can't figure out what is wrong.</p>\n\n<p>Whenever I click the Create button I get the following error:\nNo parameterless constructor defined for this object.</p>\n\n<pre><code>@model MvcMusicStore.ViewModels.AlbumViewModel\n\n@{\n    ViewBag.Title = \"Create\";\n}\n\n&lt;h2&gt;Create&lt;/h2&gt;\n\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n@using (Html.BeginForm()) {\n    @Html.ValidationSummary(true)\n    &lt;fieldset&gt;\n        &lt;legend&gt;Album&lt;/legend&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.AlbumItem.GenreId, \"Genre\")\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.DropDownList(\"Genres\", String.Empty)\n            @Html.ValidationMessageFor(model =&gt; model.AlbumItem.GenreId)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.AlbumItem.ArtistId, \"Artist\")\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.DropDownList(\"Artists\", String.Empty)\n            @Html.ValidationMessageFor(model =&gt; model.AlbumItem.ArtistId)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.AlbumItem.Title)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.AlbumItem.Title)\n            @Html.ValidationMessageFor(model =&gt; model.AlbumItem.Title)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.AlbumItem.Price)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.AlbumItem.Price)\n            @Html.ValidationMessageFor(model =&gt; model.AlbumItem.Price)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.AlbumItem.AlbumArtUrl)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.AlbumItem.AlbumArtUrl)\n            @Html.ValidationMessageFor(model =&gt; model.AlbumItem.AlbumArtUrl)\n        &lt;/div&gt;\n\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Create\" /&gt;\n        &lt;/p&gt;\n    &lt;/fieldset&gt;\n}\n\n&lt;div&gt;\n    @Html.ActionLink(\"Back to List\", \"Index\")\n&lt;/div&gt;\n</code></pre>\n\n<p>Create.cshtml</p>\n\n<pre><code>    public class StoreManagerController : Controller\n        {\n            private MusicStoreDB db = new MusicStoreDB();\n\n            //\n            // GET: /StoreManager/Create\n\n            public ActionResult Create()\n            {\n                var viewModel = new AlbumViewModel()\n                {\n                    Genres = new SelectList(db.Genres, \"GenreId\", \"Name\"),\n                    Artists = new SelectList(db.Artists, \"ArtistId\", \"Name\")\n                };\n                return View(viewModel);\n            } \n\n            //\n            // POST: /StoreManager/Create\n\n            [HttpPost]\n            public ActionResult Create(AlbumViewModel vm)\n            {\n                if (ModelState.IsValid)\n                {\n                    db.Albums.Add(vm.AlbumItem);\n                    db.SaveChanges();\n                    return RedirectToAction(\"Index\");  \n                }\n\n                vm.Genres = new SelectList(db.Genres, \"GenreId\", \"Name\", vm.AlbumItem.GenreId);\n                vm.Artists = new SelectList(db.Artists, \"ArtistId\", \"Name\", vm.AlbumItem.ArtistId);\n                return View(vm);\n            }\n}\n</code></pre>\n\n<p>StoreManager.cs - Snippet</p>\n\n<pre><code>public class AlbumViewModel\n    {\n        public AlbumViewModel()\n        {\n            //  nothing\n        }\n\n        public Album AlbumItem { get; set; }\n        public SelectList Genres { get; set; }\n        public SelectList Artists { get; set; }\n    }\n\npublic class Album\n    {\n        public Album()\n        {\n            //  nothing\n        }\n\n        public virtual int AlbumId { get; set; }\n        public virtual int GenreId { get; set; }\n        public virtual int ArtistId { get; set; }\n        public virtual string Title { get; set; }\n        public virtual decimal Price { get; set; }\n        public virtual string AlbumArtUrl { get; set; }\n        public virtual Genre Genre { get; set; }\n        public virtual Artist Artist { get; set; }\n    }\n\npublic class Artist\n    {\n        public Artist()\n        {\n            // nothing\n        }\n\n        public virtual int ArtistId { get; set; }\n        public virtual string Name { get; set; }\n    }\n\npublic class Genre\n    {\n        public Genre()\n        {\n            // nothing\n        }\n\n        public virtual int GenreId { get; set; }\n        public virtual string Name { get; set; }\n        public virtual string Description { get; set; }\n        public virtual List&lt;Album&gt; Albums { get; set; }\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","google-maps"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":12693347,"title":"ASP.NET MVC 3 Save lat and long from Google Map","body":"<p>I have a Google Map on my View.</p>\n\n<p>I wish to save the long and lat of the marker that has just recently been added to the Map.\nMy ViewModel has a Location object which contains a lat and long.</p>\n\n<p>Does anyone know how I can achieve this?</p>\n\n<p>The following is the code:</p>\n\n<pre><code>function addMarker(location, isdragable) {\n    marker = new google.maps.Marker({\n    position: location,\n    map: _gmMap,\n    icon: '../../Content/images/pin-red_32.png',\n    draggable: isdragable\n    });\n$('#mainPlaceHolder_hdnlatlong').val(location.lat() + ',' + location.lng());\nmarkersArray.push(marker);\nif (isdragable) {\n    google.maps.event.addListener(marker, 'dragend', function () {\n    showLocation(marker.getPosition().lat() + ',' + marker.getPosition().lng(), true);\n    });\n}\n$('#spmsg').hide();\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","unit-testing","unity","automocking"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12700988,"title":"Unit test MVC Controller with UnityAutoMoq resolving an interface that takes constructor parameteres","body":"<p>As the title says, I'm attempting to resolve an interface that implements a concrete class that also takes a constructor.</p>\n\n<p>Here's the concrete service class as an example:</p>\n\n<pre><code>public class MessageService : IMessageService\n{\n    private readonly IMessageGenerator _messageGenerator;\n\n    public MessageService(IMessageGenerator messageGenerator)\n    {\n        _messageGenerator = messageGenerator;\n    }\n\n    public string GetMessage()\n    {\n        return string.Concat(_messageGenerator.GetMessage(), \"\");\n    }\n}\n</code></pre>\n\n<p>As you can see this service class also requires an interface as a constructor parameter. The MVC controller constructor looks like this:</p>\n\n<pre><code>    private readonly IMessageService _messageSvc;\n\n    public HomeController(IMessageService messageSvc)\n    {\n        _messageSvc = messageSvc;\n    }\n</code></pre>\n\n<p>I have resolved the interfaces in a Bootstrapper thanks to Unity.Mvc3</p>\n\n<pre><code>var container = new UnityContainer();\n\ncontainer\n        .RegisterType&lt;IMessageService, MessageService&gt;()\n        .RegisterType&lt;IMessageGenerator, MessageGenerator&gt;();\n</code></pre>\n\n<p>So the main issue I'm having is how can I pass a mocked instance of the IMessageGenerator interface to the IMessageService inside a unit test using UnityAutoMoq? I would think that something like this would work, but it doesn't:</p>\n\n<pre><code>    [TestMethod]\n    public void Index()\n    {\n        var container = new UnityAutoMoqContainer();\n        var controllerContext = container.Resolve&lt;ControllerContext&gt;();\n        var nMsgSvc = container.Resolve&lt;IMessageService&gt;(container.Resolve&lt;IMessageGenerator&gt;);\n        var sut = new HomeController(nMsgSvc) { ControllerContext = controllerContext };\n\n        ViewResult result = sut.Index() as ViewResult;\n\n        Assert.AreEqual(\"Hello from the MessageGenerator via the MessageService\", result.ViewBag.Message);\n    }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12694623,"title":"Route to View in Root in ASP.NET MVC","body":"<p>I have an ASP.NET MVC 3 app. I kind of understand routes, but then sometimes I get stuck on something. Currently, I have a file structure like the following:</p>\n\n<pre><code>/Controllers\n  Child1Controller.cs\n  Child2Controller.cs\n  RootController.cs\n/Views\n  Index.cshtml\n  Test.cshtml\n  Child1\n    Index.cshtml\n    Item.cshtml\n  Child2\n    Index.cshtml\n    Item.cshtml\n</code></pre>\n\n<p>I can successfully get html from my views in Child1 and Child2. By visiting /Child1/Index or /Child2/Index in my browser. However, I can't figure out how to just use /Index to see the contents of Index.cshtml that is in the /Views directory. How do I wire that up?</p>\n\n<p>Thank you!</p>\n"},{"tags":["asp.net",".net","asp.net-mvc-3","iis"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":536,"score":0,"question_id":11043168,"title":"403 forbidden after publishing asp.net MVC","body":"<p>I know this has been answered a few times but none of the solutions worked for me. I published my ASP.NET MVC 3 application (It was just the internet template without any changes to it) to see if I could get it to work publically. However, when I visit the site it shows up with a 403 error. Coming from a php/linux background, I'm confused and have no clue where to look. I've only been learning .NET for about 8-9 months and everything I've been testing on before was on the local development server through VS2010. It almost appears like the server doesnt know it should be an MVC application or I have to change my routing. </p>\n\n<p>Anyway, I checked to make sure that the server setting is .NET 4. Any help would be greatly appreciated. </p>\n\n<p>ALSO, It's a shared hosting environment using arvixe.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","visual-studio-2010","iis","iis-express"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":202,"score":3,"question_id":12294099,"title":"Is there a way I can avoid iisexpress startup delays when it loads DLLs every time I do a build?","body":"<p>I am using VS2010 and IIS Express. When I do a build there are long delays while all the dlls load up. On my rather slow machine it's usually 3-4 minutes.</p>\n\n<pre><code>'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'Anonymously Hosted DynamicMethods Assembly'\nMicrosoft.WindowsAzure.ServiceRuntime Verbose: 500 : Role instance status check starting\nMicrosoft.WindowsAzure.ServiceRuntime Verbose: 502 : Role instance status check succeeded: Ready\nThe thread '&lt;No Name&gt;' (0x1100) has exited with code 0 (0x0).\nMicrosoft.WindowsAzure.ServiceRuntime Verbose: 500 : Role instance status check starting\nMicrosoft.WindowsAzure.ServiceRuntime Verbose: 502 : Role instance status check succeeded: Ready\nThe thread '&lt;No Name&gt;' (0xc18) has exited with code 0 (0x0).\nMicrosoft.WindowsAzure.ServiceRuntime Verbose: 500 : Role instance status check starting\nMicrosoft.WindowsAzure.ServiceRuntime Verbose: 502 : Role instance status check succeeded: Ready\n'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_MSIL\\System.Configuration.Install\\v4.0_4.0.0.0__b03f5f7f11d50a3a\\System.Configuration.Install.dll'\nThe thread '&lt;No Name&gt;' (0xdf0) has exited with code 0 (0x0).\n'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_MSIL\\System.Design\\v4.0_4.0.0.0__b03f5f7f11d50a3a\\System.Design.dll'\n'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_MSIL\\Microsoft.Build.Tasks.v4.0\\v4.0_4.0.0.0__b03f5f7f11d50a3a\\Microsoft.Build.Tasks.v4.0.dll'\n'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_MSIL\\Accessibility\\v4.0_4.0.0.0__b03f5f7f11d50a3a\\Accessibility.dll'\nMicrosoft.WindowsAzure.ServiceRuntime Verbose: 500 : Role instance status check starting\nMicrosoft.WindowsAzure.ServiceRuntime Verbose: 502 : Role instance status check succeeded: Ready\n'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_MSIL\\System.Drawing.Design\\v4.0_4.0.0.0__b03f5f7f11d50a3a\\System.Drawing.Design.dll'\n'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.Net\\assembly\\GAC_MSIL\\System.Web.Mobile\\v4.0_4.0.0.0__b03f5f7f11d50a3a\\System.Web.Mobile.dll'\nMicrosoft.WindowsAzure.ServiceRuntime Verbose: 500 : Role instance status check starting\nMicrosoft.WindowsAzure.ServiceRuntime Verbose: 502 : Role instance status check succeeded: Ready\n'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\Temporary ASP.NET Files\\root\\977c2a31\\7c0f0d28\\App_Web_aohydr2s.dll', Symbols loaded.\nThe thread '&lt;No Name&gt;' (0xe38) has exited with code 0 (0x0).\n</code></pre>\n\n<p>Is there some way I could preload these or leave IIS running. The Microsoft ones don't change from one week to another but it takes a few minutes of me watching them load in the output window every time I make a small change to my MVC C# code and want to check out the changes with a build and deploy.</p>\n"},{"tags":["c#","asp.net-mvc-3","user","ef-code-first","relation"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":223,"score":2,"question_id":10472324,"title":"Code-first relation to aspnet_users in C#","body":"<p>How can I link a table created with the Code-First approach to the default Users table of ASP.NET? I am working with Entity Framework 4.3.1 and MVC3 in C#.</p>\n\n<p>The project I am working on is meant for an organisation that organizes tournaments. When they create a tournament, a new user has to be created linked to that tournament so that when this user logs in, he can only work with that particular tournament.</p>\n\n<p>Any idea how to make this relation with Code-First?</p>\n\n<p>Thanks in advance,\nBart</p>\n"},{"tags":["asp.net-mvc-3","asp.net-mvc-4","visual-studio-2012",".net-4.5","moles"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":159,"score":1,"question_id":12514961,"title":"Assembly created by Moles in VS2010 is referencing MVC3 and MVC4 after install of VS2012","body":"<p><em>Assembly 'dllname.Moles, Version=1.2.0.0, Culture=neutral, PublicKeyToken=null' uses 'System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' which has a higher version than referenced assembly 'System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'</em></p>\n\n<p>A MVC3 solution targetting the .NET4.0 framework, with a unittest project using the Moles framework, worked perfectly in Visual Studio 2010. MVC4 was not installed on this computer.</p>\n\n<p>After installation of Visual Studio 2012 (and the mandatory in place replacement of .NET4.0 by .NET4.5 and the installation of MVC4), the unittest project doesn't compile anymore in VS2010, it complains about the given error.</p>\n\n<p>When we inspect the assembly, we see effectively that it is referencing MVC4 and MVC3??</p>\n\n<ul>\n<li>BoneSoft.CSS, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null</li>\n<li>itextsharp, Version=5.1.2.0, Culture=neutral, PublicKeyToken=8354ae6d2174ddca</li>\n<li>Microsoft.ExtendedReflection, Version=0.94.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35</li>\n<li>Microsoft.Moles.Framework, Version=0.94.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35</li>\n<li>mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</li>\n<li>mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</li>\n<li>NHibernate.Validator, Version=1.3.1.4000, Culture=neutral, PublicKeyToken=70154e18752585bd</li>\n<li>System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</li>\n<li>System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</li>\n<li>System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</li>\n<li>System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</li>\n<li>System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</li>\n<li>System.Runtime.Caching, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</li>\n<li>System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</li>\n<li><strong>System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35</strong></li>\n<li><strong>System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35</strong></li>\n<li>System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</li>\n</ul>\n\n<p>MVC4 is never referenced in the whole solution, but Moles somewhere thinks it must be included when generating a 'moles assembly' of a assembly who is referencing MVC3.</p>\n\n<p>I have also moles assemblies of other assemblies who are not referencing MVC3 and there no problem at compiling time.</p>\n\n<p>I deleted already the moles assembly in the project, rebuilded and recreated the moles assembly: same error.</p>\n\n<p>Ideas where to search the problem?</p>\n"},{"tags":["c#","asp.net-mvc-3","internet-explorer-8","png"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12698516,"title":"png returned from database in MVC3 not displaying in IE8","body":"<p>In my MVC site, I'm returning image from a database, using the controller action below. This works fine for the most part. The only problem I'm having is that in IE8 and lower, pngs aren't being displayed. They show the red \"X\" instead. Any ideas?</p>\n\n<pre><code>public ActionResult Image(Guid id)\n{\n    ContentService svc = new ContentService();\n\n    BinaryContent content = svc.GetBinaryContentById(id, \"en-US\");\n\n    string mimeType = string.Format(\"image/{0}\", content.BinaryType);\n    string fileName = string.Format(\"{0}.{1}\", id.ToString(), content.BinaryType);\n\n    return File(content.Data, mimeType, fileName);\n} \n</code></pre>\n"},{"tags":["asp.net","ajax","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12673325,"title":"ASP.NET MVC 3 Ajax.BeginForm resetting model values unexpectedly","body":"<p>I have a partial view which contains the following snippet:</p>\n\n<pre><code>@model Mbrrace.Domain.MbrraceForm\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"span12 form-horizontal\"&gt;\n    @using (Ajax.BeginForm(\"DetailsSection11\", \"DataForm\",\n        new AjaxOptions\n        {\n            HttpMethod = \"POST\",\n            OnComplete = \"NextTab\"\n        }\n        ))\n</code></pre>\n\n<p>In the controller which calls the view which displays this partial view some of the model values are preset but not displayed or otherwise used. When the Ajax submit happens some of these values have been cleared (ints changed to zero and strings to null) however a date value is preserved.  The values set in the form itself are returned correctly.</p>\n\n<p>I have checked that the preset values are correct when they reach the form using @Html.DisplayFor to display them.</p>\n\n<p>I use Ajax.BeginForm and models elsewhere in the solution with no problems at all. I have checked that the ModelState before and after submitting and it is valid. I have also tried ModelState.Clear() with no effect.</p>\n\n<p>Any ideas what the problem might be before I tear out what little is left of my hair.</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12698191,"title":"Where should SelectListItem lists go?","body":"<p>In an MVC application, I have some DropDownLists. In my controller I create the <code>IEnumerable&lt;SelectListItem&gt;</code>s and transfer them to my View. Unfortunately, if there is a validation error, I need to recreate those lists, otherwise the view rendering fails.</p>\n\n<p>In the controller action method I'm doing:</p>\n\n<pre><code>var possibilities = _repo.Objects.Select(o=&gt;new SelectListItem(...));\nviewmodel.Possibilities = possibilities;\nreturn View(viewmodel); \n</code></pre>\n\n<p>The view-model has the Possibilities property defined like this:</p>\n\n<pre><code>IEnumerable&lt;SelectListItem&gt; Possibilities { get; set; }\n</code></pre>\n\n<p>And in my view I access it:</p>\n\n<pre><code>@Html.DropDownListFor(vm=&gt;vm.ThePossibility, vm.Possibilities)\n</code></pre>\n\n<p>The problem is that when the form post action method is called, the view model passed to it has a null for <code>Possibilities</code>, so when I call:</p>\n\n<pre><code>if(!ModelState.IsValid)\n    return View(model);\n</code></pre>\n\n<p>The view doesn't get rendered.</p>\n\n<p>I understand why the propery is null on the post action method, but what's the best way of correcting this? I'd rather not reinitialize those lists.</p>\n\n<p>Thanks.</p>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-validate","requiredfieldvalidator","client-side-validation"],"answer_count":2,"favorite_count":2,"up_vote_count":12,"down_vote_count":0,"view_count":6144,"score":12,"question_id":5731788,"title":"Required validation only if the field is visible in asp.net mvc","body":"<p>I am using the <code>[Required]</code> attribute for the Clientside validation in asp.net mvc 3.</p>\n\n<p>The class looks as:</p>\n\n<pre><code>public class User\n{\n    [Required(ErrorMessage = \"First Name is required\")]\n    public string FirstName { get; set; }\n</code></pre>\n\n<p>I want the field FirstName to be validated on if its visible, which will be shown only on certain consition. How can i do that?</p>\n\n<p>i have used the following, but still it looks to validate for the required field of that hidden field.</p>\n\n<pre><code>$('#registerForm').validate({ ignore: \":not(:visible)\" });\n</code></pre>\n"},{"tags":["asp.net-mvc-3","richtextbox"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":909,"score":2,"question_id":10503438,"title":"Rich Text Area in MVC3","body":"<p>Do we have any Rich Textbox/Textarea options in MVC3 or do we need to use jquery RichTextbox plugins? </p>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework","one-to-one"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":12693580,"title":"EF: one-to-one relationship","body":"<p>I am trying to set up a bi-directional one-to-one relationship. However, I am failing to get a bi-directional setting for two entities. </p>\n\n<p>For example, lets say one person has one phone number, and one phone number can only be associated to one person. I would have:</p>\n\n<pre><code>  public class Person : Entity\n  {\n    public long PersonId { get; set; }\n    public virtual PhoneNumber PhoneNumber {get; set; }\n  }\n\n  public class PhoneNumber : Entity\n  {\n    public long PhoneNumberId { get; set; }\n  }\n</code></pre>\n\n<p>However, with this re-arrangement, I cannot get a bi-directional setting. i.e. I cannot have <code>phoneNumber.Person.</code></p>\n\n<hr>\n\n<p><em>What I have tried:</em></p>\n\n<pre><code>  public class PhoneNumber : Entity\n  {\n    public long PhoneNumberId { get; set; }\n\n    [InverseProperty(\"PersonId\")]\n    public virtual Person Person {get; set; }\n  }\n</code></pre>\n\n<p>This does not seem to work when I execute the following code:</p>\n\n<pre><code>   var realNumber = new PhoneNumber();\n   var person = new Person() {PhoneNumber = realNumber};\n   context.SaveChanges();\n</code></pre>\n\n<p>Here, the PhoneNumber entity has a column Person (set to NULL), and the person has a column for PhoneNumber (has value).</p>\n"},{"tags":[".net","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12678241,"title":"Retrieving Post parameters and values MVC3","body":"<p>How can I get Post parameters and their values sent by the client within an action in MVC? I don't want to add a parameter to the action method matching the JSON structure sent by the client. I want to use the Request or any other property that exposes this information.</p>\n\n<p>For instance, if the action is:</p>\n\n<pre><code>public ActionResult Index()\n</code></pre>\n\n<p>I don't want to write something like this to achieve the result:</p>\n\n<pre><code>public ActionResult Index(MyObject object)\n</code></pre>\n\n<p>Where MyObject is the class that matches the JSON sent by the client\nI want to navigate the Request or the raw text sent in the Request to get this info</p>\n\n<p>Important: I'm executing via AJAX a HttpPost Request, I'm not submiting a form.</p>\n\n<p>Using Request.InputStream works for submit Posts, but not for Ajax. The code for this is:</p>\n\n<pre><code>var input = new StreamReader(Request.InputStream).ReadToEnd();\n</code></pre>\n\n<p>In the case of Ajax the InputStream is empty</p>\n"},{"tags":["jquery","asp.net-mvc-3","razor","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12697005,"title":"why do i have to render the jquery with the view","body":"<p>Im having some issues with query and binding as it seems.</p>\n\n<p>in my _Layout i got the jquery at the bottom of the page, it got a <code>.on('click')</code></p>\n\n<p>In got a partialView that got a \"add item\" link, when i click it makes a <code>$.post()</code> that returns a parialview and populates it in a div container.</p>\n\n<p>Next time when i try to add another item with a click on the same link, it just acts like a link and refreshed the site, like it lost the binding to the jquery. If i choose to have the jquery in the partial that renders over it work every time, but for the sake of structure i dont want to have jquery scripts in the middle of the page.</p>\n\n<p>Why is that and what can i do?</p>\n\n<p><strong>EDIT:</strong><br />\nthis is the bind i got. it works like before just once.</p>\n\n<pre><code>$('.menu-day').on('click', 'a.addItem', function (e) {\n          e.preventDefault();\n          console.log('ok');\n          addRow($(this).attr('id'));\n});\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","data-annotations"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":12681959,"title":"Allow RangeAttribute to apply to properties in sub-viewmodels","body":"<p>I am using a viewmodel to pass data to my Razor view with jquery unobtrusive validation and standard attribute decoration (MVC 3.0).  My viewmodel looks like this (ignore the summarized names):</p>\n\n<pre><code>public class MyViewModel\n{\n   public MyViewItem Item { get; set; }\n   public MyViewItem Item2 { get; set; }\n}\n\npublic class MyViewItem\n{\n   public int Value { get; set; }\n   public CustomEnum MyEnum { get; set; }\n}\n</code></pre>\n\n<p>What I want to be able to do is decorate the Item and Item2 values on the MyViewModel with different range attributes.  However these do not appear when I use the <em>EditorFor</em> extension of <em>Html</em> as they are not on the specific Value property that is used.</p>\n\n<p>i.e.</p>\n\n<pre><code>public class MyViewModel\n{\n   [Range(0,100)] // will actually be applied on the Item.Value property\n   public MyViewItem Item { get; set; }\n\n   [Range(50,60)] // will actually be applied on the Item.Value property\n   public MyViewItem Item2 { get; set; }\n}\n</code></pre>\n\n<p>Is there anyway I can achieve this by custom attributes or some other form i.e. custom data binding, custom attributes etc</p>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12694772,"title":"How can I make a news page, with inline comment posting, using MVC3?","body":"<p>I've been learning MVC3 in the last few weeks and I'm trying to write what I believe should be a simple enough piece of functionality, but I'm having real problems getting it to work correctly.</p>\n\n<p><strong>The scenario</strong></p>\n\n<p>My website will contain news posts, summarised on the home page, with links to view the full details of each article in it's own page.</p>\n\n<p>Comments can be made on each article, and these comments are shown at the end of each article's details page. Authenticated users should be able to post their own comments to the article from the page that shows the article itself. I want to avoid users being taken to a seperate page (although I understand this is easier from a code perspective, I disagree that it's a good UX!).</p>\n\n<p>For an example of how I want this to look, Scott Hanselman's blog (<a href=\"http://www.hanselman.com\" rel=\"nofollow\">http://www.hanselman.com</a>) is a perfect example (albeit that his home page shows the entire article rather than just a summary!) - it links through to the comments page, and the \"Add comments\" form sits neatly at the bottom, inline with the article.</p>\n\n<p><strong>Where I'm at so far</strong></p>\n\n<p>I've managed to write the Controller for my news section, with an Index method (which retrieves X number of most recent posts) and a \"Comments\" method to show the full article and comments. I've also created a partal view called \"CommentForm\" with it's own Controller method. Code snippets from the controller below:</p>\n\n<pre><code>//\n// GET: /News/ \npublic ActionResult Index()\n{\n    using (var nm = new NewsManager())\n    {\n        var news = nm.GetLatestActiveNewsArticles(50, \"System\");\n        return View(news);\n    }\n}\n//\n// GET: /News/Comments/20\npublic ActionResult Comments(int id)\n{\n    using (var nm = new Rapallo.Core.Managers.NewsManager())\n    {\n        var article = nm.GetArticle(id);\n        return View(article);\n    }\n}\n// GET: /News/CommentForm/20\n[HttpGet()]\npublic ActionResult CommentForm(int newsId)\n{\n    return View(new Rapallo.DataAccess.Comment() { NewsId = newsId });\n}\n// \n// POST: /News/Comments/20\n[Authorize()]\n[HttpPost()]\npublic ActionResult Comments(Comment comment)\n{\n    using (var nm = new NewsManager())\n    {\n        var article = nm.GetArticle(comment.NewsId.Value);\n        if (null == article) HttpNotFound();\n    }\n    using (var cm = new CommentManager())\n    {\n        if (cm.AddCommentToNews(comment.NewsId.Value, CurrentUser.RapalloUser.Id, comment.Body))\n        return RedirectToAction(\"Comments\", \"News\", new { id = comment.NewsId.Value });\n    }\n    return HttpNotFound();\n}\n</code></pre>\n\n<p>And from the Comments view, the code snippet to show where I'd like my add comment form:</p>\n\n<pre><code>@if (User.Identity.IsAuthenticated)\n{\n    @Html.Partial(\"Comment\", new Rapallo.DataAccess.Comment() { NewsId = Model.Id });\n}\n</code></pre>\n\n<p>This view specifies:</p>\n\n<pre><code>@model Rapallo.DataAccess.News\n</code></pre>\n\n<p>And finally, the comment form itself:</p>\n\n<pre><code>@model Rapallo.DataAccess.Comment\n@using (Html.BeginForm())\n{ \n    @Html.TextAreaFor(m =&gt; m.Body);\n    &lt;input type=\"submit\" value=\"Send Comment\" /&gt;\n}\n</code></pre>\n\n<p><strong>The problem</strong></p>\n\n<p>In a nutshell, when I submit the comment form (which renders correctly), NewsId on the Comment model is not populated so the controller cannot associate the new comment with the correct news post.</p>\n\n<p>I'd appreciate if someone could point out where I'm going wrong! I've tried to adapt some code from NerdDinner to make this work, as well as spending countless hours on the train trying various combinations of partial views, different models, and even renaming methods in my controller in an attempt to get this to work.</p>\n\n<p>I'm quite keen on encapsulating the \"add comment\" functionality into it's own separate form and being able to use this to add comments to more than just news articles. The database schema and domain models already support this, I just can't get the UI to work.</p>\n\n<p>Any help would be very welcome and gratefully received.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","forms-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":184,"score":1,"question_id":12696654,"title":"Problems with ASP.NET MVC 4 Display Modes and Forms Authentication","body":"<p>I have an ASP.NET MVC 4 application that uses forms authentication (I started with the ASP.NET MVC 4 mobile template).  I have also added display modes functionality to support mobile devices.  However, forms authentication doesn’t seem to work with these different display modes.</p>\n\n<p>In Global.asax Application_Start, I have</p>\n\n<pre><code>DisplayModeProvider.Instance.Modes.Insert(1, new DefaultDisplayMode(\"iPhone\")\n{\n    ContextCondition = (context =&gt; context.GetOverriddenUserAgent().IndexOf(\"iPhone\", StringComparison.OrdinalIgnoreCase) &gt;= 0)\n});\n</code></pre>\n\n<p>to register a display mode for an iPhone.</p>\n\n<p>In ~/Views/Shared, I have _Layout.cshtml for desktop browsers and _Layout.iPhone.cshtml for iPhones.  In ~/Views/Home, I have Index.cshtml for desktop browsers and Index.iPhone.cshtml for iPhones.  In ~/Views/Account, I have the standard .cshtml files that come with the ASP.NET MVC 4 mobile web template (Index, Login, Register, etc.).</p>\n\n<p>In FilterConfig.cs RegisterGlobalFilters, I added filters.Add(new System.Web.Mvc.AuthorizeAttribute()); so that authentication is needed to navigate anywhere in the site (except the AccountController, which has [AllowAnonymous] on the Login and Register action methods).</p>\n\n<p>This is all basic stuff and set up correctly.  When navigating to the site in the browser (from both a desktop browser and an iPhone browser), the display modes settings/configuration works great and I’m taken to either the normal .cshtml files or the iPhone-specific files.</p>\n\n<p>The problem occurs when adding forms authentication.</p>\n\n<p>When I first go to the site, since I’m not authenticated, I’m redirected to the Login page (as expected).  The URL shows as <code>http://localhost:63087/Account/Login?ReturnUrl=%2f</code> .  After logging in, I’m redirected back to the root and on to the correct display mode.  All fine.</p>\n\n<p>However, the URL doesn’t change.  It stays as <code>http://localhost:63087/Account/Login?ReturnUrl=%2f</code> .  This is a problem.  Now any future navigation gets confused and sends me back to the Login page (even though I’ve already logged in and was authenticated).</p>\n\n<p>How can this problem be fixed?</p>\n\n<p>How can an ASP.NET MVC 4 application with multiple display modes be made to work correctly with forms authentication?</p>\n\n<p>Thanks.</p>\n"},{"tags":[".net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":59,"score":4,"question_id":12696506,"title":"Getting the raw Request in MVC3","body":"<p>I need to get the raw request string. Below is an example of the http request sent to the Controller. Actually, I need Post data (last line). How can I get that?</p>\n\n<p>Notice that I don't want to use the automatic JSON model binder. Actually, I need the raw JSON text</p>\n\n<pre><code>POST http://www.anUrl.com/CustomExport/Unscheduled HTTP/1.1\nAccept: application/json, text/javascript, */*; q=0.01\nContent-Type: application/json; charset=utf-8\nX-Requested-With: XMLHttpRequest\nReferer: http://www.anUrl.com/CustomExport\nAccept-Language: en-us\nAccept-Encoding: gzip, deflate\nUser-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)\nHost: localhost:8000\nContent-Length: 102\nConnection: Keep-Alive\nPragma: no-cache\n\n{\"runId\":\"1\",\"fileDate\":\"8/20/2012\",\"orderStartMinDate\":\"10/02/2012\",\"orderStartMaxDate\":\"10/02/2012\"}\n</code></pre>\n\n<p>This last line is what I need. This doesn't come in</p>\n\n<pre><code>var input = new StreamReader(Request.InputStream).ReadToEnd();\n</code></pre>\n"},{"tags":["asp.net-mvc-3","powershell","powershell-v2.0"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":379,"score":1,"question_id":9049244,"title":"How can I t4 scaffold from powershell.exe?","body":"<p>NuGet's PM console is great and all but you have to be in Visual Studio to use it. I have asked this question before without any ansewr and I find it hard to believe there is no documentation on the topic.</p>\n\n<p>I have two users: User A sell shoes, User B sells cars. Each have different property needs.\nIf I allow them to write there needed properties/datatypes to their respective Product.cs entity, how can I use PowerShell.exe to:</p>\n\n<p>Scaffold the controller, views, dbcontext and repositories?</p>\n\n<p>I know I can do a MSBuild afterwards, but how is it there seems to be no way to use PowerShell from say a bat file to do the scaffolding outside VS 2010?</p>\n\n<p>Any insight would be appreciated.</p>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework-4.1","ef-code-first"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12672892,"title":"Accessing a table that's not in the data model","body":"<p>My classic beginner's MVC3 code-first application has in its data model a POCO class that contains pairs of key/value. The app reads from the DB a set of these pairs which represents the structure of another table (key=field name/ value= field type). Now I need to make the same app access that table. </p>\n\n<p>It's a new app and I control the architecture, so I have no restrictions: the table can be defined in the same/another DB, app can use any technology, etc. </p>\n\n<p>What would be the best approach? Can I still do it using the Dbcontext although the model is already built? </p>\n\n<p>Note: using reflection I have created a new type of the table's structure and it'd be nice if I could use it when accessing the table. </p>\n\n<p>Thanks</p>\n"},{"tags":["vb.net","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12691864,"title":"Can't Create Contact Form in MVC 3","body":"<p>I am trying to create a simple contact form.  Here is my model:</p>\n\n<pre><code>Imports System.Data.Entity\nImports System.ComponentModel.DataAnnotations\n\nPublic Class Contact\n\n    Public Property Name() As String\n    Public Property Title() As String\n    Public Property Company() As String\n    Public Property CompanyAddress() As String\n    Public Property PhoneNumber() As String\n    Public Property NumberOfEmployees() As String\n    Public Property EmailAddress() As String\n    Public Property Subject() As String\n    Public Property Message() As String\n\nEnd Class\n</code></pre>\n\n<p>Here is my View:</p>\n\n<pre><code>@ModelType MyBlog.Contact\n@Code\n    ViewData(\"Title\") = ViewBag.Title\nEnd Code\n@Using Html.BeginForm()\n\n    @Html.LabelFor(Function(model) model.EmailAddress)\n    @Html.EditorFor(Function(model) model.EmailAddress)\n    @Html.ValidationMessageFor(Function(model) model.EmailAddress)\n\n    @&lt;input type=\"submit\" value=\"Send\" /&gt;\n\nEnd Using\n</code></pre>\n\n<p>And, here is my controller:</p>\n\n<pre><code>Function Contact() As ActionResult\n\n    Return View(\"\", \"_FinalSubPageLayout\", \"\")\n\nEnd Function\n</code></pre>\n\n<p>The error I get is:</p>\n\n<blockquote>\n  <p>The model item passed into the dictionary is of type 'System.String',\n  but this dictionary requires a model item of type 'MyBlog.Contact'.</p>\n</blockquote>\n\n<p>What can I do to resolve this error?  Thank you.</p>\n"},{"tags":["asp.net-mvc-3","dotnetopenauth","nerddinner"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12695165,"title":"Google logon - specific domain","body":"<p>I'm using NerdDinner 3.2 ASP.Net MVC 3 as a base of code.\nWhat I would like to do is modify it so it will only allow google logins to a specific domain.</p>\n\n<p>Thanks in advance to any and all for your assistance.</p>\n"},{"tags":["asp.net-mvc-3","iis-7.5"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12693620,"title":"IIS 7.5 hierarchy breaks application path","body":"<p>I've setup a web application under a website using information from <a href=\"http://www.iis.net/learn/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis\" rel=\"nofollow\">IIS.Net - Understanding Site, Applications and Virtual Directories</a></p>\n\n<p>Below is what they say regarding applications.</p>\n\n<blockquote>\n  <p>An application is a group of files that delivers content or provides services over protocols, such as HTTP. When you create an application in IIS, the application's path becomes part of the site's URL.</p>\n</blockquote>\n\n<p>That's great; exactly what I want; however...the application path is not resolving properly for script files, css and a web service I have in the application. </p>\n\n<p>For <code>http://site_name/application_name</code></p>\n\n<pre><code>&lt;img src=\"/Content/images/smiley.png\" alt=\"smiley face\" /&gt;&lt;/a&gt;\n</code></pre>\n\n<p>resolves to </p>\n\n<p><code>src=\"/site_name/Content/images/smiley.png\"</code></p>\n\n<p>instead of </p>\n\n<p><code>src=\"/application_name/Content/images/smiley.png\"</code></p>\n\n<p></p>\n\n<p>As a work-around I've wrapped the paths I was using withe <code>@Url.Content()</code> helper. Not the prettiest solution, but it's working. </p>\n\n<pre><code>&lt;img src=\"@Url.Content(\"~/Content/images/smiley.png\")\" alt=\"smiley face\" /&gt;&lt;/a&gt;\n</code></pre>\n\n<p>Is there a way to fix this in IIS?</p>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":75,"score":1,"question_id":12692216,"title":"Load Assemblies from a folder other than bin","body":"<p>I created a mvc 3 project, the namespace is [POC.MVC.PluginHost]. The controller namespace is [POC.MVC.PluginHost.Controllers]. I created a class library project and change the name space of it to [POC.MVC.PluginHost.Controllers].</p>\n\n<p>class library project code :</p>\n\n<pre><code>namespace POC.MVC.PluginHost.Controllers\n{\n    public class BasicExampleController : Controller\n    {\n        public ActionResult Index()\n        {\n            // Add action logic here\n            throw new NotImplementedException();\n        }\n        public ActionResult Display()\n        {\n\n            return Content(\"\");\n\n        }\n    }\n}\n</code></pre>\n\n<p>I compile it and copy to bin directory of mvc project, when I browse <code>http://localhost:xxxx/BasicExample/display</code> it works fine, but I want to copy this compiled dll of class library in a other folder like [plugin] but it is not work, it is working only when I copy it to the bin folder of my mvc project. Is there is a way to solve this problem?</p>\n\n<p>edit .....................................</p>\n\n<p>i test   in my web.config like :</p>\n\n<pre><code>&lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n  &lt;probing privatePath=\"Plugin\" /&gt;\n  &lt;dependentAssembly&gt;\n    &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\"/&gt;\n    &lt;bindingRedirect oldVersion=\"1.0.0.0\" newVersion=\"2.0.0.0\"/&gt;\n  &lt;/dependentAssembly&gt;\n&lt;/assemblyBinding&gt;\n</code></pre>\n\n<p>but this not work !!!!</p>\n\n<p>and i test this But this still does not work .....</p>\n\n<pre><code>    static System.Reflection.Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)\n    {\n        string assembliesDir = \"Plugin\";\n\n        string aa = System.IO.Path.Combine(assembliesDir, args.Name + \".dll\");\n        aa = System.IO.Path.Combine(AppDomain.CurrentDomain.BaseDirectory, aa);\n        Assembly asm = Assembly.LoadFrom(aa);\n        return asm;\n    }\n\n    protected void Application_Start()\n    {\n\n        RegisterRoutes(RouteTable.Routes);\n        AppDomain.CurrentDomain.AssemblyResolve += new ResolveEventHandler(CurrentDomain_AssemblyResolve);\n        AppDomain.CurrentDomain.Load(\"SamplePlg\");\n\n        System.Web.Hosting.HostingEnvironment.RegisterVirtualPathProvider(new AssemblyResourceProvider());\n\n    }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework-4"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":12691854,"title":"Setting default value in entity framework - Database First","body":"<p>This may be a question already answered, but I have had no luck finding a solution. So im sorry if this is a repeat.</p>\n\n<p>I am a complete beginner programmer, but programming is fun!</p>\n\n<p>I am using Entity Framework 4.3.1, with auto-generated entities from the database.</p>\n\n<p>From this, is there any way to set the default value to something. I don't want to put it in the auto-generated code since it will be overwritten.  </p>\n\n<p>I understand that it is possible to use partial classes. So I tried something like this. Where entity is generated, and DESCRIPTION_ is the attribute i want to set a default value to.</p>\n\n<pre><code>namespace name.Models\n{\n    public partial class ENTITY\n    {\n        public string DESCRIPTION_\n        {\n            set { _DESCRIPTION_ = \"default string\"; }\n        }\n    }\n}\n</code></pre>\n\n<p>Maybe if somebody could give me an example that would be great!</p>\n"},{"tags":["c#","asp.net-mvc-3","mvcmailer"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":389,"score":4,"question_id":10080176,"title":"Can MvcMailer be used in a class library?","body":"<p>I want to use MvcMailer in a class library, which would essentially be my one-stop-shop for composing and sending emails for my solution. I thought that that is what MvcMailer was designed for, but it appears it cannot find any of my .cshtml files--I guess it expects them to in my startup project.</p>\n\n<p>Is there any way for MvcMailer to be 100% separate from my other projects?</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","asp.net-mvc-3","ado.net"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12692832,"title":"CommandTimeout for OracleCommand","body":"<p>I've found that the <code>CommandTimeout</code> property in <code>System.Data.OracleClient.OracleCommand</code> seems to be ignored.  I'm not able to use ODP.NET for my Oracle connections, but need to implement a timeout on my queries.  </p>\n\n<p>I'm not concerned about killing the actual queries on the database, just ending the process of executing the query after X seconds if the results have not been returned.</p>\n\n<p>I've been playing with Threads and other ways to accomplish this, but certainly I'm not the first person to have this requirement.  </p>\n\n<p>Has anyone else come across this?  If so, what was your solution?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1092,"score":4,"question_id":6986928,"title":"Enforcing a model's boolean value to be true using data annotations","body":"<p>Simple problem here (I think).</p>\n\n<p>I have a form with a checkbox at the bottom where the user must agree to the terms and conditions. If the user doesn't check the box, I'd like an error message to be displayed in my validation summary along with the other form errors.</p>\n\n<p>I added this to my view model:</p>\n\n<pre><code>[Required]\n[Range(1, 1, ErrorMessage = \"You must agree to the Terms and Conditions\")]\npublic bool AgreeTerms { get; set; }\n</code></pre>\n\n<p>But that didn't work.</p>\n\n<p>Is there an easy way to force a value to be true with data annotations?</p>\n"},{"tags":["asp.net-mvc-3","html.actionlink"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12692011,"title":"System.Web.Mvc.HtmlHelper' does not contain a definition for 'ActionLink'","body":"<p>I would like to use custom @Html.ActionLik</p>\n\n<p>i am trying to use following code:-</p>\n\n<pre><code>public static class LinkExtensions\n{\npublic static MvcHtmlString MyActionLink(\n    this HtmlHelper htmlHelper, \n    string linkText, \n    string action, \n    string controller\n)\n{\nvar currentAction = htmlHelper.ViewContext.RouteData.GetRequiredString(\"action\");\nvar currentController = mlHelper.ViewContext.RouteData.GetRequiredString(\"controller\");\nif (action == currentAction &amp;&amp; controller == currentController)\n{\n  var anchor = new TagBuilder(\"a\");\n  anchor.Attributes[\"href\"] = \"#\";\n  anchor.AddCssClass(\"currentPageCSS\");\n  anchor.SetInnerText(linkText);\n  return MvcHtmlString.Create(anchor.ToString());\n }\n return htmlHelper.ActionLink(linkText, action, controller);\n}\n}\n</code></pre>\n\n<p>from <a href=\"http://stackoverflow.com/questions/5084635/custom-actionlink-helper-that-knows-what-page-youre-on\">Custom ActionLink helper that knows what page you&#39;re on</a></p>\n\n<p>but i am getting \n  System.Web.Mvc.HtmlHelper' does not contain a definition for 'ActionLink' and no extension method 'ActionLink' accepting a first argument of type 'System.Web.Mvc.HtmlHelper' could be found (are you missing a using directive or an assembly reference?\nerror</p>\n"},{"tags":["asp.net-mvc-3","deployment","web-deployment"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":11953760,"title":"problems while deploying asp.net mvc3 website","body":"<p><strong>Security Exception</strong></p>\n\n<p><em><strong>Description:</em></strong> The application attempted to perform an operation not allowed by the security policy. To grant this application the required permission please contact your system administrator or change the application's trust level in the configuration file.</p>\n\n<p><em><strong>Exception Details:</em></strong> System.Security.SecurityException: Request for the permission of type 'System.Configuration.ConfigurationPermission, System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' failed.</p>\n\n<p><em>Source Error:</em> </p>\n\n<p>An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.</p>\n\n<p><em><strong>stack trace:</em></strong></p>\n\n<pre><code>[SecurityException: Request for the permission of type 'System.Configuration.ConfigurationPermission, System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' failed.]\n   System.Security.CodeAccessSecurityEngine.Check(Object demand, StackCrawlMark&amp; stackMark, Boolean isPermSet) +0\n   System.Security.CodeAccessSecurityEngine.Check(CodeAccessPermission cap, StackCrawlMark&amp; stackMark) +31\n   System.Security.CodeAccessPermission.Demand() +46\n   System.Configuration.BaseConfigurationRecord.CheckPermissionAllowed(String configKey, Boolean requirePermission, Boolean isTrustedWithoutAptca) +99\n</code></pre>\n\n<p>see the exception live at <a href=\"http://www.getservice.in\" rel=\"nofollow\">www.getservice.in</a> .</p>\n"},{"tags":["c#","asp.net-mvc-3","post","serialization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12691004,"title":"How to serialize the data on server similar to standard MVC client serializer?","body":"<p>In my MVC application when I submit the form serilized data is sent to a server via post request. I want to simulate the request on the server in order to provide integration testing. What serializer should I use?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","visual-studio-2012"],"answer_count":5,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":1277,"score":5,"question_id":11435790,"title":"Opening an MVC3 project in VS2012","body":"<p>I am trying to open an MVC3 solution in a newly installed Visual Studio Express 2012 RC. So far, I've had issues that for some reason VS2012 doesn't know that the projects are MVC projects, so it won't add Views/Controllers. Got past this by adding the following GUID to the <code>ProjectTypeGuids</code> node of the <code>.csproj</code> file of each project in the solution:</p>\n\n<pre><code>{E53F8FEA-EAE0-44A6-8774-FFD645390401}\n</code></pre>\n\n<p><strong>However, when I open razor views, it shows these errors (among other related ones):</strong></p>\n\n<pre><code>Error    20    The name 'model' does not exist in the current context    c:\\Users\\willem\\Documents\\Visual Studio 2010\\Projects\\000-Orchard Development\\src\\Orchard.Web\\Modules\\EventManagement\\Views\\EditorTemplates\\Parts\\Event.cshtml    2    2    EventManagement\n\nError    21    The name 'T' does not exist in the current context    c:\\Users\\willem\\Documents\\Visual Studio 2010\\Projects\\000-Orchard Development\\src\\Orchard.Web\\Modules\\EventManagement\\Views\\EditorTemplates\\Parts\\Event.cshtml    5    14    EventManagement\n\nError    22    'System.Web.WebPages.Html.HtmlHelper' does not contain a definition for 'LabelFor' and no extension method 'LabelFor' accepting a first argument of type 'System.Web.WebPages.Html.HtmlHelper' could be found (are you missing a using directive or an assembly reference?)    c:\\Users\\willem\\Documents\\Visual Studio 2010\\Projects\\000-Orchard Development\\src\\Orchard.Web\\Modules\\EventManagement\\Views\\EditorTemplates\\Parts\\Event.cshtml    6    11    EventManagement\n</code></pre>\n\n<p>Intellisense is working in the razor view, but it only gives limited amount of fields for the Html helper method. For instance, none of the model specific methods like LabelFor and TextboxFor.</p>\n\n<p>I have MVC 3 and 4 installed. The solution worked fine in VS2010.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>When adding a <strong>new</strong> MVC3 project in VS2012, it works fine. So that means it is definately something to do with the project, and not the installation.</p>\n\n<p><strong>UPDATE 2:</strong>\nI think that the issue is that the view doesn't have access to the referenced libraries in the root config:</p>\n\n<pre><code>&lt;system.web.webPages.razor&gt;\n  &lt;host factoryType=\"System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" /&gt;\n &lt;pages pageBaseType=\"Orchard.Mvc.ViewEngines.Razor.WebViewPage\"&gt;\n    &lt;namespaces&gt;\n      &lt;add namespace=\"System.Web.Mvc\" /&gt;\n      &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n      &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n      &lt;add namespace=\"System.Web.Routing\" /&gt;\n      &lt;add namespace=\"System.Web.WebPages\" /&gt;\n      &lt;add namespace=\"System.Linq\"/&gt;\n      &lt;add namespace=\"System.Collections.Generic\"/&gt;\n      &lt;add namespace=\"Orchard.Mvc.Html\"/&gt;\n    &lt;/namespaces&gt;\n  &lt;/pages&gt;\n&lt;/system.web.webPages.razor&gt;\n</code></pre>\n\n<p>It does at runtime, but the intellilsense and error console doesn't pick it up</p>\n\n<p>Any help is appreciated.</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12690498,"title":"GeoCode using Yahoo API in C#.NET","body":"<p>I've got a bit of a issue with csome code that was working properly a few days ago. I'm using Yahoos API to get logitude and latitude for PostCodes the code is below:</p>\n\n<pre><code>string url = string.Format(\"http://where.yahooapis.com/geocode?flags=J&amp;appid=xxxx&amp;location={0}\", postcode);\n\n        decimal latitude = 0;\n        decimal longitude = 0;\n        Dictionary&lt;string, decimal&gt; geoCode = new Dictionary&lt;string, decimal&gt;();\n\n        dynamic yahooResults = new Uri(url).GetDynamicJsonObject();\n        foreach (var result in yahooResults.ResultSet.Results)\n        {\n            latitude = (decimal)result.latitude;\n            longitude = (decimal)result.longitude;\n        }\n\n        geoCode.Add(\"latitude\", latitude);\n        geoCode.Add(\"longitude\", longitude); \n\n        return geoCode;\n</code></pre>\n\n<p>As I said the code was working fine a few days ago but now logitude and latitude are always returned as 0. I've included the response from Yahoo below:</p>\n\n<pre><code>{\n  \"@lang\": \"en-US\",\n  \"ResultSet\": {\n    \"@version\": \"2.0\",\n    \"@lang\": \"en-US\",\n    \"Error\": \"0\",\n    \"ErrorMessage\": \"No error\",\n    \"Locale\": \"en-US\",\n    \"Found\": \"1\",\n    \"Quality\": \"60\",\n    \"Result\": {\n      \"quality\": \"60\",\n      \"latitude\": \"51.62071\",\n      \"longitude\": \"-0.23616\",\n      \"offsetlat\": \"51.620708\",\n      \"offsetlon\": \"-0.23616\",\n      \"radius\": \"4200\",\n      \"name\": \"\",\n      \"line1\": \"\",\n      \"line2\": \"London\",\n      \"line3\": \"NW7\",\n      \"line4\": \"United Kingdom\",\n      \"house\": \"\",\n      \"street\": \"\",\n      \"xstreet\": \"\",\n      \"unittype\": \"\",\n      \"unit\": \"\",\n      \"postal\": \"NW7\",\n      \"neighborhood\": \"\",\n      \"city\": \"London\",\n      \"county\": \"Greater London\",\n      \"state\": \"England\",\n      \"country\": \"United Kingdom\",\n      \"countrycode\": \"GB\",\n      \"statecode\": \"ENG\",\n      \"countycode\": \"LND\",\n      \"uzip\": \"NW7\",\n      \"hash\": \"\",\n      \"woeid\": \"26787971\",\n      \"woetype\": \"11\"\n    }\n  }\n}\n</code></pre>\n\n<p>Sorry for the formatting Stack doesn't seem to want to format it nice! There is clearly a logitiude and latitude returned. I'm sure this is something simple but I can't see it for love nor money, any help would be appreciated.</p>\n"},{"tags":["asp.net-mvc-3","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12690335,"title":"Is there a simple approach to call REST APIs from MVC3 applications","body":"<p>Can you recommend a library/simple approach to calling REST API services from ASP.NET MVC3. In Nuget I see things like RESTSharp, Hammock, Craig's Utility Library. I am looking for a common helper that I can then plug in multiple services.</p>\n\n<p>Many thanks.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12688082,"title":"ValidationMessageFor together with AddModelError(key, message). Whats the key?","body":"<p>I am developing a client-side and server-side validation for a certain viewModel property.</p>\n\n<p>In the <code>.cshtml</code> file I put this:</p>\n\n<pre><code>@Html.DropDownListFor(model =&gt; model.EntityType.ParentId, Model.ParentTypeList, \"\")\n@Html.ValidationMessageFor(model =&gt; model.EntityType.ParentId)\n</code></pre>\n\n<p>In the Controller for the business validation</p>\n\n<pre><code>catch (BusinessException e)\n{\n    ModelState.AddModelError(\"EntityType.ParentId\", Messages.CircularReference);\n}\n</code></pre>\n\n<p>The above works as expected: if an exception is caught, the message appears next to the dropdownlist.</p>\n\n<p>However, I find that this way is not very elegant. In the <code>cshtml</code>, I use a method to generate all the required information about the validation. In the controller, I must know the exact Key string and use it.</p>\n\n<p>Isn't there a better way of doing this? </p>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","authorization"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12690007,"title":"asp.net mvc3, Roles from database","body":"<p>I am creating a asp.net mvc project which I want to manage the roles in the database.</p>\n\n<p>I have a database with a table, in the table Called Premissions I have a column (AdministratorRole) that contains roles for my mvc project, the value will hold something like <code>'Domain\\John Smith'</code> (the users). I want my mvc project to check this column each time it starts up. </p>\n\n<p>In my mvc project i am using the Authorize attribute in the controllers:</p>\n\n<pre><code>[Authorize(Roles = Roles.AdministratorRole)]\n</code></pre>\n\n<p>I was thinking of creating a Interface so I can use a <code>IQueryable</code> to query the database, and then add something in the Global.asax file in the <code>application_start</code> method so that it runs the interface first and check all roles. (How can I do this?)</p>\n\n<p>This is so we can maintain the roles in the database rather than in the code of the project. </p>\n\n<p>How can I do this please?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":923,"score":1,"question_id":11077823,"title":"How to filter drop down list based on previous selection","body":"<p>I am having two tables namely State and Country.These two are dropdowns in my view page.\nI am displaying dropdown values of each of them using an independent query.\nIn table State i am having stateid and countryid.\nI need to filter state values based on country selection.\nAnd i even have a main table called Table which consists of ids of both state and country\nThe following is the way i used to display,</p>\n\n<pre><code>enter code here\n</code></pre>\n\n<p>//To get state values</p>\n\n<pre><code>var query = (from i in dbContext.countries\n\n                     join j in dbContext.States on i.Country_id equals j.Country_id\n\n                     where j.State_id &gt;= 0\n                     select new\n                     {\n                         state = j.State_name}).ToArray//To get state values\n</code></pre>\n\n<p>enter code here</p>\n\n<pre><code>  var str = (from li in dbContext.countries\n\n                           where li.Country_id &gt;= 1\n                           select new\n                           {\n\n                               country = li.Country_name}).ToArray();//To get country\n</code></pre>\n\n<p>values</p>\n\n<p>And how can i query be for filtering the values usin main table \"table\".i am facing problem in writing query for filtering\nIs this possible using linq query ?\nPlease suggest me how to do this\nThanks</p>\n"},{"tags":["asp.net-mvc-3","routing","iis-7.5","http-status-code-404","iis-express"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":143,"score":2,"question_id":12364145,"title":"Using IIS 7.5 Express to launch MVC 3 application, gives HTTP Error 404.20 - Not Found","body":"<p>I have an existing MVC3 application and I want to run that using IIS 7.5 express. When I try to do that I get the following error:</p>\n\n<pre><code>HTTP Error 404.20 - Not Found\nNo default document.\nMost likely causes:\n•A default document is not configured for the site.\n•The URL contains a typographical error.\n•Directory browsing is not enabled.\n</code></pre>\n\n<p>If I create a new MVC application and run that, it works fine. I compared the route maps and did not see any difference\nFor my application:</p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n        {\n            routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n            routes.MapRoute(\n                \"Default\", // Route name\n                \"{controller}/{action}/{id}\", // URL with parameters\n                new { controller = \"Program\", action = \"List\", id = UrlParameter.Optional } // Parameter defaults\n            );\n        }\n</code></pre>\n\n<p>For the sample application: </p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n        {\n            routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n            routes.MapRoute(\n                \"Default\", // Route name\n                \"{controller}/{action}/{id}\", // URL with parameters\n                new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n            );\n        }\n</code></pre>\n\n<p>The controller and action mentioned are available.</p>\n\n<p>I also looked at <code>applicationhost.config</code> file and saw default documents as:</p>\n\n<pre><code>&lt;defaultDocument enabled=\"true\"&gt;\n            &lt;files&gt;\n                &lt;add value=\"Default.htm\" /&gt;\n                &lt;add value=\"Default.asp\" /&gt;\n                &lt;add value=\"index.htm\" /&gt;\n                &lt;add value=\"index.html\" /&gt;\n                &lt;add value=\"iisstart.htm\" /&gt;\n                &lt;add value=\"default.aspx\" /&gt;\n            &lt;/files&gt;\n        &lt;/defaultDocument&gt;\n</code></pre>\n\n<p>Any suggestions on how to fix this error?</p>\n"},{"tags":["jquery","ajax","asp.net-mvc-3","jquery-ajax","webgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12687727,"title":"using ajax loading search data to existing data grid","body":"<p>this is my action method</p>\n\n<pre><code> public ViewResult Index(string firstName)\n        {\n            // get the list of employees according to the user name\n            if (firstName == null)\n            {\n                return View((from e in db.Employees\n                             where e.IsActive == true\n                             select e).ToList());\n            }\n            else\n            {\n                return View((from e in db.Employees\n                             where e.IsActive == true &amp;&amp; e.FirstName.Contains(firstName )\n                             select e).ToList());\n            }\n        }\n</code></pre>\n\n<p>This is my view</p>\n\n<pre><code>@{         \n\n   var grid = new WebGrid(source: Model,\n                defaultSort: \"UserName\",\n                rowsPerPage: 15, ajaxUpdateContainerId: \"grid\"); \n}\n@using (Html.BeginForm())\n{\n   &lt;div class=\"btn_align\"&gt;\n        @if (Request.IsAuthenticated &amp;&amp; HttpContext.Current.User.IsInRole(\"Administrator\"))\n        {\n            &lt;h2&gt;@Html.ActionLink(\"Create New\", \"Create\")&lt;/h2&gt;\n        }\n   &lt;/div&gt;\n\n   &lt;div class=\"btn_align\"&gt;\n        &lt;p&gt;\n            Find by name:&lt;input class=\"inputStyle_S\" id=\"firstName\" name=\"firstName\" type=\"text\" value=\"\" data-autocomplete= \"@Url.Action(\"QuickSearchFirstName\", \"ApplyLeave\")\" /&gt;  \n            &lt;input type=\"submit\"  id=\"txtSearch\" value=\"Search\"  class=\"btn\"/&gt;\n        &lt;/p&gt;\n   &lt;/div&gt;\n\n    &lt;div id=\"grid\"&gt;\n        @grid.GetHtml(\n                tableStyle: \"grid\",\n                headerStyle: \"head\",\n                alternatingRowStyle: \"alt\",\n                columns: grid.Columns(\n                 grid.Column(\"User Name\", format: (item) =&gt; item.FirstName + ' ' + item.LastName),     \n                        grid.Column(\"EmployeeType.Type\", \"Employee Type\"),\n                        grid.Column(header: \"Action\", format: (item) =&gt;\n                             Html.ActionLink(\"Details\", \"Details\", new { id = item.id}))\n            )\n        ) \n    &lt;/div&gt;\n}\n&lt;/div&gt;\n&lt;div class=\"leaveChart_bottom\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>I used web grid for representing data\nI want get search results to exixting grid without refreshing page , after submiting search button (Search by name)</p>\n\n<p>this is the ajax method I used ,but its not working.Can anyone helpme?</p>\n"},{"tags":["c#",".net","asp.net-mvc-3","scaffolding"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":12686758,"title":"Couldn't generate scaffold for file upload","body":"<p>I tried to generate a view for file upload but the upload part was missing and the rest class members have view generated for them</p>\n\n<p>View Model</p>\n\n<pre><code>namespace myapps.Models.ViewModels\n{\n    public class UserPhotoUploadViewModel\n    {\n\n        public HttpPostedFile PhotoFile\n        {\n            get;\n            set;\n        }\n\n        public Guid UserID\n        {\n            get;\n            set;\n        }\n    }\n}\n</code></pre>\n\n<p>Generated View</p>\n\n<pre><code>@model myapps.Models.ViewModels.UserPhotoUploadViewModel\n\n@using (Html.BeginForm()) {\n    @Html.ValidationSummary(true)\n    &lt;fieldset&gt;\n        &lt;legend&gt;UserPhotoUploadModel&lt;/legend&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.UserID)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.UserID)\n            @Html.ValidationMessageFor(model =&gt; model.UserID)\n        &lt;/div&gt;\n\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Save\" /&gt;\n        &lt;/p&gt;\n    &lt;/fieldset&gt;\n}\n</code></pre>\n\n<p>Am I expected to fill in the rest? Is this a usual behaviour and are there limit to what asp.net MVC3 could generate?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","knockout.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12309708,"title":"Drop Down Dependant Pages","body":"<p>The general idea of the problem is that if you can imagine how you usually create a account on any given website. Once registered the actions you complete are against the account you have signed in as. Imagine your sign in contains multiple account yet you want the actions you complete to be specific to the individual account selected via a drop down menu.</p>\n\n<p>All the pages are the same throughout the site you just have the choice who to complete the action against. Currently I am posting the users name along with each action I preform to allow me to figure out who to complete the action against. But I thought that someone might have a few ideas of how to do this better and achieve the same result in a much cleaner way? </p>\n\n<p>As now all I'm doing at present is adding a select box to the top of each form (which reset to the default as the user navigates. Nasty I know!). I'm not sure if some sort of Helper might be a good solution to intercept all actions first and add a user name? Where I should maintain the current state of what username was selected, maybe a cookie or something else? Generally just confused about what sort of partner might work best for this problem.  </p>\n\n<p>Any ideas would be very much appreciated!</p>\n"},{"tags":["jquery","asp.net-mvc-3","modal-dialog"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1319,"score":0,"question_id":9717426,"title":"MVC3 Razor View PopUps","body":"<p>I am using jquery modal popup in my application with MVC3 Razor view.</p>\n\n<p>Issue is I need to open popup once I click on Menu Options, these Menu options are there in Layeout page (coz I need to show it throughout the site). As I have to have the popup html code at layeout, so it is appearing as hidden in all page sources.</p>\n\n<p>So is there any better way through which I can create popup html at run time only?</p>\n\n<p>I using this right now:</p>\n\n<pre><code>$(id).dialog({\n            closeOnEscape: true,\n            draggable: true,\n            resizable: false,\n            dialogClass: clz,\n            modal: true,\n            title: $(id + ' .dialog-content').attr('title'),\n            closeText: ''\n        });\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc-3","modal","modal-dialog"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":362,"score":0,"question_id":10049848,"title":"MVC3 Controller action method returns a popup","body":"<p>I am new to MVC3 + Razor + jQuery and am trying to satisify a client's requirement.</p>\n\n<p>What they want is to enter/post (guessing from some sharepoint app) a URL with a querystring.\nSay something like:\nlocalhost/addjob?id=4</p>\n\n<p>My MVC3/Razor app would then popup a dialog showing some text such as \"Processing..\" + a wait cursor \nand once processing is done, display another message such as \"success\" or \"failure\".\nIf success message then automagically close dialog in 3 seconds.\nIf failure message then show a \"close\" button to give user time to read the failure message.</p>\n\n<p>What I have done so far is to get this all working but on a View page, because of the logic of doing ajax calls\nonce page loads.  It even displays a \"close\" button if failure message from processing \n(ajax call to another method on my controller).</p>\n\n<p>Seems every sample I come across, has the MVC app running and then there is a link or button click on a View page\n that then triggers a modal popup.</p>\n\n<p>Instead of launching my application and showing the View page, how can I get my View page to be a popup without \nloading up the application, ie the Controller action method returns a popup?</p>\n\n<p>Or is that just impossible?</p>\n"},{"tags":["javascript","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12686589,"title":"Passing values between view and JS","body":"<p>I have this view:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src='&lt;%: Url.Content(\"~/Scripts/new.js\") %&gt;'&gt;&lt;/script&gt;\n&lt;div class=\"col1\"&gt;\n  Number of Questions:\n&lt;/div&gt;\n&lt;div class=\"col2-input\" id=\"no-of-questions-value\"&gt;\n  &lt;input type=\"hidden\" name=\"NumberOfQuestionsHidden\" id=\"NumberOfQuestionsHidden\" value=\"&lt;%: Model.NumberOfQuestions %&gt;\" /&gt;\n  &lt;%: Html.TextBoxFor(model =&gt; model.NumberOfQuestions) %&gt;\n&lt;/div&gt;\n&lt;div class=\"col3\"&gt;\n  &lt;div id=\"save-no-of-questions-button\"&gt;\n    &lt;a href=\"javascript:saveNoOfQuestions();\" class=\"button\"&gt;Save&lt;/a&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>and the new.js where I determine the values: this js runs a scorm module and logs each event as I go through the questions in the scorm module, I count all correct and all incorrect then I know how many questions were asked.</p>\n\n<pre><code> function LogEvent(action,data)\n {\n    if (data == \"correct\") {\n       correct_count++;\n       alert(\"incorrect count = \" + incorrect_count + \" correct count = \" + correct_count);\n }\n\n if (data == \"incorrect\") {\n    incorrect_count++;\n    alert(\"incorrect count = \" + incorrect_count + \" correct count = \" + correct_count);\n }\n\n}\n</code></pre>\n\n<p>to get the total number of questions i add correct_count and incorrect_count and want to pass this to the view into Html.TextBoxFor(model => model.NumberOfQuestions).\nI dont know how to go about this. any help please?</p>\n\n<p>thanks</p>\n"},{"tags":["asp.net-mvc-3","asp.net-mvc-3-areas"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12686563,"title":"dropDownList doesn't show real data","body":"<p>i have added the model in my view:</p>\n\n<pre><code>    @model Tuple&lt;List&lt;EshopTheme.Areas.Administrators.Models.ThemeGroupsModel&gt;,\n                      EshopTheme.Areas.Administrators.Models.AdminModel,\n                      EshopTheme.Areas.Administrators.Models.ThemesModel&gt; \n</code></pre>\n\n<p>in my Controller i have added this action:</p>\n\n<pre><code>   public ActionResult AddTheme()\n    {\n        AdminSrv adminService = new AdminSrv();\n        AdminModel adminModel = new AdminModel();\n        ThemesModel themeModel = new ThemesModel();\n        Tuple&lt;List&lt;ThemeGroupsModel&gt;, AdminModel, ThemesModel&gt; tuple =\n            new Tuple&lt;List&lt;ThemeGroupsModel&gt;, AdminModel, ThemesModel&gt;\n                (adminService.getAllThemeGroupByAdmin(), adminModel, themeModel);\n        return View(tuple);\n    }\n</code></pre>\n\n<p>i have used this DropDownListFor :</p>\n\n<pre><code>    @Html.DropDownListFor(x =&gt; x.Item1, new SelectList(Model.Item1))\n</code></pre>\n\n<p>but, DropDownListFor , shows  the list of:</p>\n\n<pre><code>    EshopTheme.Areas.Administrators.Models.ThemeGroupsModel\n    EshopTheme.Areas.Administrators.Models.ThemeGroupsModel\n    EshopTheme.Areas.Administrators.Models.ThemeGroupsModel\n</code></pre>\n\n<p>why?????????????</p>\n\n<p>this is my getAllThemeGroupByAdmin() code:</p>\n\n<pre><code>  public List&lt;ThemeGroupsModel&gt; getAllThemeGroupByAdmin()\n    {\n        List&lt;ThemeGroupsModel&gt; ThemeGr = new List&lt;ThemeGroupsModel&gt;();\n        ThemeGroupsModel ThemeGrTemp;\n        using (var context = new EShopThemeDBEntities(idbconnection.ConnStr))\n        {\n            var ThemeGroupList = (from o in context.ThemeGroups\n                                  select o).ToList();\n\n            foreach (var item in ThemeGroupList)\n            {\n                ThemeGrTemp = new ThemeGroupsModel();\n                ThemeGrTemp.ThemeGroupName = item.ThemeGroupName;\n                ThemeGrTemp.ThemeGroupId = item.ThemeGroupID;\n                ThemeGr.Add(ThemeGrTemp);\n            }\n        }\n        return ThemeGr;\n    }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":138,"score":0,"question_id":12683537,"title":"MVC dropdownlist, onchange","body":"<p>I have a 2 Dropdownlistfor in html, dropdownlistfor Country and dropdownlistfor state. Im using MVC, I want to be the output like this, If I change the Selected Country, the state of the selected country will be filled in the dropdownlistfor state. Im getting the data of country and state from database, and in the table of state there is a field for countryId. Thanks for help. </p>\n\n<p>here is the sample Code in Html. </p>\n\n<pre><code>            &lt;div class=\"fieldBlock\"&gt;\n                &lt;div&gt;&lt;label&gt;Country&lt;/label&gt;&amp;nbsp;*&lt;/div&gt;\n                &lt;div&gt;@Html.DropDownListFor(model =&gt; model.Country.Id, Model.CountrySelectList, new { @class = \"width305\", @id = \"ddlCountry\" })&lt;/div&gt;\n                @Html.HiddenFor(model =&gt; model.Country.Name) @Html.HiddenFor(model =&gt; model.Country.Abbreviation)\n                &lt;div&gt;@Html.ValidationMessageFor(model =&gt; model.Employee.StateId)&lt;/div&gt;\n            &lt;/div&gt;\n\n            &lt;div class=\"fieldBlock\"&gt;\n                &lt;div&gt;@Html.LabelFor(model =&gt; model.Employee.StateId, \"State/Province\")&amp;nbsp;*&lt;/div&gt;\n                &lt;div&gt;@Html.DropDownListFor(model =&gt; model.Employee.StateId, Model.CountryStateProvinceSelectList, new { @class = \"width305\" })&lt;/div&gt;\n                &lt;div&gt;@Html.ValidationMessageFor(model =&gt; model.Employee.StateId)&lt;/div&gt;\n            &lt;/div&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":138,"score":0,"question_id":12686014,"title":"ASP MVC Razor foreach inside Javascript block","body":"<p>I have a Partial View that returns a Javascript function call after I submit an Ajax form.  It takes a list of addresses and call Javascript functions to geocode and place markers on a Google Map.  When I compile the following code, I get \"Conditional compilation is turned off\" error around var in the ForEach line.</p>\n\n<pre><code>@model IEnumerable&lt;TestStore.Models.Address&gt;\n\n@if (Model.Count() &gt; 0)\n{\n&lt;script type=\"text/javascript\"&gt;\n    deleteMarkers();\n\n    @foreach(var item in Model)\n    {\n        codeAddress('@item.GetAddress');\n    }  \n&lt;/script&gt;\n}\n</code></pre>\n\n<p>I fiddle around with the code and the following does work without compile errors:</p>\n\n<pre><code>@if (Model.Count() &gt; 0)\n{\n&lt;script type=\"text/javascript\"&gt;\n    deleteMarkers();\n&lt;/script&gt;\n\n    foreach (var item in Model)\n    {\n        &lt;script type=\"text/javascript\"&gt;\n            codeAddress('@item.GetAddress');\n        &lt;/script&gt;\n    }\n}\n</code></pre>\n\n<p>For sake of discussion, if I have longer logic that make a lot of Javascript function calls inside loops, I would much prefer to surround everything inside 1 script block. I searched around Stack Overflow and it seem that Razor syntax could go inside a script block but I don't know how that look like in my example.</p>\n"},{"tags":["asp.net-mvc-3","razor","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":12685943,"title":"Seperate opening tag and closing in foreach() and if()","body":"<p>Im having some problems with doing spererate opening and closing tags, i get a parsing error, i done like this in mvc1-2 but how is this done in mvc4?</p>\n\n<p>im doing a <code>foreach()</code> and depedning on the count im gone open up a <code>div</code> and close a <code>div</code></p>\n\n<p>this is the code</p>\n\n<pre><code> foreach (var d in Model.MenuDays)\n {\n    if (d.Id == 1 || d.Id == 4)\n    {\n        &lt;div class='row'&gt;\n    }\n\n//code here\n\n @if (d.Id == 3)\n {\n       &lt;/div&gt;\n\n\n    }\n}\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc-3","deployment","webserver"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":12685370,"title":"accessing published mvc3 app in server","body":"<p>I am trying to publish my asp.net mvc3 web application and this is my first time publishing. I've been able to publish the application in iis and it is working fine. But when i put the application in the server, other computers in the network cannot access the page.</p>\n\n<pre><code>401 - Unauthorized: Access is denied due to invalid credentials.\n</code></pre>\n\n<p>I am using windows 7, v4.0 framework.</p>\n\n<p>My web.config as authentication set to forms and it uses asp.net membership.</p>\n\n<p>UPDATE:</p>\n\n<p>Just checked and it is working well in windows xp, IIS5. The client can access the application in the server.\nThe problem is only in windows 7, IIS7.</p>\n\n<p>Again, the simple page with no authentication is working from windows 7, iis7 as well.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","facebook-graph-api","facebook-c#-sdk","oauth-2.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12684904,"title":"Error on publishing object using Facebook open graph api with facebook C#sdk","body":"<p>I am using following piece of code to publish my object to facebook using open graph however i am dumbstruck by the following error since 2days.An early reply is very valuable,\nThanks S.</p>\n\n<p>Technology used:Asp.net mvc3 &amp; C#</p>\n\n<pre><code>FacebookClient fb = new FacebookClient(\"AppID\", \"AppSecret\");\n            fb.AccessToken = \"AccessToken\";\n\n            var parameters = new Dictionary&lt;string, object&gt;\n                                 {\n                                     {\"og:type\", \"appnamespace:object\"},\n                                     {\"og:url\", \"objecturl\"},\n                                     {\n                                         \"blog\", \"url-to-post\"\n                                     }\n                                 };\n\n            try\n            {\n                var Response = fb.Post(\"https://graph.facebook.com/me/namespace:objecturl\", parameters);\n            }\n            catch (FacebookApiException ex)\n            {\n            }\n</code></pre>\n\n<p>Exception:\n(OAuthException) (#100) Application 276304102435847 does not own 175053105965645 action type</p>\n\n<p>Thanks in advance,\nS</p>\n"},{"tags":["asp.net-mvc-3","many-to-many"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12683581,"title":"FIXED Many to many relationship, Invalid column name FIXED","body":"<p>I have a many to many relationship  between House and Tenants. \nI am a little confused how to work it all out, the debugger is saying my column name is<br>\nTenants_TenantID but its not, its TenantID ?</p>\n\n<p>My Error</p>\n\n<p>{\"Invalid column name 'Tenants_TenantID'.\\r\\nInvalid column name 'House_HouseID'.\"}</p>\n\n<p>Where my Error comes from</p>\n\n<pre><code>    @using (Html.BeginForm(\"AddRole\", \"Role\", new { houseId = @Model.HouseID }))\n {\n        &lt;table&gt;\n        &lt;tr&gt;\n            &lt;td&gt;Select to Add Item&lt;/td&gt;\n            &lt;td&gt;\n               &lt;div class=\"editor-field\"&gt;\n              @Html.ListBoxFor(model =&gt; model.TenantID, ((IEnumerable&lt;FlatSystem.Models.Tenants&gt;)ViewBag.TenantLookupList).Select(option =&gt; new SelectListItem\n                {\n                 Text = Html.DisplayTextFor(_ =&gt; option).ToString(),\n                 Value = option.TenantID.ToString(),\n                 Selected = (Model != null)\n                 }), \"Choose...\")\n\n\n              &lt;/div&gt;\n            &lt;/td&gt;\n           &lt;td&gt;&lt;input type=\"submit\" value=\"Add\" /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;/table&gt;\n }\n</code></pre>\n\n<p>FIXED</p>\n\n<p>I fixed this problem \nBy updating my DBContext file.</p>\n\n<p>I made a simple mistake and missed out the DbSet for the 3rd table for my Many to Many to relationship </p>\n"},{"tags":["c#","asp.net-mvc-3","file-io"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":112,"score":0,"question_id":12682944,"title":"Could not find a part of the path Asp.Net MVC 3","body":"<p>I am trying to download a file stored in a folder.</p>\n\n<pre><code> string path = \"D:\\\\app_data\\\\Clients\\\\Client \" + jobdescription.ClientID + \"\\\\Job \" + jobdescription.JobDescriptionID + \"\\\\\";\n string file = Path.Combine(path, jobdescription.JobTitle + \".docx\");\n return File(path, \"application/docx\", jobdescription.JobTitle + \".docx\");\n</code></pre>\n\n<p>The error generated is:</p>\n\n<pre><code>Server Error in '/' Application.\nCould not find a part of the path 'D:\\app_data\\Clients\\Client 1\\Job 2\\'\n</code></pre>\n\n<p>But the file with specified filename is in the folder. What am i doing wrong ?</p>\n"},{"tags":["asp.net","facebook","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":12645555,"title":"How do I create a Facebook Share button using ASP.NET MVC3","body":"<p>I would like to implement a Facebook Share button using ASP.NET MVC3, like following image.</p>\n\n<p><img src=\"http://i.stack.imgur.com/VFNzD.png\" alt=\"http://i.stack.imgur.com/tlJwd.png\"></p>\n\n<p>I have installed Microsoft Web Helper in my MVC application, and  I am able to create a Facebook Like button using <code>@Facebook.LikeButton();</code>; But how can I create a Facebook Share button? </p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","entity-framework"],"answer_count":7,"favorite_count":2,"up_vote_count":3,"down_vote_count":1,"view_count":195,"score":2,"question_id":12678833,"title":"C# - when to use public int virtual, and when to just use public int","body":"<p>I am working through a tutorial 'Professional ASP.NET MVC 3' by J Galloway. In this tutorial, Jon shows us how to build the MVC music store.</p>\n\n<p>I am at the part where we are creating CS classes to model the data using EF code first.</p>\n\n<p>I <strong>all</strong> the examples in the book, <code>public virtual int property {get; set; }</code> is used with no explanation. The term virtual is stuffed EVERYWHERE.</p>\n\n<p>Elsewhere on the web, I have not seen the term virtual used with any kind of concistency whatsoever.</p>\n\n<p>Could anybody explain to me:</p>\n\n<ol>\n<li>The purpose of the term 'virtual' in this particular context</li>\n<li>Is using 'virtual' necessary?</li>\n<li>Why do some people use 'virtual' and others do not?</li>\n<li>Why do some people only use 'virtual' when defining foreign keys?</li>\n<li>What is the best practice use of the term 'virtual'?</li>\n</ol>\n\n<p>Many thanks in advance</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","iis","appharbor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":10925188,"title":"Can I create virtual directory in AppHarbor?","body":"<p>I have a website currently on my local IIS (a separate website like \"Default Web site\"). I added an folder inside it and right clicked and did a \"Convert to Application\". This means now it is completely separate application which has it's own web.config and doesn't interfere with main web.config.</p>\n\n<p>Can I achieve the same in <a href=\"https://appharbor.com/\" rel=\"nofollow\">AppHarbor</a>?</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","entity-framework-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12682814,"title":"How can I generate MetadataType Class automatically from the Domain class?","body":"<p>I have a standard EF5 generated Domain Class ie Customer. I need to create a \"buddy\" class for this domain class via an additional partial class which is annotated with \"MetadataType\". Is it possible to generate this in an automated way from the domain class? At present I am copying, pasting and editting to create the new partial class.</p>\n\n<p>Many thanks.</p>\n"},{"tags":["sql-server","asp.net-mvc-3","linq","entity-framework"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":210,"score":0,"question_id":12646899,"title":"Weird Entity Framework error: login failed for user","body":"<p>I have an application with multiple <code>DbContext</code> subclasses that share a connection string (this is to avoid EF's horrible startup time with a single large <code>DbContext</code> type). At certain points (repeatable for me and somewhat for others), I get the following error when trying to make a database query:</p>\n\n<blockquote>\n  <p><em>System.Data.EntityException: \"The underlying provider failed on Open.\"<br>\n  with inner exception:<br>\n  System.Data.SqlClient.SqlException \"Login failed\n  for user 'username'\"</em></p>\n</blockquote>\n\n<p>The problem appears to go away if I switch back to using a single giant <code>DbContext</code>.</p>\n\n<p>Does anyone know what this means/how to fix it? Would it help if I reused the same <code>DbConnection</code> object across <code>DbContexts</code> (as opposed to just using the same connection string)? This connection string has already succeeded in making several queries in the same request, so it can't be that the credentials are bad.</p>\n\n<p>I am using ASP.NET MVC 3, EF 4.3.1, .NET 4.0, VS 2010.</p>\n\n<p>The relevant stack trace is below:</p>\n\n<pre><code> [SqlException (0x80131904): Login failed for user 'testing_net'.]\n    System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +6351920\n    System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +412\n    System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +1363\n    System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK) +53\n    System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +6366878\n    System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +6366793\n    System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean  redirectedUserInstance) +352\n    System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +831\n    System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +49\n    System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +6368598\n    System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +78\n    System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +2194\n    System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +89\n    System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +6372110\n    System.Data.SqlClient.SqlConnection.Open() +300\n    System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection  storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean&amp; closeStoreConnectionOnFailure) +67\n\n [EntityException: The underlying provider failed on Open.]\n    System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean&amp; closeStoreConnectionOnFailure) +11108990\n    System.Data.EntityClient.EntityConnection.Open() +142\n    System.Data.Objects.ObjectContext.EnsureConnection() +97\n    System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption) +57\n    System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable&lt;T&gt;.GetEnumerator() +47\n    System.Linq.Enumerable.Single(IEnumerable`1 source) +156\n</code></pre>\n\n<p>A rough outline of the code is as follows:</p>\n\n<pre><code>// db context:\npublic class MyDbContext&lt;T&gt; : DbContext {\n    public MyDbContext(string connectionString) : base(connectionString) { }\n\n    protected override OnModelCreating(DbModelBuilder builder)\n    {\n        // constructs the model base on the type of T\n        // code first POCO entities are annotated with an attribute that links\n        // them to one or more types T\n    }\n}\n</code></pre>\n\n<p>I use AutoFac's DI to inject my DbContext's into the services my data access layer. The lifespan of the context is length of the HttpRequest.</p>\n\n<p>The actual exception occurs on a call to Queryable.Single().</p>\n\n<p>EDIT: I think <a href=\"http://stackoverflow.com/questions/4987787/entity-framework-giving-exception-the-underlying-provider-failed-on-open\">this</a> question might be relevant, but I'm not sure what to make of the race condition described.</p>\n\n<p>EDIT: Now that I understand the issue, I can post the offending piece of code:</p>\n\n<pre><code>MyDbContext&lt;T1&gt; db1 = ...\nvar connectionString = db1.Database.Connection.ConnectionString; \nvar dbContext2 = new MyDbContext&lt;T2&gt;(connectionString);\n</code></pre>\n"},{"tags":["asp.net-mvc-3","t4"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12681196,"title":"What is the recommended way to preserve custom code in scaffold generated Controller and View Code?","body":"<p>I am using MVC3 with EF5. I like the way I get scaffold generated Controllers and Views. This produces a nice workflow to create an application quickly and consistently. Of course the initial idea behind Scaffolding was to create a 80% quick start, and obviously the Controllers and Views get quickly customised. However are there any recommended practices for retaining custom code while still being able to rerun the scaffolding. The nearest I can think of is having external method calls from the controller actions etc.. I guess I would then need to incorporate these into the T4 templates??? Perhaps Dependency Injection has a role here? I have seen it used in the Domain Layer for extra service methods.</p>\n\n<p>Perhaps I am hoping for too much !!!</p>\n\n<p>Many thanks for any ideas.</p>\n"},{"tags":["asp.net-mvc-3","jquery-ajax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12681279,"title":"Returning a view is redirecting instead of showing it","body":"<p>I have this piece of code in my controller:</p>\n\n<p><strong>SomeController.cs</strong></p>\n\n<pre><code>public PartialViewResult DoSomething()\n{\n...\nList&lt;MyItem&gt; myList= populateList();\nreturn PartialView(myList);\n}\n</code></pre>\n\n<p><strong>View.cshtml</strong></p>\n\n<pre><code>@using (Ajax.BeginForm(\"DoSomething\", \"Some\", new AjaxOptions\n            {\n                HttpMethod = \"POST\",\n                InsertionMode = InsertionMode.Replace,\n                UpdateTargetId = \"resultFromDoSomething\",\n                LoadingElementId = \"waitingRequest\"\n            }))\n\n&lt;div id=\"resultFromDoSomething\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>The code is working OK in Internet Explorer 9 but in Firefox, instead of populating the div called <strong>resultFromDoSomething</strong> it will redirect to another page with the view.</p>\n\n<p>Am I doing something wrong here?</p>\n\n<p>Thanks!</p>\n"},{"tags":["jquery","json","asp.net-mvc-3","pagination"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12680587,"title":"jQuery Skip and Take functions with JSON and .NET MVC 3","body":"<p>I am trying to have a previous and next button for a list if items that is populated from JSON object in the Controller.</p>\n\n<p>I have a skip and take variable so that I can do likewise with sets of records.  I want to paginate advancing 7 at a time (next), and reversing 7 at a time (previous).</p>\n\n<p>The orders are being loaded properly, but I so not fully understand the skip take ideas, along with changing the CSS class when there are no more \"pages\" to render.</p>\n\n<pre><code>        var skip = 0;\n    var take = 7;\n\n    function loadItems() {\n        $.ajax({\n            url: '@Url.Action(\"GetAllItems\")',\n            data:\n            {\n                skip: skip,\n                take: take\n            },\n            type: \"GET\",\n            cache: false,\n            success: function (items) {\n                $.each(items, function (index, item) {\n                    $('#ul-items').append('&lt;li&gt;&lt;a class=\"link\"&gt;' + item.Information + '&lt;/a&gt;&lt;/li&gt;');\n                });\n            }\n        });\n    }\n\n    $(document).ready(function () {\n        $('#previous').live(\"click\", function () {\n            //page number , # of records needed\n            skip(0);\n            take(-7);\n\n            if (i) {//execute if there are no previous selections available\n                $('#previous').removeClass('enabled').addClass('disabled');\n            }\n        });\n\n        $('#next').live(\"click\", function () {\n            //page number , # of records needed\n            skip(1);\n            take(7);\n\n            if (i) {//execute if there are no previous selections available\n                $('#next').removeClass('enabled').addClass('disabled');\n            }\n        });\n    });\n</code></pre>\n"},{"tags":["asp.net-mvc-3","partial-views","dynamic-loading"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":142,"score":-1,"question_id":12583180,"title":"MVC 3 add dynamic links to partial views","body":"<p>We are using MVC 3 to build a Web site with dynamic menu options so that users only see menu options (action Links) that they are allowed to see based on group and individual privileges.</p>\n\n<p>How can we add dynamic menu options (links to partial views) at run time?\nDo we hard code all the links of all the partial views and turn of the ones that are not required using a visibility option? \nCan we add the links dynamically from a database?</p>\n\n<p>Let me clarify.\nWE have admins that have access to all menu options like Manage Users, Manage Groups, Manage Suppliers, Manage products and Manage Orders.\nWe have regular sales staff who only need Manage Supliers and Manage Orders. \nSo based on this we only need to show the links that say Manage Orders and Manage Supplier. Hence they dynamic nature of the links I am trying to set up. \nWe have the permissions set up in the DB.</p>\n\n<p>Jawahar</p>\n"},{"tags":["asp.net-mvc-3","web-services","iis","asmx"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":119,"score":0,"question_id":11641903,"title":"IIS 7.5 with asp.net mvc webservice","body":"<p>what's up?</p>\n\n<p>I'm facing a problem with IIS 7.5 application, asp.net MVC 3 and a set of web services. I created a new web application on port 80 with contains an asp.net mvc web site, that works nice and I need to use the same application to deploy 3 web services (asmx), so I created the following folder structure:</p>\n\n<pre><code>-IIS\n   - My WebSite (ASP.NET MVC)\n      - Services (converted to application)\n      - Service 01 (converted to application)\n      - Service 02 (converted to application)\n      - Service 03 (converted to application)\n</code></pre>\n\n<p>For the services, I'm using a new pool with Identity set for <strong>Network Service</strong> and Authentication for Anonymous Application (configured to use Application pool identity).</p>\n\n<p>I've got the applications working on different sites (two distinct ports), but I need to use the same. Do you have a idea what can I test or to do? Or maybe a clue about it? Any comment is valid for me! </p>\n\n<p>Thanks a lot!</p>\n\n<p>Tiago</p>\n"},{"tags":["c#","jquery","asp.net-mvc-3","razor","datepicker"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":152,"score":1,"question_id":12679171,"title":"Razor Jquery UI datepicker not working","body":"<p>I've read a lot of the questions on stackoverflow about this, tried some examples and am still stuck why this won't work.  So I am asking the community.  </p>\n\n<p>MODEL:</p>\n\n<pre><code>public class UploadModel\n{\n    public string PatientID { get; set; }\n    public DateTime DrawDate { get; set; }\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>public class FileManagementController : Controller\n{\n\n    [HttpGet]\n    public ActionResult UpLoad()\n    {\n        ViewData[\"message\"] = String.Empty;\n        UploadModel model = new UploadModel\n        {\n            PatientID = String.Empty,\n            DrawDate = DateTime.Now,\n        };\n        return View(model);\n    }\n    [HttpPost]\n    public ActionResult Upload(UploadModel model, HttpPostedFileBase MyFile)\n    {\n        if (ModelState.IsValid)\n        {\n            //Do Validation and Save here\n\n        }\n        UploadModel newmodel = new UploadModel\n        {\n            PatientID = model.PatientID,\n            DrawDate = model.DrawDate,\n        };\n\n        ViewData[\"message\"] = \"data submitted\";\n\n        return View(newmodel);\n    }\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;form action=\"\" method=\"post\" enctype=\"multipart/form-data\" id=\"MyForm\"&gt;\n        @Html.EditorFor(m =&gt; m)\n        &lt;label for=\"MyDateTime\"&gt;My Date Time:&lt;/label&gt;\n        &lt;label for=\"MyFile\"&gt;File:&lt;/label&gt;\n        &lt;input type=\"file\" name=\"MyFile\" id=\"MyFile\" /&gt;&lt;br /&gt;\n        &lt;input id=\"submit\" name=\"submit\" type=\"submit\" value=\"Save\" /&gt;                       \n    &lt;/form&gt;\n</code></pre>\n\n<p>From there, I have added to the _Layout.cshtml page the following code (which all maps correctly)</p>\n\n<pre><code>    &lt;link href=\"@Url.Content(\"~/Content/Site.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;link href=\"@Url.Content(\"~/Content/jquery-ui-1.7.2.custom.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;script src='@Href(\"~/Scripts/jquery-1.7.1.js\")' type=\"text/javascript\"  &gt;&lt;/script&gt;\n    &lt;script src='@Href(\"~/Scripts/jquery-ui-1.8.1.custom.min.js\")'  type=\"text/javascript\" &gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\" src='@Href(\"~/Scripts/jquery.alphanumeric.pack.js\")'&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\" src='@Href(\"~/Scripts/jquery.watermark.min.js\")'&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Then in Views -> Shared I have added an EditorTemplates folder and have created a DateTime.cshtml page that has: </p>\n\n<pre><code>@model DateTime\n\n@Html.TextBox(\"\", Model.ToString(\"dd/MM/yyyy\"), \nnew { @class = \"date\" })\n\n\n&lt;script type=\"text/javascript\" &gt;\n $(document).ready(function () {\n     //set the date picker\n     var dtp = '@ViewData.TemplateInfo.GetFullHtmlFieldId(\"\")';\n     dtp = dtp.replace(\"[\", \"_\");\n     dtp = dtp.replace(\"]\", \"_\");\n     //window.alert($(dtp).attr(\"value\"));\n     var hid = ($(dtp).attr(\"type\") == \"hidden\");\n     if (!hid) {\n         $(dtp).datepicker({\n             showOn: 'button', buttonImage: '@Href(\"~/Content/images/calendar.gif\")%&gt;', buttonImageOnly: true\n           , changeMonth: true, changeYear: true\n           , dateFormat: 'dd M yy'//, numberOfMonths: 2\n         });\n     }\n\n });\n\n&lt;/script&gt;\n</code></pre>\n\n<p>This seems to be the flavor of most of the tutorials on this, but don't seem to work.  No icon appears.  In Chrome I get the html5 calendar popup  but never the jquery one.  Any suggestions at all would be greatly appreciated.  </p>\n"},{"tags":["asp.net-mvc-3","asp.net-membership","membership-provider"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12678426,"title":"How to implement older asp.net membership methods with the new membership provided with MVC4","body":"<p>I am very new to asp.net (mvc) and I am trying to build a sample admin mvc4 app where I can get a list of users with the new membership schema.</p>\n\n<p>I am very confused with the new membership, it seems that if I want to use the out-of-the-box SimpleMembershipProvider I can't use methods built-in with the old asp.net membership and I have to implement all the methods by myself, especially if I want to use EF (is that right?)</p>\n\n<p>Here is a sample code (working with the old provider) of what I am trying to achieve with the new provider</p>\n\n<h3>controller</h3>\n\n<pre><code>public class MemberController : Controller\n{\n    public ActionResult Index()\n    {\n        var users = Membership.GetAllUsers();\n        return View(users);\n    }\n\n}\n</code></pre>\n\n<h3>view</h3>\n\n<pre><code>&lt;ul&gt;\n    @foreach (var item in Model)\n    {\n        &lt;li&gt;@Html.DisplayFor(model =&gt; model[item.ToString()].UserName)&lt;/li&gt;\n    }\n&lt;/ul&gt;\n</code></pre>\n\n<p>I would be very pleased if someone could provide me the steps, guideline, or source in order to implement this, the right way (did I have to create my own custom membership provider?). I know it's something really basic but It could help me to understand. Thank you </p>\n"},{"tags":["c#","json","asp.net-mvc-3","jqgrid","jqgrid-asp.net"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":356,"score":0,"question_id":8068063,"title":"JqGrid doesn't show the Data","body":"<p>The problem is this, while developing the application I did several run test, and jqGrid worked really well, ie on the local server everything worked fine, but now I'm testing the application on a server and it no longer works because all grids are empty. I thought it was a problem with the database, but checked the Json string and this is correct. If I put the url: <code>myOrg/Home</code> grid is shown empty, and if I put <code>myOrg/Home/GridData</code> shows the Json format data, correctly ... what is happening ...?? why the data isn't show in the grid..?? locally everything worked like a charm, will I need any additional library in to the server.. or something ..?</p>\n\n<p>Please help me.</p>\n\n<p>Thanks in advance.</p>\n\n<p>EDIT:</p>\n\n<p>Here's the javascript I´m using</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n    $(document).ready(function () {\n        var lastsel;\n        $(function () {\n            jQuery('#list').jqGrid({\n                url: '@Url.Action(\"GridData\", \"Contacto\")',\n                editurl: '@Url.Action(\"EditData\", \"Contacto\")',\n                datatype: 'json',\n                height: 250,\n                colNames: ['Id', 'Nombre', 'Teléfono', 'e-mail', 'Empresa'],\n                colModel: [\n                            { name: 'Id', index: 'Id', width: 50 },\n                            { name: 'Nombre', index: 'Nombre', width: 100, sortable: true, editable: true, edittype: \"text\", editoptions: { size: \"15\", maxlength: \"20\"} },\n                            { name: 'Telf', index: 'Telf', width: 80, editable: true, edittype: \"text\", editoptions: { size: \"10\", maxlength: \"15\"} },\n                            { name: 'Email', index: 'Email', width: 100, editable: true, edittype: \"text\", editoptions: { size: \"15\", maxlength: \"20\"} },\n                            { name: 'Empresas', index: 'Empresas', width: 100, editable: true, edittype: \"select\", editoptions: { dataUrl: '/Contacto/ListaEmpresas/'} }\n                          ],\n                caption: 'Listado de Contactos',\n                onCellSelect: function (rowid, iCol, cellcontent, e) {\n                    if (rowid &amp;&amp; rowid !== lastsel) {\n                        jQuery('#list').restoreRow(lastsel);\n                        lastsel = rowid;\n                    }\n                    jQuery('#list').editRow(rowid, true, iCol);\n                },\n\n                autowidth: true,\n                rowNum: 10,\n                rowList: [10, 20, 30],\n                pager: '#pager',\n                sortname: 'id',\n                sortable: true,\n                loadonce: true,\n                viewrecords: true,\n                sortorder: 'asc'\n            });\n\n\n            jQuery('#list').jqGrid('navGrid', '#pager', { edit: true, add: true, del: true, search: true },\n            { url: '@Url.Action(\"EditData\", \"Contacto\")',\n                closeAfterEdit: true\n            },\n            { url: '@Url.Action(\"AddData\", \"Contacto\")',\n                closeAfterAdd: true,\n                closeOnEscape: true,\n                width: 500,\n                modal: true,\n                addCaption: 'Añadir nuevo Contacto',\n                reloadAfterSubmit: true,\n                drag: true\n            },\n            { url: '@Url.Action(\"DeleteData\", \"Contacto\")',\n                closeAfterDelete: true,\n                deleteCaption: 'Borrar Registro',\n                reloadAfterSubmit: true\n            },\n            { closeAfterSearch: true,\n                reloadAfterSubmit: true\n            }\n          );\n\n        });\n    });\n\n\n  &lt;/script&gt;\n</code></pre>\n\n<p>And here the server side code that generates the json String:</p>\n\n<pre><code>public ActionResult GridData(string sidx, string sord, int? page, int? rows)\n        {\n\n            List&lt;Contacto&gt; contactos = new List&lt;Contacto&gt;();\n            contactos = ContactoRepository.GetAll().ToList&lt;Contacto&gt;();\n\n            int pageIndex = Convert.ToInt32(page) - 1;\n            int totalrecords = contactos.Count();\n            //int totalpages = (int)Math.Ceiling((decimal)totalrecords / (decimal)rows);\n\n            var jsonData = new\n               {\n                   sidx = \"Id\",\n                   sord = \"asc\",\n                   //total = totalpages,\n                   page = page,\n                   records = totalrecords,\n                   rows = (\n                           from ct in contactos\n                           select new\n                           {\n                               id = ct.Id,\n                               cell = new string[] \n                                {\n                                    ct.Id.ToString(),\n                                    ct.Nombre,\n                                    ct.Telf,\n                                    ct.Empresas.Nombre,\n                               }\n                           }).ToArray(),\n\n               };\n\n            return Json(jsonData, JsonRequestBehavior.AllowGet);\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","mvvm","razor","knockout.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":12678635,"title":"How to use knockout.js in MVC 3 Razor?","body":"<p>i am newbie knockout.js. Also i ama upper intermadiate in asp.net mvc 3. i really want to learn how to use knockout js in mvc 3 razor? but below code is not working also return to me empty total price. There is no error. Help please thanks...</p>\n\n<p>Model:</p>\n\n<pre><code>\n  public class GiftModel\n    {\n        public string Title { get; set; }\n        public double Price { get; set; }\n    }\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>\n@using System.Web.Script.Serialization;\n@model IEnumerable&#60;knockout1.Models.GiftModel&#62;\n@{\n    ViewBag.Title = \"Index\";\n}\n\n&#60;script src=\"/Scripts/knockout-2.1.0.js\" type=\"text/javascript\"&#62;&#60;/script&#62;\n&#60;script type=\"text/javascript\"&#62;\n    var initialData = @(new JavaScriptSerializer().Serialize(Model));\n    var viewModel = {\n    gifts : ko.observableArray(initialData)\n};\n\nko.applyBindings(viewModel);\n&#60;/script&#62;\n&#60;h2&#62;Index&#60;/h2&#62;\n\n&#60;p&#62;You have asked for &#60;span data-bind=\"text: gifts().length\"&#62;&nbsp;&#60;/span&#62; gift(s)&#60;/p&#62;\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>\n   public class TestController : Controller\n    {\n        //\n        // GET: /Test/\n\n        public ActionResult Index()\n        {\n            var initialState = new[] {\n                                     new GiftModel { Title = \"Tall Hat\", Price = 49.95 },\n                                     new GiftModel { Title = \"Long Cloak\", Price = 78.25 }\n                                    };\n            return View(initialState);\n        }\n\n    }\n\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","web-security","csrf","antiforgerytoken"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":103,"score":1,"question_id":12678938,"title":"ASP.NET MVC - ValidateAntiForgeryToken expiring","body":"<p>In a web page we provide a hyperlink (GET) that the User may click on to authenticate:</p>\n\n<pre><code>@Html.ActionLink(\"Please Login\", \"MyMethod\", \"MyController\")\n</code></pre>\n\n<p>This maps to the following controller method which returns a View:</p>\n\n<pre><code>    [RequireHttps]\n    public ActionResult MyMethod()\n    {\n        return this.View(new MyModel());\n    }\n</code></pre>\n\n<p>This View contains the Form in which the User supplies their credentials; the Form contains the required AntiForgeryToken.</p>\n\n<p>When the User submits the form, the following Controller method is called:</p>\n\n<pre><code>    [HttpPost]\n    [RequireHttps]\n    [ValidateAntiForgeryToken]\n    public ActionResult MyMethod(MyModel model)\n    {\n        // my logic\n    }\n</code></pre>\n\n<p>This works perfectly well, most of the time...</p>\n\n<p>However, if the User leaves their browser open for a \"significant\" period of time and then performs the following steps in quick succession:</p>\n\n<ol>\n<li>Clicks on the hyperlink (GET) to load the log-in form</li>\n<li>Completes the form and submits</li>\n</ol>\n\n<p>They get an exception informing them that the Anti-Forgery token was either not provided or was invalid.</p>\n\n<p>I don't understand why this is the case: the View (containing the form) is created after the browser was dormant and so the anti-forgery tokens should all be \"fresh\".  However, something is evidently wrong with this design, but I'm not sure how best to rectify it.</p>\n\n<p>Thanks in advance if you have any suggestions.</p>\n\n<p>Griff</p>\n"},{"tags":["asp.net-mvc-3","partial-views","bounded-contexts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12641705,"title":"how do I build a composite UI in MVC3?","body":"<p>I understand how to use Partial Views, and I understand Ajax.ActionLink and Ajax.BeginForm when it comes to how to set those up in the view. I'm assuming each partial view has it's own controller. I'm thinking bounded context here, as in each partial view could talk to it's own bounded context via its own controller</p>\n\n<p>I guess the piece I'm missing is:</p>\n\n<ol>\n<li>how to have partial views included in a \"master view\" (or holding view) and have each of these partial views independently post to a separate controller action, and then return to refresh the partial view WITHOUT loading the \"master view\" or holding view.</li>\n<li>the \"master\" view or holding view still needs to have its own controller, I want to keep the master controller from reloading its view, and let the view that is produced by an action method of the master controller hold a reference to these two partial views.</li>\n</ol>\n\n<p>There are two approaches it seems I can take, one is to use the \"Ajax.\" fucntionality of MVC3, the other is to use straight-up jQuery and handle all this interaction by hand from the client side.</p>\n\n<p>Is what I'm trying to do possible both ways, or is one way \"better suited\" to this type of composite ui construction?</p>\n\n<p>So far, the only things I have seen are trivial examples of composite ui construction like a link via an Ajax.ActionLink that refreshes a single  on the page, or a form written as an Ajax.BeginForm that repopulates a div with some content from a partial view.</p>\n\n<p>Thanks,\nMike</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","redirect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12676574,"title":"RedirectPermanent causes odd results in an ASP.NET MVC 3 application","body":"<p>This is just strange. There could be other issues, but here's the deal. I'm making an application that simply gathers information and redirects to a URL with the info passed as parameters on the URL. I'm using the ASP.NET MVC 3 (.NET 4.0) framework and I've never had to redirect to a URL outside the application before.</p>\n\n<p>My initial attempt, I did:</p>\n\n<pre><code>return RedirectPermanent(\"http://www.google.com?\" + qrystring);\n</code></pre>\n\n<p>This redirected to google, but I didn't see the parameters. I work at it a bit and change the URL to one inside the application but I'll still be using the full URL and not the routing because I want to ensure the values get there. Now, when I debug the application locally and mouse over my breakpoints it says:</p>\n\n<p>\"The breakpoint will not currently be hit. No symbols have been loaded for this document.\"</p>\n\n<p>Also, no matter what I change the URL to in my call to \"RedirectPermanent\", it always loads the Google page.</p>\n\n<p>I've cleared out the Temporary Internet file history &amp; ensured the ASPNET user has access to the folder. I've also closed &amp; reopened the solution. I've also tried changing \"RedirectPermanent\" to \"Redirect\", but that didn't fix it. Breakpoints worked fine in this application before hitting that RedirectPermanent statement the first time.</p>\n\n<p>FYI: I'm running Windows XP and am using IIS Express (ASP.NET Development Server). I'm also running the application locally in debug mode as opposed to on a server machine.\nThoughts?</p>\n"},{"tags":["asp.net-mvc-3","visual-studio","web-services","scalability"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12676908,"title":"Building a large web application based on small app projects","body":"<p>I am building a large web application. I want to structure it in such a way that I can write \"apps\" for it, or even potentially, have third party write apps for it. </p>\n\n<p>I have one monothlitic web project, which has the Views, Controllers and the Models. I think it would be useful to break these down into projects.</p>\n\n<p>I have been considering having a structure as follows:</p>\n\n<ul>\n<li>Basic Web</li>\n<li>App1\n<ul>\n<li>App1.Web</li>\n<li>App1.Business</li>\n<li>App1.Dal</li>\n</ul></li>\n<li>App2\n<ul>\n<li>App2.Web</li>\n<li>App2.Business</li>\n<li>App2.Dal</li>\n</ul></li>\n</ul>\n\n<p>Basic Web will reference App1 &amp; App2. Goal is to have Basic Web have a solid structure so that it does not have to be built quite often. </p>\n\n<p>I am unsure about how this project can be built. Main questions are: </p>\n\n<ul>\n<li>How can I join multiple web projects, and join them together, i.e. MasterWeb = BasicWeb + App1.Web + App2.Web. Is this a good idea?</li>\n<li>Would each app have its own database and set of migration files?</li>\n<li>Would each app be its own Solution? (group of projects in Visual Studio)</li>\n</ul>\n\n<p>I know this is a very general question, but are there any articles I can read that will help me modularise my projects?</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","asp.net-mvc-3","post","anonymous-types"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":83,"score":3,"question_id":12674076,"title":"How can I use complex property names in anonymous type?","body":"<p>In my MVC3 application I want to create an anonymous collection with fields names like this:</p>\n\n<pre><code>new \n{                                                                            \n   Buyer.Firstname = \"Jim\",\n   Buyer.Lastname = \"Carrey\",\n   Phone = \"403-222-6487\",\n   PhoneExtension = \"\",\n   SmsNumber = \"\",\n   Buyer.Company = \"Company 10025\",\n   Buyer.ZipCode = \"90210\",\n   Buyer.City = \"Beverly Hills\",\n   Buyer.State = \"CA\",\n   Buyer.Address1 = \"Address 10025\"\n   Licenses[0].IsDeleted = \"False\",\n   Licenses[0].ID = \"6\",\n   Licenses[0].AdmissionDate = \"2,1999\",\n   Licenses[0].AdmissionDate_monthSelected = \"2\",                                                                           \n\n                                                                    } \n</code></pre>\n\n<p>I want to have this in order to send custom post requests during integration testing of my app. How can I declare a an anonymous collection with this field names?</p>\n"},{"tags":["json","asp.net-mvc-3","entity-framework","jquery-ajax","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12676749,"title":"Want to post one to many relation data with json MVC3","body":"<p><strong>Client</strong>    </p>\n\n<pre><code>public class ClientModelData\n{\n    public int ClientID { get; set; }\n    public string ClientName { get; set; }\n    public string Phone { get; set; }\n    public string Address { get; set; }\n    public IList&lt;int&gt; LocationID { get; set; }\n}\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>[HttpPost]\n    public ActionResult AddClient(ClientModelData client)\n    {\n        Client _client = new Client()\n        {\n            //ClientCode=client.ClientCode,\n            ClientName = client.ClientName,\n            Phone = client.Phone,\n            Ext = client.Ext,\n            Address = client.Address,\n            CreatedBy = 1,\n            CreatedDate = DateTime.Now,\n            ModifiedBy = 1,\n            ModifiedDate = DateTime.Now,\n            ModifiedIP = Request.ServerVariables[\"REMOTE_ADDR\"]\n        };\n        db.Clients.Add(_client);\n        try\n        {\n            db.SaveChanges();\n        }\n        catch (DbEntityValidationException dbEx)\n        {\n            string error = string.Empty;\n            foreach (var validationErrors in dbEx.EntityValidationErrors)\n                foreach (var validationError in validationErrors.ValidationErrors)\n                    error += string.Format(\"Property: {0} Error: {1}\", validationError.PropertyName, \n                        validationError.ErrorMessage);\n\n            return Json(new\n            {\n                status = false,\n                message = \"Unable to update information for selected client, please contact administrator. For detail &lt;a class='errordetail'&gt;click here&lt;/a&gt;\",\n                exception = error\n            });\n        }\n        return Json(_client);\n    }\n</code></pre>\n\n<p>I have a checkbox list:</p>\n\n<pre><code>&lt;ul class=\"locations\"&gt;\n                                @foreach (var item in Model.Locations)\n                                {\n                                    &lt;li&gt;\n                                        &lt;label&gt;\n                                            &lt;input type=\"checkbox\" id=\"chkLocations\" name=\"chkLocations\" \n                                            value=\"@item.LocationID\" /&gt;\n                                            @item.LocationTitle&lt;/label&gt;\n                                    &lt;/li&gt;\n                                }\n                            &lt;/ul&gt;\n</code></pre>\n\n<p>** The Json object contains the values: **</p>\n\n<pre><code>var allVals = [];\n            $('#chkLocations:checked').each(function () {\n                allVals.push($(this).val());\n            });\n            var dataPacket = {\n                ClientName: $(\"#txtClientName\").val(),\n                Phone: $(\"#txtPhone\").val(),\n                Ext: $(\"#txtExt\").val(),\n                Address: $(\"#txtAddress\").val(),\n                LocationID: allVals\n            };\n</code></pre>\n\n<p>Now the problem occurs, when I give the checkbox:checked items it don't populate the ModelData Entity <strong>Location</strong> property</p>\n\n<p>Image:</p>\n\n<blockquote>\n  <p><a href=\"http://tinypic.com/r/4l0bqr/6\" rel=\"nofollow\">http://tinypic.com/r/eapem9/6</a></p>\n</blockquote>\n\n<p><strong>Issue Comes Up POSTING form...JQuery AJAX</strong></p>\n\n<p>Image:</p>\n\n<blockquote>\n  <p><a href=\"http://tinypic.com/r/4l0bqr/6\" rel=\"nofollow\">http://tinypic.com/r/4l0bqr/6</a></p>\n</blockquote>\n"},{"tags":["javascript","asp.net","asp.net-mvc-3","ckeditor","spellchecking"],"answer_count":2,"favorite_count":2,"up_vote_count":17,"down_vote_count":0,"view_count":552,"score":17,"question_id":10343728,"title":"ASPNetSpell Spell Checker integrated with CKEditor 3 doesn't work with Chrome","body":"<p>I've been working to integrate ASPNetSpell's spell checker (<a href=\"http://www.aspnetspell.com/\" rel=\"nofollow\">http://www.aspnetspell.com/</a>) into CKEditor (<a href=\"http://ckeditor.com/\" rel=\"nofollow\">http://ckeditor.com/</a>).  I'm seeing some unsettling behavior between IE 8+, FireFox 12 and Chrome 18.0.1025.152m.</p>\n\n<p>The short of it seems to be that ASPNetSpell can't find the instance of CKEditor in Chrome, but in IE and Firefox it can.  </p>\n\n<p>I've followed the recommendation in ASPNetSpell docs to integrate into \"all major HTML Editors including FCKEditor, CKEditor, TinyMCE...\":</p>\n\n<pre><code>var spellinstance = new LiveSpellInstance();\nspellinstance.Fields = \"EDITORS\";\nspellinstance.ServerModel = \"aspx\";\nspellinstance.DrawSpellImageButton();\n</code></pre>\n\n<p>My understanding is that when you set the Fields to \"EDITORS\" this instructs ASPNetSpell's client-side script to look for all IFrames.</p>\n\n<p>The modal dialog however does show in Chrome and I do see it make a request to the server, but when it returns to the dialog it's behaving like there were no fields set to spell check. IE and Firefox will behave this way when you have a typo in your Fields to check.</p>\n\n<p>I have the following questions:  </p>\n\n<ol>\n<li>Has anyone had any experience with using ASPNetSpell's spell checker\nin Chrome with an HTML Editor?</li>\n<li>Where could I look next?</li>\n<li>Why doesn't the modal dialog load the spelling suggestions?</li>\n</ol>\n\n<p><strong>Update</strong></p>\n\n<p>I have sent another email to their support including a link to this post.  Hopefully, ASPNETSPELL will come add some expertise.</p>\n\n<p><strong>Clarification</strong></p>\n\n<p>I am aware ASPNETSPELL doesn't support SCAYT (spell check as you type) on a textarea used by the editor.  The functionality I am seeking is the explicit spell check done when you click the button.</p>\n\n<p><strong>Update #2</strong></p>\n\n<p>I have downloaded the recent ASPNETSPELL package referenced in ASPNetSpell Support's answer.  I am still having no luck getting this to work inside Chrome (current version now is 21.0.1180.89 m).  It will work when just validating a textarea with no CKEditor instance attached.</p>\n\n<p>Below is what my Razor view looks like currently.</p>\n\n<pre><code>@using ASPNetSpell\n@{  \n    Layout = \"~/_SiteLayout.cshtml\";\n    Page.Title = \"Welcome to my Web Site!\";\n}\n@{\n    ASPNetSpell.Razor.SpellButton mySpellButton = new ASPNetSpell.Razor.SpellButton();\n    mySpellButton.InstallationPath = (\"/Content/ASPNetSpellInclude\");\n    mySpellButton.FieldsToSpellCheck = \"myTextArea\";\n}\n&lt;p&gt;\n    &lt;div id=\"spellcheckthis\"&gt;\n        &lt;textarea id=\"myTextArea\"&gt;&lt;/textarea&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n        @Html.Raw(mySpellButton.getHtml())\n    &lt;/div&gt;\n&lt;/p&gt;\n&lt;script type=\"text/javascript\" src=\"/scripts/ckeditor/ckeditor.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/scripts/ckeditor/adapters/jquery.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(\"#myTextArea\").ckeditor();\n&lt;/script&gt;\n</code></pre>\n\n<p>When I comment out this line line it works.</p>\n\n<pre><code>$(\"#myTextArea\").ckeditor();\n</code></pre>\n"},{"tags":["asp.net-mvc-3","iis"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12671536,"title":"Site on root rather than sub folder","body":"<p>I currently have my application running correctly on AWS using IIS. It currently resides in <a href=\"http://address.com/Site\" rel=\"nofollow\">http://address.com/Site</a> however I want the application to be accessed by typing address.com instead. How could I do this on IIS?</p>\n"},{"tags":["c#","asp.net-mvc-3","validation","html-helper"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":576,"score":2,"question_id":11948643,"title":"MVC3 C# Custom HtmlHelper for input with validation, both client and server side","body":"<p>I have seen some similar questions to this, but they seem to be for older versions of MVC and i have had no luck working out how to apply them to MVC3.</p>\n\n<p>Basically i have written a nice little htmlhelper that will display a chosen parameter for the current model, much like <code>@Html.DisplayFor()</code> does, except that with mine there is an edit button next to it (forgive the lack of styling in these examples!): </p>\n\n<p><img src=\"http://i.stack.imgur.com/TPpPS.png\" alt=\"button example\"></p>\n\n<p>when this button is clicked it will do one of those \"pop-ups\" where an editor field is displayed and the rest of the page is greyed out a bit using some simple jquery:</p>\n\n<p><img src=\"http://i.stack.imgur.com/MTTl4.png\" alt=\"popup example\"></p>\n\n<p>this is my helper:</p>\n\n<pre><code>    public static HtmlString PopUpEditorFor&lt;TModel, TProperty&gt;(this HtmlHelper&lt;TModel&gt; html, Expression&lt;Func&lt;TModel, TProperty&gt;&gt; expression, bool textarea = false)\n    {\n        string id = html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldId(ExpressionHelper.GetExpressionText(expression));\n\n        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);\n\n        var Display = new TagBuilder(\"span\");\n        Display.MergeAttribute(\"class\", \"Display\");\n        Display.InnerHtml = metadata.Model.ToString();\n\n        var Edit_Button = new TagBuilder(\"span\");\n        Edit_Button.MergeAttribute(\"class\", \"Edit_Button\");\n        Edit_Button.InnerHtml = \" Edit\";// change to use resources file \n\n        var Display_Container = new TagBuilder(\"div\");\n        Display_Container.MergeAttribute(\"class\", \"Display\");\n        Display_Container.InnerHtml = Display.ToString(TagRenderMode.Normal) + Edit_Button.ToString(TagRenderMode.Normal);\n\n        var legend = new TagBuilder(\"legend\");\n        legend.InnerHtml = \"Edit \" + metadata.DisplayName ?? metadata.PropertyName;\n\n        var Editor_Box_Input = new TagBuilder(\"input\");\n        Editor_Box_Input.MergeAttribute(\"class\", \"Editor_Box\");\n        Editor_Box_Input.MergeAttribute(\"id\", id);\n        Editor_Box_Input.MergeAttribute(\"name\", id);\n        Editor_Box_Input.MergeAttribute(\"type\", \"text\");\n        Editor_Box_Input.MergeAttribute(\"value\", metadata.Model.ToString());\n\n        var Editor_Box_Textarea = new TagBuilder(\"textarea\");\n        Editor_Box_Input.MergeAttribute(\"class\", \"Editor_Box\");\n        Editor_Box_Input.MergeAttribute(\"id\", id);\n        Editor_Box_Input.MergeAttribute(\"name\", id);\n        Editor_Box_Input.MergeAttribute(\"type\", \"text\");\n        Editor_Box_Textarea.InnerHtml = metadata.Model.ToString();\n\n        var Buttons = new TagBuilder(\"div\");\n        Buttons.MergeAttribute(\"class\", \"Buttons\");\n        Buttons.InnerHtml = QuestJSButton(html, \"Cancel\", \"Option Cancel\").ToString() + QuestJSButton(html, \"Save\", \"Submit Save\").ToString();\n\n        var fieldset = new TagBuilder(\"fieldset\");\n        fieldset.InnerHtml += legend.ToString(TagRenderMode.Normal);\n        fieldset.InnerHtml += !textarea \n            ? Editor_Box_Input.ToString(TagRenderMode.SelfClosing) \n            : Editor_Box_Textarea.ToString(TagRenderMode.Normal);\n        fieldset.InnerHtml += Buttons.ToString(TagRenderMode.Normal);\n\n        var form_styled = new TagBuilder(\"div\");\n        form_styled.MergeAttribute(\"class\", \"Editor form_styled\");\n        form_styled.InnerHtml = fieldset.ToString(TagRenderMode.Normal);\n\n        var Editor_BG = new TagBuilder(\"div\");\n        Editor_BG.MergeAttribute(\"class\", \"Editor_BG\");\n        Editor_BG.InnerHtml = form_styled.ToString(TagRenderMode.Normal);\n\n        var PopUp_Editor = new TagBuilder(\"div\");\n        PopUp_Editor.MergeAttribute(\"class\", \"PopUp_Editor\");\n        PopUp_Editor.MergeAttribute(\"id\", id);\n        PopUp_Editor.InnerHtml = Editor_BG.ToString(TagRenderMode.Normal) + Display_Container.ToString(TagRenderMode.Normal);\n\n        return PopUp_Editor.ToString(TagRenderMode.Normal).ToHtmlString();\n    }\n</code></pre>\n\n<p>which is just called like a normal helper:</p>\n\n<pre><code>@Html.PopUpEditorFor(model =&gt; model.property)\n</code></pre>\n\n<p>and produces the following html:</p>\n\n<pre><code>        &lt;div class=\"PopUp_Editor\" id=\"property_id\"&gt;\n          &lt;div class=\"Display\"&gt;\n            &lt;span class=\"Display\"&gt;property_value&lt;/span&gt;\n            &lt;span class=\"Edit_Button\"&gt;Edit&lt;/span&gt;\n          &lt;/div&gt;\n          &lt;div class=\"Editor_BG\"&gt;\n            &lt;div class=\"Editor form_styled\"&gt;\n              &lt;fieldset&gt;\n                &lt;legend&gt;Edit Salutation&lt;/legend&gt;\n                &lt;input class=\"Editor_Box\" id=\"property_id\" name=\"property_id\" type=\"text\" value=\"property_value\" /&gt;\n                &lt;div class=\"Buttons\"&gt;\n                  &lt;span class=\"Option Cancel\"&gt;Cancel&lt;/span&gt;\n                  &lt;span class=\"Submit Save\"&gt;Save&lt;/span&gt;\n                &lt;/div&gt;\n              &lt;/fieldset&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>this works nicely, except that i would like to make MVC3's awesome client/server side validation work with it, and i have no idea how to go about doing this. My goal would be to have any validation error messages displayed below both the display and the input, and for the input to get the classes needed to style it as any other htmlhelper input would be in the case of validation error like this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/LoSiH.png\" alt=\"validation example\"></p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I am pretty sure all i need to do is to make my helper include the requisite html attributes and span elements, here is the HTML generated automatically when you add a view with the \"Edit\" template:</p>\n\n<pre><code>&lt;div class=\"editor-field\"&gt;\n&lt;input class=\"text-box single-line\" data-val=\"true\" data-val-email=\"This is not a valid e-mail address.\" data-val-required=\"You must provide an e-mail address.\" id=\"Email_Address\" name=\"Email_Address\" type=\"text\" value=\"example@domain.com\" /&gt;\n&lt;/div&gt;\n&lt;div class=\"editor-validation\"&gt;\n&lt;span class=\"field-validation-valid\" data-valmsg-for=\"Email_Address\" data-valmsg-replace=\"true\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>so basically i need to know what the correct way of applying this to my helper is, and if possible make the framework do most of the work for me.</p>\n"},{"tags":["asp.net-mvc-3","multiple","onchange","html.dropdownlistfor","firing"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":119,"score":1,"question_id":12676462,"title":"C# MVC3 Drop Down onchange firing post twice","body":"<p>I have a C#.Net MVC3 web app.  I have a drop down list:</p>\n\n<pre><code> @Html.DropDownList(\"AuthorNamesFilter\", AuthorNamesFilter, new { onchange = \"$('form').submit();\" }) \n</code></pre>\n\n<p>This submits to my [HttpPost] public ActionResult Edit.  I'm doing this in order to filter a displayed grid.  It works fine except that the Post gets called twice.  Below is the code in the controller.  Any ideas why it's firing twice?</p>\n\n<pre><code>      [HttpPost]\n        public ActionResult Edit(Guid id, string AuthorNamesFilter, string ApproverNamesFilter)\n        {\n                var proposal = _repo.FindProposalById(id);\n                TryUpdateModel(proposal, null, null, _excludeList);\n\n                ViewBag.DisplayList = GetFilteredDisplayList(proposal, AuthorNamesFilter, ApproverNamesFilter);\n\n               return View(proposal);\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","templates","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":130,"score":0,"question_id":12672828,"title":"Dynamic EditorFor using template from Model","body":"<p>The project is currently MVC3 but could be upgraded if required.</p>\n\n<p>I'm trying to get a content editor for a simple cms improved. At the moment we use</p>\n\n<pre><code>@Html.EditorFor(model=&gt;model.Content) //Content is a List&lt;EditableContent&gt;\n</code></pre>\n\n<p>EditableContent has a (brand new) property of string EditorView. The idea is this will name suitable editors for particular items of content.</p>\n\n<p>What I want to do is use my default EditableContent template if EditorView is null, otherwise use the EditorView as the named template. I'm aware of the overload for EditorFor that takes a template, but that's going to use the same template for each item of content, but that's not what I want.</p>\n\n<p>I did try taking my default template and basically doing</p>\n\n<pre><code>//Shared/EditorTemplates/EditableContent.cshtml\n@model Website.Areas.Admin.EditableContent\n\n@if (!string.IsNullOrWhiteSpace(Model.EditorView))\n{\n&lt;text&gt;\n    @Model.EditorView\n    @Html.EditorForModel(Model.EditorView)\n&lt;/text&gt;\n}\nelse\n{\n  //Original template\n}\n</code></pre>\n\n<p>Weirdly in this case, the view is located (I have a slightly custom view engine which appears to locate the view correctly). The name of the view (via @Model.EditorView ) is emitted to the page, but @Html.EditorForModel() doesn't produce anything.</p>\n\n<p>Any ideas how I can use a custom template per item using EditorFor or similar ?</p>\n"},{"tags":["jquery","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":11120721,"title":"Jquery Function not work in Gmail","body":"<p>I have a view in MVC where I render some field in jquery document ready method like this:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        $(\"#spanTotalTime@(grp.Key)\").html(@((int)totalTime.TotalHours) +\"h \"+@(totalTime.Minutes)+\"m\");\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>Where <em>totalTime</em> is calculated in a <em>for</em>-loop</p>\n\n<p>I used same view to send HTML in Mail</p>\n\n<p>but in Gmail Jquery not fire and so value does not render in span</p>\n\n<p>I hope I clear my point.</p>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["css","asp.net-mvc-3","razor","editorfor"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12675708,"title":"How to customize the EditorFor CSS with razor","body":"<p>I have this class</p>\n\n<pre><code>public class Contact\n{\n    public int Id { get; set; }\n    public string ContaSurname { get; set; }\n    public string ContaFirstname { get; set; }\n    // and other properties...\n}\n</code></pre>\n\n<p>And I want to create a form that allo me to edit all those fields. So I used this code</p>\n\n<pre><code>&lt;h2&gt;Contact Record&lt;/h2&gt;\n\n@Html.EditorFor(c =&gt; Model.Contact)\n</code></pre>\n\n<p>This works fine, but I want to customize how the elements are displayed. For instance I want each field to be displayed in the same line as its label. Because now, the generated html is like this :</p>\n\n<pre><code>&lt;div class=\"editor-label\"&gt;\n  &lt;label for=\"Contact_ContaId\"&gt;ContaId&lt;/label&gt;\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n  &lt;input id=\"Contact_ContaId\" class=\"text-box single-line\" type=\"text\" value=\"108\" name=\"Contact.ContaId\"&gt;\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","checkout"],"answer_count":3,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":1341,"score":0,"question_id":5671746,"title":"Checkout and payment services for asp.net-mvc","body":"<p>I'm about to integrate a payment service in asp.net mvc. I'm not sure where to start. My concept is that I want to allow multiple payment option, including paying at a local bank (which I can actually code in the service layer).</p>\n\n<p>But what about the industry standard payment? (credit card, pay-pal, google check-out) Are there any plugins, tutorials or some sort of example of implementing these things in asp.net mvc?</p>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-validate"],"answer_count":7,"favorite_count":5,"up_vote_count":6,"down_vote_count":0,"view_count":2449,"score":6,"question_id":5117458,"title":"JQuery 1.5 breaks Compare Validate (JQuery Validate 1.8)","body":"<p>After upgrading to JQuery 1.5 and later 1.5.1, my compare validation fails. I'm using JQuery.Validate 1.7. My ViewModel has the following data annotations:</p>\n\n<pre><code>/// &lt;summary&gt;\n/// Gets or sets the full name.\n/// &lt;/summary&gt;\n/// &lt;value&gt;The full name.&lt;/value&gt;\n[Required]\n[Display(Name = \"fullname\", ResourceType = typeof(Milkshake.Commerce.Model.Resources.Text))]\npublic string FullName { get; set; }\n\n/// &lt;summary&gt;\n/// Gets or sets the email.\n/// &lt;/summary&gt;\n/// &lt;value&gt;The email.&lt;/value&gt;\n[DataType(DataType.EmailAddress)]\n[Display(Name = \"email\", ResourceType = typeof(Milkshake.Commerce.Model.Resources.Text))]\n[Required(ErrorMessageResourceName = \"EmailRequired\", ErrorMessageResourceType = typeof(Milkshake.Commerce.Model.Resources.ValidationMessages))]\n[RegularExpression(@\"\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*\", ErrorMessageResourceType = typeof(Milkshake.Commerce.Model.Resources.ValidationMessages), ErrorMessageResourceName = \"EmailInvalid\")]\npublic string Email { get; set; }\n\n/// &lt;summary&gt;\n/// Gets or sets the password.\n/// &lt;/summary&gt;\n/// &lt;value&gt;The password.&lt;/value&gt;\n[DataType(DataType.Password)]\n[Display(Name = \"password\", ResourceType = typeof(Milkshake.Commerce.Model.Resources.Text))]\n[Required(ErrorMessageResourceName = \"PasswordRequired\", ErrorMessageResourceType = typeof(Milkshake.Commerce.Model.Resources.ValidationMessages))]\n[ValidatePasswordLengthAttribute(ErrorMessageResourceName = \"PasswordLength\", ErrorMessageResourceType = typeof(Milkshake.Commerce.Model.Resources.ValidationMessages))]\npublic string Password { get; set; }\n\n/// &lt;summary&gt;\n/// Gets or sets the confirm password.\n/// &lt;/summary&gt;\n/// &lt;value&gt;The confirm password.&lt;/value&gt;\n[DataType(DataType.Password)]\n[Display(Name = \"confirmPassword\", ResourceType = typeof(Milkshake.Commerce.Model.Resources.Text))]\n[Required(ErrorMessageResourceName = \"PasswordRequired\", ErrorMessageResourceType = typeof(Milkshake.Commerce.Model.Resources.ValidationMessages))]\n[Compare(\"Password\", ErrorMessageResourceName = \"PasswordsMustMatch\", ErrorMessageResourceType = typeof(Milkshake.Commerce.Model.Resources.ValidationMessages))]\npublic string ConfirmPassword { get; set; }\n</code></pre>\n\n<p>What ever value I enter, the password fields are never identical.</p>\n\n<p><strong>UPDATE - ASP.NET AntiForgeryToken gets in trouble.</strong></p>\n\n<p>After fooling around in FireBug setting breakpoints, I noticed that in the equalTo validation function, starting on line 1065 in jquery.validate.js, the target element that is found, is not the Password field - but the <code>__RequestVerificationToken</code> that ASP.NET MVC writes when you use the <code>Html.AntiForgeryToken()</code> helper.</p>\n\n<p>So that means we're not even comparing the correct input elements. To work around this issue, I added a dirty hack to the jquery.validate.js file:</p>\n\n<pre><code>// http://docs.jquery.com/Plugins/Validation/Methods/equalTo\nequalTo: function (value, element, param) {\n    // bind to the blur event of the target in order to revalidate whenever the target field is updated\n    // TODO find a way to bind the event just once, avoiding the unbind-rebind overhead\n    var target = $(param).unbind(\".validate-equalTo\").bind(\"blur.validate-equalTo\", function () {\n        $(element).valid();\n    });\n\n    if ($(target).is(\"input[type=hidden]\") &amp;&amp; $(target).attr(\"name\") == \"__RequestVerificationToken\") {\n        var otherElementId = $(element).attr(\"id\");\n        var underScoreIndex = otherElementId.indexOf(\"_\");\n        otherElementId = otherElementId.substring(0, underScoreIndex + 1);\n        otherElementId += $(element).attr(\"data-val-equalto-other\").substring(2);\n\n        target = $(\"#\" + otherElementId);\n    }\n\n    return value == target.val();\n}\n</code></pre>\n\n<p>This hack, takes the data-val-equalto-other attribute's value, and mixes it with its own ID, to find the correct input element. Won't work in all cases. But works for me, in the above case.</p>\n"},{"tags":["asp.net-mvc-3","table","model","foreach","submit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12257287,"title":"Submit column values in ASP.Net MVC3","body":"<p>I'm using ASP.Net MVC3, I've a View in which I'm displaying a simple Table with Model Data as follows:</p>\n\n<pre>\n+-------+---------------+----------------+\n|  ID   |   Name        | Order          |\n+-------+---------------+----------------+\n|  ID   |   Name        |  textbox val=1 |\n+-------+---------------+----------------+\n|  ID   |   Name        |  textbox val=3 |\n+-------+---------------+----------------+\n|  ID   |   Name        |  textbox val=2 |\n+-------+---------------+----------------+\n\n+-------+    +--------------+\n|submit |    | update order |\n+-------+    +--------------+\n</pre>\n\n<p>Here, Order column contains Inputbox with Order values (1,3,2 etc.,). I need to Update my Model [Item {ID, Name, Order}] by reading Order column.</p>\n\n<p>Meaning, I need to submit the Order values to Model, By reading a HTML table column. How to do this?</p>\n"},{"tags":["c#","asp.net-mvc-3","mvc","role"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12672783,"title":"how to mange role Assignment by action wise in MVC3 i.e.each role be assign by different Action?","body":"<p>How to manage role Assignment by action wise in MVC3, i.e. each role is assigned by a different Action in MVC3 in C#.net ?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":103,"score":-1,"question_id":12639363,"title":"How can I make a loop to repeat my method for each item?","body":"<p>there is my issue. In a controller, I have this method which export my view in a file when I click a button.</p>\n\n<pre><code>public ActionResult Export(string searchString, int searchOrder = 0)\n{\n    var user = from m in db.Orders select m;\n\n    if (!String.IsNullOrEmpty(searchString))\n    {\n        user = user.Where(s =&gt; s.ClientID.Contains(searchString));\n    }\n\n    Response.AddHeader(\"Content-Type\", \"application/vnd.ms-excel\");            \n    return this.View(user);\n}\n</code></pre>\n\n<p>My Index view :</p>\n\n<pre><code>@model IEnumerable&lt;MyApp.Models.Order&gt;\n\n@{\n    ViewBag.Title = \"Index\";\n}\n\n&lt;h2&gt;Orders Historic&lt;/h2&gt;    \n\n&lt;div id=\"orderDiv\"&gt;\n@using (Html.BeginForm(\"Export\", \"Historic\", FormMethod.Get))\n{\n            &lt;p&gt;\n        Generate Order with ClientID :&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp\n         @Html.TextBox(\"searchString\")\n\n        &lt;input type=\"submit\" value=\"GENEREMOI\" /&gt;\n        &lt;/p&gt;\n}\n&lt;/div&gt;\n</code></pre>\n\n<p>And my Export view :</p>\n\n<pre><code>@model IEnumerable&lt;KrysGroup.Models.Order&gt;\n\n    &lt;table cellpadding=\"3\" cellspacing=\"3\"&gt;\n        &lt;tr&gt;       \n            &lt;td width=\"12%\" align=\"center\"&gt;\n                Client Name/ID\n            &lt;/td&gt;\n            &lt;td width=\"15%\" align=\"center\"&gt;\n                N° Order\n            &lt;/td&gt;\n\n            OTHER TD....\n\n        &lt;/tr&gt;   \n\n@foreach (var item in Model)\n{\n      TimeSpan result = DateTime.Now - item.OrderDate;\n\n      if (result.Days &lt; 31)\n      {            \n            &lt;tr border=\"1\" bgcolor=\"@Odd\"&gt;\n               &lt;td&gt; @Html.DisplayFor(modelItem =&gt; item.Username) &lt;/td&gt;    \n               &lt;td&gt; @Html.DisplayFor(modelItem =&gt; item.OrderId) &lt;/td&gt;  \n                &lt;td&gt;\n                    &lt;ul style=\"list-style-type:none; padding:0; margin:0\"&gt;\n                        @if (item.OrderDetails != null)\n                        {\n                            foreach (var o in item.OrderDetails)\n                            {\n                                if (o.Pack == null)\n                                { \n                                    &lt;li&gt;  @Html.DisplayFor(modelItem =&gt; o.Product.Name)  &lt;/li&gt;\n                                }\n                                else\n                                {  \n                                    &lt;li&gt; &lt;text&gt;Pack&lt;/text&gt;  @Html.DisplayFor(modelItem =&gt; o.Pack.Name)  &lt;/li&gt;\n                                }\n                            }\n                        }  \n                    &lt;/ul&gt;             \n                &lt;/td&gt;\n\n                OTHER TD...    \n &lt;/table&gt;\n</code></pre>\n\n<p>So, in my view, I inform in a textbox a ClientID and when I click the button, it export in a file all the fields in my table with this ClientID. </p>\n\n<p>I would like to automate this action, that is to say I would like write a method or something for, when I click on the button, it executes this export() method for each clientId it meet in my table.</p>\n\n<p>I hope I was clear enough, sorry for my english..\nThanks for your answers, links, tips whatever. </p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12674464,"title":"How to display image on all content pages ASP.Net MVC","body":"<p>I have put this on my MasterPage in my application if i stay on my default page then the image displayed but when i go on another page image not display . Can you help me why this is not working on another page. </p>\n\n<pre><code>&lt;ul  id=\"scroller\"&gt;\n   &lt;div class=\"serv\"&gt; &lt;a href=\"#\"  onmouseover=\"document.wordpress.src='images/wordpress-development_red.png'\" onmouseout=\"document.wordpress.src='images/wordpress-development.png'\"&gt; &lt;img src=\"images/wordpress-development.png\" name=\"wordpress\"&gt;&lt;br /&gt;\n       WORDPRESS &lt;/a&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"serv1\"&gt; &lt;a href=\"#\"  onmouseover=\"document.Android.src='images/mobil-app-development_red.png'\" onmouseout=\"document.Android.src='images/mobil-app-development.png'\"&gt; &lt;img src=\"images/mobil-app-development.png\" name=\"Android\"/&gt;&lt;br /&gt;\n      Android&lt;/a&gt;\n &lt;/div&gt;\n&lt;/ul&gt;\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","regex","asp.net-mvc-3","validation"],"answer_count":2,"favorite_count":4,"up_vote_count":5,"down_vote_count":1,"view_count":6616,"score":4,"question_id":7242063,"title":"ASP.NET MVC 3 client-side e-mail validation doesn't work","body":"<p>In my registration form I want to put some client-side validations with MVC regular expressions, but it doesn't work... Here is part of model's code</p>\n\n<pre><code>        [Required]\n        [RegularExpression(@\"^([a-zA-Z0-9_\\-\\.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.)|(([a-zA-Z0-9\\-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$\", ErrorMessage = \"Please enter a valid e-mail adress\")]\n        [DataType(DataType.EmailAddress)]\n        [Display(Name = \"Email address*\")]\n        public string Email { get; set; }\n</code></pre>\n\n<p>But the message don't want to appear anyway... What is wrong here?</p>\n\n<p>EDIT</p>\n\n<p>In my View I have this</p>\n\n<pre><code>            &lt;div&gt;\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.Email)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.TextBoxFor(m =&gt; m.Email)\n                @Html.ValidationMessageFor(m =&gt; m.Email)\n            &lt;/div&gt;\n            &lt;/div&gt;\n</code></pre>\n\n<p>And I've also include jQuery libraries in my layout</p>\n\n<pre><code>&lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;@ViewBag.Title&lt;/title&gt;\n    &lt;link href=\"/Content/Site.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;script src=\"/Scripts/jquery-1.5.1.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script src=\"/Scripts/modernizr-1.7.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script src=\"/Scripts/jquery.unobtrusive-ajax.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\" src=\"/Scripts/jquery.validate.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"/Scripts/jquery.validate.unobtrusive.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    @RenderSection(\"Head\")\n&lt;/head&gt;\n</code></pre>\n"},{"tags":["jquery","internet-explorer","asp.net-mvc-3","jquery-ajax"],"answer_count":5,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":4213,"score":3,"question_id":6114360,"title":"Stupid IE prompts to open or save json result which comes from server","body":"<p>Internet explorer in compatibility mode gets the data from the server in an ajax callback method, and pops-up a dialog if I want to save the data or open. How to get rid of that? </p>\n\n<p>client says: </p>\n\n<pre><code>$.ajax({\n        type:'POST',\n        data: $(\"#UIdlgHolder &gt; form\").serialize(),\n        url: $(\"#UIdlgHolder &gt; form\").attr(\"action\"),\n        success: function (data, textStatus, jqXHR) {\n            {\n                alert(data.message);\n            }\n}\n</code></pre>\n\n<p>server answers:</p>\n\n<pre><code>return new JsonResult { Data = new { result = false, message = \"Yay!\" } };\n</code></pre>\n"},{"tags":["asp.net-mvc-3","entity-framework-4.1","pdf-generation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":178,"score":1,"question_id":8530119,"title":"Pdf generation with table of content","body":"<p>I'm creating a web portal for financial institute and we were asked to create a report with table of contents and page numbers and headings. For example, this report looks like ordinary ebook that contains images, table of contents, page numbers, headings, etc.</p>\n\n<p>We are using ASP.net MVC 3, Entity framework and MSSQL server for our infrastructure.</p>\n\n<p>What are the options that I have for considering this pdf generation ? \nAre there any open source solutions ? </p>\n\n<p>I'm familiar with docbook approach XSLT and XSFO, however these bit hard to implement and complex.</p>\n\n<p>What we are searching is a easy apporach ? </p>\n"},{"tags":["jquery","ajax","json","asp.net-mvc-3"],"answer_count":3,"favorite_count":6,"up_vote_count":7,"down_vote_count":0,"view_count":11706,"score":7,"question_id":6031206,"title":"Posting array of JSON objects to MVC3 action method via jQuery ajax","body":"<p>Does the model binder not suport arrays of JSON objects? The code below works when sending a single JSON domain object as part of the ajax post. However, when sending an array of JSON domain objects, the action parameter is null.</p>\n\n<pre><code>     var domains = [{\n                        DomainName: 'testt1',\n                        Price: '19.99',\n                        Available: true\n                    }, {\n                        DomainName: 'testt2',\n                        Price: '15.99',\n                        Available: false\n                    }];\n\n                $.ajax({\n                    type: 'POST',\n                    url: Url.BasketAddDomain,\n                    dataType: \"json\",\n                    data: domains,\n                    success: function (basketHtml) {\n\n                    },\n                    error: function (a, b, c) {\n                        alert('A problem ocurred');\n                    }\n            });\n</code></pre>\n\n<p>This is the action method:</p>\n\n<pre><code>public ActionResult AddDomain(IEnumerable&lt;DomainBasketItemModel&gt; domain)\n{\n    ...\n</code></pre>\n\n<p>Any ideas if it is possible to do this?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>@Milimetric</p>\n\n<p>Your solution works! However, this is my fault, but the code I demonstrated isn't the real code of my problem, I was trying to show equivalent code that is easier to understand.</p>\n\n<p>I am actually creating an array, then interating some DOM elements and pushing a JSON object onto the array, then posting this array as the data...</p>\n\n<pre><code>var domains = [];\n\n                $(this).parents('table').find('input:checked').each(function () {\n                    var domain = {\n                        DomainName: $(this).parent().parent().find('.name').html(),\n                        Price: $(this).parent().parent().find('.price span').html(),\n                        Available: $(this).parent().parent().find('.available').html() == \"Available\"\n                    }\n\n                    domains.push(domain);\n                });\n\n                $.ajax({\n                    type: 'POST',\n                    url: Url.BasketAddDomain,\n                    dataType: \"json\",\n                    data: { domain: domains },\n                    success: function (basketHtml) {\n\n                    },\n                    error: function (a, b, c) {\n                        alert('A problem ocurred');\n                    }\n                });\n</code></pre>\n"}]}
{"total":29155,"page":20,"pagesize":100,"questions":[{"tags":["asp.net-mvc","asp.net-mvc-3","scaffolding","sharp-architecture"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":164,"score":3,"question_id":8962055,"title":"Scaffolding support in Sharp Architecture 2.0","body":"<p>have they dropped support for scaffolding in SA 2.0. i have downloaded the <a href=\"https://github.com/sharparchitecture/Sharp-Architecture\" rel=\"nofollow\">templify-project</a>. I installed templify and created a solution but the project structure it created did not include <code>tools</code> and <code>tools/CrudScaffolding</code> that are supposed to contain code generation templates.<br>\nSo question is: have they dropped code generation capabilities with SA 2.0 and additionally if some one could point me to a demo with SA 2.0 i will be indeed grateful</p>\n"},{"tags":[".net","asp.net-mvc","asp.net-mvc-3","visual-studio","visual-studio-2012"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":144,"score":1,"question_id":12623517,"title":"AccessViolationException after upgrading MVC3 project to VS2012","body":"<p>I've developed an MVC3 web site using VS2010 which works great. I recently upgraded my dev environment to VS2012 RTM. I'm now unable to run the web site in the debugger without crashing the development web server.</p>\n\n<blockquote>\n  <p>WebDev.WebServer40.exe has stopped working</p>\n</blockquote>\n\n<p>I see one of two similar stack traces in VS2012:</p>\n\n<p>Firstly, an <code>AccessViolationException</code>:</p>\n\n<pre><code>mscorlib.dll!System.StringComparer.GetHashCode(object obj) + 0xc bytes  \nmscorlib.dll!System.Collections.Hashtable.GetHash(object key) + 0x10 bytes  \nmscorlib.dll!System.Collections.Hashtable.InitHash(object key, int hashsize, out uint seed, out uint incr) + 0xf bytes  \nmscorlib.dll!System.Collections.Hashtable.Remove(object key) + 0x38 bytes   \nSystem.dll!System.Collections.Specialized.NameObjectCollectionBase.BaseRemove(string name) + 0x2e bytes \nSystem.Web.dll!System.Web.SessionState.SessionStateItemCollection.Remove(string name) + 0x56 bytes  \nSystem.Web.dll!System.Web.SessionState.HttpSessionStateContainer.Remove(string name) + 0xc bytes    \nSystem.Web.dll!System.Web.HttpSessionStateWrapper.Remove(string name) + 0xf bytes   \nDive7.Site.dll!Dive7.Site.D7WebViewPage&lt;object&gt;.IsAdmin.get() Line 56 + 0x19 bytes  C#\n</code></pre>\n\n<p>Secondly, a <code>NullReferenceException</code>:</p>\n\n<pre><code>mscorlib.dll!System.StringComparer.GetHashCode(object obj) + 0x33 bytes \nmscorlib.dll!System.Collections.Hashtable.GetHash(object key) + 0x10 bytes  \nmscorlib.dll!System.Collections.Hashtable.InitHash(object key, int hashsize, out uint seed, out uint incr) + 0xf bytes  \nmscorlib.dll!System.Collections.Hashtable.Remove(object key) + 0x38 bytes   \nSystem.dll!System.Collections.Specialized.NameObjectCollectionBase.BaseRemove(string name) + 0x2e bytes \nSystem.Web.dll!System.Web.SessionState.SessionStateItemCollection.Remove(string name) + 0x56 bytes  \nSystem.Web.dll!System.Web.SessionState.HttpSessionStateContainer.Remove(string name) + 0xc bytes    \nSystem.Web.dll!System.Web.HttpSessionStateWrapper.Remove(string name) + 0xf bytes   \nDive7.Site.dll!Dive7.Site.D7WebViewPage&lt;object&gt;.IsAdmin.get() Line 56 + 0x19 bytes  C#\n</code></pre>\n\n<p>The exact one that occurs seems to be random.</p>\n\n<p>To the best of my knowledge, all I did was install VS2012, reboot, then open my VS2010 solution in the new version of VS, watch it say that the upgrade was successful, and press <kbd>F5</kbd>.</p>\n\n<p>I'm out of ideas. Can anyone suggest what might be going on?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","plupload"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":131,"score":1,"question_id":12663873,"title":"Save file names in database after uploaded, using plupload and mvc3","body":"<p>I am trying to save the name of each individual file in a database after they have been uploaded. I have this code that successfully uploads the files.</p>\n\n<pre><code>   $(function () {\n    $(\"#uploader\").plupload({\n        // General settings\n        runtimes: 'silverlight,flash,html5',\n        url: '@Url.Content( \"~/FileUploadChunks/UploadChunk\" )',\n        max_file_size: '10mb',\n        chunk_size: '1mb',\n        unique_names: true,\n         // Flash settings\n        flash_swf_url: '/plupload/js/plupload.flash.swf',\n        // Silverlight settings\n        silverlight_xap_url: '/plupload/js/plupload.silverlight.xap'\n    });\n\n});\n</code></pre>\n\n<p>This is the Controller</p>\n\n<pre><code>[HttpPost]\n    public ActionResult UploadChunk(int? chunk, int chunks, string name)\n    {\n        var fileUpload = Request.Files[0];\n        var uploadpath = Server.MapPath(\"~/App_Data/UploadedFiles\");\n        chunk = chunk ?? 0;\n        using (var fs = new FileStream(Path.Combine(uploadpath, name), chunk == 0 ? FileMode.Create : FileMode.Append))\n        {\n            var buffer = new byte[fileUpload.InputStream.Length];\n            fileUpload.InputStream.Read(buffer, 0, buffer.Length);\n            fs.Write(buffer, 0, buffer.Length);\n        }\n        return Content(\"chunk uploaded\", \"text/plain\");\n    }\n</code></pre>\n\n<p>Just to test, I tried something like this to try to capture the name and add them to a list to return to the view, but I cannot figure out how to print out the list in the view to see its contents.</p>\n\n<pre><code>[HttpPost]\n    public ActionResult UploadChunk(int? chunk, int chunks, string name)\n    {\n        var fileUpload = Request.Files[0];\n        var uploadpath = Server.MapPath(\"~/App_Data/UploadedFiles\");\n        chunk = chunk ?? 0;\n        using (var fs = new FileStream(Path.Combine(uploadpath, name), chunk == 0 ? FileMode.Create : FileMode.Append))\n        {\n            var buffer = new byte[fileUpload.InputStream.Length];\n            fileUpload.InputStream.Read(buffer, 0, buffer.Length);\n            fs.Write(buffer, 0, buffer.Length);\n        }\n        List&lt;string&gt; list = new List&lt;string&gt;();  \n\n        foreach (string inputTagName in Request.Files)\n        {\n            HttpPostedFileBase file1 = Request.Files[inputTagName];\n            if (file1.ContentLength &gt; 0)\n            {\n                list.Add(file1.FileName);\n            }\n        }\n        ViewBag.List = list;\n       }\n</code></pre>\n\n<p>Ultimately I am just trying to loop through the names and save them in a database. Any help is appreciated. Thanks</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":122,"score":0,"question_id":12648780,"title":"How to redirect to new page(along with model) on JQuery ajax call in MVC3","body":"<p>I have forgot password page, where the user enters the username and clicks the 'Validate' button to check which group he is in. Based on the group we need to display the different partial views (for now let's say it is phone number) in the page. After filling the valid details, <strong>on success I will redirect to a new page where he will update his password, on Failure, I need to show the error message.</strong></p>\n\n<p>Now I have a hard time in writing the code for highlighted.</p>\n\n<p>Here is the code for Jquery ajax function which trigger on submit button click</p>\n\n<pre><code>person = {UserName: $(\"#UserName\").val(), Phone: $(\"#Phone\").val() }\n$.ajax({\n            type: 'POST',\n            url: '@Url.Action(\"ForgotPassword\", \"Customer\")',\n            data: person,\n            dataType: 'json',\n            success: function (data) {\n                //This is the place I need help\n                if(data.IsDataValid){\n                  // redirect to new page passing the model object\n                }\n                else{\n                    //Show an error message without hiding the div\n                }\n            },\n            failure: function () {                   \n            }\n        });\n</code></pre>\n\n<p>Here is the code Controller Action</p>\n\n<pre><code>    [HttpPost]\n    [ValidateInput(true)]\n    public ActionResult ForgotPassword(RegisterModel model)\n    {            \n        if (Request.IsAjaxRequest())\n        {\n            Here is the logic which validates the user\n            return Json(new { regmodel = RegistrationModel })\n        }\n    //If it is not ajax call I want to return the view\n        if (isUsergroup1 == true)\n        {\n            return View(\"View1\", RegistrationModel );\n        }\n        else if (isUsergroup2 == true)\n        {\n            return View(\"View2\", RegistrationModel );\n        }\n        else\n        {\n            return View();\n        }\n\n    }\n</code></pre>\n\n<p>Please help. Thanks in advance</p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":71,"score":0,"question_id":12671553,"title":"All Sundays in month, this month has no Sundays yet,issue","body":"<p>I have this code, it failed because thisMonthSundays are empty:</p>\n\n<pre><code> public ActionResult TradeUKKPISearchesData() //show dropdownlist in the view\n{\n    var now = DateTime.Now;\n    var lastMonth = now.AddMonths(-1);\n    var thisMonthSundays = GetDatesOfSundays(now.Year, now.Month).OrderByDescending(x =&gt; x.Date);\n    var lastMonthSundays = GetDatesOfSundays(lastMonth.Year, lastMonth.Month).OrderByDescending(x =&gt; x.Date); //problem here, must add some sort of check here?\n    var sundaysToTakeFromLastMonth = 4;\n    var sundays = thisMonthSundays.Concat(lastMonthSundays.Skip(Math.Max(0, lastMonthSundays.Count() - sundaysToTakeFromLastMonth)).Take(sundaysToTakeFromLastMonth));\n\n    var allSundaysInThisMonth = new SundaysInMonthViewModel\n    {\n        AllSundays = sundays.Select(x =&gt; new SelectListItem\n        {\n            Value = x.ToString(\"dd/MM/yyyy\"),\n            Text = x.ToString(\"dd/MM/yyyy\"),\n        })\n    };\n\n    var selectedSunday = new SundaysInMonthViewModel\n    {\n        SelectedSunday = thisMonthSundays.Where(x =&gt; x &lt;= now).Last() //failed here\n    };\n\n  return View(allSundaysInThisMonth);\n}\n\nprivate IEnumerable&lt;DateTime&gt; GetDatesOfSundays(int year, int month)\n{\n  var ci = CultureInfo.InvariantCulture;\n  for (int i=1; i &lt;= ci.Calendar.GetDaysInMonth(year, month); i++)\n  {\n      var date = new DateTime(year, month, i);\n      if ((date.DayOfWeek == DayOfWeek.Sunday) &amp;&amp; (date &lt;= DateTime.Now))\n      {\n          yield return date; //skips all for this month\n      }\n  }\n}\n</code></pre>\n\n<p>I need to fix this, please help with ideas?\nthanks</p>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework","ef-code-first"],"answer_count":3,"favorite_count":4,"up_vote_count":2,"down_vote_count":0,"view_count":1941,"score":2,"question_id":8007129,"title":"CodeFirst EF4.1 MVC Against legacy database - Multiplicity conflicts","body":"<p>No matter which way I mix it, it gives me errors.  I have a feeling I'm missing something obvious as I keep getting these errors.</p>\n\n<blockquote>\n  <p>One or more validation errors were detected during model generation:</p>\n  \n  <p>System.Data.Edm.EdmAssociationType: : Multiplicity conflicts with the referential constraint in Role 'Venue_Courses_Source' in relationship 'Venue_Courses'. Because all of the properties in the Dependent Role are non-nullable, multiplicity of the Principal Role must be '1'.</p>\n  \n  <p>System.Data.Edm.EdmAssociationEnd: : Multiplicity is not valid in Role 'Venue_Courses_Target' in relationship 'Venue_Courses'. Because the Dependent Role refers to the key properties, the upper bound of the multiplicity of the Dependent Role must be �1�.</p>\n</blockquote>\n\n<p><strong>A Course can only have one venue, venues can be used by many Courses</strong></p>\n\n<pre><code>public class Course\n{\n    [Key]\n    public virtual int Id { get; set; }\n    public string Title { get; set; }\n    public DateTime StartDate { get; set; }\n    public int VenueId { get; set; }\n\n    public virtual Venue Venue { get; set; }\n}\n\npublic class Venue\n{\n    [Key]\n    public int Id { get; set; }\n    public string Name { get; set; }\n\n    public virtual ICollection&lt;Course&gt; Courses { get; set; }\n}\n\n\nprotected override void OnModelCreating(DbModelBuilder modelBuilder)\n{\n\n    #region Courses\n    //Table Alias\n    modelBuilder.Entity&lt;Course&gt;().ToTable(\"DBSCHEMA.TR_COURSES\");\n    //Keys\n    modelBuilder.Entity&lt;Course&gt;().HasKey(c =&gt; c.Id);\n    //Joins\n    //Join to Venues\n    modelBuilder.Entity&lt;Course&gt;().HasOptional(c =&gt; c.Venue);\n\n    //Fields\n    modelBuilder.Entity&lt;Course&gt;().Property(c =&gt; c.Id).HasColumnName(\"COURSE_ID\");\n    modelBuilder.Entity&lt;Course&gt;().Property(c =&gt; c.Title).HasColumnName(\"CR_TITLE\");\n    modelBuilder.Entity&lt;Course&gt;().Property(c =&gt; c.StartDate).HasColumnName(\"START_DATE\");\n    modelBuilder.Entity&lt;Course&gt;().Property(c =&gt; c.VenueId).HasColumnName(\"VENUE_ID\");\n    #endregion\n\n\n    #region Venues\n    //Table Alias\n    modelBuilder.Entity&lt;Venue&gt;().ToTable(\"DBSCHEMA.VENUES\");\n    //Keys\n    modelBuilder.Entity&lt;Venue&gt;().HasKey(v =&gt; v.Id);\n    //Joins\n    modelBuilder.Entity&lt;Venue&gt;().HasMany(venue =&gt; venue.Courses);\n    //Fields\n    modelBuilder.Entity&lt;Venue&gt;().Property(v =&gt; v.Id).HasColumnName(\"VENUE_ID\");\n    modelBuilder.Entity&lt;Venue&gt;().Property(v =&gt; v.Name).HasColumnName(\"VENUE_NAME\");\n    #endregion\n\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","input-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":114,"score":0,"question_id":12671314,"title":"MVC 3 - Restrict decimal data to 2 decimal places","body":"<p>I have a project that I am developing using MVC 3 using Razor views.</p>\n\n<p>I have a Decimal data type where the user can enter an amount.  The data is submitted to a 3rd party where they insist the amount has a maximum of 2 decimal places.  The amount must be greater than zero.  The maximum amount varies depending on a value retrieved from the database.  So I can't hard code a maximum range of say 9999.99.  </p>\n\n<p>Example:- Let's say the maximum amount for the current transaction is 123.45.  I need to validate that the amount the user enters in the text box is between 0.01 and 123.45.  If the user enters 123.46 this would be invalid because it exceeds the maximum.  If the user enters 100.123 this would also be invalid because it would exceed the maximum of 2 decimal places.</p>\n\n<p>Research so far... I thought I would try and solve the decimal places issue first.  I was wondering if applying this to my model would work...</p>\n\n<pre><code>&lt;DisplayFormat(ApplyFormatInEditMode:=True, DataFormatString:=\"{0.00}\")&gt;\nPublic Property PaymentAmount As Decimal\n</code></pre>\n\n<p>View:-</p>\n\n<pre><code>@Html.TextBoxFor(Function(model) model.PaymentAmount)\n</code></pre>\n\n<p>... but this just seems to do nothing.</p>\n\n<p>Questions:-</p>\n\n<ol>\n<li><p>How can I create validation for a range restricted to 2 decimal places that accepts a value from 0.01 to X  (where X is a maximum pre-determined value returned from the database prior to displaying the view) ?</p></li>\n<li><p>Can this also work with unobtrusive client-side validation?</p></li>\n</ol>\n\n<p>I was thinking about creating a custom validation attribute and also hook this up for client-side validation which I think would work, but seems way like overkill for something that on the face of it would seem like a very simple issue.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12638441,"title":"How to resolve multiple controller error when using ASP.NET sitemap provider","body":"<p>I am using ASP.NET MVC3 and <a href=\"http://mvcsitemap.codeplex.com/\" rel=\"nofollow\">ASP.NET MVC Sitemap Provider</a>.</p>\n\n<p>I have a controller named Application.  I also have an area called Administration.  In the administration area I also have a controller called Application.</p>\n\n<p>The first application controller is for normal website users.  The other application controller is intended for administrators.</p>\n\n<p>I would like my URLs to display as such:</p>\n\n<pre><code>/Application/1001/Notes\n/Administration/Application/1001/Notes\n</code></pre>\n\n<p>The route registration that I have for the 2 above URLs are as such:</p>\n\n<pre><code>Routes.MapRoute(\"ApplicationNote\",\n     \"{controller}/{applicationId}/Notes\",\n     new { controller = \"Application\", action = \"Notes\" },\n     new { applicationId = @\"\\d+\" },\n     new[] { \"MyProject.Web.Controllers\" });\n\nRoutes.MapRoute(\"AdminApplicationNote\",\n     \"{area}/{controller}/{applicationId}/Notes\",\n     new { area = \"Administration\", controller = \"Application\", action = \"Notes\" },\n     new { applicationId = @\"\\d+\" },\n     new[] { \"MyProject.Web.Areas.Administration.Controllers\" });\n</code></pre>\n\n<p>When I run my application and go to any of the action methods in the application controller then I get an error here:</p>\n\n<pre><code>@Html.MvcSiteMap().SiteMapPath()\n</code></pre>\n\n<p>And the error is:</p>\n\n<pre><code>Found multiple controllers:Application\n</code></pre>\n\n<p>Here is a partial view of my sitemap configuration:</p>\n\n<p></p>\n\n<pre><code> &lt;mvcSiteMapNode title=\"About\" area=\"\" controller=\"Home\" action=\"About\" /&gt;\n\n &lt;mvcSiteMapNode title=\"Applications\" area=\"\" controller=\"Application\" action=\"Index\" key=\"ApplicationIndex\"&gt;\n      &lt;mvcSiteMapNode title=\"Create Application\" area=\"\" controller=\"Application\" action=\"Create\" /&gt;\n      &lt;mvcSiteMapNode title=\"Applications List\" controller=\"Application\" area=\"\" action=\"List\" /&gt;\n &lt;/mvcSiteMapNode&gt;\n\n &lt;mvcSiteMapNode title=\"Administration Dashboard\" area=\"Administration\" controller=\"Dashboard\" action=\"Index\"&gt;\n      &lt;mvcSiteMapNode title=\"Users Dashboard\" area=\"Administration\" controller=\"User\" action=\"List\" /&gt;\n &lt;/mvcSiteMapNode&gt;\n</code></pre>\n\n<p></p>\n\n<p>How would I resolve this?  if I remove the route called AdminApplicationNote the other application URLs display correctly.  But then I can get the 2nd area route to work as intended.</p>\n"},{"tags":["asp.net-mvc","json","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":109,"score":1,"question_id":12671559,"title":"ASP.NET MVC 3 Custom Exception Filter OnException Doesn't Fire","body":"<p>I'm developing an ASP.NET MVC 3 project and I want to implement my custom error handling logic. I'm trying to this by extending HandleErrorAttribute like this :</p>\n\n<pre><code>public class ErrorHandlingAttribute : HandleErrorAttribute\n{\n    public override void OnException(ExceptionContext filterContext)\n    {\n        if (!filterContext.ExceptionHandled)\n        {\n            filterContext.Result = new JsonResult { \n                                                    Data = new { success = false, error = filterContext.Exception.ToString() }, \n                                                    JsonRequestBehavior = JsonRequestBehavior.AllowGet \n                                                  };\n            filterContext.ExceptionHandled = true;\n        }\n    }\n}\n</code></pre>\n\n<p>What I need is, after some AJAX calls, to show some error message (by rendering a partial view) on a modal popup dialog. So, in the OnException method, I set the ExceptionContext's result as a JsonResult (I'm not rendering the partialview to string right now, I'll do that later)</p>\n\n<p>My controller action is like below (I have decorated it with my custom filter):</p>\n\n<pre><code> [HttpPost]\n [ErrorHandling]\n public JsonResult Create(StopEditViewModel viewModel)\n {\n        Stop stop = Mapper.Map&lt;StopViewModel, Stop&gt;(viewModel.Stop);\n\n        if (ModelState.IsValid)\n        {\n            Stop addedStop = _testFacade.AddStop(stop);\n\n            return Json(new { success = true, tableContainer = _tableName }, JsonRequestBehavior.DenyGet);\n        }\n\n        return Json(new { success = false }, JsonRequestBehavior.DenyGet);\n }\n</code></pre>\n\n<p>After doing some research, I found that I need to remove <code>filters.Add(new HandleErrorAttribute());</code> line from the RegisterGlobalFilters method in Global.asax. I did that too.</p>\n\n<p>My web.config file has <code>&lt;customErrors mode=\"On\" /&gt;</code> tag.</p>\n\n<p>But when I call the Create POST action, if an exception occurs, the custom filter method is not invoked. The application crashes. Am I missing something?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","posting"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12669678,"title":"My complex object loses its Data when posting with mvc 3","body":"<p>hi I'm tryin to post a complex class\nwitcht itzelf holds different comlex classes</p>\n\n<pre><code>    public static readonly PropertyInfo&lt;List&lt;RoomsWithServices&gt;&gt; RoomsWithServicesListProperty = RegisterProperty&lt;List&lt;RoomsWithServices&gt;&gt;(c =&gt; c.RoomsWithServicesList);\n    public List&lt;RoomsWithServices&gt; RoomsWithServicesList\n    {\n        get { return GetProperty(RoomsWithServicesListProperty); }\n        set { SetProperty(RoomsWithServicesListProperty, value); }\n    }\n\n    public static readonly PropertyInfo&lt;List&lt;SelectableBookingService&gt;&gt; BookingServicesProperty = RegisterProperty&lt;List&lt;SelectableBookingService&gt;&gt;(c =&gt; c.BookingServices);\n    public List&lt;SelectableBookingService&gt; BookingServices\n    {\n        get { return GetProperty(BookingServicesProperty); }\n        set { SetProperty(BookingServicesProperty, value); }\n    }\n</code></pre>\n\n<p>But when I post the model is empty the model is build correctly en shows me the correct data.  But when i try to post the data given to me by the post is empty</p>\n\n<pre><code>@foreach (RoomsWithServices item in Model.RoomsWithServicesList)\n{\n    &lt;div&gt;\n    @Html.HiddenFor(m =&gt; item.Room.VideoConferencingRoomId)\n    @Html.DisplayFor(m =&gt; item.Room.Name)\n    @Html.HiddenFor(m =&gt; item.Room.Name)\n    @foreach (SelectableRoomService service in item.RoomService)\n    {\n        &lt;div&gt;\n        @Html.EditorFor(m =&gt; service.IsSelected)| @Html.DisplayFor(m =&gt; service.RoomService.ServiceName) | @Html.DisplayFor(m =&gt; service.RoomService.Price)\n        @Html.HiddenFor(m =&gt; service.RoomService.ServiceName) \n        @Html.HiddenFor(m =&gt; service.RoomService.Price)\n        &lt;/div&gt;\n    }                                          \n    &lt;/div&gt;\n}\n&lt;/div&gt;\n&lt;div&gt;\n&lt;h2&gt;BookingServies&lt;/h2&gt;\n@foreach (SelectableBookingService item in Model.BookingServices)\n{\n    &lt;div&gt;\n    @Html.EditorFor(m =&gt; item.IsSelected)| @Html.DisplayFor(m =&gt; item.Service.Name) | @Html.DisplayFor(m =&gt; item.Service.Price)\n    &lt;/div&gt;\n}\n&lt;/div&gt;\n\n&lt;input type=\"submit\" name=\"RoomsWithServicesListAndBookingServices\" value=\"Confirm Selected Services\"/&gt; \n&lt;/fieldset&gt;\n</code></pre>\n\n<p>}  </p>\n\n<p>How can i solve this problem </p>\n\n<p>Thx</p>\n"},{"tags":["c#","asp.net-mvc-3","jquery-ui","bundle","web-optimization"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":127,"score":3,"question_id":12669641,"title":"ASP.NET System.Web.Optimization: Bundling jQueryUI CSS","body":"<p>I am trying to bundle jQueryUI in one request.</p>\n\n<p><strong>Global.asax:</strong></p>\n\n<pre><code>var cssjQuery = new StyleBundle(\"~/Content/BundleCSS/jQuery\");\ncssjQuery.IncludeDirectory(\"~/Content/themes/base\", \"*.css\");\n</code></pre>\n\n<p><strong>Layout:</strong></p>\n\n<pre><code>&lt;link href=\"@Styles.Url(\"~/Content/BundleCSS/jQuery\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n</code></pre>\n\n<p><strong>Folder structure:</strong></p>\n\n<ul>\n<li><strong>CSS files:</strong> Content/themes/base/*.css</li>\n<li><strong>Image files:</strong> Content/themes/base/images/*.png</li>\n</ul>\n\n<p>The problem now is that the images can't be loaded, because there is no Folder \"BundleCSS\":</p>\n\n<pre><code>http://localhost:64648/Content/BundleCSS/images/ui-bg_flat_75_ffffff_40x100.png\n</code></pre>\n\n<p>How can I solve this issue? </p>\n"},{"tags":["c#","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12669710,"title":"how can i determine which dropdownlistfor caused postback in mvc3?","body":"<p>i have 2 dropdownlistfor in the view .. every one of them can cause postback\ni want to get the name of the one when cause postback</p>\n\n<pre><code>              &lt;tr&gt;\n                &lt;td&gt;\n                    &lt;label&gt;\n                        Owner&lt;/label&gt;\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.DropDownListFor(m =&gt; m.OwnerId, new System.Web.Mvc.SelectList(Model.CallForPaperJournalOwnersList, \"OwnerId\", \"Owner\"), new { onchange = \"submit();\" })\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;\n                    &lt;label&gt;\n                        Journal Code:&lt;/label&gt;\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.DropDownListFor(m =&gt; m.JournalCode, new System.Web.Mvc.SelectList(Model.JournalsWithCallForPaperHtmlList, \"JournalCode\", \"JournalCode\"), new { onchange = \"submit();\" })\n\n                &lt;/td&gt;\n            &lt;/tr&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":637,"score":1,"question_id":5890080,"title":"My MVC3 website always opens in IE compatability view","body":"<p>I am developing new web site using MVC3 and jQuery, but while I was running, website always opens in IE8 or IE9 compatability view.</p>\n\n<p>What do I have to do to open in standard mode?</p>\n\n<p>Is there anything I can do these check in developer tools provided in IE?</p>\n"},{"tags":["javascript","html","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12670182,"title":"How to add another text box in reference to the 1st text box's input in asp.net mvc","body":"<p>How do i repeat a text box after i opt for option \"next\" in mvc 3 and then add all the integer values entered into those text boxes.</p>\n\n<p>suppose i entered 5 in one text box and then how to automatically open another text box asking for next input and so on...</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","entity-framework","associations","ado.net-entity-data-model"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":163,"score":1,"question_id":12540246,"title":"MVC 3 Entity Data Model not picking up Foreign Keys","body":"<p>I am returning to programming after focusing on databases for a number of years. I used to be a gun in VB6 but .Net has me floundering.</p>\n\n<p>I am attempting to build a web app in MVC from an already existing database. I am roughly following this: <a href=\"http://msdn.microsoft.com/en-us/data/gg685489.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/data/gg685489.aspx</a></p>\n\n<p>I'm using Visual Web Developer Express 2010 10.0.40219.1 SP1Rel\nI'm not sure how to work out the versions of the various templates and plugins.</p>\n\n<p>I am generating an entity data model from an exsting database. The three tables I'm using have Primary and Foreign keys defined, however when I import it, no associations are created in the data model</p>\n\n<p>There seems to be a lot of different ways to build a database enabled web app. If I was more familiar with the syntax I could have hand coded it by now.</p>\n\n<p>Q1: Any idea why associations are not created?</p>\n\n<p>Q2: Can you verify that I need associations to tell the code generator how everything fits together? (i.e. autogenerate the appropriate methods in code). I can't see how it would work otherwise.</p>\n\n<p>Q3: If I create associations manually and Build, I get some errors. It appears that creating associations creates a property against the entity ('CustomerCustomer_ID) and this needs to be mapped to something. However when I press 'Table Mapping' this isn't in the list to map and I can't add it.</p>\n\n<pre><code>Error   1 Error 3004: Problem in mapping fragments starting at line 198:\nNo mapping       specified for properties Task.CustomerCustomer_ID in Set Tasks.\nAn Entity with Key (PK) will not round-trip when: Entity is type [zzzz.Task]\nError   2 Error 11009: Property 'CustomerCustomer_ID' is not mapped.\n</code></pre>\n\n<p>Here's the abridged DDL for two of the tables that I would expect would generate associations</p>\n\n<pre><code>CREATE TABLE [dbo].[Customers](\n    [Customer_ID] [int] IDENTITY(1,1) NOT NULL,\n    [Customer_Name] [varchar](50) NOT NULL,\n........\n....\nCONSTRAINT [PK_Customers] PRIMARY KEY CLUSTERED \n([Customer_ID] ASC))\n\nCREATE TABLE [dbo].[Tasks](\n    [Task_ID] [int] IDENTITY(1,1) NOT NULL,\n    [TaskType_ID] [int] NOT NULL,\n    [Emp_ID] [int] NOT NULL,\n    [Customer_ID] [int] NOT NULL,\n    [Status_ID] [int] NOT NULL,\n    [Task_Desc] [varchar](300) NULL,\n.....\n..\nCONSTRAINT [PK_Tasks] PRIMARY KEY CLUSTERED \n(\n    [Task_ID] ASC\n)\n\nALTER TABLE [dbo].[Tasks]  WITH CHECK ADD  CONSTRAINT [FK_Tasks_Customers] \nFOREIGN KEY([Customer_ID])\nREFERENCES [dbo].[Customers] ([Customer_ID])\nGO\n</code></pre>\n"},{"tags":["javascript","asp.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":74,"score":2,"question_id":12637713,"title":"Hightlighted Check box inside a webgrid is not getting selected in IE7","body":"<p>My application is in MVC 3 and i am using razor engine,I am trying to select first item(default highlighted check box ) inside a web grid,it  is not getting selected in IE7,here is the code</p>\n\n<pre><code>     $(\"#@item\").change(function () {\n\n    });\n</code></pre>\n"},{"tags":["javascript","jquery","ajax","asp.net-mvc-3"],"answer_count":3,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":1958,"score":5,"question_id":9988634,"title":"Ajax call Into MVC Controller- Url Issue","body":"<p>I've looked at the previously-posted jQuery/MVC questions and haven't found a workable answer.</p>\n\n<p>I have the following JavaScript code:</p>\n\n<pre><code>$.ajax({\n type: \"POST\",\n url: '@Url.Action(\"Search\",\"Controller\")',\n data: \"{queryString:'\" + searchVal + \"'}\",\n contentType: \"application/json; charset=utf-8\",\n dataType: \"html\",\n success: function (data) {\n alert(\"here\" + data.d.toString());\n }\n});\n</code></pre>\n\n<p>When calling the Url the post looks like : </p>\n\n<pre><code>NetworkError: 500 Internal Server Error - &lt;a href=\"http://localhost/Web/Navigation/@Url.Action(%22Search%22,%22Chat%22)\"&gt;&lt;/a&gt; \n</code></pre>\n\n<p>Could someone please explain to me why does it return it like this ( the logic behind it ) and offer me a valid solution. Thanks in advance!<br/>\nP.S.: Additional Information: %22 is the URL Encoding Reference for &lt;&lt;\">> character </p>\n"},{"tags":["regex","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12669499,"title":"Regex route constraint with negative lookahead","body":"<p>Tested with <a href=\"http://regexhero.net/tester/\" rel=\"nofollow\">http://regexhero.net/tester/</a></p>\n\n<pre><code>^(?!Bar$)\n</code></pre>\n\n<ul>\n<li><code>Foo</code> matches</li>\n<li><code>Bar</code> doesn't match</li>\n<li><code>FooBar</code> matches</li>\n<li><code>BarBaz</code> matches</li>\n<li><code>FooBarBaz</code> matches</li>\n</ul>\n\n<p>When setting a route constraint, I have to use <code>^(?!Bar$).*</code> to get the same results. Why is that?</p>\n"},{"tags":["asp.net-mvc-3","visual-studio-2012","intellitrace"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":757,"score":2,"question_id":11090331,"title":"Visual Studio 2012 RC Throwing Exception When trying to use IntelliTrace with Call Information in a Migrated Project","body":"<p>I installed Visual Studio 2012 Ultimate RC this morning after learning about IntelliTrace at TechEd last week.  We currently use VS 2010 Professional, so using the 2012 RC was my only easy option for testing out IntelliTrace.</p>\n\n<p>I opened up VS 2012 Ultimate RC and opened a MVC 3 project that was written in VS 2010.  IntelliTrace runs fine if I have it set to \"IntelliTrace events only\".  If I set it to \"IntelliTrace events and call information\" however, I get an exception when starting the debugger: </p>\n\n<pre><code>System.Reflection.TargetInvocationException was unhandled\nHResult=-2146232828\nMessage=Exception has been thrown by the target of an invocation.\nSource=mscorlib\nStackTrace:\n   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor)\n   at System.Reflection.RuntimeMethodInfo.UnsafeInvokeInternal(Object obj, Object[] parameters, Object[] arguments)\n   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\n   at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)\n   at System.Web.HttpApplication.InvokeMethodWithAssert(MethodInfo method, Int32 paramCount, Object eventSource, EventArgs eventArgs)\n   at System.Web.HttpApplication.ProcessSpecialRequest(HttpContext context, MethodInfo method, Int32 paramCount, Object eventSource, EventArgs eventArgs, HttpSessionState session)\n   at System.Web.HttpApplicationFactory.FireApplicationOnStart(HttpContext context)\n   at System.Web.HttpApplicationFactory.EnsureAppStartCalled(HttpContext context)\n   at System.Web.HttpApplicationFactory.GetApplicationInstance(HttpContext context)\n   at System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr)\n   at System.Web.HttpRuntime.ProcessRequestNow(HttpWorkerRequest wr)\n   at System.Web.HttpRuntime.ProcessRequestNoDemand(HttpWorkerRequest wr)\n   at System.Web.HttpRuntime.ProcessRequest(HttpWorkerRequest wr)\n   at Microsoft.VisualStudio.WebHost.Request.Process()\n   at Microsoft.VisualStudio.WebHost.Host.ProcessRequest(Connection conn)\n   at Microsoft.VisualStudio.WebHost.Host.ProcessRequest(Connection conn)\n   at Microsoft.VisualStudio.WebHost.Server.OnSocketAccept(Object acceptedSocket)\n   at System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(Object state)\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\n   at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()\n   at System.Threading.ThreadPoolWorkQueue.Dispatch()\n   at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()\nInnerException: System.AccessViolationException\n   HResult=-2147467261\n   Message=Attempted to read or write protected memory. This is often an indication that other memory is corrupt.\n   StackTrace:\n   InnerException: \n</code></pre>\n\n<p>The problem seems to be somewhere in the function entry to Microsoft.VisualStudio.WebHost.Server.OnSocketAccept.  I have no idea what this is though.</p>\n\n<p>I played around some and found that:</p>\n\n<ul>\n<li>The problem doesn't occur if I open a web forms project that was created in VS 2010.</li>\n<li>The problem doesn't occur if I create a new MVC 3 project in VS 2012 RC.</li>\n<li>The problem only occurs if I open a MVC 3 project that was created in VS 2010.</li>\n</ul>\n\n<p>I'm stumped as to how to try and fix this other than creating a new project in VS 2012 RC and copying all of the code over, which I'd rather not do for every project we have.  It could be a bug in VS 2012 RC, I don't know.  I'll also note that I'm also getting an error saying \"Cannot find or open the PDB file\" that appears with the last event in the IntelliTrace output, but not sure if it's connected.  Any help would be awesome.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":11723967,"title":"Uploading file with","body":"<p>I am trying to upload a file to location ~/Files however I am not successful.</p>\n\n<p>I use MVC 3 and my code is thus.</p>\n\n<p>I have a controller GetFileController</p>\n\n<p>I have an action method in this controller</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","data-binding"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":110,"score":-1,"question_id":12544413,"title":"How to use datalist in mvc3","body":"<p>I am new in mvc. i am working with mvc project .it's a shopping cart project. In asp.net web forms we used data list control and we also set a RepeatColumns property like 5,10,20.  What is alternate to that in MVC? Can I use the same control in MVC as well?</p>\n\n<p>so can any one please tell me how to show my data in data list control?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":92,"score":1,"question_id":12668504,"title":"partial view display with targeted div in MVC3 Razor view engine","body":"<p>My Controller Action is:</p>\n\n<pre><code>        public ActionResult PVInPage()\n        {\n            return View();\n        }\n\n        public ActionResult ViewPage2()\n        {\n            return PartialView();\n        }\n</code></pre>\n\n<p>My Main View:</p>\n\n<pre><code>@using (Html.BeginForm(\"ViewPage2\", \"PartialViewInPage\"))\n{    \n    &lt;input type=\"submit\" value=\"Call Page Two\" /&gt;  \n}\n\n&lt;div id=\"DisplayPartilView\"&gt;\n\n        @*display partial view *@\n\n&lt;/div&gt;\n</code></pre>\n\n<p>My Partial view Is :</p>\n\n<pre><code>  @{\n        ViewBag.Title = \"View Page 2\";\n    }\n\n    &lt;div style=\"width:500px; height:200px; background-color:Gray\" &gt;\n\n\n     &lt;h1&gt; This is my Partial view &lt;/h1&gt;\n\n    &lt;/div&gt;\n</code></pre>\n\n<p>Now I want to do : when i click submit button in my main view then my partial view arise in </p>\n\n<p>My main view inner div with id=\"DisplayPartilView\". \nThanks for response </p>\n"},{"tags":["vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12668018,"title":"Program ignoring folder it's in","body":"<p>I have placed my program within a subfolder on the server: localhost/program and when the program runs it runs correctly however all action links and images point to localhost/... rather than localhost/program/...?</p>\n\n<p>I have tried to change my routing by adding \"program/\" to the beginning of \"{controller}/..\" however this seems to have little effect? Any suggestions?</p>\n"},{"tags":["javascript","asp.net-mvc-3","jquery-plugins","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12296025,"title":"HtmlBox (jquery Plugin) not working in ajax call","body":"<p>I am using .net framework 4.0 with MVC. </p>\n\n<p>I have included HTMLBox (jquery plugin) in my page as I need a WYSWYG editor for my Text area control. </p>\n\n<p>I have a partial view called Instruction where I declare the Textarea control as:</p>\n\n<pre><code>@Html.TextAreaFor(model =&gt; model.Instruction, new {@cols = 80, @rows = 10 })\n</code></pre>\n\n<p>On a Ajax call I populate this Partial view on my page. Like this:</p>\n\n<pre><code> function EditInstruction(progId) \n    {\n            var getUserUrl = '@Url.Action(\"\")';\n            var courseType =  $('input:radio[name=CourseType]:checked').val();\n            var acadYr = $(\"#AcadYear\").val();\n            var sem = $(\"#Sem\").val();\n\n            $.ajax({\n                url: '@Url.Action(\"EditInstruction\", \"CustomizeInstructionsAndCheckList\")',\n                data: { progId: progId, acadYr: acadYr, sem: sem, courseType: courseType },\n                cache: false,\n                type: \"get\",\n                // callback handler that will be called on success\n                success: function (response, textStatus, jqXHR) {\n\n               $(\"#PartailLoadForCheckList\").html($(response));  \n               callAjaxCallsForCascade(getUserUrl.toString());\n               TextEditorForDisplay();\n\n\n                },\n                // callback handler that will be called on error\n                error: function (jqXHR, textStatus, errorThrown) {\n\n                },\n                // callback handler that will be called on completion\n                // which means, either on success or error\n                complete: function () {\n\n                }\n            });\n        }\n\n This is the code for TextEditorForDisplay(), where I initialize my HtmlBox\n\n function TextEditorForDisplay() {\n\n        mybox = $(\"#Instruction\").htmlbox({\n       toolbars:[\n        [\n        // Cut, Copy, Paste\n        \"separator\",\"cut\",\"copy\",\"paste\",\n        // Undo, Redo\n        \"separator\",\"undo\",\"redo\",\n        // Bold, Italic, Underline, Strikethrough, Sup, Sub\n        \"separator\",\"bold\",\"italic\",\"underline\",\"strike\",\"sup\",\"sub\",\n        // Left, Right, Center, Justify\n        \"separator\",\"justify\",\"left\",\"center\",\"right\",\n        // Ordered List, Unordered List, Indent, Outdent\n        \"separator\",\"ol\",\"ul\",\"indent\",\"outdent\",\n        // Hyperlink, Remove Hyperlink, Image\n        \"separator\",\"link\",\"unlink\",\"image\"     \n        ],\n        [// Show code\n        \"separator\",\"code\",\n        // Formats, Font size, Font family, Font color, Font, Background\n        \"separator\",\"formats\",\"fontsize\",\"fontfamily\",\n        \"separator\",\"fontcolor\",\"highlight\",\n        ]\n        ],\n        icons: 'default',\n        skin: 'blue',\n        success: function () { alert(\"Successfully posted\"); },\n        error: function () { alert(\"Error posting\"); }\n        });\n\n\n\n    }\nThe problem I face is that, the HtmlBox works only when it is Loaded first and does not work for the subsequent ajax calls. \n</code></pre>\n\n<p>This is the error I get: <code>TypeError: d.iframe.contentWindow is null</code></p>\n\n<p>Can anyone help me on this?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc-3","razor","partial-views","data-sharing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1589,"score":1,"question_id":10526703,"title":"ASP.NET MVC 3 WITH RAZOR : How to pass selected checkbox' ids in a Partial view to controller action?","body":"<p>I have a partialview [_SearchProduct] within the main view, let's say [product] view. The Partialview  has <strong>a number of checkboxes segregated into different sections</strong> like search by company,search by product etc. with one [search] button. </p>\n\n<p>A User can select multiple checkboxes. When user clicks [search] button <strong>I need to pass ids of all selected checkbox to controller action</strong> and re-render the page again considering the user's selection . Please guide me how to pass selected checkbox ids to my controller action.</p>\n\n<p>My partial view is something like below:</p>\n\n<pre><code>&lt;fieldset&gt;\n&lt;legend&gt;By Company&lt;/legend&gt;\n&lt;table  style=\"border-style: none;\"&gt;\n   &lt;tr&gt;\n        @{\n            int i = 0;\n            foreach (var item in Model.CompanyName)\n            {\n\n                i = i + 1;\n            &lt;td style=\"border-style: none;text-decoration:none;\" &gt;\n                @Html.CheckBox(\"chkCompany\",new {id=\"chkCompany_\" + Model.CompanyId.Tostring()}) @Model.CompanyName\n            &lt;/td&gt;\n                if (i == 5)\n                {\n                    @:&lt;/tr&gt;&lt;tr&gt;\n                    i = 0;\n                }\n\n            }\n        }\n    &lt;/tr&gt;\n&lt;/table&gt;\n&lt;/fieldset&gt;\n\n&lt;fieldset&gt;\n&lt;legend&gt;By Product&lt;/legend&gt;\n&lt;table  style=\"border-style: none;\"&gt;\n    &lt;tr&gt;\n        @{\n             i = 0;\n            foreach (var item in Model.Product)\n            {\n                i = i + 1;\n            &lt;td style=\"border-style: none;text-decoration:none;\" &gt;\n                @Html.CheckBox(\"chkProduct\",new {id=\"chkProduct_\" + Model.CompanyId.Tostring()}) @Model.ProductName\n            &lt;/td&gt;\n                if (i == 10)\n                {\n                    @:&lt;/tr&gt;&lt;tr&gt;\n                    i = 0;\n                }\n\n            }\n        }\n    &lt;/tr&gt;\n&lt;/table&gt;\n&lt;/fieldset&gt;\n</code></pre>\n\n<ul>\n<li>checkboxes are dynamic</li>\n<li>Checkbox id represent the primarykey of respective table based on which i do filtering.</li>\n</ul>\n\n<p>Please guide me>></p>\n"},{"tags":["asp.net-mvc-3","razor","checkbox","input-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":135,"score":0,"question_id":12320391,"title":"Html.CheckBoxFor() is causing validation messages to disappear","body":"<p>I'm working in ASP.NET MVC 3 and I'm running into an odd problem. I got a checkbox set up so the user must check it to indicate they have read the disclosure and continue. They cannot continue if they don't check this. That all works.</p>\n\n<p>If they do not check the box, the validation message pops up as required, and the label is displayed in red. However, when I check the box, the label disappears with the validation message. What would cause this? I'd like the label to stay put. ;) Here's the code in the view:</p>\n\n<pre><code>    @section StepContent\n    {\n\n    &lt;div&gt;\n        @Html.LabelFor(m =&gt; m.ApplicantAgreesToDisclosure)\n        @Html.CheckBoxFor(m =&gt; m.ApplicantAgreesToDisclosure)\n        @Html.ValidationMessageFor(m =&gt; m.ApplicantAgreesToDisclosure, \"Please indicate that you agree to the disclosure.\")\n    &lt;/div&gt;\n\n    }\n</code></pre>\n\n<p>And the code in the Model:</p>\n\n<pre><code>    [DisplayName(\"I have read and accept the above disclosure\")]\n    [ESignatureRequiredValidation(ErrorMessage = \"Please indicate that you agree to the disclosure.\")]\n    public bool ApplicantAgreesToDisclosure { get; set; }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","visual-studio-2010","c#-4.0","mono"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":147,"score":3,"question_id":12665751,"title":"How to run MVC3 or newer application in Mono","body":"<p>Default ASP .NET MVC 3 application is created using in Microsoft Web Developer Express 2010</p>\n\n<p>Application is published to file system and copied to Debian server where mono 2.10.8 , Apache and mod_mono are installed.</p>\n\n<p>Trying to run application causes error:</p>\n\n<pre><code>Server Error in '/mvc3test' Application\n\n--------------------------------------------------------------------------------\n\nCould not load type 'System.Web.WebPages.Razor.RazorBuildProvider' from assembly 'System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.\n\nDescription: HTTP 500. Error processing request.\n\nStack Trace: \n\n\n\nSystem.TypeLoadException: Could not load type 'System.Web.WebPages.Razor.RazorBuildProvider' from assembly 'System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.\n  at (wrapper managed-to-native) System.Type:type_is_assignable_from (System.Type,System.Type)\n  at System.Type.IsAssignableFrom (System.Type c) [0x00000] in &lt;filename unknown&gt;:0 \n  at System.Web.Compilation.BuildProvider.RegisterBuildProvider (System.String extension, System.Type providerType) [0x00000] in &lt;filename unknown&gt;:0 \n  at System.Web.WebPages.Razor.PreApplicationStartCode.Start () [0x00000] in &lt;filename unknown&gt;:0 \n  at System.Web.Mvc.PreApplicationStartCode.Start () [0x00000] in &lt;filename unknown&gt;:0 \n  at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke (System.Reflection.MonoMethod,object,object[],System.Exception&amp;)\n  at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000] in &lt;filename unknown&gt;:0  \n\n--------------------------------------------------------------------------------\nVersion information: Mono Runtime Version: 2.10.8.1 (mono-2-10/70a5c95 Wed Feb 8 18:11:45 CET 2012); ASP.NET Version: 4.0.30319.1\n</code></pre>\n\n<p>bin directory contains required dlls copied from windows:</p>\n\n<pre><code>EntityFramework.dll\nmvc3test.dll\nSystem.Web.Entity.dll\nSystem.Web.Helpers.dll\nSystem.Web.Mvc.dll\nSystem.Web.WebPages.dll\nSystem.Web.WebPages.Razor.dll\nmvc3test.pdb\nEntityFramework.xml\n</code></pre>\n\n<p>so all required dlls are present</p>\n\n<p>How to run mvc3 or mvc4 application in mono or fix this error ?</p>\n"},{"tags":["asp.net-mvc-3","asp.net-mvc-4","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":98,"score":0,"question_id":12665620,"title":"asp.net mvc 4 webapi advantage over traditional asp.net mvc 3 ajax call","body":"<p>I am testing the new web api from asp.net mvc 4, I don' t see much advantages over a current action controller call from existing asp.net mvc 3.</p>\n\n<p>action controller from mvc 3 can return json very much the same manner as web api.</p>\n\n<p>I have 2 questions concerning the web api:</p>\n\n<ol>\n<li>When should we use web api over standard action controller jsonresults ?</li>\n<li>How can we protect the web api, with granted access from differents plateforms ( authorize mobiles apps, pr other websites ) ?</li>\n</ol>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc-3","c#-4.0","logging","aop","postsharp"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12641871,"title":"Using PostSharp with TraceAttribute for logging with HttpContext's SessionID","body":"<p>I'm using PostSharp with the <code>TraceAttribute</code> on each class in order to write to log files. A new requirement is to be able to prepend each log entry with the <code>SessionID</code>.</p>\n\n<p>PostSharp doesn't seem to be able to work this way though. I've tried the two approaches that made sense to me and neither work.</p>\n\n<p><strong>Try #1</strong></p>\n\n<p>I added a string parameter to the <code>TraceAttribute</code> constructor to be passed in and used by the <code>OnEntry</code>, <code>OnExit</code> and <code>OnException</code> methods.</p>\n\n<pre><code>private readonly string _sessionID;\n\npublic TraceAttribute(string sessionID)\n{\n    _sessionID = sessionID;\n    logger = new Logger();\n}\n\npublic override void OnExit(MethodExecutionArgs args)\n{\n    logger.LogMethodExit(string.Format(\"Session {0} Exiting {1}.{2}\", _sessionID, args.Method.DeclaringType.FullName, args.Method.Name));\n}\n</code></pre>\n\n<p>My controllers were decorated with the [Trace] attribute originally and I modified to this approach...</p>\n\n<pre><code>[Trace(HttpContext.Session.SessionID)]\n</code></pre>\n\n<p>This doesn't work as the <code>HttpContext</code> is not available in a static context. </p>\n\n<p>So that idea is out the window.</p>\n\n<p><strong>Try #2</strong></p>\n\n<p>So my next try was to simply create the <code>sessionId</code> variable locally to each method in the <code>TraceAttribute</code>...</p>\n\n<pre><code>public override void OnEntry(MethodExecutionArgs args)\n{\n    var sessionID = HttpContext.Current.Session.SessionID;\n    logger.LogMethodEntry(string.Format(\"Session {0} Entering {1}.{2}\", sessionID, args.Method.DeclaringType.FullName, args.Method.Name));\n}\n</code></pre>\n\n<p>This doesn't work either as again, the <code>HttpContext</code> is not yet available and is a <code>null</code> object at runtime as soon I run the solution..</p>\n\n<p><strong>Try #3</strong></p>\n\n<pre><code>public override void OnEntry(MethodExecutionArgs args)\n{\n    string sessionID = \"Not initialized\";\n    if (HttpContext.Current.Session.SessionID != null)\n        sessionID = HttpContext.Current.Session.SessionID;\n    logger.LogMethodEntry(string.Format(\"Session {0} Entering {1}.{2}\", sessionID, args.Method.DeclaringType.FullName, args.Method.Name));\n}\n</code></pre>\n\n<p>Is there any way to get the session information into a <code>TraceAttribute</code> that is weaved with PostSharp in this manner? Some workaround that can accomplish this goal?</p>\n"},{"tags":["vb.net","asp.net-mvc-3","iis","amazon-web-services"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12665599,"title":"Routing not working on IIS","body":"<p>I have recently built my application to my EC2 instance running IIS (for simplicity and security lets assume its aws.com)</p>\n\n<p>My application resides in a sub folder of the default web site 'Laundry' and is thus accesible and works when accessed via:\n<strong>http://aws.com/Laundry</strong></p>\n\n<p>However my images are broken and links too. For example a link to a controller/view should be:\n<strong>http://aws.com/Laundry/Customer/Create</strong> however they all ignore the subfolder and link to <strong>http://aws.com/Customer/Create</strong> and are such broken. </p>\n\n<p>Does anyone have any idea how I can correct this issue so that my app thinks its domain is the full <a href=\"http://aws.com/Laundry\" rel=\"nofollow\">http://aws.com/Laundry</a>? I am not sure if this is an ASP.net problem, IIS or AWS problem.</p>\n"},{"tags":["asp.net-mvc-3","autofac"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12664165,"title":"Autofac in asp.net mvc 3","body":"<p>I do so in Global.asax:</p>\n\n<pre><code>var builder = new ContainerBuilder();\nbuilder.RegisterControllers(Assembly.GetExecutingAssembly());\nbuilder.RegisterModule(new ConfigurationSettingsReader(\"autofac\"));\nbuilder.RegisterAssemblyTypes();\n\nvar container = builder.Build();\nDependencyResolver.SetResolver(new AutofacDependencyResolver(container));\n</code></pre>\n\n<p>My web.config is as</p>\n\n<pre><code>&lt;connectionStrings&gt;\n    &lt;add name=\"MSSQL\" connectionString=\"Server=.;Database=MyDB;Trusted_Connection=yes;\"/&gt;\n&lt;/connectionStrings&gt;\n\n  &lt;autofac&gt;\n    &lt;components&gt;\n      &lt;component service=\"DataAccessLayer.Abstract.IMyRepository, DataAccessLayer\" type=\"DataAccessLayer.Concrete.SqlMyRepository, DataAccessLayer\"&gt;\n      &lt;/component&gt;\n    ...\n    &lt;/components&gt;\n &lt;/autofac&gt;\n</code></pre>\n\n<p>I see in debug all my types are registered by autofac, but for executing application I have exception \"non-parameter constructor is not found\", though I need in passing parameters to constructor. What I do wrong? Thank's.</p>\n"},{"tags":["html","css","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12662792,"title":"Style not working on this table","body":"<p>I have neglected this for awhile now just to focus on the working part. But now am more concerned about this part and it's not going away</p>\n\n<pre><code>&lt;table cellspacing=\"0\" cellpadding=\"0\" style=\"border:none\"&gt;\n    &lt;tr&gt;\n            &lt;td class=\"editor-label\" width=\"140px\"&gt;\n                @Html.LabelFor(model =&gt; model.UserName)\n            &lt;/td&gt;\n            &lt;td class=\"editor-field\"&gt;\n                @Html.DisplayFor(model =&gt; model.UserName)\n            &lt;/td&gt;\n    &lt;/tr&gt;\n    ....\n\n&lt;/table&gt;\n</code></pre>\n\n<p>As you can see I put removed cellpadding, cellspacing, added border=none and none of this fixed it. Why is this table no responding to css?</p>\n\n<p>The rows lines are not going away. I want to remove the lines.</p>\n\n<p>I have also remove all class attributes on the <code>td</code> but this didn't still work</p>\n\n<h2>UPDATE</h2>\n\n<p>I removed this in the Style.css and it worked. <strong>But why couldn't I use inline style to override the style sheet settings?</strong></p>\n\n<pre><code>table td {\n    padding: 5px;\n    border: solid 1px #e8eef4;\n}\n</code></pre>\n\n<p>For now I will just have my own style. Why was the assumption that every table must have lines?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","entity-framework","asynchronous"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":201,"score":2,"question_id":7790523,"title":"Inserting data in background/async task what is the best way?","body":"<p>I have an very quick/lightweight mvc action, that is requested very often and I need to maintain minimal response time under heavy load.  </p>\n\n<p>What i need to do, is from time to time depending on conditions to insert small amount of data to sql server (log unique id for statistics, for ~1-5% of queries).</p>\n\n<p>I don't need inserted data for response and if I loose some of it because application restart or smth, I'll survive.</p>\n\n<p>I imagine that I could queue somehow inserting and do it in background, may be even do some kind of buffering - like wait till queue collects 100 of inserts and then make them in one pass.</p>\n\n<p>I'm pretty sure, that somebody must have done/seen such implementation before, there's no need to reinvent wheel, so if somebody could point to right direction, I would be thankful.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","nopcommerce"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":101,"score":0,"question_id":12528345,"title":"jquery slider for nopcommerce 2.65 with MVC","body":"<p>I am working on latest nopCommerce V 2.65. I would like to provide a jquery slider which moves on arrow key as well as on mouse click on side arrow.</p>\n\n<p>Plesae provide me any link or demo code.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc-3","razor","asp.net-mvc-4","sections"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12661715,"title":"Render Specific Section of Views in ASP.Net Mvc 4","body":"<p>In Asp.Net Mvc when you Render view in a layout that defines some Sections, all Sections in view placed in proper Sections as you defined in layout file,</p>\n\n<p>consider a situation when you want to RenderPartial a view (which have some Sections) in another view, but all the code which you placed in Section of child view does not render in parent view (because the parent view does not necessarily have the defined Sections) so only parts of view that does not placed in any Section are rendered,</p>\n\n<p>Now my question: is it possible to render specific Section of view with methods RenderPartial or RenderAction ?</p>\n"},{"tags":["asp.net-mvc-3","internet-explorer","razor","postback"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2562,"score":1,"question_id":8977118,"title":"Form Submit button in MVC3/Razor doesn't work in Internet Explorer","body":"<p>I have a form written in ASP.NET MVC3/Razor.  The form post works perfectly well in Firefox and Chrome, but for some reason in Internet Explorer, the \"Submit\" button is unresponsive.</p>\n\n<p>To be clear, if any client-side field validations fail, the validation messages are displayed as expected.  But the Model of the view implements <code>IValidatableObject</code> and overrides <code>Validate()</code>, and if the data should cause a violation of the validation rules, no error message is displayed.  This leads me to believe that no postback is occurring at all.</p>\n\n<p>Any idea why IE would be behaving this way?</p>\n\n<p><strong>EDIT:</strong> Code snippet (looks pretty run of the mill, no?):</p>\n\n<pre><code>@model MyModel\n...\n@using (Html.BeginForm(\"SaveMyForm\", \"Home\")) {\n&lt;fieldset&gt;\n  ...\n  &lt;input type=\"submit\" value=\"Save\" class=\"submit\" /&gt;\n&lt;/fieldset&gt;\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12549707,"title":"Adding a New one-to-one Parent-Child Record Saying Model Is Not Valid","body":"<p>I have this model:</p>\n\n<pre><code>public class Employee {\n    public int EmployeeId { get; set; }\n    [Required(ErrorMessage = \"Employee Name is Required.\")]\n    public string Name { get; set; }\n\n    public SkillSet SkillSet { get; set; }\n}\n\npublic class SkillSet {\n    public int SkillSetId { get; set; }\n    public string ProgrammingLanguage { get; set; }\n\n    public int EmployeeId { get; set; }\n    public Employee Employee { get; set; }\n}\n</code></pre>\n\n<p>Using this Partial View Rendered in a Form:</p>\n\n<pre><code>@Html.HiddenFor(x =&gt; x.EmployeeId)\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"span3\"&gt;&lt;strong&gt;Name&lt;/strong&gt;&lt;/div&gt;\n    &lt;div class=\"span2\"&gt;@Html.TextBoxFor(x =&gt; x.Name, new { @class = \"\" })&lt;/div&gt;\n&lt;/div&gt;\n@Html.HiddenFor(x =&gt; x.SkillSet.SkillSetId)\n@Html.HiddenFor(x =&gt; x.SkillSet.EmployeeId)\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"span3\"&gt;&lt;strong&gt;Programming Skills&lt;/strong&gt;&lt;/div&gt;\n    &lt;div class=\"span2\"&gt;@Html.TextBoxFor(x =&gt; x.SkillSet.Programming, new { @class = \"\" })&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I populate the form from get by returning a new instance of the Employee for posting, but when I try to save the new record there is an error in ModelState regarding the <code>SkillSet.SkillSetId</code> being empty for the new record.</p>\n\n<p>What am I missing here to add the new parent-child record to my db?</p>\n\n<p>EDIT:\nI've got it to work now. My problem was just the rendering of the Hidden Fields for my form. I had to put the hidden fields in a div and they rendered fine and I was able to handle the data from post back.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12660394,"title":"Passing value from EditorFor to controller","body":"<p>This is my view where education is the list in the model. </p>\n\n<pre><code> @using chpayroll.Models.CustInformations\n @model CustInfoExtract\n\n @Html.HiddenFor(x =&gt; x.flag, new { @id = \"flag\" })\n      @Html.HiddenFor(x =&gt; x.StaffId)\n        &lt;table style=\" width:730px\"&gt;    \n            &lt;tr&gt;\n                &lt;th&gt;Country&lt;/th&gt;\n                &lt;th&gt;Board&lt;/th&gt;\n                &lt;th&gt;Level&lt;/th&gt;\n                &lt;th&gt;PassedYear&lt;/th&gt;\n                &lt;th&gt;Division&lt;/th&gt;\n            &lt;/tr&gt;     \n            &lt;tr&gt; \n               @Html.EditorFor(x =&gt; x.education)\n            &lt;/tr&gt;\n            &lt;tr&gt;\n               &lt;td&gt;&lt;input type=\"submit\" value=\"Add Another\" id=\"addedu\"/&gt; &lt;/td&gt; \n            &lt;/tr&gt;\n        &lt;/table&gt; \n</code></pre>\n\n<p>I have editor template as below</p>\n\n<pre><code>@using staffInfoDetails.Models\n@model staffInfo.education\n\n@Html.HiddenFor(x=&gt;x.staffId)\n\n&lt;tr&gt;\n    &lt;td &gt;@Html.DropDownListFor(x =&gt; x.country, Model.countryList, \"--select--\", new { @id=\"country\"})&lt;/td&gt;\n    &lt;td&gt;@Html.TextBoxFor(x =&gt; x.board, new { @id=\"board\"})&lt;/td&gt;\n    &lt;td&gt;@Html.TextBoxFor(x =&gt; x.level, new { @id=\"level\"})&lt;/td&gt;\n    &lt;td&gt;@Html.TextBoxFor(x =&gt; x.passedYr, new { @id=\"passedYr\"})&lt;/td&gt;\n    &lt;td&gt;@Html.DropDownListFor(x =&gt; x.passedDiv, Model.passedDivList, \"--select--\", new { @id=\"division\"})&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>I am trying to pass model from controller to view and back from view to controller. While I was passing model to view, the education list passed, but, when i tried to pass model from view to controller, everything else passed except for the education list. How can I solve this problem ?</p>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-mvc-3","stream"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12615890,"title":"HttpWebResponse- Avoid save file dialog","body":"<p>I have following method to read a response from remote server</p>\n\n<pre><code>public string GetResponse()\n        {\n            string url = \"http://remoteserver.com/getdata.jsp?id=515\";\n            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);\n            HttpWebResponse response = (HttpWebResponse)request.GetResponse();\n            Stream resStream = response.GetResponseStream();\n            Encoding enc = System.Text.Encoding.GetEncoding(1252);\n            StreamReader loResponseStream = new\n            StreamReader(response.GetResponseStream(), enc);\n\n            string ServerResponse = loResponseStream.ReadToEnd();\n\n            loResponseStream.Close();\n            response.Close();\n            return ServerResponse;\n        }\n</code></pre>\n\n<p>In my <code>actionresult</code> I am calling this method as follows</p>\n\n<pre><code>public ActionResult Index()\n{\n  string resp= GetResponse();\n\n   return View();\n}\n</code></pre>\n\n<p>Now instead of showing me view browser is prompting me to save file. how to avoid that and show view as normal  </p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12659533,"title":"ASP.NET MVC 3 Client side method to show or hide a field based on the value of a related field using attributes","body":"<p>For my model I require an attribute somewhat like the following:</p>\n\n<pre><code>[Required (ErrorMessage = \"Please select yes or no\")]\npublic bool IsAlien {get; set; }\n\n[ConditionalDisplayIfTrue (\"IsAlien \")]\npublic string NameOfGalaxy {get; set;}\n</code></pre>\n\n<p>And then show or hide the text box client side if IsAlien is selected.</p>\n\n<p>Is's very easy to hardwire it in jQuery/Jvascript but I would like to do this <em>properly</em> and have no idea where to start.</p>\n\n<p>By properly I mean to add custom attributes and custom JavaScript to hook up with unobtrusive JavaScript validation.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","sql-azure"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12654714,"title":"Using ASP.NET MVC 3 EF with SQL Azure","body":"<p>I am currently developing an ASP.NET MVC3 application using Entity Framework 4.1 Code First. During the development, SQL Express behaves in a sexy way for a lot of reasons : the database is automatically generated when my model changes, and I don't have much more to do except writing my model and my DataContext.</p>\n\n<p>The application is going to be quite big, and I am giving up with the idea of working with MySQL. It will be hosted in my own server, and I would like to work with SQL Azure. Do you think it is possible? How could I configure the connexion? Would the database be automatically generated following the model if I ask to?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","url-rewriting","url-routing"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2914,"score":2,"question_id":6118840,"title":"MVC3 and Rewrites","body":"<p>I'm writing an MVC3 application that will need to make use of URL rewriting in the form of http://[server]/[City]-[State]/[some term]/ .</p>\n\n<p>As I understand it, MVC3 contains a routing engine that uses {controler}/{action}/{id} which is defined in the Global.asax file:</p>\n\n<pre><code>    public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n        routes.MapRoute(\n            \"Default\", // Route name\n            \"{controller}/{action}/{id}\", // URL with parameters\n            new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n        );\n\n    }\n</code></pre>\n\n<p>Traditionally (in a non-MVC app), I would use some URL rewriting flavor to decode a url such as <a href=\"http://www.myserver.com/City-State/somesearch/\" rel=\"nofollow\">http://www.myserver.com/City-State/somesearch/</a> to querystring parameters that look something like this:\n<a href=\"http://www.myserver.com/city=City&amp;state=State&amp;query=somesearch\" rel=\"nofollow\">http://www.myserver.com/city=City&amp;state=State&amp;query=somesearch</a> </p>\n\n<p>Keep in mind that this request would be coming from <a href=\"http://www.myserver.com/Home\" rel=\"nofollow\">http://www.myserver.com/Home</a></p>\n\n<p>Can this can be accomplished without having to specify a controller... something like this:</p>\n\n<pre><code>routes.MapRoute(\n            \"Results\",\n            \"{city}-{state}/{searchTerm}\",\n            new { controller = \"Results\", action = \"Search\" }\n        );\n</code></pre>\n\n<p>... or is it really best to have the controller listed?</p>\n\n<p>How do you handle this in an MVC3 environment?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":12660343,"title":"I need easy way to make depended DropDownLists","body":"<p>I have a dropdownlist of car brands:</p>\n\n<pre><code>@Html.DropDownListFor(\n           model =&gt; model.Brand, \n       new SelectList(\n              new List&lt;Object&gt;{ \n                   new { value = \"Opel\" , text = \"Opel\" },\n                   new { value = \"Lada\" , text = \"Lada\" },\n                   new { value = \"BMW\" , text = \"BMW\"}\n                },\n\n              \"value\",\n              \"text\"\n</code></pre>\n\n<p>As you can see, i was too lazy for making any classes, and thies code at the View.</p>\n\n<p>How can i make a second dropdownlist: with car models ? I mean that user selects \"Opel\" and then can select \"Corsa\" or \"Vectra\" but not \"X6\" or \"2110\" ?</p>\n\n<p>Looking for the most simple way to do it. </p>\n"},{"tags":["asp.net-mvc-3","razor","html-helper"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12659569,"title":"MVC 3 Razor view BeginForm form post not working","body":"<p>When cliking the button form post is not working. Guys any idead ?</p>\n\n<p><strong>Razor VIew</strong></p>\n\n<pre><code>&lt;div id=\"contactform\"&gt;\n    &lt;h3&gt;\n        Contact Form&lt;/h3&gt;\n    @using (Html.BeginForm(\"contacts\", \"Home\"))\n    {\n        @Html.AntiForgeryToken()\n        @Html.ValidationSummary()\n\n\n        &lt;fieldset&gt;\n            &lt;ol&gt;\n                &lt;li&gt;\n                    @Html.TextBoxFor(m =&gt; m.Name)\n                    @Html.ValidationMessageFor(m =&gt; m.Name)\n                &lt;/li&gt;\n                &lt;li&gt;\n                    @Html.TextBoxFor(m =&gt; m.Email)\n                    @Html.ValidationMessageFor(m =&gt; m.Email)\n                &lt;/li&gt;\n                &lt;li&gt;\n\n                    @Html.TextBoxFor(m =&gt; m.Phone)\n                    @Html.ValidationMessageFor(m =&gt; m.Phone)\n                &lt;/li&gt;\n                &lt;li&gt;\n\n                    @Html.TextAreaFor(m =&gt; m.Message)\n                    @Html.ValidationMessageFor(m =&gt; m.Message)\n                &lt;/li&gt;\n            &lt;/ol&gt;\n            &lt;input type=\"button\" value=\"contacts\"/&gt;\n        &lt;/fieldset&gt;\n\n    }\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>Model</strong></p>\n\n<pre><code>public class ContactModel\n{\n    [Required]\n    [DataType(DataType.Text)]\n    [Display (Name=\"Name\")]  \n    public string Name { get; set; }\n\n    [Required]\n    [DataType(DataType.EmailAddress)]\n    [Display (Name=\"Email\")]\n    public string Email { get; set; }\n\n    [Required]        \n    [Display (Name=\"Phone\")]\n    public string Phone { get; set; }\n\n    [Required]\n    [DataType(DataType.MultilineText)]\n    [Display(Name = \"Message\")]   \n    public string Message { get; set; }\n\n\n}\n</code></pre>\n\n<p><strong>Home Controller</strong></p>\n\n<pre><code>[HttpPost]\n[ValidateAntiForgeryToken]\npublic ActionResult contacts(ContactModel contact)\n{\n    if (ModelState.IsValid)\n    {\n\n    }\n\n\n    return View();\n}\n</code></pre>\n"},{"tags":["jquery","ajax","asp.net-mvc-3","sql-server-2008"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12211739,"title":"Remove element (both from client and server ) that I just added with Ajax - MVC3","body":"<p>I have a view where I add some elements to a table from Database; let's call the table Students. On the view I also have the option to assign to the student I am adding to the table some books . I have done this with Ajax. </p>\n\n<p>Demo:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>    Name of Student: ...\n    Books : &lt;here is a drop down&gt; ( from database)    &lt; here is a button&gt; (add button)\n\n    &lt;ul&gt;\n   When I click the button here I append some books. I also retain on Session the id of every book ( in a list and when I click submit I send that list to the server )\n    &lt;/ul&gt;\n[Submit button]\n</code></pre>\n\n<p>The problem is that I want to add a delete buton too like this :</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>    Name of Student: ...\n\n    Books : &lt;here is a drop down&gt;     &lt; here is a button&gt; \n\n    &lt;ul&gt;\n    Book1  delete\n    Book2  delete\n    &lt;/ul&gt;\n[Submit button]\n</code></pre>\n\n<p>And when I click the delete button to remove that element from the list and from the Session. </p>\n\n<p>Here is my code:</p>\n\n<ul>\n<li><p>Script from the View</p>\n\n<pre><code>$(function () {\n\n    $(\"#add\").click(function () {\n\n        //items.push($(\"#category\").val());\n        $.ajax({\n            url: '@Url.Action(\"AddCategory\")',\n            type: \"POST\",\n            dataType: \"JSON\",\n            data: { id: $(\"#categoryId option:selected\").val() },\n            beforeSend: function () { },\n            success: function (data) {\n\n                $(\"#toFill\").append(\"&lt;li&gt;\" + $(\"#categoryId option:selected\").text() + \" \" + \"&lt;span style='cursor:pointer;' id='a'&gt;\" + \"[X]\" + \"&lt;/span&gt;\" + \" \" + \"&lt;/li&gt;\");\n            },\n            error: function () { alert(\"error\") }\n\n        })\n        $(\"#toFill #a\").click(function () {\n\n            $.ajax({\n                url: '@Url.Action(\"DeleteCat\")',\n                type: \"POST\",\n                dataType: \"JSON\",\n                data: { id: $(\"#categoryId option:selected\").val() },\n                beforeSend: function () { },\n                succes: function (data) {\n                    // $(\"li\").remove();\n                    alert(\"lala\"); return false;\n                },\n                error: function () { alert(\"error at delete\") }\n\n\n\n            })\n\n        });\n    })\n</code></pre></li>\n<li><p><code>AddCategory</code> and <code>DeleteCat</code> from Controller:</p>\n\n<pre><code>public ActionResult AddCategory(int id)\n{\n    Session.Category.Add(id);\n    return Json(id, JsonRequestBehavior.AllowGet);\n}\n\npublic ActionResult DeleteCat(int id)\n{\n    Session.Category.Remove(id);\n    return Json(id, JsonRequestBehavior.AllowGet);\n}\n</code></pre></li>\n</ul>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4","gzip"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12656943,"title":"Error while adding new item to DbSet \"The magic number in GZip header is not correct\"","body":"<p>I'm just posting form and saving to db.<br />\nI don't know what im doing wrong but when i try to add item to DbSet collection its throwing error.<br/></p>\n\n<blockquote>\n  <p>The magic number in GZip header is not correct. Make sure you are\n  passing in a GZip stream.</p>\n</blockquote>\n\n<p>I'm using ASP.Net MVC v4.0</p>\n\n<pre><code>    [HttpPost]\n    [ValidateAntiForgeryToken]\n    public ActionResult Contact(ContactForm contactForm)\n    {\n        if (ModelState.IsValid)\n        {\n            try\n            {\n                //Exception line\n                db.ContactForms.Add(contactForm);\n                //Exception line end\n                db.SaveChanges();\n                ViewBag.IsFormSent = true;\n            }\n            catch (Exception ex)\n            {\n                ViewBag.IsFormSent = false;\n                ViewBag.Message = ex.Message;\n            }\n        }\n        return View();\n    }\n</code></pre>\n\n<p>The only thing that my project has about GZip is in web.Config file and removing it doesn't helped.</p>\n\n<pre><code>&lt;!-- GZip static file content.  Overrides the server default which only compresses static files over 2700 bytes --&gt;\n&lt;httpCompression directory=\"%SystemDrive%\\websites\\_compressed\" minFileSizeForComp=\"1024\"&gt;\n    &lt;scheme name=\"gzip\" dll=\"%Windir%\\system32\\inetsrv\\gzip.dll\" /&gt;\n    &lt;staticTypes&gt;\n        &lt;add mimeType=\"text/*\" enabled=\"true\" /&gt;\n        &lt;add mimeType=\"message/*\" enabled=\"true\" /&gt;\n        &lt;add mimeType=\"application/javascript\" enabled=\"true\" /&gt;\n        &lt;add mimeType=\"application/json\" enabled=\"true\" /&gt;\n        &lt;add mimeType=\"*/*\" enabled=\"false\" /&gt;\n    &lt;/staticTypes&gt;\n&lt;/httpCompression&gt;\n</code></pre>\n"},{"tags":["c#","asp.net",".net","sql-server","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":159,"score":3,"question_id":12173803,"title":"How to re-use SqlCommand object for a CommandText after executing a query based on stored procedure in C#?","body":"<p>I have a sample code</p>\n\n<pre><code>aCommand.CommandType = CommandType.StoredProcedure;\naCommand.Parameters.AddWithValue(\"@book_id\", bookID);\naCommand.Parameters.AddWithValue(\"@user_id\", userID);\n</code></pre>\n\n<p>and after that I want to execute a simple query using <code>CommandText</code>:</p>\n\n<pre><code>aCommand.CommandText = \"SELECT * FROM aTABLE\";\naCommand.ExecuteNonQuery();\n</code></pre>\n\n<p>but the error occurs:</p>\n\n<blockquote>\n  <p>Exception: Could not find stored procedure 'SELECT * FROM aTABLE'</p>\n</blockquote>\n\n<p>In this case, I have to create a new instance of <code>SqlCommand</code> object ?</p>\n\n<p>It is a way to use same <code>SqlCommand</code> object to avoid create one ?</p>\n"},{"tags":["asp.net-mvc-3","dotnetopenauth","nerddinner"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":108,"score":0,"question_id":12646187,"title":"DotNetOpenAuth 4.0 and HTTPRequestInfo, NerdDinner 2.0","body":"<p>I'm using NerdDinner 2.0 as a base for learning DotNetOpenAuth. Great project BTW. I have it working using a DotNetOpenAuth DLL built on runtime version v2.0.50727 (came with the project). I would like to upgrade to a DotNetOpenAuth DLL built on runtime version v4.0.20926 but I get the following compile time error in the AuthController.cs file...</p>\n\n<pre><code>HttpRequestInfo clientResponseInfo = new HttpRequestInfo(\"GET\", auth, auth.PathAndQuery, headers, null);\n</code></pre>\n\n<p>Exception:</p>\n\n<blockquote>\n  <p>DotNetOpenAuth.Messaging.HttpRequestInfo does not contain a constructor that takes 5 arguments.</p>\n</blockquote>\n\n<p>Obviously I do not know what the code equivalent is in v4.0.20926.\nAny help is greatly appreciated.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","asp.net-mvc-4","upgrade"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":224,"score":0,"question_id":12655808,"title":"Asp.Net MVC3 to MVC4 Upgrade Tool?","body":"<p>I'm aware of manual guides to upgrade from 3 to 4 like this one:\n<a href=\"http://www.dotnetexpertguide.com/2011/12/upgrade-aspnet-mvc-3-project-to-mvc-4.html\" rel=\"nofollow\">http://www.dotnetexpertguide.com/2011/12/upgrade-aspnet-mvc-3-project-to-mvc-4.html</a></p>\n\n<p>The guides vary in their details which clearly signals danger. Is there a tool that handles the transition from an MVC3 project to MVC4? This would implicitly mean migrating from .Net 4 to .Net 4.5, which does have some significant implications in terms of all the namespace redirects Microsoft added between the 2 versions.</p>\n\n<p>I'm also aware of manual guides that basically say to give up on upgrading and instead just create a new project and port things over piece by piece into the new project. This has a lot of obvious opportunities for small mistakes to create big problems.</p>\n\n<p>So, a tool that's been tested I can count on to not make a silly mistake like I might would really help here. Does that exist? There's a tool to get from MVC2 to 3, so not finding one for 3 to 4 surprised me.</p>\n\n<p>Background for why I'd like to upgrade: we have several newer projects on .Net 4.5 MVC4, and an important older project on .Net 4 MVC3 (with some .Net 2 and MVC 2 mixed in...), and the more our shared libraries move forward the more that old project struggles. We can freeze the last working on the shared libraries obviously, or fork them and maintain 2 versions... obviously neither of these is very appealing. I'd prefer to just update the toolset on the older project and bring everything into parity.</p>\n"},{"tags":["asp.net-mvc-3","razor","html-helper"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":493,"score":1,"question_id":9087792,"title":"MVC 3 Razor, Helpers with custom markup/section","body":"<p>I'm not even sure if this is possible, but I thought I would check to see if there is any way to make this easier.</p>\n\n<p>First, I have some repeated markup in my site that looks like this:</p>\n\n<pre><code>&lt;div class=\"module\"&gt;\n    &lt;h3&gt;Title&lt;/h3&gt;\n    &lt;div&gt;\n        &lt;p&gt;Information goes here&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>What I want to do is wrap this up in some kind of helper/section so that I could do something like this</p>\n\n<pre><code>@MyHelper(\"This is my Title\") {\n    &lt;p&gt;Here is my custom markup&lt;/p&gt;\n}\n</code></pre>\n\n<p>Then, when it renders, it would inject the title passed in through the parameter between the <code>&lt;h3&gt;&lt;/h3&gt;</code> and the custom markup in the divs.  The custom markup could be anything from test, to form controls, to a partial view.  Is this something that is possible?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc-3","javascript-events"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12654161,"title":"Custom search dropdown div results from Child Action","body":"<p>I am having an issue with created a custom DIV that appears when a user types in the search box and otherwise disappears if there is no text in the search box.  I would like the div to contain an image of the searched for item if there is one as well as a title and some other basic info on the item.  I was hoping to populate this info with a ChildAction but have had no luck so far.  Could anyone help me?  Thanks in advance!</p>\n\n<p>View Code So Far:</p>\n\n<pre><code>       &lt;div id=\"search\" role=\"search\"&gt;      \n            @using (Html.BeginForm(\"AdvancedSearch\", \"Search\", FormMethod.Get, new { id = \"SearchForm\" }))\n            { \n                &lt;input id=\"searchText\" name=\"searchText\" placeholder=\"Search the database…\" type=\"text\" autocomplete=\"on\" /&gt;\n                &lt;div id=\"search-results\" style=\"display:none\"&gt;\n                @*This is where I am having trouble getting the value for search Text*@\n                @Html.Action(\"AutocompleteSuggestions\", \"Search\", new { searchText = SearchForm.find('input[name=\"textboxList\"]').val());}\n                &lt;hr /&gt;\n                &lt;a id=\"results-all\" onclick='javascript:getAdvancedSearchUrl();'&gt;\n                   SEE ALL RESULTS\n                &lt;/a&gt;\n                &lt;script type=\"text/javascript\"&gt;\n                    function getAdvancedSearchUrl() {\n                        var searchTextValue = document.getElementById('searchText').value;\n                        var url = '@Url.Action(\"AdvancedSearch\", \"Search\")?searchText=' + searchTextValue;\n                        $.post(url);\n                    }\n                &lt;/script&gt;\n                &lt;/div&gt; \n                &lt;input type=\"hidden\" value=\"Search\"  /&gt;\n            }\n\n            &lt;div style=\"clear:both\"&gt;&lt;/div&gt; \n        &lt;/div&gt;          \n</code></pre>\n"},{"tags":["visual-studio-2010","asp.net-mvc-3","razor","intellisense"],"answer_count":12,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":7924,"score":9,"question_id":6133090,"title":"Razor Intellisense Not Working VS2010 SP1Rel MVC3 from WPI Win7 x64","body":"<p>I have Visual Studio 2010 /SP1 / MVC 3 (With April Tools Update) installed on a machine with a fresh install of Windows 7 64-bit Professional. </p>\n\n<p>I do not have resharper installed.\nI never installed an RC or Beta of anything on this new OS Install. </p>\n\n<p>My install steps were as follows:</p>\n\n<ol>\n<li>Install Visual Studio Professional. </li>\n<li>Install Web Platform Installer.</li>\n<li>Install Visual Studio SP1 from WPI.</li>\n<li>Install Microsoft ASP.net MVC 3 (with April Tools Update)</li>\n<li>Install Productivity Power Tools</li>\n</ol>\n\n<p>Help > About Microsoft Visual Studio shows: </p>\n\n<p>Microsoft Visual Studio 2010\nVersion <strong>10.0.40219.1 SP1Rel</strong></p>\n\n<p>Microsoft .NET Framework\nVersion <strong>4.0.30319 SP1Rel</strong></p>\n\n<p>System.Web.Mvc.dll file version shows: <strong>3.0.20105.0</strong></p>\n\n<p>Once installed I did the following:</p>\n\n<ol>\n<li>Open Visual Studio.</li>\n<li>File > New Project</li>\n<li>Choose \"ASP.Net MVC 3 Web Application\".</li>\n<li>On the \"New ASP.NET MVC 3 Project\" dialog. I chose \"Internet Application\", \"Razor\" View Engine. Hit OK.</li>\n</ol>\n\n<p>Within the project here is the behavior:</p>\n\n<ol>\n<li>Open any cshtml file and Razor @blocks are not highlighted.</li>\n<li>Intellisense gives html snippets as options in and outside of razor blocks but does not recognize Html helpers or models etc within them.</li>\n<li>The project builds.</li>\n<li>You can run the project and everything works when built. Razor views are rendered normally.</li>\n</ol>\n\n<p>Does anyone know a definitive set of prerequisites to have Razor Intellisense working? Something I can diff between the other Win7 64-bit machines that have Razor Intellisense working and the 2 that have this issue? Registry entries? Are there any Visual Studio logs that can help debug this? After hours of frustration and reading every Razor Intellisense post and question I have run across without coming up with anything that works I am just hoping for some new thoughts on what to troubleshoot/try next.</p>\n\n<p>Thanks for any help on this.</p>\n"},{"tags":["asp.net-mvc-3","entity-framework-4","ef-code-first","dbset"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":118,"score":1,"question_id":12649783,"title":"C#, MVC3, How to use the non-generic DBSet with a runtime defined type?","body":"<p>I'm new to MVC and the EF. My app is a simple code-first with several POCO classes and a DBContext like this:</p>\n\n<pre><code>   public class ExpDefContext : DbContext\n   {\n      public DbSet&lt;Experiment&gt; Experiments { get; set; }\n      public DbSet&lt;Research&gt; Researches { get; set; }\n      ...\n</code></pre>\n\n<p>The problem: I need to add to my data model an entity-set that its type is built at runtime from user input, meaning I have no idea of its data structure. </p>\n\n<p>I read the non-generic Dbset class is made just for this, so I added to the context:</p>\n\n<pre><code>    public DbSet Log { get; set; }\n</code></pre>\n\n<p>...and created a constructor for the context that accepts the runtime-type and sets the new Dbset:</p>\n\n<pre><code>        public ExpDefContext(Type LogRecType)\n        {\n            Log = Set(LogRecType);\n        }\n</code></pre>\n\n<p>(the type by the way is built using Reflection.Emit).</p>\n\n<p>In the controller I create the type (named LogRec) and pass it to a new DBContext instance. Then I create a LogRec instance and try to Add it to the database:</p>\n\n<pre><code>    Type LogRec;\n    LogRec = LogTypeBuilder.Build(dbExpDef, _experimentID);\n    var dbLog = new ExpDefContext(LogRec);\n    var testRec = LogRec.GetConstructor(Type.EmptyTypes).Invoke(Type.EmptyTypes);\n    dbLog.Log.Add(testRec);\n    dbLog.SaveChanges();\n</code></pre>\n\n<p>and I get an exception from the dbLog.Log.Add(testRec): </p>\n\n<p><strong>The entity type LogRec is not part of the model for the current context</strong></p>\n\n<p>What am I doing wrong? \nIs there a better way to do this (preferably without diving too deep into the Entity Framework)?</p>\n\n<p>Thanks </p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","mvcmailer"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12653431,"title":"Pass a model to an MVCMailer view","body":"<p>I have a controller, which passes a model (ovw.ToList()) to a view:</p>\n\n<pre><code>    //\n    // GET: /Clinic/Overview/\n    public ActionResult Overview()\n    {\n        IEnumerable&lt;Clinic&gt; ovw = from c in db.Clinics\n                                  select c;\n        return View(ovw.ToList());\n    }\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>@model IEnumerable&lt;ttp.Models.Clinic&gt;\n\n@foreach (var item in Model)\n{        \n&lt;div&gt;@item.ClinicName&lt;/div&gt;\n\n   @foreach (var item2 in item.Properties)\n         {\n         &lt;div&gt;@item2.Address&lt;/div&gt;\n</code></pre>\n\n<p>This works absolutely fine on screen.</p>\n\n<p>When using MVCMailer, however , if I want to display the same layout in the email, how do I pass the ovw.ToList() to the mailer view, so that I can reference the same model in this way:</p>\n\n<p>(I'm stuck on what to put in as the first line in the view):</p>\n\n<pre><code>@model IEnumerable&lt;ttp.Models.Clinic&gt;\n@foreach (var item in Model)\n</code></pre>\n\n<p>Thanks for any help,</p>\n\n<p>Mark</p>\n"},{"tags":["asp.net-mvc-3","active-directory"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12653223,"title":"All Active Directory accounts locked for 7-8 minute (then automatically resume) after one account login failure?","body":"<p>We are using windows authentication/Active Directory for our asp.net MVC application.</p>\n\n<p>Application runs perfectly fine on production server, but here we encountered an strange behavior, please help:</p>\n\n<ol>\n<li><p>When one user logs in using their credentials, then this error occurs:</p>\n\n<blockquote>\n  <p><em>Logon failure: unknown user name or bad password.</em></p>\n</blockquote></li>\n<li><p>We assume that either bad credential or password has expired, etc</p></li>\n<li><p>We are fine if this happens ONLY one user, but after one bad credential all users in Active Directory are blocked.</p></li>\n<li><p>No one is able to login for 7-8 minutes, after that all users are able to login again</p></li>\n</ol>\n\n<p>Can anyone tell me why all users are unable to log into the system and everyone is getting the same error?</p>\n\n<pre><code>string strName;\nstrName = Request.ServerVariables[\"AUTH_USER\"];\nstring[] UserDetail = strName.Split('\\\\');\nstring Str = \"LDAP://\" + domainname;\nDirectoryEntry entry = new DirectoryEntry(Str);\nDirectorySearcher Dsearch = new DirectorySearcher(entry);\nDsearch.Filter = \"(sAMAccountName=\" + username + \")\";\nSearchResult sresult = Dsearch.FindOne();\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","wizard"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":146,"score":0,"question_id":12250665,"title":"How can I hide query string parameters using the Post, Redirect, Get pattern?","body":"<p>I have a multi-step data entry form in my ASP.NET MVC application.</p>\n\n<p>When the information is posted, the input values are checked and if I determine that some related data is required (e.g. a purchase order references a supplier that does not exist) I redirect to another action so that the user can enter the extra data.</p>\n\n<p>I do not want the values that have already been entered by the user to be lost between pages so I am passing these to the second action method using a viewModel. The data is contained in hidden inputs on the second page so that the user can not see them.</p>\n\n<p>This works fine except I end up with a URL that looks something like this:</p>\n\n<blockquote>\n  <p>myDomain/RFQ/CreatePart?PartNumber=Skateboard&amp;Supplier=Bobs%20skateboards&amp;DateCreated=08%2F28%2F2012%2000%3A00%3A00&amp;DateRequired=08%2F28%2F2012%2000%3A00%3A00&amp;Quantities=1%2C%203%20%26%205%20off</p>\n</blockquote>\n\n<p>I have tried simply returning a view instead of redirecting which gives me the URL Like this:</p>\n\n<blockquote>\n  <p>myDomain/RFQ/CreatePart</p>\n</blockquote>\n\n<p>However, this gives me the problem of the user being able to repost the values by refreshing the browser as I am now no longer following the post, redirect, Get pattern.</p>\n\n<p>Is there a way of properly using the <em>Post-Redirect-Get</em> pattern whilst maintaining the cleaner URL?</p>\n\n<hr>\n\n<p><strong>Update 29th September 2012</strong></p>\n\n<p>I investigated the options listed below and have decided on using <code>SessionState</code> for the time being as this allows me to store intermediate data until the user has finished their transaction whilst allowing me to use the <em>post-redirect-get</em> pattern with a clean URL.</p>\n\n<p>I was actually aware of <code>SessionState</code> prior to asking this question but unfortunately some of the information I had read about it had led me to believe this was not the best solution (most articles cite poor performance but rarely provide any evidence of this or explain why).</p>\n\n<p>Having read <a href=\"http://www.codeproject.com/Articles/32545/Exploring-Session-in-ASP-Net\" rel=\"nofollow\">this</a> article I now understand <code>SessionState</code> a lot better.</p>\n"},{"tags":["asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12649515,"title":"Aliasing ID parameter in URL as string in ASP.NET MVC 4","body":"<p>What i'm trying to do is to rewrite URLs to make them more SEO friendly but i still want to pass a parameter as an int ID.</p>\n\n<p>For example, a URL pointing to a  news article might look like this:\n\"www.domain.com/category-id/article-id\" or \"domain.com/5/3\"</p>\n\n<p>What i want to do is to rewrite the URL everywhere so that the title of the category and the title of the article are written into the URL so it becomes f.x. \"domain.com/politics/some-title\" but i still want to pass the ID of the article as an argument to the controller action. This is less important for the category but it's something i want to do with the article-id since it's unique but the title might not be.</p>\n\n<p>I have checked out Attribute Routing and looked through some Routing guides and questions but haven't found anything that lets me implement this functionality. I've just started using ASP.NET MVC so i haven't been able to look into anything too advanced.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["javascript","asp.net-mvc-3","web-applications","c#-3.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12628991,"title":"Open PLMXML file on Client Machine from ASP.Net MVC3 ","body":"<p>I have a web application on C#.Net MVC3 platform. </p>\n\n<p>I am playing with a third party file type, which is essentially in XML markup, but the file extension differs. I am receiving the file as a Java web service and able to save it on my machine and then opening it using <code>System.Diagnostics.Process.Start(path)</code> where <code>path</code> is the local m/c path for the saved file (received through the Web Service). The file automatically opens in the third party app as the app recognizes the file type (I am not specifying the app in the Start.Process()).</p>\n\n<p>I come from the Windows Application background and having trouble implementing it on Client/Server model. (The Third Party app will be installed on the Client M/C.)</p>\n\n<p>I have to deploy the app on the web server where this approach will not work.</p>\n"},{"tags":["php","asp.net-mvc-3","iis7"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12651520,"title":"PHP and MVC 3 in single IIS","body":"<p>Can we run php and MVC 3 application under single IIS 7. I have installed PHP in the IIS using PHP Manager. I also want to run asp.net MVC 3 application in same IIS Server. Is it possible to run both php and asp.net MVC   3 application under same wwwroot folder.</p>\n"},{"tags":["asp.net-mvc-3","entity-framework-4.1","sql-azure"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12623976,"title":"What is the best practice for RetryPolicy mechanism for SQL Azure Enity framework?","body":"<p>I'm using <strong>TransientFaultHandling.RetryPolicy</strong>. I would like to know the Retry policy is enough for only connecting the Entity framework. Once the entities are connected I will be using entities in multiple places. In between connection is lost will the Retry policy   take care of the connection?\nAnybody knows this? </p>\n\n<h1>Connection class</h1>\n\n<pre><code>\n    static class Azure\n    {\n    static RetryPolicy policy = new RetryPolicy  (5,TimeSpan.FromSeconds(2),  TimeSpan.FromSeconds(2));\n\n    public static CrmEfEntities ConnectCustomerEntity()\n    {\n    CrmEfEntities customerEntity = null;\n            policy.ExecuteAction(() =>\n               { \n                   customerEntity = new Entities(ConnectionStringCustomerDB());\n                   string federationCmdText = @\"USE FEDERATION       Customer_Test_Federation(TestId =\" + testId + \") WITH RESET, FILTERING=ON\";\n                   customerEntity.Connection.Open();\n                   customerEntity.ExecuteStoreCommand(federationCmdText);                  \n               });  \n    return customerEntity;\n    }\n    }\n </code></pre>\n\n<p>The above method I am calling in the controller here</p>\n\n<pre><code>\n    public class EmployeeController : Controller\n    {      \n    private static readonly CrmEfEntities _db = Azure.ConnectCustomerEntity();\n\n    public ActionResult Index()\n    {            \n    var employeeList = GetEmployeeDetails().ToList();            \n    return View(employeeList);\n    }\n\n    private static IEnumerable GetEmployeeDetails()\n    {\n    var employee= from emp in _db.Employees\n    from coun in _db.Countries\n    where emp.CountryId == coun.Id\n    select new CompanyDetailsModel\n    {\n    Id = emp.Id,   \n    Name = emp.Name,                                           \n    countryName=coun.Name\n    };\n    return employee;\n    }\n    }\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc-3","jquery-ajax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12652252,"title":"set value of dropdown based on textbox in asp.net mvc3","body":"<p>i want to set the value for dropdownlist based on the entered textbox value for that i have the below code</p>\n\n<p>below is my view</p>\n\n<pre><code>&lt;%:Html.DropDownListFor(m=&gt;m.FatherId,Model.father,new{id=\"drpFatherId\",disabled=\"true\"})%&gt;\n\n&lt;%:Html.TextBoxFor(m =&gt; m.FatherName, new { id = \"txtfatherName\"})%&gt;&lt;br /&gt;                    \n\n&lt;span style=\"color:Red;\" id=\"Error\"&gt;&lt;/span&gt;\n</code></pre>\n\n<p>below is JQuery code</p>\n\n<pre><code>    $(\"input#txtfatherName\").change(function () {\n        //alert(\"message\");\n        var term = $(this).val();\n        $.ajax(\n        {\n            url: 'Home/getFatherId',\n            type: 'POST',\n            data: { term: term },\n            dataType: 'json',\n            Success: function (data) {\n                if (data != 0) {\n                    $(\"#drpFatherId\").val(data);\n                    document.getElementById(\"Error\").innerHTML = \"\";\n                }\n                else {\n                    $(\"#drpFatherId\").val(0);\n                    document.getElementById(\"Error\").innerHTML = \"Our System does not recognize this father name. please try again.\";\n                    $(\"#txtfatherName\").focus();\n                }\n            }\n        });\n    });\n</code></pre>\n\n<p>below goes my Controller jsonResult action which return me Id based on the name</p>\n\n<pre><code>public JsonResult getFatherId(string term)\n{\n    int fatherId = 0;\n    using (ManageMembers mngMembrs = new ManageMembers())\n    {\n        Member data = mngMembrs.getFatherID(term);\n        if (data != null)\n            fatherId = data.ID;\n    }\n    return Json(fatherId, JsonRequestBehavior.AllowGet);\n}\n</code></pre>\n\n<p>note:- The drop down list contains all the ID from the data base and it is set to disabled</p>\n\n<p>my problem is that the jQuery ajax call never goes inside the Success function\nthats y i am not able to set the value for the drop down control</p>\n\n<p>please help me...</p>\n\n<p>Thanks,\nAman Khan</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","mvcmailer"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":12651690,"title":"MVCMailer Scaffolding not working","body":"<p>I used NuGet Package Manager to install MVCMailer in VS2012 Express Web - and got a green tick, to indicate it had installed correctly.</p>\n\n<p>However, when trying to setup a template/view, using the Scaffold command, I see the following:</p>\n\n<pre><code>PM&gt; Scaffold Mailer.Razor UserMailer BookingUpdate\nInvoke-Scaffolder : A positional parameter cannot be found that\naccepts argument 'UserMailer'.\nAt line:1 char:9\n+ Scaffold &lt;&lt;&lt;&lt;  Mailer.Razor UserMailer BookingUpdate\n+ CategoryInfo          : InvalidArgument: (:) [Invoke-Scaffolder],\nParameterBindingException\n+ FullyQualifiedErrorId : PositionalParameterNotFound,\nT4Scaffolding.Cmdlets.InvokeScaffolderCmdlet\n</code></pre>\n\n<p>Any ideas where I've gone wrong?</p>\n\n<p>Thank you,</p>\n\n<p>Mark</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12650926,"title":"MVC retrieving a binary image from database downloads the image but i need to show it","body":"<p>hello guys i'm retrieving an image from database , it's stored as a binary field\nhere is the code i use</p>\n\n<pre><code>public FileContentResult GetImage(int? id)\n{\n    byte[] img=.......//get image from db\n    string imgType = \"image/jpeg\";\n    return File(img, imgType);\n}\n</code></pre>\n\n<p>but the problem is that code downloads the image , and i need to show the image not to download it,</p>\n\n<p>can anyone help me with this?</p>\n"},{"tags":["asp.net-mvc-3","iis","roles"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12617548,"title":"why doesn't load any pictures, styles or scripts of site in iss?","body":"<p>I use IIS for viewing my site. when I browse it, it shows just text, and doesn't load any pictures, styles or scripts. \nwhen I use firebuge to view css , it shows this messegae:</p>\n\n<blockquote>\n  <p>This element has no style rules. You can create a rule for it.</p>\n</blockquote>\n\n<p>what should I do?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":12651012,"title":"One of the request inputs is out of range. +windows azure","body":"<p>One of the request inputs is out of range. +windows azure</p>\n\n<p>I want to add a list of object to to database </p>\n\n<pre><code>   public void SaveBannerForCampaign(List&lt;Banner&gt; bannerList, string campaignId)\n    {\n        try\n        {\n\n            foreach (Banner banner in bannerList)\n            {\n\n                banner.CampaignId = campaignId;\n                banner.PrepareForStorage();\n                _context.AddObject(Constants.TABLE_BANNERS8, banner);\n                System.Data.Services.Client.DataServiceResponse response =      _context.SaveChanges();\n            }\n\n        }\n        catch (Exception ex) { }\n    } \n</code></pre>\n\n<p><strong>First Object added sucessfully.When code tried to enter 2 object then there is an exception</strong></p>\n\n<p><em>One of the request inputs is out of range.</em></p>\n"},{"tags":["jquery","asp.net-mvc-3","mvc","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":394,"score":1,"question_id":11125073,"title":"Display success message on Jqgrid EDIT form","body":"<p><strong>EDIT PRMS</strong><br>\n    edit: {<br>\n    addCaption: \"Add CDM\",<br>\n    bSubmit: \"Submit\",<br>\n    bCancel: \"Cancel\",<br>\n    bClose: \"Close\",<br>\n    saveData: \"Data has been changed! Save changes?\",<br>\n    bYes: \"Yes\",<br>\n    bNo: \"No\",<br>\n    bExit: \"Cancel\",<br>\n    //serializeEditData: serailize,<br>\n    //editData: {new_CDM_ID: function() { return $('#cdmID').val();} },<br>\n    closeOnEscape: true,<br>\n    recreateForm: true,<br>\n    width: '450',<br>\n    afterSubmit: function (response, postdata) {<br>\n    var result = jQuery.parseJSON(response.responseText);<br>\n    return [result.success, result.message, result.id];\n    //return [success, message, new_id]<br>\n    }<br>\n<strong>Question</strong><br>\nI'm able to capture error message in <strong>afterSubmit</strong> event and also able to display it on edit form of jqgrid. But same is not happeing for success message. I'm able to capture it but not able to display on edit form of jqgrid. Should i use a different event for displaying success message.   </p>\n\n<p>My requirement is<br>\n1)display error message in red (working)<br>\n2)display success message in green (not working)</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":12650033,"title":"How to use enherited entity in MVC controller and in index view ?","body":"<p>I am developing MVC 3 application.</p>\n\n<p>I have used in inheritance in my application.</p>\n\n<p>I have entity Called Customer and entity called 'Lead' is in inherited from customer.\n(Lead has some additional properties) and In customer entity I have one property called\n'IsLead' , If is Lead is True then that entity is Lead and if is lead is 'False' then its a customer.</p>\n\n<p>Write now, I have used Customer everywhere.</p>\n\n<p>Index view code I used Customer Entity</p>\n\n<pre><code>@model IEnumerable&lt;CRMEntities.Customer&gt;\n\n@{\n    ViewBag.Title = \"Index\";\n}\n.\n.\n.\n</code></pre>\n\n<p>and in controller, I have write the below code...</p>\n\n<pre><code> public ViewResult Index()\n        {\n\n          var customers = (from c in db.Customers\n                            where (c.IsActive == true)\n                            orderby (c.Id)\n                            select c);\n\n          return View(customers.ToList());\n\n        }\n</code></pre>\n\n<p>Now, the problem is in Index view ,If I want to show the Leads using Lead entity then how can I show ? </p>\n"},{"tags":["asp.net-mvc-3","iis8"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":192,"score":3,"question_id":12486089,"title":"IIS8 Win8 and runAllManagedModulesForAllRequests=\"true\"","body":"<p>I am attempting to run an application in IIS8 that has the following in the config:</p>\n\n<pre><code>&lt;modules runAllManagedModulesForAllRequests=\"true\" /&gt;\n</code></pre>\n\n<p>IIS8 is giving me an error that <br/>\n<code>This configuration section cannot be used at this path. This happens when the section is locked at a parent level. Locking is either by default (overrideModeDefault=\"Deny\"), or set explicitly by a location tag with overrideMode=\"Deny\" or the legacy allowOverride=\"false\".</code><br/><br/>\nI'm guessing by the error and a quick SO search that there is some higher level security setting that's preventing that line from being allowed. Any ideas?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","dotnetopenauth"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":180,"score":0,"question_id":12559245,"title":"OAuthWebSecurity.RequestAuthentication and Twitter constant authorization request","body":"<p>Every time I try to authenticate a user with twitter (who has already previously authorised the app via Twitter's authorization dialogue), I am continuously sent back to Twitter to authorize even though I can see in the Twitter account that it has already indeed added the app.</p>\n\n<p>I'm using the function <code>OAuthWebSecurity.RequestAuthentication</code></p>\n\n<p>I can't figure out why, is this the default behavior by the TwitterClient provided by Microsoft? Does anyone know what I can do to fix this?</p>\n\n<p>Here's the code:</p>\n\n<pre><code>        [HttpPost]\n        [AllowAnonymous]\n        [ValidateAntiForgeryToken]\n        public ActionResult ExternalLogin(string provider, string returnUrl)\n        {\n            return new ExternalLoginResult(provider, Url.Action(\"ExternalLoginCallback\", new { ReturnUrl = returnUrl }));\n        }\n\n        internal class ExternalLoginResult : ActionResult\n        {\n            public ExternalLoginResult(string provider, string returnUrl)\n            {\n                Provider = provider;\n                ReturnUrl = returnUrl;\n            }\n\n            public string Provider { get; private set; }\n            public string ReturnUrl { get; private set; }\n\n            public override void ExecuteResult(ControllerContext context)\n            {\n                OAuthWebSecurity.RequestAuthentication(Provider, ReturnUrl);\n            }\n        }\n\n        [AllowAnonymous]\n        public ActionResult ExternalLoginCallback(string returnUrl)\n        {\n             // Other stuff to do once twitter authorises. Before I get returned here, I always end up at the Twitter authorization dialogue.\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc-3","object"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12648941,"title":"mvc 3 return view with other objects","body":"<p>I have a details page that returns a <strong>profile</strong> view that is basically used to find the page number from the database. I also have a separate query that I would like to return in the <strong>return view</strong> but cannot figure out how to. The code I have is </p>\n\n<pre><code>public ActionResult detail(int id)\n    {\n        profile profile = db.profiles.Find(id);\n        var currentpage = (from s in db.profiles where id == s.profileID select s.registrationID).FirstOrDefault();\n        var articles = (from s in db.Articles where currentpage == s.RegistrationID select s.title).FirstOrDefault();\n        ViewBag.articles = articles;\n\n\n        ViewBag.noprofiler = \" This profile currently doesn't have the email profiler selected\";\n\n\n\n\n        return View(profile);\n    }\n</code></pre>\n\n<p>i would like to also return <strong>articles</strong> i put it into a <strong>viewbag</strong> but that is not working any ideas ?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","entity-framework","entity-framework-5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12648340,"title":"MVC3 Scaffolding will not generate dropdowns in views where foreign keys exist","body":"<p>This is driving me crazy, and I have studied the related posts on StackOverflow.</p>\n\n<p>Basically I have 2 tables, Album and Genre with the former having a foreign key to Genre. I have modelled this using Model First in EF5, and generated the context and class files using MS's T4 generator. Thus my Domains Class code is:</p>\n\n<pre><code>{\nusing System;\nusing System.Collections.Generic;\n\npublic partial class Album\n{\n    public int Id { get; set; }\n    public string Title { get; set; }\n    public decimal Price { get; set; }\n    public string AlbumArtUrl { get; set; }\n\n    public int GenreId {get; set;}\n    public virtual Genre Genre { get; set; }\n}\n}\n</code></pre>\n\n<p>You will notice that I have added :</p>\n\n<pre><code>public int GenreId {get; set;}\n</code></pre>\n\n<p>as per guidance inorder to enable the scaffolding to create the dropdowns in the Views and \"SelectList\" code in the controller. But it does not! However it does create, in the view:</p>\n\n<pre><code>     &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.GenreId)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.GenreId)\n        @Html.ValidationMessageFor(model =&gt; model.GenreId)\n    &lt;/div&gt;\n</code></pre>\n\n<p>So I am really puzzled. Any ideas would be greatly appreciated.</p>\n\n<p>Thanks,</p>\n\n<p>Ed</p>\n\n<p>P.S. I am running VS2010 SP1 with ASP.NET MVC 3 Tools Update it seems, since I tried to install it and it said that it was already installed.</p>\n"},{"tags":["jquery","asp.net-mvc-3","list","drop-down-menu","cascading"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":297,"score":1,"question_id":12648707,"title":"asp.net/MVC 3/razor/jquery/cascading dropdown list not working","body":"<p>I'm new to stackoverflow as well as to jquery/javascript.  I've been searching all day for different ways to add cascading drop down lists to my current project and have yet to find a way that has worked for me.  Most of my finding have been from out of date and based upon MVC 2 to webforms to older technologies.  I did find a few tutorials and posts based upon MVC 3/4 that have helped but I'm still about to chunk my mouse at my computer screen.</p>\n\n<p>Some links that I've looked at for help are:\n<a href=\"http://weblogs.asp.net/raduenuca/archive/2011/03/06/asp-net-mvc-cascading-dropdown-lists-tutorial-part-1-defining-the-problem-and-the-context.aspx\" rel=\"nofollow\">Radu Enuca's Tutorial on cascading dropdown lists</a>\nand\n<a href=\"http://code.msdn.microsoft.com/Cascading-DropDownList-in-833683f9\" rel=\"nofollow\">Rick_Anderson's Tutorial</a></p>\n\n<p>Some background on the project:</p>\n\n<p>I'm creating a work ticket system for employees to submit their daily time to the office.  I have a controller, view, and jquery script listed below.</p>\n\n<p>Controller</p>\n\n<pre><code>public class WorkTicketController : Controller\n{\n    private Context db = new Context();\n\n    public ActionResult GetClientReps(int id)\n    {\n        var Reps = from c in db.ClientReps\n                   where c.ClientID == id\n                   select c;\n\n        List&lt;SelectListItem&gt; clientReps = new List&lt;SelectListItem&gt;();\n\n        foreach (var item in Reps)\n        {\n            string clientRepId = item.ClientRepID.ToString();\n\n            string clientRepName = item.FirstName + \" \" + item.LastName;\n\n            clientReps.Add(new SelectListItem(){ Value = clientRepId, Text = clientRepName });\n        }\n\n        var List = new SelectList(clientReps, \"Value\", \"Text\");\n\n        return Json(List, JsonRequestBehavior.AllowGet);\n    }\n\n    public ActionResult Create()\n    {\n        ViewBag.Clients = GetGlobalItems.ClientList();\n        ViewBag.Supervisors = GetGlobalItems.UserListByRole(\"Supervisor\");\n\n        return View();\n    }\n\n    protected override void Dispose(bool disposing)\n    {\n        db.Dispose();\n        base.Dispose(disposing);\n    }\n}\n}\n</code></pre>\n\n<p>View</p>\n\n<pre><code>@model NewbyPortal.Models.WorkTicket\n\n@{\nViewBag.Title = \"Create\";\n}\n&lt;article&gt;\n&lt;div class=\"linearBg1\"&gt;Create Daily Work Ticket&lt;/div&gt;\n&lt;br /&gt;\n\n@using (Html.BeginForm()) {\n    @Html.ValidationSummary(true)\n    &lt;div class=\"linearBg1\"&gt;\n        General Information\n    &lt;/div&gt;\n    &lt;div class=\"section-span-body\"&gt;\n        &lt;table&gt;\n            &lt;tr class=\"empTableRowBody2\"&gt;\n                &lt;th class=\"empTableRowBody2\"&gt;\n                    @Html.LabelFor(Model =&gt; Model.DateWorked) *\n                &lt;/th&gt;\n                &lt;th class=\"empTableRowBody2\"&gt;\n                    @Html.LabelFor(Model =&gt; Model.PayKey)\n                &lt;/th&gt;\n                &lt;th class=\"empTableRowBody2\"&gt;\n                    @Html.LabelFor(Model =&gt; Model.PONumber)\n                &lt;/th&gt;\n                &lt;th class=\"empTableRowBody2\"&gt;\n                    @Html.LabelFor(Model =&gt; Model.WONumber) *\n                &lt;/th&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;\n                    @Html.EditorFor(Model =&gt; Model.DateWorked)\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.EditorFor(Model =&gt; Model.PayKey)\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.EditorFor(Model =&gt; Model.PONumber)\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.EditorFor(Model =&gt; Model.WONumber)\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr class=\"empTableRowBody2\"&gt;\n                &lt;th class=\"empTableRowBody2\"&gt;\n                    @Html.LabelFor(Model =&gt; Model.ProjectId)\n                &lt;/th&gt;\n                &lt;th class=\"empTableRowBody2\"&gt;\n                    @Html.LabelFor(Model =&gt; Model.ClientID)\n                &lt;/th&gt;\n                &lt;th class=\"empTableRowBody2\"&gt;\n                    @Html.LabelFor(Model =&gt; Model.ClientRepID)\n                &lt;/th&gt;\n                &lt;th class=\"empTableRowBody2\"&gt;\n                    @Html.LabelFor(Model =&gt; Model.SupervisorID) *\n                &lt;/th&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;\n                    @Html.TextBoxFor(Model =&gt; Model.ProjectId)\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.DropDownList(\"ClientID\", ViewBag.ClientID as SelectList, \"Select a Client\", new { id = \"drop1\" })\n                &lt;/td&gt;\n                &lt;td&gt;\n                    &lt;select id=\"drop2\"&gt;&lt;/select&gt;\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.DropDownList(\"SupervisorID\")\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr class=\"empTableRowBody2\"&gt;\n                &lt;th colspan=\"2\" class=\"empTableRowBody2\"&gt;\n                    @Html.LabelFor(Model =&gt; Model.JobLocation) *\n                &lt;/th&gt;\n                &lt;th colspan=\"2\" class=\"empTableRowBody2\"&gt;\n                    @Html.LabelFor(Model =&gt; Model.JobDescription) *\n                &lt;/th&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td colspan=\"2\"&gt;\n                    @Html.TextBoxFor(Model =&gt; Model.JobLocation, new{@class=\"textboxlengthlong\"})\n                &lt;/td&gt;\n                &lt;td colspan=\"2\"&gt;\n                    @Html.TextBoxFor(Model =&gt; Model.JobDescription, new{@class=\"textboxlengthlong\"})\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n    &lt;div class=\"section-span-footer\"&gt;&lt;/div&gt;\n    &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Next\" /&gt;\n    &lt;/p&gt;\n}\n</code></pre>\n\n<p></p>\n\n<p>Script</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n$(document).ready(function () {\n    $(\"#drop1\").change(function () {\n        var id = $(this).val();\n        $.getJSON(\"/WorkTicket/GetClientReps/\", { id: id },\n            function (data) {\n            var select = $(\"#drop2\");\n            select.empty();\n            select.append($('&lt;option/&gt;', {\n                value: 0,\n                text: \"Select a Client Rep\"\n            }));\n            $.each(data, function (index, data) {\n\n                select.append($('&lt;option/&gt;', {\n                    value: data.Value,\n                    text: data.Text\n                }));\n            });\n        });\n    });\n});    \n&lt;/script&gt;\n</code></pre>\n\n<p>When I choose a Client from the Client drop down list, nothing happens for the Client Rep drop down list.  I know it must be something obvious that I'm missing but at this point I don't mind looking like an idiot to solve this frustrating problem.  </p>\n\n<p>I have verified that that other jquery works in my project so I don't have anything disabled as far as I can tell.</p>\n\n<p>Thank you in advance for the help!</p>\n\n<p>T</p>\n\n<p><em>Update</em></p>\n\n<p>So I have made one step forward it appears.  I started moving my script placement around on the view.  I tried the top and the bottom of the page.  I also reviewed the layout page to make sure I was link to the right jquery libraries.  That all checked out but it got me thinking so I moved my script into it's own custom.js file and linked to it on the layout page and the cascading drop down lists started working.</p>\n\n<p>My next question is why?  and should I leave it the way it is now?  Thanks!</p>\n\n<p>T</p>\n"},{"tags":[".net","asp.net-mvc-3","session","sitecore","inproc"],"answer_count":2,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":1288,"score":4,"question_id":9010900,"title":"MVC3 .NET Session randomly losing session value and is return as null","body":"<p>I have a production issue with In-Proc session state.</p>\n\n<p>Our application is base on MVC 3 .NET framework and is integrated into our site running Sitecore CMS.</p>\n\n<p>Our users have been experiencing \"Object reference not set to an instance of an object\" randomly through out the application flow.</p>\n\n<p>After extensive logging and tracing we could conclude this was caused when the session object returns null.</p>\n\n<p>Here's to some details about what we found and what we know.</p>\n\n<ol>\n<li>Session ID is being persistent for the same user and passed all\nthe way into the application correctly. </li>\n<li>I don't believe this is a code issue, because this only happen on production at random interval, never happen on local, dev, or staging environment.</li>\n<li>There's two production server running through a load balancer.</li>\n<li>Is not a server persistent issue, as we tested by sleeping one of the server and having all traffic route to one server.  Also through logging we could identify that user are hitting the same server, but the session have became null.</li>\n<li>This doesn't seem to be a client issue as well, because they are able to go through the application successfully even if they have encountered an error before.</li>\n<li>This doesn't seem to be a traffic load or server load issue, because it happen through out the day at random times, and happens to random users during.</li>\n<li>This doesn't seem to be caused by recycling the app pool.</li>\n<li>This doesn't seem to be caused by session timeout as we have set the timeout to be two hour and while we track the log, users could experience this 5-10min into the flow.</li>\n</ol>\n\n<p>Side note: We must use In-Proc session state due to our Sitecore CMS.  So changing the design is not an option.</p>\n\n<p>I have a theory it might have something to do with session locking or being corrupted from concurrent access attempts.</p>\n\n<p>A few place we see the occurrence of this problem a lot from our application is when the users is being redirected by a javascript (windows.location).</p>\n\n<p>And in areas where async ajax calls are being made.</p>\n\n<p>We been scratching our heads on this for a while, I'm wondering if anyone out there would have any insight or theory to what might the problem be?</p>\n\n<p>Thanks </p>\n\n<p>Added Note:</p>\n\n<p>@Mystere &amp;&amp; @H27Studio, So I've also discovered something relating to sessionID or session reset issues.  In some case we discover that on a page redirect it is triggering two duplicate GETS calls to the method, with the first call missing a sessionID and randomly get redirected to one of the server (This is because the server persistent session from the load balancer is base on client IP, sessionID and other header information to create unique session to keep a client on one server).  This happen every time during the flow when our redirect page is using a window.location.  </p>\n\n<p>This will cause the \"Object reference not set..\" issue for the client if the bad, no sessionID call hit the same server. (This probably because the first bad call with no sessionID is causing the application to create a new session which overrides the original session's object)  So even on the second call where the correct sessionID is pass into the application we will discover that session object contain null.</p>\n\n<p>So I believe there is an issue with the duplicate call that's clearing out the session object, which not sure why or what is causing that to begin with.</p>\n\n<p>Anyone have clue regarding this?  Thanks</p>\n\n<p><strong>Update:</strong>\nWe are planning to take these steps in hope to resolve this issue.</p>\n\n<ol>\n<li>We have issues in areas where Async Ajax calls were made, so we are planning to remove the Async feature and let it the Ajax run in sync.</li>\n<li>We have issues where a Windows.location javascript redirect is happening.  We have created an alternative method using postback in hope of fixing the issue in this area.</li>\n<li>Other areas, which aren't related to one of the above issue are still up in the air.</li>\n</ol>\n\n<p>Effect of change will be posted once we deploy it to production.</p>\n\n<p>Thanks for all the comments.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","asp.net-mvc-2","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":247,"score":1,"question_id":9898380,"title":"Questionnaire Wizard in MVC3","body":"<p>My requirement is to create a exam questionnaire wizard. The steps in wizard will be dynamically created.There will be some basic steps that will be common for some applicant like language settings etc. The questions will be generated depending on the type of exam selected by the applicant. There will be at least 25 to 35 questions per questionnaire that means there will be 35- 45 steps per wizard. I cannot save the answers in database. It has to be in session and I cannot use java script.</p>\n\n<p>User should have easy accessibility. he can start answering exam in any order he wishes. </p>\n\n<p>My approach was to create usercontrols for basic steps(like language,instruction and Question) and invoke it on the page as and when the link is clicked. I have just put a sample image from my test project. </p>\n\n<p><img src=\"http://i.stack.imgur.com/e5dyV.jpg\" alt=\"enter image description here\"></p>\n\n<p>Since the questions are dynamically fetched depending on applicant I will fetch all the question and create a list and display it using Question user control step by step.</p>\n\n<p>I have created wizards many time in asp.net but not in MVC so I have some doubts.</p>\n\n<p>Issues or Concern Facing:</p>\n\n<p>Navigation button: NEXT and Previous. Can I put it in ASPX page instead of each user control page.</p>\n\n<p>Assume that user has selected one link like say for eg Question 1 he has entered the answer and clicked on another link or NEXT Button how will i get the updated object with the answer user has selected. Since link doesn't have post action.</p>\n\n<p>If you guys can suggest some ways of achieving this, it will be of great help.</p>\n\n<p><strong>Below shown is my aspx page:</strong></p>\n\n<pre><code>&lt;%@ Page Language=\"VB\" MasterPageFile=\"~/Views/Shared/Site.Master\" Inherits=\"System.Web.Mvc.ViewPage(Of MVCApp.WizardVM)\" %&gt;\n&lt;%@ Import Namespace =\"MVCApp\" %&gt;\n&lt;asp:Content ID=\"indexTitle\" ContentPlaceHolderID=\"TitleContent\" runat=\"server\"&gt;\n    Home Page\n&lt;/asp:Content&gt;\n\n&lt;asp:Content ID=\"indexContent\" ContentPlaceHolderID=\"MainContent\" runat=\"server\"&gt;\n&lt;% Using Html.BeginForm(\"Index\", \"Home\")%&gt;\n\n   &lt;table&gt;\n        &lt;tr&gt;\n            &lt;td&gt;\n                &lt;div id=\"menu\" class=\"block\"&gt;                  \n                      &lt;ul id=\"menuItems\"&gt;              \n                        &lt;% For Each item As MVCApp.MenuVM In Model.menus%&gt;       \n                         &lt;li&gt;&lt;%: Html.ActionLink(item.Description, \"Index\", \"Home\", New With {item.ID}, Nothing)%&gt;&lt;/li&gt;                    \n                        &lt;%Next%&gt;\n                       &lt;/ul&gt;\n                &lt;/div&gt;\n            &lt;/td&gt;\n            &lt;td&gt;\n                &lt;% Html.RenderPartial(Model.UserControlName, Model.Model)%&gt;             \n\n\n            &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n        &lt;td colspan=2 align=\"right\"&gt;\n            &lt;input type=\"submit\" value=\"Next\" /&gt;\n            &lt;input type=\"submit\" value=\"Previous\" /&gt;\n        &lt;/td&gt;\n        &lt;/tr&gt;\n   &lt;/table&gt;\n\n &lt;% End Using %&gt;        \n\n&lt;/asp:Content&gt;\n</code></pre>\n\n<p><strong>Controller Class:</strong></p>\n\n<pre><code>Public Class HomeController\n    Inherits System.Web.Mvc.Controller\n\n\n    Function Index() As ActionResult\n        Dim oWizard As New WizardVM\n        oWizard = GetData()\n\n        If (ControllerContext.RouteData.Values.Count &gt; 2) Then\n            If (ControllerContext.RouteData.Values.Item(\"ID\") = 1) Then\n                oWizard.UserControlName = \"language\"\n                oWizard.Model = oWizard.Language\n\n            ElseIf (ControllerContext.RouteData.Values.Item(\"ID\") = 3) Then\n                oWizard.UserControlName = \"Question\"\n                oWizard.Model = oWizard.Question\n            End If\n        Else\n            oWizard.UserControlName = \"language\"\n            oWizard.Model = oWizard.Language\n        End If\n\n        Return View(\"index\", oWizard)\n    End Function\n\n    Function About() As ActionResult\n        Return View()\n    End Function\n\n\n    Public Function GetData() As WizardVM\n        Try\n            Dim oWizard As New WizardVM\n\n            Dim oLanaguage As New LanguageVM\n            oLanaguage.Description = \"This is a language test screen.\"\n            oWizard.Language = oLanaguage\n\n\n            Dim oQuestion As New QuestionVM\n            oQuestion.Description = \"This is a Question test screen.\"\n            oWizard.Question = oQuestion\n\n            Dim oMenus As New List(Of MenuVM)\n            Dim oMenuHelper As New MenuHelper\n            oMenus = oMenuHelper.BuildMenu()\n\n            oWizard.menus = oMenus\n\n            Return oWizard\n        Catch ex As Exception\n            Throw ex\n        End Try\n    End Function\n\n\n    &lt;HttpPost()&gt;\n    Function GetLanguageInfo(ByVal oLanguage As LanguageVM) As ActionResult\n        Dim a As Integer\n        a = 10\n        Return View(\"index\")\n    End Function\n</code></pre>\n\n<p><strong>My Model View Classes</strong></p>\n\n<pre><code>Public Class WizardVM\n\n    Public Property SelectedMenuId As Integer\n    Public Property Language As LanguageVM\n    Public Property Question As QuestionVM\n\n    Public menus As List(Of MenuVM)\n\n    Public Property UserControlName As String\n    Public Property Model As Object\n\nEnd Class\n</code></pre>\n\n<p><strong>Language Model View Class</strong></p>\n\n<pre><code>Public Class LanguageVM\n\n    Public Property Description As String\n\nEnd Class\n</code></pre>\n\n<p><strong>Question ModelView Class</strong></p>\n\n<pre><code>Public Class QuestionVM\n    Public Property Description As String\nEnd Class\n</code></pre>\n\n<p><strong>UserControls:</strong></p>\n\n<p><strong>LANUGAGE</strong></p>\n\n<pre><code>&lt;%@ Control Language=\"VB\" Inherits=\"System.Web.Mvc.ViewUserControl(of MVCApp.LanguageVM)\" %&gt;\n&lt;form method=\"post\" action=\"/Home/GetLanguageInfo\"&gt; \n    &lt;p&gt;Description\n    &lt;%= Html.TextBoxFor(Function(model) model.Description)%&gt;\n    &lt;/p&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Same way i have created for question. I cannot use javascript so i will have to replace links with buttons. but how will i handle the object post. </p>\n"},{"tags":["asp.net-mvc-3","nopcommerce"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":173,"score":0,"question_id":10867693,"title":"Change Admin View in plugin Nopcommerce","body":"<p>I would like to change the view -> \"Views/Manufacturer/_CreateOrUpdate.cshtml\" from within my plugin.</p>\n\n<p>I know that in the public site you just drop your custom view in your theme's View folder however for admin I am not sure how to override an existing view. </p>\n\n<p>Anyone know how to do this?</p>\n"},{"tags":["asp.net-mvc-3","entity-framework","seeding"],"answer_count":0,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":12648269,"title":"EF5 breaks when seeding","body":"<p>I upgraded my MVC project to the latest EF5 from EF4.3.1. From that point my database would always fail to initialize. If I change the reference back to EF4.3.1 everything works fine. what gives?</p>\n\n<pre><code>public class ArticleInitializer : DropCreateDatabaseAlways&lt;ArticleContext&gt;\n{\n    protected override void Seed(ArticleContext context)\n    {\n        Config.Articles.ForEach(article =&gt; context.Articles.Add(article));\n        Config.Categories.ForEach(category =&gt; context.Articles.Add(category));\n        Config.CareerAreas.ForEach(careerArea =&gt; context.Articles.Add(careerArea));\n        context.SaveChanges();\n    }\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc-3","entity-framework","razor","webgrid"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":12648122,"title":"Is there a clean pattern for implementing an in-place grid editor with razor and EF?","body":"<p>I'm looking to implement an in-place grid editor but the data schema doesn't fit into the expected view.\nThe model looks like two entities - one that contains the store location (first column) but the recurring data is date based across the rest of the columns. New data elements are created per day.\nI'd like to be able to click on a cell, and automatically be placed into an edit mode so it looks like the spreadsheet example. I'm wondering if this can be done in a grid, or should I create a user control that loads by date with a repeater? Any help is appreciated! \n(I can't post an image so I'll do my best here!)</p>\n\n<blockquote>\n  <p>(simulated spreadsheet!)</p>\n</blockquote>\n\n<pre><code>          Oct 1           Oct 2         Oct 3.....         \n          Screws   Nuts   Screws  Nuts\nStore1      35      35      22     25\n Shelf1     10      10       9      9\n Shelf2     16      16      11     11\n Shelf3      9       9      12     16\nStore2\n Shelf1\n Shelf2\n</code></pre>\n\n<p>The new data rows are displayed as columns with new dates</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12645675,"title":"MVC 3 Post of Viewmodel with Completex IEnumerable","body":"<p>I have a complex class that is part of a property of a viewmodel.  My viewmodel has a wine class property and a wine class has a ICollection property called CaseProductions.  The CaseProduction class has several properties as well. </p>\n\n<p>On the create GET event, the NewWineViewModel is instantiated, then it runs a GetCaseProductionDefaults with create a list of CaseProduction classes that have some default values, but are mostly empty.  </p>\n\n<p>Now, I originally used razor to do a foreach statement and just pop out my table the way I wanted it.  But I've see around that doesn't work to bind this type of IEnumerable back to the viewmodel on POST.  I've tried to use the below, but no dice.  </p>\n\n<pre><code>EditorFor(m =&gt; m.Wine.CaseProductions)\n</code></pre>\n\n<p>I'm really looking for advise on what the best way to handle this is.  Each wine will have a collection of caseproductions, and I want that to bind back to the wine within the viewmodel.  Is their some way I can edit the ids of those elements in razor to make sure they bind?  What's the best way to handle this one?  </p>\n\n<p>viewmodel:</p>\n\n<pre><code>    public class NewWineViewModel\n    {\n\n        public Wine Wine { get; set; }\n        public VOAVIRequest VOAVIRequest { get; set; }\n        public bool IsRequest { get; set; }\n\n        public Dictionary&lt;int, int&gt; BottlesPerCase { get; set; }\n        public SelectList VarTypes { get; set; }\n        public SelectList Origins { get; set; }\n        public SelectList Apps { get; set; }\n        public SelectList Vintages { get; set; }\n        public SelectList Importers { get; set; }\n}\n</code></pre>\n\n<p>case production class:</p>\n\n<pre><code>public class CaseProduction\n{\n    public int CaseProductionID { get; set; }\n    public int WineID { get; set; }\n    public int CaseProductionSizeID { get; set; }\n    public int CaseCount { get; set; }\n    public int CountPerCase { get; set; }\n\n    public virtual CaseProductionSize CaseProductionSize { get; set; }\n    public virtual Wine Wine { get; set; }\n\n}\n</code></pre>\n\n<p>getting default case productions:</p>\n\n<pre><code>public List&lt;CaseProduction&gt; GetCaseProductionDefaults(vfContext db)\n{\n    //creates blank list of all formats\n    List&lt;CaseProduction&gt; cp = new List&lt;CaseProduction&gt;();\n    foreach (CaseProductionSize size in db.CaseProductionSizes)\n    {\n        int defaultBottlesPerCase = 1;\n        switch ((CaseProductionSizeEnum)size.CaseProductionSizeID)\n        {\n            case CaseProductionSizeEnum.s187ml:\n                defaultBottlesPerCase= 24;\n                break;\n            case CaseProductionSizeEnum.s375ml:\n                defaultBottlesPerCase = 12;\n                break;\n            case CaseProductionSizeEnum.s500ml:\n                defaultBottlesPerCase = 12;\n                break;\n            case CaseProductionSizeEnum.s750ml:\n                defaultBottlesPerCase = 12;\n                break;\n            default:\n                defaultBottlesPerCase = 1;\n                break;\n        }\n\n        cp.Add(new CaseProduction { CaseProductionSizeID = size.CaseProductionSizeID, CountPerCase = defaultBottlesPerCase, CaseProductionSize = size, WineID = this.Wine.WineID });\n    }\n    return cp;\n}\n</code></pre>\n\n<p>my razor code for the case production table:</p>\n\n<pre><code>  @foreach (vf2.Models.CaseProduction cp in Model.Wine.CaseProductions)\n            {\n                &lt;tr&gt;\n                    &lt;td&gt;@cp.CaseProductionSize.Name\n                    &lt;/td&gt;\n                    &lt;td&gt;@Html.Raw(@Html.TextBoxFor(m =&gt; m.Wine.CaseProductions.Where(c =&gt; c.CaseProductionSizeID == cp.CaseProductionSizeID).First().CaseCount, new { @class = \"caseCount\", id = \"txt\" + cp.CaseProductionSize.Name }).ToString().Replace(\"CaseCount\",\"txt\" + cp.CaseProductionSize.Name))\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.DropDownListFor(m =&gt; m.Wine.CaseProductions.Where(c =&gt; c.CaseProductionSizeID == cp.CaseProductionSizeID).First().CountPerCase, new SelectList(Model.BottlesPerCase, \"Key\", \"Value\", cp.CountPerCase), new { @class = \"countPerCase\", id = \"ddl\" + cp.CaseProductionSize.Name, name = \"ddl\" + cp.CaseProductionSize.Name})\n                    &lt;/td&gt;\n                    &lt;td class=\"totalBottleCalc\"&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n }\n</code></pre>\n\n<p>instantiation of my caseproduction collection:</p>\n\n<pre><code> public ActionResult Create(int ID = 0, int VintUpID = 0)\n        {\n            NewWineViewModel nw = new NewWineViewModel();\n\n            nw.Wine.CaseProductions = nw.GetCaseProductionDefaults(db);\n            nw.BottlesPerCase = nw.GetBottlesPerCase(db);\n</code></pre>\n"},{"tags":["asp.net-mvc-3","file-download"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":172,"score":1,"question_id":12392705,"title":"ASP.Net MVC3 app downloading files to client from another network server","body":"<p>We currently use the code below to download files from a network server to the client in an old ASP.net page.    </p>\n\n<p>We have re-written the app in MVC3 and would like to upgrade this functionality. I have seen several posts that claim you can access the file from the network share by writing the following lines in web.config</p>\n\n<pre><code>&lt;authentication mode=\"Windows\"/&gt;\n&lt;identity impersonate=\"true\" userName=\"\" password=\"\" /&gt;\n</code></pre>\n\n<p>However, we are currently using Forms authentication mode to logon to the site. Would that interfere with the login functionality?</p>\n\n<p>Here's our download code.</p>\n\n<pre><code>Partial Class DownloadFile2\n   Inherits System.Web.UI.Page\n\n   Private BufferSize As Integer = 32 * 1024\n\n   Private Sub Page_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load\n\n      Dim path As String = Request.Params(\"File\")\n      path = \"\\\\speedy\\wanfiles\\\" + path.Substring(3)\n      Dim file As System.IO.FileInfo = New System.IO.FileInfo(path)\n      Dim Buffer(BufferSize) As Byte\n      Dim SizeWritten, fileindex As Integer\n      Response.Clear()\n\n      Response.AddHeader(\"Content-Disposition\", \"attachment; filename=\" + file.Name)\n      Response.AddHeader(\"Content-Length\", file.Length.ToString)\n\n      Response.ContentType = \"application/octet-type\"\n      Response.Flush()\n\n      fileindex = 0\n      Do\n         // not sure about this GM.AlasData code below\n         SizeWritten = GM.AlasData.ReadFileBlock(file.FullName, Buffer, fileindex, BufferSize) \n         Response.OutputStream.Write(Buffer, 0, SizeWritten)\n         Response.Flush()\n         If SizeWritten &lt; BufferSize Then\n            Exit Do\n         Else\n            fileindex = fileindex + SizeWritten\n         End If\n      Loop\n\n      Response.End()\n\n\n   End Sub\n\nEnd Class\n</code></pre>\n\n<p>I found this code to do downloads using MVC3 but cannot access the file because it is considered a local file.</p>\n\n<pre><code>public FileResult Download(string FilePath)\n{\n    if (FilePath != null)\n    {\n        string path = FilePath;\n        string contentType;\n        // files are stored on network server named speedy\n        path = string.Concat(@\"\\\\speedy\\files\\\", HttpUtility.UrlDecode(path));\n        System.IO.FileInfo file = new System.IO.FileInfo(path);\n        Microsoft.Win32.RegistryKey rk = Microsoft.Win32.Registry.ClassesRoot.OpenSubKey(file.Extension.ToLower());\n        if (rk != null &amp;&amp; rk.GetValue(\"Content Type\") != null)\n        {\n            contentType = rk.GetValue(\"Content Type\").ToString();\n        }\n        else\n        {\n            contentType = \"application/octet-type\";\n        }\n\n        //Parameters to file are\n        //1. The File Path on the File Server\n        //2. The content type MIME type\n        //3. The parameter for the file save by the browser\n        return File(file.FullName, contentType, file.Name);\n\n    }\n    else\n    {\n        return null;\n    }\n}\n</code></pre>\n\n<p>What needs to be done to fix this where we can perform this functionality?</p>\n"},{"tags":["asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":227,"score":0,"question_id":7827479,"title":"Change controller and action name in ASP.NET MVC routing","body":"<p>I created an areas -> Admin.</p>\n\n<p>In my register area, I have:</p>\n\n<pre><code>public override void RegisterArea(AreaRegistrationContext context)\n{\n    context.MapRoute(\n        \"Admin_default\",\n        \"Admin/{controller}/{action}/{id}\",\n        new { action = \"Index\", id = UrlParameter.Optional }\n    );\n}\n</code></pre>\n\n<p>I changed it to:</p>\n\n<pre><code>context.MapRoute(\n    \"jojo\",\n    \"jojo/{controller}/{action}/{id}\",\n    new { action = \"Index\", id = UrlParameter.Optional }\n);\n</code></pre>\n\n<p>Now if you type in a URL, <code>xxx/jojo/AdminHome/Index</code>, it works perfectly, but how can I change the controller and action names until the user can not finds that it's going to the admin area. Notice that I do not want change my controller name to jojo, for example.</p>\n\n<p>Is it possible?</p>\n"},{"tags":["javascript","asp.net-mvc-3","internet-explorer-8","internet-explorer-7"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":89,"score":1,"question_id":12459368,"title":"Internet Explorer 7 and 8 freeze loading MVC3 Application","body":"<p>I'm having an intermittent issue with <strong>Internet Explorer 8 and 7</strong>. I've been testing with both for few days now. My guess is that it's related to <code>JavaScript</code>.</p>\n\n<p>After a random number of page views/refreshes within my <code>MVC 3</code> application, I get one of the following:</p>\n\n<ol>\n<li><p>A blank white screen</p></li>\n<li><p>The previously rendered page, without any ability to interact with the page (sometimes including scrolling)</p></li>\n</ol>\n\n<p>I've tried commenting out all of my <code>JavaScript</code>, without any change in results. I've tried deploying to different servers without any results. I've tried different clients without any results. I've tried to search logs on the client and server without any results. <strong>Internet Explorer 9</strong>, <strong>Chrome</strong> and <strong>Firefox</strong> appear unaffected. The application will be used primarily with <strong>Internet Explorer 7 and 8</strong>.</p>\n\n<p>I would appreciate any and all suggestions as to what to try next.</p>\n\n<p>Javascript libraries in the project:</p>\n\n<pre><code>jquery-1.5.1-vsdoc.js\njquery-1.5.1.js\njquery-1.5.1.min.js\njquery-ui-1.8.11.js\njquery-ui-1.8.11.min.js\njquery-ui-1.8.20.custom.min.js\njquery.min.js\njquery.unobtrusive-ajax.js\njquery.unobtrusive-ajax.min.js\njquery.validate-vsdoc.js\njquery.validate.js\njquery.validate.min.js\njquery.validate.unobtrusive.js\njquery.validate.unobtrusive.min.js\nMicrosoftAjax.debug.js\nMicrosoftAjax.js\nMicrosoftMvcAjax.debug.js\nMicrosoftMvcAjax.js\nMicrosoftMvcValidation.debug.js\nMicrosoftMvcValidation.js\nmodernizr-1.7.js\nmodernizr-1.7.min.js\npngfix.js\n</code></pre>\n"},{"tags":["asp.net-mvc-3","partialview","ajax.beginform"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12645881,"title":"How to return a view from a partial view post to a Controller?","body":"<p>So I have a partial view \"_Customer \"with a text box and a save button. Currently, the partial view code, I have this:</p>\n\n<pre><code>@model CompositeViews.Models.Customer\n\n@using (Ajax.BeginForm(\"Edit\", \"Customer\", new AjaxOptions { HttpMethod = \"Post\",     InsertionMode = InsertionMode.Replace, UpdateTargetId = \"customerDiv\" }))\n{\n&lt;div id=\"customerDiv\"&gt;\n    @Html.ValidationSummary(true)\n    &lt;fieldset&gt;\n        &lt;legend&gt;Customer&lt;/legend&gt;\n\n        @Html.HiddenFor(model =&gt; model.CustomerId)\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.Name)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.Name)\n            @Html.ValidationMessageFor(model =&gt; model.Name)\n        &lt;/div&gt;\n\n        &lt;p&gt;&lt;input type=\"submit\" value=\"Save\" /&gt;&lt;/p&gt;\n    &lt;/fieldset&gt;\n&lt;/div&gt;\n}\n</code></pre>\n\n<p>the view lives withing a parent view called index (which also provides the model the partial view is dependent upon):</p>\n\n<pre><code>@model CompositeViews.ViewModels.CompositeViewModel\n&lt;h2&gt;Index&lt;/h2&gt;\n@Html.Partial(\"_Customer\", Model.Customer)\n</code></pre>\n\n<p>The parent view is named Index.cshtml and is fed by a simple controller action. When I click on the Save button in the partial view, it goes to the appropriate action on the appropriate controller, but I'm not too sure how to return the updated model data BACK into the partial view.</p>\n\n<p>In all the examples out there, it's a form that does an async post, but the UpdateTargetId targets a  that is then filled with some type of updated content. That seems pretty straight-forward and simple.</p>\n\n<p>What I'm struggling with is how to return the same form, with the updated model information using the existing view (_Customer). Basically, it's a BeginForm which targets itself with the result from the controller action, not some other div that is not part of the form.</p>\n\n<p>I'd like to NOT have to rebuild all the HTML by hand that the _Customer view does for me via the MVC framework and return that for rendering. I guess I'm stuck with the form in the partial view submitting the data to the controller, and then needing a way for that same view to re-draw itself on returning from the action method.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","asp.net-ajax","code-first"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":1539,"score":1,"question_id":5524360,"title":"C# ASP.NET MVC 3 SQL database to html.dropdownlistfor and AutoPostBack to Browse action on selecting and item","body":"<p>How to post back selected Category item from html.dropdownlist to the browse action method in the event controller? I am thinking of AJAX and JQuery.</p>\n\n<p><img src=\"http://i.stack.imgur.com/25JCY.png\" alt=\"enter image description here\"></p>\n\n<p>EVENT CONTROLLER</p>\n\n<p>EventController.cs</p>\n\n<pre><code>    //\n    // GET: /Event/CategoryMenu\n    [ChildActionOnly]\n    public ActionResult CategoryMenu()\n    {\n        int id = 400;\n        ViewBag.Categories = storeDB.Categories.OrderBy(g =&gt; g.Name).ToList();\n        var cevent = storeDB.Events.Single(a =&gt; a.EventId == id);\n        return PartialView(cevent);\n        //var categories = storeDB.Categories.ToList();\n        //return PartialView(categories);\n    }\n\n    //\n    // GET: /Store/Browse\n    public ActionResult Browse(string category)\n    {\n        // Retrieve Category and its Associated Events from database\n        var categoryModel = storeDB.Categories.Include(\"Events\").Single(g =&gt; g.Name == category);\n        return View(categoryModel);\n    }\n</code></pre>\n\n<p>MODEL</p>\n\n<p>EventCalendarEntities.cs</p>\n\n<pre><code>public class EventCalendarEntities : DbContext\n{\n    public DbSet&lt;Event&gt; Events { get; set; }\n    public DbSet&lt;Category&gt; Categories { get; set; }\n    public DbSet&lt;Place&gt; Places { get; set; }\n    public DbSet&lt;Cart&gt; Carts { get; set; }\n    public DbSet&lt;Order&gt; Orders { get; set; }\n    public DbSet&lt;OrderDetail&gt; OrderDetails { get; set; }\n}\n</code></pre>\n\n<p>Category.cs  </p>\n\n<pre><code>public partial class Category    \n{    \n    public int CategoryId { get; set; }    \n    public string Name { get; set; }  \n    public List&lt;Event&gt; Events { get; set; }          \n}  \n</code></pre>\n\n<p>Event.cs</p>\n\n<pre><code>[Bind(Exclude = \"EventId\")]\npublic class Event\n{\n    [ScaffoldColumn(false)]\n    public int EventId { get; set; }\n    [DisplayName(\"Category\")]\n    public int CategoryId { get; set; }\n    [DisplayName(\"Place\")]\n    public int PlaceId { get; set; }\n    [Required(ErrorMessage = \"An Event Title is required\")]\n    [StringLength(160)]\n    public string Title { get; set; }\n    [Required(ErrorMessage = \"Price is required\")]\n    [Range(0.01, 100.00, ErrorMessage = \"Price must be between 0.01 and 100.00\")]\n    public decimal Price { get; set; }\n    [Required(ErrorMessage = \"Event Date is required\")]\n    [DisplayName(\"Event Date\")]\n    public DateTime EventDate { get; set; }\n    [Required(ErrorMessage = \"Start Time is required\")]\n    [DisplayName(\"Start Time\")]\n    public TimeSpan StartTime { get; set; }\n    [Required(ErrorMessage = \"End Time is required\")]\n    [DisplayName(\"End Time\")]\n    public TimeSpan EndTime { get; set; }\n    [Required(ErrorMessage = \"Description is required\")]\n    [StringLength(1000)]\n    public string Description { get; set; }\n    [DisplayName(\"Event Place URL\")]\n    [StringLength(1024)]\n    public string EventPlaceUrl { get; set; }\n    public virtual Category Category { get; set; }\n    public virtual Place Place { get; set; }\n}\n</code></pre>\n\n<p>VIEW</p>\n\n<p>CategoryMenu.cshtml</p>\n\n<pre><code>@model MvcEventCalendar.Models.Event    \n\n&lt;p id=\"categories\"&gt;  \n@Html.LabelFor(model =&gt; model.Category)        \n@Html.DropDownListFor(model =&gt; model.Category, new SelectList(ViewBag.Categories,      \"CategoryId\", \"Name\", Model.CategoryId), \"-- Select Category --\")  \n@Html.ValidationMessageFor(model =&gt; model.Category)  \n&lt;/p&gt;  \n</code></pre>\n\n<p>Browse.cshtml</p>\n\n<pre><code>@model MvcEventCalendar.Models.Category\n@{\n   ViewBag.Title = \"Browse Events\";\n}\n&lt;div class=\"genre\"&gt;\n    &lt;h3&gt;&lt;em&gt;@Model.Name&lt;/em&gt; Events&lt;/h3&gt;\n    &lt;ul id=\"album-list\"&gt;\n        @foreach (var theEvent in Model.Events)\n        {\n            &lt;li&gt;&lt;a href=\"@Url.Action(\"Details\", new\n                {\n                    id = theEvent.EventId\n                })\"&gt;\n                &lt;img alt=\"@theEvent.Title\" src=\"@theEvent.EventPlaceUrl\"/&gt;\n                &lt;span&gt;@theEvent.Title&lt;/span&gt; &lt;/a&gt;\n            &lt;/li&gt;\n        }\n    &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I am getting Object reference not set to an instance of an object. NullReference exception was unhandled by user code in line <em>@Model.Name</em> Events</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","localization","resx"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12645658,"title":"Localization using resource files","body":"<p>I have a problem with resx based localization.</p>\n\n<p>It's an ASP.NET MVC3 project. I have two assemblies: <code>Web</code> and <code>Resource</code>. <code>Web</code> contains all MVC related stuff, and <code>Resource</code> contains resx files for localization(I am building site with 3 different languages available like <code>file.resx</code>, <code>file.en-AU.resx</code>, <code>file.en-US.resx</code>).</p>\n\n<p>Now the weird thing is that this is all working really nicely on my local machine using VS2010 and IIS when I add the Resource project reference as a Project, but when I add the reference to the Resource.dll in my bin - it doesn't work.</p>\n\n<p>I tried to output <code>Thread.CurrentThread.CurrentUICulture</code> in my views, just before outputting localized strings. It gives me selected culture, which is right, but nevertheless strings are rendered as a fallback value, not localized one.</p>\n\n<p>Could anyone tell me why it wouldn't work if I add the reference as a dll file in my bin?</p>\n"},{"tags":["json","asp.net-mvc-3","ravendb"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12638162,"title":"Get JSON data from RavenDB","body":"<p>I have an Asp.Net MVC3 application that use embedded RavenDB to store data.\nThe view needs json data that is now created by the controller in this way:</p>\n\n<pre><code>    public ContentResult Data()\n    {\n        var res = JsonConvert.SerializeObject(DocumentSession.Query&lt;DataObject&gt;());\n        return new ContentResult { Content = res, ContentType = \"application/json\" };\n    }\n</code></pre>\n\n<p>Everything works fine but to me it seems inefficient because data that are stored in DB in JSON format is serialized in POCO and then deserialized again.</p>\n\n<p>Is there a more direct way to get json data directly from the embedded db?</p>\n"},{"tags":["vb.net","asp.net-mvc-3","linq"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12636414,"title":"Sum from LINQ query","body":"<p>Cannot get this to work. Want to get the sum of all the amounts int the database from the following LINQ statement:</p>\n\n<pre><code>        Dim currentPaid = From a In db.Payments\n                          Where a.ForJob = id\n                          Select a.Amount\n\n        Dim totalPaid As Double = currentPaid.Sum()\n</code></pre>\n\n<p>As it underlines the second statment and says:\nOverload resolution failed because no accessible 'Sum' accepts this number of attributes.</p>\n"},{"tags":["asp.net-mvc-3","attributes"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":2011,"score":4,"question_id":6407096,"title":"asp.net mvc 3 remote attribute passing 3 fields","body":"<p>I want to pass three field to my controller using RemoteAttribute. How can i do it?</p>\n\n<p><code>public int ID1 { get; set; }<br>\n public int ID2 { get; set; }<br>\n [Remote(\"CheckTopicExists\", \"Groups\", AdditionalFields = \"ID1\", ErrorMessage = \" \")]<br>\n public string Topic { get; set; }<br>\n        public ActionResult CheckTopicExists(string topic, int ID1,int ID2)<br>\n        {\n            return Json(true, JsonRequestBehavior.AllowGet);\n        }\n</code></p>\n\n<p>How can i pass three field to that function?</p>\n"},{"tags":["asp.net-mvc-3","asp.net-mvc-3-areas"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12645371,"title":"No parameterless constructor defined for this object MVC3 - get data from database example training","body":"<p>I find some examples about this problem but I'm not able to use in my software have you got idea how to do it? And also can you explain me why I have got this problem?</p>\n\n<p>No parameterless constructor defined for this object.\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.</p>\n\n<p>Exception Details: System.MissingMethodException: No parameterless constructor defined for this object.</p>\n\n<p>SpotrStore.Domein</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Data.Entity;\nusing SportsStore.Entities;\n\nnamespace SportsStore.Concrete\n{\n    public class EFDbContext : DbContext\n    {\n        public DbSet&lt;Towar&gt; Products { get; set; }\n    }\n}\n\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing SportsStore.Entities;\n\nnamespace SportsStore.Concrete\n{\n\n    namespace SportsStore.Domain.Concrete\n    {\n        public class EFProductRepository \n        {\n            public EFDbContext context = new EFDbContext();\n            public IQueryable&lt;Towar&gt; Towar\n            {\n                get { return context.Products; }\n            }\n        }\n    }\n}\n\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing SportsStore.Entities;\n\nnamespace SportsStore.Concrete\n{\n    public interface ITowarRepository\n    {\n        IQueryable&lt;Towar&gt; Towar { get; }\n    }\n}\n\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.ComponentModel.DataAnnotations;\n\nnamespace SportsStore.Entities\n{\n    [Table(\"Towar\")]\n   public class Towar\n    {\n\n       [Key]\n       public int Id_tow { get; set; }\n       public string Nazwa { get; set; }\n       public string Opis { get; set; }\n       public string Cena { get; set; }\n       public int Id_kat { get; set; }\n\n    }\n}\n</code></pre>\n\n<p>SportStore.WebUi</p>\n\n<pre><code>    using System.Linq;\n    using System.Web;\n    using System.Web.Mvc;\n    using SportsStore.Concrete;\n    using SportsStore.WebUI.Models;\n\n    namespace SportsStore.WebUI.Controllers\n    {\n        public class DefaultController : Controller\n        {\n            public ITowarRepository repository;\n\n            public DefaultController(SportsStore.Concrete.ITowarRepository repo)\n            {\n                repository = repo;\n\n            }\n\n            public ActionResult Index()\n            {\n                SomeView ViewModel = new SomeView\n                {\n                    Towar = repository.Towar\n                    .OrderBy(p =&gt; p.Id_kat)\n                };\n                return View(ViewModel);\n            }\n\n        }\n    }\n\n    -----------------------------------------------\n\n    @model SportsStore.WebUI.Models.SomeView\n\n    @{\n        ViewBag.Title = \"Index\";\n    }\n\n    &lt;h2&gt;Index&lt;/h2&gt;\n\n    @foreach (var item in @Model.Towar)\n    {\n        @item.Id_kat\n    }\n---------------------------\n\n\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\n\nnamespace SportsStore.WebUI.Models\n{\n    public class SomeView\n    {\n        public IEnumerable&lt;SportsStore.Entities.Towar&gt; Towar { get; set; }\n    }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc-editor-templates"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12644640,"title":"Official \"How to\" for MVC Editor/Display Templates?","body":"<p>I have been using MVC Editor &amp; Display Templates for a while, but have come to realize that there seems to be very little official documentation on MVC Editor/Display Templates (Html.EditorFor() and Html.DisplayFor()).  I found the basic <a href=\"http://msdn.microsoft.com/en-us/library/ee834942%28v=vs.108%29.aspx\" rel=\"nofollow\">MSDN documentation</a> just showing the technical details (which on their own, are not very helpful), but I'm looking more for an official how-to, sort of like <a href=\"http://msdn.microsoft.com/en-us/library/gg508808%28VS.98%29.aspx\" rel=\"nofollow\">this example</a>.</p>\n\n<p>Are Editor/Display Templates more of an afterthought, and not really widely enough used to justify more in-depth official documentation?</p>\n\n<p>Or, am I blind, and what I'm looking for exists, I just haven't found it yet?</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12645071,"title":"System.Data.Objects.ObjectSet`1 instead of database table","body":"<p>I have database CarsDB, with Table Car in it. I whant to see the car table, but getting only System.Data.Objects.ObjectSet`1 instead of database table</p>\n\n<pre><code>public CarsBDEntities db = new CarsBDEntities();\n\n    public ActionResult Index()\n    {\n        ViewBag.Carlist = db.Cars.ToString();\n        return View();\n    }\n</code></pre>\n\n<p>I have make a table, then created a model from it. Using entity frameworkd and ado.net.</p>\n"},{"tags":["asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12645112,"title":"MVC3 call controller function on dropdown select","body":"<p>I have the following code in a partial view</p>\n\n<pre><code>Country Selector&lt;/label&gt;\n    @Html.DropDownListFor(model =&gt; model.CountryGroup, Model.CountryCodes, new { id = \"CountryGroup\", name = \"country-codes\" })\n    @Html.ValidationMessageFor(model =&gt; model.CountryGroup, \"*\")\n</code></pre>\n\n<p>In the controller I have </p>\n\n<pre><code>public ActionResult ProcessRemoteOrder()\n    {\n        var a = 1;\n        return null;\n    }\n</code></pre>\n\n<p>I am assuming that when the code runs a break point on var a will be hit.  it is not.\nCan someone tell me where I can findout what how to get the function in the controller is run?</p>\n\n<p>thnx</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-areas"],"answer_count":2,"favorite_count":9,"up_vote_count":12,"down_vote_count":0,"view_count":3109,"score":12,"question_id":4241399,"title":"ASP.NET MVC 3 RC AreaRegistration.RegisterAllAreas() and dynamically loaded assemblies","body":"<p>I am currently experimenting with dynamically loaded areas with ASP.NET MVC 3 RC. I've seen it written in many places that this is not what areas are intended for, and (at least pre-MVC 2) not possible, say <a href=\"http://weblogs.asp.net/rashid/archive/2009/12/30/asp-net-mvc-2-and-why-dynamic-area-is-not-supported.aspx\" rel=\"nofollow\">here</a> for example.</p>\n\n<p>But still! It should be possible to get it to work, right? I've created a solution, added a MVC 3 project, added an area and some content. All is working well. Now I created a new class library project (in the same solution), added a reference to it from the MVC-project, and started moving over the area-related parts to the library. Changed the output-directory of the library project to the area-folder of the MVC-project, and made sure the Views and their web.config are copied to the output-folder.</p>\n\n<p>After reading so much about how you couldn't have external areas, it was a little surprising that this worked. No problem at all really! The problem starts when I remove the reference between the projects, and instead load the library in code. (Before calling <code>AreaRegistration.RegisterAllAreas()</code>.) Now it doesn't work. At all.</p>\n\n<p>I've been poking around a bit in the source for MVC 3, and the problem seems to be with <a href=\"http://msdn.microsoft.com/en-us/library/system.web.compilation.buildmanager.getreferencedassemblies.aspx\" rel=\"nofollow\"><code>BuildManager.GetReferencedAssemblies()</code></a> which is used to get the assemblies to look for implementations of <code>AreaRegistration</code>.</p>\n\n<p>Now, I'm not 100% sure about this, but it seems as if this method only looks at assemblies that were present/referenced at compile-time, can someone confirm if this is in fact so?</p>\n\n<p>I have debugged through this, and that method-call does indeed not find the assembly I loaded just before the call to it. It might be because of something else that I've missed perhaps.. Any ideas?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc-3","forms-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":67,"score":4,"question_id":12644355,"title":"Default Login asp.net MVC3 redirect to wrong view. Where is this set?","body":"<p>I am having issues with the redirect to log in page when a user tries to access a page needing authorization. For some reason It wants to direct to:</p>\n\n<pre><code>http://domain.com/Account/Login\n</code></pre>\n\n<p>When it should redirect to:</p>\n\n<pre><code>http://domain.com/Account/LogOn\n</code></pre>\n\n<p>I believe I have set it correctly in the web.config file:</p>\n\n<pre><code>&lt;authentication mode=\"Forms\"&gt;\n    &lt;forms loginUrl=\"~/Account/LogOn\" timeout=\"2880\" /&gt;\n&lt;/authentication&gt;\n</code></pre>\n\n<p>but for some reason it still redirects incorrectly. I have also searched for \"Login\" in my entire solution and see no other place where Account/Login would be specified.</p>\n\n<p>How can I fix it to redirect correctly?</p>\n"},{"tags":["entity-framework","asp.net-mvc-3","entity-framework-4","code-first","entity-framework-4.1"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1067,"score":3,"question_id":5782507,"title":"Creating entity diagrams from code first classes","body":"<p>i was just reading Asp.net MVC3 tutorials (Models (Data))</p>\n\n<p>on this page <a href=\"http://www.asp.net/entity-framework/tutorials/creating-a-more-complex-data-model-for-an-asp-net-mvc-application\" rel=\"nofollow\">tutorial 4 of 10 </a> on asp.net website, they have shown, entity diagram created from code first classes, how to generate them.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","iis7","rewrite"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12643616,"title":"How do I give my child application a separate app pool if its parent has a rewrite module?","body":"<p>I have deployed a new design of my web site in ASP.NET MVC 3 as a child application under an ASP.NET Webforms site. I have used IIS7 rewrite module to rewrite the request based on a cookie (since I want to have both under the same URL and not adding any folder name into the new one). </p>\n\n<p>I can't create a separate app pool because of this rewrite problem. ASP.NET shows a message that says,</p>\n\n<blockquote>\n  <p>If you have an application that is trying to process a URL in another application pool (such as trying to process a custom error), ensure that they both run in the same application pool if appropriate.</p>\n</blockquote>\n\n<p>Is there a way around this? Can I have the child application use a separate app pool? If so, how do I do it with a rewrite module in place?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","dependency-injection","inversion-of-control"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12643050,"title":"IoC in MVC: How do I handle the flow of service objects from controllers through models?","body":"<p>I am using MVC3 and have implemented IoC to provide service/manager objects to controllers through constructor arguments. These in turn, may get passed to models.</p>\n\n<p>The problem I am having is that passing these objects all over the place can get cumbersome.</p>\n\n<p>Example:</p>\n\n<pre><code>public CartController(\n        ICartManager cartManager,\n        IProductManager productManager,\n        IUpsellManager upsellManager,\n        IAccountManager accountManager,\n        ... more ...)\n    {\n        ... store to class variables ...\n    }\n\n    public ActionResult Index()\n    {\n        ...\n\n        CartModel model = new CartModel(\n            cartManager, \n            accountManager, \n            upsellManager, \n            productManager, \n            ... );\n\n        return View(model);\n    }\n</code></pre>\n\n<p>And the cart model may have sub models to which it must pass parameters. As you see, it all gets very cumbersome. I've ready if you have so many constructor arguments, your controller may be doing too much, but this is a complex page, and the site will contain many other complex pages. I don't want to have to pass so many things, but how can I not pass them and maintain a control?</p>\n\n<p>I'm tempted to use the DependencyResolver in the models but that defeats the purpose and Service Locator is known anti-pattern.</p>\n\n<p>How can I avoid passing so many arguments without giving up the benefits of IoC?</p>\n"},{"tags":["ajax","asp.net-mvc-3","razor","calendarextender"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12643748,"title":"MVC3 Razor version of calendar extender","body":"<p>I am used to using the textbox calendar extender (which I love!).  However, my newest project is in MVC3 razor and it seems that using AJAX can't be done or at least not in the asp.net way.  What is an alternative to using the calendar extender for AJAX?  Can I still use it using a work around?  Thanks!</p>\n"},{"tags":["sql-server","asp.net-mvc-3","entity-framework","mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12642251,"title":"Nicer way to add entry into main db table and link table","body":"<p>Hi all the below solution works in that it creates a record in the MeetingRoomRequest table and also adds the associated amenities to that request into the MeetingRoomRequestAmenityLink table. However it just feels a bit clunky, so I was wondering if there is a nicer solution out there (i.e. not having to create 2 context instances) using MVC 3 and Entity Framework??</p>\n\n<p>Please note i've set up the necessary relationships (one to many) in SQL Server and Entity Framework.</p>\n\n<p>Also please note AmenityList is an array of id's (e.g. [1,2,4])</p>\n\n<pre><code>private readonly IDataRepository&lt;MeetingRoomRequest&gt; _meetingRoomRequestRepository = new DataRepository&lt;MeetingRoomRequest&gt;();\nprivate readonly IDataRepository&lt;MeetingRoomRequestAmenityLink&gt; _meetingRoomRequestAmenityLinkRepository = new DataRepository&lt;MeetingRoomRequestAmenityLink&gt;();\n\nvar meetingRoomRequestToAdd = new MeetingRoomRequest\n{\n    User = meetingRoomRequestViewModel.User,\n    UserEmail = meetingRoomRequestViewModel.UserEmail,\n    Title = meetingRoomRequestViewModel.Title,\n    Comments = meetingRoomRequestViewModel.Comments,\n    StartDateTime = meetingRoomRequestViewModel.StartTime,\n    EndDateTime = meetingRoomRequestViewModel.EndTime,\n    RequestStatusID = (int)Enums.RequestStatus.New,\n    AttendeeCount = meetingRoomRequestViewModel.AttendeeCount,\n    AttendeeType = meetingRoomRequestViewModel.AttendeeType,\n    OfficeID = meetingRoomRequestViewModel.OfficeId,\n    LocationID = meetingRoomRequestViewModel.LocationId, \n};\n_meetingRoomRequestRepository.Add(meetingRoomRequestToAdd);\n_meetingRoomRequestRepository.SaveChanges();\nvar meetingRoomRequestAdded = meetingRoomRequestToAdd;\n\nforeach (var item in meetingRoomRequestViewModel.AmenityList)\n{\n    var meetingRoomRequestAmenityLinkToAdd = new MeetingRoomRequestAmenityLink\n    {\n        AmenityID = item,\n        MeetingRoomRequestID = meetingRoomRequestAdded.MeetingRoomRequestID\n    };\n    _meetingRoomRequestAmenityLinkRepository.Add(meetingRoomRequestAmenityLinkToAdd);\n    _meetingRoomRequestAmenityLinkRepository.SaveChanges();\n}\n</code></pre>\n"},{"tags":["asp.net-mvc-3","razor","html-encode"],"answer_count":3,"favorite_count":2,"up_vote_count":18,"down_vote_count":0,"view_count":17764,"score":18,"question_id":5029264,"title":"Display encoded html with razor","body":"<p>I store encoded HTML in the database.</p>\n\n<p>The only way i could display it correctly is :</p>\n\n<pre><code>&lt;div class='content'&gt;    \n   @MvcHtmlString.Create(HttpUtility.HtmlDecode(Model.Content));\n&lt;/div&gt;\n</code></pre>\n\n<p>It's ugly.\nIs there any better way to do this?</p>\n"},{"tags":["jquery","ajax","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12641170,"title":"update database using ajax in mvc3","body":"<pre><code>var loginCred = new Object();\nloginCred.Username = $('#userName').val();\nloginCred.Password = $('#password').val();\nloginCred.RememberMe = $('#rememberMe').checked;\n\nvar myJsonObject = JSON.stringify(loginCred);\n\n$.ajaxSetup({ cache: false });\n$.ajax({\n    type: \"POST\",\n    contentType: \"application/json; charset=utf-8\",\n    url: \"/Account/LogOnAjax/\",\n    data: myJsonObject,\n    dataType: \"json\",\n    success: function(data) {\n        PostCredentialsSuccess(data);\n    }\n\n});\n</code></pre>\n\n<p>I try to develop application using mvc3.In here i want to update database using ajax. this my ajax request to post a form data.But I\nwant to catch this data in controller and update database using this\ndata.Please help me</p>\n"}]}
