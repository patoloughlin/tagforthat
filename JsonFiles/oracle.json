{"total":22203,"page":1,"pagesize":100,"questions":[{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13298029,"title":"How to get rolling yearly totals for a range months","body":"<p>I am trying to get a rolling 12 month total from a set of data that provides the minutes for a given month and year.  In many cases, I will not have a a record for a month.  Is there a way to display the missing months with a zero (0) for the value and then roll it up or not display them but have the query acknowledge this as part of the 12 month range.  The below query is what I was trying to use but it just grabs the prior records and does not take into account missing months.  The query below does not seems to be off a little with some of the totals.  Any assistance would be greatly appreciated.</p>\n\n<pre><code>    Select year\n         , month\n         , SUM(NVL(minutes, 0)) OVER (order by year,month rows between 11 preceding and current row) as total_minutes\n    from\n    (\n    Select *  \n    from test_table\n    Order by year, month\n    )\n    Order by year desc , month desc\n</code></pre>\n\n<p>Here is the sql to create the test table and data.</p>\n\n<pre><code>      drop table test_table;\n            create table test_table (\n      month    number(2),\n      year     number(4),\n      minutes  number(4,2)\n    );\n\n    insert into test_table values ( 1, 2012, 3 );\n    insert into test_table values ( 2, 2012, 3 );\n    insert into test_table values ( 3, 2012, 3 );\n    insert into test_table values ( 4, 2012, 4 );\n    insert into test_table values ( 5, 2012, 5 );\n    insert into test_table values ( 7, 2012, 5 );\n    insert into test_table values ( 8, 2012, 5 );\n    insert into test_table values ( 9, 2012, 5 );\n    insert into test_table values (10, 2012, 4 );\n    insert into test_table values (11, 2012, 3 );\n    insert into test_table values (12, 2012, 3 );\n    insert into test_table values ( 1, 2011, 3 );\n    insert into test_table values ( 2, 2011, 3 );\n    insert into test_table values ( 5, 2011, 5 );\n    insert into test_table values ( 6, 2011, 5 );\n    insert into test_table values ( 7, 2011, 5 );\n    insert into test_table values ( 8, 2011, 5 );\n    insert into test_table values ( 9, 2011, 5 );\n    insert into test_table values (10, 2011, 4 );\n    insert into test_table values (11, 2011, 3 );\n    insert into test_table values (12, 2011, 3 );\n    insert into test_table values ( 1, 2010, 3 );\n    insert into test_table values ( 2, 2010, 3 );\n    insert into test_table values ( 3, 2010, 3 );\n    insert into test_table values ( 4, 2010, 4 );\n    insert into test_table values ( 5, 2010, 4 );\n    insert into test_table values ( 6, 2010, 5 );\n    insert into test_table values ( 7, 2010, 5 );\n    insert into test_table values (10, 2010, 4 );\n    insert into test_table values (11, 2010, 4 );\n    insert into test_table values (12, 2010, 3 );\n\n    COMMIT;\n</code></pre>\n"},{"tags":["java","oracle"],"answer_count":0,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":37,"score":4,"question_id":13298401,"title":"Weird issue with Calendar.getInstance()","body":"<p>I am trying to store the current timestamp in an oracle table field defined as TIMESTAMP(6).\nI set it through a setter method that looks like:</p>\n\n<pre><code>void org.samples.Invoice.setCreated(Calendar value)\n</code></pre>\n\n<p>I am setting the field using Calendar.getInstance(). </p>\n\n<pre><code>Invoice inv = new Invoice();\ninv.setCreated(Calendar.getInstance());\n</code></pre>\n\n<p>I am seeing the timestamp that gets inserted has the correct date, but the time is always getting set as 00:00:00.0</p>\n\n<p>Can you please tell me what am I doing wrong here? </p>\n"},{"tags":["c#",".net","oracle","sqlcommand"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":52,"score":3,"question_id":13235392,"title":"Optional sql command parameters with Oracle Client","body":"<p>I'm trying to feed sqlcommand with more parameters than it uses. Because of that I'm getting exception ORA 01036. The description leads me to a fact that I can only pass parameters that will actually be used in the query.</p>\n\n<p>I cannot find it anywhere - is it really true? It seems pretty stupid and limited to me...</p>\n"},{"tags":["database","windows","oracle","odbc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5,"score":0,"question_id":13297568,"title":"oracle 11g odbc drivers installation on windows 7 oracle odbc driver with the same name already exists","body":"<p>these are the steps:</p>\n\n<ol>\n<li>downloaded: instantclient-basic-windows.x64-11.2.0.3.0.zip</li>\n<li>extracted to c:\\instant_client_11_2</li>\n<li>downloaded: instantclient-odbc-windows.x64-11.2.0.3.0.zip</li>\n<li>extracted to c:\\instant_client_11_2 (the same dir from step 2)</li>\n<li>via cmd: odbc_install</li>\n<li>getting \"oracle odbc driver with the same name already exists\"</li>\n</ol>\n\n<p>i've tried with instantclient-basiclite-windows.x64-11.2.0.3.0 in step 1 instead. getting the same error</p>\n\n<p>Interesting facts: </p>\n\n<ul>\n<li><p>i had the XE edition installed too, uninstalled it, deleted manually the C:\\oracleXE folder, rebooted, retried steps 1-6 and still no joy. As far as i can tell there is no other oracle product (besides java) running on my machine.</p></li>\n<li><p>Using windows 7 </p></li>\n</ul>\n\n<p>Thanks.</p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13295324,"title":"Show the last record if meets certain conditions","body":"<p>I have two tables for example USER and AUDIT, where the join is <code>user.id = audit.record</code>:</p>\n\n<p>USER:</p>\n\n<pre><code> ID,  USER,  NAME,  LAST_NAME\n\n 205, USER1, PEDRO, PEREZ\n\n 206, USER2, JUAN,  PEREZ\n</code></pre>\n\n<p>AUDIT:</p>\n\n<pre><code> ID, ACTION, RECORD, FIELD,     DATE\n\n 1, MODIFY,  205,    LAST_NAME, 08/11/12\n\n 2, MODIFY,  205,    NAME,      25/09/12\n\n 3, MODIFY,  206,    NAME,      08/11/12\n</code></pre>\n\n<p>I need a query where the result shows all the users that his last registry entry have a modification in its name. In the example the result would be just <code>USER2</code></p>\n\n<p>I'm using Oracle 8, can i use a simple query or do i need to create a function?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["visual-studio-2010","oracle","tnsnames"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":173,"score":0,"question_id":11477218,"title":"Visual studio 2010  ODAC Oracle ORA-12154","body":"<p>I can connect to remote Oracle db using Oracle SQL Developer after tuning TNSNAMES.ora. I can also connect to remote Oracle db using export import vizard in SQL server. \nWhen do tnsping sourcename on command prompt, I get the correct response. This shows my TNSNAMES is correct.</p>\n\n<p>But when I try to add datasource in Visual Studio 2010 under server explorer, it gives me ORA-12154!!</p>\n\n<p>Based on couple of suggestions in forums, added below line to sqlnet.ora\nNAMES.DIRECTORY_PATH= (LDAP, TNSNAMES, HOSTNAME) but still same error!</p>\n\n<p>The Oracle Data Access Components (ODAC) 11.2.0.3 is installed.</p>\n\n<p>thanks in advance.</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13296788,"title":"NULL & Distinct in oracle","body":"<p>I have a situation where I want to return null values from the customer table and essentialy the equivalent of a select distinct on the Bill code from the bill table.</p>\n\n<p>How would I do this?</p>\n\n<p>Table Customer</p>\n\n<pre>\nID\nName\nCustNumber\nBILLCODE\n</pre>\n\n<p>Table Bill</p>\n\n<pre>\nID\nBILLCODE\n</pre>\n\n<p>I'm trying to do something like</p>\n\n<pre><code>Select Null ID, Null NAME, Null CUSTNUMBER\nfrom CUSTOMER\nRIGHT JOIN ID, BILLCODE \non customer.billcode = bill.billcode\n</code></pre>\n\n<p>I only want 1 record for each billcode in the table.</p>\n"},{"tags":["oracle","jsp","oracle10g","auto-increment","last-insert-id"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13295453,"title":"Retrieving the last inserted id in Oracle using JSP","body":"<p>I'm trying to retrieve the last generated auto-increment id in JSP something like the PHP <a href=\"http://php.net/manual/en/function.mysql-insert-id.php\" rel=\"nofollow\"><code>mysql_insert_id()</code></a> function or the MySql <a href=\"http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id\" rel=\"nofollow\"><code>last_insert_id()</code></a> function using the <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html#getGeneratedKeys%28%29\" rel=\"nofollow\"><code>getGeneratedKeys()</code></a> method as mentioned in this <a href=\"http://stackoverflow.com/q/4952256/1037210\">question</a> (I'm using Oracle 10g though).</p>\n\n<p>I have a <code>TRANSPORTER</code> table in Oracle database which has a column named <code>TRANSPORTER_ID</code> of type <code>NUMBER(35, 0)</code> which is mapped to a <code>BigDecimal</code> type in Java and it is a sequence generated primary key.</p>\n\n<pre><code>Connection con;\nResultSet rs;\nPreparedStatement ps;\nString url=\"jdbc:oracle:thin:@localhost:1521:xe\";\nString user=\"wagafashiondb\";\nString pwd=\"root\";\n\nClass.forName(\"oracle.jdbc.OracleDriver\").newInstance();\ncon=DriverManager.getConnection(url,user,pwd);\n\nps=con.prepareStatement(\"insert into transporter(transporter_name, transporter_website)values(?,?)\");\nps.setString(1, \"New\");\nps.setString(2, \"New Website\");\nps.executeUpdate();\n\nBigDecimal id=new BigDecimal(0);\nrs=ps.getGeneratedKeys();\n\nwhile(rs.next())\n{\n    id=rs.getBigDecimal(\"transporter_id\");\n}\n\nout.println(\"The generated id is : \"+id);\n</code></pre>\n\n<p>After the insertion operation is performed, the code attempts to invoke this method <code>rs=ps.getGeneratedKeys();</code>above the preceding <code>while</code> loop and it fails with following exception.</p>\n\n<blockquote>\n  <p>javax.servlet.ServletException: java.sql.SQLException: operation not\n  allowed</p>\n</blockquote>\n\n<p>I have tried with the <code>Oracle JDBC Driver version - 10.2.0.5.0</code> and when it failed I downloaded a higher version which is <code>11.2.0.3.0</code> but to no avail. What might be the reason?</p>\n"},{"tags":["oracle","plsql","triggers"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":12,"score":1,"question_id":13296528,"title":"Getting a bad bind error first time can someone help me through it please","body":"<p>Can you tell me what i'm doing wrong here getting the bad bind error?</p>\n\n<p>The code is to manage stock. I have to identify when stock reaches its minimum on-hand quantity and then re-order that product.</p>\n\n<pre><code> CREATE OR REPLACE TRIGGER REORDER_STOCK\n BEFORE INSERT OR UPDATE OF STK_QOH,STK_MIN ON STOCK\n FOR EACH ROW\n\n DECLARE\n V_STK_QOH stock.STK_QOH%TYPE;\n V_STK_MIN stock.STK_MIN%TYPE;\n V_STK_REORDER STOCK.STK_REORDER%TYPE;\n\nBEGIN \n\n SELECT STK_QOH, STK_MIN, STK_REORDER\nINTO V_STK_QOH, V_STK_MIN, V_STK_REORDER\nFROM STOCK\nWHERE STK_ID= :NEW.STK_ID;\n\nIF:V_STK_QOH&lt;= :STK_MIN THEN\n:V_STK_REORDER := 1;\nELSE :V_STK_REORDER :=0;\nEND IF;\n\n END;\n/\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13296501,"title":"Optimising Queries With Already Low Cost","body":"<p>I've been doing some basic optimising of my SQL queries by indexing and clustering but have come upon what is perhaps an odd question. Most of my queries have costs that range from the high hundreds to the low thousands and I've added indices for them, bringing their costs down.</p>\n\n<p>However, some of my queries already have a very low cost, usually a single digit. Can I forget about these? Is it still worth optimising these queries or should I not put in the effort?</p>\n\n<p>Basically, I'd like to know if there's a general range or metric I can use to determine if a query should be optimised further or not. If I should determine this on a case-by-case basis, it would be helpful to have some guidelines to use in deciding which queries to optimise.</p>\n"},{"tags":["oracle","hibernate","orm","date","jpa"],"answer_count":2,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":2918,"score":3,"question_id":3469018,"title":"JPA 2.0 Oracle DATE has null time","body":"<p>This seems like such a bonehead question, but I've been chasing my tail around a tree all day. I have a Struts 2 + Spring3/JPA/Hibernate application that inserts a large set into the DB. In the set is a Java util date. I've checked the date just before the Dao inserts the rows and all the dates have the correct times. After insert, all the rows in the Oracle DB have no time, just the date. It's as if the time is truncated, but no errors appear in the transaction.</p>\n\n<p>I thought before I posted any code, I would ask the question to see if someone could suggest something I may have been overlooking? The DB is Oracle 10g. JPA 2.0. The Column has the annotation on it:</p>\n\n<pre><code>@Column(name = \"READING_DATE\")\n@Temporal(TemporalType.DATE)\nprivate Date readingDate;\n</code></pre>\n\n<p>Setting the Column type to TemporalType.TIMESTAMP results in a Hibernate exception</p>\n\n<pre><code>column READING_DATE. Found: date, expected: timestamp\n</code></pre>\n\n<p>Any/all replies are appreciated.</p>\n"},{"tags":["mysql","oracle","postgresql","partitioning"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":174,"score":1,"question_id":9507068,"title":"Alternatives to Oracle partitioning","body":"<p>Are there any good alternatives to Oracle partitioning in free/open source databases?  I'm interested in both partition elimination for queries, and the operational ability to truncate individual partitions without DELETE transactions.</p>\n\n<p>I've seen that PostgreSQL has some support for partitioning with table inheritance, but it seems like a lot of manual effort.  </p>\n\n<p>Are there any other options out there?  Is MySQL any better?</p>\n"},{"tags":["c#","xml","web-services","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13295821,"title":"Calling Oracle XML Gateway web service from .NET","body":"<p>I'm working on a .NET application (written in C#) that will process incoming XML files through the Oracle XML Gateway.</p>\n\n<p>I've created the proxy class through Visual Studio 2010 using a service reference pointed tot he WSDL Oracle provides. I can iterate the methods through Object Browser, so it seems to have worked.</p>\n\n<p>The problem is I can't get the webmethod to execute. Is there a trick to getting the gateway to process an inbound message?</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":13295520,"title":"Oracle SQL - how to group and aggregate results?","body":"<p>I am trying to query an audit table in Oracle to pull out a list of how popular a document is during a given timeframe (number of unique hits).</p>\n\n<p>The SQL that I've developed so far is:</p>\n\n<pre><code>select distinct dt.name \"Document name\", ku.name \"User name\", count(*) \"Number of hits\" \n  from dauditnew da, \n       kuaf ku, \n       dtree dt \n where ku.id=da.performerid \n   and (da.auditstr='Fetch') \n   and dt.dataid = ANY(DOCID1,DOCID2) \n   and da.dataid = ANY(DOCID1,DOCID2) \n   and da.auditdate between TO_DATE('01-JAN-12') and TO_DATE('31-OCT-12') \n group by dt.name, ku.name\n</code></pre>\n\n<p>And it spits out data similar to:</p>\n\n<pre><code>Document name       User name           Hit count\ndocument1.pdf   rimnet\\user1    1\ndocument1.pdf   rimnet\\user2    1\ndocument1.pdf   rimnet\\user3    17\ndocument1.pdf   rimnet\\user4    1\ndocument2.pdf   rimnet\\user5    1\ndocument1.pdf   rimnet\\user6    1\ndocument3.pdf   rimnet\\user7    1\n</code></pre>\n\n<p>But what I really need is for it to group the results and count each unique user once:</p>\n\n<pre><code>Document name       User name           Hit count\ndocument1.pdf       n/a                 5\ndocument2.pdf       n/a                 1\ndocument3.pdf       n/a                 1\n</code></pre>\n\n<p>Can anyone point me in the right direction?</p>\n"},{"tags":["oracle","tomcat","jndi"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1347,"score":1,"question_id":8952793,"title":"Setting up JNDI Datasource with oracle in Tomcat","body":"<p>I can't make it work to get connection from DataSource obtained from JNDI in tomcat 7.0, resulting in error like this:</p>\n\n<pre><code>org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of cla\nss '' for connect URL 'null'\n</code></pre>\n\n<p>I have done in many ways following the doc and other people suggestions, but still not able to fix it. Here are my settings:</p>\n\n<p>In web.xml:</p>\n\n<pre><code>&lt;resource-ref&gt;\n    &lt;description&gt;MyDataSource&lt;/description&gt;\n    &lt;res-ref-name&gt;jdbc/MyDataSource&lt;/res-ref-name&gt;\n    &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;\n    &lt;res-auth&gt;Container&lt;/res-auth&gt;\n&lt;/resource-ref&gt; \n</code></pre>\n\n<p>In context.xml:</p>\n\n<pre><code>&lt;Context&gt;\n  &lt;Resource name=\"jdbc/MyDataSource\" auth=\"Container\" type=\"javax.sql.DataSource\"\n               maxActive=\"100\" maxIdle=\"30\" maxWait=\"10000\"\n               username=\"abc\" password=\"abc\" driverClassName=\"oracle.jdbc.OracleDriver\"\n               url=\"jdbc:oracle:thin:@123.123.123.123:1521:xe\"/&gt;\n               &lt;!-- // tried both driver class names but all not work driverClassName=\"oracle.jdbc.driver.OracleDriver\" --&gt;\n&lt;/Context&gt;\n</code></pre>\n\n<p>Also, I tried to put that in server.xml, also not work</p>\n\n<pre><code>&lt;Resource name=\"jdbc/MyDataSource\" auth=\"Container\" type=\"javax.sql.DataSource\"\n    driverClassName=\"oracle.jdbc.driver.OracleDriver\"\n    url=\"jdbc:oracle:thin:@123.123.123.123:1521:xe\"\n    servicename=\"MyDataSource\"  username=\"abc\" password=\"abc\"\n    maxActive=\"20\" maxIdle=\"10\" maxWait=\"20000\"/&gt;\n\n&lt;ResourceParams name=\"jdbc/MyDataSource\"&gt;\n    &lt;parameter&gt;\n        &lt;name&gt;user&lt;/name&gt;\n        &lt;value&gt;abc&lt;/value&gt;\n    &lt;/parameter&gt;\n    &lt;parameter&gt;\n        &lt;name&gt;password&lt;/name&gt;\n        &lt;value&gt;abc&lt;/value&gt;\n    &lt;/parameter&gt;\n    &lt;parameter&gt;\n        &lt;name&gt;driverClassName&lt;/name&gt;\n        &lt;value&gt;oracle.jdbc.driver.OracleDriver&lt;/value&gt;\n    &lt;/parameter&gt;\n&lt;/ResourceParams&gt;\n</code></pre>\n\n<p>Put classes12.jar as well as ojdbc14.jar in Tomcat 7.0\\lib</p>\n\n<p>Can anyone point me the right way? </p>\n\n<p>I wasted so much time on that configuration but still cannot make it work. Thanks in advance!</p>\n\n<p>John</p>\n\n<hr>\n\n<p>Stack Trace as below:</p>\n\n<pre><code>DS: org.apache.tomcat.dbcp.dbcp.BasicDataSource@497062\norg.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of class '' for connect URL 'null'\n    at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1452)\n    at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1371)\n    at org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)\n    at DBTest.doGet(DBTest.java:70)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)\n    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)\n    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: java.lang.NullPointerException\n    at sun.jdbc.odbc.JdbcOdbcDriver.getProtocol(Unknown Source)\n    at sun.jdbc.odbc.JdbcOdbcDriver.knownURL(Unknown Source)\n    at sun.jdbc.odbc.JdbcOdbcDriver.acceptsURL(Unknown Source)\n    at java.sql.DriverManager.getDriver(Unknown Source)\n    at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1437)\n    ... 21 more\n</code></pre>\n\n<p>And here is the code, exception at ds.getConnection. (It is not typical way to get DS, bcoz need to match WebSphere way...)</p>\n\n<pre><code>Properties env = new Properties();\nenv.put(Context.INITIAL_CONTEXT_FACTORY, \"org.apache.naming.java.javaURLContextFactory\");\ninitCtx = new InitialContext(env);\nDataSource ds = (DataSource) initCtx.lookup(\"java:comp/env/jdbc/MyDataSource\");\nSystem.err.println(\"DS: \" + ds.toString());\nConnection conn = ds.getConnection();\n</code></pre>\n"},{"tags":["java","oracle","hibernate","date","time"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1897,"score":2,"question_id":2343339,"title":"Java Date Hibernate cut off time","body":"<p>I have a Date type column in Oracle DB and it contains date and time for sure. But when I'm trying to get data in java application it will return date with bunch of zeros instead of real time.\nIn code it'll be like:</p>\n\n<pre><code>SQLQuery sqlQuery = session.createSQLQuery(\"SELECT table.id, table.date FROM table\");\nList&lt;Object[]&gt; resultArray = sqlQuery.list();\nDate date = (Date)resultArray[1];\n</code></pre>\n\n<p>If it was 26-feb-2010 17:59:16 in DB I'll get 26-feb-2010 00:00:00\nHow to get it with time?</p>\n"},{"tags":["c#","asp.net","oracle","connection-pooling"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1054,"score":1,"question_id":2702003,"title":"ASP.NET Connection time out after being idle for a while","body":"<p>My ASP.NET website while trying to connect to the database for first time after a period of inactivity throws an time out exception.<br>\nI understand the connections in the connection pool get terminated after some idle time for some reason (Firewall or Oracle settings) and the pool or app doesn't have a clue about it.</p>\n\n<p>Is there any way to validate the connection beforehand so that the first try doesn't throw an exception?<br>\nI don't have much control over the DB or Firewall settings. So I have to deal with this is my application.(would prefer if there is any web.config settings)</p>\n\n<p>I am using: ASP.NET 2.0. Oracle server 11g, Microsoft Enterprise Library DAAB to do all my DB operations.\n<br><br><I>I did some search on this topic but didnt find any solid solution for this yet </i> :(</p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13294453,"title":"File as an OBJECT TYPE attribute in PL/SQL","body":"<p>I'd like to create a PL/SQL class (OBJECT TYPE) with a file attribute. I've tried to declare my attribute as <code>UTL_FILE.FILE_TYPE</code>, this way:</p>\n\n<pre><code>CREATE OR REPLACE TYPE Exporter AS OBJECT (\n  output_file UTL_FILE.FILE_TYPE\n  ...\n</code></pre>\n\n<p>but I get <code>Error(2,22): PLS-00201: the identifier 'UTL_FILE.FILE_TYPE' must be declared</code>, even after granting EXECUTE on UTL_FILE to PUBLIC.</p>\n\n<p>I assume it is because, according to <a href=\"http://docs.oracle.com/cd/A97630_01/appdev.920/a96624/10_objs.htm\" rel=\"nofollow\">Oracle's doc</a>, I cannot use \"Types defined inside a PL/SQL package\".</p>\n\n<p>Is there a PL/SQL file type that is not defined in a package ? Otherwise, what solution do I have to manipulate a file attribute in an OBJECT TYPE ?</p>\n"},{"tags":["oracle","spring","jdbc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":118,"score":0,"question_id":13108616,"title":"Oracle 11g DBCP The Network Adapter could not establish the connection","body":"<p>I'm traied to connect oracle with Spring and DBCP.</p>\n\n<pre><code>    &lt;bean id=\"dataSource\" class=\"org.apache.tomcat.dbcp.dbcp.BasicDataSource\"&gt;\n        &lt;property name=\"driverClassName\" value=\"oracle.jdbc.OracleDriver\" /&gt;\n        &lt;property name=\"url\" value=\"jdbc:oracle:thin:@localhost:1521/ORCL\" /&gt;\n        &lt;property name=\"username\" value=\"PMSYSDB\" /&gt;\n        &lt;property name=\"password\" value=\"********\" /&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>but I get: <code>Could not get JDBC Connection; nested exception is org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (IO Error: The Network Adapter could not establish the connection)</code></p>\n\n<p>I'm able to connect via SQLDeveloper with this properties:</p>\n\n<pre><code>Hostname: localhost\nPort    : 1521\nSID     : ORCL\nusername: PMSYSDB\npassword:\n</code></pre>\n\n<p>so my database is up and running...\n Firewall is off... \n The database and the tomcat are on the same machine...</p>\n\n<p>Think it's not important, but i use the datasource with Spring Security:</p>\n\n<pre><code>     &lt;authentication-manager&gt;\n         &lt;authentication-provider&gt;\n        &lt;jdbc-user-service data-source-ref=\"dataSource\"\n\n           users-by-username-query=\"\n              select username, password, enabled \n              from users where username=?\" \n\n           authorities-by-username-query=\"\n              select u.username, ur.authority from users u, user_roles ur \n              where u.user_id = ur.user_id and u.username =?  \" \n\n        /&gt;\n      &lt;/authentication-provider&gt;\n    &lt;/authentication-manager&gt;\n</code></pre>\n"},{"tags":["oracle","report","oracle-apex"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13272816,"title":"Oracle Apex calculate average of column on report","body":"<p>I have CLASSIC REPORT which is aggregation of daily figures. Report present list of predefined dates as list. It is easy to create Total of column, but is it possible to create AVG of column? If not what is the most effective and elegant solution to this problem ?  </p>\n"},{"tags":["sql","oracle","datapump","impdp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13292135,"title":"Oracle data pump import into existing table","body":"<p>i need an efficient way to copy data from one database to another.\nBoth are based on Oracle 11g.</p>\n\n<ol>\n<li>Step: (Re)create new tables</li>\n<li>Step: Install pl sql packages</li>\n<li>Step: export tables tab_old1 and tab_old2 from database 1 with expdp</li>\n<li>Step: import into tab_new1 and tab_new2 database 2 with impdp</li>\n<li>+x Step: Use installed pl sql procedures </li>\n</ol>\n\n<p>Challenges:\nThe pl sql procedures uses already tab_new1 and tab_new2. Thus, I create both tables in step 1 and 2. \nIn step 3 and 4 I import and export only data.\nBut tab_new1 and tab_new2 have additional columns -> import fails. \nI tried to create views without the new columns. </p>\n\n<p>Import fails with the following error message:</p>\n\n<pre><code>ORA-31693: Table data object \"Schema\".\"tab_old1\" failed to load/unload and is being skipped due to error:\nORA-31603: object “tab_old1” of type TABLE not found in schema “Schema” \n\nORA-31693: Table data object \"Schema\".\"tab_old2\" failed to load/unload and is being skipped due to error:\nORA-31603: object “tab_old2” of type TABLE not found in schema “Schema” \n</code></pre>\n\n<p>The views are called tab_old1 and tab_old2, but of course they are not of type TABLE.</p>\n\n<p>Any ideas?</p>\n\n<p>How can I import my data from tab_old1 in an existing table with additional columns?</p>\n\n<p>I don't want to export / import the tables in the first step, rename them, and install pl sqls procedures afterwards. </p>\n\n<p>Could you help me?</p>\n\n<p><strong>edit:</strong></p>\n\n<p>Thanks for your answer. I tried it twice, but the remap_table function does not work for me:</p>\n\n<pre><code>host impdp test/testtables=foo remap_table=foo:foo2 directory=data_pump_dir content=data_only\n\nImport: Release 11.1.0.6.0 - 64bit Production on Donnerstag, 08 November, 2012 17:15:33\n\nCopyright (c) 2003, 2007, Oracle.  All rights reserved.\n\n...\nORA-31693: Table data object \"TEST\".\"FOO\" failed to load/unload \nand is being skipped due to error: \nORA-00942: table or view does not exist\n</code></pre>\n\n<p>?! I really did what you described. </p>\n\n<p>Maybe because of the release version? Release 11.1 instead of 11.2?</p>\n\n<p>Any ideas? Workarounds?</p>\n\n<p><strong>edit 2:</strong>\nto be more precise, what I did.</p>\n\n<p>I created a new table called foo :)</p>\n\n<pre><code>SQL*Plus: Release 11.1.0.6.0 - Production on Do Nov 8 18:37:10 2012\n\nCopyright (c) 1982, 2007, Oracle.  All rights reserved.\n\n\nVerbunden mit:\nOracle Database 11g Enterprise Edition Release 11.1.0.6.0 - 64bit Production\nWith the Partitioning, OLAP, Data Mining and Real Application Testing options\n\nSQL&gt; create table foo(id number);\n\nTabelle wurde erstellt.\n\nSQL&gt; insert into foo select rownum from dual connect by level &lt;= 5;\n\n5 Zeilen wurden erstellt.\n\nSQL&gt; commit;\n\nTransaktion mit COMMIT abgeschlossen.\n</code></pre>\n\n<p>Export :)</p>\n\n<pre><code>SQL&gt; host expdp test/test tables=foo directory=data_pump_dir reuse_dumpfiles=y\n\nExport: Release 11.1.0.6.0 - 64bit Production on Donnerstag, 08 November, 2012 18:38:31\n\nCopyright (c) 2003, 2007, Oracle.  All rights reserved.\n\nAngemeldet bei: Oracle Database 11g Enterprise Edition Release 11.1.0.6.0 - 64bit Production\nWith the Partitioning, OLAP, Data Mining and Real Application Testing options\n\"TEST\".\"SYS_EXPORT_TABLE_01\":  test/******** tables=foo directory=data_pump_dir reuse_dumpfiles=y  wird gestartet\nSchÃ¤tzung erfolgt mit Methode BLOCKS...\nObjekttyp TABLE_EXPORT/TABLE/TABLE_DATA wird verarbeitet\nGesamte SchÃ¤tzung mit BLOCKS Methode: 64 KB\nObjekttyp TABLE_EXPORT/TABLE/TABLE wird verarbeitet\n. . \"TEST\".\"FOO\"                                5.031 KB       5 Zeilen exportiert\nMaster-Tabelle \"TEST\".\"SYS_EXPORT_TABLE_01\" erfolgreich geladen/entladen\n******************************************************************************\nFÃ¼r TEST.SYS_EXPORT_TABLE_01 festgelegte Dump-Datei ist:\n  /opt/oracle/admin/plis/dpdump/expdat.dmp\nJob \"TEST\".\"SYS_EXPORT_TABLE_01\" erfolgreich um 18:38:39 abgeschlossen\n</code></pre>\n\n<p>Foo -> Foo2 :)</p>\n\n<pre><code>SQL&gt; delete from foo;\n\n5 Zeilen wurden gelÃ¶scht.\n\nSQL&gt; alter table foo add (a varchar2(200));\n\nTabelle wurde geÃ¤ndert.\n\nSQL&gt; alter table foo rename to foo2;\n\nTabelle wurde geÃ¤ndert.\n</code></pre>\n\n<p>Expected error without remap_table. But the error messages are different. ORA-31693 (Table data object \"TEST\".\"FOO\" failed to load/unload and is being skipped due to error ) and ORA-00942 (table or view does not exist). :| </p>\n\n<pre><code>SQL&gt; host impdp test/test tables=foo directory=data_pump_dir content=data_only\n\nImport: Release 11.1.0.6.0 - 64bit Production on Donnerstag, 08 November, 2012 18:39:27\n\nCopyright (c) 2003, 2007, Oracle.  All rights reserved.\n\nAngemeldet bei: Oracle Database 11g Enterprise Edition Release 11.1.0.6.0 - 64bit Production\nWith the Partitioning, OLAP, Data Mining and Real Application Testing options\nMaster-Tabelle \"TEST\".\"SYS_IMPORT_TABLE_01\" erfolgreich geladen/entladen\n\"TEST\".\"SYS_IMPORT_TABLE_01\":  test/******** tables=foo directory=data_pump_dir content=data_only  wird gestartet\nObjekttyp TABLE_EXPORT/TABLE/TABLE_DATA wird verarbeitet\nORA-31693: Tabellendatenobjekt \"TEST\".\"FOO\" konnte nicht geladen/entladen werden und wird wegen Fehler Ã¼bersprungen:\nORA-00942: Tabelle oder View nicht vorhanden\nJob \"TEST\".\"SYS_IMPORT_TABLE_01\" mit 1 Fehler(n) um 18:39:29 abgeschlossen\n</code></pre>\n\n<p>Export with remap_table. Failed. ORA-31693 and ORA-00942, again. :(</p>\n\n<pre><code>SQL&gt; host impdp test/test tables=foo remap_table=foo:foo2 directory=data_pump_dir content=data_only\n\nImport: Release 11.1.0.6.0 - 64bit Production on Donnerstag, 08 November, 2012 18:40:14\n\nCopyright (c) 2003, 2007, Oracle.  All rights reserved.\n\nAngemeldet bei: Oracle Database 11g Enterprise Edition Release 11.1.0.6.0 - 64bit Production\nWith the Partitioning, OLAP, Data Mining and Real Application Testing options\nMaster-Tabelle \"TEST\".\"SYS_IMPORT_TABLE_01\" erfolgreich geladen/entladen\n\"TEST\".\"SYS_IMPORT_TABLE_01\":  test/******** tables=foo remap_table=foo:foo2 directory=data_pump_dir content=data_only  wird gestartet\nObjekttyp TABLE_EXPORT/TABLE/TABLE_DATA wird verarbeitet\nORA-31693: Tabellendatenobjekt \"TEST\".\"FOO\" konnte nicht geladen/entladen werden und wird wegen Fehler Ã¼bersprungen:\nORA-00942: Tabelle oder View nicht vorhanden\nJob \"TEST\".\"SYS_IMPORT_TABLE_01\" mit 1 Fehler(n) um 18:40:16 abgeschlossen\n</code></pre>\n\n<p>I don't see my mistake(s). Any ideas?</p>\n"},{"tags":["oracle","oracle-apex"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13194345,"title":"Insert data into multiple tables via 1 form on Oracle Application Express","body":"<p>I need to be able to insert data into multiple Tables (artists, songs, albums, genres). I also have relational tables (artistsongs, albumsongs, songgenres) that contain the ID of the relevant table (eg. Artistsongs = Artistid, songid). </p>\n\n<p>How do I go about creating a trigger/sequence/function/package to get the data from a form into the relevant tables automatically and so they all link up correctly.</p>\n\n<p>Apologies about the Vagueness however I am stumped as to know where to start.</p>\n\n<p>I am using Oracle XE as the Database, with Oracle Application Express as the front End application.</p>\n\n<p>Any answers would be extremely Helpful.</p>\n"},{"tags":["c#","oracle","gac","odp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13294206,"title":"How to remap app.config for assembly Oracle.DataAccess from Version '2.112.2.0' to '2.112.3.0'","body":"<p>I am new to C#.</p>\n\n<p>I wrote a C# console application which uses ODP to connect with Oracle database using Oracle.DataAccess.Client namespace. My dev machine is using Oracle.DataAccess ver 2.112.2.0 and the dev server is also using Oracle.DataAccess ver 2.112.2.0 and the program works fine. The prod server using a higher version of Oracle.DataAccess ver 2.112.3.0 and the program does not run and I get the following exception.</p>\n\n<pre><code>Unhandled Exception: System.IO.FileLoadException: Could not load file or assembly 'Oracle.DataAccess, Version=2.112.2.0, Culture=neutral, PublicKeyToken=89b483f\n429c47342' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)\nFile name: 'Oracle.DataAccess, Version=2.112.2.0, Culture=neutral, PublicKeyToken=89b483f429c47342'\n   at OPSegmentTDs.Programu.Main(String[] args)\n\n\nI tried installing ODAC for Oracle client 11.2.0.3.0 on my dev machine and added the higher ver of Oracle.DataAccess reference 2.112.3.0 in my application and when I built it I got this warning but the program built successfully.\n\nConsider app.config remapping of assembly \"Oracle.DataAccess, Culture=neutral, PublicKeyToken=89b483f429c47342\" from Version \"2.112.2.0\" [] to Version \"2.112.3.0\" [C:\\Oracle\\OraODP1123\\product\\11.2.0\\client_2\\ODP.NET\\bin\\2.x\\Oracle.DataAccess.dll] to solve conflict and get rid of warning.\nc:\\WINDOWS\\Microsoft.NET\\Framework\\v3.5\\Microsoft.Common.targets : warning MSB3247: Found conflicts between different versions of the same dependent assembly.\nC:\\WINDOWS\\Microsoft.NET\\Framework\\v3.5\\Csc.exe /noconfig /nowarn:1701,1702 /platform:AnyCPU /errorreport:prompt /warn:4 /define:DEBUG;TRACE /reference:C:\\Work\\Build\\GOLD\\GIS2002\\GISLib\\bin\\Debug\\GIS.dll /reference:C:\\Work\\Build\\09072012\\Linde.Niche.DB\\bin\\Debug\\Linde.Niche.DB.dll /reference:C:\\Work\\Build\\09072012\\Linde.Niche.DB.OP\\bin\\Debug\\Linde.Niche.DB.OP.dll /reference:C:\\Work\\Build\\09072012\\Linde.Niche\\bin\\Debug\\Linde.Niche.dll /reference:C:\\Work\\Build\\09072012\\OPLib\\OPLib\\bin\\Debug\\OPLib.dll /reference:C:\\Oracle\\OraODP1123\\product\\11.2.0\\client_2\\ODP.NET\\bin\\2.x\\Oracle.DataAccess.dll /reference:\"c:\\Program Files\\Reference Assemblies\\Microsoft\\Framework\\v3.5\\System.Core.dll\" /reference:\"c:\\Program Files\\Reference Assemblies\\Microsoft\\Framework\\v3.5\\System.Data.DataSetExtensions.dll\" /reference:C:\\WINDOWS\\Microsoft.NET\\Framework\\v2.0.50727\\System.Data.dll /reference:C:\\WINDOWS\\Microsoft.NET\\Framework\\v2.0.50727\\System.dll /reference:C:\\WINDOWS\\Microsoft.NET\\Framework\\v2.0.50727\\System.Xml.dll /reference:\"c:\\Program Files\\Reference Assemblies\\Microsoft\\Framework\\v3.5\\System.Xml.Linq.dll\" /debug+ /debug:full /filealign:512 /optimize- /out:obj\\Debug\\OPSegmentTDs.exe /target:exe Program.cs Properties\\AssemblyInfo.cs\n</code></pre>\n\n<p>When I tried running the new build on my prod server the application is crashing with the same error</p>\n\n<pre><code>Unhandled Exception: System.IO.FileLoadException: Could not load file or assembly 'Oracle.DataAccess, Version=2.112.2.0, Culture=neutral, PublicKeyToken=89b483f\n429c47342' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)\nFile name: 'Oracle.DataAccess, Version=2.112.2.0, Culture=neutral, PublicKeyToken=89b483f429c47342'\n   at OPSegmentTDs.Programu.Main(String[] args)\n</code></pre>\n"},{"tags":["oracle","nhibernate","paging","rownum"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13292211,"title":"Oracle 10g paging returns wrong resultset with 'rownum' and NHibernate","body":"<p>Currently I encountered some strange behaviour in our application when paging data using Oracle 10g and NHibernate.</p>\n\n<p>I have a table with 20 rows and I want to show 10 rows per site in a list, so my list has 2 pages.</p>\n\n<p>Using NHibernate i'm setting for the first page q<code>uery.SetMaxResults(10).SetFirstResult(0)</code>,\nand for the second page <code>query.SetMaxResults(10).SetFirstResult(10)</code>.</p>\n\n<p>Following SQL will be created for first page:</p>\n\n<pre><code>SELECT * FROM table WHERE rownum &lt;= 10;\n</code></pre>\n\n<p>Following SQL will be created for second page:</p>\n\n<pre><code>SELECT row_.*, rownum rownum_ \nFROM \n(\n    SELECT * \n    FROM table\n ) row_ \n WHERE rownum &lt;= 20 WHERE rownum_ &gt; 10;\n</code></pre>\n\n<p>First query returns the first 10 rows correctly, while the second query returns only 4 new rows and 6 rows that are already in \"page 1\". So 6 rows are completely missing.</p>\n\n<p>So, I think, What the heck?</p>\n"},{"tags":["xml","oracle","plsql","xml-parsing","xml-schema"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":76,"score":2,"question_id":13223246,"title":"Can Oracle validate XML using an XSD schema on the local file system?","body":"<p>I would like to ask a question about XML document validation against its corresponding XML schema(s) and I would appreciate if you could kindly give me a hand. Actually, I've just started learning about XML schemas (I'm totally a beginner). I've purchased the book \"Definitive XML Schema\" written by Priscilla Walmsley (2nd Edition) which presents XML Schema 1.1 (which I believe is the most recent version).</p>\n\n<p>Now the problem is that in all examples and exercices of the book, the namespaces and location of the schema files are given using a web URL.</p>\n\n<p>Here is an example of the book:</p>\n\n<p>This is the schema</p>\n\n<pre><code>&lt;xs:schema  xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\n            targetNamespace=\"http://datypic.com/prod\"\n            xmlns:prod=\"http://datypic.com/prod\"&gt;\n\n    &lt;xs:element name=\"product\" type=\"prod:ProductType\"/&gt;\n    &lt;xs:complexType name=\"ProductType\"&gt;\n        &lt;xs:sequence&gt;\n            &lt;xs:element name=\"number\" type=\"xs:integer\"/&gt;\n            &lt;xs:element name=\"size\" type=\"prod:SizeType\"/&gt;\n        &lt;/xs:sequence&gt;\n        &lt;xs:attribute name=\"effDate\" type=\"xs:date\"/&gt;\n    &lt;/xs:complexType&gt;\n    &lt;xs:simpleType name=\"SizeType\"&gt;\n        &lt;xs:restriction base=\"xs:integer\"&gt;\n            &lt;xs:minInclusive value=\"2\"/&gt;\n            &lt;xs:maxInclusive value=\"18\"/&gt;\n        &lt;/xs:restriction&gt;\n    &lt;/xs:simpleType&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n\n<p>And the XML content to be validated against the above mentioned is this</p>\n\n<pre><code>&lt;prod:product xmlns:prod=\"http://datypic.com/prod\" \n          xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n          xsi:schemaLocation=\"http://datypic.com/prod prod.xsd\"\n          effDate=\"2011-04-12\"&gt;\n    &lt;number&gt;557&lt;/number&gt;\n    &lt;size&gt;10&lt;/size&gt;\n&lt;/prod:product&gt;\n</code></pre>\n\n<p>Obviously, [http://datypic.com/prod] is a site maintained by the author, so I cannot add or DELETE any file on this site for my exercices while I'm reading this book. As a result I need to put both XML and XSD documents on my local hard drive (I'm using Linux Fedora Core 17 X86_64). So what I did, was to put the content of the schema in a file named for example '<strong>Example-01.xsd</strong>' and the XML content in a file named '<strong>Example-01.xml</strong>'. </p>\n\n<p>I use oracle PL/SQL package DBMS_XMLSCHEMA (Enterprise Edition 11.2.0.1.0) in order to first register the schema and then call the validate method of XMLType object in order to validate my XML document against the schema, similar to the following link:</p>\n\n<p><a href=\"https://forums.oracle.com/forums/thread.jspa?messageID=2462207\" rel=\"nofollow\">https://forums.oracle.com/forums/thread.jspa?messageID=2462207</a></p>\n\n<p>I have created a directory (by CREATE DIRECTORY) statement in oracle : </p>\n\n<p>/home/train/Documents/myutl_file_dir/</p>\n\n<p>Where I put both my XML &amp; XSD documents. Here is precisely how I changed the above mentioned XML content in order to refer to XSD locally</p>\n\n<pre><code>&lt;prod:product xmlns:prod=\"http://datypic.com/prod\" \n              xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n              xsi:schemaLocation=\"http://datypic.com/prod file:///home/train/Documents/myutl_file_dir/Example-01.xsd\"\n               effDate=\"2011-04-12\"&gt;\n    &lt;number&gt;557&lt;/number&gt;\n    &lt;size&gt;10&lt;/size&gt;\n&lt;/prod:product&gt;\n</code></pre>\n\n<p>So if you compare the new XML content with the above mentioned example, the only thing that I added was <strong>file:///home/train/Documents/myutl_file_dir/Example-01.xsd</strong> at the end of the value of <strong>xsi:schemaLocation</strong> in order to refer to the local hard drive. I found this method, here:</p>\n\n<p><a href=\"http://lists.w3.org/Archives/Public/xmlschema-dev/2001Dec/0161.html\" rel=\"nofollow\">http://lists.w3.org/Archives/Public/xmlschema-dev/2001Dec/0161.html</a></p>\n\n<p>Now, the problem is that it doesn't work. When I run my script in order to validate the document by calling the schemaValidate() method of the XMLType object, here is oracle error message:</p>\n\n<pre><code>BEGIN\n*\nERROR at line 1:\nORA-19030: Method invalid for non-schema based XML Documents.\nORA-06512: at \"SYS.XMLTYPE\", line 354\nORA-06512: at \"TRAIN2012.ZXML_PKG\", line 176\nORA-06512: at line 2\n</code></pre>\n\n<p>What I understand from the error message '<strong>Method invalid for non-schema based XML Documents'</strong> is that oracle has simply ignored the filepath that I defined for schema file and it considers that there has not been any schema declared for this XML document.</p>\n\n<p>Any idea? How can I deal with this problem?</p>\n\n<p>Thanks in advance,</p>\n\n<p>Dariyoosh</p>\n"},{"tags":["sql","oracle","collections","user-defined-types"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":26,"score":3,"question_id":13292658,"title":"Get information about collection element type","body":"<p>I have two user types:</p>\n\n<pre><code>create type TEST_TYPE_WITH_CHAR as table of varchar2(100 char);\ncreate type TEST_TYPE_WITH_BYTE as table of varchar2(100 byte);\n</code></pre>\n\n<p>How to determine what type contains char, and which byte?</p>\n\n<p>View <code>SYS.USER_COLL_TYPES</code> does not provide such information. <a href=\"http://sqlfiddle.com/#!4/c92b2/2/0\" rel=\"nofollow\">sqlfiddle</a>.</p>\n"},{"tags":["oracle","tsql","plsql"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":404,"score":2,"question_id":9474513,"title":"Converting T-SQL to PL/SQL","body":"<p>How can I convert the following T-SQL Statement to PL/SQL</p>\n\n<pre><code>set @disbursement_no = (select isnull(max(convert(numeric, right(DV_NO, 6))), 0) + 1\n            from CD_T_DV_HDR where year(DATE_DV) = year(getdate()))\n</code></pre>\n\n<p>The data type of <code>DV_NO</code> is varchar and <code>Date_Dv</code> is date.</p>\n\n<p>I'm really new to PL/SQL, and I'm having a hard time to convert my SQL statement to  PL/SQL. I Hope you can help me.</p>\n"},{"tags":["oracle","plsql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":13199751,"title":"Convert from raw numbers to IPV4 or IPV6","body":"<p>Any source for an Oracle function that will convert from raw numbers to IPV4 or IPV6?</p>\n\n<pre><code>CREATE or replace FUNCTION inttoip(ip_address IN INTEGER) RETURN VARCHAR2 IS\nv8 varchar2(8);\nip_str varchar2(16) default null;\nBEGIN\nif ip_address is not null then\n-- 1. convert the integer into hexadecimal representation\nv8 := LPAD(TO_CHAR(ip_address, 'FMXXXXXXXX'),8,'0');\n-- 2. convert each XX portion back into decimal\nip_str := to_number(substr(v8,1,2),'XX')\n|| '.' || to_number(substr(v8,3,2),'XX')\n|| '.' || to_number(substr(v8,5,2),'XX')\n|| '.' || to_number(substr(v8,7,2),'XX');\nend if;\nreturn ip_str;\nEND inttoip;\n</code></pre>\n"},{"tags":["oracle","triggers","sequence"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":416,"score":0,"question_id":9077897,"title":"Error: ORA-02289 (2: 10): PL/SQL: ORA-02289","body":"<p>I am writing a Trigger for Toad. But I am facing an error like</p>\n\n<pre><code>\"[Error] ORA-02289 (2: 10): PL/SQL: ORA-02289: sequence does not exist\". \n\nCREATE OR REPLACE TRIGGER ACTSINFO.USERMASTER_INSERT\nBEFORE INSERT\nON ACTSINFO.USERMASTER\nREFERENCING NEW AS New OLD AS Old\nFOR EACH ROW\nBEGIN\n  SELECT USERMASTER_ID_SEQ.NEXTVAL INTO :NEW.ID FROM dual;\nEND;\n</code></pre>\n\n<p>Can anyone help me? \nI am newcomer to toad.</p>\n"},{"tags":["sql","regex","oracle","oracle11g","check-constraints"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1030,"score":0,"question_id":7621568,"title":"Oracle 11g - Check constraint with RegEx","body":"<p>I'm using Oracle 11g, and trying to create a table define constraints on the creation.</p>\n\n<p>I was trying to add check constraint to validate some information (like e-mail address, phone number, etc...)</p>\n\n<p>Is there something in Oracle 11g that would allow me to do something like this?</p>\n\n<pre><code>constraint CK_CONSTRAINT_NAME check (EMAIL like 'REGEX')\n</code></pre>\n\n<p>The regEx I wanted to use (grabbed from regexLib) is:</p>\n\n<pre><code>^[a-zA-Z][a-zA-Z0-9_\\.\\-]+@([a-zA-Z0-9-]{2,}\\.)+([a-zA-Z]{2,4}|[a-zA-Z]{2}\\.[a-zA-Z]{2})$\n</code></pre>\n\n<p>I think Oracle 11g (correct me if I'm wrong) doesn't support this format for RegEx...</p>\n\n<p>I've seen methods using REGEX_LIKE, but it seems to only work in <code>WHERE</code> clauses.</p>\n\n<p>I'd like to keep it as a check constraint and not a trigger or an external function/script.</p>\n\n<p>Also, I've read in other threads here, someone saying RegEx' are not a good way of verifying e-mail address format and such information. No reason was given in the comment, and I'd like to know why, if a reason there is!</p>\n\n<p>Thanks for your inputs and your help.</p>\n\n<p>much appreciated.</p>\n"},{"tags":["java","oracle","jboss"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13291749,"title":"How to define an Oracle JBoss DataSource to be limited to read-only?","body":"<p><strong>Is there any way to define a true read-only datasource using JBoss and Oracle?</strong></p>\n\n<p>I'd like to stick to the single default schema user but limit certain parts of the application to read-only to avoid SQL injection issues at all. If there is no such way in JBoss I'll have to create another user with limited privileges in Oracle.</p>\n"},{"tags":["performance","oracle","jpa","eclipselink","jpql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":113,"score":0,"question_id":12641891,"title":"Fetch dates (by month or year) stored in TIMESTAMP using JPA","body":"<p>I am facing a problem and I would like you to help me.</p>\n\n<p>It turns out I have one table in my Oracle 11g database where I store failures of one electronic device. The table definition is following:</p>\n\n<pre><code>CREATE TABLE failure\n( failure_id NUMERIC NOT NULL\n, fecha TIMESTAMP NOT NULL\n, module_id NUMERIC NOT NULL\n, code NUMERIC\n, PRIMARY KEY(failure_id)\n);\n</code></pre>\n\n<p><em>Where 'fecha' means 'date'.</em></p>\n\n<p>I need to fetch failures by YEAR or by MONTH for one specific module but I can't. My ORM maps the TIMESTAMP type to java.sql.Date but I don't know how to compare the month in the JPQL sentence. I have tried to use ORACLE functions with native queries but I front with another issue: to cast the results.\nI am using JPA 2.0 with Eclipselink 2.3.2.</p>\n\n<p><strong>My doubts are:</strong></p>\n\n<p>Can I use Oracle functions with this version of Eclipselink library? My experience say no.</p>\n\n<pre><code>Query query = entityManager.createQuery(\"SELECT f FROM Failure f \"\n            + \"WHERE EXTRACT(YEAR FROM f.fecha) = ?1 \"\n            + \"AND f.moduleId.moduleId = ?2\");\n    query.setParameter(1, year);\n    query.setParameter(2, idModule);\n</code></pre>\n\n<p>I get this error: <code>Unexpected token [(]</code></p>\n\n<p>Can I use Eclipselink functions? My experience say no.</p>\n\n<pre><code>Query query = entityManager.createQuery(\"SELECT f FROM Failure f \"\n            + \"WHERE EXTRACT('YEAR', f.fecha) = ?1 \"\n            + \"AND f.moduleId.moduleId = ?2\");\n    query.setParameter(1, year);\n    query.setParameter(2, idModule);\n</code></pre>\n\n<p>Same error.</p>\n\n<p>Do you know a simple way to fetch this data using only one query?\nI know I can fetch one module and then check failures with loops but I think it is not the best performing solution.</p>\n\n<p>Thanks.</p>\n\n<p><strong>My sources:</strong></p>\n\n<ul>\n<li>Eclipselink JPA functions <a href=\"http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Support_for_Native_Database_Functions#Functions\" rel=\"nofollow\">link</a></li>\n<li>Eclipselink Query Enhancements <a href=\"http://wiki.eclipse.org/EclipseLink/Release/2.1.0/JPAQueryEnhancements\" rel=\"nofollow\">link</a></li>\n</ul>\n"},{"tags":["oracle","query-optimization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13291000,"title":"Will the execution of DML statements through SQL/AUTO trace be autocommitted?","body":"<p>When we check the Autotrace or SQL trace on any sql statement, it first executes the statement.</p>\n\n<p>I want to know when it executes any DML statement, it will be autocommitted or we need to commit or rollback the statement?</p>\n"},{"tags":["oracle","binding","jboss","datasource"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13289762,"title":"JBoss Datasource constantly binding and unbinding every 5 seconds","body":"<p>From my jboss EAP 5.1 logs I can see that the datasource is continually binding and then unbinding every 5 seconds or so... Would anyone have any idea why? I've attached my oracle-ds.xml snippet for the datasource and also the logs. </p>\n\n<pre><code>&lt;local-tx-datasource&gt;\n&lt;jndi-name&gt;datasource&lt;/jndi-name&gt;\n&lt;connection-url&gt;jdbc:oracle:thin:@myDB:1521:SID&lt;/connection-url&gt;\n&lt;driver-class&gt;oracle.jdbc.driver.OracleDriver&lt;/driver-class&gt;\n&lt;user-name&gt;username&lt;/user-name&gt;\n&lt;password&gt;userpass&lt;/password&gt;\n&lt;exception-sorter-class-name&gt;org.jboss.resource.adapter.jdbc.vendor.OracleExceptionSorter&lt;/exception-sorter-class-name&gt;\n&lt;min-pool-size&gt;5&lt;/min-pool-size&gt;\n&lt;max-pool-size&gt;100&lt;/max-pool-size&gt;\n&lt;set-tx-query-timeout/&gt;\n&lt;query-timeout&gt;300&lt;/query-timeout&gt;\n&lt;idle-timeout-minutes&gt;15&lt;/idle-timeout-minutes&gt;\n&lt;metadata&gt;\n    &lt;type-mapping&gt;Oracle10g&lt;/type-mapping&gt;\n&lt;/metadata&gt;\n</code></pre>\n\n<p></p>\n\n<p>2012-11-08 08:15:46,487 INFO  [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) Bound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' to JNDI name 'java:datasource'\n2012-11-08 08:15:51,657 INFO  [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) Unbound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' from JNDI name 'java:datasource\n'\n2012-11-08 08:15:51,826 INFO  [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) Bound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' to JNDI name 'java:datasource'\n2012-11-08 08:15:56,996 INFO  [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) Unbound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' from JNDI name 'java:datasource\n'\n2012-11-08 08:15:57,174 INFO  [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) Bound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' to JNDI name 'java:datasource'\n2012-11-08 08:16:02,424 INFO  [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) Unbound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' from JNDI name 'java:datasource\n'\n2012-11-08 08:16:02,591 INFO  [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) Bound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' to JNDI name 'java:datasource'\n2012-11-08 08:16:07,758 INFO  [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) Unbound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' from JNDI name 'java:datasource\n'\n2012-11-08 08:16:08,056 INFO  [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) Bound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' to JNDI name 'java:datasource'\n2012-11-08 08:16:13,226 INFO  [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) Unbound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' from JNDI name 'java:datasource\n'\n2012-11-08 08:16:13,394 INFO  [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) Bound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' to JNDI name 'java:datasource'\n2012-11-08 08:16:18,668 INFO  [org.jboss.resource.connectionmanager.ConnectionFactoryBindingService] (HDScanner) Unbound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=datasource' from JNDI name 'java:datasource\n'</p>\n\n<p>Thanks,\nMark.</p>\n"},{"tags":["oracle","plsql","oracle10g","execute-immediate"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13286570,"title":"How to Delete/Insert from different Tables and Views","body":"<p>I've got a wicked problem. In Oracle 10 there are pairs of Views and Tables where something like that is done over and over again:</p>\n\n<pre><code>proc_log('DELETE 1');\nDELETE FROM table_1;\nproc_log('INSERT 1');\nINSERT INTO table_1 SELECT * FROM view_1;\nproc_log('FINISH 1');\n</code></pre>\n\n<p>And the same with View/Table 2 and 3 and 4 and 5... and 36.</p>\n\n<p>I would like to do something like this:</p>\n\n<pre><code>PROCEDURE proc_import(p_table VARCHAR2) IS\nBEGIN\n    proc_log('DELETE ' || p_table);\n    EXECUTE IMMEDIATE 'DELETE FROM table_' || p_table;\n    proc_log('INSERT ' || p_table);\n    EXECUTE IMMEDIATE 'INSERT INTO table_' || p_table || ' SELECT * FROM view_' || p_table;\n    proc_log('FINISH || p_table);\n    COMMIT;\nEND;\n</code></pre>\n\n<p>And then call the function for all 36 pairs.</p>\n\n<p>Not surprisingly, this stuff is about 50% slower than the hard coded one.</p>\n\n<p>My question: Has anyone an idea on how to make it faster. Or even better, how can I make this stuff different but similarly elegant?</p>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>The whole stuff is built like this:</p>\n\n<blockquote>\n<pre><code>CREATE OR REPLACE PACKAGE PKG_IMPORT IS\n  PROCEDURE proc_log IS BEGIN [funky not important stuff] END;\n\n  PROCEDURE proc_import IS\n  BEGIN\n      proc_import_table('1', TRUE);\n      proc_import_table('2');\n      proc_import_table('3');\n      proc_import_table('4', TRUE);\n      proc_import_table('5');\n      ...\n      proc_import_table('36');\n  END;\n\n  PROCEDURE proc_import(p_table VARCHAR2, p_whole BOOLEAN DEFAULT FALSE) IS\n  BEGIN\n    proc_log('DELETE ' || p_table);\n    IF p_whole THEN\n      EXECUTE IMMEDIATE 'DELETE FROM table_' || p_table;\n    ELSE\n      EXECUTE IMMEDIATE 'DELETE FROM table_' || p_table || ' WHERE business_logic_applies';\n    END IF;\n    proc_log('INSERT ' || p_table);\n    EXECUTE IMMEDIATE 'INSERT INTO table_' || p_table || ' SELECT * FROM view_' || p_table;\n    proc_log('FINISH || p_table);\n    COMMIT;\n  END;\n END PKG_IMPORT;\n</code></pre>\n</blockquote>\n\n<p>The Procedure proc_import is called by a job once a night. The reason why all the proc_import_table calls are hard coded is that some of the tables need additional import information.</p>\n\n<p>I'm afraid i can't copy/paste the original code in here because i don't know if i am allowed to do. Hope this helps...</p>\n"},{"tags":["database","oracle","rdbms","oracle-apps"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13289180,"title":"Oracle e business suite - UI label to database field mapping?","body":"<p>I am looking for some sort of a UI label:database field mapping\nthat tells me which UI field corresponds to which database column in the backend.</p>\n\n<p>I am pretty sure that something like this must be existing in the Oracle e business suite... but my search has turned up nothing so far.</p>\n\n<p>I would appreciate any help or pointers in this regard.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["sql","oracle","join","filter","count"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":13290105,"title":"Selecting top results from SQL Count query, including table join - Oracle","body":"<p>I have this query currently, which selects the top \"number of pickups\" in descending order. I need to filter only the top 10 rows/highest numbers though. How can I do this? </p>\n\n<p>I have tried adding 'WHERE ROWNUM &lt;= 10' at the bottom, to no avail.</p>\n\n<pre><code>SELECT customer.company_name, COUNT (item.pickup_reference) as \"Number of Pickups\" \nFROM customer\nJOIN item ON (customer.reference_no=item.pickup_reference) \nGROUP BY customer.company_name, item.pickup_reference\nORDER BY COUNT (customer.company_name) DESC;\n</code></pre>\n\n<p>Thanks for any help!</p>\n"},{"tags":["oracle","gui","oracle10g","report"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1754,"score":0,"question_id":3178698,"title":"increasing the page width in oracle reports builder","body":"<p>I am designing a new report using oracle reports builder that comes with 10g. I have many columns to be inserted horizontally. But I couldn't increase the page width of the body section beyond 8.5 inches. But I can see the page width of some existing reports to be more than 16 inches. How do I increase the page width?. I have been googling for an hour but couldn't find anything useful. I have tried tinkering with the settings at,</p>\n\n<blockquote>\n  <p>File->Page Size</p>\n  \n  <p>Tools->Options->Margin</p>\n  \n  <p>Edit->Preferences</p>\n</blockquote>\n\n<p>but no gain.</p>\n\n<p>So any help would be much welcome.\nThanks.</p>\n"},{"tags":["sql","oracle","execution"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":12687371,"title":"Slow view execution using ADF and OracleSQL","body":"<p>I have an unusual problem when trying to execute a view object in a Oracle database. The query itself executes using Toad for Oracle within 10 seconds, while executing the same query in a view object takes more than a minute. I am using JDeveloper 10.1.3.3.0.4157 with ADF, and am connecting to an 10g Oracle database.</p>\n\n<p>What I found is that while the execution is taking place, the database server is constantly being \"pinged\" with 128 bytes of data (I've done this using Wireshark). This, in turn, clogs the connection and is the reason it takes long for the data to get to the application. I've tested this theory with session tracing, and it turns out the query itself executes in the same time-frame as the one from Toad.</p>\n\n<p>I suppose the problem is somewhere in the database driver, but since I cannot debug it, I'm left empty handed.</p>\n\n<p>Any suggestion would be appreciated!</p>\n\n<p>MORE INFO:</p>\n\n<p>The query in question is somewhat large. It is also built in run-time and is variable (however, the number, name and type of the attributes is constant). The interesting part is that when the query is small(er), the execution time falls to the one present in the Toad execution.</p>\n\n<p>A similar \"pinging\" effect was detected in another view that belongs to the same application module, but testing implied that this was not a problem with the AM configuration, since it's identical to all the other ones, and they are working fine. Plus, other views in the same AM as the query in question do not show any signs of the same problem.</p>\n\n<p>I've been playing with the view Tuning settings, but with no difference to the execution time.</p>\n"},{"tags":["sql","oracle","oracle10g"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":24,"score":1,"question_id":13264109,"title":"Oracle:Set default value for number column","body":"<p>How can we set default value for a number typed column has '00'?I tried this but it still saved it has '0',I need to do this.</p>\n\n<pre><code>//alter table table_name add column column1 default '00';\n</code></pre>\n\n<p>Please suggest a way for me.</p>\n"},{"tags":["oracle","oracle10g","materialized-views","connect-by","hierarchical-query"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13286800,"title":"How to create a hierarchical query as a materilized view with refresh on commit in oracle","body":"<p>Could anyone please tell me if there is a possibility to create a hierarchical query in oracle 10g as a materialized view with REFRESH ON COMMIT?</p>\n\n<p>I tried using CONNECT_BY but this doesn't work with REFRESH ON COMMIT.</p>\n\n<p>Are there any other possibilities to get the view automatically refreshed when the underlying data changes?</p>\n\n<p>Or may be there is an alternative to CONNECT_BY which works with REFRESH ON COMMIT?</p>\n\n<p>Thanks in advance for any hints or help.</p>\n"},{"tags":["sql","oracle","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13288132,"title":"SQL movie database querying","body":"<p>I'm having trouble solving the following SQL requests:</p>\n\n<ol>\n<li><p>Give the names of the actors that have acted in more films than 'sara allgood' and who have acted in films that won the 'cannes film festival'. Also, give the filmname.</p></li>\n<li><p>Get the percentage of movies who won awards out of all movies produced between the years 1970 and 1990.</p></li>\n</ol>\n\n<p>There are several tables but I'm assuming that only 4 are needed: \n'films','remakes','casts', 'awtypes'</p>\n\n<ul>\n<li><p>'films' attributes: filmid, filmname, year, director, studio, award </p></li>\n<li><p>'remakes' attributes: filmid, title, year, priorfilm, prioryear</p></li>\n<li><p>'casts' attributes: filmid, filmname, actor, award(10)</p></li>\n<li><p>'awtypes' attributes: award(10), org(100), country, colloquial(50), year</p></li>\n</ul>\n\n<p>It's a bit unclear to me how to match the award to the 'Cannes film festival' in the first query since the award field is only 10 characters meaning it is a reference to the awtypes table but I don't know which field in the awtypes table contains the name of the award and I don't have access to the database at the moment so it's either org or colloquial.</p>\n\n<p>As for the second I don't know how I could compute the percentage but it seems that it should be solved using a union operator for the movies produced between 1970 and 1990 and the films that have won an award (I don't know how to place a condition for having at least one award). </p>\n"},{"tags":["java","sql","oracle","java-ee","ansi"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":2,"view_count":27,"score":-1,"question_id":13287890,"title":"Java code equivalent to oracle feature START WITH....CONNECT BY","body":"<p>I am working on a project which uses oracle database. I needed to make a hierarchial tree structure from a self-referencing table similar to the well known 'employee' sample table in the database,which has a relation between manager and emp code. But now i need to do the same using proper sql specification not specific to any particular database. Need to know how to write a java code doing the same thing from the data received after querying from the database just the columns from the table</p>\n"},{"tags":["sql","oracle","to-date","to-char"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13288169,"title":"How can I convert a complex sysdate + something else with a to_date function?","body":"<p>Bit stuck here. Say I run the following SQL query:</p>\n\n<pre><code>select to_char(sysdate, 'DD/MON/YY') || ' 15:32:00' from dual;\n</code></pre>\n\n<p>The result gives me this:</p>\n\n<pre><code>08/NOV/12 15:32:00\n</code></pre>\n\n<p>Now I want to take that result and use it in a to_date function (long story as to why, but I'll go into detail in a sec):</p>\n\n<pre><code>select to_date((to_char(sysdate, 'DD/MON/YY') || ' 15:32:00'), 'DD/MON/YY HH24:MI:SS') from dual;\n</code></pre>\n\n<p>I was expecting the result to be the same as the previous one, except it isn't. Instead it gives me this:</p>\n\n<pre><code>08/NOV/12\n</code></pre>\n\n<p>Question is this: Is there a way I can use a concatenation of a to_char(sysdate, 'DD/MON/YY') and any combo of HH24:MI:SS in a to_date?</p>\n\n<p>Additional detail that may or may not be of any additional use:\nReason I need to do this is because I was provided a query that has a table with an SLA time. The format is just a time in HH24:MI, however it's not a DATETIME type (I suspect it's a VARCHAR, but can't tell for sure as it's likely a view or function of some sort that I cannot dissect. Partially due to me not knowing how to and partially to me not having the necessary access due to my DB user.</p>\n\n<p>EDIT: On reading the above again I realized I left out some additional detail (though this does not relate to my question at all I think):\nI want to take today's date (DD/MON/YY), combine that with the SLA time of HH:MI, combine that with ':00' for :SS, convert the whole thing to a date, then do a comparison between the resultant abomination and the finish time for each row returned. If the finish time is bigger/ newer/ later than my combination-and-conversion-deluxe, then return something specific, in not, return something like \"All OK\". Not sure if that makes sense or not, but in summary, I want to get something that I can use to compare to another DATETIME type, so I think I need to somehow get the SLA time converted to a DATETIME type as well.</p>\n\n<p>Any help on this will be greatly appreciated.</p>\n"},{"tags":["java","oracle","stored-procedures","metadata"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":702,"score":1,"question_id":3854192,"title":"Java: Read metadata from procedure","body":"<p>I am looking for a way to get metadata from an Oracle store procedure, such as input/output parameters and their types.</p>\n\n<p>I did try <code>DESC</code> but it is not working:</p>\n\n<pre><code>stmt = conn.createStatement();\nResultSet rs1 = stmt.executeQuery(\"desc pack.procname\");\nwhile ( rs1.next() ) { \nSystem.out.println(rs1.getString(1));\n}\n</code></pre>\n\n<p>Any ideas on what approach to use to get the input/output parameters?</p>\n\n<p>Thanx for your time.</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7127,"score":0,"question_id":10786782,"title":"ORA-12514 TNS:listener does not currently know of service requested in connect descriptor","body":"<p>We have an application running locally which two days worked fine and now we get the: \nTNS:listener does not currently know of service requested in connect descriptor error. </p>\n\n<p>I've tested the connection using TNSPing which resolved correctly and\nTried SQLPlus to try connecting, which failed with the same error. (i.e. Sqlplus username/passowrd@addressname[or host name]\nThe TNS Listener on the server is running. \nOracle itself on the server is running. </p>\n\n<p>We don't know of any changes that were made to this environment. \nAnything else we can test to figure this one out? </p>\n\n<p>Thanks,\nJacques</p>\n"},{"tags":["oracle","triggers","history"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13285876,"title":"Creating history trigger","body":"<p>I'm trying to write a history trigger but can't get it to work.</p>\n\n<p>here is the code :</p>\n\n<pre><code>create or replace\nTRIGGER abc BEFORE\n    UPDATE ON abc REFERENCING OLD AS oldValue NEW AS newValue\n    FOR EACH ROW \n    BEGIN\n        INSERT\n    INTO history\n        (\n            id,\n            record_id,\n            col_name,\n            old_val,\n            new_val\n        )\n        VALUES\n        (\n            MF_SEQ_HISTORY.nextval,\n            :oldvalue.id,\n            :oldvalue.column_name,\n            :oldvalue.object_value,\n            :newvalue.object_value\n        );\n        END;\n</code></pre>\n\n<p>as you can see , i'm trying to save the column name that has been updated ,the value and the new value.</p>\n\n<p>the errors i'm getting is :</p>\n\n<pre><code>Error(19,13): PLS-00049: bad bind variable 'OLDVALUE.COLUMN_NAME'\nError(20,13): PLS-00049: bad bind variable 'OLDVALUE.OBJECT_VALUE'\nError(21,13): PLS-00049: bad bind variable 'NEWVALUE.OBJECT_VALUE'\n</code></pre>\n\n<p>Any help will be appreciated.</p>\n\n<p>Thanks.</p>\n"},{"tags":["oracle","variables","plsql","record"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":49,"score":3,"question_id":13287038,"title":"Oracle PL/SQL Variable Record Field Names","body":"<p>I have a problem with dynamic field names in a cursor. It's a bit difficult to explain, but I'll try...</p>\n\n<p>There are 3 tables:</p>\n\n<blockquote>\n  <ol>\n  <li><p>T_IN: I don't know anything about this table yet. No structure, no field names, simply nothing.</p></li>\n  <li><p>T_OUT: this is the the target table</p></li>\n  <li><p>T_KONF: This table has 2 columns:</p>\n  \n  <p>C_IN VarChar2: this column contains the field names of the table T_IN</p>\n  \n  <p>C_OUT VarChar2: this column contains the field names of the table T_OUT</p></li>\n  </ol>\n</blockquote>\n\n<p>The table T_KONF tells me, what data from wich field of the table T_IN has to go in wich field of the table T_OUT.</p>\n\n<p>Now i have a record</p>\n\n<pre><code>MyRec C_OUT%ROWTYPE;\n</code></pre>\n\n<p>and a variable with the fieldname in it</p>\n\n<pre><code>field_name VarChar2(15) := 'PRODUCT';\n</code></pre>\n\n<p>How can I set this field of the record to a value? Hardcoded it would look like this:</p>\n\n<pre><code>MyRec.PRODUCT := value;\n</code></pre>\n\n<p>But is there a way to do that dynamically?</p>\n\n<pre><code>MyRec.[field_name] := value; -- ???\n</code></pre>\n\n<p>I hope that was specific enough... Thanks</p>\n"},{"tags":["sql","oracle","pivot"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":13287102,"title":"Transformation of row and column of a database table","body":"<p>I have database table. As I further saw that the data was in a particular format. How to perform the following transformation without creating temporary table directly using query?col2 is not static field X and Y it is dynamically determined i.e no of columns is dynamic.\n<img src=\"http://i.stack.imgur.com/M05Lj.png\" alt=\"enter image description here\"></p>\n"},{"tags":["sql","mysql","sql-server","oracle"],"answer_count":5,"favorite_count":7,"up_vote_count":16,"down_vote_count":0,"view_count":2644,"score":16,"question_id":697671,"title":"Stored Procedure with optional \"WHERE\" parameters","body":"<p>I have a form where users can specify various parameters to dig some data (status, date ecc).</p>\n\n<p>I can producea query that is:\nSELECT * FROM table WHERE:\nstatus_id = 3\ndate = \nother_parameter = </p>\n\n<p>etc. Each WHERE is optional (i can select all the rows with status =3, or all the rows with date = 10/10/1980, or all the rows with status = 3 AND date = 10/10/1980 ecc.</p>\n\n<p>Given a large number of parameters, all optional, what is the best way to make up a dynamic stored procedure?</p>\n\n<p>I'm working on various DB:\nMySQL, Oracle and SQLServer.</p>\n"},{"tags":["oracle","oracle10g","flash-builder","bi-publisher"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6,"score":0,"question_id":13285586,"title":"Data is not loaded in BI Publisher flash template - Error #2032","body":"<p>I have created a simple reprot with one level of XML data, and followed all the guide lines from oracle tutorial <a href=\"http://docs.oracle.com/cd/E10383_01/doc/bip.1013/e10416/flashtemp.htm\" rel=\"nofollow\">http://docs.oracle.com/cd/E10383_01/doc/bip.1013/e10416/flashtemp.htm</a></p>\n\n<p>When I run the application from Flash Builder, it works fine, a simple data grid as in the tutorial\nBut when I upload the swf file to the flash template in publisher, it fails to run with error#2032, I've searched and searched for any clue of what is wrong! no tutorial or help was useful.</p>\n\n<p>Here is my flash builder application source code:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;mx:Application xmlns:mx=\"http://www.adobe.com/2006/mxml\" layout=\"absolute\" minWidth=\"955\" minHeight=\"600\"&gt;\n    &lt;mx:Script&gt;\n        &lt;![CDATA[\n            [Bindable]\n            public var dataXML:XML = \n                &lt;ROWSET&gt;\n                &lt;ROW&gt;\n                &lt;ACCOUNT_NUMBER&gt;123123123&lt;/ACCOUNT_NUMBER&gt;\n                &lt;CURR_CODE&gt;USD&lt;/CURR_CODE&gt;\n                &lt;INSTALLMENT_AMOUNT_LC&gt;8840&lt;/INSTALLMENT_AMOUNT_LC&gt;\n                &lt;/ROW&gt;\n                &lt;/ROWSET&gt;;\n        ]]&gt;\n    &lt;/mx:Script&gt;\n    &lt;mx:Panel left=\"10\" top=\"10\" width=\"477\" height=\"267\" layout=\"absolute\"&gt;\n        &lt;mx:DataGrid left=\"0\" right=\"1\" top=\"0\" bottom=\"10\" dataProvider=\"{dataXML.ROW}\"\n                     horizontalCenter=\"-1\"&gt;\n            &lt;mx:columns&gt;\n                &lt;mx:DataGridColumn dataField=\"ACCOUNT_NUMBER\" headerText=\"Account Number\"/&gt;\n                &lt;mx:DataGridColumn dataField=\"CURR_CODE\" headerText=\"Currency Code\"/&gt;\n                &lt;mx:DataGridColumn dataField=\"INSTALLMENT_AMOUNT_LC\" headerText=\"Instalment Amount\"/&gt;\n            &lt;/mx:columns&gt;\n        &lt;/mx:DataGrid&gt;\n    &lt;/mx:Panel&gt;\n</code></pre>\n\n<p></p>\n\n<p>I don't know whats wrong with the code! or what is causing the error, BI or the swf file.</p>\n\n<p>Can anyone help me ?</p>\n\n<p>I use Oracle 10g, and Flash builder 4.6</p>\n"},{"tags":["sql","sql-server","oracle","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":38,"score":-6,"question_id":13286424,"title":"difference between oracle sql and sql server?","body":"<p>I  want to know the difference between Oracle SQL, PL/SQL and SQL Server's T-SQL. </p>\n\n<p>Right now I'm using SQL Server (Management Studio) and I'm accessing data using SQ. </p>\n\n<p>Is Oracle's SQL different from the SQL that is used by SQL Server? </p>\n\n<p>Also what is PL/SQL, is it different from Oracle SQL?</p>\n"},{"tags":["java","sql","oracle","hql"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":73,"score":3,"question_id":13247774,"title":"stuck with the sql / hql query group by","body":"<pre><code>id          device_id   config_status   update_finished\n1           5015001     SUCCESS     11-OCT-2012\n2           5015001     SUCCESS     23-OCT-2012\n3           5015001     PENDING     23-OCT-2012\n4           5015001     PENDING     23-OCT-2012\n5           5016222     PENDING     12-OCT-2012\n6           5016222     PENDING     22-OCT-2012\n</code></pre>\n\n<p>Hi, above is my table with some example data. What I'd like to achieve is to get for each device_id last SUCCESS status (date is in update_finished field) and all PENDING statuses. From the example above the result query should have:</p>\n\n<pre><code>id          device_id   config_status   update_finished\n2           5015001     SUCCESS     23-OCT-2012\n3           5015001     PENDING     23-OCT-2012\n4           5015001     PENDING     23-OCT-2012\n5           5016222     PENDING     12-OCT-2012\n6           5016222     PENDING     22-OCT-2012\n</code></pre>\n\n<p>So that means only the last SUCCESS status by date column update_finished and all PENDING statuses for each device_id.</p>\n\n<p>Currently I'm trying to mess with GROUP BY: <code>SELECT device_id, config_status, max(update_finished) AS \"LastUpdate\"\nfrom config_status WHERE config_status = 'SUCCESS' group by device_id, config_status</code></p>\n\n<p>This returns only the last SUCCESS statuses for each device_id indeed, but it misses the PENDING statuses and it doesn't have <code>id</code> column. If I add <code>id</code> field to the GROUP BY then the grouping would be by <code>id</code> anyway.</p>\n\n<p>Could anyone help me with the proper query? Is it supposed to have subqueries also? In the end I need to have it as HQL, but I think it will be very similar to SQL.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Thanks everybody for helping me out. All these queries work but most fitted my the query provided by @Remigio because it was easiest to transform it into HQL query that returns me parametrized object, not just Object.</p>\n\n<p>Here is my working HQL query with additional fields that I have omitted in my initial example</p>\n\n<pre><code>List&lt;ConfigStatus&gt; statuses = getHibernateTemplate().find(\"select c from ConfigStatus c \" +\n                \"where (configStatus = 'SUCCESS' and updateFinished = (select max(updateFinished) from \" +\n                \"ConfigStatus c1 where c1.device.deviceId = c.device.deviceId and c1.configStatus = 'SUCCESS' and c1.configFile.configFileId = ?)) \" +\n                \"or configStatus = 'PENDING' and configFile.configFileId = ?\", new Object[] {configFileId, configFileId});\n</code></pre>\n"},{"tags":["oracle","plsql","oracle-apex"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13286421,"title":"using materialised views to fix bugs and reduce code","body":"<p>The application I'm working on has a legacy problem where 2 tables were created ADULT and CHILD in an oracle 11g dB. \nThis has led to a number of related tables that have both a field for ADULT and CHILD no FK applied. \nThe bugs have arisen where poor development has mapped relationships to the wrong  field.</p>\n\n<p>Our technical architect plans to merge the ADULT and CHILD tables in to a new ADULT_CHILD table and create materialised views in place of the tables. The plan is to also create a new id value and replace the I'd values in all associated tables so even if the plsql/apex code maps to the wrong field the data mapping will still be correct.</p>\n\n<p>The reasoning behind this solution it it does not require that we change any other code.</p>\n\n<p>My opinion is this is a fudge but I'm more a Java/.NET OO.</p>\n\n<p>What arguments can I use to convince the architect this is wrong and not a real solution. I'm concerned we are creating a more complex solution and performance will be an issue.</p>\n\n<p>Thanks for any pointers</p>\n"},{"tags":["oracle","orm","coldfusion","triggers","sequence"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13277380,"title":"Can Coldfusion ORM access an Oracle trigger","body":"<p>I have ORM setup and working with Oracle on an existing database and have been able to get inserts to work when I access the sequence but because triggers were used in the original application the sequence skips a number. </p>\n\n<p>Is there a way to get ORM to use the trigger? </p>\n\n<p>Disabling the trigger is not an option since it is used by the existing app and cannot be disabled during migration.</p>\n\n<pre><code>component persistent=\"true\" table=\"table_name\"  schema=\"schema_name\" { \n   property name=\"table_id\" column=\"table_id\" fieldtype=\"id\" generator=\"sequence\" sequence=\"schema_name.sequence_name\";\n...\n}\n</code></pre>\n"},{"tags":["perl","oracle","unix","freebsd","dbi"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":41,"score":3,"question_id":13280575,"title":"Perl script using DBI module with Oracle 8 stops processing","body":"<p>I'm having a problem with a Perl script that uses DBI module (version 1.601) connecting to Oracle 8. The OS is FreeBSD 7.0. </p>\n\n<p>The script just opens a connection, loops through a CSV file inserting data one row/line at a time, then closes the connection and exits. A cron job executes this script every 30 minutes processing any incoming CSV files. On occasion, the script stops processing midway through (no new data inserted, does not consume any more cpu time) and it becomes necessary to kill it.</p>\n\n<p>There appears to be a size threshold for the CSV file. Anything under 35000 rows, the script executes and exits ok. Otherwise it stalls and the process sits (seemingly) dormant/waiting. </p>\n\n<p>I only have remote access to Oracle8 through SQL*Plus. Checked the Oracle v$session table and see the connections for these stalled processes don't get closed, so perhaps hitting some resource limit? Running 'limits' on FreeBSD yields the following:</p>\n\n<pre><code>cputime          infinity secs\nfilesize         infinity kB\ndatasize           524288 kB\nstacksize           65536 kB\ncoredumpsize     infinity kB\nmemoryuse        infinity kB\nmemorylocked     infinity kB\nmaxprocesses         5547\nopenfiles           11095\nsbsize           infinity bytes\nvmemoryuse       infinity kB\n</code></pre>\n\n<p>I'm unsure how to proceed. How or where can I look to narrow down the problem?</p>\n\n<p>Any help is appreciated.</p>\n\n<hr>\n\n<p>Here is the script with changes to some var names and input checking code omitted:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse DBI;\nuse strict;\n\nmy $exitstatus = 0;\nmy $infile = shift;\nopen (INFILE, \"$infile\");\n\nmy $dbh = DBI-&gt;connect(\n  'dbi:Oracle:sid=mysid;host=myhostname',\n  'myusername',\n  'mypassword',\n  {\n    RaiseError =&gt; 1,\n    AutoCommit =&gt; 1\n  }\n) or die $DBI::errstr;\n\nwhile (&lt;INFILE&gt;) {\n  chomp;\n  next if (/^#.*$/ || /^$/);\n  my @columns = split /\\t/;\n  my ($var1, $var2, $var3) = @columns;\n  eval {\n    my $oProce = qq{\n      BEGIN\n        InsertStoredProc(\n        field1 =&gt; $var1,\n        field2 =&gt; $var2,\n        field3 =&gt; $var3\n        );\n      END;\n    };\n    $dbh-&gt;do( $oProce );\n  };\n  if ( $@ ) {\n    $exitstatus=1;\n    warn \"LINE: @columns\\n\";\n    warn \"Execution of stored procedure failed: $DBI::errstr\\n\";\n    warn \"################################################################################\\n\";\n  }\n}\n$dbh-&gt;disconnect;\nclose INFILE;\nexit $exitstatus;\n</code></pre>\n"},{"tags":["sql","database","oracle","database-design","oracle10g"],"answer_count":5,"favorite_count":5,"up_vote_count":5,"down_vote_count":0,"view_count":11043,"score":5,"question_id":3980462,"title":"How to compare two tables column by column in oracle","body":"<p>I have two similar tables in oracle in two different databases. \nFor example : my table name is EMPLOYEE and primary key is employee id. The same table with same columns(say 50 columns are is avlbl in two databases and two databases are linked.</p>\n\n<p>I want to compare these two tables column by column and find out which records are not matching. i want the specific column in each row in two tables that are not matching.</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":13261674,"title":"insert data from a table to another table sorted by column","body":"<p>There is a temp table <code>TMP_OA_PSTN_CMP_11035</code> with fields:</p>\n\n<pre><code>ACTION_OBJID NUMBER,\nCONTRACT_OBJID NUMBER,\nSTATUS varchar2(40),\nUPDATE_DATE DATE\n</code></pre>\n\n<p>This contains 7 million data.i want to create seven different temp tables with data from TMP_OA_PSTN_CMP_11035 sorted by action_objid and each containing  1 million records. <strong>The column ACTION_OBJID is not a sequence .</strong></p>\n\n<p>I tried using rownum but that inputs random  data.</p>\n\n<p>For EG:</p>\n\n<p>Temp1 : data containing action_objid from 5 ,8...to 1100000(as action_objid is not a sequence,this much is 1 million data).\nSimilarly, for other 6 temp tables.\nI am using oracle 10g.</p>\n"},{"tags":["sql","oracle","recursion","recursive-query"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":3988,"score":4,"question_id":87877,"title":"Building a Table Dependency Graph With A Recursive Query","body":"<p>I am trying to build a dependency graph of tables based on the foreign keys between them.  This graph needs to start with an arbitrary table name as its root.  I could, given a table name look up the tables that reference it using the all_constraints view, then look up the tables that reference them, and so on, but this would be horrible inefficient.  I wrote a recursive query that does this for all tables, but when I add:</p>\n\n<pre><code>START WITH Table_Name=:tablename\n</code></pre>\n\n<p>It doesn't return the entire tree.</p>\n"},{"tags":["oracle","query","concatenation","decode"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13284859,"title":"show data with decode function in oracle","body":"<p>original data (image)\n<img src=\"http://i.stack.imgur.com/5DaCH.jpg\" alt=\"enter image description here\">\nI want to display my data by concatenating several columns. But the data that appears less than perfect: there is a comma behind at the end of the concatenations, like the picture shows:</p>\n\n<p><img src=\"http://i.stack.imgur.com/DUVOY.jpg\" alt=\"http://i1207.photobucket.com/albums/bb476/daniwarrior/decode1.jpg\"></p>\n\n<p>Here is the query that I created in oracle 10g</p>\n\n<pre><code>    select id_pegawai, \n    whitelist_pembayaran||decode(whitelist_pembayaran,null,null,', ')||\n    whitelist_pemasang||decode(whitelist_pemasang,null,null,', ')||\n    whitelist_jenis_iklan||decode(whitelist_jenis_iklan,null,null) as whitelist,\n\n    blacklist_pembayaran||decode(blacklist_pembayaran,null,null,', ')||\n    blacklist_pemasang||decode(blacklist_pemasang,null,null,', ')||\n    blacklist_jenis_iklan||decode(blacklist_jenis_iklan,null,null) as blacklist\n    from verifikator order by id_verifikator desc\n</code></pre>\n"},{"tags":["oracle","query","concatenation","pivot","string-aggregation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13283231,"title":"show data from multi column to single row","body":"<p>in my oracle database contained the following data</p>\n\n<p><a href=\"http://i1207.photobucket.com/albums/bb476/daniwarrior/data-awal.jpg\" rel=\"nofollow\">http://i1207.photobucket.com/albums/bb476/daniwarrior/data-awal.jpg</a></p>\n\n<p>I want to display the data as shown below</p>\n\n<p><a href=\"http://i1207.photobucket.com/albums/bb476/daniwarrior/data-aKHIR.jpg\" rel=\"nofollow\">http://i1207.photobucket.com/albums/bb476/daniwarrior/data-aKHIR.jpg</a></p>\n\n<p><strong>Whitelist</strong> column are <strong>merging whitelist_pembayaran column, whitelist_pemasan, and whitelist_jenis_iklan</strong></p>\n\n<p><strong>Blacklist</strong> column are merging <strong>blacklist_pembayaran column, blacklist_pemasang, and blacklist_jenis_iklan</strong></p>\n\n<p>whether the query in oracle can do? if you can how to query to display data like the picture above</p>\n\n<p>*<em>)sorry I can not show pictures because my reputation is less to be able to display the image, so I provide a link to the picture</em></p>\n"},{"tags":["oracle","oracle11g","oracle-apex","sequences"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13283750,"title":"How to call or create two sequences in one TABLE of Oracle APEX 4.1","body":"<p>I have made two sequences, Vendor_Id and Vendor_ReferenceNo, for the table Vendor. I want to call or add both the sequences in Vendor table.   But APEX 4.1 only gives the option of one sequence per table.  Is there any other method?</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13281699,"title":"Range of Week instead of be putting dates","body":"<p>I have below query but instead of to be putting range of week like '22-OCT-2012 AND 28-OCT-2012' I woulk to put a code like CurrentWeek -2 or CurrentWeek-1, that will avoid to edit the query every week that I need to run it.\nDo you know how make this?</p>\n\n<p>tHANKS\nLD</p>\n\n<pre><code>    SELECT WO.USER_6 AS STYLE\n ,SUM (CASE WHEN (OPERATION.STATUS ='C' AND OPERATION.CLOSE_DATE BETWEEN '22-OCT-2012' AND '28-OCT-2012') THEN OPERATION.RUN_HRS ELSE 0 END) WEEK43\n ,SUM (CASE WHEN (OPERATION.STATUS ='C' AND OPERATION.CLOSE_DATE BETWEEN '29-OCT-2012' AND '04-NOV-2012') THEN OPERATION.RUN_HRS ELSE 0 END) WEEK44\nFROM WORK_ORDER WO, OPERATION\nWHERE  WO.BASE_ID = OPERATION.WORKORDER_BASE_ID\nAND WO.Lot_ID = Operation.Workorder_Lot_ID\n        AND WO.Sub_ID = Operation.Workorder_Sub_ID\n        AND WO.Split_ID = Operation.Workorder_Split_ID\nAND WO.TYPE ='W'\nAND WO.WAREHOUSE_ID ='MEX-04'\nAND OPERATION.CLOSE_DATE BETWEEN '22-OCT-2012'  AND '04-NOV-2012'\nAND OPERATION.RESOURCE_ID IN ('171-4','171-ADD','171-3' ,'BAMEX-SEWCONC','BAMEX-SEWPATC')\nAND OPERATION.RUN &gt; 0\nGROUP BY\nWO.USER_6\n</code></pre>\n"},{"tags":["sql","oracle","concatenation","pivot","string-aggregation"],"answer_count":10,"favorite_count":12,"up_vote_count":23,"down_vote_count":0,"view_count":89721,"score":23,"question_id":468990,"title":"How can I combine multiple rows into a comma-delimited list in Oracle?","body":"<p>I have a simple query:</p>\n\n<pre><code>select * from countries\n</code></pre>\n\n<p>with the following results:</p>\n\n<pre><code>country_name\n------------\nAlbania\nAndorra\nAntigua\n.....\n</code></pre>\n\n<p>I would like to return the results in one row, so like this:</p>\n\n<pre><code>Albania, Andorra, Antigua, ...\n</code></pre>\n\n<p>Of course, I can write a PL/SQL function to do the job (I already did in Oracle 10g), but is there a nicer, preferably non-Oracle-specific solution (or may be a built-in function) for this task?</p>\n\n<p>I would generally use it to avoid multiple rows in a sub-query, so if a person has more then one citizenship, I do not want her/him to be a duplicate in the list.</p>\n\n<p>My question is based on the similar question on <a href=\"http://stackoverflow.com/questions/180032/how-can-i-combine-multiple-rows-into-a-comma-delimited-list-in-sql-server-2005\">SQL server 2005</a>.</p>\n\n<p><strong>UPDATE</strong>:\nMy function looks like this:</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION APPEND_FIELD (sqlstr in varchar2, sep in varchar2 ) return varchar2 is\nret varchar2(4000) := '';\nTYPE cur_typ IS REF CURSOR;\nrec cur_typ;\nfield varchar2(4000);\nbegin\n     OPEN rec FOR sqlstr;\n     LOOP\n         FETCH rec INTO field;\n    \t EXIT WHEN rec%NOTFOUND;\n         ret := ret || field || sep;\n     END LOOP;\n     if length(ret) = 0 then\n          RETURN '';\n     else\n          RETURN substr(ret,1,length(ret)-length(sep));\n     end if;\nend;\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13279666,"title":"how can I insert data in oracle AFTER a particular row that exist in the data table?","body":"<p>i have 10 rows of data in my table. now i want to insert a row of data just after the 9th data and before row 10..if am not mistaken ,in mysql db this thing is possible before there's a before and after clause, how bout in oracle ?</p>\n\n<p>here's my starting insert statement, let's say i want to insert it after the 9th data ,how?</p>\n\n<pre><code>INSERT INTO MYTABLE (TITLE,DESCRIPTION,STATUS) VALUES ('blahblah','descriptionblah',1);\n</code></pre>\n"},{"tags":["oracle","spring","hibernate","stored-procedures","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13253854,"title":"spring 3.1 with hibernate 4 can't use StoredProcedure with OracleTypes","body":"<p>Recently we upgraded from hibernate 3.5 to 4.1.7 as well as spring from 3.0.5 to 3.1.3. Hibernate is configured via jpa in spring so no changes is made. </p>\n\n<p>After the upgrade, most of the stuff works fine but one function that uses StoredProcedure is broken with the following exception: </p>\n\n<pre><code>java.lang.ClassCastException: $Proxy188 cannot be cast to oracle.jdbc.OracleConnection\n    at oracle.sql.TypeDescriptor.setPhysicalConnectionOf(TypeDescriptor.java:829)\n    at oracle.sql.TypeDescriptor.&lt;init&gt;(TypeDescriptor.java:583)\n    at oracle.sql.ArrayDescriptor.&lt;init&gt;(ArrayDescriptor.java:224)\n    at org.springframework.data.jdbc.support.oracle.SqlArrayValue.createTypeValue(SqlArrayValue.java:71)\n    at org.springframework.jdbc.core.support.AbstractSqlTypeValue.setTypeValue(AbstractSqlTypeValue.java:58)\n    at org.springframework.jdbc.core.StatementCreatorUtils.setValue(StatementCreatorUtils.java:281)\n    at org.springframework.jdbc.core.StatementCreatorUtils.setParameterValueInternal(StatementCreatorUtils.java:217)\n    at org.springframework.jdbc.core.StatementCreatorUtils.setParameterValue(StatementCreatorUtils.java:128)\n    at org.springframework.jdbc.core.CallableStatementCreatorFactory$CallableStatementCreatorImpl.createCallableStatement(CallableStatementCreatorFactory.java:212)\n    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:1008)\n    at org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:1064)\n    at org.springframework.jdbc.object.StoredProcedure.execute(StoredProcedure.java:144)\n</code></pre>\n\n<p>In debug mode, I found the <code>AbsructSqlTypeValue.setTypeValue()</code> method has the following implementation:</p>\n\n<pre><code>public final void setTypeValue(PreparedStatement ps, int paramIndex, int sqlType, String typeName)\n        throws SQLException {\n\n    Object value = createTypeValue(ps.getConnection(), sqlType, typeName);\n    if (sqlType == TYPE_UNKNOWN) {\n        ps.setObject(paramIndex, value);\n    }\n    else {\n        ps.setObject(paramIndex, value, sqlType);\n    }\n}\n</code></pre>\n\n<p>The <code>ps.getConnection()</code> method here actually returns a new Hibernate 4 LogicalConnectionImpl which wraps around the real OracleConnection. And that's why the it throws the ClassCastException in Oracle driver. </p>\n\n<p>The reason why it calls to oracle.SqlArrayValue is because the store proc takes list of longs as input parameter. When the input parameter is defined, we uses OracleTypes.ARRAY then while binding the values, we create a new SqlArrayValue object to wrap around the Long[]. I tried to use the generic Types.Array and Long[] directly but it didn't work either with the following exception:</p>\n\n<pre><code>Caused by: java.sql.SQLException: Fail to convert to internal representation: [Ljava.lang.Long;@337f5afe\n    at oracle.sql.ARRAY.toARRAY(ARRAY.java:187)\n    at oracle.jdbc.driver.OraclePreparedStatement.setObjectCritical(OraclePreparedStatement.java:8782)\n    at oracle.jdbc.driver.OraclePreparedStatement.setObjectInternal(OraclePreparedStatement.java:8278)\n    at oracle.jdbc.driver.OraclePreparedStatement.setObjectInternal(OraclePreparedStatement.java:8877)\n    at oracle.jdbc.driver.OracleCallableStatement.setObject(OracleCallableStatement.java:4992)\n    at oracle.jdbc.driver.OraclePreparedStatementWrapper.setObject(OraclePreparedStatementWrapper.java:240)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at oracle.ucp.jdbc.proxy.StatementProxyFactory.invoke(StatementProxyFactory.java:230)\n    at oracle.ucp.jdbc.proxy.PreparedStatementProxyFactory.invoke(PreparedStatementProxyFactory.java:124)\n    at oracle.ucp.jdbc.proxy.CallableStatementProxyFactory.invoke(CallableStatementProxyFactory.java:101)\n    at $Proxy214.setObject(Unknown Source)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)\n</code></pre>\n\n<p>I don't understand why the jdbcTemplate somehow uses the hibernate connection instead of the native OracleConnection, maybe there is some configuration somewhere can fix it magically?</p>\n"},{"tags":["java","oracle","hibernate"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13282847,"title":"sequence does not exist","body":"<p>While developing a web application using spring and hibernate i am getting the following execption.</p>\n\n<p>java.sql.SQLException: ORA-02289: sequence does not exist</p>\n\n<p>While i am trying to insert the data into a table i am usign sequence to increment the value of request_id.</p>\n\n<p>I am using the following coding for inserting </p>\n\n<pre><code>    @Override\npublic void postRequest(RequestInfo requestInfo) \n{\nSession session = null;\nTransaction trans = null;\nSessionFactory sessionFactory = null;\n\nsessionFactory=HibernateConfig.getSessionFactory();\nsession= sessionFactory.openSession();\ntrans = session.beginTransaction();\nsession.save(requestInfo);\ntrans.commit();\nsession.close();\n\n}\npublic class HibernateConfig \n{\npublic static SessionFactory sessionFactory;\npublic static SessionFactory getSessionFactory() \n{\nsessionFactory = new Configuration().configure().buildSessionFactory();\nreturn sessionFactory;\n}\n}\n</code></pre>\n\n<p>In hibernate mapping i have mentioned like this</p>\n\n<pre><code>&lt;id name=\"requestId\" type=\"int\" column=\"request_id\" &gt;\n&lt;generator class=\"sequence\"&gt;\n&lt;param name=\"sequence\"&gt;REQUEST_INFO_SEQ&lt;/param&gt;\n&lt;/generator&gt;\n&lt;/id&gt;\n</code></pre>\n\n<p>I tried with native also but i couldn't get the values to be get inserted.</p>\n\n<p>i am using oracle 11g.</p>\n\n<p>Can any one give me solution for this.</p>\n"},{"tags":["oracle","datetime","plsql","oracle11g"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":13265468,"title":"Get Gap between time range","body":"<p>In <code>WORK_TIME</code> column in my database table (<code>EMP_WORKS</code>), i have records as below.</p>\n\n<pre><code>WORK_TIME\n\n19:03:00\n20:00:00\n21:02:00\n21:54:00\n23:04:00\n00:02:00\n</code></pre>\n\n<p>i want to create a database <code>view</code> using these data. for it i need to get <code>Gap</code> between these times as below.</p>\n\n<pre><code>WORK_TIME  GAP\n\n19:03:00  -\n20:00:00  00:57:00  (Gap between 19:03:00 and 20:00:00)\n21:02:00  01:02:00  (Gap between 20:00:00 and 21:02:00)\n21:54:00  00:52:00  (Gap between 21:02:00 and 21:54:00)\n23:04:00  01:10:00  (Gap between 21:54:00 and 23:04:00)\n00:02:00  00:58:00  (Gap between 23:04:00 and 00:02:00)\n</code></pre>\n\n<p>How could i do this ?</p>\n"},{"tags":["sql","oracle"],"answer_count":8,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9783,"score":0,"question_id":5515514,"title":"How to get first and last day of week in Oracle?","body":"<p>I need to get the first day and the last day of the week from some strings that have the format like this:</p>\n\n<p>'201118' </p>\n\n<p>where 2011 is the year and 18 is the number of the week. Knowing the number of the week, how do I get the first and the last day of the week?</p>\n\n<p>How do I do this?</p>\n"},{"tags":["oracle","query-optimization","aggregate-functions"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13278670,"title":"Is there a more efficient way to count the number of aggregate records in Oracle SQL?","body":"<p>I have more experience with MySQL and MSSQL but I don't consider myself a SQL expert.</p>\n\n<p>I have a requirement for some SQL work running on an Oracle database.  Not even sure the version yet but it should be somewhat recent (10, 11??).</p>\n\n<p>Anyway, I have to count the number of distinct records that spans two tables.  For sake of argument, let's call them <code>master</code> and <code>detail</code>.</p>\n\n<p>The following SQL gives me the number I want against the data.  However, this SQL will eventually be put in a UDF (or Oracle equivalent).  But my question is, is there a better way?  Either using some advanced Oracle optimization or even just a better SQL query.</p>\n\n<p>Thanks</p>\n\n<pre><code>select count(*) from\n(\n  select \n    mas.barcode\n  , det.barcode_val\n\n  from mas \n    inner join det on (det.trans_id = mas.trans_id and mas.trans_sub_id = det.trans_sub_id)\n  where \n    mas.trans_id = 12345\n    and det.code_type = 'COMMODORE'\n  group by\n    mas.barcode\n  , det.barcode_val\n);\n</code></pre>\n\n<p>Data:</p>\n\n<pre><code>MAS\n\ntrans_id     trans_sub_id     barcode\n-------------------------------------\n12345                   1      COM_A\n12345                   2      COM_A\n12345                   3      COM_B\n\n\nDET\n\ntrans_id     trans_sub_id     code_type     barcode_val\n-------------------------------------------------------\n12345                   1     COMMODORE     C64\n12345                   1     COMMODORE     C64\n12345                   1     TANDY         TRASH80\n12345                   2     COMMODORE     C128\n12345                   2     ATARI         800XL\n12345                   2     COMMODORE     AMIGA500\n12345                   3     COMMODORE     C64\n\n\nResults before count\n--------------------\nCOM_A     C64\nCOM_A     C128\nCOM_A     AMIGA500\nCOM_B     C64\n\n\nResults after count\n-------------------\n4\n</code></pre>\n"},{"tags":["oracle","oracle10g","gateways"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13169550,"title":"Oracle Transparent Gateway 10g to Connect to SQL Server 2012","body":"<p>I'm going to upgrade an old application using SQL Server 2000 to SQL Server 2012, an Oracle Server transfer data to this application using the Oracle Transparent Gateway daily.\nI have a new server in which I installed SQL Server 2012 for testing with all the data and users from the old SQL Server 2000, just exactly.</p>\n\n<p>I'm performing initial tests, and when I change my configuration to test connections to the new SQL Server 2012, I get the error:</p>\n\n<pre><code>SQL&gt; Desc SOMETABLE@SOMEDBLINK;\nERROR:\nORA-28500: connection from ORACLE to a non-Oracle system returned this message:\n[Transparent gateway for MSSQL]DRV_InitTdp: [Microsoft][ODBC SQL Server\nDriver][SQL Server]Login failed for user 'correctlyconfigureduser'. (SQL State: 00000; SQL\nCode: 18456)\nORA-02063: preceding 2 lines from SOMEDBLINK\n</code></pre>\n\n<p>In the logs I found this:</p>\n\n<pre><code>2012-10-31 18:41:21.673: [  OCRRAW][9132]proprinit: Could not open raw device \n2012-10-31 18:41:21.673: [ default][9132]a_init:7!: Backend init unsuccessful : [33]\n2012-10-31 18:41:21.688: [ CSSCLNT][9132]clsssinit: error(33 ) in OCR initialization\n</code></pre>\n\n<p>I already logged in with the user involved and the user and password are fine. They are a copy of the old database anyway.</p>\n\n<p>I'm wondering if may be this Oracle Transparent Gateway 10g (10.2) is just too old to connect to SQL Server 2012.</p>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":33925,"score":5,"question_id":1766445,"title":"Oracle: how to set user password unexpire?","body":"<p>There is some construction</p>\n\n<pre><code>ALTER USER scott PASSWORD EXPIRE\n</code></pre>\n\n<p>But how can I similair set password to unexpired state?</p>\n"},{"tags":["oracle","plsql","oracle11g"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13265098,"title":"Oracle stored procedure to return a result set","body":"<p>I'm totally new to Oracle, and I need to write a stored procedure that will return a result set. The stored procedure will be called from SQL Server using a linked server.\nI know I can use a ref cursor to return a resultset from PL/SQL server, but I've also seen stored procedures returning sort of arrays (declared as Table of Number for example) and then return this with the result.\nWhich is the proper way to do this?</p>\n"},{"tags":["sql-server","oracle","database-link","heterogeneous-services"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":12,"score":2,"question_id":13280777,"title":"Unable to create objects with db link; ORA - 0251: another session or branch in same transaction failed or finalized","body":"<p>I have a Heterogeneous Link between Oracle 11.2.0.3 and SQL Server 2008. When I attempt to create views, or procedures that reference the Heterogeneous Services views for system tables, I get 4 errors listed below:</p>\n\n<p>ORA-00604: error occured at recursive SQL level 1</p>\n\n<p>ORA-02051: another session or branch in same transaction failed or finalized</p>\n\n<p>ORA-06512: at \"SYS.HS$_DDTF_SQLTABLES\", line 58</p>\n\n<p>ORA-06512: at line 1</p>\n\n<p>As an example, these errors are created when I try to execute the following code:</p>\n\n<pre><code>CREATE VIEW ALLMYTABLES AS\nSELECT * FROM ALL_TABLES@DBLINKNAME;\n</code></pre>\n\n<p>I am however able to create views on any normal table:</p>\n\n<pre><code>CREATE VIEW RANDOMTABLE AS\nSELECT * FROM RANDOMTABLE@DBLINKNAME;\n</code></pre>\n\n<p>I have done some research to issues similar to this one, but have not found any references to this specific issue. I believe it may have something to do with the conflict between the concurrent operations of creating the view and the select * statement call to the SQL server database. Or perhaps that the records are not entirely fetched when the view is created.</p>\n\n<p>I do not know the specifics of the HS link configuration and properties.</p>\n"},{"tags":["sql-server","oracle","sharepoint2010"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13280032,"title":"Setting an external content type in SharePoint Designer 2010 - linked Oracle server","body":"<p>Okay, so I have an MS SQL server that's linked to an Oracle DB. I can use \"OPENQUERY\" to successfully query against it.</p>\n\n<p>What I'm trying to do now is create an external content type in SharePoint Designer 2010 that points to the MS SQL server but uses the Oracle DB. Here's what I tried:</p>\n\n<p>Connection Properties\nDatabase Server: [MS SQL server]\nDatabase Name: [Oracle DB name]\nConnect with Impersonated Custom Identity\nSecure Store Application ID: [MS SQL login]</p>\n\n<p>If anyone else has had success with this or can offer suggestions, I'd love to hear them and would be very appreciative :)</p>\n"},{"tags":["oracle","dblink"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13267218,"title":"How to create a DB link between two oracle instances","body":"<p>How to create a DB link between to Oracle instances let say A and B are two instances. I want to access the data in instance B from the instance A.</p>\n"},{"tags":["sql","oracle","plsql","plsqldeveloper"],"answer_count":6,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1964,"score":0,"question_id":11003918,"title":"Oracle Convert Seconds to Hours:Minutes:Seconds","body":"<p>I have a requirement to display user available time in Hours:Minutes:Seconds format from a given total number of seconds value. Appreciate if you know a ORACLE function to do the same. I'm using Oracle.</p>\n\n<p>Thank you for your time.</p>\n"},{"tags":["oracle","maven","jdbc","war"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":3541,"score":1,"question_id":9898499,"title":"Oracle JDBC ojdbc6 Jar as a Maven Dependency","body":"<p>I cannot seem to get Maven to bundle the ojdbc6.jar file into my project's war file.  I have it working within the POM file when specifying a dependency directly for Hibernate tools.  But it won't get bundled with the project's war file, and therefore my project won't run on Tomcat.</p>\n\n<p>I have tried every solution I can find out there on the net, including those specified for this question here:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/1074869/find-oracle-jdbc-driver-in-maven-repository\">Find Oracle JDBC driver in Maven repository</a></p>\n\n<p>Most recently, I did the following:</p>\n\n<ol>\n<li><p>Download the jar file to my machine</p></li>\n<li><p>Run the following command to install the jar into my local repository:</p>\n\n<pre><code>mvn install:install-file -DgroupId=com.oracle -DartifactId=ojdbc6 -Dversion=11.2.0.3 -Dpackaging=jar -Dfile=ojdbc6.jar -DgeneratePom=true\n</code></pre>\n\n<p>(I've tried all kinds of variants of that command, too.)</p></li>\n<li><p>Finally, I put the dependency into my pom file:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.oracle&lt;/groupId&gt;\n    &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;\n    &lt;version&gt;11.2.0.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre></li>\n<li><p>I run a clean build, but it fails:</p>\n\n<pre><code>mvn -U clean package\n\n[INFO] Scanning for projects...\n[INFO]                                                                         \n[INFO] ------------------------------------------------------------------------\n[INFO] Building jazztwo 0.0.1\n[INFO] ------------------------------------------------------------------------\nDownloading: http://repo1.maven.org/maven2/com/oracle/ojdbc6/11.2.0.3/ojdbc6-11.2.0.3.jar\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 0.700s\n[INFO] Finished at: Tue Mar 27 15:06:14 PDT 2012\n[INFO] Final Memory: 3M/81M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal on project jazztwo: Could not resolve dependencies for project edu.berkeley:jazztwo:war:0.0.1: Could not find artifact com.oracle:ojdbc6:jar:11.2.0.3 in central (http://repo1.maven.org/maven2) -&gt; [Help 1]\n</code></pre></li>\n</ol>\n\n<p>Why doesn't this work?  I'm ready to throw expensive computer parts across the room.  This has wasted so much time. (Thank you, Oracle.  How much did we pay you again?)  </p>\n\n<p>Is it because I'm on a Mac, perhaps?</p>\n"},{"tags":["oracle","null","oracle10g","empty-string"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13278773,"title":"null vs empty string in Oracle","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/203493/why-does-oracle-9i-treat-an-empty-string-as-null\">Why does Oracle 9i treat an empty string as NULL?</a>  </p>\n</blockquote>\n\n\n\n<p>I have a table in Oracle (10g) named <code>TEMP_TABLE</code> with only two columns - <code>id</code> and <code>description</code> just for the sake of demonstration.</p>\n\n<p>The column <code>id</code> is a sequence generated primary key of type <code>NUMBER(35, 0) not null</code> and the column <code>DESCRIPTION</code> is a type of <code>VARCHAR2(4000) not null</code>.</p>\n\n<p>The basic table structure in this case would look something like the following.</p>\n\n<pre><code>+-----------------------------------------------+\n|Name          |    Null?     |   Type          |\n+--------------+--------------+-----------------+\n|ID            |   NOT NULL   |  NUMBER(35)     |\n|DESCRIPTION   |   NOT NULL   |  VARCHAR2(4000) |\n+--------------+--------------+-----------------+\n</code></pre>\n\n<p>After creating this table, I'm trying to insert the following <code>INSERT</code> commands alternatively.</p>\n\n<pre><code>insert into temp_table (id, description) values (1, null); -&gt;unsuccessful\ninsert into temp_table (id, description) values (2, '');   -&gt;unsuccessful\n</code></pre>\n\n<p>Both of them are unsuccessful as obvious because the <code>not null</code> constraint is enforced on the <code>DESCRIPTION</code> column.</p>\n\n<p>In both of the cases, Oracle complains,</p>\n\n<blockquote>\n  <p>ORA-01400: cannot insert NULL into\n  (\"WAGAFASHIONDB\".\"TEMP_TABLE\".\"DESCRIPTION\")</p>\n</blockquote>\n\n<p><strong>An empty string is treated as a null value in Oracle.</strong></p>\n\n<hr>\n\n<p>If I dropped the <code>not null</code> constraint on the <code>DESCRIPTION</code> column then the basic table structure would look like the following</p>\n\n<pre><code>+-----------------------------------------------+\n|Name          |    Null?     |   Type          |\n+--------------+--------------+-----------------+\n|ID            |   NOT NULL   |  NUMBER(35)     |\n|DESCRIPTION   |              |  VARCHAR2(4000) |\n+--------------+--------------+-----------------+\n</code></pre>\n\n<p>and both of the <code>INSERT</code> commands as specified would be successful. They would create two rows one with a <code>null</code> value and another with an empty string <code>''</code> in the <code>DESCRIPTION</code> column of the <code>TEMP_TABLE</code>.</p>\n\n<p>Now, if I issue the following <code>SELECT</code> command,</p>\n\n<pre><code>SELECT * FROM temp_table WHERE description IS NULL;\n</code></pre>\n\n<p>then it fetches both the rows in which one has a <code>null</code> value and the other has an empty string <code>''</code> in the <code>DESCRIPTION</code> column.</p>\n\n<p>The following <code>SELECT</code> statement however retrieves no rows from the <code>TEMP_TABLE</code></p>\n\n<pre><code>SELECT * FROM temp_table WHERE description='';\n</code></pre>\n\n<p>It doesn't even retrieve the row which has an empty string in the <code>DESCRIPTION</code> column.</p>\n\n<hr>\n\n<p>Presumably, it appears that Oracle treats a <code>null</code> value and an empty string <code>''</code> differently here which however doesn't appear to be the case with the <code>INSERT</code> statement in which both a <code>null</code> value and an empty string <code>''</code> are prevented from being inserted into a column with a <code>not null</code> constraint. Why is it so?</p>\n"},{"tags":["asp.net","oracle","orm","oracle8i"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13150984,"title":".NET ORM that Supports Oracle 8i","body":"<p>I have been tasked with creating a rewrite of a ColdFusion application with ASP.NET MVC3. I would like to use an ORM with this application to speed development.</p>\n\n<p>However I have had some trouble finding one that supports the Oracle 8i database that the existing data is already in. </p>\n\n<p>Does anyone know any ORM systems that will solve this problem?</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","java","oracle","comments","code-comments"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":13277865,"title":"What is the best approach for inline code comments?","body":"<p>We are doing some refactor to a 20 years old legacy code, and I'm having a discussion with my colleague about the comments format in the code (plsql,java).</p>\n\n<p>There is no a default format for comments, but in most cases people do something like this in the comment:</p>\n\n<pre><code>// date (year, year-month, yyyy-mm-dd, dd/mm/yyyy), (author id, author name, author nickname) and comment\n</code></pre>\n\n<p>the proposed format for future and past comments that I want is:</p>\n\n<pre><code>// {yyyy-mm-dd}, unique_author_company_id, comment\n</code></pre>\n\n<p>My colleague says that we only need the comment, and must reformat all past and future comments to this format:</p>\n\n<pre><code>// comment\n</code></pre>\n\n<p>My arguments:</p>\n\n<ul>\n<li>I say for maintenance reasons, it´s important to know when and who\ndid a change (even this information is in the SCM).</li>\n<li>The code has life and hence has history.</li>\n<li>Because without the change date it is impossible to know when a change was introduced without opening the SCM tool and searching in the long object history.</li>\n<li>because the author is very important, a change by author X is more credible than a change of author Y</li>\n<li>Agility reasons, no need to open and navigate the SCM tool</li>\n<li>people would be more afraid of changing something that someone did 15 years ago, than something that was recently done...</li>\n</ul>\n\n<p>My colleague's arguments:</p>\n\n<ul>\n<li>The history is in the SCM</li>\n<li>Developers must not be aware of history of the code directly in the code</li>\n<li>Package gets 15k lines long and unstructured comments make this packages harder to understand</li>\n</ul>\n\n<p>What do you think is the best approach? or do you have a better approach to solve this problem?</p>\n"},{"tags":["java","oracle","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13241582,"title":"Can't connect to database in JReport","body":"<p>I am using JReport 9.1 on Windows 7 and when I try to run my report, I get this error:</p>\n\n<blockquote>\n  <p>Report Engine : Query execution error. Details: Error in connecting to\n  jdbc:oracle:thin:@xxx.xxx.xx.xxx:1521:db_name, Could not initialize\n  class oracle.jdbc.driver.DMSFactory Ensure that the table names, \n  column names and connection are valid and that the JDBC driver can be\n  loaded from the class path.</p>\n</blockquote>\n\n<p>The Oracle Databse is 11.2.0.3. I have the ojdbc6dms_g.jar file in my <code>CLASSPATH</code>. I have JRE6 and JDK1.6 installed. What is going on here?</p>\n"},{"tags":["mysql","oracle","jdbc"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13269564,"title":"java.lang.ClassCastException: oracle.sql.TIMESTAMP cannot be cast to java.sql.Timestamp","body":"<p>I am working on an application that streams ResultSet over a network. I ended up using a CachedRowSetImpl class. But when i connect to an Oracle DB, i get an error like this</p>\n\n<p>java.lang.ClassCastException: oracle.sql.TIMESTAMP cannot be cast to java.sql.Timestamp</p>\n\n<p>Please help.</p>\n\n<p>The source code is as follows;</p>\n\n<pre><code>ResultSet res = response.getResultSet(); //resultset from the server\nwhile (res.next()) {\n Agent agent = new Agent();\n agent.setName(res.getString(2));\n agent.setMobile(res.getString(1));\n agent.setBalance(res.getLong(4));\n agent.setLastUpdate(res.getDate(3)); //date from the result set\n agent.setAccountNumber(res.getString(5));\n}\n</code></pre>\n\n<p>The error ...\n java.lang.ClassCastException: oracle.sql.TIMESTAMP cannot be cast to java.sql.Timestamp\njava.lang.ClassCastException: oracle.sql.TIMESTAMP cannot be cast to java.sql.Timestamp\n    at com.sun.rowset.CachedRowSetImpl.getDate(CachedRowSetImpl.java:2139)</p>\n"},{"tags":["c#","visual-studio-2010","oracle","cultureinfo"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13275628,"title":"ToDecimal Regional / Culture problems","body":"<p>I'm receiving from the Oracle database the following value (as varchar): <code>7876,72</code>\nIn Visual Studio it's read as a <code>String</code></p>\n\n<p><strong>CASE 1 (expected case):</strong></p>\n\n<p>When I'm debuggin I see: <code>7876.72</code> and when I try to <code>Convert.ToDecimal(\"7876.72\")</code> I'm getting <code>7876.72D</code></p>\n\n<p><strong>CASE 2 (wrong case):</strong></p>\n\n<p>When I'm debuggin I see: <code>7876,72</code> and when I try to <code>Convert.ToDecimal(\"7876,72\")</code> I'm getting <code>787672D</code></p>\n\n<p>I'm checking the <code>CultureInfo.CurrentCulture</code> and <code>RegionInfo.CurrentRegion</code> and it's the same on both machines...</p>\n\n<p>The main reason of this is because:</p>\n\n<p><code>Convert.ToDecimal(\"7876,72\").ToString(\"0,0.00\", CultureInfo.InvariantCulture)</code> gives me: <code>787,672.00</code> and it should be <code>7,876.72</code>.</p>\n\n<p><strong>Global.asax - Application_Start</strong></p>\n\n<pre><code>Dim newCulture As CultureInfo = DirectCast(System.Threading.Thread.CurrentThread.CurrentCulture.Clone(), CultureInfo)\nnewCulture.DateTimeFormat.ShortDatePattern = \"yyyy/MM/dd\"\nnewCulture.DateTimeFormat.DateSeparator = \"/\"\nnewCulture.NumberFormat.CurrencyDecimalSeparator = \".\"\nnewCulture.NumberFormat.NumberDecimalSeparator = \".\"\nThread.CurrentThread.CurrentCulture = newCulture\n</code></pre>\n\n<p>Any ideas on how to keep the same value on both machines?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["oracle","plsql","ddl","privileges"],"answer_count":5,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":19335,"score":6,"question_id":2339053,"title":"How do I get column datatype in Oracle with PL-SQL with low privileges?","body":"<p>I have read only access to a few tables in an Oracle database. I need to get schema information on some of the columns but i'm having trouble doing so. I'd like to use something analogous to MS SQL's <strong>sp_help</strong>. I see the table i'm interested in listed in this query.</p>\n\n<pre><code>SELECT * FROM ALL_TABLES\n</code></pre>\n\n<p>When I run this query, Oracle \"tells me table not found in schema\" (Don't Oracles myriads of super intuitive response messages just make this so much fun... ), and yes the parameters are correct.</p>\n\n<pre><code>SELECT \nDBMS_METADATA.GET_DDL('TABLE', 'ITEM_COMMIT_AGG', 'INTAMPS') AS DDL\nFROM DUAL;\n</code></pre>\n\n<p>After using my Oracle universal translator 9000 I've surmised this doesn't work because I don't have sufficient privileges. Given my constraints how can I get the datatype and data length of a column on a table I have read access to with a PL-SQL statement?</p>\n"},{"tags":["xml","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13274177,"title":"Creating XML RSS from Oracle","body":"<p>What I'm trying to do is create a stored procedure that will generate an xml that looks like the following.</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n    &lt;rss xmlns:georss=\"http://www.georss.org/georss\" version=\"2.0\"&gt;\n    &lt;rowset&gt;\n    &lt;row&gt;\n      &lt;title&gt;myTitle&lt;/title&gt;\n      &lt;description&gt;myDescription&lt;/description&gt;\n      &lt;georss:point&gt;myLat myLon&lt;/georss:point&gt;\n     &lt;/row&gt;\n     ...\n    &lt;/rowset&gt;\n    &lt;/rss&gt;\n</code></pre>\n\n<p>Which I have the following to generate</p>\n\n<pre><code> SELECT DBMS_XMLGEN.getXML(q'!\n SELECT trim(sitedesc)  AS \"title\", \n    '&lt;a href=\"../scripts/fmiinfo.asp?file_code=_BLDGLIST&amp;sitecode='||trim(sitecode)||'&amp;forceDB=\"&gt;'||trim(siteabbrev)||'&lt;/a&gt;'   AS \"description\", \n    trim(latitude)|| ' ' ||trim(longitude) AS \"georss:point\"\n   FROM LS\n   WHERE sold &lt;&gt; 1\n    !') FROM dual;\n</code></pre>\n\n<p>Output looks like this</p>\n\n<pre><code>   &lt;ROW&gt;\n   &lt;title&gt;Tipton Facilities&lt;/title&gt;\n   &lt;description&gt;&amp;lt;a href=&amp;quot;../scripts/fmiinfo.asp?file_code=_BLDGLISTnull=USINTI01null=&amp;quot;&amp;gt;TIP1&amp;lt;/a&amp;gt;&lt;/description&gt;\n   &lt;georss:point&gt;40.286008 -86.058054&lt;/georss:point&gt;\n   &lt;/ROW&gt;\n</code></pre>\n\n<p>In the 'description' I want to have a link to another page, I understand xml has certain reserved characters like <code>&gt; &lt; &amp; %</code> it looks like the output automatically converts the reserved characters into it's entity reference accordingly.</p>\n\n<p>The problem however is that the program thinks <code>sitecode</code> and <code>forcedb</code> in the url are variables, when they are not, and they get dropped from the results.  </p>\n\n<p>The url should be: <code>&amp;lt;a href=\"../scripts/fmiinfo.asp?file_code=_BLDGLIST&amp;amp;sitecode=USINTI01&amp;amp;forceDB=\"&amp;gt;</code></p>\n\n<p>But it's <code>&amp;lt;a href=&amp;quot;../scripts/fmiinfo.asp?file_code=_BLDGLISTnull=USINTI01null=&amp;quot;&amp;gt;</code></p>\n\n<p>Will I need to type out the url with <code>ctr()</code> function to get the desired output?</p>\n"},{"tags":["java","oracle","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13275990,"title":"Write Java Vector To Delimited File","body":"<p>I am connecting to an Oracle database and querying multiple tables. My current code creates the connection and calls a PL/SQL function which contains the query. Once I have the result set, I add it to a Vector (as I am unsure the number of records each query will result in). </p>\n\n<p>My problem is that I am unsure how to write a delimited file from the Vector. I imagine once I have added my result set to it, it is simply one gigantic string. I need to be able to receive each field from the query and delimit between them, as well as keep rows separate.</p>\n\n<p>Here is my code:</p>\n\n<pre><code> public static void main(String[] args) throws SQLException {\n\n    // instantiate db connection\n    try {\n        Class.forName(\"oracle.jdbc.driver.OracleDriver\");\n    }catch (Exception e) {\n        throw new SQLException(\"Oracle JDBC is not available\", e);\n    }\n\n    // define connection string and parameters\n    String url = \"jdbc:oracle:thin:@//host:port/sid\";\n    Connection conn = DriverManager.getConnection(url, \"USERNAME\",\"PASSWORD\");\n\n\n    CallableStatement stmt = conn.prepareCall(\"{? = CALL &lt;functionname&gt;(?)}\");\n\n    // get result set and add to a Vector\n    ResultSet rs = stmt.executeQuery();\n    Vector&lt;String&gt; results = new Vector();\n    while ( rs.next() ){\n        results.add(rs.getString(1));\n    }\n\n    // close result set, sql statement, and connection\n    rs.close();\n    stmt.close();\n    conn.close();\n\n    // write Vector to output file,\n    // where the file name format is MMddyyyy.txt\n    try {\n\n    Calendar cal = Calendar.getInstance();\n    SimpleDateFormat sdf = new SimpleDateFormat(\"MMddyyyy\");\n    String dateStr = sdf.format(cal.getTime());\n\n    FileWriter fwrite = new FileWriter(dateStr + \".txt\");\n    BufferedWriter out = new BufferedWriter(fwrite);\n\n    for(int i = 0; i &lt; results.size(); i++)\n    {\n        String temp = results.elementAt(i);\n        out.write(temp);\n    }\n\n    out.close();\n\n}catch (Exception e) {\n    System.err.println(\"Error: \" + e.getMessage());\n}\n}\n</code></pre>\n\n<p>I am just unsure how to go about getting the information from the db and writing it to a delimited file. Thanks in advance!</p>\n"},{"tags":["sql-server","windows","oracle","iis","rdf"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13273227,"title":"Semantic Web - Store app data directly in RDF or store in SQL and export/import later","body":"<p>I have a standard IIS web application which stores its data in a standard SQL Server or Oracle DB.\nI'm now interested in storing the data in <a href=\"http://www.rdfabout.com/quickintro.xpd\" rel=\"nofollow\">RDF</a> format, to go full <strong>Semantic Web</strong>.</p>\n\n<p>Is it recommended to store data directly in RDF format? CRUDQ operations will be done on the data. Performance wise is this a good move?</p>\n\n<p><strong>If not</strong> (like I'm assuming), I guess I'd maintain standard SQL DBs and export/import data to/from RDF? How can I do this? Are there good converters out there?</p>\n"},{"tags":["database","oracle","plsql"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13275534,"title":"Maximum number of records entered per day in db table","body":"<p>I would like to know how can i limit the number of records entered into a db table per day. I am using Oracle database. I basically want the user to only enter 1 record per hour and throw an error if they try to go over that. any ideas people? thanks in advance.</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":49,"score":3,"question_id":13274991,"title":"Generate 6 numbers without repetition from the set 1 ... 49","body":"<p>I need to generate 6 numbers without repetition from 1 to 49.\nI have something like that:</p>\n\n<pre><code>create table zadanie1(\nNAZWISKO varchar2(30),\nPUNKTY number,\nID number,\nconstraint stud1_nazw primary key(NAZWISKO)\n);\n\n\n\ncreate or replace procedure \"LOTTO\" IS\npkt number;\nbegin\n   loop\n       BEGIN\n       pkt := round(dbms_random.value(1,14),0);\n       INSERT INTO ZADANIE1(PUNKTY) VALUES (pkt);\n       exit;\n       Exception When DUP_VAL_ON_INDEX Then 0;\n       END;\nend loop;\nEND;\n</code></pre>\n\n<p>but this doesn't seem to work. Can somebody help me ?</p>\n"},{"tags":["mysql","sql","database","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":37,"score":0,"question_id":13275137,"title":"Regarding formatting of the query","body":"<p>I have made an application in which I have put the sql queries in java method as below..</p>\n\n<pre><code>private static String getSaleTransactionsQuery(final String currentTradingDate){\n\n        final String query =\n            \" SELECT '990' line_code, \" +\n            \" sum(toti_wag.TTIW_CUST_CNT) amount \" +\n            \" FROM total_till_wag toti_wag \" +\n            \" where toti_wag.TOTI_TRADING_DATE = '\" + currentTradingDate + \"' \";\n\n        return query;\n    }\n</code></pre>\n\n<p>Now when I want to filter out sql queries then I have to copy this query on the sql file and have to manually remove the quotes(\"\") and the plus(+) sign in order to make them as pure sql and then have to execute them to see the query output , is there any other tool which will format all these means remove the quotes and the plus sign ,please advise</p>\n"},{"tags":["oracle","oracle11g","oracle-ucm"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13217717,"title":"Blank FIle getting Downloaded Using the GET _FILE method","body":"<p>I am using the following piece of code download a file from UCM after using the\nGET_FILE service,but the file which is getting downloaded is a blank file.I have\nturned full verbose tracing on in the logs ,but there s no error in the log\nfile.Can anyone provide any suggestions on the same:</p>\n\n<pre><code>public InputStream getFileStream (String dID,String documentName,String\nextension,String contentID) throws Exception {\nInputStream stream = null;\n\nString myFileToEdit = \"C:\\\\testFolder\\\\\"+contentID+\"_\"+documentName;\nInputStream myInputStream = null;\nInputStreamReader myInputStreamReader = null;\n\n\nIdcClientManager IdcClientManager = new IdcClientManager();\nIdcClient client =\nIdcClientManager.createClient(\"idc://localhost:4444\");\nIdcContext IdcContext = new IdcContext(\"weblogic\");\n//Get the client (from the base class) and create a new binder\n// IdcClient client = getClient();\nDataBinder dataBinder = client.createBinder ();\nSystemUtils.trace(\"system\", \"dID in getFile&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\" +dID);\n\n//retrieve the file, check the file size\ndataBinder.putLocal (\"IdcService\", \"GET_FILE\");\ndataBinder.putLocal (\"dID\", dID);\nServiceResponse response = client.sendRequest (IdcContext, dataBinder);\nint reportedSize = Integer.parseInt (response.getHeader\n(\"Content-Length\"));\nint retrievedSize = 0;\n\n//The file is streamed back to us in the response\nstream = response.getResponseStream ();\nSystemUtils.trace(\"system\", \"stream&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\" +stream.toString());\nSystemUtils.trace(\"system\", \"Conetnt in getFile&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\" +contentID);\nSystemUtils.trace(\"system\", \"DocNAme in getFile&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\"\n+documentName);\nFile f=new File(\"C:\\\\testFolder\\\\\"+contentID+\"_\"+documentName +\".\"\n+extension);\nOutputStream out=new FileOutputStream(f);\nbyte buf[]=new byte[1024];\nint len;\nSystemUtils.trace(\"system\", \"File&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\" +stream.read(buf));\nwhile((len=stream.read(buf))&gt;0){\nSystemUtils.trace(\"system\", \"len&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\" +len);\n\nout.write(buf,0,len);\n }\nout.close();\nstream.close();\n}\n</code></pre>\n"},{"tags":["oracle","stored-procedures","cursor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1876,"score":0,"question_id":10281348,"title":"How to write a stored procedure in oracle?","body":"<p>I am new to oracle so not sure about how to write stored procedure in oracle.  Currently I am googling and reading some articles/blogs on net on SP's in oracle. I am begining to get some ideas about it. Even then I have following few queries. </p>\n\n<p>What I am trying to do is, </p>\n\n<p>I have a Employee table with emp_id, Region, Division, Product, Title etc. </p>\n\n<p>I also have emp_update table with emp_id, column (what is changed), old_value, new_value and date. </p>\n\n<p>e.g. emp_update table will have a row for for emp_id = 10, which says region is changed from Asia to UK on 30 April. </p>\n\n<p>Another row for same emp which says product changed from A to B on 30 April. </p>\n\n<p>So, multiple entries for same employee and on same date. </p>\n\n<p>Now on that particular date I am running a cron job which will run this Sp to update employee table to these updates.</p>\n\n<p>e.g. On date 30 April, update employee set region = UK, Product = B where emp_id = 10. </p>\n\n<p>I want to run a single update statement for a employee with all its updates from emp_update table on that date.</p>\n\n<p>So basically, </p>\n\n<p>get all employees from emp_update with update on today.\niterate over that employees updates, assembple them in a single update statement and then execute that update query.\nrepeat for each employee.</p>\n\n<p>Please help</p>\n\n<p><strong>EDIT 1:-</strong></p>\n\n<pre><code>    CREATE OR REPLACE\nPROCEDURE SP_RUN_EMPLOYEE_UPDATES \nIS\n\n\n CURSOR \n    c_emp \n IS\n    SELECT DISTINCT(employee_id) as employee_id FROM BI_EMPLOYEE_UPDATE WHERE EFFECTIVE_DATE = to_date('30-Apr-2012','dd-mm-yy');\n\nBEGIN\n\nFOR employee in c_emp\n\n  LOOP\n\n    CURSOR \n        c_emp_update \n    IS\n      SELECT * FROM BI_EMPLOYEE_UPDATE WHERE employee_id = :employee.employee_id AND EFFECTIVE_DATE = to_date('30-Apr-2012','dd-mm-yy');\n\n    FOR emp_update in c_emp_update\n    LOOP\n\n\n\n  --      dbms_output.put_line(emp_update.column_name);\n    END LOOP;\n\n  END LOOP;\n\nEND;\n</code></pre>\n\n<p>Currently this is what I have done so far</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13274340,"title":"Create SEQUENCE such that it should initialize on every next day","body":"<p>Suppose SEQUENCE starts from \"1\", today it generated some sequences then on next day it should again start from \"1\".</p>\n\n<p>Is it possible or need to find any workaround ?</p>\n"},{"tags":["oracle","random","plsql","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":919,"score":1,"question_id":7190128,"title":"Generate Random Number in Oracle","body":"<p>In one of my project i have to generate a random number from 1 to 2000 and store them into table.I have to store 2000 value in the table.I have to store different value in the table.\nHoe to do this in oracle.I am using Oracle 11g .</p>\n"},{"tags":["c#","oracle","plsql","odp.net"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":104,"score":0,"question_id":12416315,"title":"Using C# and ODP.NET and Oracle, how do you get an associative array (pl/sql table) from a stored procedure","body":"<p>Using C# 4.0 and ODP.NET.  We have a stored procedure that is part of a package that takes two in parameters and returns a pl/sql table.</p>\n\n<p>I have googled for hours and have found many examples of code here and elsewhere where you pass an array to a stored procedure, but have not found a single example where you get a pl/sql table back.</p>\n\n<p>Is this possible?  I believe it has to be but not sure anymore.</p>\n\n<p>Note: I am NOT getting back a ref cursor, it is a pl/sql table (associate array)</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13273482,"title":"How do I generate a tnsnames.ora file to connect to an Oracle Database?","body":"<p>I have installed Oracle 11g, and I can connect as <code>sysman</code> to the Oracle database, but there is no <code>tnsnames.ora</code> file that I can find.</p>\n\n<p>Do I need to generate the tnsnames.ora file myself? If so, where do I place it? If not, how does Oracle generate it for me?  If I do need to generate it, what is the appropriate syntax for the file?</p>\n"},{"tags":["sql","oracle","plsql","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13261037,"title":"Insert into table when data missing","body":"<p>I have the following table, for readability I broke down the after every manager for every case number. </p>\n\n<p>The last column is the cumulative sum of the second last column. </p>\n\n<p>Value for month should ideally run from 1-3 (Like you see for both the cases for Chicago). </p>\n\n<p>But from the table you can see in some cases some entries are missing (marked by &lt;-----). </p>\n\n<pre><code>CITY     CASE   CASE_NUMBER   MANAGER  MONTH  MONTHLY_TOTAL   FISCAL_TOTAL \n---------------------------------------------------------------------------\nchicago  case_1   1             John       1         2              2     \nchicago  case_1   1             John       2         3              5  \nchicago  case_1   1             John       3         5              10\n\nchicago  case_1   1             Jeff       1         4              4     \nchicago  case_1   1             Jeff       2         2              6  \nchicago  case_1   1             Jeff       3         3              9\n\nchicago  case_2   2             John       1         3              3     \nchicago  case_2   2             John       2         2              5  \nchicago  case_2   2             John       3         4              9\n\nchicago  case_2   2             Jeff       1         2              2     \nchicago  case_2   2             Jeff       2         7              9 &lt;----\n\nnewyork  case_1   1             Lee        1         3              3     \nnewyork  case_1   1             Lee        2         4              7 &lt;----\n\nnewyork  case_1   1             Sue        1         2              2     \nnewyork  case_1   1             Sue        2         3              5     \nnewyork  case_1   1             Sue        3         2              7 \n\nnewyork  case_1   2             Lee        1         2              2     \nnewyork  case_1   2             Lee        2         4              6  \nnewyork  case_1   2             Lee        3         4              10  \n\nnewyork  case_1   2             Sue        1         3              3     \nnewyork  case_1   2             Sue        2         2              5 &lt;----\n</code></pre>\n\n<p>What I want is to first find out those missing rows and insert values. </p>\n\n<p>For those missing ones monthly_total = 0</p>\n\n<p>fiscal_total = value in previous row. </p>\n\n<p>E.g. for first missing row it should be:    </p>\n\n<pre><code>CITY     CASE   CASE_NUMBER   MANAGER  MONTH  MONTHLY_TOTAL   FISCAL_TOTAL \n---------------------------------------------------------------------------\nchicago  case_2   2             Jeff       3         0              9\n</code></pre>\n"},{"tags":["oracle","sql-server-2008","replication"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":157,"score":1,"question_id":7671474,"title":"publishing(replicating) Oracle to Sql2008r2","body":"<p>Trying to establish transactional replication from oracle server to Sql2008 R2 instance.\nI am able to set up 'Oracle publication' through Replication,New Oracle publication  wizard;every thing seems go fine up to adding articles (oracle table) and able to Map datatypes.\nbut when I choose Transactional Replication, it tells me that the oracle source table I choose do not have a Primary Key. Which is not true.</p>\n\n<p>If choose a snapshot, it goes on a infinite loop.</p>\n\n<p>I noticed that the linked server(to oracle) is using msdaOra provider, Is there a way to force Publication Wizard to use OraOLEDB.Oracle provider when it sets up associated linked server.</p>\n\n<p>any help appreciated</p>\n"},{"tags":["sql","database","oracle","sql-developer","database-administration"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13272225,"title":"Oracle SQL Developer copy database step by step","body":"<p>I'm having big trouble in copying an Oracle DB to the same server but with another name, to use as a development DB.</p>\n\n<p>I'm used to SQL Server, I'm new to Oracle (11g).</p>\n\n<p>I wanted to use the 'Database copy' from SQL Developer, but I'm getting errors all the way. First it was about missing tablespaces.\nThen when I manually created them in my new empty DB the errors were about missing users.\nI wanted to create the users manually, but then I first needed to create missing roles.\nWhen all that was done, it failed on missing indexes...</p>\n\n<p><strong>How do I copy everything I need with 'Database copy'?</strong></p>\n\n<p>Any advice is greatly appreciated!</p>\n"}]}
{"total":22203,"page":2,"pagesize":100,"questions":[{"tags":["oracle","ddl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13272711,"title":"Oracle record automatic created, last modified date","body":"<p>According to specification I need to support two mandatory columns for each table: ADDED_DATE, MODIFIED_DATE.<br>\nThese are intended for DBA/auditing purposes.  </p>\n\n<p>Is it possible to make this stuff totally automatic, implicitly supported by DB itself when I'm inserting / updating records from within application?</p>\n"},{"tags":["database","oracle","date"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":15,"score":2,"question_id":13272463,"title":"select date+time+timezone with oracle db","body":"<p>I would like to get a date with the following format: </p>\n\n<blockquote>\n  <p>2009-01-15T09:13:51.0Z</p>\n</blockquote>\n\n<p>I use the following statement: </p>\n\n<pre><code>SELECT to_char(sysdate, 'YYYY-mm-DD HH24:MI:SS.') \n</code></pre>\n\n<p>But that returns:</p>\n\n<blockquote>\n  <p>2012-11-07 16:12:00.</p>\n</blockquote>\n\n<p>How can I ad the <code>T</code> in the middle and <code>0Z</code> at the end?</p>\n\n<p>Is this possible or do I have to use concatenation?</p>\n"},{"tags":["oracle","odbc","qtp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13230462,"title":"ora 28000 account is locked error in qtp","body":"<p>I am getting the following error while connecting to db for checking db timings through <code>QTP</code> scripts:</p>\n\n<pre><code>\"Cannot update system time with database time due to error: ERROR: [Oracle][ODBC][Ora]ORA-28000: the account is locked\"\n</code></pre>\n\n<p>But the database <code>SID</code> and credentials given are correct and verified the same in some db client. I am not sure why its throwing error in <code>QTP</code>?</p>\n\n<p>Can anyone please help me resolve the issue?</p>\n\n<p>Thanks in Advance.</p>\n"},{"tags":["sql","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13272407,"title":"Using a column in USING and WHERE clause","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/456684/mixing-using-and-on-in-oracle-ansi-join\">Mixing “USING” and “ON” in Oracle ANSI join</a>  </p>\n</blockquote>\n\n\n\n\n\n<p>I like the way <code>USING</code> coalesces the columns, so I tried the following on Oracle's example database:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT *\nFROM employees workers\nJOIN jobs USING (JOB_ID)\nJOIN departments USING (DEPARTMENT_ID)\nLEFT JOIN employees managers ON workers.manager_id = managers.employee_id\nWHERE workers.job_id LIKE '%CLERK'\nORDER BY workers.employee_id;\n</code></pre>\n\n<p>With MySQL this runs fine, but Oracle says \"ORA-25154: column part of USING clause cannot have qualifier\". Is there a way to keep using <code>USING</code> or what is the optimal solution?</p>\n\n<p>Regards</p>\n\n<p>TC</p>\n"},{"tags":["django","oracle","orm","blob","blobstorage"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13270619,"title":"reading raw binary data from blob columns using oracle backend","body":"<p>I'm working with oracle legacy DB and need to read and write binary data (png images, and and MDL Molfiles).\nDjango's inspectdb command generated text fields for these columns, saying that's only a guess.\nNow, when I'm trying to retrieve a value from this class fields i get:\nDjangoUnicodeDecodeError: 'utf8' codec can't decode byte 0x89 in position 0: invalid start byte.\nerror.</p>\n\n<p>Is there any way to read and write these columns?\nAny help would be appreciated.</p>\n"},{"tags":["sql","oracle","plsql","oracle11g"],"answer_count":2,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":35,"score":6,"question_id":13269676,"title":"Issue when comparing result of to_char(myDate, 'DAY') to a string","body":"<p>I have been trying to find what the issue might be but I am just out of luck and don't understand this problem at all.I have the following code:</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION ckeckDay(dateC in date)\nRETURN VARCHAR\nIS\n  day VARCHAR(15);\n  checkFriday VARCHAR(1);\nBEGIN\n  checkFriday := 'N';\n  day := to_char(dateC, 'DAY');\n  IF day = 'FRIDAY' THEN\n    checkFriday := 'Y';\n  END IF;\n  RETURN day;\nEND;\n/\n</code></pre>\n\n<p>the <code>dateC</code> is set to Friday (even tested it by returning <code>day</code> instead of the <code>day</code> variable and it returns Friday.) However the <code>IF</code> statement never evaluates to true even though the <code>day</code> variable is indeed Friday.Any ideas how to go around this issue.Thanks</p>\n"},{"tags":["oracle","stored-procedures","plsql","oracle10g","oracle11g"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13265659,"title":"When should I commit when using FOR UPDATE in a procedure?","body":"<p>If I use a FOR UPDATE clause in a stored procedure when should I \"commit\"? After closing the opened cursor or before closing the opened cursor? Below is the procedure im using, am i doing it in  correct way?                                                                                                            </p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE Proc_UpdateCSClientCount(inMerid     IN  VARCHAR2,\n                                                     outCliCount  OUT NUMBER,\n                                                     outretvalue  OUT NUMBER)\nAS\n   CURSOR c1 IS\n      SELECT CLIENT_COUNT\n        FROM OP_TMER_CONF_PARENT\n       WHERE MER_ID = inMerid\n      FOR UPDATE OF CLIENT_COUNT;\nBEGIN\n   OPEN c1;\n   IF SQL%ROWCOUNT = 1 THEN\n      FETCH c1 INTO outCliCount;\n      outCliCount := outCliCount + 1;\n      UPDATE OP_TMER_CONF_PARENT\n         SET CLIENT_COUNT = outCliCount\n       WHERE CURRENT OF c1;\n   END IF;\n   outretvalue := 0;\n   CLOSE c1;\n   COMMIT;\nEXCEPTION\n   WHEN no_data_found THEN\n      outretvalue := -1;\nEND;\n</code></pre>\n"},{"tags":["oracle","hibernate","jboss"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13269894,"title":"Getting a handle to native Oracle Connection in Hibernate 4 to run a stored proc","body":"<p>This is a follow-up to <a href=\"http://stackoverflow.com/questions/11524984/executing-native-query-with-hibernate-4-1\">Executing native query with Hibernate 4.1</a></p>\n\n<p>I've tried the options in the listed answer but we get errors and are unable to unwrap the proxied connection into the native connection which Oracle needs </p>\n\n<p>Option 2 code</p>\n\n<pre><code>public void execute(Connection connection) throws SQLException {\n    OracleConnection oracleConnection = connection.unwrap( OracleConnection.class );\n    ...\n}\n</code></pre>\n\n<p>Error</p>\n\n<pre><code>java.lang.reflect.UndeclaredThrowableException\nERROR [stderr] (http-localhost/127.0.0.1:8080-3) at $Proxy64.unwrap(Unknown Source)\n</code></pre>\n\n<p>Option 3 code</p>\n\n<pre><code>public void execute(Connection connection) throws SQLException {\n    Connection unproxiedConnection = ( (JdbcWrapper&lt;Connection&gt;) connection ).getWrappedObject();\n    ...\n}\n</code></pre>\n\n<p>Error</p>\n\n<pre><code>java.lang.Exception: javax.ejb.EJBException: java.lang.ClassCastException: org.jboss.jca.adapters.jdbc.jdk6.WrappedConnectionJDK6 cannot be cast to oracle.jdbc.OracleConnection\n</code></pre>\n\n<p>any suggestions?</p>\n\n<p>I've also tried this option <a href=\"http://stackoverflow.com/questions/10731266/sessionfactory-opensessionconnection-in-hibernate-4\">SessionFactory.openSession(Connection) in Hibernate 4</a> but that class does not get instantiated at all</p>\n"},{"tags":["oracle","plsql","smtp","attachment"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13265886,"title":"UTL_SMTP: procedure for sending html+css table in message body and attachement in single letter","body":"<p>Could anybody help me to correct code to send mail with attachment. As result I should send a mail with small table (prepared using html and css) in letter body and .csv as an attachment. The procedure works fine only with message body, but it does not want to send attachment =( :   </p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE test_send_mail(\n    p_sender    IN VARCHAR2,\n    p_recipient IN VARCHAR2,\n    p_subject   IN VARCHAR2,\n    p_message   IN CLOB – table in html)\nas\n    l_mailhost VARCHAR2(255) := 'localhost';\n    l_mail_conn utl_smtp.connection;\n\n    v_add_src  VARCHAR2(4000);\n    v_addr     VARCHAR2(4000);\n    slen number := 1;\n\n    crlf VARCHAR2(2)  := chr(13)||chr(10);\n\n    i      NUMBER(12);\n    len   NUMBER (12);\n    part  NUMBER(12) := 16384;\n\n    -- css for table in letter body\n    l_stylesheet CLOB := '\n       &lt;html&gt;&lt;head&gt;\n       &lt;style type=\"text/css\"&gt;\n                   body     { font-family     : Verdana, Arial;\n                              font-size       : 10pt;}\n\n                   .green   { color           : #00AA00;\n                              font-weight     : bold;}\n\n                   .red     { color           : #FF0000;\n                              font-weight     : bold;}\n\n                   pre      { margin-left     : 10px;}\n\n                   table    { empty-cells     : show;\n                              border-collapse : collapse;\n                              width           : 100%;\n                              border          : solid 2px #444444;}\n\n                   td       { border          : solid 1px #444444;\n                             font-size       : 12pt;\n                              padding         : 2px;}\n\n                   th       { background      : #EEEEEE;\n                              border          : solid 1px #444444;\n                              font-size       : 12pt;\n                              padding         : 2px;}\n\n                   dt       { font-weight     : bold; }\n\n                  &lt;/style&gt;\n                 &lt;/head&gt;\n                 &lt;body&gt;';\n\n\n-- variables for attachment\n/*Table header in attachment*/\nlv_mycolumns   VARCHAR2(32000):= 'A1'||chr(9)||'A2'||chr(9)||'A3'||chr(13)||chr(10);               \nlv_message     VARCHAR2(32000);\n\nCURSOR cur_query\nIS\nSELECT 'help' as  A1, 'me' as  A3, 'please' as  A3\nfrom DUAL; -- I would like to see this table in the attachment\n\nattached_file_name VARCHAR2(50):= 'REPORT_';\nddate VARCHAR2(16):= TO_CHAR (SYSDATE, 'YYYYMMDDHH24MISS');\nfiletype varchar(10):= '.xls'; -- really csv  \n\nBEGIN\n   l_mail_conn := utl_smtp.open_connection(l_mailhost, 25);\n    utl_smtp.helo(l_mail_conn, l_mailhost);\n    utl_smtp.mail(l_mail_conn, p_sender);\n    if(instr(p_recipient,';') = 0) then\n        utl_smtp.rcpt(l_mail_conn, p_recipient);\n    else\n        v_add_src := p_recipient || ';';\n        while(instr(v_add_src,';',slen) &gt; 0) loop\n            v_addr := substr(v_add_src, slen, instr(substr(v_add_src, slen),';')-1);\n            slen := slen+instr(substr(v_add_src, slen),';');\n            Dbms_Output.put_line('rcpt ' || v_addr);\n            utl_smtp.rcpt(l_mail_conn, v_addr);\n    end loop;\n\n  end if;\n\n    utl_smtp.open_data(l_mail_conn );\n    utl_smtp.write_data(l_mail_conn,\n     'MIME-version: 1.0' || crlf ||\n     'Content-Type: text/html; charset=ISO-8859-15' || crlf ||\n     'Content-Transfer-Encoding: 8bit' || crlf ||\n     'Date: '   || to_char(sysdate, 'Dy, DD Mon YYYY hh24:mi:ss') || crlf ||\n     'From: '   || p_sender || crlf ||\n     'Subject: '|| p_subject || crlf ||\n     'To: '     || p_recipient || crlf);\n    utl_smtp.write_raw_data(l_mail_conn, utl_raw.cast_to_raw(l_stylesheet));\n\n    i   := 1;\n    len := DBMS_LOB.getLength(p_message);\n    WHILE (i &lt; len) LOOP\n        utl_smtp.write_raw_data(l_mail_conn, utl_raw.cast_to_raw(DBMS_LOB.SubStr(p_message,part, i)));\n        i := i + part;\n    END LOOP;\n    utl_smtp.write_raw_data(l_mail_conn, utl_raw.cast_to_raw('&lt;/body&gt;&lt;/html&gt;'));\n\n\n-- begin the attachment. This part I need to correct. How?\n\n\nFOR rec IN cur_query\n   LOOP\n      lv_message := rec.A1||chr(9)||rec.A2||chr(9)||rec.A3||chr(13)||chr(10);\n   END LOOP;\n\n\n  -- end connectin\n    utl_smtp.close_data(l_mail_conn );\n    utl_smtp.quit(l_mail_conn);\nend;\n</code></pre>\n\n<p>Thank you in advance.</p>\n"},{"tags":["database","oracle","copy","clone"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13268607,"title":"Easiest way to copy Oracle DB to test DB on same server?","body":"<p>I'm used to working with SQL Server and when I want to copy a DB there, I just need a handful of clicks in the wizard and voila...a complete copy of the DB, without taking the source DB offline.</p>\n\n<p>We now also have an Oracle 11g because some machines require it, and I want to make a copy of the database. Just a copy on the same server, to use as a test DB for my software development.</p>\n\n<p>All instructions that I find are pages full of steps, using RMAN or not, you have to write scripts, use command line stuff...I'm amazed at how inefficient such a common task is when using Oracle.</p>\n\n<p>Aren't there any easy ways of copying a DB? Maybe just exporting everything to a SQL file, then editing it to use another DB name, and then executing it again?</p>\n\n<p>I see that in SQL Developer you can choose 'Database Copy...' from the Tools menu, but it asks a destination connection. How can I select a destination when creating the destination DB is the whole point of running the wizard? Or is a connection not the same as a DB?</p>\n\n<p>Thanks for helping me out here!</p>\n"},{"tags":["c#","oracle","nhibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":39,"score":4,"question_id":13269126,"title":"C# & NHibernate \"Could not compile the mapping document\" on windows service","body":"<p>this is my first question on this page, so first of all sorry for any newbie mistakes and my bad english.</p>\n\n<p>I wouldn't be asking on a page like this if I didn't ran out of ideas on how to solve my problem, so I hope I get it to work with your help since it's my last chance.</p>\n\n<p>I created a program in C# using NHibernate to connect it to my Oracle database (wich is working perfectly), and now I've been told to create a similar program, but now in a Windows Service instead of a .exe.</p>\n\n<p>The problem is that I have all the settings done to make NHibernate work like in the .exe program, and if i debug the program it all works fine, but as soon as I install the service and run it, stops working.</p>\n\n<p>I'm not doing anyhing in the program, just testing the NHibernate connection.</p>\n\n<p>The exception:</p>\n\n<pre><code>Could not compile the mapping document: Mapping\\CSB_Mensaje.hbm.xml\nSystem.IO.DirectoryNotFoundException: No se puede encontrar una parte de la ruta de acceso 'C:\\Windows\\system32\\Mapping\\CSB_Mensaje.hbm.xml'.\n   en System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)\n   en System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)\n   en System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)\n   en System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials, IWebProxy proxy, RequestCachePolicy cachePolicy)\n   en System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn)\n   en System.Xml.XmlTextReaderImpl.OpenUrlDelegate(Object xmlResolver)\n   en System.Threading.CompressedStack.runTryCode(Object userData)\n   en System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)\n   en System.Threading.CompressedStack.Run(CompressedStack compressedStack, ContextCallback callback, Object state)\n   en System.Xml.XmlTextReaderImpl.OpenUrl()\n   en System.Xml.XmlTextReaderImpl.Read()\n   en System.Xml.XmlTextReader.Read()\n   en System.Xml.XmlCharCheckingReader.Read()\n   en System.Xml.XsdValidatingReader.Read()\n   en System.Xml.XmlLoader.Load(XmlDocument doc, XmlReader reader, Boolean preserveWhitespace)\n   en System.Xml.XmlDocument.Load(XmlReader reader)\n   en NHibernate.Cfg.Configuration.LoadMappingDocument(XmlReader hbmReader, String name)\n</code></pre>\n\n<p>The part of the exception on spanish, says it can't find a part of the access path.</p>\n\n<p>This exception is thrown while trying to execute this code:</p>\n\n<pre><code>private static void Init(String BBDD)\n    {\n        Configuration config = new Configuration();\n        config.Configure().SessionFactoryName(BBDD);\n        config.AddFile(\"Mapping\\\\CSB_Mensaje.hbm.xml\");\n        config.AddFile(\"Mapping\\\\CSB_Periodicidad.hbm.xml\");\n        config.AddFile(\"Mapping\\\\CSB_Plantilla.hbm.xml\");\n        config.AddFile(\"Mapping\\\\CSB_Subscripciones.hbm.xml\");\n        config.AddFile(\"Mapping\\\\CSB_Usuario.hbm.xml\");\n        config.AddFile(\"Mapping\\\\CSB_Login.hbm.xml\");\n        config.AddFile(\"Mapping\\\\CSB_Configuration.hbm.xml\");\n        _SessionFactory = config.BuildSessionFactory();\n    }\n</code></pre>\n\n<p>And this is my hibernate.cfg.xml file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;hibernate-configuration xmlns=\"urn:nhibernate-configuration-2.2\"&gt;\n  &lt;session-factory name=\"Oracle\"&gt;\n    &lt;property name=\"connection.provider\"&gt;\n      NHibernate.Connection.DriverConnectionProvider\n    &lt;/property&gt;\n    &lt;property name=\"dialect\"&gt;\n      NHibernate.Dialect.Oracle10gDialect\n    &lt;/property&gt;\n    &lt;property name=\"connection.driver_class\"&gt;\n      NHibernate.Driver.OracleClientDriver\n    &lt;/property&gt;\n    &lt;property name=\"connection.connection_string\"&gt;\n      User Id=CSB;\n      Password=Hound2012;\n      Data Source=(DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.1.30)(PORT = 1521)))(CONNECT_DATA = (SID = HL)));\n    &lt;/property&gt;\n    &lt;property name=\"show_sql\"&gt;\n      true\n    &lt;/property&gt;\n  &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n\n<p>Again, this is my first time asking something here, so I'm sorry for any mistake made. Any help would be greatly apreciated.</p>\n\n<p>Regards,\nKhor</p>\n"},{"tags":["java","oracle","jsp","jdbc","struts"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13269404,"title":"TimeStamp value trimming while retriving from oracle","body":"<p>i have the data in Oracle DB its a TimeStamp filed when i try to retrive it through java program it's trimming the nano seconds value and AM/PM .</p>\n\n<p>Like how in DB :- <code>02-03-11 01:55:10.000000000 AM</code><br />\nWhile Fetching <code>rs.getTimeStamp()</code> - <code>02-03-11 01:55:10.0</code> </p>\n\n<p>i should retrive the complete time .</p>\n\n<p>Please provide a solution .</p>\n\n<p>Thanks in advance ... </p>\n"},{"tags":["oracle","bandwidth","database-link","oracle-net-services"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":714,"score":3,"question_id":6081696,"title":"Is transfer via database link in Oracle 10g compressed ? Is it possible?","body":"<p>I'm transferring data from one base to another via database links (using <code>INSERT INTO SELECT ...</code>).</p>\n\n<p>I want to know if data transferred through the link is compressed or can be compressed to avoid too much network use. I have very little bandwidth, and I think that would help if it's not already done.</p>\n"},{"tags":["oracle","plsql","oracle8i"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":13267084,"title":"How can I check if a procedure exists in a package in Oracle 8?","body":"<p>I see some solutions here for checking for a procedure in a package, but they only work for oracle 9 or 10+.</p>\n\n<p>But is it possible to do this check in Oracle 8i? In Oracle 8 you don't have DBA_PROCEDURES or anything like that.</p>\n\n<p>Any help would be great.</p>\n"},{"tags":["oracle","spring","hibernate","spring-mvc","spring-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13267920,"title":"spring security login not working with oracle","body":"<p>I am working on spring security login using jdbc-user-service. It is working on Mysql but not on oracle. I am using oracle 11 XE.</p>\n\n<p>The queries I have mentioned in  tag are correct because those return expected rows when I run those on oracle console.</p>\n\n<p>The datasource is :</p>\n\n<pre><code>&lt;bean id=\"dataSource\"\n    class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n    &lt;property name=\"driverClassName\" value=\"${jdbc.driver}\" /&gt;\n    &lt;property name=\"url\" value=\"${datasource.url}\" /&gt;\n    &lt;property name=\"username\" value=\"${jdbc.user}\" /&gt;\n    &lt;property name=\"password\" value=\"${jdbc.password}\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>in sessionFactory bean hibernate dialect for oracle is given.</p>\n\n<pre><code>&lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.Oracle10gDialect&lt;/prop&gt;\n</code></pre>\n\n<p>Same code works for mysql and not on oracle. The application control is redirected to login page which I have set in spring security file. This means it is getting username &amp; password correctly.</p>\n\n<pre><code>&lt;form-login login-page=\"/landing\" default-target-url=\"/home\"\n        authentication-failure-url=\"/landing?msg=cw\" /&gt;\n</code></pre>\n\n<p>The authentication provider code in spring security xml is :</p>\n\n<pre><code>&lt;authentication-manager&gt;\n    &lt;authentication-provider&gt;\n    &lt;jdbc-user-service data-source-ref=\"dataSource\"\n            users-by-username-query=\" \n    select USERNAME as username, PASSWORD as password,'true' as enabled from \n    users where USERNAME=?\"\n\n            authorities-by-username-query=\" select u.USERNAME \n    as username, r.ROLE as authority from users u, roles r, user_roles \n    ur where u.USER_ID = ur.USER_ID and ur.ROLE_ID = r.id and u.USER_ID = (SELECT \n    USER_ID from users where USERNAME = ?)\" /&gt;\n\n    &lt;/authentication-provider&gt;\n&lt;/authentication-manager&gt;\n</code></pre>\n\n<p>Is there anything need to be configured in order to use oracle in spring security ?</p>\n\n<p>UPDATE : I set spring security debug and this is what is printing after I try to login.</p>\n\n<pre><code>INFO : Spring Security Debugger - \n\n************************************************************\n\nRequest received for '/j_spring_security_check':\n\norg.apache.catalina.connector.RequestFacade@7262b6\n\nservletPath:/j_spring_security_check\npathInfo:null\n\n  Security filter chain: [\n  ConcurrentSessionFilter\n  SecurityContextPersistenceFilter\n  LogoutFilter\n  UsernamePasswordAuthenticationFilter\n  BasicAuthenticationFilter\n  RequestCacheAwareFilter\n  SecurityContextHolderAwareRequestFilter\n  AnonymousAuthenticationFilter\n  SessionManagementFilter\n  ExceptionTranslationFilter\n  FilterSecurityInterceptor\n]\n\n\n************************************************************\n\n\nINFO : Spring Security Debugger - \n\n************************************************************\n\nRequest received for '/landing?msg=cw':\n\norg.apache.catalina.connector.RequestFacade@bf1a4a\n\nservletPath:/landing\npathInfo:null\n\nSecurity filter chain: [\nConcurrentSessionFilter\nSecurityContextPersistenceFilter\nLogoutFilter\nUsernamePasswordAuthenticationFilter\nBasicAuthenticationFilter\nRequestCacheAwareFilter\nSecurityContextHolderAwareRequestFilter\nAnonymousAuthenticationFilter\nSessionManagementFilter\nExceptionTranslationFilter\nFilterSecurityInterceptor\n]\n\n\n************************************************************\n</code></pre>\n"},{"tags":["oracle","oracle-apex"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13268029,"title":"split oracle apex export","body":"<p>Is it possible to split exported application file into separate files?</p>\n\n<p>For example I exported an application and have <code>f115.sql</code> file. It contains all components but in single file. I want to split it into separate files, such as pages, support components etc. How can it be done?</p>\n"},{"tags":["php","oracle","oracle11g","oci"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13266028,"title":"MERGE INTO doesn't work in PHP?","body":"<p>My <code>MERGE INTO</code> statement works in SQL using SQL Developer:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>MERGE INTO EMAIL_LIST d USING (SELECT 'stackoverflowuser95@gmail.com' EMAIL FROM DUAL) s ON (d.EMAIL = s.EMAIL) WHEN NOT MATCHED THEN INSERT (EMAIL) VALUES (s.EMAIL);\n</code></pre>\n\n<p>But doesn't work when attempted in PHP:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>$update_or_insert_list = oci_parse($conn,\n                                   \"MERGE INTO EMAIL_LIST d USING (SELECT :email EMAIL FROM DUAL) s ON (d.EMAIL = s.EMAIL) WHEN NOT MATCHED THEN INSERT (EMAIL) VALUES (s.EMAIL);\"\n); // Also tried with ':email' and/or with ; inside the SQL statement\n\noci_bind_by_name($update_or_insert_list, ':email', $email);\n\noci_execute($update_or_insert_list);\n</code></pre>\n\n<p>Here is the table:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE EMAIL_LIST ( \n    EMAIL VARCHAR2 (100)  NOT NULL\n);\nALTER TABLE EMAIL_LIST\n    ADD CONSTRAINT PK_EMAIL_LIST PRIMARY KEY ( EMAIL ) ;\n\n-- And yes, this is a test-case!\n</code></pre>\n\n<h3>How do I get MERGE INTO working in PHP?</h3>\n"},{"tags":["oracle","frameworks","apps"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13266279,"title":"Dynamically Creating Radio Button Groups in OAF","body":"<p>My use case is:</p>\n\n<p>Create a questionnaire page with Yes/No questions. The questions will be fnd messages from the database and there can be multiple set of questions. I should be able to display radio buttons for each question with Yes/No question. The rows and radio button groups I need to create programmatically.</p>\n\n<p>I am using Oracle Application Framework (OAF) with JDev 10.1.3.3.0</p>\n"},{"tags":["sql-server","database","oracle","migration"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":20,"score":0,"question_id":13265099,"title":"Migration of SQL Server database to Oracle","body":"<p>I searched many converters and migration tools over internet but couldn't find the one I really need.</p>\n\n<p>Though there are some but they are on trial, I want free one, mysql provides migration facility but it doesn't convert 100%</p>\n"},{"tags":["oracle","websphere-7","xa"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13255747,"title":"Granting Oracle permissions doesn't fix WebSphere XAER_RMERR exception?","body":"<p>I have an application deployed on WebSphere ND 7.0.0.21. Within that I have an Oracle XA datasource configured. Recently the application crashed and when I restarted it, I started getting the following exception in SystemOut.log every second.</p>\n\n<pre><code>[11/6/12 13:55:38:650 GMT] 0000000c InternalGener I   DSRA8205I: JDBC driver name  : Oracle JDBC driver\n[11/6/12 13:55:38:651 GMT] 0000000c InternalGener I   DSRA8206I: JDBC driver version  : 11.2.0.2.0\n[11/6/12 13:55:38:661 GMT] 0000000c InternalOracl I   DSRA8212I: DataStoreHelper name is: com.ibm.websphere.rsadapter.Oracle11gDataStoreHelper.\n[11/6/12 13:55:38:662 GMT] 0000000c WSRdbDataSour I   DSRA8208I: JDBC driver type  : \"\"\n[11/6/12 13:55:38:685 GMT] 0000000c WSRdbXaResour E   DSRA0304E:  XAException occurred. XAException contents and details are: The cause is               : null.\n[11/6/12 13:55:38:837 GMT] 0000000c WSRdbXaResour E   DSRA0302E:  XAException occurred.  Error code is: XAER_RMERR (-3).  Exception is: &lt;null&gt;\n[11/6/12 13:55:38:837 GMT] 0000000c XARminst      E   WTRN0037W: The transaction service encountered an error on an xa_recover operation. The resource was com.ibm.ws.rsadapter.spi.WSRdbXaResourceImpl@7b867b86. The error code was XAER_RMERR. The exception stack trace follows: javax.transaction.xa.XAException\n        at oracle.jdbc.xa.OracleXAResource.recover(OracleXAResource.java:709)\n        at com.ibm.ws.rsadapter.spi.WSRdbXaResourceImpl.recover(WSRdbXaResourceImpl.java:1088)\n        at com.ibm.ws.Transaction.JTA.XARminst.recover(XARminst.java:141)\n        at com.ibm.ws.Transaction.JTA.XARecoveryData.recover(XARecoveryData.java:626)\n        at com.ibm.tx.jta.PartnerLogTable.recover(PartnerLogTable.java:389)\n        at com.ibm.tx.jta.RecoveryManager.resync(RecoveryManager.java:1530)\n        at com.ibm.tx.jta.RecoveryManager.performResync(RecoveryManager.java:2265)\n        at com.ibm.ws.tx.jta.RecoveryManager.performResync(RecoveryManager.java:114)\n        at com.ibm.tx.jta.RecoveryManager.run(RecoveryManager.java:2218)\n        at java.lang.Thread.run(Thread.java:736)\n</code></pre>\n\n<p>This seems to be a standard problem when appropriate permissions have not been granted on the database, to allow the db user access to the transaction requiring recovery - <a href=\"http://www-01.ibm.com/support/docview.wss?uid=swg21196663\" rel=\"nofollow\">http://www-01.ibm.com/support/docview.wss?uid=swg21196663</a></p>\n\n<p>However, I then ran the SQL on that page and restarted the application server, but the problem persisted. The issue only went away when I removed the transaction logs (described as a workaround on the IBM page).</p>\n\n<p>Why would granting the permissions not fix the problem? Can something else cause the XAER_RMERR problem?</p>\n"},{"tags":["oracle","stored-procedures","plsql","oracle10g","oracle11g"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13264743,"title":"Using which one of this is efficient 'WHEN NO_DATA_FOUND THEN 'or 'ELSE'?","body":"<p>In the below two block of codes im using  WHEN NO_DATA_FOUND THEN\nand else which one will be efficient to use.</p>\n\n<pre><code>if outrowcount = 1 then     \n  update Extable set CLIENT_COUNT = outCliCount where cname='xxx';  \n  outretvalue := 0;\nEND IF;\nEXCEPTION\n  WHEN NO_DATA_FOUND THEN\n     outretvalue := -1;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>if outrowcount = 1 then     \n   update Extable set CLIENT_COUNT = outCliCount where cname='xxx';  \n   outretvalue := 0;  \n else\n   outretvalue := -1;\n</code></pre>\n"},{"tags":["oracle","clob","dblink"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13264368,"title":"Improving performance of CLOB insert across a DBLINK in Oracle","body":"<p>I am seeing poor performance in Oracle (11g) when trying to copy CLOBs from one database to another.  I have tried several things, but haven't been able to improve this.</p>\n\n<p>The CLOBs are used for gathering report data.  This can be quite large on a record by record basis.  I am calling a procedure on the remote databases (across a WAN) to build the data, then copying the results back to the database at the corporate headquarters for comparison.  The general format is:</p>\n\n<pre><code>CREATE TABLE my_report(the_db VARCHAR2(30), object_id VARCHAR2(30), \nfinal_value CLOB, CONSTRAINT my_report_pk PRIMARY KEY (the_db, object_id));\n</code></pre>\n\n<p>To gain performance, I accumulate the results for remote sites into remote copies of the table.  At the end of the procedure run, I try to copy the data back.  This query is very simple:</p>\n\n<pre><code>INSERT INTO my_report SELECT * FROM my_report@europe;\n</code></pre>\n\n<p>The performance that I am seeing is around 9 rows per second, with an average CLOB size of 3500 bytes.  (I am using CLOBs as this size often goes above 4k, the VARCHAR2 limit.)  For 70,000 records (not uncommon) this takes around 2 hours to transfer.  I have tried using the <code>create table as select</code> method, but this gets the same performance.  I also spent more than a few hours tuning SQL*NET, but see no improvement from this.  Changing the Arraysize does not improve the performance (though it can reduce it if the value is reduced.</p>\n\n<p>I am able to get a copy over using the old exp/imp methods (export the table from remote, import it back in), which runs much faster, but this is fairly manual for my automated report.  I have considered trying to write a pipelined function to select this data from, using it to split the CLOBS into BYTE/VARCHAR2 chunks (with an additional chunk number column), but didn't want to do this if someone had tried it and found a problem.</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["sql","oracle","parameterized"],"answer_count":2,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":728,"score":6,"question_id":7383121,"title":"Embedded SQL vs Dynamic SQL","body":"<p>I am currently doing a *cough*Oracle*cough* database subject. The lecturer is introducing <a href=\"http://en.wikipedia.org/wiki/Embedded_SQL\" rel=\"nofollow\">embedded SQL</a> as the way you get other languages (e.g. C, C++) to interact with the (Oracle) database.</p>\n\n<p>I have done some database work myself (on mysql) where I use dynamic sql.</p>\n\n<p>As embedded SQL seems to be limited to a few Oracle and a few others, so is this more an attempt at lock-in, or is there real value in embedded SQL?</p>\n\n<p><strong>Edit:</strong> I just realized that the fact this lesson was right after a lesson on PL/SQL may be important.</p>\n\n<p><strong>Original question</strong> asked about parameterized SQL (now replaced by \"dynamic sql\" to improve question).</p>\n\n<p><strong>Aside:</strong> I am thinking that the ~$30 \"SQL and relational theory\" book I bought is teaching me more than this database class. </p>\n"},{"tags":["sql","oracle","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13255427,"title":"Replace first Letter in a field Oracle","body":"<p>Hi Guys I have this Table\n<img src=\"http://i.stack.imgur.com/EvXt6.png\" alt=\"My Original table\"></p>\n\n<p>I need to replace the First Letter in ACCT_NAME with the First Name of ACCT_SHORT_NAME. Records like the Higliighted(RAFFMAN) should not be changed. I have tried:</p>\n\n<pre><code>select acct_name, ACCT_SHORT_NAME,replace(acct_name, substr(acct_name, 1, 1),      ACCT_SHORT_NAME)\n from tbaadm.gam where schm_type = 'TDA' and rcre_user_id  = 'SYSTEM' and substr(acct_name,2,1) = ' '\n</code></pre>\n\n<p>I am getting:</p>\n\n<p><img src=\"http://i.stack.imgur.com/Mvl1k.png\" alt=\"Table after select\"></p>\n\n<p>This means that am Picking the whole value in ACCT_SHORT_NAME. WHat is the best way to do what am trying to do?</p>\n"},{"tags":["java","eclipse","oracle","jdbc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13242901,"title":"Eclipse Oracle Hibernate StringIndexOutOfBoundsException","body":"<p>Getting this odd error during changeover from MySql to Oracle.  Everything worked fine until I switched over to an Oracle driver.  The autowired class SessionFactory is now failing, but with this odd String error:</p>\n\n<pre><code>Nov 5, 2012 4:52:06 PM org.apache.catalina.core.StandardContext listenerStart\nSEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'services': Cannot create inner bean 'com.capitalone.api.socialdata.SocialDataApi#2f729e' of type [com.capitalone.api.socialdata.SocialDataApi] while setting bean property 'serviceBeans' with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.capitalone.api.socialdata.SocialDataApi#2f729e': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.capitalone.api.socialdata.service.SocialDataService com.capitalone.api.socialdata.SocialDataApi.socialDataService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.capitalone.api.socialdata.service.SocialDataServiceImpl#0': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.capitalone.api.socialdata.dao.ProfileDAO com.capitalone.api.socialdata.service.SocialDataServiceImpl.profileDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.capitalone.api.socialdata.dao.ProfileDAOImpl#0': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory com.capitalone.api.socialdata.dao.ProfileDAOImpl.sessionFactory; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/beans.xml]: Invocation of init method failed; nested exception is java.lang.StringIndexOutOfBoundsException: String index out of range: 13068\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:281)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:120)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:153)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)\n    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)\n    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:138)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:662)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.capitalone.api.socialdata.SocialDataApi#2f729e': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.capitalone.api.socialdata.service.SocialDataService com.capitalone.api.socialdata.SocialDataApi.socialDataService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.capitalone.api.socialdata.service.SocialDataServiceImpl#0': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.capitalone.api.socialdata.dao.ProfileDAO com.capitalone.api.socialdata.service.SocialDataServiceImpl.profileDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.capitalone.api.socialdata.dao.ProfileDAOImpl#0': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.hibernate.SessionFactory com.capitalone.api.socialdata.dao.ProfileDAOImpl.sessionFactory; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/beans.xml]: Invocation of init method failed; nested exception is java.lang.StringIndexOutOfBoundsException: String index out of range: 13068\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)\n</code></pre>\n\n<p>Columns mapped in DAO files like such:</p>\n\n<pre><code>@Column(name=\"CHANNEL_NAME\")\nprivate String name;\n</code></pre>\n\n<p>jdbc.properties has these lines:</p>\n\n<pre><code>jdbc.driverClassName=oracle.jdbc.driver.OracleDriver\njdbc.dialect=org.hibernate.dialect.OracleDialect\njdbc.databaseurl=jdbc:oracle:thin:@localhost:3306:MYDB\n</code></pre>\n\n<p>.pom file has this dependency:\n    \n    com.oracle\n    ojdbc5\n    11.2.0.3\n    </p>\n"},{"tags":["oracle","entity-framework","ef-power-tools"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13261018,"title":"Unable to reverse-engineer code-first with EFPowerTools Beta2 VS2012","body":"<p>I want to reverse-engineer code first using PowerTools. It works when I reverse engineer from a local MS-SQL database, but not from Oracle DB. I get the following errors in the output console:</p>\n\n<pre><code>  System.Data.ProviderIncompatibleException: The provider did not return a ProviderManifestToken string. ---&gt; Oracle.DataAccess.Client.OracleException: ORA-1005: null password given; logon denied\n   at Oracle.DataAccess.Client.OracleException.HandleErrorHelper(Int32 errCode, OracleConnection conn, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx, Object src, String procedure, Boolean bCheck)\n   at Oracle.DataAccess.Client.OracleException.HandleError(Int32 errCode, OracleConnection conn, IntPtr opsErrCtx, Object src)\n   at Oracle.DataAccess.Client.OracleConnection.Open()\n   at Oracle.DataAccess.Client.EFOracleProviderServices.GetDbProviderManifestToken(DbConnection connection)\n   at System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection)\n   --- End of inner exception stack trace ---\n   at System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection)\n   at System.Data.Entity.Design.EntityStoreSchemaGenerator.GetProviderSchemaMetadataWorkspace(DbProviderServices providerServices, DbConnection providerConnection, Version targetEntityFrameworkVersion)\n   at System.Data.Entity.Design.EntityStoreSchemaGenerator.CreateStoreSchemaConnection(String providerInvariantName, String connectionString, Version targetEntityFrameworkVersion)\n   at System.Data.Entity.Design.SsdlGenerator.EntityStoreSchemaGeneratorDatabaseSchemaLoader.CreateStoreSchemaConnection(String providerInvariantName, String connectionString, Version&amp; storeSchemaModelVersion)\n   at System.Data.Entity.Design.EntityStoreSchemaGenerator..ctor(String providerInvariantName, String connectionString, String namespaceName)\n   at Microsoft.DbContextPackage.Handlers.ReverseEngineerCodeFirstHandler.ReverseEngineerCodeFirst(Project project)\n</code></pre>\n\n<p>I can do normal generation of EF files by right-click project > add > ADO.NET Entity Data Model > choose \"from Existing DB\" and follow the rest of wizard. I like the powertools better though, for several reasons (mostly the mappings as .cs files). Why can I not reverse engineer when using Oracle? TIA</p>\n"},{"tags":["oracle","jdbc","listener","tnsnames"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":15399,"score":4,"question_id":5661610,"title":"TNS-12505: TNS:listener does not currently know of SID given in connect descriptor","body":"<p>Hey guys.\nLooks like im having the same issue all the oracle newbies once experienced.</p>\n\n<p>Im trying to connect to Oracle 10.2.0 from NetBeans, using the following connection string:</p>\n\n<pre><code>jdbc:oracle:thin:@localhost:1521:XE\n</code></pre>\n\n<p>The weirdest part is that everything worked fine, until the one of the reboots. I started getting this TNS-12505 errors all the time, look at last entries in my listener.log:</p>\n\n<pre><code>TNSLSNR for 32-bit Windows: Version 10.2.0.1.0 - Production on 14-APR-2011 13:46:48\n\nCopyright (c) 1991, 2005, Oracle.  All rights reserved.\n\nSystem parameter file is D:\\oraclexe\\app\\oracle\\product\\10.2.0\\server\\network\\admin\\listener.ora\nLog messages written to D:\\oraclexe\\app\\oracle\\product\\10.2.0\\server\\network\\log\\listener.log\nTrace information written to D:\\oraclexe\\app\\oracle\\product\\10.2.0\\server\\network\\trace\\listener.trc\nTrace level is currently 0\n\nStarted with pid=3460\nListening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(PIPENAME=\\\\.\\pipe\\EXTPROC_FOR_XEipc)))\nListening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=Brodyaga-PC)(PORT=1521)))\nListener completed notification to CRS on start\n\nTIMESTAMP * CONNECT DATA [* PROTOCOL INFO] * EVENT [* SID] * RETURN CODE\n14-APR-2011 13:48:54 * (CONNECT_DATA=(SID=XE)(CID=(PROGRAM=JDBC Thin Client)(HOST=__jdbc__)(USER=Brodyaga))) * (ADDRESS=(PROTOCOL=tcp)(HOST=127.0.0.1)(PORT=58458)) * establish * XE * 12505\nTNS-12505: TNS:listener does not currently know of SID given in connect descriptor\n14-APR-2011 13:49:00 * (CONNECT_DATA=(SID=XE)(CID=(PROGRAM=JDBC Thin Client)(HOST=__jdbc__)(USER=Brodyaga))) * (ADDRESS=(PROTOCOL=tcp)(HOST=127.0.0.1)(PORT=58481)) * establish * XE * 12505\nTNS-12505: TNS:listener does not currently know of SID given in connect descriptor\n14-APR-2011 13:49:02 * (CONNECT_DATA=(SID=XE)(CID=(PROGRAM=JDBC Thin Client)(HOST=__jdbc__)(USER=Brodyaga))) * (ADDRESS=(PROTOCOL=tcp)(HOST=127.0.0.1)(PORT=58487)) * establish * XE * 12505\nTNS-12505: TNS:listener does not currently know of SID given in connect descriptor\n14-APR-2011 13:50:23 * (CONNECT_DATA=(CID=(PROGRAM=)(HOST=)(USER=Brodyaga))(COMMAND=services)(ARGUMENTS=64)(SERVICE=LISTENER)(VERSION=169869568)) * services * 0\n</code></pre>\n\n<p>First three entries are my attempts to connect from NetBeans, fourth - connection via sqlplus, worked just fine. </p>\n\n<p>Here are the contents of my <strong>listener.ora</strong>:</p>\n\n<pre><code>SID_LIST_LISTENER =\n  (SID_LIST =\n    (SID_DESC =\n      (SID_NAME = PLSExtProc)\n      (ORACLE_HOME = D:\\oraclexe\\app\\oracle\\product\\10.2.0\\server)\n      (PROGRAM = extproc)\n    )\n    (SID_DESC =\n      (SID_NAME = CLRExtProc)\n      (ORACLE_HOME = D:\\oraclexe\\app\\oracle\\product\\10.2.0\\server)\n      (PROGRAM = extproc)\n    )\n  )\n\nLISTENER =\n  (DESCRIPTION_LIST =\n    (DESCRIPTION =\n      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC_FOR_XE))\n      (ADDRESS = (PROTOCOL = TCP)(HOST = Brodyaga-PC)(PORT = 1521))\n    )\n  )\n\nDEFAULT_SERVICE_LISTENER = (XE)\n</code></pre>\n\n<p>And <strong>tnsnames.ora</strong>:</p>\n\n<pre><code>XE =\n  (DESCRIPTION =\n    (ADDRESS = (PROTOCOL = TCP)(HOST = Brodyaga-PC)(PORT = 1521))\n    (CONNECT_DATA =\n      (SERVER = DEDICATED)\n      (SERVICE_NAME = XE)\n    )\n  )\n\nEXTPROC_CONNECTION_DATA =\n  (DESCRIPTION =\n    (ADDRESS_LIST =\n      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC_FOR_XE))\n    )\n    (CONNECT_DATA =\n      (SID = PLSExtProc)\n      (PRESENTATION = RO)\n    )\n  )\n\nORACLR_CONNECTION_DATA = \n  (DESCRIPTION = \n    (ADDRESS_LIST = \n      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC_FOR_XE)) \n    ) \n    (CONNECT_DATA = \n      (SID = CLRExtProc) \n      (PRESENTATION = RO) \n    ) \n  ) \n</code></pre>\n\n<p>And output from > <strong>lsnrctl services</strong></p>\n\n<pre><code>C:\\Users\\Brodyaga&gt;lsnrctl services\n\nLSNRCTL for 32-bit Windows: Version 10.2.0.1.0 - Production on 14-APR-2011 13:59\n:45\n\nCopyright (c) 1991, 2005, Oracle.  All rights reserved.\n\nConnecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=EXTPROC_FOR_XE)))\nServices Summary...\nService \"CLRExtProc\" has 1 instance(s).\n  Instance \"CLRExtProc\", status UNKNOWN, has 1 handler(s) for this service...\n    Handler(s):\n      \"DEDICATED\" established:0 refused:0\n         LOCAL SERVER\nService \"PLSExtProc\" has 1 instance(s).\n  Instance \"PLSExtProc\", status UNKNOWN, has 1 handler(s) for this service...\n    Handler(s):\n      \"DEDICATED\" established:0 refused:0\n         LOCAL SERVER\nThe command completed successfully\n</code></pre>\n\n<p>Both Oracle services are started, sqlplus connects fine. Is there some workaround? Im tired of getting this error regularly, without any specific reason.</p>\n"},{"tags":["database","oracle","virtualbox"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1334,"score":1,"question_id":8375515,"title":"TNS:listener does not currently know of SID given in connect descriptor","body":"<p>I got file <code>.ova</code> to restore virtual machine with installed and configured some jee application. Unfortunatelly, I have got some problem with connect to database (which is also preinstalled on that <code>.ova</code> file). I have no idea what it could mean and what should I do. Worth to say, my 2 other coworkers imported whole thing without trouble, they can connect to database. </p>\n\n<p>Anyway on their virtual machine they have connection to the Internet, I don't, could it be the reason? Project use <code>hibernate</code> to connect to <code>localhost</code> with following details: <strong>(but I get the same error with any other tool to connect db)</strong></p>\n\n<pre><code>&lt;bean id=\"dataSource\"\n    class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n    &lt;property name=\"driverClassName\"&gt;\n        &lt;value&gt;oracle.jdbc.driver.OracleDriver&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"url\"&gt;\n        &lt;value&gt;jdbc:oracle:thin:@localhost:1521:xe&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"username\"&gt;\n        &lt;value&gt;ad&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property name=\"password\"&gt;\n        &lt;value&gt;ad&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Another diffrence between my hardware and them, my host system is <code>windows 7 x64</code>, their are  <code>windows xp</code>.</p>\n\n<p>Please help! Thanks in advance!</p>\n"},{"tags":[".net","oracle","authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13260751,"title":"Passing database credentials between applications","body":"<p>I'm developing a lightweight .NET framework (for internal purposes) with single sign functionality. A primary application is first launched, which asks the user to log in. After that, the user is shown a list of applications to launch.</p>\n\n<p>These secondary applications are standalone applications, but they need to use the same credentials to log in to the database (Oracle) as to those that were passed to the primary application.</p>\n\n<p>Is there a secure way of implementing this? Either through passing information on the command line encrypted in some way, or the two applications communicating in one way or another (the primary application has access to the Process that the secondary applications are executed in).</p>\n\n<p>Launching these applications differently would also be possible, if that offered more functionality (i.e. load the executable into the App domain and run it that way).</p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13258990,"title":"Oracle sql to count instances of different values in single column - continuation","body":"<p>This is in continuation to an earlier question I had posted\nHere is the link\n<a href=\"http://stackoverflow.com/questions/13238142/oracle-sql-to-count-instances-of-different-values-in-single-column\">Oracle sql to count instances of different values in single column</a></p>\n\n<p>In further continuation to the pivot query, I am trying to do something like</p>\n\n<p>for col in (\nCount_status20 as col20, \nCount_status30 or Count_status40 as col30,\nCount_status50 as col50)\nThe input remaning the same as earlier question.</p>\n\n<p>Basically here I am trying to sum statuses in 30 or 40 as one column.</p>\n"},{"tags":["oracle","plsql","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13258746,"title":"Oracle LISTAGG() for querying use","body":"<p>So I'm trying to make use of the <strong>LISTAGG()</strong> function to simply build a comma delimited list to use within an underlying query.   The list generation works fine and I just applied an output for debug purposes where I can see my list as it should be:</p>\n\n<blockquote>\n  <p>VALUES:\n  'AB','AZ','BC','CA','CT','DC','FL','FO','GA','IL','KS','MA','MB','ME','MN','MS','MT','NB','NC','NL','NOVA\n  SCOTIA','NS','NT','NU','NY','ON','ONTARIO','OR','PE','QC','QUEBEC','QUÉBEC','SASKATCHEWAN','SK','TX','VT','WA','YT'</p>\n</blockquote>\n\n<p>When I try to pass this list variable to my query however just to see if anything will come back,  nothing comes back, but if I copy / past the provinces / states list from above (as is) instead of using \"v_Province\" in my where clause, I get a result back.  What am I doing wrong?</p>\n\n<pre><code>  DECLARE\n     v_PROVINCE varchar2(500);\n     v_results varchar2(1000);\n  BEGIn\n        dbms_output.enable(1000000);  \n\n       Select '''' || LISTAGG(STATE, ''',''') WITHIN GROUP (ORDER BY STATE) || '''' PROV \n       INTO v_PROVINCE\n       from (Select distinct STATE from ADDRDATA where STATE IS NOT NULL);\n\n   DBMS_OUTPUT.PUT_LINE('VALUES: ' || v_PROVINCE);\n\n   Select CITY\n   INTO v_results\n   from VWPERSONPRIMARYADDRESS\n   where state in (v_Province)\n   AND ROWNUM &lt;= 1;\n\n   DBMS_OUTPUT.PUT_LINE(v_results);\n\n\n  END;\n  /\n</code></pre>\n"},{"tags":["database","oracle","database-design","oracle11g","bitmask"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":13247179,"title":"Alternative design for a bitmask in DB","body":"<p>I have a <code>users</code> table, with following format :</p>\n\n<pre><code>users(id,name.....,settings)\n</code></pre>\n\n<p><code>settings</code> field is of type <code>number</code> and contains a bitmask of settings.</p>\n\n<p>I have to support(inter alia) queries like :</p>\n\n<ul>\n<li>find all users which have setting1, setting23, setting125</li>\n</ul>\n\n<p>Today such a query looks like :</p>\n\n<pre><code> select * from users where bit_and(settings,2^1+2^23+2^125) = 2^1+2^23+2^125\n</code></pre>\n\n<p>Of course it is not a perfect implementation, but it already works in this way a lot of time.</p>\n\n<p>The problem is that today we have 126 different settings and it is exactly the limit of <code>oracle 11g</code> for bitwise operations. That means that we can't add new settings anymore.</p>\n\n<p>I'm trying to find an alternative solution to this issue.\nThe obvious way is instead of setting field, create table of mapping (user-->setting), like :</p>\n\n<pre><code>user_id | setting\n  128   |   1\n  128   |   23\n  128   |   125\n</code></pre>\n\n<p>But then the query like above will be like :</p>\n\n<pre><code>select * \nfrom users u1 join settings s1 on u1.id = s1.user_id and s1.setting  = 1\n              join settings s2 on u1.id = s2.user_id and s2.setting  = 23\n              join settings s3 on u1.id = s3.user_id and s3.setting  = 125\n</code></pre>\n\n<p>It doesn't look good...</p>\n\n<p>So if someone can advise any solution/approach to this issue it will be very helpful...</p>\n"},{"tags":["sql","oracle","query"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13258021,"title":"distinct condition in case statement","body":"<p>I have a SQL that returns a cnt1 and cnt2 for each Event_ID, while testing a condition for column \"POSA\" </p>\n\n<p>this returns the following as desired:</p>\n\n<p>Event_ID | CNT1 | CNT2</p>\n\n<p>I would like to add another condition to each CASE statement that tests if another column \"S\" in the same table is distinct.  Below is the code snippet:</p>\n\n<pre><code>SELECT Event_ID, \n sum  \n (CASE WHEN POSA IN ('SX', 'DX')  THEN 1 \n    ELSE 0 \n END) \n AS cnt1,\nsum \n(CASE  \n    WHEN POSA IN ('SP', 'DP')  THEN 1 \n    ELSE 0 \n END) AS cnt2\n\n\nFROM Station_Processed_Info GROUP BY EVENT_ID;\n</code></pre>\n"},{"tags":["oracle","pivot"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":57,"score":0,"question_id":13238142,"title":"Oracle sql to count instances of different values in single column","body":"<p>I have a table with status column. I want an Oracle sql query which will list me count of rows in each status in only one row.\nfor eg if my table is</p>\n\n<pre><code>Table A\nId       Status  Fkey\n1         20      500\n2         20      500  \n3         30      501\n4         40      501\n5         30      502\n</code></pre>\n\n<p>Output should be</p>\n\n<pre><code>Fkey     Count_status20     Count_status30    Count_status40\n500        2                      0                 0\n501        0                      1                 1\n</code></pre>\n\n<p>A slight twist here</p>\n\n<pre><code>Table B \nFKey TKey \n500   1001 \n501   1001\n502   1002 \n</code></pre>\n\n<p>Now Output should be </p>\n\n<pre><code>TKey Count_status20     Count_status30    Count_status40 \n1001     2                     1                    1 \n1002     0                     1                    0\n</code></pre>\n"},{"tags":["oracle","windows-server-2008-r2","odac"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13258773,"title":"Unable to install 64-bit Oracle 10g Release 2 ODAC 10.2.0.3 for Windows x64 on 64 bit Windows Server 2008 R2","body":"<p>I need to connect an application to Oracle. In the installation guide for that application it says that it requires 64 bit version of Oracle Data Access Component,more specifically 10.2.0.3 . I have tried installing it but I am continuously getting the error attached in the image when ever I try running the installer. The crash details are given in the image attached. Has some one ever tried installing it? If yes then would it be possible to give some details or point me in the right direction so that I can complete this installation.</p>\n\n<p><img src=\"http://i.stack.imgur.com/ccfbj.png\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/yt9Nn.png\" alt=\"enter image description here\">\nThanks </p>\n"},{"tags":["sql","oracle","plsql","oracle11g"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":70,"score":2,"question_id":13257632,"title":"Oracle 11g: How to union an oracle table with itself?","body":"<p>I have a table which looks like the following: </p>\n\n<pre><code>date          code                name    score         set\n09/09/12     967873         Team A         24            1\n09/09/12     967873         Team B         22            1\n09/09/12     967873         Team A         21            2 \n09/09/12     967873         Team B         16            2\n02/04/12     965454         Team X         21            1\n02/04/12     965454         Team Y         19            1\n02/04/12     965454         Team X         21            2\n02/04/12     965454         Team Y         19            2\n</code></pre>\n\n<p>you guessed it right! it's a volleyball match! however, I would like my output to be in a single line. For example: </p>\n\n<pre><code>date           code               Teams                 Set-1    Set-2     Set-3\n09/09/12      967873             Team A VS.Team B       24-22    21-16       -\nand so on.... \n</code></pre>\n\n<p><code>**Notice that the game could have a third set as well</code></p>\n\n<p>I will need some kind of self join to refine the above format to the format that is easier for Users view...Let me know if you need more details.</p>\n\n<p>Thanks,</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13258412,"title":"How to write an alter table statement to add a constraint","body":"<p>I'm, new to SQL. I have created few tables:</p>\n\n<pre><code>CREATE TABLE MAINTINANCE\n(Maint_mname char(10),\nMaint_date date,\nMaint_duedate date NOT NULL,\nMaint_mdesc char (15));    \n\nCREATE TABLE DESIGNERR\n(Dez_emp_number varchar(11),\nDez_field char(12),\nDez_qualification char(10) NOT NULL,\nDez_experience smallint);\n</code></pre>\n\n<p>For the first table I am adding the following constraint:</p>\n\n<pre><code>ALTER TABLE MAINTINANCE ADD CONSTRAINT CHK_maintdate CHECK(Maint_date&lt;MAint_duedate);\n</code></pre>\n\n<p>but I am getting the error <code>invalid ALTER TABLE option</code>. Could you please let me know why this is appearing? The same is working for a friend but not for me.</p>\n\n<p>For the second table I have to write a SQL command for the business rule:</p>\n\n<blockquote>\n  <p>If the Qualification of a Designer is BS then a Minimum of 4 years\n  Experience is required. But, if the Qualification of the Designer is\n  MS then a Minimum of 2 years Experience is sufficient.</p>\n</blockquote>\n\n<p>How can we define this business rule in SQL?</p>\n"},{"tags":["java","oracle","jdbc","statement"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":13249297,"title":"java.sql.SQLException: ORA-00604: error occurred at recursive SQL level 1","body":"<p>I m getting the below SQL exception and I don't know what's the root cause for this exception? I am also closing db connection and statement too. </p>\n\n<pre><code>java.sql.SQLException: ORA-00604: error occurred at recursive SQL level 1\nORA-01000: maximum open cursors exceeded\nORA-00604: error occurred at recursive SQL level 1\nORA-01000: maximum open cursors exceeded\nORA-01000: maximum open cursors exceeded\n</code></pre>\n\n<p>Following is my code:</p>\n\n<pre><code> while(true)\n {\n\n   Statement stmt2 = conn1.createStatement();\n   ResultSet rs2 = null;\n\n   int rec_count=0;\n   rs2 = stmt2.executeQuery(\"select count(*) as cnt from   some_table\");                                  \n    while(rs2.next())\n   {\n     rec_count = rs2.getInt(\"cnt\");\n   }\n\n   if(rec_count&gt;0)\n   {\n     update_qry_b_trg1 = \"update some_table set to_be_triggered=1,algo_status='D',dealer_id='HD001',price_trig_date=sysdate where buy_sell = 'SELL' and ordertype = 'BNLD' and to_be_triggered = 0 and algo_status = 'P' and Mod(group_ref_no,5)=\"+th_id;\n\n   String final_qry = \"BEGIN \\n\"+update_qry_b_trg1+\";\\n\"+\";\\n END;\";\n\n   int rows = stmt1.executeUpdate(final_qry);\n   stmt1.close();\n   }\n\n   rs2.close();\n   stmt2.close();\n\n   }\n</code></pre>\n"},{"tags":["regex","oracle","oracle10g"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13255784,"title":"Regex if-else expression","body":"<p>I'm trying to extract the # of minutes from a text field using Oracle's <code>REGEXP_SUBSTR()</code> function.</p>\n\n<p>Data:</p>\n\n<pre><code>Treatment of PC7, PT1 on left. 15 min.\n15 minutes.\n15 minutes\n15 mins.\n15 mins\n15 min.\n15 min\n15min\n15\n</code></pre>\n\n<p>In each case, I'm hoping to extract the '15' part of the string.</p>\n\n<p>Attempts:</p>\n\n<ul>\n<li><code>\\d+</code> gets all of the numeric values, including the '7' and '1', which is undesirable.</li>\n<li><code>(\\d)+(?=\\ ?min)</code> get the '15' from all rows except the last.</li>\n<li><code>(?((\\d)+(?=\\ ?min))((\\d)+(?=\\ ?min))|\\d+)</code>, a conditional statement, doesnt' match anything.</li>\n</ul>\n\n<p>What is wrong with my conditional statement?</p>\n\n<p>** EDIT **</p>\n\n<pre><code>WITH DATA AS (\n\n  SELECT 'Treatment of PC7, PT1 on left. 15 min.' COMMENTS FROM DUAL\n\n  UNION ALL\n\n  SELECT '15 minutes.' COMMENTS FROM DUAL\n\n  UNION ALL\n\n  SELECT '15 minutes' COMMENTS FROM DUAL\n\n  UNION ALL\n\n  SELECT '15 mins.' COMMENTS FROM DUAL\n\n  UNION ALL\n\n  SELECT '15 mins' COMMENTS FROM DUAL\n\n  UNION ALL\n\n  SELECT '15 min.' COMMENTS FROM DUAL\n\n  UNION ALL\n\n  SELECT '15 min' COMMENTS FROM DUAL\n\n  UNION ALL\n\n  SELECT '15min' COMMENTS FROM DUAL\n\n  UNION ALL\n\n  SELECT '15' COMMENTS FROM DUAL\n\n)\n\nSELECT  COMMENTS,\n        REGEXP_SUBSTR(COMMENTS, '(\\d+)\\s?(?:min.*)?$', 1, 1) A,\n        REGEXP_SUBSTR(COMMENTS, '\\d+?(?= ?min)|^\\d+$', 1, 1) B,\n        REGEXP_SUBSTR(COMMENTS, '\\d+?(?: ?min)|^\\d+$', 1, 1) C\n\nFROM DATA\n</code></pre>\n\n<p>Results (there must be a better way to format columns than as 'code sample'):</p>\n\n<pre><code>COMMENTS A B C\nTreatment of PC7, PT1 on left. 15 min.          \n15 minutes.         \n15 minutes          \n15 mins.            \n15 mins         \n15 min.         \n15 min          \n15min           \n15  15  15  15\n</code></pre>\n"},{"tags":["oracle","odp.net"],"answer_count":5,"favorite_count":17,"up_vote_count":17,"down_vote_count":0,"view_count":6860,"score":17,"question_id":923283,"title":"What is the minimal setup required to deploy a .NET application with Oracle client 11?","body":"<p>What is the minimal setup required to be able to deploy a .NET application that talks to an Oracle database?</p>\n"},{"tags":["oracle","audit-trail"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13257086,"title":"Oracle Fine Grained Auditing for entire schema","body":"<p>I need to log all sql queries running in an Oracle database I have (non-production, running Oracle 11g enterprise). How I would like to do this, is to use Oracle's Fine Grained Auditing, since it logs the exact query and does so in the db, which is much more useful for me. However , it seems from the documentation (http://docs.oracle.com/cd/B19306_01/network.102/b14266/cfgaudit.htm#i1011783) that you are required to specify a table name, with no default. </p>\n\n<p>Is it possible to use Oracle fine grained auditing to audit all queries on a schema?</p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13256561,"title":"SQL query, oracle pl/sql","body":"<p>I need to create a table in oracle DB that the index is increasing by 1 on insertion.<br>\nI have the code that does it, first create table, then create sequence and finally create the trigger.<br>\nwhen I type them, one by one, into the Oracle SQL Developer, paste the create table lines and commit, then the rest, one by one, it works, but if i father them all, and click run script, it does not create the sequence + trigger. only the table.  </p>\n\n<p>i separate the commands with /<br>\nany other thoughts ? or reference to working script ?</p>\n\n<p>thanks !</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":536,"score":1,"question_id":10848277,"title":"Difference between object and record type","body":"<p>I am just curious whats the difference between object and record type in oracle, More specifically between the below declarations</p>\n\n<pre><code>create type emp2_oty is object (\n\nempno number,\n\nename varchar2(20),\n\ndeptno number\n\n);\n\ncreate type emp2_nt is table of emp2_oty;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>type emp2_oty is record(\n\nempno number,\n\nename varchar2(20),\n\ndeptno number\n\n);\n\ncreate type emp2_nt is table of emp2_oty;\n</code></pre>\n\n<p>Please elaborate /</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13255030,"title":"Oracle SQL - How to use the data dictionary","body":"<p>Oracle SQL - How to use the data dictionary</p>\n\n<p>I was trying oracle sql and was trying to find the name of all indexes owned by a user with the names of index keys in each index.</p>\n\n<p>I try to find from user_indexes in system catalogue view and display INDEX_NAME, INDEX_TYPE, COLUMN_NAME, COLUMN_POSITION but </p>\n\n<p>Below is what I tried:</p>\n\n<pre><code>select table_name, column_name, data_type from user_tab_columns;\n</code></pre>\n\n<p>But its seems insufficient to display all the user_indexes.. what should i do</p>\n"},{"tags":["oracle","outer-join","self-join"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13255537,"title":"How to do a self outer join in Oracle?","body":"<p>How can one do a self outer join in oracle ? (I'm using 11g)</p>\n\n<p>I tried the following query with lots of combinations of (+) everywhere and left/right :</p>\n\n<pre><code>select t1.name, t1.status, t2.status\nfrom my_tab t1 outer join my_tab t2\non t1.name = t2.name\nwhere t1.year= X and t2.year = Y and t1.status &lt;&gt; t2.status;\n</code></pre>\n\n<p>expected result : people who changed status between year X and Y, as well as new people and people who disappeared</p>\n\n<p>got only people who changed status</p>\n\n<hr>\n\n<p>Oracle's <a href=\"http://docs.oracle.com/cd/B12037_01/server.101/b10759/queries006.htm\" rel=\"nofollow\">doc</a> says that </p>\n\n<blockquote>\n  <p>You cannot use the (+) operator to outer-join a table to itself</p>\n</blockquote>\n\n<p>Does it apply only to the (+) operator, or should I read \"you cannot outer join a table to itself\" ? </p>\n"},{"tags":["oracle","unit-testing","plsql","refactoring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13254006,"title":"What can i do in Oracle in order to preserve the savepoint if internal commit occurs?","body":"<p><strong>background:</strong>\ni'm doing some Oracle plsql refactoring; The first think that i want to accomplish is to have unit test for the principal components.</p>\n\n<p>For this i'm using ruby with the gem plsq-spec <a href=\"https://github.com/rsim/ruby-plsql-spec\" rel=\"nofollow\">https://github.com/rsim/ruby-plsql-spec</a></p>\n\n<p>In order to execute the tests several times, i'm using Oracle Savepoints after open the database conection, and doing a rollback to the savepoint before close the connection</p>\n\n<p><strong>Problem:</strong>\nSome test can't be executed more than one time, because some procedures had internal commits.</p>\n\n<p><em>What can i do in Oracle in order to preserve the savepoint if internal commit/rollback occurs?</em></p>\n\n<p>With this information in the note apparently what I want is impossible\n<a href=\"http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/savepoint_statement.htm\" rel=\"nofollow\">http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/savepoint_statement.htm</a></p>\n\n<blockquote>\n  <p>A simple rollback or commit erases all savepoints. When you roll back\n  to a savepoint, any savepoints marked after that savepoint are erased.\n  The savepoint to which you roll back remains.</p>\n</blockquote>\n\n<p>so, the only solutions are?:</p>\n\n<ul>\n<li>modify the procedures</li>\n<li>erase all data before execute the tests?</li>\n</ul>\n\n<p>tks</p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13254895,"title":"Oracle Query to Fill in Day Gaps Between Grouped Records","body":"<p>Not really sure where to start with the query, but I have two tables, TEST_A and TEST_B.</p>\n\n<p>TEST_B contains a specific date range for a certain ID, while TEST_A contains the date ranges for the ID with a provided ASSIGNMENT value.</p>\n\n<p>Below is the DDL to create and populate the tables.</p>\n\n<pre><code>CREATE TABLE TEST_A\n(\n  ID          VARCHAR2(5),\n  START_DATE  DATE,\n  END_DATE    DATE,\n  ASSIGNMENT  VARCHAR2(25)\n)\nSTORAGE    (\n            BUFFER_POOL      DEFAULT\n           )\nLOGGING \nNOCOMPRESS \nNOCACHE\nNOPARALLEL\nNOMONITORING;\n\n\nCREATE TABLE TEST_B\n(\n  ID          VARCHAR2(5),\n  START_DATE  DATE,\n  END_DATE    DATE\n)\nSTORAGE    (\n            BUFFER_POOL      DEFAULT\n           )\nLOGGING \nNOCOMPRESS \nNOCACHE\nNOPARALLEL\nNOMONITORING;\n</code></pre>\n\n<p>And the script to populate the tables:</p>\n\n<pre><code>INSERT INTO TEST_A(ID, START_DATE, END_DATE, ASSIGNMENT)\nVALUES('A', TO_DATE('01/01/2010', 'MM/DD/YYYY'), TO_DATE('01/31/2010', 'MM/DD/YYYY'), 'Lot A');\n\nINSERT INTO TEST_A(ID, START_DATE, END_DATE, ASSIGNMENT)\nVALUES('A', TO_DATE('02/01/2010', 'MM/DD/YYYY'), TO_DATE('02/15/2010', 'MM/DD/YYYY'), 'Lot A');\n\nINSERT INTO TEST_A(ID, START_DATE, END_DATE, ASSIGNMENT)\nVALUES('A', TO_DATE('02/18/2010', 'MM/DD/YYYY'), TO_DATE('02/28/2010', 'MM/DD/YYYY'), 'Lot C');\n\nINSERT INTO TEST_A(ID, START_DATE, END_DATE, ASSIGNMENT)\nVALUES('A', TO_DATE('03/01/2010', 'MM/DD/YYYY'), TO_DATE('03/31/2010', 'MM/DD/YYYY'), 'Lot D');\n\nINSERT INTO TEST_A(ID, START_DATE, END_DATE, ASSIGNMENT)\nVALUES('B', TO_DATE('08/01/2010', 'MM/DD/YYYY'), TO_DATE('08/31/2010', 'MM/DD/YYYY'), 'Lot E');\n\nINSERT INTO TEST_A(ID, START_DATE, END_DATE, ASSIGNMENT)\nVALUES('B', TO_DATE('09/15/2010', 'MM/DD/YYYY'), TO_DATE('09/30/2010', 'MM/DD/YYYY'), 'Lot E');\n\nINSERT INTO TEST_A(ID, START_DATE, END_DATE, ASSIGNMENT)\nVALUES('C', TO_DATE('09/15/2010', 'MM/DD/YYYY'), TO_DATE('09/30/2010', 'MM/DD/YYYY'), 'Lot E');\n\n\nINSERT INTO TEST_B(ID, START_DATE, END_DATE)\nVALUES('A', TO_DATE('01/01/2010', 'MM/DD/YYYY'), TO_DATE('12/31/2099', 'MM/DD/YYYY'));\n\nINSERT INTO TEST_B(ID, START_DATE, END_DATE)\nVALUES('B', TO_DATE('08/01/2010', 'MM/DD/YYYY'), TO_DATE('12/31/2099', 'MM/DD/YYYY'));\n\nINSERT INTO TEST_B(ID, START_DATE, END_DATE)\nVALUES('C', TO_DATE('01/01/2010', 'MM/DD/YYYY'), TO_DATE('12/31/2099', 'MM/DD/YYYY'));\n</code></pre>\n\n<p>From the data, I would need to group those records from TEST_A by the Assignment, and fill in the missing day gaps in between. The records for each ID should also cover the whole start and end date as provided in the table TEST_B. To further explain, the resulting data I need would look like this:</p>\n\n<pre><code>ID  START_DATE  END_DATE     ASSIGNMENT\nA   01/01/2010  02/15/2010   Lot A\nA   02/16/2010  02/17/2010   {NULL}\nA   03/01/2010  03/31/2010   Lot D\nA   04/01/2010  12/31/2099   {NULL}\nB   08/01/2010  08/31/2010   Lot E\nB   09/01/2010  09/14/2010   {NULL}\nB   09/15/2010  09/30/2010   Lot E\nB   10/01/2010  12/31/2099   {NULL}\nC   01/01/2010  09/14/2010   {NULL}\nC   09/15/2010  09/30/2010   Lot E\nC   10/01/2010  12/31/2099   {NULL}\n</code></pre>\n\n<p>Appreciate any help on building the query for this. LAG function comes into mind but I am unsure how to properly write it off. Thanks.</p>\n\n<p>Addition:\nIf a Stored Procedure will provide flexibility in handling this, then that would still be an accepted solution.</p>\n"},{"tags":["database","algorithm","oracle","scaling"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13254422,"title":"Database Algorithmic Scaling","body":"<p>I've recently been tasked with doing some \"big data\" stuff with an existing Oracle database. The relevant table has 300 million entries, and is ridiculously slow. Are there any good books out there that explain how various options in the DB construction effect the algorithmic scaling (O(n), etc) of various queries? And how different query operations themselves effect scalings? </p>\n\n<p>I'd prefer to get an understanding of how the underlying algorithms work rather than just ad hoc suggestions.</p>\n"},{"tags":["sql","oracle","olap","cube"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12081229,"title":"Oracle OLAP Expression/Analytical Functions and NA Values","body":"<p>This question is specific to NA values and Oracle OLAP Expression Syntax.</p>\n\n<p><a href=\"http://docs.oracle.com/cd/E11882_01/olap.112/e23381.pdf\" rel=\"nofollow\">http://docs.oracle.com/cd/E11882_01/olap.112/e23381.pdf</a></p>\n\n<p>I am trying to perform some simple avg and sum calculations and there are specific cases where I will have NA values.  It does not appear to exist as part of the Expression Syntax, but is there anyway to perform one of these calcs and skip these values?</p>\n"},{"tags":["oracle","oracle10g","passwords","oracle11g","stdin"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":13203277,"title":"Automate expired password change","body":"<p>In short, I want to automate a self-serve expired password change via a shell script without admin intervention.</p>\n\n<p>Unfortunately, my approach fails and I'm uncertain why:</p>\n\n<pre><code>sqlplus -S /nolog &lt;&lt; !\nconnect $userid/$password\nxyzzy1                                            # my original uses $newpass\nxyzzy1                                            # but results are the same\nselect distinct version from product_component_version;\nexit;\n!\n</code></pre>\n\n<p>produces</p>\n\n<pre><code>ERROR: ORA-28001: the password has expired        # connection succeeded\nChanging password for USER\nNew password:                                     # carriage return succeeded?\nRetype new password:                              # carriage return succeeded?\nERROR: ORA-00988: missing or invalid password(s)  # variables/STDIN may be NULL?\nPassword unchanged\nSP2-0042: unknown command \"xyzzy1\" - rest of line ignored.\nSP2-0042: unknown command \"xyzzy1\" - rest of line ignored.\nSP2-0640: Not connected\n</code></pre>\n\n<p>It seems to ignore the passed responses to the request for a new password but at the same time, it doesn't hang.</p>\n\n<p>Connecting manually and providing the same responses interactively <em>does</em> work.  I'm wondering why the password change process doesn't accept STDIN.</p>\n\n<p>Any ideas?</p>\n\n<p>Note: the year old question <a href=\"http://stackoverflow.com/questions/5005999/programmatically-change-expired-oracle-db-password\">Programmatically Change Expired Oracle DB Password?</a> was offered while writing this and, although it has exactly what I derived, it does not work for me.  I'm unsure of etiquette in this regard so apologies in advance for (re)posting.</p>\n\n<p>My environment is Solaris and Oracle 10g/11g.</p>\n"},{"tags":["sql","oracle"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13253009,"title":"Oracle SQL , how to use current date - a specified date","body":"<p>For getting current date i use this..</p>\n\n<pre><code>select extract(year from sysdate) from dual;\n</code></pre>\n\n<p>For getting the date that my database hold i use this..</p>\n\n<pre><code>select extract(year from startdate) from staff;\n</code></pre>\n\n<p>But now i am trying to update a field call serviceYears inside staff, by using </p>\n\n<p><code>current year - year of start date</code> </p>\n\n<p>to get the amount of years the staff have committed to work. how do i achieve it..</p>\n\n<p>i am using oracle sql</p>\n\n<p><strong>Thanks!</strong></p>\n\n<p>I tried to use </p>\n\n<pre><code>SQL&gt; select dual.sysdate-staff.startdatefrom dual,staff;\n\nselect dual.sysdate-staff.startdatefrom from dual,staff\n            *\nERROR at line 1:\nORA-01747: invalid user.table.column, table.column, or column specification\n</code></pre>\n\n<p>I also tried</p>\n\n<pre><code>select SYSDATE-to_date('01-jan-2007','dd-mon-yyyy') from dual;\n\nBut it return me\nSYSDATE-TO_DATE('01-JAN-2007','DD-MON-YYYY')\n--------------------------------------------\n                                  2136.93719\n</code></pre>\n\n<p>How do i just get the year?</p>\n"},{"tags":["oracle","replication","vertica"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12938039,"title":"How to implement ORACLE to VERTICA replication?","body":"<p>I am in the process of creating an Oracle to Vertica process!\nWe are looking to create a Vertica DB that will run heavy reports. For now is all cool Vertica is fast space use is great and all well and nice until we get to the main part getting the data from Oracle to Vertica.\nOK, initial load is ok, dump to csv from Oracle to Vertica, load times are a joke no problem so far everybody things is bad joke or there's some magic stuff going on! well is Simply Fast.\nBad Part Now -> Databases are up and going ORACLE/VERTICA - and I have data getting altered in ORACLE so I need to replicate my data in VERTICA. What now:\nFrom my tests and from what I can understand about Vertica insert, updates are not to used unless maybe max 20 per sec - so real time replication is out of question.\nSo I was thinking to read the arch log from oracle and ETL -it to create CSV data with the new data, altered data, deleted values-changed data and then applied it into VERTICA but I can not get a list like this:</p>\n\n<p>Because explicit data change in VERTICA leads to slow performance.</p>\n\n<p>So I am looking for some ideas about how I can solve this issue, knowing I cannot:</p>\n\n<ol>\n<li>Alter my ORACLE production structure.</li>\n<li>Use ORACLE env resources for filtering the data.</li>\n<li>Cannot use insert, update or delete statements in my VERTICA load process.</li>\n</ol>\n\n<p>Things I depend on:</p>\n\n<ol>\n<li>The use of copy command </li>\n<li>Data consistency </li>\n<li>A max of 60 min window(every 60 min - new/altered data need to go to VERTICA).</li>\n</ol>\n\n<p>I have seen the Continuent data replication, but it seems that nowbody wants to sell their prod, I cannot get in touch with them.</p>\n"},{"tags":["c#",".net","database","oracle","stored-procedures"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13253000,"title":"ORA-06550 wrong number or types of arguments when calling Oracle stored procedure","body":"<pre><code>procedure select_card_transaction(trans_id   nvarchar2,\n                                    usr_id    number,\n                                    Quantity out number) is\n  begin\n    select count(*)\n      into Quantity\n      from user_cards u\n     where u.transaction_id = trans_id\n       and u.user_id = usr_id;\n  end;\n</code></pre>\n\n<p><strong>and Consuming it:</strong></p>\n\n<pre><code>using(var conn = new OracleConnection(Settings.Default.OraWUConnString))\n            { \n                var cmd = conn.CreateCommand();\n                cmd.CommandText = \"for_temporary_testing.select_card_transaction\";\n                cmd.CommandType = CommandType.StoredProcedure;\n\n\n\n                cmd.Parameters.AddWithValue(\"trans_id\", TransactionID);\n                cmd.Parameters.AddWithValue(\"usr_id\", UserID);\n\n                var q = new OracleParameter(\"Quantity\", OracleType.Number);\n                q.Direction = ParameterDirection.Output;\n                cmd.Parameters.Add(q);\n                //cmd.Parameters[0].OracleType = OracleType.NVarChar;\n                //cmd.Parameters[1].OracleType = OracleType.Number; \n\n                conn.Open();\n                var obj = cmd.ExecuteNonQuery();\n\n                conn.Close();\n                return (int)q.Value == 1;\n            }\n</code></pre>\n\n<p>It returns the following error.\nORA-06550 wrong number or types of arguments when calling Oracle stored procedure...\n<strong>ANY IDEA?</strong></p>\n"},{"tags":["oracle","configuration","puppet"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13201265,"title":"Use Puppet to test connection of Oracle database","body":"<p>My application needs Oracle database as a pre-requisite. So before install my app, I prepare a property file like below:</p>\n\n<pre><code>DB_CONNECTION_STRING=oracle_server:1526:SID\nUSER_NAME=xxxx\nUSER_PSWD=xxxx\n</code></pre>\n\n<p>I want to configure Puppet to check the availablity of Oracle database before deployment.\nAny one know how to do it with Puppet?</p>\n\n<p>Any Puppet expert here to help please? \nTo rephase, this is how to use Puppet to read the property file and use the properties to try to connect a remote Oracle database.</p>\n"},{"tags":["java","oracle","jdbc","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13253254,"title":"Can't start sql db in 11g through jdbc.Getting java sql exception","body":"<pre><code>import java.sql.SQLException;\nimport oracle.jdbc.pool.OracleDataSource;\nimport java.sql.Statement;\nimport java.util.Properties;\nimport oracle.jdbc.OracleConnection;\n\npublic class Test {\n\nstatic final String url2= \"jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP \n\n(HOST=192.168.1.171)(PORT=5521))\"+\"(CONNECT_DATA =(SERVICE_NAME = rdbms)))\";\n\npublic static void main(String[] args) throws SQLException {\n\n            OracleDataSource ds = new OracleDataSource();\n           Properties prop = new Properties();\n           prop.setProperty(\"user\",\"system\");\n           prop.setProperty(\"password\",\"manager\");\n           prop.setProperty(\"internal_logon\",\"sysdba\");\n           prop.setProperty(\"prelim_auth\",\"true\");\n           ds.setConnectionProperties(prop);\n           ds.setURL(url2);\n           OracleConnection conn = (OracleConnection)ds.getConnection();\n           conn.startup(OracleConnection.DatabaseStartupMode.NO_RESTRICTION);\n           conn.close();\n    }\n}\n</code></pre>\n\n<p>getting</p>\n\n<pre><code>Exception in thread \"main\" java.sql.SQLException: Listener refused the connection with the following error:\nORA-12514, TNS:listener does not currently know of service requested in connect descriptor\n</code></pre>\n\n<p>Can anyone help with this?</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":13252444,"title":"Oracle SQL vs Oracle PL/SQL","body":"<p>I have to learn Oracle SQL for work and am very tempted by the O'Reilly book 'Oracle PL/SQL Programming' as it has been so highly reviewed. However, I am unclear as to whether or not PL/SQL is a different language to SQL or if it is just a superset or if it something else. Can  someone please help me here? Thanks. </p>\n"},{"tags":["c#","oracle","enterprise-library","odp.net"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13252511,"title":"Connecting Oracle using ODP.NET with Enterprise Library DAAB","body":"<p><strong>Sorry for the long post.</strong></p>\n\n<p>Our application is using Enterprise Library DAAP to support both oracle and sql databases.  </p>\n\n<p>One of the Stored Procedure is for uploading Image to Table.\nIt's a BLOB field and the parameter is set to DbType.Binary.</p>\n\n<p>This functionality works without any problem for SQL, But when comes to Oracle\nI hit the 32K parameter size limit issue. </p>\n\n<p>As suggested in SO, I moved the code to ODP.NET, but I am still facing the same problem.</p>\n\n<p>My App.config file setting:</p>\n\n<pre><code>&lt;configuration&gt;\n&lt;configSections&gt;\n    &lt;section name=\"dataConfiguration\" type=\"Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" /&gt;\n&lt;/configSections&gt;\n&lt;dataConfiguration defaultDatabase=\"Oracle\"&gt;\n    &lt;providerMappings&gt;\n        &lt;add databaseType=\"Microsoft.Practices.EnterpriseLibrary.Data.Oracle.OracleDatabase, Microsoft.Practices.EnterpriseLibrary.Data, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\"\n            name=\"Oracle.DataAccess.Client\" /&gt;\n    &lt;/providerMappings&gt;\n&lt;/dataConfiguration&gt;\n&lt;connectionStrings&gt;\n    &lt;add name=\"Oracle\" connectionString=\"Data Source=MYORACSER;USER ID=UNAME;PASSWORD=MYPWD;\"\n        providerName=\"Oracle.DataAccess.Client\" /&gt;\n&lt;/connectionStrings&gt;\n</code></pre>\n\n<p></p>\n\n<p><strong>In my application code I am using enterprise library to access the DB</strong></p>\n\n<pre><code> Database db = DatabaseFactory.CreateDatabase(); \n DbCommand cmd = db.GetStoredProcCommand(spName);\n cmd.CommandType = CommandType.StoredProcedure;\n db.AddInParameter(cmd, \"DOCIMAGE\", DbType.Binary, GetByteArrayFromFile(filePath));\n db.AddOutParameter(cmd, \"return_value\", DbType.Int32, 128);\n int row = db.ExecuteNonQuery(cmd);\n</code></pre>\n\n<p><strong>I have the following assemblies referenced in my project:</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/6NBFO.gif\" alt=\"enter image description here\"></p>\n\n<p><strong>Now when I run the application, Ent Lib DAAP is supposed to be using Oracle.DataAccess.Client, but It is still wired to oracle db through System.Data.OracleClient. So 32K limit is still there.</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/OWach.gif\" alt=\"enter image description here\"></p>\n\n<p><strong>Why it is not using Oracle Data Provider as I have clearly mentioned in App.config?</strong></p>\n\n<p>In one post, It is mentioned to use the following snippet as a workaround,</p>\n\n<pre><code>DbProviderFactory providerFactory = DbProviderFactories.GetFactory(\"Oracle.DataAccess.Client\");\nDatabase db = GenericDatabase(connectionString, providerFactory); \n</code></pre>\n\n<p><strong>This one seems working.</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/SSX3S.gif\" alt=\"enter image description here\"></p>\n\n<p>But the instantiated Database is of GenericDatabase instead of OracleDatabase, may be that's why even this work around still throwing exception when file size is over 32K.</p>\n\n<p><strong>How do I use ODP.NET with Enterprise Library for 32K size limit issue?</strong></p>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":106,"score":1,"question_id":12564918,"title":"Why Oracle is saying not a GROUP BY expression?","body":"<p>I am Trying to retrive data from the Oracle database table with following conditions </p>\n\n<ol>\n<li>All entries found by zip-code should be grouped, sorted by zip-code descending.</li>\n<li>entries found by city should be grouped, sorted alphabetically.</li>\n<li>All entries found by dealername should be grouped, sorted alphabetically.</li>\n</ol>\n\n<p>To staisfy the above conditions I wrote the query like below</p>\n\n<pre><code> SELECT DISTINCT ba.uuid AS uuid, COUNT(*) over() AS rowcount FROM basicaddress ba \n    WHERE ba.postalcode='143456' OR ba.lastname LIKE '%143456%' OR ba.city LIKE '%143456%'\n    GROUP BY\n            CASE WHEN ba.postalcode='143456' THEN ba.postalcode END \n    ORDER BY \n            CASE WHEN ba.postalcode='143456' THEN ba.postalcode END DESC, \n            CASE WHEN ba.lastname LIKE '%143456%' THEN ba.lastname END ASC, \n            CASE WHEN ba.city LIKE '%143456%' THEN ba.city ELSE ba.postalcode END DESC\n</code></pre>\n\n<p>This query is working fine in MYSQL but in oracle it is saying <em>\"not a GROUP BY expression\"</em></p>\n\n<p>Any help will be greatly appriciated</p>\n"},{"tags":["java","oracle","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":42,"score":0,"question_id":13251646,"title":"quering oracle view with hibernate everytime results to null","body":"<p>i've built an entitybean using the hibernate tools from an existing oracle view.\nThe problem is that every query results to NULL.</p>\n\n<p>I have searched the web to find a solution but i didn't find one.</p>\n\n<p>I've tried something like this:</p>\n\n<pre><code>public static List&lt;View&gt; getBillRecord()\n  {\n    Query query = em.createQuery(\"from View where column=123\");\n    return query.getResultList();\n  }\n</code></pre>\n\n<p>The resulting query seems to be ok when i switch on \n<code>&lt;property name=\"show_sql\"&gt;true&lt;/property&gt;</code> in hibernate.cfg.xml.</p>\n\n<p>Any suggestions/hints?</p>\n"},{"tags":["mysql","sql","oracle","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":57,"score":-4,"question_id":13251647,"title":"SQL query to get one distinct row in a table","body":"<p>In my table i am having 20 columns with redundant rows.</p>\n\n<p>What is the SQL query to get only one distinct row. <code>SELECT DISTINCT(COL1) FROM TABLE1;</code> this gives unique record for that column but i want all the rows how to do it??</p>\n"},{"tags":["oracle","merge","oracle10g","sequence","returning"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13251501,"title":"How to return primary key from oracle merge query","body":"<p>I want to return the primary key from an oracle merge query. \nI'm using a single statement to insert if not exist and I don't want to use procedure or function to do so.. </p>\n\n<p>this is the sample query</p>\n\n<pre><code>merge into myTable e\n  using (select :empname name from dual) s\n  on (UPPER(TRIM(e.empname)) = UPPER(TRIM(s.name)))\n  when not matched then insert (empname) \n    values (s.name)\n</code></pre>\n\n<p>and I need to get another primary key field of the myTable. the primary key is inserted using sequence and trigger </p>\n\n<p>I tried adding  <code>RETURNING empID into :empId</code>  but it gives error</p>\n"},{"tags":["java","oracle","jdbc","timezone","dst"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":13238698,"title":"Oracle's date and time without daylight savings via JDBC","body":"<p>Issuing the following SQL generates different results thru PL/SQL, ODBC and JDBC:</p>\n\n<pre><code>select sysdate from dual\n</code></pre>\n\n<p>When running it on PL/SQL or ODBC, the date and time is correct. On JDBC it comes with an hour less. It seems that it is not considering daylight savings.</p>\n\n<p>For example, on PL/SQL the result is <code>2012-11-05 16:53:53.0</code> and on JDBC it is <code>2012-11-05 15:53:53.0</code>.</p>\n\n<p>It happens only on some databases. Changing the database timezone (<code>select dbtimezone from dual</code>) doesn't seems to affect the results.</p>\n\n<p>The command is executing on Brazil. Raw GMT offset is -03:00, current offset is -02:00 because of daylight savings.</p>\n\n<p>The timezone database of the client JVM is up-to-date.</p>\n\n<p>To diagnose the \"wrong\" result from database, just print the result:</p>\n\n<pre><code>((OracleResultSet) statement.executeQuery(\"select sysdate from dual\")).getTIMESTAMP(1).toString();\n</code></pre>\n\n<p>Oracle's <code>TIMESTAMP</code> <code>toString</code> method do not rely on timezone information. The JVM's timezone may only affect the result before the creation of the <code>TIMESTAMP</code>, i.e. while reading from the network and transforming it into a representation in Java.</p>\n\n<p>Tests on changing both client and database server time configuration:</p>\n\n<ul>\n<li><code>SYSDATE</code> always return the date/time resolved in the database server, the client JVM's <code>user.timezone</code> option and client's machine time configuration do not matter. </li>\n<li>On the other hand, getting <code>SYSTIMESTAMP</code> is resolved using both timezone informations: looks like it gets the date and time from server in UTC and then apply the timezone in the client to get a local date and time. </li>\n</ul>\n\n<p>Client is running Windows, server is running Linux.</p>\n\n<p>To get things more weird, issuing a <code>TO_CHAR</code> yield the wrong result too:</p>\n\n<pre><code>select TO_CHAR(SYSDATE, 'DD/MM/YYYY HH24:MI:SS') from dual\n</code></pre>\n\n<ul>\n<li>Directly on Oracle: <code>06/11/2012, 10:38:49</code></li>\n<li>On Java: <code>06/11/2012 09:38:49</code></li>\n</ul>\n\n<p>Server's <code>date</code> output:</p>\n\n<pre><code>[root@oracle1 ~]# date\nTue Nov  6 10:39:14 BRST 2012\n</code></pre>\n\n<p>Any thoughts? What info or configuration should I collect from the database to diagnose and solve this problem?</p>\n"},{"tags":["sql","oracle","transitive-closure-table"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":197,"score":3,"question_id":5264637,"title":"How can I speed up queries that are looking for the root node of a transitive closure?","body":"<p>I have a historical transitive closure table that represents a tree.</p>\n\n<pre><code>create table TRANSITIVE_CLOSURE\n  (\n    CHILD_NODE_ID number not null enable,\n    ANCESTOR_NODE_ID number not null enable,\n    DISTANCE number not null enable,\n    FROM_DATE date not null enable,\n    TO_DATE date not null enable,\n    constraint TRANSITIVE_CLOSURE_PK unique (CHILD_NODE_ID, ANCESTOR_NODE_ID, DISTANCE, FROM_DATE, TO_DATE)\n  );\n</code></pre>\n\n<p>Here's some sample data:</p>\n\n<pre><code>CHILD_NODE_ID | ANCESTOR_NODE_ID | DISTANCE \n--------------------------------------------\n1             | 1                | 0\n2             | 1                | 1\n2             | 2                | 0\n3             | 1                | 2\n3             | 2                | 1\n3             | 3                | 0\n</code></pre>\n\n<p>Unfortunately, my current query for finding the root node causes a full table scan:</p>\n\n<pre><code>select *\nfrom transitive_closure tc\nwhere \n  distance = 0\n  and not exists (\n  select null\n  from transitive_closure tci\n  where tc.child_node_id = tci.child_node_id\n    and tci.distance &lt;&gt; 0\n);\n</code></pre>\n\n<p>On the surface, it doesn't look too expensive, but as I approach 1 million rows, this particular query is starting to get nasty... especially when it's part of a view that grabs the adjacency tree for legacy support.</p>\n\n<p>Is there a better way to find the root node of a transitive closure? I would like to rewrite all of our old legacy code, but I can't... so I need to build the adjacency list somehow.  Getting everything except the root node is easy, so is there a better way?  Am I thinking about this problem the wrong way?</p>\n\n<p>Query plan on a table with 800k rows.</p>\n\n<pre><code>OPERATION                                  OBJECT_NAME        OPTIONS         COST \nSELECT STATEMENT                                                              2301 \n  HASH JOIN                                                   RIGHT ANTI      2301 \n    Access Predicates\n      TC.CHILD_NODE_ID=TCI.CHILD_NODE_ID \n    TABLE ACCESS                           TRANSITIVE_CLOSURE FULL            961 \n      Filter Predicates \n        TCI.DISTANCE = 1 \n    TABLE ACCESS                           TRANSITIVE_CLOSURE FULL            962 \n      Filter Predicates \n        DISTANCE=0\n</code></pre>\n"},{"tags":["c#","asp.net","oracle","gridview"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":13244255,"title":"How to display different object in gridview?","body":"<p>A table in my database has stored pictures, documents, dll halyards and so on. How do I implement the mapping of all this for a user?\nI bind these data to a data table, and want to have hyperlinks in each cell, which when clicked, invokes/opens the corresponding item from the database.</p>\n\n<pre><code>OracleCommand oracleCom = new OracleCommand();\noracleCom.Connection = oraConnect;\noracleCom.CommandText = \"Select * From \" + Session[\"tableNameIns\"];\nOracleDataAdapter adapter = new Oraenter code herecleDataAdapter();\nDataTable tableD = new DataTable();\ntableD.Locale = System.Globalization.CultureInfo.InvariantCulture;\nadapter.SelectCommand = oracleCom;\nadapter.Fill(tableD);\nchangeTableAtributs(tableD);\ntableResults.DataSource = tableD.AsDataView();\ntableResults.DataBind();\n</code></pre>\n\n<p>In DB next atributes: i_id(number), i_objecttype_id(number), s_code(nvarchar), s_name(nvarchar), m_content(blob), m_description(nvarchar)\n<img src=\"http://i.stack.imgur.com/VQnyQ.jpg\" alt=\"dbview\"></p>\n\n<p>On client I see next: i_id(number), i_objecttype_id(number), s_code(nvarchar), s_name(nvarchar), m_description(nvarchar).\nWithout atribute m_content.\n<img src=\"http://i.stack.imgur.com/QKRgO.jpg\" alt=\"clienview\"></p>\n"},{"tags":["sql","sql-server","oracle","common-table-expression"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":45,"score":4,"question_id":13153819,"title":"how to select only row with max sequence without using a subquery?","body":"<p>I'm trying to select only the row with the highest seq for each ID</p>\n\n<pre><code>ID  |  Seq   |  Age\n-------------------\n A      1       20   \n A      2       30\n B      1       25\n B      2       32\n B      3       44\n B      4       48\n C      1       11\n</code></pre>\n\n<p>This appears to work</p>\n\n<pre><code>SELECT ID, Age\nFROM Persons a\nWHERE Seq = (SELECT MAX(Seq) FROM Persons b WHERE a.ID = b.ID)\n</code></pre>\n\n<p>But is this the best way, the only way? I don't like using subqueries if I don't have to and I recall you can use something but I forget what it is. Any idea?</p>\n"},{"tags":["oracle","oracle9i"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13248981,"title":"ora 12560 tns protocol adapter error- while connecting to oracle","body":"<p>I have oracle 9i already installed in my machine. I am trying to connect to the oracle but while connection i am getting \"<strong><em>ora 12560 tns protocol adapter error</em></strong>\" type of error. i have tried it with the default pass scott/tiger , system/manager..</p>\n\n<p>When i tried to connect to the oracle using default credentials i am getting the above error.</p>\n\n<p>is it the problem with the username and password ? if so how can i get the username and password which is already set ?</p>\n"},{"tags":["oracle","stored-procedures","oracle10g","oracle11g","cursors"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":39,"score":3,"question_id":13248239,"title":"When should i use for update no wait in cursors","body":"<p>Can any one pls tell me in which case we need to use for update no wait in cursors.\nWith simple example.</p>\n"},{"tags":["oracle","stored-procedures","plsql","oracle10g","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":29,"score":0,"question_id":13246482,"title":"Will oracle stored procedure support strcspn and strncpy inside the procedure?","body":"<p>Will oracle stored procedure support the use of 'strcspn' and 'strncpy' inside the procedure ?</p>\n"},{"tags":["oracle","plsql","oracle10g","oracle11g"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":12945957,"title":"Change Oracle SQL Query Text before submission","body":"<p>Is there a advanced oracle feature to modify the SQL Query just before it is submitted to oracle? Or may be modify the result set? Based on certain condition? Like may be based on the name of the process that submits the query? Or based on the query text?</p>\n\n<p>The scenario is that a process (written in C++) is running a query and we don't have a way to change the C++ code. A particular business validation within that process is failing and in order to make the validation not fail, I want a way to manipulate the returned data set or manipulate the select query just before it is submitted to oracle engine.</p>\n\n<p>The C++ code is running this exact query</p>\n\n<p>SELECT PL_ID FROM A_HDR WHERE ENT_NBR=''</p>\n\n<p>I want to change it such that ORACLE always sees and executes the following query instead</p>\n\n<p>SELECT NULL FROM A_HDR WHERE ENT_NBR=''</p>\n\n<p>Please guide</p>\n"},{"tags":["sql","oracle","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13193557,"title":"SQL pad query result for missing groups","body":"<p>Assume the following table:</p>\n\n<p>TableA:  </p>\n\n<pre><code>ID  GroupName SomeValue\n1   C         1\n2   C         1\n2   B         1\n2   A         1\n</code></pre>\n\n<p>I need to construct a query that selects the following result:  </p>\n\n<pre><code>ID  GroupName SomeValue\n1   C         1\n1   B         0\n1   A         0\n2   C         1\n2   B         1\n2   A         1\n</code></pre>\n\n<p>The GroupName is actually derived from TableA column's CASE expression and can take only 3 values: A, B, C.  </p>\n\n<p>Are the analytic functions the way to go?  </p>\n\n<p><strong>EDIT</strong>  </p>\n\n<p>Sorry, for not mentioning it, but the ID could consist of multiple columns. Consider this example:  </p>\n\n<pre><code>ID1 ID2 GroupName SomeValue\n1   1   C         1\n\n1   2   C         1\n\n2   2   C         1\n2   2   B         1\n2   2   A         1\n</code></pre>\n\n<p>I need to pad <code>SomeValue</code> with 0 for each unique combination ID1+ID2. So the result should be like this:  </p>\n\n<pre><code>ID1 ID2 GroupName SomeValue\n\n1   1   C         1\n1   1   B         0\n1   1   A         0\n\n1   2   C         1\n1   2   B         0\n1   2   A         0\n\n2   2   C         1\n2   2   B         1\n2   2   A         1  \n</code></pre>\n\n<p><strong>EDIT2</strong><br>\nSeems like solution, proposed by @Laurence should work even for multiple-column 'ID'. I couldn't rewrite the query proposed by @Nicholas Krasnov to conform to this requirement. But could somebody compare these solutions performance-wise? Will the <code>analytic function</code> work faster than 'cross join + left outer join'?</p>\n"},{"tags":["php","oracle"],"answer_count":3,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":2977,"score":6,"question_id":2912144,"title":"Alternatives to LIMIT and OFFSET for paging in Oracle","body":"<p>I'm developing a web application and need to page ordered results. I normaly use LIMIT/OFFSET for this purpose.</p>\n\n<p>Which is the best way to page ordered results in Oracle? I've seen some samples using rownum and subqueries. Is that the way? Could you give me a sample for translating this SQL to Oracle:</p>\n\n<pre><code>SELECT fieldA,fieldB \nFROM table \nORDER BY fieldA \nOFFSET 5 LIMIT 14\n</code></pre>\n\n<p>(I'm using Oracle 10g, for what it's worth)</p>\n\n<p>Thanks!</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13246447,"title":"One date check for entire query","body":"<p>I have the following query:</p>\n\n<pre><code>select \n    fp.id, \n    fr.id,\n    sum(case \n        when to_date(fp.offered_date) BETWEEN TO_DATE( :ad_startdate, 'YYYY-MM-DD') \n             AND TO_DATE(:ad_enddate, 'YYYY-MM-DD') and fp.result &lt;&gt; 'E'\n             then 1 \n        else 0 \n        end) total,\n    sum(case when fp.result = 'G' \n        and  to_date(fp.offered_date) &gt;=  :ad_startdate\n        and  to_date(fp.offered_date) &lt;= :ad_enddate then 1 else 0 end) colorgreen,\n    sum(case when fp.resultat = 'R' \n        and  to_date(fp.offered_date) &gt;=  :ad_startdate\n        and  to_date(fp.offered_date) &lt;= :ad_enddate then 1 else 0 end) colorred\nFROM \n    fruit_properties fp, fruit fr\nWHERE \n    fp.id = fr.id\nGROUP BY \n    fp.id, fr.id\n</code></pre>\n\n<p>I'm checking dates 1 time for each sum column and have a feeling this can be made once somehow? Right now if I check only once at the total column, then colorgreen + colorred might be larger than the total since it counts no matter what date they have.</p>\n\n<p>Can my query be enhanced somehow?</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":53,"score":0,"question_id":13230750,"title":"How to display Month Names from month numbers","body":"<p>Now i am in a condition, Where I am just displaying the month names and some data grouped by month number. There is a small issue. I need to get month names instead of month numbers from Oracle.</p>\n"},{"tags":["mysql","sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13242892,"title":"SQL query using group by","body":"<p>I have a table called \"EMP\" and two collumns one called \"deptno\" and the other called \"job\". I need a query to find out how many people there are in each type of job within each department.</p>\n\n<p>I know I need to use count() and group by but im not sure how to do this, any help would be appreciated.</p>\n\n<p>Thanks James. </p>\n"},{"tags":["java","oracle","jdbc","ucp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13238479,"title":"How to make Oracle UCP always store several available connections","body":"<p>I'm creating connection manager class that would return <code>java.sql.Connection</code> to the customers of the class.\nMy goal is to always have 2 available connections in pool so I wouldn't loose time for creating connections. When I return the available connection, I need to make Oracle UCP create new available connection, so it would be always 2 connections available.</p>\n\n<p>The problem is Oracle UCP doesn't have an option to control it. I've read the <a href=\"http://docs.oracle.com/cd/E11882_01/java.112/e12265/preface.htm\" rel=\"nofollow\">UCP documentation</a>, but hadn't found any solution.</p>\n\n<p>There is <code>setMinPoolSize()</code> method, but it controls <strong>available + borrowed</strong> connections, not only the available ones.</p>\n\n<p>Also there is a harvestable connection functionality, but it harvests <strong>existing</strong> (borrowed) connections instead of creating new.</p>\n\n<p>Note:\nI'm using Oracle 11.2.0.3 and the latest <code>ucp.jar</code> (for Oracle 11.2.0.3)</p>\n"},{"tags":["database","oracle","distributed","materialized-views"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13247720,"title":"Syncing and Updating Database Tables Using Materialized Views","body":"<p>We have a mini-project were we need to implement an oracle (10g) distributed database in such way:</p>\n\n<ul>\n<li>site 1 : database in New York for example, containing table <em>emp1</em>, <em>projects</em>.</li>\n<li>site 2 : database in Paris, containing table <em>emp2</em>, table <em>projects</em> synchronised with site 1's <em>projects</em>.</li>\n<li>site 3 : client for site 1 and site 2, will contain all info on site 1 and\nsite 2 : view <em>emp</em> joining <em>emp1</em> and <em>emp2</em>, view <em>projects</em>. Materialized views are suggested.</li>\n</ul>\n\n<p>We need also to be able to insert data into tables by querying site 3, but that cannot be done with materialized views as the changes won't propagate and will disappear after the first refresh. How can this be done otherwise?\nAlso we're syncing <em>projects</em> using triggers instead of MV, is this a good implementation?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13244889,"title":"SQL Oracle How to Alter Constraint","body":"<p>SQL How to Alter Constraint</p>\n\n<p>Below is 1 of my constraint</p>\n\n<pre><code>CONSTRAINT ACTIVEPROG_FKEY1 FOREIGN KEY(ActiveProgCode) REFERENCES PROGRAM(ActiveProgCode),\n</code></pre>\n\n<p>I want to add in </p>\n\n<pre><code>ON DELETE CASCADE\n</code></pre>\n\n<p>to the constraint above. </p>\n\n<p>How do i alter that existing constraint ACTIVEPROG_FKEY1 and add  </p>\n\n<pre><code>ON DELETE CASCADE\n</code></pre>\n\n<p>to constraint ACTIVEPROG_FKEY1</p>\n\n<p>Consider ACTIVEPROG_FKEY1 is at Table ACTIVEPROG</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":20,"score":0,"question_id":13246339,"title":"Delete from ALL_DB_LINKS","body":"<p>i've problem here. </p>\n\n<p>i write a simple (just trying) query for creating database links.</p>\n\n<pre><code>CREATE DATABASE LINK XXX.US.ORACLE.XXX;\n</code></pre>\n\n<p>after that i wanna delete it. but it said \"ERROR at line 1:\nORA-01031: insufficient privileges\n\"</p>\n\n<p>how i can delete that data since it is a data dictionary view</p>\n"},{"tags":["sql-server","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13245322,"title":"[Generic Connectivity Using ODBC][Microsoft][ODBC SQL Server Driver]COUNT field incorrect or syntax error (SQL State: 07001; SQL Code: 0)","body":"<blockquote>\n  <p><em>ERROR at line 1:<br>\n  ORA-28500: connection from ORACLE to a non-Oracle\n  system returned this message:<br>\n  [Generic Connectivity Using\n  ODBC][Microsoft][ODBC SQL Server Driver]<br>\n  COUNT field incorrect or syntax error<br>\n  (SQL State: 07001; SQL Code: 0) ORA-06512: at line 9</em></p>\n</blockquote>\n\n<p>Anyone know this error.. pls help us. </p>\n\n<p>thanks in advance.  </p>\n"},{"tags":["oracle","stored-procedures","plsql","oracle10g","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13245225,"title":"PLS-00103: Encountered the symbol \"=\" when expecting one of the following:","body":"<p>When i try to create the following procedure im gettin this error:\"PLS-00103: Encountered the symbol \"=\" when expecting one of the following:\" \nI cant find where i went wrong, Help me out for resolving this issue.</p>\n\n<pre><code> create or replace PROCEDURE  ProcName\n(inTid IN VARCHAR2,outtxnstatus OUT CHAR,outrowcount OUT NUMBER,outretvalue OUT NUMBER) AS\n   CURSOR c1 IS \n    select TXN_STATUS from OP_TTERMINALMASTER where TERMINAL_ID = inTid and TXN_STATUS = 'N' FOR UPDATE OF TXN_STATUS;\n    outrowcount:= sql%rowcount;\n    BEGIN\n    if outrowcount = 1 then\n      Open c1;\n      fetch c1 into outtxnstatus;   \n      update OP_TTERMINALMASTER set TXN_STATUS = 'Y' where current of c1;\n      outretvalue := 5;\n      CLOSE c1;\n    END IF;\n    EXCEPTION\n    WHEN NO_DATA_FOUND THEN\n      outretvalue := -5;\n    END;\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":43,"score":0,"question_id":13245112,"title":"Oracle SQL Set Foreign Key Check OFF","body":"<p>Oracle SQL Set Foreign Key Check OFF</p>\n\n<p>I tried to use this..</p>\n\n<pre><code>SQL&gt; SET FOREIGN_KEY_CHECKS = 0;\nSP2-0735: unknown SET option beginning \"FOREIGN_KE...\"\n</code></pre>\n\n<p>But it say unknown set option</p>\n\n<p>I am using oracle sql 11g express e</p>\n\n<p>I also tried</p>\n\n<pre><code>begin\nfor i in (select constraint_name, table_name from user_constraints where constraint_type ='R'\nand status = 'ENABLED') LOOP\nexecute immediate 'alter table '||i.table_name||' disable constraint '||i.constraint_name||'';\nend loop;\nend;\n</code></pre>\n\n<p>But the console stuck at line 7, not executing or something..</p>\n\n<p>Heres what happen..</p>\n\n<p>Connected.</p>\n\n<pre><code>SQL&gt; begin\n  2  for i in (select constraint_name, table_name from user_constraints where co\nnstraint_type ='R'\n  3  and status = 'ENABLED') LOOP\n  4  execute immediate 'alter table '||i.table_name||' disable constraint '||i.c\nonstraint_name||'';\n  5  end loop;\n  6  end;\n  7\n</code></pre>\n\n<p>It show the 7 then no longer work</p>\n\n<p><strong>Thanks for all help !!</strong></p>\n"},{"tags":["sql","oracle","create-table"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":131,"score":0,"question_id":11863244,"title":"missing right parenthesis in create table","body":"<p>I searched the forum but didn't find the right answer sorry if I double post\nI want to create this Table</p>\n\n<pre><code>create table HUB_SHIFT_REPORT\n(\n  Da_te timestamp(8) not null\n, Week_Day varchar2(10) not null constraint cnstrnt_day check (Week_Day in('Su','Mo','Tu','We','Th','Fr','Sa'))\n, Shift varchar2(10) not null constraint cnstrnt_shift check (Shift in('Morning','Evening','Night'))\n, Handled_by varchar2(60) not null constraint cnstrnt_handled check (Handled_by in('Artyom','Natan','Asaph','Yaniv','Fadi','AdiG','AdiF','Paul','Benjamin','Matan','Yosef'))\n, Incident_Number number(10) not null PRIMARY KEY\n, Centreon_Duration varchar2(10) not null\n, Time_received varchar2(10) not null\n, Time_restored varchar2(10) not null\n, Time_closed varchar2(10) not null\n, Product varchar2(60) not null constraint cnstrnt_product check (Product in ('Primo','MetaLib','SFX','bX','Primo Central','USTAT','Alma','Aleph','voayger','Marcit','ARC','Verde','Rosetta','Digitool','MetaLib+','NUUL','Not product related'))\n, Service_name varchar2(400) not null\n, Data_Center varchar2(10) constraint cnstrnt_dc check (Data_Center in ('DC01','DC02','DC03','DC04','DC05','Amazon','NULL'))\n, HOST VARCHAR2(40) \n, GUEST VARCHAR2(40) \n, Alert_Name varchar2(400) not null\n, Alert_Status varchar2(40) cnstrnt_status check (Alert_Status in ('CRITICAL','WARNING','UNKNOWN','DOWN','NULL'))\n, Affected_Customers varchar2(400) not null\n, Is_Escalated varchar2(10) default ('No') cnstrnt_yes check (Is_Escalated in('Yes','No'))\n, Escalated_at varchar2(10) default ('NULL') \n, Escalated_to varchar2(100) default ('NULL')\n, Open_Action_items varchar2(400) default ('NULL')\n, Time_Resolved varchar2(10) default ('NULL')\n, Related_alerts varchar2(50) default ('NULL')\n, Related_critical_alert_host varchar2(100) default ('NULL')\n, Is_Reported varchar2(10) default ('No') cnstrnt_yes check (Is_Reported in('Yes','No'))\n, Alert_Accuracy varchar2(10) default ('Real alert') not null cnstrnt_alert check (Alert_Accuracy in ('Real alert','False Positive'))\n, SI_number varchar2(10) default ('NULL')\n, Customer_Type varchar2(15) default ('Direct') not null cnstrnt_type check (Customer_Type in ('Total Care','Direct','SaaS','Local'))\n, Resolved varchar2(20) default ('No') cnstrnt_yes2 check (Resloved in('Yes','No','Cleared Itself'))\n, in_ERD varchar2(10) default ('Yes') cnstrnt_yes check (In_ERD in('Yes','No'))\n, In_XLS varchar2(10) default ('Yes') cnstrnt_yes check (In_XLS in('Yes','No')) \n, Actions_Taken varchar2(10) default ('No') cnstrnt_yes check (Actions_Taken in('Yes','No'))\n, Notes varchar2(800)\n, Root_cause varchar2(200) not null\n, Can_be_prevented varchar2(10) default ('No') cnstrnt_yes check (Can_be_prevented in('Yes','No'))\n, log varchar2(1800)\n)\n</code></pre>\n\n<p>But I get </p>\n\n<blockquote>\n  <p>Error at Command Line:14 Column:27 Error report: SQL Error: ORA-00907:\n  missing right parenthesis\n  00907. 00000 -  \"missing right parenthesis\"\n  *Cause:<br>\n  *Action:</p>\n</blockquote>\n\n<p>I count the right and left paranthesis and get 83 in both cases\nAny Idea?\nThanks</p>\n"},{"tags":["sql-server","database","oracle","triggers","sybase-ase"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":274,"score":0,"question_id":9639254,"title":"Is it better to have single trigger for Insert/Update/Delete, or multiple?","body":"<p>I have a requirement to mirror insert/update/delete operations from one table to another.\nFor example insert on tableA has to be copied into tableB, update to tableA applied to tableB, and delete from tableA be applied to tableB.\nIt's as simple as that, except tableB has 1 additional column for a constant value, so very simple triggers are needed.</p>\n\n<p>I'm not sure if it is better to write 3 separate triggers, or have one trigger that does all of the operations.</p>\n\n<p>This is for 3 databases: Sybase ASE, MSSQL and Oracle, and I'd like to keep it the solution similar (so either 3 for all databases or 1 for all of them).</p>\n\n<p>Is it just a matter of preference, to have 3 triggers vs. 1, or are there actual benefits to either solution?</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":41,"score":1,"question_id":13232492,"title":"Change the value in a resulting set of a query in Oracle","body":"<p>I am pretty much new to Oracle it has only been 3 months or so I guess and I have a bit of a problem now. I'm running a query which will display the downtime of a machine. It will display the Start/End Time and its difference. The maching runs in two shifts, Shift A being 6:00 AM to 6:00 PM and Shift B on 6:00 PM to 6:00 AM. Below is a sample resulting set of my query:</p>\n\n<hr>\n\n<pre><code>Shift        StartDateTime        EndDateTime            DifferenceInMinutes\nB            09/25/2012 17:38:40  09/25/2012 19:12:26    93.7667\nB            09/25/2012 19:12:26  09/25/2012 19:25:03    12.6167\nB            09/25/2012 19:25:03  09/26/2012 05:55:08    630.0833\nA            09/26/2012 05:55:08  09/26/2012 09:19:55    24.8\n</code></pre>\n\n<hr>\n\n<p>The total in DifferenceInMinutes should always be 720 per shift. What I did is that on each start of a shift, it'll be 6:00 AM for Shift A and 18:00 on Shift B. I used Case When to be able to do this. Below will be another example of the resulting set:</p>\n\n<hr>\n\n<pre><code>Shift        StartDateTime        EndDateTime            DifferenceInMinutes\nB            09/25/2012 18:00:00  09/25/2012 19:12:26    72.43333\nB            09/25/2012 19:12:26  09/25/2012 19:25:03    12.6167\nB            09/25/2012 19:25:03  09/26/2012 05:55:08    630.0833\nA            09/26/2012 06:00:00  09/26/2012 09:19:55    199.9167\n</code></pre>\n\n<hr>\n\n<p>Now my only problem is the EndDateTime, the last item on a shift should always end at 18:00 for Shift A and 6:00 for Shift B. I want to achieve something like below:</p>\n\n<hr>\n\n<pre><code>Shift        StartDateTime        EndDateTime            DifferenceInMinutes\nB            09/25/2012 18:00:00  09/25/2012 19:12:26    72.43333\nB            09/25/2012 19:12:26  09/25/2012 19:25:03    12.6167\nB            09/25/2012 19:25:03  09/26/2012 06:00:00    634.95\nA            09/26/2012 06:00:00  09/26/2012 09:19:55    199.9167\n</code></pre>\n\n<hr>\n\n<p>I must admit that I do not know how to use Case When like what I have done on StartDateTime so I'm really hoping that there is a way for this. Thanks guys. I hope I made sense here. Here is what I have so far though:</p>\n\n<pre><code>SQL &gt;SELECT \n&gt; DISTINCT Hm.Txndate\n, hm.shiftname AS Shift\n, rd.resourcename AS TesterID\n, case\n    when Rsh.Oldlaststatuschangedate &lt; to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00' and Rsh.Laststatuschangedate &gt; to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00'  then to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00'\n    when Rsh.Oldlaststatuschangedate &lt; to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00' and Rsh.Laststatuschangedate &gt; to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00'  then to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00'\n    else to_char(Rsh.Oldlaststatuschangedate)\n  end as StartDateTime\n, lead(hm.shiftname, 1, 0) over (partition by hm.txndate order by rd.resourcename, c.containername, hm.txndate, hm.shiftname) as NextShift\n, to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' ' || to_char(Rsh.Laststatuschangedate, 'HH24:MI:SS') as EndDateTime\n, ROUND((((TO_DATE(rsh.laststatuschangedate, 'MM/DD/YYYY HH24:MI:SS') - TO_DATE(case\n    when Rsh.Oldlaststatuschangedate &lt; to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00' and Rsh.Laststatuschangedate &gt; to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00'  then to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00'\n    when Rsh.Oldlaststatuschangedate &lt; to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00' and Rsh.Laststatuschangedate &gt; to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00'  then to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00'\n    else to_char(Rsh.Oldlaststatuschangedate)\n  end)) * 24) * 60), 4) AS TotalMinutes\n, Rsh.Newstatusname AS Status\n, Rsh.Newreasonname AS StatusReason\n, c.containername AS Lot\n, pb.productname AS ProductName\n, aep.paramvalue AS HandlerID\n, rd.attr_09 AS HandlerType\n, (SELECT e.employeename AS OperatorID FROM employee e WHERE e.employeeid = hm.employeeid) AS OperatorID\n, (SELECT e.fullname AS EmployeeName FROM employee e WHERE e.employeeid = hm.employeeid) AS EmployeeName\n, hm.comments AS Remarks\nFROM Historymainline hm\nINNER JOIN Resourcestatushistory rsh ON hm.Historymainlineid = rsh.Historymainlineid\nINNER JOIN ResourceDef rd ON rd.resourceid = rsh.historyid\nINNER JOIN a_equipmentparams aep ON rd.resourceid = aep.resourceid\nINNER JOIN a_paramname apn ON aep.paramnameid = apn.paramnameid AND apn.paramnamename ='HANDLERID'\nINNER JOIN A_WIPEquipment awe ON rd.resourceid = awe.equipmentid\nINNER JOIN container c ON c.ContainerId = awe.ContainerId\nINNER JOIN Product p ON c.productid = p.productid\nINNER JOIN productbase pb ON p.productbaseid = pb.productbaseid\nWHERE rd.Resourcename = :equipID\nORDER BY  c.containername, hm.txndate;\n</code></pre>\n"},{"tags":["sql","oracle","yii"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13244057,"title":"how to get the second batch and 3rd batch in the same query result in oracle sql + yii framework?","body":"<p>let' say i have 20 results in the sql query. if am gonna use the limit in the yii active record, I'll obviously get the first four from the result, but what if i wanna get the 2nd four and then 3rd four in the same query result ? how to query that via sql ?</p>\n\n<p>e.g </p>\n\n<pre><code>        $criteria2 = new CDbCriteria();\n        $criteria2-&gt;select = 'USERID, ADID ,ADTYPE, ADTITLE, ADDESC, PAGEVIEW, DISPPUBLISHDATE';\n        $criteria2-&gt;addCondition(\"STATUS = 1\");\n        $criteria2-&gt;order = '\"t\".PAGEVIEW DESC,\"t\".PUBLISHDATE DESC';\n        $criteria2-&gt;limit = 4;\n        $criteria2-&gt;with = array('subcat','adimages');\n        $result = $this-&gt;findAll($criteria2);\n        return $result;\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13244172,"title":"SQL Check Constraint cannot reference other column","body":"<p>I trying to add this sql check in</p>\n\n<pre><code>ALTER TABLE School\nadd Role check_role\n  CHECK (check_role IN ('Teaching Assistant', 'Lecturer', 'Professor'));\n</code></pre>\n\n<p>I get the error below</p>\n\n<pre><code>ERROR at line 3:\nORA-02438: Column check constraint cannot reference other columns\n\nSQL&gt; desc School;\n Name                                      Null?    Type\n ----------------------------------------- -------- ----------------------------\n\n STAFFNUM                                  NOT NULL VARCHAR2(12)\n NAME                                      NOT NULL VARCHAR2(50)\n ADDRESS                                   NOT NULL VARCHAR2(300)\n DOB                                                DATE\n</code></pre>\n\n<p>I am trying add a column call Role, with the check constraint check_role</p>\n\n<p>I am using Oracle SQL.</p>\n\n<p><strong>Thanks for all help!</strong></p>\n"},{"tags":["oracle","oracle11g"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13244597,"title":"Import .sql to Oracle","body":"<p>How could I import a .sql file to Oracle Database? It was exported using Oracle 11g, do I execute this script using SQL Developer or other tools?</p>\n"},{"tags":["oracle","oracle10g","lotus-notes","lotus","lotusscript"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12684264,"title":"upload staff leave field status database table (Lotus notes 8.5.3) to Human resources table (Oracle 9I)","body":"<p>I'm using Oracle 10g Express or Oracle XE and lotus notes 8.5.3. In the Staff Leave Database i have few field need to update on last run of the leave database to oracle database. </p>\n\n<p>example fields are : </p>\n\n<pre><code>StaffID,\nStaffName,\nLeaveTitle,\nLvStartDate,\nLvEndDate\n</code></pre>\n\n<p>to update to oracle database</p>\n\n<pre><code>EmplyID,\nEmplyName,\nLv_Title,\nLv_Start_Date,\nLv_End_Date\n</code></pre>\n\n<p>Matching field from Leave DB to Oracle HR DB :</p>\n\n<pre><code>StaffID=EmplyID\nStaffName=EmplyName\nLeaveTitle=Lv_Title\nLvStartDate=Lv_Start_Date\nLvEndDate=Lv_Start_Date\n</code></pre>\n\n<p>Question 1 : \nAnyway to identify whether staff information is been modify or create new document\n(Lotus database)?</p>\n\n<p>Question 2 : \nWhat Lotus script / method to update on Oracle database.</p>\n\n<p>Normally we update information is use \"Replaceitemvalue\"</p>\n\n<pre><code>**notesDocument.ReplaceItemValue( itemName$, value )**\n</code></pre>\n\n<p>It is using the same way to updating it?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13243425,"title":"Oracle error sql","body":"<p>I have to create a table and insert values into the tables. The tables is being created but it wont insert values.\nheres my code-</p>\n\n<pre><code>CREATE TABLE CUSTOMER(\nCID         number(20) not null primary key,        \nFNAME       varchar2(50) not null,                  \nMIDDLE      varchar2(50) null,\nLNAME       varchar2(50) not null,\nSTREET      varchar2(50) not null,\nCITY        varchar2(50) not null,\nSTATE       char(2) not null,\nZIP         varchar2(5) not null,\nPHONE       varchar2(20) not null,\nBIRTH_YR    date);\n\nINSERT INTO CUSTOMER VALUES(\n'1','john','paul','connor','Broad st','newark','nj','07103','2018643110','1992');\n</code></pre>\n\n<p>I keep getting an error </p>\n\n<pre><code>[Error] Script lines: 12-14 ------------------------\nORA-01861: literal does not match format string\nScript line 14, statement line 2, column 85 \n</code></pre>\n\n<p>Can somebody help me out? What am i doing wrong?</p>\n"},{"tags":["oracle","plsql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":13243355,"title":"How to CONCAT the column n minus by SYSDATE?","body":"<p>I cant run this query because it gives out error invalid number...Pls help me to solve this issue.I think the problem is this part.</p>\n\n<pre><code>to_char(sysdate- (concat(a.attribute_value, b.attribute_value))) as DATE_TIME\n</code></pre>\n\n<p>Let me explain to you in detail.The attribute value is a kind of code which represents date and time...For example,number 346 represents date wherelse number 348 represents time.i need to CONCAT it together then change it into datetime then minus it with current date.......I will post the full script for you to understand further....TQ</p>\n\n<pre><code>SELECT a.lot, a.owner, a.operation, a.qty1, a.product, a.creation_date,a.total_time_day, \n to_char(sysdate- (concat(a.attribute_value, b.attribute_value))) as DATE_TIME \n from \n(SELECT l.lot, l.owner, l.operation, l.qty1, l.product, l.creation_date, ROUND((SYSDATE - l.creation_date)) AS total_time_day,   \n\n h.attribute_value \nFROM a12_prod_0.f_lot l \n   INNER JOIN a12_prod_0.f_lotattribute h \n           ON h.lot = l.lot AND h.operation = l.operation \nWHERE l.operation = 0599 \nAND l.src_erase_date IS NULL \nAND l.terminated = 'N' \nAND l.owner = 'PROD' \nAND l.qty1 &gt; 0 \n--AND ROUND((SYSDATE - l.creation_date)) &gt; 7 \nAND h.attribute_number = '346')a, \n(SELECT l.lot, l.owner, l.operation, l.qty1, l.product, l.creation_date, ROUND((SYSDATE - l.creation_date)) AS total_time_day, \n\n h.attribute_value \nFROM a12_prod_0.f_lot l \n   INNER JOIN a12_prod_0.f_lotattribute h \n           ON h.lot = l.lot AND h.operation = l.operation \nWHERE l.operation = 0599 \nAND l.src_erase_date IS NULL \nAND l.terminated = 'N' \nAND l.owner = 'PROD' \nAND l.qty1 &gt; 0 \n--AND ROUND((SYSDATE - l.creation_date)) &gt; 7 \nAND h.attribute_number = '348') b \nwhere \n a.lot =  b.lot \n AND a.owner = b.owner \n AND a.operation = b.operation \n AND a.qty1 = b.qty1 \n AND a.product = b.product \n AND a.creation_date = b.creation_date \n AND a.total_time_day = b.total_time_day\n</code></pre>\n"},{"tags":["database","oracle","oracle11g","storage","raid"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":14,"score":1,"question_id":13239806,"title":"2 RAC node clusters with different RAID layouts?","body":"<p>I am comparing RAID 10 and RAID 5 configurations for Oracle database in order to determine the best choice in terms of performance for mixed workloads. </p>\n\n<p><strong>Is it possible to have 2 RAC node clusters and have one of them using the RAID 10 layout whereas the other one using RAID 5 layout?</strong> </p>\n\n<p>This would make testing for things like \"User load vs. Transactions per second for OLTP workloads\" more fair and insightful..  </p>\n\n<hr>\n\n<p>Would it be feasible (for testing) to just use a single instance (ie. NO RAC) and run tests using RAID 5 layout and then change the layout to RAID 10 and re run the tests? What advantages/extra information does using RAC clusters when testing have? </p>\n"},{"tags":["sql","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13240116,"title":"Cannot create TABLESPACE as datafile file already part of database","body":"<p>I accidentally somehow remove a tablespace without removing the datafile(forget how..), now the datafile become lost in the woods but when I try to create the TABLESPACE again with the same datafile:</p>\n\n<pre><code>CREATE BIGFILE TABLESPACE SERVER01_DAT DATAFILE 'D:/Oracle11g/app/INSTANCE/dbf/SERVER01_DAT.DBF'\nSIZE 200M REUSE AUTOEXTEND ON NEXT 100M MAXSIZE 2048M LOGGING EXTENT MANAGEMENT LOCAL SEGMENT\nSPACE MANAGEMENT AUTO;\n</code></pre>\n\n<p>then Oracle reject me like this:</p>\n\n<pre><code>cannot add file 'D:/Oracle11g/INSTANCE/INSTANCE/dbf/SERVER01_DAT.DBF' - file already part of database\n</code></pre>\n\n<p>It's interesting as no tablespace occupies this data file then how come it can be in use so oracle service should allow attach this data file back to any tablespace. Anyway I would really appreciate for an idea to re-attache the tablespace with this data file, or help me delete current data file. Thanks a lot.</p>\n"},{"tags":["database","oracle","oracle10g","oracle11g","cluster-computing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":17,"score":-1,"question_id":13240102,"title":"understand RAC clusters?","body":"<p>I am getting a little confused regarding what a \"two Oracle two-node RAC clusters\" actually is. Is it possible to draw a diagram indicating what this actually represents? </p>\n\n<p>Thanks!</p>\n"},{"tags":["sql","oracle"],"answer_count":7,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":12361,"score":2,"question_id":1387612,"title":"How can i introduce multiple conditions in LIKE operator","body":"<p>I want to write an SQL statement like below:</p>\n\n<pre><code>select * from tbl where col like ('ABC%','XYZ%','PQR%');\n</code></pre>\n\n<p>I know it can be done using <code>OR</code>. But I want to know is there any better solution.</p>\n"},{"tags":["java","oracle","jdbc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":12015,"score":1,"question_id":4282960,"title":"IOException : The network adapter could not establish the connection","body":"<p>I am trying to connect to an Oracle database from my Java application. I am using oracle.jdbc.driver.OracleDriver, Version : 0/1 to connect to the database. But DriverManager.getConnection() is giving me the \"The network adapter could not establish the connection\". This is not happening evertime. Its happening sometimes only, may be once in 8-10 times. The stack trace am getting is : </p>\n\n<pre><code>Driver Class : oracle.jdbc.driver.OracleDriver, version 0/1\njava.sql.SQLException: Io exception: The Network Adapter could not establish the connection\nat oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:134)\nat oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:179)\nat oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:334)\nat oracle.jdbc.ttc7.TTC7Protocol.handleIOException(TTC7Protocol.java:3678)\nat oracle.jdbc.ttc7.TTC7Protocol.logon(TTC7Protocol.java:352)\nat oracle.jdbc.driver.OracleConnection.&lt;init&gt;(OracleConnection.java:365)\nat oracle.jdbc.driver.OracleDriver.getConnectionInstance(OracleDriver.java:547)\nat oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:347)\nat java.sql.DriverManager.getConnection(DriverManager.java:316)\nat java.sql.DriverManager.getConnection(DriverManager.java:297)\n</code></pre>\n\n<p>Since I am not getting this everytime, I am not able to guess that there is any connectivity issue. I can see lots of developers have the same problem, but for them it happens everytime. Please help me, since i am literally stuck in solving this problem.</p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":60,"score":-5,"question_id":13237234,"title":"Create table with 2000 column in oracle","body":"<p>Is is possible to create table in oracle with more than 2000 column. column name should be anything and type also should be anything.I dont know how to write that </p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13237186,"title":"Divide one select result by another select result","body":"<p>I've looked at the other similar questions, and they seem to be a little bit different than what I'm trying to do.</p>\n\n<p>I have a single query, where I'm selecting two count values, and I want to divide one by the other.</p>\n\n<p>Here is my working code:</p>\n\n<pre><code>SELECT (SELECT count(DISTINCT s.lastfirst) \n          FROM students s\n          JOIN cc ON s.id = cc.studentid\n          JOIN courses c on cc.course_number = c.course_number\n         WHERE cc.schoolid='109'\n           AND c.course_name LIKE 'AP %' \n           AND substr(cc.termid,0,1) &lt;&gt; '-'\n           AND cc.dateenrolled BETWEEN to_date('08/01/2010','MM/DD/YYYY') AND  \n               to_date('08/01/2011','MM/DD/YYYY')) as AP, \n       (SELECT count(DISTINCT s.lastfirst) \n          FROM students s\n          JOIN cc ON s.id = cc.studentid\n          JOIN courses c on cc.course_number = c.course_number\n         WHERE cc.schoolid = '109'\n           AND substr(cc.termid,0,1) &lt;&gt; '-'\n           AND cc.dateenrolled BETWEEN to_date('08/01/2010','MM/DD/YYYY') \n           AND to_date('08/01/2011','MM/DD/YYYY')) as ttl\n FROM DUAL\n</code></pre>\n\n<p>Here is where I break it:</p>\n\n<pre><code>SELECT (SELECT count(DISTINCT s.lastfirst) \n          FROM students s\n          JOIN cc ON s.id = cc.studentid\n          JOIN courses c on cc.course_number = c.course_number\n         WHERE cc.schoolid='109'\n           AND c.course_name LIKE 'AP %' \n           AND substr(cc.termid,0,1) &lt;&gt; '-'\n           AND cc.dateenrolled BETWEEN to_date('08/01/2010','MM/DD/YYYY') \n           AND to_date('08/01/2011','MM/DD/YYYY')) as AP, \n       (SELECT count(DISTINCT s.lastfirst) \n          FROM students s\n          JOIN cc ON s.id = cc.studentid\n          JOIN courses c on cc.course_number = c.course_number\n         WHERE cc.schoolid = '109'\n           AND substr(cc.termid,0,1) &lt;&gt; '-'\n           AND cc.dateenrolled BETWEEN to_date('08/01/2010','MM/DD/YYYY')\n           AND to_date('08/01/2011','MM/DD/YYYY')) as ttl,\n      (AP / ttl) as pcnt\n FROM DUAL\n</code></pre>\n\n<p>Could somebody please tell me the <em>proper</em> way to do this?</p>\n\n<p>Thank You</p>\n"},{"tags":["sql","oracle","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":76,"score":4,"question_id":13235099,"title":"Primary Key and Unique Index -- sql scripts generated by SQL Developer","body":"<p>When export sql scripts by SQL Developer there are multiple options available, but either way there have to generate a <code>UNIQUE INDEX</code> on primary key like this</p>\n\n<pre><code>CREATE UNIQUE INDEX \"SYS_C0018099\" ON \"TRANSACTION\" (\"ID\") \n</code></pre>\n\n<p>and add <code>PRIMARY KEY</code> to the same table and same column</p>\n\n<pre><code>ALTER TABLE \"TRANSACTION\" ADD PRIMARY KEY (\"ID\")\n</code></pre>\n\n<p>So the question is: does it looks like kind of redundancy? I thought creating a primary key on a column should by default create an unique index on that column too? So why the first command is necessary?</p>\n\n<p>And this may cause data redundancy?</p>\n\n<p>I am on Oracle 11g so please share any ideas about why it should look like above.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["regex","oracle","validation","date","check-constraints"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12976680,"title":"Oracle CHECK Constraint on Two Date String Variants","body":"<p>I am working with a legacy Oracle database that has columns containing date strings formatted as follows:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>30-Apr-03\n\n30-Apr-2003\n</code></pre>\n\n<p>The column data type is <code>VARCHAR2(12)</code> (although <code>11</code> would suffice). Both of these representations can appear in a single column.</p>\n\n<p><strong>Question:</strong> How can I write a <code>CHECK</code> constraint that permits <em>only</em> these two date string variants in a column?</p>\n"},{"tags":["oracle","application","treenode"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13229272,"title":"Value of selected treenode in Oracle APEX","body":"<p>I'm new to Oracle Apex(4.0) and I'm having a little problem.</p>\n\n<p>I have a treeregion and a button. When the user clicks the button I want to redirect him to a another page. On this second page he should get information about the selected treenode.</p>\n\n<p>How can I get the ID of the currently selected treenode?</p>\n\n<p>thanks,\nFred</p>\n"}]}
{"total":22203,"page":3,"pagesize":100,"questions":[{"tags":["sql","oracle","constraints","check"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13235273,"title":"SQL CHECK CONSTRAINT VARCHAR","body":"<pre><code>create table table1\n(\n  column1 varchar2(8)\n  check constraint column1_ch check ........\n);\n</code></pre>\n\n<p>How do I do a check for a data that the first 4 char is a specific set of alphabets while the last 4 is numbers? and as well as a range of values.</p>\n\n<p>examples, data can be ABCD2121, ABCD1111.</p>\n\n<p>range - ABCD0001 to ABCD9999</p>\n\n<p>So 'ABCD' is fixed while the numbers are changing.</p>\n\n<p>I've foudn online about using '[]\" to define the numbers but i'm not able to integrate it into my constraint.</p>\n\n<p>Thanks</p>\n"},{"tags":["sql","database","oracle","query"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13198395,"title":"Select with SQL the oldest payment associated to a list of persons","body":"<p>Having troubles with a SQL query on an Oracle database (11G I think).</p>\n\n<p>I need to make a query on two tables. The first one contains identifiers of persons. The second one contains payments (you can consider it as salaries), each record associated to the person with a foreign key.</p>\n\n<p>What I need to do is retrieve, for a known list of persons (let's say identifiers 1, 2, 5 and 10), the oldest payment (based on the payment date).</p>\n\n<p>What I made first is this : </p>\n\n<pre><code>select id_person, MIN(payment_date) \nfrom payment where id_person in (1, 2, 5, 10)\ngroup by id_person;\n</code></pre>\n\n<p>This retrieves something like :</p>\n\n<pre><code>1   19940623\n2   20100429\n5   20100204\n10  20100111\n</code></pre>\n\n<p>Now, how do I get, for each person, the complete record of the ´payment´ table which correspond to the oldest payment ?</p>\n\n<p>I cannot figure out a way of doing this...</p>\n\n<p>The answer must be in a single SQL query (I cannot make a call for each person, which would be very easy to do...)</p>\n"},{"tags":["c#","sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13234505,"title":"Function remains INVALID only when using System.Data.OracleClient, works through SQL Developer","body":"<p>I'm using C# and System.Data.OracleClient to add functions to a database. This works for most functions, except one. The function is created but its state is INVALID. After examining the cause for this invalid state, I noticed I could simply compile the function within SQL Developer, but not from my c# application.</p>\n\n<p>Any ideas why there is a difference using .NET  and SQL Developer?</p>\n\n<p>This is the function I use</p>\n\n<pre><code>string sql =\n   @\"CREATE OR REPLACE FUNCTION MYUSER.TEMPJOINSTRINGS \n    ( P_CURSOR SYS_REFCURSOR, \n      P_DEL VARCHAR2 := ', '\n    ) RETURN VARCHAR2\n   IS\n     L_VALUE VARCHAR2(32767);\n     L_RESULT VARCHAR2(32767);\n   BEGIN\n   LOOP\n     FETCH P_CURSOR INTO L_VALUE;\n     EXIT WHEN P_CURSOR%notfound;\n     IF L_RESULT IS NOT NULL THEN\n       L_RESULT := L_RESULT || P_DEL;\n     END IF;\n     L_RESULT := L_RESULT || L_VALUE;\n   END LOOP;\n   RETURN L_RESULT;\n   END;\";\n\ntry\n{\n    using (OracleConnection connection = new OracleConnection(@\"Data source=TEST10;User Id=MYUSER;Password=MYPASS;\"))\n    {\n        connection.Open();\n        DbCommand cmd = connection.CreateCommand();\n        cmd.CommandText = sql;\n        cmd.ExecuteNonQuery();\n        connection.Close();\n        return true;\n    }\n}\ncatch (Exception ex)\n{\n    MessageBox.Show(ex.Message);\n}\n</code></pre>\n\n<p>and after that I execute</p>\n\n<pre><code>ALTER FUNCTION MYUSER.TEMPJOINSTRINGS COMPILE\n</code></pre>\n\n<p>But compiling will only work from SQL Developer, not my c# application.</p>\n"},{"tags":["sql","oracle","max","top-n"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13233620,"title":"Returning max value and value prior","body":"<p>I have a query I run to tell me the latest note for active participants:</p>\n\n<pre><code>select notes.applicant_id,\n   reg.program_code,\n   reg.last_name,\n   reg.first_name,\n   reg.status_cd,\n   MAX(notes.service_date) as \"Last Note\"\nfrom reg inner join notes on reg.applicant_id=notes.applicant_id\nwhere reg.status_cd='AC'\ngroup by notes.applicant_id, reg.program_code, \n         reg.last_name, reg.first_name, reg.reg_date, \n         reg.region_code, reg.status_cd\norder by MAX(notes.service_date)\n</code></pre>\n\n<p>But I would also like this query to give me the result of the <code>note.service_date</code> just prior to the max <code>service_date</code> as well. </p>\n\n<p>Results would look like this </p>\n\n<pre><code>notes.applicant_id   reg.last_name  reg.first_name reg.status_cd  Last Note    Prior Note\n 12345                 Johnson          Lori           AC        01-NOV-2011   01-OCT-2011\n</code></pre>\n\n<p>I am working in oracle.</p>\n"},{"tags":["oracle","coding-style","cursor","conditional"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":13144848,"title":"Is it a bad practice to use EXIT WHEN instruction when looping through CURSORs in Oracle?","body":"<p>It may sound like a silly question, but I hope I'll make myself clear enough.</p>\n\n<ol>\n<li>When talking about <a href=\"http://en.wikipedia.org/wiki/Spaghetti_code\" rel=\"nofollow\">Spaghetti Code</a>, the basis of it is the\nusage of GOTOs. I had a peer that was used to say <em>if I put a breakpoint at the end of the code and this breakpoint isn't reached everytime, something is wrong</em>. </li>\n<li>Nevertheless, is a common (and I'd say, a rule) to use <a href=\"http://docs.oracle.com/cd/B10500_01/appdev.920/a96624/04_struc.htm#8297\" rel=\"nofollow\"><code>EXIT WHEN</code></a>\nstructures within Oracle packages (usually followed by a <code>%NOTFOUND</code>\ntest).</li>\n</ol>\n\n<p>Taking for granted that using <code>EXIT</code> breaks the programming flow, isn't something that doesn't match between 1 and 2?</p>\n\n<p>Is everyone programming in PL/SQL following a bad practice? Does PL/SQL don't follow this specific pattern for conditionals?</p>\n\n<p>Is there any performance reason under Oracle's hood to use such statements?</p>\n\n<p>Apologies if this question has been already asked, I couldn't find anything similar around.</p>\n"},{"tags":["sql","oracle","database-design","constraints","data-modeling"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":13233008,"title":"Foreign key on a non-unique index? (oracle)","body":"<p>I'm trying to create a constraint on table A to check if a set of records exists in a table B. I could use a foreign key, but the problem is that the data in the table B is non-unique.</p>\n\n<p>Is there a way to create such a constraint without creating a trigger?</p>\n\n<p>Edit: I can't change table B structure.</p>\n"},{"tags":["sql","oracle","unix","plsql","ksh"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":6501,"score":1,"question_id":2551210,"title":"Oracle PL/SQL: Dump query result into file","body":"<p>I'm working on a pl sql stored procedure. \nWhat I need is to do a select, use a cursor and for every record build a string using values.\nAt the end I need to write this into a file.\nI try to use dbms_output.put_line(\"toto\") but the buffer size is to small because I have about 14 millions lines.\nI call my procedure from a unix ksh.\nI'm thinking at something like using \"spool on\" (on the ksh side) to dump the result of my procedure, but I don' know how to do it (if this is possible)</p>\n\n<p>Anyone has any idea?</p>\n"},{"tags":["python","oracle","cx-oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13234196,"title":"\"error: cannot locate an Oracle software installation\" When trying to install cx_Oracle","body":"<p>Newbie here trying to use python to do some database analysis.  I keep getting the error:\n\"error: cannot locate an Oracle software installation\"  When installing CX_oracle (via easy_install).</p>\n\n<p>The problem is I do not have oracle on my local machine, I'm trying to use python to connect to the main oracle server. I have have setup another program to do this(visualdb) and I had a .jar file I used as the driver but I'm not sure how to use it in this case.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13227732,"title":"decryption for password reverse to ASCII code multiple location","body":"<p>How to create procedure a to decrypt a password reverse ASCII code multiple location char and concatenation with ASCII </p>\n\n<p>example password: 123 \nencrypted to: 49491005015351 </p>\n\n<p>It's encrypted like this:   </p>\n\n<pre><code>v := v || ASCII(substr(u_pass,i,1)) * instr(u_pass,substr(u_pass,i,1))\n</code></pre>\n"},{"tags":["sql","database","oracle"],"answer_count":7,"favorite_count":0,"up_vote_count":3,"down_vote_count":3,"view_count":367,"score":0,"question_id":9930364,"title":"How do I print a triangle of stars using SQL","body":"<p>Is it practically possible to create a triangle of stars like this as below in SQL.I know that this could be done easily in any other programming language like C,C++,Java but want to know whether it is really possible with just SQL or PL/SQL.I tried working on it with dual table in Oracle but couldn't get through it.</p>\n\n<pre><code>  *              *\n * *             * * \n* * *    or      * * *\n</code></pre>\n\n<p>Can someone please shed somelight if anyone knows about it.</p>\n"},{"tags":["oracle","crystal-reports","oracle10g"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13231688,"title":"Crystal Reports 2008 Unknown Database Connection Error to Oracle server","body":"<p>I'm having some problems here with Crystal reports 2008 SP3 installed on Windows 7 64bit with Oracle 10g client. Whenever I try to run a report or do a Database verify or Logon to the database I get the quite unhelpful \"Unknown Database Connection Error \" error message. The only option from here is to click OK. </p>\n\n<p>Oracle 10g is installed as Runtime and has 10.2.04 patch applied. Oracle path setting is correct and Oracle is working with an bespoke Oracle Application as well as SQLPlus TNSPing etc...</p>\n\n<p>There is some evidence of people having this problem around the web but no definite resolution. Does anyone here have any good suggestions?\nThanks </p>\n\n<p>sqlnet.ora settings</p>\n\n<pre><code>trace_level_client = 16 \ntrace_file_client = cli \ntrace_directory_client = c:\\trace \ntrace_unique_client = on \ntrace_timestamp_client = on \ntrace_filelen_client = 100 \ntrace_fileno_client = 2 \nlog_file_client = cli \nlog_directory_client = c:\\trace\\log \ntnsping.trace_directory = c:\\trace\\trace \ntnsping.trace_level = admin \n</code></pre>\n"},{"tags":["c#","oracle","relational-database","devart","odac"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":29,"score":2,"question_id":13184686,"title":"ODAC and Devart dotConnect query result contains fewer columns than expected","body":"<p>Brief version: I am running the Devart dotConnect for Oracle (light) component to query a table with almost 600 columns (please note that I have no control over the database schema) and the amount of columns returned is considerably fewer than expected. I have tried both select * and select , , ...  from ... and I  get the same result. Please, offer any explanation of this behavior. </p>\n\n<p>Detailed version: I am running the light version of this software: Devart.Data.Oracle.dll 6.80.350.0 dotConnect for Oracle. I am also experiencing the same behavior with the oracle .NET data access components.</p>\n\n<p>I am running a select * on a table with ~ 575 columns, most of which are of the \"Number\" data type. After starting the read OracleDataReader instance's FieldCount property says 289. I tried to use the OracleDataAdapter's fill method with the same command, and the DataTable's column collection count some back with 289. I have also tried the ODAC components from Oracle and I get the exact same results. Can anyone tell me how I can select all 575 columns from the table?</p>\n\n<p>I assume 289 is function of the RowSize property of the reader, which happens to be 7292, and the composition of the table column types. The Fetch size and all other properties on all instances used are defaults.</p>\n\n<p>Please, let me know if I can provide any other information as it is important to me to understand the behavior these components. Thanks.</p>\n\n<p>Update: I have also tried a SQL statement which includes every single column name in the select statement and the same behavior is observed.</p>\n"},{"tags":["c#","oracle","oracle10g","pivot","dynamic-sql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13231704,"title":"Changing Row into Columns","body":"<p>I am currently getting this output from my query:-</p>\n\n<pre><code>Count(Total)| Type1\n-----------------\n 24            T1\n\n  22           T2\n</code></pre>\n\n<p>But I want the output like this:-</p>\n\n<pre><code> T1   T2\n----------\n 24   22\n</code></pre>\n\n<p>Note that <code>Type1</code> column can contain any values like T1,T2,T3 so I cannot fix the values in the query. I am using Oracle 10g,  how can I do it?</p>\n"},{"tags":["sql","oracle","oracle10g","pivot"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":901,"score":1,"question_id":3512140,"title":"convert row into columns in oracle10g","body":"<p>how can i convert rows in to columns in  oracle 10g( like pivot in oracle 11g),so that i can add multiple 'and' conditions for the primary key.</p>\n\n<p>ex: select emp_name from emp</p>\n\n<p>where empid = 1 and emp_age = 21;\nwhere empid = 12 and emp_age = 23;</p>\n\n<p>without using 'in' ,i have to get records which satisfies all the above condtions(Like 'and ' operation).</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13230850,"title":"How can i improve the performance of this oracle query?","body":"<p>I have three database tables which contains large amount of data(6000). I wrote the following query for some operaton which is working fine.</p>\n\n<pre><code>UPDATE productlistprice prl SET prl.value = (\n    SELECT minprice FROM(\n       SELECT  MIN(prl.value) AS minprice, prv.productmasterid AS masterprid \n            FROM product pr , productlistprice prl, productvariation prv \n              WHERE prv.productmasterid = (\n       SELECT prv.productmasterid  FROM  productvariation pv \n              WHERE pv.productid = pr.uuid) \n              AND prl.productid = pr.uuid AND prl.productid  = prv.productid \n                    GROUP BY prv.productmasterid) \n              WHERE masterprid = (SELECT prv.productmasterid\n              FROM productvariation prv WHERE prv.productmasterid = prl.productid \n                    GROUP BY prv.productmasterid)) \n              WHERE prl.productid = (\n       SELECT prv.productmasterid FROM productvariation prv \n              WHERE prv.productmasterid = prl.productid \nGROUP BY prv.productmasterid );\n</code></pre>\n\n<p>But the performance of this query is bit slow. it is taking 21 seconds to update the records. Where can i improve this query. Any suggestions will be greatly appriciated </p>\n"},{"tags":["oracle","query-optimization","oracle9i"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":13211921,"title":"What is a HASH TABLE when doing HASH JOIN?","body":"<p>In HASH JOIN method of oracle, HASH TABLE will be built on one of the tables and other will be joined depending on the values in the hash table.</p>\n\n<p>Could you please let me know what is Hash table? What is the structure of hash table? how will it be created?</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":70,"score":2,"question_id":13158137,"title":"how to separate field in oracle contain data varchar and number and date","body":"<p>how to separate field in oracle contain data var char and number and date \nex:</p>\n\n<pre><code>table1:\ncolumn1:MohammadBadarneh_07889855_12021990\n\ncreate procedure to separate and insert into table2:\ntable2:\nname:Mohammad Badarneh\nphone number: 07889855\ndate: 12-02-1990 \n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":54,"score":-1,"question_id":13231395,"title":"SQLPLUS ORACLE select statement","body":"<p>List the student number, subject code, year, and the term of the students\nwho register to only ONE subject in 2012 session 3.</p>\n\n<pre><code>SELECT StudentNum, RSubjectCode, Year, SessionTerm \n FROM &lt;TABLE&gt; \nWHERE Year ='2012' \n  AND SESSIONTERM = '3';\n</code></pre>\n\n<p>This selects everyone from year 2012 and session 3. How do I only find out the student who registered ONE subject only?</p>\n"},{"tags":["sql","oracle","plsql","oracle-apex"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13183322,"title":"Filter out duplicate entries in report in Oracle 11g","body":"<p>We're running Oracle 11g on Windows Server 2008 R2</p>\n\n<p>I currently have an application that used nationally for managing our recruiting system, we're a contract engineering staffing firm.</p>\n\n<p>Now, we have a pretty decently sized database of candidates we've previously worked with and I used Oracle Text to make the attached resumes searchable, which works out great, the only issue is that we often send the same candidate to multiple jobs in order to put them to work faster, which means I may get the same candidate's resume turning up 6 or 7 times in the search results, I'm looking to have it filter out duplicates based on candidate's name and recruiter name since I don't want to only filter out candidate names since some people have the same name, but usually 1 recruiter works with 1 candidate, I know it's not perfect, but could help to narrow things down.</p>\n\n<p>I've tried a few things to remove the dupes, but I can't get it to work, here's the current query that we use to generate the search results.</p>\n\n<pre><code>select score(1) relevance,\n\"PKEY\",\n\"DATE_SUB\",\n\"CLIENT\",\n\"CANDIDATE\",\n\"RECRUITER\",\n\"SALES\",\ndbms_lob.getlength(\"RESUME\") \"RESUME\",\n+\"MIMETYPE\",\n\"FILENAME\",\n\"POSITION\",\n\"AVAILABILITY\",\n\"RATE\",\n\"ISSUES\",\n\"WHEN_INT\",\n\"FEEDBACK\",\n\"NOTES\"\nfrom \"SUBMITTALS\"\nwhere CONTAINS (resume, :P11_SEARCH, 1) &gt; 0 order by 1 desc\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p>Thanks again.</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":28,"score":4,"question_id":13230133,"title":"Selecting all uppercased-value rows of a table in SQL Navigator","body":"<p>I have a table with an email address column. Some email addresses in the table contain uppercase letters. I would like to fetch all the rows with uppercase emails (in order to set them to lowercase). How do I select all the rows where the email address contains uppercase letters?</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2305,"score":0,"question_id":763802,"title":"How to permit update of a view's results in Oracle?","body":"<p>I understand that database views are read-only, or at least read-only by default.</p>\n\n<p>Is it possible to enable the change of data brought by an oracle view?</p>\n\n<p><strong>Rephrasing:</strong> If I make a view of just one table, just to hide some columns, will changes to this data be updated on the table?</p>\n"},{"tags":["sql","database","oracle","query"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":145,"score":0,"question_id":10430335,"title":"sql query to find absent tables from database","body":"<p>I am using ORACLE database. \n<strong>EDIT</strong>:</p>\n\n<p>I want only tables not present in a list, not all those tables in database.</p>\n\n<p>Ex: In my database following tables are present:</p>\n\n<pre><code>a\nb\nc\nd\ne\nr\ns\n</code></pre>\n\n<p>I am being given a list of tables:</p>\n\n<pre><code>a\nb\nc\nv\nh\n</code></pre>\n\n<p>out of which i want to find out which tables are <strong>absent(not present)</strong> in my database.</p>\n\n<p>so: a, b, c are those tables which are present in my database. So excluding these tables my answer will be:</p>\n\n<pre><code>v and h \n</code></pre>\n\n<p><strong>My answer is not d,e,r,s</strong></p>\n\n<p>How can i write a query for this to find out?</p>\n"},{"tags":["sql","database","oracle","left-join","oracle9i"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":50,"score":0,"question_id":13194453,"title":"leftouter join in sql","body":"<p>I have two tables initially in the application. They are as</p>\n\n<pre><code>user                       \n------------------------      \nuser_id                      \ncolumn1                         \ncolumn2\n..\n\nColumnn\n</code></pre>\n\n<h2>user_account_info</h2>\n\n<pre><code>user_id                   \naccount_number (can have multiple a/c number on single user_id)        \ncolumn1                      \ncolumn2          \n..            \nColumnn  \n</code></pre>\n\n<hr>\n\n<p>the query is like </p>\n\n<pre><code>SELECT u.column1, uai.column1, uai.Keycolumn2\n        FROM user u\n        LEFT OUTER JOIN user_account_info uai on u.user_id  = uai.user_id\n</code></pre>\n\n<p>But later a new table user_account_map is added and user_account_info is changed</p>\n\n<h2>user</h2>\n\n<pre><code>user_id                 \ncolumn1                                        \ncolumn2             \n..               \nColumnn   \n</code></pre>\n\n<h2>user_account_info</h2>\n\n<pre><code>account_number (can have multiple a/c number on single user_id)                       \ncolumn1                  \ncolumn2               \n..               \nColumnn \n</code></pre>\n\n<h2>user_account_map</h2>\n\n<pre><code>user_id                      \naccount_number (can have multiple a/c number on single user_id)                \ncolumn1              \ncolumn2 \n</code></pre>\n\n<p>How to rewrite the query to match the output that of the previous query.\n Is it ok to write like                   </p>\n\n<pre><code>SELECT u.column1, uai.column1, uai.Keycolumn2\nFROM user u\nLEFT OUTER JOIN user_account_map uam on u.user_id  = uam.user_id\nLEFT OUTER JOIN user_account_info uai on u.account_number  = uai.account_number\n</code></pre>\n"},{"tags":["database","oracle","insert"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13228609,"title":"How to insert simple string with ' char into oracle database","body":"<p>So my problem is that i need to insert company names into some database. It works fine but when i try to insert, for example Mc'Donalds it doesnt work because it finds end before the real end. So when i try that:</p>\n\n<pre><code>Inert into mydatabase (name, adress) values ('Mc'Donalds', 'somewhere') \n</code></pre>\n\n<p>It crashes. Is there some char like  \\ to ignore it? Thank u!</p>\n"},{"tags":["sql","oracle","database-design","data-modeling"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":61,"score":-3,"question_id":13225928,"title":"difference between Surrogate key,Synthetic Key, Artificial key","body":"<p>Is there any difference in Surrogate Key, Synthetic Key and Artificial Key ?\nI didn't get the exact difference.</p>\n"},{"tags":["oracle","oracle10g","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13227291,"title":"Oracle 11g Database Creation","body":"<p>I am a newbie in Oracle databases and compared with my experiences with SQL Server and MySQL, Oracle is not as easy. Question is, when I tried to create a database using DB Configuration Assistant, when I look at the database using SQL Developer, there are already tables on it. Why does it have something like system tables on it if its a custom database. How can I instead put my own tables on that database.</p>\n"},{"tags":["java","oracle","jdbc","oracle10g","clob"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2490,"score":1,"question_id":6684214,"title":"How to insert Large clob data(>4K characters) in oracle 10g using jdbc","body":"<p>Could you guys please tell me how to insert clob data using jdbc. Iam using oracle10g database.</p>\n\n<p>I was able to insert clob data having length &lt; 4000 using the below 2 methods</p>\n\n<p>1.</p>\n\n<pre><code>tempClob.length()&lt;4000){\n   pstmnt.setClob(colNumber, tempClob );\n}\n</code></pre>\n\n<p>2.</p>\n\n<pre><code>tempClob.length()&lt;4000){\n   Reader reader =tempClob.getCharacterStream();\n   pstmnt.setClob(colNumber, tempClob );\n   pstmnt.setCharacterStream(colNumber, reader, new Long(tempClob.length()).intValue());\n}\n</code></pre>\n\n<p>When the length of the clob data is large for example abt 29k, both these methods fail.</p>\n"},{"tags":["mysql","sql","oracle","updatable-views"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13215119,"title":"How can I update a view with columns that is derived from case statement?","body":"<p>I created a view using this (neglected other columns):</p>\n\n<pre><code>create view view_table (is_root) as select\n  case when C1 = 'Yes' then 1\n       when C1 = 'No' then 0\n       else 0\n  end as is_root\n  from remote_db_table\n</code></pre>\n\n<p>But when I tried to update the view using:</p>\n\n<pre><code>update view_table set is_root=1\n</code></pre>\n\n<p>It does not work. Any way to do it? The view is in Oracle but the remote table is in mySQL</p>\n"},{"tags":["oracle","stored-procedures","plsql","oracle10g","oracle11g"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13226805,"title":"How to find out if this SELECT query executed successfully?","body":"<pre><code> CREATE PROCEDURE Pname(in_empno IN NUMBER out_name OUT VARCHAR2)\n AS\n BEGIN\n select EmpName into out_name from emptable where Empno = in_empno;\n END Pname;\n</code></pre>\n\n<p>In the above procedure, how can I check if the SELECT query executed successfully or not with the given condition?</p>\n"},{"tags":["sql","oracle","alias","decode","ora-00904"],"answer_count":3,"favorite_count":4,"up_vote_count":14,"down_vote_count":0,"view_count":12033,"score":14,"question_id":356675,"title":"Using an Alias in a WHERE clause","body":"<p>I have a query which is meant to show me any rows in table A which have not been updated recently enough. (Each row should be updated within 2 months after \"month_no\".):</p>\n\n<pre><code>SELECT A.identifier\n     , A.name\n     , TO_NUMBER(DECODE( A.month_no\n             , 1, 200803 \n             , 2, 200804 \n             , 3, 200805 \n             , 4, 200806 \n             , 5, 200807 \n             , 6, 200808 \n             , 7, 200809 \n             , 8, 200810 \n             , 9, 200811 \n             , 10, 200812 \n             , 11, 200701 \n             , 12, 200702\n             , NULL)) as MONTH_NO\n     , TO_NUMBER(TO_CHAR(B.last_update_date, 'YYYYMM')) as UPD_DATE\n  FROM table_a A\n     , table_b B\n WHERE A.identifier = B.identifier\n   AND MONTH_NO &gt; UPD_DATE\n</code></pre>\n\n<p>The last line in the WHERE clause causes an \"ORA-00904 Invalid Identifier\" error. Needless to say, I don't want to repeat the entire DECODE function in my WHERE clause. Any thoughts? (Both fixes and workarounds accepted...)</p>\n"},{"tags":["oracle"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13226580,"title":"detecting if a part of a string matches another string","body":"<p>hi guys this is the question: </p>\n\n<p>Display the employee ID and email of employees whose email address has their full last name in it.</p>\n\n<p>what do you think can I use? Can I use substr? if not, any other suggestions? Thanks guys peace!</p>\n"},{"tags":["sql","oracle","greatest-n-per-group","correlated-subquery"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":69,"score":0,"question_id":13223035,"title":"how do I get the oldest date without using a correlated subquery sql","body":"<p>The following code list all the invoices, and I just want the oldest invoice from a vendor:</p>\n\n<pre><code>SELECT DISTINCT vendor_name, i.invoice_number AS OLDEST_INVOICE, \n    MIN(i.invoice_date), i.invoice_total\nFROM vendors v\nJOIN invoices i\nON i.vendor_id = v.vendor_id\nGROUP BY vendor_name, invoice_number, invoice_total\nORDER BY MIN(i.invoice_date);\n</code></pre>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":51,"score":-1,"question_id":13220874,"title":"How to get the last letter of a string","body":"<p>Hi guys just wanted to ask how I can get the last letter of a string and check if it's vowel or consonant. by the way Im using oracle 10g. thank you for those who will help me out. peacE!</p>\n\n<p>here's what I came up with already: </p>\n\n<pre><code>SELECT last_name,\n       Substr(last_name, -1, 1) \"Last letter\",\n       Substr(last_name, 1, 1)  \"First letter\",\n       CASE\n         WHEN Substr(last_name, -1, 1) IN ( 'a', 'e', 'i', 'o', 'u' ) THEN\n         'ends with a vowel'\n         WHEN Substr(last_name, -1, 1) IN ( 'b', 'c', 'd', 'f',\n                                            'g', 'h', 'j', 'k',\n                                            'l', 'm', 'n', 'p',\n                                            'q', 'r', 's', 't',\n                                            'v', 'w', 'x', 'y', 'z' ) THEN\n         'ends with a consonant'\n       END                      \"Last Letter Description\",\n       CASE\n         WHEN Substr(last_name, 1, 1) IN ( 'a', 'e', 'i', 'o', 'u' ) THEN\n         'starts with a consonant'\n         WHEN Substr(last_name, 1, 1) IN ( 'b', 'c', 'd', 'f',\n                                           'g', 'h', 'j', 'k',\n                                           'l', 'm', 'n', 'p',\n                                           'q', 'r', 's', 't',\n                                           'v', 'w', 'x', 'y', 'z' ) THEN\n         'starts with a consonant'\n       END                      \"First Letter Description\"\nFROM   employees\nGROUP  BY first_name,\n          last_name \n</code></pre>\n\n<p>now when you execute this on oracle 10g the \"First Letter Description\" is empty! Help me please what do you think is wrong with my code? </p>\n"},{"tags":["sql","oracle","oracle10g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13226070,"title":"SQL select all the orders for employees with minimum sales","body":"<p>I'm attempting to select all the employees with minimum sales from the following database schema:</p>\n\n<blockquote>\n  <p>Employees(eno, ename, zip, hdate)</p>\n  \n  <p>Parts(pno, pname, qoh, price, level)</p>\n  \n  <p>Customers(cno, cname, street, zip, phone)</p>\n  \n  <p>Orders(ono, cno, eno, received, shipped)</p>\n  \n  <p>Odetails(ono, pno, qty)</p>\n  \n  <p>Zipcodes(zip, city)</p>\n</blockquote>\n\n<p>I can't get the query I was working on to work for total sales per employee without an error.  My problem is getting the quantity * price per order related to the employee.</p>\n"},{"tags":["php","oracle","codeigniter","oracle11g"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":13193625,"title":"Database error on first load but not on refresh","body":"<p>When my web page first loads it displays my query and says Database Error. While refreshing the page loads successfully. Can anyone know why does this occurs?</p>\n\n<p>This issue is with my Production server not on Staging or Dev environment.</p>\n\n<p>This is the error message:</p>\n\n<blockquote>\n  <p>A Database Error Occurred</p>\n  \n  <p>Error Number:</p>\n  \n  <p>SELECT U.USER_ID, U.USER_NAME, U.NAME, U.DESIGNATION, U.EMAIL_ADDRESS,\n  A.CURR_ROLE_ID, A.ROLE_TYPE_ID FROM DOP_USERS U JOIN DOP_ACCESS A ON\n  U.USER_ID = A.USER_ID WHERE UPPER(U.USER_NAME) = 'BSNL.HO'</p>\n</blockquote>\n\n<p>I'm using PHP 5.1.1, Oracle 11G and Code Igniter 1.7</p>\n\n<blockquote>\n  <p>This issue occurs while there is no COOKIE value set in Browser...</p>\n</blockquote>\n"},{"tags":["oracle","stored-procedures","plsql","oracle10g","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13225532,"title":"Is it possible to use \"return\" in stored procedure?","body":"<pre><code> CREATE PROCEDURE Pname(in_Tid IN VARCHAR2,in_IP IN VARCHAR2,outstaticip OUT VARCHAR2,outcount OUT NUMBER)\n AS\n BEGIN\n select STATIC_IP into outstaticip from OP_TTER_MAPPING where TERMINAL_ID = in_Tid;\n if in_IP = outstaticip then\n return 1;\n else\n select COUNT(*) into outcount from OP_TTER_MAPPING where DYNAMIC_IP_LOW &lt;= in_IP AND   DYNAMIC_IP_HIGH &gt;= in_IP AND TERMINAL_ID = in_Tid;\n if outcount = 1 then\n return 1;\n else\n return 0;\n  end if;\n end if;\n END;\n</code></pre>\n\n<p>1.Is it possible to use return in stored procedure like above? \n2.If we can use return, how can i get that return value in Executesql(\"begin Pname(----)END\") method </p>\n\n<p>Thanku</p>\n\n<p>Now i edited my return value in stored procedure like this, am i doing it in right way???</p>\n\n<pre><code>CREATE PROCEDURE P_ValidateTIDIP(in_Tid IN VARCHAR2,in_IP IN VARCHAR2,outstaticip OUT VARCHAR2,outcount OUT NUMBER,outretvalue OUT NUMBER)\nAS\nBEGIN\nselect STATIC_IP into outstaticip from OP_TTER_MAPPING where TERMINAL_ID = in_Tid;\nif in_IP = outstaticip then\n    outretvalue:=1;\nelse \n    select COUNT(*) into outcount from OP_TTER_MAPPING where DYNAMIC_IP_LOW &lt;= in_IP AND DYNAMIC_IP_HIGH &gt;= in_IP AND TERMINAL_ID = in_Tid;\n    if outcount = 1 then \n     outretvalue:=1;\n    else\n     outretvalue:=0;\n   end if;\nend if;\nEND;\n</code></pre>\n"},{"tags":["java","eclipse","oracle","hibernate","tomcat"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3804,"score":1,"question_id":8757264,"title":"Fail to convert to internal representation","body":"<p>I am bringing up Broadleaf Commerce application using <code>Oracle Database</code> and <code>Tomcat 6 server</code>.\n    I followed the steps from <a href=\"http://www.broadleafcommerce.org/confluence/display/BLC15/Eclipse+-+Maven\" rel=\"nofollow\">here</a>\n    I have made changes in <code>Persistence-admin.xml</code>, <code>application_context-custom.xml</code> and <code>pom.xml</code> for <code>Connecting to oracle</code> and <code>tomcat</code>. \n    The application is up but when i m trying to login to admin or store i m getting below error. </p>\n\n<pre><code>org.springframework.jdbc.UncategorizedSQLException: PreparedStatementCallback; uncategorized SQLException for SQL [SELECT USER_NAME,PASSWORD,'TRUE' FROM BLC_CUSTOMER WHERE USER_NAME=?]; SQL state [null]; error code [17059]; Fail to convert to internal representation; nested exception is java.sql.SQLException: Fail to convert to internal representation\n    org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:83)\n    org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)\n    org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)\n    org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:602)\n    org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:636)\n    org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:665)\n    org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:673)\n    org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:713)\n    org.springframework.security.core.userdetails.jdbc.JdbcDaoImpl.loadUsersByUsername(JdbcDaoImpl.java:189)\n    org.springframework.security.core.userdetails.jdbc.JdbcDaoImpl.loadUserByUsername(JdbcDaoImpl.java:152)\n    org.broadleafcommerce.profile.service.LoginServiceImpl.loginCustomer(LoginServiceImpl.java:25)\n    org.broadleafcommerce.profile.web.controller.RegisterCustomerController.registerCustomer(RegisterCustomerController.java:75)\n    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    java.lang.reflect.Method.invoke(Method.java:597)\n    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:175)\n    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:421)\n    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:409)\n    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:774)\n    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)\n    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)\n    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:637)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:343)\n    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)\n    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.broadleafcommerce.profile.web.security.CustomerStateFilter.doFilter(CustomerStateFilter.java:123)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:112)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:149)\n    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)\n    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\n    org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:113)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\n\n\nroot cause \n\njava.sql.SQLException: Fail to convert to internal representation\n    oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:125)\n    oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:162)\n    oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:227)\n    oracle.jdbc.driver.CharCommonAccessor.getBigDecimal(CharCommonAccessor.java:325)\n    oracle.jdbc.driver.CharCommonAccessor.getBoolean(CharCommonAccessor.java:158)\n    oracle.jdbc.driver.OracleResultSetImpl.getBoolean(OracleResultSetImpl.java:394)\n    org.apache.commons.dbcp.DelegatingResultSet.getBoolean(DelegatingResultSet.java:178)\n    org.springframework.security.core.userdetails.jdbc.JdbcDaoImpl$1.mapRow(JdbcDaoImpl.java:193)\n    org.springframework.security.core.userdetails.jdbc.JdbcDaoImpl$1.mapRow(JdbcDaoImpl.java:189)\n    org.springframework.jdbc.core.RowMapperResultSetExtractor.extractData(RowMapperResultSetExtractor.java:92)\n    org.springframework.jdbc.core.RowMapperResultSetExtractor.extractData(RowMapperResultSetExtractor.java:1)\n    org.springframework.jdbc.core.JdbcTemplate$1.doInPreparedStatement(JdbcTemplate.java:648)\n    org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:586)\n    org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:636)\n    org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:665)\n    org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:673)\n    org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:713)\n    org.springframework.security.core.userdetails.jdbc.JdbcDaoImpl.loadUsersByUsername(JdbcDaoImpl.java:189)\n    org.springframework.security.core.userdetails.jdbc.JdbcDaoImpl.loadUserByUsername(JdbcDaoImpl.java:152)\n    org.broadleafcommerce.profile.service.LoginServiceImpl.loginCustomer(LoginServiceImpl.java:25)\n    org.broadleafcommerce.profile.web.controller.RegisterCustomerController.registerCustomer(RegisterCustomerController.java:75)\n    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    java.lang.reflect.Method.invoke(Method.java:597)\n    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:175)\n    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:421)\n    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:409)\n    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:774)\n    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)\n    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)\n    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:637)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:343)\n    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)\n    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.broadleafcommerce.profile.web.security.CustomerStateFilter.doFilter(CustomerStateFilter.java:123)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:112)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)\n    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)\n    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:149)\n    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)\n    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)\n    org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:113)\n    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\n\n\n\n\nCan anybody help me ? \n</code></pre>\n"},{"tags":[".net","oracle","ldap","oid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13223881,"title":".net integration with OVD\\OID","body":"<p>I need to integrate with Oracle Internet Directory and Oracle Virtual Directory from .net.\nI believe this is done using the System.DirectoryServices.Protocols library.\nUnfortunately I am having some difficulty understanding how to authenticate via this protocol and perform functions such as create user, delete user, reset password, unlock account, validate current password. </p>\n\n<p>I would really appreciate if someone can post some examples on how to do the above with clear instructions.</p>\n"},{"tags":["performance","oracle","testing","awr"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13221144,"title":"Oracle10g AWR How to measure improvement after splitting tablespaces into multiple disk volumes?","body":"<p>I have a recently released 10 000 user analytical application that is suffering from performance issues because of excessive amount of transactions. Apart from re-writing many of the SQLs in the application for better performance we are also on a top down approach where we are adding more volumes and tweeks to memory etc. An Oracle specialist redesigned our server from single tablespace with 2 volumes to 2 tablespaces with 4 volumes where the indexes will have their own volume and tablespace.   Each volume is a separate disk array so they do not compete for IO. </p>\n\n<p>We have executed this change in development environment and we are about to move into acceptance but before paying for the change the business would like to see measurable gains. </p>\n\n<p><strong>Where in the AWR report can I make comparisons to measure such data on the before and after the change is executed?</strong> </p>\n"},{"tags":["oracle","hibernate","oracle10g","pagination","top-n"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":46,"score":3,"question_id":13221912,"title":"Oracle and Pagination","body":"<p>In MySql, the concept of pagination can easily be implemented with a single SQL statement using the <code>LIMIT</code> clause something like the following.</p>\n\n<pre><code>SELECT country_id, country_name \nFROM country c \nORDER BY country_id DESC \nLIMIT 4, 5;\n</code></pre>\n\n<p>It would retrieve the rows starting from <code>5</code> to <code>10</code> in the result set which the SQL query retrieves.</p>\n\n<hr>\n\n<p>In Oracle, the same thing can be achieved using <em>row numbers</em> with a subquery making the task somewhat tedious as follows.</p>\n\n<pre><code>SELECT country_id, country_name\nFROM\n  (SELECT rownum as row_num, country_id, country_name\n   FROM\n    (SELECT country_id, country_name\n     FROM country\n     ORDER BY country_id desc)\n  WHERE rownum &lt;= 10\n  )\nWHERE row_num &gt;=5;\n</code></pre>\n\n<p>In Oracle 10g (or higher, I'm not sure about the higher versions though), this can be made somewhat easy such as,</p>\n\n<pre><code>SELECT country_id, country_name\n  FROM (SELECT country_id, country_name, row_number() over (order by country_id desc) rank\n      FROM country)\n WHERE rank BETWEEN 6 AND 10;\n</code></pre>\n\n<hr>\n\n<p>Regarding an application like a web application, the concept of pagination is required to implement almost everywhere and writing such SQL statements every time a (select) query is executed is sometimes a tedious job. </p>\n\n<p>Suppose, I have a web application using Java. If I use the Hibernate framework then there is a direct way to do so using some methods supported by Hibernate like,</p>\n\n<pre><code>List&lt;Country&gt;countryList=session.createQuery(\"from Country order by countryId desc\")\n.setFirstResult(4).setMaxResults(5).list();\n</code></pre>\n\n<p>but when I simply use JDBC connectivity with Oracle like,</p>\n\n<pre><code>String connectionURL = \"jdbc:oracle:thin:@localhost:1521:xe\";\nConnection connection = null;\nStatement statement = null;\nResultSet rs = null;\n\nClass.forName(\"oracle.jdbc.OracleDriver\").newInstance();\nconnection = DriverManager.getConnection(connectionURL, \"root\", \"root\");\nstatement = connection.createStatement();\nrs = statement.executeQuery(\"SELECT * from country\");\n</code></pre>\n\n<p>My question in this case, is there a precise way to retrieve a specified range of rows using this code? Like in the preceding case using the methods something like <code>setFirstResult()</code> and <code>setMaxResults()</code>? or the only way to achieve this is by using those subqueries as specified.</p>\n"},{"tags":["oracle","oracle10g","oracleforms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13202105,"title":"Check if a varchar is a number in Oracle forms","body":"<p>How Do I check if a varchar is a number or contains any special characters in Oracle forms.</p>\n\n<p>I tried using the below code but its giving me logical error</p>\n\n<pre><code>declare\n    v_valid varchar2(15);\nbegin\n    v_valid := :HEADERS.REFERENCE ;\nIf NOT v_valid IN ('0','1','2','3','4','5','6','7','8','9') then\n        message('Characters or Special Symbols are not allowed here');\nend if; \nend;\n</code></pre>\n"},{"tags":["oracle","plsql","oracle10g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3589,"score":1,"question_id":5552359,"title":"How to convert from string to number in Oracle using TO_NUMBER function with fixed decimal point char?","body":"<p>I need to convert in procedure from <code>string</code> to <code>decimal</code> with fixed decimal separator <code>.</code> independant on culture settings. Next, I know decimal number is limited just with 6 decimal places after <code>.</code> and there is no limitiation on number of digits before <code>.</code>. Using Oracle documentation and its examples for format strings I have now just this solution:</p>\n\n<pre><code>v_number := TO_NUMBER(v_string, '9999999999999999999999999999999999D999999', 'NLS_NUMERIC_CHARACTERS = ''. ''');\n</code></pre>\n\n<p>Number of <code>9</code> chars before <code>D</code> is maximum number allowed. I find this format string as pretty awful. Is there any better format string for this general conversion or some way to omit second parameter of function? In general I just need to pass to function NLS parameter to tell it i just want to convert with decimal separator <code>.</code>, but second parameter is mandatory in that case as well.</p>\n"},{"tags":["sql","oracle","plsql","overloading","plsqldeveloper"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":48,"score":1,"question_id":13217166,"title":"overloading procedure in package","body":"<p>Below is the HEADER for the Package TASK5</p>\n\n<pre><code>CREATE OR REPLACE PACKAGE TASK5 \n    AS \nPROCEDURE  TASK5APROCEDURE ( \nREG_NO  IN  NUMBER,\nCERT_TITLE   OUT  VARCHAR2,\nE_DATE     OUT DATE,\n    C_MARKS OUT INTEGER);\n\n\nPROCEDURE  TASK5BPROCEDURE ( \nCERT_ID  IN  CHAR, \nC_T OUT CHAR) ;    \n\n END TASK5;\n</code></pre>\n\n<p>The BODY for the PACKAGE TASK5 </p>\n\n<pre><code>CREATE OR REPLACE PACKAGE BODY TASK5 \nAS \n\n\n PROCEDURE    TASK5APROCEDURE ( \n    REG_NO  IN  NUMBER,\n    CERT_TITLE   OUT  VARCHAR2,\n    E_DATE     OUT DATE,\n    C_MARKS OUT INTEGER)\n            IS\n            BEGIN\n\nSELECT \n    O.PCP_TITLE, \n    C.CERT_EXAMDATE, \n    C.CERT_MARKS \n\nINTO  \n    CERT_TITLE, \n    E_DATE, \n    C_MARKS\n\nFROM \n    PROFCERTPROGRAM O\nINNER JOIN \nCERTIFICATION C\n    ON O.PCP_ID = C.PCP_ID\nWHERE \n    C.S_REGNO LIKE REG_NO;\nEXCEPTION\n               WHEN NO_DATA_FOUND\nTHEN \n                  DBMS_OUTPUT.PUT_LINE('NO DATA FOUND');\n\n\nEND TASK5APROCEDURE;\n\n\nPROCEDURE    TASK5BPROCEDURE ( \nCERT_ID  IN  CHAR, C_T OUT CHAR)\n            IS\n    BEGIN\n\nDBMS_OUTPUT.PUT_LINE ('COURSE NAMES: ');\n\nFOR R IN (  \n    SELECT O.C_TITLE C_T\nFROM \n    COURSE O\nINNER JOIN \nCERTIFICATIONREQUIREMENT C\n    ON O.C_ID = C.C_ID\nWHERE \n    C.PCP_ID LIKE '%'||CERT_ID||'%')\n\nLOOP\n        DBMS_OUTPUT.PUT_LINE (R.C_T);\nEND LOOP ;\n\nEND TASK5BPROCEDURE;\n\nEND TASK5;\n</code></pre>\n\n<p>I wrote the package with two different procedure for 2 different input. \nBut, I want to rewrite the header and body with overloading procedure, any suggestions? </p>\n"},{"tags":["sql","database","oracle","database-design","audit"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":57,"score":3,"question_id":13218873,"title":"General database design - can I reference field names in other tables","body":"<p>I have a table with various fields that can be updated.  Let's called it <code>table1</code> and assume it has these fields:</p>\n\n<pre><code>user VARCHAR2\nfirst_name VARCHAR2\nlast_name VARCHAR2\n</code></pre>\n\n<p>My question: I want to keep track of edits to these fields.  I have an application that allows these fields to be updated but I want to keep track of <em>when</em> a field is edited, <em>who</em> edited the field and <em>which</em> field was edited - the <em>which</em> is the bit I need help with.</p>\n\n<p>I could have a history table:</p>\n\n<pre><code>date_edited DATE\nwho_edited VARCHAR2\nfield_name_edited VARCHAR2\n</code></pre>\n\n<p>what if the field name got changed though?.. It would mean that <code>field_name_edited</code> would refer to a non-existent field.  This seems like a silly approach.</p>\n\n<p>There must be some common way of doing this sort of thing?</p>\n\n<p>Many thanks.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I am using an Oracle DB - see new question tags.</p>\n"},{"tags":["sql","oracle","if-statement","plsql"],"answer_count":2,"favorite_count":3,"up_vote_count":2,"down_vote_count":0,"view_count":75,"score":2,"question_id":13217600,"title":"IF EXISTS condition not working with PLSQL","body":"<p>I am trying to print the TEXT when condition is TRUE. The select code is perfectly working fine. It's showing 403 value when i only run select code. But I have to print some text when condition exists. What's the problem with following code.</p>\n\n<pre><code>BEGIN\nIF EXISTS(\nSELECT CE.S_REGNO FROM\nCOURSEOFFERING CO\nJOIN CO_ENROLMENT CE\n  ON CE.CO_ID = CO.CO_ID\nWHERE CE.S_REGNO=403 AND CE.COE_COMPLETIONSTATUS = 'C' AND CO.C_ID = 803\n)\nTHEN\n    DBMS_OUTPUT.put_line('YES YOU CAN');\nEND;\n</code></pre>\n\n<p>Here is the error report:</p>\n\n<pre><code>Error report:\nORA-06550: line 5, column 1:\nPLS-00103: Encountered the symbol \"JOIN\" when expecting one of the following:\n\n   ) , with group having intersect minus start union where\n   connect\n06550. 00000 -  \"line %s, column %s:\\n%s\"\n*Cause:    Usually a PL/SQL compilation error.\n*Action:\n</code></pre>\n"},{"tags":["oracle","oracle-xe","ora-01017"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2025,"score":1,"question_id":1787097,"title":"oracle express sytem Invalid Login Credentials","body":"<p>i just installed oracle express, im trying to login at database homepage. trying with user sys and system with the password i gave at the installation but i cant log in. message: Invalid Login Credentials\nat sql command line trying to connect\nora-01017 invalid username/password; logon denied</p>\n\n<p>i dont know how to modify the password or just try to uninstall and reinstall?</p>\n\n<p>thanks for the answer.</p>\n"},{"tags":["oracle","oracle11g","oracle-apex"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":965,"score":0,"question_id":9438695,"title":"Delete Application Express Workspace","body":"<p>I'm using oracle application express (11g) and i want to delete a workspace also a user.\nIs possible can't find any resource on this. </p>\n\n<p>Thanks</p>\n"},{"tags":["sql","oracle","oracle-xe"],"answer_count":6,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":19505,"score":4,"question_id":531969,"title":"Oracle 10g express home page is not coming up","body":"<p>I installed Oracle 10g express. Installation went well, But the home page is not coming up.\nI can connect using sqlplus but not with Sql Developer. \nI checked tnsnames.ora and listener.ora everything looks fine.\nListener is also started. I can always reinstall and see. But I thought better inquire the cause.</p>\n\n<p>Regarding the home page. This is the address that comes up in browser. Localhost:8080\n<a href=\"http://127.0.0.1:8080/apex\" rel=\"nofollow\">http://127.0.0.1:8080/apex</a>\nI did a netstat to see whether there is any port conflict for 8080, but that port is not in use.</p>\n\n<p>Have anybody faced this issue?</p>\n"},{"tags":["linux","oracle","oracle-apex"],"answer_count":3,"favorite_count":4,"up_vote_count":5,"down_vote_count":0,"view_count":4155,"score":5,"question_id":5433118,"title":"How to reconfigure Oracle 10g xe on Linux","body":"<p>I have installed Oracle 10g xe from a deb file on linux, and then started to configure it using this terminal command</p>\n\n<blockquote>\n  <p>sudo /etc/init.d/oracle-xe configure</p>\n</blockquote>\n\n<p>but after finishing configuration I forgot the password, so how can I reconfigure it again after reinstallation as now when I use the previous command I receive </p>\n\n<blockquote>\n  <p>Oracle Database 10g Express Edition is already configured</p>\n</blockquote>\n\n<p>Thanks,</p>\n"},{"tags":["oracle","triggers"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":112,"score":0,"question_id":12718725,"title":"PLS-00049: bad bind variable in UPDATE Trigger","body":"<p>I am trying to write a simple trigger in Oracle 11g Express Edition:</p>\n\n<pre><code>CREATE OR REPLACE TRIGGER EMPLOYEE_UPDATE \nBEFORE UPDATE ON EMPLOYEE\nFOR EACH ROW\nBEGIN\n   :new.End_Date := SYSDATE;\nEND;\n</code></pre>\n\n<p>But it raises error:</p>\n\n<pre><code>Error(4,1): PLS-00049: bad bind variable 'NEW.END_DATE'\n</code></pre>\n\n<p>What is the problem with this simple trigger?</p>\n"},{"tags":["sql","oracle","query"],"answer_count":3,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":212,"score":8,"question_id":12315573,"title":"How to write Oracle query to find a total length of possible overlapping from-to dates","body":"<p>I'm struggling to find the query for the following task</p>\n\n<p>I have the following data and want to find the total network day for each unique ID</p>\n\n<pre><code>ID  From        To          NetworkDay\n1   03-Sep-12   07-Sep-12   5\n1   03-Sep-12   04-Sep-12   2\n1   05-Sep-12   06-Sep-12   2\n1   06-Sep-12   12-Sep-12   5\n1   31-Aug-12   04-Sep-12   3\n2   04-Sep-12   06-Sep-12   3\n2   11-Sep-12   13-Sep-12   3\n2   05-Sep-12   08-Sep-12   3\n</code></pre>\n\n<p>Problem is the date range can be overlapping and I can't come up with SQL that will give me the following results</p>\n\n<pre><code>ID  From        To          NetworkDay\n1   31-Aug-12   12-Sep-12   9\n2   04-Sep-12   08-Sep-12   4\n2   11-Sep-12   13-Sep-12   3\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>ID  Total Network Day\n1   9\n2   7\n</code></pre>\n\n<p>In case the network day calculation is not possible just get to the second table would be sufficient.</p>\n\n<p>Hope my question is clear</p>\n"},{"tags":["mysql","sql-server","oracle","postgresql","liquibase"],"answer_count":1,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":141,"score":7,"question_id":11955313,"title":"How to create ordered index with liquibase?","body":"<p>I am wondering if there is a generic way to create an \"ordered index\" with liquibase.</p>\n\n<p>Something that will produce these kind of SQL statement: </p>\n\n<pre><code>CREATE INDEX idx_name ON my_table (m_column DESC)\n</code></pre>\n\n<p>I need that for oracle, postgresql, mysql, and sql server.</p>\n\n<p>If not, I'll have to do it manually with the <code>SQL</code> tag for each RDBM.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13198894,"title":"How can I select a ranged rows with order from a table in Oracle?","body":"<p>In Oracle there is no limit, so I used this:</p>\n\n<pre><code>SELECT * FROM ( \n    SELECT m.*, ROWNUM r from TABLE_NAME m  WHERE COL LIKE XYZ ORDER BY ID ASC\n    ) \nWHERE r BETWEEN 10 AND 20;\n</code></pre>\n\n<p>But it is still not ordered. It is ordered in the 10 from 20, but not the entire table. How can I do that? </p>\n\n<p>I want to ORDER THE ENTIRE TABLE with <code>WHERE</code> clause and get the ranged ones. The solution above only order within the range.</p>\n\n<hr>\n\n<p><strong>Maybe less confusing solution (in case anyone googled here):</strong></p>\n\n<pre><code>SELECT a.* from (\n  SELECT b.*, ROWNUM r FROM ( \n    SELECT * FROM table ORDER BY id ASC  \n  ) b  WHERE  (city LIKE '%abc%' OR city IS NULL)\n) a where r between 5 and 10\n</code></pre>\n\n<p>So it is a better idea to put order right in the middle criteria, and then put other criteria in the second level, and put row number in the outter-most level.</p>\n"},{"tags":["oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":511,"score":2,"question_id":2197113,"title":"Oracle last_ddl_time format","body":"<p>I have to query <code>all_objects</code> table where <code>last_ddl_time='01 jan 2010'</code> but it refuses the date format...</p>\n\n<p>Any body give me the exact format to query?</p>\n"},{"tags":["oracle","plsql","triggers","oracle10g"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":2,"view_count":61,"score":-1,"question_id":13215686,"title":"PLS-00049: bad bind variable 'before delete'","body":"<p>Why do I get the error: PLS-00049: bad bind variable 'OLD.INVENTORY_Q'? inventory_q is a valid column name on the table. But that column is not a part of the o_line table.</p>\n\n<pre><code>set serveroutput on\nCREATE or replace trigger INV_DELETE_BEFORE\nbefore delete on o_line for each row\nDECLARE\n    ERROR_MESSAGE EXCEPTION;\nBEGIN \n    if :old.inventory_q &lt; '100'  then\n        raise ERROR_MESSAGE;\n    end if;\nEXCEPTION\n    WHEN ERROR_MESSAGE THEN\n    RAISE_APPLICATION_ERROR (-20001, 'Not enough inventory');\nEND;\n/\n</code></pre>\n"},{"tags":["oracle","hibernate","ora-00904"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3151,"score":1,"question_id":4548735,"title":"Hibernate native SQL error","body":"<p>I am trying to execute sql native query using hibernate 3.3.2.GA.</p>\n\n<p>I have following query.</p>\n\n<pre><code>session.createSQLQuery(\"SELECT {dept1.*}, {dept2.*} FROM Dept d1, Dept d2 WHERE d1.deptId = d2.deptId\").\n   addEntity(\"dept1\",com.test.pojo.Dept.class).\n   addEntity(\"dept2\",com.test.pojo.Dept.class).\n   list();\n</code></pre>\n\n<p>Mapping file for Dept class is </p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"\n                                   \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;\n&lt;hibernate-mapping&gt;\n&lt;class name=\"com.test.pojo.Dept\"&gt;\n  &lt;id column=\"deptId\" name=\"deptId\" type=\"long\"&gt;\n   &lt;generator class=\"native\"/&gt;\n  &lt;/id&gt;\n  &lt;version name=\"version\" access=\"field\" column=\"version\"&gt;&lt;/version&gt;\n  &lt;property  name=\"deptName\" type=\"string\" column=\"deptName\"/&gt;\n\n  &lt;set name=\"emps\" cascade=\"all\" inverse=\"true\"&gt;\n     &lt;key column=\"deptId\"&gt;&lt;/key&gt;\n     &lt;one-to-many class=\"com.test.pojo.Emp\"/&gt;\n  &lt;/set&gt;\n&lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n\n<p>But why I get following error? It is converting my query to </p>\n\n<p>SELECT <strong>dept1.**deptId as deptId1_0_, *<em>dept1.</em>*version as version1_0_, *<em>dept1.</em>*deptName as deptName1_0_, *<em>dept2.</em>*deptId as deptId1_1_, *<em>dept2.</em>*version as version1_1_, *<em>dept2.</em>*deptName as deptName1_1_ **FROM Dept d1, Dept d2</strong> WHERE d1.deptId = d2.deptId.</p>\n\n<p>Hibernate: SELECT dept1.deptId as deptId1_0_, dept1.version as version1_0_, dept1.deptName as deptName1_0_, dept2.deptId as deptId1_1_, dept2.version as version1_1_, dept2.deptName as deptName1_1_ FROM Dept d1, Dept d2 WHERE d1.deptId = d2.deptId\n20:43:41,109 WARN JDBCExceptionReporter:100 - SQL Error: 904, SQLState: 42000\n20:43:41,109 ERROR JDBCExceptionReporter:101 - ORA-00904: \"DEPT2\".\"DEPTNAME\": invalid identifier</p>\n\n<p>Exception in thread \"main\" org.hibernate.exception.SQLGrammarException: could not execute query\nat org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:90)\nat org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)\nat org.hibernate.loader.Loader.doList(Loader.java:2235)\nat org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2129)\nat org.hibernate.loader.Loader.list(Loader.java:2124)\nat org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:312)\nat org.hibernate.impl.SessionImpl.listCustomQuery(SessionImpl.java:1723)\nat org.hibernate.impl.AbstractSessionImpl.list(AbstractSessionImpl.java:165)\nat org.hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:175)\nat com.test.test.Test1.main(Test1.java:96)\nCaused by: java.sql.SQLException: ORA-00904: \"DEPT2\".\"DEPTNAME\": invalid identifier</p>\n\n<p>at oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:134)\nat oracle.jdbc.ttc7.TTIoer.processError(TTIoer.java:289)\nat oracle.jdbc.ttc7.Oall7.receive(Oall7.java:590)\nat oracle.jdbc.ttc7.TTC7Protocol.doOall7(TTC7Protocol.java:1973)\nat oracle.jdbc.ttc7.TTC7Protocol.parseExecuteDescribe(TTC7Protocol.java:850)\nat oracle.jdbc.driver.OracleStatement.doExecuteQuery(OracleStatement.java:2599)\nat oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:2963)\nat oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:658)\nat oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:584)\nat org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)\nat org.hibernate.loader.Loader.getResultSet(Loader.java:1812)\nat org.hibernate.loader.Loader.doQuery(Loader.java:697)\nat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)\nat org.hibernate.loader.Loader.doList(Loader.java:2232)\n... 7 more</p>\n"},{"tags":["sql","oracle","sql-developer","oracle-sqldeveloper"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13214951,"title":"Internal error on Oracle SQL Developer 3.2.20.09","body":"<p>I am trying ton insert few data on my existing table but it's showing internal error on all tables. </p>\n\n<p>Here is my simple insert into code where sql developer shows the error:</p>\n\n<pre><code>Insert into STUDENTS (I_ID,C_ID) values (1,'801')\n</code></pre>\n\n<p><strong>ERROR:</strong></p>\n\n<pre><code>Error starting at line 1 in command:\nInsert into STUDENTS(I_ID,C_ID) values (1,'801')\nError at Command Line:1 Column:1\nError report:\nSQL Error: ORA-00600: internal error code, arguments: [kqd-objerror$], [U], [0], [373], [BIN$XQQxCzAhRPCuX323VsAKNA==$0], [], [], [], [], [], [], []\n00600. 00000 -  \"internal error code, arguments: [%s], [%s], [%s], [%s], [%s], [%s], [%s], [%s]\"\n*Cause:    This is the generic internal error number for Oracle program\n           exceptions.  This indicates that a process has encountered an\n           exceptional condition.\n*Action:   Report as a bug - the first argument is the internal error number\n</code></pre>\n\n<p>Do you guys have any idea?</p>\n"},{"tags":["sql","database","oracle","query"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":13213923,"title":"How to create sql query results in columns from rows?","body":"<p>From the following tables:</p>\n\n<ul>\n<li>store(store_id, ...) {1 ..., 2 ...} two stores</li>\n<li>film(film_id, ...)</li>\n<li>inventory(inventory_id, film_id, store_id)</li>\n<li>rental(rental_id, rental_date, inventory_id, return_date, ...)</li>\n<li>category(category_id, name)</li>\n<li>film_category(film_id, category_id)</li>\n<li>film(film_id, rental_duration, rental_rate, ...)</li>\n<li>customer(customer_id, store_id, ...)</li>\n</ul>\n\n<p>Can I have a query resutls on a table just like the follwoing?</p>\n\n<p>CategoryName | \"Store 1: avaliable items\" | \"Store 1: unavaliable items\" | \"Store 2: avaliable items\" | \"Store 2: unavaliable items\"</p>\n\n<p>Notice that the store fileds in the result table are inseperate columns not in the same columns !!</p>\n\n<p>I am not looking for the result query, I am looking for how to make them side by side store 1, store 2.</p>\n\n<p>Can case sql statement help here?</p>\n"},{"tags":["sql","oracle","date-arithmetic"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":850,"score":2,"question_id":9568787,"title":"SQL: Get records created in time range for specific dates","body":"<p>I have a set of records that were created last week, and from those I want to retrieve only those that were created between 6h45 and 19h15. I have a column <code>creation_date</code> that I can use.</p>\n\n<p>How can I do this in sql?</p>\n"},{"tags":["sql","oracle","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":54,"score":-1,"question_id":13209775,"title":"Creating table in Oracle","body":"<p>My requirement is that the column <code>accno</code> has no null value and no duplicates. The name column has no nulls and accepts only A to Z (no other like number or * $). The <code>acctype</code> columns is a character that allows only ( 'S'  , 'C' ,'R') and the <code>balance</code> column has no null values. If <code>acctype</code> is S then balance should be >= 5000, when C the balance should be > 10000 and when it's R >= 5000.</p>\n\n<p>I am trying to apply this with:</p>\n\n<pre><code>create table kcb_acc_tab\n (accno varchar2(20)\n    constraint kcb_acc_Pk\n      primary key, \n  name varchar2(20)\n    constraint kcb_name_NN\n      Not null\n    constraint kcb_name_CK \n      check((name =upper(name)) and (name like '[(A-Z)]')),\n  Acctype char\n    constraint kcb_acctype_ck\n      check (acctype in('S' ,'C' ,'R')) ,\n  Doo timestamp\n    default sysdate ,\n  bal number(7,2) kcb_bal_NN\n    constraint kcb_bal_ck\n      check((aacctype ='S' and bal &gt;=5000) or\n            (acctype = 'C' and bal &gt;=10000) or\n            (acctype ='R' and bal &gt;=5000));\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":71,"score":3,"question_id":13210493,"title":"appending row number in sql select statement with row value","body":"<p>I am trying to concatenate the select statment results in one row.<br>\nFor eg :\nFor this select statement output :  </p>\n\n<pre><code>Name  \nABC  \nDEF  \nGHI\n</code></pre>\n\n<p>I needed following Output :<br>\nName  </p>\n\n<pre><code>1 ABC, 2 DEF, 3 GHI  \n</code></pre>\n\n<p>(Means row number should be appended in front for each row)<br>\nI am using wm_concat() function but it is giving me the following o/p : <code>ABC,DEF,GHI</code><br>\nCan anyone help ?</p>\n"},{"tags":["sql","oracle","oracle11g","top-n"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13209962,"title":"inner join on table with multiple record","body":"<p>I have two tables as follows</p>\n\n<h3>table1</h3>\n\n<pre><code>column1|column2\n----------------\na1     | c1\n----------------\na2     | c2\n</code></pre>\n\n<h3>table2</h3>\n\n<pre><code>column1|column2|column3\n----------------------\n1      | a1    | x\n-----------------------\n2      | a1    | y\n-----------------------\n3      | a1    | z\n-----------------------\n4      | a2    | ab\n-----------------------\n5      | a2    | cd\n-----------------------\n6      | a2    | ef\n</code></pre>\n\n<p>Table1 is the parent table and table2 is the child table.</p>\n\n<p>Column1 of table1 is mapped to column2 of table2.</p>\n\n<p>Table2 can contain multiple records for each entry of column1 in table1 some thing like this.</p>\n\n<p>I want to join table1 to table2, but I want only the first record of all entries of table2.</p>\n\n<p>So my result set will be </p>\n\n<pre><code>column1|column2|column3\n----------------------\n1      | a1    | x\n-----------------------\n2      | a2    | ab\n</code></pre>\n\n<p>How to make a join to achieve this in oracle 11 g. I use sql navigator +</p>\n"},{"tags":["database","oracle","oracle10g","toad","dblink"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4524,"score":0,"question_id":8532757,"title":"Testing DB Link - ORA-12154: TNS:could not resolve the connect identifier specified","body":"<p>I know there is a load of times this question has been asked but I can't quite figure out how to apply this information to my situation.</p>\n\n<p>I have two databases of which I'm trying to connect with a DB LINK.  These are:</p>\n\n<ul>\n<li>BBEGMTD1</li>\n<li>OPEGMTP1.WORLD</li>\n</ul>\n\n<p>A DB link has already been defined by someone, with the name PE_DBLINK.WORLD.</p>\n\n<p>I can access <strong>both</strong> of these databases from my machine, so I can't see how tnsnames.ora would be affected.</p>\n\n<p>However when I test the DB LINK I get the famous:</p>\n\n<blockquote>\n  <p>Link  : \"PE_DBLINK.WORLD\" Error : ORA-12154: TNS:could not resolve the\n  connect identifier specified</p>\n</blockquote>\n\n<p>Could you please point me in the right direction, does the tnsnames.ora need to be modified on the BBEGMTD1 server?</p>\n\n<p>As per @Chance comment, <code>select * from ALL_DB_LINKS</code> returns:</p>\n\n<pre><code>PUBLIC                        \nPE_DBLINK.WORLD                                                                 \nPRICING                       \nOPEGMTP1.WORLD                                                                  \n03-NOV-11\n\nPUBLIC                        \nEBPROJ.WORLD                                                                    \nEBPROJ                        \nMIDGMTP1                                                                        \n17-JUN-09\n\nMYOPEGMTP1WORLD.WORLD                                                           \nPRICING                       \n(DESCRIPTION= (ADDRESS= (PROTOCOL=TCP) (HOST=ORA04SOUK) (PORT=1521) ) (CONNECT_D\nATA= (SERVER=dedicated) (SERVICE_NAME=OPEGMTT1) ) ) )                           \n16-DEC-11\n</code></pre>\n\n<p>This is the TNSNames Editor in TOAD to show the details are being shown up:</p>\n\n<p><img src=\"http://i.stack.imgur.com/ErFEA.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","sql","oracle","jdk"],"answer_count":5,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":5698,"score":4,"question_id":7876502,"title":"How can I run Oracle SQL Developer on JDK 1.6 and everything else on 1.7?","body":"<p>How can I run Oracle SQL Developer on a version of Java it supports (1.6) while running Java 1.7 for everything else?</p>\n\n<p>I can install both JDK's on my system, but I'm concerned with changing environment variables and having it affect more than just SQL Developer. Curious if there's elegant solutions to this.</p>\n\n<p>I am having issues with SQL Developer (running off JDK 1.7) only returning 50 rows. &lt;-- Feel free to address this specific issue as well. EDIT: The problem is not that it returns only 50 rows, this is standard, the problem is the inability to scroll down to see more rows on demand.</p>\n"},{"tags":["sql","oracle","stored-procedures","plsql","sqlplus"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13209175,"title":"PL/SQL : Encountered the symbol \"END\"","body":"<p>I get the following error, even though I have checked the code carefully. I don't know what I'm missing. </p>\n\n<p>LINE/COL ERROR</p>\n\n<hr>\n\n<p>31/1     PLS-00103: Encountered the symbol \"END\" when expecting one of the\n         following:</p>\n\n<p>CODE:</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE sp_ssjm_newworkorder\n(   workorderno IN NUMBER,\ncompany     IN CHAR,\nattention   IN CHAR,\ndatedue     IN DATE,\nloggedby    IN CHAR\n)\n\nAS  id     NUMBER;\ntoday         DATE:=SYSDATE;\nBEGIN\nSELECT  client_id   --grab client_id\nINTO id \nFROM    ssjm_client\nWHERE ssjm_client.name=company;\n\nIF id IS NULL THEN  --check if client exists by checking if client_id is there\n    dbms_output.put_line('Please create client first');\n    GOTO the_end;\nELSE\n    INSERT INTO ssjm_workorder      VALUES(workorderno,workorderno,company,loggedby,attention,'Received',today,datedue,id);\nEND IF;\n\nEXCEPTION\n    WHEN OTHERS THEN\n    raise_application_error(-20999,'An error occured in' ||\n        SQLCODE || '-ERROR-' || SQLERRM);\n\n&lt;&lt;the_end&gt;&gt;\n\nEND sp_ssjm_newworkorder;\n</code></pre>\n"},{"tags":["sql","oracle","database-design","primary-key"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":13208403,"title":"What is the better way to organize primary keys in database?","body":"<p>My database holds two tables, one is distance matrix of cities, the other holds cities. My first structure was like this:</p>\n\n<ul>\n<li>City \n<ul>\n<li>Uuid</li>\n<li>Name</li>\n<li>Latitude</li>\n<li>Longitude</li>\n</ul></li>\n</ul>\n\n<p>and </p>\n\n<ul>\n<li>Distance\n<ul>\n<li>FromCityID</li>\n<li>ToCityID</li>\n<li>DistanceLength</li>\n</ul></li>\n</ul>\n\n<p><code>UUID</code> is a primary key of the CITY table, <code>FromCityID</code> and <code>ToCityID</code> reference CITY each as foreign key, and both are composite primary key of the DISTANCE table because the distance between two cities should be unique.</p>\n\n<p>But then a realised that I don't want to use <code>UUID</code> and auto-increment as primary keys because I upload data in this database from XML, which holds cities and distances. And as distances may include not only those cities that mentioned in current XML but any previously stored city from database.</p>\n\n<p>I need a system of IDs that is the same across the database and XML. Latitude / longitude seems the best option so I changed my tables to this:</p>\n\n<ul>\n<li>City \n<ul>\n<li>Name</li>\n<li>Latitude</li>\n<li>Longitude</li>\n</ul></li>\n</ul>\n\n<p>and </p>\n\n<ul>\n<li>Distance\n<ul>\n<li>FromCityIDLatitude</li>\n<li>FromCityIDLongitude</li>\n<li>ToCityIDLatitude</li>\n<li>ToCityIDLongitude</li>\n<li>DistanceLength</li>\n</ul></li>\n</ul>\n\n<p><code>Latitude</code> and <code>Longitude</code> are a composite primary key of the CITY table; <code>FromCityIDLatitude</code> / <code>FromCityIDLongitude</code> and <code>ToCityIDLatitude</code> / <code>ToCityIDLongitude</code> reference CITY each as foreign keys, and all four columns are composite primary key of the DISTANCE table.</p>\n\n<p>But it's a bad design to use 4 columns as a primary key. What is the best thing in this case?</p>\n"},{"tags":["oracle","jpa"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13201798,"title":"Java NoClassDefFoundError with integrating JPA on Weblogic","body":"<p>I have one web dynamic project called \"eshop\" for which I am making a JPA for. I have added via File New JPA project a new JPA and called it \"jpa\" with the package name called \"model\" In the servlet in the eshop project i call it via </p>\n\n<pre><code>import model.*;\n\nProductModelDAO dao4 = new ProductModelDAOImpl(\"jpa\");\nArrayList products = dao4.getProductsByCategory(categoryId);\n</code></pre>\n\n<p>It however keeps giving the NoClassDefFoundError error. Eclipse won't allow me to give the JPA the same package name as the eshop project which has the package name \"eshop\". In the JPA project using the properties window I tried to reference to the eshop project without any result. In the JPA project in Java Build Path I also added via Add Class Folder the class folder of the eshop project. Also without any result. I've spent hours checking why this is happening. Could anyone can give me a clear instruction how to solve this? I'm using Weblogic 11gR1 (10.3.3). The error is the following:</p>\n\n<pre><code>java.lang.NoClassDefFoundError: model/ProductModelDAOImplat eshop.Servlet.doPost(Servlet.java:110)\nat eshop.Servlet.doGet(Servlet.java:57)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:707)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:820)\nat weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)\nat weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)\nat weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)\nat weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183)\nat weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.doIt(WebAppServletContext.java:3686)\nat weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3650)\nat weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)\nat weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)\nat weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2268)\nat weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2174)\nat weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1446)\nat weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)\nat weblogic.work.ExecuteThread.run(ExecuteThread.java:173)\n</code></pre>\n"},{"tags":["php","oracle","query"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13209734,"title":"PHP error: Warning: ociparse() parameter 1 to be resource","body":"<p>As there is not ready made function in oracle to validate the Query so created.\nSo I tried below code to check whether the QUERY is valid or not.</p>\n\n<pre><code>if(isset($_POST['btn_Submit_Query']))\n            {\n                $check_query=$_POST['txtQuery'];\n                echo $check_query;\n                $valid = false;\n                $stmt = oci_parse($DB, $check_query);\n                echo \"Statement\" . $stmt;\n                //oci_define_by_name($stmt, 'NUMBER_OF_ROWS', $number_of_rows);\n                oci_execute($stmt, OCI_DEFAULT);\n                echo oci_num_rows($stmt);\n            }\n</code></pre>\n\n<p>I got following Warnings in the Execution:</p>\n\n<pre><code>Warning: oci_parse() expects parameter 1 to be resource, object given in D:\\xampp\\htdocs\\app\\DashBoardSite\\Admin\\querybuilder.php on line 899\nStatement\nWarning: oci_execute() expects parameter 1 to be resource, null given in D:\\xampp\\htdocs\\app\\DashBoardSite\\Admin\\querybuilder.php on line 902\n\nWarning: oci_num_rows() expects parameter 1 to be resource, null given in D:\\xampp\\htdocs\\app\\DashBoardSite\\Admin\\querybuilder.php on line 903\n</code></pre>\n\n<p>Kindly please tell me the PROBLEM where is my mistake.\nThanks and Regards in Advance</p>\n"},{"tags":["sql","database","oracle","one-to-many"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2813,"score":1,"question_id":2690192,"title":"Combining multiple rows into one row, Oracle","body":"<p>I'm working with a database which is created in Oracle and used in a GIS-software through SDE. One of my colleuges is going to make some statistics out of this database and I'm not capable of finding a reasonable SQL-query for getting the data.</p>\n\n<p>I have two tables, one with registrations and one with registrationdetails. It's a one to many relationship, so the registration can have one or more details connected to it (no maximum number).</p>\n\n<ol>\n<li>table: Registration  </li>\n</ol>\n\n<pre>\nRegistrationID          Date       TotLenght\n1                    01.01.2010        5\n2                    01.02.2010        15\n3                    05.02.2009        10\n</pre>\n\n<p>2.table: RegistrationDetail</p>\n\n<pre>\nDetailID     RegistrationID   Owner      Type      Distance\n1                  1           TD          UB          1,5\n2                  1           AB          US          2\n3                  1           TD          UQ          4\n4                  2           AB          UQ         13\n5                  2           AB          UR         13,1\n6                  3           TD          US          5\n</pre>\n\n<p>I want the resulting selection to be something like this:</p>\n\n<pre>\nRegistrationID          Date       TotLenght DetailID     RegistrationID   Owner     Type      Distance  DetailID     RegistrationID   Owner      Type      Distance  DetailID     RegistrationID   Owner      Type      Distance\n1                    01.01.2010        5         1              1           TD        UB          1,5          2               1          AB        US          2         3                  1              TD          UQ          4\n2                    01.02.2010        15        4              2           AB        UQ         13            5               2          AB        UR         13,1\n3                    05.02.2009        10        6              3           TD        US          5\n</pre>\n\n<p>With a normal join I get one row per each registration and detail. Can anyone help me with this? I don't have administrator-rights for the database, so I can't create any tables or variables. If it's possible, I could copy the tables into Access.</p>\n"},{"tags":["oracle","select","oracle10g"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":11545778,"title":"Compound select query in Oracle Database","body":"<p>I have a table, <code>mealdb</code>, which has three fields viz. <code>\"userid\", \"timeofday\", \"daydate\"</code>(all <code>varchar2</code>). <code>timeofday</code> can have two values, \"noon\" or \"afternoon\". Now I want to calculate the total number of afternoons against a given userid. I tried like </p>\n\n<pre><code>select sum(timeofday) \n  from mealdb \n where timeofday='afternoon' where userid='1200';\n</code></pre>\n\n<p>But it is giving an error in Oracle 10g.</p>\n\n<p>How do I fix this problem?</p>\n"},{"tags":["oracle","plsql","locking"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":28,"score":1,"question_id":13207285,"title":"How to lock the table restricting reads from other sessions?","body":"<p>Is it possible to lock the table restricting reads from other sessions? I would more appreciate suggestions like \"you can workaround it with ...\" than \"Why do you need that?\".</p>\n"},{"tags":["sql","oracle","optimization","query-optimization","partitioning"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":79,"score":3,"question_id":13173709,"title":"Optimize Oracle order by query","body":"<p>I have a table with around 5 million rows that look like this:  </p>\n\n<p><strong>Erp_in:</strong></p>\n\n<pre><code>corr_id varchar(50) (almost Unique)\ncorr_type nvarchar(1) (4 distinct values)\ninterface varchar(20) (around 10 distinct values)\nindate DateTime\n</code></pre>\n\n<p>With 3 different index on (corr_id, interface and indate)<br>\nAnd also I have another table which I usally left join with the original table, with about 100000 rows</p>\n\n<p><strong>Erp_In_failed:</strong></p>\n\n<pre><code>corr_id\ninterface\nerror (clob)   \ninput (clob)\n</code></pre>\n\n<p>with index on (corr_id and interface)</p>\n\n<p>The query I want to optimize is Simple as this:</p>\n\n<pre><code>SELECT a.corr_id, a.interface, a.indate, b.error \nFROM erp_in a left join erp_in_failed b on a.corr_id = b.corr_id and a.interface =          b.interface\nOrder by a.indate desc;\n</code></pre>\n\n<p>If I remove the order by, the query isn't taking that long, but ordering the data takes around 3 minutes if not more.</p>\n\n<p>What can I do to optimize the query?\nI was thinking on Partitioning / Removing old data to history table / maybe creating a sequence primary key and order by it or anything else you have in mind...</p>\n\n<p><strong>Edit:</strong><br>\nExecution plan says full table scan, and it's not the join that takes so long it's the order by.<br>\nEven this query takes forever:</p>\n\n<pre><code>SELECT * FROM erp_in\nORDER BY indate;\n</code></pre>\n\n<p>I have tried using Paging, but that doesn't work also, and takes few minutes for 20 results, maybe I am doing it wrong?</p>\n\n<p>If I add WHERE clause on indate field, it uses the index, but only when it is less than 20 days old, anything other than that still uses full table scan. (even with 40 days, adding INDEX hint made the query run faster, but still not enough).</p>\n\n<p>And just for the curiosity, I have a simple table with 1 million rows, and order by takes few seconds, what's the difference? is 1 million is enough to sort it in RAM?</p>\n\n<p>Thanks,</p>\n"},{"tags":["oracle","plsql","cursor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13207379,"title":"How to update cursor records using WHERE CURRENT OF?","body":"<p>I'm getting \"ORA-01410: Invalid ROWID\" exception when executing this block. Any ideas why?</p>\n\n<pre><code>DECLARE\n  CURSOR c_orders IS\n    SELECT * from orders FOR UPDATE OF no;\n  v_order_record c_orders%ROWTYPE;\nBEGIN\n  OPEN c_orders; \n  LOOP\n    FETCH c_orders INTO v_order_record;\n    UPDATE orders SET no = 11 WHERE CURRENT OF c_orders;\n    EXIT WHEN c_orders%NOTFOUND; \n  END LOOP;  \n  CLOSE c_orders; \nEND; \n</code></pre>\n\n<p>However, everything works if using FOR IN syntax:</p>\n\n<pre><code>DECLARE\n  CURSOR c_orders IS\n    SELECT * from orders FOR UPDATE OF no;\nBEGIN\n  FOR rec IN c_orders\n  LOOP\n    UPDATE orders SET no = 11 WHERE CURRENT OF c_orders;\n  END LOOP; \nEND; \n</code></pre>\n"},{"tags":["performance","oracle","business-intelligence","partitioning","tuning"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":861,"score":0,"question_id":3193715,"title":"Optimize SELECT from Partitioned Fact Table in Oracle 10","body":"<p>I have a fact table containing 8 Million rows with 1 Million rows increase per month. The table already contains indexes on it. The table is used by IBM Cognos environment to generate reports. Currently I am looking for way to optimize the table SELECT statements. </p>\n\n<p>As first try, I partitioned the table (each partition has equal distribution of rows) and the query is suitable for the partitions, but for some reason, I am getting equal or even worse performance, which is weird. Only one partition is affected per query. Can someone explain how to optimize this ?</p>\n\n<p>Second idea I came to is to implement the fact table as Index organized table, but it will have to have all the columns as primary key. Is this alright and will there be performance gain ?</p>\n\n<p>Third idea is to implement the fact table in a way that will contain all the columns that are joined from the star schema. Will there be performance gain ?</p>\n\n<p>EDIT: Here is the execution plan:\n<a href=\"http://i50.tinypic.com/11qtzr6.jpg\" rel=\"nofollow\">http://i50.tinypic.com/11qtzr6.jpg</a></p>\n\n<p>I have managed to reduce the access time to fact table FT_COSTS by 3 times (cost was 42000, now is 14900) AFTER I created indexes containing the partitioning criteria, but before that I was getting worse results than in unpartitioned table. I used this link to solve my partitioning problem <a href=\"http://stackoverflow.com/questions/2535908/range-partition-skip-check\">http://stackoverflow.com/questions/2535908/range-partition-skip-check</a></p>\n\n<p>From what I see now, the main bottleneck is the GROUP BY which raises the cost from 34000 to 85 000 , which is more than doubling . Does anyone have idea about a workaround on this ?</p>\n"},{"tags":["java","oracle","web-services","stored-procedures","plsql"],"answer_count":2,"favorite_count":4,"up_vote_count":5,"down_vote_count":0,"view_count":12274,"score":5,"question_id":299002,"title":"Access Web service from Oracle stored procedure","body":"<p>Is there anybody who has successfully accessed a Web service from an Oracle stored procedure?  If so, was it a Java stored procedure?  A PL/SQL stored procedure?</p>\n\n<p>Is there any reason why I should not be trying to access a WS from a stored proc?</p>\n\n<p>Here are a couple refs that I found so far</p>\n\n<ul>\n<li><a href=\"http://download.oracle.com/docs/cd/B19306_01/java.102/b14187/chtwelve.htm#CBBEFCHI\" rel=\"nofollow\">Database Web Services</a></li>\n<li><a href=\"http://www.oracle.com/technology/sample_code/tech/java/jsp/samples/wsclient/Readme.html\" rel=\"nofollow\">Calling external Web Service from a Java Stored Procedure</a></li>\n</ul>\n\n<p><em>..Just to clarify, this is for SOAP calls</em></p>\n"},{"tags":["sql","oracle","oracle10g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":135,"score":0,"question_id":7467438,"title":"How to move a table from system schema to scott schema in Oracle?","body":"<p>In some days ago...i was converting some Large MySQL Database to Oracle 10g R2 by using Oracle SQL Developer database migration tools.But unfortunately it was migrated on system schema.but i need to it on scott schema.\nAfter Googling i found this two links <a href=\"http://www.orafaq.com/forum/t/96818/2/\" rel=\"nofollow\">OraFAQ Forum</a> and <a href=\"http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:752030266230\" rel=\"nofollow\">ASK TOM Q&amp;A</a>.But I cannot find any appropriate answer. Any one Can help me to do , How it is possible.</p>\n\n<p>Thanks In Advance.</p>\n"},{"tags":["oracle"],"answer_count":5,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":6888,"score":6,"question_id":3496948,"title":"Is there a free GUI management tool for Oracle Database Express?","body":"<p>Like Microsoft SQL Server Management Studio for MSSQL?</p>\n"},{"tags":["oracle","db2","dump"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12597462,"title":"What is the DB2 equivalent of DUMP function in Oracle?","body":"<p>The <a href=\"http://www.techonthenet.com/oracle/functions/dump.php\" rel=\"nofollow\">dump function in Oracle</a> displays the character set and bitwise representation of how data is stored.</p>\n\n<p>Does anybody know if there is an equivalent command in DB2 please? Thank you.</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1049,"score":0,"question_id":7019197,"title":"Oracle SQL: Get the last eight months of data (with YEAR and MONTH columns)","body":"<p>I have a table that has columns YEAR and MONTH, which are varchars, which have a format like MONTH = '02', YEAR = '2011'.</p>\n\n<p>What query can I use to get the last eight months of data, excluding the current month?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13204080,"title":"Oracle SQL - Grouping by CASE","body":"<p>I have the following query:</p>\n\n<pre><code>Select Player_Id,\nPt_Credit As Total_Points\nFrom Player \nWhere Trunc(Create_Dtime) = Trunc(Sysdate) - 90\nAnd Trunc(Init_Dtime) &gt;= To_Date('2012-sep-1','yyyy-mon-dd')\nOrder by Total_Points Desc\n</code></pre>\n\n<p>Which gives me this result:</p>\n\n<pre><code>Player_ID      TOTAL_POINTS\n  23452         1500\n  23494         1000\n  30934         500\n</code></pre>\n\n<p>and so on. I want to group these player_ids results into groups like 0-300 points, 301-600 points, 601-900 points , and greater than 900 points...so it would look like this in the results:</p>\n\n<pre><code>Point_Level     Count(Player_ID)\n0-300            532\n301-600          444\n601-900          669\n&gt;900             185\n</code></pre>\n"},{"tags":["performance","oracle","exadata"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":22,"score":0,"question_id":13202412,"title":"Can I run exadata with OPTIMIZER_FEATURES_ENABLE set to 9 or 10?","body":"<p>Does Exadata support OPTIMIZER_FEATURES_ENABLE with pre-11 values?</p>\n\n<p>Or does the unique nature of Exadata prevent that from making sense?</p>\n"},{"tags":["php","oracle","stored-procedures","zend-db","oci"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13199890,"title":"How to call a Oracle Stored Function/Procedure with a list of numbers by PHP and Zend DB","body":"<p>This short description shows how: </p>\n\n<ol>\n<li>to connect a Oracle database with PHP Zend DB</li>\n<li>to call a Stored Procedure/Stored Function with Zend DB</li>\n<li>to <strong>pass a real array or a collection of integers as input parameter</strong> to a Stored Procedure/Function (I will not pass in a string of comma-separated values)</li>\n<li>to <strong>get the result of a Stored Function</strong></li>\n</ol>\n\n<p>(Note: I used Oracle 11.x, PHP 5.x and Zend Framework 1.x)</p>\n\n<p>Let's go.</p>\n\n<p>Create a Oracle list type:</p>\n\n<pre><code>CREATE OR REPLACE TYPE NUMBER_LIST_TYPE IS TABLE OF NUMBER;\n</code></pre>\n\n<p>Create a Stored Function:</p>\n\n<pre><code>CREATE FUNCTION MY_STORED_FUNCTION(id_list in NUMBER_LIST_TYPE) RETURN NUMBER AS \n    lv_list_size number;\nBEGIN\n    select count(*) into lv_list_size from table(id_list);\n    RETURN lv_list_size; \nEND MY_STORED_FUNCTION;\n</code></pre>\n\n<p>Create a PHP file:</p>\n\n<pre><code>&lt;?php\nrequire_once 'Zend/Db.php';\nrequire_once 'DataSource.php';\n\n$db_config['host'] = 'khazgoroth'; \n$db_config['port'] = 1521; \n$db_config['username'] = 'thrall'; \n$db_config['password'] = 'chuchu'; \n$db_config['dbname'] = 'orgrimmar'; // see TNSNAMES.ORA\n\n$db = Zend_Db::factory('Oracle', $db_config);\n\n$conn = $db-&gt;getConnection();  \n\n$sql = 'BEGIN :r := MY_STORED_FUNCTION(:pmids); END;';\n\n// Create an OCI-Collection object of NUMBER_LIST_TYPE\n$ids = oci_new_collection($conn, 'NUMBER_LIST_TYPE');\n\n$id_array = array(1, 12, 67);\n\n// Append all IDs to the collection;\nforeach ($id_array as $id) {\n    $ids-&gt;append($id);\n}\n\n// create a statement and bind the parameters \n$stmt = new Zend_Db_Statement_Oracle($db, $sql);\n$stmt-&gt;bindParam(':pmids', $ids, SQLT_NTY);\n$stmt-&gt;bindParam(':r', $result, SQLT_INT); // this is the result of the Stored Function\n\n$stmt-&gt;execute();\n\nprint \"Result: $result\";\n?&gt;\n</code></pre>\n\n<p>Hope this can help someone.</p>\n"},{"tags":["oracle","oracle10g"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":2031,"score":3,"question_id":8496152,"title":"How to create a tablespace with multiple datafiles?","body":"<p>I'm using the following script to create a new tablespace with three datafile with 4&nbsp;MB size for each.</p>\n\n<pre><code>create tablespace homeworkts \n       datafile 'D:\\oradata\\orcl\\df1.dbf' size 4m , \n       datafile 'D:\\oradata\\orcl\\df2.dbf' size 4m,\n       datafile 'D:\\oradata\\orcl\\df3.dbf' size 4m;\n</code></pre>\n\n<p>But it keeps giving me the error </p>\n\n<blockquote>\n  <p>invalid file name</p>\n</blockquote>\n\n<p>for the second datafile.</p>\n\n<p>Why?</p>\n"},{"tags":["oracle","oracle11g","sqlplus"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":33,"score":-2,"question_id":13201944,"title":"oracle 11g sql+ how to know username password","body":"<p>i installed Oracle 11g on Windows 7 , i want to connect to it , i run sql plus then it asked for username and password, i remember while installation it asked for password i wrote it and i saved it , but now i don't know  the username , i found this <a href=\"http://stackoverflow.com/questions/8722302/what-username-password-should-be-entered-when-connecting-to-sqlplus-after-ins\">question</a></p>\n\n<p>says that the username is <code>splplus / as sysdba</code> but what is the passsword? i tried that password i already saved but didn't work, i also <code>tried scott/tiger</code> .\nand i got this message:</p>\n\n<pre><code>ERROR:\nORA-01031: insufficient privileges\n</code></pre>\n\n<p>note: on the OS services i found this <code>OracleOraDb11g_home1ClrAgent</code> service and it is not started and can't be started</p>\n"},{"tags":["oracle","oracle-sqldeveloper"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13201956,"title":"How to open a .sql like a .pks?","body":"<p>Anyone knows how to open .sql files with the same editor of .pks files in Oracle Sql Developer tool?</p>\n"},{"tags":["java","oracle","prepared-statement"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13201651,"title":"Is there any alternative to CAST in oracle?","body":"<p>The code currently does \nwhere col1 = cast(? as char(5))</p>\n\n<p>instead of hardcoding 5 as the length of the column, I am planning to do something better. I don't want to use OraclePreparedStatement which has setFixedCHAR(1,string) because it doesn't work with other databases.</p>\n\n<p>I am wondering if RTRIM(col1) = ? \nstatement.setString(1,string) is the same..\nI am worried if the string exceeds char(5) if how does oracle behave and also if there are much better alternatives to the ones that I have mentioned.</p>\n\n<p>PS: COL1 is of CHAR(5) length in the database, I can't change it. It is set in stone and it has been working good. I am writing new functionality and I have to query the database.</p>\n"},{"tags":["database","oracle","oracle11g","tnsnames","ora-12154"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13201220,"title":"ora-12154 issue when connecting with instant-client","body":"<p>I am running Oracle 11g on Windows Server 2008R2. I have a client application(Zabbix) running elsewhere that is trying to connect to it.</p>\n\n<p>The client machine has:</p>\n\n<ul>\n<li>oracle-instantclient11.2-basic-11.2.0.3.0-1.i386.rpm</li>\n<li>oracle-instantclient11.2-devel-11.2.0.3.0-1.i386.rpm</li>\n</ul>\n\n<p>And as such, it does not have sqlnet.ora or tnsnames.ora files. It is attempting to establish a connection with direct addressing. With a print statement in the php, I see that it is calling</p>\n\n<pre><code>ociplogon(user,password,$connect);\n</code></pre>\n\n<p>with connect being set to <strong>//dbhostmachine:1521/zabbix</strong>. So everything looks good there.   </p>\n\n<pre><code>C:\\Users\\mdobrini&gt; lsnrctl services\n\nLSNRCTL for 64-bit Windows: Version 11.1.0.7.0 - Production on 02-NOV-2012 13:00:55\n\nCopyright (c) 1991, 2008, Oracle.  All rights reserved.\n\nConnecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=dbhostmachine.dddd.cccc.com)(POR\nServices Summary...\nService \"zabbix\" has 1 instance(s).\n  Instance \"zabbix\", status READY, has 1 handler(s) for this service...\n    Handler(s):\n      \"DEDICATED\" established:578 refused:0 state:ready\n         LOCAL SERVER\nService \"zabbixXDB\" has 1 instance(s).\n  Instance \"zabbix\", status READY, has 1 handler(s) for this service...\n    Handler(s):\n      \"D000\" established:0 refused:0 current:0 max:1022 state:ready\n         DISPATCHER &lt;machine: dbhostmachine, pid: 6384&gt;\n         (ADDRESS=(PROTOCOL=tcp)(HOST=dbhostmachine.dddd.cccc.com)(PORT=61396))\nService \"zabbix_XPT\" has 1 instance(s).\n  Instance \"zabbix\", status READY, has 1 handler(s) for this service...\n    Handler(s):\n      \"DEDICATED\" established:578 refused:0 state:ready\n         LOCAL SERVER\nThe command completed successfully\n</code></pre>\n\n<p>Attempting to connect locally works fine:</p>\n\n<pre><code>SQL*Plus: Release 11.1.0.7.0 - Production on Fri Nov 2 13:06:31 2012\n\nCopyright (c) 1982, 2008, Oracle.  All rights reserved.\n\nEnter user-name: SYSTEM\nEnter password:\n\nConnected to:\nOracle Database 11g Enterprise Edition Release 11.1.0.7.0 - 64bit Production\n\nSQL&gt; connect uuu/ppp@localhost/zabbix\nConnected.\nSQL&gt;  \n</code></pre>\n\n<p>However, remotely I get the popular error:</p>\n\n<pre><code>ociplogon(): ORA-12154: TNS:could not resolve the connect identifier specified \n</code></pre>\n\n<p>The strange thing is that it was working intermittently before. I would get an error about every 10 seconds in my application:</p>\n\n<pre><code>30923:20121101:142237.595 [Z3001] connection to database '//dbhostmachine:1521/zabbix'     failed: [-1] ORA-12516: TNS:listener could not find available handler with matching   protocol stack\n30923:20121101:142237.596 watchdog: database is down\n</code></pre>\n\n<p>but there was definitely data being sent across the network, and persisted in the db. After restarting application and server I am no longer able to get a connection at all and am stuch on ORA-12154</p>\n"},{"tags":["c#",".net","windows","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":256,"score":1,"question_id":12903366,"title":"OraOLEDB.Oracle provider is not registered on the local machine","body":"<p>I just migrated from XP to Win 7. I am guessing this error has to do with switching operating systems. I wrote a .net application that basically massages a large amount of data and then connects to a database and inserts/updates a table.</p>\n\n<p>When I hit a button to connect to the database I run into the error regarding the oracle provider not being registered on my local machine.</p>\n\n<p>A clear, step by step outline of how I can fix this quickly would be much appreciated.</p>\n\n<p>The exact error message is:</p>\n\n<blockquote>\n  <p>'OraOLEDB.Oracle.1' provider is not registered on the local machine</p>\n</blockquote>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13187456,"title":"Oracle SQL Developer — separate time and date","body":"<p>I have a question with Oracle SQL Developer (I've installed Oracle 11g Express Edition).\nI want to insert values for 'date' and 'time', but I cannot separate them.</p>\n\n<pre><code>create table Match \n(\n    numMatch number(2) constraint PKMatch primary key,\n    dateM date, \n    heureM date,\n    numE_Eq number(2),\n    numE_Eq2 number(2),\n    nomTerrain varchar2(30)\n);\n</code></pre>\n\n<p>--\"tools\"=>\"preferences\"=>\"format de date:DD/MM/YYYY  HH24:MI:SS\"</p>\n\n<pre><code>insert into Match values (1,to_date\n('10/12/2010','DD/MM/YYYY'),to_date('15:00:00','HH24:MI:SS'),1,3,'Stade Argentina'\n);\n</code></pre>\n\n<p><em><strong>result:</em></strong></p>\n\n<pre><code>dateM: 10/12/2010 00:00:00\n\nheureM: 01/11/2012 15:00:00\n</code></pre>\n\n<p>PS: I've tried to_char instead of to_date, but it didn't work at all.</p>\n\n<hr>\n\n<p>thanks a lot for the responses.\nyes, i'm aware of that 'DATE datatype contains both date and time', but it's the prof who insists showing date and time seprately in the table,\nand i've seen your solutions before, but for me, it's a query, not to 'insert values' in the table.\nso i'd like to know how can i be able to have a table directly presente date and time.\nthanks again.</p>\n"},{"tags":["oracle","ssis","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13199181,"title":"How do I connect to Oracle with SSIS? I am getting the error: \"tns listener was not given the service_name in connect_data\"","body":"<p>I am trying to connect to an Oracle DB through the Oracle Provider for OLE DB in SSIS, but am getting the following error when testing the connection: \"tns listener was not given the service_name in connect_data\". I am not too familiar with Oracle, so could someone provide me some direction for how to fix this error?</p>\n"},{"tags":["sql","oracle","oracle11g","sql-developer"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":2751,"score":4,"question_id":8842577,"title":"How to increase buffer size in Oracle SQL Developer to view all records?","body":"<p>How to increase buffer size in Oracle SQL Developer to view all records (there seems to be a certain limit set at default)? Any screen shots and/or tips will be very helpful.</p>\n"},{"tags":["oracle","optimization","index"],"answer_count":4,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":2032,"score":9,"question_id":2196484,"title":"Oracle: does the column order matter in an index?","body":"<p>An index on two columns can be created with either of the statements</p>\n\n<pre><code>create index foo_ix on foo(a,b);\ncreate index foo_ix on foo(b,a);\n</code></pre>\n\n<ol>\n<li><p>How does this affect the operational (runtime) characteristics of using the index?</p></li>\n<li><p>How does this affect the layout (physical) characteristics of the index?</p></li>\n<li><p>Are either (1) or (2) affected by the types/sizes of the columns?</p></li>\n<li><p>What are the best practices for creating multi-column indexes?</p></li>\n</ol>\n\n<p>In short, does it matter which column I put first?</p>\n"},{"tags":["sql","oracle"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3598,"score":1,"question_id":6789010,"title":"distinct values from multiple fields within one table ORACLE SQL","body":"<p>How can I get distinct values from multiple fields within one table with just one request.</p>\n\n<p><strong>Option 1</strong></p>\n\n<pre><code>SELECT WM_CONCAT(DISTINCT(FIELD1)) FIELD1S,WM_CONCAT(DISTINCT(FIELD2)) FIELD2S,..FIELD10S\n  FROM TABLE;\n</code></pre>\n\n<p>WM_CONCAT is LIMITED</p>\n\n<p><strong>Option 2</strong></p>\n\n<pre><code>select DISTINCT(FIELD1) FIELDVALUE, 'FIELD1' FIELDNAME\n       FROM TABLE\nUNION\nselect DISTINCT(FIELD2) FIELDVALUE, 'FIELD2' FIELDNAME\n       FROM TABLE\n... FIELD 10\n</code></pre>\n\n<p>is just too slow</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13197563,"title":"tracking changes with trigger - alternate field names","body":"<p>Using the trigger noted below, I am tracking changes in a producution table in an audit, or change-log table.  My problem is that the field names in the tracking table are different from the ones in table1.  The values are the same, but the names of the columns are different.</p>\n\n<p>The question is then, how must the syntax change in the trigger to take the value of one field name and insert it into a field of a different name in the tracking table?</p>\n\n<p>Thank you for any and all help or suggestions.</p>\n\n<p>{</p>\n\n<pre><code>CREATE OR REPLACE TRIGGER track_change_trg\nAFTER INSERT OR UPDATE OR DELETE\nON table1\nFOR EACH ROW\nBEGIN\n \nIF INSERTING THEN\n    INSERT INTO tracking table  VALUES \n    (:new.pname, :new.p_id, :new.p_type, :new.t1name,\n    'INSERTED', SYSDATE);\n \nESLIF UPDATING THEN\n    INSERT INTO tracking table  VALUES \n    (:new.pname, :new.p_id, :new.p_type, :new.t1name,\n    'UPDATED', SYSDATE);\n     \nELSIF DELETING THEN\n    INSERT INTO tracking table VALUES \n    (:old.pname, :old.p_id, :old.p_type, :old.t1name,\n    'DELETED', SYSDATE);\n     \n    END IF;\nEND;\n/\n</code></pre>\n\n<p>}</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13195015,"title":"Function to set a sequence's currval","body":"<p>I wrote this function to set my sequence's currval to maximum id+1. But I get errors like:</p>\n\n<pre><code>ORA-14552: cannot perform a DDL, commit or rollback inside a query or DML \n</code></pre>\n\n<p>Please help me to solve that issue.</p>\n\n<pre><code>CREATE OR REPLACE Function createcurrentid (\n   model_in IN varchar2,\n   primarykey_in IN VARCHAR2,\n   seq_name IN VARCHAR2)\n  RETURN number\nIS\n  cnumber number;\n  c2      sys_refcursor;\n  c3      sys_refcursor;\n  c6      sys_refcursor;\n  c7      sys_refcursor;\n  c8      sys_refcursor;\n  c9      sys_refcursor;\n  c4 number;\n  c5 number;\n  type result_rec is record (\n    id      number,\n   currvalvalue  number\n );\n l_result_rec result_rec;\nBEGIN\n open c2 FOR 'SELECT max('||primarykey_in||') AS id FROM '||model_in;\n fetch c2 into c4;\n close c2;\n open c3 FOR 'select '||seq_name||'.currval AS currvalvalue from dual';\n fetch c3 into c5;\n close c3;\n cnumber:=c4-c5;\n open c6 FOR 'alter sequence'||seq_name||' increment BY'||cnumber;\n commit;\n open c8 FOR 'select '||seq_name||'.nextval from dual';\n commit;\n open c9 FOR 'select '||seq_name||'.CURRVAL from dual';\n commit;\n open c7 FOR 'alter sequence'||seq_name||' increment BY 1';\n commit;\n RETURN cnumber;\n END;\n</code></pre>\n"},{"tags":["sql","oracle","instantclient"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13195457,"title":"Can I use Direct Path Loads in Oracle Instant Client?","body":"<p>I have used SQL*LOADER in Oracle full client for bulk upload using ctl files. But I am planning to move to instant client in which SQL*LOADER doesn't work. I found from the Oracle OCI reference <a href=\"http://oracle.su/docs/11g/appdev.112/e10646/oci13obn.htm#BAJJGACH\" rel=\"nofollow\">http://oracle.su/docs/11g/appdev.112/e10646/oci13obn.htm#BAJJGACH</a> that I can use Direct Path Loads in OCI. Does this mean, that I will be able to use Direct Path Loads using Oracle Instant Client? Can you point me how some good links\\tutorials how to use this?</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13197033,"title":"Join Query which should return one row","body":"<p>I need to write a query which will retrieve me the fullname (available in fullname) of the ownerid and creatorid. Since both are referring the same table, it is retrieving me two rwo. But I need fullname for both ownerid and creatorid fullname in one row. How to do this? owner id and creator id is the reference name in userdetail table. </p>\n\n<p>create table page(page_key,page_number,ownerid,creatorid)</p>\n\n<p>create table userdetail(id,fullname,phonenumber)</p>\n"},{"tags":["oracle","error-handling","plsql"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":48,"score":3,"question_id":13194907,"title":"Can OUT parameter values still be written even if a PL/SQL procedure raises an error?","body":"<p>I have a PL/SQL procedure with an <code>OUT</code> parameter. How can I force the <code>OUT</code> parameter values to be written, even if an error is raised? Is there another mechanism for returning values when an error is raised?</p>\n"},{"tags":["oracle","tokenize"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13196695,"title":"oracle function that accept comma separated value and return in rows","body":"<p>i am looking for an oracle function that accepts comma seperated values eg,[abc,cde] and \nreturn me rows so that i can insert into a table directly.</p>\n\n<p>eg-:</p>\n\n<pre><code>insert into mytable(col)\nselect mycustomfunction (abc,cde)\n</code></pre>\n"},{"tags":["oracle","amazon-rds"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13196604,"title":"How can I create multiple databases in Oracle SE1 11.2 rds instance?","body":"<p>I have a Oracle SE1 11.2 instance running. It has one database in it. How can I create another database. I have been using Mysql so far and I am able to create as many databases with it but when tried with Oracle it gives an error.</p>\n"}]}
{"total":22203,"page":4,"pagesize":100,"questions":[{"tags":["sql","oracle","error-handling"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13190059,"title":"ORA-00936 missing expression","body":"<p>The following statement:</p>\n\n<pre><code>INSERT INTO TABLE1(COL_1,COL2) VALUES(SELECT MAX(COL_1) FROM TABLE1), 'XYZ');\n</code></pre>\n\n<p>throws the error:</p>\n\n<pre><code>ERROR at line 1:\nORA-00936: missing expression\n at the select clause. \n1. The table is empty for now.\n2. COL_1 is a primary key intger field.\n</code></pre>\n\n<p>Can you help me please?</p>\n"},{"tags":["php","oracle","character-encoding","apache2","oci8"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13192974,"title":"php-oci8 encoding issue","body":"<p>Similar questions have been asked, but the regular solutions do not work for me. Probably I am missing something. I am about to loose my mind :(((</p>\n\n<p>As you can understand it from the title, I have an <strong>oracle</strong> database with non-ascii content. I want to query/display it with <strong>php</strong> using <strong>oci8</strong>.</p>\n\n<p>First of all, the database is in ISO8859P9, i.e. the query</p>\n\n<pre><code>select parameter, value from v$nls_parameters where parameter in ('NLS_CHARACTERSET', 'NLS_LANGUAGE', 'NLS_TERRITORY')\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>NLS_LANGUAGE        AMERICAN\nNLS_TERRITORY       AMERICA\nNLS_CHARACTERSER    WE8ISO8859P9\n</code></pre>\n\n<p>So I have set up NLS_LANG variable accordingly, i.e. getenv(\"NLS_LANG\") returns \"AMERICAN_AMERICA.WE8ISO8859P9\".</p>\n\n<p>I inserted <code>AddDefaultCharset ISO-8859-9</code> to /etc/apache2/conf.d/charset file, and I always included <code>&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-9\"&gt;</code> in head section of html content of php files. So when I check via firebug, I see that the \"Content-Type\" header for a response is \"text/html; charset=ISO-8859-9\".</p>\n\n<p>Lastly, I have a line as <code>default_charset = \"ISO-8859-9\"</code> in /etc/php5/apache2/php.ini file, and in the core section of the output phpinfo(), I see that default_charset is ISO-8859-9.</p>\n\n<p>After all these stuff, when I retrieve a string with a character <code>İ</code> in it and echo it, it is shown as '?'. That is the problem!!! When I query <code>select dump(nameofthatstring, 16)...</code>, I see that its byte value is DD, i.e. correct according to 8859-9.</p>\n\n<p>I am not sure whether it is relevant but, I will give a final detail: When I enter a character <code>ı</code> in a form and submit it via ajax in GET, it is converted to %FD, i.e. the 8859-9 corresponding value, no problem. </p>\n\n<p>When I urldecode it and echo it, it is again ok, I see <code>ı</code>. But when I have a query with a string containing <code>ı</code> in its where clause (after receiving the ajax request), it returns empty set. </p>\n\n<p>However, if I select the rows using CHR(253), the rows are selected correctly, but printing these rows again results in '?' characters.</p>\n\n<p>I am really stuck. Any help will be highly appreciated.\nThanks in advance.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<pre><code>$database = \"(DESCRIPTION= (ADDRESS= (PROTOCOL=TCP)(HOST=XXXX)(PORT=1521)) (CONNECT_DATA= (SERVER=dedicated)(SERVICE_NAME=sname)))\";\n</code></pre>\n\n<p>First, I have tried this:</p>\n\n<pre><code>oci_pconnect($username, $password, $database, \"AMERICAN_AMERICA.WE8ISO8859P9\");\n</code></pre>\n\n<p>But it did not solve, so I set NLS_LANG variable and changed to the following:</p>\n\n<pre><code>oci_pconnect($username, $password, $database);\n</code></pre>\n\n<p>Nothing changed...</p>\n"},{"tags":["c#","oracle","nhibernate","subquery","joined-subclass"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":533,"score":2,"question_id":5985694,"title":"NHibernate (3.1) subquery on subclass not joining base class table","body":"<p>The following is an abstraction of an actual problem I'm having.</p>\n\n<pre><code>public class Base\n{\n    public virtual string Id { get; set; }\n    public virtual string Foo { get; set; }\n}\n\npublic class Sub : Base\n{\n    public virtual string Bar { get; set; }\n    public virtual Other Other { get; set; }\n}\n\npublic class Other\n{\n    public virtual string Id { get; set; }\n    public virtual ICollection&lt;Sub&gt; Subs { get; set; }\n}\n</code></pre>\n\n<p>mapping:</p>\n\n<pre><code>&lt;class name=\"Base\" table=\"base_table\" xmlns=\"urn:nhibernate-mapping-2.2\"&gt;\n  &lt;id name=\"Id\" column=\"id\"&gt;\n    &lt;generator class=\"assigned\" /&gt;\n  &lt;/id&gt;\n  &lt;property name=\"Foo\" column=\"Foo\" /&gt;\n\n  &lt;joined-subclass name=\"Sub\" table=\"sub_table\"&gt;\n    &lt;key column=\"id\" /&gt;\n    &lt;property    name=\"Bar\"   column=\"Bar\" /&gt;\n    &lt;many-to-one name=\"Other\" column=\"other_id\" /&gt;\n  &lt;/joined-subclass&gt;\n\n&lt;/class&gt;\n\n&lt;class name=\"Other\" table=\"other_table\" xmlns=\"urn:nhibernate-mapping-2.2\"&gt;\n  &lt;id name=\"Id\" column=\"id\"&gt;\n    &lt;generator class=\"assigned\" /&gt;\n  &lt;/id&gt;\n  &lt;set name=\"Subs\" inverse=\"true\" lazy=\"true\"&gt;\n    &lt;key column=\"other_id\" /&gt;\n    &lt;one-to-many class=\"Sub\" /&gt;\n  &lt;/set&gt;\n&lt;/class&gt;\n</code></pre>\n\n<p>The following fails to do the join on the joined-subclass inside the subquery:</p>\n\n<pre><code>Session.Query&lt;Other&gt;().Where(o =&gt; o.Subs.Any(s =&gt; s.Foo == \"xyz\"));\n</code></pre>\n\n<p>Sql</p>\n\n<pre><code>select\n    other0_.id as id60_\nfrom\n    other_table other0_\nwhere\n    exists (\n        select\n            subs1_.id\n        from\n            sub_table subs1_\n        where\n            other0_.id=subs1_.other_id\n            and subs1_1_.Foo=:p0\n    );\n:p0 = 'xyz' [Type: String (0)]\n</code></pre>\n\n<p>A GenericADOException is thrown because subs1_1_ (e.g. sub_table) in the subquery doesn't have Foo.\nIs there something I have to do in Other's mapping to cause the Subs to be fully joined with Base in the subquery?</p>\n"},{"tags":["java","oracle","jpa"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13193483,"title":"Issue at like operation for numbers in oracle","body":"<p>This is a project on java with <code>openjpa ORM</code>. I have an issue with like selection for type <code>NUMBER(10,2)</code> in Oracle database. </p>\n\n<p>The type of number in <code>JPA is BigDecimal</code> and numbers could be like integer and not integer, for example:</p>\n\n<pre><code>123456\nor 123456,01; 123456,15\n</code></pre>\n\n<p>At presentation layer user has global filter, but not only for this column, where he can choose column and operator (like, equal or between) and define value.</p>\n\n<p>For examaple: column1 like '%56%'</p>\n\n<p>Also numbers at presentation layer has presision 2, so:</p>\n\n<pre><code>123456,00 -&gt;'123456,00'\n123456,01 -&gt; '123456,01'\n</code></pre>\n\n<p>When Oracle database executes like opearaion, nuber is converted ot String type:</p>\n\n<pre><code>123456,00 -&gt; '123456'\nand 123456,01 -&gt; '123456,01'\n</code></pre>\n\n<p>So the result of operation column1 <code>like '%,0%'</code> is only</p>\n\n<p><code>123456,01</code> but not both.</p>\n\n<p>I also tried call native SQL function like <a href=\"http://stackoverflow.com/questions/9341668/create-custom-jpa-query-function\">here</a> but we use OpenJPA 1.2.3 with JPA 1.0 implementation.</p>\n\n<p>Please help me find workaround at my issue.</p>\n"},{"tags":["oracle","triggers"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13171999,"title":"Multiple small trigger vs single large trigger on table","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/8579240/consolidate-several-oracle-triggers-any-performance-impact\">Consolidate several Oracle triggers. Any performance impact?</a>  </p>\n</blockquote>\n\n\n\n<p><strong>Question:</strong>\nWhich one is best (for performance)? Having <strong>multiple triggers</strong> (about 7-10) one for each situation/purpose, or <strong>one trigger</strong> which handles all the situations (by using if, etc).</p>\n\n<p><strong>Detail:</strong>\nWe're developing enterprise application based on <strong>Oracle database</strong>. We have one table with approximately 3M rows, which is base table for our app. And there are several situations that we need to handle only with triggers. IMHO, for maintenance, it's better to have multiple triggers. But what about performance? </p>\n"},{"tags":["oracle","plsql","oracle11g","tokenize","plsqldeveloper"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":47,"score":3,"question_id":13189575,"title":"listunagg function?","body":"<p>is there such thing in oracle like listunagg function? For example, if I have a data like:</p>\n\n<pre><code>------------------------------------------------------------\n| user_id | degree_fi    | degree_en       | degree_sv       |\n--------------------------------------------------------------\n| 3601464 | 3700         |  1600           |  2200           |\n|  1020   | 100          |  0              |   0             |\n| 3600520 | 100,3200,400 | 1300, 800, 3000 | 1400, 600, 1500 |\n| 3600882 |  0           |   100           |  200            |\n--------------------------------------------------------------\n</code></pre>\n\n<p>and I'd like to show data like this:</p>\n\n<pre><code>-----------------------------------------------\n| user_id | degree_fi | degree_en | degree_sv |\n-----------------------------------------------\n| 3601464 | 3700      |  1600     |  2200     |\n|  1020   | 100       |  0        |   0       |\n| 3600520 |  100      | 1300      |  1400     |\n| 3600882 |  0        |   100     |  200      |\n| 3600520 |  3200     |   800     |  600      |\n| 3600520 |  400      | 3000      |  1500     |\n-----------------------------------------------\n</code></pre>\n\n<p>I tried to find some function like opposite of listagg but couldn't find any.\nThanks in advance :-)</p>\n"},{"tags":["java","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13194534,"title":"Java error NoClassDefFoundError with JPA implementation","body":"<p>In Eclipse I made a project with DAO and it was working fine. I then I made a new JPA project and added it in the Deployment Assembly of the initial project. I than converted one DAO to work with JPA and put it in the JPA project. When i tested the application it gave an Java error NoClassDefFoundError (see bottom). I have no idea why. I have checked everywhere but i can't find the error. The JPA is called in the servlet:</p>\n\n<pre><code>package eshop;\n....\nimport model.ProductModelDAO;\nimport model.ProductModelDAOImpl;\n\n\nProductModelDAO dao4 = new ProductModelDAOImpl(\"Product\");\nArrayList products = dao4.getProductsByCategory(categoryId);\n</code></pre>\n\n<p>Then in the JPA project I have Product.java which is generated from the \"products\" table. I have the persistence.xml. And i have the two original DAO's:</p>\n\n<pre><code>package model;\n\nimport java.util.*;\n\npublic interface ProductModelDAO {  \npublic ArrayList searchProducts(String keyword);\npublic ArrayList getProductsByCategory(String categoryId);\npublic Product getProductById(String productID);\n}\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>package model;\n\nimport java.util.ArrayList;\nimport javax.persistence.EntityManager;\nimport javax.persistence.EntityManagerFactory;\nimport javax.persistence.Persistence;\nimport javax.persistence.PersistenceContext;\n\n\npublic class ProductModelDAOImpl implements ProductModelDAO {\n\n@PersistenceContext\nprivate EntityManager em;\n\n// this is the default constructor\npublic ProductModelDAOImpl()\n{\nthis(\"Product\");\n}\n\n  public ProductModelDAOImpl(String unitName)\n  {\n    EntityManagerFactory emf = Persistence.createEntityManagerFactory(unitName);\n    em = emf.createEntityManager();\n  }\n\n  // this is the special constructor to set the entity manager.\n  // this is used when we run with EJB3\n  public ProductModelDAOImpl(EntityManager em)\n  {\n    this.em = em;\n  }\n\n  public void setEntityManager(EntityManager em)\n  {\n    this.em = em;\n  }\n\n\n@Override\npublic ArrayList&lt;Product&gt; searchProducts(String keyword) {\n    @SuppressWarnings(\"unchecked\")\n    ArrayList&lt;Product&gt; results = (ArrayList&lt;Product&gt;)\n      em.createQuery(\"select A from products A where (A.product_name = ?1 or A.descr = ?1)\")\n          .setParameter(1, keyword)\n          .getResultList();\n    return results; \n}\n\n@Override\npublic ArrayList &lt;Product&gt; getProductsByCategory(String categoryId) {\n    @SuppressWarnings(\"unchecked\")\n    ArrayList&lt;Product&gt; results = (ArrayList&lt;Product&gt;)\n            em.createQuery(\"select A from products A where A.category_id = ?1\")\n              .setParameter(1, categoryId)\n              .getResultList();\n        return results; \n}\n\n@Override\npublic Product getProductById(String productID) {\n    Product results = \n    (Product) em.createQuery(\"select A from products A where A.product_id = ?1\")\n      .setParameter(1, productID)\n      .getResultList();\n    return results; \n\n}\n\n}\n</code></pre>\n\n<p>The persistence xml is the following:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;persistence version=\"1.0\"\nxmlns=\"http://java.sun.com/xml/ns/persistence\" \nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence \nhttp://java.sun.com/xml/ns/persistence/persistence_1_0.xsd\"&gt;\n&lt;persistence-unit name=\"abook\"&gt;\n&lt;provider&gt;org.apache.openjpa.persistence.PersistenceProviderImpl&lt;/provider&gt;\n&lt;class&gt;model.Product&lt;/class&gt;\n&lt;properties&gt;\n&lt;property name=\"openjpa.ConnectionDriverName\" value=\"com.mysql.jdbc.Driver\" /&gt;\n&lt;property name=\"openjpa.ConnectionURL\" value=\"jdbc:mysql://localhost:3306/shop\" /&gt;\n&lt;property name=\"openjpa.ConnectionUserName\" value=\"root\" /&gt;\n&lt;property name=\"openjpa.ConnectionPassword\" value=\"\" /&gt;\n&lt;property name=\"openjpa.Log\" value=\"DefaultLevel=WARN, Tool=INFO\" /&gt;\n&lt;/properties&gt;\n&lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n\n<p>The error is the following</p>\n\n<pre><code>java.lang.NoClassDefFoundError: model/ProductModelDAOImpl\nat eshop.Servlet.doPost(Servlet.java:112)\nat eshop.Servlet.doGet(Servlet.java:57)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:707)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:820)\nat weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)\nat weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)\nat weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)\nat weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183)\nat weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.doIt(WebAppServletContext.java:3686)\nat weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3650)\nat weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)\nat weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)\nat weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2268)\nat weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2174)\nat weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1446)\nat weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)\nat weblogic.work.ExecuteThread.run(ExecuteThread.java:173)\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13187663,"title":"Oracle SQL - Putting together potentially contradictory or overlapping date ranges","body":"<p>I have a table like this:</p>\n\n<pre><code>Id    Begin_Date    End_date    \n1     01-JAN-12     05-JAN-12\n1     01-FEB-12     01-MAR-12\n1     15-FEB-12     05-MAR-12\n</code></pre>\n\n<p>For a given Id, it gives a set of date ranges. Let's say that if a date is between the begin and end date for that Id, then that Id is \"on\". Otherwise, \"off\"</p>\n\n<p>The problem here is these last two rows -- the date ranges overlap and contradict each other. The second row claims that the 1 was \"on\" between 01-FEB-12 and 01-MAR-123, but the third row claims that 1 was off before before 14-FEB-12. Similarly, the second row claims that 1 was off on 02-MAR-12, but row 3 claims it was on.</p>\n\n<p>The reconciliation logic I'd like to apply is that, in cases of contradictions, pick the earliest possible begin date and the earliest possible end date after it. The result would therefore be:</p>\n\n<pre><code>Id    Begin_Date    End_date    \n1     01-JAN-12     05-JAN-12\n1     01-FEB-12     01-MAR-12\n</code></pre>\n\n<p>I was able to pull this off with the lag analytical function, but I ran into difficulty with other use cases. Take this input data set.</p>\n\n<pre><code>Id    Begin_Date    End_date    \n1     01-JAN-12     10-JAN-12\n1     5-JAN-12      8-JAN-12\n1     12-JAN-12     15-JAN-12\n1     1-JAN-12      14-JAN-12\n</code></pre>\n\n<p>What I expect here as output is:</p>\n\n<pre><code>Id    Begin_Date    End_date    \n1     01-JAN-12     8-JAN-12\n1     01-JAN-12     14-JAN-12\n</code></pre>\n\n<p>...because the first row is the earliest begin date, and its end date is the earliest end date after that. The next row is the earliest begin date after the previous end date, and the end date of that row is the earliest end date after that. There are no begin dates after 14-JAN-12, so I'm done.</p>\n\n<p>I'm having very little luck solving this problem. One approach I tried was getting the rank partitioned by id and compare it to the max rank. I then used the lag function to compare to previous ranks. However, this strategy totally fails for use cases above.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["java","oracle","function","stored-procedures","jdb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13192477,"title":"Calling stored function error in Java","body":"<p>I am trying to call a stored function in Java. Function has no package, it's placed under user (schema) USER and returns a cursor. I tried twoways to call it and none of these works.</p>\n\n<p>First one</p>\n\n<pre><code>Query query = coreDao.getEntityManager().createNativeQuery(\"{call USER.gen_rephead_sm_task_report(?, ?) }\");\nquery.setParameter(1, dateFrom);\nquery.setParameter(2, dateTo);\nList&lt;?&gt; queryResult = query.getResultList();\n</code></pre>\n\n<p>I got a <code>not a procedure or not defined</code></p>\n\n<p>I also tried this approach with</p>\n\n<pre><code>select gen_rephead_sm_task_report(?, ?) from dual\n</code></pre>\n\n<p>as a createNativeQuery parameter but with the same result.</p>\n\n<p>Second one</p>\n\n<pre><code>Connection connection = dataSource.getConnection();//javax.sql.DataSource\nCallableStatement statement = connection.prepareCall(\"{? = call USER.gen_rephead_sm_task_report(?, ?) }\");\nstatement.registerOutParameter(1, OracleTypes.CURSOR);//oracle.jdbc.OracleTypes\nstatement.setDate(2, new java.sql.Date(dateFrom.getTime()));\nstatement.setDate(3, new java.sql.Date(dateTo.getTime()));\nstatement.executeQuery();\nResultSet set = ((OracleCallableStatement) statement).getCursor(1);\n</code></pre>\n\n<p>I got the <code>ClassCastException</code> on the last line (obviously OracleCallableStatement doesn't implement the CallableStatement). So which types shoud I use here?</p>\n"},{"tags":["oracle","search","table"],"answer_count":11,"favorite_count":21,"up_vote_count":29,"down_vote_count":0,"view_count":68994,"score":29,"question_id":208493,"title":"Search All Fields In All Tables For A Specific Value (Oracle)","body":"<p>Is it possible to search every field of every table for a particular value in Oracle?</p>\n\n<p>There are hundreds of tables with thousands of rows in some tables so I know this could take a very long time to query. But the only thing I know is that a value for the field I would like to query against is <code>1/22/2008P09RR8</code>.\n&lt;</p>\n\n<p>I've tried using this statement below to find an appropriate column based on what I think it should be named but it returned no results.</p>\n\n<pre><code>SELECT * from dba_objects \nWHERE object_name like '%DTN%'\n</code></pre>\n\n<p>There is absolutely no documentation on this database and I have no idea where this field is being pulled from.</p>\n\n<p>Any thoughts?</p>\n"},{"tags":["oracle","64bit","oracleclient"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13188670,"title":"How to know installed Oracle Client is 32 bit or 64 bit?","body":"<p>OS: Windows 2008 Server R2</p>\n\n<p>Oracle Client: 11.2</p>\n\n<p>Many Thanks</p>\n"},{"tags":["sql","oracle","date","join","range"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":12567916,"title":"Query Oracle to join date interval in one row","body":"<p>my question is join more date interval in one if start of second row is the day after the end of first row. In all these case I should have one row only.\nex:</p>\n\n<pre><code>id      start           end\n10      20120101        20120125\n10      20120201        20120225\n10      20120226        20120302\n10      20120303        20120304\n</code></pre>\n\n<p>    </p>\n\n<p>must be</p>\n\n<pre><code>10      20120101        20120125\n10      20120201        20120304\n</code></pre>\n\n<p>Do you have any suggestions?</p>\n"},{"tags":["sql","oracle","jdbc"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":13190890,"title":"How to get all usersnames in a single sql row","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1120706/is-there-an-oracle-sql-query-that-aggregates-multiple-rows-into-one-row\">Is there an Oracle SQL query that aggregates multiple rows into one row?</a>  </p>\n</blockquote>\n\n\n\n<p>i have the below output for my sql query to get the users details from oracle table</p>\n\n<pre><code>   Select distinct userid from Scope1\n\nUSERID \nRakesh \nAdmin \n</code></pre>\n\n<p>i want the output to be as below so that i can do my queries even easier. please help me.</p>\n\n<pre><code>USERID\n'Rakesh','Admin'\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["oracle","stored-procedures","plsql","oracle10g","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13190618,"title":"IF UPDATE is success how to get acknowledegment whether it is sucess or failure in procedure","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/861983/number-of-rows-affected-by-an-update-in-pl-sql\">Number of rows affected by an UPDATE in PL/SQL</a>  </p>\n</blockquote>\n\n\n\n<pre><code>CREATE PROCEDURE P_Update(in_termid IN VARCHAR2,StmntType IN VARCHAR2)\nAS\nBEGIN\nIF StmntType = 'UpdateCS'\nBEGIN\nupdate OP_TTER_MAPPING set TXN_STATUS = 'N' where  TERMINAL_ID = in_termid;\nEND  \n\nElse If StmntType = 'UpdateHS' \nBEGIN\nupdate OP_TTERMINALMASTER set TXN_STATUS = 'N' where  TERMINAL_ID =  in_termid;\nEND  \nend P_UpdateTIDStatus;\n</code></pre>\n\n<ol>\n<li><p>In the above procedure if the UPDATE is success i want to know it is successful or failure, how to do that, i should get some acknowledgement, how to modify the above proc to get acknowledgement?</p></li>\n<li><p>can i assign  like this set TXN_STATUS = 'N' in procedure?</p></li>\n<li><p>Is this the correct way <code>IF StmntType = 'UpdateCS'</code> can i compare like this, if its correct v are going to create the procedure in backend and im going to execute from frontend, how ill i know  what the \"StmntType \" are</p></li>\n</ol>\n\n<p>Thanks in advance.</p>\n"},{"tags":["oracle","oracle10g","portlet"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13191322,"title":"Registered Oracle 10g portlet but unable to place","body":"<p>I am using Oracle Portal 10.1.2.3.0 and have deployed a portlet application using JDeveloper, which says it succeeded.</p>\n\n<p>I can see the application deployed in the correct OC4J container instance as well.</p>\n\n<p>When I log in to the portal, I can see the providers registration record for this portlet. </p>\n\n<ol>\n<li>Log in to portal</li>\n<li>Click Edit on any page</li>\n<li>Click Navigator</li>\n<li>Click Providers tab</li>\n<li>Click Registered Providers</li>\n<li>Click Edit Registration on the portlet I previously deployed</li>\n<li>Click the Connection tab</li>\n<li>I see the providers URL: someserver/publications-dev/providers</li>\n<li><p>I can access that URL and see the following output:</p>\n\n<p>Congratulations! You have successfully reached your Provider's Test Page.\nRecognizing Portlets...\nPublicationsNewsPortlet\nPublicationsNewsDetailPortlet\nPublicationsNewsDetailListPortlet\nPublicationsCareersPortlet\nPublicationsCareersDetailPortlet\nPublicationsCareersDetailListPortlet\nRecognizing component versions...\nptlshare.jar version: 10.1.2.0.2\npdkjava.jar version: 10.1.2.0.2</p></li>\n</ol>\n\n<p>Yet, when I try to add the portlet to a page, searching for the portlet name \"Careers Widget Portlet\" or \"PublicationsCareersPortlet\" reveals nothing. This is defined in the provider.xml:</p>\n\n<pre><code>&lt;name&gt;PublicationsCareersPortlet&lt;/name&gt;\n&lt;title&gt;Careers Widget Portlet&lt;/title&gt;\n</code></pre>\n\n<p>Can anyone give me a hint to what I might be missing? How can the Providers Test Paqe state that it recognizes the portlets but I cannot add them to a page?</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":886,"score":1,"question_id":10516284,"title":"Oracle create table with column comments","body":"<p>Is there a column comment syntax that allows me to specify a column comment directly where I declare the column in the create table statement (i.e. inline)? The <a href=\"http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_7002.htm\" rel=\"nofollow\">11g spec</a> does not mention anything, on <a href=\"http://docs.oracle.com/cd/E17952_01/refman-5.1-en/create-table.html\" rel=\"nofollow\">another page</a> something is mentioned but I could not get it to work. There is a way to <a href=\"http://www.adp-gmbh.ch/ora/sql/comment.html\" rel=\"nofollow\">specify comments after creating the table</a>, but I think it is annoying that the comment is separated from the field definition. I am looking for something like this (which does not work):</p>\n\n<pre><code>create table whatever (\n field number(15,0) primary key comment 'primary key generated from sequence pkseq',\n ...\n)\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13174634,"title":"Syntax for partition with subpartition","body":"<pre><code>col1 ....\ncol2 ....\ncol3 ....\ncol4 ....\nPARTITION BY RANGE(DATE_KEY)\nSUBPARTITION BY LIST(REGION_KEY)\nSUBPARTITION TEMPLATE\n  (SUBPARTITION A VALUES (1) TABLESPACE X,\n   SUBPARTITION B VALUES(3) TABLESPACE X,\n   SUBPARTITION C VALUES (8) TABLESPACE X)\n(PARTITION MON_JAN_2012 VALUES LESS THAN (1000)\n    TABLESPACE X\n    PCTFREE 10\n    INITRANS 1\n    MAXTRANS 255\n    NOLOGGING\n  (SUBPARTITION A VALUES (1) TABLESPACE X,\n   SUBPARTITION B VALUES(3) TABLESPACE X,\n   SUBPARTITION C VALUES (8) TABLESPACE X),\n PARTITION MON_FEB_2012 VALUES LESS THAN (2000)\n    TABLESPACE X        PCTFREE 10\n    INITRANS 1\n    MAXTRANS 255\n    NOLOGGING\n  (SUBPARTITION A VALUES (1) TABLESPACE X,\n   SUBPARTITION B VALUES(3) TABLESPACE X,\n   SUBPARTITION C VALUES (8) TABLESPACE X)\n</code></pre>\n\n<p>My table structure is something like this, I m new to partitions, need to add new partitions for table from March_2021 for few months, need correct syntax for this, I tried to google but not able to find example for adding partition with subpartition. Database 10g</p>\n"},{"tags":["oracle","sqlplus","logfiles"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13190397,"title":"Oracle sqlplus logging stops","body":"<p>This is strange...</p>\n\n<p>I'm running a script in sqlplus. It seeems to have completed it's function, however when I review the .log it seems to have stopped logging...has anyone else had this experience?</p>\n\n<p>I think I may have opened the logfile at some stage while the script was running to check process, perhaps that's no-no?</p>\n\n<p>The redacted details are:</p>\n\n<pre><code>set serveroutput on;\nset feedback off;\nset echo on;\nspool 4logfilethatstops.log\n\nBEGIN\n\n/*-----------------------------------------*/\n/* Establishing AUID on dmt_identifier table*/\nupdate DMT_CUSTOMER_ID\nset auid=CUSTOMER_ID\nwhere CUSTOMER_ID_ZONE_OFFICE = '&amp;&amp;var_DM_ID_ZONE_OFFICEority'\nand batch_id = '&amp;&amp;var_batchid';\n\n/*-----------------------------------------*/\n/*Copying DM_ID to all tables*/\n\nupdate dmt_ a \nset DM_ID= (select CUSTOMER_ID from DMT_CUSTOMER_ID b \n            where b.PRI_CLT_RECORD_ID=a.PRI_CLT_RECORD_ID \n            and b.batch_id = '&amp;&amp;var_batchid'\n            and b.CUSTOMER_ID_ZONE_OFFICE = '&amp;&amp;var_DM_ID_ZONE_OFFICEority'\n            and b.CUSTOMER_ID_major_flag = 'Y'\n            and b.CUSTOMER_ID_type_code = '004')\nwhere a.batch_id = '&amp;&amp;var_batchid';\n</code></pre>\n\n<p>[10 more similar statements]</p>\n\n<pre><code>/*-----------------------------------------*/\n/*Exclude records with no DM_IDs*/\n\nupdate dmt_address c\n            set c.batch_id = c.batch_id||'-EXCLUDE'\n            where c.batch_id = '&amp;&amp;var_batchid'\n            and c.pri_clt_record_id in \n            (SELECT pri_clt_record_id FROM dmt_ \n             where DM_ID is NULL );\n</code></pre>\n\n<p>[10 more similar statements]</p>\n\n<pre><code>/*-----------------------------------------*/\n/*Exclude merged records from dmt_ tables*/\n\nupdate dmt_ c\n            set batch_id = batch_id||'-EXCLUDE'\n            where batch_id not like '%EXCLUDE%'\n            and c.pri_clt_record_id in\n            (select b.pri_clt_record_id from dmt_ a , dmt_ b\n            where a.container_sequence_number = b.container_sequence_number\n            and b.rpl_pri_clt_record_id = a.pri_clt_record_id \n            and a.rpl_pri_clt_record_id is null);\n</code></pre>\n\n<p>[1 more similar statement]</p>\n\n<pre><code>/*--------------------------------------------------------*/\n/*Exclude dmt_insurance records from dmt_ that are not MRA*/\n\nupdate dmt_insurance\nset batch_id = batch_id||'-EXCLUDE'\nwhere batch_id not like '%EXCLUDE%'\nand client_insurance_record_id not like 'MRA-%';\n\n/*-----------------------------------------------------*/\n/*Populate dmt_demog with dmt_profile data*/\n\nupdate dmt_staticdemographics a \nset MSTATUS=(select CLIENT_ATTRIBUTE_CODE \n            from dmt_profile \n            where CLIENT_ATTRIBUTE_TYPE_CODE = 02\n            and batch_id = '&amp;&amp;var_batchid'\n            and PRI_CLT_RECORD_ID=a.PRI_CLT_RECORD_ID);\n</code></pre>\n\n<p>[4 more similar statements]</p>\n\n<pre><code> /*--------------------*/\n/*Populate DM_* tables*/\n/*----------------*/\n/*inserting person*/\n\ninsert into dm_person \n            (CUSTOMER_ID, DOB,DOB_EST,SEX,\n            CREATED_DATE,LAST_UPDATE_DATE, batch_id)\nselect DM_ID, DATE_OF_BIRTH,DATE_OF_BIRTH_ESTIMATION_FLAG,\n            SEX_CODE,MSTATUS,INDIGENOUS,RELIGION,LANGUAGE\n            from dmt_staticdemographics\n            where DM_ID is not null\n            and  batch_id = '&amp;&amp;var_batchid';\n</code></pre>\n\n<p>[3 more similar statements]</p>\n\n<pre><code>/*----------------------------------------------------------------------------------*/\n-- inserting external identifiers\ninsert into DM_IDENTIFIER\n  (CUSTOMER_ID,IDENTIFIER_START_DATE,IDENTIFIER_END_DATE,IDENTIFIER_TYPE,ID_VALUE,CREATED_DATE,LAST_UPDATE_DATE, BATCH_ID, ZONE_OFFICEority)\nselect DM_ID,effective_start_date,effective_end_date, ext_clt_id_type_code, EXT_CLT_ID,SOURCE_CREATE_DATETIME, SOURCE_MODIFIED_DATETIME, \n            BATCH_ID, ext_clt_id_ZONE_OFFICE\nfrom dmt_extidentifier\n            where DM_ID is not null\n            and batch_id = '&amp;&amp;var_batchid';\n</code></pre>\n\n<p>[4 more similar statements]</p>\n\n<pre><code>            COMMIT;\nEND;\n/\n</code></pre>\n"},{"tags":["oracle","group-by","analytic-functions"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13187291,"title":"Oracle get first preceding and following rows ordered by time in another table","body":"<p>I have 2 tables each of which have a timestamp column. How do I query for each row in A, the first preceding and following timestamps in B ?</p>\n\n<p>I want:</p>\n\n<p>A.id A.timestamp first_preceding(B.timestamp) first_following(B.timestamp)</p>\n"},{"tags":["c#","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":74,"score":2,"question_id":13166035,"title":"ORA-01008 : Not all variables bound with nulls","body":"<p>I'm creating a query and I cannot seem to get beyond the <code>Not all variables bound</code> error in Oracle</p>\n\n<p>As best as I can tell, everything looks correct. What am I missing?</p>\n\n<p>Code obfuscated a bit to protect the innocent...</p>\n\n<pre><code>OracleCommand execCmd = new OracleCommand();\n\nOracleParameter outParam =\n        new OracleParameter(\"ID\", OracleType.Int32);\noutParam.Value = DBNull.Value;\noutParam.Direction = System.Data.ParameterDirection.Output;\nexecCmd.CommandText = \"insert into o \" +\n        \"(A, B, \" +\n        \"C, D, E, \" +\n        \"F, G, H, I, \" +\n        \"J, K) \" +\n        \"VALUES (:A, :B, :C, :D, :E, \" +\n        \":F, :G, :H, :I, :J, :K) \" +\n        \"RETURNING O_ID INTO :ID\";\nexecCmd.Parameters.AddWithValue(\"A\", og.N);\nexecCmd.Parameters.AddWithValue(\"B\", DBNull.Value);\nexecCmd.Parameters.AddWithValue(\"C\", DBNull.Value);\nexecCmd.Parameters.AddWithValue(\"D\", og.A);\nexecCmd.Parameters.AddWithValue(\"E\",\n    og.A1 + \" \" + og.A2 + \" \" + og.A3 +\n    \" \" + og.C);\nexecCmd.Parameters.AddWithValue(\"F\", DBNull.Value);\nexecCmd.Parameters.AddWithValue(\"G\", DBNull.Value);\nexecCmd.Parameters.AddWithValue(\"H\", og.Cs);\nexecCmd.Parameters.AddWithValue(\"I\", ss);\nexecCmd.Parameters.AddWithValue(\"J\", DBNull.Value);\nexecCmd.Parameters.AddWithValue(\"K\", \"N\");\nexecCmd.Parameters.Add(outParam);\nconn.executeCommand(execCmd, trx);\n</code></pre>\n"},{"tags":["oracle","jpa"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13157065,"title":"Convert oracle to JPA createQuery","body":"<pre><code>SELECT * \nFROM \n  CUSTOMER_MASTER t0, \n  (SELECT t1.COMMNUMBER, t1.COMMTYPE FROM FOLLOWUP_GUIDES t1 WHERE (t1.STAGE_ID = '5')) t2\nWHERE (t0.FOLL_UP_NUM = t2.COMMNUMBER \nand T0.FOLL_UP_TYPE=t2.COMMTYPE AND (t0.COMPANY_ID = 'C001'))\n</code></pre>\n\n<p>In the above oracle query i have to got the follupnum and folluptype in the combination commnumber and commtype. But is it possible to write this query in JPA?</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13186511,"title":"Get the data between two LMD in Oracle","body":"<p>I have a table named </p>\n\n<pre><code>USER_BAG\n</code></pre>\n\n<p>in which I have this column</p>\n\n<pre><code>LAST_MODIFIED_DATE  DATE(7) NOT NULL\n</code></pre>\n\n<p>I need all the records whose <code>LAST_MODIFIED_DATE</code> falls between </p>\n\n<p><code>2012-08-20 16:13:19</code> and <code>2012-08-20 16:18:19</code></p>\n\n<p>I am using Oracle Database. Can anyone suggest me how can I achieve my scenario?</p>\n\n<pre><code>SELECT * FROM USER_BAG where LAST_MODIFIED_DATE between \nto_date ('2012-08-20 16:13:19', 'yyyy-mm-dd hh24:mi:ss') AND \nto_date ('2012-08-20 16:18:19', 'yyyy-mm-dd hh24:mi:ss');\n</code></pre>\n\n<p>Anything wrong I am doing in the above sql query? I am working with Oracle. It always gives me-</p>\n\n<pre><code>[WARN]Execute Error : ORA-02392: exceeded session limit on CPU usage, you are being logged off (DBD ERROR: OCIStmtExecute)\n[WARN]Fetch Error : ERROR no statement executing (perhaps you need to call execute first)\n\nNo Matches Found\n</code></pre>\n\n<p><strong>Update:-</strong></p>\n\n<pre><code>select * from user_resource_limits;\n\nRESOURCE_NAME               LIMIT \nCOMPOSITE_LIMIT             UNLIMITED \nSESSIONS_PER_USER           5 \nCPU_PER_SESSION             100 \nCPU_PER_CALL                UNLIMITED \nLOGICAL_READS_PER_SESSION   10000 \nLOGICAL_READS_PER_CALL      UNLIMITED \nIDLE_TIME                   UNLIMITED \nCONNECT_TIME                15 \nPRIVATE_SGA                 UNLIMITED \n</code></pre>\n"},{"tags":["sql","oracle","index"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13187546,"title":"Show me the index on the table in Oracle","body":"<p><strong>Problem Statement:-</strong></p>\n\n<p>Given a oracle table name how can I find out whether there is any index being created on a particular column in that table?</p>\n\n<p>I know its a very basic question, I am not that much familiar with SQL stuff so that's why having problem. So posting here if anyone can help me out?</p>\n"},{"tags":["oracle","oracle10g","unix-timestamp"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":135,"score":0,"question_id":12105691,"title":"Convert timestamp datatype into unix timestamp Oracle","body":"<p>I have a timestamp datatype in database with format 24-JuL-11 10.45.00.000000000 AM and want to get it converted into unix timestamp, how can I get it?</p>\n"},{"tags":["oracle","osb"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13183299,"title":"Oracle OSB Stats API: resource URIs are returned with periods stripped","body":"<p>I'm making a script to poll OSB stats. I'm using the Oracle-provided sample as a starting point:</p>\n\n<p><a href=\"http://docs.oracle.com/cd/E21764_01/doc.1111/e15867/app_jmx_monitoring.htm#autoId17\" rel=\"nofollow\">http://docs.oracle.com/cd/E21764_01/doc.1111/e15867/app_jmx_monitoring.htm#autoId17</a></p>\n\n<p>Everything works OK, except one puzzling issue: any resource with type URI lacks any period. For instance,</p>\n\n<pre><code>jms://127.0.0.1,127.0.0.2/foo.bar\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>jms://127001,127002/foobar\n</code></pre>\n\n<p>and </p>\n\n<pre><code>http://foo.bar.baz/service\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>http://foobarbaz/service\n</code></pre>\n\n<p>This is quite an inconvenience for me. :( The method called to get the name is ResourceStatistic.getName(), JavaDoc for which mentions nothing about stripping dots:</p>\n\n<p><a href=\"http://otndnld.oracle.co.jp/document/products/osb/docs10gr3/javadoc/com/bea/wli/monitoring/ResourceStatistic.html\" rel=\"nofollow\">http://otndnld.oracle.co.jp/document/products/osb/docs10gr3/javadoc/com/bea/wli/monitoring/ResourceStatistic.html</a></p>\n\n<p>Can anyone give me a hint what could be wrong, and how to get the original, unstripped, URI for the resource? </p>\n\n<p>Thanks!</p>\n"},{"tags":["sql","oracle","join","tree","connect"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":12622003,"title":"Tree Structure with Connect BY inner join and update","body":"<p>I have 3 tables.\nThe table <code>Test</code>, <code>Folder</code> and <code>Iteration</code>.</p>\n\n<p>Every <code>test</code> is Linked with a <code>Folder</code>. \nThe <code>Folder</code>, which is linked to the <code>test</code> is a child of many other <code>folders</code>. </p>\n\n<p>From these <code>folders</code> the one on the top of the hierarchy is linked with the table <code>Iteration</code>.</p>\n\n<p>Now I want to <strong>Update</strong> the <strong>Iteration_ID</strong> in a <code>Test</code> table. So that I have a \"fast\" connection  between Test and Iteration.\nThis is my try:</p>\n\n<pre><code>    update Test a set a.Iteration_ID =\n(nvl((\n--The Select Part\n select b.ID from Iteration b inner join Folder c on b.Folder_ID = c.ID \n    where c.ID = \n    (\n        select * from \n        (\n            SELECT d.ID FROM Folder d START WITH d.ID =  135196 CONNECT BY PRIOR d.parent_id = d.id\n            order by LEVEL desc \n        )\n        where rownum= 1\n    )\n\n--End Select Part\n),0));\n</code></pre>\n\n<p>The Query above works, but I have a static ID at d.ID. I would like to set there <strong>a.Folder_ID</strong>\n:</p>\n\n<pre><code>    update Test a set a.Iteration_ID =\n(nvl((\n--The Select Part\n select b.ID from Iteration b inner join Folder c on b.Folder_ID = c.ID \n    where c.ID = \n    (\n        select * from \n        (\n            SELECT d.ID FROM Folder d START WITH d.ID =  a.Folder_ID CONNECT BY PRIOR d.parent_id = d.id\n            order by LEVEL desc \n        )\n        where rownum= 1\n    )\n\n--End Select Part\n),0));\n</code></pre>\n\n<p>The Problem is that Oracle doesn't know the a.folder_id</p>\n\n<pre><code>ORA-00904: \"A\".\"FOLDER_ID\": ungültiger Bezeichner\n00904. 00000 -  \"%s: invalid identifier\"\n</code></pre>\n\n<p>Anybody know a better way to solve the problem or to improve the query?</p>\n\n<p>For example to get the root folder withour the <code>select * from and rownum = 1</code>?</p>\n\n<p>Thanks!</p>\n"},{"tags":["sql","oracle","view"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":47,"score":-1,"question_id":13176879,"title":"create a view for multiple queries in Oracle","body":"<p>I have 4 SQL queries that fetch data from the same table and I was wondering whether you can create a view containing multiple queries. For instance, one of these queries looks something like: </p>\n\n<pre><code>SELECT Count(COLUMN1) FROM TABLE1 WHERE COLUMN3 &gt; '01-Oct-12' AND COLUMN3&lt; '01-Nov-12' \n</code></pre>\n\n<p>whereas another looks like: </p>\n\n<pre><code>SELECT Count(COLUMN2) FROM TABLE1 WHERE COLUMN3 &gt; '01-Oct-12' AND COLUMN3 &lt; '01-Nov-12' \n</code></pre>\n\n<p>Thanks,</p>\n\n<p>I. </p>\n"},{"tags":["sql-server","oracle","linked-server"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13185137,"title":"SQL Server linked to Oracle","body":"<p>I have a linked server connection from SQL Server to Oracle.</p>\n\n<p>I am executing this statement in SQL Server Management Studio.</p>\n\n<pre><code>select * from OPENQUERY(LINKEDSERVER,'select * from ORACLE_VIEW')\n</code></pre>\n\n<p>I am getting an error </p>\n\n<blockquote>\n  <p><em>OLE DB provider \"OraOLEDB.Oracle\" for linked server \"LINKEDSERVER\"\n  returned message \"ORA-01858: a non-numeric character was found where a\n  numeric was expected.\"</em></p>\n</blockquote>\n\n<p>Note: when I am executing </p>\n\n<pre><code>select * from ORACLE_VIEW\n</code></pre>\n\n<p>in the Oracle editor it is working fine.</p>\n\n<p>Please advise me on this!!</p>\n\n<p>Thanks for your time!!</p>\n"},{"tags":["oracle","sql-developer"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13185033,"title":"SQL developer: Export schema script with data/index tablespace name?","body":"<p>Currently using SQL Developer with no complaint, now there is a question about how to export schema script with data/index tablespace name on it.</p>\n\n<p>There is an option when right click table => Export => under \"Export DLL\" there is a check box for \"Schema\" but not for tablespace. </p>\n\n<p>So how can we achieve massive script exporting with tablespace name all along?</p>\n\n<p>Or, is there any other tool/command to handle the job?</p>\n\n<p>Thank you.</p>\n"},{"tags":["sql","oracle","formatting"],"answer_count":5,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":31229,"score":5,"question_id":144167,"title":"How to format Oracle SQL text-only select output","body":"<p>I am using Oracle SQL (in SQLDeveloper, so I don't have access to SQLPLUS commands such as COLUMN) to execute a query that looks something like this:</p>\n\n<pre><code>select assigner_staff_id as staff_id, active_flag, assign_date,\n  complete_date, mod_date\nfrom work where assigner_staff_id = '2096';\n</code></pre>\n\n<p>The results it give me look something like this:</p>\n\n<pre>\nSTAFF_ID               ACTIVE_FLAG ASSIGN_DATE               COMPLETE_DATE             MOD_DATE                  \n---------------------- ----------- ------------------------- ------------------------- ------------------------- \n2096                   F           25-SEP-08                 27-SEP-08                 27-SEP-08 02.27.30.642959000 PM \n2096                   F           25-SEP-08                 25-SEP-08                 25-SEP-08 01.41.02.517321000 AM \n\n2 rows selected\n</pre>\n\n<p>This can very easily produce a very wide and unwieldy textual report when I'm trying to paste the results as a nicely formatted quick-n-dirty text block into an e-mail or problem report, etc.  What's the best way to get rid of all tha extra white space in the output columns when I'm using just plain-vanilla Oracle SQL?  So far all my web searches haven't turned up much, as all the web search results are showing me how to do it using formatting commands like COLUMN in SQLPLUS (which I don't have).</p>\n"},{"tags":["oracle","search","nlp","oracle-text"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13017844,"title":"Oracle text curly braces behavior","body":"<p>I'm using oracle text to do a readahead (according to the spec writer) in the search bar.</p>\n\n<p>Basically, a user can start typing text and we fill the suggestions bar with likely matches.</p>\n\n<p>I tried using oracle text for this, and ran into some issues, and the latest one being:</p>\n\n<p>Table contains this entry for answertext: ... we offer many pricing options ...</p>\n\n<pre><code>SELECT\n    questiontext as qtext,\n   answertext as text,\n   questionid FROM question\n   WHERE contains(answertext, '{pric}', 1) &gt; 0\n\n;\n</code></pre>\n\n<p>This query returns nothing. But using {pricing} will return the correct result.</p>\n\n<p>And suggestion why this is happening would be great!</p>\n\n<p>Edit: just wanted to add that using stemming does not work for me because the user wants to differentiate between \"report\" and \"reporting\" and they want the matching substring to be highlighted which can be done if I can find the substring among the returned results.</p>\n\n<p>Edit 2: I have my guess, that oracle tokenizes each word using word boundary of some sort in the index, and thus without any wildcards it looks for a token that equals = 'pric' and therefore does not find it (because there is a token 'pricing'). So, if that guess is correct I would love if someone can chime in for how I can make the query above work with the example entry while still maintaining whitespace so if type 'pricing options' it should return but if i type 'many options' it should not...</p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":13184243,"title":"creating variables in PL/SQL","body":"<p>Simple PL/SQL question from a beginner: What is the proper PL/SQL syntax for creating a new variable in an existing dataset? </p>\n\n<p>I'd like to extract the year from a date field (svcdat) in an insurance claims dataset (rpt_claim). The date field is numerical and follows the format YYYYMMDD, for example 20120704 for July 4, 2012.</p>\n\n<p>My first pass at creating a \"year\" variable was unsuccessful:</p>\n\n<pre><code>declare\n  year number(4);\nbegin\n  select svcdat into year \n  from rpt_claim\n  where year=floor(svcdat/10000);\nend;\n</code></pre>\n\n<p>Any help is much appreciated!</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13184856,"title":"create a table from multiple tables while keeping original ID and original table?","body":"<p>This is a part of my assignment and I'm stuck in the first part..</p>\n\n<p>They ask us to create a data warehouse table to integrate data from other tables.</p>\n\n<p>The requirement sheet gave me the following schemas that must be used.</p>\n\n<pre><code>A3DWSW (DWSWID, TITLE, CATCODE, CATNAME, ORIGID, ORIGITABLE)\nthe DWSWID, TITLE, CATCODE, CATNAME columns are from A3SOFTWARE and A3CATEGORY TABLE\n</code></pre>\n\n<p>So I wrote this DDL to create the <code>A3DWSW</code> table with the columns from other tables</p>\n\n<pre><code>CREATE TABLE A3DWSW AS (SELECT A3SOFTWARE.SWID, A3SOFTWARE.TITLE, A3SOFTWARE.CATCODE, A3CATEGORY.CATNAME FROM A3SOFTWARE, A3CATEGORY);\n</code></pre>\n\n<p>This creates the table but I cannot get any information about <code>ORIGID</code> and <code>ORIGITABLE</code> columns from any other tables. There are no columns for them, so I assume the names mean <code>ORIGINAL</code> of some table. But I can't guess which table and ID are original.</p>\n"},{"tags":["sql","oracle","views","ddl"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":357,"score":1,"question_id":2063493,"title":"How to auto-redefine view when underlying table changes (new column)?","body":"<p>We've got a view that's defined like this</p>\n\n<pre><code>CREATE VIEW aView as \nSELECT * from aTable Where &lt;bunch of conditions&gt;;\n</code></pre>\n\n<p>The \"value\" of the view is in the where-condition, so it is okay to use a <code>Select *</code> in this case.</p>\n\n<p>When a new column is added to the underlying table, we have to redefine the view with a </p>\n\n<pre><code>CREATE OR REPLACE FORCE VIEW aView as \nSELECT * from aTable Where &lt;bunch of conditions&gt;;\n</code></pre>\n\n<p>as the <code>Select *</code> seems to get \"translated\" into all the columns present at the time the view is (re-)defined. </p>\n\n<p>My question: How can we avoid this extra step? \n(If the answer is dependent on the RDBMS, we're using Oracle.)</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13178017,"title":"Is sessions stored somewhere?","body":"<p>The <code>V$SESSION</code> view contains the list of users currently logged in, but are they stored somewhere in a log table or something?</p>\n\n<p>I need to get a list of yesterday users that where logged in with pl/sql (for instance)</p>\n"},{"tags":["oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13183676,"title":"org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (ORA-28001: the password has expired )","body":"<p>I have an app that is using Oracle 11g as the db, and we had neglected to set the password expiration to never and the app itself then failed when the original password expired.  We corrected that, and reset the password back to the original, and for some reason, while most of the functionality is working properly, part is not (throws the error in title).  Below is the output from the log file. I have tried rebooting the server etc, but still get the same issue.  Any thought?</p>\n\n<p>Thanks!!!  </p>\n\n<pre><code>INFO   | jvm 1    | 2012/11/01 13:13:23 | INFO: webClient: Request attributes: [service=tsapprovals][tb=managedresources][oid=][action=splitpanecontroller][orderBy=][sortBy=] from Host[108.28.145.157]\nINFO   | jvm 1    | 2012/11/01 13:13:23 | AbandonedObjectPool is used (org.apache.commons.dbcp.AbandonedObjectPool@51f1e39b)\nINFO   | jvm 1    | 2012/11/01 13:13:23 |    LogAbandoned: true\nINFO   | jvm 1    | 2012/11/01 13:13:23 |    RemoveAbandoned: true\nINFO   | jvm 1    | 2012/11/01 13:13:23 |    RemoveAbandonedTimeout: 300\nINFO   | jvm 1    | 2012/11/01 13:13:24 | org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (ORA-28001: the password has expired\nINFO   | jvm 1    | 2012/11/01 13:13:24 | )\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1225)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:880)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.util.DBConnectionFactory.getPooledConnection(DBConnectionFactory.java:459)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.util.DBConnectionFactory.getConnection(DBConnectionFactory.java:242)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.util.DBConnectionFactory.getConnection(DBConnectionFactory.java:221)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.util.DBConnectionFactory.&lt;init&gt;(DBConnectionFactory.java:157)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.util.DBConnectionFactory.getInstance(DBConnectionFactory.java:208)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.report.db.CrossPointDBUtility.&lt;init&gt;(CrossPointDBUtility.java:45)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.report.queries.DBQuery.initialize(DBQuery.java:64)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.report.queries.approval.PendingApprovalsQuery.initialize(PendingApprovalsQuery.java:34)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.web.command.splitpane.services.PendingApprovals.execute(PendingApprovals.java:65)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.web.command.splitpane.SplitPaneCommand.displayControllerPane(SplitPaneCommand.java:120)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.web.command.splitpane.SplitPaneCommand.execute(SplitPaneCommand.java:57)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.web.servlet.CommandProcessor.processAction(CommandProcessor.java:1587)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.web.servlet.CommandProcessor.process(CommandProcessor.java:1156)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.web.servlet.Controller.handleRequest(Controller.java:210)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.velocity.servlet.VelocityServlet.doRequest(VelocityServlet.java:358)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.web.servlet.Controller.doRequest(Controller.java:838)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.velocity.servlet.VelocityServlet.doGet(VelocityServlet.java:317)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:174)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:874)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at java.lang.Thread.run(Thread.java:595)\nINFO   | jvm 1    | 2012/11/01 13:13:24 | Caused by: java.sql.SQLException: ORA-28001: the password has expired\nINFO   | jvm 1    | 2012/11/01 13:13:24 | \nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:331)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:283)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:278)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.T4CTTIoauthenticate.receiveOauth(T4CTTIoauthenticate.java:791)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:362)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:439)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:165)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:801)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:294)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1247)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1221)\nINFO   | jvm 1    | 2012/11/01 13:13:24 |   ... 34 more\nINFO   | jvm 1    | 2012/11/01 13:13:24 | loggedInUSer: System Administrator Thu Nov 01 18:13:24 UTC 2012\nINFO   | jvm 1    | 2012/11/01 13:13:24 | isc.thinclient.api.ThinAPIException: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (ORA-28001: the password has expired \n</code></pre>\n"},{"tags":["oracle","view","statistics","grouping","summary"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13183859,"title":"How to build a View to show 5 number summary (stats)","body":"<p>Oracle seems to lack a 'q1' and 'q3' function, and I seem to lack the ability to work out how to use the function NTILE.....**</p>\n\n<p>How can I construct a view to hold a '5 number summary' of a particular column of data ? (Plus some other 'helper' values: range, IQR etc).</p>\n\n<p>So basically I can do this bit:</p>\n\n<pre><code>CREATE VIEW summary as \nSELECT min(val) min, median(val) median, max(val) max\nFROM table;\n</code></pre>\n\n<p>But I really want the output columns to be:</p>\n\n<pre><code>MIN\nQ1\nMEDIAN\nQ3\nMAX\nRANGE\nIQR\nUPPER_FENCE\n</code></pre>\n\n<p>(Q1 is essentially is the median of the MIN value of the MEDIAN value, similiary Q3 is the median of the MAX and the MEDIAN value. RANGE is MAX-MIN, IQR is Q3-Q1, UPPER_FENCE (in my choice) is Q3+1.5*IQR).</p>\n\n<p>** Ntile-Disfunction ?</p>\n"},{"tags":["oracle","plsql","clob"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":230,"score":0,"question_id":12860526,"title":"How to convert CLOB to VARCHAR2 inside oracle pl/sql","body":"<p>I have a clob variable, need to assign it to varchar2 variable. the data inside clob var is less than 4000 (i..e varchar2's maxsize) oracle10+</p>\n\n<p>i tried </p>\n\n<pre><code>  report_len  := length(report_clob);\n  report      := TO_CHAR(dbms_lob.substr(report_clob, report_len, 1 ));\n  report_clob := null;\n</code></pre>\n\n<p>but it turns report into long value which i see while debugging. Also when i call this sql (proc) from my c# code. it complains saying buffer too small because i send parameter as per varchar, but the above conversion might be turning it into long value.</p>\n\n<p>even i tied direct assignment</p>\n\n<pre><code>   report_clob := report \n</code></pre>\n\n<p>same result.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Ok, to answer the questions below please see:\nI debug using test script in PL/SQL developer. report variable is varchar2(4000). When I step after 2nd line. report shows to be a long value and it just says (Long Value) . cant even see the contents.</p>\n\n<p>report and report_clob are out variable from the procedure. This procedure is called from C# code.</p>\n\n<p>There is an exception string buffer too small in C# when I call this procedure. I have given 5000 as size of report variable in C# sufficient to recieve 4000 max characters value from the procedure. So I guess problem doesnt lie there.</p>\n\n<p>And when I assign report:= 'some string....' then C# call works fine.</p>\n\n<p>So my investigation says that report := transform (report_clob) is making report become long value or some such thing (weird) which makes C# code problematic to handle larger value in 5000 varchar out parameter.</p>\n\n<p>Any more detail i will be happy to provide.</p>\n"},{"tags":["oracle","clob"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":7539,"score":2,"question_id":722113,"title":"select * returns CLOB","body":"<p>I have not used oracle before  and I was to modify the clob data as it has my home phone number. But when I do <code>select * from</code> table shows <code>CLOB</code> and I cannot see the data. How can I see the data and how to I Update?</p>\n\n<p>I need the query.</p>\n"},{"tags":["oracle","sql-update","reordering"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13182114,"title":"Oracle numbering update","body":"<p>I am trying to do some SQL working with Oracle</p>\n\n<p>I have a table that contains text data, and an order list of numbers of how that text should appear, 1-27.</p>\n\n<pre><code>So:\nBonjour | 1\nmon nom | 2\nJean P. | 3\nHello J | 4\nJe suis | 5\nis John | 6\n</code></pre>\n\n<p>Now I have to reorder the list numbers:\n    5 to number 2, and move 2 to 3, 3 to 4, 4 to 5, BUT NOT 5 to 6 or 6 to anything. Remember, this is a list to number 27.</p>\n\n<pre><code>So I'll have:\nBonjour | 1\nmon nom | 2\nJean P. | 3\nHello J | 4\nMy name | 5\nis John | 6\n</code></pre>\n\n<p>Does anyone know of a good way to go about doing this?</p>\n"},{"tags":[".net","vb.net","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13177267,"title":"Using datetimepicker in a where clause in vb .net","body":"<pre><code> Dim con1 As OleDb.OleDbConnection\n            Dim cmd As OleDb.OleDbCommand\n            Dim query As String\n\n\n            Dim rs As OleDb.OleDbDataReader\n            con1 = New OleDb.OleDbConnection(\"Provider=MSDAORA.1;Data Source=localhost;Persist Security Info=True;Password=sys;User ID=nitishok\")\n            con1.Open()\n\n\n            query = \"select * from HOLDERSDB where DOB like '\" + DateTimePicker1.Value + \"' \"\n            cmd = New OleDb.OleDbCommand(query, con1)\n            cmd.CommandType = CommandType.Text\n            rs = cmd.ExecuteReader\n\n            Dim da As New OleDb.OleDbDataAdapter(query, con1)\n\n            Dim ds As New DataSet()\n            da.Fill(ds, \"HOLDERSDB\")\n            DataGridView1.DataSource = ds.Tables(0)\n\n            con1.Close()\n    enter code here\n</code></pre>\n\n<p>i want rows from HOLDERS table that have DOB as datetimepicker1\nThe code that i have posted does not return any results.</p>\n\n<p>Plz help.</p>\n"},{"tags":["windows","oracle","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":13180956,"title":"Windows could not start DBConsole for new database instance","body":"<p>I am getting this error:</p>\n\n<blockquote>\n  <p>Windows could not start the OracleDBConsoleOracleInstance2 on Local Computer. For more information, review the System Event Log. If this is a non-Microsoft service, contact the system vendor, and refer to service-specific error code 1</p>\n</blockquote>\n\n<p>I installed Oracle 11g on Windows 7 and created my 1st database instance (oracleInstance1) successfully with a listener and service configured. I could access this database using DBconsole URL: <code>https://localhost:1158/em</code>.</p>\n\n<p>I see the services started for:</p>\n\n<ul>\n<li><code>OracleDBConsoleOracleInstance1</code></li>\n<li><code>OracleOraDb11g_home1TNSListener</code></li>\n<li><code>OracleServiceOracleInstance1</code></li>\n</ul>\n\n<p>Next, I created a second database instance (<code>oracleInstance2</code>) and have configured a new service for this database. I am using the same listener as I intend to use one database instance at any point of time.</p>\n\n<p>However, I got this warning message during configuration:</p>\n\n<pre><code>Enterprise manager configuration succeeded with the following warning - Error starting Database Control. Please execute the following command(s).\n  1. Set the environment variable ORACLE_UNQNAME to Database unique name.\n  2. C:\\Oracle\\product\\11.2.0\\dbhome_1\\bin\\emctl.bat start dbconsole\n</code></pre>\n\n<p>To start the new database console, I stopped the previously running DBConsole, OracleDBConsoleOracle1 and started the new DBConsole OracleDBConsoleOracle2 and get the above error.</p>\n\n<p>When I try to start dbconsole manually using <code>emctl dbconsole start</code>, it starts OracleDBConsoleOracle1 instead.</p>\n\n<p>I changed environment variables <code>ORACLE_SID=oracle2</code> and <code>ORACLE_UNQNAME=oracle2</code></p>\n\n<p>What am I missing here?</p>\n"},{"tags":[".net","oracle","odp.net","oraclecommand"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":111,"score":0,"question_id":12660636,"title":"OracleCommand timeout","body":"<p>ODP.NET <a href=\"http://docs.oracle.com/cd/B19306_01/win.102/b14307/OracleCommandClass.htm#DAFBGECA\" rel=\"nofollow\">documentation for OracleCommand.CommandTimeout</a> says</p>\n\n<blockquote>\n  <p>Default is 0 seconds, which enforces no time limit.</p>\n  \n  <p>When the specified timeout value expires before a command execution\n  finishes, the command attempts to cancel. If cancellation is\n  successful, an exception is thrown with the message of ORA-01013: user\n  requested cancel of current operation. If the command executed in time\n  without any errors, no exceptions are thrown.</p>\n  \n  <p>In a situation where multiple OracleCommand objects use the same\n  connection, the timeout expiration on one of the OracleCommand objects\n  may terminate any of the executions on the single connection. To make\n  the timeout expiration of a OracleCommand cancel only its own command\n  execution, simply use one OracleCommand for each connection if that\n  OracleCommand sets the CommandTimeout property to a value greater than\n  0.</p>\n</blockquote>\n\n<p>But a code like this works:</p>\n\n<pre><code>    static void Main(string[] args)\n            {\n                OracleConnection conn = null;\n                try\n                {\n                    string connString =\n                        \"Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=myOracleHost)(PORT=1521)))(CONNECT_DATA=(SERVICE_NAME=myServiceName)));User Id=system;Password=admin;Pooling = False;\";\n                    string cmdString1 = \"UPDATE employee SET empname = 'temp1' where id = 1\";\n                    string cmdString2 = \"Update employee set empname = 'temp2' where id = 2\";\n                    conn = new OracleConnection(connString);\n                    var cmd1 = new OracleCommand(cmdString1, conn);\n                    cmd1.CommandTimeout = 30;\n                    var cmd2 = new OracleCommand(cmdString2, conn);\n                    cmd2.CommandTimeout = 30;\n                    conn.Open();\n                    try\n                    {\n//Locked the row with ID 1 with an uncommitted update operation outside this code\n                        cmd1.ExecuteNonQuery();\n                    }\n                    catch (Exception exception)\n                    {\n//Exception ORA-01013 Thrown as expected\n                    }\n                    try\n                    {\n//As per the documentation, this should not also work since this command object also uses the same connection as above and it timed out in the query above\n                        cmd2.ExecuteNonQuery();\n//But this still works fine. \n                    }\n                    catch (Exception)\n                    {\n                        //no exception\n                    }\n                }\n                finally\n                {\n                    conn.Close();\n                }\n            }\n</code></pre>\n\n<p>I am using the same OracleConnection object for both the command objects - cmd1 and cmd2, and cmd1 already timed out(as expected).\nBut, per the documentation, cmd2 also should not run. But it still runs without any exception and updates the other row properly.</p>\n"},{"tags":["xml","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13162213,"title":"unescaped column value in xmlforest","body":"<p>I have a table column which stores xml chunks like </p>\n\n<pre><code>&lt;Text&gt;hello, world&lt;/Text&gt;&lt;/Image id=\"100\"&gt;\n</code></pre>\n\n<p>or plain text without tags. How can I generate xml out of tagged column values without escaped symbols.</p>\n\n<p>here is an example of the statement:</p>\n\n<pre><code>select xmlelement(\"Proposal\", xmlforest(1 as \"ProposalType\"\n                                   ,to_char(sysdate, 'dd.mm.yyyy') as \"CreateDate\"\n                                   ,'title1' as \"Title\"\n                                   ,'&lt;Text&gt;hello, world&lt;/Text&gt;&lt;/Image id=\"100\"&gt;' as \"InfoBlock\"))\n  from dual;\n</code></pre>\n\n<p>and resulting xml looks like this:</p>\n\n<pre><code>&lt;Proposal&gt;\n    &lt;ProposalType&gt;1&lt;/ProposalType&gt;\n    &lt;CreateDate&gt;31.10.2012&lt;/CreateDate&gt;\n    &lt;Title&gt;title1&lt;/Title&gt;\n   &lt;InfoBlock2&gt;&amp;lt;Text&amp;gt;hello, world&amp;lt;/Text&amp;gt;&amp;lt;/Image id=&amp;quot;100&amp;quot;&amp;gt;&lt;/InfoBlock2&gt;\n&lt;/Proposal&gt;\n</code></pre>\n\n<p>but I need xml like this:</p>\n\n<pre><code>&lt;Proposal&gt;\n    &lt;ProposalType&gt;1&lt;/ProposalType&gt;\n    &lt;CreateDate&gt;31.10.2012&lt;/CreateDate&gt;\n    &lt;Title&gt;title1&lt;/Title&gt;\n    &lt;InfoBlock2&gt;\n        &lt;Text&gt;hello, world&lt;/Text&gt;&lt;Image id=\"100\"/&gt;\n    &lt;/InfoBlock2&gt;\n&lt;/Proposal&gt;\n</code></pre>\n"},{"tags":["sql","oracle","group-by","left-join","decode"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13144605,"title":"using decode in query multiple results?","body":"<pre><code>SELECT PE.PHYS_RESR_ID,PE.EQMT_INIT,  PE.EQMT_NBR,\ndecode (EEU.dimn_type , 'EXTHGT', EEU.dimn_valu) as EXTHGT, \ndecode(EEU.dimn_type, 'EXTHGT', EEU.uom_code) as UNIT_EXTHGT,\ndecode (EEU.dimn_type , 'INHGT', EEU.dimn_valu) as INHGT, \ndecode(EEU.dimn_type, 'INHGT', EEU.uom_code) as UNIT_INHGT,\ndecode (EEU.dimn_type , 'INWDTH', EEU.dimn_valu) as INWDTH, \ndecode(EEU.dimn_type, 'INWDTH', EEU.uom_code) as UNIT_INWDTH\n\nFROM EQU_EQMT PE\n  left join EQU_EQMT_DIMN EEU \n  on  EEU.PHYS_RESR_ID = PE.PHYS_RESR_ID      \nand   ( EEU.POS_DESC is null or EEU.POS_DESC ='VALU' or EEU.POS_DESC ='valu');\n</code></pre>\n\n<p>But when i run it. the query returns me a line for each decode i make. and i want a line for this id pe.phys_resr_id with the different data in the same line. Any advice ?\nI would like it to give me like this:</p>\n\n<pre><code>+-------------+-------------+---------+--------+------------+---------+------------+------------+---------------+\n| PHYS_RESR_ID| EQMT_INIT   | EQMT_NBR| EXTWD  | UNIT_EXTWD | INHGT   | UNIT_INGHT | INWDTH      | UNIT_INWDTH  | \n+-------------+-------------+---------+--------+------------+---------+------------+-------------+--------------+\n|  456        | AC          | 3       |   4    |   IN       | NULL    | NULL       | NULL        | NULL     | \n|  324        | AD          | 45      |   67   |   IN       | 56      | IN         | NULL        | NULL     |\n|  132        | B           | 65      |  54    |   IN       | 78      | IN         | 34          |  IN      |    \n+----+-------------+---------+--------+--------+------------+---------+------------+-------------+--------------+\n</code></pre>\n"},{"tags":["sql","oracle","jdbc","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":72,"score":0,"question_id":13178181,"title":"Joining multiple tables with a single query","body":"<h2>Student</h2>\n\n<pre><code>student_id  FirstName   LastName\n---------------------------------------------------\n1           Joe         Bloggs\n2           Alan        Day\n3           David       Johnson\n</code></pre>\n\n<h2>Student_Course</h2>\n\n<pre><code>course_id   student_id  courseName\n---------------------------------------------------             \n1           1           Computer Science\n2           1           David Beckham Studies\n3           1           Geography   \n1           3           Computer Science\n3           3           Geography   \n</code></pre>\n\n<h2>Student_clubs</h2>\n\n<pre><code>club_id student_id  club_name               club_count\n---------------------------------------------------\n1       1           Footbal                     10\n2       1           Rugby                       10\n3       1           Syncronized Swimming        10\n4       3           Tennis                      15\n</code></pre>\n\n<p>In the above example, student with id = 1 takes 3 course and is part of 3 clubs.<br>\nIf i was to find out which courses a student is involved in or which club the student is part of i can do it but i will need to run two queries. Is it possible to run a single query against the \ntables listed above so that the results come out like this:</p>\n\n<h2>Output</h2>\n\n<pre><code>student_id      FirstName       Student_associated_courses          Student_associated_clubs \n---------------------------------------------------------------------------\n1               Joe             1,2,3                               Football, Rugby, Syncronized swimming\n3               David           1,3                                 Tennis\n</code></pre>\n\n<p>Is it possible to get the above output with just one query? I am using JDBC to get the data so i am trying to see if i can avoid multiple trips to get the necessary data. </p>\n"},{"tags":["oracle","unix","csv","carriage-return"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":426,"score":1,"question_id":10724016,"title":"Unix - Oracle : How to remove CR at the end of file","body":"<p>I generate a csv file (example.csv) using an oracle procedure (utl_file.put_line), but when i open the file with notepad, i realize that there is an CR (carriage return) at the end of the file. I just want to remove that CR.</p>\n\n<p>The file is generated on a server UNIX (AIX), and i open it on my computer (windows) using  notepad.</p>\n\n<p>Thanks fo your help</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":2877,"score":5,"question_id":7954759,"title":"Where does Oracle SQL Developer store connections?","body":"<p>I have an application that i can't get connected to my Oracle Database 11g Express Edition.  I created a test database in this edition, and i can connect to the database fine using Oracle SQL Developer, create tables, views ect.  However, im having a hard time getting connected via my application.  I was wondering where the connection information is stored? In what file. I wanted to compare my connection info with what is set up in the SQL Explorer's file.  I found all the *.ora files and renamed them to see if i could find what file (through the process of elimination) the connections were stored in, but i wasn't successful. Any help would be appreciated.</p>\n"},{"tags":["sql","oracle","join","pivot"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":3,"view_count":79,"score":-2,"question_id":13160047,"title":"SQL statement to join and give result in multiple columns","body":"<p>Can anyone help me with an sql statement to produce te following result?</p>\n\n<pre><code>Table Person\nPerson_ID  Name\n1          John\n2          Paul\n\nTable Declaration\nDecl_ID             Person_ID   Amount\n1                   1               10\n2                   2               12\n3                   1               99\n4                   1               24\n</code></pre>\n\n<p>Result of the SQL statment should look like this:</p>\n\n<pre><code>Name    Amount1 Amount2 Amount3\nJohn    10      99      24\nPaul    12\n</code></pre>\n"},{"tags":["asp.net","oracle","iis-7.5","odp.net","odp"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2670,"score":0,"question_id":10501896,"title":"Could not load file or assembly 'Oracle.DataAccessVersion=9.2.0.700, Culture=neutral, PublicKeyToken=89b483f429c47342'","body":"<p><b>\nCould not load file or assembly 'Oracle.DataAccess, Version=9.2.0.700, Culture=neutral, PublicKeyToken=89b483f429c47342' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040) \n</b></p>\n\n<p>i have developed the application using odac 32 bit version 11.2.0.3.0. where it is working absolutely fine.But deploying into another pc where i installed IIS 7.5 with 32 bit client ersion 11.2.0.3.0 i am always getting the above error.</p>\n\n<p>i have no idea where it is getting oracle.DataAccess, Version=9.2.0.700. I tried whole day to solve the issue. But still no luck. Please help me out of the situation where i am really feeling pathetic.</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13177867,"title":"how to create a clean oracle database without excess tables in oracle 11g","body":"<p>why am i seeing these , ready made tables inside my newly created connection in my oracle 11g express, via oracle sql developer?,\nwhat i did was, I just created a new connection, with username as system, and password as sasori....then when i clicked the \"tables\",\ni saw alot of tables in it which i didn't created my self</p>\n\n<pre><code>AQ$_DEF$_AQERROR_F\nAQ$_INTERNET_AGENTS\nAQ$_INTERNET_AGENT_PRIVS\nAQ$_QUEUE_TABLES\nDEF$_DESTINATION\nDEF$_PROPAGATOR\nDEF$_PUSHED_TRANSACTIONS\nLOGMNRC_DBNAME_UID_MAP\nLOGMNRC_GSBA\n</code></pre>\n\n<p>and etc.etc...etc....\nhow can i create a new connection w/o those tables automatically created</p>\n"},{"tags":["java","oracle","oracle-apps"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13175972,"title":"How can I retrieve General ledger ,fixed assets and chats of accounts from Oracle E-biz financial?","body":"<p>I am new to oracle e-biz &amp; trying to extract the General Ledger, Fixed Asset and chats of accounts data from Oracle E-Business Suite Financials. The data will then be used to integrate with a third party application. I have looked at the Oracle Integration Repository (iRep) and did not see any interfaces that would provide the Fixed Asset or General Ledger data.</p>\n\n<p>Is there a way to retrieve the General Ledger, Fixed Assets data from Oracle E-biz? If so guide me.</p>\n"},{"tags":["oracle","plsql","oracle10g","cursor","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13175628,"title":"How to fetch columns in cursor using FETCH?","body":"<pre><code>create or replace PROCEDURE newprocedur(outname OUT VARCHAR2,outroll OUT NUMBER) AS\n  CURSOR c1 IS \n    select Name,Rollno,Section \n      from emp;\nBEGIN\n  Open c1;\n  fetch c1 into outname,outroll;\n</code></pre>\n\n<p>Here out of 3 columns in cursor is it possible to fetch only two columns using FETCH like i did above??</p>\n"},{"tags":["java","oracle","connection"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":13175744,"title":"Connection with oracle in java application","body":"<p>I have downloaded oracle express 11g edition and installed that.Now i want to connect it  from java application. Here is my  Connection code :-</p>\n\n<pre><code>Class.forName(\"oracle.jdbc.driver.OracleDriver\").newInstance();\nConnection conn = DriverManager.getConnection(\"jdbc:oracle:thin:@localhost:1521:example\", \"example\",\"password123\");\n</code></pre>\n\n<p>But when i am trying to connect it, it showing me following exception.  </p>\n\n<pre><code>java.sql.SQLException: Listener refused the connection with the following error:  \nORA-12505, TNS:listener does not currently know of SID given in connect descriptor\n\nat oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:419)\nat oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:536)\nat oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:228)\nat oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)\nat oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:521)\nat java.sql.DriverManager.getConnection(DriverManager.java:582)\nat java.sql.DriverManager.getConnection(DriverManager.java:185)\nat javaapplication3.JavaApplication3.main(JavaApplication3.java:40)\n</code></pre>\n\n<p>But when i am trying to connect with \"xe\" database then it is connected. </p>\n\n<pre><code>Class.forName(\"oracle.jdbc.driver.OracleDriver\").newInstance();   \nConnection conn = DriverManager.getConnection(\"jdbc:oracle:thin:@localhost:1521:xe\", \"example\",\"password123\");\n</code></pre>\n\n<p>I dont know why this is happening?. Please give me some reference or hint. </p>\n"},{"tags":["database","oracle","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13175194,"title":"Oracle right join 3 tables but only has to match 1","body":"<p>I'm not sure if the title is relevant to the question, bu i didn't found a better one.\nHere's the problem - I have 4 table, let's say:</p>\n\n<p>products (id, product_name),<br>\npriceA(product_id, price),<br>\npriceB(product_id, price),<br>\npriceC (product_id, price). </p>\n\n<p>What i need to do is write a select that will show me only products that have prices in priceA OR priceB OR priceC OR in any combination of a,b,c</p>\n\n<p>How could I do this ? Thank you!</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13174168,"title":"using select distinct with multiple columns but all columns musnt be distinct","body":"<p>I need all columns in a table but two columns must be distinct.\nI used this code but It check all columns, but I only need two of them will be distinct.\nHow can I satisfy this?</p>\n\n<pre><code>select distinct a.personalId, a.fileId, a.name, a.surname, a.address from my_table a\n</code></pre>\n\n<p>If I used the following code, I can not get the other columns:</p>\n\n<pre><code>select distinct a.personalId, a.fileId from my_table a\n</code></pre>\n"},{"tags":["mysql","database","oracle","query","select"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13174298,"title":"oracle select statement reuse?","body":"<p>This is an extract sql that gets days</p>\n\n<pre><code>AND S.Date          IN\n\n  (\n    SELECT Date\n    FROM\n      (\n      SELECT Date,\n        ROW_NUMBER() OVER (ORDER BY Date DESC )-1 Day\n      FROM CALENDAR_DIM\n      WHERE TYPE               = 'ABC'\n      )\n    WHERE BUS_DAY BETWEEN 0 AND 2\n  )\n</code></pre>\n\n<p>I want to run this code twice in two parts of my sql. How can i do that without pasting the same code. Also .. how could i rewrite the above code?. I am having some issues with performance. </p>\n"},{"tags":["oracle","oracle-xe"],"answer_count":4,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":28338,"score":5,"question_id":2747462,"title":"How to correctly set the ORACLE_HOME variable on Ubuntu 9.x?","body":"<p>I have the same problem as listed here: <a href=\"http://stackoverflow.com/questions/52239/oracle-lost-sysdba-password\">http://stackoverflow.com/questions/52239/oracle-lost-sysdba-password</a> although I did not lose the password, I entered it twice in the configure script originally, and then when I went to login (localhost:8080/apex, password not accepted. </p>\n\n<p>I don't have anything in the database, I just want to install and use Oracle-XE. I have tried apt-get removing it twice and reinstalling, but if I try to run <code>/etc/init.d/oracle-xe</code> configure again and I get \"Oracle Database 10g Express Edition is already configured\" despite the second time removing any folders I could find for Oracle XE. </p>\n\n<p>I tried running sqlplus \"/ as sysdba\" but all I get is:</p>\n\n<pre><code>Error 6 initializing SQL*Plus\nMessage file sp1&lt;lang&gt;.msb not found\nSP2-0750: You may need to set ORACLE_HOME to your Oracle software directory\n</code></pre>\n\n<p>I tried setting the variable via <code>export</code>. (also tried <code>set</code>). </p>\n\n<p>Tried: <code>export ORACLE_HOME=/usr/lib/oracle/xe/app/oracle/product/10.2.0/server/bin/sqlplus</code>\nand all the subdirectories of that. Same error every time. </p>\n\n<p>What is the ORACLE_HOME supposed to be set to? The only reference I have seen either just say general  or say the above up to the version number then \"/db_1\". I do no thave a db_1. </p>\n\n<p>Let me know if you need any clarification. I don't understand what I did wrong in this process.</p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13173913,"title":"Oracle pl/sql with variables: Creating Sequence with current date and host address","body":"<p>Here's a simple question about how to create a sequence with variables.\nI wanna create a sequence using a combination of system time as it's start value. How should I do that. </p>\n\n<p>Here's what I wrote:</p>\n\n<pre><code>DECLARE\n  SQS number :=(sysdate - to_date('01-JAN-1970','DD-MON-YYYY')) * (864000);\n  sql_stmt varchar2(200);\nBEGIN\n  sql_stmt := 'create SEQUENCE XXXX_id_seq MINVALUE  100000 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH :1 CACHE 500 NOORDER CYCLE';\n  EXECUTE IMMEDIATE sql_stmt using SQS;\nEND;\n</code></pre>\n\n<p>but it says invalid num.\nI know it's a noobie question. but I really need help here. </p>\n"},{"tags":["oracle","add","column"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13172390,"title":"how to add column dynamically based on user input in oracle?","body":"<p><strong>how to add column dynamically based on user input in oracle?</strong></p>\n\n<p>I am generating monthly report based on from_date to to_date below is my requirement sample table</p>\n\n<p>EMPLOYEE_CODE|  Name  | CL_TAKEN_DATE  | CL_BALANCE |  <strong>01-OCT-12</strong>  |  <strong>02-OCT-12</strong>  | <strong>03-OCT-12</strong></p>\n\n<hr>\n\n<p>100001....................John............02-OCT-12.................6</p>\n\n<p>100001....................chris...........01-OCT-12.................4</p>\n\n<hr>\n\n<p>Based on user input, that is, if user need the report from 01-OCT-12 TO 03-OCT-12, i need to add that dates as column in my table, like 01-OCT-12  |  02-OCT-12  | 03-OCT-12.... </p>\n\n<p>below is my code</p>\n\n<pre><code>create or replace\nprocedure MONTHLY_LVE_NEW_REPORT_demo\n(\nL_BUSINESS_UNIT                 IN SSHRMS_LEAVE_REQUEST_TRN.BUSINESS_UNIT%TYPE,\n--L_LEAVE_TYPE_CODE           IN SSHRMS_LEAVE_REQUEST_TRN.LEAVE_TYPE_CODE%TYPE,\nL_DEPARTMENT_CODE           IN VARCHAR2,\n--L_MONTH                    IN SSHRMS_LEAVE_REQUEST_TRN.LVE_FROM_DATE%TYPE,\nL_FROM_DATE                   IN SSHRMS_LEAVE_REQUEST_TRN.LVE_FROM_DATE%TYPE,\nL_TO_DATE                   in SSHRMS_LEAVE_REQUEST_TRN.LVE_TO_DATE%type,\nMONTHRPT_CURSOR               OUT        SYS_REFCURSOR\n)\n\n AS\n O_MONTHRPT_CURSOR_RPT clob;\nv_return_msg clob;\n   BEGIN\n\n   IF (L_BUSINESS_UNIT IS NOT NULL\n         AND L_FROM_DATE IS NOT NULL\n      and L_TO_DATE is not null\n    -- AND L_DEPARTMENT_CODE IS NOT NULL\n     )\n   THEN\n\n   OPEN MONTHRPT_CURSOR FOR\n\nselect EMPLOYEE_CODE, EMPLOYEE_NAME AS NAME, DEPARTMENT_CODE AS DEPARTMENT,DEPARTMENT_DESC, CREATED_DATE,\n\n  NVL(WM_CONCAT(CL_RANGE),'') as CL_TAKEN_DATE,    \n\n  case when NVL(SUM(CL2),0)&lt;0 then 0 else (NVL(SUM(CL2),0)) end as CL_BALANCE,\n\nfrom\n(     \nSELECT DISTINCT a.employee_code,\n    a.EMPLOYEE_FIRST_NAME || ' ' || a.EMPLOYEE_LAST_NAME as EMPLOYEE_NAME,\n    a.DEPARTMENT_CODE,\n    a.DEPARTMENT_DESC,\n    B.LEAVE_TYPE_CODE,\n    B.LVE_UNITS_APPLIED,\n    B.CREATED_DATE as CREATED_DATE,\n\n    DECODE(b.leave_type_code,'CL',SSHRMS_LVE_BUSINESSDAY(L_BUSINESS_UNIT,to_char(b.lve_from_date,'mm/dd/yyyy'), to_char(b.lve_to_date,'mm/dd/yyyy'))) CL_RANGE,\n\n    DECODE(B.LEAVE_TYPE_CODE,'CL',B.LVE_UNITS_APPLIED)CL1,\n    b.status\n\nfrom SSHRMS_EMPLOYEE_DATA a \n    join \n    SSHRMS_LEAVE_BALANCE C \n    on a.EMPLOYEE_CODE = C.EMPLOYEE_CODE\n     and  C.STATUS = 'Y'\n    left join \n    SSHRMS_LEAVE_REQUEST_TRN B\n    on\n    B.EMPLOYEE_CODE=C.EMPLOYEE_CODE  \n    and c.EMPLOYEE_CODE = b.EMPLOYEE_CODE\n    and B.LEAVE_TYPE_CODE = C.LEAVE_TYPE_CODE\n    and B.STATUS in ('A','P','C')  \n    and (B.LVE_FROM_DATE &gt;= TO_DATE(L_FROM_DATE, 'DD/MON/RRRR')\n    and B.LVE_TO_DATE &lt;= TO_DATE(L_TO_DATE, 'DD/MON/RRRR'))\n    join\n    SSHRMS_LEAVE_REQUEST_TRN D\n    on a.EMPLOYEE_CODE = D.EMPLOYEE_CODE\n    and D.LEAVE_TYPE_CODE in ('CL')\n    AND D.LEAVE_TYPE_CODE IS NOT NULL\n\n)\n\ngroup by EMPLOYEE_CODE, EMPLOYEE_NAME, DEPARTMENT_CODE, DEPARTMENT_DESC, CREATED_DATE\n;\nelse\nv_return_msg:='Field should not be empty';\n end if;\nEND;\n</code></pre>\n\n<p>my code actual output</p>\n\n<hr>\n\n<h2>EMPLOYEE_CODE|  Name  | CL_TAKEN_DATE  | CL_BALANCE</h2>\n\n<p>100001....................John............02-OCT-12.................6</p>\n\n<p>100001....................chris...........01-OCT-12.................4</p>\n\n<hr>\n\n<p>how to add column dynamically based on from_date to to_date?</p>\n\n<p>Thanks and Regards,</p>\n\n<p>Chris Jerome.</p>\n"},{"tags":["sql","oracle","database-partitioning"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13152338,"title":"Range partition table creation with large number of paritions","body":"<p>i have to create an range partitioned table with two hundred partitions. for eg:</p>\n\n<pre><code>CREATE TABLE emp (\n     empno NUMBER(4), \n     ename VARCHAR2(30), \n     sal   NUMBER\n) \nPARTITION BY RANGE(empno) (\npartition e1 values less than (1000)     , \npartition e2 values less than (2000)     , \n...\npartition e200 values less than (MAXVALUE) \n</code></pre>\n\n<p>);</p>\n\n<p>Is there a way to specify the range interval without writing two hundred lines for just specifing the range?</p>\n"},{"tags":["php","oracle","stored-procedures"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13172061,"title":"PHP - how to catch response from oracle procedure?","body":"<p>all. I have a question about catching a response from oracle procedure..\nThat is my procedure :</p>\n\n<pre><code>PROCEDURE generate_receipt_simop(in_receipt_number IN VARCHAR2, in_inv_status IN VARCHAR2, in_kode_cabang IN VARCHAR2, out_status OUT VARCHAR2, out_message OUT VARCHAR2)is\nv_result_simop              NUMBER  DEFAULT 0;\nout_status_simop            VARCHAR2(100)   DEFAULT NULL;\nout_errormessage_simop      VARCHAR2(100)   DEFAULT NULL;\nv_org_id                    NUMBER  DEFAULT 0;\n\nBEGIN    \n************\nEXCEPTION WHEN OTHERS THEN\n        logf('ROLLBACK (RECEIPT)');\n        ROLLBACK;\n        out_status     := 'F';\n        out_message    := 'GENERATE FAILED (RECEIPT) '|| in_receipt_number ||SQLERRM;          \n    END; \n</code></pre>\n\n<p>I try to call and read a response using php, like this :</p>\n\n<pre><code>$param_xpi= array(\n                        \"in_receipt_number\"=&gt;\"$x\",\n                        \"in_receipt_status\"=&gt;\"Y\",\n                        \"in_kode_cabang\"=&gt;\"PTK\",\n                        \"out_status\"=&gt;\"\",\n                        \"out_message\"=&gt;\"\"\n                        );\n\n            $sql_xpi = \"DECLARE\n            in_receipt_number VARCHAR2(50) DEFAULT '$x';\n            in_kode_cabang VARCHAR2(3) DEFAULT 'PTK';\n            out_status VARCHAR2(1) DEFAULT '';\n            out_message VARCHAR2(240) DEFAULT '';\n            in_inv_status VARCHAR2(1) DEFAULT 'Y';\n            BEGIN\n            XPI2.XPI2_AR_API_RECEIPT_PKG.generate_receipt_simop(in_receipt_number, in_inv_status, in_kode_cabang, out_status, out_message);\n            dbms_output.put_line('Generate Status : ' || out_status);\n            dbms_output.put_line('Message Status : ' || out_message);\n            END;\";\n\n            $result = $db_simkeu-&gt;query($sql_xpi, $param_xpi);\n\n            print_r($result);\n\n            $out_status1 = $param_xpi['out_status'];\n            $out_message = $param_xpi['out_message'];\n</code></pre>\n\n<p>But, variable $out_status1 and $out_message is always null. I think something wrong with my method to listen a response at this php code.\nPlease, help</p>\n\n<p>Thanks for answer.</p>\n"},{"tags":["oracle","select","if-statement"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13173241,"title":"IF-ELSE issue in Select Statement in Oracle","body":"<p>I have following query in SQL Server which I am trying to convert to Oracle 11g.</p>\n\n<pre><code>IF '[Param.1]' = 'S' OR '[Param.1]' = 'T' THEN\nselect * from ULQUEUE\nEND IF\n</code></pre>\n\n<p>But when I write the same query in Oracle, it gives error stating Invalid SQL Statement. So how do I incorporate IF-ELSE in Select Statement in Oracle?</p>\n"},{"tags":["oracle","plsql"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13152593,"title":"Procedures in PLSQL using ORACLE DB","body":"<pre><code>CREATE OR REPLACE PROCEDURE ABC ( REG_NO   IN  CO_ENROLMENT.S_REGNO%TYPE,\n                                  TERM     IN  COURSEOFFERING.CO_TERMNUMBER%TYPE,\n                                  YEAR     IN  COURSEOFFERING.CO_YEAR%TYPE,\n                                  CO_TITLE IN  COURSE.C_TITLE%TYPE,\n                                  EN_DATE  OUT CO_ENROLMENT.COE_ENROLDATE%TYPE,\n                                  COM_ST   OUT CO_ENROLMENT.COE_COMPLETIONSTATUS%TYPE)\n\nAS \nBEGIN\n   SELECT M.COE_COMPLETIONSTATUS, M.COE_ENROLDATE \n     INTO COM_ST, EN_DATE\n     FROM COURSEOFFERING O\n    INNER JOIN COURSE C\n            ON C.C_ID = O.C_ID\n    INNER JOIN CO_ENROLMENT M\n            ON M.CO_ID = O.CO_ID\n    WHERE M.S_REGNO LIKE REG_NO AND\n          O.CO_TERMNUMBER LIKE TERM AND\n          O.CO_YEAR LIKE YEAR AND\n          C.C_TITLE LIKE CO_TITLE;\nEND ABC;\n</code></pre>\n\n<p>I have written down above procedure. \nBelow is PL/SQL block to call above procedure,</p>\n\n<pre><code>DECLARE\n  COMPL_STATUS   CO_ENROLMENT.COE_COMPLETIONSTATUS%TYPE;\n  ENROL_DATE     CO_ENROLMENT.COE_ENROLDATE%TYPE;\nBEGIN\n  ABC (44444444, 2009, 2, 'PLSQL Programming', \n       EN_DATE =&gt; enrol_date, COM_ST =&gt;compl_status);\n  DBMS_OUTPUT.PUT_LINE ('STUDENT COMPLETION STATUS AND ENROLMENT DATE IS ' \n                         || ENROL_DATE\n                         || '    ' \n                         || compl_status );\nEND;\n</code></pre>\n\n<p>It returns me error as no data found, but when I run query separately I get the output. I couldn't figure out what is wrong. Did I wrote procedure block correctly and Parameters passed in PL/SQL block are correct?</p>\n"},{"tags":["sql","oracle","oracle11g","pivot"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13173242,"title":"Sql: How do i write a query to show the values in the table to be column names?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4841718/oracle-sql-pivot-query\">Oracle SQL pivot query</a>  </p>\n</blockquote>\n\n\n\n<p>I am using oracle 11g . I have requirement to write a sql script using the following table budget</p>\n\n<pre><code>budget_id   resource_id   expense_month   \n      1           1        apr-2012\n      2           1        mar-2012\n</code></pre>\n\n<p>and I have another table called budget line</p>\n\n<pre><code>budget_line_id  budget_id   category_id  amount\n    1             1           1           100\n    2             1           2           200\n</code></pre>\n\n<p>Now I have to combine both these table and show a result such that the when i choose a particular fiscal-year(ex:2012-2013) , category_id and a resource_id only the information about the particular resource in the fiscal_year should be shown .  Fiscal year is from April to March</p>\n\n<p>On choosing resource_id and fiscal_year\nI should show a result as this</p>\n\n<pre><code>april  may  june  july ............ march  total\n 100   100   100   100               100    1200\n</code></pre>\n\n<p>Thanks in advance.</p>\n\n<p>Kindly ignore my bad english</p>\n"},{"tags":["oracle","stored-procedures","plsql","oracle10g","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13172779,"title":"encountered the symbol \"end\" when expecting one of the following","body":"<p>In the below procedure i did something wrong and im not getting where i went wrong getting \"encountered the symbol \"end\" when expecting one of the following \" Please help me and explain with wat is wrong in the procedure.</p>\n\n<pre><code>create or replace PROCEDURE CRangeproc(in_termid IN VARCHAR2,in_cardno IN VARCHAR2,p_ResultSet OUT SYS_REFCURSOR,outcount OUT NUMBER)\nAS \nBEGIN \nselect count(*) into outcount from cardrangetable where PAN_LOW &lt;= in_cardno AND  PAN_HIGH &gt;=   in_cardno and terminal_id = in_termid;\nIF outCount = 1 then\nOpen p_ResultSet FOR    \nselect ISSUERTABLEID,ACQUIRERTABLEID,PANLENGTH from cardrangetable where PAN_LOW &lt;= in_cardno  AND  PAN_HIGH &gt;= in_cardno and terminal_id = intermid;\nCLOSE p_ResultSet;\nelse\nend if; \nEnd CRangeproc;\n</code></pre>\n\n<p>Thanks in advance</p>\n"},{"tags":["sql","oracle","oracle9i"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13172234,"title":"SQL want to log values before and after update table","body":"<p>I have a problem here.</p>\n\n<p>DB: oracle 9i</p>\n\n<p>I want to save data changes after I execute <code>UPDATE</code> script on my table,\nin that log I want to compare old values with new values.</p>\n\n<p>How can i do this.</p>\n\n<p>thanks for helping me :)</p>\n"},{"tags":["oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13170027,"title":"Oracle 11g error ORA-12518","body":"<p>When I logon oracle through PL/SQL at local, I got the error ORA-12518, what's wrong with it, I try to restart listener, It's no use, my operation system is window32, anyone can help me? thanks.</p>\n\n<p>I also set direct_handoff_ttc_listener=OFF in listener.ora</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13169830,"title":"Exclude value of a record in a group if another is present v2","body":"<p>In the example table below, I'm trying to figure out a way to sum amount over marks in two situations: the first, when mark 'C' exists within a single id, and the second, when mark 'C' doesn't exist within an id (see id 1 or 2). In the first situation, I want to exclude the amount against mark 'A' within that id (see id 3 in the desired conversion table below). In the second situation, I want to perform no exclusion and take a simple sum of the amounts against the marks. </p>\n\n<p>In other words, for id's containing both mark 'A' and 'C', I want to make the amount against 'A' as zero. For id's that do not contain mark 'C' but contain mark 'A', keep the original amount against mark 'A'.</p>\n\n<p>My desired output is at the bottom. I've considered trying to partition over id or use the EXISTS command, but I'm having trouble conceptualizing the solution. If any of you could take a look and point me in the right direction, it would be greatly appreciated :)</p>\n\n<p>example table:</p>\n\n<pre><code>id   mark  amount\n------------------\n1    A     1\n2    A     3\n2    B     2\n3    A     1\n3    C     3\n</code></pre>\n\n<p>desired conversion:</p>\n\n<pre><code>id   mark  amount\n------------------\n1    A     1\n2    A     3\n2    B     2\n3    A     0\n3    C     3\n</code></pre>\n\n<p>desired output:</p>\n\n<pre><code>mark    sum(amount)\n--------------------\nA       4\nB       2\nC       3\n</code></pre>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13170043,"title":"Regular Expressions in Oracle 9i","body":"<p>Hi Can any body please help me out , My scenario is  </p>\n\n<pre><code>select to_number(((replace('1*Students', 'Students','60')))) \n  from dual;  \n</code></pre>\n\n<p>If I used like this , Invalid Number error is coming.<br>\nHow to convert to number and it should display the result as \"60\", Please help me out, I stacked. Thanks a ton in advance</p>\n"},{"tags":["oracle","oracle10g"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":42,"score":1,"question_id":13169431,"title":"How to insert date in a specific format into a table in oracle","body":"<p>How can I insert the date into a table in a specific format like 'yyyy-mm-dd' and I need to retrieve values of the date column in the specified format mentioned above using <code>select</code> statement in which I should not use <code>to_date</code> or <code>to_char</code> conversion.</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":13160563,"title":"remove a varchar2 string from the middle of table data values","body":"<p>Data in the file_name field of the generation table should be an assigned number, then _01, _02, or _03, etc. and then .ldf (example 82617_01.pdf). </p>\n\n<p>Somewhere, the program is putting a state name and sometimes a date/time stamp, between the assigned number and the 01, 02, etc. (82617_ALABAMA_01.pdf or 19998_MAINE_07-31-2010_11-05-59_AM.pdf or 5485325_OREGON_01.pdf for example). </p>\n\n<p>We would like to develop an SQL statement to find the bad file names and fix them.  In theory it seems rather simple to find file_names that include a varchar2 data type and remove it, but putting the statement together is beyond me.</p>\n\n<p>Any help or suggestions apprecuiated.</p>\n\n<p>Something like ...........</p>\n\n<p>UPDATE GENERATION</p>\n\n<p>SET FILE_NAME (?)</p>\n\n<p>WHERE FILE_NAME (?...LIKE '%STRING%');?</p>\n"},{"tags":["oracle","generics","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":46,"score":3,"question_id":13157392,"title":"Dynamic typing or generics in Oracle PL/SQL","body":"<p>For some reason, I have certain fields in a table, that are collections of chars. Chars of different length. Example:</p>\n\n<pre><code>create or replace type t_charray_1 as varray(5) of char(1);\ncreate or replace type t_charray_2 as varray(5) of char(2);\ncreate or replace type t_charray_3 as varray(5) of char(3);\ncreate or replace type t_charray_4 as varray(5) of char(4);\n\ncreate table mytable (\nfield1 number,\nfield2 t_charray_1,\nfield3 t_charray_3,\n</code></pre>\n\n<p>Also, I have a function that returns a (fixed length) string representation of a <code>mytable</code> record. This function calls other functions that are returning the string representation of a given collection-typed field. Examples:</p>\n\n<pre><code>  function to_chr(\n    p_array in t_charray_1, \n    pad_length in number, \n    p_list_length in number\n  ) return char as\n    v_res varchar2(255) := '';\n  begin\n    for i in 1 .. p_list_length loop\n      if p_array is not null and p_array.exists(i) and p_array(i) is not null then\n        v_res := v_res || rpad(p_array(i), pad_length, ' ');\n      else\n        v_res := v_res || rpad(' ', pad_length, ' ');\n      end if;\n    end loop;\n    return v_res;\n  end to_chr;\n  ------------------------------------------------------------------------------\n  function to_chr(\n    p_array in t_charray_2, \n    pad_length in number, \n    p_list_length in number\n  ) return char as\n    v_res varchar2(255) := '';\n  begin\n    for i in 1 .. p_list_length loop\n      if p_array is not null and p_array.exists(i) and p_array(i) is not null then\n        v_res := v_res || rpad(p_array(i), pad_length, ' ');\n      else\n        v_res := v_res || rpad(' ', pad_length, ' ');\n      end if;\n    end loop;\n    return v_res;\n  end to_chr;\n</code></pre>\n\n<p>Note that these functions are <em>overloaded</em> versions of each other. The only difference in their signature is the type of the <code>p_array</code> argument.</p>\n\n<p>Please also note that <em>the bodies of these functions are identical</em>.</p>\n\n<p><strong>Motivation</strong></p>\n\n<p>I want to eliminate duplicate code. What are my choices?</p>\n\n<p><strong>EDIT</strong> I have heard of sys.anydata but never used it. Can it be a solution?</p>\n"},{"tags":["oracle","date","timestamp","dateformat"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":14461,"score":2,"question_id":4633271,"title":"how to insert current date into a DATE field in dd/mm/yyyy format in oracle","body":"<p>I have a field in my table with datatype as DATE in Oracle.\nI want to insert the current date into that field, in format DD/MM/YYYY format.</p>\n\n<p>I tried the below query:</p>\n\n<pre><code>select to_date(to_char(sysdate,'dd/mm/yyyy'),'dd/mm/yyyy') from dual\n</code></pre>\n\n<p>But it gives 1/8/2011 12:00:00 AM.</p>\n\n<p>I want it to insert and show as 08/01/2011 12:00:00 AM.</p>\n\n<p>Can anyone help me in this please ?</p>\n"},{"tags":["oracle","datapump"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13169375,"title":"Oracle Data Pump export includes incorrect sequences","body":"<p>Recently, we took a live/online backup of our production database, by issuing the following command:</p>\n\n<pre><code>expdp system/******@SID FULL=y DIRECTORY=data_pump_dir DUMPFILE=full_prod.dmp LOGFILE=full_prod_export.log JOB_NAME=prod_backup\n</code></pre>\n\n<p>There were no errors nor warnings.</p>\n\n<p>We then took this dump and created a number of developer databases from it, by issuing:</p>\n\n<pre><code>impdp system/******@SID SCHEMAS=MY_SCHEMA DIRECTORY=data_pump_dir DUMPFILE=full_prod.dmp LOGFILE=full_prod_import.log\n</code></pre>\n\n<p>Again, no errors nor warnings.</p>\n\n<p>Once the developer environments were set-up, the developers launched their applications and tried to insert some test data. The first few attempts failed with primary key violations. After a bit of digging, it turns out that the cached sequences (NOCACHE sequences were fine) were generally behind by one or two values.</p>\n\n<p>An example is the sequence for our contact table:</p>\n\n<pre><code>CREATE SEQUENCE REQ_CONTACT_SEQ\nSTART WITH 213041\nMAXVALUE 999999999999999999999999999\nMINVALUE 1\nNOCYCLE\nCACHE 20\nNOORDER;\n</code></pre>\n\n<p>Oracle shows a <em>last cached value</em> of 213041 for this sequence. Now, when I run the following query:</p>\n\n<pre><code>SELECT MAX(id) FROM REQ_CONTACT;\n</code></pre>\n\n<p>Oracle returns <code>213042</code>. It's obvious that this value is 1 higher than the sequence.</p>\n\n<p>So.... My question is, did we only get this result because we took the Data Export while production was live - ie there were open and active connections to the database? Or does Data Pump have a problem with sequences that are cached? We are using Oracle 10.2.0.4.</p>\n\n<p>Thanks,\nMuel.</p>\n"},{"tags":["oracle","query","reporting-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13169095,"title":"SSRS BIDS Error when executing oracle query (This command is not supported by this provider)","body":"<p>I am creating a SSRS report which directly gets the data from oracle. </p>\n\n<p>When i run this query in the \"query designer\" then i am getting an error saying</p>\n\n<p>\"This Command is not supported by this provider\".</p>\n\n<p>I had tried using 'Oracle' and 'OLEDB' connection types but they didn't worked.</p>\n\n<p>I am using Microsoft Visual Studio 2008.</p>\n\n<p>Please advise me on this</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13168557,"title":"SQL Oracle Combining Multiple Results Rows","body":"<p>I have the below query</p>\n\n<pre><code>Select \ncase upper(device_model)\n        when 'IPHONE' then 'iOS - iPhone'\n        when 'IPAD' then 'iOS - iPad'\n        when 'IPOD TOUCH' then 'iOS - iPod Touch'\n        Else 'Android'\n        End As Device_Model,\ncount(create_dtime) as Installs_Oct17_Oct30\nFrom Player\nWhere Create_Dtime &gt;= To_Date('2012-Oct-17','yyyy-mon-dd')\nAnd Create_Dtime &lt;= To_Date('2012-Oct-30','yyyy-mon-dd')\nGroup By Device_Model\nOrder By Device_Model\n</code></pre>\n\n<p>This spits out multiple rows of results that read \"Android\"....I would like there to be only 4 results rows, one for each case....so it comes out like this:</p>\n\n<pre><code>Device_Model     Installs_Oct17_Oct30\nAndroid            987\niOS - iPad         12003\niOS - iPhone       8563\niOS- iPod Touch    3482\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13167948,"title":"Exclude value of a record in a group if another is present","body":"<p>In the example table below, I'm trying to figure out a way to sum amount over id for all marks where mark 'C' doesn't exist within an id. When mark 'C' does exist in an id, I want the sum of amounts over that id, excluding the amount against mark 'A'. As illustration, my desired output is at the bottom. I've considered using partitions and the EXISTS command, but I'm having trouble conceptualizing the solution. If any of you could take a look and point me in the right direction, it would be greatly appreciated :)</p>\n\n<p>sample table:</p>\n\n<pre><code>id   mark  amount\n------------------\n1    A     1\n2    A     3\n2    B     2\n3    A     2\n4    A     1\n4    B     3\n5    A     1\n5    C     3\n6    A     2\n6    C     2\n</code></pre>\n\n<p>desired output:</p>\n\n<pre><code>id   sum(amount)\n-----------------\n1    1\n2    5\n3    2\n4    4\n5    3\n6    2\n</code></pre>\n"},{"tags":["sql","oracle","ejb-3.0","bind-variables"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13165356,"title":"binding variables in an EJB query IN clause","body":"<p>Is it possible to bind a list in an EJB IN clause like this?</p>\n\n<pre><code>Query query = myEntitymanager.createNativeQuery(\"SELECT e FROM EntityName e WHERE e.id IN (:ids)\");\n//ids is a List of Long\nquery.setParameter(\"ids\", ids);\nresult = query.getResultSet();\n</code></pre>\n\n<p>Thank you for your help.</p>\n"},{"tags":["django","oracle","django-models","cx-oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13164189,"title":"Django produce sql with table name different then specified in meta db_table","body":"<p>I'm using django 1.4 with oracle backend</p>\n\n<p>In my models.py I have:</p>\n\n<pre><code> class ProteinTherapeutics(models.Model):\n#...\n    class Meta:\n        db_table = 'mnowotka\\\".\\\"protein_therapeutics'\n        managed=False\n</code></pre>\n\n<p>And this:</p>\n\n<pre><code>ProteinTherapeutics.objects.exists()\n</code></pre>\n\n<p>produces this SQL:</p>\n\n<pre><code>SELECT *\nFROM\n  (SELECT ROWNUM AS \"_RN\",\n          \"_SUB\".*\n   FROM\n     (SELECT (1) AS \"A\"\n      FROM \"MNOWOTKA\".\"PROTEIN_THERAPEFB7C\") \"_SUB\"\n   WHERE ROWNUM &lt;= 1)\nWHERE \"_RN\" &gt; 0  [1.99ms]\n</code></pre>\n\n<p>Can you help me, please?</p>\n"},{"tags":["oracle","jinitiator"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":7815,"score":2,"question_id":11752191,"title":"Oracle JInitiator version too low","body":"<p>When I Open a page in my intranet portal, I get a window with the following message</p>\n\n<blockquote>\n  <p>FRM - 92095: Oracle JInitiator version too low.\n  Please install version 1.1.8.2 or higher</p>\n</blockquote>\n\n<p>I have installed JInitiator 1.1.8.16 and JInitiator 1.3.1.30. But I get the same error message.</p>\n\n<p>Any solution to this???</p>\n"},{"tags":["sql","xml","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":128,"score":0,"question_id":7486156,"title":"Update and deleteXML for mutiple rows at same time creates a deadlock","body":"<pre><code>update table X \n   set Y = deleteXML (Y, '/attributes/attribute/properties');\n</code></pre>\n\n<p>This syntax seems to be correctly applied in Oracle to delete a node from the XML root tree and update but my query never finished and this locks the resources in the database. How i can improve this?</p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12595513,"title":"oracle analytics how to return this rows","body":"<p>I am writing this query for DWH purpose.</p>\n\n<pre><code>SELECT \n   YEAR\n  ,MONTH\n  ,WEEK\n  ,C.CPG_PK         CPG\n  ,C.DEP_PK         DEPT\n  ,T.CUST_ID        CUST_ID\n  ,D1.R_ID          R_ID\n  ,Decode(d2.AT_CODE,'3',FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE))    AS P1\n  ,decode(d2.AT_CODE,'2',FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE))    AS IC\n  ,decode(d2.AT_CODE,'1',FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE))    AS B1\n  ,decode(FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE), 2 , d2.AT_CODE)    AS P2\n  ,decode(FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE), 5 , d2.AT_CODE)    AS B2\n  ,COUNT(DISTINCT A.CUST_ID)         TOTAL_ACC\n  ,COUNT(DISTINCT T.TXN_PK)          TOTAL_TXN\n  ,SUM(AM_AMOUNT)                    TOTAL_AMT\nFROM T_HEADER  T\n    ,CUST_MASTER A \n    ,TX_DETAILS1 D1\n    ,TX_DETAILS2 D2\n    ,CPG_MASTER C\nWHERE   A.TYPE  =  0      \nAND     T.CUST_ID = A.CUST_ID\nAND     T.TXN_PK= 5001\nAND     T.TXN_PK= D1.TXN_PK\nAND     T.TXN_PK= D2.TXN_PK\nAND     D1.CPG_PK = C.CPG_PK\nAND     D1.OP = 1 \nGROUP BY \n YEAR\n,MONTH\n,WEEK\n,C.CPG_PK\n,C.DEP_PK\n,t.CUST_ID \n,D1.R_ID\n,Decode(d2.AT_CODE,'3',FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE))\n,decode(d2.AT_CODE,'2',FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE))\n,decode(d2.AT_CODE,'1',FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE))\n,decode(FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE), 2 , d2.AT_CODE)\n,decode(FUNC1.GET_ATT(d2.AT_CODE,D2.VAL_CODE), 5 , d2.AT_CODE)\n</code></pre>\n\n<p>the generated output as follows </p>\n\n<pre><code>YEAR    MONTH   WEEK    CPG DEPT    CUST_ID R_ID    P1  IC  B1  P2  B2  TOTAL_ACC   TOTAL_TXN   TOTAL_AMT\n2012    08  32  127 -1  10019   3665                    134 1   1   \n2012    08  32  127 -1  10019   3665                    135 1   1   \n2012    08  32  127 -1  10019   3665            723         1   1   \n2012    08  32  127 -1  10019   3665        714             1   1   \n2012    08  32  127 -1  10019   3665    21                  1   1   \n2012    08  32  128 -1  10019   3665                    134 1   1   \n2012    08  32  128 -1  10019   3665                    135 1   1   \n2012    08  32  128 -1  10019   3665            723         1   1   \n2012    08  32  128 -1  10019   3665        714             1   1   \n2012    08  32  128 -1  10019   3665    21                  1   1   \n</code></pre>\n\n<p>here the values are repeating i tried with possible group by. </p>\n\n<p>the required ouput is </p>\n\n<pre><code>YEAR    MONTH   WEEK    CPG DEPT    CUST_ID R_ID    P1  IC  B1  P2  B2  TOTAL_ACC   TOTAL_TXN   TOTAL_AMT\n2012    08  32  127 -1  10019   3665    21  714 723     134 1   1   \n2012    08  32  127 -1  10019   3665    21  714 723     135 1   1   \n2012    08  32  128 -1  10019   3665    21  714 723     134 1   1   \n2012    08  32  128 -1  10019   3665    21  714 723     135 1   1   \n</code></pre>\n\n<p>the main thing is year,month,week,cpg,dept,cust_id,r_id ,p1,ic,b1,p2,b2 it should be unique row. Is it achievable using analytical functions or do I need to write <code>pl/sql</code></p>\n"},{"tags":["sql","oracle","triggers"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":4,"view_count":54,"score":-3,"question_id":13138264,"title":"Why the column is not modified in the trigger?","body":"<pre><code>CREATE TABLE EMP\n(\n  EMP_ID      NUMBER PRIMARY KEY,\n  SALARY      NUMBER,\n  OLD_SALARY  NUMBER\n);\n\n\nCREATE OR REPLACE TRIGGER UPDATE_SALARY\nAFTER UPDATE ON EMP\nFOR EACH ROW\nDECLARE\nPRAGMA AUTONOMOUS_TRANSACTION;\nBEGIN\n   UPDATE EMP SET OLD_SALARY = :OLD.SALARY WHERE EMP_ID = :OLD.EMP_ID;\n   COMMIT;\nEXCEPTION\nWHEN OTHERS THEN NULL;\nEND UPDATE_SALARY;\n</code></pre>\n\n<p>Why the column <code>old_salary</code> is not modified ?</p>\n"},{"tags":["oracle","web"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13164041,"title":"Unable to upload any ADI template into oracle","body":"<p>I am not to much of a geek but I have a user that cannot add an ADI template into oracle, hey said that he downloaded the web ADI journal to his computer and installed it. The thing is I connected remotely to his computer and since I do not understand too much of Oracle, apparently the user log in to his oracle account and download a template which opens in an excel sheet. After this, since he is using office 2007, in the excel sheet on the tabs section there must be an \"Addin\" tab which will allow her to use the options from the wed adi journal she just installed. But that tab doesn't appear and I don't know how to make it appear. Is there anyone who could help me with this problem?</p>\n"},{"tags":["oracle","plsql","oracle11g"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":13162728,"title":"Declare var as date in PL/SQL","body":"<p>I am curious why PL/SQL does not let me declare a var as datetime and what my alternatives are.  I am using Oracle 11.</p>\n\n<pre><code>VARIABLE some_date date;\n</code></pre>\n\n<p>And I get the following error message indicating legal types for a var, date not being included:</p>\n\n<pre><code> Usage: VAR[IABLE] [ &lt;variable&gt; [ NUMBER | CHAR | CHAR\n(n [CHAR|BYTE]) |\nVARCHAR2 (n [CHAR|BYTE]) | NCHAR | NCHAR (n) |\nNVARCHAR2 (n) | CLOB | NCLOB | REFCURSOR |\nBINARY_FLOAT | BINARY_DOUBLE ] ]\n</code></pre>\n\n<p>I can probably work around this issue by simulating the date as a string or long representation but I'm really curious why this is the case.</p>\n\n<p>Thanks</p>\n"},{"tags":["sql","database","oracle","plsql","plsqldeveloper"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":59,"score":0,"question_id":13158067,"title":"Enter the loop based on user parameter","body":"<p>There are 4 parameters .material,Suppliernbr,Suppliername,Materail code.My query is if the user enters any of the parameter with a single value in a single parameter i need to enter into the loop.</p>\n\n<pre><code>For Eg:\nP_suppname='stack'\np_matrl='NULL'\np_suppnbr:=NULL\nP_mtrlcde='NULL' I can go inside \n</code></pre>\n\n<p>But if </p>\n\n<pre><code>P_suppname=NULL\np_matrl=211\np_suppnbr:=43443443\nP_mtrlcde='NULL' I shouldnt go.\n</code></pre>\n\n<p>ALSO </p>\n\n<pre><code>P_suppname=NULL\np_matrl='211;2322'\np_suppnbr:=NULL\nP_mtrlcde='NULL' I should nt go\n</code></pre>\n\n<p>How to do this??</p>\n"},{"tags":["sql","django","oracle","unit-testing","django-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13162771,"title":"django how to see sql query when running tests?","body":"<p>One of my django application unit test fails with</p>\n\n<pre><code>DatabaseError: ORA-00942: table or view does not exist\n</code></pre>\n\n<p>I would like to see actual SQL query that caused this error. Do you know how to achieve that?</p>\n"},{"tags":["sql","oracle","oracle10g"],"answer_count":6,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":474,"score":4,"question_id":8169471,"title":"How to count number of occurences of a character in a varchar?","body":"<p>How can I count number of occurrences of the character <code>-</code> in a varchar2 string?</p>\n\n<p>Example:</p>\n\n<pre>\nselect XXX('123-345-566', '-') from dual;\n----------------------------------------\n2\n</pre>\n"},{"tags":["oracle","stored-procedures","concurrency"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13154137,"title":"Oracle Procedure: concurrency and CLOB variable","body":"<p>I have following snippet in a stored procedure. The procedure is called from an insert trigger.</p>\n\n<pre><code>v_ProdName VARCHAR2(250);\nv_ID VARCHAR2(50);\nv_Clob CLOB;\n-- ....\nSELECT      \n   MY_TABLE.ID, \n   MY_TABLE.PRODNAME, \n   MY_TABLE.MY_CLOB   \n  INTO\n   v_ID,\n   v_ProdName,\n   v_Clob\n  FROM   \n-- ...\n</code></pre>\n\n<p>Afterwards those 3 variables are used in a call to a function and that function (3rd party) inserts a new record.</p>\n\n<p>This works. However there is an issue with the CLOB insert above. If multiple rows are inserted quickly after each other (example: import from csv with sql developer \"insert\" method\" or WebMethod; I assume inserts happen in same transaction) the CLOB has for all rows the value of the first inserted rows. All others (eg id, ProdName) have the correct value.</p>\n\n<p>Therefore it seems the Clob is somehow cached. Is that true? How can I fix that behavior?</p>\n\n<p>EDIT:</p>\n\n<p>Example:</p>\n\n<pre><code>DECLARE\n\n-- ... variables\n    v_id varchar2(15);\n\nBEGIN\n\n-- assign values to vars, one of them is an ID on which CLOB is selected\n    -- in the procedure\n    v_id := '754-56-4';\n\nmy_procedure(v_id, args);\n\n    -- if this commit in un-commented, it works as expected.\n    -- eg. the 2 inserted rows have different values for the clob field\n-- COMMIT;\n\n\n-- assign other values to vars especially different id\n    -- -&gt; result should have a different value in CLOB field        \n    v_id := '5356-97-6';\n\nmy_procedure(v_id, args);\n\nEND;\n</code></pre>\n\n<p>Note that all other fields selected based in v_id have the correct value regardless if the COMMIT is made or not! So it is an issue with CLOB not the procedure!!!</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13162220,"title":"View from 2 tables and 2 record from another","body":"<p>I have table SOME_TABLE with column SOME_ID.\nI also have table ANOTHER_TABLE with column SOME_TABLE_SOME_ID (FOREIGN KEY), TYPE, CONTENT</p>\n\n<p>There is 1 or 2 records in ANOTHER_TABLE for one record in SOME_TABLE.</p>\n\n<p>I would like to have view as below:</p>\n\n<pre><code>SOME_ID, CONTENT_TYPE_A, CONTENT_TYPE_B\n</code></pre>\n\n<p>I have sql statement:</p>\n\n<pre><code>SELECT\nST.SOME_ID,\nTYPE_A.CONTENT CONTENT_TYPE_A, \nTYPE_B.CONTENT CONTENT_TYPE_B\nFROM SOME_TABLE ST\nLEFT OUTER JOIN ANOTHER_TABLE TYPE_A\nON ST.SOME_ID=TYPE_A.SOME_TABLE_SOME_ID \nLEFT OUTER JOIN ANOTHER_TABLE TYPE_B\nON ST.SOME_ID=TYPE_B.SOME_TABLE_SOME_ID \nWHERE\nTYPE_A.TYPE = 'A'\nAND\nTYPE_B.TYPE = 'B'\n</code></pre>\n\n<p>This query returns only results for SOME_TABLE if both records in ANOTHER_TABLE exist (with TYPE='A' and TYPE='B').</p>\n\n<p>How to get view when for corresponding SOME_TABLE record exist only 1 record in ANOTHER_TABLE?</p>\n\n<p>I would like to have null value in CONTENT_TYPE_A or CONTENT_TYPE_B when there is now record.</p>\n"},{"tags":["oracle","jms","websphere","websphere-mq","xa"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":142,"score":1,"question_id":12608664,"title":"xa_commit failed when trying to commit jms transaction","body":"<p>We are trying to write a message to a broker queue. But the whole request fails when it tries to commit the JMS transaction &amp; then it tries to rollback each subsequent time. We use oracle XA drivers. Not sure where to post this issue: MQ forums or Oracle forum. So thought would give a try here. Can someone help resolve this please.</p>\n\n<p>Error:</p>\n\n<pre><code>[9/25/12 17:10:06:871 EDT] 0000003e XATransaction E   J2CA0027E: An exception occurred while invoking commit on an XA Resource Adapter from dataSource JMS$QCF$JMSManagedConnection@23, within transaction ID {XidImpl: formatId(57415344), gtrid_length(36), bqual_length(54), data(00000139ff43ef2500000001000043106c82332ef6bc723402e84f341fb357080ddd4d1b00000139ff43ef2500000001000043106c82332ef6bc723402e84f341fb357080ddd4d1b000000010000000000000000000000000001)}: javax.transaction.xa.XAException: The method 'xa_commit' has failed with errorCode '-7'.\n    at com.ibm.mq.jmqi.JmqiXAResource.commit(JmqiXAResource.java:407)\n    at com.ibm.ejs.jms.JMSManagedSession$JMSXAResource.commit(JMSManagedSession.java:1702)\n    at com.ibm.ejs.j2c.XATransactionWrapper.commit(XATransactionWrapper.java:463)\n    at com.ibm.ws.Transaction.JTA.JTAXAResourceImpl.commit_one_phase(JTAXAResourceImpl.java:305)\n    at com.ibm.ws.Transaction.JTA.RegisteredResources.flowCommitOnePhase(RegisteredResources.java:2916)\n    at com.ibm.ws.Transaction.JTA.TransactionImpl.commitXAResources(TransactionImpl.java:2533)\n    at com.ibm.ws.Transaction.JTA.TransactionImpl.stage1CommitProcessing(TransactionImpl.java:1687)\n    at com.ibm.ws.Transaction.JTA.TransactionImpl.processCommit(TransactionImpl.java:1647)\n    at com.ibm.ws.Transaction.JTA.TransactionImpl.commit(TransactionImpl.java:1582)\n    at com.ibm.ws.Transaction.JTA.TranManagerImpl.commit(TranManagerImpl.java:247)\n    at com.ibm.ws.Transaction.JTA.TranManagerSet.commit(TranManagerSet.java:168)\n    at com.ibm.ws.Transaction.JTA.UserTransactionImpl.commit(UserTransactionImpl.java:293)\n    at org.springframework.transaction.jta.JtaTransactionManager.doCommit(JtaTransactionManager.java:1009)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)\n    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:255)\n    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1002)\n    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:901)\n    at org.springframework.scheduling.commonj.DelegatingWork.run(DelegatingWork.java:61)\n    at com.ibm.ws.asynchbeans.J2EEContext$RunProxy.run(J2EEContext.java:264)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at com.ibm.ws.asynchbeans.J2EEContext.run(J2EEContext.java:1137)\n    at com.ibm.ws.asynchbeans.WorkWithExecutionContextImpl.go(WorkWithExecutionContextImpl.java:195)\n    at com.ibm.ws.asynchbeans.CJWorkItemImpl.run(CJWorkItemImpl.java:187)\n    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1560)\n.\n[9/25/12 17:10:06:880 EDT] 0000003e RegisteredRes W   WTRN0052E: An attempt by the transaction manager to call one phase commit on a transactional resource has resulted in an XAER_RMFAIL error. The resource was com.ibm.ws.Transaction.JTA.JTAXAResourceImpl@1d07bf1#{XidImpl: formatId(57415344), gtrid_length(36), bqual_length(54), data(00000139ff43ef2500000001000043106c82332ef6bc723402e84f341fb357080ddd4d1b00000139ff43ef2500000001000043106c82332ef6bc723402e84f341fb357080ddd4d1b000000010000000000000000000000000001)}\n[9/25/12 17:10:06:887 EDT] 0000003e DefaultMessag W org.springframework.jms.listener.DefaultMessageListenerContainer handleListenerSetupFailure Setup of JMS message listener invoker failed for destination 'queue:///RANDOM QUEUE?targetClient=1' - trying to recover. Cause: Heuristic completion: outcome state is mixed; nested exception is javax.transaction.HeuristicMixedException\n</code></pre>\n"},{"tags":["oracle","jdbc-odbc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13162001,"title":"IO exception: Size Data Unit (SDU) mismatch. Vendor code 17002","body":"<p>I am connecting through VPN to school site to access DB.\nI use SQL developer 3.0.04 to connect this database. But if I try to connect it this exception is thrown: \"IO exception: Size Data Unit (SDU) mismatch. Vendor code 17002\"</p>\n\n<p>Does anybody have experience with that kind of problem? I really cannot find solution.\nThanks a lot!</p>\n"},{"tags":["linux","oracle","ubuntu","oracle-xe"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":214,"score":0,"question_id":8985585,"title":"How to change the host name of the ubuntu server running oracle xe","body":"<p>I have a oracle 11g XE instance running under ubuntu server. I tried changing the hostname of the server by modifying the host name in <code>/etc/hostname</code>, <code>/etc/hosts</code>, <code>tnsnames.ora</code> and <code>listener.ora</code> but the oracle-xe instance fails to start after reboot. Any idea which configuration I am missing?</p>\n"},{"tags":["sql","oracle","query","isqlquery"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":43,"score":3,"question_id":13062683,"title":"Oracle SQL compare strings containing numbers, starting with 0 (zero)","body":"<p>I have a Date column, which is actually not in a date format.\nThe date looks like: <code>25/10/2012</code>.\nNow I have to compare 2 dates, but I cant find a pattern to do this, as the format is wrong.</p>\n\n<p>What I have tried is: </p>\n\n<pre><code> SELECT * \n   from PARAMETER\n  where NAME like 'Date_To' and SUBSTR(VALUE, 1, 2)&lt;'25' \n    and SUBSTR(VALUE, 1, 2)&gt;'05'\n</code></pre>\n\n<p>The problem I am facing is that this part: <code>SUBSTR(PA_VALUE, 1, 2)&gt;'05'</code> is not working as there is a 0(zero) infront of the number. Are there any solutions?</p>\n"},{"tags":["java","oracle","hibernate"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13145288,"title":"Overflow when trying to bind double.max_value in Oracle","body":"<p>I am trying to get our Hibernate app running on Oracle 11g, but we keep getting the following error when trying to persist a double.max_value: </p>\n\n<pre><code>Caused by: java.sql.SQLException: Internal Error: Overflow Exception trying to bind 1.7976931348623157E308\nat oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:70)\nat oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:133)\nat oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:199)\nat oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:263)\nat oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:271)\nat oracle.jdbc.driver.DoubleBinder.bind(OraclePreparedStatement.java:15676)\nat oracle.jdbc.driver.OraclePreparedStatement.setupBindBuffers(OraclePreparedStatement.java:2948)\nat oracle.jdbc.driver.OraclePreparedStatement.processCompletedBindRow(OraclePreparedStatement.java:2202)\nat oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3382)\nat oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:3468)\nat oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1350)\nat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2437)\n... 11 more\n</code></pre>\n\n<p><strong>Does anyone know why we can't persist this value?</strong> </p>\n\n<p>We only have this problem in Oracle -- Postgres and H2 work fine. </p>\n\n<p>We've tried forcing the Oracle datatype to Number and Binary_Double, but with the same result. We are using Hibernate 3 and Oracle 11g, along with the oracle jdbc driver and the OracleSpatial10g dialect. </p>\n\n<p>(I'm a Hibernate and Oracle newbie, so any help is appreciated.)</p>\n\n<p>EDIT: Some helpful comments so far, but I still haven't figured out my issue. Here's some more info:</p>\n\n<ul>\n<li>I found out that I can insert the number straight into the DB using BINARY_DOUBLE. I tried it with sqlfiddle and through my local db using SQLDeveloper. I can also retrieve it in SQLDeveloper.</li>\n<li>My problem is that I can't ever commit the number to my Database... The exception is thrown <em>before</em> anything makes it into the db.</li>\n</ul>\n"},{"tags":["oracle","plsql","substitution"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13159715,"title":"Using Substitution variables in Table name","body":"<p>My issue is easy, i wanna find out if what i am trying to do can be done or not. </p>\n\n<p>I have Tables named as follow : detailcro1, detailcro2, detailcro3 ... I wanna use Substitution vars for some automatic process. </p>\n\n<p>I wrote</p>\n\n<pre><code>DEFINE TT = 'detailcro'\nselect * from &amp;TT||'2';\n</code></pre>\n\n<p>and as a result I have `ORA-00933:. Could i do such querry ?</p>\n\n<p>Thank you</p>\n"},{"tags":["oracle","query","xmltype"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13159126,"title":"Split up query results after loading XML with fn:string-join in an Oracle table","body":"<p>I've loaded a few XML files into an Oracle database (11gr2 on Linux x64) and I had to use a fn:string-join to succesfully import the xml files which contain multiple records.</p>\n\n<p>After the data has landed/has been imported to an XMLTYPE table using SQL*LOADER, i've issued a query which transports the XML data from the XMLTYPE table to a regular table, lets call that one Table_A </p>\n\n<p>This table now contains all fields of the imported records (2 records in this case) together in the target fields, so for instance.</p>\n\n<p>The xml file contains an entry for computer_brand and the first record has the value 'Dell' and the second record has got the value 'Apple'.\nNow the two records from the XML file have been select/inserted in to Table_A but are in the same field, separated by a semi-colon.\nField name: computer_brand\nValues: Dell;Apple</p>\n\n<p>What I'd like to do is select the separate values from the table (regardless from the number of different values in the field, since this query needs to run from a scheduled job) and pass them through to insert all the values in their own separate fields.</p>\n\n<hr>\n\n<p>Here's an example of the things i've made/used:</p>\n\n<hr>\n\n<p>Table_A metadata:</p>\n\n<pre><code>CREATE TABLE table_a\n(\ncomputer_brand                           varchar2(41),\nowner                                    varchar2(101),\naddress                                  varchar2(101),\nserialnumber                             varchar2(21)\n)\n</code></pre>\n\n<p>I've selected and inserted the data imported from the xmltype table into Table_A with the following query:</p>\n\n<pre><code>insert into table_a\n(computer_brand,\n owner,\n address,\n serialnumber\n)\nselect\n a.computer_brand,\n a.owner,\n a.address,\n a.serialnumber\nfrom table_xml a,\n xmltable (xmlnamespaces('not mentioned due to security reasons' as \"tns\"),\n '//tns:Main' passing a.xml_file\n columns\n computer_brand      varchar2(41)  path 'fn:string-join(tns:/@computer_brand,\";\")',\n owner               varchar2(101) path 'fn:string-join(tns:/@owner,\";\")',\n address             varchar2(101) path 'fn:string-join(tns:/@address,\";\")',\n serialnumber        varchar2(21)  path 'fn:string-join(tns:/serialnumber,\";\")')\n(+) k\nwhere upper(file_name)=upper('xmlfile.xml');\n</code></pre>\n\n<p>The output for the above query is:</p>\n\n<pre><code>computer_brand\n--------------\ndell;apple\n\nowner\n--------------\npete;jack\n\naddress\n--------------\nbasement;attic\n\nserialnumber\n--------------\n123444;456555\n</code></pre>\n\n<p>Enormous thanks in advance if someone would know how to and help out? I was looking at <code>SUBSTR()</code> didn't really manage to fix it..</p>\n"},{"tags":["java","oracle","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13158212,"title":"Call an Oracle function from Java","body":"<p>I am having issues calling an Oracle FUNCTION (not a Stored Procedure) from Java 1.6, using ojdbc14.jar.</p>\n\n<p>I do not know what the function contains as I am calling it from a remote server, all I know is this:</p>\n\n<pre><code>FUNCTION ap_ch_get_acct_balances (VAR_PI_MOB_NO_ACCT_NO VARCHAR2,\nVAR_REPLY_CODE OUT NUMBER, VAR_EXT_RESPONSE OUT VARCHAR2, VAR_PO_ACC_BAL OUT CHAR,\nVAR_PO_ACCT_NO OUT CHAR)   \n</code></pre>\n\n<p>The schema I need to use is: FCRLIVE.AP_CH_GET_ACCT_BALANCES</p>\n\n<p>I am trying this:</p>\n\n<pre><code>String call = \"{ ? = call FCRLIVE.AP_CH_GET_ACCT_BALANCES(?, ?, ?, ?, ?) }\";\n                      CallableStatement cstmt = conn.prepareCall(call);\n                      cstmt.setQueryTimeout(1800);\n                      cstmt.setString(1, inputCode);\n                      cstmt.registerOutParameter(2, oracle.jdbc.OracleTypes.NUMBER);\n                      cstmt.registerOutParameter(3, oracle.jdbc.OracleTypes.VARCHAR);\n                      cstmt.registerOutParameter(4, oracle.jdbc.OracleTypes.CHAR);\n                      cstmt.registerOutParameter(5, oracle.jdbc.OracleTypes.CHAR);\n                      cstmt.executeUpdate();\n</code></pre>\n\n<p>But I keep seeing this in the log file:</p>\n\n<pre><code>java.sql.SQLException: ORA-01006: bind variable does not exist\nat oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:134)\n    at oracle.jdbc.ttc7.TTIoer.processError(TTIoer.java:289)\n    at oracle.jdbc.ttc7.Oall7.receive(Oall7.java:573)\n    at oracle.jdbc.ttc7.TTC7Protocol.doOall7(TTC7Protocol.java:1891)\n    at oracle.jdbc.ttc7.TTC7Protocol.parseExecuteFetch(TTC7Protocol.java:1093)\n    at oracle.jdbc.driver.OracleStatement.executeNonQuery(OracleStatement.java:2047)\n    at oracle.jdbc.driver.OracleStatement.doExecuteOther(OracleStatement.java:1940)\n    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:2688)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:589)\n</code></pre>\n\n<p>Am I calling the function wrong? Or what could this possibly be?</p>\n\n<p>Thanks in advance for the help!</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":14,"score":1,"question_id":13158221,"title":"How to get rows which does not match an ID in Oracle?","body":"<p>I want to write a Oracle query which will list down all id,name &amp; file from repo1 which has a matching id in file_repo but no matching id found in repo1_status</p>\n\n<pre><code>repo1\nid, name    \n1,  abc \n2,  def\n3,  emm\n4,  xdd\n\nfile_repo\nid, file\n1,  a.c\n2,  d.c\n3,  e.c\n4,  x.c\n\nrepo1_status\nid, status, status_desc\n1,  good,   new generated\n3,  good,   new generated\n</code></pre>\n\n<p>So far I wrote the below query, which does not work. Any help </p>\n\n<pre><code>SELECT repo1.id, name,file\nFROM repo1,file_repo,repo1_status\nWHERE (repo1.id=file_repo.id and repo1.id!=repo1_status.id)\n</code></pre>\n"}]}
{"total":22203,"page":5,"pagesize":100,"questions":[{"tags":["oracle","view","materialized-views"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":42,"score":0,"question_id":13155940,"title":"Quering Oracle materialized view - column ambiguously defined","body":"<p>I have a trouble querying view in Oracle.     </p>\n\n<p>Here is the view (my_cool_view) definition:  </p>\n\n<pre><code>SELECT *\n  FROM mview1 JOIN\n       mview2 USING(col_id) \n</code></pre>\n\n<p>where <em>mview1</em> and <em>mview2</em> is materialized views. I can't access to definition of this materialized views. I've tried this query:</p>\n\n<pre><code>select r.title from my_cool_view r;\n</code></pre>\n\n<p>and got <strong><em>ORA-00918: column ambiguously defined</em></strong> error. I got this error for subset of columns in my_cool_view.</p>\n\n<p>If I run this query:</p>\n\n<pre><code>select * from my_cool_view;\n</code></pre>\n\n<p>all works fine.   </p>\n\n<p>You are asking about desc my_cool_view in comments, sorry I can't provide schema information because it's confidential. The only I can say it contains about 80 columns, and only one (col_id) don't cause above error.  </p>\n\n<p>Do you have any ideas what is the case and how to fix it?</p>\n\n<p>Thanks in advance.  </p>\n\n<p>Sorry for misled you, the first version of question was too bad. </p>\n"},{"tags":["database","oracle","migration","flyway"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13122535,"title":"Execute flyway migrations using individual user accounts","body":"<p>As part of our effort to migrate our SQL scripts to flyway migrations, we've come across some scripts that make heavy use of the Oracle sqlplus <a href=\"http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12015.htm\" rel=\"nofollow\"><code>CONNECT</code> statement</a>. Removing them and using a user that would have the required permissions (e.g. <code>SYSTEM</code>) is unfortunately not an option.</p>\n\n<p>We're now wondering if there is an elegant way to execute the individual migrations using different accounts? If this would be supported, splitting the scripts around the <code>CONNECT</code> statements could lead to an elegant solution of our problem.</p>\n\n<p>How is everybody else dealing with database migrations that require different accounts?</p>\n"},{"tags":["performance","oracle","query-optimization"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13153395,"title":"Same query, slow on Oracle 9, fast on Oracle 10","body":"<p>We have a table called <code>t_reading</code>, with the following schema:</p>\n\n<pre><code>MEAS_ASS_ID     NUMBER(12,0)\nREAD_DATE       DATE\nREAD_TIME       VARCHAR2(5 BYTE)\nNUMERIC_VAL     NUMBER\nCHANGE_REASON   VARCHAR2(240 BYTE)\nOLD_IND         NUMBER(1,0)\n</code></pre>\n\n<p>This table is indexed as follows:</p>\n\n<pre><code>CREATE INDEX RED_X4 ON T_READING\n(\n  \"OLD_IND\",\n  \"READ_DATE\" DESC,\n  \"MEAS_ASS_ID\",\n  \"READ_TIME\"\n)\n</code></pre>\n\n<p>This exact table (with the same data) exists on two servers, the only difference is the Oracle version installed on each one.</p>\n\n<p>The query in question is:</p>\n\n<pre><code>SELECT * FROM t_reading WHERE OLD_IND = 0 AND MEAS_ASS_ID IN (5022, 5003) AND read_date BETWEEN to_date('30/10/2012', 'dd/mm/yyyy') AND to_date('31/10/2012', 'dd/mm/yyyy');\n</code></pre>\n\n<p>This query executes in less than a second on Oracle 10, and around a minute in Oracle 9.</p>\n\n<p>Are we missing something?</p>\n\n<p>EDIT:</p>\n\n<p>Execution plan for Oracle 9:\n<img src=\"http://i.stack.imgur.com/u359A.jpg\" alt=\"enter image description here\"></p>\n\n<p>Execution plan for Oracle 10:\n<img src=\"http://i.stack.imgur.com/uryvp.jpg\" alt=\"enter image description here\"></p>\n"},{"tags":["sql","oracle","informatica"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13154203,"title":"Tuning long running query","body":"<pre><code>SELECT a AS a,\n   b AS b,\n   c AS c,\n   d AS d,\n   e AS e,\n   f AS f,\n   g AS g,\n   h AS h\nFROM ( \n   SELECT P.*,\n      ROW_NUMBER() OVER (PARTITION BY p.a, RANK_NM \n      ORDER BY P.ID DESC) RW_NUM \n   FROM ( \n      SELECT T.a,\n         T.b,\n         T.c,\n         T.d,\n         T.e,\n         T.f,\n         T.g,\n         T.h,\n         T.ID\n         DENSE_RANK() over (PARTITION BY T.a \n         ORDER BY T.b, T.c, T.d\n         , T.e, T.f, T.g, T.h\n         DESC) RANK_NM \n      FROM TEST_TABLE T ) p) Y \nWHERE RW_NUM = 1\n</code></pre>\n\n<p>I got this query for tuning from production team, I dont have access to production and other things, I have to give query to production guys to execute and they are expecting a miracle. Problem is TEST_TABLE contains 98 million records and this query is used in informatica and creating a huge cache. Is there any way query can be written in better way, just at looking at query. I know lot of things require and information is needed for tuning but this is all I got. :) Database is oracle 10 g.</p>\n"},{"tags":["sql","oracle","date-arithmetic"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13155988,"title":"Finding week number in a month in oracle","body":"<p>I have table where I have stored all mondays e.g (1st oct, 8th oct, 15th oct, 22nd oct, 29th oct), I need to find out week of that month which will be like for 1st oct it will 1, 8th oct 2 and henceforth.. for Sept counter should start at 1 again. Can this is done through sql query, database is oracle 10g?</p>\n\n<p>if first on month is coming on wednesday then first monday in that month should be marked as 1, its second week but need as 1.</p>\n"},{"tags":["sql","oracle","ora-00933"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13156302,"title":"Join with table and sub query in oracle","body":"<p>I don't understand what is wrong with this query.  It is giving me a compile time error of \"command not ended properly\".</p>\n\n<p>The inner query is giving me four records.</p>\n\n<pre><code>select WGN3EVENTPARTICIPANT.EVENTUID \nfrom \n    (Select WGN_V_ADDRESS_1.ADDRESSUID1 as add1,\n            WGN_V_ADDRESS_1.ADDRESSUID2 as add2 \n     from WGN3USER inner join \n          WGN_V_ADDRESS_1 on WGN_V_ADDRESS_1.USERID=wgn3user.USERID \n      where WGN3USER.USERNAME='FIRMWIDE\\khuraj'\n    ) as ta\n    ,WGN3EVENTPARTICIPANT \n where (ta.ADDRESSUID1=WGN3EVENTPARTICIPANT.ADDRESSUID1) AND    \n       (ta.ADDRESSUID2=WGN3EVENTPARTICIPANT.ADDRESSUID2)\n</code></pre>\n\n<p>I am running it in oracle.</p>\n\n<p>Thanks </p>\n\n<p>Amandeep</p>\n"},{"tags":["java","forms","oracle","weblogic","fusion"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12824540,"title":"Form Fusion application causes white flash when transitioning between forms. Only in WebLogic, not in Oracle Application Server","body":"<p>We have an application being hosted on both Oracle Application Server and WebLogic.  When we transition between the forms a quick white flash appears on this application when accessing it through WebLogic.  We can not reproduce this behavior when we access it on Oracle Application Server.  Any ideas?</p>\n"},{"tags":["sql","oracle","query"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":6,"view_count":37,"score":-4,"question_id":13154807,"title":"Query required for given output","body":"<p>Supose I have data in below format</p>\n\n<pre><code>FIELD1   F2       F3 \nLIN0_TMP    A0  1\nLIN0_TMP    B0  2\nLIN0_TMP    C0  3\nLIN_TMP     A   1\nLIN_TMP     B   2\nLIN_TMP     C   3\nLIN_TMP     D   4\nLIN2_TMP    A2  1\nLIN2_TMP    B2  2\nLIN2_TMP    C2  3\nLIN2_TMP    D2  4\n</code></pre>\n\n<p>i WANT output in below format using oracle sql query. </p>\n\n<pre><code>FIELD1   F2       F3   FLOW\n    LIN0_TMP    A0  1 FLOW1\n    LIN0_TMP    B0  2 FLOW1\n    LIN0_TMP    C0  3 FLOW1\n    LIN_TMP     A   1 FLOW2\n    LIN_TMP     B   2 FLOW2\n    LIN_TMP     C   3 FLOW2\n    LIN_TMP     D   4 FLOW2\n    LIN2_TMP    A2  1 FLOW3 \n    LIN2_TMP    B2  2 FLOW3\n    LIN2_TMP    C2  3 FLOW3\n    LIN2_TMP    D2  4 FLOW3\n</code></pre>\n\n<p>Number of record for field1 is not fixed for each LIN_TMP value..</p>\n"},{"tags":["oracle","db2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13155788,"title":"online creating and accessing oracle and db2 database","body":"<p>I have to create and access oracle and db2 database. I don't have both database on my local system. Somebody knows there is any site which provides to create and access those database.\nI have to check my desktop application with both database so please help me. I had googled a lot but didn't find anything.</p>\n\n<p>thanks in advance</p>\n"},{"tags":["oracle","select"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":3,"view_count":31,"score":0,"question_id":13154985,"title":"Oracle select on single table","body":"<p>I Have the following table.</p>\n\n<pre><code>id  NAME    folder_NAME\n1   tom     popular\n2   tom     folder2\n3   peter   popular\n4   peter   folder1\n5   john    folder1\n6   john    folder2\n7   john    folder3\n8   Mark    folder1\n9   Mark    folder2\n10  Alex    folder1\n</code></pre>\n\n<p>How do I select the names that do not have a folder name 'popular' ?</p>\n"},{"tags":["oracle","fulltext"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13150767,"title":"Oracle full text, the syntax of CONTAINS()","body":"<pre><code>contains(columnname, 'ABC')=0\n</code></pre>\n\n<p>this means search for the data which doesn't contain word 'ABC'</p>\n\n<pre><code>contains(columnname, 'ABC and XYZ')=0\ncontains(columnname, 'ABC or XYZ')=0\n</code></pre>\n\n<p>what do these 2 sql mean? I tested them, there's no syntax error, but they didn't work as I expected, the 'and' seems like  an 'or', and 'or' seems like an 'and', could anyone help to explain this? \nall doc found in google are for contains()>0, those're not what I need.</p>\n\n<p>thanks in advance.</p>\n"},{"tags":["c#","oracle","devart"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13134201,"title":"what DLL should be copied?","body":"<p>i create entity model from oracle by devart.this is my connection string:</p>\n\n<pre><code>&lt;connectionStrings&gt;\n&lt;add name=\"STOREEntitiesConnectionString\" connectionString=\"metadata=res://*     /DataModel1.csdl|res://*/DataModel1.ssdl|res://*/DataModel1.msl;provider=Devart.Data.Oracle;provider connection string=&amp;quot;User Id=store;Password=secinvbas;Server=172.20.128.33;Direct=True;Sid=orcl;Persist Security Info=True&amp;quot;\"\n  providerName=\"System.Data.EntityClient\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>when i run application on client  get an error: </p>\n\n<pre><code>the specified store privider cannot be found in the configration, or is not valid\n</code></pre>\n\n<p>i copied</p>\n\n<pre><code>Devart.Data\nDevart.Data.Linq\nDevart.Data.Oracle\nDevart.Data.Oracle.Entity\nDevart.Data.Oracle.Linq\n</code></pre>\n\n<p>but steel i an get error</p>\n"},{"tags":["oracle","dispose","transactionscope"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13126511,"title":"TransactionScope disposal failure","body":"<p>I'm using the TransactionScope class within a project based on Silverlight and RIA services. Each time I need to save some data, I create a TransactionScope object, save my data using Oracle ODP, then call the Complete method on my TransactionScope object and dispose the object itself:</p>\n\n<pre><code>public override bool Submit(ChangeSet changeSet)\n    {\n        TransactionOptions txopt = new TransactionOptions();\n        txopt.IsolationLevel = IsolationLevel.ReadCommitted;\n        using (TransactionScope tx = new TransactionScope(TransactionScopeOption.Required, txopt))\n        {\n            // Here I open an Oracle connection and fetch some data\n            GetSomeData();\n\n            // This is where I persist my data\n            result = base.Submit(changeSet);\n\n            tx.Complete();\n        }\n\n        return result;\n    }\n</code></pre>\n\n<p>My problem is, the first time I get the Submit method to be called, everything is fine, but if I call it a second time, the execution gets stuck for a couple of minutes after the call to Complete (so, when disposing tx), then I get the Oracle error \"ORA-12154\". Of course, I already checked that my persistence code completes without errors. Any ideas?</p>\n\n<p>Edit: today I repeated the test and for some reason I'm getting a different error instead of the Oracle exception:</p>\n\n<pre><code>System.InvalidOperationException: Operation is not valid due to the current state of the object.\nat System.Transactions.TransactionState.ChangeStatePromotedAborted(InternalTransaction tx)\nat System.Transactions.InternalTransaction.DistributedTransactionOutcome(InternalTransaction tx, TransactionStatus status)\nat System.Transactions.Oletx.RealOletxTransaction.FireOutcome(TransactionStatus statusArg)\nat System.Transactions.Oletx.OutcomeEnlistment.InvokeOutcomeFunction(TransactionStatus status)\nat System.Transactions.Oletx.OletxTransactionManager.ShimNotificationCallback(Object state, Boolean timeout)\nat System.Threading._ThreadPoolWaitOrTimerCallback.PerformWaitOrTimerCallback(Object state, Boolean timedOut)\n</code></pre>\n"},{"tags":["php","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13153734,"title":"I want to connect to oracle database with php using class file and want to connect in constructor","body":"<p>I am facing problem with using the file which I have attached. I want some help because it is really urgent. I am building a webservice for an application!</p>\n\n<p>Using the following code in my class file:</p>\n\n<pre><code>class oracleConnection\n{\n    private $objConnection;\n    private $objDatasource;\n    public function __construct($datasource)\n    {\n        $this-&gt;objDatasource = $datasource;\n        $this-&gt;objDatasource[5] = (array_key_exists(5, $this-&gt;objDatasource) &amp;&amp; $this-&gt;objDatasource[5]) ? true : false;\n    }\n\n\n    public function objDbConnection()\n    {\n        $this-&gt;objConnection = ($this-&gt;objDatasource[5]) ? oci_pconnect(\n            $this-&gt;objDatasource[2],\n            $this-&gt;objDatasource[3],\n            $this-&gt;objDatasource[4]\n        )\n            : oci_connect($this-&gt;objDatasource[2], $this-&gt;objDatasource[3], $this-&gt;objDatasource[4]);\n\n        if (!$this-&gt;objConnection) {\n            $objError = oci_error();\n            trigger_error($objError['message'], E_USER_WARNING);\n        }\n\n        return $this-&gt;objConnection;\n    }\n\n\n    public function objDbClose()\n    {\n        return oci_close($this-&gt;objConnection);\n    }\n\n\n    public function objServerVersion()\n    {\n        return oci_server_version($this-&gt;objConnection);\n    }\n}\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13153170,"title":"SQL change value in varchar2 datatype using SQL script","body":"<p>i have a problem here.\nin my database i've value in <code>mobile_phone</code> column like <code>628932323</code> but i wanna change every row which use <code>62 to 0</code></p>\n\n<pre><code>old value : 628932323\nnew value : 08932323\n</code></pre>\n\n<p>can someone help me to solve my problems. thanks</p>\n"},{"tags":["oracle","jdbc","batch","prepared-statement"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":66,"score":-1,"question_id":13122702,"title":"Prepared statement returning -2 value always","body":"<p>I have a prepared statement with merge, after execution it always returns -2.</p>\n\n<p>My code:</p>\n\n<pre><code>private StringBuilder sb = new StringBuilder();\nsb.append(\"MERGE INTO EMP_BONUS EB USING (SELECT 1 FROM DUAL) on (EB.EMP_id = ?) WHEN MATCHED  THEN  UPDATE SET TA =?,DA=?,TOTAL=?,MOTH=?, NAME=? WHEN NOT MATCHED THEN \"\n        + \"INSERT (EMP_ID, TA, DA, TOTAL, MOTH, NAME)VALUES(?,?,?,?,?,?) \");\n\n\n\npublic void executes(String threadName) throws Exception {\n        ConnectionPro cPro = new ConnectionPro();\n        Connection connE = cPro.getConection();\n\n        threadN = threadN + \"||\" + threadName;\n\n        PreparedStatement pStmt = connE.prepareStatement(sb.toString());\n        try {\n            count = count + 1;\n\n            for (Employee employeeObj : employee) {\n\n                pStmt.setInt(1, employeeObj.getEmp_id());\n            pStmt.setDouble(2, employeeObj.getSalary() * .10);\n            pStmt.setDouble(3, employeeObj.getSalary() * .05);\n            pStmt.setDouble(4, employeeObj.getSalary()\n                    + (employeeObj.getSalary() * .05)\n                    + (employeeObj.getSalary() * .10));\n            pStmt.setInt(5, count);\n            pStmt.setString(6, threadN);\n            pStmt.setInt(7, employeeObj.getEmp_id());\n            pStmt.setDouble(8, employeeObj.getSalary() * .10);\n            pStmt.setDouble(9, employeeObj.getSalary() * .05);\n            pStmt.setDouble(10, employeeObj.getSalary()\n                    + (employeeObj.getSalary() * .05)\n                    + (employeeObj.getSalary() * .10));\n            pStmt.setInt(11, count);\n            pStmt.setString(12, threadN);    \n                pStmt.addBatch();\n            }\n\n            int arr[] = pStmt.executeBatch();\n\n            connE.commit();\n\n            System.out.println(\"Size=\" + arr.length);\n            if (arr.length != 0) {\n                for (int i = 0; i &lt; arr.length; i++) {\n                    System.out.println(i + \"==\" + arr[i]);\n                }\n            }\n        } catch (Exception e) {\n             connE.rollback();\n            throw e;\n\n        } finally {\n\n            pStmt.close();\n            connE.close();\n\n        }\n    }\n</code></pre>\n\n<p>See the code the prepared statement always returning -2(all the values inside the array is -2) value for sql commands like update,merge etc., I have used library like  ojdbc6.jar,ojdbc5.jar etc</p>\n"},{"tags":["oracle","google","google-apps-script","oracle-apex"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":35,"score":0,"question_id":13150421,"title":"Insert or Update Data in Google Spreadsheet from Oracle Database","body":"<p>I would like to know how I can insert or update data in a Google Spreadsheet from an Oracle Database please?</p>\n"},{"tags":["oracle","jpa"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13140381,"title":"How to attache a String in generated sequence number","body":"<p>In my application, I am using Struts2 for UI and JPA for DAO layer. And Oracle 11G database.</p>\n\n<p>In my database I have created a sequence ..</p>\n\n<pre><code>CREATE SEQUENCE  \"PERK\".\"EMP_CODE_SEQ\"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 501 CACHE 500 NOORDER  NOCYCLE ;\n</code></pre>\n\n<p>Now my requirement is changed. As per the requirement I want to attache \"TMP\" to my generated  sequence number.</p>\n\n<p>For example : If my sequence no is : 1 then It will give me TMP000001.</p>\n\n<p>For this the SQL query will be like this ..</p>\n\n<pre><code>select 'TMP'||lpad(EMP_CODE_SEQ.nextval,6, '0') test from dual;\n</code></pre>\n\n<p>But is there any way to implement the above query in JPA ? OR is there any way in ORACLE,so we can change the output sequence?</p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13150386,"title":"How to use Oracle Connect by nocycle","body":"<p>How to use oracle connect by nocycle in sql (oracle)?</p>\n\n<pre><code>where connect_by_iscycle = 1 \nCONNECT BY NOCYCLE (prior cowner, prior ctable) = ANY (powner, ptable);\n</code></pre>\n\n<p>Above condition gives me an error, <strong>ORA-00904 'NOCYCLE' invalid identifier</strong></p>\n\n<p>And if I comment 'CONNECT BY NOCYCLE' line, I get error:\n<strong>ORA-00904 'connect_by_iscycle' invalid identifier</strong></p>\n"},{"tags":["java","oracle","jpa","ejb","jpql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13150871,"title":"Oracle: How to use function based index in container generated jpa query WHERE clause","body":"<p>We have a  data table where it has a function based index (database is Oracle). But in our j2ee ejb application, system accesses the data using jpa queries.</p>\n\n<p>But in order to force the oracle to use the function based index instead of doing a full table scan, I need a way to tell the jpa container  to generate the sql with the function defined in the index in the WHERE clause of the sql query.</p>\n\n<p>As far as I know, we have to use native queries for creating customizations in the generated queries like that. But in order to use native queries we have to do many code changes. \nCould anyone please suggest any other work around for solving this issue?</p>\n\n<p><strong>Index:</strong> (We needed to enforce unique constraint for Dev_Id + Dev_Type, but sometimes Dev_Id can be null while Dev_Type can be duplicated.)</p>\n\n<pre><code> (NVL2(Dev_Id, Dev_Id, NULL), NVL2(Dev_Id, Dev_Type, NULL))\n</code></pre>\n\n<p><strong>Query we need:</strong> (In order to use the index)</p>\n\n<pre><code>Select * from some_table where NVL2(Dev_Id, Dev_Id, NULL) = 'some_val';\n</code></pre>\n\n<p><strong>Container generated query:</strong>  </p>\n\n<pre><code>Select * from some_table where Dev_Id = 'some_val';\n</code></pre>\n"},{"tags":["sql","oracle","table","join"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":75,"score":2,"question_id":13132447,"title":"Difference between ON and WHERE clauses in SQL table joins","body":"<pre><code>select e.last_name, e.hire_date\nfrom employees e join employees m\non (m.last_name = 'Davies')\nand (e.hire_date &gt; m.hire_date);\n\nselect e.last_name, e.hire_date\nfrom employees e join employees m\non (m.last_name = 'Davies')\nwhere (e.hire_date &gt; m.hire_date);\n\nselect e.last_name, e.hire_date\nfrom employees e join employees m\non (e.hire_date &gt; m.hire_date)\nwhere (m.last_name = 'Davies');\n</code></pre>\n\n<p>These three statements have the same result. Apart from the fact that <code>where</code> cannot be used exclusively, without using <code>on</code>, is there any particular reason to use <code>where</code> at all in table joins?</p>\n"},{"tags":["sql","oracle","hudson"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":12754779,"title":"Store build number and date in oracle database procedure comment header","body":"<p>I want to store the latest build number and date in the comment header section of my Oracle Procedures. I have searched on this topic but have only found storing dates and number in tables and not what I need.</p>\n\n<p>Back story - in the middle of a botched deploy I had to file diff procedures to confirm the latest and greatest was deployed as expected. We have grown from a start up to more of an enterprise and are trying to get better processes in place. Most of our procedures do not have headers and developers do not often add modifications/dates to them. I want to update a build version and date in the comment header as a result of the deployment action. We are using Hudson to automate deploys. I believe I should be able to add something to the header and update that via Hudson during the deploy. Then, confirmation that the latest and greatest is there would be at a glance instead of having to wade through a file diff.</p>\n\n<p>I have used Google and searched other sites to no avail. Any help would be greatly appreciated. </p>\n\n<p>Thanks!</p>\n"},{"tags":["php","oracle","oci8"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13097237,"title":"OCI_connect/OCIPLogon ORA-01031: insufficient privileges","body":"<p>We have two oracle accounts log_reader and log_writer. log_reader has read access for reading data. log_writer has write access writting data into database.\nThe application is run from Apache and uses Perl and PHP. Passwords are hardcoded into php/perl scripts. Recently we are trying to migrate to Oracle Wallet to eliminate hard coded passwords.\nOracle wallet is configured and following works -\nsqlplus and perl for both log_reader and log_writer accounts.\nphp for log_reader account.\nphp does not work for log-writer account. We get following error -</p>\n\n<pre><code>insert err = 1031:ORA-01031: insufficient privileges\n</code></pre>\n\n<p>PHP code -</p>\n\n<pre><code>    $conn = OCIPLogon(\"/\", \"\", \"SLACDEV\", \"\", OCI_CRED_EXT);\n</code></pre>\n\n<p>In short with Oracle Wallet there is no problem for sqlplus and Perl.\nBut for PHP we are facing issue when we try to write/insert data into database. Read for PHP works fine.</p>\n\n<p>I have tried following so far but no luck -</p>\n\n<pre><code>    $conn = OCIPLogon(\"/\", \"\", \"SLACDEV\", \"\", OCI_CRED_EXT);\n    $conn = OCIPLogon(\"/\", \"\", \"SLACDEV\", \"\", OCI_CRED_EXT+OCI_SYSOPER);\n    $conn = OCIPLogon(\"/\", \"\", \"SLACDEV\", \"\", OCI_CRED_EXT+OCI_SYSDBA);\n</code></pre>\n\n<p>php does not work for log-writer account. We get following error -</p>\n\n<pre><code>insert err = 1031:ORA-01031: insufficient privileges\n</code></pre>\n"},{"tags":["python","oracle","blob","cx-oracle","lob"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":99,"score":5,"question_id":12674806,"title":"How to download huge Oracle LOB with cx_Oracle on memory constrained system?","body":"<p>I'm developing part of a system where processes are limited to about 350MB of RAM; we use cx_Oracle to download files from an external system for processing.</p>\n\n<p>The external system stores files as BLOBs, and we can grab them doing something like this:</p>\n\n<pre><code># ... set up Oracle connection, then\ncursor.execute(u\"\"\"SELECT   filename, data, filesize\n                   FROM    FILEDATA\n                   WHERE   ID = :id\"\"\", id=the_one_you_wanted)\nfilename, lob, filesize = cursor.fetchone()\n\nwith open(filename, \"w\") as the_file:\n    the_file.write(lob.read())\n</code></pre>\n\n<p><code>lob.read()</code> will obviously fail with <code>MemoryError</code> when we hit a file larger than 300-350MB, so we've tried something like this instead of reading it all at once:</p>\n\n<pre><code>read_size = 0\nchunk_size = lob.getchunksize() * 100\nwhile read_size &amp;lt; filesize:\n    data = lob.read(chunk_size, read_size + 1)\n    read_size += len(data)\n    the_file.write(data)\n</code></pre>\n\n<p>Unfortunately, we still get <code>MemoryError</code> after several iterations. From the time <code>lob.read()</code> is taking, and the out-of-memory condition we eventually get, it looks as if <code>lob.read()</code> is pulling ( chunk_size + read_size ) bytes from the database <strong>every time</strong>. That is, reads are taking O(n) time and O(n) memory, even though the buffer is quite a bit smaller.</p>\n\n<p>To work around this, we've tried something like:</p>\n\n<pre><code>read_size = 0\nwhile read_size &amp;lt; filesize:\n    q = u'''SELECT dbms_lob.substr(data, 2000, %s)\n            FROM FILEDATA WHERE ID = :id''' % (read_bytes + 1)\n    cursor.execute(q, id=filedataid[0])\n    row = cursor.fetchone()\n    read_bytes += len(row[0])\n    the_file.write(row[0])\n</code></pre>\n\n<p>This pulls 2000 bytes (argh) at a time, and takes forever (something like two hours for a 1.5GB file). Why 2000 bytes? According to the Oracle docs, <code>dbms_lob.substr()</code> stores its return value in a RAW, which is limited to 2000 bytes.</p>\n\n<p>Is there some way I can store the <code>dbms_lob.substr()</code> results in a larger data object and read maybe a few megabytes at a time? How do I do this with cx_Oracle?</p>\n"},{"tags":["java","sql","oracle","jdbc","jndi"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":4134,"score":2,"question_id":320299,"title":"How to limit number of rows returned from Oracle at the JDBC data source level?","body":"<p>Is there a way to limit the rows returned at the Oracle datasource level in a Tomcat application?</p>\n\n<p>It seems <code>maxRows</code> is only available if you set it on the datasource in the Java code. Putting <code>maxRows=\"2\"</code> on the datasource doesn't apply.</p>\n\n<p>Is there any other way limit the rows returned? Without a code change?</p>\n"},{"tags":["sql","oracle","oracle11g"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":72,"score":4,"question_id":13127510,"title":"Date displaying differently on different servers","body":"<p>When i run the following query on my desktop</p>\n\n<pre><code>Select to_char(join_date, 'DD-MON-YYYY')\nFrom students\ngroup by to_char(join_date, 'DD-MON-YYYY');\n</code></pre>\n\n<p>I get the following output:</p>\n\n<pre><code>23-Oct-2012\n25-Oct-2012\n23-Oct-2012\n23-Oct-2012\n23-Oct-2012\n26-Oct-2012\n23-Oct-2012\n24-Oct-2012\n23-Oct-2012\n</code></pre>\n\n<p>But if i run it on a different server, the output comes out as: </p>\n\n<pre><code>23-Oct. -2012\n25-Oct. -2012\n23-Oct. -2012\n23-Oct. -2012\n23-Oct. -2012\n26-Oct. -2012\n23-Oct. -2012\n24-Oct. -2012\n23-Oct. -2012\n</code></pre>\n\n<p>Any ideas what could be causing this? \nThe second server is running in a different country from me so its regional settings could be different. </p>\n\n<p>Update:</p>\n\n<p>NLS_DATE_FORMAT is DD-Mon-RRRR on both servers. </p>\n"},{"tags":["c#",".net","sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13147434,"title":"ORA-00933: SQL command not properly ended when running create sequence commands","body":"<p>I'm trying to execute some sql using the following C# code:</p>\n\n<pre><code>IDbCommand objOracleCommand = CreateCommand(commandPart, connection, transaction);\nobjOracleCommand.ExecuteNonQuery();\n</code></pre>\n\n<p>I'm getting back a \"ORA-00933: SQL command not properly ended\" error.  </p>\n\n<p>commandPart is a string that looks like:</p>\n\n<pre><code>CREATE SEQUENCE seq_1\nINCREMENT BY 1\nSTART WITH 1\nNOMAXVALUE\nNOMINVALUE\nNOCACHE\nNOCYCLE\nNOORDER\n\nCREATE SEQUENCE seq_2 START WITH 1 INCREMENT BY 1\n</code></pre>\n\n<p>The commandPart is actually being read in from a text file.  The original SQL has semi-colons like so:</p>\n\n<pre><code>CREATE SEQUENCE seq_1\nINCREMENT BY 1\nSTART WITH 1\nNOMAXVALUE\nNOMINVALUE\nNOCACHE\nNOCYCLE\nNOORDER;\n\nCREATE SEQUENCE seq_2 START WITH 1 INCREMENT BY 1;\n</code></pre>\n\n<p>This original snippet (with semi-colons) will run just fine in SQL Developer.  If I run the original snippet via C# I get \"ora-00911: invalid character\".  Any ideas?</p>\n\n<p>Thanks,\nEric</p>\n"},{"tags":["oracle","plsql","xml-parsing","xquery"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13147095,"title":"Oracle Clob holds complex XML; how to select specific data with Xquery","body":"<p>I'm trying to extract specific data from a complex XML data set stored in a CLOB field in a commercial app.  I cannot change the XML format (namespace, etc), I cannot change the CLOB to XMLType.</p>\n\n<p>The xml data looks like:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;Calculation&gt;\n  &lt;ProcessUnitModelScenario Id=\"1265319\" EntityId=\"10030\" EntityName=\"Chaco Plant\" ProcessUnitId=\"10225\" ProcessUnitName=\"Turbine - Unit 37\" EmissionModelId=\"10000\" EmissionModelName=\"Emissions\" ScenarioId=\"10053\" ScenarioName=\"GHG_Comb_Run_Time\" EffectiveDate=\"1/1/2012 12:00:00 AM\" EndDate=\"2/1/2012 12:00:00 AM\" ActiveDate=\"1/1/2008 12:00:00 AM\" ProductionUnitId=\"10031\" ProductionUnitName=\"Default Production Unit - Month\" ProductionScheduleId=\"13541\" OperatingPercentage=\"100\" LinkLevel=\"1\"&gt;\n    &lt;EmissionModel Id=\"10935\" EffectiveDate=\"1/1/2012 12:00:00 AM\" EndDate=\"2/1/2012 12:00:00 AM\"&gt;\n      &lt;EmissionModelMaterial Id=\"13250\" OutputType=\"Air Emissions\" OutputTypeId=\"1\" Media=\"Vapor\" MediaName=\"Air\" MaterialId=\"83\" EquationId=\"10096\" EquationName=\"GHG Combustion: Run time\" EquationUnit=\"lb/hr\" EquationUnitName=\"lb/hr\" EquationBaseUnit=\"lb/hr\" EquationBaseUnitName=\"lb/hr\" SpeciationOption=\"StandardSpeciation\" SpeciationOptionName=\"Standard Speciation\" UseComponentVaporPressureMethods=\"False\" VaporPressureOptionName=\"Material's vapor pressure methods\"&gt;\n        &lt;Material Id=\"83\" Name=\"Methane\" EffectiveId=\"10082\" EffectiveDate=\"1/1/1990 12:00:00 AM\" ComponentBasis=\"Vapor\" MolecularWeight=\"16.043\" LiquidDensity=\"1.34687732957939\" VaporPressureMethod=\"Riedels\" RiedelA=\"39.205\" RiedelB=\"-1324.4\" RiedelC=\"-3.4366\" RiedelD=\"3.1E-05\" RiedelE=\"2\" UseDefinedComposition=\"False\"&gt;\n          &lt;CalculationPeriod StartDate=\"1/1/2012 12:00:00 AM\" EndDate=\"2/1/2012 12:00:00 AM\"&gt;\n            &lt;EquationVariable Id=\"11079\" Name=\"HeatRating\" Order=\"10\" BaseUnit=\"BTU/sec\" EquationUnit=\"MMBtu/hr\" Type=\"System\" TypeName=\"System Variable\" SystemCalculationType=\"ProcessUnitProperty\" SystemCalculationName=\"Process Unit Property\" SystemParameterProcessPropertyId=\"10005\" SystemParameterModelOutputTypeId=\"1\" TimeDependent=\"False\" Value=\"116\" EnteredValue=\"116\" EnteredUnit=\"MMBtu/hr\" /&gt;\n            &lt;EquationVariable Id=\"11077\" Name=\"GHGEF\" Order=\"20\" BaseUnit=\"lb/BTU\" EquationUnit=\"kg/MMBTU\" Type=\"GlobalEmissionFactor\" TypeName=\"Global Emission Factor\" TimeDependent=\"True\" Value=\"0.001\" EnteredValue=\"0.001\" EnteredUnit=\"kg/MMBTU\" /&gt;\n            &lt;EquationVariable Id=\"11078\" Name=\"RunHrs\" Order=\"30\" BaseUnit=\"hr\" Type=\"Parameter\" TypeName=\"Parameter\" ParameterLevel=\"ProcessUnit\" ParameterLevelName=\"Process Unit\" ParameterId=\"10044\" ParameterName=\"RunHrs - \" TimeDependent=\"True\" Value=\"612\" EnteredValue=\"612\" EnteredUnit=\"hr\" /&gt;\n            &lt;EquationVariable Id=\"11080\" Name=\"kgtolb\" Order=\"40\" BaseUnit=\"lb\" Type=\"GlobalConstant\" TypeName=\"Global Constant\" GlobalConstantId=\"10007\" TimeDependent=\"False\" Value=\"2.20462\" /&gt;\n            &lt;EquationVariable Id=\"11081\" Name=\"OpHrs\" Order=\"45\" BaseUnit=\"hr\" EquationUnit=\"hr\" Type=\"System\" TypeName=\"System Variable\" SystemCalculationType=\"OperatingHours\" SystemCalculationName=\"Operating Hours\" TimeDependent=\"True\" Value=\"744\" /&gt;\n            &lt;EquationVariable Id=\"11082\" Name=\"EmissionRate\" Order=\"46\" BaseUnit=\"lb/hr\" Type=\"FinalResult\" TypeName=\"Final Expression\" Formula=\"(HeatRating*GHGEF)*RunHrs*kgtolb/OpHrs\" TimeDependent=\"True\" Value=\"0.210363418064516\" /&gt;\n            &lt;Emission EffectiveDate=\"1/1/2012 12:00:00 AM\" EndDate=\"2/1/2012 12:00:00 AM\" BaseUnit=\"lb/hr\" BaseUnitName=\"lb/hr\" EmissionAmount=\"0.210363418064516\" Unit=\"lb/hr\" UnitName=\"lb/hr\" ResultValue=\"0.210363418064516\" LinkType=\"Unabated\" LinkTypeName=\"\" OperatingHours=\"744\" EmissionMass=\"156.51038304\" EmissionMassUnit=\"lb\" MaterialId=\"83\" EffectiveMaterialId=\"10082\" MaterialName=\"Methane\" MaterialEffectiveDate=\"1/1/1990 12:00:00 AM\" /&gt;\n          &lt;/CalculationPeriod&gt;\n        &lt;/Material&gt;\n        &lt;Material  etc...&gt;\n        &lt;/Material&gt;\n      &lt;/EmissionModelMaterial&gt;\n      &lt;EmissionModelMaterial  etc...&gt;\n      &lt;/EmissionModelMaterial&gt;\n    &lt;/EmissionModel&gt; \n    &lt;EmissionModel  etc...&gt; \n    &lt;/EmissionModel&gt; \n  &lt;ProcessUnitModelScenario  etc...&gt;\n  &lt;/ProcessUnitModelScenario&gt;\n&lt;/Calculation&gt;\n</code></pre>\n\n<p>My need is to return certain attribute values from the  elements for specified combination of [ProcessUnitModelScenario/@ProcessUnitId],  [ProcessUnitModelScenario/@ScenarioId], and [Material/@Id].</p>\n\n<p>The XML data is kept in the Air_Calc_Log table Verbose_Xml CLOB field.</p>\n\n<p>In my PL/SQL I am (mis?)using the follow select:</p>\n\n<pre><code> SELECT \n  XMLType(l.verbose_xml).extract(\n  'for $scen in  /Calculation/ProcessUnitModelScenario\n  where ($scen/@ScenarioId=\"10053\")\n  return $scen/* ')\n      FROM air_calc_log l\n   WHERE l.vld_site_id = 10030 -- pVldSite\n       AND l.start_date = To_Date('01/01/2012','mm/dd/yyyy')  -- pStartDate\n       AND  l.End_Date = To_Date('04/01/2012','mm/dd/yyyy')\n</code></pre>\n\n<p>Whatever combination of XQuery/XPath using FLOWR syntax I use I always get the following error message:</p>\n\n<pre><code>ORA-31011: XML parsing failed\nORA-19202: Error occurred in XML processing\nLPX-00601: Invalid token in: 'for $scen in  /Calculation/ProcessUnitModelScenario\n  where ($scen/@ScenarioId=\"10053\")\n  return $scen/* '\nORA-06512: at \"SYS.XMLTYPE\", line 111\n</code></pre>\n\n<p>Can someone help point out what I'm doing wrong?</p>\n"},{"tags":["oracle","count","oracle10g","group-by","sql-developer"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13146782,"title":"Need to count records and group count by date on oracle db using sql developer","body":"<p>I have a table like the following</p>\n\n<pre><code>   ID                created    sent    type\n-----------------------------------------------------\n0001463583000051783  31-JUL-12  1   270\n0081289563000051788  01-AUG-12  1   270\n0081289563000051792  01-AUG-12  1   270\n0081289563000051791  01-AUG-12  1   270\n0081289563000051806  01-AUG-12  1   270\n0001421999000051824  06-AUG-12  1   270\n0001421999000051826  06-AUG-12  1   270\n0001464485000051828  06-AUG-12  1   270\n0082162128000051862  09-AUG-12  2   278\n0082162128000051861  09-AUG-12  2   278\n0022409222082910259  09-AUG-12  3   278\n</code></pre>\n\n<p>I would like to have the following for output</p>\n\n<pre><code>created     Count\n---------------------\n31-JUL-12   1\n01-AUG-12   4\n06-AUG-12   3\n09-AUG-12   3\n</code></pre>\n\n<p>How hard would it be to accomplish this using SQL Developer on Oracle 10g</p>\n\n<p>I have tried several queries to generate such a table and in the end it does not group the count by date just gives me a '1' for the count when we average 5000-10000 transactions daily. Im probably over complicating it. But i would like something simple where i can pull the amount of transactions on a daily basis within a date range. </p>\n\n<p>what is happening currently when i run my queries is </p>\n\n<pre><code>created     Count\n---------------------\n31-JUL-12   1\n01-AUG-12   1\n01-AUG-12   1\n01-AUG-12   1\n01-AUG-12   1\n06-AUG-12   1\n06-AUG-12   1\n06-AUG-12   1\n09-AUG-12   1\n09-AUG-12   1\n09-AUG-12   1\n</code></pre>\n"},{"tags":["oracle","jpa","persistence","ora-00955"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13143408,"title":"JPA createEntityManager causes Oracle 955 error","body":"<p>I have created a simple JAVA app to learn database connection.</p>\n\n<p>I have table USR_BOOKS in Oracle 11g database. Using EclipseLink(JPA 2.0) Persistence libray.</p>\n\n<p>Using \"Create Entity From Database\", I created a class in Java, and created JPA Controller class.</p>\n\n<p>Everything seems to work fine except that I always get</p>\n\n<pre><code>    [EL Warning]: 2012-10-30 16:50:31.957--ServerSession(1278203495)--Exception \n       [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException\n    Internal Exception: java.sql.SQLSyntaxErrorException: ORA-00955: name is already used by an existing object\n\n    Error Code: 955\n    Call: CREATE TABLE USR_BOOKS (ID NUMBER(19) NOT NULL, NAZOV VARCHAR2(255) NULL, PRIMARY KEY (ID))\n    Query: DataModifyQuery(sql=\"CREATE TABLE USR_BOOKS (ID NUMBER(19) NOT NULL, NAZOV VARCHAR2(255) NULL, PRIMARY KEY (ID))\")\n</code></pre>\n\n<p>I am not calling the CREATE TABLE query anywhere, but until I call function </p>\n\n<pre><code>   EntityManager em = emf.createEntityManager();\n</code></pre>\n\n<p>the error is not there \nIt looks like that the function createEntityManager() creates the SQL statement and sends it into database.</p>\n\n<p>I tried deleting the table from database. Then the program creates the table USR_BOOKS in database - again, I am NOT accidentally calling any function that could cause it. </p>\n\n<p>This is basically my code:</p>\n\n<pre><code>    EntityManagerFactory emf = Persistence.createEntityManagerFactory(\"JavaOracleDBPU2\");\n    EntityManager em = emf.createEntityManager();\n    UsrBooksJpaController booksController = new UsrBooksJpaController(emf);\n    List&lt;UsrBooks&gt; usrBooksAll = booksController.findUsrBooksEntities();\n    System.out.println(usrBooksAll);\n</code></pre>\n\n<p>the code works, even prints data from the table, just getting the error</p>\n"},{"tags":["oracle","http"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":199,"score":2,"question_id":9998566,"title":"Oracle - UTL_HTTP - Keep response body on non-200 responses","body":"<p>I find that if I call <code>UTL_HTTP.GET_RESPONSE</code> and get an error response (500 in this case), when I call <code>UTL_HTTP.READ_TEXT</code> it fails with <code>ORA-29261: bad argument</code>. How can I see the response body when there is an error?</p>\n"},{"tags":["sql","oracle","application","informix","denormalization"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":1,"view_count":342,"score":2,"question_id":3057990,"title":"Should I denormalize Loans, Purchases and Sales tables into one table?","body":"<p>Based on the information I have provided below, can you give me your opinion on whether its a good idea to denormalize separate tables into one table which holds different types of contracts?.. What are the pro's/con's?.. Has anyone attempted this before?.. Banking systems use a CIF (Customer Information File) [master] where customers may have different types of accounts, CD's, mortgages, etc. and use transaction codes[types] but do they store them in one table?</p>\n\n<p>I have separate tables for Loans, Purchases &amp; Sales transactions. Rows from each of these tables are joined to their corresponding customer in the following manner: </p>\n\n<pre><code>customer.pk_id SERIAL = loan.fk_id      INTEGER; \n                      = purchase.fk_id  INTEGER; \n                      = sale.fk_id      INTEGER;  \n</code></pre>\n\n<p>Since there are so many common properties among these tables, which revolves around the same merchandise being: pawned, bought and sold, I experimented by consolidating them into one table called \"Contracts\" and added the following column:</p>\n\n<pre><code>Contracts.Type char(1) {L=Loan, P=Purchase, S=Sale}\n</code></pre>\n\n<p>Scenario:</p>\n\n<p>A customer initially pawns merchandise, makes a couple of interest payments, then decides he wants to sell the merchandise to the pawnshop, who then places merchandise in Inventory and eventually sells it to another customer. </p>\n\n<p>I designed a generic table where for example:</p>\n\n<pre><code>Contracts.Capital DECIMAL(7,2) \n</code></pre>\n\n<p>in a loan contract it holds the pawn principal amount, in a purchase holds the purchase price, in a sale holds sale price.</p>\n\n<p>Is this design a good idea or should I keep them separate?</p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13135295,"title":"PLSQL :NEW and :OLD","body":"<p>Can anyone make me understand when to use <code>:NEW</code> and <code>:OLD</code> in PLSQL block, I'm finding very difficult understanding their usage.</p>\n"},{"tags":["sql","performance","oracle","query-optimization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13141970,"title":"Performance of query with OR condition between join tables","body":"<p>There are two tables, tparent and tchild, which are created using script #1.\nIt's need to query all the information from the two tables where uname is equal to 'sky'.\nThe following query statement #2 is fast when there are only a few of records.\nBut it will become very slowly when inserting a huge number of records using the following script #3.\nI think it's caused by the OR condition between tables and the index will be unusefull for querying. \nSo I got a fast solution that changing the statement to three sub ones and union result, like #4.\nI want to konw is there a better solution? what's it? </p>\n\n<p>Thanks!</p>\n\n<p><strong># 1</strong></p>\n\n<pre><code>drop table tparent;\ndrop table tchild;\ncreate table tparent(typeid int,sno number,uname varchar2(50) );\ncreate table tchild(typeid int,sno number,seqno int,uname varchar2(50));\ncreate unique index uidx_tparent_typeidsno on tparent(typeid,sno);\ncreate unique index uidx_tchild_typeidsnoseqno on tchild(typeid,sno,seqno);\ncreate index idx_tparent_name on tparent(uname);\ncreate index idx_tchild_name on tchild(uname);\n\ninsert into tparent values (1,10,'lily');\ninsert into tparent values (1,11,'eric');\ninsert into tparent values (2,10,'tom');\ninsert into tparent values (2,11,'eric');\ninsert into tparent values (3,10,'sky');\n\ninsert into tchild values (1,10,1,'sam');\ninsert into tchild values (1,10,2,'sky');\ninsert into tchild values (1,11,1,'eric');\ninsert into tchild values (1,11,2,'john');\ninsert into tchild values (2,10,1,'sky');\ninsert into tchild values (2,11,1,'eric');\ninsert into tchild values (3,10,1,'tony');\n</code></pre>\n\n<p><strong># 2</strong></p>\n\n<pre><code>select p.typeid,p.sno,p.uname,c1.uname as uname1,c2.uname as uname2 from tparent p\n  left join tchild c1 on c1.typeid=p.typeid and c1.sno = p.sno and c1.seqno=1\n  left join tchild c2 on c2.typeid=p.typeid and c2.sno = p.sno and c2.seqno=2\nwhere (p.uname='sky' or c1.uname='sky' or c2.uname='sky');\n</code></pre>\n\n<p><strong># 3</strong></p>\n\n<pre><code>BEGIN\n    FOR x IN 1..10\n    LOOP\n        BEGIN\n            FOR y IN 10000..100000\n            LOOP\n                BEGIN\n                    insert into tparent values (x,y,'name'|| y);\n                    insert into tchild values (x,y,1,'name'|| y);\n                    insert into tchild values (x,y,2,'name'|| y);\n                END;\n            END LOOP;\n            COMMIT;\n        END;\n    END LOOP;\nEND;\n</code></pre>\n\n<p><strong>#4</strong></p>\n\n<pre><code>select typeid,sno,max(uname),max(uname1),max(uname2) from (\n\nselect p.typeid,p.sno,p.uname,c1.uname as uname1,c2.uname as uname2 from tparent p\n  left join tchild c1 on c1.typeid=p.typeid and c1.sno = p.sno and c1.seqno=1\n  left join tchild c2 on c2.typeid=p.typeid and c2.sno = p.sno and c2.seqno=2\nwhere (p.uname='sky' )\nunion \nselect p.typeid,p.sno,p.uname,c1.uname as uname1,c2.uname as uname2 from tparent p\n  left join tchild c1 on c1.typeid=p.typeid and c1.sno = p.sno and c1.seqno=1\n  left join tchild c2 on c2.typeid=p.typeid and c2.sno = p.sno and c2.seqno=2\nwhere ( c1.uname='sky' )\nunion\n\nselect p.typeid,p.sno,p.uname,c1.uname as uname1,c2.uname as uname2 from tparent p\n  left join tchild c1 on c1.typeid=p.typeid and c1.sno = p.sno and c1.seqno=1\n  left join tchild c2 on c2.typeid=p.typeid and c2.sno = p.sno and c2.seqno=2\nwhere ( c2.uname='sky')\n) tb group by typeid,sno\norder by typeid,sno\n;\n</code></pre>\n"},{"tags":["oracle","plsql","triggers"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6844,"score":0,"question_id":687882,"title":"PL/SQL Trigger - Dynamically reference :NEW or :OLD","body":"<p>Is it possible to dynamically reference the :NEW/OLD pseudo records, or copy them?</p>\n\n<p>I'm doing a audit trigger for a very wide table, so would like to avoid having separate triggers for insert/delete/update.</p>\n\n<p>When updating/inserting I want to record the :NEW values in the audit table, when deleting I want to record the :OLD values.</p>\n"},{"tags":["sql","database","oracle","concatenation","string-aggregation"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":86,"score":3,"question_id":13142481,"title":"Oracle concatenation of columns with comma","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/468990/how-can-i-combine-multiple-rows-into-a-comma-delimited-list-in-oracle\">How can I combine multiple rows into a comma-delimited list in Oracle?</a>  </p>\n</blockquote>\n\n\n\n<p>Could some one please tell me how to achieve the following?</p>\n\n<p>Table:</p>\n\n<pre><code>efforts_id        cycle_name      release_name \n123               quarter         march \n123               half            april \n123               full            april\n124               quarter         may\n</code></pre>\n\n<p>My expected output:</p>\n\n<pre><code>efforts_id        cycle_name            release_name \n123               quarter,half,full     march,april\n124               quarter               may\n</code></pre>\n\n<p>I am a beginner in oracle so not sure how to do this. Any help would be appreciated.</p>\n\n<p>Thanks</p>\n"},{"tags":["oracle","webserver","weblogic","weblogic-10.x","weblogic11g"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":13141413,"title":"Deploying applications to Web Logic production Server","body":"<p>I am here to get some expert advice on deploying applications to WebLogic Production Server.\nIs it a best practice to use Admin Server Console for deploying and redeploying applications in production. Actually I am deploying to a cluster having two managed server instances. </p>\n\n<p>I have encountered this issue while i am redeploying application in the production. When i am deleting existing .ear file and adding updated .ear file will put the updated .ear file into prepared state. I can not make it Active state using Admin Server Console. If i try it will through some exceptions. But after some time it automatically goes in to active state, but i don't know what is happening inside. Sometimes i restart the server to make it active. Could anybody explain me what is the procedure when deploying application and redeploying applications in weblogic</p>\n\n<p>Thanks in advance for any Help...</p>\n"},{"tags":["oracle","oracle11g","scheduler"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13142721,"title":"Cannot get auto optimizer stats collection job to run after Oracle 11g upgrade","body":"<p>We recently upgraded our 10g server to 11g (11.2.0.3.0), and I see that stats gathering should be handled via the Automated Maintenance Tasks feature - specifically the \"auto optimizer stats collection\" job.</p>\n\n<p>However, since our upgrade (5 days ago), I have not seen any of these jobs run in the scheduler, and the Automated Maintenance Tasks interface in OEM does not show the jobs having been run.  DBA_AUTOTASK_JOB_HISTORY has no rows, and I see no history of any stat job running in the scheduler tab or OEM, yet as far as I can tell, the system is configured correctly:</p>\n\n<pre><code>    SELECT col\n         , val\n      FROM ( SELECT *\n               FROM DBA_AUTOTASK_CLIENT\n              WHERE CLIENT_NAME = 'auto optimizer stats collection'\n           )\n   UNPIVOT (    val                            \n            FOR col                              \n             IN ( CLIENT_NAME\n                , STATUS\n                , CONSUMER_GROUP\n                , CLIENT_TAG\n                , PRIORITY_OVERRIDE\n                , ATTRIBUTES\n                , WINDOW_GROUP\n                , SERVICE_NAME\n                )\n           );\n\n  COL               VAL\n  ----------------- ---------------------------------------\n  CLIENT_NAME       auto optimizer stats collection\n  STATUS            ENABLED\n  CONSUMER_GROUP    ORA$AUTOTASK_STATS_GROUP\n  CLIENT_TAG        OS\n  PRIORITY_OVERRIDE INVALID\n  ATTRIBUTES        ON BY DEFAULT, VOLATILE, SAFE TO KILL\n  WINDOW_GROUP      ORA$AT_WGRP_OS\n\n\n  SQL&gt; select * from DBA_AUTOTASK_WINDOW_CLIENTS;\n\n  WINDOW_NAME                    WINDOW_NEXT_TIME                                                            WINDO AUTOTASK OPTIMIZE SEGMENT_ SQL_TUNE HEALTH_M\n  ------------------------------ --------------------------------------------------------------------------- ----- -------- -------- -------- -------- --------\n  MONDAY_WINDOW                  01-NOV-12 10.00.00.000000 AM AMERICA/NEW_YORK                               FALSE ENABLED  ENABLED  DISABLED ENABLED  DISABLED\n  TUESDAY_WINDOW                 01-NOV-12 10.00.00.000000 AM AMERICA/NEW_YORK                               FALSE ENABLED  ENABLED  DISABLED ENABLED  DISABLED\n  WEDNESDAY_WINDOW               01-NOV-12 10.00.00.000000 AM AMERICA/NEW_YORK                               FALSE ENABLED  ENABLED  DISABLED ENABLED  DISABLED\n  THURSDAY_WINDOW                01-NOV-12 10.00.00.000000 AM AMERICA/NEW_YORK                               FALSE ENABLED  ENABLED  DISABLED ENABLED  DISABLED\n  FRIDAY_WINDOW                  01-NOV-12 10.00.00.000000 AM AMERICA/NEW_YORK                               FALSE ENABLED  ENABLED  DISABLED ENABLED  DISABLED\n  SATURDAY_WINDOW                01-NOV-12 10.00.00.000000 AM AMERICA/NEW_YORK                               FALSE ENABLED  ENABLED  DISABLED ENABLED  DISABLED\n  SUNDAY_WINDOW                  01-NOV-12 10.00.00.000000 AM AMERICA/NEW_YORK                               FALSE ENABLED  ENABLED  DISABLED ENABLED  DISABLED\n</code></pre>\n\n<p>Have I missed something?</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13141055,"title":"Removing certain rows from table on condition plus converting varchar to date","body":"<p>I understand that this question might have a trivial answer. I would like to remove certain rows from a huge table when certain condition is met. The condition is on <code>drdate</code> (a varchar field), which holds date information so it needs to be converted. The table is huge and ideally I do not want to spend too much time for the query to run.</p>\n\n<pre><code>delete from products \nwhere (to_date('drdate','mm/dd/yyyy')) &gt; (to_date('01/01/2011','mm/dd/yyyy'))\n</code></pre>\n\n<p>This returns:</p>\n\n<p><em>SQL Error: ORA-01858: a non-numeric character was found where a numeric was expected\n01858. 00000</em> </p>\n"},{"tags":["c#","oracle","c#-4.0"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":110,"score":1,"question_id":12568100,"title":"Connecting to Oracle Database through C#?","body":"<p>I need to connect to a Oracle DB (external) through Visual Studio 2010. But I dont want to install Oracle on my machine. \nIn my project I referenced: <strong>System.Data.OracleClient</strong>. But its not fulfilling the need. \nI have an <strong>\"Oracle SQL Developer IDE\"</strong> in which I run SQL queries against oracle db. </p>\n\n<p>I have this code so far:</p>\n\n<pre><code> private static string GetConnectionString()\n    {\n        String connString = \"host= serverName;database=myDatabase;uid=userName;pwd=passWord\";\n        return connString;\n    }\n\n private static void ConnectingToOracle()\n    {\n        string connectionString = GetConnectionString();\n        using (OracleConnection connection = new OracleConnection())\n        {\n            connection.ConnectionString = connectionString;\n            connection.Open();\n            Console.WriteLine(\"State: {0}\", connection.State);\n            Console.WriteLine(\"ConnectionString: {0}\",\n                              connection.ConnectionString);\n\n            OracleCommand command = connection.CreateCommand();\n            string sql = \"SELECT * FROM myTableName\";\n            command.CommandText = sql;\n\n            OracleDataReader reader = command.ExecuteReader();\n            while (reader.Read())\n            {\n                string myField = (string)reader[\"MYFIELD\"];\n                Console.WriteLine(myField);\n            }\n        }\n    }\n</code></pre>\n\n<p>So far I read these blogs: </p>\n\n<p><a href=\"http://st-curriculum.oracle.com/tutorial/DBXETutorial/index.htm\" rel=\"nofollow\">http://st-curriculum.oracle.com/tutorial/DBXETutorial/index.htm</a></p>\n\n<p><a href=\"http://blogs.msdn.com/b/kaevans/archive/2009/07/18/connecting-to-oracle-from-visual-studio.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/kaevans/archive/2009/07/18/connecting-to-oracle-from-visual-studio.aspx</a></p>\n\n<p>So far I have not downloaded anything from Oracle. What steps should I take to make this happen? </p>\n"},{"tags":["java","oracle","hibernate","seam","c3p0"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":13116452,"title":"Tomcat 6 Errors out on Startup","body":"<p>I have apache-tomcat-6.0.35 installed locally on my Windows 7 Machine. I also do have Hiberanate Java application that I am trying to run on Tomcat. The RDBMS used on back end is Oracle 11g and hence I do have Oracle client(11.2.0) installed on my machine. The Java app is using c3p0-0.9.1.2 to create connection pool with Oracle in the back end. All the connection information are stored in tnsnames.ora file.</p>\n\n<p>The entire project code is in Version Control System and hence the exact same code runs with no problem on my co-worker's machine but Tomcat fails to launch on mine with the following log. I have had this problem since early this year (Feb 2012) but never got it resolved. I am trying one more time to see if anyone can notice something that I am missing. I appreciate your time looking into this issue! <strong>Thank you much!</strong></p>\n\n<h2>Here is the content from log file  after I run the Tomcat Server:</h2>\n\n<pre><code>Using CATALINA_BASE:                 \"C:\\Users\\MyName\\.IntelliJIdea11\\system\\tomcat\\Unnamed_cerdoafebd8b4\"\nUsing CATALINA_HOME:   \"C:\\Program Files (x86)\\Apache\\Tomcat6\\apache-tomcat-6.0.35\"\nUsing CATALINA_TMPDIR: \"C:\\Program Files (x86)\\Apache\\Tomcat6\\apache-tomcat-6.0.35\\temp\"\nUsing JRE_HOME:        \"C:\\Program Files\\Java\\jdk1.6.0_31\"\nUsing CLASSPATH:       \"C:\\Program Files (x86)\\Apache\\Tomcat6\\apache-tomcat-6.0.35\\bin\\bootstrap.jar\"\n...\n2012-10-29T03:37:54.054Z INFO   [main] EnvironmentProperties  - Filtering properties using environment dev\n2012-10-29T03:38:51.693Z INFO   [main] MLog  - MLog clients using log4j logging.\n2012-10-29T03:39:40.497Z INFO   [main] C3P0Registry  - Initializing c3p0-0.9.1.2 [built 21-May-2007 15:04:56; debug? true; trace: 10]\n2012-10-29T03:39:45.066Z INFO   [main] AbstractPoolBackedDataSource  - Initializing c3p0 pool... com.mchange.v2.c3p0.PoolBackedDataSource@f1bda9a6 [ connectionPoolDataSource -&gt; com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@1091d257 [ acquireIncrement -&gt; 1, acquireRetryAttempts -&gt; 3, acquireRetryDelay -&gt; 1000, autoCommitOnClose -&gt; false, automaticTestTable -&gt; null, breakAfterAcquireFailure -&gt; false, checkoutTimeout -&gt; 0, connectionCustomizerClassName -&gt; null, connectionTesterClassName -&gt; com.mchange.v2.c3p0.impl.DefaultConnectionTester, debugUnreturnedConnectionStackTraces -&gt; false, factoryClassLocation -&gt; null, forceIgnoreUnresolvedTransactions -&gt; false, identityToken -&gt; 2zggjq8q1bc3mwlm6u21f|3bf60430, idleConnectionTestPeriod -&gt; 0, initialPoolSize -&gt; 2, maxAdministrativeTaskTime -&gt; 0, maxConnectionAge -&gt; 604800, maxIdleTime -&gt; 7200, maxIdleTimeExcessConnections -&gt; 120, maxPoolSize -&gt; 10, maxStatements -&gt; 0, maxStatementsPerConnection -&gt; 0, minPoolSize -&gt; 2, nestedDataSource -&gt; com.mchange.v2.c3p0.DriverManagerDataSource@7c977f23 [ description -&gt; null, driverClass -&gt; null, factoryClassLocation -&gt; null, identityToken -&gt; 2zggjq8q1bc3mwlm6u21f|2bbef4c6, jdbcUrl -&gt; jdbc:oracle:thin:@TRACKER_DEV, properties -&gt; {user=******, .username=cerdo_app, password=******, .password=PEOPLE_WHOUSE_ADHOC, url.dev=jdbc:oracle:thin:@TRACKER_DEV, .url=jdbc:oracle:thin:@DW_DEV, .url.dev=jdbc:oracle:thin:@DW_DEV} ], preferredTestQuery -&gt; select 1 from dual, propertyCycle -&gt; 0, testConnectionOnCheckin -&gt; true, testConnectionOnCheckout -&gt; false, unreturnedConnectionTimeout -&gt; 0, usesTraditionalReflectiveProxies -&gt; false; userOverrides: {} ], dataSourceName -&gt; null, factoryClassLocation -&gt; null, identityToken -&gt; 2zggjq8q1bc3mwlm6u21f|293a985, numHelperThreads -&gt; 3 ]\noracle.net.TNSAddress.SOException\n    at oracle.net.TNSAddress.ServiceAlias.initFromNVPair(Unknown Source)\n    at oracle.net.TNSAddress.ServiceAlias.initFromString(Unknown Source)\n    at oracle.net.resolver.AddrResolution.resolveAddrTree(Unknown Source)\n    at oracle.net.resolver.AddrResolution.resolveAndExecute(Unknown Source)\n    at oracle.net.ns.NSProtocol.establishConnection(Unknown Source)\n    at oracle.net.ns.NSProtocol.connect(Unknown Source)\n    at oracle.jdbc.ttc7.TTC7Protocol.connect(TTC7Protocol.java:1213)\n    at oracle.jdbc.ttc7.TTC7Protocol.logon(TTC7Protocol.java:209)\n    at oracle.jdbc.driver.OracleConnection.&lt;init&gt;(OracleConnection.java:252)\n    at oracle.jdbc.driver.OracleDriver.getConnectionInstance(OracleDriver.java:365)\n    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:260)\n    at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:134)\n    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:182)\n    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:171)\n    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:137)\n    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1014)\n    at com.mchange.v2.resourcepool.BasicResourcePool.access$800(BasicResourcePool.java:32)\n    at com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask.run(BasicResourcePool.java:1810)\n    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)\n</code></pre>\n"},{"tags":["oracle","model"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":29,"score":2,"question_id":13138938,"title":"calculating empirical distribution of dataset in oracle using model clause","body":"<p>I can find empirical distribution that way</p>\n\n<pre><code>    select command_type, duration, round(percentage, 2)\n    from (select distinct command_type,duration_sec,\n                        percent_rank() over(partition by command_type order by duration) percentage\n          from command_durations\n          order by 1, 2)\n</code></pre>\n\n<p>The question is how to do the same using oracle model clause. I have started with this </p>\n\n<pre><code>select command_type,duration,dur_count from command_durations\nmodel UNIQUE SINGLE REFERENCE\npartition by (command_type)\ndimension by ( duration)\nmeasures(0 dur_count)\nrules(\ndur_count[duration]=count(1)[cv(duration)]\n)\norder by command_type,duration\n</code></pre>\n\n<p>But now I need to make records distinct, in order to be able to proceed with finding empirical distribution.</p>\n\n<p>How to do the records distinct in the model clause?</p>\n"},{"tags":["oracle","oracle10g","sql-developer","oracle-sqldeveloper"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":4188,"score":4,"question_id":3237894,"title":"Run 2 queries at the same time on Oracle SQL Developer?","body":"<p>I need to retrieve quite a bit of data from our oracle DB and to do so I need to run 20+ queries. Is there any way to run more than one query at a time on the same connection?</p>\n\n<p>I tried using / to separate the queries, but that simply opens multiple tabs and queries still run sequentially, although I don't have to start them one by one.</p>\n"},{"tags":["oracle","batch-file","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12893071,"title":"Connect Oracle via Batch file","body":"<p>I am very new to windows batch program. I have one requirement, i.e., i want to get the Oracle database username password &amp; connection string from the user via command prompt. Depends on the user input i need to connect a particular user in the oracle.  How can i do that using windows batch file.</p>\n\n<p>I tried but i can't able to solve the problem.</p>\n\n<pre><code>enter code here\n@ECHO OFF\nECHO *****************************\nECHO     Database Login\nECHO *****************************\n\n\nSET /p username    =User/Schema:\nSET /p passwd      =Password   :\nSET /p tns         =Database   :\n\n\nsqlplus %username%/%passwd%@%tns\n</code></pre>\n\n<p>while i execute the batch file i don't see any action, it just runs and exit from the command prompt. Can any one give me the solution for my requirement?</p>\n"},{"tags":["oracle","view","database-schema"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13138877,"title":"How do you bring the schema name into an VIEW in Oracle?","body":"<p>I am trying to create MVIEWs in a database with 50 identical schemas.  So the basic VIEW is pretty simple, but I need to add a column to the view that stores the source record's schema.  The tables in all 50 schemas start their unique keys from 0.</p>\n"},{"tags":["windows","oracle","version"],"answer_count":7,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":26820,"score":7,"question_id":1171643,"title":"What's the best way to determine which version of oracle client I'm running?","body":"<p>The subject says it all:  What is the best way to determine the exact version of the oracle client I'm running?  Our clients are all running Windows.</p>\n\n<p>I found one suggestion to run the tnsping utility, without parameters, which does display the version information.  Is there a better way?</p>\n\n<p>Does the client install put this information in any sort of text file?</p>\n"},{"tags":["sql","oracle","query","plsql","plsqldeveloper"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":56,"score":-1,"question_id":13138534,"title":"How to handle large string coming as an input parameter to the procedure?","body":"<p>I am getting 200 Supplier names as an input parameter with huge values to the stored procedure.I tried declaring in CLOB,VARCHAR2(32767).But when i try to execute it is not accepting.\nPlease anyone help me how to handle this   .</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE GMMT_PROC.or_rmce_RB_grid_sp (\n   p_plant_cd        IN VARCHAR2,\n   p_region_cd       IN VARCHAR2,\n   p_matrl_nbr       IN OUT VARCHAR2,\n   p_supplier_nbr    IN OUT VARCHAR2,\n   p_supplier_name   IN OUT CLOB,\n   p_mrpcontrollercd IN OUT VARCHAR2,\n   p_currency        IN   VARCHAR2,\n   oresultset        OUT  sys_refcursor,\n   p_err_cd          OUT  NUMBER,\n   p_err_msg         OUT  VARCHAR2\n)\nIS\nsqlquery varchar2(10000);\np1 varchar2(10);\np2 varchar2(20);\np3 varchar2(20);\np4 varchar2(20);\nv_percent varchar2(10):='%';\nV_FROM_CURRENCY VARCHAR2(5);\nV_EX_RATE NUMBER;\nv_matrl_nbr       VARCHAR2(10000);\nv_supplier_nbr    VARCHAR2(10000);\nv_supplier_name   CLOB;\nv_mrpcontrollercd  VARCHAR2(10000);\n\nBEGIN\np1:='matrl_nbr';\n v_matrl_nbr:=p_matrl_nbr;\n p2:='supplier_nbr';\n v_supplier_nbr :=p_supplier_nbr;\n p3:='supplier_name_txt';\n v_supplier_name :=p_supplier_name;\n p4:='mrp_controller_cd';\n v_mrpcontrollercd:=p_mrpcontrollercd; \nsqlquery:='select wk_nbr, nbr_working_days,'||p1||' as matrl_nbr ,'||p2||' as supplier_nbr,'||p3||' as supplier_name_txt,'||p4||' as mrp_controller_cd,sum(reqmnt_qty)reqmnt_qty , sum(proj_inven_qty)proj_inven_qty, sum(doh) doh,sum(proj_recpt_1) proj_recpt_1, sum(proj_recpt_2) proj_recpt_2, sum(proj_recpt_3) proj_recpt_3, sum(proj_recpt_4) proj_recpt_4,sum( proj_recpt_total_qty) proj_recpt_total_qty,sum(consumption_qty) consumption_qty, sum(consumption_var_qty) consumption_var_qty , sum(final_recpt_qty) final_recpt_qty,sum(recpt_var_qty) recpt_var_qty from GMMT_OWNER.OR_RMCE_GTT_PROJ_RECPT_T ';\nsqlquery:=sqlquery||' where ('''||v_matrl_nbr||''' IS NULL) OR matrl_nbr IN (SELECT * FROM TABLE(GMMT_PROC.OR_in_list_RPT5_FN('''||v_matrl_nbr||'''))) OR matrl_nbr like '''|| v_matrl_nbr||v_percent||'''';\nsqlquery:=sqlquery||' AND ('''||v_supplier_nbr||''' IS NULL) OR supplier_nbr IN (SELECT * FROM TABLE(GMMT_PROC.OR_in_list_RPT5_FN('''||v_supplier_nbr||'''))) OR supplier_nbr like '''|| v_supplier_nbr||v_percent||'''';\nsqlquery:=sqlquery||' AND ('''||v_supplier_name||''' IS NULL) OR supplier_name_txt IN (SELECT * FROM TABLE(GMMT_PROC.OR_in_list_RPT5_FN('''||v_supplier_name||'''))) OR supplier_name_txt like '''|| v_supplier_name||v_percent||'''';\nsqlquery:=sqlquery||' AND ('''||v_mrpcontrollercd||''' IS NULL) OR mrp_controller_cd IN (SELECT * FROM TABLE(GMMT_PROC.OR_in_list_RPT5_FN('''||v_mrpcontrollercd||'''))) OR mrp_controller_cd like '''|| v_mrpcontrollercd||v_percent||'''';\nsqlquery:=sqlquery||' group by wk_nbr, nbr_working_days,'||p1||','||p2||','||p3||','||p4||' order by wk_nbr';\n\nOPEN oresultset FOR sqlquery;\n\ndbms_output.put_line(sqlquery);\nEND;                \n</code></pre>\n"},{"tags":["mysql","sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":34,"score":-1,"question_id":13137745,"title":"MYSQL declare varchar issues","body":"<p>I am getting an error while declaring a varchar in MySQL\n<strong>DECLARE city varchar(20)</strong>;</p>\n\n<p>The above line of code works fine in <code>Oracle database</code> but not In MySQL.\nCan someone suggest me the solution?</p>\n\n<p>I am using MySQL 5.0.77. I saw this question on this site but could not find a suitable answer.</p>\n\n<p>One more question %ROWTYPE and %TYPE are these declarations there in MYSQL?</p>\n"},{"tags":["oracle","plsql","oracle10g","oracle11g","plsqldeveloper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":35,"score":-1,"question_id":13134072,"title":"How to solve numeric or value error?","body":"<p>In the below program,  procedure('newprocedure') got succesfully created coz oresult return Success but this line >>>>\noresult oot = odb.ExecuteSQL(\"Begin newprocedur(:ENAME,:ROLLNO); End;\"); its getting failed and getting this error>>>> ORA-06502: PL/SQL: numeric or value error: character to number conversion error\" .Please help me with solutions.</p>\n\n<p>And my table looks like this</p>\n\n<p>Egtable</p>\n\n<p>Roll Name \n1 kate \n3 Zac</p>\n\n<pre><code>`int _tmain(int argc, _TCHAR* argv[])\n  {\n   OStartup();\n   ODatabase odb;\n   oresult res = odb.Open(\"MICROSOFT\", \"OMNIPOS\", \"OMNIPOS\");\n   char pSqlStmt[500];\n   memset(pSqlStmt,0,sizeof(pSqlStmt));\n   OSqlStmt osql;\n   ///////////////////////////////procedure Creation/////////////////\n   strcpy(pSqlStmt,\"create or replace PROCEDURE newprocedure(inEmpName IN VARCHAR2 ,outEmpno   OUT NUMBER)\\n AS \\n\"); \n  strcat(pSqlStmt,\"BEGIN\\n\"); \n  strcat(pSqlStmt,\"select ROLL into outEmpno from Egtable WHERE NAME = inEmpName;\\n\"); \n // strcat(pSqlStmt,\"dbms_output.put_line('Roll'+outEmpno);\\n\");\n  strcat(pSqlStmt,\"outEmpno:=outEmpno+1;\\n\");\n  strcat(pSqlStmt,\"update Egtable set ROLL = outEmpno WHERE NAME = inEmpName;\\n\");\n  strcat(pSqlStmt,\"END;\\n\");\n  oresult ot = odb.ExecuteSQL(pSqlStmt);\n\n  if (ot == OSUCCESS) \n  {  \n   OValue val;\n   odb.GetParameters().Add(\"ENAME\",\"Zac\", OPARAMETER_INVAR, OTYPE_VARCHAR2);\n   odb.GetParameters().Add(\"ROLLNO\",0, OPARAMETER_OUTVAR, OTYPE_NUMBER); \n   oresult oot = odb.ExecuteSQL(\"Begin newprocedure(:ENAME,:ROLLNO); End;\");\n   oresult i = odb.GetParameters().GetParameter(\"ROLLNO\").GetValue(&amp;val);\n   cout&lt;&lt; \"value is \" &lt;&lt; (const char*) val&lt;&lt;endl;\n  }\n  else\n  { \n   cout&lt;&lt;\"ERR:\"&lt;&lt;odb.GetServerErrorText(); \n  } \n  odb.Close();\n  OShutdown();\n  }\n</code></pre>\n\n<p>`</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["sql","oracle","batch","sql-developer"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13137258,"title":"Oracle SQL Developer how to dynamicly run sql scripts","body":"<p>I have the following challange;</p>\n\n<p>I would like to execute a batch of *.sql files on one database. The sql files are assumed to be named in ascending order of their execution sequence. So the main sql script should do a 'dir /s *.sql', then start each of the found scripts in order.</p>\n\n<p>Is this possible ?</p>\n\n<p>Below is something I found for SQL Server, but I want something similar for Oracle SQL Developer.</p>\n\n<p><a href=\"http://pradeep1210.wordpress.com/2012/03/15/executing-a-set-of-sql-script-files-sql-on-a-group-of-sql-server-databases/\" rel=\"nofollow\">http://pradeep1210.wordpress.com/2012/03/15/executing-a-set-of-sql-script-files-sql-on-a-group-of-sql-server-databases/</a></p>\n\n<p>Thanks in advance.</p>\n\n<p>Raymond</p>\n"},{"tags":["oracle","oracle11g","schema","uml"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13103151,"title":"How to convert Oracle scheme into UML","body":"<p>I created Oracle scheme with Toad database modeler. I'm interested how I can convert it into UML diagram? Is there any tool that can convert it?</p>\n"},{"tags":["database","oracle","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13122697,"title":"How to specify the precision/scale JDBC metadata of Oracle numbers?","body":"<p>I need to force the precision and scale of a result column, to do custom formatting on currency values (I'm assuming every NUMBER(*,2) is a currency value).\nConsider the following query:</p>\n\n<pre><code>select cast(1234.56 as NUMBER(6,2)) from dual;\n</code></pre>\n\n<p>It does the expected rounding if necessary, but the result metadata describes a Number field with unspecified precision and scale:</p>\n\n<pre><code>System.out.println( rs.getMetaData().getScale(1) ); // prints 0;\n</code></pre>\n\n<p>I believe something strange is happening on the JDBC side, because the following script does return a NUMBER(6,2) as expected:</p>\n\n<pre><code>drop table temp;\ncreate table temp as (\nselect cast(1234.56 as NUMBER(6,2)) x from dual\n);\nselect * from temp;\n</code></pre>\n"},{"tags":["sql","oracle","oracle10g","pivot","unpivot"],"answer_count":4,"favorite_count":1,"up_vote_count":5,"down_vote_count":1,"view_count":86,"score":4,"question_id":13121775,"title":"fetch distinct column values in a single row","body":"<p>This is the data:</p>\n\n<pre><code>id    name     period      data1    data2\n===================================================\n111   name1    monthly     aaaaa    bbbbb\n111   name1    quaterly    ccccc    ddddd\n111   name1    halfYearly  eeeee    fffff\n111   name1    annually    ggggg    hhhhh\n</code></pre>\n\n<p>I want query which fetch data in a single row like</p>\n\n<pre><code>id    name     monthlYdata1    monthlYdata2      quaterlydata1    quaterlydata2      halfYearlydata1    halfYearlydata2      annuallydata1    annuallydata2\n==========================================================================================================================================================\n111   name1    aaaaa           bbbbb             ccccc            ddddd              eeeee              fffff                ggggg            hhhhh\n</code></pre>\n"},{"tags":["oracle","locking"],"answer_count":3,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":16853,"score":3,"question_id":2186848,"title":"How to find locked rows in Oracle","body":"<p>We have an Oracle database, and the customer account table has about a million rows. Over the years, we've built four different UIs (two in Oracle Forms, two in .Net), all of which remain in use. We have a number of background tasks (both persistent and scheduled) as well. </p>\n\n<p>Something is occasionally holding a long lock (say, more than 30 seconds) on a row in the account table, which causes one of the persistent background tasks to fail. The background task in question restarts itself once the update times out. We find out about it a few minutes after it happens, but by then the lock has been released.</p>\n\n<p>We have reason to believe that it might be a misbehaving UI, but haven't been able to find a \"smoking gun\".</p>\n\n<p>I've found some queries that list blocks, but that's for when you've got two jobs contending for a row. I want to know which rows have locks when there's not necessarily a second job trying to get a lock.</p>\n\n<p>We're on 11g, but have been experiencing the problem since 8i.</p>\n"},{"tags":["sql","oracle","query"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13135552,"title":"oracle SQL how to remove time from date","body":"<p>I have a column named <code>StartDate</code> containing a date in this format: <code>03-03-2012 15:22</code></p>\n\n<p>What I need is to convert it to date. It should be looking like this: <code>DD/MM/YYYY</code></p>\n\n<p>What I have tried without success is:</p>\n\n<pre><code>select \np1.PA_VALUE as StartDate,\np2.PA_VALUE as EndDate\nfrom WP_Work p \nLEFT JOIN PARAMETER p1 on p1.WP_ID=p.WP_ID AND p1.NAME = 'StartDate'\nLEFT JOIN PARAMETER p2 on p2.WP_ID=p.WP_ID AND p2.NAME = 'Date_To'\nWHERE p.TYPE = 'EventManagement2'\nAND TO_DATE(p1.PA_VALUE, 'DD/MM/YYYY') &gt;= TO_DATE('25/10/2012', 'DD/MM/YYYY')\nAND TO_DATE(p2.PA_VALUE, 'DD/MM/YYYY') &lt;= TO_DATE('26/10/2012', 'DD/MM/YYYY')\n</code></pre>\n\n<p>Is there a way to do this?</p>\n\n<p>EDIT1: the <code>PA_VALUE</code> column is: <code>VARCHAR2</code></p>\n"},{"tags":["oracle","plsql","oracle10g","oracle11g","plsqldeveloper"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":80,"score":0,"question_id":13118077,"title":"How to write a Procedure with multiple operations like select and update","body":"<p>Table</p>\n\n<pre><code>Id\nCount\n</code></pre>\n\n<p>I want to write a procedure to find '<code>Count</code>' in the table with '<code>Id</code>' as key.After getting '<code>count</code>' i have to increment it and update back in the table for that '<code>Id</code>'.How can I write this with procedure without using cursors.</p>\n\n<p>I want a simple procedure like below, BUT ITS NOT EXECUTING.IT SAYS PROCEDURE SUCCESSFUL WITH COMPILATION ERRORS.Help me out.</p>\n\n<pre><code>create or replace PROCEDURE newpro( inId IN NUMBER, outcount OUT NUMBER) is\nselect COUNT into outcount from Table1 WHERE ID= inId ;\nBEGIN \noutcount := outcount +1; \nupdate Table1 set COUNT = outcount WHERE ID = inId ; \nEND;\n</code></pre>\n"},{"tags":["c#","oracle","stored-procedures","ado.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":23,"score":-2,"question_id":13135673,"title":"Open two cursor in oracle and read value through datareader asp.net","body":"<p>I have a procedure written as follow</p>\n\n<pre><code>PROCEDURE PROC_GET_USERLANG \n (\n     IP_USERID IN VARCHAR2,\n     IP_QUESTIONCODE IN VARCHAR2,\n     OP_LANG_DATA OUT SYS_REFCURSOR,\n     OP_OS_DATA OUT SYS_REFCURSOR  \n )\n IS\n BEGIN\n    OPEN\n        OP_LANG_DATA\n    FOR\n        SELECT \n            LANGUAGECODE,\n            LANGUAGENAME,\n            ISDEFAULT                      \n        FROM\n            VW_USER_LANG VUL    \n        WHERE\n            VUL.USERUID=IP_USERID\n            AND LANGSTATUS='Y'\n            AND MAPPINGSTATUS='Y'\n        ORDER BY\n            VUL.LANGUAGENAME;\n\n     OPEN\n        OP_OS_DATA\n    FOR\n        SELECT\n            MOM.OS_CODE,\n            OM.OS_NAME,\n            MOM.IS_DEFAULT\n        FROM\n            MODEL_OS_MAPPING MOM,\n            OS_MST OM,\n            VW_QUESTION VQ\n        WHERE\n            OM.OS_CODE=MOM.OS_CODE \n            AND MOM.MODEL_CODE= VQ.MODELCODE\n            AND VQ.QUESTIONCODE=IP_QUESTIONCODE\n            AND MOM.STATUS='P'\n            AND OM.STATUS='Y' ;\n\n END;\n</code></pre>\n\n<p>When I am executing this procedure from oracle it is opening two cursor and giving me correct values.<br/>\nBut when I am calling it from the front end (C#) the only one cursor has values. There is no value in my second cursor.\n<br/>The C# code is as follows</p>\n\n<pre><code>public List&lt;CLanguageProps&gt; GetAllUserLang(String pstrUserId, String pstrQuestionCode, List&lt;COsProps&gt; pobModelAllOs)\n    {\n        var lobjAllLanguage = new List&lt;CLanguageProps&gt;();\n        try\n        {\n            OpenConnection();\n            Command.CommandType = CommandType.StoredProcedure;\n            Command.CommandText = \"PKG_LANGUAGE.PROC_GET_USERLANG\";\n            var prm = new OracleParameter[4];\n\n            prm[0] = Command.Parameters.Add(new OracleParameter(\"IP_USERID\", OracleType.VarChar, 10));\n            prm[0].Value = pstrUserId;\n\n            prm[1] = Command.Parameters.Add(new OracleParameter(\"IP_QUESTIONCODE\", OracleType.VarChar, 10));\n            prm[1].Value = pstrQuestionCode;\n\n            var lobjparameterLanguage = new OracleParameter\n                                            {\n                                                ParameterName = \"OP_LANG_DATA\", \n                                                OracleType = OracleType.Cursor,\n                                                Direction = ParameterDirection.Output\n                                            };\n            prm[2] = Command.Parameters.Add(lobjparameterLanguage);\n\n            var lobjparameterOs = new OracleParameter\n                                      {\n                                          ParameterName = \"OP_OS_DATA\",\n                                          OracleType = OracleType.Cursor,\n                                          Direction = ParameterDirection.Output\n                                      };\n            prm[3] = Command.Parameters.Add(lobjparameterOs);\n\n            var lobjdtreader = Command.ExecuteReader();\n            while (lobjdtreader.Read())\n            {\n                var lobjLanguage = new CLanguageProps\n                                       {\n                                           LanguageCode = lobjdtreader[\"LANGUAGECODE\"].ToString(),\n                                           LanguageName = lobjdtreader[\"LANGUAGENAME\"].ToString(),\n                                           IsDefault = lobjdtreader[\"ISDEFAULT\"].ToString()\n\n                                       };\n                lobjAllLanguage.Add(lobjLanguage);\n            }\n            lobjdtreader.NextResult();\n            while (lobjdtreader.Read())\n            {\n                var os = new COsProps\n                             {\n                                 OsName = lobjdtreader[\"OS_NAME\"].ToString(),\n                                 OsCode = lobjdtreader[\"OS_CODE\"].ToString(),\n                                 IsDefault = lobjdtreader[\"IS_DEFAULT\"].ToString(),\n\n                             };\n                pobModelAllOs.Add(os);\n            }\n            lobjdtreader.Dispose();\n        }\n        catch (Exception ex)\n        {\n            throw ex;\n        }\n        finally\n        {\n            Command.Dispose();\n            CloseConnection();\n        }\n        return lobjAllLanguage;\n    }\n</code></pre>\n\n<p>Am I missing something. I am using ado.net for connecting to oracle.</p>\n"},{"tags":["oracle","stored-procedures","plsql","feedback","output"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13135561,"title":"How to display output from stored procedure?","body":"<p>I am handling millions of rows and it takes hours, so I want some feedback to give me an idea about the status of the process. It won't be possible to have real time feedback from a stored procedure since the output will be available only after the complete execution. Any solution?</p>\n"},{"tags":["sql","oracle","plsql","oracle10g","cascading-deletes"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13133148,"title":"Deleting rows from multiple related tables","body":"<p>There are three tables related one-to-one on the identifier. I need to delete all the records from the three tables that match the criteria A.ID = B.ID = C.ID</p>\n\n<p>Now I do it in the following way:</p>\n\n<pre><code>DECLARE\n    CURSOR CUR IS \n        SELECT C.ID FROM A \n        INNER JOIN B ON A.\"ID\" = B.\"ID\" \n        INNER JOIN C ON B.\"ID\" = C.\"ID\"\n        WHERE A.STATUS = 'ERROR';\n    IDX NUMBER;\nBEGIN\n    FOR REC IN CUR LOOP \n        IDX := REC.ID;\n        DELETE FROM C WHERE C.\"ID\" = IDX;\n        DELETE FROM B WHERE B.\"ID\" = IDX;\n        DELETE FROM A WHERE BP.\"ID\" = IDX;\n    END LOOP;\n    COMMIT;\nEND;\n</code></pre>\n\n<p>A lot of data and this way for very long runs. Is there any way to delete faster?</p>\n"},{"tags":["sql","oracle","oracle11g","constraints","alter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":31,"score":0,"question_id":13131039,"title":"Constraint on multiple columns","body":"<p>I have a table that contains 7 columns(f_name, l_name, sex, birth_date, matri_num,dept,sal) and i want to add a constraint to verify that of out the 3 columns(f_name, l_name,birth_date) at least 2 was filled.</p>\n"},{"tags":["xml","oracle","plsql","oracle10g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13134170,"title":"Using Oracle XMLElement in complex PL/SQL","body":"<p>Using Oracle 10gR2, I need to produce something like the following pseudo-example from data stored in standard relational tables.</p>\n\n<pre><code>&lt;product&gt;\n  &lt;productName&gt;p1&lt;/productName&gt;\n  &lt;productNumber&gt;100&lt;/productNumber&gt;\n  &lt;productObsoletes&gt;\n     &lt;obsoletedProduct label=1&gt;50&lt;/obsoletedProduct&gt;\n     &lt;obsoletedProduct label=2&gt;55&lt;/obsoletedProduct&gt;\n  &lt;/productObsoletes&gt;\n&lt;/product&gt;\n</code></pre>\n\n<p>The problem is, I need to do decision making using the rows which contain the data.  My database (which I inherited) is poorly designed and the logic needed to decide upon a rows inclusion is complex.  Unfortunately, redesigning the database is not an option.  I'm vastly simplifying the logic here, so it's not a case where a simple join or where clause can be used.  There's a complex hierarchy to the data, and the data format definition.</p>\n\n<p>In psuedo code, the way-oversimplified decision would look something like:</p>\n\n<pre><code>BEGIN\n   --select our basic attributes\n\n     select XMLEMENT(\"product\",XMLELEMENT(\"productName\",name),XMLELEMENT(\"productNumber\",product_number))\ninto xml_output from products where product_number = 100;\n\n   --now process our obsolete rows\n   select XMLELEMENT(\"productObsoletes\") into xml_output from dual;\n   FOR c_row in (select * from product_obsoletes where id=100)\n   LOOP\n       IF c_row.display = 'YES' THEN\n        select XMLELEMENT(\"obsoletedProduct\", XMLATTRIBUTES(c_row.label as \"label\"), c_row.obsoleted_product_id) into xml_output from dual;\n       ELSE\n          CONTINUE;\n       END IF;\n   END LOOP;\nEND;\n</code></pre>\n\n<p>Obviously though, this doesn't work.  First, XMLElement always puts a closing tag on, so unless you can formulate a single select statement containing all of your elements, it's not going to work. Second, in this example, I'd be overwriting the previous XMLELEMENT output.  I can't concatenate, because XMLELEMENT has already closed the tag.</p>\n\n<p>The only solution I can think of at this point is to select the various XMLElement pieces I need into different VARCHARS and then use string manipulation functions to find the right spot to insert the various pieces.  Ugly with a capital-U.</p>\n\n<p>Is there another solution?  Is there perhaps a way to prevent XMELEMENT from closing the tag so that you can you use complex looping logic?  Or another Oracle construct which would allow me to achieve my goal of building up this XML without having to use a single select statement?</p>\n\n<p>My path of last resort would be to do the XML generation from another language such as Java or Perl where I could simply fetch the data and then do my complex processing and XML generation there.  However, I'd much prefer just to have a SQL function which would return the correct XML as a string, so if it's possible to do it in PL/SQL, that'd be my preferred route.</p>\n"},{"tags":["sql","perl","oracle","parsing","lexical-analysis"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13132696,"title":"Parse Oracle Query using perl","body":"<p>I have to perform lexical analysis on the oracle query and separate the query to various parts (based on the clauses)in perl. For example,Consider : </p>\n\n<pre><code>Select deleteddate,deletedby from temptable where id = 10;\n</code></pre>\n\n<p>I need to print </p>\n\n<pre><code>select : deleteddate , deletedby\nfrom : temptable\nwhere : id = 10\n</code></pre>\n\n<p>I used this code snippet : </p>\n\n<pre><code>my $parser= SQL::Statement-&gt;new();\n$parser-&gt;{PrinteError}=1;\nmy $query = SQL::Statement-&gt;new(\"select deleteddate,deletedby from temptable where id =10\",$parser);\n\nmy @columns = $query-&gt;columns();\n\nprint $columns[0]-&gt;name();\n</code></pre>\n\n<p>Though this prints deleteddate, this fails when i give a subquery inside the select clause:</p>\n\n<pre><code>Select deleteddate,deletedby,(select 1+1 from dual) from temptable where id = 10;\n</code></pre>\n\n<p>Can you please point me in the correct direction.</p>\n\n<p>Thanks.</p>\n"},{"tags":["sql-server","oracle","sql-server-2008","sql-server-2005","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13133378,"title":"Data Migration From Oracle To SQL Server","body":"<p>I have Oracle database in that in one or more table I have blob data also, i.e. images are stored, now I would like to move that data to sql server database, what is the best way to do this ?</p>\n\n<p>I would like to test for one table migration which contains image data in the Oracle database and move into SQL Server table.</p>\n\n<p>How do I test for migrating data from one table from Oracle to SQL Server ?</p>\n\n<p>but first thing I would like to confirm is that whether Image data moving from Oracle DB to SQL Server DB is possible, is there anything has to be taken care while migrating ?</p>\n\n<p>Thanks in advance.</p>\n\n<p>With Best Regards</p>\n"},{"tags":["sql","oracle","join","sql-update","sql-developer"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":57,"score":0,"question_id":13117317,"title":"Update table with joining another table","body":"<p>I want to set field <code>f1</code> in table <code>t1</code> with the value <code>122</code> if field <code>f2</code> in table <code>t2</code> has value <code>134</code>. Suppose field <code>f34</code> is the key between table <code>t1</code> and <code>t2</code>.<br>\nHow would I write the query for this in SQL Developer?</p>\n"},{"tags":["oracle","query","notin"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":224,"score":3,"question_id":12982568,"title":"NOT IN query... odd results","body":"<p>I need a list of users in one database that are not listed as the <code>new_user_id</code> in another.  There are 112,815 matching users in both databases; <code>user_id</code> is the key in all queries tables.</p>\n\n<p><br />\nQuery #1 works, and gives me 111,327 users who are NOT referenced as a new_user_Id.  But it requires querying the same data twice.</p>\n\n<pre><code>-- 111,327 GSU users are NOT listed as a CSS new user \n--   1,488 GSU users ARE listed as a new user in CSS\n--\nselect count(gup.user_id)\nfrom   gsu.user_profile gup\n  join (select cud.user_id, cud.new_user_id, cud.user_type_code\n        from   css.user_desc cud) cudsubq\n    on gup.user_id = cudsubq.user_id\nwhere  gup.user_id not in (select cud.new_user_id \n                           from   css.user_desc cud\n                           where  cud.new_user_id is not null);\n</code></pre>\n\n<p><br />\nQuery #2 would be perfect... and I'm actually surprised that it's syntactically accepted.  But it gives me a result that makes no sense.</p>\n\n<pre><code>-- This gives me 1,505 users... I've checked, and they are not\n-- referenced as new_user_ids in CSS, but I don't know why the ones \n-- that were excluded were excluded.\n--\n-- Where are the missing 109,822, and whatexcluded them?\n-- \nselect count(gup.user_id)\nfrom   gsu.user_profile gup\n  join (select cud.user_id, cud.new_user_id, cud.user_type_code\n        from   css.user_desc cud) cudsubq\n    on gup.user_id = cudsubq.user_id\nwhere  gup.user_id not in (cudsubq.new_user_id);\n</code></pre>\n\n<p><br />\nWhat exactly is the where clause in the second query doing, and why is it excluding 109,822 records from the results?</p>\n\n<p><br />\n<strong>Note</strong>  The above query is a simplification of what I'm really after.  There are other/better ways to do the above queries... they're just representative of the part of the query that's giving me problems.</p>\n"},{"tags":["sql","oracle","hierarchical-data"],"answer_count":2,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":178,"score":6,"question_id":12959153,"title":"Excluding results that appear in another column of a CONNECT BY query","body":"<p>Have a heavy query (takes 15 minutes to run), but it's returning more results than I need.  It's a CONNECT BY query, and I'm getting nodes that are descendants in the root node results.  I.E.:</p>\n\n<pre><code>Ted\n  Bob\n    John\nBob\n  John\nJohn\n</code></pre>\n\n<p>Normally, the way to resolve this is using a START WITH condition, typically requiring the parent of a node to be null.  But due to the nature of the query, I don't have the START WITH values I need to compare to until I have the full resultset.  I'm basically trying to double-query my results to say QUERY STUFF START WITH RECORDS THAT AREN'T IN THAT STUFF.</p>\n\n<p><br />\nHere's the query (built with the help of <a href=\"http://stackoverflow.com/users/997660/nicholas-krasnov\">Nicholas Krasnov</a>, here:  <a href=\"http://stackoverflow.com/questions/12886371/oracle-self-join-on-multiple-possible-column-matches-connect-by/12888591\">Oracle Self-Join on multiple possible column matches - CONNECT BY?</a>):</p>\n\n\n\n<pre><code>select cudroot.root_user, cudroot.node_level, cudroot.user_id, cudroot.new_user_id,\n       cudbase.*  -- Not really, just simplyfing\nfrom   css.user_desc cudbase\n  join (select connect_by_root(user_id) root_user,   \n               user_id                  user_id,        \n               new_user_id              new_user_id,\n               level                    node_level\n        from   (select cudordered.user_id,      \n                       coalesce(cudordered.new_user_id, cudordered.nextUser) new_user_id\n                from   (select cud.user_id, \n                               cud.new_user_id, \n                               decode(cud.global_hr_id, null, null, lead(cud.user_id ignore nulls) over (partition by cud.global_hr_id order by cud.user_id)) nextUser\n                        from   css.user_desc cud\n                          left join gsu.stg_userdata gstgu\n                            on (gstgu.user_id = cud.user_id \n                                or (gstgu.sap_asoc_global_id = cud.global_hr_id))\n                        where  upper(cud.user_type_code) in ('EMPLOYEE','CONTRACTOR','DIV_EMPLOYEE','DIV_CONTRACTOR','DIV_MYTEAPPROVED')) cudordered)\n        connect by nocycle user_id = prior new_user_id) cudroot\n    on cudbase.user_id = cudroot.user_id\norder by \n       cudroot.root_user, cudroot.node_level, cudroot.user_id;\n</code></pre>\n\n<p><br />\nThis gives me results about related users (based off of user_id renames or associated SAP IDs) that look like this:</p>\n\n<pre><code>ROOT_ID     LEVEL   USER_ID         NEW_USER_ID\n------------------------------------------------\nA5093522    1       A5093522        FG096489\nA5093522    2       FG096489        A5093665\nA5093522    3       A5093665        \nFG096489    1       FG096489        A5093665\nFG096489    2       A5093665\nA5093665    1       A5093665\n</code></pre>\n\n<p>What I need is a way to filter the first <code>join (select connect_by_root(user_id)...</code> to exclude <code>FG096489</code> and <code>A5093665</code> from the root list.  </p>\n\n<p><br />\nThe best <code>START WITH</code> I can think of would look like this (not tested yet):</p>\n\n<pre><code>start with user_id not in (select new_user_id \n                           from   (select coalesce(cudordered.new_user_id, cudordered.nextUser) new_user_id\n                                   from   (select cud.new_user_id, \n                                                  decode(cud.global_hr_id, null, null, lead(cud.user_id ignore nulls) over (partition by cud.global_hr_id order by cud.user_id)) nextUser\n                                           from   css.user_desc cud\n                                           where  upper(cud.user_type_code) in ('EMPLOYEE','CONTRACTOR','DIV_EMPLOYEE','DIV_CONTRACTOR','DIV_MYTEAPPROVED')) cudordered)\n                           connect by nocycle user_id = prior new_user_id)\n</code></pre>\n\n<p>... but I'm effectively executing my 15 minute query twice.</p>\n\n<p>I've looked at using partitions in the query, but there's not really a partition... I want to look at the full resultset of new_user_ids.  Have also explored analytical functions such as rank()... my bag of tricks is empty.</p>\n\n<p>Any ideas?</p>\n\n<p><br />\n<strong>Clarification</strong></p>\n\n<p>The reason I don't want the extra records in the root list is because I only want one group of results for each user.  I.E., if Bob Smith has had four accounts during his career here (people come and go frequently, as employees and/or contractors), I want to work with a set of accounts that all belong(ed) to Bob Smith.</p>\n\n<p>If Bob came here as an contractor, converted to an employee, left, came back as a contractor in another country, and left/returned to a legal org that is now in our SAP system, his account rename/chain might look like:</p>\n\n<pre><code>Bob Smith  CONTRACTOR   ----    US0T0001  -&gt;  US001101  (given a new ID as an employee)\nBob Smith  EMPLOYEE     ----    US001101  -&gt;  EB0T0001  (contractor ID for  the UK)\nBob Smith  CONTRACTOR  SAP001   EB0T000T                (no rename performed)\nBob Smith  EMPLOYEE    SAP001   TE110001                (currently-active ID)\n</code></pre>\n\n<p>In the above example, the four accounts are linked by either a <code>new_user_id</code> field that was set when the user was renamed or through having the same SAP ID.</p>\n\n<p>Because HR frequently fails to follow the business process, returning users may end up with any of those four ID being restored to them.  I have to analyze all the IDs for Bob Smith and say \"Bob Smith can only have TE110001 restored\", and kick back an error if they try to restore something else.  I have to do it for 90,000+ records.</p>\n\n<p>The first column, \"Bob Smith\", is just an identifier to the group of associated accounts.  In my original example, I'm using the root User ID as the identifier (e.g. US0T0001).  If I use first/last names to identify users, I end up with collisions.</p>\n\n<p>So Bob Smith would look like this:</p>\n\n<pre><code>US0T0001  1  CONTRACTOR   ----    US0T0001  -&gt;  US001101  (given a new ID as an employee)\nUS0T0001  2  EMPLOYEE     ----    US001101  -&gt;  EB0T0001  (contractor ID for  the UK)\nUS0T0001  3  CONTRACTOR  SAP001   EB0T0001                (no rename performed)\nUS0T0001  4  EMPLOYEE    SAP001   TE110001                (currently-active ID)\n</code></pre>\n\n<p>... where 1, 2, 3, 4 are the levels in the heirarchy.  </p>\n\n<p>Since US0T0001, US001101, EB0T0001, and TE110001 are all accounted for, I don't want another group for them.  But the results I have now have those accounts listed in multiple groups:  </p>\n\n<pre><code>US001101  1  EMPLOYEE     ----    US001101  -&gt;  EB0T0001  (\nUS001101  2  CONTRACTOR  SAP001   EB0T0001                \nUS001101  3  EMPLOYEE    SAP001   TE110001               \n\nEB0T0001  1  CONTRACTOR  SAP001   EB0T0001               \nEB0T0001  2  EMPLOYEE    SAP001   TE110001                \n\nUS001101  1  EMPLOYEE    SAP001   TE110001                 \n</code></pre>\n\n<p>This causes two problems:</p>\n\n<ol>\n<li>When I query the results for a User ID, I get hits from multiple groups</li>\n<li>Each group will report a different expected user ID for Bob Smith.</li>\n</ol>\n\n<p><br />\nYou asked for an expanded set of records... here are some actual data:</p>\n\n<pre><code>-- NumRootUsers tells me how many accounts are associated with a user.\n-- The new user ID field is explicitly set in the database, but may be null.\n-- The calculated new user ID analyzes records to determine what the next related record is\n\n          NumRoot                   New User    Calculated\nRootUser  Users    Level  UserId    ID Field    New User ID   SapId       LastName        FirstName\n-----------------------------------------------------------------------------------------------\nBG100502  3        1      BG100502  BG1T0873    BG1T0873                  GRIENS VAN      KION\nBG100502  3        2      BG1T0873  BG103443    BG103443                  GRIENS VAN      KION\nBG100502  3        3      BG103443                            41008318    VAN GRIENS      KION\n\n-- This group causes bad matches for Kion van Griens... the IDs are already accounted for,\n-- and this group doesn't even grab all of the accounts for Kion.  It's also using a new \n-- ID to identify the group\nBG1T0873  2        1      BG1T0873  BG103443    BG103443                  GRIENS VAN      KION\nBG1T0873  2        2      BG103443                            41008318    VAN GRIENS      KION\n\n-- Same here...\nBG103443  1        1      BG103443                            41008318    VAN GRIENS      KION\n\n-- Good group of records \nBG100506  3        1      BG100506              BG100778      41008640    MALEN VAN       LARS\nBG100506  3        2      BG100778              BG1T0877      41008640    MALEN VAN       LARS\nBG100506  3        3      BG1T0877                            41008640    VAN MALEN       LARS\n\n-- Bad, unwanted group of records\nBG100778  2        1      BG100778              BG1T0877      41008640    MALEN VAN       LARS\nBG100778  2        2      BG1T0877                            41008640    VAN MALEN       LARS\n\n-- Third group for Lars\nBG1T0877  1        1      BG1T0877                            41008640    VAN MALEN       LARS\n\n\n-- Jan... fields are set differently than the above examples, but the chain is calculated correctly\nBG100525  3        1      BG100525              BG1T0894      41008651    ZANWIJK VAN     JAN\nBG100525  3        2      BG1T0894  TE035165    TE035165      41008651    VAN ZANWIJK     JAN\nBG100525  3        3      TE035165                            41008651    VAN ZANWIJK     JAN\n\n-- Bad\nBG1T0894  2        1      BG1T0894  TE035165    TE035165      41008651    VAN ZANWIJK     JAN\nBG1T0894  2        2      TE035165                            41008651    VAN ZANWIJK     JAN\n\n-- Bad bad\nTE035165  1        1      TE035165                            41008651    VAN ZANWIJK     JAN\n\n\n-- Somebody goofed and gave Ziano a second SAP ID... but we still matched correctly\nBG100527  3        1      BG100527              BG1T0896      41008652    STEFANI DE      ZIANO\nBG100527  3        2      BG1T0896  TE033030    TE033030      41008652    STEFANI DE      ZIANO\nBG100527  3        3      TE033030                            42006172    DE STEFANI      ZIANO\n\n-- And we still got extra, unwanted groups\nBG1T0896  3        2      BG1T0896  TE033030    TE033030      41008652    STEFANI DE      ZIANO\nBG1T0896  3        3      TE033030                            42006172    DE STEFANI      ZIANO\n\nTE033030  3        3      TE033030                            42006172    DE STEFANI      ZIANO\n\n\n-- Mark's a perfect example of the missing/frustrating data I'm dealing with... but we still matched correctly\nBG102188  3        1      BG102188              BG1T0543      41008250    BULINS          MARK\nBG102188  3        2      BG1T0543              TE908583      41008250    BULINS          R.J.M.A.\nBG102188  3        3      TE908583                            41008250    BULINS          RICHARD JOHANNES MARTINUS ALPHISIUS\n\n-- Not wanted\nBG1T0543  3        2      BG1T0543              TE908583      41008250    BULINS          R.J.M.A.\nBG1T0543  3        3      TE908583                            41008250    BULINS          RICHARD JOHANNES MARTINUS ALPHISIUS\n\nTE908583  3        3      TE908583                            41008250    BULINS          RICHARD JOHANNES MARTINUS ALPHISIUS\n\n\n-- One more for good measure\nBG1T0146  3        1      BG1T0146  BG105905    BG105905                  LUIJENT         VALERIE\nBG1T0146  3        2      BG105905              TE034165      42006121    LUIJENT         VALERIE\nBG1T0146  3        3      TE034165                            42006121    LUIJENT         VALERIE\n\nBG105905  3        2      BG105905              TE034165      42006121    LUIJENT         VALERIE\nBG105905  3        3      TE034165                            42006121    LUIJENT         VALERIE\n\nTE034165  3        3      TE034165                            42006121    LUIJENT         VALERIE\n</code></pre>\n\n<p>Not sure if all that info makes it clearer or will make your eyes roll back into your head : )</p>\n\n<p>Thanks for looking at this!</p>\n"},{"tags":["sql","oracle","view"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13131579,"title":"View loses its grants when modifying","body":"<p>Is it normal for an oracle view to loose all its grants when modifying the source SQL?\nI am using SQL Developer if that has anything to do with it.</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13131797,"title":"Using trim in where clause in ORACLE SQL","body":"<p>I'm trying to figure out why the below SQL statement does not return the value do in oracle</p>\n\n<pre><code>Select 'do' from dual\nwhere trim('  ') = ''\n</code></pre>\n\n<p>Where as </p>\n\n<pre><code>Select 'do' from dual\nwhere trim(' a ')='a'\n</code></pre>\n\n<p>returns the value do.</p>\n\n<p>Any help on this is appreciated.</p>\n"},{"tags":["sql","oracle","dbms"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":35,"score":0,"question_id":13125534,"title":"check if all values in a column of one table exists in another table","body":"<p>I wanted to know the command to check if all the values in one table(created using select statement) is present in the other table (created using select command) all in one select statement.for eg ,i have a attribute <code>fid</code> and <code>faculty_name</code> in <strong>faculty table</strong> and <code>fid</code> ,<code>class_name</code>, <code>room_n</code>o in another. <strong><em>how do i check all faculty who teaches in all the room present?</em></strong></p>\n"},{"tags":["database","oracle","transactionscope"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":11,"score":1,"question_id":13130893,"title":"Oracle column not available in subsequent transactions","body":"<p>For our ASP.NET application we use a C# console application to maintain our Oracle and SQLServer databases.  Individual scripts are loaded and run in numerical order (the script names have the number), and committed when the script is complete.</p>\n\n<p>This is a legacy application, and we are moving away from this format in the future, however for now we need to maintain it with as little modification as possible.</p>\n\n<p>Recently, we added two columns to our DB_VERSION table: APP_MAJOR and APP_MINOR.  This addition was done in one of our scripts, with the purpose being to allow us to track what release of our product the database was last updated to.</p>\n\n<p>When each script completes execution and is committed (using IDbContext and IDbTransaction), the application updates the DB_VERSION table with the major/minor version of the application along with the number of the script.  Prior to adding the Major/Minor columns, the application just updated the script number.</p>\n\n<p>In SQLServer, there are no issues at all - when the application completes, the DB_VERSION table properly indicates the version of the app.  However, in Oracle, the APP_MAJOR and APP_MINOR columns are never updated.</p>\n\n<p>I have tracked this to the query we use that verifies whether or not the table as the new columns - and even after script execution is complete, the new columns are not showing up.  It appears that Oracle is caching the previous query so never makes the new columns available for update (though the Version column that was always updated continues to be updated properly).</p>\n\n<p>We have tried manually closing the connection, completely terminating the context and putting in a 5 second wait period to allow the pools to expire (I know, I know), changing the structure of the script itself to use straight DDL - all to no avail.  Adding a statement to clear the Oracle cache also failed because of a permissions error.</p>\n\n<p>I would put code here for your review, but there are too many places where there could be a problem - I'm hoping someone can provide a general direction for us to take.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["mysql","oracle","create-table"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":38,"score":-5,"question_id":13130124,"title":"Write SQL CREATE TABLE statements to create the following database","body":"<p>I have to make tables for the following code. also i have to insert values i have very little knowledge on how to do it. I'd really appreciate it if someone could help me out</p>\n\n<pre><code>CUSTOMER (CID, FNAME, MIDDLE, LNAME, STREET, CITY, STATE, ZIP, PHONE, BIRTH_YR)\n\nVALUE_CUSTOMER (CID, DISCOUNT)\nForeign Key (CID) references CUSTOMER\nConstraint DISCOUNT Between 1 And 5\n\nPERFORMER (STAGE_NM, NAME, CHRIST_NM)\n\nFILM (FILM_ID, TITLE, CATEGORY, RATE)\n\nFOREIGN (FILM_ID, SPOKEN, SUBTITLE)\n    Foreign Key (FILM_ID) references FILM\n\nEDUCATIONAL (FILM_ID, AGE)\n    Foreign Key (FILM_ID) references FILM\nConstraint AGE In (“infant”, “child”, “teenager”, “adult”, “senior”)\n\nPERFORMANCE (STAGE_NM, FILM_ID, ROLE)\nForeign Key (STAGE_NM) references PERFORMER\nForeign Key (FILM_ID) references FILM\n\nDVD (FILM_ID, DVD_NUM, CONDITION)\n    Foreign Key (FILM_ID) references FILM\nConstraint CONDITION Between 1 And 5\n\n\nRENT (CID, FILM_ID, DVD_NUM, DATE, DUE_DT, TOT_AMT)\nForeign Key (CID) references CUSTOMER\nForeign Key (FILM_ID, DVD_NUM) references DVD\n</code></pre>\n"},{"tags":["database","oracle","jdbc","multiple-databases"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":13127541,"title":"Failure trying to get a pooled connection. java.sql.SQLException: Protocol violation","body":"<p>I'm administering a web-based application that is set-up to pull in data from a variety of databases; SQL, Oracle, Mainframe, etc.</p>\n\n<p>I was given credentials to access an Oracle DB, and am establishing a connection through the web-based app server via JDBC. The JDBC connection requires me to provide a Database URL and JDBC driver for the connection. I also built in a SQL statement to pull only the information I needed from the Oracle DB into my web-based app.</p>\n\n<p>Things were running smoothly with this set-up, until just recently. I now receive the following error when trying to establish a connection from my web-based app to the Oracle DB:</p>\n\n<pre><code>Failure trying to get a pooled connection to \n[jdbc:oracle:thin:@&lt;SERVER NAME&gt;:1521:cqdb]java.sql.SQLException: Protocol violation\n</code></pre>\n\n<p>The Oracle DBA I work with is not very helpful in resolving in helping me troubleshoot this issue. Without his help, I really don't even know where to start with troubleshooting. </p>\n\n<p>Any suggestions on where to start? I can provide additional information if needed.</p>\n\n<p>*Additional information. This is what is in my STDOUT file in relation to the error. I can keep digging as well:</p>\n\n<pre><code>07:31:08,565  WARN QuartzScheduler_Worker-5 WEB-APP.api.Aggregator:979 - Exception during aggregation. Reason: Failure trying to get a pooled connection to [jdbc:oracle:thin:@SERVER-NAME:1521:cqdb]java.sql.SQLException: Protocol violation\nWEB-APP.tools.GeneralException: Failure trying to get a pooled connection to [jdbc:oracle:thin:@SERVER-NAME:1521:cqdb]java.sql.SQLException: Protocol violation\n    at WEB-APP.api.Aggregator.aggregateAccounts(Aggregator.java:1897)\nat WEB-APP.api.Aggregator.execute(Aggregator.java:1222)\nat WEB-APP.task.ResourceIdentityScan.execute(ResourceIdentityScan.java:76)\nat WEB-APP.api.TaskManager.runSync(TaskManager.java:643)\nat WEB-APP.scheduler.JobAdapter.execute(JobAdapter.java:116)\nat org.quartz.core.JobRunShell.run(JobRunShell.java:202)\nat org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:529)\nCaused by: WEB-APP.connector.ConnectorException: Failure trying to get a pooled connection to [jdbc:oracle:thin:@SERVER-NAME:1521:cqdb]java.sql.SQLException: Protocol violation\nat WEB-APP.connector.JDBCConnector.getConnection(JDBCConnector.java:833)\nat WEB-APP.connector.JDBCConnector.iterateObjects(JDBCConnector.java:649)\nat WEB-APP.connector.JDBCConnector.iterateObjects(JDBCConnector.java:90)\nat WEB-APP.connector.ConnectorProxy.iterateObjects(ConnectorProxy.java:109)\nat WEB-APP.api.Aggregator.iterateObjects(Aggregator.java:2673)\nat WEB-APP.api.Aggregator.aggregateAccounts(Aggregator.java:1818)\n... 6 more\nCaused by: WEB-APP.tools.GeneralException: Failure trying to get a pooled connection to [jdbc:oracle:thin:@SERVER-NAME:1521:cqdb]java.sql.SQLException: Protocol violation\n    at WEB-APP.tools.JdbcUtil.getPooledConnection(JdbcUtil.java:1178)\n    at WEB-APP.tools.JdbcUtil.getConnection(JdbcUtil.java:823)\nat WEB-APP.connector.JDBCConnector.getConnection(JDBCConnector.java:830)\n... 11 more\n07:33:03,983 ERROR http-8080-2 WEB-APP.server.Authenticator:229 - WEB-APP.connector.AuthenticationFailedException: [LDAP: error code 49 - 80090308: LdapErr: DSID-0C090334, comment: AcceptSecurityContext error, data 52e, vece\n</code></pre>\n\n<p>**Additional Information:\nOracle JDBC Driver version 14, JRE ver 1.6.0_23-b05. I don't have the Oracle DB version. Awaiting response from our Oracle DBA.</p>\n\n<p>***Additional Information:\nThis issue was resolved. Our Oracle DBA did something on his end to correct the connection issue. He hasn't explained what he did, yet. Thanks for your help. Sorry for not getting you all the info you needed up front.</p>\n"},{"tags":["oracle","jsp","jdbc"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13122589,"title":"How to get all dropdown values","body":"<p>i've a case where i have to get the total of all the dropdown elements. i'm able to achieve it individually. and the below is the code that worked for individual selection. </p>\n\n<pre><code>&lt;%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%&gt;  \n&lt;!DOCTYPE html&gt;  \n&lt;html&gt;  \n&lt;head&gt;  \n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;  \n    &lt;title&gt;JSP Page&lt;/title&gt;  \n&lt;/head&gt;  \n&lt;body&gt;&lt;form name=\"Reports\" method=\"post\" action=\"Reports.jsp\"&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;  \n    Select user:&lt;select name=\"user\" id=\"user\"&gt;  \n        &lt;option value=\"\"&gt;Select User&lt;/option&gt;  \n        &lt;option value=\"Rakesh\"&gt;Rakesh&lt;/option&gt;  \n        &lt;option value=\"Hari\"&gt;Hari&lt;/option&gt;  \n    &lt;/select&gt;&lt;/td&gt;&lt;td&gt;  \n    Select Type:&lt;select name=\"type\" id=\"type\"&gt;  \n        &lt;option value=\"'Updates','Multibases','DAIS','Acds','Legis','LegAll'\"&gt;All&lt;/option&gt;  \n        &lt;option value=\"Updates\"&gt;Updates&lt;/option&gt;    \n        &lt;option value=\"Multibases\"&gt;Multibases&lt;/option&gt;  \n        &lt;option value=\"DAIS\"&gt;DAIS&lt;/option&gt;  \n        &lt;option value=\"Acds\"&gt;Admin Codes&lt;/option&gt;  \n        &lt;option value=\"Legis\"&gt;Legis&lt;/option&gt;  \n        &lt;option value=\"LegAll\"&gt;Legis-All&lt;/option&gt;  \n            &lt;/select&gt;&lt;/td&gt;  \n            &lt;td&gt;&lt;input type=\"submit\" value=\"Generate\" id=\"sub1\" name=\"sub1\"&gt;&lt;/td&gt;&lt;/tr&gt;  \n    &lt;/table&gt; &lt;/form&gt;   &lt;/body&gt;  \n</code></pre>\n\n<p>  </p>\n\n<p>and the jsp is below</p>\n\n<pre><code>&lt;%--   \nDocument   : Reports  \nCreated on : Oct 25, 2012, 4:53:23 PM  \nAuthor     : u0138039  \n--%&gt;  \n\n&lt;%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%&gt;  \n&lt;%@include file=\"DBCon.jsp\" %&gt;  \n&lt;!DOCTYPE html&gt;  \n&lt;html&gt;  \n&lt;head&gt;  \n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;  \n\n&lt;/head&gt;  \n&lt;body&gt;&lt;table&gt;  \n    &lt;%  \n\n    String[] a=request.getParameterValues(\"type\");  \n    String b=request.getParameter(\"user\");  \n    try{  \n        ps=con.prepareStatement(\"Select * from Scope1\");  \n\n        ps=con.prepareStatement(\"SELECT SUM(Update_Count) FROM Scope1 where type ='\"+a+\"' and Specialist='\"+b+\"'\");  \n        rs=ps.executeQuery();  \n        while(rs.next())  \n                           {%&gt;  \n                           &lt;tr&gt;  \n                               &lt;td&gt;&lt;%=a%&gt;:&lt;/td&gt;&lt;td&gt;  \n                               &lt;%=rs.getString(1)%&gt;  \n                               &lt;/td&gt;&lt;/tr&gt;  \n      &lt;% }  \n\n                   }  \n    catch(Exception e)  \n    {  \n        out.println(e);  \n}  \n%&gt;  \n</code></pre>\n\n<p> <br>\n  </p>\n\n<p>and to retrieve all the values from drop down i use the below sql code</p>\n\n<pre><code>SELECT SUM(Update_Count) FROM Scope1 where type IN ('All','Updates','Multibases','DAIS','Acds','Legis','LegAll') and Specialist='b';\n</code></pre>\n\n<p>and to retrieve individually i use the below code</p>\n\n<pre><code> ps=con.prepareStatement(\"SELECT SUM(Update_Count) FROM Scope1 where type IN ('\"+a+\"') and Specialist='\"+b+\"'\");\n</code></pre>\n\n<p>i want this to be in a single statement and also i want the output to be displayed in a table format when i select all.</p>\n\n<p>Thanks</p>\n"},{"tags":["visual-studio","oracle","windows-7"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1135,"score":2,"question_id":2415821,"title":"System.Data.OracleClient on Windows 7 64","body":"<p>I'm trying to access an Oracle Database from a program I'm writing on Windows 7 64bit. Whenever it initializes the client, i get a <code>BadImageFormatException</code> complaining that I'm trying to use a 32bit client in a 64bit environment. I've tried to compile the program in any way (Any CPU, 32, 64 bit), but it did not solve the problem. Any help?</p>\n"},{"tags":["java","html","oracle","jsp","drop-down-menu"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":107,"score":0,"question_id":13127729,"title":"How to Update/Insert Into Oracle Database From Selected Option in HTML Dropdown?","body":"<p>Okay, so first off, I'm fairly new to web design. But for a project of mine, I'd been asked to create a page that populates multiple drop downs based on the tables in a number of databases. And I believe I have gotten this part to work, a look at my code so far (a jsp page):</p>\n\n<p><strong>CodeSelector.jsp</strong></p>\n\n<pre><code>&lt;%@page import=\"java.sql.*\"%&gt;\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"&gt;\n    &lt;html&gt;\n        &lt;head&gt;\n            &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\"&gt;\n                &lt;title&gt;Codes Page&lt;/title&gt;\n        &lt;/head&gt;\n        &lt;body&gt;\n            &lt;form name = \"codes\" method = \"POST\" action=\".....\" target=\"_self\"&gt;\n                &lt;h1&gt;Please select the applicable codes:&lt;/h1&gt;\n                &lt;select name='code1' onchange=\"showState(this.value)\"&gt;  \n                &lt;option value=\"none\"&gt;Code One: None&lt;/option&gt;  \n                &lt;%\n                    String debug = \"ON\";\n\n                    if(debug.equals(\"ON\"))\n                    {\n                        System.out.println(\"***DEBUGGING IS TURNED ON!!!***\");\n                    }\n\n                    //Pulls the ids and descriptions from the first codes table and stores them in the first drop down\n                    try\n                    {\n                        String caseId = request.getParameter(\"caseID\");\n                        //caseId = \"30\";\n\n                        if (caseId == null)\n                        {\n                            //debug\n                            System.out.println(\"The caseID is NULL!\");\n\n                            Class.forName(\"oracle.jdbc.driver.OracleDriver\").newInstance();  \n                            Connection con = DriverManager.getConnection(\"jdbc:oracle:thin:@url:sid\",\"username\",\"password\");  \n                            Statement stmt = con.createStatement();  \n                            ResultSet rs = stmt.executeQuery(\"select id, descr from case_codes\");\n                            String tempString;\n\n                            while(rs.next())\n                            {\n                                //If the code description is more than 125 characters long, truncate the string and append \"...\" to the end of it.\n                                if (rs.getString(2).length() &gt; 125)\n                                {\n                                    tempString = rs.getString(2).substring(0, 125);\n                                    %&gt;\n                                        &lt;option value=\"&lt;%=rs.getString(1)%&gt;\"&gt;&lt;%=rs.getString(1)%&gt; &lt;%=tempString%&gt;...&lt;/option&gt;  \n                                    &lt;%\n                                }\n                                //Else just insert the whole description into the option field.\n                                else\n                                {\n                                    %&gt;\n                                        &lt;option value=\"&lt;%=rs.getString(1)%&gt;\"&gt;&lt;%=rs.getString(1)%&gt; &lt;%=rs.getString(2)%&gt;&lt;/option&gt;  \n                                    &lt;%\n                                }\n\n                            }\n\n                            //Closes the database connection\n                            stmt.close();\n                            con.close();\n                        }\n                        else if (caseId != null)\n                        {\n                            if(debug.equals(\"ON\"))\n                            {\n                                System.out.println(\"The caseID is NOT NULL!\");\n                            }\n\n                            Class.forName(\"oracle.jdbc.driver.OracleDriver\").newInstance();  \n                            Connection con = DriverManager.getConnection(\"jdbc:oracle:thin:@url:sid\",\"username\",\"password\");  \n                            Statement stmt = con.createStatement();\n\n                            //Returns a list of all the tables and views in the database\n                            if(debug.equals(\"ON\"))\n                            {\n                                DatabaseMetaData meta = con.getMetaData();\n                                ResultSet res = meta.getTables(null, null, null, new String[] {\"TABLE\"});\n\n                                while (res.next()) \n                                {\n                                    System.out.println(\n                                        \"   \"+res.getString(\"TABLE_CAT\") \n                                       + \", \"+res.getString(\"TABLE_SCHEM\")\n                                       + \", \"+res.getString(\"TABLE_NAME\")\n                                       + \", \"+res.getString(\"TABLE_TYPE\")\n                                       + \", \"+res.getString(\"REMARKS\")); \n                                 }\n                            }\n\n                            if(debug.equals(\"ON\"))\n                            {\n                                System.out.println(\"BEFORE SQL Statement: select id from cases\");\n                            }\n\n                            //Returns a result set of all the ids in the cases table\n                            ResultSet rs = stmt.executeQuery(\"select id from cases\");\n\n                            if(debug.equals(\"ON\"))\n                            {\n                                System.out.println(\"AFTER SQL Statement: select id from cases\");\n                            }\n\n                            while(rs.next())\n                            {\n                                if(debug.equals(\"ON\"))\n                                {\n                                    System.out.println(\"The rs is: \" + rs.getString(1));\n                                }\n\n                                if(rs.getString(1).equals(caseId))\n                                {\n                                    if(debug.equals(\"ON\"))\n                                    {\n                                        System.out.println(\"Case ID Found!\");\n                                    }\n\n                                    ResultSet rs2 = stmt.executeQuery(\"select rlawcd_id, display_seq from cs_rlawcd where cs_id = \" + caseId);\n\n                                    while(rs2.next())\n                                    {\n                                        if(debug.equals(\"ON\"))\n                                        {\n                                            System.out.println(\"Inside rs2 while loop\");\n\n                                        }\n\n                                        //If no values are returned in the rlawcd table, populate the drop down as you normally would\n                                        if (rs2 == null)\n                                        {\n                                            if(debug.equals(\"ON\"))\n                                            {\n                                                System.out.println(\"Inside rs2 IF\");\n                                                System.out.println(\"rs2 = null\");\n                                            }\n\n                                            ResultSet rs3 = stmt.executeQuery(\"select id, descr from case_codes\");\n                                            String tempString;\n\n                                            while(rs3.next())\n                                            {\n                                                //If the code description is more than 125 characters long, truncate the string and append \"...\" to the end of it.\n                                                if (rs3.getString(2).length() &gt; 125)\n                                                {\n                                                    tempString = rs3.getString(2).substring(0, 125);\n                                                    %&gt;\n                                                        &lt;option value=\"&lt;%=rs3.getString(1)%&gt;\"&gt;&lt;%=rs3.getString(1)%&gt; &lt;%=tempString%&gt;...&lt;/option&gt;  \n                                                    &lt;%\n                                                }\n                                                //Else just insert the whole description into the option field.\n                                                else\n                                                {\n                                                    %&gt;\n                                                        &lt;option value=\"&lt;%=rs3.getString(1)%&gt;\"&gt;&lt;%=rs3.getString(1)%&gt; &lt;%=rs3.getString(2)%&gt;&lt;/option&gt;  \n                                                    &lt;%\n                                                }\n\n                                            }\n                                        }\n                                        //Else if the values are indeed returned and the display sequence equals 1\n                                        //populate the drop downs normally but with the returned values set as the selected/default items\n                                        else if(rs2.getString(2).equals(\"1\"))\n                                        {\n                                            if(debug.equals(\"ON\"))\n                                            {\n                                                System.out.println(\"Inside rs2 ELSE IF\");\n                                                System.out.println(\"The rs2 is NOT NULL!\");\n                                            }\n\n                                            String codeID = rs2.getString(1);\n\n                                            ResultSet rs3 = stmt.executeQuery(\"select id, descr from case_codes\");\n                                            String tempString;\n\n                                            while(rs3.next())\n                                            {\n                                                if(debug.equals(\"ON\"))\n                                                {\n                                                    System.out.println(\"Inside rs3 while loop\");\n                                                }\n\n                                                if (rs3.getString(1).equals(codeID))\n                                                {\n                                                    if(debug.equals(\"ON\"))\n                                                    {\n                                                        System.out.println(\"Inside rs3 IF\");\n                                                        System.out.println(\"A matching law code was found!\");\n                                                    }\n\n                                                    //If the code description is more than 125 characters long, truncate the string and append \"...\" to the end of it.\n                                                    if (rs3.getString(2).length() &gt; 125)\n                                                    {\n                                                        tempString = rs3.getString(2).substring(0, 125);\n                                                        %&gt;\n                                                            &lt;option selected=\"&lt;%=rs3.getString(1)%&gt;\"&gt;&lt;%=rs3.getString(1)%&gt; &lt;%=tempString%&gt;...&lt;/option&gt;  \n                                                        &lt;%\n                                                    }\n                                                    //Else just insert the whole description into the default/selected option field.\n                                                    else\n                                                    {\n                                                        %&gt;\n                                                            &lt;option selected=\"&lt;%=rs3.getString(1)%&gt;\"&gt;&lt;%=rs3.getString(1)%&gt; &lt;%=rs3.getString(2)%&gt;&lt;/option&gt;  \n                                                        &lt;%\n                                                    }       \n                                                }\n                                                else\n                                                {\n                                                    //If the code description is more than 125 characters long, truncate the string and append \"...\" to the end of it.\n                                                    if (rs3.getString(2).length() &gt; 125)\n                                                    {\n                                                        tempString = rs3.getString(2).substring(0, 125);\n                                                        %&gt;\n                                                            &lt;option value=\"&lt;%=rs3.getString(1)%&gt;\"&gt;&lt;%=rs3.getString(1)%&gt; &lt;%=tempString%&gt;...&lt;/option&gt;  \n                                                        &lt;%\n                                                    }\n                                                    //Else just insert the whole description into the option field.\n                                                    else\n                                                    {\n                                                        %&gt;\n                                                            &lt;option value=\"&lt;%=rs3.getString(1)%&gt;\"&gt;&lt;%=rs3.getString(1)%&gt; &lt;%=rs3.getString(2)%&gt;&lt;/option&gt;  \n                                                        &lt;%\n                                                    }       \n                                                }\n                                            }\n                                        }\n                                        else\n                                        {\n                                            if(debug.equals(\"ON\"))\n                                            {\n                                                System.out.println(\"Inside the rs2 ELSE\");\n                                                System.out.println(\"Something must have gone wrong.\");\n                                            }\n                                        }\n                                    }\n                                }\n                                else\n                                {\n                                    //do nothing...\n                                }\n                            }\n                            //Closes the database connection\n                            stmt.close();\n                            con.close();\n                        }\n                        else\n                        {\n                            //debug\n                            System.out.println(\"Something weird happened.\");\n                        }\n\n                    }\n                    catch (ClassNotFoundException e)\n                    {\n                        System.err.println(\"ClassNotFoundException: \" + e.getMessage());\n                    } \n                    catch (SQLException e)\n                    {\n                        System.err.println(\"SQLException: \" + e.getMessage());\n                    }\n                    catch (Exception e)\n                    {\n                        System.err.println(\"Generic Exception: \" + e.getMessage());\n                    }       \n                %&gt;\n                &lt;/select&gt;\n                &lt;br&gt;\n                &lt;br&gt;\n                &lt;input type=\"submit\" value=\"Submit\"&gt;\n              &lt;/form&gt;\n          &lt;/body&gt; \n      &lt;/html&gt;\n</code></pre>\n\n<p>However, now I need to add the ability to update the database with update and insert statements based upon what the user selects in the drop down boxes from above. Again, being fairly new to this, I'm not sure what the best way to go about doing this would be? A lot of what I've found on google suggests this functionality mainly involves this part of the code:</p>\n\n<p><code>&lt;form name = \"codes\" method = \"POST\" action=\"....\" target=\"_self\"&gt;</code></p>\n\n<p>And it seems a lot of the examples online suggest using a seperate php page? But I didn't really understand how the two linked to one another and how one pages contents get transferred between the other page and the database you want to update. Could anyone with experience in this offer some advice here or point me in the right direction as to what I might want to do next in order to be able to write to the database when the <code>submit</code> button is clicked?</p>\n"},{"tags":["oracle","tomcat","jbpm","realm"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":518,"score":1,"question_id":4142221,"title":"config Realm on Tomcat 6, Oracle 11g exception","body":"<p>I need to config realm on tomcat 6 for oracle 11g to work for jBPM workflow.</p>\n\n<p>So I created a file: <code>jbpm-console.xml</code> under Catalina/localhost like this:</p>\n\n<pre><code>&lt;Context&gt;\n&lt;Realm  className=\"org.apache.catalina.realm.JDBCRealm\" \n     driverName=\"oracle.jdbc.driver.OracleDriver\"\n     connectionURL=\"jdbc:oracle:thin:@myip:1524:mydb\"\n     connectionName=\"jbpm\" \n     connectionPassword=\"jbpm\"\n     userTable=\"JBPM_ID_USER u, JBPM_ID_MEMBERSHIP m, JBPM_ID_GROUP g\" \n     userNameCol=\"g.TYPE_ = 'security-role' AND m.GROUP_ = g.ID_ AND m.USER_ = u.ID_ AND u.NAME_\" \n     userCredCol=\"DISTINCT u.PASSWORD_\"\n     userRoleTable=\"JBPM_ID_USER u, JBPM_ID_MEMBERSHIP m, JBPM_ID_GROUP g\" \n     roleNameCol=\"g.NAME_\" &gt;&lt;/Realm&gt;\n&lt;/Context&gt;   \n</code></pre>\n\n<p>When I try to log in <code>jBPM</code> I get the exception:</p>\n\n<pre><code>SEVERE: Exception performing authentication\njava.sql.SQLException: oracle.jdbc.driver.OracleDriver\n    at org.apache.catalina.realm.JDBCRealm.open(JDBCRealm.java:704)\n    at org.apache.catalina.realm.JDBCRealm.authenticate(JDBCRealm.java:358)\n    at org.apache.catalina.authenticator.FormAuthenticator.authenticate(FormAuthenticator.java:259)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:454)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) \n</code></pre>\n\n<p>What did I config wrong in the Realm file? Why do I get this message?</p>\n"},{"tags":["python","oracle","cx-oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13124572,"title":"Binding variable to table name with cx_Oracle","body":"<p>I'm using cx_Oracle in Python and can't get a variable be used as table name, like in this simple example:</p>\n\n<pre><code>query = \"select * from some.:usertable.userinfo\"\n\nbindvars = {'usertable':usertable}\n\ncursor.execute(query, bindvars)\n</code></pre>\n\n<p>What is the correct syntax? Variable substition works fine when I use <code>WHERE</code>… etc. but not with table names. I guess I have to separate \":usertable\" somehow…</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":13121540,"title":"How to convert a date column to MMDDYYYY format to compare other tables columns with MMDDYYYY format","body":"<pre><code>select  to_date(to_number(to_char(created_on_date,'MMDDYYYY')),'MMDDYYYY') from is_mdm_customer\n</code></pre>\n\n<p>above query is giving </p>\n\n<pre><code>Error starting at line 1 in command:\nselect  to_date(to_number(to_char(created_on_date,'MMDDYYYY')),'MMDDYYYY') from is_mdm_customer\nError report:\nSQL Error: ORA-01843: not a valid month\n01843. 00000 -  \"not a valid month\"\n*Cause:    \n*Action:\n</code></pre>\n"},{"tags":["oracle","plsql","oracle11g","plsqldeveloper"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":11934626,"title":"ORA-30926: unable to get stable set of rows in the source table","body":"<p>I'd like to insert the data after unpivoting it. The statement needs to be a merge statemenet. However, I am getting ora-30926 error, and I can't really figure out how to solve it.</p>\n\n<p>Here the data table:</p>\n\n<pre><code>------------------------------------------------------------------------------------\n|Employee_id | work_experience_1 | work_experience_2 | work_experience_3 | language |\n-------------------------------------------------------------------------------------\n| 123        |  C&amp;S              |   Deloitte        |         TCS       |     FI   |\n| 211        |   E&amp;Y             |   Microsoft       |                   |     FI   |\n| 213        |   C&amp;S             |                   |                   |     FI   |\n-------------------------------------------------------------------------------------\n</code></pre>\n\n<p>So first before entering the data, I need to unpivot it.</p>\n\n<pre><code>---------------------------------- \n|Employee_id | work_experience   |\n----------------------------------\n| 123        |   C&amp;S             |\n| 123        |   Deloitte        |\n| 123        |     TCS           |\n| 211        |   E&amp;Y             |\n| 211        |   Microsoft       |\n| 213        |   C&amp;S             |\n----------------------------------\n</code></pre>\n\n<p>Here is what I have done. The inserting part works ok but updating part fails.</p>\n\n<pre><code>MERGE INTO arc_hrcs.user_multi_work_exp work_exp\nUSING (SELECT user_id, work_experience_lang, work_exp_fi FROM\n         (SELECT ext.user_id, tmp_work.employee_id, tmp_work.work_experience_1, tmp_work.work_experience_2, tmp_work.work_experience_3, tmp_work.work_experience_4, tmp_work.work_experience_5, tmp_work.work_experience_6, tmp_work.work_experience_7, tmp_work.work_experience_8, tmp_work.work_experience_9, tmp_work.work_experience_10, tmp_work.work_experience_lang FROM arc_hrcs.hr_extension_data ext\n            JOIN aa_work_exp_tmp tmp_work ON tmp_work.employee_id = ext.employee_id) \n            UNPIVOT (work_exp_fi FOR work_code IN (work_experience_1 AS 'a', work_experience_2 AS 'b', work_experience_3 AS 'c', work_experience_4 AS 'd',  work_experience_5 AS 'e', work_experience_6 AS 'f', work_experience_7 AS 'g', work_experience_8 AS 'h', work_experience_9 AS 'i', work_experience_10 AS 'j'))) r\nON (work_exp.user_id = r.user_id AND r.work_experience_lang LIKE '%FI%' )\nWHEN NOT MATCHED THEN\n     INSERT (work_exp.user_id, work_exp.work_experience_fi)\n     VALUES (r.user_id, r.work_exp_fi)\nWHEN MATCHED THEN\n     UPDATE SET work_exp.work_experience_fi = r.work_exp_fi\n</code></pre>\n\n<p>What can I do to make it working?\nCheers and thx in advance :-)</p>\n"},{"tags":["sql","oracle","mfc","recordset"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13126525,"title":"MFC, Select, order by date, put inside CRecordSet","body":"<p>I need to select rows from SQL, and put them inside CRecordSet.<br>\nThe CRecordSet should hold them sorted by date.<br>\nShould i \"order by date\" on the SQL Query, or to sort them inside the CRecordSet, or maybe move to CArray of objects and sort the CArray ?  </p>\n\n<p>is it possible to sort with the SQL Query, when inserting them to the CRecordset the order will stay the same?  </p>\n\n<p>thanks !</p>\n"},{"tags":["sql","oracle","blob","oracleforms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13123134,"title":"Error ORA-06502 in BLOB retrieval","body":"<p>I'm trying to develop a procedure which will read a BLOB field of a table and write an RTF document which will be used as template to another procedure but when the procedure fires up the select statemente, i got stuck with a ORA-06502 error.</p>\n\n<p>This error, after reading the documentation, is caused by incompatibilities between fields (numeric or value error string)</p>\n\n<p>But i've seen this example everywhere in the internet and i'm running out of ideas of what is causing it.</p>\n\n<p>The source code of my procedure follows: </p>\n\n<pre><code>PROCEDURE p_transfer_db_client(pcPath IN VARCHAR2,\n                               pnSequence IN NUMBER) IS\n\n   v_src_blob BLOB;\n   v_file UTL_FILE.FILE_TYPE;\n   v_offset INTEGER := 1;\n   v_amount BINARY_INTEGER := 32766;\n   v_binary_buffer RAW(32767);\n\nBEGIN\n\n   SELECT model \n     INTO v_src_blob\n     FROM models\n    wHERE id = pnSequence;\n\n   v_file := UTL_FILE.FOPEN(pcPath, 'model.rtf', 'wb', v_amount); \n\n   LOOP\n      BEGIN\n          DBMS_LOB.READ(v_src_blob, v_amount, v_offset, v_binary_buffer);\n          UTL_FILE.PUT_RAW(v_file, v_binary_buffer);\n          v_offset := v_offset + v_amount;\n      EXCEPTION\n          WHEN NO_DATA_FOUND THEN\n               EXIT;\n      END;\n   END LOOP;\n\n   UTL_FILE.FFLUSH(v_file);\n   UTL_FILE.FCLOSE(v_file);\n\nEND p_transfer_db_client;\n</code></pre>\n"},{"tags":["sql","oracle","if-statement","exists"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6748,"score":0,"question_id":4098800,"title":"Oracle sql return true if exists question","body":"<p>How do I check if a particular element exists in a table -  how can I return true or false?</p>\n\n<p>I have a table that has </p>\n\n<ul>\n<li>user_id</li>\n<li>user_password</li>\n<li>user_secretQ</li>\n</ul>\n\n<p>Verbally, I want to do this: If a particular <code>user_id</code> exists in the <code>user_id</code> column, then return true -- otherwise return false.</p>\n"},{"tags":["oracle","triggers","grant"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13124433,"title":"Create user in oracle database","body":"<p>I have below requirement in oracle database</p>\n\n<ol>\n<li>Create User and grant to all objects in schema \"abc\"</li>\n<li>If i add any tables to schema \"abc\", then the user should have access by default without executing individual Grant</li>\n</ol>\n\n<p>Current we are executing Grant statements for every objects created in schema, is there any onetime configuration available? Please help</p>\n\n<p>Note: Here user is not a schema owner, for ex. some one who having access to read-only access.</p>\n"},{"tags":["oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":4,"view_count":32,"score":-3,"question_id":13123891,"title":"Select distinct more than one field using oracle reduce","body":"<p>İt is not work. How i can. </p>\n\n<pre><code>SELECT distinct a.subscription_id, \n       a.customer_id,\n       a.subscription_name,  \n       to_char(a.registration_date,'DD/MM/YYYY HH24:MI:SS') as registration_date,\n       a.info, a.status, a.money, a.bilyon \n  FROM lbr.mp_subscriber a , \n       lbr.mp_subscriber_schedule c , \n       lbr.mp d   \n  WHERE a.subscription_id=c.subscription_id \n    and d.customer_id=a.customer_id \n    and d.customer_id =200711292057086783  \n    and d.draw_id=20121029  \n  ORDER BY a.registration_date desc, status asc, money desc ;   \n</code></pre>\n"},{"tags":["oracle","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13117636,"title":"PL/SQL I want the corresponding column of MAX(O.CO_YEAR). How to do it?","body":"<p>Below is the code for PL/SQL query for which I have to grab the names of the instructors who are qualified to teach a particular course when name is supplied along with number of times they have taught this course and the last time (year and term) when they taught this course.</p>\n\n<p>I have done most part of the question, but couldn't figure out how to get the corresponding details of the max(o.co_year)   i.e. term     </p>\n\n<pre><code>declare\ngname varchar2(20);\ncount_id number(2);\nid varchar(20);\nyear1 number(4);\n\ncursor abc   // cursor 1\n     is\n        SELECT  i.i_gname\n          into gname\n        FROM INSTRUCTOR I \n        WHERE i.i_id in (\n        SELECT t.i_id  FROM TeachingQualification T\n        WHERE t.c_id in (SELECT c.c_id  FROM  COURSE C\n        WHERE c.c_title = 'Advanced Database App')) ;\n\n\ncursor bcd // cursor two\n    is\n        select o.i_id, count(o.i_id), max(o.co_year)\n          into id, count_id, year1\n        from courseoffering o\n        where (o.i_id = i_id and o.c_id = 1234567)\n        group by o.i_id;\n\n\nBegin\nopen abc;\nopen bcd; \n\nloop\n\nFETCH abc into gname;\nexit when abc%NOTFOUND;\n\nFETCH bcd into id, count_id, year1;\nexit when bcd%NOTFOUND;\n\nDBMS_OUTPUT.PUT_LINE ('NAME: ' || gname || '  Number of times taught ' || count_id || ' Year ' || year1 || );  // want to output corresponding column details for the year1 attribute.\n\nend loop;\nclose bcd;\nclose abc;\nend;\n</code></pre>\n\n<p>PL/SQL I want the corresponding column of MAX(O.CO_YEAR). How to do it? </p>\n"},{"tags":["java","mysql","oracle","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13122943,"title":"hibernate HQL query that supports multiple databases oracle and mysql","body":"<p>I have an application that should support oracle and mysql databases.\nI will get different configuration for different database.</p>\n\n<p>But i want all HSQL used in the code to be intact.</p>\n\n<p>But i am not able to do so bcoz of below :</p>\n\n<p>I have created a query like below:</p>\n\n<pre><code>String SQL_QUERY = \"select count(log) from dbtable where created_date='\"+ givenDate\nQuery query = session.createQuery(SQL_QUERY);\nquery.uniqueResult();\n</code></pre>\n\n<p>This works very well in mysql\nbut not in oracle</p>\n\n<p>because oracle db expects formatting the value of created_date column with </p>\n\n<pre><code>to_date(givenDate,\"yyyy-MM-dd\")\n</code></pre>\n\n<p>so i have to change the above query as :</p>\n\n<pre><code>String SQL_QUERY = \"select count(log) from dbtable where created_date=to_date('\"+ givenDate+\",\"yyyy-MM-dd\")\n</code></pre>\n\n<p>Can I avoid this multiple query declarations in any way for mysql and oracle ??</p>\n"},{"tags":["oracle","plsql","oracle10g","schema","grant"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13120485,"title":"How to grant to stored procedure, privileges to select from a different schema?","body":"<p>I need that the user does not have access to another scheme, but the stored procedure could access a different schema.</p>\n"},{"tags":["oracle","internationalization","globalization"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13120229,"title":"Consultation about Receives an expected string in oracle","body":"<p>when i insert string text in hebrew i see Question marks how to fix it ?</p>\n\n<p>i work on:</p>\n\n<pre><code>Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production\nOracle Developer ver. 2.1.1.64\n</code></pre>\n\n<p>thanks</p>\n"},{"tags":["sql","oracle","plsql","ora-00942"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2086,"score":2,"question_id":2602536,"title":"How to access Oracle system tables from inside of a PL/SQL function or procedure?","body":"<p>I am trying to access information from an Oracle meta-data table from within a function.  For example (purposefully simplified):</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE MyProcedure\nIS\n    users_datafile_path VARCHAR2(100);\nBEGIN\n    SELECT file_name INTO users_datafile_path\n        FROM dba_data_files\n        WHERE tablespace_name='USERS'\n        AND rownum=1;\nEND MyProcedure;\n/\n</code></pre>\n\n<p>When I try to execute this command in an sqlplus process, I get the following errors:</p>\n\n<pre><code>LINE/COL ERROR\n-------- -----------------------------------------------------------------\n5/5      PL/SQL: SQL Statement ignored\n6/12     PL/SQL: ORA-00942: table or view does not exist\n</code></pre>\n\n<p>I know the user has access to the table, because when I execute the following command from the same sqlplus process, it displays the expected information:</p>\n\n<pre><code>SELECT file_name\n    FROM dba_data_files\n    WHERE tablespace_name='USERS'\n    AND rownum=1;\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code>FILE_NAME\n--------------------------------------------------------------------------------\n/usr/lib/oracle/xe/oradata/XE/users.dbf\n</code></pre>\n\n<p>Is there something I need to do differently?</p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":46522,"score":3,"question_id":839154,"title":"How to Run the Procedure?","body":"<p>Here the Package..</p>\n\n<pre><code>CREATE OR REPLACE PACKAGE G_PKG_REFCUR AS\n    TYPE rcDataCursor IS REF CURSOR;\nEND;\n</code></pre>\n\n<p>Let's consider the PROC..</p>\n\n<pre><code>Create procedure gokul_proc(\n    pId in number,\n    pName in varchar2,\n    OutCur OUT G_PKG_REFCUR.rcDataCursor ) is\nBEGIN\n    Open OutCur For\n        select * from gokul_table ob \n        where ob.active_staus-'Y' AND ob.id=pId AND ob.name=pNname;\nEND;\n</code></pre>\n\n<p>Here is my question: How can I execute this procedure?</p>\n\n<p>If there isn't an OutCur parameter, then I can execute like this..</p>\n\n<pre><code>EXEC gokul_proc(1,'GOKUL');\n</code></pre>\n\n<p>but, the problem is OutCur. I don't know which value to pass here.</p>\n\n<p>For example</p>\n\n<pre><code>EXEC gokul_proc(1,'GOKUL', ??????);\n</code></pre>\n\n<p>I just need to know what value to pass as a argument for the procedure.</p>\n"},{"tags":["oracle","sql-developer"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":13877,"score":0,"question_id":1752719,"title":"Oracle \"SQL Error: Missing IN or OUT parameter at index:: 1\"","body":"<p>I have an Oracle script that looks like the following:</p>\n\n<pre><code>variable L_kSite number;\nvariable L_kPage number;\nexec SomeStoredProcedureThatReturnsASite( :L_kSite );\nexec SomeStoredProcedureThatAddsAPageToTheSite( :L_kSite, :L_kPage );\nupdate SiteToPageLinkingTable \nset HomePage = 1 \nwhere kSite = :L_kSite and kPage = :L_kPage;\n</code></pre>\n\n<p>Supposedly the last statement is a valid use of a bind variable but when I try to run the script I get this on the last line:</p>\n\n<pre><code>SQL Error: Missing IN or OUT parameter at index:: 1\n</code></pre>\n\n<p>I'm not sure how to proceed here as I'm not especially proficient in Oracle.</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13118793,"title":"SQL retrieving max value plus corresponding another column value","body":"<p>Suppose I have following table in my database</p>\n\n<pre><code>      A        B          C       D          E\n    2009    db1234      12345   1234567     3000\n    2010    db1235      34567   1234567     3100\n    2011    cn2345      23456   2345678     2800\n    2010    db1236      12345   1234567     3100\n    2012    db1237      34567   1234567     2800 \n</code></pre>\n\n<p>if I do max function on table A I would get 2012.\nI want query to return A and corresponding C column value i.e. 34567, In SQL.</p>\n"},{"tags":["sql","oracle","oracle10g"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":54,"score":3,"question_id":13117528,"title":"0RA-00952 on inner join with Oracle 10g","body":"<p>This works :</p>\n\n<pre><code>SELECT\n     PRODUCT_INFOS.FIELD_VALUE,\n     PRODUCT_INFOS.COIL_ID_SYSTEM,\n     PRODUCT_INFOS.TIME_STAMP,\n     PRODUCT_INFOS.FIELD_NAME\nFROM\n     PRODUCT_INFOS\n</code></pre>\n\n<p>This works :</p>\n\n<pre><code>SELECT\n     COIL_INFOS.TIME_STAMP,\n     COIL_INFOS.IN_THICKNESS,\n     COIL_INFOS.MEASURED_LENGTH,\n     COIL_INFOS.MEASURED_WIDTH,\n     COIL_INFOS.PARAM_SET_TOP_SIDE,\n     COIL_INFOS.PARAM_SET_BOTTOM_SIDE,\n     COIL_INFOS.TIME_STAMP,\n     COIL_INFOS.COIL_ID_SYSTEM\nFROM\n     COIL_INFOS\nWHERE\n     (COIL_INFOS.COIL_ID_SYSTEM LIKE '14051800' OR COIL_INFOS.COIL_ID LIKE '14051800')\n</code></pre>\n\n<p>This works on Oracle 11g but fails with <code>0RA-00952 - Table or view does not exist</code> on 10g (version 10.2.0) :</p>\n\n<pre><code>SELECT\n     PRODUCT_INFOS.FIELD_VALUE,\n     COIL_INFOS.TIME_STAMP,\n     COIL_INFOS.IN_THICKNESS,\n     COIL_INFOS.MEASURED_LENGTH,\n     COIL_INFOS.MEASURED_WIDTH,\n     COIL_INFOS.PARAM_SET_TOP_SIDE,\n     COIL_INFOS.PARAM_SET_BOTTOM_SIDE\nFROM\n     COIL_INFOS\nINNER JOIN\n     PRODUCT_INFOS\n     on PRODUCT_INFOS.COIL_ID_SYSTEM=COIL_INFOS.COIL_ID_SYSTEM\n     and PRODUCT_INFOS.TIME_STAMP=COIL_INFOS.TIME_STAMP\n     and PRODUCT_INFOS.FIELD_NAME='ID bobina'\nWHERE\n     (COIL_INFOS.COIL_ID_SYSTEM LIKE '14051800' OR COIL_INFOS.COIL_ID\nLIKE '14051800')\n</code></pre>\n\n<p>I see no other difference than the version of Oracle (the bases are created using the same dump). As I suspect a bug in Oracle 10g, I'd accept as answer a bug report clearly related to the problem.</p>\n\n<p>Of course a direct solution or a workaround would be accepted too.</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13116223,"title":"Query from table based on some condition","body":"<p>I have a scenario like this, there are 2 tables table_1 and table_2. Both table have a common column called column_1(no foreign_Key constraints!!). Table_1 can have some extra rows which are not present in table_2(In other words, table_2 is a sub-set of table_1). I want to list all those items which are only present in table_1 but not in table_2. \nKindly help in writing the sql query for the same.\nThanks in advance.</p>\n"},{"tags":["oracle","procedure"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13114778,"title":"Outputting a single row in stored procedure (oracle)","body":"<p>I'm trying to follow the example at <a href=\"http://dba-oracle.com/t_pl_sql_plsql_select_into_clause.htm\" rel=\"nofollow\">http://dba-oracle.com/t_pl_sql_plsql_select_into_clause.htm</a></p>\n\n<p>But when i however do </p>\n\n<pre><code>create or replace PROCEDURE age\nis\ndeclare\ninfo movie%rowtype;\nBEGIN\ndbms_output.enable();\nselect * into info from movie where mo_id=1;\n\ndbms_output.put_line('The name of the product is ' || info.mo_id);\n\nEND age;\n</code></pre>\n\n<p>/</p>\n\n<p>It gives a couple of errors:</p>\n\n<p><em>Error(4,1): PLS-00103: Encountered the symbol \"DECLARE\" when expecting one of the following:     begin function pragma procedure subtype type      current cursor delete    exists prior external language The symbol \"begin\" was substituted for \"DECLARE\" to continue.</em> </p>\n\n<p>and </p>\n\n<p><em>Error(14,8): PLS-00103: Encountered the symbol \"end-of-file\" when expecting one of the following:     ( begin case declare end exception exit for goto if loop mod    null pragma raise return select update while with          &lt;&lt; continue close current delete fetch lock    insert open rollback savepoint set sql execute commit forall    merge pipe purge</em> </p>\n\n<p>what's wrong with it?</p>\n"},{"tags":["oracle","datapump"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":13117797,"title":"Find tablespaces used within datapump dump file","body":"<p>Given an Oracle datapump file is it possible to find/retrieve the used tablespaces without accessing the original/source schema?</p>\n\n<p>I tried to use the <strong>strings</strong> Linux command but I'm unable to find pattern indicating a tablespace.</p>\n\n<p>Any idea?</p>\n"},{"tags":["sql","oracle","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":56,"score":0,"question_id":13112179,"title":"How to code long group by/case clauses in Oracle?","body":"<p>Quite often I have queries in which I want to group by a case clause, like:</p>\n\n<pre><code>SELECT\n    CASE WHEN FIELD IS NULL                     |\n    AND (SOMETHING &gt; 100 OR SOMETHINGELSE &lt; 50) |\n    AND THATDATE &gt;= add_months(sysdate, -4)     | -&gt; Case\n        THEN 0 ELSE 1                           |                                                               \n    END AS dim_1,                               |                                                               \n    dim_2,\n    sum(SOMEFIELD_TOTAL) as measure_1\nFROM MY_TABLE\nGROUP BY\n    CASE WHEN FIELD IS NULL                     | \n    AND (SOMETHING &gt; 100 OR SOMETHINGELSE &lt; 50) | \n    AND THATDATE &gt;= add_months(sysdate, -4)     | -&gt; Same case\n        THEN 0 ELSE 1                           |                                                                \n    END,                                        |                                                                \n    dim_2\n</code></pre>\n\n<p>Is there a way I could use the alias I defined for the whole case into the <code>group by</code>, like, <code>group by dim_1</code>?</p>\n\n<p>Found <a href=\"http://stackoverflow.com/questions/2681494/why-doesnt-oracle-sql-allow-us-to-use-column-aliases-in-group-by-clauses\">this explanation</a>, still, I was wondering if there was way out.</p>\n"},{"tags":["database","oracle","oracle11g","spatial","intersect"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13117719,"title":"confusion in sdo_relate anyintersect of Oracle 11g spatial database","body":"<p>I run the following querys in oracle 11g :</p>\n\n<p>1) <code>select a1.apid from access_point a1 where sdo_relate(a1.shape,a1.shape,'mask=equal') = 'TRUE' and a1.apid = 'a5vhe';</code></p>\n\n<p>2) <code>select a1.apid from access_point a1 where sdo_relate(a1.shape,a1.shape,'mask=anyintersect') = 'TRUE' and a1.apid = 'a5vhe';</code></p>\n\n<p>now oracle 11g documentation defines mask 'anyintersect' as \"ANYINTERACT: Returns TRUE if the objects are not disjoint.\" Then why oracle returns record a1 for my Query 1 and returns none for QUERY2 ??</p>\n"},{"tags":["sql","database","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13117393,"title":"rownum notworking with subquery on oracle","body":"<p>I have a long query with multiple joins,</p>\n\n<pre><code>Select * \n  from (Select firstName, lastname, designation \n          from NameTable nameT \n          left outer join ProfileTable profileT on nameT.id = profileT.id\n          where firstName like (\"S%\") order by firstName ASC\n       ) \n  where rownum &lt; 25\n</code></pre>\n\n<p>The above query works fine, If i change the name search to \"sa\" then query executing get hanging.</p>\n\n<p>If i change the rownum to 21 \"sa\" query also gets fast.</p>\n\n<p>Whether we need to add any index to table, or any idea for this question.</p>\n\n<p>Thanks in Advance!!!</p>\n"},{"tags":["mysql","sql","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":7,"view_count":52,"score":-5,"question_id":13116135,"title":"Difference between MySQL, SQL Server and Oracle","body":"<p>what is a difference between MySQL,SQL server and Oracle queries give me a good link to refer as I am a rookie. There is lot of SQL and they have many differences I like to know them.</p>\n"}]}
{"total":22203,"page":6,"pagesize":100,"questions":[{"tags":["database","oracle","triggers","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13109740,"title":"Trigger in Oracle to auto-increment a field and insert into association table","body":"<p>I have a one-to-many relationship between two tables:</p>\n\n<pre><code>table1:\n\nNUMBER users_id (primary key)\nfield2\nfield3\n...\n\ntable2:\n\nNUMBER users_id (foreign key)\nVARCHAR2 name\n...\n...\n</code></pre>\n\n<p>and when I <code>INSERT</code> into <code>table1</code>, I want to auto increment (sequence?) <code>users_id</code> and insert a number of records into <code>table2</code> all with the same <code>users_id</code> so I end up with</p>\n\n<pre><code>table1:\n\n1,val1,val2\n\ntable2:\n\n1,barry,...\n1,bob,...\n1,james,...\n</code></pre>\n\n<p>I think I need a trigger with a sequence to auto-increment <code>users_id</code> in <code>table1</code> and create the rows in  <code>table2</code>.</p>\n\n<p>It might not be relevant but I'm doing this from a PHP script.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>So far I have a sequence and a trigger set up so I can <code>INSERT</code> into <code>table1</code> and have the <code>users_id</code> field auto-increment:</p>\n\n<pre><code>create sequence user_seq \nstart with 1 \nincrement by 1 \nnomaxvalue;\n\ncreate trigger user_trigger\nbefore insert on table1\nfor each row\nbegin\nselect user_seq.nextval into :new.users_id from dual;\nend;\n</code></pre>\n\n<p>so now I just need to automatically insert into the second table.  </p>\n\n<p>Many thanks.</p>\n"},{"tags":["oracle","procedure"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13114220,"title":"set serveroutput on in oracle procedure","body":"<p>I've created a simple procedure. In this procedure i want to output some data. However where ever i put \n    set serveroutput on</p>\n\n<p>it says </p>\n\n<p>Error(26,5): PLS-00103: Encountered the symbol \"SERVEROUTPUT\" when expecting one of the following:     . ( ) , * @ % &amp; = - + &lt; / > at in is mod remainder not rem =>     &lt;> or != or ~= >= &lt;= &lt;> and or like like2    like4 likec as between || multiset member submultiset </p>\n\n<p>It doesn't matter where i put it, it keeps saying it.</p>\n\n<pre><code>create or replace PROCEDURE discount  \n\nis --- signature \n\nBEGIN --- executable part\n\nupdate dvd set me_our_price = me_our_price*0.90 WHERE me_release_year = 2011;\nupdate dvd set me_our_price = me_our_price*0.80 WHERE me_release_year = 2010;\n\nupdate bluray set me_our_price = me_our_price*0.95 WHERE me_release_year = 2011;\nupdate bluray set me_our_price = me_our_price*0.90 WHERE me_release_year = 2010;\n\n\nDBMS_OUTPUT.PUT_LINE(' Blurays '); \nfor i in ( \nSELECT e.mo_title, e.mo_bluray.me_list_price as me_list_price, e.mo_bluray.me_our_price    as  me_our_price FROM movie e  where e.mo_bluray is not null\n ) \nloop \n\nDBMS_OUTPUT.PUT_LINE(i.mo_title|| '  ' || i.me_list_price|| '  ' || i.me_list_price); \n\nend loop; \n\nDBMS_OUTPUT.PUT_LINE(' DVDs '); \nfor i in ( \nset serveroutput on\nSELECT e.mo_title, e.mo_dvd.me_list_price as me_list_price, e.mo_dvd.me_our_price as      me_our_price FROM movie e  where e.mo_dvd is not null\n ) \nloop \nDBMS_OUTPUT.PUT_LINE(i.mo_title|| '  ' || i.me_list_price|| '  ' || i.me_list_price); \nend loop; \n\n\nEND discount; \n</code></pre>\n"},{"tags":["oracle","clob","ora-00932"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13114065,"title":"ORA-00932 while updating CLOB column","body":"<p>I have a table with about 10 columns of type VARHCAR and size > 2000. I am trying to convert them to CLOB by using temp columns and renaming after copying data. There was no issues with 4 of these columns but I get ORA-00932 for all remaining columns. Below is the SQL repeated for each columns.</p>\n\n<pre><code>ALTER TABLE TABLE1 ADD (TEMP_CLOB CLOB );\nUPDATE TABLE1 SET TEMP_CLOB=BIG_VARCHAR_COLUMN;\nALTER TABLE TABLE1 DROP COLUMN BIG_VARCHAR_COLUMN;\nALTER TABLE TABLE1 RENAME COLUMN TEMP_CLOB TO BIG_VARCHAR_COLUMN;\n</code></pre>\n\n<p>This is the error report:</p>\n\n<pre><code>SQL Error: ORA-00932: inconsistent datatypes: expected - got CLOB\n00932. 00000 -  \"inconsistent datatypes: expected %s got %s\"\n*Cause:    \n*Action:\n</code></pre>\n"},{"tags":["sql","oracle","matching"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":101,"score":2,"question_id":13111249,"title":"SQL pattern matching","body":"<p>I have a question related to SQL. </p>\n\n<p>I want to match two fields for similarities and return a percentage on how similar it is. </p>\n\n<p>For example if I have a field called doc, which contains the following</p>\n\n<pre><code>This is my first assignment in SQL \n</code></pre>\n\n<p>and in another field I have something like</p>\n\n<pre><code>My first assignment in SQL \n</code></pre>\n\n<p>I want to know how I can check the similarities between the two and return by how much percent. </p>\n\n<p>I did some research and wanted a second opinion plus I never asked for source code. Ive looked at Soundex(), Difference(), Fuzzy string matching using Levenshtein distance algorithm. </p>\n"},{"tags":["java","oracle","java-ee","jdbc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1014,"score":0,"question_id":7204200,"title":"How to retrieve SDO_GEOMETRY from database using JDBC?","body":"<p>I am new to Java.I need to retrieve SDO_GEOMETRY from database and convert it into string using jdbc.If any one has sample or idea please share with me.</p>\n\n<p>Help would be appreciated.</p>\n\n<p>Best Regards,<br>\nSanjay.</p>\n"},{"tags":["oracle","hibernate","jdbc","blob"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":598,"score":1,"question_id":5978041,"title":"hibernate + Oracle 11.2 + BLOB","body":"<p>I googled a lot and haven't found working issue... In my web app I need to upload large files using ajax. I use ajaxfileupload plugin for it. In my FormBean class I mapped file to InputStream:</p>\n\n<pre><code>private InputStream fileData;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>@FormParam(\"file\")\n@PartType(\"application/octet-stream\")\n@JsonIgnore\npublic void setFileData(InputStream fileData) {\n    this.fileData = fileData;\n}\n</code></pre>\n\n<p>It works fine. I can save this stream into a file and haven't got any problems with java heap size. Now I'm trying to save it into database using Hibernate. Like this:</p>\n\n<pre><code>repFile.setFileData(session.getLobHelper().createBlob(file.getFileData(), 1024L));\n</code></pre>\n\n<p>and when I save repFile object I have <strong>ORA-01461</strong> can bind a LONG value only for insert into a LONG column.\nIt works with Oracle 10. But it crashes with Oracle 11.2\nI tried to add lobHandler to my configuration - didn't help</p>\n\n<pre><code>&lt;property name=\"lobHandler\"&gt;\n        &lt;bean class=\"org.springframework.jdbc.support.lob.OracleLobHandler\"&gt;\n            &lt;property name=\"nativeJdbcExtractor\"&gt;\n                &lt;bean class=\"org.springframework.jdbc.support.nativejdbc.CommonsDbcpNativeJdbcExtractor\"/&gt;\n            &lt;/property&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n</code></pre>\n\n<p>And set batch size to 0 and allow steams</p>\n\n<pre><code>&lt;prop key=\"hibernate.jdbc.use_streams_for_binary\"&gt;true&lt;/prop&gt;\n            &lt;prop key=\"hibernate.jdbc.batch_size\"&gt;0&lt;/prop&gt;\n</code></pre>\n\n<p>That didn't help also... does anyone have a solution for this? Any help would be good. </p>\n"},{"tags":["sql","oracle","query","top-n"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":44,"score":0,"question_id":13111390,"title":"how to get first female of each tool, oracle database","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/2306744/oracle-sql-how-to-retrieve-highest-5-values-of-a-column\">Oracle SQL - How to Retrieve highest 5 values of a column</a>  </p>\n</blockquote>\n\n\n\n<p>I'm writing oracle query but stuck in the following problem</p>\n\n<p>table is like this:</p>\n\n<pre><code>**Tool**       **Name**       **Gender**\nFacebook   Alice        F\nFacebook   Alex         M\nFacebook   Loong        M\nFacebook   Jimmy        M\nTwitter    James        M\nTwitter    Jessica      F\nTwitter    Sam          M\nTwitter    Kathrine     F\nGoogle     Rosa         F\nGoogle     Lily         F\nGoogle     Bob          M\n</code></pre>\n\n<p>What I wanna get is the first female in each tool\nthe result should be like:</p>\n\n<pre><code>Facebook   Alice\nTwitter    Jessica\nGoogle     Rosa\n</code></pre>\n\n<p>I'm trying to get this by using query not functions or procedures\nThank for helping</p>\n"},{"tags":["oracle","stored-procedures","plsql"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":4,"view_count":35,"score":-3,"question_id":13111683,"title":"procedure to handle exceptions","body":"<p>Can anyone help how could I solve this problem?</p>\n\n<p>Consider a procedure that raises salary of employees of a specified JOB by a certain percent. Create an exception INCOME_TOO_HIGH. Raise that exception for the first employee whose salary after the raise would exceed 200% of the previous salary average. Once the exception is raised print a warning that you found an employee whose income could become too large. Do not give that employee his raise.</p>\n"},{"tags":["java","oracle","java-ee","download"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13110768,"title":"difference between java downloads","body":"<p>Once answered the question about the difference between this two versions</p>\n\n<p><strong>java_ee_sdk-6u3-jdk7-windows-ml.exe<br>\njava_ee_sdk-6u3-jdk7-windows.exe</strong><br>\n(ml means Multi Languaje)<br>\nin this stackoverflow question --> <a href=\"http://stackoverflow.com/questions/6876287/difference-between-java-downloads\">Difference between java downloads</a></p>\n\n<p>I would like to know now, what is the difference between this two downloads<br>\n<strong>java_ee_sdk-6u4-jdk7-windows-ml.exe<br>\njava_ee_sdk-6u4-web-jdk7-windows-ml.exe</strong>  </p>\n\n<p>by the way, what is <em>web-profile</em>?</p>\n"},{"tags":["php","sql","oracle","stored-procedures","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":13111865,"title":"Can't bind variables in Oracle procedure","body":"<p>Here's a procedure that I'm trying to run.  It inserts into two tables - <code>table1</code> and an association table <code>table2</code>.</p>\n\n<pre><code>create or replace procedure Insert_Row (summary IN VARCHAR2\n   description IN VARCHAR2, status IN NUMBER, \n   date_submitted IN DATE, last_updated IN DATE,\n   owner_id IN NUMBER, reporter_id IN NUMBER,\n   foo IN VARCHAR2, bar IN VARCHAR2,\n   first_assignee IN NUMBER) \nis\n   l_cur_id number;\nbegin\n   insert into table1 \n      (summary, description, status, date_submitted, \n       last_updated, owner_id, reporter_id, \n       foo, bar)\n    values( :summary, :description, :status, \n            to_date(:date_submitted,'YYYY-MM-DD'), \n            to_date(:last_updated,'YYYY-MM-DD'), :owner_id, \n            :reporter_id, :foo, :bar)\n            returning action_id into l_cur_id; \n    insert into table2(action_id, assignee_id) \n    values(l_cur_id,:test);\n    commit;\n end;\"\n</code></pre>\n\n<p>Without the parameters, the query works fine.  I.e. if I remove all the <code>:somethings</code> and hardcode the values then it runs with no errors when I run <code>exec Insert_Row;</code></p>\n\n<p>With the parameters (with the <code>:somethings</code>), there are errors:</p>\n\n<p><code>show errors procedure Insert_Row;</code></p>\n\n<pre><code>Errors: check compiler log\n2/4            PLS-00103: Encountered the symbol \"DESCRIPTION\" when expecting one of the following:\n\n   := . ) , @ % default character\nThe symbol \",\" was substituted for \"DESCRIPTION\" to continue.\n\n14/13          PLS-00049: bad bind variable 'SUMMARY'\n14/23          PLS-00049: bad bind variable 'DESCRIPTION'\n14/37          PLS-00049: bad bind variable 'STATUS'\n15/21          PLS-00049: bad bind variable 'DATE_SUBMITTED'\n16/21          PLS-00049: bad bind variable 'LAST_UPDATED'\n16/50          PLS-00049: bad bind variable 'OWNER_ID'\n17/13          PLS-00049: bad bind variable 'REPORTER_ID'\n17/27          PLS-00049: bad bind variable 'FOO'\n17/33          PLS-00049: bad bind variable 'BAR'\n20/21          PLS-00049: bad bind variable 'TEST'\n</code></pre>\n\n<p>what am I doing wrong?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Query after @ron tornambe's solution is:</p>\n\n<pre><code>create or replace procedure Insert_Row (summary IN VARCHAR2,\n   description IN VARCHAR2, status IN NUMBER, \n   date_submitted IN DATE, last_updated IN DATE,\n   owner_id IN NUMBER, reporter_id IN NUMBER,\n   foo IN VARCHAR2, bar IN VARCHAR2,\n   first_assignee IN NUMBER) \nis\n   l_cur_id number;\nbegin\n   insert into table1 \n      (summary, description, status, date_submitted, \n       last_updated, owner_id, reporter_id, \n       foo, bar)\n    values( :summary, :description, :status, \n            to_date(:date_submitted,'YYYY-MM-DD'), \n            to_date(:last_updated,'YYYY-MM-DD'), :owner_id, \n            :reporter_id, :foo, :bar)\n            returning action_id into l_cur_id; \n    insert into table2(action_id, assignee_id) \n    values(l_cur_id,:test);\n    commit;\n end;\"\n</code></pre>\n\n<p>Error after this modification is:</p>\n\n<pre><code>14/13          PLS-00049: bad bind variable 'SUMMARY'\n14/23          PLS-00049: bad bind variable 'DESCRIPTION'\n14/37          PLS-00049: bad bind variable 'STATUS'\n15/21          PLS-00049: bad bind variable 'DATE_SUBMITTED'\n16/21          PLS-00049: bad bind variable 'LAST_UPDATED'\n16/50          PLS-00049: bad bind variable 'OWNER_ID'\n17/13          PLS-00049: bad bind variable 'REPORTER_ID'\n17/27          PLS-00049: bad bind variable 'FOO'\n17/33          PLS-00049: bad bind variable 'BAR'\n20/21          PLS-00049: bad bind variable 'TEST'\n</code></pre>\n\n<p>Many thanks.</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":129,"score":0,"question_id":12784515,"title":"PL/SQL how to write multiple statement in a single stored procedure","body":"<p>I need to do the following problem, </p>\n\n<p>Write a procedure that decreases the salary by a 10% for all employees who earn\nless than the current average salary.\nTreat the content of table EMP as “all employees”. Have your procedure print the name and salary of the first\nperson whose salary is just below the average.</p>\n\n<p>What should be the approach to solve the problem? </p>\n\n<p>Write a procedure that decreases the salary by a 10% for all employees who earn less than the current average salary. </p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE UPDATE_EMP IS\nBEGIN\nUPDATE EMP\nSET SAL= SAL-(SAL*0.1) \nWHERE SAL&lt;(SELECT AVG(SAL) FROM EMP);\nEND;\n</code></pre>\n\n<p>AND THE OTHER ONE :\nHave your procedure print the name and salary of the first person whose salary is just below the average.</p>\n\n<pre><code>SELECT e.ename\n     , e.sal\n from \n    (select ename\n            , sal \n      from emp \n      where sal &lt; (select avg(sal)  \n                     from emp\n                   ) \n     order by sal desc \n     )e  \n  where ROWNUM =1;\n</code></pre>\n\n<p>Now I need to connect both.. How could I do that ...</p>\n"},{"tags":["oracle","delphi","oledb","ado","tclientdataset"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":572,"score":1,"question_id":6821703,"title":"Number column in oracle with ftBCD datatype parameter in ADO occurs \"Unspecified error\" (Oracle Provider for OleDB)","body":"<p>I have programing a delphi with ADO + DataSetProvider + ClientDataSet. In ApplyUpdates of the ClientDataSet, this generate the ADOcommand with parameters based in fields datatypes.</p>\n\n<p>When a parameter is ftBCD, occurs \"Unspecified error\". If you change datatype for ftFloat, ftExtended or ftCurrency, the command is executed successfully. But the datatype of parameter cannot change using ADO+ClientDataSet. The provider used is \"Oracle Provider for OleDB\". </p>\n\n<p>The \"Microsoft provider OleDB for oracle\" execute without problems, but is very slow and I have problems with CLOB column. The oracle is 11g and the client is 11.2.0.2.</p>\n\n<p>The Delphi is Delphi XE. Sample code for error:</p>\n\n<pre><code>vAdo := TADOConnection.Create(nil);\nvAdo.LoginPrompt := false;\nvAdo.ConnectionString := 'Provider=OraOLEDB.Oracle.1;Password=;Persist Security Info=True;User ID=HR;Data Source=server/orcl;Extended Properties=\"\"';\nvAdo.Connected := True;\n\nvAdoCommando := TADOCommand.Create(nil);\nvAdoCommando.Connection := vAdo;\nvAdoCommando.CommandText := 'UPDATE HD_PRIORIDADE SET TEMPORESPOSTA = ? WHERE HANDLE = ? ';\n\nvParametro := vAdoCommando.Parameters.AddParameter;\nvParametro.DataType := ftBCD;\nvParametro.Value     := 12.3;\nvParametro := vAdoCommando.Parameters.AddParameter;\nvParametro.Value := 1;\n\nvAdoCommando.ExecuteOptions := [eoExecuteNoRecords];\nvAdoCommando.Execute(vResult, EmptyParam);\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":13106724,"title":"Why does Oracle require an alias for columns in a view when dereferencing an object?","body":"<p>Why does Oracle require an alias for columns in a view when dereferencing an object? </p>\n\n<p>For example:</p>\n\n<pre><code>CREATE VIEW view AS SELECT t.eno, t.workdept.dname, t.salary FROM table t\n                                  *\nERROR at line 1:\nORA-00998: must name this expression with a column alias\n</code></pre>\n\n<p>(workdept is an object reference)</p>\n\n<p>This can be fixed by changing <code>t.workdept.dname</code> to <code>t.workdept.dname AS alias</code>.</p>\n\n<p>My question is, why is this enforced? Why not just use the attribute name <code>workdept.dname</code> as would happen in an unaliased select e.g:</p>\n\n<p><code>SELECT t.eno, t.workdept.dname, t.salary FROM table t</code></p>\n\n<p>(This works fine)</p>\n"},{"tags":["visual-studio-2010","oracle","gridview"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13104566,"title":"ORA-00911: invalid character, visual studio 2010 using aspxgridview","body":"<p>ive got this error when y try to insert a row in my oracle database.. im using the delete, insert function that are provided by aspxgridview.</p>\n\n<p>ive heard that it could be a \";\" at the end of the sql instructions but there is not \";\" in this sql sentences, this is the code with the sql instructions for insert, update, etc...</p>\n\n<pre><code>&lt;asp:SqlDataSource ID=\"SqlDataSource1\" runat=\"server\" \n           ConflictDetection=\"CompareAllValues\" \n           ConnectionString=\"&lt;%$ ConnectionStrings:ConnectionStringora %&gt;\" \n           DeleteCommand=\"DELETE FROM &amp;quot;MAQUINA&amp;quot; WHERE &amp;quot;PATENTE&amp;quot; = ? AND &amp;quot;MARCA&amp;quot; = ? AND &amp;quot;MODELO&amp;quot; = ? AND &amp;quot;AÑO&amp;quot; = ? AND &amp;quot;FECHA_ADQUISICION&amp;quot; = ? AND &amp;quot;ESTADO&amp;quot; = ? AND &amp;quot;IDCONDUCTOR&amp;quot; = ? AND &amp;quot;IDMANTENCION&amp;quot; = ?\" \n           InsertCommand=\"INSERT INTO &amp;quot;MAQUINA&amp;quot; (&amp;quot;PATENTE&amp;quot;, &amp;quot;MARCA&amp;quot;, &amp;quot;MODELO&amp;quot;, &amp;quot;AÑO&amp;quot;, &amp;quot;FECHA_ADQUISICION&amp;quot;, &amp;quot;ESTADO&amp;quot;, &amp;quot;IDCONDUCTOR&amp;quot;, &amp;quot;IDMANTENCION&amp;quot;) VALUES (?, ?, ?, ?, ?, ?, ?, ?)\" \n           OldValuesParameterFormatString=\"original_{0}\" \n           ProviderName=\"&lt;%$ ConnectionStrings:ConnectionStringora.ProviderName %&gt;\" \n           SelectCommand=\"SELECT &amp;quot;PATENTE&amp;quot;, &amp;quot;MARCA&amp;quot;, &amp;quot;MODELO&amp;quot;, &amp;quot;AÑO&amp;quot;, &amp;quot;FECHA_ADQUISICION&amp;quot;, &amp;quot;ESTADO&amp;quot;, &amp;quot;IDCONDUCTOR&amp;quot;, &amp;quot;IDMANTENCION&amp;quot; FROM &amp;quot;MAQUINA&amp;quot;\" \n           UpdateCommand=\"UPDATE &amp;quot;MAQUINA&amp;quot; SET &amp;quot;MARCA&amp;quot; = ?, &amp;quot;MODELO&amp;quot; = ?, &amp;quot;AÑO&amp;quot; = ?, &amp;quot;FECHA_ADQUISICION&amp;quot; = ?, &amp;quot;ESTADO&amp;quot; = ?, &amp;quot;IDCONDUCTOR&amp;quot; = ?, &amp;quot;IDMANTENCION&amp;quot; = ? WHERE &amp;quot;PATENTE&amp;quot; = ? AND &amp;quot;MARCA&amp;quot; = ? AND &amp;quot;MODELO&amp;quot; = ? AND &amp;quot;AÑO&amp;quot; = ? AND &amp;quot;FECHA_ADQUISICION&amp;quot; = ? AND &amp;quot;ESTADO&amp;quot; = ? AND &amp;quot;IDCONDUCTOR&amp;quot; = ? AND &amp;quot;IDMANTENCION&amp;quot; = ?\"&gt;\n</code></pre>\n\n<p>the other thing that i think it could cause this problem is the date field (FECHA_ADQUISICION).. aspxgridview uses the format dd-mm-yyy, i dont know if oracle accept that, because when i tried to make an insertion from the \"server explorer\" (that part where you can watch your databases) i had a problem with the date, i got \"ORA-01843 not a valid month\" error.. so i could not make an insertion from there.</p>\n\n<p>help please!</p>\n"},{"tags":["oracle","oracle10g","ora-01843"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":149,"score":0,"question_id":13107900,"title":"ORA-01843: not a valid month","body":"<p>I am having an issue with my sql query.</p>\n\n<pre><code>  create table rental\n  (     \n  rental_id NUMBER(5) NOT NULL,\n  rental_date timestamp NOT NULL, \n  inventory_id NUMBER(5) NOT NULL,\n  customer_id NUMBER(5) NOT NULL,\n  return_date timestamp NOT NULL,\n  staff_id NUMBER(5) NOT NULL,\n  constraint rental_primary PRIMARY KEY (rental_id),\n  constraint rental_foreign FOREIGN KEY (inventory_id) REFERENCES \n\n  inventory(inventory_id),\n  constraint rental_foreign2 FOREIGN KEY (customer_id) REFERENCES\n  customer(customer_id),\n  constraint rental_foreign3 FOREIGN KEY (staff_id) REFERENCES staff(staff_id),\n  constraint rental_unique_rental_date unique (rental_date),\n  constraint rental_unique_inventory_id unique (inventory_id),\n  constraint rental_unique_customer_id unique (customer_id),\n  constraint rental_rental_date check(to_char(rental_date,'YYYY/MM/DD HH:MI:SS AM') \n  between '2005/01/01 00:00:01 AM' AND '12/31/2015 11:59:59 PM'),\n  constraint rental_return_date check(to_char(return_date,'YYYY/MM/DD HH:MI:SS AM') \n  between '2005/01/01 00:00:01 AM' AND '12/31/2015 11:59:59 PM')\n  );\n</code></pre>\n\n<p>when I am trying to insert data,\nIt is throwing this error \"ORA-01843: not a valid month\".\nCan anyone please suggest me what type of datatype can I use for rental_date and return date to get through this situation?\nHere is my sample data which I am trying to upload</p>\n\n<pre><code>    rental_date                   return_date\n   5/24/2011  10:53:30 PM        5/26/2011  10:04:30 PM\n</code></pre>\n\n<p>Note : I can see this type of format in my excel sheet where I have my data but when I get error </p>\n\n<pre><code>       \"ORA-01843: not a valid month    \n     Row 145: 144,  2011-05-25 23:49:56  ,1689,357,  2011-06-01 21:41:56  ,2\"\n</code></pre>\n\n<p>I am observing different format of time here.</p>\n\n<p>Can anyone suggest me a solution?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["sql","oracle","oracle11g","sqlplus"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":858,"score":1,"question_id":4710919,"title":"SQL*Plus: Difference in number of rows in two tables","body":"<p>How can I take a difference in the counts of the number of rows in two different tables?</p>\n\n<pre><code>SQL&gt; select count(*) from dual44;\n\n  COUNT(*)\n----------\n         3\n\nSQL&gt; select count(*) from dual;\n\n  COUNT(*)\n----------\n         1\n\nSQL&gt; (select count(*) from dual44)\n  2  minus\n  3  (select count(*) from dual)\n  4  ;\n\n  COUNT(*)\n----------\n         3\n\nSQL&gt; \n</code></pre>\n\n<p>I need <code>2</code> as the result. The two tables might not necessarily have the same scehma.</p>\n"},{"tags":["oracle","plsql","base64","x509"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13107117,"title":"Parsing a base64 X509 certificate in an Oracle stored procedure?","body":"<p>I have a certificate x509 in base 64 binary format. How can I retrieve the information about the certificate with Oracle? I have to get serial number of this certificate. Any ideas?</p>\n"},{"tags":["oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13106942,"title":"ConnectionPool takes long time to create connection on Oracle using OCCI","body":"<p>I have Oracle 11g2 on RedHat 5, with default installation of Oracle.</p>\n\n<p>When I run the following test program, it takes up to 30 seconds to get a connection from the connection pool. The connection pool itself is created immediately. Subsequent createConnection calls from the same pool within the same program also take similar long times to complete.</p>\n\n<p>If instead I try to get a connection directly, i.e., without using a connection pool, I get a connection without delay.</p>\n\n<p>Thanks</p>\n\n<pre><code>#include &lt;iostream&gt;  \n#include &lt;occi.h&gt;  \n#include &lt;map&gt;\n\nusing namespace std;\n\nint main(){\n\n  oracle::occi::Environment* environment;  \n  oracle::occi::Connection *con;  \n  oracle::occi::Statement* stmt;  \n  oracle::occi::ResultSet* res;  \n  oracle::occi::ConnectionPool* connPool;  \n\n  try{  \n\n    environment = oracle::occi::Environment::createEnvironment(oracle::occi::Environment::DEFAULT);  \n    connPool = environment-&gt;createConnectionPool(\"hr\", \"abcabc\", \"\", 3, 5, 2);  \n    con = connPool-&gt;createConnection(\"hr\", \"abcabc\");  \n\n    connPool-&gt;terminateConnection(con);  \n    environment-&gt;terminateConnectionPool(connPool);  \n  }  \n\n  catch(oracle::occi::SQLException &amp;e){  \n    std::cout &lt;&lt; e.what();  \n  }  \n\n  return 0;  \n\n}  \n</code></pre>\n"},{"tags":["java","sql","oracle","stored-procedures","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13106213,"title":"Looping insert of multi-column cursor contents in SQL stored procedure","body":"<p>I am writing a complex Stored Procedure in ORacle that does several things, as part of a Java program with JDBC.</p>\n\n<p>First, it needs to perform a very complex SELECT to read information into a cursor, with each row of the cursor denoting a lineitem for an invoice. There are about 10 columns in the output cursor. For each row of the cursor, some but not all of the fields need to be inserted into another table (called LineItem), and in addition to this I need to take the total of all those rows in the cursor and create a parent row in an Invoice table.</p>\n\n<p>Would it be easier to read the cursor back into the Java app, then iterate over its contents performing INSERTS as necessary, or is it possible to do all of this within the same Stored Procedure? I am thinking multiple stored procedures should be used to avoid complexity, but am not sure if this can be done and for it all to remain as part of one transaction.</p>\n\n<p>I am trying to avoid creating a super complex Stored Proc, but don't want a dreadful solution either.</p>\n\n<p>Thanks</p>\n"},{"tags":["sql","oracle","sqlplus"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13106087,"title":"Oracle SQL privelege authorization on multiple attributes and tables with one statement","body":"<p>Is it possible to grant different privileges on different tables or attributes within the one statement?</p>\n\n<p>For example I want to combine:</p>\n\n<pre><code>GRANT SELECT ON tbl TO user;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>GRANT UPDATE OF attr ON tbl TO user;\n</code></pre>\n\n<p>Furthermore, could I combine granting privilege on a different relation:</p>\n\n<pre><code>GRANT INSERT ON tbl2;\n</code></pre>\n\n<p>All in the one statement.</p>\n"},{"tags":["sql","oracle"],"answer_count":8,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":23664,"score":9,"question_id":2247310,"title":"How do I list all tables in a schema in Oracle SQL?","body":"<p>How do i list all tables in a schema in Oracle SQL?</p>\n"},{"tags":["sql","oracle","query","helper"],"answer_count":6,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":2410,"score":4,"question_id":1841183,"title":"Decent Visual SQL query Builder","body":"<p>I am a code developer, not a DBA, and I tend to get lost with loooong SQL queries, when I use many joins (10 joins is pretty common for me). </p>\n\n<p>I would like to find a Visual SQL Query Builder (free if possible) that could connect to Oracle and see all the tables there, so I would only select visually my keys that link the Joins, and select the fields I want to be shown.</p>\n"},{"tags":["java","oracle","licensing"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":98,"score":5,"question_id":13105670,"title":"Does Oracle have rights to my code?","body":"<p>I'm about to write some software for an academic research project.  I'm hoping to write it in Java, but the group I'm working with raised some concerns about licensing.  I originally though these were silly questions, but I'm having trouble finding definitive answers:</p>\n\n<p>If I write software in Java, am I free to release that software and its source code?  Are there restrictions on how I can license it?  Does Oracle have any rights to it?</p>\n"},{"tags":["visual-studio-2010","visual-studio","oracle","gridview","ora-00911"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13105944,"title":"ERROR inserting ora-00911: invalid character, aspxgridview in vistual studio 2010","body":"<p>i made a question about this before and nobody could answer properly..</p>\n\n<p>i've got \"ora-00911: invalid character\" when i try to make an insertion, delete, etc in an oracle database from a gridview.. now i discovered the problem and it is the \"?\" symbol.. i replaced the '?' for a real value , in this case '222' (as you can see in the code) in the delete sentence and it worked.. but the problem is that i need the \"?\".. im using parameters, is there any alternative to that symbol that could be recognized by oracle??? i also tried using something like this: \"delete from blablabla where blabla='?'\" , and did not get any error.. but it did not delete or insert anything, that because the system took the ? between '' like a value that wasn't there so obviously it did not work.</p>\n\n<p>any idea guys?????</p>\n\n<pre><code>&lt;asp:SqlDataSource ID=\"SqlDataSource1\" runat=\"server\" \n           ConnectionString=\"&lt;%$ ConnectionStrings:ConnectionStringora %&gt;\" \n           DeleteCommand= \"DELETE FROM RODRIGO.MAQUINA WHERE PATENTE = '222'\"\n           InsertCommand= \"INSERT INTO MAQUINA (PATENTE, MARCA, MODELO, AÑO, FECHA_ADQUISICION, ESTADO, IDCONDUCTOR, IDMANTENCION) VALUES (?, ?, ?, ?, ?, ?, ?, ?)\" \n           OldValuesParameterFormatString=\"original_{0}\" \n           ProviderName=\"&lt;%$ ConnectionStrings:ConnectionStringora.ProviderName %&gt;\" \n           SelectCommand= \"SELECT * FROM MAQUINA\" \n           UpdateCommand=\"BEGIN UPDATE MAQUINA SET MARCA = ?, MODELO = ?, AÑO = ?, FECHA_ADQUISICION = ? ,ESTADO = ?, IDCONDUCTOR = ?, IDMANTENCION = ? WHERE PATENTE= ? END;\"&gt;\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":4638027,"title":"Specify constraints in the CREATE clause in SQL","body":"<p>I'm trying to set the Quantity attribute to limit from 1 to 100.\nDoes anyone know why this code isn't working?</p>\n\n<pre><code>CREATE TABLE REQUEST (\n  OrderID     VARCHAR2(4),\n  ProductID   VARCHAR2(2),\n  Quantity    INTEGER,\n  CONSTRAINT check_quantity CHECK((INTEGER &gt; 0) AND (INTEGER &lt; 101)));\n</code></pre>\n"},{"tags":["oracle","schema","remap","ora-00942","impdp"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":6987,"score":1,"question_id":2138348,"title":"Is there a good workaround to the Oracle IMPDP REMAP_SCHEMA issue with triggers (ORA-39083, ORA-00942)?","body":"<p>One can use the Oracle data pump import tool (IMPDP.EXE) to import one schema into another using the REMAP_SCHEMA option. However there is an issue in that triggers are not properly remapped. This leads to the trigger not being created at all with an error as follows: </p>\n\n<blockquote>\n  <p>ORA-39083: Object type TRIGGER failed\n  to create with error: ORA-00942: table\n  or view does not exist Failing sql is:\n  CREATE TRIGGER\n  \"<strong>NEW_SCHEMA</strong>\".\"METER_ALARMS_BI\"<br>\n  BEFORE INSERT ON\n  <strong>OLD_SCHEMA</strong>.METER_ALARMS ...</p>\n</blockquote>\n\n<p>The reason for this is because the create SQL still refers to OLD_SCHEMA. It does say in the Oracle documentation that:</p>\n\n<blockquote>\n  <p>The mapping may not be 100 percent\n  complete, because there are certain\n  schema references that Import is not\n  capable of finding. For example,\n  Import will not find schema references\n  embedded within the body of\n  definitions of types, views,\n  procedures, and packages.</p>\n</blockquote>\n\n<p>IMHO this is a bit of a cop out by Oracle but that's another discussion!</p>\n\n<p>According to Oracle Metalink note 750783.1, the workaround is to:</p>\n\n<blockquote>\n  <ol>\n  <li><p>Create a SQLFILE to include the relevant DDL command(s):\n  impdp system/<strong>**</strong> directory=test_dp\n  DUMPFILE=export_schemas.dmp\n  remap_schema=u1:u2 sqlfile=script.sql</p></li>\n  <li><p>Extract the affected DDL from the written SQLFILE and correct the\n  schema reference. Then execute the command manually.</p></li>\n  </ol>\n</blockquote>\n\n<p>This is not a good way to do it especially if you have many failed objects and want to automate the process of combining multiple schema for in field upgrading of databases.</p>\n\n<p>Has anyone found a better way to do this? I need a solution that must be 100% reliable if its to be used in the field. I could parse the generated SQL file but can one get this 100% correct? Is there not some way to intercept the CREATE SQL statements execute by IMPDP and correct it on the fly while importing? Could one patch the DMP file directly?</p>\n\n<p>Over to you.</p>\n"},{"tags":["mysql","oracle"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13104271,"title":"List partition for remaining items","body":"<p>when partitioning tables in MySQL using a list, how can I generate a partition for remaining items?</p>\n\n<p>E.G:</p>\n\n<pre><code>CREATE TABLE tbl\n(\n ID integer\n)\nPARTITION BY LIST (ID)\n(  \n  PARTITION P1 values in (1),  \n  PARTITION P2 values in (2),  \n  PARTITION P3 values in (3),  \n  PARTITION Pother values in (&lt;all remaining values of ID&gt;)\n);\n</code></pre>\n\n<p>In Oracle, I use <code>values in (default)</code>, but that does work in MySQL.</p>\n"},{"tags":["oracle","oracle10g","ora-01400"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":467,"score":1,"question_id":5590435,"title":"Oracle Bind Variable giving error","body":"<pre><code>SET SERVEROUTPUT ON\n\nVARIABLE dept_id NUMBER\n\nDECLARE\n\n  max_deptno NUMBER(3);\n\n  dept_name departments.department_name%TYPE :='Education';\n\nBEGIN\n\n  SELECT MAX(department_id)\n\n  INTO max_deptno \n\n  FROM departments;\n\n  DBMS_OUTPUT.PUT_LINE ('The maximum department no is : '  || max_deptno);\n\n  :dept_id:=(max_deptno+10);\n\n  INSERT INTO departments (department_name, department_id,location_id)\n\n  VALUES(dept_name,  :dept_id, NULL);\n\n  DBMS_OUTPUT.PUT_LINE ('The number of rows affected : '  || SQL%ROWCOUNT);\n\n\nEND;\n\n/\n</code></pre>\n\n<p>Error report:\nORA-01400: cannot insert NULL into (\"SYSTEM\".\"DEPARTMENTS\".\"DEPARTMENT_ID\")\nORA-06512: at line 10\n01400. 00000 -  \"cannot insert NULL into (%s)\"\n*Cause:<br>\n*Action:\nThe maximum department no is : 190</p>\n\n<p>I am getting this error while trying to execute the bind variable in oracle statment. But if i put some value instead of bind variable, i get this insert statement right. What am I doing wrong here?</p>\n"},{"tags":["sql","database","oracle","indexes"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":13042997,"title":"How to create unique index on fields with possible null values (Oracle 11g)?","body":"<p>Here is the sample table with 3 columns (ID, UNIQUE_VALUE, UNIQUE_GROUP_ID)</p>\n\n<p>I want below records can be allowed:</p>\n\n<pre><code>(1, NULL, NULL)\n(2, NULL, NULL)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>(3, NULL, 7)\n(4, 123, 7)\n</code></pre>\n\n<p>or (<strong>Note: this condition is not allowed in <code>unique index</code> nor <code>unique constraint</code></strong>)</p>\n\n<pre><code>(5, NULL, 7)\n(6, NULL, 7)\n</code></pre>\n\n<p>and these can't be allowed:</p>\n\n<pre><code>(7, 123, 7)\n(8, 123, 7)\n</code></pre>\n\n<p>I created a unique index on last 2 columns, but only the first 2 examples can be allowed. </p>\n\n<p>Is it possible to let db check the uniqueness of these 2 columns only when both are not null?</p>\n"},{"tags":["oracle","odbc","tns"],"answer_count":7,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":54933,"score":2,"question_id":206055,"title":"Oracle ORA-12154: TNS: Could not resolve service name Error?","body":"<p>I am a SQL Server user .</p>\n\n<p>I am on a project that is using oracle (which I rarely use) \nI need to create an ODBC connection so I can access the some data via MS Access\nI have a application on my machine called oraHome90. It seems to allow a configuration of something called a listener in a “net configuration utility”, I think that a “Local Net Service Name Configuration” needs to also be done.  The IT support gave me this information to set up the ODBC connection . I have tried every combination that I can think of. I can get past a test that successfully passes a test to “login“  to the oracle server database.  When I try to create the ODBC connection I get the following error: ORA-12154: TNS: Could not resolve service name.</p>\n\n<p>Assuming that I want to start from scratch and the following information is supposed to allow for me to connect to the database….. Any suggestions or comment ? Note: ultimately the project will have a website .ASP page query the data, but I have to first prove that I can see the data using the ODBC connection via MS Access</p>\n\n<pre><code>Service name: SERVICENAME\nHOST = HOST.XYZi.com\nUser Id: MYUSERID\nPassword: MYPASSWORD\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n'Oracle Connection\nDim ocst\nDim oconn\n\nocst = \"Provider=OraOLEDB.Oracle;\" &amp; _ \n        \"Data Source=DATASOURCE;\" &amp; _ \n        \"User ID=CHIJXL;\" &amp; _ \n        \"Password=password;\" \n\nset oconn = CreateObject(\"ADODB.Connection\")\n</code></pre>\n"},{"tags":["oracle","testing","stored-procedures","jmeter","sys-refcursor"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":142,"score":1,"question_id":13026140,"title":"How to use jmeter to test an Oracle Stored Procedure with sys_refcursor return type?","body":"<p>I wnat to test an Oracle Stored Procedure by using jmeter.I have done everything but parameters.</p>\n\n<p>And here is my SQL Query:</p>\n\n<blockquote>\n  <p>declare \n       outinfo varchar2(20);\n       outtable sys_refcursor;\n       begin\n       {call RK_JSCX(?,?)};\n       end;</p>\n</blockquote>\n\n<p>The outtable in Oracle is a cursor.And i used resultSet to contain it in java.However,whatever i set in parameter types ,it said invalid type.</p>\n\n<blockquote>\n  <p>Sample Start: 2012-10-25 16:06:41 CST\n  Load time: 0\n  Latency: 0\n  Size in bytes: 25\n  Headers size in bytes: 0\n  Body size in bytes: 25\n  Sample Count: 1\n  Error Count: 1\n  Response code: null 0\n  Response message: java.sql.SQLException: Invalid data type: cursor</p>\n</blockquote>\n\n<p>Response headers:\noracle.jdbc.driver.T4CConnection@58ba09</p>\n\n<p>SampleResult fields:\nContentType: text/plain\nDataEncoding: UTF-8</p>\n\n<p>How can fix it?\n   Thanks!</p>\n\n<p>Here is my code in java:</p>\n\n<pre><code>public String RK_JSCX() throws Exception {\n\n    RK_JSCX_Response response = null;\n    List&lt;RK_JSCX_Outtable&gt; list = null;\n    Connection con = null;\n    CallableStatement cs = null;\n    ResultSet rs = null;\n    String sql = null; \n    try {\n        sql = \"{call RK_JSCX(?,?)}\";\n        con = ConnectionUtils.getInstance().getConnect();\n\n        if (con.isClosed()) {\n            throw new IllegalStateException(\"ERROR.THE   CONNECTION   ISCLOSED\");\n        }\n\n        cs = con.prepareCall(sql);\n        cs.registerOutParameter(1, oracle.jdbc.OracleTypes.CURSOR);\n        cs.registerOutParameter(2, Types.VARCHAR);\n\n        cs.execute();\n\n        rs = (ResultSet) cs.getObject(1);\n        list = new ArrayList&lt;RK_JSCX_Outtable&gt;();\n        while (rs.next()) {\n\n            RK_JSCX_Outtable out = new RK_JSCX_Outtable(rs.getString(1), rs.getString(2), rs.getString(3), rs.getString(4), rs.getInt(5), rs.getString(6));\n\n            list.add(out);\n        }\n        String outInfo = cs.getString(2);\n        response = new RK_JSCX_Response(list, outInfo);\n\n    } catch (SQLException e) {\n\n        e.printStackTrace();\n\n    } catch (Exception e) {\n        e.printStackTrace();\n\n    }finally {\n\n        try {\n            if (rs != null) {\n                rs.close();\n                if (cs != null) {\n                    cs.close();\n                }\n                if (con != null) {\n                    con.close();\n                }\n            }\n        } catch (SQLException e) {\n\n            System.out.println(\"Exception2\");\n            e.printStackTrace();\n        }\n    }\n    return JSON.toJSONString(response);\n}\n</code></pre>\n"},{"tags":["java","oracle","crashing","jinitiator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13101424,"title":"Java Web Application not working on windows 7","body":"<p>I have a java web application installed on a server which is accessed via intranet. It worked well when i run it on a client pc with Windows XP  and IE 6, with Jinitiator. The problem comes when i run it on Windows 7, on any updated browser. The IE in Windows 7 stops responding whenever i enter the particular url for my application. </p>\n\n<p>I tried to run it on other browsers like Mozilla and Netscape but they give me the plugin error for Jinitiator. In fact i downloaded the plugin and installed it for for both the browsers but still the browser cant find any plugin. </p>\n\n<p>When i researched about it i found that the Jinitiator is only compatible for windows not higher than Windows xp and Browser only IE6 not higher. </p>\n\n<p>I am confused about whether it is ony the JVM version problem or i have to get into the code of the application. Till now i have no access to the code of the application.It was developed by some other company in 2006 which is petty much dead by now. Can any body suggest me any solutions on what can i do to solve this compatibility problem. How can go by it and from where i should start?</p>\n"},{"tags":["sql","oracle","plsql","pivot"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":7418,"score":3,"question_id":365238,"title":"Advice Using Pivot Table in Oracle","body":"<p>i need a report and i should use pivot table for it.Report will be group by categories .It is not good to use case when statement because there are many categories.u can think Northwind Database as sample and All Categories will be shown as Columns and Report will show customers preference among Categories.I dont know another solution and saw examples as Stored Procedures in Internet for Sql Server.Do u know a Solution except for using case when?</p>\n\n<p>Thanks</p>\n"},{"tags":["oracle","pivot","transpose"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":3842,"score":2,"question_id":867737,"title":"Oracle Columns to Rows","body":"<p>In Oracle 9i and 10g how to transpose columns to rows and vice versa?</p>\n"},{"tags":["python","oracle","query-optimization","cx-oracle","fetchall"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13100984,"title":"Optimizing Oracle database query/fetchall","body":"<p>The database design is far from optimum but I have to deal with it and now I'm really stuck.</p>\n\n<p>Edit: I'm using <code>cx_Oracle</code></p>\n\n<p>OK so this is my query:</p>\n\n<pre><code>query=\"select degree, spectraldev.event.eventnumber \\\n       from spectraldev.degree \\\n       join spectraldev.alignment on \\\n            (spectraldev.version_id = alignment.version_id) \\\n       join spectraldev.event on \\\n            (alignment.timestamp between event.eventstart and event.eventstop) \\\n       join spectraldev.eventsetup on \\\n            (spectraldev.event.eventsetup = spectraldev.eventsetup.oid) \\\n       where spectraldev.event.eventnumber&gt;=\" + options.start + \" AND spectraldev.event.eventnumber&lt;=\" + options.stop + \" AND \\\n            HITS&gt;=\" + str(options.minimum_hits)+\" \\\n       order by spectraldev.event.eventnumber\"\n\ndb_cursor.execute(query)\n</code></pre>\n\n<p>Which returns a bunch of <code>degree</code>s (12.34 etc.) for many events, which are identified by a unique number (<code>eventnumber</code> like 346554).</p>\n\n<p>So I get a table like this:</p>\n\n<pre><code>454544    45.2\n454544    12.56\n454544    41.1\n454544    45.4\n454600    22.3\n454600    24.13\n454600    21.32\n454600    22.53\n454600    54.51\n454600    33.87\n454610    32.7\n454610    12.99\n</code></pre>\n\n<p>And so on…</p>\n\n<p>Now I need to create a dictionary with the <em>average degree</em> for each event (summing up all corresponding floats and dividing by the number of them).</p>\n\n<p>I think this could be done in SQL but I just can't get it work. At the moment I'm using python to do this, but the fetch command takes 1-2 hours to complete about 2000 Events, which is far too slow, since I need to process about 1000000 events.</p>\n\n<p>This is my fetching part, which takes so long:</p>\n\n<pre><code>_degrees = []\nfor degree, eventNumber in cursor.fetchall():\n    _degrees.append([eventNumber, degree])\n</code></pre>\n\n<p>and then sorting (which is really fast, &lt; 1sec) and calculating averages (also really fast):</p>\n\n<pre><code>_d={}\nfor eventNumber, degree in _degrees:\n    _d.setdefault(eventNumber, []).append(degree)\n\nfor event in events:\n    _curDegree = _degrees[int(event)]\n    _meanDegree = sum(_curDegree) / float(len(_curDegree))\n    meanDegrees.append(_meanDegree)\n</code></pre>\n\n<p>Is there a way to do the python part in SQL?</p>\n"},{"tags":["oracle","having-clause"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13101112,"title":"Floating point comparison in Oracle","body":"<p>I have a query like</p>\n\n<pre><code>SELECT\n    some_field,\n    SUM(float_field)\nFROM\n    some_table\nGROUP BY\n    some_field\nHAVING\n    SUM(float_field) &lt;&gt; 0\n</code></pre>\n\n<p>Is it safe to use such way of comparison in Oracle or it is better to use something like</p>\n\n<pre><code>ABS(SUM(float_field)) &lt; PrecisionConstant\n</code></pre>\n\n<p>Just for case, float_field is not nullable field of FLOAT type</p>\n"},{"tags":["oracle","audit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13100054,"title":"oracle database AUDIT doesn't show SQL text and bind values","body":"<p>Based on this <a href=\"http://www.oracle-base.com/articles/10g/auditing-10gr2.php\" rel=\"nofollow\">tutorial</a> I have configured auditing on a database with these options:</p>\n\n<pre><code>AUDIT ALL BY db BY ACCESS;\nAUDIT SELECT TABLE, UPDATE TABLE, INSERT TABLE, DELETE TABLE BY db BY ACCESS;\nAUDIT EXECUTE PROCEDURE BY db BY ACCESS;\n</code></pre>\n\n<p>I prepare query from java and run a <code>SELECT</code> query. <code>DBA_AUDIT_TRAIL</code> table shows my <code>SELECT</code> query but <code>SQL_TEXT</code> and <code>SQL_BIND</code> fields are empty. How can I see them? Should I enable any other option? I'm using Oracle 11.2 Express Edition. Is this because It is express edition?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13100000,"title":"How can I create a temporary sequence column in my sql query result?","body":"<p>I have a table which looks like this.</p>\n\n<pre><code>NAME    AGE\njames   22\names    12\nmessi   32\n....\n....\n</code></pre>\n\n<p>I can query this table using <code>Select name, age from emp;</code></p>\n\n<p>Now what I want is having an extra column before name which will be 1,2,3..N if the query return n rows.</p>\n\n<pre><code>SEQUENCE    NAME    AGE\n1    james  22\n2    ames   12\n3    messi  32\n4    ....\n    ....\n</code></pre>\n\n<p>How I can do this?</p>\n"},{"tags":["performance","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13098707,"title":"DBMS_ALERT.WAITANY uses up to 100% cpu","body":"<p>We have an application that uses <code>DBMS_ALERT.WAITANY</code>. Because  the users complained that the application becomes so slow at certain intervals we looked at the enterprise manager of our Oracle 11 DB. We saw that in the same intervals <code>DBMS_ALERT.WAITANY</code> uses up to 100% of one cpu.</p>\n\n<p>Is there a way to know what  notification causes <code>DBMS_ALERT.WAITANY</code> to use so much resource ?</p>\n\n<p>Thanks\nAndreas</p>\n"},{"tags":["sql","database","oracle","plsql"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":7183,"score":3,"question_id":1574565,"title":"Oracle: How can I select records ONLY from yesterday?","body":"<p>I've spent hours searching the web for an answer to this question...</p>\n\n<p>Here's what I currently have:</p>\n\n<pre><code>select  *\nfrom    order_header oh\nwhere   tran_date = sysdate-1\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["sql","oracle","oracle10g","oracle11g","analytic-functions"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":485,"score":4,"question_id":6221038,"title":"Remove ORDER BY clause from PARTITION BY clause?","body":"<p>Is there a way I can reduce the impact of the 'ORDER BY lro_pid' clause in the OVER portion of the inner query below?</p>\n\n<pre><code>SELECT *\n  FROM (SELECT a.*, \n               Row_Number() over (PARTITION BY search_point_type \n                                      ORDER BY lro_pid) spt_rank\n          FROM lro_search_point a\n      ORDER BY spt_rank)\n WHERE spt_rank = 1;\n</code></pre>\n\n<p>I don't care to order this result within the partition since I want to order it by a different variable entirely. lro_pid is an indexed column, but this still seems like a waste of resources as it currently stands. (Perhaps there is a way to limit the ordering to a range of a single row?? Hopefully no time/energy would be spent on sorting within the partition at all)</p>\n"},{"tags":["oracle","hibernate"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13097722,"title":"Hibernate: Connecting as SYSDBA to Oracle database","body":"<p>How to connect to Oracle database as SYSDBA using Hibernate?</p>\n"},{"tags":["oracle","unix","oracle9i","sql-loader"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13097797,"title":"Questions on SQL* Loader commit range and display","body":"<p>As per my observation, when we load the data to Oracle tables using SQL* Loader, 64 records are committed at once, by default.</p>\n\n<p>Could you please let me know if we can change this default limit of insertion/commit to number other than 64?</p>\n\n<p>Also, can we avoid the display of loading, shown below on the console?</p>\n\n<pre><code>Commit point reached - logical record count 64\nCommit point reached - logical record count 128\nCommit point reached - logical record count 192\n</code></pre>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":13095427,"title":"Can only login on Oracle as sysdba","body":"<p>I just installed 11g2 on Redhat 5.\nI logged in using sqlplus as follows:</p>\n\n<pre><code>$sqlplus sys/abcabc as sysdba\n</code></pre>\n\n<p>I created a user as follows:</p>\n\n<pre><code>sqlplus&gt; create user \"xyz\" \n           profile \"DEFAULT\" \n           identified by \"abcabc\" \n           default tablespace \"MYTAB\" \n           temporary tablespace \"TEMP\" \n           account unlock;\n\nsqlplus&gt; grant dba to \"xyz\"\n\nsqlplus&gt; commit\n</code></pre>\n\n<p>sqlplus reported user created and dba granted. No errors were repored by sqlplus.</p>\n\n<p>Now when I try to login as follows:</p>\n\n<pre><code>$sqlplus xyz/abcabc\n</code></pre>\n\n<p>I get a login prompt again and after 3 retries, I'm kicked out.</p>\n\n<p>BUT, if I login as follows:</p>\n\n<pre><code>$sqlplus xyz/abcabc as sysdba\n</code></pre>\n\n<p>I get logged in.</p>\n\n<p>What could be the problem? I've followed the exact same procedure for creating a user many times before and it always worked. What is different this time that I need to login as sysdba? </p>\n\n<p>Thanks</p>\n"},{"tags":["oracle","index","compound-index"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":6870993,"title":"Which indexes are necessary?","body":"<p>If I have a table <code>TABLE_1</code> with, lets say 5 columns:</p>\n\n<pre><code>COL1    |   COL2    |   COL3    |   COL4    |   COL5\n[line]\n[line]\n[...]\n</code></pre>\n\n<p>And there are two main queries I want to do:</p>\n\n<pre><code>SELECT * FROM table_a WHERE COL1 = 'X' and COL2 = 'Y'\n</code></pre>\n\n<p>And the other being:</p>\n\n<pre><code>SELECT * FROM table_a WHERE COL2 = 'Z'\n</code></pre>\n\n<p>Which indexes should I create? Creating one with columns <code>COL1</code> and <code>COL2</code> would index for both queries, or should I need another index just for <code>COL2</code> in order to have the second query faster?</p>\n\n<p>thanks!</p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":132,"score":1,"question_id":12985362,"title":"Oracle Analytics Function Usage","body":"<p>I am new to Oracle Analytics . Can any one help me to resolve the following. </p>\n\n<pre><code>SELECT year,\n           month,\n           week,\n           C.cpg_pk                                                        CPG,\n           C.dep_pk                                                        DEPT,\n           T.cust_id                                                       CUST_ID,\n           D1.r_id                                                         R_ID,\n           Decode(d2.at_code, '3', func1.Get_att(d2.at_code, D2.val_code)) AS P1,\n           Decode(d2.at_code, '2', func1.Get_att(d2.at_code, D2.val_code)) AS IC,\n           Decode(d2.at_code, '1', func1.Get_att(d2.at_code, D2.val_code)) AS B1,\n           Decode(func1.Get_att(d2.at_code, D2.val_code), 2, d2.at_code)   AS P2,\n           Decode(func1.Get_att(d2.at_code, D2.val_code), 5, d2.at_code)   AS B2,\n           Count(DISTINCT A.cust_id)                                       TOTAL_ACC\n           ,\n           Count(DISTINCT T.txn_pk)\n           TOTAL_TXN,\n           SUM(am_amount)                                                  TOTAL_AMT\n    FROM   t_header T,\n           cust_master A,\n           tx_details1 D1,\n           tx_details2 D2,\n           cpg_master C\n    WHERE  A.TYPE = 0\n           AND T.cust_id = A.cust_id\n           AND T.txn_pk = 5001\n           AND T.txn_pk = D1.txn_pk\n           AND T.txn_pk = D2.txn_pk\n           AND D1.cpg_pk = C.cpg_pk\n           AND D1.op = 1\n    GROUP  BY year,\n              month,\n              week,\n              C.cpg_pk,\n              C.dep_pk,\n              t.cust_id,\n              D1.r_id,\n              Decode(d2.at_code, '3', func1.Get_att(d2.at_code, D2.val_code)),\n              Decode(d2.at_code, '2', func1.Get_att(d2.at_code, D2.val_code)),\n              Decode(d2.at_code, '1', func1.Get_att(d2.at_code, D2.val_code)),\n              Decode(func1.Get_att(d2.at_code, D2.val_code), 2, d2.at_code),\n              Decode(func1.Get_att(d2.at_code, D2.val_code), 5, d2.at_code) \n</code></pre>\n\n<p>Its generated output is as follows:</p>\n\n<pre><code>YEAR    MONTH   WEEK    CPG DEPT    CUST_ID R_ID    P1  IC  B1  P2  B2   TOTAL\n2012    08      32     127 -1      10019   3665                     134   23100.09   \n2012    08      32     127 -1      10019   3665                     135   23100.09  \n2012    08      32     127 -1      10019   3665             723           23100.09  \n2012    08      32     127 -1      10019   3665        714                23100.09\n2012    08      32     127 -1      10019   3665                  41       23100.09\n2012    08      32     127 -1      10019   3665                  42       23100.09\n2012    08      32     127 -1      10019   3665     21                    23100.09\n2012    08      32     128 -1      10019   3665                      134  23100.09 \n2012    08      32     128 -1      10019   3665                      135  23100.09 \n2012    08      32     128 -1      10019   3665             723           23100.09 \n2012    08      32     128 -1      10019   3665        714                23100.09 \n2012    08      32     128 -1      10019   3665                  41       23100.09\n2012    08      32     128 -1      10019   3665                  42       23100.09\n2012    08      32     128 -1      10019   3665     21                    23100.09\n</code></pre>\n\n<p>Here the values are repeating. I tried to eliminate the repeating with a <code>group by</code>, but didn't succeed. Could you help me?</p>\n\n<p>The required output is this:</p>\n\n<pre><code>YEAR    MONTH   WEEK    CPG DEPT    CUST_ID R_ID    P1  IC  B1  P2  B2  TOTAL_AMT\n---------------------------------------------------------------------------------\n2012    08      32      127 -1      10019   3665    21  714 723  41   134 23100.09\n2012    08      32      127 -1      10019   3665    21  714 723  41   135 23100.09\n2012    08      32      127 -1      10019   3665    21  714 723  42   134 23100.09\n2012    08      32      127 -1      10019   3665    21  714 723  42   135 23100.09\n2012    08      32      128 -1      10019   3665    21  714 723  41   134 23100.09\n2012    08      32      128 -1      10019   3665    21  714 723  41   135 23100.09\n2012    08      32      128 -1      10019   3665    21  714 723  42   134 23100.09\n2012    08      32      128 -1      10019   3665    21  714 723  42   135 23100.09\n</code></pre>\n\n<p>The main thing is <code>year</code>, <code>month</code>, <code>week</code>, <code>cpg</code>, <code>dept</code>, <code>cust_id</code>, <code>r_id</code>, <code>p1</code>, <code>ic</code>, <code>b1</code>, <code>p2</code>, <code>b2</code> it should be unique row. Is it achievable using analytical functions or do I need to write PL/SQL? is my question is sensable ?</p>\n"},{"tags":["oracle","asp.net-mvc-3","asp.net-membership","odac"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":254,"score":0,"question_id":7106321,"title":"InstallAllOracleASPNETProviders doesn't work correctly","body":"<p>I am using asp.net mvc 3 and oracle database with ODAC1120240Beta_EntityFramework. </p>\n\n<p>I want to do authorization in my site. Database works correctly, I can do everything with Database data, but if I go to <code>ASP.NET Configuration -&gt; Provider</code> I see only <code>AspNetSqlMembershipProvider</code>. </p>\n\n<p>InstallAllOracleASPNETProviders doesn't work correctly.</p>\n\n<p>All functions, views and packages were created succesully. I do all using <a href=\"http://download.oracle.com/docs/cd/B28359_01/appdev.111/b28844/installation.htm#BABFFDIE\" rel=\"nofollow\">this Oracle Guide</a>  </p>\n\n<p>Here is part of Oracle Database Output after executing this script from Visual Studio Tools.</p>\n\n<pre><code>GRANT SELECT ON ora_vw_aspnet_Applications TO ora_aspnet_Mem_ReportAccess\n                                              *\nerror in string 1:\nORA-01917: user or role 'ORA_ASPNET_MEM_REPORTACCESS' does not exist\n\n\nGRANT SELECT ON ora_vw_aspnet_Users TO ora_aspnet_Mem_ReportAccess\n                                       *\nerror in string 1:\nORA-01917: user or role 'ORA_ASPNET_MEM_REPORTACCESS' does not exist\n\n\nGRANT SELECT ON ora_vw_aspnet_MemUsers TO ora_aspnet_Mem_ReportAccess\n                *\nerror in string 1:\nORA-00942: table or view does not exist\n</code></pre>\n"},{"tags":["mysql","oracle","text","varchar2"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":674,"score":1,"question_id":2192463,"title":"Convert from Oracle VARCHAR2 to MySQL TEXT","body":"<p>How to do correct conversion of data from Oracle VARCHAR2 type to MySQL TEXT type? \nI want insert it into mysql table in field with TEXT type through DBLink.</p>\n"},{"tags":["oracle","query","oracle11gr2"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":379,"score":5,"question_id":11083718,"title":"Query causes DB to fail with ORA-0113","body":"<p>I need to create a collection out of elements in a collection within an inline view. I've tryed to deaggregate the collection and aggregate it again using the collect and table functions, but it fails with ORA-03113.</p>\n\n<p>Below is a simplified version of the query causing the issue.</p>\n\n<p>In my Implementation I will have many levels of nested queries joined with unions in a single query that should aggregate all collections into a single one. For performance reasons (Expensive context switching), implementing PL/SQL code to aggregate the collections is not an option.</p>\n\n<p>Thanks a lot for your feedback/suggestions.</p>\n\n<h3>Script</h3>\n\n<hr>\n\n<pre><code>SELECT BANNER FROM V$VERSION\n/\n\nCREATE OR REPLACE TYPE OBJECT_ID_TAB_T IS TABLE OF NUMBER(11);\n/\n\nSELECT OWNER, CAST(COLLECT( MULTISET(SELECT COLUMN_VALUE FROM TABLE((OBJECT_ID_LIST) ))) AS OBJECT_ID_TAB_T) AS OBJECT_ID_LIST\nFROM  (SELECT OWNER, OBJECT_NAME, CAST(COLLECT(OBJECT_ID) AS OBJECT_ID_TAB_T)  AS OBJECT_ID_LIST\n       FROM ALL_OBJECTS\n       GROUP BY OWNER, OBJECT_NAME\n      )\nGROUP BY OWNER\n/\n</code></pre>\n\n<h3>Results</h3>\n\n<hr>\n\n<pre><code>BANNER                                                                          \n--------------------------------------------------------------------------------\nOracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production    \nPL/SQL Release 11.2.0.1.0 - Production                                          \nCORE    11.2.0.1.0  Production                                                      \nTNS for 64-bit Windows: Version 11.2.0.1.0 - Production                         \nNLSRTL Version 11.2.0.1.0 - Production                                          \n\n5 rows selected.\nType created.\nSELECT OWNER, CAST(COLLECT( MULTISET(SELECT COLUMN_VALUE FROM TABLE((OBJECT_ID_LIST) ))) AS OBJECT_ID_TAB_T) AS OBJECT_ID_LIST\nFROM  (SELECT OWNER, OBJECT_NAME, CAST(COLLECT(OBJECT_ID) AS OBJECT_ID_TAB_T)  AS OBJECT_ID_LIST\n       FROM ALL_OBJECTS\n       GROUP BY OWNER, OBJECT_NAME\n      )\nGROUP BY OWNER\n*\nError at line 0\nORA-03113: end-of-file on communication channel\nProcess ID: 8000\nSession ID: 154 Serial number: 164\n\nScript Terminated on line 25.\n</code></pre>\n"},{"tags":["sql","oracle","reporting-services"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5163,"score":0,"question_id":1229575,"title":"Passing date parameters to Oracle Query in SSRS","body":"<p>I have an SSRS report that uses an Oracle datasource. I have a query;</p>\n\n<pre><code>select * from myTable t where\nt.date between Date '2009-08-01' and Date '2009-08-04' + 1\n</code></pre>\n\n<p>This query works, both in Oracle and from SSRS. It gets all rows from myTable when the t.date column is between 08/01/2009 and 08/04/2009. The t.date column is of type Date()</p>\n\n<p>Now, I want the dates to be parameters. So I changed the query to:</p>\n\n<pre><code>select * from myTable t where\nt.date between Date :myDate and Date :myDate + 1\n</code></pre>\n\n<p>When I run this query in SSRS, it prompts me to enter a value for :myDate. </p>\n\n<p>I tried 2009-08-01, '2009-08-01' both results in an oracle sql processing error: \" Missing expression\".</p>\n\n<p>Any ideas?</p>\n"},{"tags":["oracle","plsql","oracle10g","associative-array"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":3877,"score":5,"question_id":7412731,"title":"What's the difference between pls_integer and binary_integer?","body":"<p>I've inherited some code which is going to be the base for some additional work. Looking at the stored procs, I see quite a lot of associative-arrays.</p>\n\n<p>Some of these are indexed by binary_integers, some by pls_integers. Are there any differences between the two?</p>\n\n<p>I had a look at <a href=\"http://download.oracle.com/docs/cd/E11882_01/appdev.112/e17126/datatypes.htm#i10726\">the documentation</a>, but apart from this line: </p>\n\n<blockquote>\n  <p>The PL/SQL data types <code>PLS_INTEGER</code> and <code>BINARY_INTEGER</code> are identical. For simplicity, this document uses PLS_INTEGER to mean both <code>PLS_INTEGER</code> and <code>BINARY_INTEGER</code>.</p>\n</blockquote>\n\n<p>I couldn't find any difference between the two. So what's the difference? Are both around for historical/compatibility reasons?</p>\n\n<p>I'm using Oracle 10gR2</p>\n"},{"tags":["mysql","sql","oracle","postgresql","derby"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":36,"score":3,"question_id":13093761,"title":"Grouping query while providing extra selects","body":"<p>I have the following query</p>\n\n<pre><code>select t1.file_name, \n       max(create_date), \n       t1.id \n from dbo.translation_style_sheet AS t1 \nGROUP BY t1.file_name\n</code></pre>\n\n<p>I'd like to add the id to the select, but everytime I do this, it returns all results rather than my grouped results</p>\n\n<p>my goal is to return </p>\n\n<pre><code>pdf | 10/1/2012 | 3\ndoc | 10/2/2012 | 5\n</code></pre>\n\n<p>however my query is returning </p>\n\n<pre><code>pdf | 9/30/2012 | 1\npdf | 9/31/2012 | 2\npdf | 10/1/2012 | 3\ndoc | 10/1/2012 | 4\ndoc | 10/2/2012 | 5\n</code></pre>\n\n<p>Anybody know what I'm doing wrong?</p>\n"},{"tags":["oracle","windows-services"],"answer_count":7,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1850,"score":5,"question_id":7206129,"title":"Can't connect to Oracle from a windows service (error: ORA-12154: TNS:could not resolve service name (12154) )","body":"<p><strong>LATEST Update (Nov 2 2011 9AM)</strong>\nI tried running tnsping from the service and it WORKS!\nHowever i still get error 12154 when i try to connect.  I'm completely confused now, i can't understand how tnsping could work fine but the connection is unable to resolve the service name.</p>\n\n<p>For some reason when i run the following code from a windows service (on a timer event) I get the error: ORA-12154: TNS:could not resolve service name (12154) </p>\n\n<p>When i run the exact same code from a windows form app, it connects just fine.  Both the service and the app are running under my account, so there is no difference in the account permissions.<br>\nI'm baffled as to why the service fails, can anyone shed some light on this please?</p>\n\n<pre><code>string connectionString =     \";DSN=o1;UID=SCOTT;PWD=TIGER;DBQ=ORCL;DBA=W;APA=T;EXC=F;FEN=T;QTO=T;FRC=10;FDL=10;LOB=T;RST=T;GDE=F;FRL=F;BAM=IfAllSuccessful;MTS=F;MDI=F;CSR=F;FWC=F;PFC=10;TLO=0;\";\n        OdbcConnection cnn;\n        cnn = new OdbcConnection(connectionString);\n        try\n        {\n            cnn.Open();\n            myEventLog.WriteEntry(\"Connection SUCCEEDED!!!\");\n            cnn.Close();\n        }\n        catch (Exception ex)\n        {\n            string mes = \"Connection FAILED!!!\" + ex.Message;\n            myEventLog.WriteEntry(mes);\n        }\n</code></pre>\n\n<p>Updates:</p>\n\n<p>1) I've tried with both system and user dsn, both have the same behaviour</p>\n\n<p>2) I added a TNS_ADMIN to the system environment variables to make sue it can find the tnsnames.ora file.  This did not change the behaviour.</p>\n\n<p>New Updates (Nov 1 2011):</p>\n\n<p>1) A lot of the suggestions have involved putting the ip address of the Oracle server in the connection string to bypass the tnsnames.ora file. Unfortunately the app has to work with a user set oracle connection, so we don't have any of that information.  All i have to work with is a DSN.  I have to make it connect from a windows service using an Oracle DSN.</p>\n\n<p>New Updates (Nov 2 2011):\n1) It looks like the service IS successfully reading the tnsnames.ora file.  I ran process monitor and got these lines:</p>\n\n<pre><code>7:52:54.4365217 AM  OracleService.exe   4624    CreateFile          C:\\oracle\\ora92\\network\\Names\\sdns.ora  NAME NOT FOUND  Desired Access: Generic Read, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a\n7:52:54.4368466 AM  OracleService.exe   4624    CreateFile  C:\\Windows\\SysWOW64\\tnsnames.ora    NAME NOT FOUND  Desired Access: Read Attributes, Disposition: Open, Options: Open Reparse Point, Attributes: n/a, ShareMode: Read, Write, Delete, AllocationSize: n/a\n7:52:54.4371203 AM  OracleService.exe   4624    CreateFile  C:\\oracle\\ora92\\network\\ADMIN\\tnsnames.ora  SUCCESS Desired Access: Read Attributes, Disposition: Open, Options: Open Reparse Point, Attributes: n/a, ShareMode: Read, Write, Delete, AllocationSize: n/a, OpenResult: Opened\n7:52:54.4372693 AM  OracleService.exe   4624    QueryBasicInformationFile   C:\\oracle\\ora92\\network\\ADMIN\\tnsnames.ora  SUCCESS CreationTime: 01/11/2011 3:10:08 PM, LastAccessTime: 01/11/2011 3:10:08 PM, LastWriteTime: 01/11/2011 3:10:42 PM, ChangeTime: 01/11/2011 3:18:44 PM, FileAttributes: A\n7:52:54.4372866 AM  OracleService.exe   4624    CloseFile   C:\\oracle\\ora92\\network\\ADMIN\\tnsnames.ora  SUCCESS \n7:52:54.4375418 AM  OracleService.exe   4624    CreateFile  C:\\oracle\\ora92\\network\\ADMIN   SUCCESS Desired Access: Read Data/List Directory, Synchronize, Disposition: Open, Options: Directory, Synchronous IO Non-Alert, Attributes: n/a, ShareMode: Read, Write, Delete, AllocationSize: n/a, OpenResult: Opened\n7:52:54.4375857 AM  OracleService.exe   4624    QueryDirectory  C:\\oracle\\ora92\\network\\ADMIN\\tnsnames.ora  SUCCESS Filter: tnsnames.ora, 1: tnsnames.ora\n7:52:54.4376192 AM  OracleService.exe   4624    CloseFile   C:\\oracle\\ora92\\network\\ADMIN   SUCCESS \n7:52:54.4377770 AM  OracleService.exe   4624    CreateFile  C:\\oracle\\ora92\\network\\ADMIN\\tnsnames.ora  SUCCESS Desired Access: Generic Read, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a, OpenResult: Opened\n7:52:54.4379306 AM  OracleService.exe   4624    ReadFile    C:\\oracle\\ora92\\network\\ADMIN\\tnsnames.ora  SUCCESS Offset: 0, Length: 337, Priority: Normal\n7:52:54.4380061 AM  OracleService.exe   4624    ReadFile    C:\\oracle\\ora92\\network\\ADMIN\\tnsnames.ora  END OF FILE Offset: 337, Length: 4,096\n7:52:54.4380276 AM  OracleService.exe   4624    CloseFile   C:\\oracle\\ora92\\network\\ADMIN\\tnsnames.ora  SUCCESS \n7:52:54.4385823 AM  OracleService.exe   4624    CreateFile  C:\\oracle\\ora92\\network\\ADMIN\\ldap.ora  NAME NOT FOUND  Desired Access: Read Attributes, Disposition: Open, Options: Open Reparse Point, Attributes: n/a, ShareMode: Read, Write, Delete, AllocationSize: n/a\n</code></pre>\n\n<p>So does anyone have any idea why it might be failing after reading the tnsnames.ora file?  Thanks</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13093323,"title":"Sql data retrieval issue","body":"<p>I have below tables:</p>\n\n<p><strong>Order</strong></p>\n\n<pre><code>Order_id     orde_number    Order_name  \n\n1             12345          iphone\n\n2             67891          samsung \n</code></pre>\n\n<p><strong>order_event</strong></p>\n\n<pre><code>order_event_no      status\n\n1                    D\n\n1                    C\n\n2                    C\n</code></pre>\n\n<p>I wrote below query to retrieve <code>status not in ('D')</code> like below ,But it gave me 2 records ,\nBut query should not return because <code>order_no</code> 1 already as status <code>D</code>, even though  it has second record C it should not include.</p>\n\n<pre><code>select o.order_number,o.order_name \n  from order o \n  join order_event oe \n    on (o.order_id=oe.order_event_no) where oe.status not in ('D') \n</code></pre>\n\n<p>Regards,\nChaitu</p>\n"},{"tags":["php","oracle","iis","oci","instantclient"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":4793,"score":0,"question_id":8635881,"title":"Fatal error: Call to undefined function oci_connect()","body":"<p>I have the next lines uncommented (in my php.ini):</p>\n\n<pre><code>extension=php_oracle.dll \nextension=php_oci8.dll\n</code></pre>\n\n<p>And I downloaded this file <code>instantclient-basiclite-nt-11.2.0.2.0.zip</code> and unzipped and put that on drive D...</p>\n\n<p>I am using Windows XP</p>\n\n<p>I set environment variable like this:</p>\n\n<pre><code>LD_LIBRARY_PATH     C:\\instantclient_11_2:$LD_LIBRARY_PATH \nORACLE_HOME     C:\\instantclient_11_2 \n</code></pre>\n\n<p>But when I execute <code>oci_connect()</code> function, I see this error :</p>\n\n<blockquote>\n  <p>Fatal error: Call to undefined function oci_connect() in ...</p>\n</blockquote>\n\n<p>and i found this warnings on erroeLog file:</p>\n\n<blockquote>\n  <p>[29-Dec-2011 00:36:39] PHP Warning:  PHP Startup: Unable to load dynamic library 'c:\\php\\ext\\php_oci8.dll' - The specified module could not be found.\n   in Unknown on line 0</p>\n  \n  <p>[29-Dec-2011 00:36:39] PHP Warning:  PHP Startup: Unable to load dynamic library 'c:\\php\\ext\\php_oracle.dll' - The specified module could not be found.</p>\n</blockquote>\n"},{"tags":["oracle","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12931912,"title":"How to list table in oracle function","body":"<p>in postresql function we can list table by FOR i IN (SELECT ...)</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION f()\n  RETURNS trigger AS\n$BODY$\nDECLARE\ntable_to_row RECORD;\nBEGIN\n&lt;&lt;for_loop&gt;&gt;\nFOR table_to_row IN SELECT id FROM table1\nLOOP\n    //do something\nEND LOOP for_loop;\nRETURN NULL;\nEND;\n$BODY$\n  LANGUAGE plpgsql VOLATILE\n  COST 100;\n</code></pre>\n\n<p>How can we do such thing in Oracle 11g?\nI need this part</p>\n\n<pre><code>FOR table_to_row IN SELECT id FROM table1\nLOOP\n   //do something\nEND LOOP;\n</code></pre>\n"},{"tags":["oracle","connection-string","windows-authentication","oracle-xe"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":597,"score":2,"question_id":8837458,"title":"Oracle Connection String With Windows Authentication","body":"<p>We have a requirement to make our products work on Oracle as well as SQL Server (around which they were originally built). Unfortunately we don't have any in house Oracle development experience to speak of but as a senior dev it has fallen to me to lead the project. So far I have managed to make our app connect to an Oracle database (I'm using Oracle XE 11.2) by using the following connection string:</p>\n\n<pre><code>Data Source=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=VS010-ORA11GR1)(PORT=1523))(CONNECT_DATA=(SERVICE_NAME=DEVORA)));User Id=dbo;Password=dbo;\n</code></pre>\n\n<p>The reason we decided to use this type of connection string is because we do not want to rely on changing tnsnames.ora on every client machine. However, as you can see this specifies an Oracle user and associated password. We also need to provide the ability to use the equivalent of SQL Server integrated security.</p>\n\n<p>According to the literature I have read, to do this I simply need to specify <code>/</code> as the user id and then omit the password portion (as this is ignored anyway for Windows authentication). I also created the user in Oracle, making sure it matched the Windows user, with the following snippets:</p>\n\n<pre><code>CREATE USER \"OPS$&lt;DOMAIN&gt;\\&lt;user&gt;\" IDENTIFIED EXTERNALLY;\n\nGRANT CONNECT,RESOURCE TO \"OPS$&lt;DOMAIN&gt;\\&lt;user&gt;\";\n</code></pre>\n\n<p>I also checked that the sqlnet.ora file on my local machine which hosts the XE instance and my dev environment contained the line:</p>\n\n<pre><code>SQLNET.AUTHENTICATION_SERVICES= (NTS)\n</code></pre>\n\n<p>I understood that this would enable my app to connect to the Oracle database uing Windows Authentication. However what actually happens is that I get the following Oracle error message:</p>\n\n<blockquote>\n  <p>ORA-01005: null password given; logon denied</p>\n</blockquote>\n\n<p>this doesn't make much sense because of course its null - it's supposed to be, according to the tutorials I've read. </p>\n\n<p>The app targets .Net Framework 3.5, we are using the System.Data.OracleProvider  and the actual connecting and so on is handled by Enterprise Library 5. Incidentally, I am aware of the deprecation of the OracleClient component but I just want this to work before I go into the extra complexities of changing providers.</p>\n\n<p>Can anyone tell me what I'm missing? Have I chosen the wrong type of connection string? I apologise for any basic mistakes but I have always managed to avoid Oracle until now so my knowledge of it is close to zero.</p>\n\n<p>Many thanks</p>\n"},{"tags":["sql","oracle","clob"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13091064,"title":"SQL: Whether a clob contains a number","body":"<p>In an Oracle database, in table A, there is a clob field called 'ID_CLOB', storing some id's from another table B.</p>\n\n<p>Example:</p>\n\n<pre><code>|              ID_CLOB               |\n,15,16,17,18,19,21,23,24,25,30,32,33,\n</code></pre>\n\n<p>And here is my question, how can I know from a SQL statement to tell if a number, say 15, is in the 'ID_CLOB' field?</p>\n\n<p>Thanks in advcance.</p>\n\n<h3>The situation:</h3>\n\n<p>I am actually working on a third party application that come with this db schema. Think about the scenario: that in table B, there are person information per line, and table A, let's assume its a department table, each row is a department and the clob field is used to store the information of who are in that department. </p>\n"},{"tags":["oracle","plsql","oracle-sqldeveloper"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":3353,"score":5,"question_id":7887413,"title":"Printing the value of a variable in SQL Developer","body":"<p>I wanted to print the value of a particular variable which is inside an anonymous block. I am using Oracle SQL Developer. I tried using <code>dbms_output.put_line</code>. But it is not working. The code which I am using is shown below.</p>\n\n<pre><code>SET SERVEROUTPUT ON\n\nDECLARE\n\n  CTABLE USER_OBJECTS.OBJECT_NAME%TYPE;\n  CCOLUMN ALL_TAB_COLS.COLUMN_NAME%TYPE;\n  V_ALL_COLS VARCHAR2(500);\n\n  CURSOR CURSOR_TABLE\n    IS\n    SELECT OBJECT_NAME \n    FROM USER_OBJECTS \n    WHERE OBJECT_TYPE='TABLE'\n    AND OBJECT_NAME LIKE 'tb_prm_%';\n\n  CURSOR CURSOR_COLUMNS (V_TABLE_NAME IN VARCHAR2)\n    IS\n    SELECT COLUMN_NAME\n    FROM ALL_TAB_COLS\n    WHERE TABLE_NAME = V_TABLE_NAME;\n\nBEGIN\n\n  OPEN CURSOR_TABLE;\n\n  LOOP\n    FETCH CURSOR_TABLE INTO CTABLE;\n    EXIT WHEN CURSOR_TABLE%NOTFOUND;\n\n    OPEN CURSOR_COLUMNS (CTABLE);\n\n    V_ALL_COLS := NULL;\n\n    LOOP\n      FETCH CURSOR_COLUMNS INTO CCOLUMN;\n      V_ALL_COLS := V_ALL_COLS || CCOLUMN;\n      IF CURSOR_COLUMNS%FOUND THEN\n        V_ALL_COLS := V_ALL_COLS || ', ';\n      ELSE\n        EXIT;\n      END IF;\n    END LOOP;\n\n    DBMS_OUTPUT.PUT_LINE(V_ALL_COLS);\n\n  END LOOP;\n  CLOSE CURSOR_TABLE;\n\nEND;\n</code></pre>\n\n<p>And I am getting the output only as <code>anonymous block completed</code>. </p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":58,"score":-1,"question_id":13091226,"title":"get the employees who joined the company on same day by join","body":"<p>what will be the query to find out the list of employees who join the company on the same day.</p>\n\n<p>the logic behind the query which can be used is that the difference between the months of hiredate for all those employees will be zero.</p>\n\n<p>syntax for differece between the months . can datediff be used</p>\n"},{"tags":["oracle","scripting","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":48,"score":0,"question_id":13091672,"title":"Automate scripts","body":"<p>I have bunch of SQL statements and I want to put them in a script and run them together and produce an EXCEL (*.xls) file; how can I do that in toad?</p>\n\n<p>Example of script</p>\n\n<pre><code>SELECT SUM(CASE \n             WHEN dvdn.ACDCALLS = (dvdn.ABNCALLS + dvdn.ABNCALLS1) \n             THEN dvdn.ABNCALLS    \n             ELSE dvdn.ACDCALLS + dvdn.ABNCALLS - dvdn.ABNCALLS1 \n           END) AS InboundCalls \n  from ccrdba.CMS_DVDN dvdn , ccrdba.VDN_DIM dim\n where DIM.DW_VDN_ID = DVDN.DW_VDN_ID (+)\n   And DETAIL_GROUP like 'HD%'\n   and vdn_name not like '%ASM%'\n   And DIM.AGENT_GROUP &lt;&gt;'Smart Specialist'\n   And row_date BETWEEN TO_DATE('2012-SEP-01', 'YYYY-MON-DD')AND TO_DATE('2012-SEP-30', 'YYYY-MON-DD')\n</code></pre>\n\n<p>Second Statement</p>\n\n<pre><code>select count(*)\n  from xx_new.xx_online_registrations@appsread.prd.com oreg\n where oreg.client_party_id = 141043767\n   and oreg.cti_id IS NOT NULL\n   and oreg.created_by = 'IVR-INTERACTIONS'\n   and TRUNC(CREATION_DATE) between '01-SEP-2012' and '30-SEP-2012'\n   and status = 'POSTED'\n   and last_updated_by = 'IVR-INTERACTIONS'\n</code></pre>\n\n<p>Like above there are about 10 SQL statements. How do I combine them together in ORACLE?</p>\n"},{"tags":["java","algorithm","oracle","autosuggest","recommendation-engine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13091236,"title":"Suggestion/Recommendation engine for processes","body":"<p>I have some tables with several jobs, dependencies and elapsed times. The purpose of the engine is that when you insert the name of the job, it gives you a recommendation about what process to check in order to make it faster.</p>\n\n<p>For example, given the next table:</p>\n\n<pre>\n<code>\n\n    jobs\n    +----+-------------------------+------------+-----+\n    | id | job_name                | parent_job |type |\n    +----+-------------------------+------------+-----+\n    | 1  | delete_everything_box   |            |b    |\n    | 2  | delete_everything       | 2          |j    |\n    | 3  | another_job             |            |j    |\n    | 4  | dependant_box           |            |b    |\n    | 5  | dependant_job_1         | 4          |j    |\n    | 6  | dependant_job_2         | 4          |j    |\n    +----+-------------------------+------------+-----+\n\n</code>\n</pre>\n\n<p>Job dependant_box may have a dependency -even several-, described in another table:</p>\n\n<pre>\n<code>\n\n    dependencies\n    +--------+-------------------------+------+\n    | job_id | condition_job           | type |\n    +--------+-------------------------+------+\n    | 4      | delete_everything_box   | b    |\n    +--------+-------------------------+------+\n\n</code>\n</pre>\n\n<p>Then, you have a table where every single elapsed time is stored (A):</p>\n\n<pre>\n<code>\n\n    timings\n    +--------+----------------------+---------------------+----------+-----------------+\n    | job_id | start_time           | end_time            | status   | elapsed_time    |\n    +--------+----------------------+---------------------+----------+-----------------+\n    | 1      | 2012/09/19 02:57:35  | 2012/09/20 02:59:38 | success  | 86523           |\n    | 2      | 2012/09/19 02:57:36  | 2012/09/20 02:59:37 | success  | 86521           |\n    | 3      | 2012/09/19 02:57:36  | 2012/09/19 02:59:37 | success  | 121             |\n    | 4      | 2012/09/20 02:59:39  | 2012/09/20 03:05:02 | success  | 323             |\n    | 5      | 2012/09/20 02:59:40  | 2012/09/20 03:01:01 | success  | 81              |\n    | 6      | 2012/09/20 02:59:40  | 2012/09/20 03:05:01 | success  | 321             |\n    +--------+----------------------+---------------------+----------+-----------------+\n\n</code>\n</pre>\n\n<p>So, let's say that you enter a job name, in this case \"delete_everything_box\". From A, you can deduce that *delete_everything* is the culprit. But there is another scenario (B):</p>\n\n<pre>\n<code>\ntimings\n\n    +--------+----------------------+---------------------+----------+-----------------+\n    | job_id | start_time           | end_time            | status   | elapsed_time    |\n    +--------+----------------------+---------------------+----------+-----------------+\n    | 1      | 2012/09/19 02:57:35  | 2012/09/20 02:59:38 | success  | 86523           |\n    | 2      | 2012/09/19 02:57:36  | 2012/09/20 02:59:37 | success  | 86521           |\n    | 3      | 2012/09/19 02:57:36  | 2012/09/19 02:59:37 | success  | 121             |\n    | 4      | 2012/09/19 02:57:35  | 2012/09/20 03:05:02 | success  | 86847           |\n    | 5      | 2012/09/20 02:59:39  | 2012/09/20 03:01:01 | success  | 82              |\n    | 6      | 2012/09/20 02:59:39  | 2012/09/20 03:05:01 | success  | 322             |\n    +--------+----------------------+---------------------+----------+-----------------+\n\n</code>\n</pre>\n\n<p>In B if you enter the name dependant_box, it is going to tell you that *delete_everything* is the culprit. This is because since it has dependencies, it will wait until all the dependencies are satisfied to start running. It can also happen that several jobs are chained so you have to check all of them, or at least the 5 with higher elapsed time.</p>\n\n<p>So, having the given information it should show 10 candidates to optimize, which are going to be entered into the engine. It can also happen that some of the jobs couldn't be fixed, so they shouldn't be shown. Also, there could be that some jobs take longer or are chained, but the weightage is based on elapsed time.</p>\n\n<p>The tables are stored in oracle, and the language should be java.</p>\n\n<p>What do you suggest? We are talking about developing an automatized tool for a team to check jobs that are taking longer. If you can point me to algorithms, libraries and so on, it will be appreciated.</p>\n\n<p>I forgot to mention it: <strong>b</strong> means box which contains 1 or many jobs (j). <strong>j</strong> is a single job entry.</p>\n"},{"tags":["sql","performance","oracle","plsql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13091634,"title":"Oracle TimeStamp with Timezone vs timestamp vs datetime vs offsets","body":"<p>So i am trying to improve the performance of my reporting queries where time is being used as a filter for these sql statements. The columns that the time we're querying on are currently stored as timestamps with timezone. I have found that indexing on these columns seems to auto generate a function based index where it performs a sys_extract_utc on the column. I have also found that filtering on these columns seems to slow down the performance of my queries greatly. Considering i need these columns with the timestamp with timezone to perform calculations on other things beside the reporting, i had planned to create a new column for each of the timestamp with timezone fields.</p>\n\n<p>What i want to know is what would be the best way to go/ what would be the pros/cons with the creation of these two new columns. As in what type of field would give me the best performance on filtering my queries. a timestamped column with no timezone, a datetime, or would using an offset give me the best results for my queries?</p>\n\n<p><strong>NOTE:</strong> by offset what i mean is i would give what we consider as the beginning of time in our database a numeric value and from then on the time values would be given a numeric comparison to filter against. </p>\n\n<p>and help or suggestions are greatly appreciated. Thank you.</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13090295,"title":"SQL - group by part of a string","body":"<p>I've a column which has values like\n       <code>Mozilla/5.0 (Linux; U; Android 2.3.6; en-us; SGH-T989 Build/GINGERBREAD)</code>  and <code>Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_3_2 like Mac OS X; en-us)</code> and some other variations</p>\n\n<p>how do I make a group by clause by just taking into account the first few characters say <code>Mozilla/5.0 (Linux; U; Android</code> and <code>Mozilla/5.0 (iPhone; U; CPU iPhone</code></p>\n\n<p>can someone please suggest</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":58,"score":-1,"question_id":13090452,"title":"sql query by using join only","body":"<p>List the <code>emp</code>s Whose <code>job</code>s are same as MILLER's <code>job</code> or <code>sal</code> is more than ALLEN's <code>sal</code>.</p>\n\n<p>the above question is a  common question of oracle sql. the answer by using sub queries has been solved. but the solution of  this question by using only join will be ?</p>\n\n<pre><code>select *  from emp  where job =  (select  job from emp where ename =\n'MILLER' ) or  sal&gt;(select sal from emp where ename = 'ALLEN');\n</code></pre>\n"},{"tags":["oracle","constraints","check-constraints"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":37,"score":0,"question_id":13089820,"title":"Oracle - Check constraint maximum number of x words","body":"<p>I want to add a check constraint that checks whether a field has a maximum number of X white spaces \" \". I couldn't find anything about it on the oracle website. Anybody knows whether that's possible? Maybe through a PL/SQL function?</p>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13089513,"title":"Is it possible to copy all data from one table to another table, plus an extra column?","body":"<p>I have two tables that are very slightly different.  Table A has 4 columns, and Table B has only 3.  I want to copy all the data from Table B into Table A, but I also want to populate the extra column with the value <code>1</code> for every row.</p>\n\n<p>This would work if not for the extra column:</p>\n\n<pre><code>insert into TABLEA (COL1, COL2, COL3) select COL1, COL2, COL3 from TABLEB;\n</code></pre>\n\n<p>Unfortunately, the extra column in Table A is not nullable, so I can't just run an update afterwards.</p>\n\n<p>Thanks for any help!</p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13089199,"title":"How to generate script lists in Oracle","body":"<p>IN SQL Server there is a tasks feature and then you can 'generate scripts' which is useful for things like views and stored procedures, or more.</p>\n\n<p>In Oracle, can I generate such a copy of Views? How is this done? I am using PL SQL.</p>\n\n<p>I am trying to update my Oracle database on my laptop. REcently many new views and stored procedures were added to the database I am working on at job. I also work from laptop for development.</p>\n\n<p>Rather than backup the entire database, if I can just copy these views and sp's would be far easier.</p>\n"},{"tags":["sql","oracle","triggers","oracle10g","materialized-views"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13068366,"title":"How to refresh materialized view using trigger?","body":"<pre><code>create or replace TRIGGER REFRESH_REST_VIEW\n AFTER\n  INSERT OR UPDATE\n ON tbl_contract\nBEGIN\n    execute DBMS_MVIEW.REFRESH('REST_VIEW');\nEND REFRESH_REST_VIEW;\ncommit;\n</code></pre>\n\n<p>This is my sql trigger i am using to refresh Materialized View. But it says..</p>\n\n<pre><code>Warning: execution completed with warning\nTRIGGER REFRESH_REST_VIEW Compiled.\n</code></pre>\n\n<p>P.S. : The trigger will be executed when the data of table (used by Materialized View) takes any DML operation.</p>\n\n<p>I have googled enough, many post says it is possible but I am not getting how to do it. I tried with regular trigger syntax and it doesn't works.</p>\n\n<blockquote>\n  <p><strong>Updated:</strong></p>\n</blockquote>\n\n<p>Now i am trying to the same with Procedure and Trigger..</p>\n\n<pre><code>create or replace\nPROCEDURE Rfresh_mate_views AS\n  BEGIN\n   DBMS_MVIEW.REFRESH('REST_VIEW');\n  END Rfresh_mate_views;\n\n\ncreate or replace trigger refresh_company_mview\nafter insert or update ON SCD.SCD_COMPANY\nbegin\nRFRESH_MATE_VIEWS(); \nend refresh_company_mview;\n</code></pre>\n\n<p>All has been compiled successfully but while updating in the table it says:</p>\n\n<pre><code>ORA-04092: cannot COMMIT in a trigger\nORA-06512: at \"SYS.DBMS_SNAPSHOT\", line 2449\nORA-06512: at \"SYS.DBMS_SNAPSHOT\", line 2429\nORA-06512: at \"SCD.RFRESH_MATE_VIEWS\", line 3\nORA-06512: at \"SCD.REFRESH_COMPANY_MVIEW\", line 2\nORA-04088: error during execution of trigger 'SCD.REFRESH_COMPANY_MVIEW'\n</code></pre>\n"},{"tags":["oracle","java-ee","character-encoding","jdeveloper","oracle-apps"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13082964,"title":"setting encoding for CSV file generated by exportButton in Oracle Application Framework","body":"<p>Is it possible to set encoding for exported data from OAF page? \nI have some polish letters like 'ś' or 'ć' and OAF page shows it correctly but in exported CSV file these letters are shown as '?'</p>\n"},{"tags":["oracle","stored-procedures","plsql","legacy","sqlplus"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":10369,"score":1,"question_id":1065575,"title":"How do I Open a Stored Procedure and Edit it in SQL*Plus","body":"<p>I need to make some changes to an old Oracle stored procedure on an obsolete box that is being kept around to run an old legacy process.  The only tool I can connect to the db with is SQL*Plus.  How do I load a stored proc into memory for editing in SQL*Plus?  </p>\n\n<p>The tutorials I've found on-line don't exlain how that's done. :-(</p>\n"},{"tags":["oracle","random"],"answer_count":4,"favorite_count":1,"up_vote_count":11,"down_vote_count":0,"view_count":13654,"score":11,"question_id":733652,"title":"select a random sample of results from an oracle query","body":"<p><a href=\"http://stackoverflow.com/questions/652064/select-random-sampling-from-sqlserver-quickly\">This question</a> asks about getting a random(ish) sample of records on sqlserver and the answer was to use \"TABLESAMPLE\", is there an equivalent in Oracle 10?</p>\n\n<p>If there isn't is there a standard way to get a random sample of results from a query set. For example to get 1000 random rows from a query that will return Millions normally.</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":118,"score":1,"question_id":4682853,"title":"Oracle query with LOWER","body":"<p>Why this returns 0 rows</p>\n\n<pre><code>SELECT GARTUSERID, USER_CODE, UNITID, RANKCODE, RANKID, FIO, LOGINNAME, \n       START_DATE, EXPIR_DATE, NOTE, POSITION, ISCHGPASSWORD, IS_EXPIRDATE,\n       IS_BLOCKED, ROW_ID\n  FROM ACONTROL.GARTUSERS\n WHERE LOWER(LOGINNAME)=LOWER(:LOGIN) AND ROW_ID=:MD5PSWD\n</code></pre>\n\n<p>and this returns 1 row (as I wanted for the first query)?</p>\n\n<pre><code>SELECT GARTUSERID, USER_CODE, UNITID, RANKCODE, RANKID, FIO, LOGINNAME,\n       START_DATE, EXPIR_DATE, NOTE, POSITION, ISCHGPASSWORD, IS_EXPIRDATE,\n       IS_BLOCKED, ROW_ID \n  FROM ACONTROL.GARTUSERS\n WHERE LOGINNAME=:LOGIN AND ROW_ID=:MD5PSWD\n</code></pre>\n"},{"tags":["sql","oracle","backup","rman"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13086853,"title":"Hot backup DB script understanding","body":"<p>I'm currently learning what hot backup is on an ORACLE guide which present a generic script for hot backup. I dont understand some point of this script :</p>\n\n<pre><code>PROMPT Path to destination directory:\nACCEPT repertory\nPROMPT Path for first file\nACCEPT file\nPROMPT Path for second file\nACCEPT spool\nSPOOL &amp;file\nPROMPT spool &amp;spool  ;;\nPROMPT archive log list ;;\n</code></pre>\n\n<p>I dont get what the first and seconde file are,and what does spool mean ? I assume this is some hot backup vocabluary however I didn't find any explanation. Any clue would be appreciated. Thanks</p>\n\n<p>EDIT: Source : <a href=\"http://oracle.developpez.com/guide/sauvegarde/generalites/#L3.2\" rel=\"nofollow\">http://oracle.developpez.com/guide/sauvegarde/generalites/#L3.2</a></p>\n"},{"tags":["oracle"],"answer_count":7,"favorite_count":4,"up_vote_count":7,"down_vote_count":0,"view_count":18602,"score":7,"question_id":1564347,"title":"Oracle - How to generate script from sql developer","body":"<p>How to take script for schema of the tables, stored procedures of Oracle through SQL Developer tool (SQLPLUS command line interface)?</p>\n"},{"tags":["oracle","workflow","content-management","webcenter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13084975,"title":"Working with WebCenter Content UCM workflow","body":"<p>Which of the Java-libraries can give me access to the management of workflows (creating, adding files to workflow).</p>\n\n<p>How is it done?</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13087386,"title":"Finding table partition details","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3306876/how-can-i-get-all-the-information-about-a-table-in-oracle\">How can I get all the information about a table in Oracle?</a>  </p>\n</blockquote>\n\n\n\n<p>I need to add partitions into existing tables, we dont have production database access and we need to send sql queries to find details regarding existing partitions, I tried </p>\n\n<pre><code>desc &lt;table-name&gt;;\n</code></pre>\n\n<p>but it gives only info regarding table structure, we need table strucuture along with partition details.</p>\n\n<p>Database is oracle 10g</p>\n\n<p>Thanks</p>\n"},{"tags":["oracle","sql-loader"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13085809,"title":"sqlldr not working with direct = true","body":"<p>I am executing a script in control file using sqlldr.\nIt works fine when I set direct=false.\nIf I set direct = true option following error occurs.\nHere is my ctl-</p>\n\n<pre><code>LOAD DATA\nCHARACTERSET UTF8\nINFILE 'D:/im.txt'\nINTO TABLE DF\nFIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\\\"'\nTRAILING NULLCOLS \n(CPID CHAR(4000), CPIDEXT CHAR(4000), CTS1 TIMESTAMP 'yyyy-MM-dd HH12:MI:SS.FF AM TZR' \"CAST(to_timestamp_TZ(:CTS1,'yyyy-MM-dd HH12:MI:SS.FF AM TZR') AS TIMESTAMP WITH LOCAL TIME ZONE)\")\n</code></pre>\n\n<p>And the error is-</p>\n\n<p>SQL*Loader-951: Error calling once/load initialization\nORA-01821: date format not recognized</p>\n"},{"tags":["sql","oracle","composite-key"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":4420,"score":3,"question_id":6602099,"title":"Oracle composite primary key / foreign key question","body":"<p>I have a composite primary key in 1 table in oracle.  I want to create a foreign key for one table entry in my second table that references the composite primary key in the first table.  I am getting the error ORA-02256.  Any thoughts on how I can enter this?</p>\n\n<pre><code>CREATE TABLE groupspersonx ( \n  personid number, \n  groupid number, \n  CONSTRAINT pk_persongroupid PRIMARY KEY(personid, groupid) \n); \n\nCREATE TABLE restrictedgroups ( \n  groupid number, \n  name varchar2(50), \n  dateadded date, \n  since date, \n  notes varchar2(1024), \n  CONSTRAINT pk_groupid PRIMARY KEY(groupid), \n  CONSTRAINT fk_persongroup FOREIGN KEY(groupid) REFERENCES groupspersonx(personid, groupid) \n); \n</code></pre>\n"},{"tags":["java","database","oracle","transactions","dblink"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1559,"score":1,"question_id":5496612,"title":"Error on Oracle while using DBLINK","body":"<p>I am Using jboss5.1.x, EJB3.0 ,JPA3.</p>\n\n<p>I am trying to do 'select' query from view which is connected via <strong>dblink</strong> to another database.</p>\n\n<p>source database is <strong>Oracle 9</strong>, destination dabatase is <strong>Oracle 8</strong>.</p>\n\n<p>I am getting this error:</p>\n\n<pre><code>15:27:06,625 WARN [JDBCExceptionReporter] SQL Error: 24777, SQLState: 99999\n\n15:27:06,625 ERROR [JDBCExceptionReporter] ORA-24777: use of non-migratable database link not allowed\n</code></pre>\n\n<p>I found solution to this error after I understood that I cant use <strong>dblink</strong> while using <strong>XA</strong>. So I managed to solved by changing the dblink script to <strong>create shared database link</strong> as follow: </p>\n\n<pre><code> CREATE SHARED DATABASE LINK CONNECT TO IDENTIFIED BY AUTHENTICATED BY IDENTIFIED BY USING \n</code></pre>\n\n<p>everything worked fine in this test environment. </p>\n\n<p>Now I've moved my application to production environment, where the source database is <strong>Oracle 11</strong> while the destination is still <strong>Oracle 8</strong>.</p>\n\n<p>The trick that I used didnt work this time and I couldnt find a solution. This is the new exception I am getting:</p>\n\n<pre><code>    Caused by: org.hibernate.exception.GenericJDBCException: could not execute query\n    at ....Caused by: java.sql.SQLException: ORA-01012: not logged on\n    ORA-02063: preceding line from TO_VANTIVE\n</code></pre>\n\n<p>Thanks for your help,</p>\n\n<p>ray,</p>\n"},{"tags":["asp.net","oracle","asp.net-membership"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":232,"score":0,"question_id":9680853,"title":"Oracle Membership Provider error - \"Your account was not created\"","body":"<p>I originally posted this directly on the Oracle forums, however, I still haven´t received an answer and it´s very important to me and my project to get it out of the way as soon as possible. If anyone here could help me, it would be greatly appreciated!</p>\n\n<p>I am having the following problem:</p>\n\n<p>In an ASP.net application, I´ve set up the Oracle Providers. I´ve already imported the Oracle.web assembly, as well as the Oracle.Dataaccess assembly.</p>\n\n<p>I´ve set up a custom Membership provider that looks as follows:</p>\n\n<pre><code>&lt;membership defaultProvider=\"MyOracleMembershipProvider\"&gt;\n&lt;providers&gt;\n&lt;add name=\"MyOracleMembershipProvider\"\ntype=\"Oracle.Web.Security.OracleMembershipProvider, Oracle.Web, Version=2.112.2.0,         Culture=neutral, PublicKeyToken=89b483f429c47342\"\nconnectionStringName=\"OraMembershipConString\"\napplicationName=\"OracleMembershipTest\"\nenablePasswordRetrieval=\"false\"\nenablePasswordReset=\"true\"\nrequiresQuestionAndAnswer=\"false\"\nrequiresUniqueEmail=\"false\"\npasswordFormat=\"Hashed\"\nmaxInvalidPasswordAttempts=\"4\"\nminRequiredPasswordLength=\"7\"\npasswordAttemptWindow=\"8\"/&gt;\n&lt;/providers&gt;\n&lt;/membership&gt;\n</code></pre>\n\n<p>the connection string looks as follows:</p>\n\n<pre><code>&lt;add name=\"OraMembershipConString\" connectionString=\"DATA SOURCE=(description=(address_list=(address=(protocol=TCP)(host=ip_address)(port=1521)))(connect_data=(service_name=rdcdb)));PASSWORD=my_password;PERSIST SECURITY INFO=False;USER ID=ASPNET_DB_USER;\" providerName=\"Oracle.DataAccess.Client\" /&gt;\n</code></pre>\n\n<p>In ASP.net configuration, I#ve already set up the custom provider in the Provider tab, for both membership and role. On the membership part it is set to \"MyOracleMembershipProvider\" as stated above. I´m able to go to the Security tab, and click on create user, but after typing in a user name, a password, and the other requirements, and click create user, I get the following:</p>\n\n<p>\"Your account was not created. Please try again.\"</p>\n\n<p>This keeps happening and happening, and I can´t seem to find the problem.</p>\n\n<p>I created the ASPNET_DB_USER account following this tutorial, granting the respective privileges:</p>\n\n<p><a href=\"http://docs.oracle.com/html/E10928_01/IntroInstallation.htm\" rel=\"nofollow\">http://docs.oracle.com/html/E10928_01/IntroInstallation.htm</a></p>\n\n<p>and ran the Oracle Provider sql scripts on said schema on the remote server.</p>\n\n<p>I´ve been at this for hours and can´t seem to be able to figure it out :S what could be wrong?</p>\n\n<p>any help would be appreciated!</p>\n"},{"tags":["asp.net-mvc","oracle","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13077810,"title":"Oracle Sequences, Entity Framework and getting nextval in an MVC3 View","body":"<p>I'm currently using Entity Framework inside an MVC3 application to connect to an Oracle Database. I want to write a new record to a table in the Oracle database which includes a sequence that defines it's primary key. Of course, the primary key is defined to be not null. All my views are written in ASP.Net instead of Razor.</p>\n\n<p>I see that most posts out there recommend setting a StoreGeneratedPattern directly on the edmx model. However, I notice that most edmx model examples like this one: <a href=\"http://stackoverflow.com/questions/7351260/oracle-entity-in-vs-entity-framework-doesnt-update-the-primary-key-in-code\">Oracle entity in VS entity framework doesnt update the primary key in code</a>  include the tables defined using EntityTypes -the table in question I want to do this on is actually encompassed in an EntitySet:</p>\n\n<pre><code>&lt;EntitySet Name=\"REGISTERED_PERSON\" EntityType=\"Model.Store.REGISTERED_PERSON\" store:Type=\"Tables\" Schema=\"MYSCHEMA\" /&gt;\n</code></pre>\n\n<p>and when I try to set StoreGeneratedPattern=Identity on this, I get an error that the StoreGeneratedPattern attribute is not allowed, presumably because it is not an EntityType. I had originally thought about just getting the max. registered_person_id from the database via LINQ statement and then assigning that into the model, but then the problem arises that you'd get a duplicate ID if two inserts were executed at the same time. </p>\n\n<p>I also checked the database and I don't have any triggers written. I know that in Oracle you can opt to select from dual to get the next value which is generated by the sequence, such as illustrated below:\n<br>select MY_SEQ.nextval,'some value' from dual</p>\n\n<p>This post here: <a href=\"http://stackoverflow.com/questions/2189114/postgresql-nextval-question-on-sequences\">postgresql nextval question on sequences</a> has a great title, but the problem with that is that I'm not working with postgresql or PHP, so unfortunately it doesn't help me. I also don't have any triggers written to fire the sequence upon insert of a record. </p>\n\n<p>How do I go about getting the nextvalue from the sequence and assign it to my Registered_Person_Id, preferably in the view before the entire model object gets passed back to the controller to insert in the database? </p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13085377,"title":"Update entire table with sequence number in oracle","body":"<p>I want to update table with sequence number, I cant create procedure or sequence object so need a update query for this. I have a table with date column, based on minimum date I need to generate a number.</p>\n\n<p>Table Data:-</p>\n\n<pre><code>Date_Value\n----------\n5th Feb 11\n2nd Jan 11\n11th Jan 11\n\nAfter Update :- \nSrNo     Date_Value\n------------------- \n1   2nd Jan 11\n2   11th Jan 11\n3   5th Feb 11\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":845,"score":2,"question_id":2071152,"title":"Create a SQL query to retrieve data from two tables","body":"<p>I have two tables :</p>\n\n<p><code>T_STOCK</code>: primary key is <code>id</code>, <code>seller</code>, and some others fields let say <code>a</code> and <code>b</code>.\n<code>T_FLOW</code>: primary key is (<code>id</code> + <code>startdate</code>), and some others fields, for example <code>c</code> and <code>d</code>.</p>\n\n<p>I want a query that returns all the columns for each records from <code>T_STOCK</code> regarding a specific <code>seller</code>, but completed with the columns (<code>startDate</code>, <code>c</code> and <code>d</code>) from the <code>T_FLOW</code> table.</p>\n\n<p>The relation between <code>T_STOCK</code> and <code>T_FLOW</code> is based on the <code>id</code> attribute.\nEverytime a record with a specific ID exists in <code>T_STOCK</code>, at least one record exist in <code>T_FLOW</code> for this ID.</p>\n\n<p>However, it may happen that more than one record exist in <code>T_FLOW</code>. In this case, I must consider only the <strong>most recent one</strong> (i.e. the one with <code>max(startDate)</code>).</p>\n\n<p>In others words, if we have the following tables content:</p>\n\n<pre><code>+---------------------+\n|       T_STOCK       |\n+----+--------+---+---+\n| ID | SELLER | a | b |\n+----+--------+---+---+\n| 01 | foobar | 1 | 2 |\n+----+--------+---+---+\n| 02 | foobar | 3 | 4 |\n+----+--------+---+---+\n| 03 | foobar | 5 | 6 |\n+----+--------+---+---+\n\n+---------------------------+\n|           T_FLOW          |\n+----+------------+----+----+\n| ID |  StartDate |  c |  d |\n+----+------------+----+----+\n| 01 | 01/01/2010 |  7 |  8 |\n+----+------------+----+----+\n| 02 | 01/01/2010 |  9 | 10 |\n+----+------------+----+----+\n| 02 | 07/01/2010 | 11 | 12 |\n+----+------------+----+----+\n| 03 | 03/01/2010 | 13 | 14 |\n+----+------------+----+----+\n| 03 | 05/01/2010 | 15 | 16 |\n+----+------------+----+----+\n</code></pre>\n\n<p>The result of the query must be :</p>\n\n<pre><code>+----+--------+---+---+------------+----+----+\n| ID | SELLER | a | b |  startDate |  c |  d |\n+----+--------+---+---+------------+----+----+\n| 01 | foobar | 1 | 2 | 01/01/2010 |  7 |  8 |\n+----+--------+---+---+------------+----+----+\n| 02 | foobar | 3 | 4 | 03/01/2010 | 11 | 12 |\n+----+--------+---+---+------------+----+----+\n| 03 | foobar | 5 | 6 | 01/01/2010 | 15 | 16 |\n+----+--------+---+---+------------+----+----+\n</code></pre>\n\n<p>How do I write my query then?</p>\n"},{"tags":["sql","oracle","select"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13085581,"title":"Oracle error \"too many values\", must be solved with nested SELECTs","body":"<p>I have hit upon a \"too many values\" error in Oracle, when working with some intricate nested SELECTs. </p>\n\n<p>A simplified description of my problem, on a toy problem describing the hierarchy in a company. There are two tables:</p>\n\n<ul>\n<li><strong>ACG_EMPLOYEES</strong>, which lists all the employees</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/XhHHS.jpg\" alt=\"enter image description here\"></p>\n\n<ul>\n<li><strong>ACG_BOSS_OF</strong>, which simply lists who (<strong>b_id</strong>) is the boss of whom (<strong>e_id</strong>)</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/L7Vm7.jpg\" alt=\"enter image description here\"></p>\n\n<p>I can do</p>\n\n<pre><code>SELECT b_id as boss,\n             LTRIM(MAX(SYS_CONNECT_BY_PATH(e_id,','))\n             KEEP (DENSE_RANK LAST ORDER BY curr),',') as minion\nFROM (SELECT b_id,\n             e_id,\n             ROW_NUMBER() OVER (PARTITION BY b_id ORDER BY e_id) AS curr,\n             ROW_NUMBER() OVER (PARTITION BY b_id ORDER BY e_id) -1 AS prev\n      FROM acg_boss_of)\nGROUP BY b_id\nCONNECT BY prev = PRIOR curr AND b_id = PRIOR b_id\nSTART WITH curr = 1\n</code></pre>\n\n<p>to get the list of \"minions\" for every employee which is not a leaf in the hierarchy:\n<img src=\"http://i.stack.imgur.com/oKSFv.jpg\" alt=\"enter image description here\"></p>\n\n<p>But let's say I also want to get other fields from the <strong>ACG_EMPLOYEES</strong> table, in this case the <strong>name</strong> for each boss:</p>\n\n<p><img src=\"http://i.stack.imgur.com/hREqM.jpg\" alt=\"enter image description here\"></p>\n\n<p>I have tried </p>\n\n<pre><code>SELECT \nemp.name, \n(SELECT b_id as boss,\n             LTRIM(MAX(SYS_CONNECT_BY_PATH(e_id,','))\n             KEEP (DENSE_RANK LAST ORDER BY curr),',') as minion\nFROM (SELECT b_id,\n             e_id,\n             ROW_NUMBER() OVER (PARTITION BY b_id ORDER BY e_id) AS curr,\n             ROW_NUMBER() OVER (PARTITION BY b_id ORDER BY e_id) -1 AS prev\n      FROM acg_boss_of)\nGROUP BY b_id\nCONNECT BY prev = PRIOR curr AND b_id = PRIOR b_id\nSTART WITH curr = 1) minion\nFROM acg_employees emp\n</code></pre>\n\n<p>but I get the \"too many values\" error I mentioned.</p>\n\n<p>I have seen some suggestions for solving this kind of issue; however, I cannot use any of them, since this statement will be used in a Product Lifecycle Management app for which this must be defined as a single SELECT, no matter how complicated (ok, I could use JOINs as well, but no stored procedures or such).</p>\n"},{"tags":["mysql","oracle","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":41,"score":3,"question_id":13080872,"title":"how to write your own timestampdiff function for oracle","body":"<p>I was trying to write the my own timestampdiff(DAY, first_date ,second_date) function which will work same as MySql tumestampdiff function.</p>\n\n<p>But i am unable to under stand what would be data type of first argument so that it can accept key work word day , month or year.</p>\n\n<p>Need expert comment as what kind of data type is this in function argument?</p>\n\n<p>Secondly where can i see the mysql inbuilt functions implementation. </p>\n\n<p>ok To add more clarity:</p>\n\n<p>I have a query <code>select * from application a where timestampdiff(DAY,a.created_date, CURRENT_TIMESTAMP(3)) &gt;= 30;</code></p>\n\n<p>i want above query should run in both oracle and mysql.</p>\n\n<p>Hope u got my point. I thought of writing same function in oracle so that i don't have to do any code change and it will be supported for both database.</p>\n\n<p>Now in above i am unable to figure if i am going to write the function the what should be first parameter type.</p>\n\n<p>Thanks</p>\n"},{"tags":["sql","oracle","crystal-reports","pivot"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":13082377,"title":"Getting the sum of columns based on row values","body":"<p>I have a table that looks like the following.</p>\n\n<pre><code>EMPNUM  EMPNAME     LOCATION    CATEGORY    COUNT\n123     JOHN DOE    BLDG A      1           5\n123     JOHN DOE    BLDG A      1           6\n123     JOHN DOE    BLDG A      2           4\n123     JOHN DOE    BLDG A      3           7\n123     JOHN DOE    BLDG B      1           1\n123     JOHN DOE    BLDG B      2           3\n234     EMILY DOE   BLDG A      1           1\n234     EMILY DOE   BLDG A      2           2\n234     EMILY DOE   BLDG A      3           4\n234     EMILY DOE   BLDG B      2           3\n234     EMILY DOE   BLDG B      2           9\n234     EMILY DOE   BLDG B      3           3\n</code></pre>\n\n<p>I would like to transport it into columns that will yield to an output similar to below. I need to get the sum of COUNT based on the values of LOCATION and CATEGORY</p>\n\n<pre><code>EMPNUM  EMPNAME     SUM_A1  SUM_A2  SUM_A3  SUM_B1  SUM_B2  SUM_B3  \n123     JOHN DOE    11      4       7       1       3       0\n234     EMILY DOE   1       2       4       0       12      3   \n</code></pre>\n\n<p>Is there any way to do this as an SQL query? or in Crystal reports (though I prefer output using SQL)</p>\n"},{"tags":["sql","oracle","plsql","report","procedure"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":134,"score":0,"question_id":12241972,"title":"How to group by specify range of years and month?","body":"<p>I have a large set of data for a range of product from two table that I want to display in a specify date range with a group by function according to the current date. Data range is:</p>\n\n<p>Lets say today's date is 03/09/2012 (DD/MM/YYYY)</p>\n\n<pre><code>--Product 1--\nEverything 5 years ago 'Before 2007'  {field1}   {field2}   {field3} \n4 years ago          '2008' \n3 years ago          '2009' \n2 years ago          '2010' \n1 year by month      'Jan 2011' \n'Feb 2011' \n'Mar 2011 \n.... \n.... \n'Dec 2011' \nSum of 1 year ago    '2011' \nThis year by month   'Jan 2012' \n'Feb 2012' \n'Mar 2012' \n.... \n....\n'Sept 2012' \nSum of this year '2012'\n</code></pre>\n\n<p>The performance of this sql is important. So far I got a sql that can be further group by year or month for each product but not in above order. Im thinking using NVL, CASE and many nested sql but anyone can think of a solution that can get a good performance?         </p>\n\n<pre><code>    SELECT EXTRACT (YEAR FROM {DATE}) \"YEAR\", EXTRACT (MONTH FROM {DATE}) \"MONTH\", SUM({field1}) as A, SUM({field 2}) as B ,COUNT(1) as {field 3}\n    FROM (\n            SELECT {Field A}, DECODE({Field Key1}, NULL, 0, 1) {field 1}, DECODE({field B}, NULL, 1, 0)  {field2}, {Field Key2}\n            FROM {table A}, (\n                    SELECT {field key2}\n                    FROM {table B}\n                    WHERE {conditions} B  \n            WHERE A.KEY= B.KEY(+)\n    )\n    where {conditions}\n    GROUP BY EXTRACT (YEAR FROM {DATE}) , EXTRACT (MONTH FROM {DATE}) \n  ) DATASET   \n</code></pre>\n"},{"tags":["sql","oracle","stored-procedures","triggers"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":63,"score":0,"question_id":13084276,"title":"SQL: implementing a stored procedure or trigger","body":"<p>I'm using Sql Developer and Oracle.</p>\n\n<p>I need to implement a system in a database so that Once a customer has had their supply cut off, the person or business responsible for\nthe bill will not be able to create a new account at a different service address until\nsuch time as their arrears have been cleared. This needs to be implemented using either a Trigger or a Stored Procedure.</p>\n\n<p>Here is what i have attempted</p>\n\n<pre><code>    create or replace PROCEDURE NONEWACCOUNT(newcustomerID in number, \n                                             newStatus in varchar)\n                                              AS\nbegin\n\n      select \n      from a2_watermeter\n      where customerid = newcustomerid and Status = newStatus;\n\n      if (newStatus = 'Inactive') then\n          DBMS_OUTPUT.put_line('Can not make new account as customer has to pay his/or account');\n      end if;\n      end;\n</code></pre>\n\n<p>Below is my database. </p>\n\n<p>But as I am completely new to sql, I have no clue what to change</p>\n\n<p>Cheers to anyone who can shed some light on this.</p>\n\n<p>My database</p>\n\n<pre><code>    a2_METERREADER\n\n - EMPLOYEEID\n - FIRSTNAME\n - LASTNAME\n\na2_READING\n\n - READINGID\n - METERID\n - EMPLOYEEID\n - BILLNUMBER\n - READING\n - DATERECORD\n\na2_Watermeter\n\n - METERID\n - ADDRESS\n - SUBURB\n - POSTCODE\n - STATUS\n - CUSTOMERID\n - REPLACE\n - INSTALLDATE\n\n a2_customer\n\n    - customerid\n    - firstname\n    - lastname\n    - address\n    - suburb\n    - postcode\n    - email\n    - phone\n    - businessname\n    - dateofbirth\n\n a2_bill\n\n    - billnumber\n    - address\n    - suburb\n    - postcode\n    - customerid\n    - readingid\n    - amount\n    - reading\n    - firstname\n    - lastname\n    - paid\n    - duedate\n</code></pre>\n"},{"tags":["oracle","service","xquery","bus"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":304,"score":2,"question_id":2469521,"title":"Testing an XQuery Transformation","body":"<p>I'm using Workshop for Weblogic and I'm testing an XQuery Transformation.\nBoth MFL and XSD are valid. But the XQuery doesn't seem to work... it gives me this error:</p>\n\n<p>Error occurred while executing XQuery: loader constraint violation: when resolving method \"javax.xml.stream.XMLInputFactory.createXMLStreamReader(Ljava/io/Reader;)Ljavax/xml/stream/XMLStreamReader;\" the class loader (instance of org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader) of the current class, weblogic/xml/query/parsers/StAXCursorAdaptor, and the class loader (instance of ) for resolved class, javax/xml/stream/XMLInputFactory, have different Class objects for the type javax/xml/stream/XMLStreamReader used in the signature</p>\n\n<p>Have you ever seen this before? How can I solve this please?</p>\n"},{"tags":["database","oracle","stored-procedures","database-link"],"answer_count":2,"favorite_count":2,"up_vote_count":12,"down_vote_count":0,"view_count":24727,"score":12,"question_id":240788,"title":"How to execute an Oracle stored procedure via a database link","body":"<p>Can I call a stored procedure in Oracle via a database link?</p>\n\n<p>The database link is functional so that syntax such as...</p>\n\n<pre><code>SELECT * FROM myTable@myRemoteDB\n</code></pre>\n\n<p>is functioning.  But is there a syntax for...</p>\n\n<pre><code>EXECUTE mySchema.myPackage.myProcedure('someParameter')@myRemoteDB\n</code></pre>\n"},{"tags":["sql","string","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13083666,"title":"How can I SELECT DISTINCT on the last, non-numerical part of a mixed alphanumeric field?","body":"<p>I have a data set that looks something like this:</p>\n\n<pre><code>A6177PE\nA85506\nA51SAIO\nA7918F\nA810004\nA11483ON\nA5579B\nA89903\nA104F\nA9982\nA8574\nA8700F\n</code></pre>\n\n<p>And I need to find all the ENDings where they are non-numeric. In this example, that means PE, AIO, F, ON, B and F.</p>\n\n<p>In pseudocode, I'm imagining I need something like </p>\n\n<pre><code>SELECT DISTINCT X FROM \n  (SELECT SUBSTR(COL,[SOME_CLEVER_LOGIC]) AS X FROM TABLE);\n</code></pre>\n\n<p>Any ideas? Can I solve this without learning regexp?</p>\n\n<p>EDIT: To clarify, my data set is a lot larger than this example. Also, I'm only interested in the part of the string AFTER the numeric part. If the string is \"A6177PE\" I want \"PE\".</p>\n"},{"tags":["sql","oracle","index","oracle11g","database-partitioning"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13083703,"title":"Does UPDATE INDEXES work for local indexes?","body":"<p>I have two tables in Oracle 11.2. First is partitioned and has local index (non-prefixed):</p>\n\n<pre><code>CREATE TABLE table1 (col1 INT, col2 INT)\nPARTITION BY LIST(col1)\n(\n    PARTITION p1 VALUES(1),\n    PARTITION p2 VALUES(2)\n);\nCREATE INDEX table1_index on table1(col2) LOCAL;\nINSERT INTO table1 VALUES(1, 1);\nINSERT INTO table1 VALUES(2, 1);\n</code></pre>\n\n<p>Second table is similar but without partitions and index:</p>\n\n<pre><code>CREATE TABLE table2(col1 INT, col2 INT);\nINSERT INTO table2 VALUES(1, 2);\n</code></pre>\n\n<p>When I exchange one of partition from <code>table1</code> with <code>table2</code> then index for this partition will be unusable. To avoid this I can use <code>UPDATE INDEXES</code>, so I do:</p>\n\n<pre><code>ALTER TABLE table1 EXCHANGE PARTITION p1\nWITH TABLE table2 WITH VALIDATION UPDATE INDEXES;\n</code></pre>\n\n<p>But <code>UPDATE INDEXES</code> seem to doesn't work, because when I check status of index for this partition it's unusable.</p>\n\n<pre><code>SELECT partition_name, status FROM user_ind_partitions\nWHERE index_name = 'TABLE1_INDEX';\n\nPARTITION_NAME                 STATUS   \n------------------------------ -------- \nP1                             UNUSABLE \nP2                             USABLE \n</code></pre>\n\n<p>For <code>GLOBAL</code> index it works as expected.</p>\n\n<p>The question is: does <code>UPDATE INDEXES</code> work for <code>LOCAL</code> indexes when using <code>EXCHANGE PARTITION</code>?</p>\n"},{"tags":["oracle","printing","sql-developer"],"answer_count":5,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":70449,"score":6,"question_id":193107,"title":"Print text in Oracle SQL Developer SQL Worksheet window","body":"<p>I am using Oracle SQL (in SQLDeveloper, using the SQL Worksheet).  I would like to print a statement before my select, such as</p>\n\n<p>PRINT 'Querying Table1';</p>\n\n<p>SELECT * from Table1;</p>\n\n<p>What do I use to Print / show text output?  It's not Print, because that gives me the error: Bind Variable \"'Table1'\" is NOT DECLARED.  DBMS_OUTPUT.PUT_LINE is an unknown command.  (Obviously, I'm an inexperienced SQLDeveloper and Oracle user.  There must be some synonym for Print, but I'm having trouble finding help on it without knowing what it is.)</p>\n"},{"tags":["sql","oracle","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13083487,"title":"select null fields in hibernate","body":"<p>I had made select query in hibernate from employees table that had following columns:</p>\n\n<pre><code>private int id;\n    private String firstname;\n    private String lastname;\n    private String email;\n    private String phoneno;\n    private Date hiredate;\n    private Jobs jobid;\n    private Integer salary;\n    private Integer commpct;\n    private Employee managerid;\n    private Departments deptid;\n</code></pre>\n\n<p>On this table, \nfirst record had managerid set to null, and afterwards every record managerid set to first record employeeid;</p>\n\n<p>when i select data from employees table using query: (\"FROM EMPLOYEES\") using following code:</p>\n\n<pre><code>Query query = session.createQuery(\"FROM Employee\");\n\n        List&lt;Employee&gt; employees = query.list();\n\n        for(Employee employee:employees){\n            System.out.println(\"ID=&gt;\"+employee.getId()+\"\\tFirstName=&gt;\"+employee.getFirstname()+\"\\tLastName=&gt;\"+employee.getLastname()\n                    +\"\\temail=&gt;\"+employee.getEmail()+\"\\tPhoneNO=&gt;\"+employee.getPhoneno()+\"\\tHireDate=&gt;\"+employee.getHiredate()\n                    +\"\\tJob=&gt;\"+employee.getJobid().getJobtitle()+\"\\tMax Salary=&gt;\"+employee.getJobid().getMaxsalary()\n                    +\"\\tPresent Salary=&gt;\"+employee.getSalary()+\"\\tCommission %=&gt;\"+employee.getCommpct()+\"\\tManager=&gt;\"+employee.getManagerid().getFirstname()+\",\"+employee.getManagerid().getLastname()\n                    +\"\\tDepartment ID=&gt;\"+employee.getDeptid().getName());\n\n        }\n</code></pre>\n\n<p>Exception throws bcoz first record managerid is null,</p>\n\n<p>Then, i used this query </p>\n\n<pre><code>Query query = session.createQuery(\"FROM Employee em WHERE em.managerid IS NOT NULL AND em.deptid IS NOT NULL\");\n</code></pre>\n\n<p>I get the record other than first record.</p>\n\n<p><strong>ID is the primarykey and managerid is the foreign key pointing to Employees Table (id) field.\nAll rows have id present but some rows/one row had managerid set to null.</strong></p>\n\n<p>My Question is how to get all the records even if first record managerid is set to null?</p>\n\n<p>What setting i had to made?</p>\n"},{"tags":["sql","oracle","date","view","count"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13082632,"title":"Ηow to count employee readings in current month","body":"<p>Im trying to work out how to make this view for my database</p>\n\n<p>The number of meters read in the current month by each of the meter\nreaders (this view should be able to be used at any time without having to\nbe changed to accommodate the date).</p>\n\n<p>The main trouble im having is counting how many times the employee has read a meter in the month. Im using oracle and sql developer</p>\n\n<p>Can anyone shed some light?</p>\n\n<p>These are my tables: </p>\n\n<pre><code>a2_METERREADER\n\n - EMPLOYEEID\n - FIRSTNAME\n - LASTNAME\n\na2_READING\n\n - READINGID\n - METERID\n - EMPLOYEEID\n - BILLNUMBER\n - READING\n - DATERECORD\n\na2_Watermeter\n\n - METERID\n - ADDRESS\n - SUBURB\n - POSTCODE\n - STATUS\n - CUSTOMERID\n - REPLACE\n - INSTALLDATE\n</code></pre>\n"},{"tags":["java","database","oracle","jdbc","oracleclient"],"answer_count":6,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":25227,"score":8,"question_id":1194990,"title":"Why do I get java.lang.AbstractMethodError when trying to load a blob in the db?","body":"<p>I've got a problem with JDBC.</p>\n\n<p>I'have the following code:</p>\n\n<pre><code>//blargeparam is a blob column.\nPreparedStatement pst =connection.prepareStatement(\"update gcp_processparams_log set blargeparam= ? where idprocessparamslog=1\");\n\npst.setBinaryStream(1,inputStream);\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.AbstractMethodError:           \noracle.jdbc.driver.T2CPreparedStatement.setBinaryStream(ILjava/io/InputStream;)V\n</code></pre>\n\n<p>My connection string is \"jdbc:oracle:oci:@.....\"  </p>\n\n<p>The oracle version is 11g.  </p>\n\n<p>From the error message it seems that something is missing but:  </p>\n\n<ul>\n<li>when I read from the same blob column\n(with blob.getBytes) everything\nworks.</li>\n<li>The dll's of the instant client are\n(correctly) in the library path.</li>\n<li><p>This is the manifest of the oracle\njdbc jar in my class path:</p>\n\n<p>Manifest-Version: 1.0<br />\nSpecification-Title:    Oracle JDBC driver classes for use with JDK14<br />\nSealed: true<br />\nCreated-By: 1.4.2_14 (Sun Microsystems Inc.)<br />\nImplementation-Title:   ojdbc14.jar<br />\nSpecification-Vendor:   Oracle Corporation<br />\nSpecification-Version:  Oracle JDBC Driver version - \"10.2.0.4.0\"<br />\nImplementation-Version: Oracle JDBC Driver version - \"10.2.0.4.0\"<br />\nImplementation-Vendor:  Oracle Corporation<br />\nImplementation-Time:    Sat Feb  2 11:40:29 2008  </p></li>\n</ul>\n"},{"tags":["oracle","full-text-search"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13075910,"title":"Oracle CATSEARCH not handling special characters","body":"<p>I've create an Oracle Text index like the following:</p>\n\n<pre><code>create index my_idx on my_table (text) indextype is \n    ctxsys.ctxcat parameters('index set my_table_iset');\n</code></pre>\n\n<p>Now when I run my query:</p>\n\n<pre><code>DECLARE\n  cnt  NUMBER;\n  attr VARCHAR2(256);\nBEGIN\n  attr := 'BECKMANNS';\n  SELECT COUNT(text)\n  INTO cnt\n  FROM my_table\n  WHERE catsearch(text, attr, '') &gt; 0 ;\n  dbms_output.put_line( '-&gt;' || cnt);\nEND;\n</code></pre>\n\n<p>This works. But when I change the value of </p>\n\n<pre><code>attr := '\"BECKMANNS\"'\n</code></pre>\n\n<p>I get a error:</p>\n\n<pre><code>ORA-29902: error in executing ODCIIndexStart() routine\nORA-20000: Oracle Text error:\nDRG-50943: query token too long on line 1 on column 1\n</code></pre>\n\n<p>I found in the Oracle documentation that I can wrap the special characters in brackets </p>\n\n<pre><code>attr := '{' || '\"BECKMANNS\"' || '}'\n</code></pre>\n\n<p>but this still gives the same error. I tried variations of this, to no avail. </p>\n\n<p>any ideas?</p>\n"},{"tags":["sql","oracle","delphi","delphi-7","ado"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":94,"score":2,"question_id":13067374,"title":"TADOQuery does not return any record","body":"<p>I am using Delphi 7 and I have a table named <code>Table_1</code> which has two fields say, <code>IMageCode Varchar(50)</code>, <code>ActImage [Blob in Oracle, VarBinary(Max) in SQL Server]</code>, it has four records inserted including images and respective image code.</p>\n\n<p>When I write a SQL as below in Oracle:</p>\n\n<pre><code>Select * from Table_1 where Upper(ImageCode) ='SUNSET'\n</code></pre>\n\n<p>TADOQuery doesn't return any record, when I check <code>TADOQuery.RecordCount</code> it shows <code>0</code>, when I try to see <code>TADOQuery.IsEmpty</code> it says <code>True</code>. Then same query when I execute in the Oracle editor it returns one record as expected, but in delphi the TADOQuery doen't return any record.</p>\n\n<p>But when I write following simple sql for the oracle database, it returns all four records using TADOQuery:</p>\n\n<pre><code>Select * from Table_1\n</code></pre>\n\n<p>I don't find any issue in SQL server database, as discussed above using TADOQuery.</p>\n\n<pre><code>ADOConnection.Connected := False; \nADOConnection.LoginPrompt := False; \nADOConnection.ConnectionString := &lt;Connection String&gt;; \nADOConnection.Connected := True; \nADOQuery1.Connection := ADOConnection; \nwith ADOQuery1 do begin \n  Active := False; \n  SQL.Clear; \n  //SqL.Add('Select * from Table_1 where Upper(ImageCode) = ' +    QuotedStr(Uppercase(Trim(edtImageCode.Text)))); \n  SqL.Add('Select * from Table_1 where Upper(ImageCode) = ''SUNSET'''); \n  Active := True; \nend; \n</code></pre>\n\n<p>Could anybody put focus what could be the issue?</p>\n"},{"tags":["performance","oracle","oracle11gr2","impdp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13078530,"title":"How can I identify and fix bottlenecks in an Oracle11gR2 import","body":"<p>I've recently been tasked with moving our Oracle 11g database from a linux CentOS desktop to a windows 2008 server. Given I've not done much behind the scenes stuff with oracle before I'm a bit out of my depth.</p>\n\n<p>I did a full expdp from the source server and imported it to the target server (i built tablespaces before the load but nothing else).</p>\n\n<p>Everything went well enough (a few errors that were related to having a different global_name which, from documentation, appeared ignorable.</p>\n\n<p>The problem I am having is that the new server appears to take longer to run queries compared to the old server. This is in spite of more cores and more RAM. I think the problem is due to I/O limitations as the old server ran on an SSD.</p>\n\n<p>I get the same 'explain plans' on queries yet getting through the blocks on v$sql_longops just seems to take longer... Can anyone provide details on what steps to take to check and compare output so I can try to ascertain the underlying issue?</p>\n"}]}
{"total":22203,"page":7,"pagesize":100,"questions":[{"tags":["java","oracle","websphere","blob","sqlexception"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":278,"score":0,"question_id":7285761,"title":"BLOB.createTemporary() Invalid argument(s) exception","body":"<p>Here I come with another question that will probably not be answered because it's a wierd problem!!! We are using Rational Software Development Platform V6 with WebSphere V5.1 to run our application. We work with a CVS to share the sources. The application generates a PDF report and ZIPs it, then it puts it in the data base (Oracle 9i) in a BLOB field. Up until now, everything works fine. With RAD, we use the ojdbc14.jar to connect the data base (we've been using it since forever...). So, that being said, when we run the application locally, the following line raises an exception:</p>\n\n<pre><code>tempBlob = BLOB.createTemporary(cnn, true, BLOB.DURATION_SESSION);\n</code></pre>\n\n<p>The exception is an SQLException saying invalid argument(s) in call. Looking at this, I don't see which argument might be wrong, since the data base access is centralized and the object cnn is OracleConnection type, that is retreive with the same function we use all over the application. SO, I tryied using ByteInputStream to set the parameter of the prepared statement using setByteStream. The value of my byte array is ok, it contains something like 2 MO. When I execute the query, it says 1 row update. There is a field in the data base call finished_time that is successfully updated and the other field, the report field, is null....</p>\n\n<p>If I go back to the createTemportary function, we worked 3 developers for a day to trouble shoot the problem, an we found nothing wrong... So, I decided to migrate the code on the DEV server. I commit the changes, create a totally new workspace, checked out and run an Ant build, that builds, sent through FTP the WAR and deploys it on the WebSphere server. Then I try the report generation and the DB is successfully update. The function createTemporary doen't raise any exception, but locally. The problem is, no one of us can do that locally!?! How comes? Any hint?</p>\n"},{"tags":["performance","oracle","hibernate","index","order"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":453,"score":2,"question_id":8729760,"title":"Query from Hibernate App does not use DB indexes","body":"<p>I try to solve a performance issue of my application. The query hibernate generates, is of the form:</p>\n\n<pre><code>select * \nfrom ( \n    select this.a, this.b, this.state, this.id \n    from view_user this \n    where this.state=:1 order by this.a asc, this.b\n) \nwhere rownum &lt;= :2\n</code></pre>\n\n<p>where</p>\n\n<ul>\n<li>id is the primary key</li>\n<li>there is a combined, unique index on (a, b, id).</li>\n<li>view_user has ~ 2 million entries</li>\n<li>view_user performs some further joins to other tables</li>\n</ul>\n\n<p><strong>Issue</strong></p>\n\n<p>The above query performs\n - fast from SQLDeveloper\n - fast from a small Java app with hibernate\n - extremely slow (>100x slower) from the application with hibernate\n - values for the bind variables are 2 respectively 30 (rownum origins from paging)\n - the hibernate query is \"of the form\" above. There are actually about 20 columns in the view.</p>\n\n<p><strong>Current state of analysis</strong></p>\n\n<ul>\n<li>query plan shows that index is used when query comes from SQlDeveloper or \"small java app\".</li>\n<li>query plan shows that full table scans are performed if query comes from hibernate app</li>\n<li>DB tracing shows only two differences: NLS settings (from SQLDeveloper) and slightly different formatting (whitespaces). Everything else seems to be the same...</li>\n</ul>\n\n<p><strong>Versions</strong></p>\n\n<ul>\n<li>hibernate: 2.1.8</li>\n<li>jdbc driver: used ojdbc14, 5 and 6. Makes no difference</li>\n<li>Oracle: 10.2 and 11. Makes no difference</li>\n</ul>\n\n<p>=> I'm glad about every hint somebody might have concerning this issue. What troubles me is the fact that the DB tracing did not show any differences... Yes, it looks like it is something about hibernate. But what? How to detect?</p>\n\n<hr>\n\n<p>For the sake of completeness, here the hibernate query (from the log):</p>\n\n<pre><code>Select * from ( \n    select this.USER_ID as USER_ID0_, this.CLIENT_ID as CLIENT_ID0_, \n    this.USER_NAME as USER_NAME0_, this.USER_FIRST_NAME as USER_FIR5_0_, this.USER_REMARKS as \n    USER_REM6_0_, this.USER_LOGIN_ID as USER_LOG7_0_, this.USER_TITLE as USER_TITLE0_, \n    this.user_language_code as user_lan9_0_, this.USER_SEX as USER_SEX0_, \n    this.USER_BIRTH_DATE as USER_BI11_0_, this.USER_TELEPHONE as USER_TE12_0_, \n    this.USER_TELEFAX as USER_TE13_0_, this.USER_MOBILE as USER_MO14_0_, \n    this.USER_EMAIL as USER_EMAIL0_, this.USER_ADDRESSLINE1 as USER_AD16_0_, \n    this.USER_ADDRESSLINE2 as USER_AD17_0_, this.USER_POSTALCODE as USER_PO18_0_, \n    this.USER_CITY as USER_CITY0_, this.USER_COUNTRY_CD as USER_CO20_0_, \n    this.USER_COUNTRY_NAME as USER_CO21_0_, this.USER_STATE_ID as USER_ST24_0_, \n    this.USER_STATE as USER_STATE0_, this.USER_TEMP_COLL_ID as USER_TE26_0_, \n    this.USER_TEMP_COLL_NAME as USER_TE27_0_, this.UNIT_ID as UNIT_ID0_, \n    this.CLIENT_NAME as CLIENT_38_0_, this.PROFILE_EXTID as PROFILE39_0_\n    from VIEW_USER this\n    where this.USER_STATE_ID=:1 order by this.USER_NAME asc, this.USER_FIRST_NAME asc\n) \nwhere rownum &lt;= :2\n</code></pre>\n\n<p>Unique index is over user_name, user_first_name, user_id.</p>\n"},{"tags":["java","sql","oracle","jdbc","resultset"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":2230,"score":4,"question_id":7224024,"title":"JDBC ResultSet get columns with table alias","body":"<p>Imagine I have a query like </p>\n\n<pre><code>SELECT * from table1 a, table2 b where (WHATEVER)\n</code></pre>\n\n<p>Maybe both tables have the same column name. So I though it would be nice to access the data via</p>\n\n<pre><code>resultSet.getString(\"a.columnName\");\nresultSet.getString(\"b.columnName\");\n</code></pre>\n\n<p>But this backfires on me and I get nothing. I read the API, but they don't really talk about this case. Is such a feature vendor dependant?</p>\n"},{"tags":["oracle","collections","adt","user-defined-types","self-reference"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":13036538,"title":"Oracle User Defined Objects - collection of self referencing type","body":"<p>I have a scenario in which I have to create a user defined type A which has a collection of type A.\nI tried doing the following but did not help:</p>\n\n<pre><code>create or replace type sku_t;\n\ncreate or replace type skulink_t as table of sku_t;\n\ncreate or replace type sku_t as object(skuId varchar(12), display_name varchar(100), bundlnks ref skulink_t ); \n</code></pre>\n\n<p>This leaves objects sku_t and skulink_t in an incomplete state and the compiler complains to complete them.  I am not sure how to go about this. Any help will be much appreciated.</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":6,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":6143770,"title":"Is it possible to return a row from a table as DML (insert, update) in Oracle?","body":"<p>I am trying to generate an insert statement from a row in a table?</p>\n\n<p>if the row is [1 , \"myfirstname\", \"mylastname\"] is there a way of getting a query like:</p>\n\n<p>\"insert into table sometable (uid, FirstName, LastName) values (1 , \"myfirstname\",\n\"mylastname\")</p>\n\n<p>...without using dynamic sql?</p>\n\n<p>Thanks</p>\n\n<p>EDIT:</p>\n\n<p>admittedly, i am lazy about this and was trying not to use dynamic sql / all_tab_columns.\nI was hoping for some magical function call that returns a DML statement for a row just as there is a way to get a DDL expression for an object:</p>\n\n<p>select dbms_metadata.get_ddl('TABLE','TABLENAME') from dual ... but DML for a row ... it's too much to ask i think.</p>\n"},{"tags":["oracle","import","oracle10g","oracle-apex"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":55,"score":0,"question_id":12630526,"title":"Oracle Import Issue","body":"<p>Could someone please help me with this oracle import error?</p>\n\n<p>I have paste the session transcript in <a href=\"http://dpaste.com/807025/\" rel=\"nofollow\">http://dpaste.com/807025/</a></p>\n\n<p>If you look at my first attempt, there is no error as such but nothing get imported.</p>\n\n<p>If you look at my first attempt, I had to specify the name of the table and then i get the error.</p>\n\n<p>Question : </p>\n\n<ol>\n<li><p>Is it mandatory to specify the tables to import? Shouldn't the export utility just import all the tables that are present in the dump file?</p></li>\n<li><p>How can i solve the error in import? I have 6.75 GB Disk space free but still get this error.</p></li>\n</ol>\n\n<p>Please guide.</p>\n"},{"tags":["java","oracle","stored-procedures","jdbc","spring-jdbc"],"answer_count":2,"favorite_count":4,"up_vote_count":7,"down_vote_count":0,"view_count":7059,"score":7,"question_id":2154386,"title":"Spring's Stored Procedure - results coming back from procedure always empty","body":"<p>I am using Spring's JdbcTemplate and StoredProcedure classes.  I am having trouble getting the stored procedure class to work for me.</p>\n\n<p>I have a stored procedure on an oracle database.  Its signature is </p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE PRC_GET_USERS_BY_SECTION\n(user_cursor OUT Pkg_Types.cursor_type\n , section_option_in IN Varchar2\n , section_in IN Varchar2) AS ....\n</code></pre>\n\n<p>where </p>\n\n<pre><code>TYPE cursor_type IS REF CURSOR;\n</code></pre>\n\n<p>I have create the following stored procedure class to get information from the oracle procedure</p>\n\n<pre><code>    private class MyStoredProcedure extends StoredProcedure \n{\n    public MyStoredProcedure(JdbcTemplate argJdbcTemplate) \n    {\n        super(argJdbcTemplate, \"PRC_GET_USERS_BY_SECTION\");\n        declareParameter(new SqlOutParameter(\"output\", OracleTypes.CURSOR));\n        declareParameter(new SqlParameter(\"input1\", Types.VARCHAR));\n        declareParameter(new SqlParameter(\"input2\", Types.VARCHAR));\n        compile();          \n    }\n\n\n    public Map&lt;String, Object&gt; execute() {\n\n        Map&lt;String, Object&gt; inParams = new HashMap&lt;String, Object&gt;();\n        inParams.put(\"input1\", \"BG\");\n        inParams.put(\"input2\", \"FE\");\n        Map output = execute(inParams);\n        return output;\n    }\n}\n</code></pre>\n\n<p>I am calling this in a method in one of my DAO classes</p>\n\n<pre><code>    public List&lt;String&gt; getUserListFromProcedure() throws BatchManagerException\n{\n    MyStoredProcedure sp = new MyStoredProcedure( this.jdbcTemplate );\n    Map&lt;String, Object&gt; result = new HashMap&lt;String, Object&gt;();\n    try\n    {\n        result = sp.execute();\n    }\n\n    catch( DataAccessException dae) \n    {\n\n    }\n    System.out.println(result.size());\n    return null;\n}\n</code></pre>\n\n<p>However the size of the map is always 0, so nothing comes back.  I know that there are rows on the database which match my input criteria.  Also I had code working which used <code>java.sql.CallableStatement</code> to interact with the oracle stored proc - so the proc is good.  Is it wrong to mix <code>OraceleTypes.CURSOR</code> with Spring's Stored Procedure?  What else can I use?  I also tried <code>SqlReturnResultSet</code> and that didn't work either.</p>\n"},{"tags":["java","oracle","date"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":73,"score":0,"question_id":13080818,"title":"How to insert custom date time in oracle using java?","body":"<p>Hi i have a column (type date).I want to insert custom date and time without using <strong>Preparedstatement</strong> .i have used </p>\n\n<pre><code>String date = sf.format(Calendar.getInstance().getTime());\nString query = \"Insert into entryTbl(name, joinedDate, ..etc)  values (\"abc\", to_date(date, 'yyyy/mm/dd HH:mm:ss'))\";\nstatement.executeUpdate(query);\n</code></pre>\n\n<p>but am getting <strong>literal doesnot match</strong> error. so even tried with <strong>\"SYSDATE\"</strong>.Its inserting only date not time.So how to insert the datetime using java into oracle?please any one help..</p>\n"},{"tags":["database","oracle","listener"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3307,"score":1,"question_id":2736377,"title":"Oracle TNS problems?","body":"<p>I have an error ? My pl/Sql Developer says my oracle database cannot find the service descriptor But when I Do a check the listener I get this error.</p>\n\n<pre><code>LSNRCTL&gt; start\nStarting tnslsnr: please wait...\n\nService OracleOraDb10g_home1TNSListener already running.\nTNS-12560: TNS:protocol adapter error\n TNS-00530: Protocol adapter error\n\n\n\nLSNRCTL&gt; status\nConnecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP\nTNS-12541: TNS:no listener\n TNS-12560: TNS:protocol adapter error\n  TNS-00511: No listener\n   32-bit Windows Error: 61: Unknown error\n</code></pre>\n\n<p>the content of my listener.ora is </p>\n\n<pre><code>SID_LIST_LISTENER =\n  (SID_LIST =\n    (SID_DESC =\n      (GLOBAL_DBNAME = Oracle10g)\n      (ORACLE_HOME = D:\\oracle\\product\\10.2.0\\db_1)\n      (SID_NAME = ORCL)\n    )\n  )\n\nLISTENER =\n  (DESCRIPTION =\n    (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))\n  )\n</code></pre>\n\n<p>and \nthe tnsnames.ora content is this</p>\n\n<pre><code># tnsnames.ora Network Configuration File: D:\\oracle\\product\\10.2.0\\db_1\\NETWORK\\ADMIN\\tnsnames.ora\n# Generated by Oracle configuration tools.\n\nVMOBILE =\n  (DESCRIPTION =\n    (ADDRESS_LIST =\n      (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))\n    )\n    (CONNECT_DATA =\n      (SERVICE_NAME = orcl)\n    )\n  )\n\nVMOBILEMASTER =\n  (DESCRIPTION =\n    (ADDRESS_LIST =\n      (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))\n    )\n    (CONNECT_DATA =\n      (SERVICE_NAME = ORCL)\n    )\n  )\n\nORCL =\n  (DESCRIPTION =\n    (ADDRESS_LIST =\n      (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))\n    )\n    (CONNECT_DATA =\n      (SERVER = SHARED)\n      (SERVICE_NAME = ORCL)\n    )\n  )\n\nEXTPROC_CONNECTION_DATA =\n  (DESCRIPTION =\n    (ADDRESS_LIST =\n      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))\n    )\n    (CONNECT_DATA =\n      (SID = PLSExtProc)\n      (PRESENTATION = RO)\n    )\n  )\n</code></pre>\n\n<p>Please I have a deadline for these evening. Please help.</p>\n"},{"tags":["sql","oracle","select"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":912,"score":2,"question_id":8791322,"title":"Oracle SQL: getting only one max row using multiple criteria","body":"<p>I have this table:</p>\n\n<pre><code>Department   NAME   EMAIL         ID     DATE1         DATE2\n1            John   asd@asd.com   74     05/04/2007    05/04/2007\n1            Sam    asd@asd.com   23     05/04/2007    05/04/2007\n1            Tom    asd@asd.com   46     05/04/2007    03/04/2007\n1            Bob    bob@asd.com   23     01/01/2006\n2            Tom    asd@asd.com   62     02/02/2000    05/05/1997\n</code></pre>\n\n<p>I want to get the row (only one per department) with max <code>DATE1</code>, but it's not unique! So if there is multiple results I want to get the max <code>DATE2</code>, and if there are multiple ones then the one with the biggest ID is returned.</p>\n\n<p>So there result of the query would be:</p>\n\n<pre><code>1            John   asd@asd.com   74     05/04/2007    05/04/2007\n2            Tom    asd@asd.com   62     02/02/2000    05/05/1997\n</code></pre>\n\n<p>Thank you very much.</p>\n"},{"tags":["java","sql","database","oracle","query"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":73,"score":2,"question_id":13078116,"title":"Best Practice - Building a query based on user selections","body":"<p>I am creating a small web based tool that allows users to query a large lookup table in various ways. Since its a small tool, I'm using JSP/Servlets. </p>\n\n<p>The lookup table has a definition something like this:</p>\n\n<p>column1 | column2 | column3 | date | user | count</p>\n\n<p>The user can query by column values or a range. Also, the results can be sorted by a specific column. Because the table has several hundred thousand of records, and growing rapidly, I'm using Oracle's ROWNUM and only returning a small subset of results.</p>\n\n<p>I have a form page that gets the search criteria from the user. I generate my query based on a series of conditions, for example:</p>\n\n<pre><code>query = \"SELECT * FROM mytable WHERE 1=1 \"\nif(searchCriteria1 != \"\")\n    query += \"AND column1='searchCriteria1' \"\nif(searchCriteria2 != \"\")\n    query += \"AND column2='searchCriteria2' \"\nif(searchCriteria2 != \"\")\n    query += \"AND column2='searchCriteria2' \"\nif(searchCriteria3 != \"\")\n    query += \"AND column3='searchCriteria3' \"\nif((searchCriteria4 != \"\") &amp;&amp; (searchCriteria5 != \"\"))\n    query += \"AND date&gt;='searchCriteria4' AND date&lt;='searchCriteria5' \"\netc...\n</code></pre>\n\n<p>(This is just simplified pseudo code)</p>\n\n<p>The sorting is handled after the first results page is displayed. The user clicks on the column header of that page to sort by that column. This would be doing a post back and querying the database. Basically, I run the same code above but with this at the end:</p>\n\n<pre><code>if(sortColumn1)\n    query += \"ORDER BY column1\"\nif(sortColumn2)\n    query += \"ORDER BY column2\"\nif(sortColumn3)\n    query += \"ORDER BY column3\"\n</code></pre>\n\n<p>So, as you might imagine, my query building code is very long with all these different conditions. Any suggestions on a better way to do this?</p>\n"},{"tags":["java","oracle","hibernate","database-schema","hbm2ddl"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13077784,"title":"DB (oracle) column description using hibernate / data dictionary","body":"<p>we use Hibernate for creating the DB schema and as ORM. We like to have the persistent layer exchangable between Postgres, Oracle and HSQLDB.</p>\n\n<p>Since there is also a DB team for Oracle, there are many times questions like \"What does this column mean?\" and the answer is in the Java class as JavaDoc. So what I am looking for is a possibility to add description to columns by using the text at the class property (best would be the java doc). However, google didn't find anything helpful except of this:</p>\n\n<p><a href=\"https://hibernate.onjira.com/browse/HHH-4369\" rel=\"nofollow\">https://hibernate.onjira.com/browse/HHH-4369</a></p>\n\n<p>I doubt, that this request will be implemented.</p>\n\n<p>One idea might be to write my own annotation @ColumnDesc(\"my description\") and write a lib, that scans class for this annotation and generate extra DDL (alter table) script for the column description and execute this script. This seems little bit complicated, since I need to get the table and column name.</p>\n\n<p>So my question is:</p>\n\n<p>Is there a workaround or other easy way to create column descriptions in the DB (oracle) when creating the DB with Hibernate Tools (hbm2ddl)?</p>\n\n<p>Alternative: Is there an easy way to generate a data dictionary for the tables and columns generated by hibernate? (Please don't say JavaDoc, DBAs can't read JavaDocs)</p>\n\n<p>We use the annotation hibernate defintion (no XML).</p>\n\n<p>Thanks for any hint!</p>\n\n<p>Regards,</p>\n\n<p>Andreas</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13077540,"title":"conditional field selection oracle","body":"<p>I know I can do this in my programming language, but I want to try to do it inside the SQL so that I dont have to disturb any frontend code. </p>\n\n<p>I have a table with three name fields - name1, name2, name3.</p>\n\n<p>There might be values in any or all of these fields in random.</p>\n\n<p>I want a query which will return three fields such that,</p>\n\n<p>It will check name1,name2,name3 - which ever first field has value goes into first_name,\nwhich ever second field has value goes into second_name, and then third_field.</p>\n\n<p>I can easily write a CASE-END statement for populating first_name, but when I get to writing the logic for second_name its getting more complicated. </p>\n\n<p>The SQL:</p>\n\n<pre><code>SELECT \n  CASE\n    WHEN NAME1 IS NOT NULL\n    THEN NAME1\n    ELSE\n      CASE\n        WHEN NAME2 IS NOT NULL\n        THEN NAME2\n        ELSE\n          CASE\n            WHEN NAME3 IS NOT NULL\n            THEN NAME1\n            ELSE ''\n          END\n      END\n  END FIRST_NAME\n  FROM TABLE_NAME\n</code></pre>\n\n<p>Now, how do I handle second_name and third_name? Or is their an easier way?</p>\n\n<p>Any help is appreciated..</p>\n"},{"tags":["vb.net","oracle","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13067511,"title":"How to get the Trigger value By method SaveChange In VB MVC?","body":"<p>I used SaveChange Function to save my data and Trigger In Oracle to create a new ID of data when i insert and how can i get this ID from Trigger in MVC3 ? Thx so much</p>\n"},{"tags":["sql","database","oracle","query"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":13068753,"title":"Alternatives to using SQL IN in this query","body":"<p>I have a string holding comma separated values = value1, value2, value3 .......</p>\n\n<p>I want to perform following operation:</p>\n\n<pre><code>SELECT col FROM table WHERE col IN :values\n</code></pre>\n\n<p>This works fine if values have less than 1000 entries. It gives error when values have more than 1000 entries. There is a limit on usage of IN.</p>\n\n<p>Is there any alternative way to perform this query? </p>\n\n<p>EDIT: \nIt is Oracle's Business Intelligence Publisher application. Customer/User can use any database underneath.</p>\n\n<p>I do not have control over database. So I cannot create a temp table or stored procedure. All I can do is select multiple values from UI screen (it forms comma separated string) and use it in a SQL query. Depending on which reports are generated.</p>\n\n<ul>\n<li>Cannot use EXISTS with static string values.</li>\n<li>Cannot use stored procedure or temp table.</li>\n</ul>\n"},{"tags":["oracle","visual-studio-2008","reporting-services"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":235,"score":4,"question_id":10804429,"title":"VS2008 SSRS using to query Oracle: How do I stop {oj} for outer Joins?","body":"<p>I am using VS2008 SSRS to query and report a Oracle Database. \nWhenever I the query Designer to add an outer join it adds {oj} \ne.g.</p>\n\n<p>OJ Added</p>\n\n<pre><code>SELECT A.*,B.*\nFROM {oj A LEFT OUTER JOIN B On A.id = B.id}\n</code></pre>\n\n<p>OJ Not added(How I want it)</p>\n\n<pre><code>SELECT A.*,B.*\nFROM A LEFT OUTER JOIN B On A.id = B.id\n</code></pre>\n\n<p>The only way I can get the query to run is to \"Edit as Text...\" and remove the {oj...}</p>\n\n<p>Is there any way of stopping Visual Studio 2008 from adding the {oj} when I want an outer join, without having to \"Edit as Text\"</p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13075538,"title":"pl sql %NOTFOUND","body":"<p>Im just wondering why this piece of code is not working..I dont have any supplier id=1 in my table..</p>\n\n<pre><code>DECLARE\n    VAR SUPP_NM VARCHAR(100);\n    VAR_SUPP_ID  NUMBER := 1;\n    WHILE_VAR CHAR := 'Y';\nBEGIN\n\n        SELECT SUPP_NM\n        INTO VAR_SUPP_NM\n        FROM TEST.SUPPLIER\n        WHERE SUPP_ID = VAR_SUPP_ID;\n\n        IF SQL%NOTFOUND THEN\n                DBMS_OUTPUT.PUT_LINE('SQL DATA NOT FOUND');\n        ELSIF SQL%FOUND THEN\n                DBMS_OUTPUT.PUT_LINE('DATA FOUND');\n        END IF;\n\n\nEND\n;\n/\n</code></pre>\n"},{"tags":["java","oracle","internet-explorer-9","oracleforms","jinitiator"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":690,"score":2,"question_id":11782697,"title":"Oracle forms in web windows 7 jinitiator not working for IE9","body":"<p>I was using oracle forms in WEB Windows XP with IE6 it was working well with J initiator. Now I switched to Windows 7 with IE9 I installed Jinitator but, IE is crashing.\nAny solution ?</p>\n"},{"tags":["oracle","db2","package","sql-pl"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":11902629,"title":"Packages in DB2","body":"<p>I'm wondering if there is a package construct in DB2 like in Oracle.</p>\n\n<p>For DB2 I found <a href=\"http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.apdv.plsql.doc%2Fdoc%2Fc0053914.html\" rel=\"nofollow\">stored procedures and functions</a>.</p>\n\n<p>In Oracle one could group several stored procedures and functions together in a package. Is there something similar in DB2? I know one can enable some Oracle compatibility, however we should be using IBM stuff here.</p>\n\n<p>I found an older article on <a href=\"http://www.ibm.com/developerworks/data/library/techarticle/dm-0606chun/index.html\" rel=\"nofollow\">DB2 packages</a> however this seems to relate to a totally different concept. It seems to be more about integrating third party libraries and doing the coding outside of the database with different programming languages.</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13073774,"title":"Updating records in a specific order","body":"<p>I am trying to update all records in my table. As I read through the records I need to update a column in the current record with a value from the NEXT record in the set. The catch is the updates need to be done in a specified order.</p>\n\n<p>I was thinking of something like this ...</p>\n\n<pre><code>Update t1\nSet col1 = (select LEAD(col2,1) OVER (ORDER BY col3, col4, col5)\n            from t1);\n</code></pre>\n\n<p>This doesn't compile but you see what I'm driving at ... any ideas ?</p>\n\n<p>... update</p>\n\n<p>This peice does run successfully but writes only NULLS</p>\n\n<pre><code>Update t1 A\nSet t1.col1 = (select LEAD(col2,1) OVER (ORDER BY col3, col4, col5)\n           from t1 B\n           where A.col3 = B.col3 AND\n                 A.col4 = B.col4 AND\n                 A.col5 = B.col5);\n</code></pre>\n"},{"tags":["oracle","pivot"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13074319,"title":"Dynamically pivoting a table Oracle","body":"<p>I have a table that looks like this:</p>\n\n<pre><code>C_ID   P_ID   KEY    VALUE\nnull   null   KEY1   VALUE1\nnull   null   KEY2   VALUE2\nnull   null   KEY3   VALUE3\n2       2     KEY4   VALUE4\n2       3     KEY5   VALUE5\n</code></pre>\n\n<p>I want to get this result table/view:</p>\n\n<pre><code>C_ID   P_ID   KEY1    KEY2    KEY3      KEY4    KEY5\nNULL   NULL  VALUE1  VALUE2  VALUE3     NULL    NULL\n2       2     NULL    NULL    NULL     VALUE4   NULL\n2       3     NULL    NULL    NULL      NULL   VALUE5\n</code></pre>\n\n<p>Has anybody an Idea how I could achieve this?\nI have tried it with:</p>\n\n<pre><code>select * from (select c_id, p_id, r_key, r_value from s_projectroles) pivot (max(r_value) for r_key in (any));\n</code></pre>\n\n<p>I got an error:</p>\n\n<pre><code>ORA-00936: Ausdruck fehlt\n00936. 00000 -  \"missing expression\"\n</code></pre>\n"},{"tags":["java","oracle","jdbc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":101,"score":-2,"question_id":13073723,"title":"jdbc thin oracle connection error","body":"<p>recently i change ojdbc jar from 10.1.0.5 to 10.2.0.4, however i am getting following error</p>\n\n<pre><code>Caused by: java.sql.SQLException: ORA-01017: invalid username/password; logon denied\nat oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)\nat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:331)\nat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:283)\nat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:278)\nat oracle.jdbc.driver.T4CTTIoauthenticate.receiveOauth(T4CTTIoauthenticate.java:791)\nat oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:362)\nat oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:441)\nat oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:165)\nat oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)\nat oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:801)\nat oracle.jdbc.pool.OracleDataSource.getPhysicalConnection(OracleDataSource.java:297)\nat oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:221)\nat oracle.jdbc.pool.OracleConnectionPoolDataSource.getPhysicalConnection(OracleConnectionPoolDataSource.java:157)\nat oracle.jdbc.pool.OracleConnectionPoolDataSource.getPooledConnection(OracleConnectionPoolDataSource.java:94)\nat oracle.jdbc.pool.OracleImplicitConnectionCache.makeCacheConnection(OracleImplicitConnectionCache.java:1572)\nat oracle.jdbc.pool.OracleImplicitConnectionCache.makeOneConnection(OracleImplicitConnectionCache.java:495)\nat oracle.jdbc.pool.OracleImplicitConnectionCache.defaultUserPrePopulateCache(OracleImplicitConnectionCache.java:215)\nat oracle.jdbc.pool.OracleImplicitConnectionCache.&lt;init&gt;(OracleImplicitConnectionCache.java:191)\nat oracle.jdbc.pool.OracleConnectionCacheManager.createCache(OracleConnectionCacheManager.java:270)\nat oracle.jdbc.pool.OracleDataSource.cacheInitialize(OracleDataSource.java:425)\nat oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:402)\nat oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:189)\nat oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:165)\n</code></pre>\n\n<p>Please advise if I need to do any settings on my eclipse</p>\n"},{"tags":["forms","oracle","editor","frite"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13068433,"title":"Hide Frite's icons","body":"<p>I want to know how I can hide some icons in the toolbar in <a href=\"http://www.degenio.com/frite/\" rel=\"nofollow\">frite</a>, the rich text editor. Is there a property which can be set for a certain icon (or maybe the whole toolbar) to make it visible at one time, and invisible at another?</p>\n"},{"tags":["oracle","object","user-defined-types"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13071870,"title":"Let object id within second table be unique","body":"<p>I got the following sql:</p>\n\n<pre><code>create or replace type MEDIUM_TYPE AS OBJECT\n(\nme_movie REF MOVIE_TYPE,\nme_rating varchar2(2),\nme_runtime number(3,0),\nme_release_year number(4,0),\nme_list_price number(3,2),\nme_our_price number(3,2),\nme_availability varchar2(128),\nme_aspect_ratio varchar2(8),\nme_encoding number (1,0),\nme_subtitle_language SUBTITLE_LANGUAGE_TYPE,\nme_number_of_discs number (1,0)\n)not final\n/\ncreate table DVD of MEDIUM_TYPE\nobject id system generated \n/\n</code></pre>\n\n<p>How can i make sure that me_movie in the dvd table is unique?</p>\n\n<p>And also, how can i do something like this?</p>\n\n<pre><code>mo_release_year number(4,0) BETWEEN 1900 AND 2100,\n</code></pre>\n"},{"tags":["oracle","odp.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13072277,"title":"ODP.NET TNS: could not resolve error","body":"<p>Win 7 64-bit SP 1</p>\n\n<p>Getting error \"ORA-12154: TNS:could not resolve the connect identifier specified\" from .NET program.</p>\n\n<p>I've installed Oracle 11.2 32-bit client on my machine. </p>\n\n<p>Using Visual Studio 2010 I include the reference from C:\\oracle\\Ora112\\odp.net\\bin\\4\\Oracle.DataAccess.dll.</p>\n\n<p>Using connection string value of: User Id=myid;Password=mypw;Data Source=DBNAME;pooling=false;Connection Timeout=45;</p>\n\n<p>Running TNSPING DBNAME works. It says it's using C:\\oracle\\Ora112\\network\\ADMIN\\sqlnet.ora. This file is set to use ldap instead of tnsnames.</p>\n\n<p>Running sqlplus works. I am able to connect using myid/dbinstance</p>\n\n<p>I can't think of any reason why ODP.NET is giving this error when all these other things are working. Any ideas?</p>\n"},{"tags":["oracle","business-intelligence","obiee"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":412,"score":2,"question_id":299760,"title":"How can I integrate Oracle BI into an existing application?","body":"<p>I have an existing application written in Perl. Now I need to integrate this application with OBI. The plan is having a button the user can click on to open OBI in an <em>iframe</em>. OBI resides on a different server from the running application.</p>\n\n<p>Has anyone done this before, know what is the best practice for doing this, and what is the effort of doing this? <br>\nAnother question is is it possible to add customizations to the OBI displayed in the <em>iframe</em>.?</p>\n"},{"tags":["oracle","plsql","oracle10g","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":60,"score":-1,"question_id":13071982,"title":"SQL*Plus load csv file into script","body":"<p>I want to load into PLSQL variable or DEFINED variable of SQL*Plus a csv file which would be in that same directory.</p>\n\n<p>I found out a GET command which gets file contet into buffer but don't know how to connect it with any variable. In simple words I want to put content of TEST.TXT into TITLE defined variable.</p>\n\n<pre><code>&gt;TEST.TXT\nTEST\n\n&gt;FILE.SQL\nset serveroutput on size 1000000\nset verify off\nset line 120\nSET DEFINE ON\nDEFINE TITLE='MyTitle'\n\nGET TEST.TXT\n</code></pre>\n\n<p>And output:</p>\n\n<pre><code>SQL&gt; @FILE.SQL\n 1* TEST'\n</code></pre>\n\n<p>Any idea how to solve it?</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3373,"score":3,"question_id":5689369,"title":"what is the difference between Precision and scale in oracle","body":"<p>what is the difference between Precision and scale in oracle? cuz in tutorials they always when create primary key let scale  empty and make Precision 6 and what does that mean \nID Precision is 6 ?</p>\n"},{"tags":["sql","oracle","oracle10g","sqlplus","dump"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13071268,"title":"Import a large SQL dump via sqlpus","body":"<p>There is a dump in .sql format, to be imported to the server. From tools only sqlplus. The problem is that sqlplus requires that after each CREATE TABLE was <code>/</code> and only after <code>/</code> start creating the table. And dump looks like this:</p>\n\n<pre><code>DROP TABLE ...;\nCREATE TABLE ...;\nINSERT INTO ...;\n...\nDROP TABLE ...;\nCREATE TABLE ...;\nINSERT INTO ...;\n...\n...\n</code></pre>\n\n<p>When it comes to INSERT nothing is inserted because the table is not created. Edit the file is not possible because it is a large (~ 700 MB). How to import the dump?</p>\n"},{"tags":["sql","oracle","oracle11gr2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13070723,"title":"How would I create a table in Oracle 11g R2 from a SELECT AS and partition the table by range-list?","body":"<p>I am trying to create a new table called Titles2 from an existing table called Titles. I have to use a SELECT AS statement to create the columns in Titles2 from Titles. I also have to partition Titles2 by RANGE and then by LIST.</p>\n\n<p>The code used to create Titles:</p>\n\n<pre><code>SQL&gt; CREATE TABLE Titles\n  2    (\n  3    Title_id         char(3)     ,\n  4    Title            varchar2(40),\n  5    Genre            varchar2(10),\n  6    Pages            number      ,\n  7    Price            number(5,2) ,\n  8    Sales            number      ,\n  9    Pub_id           char(3)     ,\n 10    Pubdate          date        ,\n 11    Advance          number(9,2) ,\n 12    Royalty_rate     number(5,2) ,\n 13    CONSTRAINT Titles_pk PRIMARY KEY (title_id),\n 14    CONSTRAINT Titles_Publishers_fk FOREIGN KEY (Pub_id)\n 15                             REFERENCES Publishers (pub_id)\n 16    )\n 17    PARTITION BY RANGE (Pubdate) (\n 18    PARTITION P1 VALUES LESS THAN (TO_DATE('01-JAN-1995', 'DD-MON-YYYY')) TABLESPACE TSLab8ben1,\n 19    PARTITION P2 VALUES LESS THAN (TO_DATE('01-JAN-2000', 'DD-MON-YYYY')) TABLESPACE TSLab8ben2,\n 20    PARTITION P3 VALUES LESS THAN (MAXVALUE) TABLESPACE TSLab8ben3\n 21    );\n\nTable created.\n</code></pre>\n\n<p>The following code is what I have so far for creating a Titles2 table from Titles:</p>\n\n<pre><code>CREATE TABLE Titles2 AS\nSELECT Title_id AS TID, Title, Genre, Sales, (Sales * Price) AS Revenue, Pub_id AS P#\nFROM Titles\nPARTITION BY RANGE (Revenue)\nSUBPARTITION BY LIST (Genre)\nSUBPARTITION TEMPLATE (\nSUBPARTITION G1 VALUES ('history', 'biography'),\nSUBPARTITION G2 VALUES ('computer','children'),\nSUBPARTITION G3 VALUES (DEFAULT)) (\nPARTITION P1 VALUES LESS THAN (100000),\nPARTITION P2 VALUES LESS THAN (500000),\nPARTITION P3 VALUES LESS THAN (1000000),\nPARTITION P4 VALUES LESS THAN (MAXVALUE));\n</code></pre>\n\n<p>However, the code for creating Titles2 doesn't execute. Would anybody be able to help me get the Titles2 code to execute? Thanks!</p>\n"},{"tags":["java","sql","oracle","java-ee","jdbc"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":60,"score":1,"question_id":13067502,"title":"Procedure in DB not working when called from Java","body":"<p>I have an Java application running on a Weblogic Server and Connecting to Oracle 11g DB server.</p>\n\n<p>In the application i make a call to a DB Procedure and pass a parameter to it which communicates and calls multiple other procedures.</p>\n\n<p>When i test the Procedure independently, it works perfectly and as expected.</p>\n\n<p>The issue comes when i call the Procedure from Java Application.</p>\n\n<p>The Procedure gives an error: </p>\n\n<blockquote>\n  <p>ORA-06508: PL/SQL: could not find program unit being called</p>\n</blockquote>\n\n<p>The Backtrace leads to a call to a procedure that exists in another Schema and has a synonym in my current schema.</p>\n\n<p>Please help if anybody else has faced the same issue or a similar one.</p>\n\n<p>Edit#1:\nSample Code for Calling DB Proc</p>\n\n<pre><code>CallableStatement cstmt = null;\nprivate Connection dbConn = null;\nHashMap hashMap = new HashMap();\nhashMap.put(DBDRIVER, driverType);\nhashMap.put(USERID, userName);\nhashMap.put(PASSWORD, password);\nhashMap.put(SID, dbName);\nhashMap.put(IPADDRESS, intDBServer);\nhashMap.put(PORT, dbPort);\ndbConn = (Connection)cmmObj.connect(hashMap);\ncstmt = dbConn.prepareCall(queryToRun);\ncstmt.setString(1, ReqId);\ncstmt.executeUpdate();\n</code></pre>\n\n<p>Proc Call is { call Proc_CALL(?) } </p>\n"},{"tags":["java","oracle","nosql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12839546,"title":"Major and minor path / components with Oracle NoSQL","body":"<p>I am not sure why with Oracle NoSQL there is a <code>List</code> of String major and minor components like this code:</p>\n\n<pre><code>List&lt;String&gt; majorComponents = new ArrayList&lt;String&gt;();\nList&lt;String&gt; minorLength = new ArrayList&lt;String&gt;();\nList&lt;String&gt; minorYear = new ArrayList&lt;String&gt;();\n\nmajorComponents.add(“Katana”);\nminorLength .add(“length”);\nminorYear.add(“year”);\n\nKey key1 = Key.createKey(majorComponents, minorLength);\nKey key2 = Key.createKey(majorComponents, minorYear);\n\nString valString = \"sword\";\n\nstore.putIfAbsent(key1, Value.createValue(valString.getBytes()));\nstore.putIfAbsent(key2, Value.createValue(valString.getBytes()));\n</code></pre>\n\n<p>And I am also not sure what is the difference of <code>components</code> to <code>path</code>?</p>\n\n<p>Can someone explain how this major and minor paths are in a List and how does it really work. </p>\n\n<p>Can I assume that for key1, when I get the full path here's what I get:</p>\n\n<pre><code>Katana:length\n</code></pre>\n\n<p>For key2</p>\n\n<pre><code>Katana:year\n</code></pre>\n\n<p>If I put:</p>\n\n<pre><code>majorComponents.add(“Saber”);\n</code></pre>\n\n<p>and then do:</p>\n\n<pre><code>Key key1 = Key.createKey(majorComponents, minorLength);\n</code></pre>\n\n<p>What will happen? What will be the full path? I'm quite confused as to how this really works...</p>\n"},{"tags":["perl","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13069202,"title":"Regexp_like with placeholders perl","body":"<p>I need a query to pick up names that has any suffix from a-z. I know regexp_like can do this. But how should I use regexp_like with place holders?</p>\n\n<p><code>select id_name from name_table where regexp_like(name,'REM_45485[a-z]$');</code></p>\n\n<p>How should I use place holders in this  ? Thanks for all the suggestions. </p>\n"},{"tags":["sql","database","oracle","sqldatatypes"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13068632,"title":"get rows which have a higher date than a specific one in MM/DD/YYYY format","body":"<p>sorry for asking a really amateurish question, but I am only beginning to learn oracle.</p>\n\n<p>I need to extract rows based on a date column which is in MM/DD/YYYY format , but I can't formulate a proper query. I used to_date function too but no fun.</p>\n\n<p>I need to extract rows from XTABLE where XDATE is higher than 10/21/2011 (MM/DD/YYYY)</p>\n\n<pre><code>select * from XTABLE where XDATE &gt;= '10/21/2011'\n</code></pre>\n\n<p>doesn't work, neither does</p>\n\n<pre><code>select * from XTABLE where to_date(XDATE,'MM/DD/YYYY') &gt; to_date('28/10/2011','MM/DD/YYYY')\n</code></pre>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13067867,"title":"numeric or value error in Oracle function","body":"<pre><code>create or replace\nFUNCTION REPORT_GENERATION(  \n IN_STATUS IN VARCHAR2\n ,IN_USERID IN varchar2\n)  RETURN CLOB AS \n\n  FINAL_RESULT CLOB:=null;\n  OUTPUT_RESULT CLOB:=null;\n BEGIN\n   /* My implementation. OUTPUT_RESULT contains large XML string */   \n   FINAL_RESULT:=FINAL_RESULT||''||OUTPUT_RESULT; \n   FINAL_RESULT:=FINAL_RESULT||''||'&lt;/EXCEL_MAIN&gt;'; \n   RETURN FINAL_RESULT; \nEND REPORT_GENERATION;\n</code></pre>\n\n<p>When I am executing this function i am getting an error </p>\n\n<pre><code>ORA-06502: PL/SQL: numeric or value error\n</code></pre>\n\n<p>I am getting that error while returning the FINAL_RESULT.\nlength of FINAL_RESULT is 38123. If i replace FINAL_RESULT with some small string it is working without any issues. </p>\n\n<p>How can i resolve this issue. Please help..</p>\n"},{"tags":["java","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":12932832,"title":"get timestamp using OracleCachedRowSet","body":"<p>Code :</p>\n\n<pre><code> OracleCachedRowSet rowSet =  new OracleCachedRowSet();             \n ResultObject obj = new ResultObject(0,null);      \n PreparedStatement pstat = connection.prepareStatement(strQry);\n rowSet.populate(pstat.executeQuery());\n rowSet.beforeFirst();\n\n while(rowSet.next()){\n      System.out.println(\"Conference name \"+rowSet.getString(1));\n      System.out.println(\"StartTime \"+rowSet.getTimestamp(5)) ;\n }\n</code></pre>\n\n<p>When i run above code i got error like :</p>\n\n<pre><code>java.sql.SQLException: Invalid column type\n    at oracle.jdbc.rowset.OracleCachedRowSet.getTimestamp(OracleCachedRowSet.java:4399)\n    at test.Test.main(Test.java:102)\n</code></pre>\n\n<p>Same thing is working fine(check below correct code) if i use <code>ResultSet</code> instead of <code>OracleCachedRowSet</code> </p>\n\n<pre><code>  PreparedStatement pstat = connection.prepareStatement(strQry);                    \n  ResultSet rset =   pstat.executeQuery();                  \n  while(rset.next()){\n        System.out.println(\"Conference name \"+rset.getString(1));\n        System.out.println(\"StartTime \"+rset.getTimestamp(5)) ;\n  }\n</code></pre>\n\n<p>Is there any way to <code>getTimestamp()</code> using <code>OracleCachedRowSet</code> ?</p>\n"},{"tags":["c#","oracle","enterprise-library"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":49,"score":0,"question_id":13067778,"title":"Storing binary file to Oracle Blob field in C#","body":"<p>We have our own DataAccess library built upon the Microsoft Enterprise Data Access block.</p>\n\n<p>I have stored procedure that takes binary file content as input parameter and store it into DB.</p>\n\n<pre><code>byte[] imageFileByteArray = this.GetByteArrayFromFile(imageFile);\nthis.dataAccess.AddCmdParameter(\"DOCIMAGE\", System.Data.DbType.Binary, imageFileByteArray);\n</code></pre>\n\n<p>This code is working fine when using SQL database, But when I switched to Oracle, I get the exception saying that \"Wrong type of parameter\" </p>\n\n<p>In oracle db, the DOCIMAGE column is declared as BLOB field.</p>\n\n<p>Why inferred Dbtype.Binary is not working for oracle?</p>\n"},{"tags":["iphone","ios","ipad","oracle","oracleforms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13067378,"title":"Oracle Forms With iOS","body":"<p>I searched alot for oracle forms for iOS devices but i did'nt find a way to do that. Is there any to use oracle forms in iPhone or iPad ?\nI read somewhere on a website that oracle forms need JRE as iOS devices didn't have JRE so it is not possible. But there are few applications using oracle forms so there must be a way. </p>\n"},{"tags":["linux","oracle","erlang","odbc"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":96,"score":2,"question_id":13026528,"title":"erlang odbc: How to disable autocommit for oracle","body":"<p>I need to disable autocommit for oracle using erlang odbc module in Linux.\nI'm created connection with code:</p>\n\n<pre><code>{ok, Con} = odbc:connect(\"DSN=MyDSN\", [{auto_commit, off}, {scrollable_cursors, off}]).\n</code></pre>\n\n<p>Connection was created succesfully. When I'm trying to update a table the request is successfull, but it is commited automaticaly. What am I doing wrong?</p>\n"},{"tags":["web-services","oracle","parsing","soap","envelope"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13067037,"title":"UTL_DBWS - SOAPException: Error parsing envelope","body":"<p>I hope someone can help me. My problem is that I can’t seem to call any web services from Oracle (Oracle Database 10g Enterprise Edition Release 10.2.0.5.0.)</p>\n\n<p>The web service I am working on can be invoked from a browser interface, but when invoked from Oracle I get the following error message:</p>\n\n<blockquote>\n  <p>11:12:10  ORA-29532: Java call terminated by uncaught Java exception: java.rmi.RemoteException: java.rmi.RemoteException: ; nested exception is: </p>\n  \n  <p>11:12:10      dynamic invocation error: javax.xml.soap.SOAPException: Error parsing envelope</p>\n  \n  <p>11:12:10  ORA-06512: at \"SYS.UTL_DBWS\", line 404</p>\n  \n  <p>11:12:10  ORA-06512: at \"SYS.UTL_DBWS\", line 401</p>\n  \n  <p>11:12:10  ORA-06512: at \"SYS.ADD_NUMBERS\", line 39</p>\n</blockquote>\n\n<p>So I found an example that used a public available webservice. But I still get the same error.</p>\n\n<p><a href=\"http://www.oracle-base.com/articles/9i/consuming-web-services-9i.php\" rel=\"nofollow\">http://www.oracle-base.com/articles/9i/consuming-web-services-9i.php</a></p>\n\n<p>I found an other stackoverflow topic with this error. But the solution is to complete the java install. But I can't find any more information on what to do or how to know when there is a problem with the installation.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/6493433/utl-dbws-calling-a-web-service-from-oracle\">UTL_DBWS - calling a web service from Oracle</a></p>\n\n<p>Any idea's how to fix this?</p>\n"},{"tags":["sql","oracle","query","entity-attribute-value"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13064378,"title":"Oracle, Can't get details from the same column","body":"<p>I have a table named PARAMETER looking like this:</p>\n\n<pre><code>ID - number\nNAME - varchar2\nVALUE - varchar2\n</code></pre>\n\n<p>I have this query witch is 'extracting' the date from the string:</p>\n\n<pre><code>SELECT * from PARAMETER\nwhere (NAME = 'From') and SUBSTR(VALUE, 1, 2)&gt;='01' \nand SUBSTR(ALUE, -7, 5)&gt;='11' and SUBSTR(VALUE, -4, 4) &gt;='2012'\n</code></pre>\n\n<p>Now I need to run it again changing only: <code>where (NAME = 'From')</code>  to  <code>where (NAME = 'To')</code></p>\n\n<p>and compare the results. I can't find a way to do this. Is there a trick?</p>\n"},{"tags":["java","oracle","stored-procedures","types"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":75,"score":2,"question_id":13066206,"title":"Accessing types defined inside package from java","body":"<p>My procedure in oracle is defined under a package, which has in and out parameters of table of records.\nI can call the procedure using packagename.procname using the callable statement from java. However to access the out parameter, I need to define a variable of type ARRAY. But the types of record and table of records in oracle are defined inside the package. Thus those types are not accessible from java using the ARRAYDESCRIPTOR.</p>\n\n<p>The proc and types are defined as below:</p>\n\n<pre><code>CREATE OR REPLACE PACKAGE mypackage IS\nTYPE TY_Pos IS RECORD\n(        cust_id     VARCHAR2(9)\n\n,        balance NUMBER\n);\n\nTYPE TY_TBL IS TABLE OF TY_Pos INDEX BY PLS_INTEGER;\n\nPROCEDURE myproc(inTable IN OUT     TY_TBL,\n                                      count IN NUMBER,\n                                      outTable         IN OUT     TY_TBL\n                                      );\n\nCREATE OR REPLACE PACKAGE BODY mypackage AS\n\nPROCEDURE myproc(inTable IN OUT     TY_TBL,\n                                      count IN NUMBER,\n                                      outTable         IN OUT     TY_TBL\n                                      ) as \n--proc body\n</code></pre>\n\n<p>For accessing the out variable of proc which is a table of records, I am creating array descriptor as </p>\n\n<pre><code>ArrayDescriptor myDescp = ArrayDescriptor.createDescriptor (\"TY_TBL\", l_con);   \n</code></pre>\n\n<p>But since the TY_TBL is defined inside the package thus it throws error. Please help me how can I access this type from my java code.</p>\n"},{"tags":["java","oracle","jpa","sequence","composite-key"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13065309,"title":"Manage a composite primary key with an incremental id using JPA and Oracle","body":"<p>Using JPA, I try to modify a persisted object for multilingual content, which means I need a composite key, with an id and a language. The id also needs to increment using a sequence (I'm using Oracle). How can it be done?</p>\n\n<p>For the moment, I get a Contenu class:</p>\n\n<pre><code>@Entity\n@Table(name = \"CONTENUS\")\npublic class Contenus implements java.io.Serializable {\n\n    private ContenusId id;\n    ...\n}\n</code></pre>\n\n<p>and a ContenusId class:</p>\n\n<pre><code>@Embeddable\npublic class ContenusId implements java.io.Serializable {\n\n    private Long id;\n    private String langue;\n    ...\n}\n</code></pre>\n\n<p>But this doesn't handle the incremental id. Any idea?</p>\n"},{"tags":["java","oracle","pljava"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":181,"score":0,"question_id":9386341,"title":"Can you extract a pl/java class file from an Oracle Database?","body":"<p>I have a pl/java class in a running Oracle database that I have misplaced the source code to. Is there anyway to get the java bytecode back out the database so I could run it against a decompiler? I've already checked \"ALL_SOURCE\" and Oracle claims it doesn't have the source code.</p>\n"},{"tags":["string","oracle","numbers"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13065555,"title":"ORACLE - String to number","body":"<p>I have a little problem with a column on a table.\nThe column is a Varchar named \"prize\".\nThe datas are something like:</p>\n\n<pre><code>00008599\n00004565\n00001600\netc...\n</code></pre>\n\n<p>They have to become:</p>\n\n<pre><code>85.99\n45.65\n16.00\netc...\n</code></pre>\n\n<p>I have tried with to_number function but it doesnt work.\nSomething like:</p>\n\n<pre><code>SELECT to_number(prize, '999999.99') FROM TABLE\n</code></pre>\n\n<p>The error is: ORA-01722</p>\n"},{"tags":["oracle","oracle11g","oracle-xe"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":122,"score":0,"question_id":13015102,"title":"ora-00205: error in identifying control file, check alert log for more info","body":"<p><a href=\"http://stackoverflow.com/questions/53676/how-to-resolve-ora-011033-oracle-initialization-or-shutdown-in-progress\">How to resolve ORA-011033: ORACLE initialization or shutdown in progress</a></p>\n\n<p>When i tried to solve a problem in above link i am getting this error Please help me\nthis is where i got error(> SQL> alter database mount;)</p>\n\n<blockquote>\n  <p>sqlplus /nolog</p>\n  \n  <p>SQL> connect / as sysdba</p>\n</blockquote>\n\n<p>Connected.</p>\n\n<blockquote>\n  <p>SQL> shutdown abort</p>\n</blockquote>\n\n<p>ORACLE Instance shut down.</p>\n\n<blockquote>\n  <p>SQL> startup nomount</p>\n</blockquote>\n\n<p>ORACLE Instance started</p>\n\n<blockquote>\n  <p>SQL> alter database mount;</p>\n</blockquote>\n\n<p>ora-00205: error in identifying control file, check alert log for more info</p>\n\n<pre><code>&lt;msg time='2012-10-22T20:26:41.567+05:30' org_id='oracle' comp_id='tnslsnr'\n type='UNKNOWN' level='16' host_id='SREERAM-PC'\n host_addr='::1'&gt;\n\n&lt;txt&gt;22-OCT-2012 20:26:41 * service_update * xe * 0\n &lt;/txt&gt;\n&lt;/msg\n&gt;\n&lt;msg time='2012-10-22T21:09:09.303+05:30' org_id='oracle' comp_id='tnslsnr'\n type='UNKNOWN' level='16' host_id='SREERAM-PC'\n host_addr='::1'&gt;\n\n&lt;txt&gt;22-OCT-2012 21:09:09 * service_died * xe * 12537\n &lt;/txt&gt;\n&lt;/msg&gt;\n\n&lt;msg time='2012-10-22T21:09:43.556+05:30' org_id='oracle' comp_id='tnslsnr'\n\ntype='UNKNOWN' level='16' host_id='SREERAM-PC'\n host_addr='::1'&gt;\n\n &lt;txt&gt;Dynamic address is already listened on (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=SREERAM-PC)(PORT=1521)))\n &lt;/txt&gt;\n&lt;/msg&gt;\n\n&lt;msg time='2012-10-22T21:09:43.605+05:30' org_id='oracle' comp_id='tnslsnr'\n type='UNKNOWN' level='16' host_id='SREERAM-PC'\n host_addr='::1'&gt;\n\n&lt;txt&gt;22-OCT-2012 21:09:43 * service_register * xe * 0\n &lt;/txt&gt;\n&lt;/msg&gt;\n&lt;msg time='2012-10-22T21:09:46.366+05:30' org_id='oracle' comp_id='tnslsnr'\n\n type='UNKNOWN' level='16' host_id='SREERAM-PC'\n host_addr='::1'&gt;\n &lt;txt&gt;22-OCT-2012 21:09:46 * service_update * xe * 0\n &lt;/txt&gt;\n&lt;/msg&gt;\n\n&lt;msg time='2012-10-22T21:09:48.024+05:30' org_id='oracle' comp_id='tnslsnr'\n type='UNKNOWN' level='16' host_id='SREERAM-PC'\n host_addr='::1'&gt;\n\n&lt;txt&gt;22-OCT-2012 21:09:48 * service_update * xe * 0\n &lt;/txt&gt;\n&lt;/msg&gt;\n</code></pre>\n"},{"tags":["oracle","resultset","database-connectivity"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":10972509,"title":"Time to fetch database results","body":"<p>Is the time to retrieve the result rows of a query affected by the number of rows, and if so how? In particular, the approximate time for retrieving:</p>\n\n<ol>\n<li>1 value, or</li>\n<li>100 values from a data base:</li>\n</ol>\n\n<p>is which of these?</p>\n\n<ol>\n<li>the same</li>\n<li>cannot say</li>\n<li>the first requires less time than the second</li>\n<li>None</li>\n</ol>\n"},{"tags":["oracle","plsql","oracle11g"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":258,"score":1,"question_id":12605835,"title":"No more data to read from socket","body":"<p>My procedure looks like this - </p>\n\n<pre><code>Declare \n       cur_1        Sys_Refcursor;\n       cur_2        Sys_Refcursor;\n       v_1          VARCHAR2(30);\n       v_2          VARCHAR2(30);\n       v_3          VARCHAR2(30);\n       v_4          VARCHAR2(30);\nBegin\n       OPEN cur_1 for Select * from tab1@dblink1;\n       Loop\n           Fetch cur_1 into v_1, v_2;\n           EXIT WHEN cur_1%NOTFOUND;   \n           OPEN cur_2 for Select * from tab2@dblink1 where col1 = v_1 and col2 = v2;\n           Loop\n               Fetch cur2 into v_3, v_4;\n               Exit when cur_2%notfound;    \n               INSERT INTO local.tab3 values (v_1,v_2, v_3, v_4);\n           END Loop;\n           close cur_2;\n       End Loop;\n       close cur_1; \nEND;\n</code></pre>\n\n<p>The abobe procedure compiles but when I run it I get following error - </p>\n\n<p>No more data to read from socket</p>\n\n<p>No more data to read from socket</p>\n\n<p>No more data to read from socket</p>\n\n<p>No more data to read from socket</p>\n\n<p>No more data to read from socket</p>\n\n<p>No more data to read from socket</p>\n\n<p>No more data to read from socket</p>\n\n<p>No more data to read from socket</p>\n\n<pre><code>         .\n\n         .\n\n         .\n\n         .\n</code></pre>\n\n<p>(Few more 'No more data to read from socket')</p>\n\n<p>IO Error: Connection reset by peer: socket write error\nProcess exited.</p>\n\n<p>Interesting thing is when I comment out the entire inner loop the procedure runs without error. So I know something is wrong with the inner loop (I tried commenting only the insert statement inside the inner loop and got the same error). \nPlease help  as I am not able to find anything specific on OTN Discussion forums, stackoverflow etc.</p>\n\n<p>Both my localdb and dblink1 databases have same version - </p>\n\n<p>Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production</p>\n\n<p>PL/SQL Release 11.2.0.1.0 - Production</p>\n\n<p>CORE    11.2.0.1.0      Production</p>\n\n<p>TNS for 64-bit Windows: Version 11.2.0.1.0 - Production</p>\n\n<p>NLSRTL Version 11.2.0.1.0 - Production</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["sql","oracle","oracle10g","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":121,"score":-2,"question_id":13029383,"title":"Why does this query throw ORA-00942 on 10g while it works on 11g?","body":"<p>I execute this query without problem on my 11g installation :</p>\n\n<pre><code>SELECT\n    PRODUCT_INFOS_idm.FIELD_VALUE \"mother_id\",\n    PRODUCT_INFOS_ep.FIELD_VALUE \"product_thickness\",\n    COIL_INFOS.TIME_STAMP,\n    COIL_INFOS.IN_THICKNESS,\n    COIL_INFOS.MEASURED_LENGTH,\n    COIL_INFOS.MEASURED_WIDTH,\n    COIL_INFOS.PARAM_SET_TOP_SIDE,\n    COIL_INFOS.PARAM_SET_BOTTOM_SIDE\nFROM\n    COIL_INFOS\nINNER JOIN\n    PRODUCT_INFOS PRODUCT_INFOS_idm\n    on PRODUCT_INFOS_idm.COIL_ID_SYSTEM=COIL_INFOS.COIL_ID_SYSTEM\n    and PRODUCT_INFOS_idm.TIME_STAMP=COIL_INFOS.TIME_STAMP\n    and PRODUCT_INFOS_idm.FIELD_NAME='ID bobina'\nINNER JOIN  \n    PRODUCT_INFOS PRODUCT_INFOS_ep\n    on PRODUCT_INFOS_ep.COIL_ID_SYSTEM=COIL_INFOS.COIL_ID_SYSTEM\n    and PRODUCT_INFOS_ep.TIME_STAMP=COIL_INFOS.TIME_STAMP\n    and PRODUCT_INFOS_ep.FIELD_NAME='Anchura'\nWHERE\n    (COIL_INFOS.COIL_ID_SYSTEM LIKE '14051800' OR COIL_INFOS.COIL_ID LIKE '14051800')\n</code></pre>\n\n<p>But when my customer (who may have a 10g installation) executes it, he gets</p>\n\n<pre><code>ORA-00942: table or view does not exist\n</code></pre>\n\n<p><strong>Other queries show that he has the same tables and columns.</strong> The following queries executes without problem :</p>\n\n<pre><code>select count(*) from COIL_INFOS\nselect count(*) from PRODUCT_INFOS\n</code></pre>\n\n<p>What can be the problem ? Is there a syntax error somewhere ? I suspect there is a problem with the Oracle version (I already had to remove the \"as\" I usually use for column aliasing). Does Oracle 10g support table aliasing ?</p>\n"},{"tags":["oracle","string-length"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13064621,"title":"Get column value length, not column max length of value","body":"<p>How do I get actual length of value in column?</p>\n\n<p>My (oracle) sql command returns maximum length of value that can be inserted in the column instead of real length of value.</p>\n\n<p>How to fix this?</p>\n\n<pre><code>SQL&gt; SELECT typ, length(t1.typ)\n     FROM AUTA_VIEW t1;\n\nTYP        LENGTH(T1.TYP)\n---------- --------------\nBMW                    10\nBMW                    10\nBMW                    10\nFerrari                10\nBMW                    10\nAudi                   10\nAudi                   10\nAudi                   10\nFerrari                10\nFerrari                10\nMercedes               10\n</code></pre>\n"},{"tags":["sql","oracle","unique","tablefilter"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":53,"score":4,"question_id":13063167,"title":"Select records with few unique columns while choosing not null value over another column in priority","body":"<p>I would like to query a table by getting records unique to field1 and field2 while selecting the row with field4 to have some value rather than null in priority.</p>\n\n<p>e.g.  in original table </p>\n\n<pre><code>field1  field2  field3  field4\n  1       B       A     (null) \n  1       B       A       2   \n  2       C       A       3   \n  2       D       A     (null)\n  3       D       F       3   \n  2       C       A       3   \n</code></pre>\n\n<p>And what I wish to get from output query is like:</p>\n\n<pre><code>field1  field2  field3  field4\n  1       B       A       2   \n  2       C       A       3   \n  2       D       A     (null)\n  3       D       F       3   \n</code></pre>\n\n<p>Is there any efficient way of SQL table joinning technique / filtering to achieve this? Thanks</p>\n\n<p>P/S - to avoid confusion, the purpose of having distinct of field1 and field2 only is because field3 can be having different values that the chosen row will be based on those row which field4 is not null in priority</p>\n\n<p>e.g. </p>\n\n<pre><code>field1  field2  field3  field4\n  1       B       A     (null)   \n  1       B       C       2       &lt;- this will be the chosen one\n</code></pre>\n"},{"tags":["c#","oracle","query"],"answer_count":7,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3542,"score":0,"question_id":1542594,"title":"Insert, Update, Delete for Oracle are not working in .NET C#?","body":"<p>It has been a while that i'm dealing with oracle and .net and they don't seem to be a perfect match together. That's this strange thing, i'm not finding any reason why it happens or how to fix it.</p>\n\n<p>I do simple insert, update and delete and they are not working. It fails on the </p>\n\n<pre><code>cmd.ExecuteNonQuery();\n</code></pre>\n\n<p>Here's the piece of code:</p>\n\n<pre><code>sqlCommand = string.Format(@\" INSERT INTO TABLE_1\n                              (ID, NAME, DESCRIPTION)\n                              VALUES ((SELECT MAX(ID)+1 FROM TABLE_1),'{0}','{1}')\", name, description);\n\nusing (OracleConnection conn = new OracleConnection(connectionString))\n{\n OracleCommand cmd = new OracleCommand(sqlCommand, conn);\n cmd.CommandType = commandType;\n\n try\n {\n  conn.Open();\n  result = cmd.ExecuteNonQuery();                    \n }\n catch (Exception ex) { throw;}\n finally\n {\n  conn.Close();\n }\n</code></pre>\n\n<p>a simple insert, right?! when i debug, i get the cmd.Text value (that would be the sqlCommand), and i do execute it in the oracle db, it goes just fine. As i go the point of executing it in .Net it gives up. </p>\n\n<p>Is this a known situation? Is there any solution, any explanation for it?</p>\n\n<p>Thnx in advance</p>\n"},{"tags":["oracle","oracle10g","oracle11g","oracle9i"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13041453,"title":"Oracle Index Usage","body":"<p>Is there a way to find if a a particular Oracle Index was ever used by Oracle in executing a query? </p>\n\n<p>We have a function based index which I suspect is not getting used by oracle and hence some queries are running slow. I wanted to find out if there was any time that index was used or if there is a way to have it used without changing the C++ application code.</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["php","performance","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12967784,"title":"Define value edit by another php file","body":"<p>I have 2 questions</p>\n\n<p>1.) how to write <code>update_defile($array_value){...}</code> function?</p>\n\n<p>define_file.php</p>\n\n<pre><code>&lt;?php\n  define(\"FIST_NAME\", \"something1\");\n  define(\"LAST_NAME\", \"something2\");\n  define(\"ADDRESS\", \"something3\");\n?&gt;\n</code></pre>\n\n<p>\"something\" is not a constant value that can be change every method <code>Call(update_defile($array_value)</code></p>\n\n<p>value set</p>\n\n<pre><code>$array_value = (\"FIST_NAMe\" =&gt; \"duleep\", \"LAST_NAME\" =&gt; \"dissnayaka\", \"AGE\" =&gt; \"28\" );\n</code></pre>\n\n<p>after call method(update_defile($array_value){.....}) \"define_file.php\"\nfile want to be look like bellow</p>\n\n<pre><code>&lt;?php\n  define(\"FIST_NAME\", \"duleep\");\n  define(\"LAST_NAME\", \"dissnayaka\");\n  define(\"ADDRESS\", \"something3\");\n  define(\"AGE\", \"28\");\n?&gt;\n</code></pre>\n\n<p>2). </p>\n\n<p>My datbase is Oracle. I already saved configuration value in the data base but frequently use these configuration value for my application. So i get value form database and save in the define_file.php as increase performance(down rate database call) but I'm not sure i can increase performance keep configuration value in the PHP file please explain. what is the best way increase performance my application and other alternative solutions welcome.</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":13060533,"title":"configurable auto commit in oracle","body":"<p>Is there a inbuilt functionality in oracle for auto commit?\nLike if i want to update a million rows ,and i want set auto commit to 1000 rows or 2000 rows,i have to just configure if somewhere.<br>\nIt will update the million rows in a loop with autocommit after each 1000 or 2000 rows.This functionality is available in sqlloader.I want to know if similar functionality is available in oracle too.</p>\n"},{"tags":["sql","oracle","tree","tags","hierarchy"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":70,"score":3,"question_id":13029153,"title":"How to make a SQL to create a tag hierarchy based on items with the same tags?","body":"<p>In my system I have items with some tags on each. Now I want to show to the user a tree with the tags. \nThe tree should have all the tags at the first level.<br>\nInside each first-level tag, should appear again all the tags that are found in items belonging also to the first-level tag.<br>\nIn the third level, should appear tags belonging to the first and second level, and so on.<br>\nThe idea is that the user could filter the items based on his tags and could refine the filtering entering in the tree without having to type the tags.</p>\n\n<p>Items were initially stored as a string field in the items table but, to make this solution easily, I have moved them to a child table.</p>\n\n<p>Using these items as input:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>|Item       |Tags    |\n|-----------|--------|\n|Computer   |a,b,c   |\n|Mouse      |a,c     |\n|Keyboard   |c,d     |\n|Monitor    |a,b     |\n</code></pre>\n\n<p>Should output this tree:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>  Tree             Items that are show when selected\n\n  root             Computer,Mouse,Keyboard,Monitor\n    +--a           Computer,Mouse,Monitor\n    |  +--b        Computer,Monitor\n    |  |  +--c     Computer\n    |  +--c        Computer,Mouse\n    |     +--b     Computer\n    +--b           Computer,Monitor\n    |  +--a        Computer,Monitor\n    |  |  +--c     Computer\n    |  +--c        Computer\n    |     +--a     Computer\n    +--c           Computer,Mouse,Keyboard\n    |  +--a        Computer,Mouse\n    |  |  +--b     Computer\n    |  +--b        Computer\n    |  |  +--a     Computer\n    |  +--d        Keyboard\n    +--d           Keyboard\n       +--c        Keyboard\n</code></pre>\n\n<p>This SQL should run only in Oracle database, so the use of <code>connect by</code> operators are acceptable.</p>\n\n<p>I've picked this behaviour from the Delicious' Firefox extension, which show the tags in the form of a tree, but limiting it to have only two levels, and I need it to show so many levels as possible.</p>\n\n<p>Do you have any idea?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["sql","arrays","oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":156,"score":1,"question_id":12360736,"title":"Updating multiple tables using an array in PL/SQL","body":"<p>I'd like to update my employee database to set the batch_id to \"P-1000\" if the employee is a plumber.</p>\n\n<p>Instead of creating 5 separate (and slow) queries, I want to:</p>\n\n<ol>\n<li>set each index of the array is a table name</li>\n<li>loop through the array</li>\n<li>update the table using the string value at the string index</li>\n</ol>\n\n<p>I can't find anything even remotely like the concept I'm proposing here, which leads me to think I'm barking up the wrong tree entirely.</p>\n\n<p>None the less, here is the psuedocode owhat I'm trying to do.</p>\n\n<pre><code>declare\n  type array_type is table of varchar2(100) index by binary_integer;\n  dmt_tables array_type; \nbegin\n--fill dm_employeeTables array\n    dm_employeeTables(0) := 'dm_address';\n    dm_employeeTables(1) := 'dm_communications';\n    dm_employeeTables(2) := 'dm_identifier';\n    dm_employeeTables(3) := 'dm_name';\n    dm_employeeTables(4) := 'dm_qualifications';\n\n-- loop through tables\nfor i in dm_employeeTables.FIRST .. dmt_tables.LAST\n   loop\n    update dm_employeeTables(i) a \n    set employee_batch_id = 'P-1000'\n    where a.employee_type = 'PLUMBER';\n    i=i+1;\n  end loop;\n\nend;\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13057848,"title":"What's wrong with the usage of to_date in this Oracle query?","body":"<p>I have a query like this:</p>\n\n<pre><code>INSERT INTO some_table (date1, date2) \nVALUES (to_date('2012-10-24','YYYY-MM-DD'), to_date('2012-10-24','YYYY-MM-DD'));\n</code></pre>\n\n<p>but I get:</p>\n\n<pre><code>SQL Error: ORA-01858: a non-numeric character was found where a numeric was expected\n01858. 00000 -  \"a non-numeric character was found where a numeric was expected\"\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>*Cause:    The input data to be converted using a date format model was\n           incorrect.  The input data did not contain a number where a number was\n           required by the format model.\n*Action:   Fix the input data or the date format model to make sure the\n           elements match in number and type.  Then retry the operation.\n</code></pre>\n\n<p>but my usage of <code>to_date</code> seems okay?</p>\n\n<p>Many thanks.</p>\n"},{"tags":["sql","oracle","pivot"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":3,"view_count":72,"score":0,"question_id":13028303,"title":"How to pivot 1 column into two in SQL (and grouping the results by ID)","body":"<p>I have a table has a type column, and a value column. I would like to pivot to return all the types (I have 2 types MAIN_INT and PRINCIPAL) into a single row, with the column entitled the Type.</p>\n\n<p>This is the source Table:</p>\n\n<pre><code>Account_No      Component Name   Amount Due \n002ENTA00000169 MAIN_INT         338.13\n002ENTA00000169 MAIN_INT         308.65\n002ENTA00000169 MAIN_INT         289.1\n002ENTA00000169 MAIN_INT         250.36\n002ENTA00000169 MAIN_INT         227.47\n002ENTA00000169 MAIN_INT         196.08\n002ENTA00000169 MAIN_INT         130.75 \n002ENTA00000169 PRINCIPAL        1100.21\n002ENTA00000169 PRINCIPAL        1154.28    \n002ENTA00000169 PRINCIPAL        1173.83\n002ENTA00000169 PRINCIPAL        1212.57\n002ENTA00000169 PRINCIPAL        1235.46    \n002ENTA00000169 PRINCIPAL        1266.85    \n002ENTA00000169 PRINCIPAL        1304.33\n</code></pre>\n\n<p>This is what I want to see</p>\n\n<pre><code>ACCOUNT_No          MAIN_INT     PRINCIPAL  \n002ENTA00000169     338.13       1100.21    \n002ENTA00000169     308.65       1154.28    \n002ENTA00000169     289.1        1173.83    \n002ENTA00000169     250.36       1212.57    \n002ENTA00000169     227.47       1235.46    \n002ENTA00000169     196.08       1266.85    \n002ENTA00000169     158.6        1304.33    \n002ENTA00000169     130.75       1332.18    \n002ENTA00000169     93.77        1369.16    \n002ENTA00000169     62.11        1400.82    \n002ENTA00000169     26.59        1043.23    \n</code></pre>\n"},{"tags":["mysql","sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13052521,"title":"SQL - selecting userid which has max number of not null rows in a different table","body":"<p>I've 3 tables say A,B,C.</p>\n\n<p>Table A has <code>userid</code> column.<br>\nTable B has <code>caid</code> column.<br>\nTable C has <code>lisid</code> and <code>image</code> columns. </p>\n\n<p>one <code>userid</code> can have one or several <code>caid</code>s.<br>\none <code>caid</code> can have one or several <code>lisid</code>s.</p>\n\n<p>how do I select a <code>userid</code> which has maximum number of rows with <code>image</code> column as <code>not null</code> (in some <code>lisid</code>s <code>image</code> column is blank and in some it has some value).</p>\n\n<p>can someone please help.</p>\n"},{"tags":["oracle","jdbc","ldap","oid","tns"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":502,"score":1,"question_id":10758674,"title":"Problems resolving Oracle SID via LDAP/OID lookup with Thin JDBC Client","body":"<p>We are using OID/LDAP lookup for our connection configuration. Both the <code>TNS_ADMIN</code> environment variable and the <code>oracle.net.tns_admin</code> Java property are set correctly and points to a directory that contains sqlnet.ora and ldap.ora.  However, the JDBC connection URL: <code>jdbc:oracle:thin:@ourtnsalias</code> throws exception when attempting to connect:</p>\n\n<pre><code>java.sql.SQLRecoverableException: IO Error: could not resolve the connect identifier  \"ourtnsalias\"\n        at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:458)\n        at oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:546)\n        at oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:236)\n        at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)\n        at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:521)\n        at java.sql.DriverManager.getConnection(DriverManager.java:582)\n        at java.sql.DriverManager.getConnection(DriverManager.java:185)\n        at TnsTest.main(TnsTest.java:29)\nCaused by: oracle.net.ns.NetException: could not resolve the connect identifier  \"tnsalias\"\n        at oracle.net.resolver.NameResolver.resolveName(NameResolver.java:181)\n        at oracle.net.resolver.AddrResolution.resolveAndExecute(AddrResolution.java:416)\n        at oracle.net.ns.NSProtocol.establishConnection(NSProtocol.java:687)\n        at oracle.net.ns.NSProtocol.connect(NSProtocol.java:247)\n        at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1102)\n        at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:320)\n        ... 7 more\nException in thread \"main\" java.lang.NullPointerException\n        at TnsTest.main(TnsTest.java:46)\n</code></pre>\n\n<p>The following flavors of the connection string connect successfully:</p>\n\n<ul>\n<li>Full TNS string:<br/>\n<code>jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=host.company.com)(PORT=####))(CONNECT_DATA=(SERVICE_NAME=service_name)))</code></li>\n<li>Full LDAP url:<br/>\n<code>jdbc:oracle:thin:@ldap://oid.company.net:####/ourtnsname,CN=OracleContext,dc=company,dc=net</code></li>\n</ul>\n\n<p>This would seem to imply that the problem is with the LDAP/OID lookup. However, running <code>tnsping ourtnsname</code> also connects successfully.</p>\n\n<p>Is there any way to use only a TNS Alias in the connection string when doing OID/LDAP lookup?</p>\n\n<p>For completeness sake, here is the relevant Java:</p>\n\n<pre><code>String connectionURL = \"jdbc:oracle:thin:@ourtnsalias\";\nSystem.setProperty(\"oracle.net.tns_admin\", \"c:/oracle/network/admin\");\nClass.forName(\"oracle.jdbc.OracleDriver\");\nConnection c = DriverManager.getConnection(connectionURL, userid, password);\n</code></pre>\n"},{"tags":["database","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13054656,"title":"Approximate number of rows and execution time for query","body":"<p>I would like to assess the number of lines and execution time for my query <strong>before</strong> executing it. Is it possible?</p>\n"},{"tags":["wcf","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13014139,"title":"Examples of WCF CRUD operations for Oracle?","body":"<p>I'm working on exposing access to an Oracle database table for a SharePoint implementation.</p>\n\n<p>From what I've seen, Oracle is not directly supported by BDC, so I'm trying to write a WCF service to perform the CRUD operations against my table.</p>\n\n<p>I've been researching on Google with very limited success. Can anybody point me to an example of using WCF to modify data in an Oracle database?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13052963,"title":"How do I join 2 columns together from 2 different views?","body":"<p>Using oracle SQL developer,</p>\n\n<p>I have two views that have different columns. How can I join column 1 from view A into view B? I want to join <code>AR_INVOICE_INQ_V.CLI_NAME CLI_NAME</code> from view B into view A.</p>\n\n<h2>View A</h2>\n\n<pre><code>CREATE OR REPLACE FORCE VIEW \"KPRD\".\"AC_INPUT_AUDIT\" (\"CLIENT\", \"SEQUENCE_CODE\", \"EMPLOYEE\", \"ORIGINAL_DATE\", \"HOURS_SPENT\", \"LONG_DESCRIPTION\", \"TIME_AT_ACTUAL\", \"MANAGER\")\nAS\n  SELECT CLIENT,\n    SEQUENCE_CODE,\n    EMPLOYEE,\n    ORIGINAL_DATE,\n    HOURS_SPENT,\n    LONG_DESCRIPTION,\n    TIME_AT_ACTUAL,\n    MANAGER\n  FROM TIME_DETAILS\n  WHERE MANAGER BETWEEN 'AAGG' AND 'AZJE'\n  AND ORIGINAL_DATE    &gt; '28/SEP/2012'\n  AND TIME_AT_ACTUAL ! = 0;\n</code></pre>\n\n<h2>View B</h2>\n\n<pre><code>CREATE OR REPLACE FORCE VIEW \"KPRD\".\"AC_AR_INV_BAL\" (\"CLIENT\", \"CLI_NAME\", \"PARTNER\", \"PAR_NAME\", \"MANAGER\", \"REFERENCE\", \"STATUS_CODE\", \"INVOICE_DATE\", \"TIME_BILLED\", \"GROUP_CLIENT_CODE\", \"GRPCLI_NAME\", \"INVOICE_BALANCE\")\nAS\n  SELECT AR_INVOICE_INQ_V.CLIENT CLIENT,\n    AR_INVOICE_INQ_V.CLI_NAME CLI_NAME,\n    AR_INVOICE_INQ_V.PARTNER PARTNER,\n    AR_INVOICE_INQ_V.PAR_NAME PAR_NAME,\n    AR_INVOICE_INQ_V.MANAGER MANAGER,\n    AR_INVOICE_INQ_V.REFERENCE REFERENCE,\n    AR_INVOICE_INQ_V.STATUS_CODE STATUS_CODE,\n    AR_INVOICE_INQ_V.INVOICE_DATE INVOICE_DATE,\n    AR_INVOICE_INQ_V.TIME_BILLED TIME_BILLED,\n    AR_INVOICE_INQ_V.GROUP_CLIENT_CODE GROUP_CLIENT_CODE,\n    AR_INVOICE_INQ_V.GRPCLI_NAME GRPCLI_NAME,\n    AR_INVOICE_INQ_V.INVOICE_BALANCE\n  FROM AR_INVOICE_INQ_V\n  WHERE MANAGER BETWEEN 'AAGG' AND 'AZGG';\n</code></pre>\n"},{"tags":["sql","sql-server","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":56,"score":-2,"question_id":13053885,"title":"How to add ^ Caret in sql database?","body":"<p>I have a value in string which contain the caret synbol in it (Example: It is^ awsome). I would like to insert this string in database but it didn't throw the error but didn't insert this string in it..If i remove caret (^) from the string it works fine.</p>\n\n<p>Anybody have any idea how could i achieve my goal?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["python","linux","oracle","centos","wsgi"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13053850,"title":"installing oracle for python","body":"<p>I am trying to connect to oracle 11.2.0.1 database from python 2.7 (virtualan) on centos.</p>\n\n<p>I followed the below post and installed cx_Oracle package. All went well.\n<a href=\"http://www.programmers-pain.de/2011/07/10/howto-install-cx-oracle-on-centos-5-x/\" rel=\"nofollow\">http://www.programmers-pain.de/2011/07/10/howto-install-cx-oracle-on-centos-5-x/</a></p>\n\n<p>when I import cx_Oracle, it says no module found.</p>\n\n<p>Any thoughts on this please?</p>\n\n<p>Thanks</p>\n"},{"tags":["wcf","oracle","service"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13053832,"title":"How do I call a WCF Service from an Oracle Trigger","body":"<p>I am a senior .net developer and this problem has stumped me big time.</p>\n\n<p>I have written a WCF Service that executes an SSIS package to replicate some data and need to call it from an Oracle Trigger after Insert.  I do not handle the back end and have never attempted anything like this before.  Would someone please tell me how I can call a method inside of a WCF Service via a trigger in Oracle.  This is how the higher ups want it to be done and I do not have any say so in how it is suppose to work.  Getting WCF to talk to SQL Server SSIS is no problem, it's how to call the WCF Service from Oracle that is a nightmare.  Can someone please help?  I am not a seasoned Oracle person at all.</p>\n\n<p>Thank you kindly,</p>\n\n<p>Nathan</p>\n"},{"tags":["oracle","object","oracle11g"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":78,"score":4,"question_id":13007651,"title":"How to add more rows to object type column in oracle","body":"<pre><code>CREATE OR REPLACE TYPE excep_type\nAS\n   OBJECT (overridden_attribute VARCHAR2 (30), exception_id NUMBER);\n\nCREATE TABLE obj_test (id     NUMBER, obj_col excep_type);\n\n\nINSERT INTO obj_test\n  VALUES   (1, excep_type ('x', 1));\n\n SELECT   * FROM obj_test;\n\n ID   OBJ_COL\n --------------\n 1     (X,1)\n</code></pre>\n\n<p>This is fine to me ,but suppose i want to add more records to this object type column obj_col ,then what need to be done .</p>\n\n<p>Suppose there is one more record Y,2 need to be inserted into the column obj_col for ID 1\nthen what statement need to be executed .\n<em>EXPECTED OUTPUT</em></p>\n\n<pre><code>ID   OBJ_COL\n--------------\n1     (X,1)\n      (Y,2)\n</code></pre>\n\n<p>IF I want to update the existing one LIKE X,1 is been updated from Z,3 ,then what need to be done .<em>Expected Output</em></p>\n\n<pre><code>ID   OBJ_COL\n--------------\n1     (Z,3)\n</code></pre>\n\n<p>Please help me with this </p>\n"},{"tags":["oracle","grails","virtual","gorm","column"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13052709,"title":"Save entities with virtual columns in gorm grails","body":"<p>So , in my application i have a entity with a virtual column.\nThe column takes values depending on what i save in another column.</p>\n\n<p>On save i have the following error:</p>\n\n<p>java.sql.BatchUpdateException: ORA-54013: INSERT operation disallowed on virtual columns</p>\n\n<p>This is because i am sending a null value on that field.</p>\n\n<p>Does anybody know how to map a virtual column in gorm?</p>\n\n<p>Thanks </p>\n"},{"tags":["java","oracle","jdbc","oracle10g"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2274,"score":3,"question_id":3052772,"title":"how to store BigInteger values in oracle database","body":"<p>I have connected Java program to Oracle database using JDBC. I want to store <code>BigInteger</code> values(512 bits) in the database. What should be the type of the column?</p>\n\n<p>I m trying like this:</p>\n\n<p>I have taken a column of number type in the database.</p>\n\n<p>I converted <code>BigInteger</code> to <code>BigDecimal</code> like this:</p>\n\n<pre><code>BigInteger b=new BigInteger(\"5779857570957802579079\");\nNumber n =b;\nBigDecimal d=(BigDecimal)n;\n\nPreparedStatement pstmt=con.prepareStatemant(\"insert into database values(?,?)\");\npstmt.setString(1,\"john\");\npstmt.setBigDecimal(2,d);\n</code></pre>\n\n<p>I am getting the following exception:</p>\n\n<pre>\njavax.servlet.ServletException: java.lang.ClassCastException: java.math.BigInteger cannot be cast to java.math.BigDecimal\nroot cause \n\njava.lang.ClassCastException: java.math.BigInteger cannot be cast to java.math.BigDecimal\n</pre>\n\n<p>Is there anything wrong in this code snippet? If there is, please suggest other methods.</p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":61,"score":5,"question_id":13051409,"title":"Pass select statement to Oracle PLSQL","body":"<p>I have a PLSQL oracle function that accepts an array:</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION CM.give_me_an_arrays (p_array IN num_array)   \nRETURN VARCHAR2\nIS \n x   VARCHAR2 (512);\nBEGIN\n x := '';\n   FOR i IN 1 .. p_array.COUNT\n   LOOP\n      DBMS_OUTPUT.put_line (p_array (i));\n   END LOOP;\n\n  RETURN x;\nEND;\n/\n</code></pre>\n\n<p>I want to do that:</p>\n\n<pre><code>select CM.give_me_an_arrays(select COM.COM_ID \n                              from CM.XLP_SE_COMPONENT com  \n                             where rownum &lt; 10) \n  from dual\n</code></pre>\n\n<p>Any Ideas?\nThanks in advance.</p>\n"},{"tags":["java","sql","oracle","generics"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":193,"score":0,"question_id":11139647,"title":"Java - Calling a stored procedure with generic arguments","body":"<p>I would like to call a stored procedure (Oracle). As I my procedure calls are dynamical, I need to manage the procedures parameters dynamically.\nThe problem is that I would like to avoid using the <code>instanceof</code> keyword since it does not work well with primary types.\nIs there a cleaner way to call a such procedure?</p>\n\n<pre><code>    public void executeProcedure(StoredProcedure proc) {        \n        LinkedList&lt;ProcedureParameter&lt;?&gt;&gt; parameters = proc.getParameters();\n\n        CallableStatement statement = connection.prepareCall(\"{ call MY_PACKAGE.MY_PROCEDURE( ?, ?, ? ) }\");\n\n        for (int i = 0; i &lt; parameters.size(); i++) {\n            Object paramValue = parameters.get(i).getValue();\n\n            // Beginning of smelly code\n\n            if (paramValue instanceof String) {\n                statement.setString(i + 1, (String) paramValue);\n            }\n            else if (paramValue instanceof ...) {\n                ...\n            }\n            else {\n                ...\n            }\n\n            // End of smelly code\n        }\n\n        statement.execute();            \n    }\n</code></pre>\n\n<p> </p>\n\n<pre><code>    public class ProcedureParameter&lt;E&gt; {\n        private String name;\n        private E value;\n\n        public ProcedureParameter(String name) {\n            this.name = name;\n        }\n\n        public ProcedureParameter(String name, E value) {\n            this.name = name;\n            this.value = value;\n        }\n\n        // Getters and setters\n    }\n</code></pre>\n\n<p>Thank you for any idea.</p>\n"},{"tags":["asp.net","oracle","oracle10g","database-link"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":505,"score":2,"question_id":10015130,"title":"ORACLE/ASP.NET: ORA-2020 - Too many database links... what's causing this?","body":"<p>Here's the scenario...</p>\n\n<p>We have an internal website that is running the latest version of the ODAC (Oracle Client). It opens database connections, runs a stored procedure or packaged method, then disconnects. Connection pooling is turned on, and we are currently under version 11g in both our development and test environments, but under 10gR2 in our production environment. This happens on Production.</p>\n\n<p>A few days ago, a process began firing off a ORA-2020 error. The process is called from a webpage on our internal website. The user simply sets a date, hits a button, and a job is started on another system that is separate from the website. The call itself, however, uses a database link to run a function.</p>\n\n<p>We've scoured the SQL to find that it only uses that one database link. And since these links are on a per session basis and the user isn't exceeding the default limit of 4, how is it possible that we are getting a ORA-2020 error. </p>\n\n<p>We have ran a number of tests to try to push over the default limit of 4. ODAC, from what I recall, runs a commit after each connection, and I can't seem to run 4 DB links, then run a piece of SQL with 1 DB link directly after with any errors. The only way I can bring up this error is if I run a query with 4 DB links, then a function or piece of dynamic SQL with a database link within it. We don't have that problem as this issue is sporadic. It isn't ALWAYS happening.  </p>\n\n<p><strong>Questions</strong></p>\n\n<ol>\n<li>Is it possible that connection pooling is allowing User B to use User A's connection after the initial process was run, thus adding to the open links number if User B runs a SQL statement with more database links?</li>\n<li>Is this a scenario where we should up our limit past 4? What are the disadvantages of increasing the number?</li>\n<li>Do I need to explicitly close open database links before disconnecting from the database? Oracle documentation seems to suggest it should automatically happen, but \"on occasion\"... doesn't.</li>\n</ol>\n"},{"tags":["oracle","jdbc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4571,"score":0,"question_id":7478454,"title":"JDBC Driver class not found: oracle.jdbc.OracleDriver","body":"<p>I have installed a third party java webservice which uses Oralce jdbc thin driver to write data into Oracle database. When i run this, i get the following error;</p>\n\n<p><strong>JDBC Driver class not found: oracle.jdbc.OracleDriver</strong></p>\n\n<p>I have oracle installed and set classpath variable to following value:</p>\n\n<p>*D:\\oracle\\product\\10.2.0\\client_1\\jdbc\\lib\\classes12.jar;D:\\oracle\\product\\10.2.0\\client_1\\jdbc\\lib\\classes12.zip;D:\\oracle\\product\\10.2.0\\client_1\\jdbc\\lib\\ojdbc14.jar;D:\\oracle\\product\\10.2.0\\client_1\\jdbc\\lib\\ojdbc14.zip;C:\\Program Files\\Java\\jdk1.7.0\\jre\\lib\\rt.jar*</p>\n\n<p>and path variable to following value;</p>\n\n<p>*D:\\oracle\\product\\10.2.0\\client_1\\bin;C:\\Program Files\\Java\\jdk1.7.0\\bin\\;D:\\oracle\\product\\10.2.0\\client_1\\jdbc\\lib\\classes12.jar;D:\\oracle\\product\\10.2.0\\client_1\\jdbc\\lib\\classes12.zip;D:\\oracle\\product\\10.2.0\\client_1\\jdbc\\lib\\ojdbc14.jar;D:\\oracle\\product\\10.2.0\\client_1\\jdbc\\lib\\ojdbc14.zip*</p>\n\n<p>Any suggestion why web service is not able to identify jdbc driver?</p>\n\n<p>Thanks</p>\n"},{"tags":["oracle","sql-developer"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1527,"score":5,"question_id":6459145,"title":"SQLDeveloper displays no tables under connections where it says tables","body":"<p>I am not sure why but I just installed SQLdeveloper 32 bit (3.0.0.4).  When I click to expand the tables/views/indexes or etc it displays nothing at all!</p>\n\n<p>But when I do the following: </p>\n\n<pre><code>SELECT owner, table_name   \nFROM dba_tables \n</code></pre>\n\n<p>I see the list of tables and I have read access to these tables since I can do a select * from anytable and data shows. Any thoughts?</p>\n"},{"tags":["java","database","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":13048417,"title":"ORACLE getting Dates with 3 letters","body":"<p>I have a program that inserts some data into a table. </p>\n\n<p>In my table im showing day and week number like the following output (in danish)</p>\n\n<p><em>TO Uge 42</em> </p>\n\n<p>Where TO is the name of the day</p>\n\n<p>Uge is week</p>\n\n<p>and 42 is the number of the week.</p>\n\n<p>What i would like to do is get the TO to be TOR(Short for Torsdagwhich is the danish word for Thursday)</p>\n\n<p>My Code looks like this at the moment:</p>\n\n<pre><code>\"DY' || ' ' || '\\\"Uge\\\" '|| 'IW\";\n</code></pre>\n\n<p>Are there any whay in Orcle where i can get the date as a 3 lettered String or do i have to make substrings of the string and change it?</p>\n\n<p><strong>UPDATE ADDED SQL CODE FROM MY PROGRAM</strong></p>\n\n<pre><code>String sql =\n            \"SELECT                                                                     \" +\n            \"   TO_CHAR(MIN(TIDSPUNKT),'\"+getDateDescriptionFormat(when)+\"') AS PERIOD, \" +\n            \"   NVL(QUEUE,' ') AS QUEUE,                                                \" +\n            \"   NVL(SUM(ANTAL_KALD),0) AS CALLS,                                        \" +\n            \"   NVL(SUM(ANTAL_BESVARET),0) AS ANSWERED_CALLS,                           \" +\n            \"   NVL(SUM(BESVARET_25_SEK),0) AS ANSWERED_CALLS_25_SEC,                   \" +\n            \"   NVL(SUM(INTERN_KALD),0) AS INTERNAL_CALLS                               \" +\n            \"FROM                                                                       \" +\n            \"   KS_DRIFT.PERO_NKM_KØ_OVERSIGT                                           \" +\n            \"WHERE                                                                      \" +\n            \"   TIDSPUNKT &gt;= '\"+getStartDate(start,when)+\"' AND                         \" +\n            \"   TIDSPUNKT &lt;= '\"+ slut+\"' AND                                            \" +\n            \"   TO_CHAR(TIDSPUNKT,'DY') NOT IN ('AB')                                   \" +\n            \"GROUP BY                                                                   \" +\n            \"   TRUNC(TIDSPUNKT,'\"+getDateFormatString(when)+\"'),                       \" +\n            \"   QUEUE                                                                   \" +\n            \"ORDER BY                                                                   \" +\n            \"   PERIOD  \n</code></pre>\n\n<p><strong>THE getDateDiscribtionFormat:</strong>   </p>\n\n<pre><code>private String getDateDescriptionFormat(char when){\n        if (when == 'D')return \"DY' || ' ' || '\\\"Uge\\\" '|| 'IW\";\n        if (when == 'W')return \"\\\"Uge\\\" '||'IW\";\n        if (when == 'M')return \"Mon.' || ' ' || 'YYYY\";\n        if (when == 'Y')return \"YYYY\";\n        return null;\n    }\n</code></pre>\n\n<p>Do note that I DID not make this code my former co worker did and it is messy !</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":114,"score":1,"question_id":13028082,"title":"Selecting large sequence value into global variable not working in PL/SQL code","body":"<p>I have a script where I would like to have a global variable to store a transaction number for later use. The code is working fine on one schema where the sequence value that I'm fetching is relatively low. It is not working on another schema with a higher sequence value where I get a \"Numeric Overflow\". If I change that sequence value to a lower number it is working as well but that is not an option.</p>\n\n<pre><code>VAR TRANSACTIONNR NUMBER;\n\nBEGIN\n  --Works with        NEXTVAL being around  946713241\n  --Doesn't work with NEXTVAL being around 2961725541\n  SELECT MY_SEQUENCE.NEXTVAL INTO :TRANSACTIONNR FROM DUAL;\n  MY_PACKAGE.STARTTRANSACTION(:TRANSACTIONNR);\nEND;\n/\n\n  -- SQL Statements\n\nBEGIN\n  MY_PACKAGE.ENDTRANSACTION;\n  MY_PACKAGE.DO_SOMETHING(:TRANSACTIONNR);\nEND;\n/\n</code></pre>\n\n<p>What is also working is selecting the sequence into a variable declared in the DECLARE block:</p>\n\n<pre><code>DECLARE\n  TRANSACTIONNR NUMBER;\nBEGIN\n  SELECT MY_SEQUENCE.NEXTVAL INTO TRANSACTIONNR FROM DUAL;\n  MY_PACKAGE.STARTTRANSACTION(TRANSACTIONNR);\nEND;\n/\n</code></pre>\n\n<p>But that means I won't be able to reuse it in the block at the end. Setting the size of the number is not possible.</p>\n\n<pre><code>VAR TRANSACTIONNR NUMBER(15)\n</code></pre>\n\n<p>is not valid.</p>\n\n<p>Any ideas what I could try or other ways to store global state?</p>\n"},{"tags":["oracle","merge","statement"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13048338,"title":"prepared statement in multithreading","body":"<p>I have used <code>MERGE</code> command in my prepared statement,and when i was executed it in a single threaded  env,its working fine,But in multi threaded environment,it causes some problem.That is data is duplicated,that is if i have 5 threads,each record will duplicate 5 times.I think there is no lock in db to help the thread.\nMy code:</p>\n\n<pre><code>//db:oracle\nsb.append(\"MERGE INTO EMP_BONUS EB USING (SELECT 1 FROM DUAL) on (EB.EMP_id = ?) WHEN MATCHED  THEN  UPDATE SET TA =?,DA=?,TOTAL=?,MOTH=?  WHEN NOT MATCHED THEN \"+ \"INSERT (EMP_ID, TA, DA, TOTAL, MOTH, NAME)VALUES(?,?,?,?,?,?) \");\n\n//sql operation,calling from run() method\npublic void executeMerge(String threadName) throws Exception {              \n        ConnectionPro cPro = new ConnectionPro();\n        Connection connE = cPro.getConection();\n        connE.setAutoCommit(false);\n        System.out.println(sb.toString());\n        System.out.println(\"Threadname=\"+threadName);\n        PreparedStatement   pStmt= connE.prepareStatement(sb.toString());\n        try {\n            count = count + 1;\n\n            for (Employee employeeObj : employee) {//datalist of employee\n\n                pStmt.setInt(1, employeeObj.getEmp_id());\n                pStmt.setDouble(2, employeeObj.getSalary() * .10);\n                pStmt.setDouble(3, employeeObj.getSalary() * .05);\n                pStmt.setDouble(4, employeeObj.getSalary()\n                        + (employeeObj.getSalary() * .05)\n                        + (employeeObj.getSalary() * .10));\n                pStmt.setInt(5, count);\n                pStmt.setDouble(6, employeeObj.getEmp_id());\n                pStmt.setDouble(7, employeeObj.getSalary() * .10);\n                pStmt.setDouble(8, employeeObj.getSalary() * .05);\n                pStmt.setDouble(9, employeeObj.getSalary()\n                        + (employeeObj.getSalary() * .05)\n                        + (employeeObj.getSalary() * .10));\n                pStmt.setInt(10, count);\n                pStmt.setString(11, threadName);\n                // pStmt.executeUpdate();\n\n                pStmt.addBatch();\n            }\n\n            pStmt.executeBatch();\n            connE.commit();\n        } catch (Exception e) {\n            connE.rollback();\n            throw e;\n\n        } finally {\n\n            pStmt.close();\n            connE.close();\n\n        }\n    }\n</code></pre>\n\n<p>if employee.size=5, thread count =5,after execution i would get 25 records instead of 5</p>\n"},{"tags":["java","oracle","spring","stored-procedures","jdbc"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":13048365,"title":"Batch executing of stored procedure with Spring JDBC API","body":"<p>Is it possible to execute stored procedure using Spring JDBC API in batch mode?</p>\n\n<p>I tried to use Spring JdbcTemplate's method batchUpdate and it doesn't work.\nI use Spring 3.0 and Oracle JDBC driver version 11.2.0.3</p>\n\n<pre><code>   JdbcTemplate template = new JdbcTemplate(dataSource);\n\n    template.batchUpdate(\"BEGIN SCHEMA.PERSON_UPDATE(I_N_PERSON_ID=&gt; ?  ,I_S_NAME=&gt; ?  ,J_N_TID=&gt; ?);END;\", \n                new BatchPreparedStatementSetter() {\n                    public void setValues(PreparedStatement ps, int i) throws SQLException {\n                        OracleCallableStatement cs = (OracleCallableStatement) ps;\n                        cs.setString(1, persons.get(i).getName());\n                        cs.setLong(2, persons.get(i).getPersonId());\n                        cs.registerOutParameter(3, OracleTypes.NUMBER);\n                    }\n\n                    public int getBatchSize() {\n                        return persons.size();\n                    }} \n                );\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["oracle","triggers","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13048360,"title":"Reading current table id during trigger operation","body":"<p>I have three tables: A and B\nThe relationship is A can have many B\nSo B has a reference to the A.id as one of its columns</p>\n\n<pre><code>Table A\n|id|date|...\n\nTable B\n|id|A_id|...\n</code></pre>\n\n<p>I have created an Oracle trigger on table A so that when it is updated it updates an A_Mod table.</p>\n\n<p>This trigger is </p>\n\n<pre><code>CREATE OR REPLACE TRIGGER TR_A_INSERT_UPDATE\nAFTER  INSERT OR UPDATE ON A\nFOR EACH ROW\nBEGIN\n    INSERT INTO A_Mod values(..., :new.date, ...)\nEND;\n</code></pre>\n\n<p>This works fine :)</p>\n\n<p>My problem si creating the trigger for table B.</p>\n\n<p>The trigger is:</p>\n\n<pre><code>CREATE OR REPLACE TRIGGER TR_B_INSERT_UPDATE\n     AFTER  INSERT OR UPDATE ON B\n     FOR EACH ROW\n     DECLARE\n       ts TIMESTAMP;\n\n     BEGIN\n   SELECT aa.date INTO ts FROM B bb \n       INNER JOIN A aa ON a.id = bb.A_id\n       WHERE bb.id = :new.id;\n\n       INSERT INTO A_Mod values(..., :new.date, ...)\n    END;\n</code></pre>\n\n<p>This trigger is reading the ID of the updated line in table B and then getting the date from the corresponding row in table A. It then tries to insert it into A_Mod</p>\n\n<p>The problem is I get a mutating error</p>\n\n<pre><code>Error report:\nSQL Error: ORA-04091: table B is mutating, trigger/function may not see it\nORA-06512: at \"TR_B_INSERT_UPDATE\", line 5\nORA-04088: error during execution of trigger 'TR_B_INSERT_UPDATE'\n04091. 00000 -  \"table %s.%s is mutating, trigger/function may not see it\"\n*Cause:    A trigger (or a user defined plsql function that is referenced in\n           this statement) attempted to look at (or modify) a table that was\n           in the middle of being modified by the statement which fired it.\n*Action:   Rewrite the trigger (or function) so it does not read that table.\n</code></pre>\n\n<p>Looking at the <a href=\"http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_triggers.htm\" rel=\"nofollow\">docs</a> I can remove this error by removing the <code>FOR EACH ROW</code> line and having the trigger fire once per statement rather than once per row. Unfortunately I am using an ORM mapper so do not control how the updates happen. I think there would be times when the update could cover multiple rows. </p>\n\n<p>The docs say something about creating a temporary table but I am not sure how this would help. Would I have to create a temporary table inside the trigger, create a trigger on this temporary table which then updates A_Mod, update this temporary table when the trigger is fired and then delete everything after? </p>\n\n<p>Any tips greatly appreciated.</p>\n\n<p>Thanks</p>\n"},{"tags":["sql","oracle","oracle10g"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":3,"view_count":919,"score":0,"question_id":3457370,"title":"select rownum from salary where rownum=3;","body":"<p>How to retrieve third row from any table using \"rownum\" key word ( i am using oracle-10g) </p>\n"},{"tags":["java","python","sql","oracle","postgresql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":129,"score":0,"question_id":13045806,"title":"How to copy data from (PL/)SQL in Oracle to another DBMS?","body":"<p><strong>Task</strong>: copy all data in a database (without schema) to another database (possibly of a different type). I can't modify source database, so it is a read-only backup</p>\n\n<p><strong>Context</strong>: integrate Oracle with a number of DBs. Now I'm integrating Oracle and Postgres.</p>\n\n<p><strong>Resources</strong>: connection string only, with ability to connect database with highest available privileges. (I can't access it via ssh - no way to create ordinal backup and download files via ssh, or to compile and start web/ftp server, etc.) </p>\n\n<p><strong>Question</strong>: Is there any proven and <em>FAST</em> way to pull this data? Maybe someone has an open source solution with clean code?</p>\n\n<p>The word \"fast\" is present here because just selecting N rows in a turn (using rownum or row_number()) and transfering to a target database or intermediate file is too slow.</p>\n"},{"tags":["oracle","reporting","business-intelligence"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12965558,"title":"Workbook cannot be expanded in OracleBI Discoverer","body":"<p>I have a number of Oracle Discoverer workbooks which have become inaccessible to most users. These workbooks now only accessible to users with Discoverer administration access.</p>\n\n<p>When regular users attempt to open the workbooks, they receive the error message: </p>\n\n<pre><code>This workbook cannot be expanded.\nUnable to open workbook\n</code></pre>\n\n<p>A Metalink note suggests disabling fan-trap detection and disabling multiple join path detection. Upon making these changes, a different error is displayed:</p>\n\n<pre><code>Item \"Folder.itemname\" used by the workbook is missing. Would you like to continue?\n</code></pre>\n\n<p>After hitting OK multiple times and the errors have cycled through each item name in the report, I get to another ambiguous error:</p>\n\n<pre><code>Item dependency \"\" not found in the EUL. Attempt to open workbook failed.\n</code></pre>\n\n<p>I have also attempted to access them under a brand new user accounts as well as save the report under a new account/ re-share it with no success.</p>\n\n<p>I am using the following versions:</p>\n\n<ul>\n<li>OracleBI Discoverer 10g (10.1.2.3) Oracle Business Intelligence</li>\n<li>Discoverer Plus 10g (10.1.2.55.26)</li>\n<li>End User Layer - 5.1.1.0.0.0 </li>\n<li>Oracle Database 11g 11.1.0.7.0</li>\n</ul>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":13007407,"title":"Sum and Group by dynamically in Oracle","body":"<p>I have a requirement in which there are four parameters. p1,p2,p3,p4. User can enter any of these either single or combinations.I want to display only the columns which he enters by summing and grouping.Other columns should be excluded.How can i do this?</p>\n"},{"tags":["oracle","oracle11gr2","datapump"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13004239,"title":"Loading XMLTYPE data with IMPDP","body":"<p>I am trying to take a schema from an existing database and place it in a new database.</p>\n\n<p>I've created dependant tablespaces for the data and everything seems to work ok except any tables with XMLTYPE columns error and fail with the error message below. The XMLTYPE are unvalidated CLOBs</p>\n\n<pre><code>KUP-11007: conversion error loading table \"SCHEMA\".\"TABLE_NAME\"\nORA-01400: cannot insert NULL into (XML_COLUMN)\nKUP-11009: data for row: XML_COLUMN : 0X''\n</code></pre>\n\n<p>Some investigation seemed to indicate that using TABLES=TABLE_NAME instead of SCHEMA=SCHEMA would help but I have had no such luck.</p>\n\n<p>Note that there are no constraints on this column and that some data could indeed be null (though after the import I get 0 of my several million records)</p>\n\n<p>The command I am using to initiate the datapump is:</p>\n\n<pre><code>impdp TABLES=SCHEMA.TABLE_NAME DIRECTORY=DATA_PUMP_DIR DUMPFILE=oracledpexport.dmp LOGFILE=LOGFILE.LOG TABLE_EXISTS_ACTION=REPLACE\n</code></pre>\n"},{"tags":["django","oracle","orm","django-models","django-database"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12931061,"title":"How to get oracle NUMBER with syncdb","body":"<p>I have some legacy oracle database against which I run inspectdb command.\nOne column in the DB has type NUMBER (without precision and scale) and\nwhat I got from django is:</p>\n\n<pre><code>entity_id = models.DecimalField(unique=True, null=True, max_digits=0, decimal_places=-127, blank=True)\n</code></pre>\n\n<p>If I now run syndb trying to generate schema from the model I will get\nthe error:</p>\n\n<pre><code>Error: One or more models did not validate:\nDecimalFields require a \"decimal_places\" attribute that is a non-negative integer.\nDecimalFields require a \"max_digits\" attribute that is a positive integer.\n</code></pre>\n\n<p>My question is: how should I modify entity_id type oin the model to\nget NUMBER generated in oracle?</p>\n"},{"tags":["oracle","xquery","oracle-osm"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13028792,"title":"Oracle OSM - XQuery doesn't loop","body":"<p>I'm using <code>OSM</code> 7.2.0.3 and I have cartridge with an <code>Order Recognition Rule</code>, with its <code>Order Data Rule</code> (inside Transformation tab)</p>\n\n<p>In the ODR I have this XQuery code:</p>\n\n<pre><code>declare namespace im=\"http://xxx\"; \ndeclare namespace xs=\"http://www.w3.org/2001/XMLSchema\";\n\ndeclare variable $ord :=  fn:root(.)/im:Order;\n\n&lt;_root&gt;\n  &lt;Order&gt;\n  {\n    for $moli in $ord/MainOrderLineItem\n      return \n        $moli/LineItemAttributeInfo/LineItemAttribute\n  }\n &lt;/Order&gt;\n&lt;/_root&gt;\n</code></pre>\n\n<p>The XML input to the OSM is: </p>\n\n\n\n<pre><code>&lt;ord:CreateOrder\n    xmlns:ord=\"http://xmlns.oracle.com/communications/ordermanagement\"&gt;\n    &lt;im:Order xmlns:im=\"http://xxx\"\n        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n        xsi:schemaLocation=\"http://xmlns.oracle.com/communications/sce/dictionary/BaseOrderCommonCartridge/DataDictionary_BaseOrderCommon ../dataDictionary/DataDictionary_BaseOrderCommon.xsd\"&gt;\n\n      &lt;OrderHeader&gt;\n        &lt;OrderID&gt;12345&lt;/OrderID&gt;\n        &lt;RevisionNumber&gt;1&lt;/RevisionNumber&gt;\n      &lt;/OrderHeader&gt;\n\n      &lt;MainOrderLineItem&gt;\n        &lt;LineItemAttributeInfo&gt;\n          &lt;LineItemAttribute&gt;\n            &lt;AttributeID&gt;1234&lt;/AttributeID&gt;\n          &lt;/LineItemAttribute&gt;\n        &lt;/LineItemAttributeInfo&gt;\n      &lt;/MainOrderLineItem&gt;\n      &lt;MainOrderLineItem&gt;\n        &lt;LineItemAttributeInfo&gt;\n          &lt;LineItemAttribute&gt;\n            &lt;AttributeID&gt;5678&lt;/AttributeID&gt;\n          &lt;/LineItemAttribute&gt;\n        &lt;/LineItemAttributeInfo&gt;\n      &lt;/MainOrderLineItem&gt;\n      &lt;MainOrderLineItem&gt;\n        &lt;LineItemAttributeInfo&gt;\n          &lt;LineItemAttribute&gt;\n            &lt;AttributeID&gt;abcd&lt;/AttributeID&gt;\n          &lt;/LineItemAttribute&gt;\n        &lt;/LineItemAttributeInfo&gt;\n      &lt;/MainOrderLineItem&gt;\n\n    &lt;/im:Order&gt;\n&lt;/ord:CreateOrder&gt;\n</code></pre>\n\n<p>There are 3 occurences of <code>&lt;MainOrderLineItem&gt;</code>'s but the output is only 1:</p>\n\n<pre><code>&lt;LineItemAttribute xmlns:im=\"http://xxx\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n    &lt;AttributeID&gt;1234&lt;/AttributeID&gt;\n&lt;/LineItemAttributeInfo&gt;\n</code></pre>\n\n<p>Why is it not looping?</p>\n\n<p>Thanks a lot for your replies. </p>\n"},{"tags":["sql","oracle","networking","compression","oracle-net-services"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":13043631,"title":"Does Oracle compress/minimise some repeating data in query result during transferring through network?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6081696/oracle-10g-is-transfer-via-database-link-compressed-is-it-possible\">Oracle 10g : Is transfer via database link compressed ? is it possible?</a>  </p>\n</blockquote>\n\n\n\n<p>I have a huge SQL query with a lot of fields in it. Most of data in this result are duplicates of each selves. </p>\n\n<p>Here is part of SQL result for your intelligence:</p>\n\n<pre><code>RECORD_ID DATE_REC    CAB   PERSON_ID CODE1                          CODE4     CODE2 CODE5                                CODE5_VALUE                                                                      CODE5_SUBVALUE1           CODE5_SUBVALUE2           CODE5_SUBVALUE3           CODE6_SUBVALUE1           CODE6_SUBVALUE2           CODE6_SUBVALUE3\n  1500747 31.10.2012          2260784                                  5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                   PETERSON                  EARL                      TOMAS\n  1500750 31.10.2012                                                   5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      \n  1500711 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      \n  1500712 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      \n  1500713 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      \n  1500714 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      \n  1500715 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      \n  1500716 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      \n  1500717 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      \n  1500718 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      \n  1500745 31.10.2012                                                   5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      \n  1500746 31.10.2012                                                   5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      \n  1500748 31.10.2012                                                   5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      \n  1500749 31.10.2012                                                   5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      \n  1500709 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      \n  1500710 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      \n</code></pre>\n\n<p>As you can see from request above, there is a lot of duplicate data. Will Oracle compress it while serializing to transmit it over network?</p>\n"},{"tags":["oracle","plsql","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13040679,"title":"Parameterizing table name in sqlplus input file","body":"<p>I am trying to export some data using sqlplus and the Oracle spool functionality.  The problem is that the SQL input file where I am defining my export is not letting me parameterize the table name from which I am exporting data -- it wants a literal :(</p>\n\n<p>Calling sqlplus in a shell script:</p>\n\n<pre><code>sqlplus $USER/$PASSWD@$ORADB&lt;&lt;!\n\n@export.sql $OUT_FILE $SOME_VAR $ENV\n\nexit\n!\n</code></pre>\n\n<p>export.sql:</p>\n\n<pre><code>set heading off\nset head off\nset term off\nset tab off\nset embedded on\nset feedback off\nset pagesize 0\nset linesize 800\nset trimspool on\nset verify off\n\nspool &amp;1\n\nSELECT '&amp;2|' || some_col\nFROM &amp;3_TABLE\n/\nspool off\n</code></pre>\n\n<p>When $ENV is set to 'dev', I get </p>\n\n<pre><code>Enter value for 3_TABLE \n</code></pre>\n\n<p>whereas I want it to use dev_TABLE.  When I unparameterize the table names in the sql file, the output runs fine.  Also note that there is param &amp;2, which is $SOME_VAR from the shell and it gets displayed evaluated fine.  The only problem is in the FROM statement.</p>\n\n<p>Is there any way to tell the sql input file to replace the parameterized table names before running SQL?</p>\n\n<p>Thanks</p>\n"},{"tags":["php","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13044207,"title":"PHP Oracle Multi table insert as one block","body":"<p>On Linux, PHP 4.3 and Oracle 10g, I am allowing candidates to apply online for jobs. At apply button I have write insert queries like this</p>\n\n<pre><code>$sql1 = insert into job_table (…) values (…);  //inserting over 20 values\n$stmt1=OCIParse($conn,$sql1);\nOCIExecute($stmt1);\n\n$sql2 = insert into personal_info_table (…) values (…);  //inserting over 50 values\n$stmt2=OCIParse($conn,$sql2);\nOCIExecute($stmt2);\n\n$sql3 = insert into qualification_info_table (…) values (…);  //inserting over 20 values\n$stmt3=OCIParse($conn,$sql3);\nOCIExecute($stmt3);\n</code></pre>\n\n<p>Problem is that due to unknown reasons, sometimes all insert queries does not run thus I cannot able to track particular information in all tables.\nIs there any way that ensures all insert commands MUST runs? Or rollback the entire transaction if any insert statement does not run?\nAny help in this regard is greatly appreciated.</p>\n"},{"tags":["c++","c","oracle","oci","sys"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13042136,"title":"How can I login oracle as sys account using oci or anyother libs","body":"<p>I am try to make a tool to help create user and imp database after oracle database installed.\nBecause it is too difficult for my colleagues to deployment a new database by typeing commands.\nThen i tried using oci to login oracle sys account，but oci replay a mistake “ORA-12154: TNS:could not resolve the connect identifier specified”,but a normal account is ok.Please tell me how can i connect oracle as sys.Thank you.</p>\n"},{"tags":["java","oracle","oracle11g","oracle-xe"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":81,"score":1,"question_id":13043042,"title":"Is there a way to install java on Oracle 11g XE?","body":"<p>I'm using the database Oracle 11g Express Edition (XE) and when I try to create a java source object it returns me an error:</p>\n\n<blockquote>\n  <p>ORA-29538: Java not installed</p>\n</blockquote>\n\n<p>The source code is simple:</p>\n\n<pre><code>create or replace and compile java source named hello AS \n  public class Hello {\n    public static String hello() { return \"Hello!\"; }\n  };\n</code></pre>\n\n<p>I found at Oracle's documentation that Oracle XE doesn't include Java.</p>\n\n<p>Does anybody knows if it's possible to \"install\" Java on it ?</p>\n\n<p>Thanks in advice.</p>\n\n<p>Vih</p>\n"},{"tags":["oracle","plsql","triggers","cursor"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2046,"score":1,"question_id":8447793,"title":"Oracle - ORA-01422: exact fetch returns more than requested number of rows","body":"<p>I'm still working on this database for a small retail store (a scenario, thankfully!) and am currently trying to fix this issue with a trigger.</p>\n\n<p>The relevant entities are Customer, Payment and Order. Payment is a link entity between the other two, so one Customer could make many payments and one order could have many payments (unusual but still possible) and that's all fine.</p>\n\n<p>The trigger:</p>\n\n<pre><code>CREATE OR REPLACE TRIGGER Check_Payment_Status  \nBEFORE UPDATE OF Order_Status ON Customer_Order \n\nfor each row\n  DECLARE paymentStatus payment.payment_status%type;\n  BEGIN\n\n    select payment.payment_status into paymentStatus\n    from payment\n    where order_no = :new.order_no;\n\n    IF (paymentStatus ='Failed' OR paymentStatus IS NULL ) then  \n      RAISE_APPLICATION_ERROR(-20103, 'The full payment has not been made so the order cannot be     processed further until then.');\n      update customer_order set order_status='Delayed' where order_no= :new.order_no;\n    END IF;\n\n    IF (paymentStatus ='Successful' ) then  \n      update payment set payment_date=SYSDATE where order_no= :new.order_no;\n    END IF;\n\n\n  END; \n. \nrun\n</code></pre>\n\n<p>It works okay at the moment. Basically, before a customer's order can be flagged as \"Dispatched\" the payment status must be \"Successful\". If it's null or \"Failed\" the trigger will be like \"oh no you don't!\" (but in more formal words) which is working as intended. However, if one applies the business rule \"an order can have many payments\" the trigger needs to check all relevant payments which is where I get this error, as the <code>SELECT INTO</code> statement is intending to return one row only.</p>\n\n<p>I've read up on Cursors a bit but I think I'm going a bit too far here - would anyone suggest some solutions, please?</p>\n"},{"tags":["java","oracle","tomcat"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13041432,"title":"Intermittently getting \"sqlexception invalid column index\"","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5969081/what-does-the-following-oracle-error-mean-invalid-column-index\">What does the following Oracle error mean: invalid column index</a>  </p>\n</blockquote>\n\n\n\n<p>I am running tomcat 7 with tomcat jdbc connection pool and oracle database. I am intermittently seeing \"sqlexception invalid column index\" exception when running certain queries. It usually happens when same query is run a lots of time within a very short amount of time.</p>\n"},{"tags":["oracle","unicode","coldfusion","character-encoding","oracle10g"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3242,"score":3,"question_id":5086773,"title":"Oracle Unicode problem when using NLS_CHARACTERSET is WE8ISO8859P1 and NLS_NCHAR_CHARACTERSET is AL16UTF16, and ColdFusion as programming language","body":"<p>I have 2 Oracle 10g database, XE and Enterprise</p>\n\n<p><strong>XE</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/BcFkb.jpg\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/QmkR9.jpg\" alt=\"enter image description here\"></p>\n\n<p><strong>Enterprise</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/hIfvf.jpg\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/d6cxI.jpg\" alt=\"enter image description here\"></p>\n\n<p>and this are the data type I've use in the test table</p>\n\n<p><img src=\"http://i.stack.imgur.com/JCkfI.jpg\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/42GwQ.jpg\" alt=\"enter image description here\"></p>\n\n<p>and then I tried to test to insert some Unicode char from <a href=\"http://www.sustainablegis.com/unicode/\" rel=\"nofollow\">http://www.sustainablegis.com/unicode/</a></p>\n\n<p>and the results are</p>\n\n<p><strong>XE</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/jezy6.jpg\" alt=\"enter image description here\"></p>\n\n<p><strong>Enterprise</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/OrNwL.jpg\" alt=\"enter image description here\"></p>\n\n<p>for this test, I use ColdFusion 9 developer edition</p>\n\n<pre><code>&lt;cfprocessingDirective pageencoding=\"utf-8\"&gt; \n&lt;cfset setEncoding(\"form\",\"utf-8\")&gt;\n\n&lt;form action=\"\" method=\"post\"&gt;\nUnicode : &lt;br&gt;\n&lt;textarea name=\"txaUnicode\" id=\"txaUnicode\" cols=\"50\" rows=\"10\"&gt;&lt;/textarea&gt;\n&lt;br&gt;&lt;br&gt;\nLanguage : &lt;br&gt;\n&lt;input type=\"Text\" name=\"txtLanguage\" id=\"txtLanguage\"&gt;\n&lt;br&gt;&lt;br&gt;\n&lt;input type=\"Submit\"&gt;\n&lt;/form&gt;\n\n&lt;cfset dsn = \"theDSN\"&gt;\n\n&lt;cfif StructKeyExists(FORM, \"FIELDNAMES\")&gt;\n    &lt;cfquery name=\"qryInsert\" datasource=\"#dsn#\"&gt;\n        INSERT INTO UNICODE\n        (\n            C_VARCHAR2,\n            C_CHAR,\n            C_CLOB,\n            C_NVARCHAR2,\n            LANGUAGE\n        )\n        VALUES\n        (\n            &lt;cfqueryparam cfsqltype=\"CF_SQL_VARCHAR\" value=\"#FORM.TXAUNICODE#\"&gt;,\n            &lt;cfqueryparam cfsqltype=\"CF_SQL_CHAR\" value=\"#FORM.TXAUNICODE#\"&gt;,\n            &lt;cfqueryparam cfsqltype=\"CF_SQL_LONGVARCHAR\" value=\"#FORM.TXAUNICODE#\"&gt;,\n            &lt;cfqueryparam cfsqltype=\"CF_SQL_VARCHAR\" value=\"#FORM.TXAUNICODE#\"&gt;,\n            &lt;cfqueryparam cfsqltype=\"CF_SQL_VARCHAR\" value=\"#FORM.TXTLANGUAGE#\"&gt;\n        )\n    &lt;/cfquery&gt;\n&lt;/cfif&gt;\n\n&lt;cfquery name=\"qryUnicode\" datasource=\"#dsn#\"&gt;\n    SELECT  *\n    FROM    UNICODE\n    ORDER BY    LANGUAGE\n&lt;/cfquery&gt;\n\n&lt;table border=\"1\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;LANGUAGE&lt;/th&gt;\n            &lt;th&gt;C_VARCHAR2&lt;/th&gt;\n            &lt;th&gt;C_CHAR&lt;/th&gt;\n            &lt;th&gt;C_CLOB&lt;/th&gt;\n            &lt;th&gt;C_NVARCHAR2&lt;/th&gt;\n        &lt;/tr&gt;\n     &lt;/thead&gt;\n     &lt;tbody&gt;\n        &lt;cfoutput query=\"qryUnicode\"&gt;\n            &lt;tr&gt;\n                &lt;td&gt;#qryUnicode.LANGUAGE#&lt;/td&gt;\n                &lt;td&gt;#qryUnicode.C_VARCHAR2#&lt;/td&gt;\n                &lt;td&gt;#qryUnicode.C_CHAR#&lt;/td&gt;\n                &lt;td&gt;#qryUnicode.C_CLOB#&lt;/td&gt;\n                &lt;td&gt;#qryUnicode.C_NVARCHAR2#&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/cfoutput&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>from this guide <a href=\"http://www.stanford.edu/dept/itss/docs/oracle/10g/server.101/b10749/ch6unicode.htm#i1007297\" rel=\"nofollow\">http://www.stanford.edu/dept/itss/docs/oracle/10g/server.101/b10749/ch6unicode.htm#i1007297</a> I think for my Enterprise database it should produce same thing as XE (at least for NVARCHAR2 column) since the <strong>typical solution</strong> from that guide said:</p>\n\n<ul>\n<li>Use NCHAR and NVARCHAR2 datatypes to store Unicode characters</li>\n<li>Keep WE8ISO8859P1 as the database character set</li>\n<li>Use AL16UTF16 as the national character set</li>\n</ul>\n\n<p>So, how to make it works too in my Enterprise database?</p>\n\n<p>Thank you\n:)</p>\n"},{"tags":[".net","database","oracle","entity-framework","ado.net"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13041163,"title":"Many-to-Many relationship in Entity Framework with relationship informantion","body":"<p>First said, this is my first experience using the Entity Framework so I apologize if this ends up being a newbie question.  Everything has gone well so far; but, I run into a situation that I am not sure what the best way to handle is.  </p>\n\n<p>I need to create a many-to-many relationship; but, the many-to-many table contains more than just the composite key.  In this case the Entity Framework does not see to recognize it as a many-to-many structure and so I don't seem to get the easy ability to get the collections without using the intervening table.  Is there a better way to do this?</p>\n\n<p>Simplified Example:</p>\n\n<ul>\n<li>A Unit can have many boards and a board could have been in many units</li>\n<li>When it is in a unit we need to record what slot it was in.</li>\n</ul>\n\n<p>Tables:</p>\n\n<pre><code>Unit\n UnitID(PK)\n UnitName\n\nBoard\n BoardID(PK)\n BoardName\n\nUnitBoard\n UnitID(PK,FK1)\n BoardID(PK,FK2)\n Slot\n</code></pre>\n\n<p>When I pull this into my code using an ADO.NET Entity Data Model, I don't see an easy way to get the collection of Boards associated to a Unit from the Unit Entity or visa-versa.</p>\n\n<p>Is there a better way to do this or do I just need to use the associated collection of UnitBoards then use that to build the collection of Units/Boards?</p>\n\n<p>This seems I am probably not the first person to went to do something like this.  Ex: I was thinking of Books and Owners wanting to also keep the related BookOwner information (like the purchase date).</p>\n"},{"tags":["sql","oracle","spring","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":13040363,"title":"jdbc.BadSqlGrammarException table or view does not exist. Tested query in database, works. But web application errors","body":"<blockquote>\n  <p><strong>EDIT: FIXED! Look below</strong></p>\n</blockquote>\n\n<p>So I have tested the query in SQL Developer and it works fine. However, in my implementation, the run does not load the data into the list and spits out this error:</p>\n\n<pre><code>org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad\nSQL grammar [select columnname,displayname, viewsortorder,capsdisind,window, DIS\nFIELDID , (select  1 from WEB_CUSTDISABLEDFIELDS where custid =? AND  A.DISFIELD\nID  = WEB_CUSTDISABLEDFIELDS.DISFIELDID) from web_DISABLEDFIELDS  A ]; nested ex\nception is java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not e\nxist\n\n        at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.d\noTranslate(SQLErrorCodeSQLExceptionTranslator.java:220)\n        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslat\nor.translate(AbstractFallbackSQLExceptionTranslator.java:72)\n        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:\n607)\n        at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:64\n1)\n        at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:67\n0)\n        at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:67\n8)\n        at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:71\n0)\n        at com.caps.capslink.dao.AdminDAOImpl.getCustDisabledFieldsFromDB(AdminD\nAOImpl.java:177)\n        at com.caps.capslink.businessobject.AdminBOImpl.getCustDisabledFields(Ad\nminBOImpl.java:67)\n        at com.caps.capslink.service.AdminServiceImpl.getCustDisabledFieldsList(\nAdminServiceImpl.java:53)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at flex.messaging.services.remoting.adapters.JavaAdapter.invoke(JavaAdap\nter.java:421)\n        at flex.messaging.services.RemotingService.serviceMessage(RemotingServic\ne.java:183)\n        at flex.messaging.MessageBroker.routeMessageToService(MessageBroker.java\n:1503)\n        at flex.messaging.endpoints.AbstractEndpoint.serviceMessage(AbstractEndp\noint.java:884)\n        at flex.messaging.endpoints.amf.MessageBrokerFilter.invoke(MessageBroker\nFilter.java:121)\n        at flex.messaging.endpoints.amf.LegacyFilter.invoke(LegacyFilter.java:15\n8)\n        at flex.messaging.endpoints.amf.SessionFilter.invoke(SessionFilter.java:\n44)\n        at flex.messaging.endpoints.amf.BatchProcessFilter.invoke(BatchProcessFi\nlter.java:67)\n        at flex.messaging.endpoints.amf.SerializationFilter.invoke(Serialization\nFilter.java:146)\n        at flex.messaging.endpoints.BaseHTTPEndpoint.service(BaseHTTPEndpoint.ja\nva:278)\n        at flex.messaging.MessageBrokerServlet.service(MessageBrokerServlet.java\n:322)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl\nicationFilterChain.java:304)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF\nilterChain.java:210)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV\nalve.java:224)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV\nalve.java:175)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(Authentica\ntorBase.java:472)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j\nava:164)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j\nava:100)\n        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:\n929)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal\nve.java:118)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.jav\na:405)\n        at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcesso\nr.java:316)\n        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(\nAbstractProtocol.java:515)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoin\nt.java:1544)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)\nCaused by: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not e\nxist\n\n        at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.ja\nva:91)\n        at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:1\n12)\n        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java\n:173)\n        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:455)\n        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:413)\n        at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:1030)\n        at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.\njava:194)\n        at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPrepare\ndStatement.java:785)\n        at oracle.jdbc.driver.T4CPreparedStatement.executeMaybeDescribe(T4CPrepa\nredStatement.java:860)\n        at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStateme\nnt.java:1186)\n        at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePrep\naredStatement.java:3381)\n        at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePrepare\ndStatement.java:3425)\n        at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(Oracle\nPreparedStatementWrapper.java:1490)\n        at org.springframework.jdbc.core.JdbcTemplate$1.doInPreparedStatement(Jd\nbcTemplate.java:648)\n        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:\n591)\n        ... 39 more\n</code></pre>\n\n<p>I've searched multiple problems with this error but none of them seem to address the same issue as mines. I am using Oracle SQL.</p>\n\n<p>I have also looked into these files to see what it could be but couldn't find anything:</p>\n\n<p>at com.caps.capslink.dao.AdminDAOImpl.getCustDisabledFieldsFromDB(AdminDAOImpl.java:177)</p>\n\n<p>at com.caps.capslink.businessobject.AdminBOImpl.getCustDisabledFields(AdminBOImpl.java:67)</p>\n\n<p>at com.caps.capslink.service.AdminServiceImpl.getCustDisabledFieldsList(AdminServiceImpl.java:53)</p>\n\n<p>Maybe someone has ran into this problem before? Any help is appreciated. Thanks!</p>\n\n<p><strong>FIXED THE PROBLEM</strong></p>\n\n<p>The issue was the tables. They just needed permissions in the database to be accessed.</p>\n\n<p>What I did was this:</p>\n\n<pre><code>grant all on sa.table to public\n/\ncreate public synonym table for sa.table\n/\ngrant all on sa.table2 to public\n/\ncreate public synonym table2 for sa.table2\n/\n</code></pre>\n"},{"tags":["sql","performance","oracle","plsql","data-warehouse"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":109,"score":5,"question_id":12991346,"title":"Refresh strategy for materialized views in a data warehouse","body":"<p>I have a system that has a materialized view that contains roughly 1 billion items, on a consistent two hour basis I need to update about 200 million (20% of the records).  My question is what should the refresh strategy on my materialized view be?  As of right now it is refresh with an interval.  I am curious as to the performance impacts between refreshing on an interval vice refresh never and rename/replace the old materialized view with the new one.  The underlying issue is the indices that are used by Oracle which creates a massive amount of redo.  Any suggestions are appreciated.</p>\n\n<p><strong>UPDATE</strong><br>\nSince some people seem to think this is off topic my current view point is to do the following:  </p>\n\n<p>Create an Oracle Schedule Chain that invokes a series of PL/SQL (programming language I promise) functions to refresh materialized view in a pseudo-parallel fashion.    However, being as though I fell into the position of a DBA of sorts, I am looking to solve a data problem with an algorithm and/or some code.</p>\n"},{"tags":["sql","oracle","datetime","postgresql"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":14029,"score":5,"question_id":2505382,"title":"Common way to compare timestamp in oracle, postgres and SQL Server","body":"<p>I am writing a sql query which involves finding if timestamp falls in particular range of days. </p>\n\n<p>I have written that in the postgres but it doesn't works in Oracle and SQL Server:</p>\n\n<pre><code>AND creation_date &lt; (CURRENT_TIMESTAMP - interval '5 days')\nAND creation_date &gt;= (CURRENT_TIMESTAMP - interval '15 days')\n</code></pre>\n\n<p>Is there are common way to compare the timestamp across different databases?</p>\n"},{"tags":["java","oracle","jdbc","callable-statement"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":13037471,"title":"CallableStatement, named paremeters and order of binding","body":"<p>I'm using a CallableStatement to execute a SQL query with named parameters, and I'm getting different results depending on the order in which I bind the parameters. Here's my full test:</p>\n\n<pre><code>public void test() throws SQLException {\n    OracleDataSource ds = new OracleDataSource();\n    ds.setUser(\"abcd\");\n    ds.setPassword(\"a\");\n    ds.setURL(\"jdbc:oracle:thin:@efgh:1521:orcl\");\n    Connection connection = ds.getConnection();\n    CallableStatement stmt = connection.prepareCall(\"select :a col_a, :b col_b from dual\");\n    stmt.setObject(\":b\", \"b\");\n    stmt.setObject(\":a\", \"a\");\n    ResultSet resultSet = stmt.executeQuery();\n    resultSet.next();\n\n    Assert.assertEquals(\"a\", resultSet.getObject(\"col_a\"));\n    Assert.assertEquals(\"b\", resultSet.getObject(\"col_b\"));\n\n}\n</code></pre>\n\n<p>It fails because col_a contains \"b\", and col_b contains \"a\". If I switch the two calls to <code>stmt.setObject</code> to make them in the order the variables appear in the query, then it works.</p>\n\n<p>I've also tried:</p>\n\n<ul>\n<li>using setString/getString instead of setObject/getObject</li>\n<li>referencing columns by their index (<code>resultSet.getObject(1)</code> for col_a and <code>2</code> for col_b)</li>\n<li>combining both: <code>resultSet.getString(resultSet.findColumn(\"col_a\"))</code></li>\n</ul>\n\n<p>Any idea of what I'm doing wrong, or of any other way I could be doing this?\nI can't do with positioned parameters (with <code>?</code>) in PreparedStatement, as I can get different queries with the same parameters in different order.</p>\n\n<p>For instance, I could get those two queries to execute:</p>\n\n<ul>\n<li><code>select nvl(foo, :a), :b || something from my_table</code></li>\n<li><code>select decode(:b, 'b', aaa, ccc), eee || :a from another_table</code></li>\n</ul>\n\n<p>The statements have nothing in common except the presence of the variables <code>:a</code> and <code>:b</code>. But they are not in the same order, which means I cannot replace them with <code>?</code> and then use a PreparedStatement with variables binding with <code>stmt.setObject(1, a); stmt.setObject(2, b);</code>, because it would work for the first one, but not for the second.</p>\n\n<p>In case it's useful, I'm using ojdbc6-11.2.0.2.0, and the database is also in 11.2.0.2.0.</p>\n"}]}
{"total":22203,"page":8,"pagesize":100,"questions":[{"tags":["oracle","shell","unix","plsql","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13038825,"title":"Config SQL*Plus to return nothing but data","body":"<p>I need to write a simple shell function that returns a single field from an Oracle DB.  Think of it as for example <code>SELECT 'ABC' FROM dual;</code> and ABC is what I am after.</p>\n\n<p>Here is my function:</p>\n\n<pre><code>function getSomeOraVal\n{\nsqlplus $USER/$PASSWD@$ORADB&lt;&lt;!!\n\nSET sqlprompt '' \nSET sqlnumber off \n\nSET verify off\nSET pages 0\nSET echo off\nSET head on\nSET feedback off\nSET feed off\nSET serveroutput on\nSET escape '\\'\n\nVARIABLE  v_someVal VARCHAR2(30);\n\nBEGIN\nSELECT 'ABC' INTO v_someVal FROM dual;\nEND;\n/\n\nSELECT :v_someVal FROM dual;\n\n!!\n}\n</code></pre>\n\n<p>However, I want to pipe the sqlplus output (data only -> 'ABC') into a shell variable, which the function then returns and can be called from other shell scripts.  Unfortunately, sqlplus returns a whole lot of garbage, such as \"Welcome to Oracle\" on top and \"Disconnected...\" in the bottom.</p>\n\n<p>How can I extract just the data from a SQL result set, or in this case a single value and pass it into a UNIX variable for further manipulation within the shell?</p>\n\n<p>Thanks</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":13037622,"title":"PL SQL IF-THEN-ELSE block","body":"<p>I have this piece of code that is embedded in my sql. For some reason, I see that every time my last ELSE block is getting executed. Here is my code:</p>\n\n<pre><code> IF REGEXP_LIKE (UPPER(V_TEMP_DEPT_1),\n        'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG|FAC|AMU|LAB|WING|\n          UNIT|SERV|AFT|CENT|CLIN|KLIN|ETHICS COM|EC|IRB') THEN\n              V_DEPT_N    := V_TEMP_DEPT_1;\n              V_ADDR_LINE1:= NULL;\n      ELSE\n\n      IF REGEXP_LIKE (UPPER(V_TEMP_DEPT_2),\n      'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG|FAC|AMU|LAB|WING|\n        UNIT|SERV|AFT|CENT|CLIN|KLIN|ETHICS COM|EC|IRB') THEN\n            V_DEPT_N    := V_TEMP_DEPT_2;\n            V_ADDR_LINE2:= NULL;\n                    ELSE\n\n      IF REGEXP_LIKE (UPPER(V_TEMP_DEPT_3),\n          'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG|FAC|AMU|LAB|WING|\n            UNIT|SERV|AFT|CENT|CLIN|KLIN|ETHICS COM|EC|IRB') THEN\n              V_DEPT_N    := V_TEMP_DEPT_3;\n              V_ADDR_LINE3:= NULL;\n      ELSE\n\n      IF REGEXP_LIKE (UPPER(V_TEMP_DEPT_4),\n          'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG|FAC|AMU|LAB|WING|\n            UNIT|SERV|AFT|CENT|CLIN|KLIN|ETHICS COM|EC|IRB') THEN\n              V_DEPT_N    := V_TEMP_DEPT_4;\n              V_ADDR_LINE4:= NULL;\n      ELSE\n              -- The below line always gets executed.\n              V_DEPT_N:= NULL;\n\n      END IF;\n        END IF;\n          END IF;\n            END IF;\n</code></pre>\n\n<p>Any ideas what am I doing wrong?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":1,"view_count":71,"score":2,"question_id":13035706,"title":"Can I get a whole year one table or do I have to change the query for each month?","body":"<p>The following code is probably self explanatory</p>\n\n<p>Lists number of active subscribers 1st of june </p>\n\n<pre><code>select \n    count(subscribers) as activeSubscribers \nfrom subscriberlist sub \nwhere \n    to_date('2012-06', 'yyyy-mm') \n        between sub.firstDayOfSubscription and sub.lastDayOfSubscription\n</code></pre>\n\n<p>But if I want to get the number of subscribers in the beginning of every month the past year, what could I do (besides changing the date in the query and repeating).</p>\n"},{"tags":[".net","vb.net","oracle","data-type-conversion"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13037019,"title":"Vbnet datatable fails to retrive us7ascii oracle data","body":"<p>We have an application written in vb.net 4.5 that use ODBC driver to retrive data from an Oracle 10g database. The database character  set is set to us7ascii. We have tables that contains extended ascii characters (like for example ÄÄ or ÈÈ ). When we try to retrive data using the following code :</p>\n\n<pre><code>        Dim thisCN1 As New System.Data.Odbc.OdbcConnection(connectionString)\n        Dim szSql as string=\"select * from mytable\"  \n        Dim dt As New DataTable\n        Dim dataAdapter As New System.Data.Odbc.OdbcDataAdapter(szSql, thisCN1)\n        dataAdapter.Fill(dt)\n</code></pre>\n\n<p>We have ?? characters instead of  ÄÄ or ÈÈ in columns that contains extended ascii characters.\nIn the select query we have a column ( for example COLUMN_A ) of type varchar2 that contains extended ascii characters ( like for example ÄÄ or ÈÈ ). When we inspect the resulted datatable we found a ? characters instead of ÄÄ or ÈÈ . We thought that the problem was in the conversion from us7ascii oracle datatype  to vbnet system.string that is 16bit unicode. varchar2 oracle columns seems to be mapped as system.string datacolumn type.</p>\n\n<p>For further investigation , we have tried to get data using ADODB recordset. We have used the following code :</p>\n\n<pre><code>    Dim rs As New ADODB.Recordset\n    Dim cn As New ADODB.Connection\n    Dim szSql as string=\"select * from mytable\"  \n    cn.ConnectionString = \"connectionstring\"\n    cn.Open()\n    rs.CursorLocation = ADODB.CursorLocationEnum.adUseClient\n    rs.Open(szSql, cn)\n    rs.ActiveConnection = Nothing\n</code></pre>\n\n<p>In the select query we have a column ( for example COLUMN_A ) of type varchar2 that contains extended ascii characters ( like for example ÄÄ or ÈÈ ). When we inspect the resulted recordset we found the correct characters ( ÄÄ or ÈÈ ).</p>\n\n<p>Does anyone know how to tell the vbnet datatable to do not make any type conversion ? </p>\n"},{"tags":["c#","visual-studio-2010","visual-studio","oracle","odp"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":13036757,"title":"ORA-12541 TNS:no listener on Oracle.DataAccess connection open","body":"<p>My WCF service uses <code>Oracle.DataAccess.Client</code> to connect to oracle db.  It has been running successfully for a year or so using the following connectionString:</p>\n\n<pre><code>OracleConnection conn = new OracleConnection(String.Format(\"USER ID=XXX;PASSWORD=XXX;DATA SOURCE={0}\", db));\n</code></pre>\n\n<p>I recently got a new pc and had to re-install the Oracle client.  I tried to add a new operationContract to my existing service and had to re-reference the newly-added ODAC.  Suddenly, it won't connect anymore.  It fails on the <code>connection.open();</code></p>\n\n<p>My TNSnames.ora file is in the same spot that it ever was.  I even tried copying it to the project's bin directory just for grins.  </p>\n\n<p>TOAD works.  I can tnsping my database successfully from OraHome.  I can access the database using <code>System.Data.OracleClient</code>, but I don't want to rewrite everything in order to use a deprecated dll.</p>\n\n<p>If the tnsnames is there, the paths are identified in my env variables, and the listener is running, what else should be checked?  I did notice that the <code>HKEY_LOCAL_MACHINE</code> key for Oracle was pointing to the wrong OraHome path, but even when I modified the path it still wouldn't connect, so I put it back, afraid that I would make TOAD stop working too.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["oracle","toad"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13035932,"title":"Oracle/TOAD/Team Coding: Can't select a TFS Namespace when attempting to connect to TFS through TOAD","body":"<p>We are currently attempting to evaluate whether or not we want to use TOAD's Team Coding feature as it would seamlessly allow us to use TFS as a repository for our database objects. We currently have the newest version of TOAD (It is a TRIAL VERSION) sitting on a VM somewhere. The Team Coding feature is installed, and I can browse my TFS projects. What I can't do, however, is connect to TFS through the Logon in TOAD because it won't allow me to click 'OK' when I am attempting to select a namespace.</p>\n\n<p>It was my understanding that the trial had been fixed to allow for this to happen. I couldn't find anything on their website, so I was curious if anyone knew the answer as to why I can't do this.</p>\n"},{"tags":["oracle","ado.net","oledbexception"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13036421,"title":"ADO.NET Getting oracle native error from OleDBException","body":"<p>I'm connecting from .NET to an Oracle database, using OleDbConnection.</p>\n\n<p>The problem is that when I get an OleDbException, for example, because of a primary key violation, I'm not able to handle this exception specifically for that error code (in this example: ORA-00001). I also want to handle other oracle errors in order to inform the users the problem with a friendly message.</p>\n\n<p>I've found some info here:\n<a href=\"http://stackoverflow.com/questions/12796934/how-to-catch-specific-oledbexception\">How to catch specific OleDbException?</a></p>\n\n<p>This almost the same problem than mine, but the correct answer does not work for me. In my case the SqlState property which would return an error numeric value, is returning NULL.</p>\n\n<p>Is there any reason why SqlState is returning null? Does anyone have one short example of a successful OleDbException error handling? </p>\n\n<p>Thank you very much!</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13033683,"title":"Select all columns with 1 being distinct","body":"<p>Alright, so I have a table with the following columns</p>\n\n<pre><code>| id | release_id | publish_date | category | title |\n</code></pre>\n\n<p>Based on this structure, a <code>release</code> can have <em>multiple categories</em>, which gives it a new line in the table. One of my page views lists the latest x releases (all categories). When I run a query like so:</p>\n\n<pre><code>select * \nfrom (select * \n      from TABLE \n      order by PUBLISH_DATE DESC) \nwhere rownum &lt;= 10\n</code></pre>\n\n<p>If one of the latest, 10 in this case, releases has multiple categories, it'll returned twice, so I'm trying to add either UNIQUE or DISTINCT (or any other proper way) so that the RELEASE_ID is different for row returned.</p>\n\n<p>When I run select <code>DISTINCT RELEASE_ID</code>, only that column is returned, but <em>I still need the data from the other columns</em>. Any help is appreciated.</p>\n"},{"tags":["database","oracle","export"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":13035109,"title":"Export remote Database : Oracle","body":"<p>I have an oracle database on a server that contains more than one database, i'm connected to those databases using sqlDevelopper normaly. I want to export the database DB1.\nThe string connection used in SqlDevelopper is :</p>\n\n<blockquote>\n  <p>user@//server:1530/DB1 <br>\n  user@//server:1533/DB2 <br>\n  user@//server:1534/DB3 <br></p>\n</blockquote>\n\n<p>The command i use to export the DB1 is :</p>\n\n<blockquote>\n  <p>exp user@//server:1530/DB1 file=\"C:\\DB1.dmp\" log=\"C:\\DB1.log\" rows=y\n  owner=user</p>\n</blockquote>\n\n<p>But it doesn't work, i have this message : </p>\n\n<blockquote>\n<pre><code>EXP-00056: Erreur ORACLE 6401 rencontré\nORA-06401: NETCMN : désignation de lecteur non valide\nEXP-00000: Procédure d'export terminée avec erreur\n</code></pre>\n</blockquote>\n\n<p>How can I adjust the exp command to have the desired result?</p>\n"},{"tags":["database","oracle","query"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13034367,"title":"Oracle select statement performance","body":"<p>i have the following select statement : </p>\n\n<blockquote>\n<pre><code>(\n  SELECT CAL_DATE,BUS_DAY\n  FROM risk_mart.vw_calendar_t5\n  WHERE type = 'RPC'\n  AND BUS_DAY BETWEEN 0 AND 1\n) CAL\n WHERE t.cal_date         = cal.cal_date\n</code></pre>\n</blockquote>\n\n<p>It selects all the dates and then filters them <code>between</code> 0 and 1 (displays only two dates e.g. '22-OCT-12','19-OCT-12').</p>\n\n<p>Now, i can re-write that manually as </p>\n\n<blockquote>\n  <p>WHERE t.cal_date in ('22-OCT-12','19-OCT-12')</p>\n</blockquote>\n\n<p>The difference is performance. The first example i get a return back within 90 seconds and the second example, i get it within 10 seconds. Why?. </p>\n\n<p>How can i improve the first statement/rewrite it? </p>\n"},{"tags":["oracle","collections","plsql"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":238,"score":3,"question_id":7569918,"title":"How can I use a collection within an Oracle SQL statement","body":"<p>I want to write an Oracle function that collects some data in multiple steps into a collection variable and use that collection data within a SELECT query like in this very simplified example:</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION TESTFUNC01 RETURN VARCHAR2 AS \n  -- INT_LIST is declared globally as \"TYPE INT_LIST IS TABLE OF INTEGER\"\n  MyList INT_LIST := INT_LIST();\n  MyName VARCHAR2(512);\nBEGIN\n  MyList.Extend(3);\n  MyList(0) := 1;\n  MyList(1) := 2;\n  MyList(2) := 3;\n\n  SELECT Name INTO MyName\n  FROM Item WHERE ItemId NOT IN MyList;\n  RETURN MyName;\nEND TESTFUNC01;\n</code></pre>\n\n<p>Unfortunately the part \"NOT IN MyList\" is no valid SQL. Is there a way to achieve this?</p>\n"},{"tags":["sql","oracle","sequence","sqlplus"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":107,"score":0,"question_id":11727523,"title":"SQLPlus Sequence - multiple tables","body":"<p>I am trying to use Dennis' solution <a href=\"http://stackoverflow.com/questions/7949343/sqlplus-auto-increment-error\">here</a> as an implementation of auto_increment in Oracle database.  Say I create one sequence as follows:</p>\n\n<pre><code>CREATE SEQUENCE auto_increment\n  START WITH 1\n  INCREMENT BY 1;\n</code></pre>\n\n<p>If I want auto_increment behavior in multiple tables, can I just use this sequence for all tables?  Or do I need a separate sequence per table?  That is, will the sequence increment for one table be affected by another table using the sequence?  </p>\n"},{"tags":["oracle","triggers"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13032536,"title":"update same table after update on itself","body":"<p>Table: SOMETABLE (apologies for upper and lower case)</p>\n\n<pre><code>COLUMN 1:      COLUMN2:     COLUMN3:\nAPPLE             NO        SAM     --&gt;ROWNUM1\nORANGE            NO        PAM     --&gt;ROWNUM2\nAPPLE             NO        NAM     --&gt;ROWNUM3\nAPPLE             NO        MAN     --&gt;ROWNUM4\nORANGE            NO        ANN     --&gt;ROWNUM5\nBANANA            NO        KHAN        --&gt;ROWNUM6\n</code></pre>\n\n<p>When I update say rownum5 <code>column2</code> from 'NO' to 'YES' I want rownum2 <code>column2</code> to change from 'NO' to 'NEVER'.  The update should be based on <code>column1</code>.</p>\n\n<p>If I change rownum3 <code>column 2</code> to 'YES' , rownum1 <code>column 2</code> and rownum 4 <code>column 2</code>should change to 'NEVER'.</p>\n\n<p>From checking online I see only a stored proc is possible to achieve this.  Can someone elaborate on that approach?</p>\n"},{"tags":["oracle","symfony1","widget"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12140144,"title":"sfWidgetFormInputCheckbox do not work properly","body":"<p>I have a problem with a sfWidgetFormInputCheckbox. It do not save false in the database when the checkbox is unchecked.</p>\n\n<p>In my schame my field is a boolean, and i don't have bug in the value displayed.</p>\n\n<p>Set the default value like this : <code>$this-&gt;setDefault('status', false);</code> don't work either.</p>\n\n<p>My widget : </p>\n\n<pre><code>$this-&gt;widgetSchema['SUSPENSION_TEMP'] = new sfWidgetFormInputCheckbox();\n$this-&gt;validatorSchema['SUSPENSION_TEMP'] = new sfValidatorBoolean(array('required' =&gt; false));\n</code></pre>\n\n<p>The default : </p>\n\n<pre><code>$this-&gt;setDefault('SUSPENSION_TEMP', false);\n</code></pre>\n\n<p>Any ideas ? </p>\n\n<p><strong>Edit:</strong></p>\n\n<p>It save 1 when the checkbox is checked. And do not change the database value when you unchecked and save. So once you checked once, value is always 1 in database (true for my code).   </p>\n\n<p><strong>Edit2:</strong></p>\n\n<p>I have two clues to add. If the field is an integer in the schema.xml, both values work, bu we got a poblem on value displayed (checkbox checked qih the 0 value). Here, he field is a boolean.</p>\n\n<p>The setter receive two kinds of value, 'on' when checkbox is checked and true when it's not. I tried to set default value to false in form, and to overide he setter. Both don't work.</p>\n\n<p>I mean the setter work, but for an unknown reason the basic seer is called right after with a wrong value.</p>\n\n<p><strong>Edit3:</strong></p>\n\n<p>Ok, i understand part of the problem. The setter is not called, when the checkbox is unchecked. I thought it was because, m code displayed a var_dump(). It was because later i copy the old version of this object in archive purpose. </p>\n\n<p>But symfony should detect that the field has been rendered and it doesn't. I don't know why. I know why in html, but obviously symfony should be able to tell himself  \"hey, i add a checkbox here\".</p>\n\n<p>Is there an elegant way o do this, or should i checked it by hand ?</p>\n"},{"tags":["java","sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13030293,"title":"Data not being saved in Database due to limited size of the field","body":"<p>There is a column <code>message</code> in the database table <code>fsr_system_log</code> for the schema <code>fsr_appl</code>. This table is supposed to store the system log message. The size of the column is 255 and the datatype is <code>varchar2</code>. The logic implemented for saving message whose size is greater than 255 characters is :</p>\n\n<pre><code>public void saveSystemLog(SystemLogRequest systemLog){\n    User user = systemLog.getUser();\n    String system = systemLog.getSystem();\n    Log log = systemLog.getSystemLog();\n\n    try {\n        initializeDelegate();\n        delegate.beginTransaction();\n\n        LogEntry[] logEntries = log.getItemArray();\n        for (LogEntry logEntry : logEntries) {\n            // Save each entry\n            ParamVector&lt;Object&gt; params = new ParamVector&lt;Object&gt;();\n\n            //Check if message is greater than 255 characters\n            String message = logEntry.getMsg();\n            notifier.debug(\"Log Message is : \" + message);\n            if(message.length()&gt;255){\n                message = message.substring(0,255);\n                notifier().debug(\"Message string greater than 255 characters : \" + message);\n            }\n            params.add(message, 255, false);\n}\n</code></pre>\n\n<p>But despite implementing the code, I face the following error :</p>\n\n<blockquote>\n  <p>Failed to save system log due to SQL error: ORA-12899: value too large for column \"FSR_APPL\". \"FSR_SYSTEM_LOG\". \"MESSAGE\" (actual: 257,\n  maximum: 255)</p>\n</blockquote>\n\n<p>A sample log being used is :</p>\n\n<pre><code>&lt;xbe:systemLogRequest xmlns:xbe=\"http://tdc.dk/fsr/common/xbean\"&gt;\n&lt;user&gt;\n    &lt;userNumber&gt;a62267&lt;/userNumber&gt;\n&lt;/user&gt;\n&lt;system&gt;Client&lt;/system&gt;\n&lt;systemLog&gt;\n    &lt;item&gt;\n        &lt;timestamp&gt;2011-10-27T17:03:08.404+02:00&lt;/timestamp&gt;\n        &lt;type&gt;Info&lt;/type&gt;\n        &lt;msg&gt;&lt;![CDATA[&lt;html&gt;&lt;center&gt;Din registrering er nu sendt&lt;br&gt;&lt;br&gt;Tak for indmeldingen&lt;/center&gt;&lt;/html&gt;]]&gt;&lt;/msg&gt;\n    &lt;/item&gt;\n    &lt;item&gt;\n        &lt;timestamp&gt;2011-10-27T17:03:13.701+02:00&lt;/timestamp&gt;\n        &lt;type&gt;Info&lt;/type&gt;\n        &lt;msg&gt;&lt;![CDATA[&lt;html&gt;&lt;center&gt;Din registrering er nu sendt&lt;br&gt;&lt;br&gt;Tak for indmeldingen&lt;/center&gt;&lt;/html&gt;]]&gt;&lt;/msg&gt;\n    &lt;/item&gt;\n    &lt;item&gt;\n        &lt;timestamp&gt;2011-10-28T12:45:47.801+02:00&lt;/timestamp&gt;\n        &lt;type&gt;Info&lt;/type&gt;\n        &lt;msg&gt;&lt;![CDATA[&lt;html&gt;&lt;center&gt;Din registrering er nu sendt&lt;br&gt;&lt;br&gt;Tak for indmeldingen&lt;/center&gt;&lt;/html&gt;]]&gt;&lt;/msg&gt;\n    &lt;/item&gt;\n    &lt;item&gt;\n        &lt;timestamp&gt;2011-10-28T12:45:57.926+02:00&lt;/timestamp&gt;\n        &lt;type&gt;Info&lt;/type&gt;\n        &lt;msg&gt;Afsluttet uden at gemme fejlregistering&lt;/msg&gt;\n    &lt;/item&gt;\n&lt;/systemLog&gt;\n&lt;/xbe:systemLogRequest&gt;\n</code></pre>\n\n<p>Please help!</p>\n\n<p><strong>Note :</strong> The error thrown is for certain system log messages only. And the actual value is always a constant 257 when this error is being thrown. </p>\n"},{"tags":["oracle","application-server","oracleforms","oraclereports"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13031543,"title":"Get Oracle application server address","body":"<p>In Oracle Forms and Reports, is there existing any function or procedure or possibility to get application server's address. </p>\n\n<p>For example:</p>\n\n<pre><code>http://hostname:portno/servlet/RWServletserver=repserver+report=ReportName+destype=cache+userid=ConnectString+desformat=htmlcss\n</code></pre>\n\n<p>And I want to get this part: <code>http://hostname:portno</code></p>\n\n<p>Or Maybe there is possibility to create link of application in other way, not by knowing address of application server?</p>\n\n<p>The link is to the Excel file which is created by report. The link in top is just an example and it is not link to the file. the path to the file is known.</p>\n"},{"tags":["oracle","data","dbms","loss"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":13029838,"title":"Database Data Loss","body":"<p>Our company has an e-commerce business, which is running via the internet and attracts sales from all over the world. All data are stored on three different servers, which together hold the complete database for the company (networked distributed over the three servers). Each server runs Oracle DBMS software and assorted other applications. Most of the data are important, i.e. loss or damage would endanger the company loss of sales due to server down-time must be avoided.</p>\n\n<ol>\n<li>What are the potential risks for data loss, each one rated with a percentage how likely it can happen?</li>\n<li>What are the strategy how to prepare for potential loss or damage such that the company can recover?</li>\n</ol>\n"},{"tags":["sql","oracle","query","count"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":101,"score":0,"question_id":13028358,"title":"Incorrect results with COUNT function?","body":"<p>I'm a beginner to SQL using ORACLE and have run into a few problems. I have a basic database with 4 tables (HOTEL,ROOM,BOOKING,GUEST) which are populated with data regarding price of rooms ext.</p>\n\n<p>I have a written query that is supposed to find the numbers and names of guests who booked rooms in the price range between 230 and 350 dollars. Also show also how many times they booked such rooms. However, it doesn't seem to be giving me the correct output and I can't figure out why. Here's the query:</p>\n\n<pre><code>SELECT GUEST.GUEST_NAME \"GUEST NAME\",GUEST.GUEST_NO \"GUEST NUMBER\", \nCOUNT(GUEST.GUEST_NO)     \"NUMBER OF TIMES BOOKED\"\nFROM ROOM, GUEST, BOOKING\nWHERE R_PRICE&gt;=260\nAND R_PRICE&lt;=350\nAND GUEST.GUEST_NO = BOOKING.GUEST_NO\nAND ROOM.HOTEL_NO = BOOKING.HOTEL_NO\nGROUP BY GUEST.GUEST_NO, GUEST.GUEST_NAME\nORDER BY \"NUMBER OF TIMES BOOKED\" ASC;\n</code></pre>\n\n<p>And the output: </p>\n\n<pre><code>Tina Duncan      G001    2\nJenny Freeman    G003    2\nMartin Ferguson  G006    3\nPaul Happy       G002    3\nSteve Kirkwood   G005    3\n</code></pre>\n\n<p>Here is sample for tables:</p>\n\n<p>ROOM: </p>\n\n<pre><code>   ROOM_NO HOTEL_NO R_TYPE\n------- -------- ------ ---------\n1       H100     S          220\n2       H100     D          230\n3       H100     F          310\n1       H200     S          260\n2       H200     D          170\n3       H200     S          250\n4       H200     F          180\n5       H200     F          295\n1       H300     D          200\n2       H300     S          420\n</code></pre>\n\n<p>BOOKING:</p>\n\n<pre><code>DATE_FROM DATE_TO   ROOM_NO\n--------- --------- -------\n15-AUG-12 17-AUG-12 1\n30-AUG-12 15-SEP-12 2\n01-AUG-12 02-AUG-12 2\n10-AUG-12 11-AUG-12 2\n01-SEP-12 15-SEP-12 3\n31-JUL-12 02-AUG-12 1\n11-JUL-12 01-AUG-12 1\n12-JUL-12 13-JUL-12 1\n14-JUL-12 15-JUL-12 1\n17-AUG-12 28-AUG-12 2\n31-JUL-12 01-SEP-12 1\n31-AUG-12 01-SEP-12 2\n31-AUG-12 15-SEP-12 4\n01-SEP-12 15-SEP-12 1\n</code></pre>\n\n<p>GUEST:</p>\n\n<pre><code>GUEST_NO G_NAME\n-------- --------------------\nG001     Tina Duncan\nG002     Paul Happy\nG003     Jenny Freeman\nG012     Dianne Kelly\nG005     Steve Kirkwood\nG006     Martin Ferguson\nG007     Vanessa Horton\nGoo8     Bianca Begg\n</code></pre>\n\n<p>The output should be:</p>\n\n<pre><code>Paul Happy       G002    2\nJenny Freeman    G003    1\nSteve Kirkwood   G005    1\nMartin Ferguson      G006    1\nDianne Kelly     G012    1\n</code></pre>\n\n<p>Hopefully I have given you enough, i'd appreciate it heaps if i could get a little help. Thanks guys! </p>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":13027708,"title":"SQL multiple columns in IN clause","body":"<p>If we need to query a table based on some set of values for a given column, we can simply use the IN clause. </p>\n\n<p>But if query need to be performed based on multiple columns, we could not use IN clause(grepped in SO threads.) </p>\n\n<p>From other SO threads, we can circumvent this problem using joins or exists clause etc. But they all work if both main table and search data are in the database. </p>\n\n<pre><code>E.g\nUser table:\nfirstName, lastName, City\n</code></pre>\n\n<p>Given a list of (firstname, lastName) tuples, I need to get the cities. </p>\n\n<p>I can think of following solutions. </p>\n\n<h1>1</h1>\n\n<p>Construct a select query like, </p>\n\n<pre><code>SELECT city from user where (firstName=x and lastName=y) or (firstName=a and lastName=b) or .....\n</code></pre>\n\n<h1>2</h1>\n\n<p>Upload all firstName, lastName values into a staging table and perform a join between 'user' table and the new staging table. </p>\n\n<p>Are there any options for solving this problem and what is the preferred of solving this problem in general?</p>\n"},{"tags":["oracle","oracle11g","left-join"],"answer_count":2,"favorite_count":4,"up_vote_count":5,"down_vote_count":0,"view_count":318,"score":5,"question_id":11366039,"title":"Oracle 11g Release 1 vs. 2 — different behavior of LEFT OUTER JOIN","body":"<p>I found this after upgrading from Oracle 11g Release 1 to Release 2.</p>\n\n<p>The best I can summarize it right now is that a <code>LEFT OUTER JOIN</code> against a query with a constant \"fake\" column and a <code>WHERE</code> clause generates different results in the two Oracle RELEASES.  In Release 2, the \"fake\" column shows up in the unmatched rows:</p>\n\n<pre><code>TEST1      TEST2\n=====      =====\nA B        A B \n- ---      - ---\n1 bar      1 hello\n2 baz\n\n&gt; SELECT * FROM test1 LEFT OUTER JOIN test2 ON test1.a = test2.a;\n  A B   A_1 B_1\n  - --- --- -----\n  1 bar   1 hello\n  2 baz   \n</code></pre>\n\n<p>So far, so good.  all of the above works the same on Rel. 1 and 2.  Now, add a 'fake' constant column X, and things work as expected:</p>\n\n<pre><code>&gt; SELECT * \n    FROM test1 \n    LEFT OUTER JOIN (SELECT test2.*, 'X' AS X \n                       FROM test2) test3 \n      ON test1.a = test3.a;\n\n  A B   A_1 B_1   X\n  - --- --- ----- -\n  1 bar   1 hello X\n  2 baz \n</code></pre>\n\n<p>Now, add a <code>WHERE</code> clause on the first table and get <strong>different</strong> results:</p>\n\n<pre><code>&gt; SELECT * \n    FROM test1 \n    LEFT OUTER JOIN (SELECT test2.*, 'X' AS X \n                       FROM  test2) test3 \n      ON test1.a = test3.a\n   WHERE test1.b LIKE 'ba%';\n\n  Release 11.1.0.7.0        Release 11.2.0.2.0    \n  ==================        ==================\n  A B   A_1 B_1   X         A B   A_1 B_1   X\n  - --- --- ----- -         - --- --- ----- -\n  1 bar   1 hello X         1 bar   1 hello X\n  2 baz                     2 baz           X  &lt;--- WHAT'S THIS?!\n</code></pre>\n\n<p>Further puzzlement: if the WHERE condition is numeric (e.g., <code>WHERE test1.a &lt; 5</code>, the results are the same!</p>\n\n<p><strong>UPDATE (to clarify my actual question):</strong>\nWhat I am doing wrong?  Is my final query somehow invoking an undefined behavior making it OK for Oracle to change what's returned from one release to the next?  If not, is this an Oracle bug?  </p>\n"},{"tags":["mysql","oracle","hql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13028628,"title":"How to Write Hibernate HQL query using join?","body":"<p>i'm new to write HQl query please help me.. Actually my SQL Query is have 5 tables i.e COURSE,SKILLSET,TIMETABLE,INTREST,USER</p>\n\n<pre><code>select(select count(*) from intrest) AS NoAttends,course.NAME,course.TYPE,user.FIRSTNAME,user.LASTNAME,skill.COURSE_CONT,skill.TEACH_EXP,tt.CLASS_DUR,tt.COURSE_DUR,tt.DATE_TIME from COURSE course inner join SKILLSET skill on skill.course_id=course.s_id inner join USER user on user.s_id=skill.user_id inner join TIMETABLE tt on tt.course_id=course.s_id where course.name IN ('course') ORDER BY course.name LIMIT 10;\n</code></pre>\n\n<p>please help me?</p>\n"},{"tags":["sql","regex","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":50,"score":6,"question_id":13027309,"title":"How to get part of the string that matched with regular expression in Oracle SQL","body":"<p>Lets say I have following string: 'product=1627;color=45;size=7' in some field of the table.\nI want to query for the color and get 45.</p>\n\n<p>With this query: </p>\n\n<pre><code>SELECT REGEXP_SUBSTR('product=1627;color=45;size=7', 'color\\=([^;]+);?') \"colorID\" \nFROM DUAL;\n</code></pre>\n\n<p>I get :</p>\n\n<pre><code>colorID  \n---------\ncolor=45;\n1 row selected\n</code></pre>\n\n<p>.</p>\n\n<p>Is it possible to get part of the matched string - 45 for this example?</p>\n"},{"tags":["oracle","jdbc","prepared-statement"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13028309,"title":"OutOfMemory error and leak detected in IBM PoolManager When Using Oracle JDBC Driver","body":"<p>Has somebody any experience with OutOfMemory issues, caused by exceeded consumption of the heap by com.ibm.ejs.j2c.PoolManager objects?</p>\n\n<p>The error is thrown from time to time, during exporting huge batch of data, in usage of prepared statement &amp; scrollable result set. </p>\n\n<p>I'm pretty sure that it is not a problem in implementation of low level method, responsible for th export... analysis memory dumps have indicated following leak suspicious, within IBM part of code:</p>\n\n<p><em>One instance of \"com.ibm.ejs.j2c.PoolManager\" loaded by \"org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader @ 0x42dbf048\" occupies 248 203 504 (58,77%) bytes. The memory is accumulated in one instance of \"com.ibm.ejs.j2c.PoolManager\" loaded by \"org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader @ 0x42dbf048\".</em></p>\n\n<p>During some Googling, I've found on the IBM side following, similar bug description, which fits to my problem and which has been reported to Oracle with a number bug # 9092263:\n<a href=\"http://www-01.ibm.com/support/docview.wss?uid=swg21421030&amp;acss=dakc\" rel=\"nofollow\">http://www-01.ibm.com/support/docview.wss?uid=swg21421030&amp;acss=dakc</a></p>\n\n<p>The question is, where I can find whether the bug is already corrected on the Oracle driver side, and in which version of the driver the correction has been introduced???</p>\n\n<p>Cheers\nDawid</p>\n"},{"tags":["oracle","oracle9i","tns","ora-12541"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":4590810,"title":"when we try to connect our programme with oracle it is giving error","body":"<p>when i try to connect our programme with oracle with this command </p>\n\n<p><code>sqlplus crbt/crbt@crbt_new</code> here crbt is the username and crbt_new is the password. </p>\n\n<p>it is giving error this </p>\n\n<pre><code>SQL*Plus: Release 9.2.0.4.0 - Production on Tue Jan 4 10:32:42 2011\nCopyright (c) 1982, 2002, Oracle Corporation.  All rights reserved.\nERROR:ORA-12541: TNS:no listener\n</code></pre>\n\n<p>So please tell me where this is wrong</p>\n"},{"tags":["oracle","user-defined-types","nested-table"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13023587,"title":"Oracle Nested Table that is populated through a query","body":"<p>Is it possible to automatically populate a nested table through a query? Maybe through a materialised view? Like f.e</p>\n\n<pre><code>CREATE OR REPLACE TYPE also_bought_type AS OBJECT (\nalso_bought_movie REF MOVIE_TYPE)\n/\nCREATE OR REPLACE TYPE also_bought_tab_type\nAS TABLE OF also_bought_type\n/\nCREATE OR REPLACE TYPE movie_type AS OBJECT (\ntitle   VARCHAR2(64),\nalso_bought    also_bought_tab_type)\n/\ncreate table movie of movie_type \nobject id system generated\n/\n</code></pre>\n\n<p>Now also_bought_type (the nested table) should be populated from a secondary table:</p>\n\n<pre><code>create or replace TYPE purchases_type as object\n(\nmovie_1 REF MOVIE_TYPE,\nmovie_2 REF MOVIE_TYPE,\npurchases number\n)\n/\ncreate table purchases of purchases_type\nobject id system generated\n/\n</code></pre>\n\n<p>using a query that checks with what other movie that movie was purchased.</p>\n"},{"tags":["oracle","oracle11g","sqlplus","ksh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":108,"score":0,"question_id":13015834,"title":"sqlplus doesn't log compilation errors in designated out file","body":"<p>Here is my shell script in which I invoke sqlplus:</p>\n\n<pre><code>#!/usr/bin/ksh\n\nsqlplus $USER/$PASSWD@$DB&lt;&lt;!!&gt;./logFile.log\n\nSELECT 'IN sqlplus' FROM dual;\n\nDECLARE tbl_xst integer;\n\nSELECT COUNT(*) INTO tbl_xst FROM SYS.ALL_TABLES\nWHERE table_name = 'SOME_TABLE'\nAND OWNER = 'SOME_OWNER';\n\nIF tbl_xst = 1 THEN\nBEGIN\n    DROP TABLE SOME_OWNER.SOME_TABLE;\nEND\nEND IF\n\nSELECT 'The end' FROM dual;\n!!\n</code></pre>\n\n<p>When I run the shell script and look into the log file logFile.log, this is what's there:</p>\n\n<pre><code>SQL*Plus: Release 10.2.0.3.0 - Production on Mon Oct 22 12:33:05 2012\n\nCopyright (c) 1982, 2006, Oracle.  All Rights Reserved.\n\n\nConnected to:\nOracle Database 11g Enterprise Edition Release 11.2.0.2.0 - 64bit Production\nWith the Partitioning, Automatic Storage Management, OLAP, Data Mining\nand Real Application Testing options\n\nSQL&gt; SQL&gt;\n'INSQLPLUS\n----------\nIN sqlplus\n\nSQL&gt; SQL&gt;   2    3    4    5    6    7    8    9   10   11   12   13   14   15  Disconnected from Oracle Database 11g Enterprise Edition Releas\ne 11.2.0.2.0 - 64bit Production\nWith the Partitioning, Automatic Storage Management, OLAP, Data Mining\nand Real Application Testing options\n</code></pre>\n\n<p>As you can see, the first logging SELECT statement ('IN sqlplus') makes it in while the second on at the bottom doesn't, i.e. the execution doesn't reach it because there is an error in between. Why isn't sqlplus writing this error message in the log file?</p>\n\n<p><strong>EDIT AFTER SOME COMMENTS:</strong>  We have established it is most likeley due to sqlplus not dumping STDERR into the specified log file, in which only STDOUT goes.  How do I format the sqlplus command to combine both streams (STDOUT and ERR) to go in the specified log file?  I suspect the <code>&lt;&lt;!!&gt;</code> is critical here.</p>\n\n<p><strong>EDIT AFTER MORE EXPERIMENTATION:</strong>  Weirdly enough, SOME error messages are getting dumped in STDOUT, i guess properly syntaxed ones which attempt to reference bad DB objects.  If there is a SQL compilation error, it apparently goes in STDERR.  What I did is inser the following line after the first SELECT above and DECLARE:</p>\n\n<pre><code>DROP TABLE FAKE_NONEXISTING;\n</code></pre>\n\n<p>The statement is legit and it compiles, yet FAKE_NONEXISTING doesn't exist and I get the following in the log file:</p>\n\n<pre><code>SQL&gt; SQL&gt; DROP TABLE FAKE_NONEXISTING\n           *\nERROR at line 1:\nORA-00942: table or view does not exist\n</code></pre>\n\n<p>However, I don't get anything in the log file for what appear to be SQL compilation errors</p>\n"},{"tags":["c#","oracle","stored-procedures","varray","paramarray"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":12954518,"title":"Invoke Oracle stored procedure with param input varying array from C#","body":"<p>I have a stored procedure in Oracle which receives an input parameter of type <code>varchar2</code> varying array. The procedure works and if you invoke it from SQL, what I need is called from C#.</p>\n\n<p>My script is this:</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE INTEGRATOR.PRC_TEST_PARAM_ARRAY  (p_nros_moviles integrator.NROMOVIL_ARRAY) IS\nBEGIN\n  FOR i IN 1..p_nros_moviles.count LOOP\n    IF p_nros_moviles(i) IS NOT NULL THEN                               \n      INSERT INTO INTEGRATOR.TEST_PARAM_ARRAY VALUES (p_nros_moviles(i));\n    END IF;\n  END LOOP;\nEND;\n/\n</code></pre>\n\n<p>My user type:</p>\n\n<pre><code>CREATE OR REPLACE TYPE INTEGRATOR.NROMOVIL_ARRAY AS\n    VARYING ARRAY(100) OF VARCHAR2(15);\n/\n</code></pre>\n\n<p>My invoke from PLSQL </p>\n\n<pre><code>DECLARE\n  v_array integrator.NROMOVIL_ARRAY;\nBEGIN\n  v_array := integrator.NROMOVIL_ARRAY('9999999', '66666666');\n\n  integrator.prc_test_param_array(v_array);\n\nEND;\n</code></pre>\n\n<p>And I try this way from c#</p>\n\n<pre><code>try\n{\n    using (OracleConnection connection = new OracleConnection())\n    {\n        connection.ConnectionString = \"Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)\" +\n                                      \"(HOST=10.10.10.10)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)\" +\n                                      \"(SID=PORTANODE)));User Id=user;Password=*****;\";\n\n        using (OracleCommand cmd = new OracleCommand(\"INTEGRATOR.PRC_TEST_PARAM_ARRAY\", connection))\n        {\n            cmd.CommandType = CommandType.StoredProcedure;\n\n            OracleParameter p = new OracleParameter();\n            p.ParameterName = \"P_NROS_MOVILES\";\n            p.OracleDbType = OracleDbType.Array;\n            p.Direction = ParameterDirection.Input;\n\n            p.UdtTypeName = \"INTEGRATOR.NROMOVIL_ARRAY\";\n            //p.CollectionType = OracleCollectionType.PLSQLAssociativeArray;\n            p.Value = new string[] { \"XXXX\", \"YYYY\" };\n            cmd.Parameters.Add(p);\n\n\n            connection.Open();\n\n            cmd.ExecuteNonQuery();\n\n            MessageBox.Show(\"Ejecutado\");\n        }\n    }\n}\ncatch (Exception ex)\n{\n    MessageBox.Show(ex.Message);\n}\n</code></pre>\n\n<p>Someone could guide me I need to change to make it work</p>\n"},{"tags":["oracle","package"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13026016,"title":"Oracle: Call stored procedure inside the package","body":"<p>I'm not much in Oracle. I use PL/SQL Developer.</p>\n\n<p>I have the following package:</p>\n\n<pre><code>create or replace package PKG1\nas\nprocedure INIT\n(\n  nRN                       in number,\n  nREC_TYPE                 in number,\n  nIDENT                    out number\n);\n</code></pre>\n\n<p>I'm not sure how to call it from PL/SQL Developer environment. I've tried this:</p>\n\n<pre><code>DECLARE\n  procId NUMBER;\n\nBEGIN\n  EXECUTE PKG1.INIT(1143824, 0, procId);\n  DBMS_OUTPUT.PUT_LINE(procId);\nEND;\n</code></pre>\n\n<p>But, there's an ORA-06550 (PLS-00103) error.</p>\n\n<p>As you can see I have 2 input and 1 output parameter. I want to print out output parameter. That's all.</p>\n\n<p>Thanks in advance for help.</p>\n\n<p>Goran</p>\n"},{"tags":["sql","oracle","null","primary-key","rdbms"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2690,"score":1,"question_id":2423507,"title":"How to have a primary key with null values using empty string?","body":"<p>I have a table in which I need both the values to be primary because I am referencing this combination as foreign key in the other tables. Table definition and the data I need to put are as follows </p>\n\n<pre><code>create table T1\n(\n  sno number(10),\n  desc varchar2(10),\n  constraint T1_PK primary key(sno,desc)\n)\nDATA to put\nsno    | desc\n---------------------------\n100    | \"hundred\"\n000    | null\n120    | \"one twenty\"\n123    | \"\"   &lt;EMPTY STRING&gt;\n000    | \"\"   &lt;EMPTY STRING&gt;\n</code></pre>\n\n<p>Problem here is desc can be sometimes be null. Primary key can not be null so when I encounter a null value - I'm inserting simply \"\"  in the table. The problem here is some times desc may have empty string. \nIf I insert the about data 100,Null and 100,\"\" are two different things but I am not able to put them in the table. I don't want to put some string like 'EMPTY' if null because it may confuse the end user who is looking at the table.</p>\n\n<p>1) How can I handle the null case for desc, while having it as a primary key. I can not use Auto sequence number. \n2) How can I distinguish between null string introduced by me and one that is already there?</p>\n"},{"tags":["oracle","oracle11g","tns"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2777,"score":3,"question_id":9367135,"title":"Oracle TNS: No Listener error while tnsping for my service","body":"<p>I just Installed Oracle 11g on windows 7 64bit, and when I tried to ping using <code>tnsping</code> I faced this error <code>TNS-12541: TNS:no listener</code>.</p>\n\n<p>So, I tried to start the listener using <code>LSNRCTL&gt; start</code> also I faced this error:</p>\n\n<pre><code>TNS-12560: TNS:protocol adapter error\nTNS-00530: Protocol adapter error\n</code></pre>\n"},{"tags":["oracle","plsql","oracle9i","procedure"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13009783,"title":"Procedure and function. Return one big string","body":"<p>I writing this procedure and I have question how can I overwrite old value on new Value and return the new line with new big one string with new mails.\nProcedure split one big email which have got emails on few single mails and change domain.</p>\n\n<p><strong>Perception: I got one table with atributes example Values which have one big string with emails. I must change this emails to domain NewDomain.pl when its diffrent from aaa.pl and bbb.pl when its the same I leave this emails. example:</strong></p>\n\n<p><strong>Old Value: 'zamowienia@kicius.pl mickey.mouse@aaa.pl kimus.walus@domek.pl'</strong></p>\n\n<p><strong>and result I want update: \n**New Value:  'zamowienia@NewDomain.pl mickey.mouse@aaa.pl kimus.walus@NewDomain.pl'</strong></p>\n\n<p>First procedure:</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE changeMailAll\nAS             \nBEGIN\n       DECLARE  delim char(3); \n                cur_position INTEGER(11) DEFAULT 1;\n                r_remainder VARCHAR(250);\n                cur_string VARCHAR(1000);\n                delim_length INTEGER;\n                length_remainder INTEGER;\n                mail VARCHAR(255);\n                MAILs VARCHAR(20000);\n                v_value VARCHAR2(255);\n                v_valueNew VARCHAR2(255);\n                v_customerId VARCHAR(20);\n                c INTEGER;\n                d INTEGER;\n                positionMonkey INTEGER;\n                v_identity VARCHAR(50);\n                domena VARCHAR2(50);\n                v_loop VARCHAR(100);\n                adres VARCHAR(255);\n                **str PKT_StringFnc.t_array;**\n\n        CURSOR cursorMails IS\n             SELECT Customer_Id, Value FROM PKT_userTrue where method_id = 'E_MAIL';  \n\n\n     BEGIN\n\n               OPEN cursorMails;\n\n                   LOOP\n\n                        FETCH cursorMails INTO v_customerId, v_value;\n\n                              **str :=  PKT_StringFnc.SPLIT(v_value,' ');\n\n                         FOR i IN 1..str.COUNT LOOP\n                                 dbms_output.put_line('XXX1' || str(i));\n                              END LOOP;**          \n                   EXIT WHEN cursorMails%NOTFOUND;\n                   END LOOP;\n               CLOSE cursorMails;\nEND;\nEND;\n</code></pre>\n\n<p>End Second procedure where I split mail from first procedure</p>\n\n<pre><code>    CREATE OR REPLACE PACKAGE BODY PKT_StringFnc\nIS\n\n   FUNCTION SPLIT (p_in_string VARCHAR2, p_delim VARCHAR2) RETURN t_array \n   IS\n\n      i       number :=0;\n      pos     number :=0;\n      lv_str  varchar2(255) := p_in_string;\n      positionMonkey INTEGER;\n      domena VARCHAR2(50);\n      adres VARCHAR(255);\n      lv_str_new VARCHAR2(255);\n      aaa VARCHAR(20) := '@aaa.pl ';\n      bbb VARCHAR(30) := '@bbb.pl ';\n      result VARCHAR(1000);\n\n\n   strings t_array;\n\n   BEGIN\n\n      pos := instr(lv_str,p_delim,1,1);\n\n      WHILE ( pos != 0) LOOP\n\n         i := i + 1;\n         strings(i) := substr(lv_str,1,pos);\n         positionMonkey := INSTR(strings(i),'@');\n\n         domena := SUBSTR(strings(i), positionMonkey);\n\n         adres := RTRIM(strings(i),domena);\n\n         lv_str := substr(lv_str,pos+1,length(lv_str));\n\n         pos := instr(lv_str,p_delim,1,1);\n\n         IF pos = 0 THEN\n            strings(i+1) := lv_str;\n                ELSE\n                    strings(i+1) := lv_str_new;\n\n         END IF;\n\n          IF domena = aaa OR domena = bbb THEN\n\n             lv_str_new := REPLACE(strings(i),domena,'@NewDomain.com');\n\n           END IF; \n         DBMS_OUTPUT.PUT_LINE('lv_str_newREPLACE:'|| lv_str_new); \n\n      END LOOP;\n\n      RETURN strings;\n   END SPLIT;\n\nEND;\n/\n</code></pre>\n\n<p>When I return one big string I want update in table and where I can do it ?</p>\n\n<p>Thanks for help</p>\n\n<p>Maybe somebody can rewrite easiest procedure from two to one procedure</p>\n"},{"tags":["forms","oracle","oracle10g"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13016711,"title":"Oracle Button issue","body":"<p>Working on a oracle project. I am new to oracle forms. I am currently using 10g forms. I am successfully able to develop my first form from datablock wizard. It initially contained 10 rows. After that i tried to make a button but 10 buttons show up. All have same name and behave like a single unit but they look like 10 buttons.</p>\n\n<p><a href=\"http://postimage.org/image/breymi2pn/\" rel=\"nofollow\">http://postimage.org/image/breymi2pn/</a></p>\n\n<p>Following is the image of buttons which i am getting on form canvas:</p>\n\n<p><img src=\"http://i.stack.imgur.com/SbuvP.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","oracle","jdbc","oracle10g","odbc"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":13019194,"title":"ora 12505 Error listener refused to connect","body":"<pre><code>import java.util.*;\nimport java.io.*;\nimport java.sql.*;\npublic class Stud\n{\n    public static void main(String args[])\n    {\n        try\n        {\n            Class.forName(\"oracle.jdbc.driver.OracleDriver\");\n            System.out.println(\"Driver Registered\");\n            Connection connection =DriverManager.getConnection(\"jdbc:oracle:thin:@localhost:1521:XE\",\"bh\",\"1234\");\n            System.out.println(\"Connection created\");\n            PreparedStatement ps=connection.prepareStatement(\"insert into Student(StudName,dob,math,phy,chem,agg) values(?,?,?,?,?,?)\");\n            System.out.println(\"prepare stmt \");\n            ps.setString(1,\"name\");\n\n            ps.setString(2,\"dob\");\n            ps.setInt(3,96);\n            ps.setInt(4,96);\n            ps.setInt(5,94);\n            ps.setDouble(6,96);\n            int a=ps.executeUpdate();\n            ps.close();\n            connection.close();\n        }\n        catch(Exception ex)\n        {\n            ex.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<h2>Error</h2>\n\n<pre><code>java.sql.sql exception listner refused to connect with the following error\n  ora 12505 the listner currently does not know of sid in give connectoin descriptor\n  local host 1521\n</code></pre>\n\n<p>I'm using oracle 10 g and I have set the ojdbc14.jar in my class path.\nI'm using Java 7 and my tnsname.ora also contain (PORT = 1521))\nSo I can't understand the given error.</p>\n"},{"tags":["sql","database","oracle","query"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":52,"score":-1,"question_id":13024058,"title":"Write a query Display Dept Name , Job Name , \"count of employees in job for each dept\" & \"Count of employees in dept\"","body":"<p>I need to display the count of employees in job for each dept and count employees in dept. My desired output is like this:</p>\n\n<pre><code>DNAME                JOB                    Count(*)    Count(*)\n-----                ---                    --------    --------\nSALES                Manager                       3           5\nACCOUNTING           SALESMAN                      4           2\n</code></pre>\n\n<p>How can I do this? Can I use a sub query?</p>\n"},{"tags":["sql","oracle","oracle9i"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13023625,"title":"Oracle - PLS-00103: Encountered the symbol \"END\" when try to create JOB","body":"<p>i have a problem here,\ni already have a Stored Procedure called \"SP_DEL_TOKEN\"\nand i wanna make a job to run the Stored procedure automatically everyday..</p>\n\n<p>this is my script to make the job</p>\n\n<pre><code>VAR jobno NUMBER;\nBEGIN\nDBMS_JOB.SUBMIT(:jobno, 'SP_DEL_TOKEN', SYSDATE, 'SYSDATE+1');\nCOMMIT;\nEND;\n/\n</code></pre>\n\n<p>but when i do that script, i encountered with this error </p>\n\n<pre><code>ERROR at line 1:\nORA-06550: line 1, column 106:\nPLS-00103: Encountered the symbol \"END\" when expecting one of the following:\n:= . ( @ % ;\nThe symbol \";\" was substituted for \"END\" to continue.\nORA-06512: at \"SYS.DBMS_JOB\", line 79\nORA-06512: at \"SYS.DBMS_JOB\", line 136\nORA-06512: at line 2\n</code></pre>\n\n<p>please help me,\nand thanks for helping me :)</p>\n"},{"tags":["php","database","oracle","oracle-apex"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13023677,"title":"How to access Oracle APEX's database using php?","body":"<p>I just found out that <code>PHP</code> and <code>APEX</code> contrast each other. What I'd like to do is manipulate the <code>Oracle</code> database using <code>PHP</code> instead of <code>APEX</code>.</p>\n\n<p>The main reason I'd want to do this is to use an Oracle database free of charge.</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":72,"score":1,"question_id":13022001,"title":"Having problems fully understanding GROUP BY","body":"<p>I'm going over some practise questions for an exam that I have coming up and I'm having a problem fully understanding group by. I see <strong>GROUP BY</strong> as the following: group the result set by one or more columns.</p>\n\n<p><strong>I have the following database schema</strong> <br /></p>\n\n<p><img src=\"http://i.stack.imgur.com/bCtpU.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/qeZZx.png\" alt=\"enter image description here\"></p>\n\n<p><strong>My query</strong></p>\n\n<pre><code>SELECT orders.customer_numb, sum(order_lines.cost_line), customers.customer_first_name, customers.customer_last_name\nFROM orders\nINNER JOIN customers ON customers.customer_numb = orders.customer_numb\nINNER JOIN order_lines ON order_lines.order_numb = orders.order_numb\nGROUP BY orders.customer_numb, order_lines.cost_line, customers.customer_first_name,     customers.customer_last_name\nORDER BY order_lines.cost_line DESC\n</code></pre>\n\n<p><strong>What I'm struggling to understand</strong> <br />\nWhy can't I simply use just <code>GROUP BY orders.cost_line</code> and group the data by cost_line? </p>\n\n<p><strong>What I'm trying to achieve</strong> <br />\nI'd like to achieve the name of the customer who has spent the most money. I just don't fully understand how to achieve this. I understand how joins work, I just can't seem to get my head around why I can't simply GROUP BY customer_numb and cost_line (with sum() used to calculate the amount spent). I seem to always get \"not a GROUP BY expression\", if someone could explain what I'm doing wrong (not just give me the answer), that would be great - I'd really appreciate that, and of course any resources that you have for using GROUP by properly.</p>\n\n<p>Sorry for the long essay and If I've missed anything I apologise. Any help would be greatly appreciated.</p>\n"},{"tags":["java","database","oracle","jdbc"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3556,"score":3,"question_id":4452742,"title":"how to you find out the Oracle database's url?","body":"<p>How do you find out the url and port for an oracle db?</p>\n\n<p>example</p>\n\n<blockquote>\n  <p>\"jdbc:oracle:thin:@host:port:dbName\",\"userName\", \"password\");</p>\n</blockquote>\n\n<p>edit: is there an sql command or log/configuration file i can look at</p>\n"},{"tags":["regex","string","oracle","plsql","replace"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13021911,"title":"Regex in Oracle PL/SQL to remove unwanted characters from a string containing a phone number","body":"<p>I need to remove the characters -, +, (, ), and space from a string in Oracle. The other characters in the string will all be numbers.\nThe function that can do this is REGEXP_REPLACE. I need help writing the correct regex.</p>\n\n<p>Examples:\nstring '23+(67 -90' should return '236790'\nstring '123456' should return '123456'</p>\n"},{"tags":["mysql","oracle","nosql","newsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":13003613,"title":"NewSQL a drop a replacement?","body":"<p>Been looking and reading into NewSQL implementations lately such as ScaleDB, Clusterix, VoltDB etc...\nAccording to this term, it is a scalable, relational database and supports the SQL language similar to MySQL/Oracle.</p>\n\n<p>Does it mean that It's a drop in replacement for MySQL/Oracle?  What about complex queries?</p>\n\n<p>It seem to be promising and advertising itself as a drop in replacement, how much of that is actually a fact.  My guess is, similar to NoSQL, this would sit in front of traditional RDBMS systems such as Oracle only to serve high transactional data but still rely on a more stable backend system to maintain/hold data?</p>\n\n<p>Insight and thoughts would be appreciated on this topic.</p>\n"},{"tags":["c#",".net","oracle","jms","weblogic"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13020990,"title":"Oracle WebLogic JMS .NET client error handling?","body":"<p>I'm wondering how to best go about error handling for an application using the Oracle JMS .NET API. A lot of the functions seem to have void return types, where I'd expect an int or bool indicating success or failure (such as connect/disconnect). Is the best way to go about determining failure just by looking for exceptions?</p>\n\n<p>Also, where is the TransportException class located within the namespaces? ContextFactory::CreateContext is throwing this whenever I try to connect to a bad address (for testing purposes) but I can't actually catch the exception because the TransportException type is nowhere to be found.  It looks like it's supposed to be in WebLogic.Messaging.Transport, but I'm not seeing it.</p>\n\n<p>Thanks very much in advance.</p>\n"},{"tags":["oracle","oracle11g","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13020692,"title":"Get SQL*Plus out in a file w/out \"SQL>\" line prefixes","body":"<p>I am trying to get SQL*Plus to write progress in its out file that should be somewhat presentable as a report, i.e. not have undesirable formatting native to the application.  In particular, I would like to get rid of SQL> that every line seems to start with.  This is my shell script that invokes sqlplus:</p>\n\n<pre><code>#!/usr/bin/ksh\n\n$ORABIN/sqlplus $ORADBUSER/$ORADBPASSWD@$ORADB&lt;&lt;!!&gt;./orclTest.log\n\nSELECT 'IN sqlplus' AS MESSAGE1 FROM dual;\n\n\nVARIABLE rowCnt number;\nBEGIN\nSELECT COUNT(*) INTO :rowCnt FROM dual;\nEND;\n/\n\nSELECT 'Dual has ' || :rowCnt || ' rows' AS MESSAGE2 FROM  dual;\n\n\n!!\n</code></pre>\n\n<p>When I run it, this is what I get in orclTest.log:</p>\n\n<pre><code>SQL*Plus: Release 10.2.0.3.0 - Production on Mon Oct 22 18:06:02 2012\n\nCopyright (c) 1982, 2006, Oracle.  All Rights Reserved.\n\n\nConnected to:\nOracle Database 11g Enterprise Edition Release 11.2.0.2.0 - 64bit Production\nWith the Partitioning, Automatic Storage Management, OLAP, Data Mining\nand Real Application Testing options\n\nSQL&gt; SQL&gt;\nMESSAGE1 \n----------\nIN sqlplus\n\nSQL&gt; SQL&gt; SQL&gt; SQL&gt;   2    3    4\nPL/SQL procedure successfully completed.\n\nSQL&gt; SQL&gt;\nMESSAGE2\n------------------------------------------------------\nDual has 1 rows\n</code></pre>\n\n<p>Any way to tell sqlplus not to give me its standard formatting, like the header and prefixes and only output:</p>\n\n<pre><code>MESSAGE1 \n----------\nIN sqlplus\n\n\nMESSAGE2\n------------------------------------------------------\nDual has 1 rows\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13020756,"title":"Sql query missing keyword","body":"<p>Keep getting the feedback that there is a missing keyword in my sql query.</p>\n\n<pre><code>select sum(transaction_amnt) \nfrom cs339.comm_to_cand \njoin cs339.committee_master \njoin cs339.cmte_id_to_geo \n    on cs339.committee_master.cmte_id=cs339.comm_to_cand.cmte_id \n    and cs339.committee_master.cmte_id=cs339.cmte_id_to_geo.cmte_id \nwhere cycle=1112 \n    and cmte_pty_affiliation='DEM';\n</code></pre>\n\n<p>If anyone could help me out, I'd appreciate it.</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":13020421,"title":"oracle count based on month","body":"<p>I am attempting to write Oracle SQL.</p>\n\n<p>I am looking for solution something similar. Please find below data I have </p>\n\n<pre><code>start_date      end_date        customer \n01-01-2012      31-06-2012      a \n01-01-2012      31-01-2012      b  \n01-02-2012      31-03-2012      c  \n</code></pre>\n\n<p>I want the count of customer in that date period. My result should look like below</p>\n\n<pre><code>Month   : Customer Count \nJAN-12  :  2 \nFEB-12  :  2 \nMAR-12  :  2 \nAPR-12  :  1 \nMAY-12  :  1 \nJUN-12  :  1 \n</code></pre>\n"},{"tags":["oracle","plsql","oracle11g","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13020306,"title":"Declaring, setting, and displaying a var in PL/SQL","body":"<p>I am new to PL/SQL but have plenty of other SQL experience, including Oracle (just not so much scripting).  I want to declare a numeric (integer) var, set it to a row count, and display it in a sentence-wrapped string.  The end goal of this exercise is to have a SQL*Plus script that prints the string \"There are 1 rows\".</p>\n\n<p>In SQL*Plus on Unix, I do:</p>\n\n<pre><code>SQL&gt; variable v_dCnt number;\nSQL&gt; select count(*) into :v_dCnt from dual;\n\n  COUNT(*)\n----------\n         1\n\nSQL&gt; select 'There are ' || :v_dCnt || ' rows' as MESSAGE from dual;\n\nMESSAGE \n-------------------------------------------------------\nThere are  rows\n</code></pre>\n\n<p>Note how it displays blank for <code>v_dCnt</code> rather than a value of 1</p>\n\n<p>In Rapid SQL on Win7, I do</p>\n\n<pre><code>variable v_dCnt number;\nselect count(*) into :v_dCnt from dual;\nselect 'There are ' || :v_dCnt || ' rows' from dual;\n</code></pre>\n\n<p>and get ORA-01008: not all variables bound</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13019792,"title":"Using Oracle and C#, how can I pass in an array of numbers?","body":"<p>This was my attempt:</p>\n\n<p><code>cmd.CommandType = CommandType.StoredProcedure;</code></p>\n\n<p><code>cmd.Parameters.Add(\"i_num_array_price_list\", OracleDbType.Decimal, myItems.Select(c =&gt; c.Price).ToArray(), ParameterDirection.Input);</code></p>\n\n<p>In oracle, the type is declared as:</p>\n\n<p><code>i_num_array_price_list IN num_array,</code></p>\n\n<p>and that is defined as:</p>\n\n<p><code>TYPE Num_Array IS VARRAY(10) OF NUMBER;</code></p>\n\n<p>I've tried it as OracleDbType decimal and array, neither worked. Decimal produces this error: </p>\n\n<p><code>Unable to cast object of type 'System.Decimal[]' to type 'System.IConvertible'.</code></p>\n\n<p>Any idea how I can get it to accept my array of decimal values?</p>\n"},{"tags":["oracle","blob","etl","sql-loader"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13019622,"title":"Load two tables from different databases both oracle using SQL-LOADER","body":"<p>In my job we use Python to make the ETL's. </p>\n\n<p>So everything was fine until I had to insert BLOB values. </p>\n\n<p>The logic we have is like this. We have a select from the database origin (also Oracle) and we save this data into a .csv file, then we read this file and with the help of SQLLoader we populate the table in the other database.</p>\n\n<p>I can't do this with a BLOB file because when I try to make a</p>\n\n<pre><code>select &lt;column1&gt; || ',' || &lt;column2&gt; || ',' || &lt;blob&gt; \nfrom &lt;table&gt;\n</code></pre>\n\n<p>this statement fails because I can't concatenate the BLOB value. </p>\n\n<p>So I tried making a insert line per line but it's too slow.</p>\n\n<p>There is another way I can do this? I don't know if I can make an</p>\n\n<pre><code>insert into &lt;table&gt;\nselect &lt;columns&gt;\nfrom &lt;table_origin&gt;\n</code></pre>\n\n<p>when I had two different databases. I hope you can help. Thanks for advanced.</p>\n"},{"tags":["sql","oracle","date-arithmetic"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":322,"score":0,"question_id":10315606,"title":"Oracle : break down multiple entries monthwise","body":"<p>i have data in table as below</p>\n\n<pre><code>start_date      end_date        amount\n15-01-2012      25-01-2012      100\n26-01-2012      10-02-2012      100\n11-02-2012      29-02-2012      100\n</code></pre>\n\n<p>i want these entries to be break down monthwise as below</p>\n\n<ul>\n<li>15-01 to 25-01 = 100</li>\n<li>26-01 to 31-01 = 100/((10-02-2012 - 26-01-2012) +1 ) * ((31-01-2012 - 26-01-2012) + 1) = 37.5\nso for period of 15-01-2012 to 31-01-2012 = 100 + 37.5 = 137.5</li>\n</ul>\n\n<p>for month of february amount should be</p>\n\n<ul>\n<li>01-02 to 10-02 = 100/((10-02-2012 - 26-01-2012) +1 ) * ((01-02-2012 - 10-02-2012) + 1) = 62.5</li>\n<li>11-02 to 29-02 = 100</li>\n</ul>\n\n<p>so for the february 01-02-2012 to 29-02-2012 = 62.5 + 100 = 162.5</p>\n\n<p>so that final output should be</p>\n\n<pre><code>start_date      end_date        amount\n15-01-2012   31-01-2012                  137.5\n01-02-2012   29-02-2012          162.5\n</code></pre>\n\n<p>is there any method to achieve this without using PLSQL</p>\n"},{"tags":["sql","oracle","parsing","namespaces","xmltype"],"answer_count":0,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":67,"score":3,"question_id":13018966,"title":"Parsing XML with unknown namespaces in Oracle SQL","body":"<p>I'm having trouble with Oracle SQL and XMLs.</p>\n\n<p>I'll be getting loads of clobs of well-formed XML data from an external system to parse, interpret and fill some tables with. I wrote a solution using XMLTable, which is laid out in a view on the table with the xml clob column in question and some audit info and stuff (I'd like to keep it this way).</p>\n\n<p>NAMESPACES are giving me nightmares. Apparently I can't put them in the xmlnamespaces clause, because I can never know <strong>what</strong> they are going to be. Preposterous! Delivered items of the same type could have different namespaces at different points in time. There's no finite list. Not even the default xmlns is constant.</p>\n\n<p>The best working solution I've come up with so far is a set of regexp_replace (3, to be precise), erasing all the namespaces before parsing. But performance is a colossal issue.</p>\n\n<p>Surely there's something clever I'm missing?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13018588,"title":"How do I do an insert in oracle, and get the ID of the inserted row?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3131064/get-id-of-last-inserted-record-in-oracle-db\">Get ID of last inserted record in oracle db</a>  </p>\n</blockquote>\n\n\n\n<p>I am brand new to oracle, having used SQL Server in the past. I have a stored procedure, and I am trying to do two INSERTs one after the other. The second INSERT requires the ID of the first INSERT. Could someone explain how to do it?</p>\n\n<p>I'm seeing stuff about <code>SEQUENCE</code>s and <code>nextvalue/curval</code> ?</p>\n\n<p>I guess in SQL Server I'd just declare a variable, and use <code>SCOPE_IDENTITY</code>, so I'd be looking to do that.</p>\n"},{"tags":[".net","oracle","odp.net"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":13017436,"title":"Need to deploy .net application (that queries oracle database from server) in \"oracle-less\" machine?","body":"<p>I'm a junior .net developer.I have developed a simple client application (.net3.5) which needs to gets its results from the 10g oracle database server. This application is to be deployed in 100 32-bit systems who do not have oracle installed but they have access to the server.We don't intend the users to have oracle installed in their machine. Is that possible? I followed <a href=\"http://www.splinter.com.au/using-the-new-odpnet-to-access-oracle-from-c/\" rel=\"nofollow\">http://www.splinter.com.au/using-the-new-odpnet-to-access-oracle-from-c/</a> whatever is said in this link,and it generates the version mismatch error mentioned in the bottom of the link. Does it work without having oracle client in the user's machine, cos it is working fine in my machine as it has oracle installed.Is there any other way to work around this?</p>\n\n<p>My connectiopn string is :</p>\n\n<pre><code>OracleConnection conn = new OracleConnection();\nconn.ConnectionString = \"User ID=&lt;userid&gt;;Password=*******;Data Source=&lt;data source&gt;\";\nconn.Open();\".\n</code></pre>\n\n<p>Exception generated is:</p>\n\n<pre><code>See the end of this message for details on invoking \njust-in-time (JIT) debugging instead of this dialog box.\n************** Exception Text **************\nSystem.TypeInitializationException: The type initializer for 'Oracle.DataAccess.Client.OracleConnection' threw an exception. ---&gt; Oracle.DataAccess.Client.OracleException: The provider is not compatible with the version of Oracle client\n   at Oracle.DataAccess.Client.OracleInit.Initialize()\n   at Oracle.DataAccess.Client.OracleConnection..cctor()\n   --- End of inner exception stack trace ---\n   at Oracle.DataAccess.Client.OracleConnection..ctor()\n   at WindowsFormsApplication1.frmVoiceFileMover2.cmdGetId_Click(Object sender, EventArgs e)\n   at System.Windows.Forms.Control.OnClick(EventArgs e)\n   at System.Windows.Forms.Button.OnClick(EventArgs e)\n   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)\n   at System.Windows.Forms.Control.WmMouseUp(Message&amp; m, MouseButtons button, Int32 clicks)\n   at System.Windows.Forms.Control.WndProc(Message&amp; m)\n   at System.Windows.Forms.ButtonBase.WndProc(Message&amp; m)\n   at System.Windows.Forms.Button.WndProc(Message&amp; m)\n   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message&amp; m)\n   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message&amp; m)\n   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)\n\n************** Loaded Assemblies **************\nmscorlib\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.0.30319.269 (RTMGDR.030319-2600)\n    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll\n----------------------------------------\nVoiceFileMover2\n    Assembly Version: 1.0.0.0\n    Win32 Version: 1.0.0.0\n    CodeBase: file:///C:/Program%20Files/State%20of%20Maine/VFM2Setup/VoiceFileMover2.exe\n----------------------------------------\nSystem.Windows.Forms\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.0.30319.278 built by: RTMGDR\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll\n----------------------------------------\nSystem.Drawing\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.0.30319.282 built by: RTMGDR\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll\n----------------------------------------\nSystem\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.0.30319.269 built by: RTMGDR\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll\n----------------------------------------\nOracle.DataAccess\n    Assembly Version: 2.111.6.20\n    Win32 Version: 2.111.6.20\n    CodeBase: file:///C:/Program%20Files/State%20of%20Maine/VFM2Setup/Oracle.DataAccess.DLL\n----------------------------------------\nSystem.Data\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.0.30319.237 (RTMGDR.030319-2300)\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_32/System.Data/v4.0_4.0.0.0__b77a5c561934e089/System.Data.dll\n----------------------------------------\nSystem.Core\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.0.30319.233 built by: RTMGDR\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Core/v4.0_4.0.0.0__b77a5c561934e089/System.Core.dll\n----------------------------------------\nSystem.Transactions\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_32/System.Transactions/v4.0_4.0.0.0__b77a5c561934e089/System.Transactions.dll\n----------------------------------------\nSystem.Configuration\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.0.30319.1 (RTMRel.030319-0100)\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Configuration/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll\n----------------------------------------\nSystem.Xml\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.0.30319.233 built by: RTMGDR\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll\n----------------------------------------\n</code></pre>\n\n<p>I have 2 oracle clients 10.2 and 11.2 installed in the developing machine. I referenced oracle.dataaccess.dll to my project from the 11.2 client  and then later when it was not working, i downloaded the latest release of odp.net and referenced again.When i still see this exception, I tried to work with odp.net for 10g as well but i could not find oracle.dataaccess.dll in the 10g.Is this issue because of GAC?</p>\n\n<p>I have also tried to work with ODP.net managed driver beta according to this link \"http://www.youtube.com/watch?v=I1q50HnUh_w\". </p>\n\n<p>Do i have to install oracle client in every machine. Can't i package the required dlls in the project and make it work? If instant oracle slient makes it work, how do i proceed to work with instant client. My only hope currently is to find if there is a file oracle.dataaccess.dll in 10g odp.net so that it matches the oracle version in the server, inorder to make it work. If not how can i use oracle instant client? Any help is highly appreciated.</p>\n"},{"tags":["sql","oracle","oracle10g"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":110,"score":3,"question_id":12981456,"title":"Oracle: associate a date with the earliest in a list without reuse","body":"<p>I am trying to match a request with the <em>earliest</em> response that follows it.  The UI doesn't enforce one request to one response, unfortunately.</p>\n\n<p>Requests:</p>\n\n<pre><code>ENC_ID  CONTACT EVENT_TIME\n13991333    1   08/13/2012 22:00:36\n13991333    1   08/13/2012 22:25:21\n13991333    1   08/13/2012 22:26:14\n13991333    1   08/13/2012 22:36:42\n13991333    2   08/13/2012 22:29:40\n</code></pre>\n\n<p>Responses:</p>\n\n<pre><code>ENC_ID  CONTACT EVENT_TIME\n13991333    1   08/13/2012 22:25:40\n13991333    1   08/13/2012 22:29:31\n13991333    1   08/13/2012 22:30:47\n13991333    1   08/13/2012 22:31:35\n13991333    1   08/13/2012 22:31:49\n13991333    2   08/13/2012 22:31:14\n</code></pre>\n\n<p>Desired:</p>\n\n<pre><code>ENC_ID  CONTACT REQ_EVENT_TIME  RES_EVENT_TIME\n13991333    1   08/13/2012 22:00:36 08/13/2012 22:25:40\n13991333    1   08/13/2012 22:25:21 08/13/2012 22:29:31\n13991333    1   08/13/2012 22:26:14 08/13/2012 22:30:47\n13991333    1   08/13/2012 22:36:42 \n13991333    2   08/13/2012 22:29:40 08/13/2012 22:31:14\n</code></pre>\n\n<p>Rules:</p>\n\n<ul>\n<li>if a response is associated with a request, it <strong>can't</strong> be associated with another.</li>\n<li>it's acceptable to have a request without a response, but not the reverse</li>\n</ul>\n\n<p>My query creates a Cartesian product:</p>\n\n<pre><code>SELECT  RQ.ENC_ID, RQ.CONTACT, RQ.EVENT_TIME REQ_EVENT_TIME,\n        RS.EVENT_TIME RES_EVENT_TIME\nFROM    RQ\nLEFT OUTER JOIN RS ON RQ.ENC_ID=RS.ENC_ID\n  AND RQ.CONTACT=RS.CONTACT\n  AND RS.EVENT_TIME&gt;RQ.EVENT_TIME\n</code></pre>\n\n<p>I've been experimenting with the LEAD() function, but have not be able to get it to work as desired.</p>\n"},{"tags":["asp.net","oracle","sqldatasource"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13017403,"title":"SqlDataSource select statement with DateTime format","body":"<p>I have a gridview with a SqlDataSource, I want to search by date in the database with this format: dd/mm/yy and 24 hours time format.</p>\n\n<p>This is my SqlDataSource definition</p>\n\n<pre><code>&lt;asp:SqlDataSource ID=\"SqlDataSource2\" runat=\"server\" \n    ConflictDetection=\"CompareAllValues\"\n    ConnectionString=\"&lt;%$ ConnectionStrings:OracleXexdb %&gt;\" \n    ProviderName=\"&lt;%$ ConnectionStrings:OracleXexdb.ProviderName %&gt;\"\n\n    SelectCommand=\"select sec, nu_l, date from mytable where date &gt;= to_date('@FECHAI', 'dd/mm/yy HH24:mi:ss') and fecha &lt;= to_date('@FECHAF', 'dd/mm/yy HH24:mi:ss')\"&gt;\n\n&lt;/asp:SqlDataSource&gt;\n</code></pre>\n\n<p>I add the replacements in code behind:</p>\n\n<pre><code>        string fechai = DateTime.Now.Day + \"/\" + DateTime.Now.Month + \"/\" + DateTime.Now.Year.ToString().Substring(2) + \" \" + \"0:00:00\";\n        string fechaf = DateTime.Now.Day + \"/\" + DateTime.Now.Month + \"/\" + DateTime.Now.Year.ToString().Substring(2) + \" \" + \"1:00:00\";\n\n        SqlDataSource2.SelectParameters.Add(\"FECHAI\", DbType.String,  fechai);\n        SqlDataSource2.SelectParameters.Add(\"FECHAF\", DbType.String, fechaf);\n\n        gridView1.DataSourceID = \"SqlDataSource2\";\n</code></pre>\n\n<p>This is the command I want to generate:</p>\n\n<pre><code>select sec, nu_l, date from mytable where date&gt;= to_date('11/10/12 0:00:00', 'dd/mm/yy HH24:mi:ss') and date&lt;= to_date('11/10/12 1:00:00', 'dd/mm/yy HH24:mi:ss')\n</code></pre>\n\n<p>In my database I get 150 records, but here I don't see any records, I'm using oracle</p>\n\n<p>What can I do? thanks in advance</p>\n"},{"tags":["c#","asp.net","oracle"],"answer_count":12,"favorite_count":17,"up_vote_count":43,"down_vote_count":0,"view_count":55577,"score":43,"question_id":659341,"title":"The provider is not compatible with the version of Oracle client","body":"<p>I'm trying to use the <strong>Oracle ODP.NET 11g (11.1.0.6.20) Instant Client</strong> on my ASP.net project as a <strong>Data Provider</strong> but when I run the aspx page I get a \"<em>The provider is not compatible with the version of Oracle client</em>\" error message.  Any help would be appreciated.</p>\n\n<p>I've referenced the Data Provider in Visual Studio 2005 and the code behind looks like this:</p>\n\n<pre><code>using Oracle.DataAccess.Client;\n..\n\nOracleConnection oOracleConn = new OracleConnection();\noOracleConn.ConnectionString =\n    \"Data Source=MyOracleServerName;\" +\n    \"Integrated Security=SSPI\";\noOracleConn.Open();\n\n//Do Something\n\noOracleConn.Close();\n</code></pre>\n\n<p>The error for the page looks like this:</p>\n\n<pre><code>Exception Details: Oracle.DataAccess.Client.OracleException: The provider is not compatible with the version of Oracle client\n\nSource Error: \nLine 21: \nLine 22: \nLine 23:             OracleConnection oOracleConn = new OracleConnection();\nLine 24:             oOracleConn.ConnectionString =\nLine 25:                 \"Data Source=MyOracleServerName;\" +\n\n[OracleException (0x80004005): The provider is not compatible with the version of Oracle client]\n   Oracle.DataAccess.Client.OracleInit.Initialize() +494\n   Oracle.DataAccess.Client.OracleConnection..cctor() +483\n\nStack Trace: \n[TypeInitializationException: The type initializer for 'Oracle.DataAccess.Client.OracleConnection' threw an exception.]\n   Oracle.DataAccess.Client.OracleConnection..ctor() +0\n   Boeing.IVX.Web.RoyTesting.Page_Load(Object sender, EventArgs e) in C:\\Documents and Settings\\CE218C\\Desktop\\IVX.Net\\Web\\IVX\\RoyTesting.aspx.cs:23\n   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +15\n   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +33\n   System.Web.UI.Control.OnLoad(EventArgs e) +99\n   System.Web.UI.Control.LoadRecursive() +47\n   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1436\n</code></pre>\n"},{"tags":["java","performance","oracle","stored-procedures"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13015991,"title":"Processing a text file from PL/SQL vs Java","body":"<p>I need to implement a store procedure in an Oracle database that will do the following:</p>\n\n<ul>\n<li>Read an external file that needs to be processed (extract data from file and validate)</li>\n<li>Call another store procedure in the database in charge to validate/insert the data.</li>\n<li>Manage exceptions.</li>\n<li>Write to another file with the results of the operations executed.</li>\n</ul>\n\n<p>I know I can do all these things with PL/SQL or Java (store procedure), but which will be more efficient/faster or better? most of the operations are reading/writing a file, and the database operations are done in a store procedure already. </p>\n\n<p>I have read other posts about PL/SQL vs Java (like <a href=\"http://stackoverflow.com/questions/6821841/java-stored-procedure-vs-pl-sql-stored-procedure\">this</a> and <a href=\"http://www.coderanch.com/t/550834/Oracle-OAS/Native-Java-Oracle-vs-PL\" rel=\"nofollow\">this</a>) but none talks about this. </p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13015682,"title":"finding time concurrency with an oracle select","body":"<p>I have the following data in a DB table and would like to find concurrent transactions based on the start and end time.</p>\n\n<pre><code>Patient          Start Time        End Time\nJohn             08:31A            10:49A \nJim              10:14A            10:30A\nJerry            10:15A            10:28A\nAlice            10:18A            12:29P\nBobby            10:32A            10:49A\nSally            10:46A            10:55A\nJane             10:52A            11:29A\nJules            10:54A            11:40A\nAdam             10:58A            11:25A\nBen              11:00A            11:20A\nAnn              11:31A            11:56A\nChris            11:49A            11:57A\nNick             12:00P            12:21P\nDave             12:00P            12:35P\nSteve            12:23P            12:29P\n</code></pre>\n\n<p>If I want to find any overlapping times with a particular input, how would I write it?  For example say I want to find overlaps with the 10:58A-11:25A time. This needs to find potential time concurrencies.  I am looking for a count of the maximum number of concurrent overlaps. In my example for 10:58A-11:25A, I would want to see the following (count would be 5):</p>\n\n<pre><code>Patient          Start Time        End Time\nAlice            10:18A            12:29P\nJane             10:52A            11:29A\nJules            10:54A            11:40A\nAdam             10:58A            11:25A\nBen              11:00A            11:20A\n</code></pre>\n\n<p>In my second example some of the concurrent times overlap with the time I am looking for, but they are over before another range start.  So, say I am looking for 10:46A-10:55A.  I would expect a count of 4. In this example 08:31A-10:49A is dropped because it is over before 10:52A-11:29A starts. Same with 10:32A-10:49A, it was over before 10:52A-11:29A started. So, the most concurrent with the 10:46A-10:55A range would be 4, even though overall there is 6 (2 dropped).</p>\n\n<pre><code>Patient          Start Time        End Time\nAlice            10:18A            12:29P\nSally            10:46A            10:55A\nJane             10:52A            11:29A\nJules            10:54A            11:40A\n</code></pre>\n\n<p>Can this be done with a sql statement?  </p>\n"},{"tags":["oracle","constraints","drop"],"answer_count":5,"favorite_count":5,"up_vote_count":6,"down_vote_count":0,"view_count":8843,"score":6,"question_id":1690404,"title":"How to drop all user tables?","body":"<p>How can I drop all user tables in oracle?</p>\n\n<p>I have problem with constraints. When I disable all it is still no possible.</p>\n"},{"tags":["sql","oracle","oracle-sqldeveloper"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":13013156,"title":"Getting duplicate records in Oracle with CLOB attribute","body":"<p>I am getting duplicate records in my Oracle SQL Developer IDE whenever I am querying with this statement: </p>\n\n<pre><code>SELECT currency.currency_story.story_id, \n       currency.currency_story.datetimestamp,\n       currency.currency_story.headline, \n       currency.currency_story_body.body\nFROM \n       currency.currency_story INNER JOIN \n       currency.currency_story_body ON \n       currency.currency_story.story_id = currency.currency_story_body.story_id\nWHERE \n       currency.currency_story.datetimestamp &gt; '18-Oct-12' AND  \n       SUBSTR(currency.currency_story.story_id,10,4) &gt; '1825' \nORDER BY \n       currency.currency_story.datetimestamp ASC\n</code></pre>\n\n<p>So after running the bottom statement for both the tables (currency_story &amp; currency_story_body) I am getting 0 rows fetched out:</p>\n\n<pre><code>    select currency.currency_story_body.story_id\n    from currency.currency_story_body \n    group by currency.currency_story_body.story_id\n    having count(*) &gt; 1\n</code></pre>\n\n<p>Same I did for the currency_story table too and I got 0 rows fetched. Now I know that there are no duplicate records in each table. So I am guessing my JOIN is <strong>wrong</strong>? But I dont see flaw in it?</p>\n\n<p>This is my execution plan:</p>\n\n<p><img src=\"http://i.stack.imgur.com/zt3LA.jpg\" alt=\"Execution Plan\"></p>\n\n<p>My <code>currency.currency_story_body.body</code> is a <code>CLOB</code> and <strong>story_id</strong> is <strong>NOT</strong> a primary key. What should I do here?</p>\n"},{"tags":["oracle","triggers","serial","informix","esql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":261,"score":1,"question_id":8535647,"title":"Informix \"SERIAL\" to Oracle NUMBER/Sequence/Trigger in Pro*C","body":"<p>I'm trying to convert some Informix ESQL to Oracle Pro*C. In the existing Informix code the \"SERIAL\" data type was used to indicate automatically incrementing columns. According to the Oracle documentation, the Oracle Migration Workbench for Informix should be able to handle this, and it explains that it converts the \"SERIAL\" data type into a \"NUMBER\" with an associated Oracle sequence and trigger. However, when trying to run the tool it simply replaces the word \"SERIAL\" with \"ERROR(SERIAL)\", so I've been trying to manually add in the trigger/sequence.</p>\n\n<p>Their example here: <a href=\"http://docs.oracle.com/html/B16022_01/ch2.htm#sthref112\" rel=\"nofollow\">http://docs.oracle.com/html/B16022_01/ch2.htm#sthref112</a> shows a way that this can be done. The sequence appears to be fairly straight forward, however when trying to create a trigger like so:</p>\n\n<pre><code>CREATE TRIGGER clerk.TR_SEQ_11_1 \nBEFORE INSERT ON clerk.JOBS FOR EACH ROW \nBEGIN \nSELECT clerk.SEQ_11_1.nextval INTO :new.JOB_ID FROM dual; END;\n</code></pre>\n\n<p>The Pro*C preprocessor picks up the \"CREATE\" keyword here, and decides that I'm not allowed to use the host variable \":new.JOB_ID\", because host variables cannot be used in conjunction with \"CREATE\" statements.</p>\n\n<p>My question is, is there some way to create a trigger that links an Oracle sequence to a particular column without using a host variable to specify the column name? The Oracle documentation seems to indicate that their migration tool should be able to cope, which means there must be some way of doing this. However all the examples of the trigger use that I have found all use the host variable which causes the preprocessor to complain.</p>\n\n<p>Thank you for your time.</p>\n\n<p>(Note: I've used the trigger/sequence/column names from the example in the Oracle documentation in the example above.)</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13014590,"title":"Rename data from Oracle Column","body":"<p>I would like to rename certain data from an oracle table. Lets assume the data in table \"Random Items\" has the form</p>\n\n<pre><code>Day      Item      Total\n\n12/3     102         12\n\n12/3     423         28 \n\n12/4     102         48\n</code></pre>\n\n<p>I would like to rename the Item number to a specific string so when I grab the data from the table the output will look like</p>\n\n<pre><code>Day      Item           Total\n\n12/3     Shoe           12\n\n12/3     Orange         28 \n\n12/4     Shoe           48\n</code></pre>\n\n<p>so Shoe = 102 and Orange = 423</p>\n\n<p>I have no writing writes to the tables. I've looked at commands such as rename, synonym and replace but they all rename a specific table or column. I would like to reverence the data in the table.</p>\n\n<p>Thank you</p>\n"},{"tags":["asp.net","oracle"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":8823,"score":1,"question_id":7957955,"title":"ORA-12154 could not resolve the connect identifier specified","body":"<p>I have switched over to the 64bit Windows 7 and created a simple web app to test the connection to the database. I am using VS 2010 - plain asp.net web project and I am running the application from within VS. </p>\n\n<p>I am getting this error:\n\"ORA-12154 could not resolve the connect identifier specified\"</p>\n\n<p>I also have a sample console application that tests the connection to the database, and it works fine.</p>\n\n<p>After googling it some, I found that a lot of posts online refered to permissions so I set my C:/Oracle permissions to read/write/execute for my ASP.net account, NETWORK SERVICE, COMPUTER NAME. That still won't solve the issue. I checked that my web app runs under my domain\\username account and that this account that the rights to read/write/execute to the C:\\Oracle folder. </p>\n\n<p>I even re-installed my VS to make sure that it is in C:\\Program Files rather than C:\\Program Files(x86)</p>\n\n<p>Any ideas to why my web app doesn't see the connection string? (while the console app does)\nNot sure what else I can do.</p>\n"},{"tags":["oracle","java-ee","certification"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":56,"score":0,"question_id":13014534,"title":"Oracle certification, JavaEE6 Web Services or Web Components","body":"<p>Ok, this might be a really stupid question, but I really need some guidance!</p>\n\n<p>A couple of months ago, I passed the Oracle Certified Professional, Java SE 6 programmer exam. Now, my boss wants me to take \"the next step\" and take the \"Enterprise exam\" to broaden my competence. I try to explain that there's no equivalent Java EE 6 Programmer exam, but rather exams for Web Services or Web Components, etc.</p>\n\n<p>I have no previous experience using the Enterprise Edition.</p>\n\n<p>So my question is, directed at those of you who've taken any Oracle JavaEE exams or just have experience using the JavaEE platform: if you, in my position, are gonna take an exam for JavaEE, which would be the most suitable to take? Web Services or Web Components? Or another one?</p>\n\n<p>I realize the question is somewhat \"fuzzy\", but what I really wanna know is, is any of the JavaEE exams more \"logical\" to take before the others? Or is it fully depending on what I wanna be able to do, both (all) exams being independent and no one of them relying on the knowledge gained from another?</p>\n\n<p>(Please don't kill me!)</p>\n"},{"tags":["sql","oracle","plsql","scheduled-tasks"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13013792,"title":"Oracle job scheduler create program to create/drop materialized view","body":"<p>I am attempting to implement a program that will invoke the Oracle job scheduler that runs the following block of code:  </p>\n\n<pre><code>create materialized view foo  \nparallel  \nnologging  \nnever refresh  \nas  \nselect * from long_running_query;\n</code></pre>\n\n<p>and subsequently  </p>\n\n<pre><code>drop materialized view foo;\n</code></pre>\n\n<p>Now the logical flow I am looking at is as follows:  </p>\n\n<p>1)  Oracle Scheduler fires every thirty (30) minutes.<br>\n2)  New materialized view is generated with arbitrary name (bar)<br>\n3)  Bar is passed into the create function as above (create mat view bar... )<br>\n4)  The view (regular not materialized) outside_view is dropped<br>\n5)  outside_view is recreated to point at the materialized view created in step 3  </p>\n\n<p>My issue is that I have not been able to get this to run within PL/SQL or as an executable.</p>\n"},{"tags":["sql","oracle","ora-00905"],"answer_count":2,"favorite_count":5,"up_vote_count":16,"down_vote_count":0,"view_count":25975,"score":16,"question_id":2250196,"title":"SELECT INTO using Oracle","body":"<p>I'm trying to do a SELECT INTO using Oracle. My query is:</p>\n\n<pre><code>SELECT * INTO new_table FROM old_table;\n</code></pre>\n\n<p>But I get the following error:</p>\n\n<pre><code>SQL Error: ORA-00905: missing keyword\n00905. 00000 -  \"missing keyword\"\n</code></pre>\n\n<p>Any ideas what's wrong?</p>\n\n<p>Thanks!</p>\n\n<hr>\n\n<p>The Standard behavior of the above should be as I originally thought:\nHowever Oracle implemented it totally differently in their own dialect of SQL</p>\n\n<p><a href=\"http://docs.oracle.com/cd/E17952_01/refman-5.0-en/insert-select.html\">Oracle Docs on Insert ... Select</a> </p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":89,"score":-3,"question_id":12873667,"title":"ALTER TABLE syntax","body":"<p>I am trying to alter a table by adding two columns to it:</p>\n\n<pre><code>ALTER TABLE Members \n      ADD annual_dues NUMBER(5,2) not null DEFAULT '52.50', \n      ADD payment_date DATE;\n</code></pre>\n\n<p>I am getting an error </p>\n\n<blockquote>\n  <p>SQL Error: ORA-30649: missing DIRECTORY keyword</p>\n</blockquote>\n\n<p>I played around with it but it is not helping. What am I a doing wrong?</p>\n"},{"tags":["c#","sql-server","oracle","sqlite","database-versioning"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":83,"score":2,"question_id":12478519,"title":"Solution to do Database migrations on Oracle / SqlServer and SqlLite","body":"<p>Im looking for a tool (preferably open-source) that can do Database migrations and versioning inside TFS, and is able to automatically deploy this during an deployment / build.</p>\n\n<h3>Background</h3>\n\n<p>We have developed an application that is frequently updated, sometimes with database changes and sometimes without. The database is running on Oracle 11g, there is also an Sqlite database in place to run tests against. We use NHibernate in combination with Fluent-NHibernate as ORM (Fluent-NHibernate for the mappings).</p>\n\n<h3>Current situation</h3>\n\n<p>At this time the database changes are done by hand. Changing the fluent mappings for database creation and writing a SQL script to alter / drop / create about anything we need.\nTo go to Test / Acceptence / Production we build against a different Config and then Copy the contents to the specific server and run the specific SQL scripts on the database.</p>\n\n<h3>Drawbacks</h3>\n\n<p>The schemaupdate from NHibernate does not allow for destructive updates, so this has to be done by hand if we are looking for an NHibernate solution.</p>\n\n<h3>Preffered situation</h3>\n\n<p>the above is a workable solution but now we have the need to version these changes so that we can go up / rollback (if this is needed) if we deploy a new version by using <a href=\"http://exortech.com/blog/2009/02/01/weekly-release-blog-11-zero-downtime-database-deployment/\" rel=\"nofollow\">Expand/Contract</a>. it is preffered that this is done automatically when we deploy a new version to the database.</p>\n\n<h3>Questions</h3>\n\n<ol>\n<li>Is there a migration tool thas uses Expand and Contract for generating schema's</li>\n<li>Will it work with Oracle 11g, SqLite and SqlServer</li>\n<li>Possibility to keep using NHibernate / Fluent-NHibernate</li>\n<li>Good ways to automatically deploy a specific build (Not a must have, are enough tools to do this but maybe good to have someting that can do all)</li>\n</ol>\n\n<h3>Investigated</h3>\n\n<ul>\n<li><a href=\"https://code.google.com/p/roundhouse/\" rel=\"nofollow\">RoundhousE</a>\n<ul>\n<li>No rollbacks.</li>\n<li>Unable to get it working with our mappings.</li>\n</ul></li>\n<li><a href=\"https://github.com/schambers/fluentmigrator\" rel=\"nofollow\">FluentMigrator</a>\n<ul>\n<li>Cannot combine with NHibernate mappings uses it's own Fluent interface.</li>\n</ul></li>\n<li><a href=\"http://www.red-gate.com/products/oracle-development/\" rel=\"nofollow\">Red-Gate Deployment Suite for Oracle</a>\n<ul>\n<li>Tool cannot be easily integrated with our environment.</li>\n</ul></li>\n</ul>\n\n<p>I hope this is clear, if not feel free to comment</p>\n"},{"tags":["oracle","triggers","sequence"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":114,"score":2,"question_id":12982875,"title":"Initialize sub sequence column values on insert. (Oracle)","body":"<p>I would like my table to sequence its \"order by\" column based on it's TEMPLATE_ID.\nI would like this to happen on insert (via an insert trigger, probably).\nFor example, if I run the following inserts, I should get the following table values.</p>\n\n<pre><code>INSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (1, 1)\nINSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (2, 1)\nINSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (3, 1)\nINSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (4, 2)\nINSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (5, 2)\nINSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (6, 2)\nINSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (7, 2)\nINSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (8, 3)\n\nID TEMPLATE_ID ORDER_BY\n 1           1        1\n 2           1        2\n 3           1        3\n 4           2        1\n 5           2        2\n 6           2        3\n 7           2        4\n 8           3        1\n</code></pre>\n\n<p>I first tried to create this trigger, but it gives me an error when I insert.</p>\n\n<pre><code>create or replace\ntrigger TEMPLATE_ATTRIBUTES_AF_INS_TRIG\n   after insert on TEMPLATE_ATTRIBUTES\n   for each row\nbegin\n    if :NEW.ORDER_BY is null then\n       update TEMPLATE_ATTRIBUTES\n       set ORDER_BY = (select coalesce(MAX(ta.ORDER_BY), 0) + 1 from TEMPLATE_ATTRIBUTES ta where ta.TEMPLATE_ID = :NEW.TEMPLATE_ID)\n       where ID = :NEW.ID;\n    end if;\nend;\n</code></pre>\n\n<p>The error it gives me is: \"table TEMPLATE_ATTRIBUTES is mutating, trigger/function may not see it\"</p>\n\n<p>So I need a different way to build this trigger.  And I also need it to \"thread safe\" so that if these two inserts occur on different sessions at the same time, then the resulting records will still get different \"ORDER_BY\" values:</p>\n\n<pre><code>INSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (1, 1)\nINSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (2, 1)\n</code></pre>\n\n<p>Edit:</p>\n\n<p>I tried the common work around for the \"table is mutating, trigger/function may not see it\" and the work around \"worked\" but it was not \"thread safe.\"  I tried to add locking but it gave me another error on insert</p>\n\n<pre><code>create or replace package state_pkg\nas \n  type ridArray is table of rowid index by binary_integer; \n  newRows ridArray;\n  empty   ridArray; \nend;\n\ncreate or replace trigger TEMPLATE_ATTRIBUTES_ORDER_BY_TB4 \nbefore insert on TEMPLATE_ATTRIBUTES\nbegin\n  state_pkg.newRows := state_pkg.empty; \nend;\n\ncreate or replace trigger TEMPLATE_ATTRIBUTES_ORDER_BY_TAF1\nafter insert on TEMPLATE_ATTRIBUTES for each row \nbegin\n  if :NEW.ORDER_BY is null then\n    state_pkg.newRows( state_pkg.newRows.count+1 ) := :new.rowid;\n  end if;\nend;\n\ncreate or replace trigger TEMPLATE_ATTRIBUTES_ORDER_BY_TAF2\nafter insert on TEMPLATE_ATTRIBUTES\ndeclare\n  v_request     number;\n  v_lockhandle varchar2(200);\nbegin\n  dbms_lock.allocate_unique('TEMPLATE_ATTRIBUTES_ORDER_BY_lock', v_lockhandle);\n  while v_request &lt;&gt; 0 loop\n    v_request:= dbms_lock.request(v_lockhandle, dbms_lock.x_mode);\n  end loop;\n  begin\n    for i in 1 .. state_pkg.newRows.count loop\n      update TEMPLATE_ATTRIBUTES\n      set ORDER_BY = (select coalesce(MAX(q.ORDER_BY), 0) + 1 from TEMPLATE_ATTRIBUTES q where q.TEMPLATE_ID = (select q2.TEMPLATE_ID from TEMPLATE_ATTRIBUTES q2 where q2.rowid = state_pkg.newRows(i)))\n      where rowid = state_pkg.newRows(i);\n    end loop;\n    v_request:= dbms_lock.release(v_lockhandle);\n  EXCEPTION WHEN OTHERS THEN \n    v_request:= dbms_lock.release(v_lockhandle);\n    raise;\n  end;\nend;\n</code></pre>\n\n<p>This gives me:</p>\n\n<p>ORA-04092: cannot COMMIT in a trigger ORA-06512: at \"SYS.DBMS_LOCK\", line 250 ORA-06512: at \"TEMPLATE_ATTRIBUTES_ORDER_BY_TAF2\", line 5 ORA-04088: error during execution of trigger 'TEMPLATE_ATTRIBUTES_ORDER_BY_TAF2' ORA-06512</p>\n\n<p>Edit 2:\nThe ORDER_BY column must be an updateable column.\nID actually uses a sequence and before insert trigger to set its values.  I thought I was simplifying my question when I included it in the insert examples, but that was incorrect.  ORDER_BY's initial value is not really related to ID, but rather to what order the records are inserted.  But ID is sequenced so you can use that if it helps.</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13013478,"title":"Get the greatest element for each group of result","body":"<p>I have the following fields: <code>user_id, app_mod, profile, update_date</code>.\nThe first three fields can be duplicated (i.e. two rows could have <code>user_id, app_mod and profile</code> equals, but different <code>update_date</code>):</p>\n\n<pre><code>user_id   app_mod  profile update_date\n560047    RI03290   22809   14-GEN-10  \n560047    RI03290   22809   18-GEN-10\n</code></pre>\n\n<p>How can I get the one row with higher <code>update_date</code> in an Oracle environment?</p>\n\n<pre><code>560047    RI03290     22809   18-GEN-10\n</code></pre>\n"},{"tags":["sql","oracle","xpath","xmltype","nodename"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":99,"score":1,"question_id":12964537,"title":"how to get node name in Oracle SQL extract() with xPath (10g)","body":"<p>Here is a XML file: </p>\n\n<pre><code>&lt;ROOT&gt;\n&lt;A&gt;\n    &lt;B&gt;2&lt;/B&gt;\n    &lt;C&gt;3&lt;/C&gt;\n    &lt;D&gt;4&lt;/D&gt;\n&lt;/A&gt; \n&lt;/ROOT&gt;\n</code></pre>\n\n<p>How to get the <strong>tag</strong> name \"C\" through xPath. The function name() does not work here in extract.</p>\n\n<p>It reports Errors: </p>\n\n<pre>\nORA-31011: XML parsing failed\nORA-19202: Error occurred in XML processing\nLPX-00601: Invalid token\n</pre>\n\n<p><code>gXmlDOM</code> is the xml string above, how to do this in SQL?</p>\n\n<pre><code>select XMLType(gXmlDOM).extract(p_xmlPath).getStringVal() from dual;\n</code></pre>\n"},{"tags":["oracle","oracle10g","report","reportbuilder","oraclereports"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":671,"score":1,"question_id":7203029,"title":"How to prevent (or limit) Oracle Reports Builder 10g crashing","body":"<p>Reports Builder version 10.1.2.0.2</p>\n\n<p>DB version: 10.2.0.4.0 (64 Bit)</p>\n\n<p>Oracle Reports Builder is crashing so regularly now that it is almost unuseable, we have to backup and save after every minor change \"just in case\" and inevitably, when anyone forgets to save it crashes immediately :-)</p>\n\n<p>In light of this, we are having Reports installed on a vanilla PC with only what is needed for Reports Builder to run in the hope that the lack of other general business PC software might prevent the crashing/restarting that we have been experiencing with Reports Builder.</p>\n\n<p>I realise the Reports Builder has never been a hugely stable development tool (even my Oracle Corp. course tutor admitted as much) but I've not seen it this bad before.</p>\n\n<p>Has anyone out there managed to get Reports Builder 10g installed with good stability? If so, do you have any tips or information as to how you got it this way? What version of Reports Builder are you using?</p>\n\n<p>Many thanks in advance...</p>\n"},{"tags":["java","oracle","ibatis"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13013531,"title":"iBatis 3, JAVA, ORACLE and Functions","body":"<p>I have a FUNCTION in ORACLE that take a LONG and returns a STRING.</p>\n\n<pre><code>FUNCTION \"GEN_NEXT_COD_NRE\" (AN_ID_MEDIC IN NUMBER)\nRETURN VARCHAR2\n</code></pre>\n\n<p>As I read, in iBatis 3 there is no  tags and then there is no IN or OUT map to be set.</p>\n\n<p>So in my DAO, I have something like this:</p>\n\n<pre><code>public String createNextNre(MedicContract contract);\n</code></pre>\n\n<p>and my map is:</p>\n\n<pre><code>&lt;select id=\"createNextNre\" statementType=\"CALLABLE\" resultType=\"string\" parameterType=\"MedicContract\"&gt;\n{? = call GEN_NEXT_COD_NRE(#{idMedic})}\n&lt;/select&gt;\n</code></pre>\n\n<p>Unfortunally, this way doens't work. This is is the ERROR:</p>\n\n<pre><code>SQLException: Missing IN or OUT parameter at index:: 2\n</code></pre>\n\n<p>Where is the problem?</p>\n"},{"tags":["oracle","logging","location"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13013466,"title":"Oracle Client on windows server log location?","body":"<p>Rather simple question, for the Standard Oracle Client install (10GR2+) </p>\n\n<p>Is there a log file that is kept on the Client side?</p>\n\n<p>If so, where does it reside?</p>\n\n<p>I can find a lot of notes on where to find them on the server itself, but not the Oracle Client side.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","oracle","jdbc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":41,"score":-1,"question_id":13012960,"title":"java jdbc insert fire a trigger in oracle db","body":"<p>suppose that</p>\n\n<ul>\n<li>i make an insert into a table using Java Jdbc </li>\n<li>the insert fire a trigger</li>\n</ul>\n\n<p>java waits that the trigger finish the execution or it continue the execution??</p>\n\n<p>(using oracle 11g)</p>\n\n<p>if it dose continue without wait, there i way to wait the end of the trigger execution?</p>\n"},{"tags":["oracle","spring","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13011414,"title":"How to copy a row of a table using spring jdbc","body":"<p>I need to copy a row except one column which is the unique key to another row using spring jdbc. I'm getting nullpointer exception even though I check for null values. Is ther any other good way to achieve this? Help me. Thanks. Please find my code below: </p>\n\n<pre><code>insert.update(new Object[] { \n                    argModel.getKey(),\n                    CommonUtils.isNotNull(argModel.getPage_Key())?argModel.getPage_Key():\"\",\n                    CommonUtils.isNotNull(argModel.getNoteBookRef())?argModel.getNoteBookRef():\"\", \n                    argModel.getBatchNum(),\n                    alStructKey,\n                    identifiedStructKey,\n                    reactionKey,\n                    argModel.getAnalysisType(),\n                    CommonUtils.isNotNull(argModel.getSubmitted_Amt())?argModel.getSubmitted_Amt():\"0\",\n                    CommonUtils.isNotNull(argModel.getEstimated_Purity())?argModel.getEstimated_Purity():\"0\",\n                    CommonUtils.isNotNull(argModel.getKey_Nmr_Exp())?argModel.getKey_Nmr_Exp():\"\",\n                    CommonUtils.isNotNull(argModel.getSolvent_Used())?argModel.getSolvent_Used():\"\",\n                    CommonUtils.isNotNull(argModel.getProbe_Used())?argModel.getProbe_Used():\"\",\n                    CommonUtils.isNotNull(argModel.getSamp_Temp())?argModel.getSamp_Temp():\"0\",\n                    CommonUtils.isNotNull(argModel.getAchiral_Purity())?new Float(argModel.getAchiral_Purity()):0.0,\n                    CommonUtils.isNotNull(argModel.getChiral_Purity())?new Float(argModel.getChiral_Purity()):0.0,\n                    CommonUtils.isNotNull(argModel.getPeak1_Amt())?argModel.getPeak1_Amt():\"0\",\n                    CommonUtils.isNotNull(argModel.getPeak2_Amt())?argModel.getPeak2_Amt():\"0\",\n                    CommonUtils.isNotNull(argModel.getRequestId())?argModel.getRequestId():\"0\",\n                    CommonUtils.isNotNull(argModel.getSubmissionComments())?argModel.getSubmissionComments():\"\",\n                    CommonUtils.isNotNull(argModel.getStatusComments())?argModel.getStatusComments():\"\",\n                    CommonUtils.isNotNull(argModel.getCcList())?argModel.getCcList():\"\",\n                    argModel.isSaveSampleForPickUp()?\"YES\":\"NO\",\n                    CommonUtils.isNotNull(argModel.getAnalyticalContact())?argModel.getAnalyticalContact():\"\",\n                    argModel.getSubmittedOn(),\n                    argModel.getAcceptedOn(),\n                    CommonUtils.isNotNull(argModel.getSubmissionStatus())?argModel.getSubmissionStatus():\"\",\n                    CommonUtils.isNotNull(argModel.getSubmitter())?argModel.getSubmitter():\"\",\n                    CommonUtils.isNotNull(argModel.getTherapetuicArea())?argModel.getTherapetuicArea():\"\",\n                    CommonUtils.isNotNull(argModel.getProjectCode())?argModel.getProjectCode():\"\",\n                    CommonUtils.isNotNull(argModel.getCro())?argModel.getCro():\"\",\n                    CommonUtils.isNotNull(argModel.getSiteCode())?argModel.getSiteCode():\"\",\n                    CommonUtils.isNotNull(argModel.getAnalysisXml())?StorageUtils.toClobObject(CommonUtils.replaceSpecialCharsinXML(argModel.getAnalysisXml())):\"\"\n                    });\n</code></pre>\n"},{"tags":["oracle","query","join","group"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13002043,"title":"For each row of one table, count entries in another table pointing to each of those rows in Oracle","body":"<p>Not sure the title explains the problem well; this is what I'm working with,</p>\n\n<p>I have the following tables,</p>\n\n<pre><code>-- table = kms_doc_ref_currnt_v\nDOC_ID    VARCHAR2(19)\nTO_DOC_ID    VARCHAR2(19)\nBRANCH_ID    NUMBER(8)\nREF_TYP_CD    VARCHAR2(20)\n\n-- table = kms_fil_nm_t\nDOC_ID    VARCHAR2(19)    PRIMARY KEY    UNIQUE\n</code></pre>\n\n<p>For example, I can get a count of all <code>kms_doc_ref_currnt_v</code> records that have a <code>to_doc_id = 59678</code>, where 59678 is one value in <code>kms_fil_nm_t</code>, with this query,</p>\n\n<pre><code>select 'doc_id 59678 has ' || count(to_doc_id) as cnt from kms_doc_ref_currnt_v where branch_id=1 and ref_typ_cd in ('CONREF', 'KBA') and to_doc_id=59678;\n</code></pre>\n\n<p><code>kms_doc_ref_currnt_v.to_doc_id</code> is a field that has one of the <code>kms_fil_nm_t.doc_id</code> values. <code>kms_doc_ref_currnt_v.doc_id</code> is also one of the values in <code>kms_fil_nm_t</code>.</p>\n\n<p>The single query I'm looking for would loop over each <code>kms_fil_nm_t.doc_id</code> and count all the rows in <code>kms_doc_ref_currnt_v</code> that have a similar <code>to_doc_id</code>. Each row returned would look like the output of the query above. Here's example output,</p>\n\n<pre><code>doc_id 1 has 32\ndoc_id 2 has 314\ndoc_id 3 has 2718\ndoc_id 4 has 42\ndoc_id 5 has 128\ndoc_id 6 has 11235\n.\n.\n.\n</code></pre>\n\n<p>Probably simple but I just can't figure it out. Thanks</p>\n"},{"tags":["oracle","plsql"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":13006913,"title":"Oracle recompiles packages on different schemas","body":"<p>I have problem with recompiling packages on different schemas. I have 2 schemas and both schemas have that same packages names. When I compile PCG_X on schema A then PCG_X on schema B decompiles (sets its state as invalid).</p>\n\n<p><strong>Any idea what can be wrong?</strong></p>\n\n<p>Details, about DB layer:</p>\n\n<p>Schema ODBA contains:</p>\n\n<ol>\n<li>PCG_DBA with grants to schema A and B.</li>\n</ol>\n\n<p>Schema A contains:</p>\n\n<ol>\n<li>PCG_X with no grants - calls PCG_Y.</li>\n<li>PCG_Y with no grants - calls ODBA.PCG_DBA.</li>\n<li>One job which calls PCG_X every 1 hour. &lt;-- was mistake, changed Y->X</li>\n<li>There is one local link: MY_LINK which is used by PCG_X and PCG_Y. &lt;-- added</li>\n</ol>\n\n<p>Schema B contains:</p>\n\n<ol>\n<li>PCG_X with no grants - calls PCG_Y.</li>\n<li>PCG_Y with no grants - calls ODBA.PCG_DBA.</li>\n<li>One job which calls PCG_X every 1 hour. &lt;-- was mistake, changed Y->X</li>\n<li>There is one local link: MY_LINK which is used by PCG_X and PCG_Y. &lt;-- added</li>\n</ol>\n\n<p>Sorry I forgot about that same named dblink on both schemas (dblinks are watching other dbs, that's why we have different schemas for almost that same packages).</p>\n\n<pre><code>    A   PCG_X   SYS DBMS_APPLICATION_INFO   PACKAGE     HARD\n    A   PCG_X   PUBLIC  DBMS_OUTPUT SYNONYM     HARD\n    A   PCG_X   A   DBMS_OUTPUT NON-EXISTENT        HARD\n    A   PCG_X   XDB DBMS_XMLDOM PACKAGE     HARD\n    A   PCG_X   PUBLIC  DUAL    SYNONYM     HARD\n    A   PCG_X   A   DUAL    NON-EXISTENT        HARD\n    A   PCG_X   A   GLOBAL_NAME NON-EXISTENT        HARD\n    A   PCG_X   PUBLIC  GLOBAL_NAME SYNONYM     HARD\n    A   PCG_X   A   PCG_X   PACKAGE     HARD\n    A   PCG_X   A   PCG_Y   PACKAGE     HARD\n    A   PCG_X   SYS STANDARD    PACKAGE     HARD\n    A   PCG_X   SYS STANDARD    PACKAGE     HARD\n    A   PCG_X   A   SYS NON-EXISTENT        HARD\n    A   PCG_X   PUBLIC  SYS NON-EXISTENT        HARD\n    A   PCG_X   A   UTL_FILE    NON-EXISTENT        HARD\n    A   PCG_X   PUBLIC  UTL_FILE    SYNONYM     HARD\n    A   PCG_X   PUBLIC  UTL_SMTP    SYNONYM     HARD\n    A   PCG_X   A   UTL_SMTP    NON-EXISTENT        HARD\n    A   PCG_X   A   XMLDOM  NON-EXISTENT        HARD\n    A   PCG_X   PUBLIC  XMLDOM  SYNONYM     HARD\n    A   PCG_X   A   XMLPARSER   NON-EXISTENT        HARD\n    A   PCG_X   PUBLIC  XMLPARSER   SYNONYM     HARD\n    B   PCG_X   SYS DBMS_APPLICATION_INFO   PACKAGE     HARD\n    B   PCG_X   B   DBMS_OUTPUT NON-EXISTENT        HARD\n    B   PCG_X   PUBLIC  DBMS_OUTPUT SYNONYM     HARD\n    B   PCG_X   XDB DBMS_XMLDOM PACKAGE     HARD\n    B   PCG_X   PUBLIC  DUAL    SYNONYM     HARD\n    B   PCG_X   B   DUAL    NON-EXISTENT        HARD\n    B   PCG_X   B   GLOBAL_NAME NON-EXISTENT        HARD\n    B   PCG_X   PUBLIC  GLOBAL_NAME SYNONYM     HARD\n    B   PCG_X   B   PCG_X   PACKAGE     HARD\n    B   PCG_X   B   PCG_Y   PACKAGE     HARD\n    B   PCG_X   SYS STANDARD    PACKAGE     HARD\n    B   PCG_X   SYS STANDARD    PACKAGE     HARD\n    B   PCG_X   PUBLIC  SYS NON-EXISTENT        HARD\n    B   PCG_X   B   SYS NON-EXISTENT        HARD\n    B   PCG_X   PUBLIC  UTL_FILE    SYNONYM     HARD\n    B   PCG_X   B   UTL_FILE    NON-EXISTENT        HARD\n    B   PCG_X   B   UTL_SMTP    NON-EXISTENT        HARD\n    B   PCG_X   PUBLIC  UTL_SMTP    SYNONYM     HARD\n    B   PCG_X   PUBLIC  XMLDOM  SYNONYM     HARD\n    B   PCG_X   B   XMLDOM  NON-EXISTENT        HARD\n    B   PCG_X   PUBLIC  XMLPARSER   SYNONYM     HARD\n    B   PCG_X   B   XMLPARSER   NON-EXISTENT        HARD\n</code></pre>\n\n<p>I filtered out tables, views ans sequences.</p>\n\n<p>Views:</p>\n\n<pre><code>    A   PCG_X   D   VC  VIEW    MY_LINK HARD\n    B   PCG_X   D   VC  VIEW    MY_LINK HARD\n</code></pre>\n\n<p>Seq:</p>\n\n<pre><code>    A   PCG_X   A   PCG_X_I SEQUENCE        HARD\n    B   PCG_X   B   PCG_X_I SEQUENCE        HARD\n</code></pre>\n\n<p>DB is: Oracle Database 10g Enterprise Edition Release 10.2.0.4.0\nIt looks for us a bit like some kind of Oracle Engine bug..</p>\n"},{"tags":["oracle","oracle10g"],"answer_count":0,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":108,"score":4,"question_id":13009933,"title":"Why is Oracle losing data during commit?","body":"<p>I have a fairly standard SQL Query as follows:</p>\n\n<pre><code>TRUNCATE TABLE TABLE_NAME;\nINSERT INTO TABLE_NAME \n(\nUPRN,\nSAO_START_NUMBER,\nSAO_START_SUFFIX,\nSAO_END_NUMBER,\nSAO_END_SUFFIX,\nSAO_TEXT,\nPAO_START_NUMBER,\nPAO_START_SUFFIX,\nPAO_END_NUMBER,\nPAO_END_SUFFIX,\nPAO_TEXT,\nSTREET_DESCRIPTOR,\nTOWN_NAME,\nPOSTCODE,\nXY_COORD,\nEASTING,\nNORTHING,\nADDRESS\n)\nSELECT  \nBASIC_LAND_AND_PROPERTY_UNIT.UPRN, \nLAND_AND_PROPERTY_IDENTIFIER.SAO_START_NUMBER AS SAO_START_NUMBER, \nLAND_AND_PROPERTY_IDENTIFIER.SAO_START_SUFFIX AS SAO_START_SUFFIX, \nLAND_AND_PROPERTY_IDENTIFIER.SAO_END_NUMBER AS SAO_END_NUMBER, \nLAND_AND_PROPERTY_IDENTIFIER.SAO_END_SUFFIX AS SAO_END_SUFFIX, \nLAND_AND_PROPERTY_IDENTIFIER.SAO_TEXT AS SAO_TEXT, \nLAND_AND_PROPERTY_IDENTIFIER.PAO_START_NUMBER AS PAO_START_NUMBER, \nLAND_AND_PROPERTY_IDENTIFIER.PAO_START_SUFFIX AS PAO_START_SUFFIX, \nLAND_AND_PROPERTY_IDENTIFIER.PAO_END_NUMBER AS PAO_END_NUMBER, \nLAND_AND_PROPERTY_IDENTIFIER.PAO_END_SUFFIX AS PAO_END_SUFFIX, \nLAND_AND_PROPERTY_IDENTIFIER.PAO_TEXT AS PAO_TEXT, \nSTREET_DESCRIPTOR.STREET_DESCRIPTOR AS STREET_DESCRIPTOR, \nSTREET_DESCRIPTOR.TOWN_NAME AS TOWN_NAME, \nLAND_AND_PROPERTY_IDENTIFIER.POSTCODE AS POSTCODE, \nBASIC_LAND_AND_PROPERTY_UNIT.GEOMETRY AS XY_COORD, \nBASIC_LAND_AND_PROPERTY_UNIT.X_COORDINATE AS EASTING, \nBASIC_LAND_AND_PROPERTY_UNIT.Y_COORDINATE AS NORTHING,\ndecode(SAO_START_NUMBER,null,null,SAO_START_NUMBER||SAO_START_SUFFIX||' ')\n||decode(SAO_END_NUMBER,null,null,SAO_END_NUMBER||SAO_END_SUFFIX||' ')\n||decode(SAO_TEXT,null,null,SAO_TEXT||' ')\n||decode(PAO_START_NUMBER,null,null,PAO_START_NUMBER||PAO_START_SUFFIX||' ')\n||decode(PAO_END_NUMBER,null,null,PAO_END_NUMBER||PAO_END_SUFFIX||' ')\n||decode(PAO_TEXT,null,null,'STREET RECORD',null,PAO_TEXT||' ')\n||decode(STREET_DESCRIPTOR,null,null,STREET_DESCRIPTOR||' ')\n||decode(POST_TOWN,null,null,POST_TOWN||' ')\n||Decode(Postcode,Null,Null,Postcode)  As Address \nFrom (Land_And_Property_Identifier\n      Inner Join Basic_Land_And_Property_Unit\n        On Land_And_Property_Identifier.Uprn = Basic_Land_And_Property_Unit.Uprn)  \nInner Join Street_Descriptor\n  On Land_And_Property_Identifier.Usrn = Street_Descriptor.Usrn\nWhere Land_And_Property_Identifier.Postally_Addressable='Y';\n</code></pre>\n\n<p>If I run this query in SQL Developer, it runs fine with 1.8million features inserted (<code>select count(*) from TABLE_NAME</code> within the session confirms this).</p>\n\n<p>But when I run the commit, the data disappears! <code>select count(*) from TABLE_NAME</code> now returns 0 results.</p>\n\n<p>We've done a number of things to try and see what's going on:</p>\n\n<ul>\n<li><p>During the <code>Truncate</code>, tablespace is freed up, and during the insert its filled again. There is no change during the commit. This implies the data is in the database.</p></li>\n<li><p>If I do the exact same query but with <code>and rownum &lt; 100</code> appended to the end, the commit works. Same with <code>1000</code>.</p></li>\n<li><p>I found this question: <a href=\"http://stackoverflow.com/questions/1867167/oracle-commit-kills\">oracle commit kills</a> and had our DBA try the \"SQL Trace\". This produced a >4GB file which when parsed with TKPROF produced a 120 page report but we don't know how to read it and there's nothing obviously wrong in there.</p></li>\n<li><p>Our error logs have nothing in them. And obviously no error during the commit itself.</p></li>\n<li><p>There's a trigger/sequence which does increment by 1.8million during the process.</p></li>\n</ul>\n\n<p>I've repeated this about 4 times now, but the result is always the same.</p>\n\n<p>So my question is simple - what's happening to the data during the commit? How can we find out? Thanks.</p>\n\n<p>Note: This has run fine in the past so I don't believe there's anything wrong with the SQL per-se.</p>\n\n<hr>\n\n<p>Edit: <strong>Issue resolved</strong> by recreating the table from scratch. Now when I insert it only takes 500 seconds compared to the previous 2000. And commiting is instantaneous; when it was broken the commit took 4000 seconds!\nI still have no idea why it happened though.</p>\n\n<hr>\n\n<p>For those asking, the Create Table syntax:</p>\n\n<pre><code>CREATE TABLE TABLE_NAME\n(\nADDRESS                                            VARCHAR2(4000),\nUPRN                                               NUMBER(12),\nSAO_START_NUMBER                                   NUMBER(4),\nSAO_START_SUFFIX                                   VARCHAR2(1),\nSAO_END_NUMBER                                     NUMBER(4),\nSAO_END_SUFFIX                                     VARCHAR2(1),\nSAO_TEXT                                           VARCHAR2(90),\nPAO_START_NUMBER                                   NUMBER(4),\nPAO_START_SUFFIX                                   VARCHAR2(1),\nPAO_END_NUMBER                                     NUMBER(4),\nPAO_END_SUFFIX                                     VARCHAR2(1),\nPAO_TEXT                                           VARCHAR2(90),\nSTREET_DESCRIPTOR                                  VARCHAR2(100),\nTOWN_NAME                                          VARCHAR2(30),\nPOSTCODE                                           VARCHAR2(8),\nXY_COORD                                           MDSYS.SDO_GEOMETRY,\nEASTING                                            NUMBER(7),\nNORTHING                                           NUMBER(7)\n)\n\nCREATE INDEX TABLE_NAME_ADD_IDX ON TABLE_NAME (ADDRESS);\n</code></pre>\n"},{"tags":["sql","oracle","database-partitioning"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":9636,"score":3,"question_id":4268139,"title":"How does one do a SQL select over multiple partitions?","body":"<p>Is there a more efficient way than:</p>\n\n<pre><code>select * from transactions partition( partition1 ) \nunion all \nselect * from transactions partition( partition2 ) \nunion all \nselect * from transactions partition( partition3 ); \n</code></pre>\n"},{"tags":["oracle","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":107,"score":3,"question_id":8034735,"title":"Spring-Hibernate app works differently in 2 different oracles DBs","body":"<p>I have a spring-hibernate application and facing a strange issue. I have 2 separate instances of same app connecting to two different oracle databases. I have a function which uses hibernate's saveOrUpdate() method to update an object in DB. Also primary key of this entity is foreign key of number of tables.</p>\n\n<p>Problem is when we update this entity's object, all the foreign references of this object in other tables are nullified in one of the DB though everything works fine in other DB. Because of this we are having lots of null foreign keys in the DB. I am not able to figure out why this is happening and what exactly needs to be done as for one db everything seems to work fine. Please help.</p>\n"},{"tags":["oracle","charts","business-intelligence"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13010294,"title":"3D graphs in OBI 11","body":"<p>I need to make a 3D line-chart in Oracle BI 11g R1\nThere are two dimensions : Country and Time, the measure is Amount Sold, how can I make a 3D chart with Country and Time on x,z Axes, and Amount Sold on y?</p>\n"},{"tags":["oracle","plsql","plsqldeveloper"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":52,"score":3,"question_id":13007921,"title":"Variable in UPDATE oracle in procedure : invalid identifier","body":"<p>I don't understand why service is complaining with \nFehler(36,11): PL/SQL: ORA-00904: \"FOUND_VP\": invalid identifier</p>\n\n<p>Variable is declared in the first begin... \nIs it not possible to use variable directly in queries ?</p>\n\n<p>when trying store following procedure :</p>\n\n<pre><code>create or replace PROCEDURE fpwl_update_vp(\n     my_zn IN NUMBER, my_verwaltung IN VARCHAR2 , my_variante IN NUMBER, my_vp IN NUMBER \n   ) IS\n\n\n\nBEGIN\n\nDECLARE\nsearch_VP IFT_INFO_LAUF.VP%TYPE;\nfound_VP IFT_INFO_LAUF.VP%TYPE;\nINFOversion number := 25;\n\n\nBEGIN -- search SYFA_VP\n\n          SELECT SYFA_VP\n          INTO found_VP\n          FROM FPWL_VP_MAPPING\n          WHERE INFO_VP=search_VP ;\n\n\n          exception\n          when no_data_found then\n           dbms_output.put_line ('Kein SYFA VP : Importiere aus SYFA');\n          --found_VP:=:=cus_info25.pa_info_data.fn_insert_syfa_vp(my_vp,25);\n\n          WHEN OTHERS THEN\n          ROLLBACK;\n          RETURN;\nEND; -- SYFA VP\n\n\n-- Update VP\nUPDATE IFT_INFO_LAUF\n SET vp = found_VP\nWHERE id_kopf IN \n  (SELECT id_kopf \n    FROM ift_info_kopf \n    WHERE fahrtnummer= my_zn  \n    AND verwaltung= my_verwaltung\n    AND variante = my_variante\n  )\n;\n\n\n  --COMMIT;\n    EXCEPTION\n    WHEN OTHERS THEN\n        ROLLBACK;\n\nEND ;\n</code></pre>\n"},{"tags":["sql","oracle","minus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13004459,"title":"Find the difference between a table in QA and Production environment(Oracle)","body":"<p>I am trying to find the difference between a table in QA and Production environment(Oracle), for which I have created a DB link and using this query.</p>\n\n<pre><code>Select column1, column2, column3 from table1--This is QA table\nminus\n(Select column1, column2, column3 from table1@prod)--This is Production table\n</code></pre>\n\n<p>column1, column2, column3 make a unique record,  the table also has columns \"created date\" and \"created by\"(may not be same for a given record in production and QA), which I want to display for records that are there in QA but not in Production. Can this be done without using a Join?</p>\n"},{"tags":["oracle","oracle10g","archive","data-warehouse"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":39,"score":1,"question_id":13007863,"title":"How to handle the archival of huge journal data in Oracle?","body":"<p>We have table in oracle which stores the jorunal details.For one of our customers, the transactions are too heavy due to which the table grows rapidly. Sometimes we even have 2.7 million records getting inserted in a single day and due to this we are having issues while accessing the data. We are therefore looking for the best way of archiving the data using data warehousing techniques or someother means which would help us archieve our objective.</p>\n\n<p>We understand that you would be looking for the following information from our side based on your previous responses to people's questions:</p>\n\n<ol>\n<li><p>What data is to be archived?\nAnswer: The whole tables data which consists of journals. Since this is a journal table, when we archive the data, the archived data should not disappear. There must be some sort of summary information created in the source table before being archived.</p></li>\n<li><p>How accessible does the archived data need to be?\nAnswer: Once the data is archived,we will require it during the time of internal/external audit which on an average would be every quarter.</p></li>\n<li><p>What are the security implications required by the data?\nAnswer: Nothing new, except that such tables shouldn't be modifiable. We must be able to query.</p></li>\n</ol>\n\n<p>We want to come up with good strategy to accomplish this objective as we are not quite sure of how to comeup with a tool for this. Even before archiving the data, since the day per day is also too huge, apart from indexing, are there any other ways to handle this effectively.</p>\n\n<p>we are using oracle 10g.</p>\n"},{"tags":["oracle","data-warehouse","partitioning","materialized-views"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1555,"score":1,"question_id":1783308,"title":"Is it possible to partially refresh a materialized view in Oracle?","body":"<p>I have a very complex Oracle view based on other materialized views, regular views as well as some tables (I can't \"fast refresh\" it). Most of the time, existing records in this view are based on a date and are \"stable\", with new record sets having new dates. </p>\n\n<p>Occasionally, I receive back-dates. I know what those are and how to deal with them if I were maintaining a table, but I would like to keep this a \"view\". A complete refresh would take around 30 minutes, but it only takes 25 seconds for any given date.</p>\n\n<p>Can I specify that only a portion of a materialized view should be updated (i.e. the affected dates)? </p>\n\n<p>Do I have to scrap the view and use a table and a procedure to populate or refresh a given date in that table?</p>\n"},{"tags":["database","oracle","ora-12541","ora-12154"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":3071,"score":1,"question_id":162762,"title":"Ora 12154 error","body":"<p>I recently deploy one web application in one of my development servers. I'm using oracle, asp.net and c#. When I run the application in the server everything works fine, but when I try to run the application outside of the server (using my pc, for example) i get this error:</p>\n\n<pre><code>ORA-12154: TNS:could not resolve the connect identifier specified\n</code></pre>\n\n<p>If i run the application in my pc with visual studio it works fine.</p>\n\n<p>Oracle is installed in Server \"A\" and the application is in server \"B\". Server \"A\" is in one domain and server \"B\" is in other domain.My pc is in the same domain has Server \"A\".</p>\n\n<p>In my pc I can find the file tnsname.ora in C:\\oracle\\product\\10.2.0\\client_1\\NETWORK\\ADMIN, but in Server \"B\" i can´t find it anywhere</p>\n\n<p>any idea?\nThanks for the help.</p>\n"},{"tags":["perl","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13004023,"title":"Passing variables into sqlplus query in perl","body":"<p>I'm having an issue here. I am trying to pass a variable into a sqlplus query, and it does not seem to be working.</p>\n\n<pre><code>    my $connect = DBI-&gt;connect('DBI:Oracle:',$dbuser,$dbpasswd);\n  my $query = \"select sum(transaction_amnt) from comm_to_cand natural join cmte_id_to_geo where cycle='?'\", $cycle;\n  my $query_handle = $connect-&gt;prepare($query);\n  $query_handle-&gt;execute();\n  $cmte_money = $query_handle-&gt;fetchrow_array();\n\n  print 'Money: ';\n  print $cmte_money;\n\n  if($cmte_money &gt; 0)\n  {\n    print 'HI';\n  }\n  else\n  {\n    print 'NOOOO';\n  }\n</code></pre>\n\n<p>I can get the query to work when I change the \"cycles\" variable from a variable to a constant, and the if statement checking will print hi, so the databases work I'm positive.</p>\n\n<p>I've scoured the internet, and I can't seem to find an answer.</p>\n"},{"tags":["sql","oracle","ant","plsql","oracle10g"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13006796,"title":"PLS-00103: Encountered the symbol / when execute from ant build","body":"<p>I have sql script which contains package spec and body and each one of them is separated\nby <code>forward slash /</code> This executes fine when I run from sql plus or Sql Developer.</p>\n\n<p>When I execute from ant build, sql scripts executes fine and build is successful.\nHowever package has errors with <code>PLS-00103: Encountered the symbol /</code>. My ant build script for sql is as follows</p>\n\n<pre><code>&lt;target name=\"sql\"&gt;        \n      &lt;sql driver=\"${sql.driver}\" url=\"${sql.url.test}\" \n      userid=\"${sql.user}\" password=\"${databasepassword}\" \n      classpathref=\"antclasspath\" keepformat=\"true\" \n      delimitertype=\"row\"&gt;\n      &lt;transaction src=\"create.sql\"/&gt;          \n      &lt;/sql&gt;\n   &lt;/target&gt;\n</code></pre>\n\n<p>How can I resolve this error? Any help is highly appreciable.</p>\n\n<p>Thanks</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13004327,"title":"How to properly output PL/SQL","body":"<p>I have two blocks of code inside a .sql file. One block is a function and another is a procedure. In the first block, I'm running a query and printing it out to the screen (I'm using DBMS_OUTPUT.PUT_LINE() ) for each row in it's own line. Then the procedure has another query which needs to be printed on the same line (I'm using DBMS_OUTPUT.PUT() ). When I use DBMS_OUTPUT.PUT() for the second block, it screws up the first block for some reason and the first block never prints.</p>\n\n<p>Here's a link to the code: <a href=\"http://pastebin.com/z29emmBJ\" rel=\"nofollow\">http://pastebin.com/z29emmBJ</a>\n(The relevant part of the code is around lines: 97-103)</p>\n\n<p>When I have DBMS_OUTPUT.PUT_LINE() being used inside of the procedure, everything displays properly, but when I have DBMS_OUTPUT.PUT() inside of the procedure, it looks like the function never gets called.</p>\n\n<p>Here's what the output looks like with PUT_LINE(): <a href=\"http://i.imgur.com/AnCv9.png\" rel=\"nofollow\">http://i.imgur.com/AnCv9.png</a>\nHere's what the output looks like with just PUT(): <a href=\"http://i.imgur.com/Jv3SV.png\" rel=\"nofollow\">http://i.imgur.com/Jv3SV.png</a></p>\n\n<p>I think it has something to do with the buffer size, but I'm not exactly sure what/why.</p>\n\n<p>Any help would be greatly appreciated!</p>\n"},{"tags":["oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13006603,"title":"JBOSSAS 7.1.1,jdbc6,Error while extracting DatabaseMetaData; nested exception is java.sql.SQLException: Closed Connection","body":"<pre><code>Error while extracting database product name - falling back to empty error codes: org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is java.sql.SQLException: Closed Connection\n    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:296) [org.springframework.jdbc-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:320) [org.springframework.jdbc-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.springframework.jdbc.support.SQLErrorCodesFactory.getErrorCodes(SQLErrorCodesFactory.java:214) [org.springframework.jdbc-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.setDataSource(SQLErrorCodeSQLExceptionTranslator.java:141) [org.springframework.jdbc-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.&lt;init&gt;(SQLErrorCodeSQLExceptionTranslator.java:104) [org.springframework.jdbc-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.mybatis.spring.MyBatisExceptionTranslator.initExceptionTranslator(MyBatisExceptionTranslator.java:84) [mybatis-spring-1.1.1.jar:1.1.1]\n    at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:70) [mybatis-spring-1.1.1.jar:1.1.1]\n    at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:365) [mybatis-spring-1.1.1.jar:1.1.1]\n    at $Proxy181.selectOne(Unknown Source)  at org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate.java:160) [mybatis-spring-1.1.1.jar:1.1.1]\n    at com.orchestrall.domains.security.repository.mybatis.AccountRepositoryMyBatis.userAuthenticate(AccountRepositoryMyBatis.java:31) [classes:]\n    at com.orchestrall.domains.security.impl.SecurityServiceImpl.userAuthenticate(SecurityServiceImpl.java:56) [classes:]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_35]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_35]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_35]\n    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_35]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319) [org.springframework.aop-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183) [org.springframework.aop-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) [org.springframework.aop-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110) [org.springframework.transaction-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) [org.springframework.aop-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) [org.springframework.aop-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at $Proxy187.userAuthenticate(Unknown Source)   at com.orchestrall.web.security.UserSecurityController.userAuthenticate(UserSecurityController.java:52) [classes:]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_35]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_35]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_35]\n    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_35]\n    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176) [org.springframework.web-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789) [org.springframework.web.servlet-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:754) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88) [org.springframework.web-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) [org.springframework.web-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]\n    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]\n    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]\n    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_35]\nCaused by: java.sql.SQLException: Closed Connection\n    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112) [ojdbc14-10.2.0.4.0.jar:Oracle JDBC Driver version - \"10.2.0.2.0\"]\n    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146) [ojdbc14-10.2.0.4.0.jar:Oracle JDBC Driver version - \"10.2.0.2.0\"]\n    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:208) [ojdbc14-10.2.0.4.0.jar:Oracle JDBC Driver version - \"10.2.0.2.0\"]\n    at oracle.jdbc.driver.PhysicalConnection.getMetaData(PhysicalConnection.java:1517) [ojdbc14-10.2.0.4.0.jar:Oracle JDBC Driver version - \"10.2.0.2.0\"]\n    at org.apache.commons.dbcp.DelegatingConnection.getMetaData(DelegatingConnection.java:345) [commons-dbcp-1.4.jar:1.4]\n    at org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.getMetaData(PoolingDataSource.java:245) [commons-dbcp-1.4.jar:1.4]\n    at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:285) [org.springframework.jdbc-3.1.2.RELEASE.jar:3.1.2.RELEASE]\n    ... 53 more\n</code></pre>\n"},{"tags":["sql","oracle","sql-server-2008","recursion","common-table-expression"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12971580,"title":"SYS_CONNECT_BY_PATH in SQL Server","body":"<p>I am working on a migration project and need to convert following Oracle query into it's SQL Server equivalent.</p>\n\n<pre><code>select SYS_CONNECT_BY_PATH (b.actionnr,'/') as FATHER, SYS_CONNECT_BY_PATH (b.actionnr,'     | ') as REFPATH, LEVEL, \n(select count(p.refactionnr) from zisjob.zj_action p where p.refactionnr=b.actionnr)\nChilds, b.* from \n( select NVL(x.ANZFiles,0) ANZFiles, act.actionnr, act.refactionnr, act.lfno, act.jobnr,     act.\"TYPE\", act.actiontype\nfrom zisjob.zj_action act, zisjob.zj_actiontype t, \n( select f.lno, count(f.filenr) as ANZFiles from zisjob.zj_file f where f.lno != f.lfno     Group by f.lno )x\nwhere act.lfno=10 and act.actiontype = t.typeid(+) and act.actionnr = x.lno(+) )\nb start with b.actionnr in \n(select b.actionnr from zisjob.zj_action b where b.lfno = 10 and b.refactionnr is    null)\nconnect by nocycle prior b.actionnr=b.refactionnr order by 1 desc, 2 asc\n</code></pre>\n\n<p>I am using CTEs to do this. So far, I've come up with following :</p>\n\n<pre><code>with h$cte as \n(\n   select\n      cast (convert(varchar,b.actionnr)+'/' as varchar(max)) as FATHER,\n      cast(convert(varchar,b.actionnr)+' | ' as varchar(max)) as REFPATH,\n      1 as LEVEL,\n      --cast (row_number() over (order by @@spid) as varchar(max)) as LEVEL,\n      (select count(p.refactionnr) from zisjob.zj_action p \n       where p.refactionnr = b.actionnr) Childs, \n      b.* \n   from\n     (select \n         isnull(x.ANZFiles, 0) ANZFiles, act.actionnr, act.refactionnr, act.lfno,  \n         act.jobnr, act.\"TYPE\", act.actiontype\n      from zisjob.zj_action act \n      left outer join zisjob.zj_actiontype t on act.actiontype = t.typeid \n      left outer join\n          (select f.lno, count(f.filenr) as ANZFiles \n           from zisjob.zj_file f\n           where f.lno != f.lfno Group by f.lno ) x on act.actionnr = x.lno\n      where act.lfno = 10) b\nwhere \n   b.actionnr in\n       (select b.actionnr from zisjob.zj_action b \n        where b.lfno = 10 and b.refactionnr is null)\n\nUNION ALL\n\nselect\n    CAST(FATHER + '/'+ b.ACTIONNR as varchar(max)) as FATHER,\n    CAST(REFPATH + '|'+b.ACTIONNR AS VARCHAR(MAX)) as REFPATH,\n    h$cte.LEVEL + 1 as LEVEL,\n    (select count(p.refactionnr) from zisjob.zj_action p  \n     where p.refactionnr = b.actionnr) Childs, \n    b.*\nfrom\n   (select isnull(x.ANZFiles, 0) ANZFiles, act.actionnr, act.refactionnr, \n           act.lfno, act.jobnr, act.\"TYPE\", act.actiontype\n    from zisjob.zj_action act \n    left outer join zisjob.zj_actiontype t on act.actiontype = t.typeid \n    left outer join\n        (select f.lno, count(f.filenr) as ANZFiles from zisjob.zj_file f\n         where f.lno != f.lfno Group by f.lno) x on act.actionnr = x.lno\n    where act.lfno = 10) b, \n    h$cte\nwhere \n    b.actionnr in\n        (select b.actionnr from zisjob.zj_action b \n         where b.lfno = 10 and b.refactionnr is null)\n    and h$cte.ACTIONNR = h$cte.REFACTIONNR\n)\nselect &lt;columns&gt; from h$cte\n</code></pre>\n\n<p>The translated query giving following errors:</p>\n\n<blockquote>\n  <p><em>Msg 467, Level 16, State 1, Line 1</em><br>\n  <em>GROUP BY, HAVING, or aggregate functions are not allowed in the recursive part of a     recursive common table expression 'h$cte'.</em></p>\n  \n  <p><em>Msg 462, Level 16, State 1, Line 1</em><br>\n  <em>Outer join is not allowed in the recursive part of a recursive common table expression 'h$cte'</em></p>\n</blockquote>\n\n<p>How can I work around this? Any help in any form is greatly appreciated. Thanks in advance.</p>\n"},{"tags":["oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":40,"score":-1,"question_id":13006369,"title":"How many triggers can be applied to a single table in Oracle?","body":"<p>i have a question about sql interview that How many triggers can be applied to a single table in Oracle? can anyone explain is this?</p>\n"},{"tags":["oracle","caching","in-memory-database","timesten","sqlfire"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":117,"score":2,"question_id":8662527,"title":"SQL support cache with fallback to a database","body":"<p>Is there any product which can be queries using JDBC (normal SQL), it sees whether all the tables in the query are in CACHED tables, and use the cache, otherwise fallback to the back-end database.</p>\n\n<p>I am aware of two products: Oracle In Memory Database (IMDB) Cache, and VMware SQLFire.</p>\n\n<p>I'm not familiar with none of them, so I want to know is it possible to query IMDB cache on non-cached tables, so it falls-back to underlying database?</p>\n\n<p>Is there any other products which support this feature?</p>\n"},{"tags":["sql","oracle","oracle11g"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":13005682,"title":"Oracle 11g Select Distinct Not Unique","body":"<p>I kinda lost with this simple query</p>\n\n<p>Below is the query with date (<strong>SERVICE_DATE</strong>):</p>\n\n<pre><code>SELECT DISTINCT JOB_ID,\n       SERVICE_DATE,\n       GRAND_TOTAL,\n       TYPE_INSERT,\n       PAYMENT_ID\nFROM   TBL_XXX\nWHERE  USER_ID = 100\n       AND PAYMENT_ID &lt;&gt; 0\nORDER  BY JOB_ID DESC;\n</code></pre>\n\n<p>And I got this result:</p>\n\n<pre><code>467 18/10/2012  16  Upload  527811\n467 18/10/2012  16  Upload  527811\n466 18/10/2012  4   Key-In  527806\n465 18/10/2012  4   Key-In  527804\n464 17/10/2012  24  Upload  527784\n464 17/10/2012  24  Upload  527784\n464 17/10/2012  24  Upload  527784\n</code></pre>\n\n<p>while this query without date (<strong>SERVICE_DATE</strong>)</p>\n\n<pre><code>SELECT DISTINCT JOB_ID,\n       GRAND_TOTAL,\n       TYPE_INSERT,\n       PAYMENT_ID\nFROM   TBL_XXX\nWHERE  USER_ID = 100\n       AND PAYMENT_ID &lt;&gt; 0\nORDER  BY JOB_ID DESC;\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>467 16  Upload  527811\n466 4   Key-In  527806\n465 4   Key-In  527804\n464 24  Upload  527784\n</code></pre>\n\n<p>what Im missing here ?</p>\n"},{"tags":["mysql","vb.net","oracle","datapump"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":12985375,"title":"Data Conversion from Oracle to MySQL","body":"<p>I am working on Data Transfer Utility which transfers data from Oracle to MySQL.</p>\n\n<p>While moving data from Oracle to MySQL, Engine selected for MySQL table is MyISAM which speedily insert data.If i change Engine type to InnoDB it took much time to insert as Innodb follows ACID rules.</p>\n\n<p>How can i achieve best performance by InnoDB engine as i also want to add Foriegn Key to table before inserting data into table,\nwith MyISAM engine this is not possible.</p>\n\n<p>i have tested below Scenario,</p>\n\n<p>With Engine type MyISAM 50 lac data moved in 2 hrs but unable to add foriegn key\nWith Engine type InnoDB 50 lac data moved in 20 hrs approx.</p>\n\n<p>Please help me to get performance with Innodb Engine type. i am using MySQl 5.1.6 version working with all default settings. </p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":98,"score":4,"question_id":12997386,"title":"'not exists' and 'not in', which one has better performance?","body":"<pre><code>select objectid\n      ,name\n      ,address\n from library_t l \n where not exists (select *\n                     from d107 d \n                    where l.objectid = d.objectid\n                   )\n\nselect objectid\n      ,name\n      ,address\n  from library_t l \n  where l.objectid not in (select objectid \n                             from d107\n                          )\n</code></pre>\n\n<p>If both objectid columns have indexs, which one is better in oracle?</p>\n"},{"tags":["oracle","table","select","count"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":6147,"score":1,"question_id":5062809,"title":"Count number of tables in Oracle","body":"<p>Like MySQL has \"SHOW TABLES\" , how do you count tables in Oracle DB. Little bit of research gave me this query</p>\n\n<pre><code>select owner, count(*) from dba_tables\n</code></pre>\n\n<p>So like MySQL has a standard command, does Oracle have one ?</p>\n"},{"tags":["xml","oracle","plsql","insert","xml-parsing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12982687,"title":"oracle plsql: how to parse XML and insert into table","body":"<p>How to load a nested xml file into database table ?</p>\n\n<pre><code>&lt;?xml version=\"1.0\" ?&gt; \n&lt;person&gt;\n   &lt;row&gt;\n       &lt;name&gt;Tom&lt;/name&gt;\n       &lt;Address&gt;\n           &lt;State&gt;California&lt;/State&gt;\n           &lt;City&gt;Los angeles&lt;/City&gt;\n       &lt;/Address&gt;\n   &lt;/row&gt;\n   &lt;row&gt;\n       &lt;name&gt;Jim&lt;/name&gt;\n       &lt;Address&gt;\n           &lt;State&gt;California&lt;/State&gt;\n           &lt;City&gt;Los angeles&lt;/City&gt;\n       &lt;/Address&gt;\n   &lt;/row&gt;\n&lt;/person&gt;       \n</code></pre>\n\n<p>In this xml, person is the table name , name is the filed name, Tom is its filed value. \nAddress is a subtable and state and city is two column inside Address. I want to insert the person row into person table, if it failed , do not insert into address table. This xml could be very big. What's the best solution to do this ? </p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":98,"score":0,"question_id":13002590,"title":"SQL \"not a valid month\"","body":"<p>I have a table in sql as follows:</p>\n\n<pre><code>CREATE TABLE Reserves(\n    sid INTEGER,\n    bid INTEGER,\n    day DATE,\n    PRIMARY KEY (sid, bid, day),\n    FOREIGN KEY (sid) REFERENCES Sailors,\n    FOREIGN KEY (bid) REFERENCES Boats\n);\n</code></pre>\n\n<p>and I'm trying to insert into it:</p>\n\n<pre><code>INSERT INTO Reserves VALUES(22, 101, '01-01-1998');\n</code></pre>\n\n<p>But I get the error: ORA-01843: not a valid month</p>\n\n<p>This is an Oracle db.  I'm not sure what's wrong with my date format.</p>\n"},{"tags":["django","oracle","orm","django-models","django-multi-db"],"answer_count":1,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":149,"score":4,"question_id":12862541,"title":"django multi db routing doesnt work with multiple schemas","body":"<p>I have django running on oracle backend. I need to use two schemas - one for a legacy DB, second one for all django related tables.</p>\n\n<p>So this is my settings.DATABASES:</p>\n\n<pre><code>APPS_DB = 'apps'\nDATABASES = {\n\n    'default' : { \n        'ENGINE': 'django.db.backends.oracle'\n        'NAME': 'django',                      \n        'USER': 'django-tables',                      \n        'PASSWORD': '****',                  \n        'HOST': 'localhost',                       \n        'PORT': '1531',                     \n    },\n\n    APPS_DB : { \n        'ENGINE': 'django.db.backends.oracle', \n        'NAME': 'django',                      \n        'USER': 'legacy-stuff',                      \n        'PASSWORD': '****',                 \n        'HOST': 'localhost',                     \n        'PORT': '1531',                      \n     },\n}\n</code></pre>\n\n<p>I also defined router:</p>\n\n<pre><code>class MyRouter(object):\n    \"\"\"A router to control all database operations on models\"\"\"\n\ndef __init__(self):\n    aux = []\n    for app in settings.INSTALLED_APPS:\n        if not app.endswith('myapp'):\n            aux.append(app)\n    self.djangoStuff = tuple(map(lambda x: x[x.rfind('.')+1:], aux))\n\ndef is_django_stuff(self, model):\n    return model._meta.app_label in self.djangoStuff\n\ndef db_for_read(self, model, **hints):\n    \"Point all django apps models to separate DB\"\n    logger.info(\"READ from \" + model._meta.app_label)\n    if self.is_django_stuff(model):\n        logger.info(\"Will be directed to default DB\")\n        return None\n    logger.info(\"Will be directed to legacy DB\")    \n    return settings.APPS_DB\n\ndef db_for_write(self, model, **hints):\n    \"Point all django apps models to separate DB\"\n    logger.info(\"WRITE\")\n    if self.is_django_stuff(model):\n        return None\n    return settings.APPS_DB\n\ndef allow_relation(self, obj1, obj2, **hints):\n    \"Allow any relation\"\n    logger.info(\"ALLOW REL\")\n    return True\n\ndef allow_syncdb(self, db, model):\n    \"Allow syncdb for all managed objects\"\n    logger.info(\"ALLOW SYNC\")\n    if db == 'default' and self.is_django_stuff(model):\n        return True\n    if db != 'default' and not self.is_django_stuff(model):\n        return True\n    return False\n</code></pre>\n\n<p>Now I have very simple model:</p>\n\n<pre><code>class Poll(models.Model):\n    question = models.CharField(max_length=200)\n    user = models.ForeignKey(User)\n    pub_date = models.DateTimeField('date published')\n</code></pre>\n\n<p>I make two syncdbs:</p>\n\n<pre><code>python manage.py syncdb\npython manage.py syndb --database apps\n</code></pre>\n\n<p>Everything goes fine.\nThen I create poll object using 'python manage.py shell'</p>\n\n<pre><code>superuser = User.objects.all()[0]\np = Poll(question=\"foo\", user = superuser, pub_date = datetime.now())\np.save()\n</code></pre>\n\n<p>And I try to retrieve user from poll:</p>\n\n<pre><code>  a = Poll.objects.all()\n  b = len(a)\n  b = a[0]\n  c = b.artist\n</code></pre>\n\n<p>I have logging enabled in router so I see that last query will be directed to correct DB:</p>\n\n<pre><code>READ from myapp\nWill be directed to apps DB\nREAD from myapp\nWill be directed to apps DB\nREAD from auth\nWill be directed to default DB\n</code></pre>\n\n<p>I can even see actual SQL statement:</p>\n\n<pre><code>(0.005) SELECT \"AUTH_USER\".\"ID\", \"AUTH_USER\".\"USERNAME\", \"AUTH_USER\".\"FIRST_NAME\",    \"AUTH_USER\".\"LAST_NAME\", \"AUTH_USER\".\"EMAIL\", \"AUTH_USER\".\"PASSWORD\", \"AUTH_USER\".\"IS_STAFF\", \"AUTH_USER\".\"IS_ACTIVE\", \"AUTH_USER\".\"IS_SUPERUSER\", \"AUTH_USER\".\"LAST_LOGIN\", \"AUTH_USER\".\"DATE_JOINED\" FROM \"AUTH_USER\" WHERE \"AUTH_USER\".\"ID\" = :arg0 ; args=(1,)\n</code></pre>\n\n<p>But I'm getting error:</p>\n\n<pre><code>  File \"&lt;console&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/fields/related.py\", line 350, in __get__\n    rel_obj = qs.get(**params)\n  File \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/query.py\", line 361, in get\n    num = len(clone)\n  File \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/query.py\", line 85, in __len__\n    self._result_cache = list(self.iterator())\n  File \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/query.py\", line 291, in iterator\n    for row in compiler.results_iter():\n  File \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/sql/compiler.py\", line 763, in results_iter\n    for rows in self.execute_sql(MULTI):\n  File \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/sql/compiler.py\", line 818, in execute_sql\n    cursor.execute(sql, params)\n  File \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/backends/util.py\", line 40, in execute\nreturn self.cursor.execute(sql, params)\n  File \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/backends/oracle/base.py\", line 675, in execute\n    return self.cursor.execute(query, self._param_generator(params))\nDatabaseError: ORA-00942: table or view does not exist\n</code></pre>\n\n<p>So my question is - what am I doing wrong?</p>\n"},{"tags":["oracle","ubuntu","oci8"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":655,"score":0,"question_id":3520661,"title":"oci8 on Ubuntu error","body":"<p>I have already installed oracle xe 10g, apache, php in ubuntu by following the ebook <a href=\"http://www.oracle.com/technetwork/topics/php/underground-php-oracle-manual-098250.html\" rel=\"nofollow\">Underground Oracle-PHP-manual</a>.  But when i run some file connection oracle-PHP using oci_connect() show error :</p>\n\n<pre><code>Warning: oci_connect() [function.oci-connect]: OCIEnvNlsCreate() failed. \nThere is something wrong with your system - \nplease check that ORACLE_HOME and LD_LIBRARY_PATH \nare set and point to the right directories   \nin /usr/local/apache/htdocs/con_oracle.php on line 2\n</code></pre>\n\n<p>HELP please !!!</p>\n"}]}
{"total":22203,"page":9,"pagesize":100,"questions":[{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13000345,"title":"varchar time to time","body":"<p>Good day all,</p>\n\n<p>How do I convert column time_code value '201834' to time in oracle sql? Haven't found much help looking on the web and playing around with it using to_date, cast, convert.</p>\n\n<p>Thanks.</p>\n"},{"tags":["oracle","entity-framework","blob","odata","dbcontext"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13000909,"title":"Inserting BLOB using OData and Oracle","body":"<p>When working with OData and Oracle i need to insert blob records in some table.\nI tried to follow example here : <a href=\"http://blogs.msdn.com/b/astoriateam/archive/2010/08/04/data-services-streaming-provider-series-implementing-a-streaming-provider-part-1.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/astoriateam/archive/2010/08/04/data-services-streaming-provider-series-implementing-a-streaming-provider-part-1.aspx</a>\nAs microsoft recomend i exclude my BLOB from data model.\nAt the end, data is sent to my service, in GetWriteStream() i write binary data to temporary file. Then in Dispose() i should insert it in database.\nBut...\nUsing DbContext, i cant do this :\nObjectStateEntry entry = \n            this.context.ObjectStateManager.GetObjectStateEntry(cachedEntity);</p>\n\n<p>converting this.context to dbcontext throw exception - DbContext cant be used because its disposed. \nI still cant understand how to do this?\nI didnt find any example in the internet where is described how to use OData with blobs and dbcontext to work with database directly.</p>\n\n<p>Using : WCF Data Services 5.1.0-rc2, Visual Studio 2012, Oracle 11.x with ODP</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":2,"view_count":75,"score":1,"question_id":12999646,"title":"SQL: Why this error when trying to create a table in SQL?","body":"<p>I am new to SQL and was trying to create a basic emp table to learn a bit. When I write the query and try to execute it, I keep getting the message \"ORA-00907: missing right parenthesis\". However I feel that I have included a pair of braces for each function. Could anyone please help me to figure out the issue and if possible could correct me if I am wrong?? </p>\n\n<p>Below is the sample </p>\n\n<pre><code>SQL&gt; create table emp\n  2  (emp id number(4),\n  3  first name varchar2(25),\n  4  last name varchar2(25),\n  5  phone number number (10),\n  6  department id number (4),\n  7  job id number (4),\n  8  salary number (6,2),\n  9  commission_pct number (4,2),\n 10  manager id number (4);\n(emp id number (4),\n        *\nERROR at line 2:\nORA-00907: missing right parenthesis\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":75,"score":4,"question_id":12956337,"title":"Define a function in an SQL Navigator query","body":"<p>I would like to extract a function from a piece of SQL-code which is used multiple times in one query. I'm looking for a functionality which is similar to the following (invented by me) syntax:</p>\n\n<pre><code>with f(x) as (return x+1)\nselect f(thing1), f(thing2), f(thing3) from things\n</code></pre>\n\n<p>thing1, thing2, thing3 are integer columns in the table \"things\" in the example. Also, imagine that f is more complicated than an add-one function.</p>\n\n<p>How do I define a function inside a query?</p>\n"},{"tags":["oracle","table"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12950212,"title":"BIN$ tables without \"recycle bin\"","body":"<p>My Oracle Database (10.2) contains tables in Form \"BIN$\". They are listed by <pre>select * from user_recyclebin</pre> but not by <pre>show recycle_bin</pre></p>\n\n<p>The command \"show parameters\" indicate \"recyclebin=on\" (it is also the defaut value in Oracle).</p>\n\n<p>More over: Oracle put a table in the recycle bin only if it is member of a cluster, isn't it? (I understand the Oracle Administator Guide so...). I indeed have dropped the corresponding tables, but I never have used any cluster in this database...</p>\n\n<p>A call to PURGE TABLE has worked: the entry disappeared of user_recyclebin. But why did I have it?</p>\n"},{"tags":["java","oracle","spring","function","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":12315804,"title":"Oracle Sql Function return type for Spring Jdbc","body":"<p>I have an sql function (no idea about sql)</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION RATELIMIT_OWN.Get_Conns_By_Login_IP_CallerId (p_yyyymm VARCHAR2, p_login VARCHAR2, p_framed_ip VARCHAR2, p_caller_id VARCHAR2 )\n    RETURN CONNECTION_RECORD_4_IPV6_TABLE PIPELINED IS\n\nTYPE        ref0 IS REF CURSOR;\ncur0        ref0;\nv_where_clause VARCHAR2(512);\n\nout_rec     CONNECTION_RECORD_4_IPV6 := connection_record_4_ipv6(NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL);\n\nBEGIN\n\n  if p_login is not NULL\n  then\n    v_where_clause := 'where login=''' || p_login || '''';\n    if p_framed_ip is not NULL\n    then\n      v_where_clause := v_where_clause || ' and framed_ip=''' || p_framed_ip || '''';\n    end if;\n    if p_caller_id is not NULL\n    then\n      v_where_clause := v_where_clause || ' and caller_id=''' || p_caller_id || '''';\n    end if;\n  else\n    v_where_clause := '';\n    if p_framed_ip is not NULL\n    then\n      v_where_clause := 'where framed_ip=''' || p_framed_ip || '''';\n      if p_caller_id is not NULL\n      then\n        v_where_clause := v_where_clause || ' and caller_id=''' || p_caller_id || '''';\n      end if;\n    else\n      if p_caller_id is not NULL\n      then\n        v_where_clause := 'where caller_id=''' || p_caller_id || '''';\n      end if;    \n    end if;\n  end if;\n\n  OPEN cur0 FOR\n    'SELECT login,acct_ts_start,acct_ts_stop,cause,duration,inb,outb,framed_ip,caller_id,called_id,nas_id,radius_type,format_ipv6_prefix(framed_ipv6_prefix),format_ipv6_prefix(delegated_ipv6_prefix) from ticket partition (TICKETS_P' || p_yyyymm || ') ' || v_where_clause;\n\n   LOOP\n   FETCH cur0 INTO out_rec.login, out_rec.acct_start, out_rec.acct_stop, out_rec.cause, out_rec.duration, out_rec.in_bytes, out_rec.out_bytes, out_rec.public_ip, out_rec.caller_id, out_rec.called_id, out_rec.nas_id, out_rec.radius_type, out_rec.framed_ipv6_prefix, out_rec.delegated_ipv6_prefix;\n   EXIT WHEN cur0%NOTFOUND;\n   PIPE ROW(out_rec);\n  END LOOP;\n  CLOSE cur0;\n\nRETURN;\nEND Get_Conns_By_Login_IP_CallerId;\n/\n</code></pre>\n\n<p>I am calling this function using Spring JDBC template</p>\n\n<pre><code> SimpleJdbcCall caller = new SimpleJdbcCall(this.jdbcTemplateMartinique).withSchemaName(\"RATELIMIT_OWN\").withFunctionName(\"Get_Conns_By_Login_IP_CallerId\").withReturnValue()\n            .declareParameters(new SqlParameter(P_YYYYMM, Types.VARCHAR))\n            .declareParameters(new SqlParameter(P_LOGIN, Types.VARCHAR))\n            .declareParameters(new SqlParameter(P_FRAMED_IP, Types.VARCHAR))\n            .declareParameters(new SqlParameter(P_CALLER_ID, Types.VARCHAR));\n\n    SearchAccountBean resultBean = null;\n\n    SqlParameterSource paramMap = new MapSqlParameterSource().addValue(P_YYYYMM, searchAccountBean.getDate(), Types.VARCHAR).addValue(P_LOGIN, searchAccountBean.getLogin(), Types.VARCHAR)\n            .addValue(P_FRAMED_IP, searchAccountBean.getIpAddress(), Types.VARCHAR).addValue(P_CALLER_ID, searchAccountBean.getCaller(), Types.VARCHAR);\n    caller.compile();\n    Object result = caller.executeFunction(Object.class, paramMap);\n</code></pre>\n\n<p>Now it's throwing invalid column type 1111.\nI debugged and found it's returning \"return of SQL type 1111\".</p>\n\n<p>I want to know how can i retrieve the values of function result in java.</p>\n"},{"tags":["oracle","mongodb","wrapper"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12999861,"title":"load external data from MongoDB into Oracle","body":"<p>There is a method to load external data into PostgreSQL via a foreign table(Foreign data wrappers).\nBy this method we can load data into PostgreSQL from oracle,mysql and others.\nThe question is that: </p>\n\n<p>Is it a same way to load external data from MongoDB into Oracle or mysql?</p>\n\n<p>Important to note:i want to load subset of the external data</p>\n"},{"tags":["sql","mysql","database","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1773,"score":2,"question_id":4706100,"title":"MySql equivalent of DECODE function in Oracle and Intersystem Cache database","body":"<p>I am trying to find an equivalent of DECODE function in MySql. It works like this:</p>\n\n<pre><code>Select Name, DECODE(Age,\n       13,'Thirteen',14,'Fourteen',15,'Fifteen',16,'Sixteen',\n       17,'Seventeen',18,'Eighteen',19,'Nineteen',\n       'Adult') AS AgeBracket\nFROM Person\n</code></pre>\n\n<p>The DECODE function will compare value of column 'Age' with 13, 14, 15.. and return appropriate string value 'Thirteen', 'Fourteen'.. and if it matches with nothing, then default value of 'Adult' will be returned.</p>\n\n<p>Any ideas which function in MySql can do this job? Thanks.</p>\n\n<p>CLARIFICATION: I agree using CASE is one way of achieving desired result, but I am rather looking for a <strong><em>function</em></strong> because of performance and other reasons.</p>\n"},{"tags":["java","oracle","stored-procedures","jdbc","utilities"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12997610,"title":"Jdbc utility for calling procedure in oracle","body":"<p>I have complex procedures in oracle package with complex in/out parameters. I will show one of the my procedures in following :</p>\n\n<pre><code> PROCEDURE Authorize(PO_ErrorCode         OUT NUMBER,\n                     PO_ErrorText         OUT VARCHAR2,\n                     PI_Count             IN NUMBER,\n                     PI_Setting           IN Setting,\n                     PI_InputData         IN InputData,\n                     PO_PreData           OUT InputData);\n</code></pre>\n\n<p>and will show two structures <code>Setting</code> and <code>InputData</code> in following:</p>\n\n<pre><code>CREATE OR REPLACE TYPE Setting as object( ProviderType  NUMBER\n                                          SwitchCode    NUMBER)\n\nCREATE OR REPLACE TYPE Input_Data Is Table Of MainInputData;\n\nCREATE OR REPLACE TYPE MainInputData as object( itemId            NUMBER,\n                                                itemValue         NVARCHAR2(150),\n                                                itemEncyptd       NUMBER,\n                                                itemEncryptKey    RAW(16));\n</code></pre>\n\n<p>with above description I have several structure contain : <code>Type</code>, <code>Array</code>, <code>Array of Type</code> and <code>Array of Primitive</code>.</p>\n\n<p>I call this function by <code>jdbc</code> and oracle driver and related classes such as <code>STRUCT</code>&amp; <code>ARRAY</code> but generated a lot of and complex code for this goal.</p>\n\n<p>My question is : Is there utility or framework for do this task by simple code?\nI know <code>spring</code> has a jdbc utility but I haven't experience with it.</p>\n"},{"tags":["oracle","amazon-web-services","elastic-beanstalk"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12903185,"title":"Is there a way to configure Elastic Beanstalk to connect to an existing Oracle DB (without BYOL)?","body":"<p>I am trying to set up Elastic Beanstalk to connect to my existing AWS-hosted Oracle DB (the on-demand kind, not the Bring-your-own-license kind), but when I use the Elastic Beanstalk Console >> Environment Details >> Edit Configuration >> Database utility, I'm not even presented with an option to connect to an <strong>existing</strong> AWS RDS. The only option they provide is to \"<strong>Create</strong> an RDS DB Instance with this environment\". Fine, I'm flexible... there's more than one way to skin a cat, but when I attempt to Create an RDS DB (Oracle) Instance (using their drop-down \"Oracle se-1\" option), I get the error message \"DB Instance class not supported for oracle db engine.\"</p>\n\n<p>Is there a workaround? I just want to give my beanstalk access to my existing Oracle RDS and am grateful for any suggestions anyone has to offer. Please explain slowly... this is a new environment for me.</p>\n"},{"tags":["php","oracle","oracle10g"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":133,"score":0,"question_id":8170103,"title":"Can't Connect Oracle 10g Schema with PHP 5","body":"<p>I accustomed to working with MySQL when creating PHP web applications.  Right now I am starting a new project that uses Oracle 10g as the database back-end and I am having trouble establishing a connection through my application code.</p>\n\n<p>I read through and followed the examples at php.net (http://us3.php.net/manual/en/function.oci-connect.php), but I get absolutely no response with the connection.  Here's my code:</p>\n\n<pre><code>echo 'test file';\n\n$conn = oci_connect([username], [password], 'localhost/[schema name]');\nif (!$conn) {\n    echo 'No connection';\n    $e = oci_error();\n    trigger_error(htmlentities($e['message'], ENT_QUOTES), E_USER_ERROR);\n}\nelse\n{\n    echo 'Connection successful!';\n}\n</code></pre>\n\n<p>When I try to view the file in a browser, the only thing that is displayed is 'test file'.</p>\n\n<p>I've verified that both the username and password are correct, and am able to log into Oracle Application expression using that u/p combo, too.</p>\n\n<p>The oracle database is hosted on the same server as the php application, so I should have all the necessary libraries, yes?</p>\n\n<p>Any help is greatly appreciated.</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12997307,"title":"Oracle installation, doesn't update registry key","body":"<p>I am trying to install Oracle 11g on Windows 7, but the trigger stopped at 59% on <code>updating registry key \"HKEY_LOCAL_MACHINE/SOFTWARE/ORACLE/KEY_OraDb11g_home1</code></p>\n\n<p>I waited for hours but the installtion still at 59%, I also tried to edit this file <code>C:\\Windows\\System32\\drivers\\etc\\host</code> by adding these lines</p>\n\n<pre><code>127.0.0.1       localhost\n::1             localhost\n127.0.0.1       mclaughlinmysql mclaughlinmysql.techtinker.com\n</code></pre>\n\n<p>but still can't complete the installation. I am working on new user account with administrative privilege, would you help me please?\n<img src=\"http://I.stack.imgur.com/75o58.png\" alt=\"enter image description here\"></p>\n"},{"tags":["oracle","instantclient"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12997027,"title":"Connecting to Oracle DB 11g with 10g client - syntax error","body":"<p>On a Ubunut machine, I use this command to connect to an Oracle 11g database with the 11g instant client:</p>\n\n<pre><code>sqlplus username/password@(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = the.address.com)(PORT = theport)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = service.address.com)))\n</code></pre>\n\n<p>Which works fine… On Mac OS X Mountain Lion I could only get the instant client 10g (32bit version) running, which gives me this error when I try to connect using the same line:</p>\n\n<pre><code>-bash: syntax error near unexpected token `('\n</code></pre>\n\n<p>Did the syntax changed from 10g to 11g?</p>\n"},{"tags":["sql","oracle","ora-00904"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":120,"score":4,"question_id":12988637,"title":"Column aliases reference","body":"<p>This query breaks the number into its respected place like thousands, hundreds, fifties, etc. The problem is that I am unable to refer the column by its aliases name. In Oracle, I am getting this error:</p>\n\n<blockquote>\n  <p>ora-00904: \"twos\": invalid identifier</p>\n</blockquote>\n\n<p>but the code runs well in MS Access </p>\n\n<p>Query:</p>\n\n<pre><code>SELECT \n    BT, \n    CNO, \n    AMT,  \n    TRUNC(AMT/1000) AS THS, \n    TRUNC((AMT-(THS*1000))/500) AS FIVHUN, \n    TRUNC((AMT-((THS*1000)+(FIVHUN*500)))/100) AS HUND, \n    TRUNC((AMT-(((THS*1000)+(FIVHUN*500))+(HUND*100)))/50) AS FIF, \n    TRUNC((AMT-(((THS*1000)+(FIVHUN*500))+(HUND*100)+(FIF*50)))/20) AS TWENTY, \n    TRUNC((AMT-(((THS*1000)+(FIVHUN*500))+(HUND*100)+(FIF*50)+(TWENTY*20)))/10) AS TENS, \n    TRUNC((AMT-(((THS*1000)+(FIVHUN*500))+(HUND*100)+(FIF*50)+(TWENTY*20)+(TENS*10)))/5) AS FIVES, \n    TRUNC((AMT-(((THS*1000)+(FIVHUN*500))+(HUND*100)+(FIF*50)+(TWENTY*20)+(TENS*10)+(FIVES*5)))/2) AS TWOS, \n    TRUNC((AMT-(((THS*1000)+(FIVHUN*500))+(HUND*100)+(FIF*50)+(TWENTY*20)+(TENS*10)+(FIVES*5)+(TWOS*2)))/1) AS ONES \nFROM \n    EMPLOYER;\n</code></pre>\n"},{"tags":["oracle","oracle10g","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":46,"score":0,"question_id":12984009,"title":"Business days calculation (by including time portion) between start date and end date by excluding weekends and custom/business specific holidays","body":"<p>Could you please help me out how to calculate the no. of business days between start date and end date by excluding weekends &amp; business specific holidays. Let's say if we take start date, end date and custom holiday table with list of holiday dates as mentioned below.</p>\n\n<p><strong>Start date (mm/dd/yyyy hh24:mi:ss)</strong> : '10/15/2012 08:00:00'</p>\n\n<p><strong>End date (mm/dd/yyyy hh24:mi:ss)</strong>   : '10/23/2012 10:30:00'</p>\n\n<p><strong>holiday_table.business_holiday_date values (mm/dd/yyyy)</strong>:</p>\n\n<p>10/17/2012</p>\n\n<p>10/19/2012</p>\n\n<p>10/22/2012</p>\n\n<p>Need to calculate business days by taking into consideration of the time portion of dates in the calculation (so can expect business days with fractions as well ex. 1.25, 3.7 etc)</p>\n\n<p>Appreciate if you can help me on this ASAP.</p>\n\n<p>-James</p>\n"},{"tags":["c#","oracle","clob"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":4568,"score":6,"question_id":3493027,"title":"\"ORA-01036: illegal variable name/number\\n\" for oracle clob in C#","body":"<p>When I try to create an oracle stored procedure call with <code>clob</code> input and output in C#, I get the following error:</p>\n\n<pre><code>ORA-01036: illegal variable name/number\\n\n</code></pre>\n\n<p>Here's the code itself:</p>\n\n<pre><code>OracleTransaction transaction = connection.BeginTransaction();\nOracleCommand command = connection.CreateCommand();\ncommand.Transaction = transaction;\ncommand.CommandText = \n      @\"declare xx clob; \n      begin dbms_lob.createtemporary(xx, false, 0); \n      :tempclob := xx; end;\";\n\ncommand.Parameters.Add(new OracleParameter(\"tempclob\", OracleType.Clob))\n    .Direction = ParameterDirection.Output;\n\ncommand.ExecuteNonQuery();\n\nOracleLob tempLob = (OracleLob)command.Parameters[0].Value;\n//byte[] tempbuff = new byte[10000];\nbyte[] tempbuff = System.Text.Encoding.Unicode.GetBytes(generateXMLMessage());\n\ntempLob.BeginBatch(OracleLobOpenMode.ReadWrite);\ntempLob.Write(tempbuff, 0, tempbuff.Length);\ntempLob.EndBatch();\ncommand.Parameters.Clear();\ncommand.CommandText = \"InsertMessageAndGetResponseWRP\";\ncommand.CommandType = CommandType.StoredProcedure;\n//command.Parameters\n//.Add(new OracleParameter(\"ImportDoc\", OracleType.Blob)).Value = tempLob;\ncommand.Parameters.Add(new OracleParameter(\"iSourceSystem\", OracleType.VarChar))\n       .Value = \"XXX\";\n\ncommand.Parameters.Add(new OracleParameter(\"iMessage\", OracleType.Clob))\n       .Value = tempLob;\n\n\ncommand.Parameters.Add(new OracleParameter(\"iResponseMessage\", OracleType.Clob)).Direction = ParameterDirection.Output;\ncommand.Parameters.Add(new OracleParameter(\"retVar \", OracleType.Int32)).Direction = ParameterDirection.Output;\n\ncommand.ExecuteNonQuery();\ntransaction.Commit();\n</code></pre>\n"},{"tags":["vb.net","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":12996399,"title":"Using Oracle client OO4O in VB.NET","body":"<p>I have converted an existing vb6 app that uses Oracle client OO4O to VB.NET. AFter many many errors and warnings that I have fixed the program now runs. But I get the following warning on a build that I am unable to resolve: </p>\n\n<blockquote>\n  <p>\"Could not determine the dependencies of the COM reference OO4OAddin\".</p>\n</blockquote>\n\n<p>This is followed by a number of other warnings such as:</p>\n\n<blockquote>\n  <p>\"Processing COM reference OO4OAddin. Error while importing type: parameter referenced a type library that is not available (type: '_Connect'; parameter: 'VBInstance'; method: 'get_VBInstance')\" </p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>\"At least one of the arguments for '_IOraBlob._ReadCPP' cannot be marshaled by the runtime marshaler.  Such arguments will therefore be passed as a pointer and may require unsafe code to manipulate\". </p>\n</blockquote>\n\n<p>I have scanned the internet but get no matches on these errors. The OO4O DLL's are all registered. What is required to get these warnings resolved and what exactly do they mean?</p>\n"},{"tags":["java","oracle","jdbc"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":59,"score":-1,"question_id":12987941,"title":"Exception while inserting image in oracle using java","body":"<p>My Java code is:</p>\n\n<pre><code>import java.sql.*;\nimport java.io.*;\n\nclass Oracle2\n{\n    public static void main(String args[]) throws Exception\n    {\n        DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());\n        Connection con = DriverManager.getConnection(\"jdbc:oracle:thin:@localhost:1521:orcl\", \"scott\", \"tiger\");\n        PreparedStatement stmt = con.prepareStatement(\"update image1 set photo=? where no=1\");\n        File f = new File(\"Jellyfish.jpg\");\n        FileInputStream fis = new FileInputStream(f);\n        stmt.setBinaryStream(3, fis, (int) f.length());\n        System.out.println(\"Image length: \" + f.length());\n        System.out.println(\"No.of rows affected: \" + stmt.executeUpdate());\n    }\n}\n</code></pre>\n\n<p>My Oracle table is:     </p>\n\n<pre><code>create table image1(\n  no int, \n  name varchar2(20), \n  photo blob\n);      \n</code></pre>\n"},{"tags":["sql","oracle","triggers","constraints"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12996155,"title":"How do I make a SQL constraint in one table affect a different table","body":"<p>I have Three tables </p>\n\n<ul>\n<li>Bill</li>\n<li>Recording </li>\n<li>House</li>\n</ul>\n\n<p>In Recording, I have a column called DateRecored. In bill, I have a column called duedate and in House, I have a column called Operational.</p>\n\n<p>I need to make a constraint so that when the bill is 60 days overdue, the Operational column will change to deactivated.</p>\n\n<p>Let me know if you need for info, but I feel this is all you ll need.</p>\n"},{"tags":["c++","sql","oracle","mfc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12995941,"title":"Compare data SQL and CArray, oracle with MFC C++","body":"<p>Got CArray and SQL DB, both contain: ID, Value, Time.  </p>\n\n<p>SQL has 1000K+ entries (no primary key) and CArray has 150K~.</p>\n\n<p>I need to iterate the IDs from CArray and check if in given time, there are entries in SQL. if there are, I need to delete them.  </p>\n\n<p>thanks.  </p>\n\n<p>1 solution, iterate on the IDs from CArray, and for each ID run query: where id = %id AND time is between % and %.  </p>\n\n<p>2 solution, to poll all the IDs from SQL to CRecordSet with query that takes all IDs that were changed in the given time, and then to compare with the IDS inside the CArray and finally iterate over those IDs and run a delete query. this will make the union in the memory instead of sending 150K of delete queries..only iterate over the wanted IDs.  </p>\n"},{"tags":["oracle","jdbc","groovy","nullpointerexception","resultset"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12994475,"title":"OracleResultSetMetaData throwing NullPointerException in its <init> method","body":"<p>I'm using groovy.sql.Sql to execute a query against Oracle and return a ResultSet that is then used in a custom TableAdapter to back a JTable. The query executes without error, but when I try to retrieve the MetaData from the ResultSet, a NullPointerException is thrown during the &lt;init&gt; method of OracleResultSetMetaData on line 72. I have been unable to locate the source code for that class to find out what could possibly be null, so I'm turning to this wonderful community for help.</p>\n\n<p>The function below is what I'm using to execute my SQL query which is generated in a separate class that parses a template. I'm currently mocking the template to return a verified valid SQL statement.</p>\n\n<pre><code>ResultSet getResultSet() {\n    if (data == null) {\n        if (sql == null) {\n            sql = Sql.newInstance(CONN_STRING, USERNAME, PASSWORD, DRIVER_NAME)\n            sql.resultSetType = ResultSet.TYPE_SCROLL_SENSITIVE\n            sql.resultSetHoldability = ResultSet.HOLD_CURSORS_OVER_COMMIT // Added since initial post\n        }\n\n        data = sql.executeQuery(template.getSql())          \n    }\n\n    return data\n}\n</code></pre>\n\n<p>My getColumnCount method is where the NPE is occuring, and it looks like this.</p>\n\n<pre><code>@Override\npublic synchronized int getColumnCount() {\n    return getResultSet().metaData.columnCount\n}\n</code></pre>\n\n<p>Here's my stack trace for good measure.</p>\n\n<pre><code>2012-10-20 21:49:12,135 [AWT-EventQueue-0] ERROR org.codehaus.griffon.runtime.builder.UberBuilder - An error occurred while building browser.BrowserView@17c1e333\n [exec] java.lang.NullPointerException\n [exec]     at oracle.jdbc.driver.OracleResultSetMetaData.&lt;init&gt;(OracleResultSetMetaData.java:72)\n [exec]     at oracle.jdbc.driver.ScrollableResultSet.getMetaData(ScrollableResultSet.java:2004)\n [exec]     at com.trxi.browser.TemplateTableModel.getColumnCount(TemplateTableModel.groovy:75)\n [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeFactoryMethod(UberInterceptorMetaClass.groovy:97)\n [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.this$3$invokeFactoryMethod(UberInterceptorMetaClass.groovy)\n [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass$this$3$invokeFactoryMethod.callCurrent(Unknown Source)\n [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeMethod(UberInterceptorMetaClass.groovy:141)\n [exec]     at browser.BrowserView$_run_closure1_closure2.doCall(BrowserView.groovy:11)\n [exec]     at browser.BrowserView$_run_closure1_closure2.doCall(BrowserView.groovy)\n [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeFactoryMethod(UberInterceptorMetaClass.groovy:97)\n [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.this$3$invokeFactoryMethod(UberInterceptorMetaClass.groovy)\n [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass$this$3$invokeFactoryMethod.callCurrent(Unknown Source)\n [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeMethod(UberInterceptorMetaClass.groovy:141)\n [exec]     at browser.BrowserView$_run_closure1.doCall(BrowserView.groovy:10)\n [exec]     at browser.BrowserView$_run_closure1.doCall(BrowserView.groovy)\n [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeFactoryMethod(UberInterceptorMetaClass.groovy:97)\n [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.this$3$invokeFactoryMethod(UberInterceptorMetaClass.groovy)\n [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass$this$3$invokeFactoryMethod.callCurrent(Unknown Source)\n [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeMethod(UberInterceptorMetaClass.groovy:168)\n [exec]     at browser.BrowserView.run(BrowserView.groovy:4)\n [exec]     at org.codehaus.griffon.runtime.builder.UberInterceptorMetaClass.invokeMethod(UberInterceptorMetaClass.groovy:152)\n [exec]     at org.codehaus.griffon.runtime.builder.UberBuilder.build(UberBuilder.groovy:160)\n [exec]     at org.codehaus.griffon.runtime.core.AbstractMVCGroup$1.run(AbstractMVCGroup.java:129)\n</code></pre>\n\n<p>UPDATE: I modified my code to pull information from the template instead of the ResultSetMetaData object, and now I'm getting an error that my ResultSet is closed. I think it is relatively safe to assume that this is what is causing the OracleResultSetMetaData object to fail during its &lt;init&gt; method. Can anyone see what I'm doing wrong?</p>\n"},{"tags":["oracle","globalization","oracle-apex","xliff"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12988670,"title":"Oracle Apex UI Translation - Point me in the right direction","body":"<p>I have to work on building a website in Oracle Apex that should be displayed in multiple languages. Let me decompose this further.</p>\n\n<p>I am assuming that there are two parts to an Apex application</p>\n\n<ol>\n<li>UI &amp; elements of the UI i.e. regions, buttons, tables, page headings</li>\n<li>Data</li>\n</ol>\n\n<p>At the moment I need to find answers on how to enable multiple language support for only the UI part of my application. Not the data.</p>\n\n<p>As I can understand, there are two broad based approaches to achieve this.</p>\n\n<ol>\n<li>Use the Apex inbuilt support for changing the UI elements.</li>\n<li>Create a solution from scratch that is based on a database driven approach. </li>\n</ol>\n\n<p>IS my understanding correct?</p>\n\n<p>Two more questions\n1. Can anyone give me a short brief on in the type of support that Oracle Apex provides for creating multiple versions of webpages / websites for my application? Alternatively just point me in the right direction by providing relevant links etc.</p>\n\n<ol>\n<li>Which one of the above two approaches would you recommend? And Why?</li>\n</ol>\n\n<p>Thanks a ton</p>\n\n<p>Romi</p>\n"},{"tags":["oracle","oracle-apex"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12894355,"title":"Getting error sys.wwv_dbms_sql timeout occurred while waiting to lock object while upgrade to apex 4.2","body":"<p>i am getting this error this afternoon while trying to upgrade to oracle apex 4.2 from 4.1.1 .</p>\n\n<p>sys.wwv_dbms_sql timeout occurred while waiting to lock object , but the installation progress continue .</p>\n\n<p>Does anyone experience this kind of error? is it OK for my apex system cause the installation script keep continue, even in a very very long time. :(   </p>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1879,"score":2,"question_id":1109811,"title":"Character set mismatch","body":"<p>I have a SQL statement like this:</p>\n\n<pre><code>SELECT \n  a.ColumnA, b.ColumnB || \n CASE WHEN TRIM(c.ColumnC) IS NOT NULL THEN ' (' || c.ColumnC || ')' ELSE '' END AS ClassName\n FROM TableA a INNER JOIN TableB b ON a.SomeColumn = b.SomeColumn \n INNER JOIN TableC c on a.SomeCol = c.SomeCol\n</code></pre>\n\n<p>I'm getting an error \"Character set mismatch\" at the \" ELSE '' \" part of the CASE expression.\nCan someone suggest where I'm doing it wrong? Thank you.</p>\n"},{"tags":["oracle","plsql","oracle-apex","ora-00942"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":811,"score":1,"question_id":6915907,"title":"Using DB Links on a PL/SQL script throws \"Table not found\" error","body":"<p>While trying to create a report using PL/SQL I'm finding myself stuck with the following problem, I created a SQL query that access 2 tables on a remote DB using a DB Link, running the query alone itself returns the expected results but when I run the very same query and put the results into a cursor I get a </p>\n\n<pre><code>PL/SQL: ORA-00942: table or view does not exist\n</code></pre>\n\n<p>error.</p>\n\n<p>I'm not sure if it has something to do with the alias I'm using for each table or maybe the select statement is trying to select local tables, I don't know, do you have any suggestions?</p>\n\n<p>PL/SQL:</p>\n\n<pre><code>DECLARE\n   CURSOR t_bug_details IS (SELECT h.*\n  FROM table1@REMOTEDB h,\n       table2@REMOTEDB rml\n  WHERE h.product_id   IN (123)\n  AND h.category       IN ('category')\n  AND h.status          &lt; 4\n  AND h.status NOT     IN (1,2,3)\n  AND h.release_status IN (upper('P'))\n  --AND h.programmer     IN (upper('MRFOO'))\n  AND h.some_id      = rml.some_id\n  and rownum &lt;=400);\n\nREPORT_DAY VARCHAR2(40);\nmail_html clob;\nmail_bod clob;\n\nBEGIN\n\nFOR v_some_details in t_bug_details\nLOOP\nREPORT_DAY := TO_CHAR(SYSDATE,'DD-MON-YYYY HH24:MI:SS');\nDBMS_OUTPUT.PUT_LINE(REPORT_DAY || '|' ||\n                     v_some_details.reptnom || '|' ||\n                     v_some_details.subject || '|' ||\n                     v_some_details.field || '|' ||\n                     v_some_details.release_status || '|' ||\n                     v_some_details.status || '|' ||\n                     v_some_details.category || '|' ||\n                     v_some_details.sub_field || '|' ||\n                     v_some_details.datef1 || '|' ||\n                     v_some_details.field_by || '|' ||\n                     v_some_details.programmer || '|' ||\n                     TRUNC(sysdate - v_some_details.datef1) || '|' ||\n                     TRUNC(sysdate - v_some_details.upd_date)|| '|' ||\n                     v_some_details.fix_avail_date|| '|' ||\n                     v_some_details.bug_type || '|' ||\n                     v_some_details.base_reptnom);\nEND LOOP;\n\nEXCEPTION WHEN NO_DATA_FOUND\nTHEN\nDBMS_OUTPUT.PUT_LINE ('NO RECORDS FOUND');\nEND;\n</code></pre>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":11609,"score":1,"question_id":4378847,"title":"How to update One table column values with another table's column values?","body":"<p>i have table called Student with columns uniquename, age,department,city,Homecountry and another table called Employee with columns uniquename, exp,qualification, Homecountry.</p>\n\n<p>now i want to update Student table's department column with Employee table's qualification column values under the where condition Student.uniquename = Employee.uniquename and Student.Homecountry = Employee.Homecountry.</p>\n\n<p>please help me to write the update statement.</p>\n"},{"tags":["c#","oracle","ado.net","odp.net"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":54,"score":-1,"question_id":12989055,"title":"Poor performance on passing array of strings to Oracle Associative array;","body":"<p>I passing an array of strings to Oracle Packaged procedure. The test array constitute of about 600 elements of 20 chars,. each.\nI takes around 50 seconds to return the results !.\nIs this normal ?\nhere is the call:</p>\n\n<pre><code>public DataSet ExecProcToDataSetWithStringArrayInput\n   (string constr, string procName, Dictionary&lt;string, string&gt; prms, string[] items)\n     {\n     DataSet ds = new DataSet();\n     using (o = new leanOracle.leanOracle(constr + \"Statement Cache Size=1\"))\n     using (OracleCommand cmd = new OracleCommand(\"PriceWorx.prTestArrayIn\", o.Conn))\n        {\n        cmd.CommandType = CommandType.StoredProcedure;\n        cmd.Parameters.Add(new OracleParameter(\"1\", OracleDbType.Varchar2)\n           {\n              Direction = ParameterDirection.Input,\n              Value = items.ToArray(),\n              CollectionType = OracleCollectionType.PLSQLAssociativeArray\n           });\n        OracleParameter p2 = cmd.Parameters.Add(\"2\", OracleDbType.RefCursor); \n        p2.Direction = ParameterDirection.Output;\n        int[] abs = new int[items.GetUpperBound(0)]; ;\n        for (int i = 0; i &lt;= items.GetUpperBound(0) - 1; i++) abs[i] = 20;\n        cmd.Parameters[\"1\"].ArrayBindSize = abs;\n        try\n           {\n           Stopwatch stp1 = Stopwatch.StartNew();\n           using (OracleDataAdapter da = new OracleDataAdapter(cmd))\n              {\n              Debug.WriteLine(string.Format(\"Elapsed time in secs{0}\"\n                                                 , stp1.Elapsed.Seconds));\n              da.Fill(ds);\n              Debug.WriteLine(string.Format(\"Elapsed time in secs{0}\", \n                                                 stp1.Elapsed.Seconds));\n              }\n           }\n        catch (Exception ex)\n           {\n           Debug.WriteLine(ex);\n           Debugger.Break();\n           }\n        }\n     return ds;\n     }\n</code></pre>\n"},{"tags":["sql","oracle","emacs"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":75,"score":3,"question_id":12989575,"title":"how to connect oracle server with emacs?","body":"<p>I want to connect to the server with Emacs. I found this link : \n<a href=\"http://www.emacswiki.org/cgi-bin/wiki/SqlPlus\" rel=\"nofollow\">EmacsWiki:sqlPlus</a></p>\n\n<p>I did what was described there and added the following lines to my .emacs file: </p>\n\n<blockquote>\n  <p>(require 'tabbar) <br/>\n  (require 'ide-skel) <br/>\n  (require 'sqlplus) <br/></p>\n</blockquote>\n\n<p>When I try to <code>M-x - \"sql-oracle\"</code> it asks me to enter <code>\"User: \"</code>, <code>\"Password: \"</code>, and <code>\"Database: \"</code>, but I don't know <code>\"database\"</code>, all I have is this data:</p>\n\n<blockquote>\n  <p>IP (Host Name):  #######  <br/>\n  Port: #### <br/>\n  SID: orcl <br/>\n  UserName: ####  <br/>\n  Password: #### <br/></p>\n</blockquote>\n\n<p>How can I make emacs ask me to fill only (and all of) this data?</p>\n"},{"tags":["c#","sql","oracle"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1768,"score":1,"question_id":1833539,"title":"ExecuteNonQuery doesn't throw exception on insert","body":"<p>Hi \nI'm using OracleCommand.ExecuteNonQuery() to insert into a table. Everything works fine but occasionally records are not inserted.\nSo is it possible that ExecuteNonQuery() doesn't insert the record and also doesn't throw an exception? </p>\n\n<p>I'm not using stored procedures.\nI'm not using a transaction.\nI am logging any exception that is thrown by ExecuteNonQuery() but apparently no exception is thrown...\nI am also <strong>not</strong> checking the return value of ExecuteNonQuery(). But is it possible that ExecuteNonQuery returns another value than 1 if the insert is successful?</p>\n"},{"tags":["sql-server","oracle","ado.net","microsoft","odp.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12988478,"title":"Is SQL dependency notification an Ansi requirement?","body":"<p>I am considering implementing Oracle dependency notification in a production environment after successful demonstration of the same in Development environment. \nOne of the question that came up during the demonstration was 'Could this technique be implemented on other databases ?'. \nWell , I was not sure, but surfing around I found that ADO.Net too provide the same feature for sql 2005 on wards with less or more functionality.<br>\nJust curious to know if the 'Dependency notifications' is an ANSI requirement or MS is offering this feature to not to be seconded to Oracle ...If it is an ANSI requirement, then it is likely other vendors too offer this ANSI prescribed feature.</p>\n"},{"tags":["oracle","import"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":894,"score":1,"question_id":3671705,"title":"Is this the right way to import Oracle dump database?","body":"<p>I need to import Oracle Database from production to development just for one schema. What's the easiest way to do this?\nWhat I did is to drop the user with this schema and recreate the user with the same options and run import command. Is this the right way to do? </p>\n\n<p>I use Oracle 10g and I am a developer not DBA but my DBA gives me the dump file and I need to build a local test environment.</p>\n\n<p>Do I need to drop the user? Can I just delete all objects for this user?</p>\n"},{"tags":["oracle","stored-procedures","cursor","sqlplus"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12972636,"title":"get schema name as a user input and use it in a cursor","body":"<p>I want to get the user input to a variable and use it to a cursor. This user input says which database to use.</p>\n\n<pre><code>--source source \nsource varchar2(100) := &amp;SOURCE_ATS_USER_SCHEMA;\nCURSOR cur_list is\n    select ID from source.WEB_FE;\n</code></pre>\n\n<p>I use above code with in DECLARE block. When this runs, a prompt asks the user input.\nLet's say I input as \"ONE\", then it gives the error \"identifier ONE must be declared\" and though ONE.WEB_FE table exist it says \"table or view does not exist\". </p>\n\n<p>So how to get schema name as a user input and use it in a cursor?</p>\n\n<p>Thanx</p>\n"},{"tags":["php","oracle","oci"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":272,"score":0,"question_id":5031283,"title":"Use PHP and oci_bind_by_name to pass a list of values to Oracle","body":"<p>I have a list of numbers I wish to bind or pass to this Oracle SQL query.</p>\n\n<pre><code>SELECT\n    ad.lastname, ad.name, a.cc cc, sum(a.qt) qt\nFROM a, ad\n  where ( ad.ci in (:idList) or (:idList is null)) \n  and ad.ci (+) = a.ci\n  And A.Type = 'R'\n  And A.Cc In ('SIDI','SIND','RSU')\n</code></pre>\n\n<p>Is it allowable to use the command oci_bind_by_name to bind :idList with a string containing a list of Ids? Could be seen as a string that seralizes the Ids?</p>\n\n<p>Example:\n</p>\n\n<p>It seems unfeasible \"just\" because the serialized list is not part of SQL syntax. Any ideas to reach my goal?</p>\n"},{"tags":["java","oracle","jdbc"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":1,"view_count":17138,"score":2,"question_id":2363680,"title":"java.sql.SQLException: Io exception: Got minus one from a read call during JDBC connection with oracle","body":"<p>Hi I am new to java when I tried to connect oracle with my java sample code I got the above exception</p>\n\n<p>My Code is</p>\n\n<pre><code>import java.sql.*;\nimport java.io.IOException;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n\npublic class DbConnectivity extends HttpServlet {\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException \n    {\n       try {\n        Class.forName(\"oracle.jdbc.driver.OracleDriver\");\n        Connection con = DriverManager.getConnection(\"jdbc:oracle:thin:@localhost:8080:orcl\", \"system\", \"tiger\");\\\\ The Exception thrown here\n        Statement stmt = con.createStatement();\n        ResultSet rst = stmt.executeQuery(\"select * from users\");\n        System.out.println(rst.getString(1));\n        stmt.close();\n        con.close();\n    } catch (ClassNotFoundException e) \n    {\n        e.printStackTrace();\n    } catch (SQLException e) \n    {\n        e.printStackTrace();\n    }\n    }\n\n}\n</code></pre>\n\n<p>and The exception thrown is</p>\n\n<pre><code>java.sql.SQLException: Io exception: Got minus one from a read call\nat oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)\nat oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146)\nat oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:255)\nat oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:387)\nat oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:441)\nat oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:165)\nat oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)\nat oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:801)\nat java.sql.DriverManager.getConnection(Unknown Source)\nat java.sql.DriverManager.getConnection(Unknown Source)\nat com.wipro.connnection.DbConnectivity.doGet(DbConnectivity.java:16)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:690)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:803)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)\nat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)\nat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)\nat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\nat java.lang.Thread.run(Unknown Source)\n</code></pre>\n\n<p>Help me to sort out this</p>\n"},{"tags":["sql","oracle","plsql","oracle10g","ora-01861"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":39447,"score":3,"question_id":1387917,"title":"ORA-01861: literal does not match format string","body":"<pre><code>cmd.CommandText = \"SELECT alarm_id,definition_description,element_id,\nTO_CHAR (alarm_datetime, 'YYYY-MM-DD HH24:MI:SS'),severity,\nproblem_text,status FROM aircom.alarms \nWHERE status = 1 and \nTO_DATE (alarm_datetime,'DD.MM.YYYY HH24:MI:SS') &gt; TO_DATE ('07.09.2008 \n09:43:00', 'DD.MM.YYYY HH24:MI:SS') \norder \nby ALARM_DATETIME desc\";\n</code></pre>\n\n<p>i get ORA-01861 error when i try to execute this command text. there is no problems with database connection because i can execute basic sql commands. </p>\n\n<p>What is the problem with this statement?</p>\n"},{"tags":["java","oracle","hibernate","jpa","persistence"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":61,"score":3,"question_id":12986073,"title":"How to merge two transactions for different schemes into one?","body":"<p>There is a code like this:</p>\n\n<pre><code>ATransaction.commit ();\nBTransaction.commit ();\n</code></pre>\n\n<p>Both transactions are working with different schemes (ie persistence-unit they are different). It is necessary to combine both in one transaction. So if any one transaction fails to rollback both. How to do it?</p>\n"},{"tags":["sql","oracle","query"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12986371,"title":"Oracle - merge rows into 1 from the output","body":"<p>When I run the following query:</p>\n\n<p><code>SELECT  datetime_up, logic_id,eqp_name,ack, created FROM NAS_db.main\nWHERE TRUNC(datetime_up,'DD') &gt;= TO_TIMESTAMP ('04/18/2012', 'MM/DD/YYYY') and\nTRUNC(datetime_up,'DD') &lt;= TO_TIMESTAMP ('04/21/2012', 'MM/DD/YYYY') AND eqp_name ='Router-A'\nGROUP BY datetime_up,eqp_name, logic_id,ack,created</code></p>\n\n<p>I get the following output:</p>\n\n<pre><code>datetime_up             logic_id    eqp_name      ack   created\n4/19/2012 5:52:04 PM    IP_1.1.1.1_ Router-A       1       0\n\n4/19/2012 5:52:04 PM    IP_1.1.1.1_ Router-A       0       0\n</code></pre>\n\n<p>Ok, Those are consecutive records, I need to... in the cases like this , that the first record has a 1, to take only that one, instead of 2.</p>\n\n<p>I mean, if I query and I have 1000 records showing a 1 after the RouterA, I will need to take only one, and avoid the other one, if they are only 0s, the same, only take one, so I would like to have my query to show this.</p>\n\n<pre><code>4/19/2012 5:52:04 PM    IP_1.1.1.1_ Router-A       1       0\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["sql","sql-server","oracle","firebird"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12977720,"title":"Typecasting datetime differences","body":"<p>We use firebird as a local testing database and most of our clients use SQL Server or Oracle.</p>\n\n<p>This works in MS SQL Server, but not in Firebird. (haven't tested it n Oracle yet)</p>\n\n<pre><code>CONVERT(char(8),MAX(p.end_Time)-MIN (p.start_Time),8) as duration\n</code></pre>\n\n<p>is there a way to acoomplish this same thing for (Firebird, Oracle, and MS Sql Server)?</p>\n\n<p>thanks</p>\n"},{"tags":["oracle","vba","excel-vba","ado","access-vba"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":3583,"score":6,"question_id":3398272,"title":"Connection string syntax for Classic ADO / ODBC / Oracle 10g EZConnect","body":"<p>I'm trying to connect various VBA projects to an Oracle 10g back end using ADO (2.8) and no TNS. After various attempts, we've decided that the simplest series of steps for a clean installation include:</p>\n\n<ol>\n<li>Set up an Oracle Instant Client</li>\n<li>Install the accompanying ODBC driver</li>\n<li>(Test the connection using EZCONNECT via SQL Plus)</li>\n<li>(Test the connection by creating a Windows DSN)</li>\n</ol>\n\n<p>Everything up to here works fine. Problem is, I cannot figure out the syntax to tell ADO to use the <em>instant client</em> ODBC driver, which appears in my ODBC driver list as \"Oracle in MyTest\" (no quotes). Using the MSFT ODBC driver with EZConnect as <a href=\"http://stackoverflow.com/questions/782181/connect-to-an-oracle-10g-database-with-microsoft-odbc-for-oracle\">this post</a> suggests does not work any better than it did prior to setting up the instant client (which is to say, not at all). But <a href=\"http://stackoverflow.com/questions/1272998/do-i-still-need-to-install-oracle-client-if-using-microsoft-odbc-for-oracle-to-co\">this post</a> seems to suggest it's possible, without stating exactly how, and <a href=\"http://www.connectionstrings.com/oracle#p12\" rel=\"nofollow\">connectionstrings.com</a> only tells you what the Data Source portion of the string looks like, i.e.\n    SomeUser/SomePassword@AServer:PortNumber/InstanceName</p>\n\n<p>Short version: What is the exact syntax of a classic ADO connection string referencing an instant client ODBC driver?</p>\n\n<p>Thanks in advance for your help. Took me a stupid long time to get going with SO...</p>\n"},{"tags":["sql","oracle","group-by"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":42,"score":-1,"question_id":12983158,"title":"sql query to get sum for specific fields","body":"<p>I have the following issue: This is my table.</p>\n\n<pre><code>date    | router       |   alarms   | created  | TT\n1/1/12     router1      test1A        1          1\n1/1/12     router1      test1A        1          1\n1/1/12     router1      test1B        1          1\n2/1/12     router1      test2        1          0\n2/1/12     router1      test2        1          0\n2/1/12     router1      test2        1          0\n</code></pre>\n\n<p>So, I am able to get how many alarms were created by day by equipment.\nIn this case, router1 has 2 alarms, A and B, A contains 2 lines but actually it represents only 1, because the second line is a repeated event.</p>\n\n<p>The problem is, If I try to count the  \"created\" for router A I want to see only 1.\nFor B, 1 as well and 1 for test2, because those are repeated lines that I cannot remove.</p>\n\n<p>At the end my query should give me, 3 alarms, 2 created and 2 TT.</p>\n\n<p>I am not able to do it, my query is making an addition for the last columns, I cannot figure out how to make the difference.</p>\n\n<p>My query:</p>\n\n<pre><code>SELECT TRUNC(date,'DD'),router ,  count(DISTINCT alarms), sum (created), sum(tt)\nFROM main_db.alarms\nWHERE date &gt;= TO_TIMESTAMP ('04/15/2012', 'MM/DD/YYYY') AND \ndate &lt;= TO_TIMESTAMP ('04/17/2012', 'MM/DD/YYYY') AND router ='router1'\n\nGROUP BY TRUNC(date,'DD'), router\n</code></pre>\n\n<p>Any help will be greatly appreciated.</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":0,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":71,"score":4,"question_id":12984216,"title":"Oracle 11g Sys Query","body":"<p>Can someone please enlighten me why the below query is being fired and when it will be fired. I belive this query is having huge impact on the performance. I am not able to trace from where this is being fired.</p>\n\n<p>Query :</p>\n\n<pre><code>SELECT SUM (used), SUM (total)\nFROM (SELECT /*+ ORDERED */ \n             SUM (d.BYTES) / (1024 * 1024) - MAX (s.BYTES) used,\n             SUM (d.BYTES) / (1024 * 1024) total\n      FROM ( SELECT   tablespace_name, SUM (BYTES) / (1024 * 1024) BYTES\n             FROM ( SELECT/*+ ORDERED USE_NL(obj tab) */DISTINCT ts.NAME\n                    FROM SYS.obj$ obj, SYS.tab$ tab,  SYS.ts$ ts\n                    WHERE obj.owner# = USERENV ('SCHEMAID')\n                    AND obj.obj# = tab.obj#\n                    AND tab.ts# = ts.ts#\n                    AND BITAND (tab.property, 1) = 0\n                    AND BITAND (tab.property, 4194400) = 0) tn,\n             dba_free_space sp\n             WHERE sp.tablespace_name = tn.NAME\n             GROUP BY sp.tablespace_name) s, dba_data_files d\n      WHERE d.tablespace_name = s.tablespace_name\n      GROUP BY d.tablespace_name)    \n</code></pre>\n\n<p>It is having a Full table scan on SYS.TS$ and SYS.FILE$. I belive it is utilizing the maximum resoures of Database.</p>\n\n<p>Please help me.</p>\n\n<p>Thanks in Advance.</p>\n"},{"tags":["mysql","oracle","query"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12984231,"title":"MySql Query: Total Average for multiple tables","body":"<p>I want to calculate the overall average GPA for all of the students in one of the departments, this is what I came up with but it does it not work</p>\n\n<pre><code>COLUMN AVERAGE FORMAT 0.999  \nSELECT  AVG(GPA) \"AVERAGE\"  \nFROM    STUDENT  \nWHERE   (YEAR &lt; 4) AND \n        (MAJOR LIKE '%ACCT%') AND \n        (MAJOR LIKE '%FINA%') AND \n        (MAJOR LIKE '%MGMT%') AND \n        (MAJOR LIKE '%AISY%') AND \n        (MAJOR LIKE '%MINS%') AND \n        (MAJOR LIKE '%SCMS%');  \n</code></pre>\n\n<p>so they should be both undergraduates and be enrolled in one of those majors.</p>\n\n<p>Also as an additional question: is it possible to write such a query using \"GROUP BY ### and HAVING ###) ? how?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12983756,"title":"use select results in update oracle","body":"<p>I have searched and found many questions similar to mine but none of the solutions work for me.  This is in Oracle, I don't know the version (I only access it through SQL Developer).  I have two tables (irrelevant columns omitted):</p>\n\n<pre><code>describe t_points_receipt\nName              Null     Type          \n----------------- -------- ------------- \nUSER_ID           NOT NULL NUMBER(9)     \nPROMOTION_ID      NOT NULL NUMBER(9)     \nAMOUNT            NOT NULL NUMBER(9,2)   \n\ndescribe t_user_promotion_points\nName         Null     Type        \n------------ -------- ----------- \nUSER_ID      NOT NULL NUMBER(9)   \nPROMOTION_ID NOT NULL NUMBER(9)   \nTOTAL_POINTS          NUMBER(9,2) \n</code></pre>\n\n<p>And, I have this query:</p>\n\n<pre><code>select user_id, promotion_id, sum(amount) from t_points_receipt\n where promotion_id = 10340 group by user_id, promotion_id;\n</code></pre>\n\n<p>What I would like to do is update t_user_promotion_points with sum(amount) from the results where t_user_promotion_points.user_id = (results).user_id and t_user_promotion_points.promotion_id = (results).promotion_id.  Is there a way to do this?</p>\n"},{"tags":["sql","oracle","sql-developer"],"answer_count":6,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":15884,"score":5,"question_id":1702832,"title":"insert if not exists oracle","body":"<p>I need to be able to run an Oracle query which goes to insert a number of rows, but it also checks to see if a primary key exists and if it does, then it skips that insert.  Something like:</p>\n\n<pre><code>INSERT ALL\n    IF NOT EXISTS( SELECT 1 WHERE fo.primary_key='bar' )\n    (\n        INSERT INTO \n            schema.myFoo fo ( primary_key, value1, value2 )\n        VALUES\n            ('bar','baz','bat')\n    ),\n\n    IF NOT EXISTS( SELECT 1 WHERE fo.primary_key='bar1' )\n    (\n        INSERT INTO \n            schema.myFoo fo ( primary_key, value1, value2 )\n        VALUES\n            ('bar1','baz1','bat1')\n    )\nSELECT * FROM schema.myFoo;\n</code></pre>\n\n<p>Is this at all possible with Oracle?</p>\n\n<p><sub>Bonus points if you can tell me how to do this in PostgreSQL or MySQL.</sub></p>\n"},{"tags":["sql","database","oracle","stored-procedures","dblink"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":4739,"score":4,"question_id":7839530,"title":"Oracle: Using a database link in a stored procedure : table or view does not exist","body":"<p>I currently have an issue whereby I cannot reference a table in a linked database within a stored procedure. I get the error message:</p>\n\n<blockquote>\n  <p>ORA-00942: table or view does not exist</p>\n</blockquote>\n\n<p>Here are the steps I took on the host machine (running oracle 10g) to set up the database link to the remote database (running oracle 11g). The steps are accurate, but some some names have been changed, though they have been kept consistent.</p>\n\n<ol>\n<li><p>Update tnsnames.ora, adding a new entry:</p>\n\n<pre><code>REMOTE_DB =\n    (DESCRIPTION =\n        (ADDRESS = (PROTOCOL = TCP)\n                   (HOST = 10.10.10.10)\n                   (QUEUESIZE = 20)\n                   (PORT = 1521)\n        )\n        (CONNECT_DATA =\n                   (SERVICE_NAME = remote_service)\n        )\n    )\n</code></pre></li>\n<li><p>Create database link, as the user who will later be creating and executing the stored procedure:</p>\n\n<pre><code>create database link remote_link\nconnect to \"remote_user\"\nidentified by \"remote_pass\"\nusing 'REMOTE_DB';\n</code></pre></li>\n<li><p>Prove database link is working by selecting from it:</p>\n\n<pre><code>select id from remote_table@remote_link;\n\nid\n--------------------------------------------------------------------------------\n8ac6eb9b-fcc1-4574-8604-c9fd4412b917\nc9e7ee51-2314-4002-a684-7817b181267b\ncc395a81-56dd-4d68-9bba-fa926dad4fc7\nd6b450e0-3f36-411a-ba14-2acc18b9c008\n</code></pre></li>\n<li><p>Create stored procedure that depends on working database link:</p>\n\n<pre><code>create or replace\nPROCEDURE test_remote_db_link\nAS\nv_id varchar(50);\nBEGIN   \n    select id into v_id from remote_table@remote_link where id = 'c9e7ee51-2314-4002-a684-7817b181267b';\n    dbms_output.put_line('v_id : ' || v_id);\nEND test_remote_db_link;\n</code></pre></li>\n<li><p>Explode own head after staring at the following error message for over an entire working day:</p>\n\n<pre><code>Error(10,27): PL/SQL: ORA-00942: table or view does not exist\n</code></pre></li>\n</ol>\n\n<p>I have tried many things to try to sort this issue out, including:</p>\n\n<ol>\n<li><p>When creating the database link, not using quotes around the username and password. Link creates fine, but selecting from it gives me this error:</p>\n\n<pre><code>ERROR at line 1:\nORA-01017: invalid username/password; logon denied\nORA-02063: preceding line from TWS_LINK\n</code></pre></li>\n<li><p>Tried various combinations of username and password in upper/lowercase. Received same error as 1.</p></li>\n<li><p>Tried single quotes instead of double quotes around username and password. Recieved this error:</p>\n\n<pre><code>ERROR at line 1:\nORA-00987: missing or invalid username(s)\n</code></pre></li>\n<li><p>Proved I have full access to the remote db by connecting into it with sqlplus:</p>\n\n<pre><code>[oracle]$ sqlplus remote_user/remote_pass@REMOTE_DB\n\nSQL*Plus: Release 10.2.0.1.0 - Production on Thu Oct 20 22:23:12 2011\n\nCopyright (c) 1982, 2005, Oracle.  All rights reserved.\n\n\nConnected to:\nOracle Database 11g Enterprise Edition Release 11.2.0.2.0 - 64bit Production\nWith the Partitioning, OLAP, Data Mining and Real Application Testing options\n\nSQL&gt; \n</code></pre></li>\n</ol>\n\n<p>I'm not sure what to do next. The possible next step is to start looking at issues on the remote database, and perhaps see if other databases can connect to it. Another would be to look at incompatibilities going from host 10g to remote 11g. Any suggestions for what to look for would be very much appreciated.</p>\n\n<p>If any more information would be of help to anyone, please let me know, and I'll update the question ASAP. I'm starting to go nuts.</p>\n\n<p>GC.</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":12981994,"title":"SQL update a column with minimum value in a group","body":"<p>I'm trying to update the MD_ID column with the minimum value in the DESC group.<br>\nFor example, I want all the rows where DESC=Language to get MD_ID=21 as min(21, 163, 287)=21. To simplify, it is always the MD_ID associated with SOURCE=1.</p>\n\n<p>The data looks like this:</p>\n\n<pre><code>MD_ID|SOURCE|DESC           |MSG |SEGMNT|FIELD\n  21 |1     |Language       |A11 |PID   |33\n 163 |2     |Language       |A11 |PID   |33\n 287 |3     |Language       |A11 |PID   |33\n  22 |1     |Sex            |B22 |MSH   |8\n 145 |2     |Sex            |B22 |MSH   |8\n 171 |3     |Sex            |B22 |MSH   |8\n  23 |1     |Marital Status |C33 |NK1   |16\n 145 |2     |Marital Status |C33 |NK1   |16\n 289 |3     |Marital Status |C33 |NK1   |1\n  24 |1     |Religion       |D44 |GT1   |7\n 167 |2     |Religion       |D44 |GT1   |7\n 292 |3     |Religion       |D44 |GT1   |7\n</code></pre>\n\n<hr>\n\n<p>I need it to look like this:</p>\n\n<pre><code>MD_ID|SOURCE|DESC           |MSG |SEGMNT|FIELD\n  21 |1     |Language       |A11 |PID   |33\n  21 |2     |Language       |A11 |PID   |33\n  21 |3     |Language       |A11 |PID   |33\n  22 |1     |Sex            |B22 |MSH   |8\n  22 |2     |Sex            |B22 |MSH   |8\n  22 |3     |Sex            |B22 |MSH   |8\n  23 |1     |Marital Status |C33 |NK1   |16\n  23 |2     |Marital Status |C33 |NK1   |16\n  23 |3     |Marital Status |C33 |NK1   |1\n  24 |1     |Religion       |D44 |GT1   |7\n  24 |2     |Religion       |D44 |GT1   |7\n  24 |3     |Religion       |D44 |GT1   |7\n</code></pre>\n"},{"tags":["c#","asp.net","oracle","oracle10g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3164,"score":0,"question_id":7832208,"title":"System.Data.OracleClient requires Oracle client software version 8.1.7 or greater","body":"<p>I have installed Oracle client version 10g on my PC(Registry ORACLE_BASE-D:\\oracle\\product\\10.2.0).\nI have added below references.\nSystem.Data.OracleClient.</p>\n\n<p>I am getting above mentioned error.\nBelow is the Code Snippet .</p>\n\n<pre><code>public static OracleConnection getConnection() \n    {\n\n        try \n        {\n            dataSource = new SqlDataSource();\n            dataSource.ConnectionString = System.Configuration.ConfigurationManager.AppSettings.Get(\"conn\");\n            OracleConnection connection = new OracleConnection();\n            if (dataSource == null) \n            {\n                // Error during initialization of InitialContext or Datasource\n                throw new Exception(\"###### Fatal Exception ###### - DataSource is not initialized.Pls check the stdout/logs.\");\n            } \n            else\n            {\n                connection.ConnectionString = dataSource.ConnectionString;\n                connection.Open();\n            }\n            return connection;            \n        }catch (Exception ex) \n        {\n            throw ex;\n        }  \n\n    }\n</code></pre>\n\n<p>Please let me know what are the areas of Concern and where Iam missing.I am new for the combination of Oracle and Asp.Net.</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12981173,"title":"SQL Error: ORA-00933: SQL command not properly ended Error at Line: 3 Column: 35","body":"<p>I'm creating a script that creates a TABLE and I have problem with the last command which I have to do:</p>\n\n<blockquote>\n<pre><code>SELECT Studenci.Nazwisko,\n   Trunc(Months_Between(Sysdate,Studenci.RokUrodzenia)/12) Wiek FROM\n   Studenci.RokUrodzenia to_date('1980','YYYY')\n</code></pre>\n</blockquote>\n\n<p>This is my script; what am I doing wrong?</p>\n\n<blockquote>\n<pre><code>    CREATE TABLE Studenci(\n       NrIndeksu NUMBER(3) PRIMARY KEY,\n       Nazwisko VARCHAR2(16),\n       RokUrodzenia NUMBER(4),\n       Kierunek VARCHAR2(12)\n    );\n\n    CREATE TABLE Wykladowcy(\n       IdWykladowcy NUMBER(4) PRIMARY KEY,\n       Nazwisko VARCHAR2(16),\n       Stopien VARCHAR2(6),\n       Stanowisko VARCHAR(8)\n    );\n\n    CREATE TABLE Kursy(\n       IdKursu NUMBER(1) PRIMARY KEY,\n       Nazwa VARCHAR2(18),\n       IdWykladowcy NUMBER(4) REFERENCES Wykladowcy\n    );\n\n    CREATE TABLE Rejstracje(\n       NrIndeksu NUMBER(3) REFERENCES Studenci , \n       IdKursu NUMBER(1)  REFERENCES Kursy ,\n       Data DATE\n    );\n\n\n    CREATE UNIQUE INDEX Ind_Kursy_naz ON Kursy(Nazwa);\n    CREATE INDEX Ind_Studenci_naz ON Studenci(Nazwisko);\n    CREATE INDEX Ind_Wykladowcy_naz ON Wykladowcy(Nazwisko);\n\n    INSERT INTO Wykladowcy VALUES (1010,'Kowalski Jan', 'Dr', 'Adiunkt');\n    INSERT INTO Wykladowcy VALUES (1011,'Jakubowski Emil','Dr hab','Docent');\n    INSERT INTO Wykladowcy VALUES (1012,'Gazda Mirosław','Dr','Profesor');\n\n    INSERT INTO Kursy VALUES (1,'Bazy danych',1010);\n    INSERT INTO Kursy VALUES (2,'Systemy operacyjne',1012);\n    INSERT INTO Kursy VALUES (3,'Multimedia',1011);\n    INSERT INTO Kursy VALUES (4,'Sieci komputerowe',null);\n\n    INSERT INTO Studenci VALUES (101,'Kuczyńska Ewa',1980,'Bazy danych');\n    INSERT INTO Studenci VALUES (102,'Lubicz Robert',1985,'Multimedia');\n    INSERT INTO Studenci VALUES (103,'Krajewski Bogdan',1988,'Bazy danych');\n    INSERT INTO Studenci VALUES (104,'Lityńska Anna',1987,'Multimedia');\n    INSERT INTO Studenci VALUES (105,'Marzec Marcin',1982,'Multimedia');\n    INSERT INTO Studenci VALUES (106,'Cichaocki Rafał',1989,'Bazy danych');\n\n    INSERT INTO Rejstracje VALUES (101,1,NULL);\n    INSERT INTO Rejstracje VALUES (102,3,NULL);\n    INSERT INTO Rejstracje VALUES (104,3,NULL);\n    INSERT INTO Rejstracje VALUES (106,1,NULL);\n    INSERT INTO Rejstracje VALUES (104,2,NULL);\n    INSERT INTO Rejstracje VALUES (101,4,NULL);\n    INSERT INTO Rejstracje VALUES (103,1,NULL);\n    INSERT INTO Rejstracje VALUES (103,1,NULL);\n    INSERT INTO Rejstracje VALUES (105,1,NULL);\n\n\n    UPDATE Rejstracje SET Rejstracje.IdKursu=Rejstracje.IdKursu*3\n    WHERE Rejstracje.NrIndeksu=105;\n    COMMIT UPDATE\n\n    INSERT INTO Rejstracje(Data)\n    VALUES (Sysdate);\n\n    SELECT *FROM Kursy\n    WHERE Kursy.IdWykladowcy IS NULL;\n\n    SELECT *FROM Rejstracje\n    WHERE Rejstracje.NrIndeksu=101;\n\n    SELECT Kursy.Nazwa \n    FROM Kursy\n    ORDER BY Nazwa ASC;\n\n    SELECT Studenci.Nazwisko,\n    Trunc(Months_Between(Sysdate,Studenci.RokUrodzenia)/12) Wiek\n    FROM Studenci.RokUrodzenia to_date('1980','YYYY')\n</code></pre>\n</blockquote>\n"},{"tags":["sql","arrays","oracle"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12981441,"title":"Oracle arrays \"contains\" function","body":"<p>I want to store a list of primary keys to other records in the same table. I then want to be able to perform a select that resembles something like:</p>\n\n<p><code>SELECT * FROM mytable WHERE myarraycol CONTAINS '123'</code></p>\n\n<p>I've seen that Oracle has an <a href=\"http://psoug.org/definition/ARRAY.htm\" rel=\"nofollow\">array data type</a>. However it looks like the EXISTS function only verifies if the element exists at the specified index. Is there a way to verify that a given variable is in the array data type column in a single SQL query?</p>\n\n<p>As an alternative to using the array data type I tried storing the PKs as a comma-delimited string like \"123,324,543,23432.\" My query then looked like:</p>\n\n<p><code>SELECT * FROM mytable WHERE mystringcol LIKE '%123%'</code></p>\n\n<p>if I wanted all records with the PK '123' in it. The problem with this (among many others) is that if another record has a value \"432,9912399,432\" this record will show up because of the \"123\" in the \"9912399.\"</p>\n\n<p>One way I could solve this problem using \"LIKE\" and string could be to have my where clause be:</p>\n\n<p><code>WHERE mystringcol LIKE '%,123,% OR mystringcol LIKE '%123, OR mystringcol LIKE '%,123</code> </p>\n\n<p>to test for \"123\" being in the middle, start or end of the entire string, but that starts to get ugly and I'd rather not do it this way.</p>\n\n<p>Has anyone done something like this before and can point me in the right direction?</p>\n"},{"tags":["sql","oracle","gps","spatial"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12961666,"title":"How to convert XY coordinates to GPS in Oracle Spatial?","body":"<p>I'm querying an SDO_GEOMETRY field to return a given point in a shape, and I would like to get the GPS coordinates for that point.  My query is as follows:</p>\n\n<pre><code>select \nsdo_lrs.locate_pt(sdo_lrs.convert_to_lrs_geom(shape),0.02).sdo_ordinates  \nfrom \nTEST_SCHEMA.TEST_TABLE\nwhere \nroute='ABC'\nand\nsegmentnum='101.1'\n</code></pre>\n\n<p>This returns an SDO_ORDINATE_ARRAY like so:</p>\n\n<pre><code>MDSYS.SDO_ORDINATE_ARRAY(100000.203621556,999999.57084293,0.02)\n</code></pre>\n\n<p>How do I convert the first two elements of the SDO_ORDINATE_ARRAY into GPS coordinates?  I haven't been able to find anything in the Oracle Spatial documentation related to a function that would accomplish this.</p>\n"},{"tags":["sql","oracle","tsql","plsql"],"answer_count":11,"favorite_count":3,"up_vote_count":10,"down_vote_count":0,"view_count":14285,"score":10,"question_id":41781,"title":"Microsoft T-SQL to Oracle PL/SQL translation","body":"<p>I've worked with T-SQL for years but i've just moved to an organisation that is going to require writing some Oracle stuff, probably just simple CRUD operations at least until I find my feet. I'm not going to be migrating databases from one to the other simply interacting with existing Oracle databases from an Application Development perspective. Is there are tool or utility available to easily translate T-SQL into PL/SQL, a keyword mapper is the sort of thing I'm looking for.</p>\n\n<p>P.S. I'm too lazy to RTFM, besides it's not going to be a big part of my role so I just want something to get me up to speed a little faster.</p>\n"},{"tags":["sql-server","oracle","stored-procedures","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":64,"score":2,"question_id":12980854,"title":"Oracle DB: Return second query if first query is empty","body":"<p>I am writing an Oracle stored procedure to return the results of a database query.  If the query does not produce any results, a second query must be run in its place.</p>\n\n<p>In SQL Server, I can accomplish this using something similar to the following:</p>\n\n<pre><code>INSERT INTO @TableVar\nSELECT &lt;joinQuery1&gt;;\n\nIF (SELECT COUNT(*) FROM @TableVar) &gt; 0\nBEGIN\n    SELECT * FROM @TableVar;  -- returns &lt;joinQuery1&gt;\nEND\nELSE\n    SELECT &lt;joinQuery2&gt;;  --returns &lt;joinQuery2&gt;\nEND\n</code></pre>\n\n<p>However, I can not wrap my head around how to accomplish the same task in Oracle.</p>\n"},{"tags":["java","oracle","ms-access","character-encoding","scriptella"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12973960,"title":"Scriptella encoding issue in migrating utf-8 data from access (mdb) to Oracle","body":"<p>I wrote program using java and scriptella(etl framework) to move data from access(mdb) to oracle, I changed the unicodeCompression in Access for each field to YES and I'v tested oracle encoding by adding utf-8 data in SqlDeveloper which is ok,Now when I run the program to move the data to Oracle I got questionMarks in records.</p>\n\n<p>here is my etl </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE etl SYSTEM \"http://scriptella.javaforge.com/dtd/etl.dtd\"&gt;\n&lt;etl&gt;\n    &lt;connection id=\"dbInput\"  url=\"jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=$MDB_FILE_NAME\" /&gt;\n    &lt;connection id=\"dbOutput\"  url=\"jdbc:oracle:thin:@localhost:1521:xe\" user=\"user\"    password=\"pass\" /&gt;\n    &lt;query connection-id=\"dbInput\" &gt;\n        SELECT * FROM table1;\n        &lt;script connection-id=\"dbOutput\"&gt; \n            INSERT INTO some_table(COLUMN1, COLUMN2, COLUMN3) values (?field1,\n            ?field2, ?field3);\n        &lt;/script&gt;\n    &lt;/query&gt;\n&lt;/etl&gt;\n</code></pre>\n\n<p>What's wrong with that?</p>\n\n<p>I'v seen input/output encoding in ETL tools such as jasperETL , is there something like that in scriptella ?</p>\n\n<p><img src=\"http://i.stack.imgur.com/3Bzwz.png\" alt=\"Access data\">\n<img src=\"http://i.stack.imgur.com/3JudX.png\" alt=\"moved data in oracle , the last one(id=4) I filled in SqlDeveloper\">\nmoved data in oracle , the last one(id=4) I filled it directly in SqlDeveloper</p>\n"},{"tags":["sql","oracle","date"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":5275,"score":3,"question_id":2399753,"title":"Select from table by knowing only date without time (ORACLE)","body":"<p>Greeting People,</p>\n\n<p>I'm trying to retrieve records from table by knowing the date in column contains date and time.</p>\n\n<p>Suppose I have table called <code>t1</code> which contains only two column <code>name</code> and <code>date</code> respectively.</p>\n\n<p>The data stored in column date like this <code>8/3/2010 12:34:20 PM</code>.</p>\n\n<p>I want to retrieve this record by this query for example (note I don't put the time):</p>\n\n<pre><code>Select * From t1 Where date=\"8/3/2010\"\n</code></pre>\n\n<p>This query give me nothing ! </p>\n\n<p>How can i retrieve date by knowing only date without the time?</p>\n"},{"tags":["oracle","query","clob"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":239,"score":1,"question_id":12980038,"title":"ORA-00932: inconsistent datatypes: expected - got CLOB","body":"<p>Considering  that <code>TEST_SCRIPT</code> is a <code>CLOB</code>  why when I run this simple query from SQL*PLUS on Oracle , I get the error:</p>\n\n<pre><code>ORA-00932: inconsistent datatypes: expected - got CLOB\n</code></pre>\n\n<p>I have been reading a lot of questions about the same error but none of those is running a direct query from SQLPLUS </p>\n\n<pre><code>    UPDATE IMS_TEST \n       SET TEST_Category  = 'just testing'  \n     WHERE TEST_SCRIPT    = 'something'\n       AND ID             = '10000239' \n</code></pre>\n\n<p>Full example:</p>\n\n<pre><code>SQL&gt; create table ims_test(\n  2  test_category varchar2(30),\n  3  test_script clob,\n  4  id varchar2(30)\n  5  );\n\nTable created.\n\nSQL&gt; insert into ims_test values ('test1','something','10000239');\n\n1 row created.\n\nSQL&gt; UPDATE IMS_TEST\n  2  SET TEST_Category  = 'just testing'\n  3  WHERE TEST_SCRIPT    = 'something'\n  4  AND ID             = '10000239';\nWHERE TEST_SCRIPT    = 'something'\n      *\nERROR at line 3:\nORA-00932: inconsistent datatypes: expected - got CLOB\n</code></pre>\n"},{"tags":["sql","oracle","query","select","pivot"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":12979452,"title":"Transposing Non-Aggregate Fields in an Oracle SELECT","body":"<p>For a table structured as such:</p>\n\n<pre><code>\"Object Attribute\" Table - Links objects with all of their attributes and values;\nObject ID       Attribute ID    Attribute String Value  ...\n1337            123             Example Object Title\n1337            124             Example Object Type\n1337            125             Example Object Description\n1337            126             Example Object Author\n0001            123             (null)\n0001            124             SomeType\n0001            125             This is an example record\n0001            126             Jiman\n0002            123             Bar\n0002            124             BarType\n0002            125             This is another\n0002            126             Jiman\n</code></pre>\n\n<p>EDIT: Attribute ID's have the following mapping:</p>\n\n<pre><code>Attribute ID    Attribute Name\n123             Title\n124             Type\n125             Description\n126             Author\n</code></pre>\n\n<p>How would I compose an Oracle query that returns a transposed set of data, where the Title field is NULL?</p>\n\n<p>Example output:</p>\n\n<pre><code>ID      Title       Type        Description             Author\n0001    (null)      FooType     This is an example...   Jiman\n</code></pre>\n\n<p>Can PIVOT be used to transpose non-aggregate values (i.e., those string attributes)?</p>\n"},{"tags":["sql","database","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":85,"score":2,"question_id":12899078,"title":"Filter SQL query result set based on arbitrary time","body":"<p>I am currently running the following SQL <a href=\"http://sqlfiddle.com/#!4/de6bb/1\" rel=\"nofollow\">fiddle</a></p>\n\n<p>and am trying to get the following to be true:  </p>\n\n<p>I only want the set of <code>cats</code> that have had  a <code>last_checked</code> value of some arbitrary time and are <code>sick</code>.  for the sake of discussion lets make it now minus 12 hours.  (<code>sysdate - Interval '12' hour</code>).  What I am getting back is the <code>cat</code> that was <code>last_checked</code> 11 hours ago, but that <code>cat</code> has a more recent status of now where he is no longer sick.  How can I construct a query in such a way that I ignore the old <code>sick</code> entry and only concern myself with the new <code>healthy</code> status?  By that I mean ignore this result because the cat is no longer sick.</p>\n\n<p><strong>Question</strong>  </p>\n\n<blockquote>\n  <p>So... do you want the most recent status regardless, the most recent\n  status of only those cats that have been sick in the given timeframe,\n  or only healthy cats?</p>\n</blockquote>\n\n<p>I only want a status to be returned to me if it is the most recent (max) AND the status is also <code>sick</code>.  In the fiddle it will show an example what I don't want to happen, it will return the status of sick with the timestamp of <code>11 hours ago</code> but there is a more recent one.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>The following function:  </p>\n\n<pre><code>select cat_id, last_checked, sick\nfrom\n(\n    select cat_id, last_checked, sick,\n             ROW_NUMBER() over (partition by cat_id order by last_checked desc) rn\n    from cats\n    where last_checked &gt;= sysdate- INTERVAL '12' hour\n) v\nwhere rn = 1\nand sick = 1;\n</code></pre>\n\n<p>provided by @podiluska  only retrieves the first result.  I need it to be on a <code>cat</code> by <code>cat</code> basis.  </p>\n\n<p><strong>Second Update</strong>  </p>\n\n<p>The solution provided by Podiluska:  </p>\n\n<pre><code>select cat_id, last_checked, sick\nfrom\n(\n    select cat_id, last_checked, sick,\n             ROW_NUMBER() over (partition by cat_id order by last_checked desc) rn\n    from cats\n    where last_checked &gt;= sysdate- INTERVAL '12' hour\n) v\nwhere rn = 1;\n</code></pre>\n\n<p>will work on small data sets.  The accepted answer (the one I used) will work most effectively on large data sets.</p>\n"},{"tags":["java","oracle","jdbc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":124,"score":0,"question_id":12943379,"title":"Fresh install of JDBC for Oracle - does not execute","body":"<p>This is my first attempt to connect to an Oracle DB (10g) using JDBC. I have JDK 6 installed on my machine and trying to connect to an Oracle DB on a server. I have downloaded <strong>ojdbc6.jar</strong> and copied it to <strong>C:\\oracle\\product\\10.2.0\\client_1\\jdbc\\lib</strong>.</p>\n\n<p>I have also set the following CLASS PATH:</p>\n\n<pre><code>.;\nC:\\;\nC:\\oracle\\product\\10.2.0\\client_1\\jdbc\\lib\\ojdbc6.jar;\nC:\\oracle\\product\\10.2.0\\client_1\\jlib\\orai18n.jar;\nC:\\Program Files\\QuickTime\\QTSystem\\QTJava.zip\n</code></pre>\n\n<p>The following code gets compiled, however when I try to run the class file, it throws an error </p>\n\n<pre><code>C:\\&gt;java JDBCVersion\njava.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:169)\n        at JDBCVersion.main(JDBCVersion.java:10)\n</code></pre>\n\n<p>I save my .java files in C:\\ to compile and run from this directory.</p>\n\n<pre><code>import java.io.*;\nimport java.sql.*;\n\nclass JDBCVersion\n{\n\n  public static void main (String args[]) throws SQLException{\n  try{\n  Connection con=null;\n      Class.forName(\"oracle.jdbc.driver.OracleDriver\");\n      con=DriverManager.getConnection(\n      \"jdbc:oracle:thin:@HOSTNAME:1521:MYORADB\",\n        \"SCOTT\",\n        \"TIGER\");\n      Statement s=con.createStatement();\n      s.execute(\"SELECT * FROM EMPLOYEE\");\n      s.close();\n      con.close();\n   } catch(Exception e){e.printStackTrace();}\n   }\n }\n</code></pre>\n\n<p>@dardo...I added the .jar file directly in the CLASSPATH and it compiled but when I run the class file I get the following error message</p>\n\n<pre><code>C:\\&gt;java JDBCVersion\nException in thread \"main\" java.lang.NoSuchMethodError: oracle.i18n.text.convert\ner.CharacterConverterOGS.getInstance(I)Loracle/i18n/text/converter/CharacterConverter;\n        at oracle.sql.converter.CharacterConverterFactoryOGS.make(CharacterConverterFactoryOGS.java:43)\n        at oracle.sql.CharacterSetWithConverter.getInstance(CharacterSetWithConverter.java:97)\n        at oracle.sql.CharacterSetFactoryThin.make(CharacterSetFactoryThin.java:129)\n        at oracle.sql.CharacterSet.make(CharacterSet.java:514)\n        at oracle.jdbc.driver.DBConversion.init(DBConversion.java:169)\n        at oracle.jdbc.driver.DBConversion.&lt;init&gt;(DBConversion.java:120)\n        at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1135)\n        at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:320)\n        at oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:546)\n        at oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:236)\n        at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)\n        at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:521)\n        at java.sql.DriverManager.getConnection(DriverManager.java:582)\n        at java.sql.DriverManager.getConnection(DriverManager.java:185)\n        at JDBCVersion.main(JDBCVersion.java:15)\n</code></pre>\n"},{"tags":["oracle","oracle11g","sql-developer"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12978012,"title":"Oracle 11g cannot access nls data file, while connecting via sqldeveloper","body":"<p>When i try to connect via sqldeveloper i getting \"cannot access nls data file\" ORA-12705 error. NLS lang is in SOFTWARE\\ORACLE\\KEY_XE with value RUSSIAN_RUSSIA.CL8MSWIN1251. Connection via sql plus works fine. How this error can be resolved? Thanks.\nOracle 11g release 2 express edition.\nos win7 x64</p>\n"},{"tags":["sql","oracle","plsql","where-clause","condition"],"answer_count":2,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":262,"score":6,"question_id":11036376,"title":"How to write a function only used in the where clause that evaluates to true without a comparison operator?","body":"<p><strong>My question is:</strong>\nIn Oracle regexp_like works alone in the where clause without having to compare to 1 or 0 or a string. The function can only be called when evaluating something in a case statement or the where clause. Since it can't be described (tried searching the data dictionary for it) I'm wondering how to write a function that works the same way.</p>\n\n<p><strong>For example:</strong> </p>\n\n<pre><code>function is_prod\nreturns boolean\nis \n  l_var boolean := false;\nbegin\n  if sys_context('userenv','db_unique_name') = '\"PROD_SERVER\"' then\n    l_var := true;\n  end if;\nreturn l_var;\nend;\n</code></pre>\n\n<p>That function compiles, but cannot be used in a SQL statement like the following:</p>\n\n<pre><code>select *\nfrom table t\nwhere is_prod\n</code></pre>\n\n<p>Because I get the following error: ORA-00920: invalid relational operator.</p>\n\n<p>Comparing it to a number or true doesn't work either.</p>\n\n<p><strong>Where can I find the code base for regexp_like or what do I need to do to make this work like regexp_like?</strong></p>\n\n<p>Note: I've looked around for several hours and found that Oracle's regexp functions are actually java calls, but that means they still need a pl/sql wrapper.</p>\n"},{"tags":["performance","oracle","query","database-design","data-warehouse"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":65,"score":0,"question_id":12973618,"title":"Oracle explain plan over simple select performs multiple hash joins when multiple columns are indexed in a table","body":"<p>I am currently running into an issue with my Oracle instance.  I have two simple select statements:  </p>\n\n<pre><code>select * from dog_vets  \n</code></pre>\n\n<p>and  </p>\n\n<pre><code>select * from dog_statuses\n</code></pre>\n\n<p>and the following <a href=\"http://sqlfiddle.com/#!4/37754\" rel=\"nofollow\">fiddle</a></p>\n\n<p>My explain plan on <code>dog_vets</code> is as follows:  </p>\n\n<pre><code> 0 | Select Statement  \n 1 | Table Access Full Scan dog_vets\n</code></pre>\n\n<p>my explain plan on <code>dog_statuses</code>  is as follows:  </p>\n\n<pre><code>ID|Operation | Name | Rows |Bytes | cost | time    \n0 | Select Statement |  | 20G | 500M | 100000 | 999:99:17  \n1 | View  | index%_join_001 | 20G | 500M | 100000 | 999:99:17  \n2 | Hash Join  |  | | | |   \n3 | Hash Join  |  | | | |   \n4 | Index fast full scan dog_statuses_check_up  |  | 20G | 500M | 100000 | 32:15:00  \n5 | Index fast full scan dog_statuses_sick|  | 20G | 500M | 100000 | 35:19:00  \n</code></pre>\n\n<p>To get this type of output execute the following statement:  </p>\n\n<pre><code>explain plan for   \nselect * from dog_vets;\n</code></pre>\n\n<p>OR</p>\n\n<pre><code> explain plan for   \n    select * from dog_statuses;\n</code></pre>\n\n<p>and then  </p>\n\n<pre><code>select * from table(dbms_xplan.display);\n</code></pre>\n\n<p>Now my question is, why do multiple indexes imply a view (materialized  I assume) being created in my above statements and further what type of performance hit am I suffering on this type of query?  As it stands now <code>dog_vets</code> has ~300 million records and <code>dog_Statuses</code> has about 500 million.  I have yet to be able to get <code>select * from dog_statuses</code> to return in under 10 hours.  This is primarily because the query dies before it completes.  </p>\n\n<p><strong>DDL</strong>  </p>\n\n<p>In case sql fiddle dies:  </p>\n\n<pre><code>create table dog_vets\n(\n     name varchar2(50),\n     founded timestamp,\n     staff_count number\n  );\n\ncreate table dog_statuses\n(\n      check_up timestamp,\n      sick varchar2(1)\n  );\n\n\ncreate index dog_vet_name\non dog_vets(name);\n\ncreate index dog_status_check_up\non dog_statuses(check_up);\n\ncreate index dog_status_sick\non dog_statuses(sick);\n</code></pre>\n"},{"tags":["java","sql","oracle","hibernate","hql"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":387,"score":2,"question_id":11793159,"title":"how to use Oracle's regexp_like in Hibernate HQL?","body":"<p>I am using <code>oracle 10g</code> and <code>hibernate 3.3.2</code>. I have used regular expression in sql before, now for the first time I am using it in HQL.</p>\n\n<pre><code>Query query = getSession().createQuery(\"From Company company \nwhere company.id!=:companyId and \nregexp_like(upper(rtrim(ltrim(company.num))), '^0*514619915$' )\");\n</code></pre>\n\n<p>This is my hql, when i run it without <code>regex_like</code> function it runs as expected. But I am not able to execute it with <code>regex_like</code> expression. </p>\n\n<p>It says..</p>\n\n<blockquote>\n  <p>nested exception is org.hibernate.hql.ast.QuerySyntaxException:\n  unexpected AST node: ( near line 1, column 66.....</p>\n</blockquote>\n\n<p>Kindly help, how can I use <code>regex_like</code> in hibernate native query? OR some other alternative to do so.</p>\n"},{"tags":["oracle","oracle11g","sqlplus"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5151,"score":0,"question_id":8782842,"title":"TNS Protocol adapter error while starting Oracle SQL*Plus","body":"<p>Whenever I try to login into SQL*Plus (11g Standar Edition Win 64) I get an error related to some connection error.</p>\n\n<p>I try to login as sys as sysdba and provide the password. </p>\n\n<p>All the services are started. I'm on Windows 7.</p>\n\n<p>Any help would be appreciated.</p>\n\n<p><img src=\"http://i.stack.imgur.com/9byNL.png\" alt=\"enter image description here\"></p>\n"},{"tags":["sql","database","oracle","join","oracle10g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":98,"score":0,"question_id":12968460,"title":"ora-01861 literal does not match format string","body":"<pre><code>select contract.contract_id\nfrom swcd.scd_contract contract \n\nleft join SCD.COMPANY_TIMELINE_VIEW customer on (customer.company_id=contract.customer_company_id and to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '1-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '1-APR-'\nwhen contract.ANNOUNCEMENT_QUARTER='Q3' then '1-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '1-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') &gt;= (CASE WHEN customer.EVENT_START_DATE is null THEN to_date('01-JAN-1901', 'DD-Mon-YYYY') else \ntrunc(customer.EVENT_START_DATE) END) AND to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '1-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '1-APR-'\nwhen contract.ANNOUNCEMENT_QUARTER='Q3' then '1-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '1-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') &lt;= (CASE WHEN customer.EVENT_END_DATE is null THEN to_date('01-JAN-2101', 'DD-Mon-YYYY') else \ntrunc(customer.EVENT_END_DATE) END)) \n\nleft join SCD.COMPANY_TIMELINE_VIEW vendor on (vendor.company_id=contract.vendor_company_id and to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '1-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '1-APR-'\nwhen contract.ANNOUNCEMENT_QUARTER='Q3' then '1-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '1-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') &gt;= (CASE WHEN vendor.EVENT_START_DATE is null THEN to_date('01-JAN-1901', 'DD-Mon-YYYY') else\ntrunc(vendor.EVENT_START_DATE) END) AND to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '1-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '1-APR-'\nwhen contract.ANNOUNCEMENT_QUARTER='Q3' then '1-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '1-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') &lt;= (CASE WHEN vendor.EVENT_END_DATE is null THEN to_date('01-JAN-2101', 'DD-Mon-YYYY') else \ntrunc(vendor.EVENT_END_DATE) END));\n</code></pre>\n\n<p>This is my query I am executing on Oracle 10g. This shows a strange behavior to me.\nWhen I execute the <code>select</code> query with either of join it works fine, But with both the required joins it says <code>ora-01861 literal does not match format string</code>.</p>\n\n<pre><code>-- Works fine\nselect contract.contract_id\nfrom swcd.scd_contract contract \n\nleft join SCD.COMPANY_TIMELINE_VIEW customer on (customer.company_id=contract.customer_company_id and to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '1-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '1-APR-'\nwhen contract.ANNOUNCEMENT_QUARTER='Q3' then '1-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '1-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') &gt;= (CASE WHEN customer.EVENT_START_DATE is null THEN to_date('01-JAN-1901', 'DD-Mon-YYYY') else \ntrunc(customer.EVENT_START_DATE) END) AND to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '1-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '1-APR-'\nwhen contract.ANNOUNCEMENT_QUARTER='Q3' then '1-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '1-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') &lt;= (CASE WHEN customer.EVENT_END_DATE is null THEN to_date('01-JAN-2101', 'DD-Mon-YYYY') else \ntrunc(customer.EVENT_END_DATE) END));\n\n-- Works fine\nselect contract.contract_id\nfrom swcd.scd_contract contract \nleft join SCD.COMPANY_TIMELINE_VIEW vendor on (vendor.company_id=contract.vendor_company_id and to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '1-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '1-APR-'\nwhen contract.ANNOUNCEMENT_QUARTER='Q3' then '1-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '1-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') &gt;= (CASE WHEN vendor.EVENT_START_DATE is null THEN to_date('01-JAN-1901', 'DD-Mon-YYYY') else\ntrunc(vendor.EVENT_START_DATE) END) AND to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '1-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '1-APR-'\nwhen contract.ANNOUNCEMENT_QUARTER='Q3' then '1-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '1-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') &lt;= (CASE WHEN vendor.EVENT_END_DATE is null THEN to_date('01-JAN-2101', 'DD-Mon-YYYY') else \ntrunc(vendor.EVENT_END_DATE) END));\n</code></pre>\n\n<p>Please help me, Any answer would be appreciated.</p>\n\n<pre><code>Error report:\nSQL Error: ORA-01861: literal does not match format string\n01861. 00000 -  \"literal does not match format string\"\n*Cause:    Literals in the input must be the same length as literals in\n           the format string (with the exception of leading whitespace).  If the\n           \"FX\" modifier has been toggled on, the literal must match exactly,\n           with no extra whitespace.\n*Action:   Correct the format string to match the literal.\n</code></pre>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":34,"score":-1,"question_id":12975361,"title":"Bulk update of only date and month in DATE column","body":"<p>I have a column with datatype as DATE in oracle. I want to update all the coumns with date and month as '01-JAN' and I don't want disturb the year.</p>\n\n<p>For example:\nBefore update:</p>\n\n<pre><code>DATE\n======\n05-DEC-12\n07-FEB-11\n27-MAR-99\n</code></pre>\n\n<p>After update:</p>\n\n<pre><code>DATE\n======\n01-JAN-12\n01-JAN-11\n01-JAN-99\n</code></pre>\n\n<p>Can you please provide me the UPDATE query to achieve this?</p>\n"},{"tags":["oracle","date","constraints"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":4674,"score":2,"question_id":5332562,"title":"Using date in a check constraint, Oracle","body":"<p>I am trying to check add the following constraint but Oracle returns the error shown below.</p>\n\n<pre><code>ALTER TABLE Table1\nADD (CONSTRAINT GT_Table1_CloseDate\nCHECK (CloseDate &gt; SYSDATE),\nCONSTRAINT LT_Table1_CloseDate\nCHECK (CloseDate &lt;= SYSDATE + 365)),\nCONSTRAINT GT_Table1_StartDate\nCHECK (StartDate &gt; (CloseDate + (SYSDATE + 730))));\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Error report:\nSQL Error: ORA-02436: date or system variable wrongly specified in CHECK constraint\n02436. 00000 -  \"date or system variable wrongly specified in CHECK constraint\"\n*Cause:    An attempt was made to use a date constant or system variable,\n           such as USER, in a check constraint that was not completely\n           specified in a CREATE TABLE or ALTER TABLE statement.  For\n           example, a date was specified without the century.\n*Action:   Completely specify the date constant or system variable.\n           Setting the event 10149 allows constraints like \"a1 &gt; '10-MAY-96'\",\n           which a bug permitted to be created before version 8.\n</code></pre>\n"},{"tags":["oracle","coldfusion","oracle10g","sql-update","coldfusion-9"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":12884022,"title":"Updating record when table is empty - CF hangs","body":"<p>I came across something yesterday that took me a while to figure out. On this code, the server hangs when no records exist in the table being updated, and doesn't give a timeout error or any error for that matter. With records in the second table, the code works fine. </p>\n\n<pre><code>&lt;cfquery name=\"getSomething\"&gt;\n    SELECT one, two\n    FROM some_table\n    WHERE conditions = 'my conditions'\n&lt;/cfquery&gt;\n&lt;cfloop query=\"getSomething\"&gt;\n    &lt;cfquery name=\"updateSomethingElse\"&gt;\n        UPDATE other_table\n        SET three = 'my value'\n        WHERE four = #getSomething.one#\n        AND five = #getSomething.two#\n    &lt;/cfquery&gt;\n    &lt;!--- always run an insert ---&gt;\n    &lt;cfquery name=\"insertSomething\"&gt;\n        INSERT INTO other_table\n        (columns)\n        VALUES\n        (values)\n    &lt;/cfquery&gt;\n&lt;/cfloop&gt;\n</code></pre>\n\n<p>I'm thinking this is a CF problem because running the update query in Toad does what one would expect when there are no records - nothing. </p>\n\n<p>I fixed it by first running a query to get the count of records in the second table, and only running the update query if the record count is greater than 0. </p>\n\n<p>This is using Oracle 10, CF 9.02 with hotfixes.</p>\n\n<p>Notes: the select query returns between 2K/20K records; \n    the update and insert queries both run correctly when there are existing records in the second table; \n    removing the update query allows the insert queries to run regardless of whether there are records in the second table.</p>\n\n<p>EDIT: I'm going to explore moving both the update and insert queries out of the loop as suggested below. I still don't think the original question (of why the server hangs in the situation of no records in the second table) has yet been answered though.</p>\n"},{"tags":[".net","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12973640,"title":"How to programmatically check oracle version","body":"<p>I have a small <code>.NET 3.5</code> program which raises errors when trying to connect to an Oracle database, if it cannot access the <code>Oracle client DLL oci.dll</code> or if the <code>oracle DLL</code> version is too old. The message is:</p>\n\n<pre><code>System.Data.OracleClient requires Oracle client software version 8.1.7 or greater.\n</code></pre>\n\n<p>However, the exception causes the program to crash. So I would like to make the test when the program starts and gracefully terminate it if needed, with a message informing the user that he needs to <code>update/install/fix</code> the installation of <code>Oracle Client</code>. I've seen in the stack trace the method <code>System.Data.OracleClient.OCI.DetermineClientVersion()</code> but it seems not to be public. Any idea?</p>\n"},{"tags":["java","oracle","jdbc","transactions","ibatis"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12975153,"title":"proper iBatis method for SELECT ~~~ FOR UPDATE oracle SQL query?","body":"<p>I'm developing a web-based service using jBoss5 + Struts + iBatis.</p>\n\n<p>Is there any proper method for \"SELECT ... FOR UPDATE\" oracle query (I mean, select iBatis method which involves transaction management)??</p>\n\n<p>....</p>\n\n<p>My question is this. A certain part of my program causes RX lock of some rows of a table.</p>\n\n<p>source like below,</p>\n\n<pre><code>try{\n    sqlMap.startTransaction();\n    ...\n    HashMap someMap = (HashMap)sqlMap.queryForObject(\"theSelectSQLusesForUpdate\",someOtherMap);\n    // usually hangs at the sentence above\n    ...\n    //inserts, updates, selects, ~~~\n    ...\n    sqlMap.commitTransaction();\n} catch block {} finally {\n    sqlMap.endTransaction();\n}\n</code></pre>\n\n<p>I found that \"SELECT ... FOR UPDATE\" sentences are treated as DML by Oracle.\nSo, my SQL which uses \"FOR UPDATE\" should involve some kind of transaction management, but iBatis doesn't support for it as the query is defined in  ...  block.</p>\n\n<p>Again my question, Is there any proper method for \"SELECT ... FOR UPDATE\" oracle query (I mean, select iBatis method which involves transaction management)??</p>\n\n<p>if someone gives me the answer, he or she is my savior..</p>\n\n<p>thanks.</p>\n"},{"tags":["oracle","currency","comma"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":89,"score":3,"question_id":12974856,"title":"Oracle SQL - change decimal dot for a comma","body":"<p>I'm on Brazil, and our currency format is something like 'R$ 9.999,00'. </p>\n\n<p>I'm trying to select a field, and change the format of the return. However, it seems I can't do it. I've tried:</p>\n\n<pre><code>ALTER SESSION SET NLS_NUMERIC_CHARACTERS = ',.';\n</code></pre>\n\n<p>and</p>\n\n<pre><code>SELECT to_char(10,'9,999.00', 'NLS_NUMERIC_CHARACTERS = '',.''') FROM DUAL\n</code></pre>\n\n<p>None of those worked. Not sure if it might be my client (I'm on Ubuntu using sqldeveloper), or if I'm doing something wrong.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["oracle","indexing","index","privileges","ora-20000"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2078,"score":0,"question_id":2325328,"title":"Insufficient privilege when creating an index in Oracle 11g","body":"<p>I am trying to create an index in Oracle, my ddl :</p>\n\n<pre><code>create index OMD_DOCTEXT2_CTX on table_name(col_name)\nindextype is ctxsys.context local\nparameters ('datastore CTXSYS.FILE_DATASTORE filter ctxsys.null_filter  lexer E2LEX wordlist E2WORDLIST stoplist E2STOP section group E2GROUP') parallel 4;\n</code></pre>\n\n<p>I am getting error :</p>\n\n<pre><code>ORA-29855: error occurred in the execution of ODCIINDEXCREATE routine\nORA-20000: Oracle Text error:\nDRG-10758: index owner does not have the privilege to use file or URL datastore\nORA-06512: at \"CTXSYS.DRUE\", line 160\nORA-06512: at \"CTXSYS.TEXTINDEXMETHODS\", line 366\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["oracle","plsql","table-functions"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12974284,"title":"Callback function in Oracle PL/SQL","body":"<p>I have been doing some data transformation/processing in PL/SQL and I want to <strong>eliminate duplicate code</strong> from my package. This are the relevant code parts.</p>\n\n<p>Input type for the table function:</p>\n\n<pre><code>type t_legs_cur is ref cursor return legs%rowtype;  \n</code></pre>\n\n<p>Procedure that process one record:</p>\n\n<pre><code>procedure discontinuity_rule(p_leg in out nocopy legs%rowtype) as\nbegin\n  null; --business logic here\nend discontinuity_rule;\n</code></pre>\n\n<p>Table function that iterates over a cursor, process each row in cursors and pipes the output (if any):</p>\n\n<pre><code>function apply_discontinuity_rule(p_cur t_legs_cur)\n  return t_legs pipelined\n  order p_cur by (/* some fields */)    \n  parallel_enable (partition p_cur by range (/* some fields */))\nas\n  v_leg legs%rowtype;\nbegin\n  loop\n    fetch p_cur into v_leg;\n    exit when p_cur%notfound;\n\n    discontinuity_rule(v_leg); --call back\n\n    if v_leg.id is not null then\n      pipe row (v_leg);\n    end if;\n\n  end loop;\nend apply_discontinuity_rule;\n</code></pre>\n\n<p>There are several steps of transformation/processing, e.g. I would run the following select to do the some processing and apply some rules in a given order:</p>\n\n<pre><code>select * from table(trip_rules.generate_trips_from_legs(cursor(\n  select * from table(trip_rules.apply_5_legs_rule(cursor(\n    select * from table (trip_rules.apply_previous_city_rule(cursor(\n      select * from table (trip_rules.apply_backhaul_rule(cursor(\n        select * from table(trip_rules.apply_connection_time_rule(cursor(\n          select * from table(trip_rules.apply_discontinuity_rule(cursor(\n            select * from table(trip_rules.generate_legs_from_input(cursor(\n              select * from INPUT_DATA\n            )))\n          )))\n        )))\n      )))\n    )))\n  )))\n)));\n</code></pre>\n\n<p>This is all fine and dandy, only problem is, my trip_rule package contains many <code>apply_*_rule</code> functions. They all similar to the example <code>apply_discontinuity_rule</code>. The only difference is the actual procedure (<code>discontinuity_rule</code>) they call back. </p>\n\n<p>SO, my question would be, how can I avoid to copy the code of the <code>apply_*</code> functions. Is there a more elegant way to do this then use a big if: <code>if p_rule_name == 'discontinuity_rule' then</code></p>\n\n<pre><code>function apply_rule(p_cur t_legs_cur, p_rule_name in varchar2)\n  return t_legs pipelined\n  order p_cur by (/* some fields */)    \n  parallel_enable (partition p_cur by range (/* some fields */))\nas\n  v_leg legs%rowtype;\nbegin\n  loop\n    fetch p_cur into v_leg;\n    exit when p_cur%notfound;\n\n    if p_rule_name == 'discontinuity_rule' then\n      discontinuity_rule(v_leg);\n    elsif p_rule_name == 'other_rule' then\n      other_rule(v_leg);\n    elsif p_rule_name == 'totally_other_rule' then\n      totally_other_rule(v_leg);\n    -- and so on...\n    end if;\n\n    if v_leg.id is not null then\n      pipe row (v_leg);\n    end if;\n\n  end loop;\nend apply_rule;\n</code></pre>\n\n<p>I also understand that it would be possible to create an anonymous PL/SQL block on the fly using the procedure name and execute it as dynamic SQL. I wonder if it can be done properly, without killing my performance. Any idea is appreciated.</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12972265,"title":"Validating optimization of an Oracle query","body":"<p>Ok, so I'm working on this (rather old) project at work, which uses loads of queries towards an Oracle database. I recently stumbled upon this gem, which takes about 6-7 <em>hours</em> to run and returns ~1400 rows. The table/view in question contains ~200'000 rows. I thought this felt like it was taking maybe a little longer than seemed reasonable, so I started having a closer look at it. Now I can't, for security/proprietary reasons, share the exact query, but this should show what the query does in more general terms:</p>\n\n<pre><code>SELECT\n    some_field,\n    some_other_field\nFROM (\n    SELECT\n        *\n    FROM\n        some_view a\n    WHERE\n        some_criteria AND\n        a.client_no || ':' || a.engagement_no || ':' || a.registered_date = (\n            SELECT\n                b.client_no || ':' || b.engagement_no || ':' || MAX(b.registered_date)\n            FROM\n                some_view b\n                JOIN some_engagement_view e\n                    ON e.client_no = b.client_no AND e.engagement_no = b.engagement_no\n                JOIN some_client_view c\n                    ON c.client_no = b.client_no\n            WHERE\n                some_other_criteria AND\n                b.client_no = a.client_no AND\n                b.engagement_no = a.engagement_no\n            GROUP BY\n                b.client_no,\n                b.engagement_no\n        )\n);\n</code></pre>\n\n<p>Basically what it is supposed to do, as far as I've managed to figure out, is to from some_view (which contains evaluations of customers/engagements) fetch the latest evaluation for every unique client/engagement.</p>\n\n<p>The two joins are there to ensure that the client and engagement exists in another system, where they are primarily handled after you have done the evaluation in this system.</p>\n\n<p>Notice how it concatenates two numbers and a date, and then compares that to a sub-query? \"Interesting\" design-choice. So I thought that if you replace the concatenation with a proper comparison you might get some kind of performance gain at least. Please notice that I primarily develop .NET and for the web, and am far from an expert when it comes to databases, but I rewrote it as follows:</p>\n\n<pre><code>SELECT\n    some_field,\n    some_other_filed\nFROM\n    some_view a\nWHERE\n    some_criteria AND\n    (a.client_no, a.engagement_no, a.registered_date) = (\n        SELECT\n            b.client_no,\n            b.engagement_no,\n            MAX(b.registered_date)\n        FROM\n            some_view b\n            JOIN some_engagement_view e\n                ON e.client_no = b.client_no AND e.engagement_no = b.engagement_no\n            JOIN some_client_view c\n                ON c.client_no = b.client_no\n        WHERE\n            some_other_criteria AND\n            b.client_no = a.client_no AND\n            b.engagement_no = a.engagement_no\n        GROUP BY\n            b.client_no,\n            b.engagement_no\n    )\n);\n</code></pre>\n\n<p>Now if I replace the fields in the very first select with a <code>COUNT(1)</code>, I get exactly the same number of rows with both queries, so a good start. The new query fetches data just as fast as it counts, &lt; 10 seconds. The old query gets the count in ~20 seconds, and as I mentioned before, the data takes close to 6-7 hours. It is currently running so that I can do some kind of analysis to see if the new query is valid, but I thought that I'd ask here as well to see if there is anything apparently wrong that I have done?</p>\n\n<p><strong>EDIT</strong> Also removed the outer-most query, which did not seem to fulfill any kind of purpose, except maybe making the query look cooler.. or something.. I dunno..</p>\n"},{"tags":["oracle","select","plsql","oracle11g","pivot"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12972743,"title":"PIVOT, how to convert other than specified rows to a column?","body":"<p>I have <code>ID</code> and <code>NUMBER</code> columns in my table.</p>\n\n<p>IDs can be something from 1 to 200, and NUMBERs can be anything from 1 to 100000.</p>\n\n<p>The below code works perfect.</p>\n\n<pre><code>SELECT *\nFROM PIVOT_DATA\nPIVOT (\n    SUM(NUMBER)\n    FOR (ID)\n    IN (1 , 2)\n    );\n</code></pre>\n\n<p>But, I want to select 3 columns (1, 2, Others), how can I select all the other IDs other than 1 or 2 ? It should be something like the code below, but what?</p>\n\n<pre><code>SELECT *\nFROM PIVOT_DATA\nPIVOT (\n    SUM(NUMBER)\n    FOR (ID)\n    IN (1 , 2, OTHERS)\n    );\n</code></pre>\n"},{"tags":["java","oracle","stored-procedures","jdbc","callable-statement"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12973588,"title":"Call a Oracle Procedure in a Java Batch containing Insert and Update Queries (Statement)","body":"<p>I am working on a Java based project, where things are implemented in the following way</p>\n\n<ul>\n<li>There are some classes <strong>(A,B,C,D....)</strong> which takes Hash Map having key as an Integer and value as an array list of String. Every String element in the arraylist is a Oracle SQL Query (INSERT or UPDATE)</li>\n<li>These methods of classes <strong>(A,B,C,D....)</strong> loops through the Map. All the SQL Queries of a particular key are added to a batch using JDBC Statement (<code>**stmt.addBatch(String)**</code>). For every unique key, there is a separate batch created and executed.</li>\n<li>There are many classes <strong>(X,Y,Z...)</strong> which are working on populating this Map and arraylist of Strings to put different INSERT and UPDATE Queries</li>\n</ul>\n\n<p>Now, I need to add an Oracle procedure call for some keys and hence should be added to the String Arraylist for the respective keys.</p>\n\n<p>I tried adding the following strings to call procedures, but no one seems to work for me.</p>\n\n<pre><code>1. EXEC INSERT_AUTONUMBER_DATA(......)\n\n2. BEGIN INSERT_AUTONUMBER_DATA(........) END;\n</code></pre>\n\n<p>I don't want to modify much of the code, as it might impact the other areas.</p>\n\n<p>I can add a Callable Statement in the batch, but for this, I will need to modify all the methods and classes which takes responsibility for preparing the batch which are around 15 in my project (Project Design is not very good), plus I will have to write a condition identifying a procedure call, so that I will prepare a callable statement instead of a Statement.</p>\n\n<p>Is there any other way of doing it, without changing the classes executing the batches?</p>\n"},{"tags":["java","oracle","jdbc","java-6"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":9182,"score":2,"question_id":3922774,"title":"Which OJDBC Driver for Java 6?","body":"<p>We're currently using ojdbc14.jar, should we be using ojdbc6.jar ?</p>\n\n<p><strong>Update: Oracle 10g being used</strong></p>\n"},{"tags":["sql","oracle","formatting","increment"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12972040,"title":"SQL incremental ID assignment","body":"<p>I want to insert new values to an Oracle table. The table is quite large and the ID codes are stored as numbers. I'd like to write insert statements that can add my new information and assign an ID automatically which isn't already taken.</p>\n\n<p>For example:</p>\n\n<pre><code>insert into example_table values\n(\n(select max(person_id)+1 from example_table),\n99, 'example name', 'example type');\n</code></pre>\n\n<p>But this code above obviously wouldn't work, because I am specifying an ID (99). If I set 99 to null in the above code snippet, will it then work? Not sure how to format.</p>\n\n<p>Thanks.</p>\n"},{"tags":["oracle","visual-studio-2008","oracle11g"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":98,"score":0,"question_id":12972809,"title":"Getting Oracle Exception: ORA-1017: invalid username/password; logon denied","body":"<p>I have tried so many thing but i can't resolve that Error.</p>\n\n<p>I can connect with my username and password to:</p>\n\n<pre><code>Database in SQLDeveloper,\nin SQL-Plus,\nin Server-Explorer (Visual Studio 2008) \n</code></pre>\n\n<p>and all works fine.</p>\n\n<p>But if i Compile my Project i get that Error:</p>\n\n<blockquote>\n  <p>ORA-1017: invalid username/password; logon denied</p>\n</blockquote>\n\n<p>Why is that?</p>\n\n<p>I tried to set case_sensitive to false, but the same error appears.\nI don't know what else to do. </p>\n\n<p>My Oracle version: </p>\n\n<blockquote>\n  <p>Oracle Database 11g Express Edtiton Release 11.2.0.2.0 - Production\n  PL/SQL Release 11.2.0.2.0 - Production CORE 11.2.0.2.0     Production\n  TNS for 32-bit Windows: Version 11.2.0.2.0 - Production NLSRTL Version\n  11.2.0.2.0 - Production</p>\n</blockquote>\n\n<p>My Connectionstring:</p>\n\n<pre><code>&lt;add name=\"Oracle\" connectionString=\"Data Source=ORCL;User ID=book;Password=bookadm;\" providerName=\"Oracle.DataAccess.Client\" /&gt;\n</code></pre>\n"},{"tags":["c#","mysql","sql","database","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":128,"score":7,"question_id":10857468,"title":"What exactly is \"pinning\" in relation to indexes in DBMS?","body":"<p>As part of a test question, students were asked to define and describe pinning in relation to indexes. When one talks about \"pinning\" in indexes, what exactly is this? Is there some other word/term I can search for, as google has not provided any solutions.</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12970724,"title":"oracle error: not enough values","body":"<p>i have a table donor_master:</p>\n\n<pre><code>create table donor_master  \n(  \ndonor_id number(10) primary key not null,  \ndob date not null,  \nage number(3) not null,  \ngender char(1) not null,  \nblood_group char(3),  \ncontact_no number(10),  \naddress varchar(50) not null,  \ncity varchar(10) not null,  \npin number(10) not null,  \nstate varchar(10) not null,  \nbranch_registration_id number(5) references branch_master(branch_id)  \n);  \n</code></pre>\n\n<p>when i try to insert into the table in a procedure insert_donor_master, i  get \"not enough values\" error on compilation.</p>\n\n<p>this is the procedure:  </p>\n\n<pre><code>create or replace procedure insert_donor_master(  \nvdob donor_master.dob%type,  \nvage donor_master.age%type,  \nvgender donor_master.gender%type,  \nvblood_group donor_master.blood_group%type,  \nvcontact_no donor_master.contact_no%type,  \nvaddress donor_master.address%type,  \nvcity donor_master.city%type,  \nvpin donor_master.pin%type,  \nvstate donor_master.state%type,  \nvbranch_registration_id donor_master.branch_registration_id%type  \n)  \nis  \n\nbegin  \n\n    insert into donor_master values (sq_donor_master.nextval, vdob, vage, vgender, vblood_group, vcontact_no, vaddress, vcity, vpin, vstate, vbranch_registration_id);  \n    commit;  \n\nend;\n</code></pre>\n\n<p>What is the problem?  </p>\n\n<p>Thanks.</p>\n"},{"tags":["java","oracle","application","look-and-feel","skinning"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12969983,"title":"How to change Oracle Applications (forms) look and feel by adding custom skins","body":"<p>I would like to skin Oracle Applications (the Human Resources professional user interface forms), similar to how you skin normal Java Swing applications; but can't find anything on Google on how to do this.</p>\n\n<p>The application allows you to change the look and feel and colour, using these profile options:</p>\n\n<p>Java Look And Feel\nJava Colour Scheme</p>\n\n<p>It also provides two examples of look and feel. Basically I need to know the following. If I download a swing skin like Nimbus, where would I put this on the Oracle Application server that would allow it to be selectable by the Java Look and Feel profile option? You seem to also need to add it to the LOOK_AND_FEEL lookup, but I'm not sure where on the server it then picks it up.</p>\n"},{"tags":["oracle","transactions"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":88,"score":2,"question_id":11272576,"title":"Add Conditional Transactional Behavior In Oracle Procedure","body":"<p>In oracle 10g, I have one stored procedure per table per operation (insert, select, update, delete). Actually there can be multiple procedures per table per operation, for example in case of select it can be SelectList, SelectOneRecord, Search (with dynamic query).</p>\n\n<p>None of these procedures have transactions. </p>\n\n<p>Sometimes I have to combine multiple operations in a transaction. For example insert in one table and update in another table, all in one transaction. For this I make a separate procedure which has transaction. This procedure then call the two procedures.</p>\n\n<p>To enable the above combination-of-procedure-calls-in-single-transaction, I do not put any transaction behavior in the procedures, as discussed above.</p>\n\n<p>Most of the time I have to perform only one operation, such as insert in one table. Since the insert procedure do not have transaction behavior therefore I have to make a separate procedure that have transaction behavior and that procedure call the insert procedure.</p>\n\n<p>I end up with lots of basic procedures (one table, one operation) and lots of transaction procedures that are basically wrappers around basic procedures.</p>\n\n<p>My question is, is there some way to have conditional transactional behavior in the basic procedures. By this I mean that some if-condition where I can put the transaction logic, so that the transaction behavior can be on or off based on some parameter that I pass. Then when I want to do only one operation, such as insert in a table, I call the basic procedure with transaction behavior; and when I want to call two procedures in a transaction, such as insert in one table and update in another table all in one transaction, then I make a separate transaction procedure and call the two basic procedure without transaction behavior.</p>\n\n<p>The following is a transaction procedure that call another procedure and wrap it in a transaction:</p>\n\n<pre><code>BEGIN\n    SAVEPOINT the_start;\n\n    BasicProcedure(&lt;list of parameters&gt;);\n\n    COMMIT;\n\n    EXCEPTION\n         WHEN OTHERS THEN\n\n         BEGIN\n             ROLLBACK TO the_start;\n             RAISE;\n         END;\nEND;\n</code></pre>\n\n<p>I can very well put the savepoint line and the commit line in if-statements, but can I also put the exception block in a if-statement. Do I have to put the exception block in if-statement? What if I catch exception in procedure, would it automatically rollback when exception comes?</p>\n"},{"tags":["sql","oracle","date","formatting"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12970579,"title":"Issue with date formatting SQL","body":"<pre><code>SELECT LISTING_EOD.LOCATION, LISTING_EOD.APPTTIME, LISTING_EOD.PERSON_ID,\n    LISTING_EOD.FORENAME, LISTING_EOD.SURNAME, LISTING_EODS.STATUS,\n    LISTING_EOD.DBDATE\nFROM DBNAME.LISTING_EOD LISTING_EOD; \n</code></pre>\n\n<p>This query returns a list of data processed today, I need to modify to check yesterday's data.  I have tried add the below line of code, but it doesn't return anything.  Does anyone know how I can achieve this? </p>\n\n<pre><code>where LISTING_EOD.DBDATE = '18-OCT-2012';\n</code></pre>\n"},{"tags":["oracle","fluent-nhibernate","nhibernate-mapping"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12955049,"title":"Fluent NHibernate ClassMap<T> class","body":"<p>I have a question-Does the class ClassMap take a lot of ram?\nCan big Class of mapping cause slowness and abd performance?\nthank you!</p>\n"},{"tags":["oracle","plsql"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39075,"score":1,"question_id":407027,"title":"pl/sql REPLACE() function isn't handling carriage-returns & line-feeds","body":"<p>We've a table with a varchar2(100) column, that occasionally contains carriage-return &amp; line-feeds. We should like to remove those characters in the SQL query. We're using ..</p>\n\n<pre><code>REPLACE( col_name, CHR(10) )\n</code></pre>\n\n<p>.. which has <strong>no effect</strong>, however replacing 'CHR(10)' for a more conventional 'letter' character proves that the REPLACE function works otherwise. We have also found that </p>\n\n<pre><code>REPLACE( col_name, CHR(10), '_' )\n</code></pre>\n\n<p>.. finds the <em>location</em> of the new-line, but <em>inserts</em> the underscore after it, rather than replacing it.</p>\n\n<p>Running on Oracle8i. Upgrading is not an option.</p>\n\n<p>Clues most welcome.</p>\n"},{"tags":["sql","oracle","query"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":3325,"score":0,"question_id":8510112,"title":"How would you display the manager name from employee table in an SQL query?","body":"<p>I have an employee table that displays the employee number, name, and manager's employee number. I'm trying to create a query that displays the emp name, emp#, manager name and mgr#. </p>\n\n<p>The table looks like this:</p>\n\n<pre><code>EMPNO ENAME  JOB       MGR  HIREDATE  SAL COMM DEPTNO \n7839  KING   PRESIDENT -    17-NOV-81 5000 -   10 \n7698  BLAKE  MANAGER   7839 01-MAY-81 2850 -   30 \n7782  CLARK  MANAGER   7839 09-JUN-81 2450 -   10 \n7566  JONES  MANAGER   7839 02-APR-81 2975 -   20 \n7654  MARTIN SALESMAN  7698 28-SEP-81 1250 1400 30 \n7499  ALLEN  SALESMAN  7698 20-FEB-81 1600 300 30 \n7844  TURNER SALESMAN  7698 08-SEP-81 1500 0   30 \n7900  JAMES  CLERK     7698 03-DEC-81 950  -   30 \n7521  WARD   SALESMAN  7698 22-FEB-81 1250 500 30 \n7902  FORD   ANALYST   7566 03-DEC-81 3000 -   20 \n</code></pre>\n\n<p>Three of the columns are pretty simple since they are in the table but how would I add the manager name when all I have is the employee number of their manager?</p>\n\n<p>This is what I have so far that only displays the 3 colums</p>\n\n<pre><code>select ename as \"Employee\", empno as \"Emp#\", mgr as \"Mgr#\"  from emp;\n</code></pre>\n\n<p>Any help would be appreciated</p>\n"},{"tags":["sql","oracle","plsql","oracleforms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12959643,"title":"Inserting Record in oracle forms","body":"<p>I'm working with Oracle Forms Builder, and I've a block with several records. The code looks somewhat like this</p>\n\n<pre><code>first_record;\nIF NAME_IN('SYSTEM.LAST_RECORD') != 'TRUE' THEN                                 \n  LOOP                  \n    IF name_in('QOTLNDET_LINES.SERIAL_NUMBER') IS NOT NULL THEN                         \n      QOTLNDET_LINES_REMOVE.Delete_Row;\n      clear_record;     \n    ELSE                    \n      next_record;\n    END IF;\n    EXIT WHEN NAME_IN('SYSTEM.LAST_RECORD') = 'TRUE';\n\n  END LOOP;\n  execute_query;\n  COMMIT;\n  go_block('QOTHDDET_MAIN');\nEND IF; \n</code></pre>\n\n<p>Right before the next_record, inside the ELSE segment, I need to remove the current record and re-insert it. The problem isn't removing the record, it's re-inserting it.   Any ideas? Thanks in advance.    </p>\n"},{"tags":["java","database","arrays","oracle","insert"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":65,"score":-3,"question_id":12969465,"title":"How to pass a JAVA array to a database?","body":"<p>Any one can explain Creating a Sql Array and pass it to database,Using the JAVA language</p>\n"},{"tags":["java","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12968802,"title":"Ethernet communication,store directly to database","body":"<p>I have to store the values from a hardware to database through Ethernet.Can we directly store the values to database without using any programming language.If yes is it a good approach? </p>\n"},{"tags":["c#",".net","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":128,"score":2,"question_id":9139642,"title":"Update oracle using dataset in .NET 1.1","body":"<p>I have done a code where I update the given dataset into oracle database using the adapter.Update method in .NET 2.0\nHowever the same piece of code gives exception\n\"Update requires a valid InsertCommand when passed DataRow collection with new rows\"</p>\n\n<p>In case I traverse the dataset and insert each row , it takes a lot of time(over 5000 records). </p>\n\n<p>Please suggest a way to update whole dataset into database at a time.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["sql","oracle","set","case"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12966937,"title":"return more than 1 value after THEN statement used with CASE","body":"<p>Following is my query:</p>\n\n<pre><code>UPDATE DSOPI_PERSON_ADDR_RULE ADDR\nSET ADDR.DEPT_NAME =\n  CASE\n    WHEN regexp_like (UPPER(addr.src_address_line1),     'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')\n    AND ADDR.ORG_NAME IS NOT NULL\n    THEN ADDR.SRC_ADDRESS_LINE1\n    WHEN regexp_like (UPPER(addr.src_address_line2), 'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')\n    AND ADDR.ORG_NAME IS NOT NULL\n    THEN ADDR.SRC_ADDRESS_LINE2\n    WHEN regexp_like (UPPER(addr.src_address_line3), 'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')\n    AND ADDR.ORG_NAME IS NOT NULL\n    THEN ADDR.SRC_ADDRESS_LINE3\n    WHEN regexp_like (UPPER(addr.src_address_line4), 'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')\n    AND ADDR.ORG_NAME IS NOT NULL\n    THEN ADDR.SRC_ADDRESS_LINE4\n    ELSE NULL\n END;\n</code></pre>\n\n<p>What I would like to do is, when the case condition is true I would like to make the respective address lines NULL. Is there any way to achieve it with this code?</p>\n"},{"tags":["php","oracle","connect","oci","oci8"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12947873,"title":"How to use PHP with Oracle Wallet?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/7194176/connect-from-php-to-an-oracle-db-using-an-oracle-wallet\">Connect from PHP to an Oracle DB using an Oracle Wallet</a>  </p>\n</blockquote>\n\n\n\n<p>We are planning to implement Oracle Wallet. It works from sqlplus as shown below.\nThat shows that wallet functionality is working.</p>\n\n<pre><code>    export ORACLE_HOME=/afs/engg/g/lcls/package/oracle/product/11.1.0.6/client\n    export PATH=$ORACLE_HOME/bin:${PATH}\n    export TNS_ADMIN=/afs/engg/g/lcls/tools/oracle/wallets/engg_reader\n\n\n    $ sqlplus /@enggdev\n    SQL&gt; show user\n    USER is \"ENGG_READER\"\n</code></pre>\n\n<p>I am so far unsuccessful to make it work from php. We have php installed with\nOCI8 extension. Please guide me especially about oci_connect command and it's \nsyntax.</p>\n\n<p>This is my php file -</p>\n\n<pre><code>    &lt;?php\n    // Create connection to Oracle\n    PutEnv(\"ORACLE_HOME=/afs/engg/g/lcls/package/oracle/product/11.1.0.6/client\");\n    PutEnv(\"TNS_ADMIN=/afs/engg/g/lcls/tools/oracle/wallets/engg_reader\");\n\n\n    $conn = oci_connect(\"/\", \"\", \"$TNS_ADMIN\", null, OCI_CRED_EXT);\n\n\n\n     if (!$conn) {\n     $m = oci_error();\n     echo $m['message'], \"\\n\";\n     exit;\n     }\n     else {\n     print \"Connected to Oracle!\\n\";\n     }\n     // Close the Oracle connection\n     oci_close($conn);\n     ?&gt;\n</code></pre>\n\n<p>When I execute the command <code>$ /mccelog/package/php/php-5.4.7/bin/php  connect4.php</code></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Warning: oci_connect(): OCIEnvNlsCreate() failed. There is something wrong \nwith your system - please check that ORACLE_HOME and LD_LIBRARY_PATH are set and \npoint to the right directories in /afs/engg/u/cd/divekar/technical/connect4.php on\nline 7\n</code></pre>\n\n<p>Note that I have properly set <code>ORACLE_HOME</code> and <code>LD_LIBRARY_PATH</code>. \nLine 7 is oci_connect string which is causing that error. How to connect to \nOracle database using oci8/oci_connect ?</p>\n\n<p>Thanking you in advance.\nRegards.\n-Shashi Divekar</p>\n"},{"tags":["oracle","query","plsql","oracle-apex"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12956887,"title":"using between with apex item in Oracle apex_util.json_from_sql","body":"<p>Does anybody know how to use apex item in apex_util.json_from_sql in application process when we try to find a value between two number? My query just like this one below :</p>\n\n<pre><code>SELECT  \nID , locn_x lat, locn_y lon\nFROM database where locn_x between :P1_SEBOUNDLAT and :P1_NWBOUNDLAT\n</code></pre>\n\n<p>But it's return no result. Apex item :P1_SEBOUNDLAT and :P1_NWBOUNDLAT has a value cos i diplay it and i try to do query in database and give me result. it seem : without = become a problem in this query. Because when i try to query </p>\n\n<pre><code>where locn_x &gt; :P1_SEBOUNDLAT \n</code></pre>\n\n<p>it give me an error</p>\n\n<p>Please somebody give me an advice. </p>\n"},{"tags":["sql","oracle","date","compare"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":92,"score":-3,"question_id":12966986,"title":"Compare SQL Dates with greater & less than symbols?","body":"<p>I've using the basic Oracle SQL and I was just wondering if its possible to compare dates?\nLike comparing a date to see if its larger than another one?</p>\n\n<p>For Example:</p>\n\n<p>date1 &lt; SYSDATE</p>\n"},{"tags":["mysql","sql","sql-server","oracle","null"],"answer_count":8,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":201,"score":2,"question_id":12853944,"title":"Why in SQL NULL can't match with NULL?","body":"<p>I'm new to SQL concepts, while studying NULL expression I wonder why NULL can't match with NULL can anyone tell me a realworld example to simply this concept?</p>\n"},{"tags":["sql","oracle","select","dual"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12946692,"title":"SQL Select Data From Dual in nth row","body":"<p>I was wondering if we can do a select from dual and place our results at any of the result row? My desired result will be:</p>\n\n<pre><code> CID        EXT\n------    ------\nALL       ALL\n--        --\nDATAA     DATAA\nDATAB     DATAB\nDATAC     DATAC\n</code></pre>\n\n<p>I was doing</p>\n\n<pre><code>SELECT 'ALL' AS \"CID\"\n   , 'ALL' AS \"EXT\"\nFROM DUAL\nUNION\nSELECT *\nFROM\n(\n   SELECT DISTINCT COLUMN AS \"CID\"\n      ,  COLUMN AS \"EXT\"\n   FROM TABLEA\n)  \n</code></pre>\n\n<p>but my results were</p>\n\n<pre><code>CID        EXT\n------    ------\n--        --\nALL       ALL\nDATAA     DATAA\nDATAB     DATAB\nDATAC     DATAC\n</code></pre>\n"},{"tags":["sql","oracle","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12965982,"title":"How to hide or supresss sql query output from the log file (spool file ) in sqlplus","body":"<p>I’m doing performance testing for my application. I gathered around 100 queries from the application and wanted execute the queries exactly as it's being executed through the application. \nAs some quires are giving more than 1000 records, I wanted to hide the sql output in log file.\nI just wanted to collect Elapsed Time and Explain Plan.</p>\n\n<p><strong>Sql Template File:</strong></p>\n\n<pre><code>spool &amp;1\n\n\nset timing on\nset linesize 100\nset pagesize 5000\nset termout off\nset echo on\n\nset autotrace on exp stat\n\ndefine sql_version = '0.1';\n\n\nset echo on;\nset heading off;\nset feedback off;\nset verify off;\nset timing off;\nselect  ' Baseline SQL Testing - Version &amp;sql_version : Date - ' || sysdate from dual;\nset timing on;\nset verify on;\nset feedback on;\nset heading on;\nset echo on;\n\n\nspool off;\nexit;\n</code></pre>\n"},{"tags":["oracle","hibernate","foreign-keys","composite-key"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12964216,"title":"Oracle composite key deletion very slow","body":"<p>I have one table with a composite key (REGION) and another table (CITY) that references that table. Inserts, queries, and individual deletions work quickly. The problem is that when I try to bulk-delete the contents of CITY using sqlplus, delete from CITY, it takes forever. This table will have ~400,000 entries and it takes 15-20 minutes just to delete 50,000 entries. Here is my setup using Oracle 11:</p>\n\n<pre><code>create table COUNTRY\n(\n  id varchar2(32) NOT NULL -- PK\n...\n);\n\ncreate table REGION -- about 4000 entries\n(\n  country    varchar2(32) NOT NULL -- PK, FK to COUNTRY\n  regionCode char(2)      NOT NULL -- PK\n...\n);\n\ncreate table CITY -- about 400,000 entries\n(\n  id            number       NOT NULL -- PK\n  country       varchar2(32) NOT NULL -- FK to COUNTRY\n  regionCountry varchar2(32) NULL     -- FK to REGION\n  regionCode    char(2)      NULL     -- FK to REGION\n...\n);\n\ncreate table LOCATION -- about 2,500,000 entries\n(\n  id       varchar2(32) NOT NULL -- PK\n  country  varchar2(32) NOT NULL -- FK to COUNTRY\n  city     number       NULL     -- FK to CITY\n...\n);\n\n\n\nALTER TABLE COUNTRY ADD CONSTRAINT PK_COUNTRY PRIMARY KEY (id) USING INDEX;\n\nALTER TABLE REGION ADD CONSTRAINT PK_REGION PRIMARY KEY (country, regionCode) USING INDEX;\n\nALTER TABLE CITY ADD CONSTRAINT PK_CITY PRIMARY KEY (id) USING INDEX;\n\nALTER TABLE IPGeoLoc ADD CONSTRAINT PK_LOCATION PRIMARY KEY (id) USING INDEX;\n\n\n\nALTER TABLE REGION ADD CONSTRAINT FK_REGION_COUNTRY\n   FOREIGN KEY (country) REFERENCES COUNTRY (id);\n\nALTER TABLE CITY ADD CONSTRAINT FK_CITY_COUNTRY\n   FOREIGN KEY (country) REFERENCES COUNTRY (id);\n\nALTER TABLE CITY ADD CONSTRAINT FK_CITY_REGION\n   FOREIGN KEY (regionCountry, regionCode) REFERENCES REGION (country, regionCode);\n\nALTER TABLE LOCATION ADD CONSTRAINT FK_LOCATION_COUNTRY\n   FOREIGN KEY (country) REFERENCES COUNTRY (id);\n\nALTER TABLE LOCATION ADD CONSTRAINT FK_LOCATION_CITY\n   FOREIGN KEY (city) REFERENCES CITY (id);\n</code></pre>\n\n<p>The varchar2(32) fields are GUIDs. I know I should not use GUIDs as a PK but I cannot change that unless I have proof that this is the problem.</p>\n\n<p>I can bulk-delete entries from LOCATION with no problem, 300,000 in a couple of seconds, so this leads me to believe it is the composite key that is giving me trouble.</p>\n\n<p>The secondary issue is that I currently have two country columns in the CITY table - one linked directly to COUNTRY and the other linked as part of the composite key to REGION. I know how I would do this in code and only have one country column but I have to use Hibernate. This works the way it is except for the delete problem so I can't change it unless I can prove this is causing an issue. I'm using sqlplus to try the deletions so I know Hibernate is not causing the delete problem.</p>\n"},{"tags":["oracle","import","bigdata"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12964494,"title":"oracle bigfile import: inappropriate ioctl for device","body":"<p>Oracle 11G, Linux with 200GB space. About 25GB were already occupied by some files.</p>\n\n<p>I received a \".dmp\" file of 50GB and, in order to perform the import, I created a bigtablespace with bigdatafile of 100GB (cause I thought it would be enough). The the import command:</p>\n\n<p><i><b>imp user/pwd full=Y log=/home/oracle/log.txt file=/usr/oracle/public/dump.dmp</b></i></p>\n\n<p>But after importing lot of tables and inserting lot of data into them, I received the following error message:</p>\n\n<p><i><b>\nIMP-00017: following statement failed with ORACLE error 603:\n \"CREATE UNIQUE INDEX \"PR_TABLE1\" ON \"TABLE1\" (\"TABLE1_ID\" , \"ROW_NUM\" , \"COL_NUM\" ) \"\n \" PCTFREE 10 INITRANS 2 MAXTRANS 255 STORAGE(INITIAL 4294967294 FREELISTS 1 \"\n \"FREELIST GROUPS 1 BUFFER_POOL DEFAULT)                      NOLOGGING\"\nIMP-00003: ORACLE error 603 encountered\nORA-00603: ORACLE server session terminated by fatal error\nORA-01114: IO error writing block to file 201 (block # 1719438)\nORA-27072: File I/O error\nLinux-x86_64 Error: 25: Inappropriate ioctl for device Additional information: 4 Additional information: 1719438 Additional information: 114688\nORA-01114: IO error writing block to file 201 (block # 1719438)\nORA-27072: File I/O error\nLinux-x86_64 Error: 25: Inappropriate ioctl for device Additional information: 4 Additional information: 1719438 Additional info\nIMP-00017: following statement failed with ORACLE error 3114:\n \"BEGIN  SYS.DBMS_EXPORT_EXTENSION.SET_IMP_SKIP_INDEXES_OFF; END;\"\nIMP-00003: ORACLE error 3114 encountered\nORA-03114: not connected to ORACLE\nIMP-00000: Import terminated unsuccessfully\n</b></i></p>\n\n<p>About 15GB were consumed by the \"temp\" datafile.</p>\n\n<p>It seems it run out of space, according to what I've read online about datafiles trying to extend themselves. Linux shows around 8GB free, but it might have them reserved for something else.</p>\n\n<p>The question is: is there a way for me to know how much space should I give to my hard drive to successfully realize the import??? The reason to ask this is because it takes so long to upload the \".dmp\" file to the server and many more to create the \".dbf\" files and realize the import.</p>\n\n<p>The client doesn't know this info. I'm not an Oracle DBA, but I once successfully connected a .Net application to an Oracle database, so now I'm supposed to be the expert here.</p>\n\n<p>Thanks &amp; Regards</p>\n"},{"tags":["java","string","oracle","oracle11g","clob"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2817,"score":0,"question_id":8066018,"title":"convert string to oracle.sql.clob in java?","body":"<p>I'm coding a Java function inside Oracle Database which produce allot of text!\nhow to convert a string to CLOB (oracle.sql.CLOB) in java?\nwhat is the straight-forward way to do?</p>\n\n<p>I'm trying to build a function which has <strong>String</strong> as an input with <strong>oracle.sql.CLOB</strong> as an output, but it's not working! I'm not doing any <strong>jdbc</strong> related work!</p>\n\n<p>here is what I have (which is not working!)</p>\n\n<pre><code>  public static CLOB str2clob(String s)\n  {\n         oracle.sql.CLOB clob = null;\n\n         try\n         {\n               clob.setString(0,s);\n\n         } catch (Exception e)\n         {\n         }\n         return clob;\n  }\n</code></pre>\n"}]}
{"total":22203,"page":10,"pagesize":100,"questions":[{"tags":["sql","oracle","like"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12962492,"title":"sql like clause with many values","body":"<p>I have 4 columns in my table. Now since this is more of a data cleanup task I am not really that particular about the performance. But still I would like to know the possible options.</p>\n\n<p>Look at the query below:</p>\n\n<pre><code>SELECT * FROM dsopi_person_addr_rule ADDR WHERE \naddr.src_address_line1 LIKE '%DEP%' \nOR addr.src_address_line2 LIKE '%DEP%'\nOR addr.src_address_line3 LIKE '%DEP%'\nOR addr.src_address_line4 LIKE '%DEP%';\n</code></pre>\n\n<p>Similar to DEP I have 10 more matches. I need to repeat each match for all the 4 address lines. Is there a better way to do it? I personally hate writing again and again.</p>\n\n<p>**Updated: Below is the answer</p>\n\n<pre><code>SELECT *\nFROM dsopi_person_addr_rule ADDR\nWHERE regexp_like (UPPER(addr.src_address_line1),      'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')\n</code></pre>\n"},{"tags":["sql","oracle","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12963800,"title":"sql dynamic replacement","body":"<p>My requirement is that I am searching a bunch of columns in a table using regex_like function: Below is an example:</p>\n\n<pre><code>SELECT *\nFROM dsopi_person_addr_rule ADDR\nWHERE regexp_like (UPPER(addr.src_address_line1),   \n                     'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG')\n</code></pre>\n\n<p>Now what I would like to do if I find a match I would like to take the value from src_address_line1 and put that in another column of of the same table. I know how to do this but can anyone recommend how to do this efficiently. I am open to using cursors.</p>\n"},{"tags":["java","oracle","jvm","webserver","jvm-arguments"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":177,"score":2,"question_id":12829845,"title":"Prevent Java plugin from attempting to download pack.gz version of the archive","body":"<p>The Java 1.7 Plugin insists on attempting to download the pack.gz for the archive file specified.  E.g. for an applet tag like this:</p>\n\n<pre><code>&lt;applet codebase=\".\" code=\"com.whatever.Something\" archive=\"applet/SomethingWhatever.jar\" mayscript=\"true\"&gt;\n&lt;param name=\"someKindOfSettingA\" value=\"1234\"&gt;\n&lt;/applet&gt;\n</code></pre>\n\n<p>We end up with the HTTP server getting requests for:</p>\n\n<pre><code>applet/SomethingWhatever.jar.pack.gz\n</code></pre>\n\n<p>I realize we can solve this by providing a pack.gz and this would be beneficial.  But for now I just want to suppress the extra requests.  Is there a way to do this via an applet tag or something?</p>\n\n<p>We tried this:</p>\n\n<pre><code>&lt;PARAM NAME=\"java_arguments\" VALUE=\"-Djnlp.packEnabled=false\"/&gt;\n</code></pre>\n\n<p>based on the obvious variation of the instructions here: <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/tools/pack200.html\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/tools/pack200.html</a> .  But that made no difference.</p>\n"},{"tags":["sql","oracle","join"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":55,"score":-1,"question_id":12957660,"title":"How to write this query in Oracle?","body":"<p>I have two columns (both primary) [PLAYER_ID] [LEAUGE_ID]</p>\n\n<p>something like this: </p>\n\n<pre><code>Player_id      League_id\n2139            8\n2153            8\n2302            10\n2441            8\n2441            10  \n2441            16   \n</code></pre>\n\n<p>I am trying to find the same player who played only in leages 8 and 10, so although 2441 played for 16, we need to omit that. </p>\n\n<p>According to the table above, I am trying to only find: </p>\n\n<pre><code>Player_id     League_id_1     League_id_2\n2441          8               10\n</code></pre>\n\n<p>Thanks in advance!</p>\n"},{"tags":["sql","oracle","escaping","sqlplus"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":12961215,"title":"Escaping ampersand character in SQL string","body":"<p>I am trying to query a certain row by name in my sql database and it has an ampersand. I tried to set an escape character and then escape the ampersand, but for some reason this isn't working and I'm uncertain as to what exactly my problem is.</p>\n\n<pre><code>Set escape '\\'\n    select * from V1144engine.T_nodes where node_id in(\n    select node2_id from V1144engine.T_edges where node1_id in(\n    select node2_id from V1144engine.T_edges where node1_id in(\n    select node2_id from V1144engine.T_edges where node1_id = \n      (select node_id from V1144engine.T_nodes where node_name = 'Geometric Vectors \\&amp; Matrices')))\n    and edge_type_id = 1)\n    and node_type_id = 1\n    and node_id in (\n    select node2_id from V1144engine.T_edges where node1_id =\n      (select node_id from V1144engine.T_nodes where node_name = 'Algebra II')\n    and edge_type_id = 2);\n</code></pre>\n"},{"tags":["xml","linux","oracle","shell","import"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12932575,"title":"Query an Oracle table for existence of a 'batchnumber' before importing xml file with certain 'batchnumber' tag","body":"<p>I'm currently working on a nice puzzle for a project, maybe some of you have already done something similar:</p>\n\n<p>It needs to be a linux shell script</p>\n\n<p>Here are the steps that need to be taken:</p>\n\n<ol>\n<li><p>xml files are placed on linux database server (oracle)</p></li>\n<li><p>xml files are validated (I've used xmllint, this works)</p></li>\n<li><p>xml files contain a batchnumber, before importing, the batchnumber is not allowed to be present in the database, so how do I pass through a value from within a file into an sql query(maybe with an if..then...else clause?)</p></li>\n</ol>\n\n<p>Thanks in advance for your help!!</p>\n"},{"tags":["sql","oracle","plsql","escaping"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12911345,"title":"Escaping in plsql","body":"<p>Hi I am tring to fire this query</p>\n\n<pre><code>update txnblackout\n  set enddate= ''TO_DATE('25/02/2012','dd/mm/yyyy')''\n  where idsequence='1'\n</code></pre>\n\n<p>But it is not working giving error </p>\n\n<p>ORA-00933: SQL command not properly ended</p>\n\n<p>Can you please justify it. Why it is happening?</p>\n\n<p>This is the java code i am using to create query  : -</p>\n\n<pre><code>Map&lt;String, String&gt; l_script_columns = new HashMap&lt;String, String&gt;();\n        l_script_columns.put(\"typeuser\", txtTypeUser.getText()\n            .trim());\n        l_script_columns\n            .put(\"idtxn\", txtIdTxn.getText().trim());\n        l_script_columns.put(\"startdate\", \"'TO_DATE('\"\n            + txtStartDate.getText().trim() + \"','\"\n            + FieldMapperHelper.DATE_Format + \"')'\");\n        l_script_columns.put(\"starttime\", getTime(txtStartTime\n            .getText().trim())\n            + \"\");\n        l_script_columns.put(\"enddate\", \"'TO_DATE('\"\n            + txtEndDate.getText().trim() + \"','\"\n            + FieldMapperHelper.DATE_Format + \"')'\");\n        l_script_columns.put(\"endtime\", getTime(txtEndTime\n            .getText().trim())\n            + \"\");\n        l_script_columns.put(\"id_entity\", txtIdEntity.getText()\n            .trim());\n        l_script_columns.put(\"idsequence\", txtIdSequence\n            .getText().trim());\n        l_script_columns\n            .put(\"idapp\", txtIdApp.getText().trim());\n        l_script_columns.put(\"blackoutflag\",\n            comboBoxBlackOutTag.getSelectedItem()\n                .toString());\n</code></pre>\n\n<p>please let me know if you want more clarification.Thanks.</p>\n"},{"tags":["sql","oracle","parsing"],"answer_count":6,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":2218,"score":7,"question_id":5735791,"title":"Parser for Oracle SQL","body":"<p>For my current project I need a SQL parser that parses Oracle SQL statements.\nCurrently I've been using jsqlparser, which worked well for simple queries. But when specific functions occur (e.g. cast() or (+)) the parser fails.</p>\n\n<p>Can anyone suggest a parser that is fully compliant to Oracle SQL?</p>\n\n<p>Best,\nWill</p>\n"},{"tags":["sql","oracle","analytic-functions"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":77,"score":1,"question_id":12614209,"title":"Can I use Oracle analytical function here?","body":"<p>I've got this query:</p>\n\n<pre><code>SELECT year,\n       month,\n       week,\n       C.cpg_pk                                                        CPG,\n       C.dep_pk                                                        DEPT,\n       T.cust_id                                                       CUST_ID,\n       D1.r_id                                                         R_ID,\n       Decode(d2.at_code, '3', func1.Get_att(d2.at_code, D2.val_code)) AS P1,\n       Decode(d2.at_code, '2', func1.Get_att(d2.at_code, D2.val_code)) AS IC,\n       Decode(d2.at_code, '1', func1.Get_att(d2.at_code, D2.val_code)) AS B1,\n       Decode(func1.Get_att(d2.at_code, D2.val_code), 2, d2.at_code)   AS P2,\n       Decode(func1.Get_att(d2.at_code, D2.val_code), 5, d2.at_code)   AS B2,\n       Count(DISTINCT A.cust_id)                                       TOTAL_ACC\n       ,\n       Count(DISTINCT T.txn_pk)\n       TOTAL_TXN,\n       SUM(am_amount)                                                  TOTAL_AMT\nFROM   t_header T,\n       cust_master A,\n       tx_details1 D1,\n       tx_details2 D2,\n       cpg_master C\nWHERE  A.TYPE = 0\n       AND T.cust_id = A.cust_id\n       AND T.txn_pk = 5001\n       AND T.txn_pk = D1.txn_pk\n       AND T.txn_pk = D2.txn_pk\n       AND D1.cpg_pk = C.cpg_pk\n       AND D1.op = 1\nGROUP  BY year,\n          month,\n          week,\n          C.cpg_pk,\n          C.dep_pk,\n          t.cust_id,\n          D1.r_id,\n          Decode(d2.at_code, '3', func1.Get_att(d2.at_code, D2.val_code)),\n          Decode(d2.at_code, '2', func1.Get_att(d2.at_code, D2.val_code)),\n          Decode(d2.at_code, '1', func1.Get_att(d2.at_code, D2.val_code)),\n          Decode(func1.Get_att(d2.at_code, D2.val_code), 2, d2.at_code),\n          Decode(func1.Get_att(d2.at_code, D2.val_code), 5, d2.at_code) \n</code></pre>\n\n<p>Its generated output is as follows:</p>\n\n<pre><code>YEAR    MONTH   WEEK    CPG DEPT    CUST_ID R_ID    P1  IC  B1  P2  B2   TOTAL\n2012    08      32     127 -1      10019   3665                     134   23100.09   \n2012    08      32     127 -1      10019   3665                     135   23100.09  \n2012    08      32     127 -1      10019   3665             723           23100.09  \n2012    08      32     127 -1      10019   3665        714                23100.09  \n2012    08      32     127 -1      10019   3665     21                    23100.09\n2012    08      32     128 -1      10019   3665                      134  23100.09 \n2012    08      32     128 -1      10019   3665                      135  23100.09 \n2012    08      32     128 -1      10019   3665             723           23100.09 \n2012    08      32     128 -1      10019   3665        714                23100.09 \n2012    08      32     128 -1      10019   3665     21                    23100.09\n</code></pre>\n\n<p>Here the values are repeating. I tried to eliminate the repeating with a <code>group by</code>, but didn't succeed. Could you help me?</p>\n\n<p>The required output is this:</p>\n\n<pre><code>YEAR    MONTH   WEEK    CPG DEPT    CUST_ID R_ID    P1  IC  B1  P2  B2  TOTAL_AMT\n---------------------------------------------------------------------------------\n2012    08      32      127 -1      10019   3665    21  714 723     134 23100.09\n2012    08      32      127 -1      10019   3665    21  714 723     135 23100.09\n2012    08      32      128 -1      10019   3665    21  714 723     134 23100.09\n2012    08      32      128 -1      10019   3665    21  714 723     135 23100.09\n</code></pre>\n\n<p>The main thing is <code>year</code>, <code>month</code>, <code>week</code>, <code>cpg</code>, <code>dept</code>, <code>cust_id</code>, <code>r_id</code>, <code>p1</code>, <code>ic</code>, <code>b1</code>, <code>p2</code>, <code>b2</code> it should be unique row. Is it achievable using analytical functions or do I need to write PL/SQL?</p>\n"},{"tags":["oracle","plsql","pivot"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":155,"score":-2,"question_id":12938650,"title":"pl/sql: how can I write this query?","body":"<p>I have two columns (both primary) [PLAYER_ID] [LEAUGE_ID]</p>\n\n<p>something like this: </p>\n\n<pre><code>Player_id      League_id\n2139            8\n2153            8\n2302            10\n2441            8\n2441            10  \n</code></pre>\n\n<p>I am trying to find the same player who played in both leagues</p>\n\n<p>According to the table above, I am trying to only find: </p>\n\n<pre><code>Player_id     League_id_1     League_id_2\n2441          8               10\n</code></pre>\n\n<p>Thanks in advance!</p>\n"},{"tags":["oracle","url","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12934944,"title":"Oracle URL String","body":"<p>I have a table which contains a field of type VARCHAR2 and length of 255, which I use to store URLs. Running a SELECT query on it returns the data, as below:</p>\n\n<pre><code>SELECT URL FROM SERVICE WHERE ID = 1\n</code></pre>\n\n<p>returns the URL I have stored (in this case, file:///test.url/ is returned).</p>\n\n<p>Running the same thing from a stored procedure, however, I get an empty box. All my other fields are filled in, and I get no errors about it. The URL field definitely contains the data, and I have made sure that the variable it is passed into is big enough to support it.</p>\n\n<p>My question is this: in order to pass a URL-esque string out via a stored procedure, do I need to handle it in a particular way? A discussion with work colleagues about this presented the idea that the characters in the URL string may be causing some form of escape clause to be triggered, but I couldn't locate any further information on the subject.</p>\n\n<p><strong>EDIT:</strong> Part of the stored procedure used:</p>\n\n<pre><code>      SELECT        ...,\n                    USER.SERVICE.URL,\n                    ...\n\n      FROM          USER.SITE\n\n      -- More joins\n\n      INNER JOIN    USER.SERVICE\n      ON            USER.SITE.URLID = USER.SERVICE.ID          \n\n      -- More joins\n\n      WHERE         USER.SERVICE.ID = 1...\n</code></pre>\n"},{"tags":["c#","oracle","bulkinsert"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":217,"score":1,"question_id":10279905,"title":"Optimize insert procedure (my procedure takes 1h30 to insert 100'000 rows)","body":"<p>I have a c# procedure that inserts data into an Oracle Database. I tried to use bulk insert but the performance a awfully bad and I don't know why. It takes approximately 1h30 to insert more than 100'000 rows !</p>\n\n<p>Here is my insert procedure :</p>\n\n<pre><code>internal void InsertPublications(DateTime aDate, List&lt;Model.Publication&gt; aPublications, Action&lt;int&gt; aProgress, Action&lt;int&gt; aCallBack)\n{\n    List&lt;List&lt;Model.Publication&gt;&gt; _Publications = Split(aPublications, 128);\n\n    int _InsertedCount = 0;\n\n    var _Worker = new BackgroundWorker() { WorkerReportsProgress = true };\n\n    _Worker.DoWork += (_Sender, _Args) =&gt;\n    {\n        var           _TableName = string.Format(\"SRC_PUBLICATION_{0}\", aDate.ToString(\"yyyyMMdd\"));\n        OracleCommand _Command;\n\n        this.Connect();\n\n        try\n        {\n            this.CreateOrReplaceTable(_TableName, SQL_CREATE_PULICATIONS_TABLE);\n\n            foreach (var _PublicationSub in _Publications)\n            {\n                if (!DlgParamPublication.alive)\n                {\n                    break;\n                }\n\n                _Command = this.Connection.CreateCommand();\n                _Command.CommandText = string.Format(SQL_INSERT_PULICATIONS, _TableName);\n                _Command.CommandType = CommandType.Text;\n                _Command.BindByName = true;\n                _Command.ArrayBindCount = _PublicationSub.Count;\n\n                _Command.Parameters.Add(\":ANNEE\", OracleDbType.NVarchar2, _PublicationSub.Select(_Item =&gt; _Item.Year).ToArray(), ParameterDirection.Input);\n                _Command.Parameters.Add(\":IDE_PUBLICATION\", OracleDbType.NVarchar2, _PublicationSub.Select(_Item =&gt; _Item.Pid).ToArray(), ParameterDirection.Input);\n                _Command.Parameters.Add(\":IDE_TYPE_PUBLICATION\", OracleDbType.NVarchar2, _PublicationSub.Select(_Item =&gt; _Item.IdePublicationType.ToString().ToLower()).ToArray(), ParameterDirection.Input);\n                _Command.Parameters.Add(\":IDE_TYPE_TRAVAIL\", OracleDbType.NVarchar2, _PublicationSub.Select(_Item =&gt; _Item.IdeTypeOfWork.ToString().ToLower()).ToArray(), ParameterDirection.Input);\n                _Command.Parameters.Add(\":IDE_NIVEAU_ELEMENT_ORG\", OracleDbType.NVarchar2, _PublicationSub.Select(_Item =&gt; _Item.UserRefType.ToString().ToLower()).ToArray(), ParameterDirection.Input);\n                _Command.Parameters.Add(\":IDE_ELEMENT_ORG\", OracleDbType.NVarchar2, _PublicationSub.Select(_Item =&gt; _Item.UserRefValue).ToArray(), ParameterDirection.Input);\n                _Command.Parameters.Add(\":AUTEUR\", OracleDbType.NClob, _PublicationSub.Select(_Item =&gt; _Item.Author).ToArray(), ParameterDirection.Input);\n\n                _InsertedCount += _Command.ExecuteNonQuery();\n\n                _Worker.ReportProgress(0, _InsertedCount);\n            }\n        catch (Exception _Exc)\n        {\n            ViewModel.DlgParamPublication.Logger.LogException(\"INSERT PUBLICATIONS\", _Exc, false);\n        }\n        finally\n        {\n            this.Disconnect();\n        }\n    };\n\n    _Worker.ProgressChanged    += (_Sender, _Args) =&gt; { aProgress((int)_Args.UserState); };\n    _Worker.RunWorkerCompleted += (_Sender, _Args) =&gt; { aCallBack(_InsertedCount); };\n\n    // Start background thread\n    if (DlgParamPublication.alive)\n    {\n        _Worker.RunWorkerAsync();\n    }\n}\n</code></pre>\n\n<p>Any idea why it's taking so long ?</p>\n\n<h2>UPDATE</h2>\n\n<p>Does anyone has another suggestion ? I wasn't been able to resolve the problem.</p>\n"},{"tags":["c","oracle","proc"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12935876,"title":"How to know whether SQL is successfully executed when programming using Pro*C?","body":"<p>I recently programme using Pro*C to access Oracle database like this:</p>\n\n<pre><code>cmd[128];\ndpc_set_sqlca(&amp;sqlca);\nstrcpy(cmd,\"EXECUTE IMMEDIATE\");\ndpc_exec_immediate(sql_string);\nSQLCODE = sqlca.sqlcode;\n</code></pre>\n\n<p>How to know whether the SQL has successfully executed?</p>\n\n<p>For example, how to know whether a table exists in oracle DB?\nHow to know whether an <code>INSERT</code> statement is successfully executed?</p>\n"},{"tags":["oracle","soa","osb","alsb"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":575,"score":1,"question_id":5517173,"title":"Does Oracle have two ESB products: Aqualogic Service Bus AND Oracle Service Bus or did ALSB get merged into the Oracle SB product?","body":"<p>Does Oracle have two ESB products: Aqualogic Service Bus AND Oracle Service Bus or did ALSB get merged into the Oracle SB product?</p>\n"},{"tags":["sql","oracle","top-n"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":1,"view_count":2651,"score":2,"question_id":2306744,"title":"Oracle SQL - How to Retrieve highest 5 values of a column","body":"<p>How do you write a query where only a select number of rows are returned with either the highest or lowest column value.</p>\n\n<p>i.e.  A report with the 5 highest salaried employees?</p>\n"},{"tags":["sql","oracle","top-n"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12953442,"title":"Finding the MAX","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/2306744/oracle-sql-how-to-retrieve-highest-5-values-of-a-column\">Oracle SQL - How to Retrieve highest 5 values of a column</a>  </p>\n</blockquote>\n\n\n\n<p>I have a simple question for someone who knows anything about SQL but since i'm very new and although I have tried many different ways, I can never seem to get the syntax correct. I want to display only the average hotel which is the MAX result. Currently it displays the average of all the hotels individually. Is this something I can use the MAX function for? I am using oracle</p>\n\n<pre><code>SELECT HOTEL.H_NAME \"HOTEL NAME\", ROUND(AVG (R_PRICE), 1) \"AVERAGE ROOM PRICE\"\nFROM ROOM JOIN HOTEL ON HOTEL.HOTEL_NO = ROOM.HOTEL_NO\nWHERE HOTEL.H_NAME = 'Shangra_La'\nOR HOTEL.H_NAME = 'Hilton'\nOR HOTEL.H_NAME = 'Sheraton'\nGROUP BY HOTEL.H_NAME\nORDER BY HOTEL.H_NAME;\n</code></pre>\n"},{"tags":["oracle","instance","nodes"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":12954569,"title":"Node and Instance Relationship on Oracle RAC","body":"<p>I'd like to ask about the process of Node and Instance on Oracle RAC functionality.\nI know that RAC provides Failover, a RAC feature that keeps an application running even if the node that was servicing its request failed to operate.\nWell so if RAC enters the Failover mode, is that mean the instance that was on the failure node will be shutted down or it was transferred to another node?</p>\n\n<p>Thank You!</p>\n"},{"tags":["oracle","date","jpa","insert"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12955801,"title":"Oracle overwrites my Date?","body":"<p>I got a problem with Oracle Dates. It seems that predefined Dates in an Java Application are different after inserting into an OracleDB.</p>\n\n<p>Insert via JPA entity:</p>\n\n<pre><code>entity.setDateOfCreation(new Date(System.currentTimeInMillis())); \n// 1350565985000\n</code></pre>\n\n<p>After commit and retrieve:</p>\n\n<pre><code>entity.getDateOfCreation() // 1350565985047\n</code></pre>\n\n<p>Why is this different? </p>\n\n<p>I assumed Oracle would just insert my specific Date Object with these exact Milliseconds into the Database. But obviously it doesn't. Because of the minimal delay it seems to \"overwrite\" the given Date with its own Date in milliseconds (and despite I do NOT use @GeneratedValue).</p>\n"},{"tags":["php","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":55,"score":3,"question_id":12955675,"title":"Error saving the XML data in an ORACLE database warning and fatal error","body":"<p>help to understand what is wrong.</p>\n\n<p>The point is:</p>\n\n<ol>\n<li><p>Include buffering, create the XML data:</p>\n\n<pre><code>ob_start();\nheader(\"Content-Type: text/xml\");\nheader(\"Expires: Thu, 19 Feb 1998 13:24:18 GMT\"); \nheader(\"Last-Modified: \".gmdate(\"D, d M Y H:i:s\").\" GMT\"); \nheader(\"Cache-Control: no-cache, must-revalidate\"); \nheader(\"Cache-Control: post-check=0,pre-check=0\"); \nheader(\"Cache-Control: max-age=0\"); \nheader(\"Pragma: no-cache\"); echo \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"WINDOWS-1251\\\" standalone=\\\"yes\\\"?&gt;\";\n    echo \"&lt;MAIN&gt;\";\n    echo \"&lt;ROWSET&gt;\";\n        echo \"&lt;ROW&gt;\";\n            echo \"&lt;CODE&gt;somecode&lt;/CODE&gt;\";\n            echo \"&lt;DESC&gt;somedesc&lt;/DESC&gt;\";\n            echo \"&lt;NOMINAL&gt;somenominal&lt;/NOMINAL&gt;\";\n            echo \"&lt;DATE&gt;2012.01.01&lt;/DATE&gt;\";\n            echo \"&lt;TYPE&gt;sometype&lt;/TYPE&gt;\";\n        echo \"&lt;/ROW&gt;\";\n    echo \"&lt;/ROWSET&gt;\";\necho \"&lt;/MAIN&gt;\";\n</code></pre></li>\n<li><p>Put the contents of the buffer to the variable <code>content</code>, flush the buffer and turning off buffering.</p>\n\n<pre><code>$content = ob_get_contents();\nob_end_clean();\n</code></pre></li>\n<li><p>Connecting to the database, and call a function, pass <code>content</code> to save the code that I wrote, taken from the official manual, may be it is something not so).</p>\n\n<pre><code>error_reporting(E_ALL);\nini_set('display_errors',1);\nheader('Content-Type: text/xml; charset=windows-1251');\n$c=oci_connect(\"test_user\", \"test_schema\", \"DBtest\");\n$rclob = oci_new_descriptor($c, OCI_D_LOB);\n$clob = oci_new_descriptor($c, OCI_D_LOB);   \n$s = oci_parse($c, \"begin :ret:=create_sm.get_xml_data(:data, :out); end;\");    \noci_bind_by_name($s, \":data\", $clob, -1, OCI_B_CLOB);\noci_bind_by_name($s, \":ret\", $rclob, -1, OCI_B_CLOB);\noci_bind_by_name($s, \":out\", $out, 1000);\n$clob-&gt;writeTemporary($content);\n$r = oci_execute($s, OCI_DEFAULT); // use OCI_DEFAULT so $lob-&gt;save() works\n//$e = oci_error($s);\n//var_dump($e);\noci_commit($c);\n//echo $out;\n$returnvalues = convertDateBackwards($rclob-&gt;load());\n$returnvalues = str_replace(\"&lt;SECURITY&gt;\",\"&lt;SECURITY ret=\\\"\".$out.\"\\\"&gt;\",$returnvalues);\n//echo convertDateBackwards($rclob-&gt;load());\necho $returnvalues;\n$clob-&gt;free(); // close LOB descriptor to free resources\n$rclob-&gt;free(); // close LOB descriptor to free resources\noci_free_statement($s);\noci_close($c);\n</code></pre></li>\n</ol>\n\n<p>The error appears this one:</p>\n\n<pre><code>Warning: oci_execute() [function.oci-execute]: \nORA-06550: line 1, column 14: \nPLS-00201: identifier 'CREATE_SM.GET_XML_DATA' must be declared \nORA-06550: line 1, column 7: PL / SQL: Statement ignored in C:\\webserver\\www.site.ru\\www\\blocks\\create_xml.php on line 57  \nFatal error: Call to undefined function convertDateBackwards() in C:\\webserver\\www.site.ru\\www\\blocks\\create_xml.php on line 62\n</code></pre>\n"},{"tags":["oracle","query","date-arithmetic"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":60,"score":-4,"question_id":12954947,"title":"How to add 2 dates in Oracle sp?","body":"<p>How can we add two dates in oracle? For example in sql we can do this, \" date_1 + date_2 \" how can we achieve the same thing in Oracle</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":7680,"score":7,"question_id":208236,"title":"Does oracle allow the uncommitted read option?","body":"<p>In db2 a query with a 'with ur' clause allows the query to be an uncommitted read and so does the 'with nolock' clause in mysql. Is there such an option in oracle too... If not why??</p>\n"},{"tags":["sql","sql-server","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12953643,"title":"SQL Server table in Oracle SQL Developer","body":"<p>I connected SQL server database with Oracle SQL Developer 3.2.10.09, everything looks good except i can only browse data, i cannot change data in tables cannot insert new or delete rows. Query is also disabled (i got message: Query Builder is not supported for this connection type.) I used Third Party JDBC Drivers - jtds-1.2.6.jar as my connection to SQL server. Is there a way to change data in tables?</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":58,"score":0,"question_id":12953582,"title":"Oracle - Add all values in single column","body":"<p>I'm trying to add all the values in a column to get the total of that column, anyone know the trick to this?</p>\n\n<p>Here's my query:</p>\n\n<pre><code>select T.*,\nsum(nvl(BIN1,0))+sum(nvl(BIN2,0))+sum(nvl((BIN3,0)) as TOTAL\nfrom\n(\n  SELECT CSM_FLASKS.FLASK_CODE,\n    MN_ASSAYS_STAGES.ASSAY_STAGE_ID,\n    VITRO_REP.TREATMENT_DOSE(CSM_FLASKS.GROUP_ID)                                               AS TREATMENT_DOSE,\n    MN_RI_REP.FLASK_BIN_VALUE_BY_INDEX(MN_ASSAYS_STAGES.ASSAY_STAGE_ID, CSM_FLASKS.FLASK_ID, 1) AS BIN1,\n    MN_RI_REP.FLASK_BIN_VALUE_BY_INDEX(MN_ASSAYS_STAGES.ASSAY_STAGE_ID, CSM_FLASKS.FLASK_ID, 2) AS BIN2,\n    MN_RI_REP.FLASK_BIN_VALUE_BY_INDEX(MN_ASSAYS_STAGES.ASSAY_STAGE_ID, CSM_FLASKS.FLASK_ID, 3) AS BIN3,\n    MN_RI_REP.CBPI_FLASK(MN_ASSAYS_STAGES.ASSAY_STAGE_ID, CSM_FLASKS.FLASK_ID, 1, 2, 2)         AS CBPI,\n    CSM_EXPERIMENTS.EXPT_CODE\n  FROM CSM_TREATMENT_GROUPS_EXPTS\n  INNER JOIN CSM_ASSAYS\n  ON CSM_ASSAYS.EXPT_ID = CSM_TREATMENT_GROUPS_EXPTS.EXPERIMENT_ID\n  INNER JOIN CSM_FLASKS\n  ON CSM_TREATMENT_GROUPS_EXPTS.GROUP_ID = CSM_FLASKS.GROUP_ID\n  INNER JOIN MN_ASSAYS\n  ON CSM_ASSAYS.ASSAY_ID = MN_ASSAYS.ASSAY_ID\n  INNER JOIN MN_ASSAYS_STAGES\n  ON MN_ASSAYS.MN_ASSAY_ID = MN_ASSAYS_STAGES.MN_ASSAY_ID\n  INNER JOIN CSM_EXPERIMENTS\n  ON CSM_EXPERIMENTS.EXPT_ID    = CSM_TREATMENT_GROUPS_EXPTS.EXPERIMENT_ID\n  AND CSM_EXPERIMENTS.EXPT_ID   = CSM_ASSAYS.EXPT_ID\n  WHERE CSM_ASSAYS.ASSAY_ID     = 1000060\n  AND MN_ASSAYS_STAGES.STAGE_ID = 2\n  ORDER BY CSM_TREATMENT_GROUPS_EXPTS.ORDER_INDEX,\n    CSM_FLASKS.FLASK_ID,\n    CSM_FLASKS.IS_PLUS DESC\n) T\n</code></pre>\n\n<p>Error:\nORA-00937: not a single-group group function\n00937. 00000 -  \"not a single-group group function\"\n*Cause:<br>\n*Action:\nError at Line: 1 Column: 9</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":12951673,"title":"Oracle Cast using %TYPE attribute","body":"<p>I want to cast a value using %TYPE attribute in my SQL statement. The %TYPE attribute lets you use the datatype of a field, record, nested table, database column, or variable in your own declarations, rather than hardcoding the type names. </p>\n\n<p>This works:</p>\n\n<pre><code>insert into t1  select cast(v as varchar2(1)) from t2;\n</code></pre>\n\n<p>But I would like to</p>\n\n<pre><code>insert into t1  select cast(v as t1.v%TYPE) from t2;\n\nError starting at line 16 in command:\ninsert into t1  select cast(v as t1.v%TYPE) from t2\nError at Command Line:16 Column:37\nError report:\nSQL Error: ORA-00911: Ongeldig teken.\n00911. 00000 -  \"invalid character\"\n*Cause:    identifiers may not start with any ASCII character other than\n           letters and numbers.  $#_ are also allowed after the first\n           character.  Identifiers enclosed by doublequotes may contain\n           any character other than a doublequote.  Alternative quotes\n           (q'#...#') cannot use spaces, tabs, or carriage returns as\n           delimiters.  For all other contexts, consult the SQL Language\n           Reference Manual.\n*Action:\n</code></pre>\n\n<p>Can this (or something similar) be done? </p>\n\n<p>EDIT:\nWhat I'm trying to achieve is: when t2.v is to large I want to truncate it. I'm trying to avoid using substr with a hard coded field length. So cast(v as t1.v%TYPE) instead of substr(v,1,1) </p>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":48,"score":-1,"question_id":12951907,"title":"Improper structure of SQL statement?","body":"<p>I have a DB with 4 tables: booking, hotel, guest and room. I'm trying to get my SQL statement (in Oracle) to produce the average room price of each hotel. This is currently what i have:</p>\n\n<pre><code>SELECT HOTEL.H_NAME \"HOTEL NAME\", ROUND(AVG (R_PRICE), 1) \"AVERAGE ROOM PRICE\"\nFROM ROOM, HOTEL\nWHERE HOTEL.H_NAME = 'Shangra_La'\nOR HOTEL.H_NAME = 'Hilton'\nOR HOTEL.H_NAME = 'Sheraton'\nGROUP BY HOTEL.H_NAME\nORDER BY HOTEL.H_NAME;\n</code></pre>\n\n<p>From what I thought, that statement will select the hotel name and average price of all the rooms in the 'Shangra_la', 'Hilton' and 'Sheraton' and order them by the name of the hotel however when I do this, I get the same average for each hotel which is wrong. This is my output:</p>\n\n<pre><code>H_NAME      AVG. R_PRICE\nHilton      253.5\nShangra_La  253.5\nSheraton    253.5\n</code></pre>\n\n<p>Below is the table data for ROOM:</p>\n\n<pre><code>insert into room values\n('1','H100','S',220.00);\ninsert into room values\n('2','H100','D',230.00);\ninsert into room values\n('3','H100','F',310.00);\ninsert into room values\n('1','H200','S',260.00);\ninsert into room values\n('2','H200','D',170.00);\ninsert into room values\n('3','H200','S',250.00);\ninsert into room values\n('4','H200','F',180.00);\ninsert into room values\n('5','H200','F',295.00);\ninsert into room values\n('1','H300','D',200.00);\ninsert into room values\n('2','H300','S',420.00);\n</code></pre>\n\n<p>AND HOTEL:</p>\n\n<pre><code>insert into hotel values\n('H100','Sheraton','Melbourne');\ninsert into hotel values\n('H200','Shangra_La','Sydney');\ninsert into hotel values\n('H300','Hilton', 'Perth');\n</code></pre>\n\n<p>Have I structured the statement incorrectly? What can I do to resolve this issue? Hopefully i have provided enough information. </p>\n"},{"tags":["oracle","oracle11g","jdeveloper"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12949391,"title":"Querying oracle database with where clause","body":"<p>I wrote a java application that reads information off a file, selects specific details from it and uploads them to an Oracle 11g database. My problem comes when I have to retrieve information from the database. When I use the (SELECT * FROM ...) query everything works out fine. If I try to narrow it down by including a WHERE clause, it returns 0 rows every time, even though the records I ask for exist in the database, it's almost as if the query cannot read the information I have in the tables. Any advice?</p>\n\n<p>I used Oracle Jdeveloper 11g release 2 for the java application. The database is installed in a virtual machine running Redhat enterprise linux (I don't know if this makes a difference).</p>\n\n<p>I used the following code to insert into the table:</p>\n\n<pre><code>    String jdbcUrl = \"jdbc:oracle:thin:@10.0.0.236:1521:lunga\";\n    String uid = \"dev\";\n    String pwd = \"Oracle!23\";\n            sql =\n \"INSERT INTO SERVER_DB.SERVER_STATS (DATE_GENERATED, \" + \"TIME_GENERATED, SERVER_NAME, PERFOMANCE_CLASS, \" +\n   \"PERFOMANCE_OBJECT, PERFOMANCE_INSTANCE, OBJECT_VALUE) \" + \"VALUES ('\";\n\n\n        Statement stmnt;\n        Connection conn;\n        OracleDataSource ods;\n        String objects = \"\", name=\"\", values=\"\", time=\"\", date=\"\";\n\n        try {\n\n            ods = new OracleDataSource();\n            ods.setURL(jdbcUrl);\n            conn = ods.getConnection(uid, pwd);\n            stmnt = conn.createStatement();\n\n            for (int i = 0; i &lt; vals.size(); ++i) {               \n\n                date = getDate(text);\n                objects = (String)objs.get(i);\n                values = (String)vals.get(i);\n                name = getName(text);\n                time = getTime(text);\n\n                sql =\n                \"INSERT INTO SERVER_DB.SERVER_STATS (DATE_GENERATED, \" + \"TIME_GENERATED, SERVER_NAME, PERFOMANCE_CLASS, \" +\n                \"PERFOMANCE_OBJECT, PERFOMANCE_INSTANCE, OBJECT_VALUE) \"\n                + \"VALUES ('\"+date+\"', '\"+time+\"', '\"+name+\"', 'Memory', '\"+objects+\"', '\"+name+\"', '\"+values+\"')\";\n\n                stmnt.executeUpdate(sql);\n                objects = \"\"; name=\"\"; values=\"\"; time=\"\"; date=\"\";\n            }\n            conn.commit();\n            conn.close();\n\n\n        } catch (SQLException e) {\n            System.out.println(\"Oops! The following happened: \" + \"\\n\" +\n                    e.toString());\n        }\n\n    }\n</code></pre>\n"},{"tags":["php","oracle","yii"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12952428,"title":"how to convert in sql inner join to yii active record?","body":"<p>how to convert this query to Yii active record ?</p>\n\n<pre><code>SELECT a.USERID, a.ADID, a.PAGEVIEW,a.EXPIRYDATE,a.ADTITLE,a.ADDESC\n        from CKAD a INNER JOIN \n        (\n            SELECT  b.USERID, max(b.PAGEVIEW) as PAGEVIEW\n            FROM CKAD b WHERE b.DISPPUBLISHDATE &gt;= current_date - 3\n            AND b.EXPIRYDATE &gt;= current_date and b.STATUS = 1 AND b.USERID IS NOT NULL\n            GROUP BY b.USERID\n        ) b\n        ON (a.USERID = b.USERID and a.PAGEVIEW = b.PAGEVIEW)\n        order by a.PAGEVIEW DESC\";\n</code></pre>\n"},{"tags":["oracle","plsql","oracle11g","plsqldeveloper"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":112,"score":2,"question_id":11733873,"title":"Trigger on one table field works for all table fields","body":"<p>I have a trigger which is for a few fields in a table. But for some reason, if another field is changed (which is not defined in trigger) then it still fires.</p>\n\n<pre><code>CREATE OR REPLACE TRIGGER INTEGRATION_EMPLOYMENT\n    AFTER UPDATE OF start_day_of_employment, end_of_employment ON hr_employment_data\n    FOR EACH ROW\n    DECLARE\n    BEGIN\n         IF UPDATING THEN\n            MERGE INTO ad_integration intg USING dual ON (intg.user_id = :NEW.user_id AND intg.integrated = 'NO')\n            WHEN MATCHED THEN\n                UPDATE SET\n                         intg.start_day_of_employment = decode(:NEW.start_day_of_employment, NULL, ' ', :NEW.start_day_of_employment),\n                         intg.end_of_employment = decode(:NEW.end_of_employment, NULL, ' ', :NEW.end_of_employment),\n                         intg.manager_status = :NEW.manager_status,\n                         intg.pid = (SELECT pid FROM arc.user_info WHERE user_id = :NEW.user_id),\n                         intg.network_access_start_date = (SELECT network_access_start_date FROM hr_extension_data WHERE user_id = :NEW.user_id)\n             WHEN NOT MATCHED THEN\n                INSERT (intg.user_id, intg.start_day_of_employment, intg.end_of_employment, intg.manager_status, intg.pid, intg.network_access_start_date\n                VALUES (:NEW.user_id, :NEW.start_day_of_employment, :NEW.end_of_employment, :NEW.manager_status, (SELECT pid FROM arc.user_info WHERE user_id = :NEW.user_id), (SELECT network_access_start_date FROM hr_extension_data WHERE user_id = :NEW.user_id));\nEND IF;\n\nEND HR_ADINTEGRATION_EMPLOYMENT;\n</code></pre>\n\n<p>Is it because of using DUAL or something am I missing?</p>\n\n<p>Cheers! :-)</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12949008,"title":"How in query result add 0-data for don't exist rows?","body":"<p>I have Table with columns: \"Month\" and \"Year\", and other data.</p>\n\n<p>All row in Table have different values \"Month\" and \"Year\".</p>\n\n<p>But for some Month and Year rows don't exist.</p>\n\n<p>I want create SQL-query (... where year in (2010, 2011, 2012) ...), that in result this SQL-query have all Month for select Year and if some month don't exist else add it to result with 0 in other data columns.</p>\n\n<p>Example: \nInput: Table</p>\n\n<pre><code>data / month / year\n+-----+---+------+\n| 3.0 | 1 | 2011 |\n| 4.3 | 3 | 2011 |\n| 5.7 | 4 | 2011 |\n| 2.2 | 5 | 2011 |\n| 5.4 | 7 | 2011 |\n+-----+---+------+\n</code></pre>\n\n<p>Output: SELECT ... WHERE year IN (2011)</p>\n\n<pre><code>+-----+----+------+\n| 3.0 |  1 | 2011 |\n|   0 |  2 | 2011 |\n| 4.3 |  3 | 2011 |\n| 5.7 |  4 | 2011 |\n| 2.2 |  5 | 2011 |\n|   0 |  6 | 2011 |\n| 5.4 |  7 | 2011 |\n|   0 |  8 | 2011 |\n|   0 |  9 | 2011 |\n|   0 | 10 | 2011 |\n|   0 | 11 | 2011 |\n|   0 | 12 | 2011 |\n+-----+----+------+\n</code></pre>\n"},{"tags":["sql","oracle","oracle10g","top-n"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12949358,"title":"how to get latest 'n' updated row from a table","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/2306744/oracle-sql-how-to-retrieve-highest-5-values-of-a-column\">Oracle SQL - How to Retrieve highest 5 values of a column</a>  </p>\n</blockquote>\n\n\n\n<p>i have a table abc, where i have following columns</p>\n\n<p><code>act_id,cust_id,lastUpdatedDate,custActivity</code>. Where <strong>act_id is primary key</strong> .</p>\n\n<p>lastUpdatedDate store last activity done for this customer.</p>\n\n<p>i am trying to get latest 10 rows for given custid based on lastUpdatedDate.</p>\n\n<p>How can i achieve it.</p>\n\n<p>-vivek</p>\n"},{"tags":["mysql","sql-server","database","oracle","postgresql"],"answer_count":25,"favorite_count":165,"up_vote_count":134,"down_vote_count":1,"view_count":5444,"score":133,"question_id":761204,"title":"What resources exist for Database performance-tuning?","body":"<p>What good resources exist for understanding database tuning on the major engines and advancing your knowledge in that area?</p>\n\n<p>The idea of this question is to collect the shed load of resources that invariably exist, so that people can have a \"one stop\" knowledge shop of the good, peer approved resources.</p>\n\n<hr />\n\n<p><strong>General SQL</strong></p>\n\n<ul>\n<li><a href=\"http://books.google.com/books?id=3H9CC54qYeEC&amp;dq=sql+performance+tuning&amp;printsec=frontcover&amp;source=bn&amp;hl=en&amp;ei=1dDoSYmjMOrlnQfX-bSYBw&amp;sa=X&amp;oi=book_result&amp;ct=result&amp;resnum=4\" rel=\"nofollow\">Book: SQL Performance Tuning</a></li>\n<li><a href=\"http://books.google.com/books?id=pKXF7UU0gBYC&amp;printsec=frontcover&amp;dq=sql%2Btuning\" rel=\"nofollow\">Book: SQL Tuning</a></li>\n<li><a href=\"http://rads.stackoverflow.com/amzn/click/0596008945\" rel=\"nofollow\">Book: The Art of SQL</a></li>\n<li><a href=\"http://books.google.com/books?id=gjyd3IOrwz4C&amp;lpg=PP1&amp;dq=refactoring%20sql%20applications&amp;pg=PP1#v=onepage&amp;q&amp;f=false\" rel=\"nofollow\">Book: Refactoring SQL Applications</a></li>\n<li><a href=\"http://books.google.com/books?id=1CJdgVO8PwAC&amp;lpg=PR21&amp;dq=database%20tuning%20principles&amp;pg=PP1#v=onepage&amp;q&amp;f=false\" rel=\"nofollow\">Book: Database tuning: principles, experiments, and troubleshooting techniques</a></li>\n<li><a href=\"http://Use-The-Index-Luke.com/\" rel=\"nofollow\">Use The Index, Luke! - A Guide to database performance for developers</a></li>\n</ul>\n\n<p><strong>PostgreSQL</strong> (<a href=\"http://wiki.postgresql.org/\" rel=\"nofollow\">wiki</a>) (<a href=\"http://www.pgsql.ru/db/pgsearch/\" rel=\"nofollow\">PGsearch</a>)</p>\n\n<ul>\n<li><a href=\"http://wiki.postgresql.org/wiki/Performance_Optimization\" rel=\"nofollow\">Performance Optimization</a></li>\n<li><a href=\"http://www.mohawksoft.org/?q=node/56\" rel=\"nofollow\">Quick PostgreSQL Optimization</a></li>\n<li><a href=\"http://explain.depesz.com/\" rel=\"nofollow\">Explain Analyze Interpreter</a></li>\n<li><a href=\"http://www.postgresql.org/docs/current/static/performance-tips.html\" rel=\"nofollow\">PostgreSQL Performance Tips</a></li>\n<li><a href=\"https://www.packtpub.com/postgresql-90-high-performance/book\" rel=\"nofollow\">Book: PostgreSQL 9.0 High Performance</a></li>\n</ul>\n\n<p><strong>MySQL</strong></p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/368858/hidden-features-of-mysql\">Hidden Features of MySQL</a></li>\n<li><a href=\"http://oreilly.com/catalog/9780596101718/\" rel=\"nofollow\">Book: High Performance MySQL</a> / <a href=\"http://www.mysqlperformanceblog.com/\" rel=\"nofollow\">Blog: High Performance MySQL</a></li>\n<li><a href=\"http://www.xaprb.com/blog/\" rel=\"nofollow\">Blog: Xaprb (for MySQL DBAs)</a></li>\n</ul>\n\n<p><strong>Oracle</strong></p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/79266/how-do-you-interpret-a-querys-explain-plan\">How do you interpret a query's explain plan?</a></li>\n<li><a href=\"http://www.ixora.com.au/scripts/\" rel=\"nofollow\">Oracle Advanced Tuning Scripts</a></li>\n<li><a href=\"http://download.oracle.com/docs/cd/B28359_01/server.111/b28274/toc.htm\" rel=\"nofollow\">Oracle Database Performance Tuning Guide</a></li>\n<li><a href=\"http://asktom.oracle.com\" rel=\"nofollow\">Ask Tom</a></li>\n<li><a href=\"http://download.oracle.com/docs/cd/B19306_01/server.102/b14200/toc.htm\" rel=\"nofollow\">Oracle Database SQL Reference</a></li>\n<li><a href=\"http://rads.stackoverflow.com/amzn/click/1590599179\" rel=\"nofollow\">Book: Understanding Oracle Performance</a></li>\n<li><a href=\"http://amzn.com/059600527X\" rel=\"nofollow\">Book: Optimizing Oracle Performance</a></li>\n<li><a href=\"http://amzn.com/1590599179\" rel=\"nofollow\">Book: Troubleshooting Oracle Performance</a></li>\n<li><a href=\"http://amzn.com/1590596366\" rel=\"nofollow\">Book: Cost-Based Oracle Fundamentals</a></li>\n</ul>\n\n<p><strong>MS SQL Server</strong></p>\n\n<ul>\n<li><a href=\"http://www.sql-server-performance.com/index.aspx\" rel=\"nofollow\">SQL Server Performance</a> </li>\n<li><a href=\"http://downloads.red-gate.com/ebooks/HighPerformanceSQL_ebook.zip\" rel=\"nofollow\">eBook: High Performance SQL Server</a></li>\n<li><a href=\"http://stackoverflow.com/questions/103423/what-are-the-best-sql-server-performance-optimization-techniques\">SO Question: What are the best SQL Server performance optimization techniques?</a></li>\n<li><a href=\"http://www.brentozar.com/sql-server-performance-tuning/\" rel=\"nofollow\">Brent Ozar's Perf Tuning Page</a></li>\n<li><a href=\"http://sqlserverpedia.com/wiki/Performance_Tuning\" rel=\"nofollow\">SqlServerPedia's Perf Tuning Page</a></li>\n<li><a href=\"http://rads.stackoverflow.com/amzn/click/0735626243\" rel=\"nofollow\">Book: Sql Server 2008 Internals</a></li>\n<li><a href=\"http://www.simple-talk.com/sql/performance/how-to-identify-slow-running-queries-with-sql-profiler/\" rel=\"nofollow\">How to Identify Slow Running Queries with SQL Profiler</a></li>\n</ul>\n\n<p><strong>Sybase SQL Anywhere</strong></p>\n\n<ul>\n<li><a href=\"http://sqlanywhere.blogspot.com/\" rel=\"nofollow\">Blog: SQL Anywhere</a></li>\n<li><a href=\"http://rads.stackoverflow.com/amzn/click/1556225067\" rel=\"nofollow\">Book: SQL Anywhere Studio 9  Developer's Guide</a></li>\n</ul>\n\n<p><strong>JDBC</strong></p>\n\n<ul>\n<li><a href=\"http://www.javaperformancetuning.com/tips/jdbc.shtml\" rel=\"nofollow\">JDBC Performance Tips</a></li>\n</ul>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":394,"score":1,"question_id":4596220,"title":"How to verify Oracle Sequences","body":"<p>We have a customer who does {something} and after that some of our sequences are returning numbers that have already been used.  While the long term answer would be for them to stop doing {something}, I need a simple way to check the sequences against the tables they are used in.</p>\n\n<p>I can query user_sequences to get the last_number for each sequence and I can get the max(id_number) for each table.  But when I try to do both in the same query I get nulls back.</p>\n\n<p>My broken sql is\n<br>\n<code>\n    select max(last_number) , max(id_number) from user_sequences,\n    squiggly.ACCOUNT_CODE_DEFINITION where sequence_name = 'ACCOUNT_CODE_DEFINITION_SEQ' \n    and sequence_owner = 'SQUIGGLY' ;\n</code></p>\n"},{"tags":["oracle","oracle11g"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":827,"score":1,"question_id":5772898,"title":"Estimate the database size","body":"<p>We have a clustered database with two nodes. My objective is to find out the size of the database. Could you please give me a script to estimate the size of the database?</p>\n"},{"tags":["oracle","hibernate","size","byte"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12949128,"title":"How related hibernate @Size max and oracle varchar in bytes","body":"<p>I have @Size annotation of field: </p>\n\n<pre><code>@Column(name = \"SHARE_PART_STR\")\n@Size(max = 10)\nprivate String shareStr;\n</code></pre>\n\n<p>This field declared in Oracle as:</p>\n\n<pre><code>CREATE TABLE ...\n(\n  SHARE_PART_STR  VARCHAR2(10 BYTE)\n)\n</code></pre>\n\n<p>How @Size(max = 10) related to 10 BYTE? Did hibernate tries to save VARCHAR2(10 CHAR) to VARCHAR2(10 BYTE)? Is this desired correct behaviour? Or is it incorrect to use VARCHAR2(... BYTE) with hibernate?</p>\n"},{"tags":["mysql","sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12948858,"title":"How to get current transaction details for a user in SQL?","body":"<p>ASSET_TRANSFER_TABLE</p>\n\n<pre><code> TRANSFER_ID  TRANSFER_DATE  ASSET_ID   STOCK_TAG  TRANSFER_FROM_ID  TRANSFER_TO_ID  \n    111         dd/mm/yyyy      2122      222-222        Roy                Jina\n</code></pre>\n\n<p>Refering to the above table if a user has more than one asset in his/her account,the details for both the transaction has to be displayed.second,only the current transaction is to be displayed ie. previous trans where the same user used to hold an asset but it has been transferred to some other user,that the <strong>past transaction details should be omitted</strong>.</p>\n\n<pre><code>The result should display Transfer Id,Transfer Date,Asset ,Transfer to Id.\n</code></pre>\n\n<p>If anyone could help with this I would be really thankful.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["sql","oracle","view","insert"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2440,"score":0,"question_id":5035441,"title":"oracle: why cant i insert into view","body":"<p>I created a simple view with columns from a single table. When i try to insert values into the table, i get the ORA_01732 error that dml is not legal on this view. I DO have an order by clause in the view definition which I've gathered is not allowed for it to be inherently updatable and I'm seeing that I probably have to use an INSTEAD OF type clause in the view definition. Can someone show me how I would build the view to be updatable this way?</p>\n\n<p>here is the create view statement:</p>\n\n<pre><code>create view CUST_VIEW\nas select customer#,firstname,lastname,state\nfrom book_customer\norder by state, lastname;\n</code></pre>\n"},{"tags":["c#","oracle","asp-classic","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":105,"score":0,"question_id":12947831,"title":"How to write sql select query to get data faster?","body":"<p>I have a table with 20,000 records when i write query as follows to retrieve data</p>\n\n<pre><code>select emp_id from emp;\n</code></pre>\n\n<p>it is talking 13 to 15 sec to execute how can i get data faster from the table.\nNote it is not 20,000 also more.</p>\n\n<p>here is the out put emp_id nothing but mtrl_cd here</p>\n\n<pre><code> columnname ID      PK null       datatype     Histogram  numdistinct\n    MTRL_DESC   2       Y   VARCHAR2 (100 Byte)   None    19480         \n    MTRL_CD     1   1   N   VARCHAR2 (9 Byte)     None    19990\n</code></pre>\n"},{"tags":["java","sql","oracle","spring","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12932799,"title":"Improving performance of native sql query in spring/hibernate applicaiton?","body":"<p>I have below the <code>native sql query</code>. i am using <code>Oracle</code> database.</p>\n\n<pre><code>select\n         * \n     from\n         (select\n             row_.*,\n             rownum rownumber \n         from\n             (select\n                 colmn1,\n                 colmn2,\n                 colmn3,\n                 colmn4,\n                 colmn5,\n                 colmn6,\n                 from\n                 Table5\n             where\n                 colmn5 In (\n                    '19901','10001'\n                 ) \n             order by\n                colmn1 ) row_ ) \n         Where\n             Rownumber &lt;= 50000\n             and rownumber &gt; 0\n</code></pre>\n\n<p>Above query returns <code>50000</code> records. if i execute above query in <code>sqldeveloper</code>, it takes only <code>30 seconds</code> but in the spring and hibernate integrated application it takes <code>15 minutes</code>. How can i improve the performance?</p>\n\n<p>Thanks!</p>\n"},{"tags":["database","oracle","globalization","postal-code"],"answer_count":7,"favorite_count":3,"up_vote_count":12,"down_vote_count":0,"view_count":7546,"score":12,"question_id":325041,"title":"I need to store postal codes in a database. How big should the column be?","body":"<p>I expect the column to be a VARCHAR2, in my Oracle Database.</p>\n\n<p>US Zips are 9.</p>\n\n<p>Canadian is 7.</p>\n\n<p>I am thinking 32 characters would be reasonable upper limit</p>\n\n<p>What am I missing?</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12947351,"title":"Caluculating sum of activity","body":"<p>I have a table which is with following kind of information</p>\n\n<pre><code>activity     cost    order   date  other information\n10            1       100     --\n20            2       100\n10            1       100\n30            4       100\n40            4       100\n20            2       100\n40            4       100\n20            2       100\n10            1       101\n10            1       101\n20            1       101\n</code></pre>\n\n<p>My requirement is to get sum of all activities over a work order\nex: for order 100</p>\n\n<p>1+2+4+4=11</p>\n\n<p>1(for activity 10)\n2(for activity 20)\n4 (for activity 30) etc.</p>\n\n<p>i tried with group by, its taking lot time for calculation. There are 1lakh plus records in warehouse. is there any possibility in efficient way.</p>\n\n<pre><code>SELECT SUM(MIN(cost))\nFROM COST_WAREHOUSE a\nWHERE   order = 100\nGROUP BY (order, ACTIVITY)\n</code></pre>\n"},{"tags":["sql","oracle","oracle10g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1630,"score":0,"question_id":3539177,"title":"Oracle sql query to show count of events daily and total number of events for last seven days","body":"<p>There is the following table: <code>event_table</code>, which contains information about <code>object_name</code>, <code>event_number</code>, <code>event_supplementary_info</code>, <code>event_time</code>.  I would like to have a sql query, which shows number of events per last seven day daily and total number.</p>\n\n<p>I need something like this</p>\n\n<pre><code>select Object_name, event_number\nmax(decode(trim(dow),'MONDAY',totalquantity,0)) Mon, \nmax(decode(trim(dow),'TUESDAY',totalquantity,0)) Tue, \nmax(decode(trim(dow),'WEDNESDAY',totalquantity,0)) Wed, \nmax(decode(trim(dow),'THURSDAY',totalquantity,0)) Thu, \nmax(decode(trim(dow),'FRIDAY',totalquantity,0)) Fri,\nmax(decode(trim(dow),'SATURDAY',totalquantity,0)) Sat, \nmax(decode(trim(dow),'SUNDAY',totalquantity,0)) Sun,  \n( \nmax(decode(trim(dow),'MONDAY',totalquantity,0)) + \nmax(decode(trim(dow),'TUESDAY',totalquantity,0)) + \nmax(decode(trim(dow),'WEDNESDAY',totalquantity,0)) + \nmax(decode(trim(dow),'THURSDAY',totalquantity,0)) + \nmax(decode(trim(dow),'FRIDAY',totalquantity,0)) +\nmax(decode(trim(dow),'SATURDAY',totalquantity,0)) + \nmax(decode(trim(dow),'SUNDAY',totalquantity,0)) \n) TOTAL \nfrom  \n( \n  select event_name,  \n  to_char(event_time, 'DAY') as dow,  \n  sum(event_time) as totalquantity \n  from event_table a \n  where a.event_time &gt;= trunc(sysdate-7,'D') \n  and a.tradedate &lt;= trunc(sysdate-7,'D') + 7 \n  group by a.event_name, alarm_time\n) \ngroup by Object_name, event_number;\n</code></pre>\n"},{"tags":["oracle","for-loop","plsql","cursor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":99,"score":0,"question_id":12946389,"title":"PL SQL Nested IF ELSE with Cursor","body":"<p>I have three cursors declared CUR_AD1, CUR_AD1_C, CUR_AD_2. All they contain is result coming from a 3 mere select statements which works fine.</p>\n\n<p>Later on I have the following statements:</p>\n\n<pre><code>BEGIN\n\n    FOR AD1_REC IN CUR_AD1 LOOP\n\n      V_ORG_NAME := AD1_REC.ADDRESS_LINE1;\n\n\n    IF V_ORG_NAME = AD1_REC.ADDRESS_LINE1 THEN\n        INSERT INTO DSOPI_PERSON_ADDR_RULE \n        (CCTR_PERSON_ADDRESS_ID, CCTR_PERSON_ID, SRC_ADDRESS_LINE1, SRC_ADDRESS_LINE2, SRC_ADDRESS_LINE3, SRC_ADDRESS_LINE4, \n        ORG_NAME, DEPT_NAME, TGT_ADDRESS_LINE1, TGT_ADDRESS_LINE2, TGT_ADDRESS_LINE3, TGT_ADDRESS_LINE4, \n        STATE, CITY, COUNTRY_NAME, ZIP_CODE, EXTRACT_DATE) \n        VALUES\n        (AD1_REC.CCTR_PERSON_ADDRESS_ID, AD1_REC.CCTR_PERSON_ID, AD1_REC.ADDRESS_LINE1, AD1_REC.ADDRESS_LINE2, AD1_REC.ADDRESS_LINE3, AD1_REC.ADDRESS_LINE4, \n         V_ORG_NAME, '', '', AD1_REC.ADDRESS_LINE2, AD1_REC.ADDRESS_LINE3, AD1_REC.ADDRESS_LINE4, \n         AD1_REC.STATE, AD1_REC.CITY, AD1_REC.COUNTRY_NAME, AD1_REC.ZIP_CODE, SYSDATE);\n\n    ELSIF V_ORG_NAME = AD1_REC.ADDRESS_LINE2 THEN\n      FOR AD2_REC IN CUR_AD2 LOOP\n\n        INSERT INTO DSOPI_PERSON_ADDR_RULE \n        (CCTR_PERSON_ADDRESS_ID, CCTR_PERSON_ID, SRC_ADDRESS_LINE1, SRC_ADDRESS_LINE2, SRC_ADDRESS_LINE3, SRC_ADDRESS_LINE4, \n        ORG_NAME, DEPT_NAME, TGT_ADDRESS_LINE1, TGT_ADDRESS_LINE2, TGT_ADDRESS_LINE3, TGT_ADDRESS_LINE4,\n        STATE, CITY, COUNTRY_NAME, ZIP_CODE, EXTRACT_DATE) \n        VALUES\n        (AD2_REC.CCTR_PERSON_ADDRESS_ID, AD2_REC.CCTR_PERSON_ID, AD2_REC.ADDRESS_LINE1, AD2_REC.ADDRESS_LINE2, AD2_REC.ADDRESS_LINE3, AD2_REC.ADDRESS_LINE4, \n         AD2_REC.ADDRESS_LINE2, NULL, AD2_REC.TGT_ADDRESS_LINE1, NULL, AD2_REC.ADDRESS_LINE3, AD2_REC.ADDRESS_LINE4, \n         AD2_REC.STATE, AD2_REC.CITY, AD2_REC.COUNTRY_NAME, AD2_REC.ZIP_CODE, SYSDATE);\n         END LOOP;\n         END IF;\n\nEND LOOP;                \nEXCEPTION WHEN OTHERS THEN\nDBMS_OUTPUT.PUT_LINE('ERROR' || SQLERRM);\nRAISE;    \nEND; \n</code></pre>\n\n<p>When I compile the body I keep getting the following errors:</p>\n\n<p>PL/SQL: SQL Statement ignored\nPLS-00302: component 'ZIP_CODE' must be declared\nPL/SQL: ORA-00984: column not allowed here</p>\n\n<p>There is no problem with the tables whatsoever. I think it has to do something with the how I am putting my control statements. Any help is highly appreciated. </p>\n\n<p>DDL for Table DSOPI_PERSON_ADDR_RULE</p>\n\n<pre><code>  CREATE TABLE \"CALSEED_OWNER\".\"DSOPI_PERSON_ADDR_RULE\" \n   (    \"CCTR_PERSON_ADDRESS_ID\" NUMBER(12,0), \n    \"CCTR_PERSON_ID\" NUMBER(12,0), \n    \"SRC_ADDRESS_LINE1\" VARCHAR2(100 BYTE), \n    \"SRC_ADDRESS_LINE2\" VARCHAR2(100 BYTE), \n    \"SRC_ADDRESS_LINE3\" VARCHAR2(100 BYTE), \n    \"SRC_ADDRESS_LINE4\" VARCHAR2(100 BYTE), \n    \"ORG_NAME\" VARCHAR2(100 BYTE), \n    \"DEPT_NAME\" VARCHAR2(100 BYTE), \n    \"TGT_ADDRESS_LINE1\" VARCHAR2(100 BYTE), \n    \"TGT_ADDRESS_LINE2\" VARCHAR2(100 BYTE), \n    \"TGT_ADDRESS_LINE3\" VARCHAR2(100 BYTE), \n    \"TGT_ADDRESS_LINE4\" VARCHAR2(100 BYTE), \n    \"STATE\" VARCHAR2(100 BYTE), \n    \"CITY\" VARCHAR2(100 BYTE), \n    \"COUNTRY_NAME\" VARCHAR2(100 BYTE), \n    \"ZIP_CODE\" VARCHAR2(100 BYTE), \n    \"EXTRACT_DATE\" DATE, \n    \"STREET\" VARCHAR2(100 BYTE), \n    \"STREET_CONTD\" VARCHAR2(100 BYTE)\n\nCURSOR CUR_AD2 IS         \n        SELECT CCTR_PERSON_ADDRESS_ID, 'AL2' AL,ADDRESS_LINE2 \n        FROM STG_RT2_PERSON_ADDRESS WHERE UPPER(ADDRESS_LINE2) IN \n        ( SELECT UPPER(ORG_NAME) FROM STG_RT2_ORGANIZATION\n        WHERE NOT REGEXP_LIKE(ORG_NAME, '[0-9]') \n        AND NOT (LOWER(ORG_NAME) LIKE 'unknown' OR LOWER(ORG_NAME) LIKE 'no address%'\n        OR ORG_NAME ='-' OR ORG_NAME=' ')); \n</code></pre>\n"},{"tags":["oracle","triggers"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":323,"score":0,"question_id":9574946,"title":"Oracle 'statement level' Trigger","body":"<p>I want to create a Statement level Trigger which means I want to insert only one record into table EMP_AUDIT when 1 or more rows are inserted into table EMP. For example: if I have 10 records inserted into EMP, then only 1 record should be inserted into EMP_AUDIT table.</p>\n\n<p>There are no constraints on columns. (i.e. can be NULL)</p>\n\n<p>I tried to use the following trigger but it gives me the Error(2,2): PL/SQL: SQL Statement ignored\nError(2,14): PL/SQL: ORA-00947: not enough values</p>\n\n<pre>\n   CREATE OR REPLACE\n    TRIGGER TRIG_EMP AFTER INSERT ON EMP\n   BEGIN\n    INSERT INTO EMP_AUDIT\n    VALUES (TRANID,EMPNUM,SYSDATE); \n   END;\n</pre>\n\n<pre>\n   CREATE TABLE EMP\n   (TRANID NUMBER,\n    EMPNUM VARCHAR2(100),\n    EMPLOC VARCHAR2(100)); \n</pre>\n\n<pre>\n   CREATE TABLE EMP_AUDIT\n   (EVENTID NUMBER,\n    EMPNUM VARCHAR2(100),\n    ENTRDATE DATE); \n</pre>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":12944095,"title":"UTL_FILE output file is missing","body":"<p>Try to output some results into windows folder \"c:\\temp\". Compile and run my procedure without any issue, but I cannot find my output file \"c:\\temp\\foo.log\". Here is my code:</p>\n\n<pre><code>    CREATE OR REPLACE  DIRECTORY tmp AS 'c:\\temp\\';\n\n\n    CREATE OR REPLACE PROCEDURE write_log\n    AS\n       CURSOR cur\n       IS\n          SELECT firstname,\n                 lastname\n          FROM   MEMBER\n          WHERE  memberid BETWEEN 2 AND 5; -- only test 3 rows.\n\n       fname MEMBER.firstname%TYPE;\n       lname MEMBER.lastname%TYPE;\n       outputrecord VARCHAR2 ( 255 );\n       outputfile UTL_FILE.file_type;\n    BEGIN\n       OPEN cur;\n\n       FETCH cur\n       INTO  fname,\n             lname;\n\n       outputfile := UTL_FILE.fopen ( UPPER ( 'tmp' ),\n                                      'foo.log',\n                                      'W',\n                                      32767\n                                    );\n\n       WHILE cur%FOUND\n       LOOP\n          outputrecord := fname || ',' || lname;\n          UTL_FILE.put ( outputfile, outputrecord );\n          UTL_FILE.new_line ( outputfile );\n\n          FETCH cur\n          INTO  fname,\n                lname;\n       END LOOP;\n\n       CLOSE cur;\n\n       UTL_FILE.fclose ( outputfile );\n    END write_log;\n    /\n\n    BEGIN\n       write_log;\n    END;\n    /\n</code></pre>\n\n<p>Did I do something wrong here?</p>\n\n<p>Thanks!</p>\n"},{"tags":["sql","oracle","greatest-n-per-group"],"answer_count":24,"favorite_count":100,"up_vote_count":154,"down_vote_count":0,"view_count":196764,"score":154,"question_id":121387,"title":"Fetch the row which has the Max value for a column","body":"<p>Table: UserId, Value, Date.</p>\n\n<p>I want to get the UserId, Value for the max(Date) for each UserId. That is, the Value for each UserId that has the latest date. Is there a way to do this simply in SQL? (Preferably Oracle)</p>\n\n<p><strong>Update:</strong> Apologies for any ambiguity: I need to get ALL the UserIds. But for each UserId, only that row where that user has the latest date.</p>\n"},{"tags":["c#","wcf","oracle","templates","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12944204,"title":"What is the best template for a WCF Oracle app?","body":"<p>I need to create a proof-of-concept app for querying our Oracle database via http/a browser (specifically, IE8 and IE9).</p>\n\n<p>What is the best starting point for this - the \"WCF REST Service Application\" template?</p>\n"},{"tags":["sql","arrays","oracle","dynamic","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":116,"score":0,"question_id":12940351,"title":"PLSQL : How to save a dynamic SQL query result into a two dimension array?","body":"<pre><code>CREATE TYPE VarArray AS VARRAY(50) OF VARCHAR2(50);\n\nCREATE TYPE VarAArray AS VARRAY(50) OF VarArray;\n\nDeclare\n   myTable VarAArray VarAArray();\n   tableName Varchar2(50);\nBegin\n  -- I want to save the data in the table of 'tableName' \n  -- into the myTable array, all the field values are \n  -- saved as varchar2 type\nEnd;\n</code></pre>\n\n<p>The key requirement of doing this is to get any of the filed value by row number and column id. Please feel free to offer better design options.</p>\n"},{"tags":["sql","oracle","date","plsql","datediff"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":138,"score":1,"question_id":12932965,"title":"SQL to return the number of working days between 2 passed in dates","body":"<p>I need to write an sql query that returns the number of Working days (Monday - Friday) between two given dates.</p>\n\n<p>I was wondering what would be the most efficient way to do this?</p>\n\n<pre><code>SELECT           --Start with total number of days including weekends             \n(DATEDIFF(dd,@StartDate,@EndDate)+1) --Subtact 2 days for each full weekend \n(DATEDIFF(wk,@StartDate,@EndDate)*2) --If StartDate is a Sunday, Subtract 1          \nELSE 0               END)            --If EndDate is a Saturday, Subtract 1 \nFROM dual\n</code></pre>\n\n<p>Then it would also be helpful to be able to remove holidays from this count such as christmas day and boxing day.</p>\n\n<p>Any Ideas?</p>\n"},{"tags":["sql","oracle","oracle11gr1"],"answer_count":2,"favorite_count":3,"up_vote_count":2,"down_vote_count":1,"view_count":59,"score":1,"question_id":12939400,"title":"Parallelize oracle union query questions","body":"<p>I have an Oralce query like this:</p>\n\n<pre><code>Sub_query1\nUnion\nSub_query2;\n</code></pre>\n\n<p>I want to parallelize the query. I searched on web and found some say UNION cannot be parallelized because the sub queries are running in serial and UNION will not run until two sub queries completed. And they are people say UNION can be parallelized.\nMy question is:  </p>\n\n<blockquote>\n<pre><code>         (1) can a UNION query be parallezied? if yes, how? if no, why?\n         (2) can I just parallelize the two sub queries?\n</code></pre>\n</blockquote>\n\n<p>I am using Oracle Database 11g Enterprise Edition Release 11.1.0.7.0 - 64bit Production</p>\n\n<p>Thank you!</p>\n"},{"tags":["oracle","odp.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12924572,"title":"No acceptable query for database change notifications","body":"<p>I'm using database change notifications (DCN) in an application I'm writing with ODP.NET. One instance of Oracle 11g 11.2.0.2.0 accepts DCN registrations, and another rejects them for the same query. To my knowledge, the schema of both databases is exactly the same. Both users have change notification privileges. What could be causing one database to reject registration requests that the other accepts? </p>\n\n<p>The query is similar to <code>select * from my_table;</code> and the error message is <code>ORA-29983: Unsupported query for Continuous Query Notification</code>.</p>\n\n<p>Thanks!</p>\n"},{"tags":["sql","database","oracle","query","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":166,"score":1,"question_id":12921792,"title":"Oracle database search all tables for string, return row data","body":"<p>I need to search all tables in an oracle database for a specific string and return all the records where that string is found. I am working with SQL Developer. There are several really useful scripts and stored procedures that have been posted online that provide a way to search the entire database and they all seem to be able to return the table name and the column name where the string is found. I actually want to see the rows like a select * statement but I would like it to be for all the tables in my database. I want to note that I am very much a beginner and I'm not familiar with advanced PL/SQL scripting and database concepts so though I've tried and tried I can't seem to figure it out so any input would be appreciated.</p>\n\n<p>Here is a script that I was trying to modify (someone else's solution)</p>\n\n<pre><code>declare\n l_count number := 0;\n l_str varchar2(20) := '%test%';\nbegin\n for rec in (select table_name, column_name\n             from user_tab_columns\n             where data_type in ( 'VARCHAR2' , 'VARCHAR', 'CHAR' ) ) loop\n  execute immediate 'select count(*) from '||rec.table_name||\n                ' where '||rec.column_name||' like '''||l_str||'''' into l_count;\n  if l_count &gt; 0 then\n   dbms_output.put_line('Table : '||rec.table_name||'  '||rec.column_name);\n  end if;\n end loop;\nend;\n/\n</code></pre>\n"},{"tags":["oracle","oracle-apex"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12941845,"title":"How to secure a single page in Oracle Apex","body":"<p>I have no authentication required for my application, but want to secure a few pages.</p>\n\n<p>On the page I wish to secure I have specified that user should not be a public user.</p>\n\n<p>When I click a link to the page I do get a login box, but I seem to be able to enter any old rubbish and still proceed to the page.</p>\n\n<p>How do I secure an individual page without a general authentication scheme at application level, so an Apex user account is needed.</p>\n"},{"tags":["sql","oracle","like","ora-00932"],"answer_count":3,"favorite_count":3,"up_vote_count":2,"down_vote_count":0,"view_count":12350,"score":2,"question_id":769787,"title":"What is the best way to search the Long datatype within an Oracle database?","body":"<p>I am working with an Oracle database that stores HTML as a Long datatype.  I would like to query the database to search for a specific string within the HTML data stored in the Long.  </p>\n\n<p>I tried, \"select * from TABLE where COLUMN like '%form%'\".  This causes the following Oracle error because \"like\" is not supported for Long datatypes.</p>\n\n<p>ORA-00932: inconsistent datatypes: expected NUMBER got LONG</p>\n"},{"tags":["java","html5","oracle","javabeans","case-tools"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12939191,"title":"case tool avaliable for","body":"<p>Sorry, I know this question does not belong here but I couldn't found the right forum.</p>\n\n<p>My question is there is a any case tool available that support html5 for front end, java for business logic and oracle for database</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","oracle","caching"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12941236,"title":"How to cache large data around 20kb of string","body":"<p>Store different combinations of request attributes as key and value as response output which is around 20kb in size into cache.</p>\n\n<p>The response may be same for different combination of request attributes.</p>\n\n<p>whats the best algorithm to cache the combination and response with less usage of memory and time. </p>\n"},{"tags":["sql","oracle","dblink"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":8080,"score":4,"question_id":38074,"title":"Best way to handle LOBs in Oracle dblink'ed tables","body":"<p>If you create an Oracle dblink you cannot directly access LOB columns in the target tables.</p>\n\n<p>For instance, you create a dblink with:</p>\n\n<pre><code>create database link TEST_LINK connect to TARGETUSER IDENTIFIED BY password using 'DATABASESID';\n</code></pre>\n\n<p>After this you can do stuff like:</p>\n\n<pre><code>select column_a, column_b from data_user.sample_table@TEST_LINK\n</code></pre>\n\n<p>Except if the column is a LOB, then you get the error:</p>\n\n<pre><code>ORA-22992: cannot use LOB locators selected from remote tables\n</code></pre>\n\n<p>This is documented here:</p>\n\n<p><a href=\"http://docs.oracle.com/cd/B10501_01/appdev.920/a96591/adl04mng.htm#98328\" rel=\"nofollow\">http://docs.oracle.com/cd/B10501_01/appdev.920/a96591/adl04mng.htm#98328</a></p>\n\n<p>The same page suggests you fetch the values into a local table, but that is... kind of messy:</p>\n\n<pre><code>CREATE TABLE tmp_hello AS SELECT column_a from data_user.sample_table@TEST_LINK\n</code></pre>\n\n<p>Any ideas?\nThanks</p>\n"},{"tags":["oracle","self-join","connect-by"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":164,"score":2,"question_id":12886371,"title":"Oracle Self-Join on multiple possible column matches - CONNECT BY?","body":"<p>I have a query requirement from ----.  Trying to solve it with <code>CONNECT BY</code>, but can't seem to get the results I need.</p>\n\n<p><br/>\n<strong>Table (simplified):</strong></p>\n\n\n\n<pre><code>create table CSS.USER_DESC (\n    USER_ID          VARCHAR2(30) not null,\n    NEW_USER_ID      VARCHAR2(30),\n    GLOBAL_HR_ID     CHAR(8)\n)\n\n-- USER_ID       is the primary key\n-- NEW_USER_ID   is a self-referencing key\n-- GLOBAL_HR_ID  is an ID field from another system\n</code></pre>\n\n<p>There are two sources of user data (datafeeds)... I have to watch for mistakes in either of them when updating information.</p>\n\n<p><br/>\nScenarios:</p>\n\n<ol>\n<li>A user is given a new User ID... The old record is set accordingly and deactivated (typically a rename for contractors who become fulltime)</li>\n<li>A user leaves and returns sometime later.  HR fails to send us the old user ID so we can connect the accounts.</li>\n<li>The system screwed up and didn't set the new User ID on the old record.</li>\n<li>The data can be bad in a hundred other ways</li>\n</ol>\n\n<p><br/>\nI need to know the following are the same user, and I can't rely on name or other fields... they differ among matching records:</p>\n\n<pre><code>ROOTUSER    NUMROOTS   NODELEVEL  ISLEAF    USER_ID    NEW_USER_ID  GLOBAL_HR_ID   USERTYPE      LAST_NAME         FIRST_NAME  \n-----------------------------------------------------------------------------------------------------------------------------\nEX0T1100    2          1          0         EX0T1100   EX000005                    CONTRACTOR    VON DER HAAVEN    VERONICA    \nEX0T1100    2          2          1         EX000005                00126121       EMPLOYEE      HAAVEN, VON DER   VERONICA    \nGL110456    1          1          1         GL110456                00126121       EMPLOYEE      VONDERHAAVEN      VERONICA    \n</code></pre>\n\n<p><br/>\n<code>EXOT1100</code> and <code>EX000005</code> are connected properly by the <code>NEW_USER_ID</code> field.  The rename occurred before there were global HR IDs, so <code>EX0T1100</code> doesn't have one.  <code>EX000005</code> was given a new user ID, 'GL110456', and the two are only connected by having the same global HR ID.</p>\n\n<p>Cleaning up the data isn't an option.  </p>\n\n<p><br/>\nThe query so far:</p>\n\n\n\n<pre><code>select connect_by_root cud.user_id RootUser, \n       count(connect_by_root cud.user_id) over (partition by connect_by_root cud.user_id) NumRoots, \n       level NodeLevel, connect_by_isleaf IsLeaf, --connect_by_iscycle IsCycle,\n       cud.user_id, cud.new_user_id, cud.global_hr_id,\n       cud.user_type_code UserType, ccud.last_name, cud.first_name\nfrom   css.user_desc cud\nwhere  cud.user_id in ('EX000005','EX0T1100','GL110456')\n-- Using this so I don't get sub-users in my list of root users...\n-- It complicates the matches with GLOBAL_HR_ID, however\nstart with cud.user_id not in (select cudsub.new_user_id \n                               from   css.user_desc cudsub \n                               where  cudsub.new_user_id is not null)\nconnect by nocycle (prior new_user_id = user_id);\n</code></pre>\n\n<p><br/>\nI've tried various <code>CONNECT BY</code> clauses, but none of them are quite right:</p>\n\n<pre><code>-- As a multiple CONNECT BY\nconnect by nocycle (prior global_hr_id = global_hr_id)\nconnect by nocycle (prior new_user_id  = user_id)\n\n-- As a compound CONNECT BY\nconnect by nocycle ((prior new_user_id = user_id)\n                     or (prior global_hr_id = global_hr_id \n                         and user_id != prior user_Id))\n</code></pre>\n\n<p><br/>\nUNIONing two CONNECT BY queries doesn't work... I don't get the leveling.  </p>\n\n<p>Here is what I would like to see... I'm okay with a resultset that I have to distinct and use as a subquery.  I'm also okay with any of the three user IDs in the ROOTUSER column... I just need to know they're the same users.</p>\n\n<pre><code>ROOTUSER    NUMROOTS   NODELEVEL  ISLEAF    USER_ID    NEW_USER_ID  GLOBAL_HR_ID   USERTYPE      LAST_NAME         FIRST_NAME  \n-----------------------------------------------------------------------------------------------------------------------------\nEX0T1100    3          1          0         EX0T1100   EX000005                    CONTRACTOR    VON DER HAAVEN    VERONICA    \nEX0T1100    3          2          1         EX000005                00126121       EMPLOYEE      HAAVEN, VON DER   VERONICA    \nEX0T1100    3         (2 or 3)    1         GL110456                00126121       EMPLOYEE      VONDERHAAVEN      VERONICA    \n</code></pre>\n\n<p><br/>\nIdeas?</p>\n\n<p><br />\n<strong>Update</strong></p>\n\n<p>Nicholas, your code looks very much like the right track... at the moment, the <code>lead(user_id) over (partition by global_hr_id)</code> gets false hits when the <code>global_hr_id</code> is null.  For example:</p>\n\n<pre><code>USER_ID   NEW_USER_ID   CHAINNEWUSER   GLOBAL_HR_ID   LAST_NAME   FIRST_NAME\nFP004468                FP004469                      AARON       TIMOTHY\nFP004469                                              FOONG       KOK WAH\n</code></pre>\n\n<p>I've often wanted to treat nulls as separate records in a partition, but I've never found a way to make <code>ignore nulls</code> work.  This did what I wanted:</p>\n\n<pre><code>decode(global_hr_id,null,null,lead(cud.user_id ignore nulls) over (partition by global_hr_id order by user_id)\n</code></pre>\n\n<p>... but there's got to be a better way.  I haven't been able to get the query to finish yet on the full-blown user data (about 40,000 users).  Both <code>global_hr_id</code> and <code>new_user_id</code> are indexed.</p>\n\n<p><br />\n<strong>Update</strong></p>\n\n<p>The query returns after about 750 seconds... long, but manageable.  It returns 93k records, because I don't have a good way of filtering level 2 hits out of the root - you have <code>start with global_hr_id is null</code>, but unfortunately, that isn't always the case.  I'll have to think some more about how to filter those out.  </p>\n\n<p>I've tried adding more complex start with clauses before, but I find that separately, they run &lt; 1 second... together, they take 90 minutes >.&lt;  </p>\n\n<p>Thanks again for you help... plodding away at this.</p>\n"},{"tags":["c#","xml","oracle","nhibernate","xmltype"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":34,"score":-1,"question_id":12939571,"title":"Oracle 11g XML support","body":"<p>some time ago I startet a Thread on <a href=\"http://stackoverflow.com/questions/12533177/nhibernate-oracle-11g-configuration-for-xmltype\">Stackoverflow</a> about how to make Oracle working with the xmltype format. The solution provided their works fine but I have a general question regarding the problem.</p>\n\n<p>Why do I need a custom driver for this? Why doesnt Oracle provide the drivers for using their functionality? Is this an Nhibernate only problem or a problem that occurs independant from NH?</p>\n\n<p>Thanks for answering.</p>\n\n<p>Daffi</p>\n"},{"tags":["sql","oracle","table","join"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":12938973,"title":"Four Table Join in Oracle 8i","body":"<p>I'd like to join four tables in Oracle 8i. The four table names are users, picks, putaways, and relocates. Each of the four tables has a user_id field. Picks, putaways, and relocates look like this:</p>\n\n<pre><code>| USER_ID | PICKS | PICK_VOLUME |\n+---------+-------+-------------+\n\n| SMITH12 | 234   | 2431.12     |\n</code></pre>\n\n<p>The putaways and relocates tables look identical except 'PICKS' and 'PICK_VOLUME' are replaced with putaways and relocates, respectively.</p>\n\n<p>The table that I would like to do a left join on is the users table since it will contain all of the user_ids, regardless if they only picked inventory and didn't relocate, or put any of it away. In other words, I would like to see all the records even if some users only have relocates, instead of having picks, putaways, and relocates, or any combination thereof.</p>\n\n<p>The user table looks like this:</p>\n\n<pre><code>| USER_ID | SHIFT | GROUP_ID   |\n+---------+-------+------------+\n\n| SMITH12 | NIGHT | STOCK_KEEP |\n</code></pre>\n\n<p>So ideally, I would like to have those three columns at the left of my result set, with the picks, putaways, and relocates table joined to the right. The final select results should look like this:</p>\n\n<pre><code>| USER_ID | SHIFT | GROUP_ID   | PICKS | PICK_VOL | RELOCATES | RELOCATE_VOL | PUTAWAYS | PUTAWAY_VOL |\n+---------+-------+------------+-------+----------+-----------+--------------+----------+-------------+\n\n| SMITH12 | NIGHT | STOCK_KEEP | 234   | 2431.12  | NULL      |  NULL        |  4       |   76.52     |\n</code></pre>\n\n<p>I've tried this SQL query:</p>\n\n<pre><code>select users.user_id, users.group_id, users.shift, pi.\"Picks\", pi.\"Pick Volume\", pu.\"Putaways\", pu.\"Putaway Volume\", re.\"Relocates\", re.\"Relocate Volume\"\nfrom users, pi, pu, re\nwhere users.user_id = pi.user_id\nand users.user_id = pu.user_id\nand users.user_id = re.user_id;\n</code></pre>\n\n<p>but it only returns rows where a user has at least one transaction in the picks, relocates, and putaways tables. This is expected since I'm doing a vanilla join. I'm asssuming I need some kind of left join, but I'm not sure how to write it in Oracle 8i. </p>\n\n<p>Thanks for any help.</p>\n"},{"tags":["mysql","sql","oracle","sql-injection"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12938703,"title":"SQL Injection and multiline comments","body":"<p>I was testing a clients' queries and came across an interesting question. Could a bad intentioned hacker SQL inject the following query:</p>\n\n<pre><code>SELECT * FROM mytable WHERE 1\nAND cfield='0'\nAND (\nfield1 like '%$searchterm%' OR\nfield2 like '%$searchterm%' OR\n)\n</code></pre>\n\n<p>For example, to my mind, there's no way he can comment out what's after the first $searchterm, and just insert other queries:</p>\n\n<pre><code>field1 like '%$searchterm%'\n</code></pre>\n\n<p>Still, I may be wrong. Looking forward to your opinions. Thank you in advance!</p>\n"},{"tags":["oracle","triggers","versioning","workspace"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":12932263,"title":"Get Triggers from Version Enabled Table in Oracle","body":"<p>I am new to Oracle Workspace Manager. I have a trigger that fills my IDs every time i insert a record. I created the trigger before I enable the versioning of my table. \nAfter versioning was enabled in my table, I can no longer find my trigger but have these triggers instead:</p>\n\n<pre><code>OVM_DELETE_7\nOVM_INSERT_7\nOVM_UPDATE_7\n</code></pre>\n\n<p>What I wanted to do is Query the triggers that I created on my tables. Is there a way to do that without disabling the versioning on my table? I have too many versioned-enabled tables and that would be a hassle disabling the version in every table just for that query.</p>\n"},{"tags":["sql","oracle","list","date","oracle10g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12912279,"title":"Identifying start and end of period covered - oracle 10g sql","body":"<p>I have data that looks like this:</p>\n\n<pre><code>        ID      FROM        TO          START_CODE      END_CODE    TYPE\n        A       01/01/2012  02/02/2012  P               E           1\n        A       12/03/2011  01/01/2012  P               X           1\n        A       01/01/2011  12/03/2011  S               X           2\n\n        A       01/01/2010  02/02/2010  P               E           2\n        A       12/03/2010  01/01/2010  P               X           4\n        A       01/01/2009  12/03/2009  S               X           1\n</code></pre>\n\n<p>Basically, this is information for one client.  The end_code 'e' denotes the end of a period of care, the start_code 's' denotes a start of a period of care.  A start code of 'p' denotes the dates are a continuation, as does an end code of 'x'.  What I would like to be able to return is data that looks like the following:</p>\n\n<pre><code>        ID      START       END             Types\n        A       01/01/2011  02/02/2012      2,1,1\n        A       01/01/2009  02/02/2010      1,4,2\n</code></pre>\n\n<p>The query for the first table looks similar to this (example only), however, I would be interested in returning for a number of clients, and not just 'A'.</p>\n\n<pre><code>        SELECT\n        A.ID,\n        A.FROM,\n        A.TO,\n        A.START_CODE,\n        A.END_CODE,\n                       A.Type\n\n        WHERE\n        A.ID = 'A'\n</code></pre>\n\n<p>I've used xmlagg in the past to achieve similar things (i.e. to list information in one cell), but it's actually identifying seperate start and end dates for each client, and then returning the sequence of types that I'm struggling with.  For reference, my oracle version is 10g, 10.2.0.5.0.</p>\n\n<p>Thanks for your time, any pointers or assistance is appreciated.</p>\n\n<p>Edited to include suggestion by A.B.Cade below:</p>\n\n<pre><code>        SELECT\n        t3.MOV_PER_GRO_ID,\n        t3.f,\n        t3.MOV_END_DATE,\n        t3.types,\n        LENGTH(REGEXP_REPLACE(t3.types,'[^,]')) as \"Count\"\n        FROM(\n\n        SELECT \n        sys_connect_by_path(t2.MOV_2000_PLACEMENT_TYPE,',') types,\n        connect_by_root(t2.MOV_START_DATE) f, \n        t2.MOV_START_DATE,        \n        t2.MOV_END_DATE,        \n        connect_by_isleaf is_leaf, \n        t2.MOV_PER_GRO_ID \n        FROM (SELECT t.*,\n        lag(t.MOV_START_DATE) over (ORDER BY t.MOV_PER_GRO_ID, t.MOV_START_DATE) nfrom\n        FROM O_MOVEMENTS t\n        WHERE t.MOV_PER_GRO_ID IN ('A','B'))t2 \n        START \n        WITH \n        t2.MOV_2000_START_REASON = 'S'\n        CONNECT BY   \n        PRIOR t2.MOV_START_DATE = t2.nfrom\n        AND PRIOR t2.MOV_PER_GRO_ID =  t2.MOV_PER_GRO_ID \n        AND t2.MOV_2000_START_REASON IN ('P'))t3\n        where t3.is_leaf=1\n</code></pre>\n\n<p>Updated based on ABCade's solution.  After a few tweaks (again thanks to ABCade) it appears to be working.</p>\n"},{"tags":["java","oracle","netbeans","alm"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12938322,"title":"Best ALM tool for this scenario?","body":"<p>Can you guys please suggest a tool that cater the following requirements:</p>\n\n<ul>\n<li>Front-End => HTML 5, Any IDE</li>\n<li>Business Logic => JAVA, NetBeans</li>\n<li>Backend => ORACLE, TOAD </li>\n</ul>\n\n<p>My guess is that the real constraint is actually the NetBeans, ain't it? What you guys think? </p>\n\n<p>Thanks</p>\n"},{"tags":["oracle","query"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":83,"score":4,"question_id":12922889,"title":"Substring inside string","body":"<p>Suppose this is my table:</p>\n\n<pre><code>ID  STRING\n1   'ABC'\n2   'DAE'\n3   'BYYYYYY'\n4   'H'\n</code></pre>\n\n<p>I want to select all rows that have at least one of the characters in the STRING column somewhere in another row's STRING variable.</p>\n\n<p>For example, <code>1</code> and <code>2</code> have an <code>A</code> in common and <code>1</code> ad <code>3</code> have a <code>B</code> in common, but <code>4</code> does not have any characters in common with any of the other rows. So my query should return only the first three lines.</p>\n\n<p>I don't need to know with which line it matched.</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","oracle","spring","stored-procedures"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12937843,"title":"Issue while calling Oracle Sproc in Java (Using Spring 3.0)","body":"<p>In Java development using Spring 3.0,\nI am having problem while executing the Sproc written for Oracle.</p>\n\n<h2>Here is the Sproc code:</h2>\n\n<pre><code>create or replace PROCEDURE            \nADD_PRODUCT\n( product_id IN VARCHAR2\n, description IN VARCHAR2\n, weight IN FLOAT\n, specification IN VARCHAR2\n, category IN VARCHAR2\n, manufacturer IN VARCHAR2\n, syncount IN NUMBER\n, nonAccentedURL IN VARCHAR2\n, nonAccentedManufacturer IN VARCHAR2\n) AS\n    recCount number;\nBEGIN\n      recCount := 0;\n\n      SELECT    COUNT(*) \n      INTO  recCount\n      FROM  ERP_MANUFACTURER\n      WHERE NAME = manufacturer;  \n\n\n\n  IF recCount &lt; 1 THEN\n    INSERT INTO ERP_MANUFACTURER (NAME, URL) VALUES (manufacturer,     nonAccentedManufacturer);\n  END IF;\n\n  INSERT INTO ERP_PRODUCT (ID, DESCRIPTION, WEIGHT, SPECIFICATION, CATEGORY, MANUFACTURER, SYNCCOUNT, URL) \n  VALUES     (product_id,description,weight,specification,category,manufacturer,syncount,nonAccentedURL);        \n</code></pre>\n\n<h2>END ADD_PRODUCT;</h2>\n\n<h2>Here is the Code (in DAO):</h2>\n\n<pre><code>public int ADD_Product(String codigo_produto, String descricao, float peso, String espeficiacao, String categoria, String fabricante, int sysCount, int SENT_STATUS) throws Exception {\n\n    SimpleJdbcCall caller = new SimpleJdbcCall(this.jdbcTemplate).withFunctionName(\"ADD_PRODUCT\");\n\n    MapSqlParameterSource paramMap = new MapSqlParameterSource();\n\n    paramMap.addValue(\"product_id\", codigo_produto, Types.VARCHAR);\n    paramMap.addValue(\"description\", descricao, Types.VARCHAR);\n    paramMap.addValue(\"weight\", peso, Types.FLOAT);\n    paramMap.addValue(\"specification\",espeficiacao, Types.VARCHAR);\n    paramMap.addValue(\"category\", categoria, Types.VARCHAR);\n    paramMap.addValue(\"manufacturer\", fabricante, Types.VARCHAR);\n    paramMap.addValue(\"syncount\", sysCount, Types.NUMERIC);\n    paramMap.addValue(\"nonAccentedURL\", URLEncoder.encode(deAccent(espeficiacao).toLowerCase(), \"UTF-8\"), Types.VARCHAR);\n    paramMap.addValue(\"nonAccentedManufacturer\", URLEncoder.encode(deAccent(fabricante).toLowerCase(), \"UTF-8\"), Types.VARCHAR);\n\n    Map&lt;String, Object&gt; i = caller.execute(paramMap);\n\n    return i.size();\n}\n</code></pre>\n\n<hr>\n\n<p>When this Method is Executed,\nFollowing is the Log of Error:</p>\n\n<hr>\n\n<pre><code>org.springframework.jdbc.BadSqlGrammarException: CallableStatementCallback; bad SQL grammar [{? = call ADD_LOG(?, ?, ?, ?)}]; nested exception is java.sql.SQLException: ORA-06550: line 1, column 13:\n</code></pre>\n\n<p>PLS-00306: wrong number or types of arguments in call to 'ADD_LOG'\nORA-06550: line 1, column 7:\nPL/SQL: Statement ignored</p>\n\n<pre><code>at org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate(SQLStateSQLExceptionTranslator.java:98)\nat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)\nat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)\nat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)\nat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:969)\nat org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:1003)\nat org.springframework.jdbc.core.simple.AbstractJdbcCall.executeCallInternal(AbstractJdbcCall.java:391)\nat org.springframework.jdbc.core.simple.AbstractJdbcCall.doExecute(AbstractJdbcCall.java:354)\nat org.springframework.jdbc.core.simple.SimpleJdbcCall.execute(SimpleJdbcCall.java:181)\nat br.edeploy.voive.dao.ProductDAO.ADD_Log(ProductDAO.java:139)\nat br.edeploy.voice.service.ProdutosIn.doGet(ProdutosIn.java:277)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:621)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\nat br.com.caelum.vraptor.resource.DefaultResourceNotFoundHandler.couldntFind(DefaultResourceNotFoundHandler.java:41)\nat br.com.caelum.vraptor.interceptor.ResourceLookupInterceptor.intercept(ResourceLookupInterceptor.java:71)\nat br.com.caelum.vraptor.core.ToInstantiateInterceptorHandler.execute(ToInstantiateInterceptorHandler.java:54)\nat br.com.caelum.vraptor.core.DefaultInterceptorStack.next(DefaultInterceptorStack.java:54)\nat br.com.caelum.vraptor.core.EnhancedRequestExecution.execute(EnhancedRequestExecution.java:23)\nat br.com.caelum.vraptor.VRaptor$1.insideRequest(VRaptor.java:92)\nat br.com.caelum.vraptor.ioc.spring.SpringProvider.provideForRequest(SpringProvider.java:56)\nat br.com.caelum.vraptor.VRaptor.doFilter(VRaptor.java:89)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\nat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\nat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)\nat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)\nat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\nat java.lang.Thread.run(Unknown Source)\n</code></pre>\n\n<p>Caused by: java.sql.SQLException: ORA-06550: line 1, column 13:\nPLS-00306: wrong number or types of arguments in call to 'ADD_LOG'\nORA-06550: line 1, column 7:\nPL/SQL: Statement ignored</p>\n\n<pre><code>at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:70)\nat oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:112)\nat oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:173)\nat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:455)\nat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:413)\nat oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:1030)\nat oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:191)\nat oracle.jdbc.driver.T4CCallableStatement.executeForRows(T4CCallableStatement.java:944)\nat oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1222)\nat oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3381)\nat oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3482)\nat oracle.jdbc.driver.OracleCallableStatement.execute(OracleCallableStatement.java:3856)\nat oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1373)\nat org.springframework.jdbc.core.JdbcTemplate$5.doInCallableStatement(JdbcTemplate.java:1005)\nat org.springframework.jdbc.core.JdbcTemplate$5.doInCallableStatement(JdbcTemplate.java:1)\nat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:953)\n... 34 more\n</code></pre>\n\n<hr>\n\n<p>Can anyone help me in debugging this.</p>\n\n<p>Thanks.</p>\n"},{"tags":["string","oracle","character-encoding","internationalization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12936570,"title":"Converting special character to plain text in oracle","body":"<p>we are having a database with utf8 as charset. now in one table we are having a value like \n'HERBES-Herbe à poux' . now we have to convert it into 'HERBES-Herbe a poux' . i.e à-->a.\nWe cannot have a replace function since the values are dynamic. </p>\n\n<p>Please help us. </p>\n"},{"tags":["oracle","toad"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":12932452,"title":"Toad Formatting: is it possibile to eliminate this statement? /* Formatted on 17/10/2012 12:33:19 (QP5 v5.185.11230.41888) */","body":"<p>I don't want Toad to write this statement at the beginning of files and queries:</p>\n\n<p>/* Formatted on 17/10/2012 12:33:19 (QP5 v5.185.11230.41888) */</p>\n\n<p>Is it possible?</p>\n"},{"tags":["oracle","spring","jpa","spring-roo","jooq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12599110,"title":"Spring roo and jOOQ","body":"<p>jOOQ should be an alternative to standard JPA. Is there any way to use it in Roo as JPA provider? Is it even possible?</p>\n\n<p>The reason for this: We have Oracle database and jOOQ has quick and easy set up for connection to that database. On the other hand, Roo is very usefull tool but lacks on setting up Oracle database connection.</p>\n"},{"tags":["c#",".net","oracle","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":360,"score":1,"question_id":7512562,"title":"Return entity key after savechanges doesn't work","body":"<p>I have this piece of code</p>\n\n<pre><code>            IMG_UPLOAD_FILES tObjUploadedFile = new IMG_UPLOAD_FILES();\n\n            tObjUploadedFile.UPLOAD_FILE_NAME = \"testname.png\";\n            tObjUploadedFile.SETTINGS_FOLDER_ID = 2;\n\n            dbHandler.IMG_UPLOAD_FILES.AddObject(tObjUploadedFile);\n            dbHandler.SaveChanges(SaveOptions.AcceptAllChangesAfterSave);\n\n            decimal tmpID= tObjUploadedFile.UPLOAD_FILE_ID;\n</code></pre>\n\n<p>the tmpID is still 0 and never return a key.</p>\n\n<p>I have set StoreGeneratedPattern to Identity on the required field.</p>\n\n<p>I'm using the latest ODB.NET from against the ORACLE database.</p>\n\n<p>\\T</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12934588,"title":"find letter in a column","body":"<p>how to query oracle to find me columns that contain numbers from 0-1000</p>\n\n<p>I have tried queries like:</p>\n\n<pre><code>select (Column_name)  \nfrom  (table_name) \nwhere regexp_like(CREDIT_BANK_BRANCH,'^[0-999]$');\n</code></pre>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":66,"score":-1,"question_id":12934680,"title":"plsql stored procedure PLS-00103 :encounterd the symbol \"SELECT\"","body":"<p>I tried to created a  stored procedure in Oracle 11G but i get this exception:</p>\n\n<pre><code>Error(7,18): PLS-00103: Encountered the symbol \"SELECT\" when expecting one of the following:     ( - + case mod new not null &lt;an identifier&gt;    &lt;a double-quoted delimited-identifier&gt; &lt;a bind variable&gt;    continue avg count current exists max min prior sql stddev    sum variance execute forall merge time timestamp interval    date &lt;a string literal with character set specification&gt;    &lt;a number&gt; &lt;a single-quoted SQL string&gt; pipe    &lt;an alternatively-quoted string literal with character set specification&gt;    &lt;an alternat\nError(9,65): PLS-00103: Encountered the symbol \")\" \n</code></pre>\n\n<p>this is my code:</p>\n\n<pre><code>create or replace\nprocedure PM_LOG_IN_SP(user_name_ in nvarchar2,  password_ in nvarchar2, res out int)\nis\nbegin\n    IF  user_name_ is not null and password_ is not null then\n\n         res := (SELECT count(*)\n          FROM HR.SYSTEM_USERS_TBL S\n          WHERE S.USER_NAME = user_name_ AND S.PSWD = password_;)\n    ELSE\n          RES :=0;\n    END IF;\nend PM_LOG_IN_SP;\n</code></pre>\n"},{"tags":["java","sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":12934331,"title":"Oracle parses text of \"'{S}Paris2\" as a string literal then finds {S} which it is treating as a SQL Escape Sequence which it doesn't recognize","body":"<p>I am getting the following error after running the jsp report.</p>\n\n<p>Query Tag:doAfterBody(),0,Non supported SQL92 token at position: 3477: S</p>\n\n<p>I know that the following snippet causing the problem ‘{S}’:</p>\n\n<p>……..   AND (L.Applicable_Location_Region_ID IN (N'PARIS2', N'{S}Paris2'))     </p>\n\n<p>As per my investigation, I came to know following:\nOracle parses the SQL and treats the text of \"'{S}Paris2\" as a string literal then finds {S} which it is treating as a SQL Escape Sequence which it doesn't recognize.</p>\n\n<p>The following link explains well about “Escape Characters”:\n<a href=\"http://docs.oracle.com/cd/F49540_01/DOC/inter.815/a67843/cqspcl.htm\" rel=\"nofollow\">http://docs.oracle.com/cd/F49540_01/DOC/inter.815/a67843/cqspcl.htm</a></p>\n\n<p>we must use {S} followed by name.</p>\n\n<p>The above AND statement works fine with SQL Server and MySQL, but causes problem with Oracle as “When you use braces to escape a single character, the escaped character becomes a separate token in the query.” </p>\n\n<p>Due to above reason the application treats {S}, as the escaped a single character with braces becomes a separate token in the query.</p>\n\n<p>So please could you help me how can I escape single character with braces in oracle or any suggestion please. </p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":12934984,"title":"Oracle - Why should I use packages instead if standalone procedures or functions","body":"<p>I searched google but did not find any satisfying answer as to why I should use packages. </p>\n\n<p>I know that a package is a bundle of procedures, functions and different variables. As I understand it sort of corresponds to object in OOP. But of course there's nothing like instantiating different instances of a package so that each instance would have different property values and behave differently. </p>\n\n<p>Then what is the advantage of using packages when I can just create a standalone procedure and call it independently?</p>\n"},{"tags":[".net","oracle","datagridview","dataset"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12933102,"title":"oracle vb.net dataset fill","body":"<p>What is wrong with this code? \nNo error, but no results. My DataGridView_sent does not get filled.</p>\n\n<pre><code>Dim objConn As New System.Data.OracleClient.OracleConnection\nDim objCmd As New System.Data.OracleClient.OracleCommand\nDim dtAdapter As New System.Data.OracleClient.OracleDataAdapter\n\nDim ds As New DataSet\nDim strConnString, strSQL As String\n\nstrConnString = \"Data Source=db;User Id=user;Password=pass;\"\nstrSQL = \"select * from table where sentdate between '\" &amp; date1 &amp; \"' and '\" &amp; date2 &amp; \"'\"\n\n objConn.ConnectionString = strConnString\n With objCmd\n     .Connection = objConn\n     .CommandText = strSQL\n     .CommandType = CommandType.Text\n  End With\n  dtAdapter.SelectCommand = objCmd\n\n  dtAdapter.Fill(ds)\n  DataGridView_sent.DataSource = ds\n\n  dtAdapter = Nothing\n  objConn.Close()\n  objConn = Nothing\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":12933160,"title":"Can't GROUP BY correctly (SQL)","body":"<p>I have an SQL query that currently displays all the people in table <code>HOTEL</code> that booked a hotel between $260 and $350. I'm using ORACLE</p>\n\n<pre><code>SELECT guest.guest_name \"GUEST NAME\", \n       Count(guest.guest_no), \n       guest.guest_no   \"GUEST           NUMBER\", \n       room.r_price     \"ROOM PRICE\" \nFROM   room, \n       guest, \n       booking \nWHERE  r_price &gt;= 260 \n       AND r_price &lt;= 350 \n       AND guest.guest_no = booking.guest_no \nGROUP  BY guest.guest_no, \n       guest.guest_name, \n       room.room_price \nORDER  BY guest.guest_name; \n</code></pre>\n\n<p>I thought that I could group by just GUEST.GUEST_NAME (so it puts all of the count under the one name rather than doubling up on the guest names).</p>\n\n<p>EDIT: The current results of the query look like this: </p>\n\n<pre><code>    GUEST NAME    COUNT   GUEST_NO R_PRICE\n    Jenny Freeman   2   G003    260\n    Jenny Freeman   2   G003    295\n    Jenny Freeman   2   G003    310\n    Martin Ferguson 3   G006    260\n    Martin Ferguson 3   G006    295\n    Martin Ferguson 3   G006    310\n    Paul Happy  3   G002    260\n    Paul Happy  3   G002    295\n    Paul Happy  3   G002    310\n    Steve Kirkwood  3   G005    260\n    Steve Kirkwood  3   G005    295\n    Steve Kirkwood  3   G005    310\n    Tina Duncan 2   G001    260\n    Tina Duncan 2   G001    295\n    Tina Duncan 2   G001    310\n    Vanessa Horton  1   G007    260\n    Vanessa Horton  1   G007    295\n    Vanessa Horton  1   G007    310\n</code></pre>\n\n<p>But I'm expecting something like this:</p>\n\n<pre><code>    GUEST NAME    COUNT   GUEST_NO R_PRICE\n    Jenny Freeman   6   G003    260\n    Martin Ferguson 9   G006    310\n    Paul Happy  9   G002    310\n    Steve Kirkwood  9   G005    260\n    Tina Duncan 6   G001    310\n    Vanessa Horton  3   G007    260\n</code></pre>\n"},{"tags":["oracle","gis","quantum"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12934220,"title":"How to add Oracle Spatial data to Quantum GIS","body":"<p>I cann't connect to Oracle from Quantum GIS. \nI am trying Layer --> Add vector layer --> Database New. \nThere are some Database connection types like ODBC, MSSQL, OGDI Vectors etc. but not Oracle.</p>\n"},{"tags":["oracle","stored-procedures","plsql","fluent-nhibernate"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12934019,"title":"Pl/sql stored procedure in fluent nhibernate","body":"<p>I'm using fluent nhibernate and I cannot use stored procedure and excute it.</p>\n\n<p>I tried:</p>\n\n<pre><code>Session.GetNamedQuery(\"Select_All_Question_Groups\");\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>const string sql = \"EXEC [dbo].[Stored_Procedure_Name] @PortalId=:PortalId\";\nreturn _session.CreateSQLQuery(sql).SetInt32(\"PortalId\", portalId)\n</code></pre>\n\n<hr>\n\n<pre><code>const string sql = \"call [dbo].[Stored_Procedure_Name] @PortalId=:PortalId\";\nreturn _session.CreateSQLQuery(sql).SetInt32(\"PortalId\", portalId)\n</code></pre>\n\n<hr>\n\n<pre><code>const string sql = \"EXEC [dbo].[Stored_Procedure_Name](PortalId=:PortalId)\";\nreturn _session.CreateSQLQuery(sql).SetInt32(\"PortalId\", portalId)\n</code></pre>\n\n<p>But none of those options works.\nwhen I use session.GetNamedQuery() I got error that the procedure does not exist.\nIn the other options there is no error, but the procedue does not change anything.</p>\n"},{"tags":["oracle","oracle11gr2","flashback"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":12933974,"title":"Flashback archive is inserting data even no data changed after update statement","body":"<p>I have enabled Flashback archive on a table. Oracle inserts data in Flash back even if no record is changed in the table after updating a record.</p>\n\n<p>For example </p>\n\n<pre><code>Update Dept set DEPTNO = '10' WHERE DEPTNO = '10';\n</code></pre>\n\n<p>When i use flashback query to extract all records it shows 1 record is added.</p>\n\n<pre><code>SELECT  versions_startscn, versions_starttime,\n       versions_endscn, versions_endtime,\n       versions_xid, versions_operation,\n       dept.*\n  FROM dept\n  VERSIONS BETWEEN  SCN MINVALUE AND MAXVALUE;\n</code></pre>\n\n<p>Is there any setting for FlashBack Archive that it store only changed records.?</p>\n"},{"tags":["oracle","connection","jboss7.x"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":346,"score":0,"question_id":8225921,"title":"Unwrap to OracleConnection","body":"<p>I have this piece of code that used to run properly using JBoss 5.1, Oracle 11, ojdbc6.jar. I was getting the OracleConnection as needed.</p>\n\n<pre><code>InitialContext ic = new InitialContext();\nDataSource  ds = ( DataSource ) ic.lookup( \"java:/\" + dataSource );\nConnection con = ds.getConnection();       \nOracleConnection conn = con.unwrap( OracleConnection.class );\n</code></pre>\n\n<p>Not anymore using JBoss 7, Oracle 11, ojdbc6.jar.\nIt says like this:</p>\n\n<blockquote>\n  <p>Connection\n  Not a wrapper class for Oracle Connection</p>\n</blockquote>\n\n<p>If you have any idea, please help.</p>\n"},{"tags":["sql","oracle","oracle10g","string-aggregation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12932950,"title":"Join multiple rows into a string","body":"<p>I have 2 tables in Oracle: table1 and table2 (we have a very unimaginative DBA!)</p>\n\n<p>table1 has column id (and a few others).</p>\n\n<p>table2 has columns id, table1id and code. table1id is a foreign key to table1.</p>\n\n<p>Usually there is 1 table2 row for each table1 row, but sometimes there are 2 table2 rows for a table1 row, and very occasionally 3.</p>\n\n<p>What I need is a single 'code' value for each table1 row. If there is more than one coresponding table2 row, I need a concatenated string of all values returned, so the result might look like this:</p>\n\n<pre><code>table1.id     code\n1             a\n2             b\n3             a b\n4             a b c\n</code></pre>\n\n<p>Any idea how this can be achieved?\nIf it were SQL Server I'd write a function, although this would be slower than I would like.\nHowever I'm not as hot in Oracle as I am in SQL Server.</p>\n"},{"tags":["performance","oracle","postgresql"],"answer_count":4,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":1786,"score":3,"question_id":3316812,"title":"How big is the performance difference between Oracle and PostgreSQL?","body":"<p>I'm wondering about how to scale a database. Currently it uses PostgreSQL. Would switching to Oracle be worthwhile inspite of the coding pain and expense? Or is PostgreSQL + more boxes a better/cheaper approach?</p>\n"},{"tags":["sql","oracle","sequence"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12932463,"title":"oracle sequence init","body":"<p>I wanted to export 3 tables from db1 into db2.</p>\n\n<p>Before the export starts, I will create the sequences for those 3 tables.</p>\n\n<pre><code>CREATE SEQUENCE TEST_SEQ START WITH 1 INCREMENT BY 1;\n</code></pre>\n\n<p>After the export, I will reinitialize sequnce values to match the max(id) + 1 from the table.</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE \"TEST_SEQUENCE\"\nAUTHID CURRENT_USER\nis\nv_num number;\nbegin\nselect max(ID)  into v_num from TABLE_1;\nEXECUTE IMMEDIATE 'ALTER SEQUENCE TEST_SEQ  INCREMENT BY ' || v_num;\nEXECUTE IMMEDIATE 'ALTER SEQUENCE 1TEST_SEQ  INCREMENT BY 1'; \nend;\n/\nshow errors;\nexecute TEST_SEQ;\n</code></pre>\n\n<p>This procedure compiles and executes without problems.</p>\n\n<p>But when I want to check t he last value of the sequence, like \nselect TEST_SEQ.nextval from dual;</p>\n\n<p>I still get the \"1\".</p>\n\n<p>Can someone tell me why my procedure did not impact my sequence?\nps. I am using oracle sql developper to pass sql. </p>\n\n<p>Thanks</p>\n"},{"tags":["php","oracle","iis","odbc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12932352,"title":"Connection to Oracle using PHP (odbc_connect) on IIS","body":"<p>I am trying to connect to an Oracle database using the odb_connect() function in PHP. PHP is installed on IIS.</p>\n\n<p>I am using the following command : </p>\n\n<pre><code> $dsn=\"Driver={Microsoft ODBC for Oracle};Server=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=******)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=***)));Uid=***;Pwd=***\";\n $connect = odbc_connect($dsn, '****', '***') ;\n</code></pre>\n\n<p>Unfortunately why the script is run I get the following error : </p>\n\n<blockquote>\n  <p>Warning: odbc_connect(): SQL error: [Microsoft][ODBC driver for Oracle][Oracle], SQL state NA000 in SQLConnect in ..</p>\n</blockquote>\n\n<p>Any ideas on why this is happening would be gratly appreciated. I have tried to look online for a solution but since i've never done this before I havn't managed to fix it.</p>\n\n<p>Thanks in advance !</p>\n"},{"tags":["php","mysql","oracle","select","insert"],"answer_count":2,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":588,"score":0,"question_id":3051673,"title":"PHP connecting Oracle and mySQL","body":"<p>I' trying to get some data from Oracle via ODBC to mySQL database.\nAnd then Insert some lines in mySQL database.\nI manage to list the lines from ORACLE but fail to Insert into mySQL.</p>\n\n<pre><code>$time_start = microtime(true);\n\nset_time_limit(10000);\n\n//ligação ODBC ORACLE\n\n$connect = odbc_connect(\"acatex32\", \"acatex\", \"acatex\");\n\n$query = \"select barcod, to_char(barfecgen, 'YYYY-MM-DD') as data, barnumuni, barcolnom, clicod from barcad where barcodreo = 1\";\n\n$result = odbc_exec($connect, $query);\n\n$numOF = 0;\n\n// Ligação mySQL\n\n$con = mysql_connect(\"localhost\",\"root\",\"intranet\");\n\nif (!$con)\n\n  {\n\n  die('Erro de ligação mySQL: ' . mysql_error());\n\n  }\n\n\nmysql_select_db(\"bd_etmaganha\", $con);\n\n\n?&gt;\n\n &lt; table border=\"0\" align=\"center\" cellpadding=\"8\" cellspacing=\"1\"&gt;\n\n    &lt; tr class=\"cabecalho_tabela\"&gt;\n\n      &lt; td bgcolor=\"#666666\"&gt;&lt;strong&gt;#&lt;/strong&gt;&lt;/td&gt;\n      &lt; td bgcolor=\"#666666\"&gt;&lt;strong&gt;Ordem de Servi&amp;ccedil;o&lt;/strong&gt;&lt;/td&gt;\n      &lt; td bgcolor=\"#666666\"&gt;&lt;strong&gt;Data entrada&lt;/strong&gt;&lt;/td&gt;\n      &lt; td bgcolor=\"#666666\"&gt;&lt;strong&gt;Kg entrada&lt;/strong&gt;&lt;/td&gt;\n      &lt; td bgcolor=\"#666666\"&gt;&lt;strong&gt;Artigo&lt;/strong&gt;&lt;/td&gt;\n      &lt; td bgcolor=\"#666666\"&gt;&lt;strong&gt;C&amp;oacute;digo do cliente&lt;/strong&gt;&lt;/td&gt;\n    &lt; /tr&gt;\n    &lt;?php\n while(odbc_fetch_row($result)){\n\n   $of1 = odbc_result($result, 1);//Ordem de servi&amp;ccedil;o\n\n  $of2 = odbc_result($result, 2);//Data de Entrada\n\n   $of3 = odbc_result($result, 3);//kg entrada\n\n   $of4 = odbc_result($result, 4);//Artigo\n\n   $of5 = odbc_result($result, 5);//Cliente\n\n   $numOF++;\n\n  $minhadata = substr(odbc_result($result, 2), 0, 4);\n\n  if ($minhadata == \"2010\") {\n\n   $corlinha = \"linha_tabela_alt\";\n\n   // insere registos\n\n   $mysql_query = (\"INSERT INTO bd_etmaganha.tb_reclamacoes (data_entrada, ordem_servico, cliente, kg_entrada, artigo) VALUES ($of2, $of1, $of5, $of3, $of4)\");\n\n  } else {\n\n   $corlinha = \"linha_tabela\";\n  }\n\n   ?&gt;\n\n    &lt; tr class=\"&lt;?php echo $corlinha; ?&gt;\"&gt;\n      &lt; td align=\"righ t\" bgcolor=\"#CCCCCC\"&gt;&lt;?php echo $numOF; ?&gt;&lt;/td&gt;\n      &lt; td bgcolor=\"#CCCCCC\"&gt;&lt;?php echo $of1; ?&gt;&lt;/td&gt;\n      &lt; td align=\"center\" bgcolor=\"#CCCCCC\"&gt;&lt;?php echo $of2; ?&gt;&lt;/td&gt;\n      &lt; td align=\"right\" bgcolor=\"#CCCCCC\"&gt;&lt;?php echo $of3; ?&gt;&lt;/td&gt;\n      &lt; td align=\"center\" bgcolor=\"#CCCCCC\"&gt;&lt;?php echo $of4; ?&gt;&lt;/td&gt;\n      &lt; td align=\"right\" bgcolor=\"#CCCCCC\"&gt;&lt;?php echo $of5; ?&gt;&lt;/td&gt;\n    &lt; /tr&gt;\n    &lt;?php\n}\n  ?&gt;\n  &lt; /table&gt;\n&lt;?php\nodbc_close($connect);\nmysql_close($con);\n$time_end = microtime(true);\n$time = $time_end - $time_start;\necho \"Tempo de Script: $time segundos\\n\";\n</code></pre>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":42,"score":0,"question_id":12913562,"title":"oracle creating ul and li from a table select statement","body":"<p>I want to write a query by which i can iterate through the rows of a table and then I want a HTML UN-ordered list from this query and keep in a local variable for further use.<br/>\nDo I will have to use cursor.<br/>Can any one suggest me from where I can start.<br/><br/>Thanks.</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12931083,"title":"c# Comparing strings from Oracle and SQL server","body":"<p>I think I have an encoding problem that needs to be fixed.\nIs there a way to compare strings across code pages?</p>\n\n<p>Oracle returns a string \"TEST - My String\" with the minus sign encoded as ascii 63.\nSQL Server quite correctly returns the string with the minus encoded as 45.</p>\n\n<p>Is there a way to compare these strings?\nDoes the framework contain a comparison that is capable of ignoring code page mismatches.</p>\n"},{"tags":["sql","oracle","sql-merge"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":730,"score":2,"question_id":10539627,"title":"When doing a MERGE in Oracle SQL, how can I update rows that aren't matched in the SOURCE?","body":"<p>I have a <code>main</code> database and a <code>report</code> database, and I need to sync a table from <code>main</code> into <code>report</code>.</p>\n\n<p>However, when an item gets deleted in the <code>main</code> database, I only want to set an <code>IsDeleted</code> flag in the <code>report</code> database.  </p>\n\n<p>What is an elegant way to do this?</p>\n\n<p>I'm currently using a MERGE statement, like this:</p>\n\n<pre><code>MERGE INTO report.TEST target\nUSING (SELECT * FROM main.TEST) source\n   ON (target.ID = source.ID)\nWHEN MATCHED THEN\n    UPDATE SET (target... = source...)\nWHEN NOT MATCHED THEN\n    INSERT (...) VALUES (source...)\n;\n</code></pre>\n\n<p>The <code>WHEN NOT MATCHED</code> statement gives me all NEW values from <code>main</code>, but I also want to update all OLD values from <code>report</code>.</p>\n\n<p>I'm using Oracle PL/SQL.</p>\n"},{"tags":["php","mysql","oracle","postgresql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":57,"score":-3,"question_id":12930346,"title":"way other than joins Subqueries and Complex Joins?","body":"<p>is there an any other efficient way than joins, Subqueries and  Complex Joins  to query database tables with 1 to 1 or 1 to many relation.if there are any other way what are they where we can learn about them?</p>\n"},{"tags":["java","oracle","hibernate","stored-procedures"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3662,"score":3,"question_id":4724344,"title":"How to call stored procedure by hibernate?","body":"<p>Hi I have an oracle stored procedure </p>\n\n<pre><code>GET_VENDOR_STATUS_COUNT(DOCUMENT_ID IN NUMBER , NOT_INVITED OUT NUMBER,INVITE_WITHDRAWN OUT NUMBER,...\n</code></pre>\n\n<p>rest all parameters are OUT parameters.</p>\n\n<p>In  hbm file I have written - </p>\n\n<pre><code>&lt;sql-query name=\"getVendorStatus\" callable=\"true\"&gt;\n     &lt;return-scalar column=\"NOT_INVITED\" type=\"string\"/&gt;\n     &lt;return-scalar column=\"INVITE_WITHDRAWN\" type=\"string\"/&gt;\n     &lt;return-scalar column=\"INVITED\" type=\"string\"/&gt;\n     &lt;return-scalar column=\"DISQUALIFIED\" type=\"string\"/&gt;\n     &lt;return-scalar column=\"RESPONSE_AWAITED\" type=\"string\"/&gt;\n     &lt;return-scalar column=\"RESPONSE_IN_PROGRESS\" type=\"string\"/&gt;\n     &lt;return-scalar column=\"RESPONSE_RECEIVED\" type=\"string\"/&gt;\n     { call GET_VENDOR_STATUS_COUNT(:DOCUMENT_ID , :NOT_INVITED ,:INVITE_WITHDRAWN ,:INVITED ,:DISQUALIFIED ,:RESPONSE_AWAITED ,:RESPONSE_IN_PROGRESS ,:RESPONSE_RECEIVED ) }\n    &lt;/sql-query&gt;\n</code></pre>\n\n<p>In java I have written -</p>\n\n<pre><code> session.getNamedQuery(\"getVendorStatus\").setParameter(\"DOCUMENT_ID\", \"DOCUMENT_ID\").setParameter(\"NOT_INVITED\", \"NOT_INVITED\") \n</code></pre>\n\n<p>... continue till all the parametes .</p>\n\n<p>I am getting the sql exception </p>\n\n<pre>\n    18:29:33,056 WARN  [JDBCExceptionReporter] SQL Error: 1006, SQLState: 72000\n    18:29:33,056 ERROR [JDBCExceptionReporter] ORA-01006: bind variable does not exist\n</pre>\n\n<p>Please let me know what is the exact process of calling a stored procedure from hibernate. I do not want to use JDBC callable statement. </p>\n"},{"tags":["oracle","oracle-apex"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":12915748,"title":"Oracle Apex - Dynamically check checkbox item that is not within a report","body":"<p>I have a checkbox item on my page (note: this is not inside a report) and I want to dynamically check the checkboxes when the page loads. I have a table which has all the checkbox types and a table which identifies which checkboxes that user has access to or in better terms should be checked. </p>\n\n<p>My question is, within an Apex checkbox item how do you tell it to dynamically check a checkbox. I have it working in a report and my query looks like this:</p>\n\n<pre><code>SELECT at.name AS TITLE,\n     CASE\n         WHEN at.name IN (SELECT atp.name FROM preferences p) THEN apex_item.checkbox(1,at.value,'CHECKED')\n         ELSE apex_item.checkbox(1,at.value, 'UNCHECKED')\n      END AS CHECKBOX\nFROM access_types at\n</code></pre>\n\n<p>Can I do something similar in an oracle apex checkbox item? </p>\n"},{"tags":["oracle","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":44,"score":0,"question_id":12777170,"title":"Number format converting","body":"<p>I have a currency amount value like this; </p>\n\n<pre><code>22200000\n</code></pre>\n\n<p>I want to convert this number to;</p>\n\n<pre><code>22,2  (Number format)\n</code></pre>\n\n<p>How can I do this?</p>\n"},{"tags":["php","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12929769,"title":"oracle php lock record","body":"<p>I have this problem.. i am trying to use the lock record for the update. I am using php, and i use oracle as the database. i didnt understand fully but i have managed to copy the previous developer code and make it working. </p>\n\n<p>It is using the odbc_exec(), odbc_fetch_row(). I think that this is suppose to be use for microsoft access data base. But i don't know. And i am also using jquery to fetch this php file(using jquery post) and append to the current page.</p>\n\n<p>But now my senior request me to make sure that if a person is editing one record. then the other cant edit it anymore. They said that something about not closing the connection. can php not close connection to database after 1 page is loaded (when it is using jquery to get the page like mine does)? from what i know, if a page is loaded. the connection to the database is closed.</p>\n\n<p>I want to try this code but i am afraid if i am wrong and the connection would hang.</p>\n\n<p>Now my sql is like this for select all company.</p>\n\n<pre><code>$sqlStr =\"select * from company\";\n$rs  = odbc_exec($GblConnOra , $sqlStr);\nwhile (odbc_fetch_row($rs)){\n   $company_name=odbc_result($rs,\"company_name\");\n    $company_id=odbc_result($rs,\"company_id\");\n}\n</code></pre>\n\n<p>And for select the company to edit    </p>\n\n<pre><code>$sqlStr =\"select * from company where company_id='34'\";\n$rs  = odbc_exec($GblConnOra , $sqlStr);\nwhile (odbc_fetch_row($rs)){\n   $company_name=odbc_result($rs,\"company_name\");\n}\n</code></pre>\n\n<p>The updating</p>\n\n<pre><code>$sqlStr =\"update compay set company_name=? where company_id=?\";\n$stmt = odbc_prepare($GblConnOra , $sqlStr);\n$res = odbc_execute($stmt, array($company_name, $company_id));\n</code></pre>\n\n<p>i think the sql will be like this. to lock the record. </p>\n\n<pre><code>$sqlStr =\"select * from company for update skip locked\";\n$rs  = odbc_exec($GblConnOra , $sqlStr);\nwhile (odbc_fetch_row($rs)){\n   $company_name=odbc_result($rs,\"company_name\");\n    $company_id=odbc_result($rs,\"company_id\");\n}\n</code></pre>\n\n<p>can i do this?\nwhat would my sql be for selecting a row to edit?\nwhat would my sql be for updating the row?</p>\n\n<p>And from my understanding, this lock would be release after an update commit or rollback is call.</p>\n"},{"tags":["java","sql","oracle","hibernate"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12928692,"title":"Using trigger to generate ID vs creating IDs manually","body":"<p>If we have a sequence to generate unique ID fields for a table, which of the 2 approaches is more efficient:</p>\n\n<ol>\n<li>Create a trigger on insert, to populate the ID field by fetching nextval from sequence.</li>\n<li>Calling nextval on the sequence in the application layer before inserting the object (or tuple) in the db.</li>\n</ol>\n\n<p>EDIT: The application performs a mass upload. So assume thousands or a few millions of rows to be inserted each time the app runs. Would triggers from #1 be more efficient than calling the sequence within the app as mentioned in #2?</p>\n"},{"tags":["sql","oracle","query","jdbc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12928798,"title":"What does this JDBC snippet achieves?","body":"<pre><code>String q = \"SELECT attr FROM students foo =? AND bar = ?\";\nPreparedStatement s= connection.prepareStatement(q);\ns.setString(1,\"a\");\ns.setString(2.\"b\");\nResultSet rs = s.executeQuery();\nif(rs.next())\n{\n System.out.println(\"aba\");\n}\nelse\n{\n System.out.println(\"zab\");\n}\n</code></pre>\n\n<p>I'm not entirely sure, but my interpretation is that it performs query to find \"attr\" from \"students\" where foo is something and bar is something. In case of successful results from query it prints out aba, otherwise it will print out zab. </p>\n\n<p>Correct me if i'm wrong.What s.setStrings(1,\"a\") are for? What exactly question mark stands for?</p>\n"},{"tags":["java","oracle"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12928793,"title":"How to resolve UnsatisfiedLinkError faced using Java 6 program with Oracle XE?","body":"<p>I am facing below exception while running a program compiled in <code>Java 6</code> on <code>Windows 2008 64 bit</code> machine with <code>oracle database 11g express</code> edition.</p>\n\n<pre><code>Caused by: java.lang.UnsatisfiedLinkError: C:\\oraclexe\\app\\oracle\\product\\11.2.0\\server\\bin\\ocijdbc11.dll: Can't load IA 32-bit .dll on a AMD 64-bit platform\n    at java.lang.ClassLoader$NativeLibrary.load(Native Method)\n    at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1807)\n    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1732)\n    at java.lang.Runtime.loadLibrary0(Runtime.java:823)\n    at java.lang.System.loadLibrary(System.java:1028)\n    at oracle.jdbc.driver.T2CConnection$1.run(T2CConnection.java:3535)\n</code></pre>\n\n<p>I checked there is no 64 bit version of Oracle 11g XE. </p>\n\n<p>Can you please let me know resolution for this problem?</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","oracle","c#-4.0","datareader"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12928519,"title":"how to stop oracledatareader from reading","body":"<p>I have created a software to read data from Oracle DB send it by SMS but I want to stop datareader from reading when I hit C key on the keyboard but when I done this I get this exception message:</p>\n\n<pre><code>Operation is not valid due to the current state of the object\n</code></pre>\n\n<p>stack trace:</p>\n\n<pre><code>at Oracle.DataAccess.Client.OracleDataReader.Read()\n   at Test_SMS_AT_Command.Program.OnTimer(Object obj, EventArgs args)\n</code></pre>\n\n<p>and this my code:</p>\n\n<pre><code>   oraCommand.ExecuteNonQuery();\n\n                OracleDataAdapter oraDataAdapter = new OracleDataAdapter(oraCommand);\n                Oracle.DataAccess.Types.OracleRefCursor refCursor = (Oracle.DataAccess.Types.OracleRefCursor)oraParameter.Value;\n                OracleDataReader reader = refCursor.GetDataReader();\n                while (reader.Read())\n                {\n                    if (cki.Key == ConsoleKey.C)\n                    {\n                        cancel();                     \n\n                        if (reader != null)\n                        {\n                            reader.Close(); //Closed\n                        }\n\n                        break;\n\n                    }\n\n                    if (sms.sendSms(reader[\"MOBILE_NO\"].ToString(), reader[\"TEXT\"].ToString()))\n                    {\n                        Console.WriteLine(\"Message successfully sent to \" + reader[\"MOBILE_NO\"].ToString() + \": \" + DateTime.Now);\n                        setStatus(Convert.ToInt32(reader[\"GORANNET_SMS_ID\"]));\n                        writeToFile(reader[\"TEXT\"] + \" sent to \" + reader[\"MOBILE_NO\"] + \" at: \" + DateTime.Now);\n                    }\n                    else\n                    {\n                        Console.WriteLine(\"Message was not sent\");\n                    }\n                    System.Threading.Thread.Sleep(15000);\n                }\n</code></pre>\n\n<p>Thank you</p>\n"},{"tags":["oracle","constraints","check"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":52,"score":3,"question_id":12922601,"title":"Oracle check constraint for varray type","body":"<p>I have a custom type defined as this : </p>\n\n<pre><code>CREATE TYPE myType_t AS VARRAY(2) of char(10);\n</code></pre>\n\n<p>Is it possible to add a check constraint on the char(10) type, so myType_t items respect a certain regex? I tried things like</p>\n\n<pre><code>CREATE TYPE myType_t AS VARRAY(2) of char(10)\n( constraint c_myType_format check ( regexp_like(IdontKnowWhatToWriteHere, '[:digit:]{8}'));\n</code></pre>\n\n<p>which obviously doesn't work... I thought maybe defining another type for the </p>\n\n<pre><code>AS VARRAY(2) of myOtherType_t\n</code></pre>\n\n<p>but here again I don't know where to put the regex check.</p>\n\n<p>And yes, I also tried adding the constraint to the table that will use my type, but I can't find the correct syntax.</p>\n"},{"tags":["oracle","plsql","oracle11g","plsqldeveloper"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":11682653,"title":"scheduled job is not launching","body":"<p>I would like to launch a scheduled job after every two hours starting from 04:15 tomorrow. The job should launch everyday and after every two hours. Something like at : 04:15, 06:15, 08:15....</p>\n\n<p>The procedure is about creating file in a remote machine. When I test the procedure then it works just fine, and creates file in remote location. However, it fails as a job in dbms_jobs package. I am not sure what I am doing wrong. Here is the code of procedure:</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE ARC_HRVR.VR_AD_INTEGRATION_EXPORT AS\n    v_file UTL_FILE.file_type;\nBEGIN\n    v_file := UTL_FILE.fopen('DIR_VR_AD_INTEGRATION', 'HRMtoAD1_'||to_char(sysdate,'YYYYMMDD')||'_'||to_char(sysdate,'HH24MISS'), 'w', 32767);\n    FOR x IN (\n    SELECT * FROM (SELECT\n                   decode(pid, NULL, RPAD(' ',7,' '), RPAD(user_id, 7, ' '))|| '' ||\n                   decode(o365, NULL, RPAD(' ',80,' '), RPAD(o365, 80, ' '))\n                   str FROM table WHERE integrated = 'N') str WHERE rownum &lt;= 1000 ORDER BY rownum)\n   ´LOOP\n    BEGIN\n        UTL_FILE.put_line(v_file, x.str);\n    END;\nEND LOOP;\nUTL_FILE.fflush(v_file);\nUTL_FILE.fclose(v_file);\nEND VR_AD_INTEGRATION_EXPORT;\n</code></pre>\n\n<p>And here is the code for launching job:</p>\n\n<pre><code>  DECLARE\n   l_id binary_integer;\n   begin\n   dbms_job.submit(job =&gt; l_id, what =&gt; 'ARC_HRVR.vr_ad_integration_export();', interval =&gt; 'TRUNC(SYSDATE)+1+4.25/24', );\n\n   dbms_output.put_line(l_id);    \nend; \n</code></pre>\n\n<p>A bit of guidance and tweaking will fix my code :-)\nThanks in advance</p>\n"},{"tags":["sql","oracle","plsqldeveloper"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":94,"score":0,"question_id":12924538,"title":"Using decode in where clause","body":"<p>I have a <code>DECODE</code> in my <code>WHERE</code> clause like this:</p>\n\n<pre><code>Where id = decode('&amp;flag','Yes',(Select id from tab where id &gt; 10),0)\n</code></pre>\n\n<p>This code works if the subquery returns one post. If I returns several I get an error like, ORA-01427, \"Single-row subquery returns more than one row\"</p>\n\n<p>I've tried to change the '=' to an 'in' but I still get the same error!</p>\n\n<p>Any ideas? </p>\n\n<p>extended example:</p>\n\n<pre><code>WHERE Dop_id = (DECODE ('&amp;prep_flag', 'Yes', \n    (SELECT Dop_id FROM \n                   ( SELECT DOP_id, name FROM TABLE)\n                    WHERE name IS NOT NULL) \n , Dop_id))\n</code></pre>\n\n<p>as mention this works if the select statmen returns on row, and not several.</p>\n"},{"tags":["sql","oracle","count","group-by","having"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12904587,"title":"How do a return has-many relations across two tables that have more than one row in the aggregate?","body":"<p>I am trying to write a SQL statement between two tables where there is a has-many relation between two tables going one way and returns only the rows with more than one relation. I'm probably phrasing this horribly so here's the example.</p>\n\n<p>Let's say table A has a column \"key_a\" that is a primary key for Table A. Table B has two columns. The first is called \"key_b\" which is a primary key for Table B and a second column called \"key_a\" which is a foreign key with a relation to \"A.has_a\". Application logic has been implemented to ensure that While a row entry in Table A can have a relation from 0 to n rows in Table B, rows in Table B have a relation to exactly one row in Table A.</p>\n\n<p>How can I write an SQL query that will return row entries in \"A.key_a\" that have more than one row in Table B mapping a relation to it through the \"B.key_a\" column?</p>\n"}]}
{"total":22203,"page":11,"pagesize":100,"questions":[{"tags":["xml","database","oracle","data","base"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":39,"score":-1,"question_id":12915933,"title":"xml to oracle database","body":"<p>I have to import an xml file into an oracle data base, but the file have this structure : </p>\n\n<p>tasks: </p>\n\n<ol>\n<li>Parse an given XML file and import it in an Oracle database</li>\n<li>Create database based on the XML structure</li>\n</ol>\n\n<p>xml file:</p>\n\n<pre><code>  &lt;root&gt;\n    &lt;customers&gt;\n     &lt;customer id=1&gt;e-mag&lt;/customer&gt;\n     &lt;customer id=2&gt;Eurofigher&lt;/customer&gt;\n    &lt;/customers&gt;\n    &lt;customer_invoices&gt;\n     &lt;invoice id=1&gt;\n      &lt;customer_id&gt;1&lt;/customer_id&gt;\n      &lt;items&gt;\n       &lt;item id=1 unit_value=10 tva=21 units=5&gt;Laptop&lt;/item&gt;\n       &lt;item id=2 unit_value=20 tva=21 units=3&gt;Monitors&lt;/item&gt;\n      &lt;/items&gt;\n     &lt;/invoice&gt; \n    &lt;/customer_invoices&gt;\n  &lt;/root&gt;\n</code></pre>\n\n<p>what is the best way to do that? \nplese help me. I need a fast answer</p>\n"},{"tags":[".net","oracle","database-connection","connection-pooling","dataprovider"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":115,"score":2,"question_id":12877042,"title":"How Can I Prevent Recurring Automatic Connections to Oracle Database?","body":"<p><strong>Background</strong></p>\n\n<p>We have a C#/VB.net client application consuming a WCF service which connects to an Oracle database. The web service connects to the database using the .NET framework's data provider for Oracle (not to be confused with ODP). Our testers have experienced sporadic Oracle account locking which seems to happen shortly after changing the user's Oracle password. The dba_audit_trail logs have revealed what seem to be automated connection attempts at very regular intervals (i.e. every two minutes on the dot) without any user or client activity. Numerous logs (IIS, WCF tracing, message logging, etc.) have confirmed these connection attempts are not initiated directly by the client application; they must be coming independently from the web service or from inside the System.Data.OracleClient library. The automatic attempts continue forever until the web service's worker process (single worker) dies from inactivity.</p>\n\n<p>In some instances, these automatic attempts get started before the password change, and they connect successfully to the database, but as soon as the password changes, the next attempt fails for invalid username/password. After three attempts, the account gets locked. We are trying to find the source of these periodic connection attempts.</p>\n\n<p>I found a very similar, but unanswered, problem on Oracle's forum <a href=\"https://forums.oracle.com/forums/thread.jspa?threadID=1114009\" rel=\"nofollow\">here</a>.</p>\n\n<p><strong>Current Thoughts</strong></p>\n\n<p>Our latest investigations have led us to believe it is an unexpected behavior from connection pooling. If the user connected to the web service before the password change, a connection pool would be created for the original connection string. After changing the password and logging back into the web service, the data provider would create a new connection pool based on the new connection string.</p>\n\n<p>Could something inside the data provider be trying to keep the old connection alive from the first connection pool? Perhaps the first connection pool is discarding the old connection and attempting to replenish it with a new one (with the now invalid connection string). What could cause this? Note: we are using the default settings for min/max pool size (0/100).</p>\n\n<p>We do not believe our code is directly attempting to access a connection from the first connection pool. The user's session does not have any memory of the previous session's password, and therefore would not be using the old connection string to reference the first connection pool. Additionally, nothing in our code would explain the very precise connection intervals we are seeing.</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":69,"score":3,"question_id":12914609,"title":"Natural Join Scenario","body":"<p>When we join two tables using NATURAL JOIN, the join operation is performed on the basis on Common Column Names.\nWhen we have two colums with the same name in two tables, only the common records are displayed.</p>\n\n<p>I have one query that when we have columns with the same name but different datatypes, those columns are also joined.\nI mean suppose column_1 in table1 has datatype INTEGER and column_1 in table2 has datatype VARCHAR,  the join is performed on the basis of these two columns.</p>\n\n<p>In short, how does the Natural Join takes place when there is a difference in datatypes of two columns with the same name ?</p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":90,"score":1,"question_id":12909684,"title":"How can I automate it to display the result if I input either one of the variable?","body":"<p>I want it to display either one of the variable or all of the variable or 2 of the variables when I execute it. How can I do that?A</p>\n\n<pre><code>    declare @sql varchar(8000)\ndeclare @sql_where varchar(8000)\n\ndeclare @ww varchar(10)\ndeclare @plant varchar(10)\ndeclare @plnr_id varchar(10)\n\nset @plant = 'CS58'\nset @ww = '201240'  \nset @plnr_id = ''\n\nset @sql_where = ''\nset @sql = 'select * from  rout_sub_doi '\n\nif len(@plant) &gt; 0\n    set @sql_where = 'where plant IN('''+ @plant +''') '\n\nif len(@ww) &gt; 0\n    set @sql_where = @sql_where + 'AND sys_intel_ww IN ('''+  @ww +''') '\n\nif len(@plnr_id) &gt; 0 \n\n    set @sql_where = @sql_where + 'AND  plnr_id IN (''' + @plnr_id + ''') '\n\n\nprint @sql\nprint @sql_where\n\nexec (@sql + @sql_where )       \n</code></pre>\n"},{"tags":["sql","database","oracle","select","plsql"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12911452,"title":"Select in PL-SQL Errors: INTO After Select","body":"<p>I've the following query in a <strong>test script window</strong> <br/></p>\n\n<pre><code>declare\n  -- Local variables here\n  p_StartDate date := to_date('10/15/2012');\n  p_EndDate   date := to_date('10/16/2012');\n  p_ClientID  integer := 000192;\nbegin\n  -- Test statements here\n  select d.r                          \"R\",\n         e.amount                     \"Amount\",\n         e.inv_da                     \"InvoiceData\",\n         e.product                    \"ProductId\",\n         d.system_time                \"Date\",\n         d.action_code                \"Status\",\n         e.term_rrn                   \"IRRN\",\n         d.commiount                  \"Commission\",\n         0                            \"CardStatus\"\n    from docs d\n   inner join ext_inv e on d.id = e.or_document\n   inner join term t on t.id = d.term_id\n   where d.system_time &gt;= p_StartDate\n     and d.system_time &lt;= p_EndDate\n     and e.need_r = 1\n     and t.term_gr_id = p_ClientID;\nend\n</code></pre>\n\n<p><br/>\nHere is the <strong>error</strong>: <br/>\n<em>ORA-06550: line 9, column 3:\nPLS-00428: an INTO clause is expected in this SELECT statement</em>\n<br/>\nI've been using T-SQL for a long time and I'm new to pl-sql\nWhat's wrong here?</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":12899929,"title":"How do I query a table using a variable?","body":"<p>I'm trying to do the SQL equivalent of this in Oracle. Basically, I need to put values from a given column in a variable, then use those variables to query tables</p>\n\n<pre><code>DECLARE @transID INT\n       ,@pol_no varchar(20)\n\nSELECT @pol_no = 'xxx'\n\nSELECT @transID = p.transID \n  FROM policy_dimension p \n WHERE p.pol_no = @pol_no\n\nSELECT pd.* \n  FROM property_dimension pd \n WHERE pd.trans_id = @transID\n</code></pre>\n\n<p>I've tried this</p>\n\n<pre><code>DECLARE \n  policy_no VARCHAR2(20);\n  transaction_id int;\nBEGIN\n  :policy_no := '20P0000175';\n\n  SELECT pd_transaction_id\n    INTO transaction_id\n    FROM policy_dimension p\n   WHERE p.pd_policy_no = :policy_no\n     AND ROWNUM = 1 \n   ORDER BY pd_transaction_id desc;\n\n   BEGIN\n     SELECT *\n       FROM property_dimension pd\n      WHERE pd.pd_transaction_id = :transaction_id;\n   END;\n\n\nEND;\n/\n</code></pre>\n"},{"tags":["sql","oracle","blob"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":10846,"score":1,"question_id":5682387,"title":"Oracle database: How to read a BLOB?","body":"<p>I'm working with an Oracle database, and I would like to read the contents of a BLOB. How do I do this? </p>\n\n<p>When I do a simple select statement, it merely returns \"(BLOB)\" (without the quotes). How do I read the actual contents?</p>\n\n<p>Thanks in advance,<br>\nktm</p>\n"},{"tags":["sql","sql-server","oracle","tsql","sql-server-2008"],"answer_count":3,"favorite_count":10,"up_vote_count":20,"down_vote_count":0,"view_count":9522,"score":20,"question_id":2046037,"title":"SQL Server: Can I Comma Delimit Multiple Rows Into One Column?","body":"<h1>Creating Comma Separated Lists In SQL</h1>\n\n<p><br/>\nHi All,</p>\n\n<p>I am attempting to merge something like this in my SQL Server database:</p>\n\n<pre>[TicketID], [Person]\n T0001       Alice\n T0001       Bob\n T0002       Catherine\n T0002       Doug\n T0003       Elaine</pre>\n\n<p>Into this:</p>\n\n<pre>[TicketID], [People]\n T0001       Alice, Bob\n T0002       Catherine, Doug\n T0003       Elaine</pre>\n\n<p>I need to do this in both SQL Server and Oracle.</p>\n\n<p>I have found the function <code>GROUP_CONCAT</code> for MySQL that does exactly what I need here, but MySQL is not an option here.</p>\n\n<p><strong>EDIT:</strong> Test bench:</p>\n\n<pre><code>DECLARE @Tickets TABLE (\n    [TicketID] char(5) NOT NULL,\n    [Person] nvarchar(15) NOT NULL\n)\n\nINSERT INTO @Tickets\nSELECT 'T0001', 'Alice' UNION ALL\nSELECT 'T0001', 'Bob' UNION ALL\nSELECT 'T0002', 'Catherine' UNION ALL\nSELECT 'T0002', 'Doug' UNION ALL\nSELECT 'T0003', 'Elaine'\n\nSELECT * FROM @Tickets\n</code></pre>\n"},{"tags":["java","oracle","spring","mybatis"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12281403,"title":"How to call Oracle function which retrun Oracle record type in MyBatis","body":"<p>I have record type in package specification:</p>\n\n<pre><code> TYPE Payment_Capabilities IS RECORD(\n    pp_partial_payment NUMBER(1) DEFAULT 0,\n    co_advance_payment NUMBER(1) DEFAULT 0,\n    dp_deposit_payment NUMBER(1) DEFAULT 0,\n    dr_deposit_repay   NUMBER(1) DEFAULT 0,\n    wp_wallet_payment  NUMBER(1) DEFAULT 0,\n    wr_wallet_repay    NUMBER(1) DEFAULT 0,\n    ss_prepaid_payment NUMBER(1) DEFAULT 0);\n</code></pre>\n\n<p>and function which returns this type. I'm using MyBatis integration with Spring. How to call (using MyBatis XML Mapper) this function and map result to POJO object?</p>\n"},{"tags":["oracle","weblogic","weblogic-10.x","jdeveloper"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12911771,"title":"Weblogic Deployment Exception : PaddingException: Could not perform unpadding: invalid pad byte","body":"<p>This question is asked (and answered) just to <a href=\"http://meta.stackoverflow.com/questions/17463/can-i-answer-my-own-questions-even-those-where-i-knew-the-answer-before-asking\">share</a> some knowledge with the SO Community.</p>\n\n<p>I have recently came up with a deployment Exception of my web application (after receiving some changes from the SVN Repository) that said:</p>\n\n<blockquote>\n  <p>&lt; Error > &lt; Deployer >   with ID '1350377960779' for task '1'. Error is: 'com.rsa.jsafe.JSAFE_PaddingException: Could not perform unpadding: invalid pad byte.'\n  com.rsa.jsafe.JSAFE_PaddingException: Could not perform unpadding: invalid pad byte.\n                  at com.rsa.jsafe.c.a(Unknown Source)\n                  at com.rsa.jsafe.JSAFE_SymmetricCipher.decryptFinal(Unknown Source)\n                  at weblogic.security.internal.encryption.JSafeEncryptionServiceImpl.decryptBytes(JSafeEncryptionServiceImpl.java:124)\n                  at weblogic.security.internal.encryption.JSafeEncryptionServiceImpl.decryptString(JSafeEncryptionServiceImpl.java:184)\n                  at weblogic.security.internal.encryption.ClearOrEncryptedService.decrypt(ClearOrEncryptedService.java:96)\n                  Truncated. see log file for complete stacktrace\n  Caused By: com.rsa.jsafe.JSAFE_PaddingException: Could not perform unpadding: invalid pad byte.</p>\n</blockquote>\n"},{"tags":["sql","database","oracle","index"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12896735,"title":"How to manage a large table with lots of inserts and selects?","body":"<p>I have a table, namely X, with about 64 columns that stores online financial transactions. \nEvery day millions of records are inserted into X. About 16 columns of X are queryable, that is to say, many system reports need to filter X's data based on the values of these 16 columns. </p>\n\n<p>Having DB indexes for all of these 16 columns makes the insert action too slow. On the other hand, having no index on some columns makes some reports too slow as well. </p>\n\n<p>So, here is the question. How I design the table X and its indexes to get the best performance on insert and report? I use oracle 11g DBMS. </p>\n"},{"tags":["sql","oracle","types","sqldatatypes"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12920922,"title":"Oracle - datatype to store number of a specific length","body":"<p>I'm trying to figure out what datatype I should use in my database to store a fixed 8 digits number.</p>\n\n<p>Should I use <code>char(8)</code> even though it accepts other characters and validate on the application side or there is something like <code>number(x)</code> that could make it ?</p>\n\n<p>I've got the same dilemma with the phone number column. Should I use <code>char(x)</code> or something would be more appropriate ?</p>\n\n<p>Edit - Answers to your questions:</p>\n\n<ol>\n<li>the first fixed 8 digits column will most likely be used as a primary key. It represents to social security number in my country. No arithmetic will be done on this column. I need to keep all digits (even possible leading zeros). Although, it will probably sorted (since it'll be a primary key)</li>\n<li>For the phone number I was going to store it as a string like this : <code>12345678901</code>. The question was more about \"How can I make sure that this <code>char[]</code> will not accept letters or other characters. Should this validation be made client-side ?</li>\n</ol>\n"},{"tags":["sql","oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12903202,"title":"Using Bulk Collect to populate specific columns","body":"<p>Most of the examples online are about <code>select * bulk collect ...</code></p>\n\n<p>I have a script that grants synonyms and it takes too long to fetch data from the cursor, so I was planning to use bulk collect. The original cursor and the fetch:</p>\n"},{"tags":["sql","oracle","select","count"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12911653,"title":"count and distinct over multiple columns","body":"<p>I have a database table containing two costs. I want to find the distinct costs over these two columns. I also want to find the count that these costs appear. The table may look like</p>\n\n<pre><code>|id|cost1|cost2|\n|1 |50   |60   |\n|2 |20   |50   |\n|3 |50   |70   |\n|4 |20   |30   |\n|5 |50   |60   |\n</code></pre>\n\n<p>In this case I want a result that is distinct over both columns and count the number of times that appears. So the result I would like is</p>\n\n<pre><code>|distinctCost|count|\n|20          |2    |\n|30          |1    |\n|50          |4    |\n|60          |2    |\n|70          |1    |\n</code></pre>\n\n<p>and ideally ordered</p>\n\n<pre><code>|disctinCost1|count|\n|50          |4    |\n|60          |2    |\n|20          |2    |\n|70          |1    |\n|30          |1    |\n</code></pre>\n\n<p>I can get the distinct over two columns by doing something like</p>\n\n<pre><code>select DISTINCT c FROM (SELECT cost1 AS c FROM my_costs UNION SELECT cost2 AS c FROM my_costs);\n</code></pre>\n\n<p>and I can get the count for each column by doing </p>\n\n<pre><code>select cost1, count(*)\nfrom my_costs \ngroup by cost1\norder by count(*) desc;\n</code></pre>\n\n<p>My problem is how can I get the count for both columns? I am stuck on how to do the count over each individual column and then add it up. </p>\n\n<p>Any pointers would be appreciated.</p>\n\n<p>I am using Oracle DB.</p>\n\n<p>Thanks</p>\n"},{"tags":["oracle","exception","plsql"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":81,"score":3,"question_id":12735712,"title":"How can I get the procedure/function name where an exception occurs, in PLSQL?","body":"<p>How can I get a procedure/function name where an exception occurs in PLSQL?\nI need this to create a log of the procedures that have problems in a package.</p>\n"},{"tags":["sql","oracle","plsql","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12916031,"title":"Exception for same data update","body":"<p>Need help in exception handling.\nIf I run this UPDATE script once it works, but when I run same script two or more times I receive the following error\n    \"1 row updated. commited\" \nbut it is not ok.\nI want to receive exception.\n\"Note:Table is already updated\"</p>\n\n<pre><code>UPDATE FBTB_TXNLOG\nSET txnstageid = '-1',\nLOCKED = 'N',\nwhere xrefid = 'FJB1229000056689';\ncommit;\n</code></pre>\n"},{"tags":["oracle","hibernate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12919190,"title":"Hibernate String to Oracle Varchar2 mapping","body":"<p>This is regarding mapping of Hibernate to Oracle Data Types. In our hibernate mapping file we are mapping one of the columns to hibernate as</p>\n\n<p><code>&lt;property name = \"serialnumber\"           column = \"SERIAL_NUMBER\"          type = \"java.lang.String\" not-null = \"true\" /&gt;</code> .</p>\n\n<p>This at runtime resolves to either a VARCHAR2(128) and sometimes as a VARCHAR2(2000), this is causing some performance issue in DB because of cursor mutex contention. </p>\n\n<p>What is the reason for this behavior and how can we fix this?</p>\n"},{"tags":["sql","oracle","plsql","cursor","oracle11g"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":998,"score":0,"question_id":8811114,"title":"Oracle 11g - Running PL/SQL Cursors","body":"<p>I'm trying to run this code on Oracle 11g and it's giving me the error below. I can't seem to get it right.</p>\n\n<pre><code>DECLARE\n    CURSOR bookcursor IS\n    SELECT btName, BookCopy.Isbn, pubName, dateDestroyed\n      FROM booktitle bt\n      JOIN publisher p\n        ON bt.pubId = p.pubId \n      JOIN bookcopy bc\n        ON bt.Isbn = bc.Isbn \n     WHERE datedestroyed IS NULL\n    ;\n    bookcursorrec bookcursor%ROWTYPE;\nBEGIN\n    OPEN bookcursor;\n    LOOP\n        FETCH bookcursor INTO bookcursorrer;\n        EXIT WHEN bookcursor%NOTFOUND;\n        dbms_output.put_line( 'ISBN: ' ||bookcursorrec.isbn\n                              || ' - Book Name: ' || bookcursorrec.btname\n                              || ' - Publisher: ' || bookcursorrec.pubname );\n    END LOOP;\n    CLOSE bookcursor;\nEND;\n\n\nERROR at line 3:\nORA-06550: line 3, column 20:\nPL/SQL: ORA-00904: \"BOOKCOPY\".\"ISBN\": invalid identifier\nORA-06550: line 3, column 5:\nPL/SQL: SQL Statement ignored\nORA-06550: line 2, column 12:\nPLS-00341: declaration of cursor 'BOOKCURSOR' is incomplete or malformed\nORA-06550: line 11, column 19:\nPL/SQL: Item ignored\nORA-06550: line 15, column 31:\nPLS-00201: identifier 'BOOKCURSORRER' must be declared\nORA-06550: line 15, column 9:\nPL/SQL: SQL Statement ignored\nORA-06550: line 17, column 42:\nPLS-00320: the declaration of the type of this expression is incomplete or\nmalformed\nORA-06550: line 17, column 9:\nPL/SQL: Statement ignored\n</code></pre>\n\n<p>Can you kindly point me to what is wrong? I can't seem to understand to what is wrong</p>\n\n<p>Thanks,\nBrian</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":89,"score":1,"question_id":12916611,"title":"EXTRACT() Hour in 24 Hour format","body":"<p>I have a something like below-</p>\n\n<pre><code>EXTRACT(HOUR from CAST(to_char(tran_datetime,'DD-MON-YYYY HH24:MI:SS') AS TIMESTAMP))\n</code></pre>\n\n<p><code>tran_datetime</code> is <code>DATE</code> type. This gives error for some rows saying <code>HOUR must be between 1 and 12</code>, so I understand that it cannot handle Hour in a <code>24 Hour</code> format (or military time). The below works (obviously)-</p>\n\n<pre><code>EXTRACT(HOUR from CAST(to_char(tran_datetime,'DD-MON-YYYY HH:MI:SS') AS TIMESTAMP)) \n</code></pre>\n\n<p>or</p>\n\n<pre><code>EXTRACT(HOUR from CAST(tran_datetime AS TIMESTAMP))  --12 Hr format by default\n</code></pre>\n\n<p>Is there a way to use <code>EXTRACT()</code> to get the <code>HOUR</code> in 24 Hour format i.e. 15 for 3 PM, 13 for 1 PM etc.</p>\n\n<p>Please Note- <code>to_char(tran_datetime,'HH24')</code> is a very obvious option, but I am looking to use <code>EXTRACT()</code> function specifically.</p>\n"},{"tags":["oracle","mobile","platform"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":238,"score":1,"question_id":7594660,"title":"What's the best mobile platform to use with Oracle Weblogic Portal/Oracle Products?","body":"<p>Just to set the scene:\nWe built a self-care portal for a telecommunications company using Oracle Weblogic Portal 10.3.2. Our portlets are JSR-286 compliant using our own home grown MVC state pattern as opposed to using something like Struts or ADF/JSF.\nThe aforementioned telecoms company has all-you-can-eat licenses for pretty much the whole Oracle product suite (databases, applications servers, portal servers, WebCenter etc.).</p>\n\n<p>We now have a follow-up requirement to build a companion mobile/mobi site that will have a subset of the pages available on the full-fledged web site. This mobi site should also support as many different mobile devices as possible.</p>\n\n<p>Our preliminary investigations indicate that the following two options might be viable:</p>\n\n<ul>\n<li>Mobile development using JDeveloper/ADF and deployed to Oracle WebCenter (the disadvantage of this is that we will have to develop ADF skills and cannot use our existing MVC state pattern)</li>\n<li>MobileAware Mobile Interaction Server running on top of Weblogic Portal (http://www.mobileaware.com/?q=content/mobile-interaction-server)</li>\n</ul>\n\n<p>My questions are the following:</p>\n\n<ul>\n<li>What other similar products are available in this space?</li>\n<li>Which one would suit our requirements best given that we do not necessarily have to stick to Oracle products?</li>\n</ul>\n\n<p>Thanks</p>\n"},{"tags":["sql","oracle","pivot"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":872,"score":1,"question_id":10921212,"title":"Oracle SQL transpose using dynamic column names","body":"<p>I have a simple problem that I need to solve quickly. Would you please lend me your help?</p>\n\n<p>The problem is as fOllows: I have two tables, one definition table and one history table.</p>\n\n<pre><code>create table revenue history(operation_date date, revenue_id number, total_revenue number); \ncreate table revenue_definition(revenue_id number, revenue_name varchar2(100));\n\ninsert into revenue_definition values(1,'Car');\ninsert into revenue_definition values(2,'Minivan');\ninsert into revenue_definition values(3,'Bus');\n\ninsert into revenue history values(sysdate-2,1,100);\ninsert into revenue history values(sysdate-2,2,150);\ninsert into revenue history values(sysdate-2,3,100);\n\ninsert into revenue history values(sysdate-1,1,200);\ninsert into revenue history values(sysdate-1,2,150);\ninsert into revenue history values(sysdate-1,3,200);\n\ninsert into revenue history values(sysdate,1,100);\ninsert into revenue history values(sysdate,2,150);\ninsert into revenue history values(sysdate,3,100);\n</code></pre>\n\n<p>Now what i need to do is show a report like this;</p>\n\n<blockquote>\n  <p>operation_date  Car   Minivan Bus <br>\n  sysdate         100   150     100 <br>\n  sysdate-1       200   150     200 <br>\n  sysdate-2       100   150     100 <br></p>\n</blockquote>\n\n<p>I know that I can do this by using either decode or in 11g pivot. But for those I need to know the revenue types (Car,Minivan etc.) in advance and every time a definition is made I need to update my code. I want to avoid this if possible. </p>\n\n<p>Any suggestions would be welcome,</p>\n\n<p>Thanks.</p>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":348,"score":1,"question_id":12482263,"title":"Oracle SQL: Transpose Columns to Rows","body":"<p>There have been some questions on this but I couldn't find a relevant result for me. I have a query that gives me 2 columns of results:</p>\n\n<pre><code> Day            Tot_dLS   \n 01-Sep-12      10000\n 02-Sep-12      9920\n</code></pre>\n\n<p>I want to transpose the Date so it reads:</p>\n\n<pre><code>01-Sep-12    02-Sep-12 \n10000         9920\n</code></pre>\n\n<p>Is this possible?</p>\n"},{"tags":["sql","oracle","greatest-n-per-group"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":519,"score":2,"question_id":6600445,"title":"First two salaries in each department","body":"<p>I have a table called departments which consists of a column called salary. Now I want to have all the details of the highest two salaries in each department. How should we develop a query which yields the required output? Top-N analysis will give it as a whole but not for each department. I want the top two in each department.</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12896714,"title":"Call function from sql clause: returning a variable number of columns","body":"<p>It it possible to call a cursor returning a REF cursor from a SELECT statement?</p>\n\n<p><strong>EDIT</strong>\nI need a variable number of returned fields, so a pipelined table is not useful for my purpose.</p>\n\n<p>IE.</p>\n\n<pre><code>SELECT GetFields('field1, field2', flh_tout_name)\n     FROM ENI_FLUSSI_HUB c\n    WHERE flh_id_messaggio = '1'\n</code></pre>\n\n<p>FUNCTION GetFields(fields, vFlhToutName);\n           vQuery :=\n             'SELECT' || fields || ' FROM '\n          || vFlhToutName;</p>\n\n<pre><code>  return EXECUTE IMMEDIATE (vQuery);\n</code></pre>\n\n<p>END</p>\n"},{"tags":["sql","oracle","optimizer-hints","cost-based-optimizer"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12913587,"title":"Convincing the Oracle SQL optimizer that an indexed (though non-UNIQUE) column actually contains unique values in practice","body":"<p>I am writing a view that uses a column with a non-<code>UNIQUE</code> index on it. However, within the context of my view, I am confident that the column will only contain unique values (due to the conditions imposed in the <code>WHERE</code> clause).</p>\n\n<p>The real problem happens when someone queries the view based on that column (e.g. <code>SELECT * FROM MY_VIEW WHERE COLUMN_WITH_NON_UNIQUE_INDEX = 'foo'</code>). The optimizer is convinced that it will be receiving <em>many</em> rows (because the index is not technically <code>UNIQUE</code>). Because of this, the optimizer avoids using other indexes elsewhere in the view in favor of full table scans (not cool).</p>\n\n<p>Is there a way to convince the the optimizer that a column with a non-<code>UNIQUE</code> index will, in fact, contain unique values? Sure, there is the possibility that duplicate values could sneak their way into the column, but it would be considered a bug and should not cause the legitimate, unique data to suffer.</p>\n\n<p>Unfortunately, I am not in control of the table in question (sigh).</p>\n"},{"tags":["performance","oracle","materialized-views"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":43,"score":-4,"question_id":12911392,"title":"Fast refresh taking longer than complete refresh","body":"<p>Which one is better complete or fast?</p>\n\n<pre><code> create materialized view mv_sales_at_point\n    build immediate\n    refresh fast on demand\n    enable query rewrite\n    as\n    select  year ,month ,week,t.company_id,t.branch_id,t.customer_id,\n            sum(total_sales_txn),sum(total_spend),sum(total_discount)\n    from txn_agg1 t \n    group by year,month,week,t.company_id,t.branch_id,t.customer_id;\n</code></pre>\n\n<p>My Base Table is TXN_AGG1 Table having 285 Rows.\nComplete Refresh Takes  0.219 Seconds   and Fast refresh take 0.531 seconds.\nWhich one is better to use, since this this table (TXN_AGG1) will grow eventually?</p>\n"},{"tags":["oracle","connection","odp.net","tnsnames","tns"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12914847,"title":"How to change the Oracle Client user in a connection","body":"<p>I have the oracle 10 and 11 clients instaled in my machine. When i go to the command line and type TNSPING the output tells my something like this</p>\n\n<pre><code>TNS Ping Utility for 32-bit Windows: Version 10.2.0.1.0 - Production on 16-OUT-2012     09:34:39\n</code></pre>\n\n<p>so, i assume that this machine is using the 10 version of oracle client to handle the connections.</p>\n\n<p>How to change it? </p>\n"},{"tags":["sql","oracle","sql-developer"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":759,"score":3,"question_id":7998706,"title":"In Oracle SQL Devleoper, when I copy the results, how can I copy the column headings too?","body":"<p>In Oracle SQL Devleoper, when I copy the results, how can I copy the column headings too?</p>\n\n<p>For example, I don't want:</p>\n\n<pre><code>doucette matthew xona.com etc.\n</code></pre>\n\n<p>I want:</p>\n\n<pre><code>lastname firstname url      etc.\n-------- --------- -------- ----\ndoucette matthew   xona.com etc.\n</code></pre>\n"},{"tags":["sql","oracle","oracle10g","oracle11g"],"answer_count":4,"favorite_count":3,"up_vote_count":16,"down_vote_count":0,"view_count":263,"score":16,"question_id":12565790,"title":"Selecting both MIN and MAX From the Table is slower than expected","body":"<p>I have a table <code>MYTABLE</code> with a date column <code>SDATE</code> which is the primary key of the table and has a unique index on it. </p>\n\n<p>When I run this query:</p>\n\n<pre><code>SELECT MIN(SDATE) FROM MYTABLE\n</code></pre>\n\n<p>it gives answer instantly. The same happens for: </p>\n\n<pre><code>SELECT MAX(SDATE) FROM MYTABLE\n</code></pre>\n\n<p>But, if I query both together:</p>\n\n<pre><code>SELECT MIN(SDATE), MAX(SDATE) FROM MYTABLE\n</code></pre>\n\n<p>it takes much more time to execute. I analyzed the plans and found when one of min or max is queried, it uses INDEX FULL SCAN(MIN/MAX) but when both are queried at the same time, it does a FULL TABLE SCAN.  </p>\n\n<p>why?</p>\n\n<p><strong>Test Data:</strong></p>\n\n<p>version <code>11g</code></p>\n\n<pre><code>create table MYTABLE\n(\n  SDATE  DATE not null,\n  CELL   VARCHAR2(10),\n  data NUMBER\n)\ntablespace CHIPS\n  pctfree 10\n  pctused 40\n  initrans 1\n  maxtrans 255\n  storage\n  (\n    initial 64K\n    minextents 1\n    maxextents unlimited\n  );\n\nalter table MYTABLE\n  add constraint PK_SDATE primary key (SDATE)\n  using index \n  tablespace SYSTEM\n  pctfree 10\n  initrans 2\n  maxtrans 255\n  storage\n  (\n    initial 64K\n    minextents 1\n    maxextents unlimited\n  );\n</code></pre>\n\n<p>Load table:</p>\n\n<pre><code>declare \n  i integer;\nbegin\n  for i in 0 .. 100000 loop\n     insert into MYTABLE(sdate, cell, data)\n     values(sysdate - i/24, 'T' || i, i);     \n     commit;\n  end loop;\nend;\n</code></pre>\n\n<p>Gather stats: </p>\n\n<pre><code>begin\n  dbms_stats.gather_table_stats(tabname =&gt; 'MYTABLE', ownname =&gt; 'SYS');\nend;\n</code></pre>\n\n<p>Plan1:</p>\n\n<p><img src=\"http://i.stack.imgur.com/jHwT8.jpg\" alt=\"enter image description here\"></p>\n\n<p>Plan2:</p>\n\n<p><img src=\"http://i.stack.imgur.com/MVgsh.jpg\" alt=\"enter image description here\"></p>\n"},{"tags":["sql","oracle","query-optimization","union-all"],"answer_count":2,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":82,"score":5,"question_id":12896838,"title":"Union of a query with itself generates different plan","body":"<p>This query below:</p>\n\n<p><strong>Query 1:</strong></p>\n\n<pre><code>SELECT * FROM DUAL \n</code></pre>\n\n<p>is equivalent to and produces the same result as:</p>\n\n<p><strong>Query 2:</strong> </p>\n\n<pre><code>SELECT * FROM DUAL \nUNION\nSELECT * FROM DUAL\n</code></pre>\n\n<p>This is obvious BEFORE running the two queries just by looking at them.</p>\n\n<p>However, it seems Oracle doesn't understand this very simple fact and generates two different plans:</p>\n\n<p><strong>Plan 1:</strong></p>\n\n<pre><code>Execution Plan\n----------------------------------------------------------\nPlan hash value: 272002086\n\n--------------------------------------------------------------------------\n| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)| Time     |\n--------------------------------------------------------------------------\n|   0 | SELECT STATEMENT  |      |     1 |     2 |     2   (0)| 00:00:01 |\n|   1 |  TABLE ACCESS FULL| DUAL |     1 |     2 |     2   (0)| 00:00:01 |\n--------------------------------------------------------------------------\n</code></pre>\n\n<p><strong>Plan 2:</strong></p>\n\n<pre><code>Execution Plan\n----------------------------------------------------------\nPlan hash value: 646475286\n\n----------------------------------------------------------------------------\n| Id  | Operation           | Name | Rows  | Bytes | Cost (%CPU)| Time     |\n----------------------------------------------------------------------------\n|   0 | SELECT STATEMENT    |      |     2 |     4 |     6  (67)| 00:00:01 |\n|   1 |  SORT UNIQUE        |      |     2 |     4 |     6  (67)| 00:00:01 |\n|   2 |   UNION-ALL         |      |       |       |            |          |\n|   3 |    TABLE ACCESS FULL| DUAL |     1 |     2 |     2   (0)| 00:00:01 |\n|   4 |    TABLE ACCESS FULL| DUAL |     1 |     2 |     2   (0)| 00:00:01 |\n----------------------------------------------------------------------------\n</code></pre>\n\n<p>Why is that? Isn't a simple comparison of the two UNION-ed blocks less costly than doing both of the <code>UNION-ALL</code> and <code>SORT UNIQUE</code> operations? Or is there a way, a hint, to force Oracle to generate the same plan in both cases? </p>\n\n<p>Thanks!</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Tnoy's  answer forced me to do some more experiments. Here is the result: \n<strong>When a query is UNION-ed with itself, the bigger query is not necessarily equivalent to the original query.</strong></p>\n\n<p>For example, I have created a very simple <code>test</code> table having only one column and loaded with two identical rows.</p>\n\n<p>Now, my first query on this table which is this: </p>\n\n<pre><code>SELECT * FROM TEST \n</code></pre>\n\n<p>returns this result:</p>\n\n<pre><code>  A\n-----\n  2\n  2\n</code></pre>\n\n<p>while my UNION-ed query of:</p>\n\n<pre><code>SELECT * FROM TEST\nUNION\nSELECT * FROM TEST\n</code></pre>\n\n<p>returns this result:</p>\n\n<pre><code>  A\n-----\n  2\n</code></pre>\n\n<p>which means the Oracle optimizer is doing the right thing.</p>\n\n<p>Thanks Tony! </p>\n"},{"tags":["oracle","plsql","sql-update","rollback"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":12915508,"title":"How can disable a foreign key and then rollback in Oracle database from stored procedure?","body":"<p>I am working on an Oracle sql database.\nI have a stored procedure where I need to update the value of the primary key in a table.\nThat value is referenced by a foreign key from another table.</p>\n\n<p>I can disable that foreign key constraint,then perform the update and then enable it back and this works.</p>\n\n<p>The problem is that if something goes wrong after altering the foreign key status I cannot rollback prior to the update.</p>\n\n<p>To resume:</p>\n\n<ol>\n<li>UPDATE</li>\n<li>ALTER FOREIGN KEY</li>\n<li>ROLLBACK</li>\n</ol>\n\n<p>Is there any way I can rollback to the state before performing the update and if yes then how ?</p>\n\n<p>Thanks.</p>\n"},{"tags":["sql","oracle","stored-procedures","plsql"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12914843,"title":"Call oracle procedure with an empty cursor?","body":"<p>I have a procedure that looks like this:</p>\n\n<pre><code>  PROCEDURE myprocedure (\n      i_area        IN       somenumber%TYPE,\n      io_areadata   IN OUT   areacursor\n   );\n</code></pre>\n\n<p>And I wonder if there is any simple way to call procedure? I have data for the first argument but for the second I do not know what enter. Is there any way I could enter an empty cursor or  something similar?</p>\n\n<p>This is what I've done so far:</p>\n\n<pre><code>BEGIN\npackage.myprocedure (\n      12345\n   );\nEND;\n</code></pre>\n\n<p>And that gives me the following error:</p>\n\n<pre><code>Error report:\nORA-06550: row 2, column 1:\nPLS-00306: wrong number or types of arguments in call to 'MYPROCEDURE'\nORA-06550: row 2, column 1:\nPL/SQL: Statement ignored\n06550. 00000 -  \"line %s, column %s:\\n%s\"\n*Cause:    Usually a PL/SQL compilation error.\n</code></pre>\n\n<p>Thank you in advance and sorry for my (maybe) poor explanation. I have little experience in PL/SQL.</p>\n"},{"tags":["oracle","login","schema","settings","default"],"answer_count":3,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":8111,"score":9,"question_id":283589,"title":"Oracle setting per user default scheme (not altering a session)","body":"<p>is there a way to change an oracle user's default schema?</p>\n\n<p>I found it in the FAQ that I can alter it in the session, but it's not what I want. E.G. the user at log on always sees another schema as default.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":12902578,"title":"SQL query to retrieve results based on date and time","body":"<p>I have the following tables with data:</p>\n\n<p>customer:   </p>\n\n<pre><code>cus_id             cus_name\n1                  philip\n2                  david\n3                  morris\n</code></pre>\n\n<p>order:              </p>\n\n<pre><code> order_id   order_no    cus_id  ordr_status      order_ date_time\n    1             123        1       d                      20121015 13:10:01\n    2             456        1       c                      20121014 14:20:00\n    3             789        2       d                      20121013 17:10:01\n    4             767        2       c                      20121014 15:10:00\n</code></pre>\n\n<p>Based on this data, I want to retrieve both customer and order information if the order date time is  between 20121014 14:00:00 and 20121015 14:00:00 and if the the order status is  (d,c) and they have same oder id's. </p>\n"},{"tags":["oracle","impdp"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12913553,"title":"ORA-39083: Object type INDEX_STATISTICS failed to create with error","body":"<p>I am trying to restore Oracle DB from a backup taken recently. While restoring I got the following error: </p>\n\n<p>Failing sql is:</p>\n\n<pre><code>DECLARE I_N VARCHAR2(60);   I_O VARCHAR2(60);   NV VARCHAR2(1);   c DBMS_METADATA.T_VAR_COLL;   df varchar2(21) := 'YYYY-MM-DD:HH24:MI:SS';  stmt varchar2(300) := ' INSERT INTO \"SYS\".\"IMPDP_STATS\" (type,version,flags,c1,c2,c3,c5,n1,n2,n3,n4,n5,n6,n7,n8,n9,n10,n11,n12,d1,cl1) VALUES (''I'',6,:1,:2,:3,:4,:5,:6,:7,:8,:9,:10,:11,:12,:13,NULL,:14,:15,NULL,:16,:17)';BEGIN  DELETE\nORA-39083: Object type INDEX_STATISTICS failed to create with error:\nORA-01403: no data found\nORA-01403: no data found\n</code></pre>\n\n<p>I searched in the net for some possible solution, one of them suggested to exclude the statistics(EXCLUDE=INDEX_STATISTICS) while exporting or importing the database.<br>\nPlease let me know if it's safe to exclude statistics while restoring a recently crashed/corrupted database.</p>\n"},{"tags":["oracle","index","oracle11g","tablespace"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12912192,"title":"Create index without specifying the tablespace","body":"<p>I'd like to ask a question.\nWhat happen If I create an index without specifying the tablespace in the process of creation.\nFor example :</p>\n\n<pre><code>CREATE INDEX indx_cd on distributors(dist_cd)\n</code></pre>\n\n<p>In what tablespace does the index created?  And will the index still works as it should even if I put it that way?</p>\n"},{"tags":["sql","oracle","date","group","max"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":12856965,"title":"Different SQL selection based on inter-record condition","body":"<p>I have a table that holds allocations of problem reports (PRs) as follows:</p>\n\n<pre><code>TABLE \"ALLOCATIONS\"\n\nALLOCATIONID    PRID    DATEALLOCATED        ENG_ID\n1               401     20-SEP-06 10.48.00   1\n2               401     20-SEP-06 10.48.00   2\n3               401     20-SEP-06 10.48.00   2\n4               402     20-SEP-06 12.35.00   1\n5               402     20-SEP-06 12.43.00   1\n6               402     20-SEP-06 13.43.00   2\n7               700     14-OCT-12 13.30.05   1\n8               700     14-OCT-12 13.30.35   2\n9               700     14-OCT-12 14.30.35   2\n</code></pre>\n\n<p>The most recent allocation determines which engineer the PR is now assigned to. I want to find all the PRs that are assigned to engineer 2 for example.\nSo I look for the most recent allocation for each PRID, check the ENG_ID, then pull out the information from this table if the ENG_ID is correct.</p>\n\n<p>This table contains the actual PR descriptions (and other info omitted here for clarity).</p>\n\n<pre><code>TABLE \"PROBLEMS\"\n\nPRID     TITLE\n401      Something\n402      Something\n700      Something\n</code></pre>\n\n<p>To do this I have used the DATEALLOCATED field as follows:</p>\n\n<pre><code>SELECT PRID, TITLE FROM PROBLEMS p WHERE p.PRID IN\n(\n    SELECT GROUPEDALLOC.PRID FROM allocations alloc INNER JOIN\n    ( \n        SELECT PRID, MAX(DATEALLOCATED) AS MaxAllocationDate    \n        FROM allocations   \n        GROUP BY PRID\n    ) \n    groupedAlloc ON alloc.PRID = groupedAlloc.PRID \n    AND ALLOC.DATEALLOCATED = groupedAlloc.MaxAllocationDate \n    AND ENG_ID = 2\n) \nORDER BY PRID DESC;\n</code></pre>\n\n<p>Now this works fine for records 7,8,9 above which were inserted with a long date format that includes the seconds, however for the older records which didn't log the seconds this will obviously not work. For these records I want to fall back on the allocationID (which may or may not be sequential obviously - however it is a last resort and better than nothing).</p>\n\n<p>My question is, how do I modify my query to perform this extra condition on the DATEALLOCATED (i just want to see if they are all equal for a particular PRID), and then use the ALLOCATIONID instead?</p>\n\n<p>I am using OracleXE but I want to stick to standard SQL if possible.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["visual-studio-2010","oracle","odt","schema-compare"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12905648,"title":"Oracle Data Tools (ODT) - schema compare","body":"<p>We are wanting to source control our Oracle Schema - as we have a number of SQL Server databases on our estate we would like to use a common tool - for the SQL Server databases we use Visual Studio 2010 / dbpro which nicely source controls each object, integrates into our CI environment, and assists build/deploy to UAT and Live.</p>\n\n<p>We would like to do the same for our Oracle databases however, from the tools on offer, they don't seem to be at all close to the functionality VS2010 provides - the VS2010 Toad plugin is no longer supported; we are trialing the ODT (Oracle Data Tools) plugin however I can't seem to locate how I can generate a delta script (compare) of an Oracle database project Vs a target Oracle instance - this seems to be a fairly fundamental requirement</p>\n\n<p>Does anyone have any ideas ?  It might mean we may need to combine the source control capabilities of VS2010 with the compare (generate delta scripting) of another tool like SQL Developer.  Has anyone gone down this path ?</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12890883,"title":"how to call a function in plsql function","body":"<p>I have a plsql function and I want to call an other function from my function. how can I do this?</p>\n\n<pre><code>FUNCTION ortak_icra_job(prm_dosya_id             dosya.id%TYPE,\n                     prm_aciklama             icra_hareket.aciklama%TYPE,\n                     prm_kullanici_id         kullanici.id%TYPE,\n                     prm_ask_ind_kayit_sayisi OUT NUMBER,\n                     prm_hata_metni           OUT VARCHAR2,\n                     prm_hata_kodu            OUT hata_mesaji.id%TYPE) \nBEGIN\n\naskidan_indir(prm_dosya_id ,\n               prm_aciklama ,\n               prm_kullanici_id ,\n               prm_ask_ind_kayit_sayisi ,\n               prm_hata_metni ,\n               prm_hata_kodu )\n\nEND;\n</code></pre>\n\n<p>is this correct way to do this ?</p>\n"},{"tags":["sql","oracle","cursor","oracle11g"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12909336,"title":"Strange runtime behaviour of an update in a cursor","body":"<p>I have an old and a new table. In the old table, there is a <code>VARCHAR2</code> column, called <code>number</code>, with values like <code>11-38D402342</code> and <code>11-38D402342/43</code>. Also some crappy data, but never null.</p>\n\n<p>In the new table, there are the two <code>VARCHAR2</code> columns <code>number_left</code> and <code>number_right</code>. these two were filled from the number column of the old table:</p>\n\n<pre><code>number_left  = nvl(substr(number,1,instr(number,'/',1)-1),number)\nnumber_right = substr(number,1,instr(rtrim(number,'/'),'/',1)-length(substr(number,instr(number,'/'))))||substr(number,decode(instr(number,'/'),0,null,instr(number,'/')+1))\n</code></pre>\n\n<p>After some other decisions, we now need only one column again. To make sure the copied numbers get set correctly, I decided to use the number of the old table and the used conversion to identify matching rows.</p>\n\n<p>I have a mapping but cannot use it since the number_left and number_right can be copied into new rows by an application and must get the old number too. So a number of the old table can possibly copied into multible rows in the new table.</p>\n\n<p>I tried used this code:</p>\n\n<pre><code>declare\n    left_num varchar2(255 char) := '';\n    right_num varchar2(255 char) := '';\n    pos number := 0;\n    CURSOR c_number is\n        select number from old_table;\nbegin\n    for cur in c_number loop\n        left_num := nvl(substr(cur.number,1,instr(cur.number,'/',1)-1),cur.number);\n        if instr(cur.number,'/') = 0 then\n          pos := null;\n        else\n          pos := instr(cur.number,'/')+1;\n        end if;\n        right_num := substr(cur.number,1,instr(rtrim(cur.number,'/'),'/',1)-length(substr(cur.number,instr(cur.number,'/'))))||substr(cur.number, pos);\n\n        update new_table n\n            set n.number = cur.snummer\n            where n.number_left = left_num\n            and (\n              n.number_right = right_num\n              or (\n                n.number_right is null\n                and right_num is null\n              )\n            );\n    end loop;\nend;\n</code></pre>\n\n<p>In the old table I have 170.000 lines and in the new one 180.000 since there is also some new data. Peanuts.</p>\n\n<p>But here comes the strange part:\nEverything seems to work fine but after the first 14.000 rows it gets terribly slow, perhaps 3 rows in a second. And I think it becomes slower and slower.</p>\n\n<p>Any idea?</p>\n"},{"tags":["javascript","oracle","oracle11g","oracle-apex"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":143,"score":0,"question_id":12909834,"title":"Oracle Apex 4.2 Mobile Application Issues","body":"<p>After Updating my previous oracle apex installation to <code>Oracle Apex 4.2</code> i got some errors. (when developing Mobile Applications).</p>\n\n<pre><code> 1). Check Boxes doesn't display in Classic Reports.\n 2). javascript:redirect() function didn't work.\n 3). I have wrote some JavaScript functions to call when button clicked. also they didn't work.\n</code></pre>\n\n<p>In above <code>2 and 3</code> situations, i got error as <code>Uncaught ReferenceError: redirect is not defined</code>.</p>\n\n<p>PS: Currently i'm upgrading my apex 4.1 application to apex 4.2 with apex mobile template. JavaScript functions works without any errors in my previous version.</p>\n\n<p>How cloud i solve these problems ?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12909594,"title":"How to Add a Fixed Value to a Select List?","body":"<pre><code>Select Column1 From Table1;\n</code></pre>\n\n<p>Output : </p>\n\n<pre><code>x1\nx2\nx3\nx4\n</code></pre>\n\n<p>the output will BE in Column1.</p>\n\n<p>I want THE results to be : </p>\n\n<pre><code>OTHERS \nx1 \nx2 \nx3 \nx4\n</code></pre>\n\n<p>I want to add the \"OTHERS\" value to Column1.</p>\n"},{"tags":["c#",".net","oracle","caching","architecture"],"answer_count":3,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":218,"score":5,"question_id":5631838,"title":"Caching architecture advise for a specific scenario","body":"<h2>SETUP:</h2>\n\n<p>We have a .Net application that is distributed over 6 local servers each with a local database(ORACLE), 1 main server and 1 load balance machine. Requests come to the load balancer which redirects the incoming requests to one of the 6 local servers. In certain time intervals data is gathered in the main server and redistributed to the 6 local servers to be able to make decisions with the complete data. </p>\n\n<p>Each local server has a cache component that caches the incoming requests based on different parameters (Location, incoming parameters, etc). With each request a local server decides whether to go to the database (ORACLE) or get the response from the cache. However in both cases the local server has to goto the database to do 1 insert and 1 update per request. </p>\n\n<h2>PROBLEM:</h2>\n\n<p>On a peak day each local server receives 2000 requests per second and system starts slowing down (CPU: 90% ). I am trying to increase the capacity before adding another local server to the mix. After running some benchmarks the bottleneck as it always is, seems to be the inevitable 1 insert and 1 update per request to database. </p>\n\n<h2>TRIED METHODS</h2>\n\n<p>To be able decrease the frequency I have created a Windows service that sits between the DB and .NET application. It contains a pipe server and receives each insert and update from the main .NET application and saves them in a Hashtable. The new service then at certain time intervals goes to the database once to do batch inserts and updates. The point was to go to the database less frequently. Although this had a positive effect it didn't benefit to the system load as much as I expected. The most of the cpu load comes from oracle.exe as requests per second increase. </p>\n\n<p>I am trying to avoid going to the database as much as I can and the only way to avoid DB seems to be increasing the cache hit ratio other than the above mentioned solution I tried. My cache hit ratio is around 81 % percent currently. Because each local machine has its own cache I am actually missing lots of cacheable requests. When two similar requests redirects to different servers the second request cannot benefit from the cached result of the first one. </p>\n\n<p>I don't have a lot of experience in system architecture so I would appreciate any help to this problem. Any suggestions on different caching architectures or setup, or any tools are welcome. </p>\n\n<p>Thank you in advance, hopefully I made my question clear.</p>\n"},{"tags":["ruby-on-rails","oracle","sqlplus","webrick"],"answer_count":8,"favorite_count":24,"up_vote_count":46,"down_vote_count":0,"view_count":6469,"score":46,"question_id":1156759,"title":"Webrick is very slow to respond. How to speed it up?","body":"<p>I have a Rails application that I'm running on my server. When I go to a remote desktop and attempt to load the application, the server takes a good 3-4 minutes to respond with a simple HTML page. However, when I load up the page locally on the server, the page shows up in just a second. I tried pinging the server from my remote desktop and the pings are going through successful in a reasonable amount of time. </p>\n\n<p>This all seems to have started after I installed Oracle's basic client and SQLPLUS. Should I suspect Oracle? Has anyone experienced anything similar to this?</p>\n"},{"tags":["sql","database","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12908400,"title":"Like sql statement not working","body":"<pre><code>select sec_sec_nm,count(1)OVER() from nms_num_scheme \nwhere nms_sec_nm like 'CMIG4%';\n</code></pre>\n\n<p>This query runs in one Oracle DB.\nBut the same query does not return any data in other DB though data are available.</p>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":3696,"score":4,"question_id":2951858,"title":"Extract time part from TimeStamp column in ORACLE","body":"<p>Actually i' am using <code>MyTimeStampField-TRUNC(MyTimeStampField)</code> to extract the time part from an timestamp column in Oracle. </p>\n\n<pre><code>SELECT CURRENT_TIMESTAMP-TRUNC(CURRENT_TIMESTAMP) FROM DUAL\n</code></pre>\n\n<p>this return</p>\n\n<blockquote>\n  <p>+00 13:12:07.100729</p>\n</blockquote>\n\n<p>this work ok for me, to extract the time part from an timestamp field, but i' m wondering if exist a better way (may be using an built-in function of ORACLE)  to do this?</p>\n\n<p>Thanks.</p>\n"},{"tags":["oracle","oracle10g","statistics"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":45,"score":0,"question_id":12897484,"title":"Copy optimizer statistics - Oracle 10g","body":"<p>I am trying to copy statistics from one schema to another. I use the following commands but on the destination schema num_rows on the all_tables view remains unchanged. Is there any view that I can check on the destination schema that verify that statistics movement?</p>\n\n<pre><code>EXEC DBMS_STATS.create_stat_table('DBASCHEMA','STATS_TABLE');\nEXEC DBMS_STATS.export_schema_stats('APPSCHEMA','STATS_TABLE',NULL,'DBASCHEMA');\nEXEC DBMS_STATS.import_schema_stats('APPSCHEMA','STATS_TABLE',NULL,'DBASCHEMA');\nEXEC DBMS_STATS.drop_stat_table('DBASCHEMA','STATS_TABLE');\n</code></pre>\n\n<p>Thank you.</p>\n"},{"tags":["sql","oracle","stored-procedures"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12906592,"title":"running stored procedures automatic in every month","body":"<p>hi i've stored procedure with will try to delete data from specified date (sysdate - 30)\nand i  wanna trying to run Oracle Stored Procedure in every beginning of month..</p>\n\n<p>how can i do that ?</p>\n\n<p>thanks in advance, sorry for my english</p>\n"},{"tags":["c#","oracle","notifications","odp.net"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12904800,"title":"Oracle Dependency (notification) , how invasive?","body":"<p>I am planning to use Oracle dependency notification(ODP.Net) in a production environment to update several tables cached in on a SQL Server.</p>\n\n<p>My understanding is that this is not invasive in oracle database, I assume Oracle simply broadcast commits on subscribed tables and does not bother to guarantee that notifications are received by the consumers; therefore I assume it does not hold any server resource.</p>\n\n<p>Although I have tested this in test environment where CRUD operations are minimal, but in real live environment CRUDS are much more frequent. \nWill Dependency notifications hold server resources until all pending notifications are serviced by the client ?.</p>\n"},{"tags":["sql","oracle","oracle11g","avg"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":12903548,"title":"Using AVG() in Oracle SQL","body":"<p>I have a table named Student as followed:</p>\n\n<pre><code>CREATE TABLE  \"STUDENT\" \n(   \"ID\" NUMBER(*,0), \n    \"NAME\" VARCHAR2(20), \n    \"AGE\" NUMBER(*,0), \n    \"CITY\" VARCHAR2(20), \n    PRIMARY KEY (\"ID\") ENABLE\n)\n</code></pre>\n\n<p>I am trying to get all the records of the students having a larger age than the average age. This is what I tried:</p>\n\n<pre><code>SELECT *\nFROM student\nWHERE age &gt; AVG(age)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>SELECT * \nFROM student\nHAVING age &gt; AVG(age)\n</code></pre>\n\n<p>Both ways did not work! </p>\n"},{"tags":["oracle","entity-framework","c#-4.0","pagination"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12902943,"title":"Oracle paging in Entity Framework returning different sets of records than intentionally","body":"<p>I thought I understood LINQ or did I, or it could be a nasty Oracle provider bug?</p>\n\n<p>Got a very frustrating situation where I want to implement paging in a knockout app.  Using Troy Goode's PagedList Mvc library, I can see where the code was transformed from a search returning two items into a 15 items result (I had set paging to be 15 items per).  Worked perfectly fine in SQL Server 2005/2008, but not so using Oracle.DataAccess.dll v11.2.3/v4.112.3 (depending how the version number gets read).</p>\n\n<p>I did the search result in Linq like thus:</p>\n\n<pre><code>var entities = _context.Entities;\n\nvar q = !string.IsNullOrEmpty(search)\n                        ? entities\n                            .Where(a =&gt; a.PRODUCT_NUM.ToUpper().Contains(search.ToUpper())\n                                     || a.PRINT_NAME.ToUpper().Contains(search.ToUpper()))\n                        : entities;   \n\nvar result = q.OrderBy(e =&gt; e.UPDATE_DATE == null)\n                             .ThenByDescending(e =&gt; e.UPDATE_DATE)\n                             .Select(r =&gt; new EntityModel\n                             {\n                                 Id = r.ID,\n                                 Num = r.PRODUCT_NUM,\n                                 Name = r.PRINT_NAME,\n                                 City = r.City.PRINT_NAME,\n                                 State = r.City.State.PRINT_NAME,\n                                 EntityType = r.ENTITY_TYPE,\n                                 CompanyType = r.COMPANY_TYPE,\n                                 UpdateDate = r.UPDATE_DATE\n                             })\n                             .ToPagedList(pageNumber, 15);\n</code></pre>\n\n<p>Now at this point, using the Immediate Window, I can have it return 2 items, however when it goes through the paging process, it comes back with 15 items. </p>\n\n<p>First thought, am I having an caching problem or something?  But delved into the PagedList library. <a href=\"https://github.com/TroyGoode/PagedList\" rel=\"nofollow\">https://github.com/TroyGoode/PagedList</a></p>\n\n<p>Let's look at the object passed thru to the PagedList and I'll show you the number of records returned. Inside the PagedList, the IQueryable object is called superset and returns a List eventually, but check out what I'm getting when I query the list via Immediate Window.  I just figured it'd be the best way to show you...</p>\n\n<pre><code>?superset.Take(pageSize).Count()\n2\n?superset.Count()\n51114\n?superset.Skip(0).Take(pageSize).Count()\n2\n?superset.ToList().Count()\n2\n?superset.Skip(0).Take(pageSize).ToList().Count()\n15\n?superset.Take(pageSize).ToList().Count()\n15\n</code></pre>\n\n<p>What's most interesting to me is that when we do a ToList(), it returns 15 records.  Is it an Oracle ODP.NET provider problem?  I fired up Ayende's Entity Framework Provider <a href=\"http://efprof.com/\" rel=\"nofollow\">efprof.com</a> and saw the Oracle query being generated, copy-pasted it to TOAD, and it indeeds returns 2 items and not 15.</p>\n\n<p>I'm definitely missing something.</p>\n\n<p>Thanks,\n-rob</p>\n"},{"tags":["sql","oracle","select","merge"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":511,"score":0,"question_id":10847603,"title":"Merge into a select statement - Oracle","body":"<p>Is it possible to filter some of the entries to be merged on a table using select? </p>\n\n<pre><code>MERGE INTO (\n  SELECT * FROM P4PCA2_PIVOT_CA\n  WHERE ( CA_LIG_VTE_NUM_ID_PDT &lt;&gt; 0 )\n)  ta\nUSING P4DAS2_DONARTSTK tb ON (tb.NUM_ID_PDT =ta.CA_LIG_VTE_NUM_ID_PDT)    \nWHEN MATCHED THEN\n  UPDATE SET ta.COD_SECVTE_REVENT=tb.COD_SECVTE_REVENT);\n</code></pre>\n"},{"tags":["oracle","plsql","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":247,"score":3,"question_id":12017404,"title":"plsql ora -00932: inconsistent datatypes: expected - got -","body":"<p>I have a package (DATA_PKG) which contains functions to return a row of data when given a primary key value. I have found a situation where one of the DATA_PKG functions fails when called by a procedure in another package (CALLER_PKG). It throws up the following error:</p>\n\n<pre><code>ora -00932: inconsistent datatypes: expected - got -\n</code></pre>\n\n<p>When I compile CALLER with the exact same function in the package body it works.  Here is my code:</p>\n\n<pre><code>CREATE OR REPLACE PACKAGE \"DATA_PKG\" AS\n\n  FUNCTION data_function\n   (primary_i IN table_name.id%type)\n   RETURN table_name%ROWTYPE;\n\nEND DATA_PKG;\n\n/\n\nCREATE OR REPLACE PACKAGE BODY \"DATA_PKG\" AS\n\n  FUNCTION data_function\n   (primary_i IN table_name.id%type)\n   RETURN table_name%ROWTYPE AS\n   retval table_name%ROWTYPE;\n  BEGIN\n    SELECT * INTO retval FROM table_name WHERE id = primary_i;\n\n    RETURN retval;\n  END data_function;\n\nEND DATA_PKG;\n\n/\n\nCREATE OR REPLACE PACKAGE \"CALLER\" AS\n\n  PROCEDURE calling_proc\n   (key_i IN table_name.id%TYPE);\n\nEND CALLER;\n\n/\n\nCREATE OR REPLACE PACKAGE BODY \"CALLER\" AS\n\n  PROCEDURE calling_proc\n   (key_i IN table_name.id%TYPE) AS\n   table_rec table_name%rowtype;\n  BEGIN\n   table_rec := data_pkg.data_function(primary_i=&gt;key_i);\n   /*\n     do something with the returned record\n   */\n  END calling_proc;\n\nEND CALLER;\n</code></pre>\n\n<p>When caller.calling_proc is executed this code fails with ora -00932 in the way described above.</p>\n\n<p>The following code works:</p>\n\n<pre><code>CREATE OR REPLACE PACKAGE BODY \"CALLER\" AS\n\n  FUNCTION data_function\n   (primary_i IN table_name.id%type)\n   RETURN table_name%ROWTYPE AS\n   retval table_name%ROWTYPE;\n  BEGIN\n    SELECT * INTO retval FROM table_name WHERE id = primary_i;\n\n    RETURN retval;\n  END data_function;\n\n  PROCEDURE calling_proc\n   (key_i IN table_name.id%TYPE) AS\n   table_rec table_name%rowtype;\n  BEGIN\n   table_rec := data_function(primary_i=&gt;key_i);\n   /*\n     do something with the returned record\n   */\n  END calling_proc;\n\nEND CALLER;\n</code></pre>\n\n<p>Can anyone tell me why this works with, what I consider to be, a trivial change to the code?  The error suggests that the datatypes are inconsistent but I haven't changed any in my 'solution'.</p>\n\n<p>Has this happened to anyone before?  Also can anyone explain what the dashes in the error message represent?  I would expect to see a datatype named here.</p>\n"},{"tags":["sql-server","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":35,"score":-1,"question_id":12901089,"title":"apex oracle:i am writing store procedures .what is the alernate of sp_OACreate and E_OAError?","body":"<p>i am writing store procedures in apex oracle :\n    can any one tells me about alternate of sql server in oracle </p>\n\n<p>like </p>\n\n<pre><code>E_OAError = ?\n\nsp_OACreate =?\n\nsp_OAGetProperty =?\n</code></pre>\n"},{"tags":["oracle","odp.net"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12901045,"title":"OCIEnvCreate failed with return code -1 but error message text was not available with ODP.net","body":"<p>I'm trying to study ORP.net and looking over <a href=\"http://alderprogs.blogspot.com/2009/04/deploying-odpnet-with-oracle-instant.html\" rel=\"nofollow\">this</a> article. I have downloaded and copied all <code>dlls</code> in project as it's explained. But on testing step, where app is built I am get an error -<code>OCIEnvCreate failed with return code -1 but error message text was not available</code>. I am using <code>oraclexe</code> and I have Oracle client. I have given full permission for authenticated users. How can i solve this problem?</p>\n"},{"tags":["oracle","sql-server-2008","oracle10g"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12863579,"title":"vertical output","body":"<p>I have column name in the table:</p>\n\n<pre><code>select LASTNAME\n  FROM dbo.Employees\n WHERE LASTNAME = 'Smith'\n</code></pre>\n\n<p>and output of the above query is</p>\n\n<pre><code>LASTNAME\nSmith\n</code></pre>\n\n<p>I want output like</p>\n\n<pre><code>   LASTNAME\n      S\n      m\n      i\n      t\n      h\n</code></pre>\n"},{"tags":["java","oracle","exception","jdbc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":11137,"score":1,"question_id":7834157,"title":"The Network Adapter could not establish the connection when connecting with Oracle DB","body":"<p>When trying to connect with a remote Oracle database via JDBC I receive the following exception:</p>\n\n<pre><code>java.sql.SQLRecoverableException: IO-fout: The Network Adapter could not establish the connection\nat oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:419)\nat oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:536)\nat oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:228)\nat oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)\nat oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:521)\nat java.sql.DriverManager.getConnection(DriverManager.java:322)\nat java.sql.DriverManager.getConnection(DriverManager.java:358)\n</code></pre>\n\n<p>The following is my set-up:</p>\n\n<pre><code>Database: Oracle 10g Release 2 Standard Edition\n\nJDBC library: ojdbc6.jar\nJDBC driver: oracle.jdbc.driver.OracleDriver\nJDBC URL: jdbc:oracle:thin:@9.2.2.2:1521:ORCL where ORCL is database's SID\nJDBC User/pwd: Correct username / password\n</code></pre>\n\n<p>Strange about this problem is that the connection works just fine when I work from work. When I try to connect however from home via an AT&amp;T VPN connection, it doesn't work.</p>\n\n<p>I have confirmed that I can reach the IP address and have also telnetted the ip on port 1521, which works just fine. Connecting to the datasource from a local WebLogic Application Server also works alright. Furthermore, when trying to connect to the database via sqldeveloper I can also reach the database.</p>\n\n<p>I need to reach the database however from a standalone application (for testing purposes). Does anyone have an idea why this problem occurs? And whether there are alternatives for connecting to a remote Oracle Database, alternatives which sqldeveloper and weblogic perhaps use?</p>\n\n<p>Here's an excerpt of the code attempting to connect with the database:</p>\n\n<pre><code>public static void main(String args[]) throws ClassNotFoundException, SQLException {\n    Class.forName(\"oracle.jdbc.driver.OracleDriver\");\n    Connection conn = DriverManager.getConnection(\"jdbc:oracle:thin:@9.2.2.2:1521:ORCL\", \"user\", \"pwd\");\n}\n</code></pre>\n"},{"tags":["oracle","timezone"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12899578,"title":"Timezones management: is theCountry/Region notation as much reliable as Country/City one?","body":"<p>I am configuring a system composed of a Oracle 10g DBMS and various frontends. We work with timely data coming from different sources and places, having differetn timezones, and so we need to store the timezone name of each location we manage in the system.</p>\n\n<p>Our customer prefers to use the timezone notation 'Country/Region' (e.g. US/Eastern) instead of the official 'Country/City' (e.g. America/Detroit). Other collegues of mine prefer it too.</p>\n\n<p>Are they really equivalent and reliable? That is, is there any chance that choosing the former notation over the latter could lead to an erroneous timezone interpretation?</p>\n\n<p>TIA</p>\n"},{"tags":["oracle","parent-child","hierarchy","olap"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":12898369,"title":"Getting parent-child data into an Oracle level-based OLAP hierarchy","body":"<p>We have some organisational data which we need to represent in an Oracle OLAP 10g dimension, preferably populated using Warehouse Builder.</p>\n\n<p>The organisational hierarchy is listed as parent-child pairs, and is both ragged (unbalanced) and skip-level (noncovering). This would lend itself to a value-based hierarchy, but our client would rather we use ROLAP rather than MOLAP, i.e. avoid the use of an Analytical Workspace, which rules out the use of a value-based hierarchy.</p>\n\n<p>Is there a straightforward way to populate a level-based hierarchy using parent-child pair data, and if so how can it be done?</p>\n\n<p>Pointers to tutorials would be welcome, especially if they use Warehouse Builder.</p>\n"},{"tags":[".net","oracle","entity-framework","odp.net","sys-refcursor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":12806485,"title":"What's wrong with my app.config configuration for ODP.Net and REF_CURSORS?","body":"<p>I've been struggling for a while with this, im following <a href=\"http://download.oracle.com/oll/obe/EntityFrameworkOBE/EntityFrameworkOBE.htm#t3\" rel=\"nofollow\">this guide</a>:</p>\n\n<p>This are the steps I have taken so far:</p>\n\n<ol>\n<li>Create new console project</li>\n<li>Add new EntityModel</li>\n<li><p>Import \"Test\" Stored Procedure into Entity Model, sp looks like this:</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE CTACTE_WEB.TEST(P_SALIDA OUT NUMBER,\n                            P_CURSOR1 OUT sys_refcursor,\n                            P_CURSOR2 OUT sys_refcursor) IS\nBEGIN\n   P_SALIDA := 15;\n   OPEN P_CURSOR1 FOR\n   SELECT 125.72 \"DECIMAL\", 150 \"INTEGER\", 'JUST PASSING BY' \"TEXT\" FROM DUAL;\n\n   OPEN P_CURSOR2 FOR\n   SELECT 'JUST SOME TEXT' \"TEXT\" FROM DUAL;\n\nEND TEST;\n/\n</code></pre></li>\n<li>Add this to app.config:</li>\n</ol>\n\n<pre>\n&lt;add name=\"CTACTE_WEB.TEST.RefCursor.P_CURSOR1\" value=\"implicitRefCursor bindinfo='mode=Output'\" /&gt;  \n&lt;add name=\"CTACTE_WEB.TEST.RefCursorMetaData.P_CURSOR1.Column.0\" value=\"implicitRefCursor metadata='ColumnName=DECIMAL;NATIVEDATATYPE=Number;ProviderType=Decimal'\" /&gt;  \n&lt;add name=\"CTACTE_WEB.TEST.RefCursorMetaData.P_CURSOR1.Column.1\" value=\"implicitRefCursor metadata='ColumnName=INTEGER;NATIVEDATATYPE=Number;ProviderType=Int32'\" /&gt;  \n&lt;add name=\"CTACTE_WEB.TEST.RefCursorMetaData.P_CURSOR1.Column.2\" value=\"implicitRefCursor metadata='ColumnName=TEXT;NATIVEDATATYPE=Varchar2;ProviderType=Varchar2'\" /&gt;  \n</pre>\n\n<pre>\n&lt;add name=\"CTACTE_WEB.TEST.RefCursor.P_CURSOR2\" value=\"implicitRefCursor bindinfo='mode=Output'\" /&gt;\n&lt;add name=\"CTACTE_WEB.TEST.RefCursorMetaData.P_CURSOR2.Column.0\" value=\"implicitRefCursor metadata='ColumnName=TEXT;NATIVEDATATYPE=Varchar2;ProviderType=Varchar2'\" /&gt;\n</pre>\n\n<p>Then I try to import function from the Entity Model I created before but when I click obtain column information after selecting complex type nothing happens, it doesn't show the cursor like the <strong>obe</strong> tutorial.</p>\n\n<p>Any help would be appreciated.</p>\n\n<p>Thanks</p>\n\n<p>EDIT:</p>\n\n<p>So I tried again today, and it's behaving differently this time. Now when I click the Obtain Column Information button in the import function dialog, the dialog just closes and nothing else happens.</p>\n"},{"tags":["asp.net","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12897840,"title":"Different date format in development server and production server in asp.net","body":"<p>I have a gridview with 3 columns, in database the date field of the origin table isn't stored as a date format (the table is in oracle), is stored in string format, so I have my datasource in asp like this</p>\n\n<pre><code>&lt;asp:SqlDataSource ID=\"SqlDataSource1\" runat=\"server\" \n        ConflictDetection=\"CompareAllValues\"\n        ConnectionString=\"&lt;%$ ConnectionStrings:OracleXexdb %&gt;\" \n        ProviderName=\"&lt;%$ ConnectionStrings:OracleXexdb.ProviderName %&gt;\"\n\n        SelectCommand=\"select to_date(date, 'mm/dd/yyyy') as date, user, description from mytable where user is not null\"\n         filterexpression = \"user LIKE '%{0}%'\"\n         &gt;\n\n    &lt;/asp:SqlDataSource&gt;\n</code></pre>\n\n<p>As you can see in the SelectCommand, I convert the date field with the format dd/mm/yyyy (in the database the date format is mm/dd/yyyy); when I run my webpage in the asp.net development server everything is fine, I mean I see the date field with the format dd/mm/yyyy but when I put the webpage on the server I see the mm/dd/yyyy format.</p>\n\n<p>Is there anything I can do? thanks in advance</p>\n"},{"tags":["database","oracle","enums"],"answer_count":2,"favorite_count":5,"up_vote_count":11,"down_vote_count":0,"view_count":10565,"score":11,"question_id":203469,"title":"How to use enums in Oracle?","body":"<p>How do you use enums in Oracle using SQL only? (No PSQL)</p>\n\n<p>In MySQL you can do:</p>\n\n<pre><code>CREATE TABLE sizes (\n   name ENUM('small', 'medium', 'large')\n);\n</code></pre>\n\n<p>What would be a similar way to do this in Oracle?</p>\n"},{"tags":["oracle","coldfusion"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12887331,"title":"Selecting a sum from a correlated subquery - Oracle","body":"<p>I'm trying to change my code to have Oracle do all the heavy lifting. Originally, I had a function which did the following:</p>\n\n<pre><code>&lt;!--- get common data ---&gt;\n&lt;cfquery name=\"getCommon\"&gt;\n    SELECT  x, NVL(SUM(y), 0) as y\n    FROM    table_1\n    WHERE   z between #this# and #that#\n    GROUP BY x\n&lt;/cfquery&gt;\n\n&lt;!--- place common values into a struct ---&gt;\n&lt;cfset oCommon = StructNew() &gt;\n&lt;cfloop query=\"getCommon\"&gt;\n    &lt;cfset oCommon[x] = y &gt;\n&lt;/cfloop&gt;\n\n&lt;!--- get records to loop through ---&gt;\n&lt;cfquery name=\"getSomething\"&gt;\n    SELECT a, b, c/d as e from (\n        SELECT DISTINCT t2.a, \n                t2.b, \n                c,\n                sum(d)as d\n        FROM table_2 t2\n        LEFT JOIN table_3 t3\n        ON t2.a = t3.a\n        AND t2.b = t3.b\n        GROUP BY t2.a, t2.b, c\n    )\n&lt;/cfquery&gt;\n\n&lt;!--- loop through the results ---&gt;\n&lt;cfloop query=\"getSomething\"&gt;\n    &lt;!--- do an update to the target table if conditions are met ---&gt;       \n\n    &lt;!--- calculate my important new value ---&gt;\n    &lt;cfset new_value = #getSomething.e# * #oCommon[b]# &gt;\n\n    &lt;!--- finally, insert my new values into the target table ---&gt;\n    &lt;cfquery name=\"insertTarget\"&gt;\n        INSERT INTO target_table(\n                a, \n                b, \n                c\n        )\n        VALUES ( \n            #getSomething.a#,\n            #getSomething.b#,\n            #new_value# \n        )\n    &lt;/cfquery&gt;\n&lt;/cfloop&gt;\n</code></pre>\n\n<p>I've already figured out how to use Oracle's MERGE to replace the update statement in the loop. My problem is the SQL to replace the insert statement. I'd like to be able to calculate the new value inside the SQL... once I get that, I think I can figure out the MERGE/insert part fairly easily.</p>\n\n<p>So I want to do something like:</p>\n\n<pre><code>    SELECT a, b, c/d*y as e from (\n        SELECT DISTINCT t2.a, \n            t2.b, \n            c,\n            sum(d)as d,\n            (\n                SELECT y FROM (\n                    SELECT  x, NVL(SUM(y), 0) as y\n                    FROM    table_1\n                    WHERE   z between #this# and #that#\n                            AND x = t2.a\n                    GROUP BY x\n                )\n            )       \n        FROM table_2 t2\n        LEFT JOIN table_3 t3\n        ON t2.a = t3.a\n        AND t2.b = t3.b\n        GROUP BY t2.a, t2.b, c\n    )\n</code></pre>\n\n<p>which, perhaps obviously, doesn't work. Currently I get an ORA-00904: \"t2\".\"a\": Invalid Identifier, which isn't surprising.</p>\n\n<p>So, I basically need to figure out how to get the sum of y from table_1, correlated by x = table_2.a, into the original getSomething query. </p>\n\n<p>Edit: I tried this, but it's not quite right:</p>\n\n<pre><code>SELECT a, b, c/d*y as e from (\n        SELECT DISTINCT t2.a, \n            t2.b, \n            c,\n            sum(d)as d,\n             NVL(SUM(y), 0) as y     \n        FROM table_2 t2\n        LEFT JOIN table_3 t3\n        ON t2.a = t3.a\n        AND t2.b = t3.b\n        LEFT JOIN table_1 t1\n        ON t1.x = t2.a\n        AND t1.z between #this# and #that#\n        GROUP BY t2.a, t2.b, c\n    )\n</code></pre>\n"},{"tags":["java","database","oracle","scheduled-tasks","middleware"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12897558,"title":"What is better for automation: database or middleware?","body":"<p>There are many tasks in an application which need to be run at particular schedules or triggers. Examples: auto purge of obsolete data, daily data loads, trigger based updation (according to business rules) etc.</p>\n\n<p>These tasks can be hosted to run either as a scheduled job at database level OR as a polling application module in the middleware. </p>\n\n<p>Given both alternatives, I am trying to understand which is the better choice for such tasks.</p>\n\n<p>Note: assuming scheduling of such tasks in the database at non-peak times to avoid any performance impact.</p>\n\n<p>What is the best practice for such scenario.</p>\n"},{"tags":["sql","oracle"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":107,"score":-2,"question_id":12895903,"title":"I need SQL query for this data situation in Oracle","body":"<p>I have the following data:</p>\n\n<pre><code>column1        column2\n   1             aaa\n   1             bbb\n   2             ccc\n   2             ddd\n   2             eee\n</code></pre>\n\n<p>The expected output should be one row per column1 type which contains all of the column2 data, as below:</p>\n\n<pre><code>column1,   column2\n   1,      aaa|bbb\n   2,      ccc|ddd|eee\n</code></pre>\n\n<p>How can I get this output ?</p>\n\n<p>I am Using below Query to get this data.</p>\n\n<pre><code>select sub_id,listagg(pack_name, '|')  within group(order by sub_id) package_name \nfrom Recon_Droppacks_Migration group by sub_id;\n\ncol1:sub_id\ncol2:pack_name\ntable:Recon_Droppacks_Migration\n</code></pre>\n"},{"tags":["oracle","plsql"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":10068,"score":4,"question_id":4142891,"title":"How to efficiently convert text to number in Oracle PL/SQL with non-default NLS_NUMERIC_CHARACTERS?","body":"<p>I'm trying to find an efficient, generic way to convert from string to a number in PL/SQL, where the local setting for NLS_NUMERIC_CHARACTERS settings is inpredictable -- and preferable I won't touch it. The input format is the programming standard \"123.456789\", but with an unknown number of digits on each side of the decimal point.</p>\n\n<pre><code>select to_number('123.456789') from dual;\n  -- only works if nls_numeric_characters is '.,'\n\nselect to_number('123.456789', '99999.9999999999') from dual;\n  -- only works if the number of digits in the format is large enough\n  -- but I don't want to guess...\n</code></pre>\n\n<p><code>to_number</code> accepts a 3rd parameter but in that case you to specify a second parameter too, and there is no format spec for \"default\"...</p>\n\n<pre><code>select to_number('123.456789', null, 'nls_numeric_characters=''.,''') from dual;\n  -- returns null\n\nselect to_number('123.456789', '99999D9999999999', 'nls_numeric_characters=''.,''') from dual;\n  -- \"works\" with the same caveat as (2), so it's rather pointless...\n</code></pre>\n\n<p>There is another way using PL/SQL:</p>\n\n<pre><code>CREATE OR REPLACE\nFUNCTION STRING2NUMBER (p_string varchar2) RETURN NUMBER\nIS\n  v_decimal char;\nBEGIN\n  SELECT substr(VALUE, 1, 1)\n  INTO v_decimal\n  FROM NLS_SESSION_PARAMETERS\n  WHERE PARAMETER = 'NLS_NUMERIC_CHARACTERS';\n  return to_number(replace(p_string, '.', v_decimal));\nEND;\n/\n\nselect string2number('123.456789') from dual;\n</code></pre>\n\n<p>which does <em>exactly</em> what I want, but it doesn't seem efficient if you do it many, many times in a query. You cannot cache the value of v_decimal (fetch once and store in a package variable) because it doesn't know if you change your session value for NLS_NUMERIC_CHARACTERS, and then it would break, again.</p>\n\n<p>Am I overlooking something? Or am I worrying too much, and Oracle does this a lot more efficient then I'd give it credit for?</p>\n"},{"tags":["performance","oracle","jdbc"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12896752,"title":"Oracle Perfomance - JDBC Oracle Thin driver: Use parameters or not?","body":"<p>I have two decades SQL experience, but not specifically with Oracle. An 'Oracle expert' assures me that building a SQL query without parameters (like this): </p>\n\n<pre><code>SELECT t.ID, t.Name, t.Address ... FROM Table1 t WHERE t.ID = 'someID' AND t.Name = 'someName'...\n</code></pre>\n\n<p>is at least as fast as using parameters (like this)</p>\n\n<pre><code>SELECT t.ID, t.Name, t.Address ... FROM Table1 t WHERE t.ID = ? AND t.Name = ?\n</code></pre>\n\n<p>The code is executed in a loop.</p>\n\n<p>In most other databases I have experience with, using parameters increases speed. It allows the database to cache the compiled plan that matches the SQL statement. Since the SQL does not change per invocation (although the parameters do) this improves performance. The database simply binds the parameters and continues.</p>\n\n<p>The 'Oracle expert' states that this is not necessary. But obviously, Oracle needs to 'parse out' the parameters, match the remaining string to a cached execution plan, then rebind the parameters as if they were passed along as parameters in the first place.  </p>\n\n<p>Do I have the correct mental picture here? Is there something 'magical' about Oracle that it really does not make a difference how we approach our parameter passing/SQL building strategy?</p>\n\n<p>Are there thoughts about Java / JDBC / Oracle thin driver that I am not aware of that I should be aware of here?</p>\n\n<p>I am looking to either reinforce my understanding or to expand my knowledge.</p>\n\n<p>(Security concerns aside please, I understand that building SQL strings allows for SQL injection attacks, I am looking for more direct ammunition to use against the experts opinion - if it exists).</p>\n\n<p>Other details: <code>Oracle 11gR2, Java 1.6</code></p>\n"},{"tags":["java","sql","oracle","hibernate"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":12896439,"title":"Doing like search in oracle?","body":"<p>I have below code now.\nI am getting list of strings from the UI as below. the list has 3 strings as shown below.</p>\n\n<pre><code>happy%\n%hai\n%hello%\n</code></pre>\n\n<p>now i am looping through all 3 strings and getting matching strings and adding them to final list as below.</p>\n\n<pre><code>for(int i=0;i&lt;list.size;i++){\n//query to perform like search...\n}\n</code></pre>\n\n<p>My question is , instead of firing a separate query, how can i include them in a single query?</p>\n\n<p>Thanks!</p>\n"},{"tags":["sql","oracle","date","decode","date-arithmetic"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":13146,"score":4,"question_id":3619549,"title":"Comparing dates in Oracle using the decode function","body":"<p>I need to compare two dates using the Oracle decode function to see if one is <code>less than or equal</code> to the other.</p>\n\n<p>I found this article - <a href=\"http://www.techonthenet.com/oracle/functions/decode.php\" rel=\"nofollow\">http://www.techonthenet.com/oracle/functions/decode.php</a></p>\n\n<p>Which states (at the bottom) that the below decode function will return date2 if date1 > date2 :</p>\n\n<pre><code>decode((date1 - date2) - abs(date1 - date2), 0, date2, date1)\n</code></pre>\n\n<p>Would this not return date2 if date1 >= date2 ? </p>\n\n<p>Or is it just if date1 > date2?</p>\n\n<p>Is there an easier solution?</p>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":12894672,"title":"Is it possible to include dual table in a join query","body":"<p>Is it possible to include the DUAL table in a join query ? </p>\n\n<p>Can anyone give me an example which includes the <code>SYSTIMESTAMP</code> from dual table.</p>\n"},{"tags":["sql","database","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":11180817,"title":"Not sure if my SQL JOIN is returning the correct set for my assignment","body":"<p>I'm learning about JOINS and need help with the following question:</p>\n\n<blockquote>\n  <p>Display a list of all books in the BOOKS table. If a book has been\n  ordered by a customer, also list the order number and state where the\n  customer resides.</p>\n</blockquote>\n\n<p>This is what I can up with. Oracle 11g.</p>\n\n<pre><code>SELECT B.TITLE, O.ORDER#, C.STATE FROM BOOKS B\n   LEFT OUTER JOIN ORDERITEMS OI ON B.ISBN = OI.ISBN\n   LEFT OUTER JOIN ORDERS O ON O.ORDER# = OI.ORDER#\n   LEFT OUTER JOIN CUSTOMERS C ON C.CUSTOMER# = O.CUSTOMER#;\n</code></pre>\n\n<p>This query is giving me 35 rows in the result. My BOOKS table only has 14 rows. My ORDERITEMS table has 32 rows. I'm assuming the 3 extra rows are books that have never been ordered? Does what I have even make sense. I'm figuring because the books table only has 14 rows, then that's all I should return? I don't think that's possible because the same book exists on multiple orders. </p>\n"},{"tags":["sql","oracle","query","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":101,"score":1,"question_id":11196744,"title":"Get a certain number of contiguous rows","body":"<p>I've got a school project, kind of huge, and only a few days left, so here is one problem I'm stuck on, hope you can help.<br>\nI've got this table: </p>\n\n<pre><code>places(id, otherInfo)\n</code></pre>\n\n<p>Simple enough, well I need to make a SQL query or PL/SQL function to retrieve a certain number of contiguous rows. For instance if I call the function using <code>getContiguousPlaces(3);</code> On the table which has the rows:</p>\n\n<pre><code>ID\n1\n4\n5\n6\n18\n19\n</code></pre>\n\n<p>I want to get rows with <code>ID</code> 4, 5 and 6.</p>\n\n<p>How could I do that?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12896007,"title":"Oracle IN vs Exists difference?","body":"<p>I am confused with oracle <code>IN</code> and <code>EXISTS</code>. I have below requirement.</p>\n\n<p>I need to get all the employees whose names are in-</p>\n\n<pre><code>select * from emp where ename in('smith','brown','john','johnson');\n</code></pre>\n\n<p>Can i use <code>EXISTS</code> here? Also <code>IN</code> clause has 1000 limitation. Does <code>EXISTS</code> also has any such limitation?</p>\n\n<p>Thanks!</p>\n"},{"tags":["sql","oracle","oracle10g","date-arithmetic"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":12894941,"title":"Date Error Invalid Number","body":"<p>I would like to add 10 minutes to sysdate, </p>\n\n<pre><code>select to_char(SYSDATE,'dd-Mon-yyyy hh:mi:ss') + 10/1440 from dual\n</code></pre>\n\n<p>when I tried the above I got the error</p>\n\n<pre><code>ORA-01722: invalid number\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":3,"view_count":51,"score":-1,"question_id":12894216,"title":"order by usage with mutilple options","body":"<p>I have a sql query where i want to order the database on type,order and category can i have query having all these three ?</p>\n\n<pre><code>select * from t_person where name=xyz order by type,category,order\n</code></pre>\n"},{"tags":["sql","oracle","spring","stored-procedures","jdbctemplate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12837387,"title":"Fetching Complex User Defined SQL Type from a Stored Procedure in Spring, using Spring JDBCTemplate and StoredProcedure API","body":"<p>I am facing difficulty while fetching Complex Object Type from Oracle to Java. </p>\n\n<p>I am using Spring JDBCTemplate and Spring StoredProcedure. </p>\n\n<p>At the Oracle end I have used a function which return an OBJECT(UNIT)which consists of TABLE(DIVISION_TAB) of an OBJECT(DIVISION) which itself consists of a TABLE(EMPLOYEE_TAB) of another OBJECT(EMPLOYEE). </p>\n\n<p>These types are defined as below:</p>\n\n<pre><code>create or replace TYPE UNIT AS OBJECT \n( \n  UNIT_ID        NUMBER(38),\n  UNIT_NAME      VARCHAR(50),\n  DIVIVSION_LIST DIVIVSION_TAB\n)\n\ncreate or replace\nTYPE DIVISION_TAB\nAS TABLE OF DIVISION\n\ncreate or replace\nTYPE DIVISION AS OBJECT \n( \n  DIV_ID        NUMBER(38),\n  DIV_NAME      VARCHAR(50),\n  DIV_STATUS    NUMBER(38),\n  EMPLOYEE_LIST EMPLOYEE_TAB\n)\n\ncreate or replace\nTYPE EMPLOYEE_TAB\nAS TABLE OF EMPLOYEE\n\ncreate or replace\n    TYPE EMPLOYEE AS OBJECT \n    ( \n      EMP_ID        NUMBER(38),\n      EMP_NAME      VARCHAR(50),\n      EMP_STATUS    NUMBER(38),\n      EMP_SAL       NUMBER(20),\n    )\n</code></pre>\n\n<p>Function at Database level return me an SQL Object of UNIT, which I am using in the following way while retrieving it in Java.</p>\n\n<pre><code>declareParameter(new SqlOutParameter(\"UNIT\", OracleTypes.STRUCT, \"UNIT\",new SqlReturnType() {\n         public Object getTypeValue(CallableStatement callableStatement, int colIndx, int sqlType, String typeName) \n            throws SQLException {\n        Connection connection = callableStatement.getConnection();\n\n        Map&lt;String, Class&lt;?&gt;&gt; typeMap = connection.getTypeMap();\n        typeMap.put(\"UNIT\", Unit.class);\n        typeMap.put(\"DIVISION_TAB\", java.sql.Array.class);\n        typeMap.put(\"DIVISION\", Division.class);\n        typeMap.put(\"EMPLOYEE_TAB\", java.sql.Array.class);\n        typeMap.put(\"EMPLOYEE\", Employee.class);\n\n        STRUCT struct = (STRUCT)callableStatement.getObject(colIndx);\n        Object[] attr = struct.getAttributes();\n        return attr;\n        }\n    }));\n</code></pre>\n\n<p>PROBLEM:::: </p>\n\n<p>When I am debugging Object[] returned by SqlReturnType() method then I am able to fetch the details like UNIT_ID and UNIT_NAME but on the 3rd attribute i.e of type oracle.sql.ARRAY, when I am performing the following operation : </p>\n\n<pre><code>        ARRAY array = (ARRAY)attr[3];\n    Object[] objects =  (Object[])((ARRAY)attr[3]).getArray();\n</code></pre>\n\n<p>it throws SQL Internat Exception.</p>\n"},{"tags":["java","oracle","jdbc","prepared-statement","resultset"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":118,"score":4,"question_id":12890305,"title":"Oracle JDBC performance of ResultSet","body":"<p>I was using so far something like this for querying my database that was working perfectly fine :</p>\n\n<pre><code>PreparedStatement prepStmt = dbCon.prepareStatement(mySql);\nResultSet rs = prepStmt.executeQuery();\n</code></pre>\n\n<p>But then I needed to use the <code>rs.first();</code> in order to be able to iterate over my <code>rs</code> multiple times. So I use now </p>\n\n<pre><code>PreparedStatement prepStmt = dbCon.prepareStatement(mySql,ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);    \n</code></pre>\n\n<p>My question is related to the performance of the two. What do I lose if I use the second option? Will using the second option have any negative effect in the code that I have written so far?</p>\n\n<p>PS: Note that my application is a multi-user, database-intensive web application (on a Weblogic 10.3.4) that uses a back end Oracle 11g database. </p>\n\n<p>Thanks all for your attention.  </p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>My maximum reslutset size will be less than 1000 rows and 15-20 columns</p>\n"},{"tags":["java","sql-server","database","oracle","db2"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":111,"score":0,"question_id":12892778,"title":"check if table exists, using a connection object in java","body":"<p>I need to check if a table with a specific \"tablename\" exists in a database from my java program.</p>\n\n<p>The database may be of different type, viz. MS SQL Server, Oracle, DB2. I have a connection object to the database. Is there a single method that can work for all the types of databases?\nI might have to extend the java program to support more db Types, thus a single approach for all DB types would be very much helpful.</p>\n\n<p>The code that I am using.  This appears to work correctly against a SQL Server database but does not find the table in Oracle or DB2</p>\n\n<pre><code>DatabaseMetaData meta = conn.getMetaData(); \nResultSet res = meta.getTables(null, null, \"TABLE_NAME\", null); \nif(!res.next()){ \n  //table does not exist. \n} else{\n   //table exists. \n}\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":96,"score":0,"question_id":12892520,"title":"what is the difference between SUBSTRING and SUBSTR functions (SQL)?","body":"<p>before I used :</p>\n\n<pre><code>entityManagerFactory.createQuery(\"select p FROM Pays p where SUBSTRING(p.libeleClient, 0,1)\n</code></pre>\n\n<p>but when I use this query :</p>\n\n<pre><code>entityManagerFactory.createQuery(\"select p FROM Pays p where SUBSTR(p.libeleClient, 0,1)\n</code></pre>\n\n<p>I get an exception :(</p>\n\n<p>who to remplace SUBSTRING by SUBSTR ?</p>\n"},{"tags":["php","javascript","oracle","client-server"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":85,"score":2,"question_id":12893427,"title":"Can php or javascript on client link to remote server database?","body":"<p>I have access to a remote Oracle database when using Toad or SQL Developer.<br>\nThe connection is specified by a TNS record and user+password of course.</p>\n\n<p>Now I wish to have a local webpage that shows (regularly refreshed) data from the database. At first I was thinking of using php but I guess that can only be used on the server itself and I am unable to create files on the server. Of course a server page would be more suitable when there's multiple users but here there's only one.</p>\n\n<p>In fact I just want to do the same as is done by running queries from the tools mentioned, but now called from a custom webpage. I feel this should be possible because the tool has to establish the connection from client to server db also; but I don't know how to set up my local client webpage(s).</p>\n\n<p>Is this possible by applying php or javascript if that's more suitable?</p>\n"},{"tags":["oracle","node.js"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12892813,"title":"Connect node with Oracle","body":"<p>I need to connect to oracle db and fetch some data through node. \nIs there any driver available to connect node with oracle? Is this possible?</p>\n\n<p>Found many links to this question in stackoverflow, but none had the updated answers. Any idea? Please help.</p>\n"},{"tags":["performance","oracle","pagination"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":12881519,"title":"Oracle data paging optimization","body":"<pre><code>select * from (\n select t_tmp_a.*, rownum t_tmp_id from (\n select  t.*, i.counts  \n from table1 t, (select id, count(id) counts from table2 group by id) i\n where t.id=i.id and t.kindid in (0,1,3) order by t.id desc\n) t_tmp_a where rownum &lt;= 20) t_tmp_b where t_tmp_id &gt;= 11;\n</code></pre>\n\n<p>table1 and table2 have more then 2 million data per table, when execute this query need 18s , before this query execute we should calculation total count need about 7s, so it spends more than 25s， any idea to optimiza it?</p>\n"},{"tags":["android","oracle","classnotfoundexception"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12870867,"title":"Oracle MDK sample app shows error and crashes when run in Eclipse","body":"<p>I am new to Oracle database mobile server. In followed the official tutorial and documentation from <a href=\"http://docs.oracle.com/cd/E22663_01/doc.11100/e22681/sandroid.htm#BABEIFCJ\" rel=\"nofollow\">here</a> &amp; <a href=\"http://docs.oracle.com/cd/E22663_01/doc.11100/e22677/nvovw.htm#OLDEV001\" rel=\"nofollow\">here</a> . I downloaded the Oracle Mobile server from <a href=\"http://www.oracle.com/technetwork/products/database-mobile-server/downloads/index.html\" rel=\"nofollow\">here</a>.\nFollowing the tutorial ,</p>\n\n<ul>\n<li>I installed MDK</li>\n<li>Opened the sample project from the directory <code>&lt;MDK_ROOT&gt;\\Mobile\\Sdk\\samples\\Sync\\android\\simple_sync_android</code></li>\n<li>and done the Java Build Path exercises</li>\n<li>No Errors were showed up in eclipse.</li>\n<li>Then I chose <code>RUN AS -&gt; Android application</code></li>\n</ul>\n\n<p>That showed up the emulator and console showed a successful install... so far so good.</p>\n\n<pre><code>10-13 11:58:07.588: E/AndroidRuntime(654): FATAL EXCEPTION: main\n10-13 11:58:07.588: E/AndroidRuntime(654): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{tests.sync/tests.sync.MainAct}: java.lang.ClassNotFoundException: tests.sync.MainAct\n10-13 11:58:07.588: E/AndroidRuntime(654):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)\n10-13 11:58:07.588: E/AndroidRuntime(654):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)\n10-13 11:58:07.588: E/AndroidRuntime(654):  at android.app.ActivityThread.access$600(ActivityThread.java:130)\n10-13 11:58:07.588: E/AndroidRuntime(654):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)\n10-13 11:58:07.588: E/AndroidRuntime(654):  at android.os.Handler.dispatchMessage(Handler.java:99)\n10-13 11:58:07.588: E/AndroidRuntime(654):  at android.os.Looper.loop(Looper.java:137)\n10-13 11:58:07.588: E/AndroidRuntime(654):  at android.app.ActivityThread.main(ActivityThread.java:4745)\n10-13 11:58:07.588: E/AndroidRuntime(654):  at java.lang.reflect.Method.invokeNative(Native Method)\n10-13 11:58:07.588: E/AndroidRuntime(654):  at java.lang.reflect.Method.invoke(Method.java:511)\n10-13 11:58:07.588: E/AndroidRuntime(654):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)\n10-13 11:58:07.588: E/AndroidRuntime(654):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)\n10-13 11:58:07.588: E/AndroidRuntime(654):  at dalvik.system.NativeStart.main(Native Method)\n10-13 11:58:07.588: E/AndroidRuntime(654): Caused by: java.lang.ClassNotFoundException: tests.sync.MainAct\n10-13 11:58:07.588: E/AndroidRuntime(654):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)\n10-13 11:58:07.588: E/AndroidRuntime(654):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)\n10-13 11:58:07.588: E/AndroidRuntime(654):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)\n10-13 11:58:07.588: E/AndroidRuntime(654):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)\n10-13 11:58:07.588: E/AndroidRuntime(654):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)\n10-13 11:58:07.588: E/AndroidRuntime(654):  ... 11 more\n</code></pre>\n\n<p>I checked out the manifest... here it is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n      package=\"tests.sync\"\n      android:versionCode=\"1\"\n      android:versionName=\"1.0\"&gt;\n    &lt;application android:icon=\"@drawable/icon\" android:label=\"@string/app_name\"&gt;\n        &lt;activity android:name=\".MainAct\"\n                  android:label=\"@string/app_name\"\n                  android:configChanges=\"orientation\" &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;activity android:name=\".TextFileEditor\"\n                  android:label=\"@string/app_name\"\n                  android:configChanges=\"orientation\" &gt;                  \n        &lt;/activity&gt;        \n\n        &lt;service android:name=\"oracle.opensync.syncagent.android.SyncAgentService\"&gt;&lt;/service&gt;\n    &lt;/application&gt;    \n\n&lt;uses-sdk android:minSdkVersion=\"3\" /&gt;\n\n&lt;uses-permission android:name=\"android.permission.READ_PHONE_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.BATTERY_STATS\" /&gt;\n&lt;uses-permission android:name=\"android.permission.INTERNET\"&gt;&lt;/uses-permission&gt;\n\n&lt;/manifest&gt; \n</code></pre>\n\n<p>I could see all activities listed there (only two classes extends from activity, one is the launcher type). I did nothing inside the code. It is as it is given from Oracle.</p>\n\n<p>I was trying to establish a non-risky data connection with my oracle enterprise database from the android device. That leads me to Oracle database mobile server. The starting itself is stuck here. </p>\n\n<p>All sorts of suggestions and guidance are welcome.</p>\n"},{"tags":["database","oracle","sybase"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12890887,"title":"Case when Statement affect the Performance.","body":"<p>1- Do the Case when inside or outside the Where condition affect the performance  , dose it affect the Query Plan of a Single Query , dose affect the Picking of the index to be used for a single Query.  </p>\n\n<p>2- is better to to Write 2 or more Queries each handling one option of the Case when value rather than writing a one Single Query having a case when statement.  </p>\n\n<p>Example: </p>\n\n<pre><code> Select  Acc ,\n Case \n when  Calculation_type  = 'M' then Min_value \n when  Calculation_type  = 'E' then Ending_value\n Else \n Average_BLC\n END\nFrom Table \n</code></pre>\n\n<p><strong>alternative</strong> </p>\n\n<pre><code>Select Acc ,    Min_value \nFrom Table \nwhere   Calculation_type  = 'M'\nunion all \nSelect  Acc , Ending_value        \nFrom Table \nwhere  Calculation_type  = 'E'\nunion all \nSelect   Acc , Average_BLC       \nFrom Table \nwhere Calculation_type  = 'A'\n</code></pre>\n"},{"tags":["oracle","oracle10g"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1428,"score":0,"question_id":7306405,"title":"Best way to bulk insert data into Oracle database","body":"<p>I am going to create a lot of data scripts such as INSERT INTO and UPDATE</p>\n\n<p>There will be 100,000 plus records if not 1,000,000</p>\n\n<p>What is the best way to get this data into Oracle quickly?  I have already found that SQL Loader is not good for this as it does not update individual rows.</p>\n\n<p>Thanks</p>\n\n<p><strong>UPDATE:</strong> I will be writing an application to do this in C#</p>\n"},{"tags":["oracle","csv","plsql","reusable-code"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12890026,"title":"How can I write a re-usable function to return CSV output from a query?","body":"<p>In a number of places in my applications, I need to display data as CSV.</p>\n\n<p>For this, I usually loop through a cursor and build the CSV.</p>\n\n<pre><code>for j in c_get_mydata loop\n    v_CSV := v_CSV || ', ' || j.column_value;\nend loop;\n</code></pre>\n\n<p>How can I write a re-usable function that could accept a query and return a CSV string? Do you recommend having this as a separate function or is it better to process each query like above? If you recommend having it as a separate function, do you recommend that the function take the string of the query or the resultant cursor as input? </p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Clarification: I want to display a single column of data as one row, separated by commas.</p>\n\n<p>E.g.: <code>Tom, Dick, Harry, Sally</code></p>\n\n<p>I'm not looking to display multi-column data on multiple rows as:</p>\n\n<pre><code>Tom, 18, London\nDick, 22, New York\nHarry, 16, San Fransisco\nSally, 18, Paris\n</code></pre>\n\n<p><strong>EDIT 2:</strong></p>\n\n<p>I found out about the collect function:</p>\n\n<p>select collect(employee_name)<br>\nfrom employees</p>\n\n<p>This returns me a dataset, but how can I convert it into a string?</p>\n"},{"tags":["java","sql","oracle","datetime","formatting"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2466,"score":3,"question_id":5396056,"title":"Java: ResultSet getString() differs between environments","body":"<p>I have a SQL query that is returning an oracle Date object.\ne.g.:</p>\n\n<blockquote>\n  <p>SELECT sysdate FROM DUAL</p>\n</blockquote>\n\n<p>There is code currently that does the following:</p>\n\n<blockquote>\n  <p>String s = rs.getString(\"sysdate\");</p>\n</blockquote>\n\n<p>The problem is, this returns different date format on different environments (database is the same).</p>\n\n<p>One environment will return:\n<code>2011-01-31 12:59:59.0</code></p>\n\n<p>The other will return something weirder: \n<code>2011-1-31 12.15.32.0</code>  (the time is separated by decimals)</p>\n\n<p>Maybe this has something do with Locale... one machine is \"English (Canada)\" as reported by java, the other is \"English (United States)\".  </p>\n\n<p>What I'm interested in is, when the resultset transforms the date object into a string, where is that format coming from?</p>\n"},{"tags":["oracle","name-length"],"answer_count":8,"favorite_count":2,"up_vote_count":23,"down_vote_count":1,"view_count":41032,"score":22,"question_id":756558,"title":"What is the maximum length of a table name in Oracle?","body":"<p>What is the maximum length of a table name in Oracle? For bonus points, what is the maximum length of a column name?</p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":43,"score":3,"question_id":12890535,"title":"how to create function in oracle, that the result of this function we can use in ANY","body":"<pre><code>CREATE TABLE TEMP \n(\n  ID VARCHAR2(20 CHAR) \n, TXT CLOB \n) \n\n\ncreate or replace FUNCTION get_field_keys (field CLOB)\n  RETURN  type_array_of_varchar2\nIS\n  return_value  type_array_of_varchar2;\nBEGIN\n  //do some split operations(already done)\n  //return_value[] = 'a';\n  //return_value[] = 'b';\n  //return_value[] = 'c';\n  //..\n  return return_value;\nEND;\n</code></pre>\n\n<p>this function must return value, that we can do</p>\n\n<pre><code>select * from TEMP where 'a' = ANY(get_field_keys(TXT))\n</code></pre>\n\n<p>return value of function get_field_keys must be set of varchar2, I tried varray, but \"ANY\" doesn't work by this way. It must be record or something else.</p>\n"},{"tags":["c#","oracle","entity-framework","linq-to-entities"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":116,"score":2,"question_id":12888418,"title":"Generate IN statement for decimal values with Oracle","body":"<p>I'm having trouble getting LINQ to generate an IN statement.  I have a function that looks like the one below, taking as input a list of long representing the primary keys to find.  Using the contains methods ends up generating a query of composite OR statements.  We're running against an Oracle database. We're using the newest version of LINQ/EF.  QueryableDbSet is a DbSet.  The PrimaryKey property is a decimal value and is the primary integer identifier for the object in Oracle.</p>\n\n<pre><code>List&lt;long&gt; GetList(List&lt;long&gt; ids)\n{\n    List&lt;decimal&gt; dIds = ids.Select(x =&gt; (decimal)x);\n    var query = from c in QueryableDbSet\n                where dIds.Contains(c.PrimaryKey)\n                select (long)c;\n    return query.ToList();\n}\n</code></pre>\n\n<p>The above code will generate composite OR statements.  Does any one know how to get LINQ to generate the faster IN statements?  Thanks.</p>\n\n<p>EDIT:  Doing some more research it appears that Oracle actually converts IN statements to OR chains, so maybe this is an exercise in futility. Can anyone confirm or deny this?</p>\n\n<p>Also, I'm aware that the above function is completely pointless/redundant.  My real use case is more complicated and involves other conditionals in the where clause.</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12885574,"title":"Execute immediate inside FORALL statement","body":"<p>I have a procedure in which 100 tables have to be updated one by one. All tables have the same column to be updated. For improving the performance I am trying to use Execute Immediate with FORALL but I am getting a lot of compilation errors.</p>\n\n<p>Is it syntactically possible to update 100 different tables inside a FORALL statement using Execute immediate.</p>\n\n<p>My code looks something like this.  </p>\n\n<pre><code>Declare\n  TYPE u IS TABLE OF VARCHAR2(240) INDEX BY BINARY_INTEGER;\n      Table_List u;\nFOR somecursor IN (SELECT variable1, variable2 FROM SomeTable) \n    LOOP \n        BEGIN \n            Table_List(1) := 'table1'; \n            Table_List(2) := 'table2'; \n            ......\n            ......\n            table_list(100):= 'table100';\n       FORALL i IN Table_List.FIRST .. Table_List.LAST \n           EXECUTE IMMEDIATE 'UPDATE :1 SET column = :3 WHERE column = :2' \n             USING Table_List(i), somecursor.variable1, somecursor.variable2 ; \n     end loop;\n</code></pre>\n\n<p>I hope people can understand what I am trying to do through this code. If something is big time wrong please suggest me what exactly is the syntax and if it can be done in some other efficient way also. </p>\n\n<p>Thanks a lot for all the help which comes my way.</p>\n"},{"tags":["sql","database","oracle","copy","export"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":107,"score":-1,"question_id":12855541,"title":"how can i copy table and data from one database to another using oracle","body":"<p>I'm using Oracle PL/SQL developer. I have two databases live and dummy.</p>\n\n<p>I have been using the dummy database for development and now i need to add all the new tables and data into the live database without effecting the data currently stored in it.</p>\n\n<p>I also need to copy over all the new sequences and triggers.</p>\n\n<p>I've tried exporting a table but had no luck and using the SQL view i only get the SQL for the creation of the data and not the data it contains.</p>\n\n<p>I also found this SQL code</p>\n\n<pre><code>COPY FROM test@DUMMY - CREATE test -USING SELECT * FROM test;\n</code></pre>\n\n<p>But it asks me for a name and password of which I dont know and then fails after 3 attempts. It then goes on to say there is a syntax error as well.</p>\n\n<p>I'm still fairly new to using Oracle and any help would be appreciated.</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12888864,"title":"Database Update Query for Huge Records","body":"<p>We hare having around 20,80,000 records in the table.\nWe needed to add new column to it and we added that.</p>\n\n<p>Since this new column needs to be primary key and we want to update all rows with Sequence\nHere's the query</p>\n\n<pre><code>BEGIN\nFOR loop_counter IN 1 .. 211 LOOP\nupdate user_char set id = USER_CHAR__ID_SEQ.nextval where user_char.id is null and rownum&lt;100000;\ncommit;\nEND LOOP;\nend;\n</code></pre>\n\n<p>But it'w now almost 1 day completed. still the query is running. \nNote: I am not db developer/programmer. </p>\n\n<p>Is there anything wrong with this query or any other query solution (quick) to do the same job?</p>\n"},{"tags":["java","oracle","jdbc","oracle10g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":5591,"score":0,"question_id":5454865,"title":"JAVA program to display values from the oracle database","body":"<p>Simple java program to retrieve values from the Oracle database within specified dates. Already I have written the JPS and servlet page. But still the pages are not getting connected. Please help.</p>\n"},{"tags":["oracle","proxy","sun","server.xml"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12889367,"title":"user-defined variables in Sun / Oracle forward proxy server.xml","body":"<p>I am trying to define some variables in server.xml, for use in obj.conf in configuring our forward-proxy.  According to Sun/Oracle's documentation, this should be possible, however, their example using $docroot is bogus.  <a href=\"http://docs.oracle.com/cd/E19438-01/819-5494/6n7islteb/index.html\" rel=\"nofollow\">Here's an online version</a>.  </p>\n\n<p>Call me crazy, but I don't see where docroot is defined in their code snippet, nor does my browser's search function...</p>\n\n<p>Has anyone successfully done this?  I have tried defining a PROPERTY name/value but that just causes the server to fail, barfing on the XML validation.</p>\n"},{"tags":["regex","oracle","sql-loader"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12888847,"title":"REGEXP_REPLACE in ORACLE SQLLoader","body":"<p>Can someone help me replacing value in text file using regexp_replace before storing data by SqlLoader?</p>\n\n<p>My text file:</p>\n\n<pre><code>Andy     0001231231231\nBobby    0000032132132122\nCharles  0000456456456\n</code></pre>\n\n<p>and expected result in DB are:</p>\n\n<pre><code>NAME     | PHONE\n---------------------\nAndy     | 1231231231\nBobby    | 32132132122\nCharles  | 456456456\n</code></pre>\n\n<p>here is my sqlLoader file:</p>\n\n<pre><code>PHONE POSITION(10:45) NULLIF PHONE=BLANKS \"REGEXP_REPLACE(:PHONE, '^0+([^0]\\d+)$','\\1')\",\n</code></pre>\n\n<p>But, I still got the result like this:</p>\n\n<pre><code>NAME     | PHONE\n---------------------\nAndy     | 0001231231231\nBobby    | 0000032132132122\nCharles  | 0000456456456\n</code></pre>\n\n<p>What's wrong with my SqlLoader file?</p>\n\n<p>Thank you</p>\n\n<p>Faizal</p>\n"},{"tags":["oracle","query-execution-plans","explain-plan"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":85,"score":2,"question_id":12885862,"title":"Explain plan: select from 100K records table by indexed varchar2 field is not using the index","body":"<p>I agree with Tom Kyte about full table scan is not an evil <a href=\"http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:9422487749968\" rel=\"nofollow\">source</a>, but only when a table is relatively small. So, having additional index of such a table is redundant. However, a table with 100.000 records should not be considered as small but explain plan from such a table shows performed table full scan. So, I did small experiment on my laptop with Oracle installed locally: </p>\n\n<p>1) first, created my_table:</p>\n\n<pre><code>CREATE TABLE my_table(\n  \"ID\" NUMBER NOT NULL ENABLE, \n  \"INVOICE_NO\" VARCHAR2(10), \n  CONSTRAINT \"test _PK\" PRIMARY KEY (\"ID\")\n)\n</code></pre>\n\n<p>2) Then, created index for invoice_no column (because will filter using it):</p>\n\n<pre><code>CREATE INDEX \"my_table_index1\" ON my_table (invoice_no)\n</code></pre>\n\n<p>3) Then, inserted 100K records:</p>\n\n<pre><code>DECLARE\n  mod_val NUMBER;\nBEGIN\n  FOR i IN 1..100000 LOOP\n    mod_val := MOD(i,6);\n    IF (mod_val = 0) THEN\n      INSERT INTO my_table (ID, INVOICE_NO) VALUES (i, '5570-110');\n    ELSIF (mod_val = 1) THEN\n      INSERT INTO my_table (ID, INVOICE_NO) VALUES (i, '5570-111');\n    ELSIF (mod_val = 2) THEN\n      INSERT INTO my_table (ID, INVOICE_NO) VALUES (i, '5570-112');\n    ELSIF (mod_val = 3) THEN\n      INSERT INTO my_table (ID, INVOICE_NO) VALUES (i, '5570-113');\n    ELSIF (mod_val = 4) THEN\n      INSERT INTO my_table (ID, INVOICE_NO) VALUES (i, '5570-114');\n    ELSIF (mod_val = 5) THEN\n      INSERT INTO my_table (ID, INVOICE_NO) VALUES (i, '5570-115');\n    END IF; \n  END LOOP;\n  COMMIT;\nEND;\n</code></pre>\n\n<p>4) Then updated one random record (just for emphasizing the select):</p>\n\n<pre><code>BEGIN\n  UPDATE my_table SET INVOICENO = 'exception' WHERE id = 50000;\n  COMMIT;\nEND;\n</code></pre>\n\n<p>5) Then performed select with explain plan:</p>\n\n<pre><code>EXPLAIN PLAN FOR\n  SELECT * FROM my_table WHERE invoice_no = 'exception';\n</code></pre>\n\n<p>6) Then grabbed the statistics:</p>\n\n<pre><code> SELECT * FROM TABLE(dbms_xplan.display);\n</code></pre>\n\n<p>7) and got the results:</p>\n\n<pre><code>\"PLAN_TABLE_OUTPUT\"\n\"Plan hash value: 3804444429\"\n\" \"\n\"------------------------------------------------------------------------------\"\n\"| Id  | Operation         | Name     | Rows  | Bytes | Cost (%CPU)| Time     |\"\n\"------------------------------------------------------------------------------\"\n\"|   0 | SELECT STATEMENT  |          | 83256 |  1626K|   103   (1)| 00:00:02 |\"\n\"|   1 |  TABLE ACCESS FULL| MY_TABLE | 83256 |  1626K|   103   (1)| 00:00:02 |\"\n\"------------------------------------------------------------------------------\"\n\" \"\n\"Note\"\n\"-----\"\n\"   - dynamic sampling used for this statement (level=2)\"\n</code></pre>\n\n<p><strong>Conclusion</strong>: It's strange and smells \"magic\", why Oracle decided not to use the index on invoice_no field and scanned 83256 records? I agree my laptop is not overloaded with concurrent users, a table is not quite big in size (contain numbers and varchars), however, I don't like this magic and would like to know the reasons for such behaviour :)</p>\n\n<p><strong>UPDATE</strong>: I just added some dummy value (see below) to invoice_no field to all records - just to increase the size of the table, however, table full scan remains: \n        \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"</p>\n\n<p><strong>UPDATE2</strong>: I also executed analyze table but the result is the same:</p>\n\n<pre><code>ANALYZE TABLE my_table COMPUTE STATISTICS;\n</code></pre>\n\n<p><strong>UPDATE3</strong>: tried to force to use index but the result is the same (maybe wrong syntax?):</p>\n\n<pre><code>EXPLAIN PLAN FOR \n  SELECT /*+ INDEX(my_table my_table_index1) */ * FROM my_table t WHERE invoice_no = 'exception'\n</code></pre>\n\n<p><strong>UPDATE4</strong>: Finally, was able \"to tell Oracle\" to use the index - executed the new gather table stats procedure:</p>\n\n<pre><code>BEGIN\n  DBMS_STATS.GATHER_TABLE_STATS ( OWNNAME=&gt;user\n                             , TABNAME=&gt;'my_table');\nEND;\n</code></pre>\n\n<p>Here's the output of explain plan:</p>\n\n<pre><code>\"--------------------------------------------------------------------------------------\"\n\"| Id  | Operation                   | Name            | Rows  | Bytes | Cost (%CPU)| Time     |\"\n\"-----------------------------------------------------------------------------------------------\"\n\"|   0 | SELECT STATEMENT            |                 |     1 |   294 |     5   (0)| 00:00:01 |\"\n\"|   1 |  TABLE ACCESS BY INDEX ROWID| MY_TABLE        |     1 |   294 |     5   (0)| 00:00:01 |\"\n\"|*  2 |   INDEX RANGE SCAN          | my_table_index1 |     1 |       |     4   (0)| 00:00:01 |\"\n\"-----------------------------------------------------------------------------------------------\"\n\" \"\n\"Predicate Information (identified by operation id):\"\n\"---------------------------------------------------\"\n\" \"\n\"   2 - access(\"\"INVOICE_NO\"\"='exception')\"\n</code></pre>\n\n<p>So, it appears Oracle decides to use some querying approach at some time point, and is not updating it even if situation has changed. I agree with that but it's strange why it didn't selected the right approach for this test case when I just created, inserted and performed the select. Do we have always to execute DBMS_STATS.GATHER_TABLE_STATS at least at start to tell Oracle to use the best querying approach?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12831111,"title":"SQL Select Multiple Tables based on parameter","body":"<p>I have been challenged on selecting on different tables based on a parameter.\nMy question will be pretty much similar to <a href=\"http://stackoverflow.com/questions/8381744/sql-select-statement-from-both-tables\">this</a>, but here is my case:</p>\n\n<p>Say I have a parameter list from the front end [1,2,3,4]</p>\n\n<p>And based on this parameter, how can I do select on the different tables on an sql?</p>\n\n<p>In Java, I can do:</p>\n\n<pre><code>StringBuffer sql = new StringBuffer();\nif ( parameter == 1)\n    sql.append(\"Select * from TABLEA\");\nelse if  ( parameter == 2)\n    sql.append(\"Select * from TABLEB\");\nelse if  ( parameter == 3)\n    sql.append(\"Select * from TABLEC\");\nelse if  ( parameter == 4)\n    sql.append(\"Select * from TABLED\");\n</code></pre>\n\n<p>How can I do this on SQL itself?</p>\n"},{"tags":["database","oracle","hibernate","jdbc","websphere-6.1"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3078,"score":0,"question_id":1677722,"title":"Websphere Application Server Data Source","body":"<p>We are facing a strange problem with Websphere Application Server Data Source.</p>\n\n<p><strong>Environment:</strong></p>\n\n<ul>\n<li>Websphere Application Server (6.1)</li>\n<li>Linux</li>\n<li>Liferay Portal (5.2)</li>\n<li>Oracle 9i</li>\n<li>Hibernate 3.0</li>\n</ul>\n\n<p>We have datasource deployed in Application server referencing <code>ODBC14.jar</code></p>\n\n<p>Hibernate Configuration for Datasource:</p>\n\n<pre><code>&lt;property name=\"connection.datasource\"&gt;jdbc/appDB&lt;/property&gt;\n&lt;property name=\"jndi.class\"&gt;com.ibm.websphere.naming.WsnInitialContextFactory&lt;/property&gt;\n&lt;property name=\"hibernate.dialect\"&gt;org.hibernate.dialect.Oracle9Dialect&lt;/property&gt;\n&lt;property name=\"connection.autocommit\"&gt;false&lt;/property&gt;\n</code></pre>\n\n<p>We are getting following exception:</p>\n\n<blockquote>\n  <p>Caused by: java.sql.SQLException:\n  DSRA8101E: DataSource class cannot be\n  used as one-phase: ClassCastException:\n  oracle.jdbc.pool.OracleConnectionPoolDataSource\n  incompatible with\n  javax.sql.ConnectionPoolDataSource  at\n  com.ibm.ws.rsadapter.AdapterUtil.toSQLException(AdapterUtil.java:1375)\n  at\n  com.ibm.ws.rsadapter.jdbc.WSJdbcDataSource.getConnection(WSJdbcDataSource.java:462)\n  at\n  com.ibm.ws.rsadapter.jdbc.WSJdbcDataSource.getConnection(WSJdbcDataSource.java:418)\n  at\n  org.hibernate.connection.DatasourceConnectionProvider.getConnection(DatasourceConnectionProvider.java:69)\n  at\n  org.hibernate.jdbc.ConnectionManager.openConnection</p>\n</blockquote>\n\n<p>We've tried the following workaround\nCame to know <strong>classes12.jar was there in WEB-INF/lib</strong> \nWhich has ORACLE Driver which can cause Class Loading conflict with Shared/apps/lib ODBC14.jar</p>\n\n<p>So removed classes12.jar from Web application Lib and redeployed application and restarted, but got same error again. Any idea on how to resolve this?</p>\n"},{"tags":["oracle","oracle10g","database-restore"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12872181,"title":"Table restoring oracle10g","body":"<p>So I have really awkward topic in here. One table on oracle server 10g was dropped and recreated and it shouldn't be. Structure of table was changed and now I'm not able to flash it back now. Dump is from previous day but I'm not really sure how to recover just one table. Any ideas how to proceed this topic?</p>\n\n<p>Thanks a lot.\nPeter</p>\n"}]}
{"total":22203,"page":12,"pagesize":100,"questions":[{"tags":["sql","mysql","sql-server","oracle","sybase"],"answer_count":9,"favorite_count":3,"up_vote_count":66,"down_vote_count":0,"view_count":44822,"score":66,"question_id":49925,"title":"What is the difference between UNION and UNION ALL","body":"<p>What is the difference between UNION and UNION ALL.</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1259,"score":0,"question_id":1288790,"title":"Oracle 11g connection throws mysterious exception","body":"<p>Our application is based on Oracle 11g database. Its drivers are already installed but application throws an error on runtime.</p>\n\n<blockquote>\n  <p>\"AppliMSP.ADOcommands.GetConnected<br>\n  Error while connecting,<br>\n  Provider cannot be found, It may not be properly installed.\"</p>\n</blockquote>\n\n<p>I am using OraOLEDB.oracle provider. This provider works properly on ANother module (Administration) \nof this application but as I want to connect as client with same name and password I get above error.</p>\n\n<p>I have tried with MSDAORA(Oracle) but I don't get any success.\nCan anyone help me?</p>\n"},{"tags":["oracle","java-ee","weblogic11g"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":4167,"score":3,"question_id":1646174,"title":"Any decent weblogic tutorial?","body":"<p>We are migrating an application from Tomcat to WebLogic. There are many things we just don't know about. Is there any decent tutorial out there?</p>\n\n<p>We know about <a href=\"http://download.oracle.com/docs/cd/E12839%5F01/index.htm\" rel=\"nofollow\">this</a> but I'd like to read about experiencies, and/or processed information.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["database","oracle","hosting"],"answer_count":4,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":4141,"score":5,"question_id":4299269,"title":"Where can i find (free) Oracle database hosting?","body":"<p>I'm a student, and I have a little project to do, which require an Oracle database. Application must be available on the web. Do you know any free or cheap hosting that offers Oracle database?</p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12882134,"title":"updating a column using an explicit cursor and loop to make unique values","body":"<p>I'm new at coding and I am trying to update the table below using a cursor and a loop (and not relying on any row number functions).  My table is Cars with id and model as the columns.  The problem is that I am trying to update the id column which has duplicate numbers for instance the table looks something like this. I want to make ID a primary key. </p>\n\n<pre><code>ID    MODEL \n1    Civic \n1    Accord \n3    Buick \n3    Corolla \n3    Prius \n3    Saab \n</code></pre>\n\n<p>I tried below, but it just changes all the values.  What am I doing wrong?  What is this loop doing? </p>\n\n<pre><code>DECLARE \n    ids number; \n    models varchar2 (50); \n    previous_id number := 0; \n    new_id number :=0; \n    cursor getRow is select * from CARS; \n\nBEGIN  \n    open getRow; \n    fetch getRow into ids, models; \n    previous_id := ids; \n    loop \n        fetch getRow into ids, models; \n        if getRow%found \n        then  \n            new id := previous_id +1; \n            if ids = previous_id \n            then  \n                  update CARS \n                set ID = new_id \n                where ID = previous_id; \n            else  \n                previous_id := ids;     \n            end if; \n            else \n                exit; \n        end if; \n    end loop; \n    close getRow; \nEND;\n</code></pre>\n"},{"tags":["oracle","r"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":107,"score":0,"question_id":12354874,"title":"ROracle installation fails on R 2.15.1 using Rtools 2.15","body":"<p>I'm trying to compile the ROracle package version 1.1-4 under Windows using R 2.15.1 and Rtools 2.15</p>\n\n<pre><code>install.packages('ROracle',type='source')\n</code></pre>\n\n<p>but it seems that <code>ocimingw.c</code> is missing (see output below). I get the same error message using <code>R CMD INSTALL --build</code>.</p>\n\n<p><strong>edit 2012-09-11</strong>: The problem is apparently specific to 1.1-4, as I managed to build and install 1.1-1 normally.</p>\n\n<p>Any idea what the solution might be?</p>\n\n<pre><code>trying URL 'http://stat.ethz.ch/CRAN/src/contrib/ROracle_1.1-4.tar.gz'\nContent type 'application/x-gzip' length 156924 bytes (153 Kb)\nopened URL\ndownloaded 153 Kb\n\n* installing *source* package 'ROracle' ...\n** package 'ROracle' successfully unpacked and MD5 sums checked\nlooking for Instant Client c:/instantclient/x64/instantclient_11_2\ncygwin warning:\n  MS-DOS style path detected: C:\\instantclient\\x64\\instantclient_11_2\n  Preferred POSIX equivalent is: /cygdrive/c/instantclient/x64/instantclient_11_2\n  CYGWIN environment variable option \"nodosfilewarning\" turns off this warning.\n  Consult the user's guide for more details about POSIX paths:\n    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames\nfound Instant Client C:\\instantclient\\x64\\instantclient_11_2\nfound Instant Client SDK c:/instantclient/x64/instantclient_11_2/sdk/include\ngenerating ocimingw.lib from ocimingw.def\nx86_64-w64-mingw32-dlltool: not found\ncopying from c:/instantclient/x64/instantclient_11_2/sdk/include\n** libs\nWarning: this package has a non-empty 'configure.win' file,\nso building only the main architecture\n\ncygwin warning:\n  MS-DOS style path detected: C:/R/R-215~1.1/etc/x64/Makeconf\n  Preferred POSIX equivalent is: /cygdrive/c/R/R-215~1.1/etc/x64/Makeconf\n  CYGWIN environment variable option \"nodosfilewarning\" turns off this warning.\n  Consult the user's guide for more details about POSIX paths:\n    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames\ngcc -m64 -I\"C:/R/R-215~1.1/include\" -DNDEBUG -I./oci    -I\"d:/RCompile/CRANpkg/extralibs64/local/include\"     -O2 -Wall  -std=gnu99 -mtune=core2 -c rodbi.c -o rodbi.o\nrodbi.c: In function 'rociResExec':\nrodbi.c:1169:14: warning: unused variable 'drv' [-Wunused-variable]\nrodbi.c: In function 'rociResFetch':\nrodbi.c:1187:16: warning: unused variable 'drv' [-Wunused-variable]\nrodbi.c: In function 'rociResInfo':\nrodbi.c:1256:16: warning: unused variable 'drv' [-Wunused-variable]\nrodbi.c: In function 'rociResTerm':\nrodbi.c:1323:14: warning: unused variable 'drv' [-Wunused-variable]\nrodbi.c: In function 'rodbiCheck':\nrodbi.c:2348:25: warning: pointer targets in passing argument 1 of 'snprintf' differ in signedness [-Wpointer-sign]\nc:\\rtools\\gcc-4.6.3\\bin\\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/include/stdio.h:505:15: note: expected 'char * restrict' but argument is of type 'text *'\nrodbi.c: In function 'rawToStrhexCall':\nrodbi.c:2573:7: warning: pointer targets in passing argument 1 of 'Rf_mkChar' differ in signedness [-Wpointer-sign]\nC:/R/R-215~1.1/include/Rinternals.h:628:6: note: expected 'const char *' but argument is of type 'unsigned char *'\nrodbi.c:2557:26: warning: unused variable 'seglen' [-Wunused-variable]\nrodbi.c: In function 'rociResInit':\nrodbi.c:1121:3: warning: 'qry_encoding' may be used uninitialized in this function [-Wuninitialized]\ngcc -m64 -I\"C:/R/R-215~1.1/include\" -DNDEBUG -I./oci    -I\"d:/RCompile/CRANpkg/extralibs64/local/include\"     -O2 -Wall  -std=gnu99 -mtune=core2 -c rooci.c -o rooci.o\nIn file included from C:/R/R-215~1.1/include/R.h:44:0,\n                 from rodbi.h:37,\n                 from rooci.c:47:\nC:/R/R-215~1.1/include/R_ext/RS.h:43:0: warning: \"ERROR\" redefined [enabled by default]\nc:\\rtools\\gcc-4.6.3\\bin\\../lib/gcc/i686-w64-mingw32/4.6.3/../../../../i686-w64-mingw32/include/wingdi.h:70:0: note: this is the location of the previous definition\nrooci.c: In function 'roociInitializeRes':\nrooci.c:620:32: warning: 'cnvcid' may be used uninitialized in this function [-Wuninitialized]\ngcc -m64 -shared -s -static-libgcc -o ROracle.dll tmp.def rodbi.o rooci.o -L. ocimingw.lib -Ld:/RCompile/CRANpkg/extralibs64/local/lib/x64 -Ld:/RCompile/CRANpkg/extralibs64/local/lib -LC:/R/R-215~1.1/bin/x64 -lR\ngcc.exe: error: ocimingw.lib: No such file or directory\nERROR: compilation failed for package 'ROracle'\n* removing 'C:/R/R-2.15.1/library/ROracle'\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":98,"score":1,"question_id":11254852,"title":"How can I fix my Oracle 11G SQL query?","body":"<p>I can't figure out what I am doing wrong with my query here.</p>\n\n<pre><code>SELECT ORDER#, SUM(PAIDEACH * QUANTITY) AS TOTAL \n    FROM ORDERITEMS \n    WHERE TOTAL &gt; 39.9 \n    GROUP BY ORDER# \n    ORDER BY TOTAL DESC; \n</code></pre>\n\n<p>This is the error I keep getting: </p>\n\n<pre><code>\"TOTAL\": invalid identifier\n</code></pre>\n"},{"tags":["sql","sql-server","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":96,"score":2,"question_id":12873737,"title":"how to overcome the limitation of IN cause in sql query","body":"<p>I have written an sql query like :</p>\n\n<pre><code>select field1, field2 from table_name;\n</code></pre>\n\n<p>Now , the problem is this query will return 1 million records/ or more than 1 lakh records.\nI have a directory in which i have input files (around 20,000 to 50,000 records) that contain field1 . This is the main data I am concerned with.\nUsing perl script, I am extracting  from the directory.\nBut , if I write a query like :</p>\n\n<pre><code>select field1 , field2 from table_name \nwhere field1 in (need to write a query to take field1 from directory);\n</code></pre>\n\n<p>If i use IN cause then it has limitation of processing 1000 entries only, then how should I overcome the limitation of IN cause ?\nPlease help!</p>\n"},{"tags":["regex","oracle","peoplesoft"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12836761,"title":"Can we activate the regexp_like operator in PeopleSoft Query Manager (4-tier)","body":"<p>As I am just learning more and more about regular expressions in programming languages, and especially all the performance benefits we can take out of this for string manipulations, I see that of course Oracle supports regular expressions.</p>\n\n<p>But on PeopleSoft (4-tier), within the \"Query Manager\", we can only select the \"Like\" operator and of course, each time we use it, the query performances drop down dramatically (logical)... </p>\n\n<p><strong>Does anyone know if this is something which can be activated as a parameter or it does not exist at all as considered too complex for a \"normal\" end user?</strong></p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":11270237,"title":"How select other columns from Oracle 11G query?","body":"<p>I have this query which groups the results by ORDER#.</p>\n\n<pre><code>SELECT ORDER#, MAX(SHIPDATE - ORDERDATE) DELAYDAYS FROM ORDERS GROUP BY ORDER#;\n</code></pre>\n\n<p>My goal is to return the single ORDER# that has the longest shipping delay. Not the entire set. How can I accomplish this?</p>\n\n<p>Tried this too. Does not work. This gives me the single column, but not the ORDER#.</p>\n\n<pre><code>SELECT MAX(X.DELAYDAYS) FROM\n   (SELECT ORDER#, MAX(SHIPDATE - ORDERDATE) DELAYDAYS \n    FROM ORDERS GROUP BY ORDER#) X;\n</code></pre>\n"},{"tags":["sql","oracle","ora-00907"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":2263,"score":4,"question_id":706503,"title":"Why does Oracle think I'm missing a right parenthesis?","body":"<p>In Oracle 10i, I'm running the following command:</p>\n\n<pre><code>ALTER TABLE jnrvwchnglst ADD\n     ( jnrvwchnglst_userid NUMBER(10) NOT NULL DEFAULT 1 )\n</code></pre>\n\n<p>Yes <code>jnrvwchnglst</code> is an existing table and no <code>jnrvwchnglst_userid</code> is not an existing column.</p>\n\n<p>The Oracle error message is:</p>\n\n<pre><code>ORA-00907: missing right parenthesis\n</code></pre>\n\n<p>What's wrong with this query and why does Oracle think I'm missing a parenthesis?</p>\n"},{"tags":["c++","c","oracle","analyzer"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12879161,"title":"How to open and load oracle fmb file with C/C++?","body":"<p>I need to know is there any way to open and analyze an oracle form module (fmb file format) in C/C++ and get a list of all used tables, views, blocks,... in that module file.</p>\n\n<p>give me a sample please, thanks in advance.</p>\n"},{"tags":["sql","oracle","oracle10g"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":137,"score":1,"question_id":1275930,"title":"Finding Duplicate Entries in a table","body":"<p>I have a table with the following fields in Oracle 10g.</p>\n\n<p>TABLE_1</p>\n\n<p>account_no | tracking_id | trans_amount</p>\n\n<p>Each account_no can have multiple tracking Id's and transaction amounts.</p>\n\n<p>How do i query out the duplicate entries of account_no where tracking lies between 1 and 1000, and the corresponding trans_amount ?</p>\n\n<p>Many thanks in advance for your help,</p>\n\n<p>novice.</p>\n"},{"tags":["java","oracle","hibernate","hsqldb"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":97,"score":1,"question_id":12879649,"title":"How to detect Database from Hibernate user type?","body":"<p>Is there a way to deterministically determine the database that is being used from a user type ? My user type needs to pass different object to preparedStatement.setObject depending on the database (whether it is HSQL or Oracle). I was planning to use DataBaseMetaData from preparedStatement  as </p>\n\n<pre><code>preparedStatement.getConnection().getMetaData().getDatabaseProductName()\n</code></pre>\n\n<p>but I'm not sure if there is a well defined set of strings that I can compare the above with to determine the database.</p>\n\n<p>The larger problem that I'm trying to solve is , we use DATE column in Oracle, whereas hibernate maps JodaDateTime to TIMESTAMP(which is the only type that can hold date and time). So Oracle promotes DATE value in the DB to timestamp before performing date comparisons. This results in poor performance because database indexes are skipped. The option of changing column type from DATE to TIMESTAMP is ruled out because it requires more space and our application does not require precision beyond seconds. Thus I plan to write a userType that converts DateTime to oracle.sql.DATE and set the parameter in preparedStatement so that there is no index mismatch. (snippet shown below):</p>\n\n<pre><code>    public void nullSafeSet(PreparedStatement preparedStatement, Object value, int index) throws HibernateException, SQLException {\n    if (value == null) {\n        Hibernate.TIMESTAMP.nullSafeSet(preparedStatement, null, index);\n    } else {\n        preparedStatement.setObject(index, new oracle.sql.DATE(new Timestamp(((DateTime) value).getMillis())), Types.DATE);\n    }\n}\n</code></pre>\n\n<p>The problem with the above approach is that , If I use a different database for unit testing (HSQLDB), it won't work because HSQLDialect does not understand \"oracle.sql.DATE\". This is where I need to know the DB from userType and set different objects in preparedStatement. </p>\n\n<p>So, I would like to know </p>\n\n<ul>\n<li>If there is a better way to solve the DATE-TIMESTAMP mismatch problem</li>\n<li>If not, how to identify DB from a usertype correctly.</li>\n</ul>\n\n<p>Thanks.</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12879678,"title":"subqueries in Oracle SQL","body":"<p>I want to use subqueries in SQL in Oracle Express for getting the salary_id of the highest salaries that the employees get in their departments. The tables that I have are:</p>\n\n<pre><code> Employee\n Emp_id  Salary  Dept_id\n 100     1000    a101\n 200     2000    a101\n 300     2500    b102\n\n Salary\n Grade   LowSal HiSal\n 1       500    900\n 2       901    2000\n 3       2001   3000\n</code></pre>\n\n<p>First I extracted the maximum salary in each department with this query:</p>\n\n<pre><code>SELECT Max(e.SALARY) \nFROM   EMPLOYEE e \nGROUP  BY e.DEPT_ID\n</code></pre>\n\n<p>The results are two records: 2000 and 2500</p>\n\n<p>The next step is to get the grades of those salaries, so I use the following:</p>\n\n<pre><code>SELECT GRADE \nFROM   SALARY \nWHERE  (SELECT Max(e.SALARY) \n        FROM   EMPLOYEE e \n        GROUP  BY e.DEPT_ID) BETWEEN LOWSAL AND HIGHSAL; \n</code></pre>\n\n<p>The error that I received is: ORA-01427: single-row sub-query returns more than one row </p>\n\n<p>How I can do that SQL command with sub-queries in SQL?</p>\n"},{"tags":["sql","oracle","top-n"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12874989,"title":"Find the most expensive order","body":"<p>I'm trying to find the most expensive order within my table, and I've achieved this, but I'd like to know how to just return this one particular row. Right now it turns all rows with the most expensive order at the top. I'm not quite sure how to return just the most expensive order. I've grouped the orders by the order number (<code>order_numb</code>). I've tried using <code>IN</code> and a self join but I can't seem to get it to work.</p>\n\n<h3>My table</h3>\n\n<p><img src=\"http://i.stack.imgur.com/3rq6M.png\" alt=\"enter image description here\"></p>\n\n<h3>My current query that returns the correct result, just it returns all rows</h3>\n\n<pre><code>SELECT order_numb, sum(cost_each) as totalSum\nFROM order_lines \nGROUP BY order_numb\nORDER BY totalSum DESC\n</code></pre>\n\n<h3>What I'm trying to achieve</h3>\n\n<p>I'm trying to retrieve the most expensive order by itself. </p>\n\n<p>I'm using Oracle as my database.</p>\n"},{"tags":["database","oracle","multiple","lookup"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12878998,"title":"Querying table for multiple combinations and default values","body":"<p>I have a table like</p>\n\n<pre><code>City    POSTAGE   PRICE**                   \n\nHOUSTON   DEFAULT    20\nDEFAULT   AIR        14\nDEFAULT   GROUND     30\nDEFAULT   DEFAULT    40\n</code></pre>\n\n<p>Now i want to query for price on this table with a combination like 'CHICAGO,GROUND'\nwhich should check if the perfect combination exists, else i should substitute DEFAULT and search for the value..</p>\n\n<p>example,\nHOUSTON,AIR should return 14\nHOUSTON,GROUND should return 20<br>\nHOUSTON,FEDEX should return 20\nCHICAGO,FEDEX should return 40</p>\n\n<p>Is there a way to achieve this instead of writing multiple queries ..</p>\n\n<p>thank you!</p>\n"},{"tags":["mysql","sql-server","oracle","sqlite","postgresql"],"answer_count":5,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":156,"score":5,"question_id":10418218,"title":"SQL row return order","body":"<p>I have only used SQL rarely until recently when I began using it daily. I notice that if no \"order by\" clause is used:</p>\n\n<ol>\n<li>When selecting part of a table the rows returned appear to be in the same order as they appear if I select the whole table</li>\n<li>The order of rows returned by a selecting from a join seemes to be determined by the left most member of a join. </li>\n</ol>\n\n<p>Is this behaviour a standard thing one can count on in the most common databases (MySql, Oracle, PostgreSQL, Sqlite, Sql Server)? (I don't really even know whether one can truly count on it in sqlite).  How strictly is it honored if so (e.g. if one uses \"group by\" would the individual groups each have that ordering)?</p>\n"},{"tags":["oracle","plsql","oracle10g","dbms-job"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":2723,"score":2,"question_id":5586051,"title":"Script to disable all jobs in Oracle (DBMS_JOB package)?","body":"<p>I'm looking for a script which disables all the jobs.  Right now I highlight them all in Toad, click the take offline button and then commit changes.  There has to be a way to do this in PL/SQL.</p>\n"},{"tags":["sql","xml","oracle","hierarchical"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":97,"score":2,"question_id":12875845,"title":"Oracle SQL: How to get xml from hierarchical table","body":"<pre><code>id  parent_id  Name         Text\n0 ...........  body_text   \n\n1 ..........0  text....... . something\n\n2 ..........0  blank       \n\n3 ..........2  text ........ something\n\n4 ...........  info        \n\n5 ..........4  text ........ something\n</code></pre>\n\n<p>Who knows how to get the following xml format from the previous hierarchical table:</p>\n\n<pre><code>&lt;?xml version \".................\"?&gt;\n&lt;body_text&gt;\n&lt;text&gt;something&lt;/text&gt;\n&lt;blank&gt;\n    &lt;text&gt;something&lt;/text&gt;\n&lt;/blank&gt;\n&lt;/body_text&gt;\n&lt;info&gt;\n &lt;text&gt;some&lt;/text&gt;\n&lt;/info&gt;\n</code></pre>\n\n<p>The only know how to do part of this is and now that isn't working either:</p>\n\n<pre><code>select DBMS_XMLGEN.getXML(DBMS_XMLGEN.newcontextfromhierarchy('SELECT level,\nXMLElement(evalname(Name), text))\nfrom my_table t\nSTART WITH id_parent is null\nCONNECT BY PRIOR id = parent_id'))\n FROM dual\n</code></pre>\n"},{"tags":["oracle","jpa-2.0","versioning"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12870588,"title":"JPA-2.0 keeping all versions in DB / history","body":"<p>I am using JPA 2, eclipselink, Oracle DB. </p>\n\n<p>Is there possibility to keep all versions in DB (history)?</p>\n\n<p>Is there eclipselink/toplink switch, or should I look for special Oracle driver?</p>\n\n<p>Simply said every SQL update/delete will be SQL insert.</p>\n\n<p>Thank you.</p>\n"},{"tags":["c#",".net","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4835,"score":0,"question_id":4668364,"title":"how to fill the dataset with C# from oracle database","body":"<p>i am trying to fill the oracle dataset== NULL;</p>\n\n<p>i am using it with a .net framework 2.0 with C# </p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":108,"score":1,"question_id":12867660,"title":"SQL to retrieve single row","body":"<p>I have below data, I want to retrieve as single row.</p>\n\n<p>Customer </p>\n\n<pre><code>customer id    customer name  order id\n\n1               Jhon           1\n\n2                philips       1\n\nOrder id   order name  order status   order status time\n----------------------------------------------------------------    \n   1       iphone      delivered      20121011 12:10:01\n   1       iphone      cancelled      20121011 14:30:00  \n</code></pre>\n\n<p>Based on above data, I have to display as below</p>\n\n<pre><code>order id  order name  order status(D)  order status(C) order status(c) time  order status(D) time\n------------------------------------------------------------------------------------------------    \n   1      iphone      delivered        cancelled       20121011 14:30:00     20121011 12:10:01\n</code></pre>\n\n<p>Please help me to write this SQL</p>\n\n<p>Regards,</p>\n\n<p>Chaitu</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12862207,"title":"How to build a dynamic query in oracle?","body":"<p>I need to read fields from different tables. The name of the table is written in the column of another one.</p>\n\n<p>Ie: <strong>ENI_FLUSSI_HUB</strong> has got a <strong>FLH_TOUT_NAME</strong> column. I want to read field1 and field2 from the table specified in <strong>FLH_TOUT_NAME</strong> </p>\n\n<p>I thought to use a pipelined function. But I must know witch fields the query would return..</p>\n\n<p><strong>I need to solve the problem using an PL/SQL function that I can call from within an SQL statement.</strong></p>\n"},{"tags":["oracle","oracle-soa"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":11665903,"title":"oepe installation for windows 7 64bit","body":"<p>I have already Oracle SOA Suite installed on Windows 7 including JDeveloper for the last two months and working fine. All the installations were generic downloads.\nHowever I want to install now OSB. I downloaded and installed the following:</p>\n\n<ul>\n<li>jdk-6u33-windows-x64  </li>\n<li>oepe-helios-all-in-one-11.1.1.6.1.201010012100-win32-x86_64  </li>\n<li>ofm_osb_generic_11.1.1.4.0_disk1_1of1.zip</li>\n</ul>\n\n<p>I installed the oepe (ie Helios 3.6.1) inside the C:\\Oracle\\Middleware\\home_11gR1 and then installed the osb_generic pointing to jdk1.6 and went ok, except when using the IDE Eclipse Helios and trying to create an Oracle Service Bus Configuration Project from the wizard I obtain the following error:</p>\n\n<pre><code>The selected wizard could not be started.  \nPlug-in \"com.bea.alsb.ui\" was unable to instantiate  \n                              class \"com.bea.alsb.ui.wizards.NewALSBContainerWizard\".  \ncom/bea/alsb/core/containers/exceptions/ContainerException  \n</code></pre>\n\n<p>I ran out of ideas, does anyone have a solution for this issue?.. Thanks</p>\n"},{"tags":["sql","oracle","odbc","maxdate","ms-query"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12865617,"title":"Selecting and Importing Data Correlating with Most Recent Date with Microsoft Query SQL","body":"<p>I'm trying to modify a current SQL code in Microsoft Query I created to return the most recent production test conducted on a well. Right now the query below returns a list of tests for any well from [Date Parameter=01/01/08] to now for [Well Parameter= Well#1]. Also, to get all the data I need, I must join two tables, one with well names, one with production data, and both contain a unique well # which I join.</p>\n\n<pre><code>SELECT \nP.TEST_DT, P.BOPD, P.BWPD, P.MCFD\nFROM \nWELL_TABLE C, PRODTEST_TABLE P\nWHERE \nC.UNIQUE_WELL_ID = P.UNIQUE_WELL_ID \nAND ((C.WELL_NAME=?) \nAND (P.TEST_DT&gt;=?))\nORDER BY P.TEST_DT DESC\n</code></pre>\n\n<p>Right now my table looks as such:</p>\n\n<pre>TEST_DT    P.BOPD  P.BWPD  P.MCFD\n9/23/2012  23      125    0\n8/23/2010  21      137    0\n7/15/2009  29      123    0</pre>\n\n<p>I would like to just return the most recent test:</p>\n\n<pre>TEST_DT    P.BOPD  P.BWPD  P.MCFD\n9/23/2012  23      125     0</pre>\n\n<p>Any help would be greatly appreciated...\nI've tried working with max(TEST_DT) but have been unsuccessful.</p>\n"},{"tags":["oracle","vb6","ado","open","recordset"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12867001,"title":"ADO Recordset Open method generates Oracle internal queries in VB6","body":"<p>The next sql sentence is executed via ADO.Recordset Open method (VB6) to an Oracle database:</p>\n\n<pre><code>SELECT ID FROM schema.RqPackages WHERE ID = 28\n</code></pre>\n\n<p>along with the next options:</p>\n\n<pre><code>CursorType = adOpenForwardOnly\n\nLockType = adLockBatchOptimistic\n\nOptions = 0\n</code></pre>\n\n<p>so if the Recordset returned is not empty, then we know the package (\"ID\") is valid.</p>\n\n<p>The application executes this sentence as many times as there are packages (\"ID\") to validate, which in turn generate an equal number of Oracle internal queries like the following:</p>\n\n<pre><code>SELECT\nto_char(NULL),\nac.owner,\nac.table_name,\nacc.column_name,\nacc.position,\nac.constraint_name \nFROM\nall_constraints ac,\nall_cons_columns acc \nWHERE\nac.owner=acc.owner AND\nac.constraint_type='P' AND\nac.constraint_name=acc.constraint_name AND\nac.owner LIKE 'SCHEMA' ESCAPE '\\' AND\nac.table_name LIKE 'RQPACKAGES' ESCAPE '\\'\n</code></pre>\n\n<p>('SCHEMA' here is an alias)... the issue is that these Oracle queries are being executed thousands of times, which is hampering performance. I wonder if there is an alternative for Recordset.Open, or if the options we are executing this sentence with could be generating these queries. We are looking forward to keep these additional Oracle queries to a minimum.</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12866623,"title":"Oracle Database Re-install Data Pump Utility on 11gR2 DB Issue","body":"<p>I have encountered an issue at a production db while doing a simple <code>expdp</code> command as following command and error (I have been doing that no problem until suddenly one day with the error),</p>\n\n<pre><code>--command\nexpdp abcuser/mypwd directory=ABC_DIR dumpfile=abctest_20121005.dmp tables=abc_test\n--error\n\nORA-31626: job does not exist\nORA-31638: cannot attach to job SYS_EXPORT_TABLE_01 for user ABCUSER\nORA-06512: at \"SYS.DBMS_SYS_ERROR\", line 95\nORA-06512: at \"SYS.KUPV$FT_INT\", line 428\nORA-39077: unable to subscribe agent KUPC$A_1_203618668826000 to queue \"KUPC$C_1_20121005203618\"\nORA-06512: at \"SYS.DBMS_SYS_ERROR\", line 95\nORA-06512: at \"SYS.KUPC$QUE_INT\", line 250\nORA-06502: PL/SQL: numeric or value error: character string buffer too small\n</code></pre>\n\n<p>I did some research which indicated there is a bug as 6471833, so the data pump utility needs to be re-installed, but above bug meta link only indicated solution for 10g db, and meta link 1327004.1 also using 10g DB as example for solution to re-install data pump utility as following,</p>\n\n<pre><code>Solution\n++ Reinstall the DataPump utility:\nconnect / as sysdba\nspool output.txt\nshow user\n-- re-install DataPump types and views\n@$ORACLE_HOME\\rdbms\\admin\\catdph.sql\n-- re-install tde_library packages\n@$ORACLE_HOME\\rdbms\\admin\\prvtdtde.plb\n-- re-install DataPump packages\n@$ORACLE_HOME\\rdbms\\admin\\catdpb.sql\n-- re-install DBMS DataPump objects\n@$ORACLE_HOME\\rdbms\\admin\\dbmspump.sql\n-- recompile invalid objects\n@$ORACLE_HOME\\rdbms\\admin\\utlrp.sql\nspool off\n</code></pre>\n\n<p>My question is, can above meta link note 1327004.1 re-install data pump utility solution be used for 11gR2 DB?</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12865262,"title":"oracle disconnect behaviour","body":"<p>What will happen if connection is lost during long operation?</p>\n\n<p>For example there is a select statement that takes several minutes to complete and connection is lost during its execution. Will it continue execution or will be stopped?</p>\n\n<p>For a delete statement: will it be executed to its finish or interrupted when client disconnects? What will happen to the data: will it be committed or rolled back, how soon?</p>\n\n<p>For a ddl operation: I have a long running <code>alter table tbl_name move</code> operation, what will happen to it when client loses connection? Will continue execution or will be interrupted?</p>\n"},{"tags":["sql","oracle","indexing","sqlplus"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":4911,"score":2,"question_id":1838094,"title":"Force index use in Oracle","body":"<p>I encountered this question in an interview and had no clue how to answer:</p>\n\n<p>There is a table which has a index on a column, and you query:</p>\n\n<pre><code>select * from table_name where column_having_index=\"some value\";\n</code></pre>\n\n<p>The query takes too long, and you find out that the index is not being used.  If you think the performance of the query will be better using the index, how could you force the query to use the index?</p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12864946,"title":"Update CLOB Column to NULL","body":"<p>I need to update an oracle clob column value to <code>null</code>.  I tried to below but that didn't work.  Any ideas?  </p>\n\n<pre><code>update table_name \n   set CONTENT_TEMPLATE=empty_clob() \n where table_key=12345;\n\n\nName                 Null     Type          \n-------------------- -------- ------------- \nTEST_KEY            NOT NULL NUMBER(10)    \nTEST_ID             NOT NULL VARCHAR2(100) \nTEST_TYPE           NOT NULL VARCHAR2(30)  \nTEMPLATE_ID                   VARCHAR2(100) \nROUTE                         VARCHAR2(100) \nMEDIUM                        VARCHAR2(100) \nBEGIN_EFFECTIVE_DATE NOT NULL DATE          \nEND_EFFECTIVE_DATE   NOT NULL DATE          \nCUSTOMER_ID          NOT NULL VARCHAR2(30)  \nVAR_ID               NOT NULL VARCHAR2(30)  \nCREATION_DATE        NOT NULL DATE          \nLAST_UPDATED_DATE    NOT NULL DATE          \nLAST_UPDATED_BY      NOT NULL VARCHAR2(30)  \nCONTENT_TEMPLATE              CLOB          \nSUBJECT_TEMPLATE              CLOB          \nUNIT_TYPE                     VARCHAR2(30)  \nOVERLOADED_ALERT_KEY          NUMBER(10)    \nALERT_TYPE_ALIAS              VARCHAR2(100) \n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12863928,"title":"SQL Group by error - \"not a GROUP BY expression\"","body":"<p>I seem to be having a problem with my SQL query that's driving me mad. I just can't seem to get the group by to work. I keep getting the following error: </p>\n\n<pre><code>00979. 00000 -  \"not a GROUP BY expression\"\n</code></pre>\n\n<p><strong>My query:</strong></p>\n\n<pre><code>SELECT customers.customer_first_name, customers.customer_last_name, orders.customer_numb, books.author_name, books.title\nFROM customers\nLEFT OUTER JOIN orders ON (orders.customer_numb = customers.customer_numb)\nLEFT OUTER JOIN order_lines ON (order_lines.order_numb = orders.order_numb)\nLEFT OUTER JOIN books ON (books.isbn = order_lines.isbn)\nWHERE (customers.customer_numb = 6)\nGROUP BY (books.title)\n</code></pre>\n\n<p>Database schema:</p>\n\n<p><strong>Customers:</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/h2qXq.png\" alt=\"enter image description here\"></p>\n\n<p><strong>Order Lines &amp; Orders:</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/uAwu5.png\" alt=\"enter image description here\"></p>\n\n<p><strong>What I'm trying to achieve:</strong>\nI'm trying to group by book titles so that it doesn't show duplicate titles.</p>\n\n<p>I apologise if I've missed anything, thanks.</p>\n"},{"tags":["sql","oracle","plsql","cursor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12863658,"title":"PLS/QL : Nasty cursor error","body":"<p>I need a hand for a PL/SQL. Indeed, i can't figure out why Oracle doesn't want to accept this code :</p>\n\n<pre><code>set serveroutput on;\nCREATE OR REPLACE PROCEDURE route (gagnant VARCHAR2) IS\n\nCURSOR perdants IS SELECT NPerdant FROM RENCONTRE WHERE NGagnant = gagnant;\n\nBEGIN\n        FOR perdant IN perdants\n        LOOP\n                dbms.output.put_line(gagnant || ' bats ' || perdants.nperdant);\n                route (perdants.nperdant);\n        END LOOP;\nEND;\n/\n</code></pre>\n\n<p>This is the result of the show errors command :</p>\n\n<pre><code>LINE/COL     ERROR\n10/17    PL/SQL: Statement ignored\n10/70    PLS-00225: référence de sous-programme ou de curseur 'PERDANTS' e st hors étendue\n11/17    PL/SQL: Statement ignored\n11/33    PLS-00225: référence de sous-programme ou de curseur 'PERDANTS' e st hors étendue\n</code></pre>\n\n<p>So it tells me that it can't acces the <code>perdants</code> cursor because of a range problem. \nBut I can't see why. </p>\n"},{"tags":["java","oracle","function"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":139,"score":1,"question_id":9100543,"title":"Analog of ORACLE function MONTHS_BETWEEN in Java","body":"<p>Does Java have some analog of oracle's function <code>MONTHS_BETWEEN</code>?</p>\n"},{"tags":["sql","oracle","plsql","oracle10g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":167,"score":1,"question_id":12863680,"title":"Inserting row values into another table's column","body":"<p>I'm trying to implement an <strong>undo</strong> and <strong>logging</strong> feature for my project.</p>\n\n<p>When a user deletes a row from a table with the <strong>DELETE_ROW</strong> procedure i select all values from that row and insert it into my row_history table by serializing row values as xml with <strong>LOG_DELETED_ROW</strong> procedure, then i delete row from its original table.</p>\n\n<p>Serializing with built-in functions of Oracle was easy but i couldn't find a way to deserialize the rowdata and insert it back to own table.</p>\n\n<p><strong>Is there any way to store that deleted row into another table and restore it when needed?</strong></p>\n\n<p><strong>Delete Procedure:</strong></p>\n\n<pre><code>create or replace procedure DELETE_ROW(tableName varchar2, userId varchar2, columnName varchar2, columnValue number) is\nbegin\n  log_deleted_row(tableName, userId, columnName, columnValue);\n  execute immediate 'delete from ' || tableName || ' where ' || columnName || ' = ' || columnValue;\nend DELETE_ROW;\n</code></pre>\n\n<p><strong>Logging Procedure:</strong></p>\n\n<pre><code>create or replace procedure LOG_DELETED_ROW(tableName varchar2, userId varchar2, columnName varchar2, columnValue number) is\ntableId number;\nbegin\n  SELECT ID into tableId FROM TABLES WHERE NAME = tableName;\n\nexecute immediate\n  'INSERT INTO ROW_HISTORY(TABLE_ID,ROW_ID,ROW_DATA)\n   SELECT \n   '|| tableId ||', \n   '|| columnValue ||',\n   to_clob(\n       DBMS_XMLGEN.getxmltype(\n           ''SELECT * FROM ' || tableName || ' where ' || columnName || ' = ' || columnValue || '''\n       ) \n   )FROM DUAL';\n\nend LOG_DELETED_ROW;\n</code></pre>\n\n<p><strong>Row History Table:</strong></p>\n\n<pre><code>create table ROW_HISTORY\n(\n  ID       NUMBER not null,\n  TABLE_ID NUMBER not null,\n  ROW_ID   NUMBER not null,\n  ROW_DATA CLOB not null\n)\n</code></pre>\n"},{"tags":["eclipse","oracle","data"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12860443,"title":"How to connect to the database source stored on other unix server to the application running locally on eclipse?","body":"<p>i have my application and the Oracle database source deployed on the Unix server. For testing purpose i have imported the application in eclipse locally but i am not able to connect to the database stored on the server. Is there any way to connect to Oracle data source locally?</p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":12861303,"title":"Oracle - Counting timestamps where difference between timestamps greater than 1 hour","body":"<p>I have a worklog table that contains the following fields:</p>\n\n<pre><code>worklog_id,\nagent_name,\nticket_number,\ntimestamp,\nworklog_notes.  \n</code></pre>\n\n<p>I would like to be able to count the number of worklog entries made where if the <code>agent_name</code>, <code>ticket_number</code> and <code>timestamp</code> (date) are the same the worklog entry is only counted if the time between the two entries is greater than 1 hour.</p>\n\n<p>Example: John Smith make three worklog entries on ticket 12345.  The first timestamp is \"10/11/2012 9:11:44 AM\", the second timestamp is \"10/11/2012 9:36:16 AM\" and the third timestamp is \"10/11/2012 11:18:20 AM\".  In this example I would only want to give the agent credit for two worklog entries as the first two were less than an hour apart.</p>\n\n<p>I've tried getting the logic to work using a \"where\" sub-query, but cannot get it working.  Would anyone have any example they could provide?  Thanks! :)</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12860386,"title":"ORA-01562: failed to extend rollback segment number 11","body":"<p>I´m trying to execute this query into a SP</p>\n\n<pre><code> DELETE FROM table SC\n      WHERE SC.evaluationMonth= 'Some month';\n COMMIT;\n</code></pre>\n\n<p>But for this month there are something like 10 million records. So I get the error </p>\n\n<blockquote>\n  <p>ORA-01562: failed to extend rollback segment number 11. </p>\n</blockquote>\n\n<p>How can I improve the SP or make something to solve this problem?<br>\nPdta: I had increase de unto to 20G</p>\n"},{"tags":["oracle","windows-7","connection-string","provider"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12860327,"title":"How to reference oracle provider in connection string","body":"<p>I had to move an application from old server to new 64bit server.</p>\n\n<p>There the application used this connection string:</p>\n\n<pre><code>Provider=OraOLEDB.Oracle;Data Source=XXX;User Id=XXX;Password=XXX;OLEDB.NET=True;\n</code></pre>\n\n<p>Since the oracle driver needed to be changed, I had to install a new one:\n<strong>oracle in instantclient_11_2</strong></p>\n\n<p>Now i have problem referencing this driver in the connection string to get the application running.</p>\n\n<p>Any idea?</p>\n"},{"tags":["sql","oracle","sqlplus"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12832277,"title":"conditional sum calculation in sqlplus","body":"<p>So I want to know the total balance owed by the students who owe $3500 or more.\nThis is what I try at first</p>\n\n<blockquote>\n  <p>SELECT SUM(BALANCE) FROM STUDENT ;  </p>\n</blockquote>\n\n<p>It work fine, but does not meet the condition.</p>\n\n<p>So i tried this</p>\n\n<blockquote>\n  <p>SELECT SUM(BALANCE) FROM STUDENT<br>\n     WHERE BALANCE >= 3500 ;   </p>\n</blockquote>\n\n<p>gave me the same answer so i guess it should not be right??</p>\n\n<p>then i tried this </p>\n\n<blockquote>\n  <p>select sum(balance > = 3500) from student ;  </p>\n</blockquote>\n\n<p>which gives me a syntax error.\nWhat should I do?</p>\n"},{"tags":["sql","database","oracle","database-design","schema"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":12398059,"title":"Schema Visualizer that includes views (for Oracle)","body":"<p>I was looking for something (preferably free) that would quickly visualise a schema in Oracle for me? I've found some that show the relationships between tables, but I haven't yet found one that includes views. I understand that views can be more complex than tables, but it would be good to have a visualiser that at least understands views which are simple joins etc. I'm happy to clean it up and add to it after, but just something that produces the basic relationships will be good.</p>\n\n<p>Like I said, this is on an Oracle database, but if there is a database independent tool, I'm happy to dump out the sql that generates the schema and feed it to the tool.</p>\n"},{"tags":["c#","asp.net","database","oracle","stored-procedures"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":113,"score":0,"question_id":12759850,"title":"Oracle procedure sample with datatable as input parametere","body":"<p>Any body know how write oracle stored procedure data table as input parameter.</p>\n"},{"tags":["c#","oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":42,"score":3,"question_id":12860151,"title":"What is the precision value needed for Oracle for an Int32?","body":"<p>I have a need to store a CRC signed Int32 value in Oracle.  What precision should I use for that?</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12859602,"title":"Select columns with the same value","body":"<p>I'm trying to select customer names with the same zip code but I can't seem to get the correct result. The correct rows that are meant to be returned are 11. I seem to be getting 14 using the following:</p>\n\n<pre><code>SELECT a.customer_first_name, a.customer_last_name, a.customer_zip FROM customers a\nUNION\nSELECT b.customer_first_name, b.customer_last_name, b.customer_zip FROM customers b\n</code></pre>\n\n<p>From here I'm kinda stuck. I know that both statements are the same but this is the basis of where I got to.</p>\n\n<p>I was going to use something along the lines of:</p>\n\n<pre><code>WHERE a.customer_zip=b.customer_zip\n</code></pre>\n\n<p>But of course this doesn't work and is kind of irrelevant. </p>\n\n<p>Customers table:</p>\n\n<p><img src=\"http://i.stack.imgur.com/8FIeV.png\" alt=\"Customers table\"></p>\n\n<p>Any help would be much appreciated. If I've missed anything and/or this comes across unclear, then I apologise. Thanks.</p>\n\n<p><strong>Edit:</strong> The correct result should be 11 rows (which I can't seem to achieve).</p>\n"},{"tags":["oracle","excel-vba","openquery"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12857977,"title":"Change of original column leads to TEXT format in Excel sheet","body":"<p>This select in EXCEL VBA results to <strong>numeric</strong> format in Excel:</p>\n\n<pre><code>strSQL = \"SELECT * FROM OPENQUERY(dtb, 'SELECT col from table')\"\n</code></pre>\n\n<p>But if I make some function on the column, it results as <strong>text</strong> format in Excel:</p>\n\n<pre><code>strSQL = \"SELECT * FROM OPENQUERY(dtb, 'SELECT sum(col) from table')\"\nstrSQL = \"SELECT * FROM OPENQUERY(dtb, 'SELECT col*1.0  from table')\"\nstrSQL = \"SELECT * FROM OPENQUERY(dtb, 'SELECT col-1    from table')\"\n</code></pre>\n\n<p>I've tried <code>to_number(...)</code>, <code>to_number(to_char(...))</code> but it didn't helped. </p>\n\n<p>Why? How can I resolve this situation?</p>\n\n<p><strong>SOLUTION</strong> (convert column to numeric using SQL server cast function)</p>\n\n<pre><code>strSQL = \"SELECT cast(col# as numeric(10, 2)) col# \" _\n         \"FROM OPENQUERY(dtb, 'SELECT sum(col) col# from table')\"\n</code></pre>\n"},{"tags":["java","oracle","hibernate","spring","blob"],"answer_count":5,"favorite_count":6,"up_vote_count":19,"down_vote_count":0,"view_count":2337,"score":19,"question_id":9253323,"title":"How to persist LARGE BLOBs (>100MB) in Oracle using Hibernate","body":"<p>I'm struggling to find a way to insert LARGE images (>100MB, mostly TIFF format) in my Oracle database, using BLOB columns.</p>\n\n<p>I've searched thoroughly across the web and even in StackOverflow, without being able to find an answer to this problem.<br/> \nFirst of all, the problem...then a short section on the relevant code (java classes/configuration), finally a <em>third section</em> where i show the junit test i've written to test image persistence (i receive the error during my junit test execution)</p>\n\n<h3>Edit: i've added a section, at the end of the question, where i describe some tests and analysis using JConsole</h3>\n\n<h1>The problem</h1>\n\n<p>I receive an <code>java.lang.OutOfMemoryError: Java heap space</code> error using hibernate and trying to persist very large images/documents:</p>\n\n<pre><code>java.lang.OutOfMemoryError: Java heap space\nat java.util.Arrays.copyOf(Arrays.java:2786)\nat java.io.ByteArrayOutputStream.toByteArray(ByteArrayOutputStream.java:133)\nat org.hibernate.type.descriptor.java.DataHelper.extractBytes(DataHelper.java:190)\nat org.hibernate.type.descriptor.java.BlobTypeDescriptor.unwrap(BlobTypeDescriptor.java:123)\nat org.hibernate.type.descriptor.java.BlobTypeDescriptor.unwrap(BlobTypeDescriptor.java:47)\nat org.hibernate.type.descriptor.sql.BlobTypeDescriptor$4$1.doBind(BlobTypeDescriptor.java:101)\nat org.hibernate.type.descriptor.sql.BasicBinder.bind(BasicBinder.java:91)\nat org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:283)\nat org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:278)\nat org.hibernate.type.AbstractSingleColumnStandardBasicType.nullSafeSet(AbstractSingleColumnStandardBasicType.java:89)\nat org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:2184)\nat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2430)\nat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2874)\nat org.hibernate.action.EntityInsertAction.execute(EntityInsertAction.java:79)\nat org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273)\nat org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:265)\nat org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:184)\nat org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)\nat org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)\nat org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)\nat it.paoloyx.blobcrud.manager.DocumentManagerTest.testInsertDocumentVersion(DocumentManagerTest.java:929)\n</code></pre>\n\n<h1>The code (domain objects, repository classes, configuration)</h1>\n\n<p>Here is the stack of technologies i'm using (from DB to business logic tier). I use JDK6.</p>\n\n<ul>\n<li>Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - Prod</li>\n<li>ojdbc6.jar (for 11.2.0.3 release)</li>\n<li>Hibernate 4.0.1 Final</li>\n<li>Spring 3.1.GA RELEASE</li>\n</ul>\n\n<p>I've two domain classes, mapped in a one-to-many fashion. A <code>DocumentVersion</code> has many <code>DocumentData</code>, each of one can represent different binary content for the same <code>DocumentVersion</code>.</p>\n\n<p>Relevant extract from <code>DocumentVersion</code> class:</p>\n\n<pre><code>@Entity\n@Table(name = \"DOCUMENT_VERSION\")\npublic class DocumentVersion implements Serializable {\n\nprivate static final long serialVersionUID = 1L;\nprivate Long id;\nprivate Set&lt;DocumentData&gt; otherDocumentContents = new HashSet&lt;DocumentData&gt;(0);\n\n\n@Id\n@GeneratedValue(strategy = GenerationType.TABLE)\n@Column(name = \"DOV_ID\", nullable = false)\npublic Long getId() {\n    return id;\n}\n\n@OneToMany\n@Cascade({ CascadeType.SAVE_UPDATE })\n@JoinColumn(name = \"DOD_DOCUMENT_VERSION\")\npublic Set&lt;DocumentData&gt; getOtherDocumentContents() {\n    return otherDocumentContents;\n}\n</code></pre>\n\n<p>Relevant extract from <code>DocumentData</code> class:</p>\n\n<pre><code>@Entity\n@Table(name = \"DOCUMENT_DATA\")\npublic class DocumentData {\n\nprivate Long id;\n\n/**\n * The binary content (java.sql.Blob)\n */\nprivate Blob binaryContent;\n\n@Id\n@GeneratedValue(strategy = GenerationType.TABLE)\n@Column(name = \"DOD_ID\", nullable = false)\npublic Long getId() {\n    return id;\n}\n\n@Lob\n@Column(name = \"DOD_CONTENT\")\npublic Blob getBinaryContent() {\n    return binaryContent;\n}\n</code></pre>\n\n<p>Here are my Spring and Hibernate configuration main parameters:</p>\n\n<pre><code>&lt;bean id=\"sessionFactory\"\n    class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;property name=\"packagesToScan\" value=\"it.paoloyx.blobcrud.model\" /&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.Oracle10gDialect&lt;/prop&gt;\n            &lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;create&lt;/prop&gt;\n            &lt;prop key=\"hibernate.jdbc.batch_size\"&gt;0&lt;/prop&gt;\n            &lt;prop key=\"hibernate.jdbc.use_streams_for_binary\"&gt;true&lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n&lt;bean class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"\n    id=\"transactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n&lt;/bean&gt;\n&lt;tx:annotation-driven transaction-manager=\"transactionManager\" /&gt;\n</code></pre>\n\n<p>My datasource definition:</p>\n\n<pre><code>&lt;bean class=\"org.apache.commons.dbcp.BasicDataSource\"\n    destroy-method=\"close\" id=\"dataSource\"&gt;\n    &lt;property name=\"driverClassName\" value=\"${database.driverClassName}\" /&gt;\n    &lt;property name=\"url\" value=\"${database.url}\" /&gt;\n    &lt;property name=\"username\" value=\"${database.username}\" /&gt;\n    &lt;property name=\"password\" value=\"${database.password}\" /&gt;\n    &lt;property name=\"testOnBorrow\" value=\"true\" /&gt;\n    &lt;property name=\"testOnReturn\" value=\"true\" /&gt;\n    &lt;property name=\"testWhileIdle\" value=\"true\" /&gt;\n    &lt;property name=\"timeBetweenEvictionRunsMillis\" value=\"1800000\" /&gt;\n    &lt;property name=\"numTestsPerEvictionRun\" value=\"3\" /&gt;\n    &lt;property name=\"minEvictableIdleTimeMillis\" value=\"1800000\" /&gt;\n    &lt;property name=\"validationQuery\" value=\"${database.validationQuery}\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>where properties are taken from here:</p>\n\n<pre><code>database.driverClassName=oracle.jdbc.OracleDriver\ndatabase.url=jdbc:oracle:thin:@localhost:1521:devdb\ndatabase.username=blobcrud\ndatabase.password=blobcrud\ndatabase.validationQuery=SELECT 1 from dual\n</code></pre>\n\n<p>I've got a service class, that delegates to a repository class:</p>\n\n<pre><code>@Transactional\npublic class DocumentManagerImpl implements DocumentManager {\n\nDocumentVersionDao documentVersionDao;\n\npublic void setDocumentVersionDao(DocumentVersionDao documentVersionDao) {\n    this.documentVersionDao = documentVersionDao;\n}\n</code></pre>\n\n<p>and now the relevant extracts from repository classes:</p>\n\n<pre><code>public class DocumentVersionDaoHibernate implements DocumentVersionDao {\n\n@Autowired\nprivate SessionFactory sessionFactory;\n\n@Override\npublic DocumentVersion saveOrUpdate(DocumentVersion record) {\n    this.sessionFactory.getCurrentSession().saveOrUpdate(record);\n    return record;\n}\n</code></pre>\n\n<h1>The JUnit test that causes the error</h1>\n\n<p>If i run the following unit test i've got the aforementioned error (<code>java.lang.OutOfMemoryError: Java heap space</code>):</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { \"classpath*:META-INF/spring/applicationContext*.xml\" })\n@Transactional\npublic class DocumentManagerTest {\n\n@Autowired\nprotected DocumentVersionDao documentVersionDao;\n\n@Autowired\nprotected SessionFactory sessionFactory;\n\n@Test\npublic void testInsertDocumentVersion() throws SQLException {\n\n    // Original mock document content\n    DocumentData dod = new DocumentData();\n    // image.tiff is approx. 120MB\n    File veryBigFile = new File(\"/Users/paoloyx/Desktop/image.tiff\");\n    try {\n        Session session = this.sessionFactory.getCurrentSession();\n        InputStream inStream = FileUtils.openInputStream(veryBigFile);\n        Blob blob = Hibernate.getLobCreator(session).createBlob(inStream, veryBigFile.length());\n        dod.setBinaryContent(blob);\n    } catch (IOException e) {\n        e.printStackTrace();\n        dod.setBinaryContent(null);\n    }\n\n    // Save a document version linked to previous document contents\n    DocumentVersion dov = new DocumentVersion();\n    dov.getOtherDocumentContents().add(dod);\n    documentVersionDao.saveOrUpdate(dov);\n    this.sessionFactory.getCurrentSession().flush();\n\n    // Clear session, then try retrieval\n    this.sessionFactory.getCurrentSession().clear();\n    DocumentVersion dbDov = documentVersionDao.findByPK(insertedId);\n    Assert.assertNotNull(\"Il document version ritornato per l'id \" + insertedId + \" è nullo\", dbDov);\n    Assert.assertNotNull(\"Il document version recuperato non ha associato contenuti aggiuntivi\", dbDov.getOtherDocumentContents());\n    Assert.assertEquals(\"Il numero di contenuti secondari non corrisponde con quello salvato\", 1, dbDov.getOtherDocumentContents().size());\n}\n</code></pre>\n\n<p>The <strong><em>same code</em></strong> works against a PostreSQL 9 installation. The images is being written in the database. \nDebugging my code, i've been able to find that the PostgreSQL jdbc drivers writes on the database using a buffered output stream....while the Oracle OJDBC driver tries to allocate all at once all the <code>byte[]</code>representing the image.</p>\n\n<p>From the error stack:</p>\n\n<pre><code>java.lang.OutOfMemoryError: Java heap space\nat java.util.Arrays.copyOf(Arrays.java:2786)\nat java.io.ByteArrayOutputStream.toByteArray(ByteArrayOutputStream.java:133)\n</code></pre>\n\n<p>Is the error due to this behavior?\nCan anyone give me some insights on this problem?</p>\n\n<p>Thanks everyone.</p>\n\n<h1>Memory Tests with JConsole</h1>\n\n<p>Thanks to the suggestions received for my question, i've tried to do some simple tests to show memory usage of my code using two different jdbc drivers, one for PostgreSQL and one for Oracle.\nTest setup:</p>\n\n<ol>\n<li>The test has been conducted using the JUnit test described in the previous section.</li>\n<li>JVM Heap Size has been set to 512MB, using parameter <em>-Xmx512MB</em></li>\n<li>For Oracle database, I've used <em>ojdbc6.jar</em> driver</li>\n<li>For Postgres database, I've used <em>9.0-801.jdbc3 driver</em> (via Maven)</li>\n</ol>\n\n<h3>First test, with a file of approx 150MB</h3>\n\n<p>In this first test, both Oracle and Postgres <strong><em>passed</em></strong> the test (this is BIG news).\nThe file is sized 1/3 of available JVM heap size.\nHere the picture of JVM memory consumption:</p>\n\n<p>Testing Oracle, 512MB Heap Size, 150MB file\n<img src=\"http://i.stack.imgur.com/xUvA1.png\" alt=\"Testing Oracle, 512MB Heap Size, 150MB file\"></p>\n\n<p>Testing PostgreSQL, 512MB Heap Size, 150MB file\n<img src=\"http://i.stack.imgur.com/wXS76.png\" alt=\"Testing PostgreSQL, 512MB Heap Size, 150MB file\"></p>\n\n<h3>Second test, with a file of approx 485MB</h3>\n\n<p>In this second test, only Postgres passed the test and Oracle <strong><em>failed</em></strong> it .\nThe file is sized very near the size of the available JVM heap space.\nHere the picture of JVM memory consumption:</p>\n\n<p>Testing Oracle, 512MB Heap Size, 485MB file\n<img src=\"http://i.stack.imgur.com/81FMO.png\" alt=\"Testing Oracle, 512MB Heap Size, 485MB file\"></p>\n\n<p>Testing PostgreSQL, 512MB Heap Size, 485MB file\n<img src=\"http://i.stack.imgur.com/U9uKb.png\" alt=\"Testing PostgreSQL, 512MB Heap Size, 485MB file\"></p>\n\n<h3>Analysis of the tests:</h3>\n\n<p>It seems that PostgreSQL driver handles memory without surpassing a certain threshold, while Oracle driver behaves very differently.</p>\n\n<p>I can't honestly explain why Oracle jdbc driver leads me to error (the same <code>java.lang.OutOfMemoryError: Java heap space</code>) when using file sized near the available heap space.</p>\n\n<p>Is there anyone that can give me more insights?\nThanks a lot for you help :)</p>\n"},{"tags":["sql","oracle","sqlplus"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":157,"score":2,"question_id":12858251,"title":"How to create multiple sqlplus tables using one SQL script file","body":"<p>I am creating a whole bunch of tables in SQL*Plus and using PsPad to write SQL script that running the script through sqlplus in putty.</p>\n\n<p>Currently I have to create an individual SQL script file for each table but I would like to create all of my tables in one SQL script file. Is this possible?</p>\n\n<p>I have tried</p>\n\n<pre><code>CREATE TABLE TESTTABLE4(\nID NUMBER(2),NAME VARCHAR2 (50));\nCREATE TABLE TESTTABLE2(\nID_NO NUMBER (2), SIZE NUMBER (4));\n</code></pre>\n\n<p>And also leaving a line between the tables</p>\n"},{"tags":["sql","oracle","hibernate"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":133,"score":2,"question_id":12858542,"title":"SQL delete query with foreign key constraint","body":"<p>I know that this question belongs to the very early stages of the database theory, but I have not encountered such a problem since several months. If someone has a database with some tables associated together as \"chain\" with foreign keys and they want to delete a record from a table which has some \"dependent\" tables, what obstacles arise? In particular, in a database with tables: Person, Profile, Preference, Filter exist the associations as <code>Person.id</code> is foreign key in <code>Profile</code> and <code>Profile.id</code> is foreign key in <code>Preference</code> and <code>Filter.id</code> is foreign key in <code>Preference</code>, so as that all the associations<code>enter code here</code> are <code>OneToMany</code>. Is it possible to delete a Person with a simple query:</p>\n\n<pre><code>Delete from Person p where p.id= 34;\n</code></pre>\n\n<p>If no, how should look like the query in order to perform the delete successfully? \nIf the database in the application is managed by hibernate, what constraints (<code>annotations</code>) should I apply to the associated fields of each entity, so as to be able with the above simple query to perform the delete?       </p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":852,"score":1,"question_id":7434657,"title":"How does GROUP BY works?","body":"<p>If suppose I have a table <code>Tab1</code> with attributes - <code>a1</code>, <code>a2</code>, ... etc. None of the attributes are unique.</p>\n\n<p>What will be the nature of the following query? Will it return a single row always?</p>\n\n<pre><code>SELECT a1, a2, sum(a3) FROM Tab1 GROUP BY a1, a2\n</code></pre>\n"},{"tags":["c++","oracle","unix"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12858297,"title":"Compilation of a c++ program which uses occi","body":"<p>I tried to write a c++ program which uses oracle occi. I tried to compile this program in Linux machine.I installed oracle 11g client and configured the environment as follows,</p>\n\n<pre><code>export ORACLE_BASE=/usr/lib/oracle\nexport ORACLE_HOME=$ORACLE_BASE/11.2/client\nexport LD_LIBRARY_PATH=$ORACLE_HOME/lib\nexport PATH=$ORACLE_HOME/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:~/bin\n~\n</code></pre>\n\n<hr>\n\n<p>I followed the compilation steps as follows,</p>\n\n<pre><code>g++ -ggdb3 -o Employees Employees.cpp -I/usr/include/oracle/11.2/client -L/usr/lib/oracle/11.2/client/lib -lclntsh -locci \n</code></pre>\n\n<p>but i am getting the folowing error</p>\n\n<pre><code>[root@ar-ucs-vm02 Employees]# g++ -ggdb3 -o Employees Employees.cpp -I/usr/include/oracle/11.2/client -L/usr/lib/oracle/11.2/client/lib -lclntsh -locci\n\n/usr/bin/ld: warning: libnnz11.so, needed by /usr/lib/oracle/11.2/client/lib/libclntsh.so, not found (try using -rpath or -rpath-link)\n</code></pre>\n\n<p>Any one can suggest me the step by step process to compile and run c++-occi program in a linux environment</p>\n"},{"tags":["sql","oracle","plsqldeveloper"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":12847901,"title":"Oracle SQL, SELECT clause using &input","body":"<p>I have an quite simple query</p>\n\n<pre><code>SELECT id FROM table where ID in &amp;data\n</code></pre>\n\n<p>When I run this SQL I am prompted to type in some values to <code>&amp;data</code>.</p>\n\n<p>I would like to be able to select several id's using this. i.e. &amp;data = \"11,12,13\"</p>\n\n<p>but then I get an error <code>ORA-00933</code>.</p>\n\n<p>Ive tried with: </p>\n\n<pre><code>11,12,13\n'11,12,13' -&gt; ORA-01722\n'11','12','13'\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["mysql","sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":12850627,"title":"Count SQL Statement Without Create Other View","body":"<p>I have a table name as JOB_Details and the data show as below:</p>\n\n<pre><code> Employee_ID   Age          Department     Gender       \n    001       30yrs          IT               M \n    002       34yrs          HR               F    \n    003       39yrs          HR               F   \n    004       49yrs          Finance          M        \n    005       54yrs          IT               M \n    006       20yrs          HR               M \n    007       24yrs          HR               F   \n    008       33yrs          Finance          F       \n    009       29yrs          Finance          F        \n    010       44yrs          IT               M\n</code></pre>\n\n<p>The output i wish to display should be like</p>\n\n<pre><code>Age          Department:IT       Department:Finance  Department:HR    Total\n             Male     Female     Male     Female     Male     Female\n&lt;30yrs         1         0         0         1         1         1       4\n 30-34yrs      0         0         0         1         0         1       2\n 35-39yrs      0         0         0         0         0         1       1\n 40-49yrs      1         0         1         0         0         0       2\n 50-54yrs      1         0         0         0         0         0       1\n Total         3         0         1         2         1         3       10 \n</code></pre>\n\n<p>Based on my knowledge, the only way can be done it is by create another view and group them one by one. But i wish to know is that other way to do it without create a other view? I wish to learn it if anyone have other good suggestion. Thank you very much.</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12857427,"title":"ORA-00979: not a GROUP BY expression","body":"<p>What is wrong with my <code>group by</code>? <a href=\"http://sqlfiddle.com/#!4/54916/23\" rel=\"nofollow\">SQL Fiddle</a></p>\n\n<pre><code>with age_range as (\n    select 0 as \"bottom\", 29 as \"top\", '&lt;30' as \"range\" from dual union\n    select 30, 34, '30-34' from dual union\n    select 35, 39, '35-59' from dual union\n    select 40, 49, '40-49' from dual union\n    select 50, 54, '50-54' from dual\n)\nselect \n    ar.\"range\" as Age,\n    count(case when Department = 'IT' and Gender = 'M' then 1 end) as IT_Male,\n    count(case when Department = 'IT' and Gender = 'F' then 1 end) as IT_Female,\n    count(case when Department = 'Finance' and Gender = 'M' then 1 end) as Finance_Male,\n    count(case when Department = 'Finance' and Gender = 'F' then 1 end) as Finance_Female,\n    count(case when Department = 'HR' and Gender = 'M' then 1 end) as HR_Male,\n    count(case when Department = 'HR' and Gender = 'F' then 1 end) as HR_Female\nfrom \n    JOB_Details jd\n    inner join\n    age_range ar on jd.Age between ar.\"bottom\" and ar.\"top\"\ngroup by ar.\"range\"\norder by ar.\"bottom\"\n</code></pre>\n"},{"tags":["oracle","soa","osb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12583592,"title":"Oracle service bus Invocation Error","body":"<p>Whenever I try to invoke a proxy service in OSB it gives me error. Here's the error I see:</p>\n\n<pre><code>com.bea.wli.sb.transports.TransportException: \nThe invocation resulted in an error:\nUnknown error while processing message for service ProxyService {Proxy service path}\n</code></pre>\n\n<p>A HTTP 500 is returned.</p>\n\n<p>In the message flow I can see a request was returned as it is saying \"No service has been invoked.\" In the logs I can see \"Error to place router information\".</p>\n\n<p>Any ideas for how to overcome this?</p>\n"},{"tags":["oracle","sqlfiddle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12856875,"title":"ORA-00933: SQL command not properly ended in insert command","body":"<p>The are many questions with this same title but I can't find an answer among those.</p>\n\n<p>What am I doing wrong?</p>\n\n<pre><code>CREATE TABLE J\n    (A integer)\n;\n\nINSERT INTO J (A)\nVALUES\n    (1),\n    (2),\n    (3),\n    (4),\n    (5),\n    (6),\n    (7),\n    (8),\n    (9),\n    (10)\n;\n</code></pre>\n\n<p>The <code>create</code> alone works. The problem is just the insert. I tried in SQL Fiddle.</p>\n"},{"tags":["performance","oracle","entity-framework","repository-pattern"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":352,"score":4,"question_id":12177322,"title":"Entity Framework 5 and Oracle: Expression with closure affecting performance when querying against a non-unique indexed field","body":"<p>I have a performance issue with Entity Framework 5 and Oracle DB.</p>\n\n<p>I have a simple SQL select: <code>SELECT * FROM NOTE WHERE NOTENUMBER = '1A23456'</code></p>\n\n<p><code>NOTENUMBER</code> is included in an index on a table called NOTE, but the field is NOT primary key / unique.</p>\n\n<ul>\n<li><p>When I execute the statement with Oracle SQL Developer, results return\nquickly and query plan shows that RANGE SCAN is being used like it\nshould.</p></li>\n<li><p>When I use Entity Framework, the generated SQL takes a lot\nlonger (5 seconds vs. 30ms).</p></li>\n<li><p>When I use Entity Framework and query\nwith a <strong>primary key field</strong> (NOTE_KEY), results return as quickly as with SQL \nDeveloper.</p></li>\n</ul>\n\n<p>I suspect 2 things:</p>\n\n<ul>\n<li><p>There's some problem with EF and Oracle.DataAccess-provider not using the non-unique-index that is available. It would help if I had debug symbols for Entity Framework 5, but I can't find them anywhere.</p></li>\n<li><p>The performance problem is somewhere in EF, regarding closures and/or the way I use generic repository pattern with EF:</p>\n\n<p>If I call my repository like this:<br/>\n<code>var notenumber = \"1A23456\";</code><br />\n<code>var notes = repository.All(n =&gt; n.NOTENUMBER == notenumber).ToList();</code><br>\nThe predicate comes in at the method <code>All</code> as:<br />\n<code>{n =&gt; (n.NOTE == value(Tester.Program+&lt;&gt;c__DisplayClass0).notenumber)}</code><br/>\nAnd EfProf-profiler traces the resulting SQL as:</p>\n\n<p><code>SELECT \"Extent1\".\"NOTE_KEY\"      AS \"NOTE_KEY\",</code><br/>\n<code>\"Extent1\".\"NOTENUMBER\"    AS \"NOTENUMBER\",</code><br/>\n<code>\"Extent1\".\"NOTETEXT\"      AS \"NOTETEXT\",</code><br/>\n<code>FROM   \"NOTE_DBA\".\"NOTE\" \"Extent1\"</code><br/>\n<code>WHERE  (\"Extent1\".\"NOTENUMBER\" = '1PSA0500237500' /* @p__linq__0 */)</code><br/></p>\n\n<p>And the query takes takes <strong>~5500ms</strong>.</p>\n\n<p><br/>\nOn the other hand, if I call my repository like this:<br/>\n<code>var notes = repository.All(n =&gt; n.NOTENUMBER == \"1A23456\").ToList();</code><br/>\nThen the predicate comes in as:<br/>\n<code>{n =&gt; (n.NOTENUMBER == \"1A23456\")}</code><br />\nAnd EfProf-profiler traces the resulting SQL as:</p>\n\n<p><code>SELECT \"Extent1\".\"NOTE_KEY\"      AS \"NOTE_KEY\",</code><br/>\n<code>\"Extent1\".\"NOTENUMBER\"    AS \"NOTENUMBER\",</code><br/>\n<code>\"Extent1\".\"NOTETEXT\"      AS \"NOTETEXT\",</code><br/>\n<code>FROM   \"NOTE_DBA\".\"NOTE\" \"Extent1\"</code><br/>\n<code>WHERE  ('1PSA0500237500' = \"Extent1\".\"NOTENUMBER\")</code><br/></p>\n\n<p>And the query takes <strong>~30ms</strong>.</p>\n\n<p>So the only difference is the order of the condition in the WHERE-clause, and the fact that in the latter there seems to be no parameter replaced by EF</p></li>\n</ul>\n\n<p><br/>\nI use VS2010 and .NET4, and reference EF5 (v4.4.0.0).\nThe repository's All-method is:<br/></p>\n\n<pre><code>public IQueryable&lt;NOTE&gt; All(Expression&lt;Func&lt;NOTE, bool&gt;&gt; predicate = null)\n{\n    var setOfNotes = GetDbSet&lt;NOTE&gt;();\n    var notesQuery = from note in setOfNotes select note;\n    if (predicate != null)\n    {\n        notesQuery = notesQuery.Where(predicate);\n    }\n    return notesQuery;\n}\n</code></pre>\n\n<p>I tried to create a CompiledQuery, I tried using <code>setOfNotes.AsNoTracking()</code> and I tried to target .NET 4.5 - with no difference in performance.<br/></p>\n\n<p>One way I was able to get this particular query fast, was to use Oracle's basic Data Provider for .NET (ODB.NET) and construct the query manually, but I'd rather not stick with that solution. Again, if I use a primary field in the where clause, the query is fast even with EF and the same All-method.</p>\n\n<p>So the problem seems to be somewhere in EF. I feel could find out a lot more if I only had the symbols for EntityFramework.dll.</p>\n\n<p>Could there be a problem with the way EF invokes predicates? How does the '@p_<em>linq</em>_0'-parameter get replaced inside EF?</p>\n"},{"tags":["c#","sql","database","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12855799,"title":"The given value of type DateTime from the data source cannot be converted to type decimal of the spe","body":"<p>I am trying to migrate data from Oracle to SQL. </p>\n\n<p>I already created Table name and field Name. </p>\n\n<p>Type and Size are same on both: e.g. </p>\n\n<ul>\n<li>at Oracle <code>Varchar2(11)</code>, On SQL <code>VARCHAR(11)</code></li>\n<li>at Oracle <code>Date</code>, On SQL <code>datetime2(0)</code>. </li>\n</ul>\n\n<p>In my application I'm using <code>SqlBulkCopy</code> function. But I face the above error on Date filed. </p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12854821,"title":"one sql instead of 2 for counting","body":"<p>I have read a thread on this but when I tried it I can`t manage to make it work.\nI want to count all the male and females from a table like so:</p>\n\n<pre><code>Select \ncount(case when substr(id,1, 1) in (1,2) then 1 else 0 end) as M, \ncount(case when substr(id,1, 1) in (3,4) then 1 else 0 end) as F \nfrom users where activated=1\n</code></pre>\n\n<p>The ideea is that a user having an id starting with 1 or 2 is male<br>\nMy table has 3 male entries and 2 are activated and it returns (<em>the case statement doesn`t work</em>) </p>\n\n<pre><code>M,F\n2,2\n</code></pre>\n\n<p>Any input would be appreciated</p>\n\n<pre><code>id    activated\n123   1\n234   0\n154   1\n</code></pre>\n"},{"tags":["oracle","oracle10g","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":12851756,"title":"how to obtain the transaction begin time in Oracle?","body":"<p>How to obtain the transaction begin time in Oracle? Is there such a built-in function to be used in queries?</p>\n\n<p>More specifically, I need a function, let's call it <code>trans_begin_time()</code>, to be used in this way:</p>\n\n<pre><code>UPDATE MYTABLE\nSET batch_update_time = trans_begin_time()\nWHERE some_criteria \n</code></pre>\n\n<p>Such a function, if exists, would help me in two ways: </p>\n\n<p>first, I can update all the records  with the same date value - please note <code>sysdate</code> won't work as this is very a large table and <code>sysdate</code> would give varying values. </p>\n\n<p>Second, I would be able to use it anywhere without the need to store <code>sysdate</code> value beforehand and then use it in the query. </p>\n\n<p>Thanks.</p>\n"},{"tags":["oracle","blob","clob"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":144,"score":0,"question_id":12849025,"title":"convert blob to clob","body":"<p>I'm using oracle 11g and I'm trying to find out the length of a text. I will normally use select length(myvar) from table, but I can't do that.</p>\n\n<p>The table which I want to query has a BLOB column that saves characters or photos. I want to know the number of characters that have my BLOB column.</p>\n\n<p>I tried to convert my BLOB into a char using UTL_RAW.CAST_TO_VARCHAR2(myblob) from table, but this functions isnt't working correctly or maybe I'm making a mistake. </p>\n\n<p>For example:\nMy BLOB have the word Section, when I see this in the databse in the hexadecimal form I see S.e.c.t.i.o.n.. I dont'k know why it have those points in between each letter.\nThen I used the this query </p>\n\n<pre><code>select UTL_RAW.CAST_TO_VARCHAR2(myblob) \nfrom table\n</code></pre>\n\n<p>The result of this query is 'S' so it's not the complete word that my BLOB has, and when I make this query</p>\n\n<pre><code>select length(UTL_RAW.CAST_TO_VARCHAR2(myblob))\nfrom table\n</code></pre>\n\n<p>the result is 18 and the word Sections doesn't have 18 characters.</p>\n\n<p>I was trying to convert the blob into a varchar, although I think my best choise would be a clob because the length of the text that it can save is more than the limit that varchar has. I tried to do that by making this query (I'm not sure if this is correct but is what I found in the internet)</p>\n\n<pre><code>select UTL_RAW.CAST_TO_VARCHAR2(DBMS_LOB.SUBSTR(myblob, 32767, 1))\nfrom table\n</code></pre>\n\n<p>This query also returns 'S' </p>\n\n<p>I hope you can help me with this problem. thanks for advanced</p>\n"},{"tags":["oracle","plsql"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":102,"score":1,"question_id":12830926,"title":"pl/sql nested loop","body":"<p>How would I display all records in the database using the items table? My current query displays the information for item 894. I attempted using a loop, but no luck.</p>\n\n<p>I have two tables, inventory and itemid. Where itemid has the item number and the description, and the inventory table has the items' information, such as size, color, price, and quantity on hand. </p>\n\n<pre><code> set serveroutput on\n DECLARE\n    current_item    number(8);      \n    totalvalue      number(8,2);\n    description     varchar2(50);\n    item_id         number(3);\n\n\n    CURSOR Inventory_Info IS       \n      SELECT \n         itemsize\n        ,color\n        ,curr_price\n        ,qoh\n        ,curr_price*qoh as Total\n    FROM inventory\n     WHERE itemid=Current_item;\n\n\n\nBEGIN\n\n    current_item:=894;\n    totalvAlue:=0;  \n\n\n    SELECT \n     itemdesc, itemid         \n       INTO description, item_id\n    FROM item\n      WHERE itemid=current_item;\n\n    DBMS_OUTPUT.PUT_LINE('Item ID: ' || TO_CHAR(item_id) || ' Item Description: ' || description);\n\n    OPEN Inventory_Info;\n    LOOP\n            Fetch Inventory_Info INTO Inventory_rocord;\n            EXIT WHEN Inventory_Info%NOTFOUND;\n\n     DBMS_OUTPUT.PUT_LINE('Size: ' || Inventory_record.itemsize);\n     DBMS_OUTPUT.PUT_LINE('Color: ' || Inventory_record.color);\n     DBMS_OUTPUT.PUT_LINE('Price: ' || Inventory_record.curr_price);\n     DBMS_OUTPUT.PUT_LINE('QOH: ' || Inventory_record.qoh);\n     DBMS_OUTPUT.PUT_LINE('Value: ' || Inventory_record.total);\n\n     TotalValue:=TotalValue + Inventory_record.total;\n\n     End Loop;\n\n     DBMS_OUTPUT.PUT_LINE('TOTAL VALUE: ' || TotalValue);\n Close Inventory_Info;\n\n    EXCEPTION\n       WHEN NO_DATA_FOUND THEN                      \n       DBMS_OUTPUT.PUT_LINE('No inventory for Item No. '|| current_item);\n    WHEN OTHERS THEN                             \n       DBMS_OUTPUT.PUT_LINE('Error Message: '|| SQLERRM);\n\n END;\n</code></pre>\n"},{"tags":["sql","oracle","query","group-by"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":12849976,"title":"Oracle SQL Left Join with sum and fields other than \"join on\" fields","body":"<p>I have two tables.</p>\n\n<p>First table is \"a\" with fields a.pr, a.info and a.id.  Second table is \"b\" with fields b.id and b.amount.</p>\n\n<p>a.id = b.id, though multiple b.id's may match with a single a.id.</p>\n\n<p>My SQL statement is as follows:</p>\n\n<pre><code>SELECT a.pr, a.info, a.id, SUM(b.amount) AS total\nFROM   a \nLEFT JOIN b ON a.id=b.id\nWHERE  a.pr = \"549\"\nGROUP BY a.id\n</code></pre>\n\n<p>Now, this doesn't work.  It throws a \"not a GROUP BY expression\" error.  As I understand it, I need a subquery, but none of the examples I found seemed to exactly match what I am trying to accomplish here, and I couldn't get any of them to work right.</p>\n\n<p>What would the full SQL statement (with subquery) look like in this case?</p>\n"},{"tags":["sql","oracle","plsql","data-partitioning"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12850722,"title":"slow execution of INDEX FULL SCAN (MIN/MAX) on select max query","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12834199/select-max-of-a-column-using-range-partition\">select max of a column using range partition</a>  </p>\n</blockquote>\n\n\n\n<p>There is a table which is range partitioned on numeric(parameterinstanceid) value. I want to select max+1 value of the same column. I have global non-partition index on parameterinstanceid. The table contains 600 million rows.</p>\n\n<pre><code>select /*+ parallel(a,32,8) */ max(parameterinstanceid) +1 from parameterinstance a; \n</code></pre>\n\n<p>On checking the explain plan I see that it is doing an <code>INDEX FULL SCAN (MIN/MAX)</code> on the table. It is showing 34 cost and rows 1 only. Also the pstart(start partition) is 1 and pstop(stop partition) is 11 (is it because of this that the query is taking a long time?). Even then it is taking a long time to display the max value (30-40 mins).</p>\n\n<p>Why is it showing so long to execute even though it is <code>INDEX FULL SCAN (MIN/MAX)</code>?</p>\n\n<p>And if it is because of reverse order of pstart and pstop, how do I change the query so that pstart =11 and pstop =1?</p>\n\n<p>Refer to my previous question :\n<a href=\"http://stackoverflow.com/questions/12834199/select-max-of-a-column-using-range-partition\">max of a column on range partition table</a></p>\n"},{"tags":["sql","oracle","count","group-by"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":98,"score":0,"question_id":12835418,"title":"sql Count Statement","body":"<p>I have a table name as JOB_Details and the data show as below:</p>\n\n<pre><code>Age           Department:IT         \n              Male     Female \n30yrs         5          1              \n30-34yrs      3          2              \n35-39yrs      4          4              \n40-49yrs      2          3              \n50-54yrs      1          0              \n</code></pre>\n\n<p>and the output suppose will like:</p>\n\n<pre><code>Age           Department:IT          Total\n              Male     Female \n30yrs         5          1              6\n30-34yrs      3          2              5\n35-39yrs      4          4              8\n40-49yrs      2          3              5\n50-54yrs      1          0              1\nTotal         15         10             25\n</code></pre>\n\n<p>How can I do it? Because when using the count and group by function the result outcome will be not exactly what I want. Can someone mind to give me some suggestion? For your information I use Oracle. </p>\n"},{"tags":["database","oracle","query","plsql","oraclereports"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12851617,"title":"oracle pl/sql how to call back this alias created for a parameter?","body":"<p>i have a query im doing to display records to oracle reports. the parameter i need as selection is the <code>class_code</code> but when user click on the dropdown value it's a bit messy for them(hard to explain here) so they ask to combine the <code>study_intake</code> and <code>class_code</code> as a word which would be clear to them.</p>\n\n<p>now what i did is use AS for alias of a new column which combines the two, but i cant call it back (since it's not the right syntax)</p>\n\n<p>here's a sample of my query:</p>\n\n<pre><code>SELECT DISTINCT STUDENT_ATTENDENTS.IC_PASSPORT, \nSTUDENT_ATTENDENTS.NAME,\n STUDENT_ATTENDENTS.A_DATE, \nSTUDENT_ATTENDENTS.A_TYPE, \nSTUDENT_ATTENDENTS.ATTEN, \nTUTORIAL_CLASSES_MASTER.LECTURER_NAME, \nSTUDENT_ATTENDENTS.COURSE_CODE, \nSTUDENT_ATTENDENTS.SUBJECT_CODE, \nSUBJECT_MASTER_TABLE.CREDIT_POINT,\nTUTORIAL_CLASSES_MASTER.STUDY_INTAKE || ' ' || STUDENT_ATTENDENTS.CLASS_CODE AS Study_Intake_Class_Code\n\n\nFROM STUDENT_ATTENDENTS, TUTORIAL_CLASSES_MASTER, SUBJECT_MASTER_TABLE\n\nWHERE Study_Intake_Class_Code = :CLASS_DODE\nAND STUDENT_ATTENDENTS.SUBJECT_CODE = SUBJECT_MASTER_TABLE.SUBJECT_CODE\nAND (STUDENT_ATTENDENTS.CLASS_CODE = TUTORIAL_CLASSES_MASTER.CLASS_CODE)\n</code></pre>\n\n<p>the line <code>WHERE Study_Intake_Class_Code = :CLASS_DODE</code> will return an error which is </p>\n\n<blockquote>\n  <p>ORA-00904: \"STUDY_INTAKE_CLASS_CODE\": invalid identifier </p>\n</blockquote>\n\n<p>i cant use back the alias. an idea i came up with is to create a <strong>view</strong> but this made the report haywire and affecting all the formulas(i didnt create the original report)</p>\n\n<p>how do i adjust this query to make it work? any ideas or other style of query?</p>\n"},{"tags":["php","oracle","date"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12850905,"title":"How to convert an Oracle timestamp object into a php date?","body":"<p>The date data is like this</p>\n\n<pre><code>09-OCT-12 03.19.59.000000000 PM\n</code></pre>\n\n<p>and it is coming from an object:</p>\n\n<pre><code>$objectvar-&gt;datedata;\n</code></pre>\n\n<p>I've tried this</p>\n\n<pre><code>$date = new DateTime($objectvar-&gt;datedata);\necho $date-&gt;format('M d,Y');\n</code></pre>\n\n<p>it doesn't work, it doesn't display the correct data from the object;</p>\n\n<p>I've also tried this</p>\n\n<pre><code>echo date('M d,Y',strtotime($objectvar-&gt;datedata));\n</code></pre>\n\n<p>it doesn't work too, like it doesn't display the correct data from the object;</p>\n\n<p>what can I do to correctly convert the date?</p>\n"},{"tags":["sql","sql-server","oracle","visual-studio-2010","odbc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2558,"score":0,"question_id":3770665,"title":"Connecting to Oracle on Windows 7","body":"<p>I have installed Oracle Client 10g 32 bit and ODAC 11g R2 on my Windows 7 machine, but I cannot see any Oracle Providers in MS ODBC Administration or when I try to created a linked server to Oralce in SQL Server Management Studio or in Visual Studio 2010. Can anyone please help me out as what to do? I can connect to Oracle server through SQLPlus but get errors when connecting through VS 2010 using MS providers for Oracle. </p>\n\n<p>Please help!</p>\n"},{"tags":["sql","oracle","oracle10g"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1486,"score":4,"question_id":4239972,"title":"Using Oracle SQL to generate nested XML","body":"<p>Friends, </p>\n\n<p>I am using Oracle 10g and I need to generate the results from a table using SQL in the following xml format:</p>\n\n<pre><code>&lt;RESULTS&gt;\n    &lt;ROW&gt;\n        &lt;EMPNO&gt;7839&lt;/EMPNO&gt;\n        &lt;ENAME&gt;KING&lt;/EMPNO&gt;\n        &lt;SUBROWS&gt;\n            &lt;ROW&gt;\n                &lt;EMPNO&gt;7369&lt;/EMPNO&gt;\n                &lt;ENAME&gt;SMITH&lt;/EMPNO&gt;\n                ... Rest of the EMP table records\n                excluding KING\n            &lt;/ROW&gt;\n        &lt;/SUBROWS&gt;\n    &lt;/ROW&gt;\n&lt;/RESULTS&gt;\n</code></pre>\n\n<p>The rule is to show the record selected in the outer row and the subrows should contain all the other records excluding the one shown in the outer row. There is no hierarchy to the records.  </p>\n\n<p>In the example above King is selected in the outer row so the subrows should contain all the records from emp excluding King.</p>\n\n<p>This query gives me the result set I need:</p>\n\n<pre><code>select e.empno,\n       e.ename,\n       cursor(select empno,\n                     ename\n              from emp where empno &lt;&gt; 7839) \nfrom emp e \nwhere empno = 7839\n</code></pre>\n\n<p>However when I try to generate XML from this using the following:</p>\n\n<pre><code>select xmlelement(\"RESULTS\",\n           xmlagg(xmlelement(\"ROW\",\n                      xmlelement(\"EMPNO\", empno),\n                      xmlelement(\"ENAME\", ename),\n                          cursor(SELECT xmlagg(xmlelement(\"SUBROWS\",  xmlelement(\"ROW\",\n                                                     xmlelement(\"EMPNO\", empno),\n                                                     xmlelement(\"ENAME\", ename)\n                                                                                )\n                                                           )\n                                               )\n                                  FROM emp \n                                  WHERE empno &lt;&gt; 7839\n                                  )                            \n                            )\n\n                 )\n                 )                 \nfrom emp \nwhere empno = 7839\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>ORA-22902: CURSOR expression not allowed\n22902. 00000 -  \"CURSOR expression not allowed\"\n*Cause:    CURSOR on a subquery is allowed only in the top-level\n           SELECT list of a query.\n</code></pre>\n\n<p>I have tried using DBMS_XMLGEN:</p>\n\n<pre><code>SELECT DBMS_XMLGEN.getXML('select empno,\n                                  ename,\n                                  cursor(select empno,\n                                                ename\n                                         from emp \n                                         where empno &lt;&gt; 7839) as SUBROWS\n                            from emp \n                            where empno = 7839') \nFROM dual\n</code></pre>\n\n<p>Whist this outputs XML in the expected format it is doesn't show the correct element names. </p>\n\n<p>Any help in solving this would be very much appreciated. </p>\n\n<p>Thanks in advance</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":87,"score":0,"question_id":12848159,"title":"Oracle/SQL - Multi-table join logic - Not sure how else to phrase it","body":"<p>What I'm trying to do is find all customers who purchased a <code>Series X</code> or <code>Series A</code> widget the day prior as long as it was their first time purchasing a widget from that.  In the event they purchased more than one qualifying widget <code>Series X</code> takes rank and I should only get back a record for it.  Hopefully that makes sense so here's the data</p>\n\n<pre><code>[customers]\nc_id     cp_id\n--------------\n1        cp1\n2        cp2\n3        cp3\n4        cp4\n5        cp5\n6        cp6\n7        cp7\n8        cp8\n9        cp9\n10       cp10\n\n[widget_orders - c_id maps to c_id in customers]\nc_id    w_sku   o_date\n----------------------\n1       w1      2012-10-10\n2       w1      2012-10-10\n2       w2      2012-10-10\n3       w1      2012-10-10\n3       w2      2012-10-10\n4       w1      2012-10-10\n4       w2      2012-10-10\n5       w1      2012-10-10\n5       w2      2012-10-10\n6       w1      2012-10-10\n6       w2      2012-10-10\n7       w2      2012-10-10\n8       w1      2012-10-10\n9       w3      2012-10-10\n\n[widgets - w_sku maps to w_sku in widget_orders]\nw_sku   w_series\n------------------\nw1      Series A\nw2      Series X\nw3      Series C\n\n[customer_data - c_id maps to c_id in customers]\ncp_id   seriesA_fPurch  seriesX_fPurch\n--------------------------------------\ncp3     \ncp4     2012-09-15\ncp5                     2012-09-15\ncp6     2012-09-15      2012-09-15\ncp7                     2012-09-15  \ncp8     2012-09-15\n</code></pre>\n\n<p>And here is the data I would like to get back ignoring descriptions in ()</p>\n\n<pre><code>cp_id   series\n--------------\ncp1     Series A (bought series A and had NO prior purchase history)\ncp2     Series X (bought both series, but X has rank - no purchase history)\ncp3     Series X (bought both series, but X has rank - has purchase history recors albeit not for these)\ncp4     Series X (bought both series, but X has rank - already had A history anyways)\ncp5     Series A (bought both series, although X has rank they had previously bought series X)\n</code></pre>\n\n<p>The following people don't show in the results</p>\n\n<pre><code>cp6 - they had previously bought both series\ncp7 - bought a series x, but had in the past\ncp8 - bought a series a, but had in the past\ncp9 - bought a widget in neither series\ncp10 - didnt buy anything\n</code></pre>\n\n<p>Hope all that makes sense and someone could help me out here!</p>\n\n<p>So to summarize the logic and perhaps define it a bit more clearly here is how I would describe what needs to happen in a step-like fashion</p>\n\n<pre><code>1) Find all customers who have no matching records in the customer_data table\n2) Find all customers who have a null value in either *purch column in the customer_data table\n3) Combine these results together\n4) Take the results and find the customers who made a purchase yesterday\n5) Take the results and find the customers who purchased Series A or Series X\n6) Take the results and do the following\n    6a) If the purchase was Series A and they have a value for series A purch already drop them from results\n    6b) If the purchase was Series X and they have a value for series X purch already drop them from results\n7) Take the results and remove duplicate records based on the cp_id - Series X takes presedence over Series A\n</code></pre>\n"},{"tags":["oracle","jdbc"],"answer_count":6,"favorite_count":7,"up_vote_count":14,"down_vote_count":0,"view_count":10660,"score":14,"question_id":1427890,"title":"OracleDataSource vs. Oracle UCP PoolDataSource","body":"<p>I was researching some JDBC Oracle Connection Pooling items and came across a new(er) Oracle Pool implementation called Universal Connection Pool (UCP).  Now this uses a new class, PoolDataSource, for connection pooling rather then the OracleDataSource [with the cache option enabled].  I am debating whether to switch to this new implementation but can't find any good documentation of what (if any) fixes/upgrades this would buy me.  Anyone have an experience with both?  Pluses/Minuses?  Thanks.</p>\n"},{"tags":["oracle","crystal-reports","crystal-reports-2008"],"answer_count":1,"favorite_count":3,"up_vote_count":0,"down_vote_count":0,"view_count":105,"score":0,"question_id":12786209,"title":"Update Reports to filter with an Oracle function in Crystal Reports 2008","body":"<p>I have several reports, each one of them has a few tables included. </p>\n\n<p>Lets say 3 tables, tableA, tableB and tableC.\nI want to use the following Oracle Function to filter the result set passing also a report parameter:</p>\n\n<pre><code>AND function(tableB.field1, tableB.field2, tableB.field3, {?report_parameter}) = 'S'\n</code></pre>\n\n<p>Facts to be aware of:</p>\n\n<ul>\n<li>Oracle Functions can only be used on SQL Expressions and/or SQL Commands in Crystal Reports.</li>\n<li>SQL Expressions cannot contain report parameters (so, not an option).</li>\n<li>Crystal Reports lets you replace a report table with a SQL Command, but does not let you replace several tables to a single SQL Command.</li>\n<li>We do not want to re-build all the reports all over again.</li>\n<li>We do not want to replace a single table to a SQL Command because it affects performance in a high level since Crystal does not transform the tables and the SQL Command on a single query when executing the report.</li>\n<li>This Oracle Function selects data from other tables and therefore can not be rewritten on a Report Custom Function.</li>\n<li>The {?report_parameter} is an information that only the application knows. It is filled by the application before exporting the report to the user.</li>\n</ul>\n\n<p>What could I do to work around this?</p>\n"},{"tags":["oracle","plsql"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":4,"view_count":109,"score":-3,"question_id":12813484,"title":"Procedure using for loop only i.e without cursors or bulkcollect","body":"<p>I have made this procedure using bulkcollect.\nNow, i want to make another procedure doing same task using only for loop, but without using bulkcollect or cursors.\nPlease do help me, how to do it?</p>\n\n<pre><code>PROCEDURE PR_TRIAL_BAL_BULKWITHOUTCUR IS\n\n    VAR_OF_TYP_TBL TYP_TBL;\n\n  BEGIN\n    SELECT * BULK COLLECT INTO VAR_OF_TYP_TBL \n      FROM (SELECT NAME, SUM(CREDIT) AS CREDIT, SUM(DEBIT) AS DEBIT\n              FROM (SELECT (SELECT GL_NAME\n                              FROM QM_GL\n                             WHERE QM_GL.GL_ID = QT_ACCOUNTING.GL_ID) AS NAME,\n                           DECODE(QT_ACCOUNTING.TRANS_TYPE,\n                                  'CR',\n                                  (QT_ACCOUNTING.TRANS_AMOUNT),\n                                  0.00) AS CREDIT,\n                           DECODE(QT_ACCOUNTING.TRANS_TYPE,\n                                  'DR',\n                                  (QT_ACCOUNTING.TRANS_AMOUNT),\n                                  0.00) AS DEBIT\n\n                      FROM QT_ACCOUNTING, QM_ACCOUNTING_PERIOD\n\n                     WHERE QT_ACCOUNTING.VALUE_DATE BETWEEN\n                           QM_ACCOUNTING_PERIOD.PERIODFROM AND\n                           QM_ACCOUNTING_PERIOD.PERIODTO\n                       AND QM_ACCOUNTING_PERIOD.STATUS = 'O')\n             GROUP BY NAME);\n\n    FOR I IN 1 .. VAR_OF_TYP_TBL.COUNT LOOP\n\n      IF (VAR_OF_TYP_TBL(I).CREDIT - VAR_OF_TYP_TBL(I).DEBIT) &gt; 0 THEN\n        INSERT INTO TBL_TRIAL_BALANCE_REPORT\n        VALUES\n          (VAR_OF_TYP_TBL(I).NAME,\n           (VAR_OF_TYP_TBL(I).CREDIT - VAR_OF_TYP_TBL(I).DEBIT),\n           0);\n      END IF;\n      IF (VAR_OF_TYP_TBL(I).DEBIT - VAR_OF_TYP_TBL(I).CREDIT) &gt; 0 THEN\n        INSERT INTO TBL_TRIAL_BALANCE_REPORT\n        VALUES\n          (VAR_OF_TYP_TBL(I).NAME,\n           0,\n           (VAR_OF_TYP_TBL(I).DEBIT - VAR_OF_TYP_TBL(I).CREDIT));\n      END IF;\n\n    END LOOP;\n    VAR_OF_TYP_TBL.DELETE;\n\n  EXCEPTION\n    WHEN OTHERS THEN\n      DBMS_OUTPUT.PUT_LINE(SQLERRM);\n      BEGIN\n        VAR_OF_TYP_TBL.DELETE;\n      EXCEPTION\n        WHEN OTHERS THEN\n          NULL;\n      END;\n  END;\n</code></pre>\n"},{"tags":["java","oracle","jdbc","metadata"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12840102,"title":"Is it possible to get column metatdata from an Oracle DB by using table_name.column_name text label?","body":"<p>I have been given access to a Oracle database, and I am trying to determine if a given column in a table is nullable or not. I can connect to the Oracle DB and get the connection metadata.</p>\n"},{"tags":["sql","oracle","sql-update"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12847955,"title":"Updating Multiple Column with Staging table avoiding Null Values in Staging Table","body":"<p>I want to update multiple column in Table2 table from Table1 table. Staging tables may have null value in it. I just want to update data which has value in the Table1 table - not NULL values.</p>\n\n<p>Please advice</p>\n\n<p>e.g</p>\n\n<pre><code>Table 1                             Table 2\nID    col11   col2     col3         ID1      col1       col2       col3\n3     test    xxxx     (null)       3        (null)   jjj        ffffff\n5     (null)  yyyyy    zzzzzz       5        dddd     (null)     lllllllll\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>ID      col1      col2      col3\n3        test     xxxx      ffffff\n5        dddd     yyyyy     zzzzzz\n</code></pre>\n\n<p>It should not update value in Table 2 will null if value in Table 1 is null. </p>\n\n<p>My approach right now is</p>\n\n<pre><code>UPDATE  Table2 \nSET ( col1 ,col2,col3)  \n      =  (SELECT NVL(col1 ,col11), NVL(col2,col22), NVL(col3,col33)  \n          FROM Test1  \n          WHERE ID = ID1 )\n</code></pre>\n"},{"tags":["sql","oracle","csv","sql-developer"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":177,"score":0,"question_id":9379969,"title":"Full Oracle Data Export","body":"<p>How can I export all user defined tables of an Oracle database into csv files, with \"SQL Developer\") simultaneously?</p>\n"},{"tags":["oracle","business-intelligence"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12525118,"title":"How to update RPD file in OBIEE analytics","body":"<p>I'm new to OBIEE and looking for a way to update my repository file (RPD) i.e. I initially had an RPD configured and now have made some changes to some view in the oracle database (added on column). Now what can I do the get my RPD file updated with this change so that I can see this change (I need to work on the RPD file through administration tool).<br>\nThanks.    </p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12847549,"title":"Oracle/SQL - Find records that or null or may not exist or are null in another table","body":"<p>What I'm trying to do is return all the records my persons table that do not exist in secondary table or that do exist, but only if one they have null values in one of two specific fields.  So given the following tables</p>\n\n<pre><code>person_id   ....\n----------------\n123         ....\n456         ....\n789         ....\n\np_id    colA    colB\n--------------------\n456     aadl\n789     023j    ljlj\n</code></pre>\n\n<p>I would get back the following</p>\n\n<pre><code>person_id   ....\n----------------\n123         ....\n456         ....\n</code></pre>\n\n<p>This would be because person 123 does not exist in the secondary table.  Person 456 would also be returned because they exist, but one of the two columns are null.</p>\n\n<p>Thanks!</p>\n"},{"tags":["oracle","xls","sql-loader"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":234,"score":0,"question_id":4941596,"title":"Loading data from multiple xls files to oracle table","body":"<p>I have Multiple XLS files . I have stored these file names in a table as below</p>\n\n<p>TABLE NAME    SEQUENCE</p>\n\n<p>FILE1.XLS        1\nFILE2.XLS        2\nFILE3.XLS        3</p>\n\n<p>Each file  has  3 fields </p>\n\n<p>FIELD1  FIELD2 FILED3</p>\n\n<p>Now I have to load to data in table  which has four column </p>\n\n<p>FIELD1  FIELD2 FIELD3 FIELD4  ,  where FILED4 should be field by SEQUNCE of file  name.</p>\n\n<p>Please suggest the way to load the data  from the files</p>\n"},{"tags":["oracle","provider","mygeneration"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1625,"score":2,"question_id":1131901,"title":"myGeneration problem with OraOleDB.Oracle provider (?)","body":"<p>I can't make myGeneration tool to work correctly.</p>\n\n<p>This is the connection string that I use:</p>\n\n<p>Provider=OraOLEDB.Oracle.1;Password=pass123;User ID=user1;Data Source=oradb1src;Persist Security Info=True</p>\n\n<p>And when I click on Test connection I get:</p>\n\n<blockquote>\n  <p>[System.Data.OleDb.OleDbException] - ORA-12154: TNS:could not resolve service name</p>\n</blockquote>\n\n<p>[oradb1src is well defined in tnsnames.ora. That is not the problem.]</p>\n\n<p>But when I change the provider to MSDAORA, then connection works fine, but in the Generate window I'm missing the Tables tab on which I should be able to choose tables from my database. I've red somewhere that this is normal with MSDAORA provider, cause mygeneration uses oledb provider for meta data retrieval.</p>\n\n<p>But, why do I get this insane error message when using OralOLEDB.Oracle provider??? Does anyone know?</p>\n\n<p>Thank you in advance...</p>\n\n<p>PS. I have drivers for oracle 9.2 and oracle 10 installed on my computer.</p>\n"},{"tags":["oracle","stored-procedures","plsql","toad"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":6160,"score":1,"question_id":3546101,"title":"Display results in output parameter in Toad","body":"<p>I have a stored procedure in Oracle and I'm using an out parameter in it..\nI want to know how to display the output in Toad..</p>\n"},{"tags":["java","oracle","delete","schema","dbunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":12846970,"title":"How to delete and insert new items to oracle db using DBUnit?","body":"<p>I'm trying to use DBUnit library for execute delete items(records) in my database (Oracle) DatabaseOperation.DELETE.execute(connection, items).  </p>\n\n<p>I'm using DBUnit v2.4.9</p>\n\n<p>I have created the simple method. At this moment I'm trying remove items (stored to my resource - xml file):</p>\n\n<pre><code>import java.sql.Connection;\n\n    public void cleanAndInitTables(Connection con, String[] resources, String defaultSchema) throws Exception {\n        FlatXmlDataSetBuilder dataSet = new FlatXmlDataSetBuilder();\n        try {\n            for (int i = 0; i &lt; resources.length; i++) {\n                IDataSet items =\n                        dataSet.build(CleanerUtil.getResourceFromClassPath(resources[i],\n                                EndToEndTest.class.getName()));\n                IDatabaseConnection dbUnit = new OracleConnection(con, defaultSchema);\n                DatabaseConfig config = dbUnit.getConfig();\n                config.setProperty(DatabaseConfig.FEATURE_SKIP_ORACLE_RECYCLEBIN_TABLES, Boolean.valueOf(true)); \n                config.setProperty(DatabaseConfig.FEATURE_QUALIFIED_TABLE_NAMES, Boolean.valueOf(true));\n                DatabaseOperation.DELETE.execute(dbUnit, items);\n//                DatabaseOperation.INSERT.execute(dbUnit, items);\n            }\n        } finally {\n            con.close();\n        }\n    }\n</code></pre>\n\n<p>I'm getting connection with help this simple methods:</p>\n\n<pre><code>public static Connection getSimpleConnection(String driver, String url, String user, String pass) {\n\nConnection result = null;\ntry {\n   Class.forName(driver).newInstance();\n}\ncatch (Exception ex){\n}\n\ntry {\n  result = DriverManager.getConnection(url, user, pass);\n}\ncatch (SQLException e){\n}\nreturn result;\n}\n</code></pre>\n\n<p>And I have got ERROR message:</p>\n\n<p>ERROR org.dbunit.database.DatabaseDataSet - Table 'my_table' not found in tableMap=org.dbunit.dataset.OrderedTableNameMap[_tableNames=[SCHEMA.SOME_TABLE, SCHEMA.MY_TABLE]</p>\n\n<p>String[] conPropOracle = {\"oracle.jdbc.OracleDriver\", \"jdbc:oracle:thin:@127.0.0.1:1521:db_name\" , \"user\", \"pass\"};</p>\n\n<p>Some logs:</p>\n\n<ul>\n<li>DEBUG org.dbunit.util.SQLHelper - isEscaped returns 'false' for tableName=MY_SCHEMA (dbIdentifierQuoteString=\") </li>\n<li>DEBUG org.dbunit.database.DatabaseConnection - Database connection info: </li>\n<li>database product name=Oracle</li>\n<li>database version=Oracle Database 10g Enterprise Edition Release 10.2.0.1.0 - 64bit </li>\n<li>database major version=10</li>\n<li>database minor version=2</li>\n<li>jdbc driver name=Oracle JDBC driver</li>\n<li>jdbc driver version=11.1.0.7.0-Production</li>\n<li>jdbc driver major version=11</li>\n<li>jdbc driver minor version=1</li>\n</ul>\n\n<p>I also tried it with JdbcDatabaseTester - define schema and DatabaseConnection(con, schema). But I have got the same result.</p>\n\n<p>Of cause, I can use sql scripts and clean my data very vell without this library. But I read that this lib can do it too. \nDoes any one know how to solve this problem without exucuting sql file.</p>\n\n<p>Thanks,\nSerhii K.</p>\n"},{"tags":["c#","oracle","ado.net"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":69,"score":-2,"question_id":12837687,"title":"How do I login with the database, seems to be required?","body":"<p>Usually we go into PL/SQL and write 3 lines of code to update a row in a table:</p>\n\n<pre><code>execute dwpakke.dwp_logginn('username');\nupdate...;\ncommit;\n</code></pre>\n\n<p>But I want to appify this and made a small app in C# to do my bidding. BUT, it seems as I need to execute the login and do a commit. But how do I do this from my app? I've tried just running the commands, but that execute is a invalid statement :-</p>\n\n<p>What I've tried:</p>\n\n<pre><code>cmd = conn.CreateCommand();\ncmd.CommandType = CommandType.Text;\ncmd.CommandText = \"UPDATE tablename SET status = 2, recordtype = 3 WHERE someid = :param1 AND otherid = :param2\";\ncmd.Parameters.Add(\"param1\", textbox1.Text);\ncmd.Parameters.Add(\"param2\", textbox2.Text);\ncmd.ExecuteNonQuery();\n</code></pre>\n\n<p>This results in the ORA-20501 Error.</p>\n\n<p>ORA-20501 is a user defined message and (translated it says): </p>\n\n<blockquote>\n  <p>database-login must be called, package variable is not initialized correctly.</p>\n</blockquote>\n\n<p>So how do I run the execute part and commit part of my original l script?</p>\n"},{"tags":["c#","oracle","oracle-spatial"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12846627,"title":"\"invalid LRS segment\" when querying an Oracle Spatial DB","body":"<p>I have a table of GIS segments in an Oracle Spatial database.  I'm using C# and ODP to connect to the database.  For a given measure from the start of a segment, I want to find the GPS coordinates for that point.  I'm running the following query:</p>\n\n<pre><code>select g.geom.sdo_ordinates ord_array from \n(select sdo_lrs.locate_pt(shape,0.02,0) as geom from test_schema.test_table\nwhere route='ABC' and segmentnum='101.1') g\n</code></pre>\n\n<p>where <code>shape</code> is of type SDO_GEOMETRY.  I'm getting the following error:</p>\n\n<pre><code>ORA-13331: invalid LRS segment\n</code></pre>\n\n<p>Is there a problem with how I'm passing <code>shape</code> to <code>locate_pt()</code>?  The Oracle Spatial documentation says the argument should be SDO_geometry, so that seems ok.</p>\n"},{"tags":["c#","database","oracle"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":110,"score":4,"question_id":12838844,"title":"C# - Should I use static database connection","body":"<p>In my application to connect to Orace database I always create a new connection, open it, execute OracleCommands and finally close it afterwards. Recently I thought implementing a static connection would be a better idea. Say I have a static connection that I can access from anywhere. Each time I need to connect to database I can check for the state of my static connection,open it if it's not already open and close it afterwards. Do you think this would be beneficial or there are more disadvantages?</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12842848,"title":"Why Oracle doesn't see the alias in the sub sub query?","body":"<p>It looks like Oracle doesn't see the c alias in the subquery. The returned error is: ORA-00904: \"C\".\"FLH_PUNTO_EROGAZIONE\": identificativo non valido</p>\n\n<p>It seems oracle just looks for alias in the 1 degree external statement</p>\n\n<pre><code>SELECT (SELECT 1\n          FROM (SELECT 1 AS SomeAlias\n                  FROM out.ANAG_PDF_PWR_T840\n                 WHERE campo34 = c.flh_punto_erogazione\n                UNION\n                SELECT 1\n                  FROM out.ANAG_PDF_T812\n                 WHERE campo34 = c.flh_punto_erogazione) Something)\n  FROM etl_elab_interf_flat f, eni_flussi_hub c,  eni_info_extra_forn ief, conf_forniture forn\n WHERE     f.eif_campo198(+) = c.flh_id_messaggio\n       AND f.idde_identif_dati_ext_id(+) = c.idde_identif_dati_ext_id\nAND c.flh_punto_erogazione IN ('8003576015', '8003576054', '8003576551', '8003576565')\n       AND eif_campo200 IN ('FORNITURA_ENI')\n       AND c.flh_flag_ann = 'N'\n       --\n       AND forn.forn_old_codice_fornitura (+) = c.flh_fornitura\n       AND forn.forn_fornitura_id  = ief.forn_fornitura_id(+);\n</code></pre>\n"},{"tags":["sql","oracle","function","linked-server"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":12843145,"title":"Error calling Oracle function on linked server","body":"<p>I am calling an Oracle packaged function from <code>SQL Server 2008 R2</code> and am getting the following error:</p>\n\n<blockquote>\n  <p>OLE DB provider \"OraOLEDB.Oracle\" for linked server \"TEST\" returned\n  message \"ORA-06502: PL/SQL: numeric or value error: character string\n  buffer too small</p>\n</blockquote>\n\n<p>Here is the call I am attempting to make:</p>\n\n<pre><code>  DECLARE @p_pidm VARCHAR(8)\n  DECLARE @p_emal_code VARCHAR(4)\n  DECLARE @p_email_address VARCHAR(90)\n  DECLARE @p_rowid VARCHAR(18) = NULL\n  DECLARE @p_exists VARCHAR(1)\n\n  SET @p_pidm = '11111'\n  SET @p_emal_code = 'POA'\n  SET @p_email_address = 'mytest@email.com'\n\n  EXECUTE ('BEGIN ? := gb_email.f_exists(?,?,?,?);END;',@p_exists, @p_pidm, @p_emal_code, @p_email_address, @p_rowid)\n  AT [TEST]\n</code></pre>\n\n<p>If I execute this call in SQL Developer it works fine. here's the query I'm executing there:</p>\n\n<pre><code>set serveroutput on ;\nDECLARE rec_exists VARCHAR2(1) ;\nbegin\nrec_exists := gb_email.f_exists(11111,'POA','mytest@email.com',NULL);\nDBMS_OUTPUT.PUT_LINE(rec_exists);\nend;\n</code></pre>\n\n<p>I've tried changing the size of <code>@p_exists</code> to <code>VARCHAR(MAX)</code> and that did nothing. I've verified that all of the variables I've declared match the definition for the package/function I'm calling.</p>\n\n<p>This is not something I have to do often so any help in solving this problem would be greatly appreciated.</p>\n\n<p>Here's the function definition:</p>\n\n<pre><code>FUNCTION f_exists(p_pidm          goremal.goremal_pidm%TYPE,\n                  p_emal_code     goremal.goremal_emal_code%TYPE,\n                  p_email_address goremal.goremal_email_address%TYPE,\n                  p_rowid         gb_common.internal_record_id_type DEFAULT NULL)\n  RETURN VARCHAR2\n\n\nChecks to see if a record exists.   \n\n\nParameters  \n p_pidm The PIDM of the entity who owns this e-mail information. NUMBER(8) Required Key     \n p_emal_code The type of the e-mail address. VARCHAR2(4) Required Key     \n p_email_address The e-mail address. VARCHAR2(90) Required Key     \n p_rowid Database ROWID of record to be selected. VARCHAR2(18)     \n\nReturns  \n Y if found, otherwise N.\n</code></pre>\n"},{"tags":["java","oracle","jdbc","timezone"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":113,"score":1,"question_id":12843172,"title":"Java date long value changed after insert, select query","body":"<p>AFAIK, java Date type is independent from Timezone which means that it represents specific moment of time as long typed value. I found really weird thing here.</p>\n\n<p>This is the original value i tried to insert.</p>\n\n<p><strong>(http-0.0.0.0-9080-4) 1352955600000  &lt;-- long integer.</strong></p>\n\n<p><strong>(http-0.0.0.0-9080-4) Thu Nov 15 00:00:00 EST 2012  &lt;-- User Friendly Format.</strong></p>\n\n<p>After i finished inserting into Oracle 11g database, the value has changed!</p>\n\n<p><strong>(http-0.0.0.0-9080-4) 1352952000000</strong></p>\n\n<p><strong>(http-0.0.0.0-9080-4) Wed Nov 14 23:00:00 EST 2012</strong></p>\n\n<p>How could this happen?? The more weird thing is it only happens specific environments such as Jboss.\nI'm currently using below environments. </p>\n\n<ul>\n<li>java 1.6</li>\n<li>ibatis 2.34</li>\n<li>jboss-5.1 (server)</li>\n<li>tomcat 6.0 (local) </li>\n<li>oracle 11g</li>\n</ul>\n\n<p>Is there anybody who can give me a clue or link to be helpful?\nit really bugging me!!</p>\n\n<hr>\n\n<p>I adds more information here.\nI uses Date type in java, and TIMESTAMP WITH TIMEZONE in oracle.</p>\n\n<p>I stored value (\"11/15/2012\", MM/dd/yyyy, US/Eastern) in Date.</p>\n\n<p>And Sent this value to Oracle using iBatis.And it shows like </p>\n\n<p><strong>12/11/15 00:00:00.000000000 -04:00</strong></p>\n\n<p>which is incorrect. It's time zone should be -05:00 because DST will has ended in November.</p>\n\n<p>And more, when i get this value from my java code, </p>\n\n<p>it returns  <strong>Wed Nov 14 23:00:00 EST 2012</strong> , which i expected as <strong>Thu Nov 15 00:00:00 EST 2012</strong>.</p>\n\n<p><strong>Problem Solved.</strong></p>\n\n<p>Thanks Folks. I found the reason. It's known bug of ojdbc driver.\nPlease refer this <a href=\"https://forums.oracle.com/forums/thread.jspa?threadID=354702\" rel=\"nofollow\">link</a>.  </p>\n"},{"tags":["oracle","oracle11g","pivot-table","crosstab"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12843840,"title":"Converting Access PIVOT query to Oracle 11g","body":"<p>I have an MS Access PIVOT query which needs to be migrated to Oracle 11g.</p>\n\n<pre><code>    TRANSFORM Format(Sum(tblOrderLine.ItemQtyCur), '#0.0') AS [The Value]\n\nSELECT  tblOrderLine.OrderStatus, tblOrderLine.OrdNo, tblOrderLine.OrdlNo, Format(Sum(tblOrderLine.ItemQtyCur), '#0.0')  As SumConfQty\n\nFROM tblOrder INNER JOIN (tblOrderLine LEFT JOIN tblArticle ON tblOrderLine.ItemId = tblArticle.ArtNo) ON tblOrder.OrdNo = tblOrderLine.OrdNo\n\nGROUP BY  tblOrderLine.OrderStatus, tblOrderLine.OrdNo, tblOrderLine.OrdlNo\n\nPIVOT tblOrderLine.LastDate\n</code></pre>\n\n<p>I am unable to convert this to oracle 11g PIVOT. </p>\n\n<p>Can any one help me with this.... </p>\n\n<p>Edit : </p>\n\n<p>Will it b like this.....</p>\n\n<pre><code>WITH pivot_data AS (\nSELECT  tblOrderLine.OrderStatus, tblOrderLine.OrdNo, tblOrderLine.OrdlNo, Format(tblOrderLine.ItemQtyCur, '#0.0')  As SumConfQty\nFROM tblOrder INNER JOIN (tblOrderLine LEFT JOIN tblArticle ON tblOrderLine.ItemId = tblArticle.ArtNo) ON tblOrder.OrdNo = tblOrderLine.OrdNo\nGROUP BY  tblOrderLine.OrderStatus, tblOrderLine.OrdNo, tblOrderLine.OrdlNo\n)\nSELECT * FROM pivot_data\nPIVOT XML (\nFormat(Sum(tblOrderLine.ItemQtyCur), '#0.0')\nFOR tblOrderLine.LastDate\nIN (\nSELECT  tblOrderLine.LastDate\nFROM tblOrder INNER JOIN (tblOrderLine LEFT JOIN tblArticle ON tblOrderLine.ItemId = tblArticle.ArtNo) ON tblOrder.OrdNo = tblOrderLine.OrdNo\nGROUP BY  tblOrderLine.OrderStatus, tblOrderLine.OrdNo, tblOrderLine.OrdlNo\n)\n);\n</code></pre>\n"},{"tags":["oracle","oracle11g","compare","column"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12799533,"title":"How to compare values across multiple columns?","body":"<p>Assume all value columns have the same datatype.   I would like the highest of all values with the id in the results of a SELECT query.  </p>\n\n<p>Table Structure:</p>\n\n<pre><code>table_a: id, value1, value2, value3, value4, value5\n</code></pre>\n\n<p>Example data:</p>\n\n<pre><code>id, value1, value2, value3, value4, value5\n2, 125, 256, 133, 400, 67\n3, 14, 14, 14, 3, 6\n4, 325, 441, 441, 975, 3\n</code></pre>\n\n<p>Example desired results:</p>\n\n<pre><code>id, highest_value\n2, 400\n3, 14\n4, 975\n</code></pre>\n\n<p>I started down the path of a CASE statement but that got messy fast.  I tired a sub-select but failed in getting that to work.  Is there a clean way to compare several column values to each other?</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":269,"score":2,"question_id":8638048,"title":"How to programmatically get provisioning resources with oim 11g client api","body":"<p>I'm using the oracle OIM 11g api (in packages oracle.iam). I use the class oracle.iam.platform.OIMClient to get all the OIM client services like UserManager.</p>\n\n<p>I need to find the resources got with the provisioning workflows. Which service can I use? How can I do with the OIM api?</p>\n"},{"tags":["oracle","database-schema"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":49,"score":3,"question_id":12843141,"title":"Is there any reason to FK a PK column to itself","body":"<p>I'm trying to understand whether the situation best described in SQL below is a WTF or a hack of some sort:</p>\n\n<pre><code>alter table CORE_FIELD \nadd constraint R_106 foreign key (CO_FIELD_ID) \nreferences CORE_FIELD (CO_FIELD_ID) on delete set null;\n</code></pre>\n\n<p>Database: Oracle 11.2.0.1</p>\n"},{"tags":["django","oracle","django-south","sentry"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12843164,"title":"django sentry doesn't work with oracle backend","body":"<p>I've just installed django sentry and configured it to use oracle backend. Unfortunately sentry web interface doesn't work properly and on the console I can see this type of errors:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"/usr/local/lib/python2.7/dist-packages/raven-2.0.6-py2.7.egg/raven/utils/serializer/manager.py\", line 69, in transform\n    return self.transform(repr(value))\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/template/context.py\", line 29, in __repr__\n    return repr(self.dicts)\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/template/context.py\", line 29, in __repr__\n  return repr(self.dicts)\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/query.py\", line 72, in __repr__\n  data = list(self[:REPR_OUTPUT_SIZE + 1])\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/query.py\", line 87, in __len__\n  self._result_cache.extend(self._iter)\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/query.py\", line 291, in iterator\n  for row in compiler.results_iter():\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/sql/compiler.py\", line 763, in results_iter\n  for rows in self.execute_sql(MULTI):\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/sql/compiler.py\", line 818, in execute_sql\n  cursor.execute(sql, params)\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/backends/oracle/base.py\", line 675, in execute\n  return self.cursor.execute(query, self._param_generator(params))\nDatabaseError: ORA-00907: missing right parenthesis\n</code></pre>\n\n<p>I supposed the problem is caused by south which is sentry dependency and has only alpha support for the oracle backend. Does anyone have experience with that?</p>\n\n<p>Also, how can I see actual SQL statements produced by ORM? How to configure sentry to see that? That would be very helpful.</p>\n"},{"tags":["oracle","ssis","union"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":12824784,"title":"Why does an Oracle Union create a duplicate in SSIS?","body":"<p>In PLSQL I run:</p>\n\n<pre><code>truncate table MyOracleTableName;\ncommit work;\n\ninsert into MyOracleTablename\nselect a,b,c,trunc(sysdate) as datadate\nfrom AnotherOracleTableName\nwhere there is a ton of nasty criteria\n\nunion\nselect a,b,c,trunc(sysdate) as datadate from AnotherOracleTableName\nwhere there is a ton of different nasty criteria;\ncommit work;\n</code></pre>\n\n<p>In PLSQL Developer this inserts one row.\nWhen I run the SQL (without the semi colons and the commit work statements) in SSIS, I get a primary key violation from MyOracleTableName.</p>\n\n<p>I have validated that the truncate from SSIS is committed in Oracle.</p>\n\n<p>When I run the  SQL above in PLSQL Developer and replace the union with union all, I see a second row and the insert fails for a PK violation. As it should with a union all allowing the duplicate.</p>\n\n<p>This is currently part of an SSIS 2005 package using MSDAORA where it works just fine. I am now re-writing in SSIS 2008 using Native OLE DB providor for Oracle.</p>\n\n<p>I cannot use MSDAORA in my new environment. Is this a driver issue and is there a work around other than breaking these into multiple statements where the second inserts only what is not already in MyOracleTableName?</p>\n\n<p>Regards.</p>\n"},{"tags":["c++","oracle","stored-procedures","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12619209,"title":"CLOB doesn't contain any data","body":"<p>From a store procedure I want to output a <code>CLOB</code>, because a <code>varchar2</code> is not long enough (even if I just use 255 chars in this example).</p>\n\n<p>I found some oracle examples and tried to use them with my code. But sadly there seems no content to be inside of my <code>CLOB</code>. How can I write properly into the <code>CLOB</code>?</p>\n\n<p>Here is what the C++ code looks like:</p>\n\n<pre><code>extern \"C\" DLLEXPORT \nvoid version(OCIExtProcContext* context, OCILobLocator **out, sb4 *ind_out){\n    OCIEnv* envh;\n    OCISvcCtx* svch;\n    OCIError* errh;\n    OCIExtProcGetEnv (context, &amp;envh, &amp;svch, &amp;errh);\n\n    std::string versioninfo;\n    versioninfo = \"103\";\n\n    oraub8 written = 10;\n\n    OCIDescriptorAlloc(envh, \n                       (dvoid **) out,\n                       (ub4) OCI_DTYPE_LOB,       /* Type of Descriptor */\n                       (size_t) 0, \n                       (dvoid **) 0);\n    OCILobTrim2(svch, \n               errh, \n               *out,\n               (ub4)1);\n\n\n    OCILobWrite2(/*svcctx*/svch, /*errh*/errh, /*ociloblocator*/*out,\n                 /*byte_amtp*/NULL, /*char_amtp*/NULL, /*offset*/1,\n                 /*bufp*/(void*)versioninfo.c_str(), /*buflen*/versioninfo.size(),\n                 /*piece*/OCI_ONE_PIECE, /*context for callback*/NULL,\n                 /*callback*/NULL, /*csid*/0, /*csfrm*/SQLCS_IMPLICIT);\n    *ind_out = 0;\n    return;\n}\n</code></pre>\n\n<p>The SP is registered as follows:</p>\n\n<pre><code>create or replace\nprocedure version(versioninfo OUT clob) as\n    external name \"version\" library myLib language c with context \n    parameters (context, versioninfo, versioninfo INDICATOR SB4);\n</code></pre>\n\n<p>I call the SP like this:</p>\n\n<pre><code>declare\n  res clob;\n  begin\n  --dbms_lob.createtemporary(res,true);\n  version(res);\n  dbms_output.put_line(dbms_lob.substr(res, 255, 0));\nend;\n</code></pre>\n\n<p>As you can see I also tried allocating the <code>CLOB</code> before calling the SP, but that didn't help much. What did I miss?</p>\n"},{"tags":["java","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12842168,"title":"the issue about the ResultSet.TYPE_SCROLL_INSENSITIVE","body":"<p>my database is oracle ,the oracle charset is \"us7ascii\".and i save chinese charset in the database ,normally ,i get the data from the database ,use </p>\n\n<p><code>Statement s =conn.createStatement();</code></p>\n\n<p>then execute the sql, then use </p>\n\n<p><code>new String (string.getBytes(\"iso-8859-1\"),\"gbk\")</code></p>\n\n<p>i can get the correct data.but if i use:</p>\n\n<p><code>Statement s = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,  ResultSet.CONCUR_READ_ONLY);</code> </p>\n\n<p>still use:</p>\n\n<p><code>new String (string.getBytes(\"iso-8859-1\"),\"gbk\")</code></p>\n\n<p>convert the encode,but i can't get the correct data ,the result is \"?????\" ,why ?</p>\n"},{"tags":["oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":47,"score":0,"question_id":12840692,"title":"Error while loading shared libraries: libm.so.6","body":"<p>I am starting  Discoverer which is integrated with Oracle Apps 11i instance.</p>\n\n<p>While starting disco 10g, getting discoverer preference server and service status as down. I checked the log file, getting the following:</p>\n\n<pre><code>/SID/disco/product/disco_1012/bin/DiscSrvcStat: \nerror while loading shared libraries: libm.so.6: \ncannot open shared object file: No such file or directory.\n</code></pre>\n\n<p>Please let me know any thing is related to LD_ASSUME_KERNEL and let me know how to  troubleshoot the issue.</p>\n"},{"tags":["oracle","shell","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2613,"score":1,"question_id":4554839,"title":"UNIX script Fetch the SQL query output to a file","body":"<p>I have a SQL script</p>\n\n<pre><code>select fh.box_name \nfrom file_update_history fh,update_file_vw ff\nWHERE\nff.file_id=fh.file_id \nand fh.act_record_count IS NULL\nAND FF.STATUS_CD &lt;&gt; 'OLD'\nand to_char(fh.access_date,'YYYYMMDD') between to_char(SYSDATE, 'YYYYMMDD') and to_char(SYSDATE+1, 'YYYYMMDD')\norder by fh.exp_arr_time_update_file,FF.FILE_NAME;\n</code></pre>\n\n<p>I need to get/spool the output of this SQL into a flat file. Which should have the query output. I am not getting the output of the query into the file.</p>\n\n<p>I have used</p>\n\n<pre><code>sqlplus /NOLOG &lt;&lt;My_DB &gt; $DB_OUTPUT_FILE\nset feedback on;\nset term on;\nset echo on;\nset heading off;\nset underline off;\nset pagesize 10000;\nset linesize 999;\nset wrap off;\nWHENEVER SQLERROR EXIT 20;\nconnect ${My_DB_USER}/${My_DB_PASSWORD} ;\nselect fh.box_name \nfrom file_update_history fh,update_file_vw ff\nWHERE\nff.file_id=fh.file_id \nand fh.act_record_count IS NULL\nAND FF.STATUS_CD &lt;&gt; 'OLD'\nand to_char(fh.access_date,'YYYYMMDD') between to_char(SYSDATE, 'YYYYMMDD') and to_char(SYSDATE+1, 'YYYYMMDD')\norder by fh.exp_arr_time_update_file,FF.FILE_NAME;\nexit\nMy_DB\n</code></pre>\n"},{"tags":["oracle","plsql","sqlplus","plsqldeveloper","tnsnames"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":375,"score":0,"question_id":12825635,"title":"ORA-12154: TNS:could not resolve the connect identifier specified (PLSQL Developer)","body":"<p>I need to use PLSQL Developer to access oracle databases. I get the following error when I try to connect to my database. <code>ORA-12154: TNS:could not resolve the connect identifier specified.</code> I am able to use SQLPLUS from the command line to connect to the database, and <b>tnsping</b> returns successfully, but I can't figure out why PLSQL Developer will not work - it's using the right <i>tnsnames.ora</i> file, and the connection string in there is correct because it's the same one that <b>tnsping</b> uses.</p>\n\n<p>Anyone have an idea what I can do to fix this? I've looked at other threads about this specific error with no luck.</p>\n\n<p><b>tnsnames.ora</b></p>\n\n<pre><code>    ORCL =\n      (DESCRIPTION = \n      (ADDRESS = (PROTOCOL = TCP)(HOST = MININT-AIVKVBM)(PORT = 1521)) \n      (CONNECT_DATA = \n        (SERVER = DEDICATED) \n        (SERVICE_NAME = orcl)\n      )\n    )\n</code></pre>\n\n<p><b>sqlnet.ora</b></p>\n\n<pre><code>     SQLNET.AUTHENTICATION_SERVICES= (NTS)\n     NAMES.DIRECTORY_PATH= (TNSNAMES, EZCONNECT)\n</code></pre>\n\n<p><b>sqlpus command line</b>\n<a href=\"http://i.stack.imgur.com/yH5lL.png\" rel=\"nofollow\">image here</a></p>\n\n<p><b>PLSQL Developer Connection Preferences</b>: <a href=\"http://i.stack.imgur.com/WdbUP.png\" rel=\"nofollow\">image here</a></p>\n"},{"tags":["c#","oracle","system.data.oracleclient"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":393,"score":0,"question_id":11048910,"title":"OracleCommand SQL Parameters Binding","body":"<p>I have a problem with the binding of the below parameter. The connection works because I had tested it without using parameters. However, the value of the query before being executed is still using '@userName' instead of 'jsmith' for example. </p>\n\n<p>What is the problem? Is this not the right way to go around binding? </p>\n\n<pre><code>public static String GetFullName(String domainUser)\n{\n    DataTable dT;\n    String fullName = \"\";\n\n    OracleConnection db = DatabaseAdapter.GetConn();\n    db.Open();\n\n    OracleCommand oraCommand = new OracleCommand(\"SELECT fullname FROM user_profile WHERE domain_user_name = '@userName'\", db);\n    oraCommand.BindByName = true;\n    oraCommand.Parameters.Add(new OracleParameter(\"@userName\", domainUser));\n\n    OracleDataReader oraReader = null;\n    oraReader = oraCommand.ExecuteReader();\n\n    if (oraReader.HasRows)\n    {\n        while (oraReader.Read())\n        {\n            fullName = oraReader.GetString(0);\n        }\n    }\n    else\n    {\n        return \"No Rows Found\";\n    }\n\n    oraReader.Close();\n    db.Close();\n    db.Dispose();\n\n    return fullName;\n}\n</code></pre>\n\n<p>EDIT: I added @ to the parameter field name, but it still does not fix it. </p>\n"},{"tags":["sql","oracle","view","oracle-sqldeveloper"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12840497,"title":"Oracle listagg function doesn't work in view","body":"<p>I have query </p>\n\n<pre><code>select ss.subj_id, sum(ss.credits) as credits, listagg(cv.title, '; ') \nwithin group (order by cv.title) as semesters\nfrom subjects_semesters ss, classifier_values cv\nwhere ss.semesters_lov = cv.clva_id\ngroup by ss.subj_id;\n</code></pre>\n\n<p>And when run it in sqlDeveloper (3.2, same with older) worksheet everything works. But when i try to make a view based on this query, i get</p>\n\n<pre><code>Error(s) parsing SQL:\nUnexpected token near *!* in the following:\nwithin *!*group (order by cv.title) as semesters\n</code></pre>\n\n<p>When click  \"Test query\" returns \"Query executed successfully\" but if hit \"ok\" to create view i get the previous error.</p>\n"}]}
{"total":22203,"page":13,"pagesize":100,"questions":[{"tags":["sql","database","oracle","date","group-by"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12840011,"title":"How to get the rows that is in the same week?","body":"<p>I have a database and a date column in the database which has values like 5/2/2012 vs. I am trying to get all the rows that is in the same week and count each week how man row it has.\nI try to get an output like the below:</p>\n\n<p>For example</p>\n\n<pre><code>8-14 October  |  15\n1-7 October   |  8\n24-30 September | 12\netc...\n</code></pre>\n\n<p>I will probably use group by and count statement and functions but ı have no idea how to detect a week like 8-14 October.</p>\n\n<p>The database is a maximo database by oracle. Thanks.</p>\n"},{"tags":["oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":61,"score":3,"question_id":12837685,"title":"how to use dual foreign key in oracle 10g","body":"<p>I have created two tables</p>\n\n<pre><code>create table ref1(id varchar2(3) primary key);\ncreate table ref2(id varchar2(3) primary key);\n</code></pre>\n\n<p>Now I want to create a third table with a single column as foreign key for both ref1.id and ref2.id </p>\n\n<pre><code>create table actual(p varchar2(3) );\n</code></pre>\n\n<p>How can i do it?</p>\n"},{"tags":["oracle","plsql","overflow","numeric"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":74,"score":3,"question_id":12829231,"title":"What Causes the Numeric Overflow in this PL/SQL Function?","body":"<p>I can run this command on Oracle 10.2 without problem:</p>\n\n<pre><code>SQL&gt; select instr(unistr('foo'), chr(4050596145)) as hazit from dual;\n\n     HAZIT\n----------\n     0\n</code></pre>\n\n<p>So I tried to encapsulate it into a function:</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION hazit(string IN VARCHAR2) RETURN INTEGER\nAS\nBEGIN\n    RETURN instr(unistr(string), chr(4050596145));\nEND;\n/\n\nFunction created.\n</code></pre>\n\n<p>But I get a numeric overflow error when I try to use it:</p>\n\n<pre><code>SQL&gt; select hazit('foo') FROM DUAL;\nselect hazit('foo') FROM DUAL\n       *\nERROR at line 1:\nORA-01426: numeric overflow\nORA-06512: at \"DWHEELER.HAZIT\", line 4\n</code></pre>\n\n<p>What gives?</p>\n"},{"tags":["sql","oracle","crud"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12827032,"title":"Create and copy a table from one SQL database to another","body":"<p>Let's say I have a production database and a development database. </p>\n\n<p>The <code>CUSTOMER_PERMISSIONS</code> table is created and populated in the development database. </p>\n\n<p>What is the best way to create and copy the <code>CUSTOMER_PERMISSIONS</code> table to the production database? </p>\n\n<pre><code>INSERT INTO CUSTOMER_MARKET_PERMS\nSELECT * FROM indeiso.dbo.CUSTOMER_MARKET_PERMS\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>INSERT INTO CUSTOMER_MARKET_PERMS\nSELECT * FROM inukiso.dbo.CUSTOMER_MARKET_PERMS\nError at Command Line:668 Column:25\nError report:\nSQL Error: ORA-00933: SQL command not properly ended\n00933. 00000 -  \"SQL command not properly ended\"\n*Cause:    \n*Action:\n</code></pre>\n\n<p>I am using Oracle 12 database system, and i am not sure why it is throwing this error</p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":12837811,"title":"Error while trying to retrieve text for error ORA-01804","body":"<p>I am having an issue to connect my C++ application to my Oracle DB,I get an error \"[OracleException] errcode: 1804, desc: Error while trying to retrieve text for error ORA-01804\".</p>\n"},{"tags":["oracle","data","datapump"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12836292,"title":"Oracle Data Pump Import imports LONG with spaces after evfery character","body":"<p>I'm importing an 11g oracle schema into a 10g database using data pump import/export. The problem is that on one of my LONG columns, when importing the data data pump seems to put a space after every character, so the data goes from looking like this:</p>\n\n<p>{somedata}</p>\n\n<p>To this:</p>\n\n<p>{ s o m e d a t a }</p>\n\n<p>This obviously breaks the application that is trying to use this database. Is there a way round this?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["oracle","oracle8i"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12835177,"title":"Oracle: merge two rows","body":"<p>I have a pairs of related rows in my table. </p>\n\n<p>How to merge these rows:</p>\n\n<pre><code>date                         col1 col2\n2012-09-11 13:28:21.0000000  A    50\n2012-09-11 13:28:21.0000000  A    -50\n</code></pre>\n\n<p>to one row</p>\n\n<pre><code>date                         col1 col2 col3\n2012-09-11 13:28:21.0000000  A    50   -50\n</code></pre>\n\n<p>if there can be a small difference between two dates (about one seconds and it occurs in 1 of 100 pairs only)? e.g.:</p>\n\n<pre><code>2012-09-11 13:28:21.0000000\n2012-09-11 13:28:22.0000000\n</code></pre>\n\n<p>or in worse case, one second change whole minute:</p>\n\n<pre><code>2012-09-11 13:28:59.0000000\n2012-09-11 13:29:00.0000000\n</code></pre>\n\n<p><strong>update (string column):</strong></p>\n\n<p>how to merge the same lines with an additional col3 with string values?</p>\n\n<pre><code>date                         col1 col2 col4\n2012-09-11 13:28:21.0000000  A    50   abc\n2012-09-11 13:28:21.0000000  A    -50  def\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>date                         col1 col2 col3 col5 col6\n2012-09-11 13:28:21.0000000  A    50   -50  abc  def\n</code></pre>\n\n<p>or to:</p>\n\n<pre><code>date                         col1 col2 col3 col5\n2012-09-11 13:28:21.0000000  A    50   -50  abc,def\n</code></pre>\n\n<p><strong>solution (string)</strong> (extension of hkutluays answer):</p>\n\n<pre><code>max(case when col2 &gt; 0 then col4 end) col5\nmax(case when col2 &lt; 0 then col4 end) col6\n</code></pre>\n"},{"tags":["sql","oracle","pivot"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1193,"score":0,"question_id":9319997,"title":"Oracle SQL - Convert N rows' column values to N columns in 1 row","body":"<p>The trick with this compared to the other questions (e.g. \"Oracle convert rows to columns\") is that my column values are arbitrary strings, rather than something I can use with decode. Take this query:</p>\n\n<p>The description table here maps people's names to descriptions, but each person can have multiple descriptions e.g. \"wears a hat\" or \"is tall\".</p>\n\n<pre><code>Select firstName, lastName, \n(Select description from descriptions --This can return any number of rows (0 or more)\n where description.firstName = people.firstName\n and description.lastName = people.lastName\n and rownum &lt;= 3)\nfrom people\nwhere age &gt;= 25;\n</code></pre>\n\n<p>I would want an output like this:</p>\n\n<pre><code>FIRSTNAME LASTNAME DESCRIPTION1 DESCRIPTION2 DESCRIPTION3\nJeremy    Smith    Tall         Confused        (null)\nAnne      Smith    (Null)       (Null)          (Null)\nMark      Davis    Short        Smart           Strong\n</code></pre>\n\n<p>In the case of less than 3 descriptions, I want nulls there. In the case of more than 3 descriptions, I want to just leave them out.</p>\n\n<p>I am using Oracle 11.1. Can this be done efficiently?</p>\n"},{"tags":["database","oracle","sqldatatypes"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12834964,"title":"Why Long data type has been replaced by LOB in Oracle?","body":"<p>LOB having the features of Long data type as well it has its own special features. Since its having features of Long, the additional special features can be given to Long data type itself. So, no need of having one more data type LOB and Long itself can be used all the time. Then why Long has been replaced by LOB?</p>\n\n<p>Even LOB is the replacement for LONG, still Long is made to be available with latest versions of Oracle for backward compatibility. This is additional overhead right?</p>\n"},{"tags":["c#",".net","oracle","entity-framework","stored-functions"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":167,"score":2,"question_id":12799124,"title":"Usage of stored functions in entity framework","body":"<p>I have an old <code>Oracle</code> DB which I'm trying to use within <code>EntityFramework 4.1</code> application.<br>\nI've read about the big limitation that oracle has with EF- you can't call Oracle stored <strong>Function</strong> with EF unless you create a wrapping <strong>Procedure</strong>.  </p>\n\n<p>I got thousands of stored functions in my DB, is there any other way to solve it?<br>\nLike using raw <code>Context.SqlQuery()</code>?  </p>\n\n<p>So far I couldn't find a solution for it...</p>\n\n<hr>\n\n<p><a href=\"http://www.oracle.com/technetwork/issue-archive/2011/11-sep/o51odt-453447.html\" rel=\"nofollow\">Oracle docs:</a></p>\n\n<blockquote>\n  <p>Oracle developers can leverage PL/SQL stored <strong>procedures</strong>, with limitations, within the entity framework via Entity Framework Function Imports (used to call the procedures explicitly) and stored procedure mappings (which are automatically called for entity Insert, Update, and Delete operations).  </p>\n  \n  <p><strong>Only Oracle stored procedures can be called by Entity Framework, not stored functions.</strong> (Oracle stored functions can be used if they are wrapped inside of a stored procedure that uses an OUT parameter for the stored function return value.)</p>\n</blockquote>\n"},{"tags":["windows","oracle","sqlplus"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":11326,"score":2,"question_id":1840816,"title":"SQL Plus: how to change directory and show current working directory","body":"<p>I just installed Oracle, and I am working with SQL*Plus because the GUI tool, SQL Developer, won't work.</p>\n\n<p>I need to run some scripts, and I found that after starting SQL*Plus I couldn't navigate from a session to another directory. The instructions that I did find after I searched on the internet all talk about a gui interface to SQL*Plus which is no longer available on version 11. All what I get is a console window.</p>\n\n<p>Right now I hacked my way into making it work for me by creating a shortcut and then changing the starting directory to the directory where the scripts are housed.</p>\n\n<p>I can keep doing this, but I would like to know if there is a command that will let me know \na) the current working directory and \nb) how to change directories </p>\n\n<p>Thanks in advance,</p>\n\n<p>Hugo</p>\n"},{"tags":["sql","oracle","oracle11g","pivot-table"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":122,"score":2,"question_id":12827085,"title":"Count parts of total value as columns per row (pivot table)","body":"<p>I'm stuck with a seemingly easy query, but couldn't manage to get it working the last hours.</p>\n\n<p>I have a table <code>files</code> that holds file names and some values like records in this file, DATE of creation (<code>create_date</code>), DATE of processing (<code>processing_date</code>) and so on. There can be multiple files for a create date in different hours and it is likely that they will not get processed in the same day of creaton, in fact it can even take up to three days or longer for them to get processed.</p>\n\n<p>So let's assume I have these rows, as an example:</p>\n\n<pre><code>create_date            | processing_date\n------------------------------\n2012-09-10 11:10:55.0  | 2012-09-11 18:00:18.0\n2012-09-10 15:20:18.0  | 2012-09-11 13:38:19.0\n2012-09-10 19:30:48.0  | 2012-09-12 10:59:00.0\n2012-09-11 08:19:11.0  | 2012-09-11 18:14:44.0\n2012-09-11 22:31:42.0  | 2012-09-21 03:51:09.0\n</code></pre>\n\n<p>What I want <strong>in a single query</strong> is to get a grouped column truncated to the day <code>create_date</code> with 11 additional columns for the differences between the <code>processing_date</code> and the <code>create_date</code>, so that the result should roughly look like this:</p>\n\n<pre><code>create_date   |   diff0days   | diff1days | diff2days | ... | diff10days\n------------------------------------------------------------------------\n2012-09-10    |       0             2           1       ...        0\n2012-09-11    |       1             0           0       ...        1\n</code></pre>\n\n<p>and so on, I hope you get the point :)</p>\n\n<p>I have tried this and so far it works getting a single aggregated column for a <code>create_date</code> with a difference of - for example - 3:</p>\n\n<pre><code>SELECT TRUNC(f.create_date, 'DD') as created, count(1) FROM files f WHERE TRUNC(f.process_date, 'DD') - trunc(f.create_date, 'DD') = 3 GROUP BY TRUNC(f.create_date, 'DD')\n</code></pre>\n\n<p>I tried combining the single queries and I tried sub-queries, but that didn't help or at least my knowledge about SQL is not sufficient.</p>\n\n<p>What I need is a hint so that I can include the various differences as columns, like shown above. <strong>How could I possibly achieve this?</strong></p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":70,"score":-2,"question_id":12834491,"title":"ORA-00905: Missing Keyword error on select statement","body":"<p>I get an error in the below select query. This is the error I receive:</p>\n\n<blockquote>\n  <p>ORA-00905: Missing Keyword</p>\n</blockquote>\n\n<p>Can anyone help ?</p>\n\n<pre><code>SELECT ni.node_installation_id,ni.customer_node_id,ni.customer_id,c.brand_name_1,substr(nitr.name,1,instr(nitr.name, ' ')-1) as node_inst_type\n    from node_installation ni , customer c , node_inst_type_release nitr\n    where ( Case \n            WHEN ni.arne_timestamp is null  THEN ( case  \n                                                   when ni.arne_flag ='I' then ni.arne_flag ='I'\n                                                   END )\n     else (trunc(sysdate) - trunc(ni.arne_timestamp) &gt;= 60)\n      end)     \nand ni.customer_id = c.customer_id \nand ni.node_inst_type_release_id = nitr.node_inst_type_release_id\nand ni.no_of_collection_node_missed &gt;= 4\nand c.customer_id =90;\n</code></pre>\n"},{"tags":["c#","asp.net","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12834705,"title":"ASP.NET -Oracle-- Connection no more possible after certain amount of existing connections","body":"<p>We've got an ASP.NET application working with with Oracle database. To connect to the database we've used the basic ways:</p>\n\n<pre><code>OracleConnection con= new OracleConnection(....;\nOracleCommand cmd=new OracleCommand();\ncmd.Connection=con;\ncmd.CommandText=....;\n</code></pre>\n\n<p>I have no idea why but after 14-15 users are logged in to the application no additional user can log in and the application refuses to log in. I don't have any clue as to where I can start investigating except for the connection string. Here's how the connection string looks like:</p>\n\n<pre><code>        \"User ID=SSPF_WEB_EDITION;Data Source=SSPF;Persist Security Info=False;Password=123;Validate Connection=true; Connection TimeOut=15;Pooling=False;\n</code></pre>\n\n<p>I thought maybe this issue is related with the \"Pooling=False\" option?</p>\n\n<p>EDIT: We use Oracle's ODP.NET. Here's what we have in the log:\n\"TNS:listener could not find available handler witht matching protocol stack \"</p>\n"},{"tags":["c#",".net","oracle","entity-framework-4","devart"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12833506,"title":"Devart entity developer with wrong provider?","body":"<p>We are using the devart dotconnect, entity developer and the developer tools for visual studio 2010.</p>\n\n<p>Last week I've got a new mashine and an upgrade from windows xp to windows 7.</p>\n\n<p>Before this upgrade, everything worked fine. But now, after I choose my tables in the entity model wizzard, the visual studio output says:</p>\n\n<blockquote>\n  <p>Cannot create model object for '{0}'. Provider Oracle.DataAccess.Client not found. </p>\n</blockquote>\n\n<p>It seems that the devart environment is looking for the wrong provider.</p>\n\n<p>Within the wizzard I select \"Database first\" and Provider=Oracle Data Provider for .NET.</p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12833985,"title":"Is there any auto increment property for field in Oracle? without using sequence and trigger","body":"<p>Is there any auto increment property for field in Oracle  without using sequence and trigger ?\nI am creating oracle database table using <strong>TOAD</strong> editor, I want add column with auto increment on, so is there any auto increment property for field? without creating sequence and adding trigger for table.</p>\n"},{"tags":["sql","oracle","select","group-by"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":64,"score":3,"question_id":12833182,"title":"How to add the aliases to the group by clause","body":"<p>In the below query how to add the aliases <code>assignedTOiti</code>, <code>assignedTOasstAdm</code>, <code>assignedTOhlp</code>, <code>closedDate</code> to the group by clause.</p>\n\n<p>I am struggling for the past few hours.</p>\n\n<pre><code>SELECT ieor.aper07_req_k                                  AS reqno,\n       ford.apeh09_supervisor_cds_d                       AS ll6CdsID,\n       'Ford Offboard Req'                                AS reqtype,\n       par_val1.aper17_parameter_val_x                    AS requeststatus,\n       (SELECT Min(iti2.aper07_req_created_s)\n        FROM   iaper07_employee_offbrd_req iti2\n        WHERE  ieor.aper07_req_k = iti2.aper07_req_k\n               AND iti2.aper06_req_status_k = 4)          AS assignedTOiti,\n       (SELECT Min(hlp2.aper07_req_created_s)\n        FROM   iaper07_employee_offbrd_req hlp2\n        WHERE  ieor.aper07_req_k = hlp2.aper07_req_k\n               AND hlp2.aper06_req_status_k = 5)          AS assignedTOasstAdm,\n       (SELECT Min(asst2.aper07_req_created_s)\n        FROM   iaper07_employee_offbrd_req asst2\n        WHERE  ieor.aper07_req_k = asst2.aper07_req_k\n               AND asst2.aper06_req_status_k = 12)        AS assignedTOhlp,\n       (SELECT Min(clsd2.aper07_req_created_s)\n        FROM   iaper07_employee_offbrd_req clsd2\n        WHERE  ieor.aper07_req_k = clsd2.aper07_req_k\n               AND clsd2.aper06_req_status_k IN ( 3, 9 )) AS closedDate,\n       ieor.aper07_assigned_to_cds_d,\n       ieor.aper07_comment_x,\n       ieor.aper07_last_updt_user_c,\n       ieor.aper07_last_updt_s                            AS last,\n       ieor.apeh09_employee_k,\n       ieor.aper06_req_status_k,\n       ipw.apeh04_first_n,\n       ipw.apeh04_cds_d,\n       ipw.apeh04_last_n,\n       ipw.apeh04_person_type_c,\n       irs.aper06_req_status_x,\n       offr.aper15_offboard_reason_x                      AS offboardReason,\n       Min(aper07_req_created_s)                          AS creationDate\nFROM   iaper07_employee_offbrd_req ieor,\n       iapeh05_person_vw ipw,\n       iapeh09_ford_employee ford,\n       iaper06_req_status irs,\n       iaper15_offbrd_req_reason offr,\n       iaper17_parameter_values par_val1\nWHERE  ford.apeh09_cds_d = ipw.apeh04_cds_d\n       AND ieor.apeh09_employee_k = ipw.apeh04_visitor_k\n       AND irs.aper06_req_status_k = ieor.aper06_req_status_k\n       AND offr.aper15_offboard_reason_k = ieor.aper15_offboard_reason_k\n       AND ieor.aper06_req_status_k = par_val1.aper17_parameter_val_r\n       AND ipw.apeh22_region_k = 1\n       AND ieor.aper07_last_updt_s = (SELECT Max(aper07_last_updt_s)\n                                      FROM   iaper07_employee_offbrd_req b\n                                      WHERE  ieor.aper07_req_k = b.aper07_req_k)\n       AND ieor.aper07_req_k = 3387\nGROUP  BY ieor.aper07_req_k,\n          ford.apeh09_supervisor_cds_d,\n          ieor.aper07_assigned_to_cds_d,\n          ieor.aper07_comment_x,\n          ieor.aper07_last_updt_user_c,\n          ieor.aper07_last_updt_s,\n          ieor.apeh09_employee_k,\n          ieor.aper06_req_status_k,\n          ipw.apeh04_first_n,\n          ipw.apeh04_cds_d,\n          ipw.apeh04_last_n,\n          ipw.apeh04_person_type_c,\n          irs.aper06_req_status_x,\n          par_val1.aper17_parameter_val_x,\n          offr.aper15_offboard_reason_x\nHAVING ipw.apeh04_person_type_c NOT IN( 'c', 'C' )\n</code></pre>\n"},{"tags":["sql","oracle","case","teradata","connect-by"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":351,"score":1,"question_id":8172349,"title":"How to convert connect by level in teradata","body":"<p>I was trying to convert the connect by level function of oracle to teradata. I have seen many examples over the net but this particular one is different,  </p>\n\n<pre><code> (SELECT \n     CASE LEVEL \n        WHEN 1 THEN 'MB'\n        WHEN 2 THEN 'SB'\n        ELSE 'TOTAL'\n     END AS DRUG_SOURCE\n FROM\n    DUAL \n CONNECT BY LEVEL &lt;= 3) RW  \n</code></pre>\n\n<p>Please let me know if you guys have any idea.</p>\n"},{"tags":["oracle","entity-framework","mapping","numbers","wcf-ria-services"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":184,"score":2,"question_id":11446419,"title":"EntityFramework / WCF RIA Services / Oracle / Custom number mapping","body":"<p>this post is intended as (not optimal) solution for everyone that has to struggle with the same problem and there is only few to no answer in the net atm...\n(of cousrse this post will contain information from other sources)</p>\n\n<p>we had problems with custom data type mapping (number) in our project (VS2010/EntityFramework/WCF RIA Services/Oracle ODP.NET) which we were able to solve the following way:</p>\n\n<p>we had to use the following custom oracle number mapping information (because of legacy DB)</p>\n\n<pre><code>&lt;/connectionStrings&gt;\n  &lt;oracle.dataaccess.client&gt;\n    &lt;settings&gt;\n      &lt;add name=\"int16\" value=\"edmmapping number(4,0)\" /&gt;\n      &lt;add name=\"int32\" value=\"edmmapping number(9,0)\" /&gt;\n      &lt;add name=\"int64\" value=\"edmmapping number(17,0)\" /&gt;\n    &lt;/settings&gt;\n  &lt;/oracle.dataaccess.client&gt;\n</code></pre>\n\n<p>we put this information in App.Config within the project with the EDMX file(s)\nnow we were able to create our EDMX files with the custom mapping</p>\n\n<p>1) there was a problem that when you restart VS2010 it can happen that upon proeject compilation it wont compile because of an Error 2019, this error is of course related to our custom mapping and its a \"VS2010 bug???\" maybe but one solution is to open he VS2010 about window then close it then compile... but the better solution might or might not be to add the same information we added to the App.Config file to the devenv.exe.config file...</p>\n\n<p>now we can compile the EDMX project and \nthe My.Service.Web (.NET) project that uses the our EDM</p>\n\n<p>2) there is still another problem ... the WCF RIA Service My.Service (SL5) project\nhas no idea of the App.Config settings so when we try to compile it we will also get the\nError 2019...\nadding the mapping information to the Web.Config file did not help\nbut when we add it to the machine.config file we can finally compile...</p>\n\n<p>SUMMARY: add the mapping information to\nApp.Config (where your edmx file is)\nMachine.Config (C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\Config)\nWeb.Config (in your web project, not sure if required since we added it to Machine.config)</p>\n\n<p>QUESTION: isn't there a better solution than to add it to Machine.Config?\n          I really hope someone has a better one because it will probably restict\n          development of other projects...</p>\n\n<p>hope this helps and hope for a better (re)solution</p>\n\n<p>thx and cheers</p>\n\n<p>versions:\nVS2010 SP1\nEntityFramework 4.1\nWCF RIA Services 1 SP2\nOracle 11g (ODAC/ODP.NET 11.2.0.3.0)</p>\n"},{"tags":["oracle","plsql"],"answer_count":13,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":23213,"score":6,"question_id":74010,"title":"What is the difference between explicit and implicit cursors in Oracle?","body":"<p>I am a bit rusty on my cursor lingo in PL/SQL. Anyone know this?</p>\n"},{"tags":["vb.net","oracle","oracleclient"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12828626,"title":"Deploy a .Net application with Oracle Client 11","body":"<p>I've <a href=\"http://stackoverflow.com/questions/923283/what-is-the-minimal-setup-required-to-deploy-a-net-application-with-oracle-clie\">followed this post</a> and it's not working. Can someone tell me what else to check?</p>\n\n<p>Steps I followed:</p>\n\n<ol>\n<li><p>I added dll's from my current install of Oracle (11gR2_x32) to the root of my project.  I did not use the basic-lite as the post stated but I assumed that the dll's would be the same, right?  </p>\n\n<ul>\n<li>oci.dll</li>\n<li>ociw32.dll</li>\n<li>Oracle.DataAccess.DLL</li>\n<li>orannzsbb11.dll</li>\n<li>oraocci11.dll</li>\n<li>oraociicus11.dll</li>\n<li>OraOps11w.dll</li>\n</ul></li>\n<li><p>Selected each dll within my project and set the 'Build Action' to 'Content' and 'Copy to Output Directory' to 'Copy Always'</p></li>\n<li><p>Added a reference to Oracle.DataAccess</p></li>\n<li><p>Added 'Imports Oracle.DataAccess.Client' to my vb code.</p></li>\n</ol>\n\n<p>The code works fine but it still requires the user to install Oracle.  My intent was to not have them install oracle. I verified that when they install my program all the dll's are present in the program folder.  </p>\n\n<p>What else can I check? </p>\n"},{"tags":["sql","oracle","sqlplus"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":54,"score":0,"question_id":12831813,"title":"SQLplus AND Operator","body":"<p>Can anyone tell me what is wrong with this query below? \nfrom a programming point of view it makes perfect sense but sql does not seem to like it.</p>\n\n<blockquote>\n  <p>SELECT  SNAME, YEAR, GPA FROM STUDENT<br>\n   WHERE  (YEAR >= 5 AND GPA &lt;=3.0) AND (WHERE YEAR &lt;=4 AND GPA &lt;= 2.0)<br>\n   ORDER BY YEAR, GPA DESC ;</p>\n</blockquote>\n\n<p>I get this error:</p>\n\n<p>Error at line 2\nORA-00936: missing expression</p>\n"},{"tags":["sql","oracle","timestamp","sql-update"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12818229,"title":"update oracle timstamp current date","body":"<p>I have a TIMESTAMP(6) field in Oracle db. Value of this field is in format</p>\n\n<pre><code>DD/MM/YYYY HH:MM:SS.000000000 PM\n</code></pre>\n\n<p>How to update this value to current timestamp?</p>\n\n<p>[a link to a similar question:] <a href=\"http://stackoverflow.com/questions/9337935/update-date-value-in-oracle\">update date value in oracle</a></p>\n\n<p>I followed this link. But following query taking very long time to execute.</p>\n\n<pre><code>update table_name set start_time = to_char(to_date(start_time, 'yyyy/mm/dd-hh:mi:ss:ff3'), '2012/10/10-19:30:00:00') where column='Q'\n</code></pre>\n"},{"tags":["eclipse","oracle","hibernate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12832163,"title":"Eclipse -hibernate plugin for generating oracle-table","body":"<p>i have been working on the  eclipse project that use hibernate and oracle for the database. And this project have some domain objects as below :\nMy question is : which tool do they use to generate the domain object code like below? :\nThanks.</p>\n\n<pre><code>**@IdClass(com.*********.domain.ApplicationPermission.class)\n@Entity\n@NamedQueries({\n        @NamedQuery(name = \"findAllApplication*****\", query = \"select myApplication***** from Application****** myApplicationPermission\"),\n        @NamedQuery(name = \"findApplication****ByApplicationId\", query = \"select myApplication***** from Application***** myApplication***** where myApplicationPermission.applicationId = ?1\"),) })\n@Table(schema = \"*****\", name = \"APPLICATION_PERMISSION\")\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(namespace = \"****/com/*****/cas/*****/domain\", name = \"ApplicationPermission\")\npublic class ApplicationPermission implements Serializable {\n    private static final long serialVersionUID = 1L;\n    /**\n     */\n    @Column(name = \"APPLICATION_ID\", scale = 2, nullable = false)\n    @Basic(fetch = FetchType.EAGER)\n    @Id\n    @XmlElement\n    BigDecimal applicationId;\n    /**\n     */\n    @Column(name = \"PERMISSION_GROUP_ID\", scale = 2, nullable = false)\n    @Basic(fetch = FetchType.EAGER) \n    @XmlElement\n    BigDecimal permissionGroupId;\n    /**\n     */**\n</code></pre>\n"},{"tags":["sql","oracle","plsql","sys-refcursor","execute-immediate"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1337,"score":0,"question_id":6457085,"title":"Ref cursor with Execute immediate","body":"<p>I want to get the results in ref_cursor, but I am not able to do that. </p>\n\n<p>Please suggest me how to get the results in ref_cursor using Execute immediate</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE TEST_PROC_QT ( p_name IN VARCHAR2,\n                                           p_result_set OUT sys_refcursor ) IS\n\n  v_sql VARCHAR2(4000);\n\nBEGIN\n\n   v_sql := '';\n   v_sql := 'SELECT * FROM USERS WHERE 1=1 ';\n\n   IF p_name is not null THEN\n     v_sql := v_sql || ' AND login_id = :v_name';\n   ELSE\n     v_sql := v_sql || ' AND ((1=1) or :v_name is null)';\n   END IF;\n\n   Dbms_output.put_line(v_sql);\n\n   EXECUTE IMMEDIATE v_sql\n\n   --OPEN p_result_set for v_sql\n   --INTO p_result_set using p_name;  \n\nEND;\n</code></pre>\n"},{"tags":["java","oracle","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2478,"score":1,"question_id":6628856,"title":"Oracle error messages","body":"<p>I'm curious about something... is it possible for an Oracle 11 instance to be configured so that it does not return any ORA-?????? error messages?  </p>\n\n<p>I've issued many invalid queries where I've misspelled column names, table names... things where I would expect an ORA error message.</p>\n\n<p>Say for security purposes say if a stray java stack trace got exposed to a browser could you force oracle to always show the same bogus error message in the stack trace?</p>\n\n<p>I always get this one:<code>java.sql.SQLException: IO Error: Size Data Unit (SDU) mismatch</code></p>\n\n<p>I've googled that error up and down, and I do not have any connection or database configuration issues at all!  I get it on a per-query basis.</p>\n"},{"tags":["oracle","jdbc","jboss"],"answer_count":6,"favorite_count":2,"up_vote_count":10,"down_vote_count":0,"view_count":6720,"score":10,"question_id":277744,"title":"JDBC - Oracle ArrayIndexOutOfBoundsException","body":"<p>I'm getting an Exception while trying to insert a row in oracle table.\nI'm using ojdbc5.jar for oracle 11\nthis is the sql i'm trying </p>\n\n<pre><code>INSERT INTO rule_definitions(RULE_DEFINITION_SYS,rule_definition_type,\nrule_name,rule_text,rule_comment,rule_message,rule_condition,rule_active,\nrule_type,current_value,last_modified_by,last_modified_dttm,\nrule_category_sys,recheck_unit,recheck_period,trackable)\nVALUES(RULE_DEFINITIONS_SEQ.NEXTVAL,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)\n</code></pre>\n\n<p>and i get following Exception. Any help will be appreciated.</p>\n\n<pre>\njava.ljava.lang.ArrayIndexOutOfBoundsException: 15\nat oracle.jdbc.driver.OracleSql.computeBasicInfo(OracleSql.java:950)\n    at oracle.jdbc.driver.OracleSql.getSqlKind(OracleSql.java:623)\n    at oracle.jdbc.driver.OraclePreparedStatement.(OraclePreparedStatement.java:1212)\n    at oracle.jdbc.driver.T4CPreparedStatement.(T4CPreparedStatement.java:28)\n    at oracle.jdbc.driver.T4CDriverExtension.allocatePreparedStatement(T4CDriverExtension.java:68)\n    at oracle.jdbc.driver.PhysicalConnection.prepareStatement(PhysicalConnection.java:3059)\n    at oracle.jdbc.driver.PhysicalConnection.prepareStatement(PhysicalConnection.java:2961)\n    at oracle.jdbc.driver.PhysicalConnection.prepareStatement(PhysicalConnection.java:5874)\n    at org.jboss.resource.adapter.jdbc.WrappedConnection.prepareStatement(WrappedConnection.java:232)\n    at com.gehcit.platform.cds.common.util.db.DBWrapper.executeInsertOracleReturnPK(DBWrapper.java:605)\n</pre>\n"},{"tags":["oracle","hibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":249,"score":0,"question_id":10902381,"title":"Hibernate configuration for oracle issue :ORA-12516, TNS:listener could not find available handler with matching","body":"<p>I set the connection pool, changed the job processes for oracle. But still getting this error :\nORA-12516, TNS:listener could not find available handler with matching protocol stack\nThe Connection descriptor used by the client was</p>\n\n<p>Is there any specific configuration other than connection pool or oracle job process setting that needs to be done for resolving this error</p>\n"},{"tags":["sql","oracle","select","indexing","case-sensitive"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":11630,"score":4,"question_id":317576,"title":"Oracle - Select where field has lowercase characters","body":"<p>I have a table, users, in an Oracle 9.2.0.6 database.  Two of the fields are varchar - last_name and first_name.</p>\n\n<p>When rows are inserted into this table, the first name and last name fields are supposed to be in all upper case, but somehow some values in these two fields are mixed case.</p>\n\n<p>I want to run a query that will show me all of the rows in the table that have first or last names with lowercase characters in it.</p>\n\n<p>I searched the net and found REGEXP_LIKE, but that must be for newer versions of oracle - it doesn't seem to work for me.</p>\n\n<p>Another thing I tried was to translate \"abcde...z\" to \"$$$$$...$\" and then search for a '$' in my field, but there has to be a better way?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["oracle","triggers"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12830719,"title":"How to create Oracle Trigger to record current SQL","body":"<p>I am currently doing a homework assignment and am getting stuck at a point.\nI want to create a trigger for auditing, and Yes I do know FGA, but that's not what was asked.\nMy trigger needs to record the current SQL for auditing. This is what I have now.\nImagine I have my table already created to store the inserting value.</p>\n\n<pre><code>CREATE OR REPLACE TRIGGER ALL_SQL_AUDIT\nAFTER UPDATE ON SCOTT.EMP\nFOR EACH ROW\nBEGIN\nINSERT INTO ALL_SQL_AUDIT(TABLE_NAME, SQL_TEXT, SQL_TYPE, CHANGE_DATE, DB_USERNAME, OS_USERNAME)\nSELECT 'SCOTT.EMP',\n    SYS_CONTEXT('USERENV','CURRENT_SQL'),\n    'UPDATE',\n    SYSDATE,\n    USER,\n    SYS_CONTEXT('USERENV','OS_USER')\nFROM dual;\nEND;\n/\n</code></pre>\n\n<p>Problem is SYS_CONTEXT('USERENV','CURRENT_SQL') never return anything, so does anyone know how to get the current DML that triggered this event?</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12830560,"title":"Oracle SQL - Creating Multiple Ranges for Date Possibilities in a Query","body":"<p>I have this query:</p>\n\n<pre><code>Select * \nFrom Player_Chkin_Cs\n</code></pre>\n\n<p>That spits out the result:</p>\n\n<pre><code>Player_ID     CS_ID   CS_LISTING_ID  CS_COMP_NAME   PT_ADD  CREATE_DTIME   UUID\n 179364        300      60132          Wilshire       3      22-DEC-10     (null)\n 179364        320      68968          Wilshire       30     28-JAN-10     (null)\n 132489        200      55168          Wilshire       13     03-Jan-10     (null)\n 132489        900      65478          Wilshire       23     15-Feb-10     (null)\n</code></pre>\n\n<p>I want to create a query that returns the player_ids of only players who have create_dtimes that fall in both the ranges of 01-Dec-10 to 31-Dec-10 AND 01-Jan-10 to 31-Jan-10.(aka only Player_ID 179364 would show up in the results of this example)</p>\n\n<p>Please let me know if you have any suggestions!</p>\n"},{"tags":["oracle","compiler-errors"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":59,"score":3,"question_id":12830098,"title":"Getting this oracle error message: PLS-00330: invalid use of type name or subtype name","body":"<p>I am working on this for my homework. When I run it, I get the error:</p>\n\n<pre><code>PACKAGE PKG_Q4 Compiled.\n Warning: execution completed with warning\n PACKAGE BODY PKG_Q4 Compiled.\n 50/12          PLS-00330: invalid use of type name or subtype name.\n</code></pre>\n\n<p>I've looked into this but I cant seem to find a way to fix it. It is pointing to this line:</p>\n\n<pre><code>INTO v_Room_Number, v_Pet_Status, v_Customer_Source_Description, v_Invoice_Total\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>    CREATE OR REPLACE PACKAGE BODY PKG_Q4 \n    AS\n      FUNCTION FN_Q4\n        (p_First_Name VARCHAR2, p_Last_Name VARCHAR2)\n      RETURN VARCHAR2 \n        AS\n        v_Output VARCHAR2(500);\n        v_Room_Number NUMBER(3,0);\n        v_Pet_Status CHAR(1);\n        v_Customer_Source_Description VARCHAR2(30);\n        v_Invoice_Total NUMBER(7,2);\n        v_First_Name VARCHAR2(15);\n        v_Last_Name VARCHAR2(20);\n        v_Customer_Code CHAR(4);\n        v_Registration_Status_Code CHAR(1);\n\n\n        BEGIN\n\n          SELECT First_Name, Last_Name\n          INTO v_First_Name, v_Last_Name\n          FROM Customer\n          WHERE First_Name = p_First_Name AND\n                Last_Name = p_Last_Name;\n\n\n\n\n          Select Registration_Status_Code\n          INTO v_Registration_Status_Code\n          FROM Registration_Status;\n\n\n\n\n\n\n          IF v_Registration_Status_Code = 'N' THEN\n            SELECT Room.Room_Number, Room.Pet_Status, Customer_Source.Customer_Source_Description, Invoice.Invoice_Total\n            INTO v_Room_Number, v_Pet_Status, v_Customer_Source_Description, v_Invoice_Total\n            FROM Registration , Customer , Customer_Source , Room , Invoice \n            WHERE Customer.customer_code = Registration.customer_code AND\n                  Customer_Source.customer_source_code = Customer.customer_source_code AND\n                  Room.room_number = Registration.room_number AND\n                  Registration.registration_number = Invoice.registration_number;\n                v_Output := 'Room Number:' || v_Room_Number ||'Pet Status:' || v_Pet_Status ||\n                            'Customer Source Code:' || v_Customer_Source_Description ||'Total Cost:' || v_Invoice_Total;\n\n         END IF;\nReturn Varchar2;\n</code></pre>\n"},{"tags":["java","sql","oracle","jsf","jsf-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":872,"score":1,"question_id":10064860,"title":"java.sql.SQLSyntaxErrorException: ORA-01745: invalid host/bind variable name in managed bean","body":"<p>I have this managed bean based on this <a href=\"http://balusc.blogspot.com/2008/10/effective-datatable-paging-and-sorting.html\" rel=\"nofollow\">tutorial</a>.</p>\n\n<pre><code>import java.io.Serializable;\nimport javax.enterprise.context.SessionScoped;\n// or import javax.faces.bean.SessionScoped;\nimport javax.inject.Named;\n/* include SQL Packages */\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport javax.annotation.PostConstruct;\nimport javax.sql.DataSource;\nimport javax.annotation.Resource;\nimport javax.faces.component.UICommand;\nimport javax.faces.context.FacesContext;\nimport javax.inject.Inject;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpSession;\n// or import javax.faces.bean.ManagedBean; \nimport javax.faces.event.ActionEvent;\n\nimport org.glassfish.osgicdi.OSGiService;\n\n// source http://balusc.blogspot.com/2008/10/effective-datatable-paging-and-sorting.html\n\n@Named(\"SessionsController\")\n@SessionScoped\npublic class Sessions implements Serializable {\n\n    /* Call the Oracle JDBC Connection driver */\n    @Resource(name = \"jdbc/Oracle\")\n    private DataSource ds;\n    // Data.\n    private List&lt;ActiveSessionObj&gt; dataList;\n    private int totalRows;\n    // Paging.\n    private int firstRow;\n    private int rowsPerPage;\n    private int totalPages;\n    private int pageRange;\n    private Integer[] pages;\n    private int currentPage;\n    // Sorting.\n    private String sortField;\n    private boolean sortAscending;\n\n    private static class ActiveSessionObj {\n\n        /* Oracle table structure\n        CREATE TABLE ACTIVESESSIONSLOG(\n        ASESSIONID VARCHAR2(30 ) NOT NULL,\n        USERID VARCHAR2(30 ),\n        ACTIVITYSTART TIMESTAMP(6),\n        ACTIVITYEND TIMESTAMP(6),\n        ACTIVITY CLOB\n        )\n         */\n        private String aSessionID;\n        private String userID;\n        private Date activityStart;\n        private Date activityEnd;\n        private String activity;\n\n        public ActiveSessionObj(String aSessionID, String userID, Date activityStart, Date activityEnd, String activity) {\n            this.aSessionID = aSessionID;\n            this.userID = userID;\n            this.activityStart = activityStart;\n            this.activityEnd = activityEnd;\n            this.activity = activity;\n        }\n\n        public String getaSessionID() {\n            return aSessionID;\n        }\n\n        public void setaSessionID(String aSessionID) {\n            this.aSessionID = aSessionID;\n        }\n\n        public String getActivity() {\n            return activity;\n        }\n\n        public void setActivity(String activity) {\n            this.activity = activity;\n        }\n\n        public Date getActivityEnd() {\n            return activityEnd;\n        }\n\n        public void setActivityEnd(Date activityEnd) {\n            this.activityEnd = activityEnd;\n        }\n\n        public Date getActivityStart() {\n            return activityStart;\n        }\n\n        public void setActivityStart(Date activityStart) {\n            this.activityStart = activityStart;\n        }\n\n        public String getUserID() {\n            return userID;\n        }\n\n        public void setUserID(String userID) {\n            this.userID = userID;\n        }\n\n        private ActiveSessionObj() {\n            throw new UnsupportedOperationException(\"Not yet implemented\");\n        }\n    }\n\n    // Constructors -------------------------------------------------------------------------------\n    public Sessions() {\n        // Set default values somehow (properties files?).\n        rowsPerPage = 10; // Default rows per page (max amount of rows to be displayed at once).\n        pageRange = 10; // Default page range (max amount of page links to be displayed at once).\n        sortField = \"ASESSIONID\"; // Default sort field.\n        sortAscending = true; // Default sort direction.\n    }\n\n    // Paging actions -----------------------------------------------------------------------------\n    public void pageFirst() {\n        page(0);\n    }\n\n    public void pageNext() {\n        page(firstRow + rowsPerPage);\n    }\n\n    public void pagePrevious() {\n        page(firstRow - rowsPerPage);\n    }\n\n    public void pageLast() {\n        page(totalRows - ((totalRows % rowsPerPage != 0) ? totalRows % rowsPerPage : rowsPerPage));\n    }\n\n    public void page(ActionEvent event) {\n        page(((Integer) ((UICommand) event.getComponent()).getValue() - 1) * rowsPerPage);\n    }\n\n    private void page(int firstRow) {\n        this.firstRow = firstRow;\n        loadDataList(); // Load requested page.\n    }\n\n    // Sorting actions ----------------------------------------------------------------------------\n    public void sort(ActionEvent event) {\n        String sortFieldAttribute = (String) event.getComponent().getAttributes().get(\"sortField\");\n\n        // If the same field is sorted, then reverse order, else sort the new field ascending.\n        if (sortField.equals(sortFieldAttribute)) {\n            sortAscending = !sortAscending;\n        } else {\n            sortField = sortFieldAttribute;\n            sortAscending = true;\n        }\n\n        pageFirst(); // Go to first page and load requested page.\n    }\n\n    // Loaders ------------------------------------------------------------------------------------\n    private void loadDataList() {\n\n        // Load list and totalCount.\n        try {\n            dataList = list(firstRow, rowsPerPage, sortField, sortAscending);\n            totalRows = count(); //count the tablerows\n        } catch (Exception e) {\n            throw new RuntimeException(e); // Handle it yourself.\n        }\n\n        // Set currentPage, totalPages and pages.\n        currentPage = (totalRows / rowsPerPage) - ((totalRows - firstRow) / rowsPerPage) + 1;\n        totalPages = (totalRows / rowsPerPage) + ((totalRows % rowsPerPage != 0) ? 1 : 0);\n        int pagesLength = Math.min(pageRange, totalPages);\n        pages = new Integer[pagesLength];\n\n        // firstPage must be greater than 0 and lesser than totalPages-pageLength.\n        int firstPage = Math.min(Math.max(0, currentPage - (pageRange / 2)), totalPages - pagesLength);\n\n        // Create pages (page numbers for page links).\n        for (int i = 0; i &lt; pagesLength; i++) {\n            pages[i] = ++firstPage;\n        }\n    }\n\n    // Getters ------------------------------------------------------------------------------------\n    public List&lt;ActiveSessionObj&gt; getDataList() {\n        if (dataList == null) {\n            loadDataList(); // Preload page for the 1st view.\n        }\n        return dataList;\n    }\n\n    public int getTotalRows() {\n        return totalRows;\n    }\n\n    public int getFirstRow() {\n        return firstRow;\n    }\n\n    public int getRowsPerPage() {\n        return rowsPerPage;\n    }\n\n    public Integer[] getPages() {\n        return pages;\n    }\n\n    public int getCurrentPage() {\n        return currentPage;\n    }\n\n    public int getTotalPages() {\n        return totalPages;\n    }\n\n    // Setters ------------------------------------------------------------------------------------\n    public void setRowsPerPage(int rowsPerPage) {\n        this.rowsPerPage = rowsPerPage;\n    }\n\n    // Actions ------------------------------------------------------------------------------------\n    /**\n     * Returns list of ActiveSessionObj items starting at the given first index with the given row count,\n     * sorted by the given sort field and sort order.\n     * @param firstRow First index of rows to be returned.\n     * @param rowCount Amount of rows to be returned.\n     * @param sortField Field to sort the data on.\n     * @param sortAscending Whether to sort data ascending or not.\n     * @return list of ActiveSessionObj items starting at the given first index with the given row count,\n     * sorted by the given sort field and sort order.\n     * @throws DAOException If something fails at DAO level.\n     */\n    public List&lt;ActiveSessionObj&gt; list(int firstRow, int rowCount, String sortField, boolean sortAscending) throws SQLException {\n\n        String SQL_LIST_BY_ORDER_AND_LIMIT = \"SELECT * FROM ACTIVESESSIONSLOG WHERE ROWNUM &gt;= ? AND ROWNUM &lt;= ? ORDER BY ? ?\";     \n\n        if (ds == null) {\n            throw new SQLException();\n        }\n\n        String sortDirection = sortAscending ? \"ASC\" : \"DESC\";\n        String sql = String.format(SQL_LIST_BY_ORDER_AND_LIMIT, sortField, sortDirection);\n        Connection conn = ds.getConnection();\n        PreparedStatement preparedStatement = null;\n        ResultSet resultSet = null;\n        List&lt;ActiveSessionObj&gt; dataList = new ArrayList&lt;ActiveSessionObj&gt;();\n\n        try {\n            conn.setAutoCommit(false);\n            boolean committed = false;\n            preparedStatement = conn.prepareStatement(sql);\n            preparedStatement.setInt(1, firstRow);\n            preparedStatement.setInt(2, rowCount);\n            preparedStatement.setString(3, sortField);\n            preparedStatement.setString(4, sortDirection);                   \n\n            resultSet = preparedStatement.executeQuery();\n            /* take the result from the SQL query and insert it into Array List collection */\n            dataList = ActiveSessionsArrayList(resultSet);\n\n        } catch (SQLException e) {\n            throw new SQLException(e);\n        } finally {\n            conn.close();\n        }\n\n        return dataList;\n    }\n\n    /**\n     * Returns total amount of rows in table.\n     * @return Total amount of rows in table.\n     * @throws DAOException If something fails at DAO level.\n     */\n    public int count() throws Exception {\n\n        String SQL_COUNT = \"SELECT count(*) FROM ACTIVESESSIONSLOG\";\n\n        PreparedStatement preparedStatement = null;\n        ResultSet resultSet = null;\n        int count = 0;\n\n        try {\n            Connection conn = ds.getConnection();\n            preparedStatement = conn.prepareStatement(SQL_COUNT);\n            resultSet = preparedStatement.executeQuery();\n            if (resultSet.next()) {\n                count = resultSet.getInt(1);\n            }\n        } catch (SQLException e) {\n            throw new Exception(e);\n        } finally {\n            //close the connection\n        }\n\n        return count;\n    }\n\n    /**\n     * Map the current row of the given ResultSet to ActiveSessionObj.\n     * @param resultSet The ResultSet of which the current row is to be mapped to ActiveSessionObj.\n     * @return The mapped ActiveSessionObj from the current row of the given ResultSet.\n     * @throws SQLException If something fails at database level.\n     */\n    private static ArrayList&lt;ActiveSessionObj&gt; ActiveSessionsArrayList(ResultSet rs) throws SQLException \n    {\n        ArrayList&lt;ActiveSessionObj&gt; al = null;\n\n        try\n        {\n            while(rs.next())\n            {\n                al.add(new ActiveSessionObj(\n                rs.getString(\"ASESSIONID\"),\n                rs.getString(\"USERID\"),\n                timestampToDate(rs.getTimestamp(\"ACTIVITYSTART\")),\n                timestampToDate(rs.getTimestamp(\"ACTIVITYEND\")),\n                rs.getString(\"ACTIVITY\")\n\n                ));\n            }\n        }\n        catch(Exception x) {x.printStackTrace();}\n\n        return al;\n\n\n        /*\n        CREATE TABLE ACTIVESESSIONSLOG(\n        ASESSIONID VARCHAR2(30 ) NOT NULL,\n        USERID VARCHAR2(30 ),\n        ACTIVITYSTART TIMESTAMP(6),\n        ACTIVITYEND TIMESTAMP(6),\n        ACTIVITY CLOB\n        )\n         */\n    }\n    // select all button handle\n    private Map&lt;Long, Boolean&gt; selectedIds = new HashMap&lt;Long, Boolean&gt;();\n\n    // get the list from the JSF page\n    public Map&lt;Long, Boolean&gt; getSelectedIds() {\n        return selectedIds;\n    }\n\n    // call this method from the JSF page to delete the selected rows\n    public String deleteAction() {\n\n        // do something with the selected rows\n        return null;\n    }\n\n    private static Date timestampToDate(java.sql.Timestamp ts)\n    {\n        Date d = null;\n        try\n        {\n            d = new Date(ts.getTime());\n        }\n        catch (Exception e) { e.printStackTrace(); }\n\n        return d;\n    }\n}\n</code></pre>\n\n<p>I get this error stack when I run the code in Glassfish:</p>\n\n<pre><code>java.lang.RuntimeException: java.sql.SQLException: java.sql.SQLSyntaxErrorException: ORA-01745: invalid host/bind variable name\n\n    at com.DX_57.HM_57.Sessions.loadDataList(Sessions.java:193)\n    at com.DX_57.HM_57.Sessions.getDataList(Sessions.java:214)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:601)\n    at javax.el.BeanELResolver.getValue(BeanELResolver.java:363)\n    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)\n    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)\n    at com.sun.el.parser.AstValue.getValue(AstValue.java:138)\n    at com.sun.el.parser.AstValue.getValue(AstValue.java:183)\n    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)\n    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)\n    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)\n    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)\n    at javax.faces.component.UIData.getValue(UIData.java:731)\n    at javax.faces.component.UIData.getDataModel(UIData.java:1798)\n    at javax.faces.component.UIData.setRowIndexWithoutRowStatePreserved(UIData.java:484)\n    at javax.faces.component.UIData.setRowIndex(UIData.java:473)\n    at com.sun.faces.renderkit.html_basic.TableRenderer.encodeBegin(TableRenderer.java:81)\n    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:820)\n    at javax.faces.component.UIData.encodeBegin(UIData.java:1118)\n    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1755)\n    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)\n    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)\n    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)\n    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)\n    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)\n    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)\n    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)\n    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)\n    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)\n    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)\n    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)\n    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)\n    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)\n    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)\n    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)\n    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)\n    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)\n    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)\n    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)\n    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)\n    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)\n    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)\n    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)\n    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)\n    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)\n    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)\n    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)\n    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)\n    at java.lang.Thread.run(Thread.java:722)\nCaused by: java.sql.SQLException: java.sql.SQLSyntaxErrorException: ORA-01745: invalid host/bind variable name\n\n    at com.DX_57.HM_57.Sessions.list(Sessions.java:289)\n    at com.DX_57.HM_57.Sessions.loadDataList(Sessions.java:190)\n    ... 57 more\nCaused by: java.sql.SQLSyntaxErrorException: ORA-01745: invalid host/bind variable name\n\n    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:445)\n    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)\n    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:879)\n    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:450)\n    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:192)\n    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:531)\n    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:207)\n    at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:884)\n    at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1167)\n    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1289)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3584)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3628)\n    at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1493)\n    at com.sun.gjc.spi.jdbc40.PreparedStatementWrapper40.executeQuery(PreparedStatementWrapper40.java:642)\n    at com.DX_57.HM_57.Sessions.list(Sessions.java:284)\n    ... 58 more\n</code></pre>\n\n<p>I suppose that the SQL query is not correct or there is a problem with the prepared statement. What is the proper way to this query?</p>\n\n<p>Best Wishes</p>\n\n<p><strong>EDIT</strong> This is the Oracle table:</p>\n\n<pre><code>-- TABLE ACTIVESESSIONSLOG\n\nCREATE TABLE ACTIVESESSIONSLOG(\n  ASESSIONID VARCHAR2(30 ) NOT NULL,\n  USERID VARCHAR2(30 ),\n  ACTIVITYSTART TIMESTAMP(6),\n  ACTIVITYEND TIMESTAMP(6),\n  ACTIVITY CLOB\n)\n/\n\n-- ADD KEYS FOR TABLE ACTIVESESSIONSLOG\n\nALTER TABLE ACTIVESESSIONSLOG ADD CONSTRAINT ASESSIONID PRIMARY KEY (ASESSIONID)\n/\n</code></pre>\n"},{"tags":["c#","asp.net","oracle","oracle11g"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12830228,"title":"Generating bit for user permissions","body":"<p>can you help how can I generate bits to use on my programs modules? Using oracle bitand() function to check if the user can use such resource like click add button / delete / update...  and others. A long time ago I worked on a company that used this concept, but I dont remember it anymore. Do you know it?</p>\n\n<p>Thanks</p>\n"},{"tags":["php","sql","oracle","oci"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":429,"score":2,"question_id":5654662,"title":"validate Oracle non-SELECT query","body":"<p>Is there any way to check if an SQL query for Oracle would run successfully (by successfully I mean that the query is syntactically correct, all the table/column names exist, the user has proper permissions, etc.) without actually running it? The query may be not SELECT, but I do not want the changes to actually happen if it would modify any data. </p>\n\n<p>I thought about something like:</p>\n\n<pre><code>$valid = false;\n$stmt = oci_parse($db, $query);\nif(!empty($stmt)) {\n  $res = oci_execute($stmt, OCI_DESCRIBE_ONLY|OCI_NO_AUTO_COMMIT);\n  if(!empty($res)) {\n     $name = oci_field_name($res, 1);\n     if(!empty($name)) {\n       $valid = true;\n     }\n  }\n  oci_rollback($db);\n}\n</code></pre>\n\n<p>But if $query has some DDL in it, I understand that Oracle would commit it immediately. So is there any way to check the query without any modifications happening?</p>\n"},{"tags":["oracle","dbunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":659,"score":1,"question_id":5004529,"title":"using dbunit with oracle. Schema problems","body":"<p>How do you restrict DBunit to a specific schema. When doing DatabaseOperation.CLEAN_INSERT,\ndbunit this exception</p>\n\n<blockquote>\n  <p>org.dbunit.database.AmbiguousTableNameException: SCHEMA_UPDATE_TBL</p>\n</blockquote>\n\n<p>But this table is not in the schema I am using. I think it is coming from another table in the same Oracle database. How do I limit dbunit to look at my schema. </p>\n\n<p>I'm using jpa.</p>\n\n<p>eg connection am using in my persistence.xml is like this</p>\n\n<pre><code>            &lt;property name=\"hibernate.connection.username\" value=\"mikea\"/&gt;\n        &lt;property name=\"hibernate.connection.password\" value=\"mikea\"/&gt;\n        &lt;property name=\"hibernate.connection.url\" value=\"jdbc:oracle:thin:@localhost:1521:MOT4\"/&gt;\n</code></pre>\n\n<p>Regards</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12828742,"title":"how to convert minutes into DD:HH:MM format in oracle? Let's say 1008307 seconds I need to display as DD:HH:MM format","body":"<p>how to convert seconds into (days/hours/minutes) DD:HH:MM format in oracle? Let's say 1008307 seconds I need to display as DD:HH:MM format</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12828115,"title":"Rewrite SQL and use of group by","body":"<p>I have written below sql for one of the requirement and is fetching my results. But, I am wondering if there is any better way of writing this query rather than using alias table as A.</p>\n\n<pre><code>SELECT A.*,B.OPRDEFNDESC FROM \n( select OPRID_ENTERED_BY ,COUNT(*)\n  from ps_req_hdr  \n  where entered_dt &gt; '01-JUL-2012'\n  GROUP BY OPRID_ENTERED_BY\n  ORDER BY COUNT(*) DESC) A, PSOPRDEFN B\nWHERE A.OPRID_ENTERED_BY=B.OPRID\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12827602,"title":"Is several joined subqueries the ony way to test multiple tables?","body":"<p>I'm testing that the latest date in several tables all match each other in oracle. The SQL I came up with looks like:</p>\n\n<pre><code>select ICEAG.process_month\nfrom (\n    select *\n    from (\n        select process_month\n        from TABLE1\n        group by process_month\n        order by process_month desc\n    )\n    where rownum &lt;=1\n) ICEAG\njoin (\n    select *\n    from (\n        select process_month\n        from TABLETWO\n        group by process_month\n        order by process_month desc\n    )\n    where rownum &lt;=1\n) GAI on (ICEAG.process_month = GAI.process_month)\n</code></pre>\n\n<p>This works but I need to check about 12 tables. Should I just keep joining more subqueries, or is there a better way?</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":5,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":9383,"score":4,"question_id":3434437,"title":"What's the most efficient way to check if a record exists in PL/SQL?","body":"<p>A) </p>\n\n<pre><code>select decode(count(*), 0, 'N', 'Y') rec_exists\nfrom (select 'X'\n      from dual\n      where exists (select 'X'\n                    from sales\n                    where sales_type = 'Accessories'));\n</code></pre>\n\n<p>B)</p>\n\n<pre><code>select decode(count(*), 0, 'N', 'Y') rec_exists\nfrom (select 'X'\n      from sales\n      where sales_type = 'Accessories'); \n</code></pre>\n\n<p>C) Something else (specify)</p>\n\n<p>EDIT: It was hard to pick the \"correct\" answer, as the best approach depends on what you want to do after checking if the value exists, as pointed out by APC. I ended up picking the answer by RedFilter, since I had originally envisioned this check as a function by itself.</p>\n"},{"tags":["php","windows","oracle","php-5.3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":85,"score":0,"question_id":12820429,"title":"PHP 5.3.1 not loading php_oci8.dll on Windows","body":"<p>I'm trying to load the oracle extension on php but im having the error:</p>\n\n<blockquote>\n  <p><b>Warning</b>:  PHP Startup: Unable to load dynamic library 'D:\\Program Files\\xampp\\php\\ext\\php_oci8.dll' - The specified procedure could not be found.\n   in <b>Unknown</b> on line <b>0</b><br /></p>\n</blockquote>\n\n<p>I have done so far:</p>\n\n<ol>\n<li>Included on  windows path the the fullpath of oracle instant client</li>\n<li>on php.ini, the <code>extension_dir</code> is pointing to the right place</li>\n<li>on php.ini <code>extension=php_oci8.dll</code> is ok</li>\n<li>restarted the apache, and nothing works.</li>\n</ol>\n\n<p>Any clue?</p>\n"},{"tags":["database","performance","oracle","oracle10g","union"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12827525,"title":"Any Quicker Option Than Oracle Database Union","body":"<p>I have a table that has multiple columns which store a text value. For example:</p>\n\n<pre><code>ID    FATHER_NAME    MOTHER_NAME\n--------------------------------\n1     Henry          Sarah\n2     Martin         Rebecca\n3     Martin         Nancy\n</code></pre>\n\n<p>I want to get all of the names in the table. I know I can do a union to do this:</p>\n\n<pre><code>(SELECT FATHER_NAME FROM MY_TABLE)\nUNION\n(SELECT MOTHER_NAME FROM MY_TABLE)\n</code></pre>\n\n<p>However, in my real table there are 15 columns I need to union and the query is obviously taking awhile (approximately 12 seconds). And I still need to do joins on these names, etc. Is there any other alternative to doing unions?</p>\n\n<p>FYI: I am using Oracle. </p>\n"},{"tags":["oracle","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12826689,"title":"Top N% students oracle","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12825196/top-n-percent-top-n\">Top n percent top n%</a>  </p>\n</blockquote>\n\n\n\n<pre><code> SQL&gt; select ssn, gpa from (select ssn, gpa,\n rank() over(partition by ssn order by gpa desc) as rank,\n count(*) over(partition by ssn) as no_students\n\n SQL&gt; from students_gpa)\n\n  Error\n                 *\n</code></pre>\n\n<p>ERROR at line 1:\nORA-00936: missing expression</p>\n\n<p>I am trying to get the top 5% of students with a GPA of 4. Since I have two students with a GPA of 4, I want to report both students and not just one one 1 student who occupies the first row. Any help will be appreciated.</p>\n"},{"tags":["sql","oracle","triggers"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":1570,"score":1,"question_id":9281447,"title":"PL SQL trigger to insert history record when a column is updated","body":"<p>I would like to insert a row into a history table when <b>any</b> column is updated in a table.</p>\n\n<p>I'm just looking to capture the column name, old value and new value.</p>\n\n<p>I'd like this trigger to be as reusable as possible as I'm going to use the same concept on other tables.</p>\n\n<p>I'm familiar with triggers and with how to capture updates on one column.  I'm specifically looking for how to write <b>one</b> trigger that inserts a record into a history table for <b>any</b> column that gets updated in the history table's corresponding table.  </p>\n\n<p><b>EDIT 1</b><br>\nI have stated <b>NOWHERE</b> in my post that I'm looking for source code so shame on anyone that downvotes me and thinks that I'm looking for that.  You can check my previous questions/answers to see I'm not one looking for \"free source code\".</p>\n\n<p>As I stated in my original question, I'm looking for <b>how</b> to write this.  I've examined <a href=\"http://plsql-tutorial.com/plsql-triggers.htm\" rel=\"nofollow\">http://plsql-tutorial.com/plsql-triggers.htm</a> and there's a code block which shows how to write a trigger for when ONE column is updated.  I figured that maybe someone would have the know-how to give direction on having a more generic trigger for the scenario I've presented.</p>\n"},{"tags":["javascript","jquery","mysql","oracle","sqlite"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":367,"score":-1,"question_id":10382243,"title":"How many ways To Connect Database Server using JavaScript?","body":"<p>I want to know how many ways we can get Server Database using JavaScript like using mongo db ,SQLite or any other ways to connect Server database</p>\n"},{"tags":["oracle","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":12825196,"title":"Top n percent top n%","body":"<p>I do have the following code.</p>\n\n<pre><code>    SQL&gt; select * from student_gpa;\n\n    SSN                    GPA\n    --------------- ----------\n   22222                    3\n   11111                    4\n   55555                    3\n   33333                    4\n   44444                    3\n</code></pre>\n\n<p>I do have this function to get the top two gpa score rows.</p>\n\n<p>SQL> select * from (select ssn, gpa from student_gpa order by gpa desc) where  rownum &lt;= 2;</p>\n\n<pre><code>     SSN                    GPA\n    --------------- ----------\n    11111                    4\n    33333                    4\n</code></pre>\n\n<p>My question is what function do I use to get the top n% of the GPA score.  For example, Since I have two individuals with a GPA of 4, dense rank would return 11111 occupying row 1 and 22222 occupying row 2. I was actually looking for a function say that calculates 5% of the GPA score and the returned value would be both 11111 and 22222. The 5% function SHOULD NOT return 11111 only. Even if I had more entries that had gpa of 4, the 5% function would still return all rows that had gpa of 4.Thanks </p>\n"},{"tags":["java","oracle","spring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12823918,"title":"Alternative to using a REF CURSOR in JDBC or Spring JDBC?","body":"<p>I've Googled this a bit and searched here and haven't been able to find the answer.</p>\n\n<p>Is there an alternative to using a REF CURSOR when returning data in PL/SQL from a Database to Java (using Spring JDBC)?</p>\n\n<p>The DBAs where I work hate REF CURSORS because (they say) that the potential for something to go wrong is greater and they would prefer if we were returning CURSORs or TYPES.</p>\n\n<p>Does anyone know if this is possible and, if so, how?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":5,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12822909,"title":"Use underscores or capitals in PL/SQL variables names","body":"<p>Should variable names in PL/SQL use underscores or capital letters to separate words?</p>\n\n<p><code>this_is_my_variable</code> or <code>thisIsMyVariable</code>?</p>\n\n<p>I can't find a clear answer to this and I've seen both.</p>\n"},{"tags":["oracle","symfony2","doctrine2","symfony-2.1"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12824382,"title":"Symfony2: Cannot validate or update schema with Oracle database","body":"<p>I've got a Symfony 2.1 installation with Doctrine versus an Oracle 11g database, using oci8 provider.</p>\n\n<p>The mapping works correctly, but whenever I try to do a:</p>\n\n<pre><code>$ php app/console doctrine:schema:validate \n</code></pre>\n\n<p>or a</p>\n\n<pre><code>$ php app/console doctrine:schema:update\n</code></pre>\n\n<p>the program \"hangs\" without any visible message. The same configuration with a PostgreSQL database works perfectly.</p>\n\n<p>Any clue?</p>\n\n<p>Thanks a lot.</p>\n"},{"tags":["oracle","package","synonym"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12824343,"title":"got pls-00201 when I call a package via public synonym in Oracle","body":"<p>I created a package named sf_timer in sys, then I created a public synonym on this:</p>\n\n<pre><code>create or replace public synonym sf_timer for sys.sf_timer;\nselect * from all_synonyms where synonym_name = 'SF_TIMER';\n</code></pre>\n\n<p>Then I call this package from another user:</p>\n\n<pre><code>set serveroutput on\ndeclare\n  i integer;\n  j integer;\nbegin\n  sf_timer.start_timer;\n  for i in 1..100000\n  loop\n    j := j +1;\n  end loop;\n  sf_timer.show_elapsed_time('Test 1');\nend;\n/\n</code></pre>\n\n<p>Unfortunately I got error below:</p>\n\n<pre><code>Error report:\nORA-06550: line 5, column 3:\nPLS-00201: identifier 'SF_TIMER' must be declared\nORA-06550: line 5, column 3:\nPL/SQL: Statement ignored\nORA-06550: line 10, column 3:\nPLS-00201: identifier 'SF_TIMER' must be declared\nORA-06550: line 10, column 3:\nPL/SQL: Statement ignored\n06550. 00000 -  \"line %s, column %s:\\n%s\"\n*Cause:    Usually a PL/SQL compilation error.\n</code></pre>\n\n<p>I can see this public synonym from all_synonyms but I don't know why I cannot call the package in my schema.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["sql","oracle","oracle-sqldeveloper"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12822513,"title":"Run SQL script on multiple DB connections at same time in Oracle SQL Developer","body":"<p>I have 4 different database connections in Oracle SQL Developer. All of them have the exact same set of packages and procedures. Every time I change something in my scripts I have to run it on all of the connections one-by-one. Is there no way to run it on all the connections at the same time?</p>\n"},{"tags":["database","oracle","unique-key"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":437,"score":1,"question_id":1757463,"title":"Unique Id Generation","body":"<p>How can i generate a unique key of length at most 12 character with these attributes:\nName, Father's name, Mother's name, Date of birth, Place of birth.</p>\n\n<p>Thanks in advance :)</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12824256,"title":"SQL to get the elapsed time for Jobs","body":"<p>I have a table contains transaction time, 1 batch will trigger several jobs. I want to add the time elapsed in each job for the batch.\nThe transaction tables's format is as follows,</p>\n\n<pre><code>START_TIME          JOB END_TIME\n1/7/2012 12:10:24   AA  1/7/2012 12:18:49\n1/7/2012 12:10:23   AA  1/7/2012 12:10:23\n1/7/2012 12:10:24   AA  1/7/2012 12:10:24\n7/7/2012 16:10:33   AA  7/7/2012 16:15:23\n7/7/2012 16:10:32   AA  7/7/2012 16:10:32\n7/7/2012 16:10:33   AA  7/7/2012 16:10:33\n7/7/2012 17:58:21   BB  7/7/2012 19:05:41\n7/7/2012 16:40:25   BB  7/7/2012 16:40:25\n7/7/2012 17:56:58   BB  7/7/2012 17:56:58\n1/7/2012 14:00:11   BB  1/7/2012 14:47:09\n1/7/2012 12:40:19   BB  1/7/2012 12:40:19\n1/7/2012 13:58:33   BB  1/7/2012 13:58:33\n</code></pre>\n\n<p>What I want to achieve is,</p>\n\n<pre><code>DATE       JOB    TIME SPENT\n1/7/2012   AA     ADDING THE TIME SPENT for AA on 1/7/2012\n7/7/2012   AA     ADDING THE TIME SPENT for AA on 7/7/2012\n1/7/2012   BB \n7/7/2012   BB\n</code></pre>\n\n<p>May I know what SQL can do the expected result?</p>\n\n<p>Thanks!!</p>\n"},{"tags":["sql","oracle","sql-developer"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":12822854,"title":"Manual testing a stateless function in oracle sql in SQL developer","body":"<p>I've coded the most complex sql function ever:</p>\n\n<pre><code>function abc() RETURN 7;\n</code></pre>\n\n<p>I'd like to verify my function actually does what I think it does : to return a 7.</p>\n\n<p>What's the easiest way to accomplish that with sql-developer?</p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12823042,"title":"Can oracle be configure to cache insertions?","body":"<p>I have a table with a auto-generated primary key and a DateTime field. And we have several clients inserting records, using the clock from the client computer for the Date/Time (i.e. it is not a true \"TimeStamp\" field).  I have been tons of instances where the date/time is hours off when the records are ordered by the primary key.  At first I presume the client computer clocks were off.  But more and more I am thinking it could be some sort of caching mechanism on the database.</p>\n\n<p>Is there anything that would explain this?</p>\n"},{"tags":["java","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12823114,"title":"java oracle cursor is closed where cursor is not return to jdbc","body":"<p>I am executing a stored procedure which has 2 cusors within the stored procedure.</p>\n\n<p>The 1st cursor which is not return to the jdbc as a resultset is closed within the stored procedure. </p>\n\n<p>The 2nd cursor which returns the resultset to the jdbc is not closed within the stored procedure. </p>\n\n<p>Upon executing I encounter cursor is closed exception which is puzzling. </p>\n\n<p>Since the ResultSet will close all underlying cursor upon invoking the close() method</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12815968,"title":"Finding day of the week in oracle","body":"<p><code>to_char(sysdate,'Day')</code> returns the current day of the week. What I want is to get is the <code>date</code> of the most recent \"sunday\" that passed. Of course we can go for a complex query to get it done. But is there any simple way I'm not aware of?</p>\n"},{"tags":["xml","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":12739770,"title":"How can I print large XML string generated by Oracle?","body":"<p>I need something way bigger than varchar2(2000) to be able to print my generated XML.  Either recommend a better approach than dbms_output.put_line(x) or recommend a different data type to store the result and then print it.  I am an Oracle newbie and full-time job is UI development.</p>\n\n<pre><code>declare\n    v_ctx dbms_xmlgen.ctxHandle;\n    x varchar2(2000); -- I need something bigger than varchar2(2000)\nbegin\n    v_ctx := DBMS_XMLGen.newContext('\n        select\n            baz as \"Baz\"\n        from schema.table_with_10000_rows');\n    DBMS_XMLGen.setRowsetTag(v_ctx, 'Foo');\n    DBMS_XMLGen.setRowTag(v_ctx, 'Bar');\n    x := dbms_xmlgen.getxml(v_ctx);\n    dbms_output.put_line(x);\nend;\n</code></pre>\n"},{"tags":["oracle","multidimensional-array","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12815723,"title":"Initialize and loop through twodimensional array","body":"<p>I'm trying to write a diff procedure in pl/sql. The error message never says what the structure should be like, only it expected some other symbol, usually that would indicate the end of the line. Also I keep getting errors on example code...</p>\n\n<ol>\n<li>Why does it stop at the first error instead of giving a list of all errors found?</li>\n<li>CREATE TYPE EditCost, found EditCost, expecting some other symbol.</li>\n<li>cost_matrix INTEGER[, found [, expecting some other symbol.</li>\n<li>original.length, invalid reference.</li>\n<li>cost_matrix[, found [, expecting some other symbol.</li>\n<li>return cost_matrix, no value allowed after return, then how am I to return values?</li>\n</ol>\n\n<p>This code gives me many errors, I removed parts only to find errors in other parts.</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE diff_string(original in varchar2, other in varchar2, result out varchar2)\nis -- Maybe should be as, don't know.\n    CREATE TYPE EditCost { 'Change', 'Copy', 'Delete', 'Insert', 'Kill' };\n    cost_matrix INTEGER[original.length, other.length];\nBEGIN\n   IF original = NULL THEN\n      result := other;\n   ELSIF other = NULL then\n      result := original;\n   else\n       for i in 1 .. length(original)\n       loop\n           for j in 1 .. length(other)\n           loop\n               cost_matrix[i, j] := i * j;\n           end loop;\n       end loop;\n       return cost_matrix;\n   end if;\nEND diff_string;\n/\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12820958,"title":"sql query to order the data","body":"<p>I want to order the data in column for a table in one order that is i am having a table Person having age like</p>\n\n<pre><code>age\n12\n14\n13\n14\n45\n12\n45\n23\n12\n23\n12\n</code></pre>\n\n<p>I want to group all the similar ages one after other.How to do this?I have tried using group by\nselect age from person group by age.This is not working for me.</p>\n"},{"tags":["c#","asp.net","oracle","datatable","reportviewer"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":175,"score":3,"question_id":12821487,"title":"Microsoft Report Viewer ASP.NET","body":"<p>This is my first time using the Microsoft Report Viewer control and I'm thinking it is very straight forward but I keep getting this following error:</p>\n\n<pre><code> An error occurred during local report processing.\n The report definition for report 'Report3' has not been specified\n Object reference not set to an instance of an object.\n</code></pre>\n\n<p>I have a view from my Oracle Database that I am using that looks like this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/FRB7R.png\" alt=\"DataTable View\"></p>\n\n<p>I walk through the GUI and make a \"New Report\" and add this DataSet to a \"Table\".  I used the Query Builder to create the \"FillByModel\" and \"GetDataByModel\" functions and it all returns the correct data from the database but when I run the page that I have the ReportViewer control on, it gives me the above error.  I have no idea what that error means and after Googling the crap out of it and trying everything I have no idea how to resolve it.</p>\n\n<p>Here is the .aspx code for my ReportViewer object:</p>\n\n<pre><code> &lt;rsweb:ReportViewer ID=\"ReportViewer1\" runat=\"server\" Font-Names=\"Verdana\" Font-Size=\"8pt\" WaitMessageFont-Names=\"Verdana\" WaitMessageFont-Size=\"14pt\"&gt;\n    &lt;LocalReport ReportEmbeddedResource=\"Paint_Reporting.Report3.rdlc\"&gt;\n        &lt;DataSources&gt;\n            &lt;rsweb:ReportDataSource DataSourceId=\"ObjectDataSource1\" Name=\"LOL\" /&gt;\n        &lt;/DataSources&gt;\n    &lt;/LocalReport&gt;\n&lt;/rsweb:ReportViewer&gt;\n&lt;asp:ObjectDataSource ID=\"ObjectDataSource1\" runat=\"server\" OnSelecting=\"ObjectDataSource1_Selecting\" SelectMethod=\"GetData\" TypeName=\"PaintModelNumberDetailTableAdapters.PAINT_MODELNUMBERDETAILLISTINGTableAdapter\"&gt;&lt;/asp:ObjectDataSource&gt;\n&lt;asp:ScriptManager ID=\"ScriptManager1\" runat=\"server\"&gt;\n&lt;/asp:ScriptManager&gt;\n</code></pre>\n\n<p>Could someone help me figure out this error?</p>\n"},{"tags":["oracle","grails","legacy-database"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12813913,"title":"using grails with legacy database","body":"<p>I faced with problem of using Grails with legacy Oracle database. I have legacy table TARGETTYPES with primary key text column TARGETTYPECODE: </p>\n\n<pre><code>CREATE TABLE \"TMS\".\"TARGETTYPES\" \n   (    \"TARGETTYPECODE\" VARCHAR2(100) NOT NULL ENABLE, \n    \"TARGETTYPEDESCR\" VARCHAR2(255 CHAR), \n    \"ACTIVE\" CHAR(1) DEFAULT 'Y' NOT NULL ENABLE, \n     CONSTRAINT \"TARGETTYPES_PK\" PRIMARY KEY (\"TARGETTYPECODE\")\n   )\n</code></pre>\n\n<p>I created grails domain class:</p>\n\n<pre><code>package tmsconf\n\nclass Targettypes {\n\n    static transients = ['Targettypecode']\n    void setTargettypecode(String Targettypecode) {\n            id = Targettypecode\n    }\n\n    String  getTargettypecode() {\n            return Targettypecode\n    }\n\n    String targettypedescr\n    String active\n\n    static mapping = {\n         table 'TARGETTYPES'\n         version false\n         columns {\n             id generator:'assigned', column:\"TARGETTYPECODE\", type:'text'\n         } \n    }\n\n    static constraints = {\n        id()\n        targettypecode(size: 1..100, blank: false)\n        targettypedescr(size: 0..255)\n        active(size: 1..1, blank: false)\n        id(nullable: true)\n    }\n    String toString() {\n        return \"${targettypecode}\" \n    }\n}\n</code></pre>\n\n<p>Also I created controller class:</p>\n\n<pre><code>package tmsconf\n\nclass TargettypesController {\n    def scaffold = true\n}\n</code></pre>\n\n<p>Application has started successfully. </p>\n\n<p>When I click on link tmsconf.TargettypesController I have error in console:</p>\n\n<pre><code>Error 2012-10-10 10:55:37,243 [http-bio-8080-exec-9] ERROR util.JDBCExceptionReporter  - ORA-00918: column ambiguously defined\n\n| Error 2012-10-10 10:55:37,305 [http-bio-8080-exec-9] ERROR errors.GrailsExceptionResolver  - SQLSyntaxErrorException occurred when processing request: [GET] /TMSConf/targettypes/list\nORA-00918: column ambiguously defined\n. Stacktrace follows:\nMessage: ORA-00918: column ambiguously defined\n\n    Line | Method\n-&gt;&gt;  445 | processError         in oracle.jdbc.driver.T4CTTIoer\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \n|    396 | processError         in     ''\n|    879 | processError . . . . in oracle.jdbc.driver.T4C8Oall\n|    450 | receive              in oracle.jdbc.driver.T4CTTIfun\n|    192 | doRPC . . . . . . .  in     ''\n|    531 | doOALL               in oracle.jdbc.driver.T4C8Oall\n|    207 | doOall8 . . . . . .  in oracle.jdbc.driver.T4CPreparedStatement\n|    884 | executeForDescribe   in     ''\n|   1167 | executeMaybeDescribe in oracle.jdbc.driver.OracleStatement\n|   1289 | doExecuteWithTimeout in     ''\n|   3584 | executeInternal . .  in oracle.jdbc.driver.OraclePreparedStatement\n|   3628 | executeQuery         in     ''\n|   1493 | executeQuery . . . . in oracle.jdbc.driver.OraclePreparedStatementWrapper\n|     96 | executeQuery         in org.apache.commons.dbcp.DelegatingPreparedStatement\n|     55 | &lt;init&gt; . . . . . . . in grails.orm.PagedResultList\n|     15 | list                 in tmsconf.TargettypesController\n|    186 | doFilter . . . . . . in grails.plugin.cache.web.filter.PageFragmentCachingFilter\n|     63 | doFilter             in grails.plugin.cache.web.filter.AbstractFilter\n|   1110 | runWorker . . . . .  in java.util.concurrent.ThreadPoolExecutor\n|    603 | run                  in java.util.concurrent.ThreadPoolExecutor$Worker\n^    722 | run . . . . . . . .  in java.lang.Thread\n</code></pre>\n\n<p>Please help, where am I wrong</p>\n"},{"tags":["sql","oracle","jasper-reports"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":56,"score":-1,"question_id":12819958,"title":"Getting error in iReport for query with join on two tables","body":"<p>I have such query in <em>iReport</em>:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>select T1_ORNO,T1_ITEM,T1_ODAT,T1_CIGR,T2_ORNO,\n T2_ITEM,T2_ODAT,T2_CIGR\n from \n (SELECT DISTINCT\n T1.\"ORNO\" AS T1_ORNO,\n T1.\"ITEM\" AS T1_ITEM,\n T1.\"ODAT\" AS T1_ODAT,\n T1.\"CIGR\" AS T1_CIGR,\n ROWNUM as rn\n\n FROM\n  \"SD\".\"T1\" T1)  t1 left join\n\n (SELECT DISTINCT\n\n T2.\"ORNO\" AS T2_ORNO,\n T2.\"ITEM\" AS T2_ITEM,\n T2.\"CIGR\" AS T2_CIGR,\n T2.\"ODAT\" AS T2_ODAT,\n ROWNUM as rn\n FROM\n\"SD\".\"T2\" T2) t2 on t1.rn=t2.rn\n</code></pre>\n\n<p>All data for table T2 are displayed as null</p>\n\n<p>The logic of this query described in <a href=\"http://stackoverflow.com/questions/12814216/join-two-tables-in-sql-with-different-rows\">join two tables in sql with different rows</a> post.</p>\n"},{"tags":["oracle","query","whitespace"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":29567,"score":2,"question_id":1195566,"title":"Oracle - how to remove white spaces?","body":"<p>I am running this statement:</p>\n\n<pre><code>select trim(a),trim(b) from table x;\n</code></pre>\n\n<p>Even though I used the trim() statement, my output looks like this:</p>\n\n<pre><code>A                                                            B                              \n___                                                          ____\nkunjramansingh                                               smartdude\n</code></pre>\n\n<p>The datatype of column 'a' and 'b' is varchar2(255).</p>\n\n<p>There is a gap between the data of two output.  I want to show the data without the whitespace - in a format like this:</p>\n\n<pre><code>A             B\n___           ______ \nkunjramansinghsmartdude\n</code></pre>\n\n<p>How can I do this?</p>\n"},{"tags":["sql","oracle","sql-server-2008"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12819313,"title":"Copy database table from SQL Server to Oracle","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/571051/moving-data-from-sql-server-to-oracle-repeatedly\">Moving Data from SQL Server to Oracle Repeatedly</a>  </p>\n</blockquote>\n\n\n\n<p>Is it possible to copy a table from SQL Server to a new table in Oracle?</p>\n\n<p>I am pretty sure that it is not possible, but I would like an expert confirmation and how if it exists.</p>\n\n<pre><code>CREATE TABLE `backup_db.backup_table` \n  SELECT * FROM `live_db.live_table`;\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>To be more clear, I need to copy this table every day from SQL Server to Oracle.</p>\n\n<p>I know that it is not elegant, but I have no other choice.</p>\n"},{"tags":["sql","oracle","oracle10g","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12819719,"title":"Foreign Key with NO primary key to refer","body":"<p>I have following two tables.</p>\n\n<pre><code>CREATE TABLE parent\n( c1 INTEGER );\n\nCREATE TABLE child\n(\n c1 INTEGER,\n c2 INTEGER,\n c3 INTEGER,\n CONSTRAINT fk_c3 FOREIGN KEY(c3) REFERENCES parent(c1)\n);\n</code></pre>\n\n<p>You must have noticed that column <code>c1</code> is NOT a primary key in Parent table. \nIs there any way to refer it in Child table without making <code>c1</code> as a primary key?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":90,"score":-2,"question_id":12818216,"title":"sql query to get data for multiple columns","body":"<p>I have few columns in database for a table say choice which has option1-option15 columns.The data can be null in the column if the user has not selected it else it will 'y'.I need to just get those columns where data is 'y'.</p>\n\n<pre><code>column_id choice1 choic2 choice3......15\n\n   1         null  y      null\n   2         y     null   null\n</code></pre>\n\n<p>How can i get this using sql query for a given column id?</p>\n"},{"tags":["oracle","oracle10g","materialized-views"],"answer_count":2,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":5540,"score":4,"question_id":2027807,"title":"Update materialized view when urderlying tables change","body":"<p>I have a materialized view defined this way:</p>\n\n<pre><code>CREATE MATERIALIZED VIEW M_FOO\nREFRESH COMPLETE ON COMMIT\nAS\n    SELECT FOO_ID, BAR\n    FROM FOO\n    WHERE BAR IS NOT NULL\n    GROUP BY FOO_ID, BAR\n/\n\nCOMMENT ON MATERIALIZED VIEW M_FOO IS 'Foo-Bar pairs';\n</code></pre>\n\n<p>I wrote as a sort of cache: the source table is huge but the number of different pairs is fairly small. I need those pairs to get them JOINed with other tables. So far so good: it absolutely speeds queries.</p>\n\n<p>But I want to make sure that the view does not contain obsolete data. The underlying table is modified four or five times per month but I don't necessarily know when. I understand that a materialized view can be defined so it updates when the source tables change. However, the docs get pretty complicate.</p>\n\n<ol>\n<li><p>What's the exact syntax I need to\nuse?</p></li>\n<li><p>Do I need to create a materialized\nview log?</p></li>\n<li><p>What's the difference between fast\nand complete refresh?</p></li>\n</ol>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":1,"view_count":65,"score":4,"question_id":12814216,"title":"join two tables in sql with different rows","body":"<p>I have two sql queries, which gives me two tables with different quantity of rows, I need join them - just mutual to display together two tables</p>\n\n<p>table 1</p>\n\n<pre><code>  row1      row2\n  ==============\n  12        gfd\n  13        jf\n  14        gfd\n  15        jhhh\n</code></pre>\n\n<p>table 2</p>\n\n<pre><code>  row3      row4\n  ==============\n  18    gjkd\n  11    jfyty\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>row1    row2     row3         row4\n======================================\n  12    gfd      18           gjkd\n  13    jf       11           jfyty\n  14    gfd     \n  15    jhhh        \n</code></pre>\n\n<p>The data in each table are completely different and have different field names. I use <em>Oracle DB</em>, query need to be use in <em>iReport</em>.    </p>\n"},{"tags":["sql","oracle","sql-developer"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":46,"score":3,"question_id":12818942,"title":"How to create a table with date by range","body":"<p>I am trying to get a result from oracle developer.\nI need to join 3 table with dates, the output should be :</p>\n\n<pre><code>Date        sum    count   num\n2012-10-01  5000   30      15\n2012-10-02  0      0       0\n2012-10-03  60     150     350\n2012-10-04  20     200     300\n2012-10-05  1000   100     200\n2012-10-06  1500   109     400\n</code></pre>\n\n<p>the input range is between 2012-10-01 and 2012-10-06. \nIf it can't find data put the date with 0 in all other columns</p>\n\n<p>Thanks in advanced.</p>\n"},{"tags":["css","oracle","oracle-apex"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12817614,"title":"Oracle Apex Layout - child element sticking out ","body":"<p>This is piece of reporting page I have to create. Unfortunately table has many columns and it sticks out from main region of page. I am using standard Apex theme  ( no6 - Centered Blue).\nCould someone please advise how to modify css  so layout would be more responsive and white region at the back would stretch to be at the background of these to regions ?</p>\n\n<p>How to find name of class/id of \"white rounded element\" in Apex?</p>\n\n<p>Anyone giving answer in this topic would be life safer as deadline is approaching :)</p>\n\n<p><img src=\"http://i.stack.imgur.com/Rf2Gk.png\" alt=\"Report falling apart\"></p>\n"},{"tags":["oracle","query","table","alter"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12817599,"title":"Alter table modify column vs. multiply values query","body":"<p>My application interacts with an Oracle database in which a table has 1 million records.The problem is:</p>\n\n<p>In that table we have a column for numeric integer types.We want to store float values(2 digits).We could do that by multiplying with 100(from the application) and store them in that column or modify the column data type.The question is :</p>\n\n<p>What takes less time?\nThe alter table modify column or the query (update table set column = 100*val).</p>\n\n<p>Thanks :).</p>\n"},{"tags":["sql","xml","oracle","outer-join"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12818165,"title":"extractValue and right outer join - Oracle SQL","body":"<p>i got a little (at least i hope so) problem with an SQL Query. Here's my join</p>\n\n<pre><code>WHERE obj.mod_type = 'SER'\n   and obj.wrk_id=wrk_lang.id(+)\n   and extractvalue(value(shm),'/*/@xmi:id','xmlns:xmi=\"http://www.omg.org/XMI\"') = extractvalue(value(shm_con),'/*/@source')(+)\n</code></pre>\n\n<p>It gives me an \"ORA-00936: missing expression\"</p>\n\n<p>When i remove the second outer join it works fine(also with a regular join).</p>\n\n<p>Can smb. help me?</p>\n"},{"tags":["sql","mysql","sql-server","database","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":254,"score":1,"question_id":3219185,"title":"Need help writing a SQL query","body":"<p>I have the following tables.</p>\n\n<blockquote>\n  <p><strong>Customer_table</strong><br>\n  Customer_ID | Last name | First Name | City_ID | Region_ID | Country_ID</p>\n  \n  <p><strong>Country_table</strong><br> Country_ID | Country</p>\n  \n  <p><strong>Region_table</strong><br> Region_ID | Region | Country_ID</p>\n  \n  <p><strong>City_table</strong><br> City_ID | City | Region_ID | Country_ID</p>\n</blockquote>\n\n<p>I need to find the number of customers city-wise,ie, for all countries, for all regions in the countries, for all cities in the region, i need to get the no. of customers in each city.</p>\n\n<p>For example, I wrote the following SQL to get the no. of customers in each country:</p>\n\n<pre><code>SELECT a.country_id , b.country,count(*) \nFROM Customer_Table a INNER JOIN Country_Table b\nON a.country_id = b.country_id\nGROUP BY b.country , b.country_id ;\n</code></pre>\n\n<p>and to get the no. of customers in each region for a particular country:</p>\n\n<pre><code>SELECT a.region_id , b.region , count(*)\nFROM Customers_table a INNER JOIN Region_Table b\nON a.region_id = b.region_id\nWHERE a.country_id ='USA' AND b.country_id ='USA'\nGROUP BY region_id , country ;\n</code></pre>\n\n<p>What I need to find is the number of customers city-wise,ie, for all countries, for all regions in the countries, for all cities in the region, i need to get the no. of customers in each city, something like </p>\n\n<pre><code>Country | Region  |       City     | no.of customers\n  USA   |   CA    |  San Francisco |    53\n  USA   |   CA    |  Los Angeles   |    45\n  USA   |   CA    |  Sacramento    |    16\n  USA   |   WA    |  Seattle       |    46\n  USA   |   WA    |  Olympia       |    9\n  UK    | England |  London        |    89\n  UK    | England |  Nottingham    |    71\n  UK    | Wales   |  Cardiff       |    69\n  UK    | Wales   |  Newport       |    23\n\n  ..................and so on for other countries.\n</code></pre>\n"},{"tags":["oracle","oracleforms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12806136,"title":"Oracle developer suite 10g Multilingual support","body":"<p>I am working on Oracle Forms 10g application.\nThe application was developed in Oracle Forms 6i and Oracle 10g, so i upgraded that application to Oracle Forms 10g and Report 10g with Oracle Express 10g.</p>\n\n<p>Problem is application was design in Saudi Arabi, NLS_LANG  = \"ARABIC_SAUDI_ARABIA.AR8MSWIN1256\", so forms developer and runtime give all the errors message  in arabi and i don't now arabi.\nIs there any way to fix this issue?\nI want to read the error in English in forms developer</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":12817561,"title":"Why oracle is saying missing right parenthesis","body":"<p>In the following query i am trying to change decimal marker to a <code>comma</code>  </p>\n\n<pre><code>SELECT to_number('12.5678', '99D9999', NLS_NUMERIC_CHARACTERS =', ')  FROM dual;\n</code></pre>\n\n<p>When i execute this query in sqlDeveloper oracle is saying missing right paranthesis. \nPlease note that i have locale(DE, Gemany).</p>\n\n<p>What might be the reason?</p>\n\n<p>Thanks for any suggestions</p>\n"},{"tags":["sql","performance","oracle"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":1,"view_count":82,"score":1,"question_id":12782269,"title":"Best Oracle SQL query analyze tool","body":"<p>I'm looking for a tool (either free or paid) capable of visualization oracle SQL query performance. </p>\n\n<p>The ultimate goal is to have a tool, that can be easily read (eg. not EXPLAIN PLAN result) and that I can use to detect slow parts of query (eg. what join with what condition is actually adding the most to the whole query cost). I do <strong>not</strong> need automatic query optimization, I just want to see why does a query has too high cost. Also, it is best if the analyzer can run without special privileges.</p>\n\n<p>I've tried Quest SQL Optimizer for Oracle, which looks quite ok, but I'm missing the option to see join conditions (much like SQL Developer). Also, I'm not able to easily find what join takes up most of the query cost.</p>\n\n<p>What are your experiences? Is there a tool for this?</p>\n"},{"tags":["sql","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":32,"score":-1,"question_id":12816433,"title":"PRIMARY KEY and Default value of it","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/10613846/create-table-with-sequence-nextval-in-oracle\">create table with sequence.nextval in oracle</a>  </p>\n</blockquote>\n\n\n\n<p>Can we add a default value for a primary key in oracle?</p>\n\n<p>I want to know whether we can set a default value for primary key attribute when the datatype of the column is Integer.If yes, how? </p>\n\n<p>The same case when datatype is Character, Systimestamp?</p>\n"},{"tags":["sql","oracle","performance"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":6170,"score":0,"question_id":744058,"title":"How do I improve performance of a SQL UPDATE statement whose SET involves an expensive aggregate subquery?","body":"<p>I have the following UPDATE scenario:</p>\n\n<pre><code>UPDATE destTable d\nSET d.test_count = ( SELECT COUNT( employee_id )\n                     FROM sourceTable s\n                     WHERE d.matchCode1 = s.matchCode1 AND\n                           d.matchCode2 = s.matchCode2 AND\n                           d.matchCode3 = s.matchCode3 \n                     GROUP BY matchCode1, matchCode2, matchCode3, employee_id )\n</code></pre>\n\n<p>I have to execute this in a loop changing out the match codes for each iteration.</p>\n\n<p>Between two large tables (~500k records each), this query takes an unacceptably long time to execute.  If I just had to execute it once, I wouldn't care too much.  Given it is being executed about 20 times, it takes way too long for my needs.</p>\n\n<p>It requires two full table scans (one for the destTable and another for the subquery).  </p>\n\n<p>Questions:</p>\n\n<ol>\n<li><p>What techniques do you recommend to speed this up?</p></li>\n<li><p>Does the SQL-optimizer run the subquery for each row I'm updating in the destTable to satisfy the where-clause of the subquery or does it have some super intelligence to do this all at once?</p></li>\n</ol>\n"},{"tags":["oracle","sqlplus","toad"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12815915,"title":"How can I do multiple insert using TOAD?","body":"<p>I'm trying to do multiple insert in TOAD. The query below executes just fine (the bar below shows that commit has been done), but when I check the database there are no new values. What am I doing wrong?</p>\n\n<p>The query:</p>\n\n<pre><code>INSERT ALL \nINTO db1.t1 (col1, col2, col3, col4, col5)\nVALUES ('blah', 'Answer', 'Y', 'Y', 5)\nINTO db1.t1 (col1, col2, col3, col4, col5)\nVALUES ('blah', '# answers', 'Y', 'Y', 6)\nSELECT * FROM DUAL;\nCOMMIT;\n</code></pre>\n"},{"tags":["sql","performance","oracle","merge"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":59,"score":-3,"question_id":12814955,"title":"Performance Issue in Merge Statement","body":"<pre><code>MERGE INTO XXXCG.CCO620_N2K_PURCHASE cst\nUSING (\n  select DISTINCT gl_period_name,    --10.0.0.39\n        org_id,\n        project_code,\n        task_code,\n        exp_type,\n        exp_category,\n        rev_category,\n        gl_unit_revenu,\n        pa_date,\n        line_detail,\n        vendor_name,\n        vendor_code,\n        vendor_type,\n        anly_acc_rev,\n        inter_soc_code,\n        invoice_id,\n        ap_invoice_number,\n        itesoft,\n        revenu,\n        revenu_quantity\n  from  XXXCG.CCO620_N2K_REV_PURCHASE\n where write_flag='N'\n)\nrev\nON(\n      cst.GL_PERIOD_NAME = rev.GL_PERIOD_NAME\n      and cst.org_id=rev.org_id\n      and cst.project_code=rev.project_code\n      and cst.task_code =rev.task_code\n      and cst.exp_category = rev.exp_category\n      and (cst.gl_unit_cost = rev.gl_unit_revenu or  cst.gl_unit_cost &lt;&gt; rev.gl_unit_revenu) --10.0.0.39\n      and cst.exp_type = rev.exp_type\n      and cst.pa_date = rev.pa_date\n      and nvl(cst.invoice_id,'ZZ') = nvl(rev.invoice_id,'ZZ')\n      and nvl(cst.itesoft,'ZZ') = nvl(rev.itesoft,'ZZ')\n      and nvl(cst.ap_invoice_number,'ZZ') = nvl(rev.ap_invoice_number,'ZZ')\n      and nvl(cst.line_detail,'ZZ') = nvl(rev.line_detail,'ZZ'  )\n      and nvl(cst.vendor_type,'ZZ') = nvl(rev.vendor_type,'ZZ')\n      and nvl(cst.vendor_name,'ZZ') = nvl(rev.vendor_name,'ZZ')\n      and cst.rev_category = rev.rev_category\n)\nWHEN MATCHED THEN\nUPDATE SET\n     cst.revenu = rev.revenu,\n     cst.revenu_quantity = rev.revenu,--decode(rev.revenu,0,rev.revenue_quantity,cst.cost_qty_hours *(rev.revenu / abs(rev.revenu))),\n     cst.anly_acc_rev = rev.anly_acc_rev,\n     --cst.rev_category = rev.revenue_category,\n     cst.gl_unit_revenu = rev.gl_unit_revenu,\n     cst.cost_qty_hours = cst.cost_qty_hours *(rev.revenu / abs(rev.revenu ))\nWHERE (cst.gl_unit_cost = rev.gl_unit_revenu or  cst.gl_unit_cost &lt;&gt; rev.gl_unit_revenu)\nWHEN NOT MATCHED THEN\nINSERT (\n      GL_PERIOD_NAME ,\n      ORG_ID        ,\n      PROJECT_CODE  ,\n      TASK_CODE     ,\n      EXP_TYPE      ,\n      EXP_CATEGORY  ,\n      REV_CATEGORY  ,\n      GL_UNIT_COST  ,\n      GL_UNIT_REVENU,\n      PA_DATE       ,\n      LINE_DETAIL   ,\n      VENDOR_NAME   ,\n      VENDOR_CODE   ,\n      VENDOR_TYPE   ,\n      ANLY_ACC_REV  ,\n      ANLY_ACC_COST ,\n      INTER_SOC_CODE,\n      INVOICE_ID  ,\n      AP_INVOICE_NUMBER ,\n      ITESOFT ,\n      REVENU,\n      REVENU_QUANTITY,\n      COST_QTY_HOURS,\n      COST_AMOUNT )\nVALUES (\n     rev.gl_period_name,\n     rev.org_id,\n     rev.project_code,\n     rev.task_code,\n     rev.exp_type,\n     rev.exp_category,\n     rev.rev_category,\n     null,\n     rev.gl_unit_revenu,\n     rev.pa_date,\n     rev.line_detail,\n     rev.vendor_name,\n     rev.vendor_code,\n     rev.vendor_type,\n     rev.anly_acc_rev,\n     null,\n     rev.inter_soc_code,\n     rev.invoice_id,\n     rev.ap_invoice_number,\n     rev.itesoft,\n     rev.revenu,\n     rev.revenu_quantity,\n     null,\n     null\n )\nMERGE STATEMENT;  Optimizer=All_rows;  Cost=5,131,774;  Cardinality=5,865;  Bytes=6,979,350;  Cpu_cost=221,543,483,081;  Io_cost=5,114,435;  Time=157\n</code></pre>\n\n<p>Also I have optimized my merge:</p>\n\n<pre><code>MERGE INTO XXXCG.CCO620_N2K_PURCHASE cst\nUSING (\n  select  gl_period_name,    --10.0.0.39\n        org_id,\n        project_code,\n        task_code,\n        exp_type,\n        exp_category,\n        rev_category,\n        gl_unit_revenu,\n        pa_date,\n        line_detail,\n        vendor_name,\n        vendor_code,\n        vendor_type,\n        anly_acc_rev,\n        inter_soc_code,\n        invoice_id,\n        ap_invoice_number,\n        itesoft,\n        revenu,\n        revenu_quantity\n  from  XXXCG.CCO620_N2K_REV_PURCHASE\n where write_flag='N'\n)\nrev\nON(\n      cst.GL_PERIOD_NAME = rev.GL_PERIOD_NAME\n      and cst.org_id=rev.org_id\n      and cst.project_code=rev.project_code\n      and cst.task_code =rev.task_code\n      and cst.exp_category = rev.exp_category\n--      and (cst.gl_unit_cost = rev.gl_unit_revenu or  cst.gl_unit_cost &lt;&gt; rev.gl_unit_revenu) --10.0.0.39\n      and cst.exp_type = rev.exp_type\n      and cst.pa_date = rev.pa_date\n      and nvl(cst.invoice_id,'ZZ') = nvl(rev.invoice_id,'ZZ')\n      and nvl(cst.itesoft,'ZZ') = nvl(rev.itesoft,'ZZ')\n      and nvl(cst.ap_invoice_number,'ZZ') = nvl(rev.ap_invoice_number,'ZZ')\n      and nvl(cst.line_detail,'ZZ') = nvl(rev.line_detail,'ZZ'  )\n      and nvl(cst.vendor_type,'ZZ') = nvl(rev.vendor_type,'ZZ')\n      and nvl(cst.vendor_name,'ZZ') = nvl(rev.vendor_name,'ZZ')\n      and cst.rev_category = rev.rev_category\n)\nWHEN MATCHED THEN\nUPDATE SET\n     cst.revenu = rev.revenu,\n     cst.revenu_quantity = rev.revenu,--decode(rev.revenu,0,rev.revenue_quantity,cst.cost_qty_hours *(rev.revenu / abs(rev.revenu))),\n     cst.anly_acc_rev = rev.anly_acc_rev,\n     --cst.rev_category = rev.revenue_category,\n     cst.gl_unit_revenu = rev.gl_unit_revenu,\n     cst.cost_qty_hours = cst.cost_qty_hours *(rev.revenu / abs(rev.revenu ))\nWHERE (cst.gl_unit_cost = rev.gl_unit_revenu or  cst.gl_unit_cost &lt;&gt; rev.gl_unit_revenu)\nWHEN NOT MATCHED THEN\nINSERT (\n      GL_PERIOD_NAME ,\n      ORG_ID        ,\n      PROJECT_CODE  ,\n      TASK_CODE     ,\n      EXP_TYPE      ,\n      EXP_CATEGORY  ,\n      REV_CATEGORY  ,\n      GL_UNIT_COST  ,\n      GL_UNIT_REVENU,\n      PA_DATE       ,\n      LINE_DETAIL   ,\n      VENDOR_NAME   ,\n      VENDOR_CODE   ,\n      VENDOR_TYPE   ,\n      ANLY_ACC_REV  ,\n      ANLY_ACC_COST ,\n      INTER_SOC_CODE,\n      INVOICE_ID  ,\n      AP_INVOICE_NUMBER ,\n      ITESOFT ,\n      REVENU,\n      REVENU_QUANTITY,\n      COST_QTY_HOURS,\n      COST_AMOUNT )\nVALUES (\n     rev.gl_period_name,\n     rev.org_id,\n     rev.project_code,\n     rev.task_code,\n     rev.exp_type,\n     rev.exp_category,\n     rev.rev_category,\n     null,\n     rev.gl_unit_revenu,\n     rev.pa_date,\n     rev.line_detail,\n     rev.vendor_name,\n     rev.vendor_code,\n     rev.vendor_type,\n     rev.anly_acc_rev,\n     null,\n     rev.inter_soc_code,\n     rev.invoice_id,\n     rev.ap_invoice_number,\n     rev.itesoft,\n     rev.revenu,\n     rev.revenu_quantity,\n     null,\n     null\n )\nMERGE STATEMENT;  Optimizer=All_rows;  Cost=1,031;  Cardinality=5,865;  Bytes=7,032,135;  Cpu_cost=55,910,709;  Io_cost=1,027;  Time=1\n</code></pre>\n\n<p>But the latter (Optimized merge) takes long time to execute, can anyone help me optimize the query?\nWhat does COST, CARDINALITY and BYTES mean?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":69,"score":3,"question_id":12807862,"title":"How to construct this Oracle SQL query?","body":"<p>I am writing a sql query in Oracle that's something like this:</p>\n\n<pre><code> SELECT *\n   FROM ( SELECT testid,\n                 max(decode(name, 'longitude', stringvalue, NULL)) as longitude,  \n                 max(decode(name, 'latitude', stringvalue, NULL)) as latitude\n            FROM test_av \n           GROUP  BY testid\n        ) av\n  INNER JOIN ( \n                  SELECT id,\n                          ((ACOS(\n                                 SIN(16.15074 * 3.141592653 / 180) \n                                 * SIN(latitude * 3.141592653 / 180) \n                                 + COS(16.15074 * 3.141592653 / 180) \n                                 * COS(latitude * 3.141592653 / 180)\n                                 * COS((-22.74426 - longitude)*3.141592653 / 180)\n                          )*6373)) as distance\n                    FROM test \n\n        ) t ON t.id = av.testid\n  WHERE t.distance &lt;= 100 \n</code></pre>\n\n<p>When I execute this query Oracle is saying <code>'longitude invalid identifier'</code>. I was trying to access sub query alias, but the query is failing.</p>\n\n<p>How can I access 'alias' of one sub query into another sub query?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12790424,"title":"How to use function based index","body":"<p>This is my first time that i am trying to use Function based index in oracle. But i don't how to implement it. I searched on net and found simple example related to this like SQL using UPPER function index etc. Though, i found plenty to explanation what is function based index but nothing which explain how it works in case of complex SQL. I have following SQL with sub-select and have really performance issue and when i did some search to improve it then i found that there is something called Function based index. But now i don't know how to use it and how would it improve the performance.\nHere is the SQL. Could you somebody help me how to implement Function based index on this SQL (If at all it is possible.)</p>\n\n<pre><code>INSERT INTO TABLE1( K_ID, KKID, K_SEGMENTS, COL1, COL2, COL3, COL4, COL5, COL6, COL7 , COL8,COL9, COL10) \nSELECT DISTINCT K_ID , KKID , K_SEGMENTS , COL1 , COL2 , COL3 , COL4 , COL5 , COL6 , COL7 \n, COL8 , COL9 , COL10 \n FROM TABLE2 A \n , TABLE3 P \n WHERE P.KEY1 = A.KEY1 \n AND NOT EXISTS ( \n SELECT 1 \n  FROM TABLE1 B \n  WHERE 1=1 \n  AND A.K_ID = B.K_ID \n  AND A.K_SEGMENTS = B.K_SEGMENTS)\n</code></pre>\n"},{"tags":["oracle","oracle10g","user-input"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":187,"score":1,"question_id":12516930,"title":"how to get input from user at runtime in oracle 10g","body":"<p>i want to take runtime input from user in oracle 10g pl/sql blocks(i.e. interactive communication with user), is it possible?</p>\n\n<pre><code>declare\nx number;\nbegin\nx=&amp;x;\nend\n</code></pre>\n\n<p>this code gives error as &amp; can't be used in oracle 10g.</p>\n"},{"tags":["perl","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":124,"score":0,"question_id":12811131,"title":"perl-DBI / perl-DBD-oracle installation","body":"<p>What I want to do is connecting and retrieving data from oracle database through perl.</p>\n\n<p>What i did(as oracle account) is like below.....</p>\n\n<pre><code>$ rpm -qa|grep DBI\nperl-DBI-1.52-2.el5\n\n$ wget http://search.cpan.org/CPAN/authors/id/P/PY/PYTHIAN/DBD-Oracle-1.17.tar.gz\n$ tar -zxf DBD-Oracle-1.17.tar.gz\n$ cd DBD-Oracle-1.17\n$ perl Makefile.PL\nUsing DBI 1.52 (for perl 5.008008 on x86_64-linux-thread-multi) installed in /usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi/auto/DBI/\n\nConfiguring DBD::Oracle for perl 5.008008 on linux (x86_64-linux-thread-multi)\n\nRemember to actually *READ* the README file! Especially if you have any problems.\n\nUsing Oracle in /sw/oracle/app/oracle/product/102\nDEFINE _SQLPLUS_RELEASE = \"1002000500\" (CHAR)\nOracle version 10.2.0.5 (10.2)\nFound /sw/oracle/app/oracle/product/102/rdbms/demo/demo_rdbms.mk\nUsing /sw/oracle/app/oracle/product/102/rdbms/demo/demo_rdbms.mk\nYour LD_LIBRARY_PATH env var is set to '/sw/oracle/app/oracle/product/102/lib:/usr/lib:/sw/oracle/app/oracle/product/102/lib32:.'\nReading /sw/oracle/app/oracle/product/102/rdbms/demo/demo_rdbms.mk\nReading /sw/oracle/app/oracle/product/102/rdbms/lib/env_rdbms.mk\n\nAttempting to discover Oracle OCI build rules\ngcc    -c -o DBD_ORA_OBJ.o DBD_ORA_OBJ.c\nby executing: [make -f /sw/oracle/app/oracle/product/102/rdbms/demo/demo_rdbms.mk build ECHODO=echo ECHO=echo GENCLNTSH='echo genclntsh' CC=true OPTIMIZE= CCFLAGS= EXE=DBD_ORA_EXE OBJS=DBD_ORA_OBJ.o]\nOracle oci build command:\n    [true -L/sw/oracle/app/oracle/product/102/lib/ -L/sw/oracle/app/oracle/product/102/rdbms/lib/ -o DBD_ORA_EXE DBD_ORA_OBJ.o -lclntsh   `cat /sw/oracle/app/oracle/product/102/lib/sysliblist` -ldl -lm  -lpthread]\n\nFound header files in /sw/oracle/app/oracle/product/102/rdbms/public.\n\nChecking for functioning wait.ph\nConstant subroutine __USE_POSIX undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 8.\nConstant subroutine __USE_POSIX2 undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 9.\nConstant subroutine __USE_POSIX199309 undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 10.\nConstant subroutine __USE_POSIX199506 undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 11.\nConstant subroutine __USE_XOPEN undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 12.\nConstant subroutine __USE_XOPEN_EXTENDED undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 13.\nConstant subroutine __USE_UNIX98 undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 14.\nConstant subroutine __USE_LARGEFILE undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 16.\nConstant subroutine __USE_LARGEFILE64 undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 17.\nConstant subroutine __USE_FILE_OFFSET64 undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 18.\nConstant subroutine __USE_BSD undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 19.\nConstant subroutine __USE_SVID undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 20.\nConstant subroutine __USE_MISC undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 21.\nConstant subroutine __USE_GNU undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 23.\nConstant subroutine __USE_REENTRANT undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 24.\nConstant subroutine _POSIX_SOURCE undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 49.\nConstant subroutine _POSIX_C_SOURCE undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 51.\nConstant subroutine _XOPEN_SOURCE undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 53.\nConstant subroutine _XOPEN_SOURCE_EXTENDED undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 55.\nConstant subroutine _LARGEFILE64_SOURCE undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 57.\nConstant subroutine _LARGEFILE_SOURCE undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 104.\nConstant subroutine __USE_ISOC99 undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 108.\nConstant subroutine __GNU_LIBRARY__ undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/features.ph line 156.\nOperator or semicolon missing before &amp;__inline at (eval 167) line 1.\nAmbiguous use of &amp; resolved as operator &amp; at (eval 167) line 1.\nConstant subroutine __need_size_t undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/stddef.ph line 148.\nScalar found where operator expected at (eval 241) line 1, near \"'int'  $__val\"\n    (Missing operator before   $__val?)\nNumber found where operator expected at (eval 245) line 1, near \") 0\"\n    (Missing operator before 0?)\nNumber found where operator expected at (eval 246) line 1, near \") 1\"\n    (Missing operator before 1?)\nNumber found where operator expected at (eval 247) line 1, near \") 2\"\n    (Missing operator before 2?)\nConstant subroutine __need_timespec undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/time.ph line 49.\nHexadecimal number &gt; 0xffffffff non-portable at (eval 447) line 1.\nHexadecimal number &gt; 0xffffffff non-portable at (eval 448) line 1.\nConstant subroutine __need_timeval undefined at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/bits/time.ph line 23.\n\n\nSystem: perl5.008008 linux builder10.centos.org 2.6.18-53.el5 #1 smp mon nov 12 02:14:55 est 2007 x86_64 x86_64 x86_64 gnulinux \nCompiler:   gcc -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm\nLinker:     /usr/bin/ld\nSysliblist: -ldl -lm -lpthread -lnsl -lirc \nOracle makefiles would have used these definitions but we override them:\n  CC:       $(COMPDIR)/bin/gcc\n  CFLAGS:   $(GFLAG) $(OPTIMIZE) $(CDEBUG) $(CCFLAGS) $(PFLAGS)\\\n    $(SHARED_CFLAG) $(USRFLAGS)\n           [$(GFLAG) -O3 $(CDEBUG) -m32 -trigraphs -fPIC -I/sw/oracle/app/oracle/product/102/rdbms/demo -I/sw/oracle/app/oracle/product/102/rdbms/public -I/sw/oracle/app/oracle/product/102/plsql/public -I/sw/oracle/app/oracle/product/102/network/public -DLINUX -D_GNU_SOURCE -D_LARGEFILE64_SOURCE=1 -D_LARGEFILE_SOURCE=1 -DSLTS_ENABLE -DSLMXMX_ENABLE -D_REENTRANT -DNS_THREADS -fno-strict-aliasing $(LPFLAGS) $(USRFLAGS)]\n  LDFLAGS:  $(LDFLAGS32)\n           [-m32 -o $@ -L/sw/oracle/app/oracle/product/102/rdbms//lib32/ -L/sw/oracle/app/oracle/product/102/lib32/ -L/sw/oracle/app/oracle/product/102/lib32/stubs/]\nLinking with OTHERLDFLAGS = -L/sw/oracle/app/oracle/product/102/lib/ -L/sw/oracle/app/oracle/product/102/rdbms/lib/   -lclntsh   `cat /sw/oracle/app/oracle/product/102/lib/sysliblist` -ldl -lm  -lpthread [from 'build' rule]\n\nChecking if your kit is complete...\nLooks good\nLD_RUN_PATH=/sw/oracle/app/oracle/product/102/lib:/sw/oracle/app/oracle/product/102/rdbms/lib\nUsing DBD::Oracle 1.17.\nUsing DBD::Oracle 1.17.\nUsing DBI 1.52 (for perl 5.008008 on x86_64-linux-thread-multi) installed in /usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi/auto/DBI/\nWriting Makefile for DBD::Oracle\n\n***  If you have problems...\n     read all the log printed above, and the README and README.help.txt files.\n     (Of course, you have read README by now anyway, haven't you?)\n\n$ make\ncp Oracle.pm blib/lib/DBD/Oracle.pm\ncp oraperl.ph blib/lib/oraperl.ph\ncp dbdimp.h blib/arch/auto/DBD/Oracle/dbdimp.h\ncp ocitrace.h blib/arch/auto/DBD/Oracle/ocitrace.h\ncp Oraperl.pm blib/lib/Oraperl.pm\ncp Oracle.h blib/arch/auto/DBD/Oracle/Oracle.h\ncp lib/DBD/Oracle/GetInfo.pm blib/lib/DBD/Oracle/GetInfo.pm\ncp mk.pm blib/arch/auto/DBD/Oracle/mk.pm\n/usr/bin/perl -p -e \"s/~DRIVER~/Oracle/g\" /usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi/auto/DBI/Driver.xst &gt; Oracle.xsi\n/usr/bin/perl /usr/lib/perl5/5.8.8/ExtUtils/xsubpp  -typemap /usr/lib/perl5/5.8.8/ExtUtils/typemap -typemap typemap  Oracle.xs &gt; Oracle.xsc &amp;&amp; mv Oracle.xsc Oracle.c\ngcc -c  -I/sw/oracle/app/oracle/product/102/rdbms/public -I/sw/oracle/app/oracle/product/102/rdbms/demo -I/sw/oracle/app/oracle/product/102/rdbms/public -I/sw/oracle/app/oracle/product/102/plsql/public -I/sw/oracle/app/oracle/product/102/network/public -I/usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi/auto/DBI -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic   -DVERSION=\\\"1.17\\\" -DXS_VERSION=\\\"1.17\\\" -fPIC \"-I/usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/CORE\"  -Wall -Wno-comment -DUTF8_SUPPORT -DNEW_OCI_INIT -DORA_OCI_VERSION=\\\"10.2.0.5\\\" Oracle.c\nOracle.c: In function 'XS_DBD__Oracle__db_ora_lob_append':\nOracle.xs:201: warning: unused variable 'startp'\ngcc -c  -I/sw/oracle/app/oracle/product/102/rdbms/public -I/sw/oracle/app/oracle/product/102/rdbms/demo -I/sw/oracle/app/oracle/product/102/rdbms/public -I/sw/oracle/app/oracle/product/102/plsql/public -I/sw/oracle/app/oracle/product/102/network/public -I/usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi/auto/DBI -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic   -DVERSION=\\\"1.17\\\" -DXS_VERSION=\\\"1.17\\\" -fPIC \"-I/usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/CORE\"  -Wall -Wno-comment -DUTF8_SUPPORT -DNEW_OCI_INIT -DORA_OCI_VERSION=\\\"10.2.0.5\\\" dbdimp.c\ndbdimp.c: In function 'ora_db_login6':\ndbdimp.c:652: warning: value computed is not used\ndbdimp.c: In function 'dbd_rebind_ph_char':\ndbdimp.c:1052: warning: value computed is not used\ngcc -c  -I/sw/oracle/app/oracle/product/102/rdbms/public -I/sw/oracle/app/oracle/product/102/rdbms/demo -I/sw/oracle/app/oracle/product/102/rdbms/public -I/sw/oracle/app/oracle/product/102/plsql/public -I/sw/oracle/app/oracle/product/102/network/public -I/usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi/auto/DBI -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic   -DVERSION=\\\"1.17\\\" -DXS_VERSION=\\\"1.17\\\" -fPIC \"-I/usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/CORE\"  -Wall -Wno-comment -DUTF8_SUPPORT -DNEW_OCI_INIT -DORA_OCI_VERSION=\\\"10.2.0.5\\\" oci8.c\noci8.c: In function 'fetch_func_rset':\noci8.c:626: warning: value computed is not used\noci8.c: In function 'dbd_rebind_ph_lob':\noci8.c:711: warning: value computed is not used\noci8.c: In function 'ora_blob_read_mb_piece':\noci8.c:778: warning: comparison is always false due to limited range of data type\noci8.c: In function 'ora_describe':\noci8.c:1267: warning: comparison is always false due to limited range of data type\noci8.c: In function 'post_execute_lobs':\noci8.c:2118: warning: value computed is not used\noci8.c: At top level:\noci8.c:563: warning: 'fetch_func_nty' defined but not used\nRunning Mkbootstrap for DBD::Oracle ()\nchmod 644 Oracle.bs\nrm -f blib/arch/auto/DBD/Oracle/Oracle.so\ngcc  -shared -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic Oracle.o dbdimp.o oci8.o -L/sw/oracle/app/oracle/product/102/lib/ -L/sw/oracle/app/oracle/product/102/rdbms/lib/   -lclntsh   `cat /sw/oracle/app/oracle/product/102/lib/sysliblist` -ldl -lm  -lpthread -o blib/arch/auto/DBD/Oracle/Oracle.so    \\\n            \\\n\nchmod 755 blib/arch/auto/DBD/Oracle/Oracle.so\ncp Oracle.bs blib/arch/auto/DBD/Oracle/Oracle.bs\nchmod 644 blib/arch/auto/DBD/Oracle/Oracle.bs\n/usr/bin/perl \"-Iblib/arch\" \"-Iblib/lib\" ora_explain.PL ora_explain\nExtracted ora_explain from ora_explain.PL with variable substitutions.\ncp ora_explain blib/script/ora_explain\n/usr/bin/perl \"-MExtUtils::MY\" -e \"MY-&gt;fixin(shift)\" blib/script/ora_explain\nManifying blib/man1/ora_explain.1\nManifying blib/man3/DBD::Oracle.3pm\nManifying blib/man3/DBD::Oraperl.3pm\n\n$ make install\n\n\nWarning: You do not have permissions to install into /usr/share/man/man1 at /usr/lib/perl5/5.8.8/ExtUtils/Install.pm line 114.\nFiles found in blib/arch: installing files in blib/lib into architecture dependent library tree\nWriting /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/Oracle/.packlist\nAppending installation info to /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/perllocal.pod\n\n$ sudo - chmod 777 /usr/share/man\n\nWarning: You do not have permissions to install into /usr/bin at /usr/lib/perl5/5.8.8/ExtUtils/Install.pm line 114.\nFiles found in blib/arch: installing files in blib/lib into architecture dependent library tree\nWriting /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/Oracle/.packlist\nAppending installation info to /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/perllocal.pod\n\n$ sudo - chmod 777 /usr/bin\n\nFiles found in blib/arch: installing files in blib/lib into architecture dependent library tree\nWriting /usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/Oracle/.packlist\nAppending installation info to /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/perllocal.pod\n\n$ perl -e 'use DBD::Oracle'\ninstall_driver(Oracle) failed: Can't load '/usr/lib64/perl5/site_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/Oracle/Oracle.so' for module DBD::Oracle: /sw/oracle/app/oracle/product/102/lib/libnnz10.so:  cannot restore segment prot after reloc: Permission denied at /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/DynaLoader.pm line 230.\n at (eval 3) line 3\nCompilation failed in require at (eval 3) line 3.\nPerhaps a required shared library or dll isn't installed where expected\n at ./ora_dump.pl line 7\n</code></pre>\n\n<p>I've checked permission of /sw/oracle/app/oracle/product/102/lib/libnnz10.so.<br>\nMy machine is on CentOS release 5.5 and 10g Enterprise Edition Release 10.2.0.5.0...\nWhat am I missing?</p>\n"},{"tags":["database","oracle","postgresql","odbc","dblink"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2713,"score":1,"question_id":1044739,"title":"Oracle Generic DB Link not working","body":"<p>I'm trying to use oracle's hsodbc generic database link driver to access a postgresql database from my oracle 10gr2 database server.  I think I have everything configured but I'm receiving this error from the sqlplus promt after trying a remote query.</p>\n\n<pre>\nSQL> select * from temp_user@intranet;\nselect * from temp_user@intranet\n                        *\nERROR at line 1:\nORA-28545: error diagnosed by Net8 when connecting to an agent\nUnable to retrieve text of NETWORK/NCR message 65535\nORA-02063: preceding 2 lines from INTRANET\n</pre>\n\n<p>If I use \"isql\" from the linux command line (in other words test just the odbc connection) the query works.  </p>\n\n<p>I enter in   \"isql intranet\"   (intranet is the name of the odbc connection)\nI get the prompt I type   select * from temp_user and I receive back my 157 records on screen.</p>\n\n<p>So I know the odbc configuration is setup correctly.  Here is what I do for oracle.</p>\n\n<pre>\n%oracle_home/hs/admin/inithsodbc.ora\nHS_FDS_CONNECT_INFO = intranet\nHS_FDS_TRACE_LEVEL = OFF\nHS_FDS_SHAREABLE_NAME = /usr/bin/ODBCConfig\n</pre>\n\n<pre>\n%oracle_home/network/admin/tnsnames.ora\nINTRANET =\n  (DESCRIPTION =\n    (ADDRESS_LIST =\n      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.5.1)(PORT = 5432))\n    )\n    (CONNECT_DATA =\n      (SID = INTRANET)\n    )\n    (HS = OK)\n\n%oracle_home/network/admin/listener.ora\nSID_LIST_LISTENER =\n  (SID_LIST =\n    (SID_DESC =\n      (GLOBAL_DBNAME = INTRANET)\n      (PROGRAM = hsodbc)\n      (SID_NAME = INTRANET)\n      (ORACLE_HOME = /home/oracle/app/OraHomeTEST)\nLISTENER =\n  (DESCRIPTION_LIST =\n    (DESCRIPTION =\n      (ADDRESS = (PROTOCOL = TCP)(HOST = oracledb.andersen-const.com)(PORT = 5432))\n    )\n  )\n</pre>\n\n<p>I have restarted the listener.  It's status is as follows.</p>\n\n<pre>\nServices Summary...\nService \"INTRANET\" has 1 instance(s).\n  Instance \"INTRANET\", status UNKNOWN, has 1 handler(s) for this service...\n</pre>\n\n<p>I then go into sqlplus from the database server command line and do the following.</p>\n\n<pre><code>drop database link intranet;\n</code></pre>\n\n<p>create database link intranet connect to auser identified by apassword using 'intranet';</p>\n\n<p>This is successful.</p>\n\n<p>However when I run</p>\n\n<pre><code> select * from temp_user@intranet\n</code></pre>\n\n<p>I receive the error</p>\n\n<pre>\nERROR at line 1:\nORA-28545: error diagnosed by Net8 when connecting to an agent\nUnable to retrieve text of NETWORK/NCR message 65535\nORA-02063: preceding 2 lines from INTRANET\n</pre>\n\n<p>I've spend atleast a good day going back over the configures and trying things and I always get this error.</p>\n\n<p>Anybody have any good ideas, </p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12812284,"title":"Cursor name in place of extra variable","body":"<p>This is my procedure. in which I have used cursor named \"CUR_TO_COLLECT_DATA\".\nAlso I have used a variable named \"VAR_CUR_TO_COLLECT_DATA\" which is of \"TBL_TRIAL_BALANCE_REPORT\" table type.</p>\n\n<p>Now I don't want to use \"VAR_CUR_TO_COLLECT_DATA\" variable, and want to use name of the cursor I.e \"CUR_TO_COLLECT_DATA\" in place of \"VAR_CUR_TO_COLLECT_DATA\" variable.</p>\n\n<p>Is doing this task possible? If yes, then please help how?</p>\n\n<pre><code>PROCEDURE PR_TRIAL_BALANCEWITHOUTFOR IS\n\n    CURSOR CUR_TO_COLLECT_DATA IS(\n      SELECT NAME, SUM(CREDIT) AS CREDIT, SUM(DEBIT) AS DEBIT\n        FROM (\n\n              SELECT (SELECT GL_NAME\n                         FROM QM_GL\n                        WHERE QM_GL.GL_ID = QT_ACCOUNTING.GL_ID) AS NAME,\n                      DECODE(QT_ACCOUNTING.TRANS_TYPE,\n                             'CR',\n                             (QT_ACCOUNTING.TRANS_AMOUNT),\n                             0.00) AS CREDIT,\n                      DECODE(QT_ACCOUNTING.TRANS_TYPE,\n                             'DR',\n                             (QT_ACCOUNTING.TRANS_AMOUNT),\n                             0.00) AS DEBIT\n\n                FROM QT_ACCOUNTING, QM_ACCOUNTING_PERIOD\n\n               WHERE QT_ACCOUNTING.VALUE_DATE BETWEEN\n                     QM_ACCOUNTING_PERIOD.PERIODFROM AND\n                     QM_ACCOUNTING_PERIOD.PERIODTO\n                 AND QM_ACCOUNTING_PERIOD.STATUS = 'O'\n\n              )\n       GROUP BY NAME);\n\n    VAR_CUR_TO_COLLECT_DATA TBL_TRIAL_BALANCE_REPORT%ROWTYPE;\n\n  BEGIN\n\n    OPEN CUR_TO_COLLECT_DATA;\n\n    LOOP\n\n      FETCH CUR_TO_COLLECT_DATA\n        INTO VAR_CUR_TO_COLLECT_DATA;\n\n      IF (VAR_CUR_TO_COLLECT_DATA.CREDIT - VAR_CUR_TO_COLLECT_DATA.DEBIT) &gt; 0 THEN\n        INSERT INTO TBL_TRIAL_BALANCE_REPORT\n        VALUES\n          (VAR_CUR_TO_COLLECT_DATA.NAME,\n           (VAR_CUR_TO_COLLECT_DATA.CREDIT - VAR_CUR_TO_COLLECT_DATA.DEBIT),\n           0);\n      END IF;\n      IF (VAR_CUR_TO_COLLECT_DATA.DEBIT - VAR_CUR_TO_COLLECT_DATA.CREDIT) &gt; 0 THEN\n        INSERT INTO TBL_TRIAL_BALANCE_REPORT\n        VALUES\n          (VAR_CUR_TO_COLLECT_DATA.NAME,\n           0,\n           (VAR_CUR_TO_COLLECT_DATA.DEBIT - VAR_CUR_TO_COLLECT_DATA.CREDIT));\n      END IF;\n\n      EXIT WHEN CUR_TO_COLLECT_DATA%NOTFOUND;\n\n    END LOOP;\n\n    CLOSE CUR_TO_COLLECT_DATA;\n\n  EXCEPTION\n    WHEN OTHERS THEN\n      DBMS_OUTPUT.PUT_LINE(SQLERRM);\n      BEGIN\n        CLOSE CUR_TO_COLLECT_DATA;\n      EXCEPTION\n        WHEN OTHERS THEN\n          NULL;\n      END;\n  END;\n</code></pre>\n"},{"tags":["c#","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12723921,"title":"How to pass command text to oracle transaction using oracle command[]?","body":"<p>I am using Oracle as my back end and i write a method for transaction as following</p>\n\n<p>Method: </p>\n\n<pre><code>public object ExecuteTransaction(string connectionstring, params OracleCommand[] OracleCommands)\n        {\n            OracleConnection Oraconn = new OracleConnection(connectionstring);\n            if (Oraconn.State == ConnectionState.Closed)\n            {\n                Oraconn.Open();\n            }\n            OracleCommand Oracmd = Oraconn.CreateCommand();\n            OracleTransaction OraTrans;\n            OraTrans = Oraconn.BeginTransaction(IsolationLevel.ReadCommitted);\n            Oracmd.Transaction = OraTrans;\n            try\n            {\n                for(i=0;i&lt;oraclecommands.length;i++)\n               {\n                Oracmd.CommandText=OracleCommands[i].CommandText;\n                Oracmd.ExecuteNonQuery();\n                }\n             OraTrans.Commit();\n            }\n            catch (Exception e)\n            {\n                OraTrans.Rollback();\n            }\n            finally\n            {\n                if (Oraconn.State == ConnectionState.Open)\n                {\n                    Oraconn.Close();\n                }\n            }\n            return null;\n        }\n</code></pre>\n\n<p>now i want to call this in another method for example.\nMethod calling:</p>\n\n<pre><code>public int update(class obj)\n{\nstring commandtext = \"Update emp Set name ='\" + obj.name + \"',salary = '\"+obj.salary+\"',status='A' Where empid =\" + obj.id + \"\";\n oraclecommand cmd=new oracle command(commandtext);\nstring commandtext2=\"Update dept Set name ='\" + obj.name + \"',empname = '\"+obj.empname+\"',status='A' Where deptid =\" + obj.deptid + \"\";\n oraclecommand oracmd=new oracle command(commandtext2);\n//now i want to call the transaction method here\noraclecommand[] cmd1=new oraclecommand[2];\ncmd1[0]=cmd;\ncmd1[1]=oracmd;\nExecuteTransaction(string connectionstring, cmd1) ;\n</code></pre>\n\n<p>//params OracleCommand[] OracleCommands in the palce i have to pass two command strings\n    }</p>\n\n<p>how can i pass these to to method. </p>\n"},{"tags":["oracle","oracle-text"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":12812869,"title":"Oracle Text: update while index is being synchronized","body":"<p>I have a complex context index that gets synchronized nightly. The process takes some 10 minutes, and any updates to this table that touch the index column during synchronization period result in <code>ORA-29861: domain index is marked LOADING/FAILED/UNUSABLE</code> exception - what can I do about it?</p>\n"},{"tags":["c#","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12812634,"title":"How to write parameterized oracle insert query?","body":"<p>I am using oracle as my back end and i write insert query as follows, i don't know is it correct way are not,</p>\n\n<pre><code>insert into Emp_table (SL_NO,empane,empid,salaray) values(1,'sree',1002 ,:salary);\n</code></pre>\n\n<p>here in query i am calculating salary with stored procedure and getting as my out parameter salary so i has to pass that to my insert query so how can i write. if i write like as shown i am getting below errors</p>\n\n<pre><code>ORA-06550: line 1, column 175:\nPL/SQL: ORA-00933: SQL command not properly ended\nORA-06550: line 1, column 7:\nPL/SQL: SQL Statement ignored\n</code></pre>\n\n<p>kindly help me.</p>\n"},{"tags":["ruby-on-rails","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12811674,"title":"Rails Oracle enhanced adapter","body":"<p>I am having issue connecting from ROR 3.2 to Oracle database.</p>\n\n<pre><code>irb(main):001:0&gt; gem 'ruby-oci8', \"~&gt;2.1.0\"\n=&gt; true\nirb(main):002:0&gt; gem 'activerecord-oracle_enhanced-adapter', '~&gt; 1.4.1'\n=&gt; true\nirb(main):003:0&gt; exit\n\nrails console\nC:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require': \nPlease install the oracle_enhanced adapter: `gem install activerecord-o\nracle_enhanced-adapter` (cannot load such file -- active_record/connection_adapters/oracle_enhanced_adapter) (LoadError)\n</code></pre>\n\n<p>I searched the web and it says i should create a gems file located at \n<a href=\"https://github.com/rsim/oracle-enhanced/blob/master/Gemfile\" rel=\"nofollow\">https://github.com/rsim/oracle-enhanced/blob/master/Gemfile</a> and then do a bundle install .\nBut i am new to rails and not sure how to do this any ideas please.</p>\n\n<p>C:\\kerbapp>bundle show activerecord-oracle_enhanced-adapter\nC:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-oracle_enhanced-adapter-1.4.1</p>\n"},{"tags":["oracle","unicode","utf-8","character-encoding"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":244,"score":4,"question_id":12717363,"title":"How can I convert Oracle VARCHAR2 values to UTF-8 from a list of possible encodings?","body":"<p>For legacy reasons, we have a VARCHAR2 column in our Oracle 10 database—where the character encoding is set to <code>AL32UTF8</code>—that contain some non-UTF-8 values. The values are always in one of these character sets:</p>\n\n<ul>\n<li>US-ASCII</li>\n<li>UTF-8</li>\n<li>CP1252</li>\n<li>Latin-1</li>\n</ul>\n\n<p>I've written a Perl function to fix broken values outside the database. For a value from this database column, it loops through this list of encodings and tries to convert the value to UTF-8. If the conversion fails, it tries the next encoding. The first one to convert without error is the value we keep. Now, I would like to replicate this functionality inside the database so that anyone can use it.</p>\n\n<p>However, all I can find for this is the <a href=\"http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions027.htm\" rel=\"nofollow\"><code>CONVERT</code> function</a>, which never fails, but inserts a replacement character for characters it does not recognize. So there is no way, as far as I can tell, to know when the conversion failed.</p>\n\n<p>Therefor, I have two questions:</p>\n\n<ol>\n<li>Is there some existing interface that tries to convert a string into one of list of encodings, returning the first that succeeds?</li>\n<li>And if not, is there some other interface that indicates failure if it's not able to convert a string to an encoding? If so, then I could write the previous function.</li>\n</ol>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>For reference, I have written this PostgreSQL function in PL/pgSQL that does exactly what I need:</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION encoding_utf8(\n    bytea\n) RETURNS TEXT LANGUAGE PLPGSQL STRICT IMMUTABLE AS $$\nDECLARE\n    encoding TEXT;\nBEGIN\n    FOREACH encoding IN ARRAY ARRAY[\n        'UTF8',\n        'WIN1252',\n        'LATIN1'\n    ] LOOP\n        BEGIN\n            RETURN convert_from($1, encoding);\n        EXCEPTION WHEN character_not_in_repertoire OR untranslatable_character THEN\n            CONTINUE;\n        END;\n    END LOOP;\nEND;\n$$;\n</code></pre>\n\n<p>I'd dearly love to know how to do the equivalent in Oracle.</p>\n"},{"tags":["oracle","queue","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":254,"score":1,"question_id":9204028,"title":"Oracle trigger to queue/dequeue doesn't fire","body":"<p>Oracle 11g.\nI have a trigger which calls a procedure. That procedure performs queue and dequeue.\nWhen I run the procedure in sqldeveloper, it runs fine.\nIf I update the tables which the trigger fires off, the procedure runs fine.\nIf I go into the application in question and run a process which causes the trigger to fire, the procedure doesn't work. Specifically the queue and dequeue don't work because if I remove the queue/dequeue code, and instead do an insert on a table, the procedure runs fine.</p>\n\n<p>So I'm thinking that maybe there's a permissions problem causing the trigger unable to execute on dbms_aq. Does anyone know how to resolve this? Is there a user account that runs the triggers which needs to be given privileges?</p>\n\n<p>I don't think the problem is with the procedure because it runs fine. I'm also not passing any dynamic data from the trigger so the way I run the procedure under sqldeveloper is exactly the same way the trigger is calling the procedure.</p>\n\n<p>Note: sanitized code</p>\n\n<pre><code>create or replace\nTRIGGER mytrig\nAFTER INSERT ON INVENTORY_TRANSACTION \nFOR EACH ROW \nWHEN ((NEW.CLIENT = 'abcwidgets') AND (NEW.CODE = 'Receipt'))\nBEGIN\ndschema.mypack.queue_receipt('abcwidgets','999','bbb','1','88');\nEXCEPTION\nWHEN OTHERS THEN NULL;\nEND;\n\nPROCEDURE QUEUE_RECEIPT(\nCLIENTID IN VARCHAR2  \n, RECEIPTID IN VARCHAR2  \n, SITEID IN VARCHAR2\n, LINEID IN VARCHAR2\n, UPDATE_QTY IN VARCHAR2\n) AS\nctxHandle dbms_xmlgen.ctxHandle;\nl_xml xmltype;\nqueueopts DBMS_AQ.ENQUEUE_OPTIONS_T;\nmsgprops DBMS_AQ.MESSAGE_PROPERTIES_T;\nmsgid RAW(16);\n\nBEGIN\n  ctxHandle := dbms_xmlgen.newContext('SELECT line_id,\nuser_data_4\nFROM inventory\n');\nl_xml     := xmltype(dbms_xmlgen.getxml(ctxHandle));\n DBMS_AQ.ENQUEUE ('DSCHEMA.ABCWIDGETS_QUEUE',\n  queueopts,\n  msgprops,\n  l_xml,\n  msgid);\nEND QUEUE_RECEIPT;\n</code></pre>\n"},{"tags":["sql","oracle","vba","excel-vba"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":163,"score":1,"question_id":12803795,"title":"Run multiple SQL queries (Oracle) using VBA - why so slow?","body":"<p>I wrote a simple VBA code to run multiple SQL queries. The results are supposed to go to excel sheet. The problem is that the procedure takes ages to finish! In fact it would be much faster to run these queries one by one. Can anyone please tell me how to make it work faster?</p>\n\n<p>Here is my code:</p>\n\n<pre class=\"lang-vb prettyprint-override\"><code>Const strCon As String = \"Driver={Microsoft ODBC for Oracle}; \" &amp; _\n\"CONNECTSTRING=(DESCRIPTION=\" &amp; _\n\"(ADDRESS=(PROTOCOL=TCP)\" &amp; _\n\"(HOST=xxxx)(PORT=xxx))\" &amp; _\n\"(CONNECT_DATA=(SID=RTD))); uid=xxxx; pwd=xxxx;\"\n\nSub RunScripts()\n\nDim r As Integer\nDim con As ADODB.Connection\nDim rs As ADODB.Recordset\nDim q1 As String\nDim q2 As String\nDim q3 As String\n\nSet con = New ADODB.Connection\nSet rs = New ADODB.Recordset\n\nq1 = Worksheets(\"Data\").Range(\"i28\").Value\nSet rs = con.Execute(q1)\nWorksheets(\"ACCV Query\").Range(\"A2\").CopyFromRecordset rs\n\nSet rs = Nothing\nr = Worksheets(\"ACCV Query\").Range(\"A65536\").End(xlUp).Row\n\n'Next SQL Query\nq2 = Worksheets(\"Data\").Range(\"j28\").Value\nSet rs = con.Execute(q2)\nWorksheets(\"ACCV Query\").Range(\"A\" &amp; r).CopyFromRecordset rs\n\nSet rs = Nothing\nr = Worksheets(\"ACCV Query\").Range(\"A65536\").End(xlUp).Row\n\n'Next SQL Query\nq3 = Worksheets(\"Data\").Range(\"k28\").Value\nSet rs = con.Execute(q3)\nWorksheets(\"ACCV Query\").Range(\"A\" &amp; r).CopyFromRecordset rs\n\ncon.Close\nSet con = Nothing\nSet rs = Nothing\n\nEnd Sub\n</code></pre>\n\n<p>The SQL queries are stored in cells and named q1, q2, etc. (all of them work).</p>\n\n<p>When I ran two of such queries it worked fine, but once I launched 15... the macro never finished working. Each SQL script takes couple of seconds to run so it should work quick.</p>\n\n<p>How can I make it work faster?\nHelp please!</p>\n\n<p>Thanks a lot!\nM.</p>\n"},{"tags":["oracle","unique-key"],"answer_count":1,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":1898,"score":7,"question_id":7521817,"title":"Oracle unique constraint and unique index question","body":"<p>Could someone clarify what is the purpose of having unique index without unique constraint (Oracle)? \nFor example,</p>\n\n<pre><code>create table test22(id int , id1 int, tmp varchar(20));\ncreate unique index idx_test22 on test22(id);\ninsert into test22(id, id1,tmp) values (1,2,'aaa'); // ok\ninsert into test22(id, id1,tmp) values (1,2,'aaa'); // fails, ORA-00001: unique   \n  // constraint (TEST.IDX_TEST22) violated\n</code></pre>\n\n<p>So far it looks like there is a constraint. But </p>\n\n<pre><code>create table test33(id int not null primary key, \ntest22_id int not null, \nforeign key(test22_id) references test22(id) );\n</code></pre>\n\n<p>also fails with <code>\"ORA-02270: no matching unique or primary key for this column-list\"</code>.\nI'm totally confused by this behaviour. Is there a constraint or not?</p>\n\n<p>There are many articles that explain why it's possible to have a unique constraint without unique index; that is clear and makes perfect sense. However, I don't understand the reason for unique index without constraint.</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["sql","sql-server","database","oracle","security"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12807357,"title":"Synchronising SQL tables in two locations","body":"<p>have a bit of conundrum a the minute.</p>\n\n<p><strong>ANSI sql solutions please</strong>.</p>\n\n<p>We have two databases located at two different geographic locations and will be using the web for all traffic between the two locations.\nWe have a few tables common between the two databases that need to be sync'd periodically (i.e. at the end of the day)\nWith such syncs, we are worried about many things like security, congested traffic (could be thousands of records),data integrity.</p>\n\n<p>The end game is to store files in each record (up to 10mb) so the sync needs to be efficient. (Not a priority at the moment)</p>\n\n<p>There may be records that need to be sync'd both directions (i.e a column on one updated, then a column on two updated, the one record needs these two changes)</p>\n\n<p>What software/hardware options are there out there ? </p>\n\n<p>Is there another way without using triggers (want to get away from this).</p>\n\n<p>Thanks, been a while since I dealt with these technologies</p>\n"},{"tags":["visual-studio-2010","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12807342,"title":"How to create Oracle database project using Visual studio 2010?","body":"<p>All, </p>\n\n<p>I have Oracle database project in VS2008. Now i upgraded my project to VS2010.While trying to create a database project , i can see i can't select any other Data source other than SQL Server. But in VS2008 i have option to select different data source.</p>\n\n<p>I read about Toad Extension for Visual Studio and but its also not supported anymore.</p>\n\n<p><a href=\"http://www.toadworld.com/Blogs/tabid/67/EntryId/519/Creating-an-Oracle-Project-with-Toad-Extension-for-Visual-Studio.aspx\" rel=\"nofollow\">http://www.toadworld.com/Blogs/tabid/67/EntryId/519/Creating-an-Oracle-Project-with-Toad-Extension-for-Visual-Studio.aspx</a></p>\n\n<p><a href=\"http://toadworld.com/Blogs/tabid/67/EntryId/876/What-happened-to-Toad-Extension-for-Visual-Studio.aspx\" rel=\"nofollow\">http://toadworld.com/Blogs/tabid/67/EntryId/876/What-happened-to-Toad-Extension-for-Visual-Studio.aspx</a></p>\n\n<p>How can i set up oracle database project in VS2010. Is there any way through TFS?</p>\n\n<p>Any suggestions??</p>\n\n<p>Thanks</p>\n"},{"tags":["oracle","logging","triggers"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12805181,"title":"oracle trigger log","body":"<p>I have a trigger which is supposed to test whether an individual punching a time clock has punched their card within the last 5 minutes. If they have not their info should be left to go on to the table clk_data, otherwise a record should be made in the log table utl_logbook and the insert to clk_data should be aborted.</p>\n\n<p>When I run a good punch the insert works as advertised. When it is a bad punch (within 5 minutes of the last punch) I get the following error:</p>\n\n<pre><code>SQL Error: ORA-20101: Too Soon\nORA-06512: at \"TRUTRACK.INSERT_CLK_DATA\", line 14\nORA-04088: error during execution of trigger 'TRUTRACK.INSERT_CLK_DATA'\n</code></pre>\n\n<p>The transaction is stopped but I get no recording of it in utl_logbook.</p>\n\n<pre><code>The trigger code:\ncreate or replace\nTRIGGER \"INSERT_CLK_DATA\" \nBEFORE INSERT ON clk_data \nFOR EACH row \n\nBEGIN\n  DECLARE qty INTEGER := 0;\n  BEGIN\n    SELECT COUNT(*)\n    INTO qty\n    FROM clk_data\n    WHERE clk_time BETWEEN (:new.clk_time - 5/(24*60)) AND (:new.clk_time + 5/(24*60))\n    AND :new.payroll = clk_data.payroll;\n\n    IF qty &gt; 0 THEN\n\n      INSERT INTO utl_logbook (time, source, message) VALUES (sysdate, 'INSERT_CLK_DATA', 'Clock punch within restricted window. Payroll ID:' || :new.payroll || ' Time: ' || :new.clk_time || ' Type: ' || :new.type);\n\n      RAISE_APPLICATION_ERROR(-20101, 'Too Soon');\n\n    END IF;\n\n  END;\nEND;\n</code></pre>\n"},{"tags":["java","oracle","blob"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12806548,"title":"blob data partially inserted in database","body":"<p>When I insert <code>blob</code> data into Oracle database, it is partially inserted. Iam using the following code for insertion.</p>\n\n<pre><code>oracle.sql.BLOB newBlob =oracle.sql.BLOB.createTemporary(conn, false, oracle.sql.BLOB.DURATION_SESSION);\nnewBlob.putBytes(1, str.getBytes());\nps.setBlob(1, newBlob);\n</code></pre>\n\n<p>I checked whether the data got inserted or not by querying the data and converting it into <strong>jpeg</strong> image, sometimes I am getting partial image. Rest of the image is grey.  Most of the time I am getting full image perfectly. What may the reason for this partial insertion? </p>\n"},{"tags":["sql","oracle","oracle11g"],"answer_count":3,"favorite_count":4,"up_vote_count":7,"down_vote_count":0,"view_count":865,"score":7,"question_id":4866959,"title":"Oracle RAC and sequences","body":"<p>I have various database applications that use sequences, I´m migrating these applications to Oracle RAC from 10g without RAC to 11g with RAC. I need ordered sequences and gaps are tolerated.</p>\n\n<p>I'm thinking in cache sequences with order, I don´t know what are the effect in performance. Do you think this is a good option? What are your experience with sequences and RAC?</p>\n\n<p>Thanks,</p>\n"}]}
{"total":22203,"page":14,"pagesize":100,"questions":[{"tags":["sql","oracle","lazy-evaluation"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":88,"score":2,"question_id":12805346,"title":"Avoiding unnecessary joins in an Oracle SQL query","body":"<p>Suppose you have a table as follows:</p>\n\n<pre>\nTable Name:  CUSTOMER\nPrimary Key: CUSTOMER_ID\n+-------------+---------------+\n| CUSTOMER_ID | CUSTOMER_NAME |\n+-------------+---------------+\n| 1           | Bill          |\n| 2           | Tom           |\n+-------------+---------------+\n</pre>\n\n<p>Now, suppose you have a <code>CUSTOMER_ATTRIBUTE</code> table that lets you tie key/value pairs to a particular <code>CUSTOMER</code>:</p>\n\n<pre>\nTable Name:  CUSTOMER_ATTRIBUTE\nPrimary Key: (CUSTOMER_ID, ATTRIBUTE_TYPE_ID)\n+-------------+-------------------+-----------------+\n| CUSTOMER_ID | ATTRIBUTE_TYPE_ID | ATTRIBUTE_VALUE |\n+-------------+-------------------+-----------------+\n| 1           | FAVORITE_FOOD     | Pizza           |\n| 1           | FAVORITE_COLOR    | Blue            |\n| 2           | FAVORITE_FOOD     | Taco            |\n| 2           | NAME_OF_PET       | Fido            |\n+-------------+-------------------+-----------------+\n</pre>\n\n<p>Now, suppose you create a view that represents a customer with some of its possible attributes:</p>\n\n<pre><code>CREATE VIEW CUSTOMER_VIEW AS\nSELECT\n    CUSTOMER.CUSTOMER_ID,\n    CUSTOMER.CUSTOMER_NAME,\n    FAVORITE_FOOD_ATTRIBUTE.ATTRIBUTE_VALUE AS FAVORITE_FOOD,\n    FAVORITE_COLOR_ATTRIBUTE.ATTRIBUTE_VALUE AS FAVORITE_COLOR\nFROM\n    CUSTOMER\n\n    LEFT OUTER JOIN CUSTOMER_ATTRIBUTE favorite_food_attribute\n        ON customer.customer_id = favorite_food_attribute.customer_id\n           AND favorite_food_attribute.attribute_type_id = FAVORITE_FOOD\n\n    LEFT OUTER JOIN CUSTOMER_ATTRIBUTE favorite_color_attribute\n        ON customer.customer_id = favorite_color_attribute.customer_id\n           AND favorite_color_attribute.attribute_type_id = FAVORITE_COLOR\n</code></pre>\n\n<p>Now, suppose you query this view:</p>\n\n<pre><code>SELECT\n    CUSTOMER_ID,\n    CUSTOMER_NAME,\n    FAVORITE_COLOR\n    -- Notice: I did not ask for the FAVORITE_FOOD column\nFROM\n    CUSTOMER_VIEW\n</code></pre>\n\n<p>According to the explain plan, Oracle is still joining <code>favorite_food_attribute</code>, even though its value is not needed and it does not affect the query's cardinality (because it's <code>LEFT OUTER JOIN</code>ing to a table's primary key).</p>\n\n<p>Is there a way to force Oracle to avoid these unnecessary joins?</p>\n\n<p><em><strong>Update: Example DDL</em></strong></p>\n\n<p>Here is some DDL to create the example schema:</p>\n\n<pre><code>CREATE TABLE CUSTOMER\n(\n    CUSTOMER_ID   NUMBER NOT NULL,\n    CUSTOMER_NAME VARCHAR2(100)\n);\n\nCREATE UNIQUE INDEX CUSTOMER_PK_INDEX\n    ON CUSTOMER(CUSTOMER_ID);\n\nALTER TABLE CUSTOMER\n    ADD CONSTRAINT CUSTOMER_PK\n    PRIMARY KEY (CUSTOMER_ID)\n    USING INDEX CUSTOMER_PK_INDEX;\n\nCREATE TABLE CUSTOMER_ATTRIBUTE\n(\n    CUSTOMER_ID       NUMBER NOT NULL,\n    ATTRIBUTE_TYPE_ID NUMBER NOT NULL,\n    ATTRIBUTE_VALUE   VARCHAR2(1000)\n);\n\nCREATE UNIQUE INDEX CUSTOMER_ATTRIBUTE_PK_INDEX\n    ON CUSTOMER_ATTRIBUTE(CUSTOMER_ID, ATTRIBUTE_TYPE_ID);\n\nALTER TABLE CUSTOMER_ATTRIBUTE\n    ADD CONSTRAINT CUSTOMER_ATTRIBUTE_PK\n    PRIMARY KEY (CUSTOMER_ID, ATTRIBUTE_TYPE_ID)\n    USING INDEX CUSTOMER_ATTRIBUTE_PK_INDEX;\n\nCREATE OR REPLACE VIEW CUSTOMER_VIEW AS\nSELECT\n    CUSTOMER.CUSTOMER_ID,\n    CUSTOMER.CUSTOMER_NAME,\n    favorite_food_attribute.attribute_value AS favorite_food,\n    favorite_color_attribute.attribute_value AS favorite_color\nFROM\n    CUSTOMER\n\n    LEFT OUTER JOIN CUSTOMER_ATTRIBUTE favorite_food_attribute\n        ON customer.customer_id = favorite_food_attribute.customer_id\n           AND favorite_food_attribute.attribute_type_id = 5\n\n    LEFT OUTER JOIN CUSTOMER_ATTRIBUTE favorite_color_attribute\n        ON customer.customer_id = favorite_color_attribute.customer_id\n           AND favorite_color_attribute.attribute_type_id = 6;\n</code></pre>\n\n<p>Now, I run the explain plan on this query:</p>\n\n<pre><code>SELECT CUSTOMER_ID FROM HFSMMM.CUSTOMER_VIEW\n</code></pre>\n\n<p>The plan is:</p>\n\n<pre>\nSELECT STATEMENT, GOAL = ALL_ROWS           Cost=1  Cardinality=1   Bytes=65\n NESTED LOOPS OUTER         Cost=1  Cardinality=1   Bytes=65\n  NESTED LOOPS OUTER            Cost=1  Cardinality=1   Bytes=39\n   INDEX FULL SCAN  Object owner=HFSMMM Object name=CUSTOMER_PK_INDEX   Cost=1  Cardinality=1   Bytes=13\n   INDEX UNIQUE SCAN    Object owner=HFSMMM Object name=CUSTOMER_ATTRIBUTE_PK_INDEX Cost=0  Cardinality=1   Bytes=26\n  INDEX UNIQUE SCAN Object owner=HFSMMM Object name=CUSTOMER_ATTRIBUTE_PK_INDEX Cost=0  Cardinality=1   Bytes=26\n</pre>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12804342,"title":"Compare Items in the \"IN\" Clause and the resultset","body":"<p>I'd like to achieve something as follows, I have the following query (As simple as this),</p>\n\n<pre><code>SELECT ENT_ID,TP_ID FROM TC_LOGS WHERE ENT_ID IN (1,2,3,4,5).\n</code></pre>\n\n<p>Now the table <code>TC_LOGS</code> may not have all the items in the IN clause. So assuming that the table <code>TC_LOGS</code> has only 1,2. I'd like to compare the items in the IN clause i.e. 1,2,3,4,5 with 1,2(the resultset) and get a result as FOUND - 1,2 NOT FOUND - 3,4,5. I've have implemented this by applying an XSL transformation on the resultset in the application code, but I'd like to achieve this in a query, which I feel is more of an elegant solution to this problem. Also, I tried the following query with <code>NVL</code>, just to separate out the FOUND and NOT FOUND items as,</p>\n\n<pre><code>SELECT NVL(ENT_ID,\"NOT FOUND\") FROM TC_LOGS WHERE ENT_ID IN(1,2,3,4,5)\n</code></pre>\n\n<p>I was expecting a result as 1,2,NOT FOUND,NOT FOUND,NOT FOUND</p>\n\n<p>But the above query doesn't return any result.. I'd appreciate if someone can guide me in the right path here.. Thanks much in advance.</p>\n"},{"tags":["java","windows","oracle","swing","fonts"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":73,"score":2,"question_id":12803234,"title":"How to map code points to unicode characters depending on the font used?","body":"<p>The client prints labels and has been using a set of symbolic (?) fonts to do this. The application uses a single byte database (Oracle with Latin-1). The old application I am replacing was not Unicode aware. It somehow did OK. The replacement application I am writing is supposed to handle the old data.</p>\n\n<p>The symbols picked from the charmap application often map to particular Unicode characters, but sometimes they don't. What looks like the Moon using the LAB3 font, for example, is in fact U+2014 (EM DASH). When users paste this character into a Swing text field, the character has the code point 8212. <strike>It was \"moved\" into the Private Use Area (by Windows? Java?).</strike> When saving this character to the database, Oracle decides that it cannot be safely encoded and replaces it with the dreaded ¿. Thus, I started shifting the characters by 8000: -= 8000 when saving, += 8000 when displaying the field. Unfortunately I discovered that other characters were not shifted by the same amount. In one particular font, for example, ž has the code point 382, so I shifted it by +/-256 to \"fix\" it.</p>\n\n<p>By now I'm dreading the discovery of more strange offsets and I wonder: <strong>Can I get at this mapping using Java?</strong> Perhaps the TTF font has a list of the 255 glyphs it encodes and what Unicode characters those correspond to and I can do it \"right\"?</p>\n\n<p>Right now I'm using the following kludge:</p>\n\n<pre><code>static String fromDatabase(String str, String fontFamily) {\n\n  if (str != null &amp;&amp; fontFamily != null) {\n    Font font = new Font(fontFamily, Font.PLAIN, 1);\n\n    boolean changed = false;\n    char[] chars = str.toCharArray();\n    for (int i = 0; i &lt; chars.length; i++) {\n      if (font.canDisplay(chars[i] + 0xF000)) {\n        // WE8MSWIN1252 + WinXP\n        chars[i] += 0xF000;\n        changed = true;\n      }\n      else if (chars[i] &gt;= 128 &amp;&amp; font.canDisplay(chars[i] + 8000)) {\n        // WE8ISO8859P1 + WinXP\n        chars[i] += 8000;\n        changed = true;\n      }\n      else if (font.canDisplay(chars[i] + 256)) {\n        // ž in LAB1 Eastern = 382\n        chars[i] += 256;\n        changed = true;\n      }\n    }\n    if (changed) str = new String(chars);\n  }\n  return str;\n}\n\nstatic String toDatabase(String str, String fontFamily) {\n\n  if (str != null &amp;&amp; fontFamily != null) {\n    boolean changed = false;\n    char[] chars = str.toCharArray();\n    for (int i = 0; i &lt; chars.length; i++) {\n      int chr = chars[i];\n      if (chars[i] &gt; 0xF000) {\n        // WE8MSWIN1252 + WinXP\n        chars[i] -= 0xF000;\n        changed = true;\n      }\n      else if (chars[i] &gt; 8000) {\n        // WE8ISO8859P1 + WinXP\n        chars[i] = (char) (chars[i] - 8000);\n        changed = true;\n      }\n      else if (chars[i] &gt; 256) {\n        // ž in LAB1 Eastern = 382\n        chars[i] = (char) (chars[i] - 256);\n        changed = true;\n      }\n    }\n    if (changed) return new String(chars);\n  }\n\n  return str;\n}\n</code></pre>\n"},{"tags":["oracle","stored-procedures","cursor","execute","plsqldeveloper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":156,"score":0,"question_id":12803421,"title":"Execute oracle stored procedure with out cursor from PL/SQL developer","body":"<p>I'm having some troubles executing oracle stored procedure from package.\n I've intalled PL/SQL developer on local machine, and when I try to test procedure I get generated code like this:</p>\n\n<pre><code>begin\n  -- Call the procedure\n  owner.mypackage.getallrequests(res =&gt; :res,\n                                                        id=&gt; :id);\nend;\n</code></pre>\n\n<p>But I can't modify this query to return me data. Would really appreciate help.</p>\n"},{"tags":["database","oracle","database-design","unicode","oracle11g"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12801207,"title":"Disadvantages of setting the whole DB charset to Unicode vs some NVARCHAR2 in Oracle DB?","body":"<p>Some columns of my tables need to support Unicode characters (Let's say <strong>1% of all my columns</strong>).</p>\n\n<p>I think I have the following two options:</p>\n\n<ol>\n<li>Implement the Unicode columns as <strong>NVARCHAR2</strong>; or</li>\n<li>Change the character set of the whole database to one that supports Unicode (this way I can use <strong>VARCHAR2</strong>).</li>\n</ol>\n\n<p>I'm inclined to the second option (in order to not have to change my already existing VARCHAR2 scripts).</p>\n\n<p>My question is: what are the <strong>disadvantages and advantages</strong> of this second option, when compared with the first one? Is it less performant?</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12803303,"title":"How to Group SQL Results by Date in the Actual Order that they Appear in the Year in Oracle?","body":"<p>I'm trying to figure out how I can group the SQL results from a table in Oracle in the actual order in which the month occurred instead of the alphabet order of their names.</p>\n\n<p>Can anyone help me with this?  Thanks in advanced.</p>\n"},{"tags":["sql","oracle","sqlplus"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12802647,"title":"Column alias name being truncated","body":"<p>Using SQL*Plus I'm trying to use a select union statement to combine the results of two columns from the same table like this:</p>\n\n<pre><code>select substr(startdate,4,3) milestone \n  from projects \nunion \nselect substr(enddate,4,3) milestone \n  from projects\n</code></pre>\n\n<p>Using the alias <code>milestone</code> for the column, but for some reason the result shows with the column name <code>mil</code>. It's being truncated for some reason, and I think the <code>substr</code> part is the problem since it grabs 3 characters from the <code>stardate</code> and <code>enddate</code> column. how should i fix this issue?</p>\n"},{"tags":["sql","oracle","stored-procedures","oracle10g"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":89,"score":1,"question_id":12801533,"title":"How to use commands like DROP TABLE etc. within a stored procedure","body":"<p>I have written a script which is intended to be scheduled to run overnight to copy yesterday's tables, drop yesterday's tables, create new tables, then compare changes. This is working fine as a scheduled task, but I am really struggling to find a way of allowing the users to execute it on the fly for testing purposes.</p>\n\n<p>What I really want to do is to pack it all into a stored procedure, as I have an eForm tool which will easily allow the user (very non-technical) to be able to execute the procedure with a click.</p>\n\n<p>Here is an example of the start of the script. Can anyone help me shoehorn this into a stored procedure as it clearly won't accept commands like DROP TABLE as standard.</p>\n\n<p>Thanks.</p>\n\n<pre><code>DROP TABLE SQL2005TEST.ABSENCEFULLDATADIFF_YESTERDAY;\nDROP TABLE SQL2005TEST.ABSENCELATESTSTART_YESTERDAY;\nDROP TABLE SQL2005TEST.ABSENCELATESTEND_YESTERDAY;\n\nCREATE TABLE SQL2005TEST.ABSENCEFULLDATADIFF_YESTERDAY\n AS SELECT * FROM SQL2005TEST.ABSENCEFULLDATADIFF;\n\nCREATE TABLE SQL2005TEST.ABSENCELATESTSTART_YESTERDAY\n AS SELECT * FROM SQL2005TEST.ABSENCELATESTSTART;\n\nCREATE TABLE SQL2005TEST.ABSENCELATESTEND_YESTERDAY\n AS SELECT * FROM SQL2005TEST.ABSENCELATESTEND;\n</code></pre>\n"},{"tags":["sql","oracle","script","toad"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12800363,"title":"how to create an insert script from a table using TOAD, oracle?","body":"<p>I used TOAD for oracle 11g, I want  to create an insert script from a table. \nor I want to create a script file that allows  eclipse to rebuild the entire database with their data.</p>\n"},{"tags":["oracle","query","base64","converter","result"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12801755,"title":"Work with BLOB object in Oracle","body":"<p>I have an SQL statement like this-</p>\n\n<pre><code>select utl_encode.utl_encode.base64_encode(IMAGE1) \nfrom IPHONE.accidentreports \nwhere \"key\" = 66\n</code></pre>\n\n<p>But when I run it I get this error-</p>\n\n<pre><code>ORA-00904: \"UTL_ENCODE\".\"UTL_ENCODE\".\"BASE64_ENCODE\": invalid identifier\n00904. 00000 -  \"%s: invalid identifier\"\n*Cause:    \n*Action:\nError at Line: 2 Column: 8\n</code></pre>\n\n<p>I want to convert my <code>BLOB</code> object into <code>BASE64</code>. How could it be done?</p>\n"},{"tags":[".net","oracle","listener","tns"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2601,"score":1,"question_id":2570912,"title":"Connection Error:Oracle.DataAccess.Client.OracleException ORA-12170","body":"<p>This has taken many hours of mine. I have to get this .Net app to run on an XP system. Someone seems to have messed up some files so conn.Open() in the C# is causing this error:</p>\n\n<pre><code>    Connection Error:Oracle.DataAccess.Client.OracleException ORA-12170: \nTNS:Connect timeout occurred at Oracle.DataAccess.Client.OracleException.HandleErrorHelper(Int32 errCode, OracleConnection \nconn, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx, Object src, String procedure) at \nOracle.DataAccess.Client.OracleException.HandleError(Int32 errCode, OracleConnection conn, \nIntPtr opsErrCtx, Object src) at Oracle.DataAccess.Client.OracleConnection.Open() at \nService.connect(Int32 sql_choice, String databaseIdentifier, String authenticationKey) in \nc:\\Documents ....\n</code></pre>\n\n<p>This is my sqlnet.ora file:</p>\n\n<pre><code># sqlnet.ora Network Configuration File: C:\\oracle\\product\\10.2.0\\db_1\\network\\admin\\sqlnet.ora\n\nSQLNET.AUTHENTICATION_SERVICES= (NTS)\n\nNAMES.DIRECTORY_PATH= (TNSNAMES, EZCONNECT)\n\nSQLNET.INBOUND_CONNECT_TIMEOUT = 180\nSQLNET.SEND_TIMEOUT = 180\nSQLNET.RECV_TIMEOUT = 180\n</code></pre>\n\n<p>This is tnsnames.ora:</p>\n\n<pre><code># tnsnames.ora Network Configuration File: C:\\oracle\\product\\10.2.0\\db_1\\network\\admin\\tnsnames.ora\n# Generated by Oracle configuration tools.\n\nORACLE2 =\n  (DESCRIPTION =\n    (ADDRESS = (PROTOCOL = TCP)(HOST = dell )(PORT = 1521))\n    (CONNECT_DATA =\n      (SERVER = DEDICATED)\n      (SERVICE_NAME = oracle2)\n    )\n  )\n\nORCL =\n  (DESCRIPTION =\n    (ADDRESS = (PROTOCOL = TCP)(HOST = dell )(PORT = 1521))\n    (CONNECT_DATA =\n      (SERVER = DEDICATED)\n      (SERVICE_NAME = orcl)\n    )\n  )\n\nEXTPROC_CONNECTION_DATA =\n  (DESCRIPTION =\n    (ADDRESS_LIST =\n      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))\n    )\n    (CONNECT_DATA =\n      (SID = PLSExtProc)\n      (PRESENTATION = RO)\n    )\n  )\n</code></pre>\n\n<p>This is listener.ora:</p>\n\n<pre><code># listener.ora Network Configuration File: C:\\oracle\\product\\10.2.0\\db_1\\network\\admin\\listener.ora\n# Generated by Oracle configuration tools.\n\nSID_LIST_LISTENER =\n  (SID_LIST =\n    (SID_DESC =\n      (SID_NAME = PLSExtProc)\n      (ORACLE_HOME = C:\\oracle\\product\\10.2.0\\db_1)\n      (PROGRAM = extproc)\n    )\n  )\n\nLISTENER =\n  (DESCRIPTION_LIST =\n    (DESCRIPTION =\n      (ADDRESS = (PROTOCOL = TCP)(HOST = dell  )(PORT = 1521))\n    )\n  )\n</code></pre>\n\n<p>I've tried changing the host name to localhost, 127.0.0.1 but none work</p>\n\n<p>I can execute queries from SQL Plus.</p>\n\n<p>There are NO firewalls on the system</p>\n\n<p>The .Net app and DB are on the same machine.</p>\n\n<p>Anyone?</p>\n"},{"tags":["oracle","query","plsql","cursor","conditional"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":12801970,"title":"PL/SQL Dynamic SQL","body":"<p>I need help. I have a problem in constructing my PL/SQL block.\nIn the cursor, I have a query constructed, and i want to insert a filter on cursor. Below is an example:</p>\n\n<pre><code>DECLARE \ncode NUMBER;\nparameters_amb myOthertable%ROWTYPE;\n\nCURSOR test is SELECT id from mytable\n if parameters_amb.test2 is not null  then\n    where mytable.name = 'NAMETABLE'\n else\n    where mytable.name = 'NAMETABLE2';\n</code></pre>\n\n<p>Can anyone assist me in this construction?</p>\n"},{"tags":["sql","database","oracle","query"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":226,"score":4,"question_id":9157097,"title":"Which is efficient? query with subquery or joined table","body":"<p>Here are two example of query for the same purpose\n(in this example, I want to fine salesman from same city where Patriks lives.)</p>\n\n<pre><code>select * \nfrom salesman \nwhere salesman.city = \n     ( select city \n       from salesman \n       where salesman_name='Patriks'\n     );\n</code></pre>\n\n<p>and</p>\n\n<pre><code>select s1.* \nfrom salesman s1,salesman s2 \nwhere s1.city=s2.city \n  and s2.salesman_name='Patriks';\n</code></pre>\n\n<p>Which is better or efficient and why?\n(I know this is small example, but I want to figure out, which will be good in complex situation, and for big database.)</p>\n"},{"tags":["java","oracle","junit","apache-poi","dbunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":90,"score":1,"question_id":12800635,"title":"POI Appending .0 while reading numeric data from excel","body":"<p>I am using POI HSSF to read excel data and I am using JUnit to check the data against database proc RefCursor.</p>\n\n<p>The Junit test fails as the numeric data from the Refcursor for example 100 are compared against the data in the excel sheet 100 but it fails as the POI reads it as 100.0.</p>\n\n<pre><code>        InputStream fileInputStream = Testdb.class.getClassLoader().getResourceAsStream(fileName);\n        //retrieve number of columns and rows\n        int numRows=0, numCols=0, i, j, minColIndex=0, maxColIndex=0;\n        POIFSFileSystem fsFileSystem = new POIFSFileSystem(fileInputStream);\n        HSSFWorkbook workBook = new HSSFWorkbook(fsFileSystem);\n        HSSFSheet hssfSheet = workBook.getSheetAt(0);\n        Iterator rowIterator = hssfSheet.rowIterator();\n        while (rowIterator.hasNext())\n        {\n            numRows++;\n            HSSFRow hssfRow = (HSSFRow) rowIterator.next();\n            Iterator iterator = hssfRow.cellIterator();\n            List cellTempList = new ArrayList();\n            if (numRows == 1)\n            {\n                minColIndex = hssfRow.getFirstCellNum();\n                maxColIndex = hssfRow.getLastCellNum();\n                numCols = maxColIndex;\n            }\n            for(int colIndex = minColIndex; colIndex &lt; maxColIndex; colIndex++)\n            {\n                HSSFCell hssfCell = hssfRow.getCell(colIndex);\n                cellTempList.add(hssfCell);\n\n            }\n            cellDataList.add(cellTempList);\n        }\n\n\n        String expected[][] = new String[numRows][numCols];\n        String[] tableColumns = new String[numCols];\n        System.out.println(\"Rows : \" + numRows + \"Columns : \" + numCols);\n        System.out.println(\"Min Col Index : \" +minColIndex + \"Max Col Index : \" + maxColIndex);\n        for (i=0; i&lt;numRows; i++)\n        {\n            List cellTempList = (List) cellDataList.get(i);\n            for (j=0; j &lt; numCols; j++)\n            {\n                HSSFCell hssfCell = (HSSFCell) cellTempList.get(j);\n                if (i == 0)\n                {\n                    tableColumns[j] = hssfCell.toString();\n                    System.out.print(tableColumns[j] + \"\\t\");\n                }\n                else\n                {\n                    if(hssfCell != null)\n                    {\n                        expected[i-1][j] = hssfCell.toString();\n                    }\n                    else\n                    {\n                        expected[i-1][j] = null;\n                    }\n                    System.out.print(expected[i-1][j] + \"\\t\");\n                }\n            }\n            System.out.println();\n        }\n</code></pre>\n\n<p>This is a generic framework program which I am building so the framework should be intelligent enough to disregard the \".0\". \nAny inputs on how to resolve this?</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12799207,"title":"Oracle to_number(1234.567)?","body":"<p>I am trying to convert a number of type <code>varchar</code>(e.g 1234.456) in to floating point number using oracle function to_number(). In my PC (Locale German) the Oracle SQLDeveloper returning number in the fromat <code>1234,567</code> instead of <code>1234.567</code> and inturn it is causing the oracle error <code>ORA-01722-invalid number</code>. I cahnged my system locale to <code>en_usa</code> but no use. How can i change the behavior of oracle ?</p>\n\n<p>Help will be greatly appriciated </p>\n"},{"tags":["sql","oracle","stored-procedures","plsql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12797806,"title":"Update a column using stored procedure in PostgreSQL","body":"<p>I got a table in which a column named <code>items</code> and its value is  <code>''</code> which is around 1000 of rows, how can we query in  PostgreSQL using stored procedure to rename each items to a unique value like column with an incremental value i.e </p>\n\n<pre><code> items0001, items0002, items003,.....items1000\n</code></pre>\n\n<p>Tried this but its not working</p>\n\n<pre><code>UPDATE product SET items=CASE\n          WHEN items='' THEN  items='items'+1\n          ELSE items123\n\n          END\n</code></pre>\n"},{"tags":["mysql","sql","oracle"],"answer_count":7,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":91,"score":-1,"question_id":12801191,"title":"returning Max value of select statement SQL","body":"<p>I pretty much forgot how to do this with SQL actually, the thing is I have an SQL select statement such as:</p>\n\n<pre><code>SELECT COUNT(*) NAME FROM `SomeTable` WHERE `SomeID` = xxx GROUP BY `Field`\n</code></pre>\n\n<p>Which does return a table with one field and many records containing numbers. What I want is to get the a single value of the maximum number among those records.</p>\n"},{"tags":["oracle","toad"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12783521,"title":"Toad Sql Loader CTRL file","body":"<p>I am using SQL loader in Toad first  time, how do i build CTRL file in SQl Loader wizard of toad. I have one table with one filed (ID) and i have a CSV file with one field (ID) i want to load that in table using SQL loader. Please Advise.  </p>\n\n<p>Database:- Oracle\nThanks</p>\n"},{"tags":["oracle","stored-procedures","parallel-processing","package"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":12799712,"title":"How do I run procedures in parallel within an Oracle package?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/576802/can-we-use-threading-in-pl-sql\">Can We use threading in PL/SQL?</a>  </p>\n</blockquote>\n\n\n\n<p>I have a package that contains a bunch of procedures all bundled together; the package is intended to be executed from a main proc call that then calls the others.  Within the private procs, I have queries that update (via merge) a table.  While these proc/queries update the same table, they don't update the same columns.  I'd like to be able to call these procs in parallel to gain performance as they shouldn't interfere with each other.  How would I do that?</p>\n"},{"tags":["oracle","plsql","pivot"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":70,"score":0,"question_id":12798327,"title":"Convert row data into different columns","body":"<p>I have Benefit table with following data</p>\n\n<pre><code>id    |     Name\n----------------\n1     |  Shopping \n2     |  Travel \n3     |  Fuel \n4     |  Lifestyle \n5     |  Airline \n6     |  Entertainment \n7     |   Golf \n</code></pre>\n\n<p>I also have another table named Plan,  with following data</p>\n\n<pre><code>Plan_id   Benefit_id\n---------------------\n101      |      1\n101      |      2\n101      |      3\n102      |      2\n102      |      4\n102      |      6\n102      |      1\n103      |      7 \n103      |      1\n104      |      4\n104      |      5\n</code></pre>\n\n<p>Now, i want to display data using both the tables like following.</p>\n\n<pre><code>Plan_id |  Shopping |Travel |Fuel  |Lifestyle  |Airline    |Entertainment|Golf\n---------------------------------------------------------------------------------\n101     |  yes      | yes   |  yes |   no      | no        | no          | no\n102     |  yes      | yes   |  no  |   yes     | no        | yes         | no\n103     |  yes      | no    |  no  |   no      | no        | no          | no\n104     |  no       | no    |  no  |   yes     | yes       | no          | no\n</code></pre>\n"},{"tags":["sql","oracle","plsql","oracle10g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":145,"score":0,"question_id":1430806,"title":"How to create a patition table in oracle10g","body":"<p>How to create a partition table in oracle10g?</p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":138,"score":0,"question_id":12796731,"title":"ERROR ORA-00933: SQL command not properly ended","body":"<pre><code>PROCEDURE PR_TRIAL_BAL_BULKWITHOUTCUR IS\n\n\nVAR_OF_TYP_TBL TYP_TBL;\n\nBEGIN\nSELECT * BULK COLLECT INTO VAR_OF_TYP_TBL \n  FROM (SELECT NAME, SUM(CREDIT) AS CREDIT, SUM(DEBIT) AS DEBIT\n          FROM (SELECT (SELECT GL_NAME\n                          FROM QM_GL\n                         WHERE QM_GL.GL_ID = QT_ACCOUNTING.GL_ID) AS NAME,\n                       DECODE(QT_ACCOUNTING.TRANS_TYPE,\n                              'CR',\n                              (QT_ACCOUNTING.TRANS_AMOUNT),\n                              0.00) AS CREDIT,\n                       DECODE(QT_ACCOUNTING.TRANS_TYPE,\n                              'DR',\n                              (QT_ACCOUNTING.TRANS_AMOUNT),\n                              0.00) AS DEBIT\n\n                  FROM QT_ACCOUNTING, QM_ACCOUNTING_PERIOD\n\n                 WHERE QT_ACCOUNTING.VALUE_DATE BETWEEN\n                       QM_ACCOUNTING_PERIOD.PERIODFROM AND\n                       QM_ACCOUNTING_PERIOD.PERIODTO\n                   AND QM_ACCOUNTING_PERIOD.STATUS = 'O')\n         GROUP BY NAME)\n         );\n\nFOR I IN 1 .. VAR_OF_TYP_TBL.COUNT LOOP\n\n  IF (VAR_OF_TYP_TBL(I).CREDIT - VAR_OF_TYP_TBL(I).DEBIT) &gt; 0 THEN\n    INSERT INTO TBL_TRIAL_BALANCE_REPORT\n    VALUES\n      (VAR_OF_TYP_TBL(I).NAME,\n       (VAR_OF_TYP_TBL(I).CREDIT - VAR_OF_TYP_TBL(I).DEBIT),\n       0);\n  END IF;\n  IF (VAR_OF_TYP_TBL(I).DEBIT - VAR_OF_TYP_TBL(I).CREDIT) &gt; 0 THEN\n    INSERT INTO TBL_TRIAL_BALANCE_REPORT\n    VALUES\n      (VAR_OF_TYP_TBL(I).NAME,\n       0,\n       (VAR_OF_TYP_TBL(I).DEBIT - VAR_OF_TYP_TBL(I).CREDIT));\n  END IF;\n\nEND LOOP;\nVAR_OF_TYP_TBL.DELETE;\n\nEXCEPTION\n  WHEN OTHERS THEN\n  DBMS_OUTPUT.PUT_LINE(SQLERRM);\n  BEGIN\n    VAR_OF_TYP_TBL.DELETE;\n  EXCEPTION\n    WHEN OTHERS THEN\n      NULL;\n  END;\nEND;\n</code></pre>\n\n<p>Can anyone help me, where are following errors in above code and how can it be removed?  </p>\n\n<ul>\n<li>ORA-00933: SQL command not properly ended</li>\n<li>Error: PL/SQL: SQL Statement ignored</li>\n</ul>\n\n<p>(errors are in select query, only)</p>\n"},{"tags":["c++","oracle","insert","odbc","blob"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":131,"score":0,"question_id":12781553,"title":"ODBC write blob exemple oracle c++","body":"<p>Could you give me an exemple in c++ of inserting a blob in a oracle database using ODBC API ? It's my first time working with BLOB type so it is asbtract to my. I have research the internet ,a lot and now it is all messy in my head .An exemple would really help me.</p>\n\n<p>Waiting for your reply's .Thanks.</p>\n"},{"tags":["oracle","index"],"answer_count":4,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":7320,"score":7,"question_id":2722630,"title":"oracle drop index if exits","body":"<p>How do you drop an index only if it exists?</p>\n\n<p>It seems simple but I did found anything on the net.\nThe idea is to drop it only if it exists, because if not, I will have an error and my process stops.</p>\n\n<p>I found this to find if the index exists:</p>\n\n<pre><code>select index_name\nfrom user_indexes\nwhere table_name = 'myTable'\nand index_name='myIndexName'\n</code></pre>\n\n<p>But I don't know how to put it together with </p>\n\n<pre><code>DROP INDEX myIndexName\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":6,"view_count":83,"score":-5,"question_id":12782356,"title":"Some Complex Oracle Query is Needed","body":"<p>I have two tables in Oracle, one called DESTINATION, and another called MESSAGE like this:</p>\n\n<pre>\nDESTINATION\n-------\nid_1\nid_2\narrival_time\nmobile_number\n</pre>\n\n<pre>\nMESSAGE\n--------\nid_1\nid_2\ncontent\n</pre>\n\n<p><strong>Description</strong><br>\n----------------</p>\n\n<ul>\n<li>MESSAGE stores the text message to be sent to customer, and DESTINATION holds customers' numbers where this message is to be sent to.</li>\n<li>Messages are sent in campaigns that are uniquely identified by combination of id_1 &amp; id_2</li>\n<li>Campaign identified by id_1/id_2 combo consists of a message sent in multiple languages and stored in MESSAGE, and a batch of destination numbers stored in DESTINATION, so relation is many-to-many.</li>\n<li>DESTINATION contains thousands of records, while MESSAGE has millions.</li>\n</ul>\n\n<p><strong>Requirements</strong><br>\n--------------------</p>\n\n<ul>\n<li>I need to fetch all records in DESTINATION having the same id_1/id_2 in one shot, then the next id_1/id_2 in another shot, and so on (or in other words fetching campaigns one by one).</li>\n<li>The order of fetching is depending on arrival_time. If the oldest record in DESTINATION is of a particular id_1/id_2, then all of records pertaining to that id combo is to be retrieved</li>\n<li>When looking for oldest record in DESTINATION, another condition is to be added, which is existence of any record holding same id_1/id_2 in table MESSAGE (we shouldn't retrieve a number without having the respective message present)</li>\n<li>If oldest record does not have a respective message, then all records carrying same id_1/id_2 are to be skipped, and the next oldest record with different id_1/id_2 is to be fetched and checked against MESSAGE.</li>\n<li>Once something is found, it will be retrieved and sent back, otherwise the next different id_1/id_2 will be checked until all campaigns are scanned</li>\n<li>Any retrieved campaign will be processed by application and deleted from DB before another campaign is checked</li>\n</ul>\n\n<p><p>Will anybody please help me writing an optimized query to do this?</p>\n\n<p><strong>EDIT 1</strong>\nHere's some sample data:</p>\n\n<pre>ID_1    ID_2  ARRIVAL_TIME  MOBILE_NUMBER\n------  ----  ------------  -------------\nadvrnt  1     5-Oct-2012    9283421387348\nadvrnt  1     6-Oct-2012    2837012348012\nadvrnt  1     6-Oct-2012    3242348923934\nadvrnt  2     4-Oct-2012    0452934289372\nadvrnt  2     4-Oct-2012    2349712348723\nancmnt  1     8-Oct-2012    9423847234723\nancmnt  2     2-Oct-2012    9423847234723\nancmnt  3     7-Oct-2012    9423847234723\nancmnt  3     7-Oct-2012    9423847234723\n</pre>\n\n<pre>ID_1    ID_2  CONTENT\n------  ----  -------- \nadvrnt  1     We Have Discount\nadvrnt  1     Wir haben Angebote\nadvrnt  2     Buy one get one free\nadvrnt  2     Kaufen one get one free\nancmnt  1     We Are Open 24 Hours Tomorrow\nancmnt  3     We Have New Stuff to Sell\nancmnt  3     Wir haben neue Sachen zu verkaufen\nancmnt  3     Nous avons des choses à New Vendre\n</pre>\n\n<p>Notice how Announcement # 2 is missing from MESSAGE and hence the query should proceed to look for the next oldest campaign which is Advertisement # 2 retrieving both records in DESTINATION\n<p><strong>EDIT 2</strong>\nHere's the query</p>\n\n<pre>\nSELECT id_1, id_2, mobile_number\n  FROM DESTINATION\n WHERE (id_1, id_2) =\n          (SELECT DISTINCT id_1, id_2\n             FROM DESTINATION a\n            WHERE arrival_time IN\n                     (SELECT arrival_time\n                        FROM (SELECT arrival_time,\n                                       ROW_NUMBER ()\n                                       OVER (\n                                          ORDER BY\n                                             arrival_time)\n                                          rn\n                                  FROM DESTINATION)\n                       WHERE rn = 1\n                             AND EXISTS\n                                    (SELECT NULL\n                                       FROM MESSAGE b\n                                      WHERE a.id_1 = b.id_1\n                                            AND a.id_2 = b.id_2)));\n</pre>\n\n<p>The little problem with this query is that when the eldest record (ancmnt/2) in DESTINATION does not have a corresponding record in MESSAGE, the query returns nothing, while it should return next eldest (advrnt/2) records.\n<p><strong>EDIT 3</strong> The final query (thanks to @acatt)</p>\n\n<pre>\nSELECT *\n  FROM DESTINATION\n WHERE (id_1, id_2) = (SELECT id_1, id_2\n                                 FROM DESTINATION\n                                WHERE arrival_time = (SELECT MIN (arrival_time)\n                                                FROM DESTINATION d\n                                                     JOIN\n                                                        MESSAGE m\n                                                     ON d.id_1 =\n                                                           m.id_1\n                                                        AND d.id_2 =\n                                                               m.id_2));\n</pre>\n"},{"tags":["oracle","bash","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":119,"score":0,"question_id":12783579,"title":"Read file with multiple empty lines from ORACE DB with BASH","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/9931974/why-empty-line-is-not-getting-stored-in-variable\">why empty line is not getting stored in variable</a>  </p>\n</blockquote>\n\n\n\n<p>I try to read and output a textfile from my database. It works but empty lines will be deleted. </p>\n\n<p>EXAMPLE:</p>\n\n<pre><code>Hello Mr. X\n\nText from Mailboddy\n\nGreetins\nMr. Y\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>Hello Mr. X\nText from Mailboddy\nGreetins\nMr. Y\n</code></pre>\n\n<p>CODE:</p>\n\n<pre><code>sqlplus -s $DBLOGIN &lt;&lt;ENDE_SQL &gt; file\nSET FEEDBACK OFF;\nSET SERVEROUTPUT ON;\nDECLARE\n  l_text CLOB;\nBEGIN\n  SELECT text\n    INTO l_text\n    FROM table;  \n  while dbms_lob.substr(l_text, 1, l_pos) is not null LOOP\n    if dbms_lob.substr(l_text, 2, l_pos) = CHR(13) || CHR(10) then\n      DBMS_OUTPUT.NEW_LINE;\n      l_pos:=l_pos + 1;\n    else\n      DBMS_OUTPUT.put(dbms_lob.substr(l_text, 1, l_pos));\n    end if;\n    l_pos:=l_pos + 1;\n  END LOOP;\nEND;\n/\nENDE_SQL\n</code></pre>\n\n<p>The PL/SQL Code works in SQLDeveloper with the empty lines. But in the file all empty lines are removed.</p>\n"},{"tags":["sql","database","oracle","stored-procedures","temporary-tables"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":14662,"score":1,"question_id":1192265,"title":"Local Temporary table in Oracle 10 (for the scope of Stored Procedure)","body":"<p>I am new to oracle. I need to process large amount of data in stored proc. I am considering using Temporary tables. I am using connection pooling and the application is multi-threaded. </p>\n\n<p>Is there a way to create temporary tables in a way that different table instances are created for every call to the stored procedure, so that data from multiple stored procedure calls does not mix up?</p>\n"},{"tags":["sql","oracle","oracle10g"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12795340,"title":"How can the DB size increase after deleting blobs in stibo STEP CMS?","body":"<p>We use a CMS System (which uses in the background an oracle database I guess). CMS (so the DB keeps thousands of images as blobs) problem is when we make a bulk delete in CMS with our custom deletion tool(expecting the DB size will get smaller) But Zabbix monitoring we saw the DB size mysteriosly started to increase!</p>\n\n<p>Any \"ideas\" where the problem can be? maybe DB needs an update, or clear up command? Or its a CMS bug which tries to backups everything deleted? but it does not make sense as well.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","oracle","rdf","jena","sqlexception"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":303,"score":0,"question_id":10300104,"title":"Oracle RDF table throws ORA-22835 error when saving triple","body":"<p>We're running a Java application that saves data to the Oracle RDF triplestore using the Jena adapter.  Our version of Oracle is 11gR2.</p>\n\n<p>Recently, we've been getting this error popping up during the save of a large triple.</p>\n\n<pre><code>ERROR http-bio-8080-exec-4 oracle.spatial.rdf.client.jena.GraphOracleSem:\nCould not add triple java.sql.SQLException: \nORA-22835: Buffer too small for CLOB to CHAR or BLOB to RAW conversion (actual: 5223, maximum: 4000)\n        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:439)\n        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:395)\n        at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:802)\n        at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:436)\n        at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186)\n        at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:521)\n        at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:205)\n        at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:1008)\n        at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1307)\n        at oracle.jdbc.driver.OraclePreparedStatement.sendBatch(OraclePreparedStatement.java:3753)\n        at oracle.jdbc.driver.OraclePreparedStatement.processCompletedBindRow(OraclePreparedStatement.java:2112)\n        at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3444)\n        at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:3530)\n        at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1350)\n        at oracle.spatial.rdf.client.jena.GraphOracleSem.performAdd(GraphOracleSem.java:3509)\n        at oracle.spatial.rdf.client.jena.OracleBulkUpdateHandler.add(OracleBulkUpdateHandler.java:1226)\n        at oracle.spatial.rdf.client.jena.OracleBulkUpdateHandler.addIterator(OracleBulkUpdateHandler.java:1257)\n        at oracle.spatial.rdf.client.jena.OracleBulkUpdateHandler.add(OracleBulkUpdateHandler.java:1278)\n        at oracle.spatial.rdf.client.jena.OracleBulkUpdateHandler.add(OracleBulkUpdateHandler.java:1268)\n        at com.hp.hpl.jena.sparql.modify.UpdateProcessorVisitor$1.exec(UpdateProcessorVisitor.java:51)\n        at com.hp.hpl.jena.sparql.modify.GraphStoreUtils.action(GraphStoreUtils.java:60)\n        at com.hp.hpl.jena.sparql.modify.UpdateProcessorVisitor.visit(UpdateProcessorVisitor.java:48)\n        at com.hp.hpl.jena.sparql.modify.op.UpdateInsertData.visit(UpdateInsertData.java:16)\n        at com.hp.hpl.jena.sparql.modify.UpdateProcessorMain.execute(UpdateProcessorMain.java:34)\n        at com.hp.hpl.jena.update.UpdateAction.execute(UpdateAction.java:253)\n        at com.hp.hpl.jena.update.UpdateAction.parseExecute(UpdateAction.java:176)\n        at com.hp.hpl.jena.update.UpdateAction.parseExecute(UpdateAction.java:143)\n        at com.hp.hpl.jena.update.UpdateAction.parseExecute(UpdateAction.java:105)\n</code></pre>\n\n<p>As the error states, it occurs when the data string is greater than 4000 characters.  Though it doesn't specify table/column in the error, the Oracle documentation suggests that it's supposed to automatically handle this internally:</p>\n\n<blockquote>\n  <p>RDF_VALUE$ Table:</p>\n  \n  <p>LONG_VALUE: CLOB - The character string if the length of the lexical value is greater than 4000 bytes. Otherwise, this column has a null value.</p>\n  \n  <p>VALUE_NAME: VARCHAR2(4000) - This is a computed column. If length of the lexical value is 4000 bytes or less, the value of this column is the concatenation of the values of VNAME_PREFIX column and the VNAME_SUFFIX column.</p>\n</blockquote>\n\n<p>Some users are not seeing this error, though it may be that they just haven't tried to save something big enough.  We've tried clearing out the triplestore model of the user, which seemed to work for a couple days but then came back.</p>\n\n<p>Does anybody have any hints about where to start debugging this?  Thank you.</p>\n"},{"tags":[".net","oracle","odac","odp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12793807,"title":"Can't use oracle.DataAccess.Client on .net 3.5 Framework","body":"<p>The problem is that i created project on .net framwork using oracle.dataaccess.client of ODTwithODAC112030 that works with .net 4.0 or latest and client's machine has .net 3.5. I can't install .net 4 on clients machine. Is there ODP for .net 3.5?? How can i solve this problem??</p>\n"},{"tags":["oracle","plsql"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":10,"view_count":116,"score":-7,"question_id":12793389,"title":"How do I implement BULKCOLLECT in Oracle without cursors?  ","body":"<p>How do I implement BULKCOLLECT in Oracle without cursors?</p>\n\n<p>For example, this is my procedure, in which I have used cursors:</p>\n\n<pre><code>PROCEDURE process_all_rows (limit_in IN PLS_INTEGER DEFAULT 100)\nIS\nCURSOR employees_cur \nIS \n    SELECT * FROM employees;\n\nTYPE employees_aat IS TABLE OF employees_cur%ROWTYPE\n    INDEX BY PLS_INTEGER;\n\nl_employees employees_aat;\nBEGIN   \nOPEN employees_cur;\nLOOP\n    FETCH employees_cur \n        BULK COLLECT INTO l_employees LIMIT limit_in;\n\n    FOR indx IN 1 .. l_employees.COUNT \n    LOOP\n        analyze_compensation (l_employees(indx));\n    END LOOP;\n\n    EXIT WHEN l_employees.COUNT &lt; limit_in;\n\nEND LOOP;\n\nCLOSE employees_cur;\nEND process_all_rows;\n</code></pre>\n\n<p>But I want to use BULKCOLLECT in my procedure and not cursors.</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12795057,"title":"How to count specific number's occurence in select statement?","body":"<p>I want to count the the total occurence of a specific number in select statement.\nfor example.</p>\n\n<p>If these GL-Cods [1010100,2020200,3030300] apear it shows \"DISBURSMENT\"and total number of\ncount for these GL-codes.<br>\nIf these GL-Codes [5050500,6060600,7070700] apear it shows \"Cash in Hand\" and total number of count against these GL-Codes.</p>\n\n<pre><code>GL        Tag                 \n---       -----               \n1010100   Disbursment\n2020200   Disbursment\n3030300   Disbursment\n5050500   Cash in Hand\n6060600   Cash in Hand\n7070700   Cash in Hand\n------- --------------\ntotal:\nDisbursment:  3\nCash in Hand: 3\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":115,"score":0,"question_id":12790329,"title":"How to handle subquery that returns multiple rows in Oracle?","body":"<p>I am writing a bit complex query for my project I have two tables like shown below test, test_Av</p>\n\n<p>Test:</p>\n\n<pre><code> CREATE table test(id int not null, title varchar(50), place\n     varchar(20), postcode varchar(20), primary key(id));\n\n          INSERT INTO test VALUES(1,'test','','91982'); \n          INSERT INTO test VALUES(2,'test','','91982'); \n          INSERT INTO test VALUES(3,'test','','91982'); \n          INSERT INTO test VALUES(4,'test','','91982'); \n          INSERT INTO test VALUES(5,'test','','91982');\n</code></pre>\n\n<p>Test_AV</p>\n\n<pre><code>    CREATE table test_AV(id int not null, testid int, name varchar(25),\n     stringvalue varchar(25) ,primary key(id));\n\nINSERT INTO test_AV VALUES(1,1,'latitude','16.15074'); \nINSERT INTO test_AV VALUES(2,1,'longitude', '-22.74426'); \nINSERT INTO test_AV VALUES(3,2,'latitude','16.13725'); \nINSERT INTO test_AV VALUES(4,2,'longitude', '-22.85822'); \nINSERT INTO test_AV VALUES(5,3,'latitude','14.85633'); \nINSERT INTO test_AV VALUES(6,3,'longitude', '-24.72379'); \nINSERT INTO test_AV VALUES(7,4,'latitude','14.86949'); \nINSERT INTO test_AV VALUES(8,4,'longitude', '-24.70150'); \nINSERT INTO test_AV VALUES(9,5,'latitude','15.03118'); \nINSERT INTO test_AV VALUES(10,5,'longitude', '-24.32523');\n</code></pre>\n\n<p>testid in test_AV table is the foreign key </p>\n\n<p>I need to find the results that are in radius 100 km from a give 'latitude' and 'longitude' to achieve this I wrote the query some thing like this</p>\n\n<pre><code>select * from (   SELECT id, \n     title, \n     ((ACOS(\n           SIN(16.15074 * 3.141592653 / 180) \n           * SIN((SELECT stringvalue from test_AV WHERE name='latitude')\n           * 3.141592653 / 180) \n           + COS(16.15074 * 3.141592653 / 180) \n           * COS((SELECT stringvalue from test_AV WHERE name='latitude') \n           * 3.141592653 / 180)\n           * COS((-22.74426 - (SELECT stringvalue from test_AV WHERE name='longitude'))\n           * 3.141592653 /180))*6373))    AS distance   FROM\n test ) t where distance &lt;= 100\n</code></pre>\n\n<p>In the place of sub query with in the sub query I need all latitude and longitude values that are in the test_AV  Table, When I wrote this it is saying subquery is saying subquery returns multiple rows</p>\n\n<p>How can I do this?</p>\n"},{"tags":["oracle","security","plsql"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":192,"score":2,"question_id":7598446,"title":"Can only one procedure within a PL/SQL package be run with AUTHID CURRENT_USER?","body":"<p>I have a PL/SQL package that does <em>not</em> specify an <code>AUTHID</code> (effectively making it <code>AUTHID DEFINER</code>). However, there is precisely one procedure within this package that needs to run as <code>AUTHID CURRENT_USER</code>. Is this possible, or must I create a separate, top-level procedure?</p>\n"},{"tags":["java","oracle","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":310,"score":0,"question_id":12578299,"title":"IOException: Network adapter could not establish the connection","body":"<p>We started to have this \"Network adapter could not establish the connection\" problem in our production environment from time to time, I did a lot of google and went through some questions here but still didn't get the solution. </p>\n\n<p>Here are some information about our environment:</p>\n\n<ol>\n<li>We are using RAC with 2 oracle instances (version 10.2.0.4).</li>\n<li>We have several app servers (JBoss AS5) running on top of the RAC.</li>\n<li>The connection url in oracle-ds.xml is \"jdbc:oracle:thin:@(DESCRIPTION =(ADDRESS_LIST =(ADDRESS = (PROTOCOL = TCP)(HOST = db1_vip)(PORT = 1521))(ADDRESS = (PROTOCOL = TCP)(HOST=db2_vip)(PORT = 1521))(LOAD_BALANCE = yes))(CONNECT_DATA=(SERVER = DEDICATED)(SERVICE_NAME = G1db)(FAILOVER_MODE =(TYPE =SELECT)(METHOD = BASIC)(RETRIES = 120)(DELAY = 5))))\"</li>\n<li>We added db1_vip/db2_vip as well the actual ip of 2 oracle instances to the /etc/hosts of both app servers</li>\n<li>There IS firewall between oracle instances and app servers, but we opened the 1521 port on both oracle instances.</li>\n</ol>\n\n<p>We've run following tests to check if there is any problem on network or oracle TNS listener:</p>\n\n<ol>\n<li>run ping from app servers to both oracle instances, everything works fine without any packet loss.</li>\n<li>telnet the 1521 port from app servers to both oracle instances, nothing wrong.</li>\n<li>tnsping also works fine.</li>\n<li>We checked listener log but found nothing valuable.</li>\n</ol>\n\n<p>The most weird thing is that this error happens around 10 times an hour on one app server, but only happens 1 or 2 times a day on another app server.</p>\n\n<p>Can anyone shed some light on this error?</p>\n\n<p>Thanks</p>\n\n<p><strong>[EDIT4]: We found timeout problem when tnsping one oracle instance, so we changed the jdbc url to connect only one instance and found the IOException never happened again, so we think the problem is related with database and the DBA team will continue look into this.</strong></p>\n\n<p>[EDIT3]: We did following tries:</p>\n\n<ol>\n<li>disabled the firewall between app servers and database servers</li>\n<li>Use ip instead of host name</li>\n<li>use wireshark to check if there is any tcp packet problem.</li>\n</ol>\n\n<p>none of them succeed, someone please help~</p>\n\n<p>[EDIT]: the error stack trace:</p>\n\n<pre><code>java.sql.SQLException: Io Exception: The Network Adapter could not establish the connection\n    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)\n    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146)\n    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:255)\n    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:387)\n    at oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:414)\n    at oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:165)\n    at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)\n    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:801)\n    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.getLocalManagedConnection(LocalManagedConnectionFactory.java:207)\n    ... 5 more\n</code></pre>\n"},{"tags":["oracle","stored-procedures","cursor","ref-cursor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12792768,"title":"How to return a empty cursor from a stored procedure?","body":"<p>I have <code>OUT</code> parameter of a stored procedure as a <code>REF CURSOR</code>. Based on a particular condition, I would want to either return a result set (already implemented). But how do I return an empty cursor when the condition fails? Without raising an exception? Just pasting pseudo code:</p>\n\n<pre><code>IF condition = true THEN\n   OPEN OUT_CUR FOR \n   Select Some query\n\nELSE\n\n   Return empty OUT_CUR\n\nEND IF\n</code></pre>\n"},{"tags":["sql","sql-server","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12792748,"title":"Difference between running a query over a view and its underlying tables","body":"<p>Is there a difference, in performance or otherwise, between running a query over a view or there underlying tables.</p>\n\n<p>There may be aggregations, sorting involved in the query.</p>\n\n<p>Any resources where this subject is dealt is welcome.</p>\n"},{"tags":["sql","oracle","triggers","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12776352,"title":"Error on executing trigger","body":"<pre><code>CREATE OR REPLACE TRIGGER PROCESS_POPULATE_INSTANCE\nAFTER INSERT OR UPDATE ON PROCESS_INSTANCE\nFOR EACH ROW\nDECLARE\n InstanceExists NUMBER;\nBEGIN\n SELECT COUNT(*)\n INTO InstanceExists\n FROM TEST_PROCESSDATA\n WHERE TEST_PROCESSDATA.PROCESS_INSTANCE_ID = :NEW.INSTANCE_ID ;\n\n IF ( InstanceExists &gt; 0 ) THEN\nUPDATE TEST_PROCESSDATA SET PROCESS_STATUS =:NEW.STATUS WHERE PROCESS_INSTANCE_ID = NEW.INSTANCE_ID;\n ELSIF \n INSERT INTO TEST_PROCESSDATA (PROCESS_INSTANCE_ID,PROCESS_STATUS, STARTED_TIME) VALUES (:NEW.INSTANCE_ID,:NEW.STATUS,:NEW.START_TIME);\n END IF;\nEND PROCESS_POPULATE_APPDATA; \n</code></pre>\n\n<p>On executing the above trigger, i get the below error:</p>\n\n<blockquote>\n  <p>Error(12,2): PLS-00103: Encountered the symbol \"INSERT\" when expecting one of the following:     ( - + case mod new not null          continue avg count current exists max min prior sql\n  stddev    sum variance execute forall merge time timestamp interval<br>\n  date     \n   pipe    <br>\n  Error(13,2): PLS-00103: Encountered the symbol \"END\"</p>\n</blockquote>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":56,"score":2,"question_id":12791838,"title":"What does this sql mean","body":"<pre><code>INSERT INTO MAPPING_TBL ( G_ID, MR_ID, G_TYPE, G_NUMBER ) \nSELECT :G_ID AS G_ID, :MR_ID AS MR_ID, :G_TYPE AS G_TYPE, :G_NUMBER AS G_NUMBER \nFROM DUAL WHERE NOT EXISTS \n         (SELECT G_ID, MR_ID, G_TYPE, G_NUMBER \n          FROM MAPPING_TBL \n          WHERE G_ID = :G_ID2 AND \n                MR_ID = :MR_ID2 AND \n                G_TYPE = :G_TYPE2 AND \n                G_NUMBER = :G_NUMBER2 )\n</code></pre>\n\n<p>Could anyone explain what does this sql actual doing? especially what does this </p>\n\n<pre><code>SELECT :G_ID AS G_ID, :MR_ID AS MR_ID, :G_TYPE AS G_TYPE, :G_NUMBER AS G_NUMBER \nFROM DUAL\n</code></pre>\n\n<p>sql do,  thanks.</p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12790964,"title":"Compare first row to other rows","body":"<p>The issue I face that I need after selecting multiple rows,to loop over each row and fetch those who have some related information to the first row.</p>\n\n<p>Example:</p>\n\n<pre><code>select NAME,ENGLISH_GRADE,FRANCE_GRAE\nfrom (some complex query that have order by and returns 100 rows) WHOLE_ROWS\nwhere\n\n//Here I need to loop over WHOLE_ROWS and make something like that:\n//if(currentRow.ENGLISH_GRADE==WHOLE_ROWS(0).ENGLISH_GRADE)\n//fetch this row\n</code></pre>\n"},{"tags":["oracle","excel","export-to-excel"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":122,"score":0,"question_id":12778980,"title":"Exporting data from Oracle query to excel using query","body":"<p>I am having a select query, the result of which i want to be exported in a excel file using Oracle query and not any in-built operations. </p>\n\n<p>I am using <code>TOAD for Oracle</code>. I am not sure if this is possible or not. </p>\n\n<p>Any help would be of great use.</p>\n\n<p>Thanks in Advance!</p>\n"},{"tags":["oracle","plsql","oracle11g","oracle-xe"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":123,"score":0,"question_id":12790559,"title":"Converting Oracle stored procedure from using DBMS_XMLSave to DBMS_XMLStore","body":"<p>I have inherited an application that uses an Oracle database on the backend.  The database was originally using a full version of Oracle but we have moved it across to Oracle XE.  Oracle XE does not appear to support Oracle XML SQL Utility (which includes DBMS_XMLSave), or at least I have been unable to figure out how to install it.</p>\n\n<p>According to this link (<a href=\"http://ellebaek.wordpress.com/2011/01/27/converting-between-oracle-data-and-xml/\" rel=\"nofollow\">http://ellebaek.wordpress.com/2011/01/27/converting-between-oracle-data-and-xml/</a>):</p>\n\n<blockquote>\n  <p>Like DBMS_XMLQUERY, DBMS_XMLSAVE is implemented in Java and hence it's not supported with Oracle Database Express Edition.</p>\n</blockquote>\n\n<p>The stored procedures in the database use DBMS_XMLSave, but from this link (<a href=\"https://forums.oracle.com/forums/thread.jspa?threadID=530048\" rel=\"nofollow\">https://forums.oracle.com/forums/thread.jspa?threadID=530048</a>) it appears that DBMS_XMLSave has been replaced by DBMS_XMLStore:</p>\n\n<blockquote>\n  <p>The DBMS_XMLSTORE PL/SQL package was introduced in Oracle Database 10g Release 1. This package performs DML operations on relational or object tables inside the database, based on the contents of an XML document. </p>\n  \n  <p>Note that before Oracle Database 10g, this functionality existed in another PL/SQL package, called DBMS_XMLSAVE.</p>\n</blockquote>\n\n<p>I tried the solution in the link:</p>\n\n<pre><code>CREATE OR REPLACE PUBLIC SYNONYM DBMS_XMLSAVE FOR DBMS_XMLSTORE;\nGRANT EXECUTE ON DBMS_XMLSAVE TO PUBLIC;\n</code></pre>\n\n<p>This did fix a large portion of the errors, however I was left with a few problem lines:</p>\n\n<pre><code>DBMS_XMLSave.setDateFormat(v_insCtx, 'MM/dd/yyyy');\nDBMS_XMLSave.setBatchSize(v_updCtx, -1);\nDBMS_XMLSave.setDateFormat(v_updCtx, 'MM/dd/yyyy');\n</code></pre>\n\n<p>DBMS_XMLStore does not appear to support these methods.  Digging around I think I've found a way to work around the setDateFormat.  According to this link (<a href=\"http://ellebaek.wordpress.com/2011/01/27/converting-between-oracle-data-and-xml/\" rel=\"nofollow\">http://ellebaek.wordpress.com/2011/01/27/converting-between-oracle-data-and-xml/</a>) DBMS_XMLStore uses NLS settings for date/time values.  This link (<a href=\"http://www.tiplib.com/231/nls-parameter-session-logon-trigger\" rel=\"nofollow\">http://www.tiplib.com/231/nls-parameter-session-logon-trigger</a>) pointed out that NLS settings could be changed in a stored procedure like this:</p>\n\n<pre><code>BEGIN\n    DBMS_SESSION.SET_NLS('NLS_DATE_FORMAT','YYYYMMDD');\n    COMMIT;\nEND;\n</code></pre>\n\n<p>So I am hoping that I can replace the setDateFormat lines like this:</p>\n\n<pre><code>-DBMS_XMLSave.setDateFormat(v_insCtx, 'MM/dd/yyyy');  -- remove\n+DBMS_SESSION.SET_NLS('NLS_DATE_FORMAT','MM/dd/yyyy');  -- insert\n</code></pre>\n\n<p>I was unable to find a replacement for setBatchSize.</p>\n\n<p>So my questions are:</p>\n\n<ol>\n<li><p>Am I approaching this in the right way, or is there a better approach?</p></li>\n<li><p>Will the DBMS_XMLSave.setDateFormat(v_insCtx, 'MM/dd/yyyy') ->\nDBMS_SESSION.SET_NLS('NLS_DATE_FORMAT','MM/dd/yyyy') change work?</p></li>\n<li><p>Is there a replacement for setBatchSize?  Is it necessary to replace setBatchSize?</p></li>\n</ol>\n\n<p>Generally if someone asked a question like question 2 above I would tell them to try it and tell me, but I currently can't get the code to compile and I don't have a known working baseline.  I could remove the problem lines and it would probably produce some results, but I would not be clear if the results were correct or not.  Removing the problem lines and trying to check the results will be my approach from here.</p>\n\n<p>The original code is as follows:</p>\n\n<pre><code>    procedure insert_xml(p_xmlDoc in clob, p_tableName in varchar2) is\n        v_insCtx DBMS_XMLSave.ctxType;\n        v_rows number;\n    begin\n      v_insCtx := DBMS_XMLSave.newContext(p_tableName); -- get the context handle\n      DBMS_XMLSave.setDateFormat(v_insCtx, 'MM/dd/yyyy'); -- set date format\n      v_rows := DBMS_XMLSave.insertXML(v_insCtx, p_xmlDoc); -- this inserts the document\n      DBMS_XMLSave.closeContext(v_insCtx); -- this closes the handle\n    exception\n      when OTHERS then\n        raise_application_error(-20001,'An error was encountered. - '||SQLCODE||' -ERROR- '||SQLERRM);\n    end insert_xml;\n\n    procedure update_xml(p_xmlDoc in clob, p_tableName in varchar2, p_key in varchar2) is\n            v_updCtx DBMS_XMLSave.ctxType;\n            v_rows number;\n        begin\n            v_updCtx := DBMS_XMLSave.newContext(p_tableName); -- get the context\n            DBMS_XMLSave.setBatchSize(v_updCtx, -1);\n            DBMS_XMLSave.setDateFormat(v_updCtx, 'MM/dd/yyyy'); -- set date format\n            DBMS_XMLSave.clearUpdateColumnList(v_updCtx); -- clear the update settings..\n            DBMS_XMLSave.setKeyColumn(v_updCtx, p_key); -- set EMPNO as key column\n            v_rows := DBMS_XMLSave.updateXML(v_updCtx, p_xmlDoc); -- update the table.\n            DBMS_XMLSave.closeContext(v_updCtx); -- close the context..!\n      exception\n        when OTHERS then\n          raise_application_error(-20001,'An error was encountered. - '||SQLCODE||' -ERROR- '||SQLERRM);\n        end update_xml;\n</code></pre>\n\n<p>Thanks for your assistance.</p>\n"},{"tags":["java","oracle","tomcat","nullpointerexception","jndi"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":309,"score":2,"question_id":10247629,"title":"Unknown NullPointerException in JdbcOdbcDriver.finalize() line: 96","body":"<p>I'm loading data sources via JNDI using:</p>\n\n<p>JDK 1.6.0_31\nTomcat 6.0.30</p>\n\n<p>When I launch the Eclipse (Indigo SR 2) debugger, it breaks on:</p>\n\n<pre><code>Daemon System Thread [Finalizer] (Suspended (exception NullPointerException))   \n    JdbcOdbcDriver.finalize() line: 96  \n    Finalizer.invokeFinalizeMethod(Object) line: not available [native method]  \n    Finalizer.runFinalizer() line: 83   \n    Finalizer.access$100(Finalizer) line: 14    \n    Finalizer$FinalizerThread.run() line: 160   \n</code></pre>\n\n<p>I'm really at a loss as to what is causing this. Further, it doesn't appear to affect my execution at all. My data sources are initialized and used as normal, and I'm getting all the results that I expect. From what I've read, this might be related to an Oracle driver issue?</p>\n\n<p>myApp\\META-INF\\context.xml</p>\n\n<pre><code>&lt;Resource name=\"jdbc/conn\" auth=\"Container\"\n    type=\"javax.sql.DataSource\" driverClassName=\"oracle.jdbc.driver.OracleDriver\"\n    url=\"@url@\" username=\"user\" password=\"@password@\"\n    initialSize=\"4\" maxActive=\"8\" \n    defaultAutoCommit=\"false\"\n    accessToUnderlyingConnectionAllowed=\"true\"\n    testOnReturn=\"true\"\n    validationQuery=\"select 1 from dual\"\n    poolPreparedStatements=\"false\"\n    connectionProperties=\"SetBigStringTryClob=true\"\n    factory=\"org.apache.commons.dbcp.BasicDataSourceFactory\"\n/&gt;\n</code></pre>\n\n<p>myApp\\WEB-INF\\web.xml</p>\n\n<pre><code>&lt;resource-ref&gt;\n    &lt;description&gt;My DataSource&lt;/description&gt;\n    &lt;res-ref-name&gt;jdbc/conn&lt;/res-ref-name&gt;\n    &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;\n    &lt;res-auth&gt;Container&lt;/res-auth&gt;\n&lt;/resource-ref&gt;\n</code></pre>\n"},{"tags":["sql","mysql","oracle","informix"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":819,"score":0,"question_id":3078183,"title":"Is ROWID internally indexed unique by an SQL DBMS? ","body":"<p>It's my understanding that the quickest way to access a particular row is by its ROWID. In INFORMIX-SE 7.3, when I do a <code>SELECT ROWID FROM table</code> I notice that its values are type SERIAL[INT]. In Oracle, they are SERIAL[HEX]. Has anyone ever used ROWID for any practical use? If I wanted to locate the most recent row added to a table, would <code>SELECT MAX(ROWID) FROM table</code> be quicker and more reliable than say <code>SELECT MAX(pk_id) FROM table</code>, where pk_id is a user-created SERIAL column? What other practical use have you ever put ROWID to work for you? </p>\n"},{"tags":[".net","oracle","odac"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1680,"score":1,"question_id":7868909,"title":"OracleMTSRecoveryService failed to start?","body":"<p>i am getting this error while starting OracleMTSRecoveryService :</p>\n\n<p><em>Could not start the OracleMTSRecoveryService service on Local Computer.\nError 1: Incorrect function.</em></p>\n\n<p>Also during installation of ODAC service start failed.\nOracleXETNSListener is also not starting. i have reinstalled ODAC but problem remains.</p>\n\n<p>any suggestions? Any service conflicts?</p>\n"},{"tags":["oracle","sqlalchemy"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":12672952,"title":"sqlalchemy oracle scheme","body":"<p>I should extract data from an oracle database.\nHow can I find out which schema are defined in the database?\nWhen I do not define any schema in the description of Metadata(), I find no tables.\nthanks for your help,</p>\n"},{"tags":["oracle","xml-schema"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":18,"score":-1,"question_id":12788810,"title":"how to register XML schemas in Oracle","body":"<p>I have a bunch of schemas that I validated using XMLSpy.</p>\n\n<p>I would like to register them in Oracle. How does one go about this?</p>\n\n<p>Thank you,</p>\n"},{"tags":["sql","oracle","query-optimization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12787846,"title":"oracle SQL query Optimization","body":"<pre><code>SELECT SHIP.SHIPID, SHIP.SHIPID_SFX, SHIP.DATE_SOURCE, SHIP.DATE_SHIP, SHIP.WT_TOTAL, SHIP.LINK, SHIP.CARR,\nMBSH.MB_ID, MBSH.MB_ID_SFX\n, FBIL.DATE_BILL, FBIL.DATE_CHECK, FBIL.STATUS\nFROM SHIP,\n     MBSH,\n    SFXR,\n     FBIL\nWHERE SHIP.DATE_SOURCE Between '2012/08/31' And '2012/09/28' \nAND SUBSTR(SHIP.CARR,1,1) = 'C'\nAND substr(SHIP.CARR,2,1) between '0' and '9' \nAnd SHIP.CARR not in ('7','41','11','15')\nAND SHIP.MOVE_MB Is Null \nAND SHIP.SOURCE03='JDE'\nAnd MBSH.MB_SHIPID_SFX = SHIP.SHIPID_SFX\nAND MBSH.MB_SHIPID = SHIP.SHIPID\nAnd SFXR.SHIPID = SHIP.SHIPID\nAnd SFXR.SHIPID_SFX = SHIP.SHIPID_SFX\nAnd SFXR.CARR = SHIP.CARR\nAnd FBIL.BILL_ID = SFXR.BILL_ID\nAnd FBIL.BILL_BD = SFXR.BILL_BD\n</code></pre>\n\n<p>This is my query joining 4 tables. the sfxr table holds refrence to the ship and bill table. need to use it to get bill data using ship data. The above query runs forever. Can it be optimized or needs to be done through the application code.</p>\n"},{"tags":["python","oracle","cx-oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12789604,"title":"cx_Oracle error ORA-24315 when connecting ... sometimes","body":"<p>I wrote a script and ran it on desktop 'A' which targeted an Oracle db (10g) and an app server on desktop 'B'. It ran without any problems.</p>\n\n<p>I then copied the script over to desktop 'B' and it spat out the following: 'ORA-24315: illegal attribute type' at the following snippet:</p>\n\n<pre><code>cx_dsn = cx_Oracle.makedsn(cx_hostname, cx_port, cx_SID)\ncx_connection = cx_Oracle.Connection(cx_username + '/' + cx_password + '@'+ cx_dsn )\n</code></pre>\n\n<p>Both machines were configured as follows:</p>\n\n<ul>\n<li>Windows 7 (64-bit) </li>\n<li>32-bit version of Python (ActiveState) </li>\n<li>pypm install cx-oracle (Which resulted in version cx_Oracle.clientversion() = (11, 2, 0, 3, 0) - Yes this does indicate v11 but it worked against the 10g version from Desktop 'A')</li>\n</ul>\n\n<p>Desktop 'B' however had Oracle 10g and WebSphere 7 installed - Desktop 'A' did not</p>\n\n<p>I have searched and lots of people have encountered this problem or something similar but in general the only suggested solutions were:</p>\n\n<ol>\n<li>Ensure that the path doesn't reference Oracle libraries before the Python libraries - I guess the suggestion here is that the Oracle install on desktop B is inteferring. So I configured the path so that it only referenced Python (no mention of Oracle etc) - that didn't help</li>\n<li>Make sure you are using 32 bit version of everything or 64 bit version of everything - I did, 32 bit across the board as far as Python was concerned</li>\n<li>Ensure that the cx-Oracle matches the db you are targeting ... ok it looks like I have a problem but ... The strange thing is that the script does work on desktop 'A' so I imagine it must be something environmental on desktop 'B'. So off I go and install a dedicated 10g version of cx_Oracle. No success either.  (This query <a href=\"http://stackoverflow.com/questions/10456598/cx-oracle-multiple-instances-of-oracle-10-and-11-plus-oracle-home\">cx_Oracle multiple instances of Oracle (10 and 11), plus Oracle_Home</a> wasn't answered but sounds similar in nature)</li>\n</ol>\n\n<p>So I am stuck - any suggestions?</p>\n"},{"tags":["oracle","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12779495,"title":"How to create a Oracle global type and use it in PL/SQL?","body":"<p>Oracle RECORD TYPE declared in procedure or function is local, therefore it might be used locally only. How to declare a RECORD TYPE that is global and might be used in all procedures and functions globally in DB?</p>\n"},{"tags":["sql","oracle","query"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":348,"score":-2,"question_id":3689035,"title":"Oracle SQL Issue with Insert Statements","body":"<p>So I am a beginner to this, and trying to follow my professors instructions on how to complete this.  They are as follows:</p>\n\n<p>Consider the relational database described in Tables 1-3.  The underlined attribute(s) is the primary key for a table.  Use your Oracle account to create this database and to insert the tuples listed in each table.  Make sure you include the primary key and foreign key constraints.  Put check constraints on the following three attributes.  Rating (between 0 and 10), Lengith (greater than 0), ReleaseDate (after 1/1/1900). </p>\n\n<p>Table 1: Theatres<br>\nName (Underlined as Primary), City, State, Zip, Phone</p>\n\n<p>Table 2: Movies<br>\nTitle (Primary), Rating, Length, ReleaseDate</p>\n\n<p>Table 3: ShownAt<br>\nTheatreName, MovieTitle (BOTH listed as Primary)</p>\n\n<p>Here is how I have them declared:</p>\n\n<pre><code>CREATE TABLE Theatres (\nName   varchar2(50) not null,\nCity   varchar2(50) not null,\nState   varchar2(50) not null,\nZip   number not null,\nPhone   varchar2(50) not null,\nCONSTRAINT name_pk PRIMARY KEY (Name)\n);\n\ncreate table Movies (\nTitle   varchar2(100),\nRating NUMBER CONSTRAINT Rating_CHK CHECK (Rating BETWEEN 0 AND 10),\nLength NUMBER CONSTRAINT Length_CHK CHECK (Length &gt; 0),\nReleaseDate date CONSTRAINT RDATE_CHK CHECK (ReleaseDate &gt; to_date('1/January/1900', 'DD/MONTH/YYYY')),\nCONSTRAINT title_pk PRIMARY KEY (Title)\n);\n\ncreate table ShownAt (\nTheatreName varchar2(50),\nMovieTitle varchar2(100),\nCONSTRAINT moviet_fk FOREIGN KEY (MovieTitle) REFERENCES Movies(Title),\nCONSTRAINT shown_pk PRIMARY KEY (TheatreName, MovieTitle)\n);\n</code></pre>\n\n<p>This declares fine, and I get no errors.  Below are my inserts (I gave one example insert for each table):</p>\n\n<pre><code>insert into theatres values ( 'Great Escape 14', 'Wilder', 'KY', '41076', '(859) 442-0000' );\ninsert into movies values ( 'The Expendables', '7.6', '103', '13 August 2010' );\ninsert into shownat values ( 'Great Escape 14', 'The Expendables' );\n</code></pre>\n\n<p>All inserts into theatres and movies go off without a hitch.  For ShownAt, I get A LOT OF ERRORS, most of which look something like this:</p>\n\n<pre><code>Error starting at line 37 in command:\ninsert into shownat values ( 'Showcase Cinema De Lux Florence', 'The Pianist' )\nError report:\nSQL Error: ORA-02291: integrity constraint (LANGB1.MOVIET_FK) violated - parent key not found\n</code></pre>\n\n<p>Meaning:</p>\n\n<pre><code>02291. 00000 - \"integrity constraint (%s.%s) violated - parent key not found\"\n*Cause:    A foreign key value has no matching primary key value.\n*Action:   Delete the foreign key or add a matching primary key.\n</code></pre>\n\n<p>Any insert into ShownAt where the title is just one word (say the movie Up) works just fine, but anything with more than one word (like The Expendables) won't execute, and give the above error.  ANY HELP would be much appreciated.  I can post any other details that you need.</p>\n"},{"tags":["sql","oracle","substr","clob","multibyte"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":177,"score":0,"question_id":12085471,"title":"SELECT as much data from CLOB to VARCHAR2 as possible, with multibyte chars in the data","body":"<p>Multi-byte characters had caused me a lot of pain.</p>\n\n<p>Any suggestion for this problem?</p>\n\n<p>I have a CLOB field that <em>might</em> contains some multi-byte characters, and I need to select in SQL and convert this field into a string for downstream process, currently I am using:</p>\n\n<pre><code>SELECT DBMS_LOB.SUBSTR( description, 4000, 1 ) FROM table\n</code></pre>\n\n<p>But the 4000 in above command is in length of characters, rather than bytes. So I had to change to 3000 to handle any multi-byte characters that might have crept into the data else buffer size error will occur.</p>\n\n<p>The problem is for records that do not contain multibyte character, it might unnecessarily truncated more data than it need to.\n(The 4000 is the string limitation, we can/had to live with that.)</p>\n\n<p>Is there a way to do something in equivalent of:</p>\n\n<pre><code>SELECT DBMS_LOB.SUBSTR( description, 4000bytes, 1 ) FROM table\n</code></pre>\n\n<p>That way I can get as much data out as possible. </p>\n\n<p>Note: I am not allowed to create temp tables/views, not using PL/SQL, only SQL SELECT...</p>\n"},{"tags":["java","sql","oracle","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12787909,"title":"Simple getColumnName(0) call throws Invalid column index: getValidColumnIndex","body":"<p>I'm trying to write a JTable that takes the data from a ResultSet and uses that to create a dynamic sized table with appropriate column names and row data values from the ResultSet but I can't get JDBC to get the column names for me dynamically.</p>\n\n<p>I know my select statement is good! I can print the results out easily with my ResultPrinter class that I wrote but I can't seem to get the column names for some reason.</p>\n\n<p>The code: <a href=\"http://pastebin.com/SSNdCkNu\" rel=\"nofollow\">http://pastebin.com/SSNdCkNu</a></p>\n\n<p>The output:</p>\n\n<pre><code>Connected to DB!  \nSNUM, SNAME, STATUS, CITY, SUPPLIERS_ID_SEQ // printed by static Suppliers class\nColumns: 5 // result set shows there are 5 valid columns as expected\nException in thread \"main\" java.sql.SQLException: Invalid column index: getValidColumnIndex\nat oracle.jdbc.driver.OracleResultSetMetaData.getValidColumnIndex(OracleResultSetMetaData.java:138)\nat oracle.jdbc.driver.OracleResultSetMetaData.getColumnName(OracleResultSetMetaData.java:306)\nat Main.main(Main.java:15)\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12753032,"title":"how to get list of group members for group name","body":"<p>I have <code>GROUPs</code> and <code>USERs</code>.  <code>GROUPs</code> can contain <code>USERs</code> and other <code>GROUPs</code>.</p>\n\n<p>The data is stored in one table, <code>NODES</code> like below, where the <code>PARENT_NDE_ID</code> is the group/user's containing parent.  A user always has a parent that is a group's id.  If the group has no parent then the parent id and group id are equal.</p>\n\n<pre><code>NODES\n-----\nNDE_ID (int)\nPARENT_NDE_ID (int)\nDESCRIPTION (string, any name)\nNDE_TYPE (string, either 'USER' or 'GROUP')\n</code></pre>\n\n<p>My question is, I want to get a list of members in for a group.</p>\n\n<p>I want to produce either:</p>\n\n<pre><code>GROUP NAME | MEMBER NAME\n---\nGroup A | Group B\nGroup A | Bob\nGroup B | Dave\nGroup C | Mike\n</code></pre>\n\n<p>Or, a build query that accepts a group name and gives me a list of members which I can run manually for each group name, something like:</p>\n\n<pre><code>select NODES.DESCRIPTION, NODES.NDE_TYPE \nwhere PARENT_NDE_ID = (the id associated with the provided group name string)\n</code></pre>\n\n<p>Any help is greatly apprecaited!</p>\n"},{"tags":["oracle","privileges"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5104,"score":0,"question_id":5253087,"title":"Oracle privilege missing for DBMS_SCHEDULER, ORA-27486 after GRANT CREATE JOB, CREATE EXTERNAL JOB","body":"<p><strong>What additional privilege am I missing?</strong></p>\n\n<pre><code>Connected to:\nOracle Database 10g Enterprise Edition Release 10.2.0.1.0 - Production\nWith the Partitioning, OLAP and Data Mining options\n\nSQL&gt;\nSQL&gt; create user myUser identified by password default tablespace theData temporary tablespace temp;\n\nUser created.\n\nSQL&gt; grant connect, resource to myUser;\n\nGrant succeeded.\n\nSQL&gt; GRANT READ,WRITE ON DIRECTORY tmp TO myUser;\n\nGrant succeeded.\n\nSQL&gt; GRANT CREATE JOB TO myUser;\n\nGrant succeeded.\n\nSQL&gt; GRANT CREATE EXTERNAL JOB TO myUser;\n\nGrant succeeded.\n\nSQL&gt; connect myUser/password\nConnected.\nSQL&gt;\nSQL&gt;\n1 CREATE PROCEDURE shellScript\n2 AS\n3 /*-----------------------*/\n4 v_sql UTL_FILE.FILE_TYPE;\n5 v_shell UTL_FILE.FILE_TYPE;\n6 /*=======================*/\n7 BEGIN\n8 /*=======================*/\n9 -- write the sql script to /tmp/myUser-tmp-script.sql\n10 v_sql:= UTL_FILE.FOPEN('TMP','myUser-tmp-script.sql','w');\n11 UTL_FILE.PUT_LINE(v_sql,'select to_char(sysdate,''YYYYMMDDHR24MISS'') from dual'||';', FALSE);\n12 UTL_FILE.FFLUSH(v_sql);\n13 UTL_FILE.FCLOSE(v_sql);\n14 -- write the shell script to /tmp/myUser-tmp-script.sh\n15 v_shell:= UTL_FILE.FOPEN('TMP','myUser-tmp-script.sh','w');\n16 UTL_FILE.PUT_LINE(v_shell,'#!/bin/bash', FALSE);\n17 UTL_FILE.PUT_LINE(v_shell,'sqlplus myUser/password@sbox @/tmp/myUser-tmp-script.sql &gt; /tmp/myUser-tmp-script.err', FALSE);\n18 UTL_FILE.FFLUSH(v_shell);\n19 UTL_FILE.FCLOSE(v_shell);\n20 -- execute the shell script which executes the sql script\n21 DBMS_SCHEDULER.PURGE_LOG(JOB_NAME=&gt;'myJob');\n22 DBMS_SCHEDULER.CREATE_JOB(JOB_NAME=&gt;'myJob', JOB_TYPE=&gt;'EXECUTABLE', JOB_ACTION=&gt;'/bin/bash', NUMBER_OF_ARGUMENTS=&gt;1, START_DATE=&gt;SYSTIMESTAMP, ENABLED=&gt;FALSE);\n23 DBMS_SCHEDULER.SET_JOB_ARGUMENT_VALUE('myJob', 1, '/tmp/myUser-tmp-script.sh');\n24 DBMS_SCHEDULER.ENABLE('myJob');\n25 USER_LOCK.SLEEP(500); -- give it 5 seconds to complete\n26 -- clean up\n27 UTL_FILE.FREMOVE('TMP', 'myUser-tmp-script.sh');\n28 UTL_FILE.FREMOVE('TMP', 'myUser-tmp-script.sql');\n29 /*=======================*/\n30 END shellScript;\n/\n\nProcedure created.\n\nSQL&gt; SHOW ERRORS PROCEDURE shellScript\nNo errors.\nSQL&gt;\nSQL&gt;\nSQL&gt; execute shellScript;\nBEGIN shellScript; END;\n\n*\nERROR at line 1:\nORA-27486: insufficient privileges\nORA-06512: at \"SYS.DBMS_ISCHED\", line 411\nORA-06512: at \"SYS.DBMS_ISCHED\", line 452\nORA-06512: at \"SYS.DBMS_SCHEDULER\", line 1082\nORA-06512: at \"MYUSER.SHELLSCRIPT\", line 21\nORA-06512: at line 1\n\nSQL&gt;\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12787422,"title":"Sql retrieve results","body":"<p>I have below order table,i want to retrieve records those are not  in order status \"processed\" and cacel)status \"cancelled\" by today date and time(17:00 USA).Please help me to complete my issue.</p>\n\n<pre><code>order id  ordername order_status  cancel_status  order_time           cancel_time \n==============================================================================================    \n1         Iphone    processed     cancelled      10/08/2012 16:00:00  10/08/2012 16:00:00        \n2         samsung   notprocessed  null           null                 null        \n3         nokia     processed     cancelled      10/08/2012 16:00:00  10/08/2012 17:00:00    \n4         motorola  notprocessed  null           null         null    \n5         HTC       processed     null           10/08/2012 17:00:00  null\n</code></pre>\n\n<p>I tried below way but not returning any records.Please help me.</p>\n\n<pre><code>SELECT * \nFROM \n    order \nWHERE \n    to_char(order_time,'YYYYMMDD HH24:MI:SS')&gt;To_char(sysdate,YYYYMMDD) || ' '|| '17:00:00' \nand to_char(cancel_time,'YYYYMMDD HH24:MI:SS')&gt;To_char(sysdate,YYYYMMDD) || ' '|| '17:00:00' \nand order_time is null \nand cancel_time is null\n</code></pre>\n"},{"tags":["oracle","report","oraclereports"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12787313,"title":"Oracle Reports 6i - Rep 3300","body":"<p>While printing a report in batch i am getting the following error :<strong>REP-3300 FATAL ERROR IN TOOLKIT - UI-9 THIS FUNCTION IS OUT OF CONTEXT</strong>. My guess is the report is too large since its 10512 pages.</p>\n\n<p>This error occurs while the report is in the previewer and the print is in session, the report is able to spool to the last page so i know the problem is not with the print spool size. I was able to print approximately 3500 pages and then the error was thrown.</p>\n\n<p>I do not have administrator access to the machine i am printing the report from. I know the TEMP folder in the REPORT80 folder is restricted in size so i am assuming i need to generate smaller batches and then print. </p>\n\n<p>I would like to know if there is a way to print this 10512 pages in parts like print the first 3000 pages then the next 3000..... until 10512. does oracle 6i reports provide any mechanism for printing in small amounts.</p>\n\n<p>what i really want to achieve is when the user does the processing the report is thrown to the screen i want that to be 3000 records and when they close off the report previewer i want it to print another 3000 automatically without the users intervention.</p>\n"},{"tags":["oracle","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":48,"score":1,"question_id":12786312,"title":"syntax error when declaring variables in a pl/sql procedure","body":"<p>This is sending me a bit mad. I'm trying to add in a variable to a procedure, but it wasn't working - I just got this error message: </p>\n\n<blockquote>\n  <p>[Error] Syntax check (25: 7): ERROR line 25, col 7, ending_line 25,\n  ending_col 12, Found 'number', Expecting: ;   -or-   ..  :=  DEFAULT \n  NOT  NULL   -or-   %   -or-   (  .  @</p>\n</blockquote>\n\n<p>I knocked up a really basic procedure below to isolate the problem and now I'm completely stuck, as every basic syntax guide I've looked as says to do what I've done. Why can't i declare variables as shown below? I normally code in SQL Server if that's any clue as to my problem. Many thanks if anyone can help!</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE MRCS.pro_xxx_test1 (cats out sys_refcursor)\nIS\n\ndeclare\n\nspoon number;\n\nballs varchar2(3);\n\nBEGIN\n\n open cats for select * from dual;\n\n   end;\n\n/\n</code></pre>\n"},{"tags":["oracle","ant","jdeveloper","oracle-adf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":500,"score":0,"question_id":7945806,"title":"Build a Oracle ADF application jar file using Ant","body":"<p>I am trying to write Ant scripts to build jar files for Oracle ADF application and I noticed some differences in the contents being generated by the build (deploy might be a better word actually) process within JDev and from the Ant process:</p>\n\n<ul>\n<li>META-INF/adfc-config.xml</li>\n<li>META-INF/adflibWEBINDEX.txt</li>\n<li>META-INF/adfm.xml    </li>\n<li>META-INF/faces-config.xml</li>\n<li>META-INF/jar-adf-config.xml</li>\n<li>META-INF/jar-connections.xml</li>\n<li>META-INF/jax-ws-catalog.xml</li>\n<li>META-INF/oracle.adf.common.services.ResourceService.sva</li>\n<li>META-INF/task-flow-registry.xml</li>\n</ul>\n\n<p>Does anyone know how these files are generated and how to edit the Ant scripts to include them? </p>\n\n<p>I know that some of these exist in the project folder structure but when I compare their contents against the same files generated from the Jdev build produced jar file they are different. So I assume there is something more than a simple copy going on here.</p>\n\n<p>Cheers,</p>\n\n<p>Mo</p>\n"},{"tags":["sql","oracle","oracle10g","sql-xml"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12784478,"title":"Oracle SQL XML Functions - How to get encoding in XML Prolog?","body":"<p>This SQL </p>\n\n<pre><code>SELECT XMLRoot(XMLType('&lt;poid&gt;143598&lt;/poid&gt;'), VERSION '1.0', STANDALONE YES)\n  AS xmlroot FROM DUAL; \n</code></pre>\n\n<p>generates an output  as follows </p>\n\n<pre><code>XMLROOT\n--------------------------------------\n&lt;?xml version=\"1.0\" standalone=\"yes\"?&gt;\n&lt;poid&gt;143598&lt;/poid&gt;\n</code></pre>\n\n<p>How can get encoding in my xml prolog?</p>\n\n<p>Ex - I want output to be something like</p>\n\n<pre><code>XMLROOT\n--------------------------------------\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;poid&gt;143598&lt;/poid&gt;\n</code></pre>\n\n<p>Reference -</p>\n\n<p><a href=\"http://docs.oracle.com/cd/E18283_01/appdev.112/e16659/xdb13gen.htm#i1029583\" rel=\"nofollow\">Generate XML Data from the database</a></p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":152,"score":0,"question_id":12784476,"title":"ORA-06553: PLS-306: wrong number or types of arguments in call to 'OGC_DISTANCE'?","body":"<p>I am writing a small query(ORACLE) for my project to find the distance from a given latitude and longtitude to other latitude and longitude.</p>\n\n<p>Below are the sample data that i used </p>\n\n<pre><code> CREATE table test(id int, title varchar(50), place varchar(20),\n postcode varchar(20), latitude DOUBLE PRECISION, longitude DOUBLE\n PRECISION);\n\n INSERT INTO test VALUES(1,'sekhar91','kanigiri','91982',16.15074,\n -22.74426);\n\n INSERT INTO test VALUES(2,'sekhar91','kanigiri','91982',16.13725,\n -22.85822);\n\n INSERT INTO test VALUES(3,'sekhar91','kanigiri','91982',14.85633,\n -24.72379);\n\n INSERT INTO test VALUES(4,'sekhar91','kanigiri','91982',14.86949,\n -24.70150);\n\n INSERT INTO test VALUES(5,'sekhar91','kanigiri','91982',15.03118,\n -24.32523);\n\n INSERT INTO test VALUES(6,'sekhar91','kanigiri','91982',14.88924,\n -24.29403);\n\n INSERT INTO test VALUES(7,'sekhar91','kanigiri','91982',14.89500,\n -24.50000);\n\n INSERT INTO test VALUES(8,'sekhar91','kanigiri','91982',15.20031,\n -23.16798);\n\n INSERT INTO test VALUES(9,'sekhar91','kanigiri','91982',16.72662,\n -22.92971);\n\n INSERT INTO test VALUES(10,'sekhar91','kanigiri','91982',16.60005,\n -22.90818);\n\n INSERT INTO test VALUES(11,'sekhar91','kanigiri','91982',15.19196,\n -23.64427);\n\n INSERT INTO test VALUES(12,'sekhar91','kanigiri','91982',14.92331,\n -23.52119);\n\n INSERT INTO test VALUES(13,'sekhar91','kanigiri','91982',14.91637,\n -23.60410);\n\n INSERT INTO test VALUES(14,'sekhar91','kanigiri','91982',14.92279,\n -23.51720);\n\n INSERT INTO test VALUES(15,'sekhar91','kanigiri','91982',14.92331,\n -23.52119);\n\n INSERT INTO test VALUES(16,'sekhar91','kanigiri','91982',15.09882,\n -23.67105);\n</code></pre>\n\n<p>And the Sql Query tha i wrote is</p>\n\n<pre><code>SELECT id, \n       title, \n      ((ACOS(SIN(16.15074 * 3.141592653 / 180) *\n        SIN(latitude * 3.141592653 / 180) +  COS(16.15074 * 3.141592653 / 180\n        ) * COS(latitude * 3.141592653 / 180)* COS((-22.74426 -\n       longitude)*3.141592653 /180))*180/3.141592653)*60*1.1515)  as distance\n FROM test  \n HAVING distance&lt;=100\n</code></pre>\n\n<p>While executing the above query Oracle is saying</p>\n\n<pre><code>ORA-06553: PLS-306: wrong number or types of arguments in call to 'OGC_DISTANCE'\n</code></pre>\n\n<p>What is the reason and where i am wrong ?</p>\n\n<p>Any help will be greatly appreciated</p>\n"},{"tags":["java","sql","oracle","list","ibatis"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12784116,"title":"Issue with fetching list of data using ibatis","body":"<p>I am haivng a issue in mapping in ibatis.The list returned has a size of 3 but data its showing has null evnthough the database has data in it.</p>\n\n<pre><code>List&lt;RecordData&gt; recordDataList = recordMapper.getQuestionDataParams(\n                personId, surveyId, questionIds);\n        System.out.println(\"rcord size\" + recordDataList.size());\n        System.out.println(\"rcord size\" + recordDataList);\n</code></pre>\n\n<p>Here the size is three but data is null.</p>\n\n<pre><code>&lt;mapper namespace=\"com.workers.surveytoexcel.dao.IRecordMapper\"&gt;    \n\n        &lt;resultMap id=\"surveyMap\" type=\"com.workers.surveytoexcel.dom.RecordData\" &gt;\n               &lt;result property=\"QUES_ID\" column=\"quesId\" /&gt;\n        &lt;/resultMap&gt;\n\n\n    &lt;select id=\"getQuestionDataParams\" parameterType=\"map\" resultMap=\"surveyMap\"&gt;\n          select ques_id from t_survey_other_ans where doc_id=3294628 and ques_id=3743245       \n    &lt;/select&gt;\n\n\npublic class RecordData {\n    private long quesId;\n/**\n     * @return the quesId\n     */\n    public long getQuesId() {\n        return quesId;\n    }\n\n    /**\n     * @param quesId\n     *            the quesId to set\n     */\n    public void setQuesId(long quesId) {\n        this.quesId = quesId;\n    }\n}\n</code></pre>\n\n<p>What is wrong here ?</p>\n"},{"tags":["oracle","predicate","union-all"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12784132,"title":"How to force push predicate through UNION ALL inside a view?","body":"<p>I have a performance problem on a UNION ALL view. The problem can be solved by rewriting the view in two separate views but that kind of defeats the purpose of creating a view.</p>\n\n<p>Here is a simple test case (Oracle 11.2.0.3.0). The real queries use about 10 different tables instead of just 3.</p>\n\n<pre><code>CREATE TABLE t0 (id number, ref_id number);\nCREATE INDEX i0 on t0(id);\nCREATE TABLE t1 (id number, amount number);\nCREATE INDEX i1 on t1(id);\nCREATE TABLE t2 (id number, amount number);\nCREATE INDEX i2 on t2(id);\n\n\ninsert into t0 select rownum, rownum * 10 from dual connect by rownum &lt;= 100000;\ninsert into t1 select rownum, rownum * 10 from dual connect by rownum &lt;= 100000;\ninsert into t2 select rownum, rownum * 10 from dual connect by rownum &lt;= 100000;\n\n\n\nCREATE OR REPLACE VIEW v2\nAS\nSELECT id, sum(amount) AS total_amount\nFROM t1\nGROUP BY id;\n\nCREATE OR REPLACE VIEW v3\nAS\nSELECT id\n      ,sum(amount) as total_amount\nFROM (SELECT id, amount\n      FROM t1\n      UNION ALL\n      SELECT id, amount\n      FROM t2)\nGROUP BY id\nHAVING sum(amount) &lt;&gt; 0\n;\n\nCREATE OR REPLACE view v1\nAS\nSELECT *\nFROM v2\nUNION ALL\nSELECT *\nFROM v3;\n</code></pre>\n\n<p>The following query uses 766 gets. Adding push_pred(a) does nothing for it.</p>\n\n<pre><code>select --+ first_rows\n*\nfrom t0, v1 a\nwhere t0.ref_id = a.id\n  and t0.id = 1;\n</code></pre>\n\n<p>Next query bottoms out at 16 gets although it does the same thing as the first one, only scans t0 two times instead of one.</p>\n\n<pre><code>select --+ first_rows\n*\nfrom t0, v2\nwhere  t0.ref_id = v2.id\n  and t0.id = 1\nunion all\nselect *\nfrom t0, v3\nwhere  t0.ref_id = v3.id\n  and t0.id = 1;\n</code></pre>\n\n<p>What am I missing? </p>\n"},{"tags":["oracle","excel-vba","oracle10g"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":11513,"score":2,"question_id":3306116,"title":"ORA-01019 connecting to Oracle from Excel","body":"<p>I have installed Oracle 10g Express Edition. When try to test the connection I am getting the error \"Error while trying to retrieve text for error ORA-01019\".</p>\n\n<p>Below is my code.</p>\n\n<pre><code>  strConnection = \"Driver={Microsoft ODBC for \n  Oracle};Server=Servername;Uid=username;Pwd=password;\"    \n  Set conn = CreateObject(\"ADODB.Connection\")\n  conn.Open strConnection\n\n  conn.Close\n  Set conn = Nothing\n</code></pre>\n\n<p>Thanks in advance</p>\n"},{"tags":["sql","oracle","oracle10g","oracleforms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12783901,"title":"non-english Characters are not shown in my excel report","body":"<p>I have <code>'http:// || :server || :domain || :app_server_port || '/' ||   :app_dad || '/reports.rep?sqlString=' || myQuery</code></p>\n\n<p>The reports shows everything if all the information is in English, but when information in other languages, the data is not shown. I mean the related field is empty. and if all the records contain non-english characters, no records are shown!!!!</p>\n\n<p>Does anybody have any idea?</p>\n\n<p>Thanks </p>\n"},{"tags":["java","database","oracle","stored-procedures"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12749814,"title":"Oracle Remote Scheduler Agent Database Setup (PL-00302)","body":"<p>So I'm trying to go through the tutorial <a href=\"http://docs.oracle.com/cd/E11882_01/server.112/e17120/schedadmin001.htm#BAJDFHBE\" rel=\"nofollow\">here</a> for setting up the oracle database to use the Remote Scheduler Agent on my local machine. I have been getting through most of the steps with minimal pain, but then I ran into an errors (see below) when I run the following command: @?\\RDBMS\\ADMIN\\prvtrsch.plb<img src=\"http://i.stack.imgur.com/Q6PeW.png\" alt=\"errors\"> \nI have looked online at the error codes, but they weren't very helpful. I am not very experience in Oracle databases, and really only want to run this once, then be done with it. Does anyone know what I am doing wrong here?</p>\n\n<p>Also, if I try the next command step of setting the registration password, I get the following error: \n<img src=\"http://i.stack.imgur.com/mmzlt.png\" alt=\"password error\"></p>\n"},{"tags":["oracle","oracle10g","oraclereports"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":64,"score":3,"question_id":12565634,"title":"Migration 6i to 10g Oracle reports","body":"<p>I have problems with reports when migrating from 6i to 10g. Everything works fine except when a report is opened from another report. I am getting an error-</p>\n\n<blockquote>\n  <p>REP-56107: Invalid environment id myenv for Job Type report in the command line</p>\n</blockquote>\n\n<p>I only get this error when I try to open a report from another report. My Oracle version is Oracle 10.2.0.4.</p>\n"},{"tags":["oracle","stored-procedures"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12780864,"title":"Assigning output parameter from Stored Procedure in oracle","body":"<p>Please help me with the following scenario</p>\n\n<p>I need to call a Stored Procedure inside another one. the inner SP would return a number value which I need to store it in a local variable.</p>\n\n<p>rough code</p>\n\n<pre><code>AssignSpResult NUMBER;\n</code></pre>\n\n<p>AssignSpResult = SPtobecalled(Param1,Param2, OutParam);</p>\n\n<p>This syntax is most probably wrong, so please help correct it</p>\n"},{"tags":["oracle","osx","sqlplus"],"answer_count":6,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":19824,"score":1,"question_id":761418,"title":"How come sqlplus not connecting?","body":"<p>My goal is to connect to an Oracle 9i instance from my OS X machine. I've followed the setup instructions <a href=\"http://blog.rayapps.com/2008/04/24/how-to-setup-ruby-and-new-oracle-instant-client-on-leopard/\" rel=\"nofollow\">here</a> and got through them with no errors (eventually). However, I'm finding that sqlplus is unable to connect:</p>\n\n<pre><code>[ ethan@gir ~ ]$ sqlplus xxx/yyy@zzz\n\nSQL*Plus: Release 10.2.0.4.0 - Production on Fri Apr 17 10:13:08 2009\n\nCopyright (c) 1982, 2007, Oracle.  All Rights Reserved.\n</code></pre>\n\n<p>Looooong wait...</p>\n\n<pre><code>ERROR:\nORA-12170: TNS:Connect timeout occurred\n\nEnter user-name: xxx\nEnter password: \nERROR:\nORA-12162: TNS:net service name is incorrectly specified\n\nEnter user-name:\n</code></pre>\n\n<p>My <code>tnsnames.ora</code> file...</p>\n\n<pre><code>zzz =\n  (DESCRIPTION = \n    (ADDRESS_LIST =\n      (ADDRESS =\n        (PROTOCOL = TCP)\n        (HOST = dbhost)\n        (PORT = 1521))\n    )\n  (CONNECT_DATA =\n    (SERVICE_NAME = zzz)\n  )\n)\n</code></pre>\n\n<p>Maybe there's an env variable that needs to be set?</p>\n\n<p><hr /></p>\n\n<p>UPDATE</p>\n\n<p>Able to ping DB host machine no problem.</p>\n\n<p>Tried...</p>\n\n<pre><code>sqlplus xxx/yyy@//dbhost/zzz\n</code></pre>\n\n<p>Got...</p>\n\n<pre><code>ERROR:\nORA-12170: TNS:Connect timeout occurred\n</code></pre>\n\n<p>Tried using <code>SID</code> instead of <code>SERVICE_NAME</code> in tnsnames.ora. Did not seem to change the result. Reverted back to <code>SERVICE_NAME</code>.</p>\n\n<p><hr /></p>\n\n<p>Last couple entries in sqlnet.log...</p>\n\n<pre><code>***********************************************************************\nFatal NI connect error 12170.\n\n  VERSION INFORMATION:\n    TNS for MacOS X Server: Version 10.2.0.4.0 - Production\n    TCP/IP NT Protocol Adapter for MacOS X Server: Version 10.2.0.4.0 - Production\n  Time: 17-APR-2009 10:33:06\n  Tracing not turned on.\n  Tns error struct:\n    ns main err code: 12535\n    TNS-12535: Message 12535 not found; No message file for product=network, facility=TNS\n    ns secondary err code: 12560\n    nt main err code: 505\n    TNS-00505: Message 505 not found; No message file for product=network, facility=TNS\n    nt secondary err code: 60\n    nt OS err code: 0\n\n\n***********************************************************************\nFatal NI connect error 12170.\n\n  VERSION INFORMATION:\n    TNS for MacOS X Server: Version 10.2.0.4.0 - Production\n    TCP/IP NT Protocol Adapter for MacOS X Server: Version 10.2.0.4.0 - Production\n  Time: 17-APR-2009 11:24:08\n  Tracing not turned on.\n  Tns error struct:\n    ns main err code: 12535\n    TNS-12535: Message 12535 not found; No message file for product=network, facility=TNS\n    ns secondary err code: 12560\n    nt main err code: 505\n    TNS-00505: Message 505 not found; No message file for product=network, facility=TNS\n    nt secondary err code: 60\n    nt OS err code: 0\n</code></pre>\n\n<p><hr /></p>\n\n<p>PARTIAL ANSWER</p>\n\n<p>Thanks everyone for your answers. They were helpful. I found that there was a DNS issue. I was able to ping by hostname, so thought that should work fine. I also tried I.P. address. Turned out that I needed the <strong>internal</strong> \"10.1.x.x\" I.P. address for it to work on this OS X machine (but hostname is fine on Windows).</p>\n\n<p>At this point, I can connect with...</p>\n\n<pre><code>sqlplus xxx/yyy@//INTERNAL_IP/zzz\n</code></pre>\n\n<p>However, with those values entered into tnsnames.ora, this still doesn't work...</p>\n\n<pre><code>sqlplus xxx/yyy@zzz\n</code></pre>\n\n<p>...</p>\n\n<pre><code>ORA-12154: TNS:could not resolve the connect identifier specified\n</code></pre>\n\n<p><hr /></p>\n\n<p>I searched for a sample tnsnames.ora file that was close to what I needed and copied the contents into my file. Changed the params and now everything works. Not sure why mine wasn't working.</p>\n"},{"tags":["sql","oracle","partitioning","database-partitioning"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12776215,"title":"What is the value of maxvalue in partition","body":"<p>How can I know the exact value of maxvalue in high_value in partition?</p>\n\n<pre><code>PARTITION \"PARTMAXVALUE\" VALUES LESS THAN (MAXVALUE) \n</code></pre>\n\n<p>Also if the table has already a partition created where high value is set to maxvalue, will I still able to create other partitions?</p>\n\n<p>Thank you.</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12782053,"title":"Oracle Case statement Error","body":"<p>I'm using the below SQL staement and when trying to execute, it is giving error</p>\n\n<pre><code>0ra:00907 Missing right paranthesis\n</code></pre>\n\n<p>error. Below is my query.</p>\n\n<pre><code>SELECT DISTINCT b.PROT_NBR, mc.ISO_3_CHAR_CNTRY_CD, c.SITE_NUM, Min(d.X_ATTRIB_118)\n   , CASE \n      WHEN d.X_ATTRIB_130 IS NULL\n         THEN Min(d.ATTRIB_31)\n      ELSE CASE \n            WHEN (\n                  d.X_ATTRIB_130 IS NOT NULL\n                  AND d.ATTRIB_31 IS NOT NULL\n                  )\n               THEN CASE \n                     WHEN To_Char(d.X_ATTRIB_130, ’mm / dd / yy’) &gt; To_Char(d.ATTRIB_31, ’mm / dd / yy’)\n                        THEN Max(d.X_ATTRIB_130)\n                     ELSE Max(d.ATTRIB_31)\n                     END\n            ELSE NULLS\n            END\n      END Approval_Date\nFROM CTMS_S_DS_PTCL_CNTRY a\n   , CLINICAL_STUDY b\n   , MDM_COUNTRY_MASTER mc\n   , CTMS_S_DS_PTCL_SITE c\n   , CTMS_S_DS_PTCL_REGLTRY d\nWHERE a.DELETED_FLG = 'N'\n   AND a.PTCL_STAT_CD IN ('Enrolling', 'Closed To Enrollment', 'Closed Follow Up'\n      , 'In Analysis', 'Discontinued', 'Completed', 'In Development'\n      , 'Open To Enrollment', 'Planning'\n      )\n   AND b.ods_src_sys_id = 13\n   AND b.DEL_FLG = 0\n   AND c.DELETED_FLG = 'N'\n   AND c.SITE_NUM IS NOT NULL\n   AND c.Status_CD IN (\n      'Enrollment Open'\n      , 'Intrested'\n      , 'Regulatory Green Light'\n      , 'Essential Documents in place'\n      , 'Approved for SSV'\n      , 'Intrested'\n      , 'Contacted'\n      , 'Pre Selected'\n      , 'Contacted'\n      , 'Selected'\n      , 'Ready For Initiation'\n      , 'Enrollment Closed'\n      , 'Initiated'\n      , 'Enrollment On-Hold'\n      , 'Targeted'\n      , 'Closed'\n      )\n   AND d.X_QNT_SUB_REQ IN (\"'Ethics Central/IRB Submission'\")\n   AND d.DELETED_FLG = 'N'\n   AND b.PROJ_ID = a.PAR_PTCL_ID\n   AND mc.CNTRY_NM = a.REGION_CD\n   AND a.SBL_ROW_ID = C.PTCL_RGN_ID\n   AND c.SBL_ROW_ID = d.CL_PTCL_ST_ID\nGROUP BY b.PROT_NBR\n   , mc.ISO_3_CHAR_CNTRY_CD\n   , c.SITE_NUM\n   , d.X_ATTRIB_130\n   , d.ATTRIB_31;\n</code></pre>\n\n<p>Please let me know what is the issue.</p>\n"},{"tags":["database","oracle","oracle11g"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12780823,"title":"Oracle 11g: Part Copy of Production data to Development Environment","body":"<p>I have a Production database with the current size involving two principale schemas:</p>\n\n<pre>\nSQL&gt; SELECT SUM(bytes)/1024/1024/1025 \"Size in GB\" FROM dba_segments where owner in ('SCHEMA1','SCHEMA2');\n\nSize in GB\n----------\n201.927804\n</pre>\n\n<p>Out of these the mentioned tables and their indexes are taking up following space (175.326 GB):</p>\n\n<pre>\nSQL&gt; SELECT SUM(bytes)/1024/1024/1024 \"Size in GB\" FROM dba_segments where owner IN ('SCHEMA1','SCHEMA2')\n  2  and segment_name in  ('TAB1','TAB2','TAB3','TAB4','TAB5','TAB6','TAB7','TAB8','TAB9','TAB10','TAB11','TAB12');\n\nSize in GB\n----------\n72.0917968\n\nSQL&gt; SELECT SUM(bytes)/1024/1024/1024 \"Size in GB\" FROM dba_segments where owner IN ('SCHEMA1','SCHEMA2')\n  2  and segment_name in  (\n  3  select index_name\n  4  from dba_indexes\n  5  where owner IN ('SCHEMA1','SCHEMA2')\n  6  and table_name in ('TAB1','TAB2','TAB3','TAB4','TAB5','TAB6','TAB7','TAB8','TAB9','TAB10','TAB11','TAB12'));\n\nSize in GB\n----------\n103.234375\n\nSQL&gt; select (72.0917968+103.234375) from dual;\n\n(72.0917968+103.234375)\n-----------------------\n            175.3261718\n\n</pre>\n\n<p>Thus these 12 tables along with the indexes takes about 88% of the total space in the 2 schemas.</p>\n\n<p>All 12 tables mentioned are subpartitioned based on a partition and subpartition key.</p>\n\n<p>We have 7 development databases which needs to be refreshed on demand with the production database.</p>\n\n<p>Currently, the refresh is done using RMAN, but going forward as the production database size increases we are anticipating space problems on development databases.</p>\n\n<p>The Solution which I tried:</p>\n\n<p>The 12 tables are partitioned in such a way that the data in one partition is functionally independent of other partition.</p>\n\n<p>I created new tablespaces and moved partitions to these new tablespaces based on their business functionality. \nThus a single table had some partitions on one tablespace and rest of the partitions on the other tablespace.</p>\n\n<p>The idea was to transport the necessary tablespces (and not the entire database) across production to development database.</p>\n\n<p>Later on my DBA told me that for a tablespace to be transportable across databases they should be \"self-contained\".</p>\n\n<p>And one of the violations for self contained tablespace according to oracle documentation is:</p>\n\n<p>\"A partitioned table is partially contained in the set of tablespaces.\nThe tablespace set you want to copy must contain either all partitions of a partitioned table, or none of the partitions of a partitioned table. If you want to transport a subset of a partition table, you must exchange the partitions into tables.\"</p>\n\n<p>Thus my design failed.</p>\n\n<p>Kindly note that the 12 big tables which I mentioned above contains data which is actually not needed for my unit testing on development database.\nIs it possible to perform RMAN copy without including the data from these 12 tables?</p>\n\n<p>Or could you think of any other solution so that I can do \"part\" refresh of production database to developement.</p>\n\n<p>Let me know if you need any more information? </p>\n\n<p>Database: Oracle 11g - 11.2.0.2.0</p>\n\n<p>Thanks a lot in advance!!</p>\n"},{"tags":["oracle","gps","geo"],"answer_count":8,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":3894,"score":2,"question_id":1591323,"title":"How to calculate distances between coordinates EFFICIENTLY in Oracle","body":"<p>I  have a large  Oracle database ( 720,000 records aprox) where each record has its own geographic coordinates (lat &amp; lng) and i need to select just the records that are in a specific distance from a point ( inside a specific radius).</p>\n\n<p>Currently i've implemented a distance function (based on haversine) that i've found in an oracle forum but because the database is a bit big it spends about 50 seconds per select.</p>\n\n<p>Any recomendations on how to do thi efficiently?. I know there is an extension called oracle spatial &amp; locator but i don´t know if i can buy it or even how does it work. Thanks a lot in advance. Best regards</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":62,"score":-1,"question_id":12781102,"title":"Oracle SQL Date difference from end of month","body":"<pre><code>select pdat\n      ,ac_no\n      , bal\n from dummy_table;\n\nPDATE     | AC_NO | BAL  \n========================    \n14/02/2012| abcd  | 1200    \n15/02/2012| abcd  | 1300\n27/02/2012| abcd  | 1300\n</code></pre>\n\n<p>My question is how can I make the <code>result set to fetch</code></p>\n\n<pre><code>PDATE     | AC_NO | BAL  | Difference\n=====================================\n14/02/2012| abcd  | 1200 |    8\n22/02/2012| abcd  | 1300 |    7\n</code></pre>\n\n<p>Difference of row one is calculated on the basis of <code>22/02/2012-14/02/2012</code>.\n     But how can I calculate the difference of last date from the month's ending date? in   this case <code>29th Feb 2012</code></p>\n"},{"tags":["oracle","plsql","oracle9i"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12779160,"title":"Time taken for deleting and truncating records in oracle","body":"<p>How much time will it take to delete and truncate 43GB of data in oracle</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12779418,"title":"Oracle SQL help regarding fetching a distinct balance","body":"<p>select pdat,ac_no, bal from dummy_table;</p>\n\n<pre><code>PDATE     | AC_NO | BAL\n14/02/2012| abcd  | 1200\n15/02/2012| abcd  | 1300\n29/02/2012| abcd  | 1300\n</code></pre>\n\n<p>My question is how can I make the result set to fetch</p>\n\n<pre><code>PDATE     | AC_NO | BAL\n14/02/2012| abcd  | 1200\n29/02/2012| abcd  | 1300\n</code></pre>\n\n<p>that is maximum date of the same balance?</p>\n\n<p>I have tried using MAX and Distinct in my ORACLE query, but they don't work.</p>\n"},{"tags":["oracle","oracle11g","listener","tnsnames","ora-12514"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":17874,"score":2,"question_id":2285527,"title":"ORA-12154: TNS:could not resolve the connect identifier specified","body":"<p>I am trying to connect to oracle 11g installed on Linux EL 5 and and getting the following error</p>\n\n<pre><code>SQL&gt; connect sys/password@ud06 as sysdba\nERROR:\nORA-12514: TNS:listener does not currently know of service requested in connect\ndescriptor\n</code></pre>\n\n<p>my listener.ora under network/admin is as follows</p>\n\n<pre><code>LISTENER=\n  (DESCRIPTION=\n    (ADDRESS_LIST=\n      (ADDRESS=(PROTOCOL=tcp)(HOST=ud06)(PORT=1521))\n      (ADDRESS=(PROTOCOL=ipc)(KEY=extproc))))\n\nSID_LIST_LISTENER=\n  (SID_LIST=\n    (SID_DESC=\n      (GLOBAL_DBNAME=orcl)\n      (ORACLE_HOME=/home/oracle/app/oracle/product/11g)\n      (SID_NAME=orcl))\n    (SID_DESC=\n      (SID_NAME=plsextproc)\n      (ORACLE_HOME=/home/oracle/app/oracle/product/11g)\n      (PROGRAM=extproc)))\n</code></pre>\n\n<p>MY tnsnames.ora is as follows</p>\n\n<pre><code>ORCL =\n  (DESCRIPTION =\n    (ADDRESS = (PROTOCOL = TCP)(HOST = localhost.localdomain)(PORT = 1521))\n    (CONNECT_DATA =\n      (SERVER = DEDICATED)\n      (SERVICE_NAME = orcl)\n    )\n  )\n\nEXTPROC_CONNECTION_DATA =\n  (DESCRIPTION =\n    (ADDRESS_LIST =\n      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))\n    )\n    (CONNECT_DATA =\n      (SID = PLSExtProc)\n      (PRESENTATION = RO)\n    )\n  )\n\nUD06=\n  (DESCRIPTION =\n    (ADDRESS_LIST =\n      (ADDRESS = (PROTOCOL = TCP)(HOST = ud06)(PORT = 1521))\n    )\n    (CONNECT_DATA =\n      (SERVICE_NAME = orcl)\n    )\n  )\n</code></pre>\n\n<p>MY lsnrctl status shows as follows:</p>\n\n<pre><code>LSNRCTL&gt; status\nConnecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=ud06.us.server.com)(PORT=1521)))\nSTATUS of the LISTENER\n------------------------\nAlias                     LISTENER\nVersion                   TNSLSNR for Linux: Version 11.2.0.1.0 - Production\nStart Date                17-FEB-2010 16:23:06\nUptime                    0 days 0 hr. 12 min. 33 sec\nTrace Level               off\nSecurity                  ON: Local OS Authentication\nSNMP                      OFF\nListener Parameter File   /home/oracle/app/oracle/product/11g/network/admin/listener.ora\nListener Log File         /home/oracle/app/oracle/product/11g/log/diag/tnslsnr/ud06/listener/alert/log.xml\nListening Endpoints Summary...\n  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=ud06.us.server.com)(PORT=1521)))\n  (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=extproc)))\nServices Summary...\nService \"orcl\" has 1 instance(s).\n  Instance \"orcl\", status UNKNOWN, has 1 handler(s) for this service...\nService \"plsextproc\" has 1 instance(s).\n  Instance \"plsextproc\", status UNKNOWN, has 1 handler(s) for this service...\nThe command completed successfully\n</code></pre>\n"},{"tags":["oracle","database-performance"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12758623,"title":"Oracle DB performance","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/761204/what-resources-exist-for-database-performance-tuning\">What resources exist for Database performance-tuning?</a>  </p>\n</blockquote>\n\n\n\n<p>Can someone please suggest diagnostics steps for what caused oracle slow performance?</p>\n\n<p>My application uses Oracle DB and it is cool most of the time, I sometime receive emails saying that application is extremely slow but by the time I login and check everything would be good. </p>\n\n<p>I am wondering is there a way to check history (say some log file ) behind this performance issues.  </p>\n\n<p>If something is happening currently then I am aware to check locks (V$locks) etc.. But If I have to check what happened yesterday between 2 to 3:00PM while troubleshooting performance what should I look at?</p>\n"},{"tags":["oracle","plsql","oracle11g","plsqldeveloper"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12780231,"title":"DELETE existing data before insert","body":"<p>I'd like to delete the existing data before insert based on ids. So if there are ids in incoming file then existing ids should be deleted, and then data should be entered. Something like this:</p>\n\n<p>DATABASE TABLE BEFORE:</p>\n\n<pre><code>--------------------------------\n| ID  |  DATA                  |\n--------------------------------\n| 1   |  This is data for ID 1 |\n| 2   |  This is data for ID 2 |\n| 3   |  This is data for ID 3 |\n--------------------------------\n</code></pre>\n\n<p>INCOMING FILE:</p>\n\n<pre><code>-----------------------------------------\n| ID  |  DATA                           |\n-----------------------------------------\n| 1   |  This is new data for ID 1      |\n| 2   |  This is new data for ID 2      |\n| 4   |  This is new data for ID 4      |\n| 1   |  This is also new data for ID 1 |\n-----------------------------------------\n</code></pre>\n\n<p>DATABASE TABLE AFTER:</p>\n\n<pre><code>-----------------------------------------\n| ID  |  DATA                           |\n-----------------------------------------\n| 1   |  This is new data for ID 1      |\n| 2   |  This is new data for ID 2      |\n| 4   |  This is new data for ID 4      |\n| 1   |  This is also new data for ID 1 |\n| 3   |  This is data for ID 3          |\n-----------------------------------------\n</code></pre>\n\n<p>This is my procedure.</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE absence_records_in AS\n   l_v_file      UTL_FILE.file_type;\n   l_filename    VARCHAR2(128);\n   l_buffer      VARCHAR2(4096);\n   l_start       BINARY_INTEGER := 1;\n   l_pos         BINARY_INTEGER;\n   TYPE typ_cols IS TABLE OF VARCHAR2(4096) INDEX BY BINARY_INTEGER;\n   tbl_cols      typ_cols;\n   l_col_no      BINARY_INTEGER;\n   l_count       BINARY_INTEGER := 0;\nBEGIN\n   l_filename := 'records.csv';\n   l_v_file := UTL_FILE.fopen('DIR_FENIX_IN', l_filename, 'R');\n   UTL_FILE.get_line(l_v_file, l_buffer);\n   LOOP\n       BEGIN\n           UTL_FILE.get_line(l_v_file, l_buffer);\n           IF l_buffer IS NULL THEN\n               EXIT;\n           END IF;\n           l_col_no := 1;\n           l_start  := 1;\n           WHILE INSTR(l_buffer, ';', 1, l_col_no) !=0 \n           LOOP\n               l_pos := INSTR(l_buffer, ';', 1, l_col_no);\n               tbl_cols(l_col_no) := SUBSTR( l_buffer, l_start, l_pos - l_start);\n               l_start  := l_pos + 1;\n               l_col_no := l_col_no + 1;\n           END LOOP;\n           l_start := l_pos + 1;\n           tbl_cols(l_col_no) := SUBSTR( l_buffer, l_start);\n\n           DELETE FROM absence_records WHERE id = tbl_cols(1)\n           LOG ERRORS INTO in_errors('File: '||l_filename||' =&gt; delete operation')  REJECT LIMIT UNLIMITED;\n\n           l_count := l_count + 1;\n               EXCEPTION WHEN NO_DATA_FOUND THEN\n           EXIT;\n       END;\n       BEGIN\n           UTL_FILE.get_line(l_v_file, l_buffer);\n           IF l_buffer IS NULL THEN\n               EXIT;\n           END IF;\n           l_col_no := 1;\n           l_start  := 1;\n           WHILE INSTR(l_buffer, ';', 1, l_col_no) !=0 \n           LOOP\n               l_pos := INSTR(l_buffer, ';', 1, l_col_no);\n               tbl_cols(l_col_no) := SUBSTR( l_buffer, l_start, l_pos - l_start);\n               l_start  := l_pos + 1;\n               l_col_no := l_col_no + 1;\n           END LOOP;\n           l_start := l_pos + 1;\n           tbl_cols(l_col_no) := SUBSTR( l_buffer, l_start);\n\n           INSERT INTO absence_records (id, data)\n           VALUES (tbl_cols(1), tbl_cols(2))\n           LOG ERRORS INTO in_errors('File: '||l_filename|| ' =&gt; insert operation')  REJECT LIMIT UNLIMITED;\n\n           l_count := l_count + 1;\n               EXCEPTION WHEN NO_DATA_FOUND THEN\n           EXIT;\n       END;\n   END LOOP;\n   UTL_FILE.fclose(l_v_file);        \nEND absence_records_in;\n</code></pre>\n\n<p>So in short, I need to start one loop that will delete only data which is in comparison, and then another loop that will insert the data.\nAny ideas? Thanks in advance :-)</p>\n"},{"tags":["php","oracle","oci8"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12780061,"title":"Oracle module for PHP in Linux","body":"<p>Is there any method for direct access to remotely hosted Oracle Database without installing oracle in my computer.</p>\n\n<p>I already had the host name, database name, username and password of the remotely hosted Oracle database. I am using Red Hat Enterprise Linux Server release 5 (Tikanga) and no Oracle yet install.</p>\n\n<p>Your help would be precious.\nThank you in advance</p>\n"},{"tags":["sql","oracle","nested","connect","ora-00904"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":505,"score":0,"question_id":9878448,"title":"Access parent alias in subquery within a with clause using connect by in Oracle","body":"<p>I'm trying to recursively get some data using connect by, which for each row I need to know if in a different tree contains a specific item.</p>\n\n<p>So I have this [stripped down] query:</p>\n\n<pre><code>select m.id, m.name,\n   (select (\n    with recursiveMetaClass as (\n            select mb.name\n            from meta mb\n            start with mb.id = m.id\n            connect by prior mb.metaclass = mb.id and mb.metaclass &lt;&gt; mb.id\n    ) select name from recursiveMetaClass where name in ('config_group', 'config_item')\n   ) from dual) as basetype\nfrom meta m\ninner join meta_rel mr on mr.rel2 = m.id\nstart with m.name = 'store_sys'\nconnect by prior m.id = mr.rel1\norder siblings by item_order;\n</code></pre>\n\n<p>This errors though with ORA-00904 \"M\".\"ID\": invalid identifier on m.id in start with in my nested query.  If I replace with query with:</p>\n\n<pre><code>select m.id, m.name,\n   (select (\n    with recursiveMetaClass as (\n            select mb.name\n            from meta mb\n            start with mb.id = 1004\n            connect by prior mb.metaclass = mb.id and mb.metaclass &lt;&gt; mb.id\n    ) select name from recursiveMetaClass where name in ('config_group', 'config_item')\n   ) from dual) as basetype\nfrom meta m\ninner join meta_rel mr on mr.rel2 = m.id\nstart with m.name = 'store_sys'\nconnect by prior m.id = mr.rel1\norder siblings by item_order;\n</code></pre>\n\n<p>It works (just gives wrong results).</p>\n\n<p>How can I either get m.id into that start with, or refactor this to work?  I also tried using some nested selects and doing a where on rownumber = 1 order by level desc, however I get the exact same error when trying to reference m.id.</p>\n\n<p>Thank you!</p>\n"},{"tags":["oracle","plsql","group-by","having"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":125,"score":0,"question_id":12749906,"title":"Oracle select multiple rows filter by uniqeness of one row","body":"<p>Hi I have a query in Oracle and im not sure if i can do what im looking to do.</p>\n\n<p>I have a query something like below</p>\n\n<pre><code>select tableA.Value, tableB.Value, tableC.Value, tableD.Value\n\nfrom tableA\n\njoin tableB\non ######\n\njoin tableC\non #####\n\njoin tableD \non #####\n</code></pre>\n\n<p>I need to limit this result set to only records that have a unique tableA.Value </p>\n\n<p>Can I do a multiple row select and join on multiple tables then some how add something like </p>\n\n<p>GROUP BY tableA.Value</p>\n\n<p>HAVING Count(tableA.Value) = 1)</p>\n\n<p>to the end to limit the rows selected to those with a unique value in one of those rows</p>\n\n#########################EDIT\n\n<p>Some data to maybe explain better</p>\n\n<p>1234 ABC TEST</p>\n\n<p>2345 BCD TEST</p>\n\n<p>2345 GGG TEST</p>\n\n<p>3456 CDE TEST</p>\n\n<p>4567 DEF TEST</p>\n\n<p>4567 FFF TEST</p>\n\n<p>5678 EFG TEST</p>\n\n<p>desired result set;</p>\n\n<p>1234 ABC TEST</p>\n\n<p>3456 CDE TEST</p>\n\n<p>5678 EFG TEST</p>\n\n<p>I want to limit records to ones that have a unique column 1</p>\n"},{"tags":["sql","oracle","spatial"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":798,"score":1,"question_id":3259226,"title":"Problem with Oracle (Spatial Geometry) query","body":"<p>I'm trying to form a query that returns a list of entities within a given rectangle, using SDO_WITHIN_DISTANCE. The query I've made seems like it should work, but Oracle is giving me some strange errors. Here's the query:</p>\n\n<pre><code>SELECT * \nFROM TBLENTITYLOCATION TL\n      INNER JOIN TBLENTITY TE \n      ON TE.ENTITYID=TL.ENTITYID  \nWHERE SDO_WITHIN_DISTANCE (TL.GEOLOCATION\n                           , SDO_GEOMETRY (2003\n                                         , NULL\n                                         , NULL\n                                         , SDO_ELEM_INFO_ARRAY(1, 1003, 3)\n                                         , SDO_ORDINATE_ARRAY(41, -73, 36, -82)\n                              ), 'DISTANCE=10 UNIT=M'\n                          ) = 'TRUE' \nAND  TL.LOCATIONDATETIME= (select MAX(LOCATIONDATETIME) \n                           FROM TBLENTITYLOCATION \n                           WHERE  ENTITYID = TE.ENTITYID)\n</code></pre>\n\n<p><strong>The error is as follows:</strong></p>\n\n<pre><code>ORA-29902: error in executing ODCIIndexStart() routine\nORA-13208: internal error while evaluating [window SRID does not match layer SRID] operator\nORA-06512: at MDSYS.SDO_INDEX_METHOD_10I\", line 286\n</code></pre>\n\n<p>OERR says:</p>\n\n<pre><code>29902. 00000 -  \"error in executing ODCIIndexStart() routine\"\n*Cause:    The execution of ODCIIndexStart routine caused an error.\n*Action:   Examine the error messages produced by the indextype code and take appropriate action.\n</code></pre>\n\n<p>Thanks for any help or ideas.</p>\n"},{"tags":["oracle","plsql","xml-parsing","oracle-apex"],"answer_count":1,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":417,"score":0,"question_id":11782423,"title":"Easiest way to parse XML using pl/sql dom parser","body":"<p>I have no idea how to explain but I will try my best. I am using Oracle Apex and have XML in my table called \"CLOBTABLE\" with datatype Clob. I have tried XMLTYPE as a datatype but its not accepting any data in apex, so i am using CLOB Currently as a data type. now i want to use data which is in xml form i.e. </p>\n\n<pre><code>&lt;Row&gt;\n    &lt;cellArray&gt;\n        &lt;Cell&gt;\n            &lt;columnId&gt;1&lt;/columnId&gt;\n            &lt;valueArray&gt;\n                &lt;Value&gt;\n                    &lt;value&gt;IR000024575452&lt;/value&gt;\n                &lt;/Value&gt;\n            &lt;/valueArray&gt;\n        &lt;/Cell&gt;\n        &lt;Cell&gt;\n            &lt;columnId&gt;5&lt;/columnId&gt;\n            &lt;valueArray&gt;\n                &lt;Value&gt;\n                    &lt;value&gt;AZ12579856-001&lt;/value&gt;\n                &lt;/Value&gt;\n            &lt;/valueArray&gt;\n        &lt;/Cell&gt;\n        &lt;Cell&gt;\n            &lt;columnId&gt;2&lt;/columnId&gt;\n            &lt;valueArray&gt;\n                &lt;Value&gt;\n                    &lt;value&gt;IT06686&lt;/value&gt;\n                &lt;/Value&gt;\n            &lt;/valueArray&gt;\n        &lt;/Cell&gt;\n        &lt;Cell&gt;\n            &lt;columnId&gt;9&lt;/columnId&gt;\n            &lt;valueArray&gt;\n                &lt;Value&gt;\n                    &lt;value&gt;Hu Mics Metab K&lt;/value&gt;\n                &lt;/Value&gt;\n            &lt;/valueArray&gt;\n        &lt;/Cell&gt;\n        &lt;Cell&gt;\n            &lt;columnId&gt;8&lt;/columnId&gt;\n            &lt;valueArray&gt;\n                &lt;Value&gt;\n                    &lt;value&gt;2006-03-31&lt;/value&gt;\n                &lt;/Value&gt;\n            &lt;/valueArray&gt;\n        &lt;/Cell&gt;\n        &lt;Cell&gt;\n            &lt;columnId&gt;7&lt;/columnId&gt;\n            &lt;valueArray&gt;\n                &lt;Value&gt;\n                    &lt;value&gt;2006-07-27&lt;/value&gt;\n                &lt;/Value&gt;\n            &lt;/valueArray&gt;\n        &lt;/Cell&gt;\n    &lt;/cellArray&gt;\n&lt;/Row&gt;\n&lt;Row&gt;\n    &lt;cellArray&gt;\n        &lt;Cell&gt;\n            &lt;columnId&gt;1&lt;/columnId&gt;\n            &lt;valueArray&gt;\n                &lt;Value&gt;\n                    &lt;value&gt;IR000024575452&lt;/value&gt;\n                &lt;/Value&gt;\n            &lt;/valueArray&gt;\n        &lt;/Cell&gt;\n        &lt;Cell&gt;\n            &lt;columnId&gt;5&lt;/columnId&gt;\n            &lt;valueArray&gt;\n                &lt;Value&gt;\n                    &lt;value&gt;AZ12579856-001&lt;/value&gt;\n                &lt;/Value&gt;\n            &lt;/valueArray&gt;\n        &lt;/Cell&gt;\n        &lt;Cell&gt;\n            &lt;columnId&gt;2&lt;/columnId&gt;\n            &lt;valueArray&gt;\n                &lt;Value&gt;\n                    &lt;value&gt;IT06686&lt;/value&gt;\n                &lt;/Value&gt;\n            &lt;/valueArray&gt;\n        &lt;/Cell&gt;\n        &lt;Cell&gt;\n            &lt;columnId&gt;9&lt;/columnId&gt;\n            &lt;valueArray&gt;\n                &lt;Value&gt;\n                    &lt;value&gt;Hu Mics Metab K&lt;/value&gt;\n                &lt;/Value&gt;\n            &lt;/valueArray&gt;\n        &lt;/Cell&gt;\n        &lt;Cell&gt;\n            &lt;columnId&gt;8&lt;/columnId&gt;\n            &lt;valueArray&gt;\n                &lt;Value&gt;\n                    &lt;value&gt;2006-03-31&lt;/value&gt;\n                &lt;/Value&gt;\n            &lt;/valueArray&gt;\n        &lt;/Cell&gt;\n        &lt;Cell&gt;\n            &lt;columnId&gt;7&lt;/columnId&gt;\n            &lt;valueArray&gt;\n                &lt;Value&gt;\n                    &lt;value&gt;2006-07-27&lt;/value&gt;\n                &lt;/Value&gt;\n            &lt;/valueArray&gt;\n        &lt;/Cell&gt;\n    &lt;/cellArray&gt;\n&lt;/Row&gt;\n</code></pre>\n\n<p>and want to parse this data and insert it in another table called \"Hyp\". each  data corresponds to the column id of the database table and rest are the column values. i have tried Oracle XMLTYPE parser which is</p>\n\n<pre><code>DECLARE\n    indoc    VARCHAR2(2000);\n    indomdoc DBMS_XMLDOM.DOMDocument;\n    innode   DBMS_XMLDOM.DOMNode;\n    myparser DBMS_XMLPARSER.parser;\n    buf      VARCHAR2(2000);\nBEGIN\n    indoc := '&lt;emp&gt;&lt;name&gt;De Selby&lt;/name&gt;&lt;/emp&gt;';\n    myParser := DBMS_XMLPARSER.newParser;\n    DBMS_XMLPARSER.parseBuffer(myParser, indoc);\n    indomdoc := DBMS_XMLPARSER.getDocument(myParser);\n    innode := DBMS_XMLDOM.makeNode(indomdoc);\n    DBMS_XMLDOM.writeToBuffer(innode, buf);\n    DBMS_OUTPUT.put_line(buf);\n    DBMS_XMLDOM.freeDocument(indomdoc);\n    DBMS_XMLPARSER.freeParser(myParser);\nEND;\n</code></pre>\n\n<p>but now i want to instead of using static content i.e. De Selby give dynamic content i.e.  from that \"CLOBTABLE\" xml is given, data is parsed and inserted into \"Hyp\" table. I don't know how to do it. Any help will be greatly appreciated.</p>\n"},{"tags":["oracle","search","geo","oracle-spatial"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":722,"score":1,"question_id":9061770,"title":"Oracle spatial search within distance","body":"<p>I have the following table Cities:</p>\n\n<pre><code>ID(int),City(char),latitude(float),longitude(float).\n</code></pre>\n\n<p>Now based on a user`s longitude(ex:44.8) and latitude(ex:46.3) I want to search for all the cities near him within 100 miles/KM.</p>\n\n<p>I have found some examples but don`t know how to adapt them to my case</p>\n\n<pre><code>select *\nfrom GEO.Cities a\nwhere SDO_WITHIN_DISTANCE([I don`t know],\nMDSYS.SDO_GEOMETRY(2001, 8307, MDSYS.SDO_POINT_TYPE(44.8,46.3, NULL) ,NULL, NULL), \n'distance = 1000') = 'TRUE';\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n\n<p>P.S: If it is possible to have the distance and to be sorted</p>\n\n<p>P.P.S: I want to do it in this way due to performance issues, I have done this in this way <a href=\"http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL\" rel=\"nofollow\">http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL</a> but it takes too long...</p>\n"},{"tags":["oracle","weblogic","alfresco"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12778831,"title":"Alfresco Community on Weblogic 10.3.2.0","body":"<p>I would like to install Alfresco community edition on weblogic instead of the usual Tomcat. </p>\n\n<p>My setup is as follows:</p>\n\n<ul>\n<li><p>Operating System : RedHat Enterprise Linux 5.4 , 64 bit.</p></li>\n<li><p>Application Server : Weblogic 10.3.2.0.</p></li>\n<li><p>Database : Oracle DB 11.2.0.</p></li>\n</ul>\n\n<p>So far, everything goes on well from adding the application to installation. However, it changes state to 'failed' whenever I try to start it under 'deployments'.</p>\n\n<p>Has anyone ever installed the above successfully? Is it technically possible? </p>\n\n<p>Someone please take me through the correct steps!</p>\n"},{"tags":["oracle","mingw","undefined","occi","otl"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12778625,"title":"mingw occi pexports undefined createEnvironment","body":"<p>I get</p>\n\n<pre><code>undefined reference to `oracle::occi::Environment::createEnvironment\n</code></pre>\n\n<p>with pexports/dlltool converted files oci.a and oraocci11.a.\nDo you have any idea why?</p>\n\n<p>Now I'm testing otl, which works well with oci.a and oracle 11g.</p>\n"},{"tags":["c#","oracle","stored-procedures"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":12777431,"title":"Running Oracle Stored Procedure from C# Error","body":"<p>I am new to oracle. I created a stored procedure to fetch table data.</p>\n\n<pre><code>create or replace\nprocedure GETLATESTNEWS(cv_results in out sys_refcursor)\nas\nbegin\nopen cv_results for\nselect news from tbl_newsdetails;\nEXCEPTION\n WHEN OTHERS THEN\n  ROLLBACK;\n  RAISE_APPLICATION_ERROR(-99999,'Not Inserted due to :'||SQLERRM);  \nend;\n</code></pre>\n\n<p>The procedure got compiled successfully. But in my .net code I am getting error</p>\n\n<pre><code>ORA-06550: line 1, column 7:\nPLS-00306: wrong number or types of arguments in call to 'GETLATESTNEWS'\nORA-06550: line 1, column 7:\nPL/SQL: Statement ignored\n</code></pre>\n\n<p>My .net code is</p>\n\n<pre><code>        con.ConnectionString = constring;\n        con.Open();\n        OracleCommand cmd = new OracleCommand();\n        cmd.Connection = con;\n        cmd.CommandText = \"GETLATESTNEWS\";\n        cmd.CommandType = CommandType.StoredProcedure;\n        rdr = cmd.ExecuteReader();\n</code></pre>\n\n<p>What might be the issue?. I am able to insert with insert stored procedure. But select is not working. </p>\n"},{"tags":["oracle","erd"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":57,"score":-1,"question_id":12777115,"title":"Free oracle ERD tool","body":"<p>are any free ERD tools for oracle out there?\nEspecially, I need some which can guess relations based on colum names (so if in one table a colum is named CO_ID and in an other table too, this should marked as a relation)</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["database","oracle","external","vpn","cloudbees"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12595678,"title":"Cloudbees oracle external database through VPN","body":"<p>Currently we have tomcat 6 webapp and oracle database. Database is configured as follows in server.xml:</p>\n\n<pre><code>&lt;Resource\nname=\"jdbc/EbankWebConnection\"\nauth=\"Container\"\ntype=\"oracle.jdbc.pool.OracleDataSource\"\nfactory=\"oracle.jdbc.pool.OracleDataSourceFactory\"\nmaxActive=\"100\" maxIdle=\"30\" maxWait=\"10000\"\nuser=\"***\" password=\"***\" driverClassName=\"oracle.jdbc.OracleDriver\"\nurl=\"jdbc:oracle:thin:@192.168.12.2:1521:prg11g\"\nvalidationQuery=\"select 1 from dual\" /&gt;\n</code></pre>\n\n<p>Notice, we're using oracle connection pool.\nIs it possible to host tomcat webapp in to the CloudBees and connect to oracle db through VPN on our servers. Regarding connection pool, DBCP is not the case. We need somehow to config container managed oracle connection pool. </p>\n"},{"tags":["oracle","jdbc","plsql","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1111,"score":0,"question_id":11621638,"title":"how to call procedure with out parameter as table type from a java class","body":"<p>I want to call this procedure <code>get_data_Q1</code> in the package <code>ult_pkg</code> from <em>Java</em> code and display the out put,\ncan any one please help me.\nThanks in advance.</p>\n\n<pre><code>CREATE OR REPLACE PACKAGE  ult_pkg\nAS\nTYPE t_all_record is record (\n    x_object_type_id        number,\n    x_object_name           varchar2(100),\n    x_object_id             varchar2(70),\n    x_audit_timestamp       timestamp(6),\n    x_payload               clob\n);\n\n--table type to hold table data after querying\n\ntype tt_all_tab is table of t_all_record index by binary_integer;\n\n--declaration pocedures\nprocedure get_data_Q1(x_object_id in varchar2 , x_all_type out tt_all_tab );\n\n\nend ult_pkg;\n</code></pre>\n\n<p>/</p>\n\n<p>--body of 'ult_pkg'  package\ncreate or replace package body ult_pkg \nAS</p>\n\n<pre><code>--procedure taking 'object_id' as input parameter and gives out table of 't_all_record' type \nprocedure get_data_Q1(x_object_id in varchar2 , x_all_type out tt_all_tab )\nAS\n\n    i number:=0;\nbegin\n\n    for r in \n        ( \n            SELECT\n            O.object_type_id,O.object_name,O.object_id,A.audit_timestamp,P.payload\n            FROM\n            APPLICATION APP, EXCEPTIONS E,MASTER_AUDIT A,MODULE_TYPE M,OBJECT_TYPE O,PAYLOAD P \n            WHERE \n            ( A.MODULE_TYPE_ID = M.MODULE_TYPE_ID ) AND ( M.APPLICATION_ID = APP.APPLICATION_ID ) AND ( A.OBJECT_TYPE_ID = O.OBJECT_TYPE_ID ) AND ( O.OBJECT_ID = x_object_id )\n        )\n    -- loop to asign the data from cursor 'r' to carasponding table type columns\n        loop\n\n\n        x_all_type(i).x_object_type_id:=r.object_type_id;\n        x_all_type(i).x_object_name:=r.object_name;\n        x_all_type(i).x_object_id:=r.object_id;\n        x_all_type(i).x_audit_timestamp:=r.audit_timestamp;\n        x_all_type(i).x_payload:=r.payload;\n        i:=i+1;\n        end loop;\n\n    end get_data_Q1;\n</code></pre>\n\n<p>end ult_pkg;\n/</p>\n"},{"tags":["sql","oracle","triggers","oracle-apex"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":11321856,"title":"sql Trigger Need to set x from a value","body":"<p>I'm stuck on a the type of trigger needed to for this constraint.</p>\n\n<p>I will have a price and a commission. The price determines the commission amount, &lt; 100 - 4%, &lt; 200 - 5% etc.</p>\n\n<p>My idea.\nthe database contains a separate table that will hold 4 price values , 101, 201, 401, 601, with their own matching comission %, this will be called PC. When I create a property listing I want to calculate the commission they earn depending on the price entered.</p>\n\n<p>on insert, I need to check the new.price and compare it to the prices in PC. Once new.price is less than the price tuple, I set the price to that commission value</p>\n\n<pre><code>create or replace TRIGGER findCommission BEFORE INSERT OR UPDATE ON HASLISTING\nFOR each ROW\nBEGIN\nIF (:NEW.ASKING_PRICE &lt; 100001) THEN\n:NEW.COMMISSION = 6.0;\nEND IF;\nIF (:NEW.ASKING_PRICE &lt; 250001) THEN\n:NEW.COMMISSION = 5.5;\nEND IF;\nIF (:NEW.ASKING_PRICE &lt; 1000001) THEN\n:NEW.COMMISSION = 5.0;\nEND IF;\nIF (:NEW.ASKING_PRICE &gt; 1000000) THEN\n:NEW.COMMISSION = 4.0;\nEND IF;\nEND;\n</code></pre>\n"},{"tags":["oracle","ora-00907"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":99,"score":4,"question_id":12774439,"title":"ORA-00907: missing right parenthesis Error while creating a table?","body":"<p>I am new to oracle,\nI have created two tables using following queries,</p>\n\n<pre><code>CREATE TABLE employee\n(\n emp_name VARCHAR(20) NOT NULL,\n street VARCHAR(50) NOT NULL,\n city VARCHAR(20) NOT NULL,\n PRIMARY KEY(emp_name)\n)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>CREATE TABLE company\n(\n comp_name VARCHAR(20) NOT NULL,\n city VARCHAR(20) NOT NULL,\n PRIMARY KEY(comp_name)\n)\n</code></pre>\n\n<p>Now I am trying to create another table using some foreign keys,</p>\n\n<pre><code>CREATE TABLE works\n(\nemp_name varchar(20) NOT NULL,\ncomp_name varchar(20) NOT NULL,\nsalary  int(10) NOT NULL,\nFOREIGN KEY(emp_name) REFERENCES employee(emp_name),\nFOREIGN KEY(comp_name) REFERENCES company(comp_name)\n)\n</code></pre>\n\n<p>Getting ERROR : ORA-00907: missing right parenthesis</p>\n\n<p>I have also tried with</p>\n\n<pre><code>CREATE TABLE works\n(\nemp_name varchar(20) NOT NULL,\ncomp_name varchar(20) NOT NULL,\nsalary  int(10) NOT NULL,\nconstraint wemployee FOREIGN KEY(emp_name) REFERENCES employee(emp_name),\nconstraint wcompany FOREIGN KEY(comp_name) REFERENCES company(comp_name)\n)\n</code></pre>\n\n<p>But getting same error.\nCan any one tell me that where I am doing mistake?</p>\n"},{"tags":["oracle","optimizer"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12773398,"title":"prevent full table scan","body":"<p>I have following query:</p>\n\n<pre><code>select id,\n       c1,\n       c2,\n       c3 \nfrom tbl t1\njoin \n(select id \n   from tbl t2\n   where upper(replace(c5, ' ', '')) like upper(?)\n) j \non j.id = t1.id\n</code></pre>\n\n<p><code>?</code> is some wildcard parameter string like <code>%test%</code>.</p>\n\n<p><code>c5</code> column has index on the function used to access it:</p>\n\n<pre><code>create index tbl_c5_idx on tbl(upper(replace(c5, ' ', '')))\n</code></pre>\n\n<p>When I run just inner query it uses <code>tbl_c5_idx</code>, however when I run the whole query it turns into full table scan which is much slower.</p>\n\n<p>Are there any way to avoid full table scans? Hints or rewrite join condition. I can not rewrite whole query as inner query is constructed dynamically depending on the input conditions.</p>\n"},{"tags":["oracle","settings","window","active","toad"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":296,"score":0,"question_id":3062694,"title":"Oracle/Toad Active Pane Setting","body":"<p>On TOAD for oracle, there is a bar at the bottom where your active windows (be it an sql editor, schema browser or SQL modeller window) are displayed. I have just moved office and it now only displays the active window and none of the other windows...</p>\n\n<p>any of you toad guru's know how to get it to display all the windows?</p>\n\n<p>Toad version 7.5.2</p>\n"},{"tags":["sql","oracle","group-by","aggregation","top-n"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12768448,"title":"Select rows and group by id and sort for n latest rows (by date)","body":"<p>I have the following set of data returned by a select:</p>\n\n<pre><code>date          code     \n23/01/2012    AA123\n24/01/2012    AA123\n29/01/2012    AA123\n06/07/2012    AA123\n17/02/2012    BB123\n20/02/2012    BB123\n04/06/2012    BB123\n</code></pre>\n\n<p>The select gives all the data for each code (ordered by code). I only want to return the rows for the latest 2 dates for each code. The data to be returned would be as follows:</p>\n\n<pre><code>date          code     \n23/01/2012    AA123\n24/01/2012    AA123\n17/02/2012    BB123\n20/02/2012    BB123\n</code></pre>\n\n<p>How do i achieve the desired results? I have tried to use </p>\n\n<pre><code>select date, code\nfrom table\nwhere x,y,z\nand rownum &lt; 2 \norder by code desc;\n</code></pre>\n\n<p>but it only returns the top 2 rows - </p>\n"},{"tags":["sql","oracle","comparison","like-operator"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":270,"score":1,"question_id":12712480,"title":"SQL query to test if string value contains carriage return","body":"<p>Trying to figure out the right way to test if a VARCHAR column value ends with a carriage return. Tried this but it does not work, database is <code>Oracle 11g</code>...</p>\n\n<pre><code>select name from myTable where name LIKE '%\\r' OR name like '%\\n'\n</code></pre>\n"},{"tags":["java","android","oracle","mobile","dalvik"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":12730165,"title":"Other VM than Dalvik possible for Android Applications","body":"<p>Is it possible to include a different JVM into an application and have the app run within this JVM rather than the Dalvik VM provided by Android?\nI'm asking because Oracle's ADF Mobile uses its own JVM both on Android and iOS but doesn't specify exactly how they do it. It is supposed to be based on a J2ME CDC VM.</p>\n\n<p>My colleague thinks they run it within the dalvik VM and add in the apk those libraries needed to achieve Java ME CDC specs.</p>\n\n<p>If it were truly a completely seperate JVM then, theoretically, it should also be possible to include a Java EE JVM and toss some reusable business logic from backends in there right?</p>\n"},{"tags":["sql","oracle","plsql","aggregation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":66,"score":0,"question_id":12768564,"title":"how to find data under other data in sql with cursor","body":"<p>i have a table like:</p>\n\n<pre><code>create table police(\nssn\nname\nboss_name\nsalary\n);\n\nInsert into police values(1,’A’,’C’,10000);\nInsert into police values(2,’B’,’D’,20000);\nInsert into police values(3,’C’,’E’,30000);\nInsert into police values(4,’D’,’E’,45000);\nInsert into police values(5,’E’,NULL,55000);\n</code></pre>\n\n<p>I want a <code>cursor</code> that returns the <code>total salary</code> for the <code>polices who have same boss</code>. Here result will be: \n<code>30000(salary of C)+45000(salary of D)</code> \nas they both are under boss E. How I do it? How I find C and D as they are under E in ORACLE pl/sql or anonymous block?</p>\n"},{"tags":["oracle","oracle10g","database-backup"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12752916,"title":"Oracle daily db backup - without Enterprise Manager","body":"<p>I'm a SQL Server DBA, but we have an Oracle 10g database that I need to start performing daily backups on. We do not have Enterprise Manager. Is there a way to schedule a daily backup in Oracle like in SQL Server?</p>\n\n<p>I apologize if this question is severely elementary for Oracle people, but I've had a very tough time trying to research this and coming up with an answer other than \"Use EM\".</p>\n"}]}
{"total":22203,"page":15,"pagesize":100,"questions":[{"tags":["oracle","views","materialized-views"],"answer_count":6,"favorite_count":13,"up_vote_count":42,"down_vote_count":0,"view_count":126788,"score":42,"question_id":93539,"title":"What is the difference between Views and Materialized Views in Oracle?","body":"<p>What is the difference between Views and Materialized Views in Oracle?</p>\n"},{"tags":["sql","oracle","limit","top-n"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":93,"score":2,"question_id":12767996,"title":"SQL query not working (Oracle)","body":"<p>I have 4 tables with the following structure:</p>\n\n<p>Table <code>artist</code>:</p>\n\n<pre><code>artistID lastname firstname nationality dateofbirth datedcease\n</code></pre>\n\n<p>Table <code>work</code>:</p>\n\n<pre><code>workId title copy medium description artist ID\n</code></pre>\n\n<p>Table <code>Trans</code>:</p>\n\n<pre><code>TransactionID Date Acquired Acquistionprice datesold askingprice salesprice customerID workID\n</code></pre>\n\n<p>Table <code>Customer</code>:</p>\n\n<pre><code>customerID lastname Firstname street city state zippostalcode country areacode phonenumber email\n</code></pre>\n\n<p>First question is which artist has the most works of <code>artsold</code> and how many of the artist works have been sold. </p>\n\n<p>My SQL query is this:</p>\n\n<pre><code>SELECT * From dtoohey.artist A1 \nINNER JOIN \n(\n    SELECT COUNT(W1.ArtistID) AS COUNTER, artistID  FROM dtoohey.trans T1\n    INNER JOIN dtoohey.work W1\n    ON W1.workid = T1.Workid\n    GROUP BY W1.artistID\n) TEMP1\nON TEMP1.artistID = A1.artistID\nWHERE A1.artistID = TEMP1.artistId\nORDER BY COUNTER desc;\n</code></pre>\n\n<p>I am to get the whole table but I only want show only the first row which is the highest count how do I do that??</p>\n\n<p>I have tried inserting <code>WHERE ROWNUM &lt;=1</code>  but it shows artist ID with 1</p>\n\n<p>qns 2 is sales of which artist's work have resulted in the highest average profit (i.e) the average of the profits made on each sale of worksby an artist), and what is that amount.</p>\n\n<p>My SQL query is:</p>\n\n<pre><code>SELECT A1.artistid, A1.firstname FROM\n(\n    SELECT \n        (salesPrice - AcquisitionPrice) as profit, \n        w1.artistid as ArtistID \n    FROM dtoohey.trans T1\n    INNER JOIN dtoohey.WORK W1\n    on W1.workid = T1.workid\n) TEMP1\nINNER JOIN dtoohey.artist A1\nON A1.artistID = TEMP1.artistID\nGROUP BY A1.artistid\nHAVING MAX(PROFIT) = AVG(PROFIT);\n</code></pre>\n\n<p>I'm not able to execute it</p>\n\n<p>I have tried query below but still not able to get it keep getting the error missing right parenthesis</p>\n\n<pre><code>SELECT A1.artistid, A1.firstname, TEMP1.avgProfit\nFROM \n(\n    SELECT \n        AVG(salesPrice - AcquisitionPrice) as avgProfit, \n        W1.artistid as artistid\n    FROM dtoohey.trans T1\n    INNER JOIN dtoohey.WORK W1\n    ON W1.workid = T1.workid\n    GROUP BY artistid\n    ORDER BY avgProfit DESC\n    LIMIT 1\n) TEMP1\nINNER JOIN dtoohey.artist A1\nON A1.artisid = TEMP1.artistid\n</code></pre>\n"},{"tags":["oracle","date-arithmetic"],"answer_count":4,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":96425,"score":7,"question_id":1096853,"title":"Calculate difference between 2 date / times in Oracle SQL","body":"<p>I have a table as follows:</p>\n\n<pre><code>Filename - varchar\nCreation Date - Date format dd/mm/yyyy hh24:mi:ss\nOldest cdr date - Date format dd/mm/yyyy hh24:mi:ss\n</code></pre>\n\n<p>How can I calcuate the difference in hours minutes and seconds (and possibly days) between the two dates in Oracle SQL?</p>\n\n<p>Thanks</p>\n"},{"tags":["sql","regex","oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":1,"view_count":93,"score":2,"question_id":12764955,"title":"Use the regular expression feature of Oracle to find a double vowel sequence, eg. ‘ie’, ‘ee’, ‘oa’","body":"<p>Use the regular expression feature of Oracle to find all movies whose title includes a word with a double vowel sequence, ‘ie’, ‘ee’, ‘oa’. I know it's something to do with the like clause but the order of the code is what's giving me trouble. Any help appreciated.</p>\n\n<p>\"table_name movies\" </p>\n\n<pre><code>SELECT *  \nFROM movies\nWHERE REGEXP_LIKE (title, ‘ie’, ‘ee’, ‘oa’);\n</code></pre>\n"},{"tags":["mysql","sql","oracle","top-n"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12758912,"title":"sql questions on these","body":"<p>I have 4 tables. One is called artist. Here is the table structure:</p>\n\n<pre><code>artistID lastname firstname nationality dateofbirth datedcease\n</code></pre>\n\n<p>The other table is called work</p>\n\n<pre><code>workId title copy medium description artist ID\n</code></pre>\n\n<p>Trans table</p>\n\n<pre><code>TransactionID Date Acquired Acquistionprice datesold askingprice salesprice customerID workID\n</code></pre>\n\n<p>Customer table</p>\n\n<pre><code>customerID lastname Firstname street city state zippostalcode country areacode phonenumber email\n</code></pre>\n\n<p>first question is which artist has the most works of artsold and how many of the artist works have been sold.\nmy sql quey is below</p>\n\n<pre><code>SELECT * From dtoohey.artist A1 \nINNER JOIN \n(\nSELECT COUNT(W1.ArtistID) AS COUNTER, artistID  FROM dtoohey.trans T1\nINNER JOIN dtoohey.work W1\n ON W1.workid = T1.Workid\nGROUP BY W1.artistID\n) TEMP1\nON TEMP1.artistID = A1.artistID\nWHERE A1.artistID = TEMP1.artistId\nORDER BY COUNTER desc;\n</code></pre>\n\n<p>i am to get the whole table but i only want  show only the first row which is the highest count how do i do that??</p>\n\n<p>qns 2 is sales of which artist's work have resulted in the highest average profit(i.e) the average of the profits made on each sale of worksby an artist), and what is that amount.</p>\n\n<p>my sql quey is below</p>\n\n<pre><code>  SELECT A1.artistid, A1.firstname FROM\n   (\n   SELECT (salesPrice - AcquisitionPrice) as profit, w1.artistid as ArtistID FROM dtoohey.trans T1\n    INNER JOIN dtoohey.WORK W1\n    on W1.workid = T1.workid\n    ) TEMP1\n    INNER JOIN dtoohey.artist A1\n    ON A1.artistID = TEMP1.artistID\n    GROUP BY A1.artistid\n    HAVING MAX(PROFIT) = AVG(PROFIT);\n</code></pre>\n\n<p>I'm not able to execute it </p>\n"},{"tags":["c#","asp.net","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":110,"score":0,"question_id":12765181,"title":"ORA-01843: not a valid month -- working on DB but not when doing the same on asp.net web pages","body":"<p>I'm trying to insert a record into the DB via asp.net C# web page using 'add button'. The date format on my DB is 'dd/MON/yyyy'. the isert statement works fine on my DB but it doesnt in asp.net.</p>\n\n<p>On my DB:: WORKS FINE!</p>\n\n<pre><code>INSERT INTO EVENT (RES_ID,EMP_ID,PHONE_NUMBER,EVENT_DT,TIME_SLOT)  \nvalues (null,100,'123-123-1233','01/Oct/2012','08:00 PM - 12:00 AM');\n</code></pre>\n\n<p>Om myaspx.cs page:: THROWS THE ERROR \"\"Error inserting record! ORA-01843: not a valid month\"\" on the webpage.</p>\n\n<pre><code>    string insertSQL;\n    insertSQL = \"insert into event (res_id,emp_id,phone_number,event_dt,time_slot) \";\n    insertSQL += \" values (:res_id,:emp_id,:phone_number,:event_dt,:time_slot)\";\n\n    OracleConnection con = new OracleConnection(connectionString);\n    OracleCommand cmd = new OracleCommand(insertSQL, con);\n\n    cmd.Parameters.Add(\":emp_id\", cboResOrEmpName.SelectedValue);\n    cmd.Parameters.Add(\":res_id\", null);\n    cmd.Parameters.Add(\":phone_number\", txtContactNo.Text);\n    cmd.Parameters.Add(\":time_slot\", rblTimeSlot.Text);\n    cmd.Parameters.Add(\":event_dt\", txtEvtDt.Text);\n\n    // Try to open the database and execute the update.\n    int added = 0;\n    try\n    {\n        con.Open();\n        added = cmd.ExecuteNonQuery();\n        lblResults.Text = added.ToString() + \" record added!\";\n    }\n    catch (Exception err)\n    {\n        lblResults.Text += \"Error inserting record! \";\n        lblResults.Text += err.Message;\n    }\n    finally\n    {\n        con.Close();\n    }\n</code></pre>\n\n<p>I used a textbox for the event date with AJAX caledar extansion. Following is its definition.</p>\n\n<pre><code>&lt;asp:TextBox ID=\"txtEvtDt\" runat=\"server\"&gt;&lt;/asp:TextBox&gt;\n&lt;asp:CalendarExtender ID=\"txtEvtDt_CalendarExtender\" runat=\"server\" \nTargetControlID=\"txtEvtDt\" Format=\"dd/MMM/yyyy\"&gt;\n&lt;/asp:CalendarExtender&gt;\n</code></pre>\n\n<p>Please help me understand the problem. Any help is greatly appreciated. Thank you!</p>\n"},{"tags":["oracle","oracle-apps"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12767114,"title":"EBS Oracle OPM query","body":"<p>What are the tables and their columns that are involved if I am to query the Target Qty for a specific equipment that have certain items under them.</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12751980,"title":"Column named COUNT issue","body":"<p>I have a table with a column named COUNT.</p>\n\n<p>If I execute the following query:\nSelect count\nFrom mytable</p>\n\n<p>From SQL Developer it works fine.\nFrom JDBC connection it does not work.</p>\n\n<p>I can not modify the table structure...</p>\n\n<p>Do you any idea how can I workaround this?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["vb.net","oracle","select","count"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12733453,"title":"Select Count(*) returning old value from before deleting all the entries in a data table","body":"<p>So I inserted some data on my table, ran a Select Count(*) query, and showed the result, it was 120, then I deleted the data of the table from sqldeveloper, ran my VB project again with the same query as before just to test if it worked ok, and to my surprise it returned the same value as before! Still 120, although the same exact Select Count query does return 0 from sqldeveloper, I already closed the project and opened it again, no change. What could be happening?</p>\n\n<p>This is my query code:</p>\n\n<pre><code>sql.CommandText = \"select count(*) from mytable\"\nsql.CommandType = CommandType.Text\nsql.Connection = conexion.con\ntest = Convert.ToInt32(sql.ExecuteScalar().ToString())\nTextBox1.Text = test.ToString()\n</code></pre>\n\n<p>test is an Integer variable, the reason I convert it to an Integer is because I want to evaluate the result and decide what to do based on the number returned by the query.</p>\n\n<p>VB.NET 3.5 and Oracle10g XE</p>\n"},{"tags":["oracle","plsql","prompt"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":696,"score":0,"question_id":8830427,"title":"Run SCRIPT from PL/SQL Block","body":"<p>How to use \"START SCRIPT\" in pl/sql block ?</p>\n\n<p>I want to use something like this</p>\n\n<pre><code>declare\nbegin\n   proc(para1,para2);\n   execute immediate 'start prompt1' ; \nend;\n/\n</code></pre>\n\n<p>Also I want to know , can i get a value from prompt1 into my PL/SQL block where am calling the script ? Because I need to use the value to perform some operations in the PL/SQL block.</p>\n"},{"tags":["sql","oracle","compiler-errors","sql-developer"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":231,"score":0,"question_id":12754611,"title":"Oracle SQL Developer: If Exists Update Else Insert Missing Right Parenthesis Compiler Error","body":"<p>I have been attempting to write a SQL Query in Oracle's SQL Developer that will update a row if it exists and insert one if it doesn't.  Besides the primary key(UNITOFMEASURE_USERID), there are three columns: UNITOFMEASUREID, USERID, and ACTIVE.  There is a unique constraint on combinations of UNITOFMEASUREID and USERID, so for each combination of values there is either one row or 0.\nI have been trying two different SQL arrangements, and both of them return a similar compilation error complaining about a missing right parenthesis.\nThis is what I have tried:\nFirst arrangement:</p>\n\n<pre><code>UPDATE NORSEMEN.UNITOFMEASURE_USER SET (ACTIVE=1) WHERE UNITOFMEASUREID=:unitOfMeasureId AND USERID=:userId\nIF @@ROWCOUNT=0\n    INSERT INTO NORSEMEN.UNITOFMEASURE_USER (UNITOFMEASUREID, USERID) VALUES (:unitOfMeasureId, :userId)\n</code></pre>\n\n<p>SQL Developer error response for first arrangement:</p>\n\n<pre><code>Error at Command Line:1 Column:46\nError report:\nSQL Error: ORA-00907: missing right parenthesis\n00907. 00000 -  \"missing right parenthesis\"\n*Cause:    \n*Action:\n</code></pre>\n\n<p>Second arrangement:</p>\n\n<pre><code>IF EXISTS (SELECT * FROM NORSEMEN.UNITOFMEASURE_USER WHERE UNITOFMEASUREID=:unitOfMeasureId AND USERID=:userId)\n    UPDATE NORSEMEN.UNITOFMEASURE_USER SET (ACTIVE = 1) UNITOFMEASUREID=:unitOfMeasureId AND USERID=:userId\nELSE\n    INSERT INTO NORSEMEN.UNITOFMEASURE_USER (UNITOFMEASUREID, USERID) VALUES (:unitOfMeasureId, :userId)\n</code></pre>\n\n<p>SQL Developer error response for second arrangement:</p>\n\n<pre><code>Error at Command Line:2 Column:47\nError report:\nSQL Error: ORA-00907: missing right parenthesis\n00907. 00000 -  \"missing right parenthesis\"\n*Cause:    \n*Action:\n</code></pre>\n\n<p>I have not been able to figure out why SQL Developer thinks there is a missing parenthesis.\nCan anyone help?</p>\n"},{"tags":["oracle","plsql","package","toad","utility"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12751752,"title":"Toad for Oracle 10.6 versus 11.5: Performance Problems while editing large Packages","body":"<p>Actually I´m using Toad 10.6 to work with PL-SQL code. Now, our company is preparing to migrate to Toad 11.5, but, I noticed that large PL-SQL editing on 11.5 is so slow that makes impossible to me to work with that version.</p>\n\n<p>Actually, a package file that contains about 1.4Mb of code takes <strong><em>5 seconds</em></strong> to load on Toad 10.5 and, the same time is spent when we use the 'Formatter Utility' to automatically format that file.</p>\n\n<p>The <strong>same</strong> file, on Version 11.5, takes <strong><em>3.5 minutes</em></strong> to load, and the same time is spent when we try to format the document. During this times, the application is reported as 'Not Responding' in Windows TaskManager. </p>\n\n<p>Does anybody knows how could I improve the performance on 11.5 version?</p>\n\n<p>Thanks a lot!</p>\n"},{"tags":["sql","oracle","procedure","squirrel-sql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12749438,"title":"compile procedure in oracle 11g","body":"<p>I create a simple procedure in oracle 11g with the client squirrel, this s the code</p>\n\n<pre><code>create or replace procedure EXAMPLE_P is\nbegin\n    1+2;\nend;/\n</code></pre>\n\n<p>while executing i got this warning</p>\n\n<pre><code>Warning:   Warning: execution completed with warning\nSQLState:  99999\nErrorCode: 17110\nPosition: 0\n\nQuery 1 of 1, Rows read: 0, Elapsed time (seconds) - Total: 0.031, SQL query: 0.031, Building output: 0\n</code></pre>\n\n<p>The problem here, i can't call my procedure.</p>\n\n<pre><code>begin\n    EXAMPLE_P();\nend;/\n</code></pre>\n\n<p>I got this error when i execute the block above.</p>\n\n<pre><code>Error: ORA-06550: line 2, column 9:\nPLS-00302: component 'EXAMPLE_P' must be declared\nORA-06550: line 2, column 2:\nPL/SQL: Statement ignored\n\nSQLState:  65000\nErrorCode: 6550\nPosition: 37\n</code></pre>\n\n<p>The procedure exists in the table ALL_OBJECTS with the status INVALID.\nI tried to compile it (validate the status) but i won't work with the query below</p>\n\n<pre><code>alter procedure EXAMPLE_P COMPILE;\n</code></pre>\n\n<p>SomeOne knows what i can do to call my procedure, (i used PL/SQL developer and never meet this problem)</p>\n"},{"tags":["oracle","function","plsql","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12338573,"title":"Returning a table from an Oracle function","body":"<p>I've looked at many solutions here to try to solve this and they have gotten pretty far but now I'm in the weeds on some errors that I can#t seem to get past.</p>\n\n<p>I am on Oracle 11g. I need a function to return a record set (table). Here is the code I'm using:</p>\n\n<pre><code>CREATE TYPE T_TABLE IS OBJECT\n(\n    Field1 int\n    , Field2 int\n);\n\nCREATE TYPE T_TABLE_COLL IS TABLE OF T_TABLE;\n\nCREATE OR REPLACE FUNCTION FN_MyFunction\nRETURN T_TABLE_COLL \nIS\nBEGIN\n  FOR I IN (SELECT Field1, Field2 FROM Table1) LOOP\n    IF I.Field1 = 1 THEN\n        BEGIN           \n            INSERT INTO T_TABLE     \n            SELECT Field1, Field2\n            FROM Table2\n            WHERE Field2 = I.Field2;\n        END;\n    ELSIF I.Field1 = 2 THEN\n        BEGIN           \n            INSERT INTO T_TABLE     \n            SELECT Field1, Field2\n            FROM Table2\n            WHERE Field2 = I.Field2;\n        END;  \n  END IF;\n  END LOOP;\n  RETURN T_SMRYACCT_TABLE_COLL;\nEND;\n</code></pre>\n\n<p>The errors I receive from this are:</p>\n\n<ol>\n<li><p>Statement Ignored on the FUNCTION FN_MyFunction line and PL/SQL: ORA-04044: procedure, function, package, or type is not allowed here on each line INSERT INTO T_TABLE_COLL line</p></li>\n<li><p>PLS-00330: invalid use of type name or subtype name on the RETURN line</p></li>\n</ol>\n\n<p>What am I doing wrong with the table types? </p>\n"},{"tags":["java","sql","oracle","stored-procedures","jdbc"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":51,"score":-1,"question_id":12746875,"title":"Creating Stored procedure using JDBC in java","body":"<p>I have given a stored procedure create query as input to the JDBC statement and Executed.It created stored procedure in oracle db with showing an error symbol.When i am compiling the newly created stored procedure in sql developer the error is gone and its running.</p>\n\n<p>So, is there any way to compile the stored procedure from jdbc or how to create stored procedures in jdbc without showing the compilation error in Oralce?</p>\n"},{"tags":["java","oracle","jdbc","insert","clob"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1695,"score":1,"question_id":10727521,"title":"Insert CLOB into Oracle database","body":"<p><strong>My question is:</strong> How do you get around the <code>ORA-01704: string literal too long</code> error when inserting (or doing anything in queries) with <code>CLOB</code>s?</p>\n\n<p>I want to have a query like this:</p>\n\n<pre><code>INSERT ALL\n   INTO mytable VALUES ('clob1')\n   INTO mytable VALUES ('clob2') --some of these clobs are more than 4000 characters...\n   INTO mytable VALUES ('clob3')\nSELECT * FROM dual;\n</code></pre>\n\n<p>When I try it with actual values though I get <code>ORA-01704: string literal too long</code> back. This is pretty obvious, but how do I insert clobs (or execute any statement at all with a clob)?</p>\n\n<p>I've tried looking at this <a href=\"http://stackoverflow.com/questions/5549450\">question</a>, but I don't think it has what I'm looking for. The clobs I have are in a <code>List&lt;String&gt;</code> and I iterate through them to make the statement. My code as it is follows:</p>\n\n<pre><code>private void insertQueries(String tempTableName) throws FileNotFoundException, DataException, SQLException, IOException {\nString preQuery = \"  into \" + tempTableName + \" values ('\";\nString postQuery = \"')\" + StringHelper.newline;\nStringBuilder inserts = new StringBuilder(\"insert all\" + StringHelper.newline);\nList&lt;String&gt; readQueries = getDomoQueries();\nfor (String query : readQueries) {\n  inserts.append(preQuery).append(query).append(postQuery);\n}\ninserts.append(\"select * from dual;\");\n\nDatabaseController.getInstance().executeQuery(databaseConnectionURL, inserts.toString());\n</code></pre>\n\n<p>}</p>\n\n<pre><code>public ResultSet executeQuery(String connection, String query) throws DataException, SQLException {\n  Connection conn = ConnectionPool.getInstance().get(connection);\n  Statement stmt = conn.createStatement();\n  ResultSet rs = stmt.executeQuery(query);\n  conn.commit();\n  ConnectionPool.getInstance().release(conn);\n  return rs;\n}\n</code></pre>\n"},{"tags":["sql-server","oracle","db2","informix"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":307,"score":1,"question_id":2617723,"title":"Override Locale Date with custom settings. ","body":"<p>Aside from the GL Support, is there a way to override locale settings with custom values for month and day when using mmm-dd-yyyy, modified Spanish examples: Jan = ENE, Aug = AGO, or long dates (mmmm) January = ENERO, August = AGOSTO, or (dddd) Monday = LUNES, Thursday = JUEVES, etc.? </p>\n"},{"tags":["sql","database","oracle","database-connection","executequery"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12761625,"title":"Execute Query not updating records/data","body":"<p>I'm using the database utility Execute Query to experiment with Oracle SQL (10g).</p>\n\n<p>My problem is that even after successfully executing a <code>CREATE TABLE</code> and an <code>INSERT</code>, the records are not shown when opening the data inspector.</p>\n\n<p>Here is what I run:</p>\n\n<pre><code>DROP TABLE Customer;\n\nCREATE TABLE Customer (\n    CustomerNr INTEGER PRIMARY KEY,\n    LastName    VARCHAR2(50),\n    FirstName   VARCHAR2(50)\n);\n\nINSERT INTO Customer VALUES (1, 'Example', 'Joe');\n</code></pre>\n\n<p><br>\nThe table is listed correctly:</p>\n\n<p><img src=\"http://i.stack.imgur.com/ii3dJ.png\" alt=\"enter image description here\"></p>\n\n<p>Screenshot 1\n<br></p>\n\n<p>However, no records are listed in the data tab:\n<img src=\"http://i.stack.imgur.com/tVpFw.png\" alt=\"enter image description here\">\n<a href=\"http://i.stack.imgur.com/lnQsh.png\" rel=\"nofollow\">Screenshot 2</a></p>\n\n<p><code>SELECT * FROM Customer;</code> can be executed successfully, but nothing is returned.</p>\n\n<p><strong>If I disconnect from the database and connect again, the data is loaded properly.</strong></p>\n\n<p><code>SELECT * FROM Customer;</code> now also returns the inserted record correctly.</p>\n\n<p>Is this a bug in Execute Query? Am I doing something wrong? What could I try to fix this?</p>\n\n<p>PS: Please edit my post to include the images as I don't have the reputation to add images.</p>\n"},{"tags":["oracle","view","sqlplus","ora-00907"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":191,"score":2,"question_id":1860491,"title":"Can't find the cause of a 'missing right parenthesis' error","body":"<p>I am having problems with a line of code.  I am trying to create a count function for a view that I created.  I have done this a bunch of different ways but below is the format that I have most recently used.</p>\n\n<pre><code>CREATE VIEW ERP_REPORT(EVENTNAME, DESCRIPTION, COUNT(RIDERS) AS\nSELECT EVENTNAME, RACES.DESCRIPTION, \n       RIDERS_FIRSTNAME||' '||RTRIM(RIDERS_LASTNAME)\nFROM EVENTS, RACES, PARTICIPATION, RIDERS\nWHERE EVENTS.EVENTID = RACES.EVENTID\nAND RACES.RACEID = PARTICIPATION.RACEID\nAND RIDERS.RIDERID = PARTICIPATION.RIDERID\nORDER BY RIDERS.RIDERS_LASTNAME, EVENTNAME;\n</code></pre>\n\n<p>The error I am getting is <code>ORA-00907: missing right parenthesis</code>. The error is at the <code>(COUNT(RIDERS)</code> part of the code.  Any ideas how I should tackle this?</p>\n"},{"tags":["oracle","timestamp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12752192,"title":"relying on timestamp rather than sequence in Oracle RAC","body":"<p><a href=\"http://stackoverflow.com/questions/4866959/oracle-rac-and-sequences\">Oracle RAC and sequences</a></p>\n\n<p>I have read this answer. I have one more question. </p>\n\n<p><em>When one node asks for timestamp( say in GMT, and the nodes are in different timezones), does this node need to ask node-master for timestamp everytime it needs to save?</em>\nI am wondering if it does ask the master-node, then there is no advantage of using sequence vs timestamp. </p>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":114,"score":0,"question_id":12395235,"title":"Oracle SQL: Select first date for list of values","body":"<p>I will try to explain this the best that I can.</p>\n\n<p>I have a requirement where I need to pull in the very first letter sent date for a case.</p>\n\n<pre><code>Case     |   Letter_Sent_Date\n1234     |   05/29/2012\n1234     |   05/30/2012\n1234     |   06/01/2012\n</code></pre>\n\n<p>How can I build an oracle sql where the below 'WHERE' condition would EXLUDE this case from appearing on the report?</p>\n\n<pre><code>WHERE Letter_Sent_Date between '01JUN2012' and '30JUN2012'\n</code></pre>\n\n<p>Since the very first letter sent was not in June, I do not want it to appear on this report and to only appear when I run the report for May.</p>\n"},{"tags":["oracle","entity-framework-4","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":275,"score":0,"question_id":11259433,"title":"Entity Framework and Oracle Client - Issue with stored procedure","body":"<p>I am using Entity Framework with Oracle in a project and trying to call a stored procedure from EF. The procedure goes as</p>\n\n<pre><code>Create or Replace Procedure usp_RotaPlateProductie_Select(\n    p_afdelingId in varchar2,\n    p_productTypeId in varchar2,\n    p_productieData out sys_refcursor)\nIS \nBegin\n    Open p_productieData for\n        Select rp.Batchnummer, cppo.Productnummer, p.Omschrijving, pra.Bruto_In_Meters\n        From Rotaplateproductie rp inner join Productieresultaatrtplrol pra\n        on rp.Batchnummer = pra.Batchnummer inner join Cpiplusproductieorder cppo\n        on pra.ProductieNummer = cppo.ProductNummer inner join Product p\n        on cppo.Productnummer = p.Productnummer Where rp.Afdelingid = p_afdelingId\n        and rp.producttype = p_productTypeId; \nEND;\n</code></pre>\n\n<p>But when EF executes the function I am getting the error below</p>\n\n<pre><code>ORA-06550: line 1, column 8:\nPLS-00306: wrong number or types of arguments in call to 'USP_ROTAPLATEPRODUCTIE_SELECT.\nORA-06550: line 1, column 8:\nPL / SQL: Statement IGNORED.\n</code></pre>\n\n<p>I am calling this procedure using the below code</p>\n\n<pre><code>public ObjectResult&lt;RotaPlateProductie&gt; Search_RotaPlateProductie(global::System.String p_AFDELINGID, global::System.String p_PRODUCTTYPEID)\n    {\n        ObjectParameter p_AFDELINGIDParameter;\n        if (p_AFDELINGID != null)\n        {\n            p_AFDELINGIDParameter = new ObjectParameter(\"P_AFDELINGID\", p_AFDELINGID);\n        }\n        else\n        {\n            p_AFDELINGIDParameter = new ObjectParameter(\"P_AFDELINGID\", typeof(global::System.String));\n        }\n\n        ObjectParameter p_PRODUCTTYPEIDParameter;\n        if (p_PRODUCTTYPEID != null)\n        {\n            p_PRODUCTTYPEIDParameter = new ObjectParameter(\"P_PRODUCTTYPEID\", p_PRODUCTTYPEID);\n        }\n        else\n        {\n            p_PRODUCTTYPEIDParameter = new ObjectParameter(\"P_PRODUCTTYPEID\", typeof(global::System.String));\n        }\n\n        return base.ExecuteFunction&lt;RotaPlateProductie&gt;(\"Search_RotaPlateProductie\", p_AFDELINGIDParameter, p_PRODUCTTYPEIDParameter);\n    }\n</code></pre>\n\n<p>Here RotaPlateProductie is the entity from which I am binding the result set\nPlease help.</p>\n"},{"tags":["oracle","spring","hibernate","transactionmanager"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":12758769,"title":"Trying to persist to an oracle db using hibernate 4 and spring 3 without success. Tests pass but data not persisted.","body":"<p>I am trying to implement a simple DAO using hibernate 4 and Spring 3. </p>\n\n<p>When I try to save or delete a row in the db the transaction is not persisted.  I have included some code to show how the saving in the db doesnt work: </p>\n\n<p>I have a junit test which simply tries to save a StockEntityDTO in the db. </p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\npublic class StocksDAOImplTest extends\n    AbstractTransactionalJUnit4SpringContextTests {\n\n@Autowired\nprotected StocksDAO stockDao;\n\n\n@Test\npublic void shouldInsertIntoDatabase() {\n    BigDecimal price = new BigDecimal(653.50);\n    StockEntityDTO savedStock = new StockEntityDTO(\"GOOG\", price, \"google\");\n    stockDao.create(savedStock);\n    StockEntityDTO retrievedStock = stockDao.getById(savedStock.getId());\n    assertEquals(savedStock, retrievedStock);\n}\n</code></pre>\n\n<p>The test passes but the expected row (1, \"GOOG\", 653.50, \"google\") is not persisted in the db. </p>\n\n<p>The DAO looks like this: </p>\n\n<pre><code>@Transactional\npublic abstract class AbstractHibernateDAO&lt;T extends Serializable&gt; {\n\nprivate Class&lt;T&gt; clazz;\n\n\n@Resource(name = \"sessionFactory\")\nprivate SessionFactory sessionFactory;\n\n\npublic void setClazz(final Class&lt;T&gt; clazzToSet) {\n    this.clazz = clazzToSet;\n}\n\n\npublic void create(final T entity) {\n    Session session = this.getCurrentSession();\n    session.save(entity);\n\n}\n</code></pre>\n\n<p>Application Context:</p>\n\n<pre><code>&lt;tx:annotation-driven transaction-manager=\"transactionManager\" /&gt;\n\n&lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\"&gt;\n    &lt;property name=\"driverClassName\" value=\"oracle.jdbc.OracleDriver\" /&gt;\n    &lt;property name=\"url\" value=\"jdbc:oracle:thin:@localhost:1521:orcl\" /&gt;\n    &lt;property name=\"username\" value=\"gtp\" /&gt;\n    &lt;property name=\"password\" value=\"gtp\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"transactionManager\"\n    class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"sessionFactory\"\n    class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;property name=\"packagesToScan\" value=\"com.ubs.gtp.data.domain\" /&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.OracleDialect&lt;/prop&gt;\n            &lt;prop key=\"hibernate.show_sql\"&gt;true&lt;/prop&gt;\n            &lt;prop key=\"hibernate.current_session_context_class\"&gt;org.springframework.orm.hibernate4.SpringSessionContext\n            &lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Hope someone can help.  As is probably evident from my code, I am very new to spring. </p>\n"},{"tags":["sql","database","oracle","query"],"answer_count":7,"favorite_count":7,"up_vote_count":12,"down_vote_count":0,"view_count":50940,"score":12,"question_id":452464,"title":"How can I get column names from a table?","body":"<p>I need to query the database to get the column/field names, not to be confused with data in the table.  For example, if I have a table named EVENT_LOG that contains eventID, eventType, eventDesc, and eventTime, then I would want to retrieve those field names from the query and nothing else.</p>\n\n<p>Please help?  Thanks in advance.</p>\n"},{"tags":["java","oracle","stored-procedures","jdbc","oracle10g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":424,"score":0,"question_id":12751878,"title":"PLS-00306: wrong number or types of arguments in call to GET_NEW_EVENTS in Java","body":"<p>I'm getting the below error while calling a stored procedure from Java:</p>\n\n<p><strong>\"java.sql.SQLException: [Oracle][ODBC][Ora]ORA-06550: line 1, column 7:\nPLS-00306: wrong number or types of arguments in call to 'GET_NEW_EVENTS'\nORA-06550: line 1, column 7:\nPL/SQL: Statement ignored\"</strong></p>\n\n<p>The stored procedure is as below:</p>\n\n<pre><code>    create or replace package body event_subscription as\n    procedure get_new_events( p_events in out SYS_REFCURSOR ) as\n    begin\n        open p_events for\n            select log_id from event_alert_log;         \n    end get_new_events;\nend event_subscription;\n</code></pre>\n\n<p>And the Java code to cal the stored procedure is as below:</p>\n\n<pre><code>    sqlString = \"BEGIN event_subscription.get_new_events(?); END;\";\nCallableStatement  cs = connection.prepareCall(sqlString);\ncs.registerOutParameter(1,OracleTypes.CURSOR);\ncs.execute(); // This line is failing and throwing the SQLException\nResultSet rs = (ResultSet) cs.getObject(1);\n</code></pre>\n\n<p>The Oracle Version is: Oracle Database 10g Express Edition Release 10.2.0.1.0 - Product\nThe Java version is: 1.6.</p>\n\n<p>Can somebody help me in this issue. I have been trying all possible solutions to this problem.</p>\n"},{"tags":["c#","oracle","oledb","oledbdatareader"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":157,"score":0,"question_id":12756683,"title":"Call stored procedure and cursor parameter with OleDb","body":"<p>I'm developing an application in C# that connects to an Oracle 10g database.</p>\n\n<p>I'm using Oledb like this:</p>\n\n<pre><code>OleDbConnection conn = ConnectionUtil.CreateConexion();\n\nOleDbCommand cmd = new OleDbCommand();\ncmd.Connection = conn;\ncmd.CommandText = SP_AUTENTICAR_USUARIO;\ncmd.CommandType = CommandType.StoredProcedure;\ncmd.Parameters.Add(\"p_SED_USUARIO\", OleDbType.VarChar).Value = strUsuario;\ncmd.Parameters.Add(\"p_SED_PASS\", OleDbType.VarChar).Value = strPass;\ncmd.Parameters.Add(\"p_cursor\", OleDbType.Cursor).Direction = ParameterDirection.Output;//I dont know what to put here\n\nconn.Open();\ncmd.ExecuteNonQuery();\n\nOleDbDataReader objReader = (OleDbDataReader)cmd.Parameters[\"p_cursor\"].Value;\n\nif (objReader.Read())\n{...\n</code></pre>\n\n<p>I need to call a stored procedure and read a cursor with <code>OleDbDataReader</code>.</p>\n\n<p>Any idea how to do that?</p>\n\n<p>Thanks,</p>\n"},{"tags":["c#","oracle","database-connection","oledb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":195,"score":0,"question_id":12756264,"title":"oracle connection String with C# using oledb","body":"<p>Im developing an application in C# that connects to Oracle 10g.</p>\n\n<p>When I use ODP. Net and this </p>\n\n<p>Connection String <strong>\"Data Source=Angelo-HP/XE;User ID=MAPFRE;Password=123456\"</strong> \nI can connect and perform any action with the database, </p>\n\n<p>but when I use OleDbConnection (System.Data.OleDb) with this </p>\n\n<p>connection String: <strong>\"Provider=OraOLEDB.Oracle;OLEDB.NET=true;PLSQLRSet=true;User ID=mapfre;password=123456;Data Source=XE\"</strong> \nI got this error:</p>\n\n<p><strong>ORA-12154: TNS:could not resolve the connect identifier specified</strong></p>\n\n<p>When I try use Open() method from OleDbConnection.</p>\n\n<p>I think is not oracle configuration because I can connect from ODP and sqldeveloper client.</p>\n\n<p>Any idea?</p>\n\n<p>Thanks,</p>\n"},{"tags":["php","oracle","packages","oci","varray"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":473,"score":0,"question_id":4901063,"title":"Access a varray type defined inside a package using oci_new_collection","body":"<p>Hello I am trying to pass in varrays from PHP  to Oracle. I am using OCI8 and have earlier worked with varrays as arguments in stored procedures, and on compilation the types of those varrays are created. So while making collection instance on the PHP end, we can directly mention the collection name.</p>\n\n<p>Ex:</p>\n\n<pre><code>$my_coll = oci_new_collection($c, 'MY_ARRAY');\n</code></pre>\n\n<p>where MY_ARRAY would be the varray type I had declared in the Oracle instance.</p>\n\n<pre><code>create or replace type MY_ARRAY as varray(100) of varchar2(20);\n</code></pre>\n\n<p>So when I create them outside a package, the type is compiled and would be ready during execution.</p>\n\n<p>If I do that from packages, I am getting back the error</p>\n\n<p><strong>PHP Warning:  oci_new_collection() [function.oci-new-collection]: OCI-22303: type &quot;&quot;.&quot;my_pack.my_array_type&quot; not found</strong> </p>\n\n<p>My package header would look like this</p>\n\n<pre><code>create or replace\nPACKAGE my_pack\nAS\n   TYPE my_array_type is VARRAY(200) of varchar2(20);\n    my_arr my_array_type;\n\n    function my_func(\n    in_id number,\n    in_arr my_array_type    \n    )\n    return number;\n\nend my_pack;\n</code></pre>\n\n<p>Now when I make a call from PHP to create an instance of collection, this is the way I do</p>\n\n<pre><code>$my_collection = oci_new_collection($connect,'my_pack.my_array_type');\n</code></pre>\n\n<p>Now I get the warning type not found.</p>\n\n<p>My question is, how would I have to call the varray type that is in the package??? I am doing it as package.type_name, but I am getting the warning that says type not found.</p>\n"},{"tags":["mysql","oracle","cursor"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12754935,"title":"Convert a Oracle Stored procedure with \"Connect By\" and \"TYPE\" to MySQL","body":"<p>I have difficulty to convert an oracle SP to the one in MySQL. Especially, for \"Connect by\" and \"TYPE\".</p>\n\n<p>Here is the problem to solve using an Oracle stored procedure.</p>\n\n<p>There is a table with 3 columns </p>\n\n<pre><code>ID  |Last_Modified | Flag   \n1   |2011-12-11 02:00:00|   0   \n2   |2011-12-13 02:00:00|   0   \n3   |2011-12-02 02:00:00|   0 \n4   |2011-12-12 02:00:00|   0 \n</code></pre>\n\n<p>the stored procedure “getback(String pId, String pLast_Modified). E.g. pId =”1,2,3” and pLast_Modified = “2011-12-11 02:00:00, 2011-12-13 02:00:00, 2011-12-01 02:00:00”. </p>\n\n<p>The logic is that, for the same ID, if the last_modified in the table is later than the passed last_modified, then set the flag for that record to “1”. </p>\n\n<p>Here is Oracle stored procedure:</p>\n\n<pre><code>create or replace procedure test1(\np_ids varchar2,   \np_dates varchar2  \n) IS\n\nTYPE id_type IS TABLE OF NUMBER INDEX BY VARCHAR2(64);\nTYPE date_type IS TABLE OF DATE INDEX BY VARCHAR2(64);\n\nids id_type;\nlast_updated date_type;\nlvar1 varchar2(200);\nlvar2 varchar2(200);\n\n\n\ncursor c1 is \nWith ids as (select rownum id, regexp_substr(p_ids,'[^,]+', 1, level) val from dual\nconnect by regexp_substr(p_ids, '[^,]+', 1, level) is not null), \nlupdated as (select rownum id, regexp_substr(p_dates,'[^,]+', 1, level) val from dual\nconnect by regexp_substr(p_dates, '[^,]+', 1, level) is not null)\nselect lut.id, \ncase when lut.last_updated &gt; to_date(lu.val,'yyyy-mm-dd hh24:mi:ss') then 1\n          else 0\nend flag\nfrom last_updated_tbl lut,ids,lupdated lu\nwhere lut.id = ids.val\nand   ids.id = lu.id\n;\n\nBEGIN\nopen c1;\nloop\n fetch c1 into lvar1,lvar2;\n exit when c1%notfound;\n\n dbms_output.put_line(lvar1||' flag:'||lvar2);\n\nend loop;\n\nclose c1;\n\nEND;\n</code></pre>\n"},{"tags":["oracle","triggers"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12753647,"title":"How to query and execute trigger on the same table","body":"<p>Hope someone can help with this. I am new to triggers and I am trying to create a trigger that checks to see if the record being modified has a specific value.</p>\n\n<p>example\nI have a table called Filing that has a filing_id and a filing_status, I want to prevent someone from updating or deleting any records in that table has a filing_status=\"FILED\".\nso if i have the following</p>\n\n<pre><code>Filing_id    Filing_status    Val\n---------    -------------    ---\n0             Filed           X\n</code></pre>\n\n<p>If someone tried to modify Val the trigger should stop it\nI have created the following trigger:</p>\n\n<pre><code>CREATE or replace TRIGGER TRG_PREV_FILING\n  BEFORE DELETE or UPDATE\n  ON PF.FILING\n  FOR EACH ROW\n   declare\n     rowcnt number;\n   BEGIN\n     SELECT COUNT(filing_id) INTO rowcnt FROM PF.FILING \n      where status = 'FILED'\n       and  filing_id = :new.filing_id;\n     if (rowcnt &gt; 0)\n     then\n      raise_application_error (-20100, 'You can not delete Or Update initial record');\n     end if;\n   END;\n</code></pre>\n\n<p>The problem I am facing is I am getting:ORA-04091 which is \"Table Filing is mutating, Trigger/function may not see it\"</p>\n\n<p>So basically I can't query on the same table that I am executing the trigger on? Is that the problem in my case and does anyone know a work around this?</p>\n\n<p>I appreciate any help</p>\n"},{"tags":["sql-server","oracle","entity-framework","poco"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":12754406,"title":"EF to POCO - Oracle or SQL Server - Numeric Mapping/Conversion","body":"<p>I have a legacy database schema that runs on either SQL Server or Oracle.  I would like to use Entity Framework and a single set of POCOs for the two databases, so I have been working through breaking out the edmx files and using different conceptual and physical definitions for the data.</p>\n\n<p>Where I'm having a problem is with existing numeric data because I can't change the types in the database.  The SQL Server definition is a float and Oracle is a number(19,4), which are reverse engineered to a double and a decimal respectively.  </p>\n\n<p>If I change the conceptual model to decimal (which should accommodate either type) I get an error indicating Edm.decimal is not compatible to SqlServer.float. If I leave the conceptual model at the reverse engineered value, then it gives an error saying that the conceptual type doesn’t match with the POCO type (which is decimal since that seemed like it would be compatible with both databases).</p>\n\n<p>Any thoughts on how to approach this?</p>\n"},{"tags":["sql","oracle","plsql","timestamp"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":841,"score":1,"question_id":5318082,"title":"PL SQL :How to show nanoseconds of a TIMESTAMP","body":"<p>I have two timestamps i.e. start= 15-03-11 15:10:10 and finish=15-03-11 15:10:10 and i need to subtract them (\"finish-start\" ) in order to find the duration. Because their difference is in nanosecond level, i need to convert them into 15:10:10.000000001 and 15:10:10.000000015 respectively. </p>\n"},{"tags":["sql","sql-server","oracle","nosql"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":158,"score":5,"question_id":12568726,"title":"Most efficient way to save way points and do comparisons?","body":"<p>I would like to know your opinion. I created an application, where users create routes and we track this route and save all the way points in the database. Then, the application does comparisons of users way points.</p>\n\n<p>Currently, I use <code>MSSQL</code> Server, using two tables, one for Route and the other stores way points (with spatial data type). The comparisons are made in a store procedure using SQL Server geographic functions such as st_distance...</p>\n\n<p>I have investigated other options. One that I implemented is with Oracle 11g using objects. I store all data in only one Object Table, and the way points are stored in a Varray of a type with Latitude and Longitude attributes. This way is very efficient saving and retrieving data, but gets some complicated when comparing.</p>\n\n<p>I'm looking for a <code>NoSQL</code> solution, some algorithm or method to do this efficiently. What do you think?</p>\n"},{"tags":["sql","oracle","gaps-and-islands"],"answer_count":3,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":185,"score":8,"question_id":12723776,"title":"Partially denormalising unicorn observations","body":"<p>There are a number of researchers observing the world's last remaining <a href=\"http://meta.stackoverflow.com/questions/37328/my-godits-full-of-unicorns\">unicorns</a>, on <a href=\"http://en.wikipedia.org/wiki/Easter_Island\" rel=\"nofollow\">Easter Island</a><sup>1</sup>. Each day the researchers record which unicorn they sighted, the date of the sighting, the number of babies each unicorn has and whether they were drunk when the sighting took place. These are individually uploaded to a central location, which then spits out a flat file to me of all new observations each day.</p>\n\n<p>I have a table that looks like this to contain the information:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>create table unicorn_observations (\n     observer_id number not null\n   , unicorn_id number not null\n   , created date not null -- date the record was inserted into the database\n   , lastseen date not null -- date the record was last seen\n   , observation_date date not null\n   , no_of_babies number not null\n   , drunk varchar2(1) not null\n   , constraint pk_uo primary key ( observer_id, unicorn_id, created )\n   , constraint chk_uo_babies check ( no_of_babies &gt;= 0 )\n   , constraint chk_uo_drunk check ( drunk in ('y','n') )\n     );\n</code></pre>\n\n<p>The table is separately unique on  <code>observer_id</code>, <code>unicorn_id</code> and <code>observation_date</code> or <code>lastseen</code>.</p>\n\n<p>Sometimes the <a href=\"http://en.wikipedia.org/wiki/COBOL\" rel=\"nofollow\">Cobold</a> [sic] managing the output of data gets it slightly wrong and re-outputs the same data twice. In this situation I update the <code>lastseen</code> instead of creating a new record. I <em>only</em> do this in situations where every column is the same</p>\n\n<p>Unfortunately, the researchers aren't fully aware of the third normal form. Each month they upload the previous months observations for a few unicorns, even if no new observations have been made. They do this with a <em>new</em> <code>observation_date</code>, which means a new record gets inserted into the table.</p>\n\n<p>I have a separate <code>created</code> and <code>lastseen</code> for full traceability as the researchers sometimes submit some observations late. These are created by the database and are not part of the submitted information.</p>\n\n<p>Here is some sample data (with partially changed column names in order to make it fit without a scroll bar).</p>\n\n<pre>\n+--------+--------+-----------+-----------+-----------+---------+-------+\n| OBS_ID | UNI_ID |  CREATED  | LASTSEEN  | OBS_DATE  | #BABIES | DRUNK |\n+--------+--------+-----------+-----------+-----------+---------+-------+\n|      1 |      1 | 01-NOV-11 | 01-NOV-11 | 31-OCT-11 |      10 | n     |\n|      1 |      2 | 01-NOV-11 | 01-NOV-11 | 31-OCT-11 |      10 | n     |\n|      1 |      3 | 01-NOV-11 | 01-NOV-11 | 31-OCT-11 |      10 | n     |\n|      1 |      6 | 10-NOV-11 | 10-NOV-11 | 07-NOV-11 |       0 | n     |\n|      1 |      1 | 17-NOV-11 | 17-NOV-11 | 09-APR-11 |      10 | n     |\n|      1 |      2 | 17-NOV-11 | 17-NOV-11 | 09-APR-11 |      10 | n     |\n|      1 |      3 | 17-NOV-11 | 17-NOV-11 | 09-APR-11 |      10 | n     |\n|      1 |      6 | 17-NOV-11 | 17-NOV-11 | 17-NOV-11 |       0 | n     |\n|      1 |      6 | 01-DEC-11 | 01-DEC-11 | 01-DEC-11 |       0 | n     |\n|      1 |      6 | 01-JAN-12 | 01-JAN-12 | 01-JAN-12 |       3 | n     |\n|      1 |      6 | 01-FEB-12 | 01-FEB-12 | 01-FEB-12 |       0 | n     |\n|      1 |      6 | 01-MAR-12 | 01-MAR-12 | 01-MAR-12 |       0 | n     |\n|      1 |      6 | 01-APR-12 | 01-APR-12 | 01-APR-12 |       0 | n     |\n|      1 |      1 | 19-APR-12 | 19-APR-12 | 19-APR-12 |       7 | y     |\n|      1 |      2 | 19-APR-12 | 19-APR-12 | 19-APR-12 |       7 | y     |\n|      1 |      3 | 19-APR-12 | 19-APR-12 | 19-APR-12 |       7 | y     |\n|      1 |      6 | 01-MAY-12 | 01-MAY-12 | 01-MAY-12 |       0 | n     |\n+--------+--------+-----------+-----------+-----------+---------+-------+\n</pre>\n\n<p>I would like to partially denormalise these observations so that if a new record is received with the same <code>observer_id</code>, <code>unicorn_id</code>, <code>no_of_babies</code> and <code>drunk</code> (the payload) but with a <em>newer</em> <code>observation_date</code> I update a new column in the table, <code>last_observation_date</code>, instead of inserting a new record. I would still update the<code>lastseen</code> in this situation.</p>\n\n<p>I need to do this as I have a number of complicated unicorn related queries that join to this table; the researchers upload old observations with new dates about 10m times a month and I receive approximately 9m genuinely new records a month. I've been running for a year and already have 225m unicorn observations. As I only need to know the last observation date for each payload combination I would rather massively reduce the size of the table and save myself a lot of time full-scanning it.</p>\n\n<p>This means that the table would become:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>create table unicorn_observations (\n     observer_id number not null\n   , unicorn_id number not null\n   , created date not null -- date the record was inserted into the database\n   , lastseen date not null -- date the record was last seen\n   , observation_date date not null\n   , no_of_babies number not null\n   , drunk varchar2(1) not null\n   , last_observation_date date\n   , constraint pk_uo primary key ( observer_id, unicorn_id, created )\n   , constraint chk_uo_babies check ( no_of_babies &gt;= 0 )\n   , constraint chk_uo_drunk check ( drunk in ('y','n') )\n     );\n</code></pre>\n\n<p>and the data stored in the table would look like the below; it doesn't matter whether <code>last_observation_date</code> is null or not if the observation has only been \"seen\" once. I do not need help in loading the data, only in partially denormalising the current table to look like this. </p>\n\n<pre>\n+--------+--------+-----------+-----------+-----------+---------+-------+-------------+\n| OBS_ID | UNI_ID |  CREATED  | LASTSEEN  | OBS_DATE  | #BABIES | DRUNK | LAST_OBS_DT |\n+--------+--------+-----------+-----------+-----------+---------+-------+-------------+\n|      1 |      6 | 10-NOV-11 | 01-DEC-11 | 07-NOV-11 |       0 | n     | 01-DEC-11   |\n|      1 |      1 | 01-NOV-11 | 17-NOV-11 | 09-APR-11 |      10 | n     | 31-OCT-11   |\n|      1 |      2 | 01-NOV-11 | 17-NOV-11 | 09-APR-11 |      10 | n     | 31-OCT-11   |\n|      1 |      3 | 01-NOV-11 | 17-NOV-11 | 09-APR-11 |      10 | n     | 31-OCT-11   |\n|      1 |      6 | 01-JAN-12 | 01-JAN-12 | 01-JAN-12 |       3 | n     |             |\n|      1 |      6 | 01-FEB-12 | 01-MAY-12 | 01-FEB-12 |       0 | n     | 01-MAY-12   |\n|      1 |      1 | 19-APR-12 | 19-APR-12 | 19-APR-12 |       7 | y     |             |\n|      1 |      2 | 19-APR-12 | 19-APR-12 | 19-APR-12 |       7 | y     |             |\n|      1 |      3 | 19-APR-12 | 19-APR-12 | 19-APR-12 |       7 | y     |             |\n+--------+--------+-----------+-----------+-----------+---------+-------+-------------+\n</pre>\n\n<p>The obvious answer</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>select observer_id as obs_id\n     , unicorn_id as uni_id\n     , min(created) as created\n     , max(lastseen) as lastseen\n     , min(observation_date) as obs_date\n     , no_of_babies as \"#BABIES\"\n     , drunk\n     , max(observation_date) as last_obs_date\n  from unicorn_observations\n group by observer_id\n        , unicorn_id\n        , no_of_babies\n        , drunk\n</code></pre>\n\n<p>doesn't work as it ignores the single observation of 3 unicorn babies for unicorn 6 on the 1<sup>st</sup> January 2012; this in turn means that the <code>lastseen</code> for the record created on the 10<sup>th</sup> November is incorrect.</p>\n\n<pre>\n+--------+--------+-----------+-----------+-----------+---------+-------+-------------+\n| OBS_ID | UNI_ID |  CREATED  | LASTSEEN  | OBS_DATE  | #BABIES | DRUNK | LAST_OBS_DT |\n+--------+--------+-----------+-----------+-----------+---------+-------+-------------+\n|      1 |      1 | 01-NOV-11 | 17-NOV-11 | 09-APR-11 |      10 | n     | 31-OCT-11   |\n|      1 |      2 | 01-NOV-11 | 17-NOV-11 | 09-APR-11 |      10 | n     | 31-OCT-11   |\n|      1 |      3 | 01-NOV-11 | 17-NOV-11 | 09-APR-11 |      10 | n     | 31-OCT-11   |\n|      1 |      6 | 10-NOV-11 | 01-MAY-12 | 07-NOV-11 |       0 | n     | 01-MAY-12   |\n|      1 |      6 | 01-JAN-12 | 01-JAN-12 | 01-JAN-12 |       3 | n     | 01-JAN-12   |\n|      1 |      1 | 19-APR-12 | 19-APR-12 | 19-APR-12 |       7 | y     | 19-APR-12   |\n|      1 |      2 | 19-APR-12 | 19-APR-12 | 19-APR-12 |       7 | y     | 19-APR-12   |\n|      1 |      3 | 19-APR-12 | 19-APR-12 | 19-APR-12 |       7 | y     | 19-APR-12   |\n+--------+--------+-----------+-----------+-----------+---------+-------+-------------+\n</pre>\n\n<p>I do not currently see a way of doing this without some procedural logic, i.e. a loop. I would much rather avoid a loop in this situation as I would have to full-scan a 225m row table 260 times (number of distinct <code>created</code> dates). Even using <code>lag()</code> and <code>lead()</code> would need to be recursive as there is an indeterminate amount of observations per unicorn.</p>\n\n<p>Is there a way of creating this data-set in a single SQL statement?</p>\n\n<p>The table specification and sample data is also in a <a href=\"http://www.sqlfiddle.com/#!4/0e0bf\" rel=\"nofollow\">SQL Fiddle</a>.</p>\n\n<hr>\n\n<p>Attempted better explanation:</p>\n\n<p>The problem is maintaining <em>when</em> something was true. On 01-Jan-2012 unicorn 6 had 3 babies. </p>\n\n<p>Looking at just unicorn 6 in the \"table\" created by the GROUP BY; if I try to find the number of babies on the 1<sup>st</sup> of January I will get two records returned, which is a contradiction.</p>\n\n<pre>\n+--------+--------+-----------+-----------+-----------+---------+-------+-------------+\n| OBS_ID | UNI_ID |  CREATED  | LASTSEEN  | OBS_DATE  | #BABIES | DRUNK | LAST_OBS_DT |\n+--------+--------+-----------+-----------+-----------+---------+-------+-------------+\n|      1 |      6 | 10-NOV-11 | 01-MAY-12 | 07-NOV-11 |       0 | n     | 01-MAY-12   |\n|      1 |      6 | 01-JAN-12 | 01-JAN-12 | 01-JAN-12 |       3 | n     | 01-JAN-12   |\n+--------+--------+-----------+-----------+-----------+---------+-------+-------------+\n</pre>\n\n<p>However, I would want only one row, as in the second table. Here, for any point in time there is at most one \"correct\" value because the two periods of time where unicorn 6 had 0 babies have been separated into two rows by the day when it had 3.</p>\n\n<pre>\n+--------+--------+-----------+-----------+-----------+---------+-------+-------------+\n| OBS_ID | UNI_ID |  CREATED  | LASTSEEN  | OBS_DATE  | #BABIES | DRUNK | LAST_OBS_DT |\n+--------+--------+-----------+-----------+-----------+---------+-------+-------------+\n|      1 |      6 | 10-NOV-11 | 01-DEC-11 | 07-NOV-11 |       0 | n     | 01-DEC-11   |\n|      1 |      6 | 01-JAN-12 | 01-JAN-12 | 01-JAN-12 |       3 | n     |             |\n|      1 |      6 | 01-FEB-12 | 01-MAY-12 | 01-FEB-12 |       0 | n     | 01-MAY-12   |\n+--------+--------+-----------+-----------+-----------+---------+-------+-------------+\n</pre>\n\n<p><sub>1. grazing around the moai</sub></p>\n"},{"tags":["vb.net","oracle"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":70,"score":3,"question_id":12715989,"title":"Creating Oracle Connection causes error in COM class retrieval","body":"<p>I am writing an application in VB.NET that requires that I query an Oracle database using the Oracle Data Access Client. I then use something called the SCAPI interface to access the metadata of an application we use for data modeling.</p>\n\n<p>I've simplified the problem down to just two functions that are executed by clicking buttons on a form.</p>\n\n<p>This function is executed when I click a button on the form. It creates an oracle connection but doesn't actually execute any queries (because I've commented the rest out and still get the error):</p>\n\n<pre><code>Private Sub btnDisplayDirectories_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnDisplayDirectories.Click\n    Dim ModelMart As String = \"Data Source=...;User Id=...;Password=...;\"\n    Dim OraConn As New OracleConnection(ModelMart)\n    OraConn.Open()\n    OraConn.Close()\n    OraConn.Dispose()\nEnd Function\n</code></pre>\n\n<p>This function just creates the application object using the SCAPI interface:</p>\n\n<pre><code>Private Sub btnOpenModel_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)         Handles btnOpenModel.Click\n    Dim oAPI As New SCAPI.Application\nEnd Sub\n</code></pre>\n\n<p>There is no issue if I fire up the application, and click on btnOpenModel first, then click on btnDisplayDirectories. If I click on btnDisplayDirectories, then I click on btnOpenModel, I get an error on the first line of btnOpenModel that says:</p>\n\n<pre><code>Retrieving the COM class factory for component with CLSID {2B2219EB-EDE7-49EE-BB89-5A0B4A398A63} failed due to the following error: 80004005.\n</code></pre>\n\n<p>I've actually experimented and I don't even have to open the Oracle connection to get this error, just defining the Oracle Connection causes the error.</p>\n"},{"tags":["mysql","sql","database","oracle","query"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12729260,"title":"Sql query to join two table for the final output","body":"<p>Below are the two tables, customer and department. I am struggling very hard to get the output.</p>\n\n<p>I want to write the query which shows only the department name which have maximum number of employees.</p>\n\n<p><img src=\"http://i.stack.imgur.com/kF2wQ.jpg\" alt=\"enter image description here\"></p>\n\n<p>Answer should be like this ...</p>\n\n<p><img src=\"http://i.stack.imgur.com/FMIeo.jpg\" alt=\"enter image description here\"></p>\n\n<p>Please help me to write the query.</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12749452,"title":"Oracle Comparing varchar2 field with number","body":"<p>I have a query in which I have following sub-query</p>\n\n<p><code>(select account from asl_data where alias_accunt = trim(field) )</code></p>\n\n<p>where alias_account is varchar2(20), while the field value comes from substr from another sub-query. However the value of comes as 00123456789</p>\n\n<p>For this I am getting error as invalid number. I tried to_char, cast functions on both fields. But nothing seem to work.</p>\n\n<p>I am missing something? Any suggestion on this?</p>\n\n<p>Thank you!!</p>\n"},{"tags":["sql","oracle","oracle10g"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12705442,"title":"How to create a .ctl file for sqlldr command","body":"<p>I want to automatically create a .ctl file for sqlldr command.</p>\n\n<p>I get an input file (.txt) with fields terminated by '|' and each column has a header at the top. There are about 300 million records and 10s of columns (which are also in headers).</p>\n\n<p>I want to extract 100 rows of all columns and generate a .ctl file directly from this by dynamically assessing the datatype of each column.</p>\n"},{"tags":[".net","xml","oracle","xslt","vbscript"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12292362,"title":"Connecting to Oracle db using VB Script in an XSLT that gets processed by .NET code","body":"<p>I have a .NET code that uses an XSLT for transforming an XML and firing the transformed XML to another webservice. I need to be able to query the Oracle db in the XSLT using VB Script and find an info using SELECT query and put it in the transformed XML before firing it to the webservice. Below is my code with different attempts and errors received.</p>\n\n<p>Below is how i am calling the VB Script function in my XSL code.</p>\n\n<pre><code>&amp;lt;xsl:value-of select=\"VBCustomScript:Get_Dealer_Reference_Num($man_id)\"/&amp;gt;\n</code></pre>\n\n<p><strong>Attempt 1:</strong></p>\n\n<pre><code>&amp;lt;msxml:script language=\"VBScript\" implements-prefix=\"VBCustomScript\"&gt;&amp;lt;![CDATA[\n\nImports System.Data.OleDb\n\nFunction Get_Dealer_Reference_Num(imanufacturerid As Object) As String\n\nIf imanufacturerid &lt;&gt; \"\" Then\n\n'Parameters for DB Access (You will need to update this when the target db changes)\n\nDim OdbcDSN As String = \"Provider=OraOLEDB.Oracle;Data Source=ABC;User Id=DFE;Password=XYZ;\"\n\nDim connect As OleDbConnection = New OleDbConnection(OdbcDSN)\n\nDim strSql As String = \"SELECT DLR_REFERENCE_NUM AS DRN from DEALER WHERE DLR_KEY = '\" &amp; imanufacturerid &amp; \"'\"\n\nDim result As String\n\nDim cmd As New OleDbCommand(strSql, connect)\n\ncmd.CommandType = Data.CommandType.Text\n\nDim dr As OleDbDataReader = cmd.ExecuteReader()\n\ndr.Read()\n\nresult = dr.Item(0)\n\nconnect.Close()\n\nconnect.Dispose()\n\nReturn result\nElse\nReturn \"\"\n\nEnd If\n\n   End Function\n\n]]&gt;\n\n&amp;lt;/msxml:script&gt;\n</code></pre>\n\n<p><strong>Error:</strong> It was something related to the way Imports has been declared, but anyway the above didnt work.</p>\n\n<p><strong>Attempt 2:</strong> </p>\n\n<pre><code>&amp;lt;msxml:script language=\"VBScript\" implements-prefix=\"VBCustomScript\"&gt;&amp;lt;![CDATA[\n\nFunction Get_Dealer_Reference_Num(imanufacturerid)\n\nIf imanufacturerid &lt;&gt; \"\" Then\n\n'Parameters for DB Access (You will need to update this when the target db changes)\n\nDim OdbcDSN, connect, strSql\n\nOdbcDSN = \"Provider=OraOLEDB.Oracle;Data Source=ABC;User Id=DFE;Password=XYZ;\"\n\nSet connect = CreateObject(\"ADODB.Connection\")\n\nconnect.Open OdbcDSN\n\nstrSql = \"SELECT DLR_REFERENCE_NUM AS DRN from DEALER WHERE DLR_KEY = '\" &amp; imanufacturerid &amp; \"'\"\n\nSet resultSet = connect.Execute(strSql)\n\ndim tempResult\n\nresultSet.MoveFirst \n\ntempResult = resultSet(\"DRN\")\n\nresultSet.Close\n\nconnect.Close\n\nGet_Dealer_Reference_Num = cstr(tempResult)\n\nElse\n\n   Get_Dealer_Reference_Num = \"\"\n\nEnd If\n\nEnd Function\n]]&gt;\n\n&amp;lt;/msxml:script&gt;\n</code></pre>\n\n<p><strong>Error:</strong> \"Set and Let are no longer supported\".\nI tried simply removing the Set keyword from <code>'Set connect = CreateObject(\"ADODB.Connection\")'</code>, but then it started giving different errors in the same line like arguments must be enclosed within parentheses.</p>\n\n<p>Could someone please help me write a VB Script code than would successfully query a db table and return the result? I have written the same code as in Attempt 2 successfully in other XSLT files where the XSLT file gets processed by our product(internally i guess it uses MSXML parser), but i cant figure out how to make it work with .NET code.</p>\n"},{"tags":["oracle","sequence"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12750713,"title":"sequence start with 1 when table empty","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/51470/how-do-i-reset-a-sequence-in-oracle\">How do I reset a sequence in Oracle?</a>  </p>\n</blockquote>\n\n\n\n<p>I have a table in oracle db. The table contains huge number of rows always, say a few hundred thousands. I have set a id in that table and used a sequence and a trigger such that every time a record is inserted id is automatically generated and inserted. Now while traversing the existing rows through java code, sometimes the data in that table can be truncated and new rows can be inserted. In that case, I want the sequence to start again from 1 when the table is empty.</p>\n\n<p>The sequence looks like </p>\n\n<pre><code>CREATE SEQUENCE DUMMY_DETAILS_SEQ\n  START WITH 356005\n  MAXVALUE 999999999999999999999999999\n  MINVALUE 1\n  NOCYCLE\n  CACHE 20\n  NOORDER;\n</code></pre>\n"},{"tags":["sql","oracle","min"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":207,"score":0,"question_id":11438983,"title":"SQL Sub-Query - how to find a min value","body":"<p>I have created a subquery as follows</p>\n\n<pre><code>select hospital.hospitalcode, name, wardno, annualbudget\nfrom hospital, ward\nwhere hospital.hospitalcode = ward.hospitalcode\n</code></pre>\n\n<p>The question I am trying to answer is this: Taking account of all hospital wards, which hospital has the ward with the lowest annual budget?  You should display the hospital code and its name, the ward number and its annual budget. </p>\n\n<p>How would I find a single entry for this question? I realise I need to use MIN but do not know where to use this when using multiple column names</p>\n"},{"tags":["oracle","sequence","unique-constraint"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":148,"score":0,"question_id":12737005,"title":"Oracle Sequence Value Increments when Unique Constraint Violated","body":"<p>I created an Oracle sequence and trigger to auto-increment the primary key column on a table when new records are inserted. Here is my code:</p>\n\n<pre><code>CREATE TABLE MOBILE_APP\n(\n  \"MOBILE_APP_ID\" NUMBER(9, 0) PRIMARY KEY,\n  \"NAME\" VARCHAR2(60) NOT NULL,\n  \"DESCRIPTION\" VARCHAR2(200),\n  CONSTRAINT name_unique UNIQUE (name)\n);\n\nCREATE SEQUENCE MOBILE_APP_ID_SEQ\nMINVALUE 1\nMAXVALUE 999999999\nINCREMENT BY 1\nSTART WITH 1\nNOCACHE\nORDER\nNOCYCLE;\n\nCREATE TRIGGER MOBILE_APP_BR_I\nBEFORE INSERT ON MOBILE_APP\nFOR EACH ROW\nBEGIN\n  SELECT MOBILE_APP_ID_SEQ.NEXTVAL INTO :NEW.MOBILE_APP_ID FROM dual;\nEND;\n</code></pre>\n\n<p>Since my trigger is \"before insert,\" it will execute before a record is actually inserted into the table. But I did not expect my trigger to execute even in the case of a unique constraint violation during an insert. Let's say that the table, sequence and trigger are all new, and I try executing the statement below twice.</p>\n\n<pre><code>INSERT INTO MOBILE_APP (name, description) VALUES ('Name', 'Desc');\n</code></pre>\n\n<p>The first execution will complete successfully, auto-populating the value of 1 in the \"mobile_app_id\" field for the inserted record. As expected, the second execution will error out with a unique constraint violation relative to the \"name\" field. But if I then insert another record without violating the unique constraint, the value 3 is auto-populated in the \"mobile_app_id\" field for the inserted record -- meaning that during the attempted insert that failed due to a unique constraint violation, the value of the sequence still incremented from 1 to 2. How can I prevent this? I found this <a href=\"http://stackoverflow.com/questions/2530339/primary-key-identity-value-increments-on-unique-key-constraint-violation\">other post</a>, but unfortunately it contains no solution to the problem. Any help will be greatly appreciated!</p>\n"},{"tags":["oracle","hierarchical-data"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":12748977,"title":"Find the Top Level for each item in a hierarchical relationship in Oracle SQL","body":"<p>I am trying to query a (large) Oracle 9 table that represents some hierarchical data. The Parent items have their own Id as Parent ID.  As an example;</p>\n\n<pre><code>ID    PARENTID               \n----- --------  \n1     1\n2     1\n3     2\n4     2\n5     3\n6     6\n7     6\n8     6\n9     4\n10    10\n</code></pre>\n\n<p>I want to have a query that returns each ID, along with the ultimate Parent for that ID, so continuing my example</p>\n\n<pre><code>ID    UlitimateParent\n----  ----\n1     1\n2     1\n3     1\n4     1\n5     1\n6     6\n7     6\n8     6\n9     1\n10    10\n</code></pre>\n\n<p>I've seen a few examples using Connect By but can't seem to get this to work.  Any ideas ?</p>\n"},{"tags":["sql","oracle","oracle10g","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12749419,"title":"Oracle database installation version enforcing stricter SQL rules on group by function","body":"<p>Recently I copied an Oracle database from one machine to another.</p>\n\n<ol>\n<li><strong>Original</strong>: Oracle Database 10g Enterprise Edition Release 10.2.0.3.0</li>\n<li><strong>Copy</strong>: Oracle Database 11g Express Edition Release 11.2.0.2.0 - Production\nFor some reason the following query works on the original but not on the copy.</li>\n</ol>\n\n<p>If a t.tdt_id is substituted in place of tdt_id in the group by the query works (as per td_tablespaces t )</p>\n\n<p>Can someone explain why this is and if it has something to do with the installation. The data is the exact same in both.</p>\n\n<pre><code>SELECT\n    tdt_name as \"name\", \n    tdt_contents as \"Content\",         \n    tdt_status as \"Status\",         \n    round(( subsize.SubSize_MB ), 2 ) as \"size used\",         \n    round(( sum( MaxMB ) - subsize.SubSize_MB ), 2 ) as \"size free\" \nFROM    \n    td_tablespaces t \nINNER JOIN        \n    (\n        SELECT \n            tdt_id,\n            CASE \n                 WHEN upper( d.df_autoextend ) = 'YES' THEN  round(( sum( df_maxsize ) / 1024 ), 2 )  \n                 WHEN upper( d.df_autoextend ) = 'NO' THEN round(( Sum( df_size ) / 1024 ), 2 )                 \n            END as MaxMB\n        FROM    \n            td_datafiles d         \n        GROUP BY \n            tdt_id,                 \n            d.df_autoextend,                 \n            df_maxsize,                 \n            df_size         \n    ) sub \nON      \n    t.tdt_id = sub.tdt_id \nINNER JOIN        \n    (\n        SELECT \n            tdt_id,                 \n            sum( df_size / 1024 ) -( df_free / 1024 ) SubSize_MB,                 \n        df_free      / 1024 SubSize_Free         \n        FROM    \n            td_datafiles df         \n        GROUP BY \n            tdt_id,                 \n            df_free         \n    ) subsize \nON \n    t.tdt_id = subsize.tdt_id \nWHERE \n    ins_id   = 2096 \nGROUP BY \n    tdt_id,         \n    tdt_name,         \n    tdt_contents,        \n    tdt_status,         \n    subsize.SubSize_MB,         \n    SubSize_Free \nORDER BY tdt_contents  \n</code></pre>\n"},{"tags":["php","oracle","pdf","getimagesize"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12748756,"title":"PHP getimagesize of PDF -> Blob","body":"<p>I am trying to achieve the ability to add PDF uploads to an existing image upload function I've inherited. I've noticed that I'm not able to use getimagesize on PDFs. Is there a way to determine the dimensions of a PDF using PHP? - Or - Would it be better to hardcode the dimensions when uploading PDFs.</p>\n"},{"tags":["c#","oracle","parameter-passing","odp.net"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":101,"score":1,"question_id":12712355,"title":"How to pass a table-valued parameter from C# to Oracle stored procedure","body":"<p>I have an Oracle stored procedure <code>CREATE_CASE_EXL</code>:</p>\n\n<pre><code>PROCEDURE  CREATE_CASE_EXL(P_RICdata RICTab,\n                       P_sACTION_TYPE IN VARCHAR2);\n</code></pre>\n\n<p>where <code>RICTab</code> is a custom type:</p>\n\n<pre><code>TYPE RICTab IS TABLE OF MMSRRicRec  INDEX BY BINARY_INTEGER;\n\n    TYPE MMSRRicRec IS RECORD\n ( RIC        VARCHAR2(32),\n   FID_NO     NUMBER(8),\n   REC_ID     NUMBER(8),\n   MMS_ACTION VARCHAR2(1)\n  );\n</code></pre>\n\n<p>In PL/SQL to execute the <code>CREATE_CASE_EXL</code> I run this code:</p>\n\n<pre><code>DECLARE\npTE_RICS     RICTab \n\nBEGIN\n    pTE_RICS(1).RIC  := 'RIC1';\n    pTE_RICS(1).FID_NO := NULL;\n    pTE_RICS(1).REC_ID := 3;\n    pTE_RICS(1).MMS_ACTION := 'A';\n\n    pTE_RICS(1).RIC  := 'RIC2';\n    pTE_RICS(1).FID_NO := NULL;\n    pTE_RICS(1).REC_ID := 4;\n    pTE_RICS(1).MMS_ACTION := 'A';\n\n    CREATE_CASE_EXL( pTE_RICS , 'A');\n\nEND;\n</code></pre>\n\n<p>I need to execute similar code in the .Net. Can you please advice how could I pass a parameter as a table of data to the Oracle stored procedure? Should I use UDT for this task?</p>\n\n<p>Best wishes,\nEvgeniy</p>\n"},{"tags":["sql","oracle","query"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":95,"score":-1,"question_id":12740485,"title":"Usage of \"AND\" and \"OR\" in SQL queries","body":"<p>I have a the following tables</p>\n\n<ul>\n<li>students(sid, sname, age) </li>\n<li>course(cid, cname, duration) </li>\n<li>enroll(sid, cid, date) </li>\n</ul>\n\n<p>Find sids of students who have taken java <strong>or</strong> rdbms</p>\n\n<pre><code>select sid \nfrom enroll e, \n     course c \nwhere (c.cname like 'java' and c.cid=e.cid) \n   or (c.cname like 'rdbms' and c.cid=e.cid);\n</code></pre>\n\n<p>Alternatively:</p>\n\n<pre><code>select sid \nfrom enroll e, \n     course c \nwhere cname like 'java' and c.cid=e.cid\nunion \nselect sid \nfrom enroll e, \n     course c \nwhere cname like 'rdbms' and c.cid=e.cid;\n</code></pre>\n\n<p>2nd alternative:</p>\n\n<pre><code>select sid \nfrom enroll \nwhere cid in (select cid \n              from course \n              where cname like 'java' \n                 or cname like 'rdbms');\n</code></pre>\n\n<p>All the above queires get me the expected results. </p>\n\n<p>To find  sids of students who have taken java <strong>and</strong> rdbms, I just modified all the 3 but 1st and 3rd queries below don't work.</p>\n\n<pre><code>select sid \nfrom enroll e, \n     course c \nwhere (c.cname like 'java' and c.cid=e.cid) \n  and (c.cname like 'rdbms' and c.cid=e.cid);\n</code></pre>\n\n<p>Alternative:</p>\n\n<pre><code>select sid \nfrom enroll e, \n     course c \nwhere cname like 'java' and c.cid=e.cid\nintersect \nselect sid \nfrom enroll e, \n     course c \nwhere cname like 'rdbms' and c.cid=e.cid;\n</code></pre>\n\n<p>2nd alternative:</p>\n\n<pre><code>select sid \nfrom enroll \nwhere cid in (select cid \n              from course \n              where cname like 'java' and cname like 'rdbms');\n</code></pre>\n"},{"tags":["oracle","security","websphere","audit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12606026,"title":"Capturing End User detail in an Oracle DB via Connection Pool in Websphere","body":"<p>I am currently working on an auditing piece where I need to know the end user name in the Oracle database in the background.</p>\n\n<p>The application uses Oracle authentication to grant access, and to handle permissions on features in the application.  It also (correctly) handles access to underlyinig data, ensuring the end user credentials persist into the data layer.</p>\n\n<p>When I try to audit the application (using Oracle auditing) I only get the connection pool user ID and the Websphere server name.</p>\n\n<p>I have searched and found suggestions to use Reauthentication (which doesn't log the correct user ID until the connection pool is fully used), WAS.clientinfo (which plain ol' doesn't pass the end user credentials to the DB) and have found reference to Guardium (which does the job, but is hideously expensive.)</p>\n\n<p>How can I pass end user information to the data layer?  I don't mind if this comes down to a configuration change, or a 3rd party product; as long as it works we can assess it.</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12748239,"title":"oracle query: get max value with some conditions","body":"<p>I have a table called service_t,it has a column effective_dt which is populated with unix timestamp. I need  find  all rows with max effective_dt but the effective_dt must be less than a given value. I have the following sql but I don’t think it’s efficient: </p>\n\n<pre><code>Select *\n  from service_t t1\n where t1.effective_dt &lt;= :given_value\n   and t1.effective_dt = (select max(effective_dt)\n                            from service_t t2\n                           where t2.effective_dt &lt;= :given_value\n                             and t1.id = t2.id)\n</code></pre>\n\n<p>Is this efficient or any other good ways? Thanks!</p>\n"},{"tags":["oracle","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12743592,"title":"CLOB decoding after changing language","body":"<p>Oracle database were moved from 11i to R12 with another language. </p>\n\n<ul>\n<li>Old language <code>AMERICAN_AMERICA.WE8MSWIN1252</code></li>\n<li>New language <code>AMERICAN_AMERICA.AL32UTF8</code></li>\n</ul>\n\n<p>When I try to read something from fields with CLOB data type, wrong characters are read.\nI tried to use <code>CONVERT</code> and <code>UTL_RAW.CONVERT</code>, but it didn't help.</p>\n\n<p>I use PL/SQL to connect to DB.</p>\n"},{"tags":["oracle","plsql","toad"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":8666,"score":1,"question_id":2829391,"title":"how do I execute a function from TOAD for Oracle and bind the result to a data grid","body":"<p>I have a function that takes as one of it's arguments a VARRAY of pl/sql Objects. How do I execute this stored procedure and bind the resultset that it returns to a data grid in TOAD for Oracle?</p>\n"},{"tags":["sql","oracle","user-defined-types"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12730201,"title":"Get attribute names of user-defined objects","body":"<p>I want to generate a PL/SQL script that provide the attribute names of an object type defined by a user. I can see object types defined but I cant find  attribute names of this object. </p>\n"},{"tags":["oracle","recursive-query","connect-by"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12746094,"title":"connect by prior oracle","body":"<p>I have a table that contains an hierarchic element </p>\n\n<p>Table :</p>\n\n<pre>\nA       B \nP1      -\nP2      P1\nC1      P2\nC2      P2\n</pre>\n\n<p>B is a foreign key coming from the same table</p>\n\n<p>The query is :</p>\n\n<pre>\nSELECT level niveau, A\nfrom table parent, table child\nSTART WITH A IN\n( 'P0','P1','C2')\nCONNECT BY PRIOR  A= B\n</pre>\n\n<p>The result</p>\n\n<pre>\n1 P1\n1 P2\n  2 C1\n  2 C2\n1 C2\n</pre>\n\n<p>Why the \"2 C2\" apears?</p>\n\n<p>The result desired is in spite of it's not the correct, i:</p>\n\n<pre>\n1 P1\n1 P2\n  2 C1\n1 C2\n</pre>\n"},{"tags":["database","oracle","oracle10g","oracle11g","rdbms"],"answer_count":0,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":63,"score":6,"question_id":12744720,"title":"Commit vs Fast Commit vs Commit Cleanout in Oracle Database","body":"<p>I was wondering whether someone could verify my understanding regarding the differences between those 3 terms as pertaining to Oracle Databases.</p>\n\n<p>Many sources confuse these terms and do not explain them in detail so it was a bit of a challenge to find info.</p>\n\n<p>From what I gather:</p>\n\n<ol>\n<li>Commit and fast commit are the exact same thing, all commits are fast commits.</li>\n<li>A fast commit essentially only updates the flag in the transaction table of the undo/rollback segment header to indicate that the transaction has committed. However, the actual block is not revisited meaning that the undo byte address (UBA) in the interested transaction list (ITL) which is located in the header of the data block still points to the transaction table of the corresponding undo segment. Furthermore, the lock bytes of the corresponding rows are not released and the lock count in the ITL is unchanged (rows still locked).</li>\n<li>In a commit cleanout, the block <em>is</em> revisited and the ITL is updated with the commit SCN. However, the lock count in the ITL and the lock byte stored with each row is still not updated (row still locked just like in fast commit), this does not generate redo even though the block is changed.</li>\n<li>Blocks which were committed normally (== fast committed) will undergo Delayed Block Cleanout when they are next touched (and generate redo).</li>\n<li>Blocks which were underwent commit cleanout will undergo Delayed Logging Block Cleanout\nwhen they are next touched (and generate redo).</li>\n</ol>\n\n<p>Hopefully someone can verify these points!\nThanks!</p>\n"},{"tags":["php","javascript","jquery","mysql","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12746771,"title":"How to move data from Oracle to Mysql Database using PHP","body":"<p>I need to move table data from Oracle db to Mysql db, using PHP.\nHowever,it'll be an automated(JQUERY) process, that runs at 5 minute intervals.</p>\n\n<p>Which is better to:</p>\n\n<p>1) copy all table data from Oracle straight into Mysql, thus continously overwriting everything in Mysql?</p>\n\n<p>2) or exporting data first to a CSV (or other external) file. \nThen using PHP to import it into Mysql?</p>\n\n<p>I want to update the Mysql db with only the additional rows that were added into the Oracle db within the last 5 minutes. btw, PHP will be connecting to more than 5 Oracle dbs.</p>\n\n<p>Which method has the least impact on RAM and PROCESSOR power, but still retains efficiency?</p>\n"},{"tags":["oracle","plsql","duplicate-removal","rowid"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":12744428,"title":"Delete duplicate rows - Oracle","body":"<p>Here is an example of some of my data. I am trying to remove all extra data where the QueryID and RoyID are the same as other entries in the table, however, I would like to keep atleast one record. I'm not sure I'll be able to use the min or max functions on the ID column as some of the records have IDs like DEMO_12345 etc. </p>\n\n<pre><code>ID          QUERY_ID ROYALTY_ID\nRTSQR1652   SQ1421  ROY25644005\nRTSQR1653   SQ1421  ROY25636406\nRTSQR1654   SQ1421  ROY25636557\nRTSQR1655   SQ1421  ROY25636558\nRTSQR1656   SQ1421  ROY25636559\nRTSQR1657   SQ1421  ROY25636560\n</code></pre>\n\n<p>I was thinking to use ROWID instead of ID. Would the following query work?</p>\n\n<pre><code> DELETE FROM RT_SOURCE_QUERY_ROYALTIES WHERE ROWID NOT IN (\n SELECT MAX(ROWID) FROM RT_SOURCE_QUERY_ROYALTIES GROUP BY ROYALTY_ID, QUERY_ID);\n</code></pre>\n"},{"tags":["oracle","jpa","jsf-2","jpa-2.0"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12742826,"title":"How do i know id before saving object in jpa","body":"<p>I have a new object.I want to know id before saving it .is it possible ? Or there is another way for this? I am using jpa as orm and oracle as database.</p>\n\n<pre><code>@Id\n@Basic(optional = false)\n@Column(name = \"ID\", nullable = false)\n@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"woTypeSeq\")\nprivate Long id;\n</code></pre>\n\n<p>I have a code field in my entity.And if user dont enter value for code field,i want to set code as entity's id.If i persist entity,of course i can get id and set code value as id.But this is extra query database.Sorry my english..</p>\n\n<p>I want to do something like that</p>\n\n<pre><code>if(entity.getCode()==null){\n      entity.setCode(entity.getId);\n     jpaDao.saveOrUpdate(entity);\n}\n</code></pre>\n"},{"tags":["sql","oracle","subquery"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12743539,"title":"Not able to adress field in nested query","body":"<p>I have such a query:</p>\n\n<pre><code>select d.r_object_id,\n\n    (select max(max_date) from (\n\n        SELECT max(sys_s.r_modify_date) AS max_date\n        FROM kc_mission_s mis_s, dm_sysobject_s sys_s\n        WHERE mis_s.r_object_id = sys_s.r_object_id AND mis_s.ka_document = d.r_object_id\n\n        union all\n\n        SELECT sys_s.r_modify_date AS max_date\n        FROM dm_document_s doc_s left join dm_sysobject_s sys_s on doc_s.r_object_id = sys_s.r_object_id\n        WHERE doc_s.r_object_id = d.r_object_id\n\n    )) as maxx\n\nfrom kc_document_s d\n</code></pre>\n\n<p>The field <code>d.r_object_id</code> is not visible from the last nested query.\nIt will be visible if in-between query will be removed like this:</p>\n\n<pre><code>select d.r_object_id,\n\n    (\n        SELECT max(sys_s.r_modify_date) AS max_date\n        FROM kc_mission_s mis_s, dm_sysobject_s sys_s\n        WHERE mis_s.r_object_id = sys_s.r_object_id AND mis_s.ka_document = d.r_object_id\n\n        union all\n\n        SELECT sys_s.r_modify_date AS max_date\n        FROM dm_document_s doc_s left join dm_sysobject_s sys_s on doc_s.r_object_id = sys_s.r_object_id\n        WHERE doc_s.r_object_id = d.r_object_id\n\n    ) as maxx\n\nfrom kc_document_s d\n</code></pre>\n\n<p>But in this case I'm not allowed to select multiple rows.\nWhat should I do?</p>\n"},{"tags":["sql","database","oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12735145,"title":"SQL Script to validate two databases","body":"<p>I've been tasked with writing a script to validate data that is being downloaded from one database (db1) to another (db2) during a nightly download by a 3rd party.</p>\n\n<p>db1 is normalized while db2 is not. The data should be 1 to 1 and my company wants me to prove that because the information is critical and has to be correct.</p>\n\n<p>I have never done this sort of thing and have never used Oracle before (MSSQL is what I normally use) so I wonder:</p>\n\n<ul>\n<li>What is the best approach/ best practices code wise/documentation\nwise?</li>\n<li>What should I be aware of using Oracle?</li>\n</ul>\n\n<p>I would consider myself a little more advanced than Junior but I've only been doing SQL development for a few years. So anything else you might be able to think of would be a big help.</p>\n"},{"tags":["oracle","node.js"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12745236,"title":"Install db-oracle for node js","body":"<p>While I try to install db-oracle for node js in Terminal of mac OS. Getting the below error.\nPlease help.</p>\n\n<p>The error list I get is as follows on npm install db-oracle</p>\n\n<p>unameits-Mac-mini:InstantClient vinod$ npm install db-oracle npm http GET <a href=\"https://registry.npmjs.org/db-oracle\" rel=\"nofollow\">https://registry.npmjs.org/db-oracle</a> npm http 304 <a href=\"https://registry.npmjs.org/db-oracle\" rel=\"nofollow\">https://registry.npmjs.org/db-oracle</a></p>\n\n<p>db-oracle@0.2.3 install /usr/InstantClient/node_modules/db-oracle node-waf configure build</p>\n\n<p>Checking for program g++ or c++ : /usr/bin/g++</p>\n\n<p>Checking for program cpp : /usr/bin/cpp</p>\n\n<p>Checking for program ar : /usr/bin/ar</p>\n\n<p>Checking for program ranlib : /usr/bin/ranlib</p>\n\n<p>Checking for g++ : ok</p>\n\n<p>Checking for node path : not found</p>\n\n<p>Checking for node prefix : ok /usr/local/Cellar/node/0.8.11</p>\n\n<p>Checking for header occi.h : Missing include files for OCI</p>\n\n<p>/usr/InstantClient/node_modules/db-oracle/wscript:42: error: the configuration failed (see '/usr/InstantClient/node_modules/db-oracle/build/config.log')</p>\n\n<p>db-oracle@0.2.3 preuninstall /usr/InstantClient/node_modules/db-oracle rm -rf build/*</p>\n\n<p>npm ERR! db-oracle@0.2.3 install: node-waf configure build</p>\n\n<p>npm ERR! sh \"-c\" \"node-waf configure build\" failed with 1</p>\n\n<p>npm ERR!</p>\n\n<p>npm ERR! Failed at the db-oracle@0.2.3 install script.</p>\n\n<p>npm ERR! This is most likely a problem with the db-oracle package,</p>\n\n<p>npm ERR! not with npm itself.</p>\n\n<p>npm ERR! Tell the author that this fails on your system:</p>\n\n<p>npm ERR! node-waf configure build</p>\n\n<p>npm ERR! You can get their info via:</p>\n\n<p>npm ERR! npm owner ls db-oracle</p>\n\n<p>npm ERR! There is likely additional logging output above.</p>\n\n<p>npm ERR! System Darwin 11.3.0</p>\n\n<p>npm ERR! command \"/usr/local/Cellar/node/0.8.11/bin/node\" \"/usr/local/bin/npm\" \"install\" \"db-oracle\"</p>\n\n<p>npm ERR! cwd /usr/InstantClient</p>\n\n<p>npm ERR! node -v v0.8.11</p>\n\n<p>npm ERR! npm -v 1.1.62</p>\n\n<p>npm ERR! code ELIFECYCLE</p>\n\n<p>npm ERR!</p>\n\n<p>npm ERR! Additional logging details can be found in:</p>\n\n<p>npm ERR! /usr/InstantClient/npm-debug.log</p>\n\n<p>npm ERR! not ok code 0</p>\n"},{"tags":["oracle","analytics","minimum-size"],"answer_count":4,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":421,"score":6,"question_id":1033780,"title":"Oracle Analytic Question","body":"<p>Given a function zipdistance(zipfrom,zipto) which calculates the distance (in miles) between two zip codes and the following tables:</p>\n\n<pre><code>create table zips_required(\n   zip varchar2(5)\n);\n\ncreate table zips_available(\n   zip varchar2(5),\n   locations number(100)\n);\n</code></pre>\n\n<p>How can I construct a query that will return to me each zip code from the zips_required table and the minimum distance that would produce a sum(locations) >= n.</p>\n\n<p>Up till now we've just run an exhaustive loop querying for each radius until we've met the criteria.  </p>\n\n<pre><code>--Do this over and over incrementing the radius until the minimum requirement is met\nselect count(locations) \nfrom zips_required zr \nleft join zips_available za on (zipdistance(zr.zip,za.zip)&lt; 2) -- Where 2 is the radius\n</code></pre>\n\n<p>This can take a while on a large list.  It feels like this could be done with an oracle analytic query along the lines of:</p>\n\n<pre><code>min() over (\n  partition by zips_required.zip \n  order by zipdistance( zips_required.zip, zips_available.zip)\n  --range stuff here?\n)\n</code></pre>\n\n<p>The only analytic queries I have done have been \"row_number over (partition by order by)\" based, and I'm treading into unknown areas with this.  Any guidance on this is greatly appreciated.</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12719150,"title":"Row Filter Using Distinct","body":"<p>This is master table Query </p>\n\n<pre><code>Select * \nfrom AC_TAB \nwhere AC_ID = 7 ; \n\nAC_PK AC_ID TYPE  STATUS   INS_DATE               VALID\n102   7     0     0        3/21/2012 3:35:08 PM   0 \n103   7     1     0        3/21/2012 3:35:08 PM \n104   7     2     1        3/21/2012 3:35:08 PM \n</code></pre>\n\n<p>I am joining this table with txn table using <code>ac_id</code>. Since here its having 3 rows for ac_id 7 , my txn table returning 3 times. how to restrict this. since i want to return only one irrespective of type </p>\n\n<p>MY Txn Query </p>\n\n<pre><code>Select txn_id, amount \nfrom txn_hdr , ac_tab \nwhere txn_ac_id = ac_id ;\n\ntxn_id  amount   \n 1       200 \n 1       200 \n 3       100 \n 3       100 \n</code></pre>\n"},{"tags":["oracle","node.js","oracle10g"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12744013,"title":"Install oracle module for node js","body":"<p>I need to connect node js with oracle db in MAC Terminal. \nSo, for the installation tried the steps in the link <a href=\"https://github.com/nearinfinity/node-oracle\" rel=\"nofollow\">https://github.com/nearinfinity/node-oracle</a> \nI have set the below paths after copying the instant client files from oracle link to a folder in path /usr/InstantClient/</p>\n\n<p><code>$ export OCI_INCLUDE_DIR=/usr/InstantClient/sdk/include</code>\n<code>$ export OCI_LIB_DIR=/usr/InstantClient/</code>\n<code>$ export LD_LIBRARY_PATH=/usr/InstantClient/</code></p>\n\n<p>But, getting error like Error: At least one file failed to compile.</p>\n\n<p>Am I doing any mistakes in setting the path or environment variables? Can anyone provide me steps to install oracle module to use with node in MAC terminal?\nThanks</p>\n\n<p><strong>EDIT</strong>: The error list I get is as follows on <code>npm install db-oracle</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>unameits-Mac-mini:InstantClient vinod$ npm install db-oracle\nnpm http GET https://registry.npmjs.org/db-oracle\nnpm http 304 https://registry.npmjs.org/db-oracle\n\n&gt; db-oracle@0.2.3 install /usr/InstantClient/node_modules/db-oracle\n&gt; node-waf configure build\n\nChecking for program g++ or c++          : /usr/bin/g++ \nChecking for program cpp                 : /usr/bin/cpp \nChecking for program ar                  : /usr/bin/ar \nChecking for program ranlib              : /usr/bin/ranlib \nChecking for g++                         : ok  \nChecking for node path                   : not found \nChecking for node prefix                 : ok /usr/local/Cellar/node/0.8.11 \nChecking for header occi.h               : Missing include files for OCI \n/usr/InstantClient/node_modules/db-oracle/wscript:42: error: the configuration failed (see '/usr/InstantClient/node_modules/db-oracle/build/config.log')\n&gt; db-oracle@0.2.3 preuninstall /usr/InstantClient/node_modules/db-oracle\n&gt; rm -rf build/*\nnpm ERR! db-oracle@0.2.3 install: `node-waf configure build`\nnpm ERR! `sh \"-c\" \"node-waf configure build\"` failed with 1\nnpm ERR! \nnpm ERR! Failed at the db-oracle@0.2.3 install script.\nnpm ERR! This is most likely a problem with the db-oracle package,\nnpm ERR! not with npm itself.\nnpm ERR! Tell the author that this fails on your system:\nnpm ERR!     node-waf configure build\nnpm ERR! You can get their info via:\nnpm ERR!     npm owner ls db-oracle\nnpm ERR! There is likely additional logging output above.\n\nnpm ERR! System Darwin 11.3.0\n\nnpm ERR! command \"/usr/local/Cellar/node/0.8.11/bin/node\" \"/usr/local/bin/npm\" \"install\" \"db-oracle\"\n\nnpm ERR! cwd /usr/InstantClient\nnpm ERR! node -v v0.8.11\nnpm ERR! npm -v 1.1.62\nnpm ERR! code ELIFECYCLE\nnpm ERR! \nnpm ERR! Additional logging details can be found in:\nnpm ERR!     /usr/InstantClient/npm-debug.log\n\nnpm ERR! not ok code 0\n</code></pre>\n\n<hr>\n\n<p>The error list I get is as follows on npm install db-oracle</p>\n\n<p>unameits-Mac-mini:InstantClient vinod$ npm install db-oracle\nnpm http GET <a href=\"https://registry.npmjs.org/db-oracle\" rel=\"nofollow\">https://registry.npmjs.org/db-oracle</a>\nnpm http 304 <a href=\"https://registry.npmjs.org/db-oracle\" rel=\"nofollow\">https://registry.npmjs.org/db-oracle</a></p>\n\n<blockquote>\n  <p>db-oracle@0.2.3 install /usr/InstantClient/node_modules/db-oracle\n  node-waf configure build</p>\n</blockquote>\n\n<p>Checking for program g++ or c++          : /usr/bin/g++ </p>\n\n<p>Checking for program cpp                 : /usr/bin/cpp </p>\n\n<p>Checking for program ar                  : /usr/bin/ar </p>\n\n<p>Checking for program ranlib              : /usr/bin/ranlib </p>\n\n<p>Checking for g++                         : ok  </p>\n\n<p>Checking for node path                   : not found </p>\n\n<p>Checking for node prefix                 : ok /usr/local/Cellar/node/0.8.11 </p>\n\n<p>Checking for header occi.h               : Missing include files for OCI </p>\n\n<p>/usr/InstantClient/node_modules/db-oracle/wscript:42: error: the configuration failed (see '/usr/InstantClient/node_modules/db-oracle/build/config.log')</p>\n\n<blockquote>\n  <p>db-oracle@0.2.3 preuninstall /usr/InstantClient/node_modules/db-oracle\n  rm -rf build/*</p>\n</blockquote>\n\n<p>npm ERR! db-oracle@0.2.3 install: <code>node-waf configure build</code></p>\n\n<p>npm ERR! <code>sh \"-c\" \"node-waf configure build\"</code> failed with 1</p>\n\n<p>npm ERR! </p>\n\n<p>npm ERR! Failed at the db-oracle@0.2.3 install script.</p>\n\n<p>npm ERR! This is most likely a problem with the db-oracle package,</p>\n\n<p>npm ERR! not with npm itself.</p>\n\n<p>npm ERR! Tell the author that this fails on your system:</p>\n\n<p>npm ERR!     node-waf configure build</p>\n\n<p>npm ERR! You can get their info via:</p>\n\n<p>npm ERR!     npm owner ls db-oracle</p>\n\n<p>npm ERR! There is likely additional logging output above.</p>\n\n<p>npm ERR! System Darwin 11.3.0</p>\n\n<p>npm ERR! command \"/usr/local/Cellar/node/0.8.11/bin/node\" \"/usr/local/bin/npm\" \"install\" \"db-oracle\"</p>\n\n<p>npm ERR! cwd /usr/InstantClient</p>\n\n<p>npm ERR! node -v v0.8.11</p>\n\n<p>npm ERR! npm -v 1.1.62</p>\n\n<p>npm ERR! code ELIFECYCLE</p>\n\n<p>npm ERR! </p>\n\n<p>npm ERR! Additional logging details can be found in:</p>\n\n<p>npm ERR!     /usr/InstantClient/npm-debug.log</p>\n\n<p>npm ERR! not ok code 0</p>\n"},{"tags":["sql","oracle"],"answer_count":5,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":3560,"score":3,"question_id":4089771,"title":"Oracle Not Equals Operator","body":"<p>There are two not equals operator - <code>!=</code> and <code>&lt;&gt;</code>. </p>\n\n<p>What's the difference between them? I heard <code>!=</code> is more efficient than other for comparing strings. Could anyone qualitative comment on this stmt.</p>\n"},{"tags":["oracle","select","insert","row","multirow"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12740749,"title":"Oracle, insert multirows from subquery with more than one row","body":"<p>Im trying to copy some field from a table to other, I want to do iy by using insert with a subquery like this:</p>\n\n<pre><code>insert into sed_reporte_generico \n(srg_usuario, \nsrg_nombres,\nsrg_ape_paterno,\nsrg_ape_materno,\nsrg_objetivo,\nsrg_peso_ob,\nsrg_calf_ob)\nvalues\n(\n(select us.su_st_usuario, us.su_st_nombres, us.su_st_ap_paterno, us.su_st_ap_materno,     ob.soc_st_descripcion, ob.soc_nr_peso,ob.soc_nr_calificacion \nfrom sed_objetivo ob, sed_usuarios us, sed_evaluacion ev \nwhere ob.se_evaluacion_pk = ev.se_evaluacion_pk and ev.su_colaborador_fk =     us.su_usuarios_pk)\n);\n</code></pre>\n\n<p>but I got this error:</p>\n\n<pre>\n01427. 00000 -  \"single-row subquery returns more than one row\"\n</pre>\n\n<p>any idea how should I do this?</p>\n\n<p>Thanks,</p>\n"},{"tags":["sql","oracle","indices"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12742833,"title":"SQL/Oracle: SELECT with OR on table with two indices","body":"<p>I have a table in an Oracle DB wich has two indices, one for table field A, one for table field B. Now I need to select all records that have a specific value in field A or another specific value in field B.</p>\n\n<p>To make use of the indices I could of course make one SELECT on field A and then another SELECT on field B. So I can make sure both indices are being used.</p>\n\n<p>However, I would rather do that with one SELECT and both fields in the WHERE clause connected with OR. In such a case and my setup as described above, do you know whether Oracle is smart enough to make use of my two indices, or isn't that possible so that I should stick with those two SELECTs?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","sql","oracle","jdbc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12742809,"title":"Oracle DB connection error: package is sealed","body":"<p>While trying to execute a sql query i got an exception:</p>\n\n<blockquote>\n  <p>java.lang.SecurityException: sealing violation: package oracle.jdbc.driver is sealed</p>\n</blockquote>\n\n<p>Looks lite there is conflict between jdbc drivers. Has anyone faced such problem? Thanks.</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12738782,"title":"calculate gpa oracle pl sql","body":"<p>I am a noobie in pl/sql. I am trying t calculate gpa using pl sql. i have created a table with grades with values in it. </p>\n\n<pre><code>SSN             CNO           GRADE\n--------------- -------- ----------\n55555           cs101             1\n55555           math101           4\n55555           bio101            1\n55555           cgdd101           3\n55555           swe203            3\n55555           eng101            3\n11111           bio101            4\n11111           cgdd101           4\n55555           cs101             1\n55555           math101           4\n55555           bio101            1\n</code></pre>\n\n<p>I am trying to calculate gpa with the following pl sql function but I get the following error.</p>\n\n<pre><code>55555           eng101            3\n\n36 rows selected.\n\nSQL&gt; create or replace function get_count\n  2  return is\n  3  declare\n  4  v_count number;\n  5  begin\n  6  select count(*) into v_count from grade;\n  7  return grade;\n  8\n  9  end;\n 10  /\n\nWarning: Function created with compilation errors.\n\nSQL&gt; show errors\nErrors for FUNCTION GET_COUNT:\n\nLINE/COL ERROR\n-------- -----------------------------------------------------------------\n2/8      PLS-00103: Encountered the symbol \"IS\" when expecting one of the\n         following:\n         &lt;an identifier&gt; &lt;a double-quoted delimited-identifier&gt; self\n         long double ref char time timestamp interval date binary\n         national character nchar\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12358188,"title":"SQL error ORA 01427","body":"<p>I am trying to update one of the columns in my table by collecting the values from another table in the data store using this query </p>\n\n<pre><code>UPDATE tablename PT\nSET DID = (select distinct(did) from datastore.get_dept_alias\nwhere upper(ltrim(rtrim(deptalias))) = upper(ltrim(rtrim(PT.\"Dept Descr\")))\nAND cid = PT.CID)\n</code></pre>\n\n<p>Note: Both the column names in the table are the same as entered </p>\n\n<p>I get ORA 01427 error. Any idea about the issue?\nI am trying to understand the other posts of this ORA error</p>\n"},{"tags":["sql","oracle","syntax","script","ora-00905"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12738908,"title":"SQL / ORACLE Missing keyword","body":"<p>I am working on an sql file trying to make a script which brings back either all the data from the tables shown or all the data from the tables plus 3 months back of data. I keep getting an error that says  <code>error 00905 missing keyword</code> and I don't understand why. </p>\n\n<p>I looked at the syntax and it all looks right to me. I will put a marker at the point it says the error occurred(at the first inner join). I changed all the table names to make it look better since it's over the syntax. </p>\n\n<p>Any help would be great thank you. This is only a section of the code but I'm sure it has to be in here.</p>\n\n<pre><code>WHEN Table_typ_cde = '1' -- Pulling all data --\n  THEN\n    INNER JOIN  Table   acp ON Table_oid = Table_oid\n    INNER JOIN  Table   loss ON Table_oid = Table_oid\n    LEFT OUTER JOIN Table veh ON Table_oid = Table_oid and Table_nbr=1\n    INNER JOIN Table   brnch ON Table_OID = Table_oid\n    INNER JOIN Table   a ON Table_OID = Table_oid\n    INNER JOIN Table   c Table_OID = Table_oid\n    INNER JOIN Table   s ON Table_OID = Table_oid\n    INNER JOIN Table   r ON Table_OID = Table_oid\n    INNER JOIN Table   grp ON Table_oid = Table_oid\n    INNER JOIN Table on Table_id = Table_id\n    WHERE Table_ID &lt;&gt; 2\n WHEN Table_cde = '2' -- Pulling all data within the last 3 months along with all present data --\n THEN\n    INNER JOIN  Table   acp ON Table_oid = Table_oid\n    INNER JOIN  Table   loss ON Table_oid = Table_oid\n    LEFT OUTER JOIN Table veh ON Table_oid = Table_oid and Table_nbr=1\n    INNER JOIN Table   brnch ON Table_OID = Table_oid\n    INNER JOIN Table   a ON Table_OID = Table_oid\n    INNER JOIN Table   c ON Table_OID = Table_oid\n    INNER JOIN Table   s ON Table_OID = Table_oid\n    INNER JOIN Table   r ON Table_OID = Table_oid\n    INNER JOIN Table   grp ON Table_oid = Table_oid\n    INNER JOIN Table on Table_id = Table_id\n    WHERE Table_ID &lt;&gt; 2\n    AND df.DATE_CREATED BETWEEN ADD_MONTHS(SYSDATE, -6)\n    AND sysdate\nEND                                         \n) core\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12740118,"title":"a simpler sql query","body":"<p>I have a the following tables</p>\n\n<ul>\n<li>students(sid, sname, age) </li>\n<li>course(cid, cname, duration) </li>\n<li>enroll(sid, cid, date) </li>\n</ul>\n\n<p>To find all sid's who had taken the courses which sid = 1 has taken.</p>\n\n<pre><code>select sid from enroll where cid in (select cid from enroll where sid=1) \ngroup by sid having count(*)=(select count(*) from enroll where sid=1) \nminus (select sid from student where sid=1);\n</code></pre>\n\n<ol>\n<li>What does the first count(*) refers to?</li>\n<li>Is there a simpler version of the query?</li>\n</ol>\n"},{"tags":["c#","oracle","parameters","out"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":264,"score":0,"question_id":10443587,"title":"C# -Do I have to add out parameter to parameters collection","body":"<p>I have a stored procedure that has an OUT parameter of type SYS_REFCUROR. From C# before executing the procedure I add all the parameters except for that OUT parameter. But when I execute the procedure I get \"wrong number or types of arguments \" error. My question is if I'm not going to assign any value to that parameter why do I have to add it to my parameters collection?</p>\n"},{"tags":["xml","database","oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":78,"score":3,"question_id":12385387,"title":"How to handle a NULL Stored Proc return arg in Oracle XML DB Native Web Services?","body":"<p>I have a simple Oracle Package containing a simple Stored Procedure. The Stored Procedure declares 1 IN argument and several OUT arguments. </p>\n\n<p>As long as the OUT arguments contain values I can successfully call the Stored Procedure using XML DB Native Web Services.</p>\n\n<p>But if any of the OUT arguments contain NULL, I get a SOAP Fault containing an ORA-01405 Fetched column value is null.</p>\n\n<p>I can see that there are options for handling NULL values when invoking SQL (using the <code>&lt;null_handling&gt;</code> element, but does anybody know how to do the same with PL/SQL ?</p>\n\n<p>...</p>\n\n<pre><code>-- create a test table\nCREATE TABLE xmldb_test\n(\n   key_value varchar2(32)\n   ,value1 varchar2(32)\n   ,value2 varchar2(32)\n   ,value3 varchar2(32)\n);\n\n-- populate the table\ninsert into xmldb_test values ('key1', 'value1', 'value2', 'value3');\ninsert into xmldb_test values ('key2', 'value4', 'value5', null); -- this row has a null\ncommit;\n\n-- create package\nCREATE OR REPLACE package pack_xmldb_test\nis\nprocedure getDataValue (ca_key in varchar2, ra_value1 out varchar2, ra_value2 out varchar2, ra_value3 out varchar2);\nend;\n\n-- create package body\ncreate or replace package body pack_xmldb_test\nis\nprocedure getDataValue (ca_key in varchar2, ra_value1 out varchar2, ra_value2 out varchar2, ra_value3 out varchar2)\nIS\nBEGIN\n  select value1, value2, value3 \n  into ra_value1, ra_value2, ra_value3\n  from xmldb_test\n  where key_value = ca_key;\nEND;\nend;\n\n-- test the package in pl/sql\ndeclare\nkey_value varchar2(32) := 'key1';\nvalue1 varchar2(32) := 'dog';\nvalue2 varchar2(32) := null;\nvalue3 varchar2(32) := null;\nbegin\ndbms_output.put_line('before call, key_value:' || key_value);\npack_xmldb_test.getDataValue(key_value, value1, value2, value3);\ndbms_output.put_line('after call, value1:' || value1 || ' value2:' || value2 || ' value3:' || value3);\nend;\n\nThe WSDL for the Stored Procedure is at ...\nhttp://node:port/orawsv/schema_name/pack_xmldb_test/getDataValue?wsdl\n\nBuild a soapUI project based on the WSDL, then ...\n\nSending the following request :\n\n&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:get=\"http://xmlns.oracle.com/orawsv/CUSTOMER_FRAUD/PACK_XMLDB_TEST/GETDATAVALUE\"&gt;\n   &lt;soapenv:Header/&gt;\n   &lt;soapenv:Body&gt;\n      &lt;get:GETDATAVALUEInput&gt;\n         &lt;get:RA_VALUE3-VARCHAR2-OUT/&gt;\n         &lt;get:RA_VALUE2-VARCHAR2-OUT/&gt;\n         &lt;get:RA_VALUE1-VARCHAR2-OUT/&gt;\n         &lt;get:CA_KEY-VARCHAR2-IN&gt;key1&lt;/get:CA_KEY-VARCHAR2-IN&gt;\n      &lt;/get:GETDATAVALUEInput&gt;\n   &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n\n... results in a successful call :\n\n&lt;soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n   &lt;soap:Body&gt;\n      &lt;GETDATAVALUEOutput xmlns=\"http://xmlns.oracle.com/orawsv/CUSTOMER_FRAUD/PACK_XMLDB_TEST/GETDATAVALUE\"&gt;\n         &lt;RA_VALUE1&gt;value1&lt;/RA_VALUE1&gt;\n         &lt;RA_VALUE2&gt;value2&lt;/RA_VALUE2&gt;\n         &lt;RA_VALUE3&gt;value3&lt;/RA_VALUE3&gt;\n      &lt;/GETDATAVALUEOutput&gt;\n   &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n\n... but calling with this request :\n\n&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:get=\"http://xmlns.oracle.com/orawsv/CUSTOMER_FRAUD/PACK_XMLDB_TEST/GETDATAVALUE\"&gt;\n   &lt;soapenv:Header/&gt;\n   &lt;soapenv:Body&gt;\n      &lt;get:GETDATAVALUEInput&gt;\n         &lt;get:RA_VALUE3-VARCHAR2-OUT/&gt;\n         &lt;get:RA_VALUE2-VARCHAR2-OUT/&gt;\n         &lt;get:RA_VALUE1-VARCHAR2-OUT/&gt;\n         &lt;get:CA_KEY-VARCHAR2-IN&gt;key2&lt;/get:CA_KEY-VARCHAR2-IN&gt;\n      &lt;/get:GETDATAVALUEInput&gt;\n   &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n\n... results in the following fault :\n\n&lt;soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n   &lt;soap:Body&gt;\n      &lt;soap:Fault&gt;\n         &lt;faultcode&gt;soap:Client&lt;/faultcode&gt;\n         &lt;faultstring&gt;Error processing input&lt;/faultstring&gt;\n         &lt;detail&gt;\n            &lt;OracleErrors xmlns=\"http://xmlns.oracle.com/orawsv/faults\"&gt;\n               &lt;OracleError&gt;\n                  &lt;ErrorNumber&gt;ORA-19202&lt;/ErrorNumber&gt;\n                  &lt;Message&gt;Error occurred in XML processing&lt;/Message&gt;\n               &lt;/OracleError&gt;\n               &lt;OracleError&gt;\n                  &lt;ErrorNumber&gt;ORA-01405&lt;/ErrorNumber&gt;\n                  &lt;Message&gt;fetched column value is NULL&lt;/Message&gt;\n               &lt;/OracleError&gt;\n            &lt;/OracleErrors&gt;\n         &lt;/detail&gt;\n      &lt;/soap:Fault&gt;\n   &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12721979,"title":"I need to declare a variable in oracle view","body":"<p>Basically I have a view  which is having below query as a part of view .</p>\n\n<pre><code>SELECT site_id ch_site_id \n  FROM bfg_router_pi_details \n WHERE last_modified_date &gt; (SELECT MAX (last_time_stamp) \n                               FROM saa_bfg_feed_ctl)\n</code></pre>\n\n<p>Now in this query bfg_router_pi_details  is a view in  another  database and saa_bfg_feed_ctl  is a table in same database from we are firing this query.</p>\n\n<p>Now when This query is fired like above using inner query in where clause, it takes 2 hours to finish as it is going over the db link. however if i replace the inner query with the actual date value it takes 2 minutes. so I am trying to see if there is any way that I can define a variable in view and assign the last time stamp value to that variable and then replace that variable in the  where clause of the query so that execution become s faster. hope you understood the problem in hand. </p>\n"},{"tags":["oracle","entity-framework"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":124,"score":0,"question_id":12738224,"title":"Using Entity Framework and Oracle.Dataaccess.Client - calling stored procedure from a different schema","body":"<p>How do I call a stored procedure, defined in an Oracle package and returns a SYS_REFCURSOR, but only list the bind and metadata information once in the Web.config file?  I have multiple environments that execute the same code, and access their own Oracle database schema - each schema is set up identically with the same tables and packages.</p>\n\n<p>Assume the following setup:\n2 Oracle database schemas - DEV1 and DEV2\nThey are both identical, with the same tables, and packages.\nThey both have a package called PKG1 with a stored procedure defined as SP1.\nSP1 has a SYS_REFCURSOR out parameter that, when returned, contains the set of values retrieved by the SQL statement within SP1.  The idea being that when SP1 is called from the DEV1 schema, that it pulls data out of the DEV1 tables, and when it is called from the DEV2 schema that it pulls data out of the DEV2 tables.</p>\n\n<p>I have used Entity Framework to map and do the Function Import of SP1.  I can call SP1 from my .NET code if I use the DEV1 connection string, but if the DEV2 connection string is used I get the following error message:\n{\"ORA-06550: line 1, column 7:\\nPLS-00306: wrong number or types of arguments in call to 'SP1'\\nORA-06550: line 1, column 7:\\nPL/SQL: Statement ignored\"}   System.Exception {Oracle.DataAccess.Client.OracleException}</p>\n\n<p>Here's the code to call the stored procedure:</p>\n\n<pre><code>string connStr = Common.GetSqlDBConnectionString();\nusing (TestEntities te = new teEntities(connStr))\n{\n    foreach (var result in te.SP1())\n    {\n       // Process each set of returned data\n       ...\n    }\n}\n</code></pre>\n\n<p>Here's the web.config entry:</p>\n\n<pre><code>&lt;oracle.dataaccess.client&gt;\n    &lt;settings&gt;\n        &lt;add name=\"DEV1.PKG1.SP1.RefCursor.ID\" value=\"implicitRefCursor bindinfo='mode=Output'\" /&gt;\n        &lt;add name=\"DEV1.PKG1.SP1.RefCursorMetaData.ID.Column.0\" value=\"implicitRefCursor     metadata='ColumnName=ID;BaseColumnName=ID;BaseSchemaName=DEV1;BaseTableName=TABLE1;NATIVEDATATYPE=number;ProviderType=Int32'\" /&gt;\n    &lt;/settings&gt;\n&lt;/oracle.dataaccess.client&gt;\n</code></pre>\n\n<p>Here's what the SSDL portion of the edmx file lloks like:</p>\n\n<pre><code>&lt;edmx:StorageModels&gt;\n&lt;Schema Namespace=\"Test.Store\" Alias=\"Self\" Provider=\"Oracle.DataAccess.Client\" ProviderManifestToken=\"10.2\" xmlns:store=\"http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator\" xmlns=\"http://schemas.microsoft.com/ado/2009/02/edm/ssdl\"&gt;\n    &lt;EntityContainer Name=\"TestStoreContainer\" /&gt;\n    &lt;Function Name=\"PKG1_SP1\" Aggregate=\"false\" BuiltIn=\"false\" NiladicFunction=\"false\" IsComposable=\"false\" ParameterTypeSemantics=\"AllowImplicitConversion\" StoreFunctionName=\"PKG1.SP1\" Schema=\"\"&gt;\n</code></pre>\n\n<p>I am assuming the problem is with the function import mapping the complex type to the metedata defined in the web.config file that specifies the DEV1 schema, but I certainly could be wrong.  </p>\n"},{"tags":["sql","oracle","datetime-format"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":5185,"score":2,"question_id":1751075,"title":"Convert timestamp/date time from UTC to EST Oracle SQL","body":"<p>I have a field with a date/time value like this:</p>\n\n<pre><code>2009-11-17 18:40:05\n</code></pre>\n\n<p>It's in UTC. In the query how can I convert this to EST?</p>\n\n<p>I'm trying something like this but it throws an error.</p>\n\n<pre><code>// datetime is the field name\nSELECT \n   FROM_TZ(TIMESTAMP TO_DATE(datetime, 'yyyy-mm-dd hh24miss'), 'EST') AS DT\nFROM\n   db_name\n</code></pre>\n"},{"tags":["oracle","oracle10g"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":187,"score":-3,"question_id":8008574,"title":"Creating Multiple tables in Oracle","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/8002394/creating-multiple-table-in-oracle\">Creating Multiple table in Oracle</a>  </p>\n</blockquote>\n\n\n\n<p>I am using Oracle Express 10g and I'm enter the following text to create 2 tables in the sql command line, but it is not working.</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE student (\n    matric_no     VARCHAR2(8),\n    first_name    VARCHAR2(20),\n    last_name     VARCHAR2(20),\n    date_of_birth DATE\n);\n\nCREATE TABLE student1 (\n    matric_no     VARCHAR2(8),\n    first_name    VARCHAR2(20),\n    last_name     VARCHAR2(20),\n    date_of_birth DATE\n);\n</code></pre>\n\n<p>Can anyone see what I am doing wrong.</p>\n\n<p>The error messgae I get is:</p>\n\n<pre><code>ORA-00911: invalid character\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["oracle","plsql","stored-functions","ora-00932"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12736912,"title":"Trying to get table from Oracle function. Get Inconsistent datatypes instead","body":"<p>I'm trying to return a query from a stored function in Oracle.  This simple attempt fails:</p>\n\n<pre><code>CREATE OR REPLACE TYPE GetObjectsForFolderObjectType IS OBJECT (\n       FOLDER_ID NUMBER(9), OBJECT_ID NUMBER(9)\n);\n\nCREATE OR REPLACE TYPE GetObjectsForFolderTableType IS\n       TABLE OF GetObjectsForFolderObjectType;\n\nCREATE OR REPLACE FUNCTION GetObjectsForFolder\n       (FOLDER_ID INTEGER, FOLDER_DATA_TABLE VARCHAR2)\nRETURN GetObjectsForFolderTableType IS \n       THE_RESULT GetObjectsForFolderTableType := GetObjectsForFolderTableType ( );\nBEGIN \n       EXECUTE IMMEDIATE 'SELECT * FROM '||FOLDER_DATA_TABLE BULK COLLECT INTO THE_RESULT;\n       RETURN THE_RESULT;\nEND; \n\nSELECT * FROM TABLE(GetObjectsForFolder(1, 'MY_TABLE_NAME'));\n</code></pre>\n\n<p>The result of the above is</p>\n\n<pre><code>ORA-00932: inconsistent datatypes: expected - got -\nORA-06512: at \"USERNAME.GETOBJECTSFORFOLDER\", line 6\n00932. 00000 -  \"inconsistent datatypes: expected %s got %s\"\n*Cause:    \n*Action:\n</code></pre>\n\n<p>Note: although I've masked some things in the example, the ORA-00932 line does display \"expected - got -\".</p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":49,"score":0,"question_id":12725751,"title":"Insert seq.nextval and other distinct values","body":"<p>I want to make some changes to an existing stored procedure; insert the values in a table, first value will come from sequence and other values have to be distinct.</p>\n\n<pre><code>create SP_Emp()\n.......\ninsert into table_emp(primary_key,name,dept,sal,id)\nselect distict\nseq_emp.nextval,\nfirst_value(name) over partition by(id),\nid as id,\n.....\n.....\nEND;\n</code></pre>\n\n<p>The error it gives is sequence number not allowed here.</p>\n\n<p>I want to insert the values, keeping the <code>seq.nextval</code> and all other values in the row distinct</p>\n\n<p>Previously the procedure was:</p>\n\n<pre><code>create SP_Emp()\n.......\ninsert into table_emp(name,dept,sal,id)\n\nselect distict\n\nfirst_value(name) over partition by(id),\nid as id,\n.....\n.....\n\nEND;\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":52,"score":2,"question_id":12733044,"title":"SQL Find set that wholly contains the given set","body":"<p>I have two tables like so:</p>\n\n<pre><code>create table doi (\n    id number primary key not null,\n    -- Other columns omitted\n);\n\ncreate table doi_membership (\n    id number primary key not null,\n    doi_id number not null, --foreign key to doi.id\n    key_1 number not null,\n    key_2 number not null,\n    -- Other columns omitted\n);\n</code></pre>\n\n<p>I have a set of key_1, key_2 pairs and I want to see if there is a doi that contains the complete set of the given key_1, key_2 pairs and nothing more. I can't seem to think of the SQL necessary to do this. I am using an oracle database if that helps. Any ideas?</p>\n\n<p>Update:</p>\n\n<p>I don't think I explained this very well so I will give an example.</p>\n\n<p>Conceptually, a single DOI contains a list of key_1, key_2 pairs. I have my own list of key_1, key_2 pairs and I want to see if there exists a DOI where its list of pairs exactly matches my list of pairs.</p>\n\n<p>So, lets say there is a DOI that has the following list of key_1, key_2 pairs (each of these rows is a separate doi_membership row related to the same doi):</p>\n\n<pre><code>1, 2\n3, 4\n5, 6\n</code></pre>\n\n<p>And another DOI with the following list of pairs:</p>\n\n<pre><code>1, 2\n3, 4\n5, 6\n7, 8\n</code></pre>\n\n<p>The set of pairs that I have are</p>\n\n<pre><code>1, 2\n3, 4\n5, 6\n</code></pre>\n\n<p>I want to match the first DOI given because its set of pairs and my set of pairs match exactly. The second DOI should <strong>not</strong> be matched.</p>\n\n<p>I hope that clears things up.</p>\n"},{"tags":["c#",".net","oracle","encryption"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12693331,"title":"Different DES Encryption in Oracle and .NET","body":"<p>For some reason, I am getting different encoding results from Oracle <code>DMBS_CRYPTO</code> and .NET implementation of <code>DESCryptoServiceProvider</code> using the same encryption key.</p>\n\n<p>For the DB I am using <code>DBMS_CRYPTO.ENCRYPT</code> function with the following encryption type:</p>\n\n<pre><code>   encryption_type    PLS_INTEGER := DBMS_CRYPTO.ENCRYPT_DES\n                                + DBMS_CRYPTO.CHAIN_CBC\n                                +DBMS_CRYPTO.PAD_PKCS5;\n</code></pre>\n\n<p>The DB Function</p>\n\n<pre><code> FUNCTION encrypt (p_plainText VARCHAR2) RETURN RAW DETERMINISTIC\n IS\n    encrypted_raw      RAW (2000);\n BEGIN\n    encrypted_raw := DBMS_CRYPTO.ENCRYPT\n    (\n       src =&gt; UTL_RAW.CAST_TO_RAW (p_plainText),\n       typ =&gt; encryption_type,\n       key =&gt; encryption_key\n    );\n   RETURN encrypted_raw;\n END encrypt;\n</code></pre>\n\n<p>And here's the C# piece:</p>\n\n<pre><code>            DESCryptoServiceProvider cryptoProvider = new DESCryptoServiceProvider();\n        MemoryStream memoryStream = new MemoryStream();\n        CryptoStream cryptoStream = new CryptoStream(memoryStream,\n            cryptoProvider.CreateEncryptor(bytes, bytes), CryptoStreamMode.Write);\n        StreamWriter writer = new StreamWriter(cryptoStream);\n        writer.Write(originalString);\n        writer.Flush();\n        cryptoStream.FlushFinalBlock();\n        writer.Flush();\n        return Convert.ToBase64String(memoryStream.GetBuffer(), 0, (int)memoryStream.Length);\n</code></pre>\n\n<p>What could be the reason for having different encryption results?</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":102,"score":0,"question_id":12734589,"title":"SQL queries - Finding highest average profit","body":"<p>I have four tables:</p>\n\n<ul>\n<li><code>artist</code>, with these fields: <code>artistid</code>, <code>lastname</code>, <code>firstname</code>, <code>nationality</code>, <code>dateofbirth</code>, <code>dateofdeceased</code></li>\n<li><code>customer</code>, with these fields: <code>customerid</code>, <code>lastname</code>, <code>firstname</code>, <code>street</code>, <code>city</code>, <code>state</code>, <code>zippostalcode</code>, <code>country</code>, <code>areacode</code>, <code>phonenumber</code>, <code>email</code></li>\n<li><code>work</code>, with these fields: <code>workid</code>, <code>title</code>, <code>copy</code>, <code>medium</code>, <code>description</code>, <code>artistid</code></li>\n<li><code>transaction</code>, with these fields: <code>transactionid</code>, <code>dateacquired</code>, <code>acquisitionprice</code>, <code>datesold</code>, <code>askinprice</code>, <code>salesprice</code>, <code>customerid</code>, <code>workid</code></li>\n</ul>\n\n<p>Given the above, how can I figure out:</p>\n\n<p>Which artist has had the most works of art sold, and how many of the artist's work have been sold?</p>\n\n<pre><code>SELECT WORKID, COUNT(WORKID) \n  FROM dtoohey.trans \n  GROUP BY WORKID HAVING COUNT (WORKID)=\n        ( SELECT MAX(mycount) \n               FROM \n                 ( SELECT WORKID, COUNT(WORKID) mycount \n                     FROM dtoohey.trans \n                     GROUP BY WORKID\n                  )\n          )\n</code></pre>\n\n<ol>\n<li>Sales of which artist's works have resulted in the highest average profit (i.e, the average of the profits made on each sale of works by an artist), and what is the amount?</li>\n<li>Customer name of any customers who have an interest in <em>all</em> artists.</li>\n</ol>\n\n<p>?</p>\n"},{"tags":[".net","oracle","continuous-integration","windows-server-2008","odac"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12735570,"title":"How do I integrate Oracle ODAC/ODP.NET into my Continuous Integration Process?","body":"<p>I want to make sure I'm planning this right before I start making server changes. Please confirm if this path is a viable one.</p>\n\n<h2>The Goal</h2>\n\n<ul>\n<li>Utilize Oracle's ODP.NET to code against my currently existing enterprise database on Oracle 11g.</li>\n</ul>\n\n<h2>The Puzzle Pieces</h2>\n\n<ul>\n<li><strong>Dev Machine</strong>: Win7 Enterprise 64-bit</li>\n<li><strong>Servers</strong>: \n<ul>\n<li>Build Server (Windows 2008 R2 Standard)</li>\n<li>Production Server (same)</li>\n</ul></li>\n<li><strong>Dev Environment</strong>: VS 2012</li>\n<li><strong>Dev Stack</strong>: ASP.NET MVC4, WebAPI, C#</li>\n<li><strong>Database</strong>: Oracle 11g R(?)</li>\n<li><strong>CI Server</strong>: CC.NET</li>\n</ul>\n\n<h2>What I Think I'd like to Do:</h2>\n\n<ol>\n<li>Install ODP.NET onto my machine via ODAC (Universal Installer)</li>\n<li>Install ODP.NET onto my build server (via xcopy) </li>\n<li>Create ODBC connections on my machine and build server </li>\n<li>Test ODBC connections</li>\n<li>Test my code locally using Oracle's Provider to connect to the ODBC\nconnection</li>\n<li>Run CI Process like usual</li>\n</ol>\n\n<h2>Question</h2>\n\n<p>Am I setting myself up for any pain by approaching it this way? </p>\n\n<p>The documentation didn't necessarily mention how to set it up or where it fits in but it seems like this should be the way to accomplish what I'm trying to do.</p>\n"},{"tags":["python","oracle","export-to-csv"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12733601,"title":"use python to print query results to pipe delimited file","body":"<p>I am a beginner with python and I am trying to print the results of a query to a pipe delimited file. How can I modify this script to do so?</p>\n\n<pre><code>import cx_Oracle\nimport csv\n\nconnection = cx_Oracle.connect(\"blah blah blah connection stuff\")\ncursor = connection.cursor()\ncursor.execute(\"select column1, column2 from schema.table\")\nresult=cursor.fetchall()\nc = csv.writer(open(\"C:\\mystuff\\output.csv\",\"wb\"))\nc.writerow(result)      \n</code></pre>\n\n<p>Right now it prints out like this \n\"(10001965, '0828442C00548')\",\"(10001985, '0696230C35242')\",\"(10001986, 'C41251')\"</p>\n\n<p>I want it to print pipe delimited and a new line at the end of the row. Thanks for any help!\n10001965|0828442C00548\\n\n10001985|0696230C35242\\n\n10001986|C41251\\n</p>\n"},{"tags":["oracle","oracleforms"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":4679,"score":0,"question_id":3004699,"title":"how I can get text of selected item in list item in oracle forms?","body":"<p>Hi <br>\nList item involved List element and list item value.<br>\nmy list item value is different from their text I want to know how I can get the selected item text.<br>\n(it same az combo box,i need the text of selected item)<br>\nplz help me.<br></p>\n"},{"tags":["oracle","sql-developer","dropbox"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2866,"score":3,"question_id":1101390,"title":"Oracle SQL Developer: sharing configuration via Dropbox","body":"<p>I would like to share my Oracle SQL Developer configuration across my several computers that use Dropbox.</p>\n\n<p>How can I do this?</p>\n"},{"tags":["oracle","escaping","sql-developer"],"answer_count":6,"favorite_count":1,"up_vote_count":20,"down_vote_count":0,"view_count":54735,"score":20,"question_id":1137354,"title":"Oracle pl-sql escape character (for a '&')","body":"<p>While attempting to execute SQL insert statements using <a href=\"http://www.oracle.com/technology/products/database/sql%5Fdeveloper/index.html\" rel=\"nofollow\">Oracle SQL Developer</a> I keep generating a \"Enter substitution value\" prompt:</p>\n\n<pre><code>Insert into AGREGADORES_AGREGADORES (IDAGREGADOR,NOMBRE,URL) values (2,'Netvibes','http://www.netvibes.com/subscribe.php?type=rss\\&amp;amp;url=');\n</code></pre>\n\n<p>I've tried <a href=\"http://download.oracle.com/docs/cd/B10501%5F01/text.920/a96518/cqspcl.htm\" rel=\"nofollow\">escaping the special character in the query</a> using the '\\' above but I still can't avoid the ampersand, '&amp;', causing a string substitution.</p>\n\n<p>Go ahead punks, make my day  :)</p>\n"},{"tags":["oracle","powerbuilder"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":104,"score":0,"question_id":12732789,"title":"Loop through cursor, doing INSERTS during each iteration","body":"<p>I have a cursor <code>c_email</code> that contains a query of email addresses. I need to loop through it, doing insert statements each iteration.</p>\n\n<p>How do you loop through a cursor in powerbuilder, until the cursor is at the end</p>\n\n<p>so far I have the follow: </p>\n\n<pre><code>DECLARE c_email CURSOR FOR\n SELECT email_id\n     ...\n\nOPEN c_email;\nCLOSE c_email;\n</code></pre>\n"},{"tags":["sql","database","oracle","query","timestamp"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":85,"score":0,"question_id":12730681,"title":"How can I update column with type TIMESTAMP in Oracle via sql query?","body":"<p>I have column:</p>\n\n<pre><code>\"LASTTOUCH\" TIMESTAMP(9) NOT NULL ENABLE\n</code></pre>\n\n<p>and I must set current date to this column.</p>\n\n<p>But I have no idea how I can do it.</p>\n\n<p>Could you help me, please?</p>\n"},{"tags":["oracle","triggers","oracle10g","sql-loader","ora-00054"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":371,"score":1,"question_id":1396269,"title":"How do I track down what's re-enabling triggers during my SQL*Loader load?","body":"<p>I seem to be seeing a lot of messages like this in my log:</p>\n\n<pre><code>Trigger DEV.\"MBR_TRG\" was disabled before the load.\nTrigger DEV.\"MBR_TRG\" was re-enabled by another process.\nSQL*Loader-951: Error calling once/load initialization\nORA-00604: error occurred at recursive SQL level 1\nORA-00054: resource busy and acquire with NOWAIT specified\n</code></pre>\n\n<p>This is on my local dev machine, so there shouldn't be anything else trying to insert into these tables.  How can I track down the cause of this?  And is there any way to prevent the triggers from being re-enabled (at least to see if I get an error anywhere in my script)?</p>\n"},{"tags":["database","oracle","spring","transactions","deadlock"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":405,"score":0,"question_id":7300077,"title":"Oracle deadlock without explicit locking and read committed isolation level, why?","body":"<p>I get this error <code>Message: ORA-00060: deadlock detected while waiting for resource</code> even though I am not using any explicit table locking and my isolation level is set to <code>READ COMMITTED</code>.</p>\n\n<p>I use multiple threads over the Spring <code>TransactionTemplate</code> with default propagation. In my business logic the data is separated so that two transaction will never have the same set of data. Therefor I don't need <code>SERIALIZABLE</code></p>\n\n<p>Why can Oracle detect a deadlock? Deadlocks are impossible in this constellation, or am I missing something? If I'm not missing anything then my separation algorithm must be wrong, right? Or could there be some other explaination?</p>\n"},{"tags":["performance","oracle","hints"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12731549,"title":"Oracle query optimization generalquestion","body":"<p>What should be the criteria when the query is being optimized with hints.\nI take it that it is incorrect to use costs in 'explain plan', since Oracle automatically minimize this cost. I other words, it is possible that estimated cost will be higher but actually query is executed faster. Is that correct?</p>\n\n<p>Is the idea above correct? In other words, they point of optimization is that Oracle has imperfect statistic and that leads to not optimal execution plan.</p>\n\n<p>In that case, when tuning a query, I should achieve only minimum execution time, not considering costs. Is that correct?</p>\n\n<p>Thank you</p>\n"},{"tags":["sql","oracle","recursion","hierarchical-data"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":12720269,"title":"Recursion Oracle pl/sql using cursors","body":"<p>I have the following table</p>\n\n<pre><code>CREATE TABLE regions\n(\n        PARENT_NAME     VARCHAR2(30),\n        CHILD_NAME      VARCHAR2(30)\n);\n</code></pre>\n\n<p>I need to perform recursion using cursors in Pl/SQL  like that accepts a region name (CHILD_NAME) from the user input and display all its parent regions.\nAny suggestions?.</p>\n"},{"tags":["sql","oracle","dynamic"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12716711,"title":"Oracle dynamic sql, works everywhere but at customers","body":"<p>I have a stored procedure which executes some dynamic sql, shown below. I've tried to cut it down as much as possible so ignore any little errors.</p>\n\n<p>In the office it works, everytime, on <code>11.2</code>, <code>10.2</code>, <code>10.1</code>. At the customers it fails with a message:</p>\n\n<pre><code>Unexpected Error\n\nError Message = \"Msg:\nMyProc\nORA-06550: line 1, column 1:\nPLS-00103: Encountered the symbol \"\" when expecting one of the following:\n\n   begin case declare exit for function goto if loop mod null\n</code></pre>\n\n<p>If I capture the dynamic sql that the customer is generating and place it in a variable like below, running on work machines, it works, so it's not that dodgy sql is getting generated. Normally the sql comes from the client so here I've doubled the to_date quotes.</p>\n\n<pre><code>mySQL := '\ndeclare \n                pADMINDATE DATE := :1; \n                pEMPLOYEEIDLIKE VARCHAR2(40) := :2; \n                pINCLUDEEMPLOYEE number := :3; \n\nbegin \nBEGIN OTHERPROC.OTHERPROC (1,TO_DATE(''2012-10-03'', ''YYYY-MM-DD''),TO_DATE(''2012-10-03'', ''YYYY-MM-DD''),0); \nEND; \nINSERT INTO TP_EMPLOYEES ( \n        ID, \n            EMPLOYEECODE\n) \n\n\nSELECT ROWNUM, \n       EMPLOYEECODE\nFROM ( \n\nSELECT EMPLOYEECODE\n   FROM (SELECT DISTINCT EMPLOYEECODE FROM TP_EEF_TEMP) DISTINCTEMPCODES) A; \nend; ';\n\nEXECUTE IMMEDIATE\n    mySQL\n    using \n    pADMINDATE,\n    pEMPLOYEEIDLIKE,\n    pINCLUDEEMPLOYEE;\n</code></pre>\n\n<p>It's not the database version that causes the problem, could it be permissions? It calls another stored procedure within itself which we do regularly in non dynamic sql, could it be that?</p>\n\n<p>At a loss here</p>\n\n<p>Thanks</p>\n"},{"tags":["oracle","delphi","reportbuilder"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12729437,"title":"Report Builder - Reporting in Multiple Languages","body":"<p>I need to create 2 reports in ReportBuilder which produce identical output except that one report needs to produce English text and the other in French. The labels/headings on the report will need to be translated from English to French and in some cases the data returned will also have to be translated. </p>\n\n<p>I was thinking about doing this by creating the English statement as a base class then inheriting from this to create the French report, changing the labels as necessary. My question is how is the best way to go about translating the data itself? </p>\n\n<p>I am using Delphi BDS 2006, Oracle 11g and ReportBuild v10 </p>\n"},{"tags":["c++","sql","c","oracle","blob"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12729128,"title":"EXEC SQL LOB WRITE APPEND vs polling (WRITE FIRST, WRITE NEXT, WRITE LAST)","body":"<p>First time approaching LOB's in Oracle DB and stumbled upon something that left me puzzled.</p>\n\n<p>I have to insert a <strong>BLOB</strong> into a column of a row that I'm inserting into a table, with <strong><code>Pro*C</code></strong>. <a href=\"http://bit.ly/O7EiGD\" rel=\"nofollow\">The documentation says</a> that I have two possible choices.</p>\n\n<ol>\n<li>Writing the lob all at once, if it fits the buffer, with <code>EXEC SQL WRITE</code> <strong><code>ONE</code></strong></li>\n<li><p>Writing the lob piecemeal, if the buffer is too small, using what the documentation calls <em>polling</em>, with a sequence made out of these 3 steps:</p>\n\n<ol>\n<li><code>EXEC SQL WRITE</code> <strong><code>FIRST</code></strong> </li>\n<li><code>EXEC SQL WRITE</code> <strong><code>NEXT</code></strong> n times</li>\n<li><code>EXEC SQL WRITE</code> <strong><code>LAST</code></strong> </li>\n</ol></li>\n</ol>\n\n<p>However, I found out that I can replace the <em>polling</em> method as depicted by the documentation simply with <code>EXEC SQL WRITE</code> <strong><code>APPEND</code></strong> n+2 times, making the loop much simpler, intuitive and making it easier to deal with error handling.</p>\n\n<p>So, instead of writing something like this (taken from <a href=\"http://bit.ly/O7EiGD\" rel=\"nofollow\">the documentation</a>):</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>if (filelen &gt; MAXBUFLEN)\n    nbytes = MAXBUFLEN ;\nelse\n    nbytes = filelen ;\n\nfread((void *)buffer, (size_t)nbytes, (size_t)1, fp) ;\nremainder = filelen - nbytes ;\n\nif (remainder == 0)\n{\n   EXEC SQL LOB WRITE ONE :amt\n       FROM :buffer INTO :blob AT :offset ;\n}\nelse\n{\n    EXEC SQL LOB WRITE FIRST :amt\n       FROM :buffer INTO :blob AT :offset ;\n\n    last = FALSE ;\n    EXEC SQL WHENEVER SQLERROR DO break ;\n    do\n    {\n        if (remainder &gt; MAXBUFLEN)\n            nbytes = MAXBUFLEN ;\n        else\n        {\n            nbytes = remainder ;\n            last = TRUE ;\n        }\n\n        if (fread((void *)buffer, (size_t)nbytes, (size_t)1, fp) != 1)\n           last = TRUE ;\n\n        if (last)\n        {  \n            EXEC SQL LOB WRITE LAST :amt\n                FROM :buffer INTO :blob  ;\n        }           \n        else\n        {\n            EXEC SQL LOB WRITE NEXT :amt\n                FROM :buffer INTO :blob;\n        }\n\n        remainder -= nbytes ;\n    }\n    while (!last &amp;&amp; !feof(fp)) ;\n}\n</code></pre>\n\n<p>One could write just this:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>while ((nbytes = remainder &lt; MAXBUFLEN ? remainder : MAXBUFLEN)) \n{\n    if (fread(buffer, nbytes, 1, fp) != 1) {\n        /* Handle error somehow */\n        break;\n    }\n\n    EXEC SQL LOB WRITE APPEND :nbytes \n        FROM :buffer WITH LENGTH :nbytes INTO blob;\n\n    remainder -= nbytes;\n}\n</code></pre>\n\n<p>I tested the second approach thoroughly <strong>without noticing any problems</strong> so I'm left wondering: </p>\n\n<ol>\n<li>is there <strong>something wrong</strong> with the second approach that defies my attention? </li>\n<li><strong>If it's ok</strong> to proceed like in the second approach, what's the need for the polling mechanism made out of 3 steps like <a href=\"http://bit.ly/O7EiGD\" rel=\"nofollow\">the documentation</a> explains?</li>\n</ol>\n"},{"tags":["oracle","select","plsql"],"answer_count":6,"favorite_count":2,"up_vote_count":5,"down_vote_count":1,"view_count":5805,"score":4,"question_id":2514254,"title":"How can I create a \"dynamic\" WHERE clause?","body":"<p><strong>First: Thanks!</strong> </p>\n\n<p>I finished my other project and the big surprise: now everything works as it should :-)\nThanks to some helpful thinkers of SO! </p>\n\n<p><strong>So here I go with the next project.</strong></p>\n\n<p>I'd like to get something like this:</p>\n\n<pre><code>SELECT * FROM tablename WHERE field1=content AND field2=content2 ...\n</code></pre>\n\n<p>As you noticed this can be a very long where-clause.\ntablename is a static property which does not change.\n<code>field1</code>, <code>field2</code> , ... (!) and the contents can change.</p>\n\n<p><em>So I need an option to build up a SQL statement in PL/SQL within a recursive function.\nI dont really know what to search for, so I ask here for links or even a word to search for..</em> </p>\n\n<p>Please dont start to argue about wether the recursive function is really needed or what its disadvanteges - this is <strong>not</strong> in question ;-)</p>\n\n<p>If you could help me to create something like an SQL-String which will later be able to do a successful SELECT this would be very nice!</p>\n\n<p>Iam able to go through the recursive function and make a longer string each time, but I cannot make an SQL statement from it..</p>\n\n<p>Oh, one additional thing: \nI get the fields and contents by a xmlType (xmldom.domdocument etc) I can get the field and the content for example in a clob from the xmltype</p>\n"},{"tags":["sql","oracle","join","self"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12698945,"title":"sql oracle duplicates","body":"<p>Here's my ORACLE table</p>\n\n<pre><code>HAVE******\nasset_no, sub,          add_dtm\n11510     FOX HOLLOW    8/1/2008 8:00:01 AM\n11510     FOX HOLLOW    11/1/2011 1:30:01 PM\n11510     FOX HOLLOW    10/1/2012 8:00:01 AM\n11511     TOWNE NORTH   6/25/2008 5:23:15 PM\n11512     EAST SUB      7/23/2010 2:50:44 PM\n\nWANT******\n11510     FOX HOLLOW    10/1/2012 8:00:01 AM\n11511     TOWNE NORTH   6/25/2008 5:23:15 PM\n11512     EAST SUB      7/23/2010 2:50:44 PM    \n</code></pre>\n\n<p>i have duplicate asset_no in the table as above (11510) with different dates i need the max date for each duplicate asset_no.  When i do a select asset_no, max(add_dtm) i get what i want but i need the 'sub' field too, select asset_no, sub, max(add_dtm), then thats when i get the result shown above.</p>\n"},{"tags":["c++","sql","oracle","mfc","blob"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12633241,"title":"Visual C++, CMap object save to blob column","body":"<p>I have a Microsoft Foundation Class (MFC) CMap object built where each object instance stores 160K~ entries of long data. </p>\n\n<p>I need to store it on Oracle SQL. </p>\n\n<p>We decided to save it as a BLOB since we do not want to make an additional table. We thought about saving it as local file and point the SQL column to that file, but we'd rather just keep it as BLOB on the server and clear the table every couple of weeks.</p>\n\n<p>The table has a sequential key <code>ID</code>, and 2 columns of date/time. I need to add the BLOB column in order to store the CMap object.</p>\n\n<p>Can you recommend a guide to do so (read/write Map to blob or maybe a clob)?</p>\n\n<p>How do I create a BLOB field in Oracle, and how can I read and write my object to the BLOB?  Perhaps using a CLOB?</p>\n"},{"tags":["database","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1025,"score":1,"question_id":4828651,"title":"How to pass parameters to procedure at DBMS.SUBMIT?","body":"<p>I have such a procedure:</p>\n\n<pre><code>    create or replace procedure addJobTest (\n  opisArg varchar2\n)as\n\n  begin\n    insert into JobsTest(opis) values (opisArg);\n\nend addJobTest;\n</code></pre>\n\n<p>I'm trying to use it with <code>DBMS.SUBMIT</code> passing 'ala123' argument</p>\n\n<pre><code>Declare\njobInsertNo number;\nBEGIN\n      DBMS_JOB.SUBMIT (number,\n                   'addJobTest('||''''||'ala123'||''''||');',\n                  SYSDATE,\n                  'SYSDATE + (10/(24*60*60))');\n  COMMIT;  \n  END;\n</code></pre>\n\n<p>but i get an error. It says</p>\n\n<pre><code>ORA-06550: line 5, column 33:\nPLS-00103: Encountered the symbol \"ALA123\" when expecting one of the following:\n   ) , * &amp; | = - + &lt; / &gt; at in is mod remainder not rem =&gt; ..\n   &lt;an exponent (**)&gt; &lt;&gt; or != or ~= &gt;= &lt;= &lt;&gt; and or like LIKE2_\n   LIKE4_ LIKEC_ between || multiset member SUBMULTISET_\nThe symbol \", was inserted before \"ALA123\" to continue.\n06550. 00000 -  \"line %s, column %s:\\n%s\"\n*Cause:    Usually a PL/SQL compilation error.\n*Action:\n</code></pre>\n\n<p>How should I pass a varchar argument to addJobTest procedure at <code>DBMS.SUBMIT</code>?</p>\n"}]}
{"total":22203,"page":16,"pagesize":100,"questions":[{"tags":["c#","oracle","oracle10g"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12722459,"title":"Dynamic Column in Oracle Query?","body":"<p>I have the table named \"prodtable\". the data is as below. </p>\n\n<pre><code>prodTable\n\nProductName Status ProductItem\nProductA     OK    ItemA1\nProductA     OK    ItemA1\nProductA     Err   ItemA1\nProductA     Err   ItemA1\nProductB     OK    ItemB1\nProductB     OK    ItemB1\n</code></pre>\n\n<p>I have to show the output in this format. </p>\n\n<pre><code>ProductItem ProductA  ProductB\nItemA1         2/4     0           -- only two products are ok\nItemB1         0       2/2        -- all are ok\n</code></pre>\n\n<p>To get this output, I have to run the following query in my C# program first.</p>\n\n<pre><code>Select Distinct ProductName from prodTable\nOutput :\n\nProductA\nProductB\n</code></pre>\n\n<p>And I loop this result values(ProducA,ProductB) in my program  and construct the query as below.</p>\n\n<pre><code>   select  ProductItem,\n                  decode\n                   (\n                    ProductName,'ProductA', \n                    TO_CHAR (SUM (DECODE (Status,'OK', 1, 0 )),'999' )  \n                    || '/' || \n                    TO_CHAR (SUM (1), '999'),0) ProductA ,\n                     decode\n                   (\n                    ProductName,'ProductB', \n                    TO_CHAR (SUM (DECODE (Status,'OK', 1, 0 )),'999' )  \n                    || '/' || \n                    TO_CHAR (SUM (1), '999'),0) ProductB  \n\n       from \n(select ProductItem,Status,ProductName from prodTable)\n group by ProductItem,ProductName \n</code></pre>\n\n<p>This is working fine. But, How could I combine this into only one Query?\nThe values of Product Name cannot be hardcoded.\nIt keeps changing. Eg. ProductA... ProductZ</p>\n\n<p>If it's necessary , I can also seperate into two tables. Thanks.</p>\n"},{"tags":["database","oracle","primary-key"],"answer_count":5,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":1725,"score":6,"question_id":3838414,"title":"Can we update primary key values of a table?","body":"<p>Can we update primary key values of a table?</p>\n"},{"tags":["oracle","query","oracle10g","pivot"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12727529,"title":"Oracle pivot query results in a \"command not properly ended\" error","body":"<p>When firing the following query to a 10g Oracle database:</p>\n\n<pre><code>    SELECT * FROM (\n        SELECT T1.ID, T2.ACCT_NO, ROW_NUMBER() OVER (PARTITION BY T1.ID ORDER BY T1.ID DESC) AS RRRRRRR \n        FROM TABLE1 T1\n        INNER JOIN TABLE T2 ON T1.ID = T2.ID\n        WHERE T1.ID = 666\n    )\n    PIVOT (MIN(T1.ID) AS ALIAS1 FOR RRRRRRR IN (1, 2, 3, 4, 5, 6, 7, 8, 9, 10));\n</code></pre>\n\n<p>I get an \"command not properly ended\" error.\nI've searched for Oracle pivot examples and they all pretty much showed the same example.\nWhat am I missing here?</p>\n"},{"tags":["regex","oracle","replace"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":65,"score":3,"question_id":12726450,"title":"Oracle REGEXP_REPLACE uppercase replacement string","body":"<p>I am attempting to uppercase the replacement string from my reg expression without success:</p>\n\n<pre><code>SELECT regexp_replace('src=/i/uie_v2/js','(/uie_v2/)',upper('\\1')) from dual\n</code></pre>\n\n<p>returns <code>'src=/i/uie_v2/js'</code></p>\n\n<p>I understand that upper cannot be used .. just showing as an example. Any ideas on how to achieve this ?</p>\n"},{"tags":["oracle","symfony2","command-line","doctrine","schema"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12722733,"title":" Symfony2  doctrine:schema:drop --force doesn't work","body":"<p>With Symfony 2.0.12 and an Oracle 10g database, I don't understand why my command:</p>\n\n<pre><code>php app/console doctrine:schema:drop --force\n</code></pre>\n\n<p>doesn't work. It tells me: \"Database schema dropped succesfully!\" but I have still few tables in my schema.\nDoes anyone get the same issue ?</p>\n\n<p>I tried with:</p>\n\n<pre><code>php app/console doctrine:schema:drop --force --full-database\n</code></pre>\n\n<p>and i get:</p>\n\n<pre><code>ORA-02264: name already used by an existing constraint\n</code></pre>\n\n<p>And finally after 3 times, my schema is well deleted, but still, I don't understand.</p>\n"},{"tags":["oracle","stored-procedures","plsql","oracle10g","dbms-scheduler"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12722651,"title":"Procedure not executing","body":"<p>I have the following procedure, but no scheduler job is getting created and I cannot find any errors while running the job. How can I debug this and what is wrong with the code?</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE test\nIS\nprod_no varchar2(32);\nprod_date date;\nemployee varchar2(32);\nassurer varchar2(32);\nprod_description varchar2(32);\nprod_days number;\nassig varchar2(32);\nreg_no number;\nl_v number;\n\nBEGIN\n\nprod_no := '300';\nprod_date  := sysdate;\nemployee := 'SAM';\nassurer := 'MAT';\nprod_description := 'test';\nprod_days := 1;\nassig := 'A';\nreg_no := 1;\n\nDBMS_SCHEDULER.create_job (\n                    job_name      =&gt; DBMS_SCHEDULER.generate_job_name ('FR'),\n                    job_type      =&gt; 'PLSQL_BLOCK',\n                    job_action     =&gt;    'BEGIN test_job('\n                                        || i_prod_no\n                                        || ','''\n                                        || prod_date\n                                        || ','''\n                                        || employee \n                                        || ','''\n                                        || assurer\n                                        || ','''\n                                        || prod_description\n                                        || ','''\n                                        || prod_days\n                                        || ','''\n                                        || assig\n                                        || ','''\n                                        || reg_no\n                                        || '''); end;',\n                    start_date     =&gt; SYSDATE,                   \n                    end_date      =&gt; NULL,\n                    enabled         =&gt; TRUE,\n                    comments      =&gt; 'test product'\n                );\n\n    commit;\n\nexception\nwhen others then\n\ndbms_output.put_line (dbms_utility.format_error_stack);\nEND test;\n/\n</code></pre>\n"},{"tags":["sql","oracle","resultset"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":161,"score":2,"question_id":12604291,"title":"Looping on values, creating dynamic query and adding to result set","body":"<p>I have the following problem.  I am an experienced Java programmer but am a bit of a n00b at SQL and PL/SQL.</p>\n\n<p>I need to do the following.</p>\n\n<p>1 Pass in a few arrays and some other variables into a procedure</p>\n\n<p>2 Loop on the values in the arrays (they all have the same number of items) and dynamically create an SQL statement</p>\n\n<p>3 Run this statement and add it to the result set (which is an OUT parameter of the procedure)</p>\n\n<p>I already have experience of creating an SQL query on the fly, running it and adding the result to a result set (which is a REF CURSOR) but I'm not sure how I'd loop and add the results of each call to the query to the same result set.  I'm not even sure if this is possible.</p>\n\n<p>Here's what I have so far (code edited for simplicity).  I know it's wrong because I'm just replacing the contents of the RESULT_SET with the most recent query result (and this is being confirmed in the Java which is calling this procedure).</p>\n\n<p>Any and all help would be greatly appreciated.</p>\n\n<pre><code>TYPE REF_CURSOR IS REF CURSOR;  \n\n\n\n\nPROCEDURE GET_DATA_FASTER(in_seq_numbers IN seq_numbers_array, in_values IN text_array, in_items IN text_array, list IN VARCHAR2, RESULT_SET OUT REF_CURSOR) AS  \n  query_str VARCHAR2(4000);\n\n  seq_number NUMBER;\n  the_value VARCHAR2(10);\n  the_item VARCHAR2(10);\n\n  BEGIN\n\n    FOR i IN 1..in_seq_numbers.COUNT\n    LOOP\n\n      seq_number := in_seq_numbers(i);\n      the_value := trim(in_values(i));\n      the_item := trim(in_items(i));\n\n      query_str := 'SELECT distinct '||seq_number||' as seq, value, item\n      FROM my_table ai';                    \n\n      query_str := query_str || '\n      WHERE ai.value = '''||the_value||''' AND ai.item = '''||the_item||'''\n      AND ai.param = ''BOOK''\n      AND ai.prod in (' || list || ');\n\n      OPEN RESULT_SET FOR query_str;\n\n    END LOOP;\n\n    EXCEPTION WHEN OTHERS THEN\n      RAISE;\n\n  END GET_DATA_FASTER;\n</code></pre>\n"},{"tags":["java","oracle","date","time"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":143,"score":0,"question_id":12724756,"title":"date format picture ends before converting entire input string","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/595072/ora-01830-date-format-picture-ends-before-converting-entire-input-string\">ORA-01830: date format picture ends before converting entire input string</a>  </p>\n</blockquote>\n\n\n\n<p>I am getting the system current date and time with the following:        </p>\n\n<pre><code>String months[] = {\"Jan\", \"Feb\", \"Mar\", \"Apr\",\"May\", \"Jun\", \"Jul\", \"Aug\",\"Sep\", \"Oct\",     \"Nov\", \"Dec\"};\nCalendar cal = new GregorianCalendar();\nString month = (months[cal.get(Calendar.MONTH)]);\nint year = cal.get(Calendar.YEAR);\nint day = cal.get(Calendar.DAY_OF_MONTH);\n\nint second = cal.get(Calendar.SECOND);\nint minute = cal.get(Calendar.MINUTE);\nint hour = cal.get(Calendar.HOUR);\n\nString date= day+\"/\"+month+\"/\"+year;\nString time=hour+\":\"+minute+\":\"+second;\n\nps.setString(14, date+\" \"+time);\n</code></pre>\n\n<p>But, now when I try to insert the date and time in the table using prepared statement as above.</p>\n\n<p>The following error comes: </p>\n\n<blockquote>\n  <p>date format picture ends before converting entire input string</p>\n</blockquote>\n\n<p>How can I solve this?</p>\n"},{"tags":["web-services","oracle","mq"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12714236,"title":"how to read and write message to Oracle MQ from webservice?","body":"<p>I have rceived a request that i need to communicate ti Oracle MQ through webservices. because i have other application will interact with webservice to post data to oracle MQ. because this applications is not MQ implemented app. In this how do i need to read and write data into MQ using webservice? What are the techniques are there to monitor whether the message arrived in Queue and make webservice to read it? Please guide me. i am more confused.i am new to this blindly.</p>\n\n<p>this webservice application will be hosted in the demandware application. the webservice application reads the message in the Oracle MQ which is in the form of Xml file and places into the other Message queue which is also in the form of xml. Demandware application periodically invokes the request to webservice to get/ put the message from MQ queue.</p>\n"},{"tags":["linux","oracle","system-administration","database-administration"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":30,"score":0,"question_id":12723743,"title":"Oracle certification","body":"<p>I am working as a system admin where I have to look both OS(UNIX/LINUX) administration as well as Oracle Database Administration works which are used by production servers. I have already cleared RHCE  in 2009. Now I am planning to take the OCA/OCP on 10g . I want to know , will it add any positive points to my career ??? </p>\n"},{"tags":["oracle","oracle10g"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":75,"score":2,"question_id":12722636,"title":"what is the difference between long and long raw data types in Oracle?","body":"<p>My understanding is Long data type can store the actual string(chars), while Long raw data type stores the binary values of the string(chars). Is it right? Can a table have only one long type column?</p>\n"},{"tags":["oracle","oracle11g","tnsnames","tns"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":52,"score":2,"question_id":12626430,"title":"SDU setting in the connection string with oracle 11G","body":"<p>I do not reference the sqlnet.ora file for the look-up and pretty much  provide the following TNS URL for the connectivity and I need to squeeze in a SDU setting in the below connection URL I was wondering where it would go and how the new url will look like?</p>\n\n<p>Here is what I am using: jdbc:oracle:thin:@192.168.191.231:1521:naladomain</p>\n\n<p>I now need to squezze in a custom sdu setting in the above TNS string.How do I do that ? :-)</p>\n\n<p>Thanks!\nNaga</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":5,"view_count":61,"score":-4,"question_id":12723155,"title":"PL/SQL and Oracle SQL","body":"<p>I am required to learn PL/SQL. I would also like to brush up on my SQL.</p>\n\n<p>Would I be right in saying that PL/SQL is it's own language that uses SQL for querying the database?</p>\n\n<p>I am looking to buy books and need to know if I should buy a book about PL/SQL and a seperate book for SQL.</p>\n"},{"tags":["oracle","role"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":24,"score":2,"question_id":12722548,"title":"Create a role without granting it","body":"<p>I would like to create a role connected as SYSTEM. But because I have a lot of schemas with a lot of roles and all of them will be created this way, I don't want the created roles to be granted to SYSTEM (otherwise it eventually will exceed the 148-roles limit). </p>\n\n<p>=> Is that possible to disable the automatic grant on the creator?</p>\n\n<p>NB: for now I work on Oracle 9i but it will soon be upgraded to 11g</p>\n"},{"tags":["javascript","oracle","oracle-apex"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12712504,"title":"Mouseover to bring image in Oracle Apex","body":"<p>I am currently developing application in Apex and I am lost. I have requirement that on hoovering over name/surname column in employee table it should bring image of employee. Image should not be stored in database it should rather by a pointer to... well FTP ? What is best practice to store images for DB but not in DB?\nI understand that it is complex problem that have many steps therefore any help would be greatly appreciated. </p>\n"},{"tags":["performance","oracle","entity-framework-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12472549,"title":"Why is the Entity Framework taking 6 seconds to return a query that is executed in 0.2 seconds","body":"<p>I've boiled this down to a very simple example rather than go into the detail of my specific problem but the example replicates my problem exactly.</p>\n\n<p>I have an Oracle database table that contains jobs. When I have 10 records in that table my LINQ query to return all jobs it executes instantly (&lt; 0.2 sec).</p>\n\n<p>When I have 25,000 records in the table it takes 15 seconds to execute. When I profile the Entity Framework to analyse the query that is being executed I take that query and run it against SQL Developer. It executes instantly (&lt;0.2 sec). I understand that SQL Developer only returns 50 records at a time which is why it gets the better performance.</p>\n\n<p>When I put a Take on my LINQ query to only take 10 records it still takes 6 seconds to execute. When I profile that query and run it in SQL Developer it executes instantly (&lt;0.2).</p>\n\n<p>My question is why is this happening. The queries that the Entity Framework generates for \"Select all from a table of 10\" and \"Select 10 from a table of 25,000\" both take roughly the same amount of time to execute in SQL developer. Why is the second query taking so much longer for the Entity Framework to return?</p>\n\n<p>I've looked at varying options, switching off tracking, compiling the query, querying a generated object context vs querying a manually constructed one. Nothing seems to explain the massive difference. Fundamentally if SQL Developer can execute the query in &lt; 0.2 sec, why can't the Entity Framework. I'm only asking for 10 records.</p>\n"},{"tags":["sql","oracle","compare"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1222,"score":1,"question_id":4040718,"title":"comparing 2 consecutive rows in a recordset","body":"<p>Currently,I have this objective to meet. I need to query the database for certain results. After done so, I will need to compare the records:\nFor example: the query return me with 10 rows of records, I then need to compare: row 1 with 2, row 2 with 3, row 3 with 4 ... row 9 with 10.</p>\n\n<p>The final result that I wish to have is 10 or less than 10 rows of records.</p>\n\n<p>I have one approach currently. I do this within a function, hand have the variables call \"previous\" and \"current\". In a loop I will always compare previous and current which I populate through the record set using a cursor.</p>\n\n<p>After I got each row of filtered result, I will then input it into a physical temporary table.\nAfter all the results are in this temporary table. I'll do a query on this table and insert the result into a cursor and then returning the cursor.</p>\n\n<p>The problem is: how can I not use a temporary table. I've search through online about using nested tables, but somehow I just could not get it working.</p>\n\n<p>How to replace the temp table with something else? Or is there other approach that I can use to compare the row columns with other rows.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>So sorry, maybe I am not clear with my question. Here is a sample of the result that I am trying to achieve.</p>\n\n<p>TABLE X</p>\n\n<pre><code>Column A    B       C       D\n   100      300     99      T1\n   100      300     98      T2\n   100      300     97      T3\n   100      100     97      T4\n   100      300     97      T5\n   101      11      11      T6\n</code></pre>\n\n<p><code>ColumnA</code> is the primary key of the table. <code>ColumnA</code> has duplicates because table X is an audit table that keep tracks of all changes.column D acts as the timestamp for that record.</p>\n\n<p>For my query, I am only interested in changes in column A,B and D. After the query I would like to get the result as below:</p>\n\n<pre><code>Column A    B       D\n   100      300     T1\n   100      100     T4\n   100      300     T5\n   101      11      T6\n</code></pre>\n"},{"tags":["oracle","stored-procedures","mybatis"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":12719689,"title":"How to Pass Java List of Objects to Oracle Stored Procedure Using MyBatis?","body":"<p>I have been googling this for a while and cannot seem to find any real answers.</p>\n\n<p>I have an Oracle stored procedure that has a number of in parameters that have a type that is table of the table rowtype.  So for example:</p>\n\n<p><strong>Declared in the pacakge:</strong></p>\n\n<pre><code>TYPE param1_type_t IS TABLE OF table1%ROWTYPE;\nTYPE param2_type_t IS TABLE OF table2%ROWTYPE;\nTYPE param3_type_t IS TABLE OF table3%ROWTYPE;\n</code></pre>\n\n<p><strong>Oracle Procedure:</strong></p>\n\n<pre><code>PROCEDURE my_proc\n(\n   parameter1    IN param1_type_t,\n   parameter2    IN param2_type_t,\n   parameter3    IN param3_type_t\n)\n</code></pre>\n\n<p>On the java side, I have 3 corresponding Lists of objects representing each of the parameters that are populated in Java.  Is it possible to call the Oracle procedure using MyBatis in this scenario?</p>\n\n<pre><code>&lt;update id=\"callOracleSP\" statementType=\"CALLABLE\"&gt;\n    {CALL my_proc( #{param1, mode=IN},\n                   #{param2, mode=IN},\n                   #{param3, mode=IN}\n                 )\n    }\n&lt;/update&gt;\n</code></pre>\n\n<p>The objects themselves are simple VOs with String and Integer properties and their respective getters and setters.</p>\n\n<p>I am not really sure how to proceed.  Do I need to somehow map the Java object lists to the Oracle types?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":979,"score":-3,"question_id":4292987,"title":"using for loop how to increment any number","body":"<p>Write a program containing a loop that iterates from 1 to 1000 using a variable <code>I</code>, which is incremented each time around the loop. The program should output the value of <code>I</code> every hundred iterations (i.e., the output should be 100, 200, etc).  Display the output on the screen using <code>dbms_output.put_line</code>.</p>\n"},{"tags":["oracle","oracle11g","sqlplus"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":13210,"score":3,"question_id":3004171,"title":"How to display databases in Oracle 11g using SQL*Plus","body":"<p>With help of this command <strong><em><code>show databases;</code></em></strong> I can see databases in <em>MySQL</em>.  </p>\n\n<p>How to show the available databases in <em>Oracle</em>?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12718253,"title":"Oracle SQL -- Using A Date Function to improve a query","body":"<p>I have this query</p>\n\n<pre><code> --Retention by DOC,Users created &gt;= Jan 1,2012--\nSelect \nOne.Date_Of_Concern,\nTwo.Users, \nOne.Retained,\nRound(One.Retained/Two.Users,4) as Perc_Retained\nFrom\n(\nSelect \nTo_Date('2012-sep-09','yyyy-mon-dd')As Date_Of_Concern,\nCount(P.Player_Id) As Retained\nFrom Player P\nWhere\nTrunc(P.Create_Dtime) &gt;= To_Date('2012-Jan-01','yyyy-mon-dd')\n And\n(To_Date('2012-sep-09','yyyy-mon-dd')-Trunc(P.Init_Dtime))&lt;=7\n ) One\nInner Join\n(\nSelect \nTo_Date('2012-sep-09','yyyy-mon-dd')As Date_Of_Concern,\nCount(P.Player_Id) As Users\nFrom Player P\nWhere\nTrunc(P.Create_Dtime) &gt;= To_Date('2012-Jan-01','yyyy-mon-dd')\n) Two On One.Date_Of_Concern = Two.Date_Of_Concern\n</code></pre>\n\n<p>Which Gives Me a Result of 1 Row:</p>\n\n<pre><code>Date_Of_Concern     USERS     RETAINED     PERC_RETAINED\n09-Sep-12            449773    78983        0.1756\n</code></pre>\n\n<p>I would like to improve this query by adding in some sort of date changing methodology. That way, I won't have to run the query each time for 09-sep-12, 10-sep-12, 11-sep-12, and so on. Instead, it will all show up in the same query, like this:</p>\n\n<pre><code>Date_Of_Concern     USERS     RETAINED     PERC_RETAINED\n09-Sep-12            449773    48783        0.1756\n10-Sep-12            449773    46777        0.1600\n11-Sep-12            440773    44852        0.1500\n12-Sep-12            349773    42584         0.1400\n</code></pre>\n"},{"tags":["sql","oracle","tuning"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":12702195,"title":"Tuning my SQL query","body":"<p>Hi I am trying to improvise my query to get better performance.Is any other way of writing my SQL.The question is as below.</p>\n\n<pre><code>SELECT DISTINCT A.name as name,\n                A.gender as gender\nFROM \n(\nSELECT *  \n FROM Students S,\n      Enrollment E,\n      Group1 G,\n      Ingroup I   \n WHERE S.sid = E.sid \n   AND S.sid = I.sid\n   AND I.gid = G.gid \n\n)A,\n(SELECT *\n FROM Students S,\n      Enrollment E,\n      Group1 G,\n      Ingroup I   \n WHERE S.sid = E.sid \n   AND S.sid = I.sid\n   AND I.gid = G.gid \n   AND S.name=\"Andrew Peers\"\n) B\nWHERE A.dept = B.dept\n  AND A.cid  = B.cid\n  AND A.gid  = B.gid; \n</code></pre>\n"},{"tags":["sql","oracle","duplicate-data"],"answer_count":7,"favorite_count":18,"up_vote_count":35,"down_vote_count":0,"view_count":51168,"score":35,"question_id":59232,"title":"How do I find duplicate values in a table in Oracle?","body":"<p>What's the simplest SQL statement that will return the duplicate values for a given column and the count of their occurrences in an Oracle database table?</p>\n\n<p>For example: I have a <code>JOBS</code> table with the column <code>JOB_NUMBER</code>.  How can I find out if I have any duplicate <code>JOB_NUMBER</code>s, and how many times they're duplicated?</p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12718192,"title":"Merge is not returning right data","body":"<p>I have 2 tables:</p>\n\n<pre><code>CREATE TABLE employee (\nemployee_id NUMBER(5),\nfirst_name  VARCHAR2(20),\nlast_name   VARCHAR2(20),\ndept_no     NUMBER(2),\nsalary      NUMBER(10));\n</code></pre>\n\n<p>Table employee has values:</p>\n\n<pre><code>(1, 'Dan', 'Morgan', 10, 100000);\n(2, 'Helen', 'Lofstrom', 20, 100000);\n(3, 'Akiko', 'Toyota', 20, 50000);\n(4, 'Jackie', 'Stough', 20, 40000);\n(5, 'Richard', 'Foote', 20, 70000);\n(6, 'Joe', 'Johnson', 20, 30000);\n(7, 'Clark', 'Urling', 20, 90000);\n\nCREATE TABLE bonuses (\nemployee_id NUMBER, bonus NUMBER DEFAULT 100);\n</code></pre>\n\n<p>Table bonuses has values:</p>\n\n<pre><code>(1,100);\n(2,100);\n(4,100);\n(6,100);\n(7,100);\n</code></pre>\n\n<p>And I did merge based on bonuses table:</p>\n\n<pre><code>MERGE INTO bonuses b\nUSING (\n  SELECT employee_id, salary, dept_no\n  FROM employee\n  WHERE dept_no =20) e\nON (b.employee_id = e.employee_id)\nWHEN MATCHED THEN\n  UPDATE  SET b.bonus = e.salary * 0.1\n  DELETE WHERE (e.salary &lt; 40000)\nWHEN NOT MATCHED THEN\n  INSERT  (b.employee_id, b.bonus)\n  VALUES (e.employee_id, e.salary * 0.05)\n  WHERE (e.salary &gt; 40000);\n</code></pre>\n\n<p>And when I \n    select * from bonuses;</p>\n\n<pre><code>EMPLOYEE_ID BONUS \n------------------\n1           100   \n2           10000 \n3           2500  \n4           4000  \n5           3500  \n7           9000   \n</code></pre>\n\n<p>My question is \"where is my bonuses record for employee_id #6\"?</p>\n"},{"tags":["java","linux","oracle","web-applications","weblogic"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12711973,"title":"DuplicateKeyException being thrown only on Linux WebLogic","body":"<p>I have a relatively simple web application deployed on WebLogic that is using an Oracle database. When I finished developing the app and was ready to deploy it to the actual Linux server that the production WebLogic instance lives on, the app would throw a DuplicateKeyException on all inserts. If I run the app on my local windows machine and point the remote database, the app works just fine. I should also note that all reads from the database work perfectly with no issue in both environments.</p>\n\n<p>I have since removed any primary key constraints on the table just to narrow down the issue, but every time I execute the insert query on the Linux deployment, it fails. Locally using the same code, same remote database, same version of WL (10.3.6) it works perfectly. So the big variable here is that same WAR file throws a DuplicateKeyException on the Linux 10.3.6 WL server, but it doesn't on the Windows. And the Linux instance is actually on an Oracle hosted environment, so while the DB and WL are on different servers, I would think that since my read commands work, the hosted environment shouldn't have anything to do with my inserts failing.</p>\n\n<p>Any suggestions or help on this would be greatly appreciated. I'm not a Linux guy, just a Java developer and am at my wits end on this one. Thanks.</p>\n"},{"tags":["oracle","stored-procedures","plsql","scope","package"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12707204,"title":"Procedure in package specification","body":"<p>I have a package named <strong>save_db_values</strong></p>\n\n<p>I have two procedures named <strong>store_records</strong> and another one called <strong>db_activities</strong>.\n<strong>db_activities</strong> will be called from my application by passing all values in <strong>db_activities</strong> I will be calling <strong>store_records</strong> procedure to do insert and delete.</p>\n\n<p>Do I need to define <strong>store_records</strong> procedure in package specification? When I did not define store_records in specification I am getting error <code>store_records not declared in this scope.</code></p>\n\n<p><strong>store_records</strong> procedure I do not want to expose and hence I did not add in specification.\nHow can I resolve this issue?</p>\n"},{"tags":["asp.net","oracle","gridview","connection"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":112,"score":0,"question_id":12596169,"title":"Oracle Connection Issue with Gridview","body":"<p>I try to connect a oracle database in asp.net. I want to handle connection with SqlDataSource. When I use the code below, I get the following error:</p>\n\n<p>Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.</p>\n\n<blockquote>\n  <p>Exception Details: System.ComponentModel.Win32Exception: The system\n  can not find the file specified.</p>\n  \n  <p>Source Error:</p>\n  \n  <p>[Win32Exception (0x80004005): The system can not find the file\n  specified.]</p>\n  \n  <p>[SqlException (0x80131904): A network-related or instance-specific\n  error occurred while establishing a connection to SQL Server. The\n  server was not found or was not accessible. Verify that the instance\n  name is correct and that SQL Server is configured to allow remote\n  connections. (provider: Named Pipes Provider, error: 40 - Could not\n  open a connection to SQL Server)]</p>\n</blockquote>\n\n<p>Here is the aspx file:</p>\n\n<hr>\n\n<pre><code>&lt;%@ Page Language=\"C#\" AutoEventWireup=\"true\" %&gt;\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org  /TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n&lt;head id=\"Head1\" runat=\"server\"&gt;\n&lt;title&gt;&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;form id=\"form1\" runat=\"server\"&gt;\n&lt;div&gt;\n    &lt;asp:SqlDataSource\n        id=\"SqlDataSource1\"\n        runat=\"server\"\n        DataSourceMode=\"DataReader\"            \n        SelectCommand=\"SELECT * FROM PERSON \"\n        ConnectionString=\"&lt;%$ ConnectionStrings:OracleConnectionString %&gt;\"&gt;\n    &lt;/asp:SqlDataSource&gt;\n\n\n    &lt;asp:GridView ID=\"GridView1\" runat=\"server\" DataSourceID=\"SqlDataSource1\" BackColor=\"WindowFrame\" AllowSorting=\"true\" AllowPaging=\"true\"&gt;\n\n        &lt;Columns&gt;\n            &lt;asp:BoundField HeaderText=\"Numarası\" DataField=\"ID\" /&gt;\n            &lt;asp:BoundField HeaderText=\"Adı\" DataField=\"NAME\" /&gt;\n            &lt;asp:BoundField HeaderText=\"Soyadı\" DataField=\"SURNAME\" /&gt;\n\n        &lt;/Columns&gt;\n\n    &lt;/asp:GridView&gt;\n\n    &lt;br /&gt;\n\n&lt;/div&gt;       \n&lt;/form&gt;\n</code></pre>\n\n<p>\n</p>\n\n<hr>\n\n<p>But I can connect database directly, besides I can connect it with another code file , with the procedure below:</p>\n\n<pre><code>    private void ReadOracleTypesExample(string connectionString)\n    {\n        OracleConnection connection = new OracleConnection(connectionString);\n        connection.Open();\n        OracleCommand command = connection.CreateCommand();\n        try\n        {\n            command.CommandText = \"SELECT * FROM PERSON\";\n            OracleDataReader reader = command.ExecuteReader();\n\n\n        if (reader.HasRows)\n        {\n            while (reader.Read())\n            {\n\n                OracleString oraclesring2 = reader.GetOracleString(1);\n                Label2.Text += (\"&lt;br /&gt;\" + oraclesring2.ToString());\n\n                OracleString oraclestring3 = reader.GetOracleString(2);\n                Label3.Text += (\"&lt;br /&gt; \" + oraclestring3.ToString());\n            }\n        }\n        else\n        {\n            Console.WriteLine(\"No rows found.\");\n        }\n        reader.Close();\n\n    }\n    catch (Exception e)\n    {\n        Label1.Text = e.Message;\n    }\n    finally\n    {\n        connection.Close();\n    }\n}\n</code></pre>\n\n<hr>\n\n<hr>\n\n<p>The oracle database is accessible by the tools outside the c#. I could not imagine why I can not connect to the database, I will run off the rails. Thanks in advance.</p>\n"},{"tags":["c#","asp.net","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":113,"score":0,"question_id":12670017,"title":"asp.net oracle database 3 tier cannot convert string to datetime","body":"<p>I'm working in Asp.net C# 3 tier with oracle database. I create a function for Read and Delete and it is working but for the insert and update I’m getting error of converting string to datetime.</p>\n\n<p>Here is the Business layer code:</p>\n\n<pre><code>        public void InsertSurvey(string SURV_NAME, DateTime SURV_STARTDATE, DateTime S_ENDDATE)\n    {\n\n        try\n        {\n            string str = \"select max(SURV_ID) as max_SURV_ID from SURVEY\";\n            int maxVal = (_dbAccess.returnint32(str));\n            string SURV_ID = Convert.ToString(maxVal);\n            if (string.IsNullOrEmpty(SURV_ID))\n            {\n                maxVal = 1;\n            }\n            else\n            {\n                maxVal++;\n\n            }\n\n            string strInsert = \"SET IDENTITY_INSERT SURVEY ON insert into SURVEY(SURV_ID,SURV_NAME,SURV_STARTDATE,S_ENDDATE) values('\" + maxVal + \"','\" + SURV_NAME + \"','\" + SURV_STARTDATE + \"','\" + S_ENDDATE + \"') SET IDENTITY_INSERT SURVEY OFF\";\n            _dbAccess.executeQuery(strInsert);\n        }\n        catch (Exception ex)\n        {\n            throw ex;\n        }\n\n    }\n</code></pre>\n\n<p>And here is the Submit code from the page code behind for the insert form:</p>\n\n<pre><code>    public partial class Survey_insert_survey : System.Web.UI.Page\n{\n    BusSurvey _objSurvey = new BusSurvey();\n    protected void btnSubmit_Click(object sender, EventArgs e)\n    {\n        _objSurvey.InsertSurvey(txtSURV_NAME.Text, txtSURV_STARTDATE.Text, txtS_ENDDATE.Text);\n        //If records successfully entered then redirect to feedback page\n        Response.Redirect(\"view-survey.aspx\");\n\n    }\n}\n</code></pre>\n\n<p>This the error Im getteing:</p>\n\n<p><img src=\"http://i.stack.imgur.com/NSevW.png\" alt=\"enter image description here\"></p>\n\n<p>Hope I get help </p>\n"},{"tags":["java","javascript","database","oracle","alfresco"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":141,"score":0,"question_id":12698265,"title":"How to Connect to Oracle Database Through Alfresco Javascript API","body":"<p>So I have been working with Alfresco for a project I'm currently working on, and one of the newest requirements for the project is that I pull a sequence number from our Oracle database and populate a custom property within a space in Alfresco.</p>\n\n<pre><code>var conObj = new ActiveXObject('ADODB.Connection');\nvar connectionString = \"Provider=OraOLEDB.Oracle;Data Source=(DESCRIPTION=(CID=GTU_APP)(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=IP ADDRESS)(PORT=XXXX)))(CONNECT_DATA=(SID=your_SID)(SERVER=DEDICATED)));User Id=username;Password=pwd;\"\n                                conObj.Open(connectionString);\n\nvar rs = new ActiveXObject(\"ADODB.Recordset\");\nvar caseID;\n\nsql = \"INSERT INTO case(mod_dt,mod_user) values(sysdate,’user’) RETURNING id\"\n\nrs.Open(sql, conObj);\n\ncaseID = rs(0);\nlogger.log(\"The new case id is: \" + caseID);\n\nrs.close;\n</code></pre>\n\n<p>However, this returned saying:</p>\n\n<p><code>Caused by: org.mozilla.javascript.EcmaError: ReferenceError: \"ActiveXObject\" is not defined. (workspace://SpacesStore/b3145512-e54d-4d9e-9655-0b6ae678e39b#141)</code></p>\n\n<p>Which made me realize Alfresco's Javascript API doesn't have the full functionality of Javascript. I had read something about creating your own java class and calling them from within the Alfresco javascript, but I had not seen any good examples. Does anyone have experience with this or could they demonstrate a simple example of creating a java class to call from within Alfresco Javascript?</p>\n"},{"tags":["php","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12708894,"title":"Oracle Applications R12 and PHP","body":"<p>one of my client asking me to do property listing website, he want do integrate his oracle database to this website, but i don't have any idea about Oracle, is it possible to integrate oracle r12 database with PHP? any suggestions, tutorials, and examples will be highly-appreciated.</p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12716411,"title":"SQLCA.SQLERRD Host array in Pro*C","body":"<p>As we know in numerous of the documentations it is mentioned that the 3rd element of the Host array <code>SQLCA.SQLERRD</code> i.e. <code>sqlca.sqlerrd[2]</code> contains the cumulative number of rows processed  by the SQL statement so far (in terms of Pro*C). </p>\n\n<p>Does someone know of the significance of the other elements i.e. <code>[0]</code>,<code>[1]</code> and what they signify?</p>\n"},{"tags":["sql","performance","oracle"],"answer_count":9,"favorite_count":1,"up_vote_count":7,"down_vote_count":1,"view_count":15903,"score":6,"question_id":636886,"title":"SQL not equals & null","body":"<p>We'd like to write this query:</p>\n\n<pre><code>select * from table \nwhere col1 != 'blah' and col2 = 'something'\n</code></pre>\n\n<p>We want the query to include rows where col1 is null (and col2 = 'something').  Currently the query won't do this for the rows where col1 is null.  Is the below query the best and fastest way?</p>\n\n<pre><code>select * from table \nwhere (col1 != 'blah' or col1 is null) and col2 = 'something'\n</code></pre>\n\n<p>Alternatively, we could if needed update all the col1 null values to empty strings.  Would this be a better approach?  Then our first query would work.</p>\n\n<p><hr /></p>\n\n<p><strong>Update</strong>: Re: using NVL: I've read on another <a href=\"http://stackoverflow.com/questions/191640/get-null-null-in-sql\">post</a> that this is not considered a great option from a performance perspective.</p>\n"},{"tags":[".net","vb.net","oracle","tableadapter","msdatasetgenerator"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":12714604,"title":"Oracle Procs with BETWEEN clause won't come over from server explorer to MSDataSetGenerator","body":"<p>I have an Oracle backend (11) and am using .net 3.5 (VS 2008). I've been using the server explorer and MSDatasetgenerator to pull stored procedures over from a package. This drag and drop of the procedures creates table adapter/table pairs in the dataset generator. However I've discovered that when the sproc uses BETWEEN in the where clause, this doesn't work. The table/table adapter pair isn't generated. </p>\n\n<p>Does anyone know a work around, is this a known issue?</p>\n\n<p>Thanks,</p>\n"},{"tags":["c#","oracle","entity-framework","linq-to-entities"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":106,"score":2,"question_id":12697686,"title":"Linq-to-Entity get primary key back on insert into Oracle","body":"<p>I'm a noob w/ Linq-to-Entity. These are my database tables.</p>\n\n<pre><code>create table Jobs \n( ID            NUMBER PRIMARY KEY,\n  ....\n)\n\ncreate table Responsibilities\n( ID            NUMBER PRIMARY KEY,\n  JobID         NUMBER\n  ....\n)\n</code></pre>\n\n<p>The JobID column is a foreign key that references Jobs(ID).</p>\n\n<p>Using these tables, in Visual Studio I automatically create the classes that allow me to interface to those tables. I then try to create Jobs and insert them into the database. I have triggers on every table to generate a unique ID for each table for the primary key. Below is a snippet of code that creates a Job. </p>\n\n<pre><code>using (Workflow.WorkflowEntities entity = new Workflow.WorkflowEntities(connectionString))\n{\n    JOBS j = new JOBS();\n    entity.AddToJOBS(j);\n    entity.SaveChanges();\n</code></pre>\n\n<p>A problem that I'm having, is that when the Job is saved, I don't get a primary key back for it. This is especially a problem when I want to create Responsibilities objects and add them to the Job and then save everything en masse. Its like it doesn't populate the JobID field correctly in the Responsibilities object. </p>\n\n<p>What is the correct way to do this? Any pointers are greatly appreciated,</p>\n\n<p>mj</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12714144,"title":"Compare sum from 2 different tables","body":"<p>I am trying to compare Sum of quantities between 2 tables on A.BUSINESS_UNIT_PO,A.PO_ID, A.LINE_NBR. The below query doesn't work for me. Can any one of you tell me the problem in this query.</p>\n\n<pre><code>SELECT A.BUSINESS_UNIT_PO,\n       A.PO_ID, \n       A.LINE_NBR \n FROM PS_BCT_DTL A\nWHERE A.BCT_DET_STATUS=1\n  AND SUM(A.QTY) = (SELECT SUM(B.QTY_SH_RECVD) \n                     FROM PS_RECV_LN_SHIP B\n                    WHERE A.BUSINESS_UNIT_PO=B.BUSINESS_UNIT_PO\n                      AND A.PO_ID= B.PO_ID\n                      AND A.LINE_NBR= B.LINE_NBR\n                     )\nGROUP BY A.BUSINESS_UNIT_PO,A.PO_ID, A.LINE_NBR\n</code></pre>\n"},{"tags":["performance","oracle","query","partitioning"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":12711094,"title":"Performance tuning - Query on partitioned vs non-partitioned table","body":"<p>I have two queries, one of which involves a partitioned table in the query while the other query is the same except that it involves the non-partitioned equivalent table. The original (non-partitioned table) query is performing better than the partitioned counter-part. I am not sure how to isolate the problem for this. Looking at the execution plan, I find that the indexes used are the same b/w the two queries and that the new query shows the PARTITION RANGE clause in its execution plan meaning that partition pruning is taking place. The query is of the following form:-</p>\n\n<pre><code>Select rownum, &lt;some columns&gt; \nfrom partTabA \ninner join tabB on condition1\ninner join tabC on condition2\nwhere partTabA.column1=&lt;value&gt; and &lt;other conditions&gt;\nand partTabA.column2 in (select columns from tabD where conditions) \n</code></pre>\n\n<p>where partTabA is the partitioned table and partTabA.column1 is the partitioning key(range partition). In the original query, this gets replaced by the non-partitioned equivalent of the same table. What parameters should I look at to find out why the new query performs badly. Tool that I have is Oracle SQL Developer.</p>\n"},{"tags":["java","database","oracle","odbc","drivers"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":161,"score":0,"question_id":12651304,"title":"Java-Database (oracle) odbc driver mismatch","body":"<p>I am trying to create a database application with java as front end and oracle as the back end.</p>\n\n<p>I have a 64-bit win7 system with 32-bit oracle 10g (10.2) installed.</p>\n\n<p>I created a DSN from/via <code>C:\\Windows\\SysWOW64\\odbcad32.exe</code> because \"control panel/administrative tools/odbc data source\" doesn't show options for \"Microsoft Oracle ODBC\"</p>\n\n<p>But while connecting to the database I get this error: </p>\n\n<pre><code>java.sql.SQLException: [Microsoft][ODBC Driver Manager] The specified DSN contains an architecture mismatch between the Driver and Application\n    at sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6956)\n    at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7113)\n    at sun.jdbc.odbc.JdbcOdbc.SQLDriverConnect(JdbcOdbc.java:3072)\n    at sun.jdbc.odbc.JdbcOdbcConnection.initialize(JdbcOdbcConnection.java:323)\n    at sun.jdbc.odbc.JdbcOdbcDriver.connect(JdbcOdbcDriver.java:174)\n    at java.sql.DriverManager.getConnection(DriverManager.java:579)\n    at java.sql.DriverManager.getConnection(DriverManager.java:221)\n    at InsertRecord.main(InsertRecord.java:28)\n    at __SHELL7.run(__SHELL7.java:6)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:601)\n    at bluej.runtime.ExecServer$3.run(ExecServer.java:724)\n</code></pre>\n\n<p>I assume this is because 64-bit 32-bit clash. if so then if I install odbc driver for 64 bit will it work or I need to install oracle database for win64 all over again.</p>\n\n<p>If the driver would do then from where can I download the driver alone?</p>\n\n<p>any one any help?? i am getting this error while trying to connect to oracle using odbc</p>\n\n<pre><code>Driver loaded\njava.sql.SQLException: [Microsoft][ODBC driver for Oracle][Oracle]ORA-06413: Connection not open.\n    at sun.jdbc.odbc.JdbcOdbc.createSQLException(Unknown Source)\n    at sun.jdbc.odbc.JdbcOdbc.standardError(Unknown Source)\n    at sun.jdbc.odbc.JdbcOdbc.SQLDriverConnect(Unknown Source)\n    at sun.jdbc.odbc.JdbcOdbcConnection.initialize(Unknown Source)\n    at sun.jdbc.odbc.JdbcOdbcDriver.connect(Unknown Source)\n    at java.sql.DriverManager.getConnection(Unknown Source)\n    at java.sql.DriverManager.getConnection(Unknown Source)\n    at InsertRecord.main(InsertRecord.java:28)\njava.lang.NullPointerException\n</code></pre>\n"},{"tags":["sql","oracle","plsql","oracleforms"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":176,"score":1,"question_id":12608330,"title":"GO_BLOCK in WHEN_VALIDATE Trigger","body":"<p>I'm working with oracle forms. I've a procedure I have to run whenever a specific field's value is modified. The procedure I have to execute contains a go_block instruction, which can't be used in the when_validate_item trigger. Is there anyway to bypass this? </p>\n\n<p>EDIT</p>\n\n<p>I have to use the when_validate_item, because the procedure I have to run has to be run when the field is modified, BUT BEFORE the validation is executed.</p>\n"},{"tags":["sql","oracle","insert","subquery","proc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":12711271,"title":"Oracle ProC INSERT INTO VALUES ( (select ...) ) (Not working)","body":"<p>Running Pro*C on Oracle10g.</p>\n\n<p>Hi I am looking to do a subquery within an insert statement values clause. This sql query is fully valid and runs within TOAD with no problems, but Pro*C fails to parse the query.</p>\n\n<pre><code>EXEC SQL INSERT INTO TARGET_ATTACHMENT \n      (\n          TARGET_ID\n          FILENAME\n      ) \n      VALUES ( \n         :targetID,\n         ( SELECT CREATED_FLAG from TARGET t where t.TARGET_ID = :targetID ) || '.tif'\n      )\n</code></pre>\n\n<p>If I remove:</p>\n\n<p>\"<strong>( SELECT (CREATED_FLAG || DISPLAY_ID) from TARGET t where t.TARGET_ID = :targetID ) ||</strong>\". The Pro*C compiler works and everything compiles and runs as expected.</p>\n\n<p>If I DO NOT remove:\nThe Pro*C compiler throws a syntax error.</p>\n\n<pre><code>1&gt;Syntax error at line 128, column 12, file        d:\\SVN\\...\\TA.pc:\n1&gt;Error at line 128, column 12 in file d:\\SVN\\...\n1&gt;...\\TA.pc\n1&gt;                ( select CREATED_FLAG from target t where t.TARGET_ID = :targetID )\n1&gt;...........1\n1&gt;PCC-S-02201, Encountered the symbol \"CREATED_FLAG\" when expecting one of the fol\n1&gt;lowing:\n1&gt;   ( ) * + - / . @ | at, day, hour, minute, month, second, year,\n</code></pre>\n\n<p>This is a problem, as I expect Pro*C to be able to compile subquerys within a values caluse:</p>\n\n<p>ie. </p>\n\n<blockquote>\n  <p>INSERT into table1 (col1) values ( (select t2.singleCol from table2 t2 where t2.priKey\n  = :priKey) )</p>\n</blockquote>\n\n<p>Is this expected behaviour of Pro*C? or Should it support subqueries within the values clause?</p>\n"},{"tags":["oracle","jsp","stored-procedures","plsql","oracle10g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12708640,"title":"Procedure to insert records asynchronously","body":"<p>I have a package where I am calling a procedure to insert records to a table and I am calling this procedure twice with a interval of 2 minutes using <code>sys.DBMS_LOCK.sleep (&lt;&gt;);</code></p>\n\n<p>Problem I facing is my calling form which is from application is still open till the insertion completes.</p>\n\n<p>How can I make sure that when I submit my page and page should close, insertion should happen in backend some kind of asynchronous call. In database procedure are there any asynchronous key word to do this kind of activity?</p>\n\n<p>Thanks</p>\n\n<p>Update</p>\n\n<pre><code>putData(empNo,EmpName);\nsys.DBMS_LOCK.sleep (&lt;&gt;);\nputData(empNo,EmpName);\n</code></pre>\n\n<p>and due to the above my page stays till the second procedure finishes. I would like to close the page as soon as the first procedure finishes or when user submits the page.</p>\n\n<p>Update 2</p>\n\n<pre><code>DBMS_JOB.SUBMIT(ln_dummy, 'begin putData('||empNo,EmpName||'); end;');\n</code></pre>\n\n<p>gives me compilation error wrong number of arguments to call Submit.</p>\n\n<p>How can I resolve this?</p>\n"},{"tags":["c#","oracle","oracle11g"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":229,"score":5,"question_id":10449733,"title":"Problems reading from Oracle","body":"<p>I've just installed an Oracle express database and am trying to read some data from a table I've put in there:</p>\n\n<pre><code>using (OracleConnection conn = new OracleConnection(\"Data Source=localhost:1521/xe;Persist Security Info=True;User ID=SYSTEM;Password=SYSTEMPASSWORD\"))\n{\n    OracleCommand command = new OracleCommand(\"SELECT * FROM Persons WHERE Firstname = 'John'\", conn);\n    conn.Open();\n    OracleDataReader reader = command.ExecuteReader();\n\n    try\n    {\n        while (reader.Read())\n        {\n            string strResult = reader.GetString(0);\n        }\n    }\n    catch (OracleException oex)\n    {\n        MessageBox.Show(oex.Message, \"Oracle error\");\n    }\n    catch (Exception ex)\n    {\n        MessageBox.Show(ex.Message, \"Error\");\n    }\n    finally\n    {\n        reader.Close();\n    }\n} \n</code></pre>\n\n<p>On the <code>while (reader.Read())</code> it just quits since the reader does not hold any data. What is wrong? <code>Connectionstring</code>? I've run the same <code>SELECT</code> in the commandprompt tool that is installed with Oracle express and it works fine.</p>\n"},{"tags":["oracle","date-arithmetic"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":60,"score":1,"question_id":12709577,"title":"months_between for a leap year","body":"<p>When I find months between 28-FEB-11 and 29-FEB-12, months_between function in oracle returns 12. Actually it should be 12.096. This function is not calculating for the leap year proper.</p>\n\n<p>For between 28-FEB-11 and 29-FEB-12, it is 1 year(12 months) and 1 day.</p>\n\n<pre><code>      select months_between('28-FEB-12', '28-FEB-11') from dual; -- 12\n      **select months_between('29-FEB-12', '28-FEB-11') from dual; -- 12**\n      select months_between('28-FEB-12', '27-FEB-11') from dual; -- 12.0322\n      select months_between('27-FEB-12', '28-FEB-11') from dual; -- 11.9677\n</code></pre>\n\n<p>is this an Oracle bug??..</p>\n\n<p>-Vishwa</p>\n"},{"tags":["sql","oracle","oracle11g"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12394055,"title":"PL/SQL: Move data from Prod to Dev Table","body":"<pre><code>Oracle 11g\nOracle SQL Developer 3.0.03\n</code></pre>\n\n<p>I need to copy all of the data from a production table with +100K rows to a development table.  The tables are in two different schemas.</p>\n\n<p>I started to do:</p>\n\n<pre><code>select * \n  from prod_schema.prod_table \n where ronum &lt;= 50000 order by ID asc\n</code></pre>\n\n<p>Then do </p>\n\n<pre><code>select * \n  from prod_schema.prod_table \n where ronum &gt;= 50001 \n   and rownum &lt;=107161 order by ID asc\n</code></pre>\n\n<p>But the second query doesn't pull in any data.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["oracle","triggers","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12694042,"title":"PLSQL Trigger may be causing INSERT INTO to fail silently?","body":"<p>I have a table which I am trying to do an insert/update on depending on the values I am given. But the insert is not working for this particular table, yet it works for the previous tables which the script has run on. </p>\n\n<p>To test this problem, I put in a few anonymous blocks into oracle's sqldeveloper which inserts or updates depending on whether a key is present. Updates seem to work fine, but when it comes to inserting a new row, nothing is inserted.</p>\n\n<p>If I had this table:</p>\n\n<pre><code>COFFEE_ID       TEA_ID        NAME      \n    11             100        combo 1\n    12             101        combo 2\n    13             102        combo 3\n</code></pre>\n\n<p>Doing this will not insert anything and will instead move on to the next anonymous block:</p>\n\n<pre><code>   begin\n      insert into COFFEE_TEA(COFFEE_ID, TEA_ID, NAME) values (14, 103, 'combo 4');\n   exception when dup_val_on_index then \n      update ....\n   end;\n\n    ....\n</code></pre>\n\n<p>I suspect it has something to do with the trigger on this table. It is a <code>BEFORE EACH ROW</code> trigger type, and it would do an insert data into some other table. There is no exception handling in the trigger, so I'm guessing it must fail but not report it (doesn't show up in sqldeveloper when I run the script). </p>\n\n<p>My two questions would be, </p>\n\n<p>When the trigger runs, what happens if the ID it's trying to insert to the other table already exists? Looks like it silently fails?</p>\n\n<p>How best should I fix this? I am unsure if I can change the trigger code itself, but would it be possible to catch the error inside my anonymous block (assuming that it's actually the trigger that's causing the problem). If so, how would I know what exception to catch if it fails silently?</p>\n\n<hr>\n\n<p>I removed the exception in sqldeveloper and it tells me that a unique constraint was violated. Namely that the data being inserted into the other table through the trigger is the cause.</p>\n"},{"tags":["oracle","oracle10g","directory","metadata"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":5335,"score":4,"question_id":6390388,"title":"How to query the permissions on an Oracle directory?","body":"<p>I have a directory in all_directories, but I need to find out what permissions are associated with it, i.e. what has been granted on it?</p>\n"},{"tags":["perl","oracle","dbi"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":106,"score":3,"question_id":12708633,"title":"Which one represents null? undef or empty string","body":"<p>I want to insert <code>null</code> in a column in a table.</p>\n\n<p><strong>Which one represents null? <code>undef</code> or empty string <code>''</code>.</strong></p>\n\n<p>Which one should be used and Why? I know about <code>defined</code> and that I can check it.</p>\n\n<p>But I am looking more from perspective of database. </p>\n\n<p>Which one represents <code>null</code> more properly?</p>\n\n<p><strong>Update:</strong> I am using <code>DBI</code> module.</p>\n"},{"tags":["oracle","import","impdp"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1112,"score":1,"question_id":9257655,"title":"Oracle impdp throwing ORA-39088 error","body":"<p>I am trying to import data from a dump file created by Oracle 10g data pump utility.     The command that I am issuing is </p>\n\n<p><strong>impdp  \\\"username/password@DB as sysdba\\\" remap_schema=SRC_SCHEMA:TARGET_SCHEMA remap_tablespace=source_tablespace:target_tablespace DUMPFILE=db.dmp</strong> </p>\n\n<p>I am getting the following error message:</p>\n\n<pre><code>ORA - 39001: Invalid argument value\nORA - 39000: Bad dump file spcification\nORA - 39088: file name cannot contain a path specification\n</code></pre>\n\n<p>What is the cause of this error?</p>\n"},{"tags":["oracle","escaping","ampersand","plsqldeveloper"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":4749,"score":2,"question_id":7103715,"title":"Escape ampersand in PL/SQL Developer","body":"<p>I'm trying a simple INSERT statement against an Oracle database.  One of the values is a VARCHAR2 field and the insert statement contains an ampersand.  How do I do this?  I've tried the following methods:</p>\n\n<ol>\n<li>Escape the &amp; as \\&amp; with set escape on</li>\n<li>set scan off (this causes an ORA-00922 missing or invalid option error)</li>\n<li>set define off (this causes an ORA-00922 missing or invalid option error)</li>\n</ol>\n\n<p>Any other ideas?</p>\n"},{"tags":["oracle","tinymce","javabeans"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":57,"score":0,"question_id":12689970,"title":"Text Editor for Oracle Forms","body":"<p>Can anyone please help me.I need to integrate a free text editor in my oracle forms. I know there's TinyMCE, but I can't figure out how to use it with JavaBeans.</p>\n\n<p>Thank you</p>\n"},{"tags":["oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12708730,"title":"Oracle group by with multiple selects","body":"<p>I'm selecting 4 columns from a table and grouping on sum column,<br>\n2, simple select<br>\n1,trun select<br>\n1,literal select<br>\n1,sum(200)  </p>\n\n<pre><code>    select tb1.col-1\n    ,tb1.col-2\n    ,COALESCE(NULLIF('A', 'A'), 'Z') AS col-3\n    ,'tst_val' as col-4\n    ,sum(100) as col-5\nform table-1 tb1\ngroup by tb1.col-1,tb11.col-2,col-3,col-4\n</code></pre>\n\n<p>Is this is a viable solution? I know col-4 is unique but col-3 is not unique, based on the nullif the value will be different.</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12690359,"title":"How to increase speed of SQL query from 2 CONNECT BY","body":"<p>I have 3 tables: t1, t2, t3.</p>\n\n<p>t1 - hierarchical table (have id and parent_id)</p>\n\n<p>t1 is connected with t2, t2 is connected with t3 (join)</p>\n\n<p>Input: some id's of t1</p>\n\n<p>It is necessary to construct a tree up on these identifiers (to collect all parental nodes)</p>\n\n<p>Then to construct a tree down, having stuck together t2 and t3</p>\n\n<p>It is also necessary to restore value of a t3name (from t3) of their children for parental tops</p>\n\n<p>Output: it is necessary to receive hierarchical trees for each t3name</p>\n\n<p>My SQL-request, but it is very slow:</p>\n\n<p>Miniexample:\n<a href=\"http://sqlfiddle.com/#!4/0b607/2\" rel=\"nofollow\">http://sqlfiddle.com/#!4/0b607/2</a></p>\n\n<pre><code>SELECT id, name, t3name FROM \n(SELECT distinct t1.id as id, \n                 t1.parent as parent, \n           t1.name as name, \n           connect_by_root(t3.name) as t3name\n    FROM table1 t1\n    LEFT OUTER JOIN table2 t2\n        ON t1.t2_id = t2.id\n    LEFT OUTER JOIN table3 t3\n        ON t2.t3_id = t3.id\n    START WITH t1.id in (83, 98, 9, 19, 4, 101)\n        CONNECT BY PRIOR t1.parent = t1.id)\nWHERE t3name IS NOT NULL\nSTART WITH parent = 0\n    CONNECT BY PRIOR id = parent and PRIOR t3name = t3name\n</code></pre>\n"},{"tags":["sql","oracle","sql-server-2012"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12691505,"title":"integrate data between oracle and sql server","body":"<p>I have an oracle database that is very large in size. </p>\n\n<p>I also have a sql server database. I want to integrate data from the oracle database to the sql server database and also the opposite way. This does not need to be real time but can work in the background possibly on defined intervals during the day.</p>\n\n<p>What is the process for setting this up and how may it be achieved?</p>\n"},{"tags":["sql","oracle","hierarchy"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":12609270,"title":"Verification of SQL to Report on All Children of a Given Parent in Simple Oracle Table","body":"<p>I'm hoping this is a pretty simple request... I'm not a developer or DBA, but I have dabbled in with Perl, PHP and PowerShell.  Anyway, we have a table of about 400 Parents and Children.  A snippet of the table is at the bottom of this post.  I can provide the whole list of 412 parent/children if the complete depth is required.</p>\n\n<p>The SOURCE_ID and DESTINATION_ID are representing web services in a SOA environment.  For this exercise, we just need to pick one of the services, then display the \"downstream\" children beneath it in the hierarchy.  Also, we'd like to know the \"upstream\" parents all the way up the hierarchy as well.</p>\n\n<p>I originally just cut and pasted the table into a text file and used this <a href=\"http://stackoverflow.com/questions/3862217/create-a-hierarchy-file-using-perl\">PERL script</a> to produce a hierarchy file which I then pasted into excel.  Long story short, <strong>I came up with 25 unique ID's</strong> which I assumed were all children of the SOURCE_ID.  </p>\n\n<p>I want to do this with a SQL query so I can make an interactive/self-serve web page and not have a manual process to worry about.  I found and manipulated this code from somewhere on this site:</p>\n\n<pre><code>select Source_Service_Id parent, Destination_Service_Id child\nfrom dd_service_relationship\nconnect by prior id = Source_Service_Id\nstart with Source_Service_Id = 10512\n</code></pre>\n\n<p><strong>It only returns 12 results</strong>.  Now I don't know which results to trust.  </p>\n\n<p>Please verify that the SQL code should return ALL of the children (with no duplication if the child is under multiple parents), and that it will traverse the entire table.</p>\n\n<p>Here is a small portion of the dd_service_relationship table: </p>\n\n<pre><code>ID            UPDATE_DATE                  SOURCE_ID        DESTINATION_ID\n10502    9/24/2012 2:09:45 PM    10501                    10500\n10504    9/24/2012 2:09:45 PM    10501                    10503\n10506    9/24/2012 2:09:45 PM    10501                    10505\n10509    9/24/2012 2:09:45 PM    10508                    10507\n10511    9/24/2012 2:09:45 PM    10508                    10510\n10513    9/24/2012 2:09:45 PM    10508                    10512\n10515    9/24/2012 2:09:45 PM    10508                    10514\n10517    9/24/2012 2:09:45 PM    10508                    10516\n10519    9/24/2012 2:09:45 PM    10508                    10518\n10521    9/24/2012 2:09:45 PM    10508                    10520\n10523    9/24/2012 2:09:45 PM    10508                    10522\n10526    9/24/2012 2:09:45 PM    10525                    10524\n10527    9/24/2012 2:09:45 PM    10525                    10505\n10529    9/24/2012 2:09:45 PM    10525                    10528\n10531    9/24/2012 2:09:45 PM    10525                    10530\n10533    9/24/2012 2:09:45 PM    10532                    10505\n10534    9/24/2012 2:09:45 PM    10532                    10507\n10535    9/24/2012 2:09:45 PM    10532                    10510\n10536    9/24/2012 2:09:45 PM    10532                    10512\n10538    9/24/2012 2:09:45 PM    10532                    10537\n10541    9/24/2012 2:09:45 PM    10540                    10539\n10543    9/24/2012 2:09:45 PM    10542                    10514\n10544    9/24/2012 2:09:45 PM    10542                    10539\n10545    9/24/2012 2:09:45 PM    10542                    10505\n10547    9/24/2012 2:09:45 PM    10546                    10518\n10549    9/24/2012 2:09:45 PM    10546                    10548\n</code></pre>\n\n<p>Thank you...</p>\n"},{"tags":["oracle","plsql","oracle11g","plsqldeveloper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12707331,"title":"multiline text in varchar2 field","body":"<p>I have a multiline date, and I'd like to insert it in a table. Then of course, I'd like to retrieve it while preserving the places of cartridge returns. </p>\n\n<p>For example. I have data like this in text file</p>\n\n<pre><code>-------------------------------\n| ID  |   text                |\n|     |                       |\n| 01  |  This is headline.    |\n| 02  |  This is all the text.|\n|     |  ¤                    |\n|     |  Of great story once  |\n| 03  |  Great weather        |\n-------------------------------\n</code></pre>\n\n<p>The ¤ is the indicator of cartridge return. When I try to run the query then data comes like this:</p>\n\n<pre><code>-------------------------------\n| ID  |   text                |\n|     |                       |\n| 01  |  This is headline.    |\n| 02  |  This is all the text.|\n| 03  |  Great weather        |\n-------------------------------\n</code></pre>\n\n<p>What I'd like to have in table: (I have no idea how to show cartridge return in the example below)</p>\n\n<pre><code>-----------------------------------------------------\n| ID  |   text                                      |\n|     |                                             |\n| 01  |  This is headline.                          |\n| 02  |  This is all the text. Of great story once  |\n| 03  |  Great weather                              |\n-----------------------------------------------------\n</code></pre>\n\n<p>Which is of course, wrong as the data for ID 02 wasn't imported completely.</p>\n\n<p>Here is my script:</p>\n\n<pre><code>LOAD DATA\nINFILE \"file.txt\" BADFILE \"file.bad\" DISCARDFILE \"file.dsc\"\nAPPEND\nINTO TABLE text_table\nFIELDS TERMINATED BY X'7C' TRAILING NULLCOLS\n(\n    employee_id,           \n    exp_pro CHAR(4000)\n)\n</code></pre>\n\n<p>Any ideas? Thanks in advance =)</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":1975,"score":1,"question_id":7030699,"title":"Oracle SQL: Update with data from another table","body":"<p>Table 1:</p>\n\n<pre><code>id    name    desc\n-----------------------\n1     a       abc\n2     b       def\n3     c       adf\n</code></pre>\n\n<p>Table 2:</p>\n\n<pre><code>id    name    desc\n-----------------------\n1     x       123\n2     y       345\n</code></pre>\n\n<p>In oracle SQL, how do I run an <strong>sql update</strong> query that can update Table 1 with Table 2's name and desc using the same id? So the end result I would get is</p>\n\n<p>Table 1:</p>\n\n<pre><code>id    name    desc\n-----------------------\n1     x       123\n2     y       345\n3     c       adf\n</code></pre>\n\n<p>Question is taken from <a href=\"http://stackoverflow.com/questions/5036918/sql-update-query-with-data-from-another-table\">sql update query with data from another table</a>, but specifically for oracle SQL.</p>\n"},{"tags":[".net","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2438,"score":1,"question_id":5287111,"title":"connect to remote oracle database via visual studio 2010","body":"<p>I have installed the oracle develop tools, odp.net blah blah etc for visual studio 2010 to see, but I have no idea how to connect to the remote oracle server? Maybe I can do it via code, but I was thinking that I could go to \"Data Connections\" in Visual Studio and add a connection to the oracle database? Yet I have no idea what to put in data source name, etc as all I have is an ip, port, and some name of the database or something.</p>\n"},{"tags":["database","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12703172,"title":"Oracle rownum 1 not working","body":"<p>I have got problem with oracle just create simple select with limit but oracle havent got this function so i wrote something like that </p>\n\n<p>: </p>\n\n<pre><code>     select b.strdir,b.num, b.value, b.time  \n\n          from mytable b\n         where b.dev_id = 223\n           and b.cur_id = 23\n           and b.time=(\n                select xx.time from mytable xx\n                where xx.dev_id = b.dev_id and xx.cur_id = b.cur_id and xx.nom = b.nom\n                and rownum=1\n                order by xx.time DESC\n               )\n\n         order by b.strdir nulls first;\n</code></pre>\n\n<p>but it is not working plz help :/</p>\n"},{"tags":["oracle","stored-procedures","insert"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12705752,"title":"Oracle Inserting or Updating a row through a procedure","body":"<p>I have a table </p>\n\n<pre><code>CREATE TABLE STUDENT\n(\n  ID            INTEGER PRIMARY KEY,\n  FIRSTNAME     VARCHAR2(1024 CHAR),\n  LASTNAME      VARCHAR2(1024 CHAR),\n  MODIFIEDDATE  DATE  DEFAULT sysdate\n)\n</code></pre>\n\n<p>I am inserting a row of data</p>\n\n<pre><code>insert into STUDENT (ID, FIRSTNAME, LASTNAME, MODIFIEDDATE)  values (1,'Scott', 'Tiger', sysdate);\n</code></pre>\n\n<p>When I have to insert a record of data, I need to write a procedure or function which does the following:</p>\n\n<ol>\n<li>if there is no record for the same id insert the row.</li>\n<li>if there is a record for the same id and data matches then do nothing.</li>\n<li>if there is a record for the same id but data does not match then update the data.</li>\n</ol>\n\n<p>I am new to oracle. From the java end, It is possible to select the record by id and then update that record, but that would make 2 database calls. just to avoid that I am trying update the table using a procedure. If the same can be done in a single database call please mention.</p>\n"},{"tags":["sql","oracle","query-optimization"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12706207,"title":"Oracle SQL query performance improvement: minus vs where not exists","body":"<p>I need to improve the performance of this query:</p>\n\n<pre><code>Select \n   t1.column1, t1.column2 \nFrom\n   table1 t1, table2 t2\nWhere \n   t1.id = t2.id and\n   t1.some_column = t2.some_column\n--------\nminus\n--------\nSelect \n   t1.column1, t1.column2 \nFrom\n   table1 t1, table2 t2, table3 t3\nWhere \n   t1.id = t2.id and\n   t1.some_column = t2.some_column and\n   t1.id = t3.id\n</code></pre>\n\n<p>I'm trying to rewrite this query using \"not exists\" instead of \"minus\". Can someone give me an advice? </p>\n"},{"tags":["sql","oracle","group-by"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":12705869,"title":"How to use Oracle Group BY in the below scenario","body":"<p>Below is a very basic scenario.</p>\n\n<p>I am finding it hard to understand how <code>GROUP BY</code> works even after going through a lot of examples.</p>\n\n<p>In the below scenario i need to get minimum value of date and need to convert my query 1 to query 2.</p>\n\n<p>query1:</p>\n\n<pre><code>SELECT b.aper07_req_created_s,\n       b.aper06_req_status_k,\n       a.aper06_req_status_x\nFROM   iaper07_employee_offbrd_req b,\n       iaper06_req_status a\nWHERE  a.aper06_req_status_k = b.aper06_req_status_k\n       AND b.aper07_req_k = 3387\n       AND b.aper06_req_status_k = 4\nORDER  BY b.aper07_req_created_s \n</code></pre>\n\n<p>query 2:</p>\n\n<pre><code>SELECT Min(b.aper07_req_created_s),\n       b.aper06_req_status_k,\n       a.aper06_req_status_x\nFROM   iaper07_employee_offbrd_req b,\n       iaper06_req_status a\nWHERE  a.aper06_req_status_k = b.aper06_req_status_k\n       AND b.aper07_req_k = 3387\n       AND b.aper06_req_status_k = 4\nGROUP  BY b.aper06_req_status_k,\n          a.aper06_req_status_x\nORDER  BY b.aper07_req_created_s \n</code></pre>\n\n<p>Query 2 is failing stating that its not a group by expression.</p>\n\n<p>Can anyone help me in understand on how to get 2nd query right with some explanation?</p>\n"},{"tags":["oracle","spring-jdbc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12706260,"title":"Updating a row by rowid in oracle using spring-jdbc","body":"<p>I have a weird problem updating a row by rowid in oracle using spring-jdbc.<br/>\nThe problem is that everything is ok but for some rowids the update will never be done and \napplication is frozen.\nI changed spring log level to DEBUG to see what's happening but nothing's strange and spring log is exactly as successful updates.</p>\n\n<p>I tried to execute the same sql in plsql and the update was executed successfully.</p>\n\n<p>spring version is 3.1.1.RELEASE\noracle version is 11.1.0.6.0</p>\n\n<p>body of update method in dao is:</p>\n\n<p>String sql=<br/> \n\"UPDATE \"+schema+\".MSG m SET m.STATE=\"+state+\" WHERE ROWID='\"+msg.getRowId()+\"'\";<br/>\ngetJdbcTemplate().update(sql);</p>\n\n<p>dao bean:</p>\n\n<pre><code>&lt;bean id=\"messageDao\" class=\"com.foo.dao.springjdbc.MessageDaoSpringJdbcImpl\"&gt;\n    &lt;property name=\"jdbcTemplate\" ref=\"jdbcTemplate\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>jdbcTemplate:</p>\n\n<pre><code>&lt;bean id=\"jdbcTemplate\" class=\"org.springframework.jdbc.core.JdbcTemplate\"&gt;\n    &lt;constructor-arg ref=\"dataSource\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>data source:</p>\n\n<pre><code>&lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\"&gt;\n    &lt;property name=\"driverClassName\" value=\"oracle.jdbc.driver.OracleDriver\"/&gt;\n    &lt;property name=\"url\" value=\"jdbc:oracle:thin:@${db.ip}:${db.port}:${db.sid}\"/&gt;\n    &lt;property name=\"username\" value=\"${db.username}\"/&gt;\n    &lt;property name=\"password\" value=\"${db.password}\"/&gt;\n    &lt;property name=\"validationQuery\" value=\"select 1 from dual\"/&gt;\n    &lt;property name=\"testOnBorrow\" value=\"true\"/&gt;\n    &lt;property name=\"testWhileIdle\" value=\"true\"/&gt;\n    &lt;property name=\"timeBetweenEvictionRunsMillis\" value=\"5000\"/&gt;\n    &lt;property name=\"numTestsPerEvictionRun\" value=\"3\"/&gt;\n    &lt;property name=\"maxActive\" value=\"1\"/&gt;\n    &lt;property name=\"maxIdle\" value=\"3\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>any idea?</p>\n"},{"tags":["sql","oracle","oracle8i"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12704898,"title":"Connecting Multiple Tables in SQL while Limiting Exponential Results","body":"<p>I have searched Google and Stack Overflow for a answer to my query, but I feel my lack of SQL vocabulary is standing in my way of finding an answer as I believe this would be a common question. Any helpful points in the direction of what I need to be reading are always welcome.</p>\n\n<p>On to the question, I'm attempting to join three tables in Oracle 8i, for example, a Company Table, an Invoice Table and a Jobs Table there is no link between the Invoice Table and the Jobs Table. I am hoping that in one query I can link all three tables returning all invoices and all jobs for a company without returning all jobs for each invoice (see my example results below).  </p>\n\n<p>I want to see:</p>\n\n<pre><code>Company 1   Invoice 1   Job 1\nCompany 1   Invoice 2   Job 2\nCompany 1   Invoice 3   Job 3\n</code></pre>\n\n<p>I don't want to see:</p>\n\n<pre><code>Company 1   Invoice 1   Job 1\nCompany 1   Invoice 1   Job 2\nCompany 1   Invoice 1   Job 3\nCompany 1   Invoice 2   Job 1\nCompany 1   Invoice 2   Job 2\nCompany 1   Invoice 2   Job 3\nCompany 1   Invoice 3   Job 1\nCompany 1   Invoice 3   Job 2\nCompany 1   Invoice 3   Job 3\n</code></pre>\n\n<p>As always thank you for any help you can offer.</p>\n\n<p>EDIT:</p>\n\n<p>Essentially both the Invoice and Job Tables both have a Company Table Key field it's just that the Job and Invoice table have no link to each other directly. If the instance comes up when there are 2 Invoices and 3 Jobs I'd ideally like it to show and vice versa:</p>\n\n<pre><code>Company 1   Invoice 1   Job 1\nCompany 1   Invoice 2   Job 2\nCompany 1               Job 3\n</code></pre>\n\n<p>Although looking at the problem like this makes me feel that this is further away from an easier answer than I hoped.</p>\n"},{"tags":["oracle","adapter","biztalk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":12622813,"title":"Biztalk Oracle adapter to XML looses zero before the decimal seperator","body":"<p>I am using biztalk with an oracle adapter. The query collects data and a few columns have values in them. these values are usually between -1 and 1 and show up in oracle as -0,2 or 0,4</p>\n\n<p>this goes through biztalk and ends up in an xml and looks like the below fields</p>\n\n<p><code>&lt;move_cost_vat&gt;-.2&lt;/move_cost_vat&gt;</code></p>\n\n<p><code>&lt;move_cost_customs&gt;0&lt;/move_cost_customs&gt;</code></p>\n\n<p><code>&lt;move_cost_vat&gt;.3&lt;/move_cost_vat&gt;</code></p>\n\n<p><code>&lt;move_cost_customs&gt;.5&lt;/move_cost_customs&gt;</code></p>\n\n<p>Somehow the leading 0 has disappeared on the decimal numbers. is there a way to prevent this? is this a problem in the adapter?</p>\n"},{"tags":["sql","oracle","blob"],"answer_count":1,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":20242,"score":8,"question_id":2373138,"title":"dbms_lob.getlength() vs. length() to find blob size in oracle","body":"<p>I'm getting the same results from </p>\n\n<pre><code>select length(column_name) from table\n</code></pre>\n\n<p>as</p>\n\n<p><code>select dbms_lob.getlength(column_name) from table</code> </p>\n\n<p>However, the answers to\n<a href=\"http://stackoverflow.com/questions/840966/what-is-an-elegant-way-to-return-a-readable-file-size-of-a-file-stored-in-an-or\">this question</a> seem to favor using dbms_log.getlength().  </p>\n\n<p>Is there any benefit to using dbms_lob.getlength()? </p>\n\n<p>If it changes the answer, I know all of the blobs are .bmp images (never worked with blobs before).</p>\n"},{"tags":[".net","oracle","nhibernate","fluent-nhibernate","nhibernate-mapping"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12705353,"title":"Fluent Nhibernate table with value object mapping","body":"<p>Can you suggest a valid mapping for the following scenario. Two tables:</p>\n\n<pre><code>CREATE TABLE \"ORDER\"\n  (\n    \"ID\"      NUMBER(20,0) NOT NULL ENABLE,\n    \"STATUS_ID\"  NVARCHAR2(10,0)\n  );\n\nCREATE TABLE \"STATUS\"\n  (\n    \"ID\"      NVARCHAR2(10,0) NOT NULL ENABLE,\n    \"DESCRIPTION\"  NVARCHAR2(250,0)\n  );\n</code></pre>\n\n<p>The respective classes are:</p>\n\n<pre><code>public class Order\n{\n    public virtual Id { get; set; }\n    public virtual Status { get; set; }\n}\n\npublic class Status\n{\n    public virtual Id { get; set; }\n    public virtual Description { get; set; }\n}\n</code></pre>\n\n<p>Status table is static table of value object for the property <code>Proposal.Status</code> and should never be manipulated by code. I want the <code>Order</code> to always be loaded with Status description and code, i.e. Eager Load <code>Proposal.Status</code>.</p>\n\n<p>I've read this <a href=\"http://nhibernate.hibernatingrhinos.com/23/a-fluent-interface-to-nhibernate-part-2-value-objects\" rel=\"nofollow\">Ayende's blog post</a> but there is no exactly the same scenario, albeit I believe it's quite common.</p>\n\n<p>Edit: note I'm trying to do this as <code>Component Map</code>.</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":27,"score":-1,"question_id":12705306,"title":"How to get list of all materialized views in oracle","body":"<p>How to get list of all Materialized Views.?</p>\n"},{"tags":["sql","oracle","query"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":97,"score":3,"question_id":12696723,"title":"SQL Query Help (Advanced - for me!) ","body":"<p>I have a question about a SQL query I am trying to write. </p>\n\n<p>I need to query data from a database. \nThe database has, amongst others, these 3 fields: </p>\n\n<p>Account_ID #, Date_Created, Time_Created</p>\n\n<p>I need to write a query that tells me how many accounts were opened per hour. </p>\n\n<p>I have written said query, but there are times that there were 0 accounts created, so these \"hours\" are not populated in the results. </p>\n\n<p>For example: </p>\n\n<blockquote>\n  <p>Volume <strong><em>Date</em>_</strong>_Hour<br>\n  435    12-Aug-12  03<br>\n  213    12-Aug-12  04<br>\n  125    12-Aug-12  06 <br></p>\n</blockquote>\n\n<p>As seen in the example above, hour 5 did not have any accounts opened. </p>\n\n<p>Is there a way that the result can populate the hour but and display 0 accounts opened for this hour? \nExample of how I want my results to look like: </p>\n\n<p>Volume <strong><em>Date</em></strong>_Hour<br>\n435 12-Aug-12  03<br>\n213 12-Aug-12  04<br>\n0     12-Aug-12  05<br>\n125 12-Aug-12  06<br></p>\n\n<p>Thanks! </p>\n\n<p>Update: This is what I have so far</p>\n\n<pre><code>SELECT count(*) as num_apps, to_date(created_ts,'DD-Mon-RR') as app_date, to_char(created_ts,'HH24') as app_hour \nFROM accounts \nWHERE To_Date(created_ts,'DD-Mon-RR') &gt;= To_Date('16-Aug-12','DD-Mon-RR') \nGROUP BY To_Date(created_ts,'DD-Mon-RR'), To_Char(created_ts,'HH24') \nORDER BY app_date, app_hour\n</code></pre>\n"},{"tags":["oracle","jdbc","nls","ora-12705"],"answer_count":5,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":12691,"score":9,"question_id":1079985,"title":"NLS_LANG setting for JDBC thin driver?","body":"<p>I am using the thin Oracle JDBC driver ver 10.2.0 (ojdbc14.jar). I would like to configure its NLS_LANG setting manually. Is there a way?</p>\n\n<p>Currently it fetches this setting from the VM variable user.language (which is set automatically by setting the current locale, or on startup from the system environment).</p>\n\n<p>This is a problem when the users switch the application locale to a one that is unsupported by the Oracle JDBC driver (e.g. mk_MK). In this case, the next time I fetch a connection I get the following exception:</p>\n\n<pre>\nORA-00604: error occurred at recursive SQL level 1\nORA-12705: Cannot access NLS data files or invalid environment specified\n</pre>\n\n<p>I can change the locale on the fly just before I fetch the connection and switch back to the user's selected one back and forth, but this seems unelegant and unefficient.</p>\n"},{"tags":["oracle","sql-loader","ctl"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12506919,"title":"Using a decode with fixed width data","body":"<p>I am trying to load a data file into a table.</p>\n\n<p>The data file looks like this:</p>\n\n<pre><code>aaaa bbbb cccc\ndddd eeee ffff\na1a1 b2b2 c3c3\nd4d4 e5e5 f6f6\n</code></pre>\n\n<p>The table is </p>\n\n<pre><code>COLUMN1 VARCHAR2(4 BYTE)\nCOLUMN2 VARCHAR2(4 BYTE)\nCOLUMN3 VARCHAR2(4 BYTE)\n</code></pre>\n\n<p>and the rule is</p>\n\n<pre><code>if column3 == cccc then\ncolumn2 = column1\nelse if column3 == f6f6 then\ncolumn2 = substr(:column3,1,2)||substr(:column1,1,2)\nelse column2 = POSITION(06:09);\n</code></pre>\n\n<p>This is what I wrote to load the data into the table</p>\n\n<pre><code>LOAD DATA\nINFILE 'test'\nINTO TABLE TESTTALBLE REPLACE (\ncolumn1 POSITION(01:04)     CHAR,\n--nothing POSITION(06:09)       CHAR filler,\ncolumn2  CHAR \"decode (:column3, 'cccc', :column1 ,(decode(:column3,'f6f6',substr(:column3,1,2)||substr(:column1,1,2),POSITION(06:09))))\",\n--POSITION(06:09)       CHAR,\ncolumn3 POSITION(11:14)     CHAR\n)\n</code></pre>\n\n<p>It is fine until I use <code>POSITION(06:09)</code>.</p>\n\n<p>Am I having some syntax error or something? If I put some fixed text value instead of <code>POSITION(06:09)</code>, it was ok.</p>\n"},{"tags":["performance","oracle","bulk-load"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12700883,"title":"ORACLE 10G DELETE USING FORALL","body":"<p>I have a txn table which is having 2 million rows every month i am loading data into that using stored procedure. I need to delete the transactions using the following if it failed during my process and i used to load again .</p>\n\n<pre><code>Table TXN structure\n\nTXN_ID    NUMBER primary key \nTXN_AMT   number\nYEAR    varchar2\nMONTH   varchar2\n</code></pre>\n\n<p>Can i used bulk collect here, but in where clause i need</p>\n\n<pre><code>DELETE FROM TXN WHERE YEAR=cYear and Month=cMonth \n</code></pre>\n\n<p>please advice how i can make it fast</p>\n"},{"tags":["oracle","oracle10g","oc4j","oracle-fusion-middleware"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12703163,"title":"OPMN suddenly stops","body":"<p>In our clustered oracle application server environment, for a certain host, we have experienced a sudden stop of the opmn process which was running. </p>\n\n<p>Observations -<br>\n1. opmnctl status - Unable to connecto to opmn. opmn may not be up.<br>\n2. when opmnctl start was executed, opmn started again<br>\n3. opmnctl status - showed all the running OC4J instances</p>\n\n<p>conclusion - all the OC4J instances were running but the opmn has been shutdown. </p>\n\n<p>when the opmn logs are inspected for the period, the following error were found.</p>\n\n<ol>\n<li><p>TopologyMonitor.getUnsynchronizedCompleteInitializedTopology Too few bytes (-1) received from OPMN responseoracle.ias.opmn.optic.OpticBadConnectException: Too few bytes (-1) received from OPMN response</p></li>\n<li><p>TopologyMonitor.getUnsynchronizedCompleteInitializedTopology Error connecting to OPMN (is it running?): Connection refusedoracle.ias.opmn.optic.OpticBadConnectException: Error connecting to OPMN (is it running?\n): Connection refused</p></li>\n<li><p>OPMN responseoracle.ias.opmn.optic.OpticBadConnectException: Too few bytes</p></li>\n</ol>\n\n<p>we need to determine why opmn suddenly became unresponsive.</p>\n"},{"tags":["windows","oracle","oracle11g","iis-7.5","oledb"],"answer_count":0,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":219,"score":2,"question_id":12703049,"title":"OleDbException (0x80004005): Oracle client and networking components were not found. How can I fix this?","body":"<p>I want to connect with oledb connection(msdaora.dll) in my webapplication to oracle.</p>\n\n<p>I USE :</p>\n\n<pre><code>IIS 7.5\n64 bit windows server 2008 r2 enterprise.\n64 bit oracle 11g\n32 bit oracle client\n\nvisual studio 2010\n32bit msdaora.dll\nmy aplication is .aspx\n</code></pre>\n\n<p>and what is my error :</p>\n\n<pre><code>Server Error in '/PPIGanTT' Application.\n--------------------------------------------------------------------------------\n\nOracle client and networking components were not found. These components are supplied by Oracle Corporation and are part of the Oracle Version 7.3.3 or later client software installation.\n\nProvider is unable to function until these components are installed. \nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: System.Data.OleDb.OleDbException: Oracle client and networking components were not found. These components are supplied by Oracle Corporation and are part of the Oracle Version 7.3.3 or later client software installation.\n\nProvider is unable to function until these components are installed.\n\nSource Error: \n\nAn unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  \n\nStack Trace: \n\n\n[OleDbException (0x80004005): Oracle client and networking components were not found. These components are supplied by Oracle Corporation and are part of the Oracle Version 7.3.3 or later client software installation.\n\nProvider is unable to function until these components are installed.]\n   System.Data.OleDb.OleDbConnectionInternal..ctor(OleDbConnectionString constr, OleDbConnection connection) +351\n   System.Data.OleDb.OleDbConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject) +86\n   System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup) +31\n   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +76\n   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126\n   System.Data.OleDb.OleDbConnection.Open() +43\n   csOra.OpenCnn() +47\n   csOra..ctor(String sTnsName, String sUserId, String sPassword) +273\n   _Default.Page_Load(Object sender, EventArgs e) +8801\n   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14\n   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35\n   System.Web.UI.Control.OnLoad(EventArgs e) +91\n   System.Web.UI.Control.LoadRecursive() +74\n   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207\n</code></pre>\n\n<p>what i try before :</p>\n\n<p>1-- in iis, I change the    <code>enable32applications</code>  to <code>true</code>.</p>\n\n<p>2-- change my connection type from <code>oledb</code> to <code>oracle.data.access</code>  but it isnt work too.</p>\n\n<p>3-- I want to find 64 bit msdaora.dll but i cant find it.</p>\n\n<p>What can I do to fix this error?\nThanks.</p>\n"},{"tags":["sql","oracle","oracle10g","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":66,"score":3,"question_id":12694484,"title":"Split a query result based on the result count","body":"<p>I have a query based on basic criteria that will return X number of records on any given day.</p>\n\n<p>I'm trying to check the result of the basic query then apply a percentage split to it based on the total of X and split it in 2 buckets. Each bucket will be a percentage of the total query result returned in X.</p>\n\n<p>For example: </p>\n\n<ul>\n<li><p>Query A returns 3500 records.</p></li>\n<li><p>If the number of records returned from Query A is &lt;= 3000, then split the 3500 records  into a 40% / 60% split (1,400 / 2,100). </p></li>\n<li><p>If the number of records returned from Query A is >=3001 and &lt;=50,000 then split the records into a 10% / 90% split.Etc. Etc. </p></li>\n<li><p>I want the actual records returned, and not just the math acting on the records that returns one row with a number in it (in the column).</p></li>\n</ul>\n"},{"tags":["oracle","grails","plsql","migration","liquibase"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":53,"score":1,"question_id":12691301,"title":"Using PLSQL in a grails database migation","body":"<p>Im using the Grails database migration plugin by liquibase. Im trying to use aPLSQL statement in the migration to find and remove a constraint on a table, im using this approach as i dont know the name of the constraint and it will vary on different systems i use. </p>\n\n<p>Some notes:</p>\n\n<ul>\n<li>Grail 1.3.7</li>\n<li>Database-migration 1.0 </li>\n</ul>\n\n<p>This is the code from the migration </p>\n\n<pre><code>sql(\"declare\\n\" +\n      \"vOldName all_constraints.constraint_name%TYPE\\n\" +\n    \"begin\\n\" +\n      \"select CONSTRAINT_NAME\\n\" +\n      \"into   vOldName\\n\" +\n      \"from   all_constraints\\n\" +\n      \"where  TABLE_NAME='TABLENAME' and CONSTRAINT_TYPE='U' and OWNER='USERNAME'\\n\" +\n      \"execute immediate 'alter table USERNAME.TABLENAMEdrop constraint '\\n\" +\n      \"|| vOldName\\n\" +\n    \"end\")\n</code></pre>\n\n<p>When i run this i get the following error:</p>\n\n<pre><code>java.sql.SQLException: ORA-06550: line 3, column 1:\n  PLS-00103: Encountered the symbol \"BEGIN\" when expecting one of the following:\n    := ( ; not null range default character\n  The symbol \";\" was substituted for \"BEGIN\" to continue.\n</code></pre>\n\n<p>I have tried to add <code>;</code> to the end of each statement but it them complains about seeing end-of-file in the code. </p>\n\n<p>Any help please ?</p>\n"},{"tags":["oracle","integration"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12700149,"title":"Retrieving Oracle E-Business Financials Fixed Asset and General Ledger data for integration","body":"<p>I am attempting to retrieve General Ledger and Fixed Asset data from Oracle E-Business Suite Financials (version 12.1.3).  The data will then be used to integrate with a third party application.  I have looked at the Oracle Integration Repository (iRep) and did not see any interfaces that would provide the Fixed Asset or General Ledger data.  I would prefer to use a published API but accessing the database directly has also been proposed.</p>\n\n<p>Is there a way to retrieve the General Ledger and Fixed Assets data?  </p>\n\n<p>Thanks</p>\n\n<p>SM</p>\n"},{"tags":["java","oracle","jboss","database-deadlocks"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12638966,"title":"How Can I Monitor The Database Transactions in my multi-threaded, EJB2 JBoss Application?","body":"<p>I have encountered a reproducible Oracle deadlock within my application. An initial investigation of the code has not thrown up any obvious cause, so I would like to re-create the situation while logging the SQL being run and most importantly, the transactions they are occurring within. </p>\n\n<p>I started adding my own debug statements, but this seems like I am re-inventing the wheel and has already proved error prone (I initially missed that one of my EJB methods was defined as \"RequiresNew\")</p>\n\n<p>Are there tools which will do this? I've looked at:</p>\n\n<ul>\n<li><p>log4jdbc, but it is not clear from the docs that I've seen that it\nwill log the separate transactions, plus it doesn't support\ndatasources, so I'd need work round that.</p></li>\n<li><p>jdbcslog - also not clear if it would log transactions</p></li>\n</ul>\n\n<p>Or am I missing some more obvious way to do this?</p>\n"},{"tags":["oracle","query","logging","parameters"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":12535114,"title":"Oracle: show parameters on error","body":"<p>When Oracle logs a parameterized SQL query failing, it shows \"?\" in place of the parameters, i.e. the query before replacing parameters. For example, </p>\n\n<pre><code>\"SELECT * FROM table where col like '?'\" \nSQL state [99999]; error code [29902]; \nORA-29902: error in executing ODCIIndexStart() routine ORA-20000: \n  Oracle Text error: DRG-50901: \n  text query parser syntax error on line 1, column 48\n</code></pre>\n\n<p>Is there a way to change logging so it shows the <strong>parameter values</strong>? The information above is absolutely useless unless I can see what the actual parsing problem was. </p>\n\n<p>In general, is there a way to set logs in Oracle to show parameters in parameterized query errors?</p>\n"},{"tags":["sql","oracle","escaping"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12698572,"title":"Oracle: Add incremental ids for unique combination of two other columns","body":"<p>I have a table which looks like this</p>\n\n<pre><code>Seq ID | Uid | Type | URL\n</code></pre>\n\n<p>for each <code>Uid</code> I can have multiple <code>Urls</code> for any given type, for example </p>\n\n<p><code>Uid 123</code> can have <code>5 video urls</code> and <code>6 image type urls</code></p>\n\n<p>I want to insert auto incrementing seq id for each combination of <code>Uid</code> and <code>Type</code> so in the previous example the seq <code>id</code> of <code>uid 123</code> and type video will go <code>1,2,3,4,5</code> for each <code>video url</code> and <code>1,2,3,4,5,6</code> for each <code>image type url</code>, and same for all the other <code>uid</code> and <code>type</code> combinations.</p>\n"},{"tags":["sql-server","oracle","linked-server","openquery"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":85,"score":1,"question_id":12697874,"title":"\"ORA-00936: missing expression\" Linked query to Oracle using OpenQuery","body":"<p>I am trying to execute the following query:</p>\n\n<pre><code>SELECT *\nFROM OPENQUERY\n(\n    CLP,\n    '\n        SELECT *\n        FROM ORACLE_TABLE\n        WHERE [UPDATEDATE] &gt; ''1900-01-01 12:00 AM''\n    '\n)\n</code></pre>\n\n<p>This query works fine when I remove the date criteria. But as soon as I try to pass this criteria it no longer works. I can't figure out what I am missing.</p>\n"},{"tags":["oracle","match"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":12691130,"title":"Oracle/PLSQL. Select only best match between two tables","body":"<p>I have two tables:</p>\n\n<pre><code>Vehicles \nmake    model         modification    \nAudi     A 5         A 5 2010 Sportsback 2.8      \nAudi     A 5         A 5 2012 Quattro L     \nAudi     A 5         A 5 Cabriolet \n</code></pre>\n\n<p>and</p>\n\n<pre><code>matchingModel \nmake    model      modContain    modEnd    finalModel    \nAudi     A 5       Sportback              A5 Sportback\nAudi     A 5                       L        A5 L\nAudi     A 5                                A5\n</code></pre>\n\n<p>My task is to get only best fitting finalModel by finding matches (can be seen in select below).\nFirst i tried to join tables </p>\n\n<pre><code>(SELECT \nmatchingModel.finalModel\n  FROM vehicles\n    LEFT OUTER JOIN matchingModel ON \nmatchingModel.TEXT1 = vehicles.make\n\n    AND vehicles.model = nvl(matchingModel.model,vehicles.model)\n    AND vehicles.modification LIKE decode(matchingModel.modContain, NULL, vehicles.modification, '%'||matchingModel.modContain||'%')\n    AND vehicles.modification LIKE decode(matchingModel.modEnd, NULL, vehicles.modification, '%'||' '||matchingModel.modEnd)\n)\nAS bestMatch\n</code></pre>\n\n<p>but that did not work, because as Sportsback was found as sportsback, later its overwritten as a simple A5 because that matches too.</p>\n\n<p>So next i made this happen simply by \"nvling\" all possible options: nvl(nvl(nvl(select where make, model fits and modContains is in the middle of Modification and option cell is empty), (select where make, model fits and modEnd is like ending of Modification and modEnd is not empty), (select where make and model fits AND so on)) AS Bestmatch\nThis works, but it is very slow (and both tables have more that 500k records).</p>\n\n<p>This is just a part of very huge select, so its difficult to rewrite this normal way. \nAnyway, the question is, are there any best practices how to get best match, only once, fast, in oracle? The problems i have run into, is performance, or values fits twice, or \"where\" clause does not work, because i can not know if modContain or modEnd is empty or not.</p>\n\n<p>Thank You in advance.\nSorry for English.</p>\n"},{"tags":["performance","oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":151,"score":0,"question_id":10595337,"title":"Oracle Cursor output takes long time","body":"<p>I have problem in stored procedure. The stored procedure produces Cursor output. The SQL query which produces the output execute in less than 1 Sec.But procedure takes more than 10 Minutes to execute.Stored procedure doesnot have any other quires.</p>\n"},{"tags":["oracle","jdbc","jboss"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12695433,"title":"How to set oracle v$session.program or v$session.process through jboss with XA connections","body":"<p>I am trying to set the <code>v$session.program</code> or <code>v$session.process</code> connection property via <code>jboss</code> to a value so i can distinguish the different jboss instances. We are using xa connections.  <a href=\"http://community.jboss.org/wiki/HowToSpecifyOracleConnectionProgramProperty\" rel=\"nofollow\">This</a> site shows how to do it for local tx datasource but not XA. I read some places that said- with XA datasources you can not achieve this. Is that true? We really need to be able to see which session correlates to which process. </p>\n\n<p><a href=\"https://community.jboss.org/thread/72628\" rel=\"nofollow\">This</a> person also has the same issue.</p>\n"},{"tags":["oracle"],"answer_count":4,"favorite_count":2,"up_vote_count":13,"down_vote_count":0,"view_count":4820,"score":13,"question_id":1171196,"title":"difference between varchar and varchar2","body":"<p>difference between varchar and varchar2?</p>\n"},{"tags":["oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":12695947,"title":"Using Change Data Capture with an Oracle View","body":"<p>I have an Oracle view that I'm using.  I don't have access to the tables, just the data in the view.  Is it possible to use Change Data Capture with an Oracle View?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["database","oracle","table","truncate"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12694148,"title":"Oracle database truncate table (or something similar, but not delete) partially based on condition","body":"<p>I am not sure if this question is an obvious one.  I need to delete a load of data.  Delete is expensive.  I need to truncate the table but not fully so that the memory is released and water mark is changed.<br>\nIs there any feature which would allow me to truncate a table based on a condition for select rows? </p>\n\n<p>Thanks in advance.\n-Sid</p>\n"},{"tags":["sql","oracle","plsql","insert"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":102,"score":0,"question_id":12694524,"title":"Oracle PLSQL Insert only if doesn't exist.","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3147874/oracle-insert-if-row-not-exists\">oracle insert if row not exists</a>  </p>\n</blockquote>\n\n\n\n<p>I am using the query below to calculate a total for some data, however, I want the insert to only be executed if the ID doesn't exist in the EL_CLIENT_REC_UNITS in the first place. Can anyone see a way of doing this?</p>\n\n<pre><code>     INSERT INTO EL_CLIENT_REC_UNITS \n     (ID,\n     EL_CLIENT_ID,\n     RECORDING_ID,\n     UNIT_TYPE,\n     PHY_DIG_OR_TOTAL,\n     CONTROLLED_PERCENTAGE,\n     PERC_ADJ_UNITS_RECEIVED,\n     SUM_UNITS_RECEIVED) (       \n      (SELECT \n        EL_CLIENT_ID||RECORDING_ID||'CT'   AS ID,\n        EL_CLIENT_ID                 AS EL_CLIENT_ID, \n        RECORDING_ID                 AS RECORDING_ID, \n        UNIT_TYPE                    AS UNIT_TYPE, \n        'Total'                      AS PHY_DIG_OR_TOTAL, \n        NULL AS CONTROLLED_PERCENTAGE,\n        SUM(PERC_ADJ_UNITS_RECEIVED) AS PERC_ADJ_UNITS_RECEIVED,\n        SUM(SUM_UNITS_RECEIVED)      AS SUM_UNITS_RECEIVED\n    FROM EL_CLIENT_REC_UNITS\n    WHERE EL_CLIENT_ID = pRow.ID\n    AND UNIT_TYPE = 'Cleared'\n    GROUP BY UNIT_TYPE, EL_CLIENT_ID, RECORDING_ID)\n    WHERE NOT EXISTS (SELECT );\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":54,"score":-1,"question_id":12693635,"title":"trigger failed -ORA-04098 is invalid and failed re-validation sql","body":"<pre><code>create or replace trigger \"STUDENT_PERSONAL_DETAIL_T1\" \nAFTER insert or update or delete on \"STUDENT_PERSONAL_DETAIL\" \nfor each row \nbegin \n  insert into fa1 (s_id,name,class,sec) \n  select reg_no,name,class,sec \n  from inserted \nend;\n</code></pre>\n\n<p>this is the trigger created using oracle xe trigger creating interface\nthis is created without error but when a insert is called on the table trigger error is shown\ntrigger failed -ORA-04098 is invalid and failed re-validation</p>\n\n<p>i have gone through a lot of similar questions like this and could not find a solution to this</p>\n\n<p>guidence and suggestions will help a lot.</p>\n\n<p>lots of thanks in advance.</p>\n"},{"tags":["sql","oracle","query","data-warehouse","analytic-functions"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":940,"score":1,"question_id":6847814,"title":"Group by vs Partition by in Oracle","body":"<p>I am writing a query to fetch records from a Oracle warehouse. Its a simple Select Query with joins on few tables and i have few columns to be aggregated. Hence i end up using Groupby on rest of the columns. </p>\n\n<p>Say I am picking some 10 columns and out of which 5 is aggregate columns. so i need to group by on the other 5 columns. I can even achieve the same by not doing a Groupby and using over (paritition by) clause on the each each aggregate column i want to derive. </p>\n\n<p>I am not sure which is better against a warehouse or in general.</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12693566,"title":"SQL SELECT what in range number","body":"<p>I need help to solve my issue.</p>\n\n<p>I have a table like this one,</p>\n\n<pre><code>id | Desc | Min Range | Max Range\n-----------------------------------\n1  |  A   |     0     |    10\n2  |  B   |     11    |    20\n3  |  C   |     21    |    30\n</code></pre>\n\n<p>How to get the second record when I put parameter 20.</p>\n\n<p>My solution now is like this:</p>\n\n<pre><code>select * from table where maxRange &lt;= 20\n</code></pre>\n\n<p>and in java, I get last of result list.</p>\n\n<p>My problem is I don't have parameter to compare when I use between. eg. </p>\n\n<pre><code>select * from table where maxRange between ? and ?\n</code></pre>\n"},{"tags":[".net","sql","oracle","multiple-tables"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":310,"score":2,"question_id":6691904,"title":"Multiple oracle queries problem","body":"<p>I'm trying to run a query from a .NET page but I seem to having some problems with having multiple queries.</p>\n\n<p>My query is similar to this</p>\n\n<p><code>SELECT * FROM table1; SELECT * from table2</code></p>\n\n<p>But i seem to get an invalid character error when executing this from a .Net page. It runs fine in SQL developer but only fails when i put it in my .NET page.</p>\n\n<p>I've added the <code>BEGIN</code> and <code>END</code> to the query as some websites suggest you need this to run multiple queries but then I get the following error</p>\n\n<blockquote>\n  <p>ORA-06550: line 1, column 7:\n  PLS-00428: an INTO clause is expected in this SELECT statement</p>\n</blockquote>\n\n<p>Can anyone shed any light on this one?</p>\n\n<p>Thanks in advance!</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Here's some code</p>\n\n<pre><code>        query = conn.CreateCommand()\n\n        query.CommandText = \"SELECT * from table1; SELECT * FROM table2;\"\n\n        DataSet = New DataSet()\n        DataAdapter = New DataAdapter(query)\n        DataAdapter.Fill(DataSet)\n\n        datagrid1.DataSource = DataSet.Tables(0)\n        datagrid1.DataBind()\n\n        lbl1.Text = DataSet.Tables(1).Rows(0).Item(\"column1\").ToString()\n</code></pre>\n"},{"tags":["regex","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":56,"score":4,"question_id":12692515,"title":"Match any except list of values - oracle regex","body":"<p>I need an Oracle regex that will match a file-name in the format <code>ABCD_EFG_YYYYMMDD_HH(24)MISS.csv</code>, <em>except</em> if the time-part is one of three specific values: <code>110000</code>, <code>140000</code>, or <code>180000</code>.</p>\n\n<p>So, for example, it will match the file-name <code>ABC_DEF_20120925_110001.csv</code>, but not the file-name <code>ABCD_EFG_20120925_110000.csv</code> is not.</p>\n\n<p>The following non-Oracle regex works:</p>\n\n<pre><code>^ABCD_EFG_[0-9]*_(?!110000|140000|180000)[0-9]*\\.csv$\n</code></pre>\n\n<p>but I don't know how to write it as an Oracle regex.</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":70,"score":5,"question_id":12692430,"title":"\"with... as\" in SQL Navigator","body":"<p>The following query works:</p>\n\n<pre><code>select count(*) from everything where num not in (select num from sometable)\n</code></pre>\n\n<p>The following query is supposed to be equivalent to the above, but results in an \"invalid identifier\" error:</p>\n\n<pre><code>with unwanted as (select num from sometable)\nselect count(*) from everything where num not in unwanted\n</code></pre>\n\n<p>What is wrong with the second query?</p>\n"},{"tags":["oracle","apache","oracle-http-server"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12692356,"title":"Protect rewrite/proxy using mod_plsql and CustomOwa","body":"<p>I have an application that is using Oracle HTTP Server (a modified version of Apache). I am trying to setup a rewrite/proxy. I would like to protect this rewrite/proxy using CustomOwa from mod_plsql.</p>\n\n<p>My dads.conf is as follows:</p>\n\n<pre><code>&lt;Location /test&gt;    \n    SetHandler pls_handler\n    Order allow,deny\n    Allow from All\n    AllowOverride None\n    PlsqlDatabaseUsername username\n    PlsqlDatabaseConnectString 127.0.0.1:1521:user SIDFormat\n    PlsqlAuthenticationMode CustomOwa\n    PlsqlSessionStateManagement StatelessWithFastResetPackageState\n    PlsqlDocumentTablename table_name\n    PlsqlAlwaysDescribeProcedure Off\n    PlsqlDatabasePassword password\n&lt;/Location&gt;\n</code></pre>\n\n<p>I want all URLs under /test to first use mod_plsql/CustomOwa (so that users are forced to login) and then proceed to process my rewrite/proxy rule.</p>\n\n<p>No matter where I seem to place either a mod_rewrite rule or mod_proxy rule, they get processed instead of the mod_plsql.</p>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["arrays","oracle","parameters"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":221,"score":1,"question_id":12677746,"title":"Oracle stored procedure using array as parameter for table insert","body":"<p>I've been searching for a clear example of this, without luck.  Sorry if it's already been answered.</p>\n\n<p>I'm trying to do something pretty simple - a stored procedure that will take the input and insert them into a table. I want it to take an array of multiple rows and do the insert all at once.</p>\n\n<p>I thought this would be simple, but I haven't found an example that shows me.</p>\n\n<p>In a lot of examples, I see people create a function to return the array - is what I have to do?</p>\n\n<p>So far I have:</p>\n\n<pre><code>CREATE OR REPLACE TYPE my_type  is table of  ( name varchar2(20), phone varchar2(10));\n\nCREATE OR REPLACE PROCEDURE customer.insert_mydata(v_my_data my_type )\nAS\nBEGIN\n\n   BEGIN\n insert into mytable(Name, phone)\n values (v_my_data.name, v_my_data.phone) ; \n      COMMIT;\n   END;\nEXCEPTION\n   WHEN OTHERS\n   THEN\n      ROLLBACK;\n---error logging      );\nEND;\n</code></pre>\n"},{"tags":["xml","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12690868,"title":"how to use xmltable in oracle?","body":"<p>I am using Oracle's XML DB to create user profiles. I stored user profiles in a single XMLTYPE column with other relational columns (id, username, password) in the table. The XML is of the following format:</p>\n\n<pre><code>&lt;profile&gt;\n&lt;subject&gt;I\n       &lt;action&gt;like\n           &lt;object&gt;sports&lt;/object&gt;\n               ...\n           &lt;object&gt;music&lt;/object\n       &lt;/action&gt;\n    &lt;/subject&gt;\n&lt;/profile&gt;\n</code></pre>\n\n<p>I used the following query,</p>\n\n<pre><code>SELECT *\nFROM user,\nXMLTABLE(\n '//profile'\n PASSING user.profile\n return COLUMNS action VARCHAR2(20) PATH '/subject/action',\n         object VARCHAR2(30) PATH '/subject/action/object'\n);\n</code></pre>\n\n<p>which gives me nothing. How could I make this thing work? </p>\n"},{"tags":["oracle","variables","oracle11g","osb","oracle-service-bus"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":290,"score":0,"question_id":8928511,"title":"How to define a variable in Oracle Service Bus?","body":"<p>how can I define a variable in an Proxy Service and what is the scope of a variable?</p>\n\n<p>Thanks, Chris</p>\n"},{"tags":["sql","string","oracle","digits"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":103,"score":1,"question_id":12670495,"title":"Oracle SQL : search column that starts with digits","body":"<p>I'd like to find all the rows which column value begins with a digit.</p>\n\n<p>Its works well with this request :</p>\n\n<pre><code>    WHERE trim(u_ods_val3.ods_itn_PHRSBMO.NO_ART_TECH_OI)    IS NOT NULL\n  AND (SUBSTR(u_ods_val3.ODS_ITN_PHRSBMO.NO_ART_TECH_OI,0,1)='0'\n  OR SUBSTR(u_ods_val3.ODS_ITN_PHRSBMO.NO_ART_TECH_OI,0,1)  ='1'\n  OR SUBSTR(u_ods_val3.ODS_ITN_PHRSBMO.NO_ART_TECH_OI,0,1)  ='2 '\n  OR SUBSTR(u_ods_val3.ODS_ITN_PHRSBMO.NO_ART_TECH_OI,0,1)  ='3'\n  OR SUBSTR(u_ods_val3.ODS_ITN_PHRSBMO.NO_ART_TECH_OI,0,1)  ='4'\n  OR SUBSTR(u_ods_val3.ODS_ITN_PHRSBMO.NO_ART_TECH_OI,0,1)  ='5'\n  OR SUBSTR(u_ods_val3.ODS_ITN_PHRSBMO.NO_ART_TECH_OI,0,1)  ='6'\n  OR SUBSTR(u_ods_val3.ODS_ITN_PHRSBMO.NO_ART_TECH_OI,0,1)  ='7'\n  OR SUBSTR(u_ods_val3.ODS_ITN_PHRSBMO.NO_ART_TECH_OI,0,1)  ='8'\n  OR SUBSTR(u_ods_val3.ODS_ITN_PHRSBMO.NO_ART_TECH_OI,0,1)  ='9')\n</code></pre>\n\n<p>But it is too long.</p>\n\n<p>Thank you for your help.</p>\n"},{"tags":["sql","oracle","oracle11g","ora-06553"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":450,"score":-3,"question_id":9337956,"title":"Function to verify username and password in pl/sql","body":"<p>I'm new to pl/sql and got a homework problem that I've got totally stuck on.</p>\n\n<p>I've got a table called BANKCUSTOMER with the following columns:</p>\n\n<pre><code> USERNAME                                  NOT NULL VARCHAR2(11)\n FAMILY_NAME                               NOT NULL VARCHAR2(25)\n NAME                                      NOT NULL VARCHAR2(25)\n PASSWD                                    NOT NULL VARCHAR2(6)\n</code></pre>\n\n<p>I want to make a function which checks in the database if the users USERNAME and PASSWORD matches the data in the database. If the login succeeds then it should print out \"Login successful!\" otherwise \"Wrong username or password!\"</p>\n\n<p>I visited a pl/sql tutorial site and came over the following code which i modified a bit so it can work with my database, but there is something I don't understand and that is what <code>z number</code> does and what <code>begin  select 1  into z</code> does. Could someone please explain that for me. </p>\n\n<pre><code>create or replace function log_in(x in varchar2, y in varchar2)   \nreturn varchar2  \nas  \n  z number;  \nbegin  \n  select 1  \n    into z   \n    from bankcustomer   \n    where username=x   \n    and passwd=y;  \n  dbms_output.put_line('Login successful!');  \nexception  \nwhen no_data_found then  \n  dbms_output.put_line('Wrong username or password!'); \nend; \n</code></pre>\n\n<p>I would like to test the function by writing <code>SELECT log_in() FROM dual;</code> to see if it works. When I write <code>SELECT log_in() FROM dual;</code> I get an error message saying:</p>\n\n<blockquote>\n  <p>Error starting at line 1 in command:\n  SELECT log_in() FROM dual\n  Error at Command Line:1 Column:7\n  Error report:\n  SQL Error: ORA-06553: PLS-306: wrong number or types of arguments in call to 'LOG_IN'\n  06553. 00000 -  \"PLS-%s: %s\"\n  *Cause:<br>\n  *Action:</p>\n</blockquote>\n\n<p>How can I solve this homework problem?</p>\n\n<p>Sorry for my newbie questions (hope that I can learn so that I can help others in the future).\nThanks in advance!</p>\n"},{"tags":["sql","oracle","select","insert"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12690829,"title":"How to get the sum of two rows","body":"<p>I have two rows in a table. I want to add in a third row which holds the total value.</p>\n\n<p>My table is</p>\n\n<pre><code>SELECT \nCONTROLLED_PERCENTAGE, EL_CLIENT_ID, ID, \n   PERC_ADJ_UNITS_RECEIVED, PHY_DIG_OR_TOTAL, RECORDING_ID, \n   SUM_UNITS_RECEIVED, UNIT_TYPE\nFROM EL_CLIENT_REC_UNITS;\n</code></pre>\n\n<p>I will have the <code>EL_CLIENT_ID</code>, <code>UNIT_TYPE</code>, <code>PHY_DIG_OR_TOTAL</code> will be 'PHY' or 'DIG' and I am looking to get the total. I want to add up the two record's <code>SUM_UNITS_RECEIVED</code> and <code>PERC_UNITS_RECEIVED</code> where the <code>UNIT_TYPES</code>, <code>EL_CLIENT_ID</code> and <code>RECORDING_ID</code>s are the same. I then want to insert this as a new row with the same <code>UNIT_TYPE</code>, <code>RECORDING_ID</code> but this time have <code>PHY_DIG_OR_TOTAL</code> set to 'TOTAL';</p>\n"},{"tags":["css","oracle","oracle-apex","lov"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12688599,"title":"How to colour a column differently depending on value","body":"<p>I am trying to create a column in a report which would take entries from a corresponding column from the database. This LOV is returning the <code>active</code> or <code>inactive</code> status depending on the value of the base column. </p>\n\n<p>I would like to add colours to this column so it could be easier to spot records where the status has been set to <code>inactive</code>. So, green for <code>active</code> and red for <code>inactive</code>.<br>\nAny help greatly appreciated.</p>\n"}]}
{"total":22203,"page":17,"pagesize":100,"questions":[{"tags":["oracle","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12688317,"title":"Clear Oracle session state","body":"<p>A database connection on Oracle can have session state that persists for the lifetime of the connection, i.e. in the form of package variables.</p>\n\n<p>Is there a way of flushing/clearing all that state between calls during a connection without killing the connection and reestablishing a new connection.</p>\n\n<p>I.e. consider a package variable first set in the package init, and later modified within some procedure in that package: how to \"reset\" the package so that multiple calls to the procedure from 1 connection always lead to a reinit of the package?</p>\n\n<p>In general: how to \"reset\" any session state between execution of statements from a client on that connection?</p>\n"},{"tags":["c#","oracle","tnsnames","tns"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12688500,"title":"How do I find the TNS path used by a .NET Application?","body":"<p>I have the following error and I'd like to </p>\n\n<p>ORA-12154 TNS: impossibile risolvere l'identificativo di connessione specificato</p>\n\n<p>In english sounds like:</p>\n\n<p>ORA-12154 TNS: it's impossible to find the specified connection identifier</p>\n\n<p>But in witch file? <strong>I've more than one oracle client installed</strong>. I'd like to execute a .NET code witch says where is located the TNS file. \nI've seen this problem for five years in my company with no one trying to solve it.</p>\n"},{"tags":["oracle","load","external-tables","direct-path"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":725,"score":4,"question_id":4606203,"title":"How do I parallel direct-path load using Oracle external tables?","body":"<p>Some years ago, Thomas Kyte said this (<a href=\"http://robertgfreeman.blogspot.com/2005/05/oracle-external-tables.html?showComment=1117287300000#c111728730017733217\" rel=\"nofollow\">here</a>):</p>\n\n<blockquote>\n  <p>My favorite use of external tables:</p>\n  \n  <p>Load this really big file ASAP. In the past, setup the scripts to parallel direct path load. Coordinate the firing of said scripts. Review log files to make sure they all finished. Split up input file or use skip and load to slice the file up. In short, a pain in the butt.</p>\n  \n  <p>Now:</p>\n\n<pre><code>create table ET parallel;\ncreate table new_table (...) parallel\nas\nselect * from ET;\n</code></pre>\n  \n  <p>parallel direct path load made trivial. </p>\n</blockquote>\n\n<p>Except this isn't valid syntax... </p>\n\n<p>How do I use Oracle's external tables to perform a \"parallel direct path load\"?</p>\n"},{"tags":["oracle","plsql","oracle11g","oracleinternals"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":157,"score":0,"question_id":12687196,"title":"Oracle Error: ORA-00600: internal error code, arguments: [13009], [5000], [1], [17], [1], [], [], [], [], [], [], []::","body":"<p>I am getting a weird problem while running one procedure .</p>\n\n<p>Proc is like shown below :</p>\n\n<pre><code>procedure abc \nIS \nCURSOR xyz_cur IS\n SELECT x\n       ,y\n       ,z \n from temp \n  where y IN ('abc'.'pqr'.'def','sql','pqw') \nfor update nowait;\nBEGIN\n\nopen xyz_cur ;\n:\n:\n\nEND abc;\n</code></pre>\n\n<p>now earlier the cursor query was without 'sql','pqw' .I have extented this IN statement with these two varchar values .And the table temp is having a check constaint on column y ,i have also extended the check constaints .</p>\n\n<p>Now how can i resolve my problem ,it works well without the two value that i recently added .</p>\n\n<p>What i have tried ,\ni have analysed the table and rebuild the indexes but the still no luck .Please help me </p>\n"},{"tags":["database","oracle","database-schema"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":4320,"score":3,"question_id":2509512,"title":"How to find foreign-key dependencies pointing to one record in Oracle?","body":"<p>I have a very large Oracle database, with many many tables and millions of rows. I need to delete one of them, but want to make sure that dropping it will not break any other dependent rows that point to it as a foreign key record. Is there a way to get a list of all the other records, or at least table schemas, that point to this row? I know that I could just try to delete it myself, and catch the exception, but I won't be running the script myself and need it to run clean the first time through. </p>\n\n<p>I have the tools SQL Developer from Oracle, and PL/SQL Developer from AllRoundAutomations at my disposal.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["sql","oracle","date","views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12687122,"title":"List of dates from a view","body":"<p>Ok this is a similar problem like the one I had before but it has the requirment that it needs to be a view with 1 variable and it needs to be as simple as possible.\nI need a view that generates a list of dates within a given month (that is the variable).</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>create view monthview(datesetter) as (   \nselect\nto_date(to_date(datesetter),'MM.YYYY')-1 + level as DateRange\nfrom\ndual\nwhere\n(to_date(to_date(datesetter),'MM.YYYY')-1+level) &lt;= sysdate\nconnect by level&lt;=31);\n</code></pre>\n\n<p>and the view should than be called by something like:</p>\n\n<pre><code>select * from monthview where datesetter='02.2008';\n</code></pre>\n\n<p>and then generate a list like</p>\n\n<pre><code>01.02.2007\n02.02.2007\n</code></pre>\n\n<p>and so on</p>\n\n<p>It either tells me that I can't compile the view due to the fact that there is a mistake when I use datesetter or it compiles the view but then it tells me thata there is a non numeric value where a numeric one is needed when I use 'datesetter' ....</p>\n\n<p>Thanks for any ideas or help </p>\n"},{"tags":["sql","database","oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":690,"score":1,"question_id":7604167,"title":"Oracle: Similar to sysdate but returning only time and only date","body":"<p>I understand that Oracle sysdate returns the current date AND time. That's great for timestamp or datetime columns.</p>\n\n<p>Now let's say I have a DATE only column. What keywords should I use on my insert query?</p>\n\n<pre><code>insert into myTable1(myDateOnlyColumn) values(???)\n</code></pre>\n\n<p>And let's say I have a TIME only column. What keywords should I use on my insert query?</p>\n\n<pre><code> insert into myTable2(myTimeOnlyColumn) values(???)\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["sql","oracle","materialized-views"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12674861,"title":"Life cycle of an Oracle Materialized view","body":"<p>I am looking for the life cycle of an Oracle materialized view.  For example the statement:  </p>\n\n<p><code>Create materialized view foo<br>\nRefresh On Commit<br>\n...</code></p>\n\n<p>Will this view be updated every time there is a commit to my database, or just one of the tables referenced in the view statement?  Also beyond this at what point does Oracle destroy the old cache and replace it with the new one?  Specifically what is the window of \"staleness\" for a materialized view?   Meaning is it dependent on how long it takes to create the materialized view.</p>\n"},{"tags":["sql","oracle","substr"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12683473,"title":"Oracle SQL substr","body":"<p>I have two tables:</p>\n\n<pre><code>Employee(empNo, lName, fName, sex, dob, address, deptno, position)\nZip(city, state, zipcode)\n</code></pre>\n\n<p>In the Employee table, the address is stored like this: <code>55 Maple Ln., AL 55555</code></p>\n\n<p>Yes, I know this is the most horrific way to store an address ever, but this is out of my control.</p>\n\n<p>I need to return empNo, lName, fName, the street portion of the address, the state portion, the city, and the zipcode in a query. This is what I am using and I am having a little difficulty getting it to work properly:</p>\n\n<pre><code>SELECT empNo, lName, fName,\n    substr(Address,0, INSTR(Address,',')-1) AS streetAddr,\n    city,\n    substr(Address, INSTR(Address,',')+2,2) AS stateAddr,\n    substr(Address,-5) AS zipC\nFROM Employee\n    JOIN Zip z ON z.zipcode = zipC\nWHERE deptNo = '124';\n</code></pre>\n\n<p>The error I am getting is on the JOIN statement; zipC is an invalid identifier. My problem is that I am trying to JOIN Employee and Zip via the zipcode portion of the tables. I only need to do this so that I can get city out of zipcode.</p>\n\n<p><strong>EDIT #1</strong></p>\n\n<p>I have also tried this:</p>\n\n<pre><code>SELECT e.empNo, e.lName, e.fName,\n    substr(e.Address,0, INSTR(e.Address,',')-1) AS streetAddr,\n    z.city,\n    substr(e.Address, INSTR(e.Address,',')+2,2) AS stateAddr,\n    substr(e.Address,-5) AS zipC\nFROM Employee e, Zip z\nWHERE deptNo = '124';\n</code></pre>\n"},{"tags":["java","oracle","jdbc","blob","clob"],"answer_count":8,"favorite_count":9,"up_vote_count":20,"down_vote_count":0,"view_count":17192,"score":20,"question_id":862355,"title":"Overcomplicated oracle jdbc BLOB handling","body":"<p>When I search the web for inserting BLOBs into Oracle database with jdbc thin driver, most of the webpages suggest a 3-step approach:</p>\n\n<ol>\n<li>insert <code>empty_blob()</code> value.</li>\n<li>select the row with <code>for update</code>.</li>\n<li>insert the real value.</li>\n</ol>\n\n<p>This works fine for me, here is an example:</p>\n\n<pre><code>Connection oracleConnection = ...\n\nbyte[] testArray = ...\n\nPreparedStatement ps = oracleConnection.prepareStatement(\n    \"insert into test (id, blobfield) values(?, empty_blob())\");\nps.setInt(1, 100);\nps.executeUpdate();\nps.close();\nps = oracleConnection.prepareStatement(\n    \"select blobfield from test where id = ? for update\");\nps.setInt(1, 100);\nOracleResultSet rs = (OracleResultSet) ps.executeQuery();\nif (rs.next()) {\n    BLOB blob = (BLOB) rs.getBLOB(1);\n    OutputStream outputStream = blob.setBinaryStream(0L);\n    InputStream inputStream = new ByteArrayInputStream(testArray);\n    byte[] buffer = new byte[blob.getBufferSize()];\n    int byteread = 0;\n    while ((byteread = inputStream.read(buffer)) != -1) {\n        outputStream.write(buffer, 0, byteread);\n    }\n    outputStream.close();\n    inputStream.close();\n}\n</code></pre>\n\n<p>There are some webpages where the authors suggest using a simpler 1-step solution. Previous example with this solution:</p>\n\n<pre><code>Connection oracleConnection = ...\n\nbyte[] testArray = ...\n\nPreparedStatement ps = oracleConnection.prepareStatement(\n    \"insert into test(id, blobfield) values(?, ?)\");\nBLOB blob = BLOB.createTemporary(oracleConnection, false, BLOB.DURATION_SESSION);\nOutputStream outputStream = blob.setBinaryStream(0L);\nInputStream inputStream = new ByteArrayInputStream(testArray);\nbyte[] buffer = new byte[blob.getBufferSize()];\nint byteread = 0;\nwhile ((byteread = inputStream.read(buffer)) != -1) {\n    outputStream.write(buffer, 0, byteread);\n}\noutputStream.close();\ninputStream.close();\n\nps.setInt(1, 100);\nps.setBlob(2, blob);\nps.executeUpdate();\nps.close();\n</code></pre>\n\n<p>The second code is much more easier, so my question is: What is the point of first (popular) solution? Is there (was there) some kind of constraint for the second solution (Oracle server version number, jdbc driver version, size of the blob,...)? Is the first solution better (speed, memory consumption,...)? Any reasons for not using the simpler second approach?</p>\n\n<p>The exact same question applies for CLOB fields.</p>\n"},{"tags":["oracle","oracle8i"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12684550,"title":"oracle Update with join syntax","body":"<p>I'm new to oracle 8i PL/SQL, please help me with PL/SQL simple update, I'm familiar with T-SQL, but confuse in PL/SQL. </p>\n\n<pre><code>Update a\nSET a.column = null\nFROM table1 a INNER JOIN table2 b ON a.fields1=b.fields1\nWHERE a.fields3=[criteria]\n</code></pre>\n\n<p>Any help would be appreciate,</p>\n\n<p>Rgds\nAffan</p>\n"},{"tags":["sql","oracle","delete"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12359555,"title":"pl/sql delete from query","body":"<p>All rows are getting deleted with this query while  I want to delete only those rows where <code>measureid</code> match in the two tables:</p>\n\n<pre><code>delete from temp1 \nwhere exists (select t1.* \n              from temp1 t1, temp2 t2 \n              where t2.measureid = t1.measureid)\n</code></pre>\n"},{"tags":["php","database","oracle","pdo","oci"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12684462,"title":"Connect to Oracle with PHP via ODBC","body":"<p>I'll start off by saying I am thoroughly confused.  I've read through \"The Underground PHP and Oracle Manual White Paper\" and through some similar questions on StackOverflow and I still have no idea what I need to do.</p>\n\n<p>I'm using PHP 5.3.1 on Ubuntu 12.04.  I'm trying to connect to Oracle 11g.  I don't know if I <strong>need</strong> Instant Client or Oracle XE.  I want to connect to it using PDO as that's how my code is already structured but I can't make heads or tails of the documentation.  I also have an option to connect via ODBC.  Any help would be greatly appreciated.</p>\n"},{"tags":["oracle","query-optimization"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12678493,"title":"optimizing a dup delete statement Oracle","body":"<p>I have 2 delete statements that are taking a long time to complete. There are several indexes on the columns in where clause.</p>\n\n<p><strong>What is a duplicate?</strong> \nIf 2 or more records have same values in columns id,cid,type,trefid,ordrefid,amount and paydt then there are duplicates.</p>\n\n<p>The DELETEs delete about 1 million record.</p>\n\n<p>Can they be re-written in any way to make it quicker.</p>\n\n<pre><code>DELETE FROM TABLE1 A WHERE loaddt &lt; (\n    SELECT max(loaddt) FROM TABLE1 B\n    WHERE \n    a.id=b.id and\n    a.cid=b.cid and\n    NVL(a.type,'-99999') = NVL(b.type,'-99999') and\n    NVL(a.trefid,'-99999')=NVL(b.trefid,'-99999') and\n    NVL(a.ordrefid,'-99999')= NVL(b.ordrefid,'-99999') and\n    NVL(a.amount,'-99999')=NVL(b.amount,'-99999') and\n    NVL(a.paydt,TO_DATE('9999-12-31','YYYY-MM-DD'))=NVL(b.paydt,TO_DATE('9999-12-31','YYYY-MM-DD'))\n);\n\n    COMMIT;\n\nDELETE FROM TABLE1 a where rowid &gt; (\n    Select min(rowid) from TABLE1 b\n    WHERE \n    a.id=b.id and\n    a.cid=b.cid and\n    NVL(a.type,'-99999') = NVL(b.type,'-99999') and\n    NVL(a.trefid,'-99999')=NVL(b.trefid,'-99999') and\n    NVL(a.ordrefid,'-99999')= NVL(b.ordrefid,'-99999') and\n    NVL(a.amount,'-99999')=NVL(b.amount,'-99999') and\n    NVL(a.paydt,TO_DATE('9999-12-31','YYYY-MM-DD'))=NVL(b.paydt,TO_DATE('9999-12-31','YYYY-MM-DD'))\n);\n\ncommit;\n</code></pre>\n\n<p>Explain Plan:</p>\n\n<pre><code>DELETE  TABLE1         \n\n    HASH JOIN 1296491 \n    Access Predicates \n\n        AND \n        A.ID=ITEM_1 \n        A.CID=ITEM_2 \n        ITEM_3=NVL(TYPE,'-99999') \n        ITEM_4=NVL(TREFID,'-99999') \n        ITEM_5=NVL(ORDREFID,'-99999') \n        ITEM_6=NVL(AMOUNT,(-99999)) \n        ITEM_7=NVL(PAYDT,TO_DATE(' 9999-12-31 00:00:00', 'syyyy-mm-dd hh24:mi:ss')) \n\n    Filter Predicates \n        LOADDT&lt;MAX(LOADDT)\n\n    TABLE ACCESS  TABLE1     FULL    267904 \n    VIEW VW_SQ_1         690385 \n    SORT GROUP BY    690385 \n        TABLE ACCESS TABLE1      FULL    267904 \n</code></pre>\n"},{"tags":["oracle","function","loops","plsql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":86,"score":-1,"question_id":12654304,"title":"Loop to check all 14 days in the pay period","body":"<p>Name: Calc_Anniversary</p>\n\n<p>Input: Pay_Date, Hire_Date, Termination_Date</p>\n\n<p>Output: \"Y\" if is the anniversary of the employee's Hire_Date, \"N\" if it is not, and \"T\" if he has been terminated before his anniversary.</p>\n\n<p>Description: Create local variables to hold the month and day of the employee's Date_of_Hire, Termination_Date, and of the processing date using the TO_CHAR function. First check to see if he was terminated before his anniversary. The anniversary could be on any day during the pay period, so there will be a loop to check all 14 days in the pay period to see if one was his anniversary.</p>\n\n<pre><code>  CREATE OR replace FUNCTION Calc_anniversary(\n   incoming_anniversary_date IN VARCHAR2)\n   RETURN BOOLEAN\n   IS\n hiredate        VARCHAR2(20);\n terminationdate VARCHAR(20);\n employeeid      VARCHAR2(38);\n paydate         NUMBER := 0;\n BEGIN\nSELECT Count(arndt_raw_time_sheet_data.pay_date)\nINTO   paydate\nFROM   arndt_raw_time_sheet_data\nWHERE paydate = incoming_anniversary_date;\n\nWHILE paydate &lt;= 14 LOOP\n    SELECT To_char(employee_id, '999'),\n           To_char(hire_date, 'DD-MON'),\n           To_char(termination_date, 'DD-MON')\n    INTO   employeeid, hiredate, terminationdate\n    FROM   employees,\n           time_sheet\n    WHERE  employees.employee_id = time_sheet.employee_id\n           AND paydate = pay_date;\n\n    IF terminationdate &gt; hiredate THEN\n      RETURN 'T';\n    ELSE\n      IF To_char(SYSDATE, 'DD-MON') = To_char(hiredate, 'DD-MON')THEN\n        RETURN 'Y';\n      ELSE\n        RETURN 'N';\n      END IF;\n    END IF;\n\n    paydate := paydate + 1;\nEND LOOP;\nEND; \n</code></pre>\n\n<p>Tables I am using</p>\n\n<pre><code>CREATE TABLE Employees ( EMPLOYEE_ID INTEGER,\nFIRST_NAME VARCHAR2(15),\n LAST_NAME VARCHAR2(25),\n ADDRESS_LINE_ONE VARCHAR2(35),\n ADDRESS_LINE_TWO VARCHAR2(35),\n CITY VARCHAR2(28),\n STATE CHAR(2),\n ZIP_CODE CHAR(10),\n COUNTY VARCHAR2(10),\n EMAIL VARCHAR2(16),\n PHONE_NUMBER VARCHAR2(12),\n SOCIAL_SECURITY_NUMBER VARCHAR2(11),\n HIRE_DATE DATE,\n TERMINATION_DATE DATE,\n DATE_OF_BIRTH DATE,\n SPOUSE_ID INTEGER,\n MARITAL_STATUS CHAR(1),\n  ALLOWANCES INTEGER,\n  PERSONAL_TIME_OFF FLOAT,\n  CONSTRAINT pk_employee_id PRIMARY KEY (EMPLOYEE_ID),\n   CONSTRAINT fk_spouse_id FOREIGN KEY (SPOUSE_ID) REFERENCES EMPLOYEES (EMPLOYEE_ID))\n /\n CREATE TABLE Arndt_Raw_Time_Sheet_data ( EMPLOYEE_ID INTEGER,\n    PAY_DATE DATE,\n     HOURS_WORKED FLOAT,\n     SALES_AMOUNT FLOAT,\n      CONSTRAINT pk_employee_id_pay_date_time PRIMARY KEY (EMPLOYEE_ID, PAY_DATE),\n      CONSTRAINT fk_employee_id_time FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEES (EMployee_ID));\n</code></pre>\n\n<p>error <strong>FUNCTION Calc_Anniversary compiled<br>\nWarning: execution completed with warning</strong>  </p>\n"},{"tags":["sql","database","oracle","oracle11g"],"answer_count":3,"favorite_count":2,"up_vote_count":10,"down_vote_count":0,"view_count":3161,"score":10,"question_id":7505020,"title":"Oracle - How to create a materialized view with FAST REFRESH and JOINS","body":"<p>So I'm pretty sure Oracle supports this, so I have no idea what I'm doing wrong.  This code works:</p>\n\n<pre><code>CREATE MATERIALIZED VIEW MV_Test\n  NOLOGGING\n  CACHE\n  BUILD IMMEDIATE \n  REFRESH FAST ON COMMIT \n  AS\n    SELECT V.* FROM TPM_PROJECTVERSION V;\n</code></pre>\n\n<p>If I add in a JOIN, it breaks:</p>\n\n<pre><code>CREATE MATERIALIZED VIEW MV_Test\n  NOLOGGING\n  CACHE\n  BUILD IMMEDIATE \n  REFRESH FAST ON COMMIT \n  AS\n    SELECT V.*, P.* FROM TPM_PROJECTVERSION V\n    INNER JOIN TPM_PROJECT P ON P.PROJECTID = V.PROJECTID\n</code></pre>\n\n<p>Now I get the error:</p>\n\n<p><em>ORA-12054: cannot set the ON COMMIT refresh attribute for the materialized view</em></p>\n\n<p>I've created materialized view logs on both TPM_PROJECT and TPM_PROJECTVERSION.  TPM_PROJECT has a primary key of PROJECTID and TPM_PROJECTVERSION has a compound primary key of (PROJECTID,VERSIONID).  What's the trick to this?  I've been digging through Oracle manuals to no avail.  Thanks!</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":6699,"score":1,"question_id":8944156,"title":"How to copy data from one database/table to another database/table","body":"<p>I have written the following query using the documentation at: <a href=\"http://docs.oracle.com/cd/B10500_01/server.920/a90842/apb.htm\" rel=\"nofollow\">Oracle Documentation</a> to copy some data from a database/table on my production server to database/table on Sandbox server.</p>\n\n<p><code>COPY FROM username1/passwd1@&lt;production_IP&gt; to username2/passwd2@&lt;sandbox_IP&gt; INSERT TABLE_C (*) USING \n(SELECT * FROM TABLE_C WHERE COL_A = 4884);</code></p>\n\n<p>However, I am constantly running into <code>Connection failed</code> error. Is there anything wrong with the query?</p>\n"},{"tags":["oracle","plsql","oracle-sqldeveloper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12681771,"title":"Oracle SqlDeveloper querying for a table using SELECT returns nothing","body":"<p>I open a connection to my schema and I want to view a table. </p>\n\n<p>Why does this work by itself:</p>\n\n<pre><code>select * from mytable;\n</code></pre>\n\n<p>But this does not:</p>\n\n<pre><code>   -- other statements above          \n\n   begin \n      insert into mytable(id, name) values (2, \"George\");\n   exception ... \n   end;\n\n   select * from mytable;\n</code></pre>\n\n<p>This returns nothing. No query output is given. Instead all I see is \"Task completed in 0.016 seconds\". </p>\n\n<p>If I restart sqldeveloper and run ONLY the begin/end and the select statements, I get this error thrown at me:</p>\n\n<pre><code>Error report:\nORA-06550: line 7, column 1:\nPLS-00103: Encountered the symbol \"SELECT\" \n06550. 00000 -  \"line %s, column %s:\\n%s\"\n*Cause:    Usually a PL/SQL compilation error.\n*Action:\n</code></pre>\n"},{"tags":["oracle","plsql","relational-database"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":12680726,"title":"Oracle relational database, querying/joining multiple tables","body":"<p>I know most people here tend to frown on people asking homework questions on here, but I am really stumped on one question in my database systems class.</p>\n\n<ol>\n<li>List all cities (city name and zip code where there is at least one property for rent managed by staff who works in the branch office at ‘1119 Leighton Ave’. Order your result by ascending order of city name. Otherwise, zero point.</li>\n</ol>\n\n<p>The database schema is:</p>\n\n<pre><code>Branch (bNo, street, zipcode)\nStaff (sNo, fName, lName, position, sex, dob, salary, bNo)\nProperty (pNo, street, zipcode, type, room, rent, oNo, sNo, bNo)\nOwner (oNo, fName, fName, street, zipcode, phone)\nClient (cNo, fName, lName, phone, prefType, maxRent)\nViewing (pNo, cNo, viewDate, cmmt)\nZip (city, state, zipcode)\n</code></pre>\n\n<p>And this is the query that I have tried to put together, very unsuccessfully...</p>\n\n<pre><code>SELECT z.city, p.zipcode\nFROM Zip z, Property p\nWHERE p.bNo = (SELECT bNo\n                   FROM Branch\n                   WHERE street = '1119 Leighton Ave');\n</code></pre>\n\n<p>I am having a bit of hard time with the joins. This statement above does NOT even come close to working right. I am digging through my book and the internet, trying to find some sort of help. Any help would be greatly appreciated. Thanks in advance.</p>\n\n<h3>UPDATE</h3>\n\n<p>I am currently trying:</p>\n\n<pre><code>SELECT DISTINCT Zip.city, Zip.zipcode AS Zip\nFROM Zip\n    JOIN Property ON Zip.zipcode = Property.zipcode\n    JOIN Branch ON Zip.zipcode = Branch.zipcode\nWHERE Property.bNo = (SELECT bNo\n                      FROM Branch\n                      WHERE Street = '1119 Leighton Ave')\nORDER BY Zip.city;\n</code></pre>\n\n<p>The output looks a lot better, but I don't think it is correct. I am checking it now.</p>\n\n<p>UPDATE #2</p>\n\n<p>Okay, so by running this query:</p>\n\n<pre><code>SELECT DISTINCT zipcode\nFROM Property\nWHERE bNo = 'B001';\n</code></pre>\n\n<p>and just as an FYI B001 is the branch number for the Branch located at 1119 Leighton Ave. Anyways, that command gave me the following zip codes:</p>\n\n<pre><code>36205\n36251\n36264\n36206\n36277\n36272\n36265\n36203\n36201\n</code></pre>\n\n<p>When I run the above command:</p>\n\n<pre><code>SELECT DISTINCT Zip.city, Zip.zipcode AS Zip\nFROM Zip\n    JOIN Property ON Zip.zipcode = Property.zipcode\n    JOIN Branch ON Zip.zipcode = Branch.zipcode\nWHERE Property.bNo = (SELECT bNo\n                      FROM Branch\n                      WHERE Street = '1119 Leighton Ave')\nORDER BY Zip.city;\n</code></pre>\n\n<p>This is my output:</p>\n\n<pre><code>City                  Zip\n--------------------- -----\nANNISTON              36206\nJACKSONVILLE          36265\n</code></pre>\n\n<p>So, I believe that something is a little off with this query. But you guys have given me a GREAT start, I will continue playing with it and I am confident that I can probably figure it out. Thanks a ton guys. </p>\n\n<p>I think I got it figured out thanks to all the help from everyone. </p>\n\n<pre><code>SELECT DISTINCT Zip.city, Zip.zipcode AS Zip\nFROM Zip\n    JOIN Property ON Zip.zipcode = Property.zipcode\n    JOIN Branch ON Zip.zipcode = Property.zipcode\n    JOIN Staff ON Staff.bNo = Branch.bNo\nWHERE Property.bNo = (SELECT bNo FROM Branch WHERE Street = '1119 Leighton Ave')\nORDER BY Zip.city\n</code></pre>\n"},{"tags":["java","oracle","jdbc","ora-00928"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":2056,"score":4,"question_id":8264727,"title":"java.sql.SQLException: ORA-00928: missing SELECT keyword. when inserting record to DB using JDBC","body":"<p>I get an error when I try to insert some rows to a db. so here is the code</p>\n\n<pre><code>try {\n    String insertStmt = \"INSERT into \" +\n                        \"MY_TABLE('RECORD_TYPE', 'FILE_TYPE', 'DATE', 'BATCH_NO', 'RECORD_COUNT')\" +\n                        \"VALUES(?, ?, ?, ?, ?);\";\n\n    PreparedStatement pstmt = super.con.prepareStatement(insertStmt);\n\n    pstmt.setString(1, input[0]);\n    pstmt.setString(2, input[1]);\n    pstmt.setString(3, input[2]);\n    pstmt.setString(4, input[3]);\n    pstmt.setString(5, input[4]);\n\n    System.out.println(\"Insert rows : \" + pstmt.executeUpdate());\n\n} catch (SQLException sqle) {\n    System.out.println(sqle.getMessage());\n    sqle.printStackTrace();\n} catch (Exception e) {\n    System.out.println(e.getMessage());\n    e.printStackTrace();\n} finally {\n    con.close();\n}\n</code></pre>\n\n<p>and everything on the db is of varchar type, double checked the columns (they all are the same name), took out the quotes off the column name (same result) no success. to add it up, the error message is not very helpful.</p>\n\n<p>any suggestions would be appreciated.</p>\n"},{"tags":["java","oracle","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":12678082,"title":"Junit with @Parameters to test data from file","body":"<p>I am trying to read data from a file and use the data for testing the procs. Even the proc to be tested is determined from the contents of the file.</p>\n\n<p>Sample.txt is the file from which I read the data, the file contains the following data</p>\n\n<pre><code>testproc=sample_check('N')\noutput=yes\ntype=function\ntestproc=sample_check('N')\noutput=yes\ntype=function\ntestproc=sample_check('N')\noutput=yes\ntype=function\n</code></pre>\n\n<p>The below program tries to read the file and populate its contents into a 2 dimensional String array.</p>\n\n<pre><code>@RunWith(value = Parameterized.class)\npublic class Testdata extends Testdb {\n\n    public String expected;\n    public String actual;\n\n    @Parameters\n    public static Collection&lt;String[]&gt; getTestParameters() {\n        String param[][] = new String [3][3];\n        String temp[] = new String [3];\n        int i = 0;\n        int j = 0;\n        try{\n            BufferedReader br = new BufferedReader(new FileReader(\"sample.txt\"));\n            String strLine;\n            String methodkey       = \"testproc\";\n            String methodtypekey   = \"type\";\n            String methodoutputkey = \"output\";\n            String method = \"\";\n            String methodtype = \"\";\n            String methodoutput = \"\";\n\n            //Read File Line By Line\n            while ((strLine = br.readLine()) != null)\n            {\n                StringTokenizer st = new StringTokenizer(strLine, \"=\");\n                while(st.hasMoreTokens())\n                {\n                    String key = st.nextToken();\n                    String val = st.nextToken();\n                    if (key.trim().equalsIgnoreCase(methodkey))\n                    {\n                        method = val.trim();\n                        temp[j] = \"SELECT \" + method + \" FROM dual\";\n                        j++;\n                    }\n                    else if (key.trim().equalsIgnoreCase(methodoutputkey))\n                    {\n                        methodoutput = val.trim();\n                        temp[j] = methodoutput;\n                        j++;\n                    }\n                    else if (key.trim().equalsIgnoreCase(methodtypekey))\n                    {\n                        methodtype = val.trim();\n                        if (methodtype.trim().equalsIgnoreCase(\"function\"))\n                        {\n                            System.out.println(i + \" \" + method);\n                            param[i] = temp;\n                            i++;\n                            j = 0;\n                        }\n                    }\n                }\n\n            }\n        }\n        catch (Exception e){//Catch exception if any\n            System.err.println(\"Error: \" + e.getMessage());\n        }\n\n        return Arrays.asList(param)           ;\n    }\n\n    public Testdata(String[] par) {\n        this.expected = par[0];\n        this.actual = par[1];\n    }\n\n    @Test\n    public void test_file_data() //throws java.io.IOException\n    {\n        testString(\"Output should be\"+expected , expected, actual);\n    }\n\n\n}\n</code></pre>\n\n<p>I receive an error \njava.lang.IllegalArgumentException: wrong number of arguments</p>\n\n<p>testString is a method that connects to the database to check if the actual value tallies with the expected result. This takes two string values as argument.</p>\n\n<p>My question is how should \nreturn Arrays.asList(param)\nand method \npublic Testdata(String[] par)\nlook like?</p>\n\n<p>I tested using this and it works fine but since I read from a file, I want to use an array which needs to be returned using return Arrays.asList</p>\n\n<pre><code>return Arrays.asList(new String[][]{\n            { \"yes\", \"SELECT sample_check('N') FROM dual\"},\n            { \"yes\", \"SELECT sample_check('N') FROM dual\"},\n            { \"yes\", \"SELECT sample_check('N') FROM dual\"}\n    })           ;\n}\n\npublic Testdata(String expected,\n                           String actual) {\n    this.expected = expected;\n    this.actual = actual;\n}\n</code></pre>\n\n<p>Any advice on getting this working?</p>\n"},{"tags":["sql","performance","oracle","optimizer","cbo"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":86,"score":3,"question_id":12681123,"title":"Adding 'distinct' keyword to oracle query obliterates query performance for no reason","body":"<p>I am quite confused by something I'm seeing in an Oracle 10 database.</p>\n\n<p>I have the following query.</p>\n\n<pre><code>select\nt2.duplicate_num\nfrom table1 t1, table2 t2,\n\n( \n   select joincriteria_0 from intable1 it1, intable2 it2 \n   where it2.identifier in (4496486,5911382) \n   and it1.joincriteria_0 = it2.joincriteria_0 \n   and it1.filter_0 = 1 \n) tt\n\nwhere t1.joincriteria_0 = tt.joincriteria_0\nand t2.joincriteria_1 = t1.joincriteria_1\nand t2.filter_0 = 3\nand t2.filter_1 = 1\nand t2.filter_2 not in (48020)\n</code></pre>\n\n<p>It doesn't really seem like anything special to me, here are the baseline performance numbers from autotrace:</p>\n\n<p>CR_GETS: 318</p>\n\n<p>CPU: 3</p>\n\n<p>ROWS: 33173</p>\n\n<p>Now if I add the 'DISTINCT' keyword to the query (e.g. 'select distinct t2.duplicate_num...') this happens</p>\n\n<p>CR_GETS: 152921</p>\n\n<p>CPU: 205</p>\n\n<p>ROWS: 305</p>\n\n<p>The query plan has not changed, but the logical IO  grows by a factor of 500. I was expecting CPU only to go up and logical IO to be largely unchanged.</p>\n\n<p>The net result is a query that runs 10-100x slower with the distinct keyword. I can put code into the applciation which would make the result set distinct in a fraction of the time. How does this make any sense? particularly without the query plan changing?</p>\n"},{"tags":["forms","oracle","oracle10g","report","application-server"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12675458,"title":"Why TOOL_ENV.GETVAR don't get all enviroment variables?","body":"<p>I am susing Oracle 10.1.2.0.4 and not default *.env file. I want to get a report server name with TOOL_ENV.GETVAR from Reports, but I get it empty. I tryed to get more enviroment variables with TOOL_ENV.GETVAR, but it gives more then half empty expresions. If I trying to get these  variables from Forms, everythink is O.K. I get correct expresions.</p>\n\n<p>Empty (-) and correct (+) variables expresions from Reports:</p>\n\n<pre><code>ORACLE_HOME +\nPATH +\nFORMS +\nCLASSPATH -\nD2KWUTIL_PATH -\nFORMS_RESTRICT_ENTER_QUERY -\nALLOW_DEBUG -\nWEBUTIL_CONFIG -\nFORMS_PATH +\nNLS_DATE_FORMAT +\nNLS_NUMERIC_CHARACTERS +\nNLS_LANG +\nUSER_NLS_LANG -\nREPSERVER_ENV_ID -\nFORMS_REJECT_GO_DISABLED_ITEM -\nFORMS_USER_DATE_FORMAT -\nFORMS_USER_DATETIME_FORMAT -\nMYREPSERVER -\n</code></pre>\n\n<p>Empty (-) and correct (+) variables expresions from Forms:</p>\n\n<pre><code>ORACLE_HOME +\nPATH +\nFORMS +\nCLASSPATH +\nD2KWUTIL_PATH +\nFORMS_RESTRICT_ENTER_QUERY +\nALLOW_DEBUG +\nWEBUTIL_CONFIG +\nFORMS_PATH +\nNLS_DATE_FORMAT +\nNLS_NUMERIC_CHARACTERS +\nNLS_LANG +\nUSER_NLS_LANG +\nREPSERVER_ENV_ID +\nFORMS_REJECT_GO_DISABLED_ITEM +\nFORMS_USER_DATE_FORMAT +\nFORMS_USER_DATETIME_FORMAT +\nMYREPSERVER +\n</code></pre>\n\n<p>Can anyone suggest where I have to start looking for bug?</p>\n"},{"tags":["visual-studio","oracle","odt"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12677469,"title":"Import Oracle database objects into Visual Studio Project (via ODT)","body":"<p>I am wanting to know whether it is possible to quickly import an entire Oracle database worth of objects into source control (within an appropriate folder structure) via ODT (Oracle Data Tools) / Visual-Studio.  You can easily create a file aligned to an object one at a time (right click on the object in the Server Explorer| Generate Create Script to Project) however I need to do this for all objects - i.e. pretty much the same post as (however this doesn't have an answer posted):-</p>\n\n<p><a href=\"http://stackoverflow.com/questions/8926609/import-all-objects-from-oracle-to-visual-studio-database-project\">Import all objects from Oracle to Visual Studio Database Project</a></p>\n\n<p>I have tried highlighting multiple objects then generating the script however this creates one big script (that by the way, afaik cannot be imported into the project as separate files [one file per object])</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":12679923,"title":"what is SQLPlus command to view a VIEW statement?","body":"<p>I just found out that one of the queries I am running is not coming from actual table, it is coming from a VIEW.</p>\n\n<p>I would like to see the SQL query in that VIEW. If I try to <code>describe</code> I get an object does not exist error. When I SELECT from the view I get some data.</p>\n"},{"tags":["oracle","permissions","oracle10g"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":12679167,"title":"Oracle Create Table without Insert permission","body":"<p>Is it possible in oracle dbms for a user to have the permission to create a table but not have the permission to insert in it although the same user just created it?\nThank you in advance!</p>\n"},{"tags":["sql","oracle","random"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12679490,"title":"inserting id into table with random number","body":"<p>I need to write a view that does a merge insert/update.\nWhen inserting, I need to insert <code>id</code>.\nThis <code>id</code> is also being inserted by random number generator in another program ( which I can't change ). </p>\n\n<p>I wanted to do <code>max(id) + 1</code>, but not sure if that is a good idea. Could you suggest any better solutions for this problem?</p>\n\n<p>or </p>\n\n<p>How about using with id as ( dbms_random .... ) do a</p>\n\n<pre><code>select * from table where id = ?\n</code></pre>\n\n<p>if row is not found, I will insert this id otherwise, I will generate another random and do a select.</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":6593,"score":4,"question_id":234532,"title":"SQL - Multiple Values comma separated when using GROUP BY","body":"<p>I have data that looks like</p>\n\n<blockquote>\n<pre><code>CUSTOMER,  CUSTOMER_ID, PRODUCT\nABC INC    1            XYX\nABC INC    1            ZZZ\nDEF CO     2            XYX\nDEF CO     2            ZZZ\nDEF CO     2            WWW\nGHI LLC    3            ZYX\n</code></pre>\n</blockquote>\n\n<p>I'd like to write a query that'd make the data look like this:</p>\n\n<blockquote>\n<pre><code>CUSTOMER, CUSTOMER_ID, PRODUCTS\nABC INC   1            XYX, ZZZ\nDEF CO    2            XYX, ZZZ, WWW\nGHI LLC   3            ZYX\n</code></pre>\n</blockquote>\n\n<p><strong>Using Oracle 10g if helps.  I saw something that would work using MYSQL, but I need a plain SQL or ORACLE equivalent.   I've also seen examples of stored procs that could be made, however, I cannot use a stored proc with the product i'm using.</strong></p>\n\n<p>Here's how'd it work in MySQL if i were using it</p>\n\n<pre><code>&gt; SELECT   CUSTOMER, CUSTOMER_ID,\n&gt; GROUP_CONCAT( PRODUCT ) FROM    \n&gt; MAGIC_TABLE GROUP BY CUSTOMER,\n&gt; CUSTOMER_ID\n</code></pre>\n\n<p>Thank you.</p>\n"},{"tags":["oracle","oracle11g","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":139,"score":0,"question_id":12679063,"title":"Executing a multi line statement in SQL Plus on Unix","body":"<p>I am trying to write a simple cursor and run it inside the command line Oracle client on Unix, SQL Plus.  I have mostly been using single line statements and can't find a way to execute a multi line statement once I am done writing it.  Can anybody help?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>DECLARE \n   TYPE array_t IS varray(4) OF varchar2(10); \n   ARRAY array_t := array_t('foo', 'bar', 'stack', 'overflow');\nBEGIN \n   FOR i IN 1..array.count loop\n       dbms_output.put_line(array(i)); \n   END loop; \nEND; \n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["java","oracle","java-ee","crud"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":12678355,"title":"Java EE 6 Tutorial Component","body":"<p>I am looking for a sample J2EE6 web service with a REST API and a database tier. My search took me to <a href=\"http://docs.oracle.com/javaee/6/tutorial/doc/bnayk.html\" rel=\"nofollow\">http://docs.oracle.com/javaee/6/tutorial/doc/bnayk.html</a>, which talks about obtaining  a list of J2EE6 examples by doing as follows:</p>\n\n<p>To Update the Tutorial Through the Update Center</p>\n\n<ul>\n<li>Open the Services tab in NetBeans IDE and expand Servers.</li>\n<li>Right-click the GlassFish Server 3 instance and select View Update Center to display the Update Tool.</li>\n<li>Select Available Updates in the tree to display a list of updated packages.</li>\n<li>Look for updates to the Java EE 6 Tutorial (javaee-tutorial) package.</li>\n<li>If there is an updated version of the Tutorial, select Java EE 6 Tutorial (javaee-tutorial) and click Install.</li>\n</ul>\n\n<p>The problem is the list has no <code>Java EE 6 Tutorial (javaee-tutorial) package</code> under <code>updates</code> or <code>Add-ons</code> or <code>Installed Components</code>.</p>\n\n<p>I am using Netbeans 7.2, Glassfish 3.1.2, Mac OSX Lion. All I want is a J2EE6 web service with a Database tier and a REST API tier. Does anyone know of any such examples?</p>\n"},{"tags":["sql","oracle","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":132,"score":-1,"question_id":9253632,"title":"sqlplus oracle... time spent list in ascending.. i dont think my answer is right?","body":"<p>Calculate the total number of days spent on resolving tickets for the month of\nJanuary 2012 for each tech personnel. List them in an ascending order.</p>\n\n<pre><code>TECH PERSONNEL (pplSoft, fname, lname, pittID, expertise, office phone) where fname is first name, and lname is last name.\n\nUSERS (pplSoft, fname, lname, pittID, office phone)\n\nCATEGORIES (category id, category, description) where this table lists all possible categories of submitted tickets.\n\nINVENTORY(machine name, IP, network port, MACADDR, location id)\n\nLOCATIONS(location id, location, building, notes)\n\nTICKETS (ticket number, owner pplSoft, date submitted, date closed, days worked on, category id, machine name, location, description)\n\nASSIGNMENT (ticket number, tech pplSoft, date assigned, status) where status held is an enumeration, could be: assigned, in progress, delegated, closed successful, or closed unsuccessful.\n</code></pre>\n\n<p>Now putting this into SQL. Here's my attempt </p>\n\n<pre><code>select tech_personnel, count(days_worked_on) as daysWorked \n  from tickets, \n       tech_personnel \n where date_submitted &gt;= '01-JAN-2012' \n   and date_submitted &lt;= '31-JAN-2012' \n Order by daysWorked ASC;\n</code></pre>\n"},{"tags":["sql","oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":117,"score":-2,"question_id":8658610,"title":"how to evaluate the table using PL/SQL program","body":"<p>I have a table \"emp\" the attribute are empno,empname,salary.</p>\n\n<p>I want to write a plsql program for evaluating the Salary&lt;20000, Salary&lt;30000 and Salary>20000 from emp table by accepting empno.</p>\n\n<p>If condition Salary>20000 is true then display \"Salary is less than 20000\", if the condition \"Salary&lt;30000 and Salary>20000\" then display \"Salary is less than 30000 but greater than 20000\". </p>\n\n<p>Please help me any one for creating a pl/sql program.</p>\n"},{"tags":["php","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":29,"score":-1,"question_id":12678198,"title":"PHP Loop/Conditional Suggestion for Website Navigation?","body":"<p>Writing my first php application. I'm stuck on how to add either a loop or conditional statement...I'm adding my sites navigation from Oracle database queries...a primary and secondary navigation...I've noted in my code where I need an if or while statement to decide if a <strong>ul</strong> tag is written. I only want the <strong>ul class = sub</strong> tag written and subsequent <strong>li</strong> list when I have secondary navigation under the primary navigation. Any suggestion that would point me in the right direction? Thanks in advance...</p>\n\n<p>`\n    \n    \n        \n        \n\n<pre><code>        $t1_query = \"SELECT * FROM PLUS_NAV_T1 ORDER BY POSITION ASC\";\n        $t1_parse = oci_parse($sm_conn, $t1_query);\n        oci_execute ($t1_parse);\n        /* Add query error catch*/\n\n        while ($t1_row = oci_fetch_array($t1_parse, OCI_ASSOC)) {\n            echo \"&lt;li&gt;&lt;a href=\\\"#\\\" title=\\\"\\\" class=\\\"exp\\\"&gt;&lt;span&gt;{$t1_row[\"T1_NAME\"]}&lt;/span&gt;&lt;/a&gt;\";\n\n                $t2_query = \"SELECT * FROM PLUS_NAV_T2 WHERE T1_ID_FK = {$t1_row[\"ID_PK\"]} ORDER BY POSITION ASC \";\n                $t2_parse = oci_parse($sm_conn, $t2_query);\n                oci_execute ($t2_parse);\n                /* Add query error catch*/\n\n                /*Need a conditional here so ul tag is only written when the primary nav has secondary nav*/\n                    echo \"&lt;ul class=\\\"sub\\\"&gt;\";\n                    while ($t2_row = oci_fetch_array($t2_parse, OCI_ASSOC)) {\n                        echo \"&lt;li&gt;&lt;a href=\\\"#\\\" title=\\\"\\\" style=\\\"color\\\"&gt;{$t2_row[\"T2_NAME\"]}&lt;/a&gt;&lt;/li&gt;\";\n                    }\n                    echo \"&lt;/ul&gt;\";\n\n            echo \"&lt;/li&gt;\";\n        }\n</code></pre>\n\n<p>`</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12571995,"title":"Correlating data from two tables in Oracle using a third which maps them together","body":"<p>I'm trying to JOIN/UNION/whatever data from two tables based on a third which maps them together. Here is the idea:</p>\n\n<p>Table USERS contains user ID, username, some other data.\nTable GROUPS contains group ID, group name, some other data.</p>\n\n<p>Table USERGROUPMAP contains a bunch of user IDs and group IDs mapped together which correspond to IDs in USERS and GROUPS. Each user can be in multiple groups, each group can have multiple users.</p>\n\n<p>I have always done this by storing objects or CSV data in a single field, e.g. making a column in groups called MEMBERS and storing id1,id2,id3...but this is what I was presented with.</p>\n\n<p>I can't change the schema...I know this has something to do with JOINs or UNIONs or something but my SQL is very rusty, so can anyone help out here?</p>\n\n<p>My maybe semi-correct idea -</p>\n\n<pre><code>SELECT USERS.uid, \n       GROUPS.gid, \n       USERGROUPMAP.uid, \n       USERGROUPMAP.gid \n  FROM USERS, \n       GROUPS, \n       USERGROUPMAP \n  JOIN ON ((USERS.uid = USERGROUPMAP.uid) AND (GROUPS.gid = USERGROUPMAP.gid))\n</code></pre>\n\n<p>Any tips? :( .. Thanks guys.</p>\n\n<p><strong>Edit, expected IO</strong></p>\n\n<p>USERS table contains a bunch of UIDs ... 1,2,3,4,5, so on\nGROUPS table contains a bunch of GIDs, 1000,1001,1002 and so on</p>\n\n<p>USERGROUPMAP contains tuples corresponding to which users are in which groups, eg  (1,1002) (2,1000) (5,1003) (5,1000)</p>\n\n<p>I am trying to get a list of groups a user is in, so for this example I want to get two rows of 5,1003 and 5,1000 ... make sense?</p>\n"},{"tags":["sql","oracle","index","oracle-sqldeveloper"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12633159,"title":"How to determine if and which index is being used in oracle","body":"<p>Could anyone provide instructions on how will I check or verify if the index I created is being used in the query?\nThank you.</p>\n"},{"tags":["sql","oracle","oracle11g","oracle-apex"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":123,"score":0,"question_id":11315071,"title":"Calculating fields on quarterly and yearly basis","body":"<p>I have this code on Oracle Apex 11.1:</p>\n\n<pre><code>select r.s_manager_id,r.s_manager_nam,count(distinct(emp_id))Total_Employees,\n    round((SUM(decode(bcoe,'y',1,0))/count(bcoe))*100,2)||'%'bcoe,\n    round((SUM(decode(ecp,'y',1,0))/count(ecp))*100,2)||'%'ecp,\n    round((SUM(decode(leave,'y',1,0))/count(leave))*100,2)||'%'leave,\n    round((SUM(decode(eud,'y',1,0))/count(eud))*100,2)||'%'eud,\n    round((SUM(decode(parking,'y',1,0))/count(parking))*100,2)||'%'parking,\n    round((SUM(decode(building,'y',1,0))/count(building))*100,2)||'%'building\n    from s_manager r,cmanager c,compliancetype t\n    where r.s_manager_id = c.s_manager_id\n        AND c.s_manager_id = t.s_manager_id\n        AND month = 'Feb'\n     GROUP BY r.s_manager_id,r.s_manager_nam \n</code></pre>\n\n<p>It calculates different types of compliances, but <code>ecp</code> and <code>bcoe</code> are supposed to be calculated on a yearly basis. How to do that in Oracle Apex? Then <code>leave</code> is supposed to be calculated quarterly; how to do that? </p>\n"},{"tags":["oracle","service","soa","bus","oracle-service-bus"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2715,"score":0,"question_id":2506044,"title":"Proxy Service & Business Service","body":"<p>Can i use a proxy service without a business service while configuring message flows in Oracle service bus? If so is what scenarios would we use it?</p>\n"},{"tags":["database","oracle","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":643,"score":0,"question_id":1801592,"title":"Oracle JDBC connection pooling with database link","body":"<p>I'm building a J2EE web apps with Oracle database.  The app server uses JDBC connection pooling to Oracle database A (e.g. 20 connections max), and some of the queries performed use tables in remote Oracle database B via database link.  </p>\n\n<p>If the App Server creates 20 connections to database A, and all queries are looking up data in database B, will database A create 20 connections to database B? Or all queries are through the same connection tunnel?</p>\n"},{"tags":["oracle","plsql","ora-01438"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":253,"score":1,"question_id":12668374,"title":"ORA-01438: value larger than specified precision allowed for this column","body":"<p>Following is my code, I dont understand what I'm doing wrong. Any help will be greatly appreciated </p>\n\n<pre><code>CREATE OR REPLACE\nPROCEDURE COMP_LATE_FEE(LATE_APT_FINE IN NUMBER, LATE_GRG_FINE IN NUMBER)\nAS\nDIFF NUMBER;\nTYPE MBCUR IS REF CURSOR RETURN MONTHLY_BILL%ROWTYPE;\nMONBILL MBCUR;\nMBREC MONTHLY_BILL%ROWTYPE;\nBEGIN\n--DIFF := FLOOR(SYSDATE - (TRUNC(SYSDATE,'MM')));\n--DBMS_OUTPUT.PUT_LINE(DIFF);\n\nOPEN MONBILL FOR\n    -- checking the status of all last month's bills\n    SELECT * FROM MONTHLY_BILL\n    WHERE STATUS = 'PENDING' AND SYSDATE &gt; ED_DT;\nFETCH MONBILL INTO MBREC;\n    -- adding the late fee amount for any bills that are past the due date\n    -- due date = last day of the month\n    DIFF := FLOOR(ABS(MBREC.ED_DT - (TRUNC(SYSDATE,'MM'))));\n    UPDATE MONTHLY_BILL\n    SET LATE_FEE = DIFF * LATE_APT_FINE\n    WHERE BILL_NUM = MBREC.BILL_NUM;\n    -- if a garage is rented by the resident then the respective additional fee is included\n    IF (MBREC.GARAGE_RENT != 0) THEN\n        UPDATE MONTHLY_BILL\n        SET LATE_FEE = LATE_FEE + DIFF * LATE_GRG_FINE\n        WHERE BILL_NUM = MBREC.BILL_NUM;\n    END IF;\n\n    COMMIT;\nCLOSE MONBILL;\n END;\n/\n</code></pre>\n\n<p>The procedure compiled without any err. But I get the following err when i call the proc</p>\n\n<pre><code>BEGIN\nCOMP_LATE_FEE(70,20);\nEND;\n/\n</code></pre>\n\n<p>Error report:</p>\n\n<pre><code>ORA-01438: value larger than specified precision allowed for this column\nORA-06512: at \"LALLURI.COMP_LATE_FEE\", line 19\nORA-06512: at line 2\n01438. 00000 -  \"value larger than specified precision allowed for this column\"\n*Cause:    When inserting or updating records, a numeric value was entered\n           that exceeded the precision defined for the column.\n*Action:   Enter a value that complies with the numeric column's precision,\n           or use the MODIFY option with the ALTER TABLE command to expand\n           the precision.\n</code></pre>\n"},{"tags":["asp.net","web-services","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12672708,"title":"how to call oracle web service using asp.net web service","body":"<p>How to call Oracle web service using asp.net web service?  Is there a difference between calling asp.net web service and calling Oracle web service from asp.net web service? </p>\n\n<p>I found how to call asp.net web service from another one but not Oracle</p>\n"},{"tags":["oracle","spring","tomcat","spring-mvc","xml-parsing"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12616157,"title":"Spring 3 xml parser issue -XSDException","body":"<p>I have a web application where i am using spring 3.0 rest mvc .The application runs perfectly fine on my local machine. But when in deploy the war in server(tomcat 6 &amp; java 5) the below error occurs</p>\n\n<blockquote>\n  <p>Caused by: oracle.xml.parser.schema.XSDException: Duplicated\n  definition for: 'identifiedType'</p>\n</blockquote>\n\n<p>I Googled and found that this issue is related to  xmlparserv2.jar and this issue can be fixed by forcing the app to use apache xerces jars.</p>\n\n<p>But i have not found any link explaining how to solve this issue.I do not want to changes at server level.</p>\n\n<p>Can we fix these issues at application level?</p>\n\n<p>Thanks in advance </p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":12676082,"title":"error \"%s: invalid identifier\" occurs when I create a table in Oracle DB","body":"<p>when I create a table like this:</p>\n\n<pre><code>create table DBDI_HIREDETAIL(\nHireID int not null,\nEquipID int not null,\nQuantity int,\nTotalFee float,\nComment varchar(200)\n);\n</code></pre>\n\n<p>The error occurs like this:</p>\n\n<blockquote>\n  <p>Error at Command Line:  \"TotalFee float\"\n  Error report:\n  SQL Error: ORA-00904: : invalid identifier\n  00904. 00000 -  \"%s: invalid identifier\"</p>\n</blockquote>\n\n<p>I don't understand why my code has an error, it seems to be fine.</p>\n"},{"tags":["sql","database","oracle","triggers","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":278,"score":2,"question_id":12329149,"title":"Calculating age from birthday with oracle plsql trigger and insert the age in table","body":"<p>i have a table </p>\n\n<pre><code>dates\n(dob date,\nage number(4)\n);\n</code></pre>\n\n<p>I will insert a date of birth and a trigger will calculate the age and insert that age in the age field.</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE getage IS \nndob date;\nnage number(10);\nBEGIN\nselect dob into ndob from dates; \nselect (sysdate-to_date(ndob))/365 into nage from dual;\nupdate dates set age=nage;\nEND;\n/\nSHOW ERRORS;\n</code></pre>\n\n<p>this procedure works fine but for only one row, and I need trigger for all the rows but if I call it from a trigger then the error occurs.</p>\n\n<pre><code>CREATE OR REPLACE TRIGGER agec after INSERT OR UPDATE ON dates\nFOR EACH ROW\nBEGIN\ngetage;\nEND; \n/\n</code></pre>\n"},{"tags":["sql","oracle","plsql","sqlplus"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2735,"score":1,"question_id":5708686,"title":"PL/SQL TEXT_IO package","body":"<p>I am trying to write to a local file from a PL/SQL script. In order to do this, I am attempting to use the TEXT_IO package in PL/SQL.</p>\n\n<pre><code>DECLARE\nfile_out text_io.file_type;\nlen number;\nblob_file blob;\nmy_var RAW(50);\nbstart NUMBER := 1;\nbytelen NUMBER := 50;\n\nBEGIN\n\nSELECT xxx\nINTO blob_file\nFROM yyy\nWHERE zzz\n\ndbms_lob.read(blob_file, bytelen, bstart, my_var);    \nfile_out := text_io.fopen('local_file_path', 'w');\ntext_io.put_raw(file_out, my_var);\ntext_io.fflush(file_out);\ntext_io.fclose(file_out);\n\nEND;\n/\n\nquit\n</code></pre>\n\n<p>However, when I run this script I get the error, </p>\n\n<pre><code>PLS-00201: identifier 'TEXT_IO.FILE_TYPE' must be declared\n</code></pre>\n\n<p>Does anyone know how I can fix this error, and how I can write the contents of the blob to a file as I am attempting to do?</p>\n\n<p>Thanks,<br>\nktm</p>\n"},{"tags":["oracle","delete","duplicates"],"answer_count":6,"favorite_count":8,"up_vote_count":14,"down_vote_count":0,"view_count":9869,"score":14,"question_id":529098,"title":"Removing duplicate rows from table in Oracle","body":"<p>I'm testing something in Oracle and populated a table with some sample data, but in the process I accidentally loaded duplicate records, so now I can't create a primary key using some of the columns.</p>\n\n<p>How can I delete all duplicate rows and leave only one of them?\nThis is in Oracle</p>\n\n<p>Thanks</p>\n"},{"tags":["java","oracle"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":619,"score":2,"question_id":7672800,"title":"CachedRowSet slower than ResultSet?","body":"<p>in my java code, i access an oracle database table with an select statement.\ni receive a lot of rows (about 50.000 rows), so the 'rs.next()' needs some time to process all of the rows.</p>\n\n<pre><code>using ResultSet, the processing of all rows (rs.next) takes about 30 secs\n</code></pre>\n\n<p>my goal is to speed up this process, so i changed the code and now using a 'CachedRowSet'</p>\n\n<pre><code>using CachedRowSet, the processing of all rows takes about 35 secs\n</code></pre>\n\n<p>i don't understand why the CachedRowSet is slower than the normal ResultSet, because the CachedRowSet retrieves all data at once, while the ResultSet retrieves the data every time the 'rs.next' is called.</p>\n\n<p>Here is a part of the code:</p>\n\n<pre><code>try {\n    stmt = masterCon.prepareStatement(sql);\n    rs = stmt.executeQuery();\n\n    CachedRowSet crset = new CachedRowSetImpl();\n    crset.populate(rs);\n\n    while (rs.next()) {\n        int countStar = iterRs.getInt(\"COUNT\");\n        ...\n    }\n} finally {\n    //cleanup\n}\n</code></pre>\n"},{"tags":["php","oracle","command-line"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12675598,"title":"oci_connect fails from command line but works in browser","body":"<p>I wrote a PHP script to run as a cron job and it wasn't running.  The script worked fine in the browser, but I discovered when I ran it from the command line that I got this error:</p>\n\n<pre><code>Warning: oci_connect(): ORA-12154: TNS:could not resolve the connect identifier specified in /usr/apps/webdata/cron/PropogateDB.php on line 190\n</code></pre>\n\n<p>The line in question is:</p>\n\n<pre><code>$conn_NRB = oci_connect($user, $pass, \"nrb.njbbnrbpd1\");\n</code></pre>\n\n<p>As I said this script works fine in the browser.</p>\n\n<p>I did some digging around and found the configuration settings for the database.  I then tried this:</p>\n\n<pre><code>$conn_NRB = oci_connect($user, $pass, \"(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=1521))(CONNECT_DATA=(SID=nrb)))\");\n</code></pre>\n\n<p>With this code both the command line and the browser give me this error:</p>\n\n<pre><code>Warning: oci_connect() [function.oci-connect]: ORA-01017: invalid username/password; logon denied in /usr/apps/webdata/cron/PropogateDB.php on line 191\n</code></pre>\n\n<p>As far as I know there are no other usernames and passwords that I can use.  (I'm trying to verify that now.)</p>\n\n<p>I searched around on this site and discovered someone else with a similar problem, although his problem was reversed, and his cause was that the command line and the browser pointed to two different php.ini files.  I just confirmed that both the browser and the command line invoke the same php.ini file.  They both point to:</p>\n\n<pre><code>Configuration File (php.ini) Path =&gt; /usr/local/php/lib\n</code></pre>\n\n<p>Is there any other reason why a script would work in the browser but fail in the command line?  I'm relatively new to Oracle SQL and I don't have direct access to the database so I'm not sure where to go from here.</p>\n\n<p>Thanks.</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2393,"score":1,"question_id":5879448,"title":"interval function in oracle","body":"<p>Quer:</p>\n\n<pre><code>SELECT INTERVAL '300' month,\n       INTERVAL '54-2' year to month,\n       INTERVAL ' 11:12:10.1234567' hour to second \n  FROM DUAL;\n</code></pre>\n\n<p>The out put of the above query is:</p>\n\n<pre><code>+25-00,+54-02,+00 11:12:10.1234567\n</code></pre>\n\n<p>Can someone please explain to me how this query is giving this output, with an explanation about the interval function?</p>\n"},{"tags":["oracle","jsf","jdbc","tomcat7"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":110,"score":0,"question_id":12675433,"title":"Tomcat 7 Optional Resource in context.xml","body":"<p>I'm deploying a JSF web-app in tomcat 7.0.29 and i'm facing this strange issue.</p>\n\n<p>My app uses a MySQL database to store everything that it needs and an Oracle database from the customer to \"pull\" the data ONLY when the administrator wants (the data \"pulling\" can be started by an option in the UI). MySQL is in my company's local network but Oracle as you guessed is not. Both these resources are configured in the context.xml of the web-app as .. and called using JNDI (also i'm using Tomcat's connection pooling to create these resources)..</p>\n\n<p>Now my question is this: Some days ago my company had some problems contacting \"the outside world\" from its local net.. So when i was trying to start my app in my \"local Tomcat\", Mysql connection pool was fine but Oracle connections where failing during server startup so my whole application was failing to start.. Since the Oracle resource is not 24/7 needed is there any way to make this resource as \"optional\" and tell Tomcat not to load it during start up? Or is there any other workaround to deal with this kind of problems?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["sql","oracle","query","date","join"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12297143,"title":"Oracle SQL outer join query puzzle","body":"<pre><code>select\n  whatever\nfrom\n  bank_accs b1,\n  bank_accs b2,\n  table3 t3\nwhere\n  t3.bank_acc_id = t1.bank_acc_id and\n  b2.bank_acc_number = b1.bank_acc_number and\n  b2.currency_code(+) = t3.buy_currency and\n  trunc(sysdate) between nvl(b2.start_date, trunc(sysdate)) and nvl(b2.end_date, trunc(sysdate));\n</code></pre>\n\n<p>My problem is with the date (actuality) check on b2. Now, I need to return a row for each t3xb1 (t3 = ~10 tables joined, of course), even if there are ONLY INVALID records (date-wise) in b2. How do I outer-join this bit properly?\nCan't use ANSI joins, must do in a single flat query.\nThanks.</p>\n"},{"tags":["java","eclipse","oracle","documentation","javadoc"],"answer_count":5,"favorite_count":5,"up_vote_count":7,"down_vote_count":0,"view_count":12728,"score":7,"question_id":4600172,"title":"How do I add the Java API documentation to Eclipse?","body":"<p>I have downloaded Java API documentation from <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html#docs\" rel=\"nofollow\">http://www.oracle.com/technetwork/java/javase/downloads/index.html#docs</a> and have supposedly attached it to Eclipse using the </p>\n\n<blockquote>\n  <p>Window->Preferences->Java->Installed\n  JREs->Edit->\"Select rt.jar\"->Javadoc\n  Location</p>\n</blockquote>\n\n<p>And the location has been accepted and \"Validates\" just fine. However, for the life of me, I can't get Eclipse to show the Javadocs in the tooltip whene I hover over an item (for example in the declaration of an ArrayList). I have also restarted Eclipse in attempts to get it to work</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["sql","oracle","rdbms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":806,"score":0,"question_id":572627,"title":"Basic RDBMS design and schema creation in Oracle","body":"<p>I have to create a entire application in an Oracle RDBMS with SQL. The Design includes to complete full entity-relationship\nand also design the relevant Schema with object creations.Important is-When creating schema and objects..we should fully apply normalisation. Also,\nwriting all the relevant SQLs in each and every step in this process.</p>\n\n<p>I need your help on the fully design and implementation of the same. I am to complete this as a part of School Project.</p>\n\n<p>The scenario:-</p>\n\n<p>There is a COMPANY(STAR INTERNATIONAL*) WHICH has many divisions/departments in it. These divisions has people who are employees working for them.\nThe COMPANY has numerous Products(also we can say projects) and  these project work is done by the various depts.\nAlso,here things such as \n(1)Employees  can work or be a part of many or multiple departments and work for multiple projects/products at a time\n(2)As usual-each Department has a manager.**EVery dept can handle or work only on one project.</p>\n\n<p>Q. How would you start with the DBMS design for the above item? i am very new to the entire subject and reading definitions, but i feel after i am able \nto complete this with all your help-i will understand.</p>\n\n<p>How many tables would be needed for each of the items and what all attributes would each have.Could you all please help and give the tables and columns and also relationship between them.\nhow would you apply normalization while designing.examples with sqls for the above item would be helpful.</p>\n"},{"tags":["sql","oracle","delete"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12672082,"title":"Delete with \"Join\" in Oracle sql Query","body":"<p>I am not deeply acquainted with Oracle Sql Queries, therefore I face a problem on deleting some rows from a table which must fulfill a constraint which includes fields of another (joining) table. In other words I want to write a query to delete rows including JOIN. </p>\n\n<p>In my case I have a table <code>ProductFilters</code> and another table <code>Products</code> joined on fields <code>ProductFilters.productID = Products.ID</code>. I want to delete the rows from <code>ProductFilters</code> having an <code>ID</code> higher or equal to 200 and the product they refer has the name 'Mark' (name is a field in Product).</p>\n\n<p>I would like to be informed initially if JOIN is acceptable in a Delete Query in Oracle. If not how should I modify this Query in order to make it work, since on that form I receive an error:</p>\n\n<pre><code>DELETE From PRODUCTFILTERS pf \nwhere pf.id&gt;=200 \nAnd pf.rowid in \n(\n     Select rowid from PRODUCTFILTERS \n     inner join PRODUCTS on PRODUCTFILTERS.PRODUCTID = PRODUCTS.ID \n     And PRODUCTS.NAME= 'Mark'\n);       \n</code></pre>\n"},{"tags":["oracle","plsql","average","avg"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":34,"score":3,"question_id":12667134,"title":"How to compare trunc value to avg value in oracle","body":"<p>I'm supposed to compare a truncated value with an average value. In my table I have 2 dates, order_date &amp; ship_date; I use trunc(ship_date - order_date) to get the number of days it takes for item to be shipped. Now I want to compare the average of such time with the value I get from the <code>trunc()</code> function and if <code>trunc()</code> function is greater then I just wanna show the results.</p>\n\n<p>This is what I have come up with so far, any help is appreciated.</p>\n\n<pre><code>select order_id, \n    order_date, \n    trunc(ship_date-order_date) as shipping_time \nfrom product_order \nwhere (trunc(ship_date-order_date) &gt; Avg(trunc(ship_date-order_date))); \n</code></pre>\n\n<p>When I do this I get this error: </p>\n\n<blockquote>\n  <p>ORA-00934: group function is not allowed here</p>\n</blockquote>\n"},{"tags":["vb.net","oracle","dual"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":12646418,"title":"Select 1 from dual where exists (select ....). Returns 1 even if the table is completely empty?","body":"<p>I'm using a Select 1 from dual statement to see if new data that comes into my system is actually new or not, if it is new then it's gonna be inserted, if it is not then it's gonna be updated in the database.</p>\n\n<pre><code>sql.CommandText = \"select 1 from dual where exists (select * from my table where hour = \" + hour + \" and zone = '\" + zone+ \"' and date = TO_DATE('\" + mydate + \"','DD-MM-YY'))\"\n</code></pre>\n\n<p>The problem however is that after running the statement, it returns the 1 value even if the conditions for it aren't met, even if the table is completely empty. How could this happen?\nI'm using VB, .NET framework 3.5 and Oracle 10g.</p>\n"},{"tags":["oracle","grails","datasource","tnsnames"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":460,"score":2,"question_id":4035276,"title":"How to use tnsnames.ora in Grails DataSource?","body":"<p>I'm trying to connect to a load-balanced virtual host specified in tnsnames.ora in my Grails application in DataSource.groovy, with no luck - it (obviously) throws an \"Unknown Host Specified\" exception.</p>\n\n<p>The tnsnames entry looks like this</p>\n\n<pre><code>someServiceName =\n (DESCRIPTION_LIST =\n   (FAILOVER=ON)\n   (LOAD_BALANCE=ON)\n   (DESCRIPTION =\n     (ADDRESS_LIST =\n       (ADDRESS = (PROTOCOL = TCP)(HOST = someServerName1)(PORT = 1521))\n     )\n     (CONNECT_DATA =\n       (SERVICE_NAME = someServiceName1)\n     )\n   )\n   (DESCRIPTION =\n     (ADDRESS_LIST =\n       (ADDRESS = (PROTOCOL = TCP)(HOST = someServerName2)(PORT = 1521))\n     )\n     (CONNECT_DATA =\n       (SERVICE_NAME = someServiceName2)\n     )\n   )\n )\n</code></pre>\n\n<p>I can connect to one of the services (someServiceName1 &amp; someServiceName2) by simply setting the values in DataSource.groovy in the usual way, but I don't know how to connect to the load-balanced virtual host.\nI've searched around for using tnsnames.ora in Grails but I can't seem to find a particularly \"groovy\" way of making this work. Any pointers will be appreciated.</p>\n\n<p>P.S. I would prefer a solution where I would still be able to inject the dataSource into my controllers etc.</p>\n"},{"tags":["sql","oracle"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":98,"score":-4,"question_id":9112673,"title":"Sql update Query","body":"<p>I recently got a question that I'm not sure I can complete. The is as follows: 'Using a single query update the 4 smallest customer id to male.' I'm using Oracle. My uncompleted code is below:</p>\n\n<pre><code>create table customer_09\n        (\n        custid varchar(5)primary key not null, \n        firstname varchar(20),\n        lastname varchar(20),\n        DOB date,\n        address1 varchar(40),\n        address2 varchar(40),\n        phone varchar(7)\n        );\n\n\nUPDATE customer_09\nSET gender = 'male'\nWHERE custid = (select min(custid) from customer_09)\n</code></pre>\n\n<p>If anyone has the correct code, could you share with me please.</p>\n\n<p>thank you</p>\n"},{"tags":["oracle","jdbc","concurrency","odbc","jdbc-odbc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12671417,"title":"What is the only One open statement per connection limitation in JDBC-ODBC Bridge?","body":"<p>Can someone explain/elaborate the following limitation mentioned on the <a href=\"http://www.oracle.com/technetwork/java/index-138427.html#15\" rel=\"nofollow\">JDBC ODBC FAQs list</a></p>\n\n<ul>\n<li>-Does the JDBC-ODBC Bridge support multiple concurrent open statements per connection?<br>\nNo. <strong>You can open only one Statement object per connection</strong> when you are using the JDBC-ODBC Bridge.*</li>\n</ul>\n\n<p>I tried opening multiple statements using JDBC/ODBC bridge drive, but did not get any issues. </p>\n\n<pre><code>Class.forName(\"sun.jdbc.odbc.JdbcOdbcDriver\");\n//Class.forName(\"oracle.jdbc.driver.OracleDriver\");\nConnection conn =  DriverManager.getConnection (\"jdbc:odbc:MyDSN\", \"user\", \"pwd\");\nStatement stmt1 = conn.createStatement ();\nStatement stmt2 = conn.createStatement ();\nResultSet rs1 = stmt1.executeQuery(\"select COL1 from TAB1\");\nResultSet rs2 = stmt2.executeQuery(\"select COL2 from TAB2\");\nif (rs1.next() )\n//print COL1\nif (rs2.next() )\n//print COL2\n\n//close all resources\n\n-- DatabaseMetaData --\ngetDriverName() JDBC-ODBC Bridge (msorcl32.dll)\ngetJDBCMajorVersion() 2\ngetDriverVersion() 2.0001 (02.575.1132)\n</code></pre>\n"},{"tags":["windows","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12310054,"title":"oracle 11XE and ODT32 on windows - multiple issues","body":"<p>I installed Oracle 11 XE  on a 64bit Windows 2008R2. This is a development machine, therefore I have also installed Oracle Developer Tools for .NET (32bit). Both these installations come with their own version of SQLplus. </p>\n\n<p>I have set up the tnsnames.ora and sqlnet.ora to be identical for both these oracle products, but I cannot connect to the local XE from either SQLplus. I get <code>ORA-12560</code> everytime. the Oracle 11 XE home page also doesn't start. </p>\n\n<pre><code>   ---TNSNAmes.ora ----\n    XE =\n  (DESCRIPTION =\n    (ADDRESS = (PROTOCOL = TCP)(HOST = DDSAP236.asxdev.asx.com.au)(PORT = 1521))\n    (CONNECT_DATA =\n      (SERVER = DEDICATED)\n      (SERVICE_NAME = XE)\n    )\n  )\n\n    EXTPROC_CONNECTION_DATA =\n  (DESCRIPTION =\n    (ADDRESS_LIST =\n      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))\n    )\n    (CONNECT_DATA =\n      (SID = PLSExtProc)\n      (PRESENTATION = RO)\n    )\n  )\n\n    ORACLR_CONNECTION_DATA = \n  (DESCRIPTION = \n    (ADDRESS_LIST = \n      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1)) \n    ) \n    (CONNECT_DATA = \n      (SID = CLRExtProc) \n      (PRESENTATION = RO) \n    ) \n  ) \n    ----END TNSNAMEs.ora---\n\n---Listener.Ora ---\nSID_LIST_LISTENER =\n  (SID_LIST =\n    (SID_DESC =\n      (SID_NAME = PLSExtProc)\n      (ORACLE_HOME = D:\\Oracle\\11Express\\app\\oracle\\product\\11.2.0\\server)\n      (PROGRAM = extproc)\n    )\n    (SID_DESC =\n      (SID_NAME = CLRExtProc)\n      (ORACLE_HOME = D:\\Oracle\\11Express\\app\\oracle\\product\\11.2.0\\server)\n      (PROGRAM = extproc)\n    )\n  )\n\nLISTENER =\n  (DESCRIPTION_LIST =\n    (DESCRIPTION =\n      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))\n      (ADDRESS = (PROTOCOL = TCP)(HOST = DMACHINE.MyDomain.com)(PORT = 1521))\n    )\n  )\n\nDEFAULT_SERVICE_LISTENER = (XE)\n\n\n--End listener.ora----\n</code></pre>\n\n<p>In <code>services.msc</code> and <code>lsntctrl</code> both shows the <code>XElistener</code> service have started. </p>\n\n<p>I am wondering what else I can check?</p>\n\n<ol>\n<li>Can I run XE (32bit) on Win2008R2?</li>\n<li>Can I run XE together with ODTODAC32 on Win2008R2?</li>\n<li>How do I resolve ORA-12560 so I can connect to the XE database?</li>\n</ol>\n\n<h2>Additional Info</h2>\n\n<p>In the registry of this machine under <code>HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Note\\Oracle</code> I have 5 folders - can someone confirm if this is correct?\nThe folders are:</p>\n\n<ol>\n<li><code>KEY_</code>  (not sure if this is correct)</li>\n<li><code>KEY_OracleClient11g_HOME</code> (the Oracle ODT client install's home)</li>\n<li><code>KEY_EX</code> (11g EX install's home)</li>\n<li><code>ODP.Net</code> (part of ODP install )</li>\n<li><code>OracleMTSRecoveryService</code> (part of ODP install)</li>\n</ol>\n"},{"tags":["sql","database","oracle","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":103,"score":1,"question_id":12641334,"title":"SQL 'FROM' not where expected","body":"<p>A follow on from a previous question</p>\n\n<p>I'm working with an oracle 11g DB and need to manipulate a string column within it. The column contains multiple email addresses in this format:</p>\n\n<p>jgoozooll@gmail.com;dzhookep@gmail.com;admzmoore@outlook.com</p>\n\n<p>What I want to do is take out anything that does not have '@gmail.com' at the end (in this example admzmoore@outlook.com.com would be removed) however admzmoore@outlook.com may be the first email in the next row of the column so in this way there is no real fixed format, the only format being that each address is seperated by a semi-colon.</p>\n\n<p>Is there anyway of implementing this through one command to run through every row in the column and remove anything thats not @gmail.com? I'm not really sure if this kind of processing is possible in SQL. Just looking for your thoughts!!</p>\n\n<p>Getting the above 'FROM' error in the following code and I cant for my life figure out why. Someone will probably make me look stupid, but its a chance i have to take. There may also be other errors:) Heres my code:</p>\n\n<pre><code> SELECT REMIT_TO.ID\n , LISTAGG(EMAIL, ';') WITHIN GROUP(ORDER BY REMIT_TO.ID) REMIT_TO.EFT_EMAIL_ADDR\n\n FROM (SELECT REMIT_TO.ID \n        , regexp_substr(REMIT_TO.EFT_EMAIL_ADDR, '[^;]+', 1, RN) email\n\n    FROM IQMS.REMIT_TO\n    CROSS JOIN (SELECT ROWNUM RN\n                   FROM(SELECT MAX (REGEXP_COUNT(REMIT_TO.EFT_EMAIL_ADDR, '[^;]+')) ML\n                          FROM IQMS.REMIT_TO\n                        )\n                       CONNECT BY LEVEL &lt;= ML\n                  )\n     )                             \n WHERE EMAIL LIKE '%@gmail.com%'\n GROUP BY REMIT_TO.ID\n</code></pre>\n\n<p>Anything stick out for anyone?</p>\n\n<p>Thanks you guys.</p>\n"},{"tags":["sql","oracle","database-administration"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12669044,"title":"Differentiate between default and created users","body":"<p>Oracle creates some users default when it creates database for instance SYS and SYSTEM. Is there any way to determine whether a user is a default user in a query?</p>\n\n<p><a href=\"http://www.idevelopment.info/data/Oracle/DBA_tips/Database_Administration/DBA_26.shtml\" rel=\"nofollow\">Refer here for the default users list.</a></p>\n"},{"tags":["php","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":835,"score":-2,"question_id":4583962,"title":"Connect to an Oracle database using php","body":"<p>I need to connect to an Oracle database server with system identifier PROD, using the login \"scott\" and password \"tiger.\"</p>\n\n<p>Can anyone help</p>\n"},{"tags":["database","oracle"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":25263,"score":3,"question_id":980620,"title":"Query two tables from different schema","body":"<p>I have two different schemas in Oracle (say S1, S2). And two tables in those schemas(say S1.Table1, S2.Table2). I want to query these two tables from schema S1.</p>\n\n<p>Both S1 and S2 are in different databases. From DB1 - Schema S1, I want to do something like this,</p>\n\n<pre><code>select T1.Id\n  from S1.Table1 T1\n     , S2.Table2 T2 \n Where T1.Id = T2.refId\n</code></pre>\n\n<p>I know one way of doing this would be creating a DB Link for the second schema and use it in querying. But sadly, I don't have priv to create DB link. Is there some way to do without DB link, like, in TOAD, you can compare two schema objects. But again, two schema objects and it is general comparision. Not like querying them.</p>\n\n<p>Any ideas, suggestions are greatly appriciated. Thanks in advance.</p>\n"},{"tags":["java","oracle","java-ee","crud"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12668752,"title":"broken link to J2EE tutorial source","body":"<p>The tutorial at <a href=\"http://www.oracle.com/technetwork/articles/javase/gfandmysql-part2-138537.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/articles/javase/gfandmysql-part2-138537.html</a>, which is about GlassFish and MySQL, Part 2: Building a CRUD Web Application With Data Persistence, points to <a href=\"https://techdayscode.dev.java.net/servlets/ProjectDocumentList?folderID=9891\" rel=\"nofollow\">https://techdayscode.dev.java.net/servlets/ProjectDocumentList?folderID=9891</a> (petcatalog application package) as the source code. But the link is broken. Does anyone know where I can find the source code?</p>\n"},{"tags":["sql","oracle","lob"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":1197,"score":0,"question_id":6854609,"title":"What is the difference between CLOB and NCLOB?","body":"<p>Can you state any difference between the CLOB and NCLOB?</p>\n"},{"tags":["php","database","oracle","crm"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":213,"score":2,"question_id":6313217,"title":"PHP connectivity to Oracle DB","body":"<p>I am currently trying to write a PHP script to connect to an Oracle database. The reason I am using PHP is because I need to connect the Oracle database with my current CRM system, written in PHP/MySQL. </p>\n\n<p>The PHP is hosted on 1&amp;1 hosting, which is an external server. I read that I need to enable the extension php_oci8.dll to connect using oci_connect(), but I cannot do so since I do not have root privileges. Did a search, and couldn't find the DLL either. </p>\n\n<p>Is there any other way around this? Any help greatly appreciated, please let me know if you need more information. Thanks!</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":12659777,"title":"advanced select distinct","body":"<p>I am new to sql and need to do this:\nI have a table named sec_users_table.\nIt looks like this:</p>\n\n<pre><code>id      ip      user_id      to_dt\n--------------------------------------------------\n1       1        1           26-Apr-12 2:14:02 PM\n2       1        1           30-Apr-12 8:48:49 PM\n3       1        1           02-May-12 6:17:22 PM\n4       2        5           05-May-12 6:18:10 PM\n5       2        5           04-May-12 6:17:57 PM\n6       3        8           07-May-12 1:32:34 PM\n7       3        8           09-May-12 5:09:54 PM\n8       4        10          10-May-12 4:40:42 PM\n9       5        12          11-May-12 6:10:29 PM\n</code></pre>\n\n<p>I want to select the unique pairs (ip, user_id) with the newest date, but to return just the id and ip columns. The result for this example would be:</p>\n\n<pre><code>id      ip\n-----------\n3       1  \n4       2 \n7       3  \n8       4  \n9       5 \n</code></pre>\n\n<p>I'm using oracle pl/sql.</p>\n\n<p>Thank you.</p>\n"},{"tags":["oracle","casting","floating-point","type-conversion"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12659319,"title":"Oracle Format Float Numbers 11g","body":"<p>I want to format</p>\n\n<pre><code>if integer, then integer.00\n\nif float, then float.xx (2 digits of precision)\n</code></pre>\n\n<p>I have a division operation whose value may result in an integer or float. I want to store the result with 2 digits of precision. How can I achieve this?</p>\n"},{"tags":["mysql","sql","database","oracle","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":97,"score":7,"question_id":12663484,"title":"PLSQL Procudure (Oracle) Comparing a variable in where clause","body":"<p>This is driving me crazy. I want to do simple comparison of a column and a variable but it just doesn't work. The following line always counts all of the tuples while I only need those as conditioned by the where clause.</p>\n\n<pre><code> SELECT count(*) INTO cnt from class where class.fid = fid;\n</code></pre>\n\n<p>It looks sooooo simple but I've been working on this for hours. The complete sql proc is</p>\n\n<p>The big confusing thing is that if I replace fid with some hard coded ID (like 105) it gives a correct answer), but when I use fid it just doesn't work any more and returns count of all classes. For some reason, always class.fid = fid. When I use >, &lt; or &lt;>, 0 count is returned!</p>\n\n<pre><code>create or replace PROCEDURE pro_report2\nAS\nCURSOR c_dept IS select deptid, dname from department;\nTYPE cur_typ IS REF CURSOR;\nc1 cur_typ;\nquery_str1 VARCHAR2(200);\nfid faculty.fid%type := 102;\nfname faculty.fname%type;\ncnt NUMBER;\n\nBEGIN\n    FOR dept_row in c_dept LOOP\n        DBMS_OUTPUT.PUT_LINE('Dept.Name: ' || dept_row.dname);\n        DBMS_OUTPUT.PUT_LINE('Faculty Name' || chr(9)|| chr(9) || '0 Class' || chr(9) || chr(9) || '1 Class' || chr(9) || chr(9) || '2 Classes' || chr(9) || '&gt;2 Classes');\n        DBMS_OUTPUT.PUT_LINE('-------------------------------------------------------------------------------');\n        --find all faculty in this department\n        query_str1 := 'select fid, fname from faculty where faculty.deptid = ' || to_char(dept_row.deptid);\n        open c1 for query_str1;\n        LOOP\n            FETCH c1 into fid, fname;\n            exit when c1%notfound;\n            DBMS_OUTPUT.PUT_LINE(fname);\n            SELECT count(*) INTO cnt from class where class.fid = fid;\n            DBMS_OUTPUT.PUT_LINE(to_char(cnt) || '    ' || to_char(fid));\n        END LOOP;\n        -- Spaces between departments\n        DBMS_OUTPUT.PUT_LINE(chr(10));\n        DBMS_OUTPUT.PUT_LINE(chr(10));\n    END LOOP;\nEND;\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":[".net","oracle","odp.net"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12662686,"title":"Is connection pooling a must-have in ODP.NET?","body":"<p>I am writing a nightly job to move data from SQL Server to Oracle using ODP.NET.</p>\n\n<p>We use around 100 connection objects(independent of data) and we don't expect more than 1500 rows to transfer in a single run(in total).\nThe ODP.NET notes and materials I read never talk about keeping connection pooling off.</p>\n\n<p>In dev, I keep the connection pooling off and it just works fine.</p>\n\n<p>Is it advisable in the given scenario to keep the connection pooling off,(given all the connections are disposed properly after use)since:</p>\n\n<ol>\n<li><p>It is a nightly job and there wont be much load on the Oracle server.</p></li>\n<li><p>Connection Pooling might return stale connections, for which validate settings/exception handing needs to be done.</p></li>\n</ol>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":114,"score":1,"question_id":12647221,"title":"Best way to do recursive joins?","body":"<p>What is the best way to do recursive joins in Oracle? Assuming I have a schema as follows:</p>\n\n<pre><code>node:\n  id: number\n  parent_id: number\n  name: string\n</code></pre>\n\n<p>How would I join a child node with all its parents?</p>\n\n<p>I've tried the following but it fails:</p>\n\n<pre><code>SELECT c.* from node LEFT JOIN(\n  SELECT * FROM node c\n  START WITH id = c.id\n  CONNECT BY PRIOR id = parent_id\n) ON 1 = 1\n</code></pre>\n\n<p>It is complaining about the START WITH id = c.id part.</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2506,"score":1,"question_id":8108320,"title":"How to connect to Oracle 11g database remotely","body":"<p>I have Oracle 11g XE installed on computer A. I can connect through the sql command line using the command <code>connect username/password</code>. I also can send SQL instructions to the Demo database: <code>Select * from demo_customers;</code></p>\n\n<p>The database is running on localhost of computer A.</p>\n\n<p>I want computer B to connect to computer A's database on localhost. How can I do that?</p>\n"},{"tags":["sql","oracle","plsql","cursor","oracle11g"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":12661364,"title":"Execute delete and update the respective rows in other table","body":"<p>I have following tables</p>\n\n<pre><code>CREATE TABLE A2SKU \n(\n  SKUID NUMBER NOT NULL,\n  SKUNAME VARCHAR2(20),\n  SKUQTY NUMBER, \n  CONSTRAINT A2SKU_PK PRIMARY KEY (SKUID)\n);\n\n\nCREATE TABLE A2LOC \n(\n  LOCID NUMBER NOT NULL, \n  LOCNAME VARCHAR2(20), \n  LOCQTY NUMBER, \n  MAXQTY NUMBER, \n  CONSTRAINT A2LOC_PK PRIMARY KEY (LOCID)\n);\n\n\n\nCreate Table A2BOX ( \nboxId NUMBER Primary Key, \nskuId NUMBER, \nlocId NUMBER, \nconstraint FK_A2BOX_SKUID foreign key (skuid) references A2SKU, \nconstraint FK_A2BOX_LOCID foreign key (locid) references A2LOC\n);\n\n\nCREATE SEQUENCE A2BOXSEQ;\n</code></pre>\n\n<p>I want to remove all boxes with a matching SKU from the A2Box table and Adjust the LocQty of the matching location in the A2Loc table of each box by 1 </p>\n\n<p>How I can do that using stored procedure.</p>\n\n<p>I tried myself and came up with this</p>\n\n<pre><code>create or replace procedure A2DeleteSKU\n(\npskuid IN number\n)\nAS\nCURSOR row_cursor IS\n      SELECT boxid,locid from A2BOX where skuid =  pskuid;\nskuid_count Number;\nskuid_check exception;\n\nsku_rec row_cursor%rowtype;\n\nBegin\nselect count(*) into skuid_count from A2SKU where skuid = pskuid;\nif skuid_count &lt;1 then\nraise skuid_check;\nEnd If;\n\n FOR sku_rec in row_cursor \n\nLOOP \n    delete from a2box where boxid = sku_rec.boxid;\n    update A2LOC set locqty = locqty -1 where locid = sku_rec.locid;\n END LOOP;\n\n   delete from A2SKU where skuid =pskuid;\n   commit;\nException\nWhen skuid_check then\n  RAISE_APPLICATION_ERROR(-20014, 'Delete Box failed. Boxid does not exist: '||TO_CHAR(pskuid));\nWhen others then\nraise;\nEnd A2DeleteSku;\n</code></pre>\n"},{"tags":["java","oracle","jdbc","connection-pooling"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":131,"score":0,"question_id":12660724,"title":"Oracle Connection Pool Class","body":"<p>I want to setup a connection pool for a Oracle DB in a Helper class.</p>\n\n<pre><code>public class DbConnection {\n\n// Data source for the pooled connection\nprivate static OracleDataSource dataSource;\n\n// Host\nprivate static final String dbHost = \"bla\";\n\n// Port\nprivate static final String dbPort = \"1521\";\n\n// DBname\nprivate static final String database = \"orcl\";\n\n// DBuser\nprivate static final String dbUser = \"bla\";\n\n// DBpassword\nprivate static final String dbPassword = \"bla\";\n\nstatic {\n    OracleConnectionPoolDataSource opds;\n    try {\n        opds = new OracleConnectionPoolDataSource();\n        opds.setURL(\"jdbc:oracle:thin:@\" + dbHost + \":\" + dbPort + \":\"\n                + database);\n        opds.setUser(dbUser);\n        opds.setPassword(dbPassword);\n        dataSource = opds;\n    } catch (SQLException e1) {\n        System.err.println(\"Connection failed!\");\n    }\n    try {\n        // Load driver\n        Class.forName(\"oracle.jdbc.driver.OracleDriver\");\n\n    } catch (ClassNotFoundException e) {\n        System.out.println(\"Driver not found!\");\n    }\n}\n\npublic static Connection getConnection() throws SQLException {\n    return dataSource.getConnection();\n}\n}\n</code></pre>\n\n<p>This is working but it is not awfully fast so I think I'm missing something to get the pooling working. Any suggestions?</p>\n\n<p>So my externel classes just invoke the getConnection() method ...</p>\n\n<pre><code>Connection conn = DbConnection.getConnection();\n...\nconn.close();\n</code></pre>\n"},{"tags":["sql","oracle","delete","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":74,"score":2,"question_id":12660444,"title":"How to delete a column from a view","body":"<p>I'm trying to delete a column from a view but can't seem to be able to do it because apparently is missing a keyword. Can someone tell me what I'm missing?</p>\n\n<pre><code>ALTER VIEW REORDERINFO DROP COLUMN name;\n</code></pre>\n\n<p>After trying again I got the following:</p>\n\n<pre><code>SQL&gt; ALTER VIEW REORDERINFO\nAS SELECT isbn,title, phone\nFROM books JOIN publisher USING (pubid);\n</code></pre>\n\n<blockquote>\n  <p>ERROR at line 2: ORA-00922: missing or invalid option</p>\n</blockquote>\n"},{"tags":["sql","oracle","isnull"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":73,"score":1,"question_id":12626533,"title":"Oracle no results, small query","body":"<p>I am having trouble with some sql. When I run the following query:</p>\n\n<pre><code>Select * from teleapp;\n</code></pre>\n\n<p>I get TONS of results. Resulst which include a column (called cashwithappyn) that has TONS of empty or null data cells. (They look empty and don't say null)</p>\n\n<p>The column info is:</p>\n\n<pre><code>ColumnName      ID          Null? Data Type             Histogram   Num Distinct  Num Nulls    Density\nCASHWITHAPPYN   54          Y     VARCHAR2(1 Byte)      Frequency   2             56895         0               \n</code></pre>\n\n<p>When I try to run the following query:</p>\n\n<pre><code>Select * from teleapp where cashwithappyn = null;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Select * from teleapp where cashwithappyn = '';\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Select * from teleapp where cashwithappyn not like '';\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Select * from teleapp where cashwithappyn not in ('Y','N');\n</code></pre>\n\n<p>or ANY type of combination, I cannot seem to get all of the rows with nothing in cashwithappyn. </p>\n\n<p>Any ideas? Please help, this is the last part of a project that I was assigned to do and I just need to figure this out.</p>\n\n<p>Thanks.</p>\n"},{"tags":["oracle","plsql","cursor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12657899,"title":"How to define a row type that has columns of different tables?","body":"<p>Normally, I should do something like</p>\n\n<pre><code>my_record my_table%ROWTYPE;\n\ncursor c1 (bla bla) is \nselect * from my_tables...\n</code></pre>\n\n<p>but what happens if I have something like </p>\n\n<pre><code>select b.*, c.col1, c.col2 \nfrom my_table b, mytable1 c ...\n</code></pre>\n\n<p>how can I define one object like <code>my_record my_table%ROWTYPE</code> that has exactly the columns I need?</p>\n"},{"tags":["sql","oracle","oracle10g","data-modeling","hierarchical-data"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":11831149,"title":"Relational Mapping of finite tree with instances","body":"<p>I have to represent the following structure in a relational database.\nThere are five hierarchy levels: <em>A</em>, <em>B</em>, <em>C</em>, <em>D</em>.\nThe relation between the hierarchy levels is always one to many,\nso <em>A</em> has many <em>B</em>, but every <em>B</em> belongs to one certain <em>A</em>.\nThe same applies for <em>B</em>, <em>C</em>, <em>D</em>, <em>E</em>.\nSo far <em>B</em> has <em>A</em> as foreign key, <em>C</em> has <em>B</em> as foreign key and so forth.</p>\n\n<pre><code>A          1\n         / |\nB       1  2\n      / |  |\nC    1  2  3 \n    /|  |  |\nD  1 2  3  4\n</code></pre>\n\n<p>Where things get complicated is that I have to represent instances \nfrom <em>B</em> downwards. For one certain <em>B</em> I can have many different instances.\nAll instances have different data but the same tree structure below.</p>\n\n<p>Let's say I have <code>MyB</code> with instance <code>fo</code> and instance <code>ba</code>.\nNow <code>fo</code> and <code>ba</code> have to have the same number of children, and their \nchildren have to have the same number of children too.\nIn one instance the children will have certain values in the other instance\ndifferent values, but the sub-trees have the same structure.</p>\n\n<p>As there can be many <em>B</em> there can be many sub-tree structures, but the\ndepth of the tree is always limited to four.</p>\n\n<pre><code>A          1\n         / |  \\\nB       1  2fo 2ba \n      / |   |   |\nC    1  2   3   4 \n    /|  |   |\\  |\\\nD  1 2  3   4 5 6 7\n</code></pre>\n\n<p>If <code>2fo</code> has one child and two grandchildren <code>2ba</code> also has to have one child and\ntwo grandchildren. </p>\n\n<p><strong>How do I cleanly map this structure in a relational database?</strong></p>\n\n<p><strong>EDIT</strong></p>\n\n<p>To answer <a href=\"http://stackoverflow.com/questions/11831149/relational-mapping-of-finite-tree-with-instances#comment15730341_11831149\">X-Zeros question</a>  in more detail than is possible in the comments.\nIf someone adds a node to C2 and then to C3 the result has to look like this:</p>\n\n<pre><code>A          1--------\n         / |       |\nB       1  2fo    2ba \n      / |   |      |\nC    1  2   3----  4----\n    /|  |   |\\  |  |\\  |\nD  1 2  3   4 5 9  6 7 10\n</code></pre>\n"},{"tags":["oracle","data","types","typeconverting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12656710,"title":"Determining the data type of a string value in Oracle","body":"<p>Ok...this is what I've got. There's an Oracle database table that has a column which is a <code>VARCHAR</code> data type. This column, call it 'value', contains strings that represent different values for different things. So some records have a number in this column, others have scientific notation, others dates, other actual characters etc. but they'll all are stored as strings in this 'value' column.</p>\n\n<p>I need to write a view that can query this table and determine what data type is represented by the string in the 'value' column. I know I can do PL/SQL to do this, but I don't have access to create a stored procedure and this needs to be in a view - for other reasons.</p>\n"},{"tags":["sql","database","oracle","sql-server-2008","tsql"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":12559551,"title":"SQL Server equivalent of WM_CONCAT function","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1621747/concat-field-value-to-string-in-sql-server\">Concat field value to string in SQL Server</a>  </p>\n</blockquote>\n\n\n\n<p>What is the SQL Server equivalent of WM_CONCAT?</p>\n"},{"tags":["java","sql","database","oracle","jdbc"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":136,"score":1,"question_id":10752809,"title":"Is this right query to be sent to Oracle","body":"<p><code>UPDATE MY_TABLE SET COL_1=?, COL_2=? where COL_3=? AND COL_4=?</code></p>\n\n<p>and I send exact number of values in array to the Statement(In my case  : 4). Doing so I am getting exception : Missing IN or OUT parameter at index:: 4</p>\n\n<p>Note : I think we cannot DO <code>SET COL_1=?,COL_2=?</code> we need to do <code>SET COL_1='DESIRED_VALUE',COL_2='DESIRED_VALUE'</code> Is this my misconception?</p>\n\n<p>Java Code</p>\n\n<pre><code>StringBuilder updateQuery=new StringBuilder(\"UPDATE MY_TABLE SET COL_1=?, COL_2=? where BOOKMARKID_ACT=? AND DIMID_ACT=?\");         \nArrayList&lt;Object&gt; alObjectData=new ArrayList&lt;Object&gt;();\nalObjectData.add(\"VALUE1\");\nalObjectData.add(\"VALUE2\");\nalObjectData.add(\"VALUE3\");\nalObjectData.add(\"VALUE4\");\ndpQuery.executeUpdate(connTemp, updateQuery.toString(), alObjectData);\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":211,"score":-2,"question_id":8375417,"title":"SQL join column","body":"<p>I have a set of table as following</p>\n\n<pre><code>customer(cus_id,cus_first_name,cus_last_name);\ninsert into customer values ('c001', 'tan', 'wah khang');\n</code></pre>\n\n<p>I want to create a select statement to display the first name join with the last name.\nExample : </p>\n\n<pre><code>tan wah khang\n</code></pre>\n\n<p>is that possible?</p>\n"},{"tags":["sql","oracle","triggers"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":320,"score":1,"question_id":6801944,"title":"Oracle SQL Trigger","body":"<p>I want to prevent the database from storing any values bigger than 20 into a table.</p>\n\n<pre><code>CREATE OR REPLACE TRIGGER Dont_Allow\nAFTER INSERT ON Cities\nFOR EACH ROW\n\nWHEN (new.IDCity &gt; 20)\n\nBEGIN\n   dbms_output.put_line('  Failed to insert ' || :new.IDCity);\n   delete from orase where IDCity=:new.IDCity;\nEND;\n</code></pre>\n\n<p>While this does work in terms of not actually adding anything with an <code>ID &gt; 20</code>, every time the trigger tries to do its magic, this shows up:</p>\n\n<blockquote>\n  <p>ORA-04091: table SYSTEM.ORASE is mutating, trigger/function may not see it<br />\n  ORA-06512: at \"SYSTEM.DONT_ALLOW\", line 6<br />\n  ORA-04088: error during execution of trigger 'SYSTEM.DONT_ALLOW'</p>\n</blockquote>\n\n<p>What's a proper way of doing what I want? </p>\n\n<hr>\n\n<h2>EDIT:</h2>\n\n<p>I've decided to use a trigger for this: </p>\n\n<p>After a new row is inserted into <code>Employees</code>, a trigger checks the new guy's salary and if it's above 21 units / hour, it takes 5% off management's bonus. Lame, but hey - I'm using a trigger to solve a problem I don't have: the outcome won't be pretty.</p>\n\n<pre><code>CREATE OR REPLACE TRIGGER Bite_Bonus\nAFTER INSERT ON Employees\nFOR EACH ROW\n\nWHEN (new.HourSalary &gt; 20)\n\nBEGIN\n   update Management set Bonus = Bonus - 5/100 * Bonus;\nEND;\n</code></pre>\n"},{"tags":["java","oracle","jdbc","timezone","spring-jdbc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":189,"score":1,"question_id":12563553,"title":"Insert UTC date in Oracle database with Java and Spring","body":"<p>When I insert <code>new Date()</code> object using <code>jdbcTemplate</code> to Oracle database, I can see that jdbc driver or Spring jdbcTemplate insert <code>Date</code> using local JVM offset.</p>\n\n<pre><code>SimpleDateFormat sdf = new SimpleDateFormat(\"dd-MMM-yyyy\");\nsdf.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\nDate timeZoneDate = sdf.parse(\"09-SEP-1987\");\n</code></pre>\n\n<p>For example when I insert Date object created in GMT this result to inserting 08-SEP-1987 in Oracle database if JVM timezone is USA.</p>\n"},{"tags":["mysql","sql","oracle"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":5,"view_count":96,"score":-3,"question_id":12652785,"title":"Is this valid table create syntax?","body":"<p>Given a design of:</p>\n\n<pre><code>Player\n===========\nPlayerID\nTeamID\nFirstName\nLastName\nDateOfBirth\n\nTeam\n===========\nTeamID\nTeamName\nGrade\n\nMatch\n===========\nMatchID\nHomeTeamID\nAwayTeamID\nDate\nResult\n</code></pre>\n\n<p>I am using this: </p>\n\n<pre><code> CREATE TABLE Match(\n   MatchID VARCHAR2(5) NOT NULL,\n   Dateofmatch date,\n   Result VARCHAR2(1) ,\n   HomeTeam VARCHAR2(5),\n   AwayTeam VARCHAR2(5),\n   CONSTRAINT MatchPK PRIMARY KEY(MatchID),\n   CONSTRAINT HomeFK FOREIGN KEY(HomeTeamIDFK) REFERENCES TEAM(TeamID),\n   CONSTRAINT AwayFK FOREIGN KEY(AwayTeamIDFK) REFERENCES TEAM(TeamID),\n   CONSTRAINT Result\n   Check (Result in (‘W’,’L’,’D’)\n   );\n</code></pre>\n\n<p>to create the Match table assuming that Match ID,Player ID and teamID colums are of data type <code>VARCHAR2(5)</code>. The result of the match refers to homeTeam and can only be W,L or D.</p>\n\n<p>Is this correct?</p>\n\n<hr>\n\n<p>I have come out with this kindly correct me</p>\n\n<pre><code>CREATE TABLE Match (\n    MatchID VARCHAR2(5) NOT NULL,\n    Dateofmatch date,\n    Result VARCHAR2(1) ,\n    HomeTeam VARCHAR2(5),\n    AwayTeam VARCHAR2(5),\n    CONSTRAINT MatchPK PRIMARY KEY(MatchID),\n    CONSTRAINT HomeFK FOREIGN KEY(HomeTeamIDFK) REFERENCES TEAM(TeamID),\n    CONSTRAINT AwayFK FOREIGN KEY(AwayTeamIDFK) REFERENCES TEAM(TeamID),\n    CONSTRAINT Result Check (Result in (‘W’,’L’,’D’)\n);\n</code></pre>\n"},{"tags":["oracle"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1231,"score":4,"question_id":5677665,"title":"Count of 2 distinct columns","body":"<p>How can I get the count of 2 columns such that there are distinct combinations of two columns?</p>\n\n<pre><code>Select count(distinct cola, colb)\n</code></pre>\n"},{"tags":["sql","oracle","oracle10g"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":80,"score":3,"question_id":12650875,"title":"CASE .. WHEN expression in Oracle SQL","body":"<p>I have the table with 1 column and has following data</p>\n\n<pre><code>Status\na1\ni\nt\na2\na3\n</code></pre>\n\n<p>I want to display the following result in my select query</p>\n\n<pre><code>Status| STATUSTEXT\na1    | Active\ni     | Inactive\nt     | Terminated\na2    | Active\na3    | Active\n</code></pre>\n\n<p>One way I could think was using a Switch When expression in select query</p>\n\n<pre><code>SELECT\nstatus,\nCASE status \nWHEN 'a1' THEN 'Active'\nWHEN 'a2' THEN 'Active'\nWHEN 'a3' THEN 'Active'\nWHEN 'i' THEN 'Inactive'\nWHEN 't' THEN 'Terminated'\nEND AS StatusText\nFROM stage.tst\n</code></pre>\n\n<p>Is there any other way of doing this where I don't need to write <i><B>When expression 3 times for Active Status </B></i> and the entire active status can be checked in one single expression?</p>\n"},{"tags":["php","oracle","codeigniter"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12651446,"title":"How to execute a stored procedure in Codeigniter with the Oracle Driver?","body":"<p>How to execute a stored procedure in Codeigniter with the Oracle Driver ?\nI have Oracle 10g and Codeigniter 2.1.2 .</p>\n"},{"tags":["sql","database","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":12610190,"title":"Is there a index or timestamp for Oracle RDBMS records, and how do I obtain it?","body":"<p>I'm currently doing some re-engineering work as I'm now unable to get information on the logic of a internal system, which was built in India (outsourcing). </p>\n\n<p>In this process it would really help me if I was able to somehow determine the order in which records of a specific table was inserted (and possible updated). For some reason there has not been added any timestamp that unambiguously uncovers this, so what I'm looking for is some hidden Oracle RDBMS index/timestamp and how to get it. I guess the order in which records are returned using a select all is not random, so I guess there must be somekind of order. </p>\n\n<p>I am hoping to be able to refer to this index/timestamp in the select so that it is returned as a field in a recordset. Is this possible, and how do I do it? </p>\n"},{"tags":["sql","database","oracle","ms-access","plsql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12610575,"title":"Is it possible to update a clone database only with changes in the source database?","body":"<p>For reasons I'm not about to explain, We keep a Access database that is to be a copy of a subset of a larger oracle database. It is not feasible to refer to data directly in the Oracle database due to speed issues (don't ask). </p>\n\n<p>Every time a specific application is opened the local Access database is updated from the newest data found to the time of opening the application. First of all this does not capture changes in the existing records. Secondly it does not take into account changes in the source database made after opening the application.</p>\n\n<p>For this reason several checks may be needed when carrying out certain operations in the application. So is it possible to update the local Access database only with changes in the Oracle database in a smarter and faster way than the hard way I am imagining (I'm not a PL/SQL / SQL expert)? Possibly it might be sufficient to look for changes only after a certain date (stored in one of the fields of the recordset retrieved). </p>\n\n<p>Any suggestions? </p>\n"},{"tags":["c#","string","oracle","arraylist","parameter-passing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12648131,"title":"String not formed when trying to create inside a foreach","body":"<p>I have a class People_val. I make a list of this class in another class. Now I do a foreach on this list and for each item I call its ToSQL() func which gives me an insert Query. The list count is more than 50,000 records. The 9774 th query is not fully formed.\n<strong>9771 INSERT INTO CONVERSION_PEOPLE_VALIDATION VALUES (16413,'Jnto','Johnson',</strong> And because of this the command is not executed and transaction is rolled back.\nWhat should i do inorder to get the full string in foreach.</p>\n\n<pre><code>public class People_Val\n{\n    public int MEMBERS_ID;\n    public string PFirstName;\n    public string PLastName;\n\n    public DateTime? BIRTH_DATE;\n    public string RELATIONSHP;\n\n    public string ToSQL()\n    {            \n        return string.Format(\"INSERT INTO CONVERSION_PEOPLE_VALIDATION VALUES ({0},'{1}','{2}','{3}', TO_CHAR('{4}', 'DD-MON-YYYY'))\",\n                             MEMBERS_ID, PFirstName.Replace(\"'\",\"\\\"\"), PLastName.Replace(\"'\",\"\\\"\"), RELATIONSHP, BIRTH_DATE);\n    }\n}\n\npublic void insertPeopleValTrans(List&lt;People_Val&gt; _lstPeoplevals)\n{\n    int count=0;\n    TextWriter tw = new StreamWriter(@\"C:\\PeopleVal.txt\");\n    using (OracleConnection conn = new OracleConnection(connectionStr)) {\n        conn.Open();\n        OracleTransaction trans;\n        trans = conn.BeginTransaction();\n        try {\n            foreach (People_Val peopleVal in _lstPeoplevals) {\n                OracleCommand cmd = new OracleCommand(peopleVal.ToSQL(), conn, trans);\n                cmd.ExecuteNonQuery();\n                count++;\n                if (count % 500 == 0) {\n                    Console.WriteLine(\"saving \" + count.ToString() + \" Records\");\n                }\n                tw.WriteLine(count.ToString()+\" \"+ peopleVal.ToSQL());\n            }\n            trans.Commit();\n            tw.Close();\n        } catch (Exception ex) {\n            Console.WriteLine(ex.Message);\n            trans.Rollback();\n        }\n        conn.Close();\n    }          \n}\n</code></pre>\n"},{"tags":["perl","oracle","dbi"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12646929,"title":"Oracle DBI perl module on Solaris 5.10","body":"<p>I am trying to write a simple perl script that checks some data in ORCL.</p>\n\n<p>My PERL5LIB is set to</p>\n\n<p>/opt/oracle/product/client10.2.0.3/perl/lib/site_perl/5.8.3/sun4-solaris-thread-multi-64</p>\n\n<p>which is the parent dir for DBD/Oracle.pm</p>\n\n<p>However, when I run</p>\n\n<pre><code>&gt; perl -e 'use DBD::Oracle; print $DBD::Oracle::VERSION,\"\\n\";'\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>Can't load '/opt/oracle/product/client10.2.0.3/perl/lib/site_perl/5.8.3/sun4-solaris-thread-multi-64/auto/DBI/DBI.so' for module DBI: ld.so.1: perl: fatal: /opt/oracle/product/client10.2.0.3/perl/lib/site_perl/5.8.3/sun4-solaris-thread-multi-64/auto/DBI/DBI.so: wrong ELF class: ELFCLASS64 at /usr/perl5/5.8.4/lib/sun4-solaris-64int/DynaLoader.pm line 230.\n at /opt/oracle/product/client10.2.0.3/perl/lib/site_perl/5.8.3/sun4-solaris-thread-multi-64/DBI.pm line 252\nBEGIN failed--compilation aborted at /opt/oracle/product/client10.2.0.3/perl/lib/site_perl/5.8.3/sun4-solaris-thread-multi-64/DBI.pm line 252.\nCompilation failed in require at /opt/oracle/product/client10.2.0.3/perl/lib/site_perl/5.8.3/sun4-solaris-thread-multi-64/DBD/Oracle.pm line 20.\nBEGIN failed--compilation aborted at /opt/oracle/product/client10.2.0.3/perl/lib/site_perl/5.8.3/sun4-solaris-thread-multi-64/DBD/Oracle.pm line 20.\nCompilation failed in require at -e line 1.\nBEGIN failed--compilation aborted at -e line 1.\n</code></pre>\n\n<p>In I run a script that tries to invoke DBD/DBI saying:</p>\n\n<pre><code>use DBI;\nuse DBD::Oracle;\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>Can't load '/opt/oracle/product/client10.2.0.3/perl/lib/site_perl/5.8.3/sun4-solaris-thread-multi-64/auto/DBI/DBI.so' for module DBI: ld.so.1: perl: fatal: /opt/oracle/product/client10.2.0.3/perl/lib/site_perl/5.8.3/sun4-solaris-thread-multi-64/auto/DBI/DBI.so: wrong ELF class: ELFCLASS64 at /usr/perl5/5.8.4/lib/sun4-solaris-64int/DynaLoader.pm line 230.\n at /opt/oracle/product/client10.2.0.3/perl/lib/site_perl/5.8.3/sun4-solaris-thread-multi-64/DBI.pm line 252\nBEGIN failed--compilation aborted at /opt/oracle/product/client10.2.0.3/perl/lib/site_perl/5.8.3/sun4-solaris-thread-multi-64/DBI.pm line 252.\n</code></pre>\n\n<p>Interestingly enough, before setting PERL5LIB, when I run</p>\n\n<pre><code>&gt; perl -e 'use DBI; print $DBI::VERSION,\"\\n\";'\n</code></pre>\n\n<p>I get 1.58.  But when I run the same exact command after setting PERL5LIB, I get an error similar to the one above for DBD::Oracle\nWhat am I missing?</p>\n\n<p>Thanks</p>\n"},{"tags":["sql","oracle","pivot","oracle11gr2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12646342,"title":"Oracle 11G R2 SQL rows to columns","body":"<p>I have a table of bank staff information that looks like this:</p>\n\n<pre><code>branchNumber    Position    firstName    lastName    staffNumber\n------------    --------    ---------    --------    -----------\n25              Manager     john         doe         11111\n25              Secretary   robert       paulson     11112\n25              Secretary   cindy        lu          11113\n66              Manager     tim          timson      22223\n66              Manager     jacob        jacobson    22224\n66              Secretary   henry        henryson    22225\n66              Supervisor  paul         paulerton   22226\n</code></pre>\n\n<p>I am actually done with this, but I completed the assignment using SQL common table expressions, and I can't use them in this project, I need them in this format.</p>\n\n<pre><code>branchNumber    numOfManagers    numOfSecretaries    numOfSupervisors    totalEmployees\n------------    -------------    ----------------    ----------------    --------------\n25                    1                 2                   0                   3\n66                    2                 1                   1                   4\n</code></pre>\n\n<p>My issue is getting multiple columns with information from a row, I have this so far,</p>\n\n<pre><code>SELECT branchNumber, COUNT(*) AS numOfManagers\nFROM Staff\nWHERE position = 'Manager'\nGROUP BY branchNumber, Position;\n</code></pre>\n\n<p>This outputs the correct information for numOfManagers, but making the next three columns eludes me without using CTE's.  I tried sub selects too, with no luck.  Anybody have any ideas?</p>\n"},{"tags":["php","mysql","oracle","cakephp-2.0","uuid"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12646498,"title":"Using UUID in CakePHP, What DataType Is Recommended?","body":"<p>My Scenario:</p>\n\n<ul>\n<li>New Cake (2.x) Project, No DB Yet </li>\n<li>MySQL Clustered, and maybe Oracle Clustered Prod</li>\n<li>No DATA needs to be migrated/imported</li>\n<li>Data can look like: <code>Users</code> -> HABTM -> <code>Groups</code> -> HABTM -> <code>Other Groups</code></li>\n</ul>\n\n<p>I've been doing a little research on how to use UUIDs with CakePHP, and I have found the following:</p>\n\n<p>Cake has Native Support for UUID, but it assumes <code>CHAR(36)</code>:</p>\n\n<p><a href=\"http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html\" rel=\"nofollow\">http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html</a></p>\n\n<p>This <a href=\"http://stackoverflow.com/a/10918405\">Stack Answer</a> points out that:</p>\n\n<blockquote>\n  <p>The cost of doing UUID as CHAR(36) is ridiculously high, and becomes\n  stupid at 1+ milion, 10+ million, 100+ millions of rows, in my humble\n  experience</p>\n</blockquote>\n\n<p>This <a href=\"http://www.paulmarshall.us/blog/cakephp-and-uuids\" rel=\"nofollow\">Blog Post</a> claims that <code>BINARY(36)</code> is better than <code>CHAR(36)</code>:</p>\n\n<blockquote>\n  <p>Although CakePHP does not support the 16 byte hex encoded UUID with\n  the key type of BINARY(16), it does support BINARY(36) which is still\n  better than using CHAR(36) which can be slowed down by collation.</p>\n</blockquote>\n\n<p>...but the Cake Docs don't say that...</p>\n\n<p>My Question is, given CakePHP/MySQL (or CakePHP/Oracle), is CHAR(36) the only reasonable choice here, or is there a better, more efficient way to use UUIDs with CakePHP (or any other PHP Framework for that matter)? </p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":145,"score":-1,"question_id":12636218,"title":"ORA-01427: single-row subquery returns more than one row","body":"<p>I'm doing an exercise of oracle, and I meet a problem.\nWhen I execute this query statement, the FINDJOURNAL function returns an object which includes multiple rows. The result will contains the object name and the values I desired.</p>\n\n<pre><code>SELECT issn, title, publisher, FINDJOURNAL(title) FROM JOURNAL;\n</code></pre>\n\n<p>When I modified the statement like this:</p>\n\n<pre><code>SELECT ISSN, TITLE, PUBLISHER, PRICE, VOL#, ISSUE#\nFROM Journal, TABLE(SELECT FINDJOURNAL(title) FROM Journal);\n</code></pre>\n\n<p>It reports an error: </p>\n\n<blockquote>\n  <p>ORA-01427: single-row subquery returns more than one row</p>\n</blockquote>\n\n<p>The result format I desired is:</p>\n\n<p>ISSN&nbsp;&nbsp;&nbsp; TITLE&nbsp;&nbsp;&nbsp; PUBLISHER&nbsp;&nbsp;&nbsp; PRICE&nbsp;&nbsp;&nbsp; VOL#&nbsp;&nbsp;&nbsp; ISSUE# <br />\n1233&nbsp;&nbsp;&nbsp; abc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IEEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</p>\n\n<p>Can anyone help me out?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12643924,"title":"Oracle Sproc Errors SQL","body":"<p>I have the following sproc which compiles just fine:</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE SSACHDEV.SyncTeleappWithClientinfo\nas\nmine varchar2(1);\nv_teleCaseNbr      number;\nv_cashwithappyn varchar2(1);\n\nCURSOR TeleAppCursor\nis\n    Select \n        distinct casenbr, cashwithappyn\n    from TeleApp;\n\nBEGIN\ndbms_output.put_line('begin');\nopen TeleAppCursor;\n\nLOOP\n    fetch TeleAppCursor into v_teleCaseNbr, v_cashwithappyn;\n    EXIT when TeleAppCursor%NOTFOUND; -- this one has the problem\n\n    Select cashwithappyn into mine from ClientInfo where casenbr = v_teleCaseNbr and trim(cashwithappyn) is null;\n\nEND LOOP;\ndbms_output.put_line('end');\nEND;\n</code></pre>\n\n<p>But when I try to run it using the following:</p>\n\n<pre><code>BEGIN \n  SSACHDEV.SYNCTELEAPPWITHCLIENTINFO;\nEND;\n</code></pre>\n\n<p>I get the following errrors:</p>\n\n<pre><code>ORA-01403: no data found\nORA-06512: at \"SSACHDEV.SYNCTELEAPPWITHCLIENTINFO\", line 21\nORA-06512: at line 2\n</code></pre>\n\n<p>Anyone know why? Or what I can do to avoid these problems?</p>\n"},{"tags":["c#",".net","oracle","plsql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12643866,"title":"Generate a .Net ticks in Oracle","body":"<p>Does anybody knows how to generate a .Net DateTime.Ticks in a PL/SQL stored procedure, without having a .Net assembly in the Oracle database?</p>\n\n<p>I have a service in .Net storing the DateTime.Ticks value in a column [Oracle database].\nNow I have to create a stored procedure to create similar information, but I have to match .Net ticks in that particular column.</p>\n"},{"tags":["java","oracle","oracle10g","debian","sql-developer"],"answer_count":6,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2935,"score":0,"question_id":3443241,"title":"unable to run sqldeveloper on debian","body":"<p>I have installed jdk1.6.0_21 and sqldeveloper(using alien) on debian(lenny). Now when I run sqldeveloper it asks for J2SE installation path, after I type the jdk path it exits with the below error message.</p>\n\n<pre><code>Oracle SQL Developer\n Copyright (c) 2008, Oracle. All rights reserved.  \n\nType the full pathname of a J2SE installation (or Ctrl-C to quit), the path will be stored in ~/.sqldeveloper/jdk\n/usr/java/jdk1.6.0_21\n/opt/sqldeveloper/sqldeveloper/bin/../../ide/bin/launcher.sh: line 430: /root/.sqldeveloper/jdk: No such file or directory\nError occurred during initialization of VM\njava/lang/NoClassDefFoundError: java/lang/Object\nError: SQL Developer can't recognize the JDK version\n</code></pre>\n\n<p>please help me out..</p>\n"},{"tags":["oracle","plsql","sql-developer"],"answer_count":5,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":459,"score":3,"question_id":4216476,"title":"plsql engine in SQLDeveloper","body":"<p>Is there a plsql engine in SQLDeveloper?</p>\n"},{"tags":["c","multithreading","oracle","memory-leaks","aix"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":49,"score":0,"question_id":12644520,"title":"KPEDBG_HDL_POP_FCPTR Multithreaded application error","body":"<p>I have a multithreaded application that get killed on AIX machine with fillowing message:</p>\n\n<pre><code>KPEDBG_HDL_POP_FCPTR\n</code></pre>\n\n<p>From google I got this information \"This exception is the occi multithreaded access the sake\".</p>\n\n<p>Anyone else has encountered this issue, and what are the causes for this ?\nThanks </p>\n"}]}
{"total":22203,"page":18,"pagesize":100,"questions":[{"tags":["sql","oracle","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":80,"score":4,"question_id":12643041,"title":"Oracle virtual column referencing another table","body":"<p>I have a table <code>TABLE1</code> with column <code>COL_TAB1</code>.</p>\n\n<pre><code>select * from TABLE1:\n COL_TAB1\n|    1   |\n|    2   |\n|    3   |\n</code></pre>\n\n<p>And another table <code>TABLE2</code> with <code>COL_TAB2</code> and references the first column <code>COL_TAB1</code></p>\n\n<pre><code>select * from TABLE2:\n COL_TAB2  |  COL_TAB1\n| val1     |     1\n| val2     |     2\n| val2     |     3\n</code></pre>\n\n<p>Is it possible to add a virtual column on table1 so i would get the same result as the following query:</p>\n\n<pre><code>select \n    t1.COL_TAB1, \n    (select t2.COL_TAB2 from TABLE2 t2 where t2.COL_TAB1 = t1.COL_TAB1)\nfrom TABLE1 t1\n</code></pre>\n\n<p>I tried :</p>\n\n<pre><code>alter table TABLE1 add (\n    SOME_COL_NAME as (select t2.COL_TAB2 from TABLE2 t2 where t2.COL_TAB1 = COL_TAB1)\n)\n</code></pre>\n\n<p>But it gives me <code>ORA-00936: missing expression</code></p>\n"},{"tags":["java","oracle","java-ee","sample"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12642355,"title":"deploying/Running dukesbank sample application of java ee with glassfish","body":"<p>I am trying to run dukesbank sample application which is here.</p>\n\n<p><a href=\"http://docs.oracle.com/javaee/5/tutorial/doc/bncna.html\" rel=\"nofollow\">http://docs.oracle.com/javaee/5/tutorial/doc/bncna.html</a></p>\n\n<p>I am trying to follow the following instructions from there:</p>\n\n<pre><code>Building, Packaging, and Deploying Duke’s Bank Using Ant\n\nTo compile and package the enterprise beans, application client, and web client into dukesbank.ear, go to the tut-install/javaeetutorial5/examples/dukesbank/ directory of the tutorial distribution and execute the command:\n\nant\n\nRun the following command to deploy dukesbank.ear:\n\nant deploy\n\nThis task calls the create-tables task to initialize the database tables.\n</code></pre>\n\n<ol>\n<li><p>I am using ubuntu 12.04. I have installed glassfish application server and I am able to start and stop it properly. I have downloaded the javaeetutorial5. </p></li>\n<li><p>I have written password of glassfish in javaeetutorial5/example/common/admin-passwd.txt file. </p></li>\n<li><p>I have given values to parameters in javaeetutorial5/examples/bp-project/build.properties.sample file and then I have renamed the file to build.properties.</p></li>\n<li><p>Now when I got to directory javaeetutorial/example/dukesbank in terminal and type <code>\"ant\"</code>, it works fine. but when I try to type \"<code>ant run</code>\" it gives me following:</p>\n\n<p>create-tables:\n          [sql] Executing resource: /home/ragini/javaeetutorial5/examples/common/sql/javadb/tutorial.sql\n          [sql] 181 of 181 SQL statements executed successfully</p>\n\n<pre><code>    deploy:\n         [exec] Deprecated syntax, instead use:\n         [exec] asadmin --user admin --passwordfile /home/ragini/javaeetutorial5/examples/common/admin-password.txt --host localhost --port 4848 deploy [options] ...\n         [exec] Command deploy failed.\n         [exec] Authentication failed for user: admin\n         [exec] with password from password file: /home/ragini/javaeetutorial5/examples/common/admin-password.txt\n         [exec] (Usually, this means invalid user name and/or password)\n</code></pre></li>\n</ol>\n\n<p>pl note that till create table, everything executes successfully then it gives me the shown error. <strong>Could someone pl tell what does it try to say actually ?</strong> </p>\n\n<p>My build.properties file in javaeetutorial/examples/bp-project/ looks like below:</p>\n\n<pre><code># Set the property javaee.home, using the path to your \n# GlassFish installation.\n# C:/Program Files/glassfish-v3 is the GlassFish v3 default installation \n# path on Windows.\n# \njavaee.home=/usr/local/glassfish-3.1.2.2\n\n# Set the property javaee.tutorial.home to the location where you \n# installed the Java EE Tutorial bundle.\n#\njavaee.tutorial.home=/home/ragini/javaeetutorial5\n\n# machine name (or the IP address) where the applications will be deployed.\njavaee.server.name=localhost\n\n# port number where GlassFish applications are accessed by users\njavaee.server.port=8080\n\n# port number where the Admin Console of GlassFish is available\n\njavaee.adminserver.port=4848\n\n\n# Uncomment the property javaee.server.username, \n# and replace the administrator username of the app-server \njavaee.server.username=admin\n\n# Uncomment the property javaee.server.passwordfile, \n# and replace the following line to point to a file that \n# contains the admin password for your app-server. \n# The file should contain the password in the following line: \n#\n# AS_ADMIN_PASSWORD=admin\n#\n# Notice that the password is adminadmin since this is \n# the default password used by GlassFish.\n#\njavaee.server.passwordfile=${javaee.tutorial.home}/examples/common/admin-password.txt\n\nappserver.instance=server\n\n# Uncomment and set this property to the location of the browser you \n# choose to launch when an application is deployed.\n# On Windows and Mac OS X the OS default browser is used.\n#default.browser=/Applications/Firefox.app/Contents/MacOS/firefox-bin\n\n# Database vendor property for db tasks\n# JavaDB is the default database vendor. See the settings in javadb.properties\ndb.vendor=javadb\n\n# Digital certificate properties for mutual authentication\nkeystore=${javaee.tutorial.home}/examples/jaxws/simpleclient-cert/support/client_keystore.jks\ntruststore=${javaee.home}/domains/domain1/config/cacerts.jks\nkeystore.password=changeit\ntruststore.password=changeit\n</code></pre>\n\n<p>I am quite sure about username and password of glassfish.</p>\n"},{"tags":["sql","xml","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":12638998,"title":"Check whether string is a well-formed xml","body":"<p>I have varchar2 column in DB. And this column stores string in xml format.\nBut not all strings are well-formed xml (some with mistakes).\nHow can I check is this string well-formed xml or not?</p>\n\n<p>If this string isn't well formed xml, sql-query like this will fail at runtime:</p>\n\n<pre><code>   select \n       extractvalue(xmltype(some_table.value), 'Attachment/@category')\n   from some_table\n</code></pre>\n\n<p>Xml has following format:</p>\n\n<pre><code>   &lt;Attachment {attributes} /&gt;\n</code></pre>\n\n<p>Number of attributes in each string can be different.</p>\n\n<p>So when the string like 'asdf' would occur my query wouldn't fail. </p>\n"},{"tags":["oracle","oledb","linkedserver"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1243,"score":0,"question_id":4784966,"title":"Cannot get the data of the row from the OLE DB provider 'ProviderName' for linked server 'LinkedServerName'","body":"<p>I am running into this issue when I try to execute this query involving Linked Server to Oracle. Find the query underneath,</p>\n\n<pre><code>SELECT DISTINCT Convert(nvarchar(100),A.ZIP_CD)\n               ,Convert(nvarchar(100),A.CITY)\n               ,Convert(nvarchar(100),A.ST_CD)\n               ,Convert(nvarchar(100),E.PCT)\n               ,Convert(nvarchar(100),B.DEFAULT_DEL_CHG)\n               ,Convert(nvarchar(100),E.DEL_TAX)\n\nFROM [LIVE]..[CUSTOM].MASTER_ZIP A,\n     [LIVE]..[MISC].ZONE B,\n     [LIVE]..[MISC].ZIP2ZONE C,\n     [LIVE]..[MISC].ZIP2TAX D,\n     [LIVE]..[SALES].TAT E\nWHERE A.ZIP_CD = C.ZIP_CD\nAND ISNULL(B.DEFAULT_DEL_CHG,0) &lt;&gt; 0\nAND A.USPS_PRIM = 'P'\nAND C.ZONE_CD = B.ZONE_CD\nAND A.ZIP_CD = D.ZIP_CD\n--AND decode(D.TAX_CD,'999','99',d.tax_cd) = E.TAT_CD\nAND (Case When D.TAX_CD = '999' Then '99' Else D.TAX_CD End) = E.TAT_CD\n</code></pre>\n\n<p>Here is what I get as an error,</p>\n\n<blockquote>\n  <p>Cannot get the data of the row from the OLE DB provider \"OraOLEDB.Oracle\" for linked server \"LIVE\".</p>\n</blockquote>\n\n<p>I found on a forum that said to try to convert to nvarchar as Oracle has problem converting numerics in sql server, but I still get the same error.</p>\n\n<p>Any idea on how to resolve this issue? Thanks.</p>\n"},{"tags":["sql","oracle","query"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":12640816,"title":"SQL query efficiency","body":"<p>I have an working query and not sure if its efficient or not.</p>\n\n<p>Table columns: </p>\n\n<ol>\n<li>p_type: can be STRING sell, cancelsell, bank, cancelbank  </li>\n<li>id</li>\n<li>fid</li>\n<li>unit</li>\n</ol>\n\n<p>Operation to be performed: </p>\n\n<ol>\n<li>SUM(unit) for each process type sell,cancelsell,bank,cancelbank.</li>\n<li>SUM(UNIT for sell) - SUM(unit for cancelsell) , SUM(unit for bank) - SUM(unit for cancelbank) </li>\n</ol>\n\n<p>NOTE: I am also checking for id and fid in each select though I need to check with same values for all select.</p>\n\n<p>The existing query:</p>\n\n<pre><code>    select sell-cancelsell scount, bank-cancelbank bcount from\n\n    (select sum(a.unit) as sell from table1 a where   \n    a.p_type = 'Sell' and a.id=1 and a.fid=2 ),\n\n    (select sum(c.unit) as cancelsell from table1  c where      \n    c.p_type = 'CancelSell' and c.id=1 and c.fid=2),\n\n    (select sum(b.unit) as bank from table1  b where     \n    b.p_type = 'Bank' and b.id=1 and b.fid=2),\n\n    (select sum(d.unit) as cancelbank from table1  d where  \n    d.p_type = 'CancelBank' and d.id=1 and d.fid=2)\n</code></pre>\n\n<p>Is good enough? If anyone can suggest a way to make it more efficient that would be great.</p>\n"},{"tags":["java","oracle","mybatis"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12533263,"title":"Invalid Column Index Error - Unable to resolve the issue","body":"<p>This is how my XML looks like. All the properties defined has respective getters and setters defined. I am unable to resolve the \"Invalid Column index\" issue after trying various suggestions. </p>\n\n<p>The SELECT statement returns all the properties listed appropriately and I have verified the same running as separate Query. </p>\n\n<p>I am fetching data from set of tables for a particular Group between a specified Date Range.</p>\n\n<p></p>\n\n<pre><code>    &lt;resultMap id=\"result\" type=\"ValueStats\"&gt;\n        &lt;result property=\"GroupId\" column=\"GROUP_ID\"/&gt;\n        &lt;result property=\"valueId\" column=\"VALUE_ID\"/&gt;\n        &lt;result property=\"valueName\" column=\"VALUE_NAME\"/&gt;\n        &lt;result property=\"valImp\" column=\"IMP\"/&gt;\n        &lt;result property=\"valCks\" column=\"CKS\"/&gt;\n        &lt;result property=\"valCR\" column=\"CR\"/&gt;\n        &lt;result property=\"valAp\" column=\"AP\"/&gt;\n        &lt;result property=\"valRv\" column=\"RV\"/&gt;\n        &lt;result property=\"valCt\" column=\"CT\"/&gt;\n        &lt;result property=\"fromDate\" column=\"FROM_DATE\"/&gt;\n        &lt;result property=\"toDate\" column=\"END_DATE\"/&gt;\n        &lt;result property=\"valKc\" column=\"KC\"/&gt;\n    &lt;/resultMap&gt;\n\n    &lt;select id=\"getAll\" resultMap=\"result\"&gt;\n        SELECT \n              B.GROUP_ID AS GROUP_ID,\n              B.VALUE_ID AS VALUE_ID,\n          B.VALUE_NAME AS VALUE_NAME,\n          A.IMP AS IMP, \n          A.CKS AS CKS,\n          A.CR AS CR,\n          A.AP AS AP,\n          A.RV AS RV,\n          A.CT AS CT,\n          #{fromDate} AS FROM_DATE,\n          #{toDate} AS END_DATE,\n          A.KC AS KC\n        FROM\n        (SELECT \n              Z.VALUE_ID AS VALUE_ID,\n              ROUND(AVG(Z.IMP), 0) AS IMP, \n              ROUND(CEIL(AVG(Z.CKS)),0) AS CKS, \n              ROUND(AVG(Z.CR),5) AS CR,  \n              ROUND(AVG(Z.AP),2) AS AP,\n              ROUND(AVG(Z.CT),2) AS CT, \n              ROUND(AVG(Z.RV),2) AS RV,\n              ROUND(COUNT(Z.VALUE_ID)) AS KC\n              FROM\n                (SELECT \n                  VALUE_ID AS VALUE_ID, \n                  IMP AS IMP, \n                  TO_DATE(DATE_ID,'YYYYMMDD') AS DATEVAL, \n                  CKS, \n                  CR, \n                  AP, \n                  CT, \n                  RV\n            FROM XY_STATS WHERE GROUP_ID='#{groupId}') Z\n            WHERE\n            Z.DATEVAL &lt;![CDATA[&lt;]]&gt; TO_DATE(#{toDate}, 'DD-MM-YY') AND\n            Z.DATEVAL &gt;= TO_DATE(#{fromDate}, 'DD-MM-YY') \n            GROUP BY Z.VALUE_ID) A INNER JOIN XY_VALUE_SETTINGS B\n            ON A.VALUE_ID = B.VALUE_ID\n    &lt;/select&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["sql","oracle","query"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":51,"score":-2,"question_id":12639711,"title":"use of decode in oracle for two arguments","body":"<p>Scenerio is that: </p>\n\n<pre><code>decode(rslt1,\n       'stores',('stores,dead store'),\n       rslt1);\n</code></pre>\n\n<p>Explanation: if my <code>rslt1</code> is equal to <code>stores</code> then <code>rslt</code> should be <code>stores</code> and <code>dead store</code>. Mean two arguments against one argument.</p>\n\n<p>If there is anyother way kindly let me know?</p>\n"},{"tags":["oracle","oracle10g","oracle11g"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":189,"score":2,"question_id":10824590,"title":"why \"missing right parenthesis\" error?","body":"<p>Why does the query produce this error?</p>\n\n<p>ORA-00907: missing right parenthesis\n00907. 00000 -  \"missing right parenthesis\"</p>\n\n<pre><code>select * from\n(\n  (select * from dual) alias1,\n\n  (select * from dual) alias2\n)\n</code></pre>\n\n<p>I get an error on 10g and 11g</p>\n"},{"tags":["sql","oracle","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":72,"score":3,"question_id":12303980,"title":"Possible recursive or analytical query. Can this be done via SQL or is a Script Required?","body":"<p>Not sure if this is possible or not through a standard query but here is how I would like my data to be.</p>\n\n<pre><code>START    END    SETTLE    NEW_SETTLE    CORRECTION_FACT    STORED_SETTLE\n1        2      120       NULL          1                  120\n2        3      127       119           1.0084             128.0668\n3        4      NULL      125           1.0245344          NULL\n</code></pre>\n\n<p>Calculations are done as follows:</p>\n\n<pre><code>CORRECTION_FACT\n</code></pre>\n\n<p>Basically, if NEW SETTLE is null or this is Row 1 than correction factor is always 1.  If row > 1 than correction factor is <code>PREV ROW STORED_SETTLE / NEW_SETTLE</code>  eg. 120/119</p>\n\n<pre><code>STORED_SETTLE\n</code></pre>\n\n<p>This will always be <code>CORRECTION_FACTOR</code> * <code>SETTLE</code>.  This value is not known until the next row is inserted so there will be times where it is NULL.  Tricky part is that this is dependent on <code>CORRECTION_FACT</code> which is also a calculated value and <code>CORRECTION_FACT</code> is dependent on <code>STORED_SETTLE</code>.</p>\n\n<p>In terms of values that I have, I have <code>SETTLE, NEW_SETTLE, START</code> and <code>END</code>.  <code>CORRECTION_FACT</code> and <code>STORED_SETTLE</code> will always have to be calculated.</p>\n\n<p>So the question here is can I do this with some sort of recursive query or analytical function or do I have to write a script to populate?</p>\n"},{"tags":["oracle","oracle10g"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12354054,"title":"Querying an oracle Name column from A through K","body":"<p>I have a name column in one of the table.\nI wish to have 3 checkboxes in UI like A-K, L-S, T-Z.</p>\n\n<p>Is there a way to filter the data using Oracle 10g with three seperate SQLs?</p>\n"},{"tags":["sql","oracle","oracle11g"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":201,"score":1,"question_id":12473372,"title":"Oracle SQL Multiple Insert Ignore duplicate rows","body":"<p>I was wondering what would be the preferred technique in Oracle to copy multiple records into a database that ignored duplicate values on a certain index. the statements are stated explicitly in the statement and don't come from another table</p>\n\n<pre><code>INSERT INTO EXAMPLE (A, B, C, D) VALUES (null,'example1','example2',EXAMPLE_SEQ.nextval);\nINSERT INTO EXAMPLE (A, B, C, D) VALUES (null,'example2','example3',EXAMPLE_SEQ.nextval);\nINSERT INTO EXAMPLE (A, B, C, D) VALUES (null,'example4','example5',EXAMPLE_SEQ.nextval);\n</code></pre>\n\n<p>I am currently doing it like this and checking manually, but need to find a way so that these can be handled as scripts</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12533927,"title":"sequence in analytical function","body":"<p>I have a table  having column <code>name</code>  </p>\n\n<pre><code> NAME\n=========\nGAURAV\nGAURAV\nAJAY\nAJAY\n=========== \n</code></pre>\n\n<p>Now i want to use an existing sequence ,let say abc_seq,and i want to group the records such that ,it will give me the output group by <code>name</code> and each group having the same sequence number</p>\n\n<p>The output which i would like to get is shown below</p>\n\n<pre><code>name    group\n==============\nGAURAV    1\nGAURAV    1\nAJAY      2\nAJAY      2\n==============\n</code></pre>\n\n<p>I have tried this with analytical function ,but how to use sequence in the query having <code>analytical function</code></p>\n"},{"tags":["sql","oracle","plsql","top-n"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":79,"score":2,"question_id":12634058,"title":"Oracle SQL: Show n rows for each id","body":"<p>I have a table with 2 columns, ID and URLS, for each ID there are several URLS. I want to extract only 5 maximum URLS per ID. How do I go about doing this in Oracle SQL?</p>\n"},{"tags":["c#","winforms","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":12621553,"title":"c# / oracle: open/close connection","body":"<p>I need help with database connections and my winapp.</p>\n\n<p>I have a windows app (C#) that, after I log in, starts running 5 or 6 different queries in Oracle database, every 5-10 seconds. Application is up 24/7.</p>\n\n<p>What is a proper way to do this?\nShould I open connection during login and never close it until I close the app, or should I open and close connection every time I run a query?\nFor example:</p>\n\n<pre><code>//first query\nconn.Open();\nDataSet ds1 = new DataSet();\n\nstring sql = \"SELECT * FROM table1\";\n\nOracleCommand cmd = new OracleCommand(sql, conn);\ncmd.CommandType = CommandType.Text;\nOracleDataAdapter da = new OracleDataAdapter(cmd);\nda.Fill(ds1, \"Result1\");\nconn.Dispose();\n\nreturn ds1;\n</code></pre>\n\n<hr>\n\n<pre><code>//second query    \nconn.Open();\nDataSet ds2 = new DataSet();\n\nstring sql = \"SELECT * FROM table2\";\n\nOracleCommand cmd = new OracleCommand(sql, conn);\ncmd.CommandType = CommandType.Text;\nOracleDataAdapter da = new OracleDataAdapter(cmd);\nda.Fill(ds2, \"Result2\");\nconn.Dispose();\n\nreturn ds2;\n</code></pre>\n\n<p>What's the best way to do this?</p>\n"},{"tags":["oracle","plsql","db2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12634026,"title":"Convert Oracle PL/SQL Function to DB2 Function","body":"<p>We have a Oracle PL/SQL function that is returning SYS_REFCURSOR, We want to translate this function to DB2 database.\nOracle Function:</p>\n\n<pre><code>create or replace function queryuser(p_tbname   in varchar2, p_user   in varchar2) \nreturn sys_refcursor \nis \n    l_cursor    sys_refcursor; \n    v_sql    varchar2(2000); \nbegin \n    v_sql := 'select  productid  from ' || p_tbname || 'where user = :user' ; \n    open l_cursor for v_sql using p_user; \n    return l_cursor; \nend;\n</code></pre>\n\n<p>Pls advice me on how to translate this to DB2?</p>\n"},{"tags":["oracle","plsql","sequence","oracle-apex"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":12634268,"title":"Oracle APEX, autonumber not working?","body":"<p>I'm new to Oracle, and new to Oracle Application Express.</p>\n\n<p>I'm working through a manual and I'm trying to create a table with 3 fields:</p>\n\n<p>USER_ID: Number, Primary Key, Autonumber</p>\n\n<p>USER_NAME: VARCHAR2, Unique</p>\n\n<p>PASSWORD: VARCHAR2</p>\n\n<p>I used the APEX SQL Workshop wizard to create the table, but when I try to do something like the following:</p>\n\n<pre><code>INSERT INTO Schema.USERS (USER_NAME,PASSWORD) VALUES ('planet','password');\n</code></pre>\n\n<p>...I get told that a unique constraint on the Primary Key is violated.</p>\n\n<p>A trigger was automatically created by the Table Creation wizard. It looks like this:</p>\n\n<pre><code>create or replace trigger \"BI_USERS\" \n  before insert on \"USERS\"               \n  for each row  \nbegin   \n  if :NEW.\"USER_ID\" is null then\n    select \"USERS_SEQ\".nextval into :NEW.\"USER_ID\" from sys.dual;\n  end if;\nend; \n</code></pre>\n\n<p>I was under the impression this would automatically find the highest numeric value in the USER_ID field of USERS and automatically assign an incremented value to each new INSERT, but this doesn't appear to be happening.</p>\n\n<p>Can anyone suggest what I might be doing wrong?</p>\n\n<p>Many thanks</p>\n\n<p>pt</p>\n"},{"tags":["php","oracle","oci"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12638462,"title":"PHP OCI: how to roll back ANY open connections","body":"<p>I'm using PHP's OCI library to communicate with Oracle. In every function there is a try...catch to catch any exceptions. In the catch part I call my own error handling function.</p>\n\n<p>When an exception occurs I want to rollback ALL open connections to oracle, preferably in my error handling function. Is this possible?</p>\n\n<p>Thanks</p>\n\n#\n\n#\n\n<p>It's a bit hacky, but here's how I solved the problem.</p>\n\n<p>In my connect() function which connects to Oracle, I put this code:</p>\n\n<pre><code>if(!isset($GLOBALS['OPEN_CONNECTIONS'])){\n  $GLOBALS['OPEN_CONNECTIONS'] = array();\n  $GLOBALS['OPEN_CONNECTIONS'][] = $this;\n}else{\n  $GLOBALS['OPEN_CONNECTIONS'][] = $this;\n}\n</code></pre>\n\n<p>This stores a list of all open connections in the global scope.</p>\n\n<p>In my error handling function, I do this:</p>\n\n<pre><code>//rollback all open connections\nif(isset($GLOBALS['OPEN_CONNECTIONS'])){\n  foreach($GLOBALS['OPEN_CONNECTIONS'] as $con){\n    $con-&gt;rollback();\n  }\n}\n</code></pre>\n\n<p>This way, I can rollback all open connections without having to pass them into my error handler.</p>\n"},{"tags":["oracle","nhibernate","ado.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12636472,"title":"Oracle trigger instead of and rowcount","body":"<p>I need to create insert and update triggers for view. I also need that sql%rowcount after executing insert/update on one row return 1. In SQL Server I can set nocount to on, then make some operations and then set nocount to off and select one row. How can I do something similar in Oracle.</p>\n\n<p>I need this for mapping that view in NHibernate which expect Affected rows equal 1.</p>\n"},{"tags":["database","oracle","database-schema","dblink"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":12624291,"title":"How to SELECT in Oracle using a DBLINK located in a different schema?","body":"<p>We have an Oracle DBMS (11g) and the following configuration:</p>\n\n<ul>\n<li>A DB user \"MYUSER\"</li>\n<li>Two schemas \"MYUSER\" and \"SCHEMA_B\"</li>\n<li>User \"MYUSER\" can access \"SCHEMA_B\" and has READ permissions on its tables</li>\n<li>A public DB link \"DB_LINK\" located in \"SCHEMA_B\"</li>\n<li>The DB_LINK is working when using the DB user \"SCHEMA_B\" directly</li>\n</ul>\n\n<p><strong>Question</strong>: When logged on as \"MYUSER\", what is the correct syntax to access tables using the DB link of \"SCHEMA_B\"? Is it possible to do so at all?</p>\n\n<p>I already tried several constellations, which all did not work:</p>\n\n<pre><code>select * from dual@\"DB_LINK\"\nselect * from dual@\"SCHEMA_B\".\"DB_LINK\"\nselect * from dual@SCHEMA_B.\"DB_LINK\"\nselect * from dual@SCHEMA_B.DB_LINK\nselect * from SCHEMA_B.dual@DB_LINK\nselect * from \"SCHEMA_B\".dual@DB_LINK\n</code></pre>\n\n<p>The error message I receive is:\nORA-02019. 00000 -  \"connection description for remote database not found\"</p>\n\n<p>Thanks for any suggestion!</p>\n"},{"tags":["oracle","check-constraints"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":12636475,"title":"Oracle auto generated check constraint","body":"<p>When I create table with columns not null, Oracle automatically creating check constraints to be not null: like this ( query from user_constraints view)</p>\n\n<pre><code>NAME                           TYPE SEARCH_CONDITION\n------------------------------ ---- ---------------------------------------\nSYS_C0036357                   C    \"SUPPLIER_ID\" IS NOT NULL\nSYS_C0036358                   C    \"SUPPLIER_NAME\" IS NOT NULL\n</code></pre>\n\n<p>So, is there any way to know that constraint created by Oracle(Auto) or it had been created by user.</p>\n\n<p>thank you.</p>\n"},{"tags":["oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":926,"score":0,"question_id":1267025,"title":"How to calculate value of string in oracle?","body":"<p>Hi\nIf I have a string say \"3*2+24\" how can calculate its value in Oracle? In sql server you can do exec ('select 3*2+24') and it returns 30</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12635431,"title":"Out of memory Exception when using Nhibernet Flush method","body":"<p>Getting out of memory exception, when try to upload large file to oracle database through NHibernet 2.1. I am getting this error when i call flush method. And i am using \"NEVER\" mode to flush the data. Is there any limitation in NHibernet? I can trace the error-> Error is getting generated when NHibernet try to load the data into StringBuilder it seems, how ever it is an inbuild functionality. Any help on this?..</p>\n\n<p>DB column type is binaryblob</p>\n"},{"tags":["java","database","oracle","teradata"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":60,"score":0,"question_id":12635561,"title":"Joining a table in oracle with table in teradata","body":"<p>i have to join a table in oracle database with a table in teradata database using java. can anybody help me with this ? comments are appreciated .</p>\n"},{"tags":["database","oracle","query"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12633906,"title":"Oracle Snapshot Not Working","body":"<p>I have created a snapshot that takes data from 2 tables and has a refresh rate of 1 day. The snapshot data is not refreshing it is still the same. is there something that i am missing ? </p>\n\n<p>Here is the code:</p>\n\n<pre><code> CREATE SNAPSHOT test\n REFRESH COMPLETE\n        START WITH SYSDATE \n        NEXT sysdate + 1\nAS\nselect item_code,item_conc_code,tran_bran_code,sum(tran_qty) bal_qty\nfrom tranhist a,\n     itemmast b\nwhere a.tran_item_code = b.item_code\ngroup by item_code,item_conc_code,tran_bran_code\n</code></pre>\n"},{"tags":["database","oracle","plsql","oracle10g","constraints"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12561373,"title":"Constraint at database table level instead of function","body":"<p>I have the following select statement which I am using in a function to check overlapping of records and this function is called from application front end.</p>\n\n<pre><code>SELECT count(*),product_no \nfrom products p where lower(p.PRODUCT_REG_NO) ='GB-UNIGAS' \nand (NVL (p.return_date, p.end_date) &gt;= '01-Jan-2015') \nand p.product_no in (select product_no from PRODUCT_MASTER  where  EXPIRED='N' \n                    and product_no  = p.product_no)\n</code></pre>\n\n<p>Instead of a function to check overlapping of records I would like to create a constraint in table so that even at database level there will not be any inserts or updates.</p>\n\n<p>How can I create a constraint with the above sql statement?</p>\n\n<p>Any help is highly appreciable.</p>\n\n<p>Thanks</p>\n"},{"tags":["sql","oracle","query","max","maximum"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1968,"score":1,"question_id":4483222,"title":"How to get second largest or third largest entry from a table","body":"<p>Can anyone please tell me how to find out the <strong>N th largest entry from a table</strong> in oracle?</p>\n\n<p><em>Like for largest we can use</em> MAX(column_name) <em>is there any efficient way to find nth largest also</em>?</p>\n"},{"tags":["oracle","jsf","jasper-reports"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":134,"score":0,"question_id":10613553,"title":"Show hide fields in Jasper Report on the Fly at runtime","body":"<p>I have a search page in an application developed using <em>JSF</em> / <em>Oracle 11g</em> / <em>iReport 4.1</em>. </p>\n\n<p>Users select fields and records of employees are returned based on selected fields in a list further displayed in a data table on jsf page and finally user clicks on print and prints the listed records using jasper reports. This is happening all fine. Now I want to ask, if user select certain check boxes against the search values and wants the JasperReports to show only those selected fields..then <br/></p>\n\n<ul>\n<li>is that possible in JasperReports?<br/></li>\n<li>if yes...just a slight hint how to go about that?<br/></li>\n</ul>\n\n<p>Thanking in advance</p>\n"},{"tags":["sql","oracle","crystal-reports","oracle10g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12629301,"title":"How to join 6th Table with field without repeating?","body":"<p>First of all apology for \" \" all over, it is part of Crystal Report.<br></p>\n\n<p>I have this query, it is written by someone else, I need to add another table but I don't want values to repeat if added tables has more rows of data.<br><br></p>\n\n<p>Original query<br></p>\n\n<pre><code>select \n        \"t1\".\"ID\",\n        \"t4\".\"CURR\",\n        \"t3\".\"TIME\",\n        \"t4\".\"CASE\",\n        \"t5\".\"CASE_TYPE\"\n\nfrom            \n                \"db\".\"t1\" \"t1\"\nfull outer join \"db\".\"t2\" \"t2\" on \"t1\".\"id\"=\"t2\".\"id\"\nfull outer join \"db\".\"t3\" \"t3\" on \"t1\".\"id\"=\"t3\".\"id\"\nfull outer join \"db\".\"t4\" \"t4\" on \"t1\".\"curr_name\"=\"t4\".\"curr_id\"\nfull outer join \"db\".\"t5\" \"t5\" on \"t2\".\"cat\"=\"t5\".\"cat\"\n</code></pre>\n\n<p>Here is how it looks now<br>\n<img src=\"http://i48.tinypic.com/23lebye.jpg\" alt=\"exp1\">\n<br></p>\n\n<p>I need to JOIN another table <code>t6</code> it's <code>id</code> = to <code>t1</code>.<code>id</code>, and add field new1, new2</p>\n\n<p>but I want Current,Time,Case,Cause_Type to be null if t6.new1 and new2 has more data.<br>\nexample<br>\n<img src=\"http://i47.tinypic.com/jh4oib.jpg\" alt=\"img2\"></p>\n\n<p>How can I join t6 without having red and strikethrough values repeat?</p>\n"},{"tags":["sql","oracle","query-optimization","subquery","correlated-subquery"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12633002,"title":"Oracle correlated subquery issue","body":"<p>I have the following schema</p>\n\n<pre><code>Invoices\n=================\ninvoice_number\naccount_id\ninvoice_amount\ninvoice_date\nstatus (\"Paid\",\"Not Paid\")\n</code></pre>\n\n<p>I'm trying to write a query to get all invoices with the following information ...</p>\n\n<ul>\n<li>invoice number</li>\n<li>invoice date</li>\n<li>account id</li>\n<li>invoice amount</li>\n<li>amount of last paid invoice for this account id (prior to the invoice date on this line)</li>\n</ul>\n\n<p>I'm having an issue with the last item (amount of last paid invoice). So far I have ...</p>\n\n<pre><code>select \ninv2.invoice_number,\ninv2.invoice_date,\ninv2.account_id,\ninv2.invoice_amount,\n(\nselect * from (\n    select inv.invoice_amount\n      from invoices inv\n      where inv.account_id = inv2.account_id\n      and inv.status = 'PAID'\n      and inv.invoice_date &lt; inv2.invoice_date\n      order by inv.invoice_date desc\n    )\nwhere rownum &lt;=1\n) as last_paid_amount\nfrom\ninvoices inv2\n</code></pre>\n\n<p>I'm trying to refactor this to not use a correlated subquery, as the size of my dataset makes this very costly. How can I refactor to use a non-correlated subquery. Is this even possible?</p>\n\n<p>Thank You</p>\n"},{"tags":["sql","oracle","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12403888,"title":"Query runs fast accorindg to SQL_TRACE yet actual completion time is much longer","body":"<p>I've got a query, by setting timing on in SQL*PLus and autotrace traceonly, found to take 40 seconds to complete.</p>\n\n<p>Yet from the SQL trace file collected, the query takes around 10 seconds to complete.</p>\n\n<pre><code>call     count       cpu    elapsed       disk      query    current        rows\n------- ------  -------- ---------- ---------- ---------- ----------  ----------\nParse        1      0.02       0.02          0          0          0           0\nExecute      1      0.00       0.00          0          0          0           0\nFetch    19537      2.66       6.49         77      61929          0      293035\n------- ------  -------- ---------- ---------- ---------- ----------  ----------\ntotal    19539      2.68       6.52         77      61929          0      293035\n</code></pre>\n\n<p>Machine running SQL*Plus client and database are geographically located in the same center, and on the same local LAN. </p>\n\n<p>Display already suppressed so rendering should not be an issue. \nThe table being accessed, is compressed though.</p>\n\n<p>So where could that 30 seconds goes? Thanks.</p>\n"},{"tags":["regex","performance","oracle","plsql","query-optimization"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":110,"score":3,"question_id":12578269,"title":"I want to optimize a stored procedure that uses IN clause and a regex_str function. I am not sure that how I should optimize it more?","body":"<p>The response time I am getting is around 200ms.\nI want to optimize it more.\nHow can I achieve this?</p>\n\n<pre><code>CREATE OR REPLACE\nPROCEDURE GETSTORES\n(\nLISTOFOFFERIDS IN VARCHAR2,\nREF_OFFERS OUT TYPES.OFFER_RECORD_CURSOR\n)\nAS\nBEGIN\n  OPEN REF_OFFERS FOR\n  SELECT\n  /*+ PARALLEL(STORES 5) PARALLEL(MERCHANTOFFERS 5)*/\n  MOFF.OFFERID,\n  s.STOREID,\n  S.LAT,\n  s.LNG\n  FROM\n  MERCHANTOFFERS MOFF\n  INNER JOIN STORES s ON MOFF.STOREID =S.STOREID\n  WHERE\n  MOFF.OFFERID IN\n  (\n    SELECT\n      REGEXP_SUBSTR(LISTOFOFFERIDS,'[^,]+', 1, LEVEL)\n    FROM\n      DUAL CONNECT BY REGEXP_SUBSTR(LISTOFOFFERIDS, '[^,]+', 1, LEVEL) IS NOT NULL\n  )\n  ;\nEND\nGETSTORES;\n</code></pre>\n\n<p>I am using the regex_substr to get a list of OfferIDs from the comma separated string that comes in LISTOFOFFERIDS.\nI have created the index on STOREID of the Stores table but to no avail.\nA new approach to achieve the same is also fine if its faster.</p>\n\n<p>The types declaration for the same: </p>\n\n<pre><code>create or replace\n\n    PACKAGE TYPES\n    AS\n    TYPE OFFER_RECORD\n    IS\n      RECORD(\n      OFFER_ID MERCHANTOFFERS.OFFERID%TYPE,\n      STORE_ID STORES.STOREID%TYPE,\n      LAT STORES.LAT%TYPE,\n      LNG STORES.LNG%TYPE\n      );\n    TYPE OFFER_RECORD_CURSOR\n    IS\n      REF\n      CURSOR\n        RETURN OFFER_RECORD;\n      END\n      TYPES;\n</code></pre>\n\n<p>The plan for the select reveals following information:</p>\n\n<pre><code>Plan hash value: 1501040938\n\n-------------------------------------------------------------------------------------------------------------\n| Id  | Operation                                  | Name           | Rows  | Bytes | Cost (%CPU)| Time     |\n-------------------------------------------------------------------------------------------------------------\n|   0 | SELECT STATEMENT                           |                |   276 | 67620 |    17  (12)| 00:00:01 |\n|*  1 |  HASH JOIN                                 |                |   276 | 67620 |    17  (12)| 00:00:01 |\n|   2 |   NESTED LOOPS                             |                |       |       |            |          |\n|   3 |    NESTED LOOPS                            |                |   276 | 61272 |     3  (34)| 00:00:01 |\n|   4 |     VIEW                                   | VW_NSO_1       |     1 |   202 |     3  (34)| 00:00:01 |\n|   5 |      HASH UNIQUE                           |                |     1 |       |     3  (34)| 00:00:01 |\n|*  6 |       CONNECT BY WITHOUT FILTERING (UNIQUE)|                |       |       |            |          |\n|   7 |        FAST DUAL                           |                |     1 |       |     2   (0)| 00:00:01 |\n|*  8 |     INDEX RANGE SCAN                       | OFFERID_INDEX  |   276 |       |     0   (0)| 00:00:01 |\n|   9 |    TABLE ACCESS BY INDEX ROWID             | MERCHANTOFFERS |   276 |  5520 |     0   (0)| 00:00:01 |\n|  10 |   TABLE ACCESS FULL                        | STORES         |  9947 |   223K|    13   (0)| 00:00:01 |\n-------------------------------------------------------------------------------------------------------------\n\nPredicate Information (identified by operation id):\n---------------------------------------------------\n\n   1 - access(\"MERCHANTOFFERS\".\"STOREID\"=\"STORES\".\"STOREID\")\n   6 - filter( REGEXP_SUBSTR ('M1-Off2,M2-Off5,M2-Off9,M5-Off4,M10-Off1,M1-Off3,M2-Off4,M3-Off2,M4-Of\n              f6,M5-Off1,M6-Off1,M8-Off1,M7-Off3,M1-Off1,M2-Off1,M3-Off1,M3-Off4,M3-Off5,M3-Off6,M4-Off1,M4-Off7,M2\n              -Off2,M3-Off3,M5-Off2,M7-Off1,M7-Off2,M1-Off7,M2-Off3,M3-Off7,M5-Off5,M4-Off2,M4-Off3,M4-Off5,M8-Off2\n              ,M6-Off2,M1-Off5,M1-Off6,M1-Off9,M1-Off8,M2-Off6,M2-Off7,M4-Off4,M9-Off1,M6-Off4,M1-Off4,M1-Off10,M2-\n              Off8,M3-Off8,M6-Off3,M5-Off3','[^,]+',1,LEVEL) IS NOT NULL)\n   8 - access(\"MERCHANTOFFERS\".\"OFFERID\"=\"$kkqu_col_1\")\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12630266,"title":"Is there a way to restart a cursor? Oracle","body":"<p>I am trying to do something such as:</p>\n\n<pre><code>for(int i = 0; i&lt;10; i++)\n{\n    for(int j = 0; j&lt;10; j++)\n    {\n        Blah;\n    }\n}\n\n//As you can see each time that there is a different i, j starts at 0 again.\n</code></pre>\n\n<p>Using cursors in Oracle. But if I'm correct, after I fetch all rows from a cursor, it will not restart. Is there a way to do this?</p>\n\n<p>Here is my sql: </p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE SSACHDEV.SyncTeleappWithClientinfo\nas\nteleCase NUMBER;\n\nCURSOR TeleAppCursor\nis\n    Select \n        distinct(casenbr)\n    from TeleApp;\n\n\nCURSOR ClientInfoCursor\nis\n    Select casenbr \n    from clientinfo \n    where trim(cashwithappyn) is null;\n\nBEGIN\n\n    open TeleAppCursor;\n    open ClientInfoCursor;\n\n    LOOP\n        fetch TeleAppCursor into teleCase;\n        EXIT when TeleAppCursor%NOTFOUND;\n\n        LOOP\n            fetch ClientInfoCursor into clientCase;\n            EXIT when ClientInfoCursor%NOTFOUND;\n                if clientCase = teleCase then\n\n                    update ClientInfo \n                    set cashwithappyn = (select cashwithappyn from teleapp where casenbr = clientCase) \n                    where casenbr = clientCase;\n\n                    break;\n                end if;\n        END LOOP;\n    END LOOP;\n\nEND;\n</code></pre>\n\n<p>I did check online and was unable to find anything on this.</p>\n"},{"tags":["oracle","insert","external"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":99,"score":-1,"question_id":11766110,"title":"Inserting into a single table from multiple tables which don't have any primary key in Oracle","body":"<p>I should insert into a single table from two different external files which don't have any primary key.</p>\n\n<p>Each external file has different columns. Also, the values should be inserted in alphabetical order. The table in database has a primary key which increments automatically.</p>\n\n<p>Please advise me a way to achieve this.</p>\n\n<hr>\n\n<p>Thanks really for your help...</p>\n\n<p>It's all about inserting into tables which have 1:1 or/and 1:n relationship using external tables...\nEach one has a primary key,which is incremented by sequence. I have already inserted into one of the tables\"budget\" : bu_id,bu_section,etc. </p>\n\n<pre><code>insert into Budget (\nbu_id,\nbu_section\n)\n\nselect dep.ID_seq.nextval, file1.section\nfrom file1\n</code></pre>\n\n<p>and the result would be like:</p>\n\n<pre><code>bu_id   bu_section\n1006     blabla\n1007     blablabla\n</code></pre>\n\n<p>I want to insert into (\"detail\") table which has de_id,de_resource,de_comment from two different external files.\nIn one of them is the resource details and in the other comment.\nThe insert statement should also take the bu_id and de_id relationship into consideration(the de_id also should start from 1006)</p>\n\n<p>@a_horse_with_no_name: There are more than 1800 records in each external file.  So I think it doesn't work when I use ID_seq.nextval in each of the select statements while inserting into the table. </p>\n\n<p>p.s: I'm not allowed to use SQL*loader.</p>\n"},{"tags":["sql","oracle","grant"],"answer_count":3,"favorite_count":4,"up_vote_count":10,"down_vote_count":0,"view_count":35414,"score":10,"question_id":1298473,"title":"How can I list ALL grants a user received?","body":"<p>I need to see all grants on an Oracle DB.</p>\n\n<p>I used the TOAD feature to compare schemas but it does not shows temptable grants etc. so there's my question:</p>\n\n<p>How can I list all grants on a Oracle DB?</p>\n"},{"tags":[".net","vb.net","oracle","date"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12628917,"title":"Issue checking if entry in table already exists by checking zone, date and hour","body":"<p>I have a database with a table in which I store several values along with the zone to which it belongs, the date it is from, and the hour it is from. The table will get updated periodically, from a source that may contain both new and old data I already have, new data will be inserted, old data I already stored will be updated, since it may have changed from the time it was created and I need the newest possible.</p>\n\n<p>I have no problem checking wether the zone and the hour already exists:</p>\n\n<pre><code>sql.CommandText = \"select 'Y' from dual where exists (select * from mytable where hour= \"+hour+\" and zone='\" + zone+ \"')\"\n</code></pre>\n\n<p>But If add the date to the equation it fails when it calls the ExecuteScalar method:</p>\n\n<pre><code>sql.CommandText = \"select 'Y' from dual where exists (select * from mytable where hour = \" + hour + \" and zone = '\" + zone+ \"' and date_field = '\" + datevalue + \"')\"\n</code></pre>\n\n<p>I have tried other methods before but none seemed to work, like doing a Select Count(*) and executing the reader or doing a merge sentence. </p>\n\n<p>Any help is appreciated. I'm working on VB, .NET framework 3.5, and Oracle 10g.</p>\n"},{"tags":["sql","oracle","sysdate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":12629381,"title":"why oracle is inserting \"hh24:mi:ss\" like a date \"dd/mm/yyy\"","body":"<p>I need to run this sql statement:</p>\n\n<pre><code>INSERT INTO JSP_CONTROL (estado,hora_inicio,fecha,tipo) VALUES\n('ACTUALIZANDO',to_char(sysdate, 'HH24:mi:SS'),sysdate,'uno');\n</code></pre>\n\n<p>this is the table:</p>\n\n<pre><code>CREATE TABLE \"GCUENTAS\".\"JSP_CONTROL\"\n(\n\"ESTADO\" VARCHAR2(20 BYTE),\n\"HORA_INICIO\" TIMESTAMP (6),\n\"HORA_TERMINO\" TIMESTAMP (6),\n\"FECHA\" DATE,\n\"TIPO\" VARCHAR2(20 BYTE)\n</code></pre>\n\n<p>The problem is here:  to_char(sysdate, 'HH24:mi:SS'), it's supposed to insert something like \"16:01:35\", but insert \"16/01/35\" (in DD/MM/YY format).</p>\n\n<p>making some test like   </p>\n\n<p>SELECT to_char(sysdate, 'HH24:mi:SS') FROM DUAL </p>\n\n<p>are succesfull</p>\n\n<p>This is the message error:</p>\n\n<pre><code>Error que empieza en la línea 1 del comando:\nINSERT INTO JSP_CONTROL (estado,hora_inicio,fecha,tipo) VALUES\n  ('ACTUALIZANDO',to_char(sysdate, 'HH24:mi:SS'),sysdate,'uno')\nInforme de error:\nError SQL: ORA-01843: mes no válido\n01843. 00000 -  \"not a valid month\"\n*Cause:    \n*Action:\nError que empieza en la línea 1 del comando:\nINSERT INTO JSP_CONTROL (estado,hora_inicio,fecha,tipo) VALUES\n  ('ACTUALIZANDO',to_char(sysdate, 'HH24:mi:SS'),sysdate,'uno')\nInforme de error:\nError SQL: ORA-01843: mes no válido\n01843. 00000 -  \"not a valid month\"\n*Cause:    \n*Action:\n</code></pre>\n"},{"tags":["oracle","stored-procedures","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":10,"view_count":214,"score":-8,"question_id":7364122,"title":"Place to store PL/SQL block","body":"<p>Is the Below question solution correct for where should the PL/SQL be stored.</p>\n\n<p>You want to create a PL/SQL block cof code that calculates discounts on customer orders. - This code will be invoked from several places,but only within the program unit ORDERTOTAL.\nWhat is the most appropriate location to store the code that calculates the discounts?\n    </p>\n\n<pre><code>A. A stored procedure on the server.\nB. A block of code in PL/SQL library.\nC. A standalone procedure on the client machine.\nD. A block of code in the body of the program unit ORDERTOTAL.\nE. A local subprogram defined within the program unit ORDERTOTAL.\n\nANSWER: E\n</code></pre>\n"},{"tags":["sql","oracle","shell","unix","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12627868,"title":"Western European Characterset to Turkish in sql","body":"<p>I am having a serious issue with character encoding. To give some background:</p>\n\n<ol>\n<li>I have turkish business users who enter some data on Unix screens in Turkish language.</li>\n<li>My database NLS parameter is set to <code>AMERICAN</code>, <code>WE8ISO8859P1</code> and Unix <code>NLS_LANG</code>  to <code>AMERICAN_AMERICA.WE8ISO8859P1</code>.</li>\n<li>Turkey business is able to see all the turkish characters on UNIX screens and TOAD while I'm  not. I can only see them in Western European Character set.</li>\n</ol>\n\n<p>At business end: <code>ÖZER İNŞAAT TAAHHÜT VE</code><br>\nAt our end : <code>ÖZER ÝNÞAAT TAAHHÜT VE</code> </p>\n\n<p>If you notice the turkish characters <code>İ</code> and <code>Ş</code> are getting converted to ISO 8859-1 character set. However, all the settings(NLS paramaters in db and unix) are same at both end- <code>ISO8859-1</code>(Western European)</p>\n\n<p>With some study, I can understand - Turkish machines can display turkish data by doing conversion in real-time(DB NLS settings are overridden by local NLS settings).</p>\n\n<p>Now, I have a interface running in my db- have some PL/SQL scripts(run through shell script) that extracts some data from database and spool them to a .csv file on a unix path. Then that .csv file is transferred to an external system via MFT(Managed File transfer).</p>\n\n<p>The problem is- Exract never conains any turkish character. Every turkish character is getting converted into Western European Characterset and goes like this to the external system which is treated as a case of data conversion/loss and my business is really unhappy.</p>\n\n<p>Could anyone tell me - How could I retain all the turkish characters?</p>\n\n<p>P.S. : External System's characterset could be set to ISP8859-9 charcterset.</p>\n\n<p>Many thanks in advance. </p>\n"},{"tags":["database","oracle","function","plsql","oracle10g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12621044,"title":"Function return sys_refcursor","body":"<p>I have a question regarding sys_refcursor.</p>\n\n<p>A sys_refcursor can only be used with a select statement or can this be used like the following. I would like the function to return sys_refcursor. </p>\n\n<p><strong>p_cursor is defined as sys_refcursor</strong></p>\n\n<pre><code>FOR i IN c\n    LOOP\n        IF (p_start_date BETWEEN i.start_date AND i.end_date)\n            OR (p_end_date BETWEEN i.start_date AND i.end_date)\n        THEN\n            p_cursor := i.product_no;\n        END IF;\n    END LOOP;\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12627347,"title":"Oracle SQL - Joining Multiple Queries By the Date","body":"<p>I have this large query below which I joined five queries by the date:</p>\n\n<pre><code>--Combined Daily Actions Per Revenue Source-- \nSELECT Two.the_date, \n       sp_dau, \n       cs_dau, \n       tapjoy_ios_dau, \n       tapjoy_android_dau, \n       appcircle_ios_dau, \n       appcircle_android_dau, \n       freecause_dau, \n       portal_dau \nFROM   (SELECT Trunc(Cs.create_dtime) AS The_Date, \n               Count(DISTINCT CASE \n                                WHEN Cs.cs_listing_id LIKE '99999999%' THEN \n                                ( Cs.player_id ) \n                              END)    AS Sp_Dau, \n               Count(DISTINCT CASE \n                                WHEN Cs.cs_listing_id NOT LIKE '99999999%' THEN \n                                ( Cs.player_id ) \n                              END)    AS Cs_Dau \n        FROM   player_chkin_cs Cs \n        WHERE  Trunc(Cs.create_dtime) &gt;= To_date('2012-Jan-01', 'yyyy-mon-dd') \n        GROUP  BY Trunc(Cs.create_dtime)) One \n       INNER JOIN (SELECT Trunc(Tap.create_dtime) AS The_Date, \n                          Count(DISTINCT CASE \n                                           WHEN ( Play.uuid LIKE 'i~%' ) \n                                                 OR ( Play.uuid LIKE 'ti~%' ) \n                                         THEN \n                                           Tap.player_id \n                                         END)     AS Tapjoy_Ios_Dau, \n                          Count(DISTINCT CASE \n                                           WHEN ( Play.uuid LIKE 'a~%' ) \n                                                 OR ( Play.uuid LIKE 'ta~%' ) \n                                         THEN \n                                           Tap.player_id \n                                         END)     AS Tapjoy_Android_DAU \n                   FROM   player_tapjoy Tap \n                          INNER JOIN player Play \n                                  ON Tap.player_id = Play.player_id \n                   WHERE  Trunc(Tap.create_dtime) &gt;= \n                          To_date('2012-Jan-01', 'yyyy-mon-dd') \n                   GROUP  BY Trunc(Tap.create_dtime)) Two \n               ON One.the_date = Two.the_date \n       INNER JOIN (SELECT Trunc(Aux.create_dtime) AS The_Date, \n                          Count(DISTINCT CASE \n                                           WHEN ( Play.uuid LIKE 'i~%' ) \n                                                 OR ( Play.uuid LIKE 'ti~%' ) \n                                         THEN \n                                           Aux.player_id \n                                         END)     AS Appcircle_Ios_Dau, \n                          Count(DISTINCT CASE \n                                           WHEN ( Play.uuid LIKE 'a~%' ) \n                                                 OR ( Play.uuid LIKE 'ta~%' ) \n                                         THEN \n                                           Aux.player_id \n                                         END)     AS AppCircle_Android_DAU \n                   FROM   player_aux_pt Aux \n                          INNER JOIN player Play \n                                  ON Aux.player_id = Play.player_id \n                   WHERE  Aux.site = 'AppCircle' \n                          AND Trunc(Aux.create_dtime) &gt;= \n                              To_date('2012-Jan-01', 'yyyy-mon-dd') \n                   GROUP  BY Trunc(Aux.create_dtime))Three \n               ON Two.the_date = Three.the_date \n       INNER JOIN (SELECT Trunc(Aux.create_dtime)       AS The_Date, \n                          Count(DISTINCT Aux.player_id) AS FreeCause_DAU \n                   FROM   player_aux_pt Aux \n                   WHERE  Aux.site = 'ext : freecause' \n                          AND Trunc(Aux.create_dtime) &gt;= \n                              To_date('2012-Jan-01', 'yyyy-mon-dd') \n                   GROUP  BY Trunc(Aux.create_dtime))Four \n               ON Three.the_date = Four.the_date \n       INNER JOIN (SELECT Trunc(Aux.create_dtime)       AS The_Date, \n                          Count(DISTINCT Aux.player_id) AS Portal_DAU \n                   FROM   player_aux_pt Aux \n                   WHERE  ( Aux.site = 'Portal : Promotion' \n                             OR Aux.site = 'Portal : RadiumOne' \n                             OR Aux.site = 'Portal : Paymentwall' \n                             OR Aux.site = 'Portal : TrialPay' ) \n                          AND Trunc(Aux.create_dtime) &gt;= \n                              To_date('2012-Jan-01', 'yyyy-mon-dd') \n                   GROUP  BY Trunc(Aux.create_dtime)) Five \n               ON Four.the_date = Five.the_date \n</code></pre>\n\n<p>Most of the subqueries range from <code>2012-Jan-01</code> to present date, except for one that only have data from <code>09-Jul-12</code> to present. </p>\n\n<p>So, when I run this query, the first date in the result is <code>09-Jul-12</code> and not <code>01-Jan-12</code>. </p>\n\n<p>How can I get the results to start at <code>Jan 01</code>, where all but one query has relevant data for?</p>\n"},{"tags":["java","oracle","maven","querydsl"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":12601143,"title":"How can I tell querydsl-maven-plugin to generate NumberPath with Long instead of BigDecimal?","body":"<p>I am using <code>querydsl-maven-plugin</code> in order to export Q paths from an Oracle 11g database. The problem I am facing is that Oracle <code>NUMBER</code> fields are mapped to   <code>NumberPath&lt;java.math.BigDecimal&gt;</code> instead of <code>NumberPath&lt;Long&gt;</code></p>\n\n<p>Is there any way I can instruct <code>querydsl-maven-plugin</code> to translate <code>BigDecimal</code> to <code>Long</code> during code generation?</p>\n\n<p>The approach I am taking right now is to use the plugin to generate the code and then translate types by hand.</p>\n\n<p>Any hints would be appreciated.</p>\n"},{"tags":["sql","oracle","query","database-administration"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":12624795,"title":"Oracle backup information","body":"<p>I am new in oracle . I am using exp &amp; imp utility for backup &amp; restoration of oracle database or schema. Am I using the right utility or something wrong in it. Actually there different developers working on different schema , in my case there are three schema or user working on the same database . I want to schedule backup for this. I am confused regarding backup policy that whether I should use imp &amp; exp utility or something else and why?</p>\n\n<p>which will be an efficient way to do this . Please help me out of it ?</p>\n\n<p>Thanks</p>\n\n<p>Nitesh Kumar</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12624261,"title":"create/declare a sequence in a stored procedure in oracle","body":"<p>I have a table non_employee with emp_no as the primary key and a package with a procedure to insert in to this table.</p>\n\n<p>I need to be able to autoincrement the emp_no when the procedure is run. I tried creating a sequence within the procedure like this, but getting errors. please see below and advice.</p>\n\n<pre><code>CREATE OR REPLACE PACKAGE BODY WFDDEV.\"ERD\" IS\n\ncreate SEQUENCE @seq_emp_nmbr;\n\nPROCEDURE INS_NON_EMPLOYEES\n(\nin_DATE_ADDED        DATE,  \nin_EMPLOYEE_NAME     VARCHAR2,\nin_DEPT_ID           VARCHAR2,\nin_SUB_DEPARTMENT    VARCHAR2,\nin_LOCATION          VARCHAR2,\nin_WORK_TEL_NO       VARCHAR2,\nin_TOUR              VARCHAR2,\nin_REST_DAYS         VARCHAR2,\nin_HOME_ADDRESS      VARCHAR2,\nin_CITY              VARCHAR2,\nin_STATE             VARCHAR2,\nin_ZIP               VARCHAR2,\nin_HOME_TEL_NO       VARCHAR2,\nin_GENDER            VARCHAR2,\nin_RACE              VARCHAR2,\nin_DATE_OF_BIRTH     DATE,\nin_AGE               VARCHAR2,\nin_HIRE_DATE         DATE,\nin_UNION_AFFILIATION VARCHAR2,\nin_TITLE             VARCHAR2,\nin_NON_EE_INDICATOR  VARCHAR2\n) IS\nBEGIN\n\n\n\nINSERT INTO WFDDEV.NON_EMPLOYEES\n  (\n  EMP_NO,\n  DATE_ADDED,\n  EMPLOYEE_NAME,\n  DEPT_ID,\n  SUB_DEPARTMENT,\n  LOCATION,\n  WORK_TEL_NO,\n  TOUR,\n  REST_DAYS,\n  HOME_ADDRESS,\n  CITY,\n  STATE,\n  ZIP,\n  HOME_TEL_NO,\n  GENDER,\n  RACE,\n  DATE_OF_BIRTH,\n  AGE,\n  HIRE_DATE,\n  UNION_AFFILIATION,\n  TITLE,\n  NON_EE_INDICATOR\n  )\nVALUES\n  (\n emp_no.NEXTVAL,\n  in_DATE_ADDED,\n  in_EMPLOYEE_NAME,\n  in_DEPT_ID,\n  in_SUB_DEPARTMENT,\n  in_LOCATION,\n  in_WORK_TEL_NO,\n  in_TOUR,\n  in_REST_DAYS,\n  in_HOME_ADDRESS,\n  in_CITY,\n  in_STATE,\n  in_ZIP,\n  in_HOME_TEL_NO,\n  in_GENDER,\n  in_RACE,\n  in_DATE_OF_BIRTH,\n  in_AGE,\n  in_HIRE_DATE,\n  in_UNION_AFFILIATION,\n  in_TITLE,\n  in_NON_EE_INDICATOR\n  );\nEND;\n</code></pre>\n\n<p>Im getting PLS-00103: Encountered the symbol \"CREATE\" when expecting one of the following:</p>\n\n<p>begin end function pragma procedure subtype type\n    </p>\n\n<p>error with this...</p>\n"},{"tags":["sql","oracle","stored-procedures","ibatis","mybatis"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12624866,"title":"Issue with in line ibatis query","body":"<p>I want to write a ibatis query for the following use case :</p>\n\n<pre><code>select field_id,is_searchable from t_field where field_id in (1,2,3)\n</code></pre>\n\n<p>This will return me HashMap ,for this i have written the below query but its failing</p>\n\n<pre><code>&lt;select id=\"getIsSearchable\" parameterType=\"map\" resultType=\"map\"&gt;\n        select field_id,is_searchable from t_field where field_id in \n        &lt;foreach item=\"long\" index=\"index\" collection=\"parentFieldId\" open=\"(\" separator=\",\" close=\")\"&gt;\n            #{long}\n        &lt;/foreach&gt;\n    &lt;/select&gt;\n</code></pre>\n\n<p>What is wrong here ?</p>\n"},{"tags":["database","oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12620838,"title":"Oracle optimize spliting rows","body":"<p>I have two tables Quantity(user, year, quantity) and MonthlyQuantity(user, year, month, quantity) - the monthly one is empty.\nWhat i need to do is to fill the monthly table based on the yearly one, by dividing the yearly qty in 12 equal parts, and adding any rest to the last month. So basically, each row in Quantity should create 12 rows in QuantityMonthly.\nHere's how i do it - the problem is that the loop is very slow. </p>\n\n<p>How could i do it faster?\nThank you!</p>\n\n<pre><code>    create ro replace \nprocedure pr_test\nAS\nBEGIN\n    FOR r IN (SELECT * FROM Quantity) LOOP\n\n    DELETE FROM QuantityMonthly qm WHERE qm.company = r.company AND qm.year = r.year;\n\n    INSERT ALL\n    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 1, trunc(r.quantity / 12))\n    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 2, trunc(r.quantity / 12))\n    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 3, trunc(r.quantity / 12))\n    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 4, trunc(r.quantity / 12))\n    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 5, trunc(r.quantity / 12))\n    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 6, trunc(r.quantity / 12))\n    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 7, trunc(r.quantity / 12))\n    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 8, trunc(r.quantity / 12))\n    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 9, trunc(r.quantity / 12))\n    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 10, trunc(r.quantity / 12))\n    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 11, trunc(r.quantity / 12))\n    INTO QuantityMonthly (company, year, mon, qty) values (r.company, r.year, 12, trunc(r.quantity / 12) + mod(r.quantity , 12))\n  SELECT * FROM dual;\n\nEND LOOP;\n\nCOMMIT;\n\nEND pr_test;\n</code></pre>\n"},{"tags":["sql","database","oracle","plsql","sum"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12623717,"title":"Summing quantities that are grouped by more than one field","body":"<p>This is a follow on from my previous questions. I just feel that its easier if I explain it all again as I want to try to get more detail out of my query. So here we go:</p>\n\n<p>Sample Table:\n(note: the table has 100's of ID's each with numerous different LOTNO's)</p>\n\n<p>ITEMNO   LOTNO   TRANS_QUAN   TRANS_TYPE</p>\n\n<hr>\n\n<pre><code> 1      45        16          PO  \n 1       3         2          PO  \n 1      45        47          MH  \n 1      45         3          MH\n 1       3         8          MH\n</code></pre>\n\n<p>What I have so far does not take into account the different LotNo's for each ID, rather it sums based on ID and TYPE. The code below sums all Quantity values for TYPE = 'PO' with ID = 1. and then compares them with all summed quantity values for TYPE = 'MANUAL/BACKFLUSH' with ID = 1. This code works perfectly in this regard (big thanks to Nicholas Krasnov with this one):</p>\n\n<pre><code> SELECT * \n FROM (SELECT TR.ITEMNO\n         , ROUND(SUM(TR.TRANS_QUAN * (DECODE(TR.TRANS_TYPE, 'PO', 1, 0)))) AS SUM_IN\n         , ROUND(SUM(TR.TRANS_QUAN * (DECODE(TR.TRANS_TYPE, 'MANUAL/BACKFLUSH', 1,0))))AS SUM_OUT\n     FROM IQMS.TRANSLOG TR\n     GROUP BY IQMS.TR.ITEMNO\n     ORDER BY IQMS.TR.ITEMNO)\n WHERE SUM_OUT &gt; SUM_IN\n</code></pre>\n\n<p>I want to break the sum calculation down further and incorporate the LOTNO field. So in the table above, for ID = 1, I want to sum all values for ID = 1, LotNo = 45 and TYPE = PO and then compare them to ID = 1, LotNo = 45 and TYPE = 'MANUAL\\BACKFLUSH'. </p>\n\n<p>I then want to move on to compare(ID = 1, LOTNO = 3, TYPE = 'PO') with (ID = 1, LOTNO = 3, TYPE ='MANUAL/BACKFLUSH') and so on.</p>\n\n<p>I also only want to return records in which SUM_OUT > SUM_IN</p>\n\n<p>I would hope for my output to be something like</p>\n\n<pre><code>ID      LOTNO     SUM_IN      SUM_OUT    \n\n 1        45        30           50\n 1         3         2            8\n</code></pre>\n\n<p>Any ideas on how i can incorporate this, to give a more specific result set?? Probably something simple like an extra GROUP BY or something?? I hope I have been clear on what I hope to achieve.</p>\n\n<p>Thanks for the continued support guys! :)</p>\n"},{"tags":["oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12623869,"title":"Error inserting date in Oracle","body":"<p>I am trying to run this insert command </p>\n\n<pre><code>INSERT INTO DW_BATCH_HIST   \n(DW_BATCH_HIST.BATCH_NBR, DW_BATCH_HIST.TRANS_START_DATE, DW_BATCH_HIST.BATCH_STATUS) \nVALUES(82,to_date('27-SEPT-2012 11:00:00.000','DD-MON-YYYY hh:mi:ss'), 1)\n</code></pre>\n\n<p>I get this error: </p>\n\n<blockquote>\n  <p>ORA-01841: (full) year must be between -4713 and +9999, and not be 0</p>\n</blockquote>\n\n<p>The year is a valid year, so I don't understand why I am getting this error. What am I missing?</p>\n"},{"tags":["oracle","hash","oracle11g"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":62,"score":0,"question_id":12623215,"title":"Use of hash functions in group by?","body":"<p>I'd use a <code>listagg()</code> to generate a list of components a certain customer has and compare it to another list generated the same way somewhere else to detect inconsistencies. The problem is that sometimes a customer can have too many components and exceed the maximum output of <code>listagg()</code>. I was wondering if there could be a way to generate a hash from a group of ordered rows, in a way I could use to make the same validation. Sort of:</p>\n\n<pre><code>with my_tabe as\n(\n    select 'user1' as usrid, '1' as prodcode from dual union\n    select 'user1' as usrid, '2' as prodcode from dual union\n    select 'user1' as usrid, '3' as prodcode from dual union\n    select 'user2' as usrid, '2' as prodcode from dual union\n    select 'user2' as usrid, '3' as prodcode from dual union\n    select 'user2' as usrid, '4' as prodcode from dual\n)\nselect\n    userid,\n    ORA_HASH(prodcode) WITHIN GROUP (ORDER BY prodcode)\nfrom\n    my_table\ngroup by userid\n</code></pre>\n\n<p>Is there any function that could be used to that end?</p>\n"},{"tags":["c++","sql","oracle","odbc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12622825,"title":"ODBC SQLParamData return data","body":"<p>I am trying to insert o blob in  a database. I have succeed to enter data i two columns.</p>\n\n<p>I am having problem whit SQLParamData .It returns an error when it should return SQL_NEED_DATA(i will post code)</p>\n\n<p>When i run SQLGetDiagRec it returns S1010 with error text Function sequence error .\nI search this error on the internet and i learned that it could be related to a parameter from SQLBindParameter .</p>\n\n<pre><code>// Bind the parameter marker.\n    retCode = retcode = SQLBindParameter(hstmt,  // hstmt\n         1,                     // ipar\n         SQL_PARAM_INPUT,            // fParamType\n         SQL_C_BINARY,               // fCType\n         SQL_LONGVARBINARY,           // FSqlType\n         lbytes,                  // cbColDef\n         0,                     // ibScale\n         &amp;pParmID,       // rgbValue\n         0,                     // cbValueMax\n         &amp;cbTextSize);            // pcbValue\n\n    SqlError(hstmt,SQL_HANDLE_STMT,_T(\"WriteBlob\"), _T(\"CTLSqlConnection\"), _T(\"SQLBindParameter\"));\n    if(retCode != SQL_SUCCESS)\n    {\n        delete pData;\n\n        if(!EndTransaction(FALSE))\n            return ERR_ENDTRANSACTION_FAILED;\n        else\n            return -3;\n    }\n\n    //SQLExec\n    retcode = retCode = SQLExecDirect(hstmt,(SQLTCHAR*)szSqlStat, SQL_NTS);\n\n        SQLRETURN ret;\n        SQLCHAR* SQLState;\n        SQLINTEGER NativeError;\n        SQLSMALLINT errmsglen;\n        SQLCHAR errmsg[255];\n        SQLCHAR errstate[50];\n\n\n\n    retCode = SQLParamData(hstmt, &amp;pParmID);\n\nSQLGetDiagRec(SQL_HANDLE_STMT, hstmt, 1, (SQLCHAR*)errstate, &amp;NativeError, (SQLCHAR*)errmsg, sizeof(errmsg), &amp;errmsglen);\n    if(retCode == SQL_NEED_DATA)\n    {\n        // Put final batch.\n        SQLPutData(hstmt, pData, lbytes); \n    }\n    else\n    {\n        delete pData;\n</code></pre>\n\n<p>If this part of the code is not relevant enough i will post more.</p>\n\n<p>Hope you can help me .Thanks .</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":398,"score":0,"question_id":12595470,"title":"ora-12560 :TNS: protocol adapter error after installing ODP.NET","body":"<p>I have installed Oracle Database 11.2.0.1 Win64 and also Client 11.2.0.1 Win64 in my windows 7 Ultimate and I was able to access Oracle database using Sql*plus \nusing <code>sqlplus / as sysdba</code>. After that I installed ODP.NET <code>ODTwithODAC1120320_32bit</code> to work with Oracle using C# in Visual Studio 2010. When i tried to add connection to Oracle database using ODP it pops out <code>ora-12560 :TNS: protocol adapter error</code> and even during logging to Oracle using <code>SqlPlus / as sysdba</code>.</p>\n\n<p>I have read several articles that say stopped service will cause but mine is running.</p>\n\n<p>What could be the problem???</p>\n"},{"tags":[".net","vb.net","oracle","sms","sms-gateway"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":12620617,"title":"sending text sms from oracle","body":"<p>I have an GSM Modem And I want to attach it with pc and want to send text msges from oracle database to user mobile phone.Please any one tell me is there any authentic way to send sms from oracle db to user mobiles.I want make my own gate way for this type of requirments using .net plateform like vb.net or c# please any one tell me to how can send sms from oracle by using vb.net as front end developmetn and oracle db as back end</p>\n"},{"tags":["oracle","servlets","connections"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12618430,"title":"How to connect to oracle from a java servlet?","body":"<p>I have a problem connecting to oracle from within a java servlet running in Jetty (as part of Eclipse). The identical code runs fine from a standalone java app. </p>\n\n<p>My entire development environment is on a single mac. I am using Eclipse and have included the ojdbc6.jar in the main 'Referenced Libraries' and have also dragged and dropped this file in the war/web-inf/lib folder.</p>\n\n<p>As soon as the line</p>\n\n<blockquote>\n  <p>OracleConnectionPoolDataSource ocpds = new\n  OracleConnectionPoolDataSource();</p>\n</blockquote>\n\n<p>is called (within the servlet) I get the exception:</p>\n\n<blockquote>\n  <p>java.security.AccessControlException: access denied\n  (javax.management.MBeanServerPermission createMBeanServer)</p>\n</blockquote>\n\n<p>Am I missing some security policy or so? If so, exactly what do I do need to do to rectify this? And where does this BeanServer come in?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["oracle","join","cartesian"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12607693,"title":"Join unrelated tables by prompting for related value","body":"<p>I have two unrelated tables, Activity and Schedules, in an oracle database using Business Objects to query.  I can pair up any activity with any schedule but I want it to be prompted in the query.  The tables are as follows:</p>\n\n<pre><code>Activity_Name\n  Bodyweights\n  Dosing\n  Health Check\n\nSchedule\n  Twice A Day\n  Daily\n  Weekly\n</code></pre>\n\n<p>And I'd like to be able to run a query with a prompt that for each activity prompts for a schedule.  I'd end up with this as one possibility:</p>\n\n<pre><code>Activity Schedule\n     Activity        Schedule\n     --------        --------\n     Bodyweights     Weekly\n     Dosing          Twice A Day\n     Health Check    Twice A Day\n</code></pre>\n\n<p>The activity list would be one query with a prompt for available activities.  I'd use those results in the Where clause of the second one and prompt for each schedule.</p>\n"},{"tags":["database","oracle","query"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12620605,"title":"Oracle WHERE clause performance","body":"<p>I have a statement similar to ; </p>\n\n<pre><code>SELECT tableA A, tableB B, tableC C\nWHERE a.ID = b.ID and \nC.level = '2'\n</code></pre>\n\n<p>If i perform </p>\n\n<pre><code>SELECT tableA A, tableB B, tableC C\nWHERE a.ID = b.ID and \n</code></pre>\n\n<p>My results are returned in 33 seconds. If i perform the original query the results are returned in 150 seconds. Why does <code>C.level = '2'</code> make it slower?</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12620216,"title":"TNS:protocol adapter error on Oracle","body":"<p>I'm banging my head against a wall as I write this because, really, I've lost all this day with this.</p>\n\n<p>I'm receiving the famous error <code>ORA-12560: TNS:protocol adapter error</code> when trying to connect through SQLPlus to the Oracle Server.</p>\n\n<p>I have a Microsoft 2008 Server that acts as a client for the Oracle server (which is Linux). The service is started in Linux and I've tried <code>lsnrctl service</code> in Linux. </p>\n\n<p>The <code>ORACLE_SID</code> var is stablished and I don't know what to do next...</p>\n\n<p>It seems that sqlplus is not able to get the tnsnames.ora</p>\n\n<p>If I try <code>sqlplus USER@SID</code> it works flawlessly</p>\n\n<p>Any hints please?</p>\n"},{"tags":["sql","oracle","optimization"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12614408,"title":"SQL optimization distinct","body":"<p>Suppose I have an SQL query using Oracle SQo Server to get the data from the database \nas below</p>\n\n<pre><code>select  distinct ORDER_TYPE_name as ORDER_TYPE from \nPRODUCT_MASTER_LIST where PROJECT_ID = 99999\norder by  ORDER_TYPE ASC \n</code></pre>\n\n<p>I now have 5000 records with the following order Types:</p>\n\n<pre><code>Red\nYellow\nGreen\nBlack \nnull\nUnclassified\n</code></pre>\n\n<p>How to optimise the performance by shortening the query execution time?</p>\n\n<p>Note When I see the execution plan, there are many full access through the table?</p>\n"},{"tags":["sql","oracle","oracle10g","report"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1491,"score":2,"question_id":385656,"title":"Getting Hourly statistics using SQL","body":"<p>We have a table, name <em>'employeeReg'</em> with fields</p>\n\n<pre><code>employeeNo | employeeName | Registered_on\n</code></pre>\n\n<p>Here *Registered_on* is a timestamp.</p>\n\n<p>We require an hourly pattern of registrations, over a period of days. eg.</p>\n\n<blockquote>\n  <p>01 Jan 08 : 12 - 01 PM : 1592 registrations</p>\n  \n  <p>01 Jan 08 : 01 - 02 PM : 1020 registrations</p>\n</blockquote>\n\n<p>Can someone please suggest a query for this.</p>\n\n<p><hr /></p>\n\n<p>We are using Oracle 10gR2 as our DB server.</p>\n"},{"tags":["c++","sql","oracle","query","odbc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12617550,"title":"Empty blob insert query in ODBC c ++ (oracle)","body":"<p>I need to insert a blob in o oracle database. I am using c++ and ODBC library.\nI am stucked at the insert query and update query .It is abstract for me how to make an blob insert query.\nI know how to make an query for a non blob column.\nMy table structure is :</p>\n\n<pre><code>REATE TABLE t_testblob (\n     filename VARCHAR2(30) DEFAULT NULL NULL,\n     apkdata  BLOB         NULL\n)\n</code></pre>\n\n<p>I found an exemple on insert and update :</p>\n\n<pre><code> INSERT INTO table_name VALUES (memberlist,?,memberlist)\n UPDATE table_name SET ImageFieldName = ? WHERE ID=yourId\n</code></pre>\n\n<p>But these structure of querys or abstract to me . What should memberlist be ? why is there \"?\" where are the values to be inserted ? </p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12604698,"title":"Simple Oracle query","body":"<pre><code>select issueno, * from SOMETABLE;\n</code></pre>\n\n<p>This kind of query would work perfectly in MS-SQL, but does not work in Oracle. The error message:</p>\n\n<blockquote>\n  <p>ORA-00936: missing expression\n  00936. 00000 -  \"missing expression\"\n  *Cause:<br>\n  *Action: Error at Line: 1 Column: 16</p>\n</blockquote>\n\n<p>What is wrong?</p>\n"},{"tags":["sql","oracle","oracle9i"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":90,"score":0,"question_id":12615531,"title":"if else in where clause on Oracle","body":"<p>I need a query but I have a criteria depends on situation. As an example :</p>\n\n<p>Lets have a table named table1 that has column named column1 and\n                        table2 that has column named column2</p>\n\n<p>In the query in where clause, I need to join this table1 with table2 by column1 and column2 columns. But, I need to do like </p>\n\n<pre><code>if \n     column1 = 'x' then my criteria must be column1 = column2\nelse\n     column1 != 'x'\n</code></pre>\n\n<p>How I can write this where clause in Oracle?</p>\n\n<p>Thank you for your answer.</p>\n"},{"tags":["sql","oracle","mybatis"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12598531,"title":"Issue with mybatis query","body":"<p>I have a mybatis query which should return me a list data ,the query gives me the size has 5 when directly used in oracle browser but in the application its giving me size has zero,please let me know if anything is wrong here.</p>\n\n<pre><code>public interface IFormValidatorMapper {\n\n    List&lt;Long&gt; getIsSearchable(@Param(\"parentFieldId\") long parentFieldId);\n\n}\n</code></pre>\n\n<p>the implementation is</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\nPUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.ge.dbt.common.persistence.IFormValidatorMapper\"&gt;\n\n        &lt;select id=\"getIsSearchable\" statementType=\"CALLABLE\"\n        resultType=\"Long\"&gt;\n        select is_searchable from t_field where parent_field_id=#{parentFieldId}\n    &lt;/select&gt;\n\n&lt;/mapper&gt;\n</code></pre>\n"},{"tags":["oracle","listener","aix"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":120,"score":0,"question_id":12612456,"title":"Oracle 11gR2 on Aix listner will not start","body":"<p>I have created a new Oracle instance on the Aix server.  Database is running fine, but my listener would not start.  I got the following errors in the listener log:</p>\n\n<pre><code>&lt;msg time='2012-09-26T17:33:17.304-07:00' org_id='oracle' comp_id='tnslsnr'\n type='UNKNOWN' level='16' host_id='xxxxx111'\n host_addr='000.00.0.111'&gt;\n &lt;txt&gt;TNS-12546: TNS:permission denied\n TNS-12560: TNS:protocol adapter error\n  TNS-00516: Permission denied\n   IBM/AIX RISC System/6000 Error: 2: No such file or directory\n &lt;/txt&gt;\n&lt;/msg&gt;\n</code></pre>\n\n<p>When I tried to start the listener, i got the following error:</p>\n\n<pre><code>lsnrctl start\n\nLSNRCTL for IBM/AIX RISC System/6000: Version 11.2.0.3.0 - Production on 26-SEP-2012 17:38:17\n\nCopyright (c) 1991, 2011, Oracle.  All rights reserved.\n\nStarting /oracle/QI1/112_64/bin/tnslsnr: please wait...\n\nTNSLSNR for IBM/AIX RISC System/6000: Version 11.2.0.3.0 - Production\nSystem parameter file is /oracle/QI1/112_64/network/admin/listener.ora\nLog messages written to /oracle/QI1/saptrace/diag/tnslsnr/xxxxxx/listener/alert/log.xml\nError listening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=xxxxxxx.na.xxxxx.com)(PORT=1521)))\nTNS-12542: TNS:address already in use\n TNS-12560: TNS:protocol adapter error\n  TNS-00512: Address already in use\n   IBM/AIX RISC System/6000 Error: 67: Address already in use\n\nListener failed to start. See the error message(s) above...\n</code></pre>\n\n<p>Any help would be greatly appreciated!</p>\n"},{"tags":["oracle","toad"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":12615595,"title":"Execute Oracle procedure in TOAD","body":"<p>I am writing an Oracle procedure using TOAD. I executed the procedure using execute statement. But I am not able to get the result. Instead of that am getting error only. Please help how to run the procedure in TOAD. I am new to toad and Oracle.</p>\n\n<p>Procedure in oracle</p>\n\n<pre><code>create or replace procedure pro_dndtesting( phone number)is \nbegin\nselect  FLD_PHONENUMBERS from smsdnd_tbl where FLD_PHONENUMBERS=phone;\nend ;\n/\n</code></pre>\n\n<p>Executing procedure as follows</p>\n\n<pre><code>exec procedure pro_dndtesting(9865015695)\n\nerror\n\nORA-06550: line 1, column 7:\nPLS-00201: identifier 'PRO_DNDTESTING' must be declared\nORA-06550: line 1, column 7:\nPL/SQL: Statement ignored\n</code></pre>\n"},{"tags":["oracle","sqlplus"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1760,"score":4,"question_id":2811968,"title":"Set \"Start With\" value for Oracle sequence dynamically","body":"<p>I'm trying to create a release script that can be deployed on multiple databases, but where the data can be merged back together at a later date.  The obvious way to handle this is to set the sequence numbers for production data sufficiently high in subsequent deployments to prevent collisions.</p>\n\n<p>The problem is in coming up with a release script that will accept the environment number and set the \"Start With\" value of the sequences appropriately.  Ideally, I'd like to use something like this:</p>\n\n<pre><code>ACCEPT EnvironNum PROMPT 'Enter the Environment Number:  '\n--[more scripting]\nCREATE SEQUENCE seq1 START WITH &amp;EnvironNum*100000;\n--[more scripting]\n</code></pre>\n\n<p>This doesn't work because you can't evaluate a numeric expression in DDL.</p>\n\n<p>Another option is to create the sequences using dynamic SQL via PL/SQL.</p>\n\n<pre><code>ACCEPT EnvironNum PROMPT 'Enter the Environment Number:  '\n--[more scripting]\nEXEC execute immediate 'CREATE SEQUENCE seq1 START WITH ' || &amp;EnvironNum*100000;\n--[more scripting]\n</code></pre>\n\n<p>However, I'd prefer to avoid this solution as I generally try to avoid issuing DDL in PL/SQL.</p>\n\n<p>Finally, the third option I've come up with is simply to accept the Start With value as a substitution variable, instead of the environment number.</p>\n\n<p>Does anyone have a better thought on how to go about this?</p>\n"},{"tags":["oracle","dbms"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":12614955,"title":"To execute dbms_utility.exec_ddl_statement dynamically","body":"<p>The requirement is as follows: </p>\n\n<p>Through an Oracle Apex application I need to drop a user/schema in another Oracle database. i.e., drop user remotely using an Oracle Apex application. </p>\n\n<p>Currently, I am using the below procedure for this task. But, as there are many remote databases, so, I would like to know is there a way to make this dynamic, i.e., to pass the DB link name to <code>DBMS_UTILITY.EXEC_DDL_STATEMENT</code> dynamically. So, that the user will pass the user name and the database name and based on the database name the procedure will connect to the correct database/DB link and drop the given user. Please let me know if there is any other way to accomplish this task. </p>\n\n<pre><code>CREATE OR REPLACE \n    PROCEDURE drop_user_proc( \n    p_username VARCHAR2, \n    p_databasename VARCHAR2) \nIS \n    ddl_stmt VARCHAR2(100); \nBEGIN \n    IF p_databasename = ‘REMOTEDB1’ THEN \n        ddl_stmt := 'DROP USER '||p_username||' CASCADE'; \n        dbms_utility.exec_ddl_statement@remotedb1(ddl_stmt); \nEND IF; \nEND drop_user_proc; \n</code></pre>\n"},{"tags":["python","database","oracle","cx-oracle","dbapi"],"answer_count":4,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":1322,"score":6,"question_id":2374079,"title":"Set database connection timeout in Python","body":"<p>I'm creating a RESTful API which needs to access the database.  I'm using Restish, Oracle, and SQLAlchemy.  However, I'll try to frame my question as generically as possible, without taking Restish or other web APIs into account.</p>\n\n<p>I would like to be able to set a timeout for a connection executing a query.  This is to ensure that long running queries are abandoned, and the connection discarded (or recycled).  This query timeout can be a global value, meaning, I don't need to change it per query or connection creation.</p>\n\n<p>Given the following code:</p>\n\n<pre><code>import cx_Oracle\nimport sqlalchemy.pool as pool\n\nconn_pool = pool.manage(cx_Oracle)\nconn = conn_pool.connect(\"username/p4ss@dbname\")\nconn.ping()\n\ntry:\n    cursor = conn.cursor()\n    cursor.execute(\"SELECT * FROM really_slow_query\")\n    print cursor.fetchone()\nfinally:\n    cursor.close()\n</code></pre>\n\n<p>How can I modify the above code to set a query timeout on it?\nWill this timeout also apply to connection creation?</p>\n\n<p>This is similar to what java.sql.Statement's setQueryTimeout(int seconds) method does in Java.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":33,"score":-3,"question_id":12614066,"title":"How to retrieve the results of PLSQL procedure to java class","body":"<p>How can we retrieve the results of pl sql procedure to java class and maniupulate inside java ?</p>\n"},{"tags":["database","oracle","storage","oracle9i"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":11,"score":1,"question_id":12603519,"title":"Fully Automated Storage Tiering Oracle 9i","body":"<p>I have a question regarding Oracle 9i storage organization of files. \nDo you think redo files should be on fastest disks or not? What about fully automated storage tiering for Virtual Pools?</p>\n\n<p>Regards,\nMilica</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":80,"score":-1,"question_id":12601198,"title":"Order by multiple columns with different types in Oracle?","body":"<p>I'm a newbie with Oracle. In SQLite, PostgreSQL or MSSQL I can do the following query:</p>\n\n<pre><code>SELECT * FROM users ORDER BY id, email\n</code></pre>\n\n<p>Here is the definition of USERS:</p>\n\n<pre><code>CREATE TABLE \"USERS\" (\n \"ID\" NUMBER(38,0) NOT NULL,\n \"EMAIL\" VARCHAR2(255)\n)\n</code></pre>\n\n<p>Id is NUMBER type and email is VARCHAR type.</p>\n\n<p>When I run the above SELECT query in Oracle it will raise the error:</p>\n\n<pre><code>ORA-00932: inconsistent datatypes: expected - got CLOB\n</code></pre>\n\n<p>Is there anyway to do that in Oracle?</p>\n\n<p>Thank for your interest.</p>\n"},{"tags":["sql","oracle","optimization","plsql","query-optimization"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":231,"score":2,"question_id":3225292,"title":"How can I Optimize this Query Taking 30 Seconds for 1746 Rows?","body":"<p>Query:</p>\n\n<pre><code>SELECT A.USER_ID, A.ROLE_ID, C.SUBGROUP, MAX(A.STATUS_ID)\n                 FROM USER_ROLE A, USER B, ROLE C\n                WHERE A.ROLE_ID = C.ROLE_ID\n                  AND C.GROUP_ID = 3\n                  AND A.USER_ID = B.USER_ID\n                  AND B.TEMPLATE_IND = 'N'\n                  AND B.ONAP_PARTCODE IS NULL\n                  AND A.PARTCODE ='005'\n                GROUP BY A.PARTCODE,\n                         A.USER_ID,\n                         A.ROLE_ID,\n                         C.SUBGROUP;\n</code></pre>\n\n<p>Explain plan:</p>\n\n<pre><code>--------------------------------------------------------------------------------\n| Id  | Operation                      | Name               | Rows  | Bytes | Co\n--------------------------------------------------------------------------------\n|   0 | SELECT STATEMENT               |                    |     1 |    74 |\n|   1 |  HASH GROUP BY                 |                    |     1 |    74 |\n|   2 |   NESTED LOOPS                 |                    |     1 |    74 |\n|   3 |    NESTED LOOPS                |                    |    56 |  3024 |\n|   4 |     TABLE ACCESS BY INDEX ROWID| ROLE               |     8 |   240 |\n|*  5 |      INDEX RANGE SCAN          | N_ROLE_IDX2        |     8 |       |\n|   6 |     TABLE ACCESS BY INDEX ROWID| USER_ROLE          |     7 |   168 |\n|*  7 |      INDEX RANGE SCAN          | N_USER_ROLE_IDX6   |     7 |       |\n|   8 |    REMOTE                      | MV_PT_USER         |     1 |    20 |\n--------------------------------------------------------------------------------\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12613354,"title":"Oracle SQL - I want to combine multiple queries and group by the date, but the dates are pulling from different sources.","body":"<p>I am trying to combine 5 queries into one query so that I do not have to run multiple queries every time I want to update the report. Each of the 5 reports is formatted so the result looks like:</p>\n\n<pre><code>    The_Date      Sp_DAU    CS_Dau\n   01-Jan-12       3423      3674\n   02-Jan-12       1823      2547\n</code></pre>\n\n<p>and so on....(different columns for each, EXCEPT The_Date stays the same)</p>\n\n<p>The problem is, The_Date comes from multiple tables so I don't know how to combine all the querys so the result looks like:</p>\n\n<pre><code>    The_Date       Sp_Dau     Cs_Dau  TapJoy_Ios_Dau  TapJoy_Android_DAU Portal_DAU\n    01-Jan-12       1823      2547       35                  1115           33\n    02-Jan-12       2453      3000       47                  1478           30\n</code></pre>\n\n<p>Does this make sense? Would it help if I posted all of the queries or is that too much information?</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":12612467,"title":"Oracle SQL - Add a column with data not included in any table","body":"<p>I have this query:</p>\n\n<pre><code>Select\nTrunc(Red.Fulfilled_Dtime),\nP.Email,\n(Red.Points_Deducted *.003)*(1/1.02) As Redeem_Amt,\nRed.Player_Id,\nRed.Prize_Id, \nRed.Points_Deducted\nFrom Redemption_Log Red\nInner Join Player P On Red.Player_Id=P.Player_Id\nWhere Red.Prize_Id In (8907,8906,8905,8904,8903,8902,8901)\n</code></pre>\n\n<p>I want to add a column to my result called \"Currency\" in which every row in my results has the output \"USD\". Is this possible?</p>\n"},{"tags":["performance","oracle","packages"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":12596126,"title":"Temporary tables in Packages - Oracle","body":"<p>I am kind of new in Oracle.\nI am trying to create a package that has several functions.\nThis is the pseudocode of what I want to do</p>\n\n<pre><code>function FunctionA(UserID, startdate, enddate)\n  /* Select TransactionDate, Amount\n     from TableA\n     where TransactionDate between startdate and enddate\n     and TableA.UserID = UserID */\n  Return TransactionDate, Amount\nend FunctionA\n\nfunction FunctionB(UserID, startdate, enddate)\n  /* Select TransactionDate, Amount\n     from TableB\n     where TransactionDate between startdate and enddate\n     and TableB.UserID = UserID */\n  Return TransactionDate, Amount\nend FunctionA\n\nTYPE TRANSACTION_REC IS RECORD(\n          TransactionDate    DATE,\n          TransactionAmt     NUMBER);\n\nfunction MainFunction(startdate, enddate)\n  return TBL\n  is\n  vTrans TRANSACTION_REC;\nbegin\n  FOR rec IN\n    ( Select UserID, UserName, UserStatus\n      from UserTable\n      where EntryDate between startdate and enddate )\n  LOOP\n    vTrans := FunctionA(rec.UserID, startdate, enddate)\n\n    if vTrans.TransactionDate is null then\n       vTrans := FunctionB(rec.UserID, startdate, enddate)\n\n       if vTrans.TransactionDate is null then\n           rec.UserStatus := 'Inactive'\n       endif;\n    endif;\n  END Loop;\n\n  PIPE ROW(USER_OBJ_TYPE(rec.UserID,\n                       rec.UserName,\n                       rec.UserStatus,\n                       vTrans.TransactionDate,\n                       vTtans.TransactionAmt));\nend MainFunction\n</code></pre>\n\n<p>Running this kind of code takes a long time because TableA and TableB is a very large table, and I am only getting 1 entry per record from the tables.</p>\n\n<p>I would want to create a temporary table (TempTableA, TempTableB) within the package that will temporarily store all records based on the startdate and enddate, so that when I try to retrieve the TransactionDate and Amount for each rec, I will only refer to the TempTables (which is smaller than TableA and TableB).</p>\n\n<p>I also want to take into consideration if the UserID is not found in TableA and TableB. So basically, when there are no records found in TableA and TableB, I also want the entry in the output, but it is indicated that the user is inactive.</p>\n\n<p>Thank you for all your help.</p>\n"},{"tags":["java","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12612116,"title":"Stored Procedure does not return any result","body":"<p>I am passing a collection of Array to a Stored procedure.Below is the code for Stored procedure.</p>\n\n<pre><code>CREATE OR REPLACE PROCEDURE R5_QA_126.GIVE_ME_AN_ARRAY( p_list  in TEST_LIST, p_recordset OUT SYS_REFCURSOR)\nAS\nBEGIN\nDBMS_OUTPUT.ENABLE(100);\nDBMS_OUTPUT.PUT_LINE('Hi reached before begin');\n OPEN p_recordset FOR\n  SELECT words, count\n  FROM documents_token\n  where words in (select word from table(p_list));\n    EXCEPTION\n     WHEN NO_DATA_FOUND THEN\n       NULL;\n     WHEN OTHERS THEN\n       -- Consider logging the error and then re-raise\n       RAISE;\nEND GIVE_ME_AN_ARRAY;\n/\n</code></pre>\n\n<p>I have a type declared as below.</p>\n\n<pre><code>CREATE OR REPLACE TYPE TESTREC AS OBJECT\n(\n  word VARCHAR2(500)\n)\n/\n</code></pre>\n\n<p>and table declared as below.</p>\n\n<pre><code>CREATE OR REPLACE TYPE TEST_LIST\nAS TABLE OF TESTREC\n/\n</code></pre>\n\n<p>I am having issue when i try to make a call to Stored procedure.\nps.execute(); from my java code. \nIt does not return any result.</p>\n\n<p>Below is what i am setting for the call to array.</p>\n\n<pre><code>OracleCallableStatement ps = (OracleCallableStatement) conn\n                    .prepareCall(\"{call GIVE_ME_AN_ARRAY(?,?)}\");\n            ps.setARRAY(1, array_to_pass);\n            ps.registerOutParameter(2, OracleTypes.CURSOR);\n</code></pre>\n\n<p>Please let me know whats wrong i am doing here.\nAlso i am setting ArrayDescriptor and StructDescriptor properly</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12610997,"title":"How can I modify this statement in SQL?","body":"<p>How can I modify the following statement to remove the hard-coded values $1.00 and $2.00 from the code and place them in a table of constants?</p>\n\n<p>The table <code>sec0306_price_constants</code> is already set up. The <code>min_price</code> field contains 1.00 and the <code>max_price</code> field contains 2.00.</p>\n\n<pre><code>  SELECT description\n    FROM l_foods\n   WHERE price BETWEEN 1.00 AND 2.00\nORDER BY description\n</code></pre>\n\n<p>Can you explain to me the approach to doing so? </p>\n\n<p>This is for Oracle.</p>\n"},{"tags":["oracle","plsql","temporary-tables"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":8194,"score":1,"question_id":3280610,"title":"ORA-14551: cannot perform a DML operation inside a query","body":"<p>I have the following inside a <code>package</code> and it is giving me an error: </p>\n\n<pre><code>ORA-14551: cannot perform a DML operation inside a query\n</code></pre>\n\n<p>Code is:</p>\n\n<pre><code>DECLARE \n    CURSOR F IS\n        SELECT ROLE_ID \n        FROM ROLE \n        WHERE GROUP = 3 \n        ORDER BY GROUP ASC;\n\nBEGIN\nFOR R IN F LOOP\n\nDELETE FROM my_gtt_1;\nCOMMIT;\n\n INSERT INTO my_gtt_1\n  ( USER, role, code, status )\n(SELECT \n trim(r.user), r.role, r.code, MAX(status_id)\nFROM \n  table1 r, \n  tabl2 c\nWHERE \n      r.role = R.role\n  AND r.code IS NOT NULL\n  AND c.group = 3\n  GROUP BY \n  r.user, r.role, r.code);\n\n  SELECT c.role,\n                  c.subgroup,\n                  c.subgroup_desc,\n                  v_meb_cnt\n                  INTO record_type\n           FROM   ROLE c\n           WHERE c.group = '3' and R.role = '19'\n           GROUP BY c.role,c.subgroup,c.subgroup_desc;\n\n  PIPE ROW (record_type);\n\n\n\nEND LOOP;\n\nEND;\n</code></pre>\n\n<p>I call the package like this in one of my procedures...:</p>\n\n<pre><code>OPEN cv_1 for SELECT * FROM TABLE(my_package.my_func);\n</code></pre>\n\n<p>how can I avoid this <code>ORA-14551</code> error?</p>\n\n<p>FYI I have not pasted the entire code inside the loop. Basically inside the loop I am entering stuff in GTT, deleting stuff from GTT and then selecting stuff from GTT and appending it to a cursor. </p>\n"},{"tags":["mysql","sql","sql-server","database","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":102,"score":2,"question_id":12529130,"title":"Generic SQL for update / insert","body":"<p>I'm writing a DB layer which talks to MS SQL Server, MySQL &amp; Oracle. I need an operation which can update an existing row if it contains certain data, otherwise insert a new row; All in one SQL operation.</p>\n\n<p>Essentially I need to save over existing data if it exists, or add it if it doesn't</p>\n\n<p>Conceptually this is the same as upsert except it only needs to work on a single table. I'm trying to make sure I don't need to delete then insert as this has a performance impact.</p>\n\n<p>Is there generic SQL to do this or do I need vendor specific solutions?</p>\n\n<p>Thanks.</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12606008,"title":"Oracle Analytics Function","body":"<p>I have an input dataset that looks like this:</p>\n\n<pre><code>header1,null,null,null\nnull,1,X,Y,Z\nnull,2,X,Y,Z\nnull,3,X,Y,Z\nheader2,null,null,null\nnull,4,X,Y,Z\nnull,5,X,Y,Z\nnull,6,X,Y,Z\n</code></pre>\n\n<p>I'd like to write a query against that input to return a result set that looks like this:</p>\n\n<pre><code>header1,1,X,Y,Z\nheader1,2,X,Y,Z\nheader1,3,X,Y,Z\nheader2,4,X,Y,Z\nheader2,5,X,Y,Z\nheader2,6,X,Y,Z\n</code></pre>\n\n<p>I'm on Oracle 11g R2.  I've been looking at the Oracle analytics intro found here:\n<a href=\"http://www.oracle-base.com/articles/misc/analytic-functions.php\" rel=\"nofollow\">http://www.oracle-base.com/articles/misc/analytic-functions.php</a></p>\n\n<p>I'm thinking there is a solution but I've not found it.  The problem I think is that I have nothing to really group by.  My only 'indicator' is to repeat the header value until I hit a set of nulls, then grab the next header and repeat it until I hit some nulls.  So order is important, but you can see we have no column to order by.</p>\n\n<p>Below are a couple quick scripts to build the test table and insert the rows.</p>\n\n<p>Thanks you.</p>\n\n<pre><code>create table test (\ncol01 varchar2(10),\ncol02 varchar2(10),\ncol03 varchar2(10),\ncol04 varchar2(10))\n\ninsert into test values ('header1',null,null,null);\ninsert into test values (1,'X','Y','Z');\ninsert into test values (2,'X','Y','Z');\ninsert into test values (3,'X','Y','Z');\ninsert into test values ('header2',null,null,null);\ninsert into test values (4,'X','Y','Z');\ninsert into test values (5,'X','Y','Z');\ninsert into test values (6,'X','Y','Z');\n</code></pre>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":60,"score":2,"question_id":12609487,"title":"Oracle comparing timestamp with date","body":"<p>I have a timestamp field and I just want to compare the date part of it in my query in Oracle</p>\n\n<p>How do I do that,</p>\n\n<pre><code>SELECT *\nFROM Table1\nWHERE date(field1) = '2012-01-01' \n</code></pre>\n"},{"tags":["c#",".net","oracle","ado.net","odp.net"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":960,"score":1,"question_id":6959988,"title":"ODP.NET for both 32bit and 64bit","body":"<p>I am developing application which uses ODP.NET to connect to Oracle DB. I would like to have one version for both 32bit and 64bit machines. The problem is that I couldn't figure out how to build projetc with <strong>anycpu</strong> target, seems it requires the target to be the same as ODP driver version. So it means that I need to have to versions of the same application one for 32bit and other for 64bit. But the same was not problem while using MS .NET Oracle client (System.Data.OracleClient). Is there a way to have the same behavior using ODP.NET as on MS .NET client? </p>\n"},{"tags":["sql","oracle","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":45,"score":-1,"question_id":12172959,"title":"How to set column values justify right in isqlplus","body":"<p>I want to set my column values to the right aligned..</p>\n"},{"tags":["oracle","unit-testing","plsql","sql-developer"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":176,"score":2,"question_id":12594478,"title":"Validating a PL/SQL Stored Procedure OUT REF CURSOR in SQL Developer's Unit Testing framework","body":"<p>I am developing a series of PL/SQL Stored Procedures in a package that open REF CURSORs that are passed to the caller as OUT parameters for purposes of interoperability with another framework. I am using SQL Developer and recently started looking into using the testing features built into it.</p>\n\n<p>I am looking for a way to validate the results of a REF CURSOR using SQL Developer's Unit Testing framework. I developed some paging logic, and I want to ensure that it is operating correctly so I was hoping I could verify that I have the correct number of rows and that their row numbers are within the range of the appropriate page.</p>\n\n<p>I found a similar question <a href=\"https://forums.oracle.com/forums/thread.jspa?threadID=2131008\" rel=\"nofollow\">here</a>, but that solution renders the unit tests absolutely useless (at least as far as I can tell) because it doesn't actually perform any validation after running the procedure. If someone could explain how to validate it or show me what I'm missing from the solution from Oracle's Forums, I would appreciate it.</p>\n"},{"tags":["sql","oracle","plsql","oracleforms"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12606881,"title":"Old and new values in Oracle Form","body":"<p>I'm working with Oracle Forms. I have a field named <code>SOLD_TO_CUST_PARTY_NAME</code>. I have to execute a process if I detect a change in the field's value. I tried using when_validate, but it's executed even if you just click the field and move to another field (validation ALWAYS occurs whether you change the value or not). Is there anyway I can check <code>:old</code> and <code>:new</code> or something similar to execute a process only if the field is modified? </p>\n\n<p><strong>EDIT:</strong>\nCan't use personalizations. It has to be done with <code>pl/sql</code>.</p>\n"},{"tags":["sql","oracle","greatest-n-per-group"],"answer_count":5,"favorite_count":6,"up_vote_count":5,"down_vote_count":0,"view_count":12298,"score":5,"question_id":134958,"title":"Get top results for each group (in Oracle)","body":"<p>How would I be able to get N results for several groups in\nan oracle query.</p>\n\n<p>For example, given the following table:</p>\n\n<pre><code>|--------+------------+------------|\n| emp_id | name       | occupation |\n|--------+------------+------------|\n|      1 | John Smith | Accountant |\n|      2 | Jane Doe   | Engineer   |\n|      3 | Jack Black | Funnyman   |\n|--------+------------+------------|\n</code></pre>\n\n<p>There are many more rows with more occupations.  I would like to get\nthree employees (lets say) from each occupation.</p>\n\n<p>Is there a way to do this without using a subquery?</p>\n"},{"tags":["oracle","stored-procedures"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":12578515,"title":"How to insert result set returned by an oracle stored procedure into another table using second stored procedure?","body":"<p>I have two stored procedures in oracle. </p>\n\n<p>First stored procedure <code>proc1</code>, returns some rows from table <code>emp</code>. </p>\n\n<p>In another stored procedure <code>proc2</code>, i need to call <code>proc1</code> and insert its result set into another table. </p>\n\n<p>Is it possible to do this or is there any other better way to do this? </p>\n\n<pre><code>-- this is proce_2\ncreate or replace PROCEDURE FIND_EMPLOYEES \n(\n  IN_REGION_ID IN NUMBER, \n  &lt;&lt; more params &gt;&gt; ,   \n  employee_cursor OUT SYS_REFCURSOR\n) \nIS \n\nBEGIN    \n\n    open employee_cursor for \n\n    select * from employee where &lt;&lt;some conditions&gt;&gt; ;  \n\nEND;    \n</code></pre>\n"},{"tags":["sql","oracle","triggers","null","sqlplus"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12606777,"title":"Oracle trigger conflict with null","body":"<p>First and foremost, this is for an assignment, so most of the really cool pre-written functions you'll want to suggest, I will not be allowed to use.</p>\n\n<p>I have a couple tables that all have fields</p>\n\n<pre><code>creation_date\ncreated_by\nlast_update_date\nlast_updated_by\n</code></pre>\n\n<p>I need to write a trigger that fills these in for creation or updating. The problem is, these tables have null values that are problematic to me. Example:</p>\n\n<pre><code>CREATE TABLE parts\n(\npno                NUMBER,\npname              VARCHAR2(50) NOT NULL,\nqoh                NUMBER       NOT NULL,\nprice              NUMBER(5,2),\nreorder_level      NUMBER(2),\ncreation_date      DATE         NOT NULL,\ncreated_by         VARCHAR2(10) NOT NULL,\nlast_update_date   DATE         NOT NULL,\nlast_updated_by    VARCHAR2(10) NOT NULL,\nCONSTRAINT parts_PK PRIMARY KEY (pno))\n</code></pre>\n\n<p>These NOT NULL's are given to me and I'm not allowed to change them. So I'm having trouble conceptualizing this.</p>\n\n<ul>\n<li>If my trigger adds these values before the field is created, I can't do an INSERT INTO with those fields blank because they're NOT NULL.  </li>\n<li>If my trigger adds these values after the field is created, I get compilation errors ORA-00903 and 00922. Invalid table name and invalid option.</li>\n</ul>\n\n<p>I was thinking my trigger would look like</p>\n\n<pre><code>CREATE OR REPLACE TRIGGER pcreate\n  BEFORE UPDATE on parts\n  FOR EACH ROW\nBEGIN\n  UPDATE\n    SET creation_date = SYSDATE;\n    SET created_by = USER;\n    SET last_update_date = SYSDATE;\n    SET last_updated_by = USER;\nEND;\n/\n\nCREATE OR REPLACE TRIGGER pchange\n  BEFORE UPDATE on parts\n  FOR EACH ROW\nBEGIN\n  UPDATE\n    SET last_update_date = SYSDATE;\n    SET last_updated_by = USER;\nEND;\n/\nrepeat for the other tables\n</code></pre>\n\n<p>I might be allowed to use UPSERT but I don't really know how that works.. Any suggestions are welcome. I'm really in this to learn so any other advice is appreciated.</p>\n\n<p>EDIT:</p>\n\n<p>My package that will not acknowledge the trigger is as follows. Do I need to call the trigger inside the package?</p>\n\n<pre><code>CREATE OR REPLACE PACKAGE process_orders \nAS\n  PROCEDURE add_order (p_cno IN NUMBER, p_eno IN NUMBER, p_received IN DATE);\n  PROCEDURE add_order_details (p_ono IN NUMBER, p_pno IN NUMBER, p_qty IN NUMBER);\n  PROCEDURE ship_order (p_ono IN NUMBER, p_sdate IN DATE);\n  PROCEDURE delete_order (p_ono IN NUMBER);\n  FUNCTION total_emp_sales (f_eno IN NUMBER) RETURN NUMBER;\nEND process_orders;\n/\n\nCREATE OR REPLACE PACKAGE BODY process_orders \nAS\n  PROCEDURE add_order (p_cno IN NUMBER, p_eno IN NUMBER, p_received IN DATE) \n  IS\n  ao_emsg       VARCHAR2(100);\n  p_rec_today   DATE;\n  BEGIN\n    SELECT SYSDATE INTO p_rec_today FROM dual;\n    IF p_received is null THEN\n        INSERT INTO orders (ono, cno, eno, received)\n        VALUES(order_number_seq.NEXTVAL,p_cno,p_eno,p_rec_today);\n    ELSE\n        INSERT INTO orders (ono, cno, eno, received)\n    VALUES(order_number_seq.NEXTVAL,p_cno,p_eno,p_received);\n    END IF;\n\n  EXCEPTION\n    WHEN OTHERS THEN\n      ao_emsg := substr(SQLERRM,1,100);\n      INSERT INTO orders_errors (ono,transaction_date,message)\n      VALUES(order_number_seq.CURRVAL,SYSDATE,ao_emsg);\n  END;\n  --Etc. Procedures\nEND;\n/\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":205,"score":0,"question_id":12603975,"title":"Oracle: not a valid month","body":"<p>I have a table with the following fields:</p>\n\n<p>Reports (table name)\nRep_Date (date)\nRep_Time (date)</p>\n\n<p>The Rep_Time field has values like '01/01/1753 07:30:00' i.e. the time part is relevant.  I have written the following query:</p>\n\n<pre><code>select Reports.pid, MaxDate from Reports\nINNER JOIN (\n    select pid, max(TO_DATE(TO_CHAR(REP_DATE, 'DD/MM/YYYY')\n        || TO_CHAR(REP_TIME, 'HH24:MI:SS'), 'DD/MM/YYYY HH24:MI:SS')) As MaxDate\n    from reports\n    group by pid\n) ReportMaxDate\non Reports.PID = ReportMaxDate.PID\nAND To_Date(To_Char(MaxDate, 'DD/MM/YYYY')) = REP_DATE\nWHERE REPORTS.PID=61\n</code></pre>\n\n<p>The derived table part of the query runs, but when I run the entire query I get an error: \"not a valid month\".  Why is this? </p>\n\n<p>In order to help debug this; if I run the following query:</p>\n\n<pre><code>select rep_date, rep_time from reports where pid=61 and rownum=1\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>Rep_Date = 01/04/2009\nRep_Time = 01/01/1753 13:00:00\n</code></pre>\n\n<p>UPDATE 15:58\nI am now able to execute the following query:</p>\n\n<pre><code>select Reports.pid, MaxDate from Reports\nINNER JOIN (\n    select pid, max(TO_DATE(TO_CHAR(REP_DATE, 'DD/MM/YYYY')\n        || TO_CHAR(REP_TIME, 'HH24:MI:SS'), 'DD/MM/YYYY HH24:MI:SS')) As MaxDate\n    from reports group by pid\n) ReportMaxDate\non Reports.PID = ReportMaxDate.PID\nAND to_date(to_char(maxdate,'MM/DD/YYYY'),'MM/DD/YYYY') = REP_DATE\nWHERE REPORTS.PID=61\n</code></pre>\n\n<p>However, I need to add one more statement to the <code>WHERE</code> clause comparing the time part of MaxDate to rep_time: <code>to_date(to_char(maxdate,'MM/DD/YYYY'),'MM/DD/YYYY') = REP_DATE</code> does not work.</p>\n"},{"tags":["java","multithreading","oracle","hibernate","connection"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":135,"score":0,"question_id":12606674,"title":"Java. Cannot open connection","body":"<p>I'm using </p>\n\n<blockquote>\n  <p>oracle.ucp.jdbc.PoolDataSource</p>\n</blockquote>\n\n<p>for getting connections. Each connection wrapped to custom class (historic solution). Generally connection is getting by entityManager. My system require hight performance processing. There is ThreadPool using for it. Thread pool can provide <strong>15</strong> threads at the same time, like connection pool. \nEvery thing works fine, but sometimes i get exception (in this moment were used only 4 connections):</p>\n\n<pre><code>2012-09-26 17:51:45.835 | ERROR | ThreadExecutor-7 | org.hibernate.ejb.AbstractEntityManagerImpl | Exception in thread \"ThreadExecutor-7\"\njavax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: Cannot open connection\n    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1235)\n    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1168)\n    at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:1245)\n    at org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:63)\n    ...\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:619)\nCaused by: org.hibernate.exception.GenericJDBCException: Cannot open connection\n    at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:140)\n    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:128)\n    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)\n    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:52)\n    at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:449)\n    at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)\n    at org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:142)\n    at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:85)\n    at org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1463)\n    at org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:60)\n    ...\n    at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)\n</code></pre>\n\n<p><strong>If i synchronize specified <em>getConnection</em> performance of the system going down 8-12 times.</strong></p>\n\n<p>Is any ideas for fix?</p>\n"},{"tags":["c#","xml","linq","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12606656,"title":"Loading large amounts of data into a List collection of business objects from Oracle","body":"<p>I need a way to optimize the data retrieval of millions of records from an Oracle database into a List of custom business object. The data that is being returned from Oracle is in XML format and I need a way to serialize it into a List of business objects.</p>\n\n<p>The code I wrote is working properly, however, it is taking a long time to execute during the loading of the XML into memory, specifically when the code hits the line:</p>\n\n<pre><code>var xDoc = XDocument.Load(xmlReader);   \n</code></pre>\n\n<p>Code :        </p>\n\n<pre><code>//Custom Business object  \n public class AccountType\n    {\n        public int AccountTypeID { get; set; }\n        public string AccountCode { get; set; }\n        public string BookType { get; set; }\n        public int Status { get; set; }\n    }\n\n//Code that retrieves data from Oracle DB\n\n  using (OracleConnection objOracleConnection = new OracleConnection(strConnectionString))\n            {\n                using (OracleCommand orclCmd = objOracleConnection.CreateCommand())\n                {\n                    try\n                    {\n\n                        orclCmd.CommandText = strXMLSQL;\n                        orclCmd.BindByName = true;\n                        orclCmd.XmlCommandType = OracleXmlCommandType.Query;\n                        orclCmd.XmlQueryProperties.RootTag = \"AccountData\";\n                        orclCmd.XmlQueryProperties.RowTag = \"ROW\";\n\n                        objOracleConnection.Open();\n                        XmlReader xmlReader = orclCmd.ExecuteXmlReader();\n                        var xDoc = XDocument.Load(xmlReader);                             \n                        List&lt;AccountType&gt; accountTypes = (from data in xDoc.Root.Elements(\"ROW\")\n                                                              select new AccountType\n                                                              {\n                                                                  AccountTypeID = data.GetIntXMLElementValue(\"ACCOUNTTYPEID\"),\n                                                                  AccountCode = data.GetStringXMLElementValue(\"ACCOUNTCODE\"),\n                                                                  BookType = data.GetStringXMLElementValue(\"BOOKTYPE\"),\n                                                                  Status = data.GetIntXMLElementValue(\"STATUS\")\n                                                              }).ToList();\n\n                    }\n                    catch (OracleException oracleEx)\n                    {\n                        throw oracleEx;\n                    }\n                    catch (Exception generalEx)\n                    {\n                        throw generalEx;\n                    }\n                    finally\n                    {\n                        objOracleConnection.Close();\n                    }\n }\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p>Thanks!</p>\n"},{"tags":["oracle","plsql","oracle11g"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12607306,"title":"Populating a star-schema from a single staging table.","body":"<p>What is the best way of populating a star-schema from a single staging table. \nThe dataload is in number of millions of rows and the star-schema is one fact table with 10 associated dimension tables. </p>\n\n<p><strong>Scenario 1.</strong> Doing sequential inserts into dimensions first and afterwards a big insert into the fact table where I join the staging table with the updated dimension tables. My biggest concern here is the locking that might occur due to the concurrent inserts into dimension/fact tables due to the huge amount of data.</p>\n\n<p><strong>Scenario 2.</strong> Splitting the data load into smaller batches (10k rows) and looping through the entire staging table and inserting the batches in the same manner as described in <em>Scenarion 1.</em> The problem I'm seeing here is looping through a big table with cursors. Plus in case one of the batches fails to insert the data I would need to rollback changes for all of the inserts done previously.</p>\n\n<p><strong>Scenario 3.</strong> Write a big <em>INSERT ALL</em> statement and lock the star-schema for the whole duration of the insert. Moreover to the locking problems I would have a complex insert statment that will have to hold all of the business logic for the insert statements (a nightmare to debug and maintain)</p>\n"},{"tags":["oracle","oracle11g","oracleforms","tnsnames"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12606236,"title":"Why could happen that I can connect to Oracle 10g DB 32 bits but not to 11g DB 64 bits from a 64 bits Forms Server?","body":"<p>I have just started using WebLogic and the new FORMS and REPORTS Server and builders (11gR2).</p>\n\n<p>I'm using an Oracle 11g R2 64 Bits DB. In the Forms Builder I can open the form an compile it without any problem.</p>\n\n<p>But once I tried to open the form through the browser, it asked me for the DB credentias and then it gave me a TNS Error <code>ORA-12154</code>.</p>\n\n<p>Thing is I have double check the <code>tnsnames.ora</code> file and everything is alright. So I tried to connect to a 10g DB and it does connect. So it is not a TNSNAMES problem because both DB Address are in the same the tns file.</p>\n\n<p>Question is: What would be the real problem, that is causing this to happen? And how could I solve it?</p>\n\n<p>Tns Entry:</p>\n\n<pre>\n\n    DEV11=\n      (DESCRIPTION =\n        (ADDRESS = (PROTOCOL = TCP)\n    (HOST = xxx.xxx.xxx.xxx)(PORT = 1521))\n        (CONNECT_DATA =\n          (SERVER = DEDICATED)\n          (SERVICE_NAME = dev11)\n        )\n      )\n\n</pre>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":7,"view_count":348,"score":-6,"question_id":7933070,"title":"Nested SQL statements for Oracle","body":"<p>I am taking a SQL database class using Oracle. There's an assignment:</p>\n\n<blockquote>\n  <p>\"Find the book title, author last name, and units on hand for each book in branch number 4\"</p>\n</blockquote>\n\n<p>I've tried different ways of nesting statement but none have worked with these tables.</p>\n\n<ul>\n<li>BOOK</li>\n<li>AUTHOR</li>\n<li>INVENTORY</li>\n<li>BRANCH</li>\n</ul>\n\n<p>That was very helpful! (do actually want to learn this rather than just complete my homework) So far I got. besides if I wanted just the answers I would have said so,...</p>\n\n<pre><code>select book.book_code, author.author_last, inventory.on_hand\nfrom book inner join wrote on book.book_code = wrote.book_code,\nauthor inner join wrote on author.author_num = wrote.author_num,\ninventory inner join branch on inventory.branch_num = branch.branch_num\nwhere branch.branch_num = 4; \n</code></pre>\n\n<p>But now I have a bunch of repeating products </p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12604002,"title":"How to compare two different rows of two different tables and update a third table?","body":"<p>Im having two different tables Value(queid, m) and Ans(queid1, an). I want to compare queid and queid1 and if they are same then m and an's values and has to update the third table with correct values. Thanx a tons.<br/> \nTable structures are<br/> \nValue table will have two attributes queid and m. queid will have data like 3, 4, 5, 6, and m will have a, v, d, e<br/>\nAns table will have attributes queid1 and an. queid1 attributes will have data like 3, 4, 3, 4, 3, 3, 3, 2, 3, 4 and an will have data like a, v, a, a, a, c, e, r, e, d.<br/> \nNow what i want is that it should compare the values of queid with queid1. so if we consider <b>3</b> ie first value of queid in value table, then it should find all the <b>3</b>'s in ans table and then is should compare <b>a</b> (ie the row corresponding to 3 in value table) with all the 3's in ans. And the corresponding right comparison of a's is to be stored in some third table.</p>\n"},{"tags":["java","oracle","transactions"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":94,"score":2,"question_id":7379064,"title":"Where does the responsibility lie to ensure the ACID properties of a transaction?","body":"<p>I  was going through ACID properties regarding Transaction and encountered the statement below across the different sites\nACID is the acronym for the four properties guaranteed by transactions: atomicity, consistency, isolation, and durability. </p>\n\n<p>**My question is specifically about the phrase.</p>\n\n<blockquote>\n  <p>guaranteed by transactions</p>\n</blockquote>\n\n<p>**. As per my experience these properties are not taken care by\ntransaction automatically. But as a java developer we need to ensure that these properties criteria are met.</p>\n\n<p>Let's go through for each property:-</p>\n\n<ol>\n<li><p>Atomicity:- Assume when we create the customer the account should be created too as it is compulsory.  So now during transaction\nthe customer gets created while during account creation some exception oocurs. So the developer can now go two ways: either he rolls back the\ncomplete transaction (atomicity is met in this case) or he commits the transaction so customer will be created but not the\naccount (which violates the atomicity). So responsibility lies with developer?</p></li>\n<li><p>Consistency:- Same reason holds valid for consistency too</p></li>\n<li><p>Isolation :- as per definition isolation makes a transaction execute without interference from another process or transactions.<br>\nBut this is achieved when we set the isolation level as Serializable. Otherwis in another case like read commited or read uncommited\nchanges are visible to other transactions.  So responsibility lies with the developer to make it really isolated with Serializable?</p></li>\n<li><p>Durability:- If we commit the transaction, then even if the application crashes, it should be committed on restart of application.  Not sure if it needs to be taken care by developer or by database vendor/transaction?</p></li>\n</ol>\n\n<p>So as per my understanding these ACID properties are not guaranteed automatically; rather we as a developer sjould achieve them. Please let me know\nif above understanding regarding each point is correct? Would appreciate if you folks can reply  for each point(yes/no will also do.</p>\n\n<p>As per my understanding read committed should be most logical isolation level in most application, though it depends on requirement too.</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12605864,"title":"Inserting dates before year 1950 in Oracle","body":"<p>I have a problem getting correct date. When I copy dates from one table to another</p>\n\n<pre><code>insert into table1 select some_date from some_table \n</code></pre>\n\n<p>it inserts wrong date. The problem only occurs for dates with year before 1950. In table1 I have date 1.1.1949 and when I copy it to some_table I get date 2049-1-1</p>\n\n<p>How do I get correct date...  1949-1-1?</p>\n"},{"tags":["python","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12605239,"title":"oracle error code handling cx_oracle","body":"<p>I'm trying to accessing Oracle from Python using cx_ORacle.</p>\n\n<p>I have a select statement that returns no rows ie; NO_DATA_FOUND..and this is how Im handling the error condition.</p>\n\n<p>When I execute this piece of code, the error NO_DATA_FOUND is not catched by the cx_oracle.error or cx_oracle.Databaseerror or cx_oracle.Warning..</p>\n\n<p>How do I handle the NO_DATA_FOUND condition?</p>\n\n<p>code.py</p>\n\n<pre><code>def DetermineNames(self): \n    sql = \"\"\"select NAME from EMP_TAB where fd_fle_id = %s\"\"\"%(self.fileid)\n    try:\n         self.cursor.execute(sql)\n         result = self.cursor.fetchall()\n         for row in result:\n               print('row',row)\n    except cx_Oracle.Error as e:\n        print(\"Error:Unable to determine the RAW_OBJ_NAME: Object Name:%s, Function Name:%s  Error:%s\")%(self.__class__.__name__,sys._getframe().f_code.co_name,\n        str(e).strip())                        \n    except cx_Oracle.DatabaseError as e:\n        print(\"Error:Unable to determine the RAW_OBJ_NAME: Object Name:%s, Function Name:%s  Error:%s\")%(self.__class__.__name__,sys._getframe().f_code.co_name,\n        str(e).strip())\n    except cx_Oracle.Warning as e:\n        print(\"Error:Unable to determine the RAW_OBJ_NAME: Object Name:%s, Function Name:%s  Error:%s\")%(self.__class__.__name__,sys._getframe().f_code.co_name,\n        str(e).strip())                     \n    return self.rawname       \n</code></pre>\n"},{"tags":["sql","database","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12600953,"title":"searche distinct table but return all columns","body":"<p>I need to query a table with 3 rows: id, ip and user_id</p>\n\n<p>I want to return only the rows that have unique values of ip and user_id (not itself unique, but unique as a pair) eg:</p>\n\n<pre><code>id         ip          user_id\n--------------------------------\n1          1           2\n2          1           2\n3          1           2\n4          2           5\n5          2           5\n6          2           8\n7          2           8\n8          3           10\n9          3           11\n</code></pre>\n\n<p>the result must be:</p>\n\n<pre><code>id        ip\n------------\n1         1\n4         2\n2         8\n6         2\n8         3\n9         3\n</code></pre>\n\n<p>I'm using Oracle database.</p>\n"},{"tags":["mysql","oracle","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12592107,"title":"java.sql.Clob reading : weird results b/w MySQL and Oracle","body":"<p>I got an unified JDBC code for reading/writing large texts. Column is CLOB on Oracle and TEXT on MySQL. The following code</p>\n\n<pre><code>java.sql.Clob aClob = resultSet.getClob(COLUMN_NAME);\njava.io.InputStream aStream = aClob.getAsciiStream();\nint av = aStream.available();\n</code></pre>\n\n<p>gives relevant value on MySQL (Connector/J 5.0.4) but zero on Oracle (Oracle JDBC driver 11.2.0.2). <code>Clob.length()</code> fortunately gives correct value on both and <code>InputStream.read()</code> up to -1 works too, so there are other ways of obtaining the data in unified way.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#available%28%29\" rel=\"nofollow\">Javadoc gives</a> this weird note:</p>\n\n<blockquote>\n  <p>The available method for class InputStream always returns 0. </p>\n</blockquote>\n\n<p>So which driver is right? And no, i don't want to drag vendor-specific packages into the code :-) This question is JDBC neutral.</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":3302,"score":4,"question_id":1272148,"title":"How do I View a Tree list of Schemas for a database in Oracle SQL Developer","body":"<p>How do I view the Schemas that belong to a database in SQL Developer. I am trying to get a view similar to Toad in that you have the database name at the parent level, all the schemas below it which are then expandable to view all the objects that belong to that particular schema</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":41,"score":-2,"question_id":12603250,"title":"How to compare two different rows of two different tables?","body":"<p>Im having two different tables Value(queid, m) and Ans(queid1, an). I want to compare queid and queid1 and if they are same then m and an's values and has to update the third table with correct values.  Thanx a tons. <br/> Table structures are <br/> Value table  will have two attributes queid and m. queid will have data like 3, 4, 5, 6, and m will have a, v, d, e<br/> Ans table will have attributes queid1 and an. queid1 attributes will have data like 3, 4, 3, 4, 3, 3, 3, 2, 3, 4 and an will have data like a, v, a, a, a, c, e, r, e, d. <br/> Now what i want is that it should compare the values of queid with queid1. so if we consider <b>3</b> ie first value of queid in value table, then it should find all the <b>3's</b> in <b> ans</b> table and then is should compare <b>a</b> (ie the row corresponding to 3 in value table) with all the <b>3's</b> in ans. And the corresponding right comparison of <b>a</b>'s is to be stored in some third table. </p>\n"}]}
{"total":22203,"page":19,"pagesize":100,"questions":[{"tags":["oracle","plsql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12603592,"title":"OS file from BLOB in Oracle","body":"<p>I'm thinking about is it whether possible to write Oracle blobs to OS files. On first glance it is possible only using external procedures but may be something changed.... </p>\n\n<blockquote>\n  <p>How to save a BLOB to a file on disk in PL/SQL From: Thomas Kyte\n  </p>\n  \n  <p>Use DBMS_LOB to read from the BLOB</p>\n  \n  <p>You will need to create an external procedure to take binary data and\n  write it to the operating system, the external procedure can be\n  written in C. If it was CLOB data, you can use UTL_FILE to write it to\n  the OS but UTL_FILE does not support the binary in a BLOB.</p>\n</blockquote>\n"},{"tags":["sql","oracle","db2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":12585776,"title":"SQL - Why pad spaces when comparing characters?","body":"<p>Seems like DB2 and Oracle implement character comparison by padding the shorter string with spaces on right. But why?</p>\n\n<p>Would it not be better if the database engine had trimmed the larger character value instead of padding the shorter one with spaces? i.e.\n if my query is <code>SELECT * from SOME_TABLE where CUSTOMER_NAME = 'Popeye   '</code>, the database engine ends up adding spaces to every row in <code>SOME_TABLE</code>, when instead it could have trimmed the value passed here i.e. <code>'Popeye  '</code></p>\n\n<p>Also, just curious to understand why does Oracle and DB2 only add spaces on right ? </p>\n"},{"tags":["sql","oracle","function","table","date"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":12600561,"title":"Calling a function that return a table with dates","body":"<p>I have a problem with a function.\nI need to get a table with dates of a month, name of the day and the amound of weekdays in that month. \nI already found some help here and adapted it to my need, but I can't get the function running/compiled\nHere is what I have so far:</p>\n\n<pre><code>create or replace TYPE DATE_ROW AS OBJECT\n(\n  MyDate DATE,\n  Dayname VARCHAR2(12),\n  Amount Integer\n )\n\ncreate or replace TYPE DATE_TABLE as table of DATE_ROW\n\ncreate or replace FUNCTION myfinaldays (mydate date)\n       RETURN DATE_TABLE\n       PIPELINED\n    IS\n       V_MYDATE          DATE;\n       V_DAYNAME   VARCHAR2(12);\n       V_AMOUNT           NUMBER;\nBEGIN\n    with this_month as (\n        select trunc(to_date('mydate'), 'mm')+level-1 dy\n          from dual \n       connect by level &lt; (trunc(add_months(to_date('mydate'),1), 'mm')- trunc(to_date('mydate'), 'mm'))+1\n    )\n    FOR i IN 0 .. (select count(*) from this_month) LOOP\n        select (dy) Daydate,\n               to_char(dy, 'day'), Dayname,\n              ( select count(*)\n                  from this_month \n                 where  to_char(dy, 'dy') not in ('sat', 'sun')\n               ) Amount\n          from this_month\n         where to_char(dy, 'dy') not in ('sat', 'sun')\n           and EXTRACT(day from to_date(dy)) = i;\n\n       pipe row (date_row(v_mydate,v_dayname, v_amount));\n   END LOOP;\n   RETURN;\n   END;\n</code></pre>\n\n<p>The function call would then be something like:</p>\n\n<pre><code>select * from date_table(cast(myfinaldays('01.02.12')));\n</code></pre>\n\n<p>I can only give one date as a parameter.</p>\n\n<p>I hope someone can help me out here since this is slowly driving me mad.\nAny ideas, examples, or thoughts would be greatly appreciated.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Ok here is an update with mybe some more helpfull infos to my problem:</p>\n\n<p>This is working and my aim is to put this in a function so I can call it with 1 parameter:</p>\n\n<pre><code>    with this_month as (  \n    select trunc(to_date('01.02.12'), 'mm')+level-1 dy\n    from   dual \n    connect by level &lt; (trunc(add_months(to_date('01.02.12'),1), 'mm')- trunc(to_date('01.02.12'), 'mm'))+1\n    )\n    select (dy) mydate, (select count(*) from this_month) Days_in_month\n    ,      to_char(dy, 'day') Dayname\n    ,     ( select count(*) from this_month where  to_char(dy, 'dy') not in ('sat', 'sun') ) Amount\n    from   this_month\n    where  to_char(dy, 'dy') not in ('sat', 'sun') ;\n</code></pre>\n\n<p>for the loop I added: 'and  EXTRACT(day from to_date(dy))=i' at the end.</p>\n\n<p>I added a date so you can see what I need in the end. If I write mydate instead and enter 01.02.12 as parameter after running it in the developer it still works.</p>\n\n<p>Errors I get compiling:\n    - Error(10,1): PL/SQL: SQL Statement ignored</p>\n\n<pre><code>- Error(15,5): PL/SQL: ORA-00928: Keyword SELECT missing\n\n- Error(22,8): PLS-00113: END-Definer 'LOOP' must complete 'myfinaldays' in row 1, comlumn 10 \n\n- Error(23,4): PLS-00103: Found the symbol \"RETURN\" \n</code></pre>\n\n<p>The errors are translated since my Oracle does not run english so I hope to have guessed it correctly.</p>\n"},{"tags":["sql","oracle","packages"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":3363,"score":4,"question_id":5178830,"title":"How to use a package constant in SQL SELECT statement?","body":"<p>How can I use a package variable in a simple SELECT query statement in Oracle?</p>\n\n<p>Something like</p>\n\n<pre><code>SELECT * FROM MyTable WHERE TypeId = MyPackage.MY_TYPE\n</code></pre>\n\n<p>Is it possible at all or only when using PL/SQL (use SELECT within BEGIN/END)?</p>\n"},{"tags":["java","oracle","jdbc","passwords","handle"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12601645,"title":"How can I catch ORA-28011or ORA-28002 in Java?","body":"<p>I must handle the ORA-28011 and ORA-28002 in my app. But these ORA warnings suppressed by JDBC (I think)<br>\nHow can I catch these in Java?<br>\nIs there something JDBC property?  </p>\n\n<p>I don't prefer the direct query the status from <code>dba_users</code> table.</p>\n\n<p>Thank You!</p>\n"},{"tags":["sql","oracle","plsql","relational-database"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":485,"score":1,"question_id":8402086,"title":"Query for Current_Timestamp between Start- and End-Time (w/o Date!) Oracle PL/SQL","body":"<p>I have a time (without date component) like 9am, let's say it's the current time. I want to query all entrys from a table where this time is between a Start and a End time stored as Timestamp.</p>\n\n<p>How do I do this? Should I store it differently?</p>\n\n<p>I tried something like <code>SELECT * FROM tab1 WHERE (current_timestamp - current_date) BETWEEN starttime AND endtime;</code> but that doesn't work because the difference calculated is always (almost) zero. I could do something with the <code>EXTRACT</code>-command, but that seems to be a little complicated... Isn't there an easy way to do this? </p>\n\n<p>Basically, they are stored appointments.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3962,"score":1,"question_id":3635879,"title":"Convert array of records to refcursor","body":"<p>The question is how to return the l_array as refcursor,\nSince the interface i am using can handle cursor easily rather than an array of record.</p>\n\n<p>Plz help</p>\n\n<pre><code>  create or replace package sample \n  TYPE r_type is record( code number; description varchar2(50)); \n  TYPE tr_type IS TABLE OF r_type; l_rarray tr_type ; ind number:=0; \n\n  PROCEDURE getdata() IS\n     CURSOR cur IS\n        SELECT empid, empname, place, location FROM emp;\n     TYPE epmid_aat IS TABLE OF emp.empid%TYPE INDEX BY BINARY_INTEGER;\n     l_empid empid_aat;\n  BEGIN\n     k := 1;\n     FOR j IN (SELECT DISTINCT empid FROM emp)\n     LOOP\n        l_empid(k) := j.empid;\n        k := k + 1;\n     END LOOP;\n     FOR i IN cur\n     LOOP\n        FOR k IN l_empid.first .. l_empid.last\n        LOOP\n           IF l_empid(k) = i.empid THEN\n\n              procedure2(i.emp_id);\n           END IF;\n        END LOOP;\n     END LOOP;\n\n  END getdata();\n\n  PROCEDURE procedure2\n  (\n     empid_in       IN NUMBER,\n     description_in IN VARCHAR2(20)\n  ) IS\n  BEGIN\n     lrec.code := empid_in;\n     lrec.description := description_in;\n     l_rarray(ind) := lrec;\n     ind := ind + 1;\n  END procedure2;\n\n  end;\n</code></pre>\n"},{"tags":["oracle","stored-procedures"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12515113,"title":"Oracle procedure call fails from jdbc","body":"<p>We have a procedure declared in an oracle package with name x_pkg.proc_name. When called from jdbc through java.sql.Statement.execute(\"BEGIN x_pkg.proc_name; END;\"); the call fails with an error </p>\n\n<pre><code>java.sql.SQLException: ORA-06550: line 1, column 7:\nPLS-00201: identifier 'x_pkg.proc_name' must be declared\nORA-06550: line 1, column 7:\nPL/SQL: Statement ignored\n</code></pre>\n\n<p>The above error indicates that the procedure is not declared in the given package. \nThe jdbc call surprisingly succeeds if I rename the procedure to x_pkg.proc_name_something. This seems very strange. I tried deleting the procedure declaration and its body and re-adding it but I get the same error. </p>\n\n<p>Any suggestions on troubleshooting this further?</p>\n\n<p>Note - the procedure call succeeds always through pl-sql code. It just fails when executed through jdbc.</p>\n\n<p><strong>Update :</strong> \nIt procedure call succeeds if I prefix it with the schema name like \"BEGIN schema_name.x_pkg.proc_name; END;\"</p>\n\n<p>Any idea when should the schema name be prefixed and when is it not required?</p>\n\n<p><strong>Update :</strong>\nThe actual package name is \"COMMONS_UTILS\" and the procedure name is \"SET_SESSION_NLS_PARAMS\". The call \"BEGIN COMMONS_UTILS.SET_SESSION_NLS_PARAMS; END;\" fails when made through JDBC. It works if I rename the procedure name to \"SET_SESSION_NLS_PARAMSX\".</p>\n\n<p><strong>Update :</strong> \nThe procedure call works if I compile it before executing it. </p>\n\n<p>\"BEGIN EXECUTE IMMEDIATE 'ALTER PACKAGE COMMONS_UTILS COMPILE'; COMMONS_UTILS.SET_SESSION_NLS_PARAMS; END;\"</p>\n"},{"tags":["sql","oracle","triggers","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12588901,"title":"Can dynamic SQL be called from a trigger in Oracle?","body":"<p>I have a dozen tables of whom I want to keep the history of the changes. For every one I created a second table with the ending _HISTO and added fields modtime, action, user.</p>\n\n<p>At the moment before I insert, modify or delete a record in this tables I call ( from my delphi app ) a oracle procedure that copies the actual values to the histo table and then do the operation.</p>\n\n<p>My procedure generates a dynamic sql via  DBA_TAB_COLUMNS and then executes the generated ( insert into tablename_histo ( fields s ) select fields, sysdate, 'acition', userid from table_name </p>\n\n<p>I was told that I can not call this procedure from a trigger because it has to select the table the trigger is triggered on. Is this true ? Is it possible to implement what I need ?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":268,"score":2,"question_id":9508202,"title":"Oracle Homework - LPAD / RPAD Error?","body":"<p>I am trying to write a statement that will produce \"Oracle$$$Internet$$$Academy\" using LPAD and RPAD commands. this is what I have so far, but I am getting a missing right parenthesis error. </p>\n\n<pre><code>SELECT LPAD(RPAD('Oracle', 10,'$$$')RPAD('Internet',24,'$$$'))\nFROM dual;\n</code></pre>\n"},{"tags":["sql-server","oracle","character-encoding","globalization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":45,"score":-4,"question_id":12597172,"title":"Oracle Font Error incorrectly","body":"<p>I have two Servers, one Oracle Server at IP 10.92.92.92, one SQL server at IP 10.92.92.93.\nIn Oracle Server, I am using Arial font to store database and it view correctly.\nNow, I want to push database from Oracle Server to SQL server by Linked Server, As a result It views incorrect ly from SQL server, what errors happen?</p>\n\n<p>When I use statement very simple such as: SELECT * FROM  SERVERXX..SERVER119.TABLENAME it also views incorrectly, Please help me with this?</p>\n\n<p>Thank You everybody!</p>\n"},{"tags":["c#","asp.net","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12599661,"title":"oracle 3 tier architecture error","body":"<p>I’m working on asp.net c# oracle database connection using 3-Tier architecture. On my business layer class I’m getting this error. System.StackOverflowException was unhandled</p>\n\n<p>I followed a tutorial using sql database and all worked fine with no error now I need to implement using oracle database.</p>\n\n<p>Here is part of the code where I’m getting error</p>\n\n<pre><code>    public class BusSurvey\n{\n    DbAccess _dbAccess = new DbAccess();\n    private DataSet _SurveyDS = new DataSet();\n    public DataSet SurveyDS\n    {\n        get\n        {\n            return SurveyDS;\n        }\n        set\n        {\n            SurveyDS = value;\n        }\n    }\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":5,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12597328,"title":"SQL select case when clause","body":"<p>The following is the query</p>\n\n<pre><code>select *,  \"Price Range\" = \n  CASE \n     WHEN ListPrice =  0 THEN 'Mfg item - not for resale'\n     WHEN ListPrice &lt; 50 THEN 'Under $50'\n     WHEN ListPrice &gt;= 50 and ListPrice &lt; 250 THEN 'Under $250'\n     WHEN ListPrice &gt;= 250 and ListPrice &lt; 1000 THEN 'Under $1000'\n     ELSE 'Over $1000'\n  END\n  FROM Production.Product\n      ORDER BY ProductNumber\n</code></pre>\n\n<p>But there is SQL error missing important words before FROM \nwhat should I do now? WHat is the blueprint for us to use case when if I want to select all the columns ?</p>\n"},{"tags":["oracle","nhibernate","fluent-nhibernate","query-plans"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":295,"score":5,"question_id":9755233,"title":"Different parameter sizes result in inefficient query plan cache","body":"<p>Nhibernate profiler shows lots of error messages about the query plan:</p>\n\n<p><em>Different parameter sizes result in inefficient query plan cache usage</em></p>\n\n<p>It also leads you to an explanation in <a href=\"http://nhprof.com/Learn/Alerts/UncachedQueryPlan\" rel=\"nofollow\">http://nhprof.com/Learn/Alerts/UncachedQueryPlan</a> and warns you about the use of <code>prepare_sql = true</code> parameter when building session. I do it that way with fluent:</p>\n\n<pre><code>.ExposeConfiguration(configuration =&gt; configuration\n    .SetProperty(\"current_session_context_class\", \"thread_static\")\n    .SetProperty(\"prepare_sql\", \"true\")\n    .SetProperty(\"generate_statistics\", \"true\")\n    )\n</code></pre>\n\n<p>But it seems that it isn't working as error messages are still there. Is that a limitation on OracleClientConfiguration or am I doing it wrong?</p>\n\n<p><strong>Edit</strong> To provide with some more information about this...</p>\n\n<p>In my repository I do this</p>\n\n<pre><code>session.Query&lt;TEntity&gt;.Where(predicate).ToList();\n</code></pre>\n\n<p>and this is the call</p>\n\n<pre><code>var value = ParameterRepository.First(p =&gt; (p.Pipeline.Id == pipelineId &amp;&amp; p.Name == name));\n</code></pre>\n\n<p>For instance those are two SQL generated from this call and that nhibernate profiler shows as \"DIfferent parameter sizes result in inefficient query plan cache usage\"</p>\n\n<pre><code>select GUID1_12_,\n       PARAMETER2_12_,\n       PARAMETER3_12_,\n       GUID4_12_\nfrom   (select pipelineex0_.GUID_PIPELINE_EXEC_PARAMETER as GUID1_12_,\n               pipelineex0_.PARAMETER_NAME               as PARAMETER2_12_,\n               pipelineex0_.PARAMETER_VALUE              as PARAMETER3_12_,\n               pipelineex0_.GUID_PIPELINE_TRACKING       as GUID4_12_\n        from   FCT_PIPELINE_EXEC_PARAMETER pipelineex0_\n        where  pipelineex0_.GUID_PIPELINE_TRACKING = 'A5916E73CF1E406DA26F65C24BFBF694' /* :p0 */\n               and pipelineex0_.PARAMETER_NAME = 'lid' /* :p1 */)\nwhere  rownum &lt;= 1 /* :p2 */\n</code></pre>\n\n<p>and second</p>\n\n<pre><code>select GUID1_12_,\n       PARAMETER2_12_,\n       PARAMETER3_12_,\n       GUID4_12_\nfrom   (select pipelineex0_.GUID_PIPELINE_EXEC_PARAMETER as GUID1_12_,\n               pipelineex0_.PARAMETER_NAME               as PARAMETER2_12_,\n               pipelineex0_.PARAMETER_VALUE              as PARAMETER3_12_,\n               pipelineex0_.GUID_PIPELINE_TRACKING       as GUID4_12_\n        from   FCT_PIPELINE_EXEC_PARAMETER pipelineex0_\n        where  pipelineex0_.GUID_PIPELINE_TRACKING = 'A5916E73CF1E406DA26F65C24BFBF694' /* :p0 */\n               and pipelineex0_.PARAMETER_NAME = 'period' /* :p1 */)\nwhere  rownum &lt;= 1 /* :p2 */\n</code></pre>\n\n<p>IMHO is this PARAMETER_NAME with 'lid' and 'period' that is generating different query plans.</p>\n\n<p>thanks in advance</p>\n"},{"tags":["oracle","query","types","oracle11g","precision"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12598427,"title":"Storing an ISBN in an OracleDB gives precision error?","body":"<p><strong>Why am I getting a precision error?</strong></p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>INSERT INTO ISBN_LIST (ISBN) VALUES (9780261102354);\n</code></pre>\n\n<p>Given the table:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE ISBN_LIST ( \n    ISBN NUMBER (20,20)  NOT NULL -- NUMBER(13) also didn't work\n);\nALTER TABLE ISBN_LIST\n    ADD CONSTRAINT PK_ISBN_LIST PRIMARY KEY ( ISBN );\n</code></pre>\n\n<p>[bonus points if you recognise the ISBN!]</p>\n"},{"tags":["sql","oracle","plsql","sqlplus","sql-developer"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":4522,"score":1,"question_id":4062695,"title":"How can i call pl/sql stored procedure (function, returning number value)?","body":"<p>I'm using Oracle SQL developer, or Oracle SQL* Plus</p>\n"},{"tags":["oracle","query","join","oracle11g","insert-update"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12597491,"title":"Update_or_insert (merge into) not working in Oracle","body":"<p><strong>What's wrong with my UPDATE_OR_INSERT code below?</strong></p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>MERGE INTO EMAIL_LIST d USING (SELECT 'foo@gmail.com' EMAIL) s\n    ON (d.EMAIL = s.EMAIL)\n        WHEN MATCHED THEN\n            UPDATE SET d.EMAIL = s.EMAIL\n        WHEN NOT MATCHED THEN\n            INSERT (EMAIL) VALUES (s.EMAIL);\n</code></pre>\n\n<p>Given the table:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE EMAIL_LIST ( \n    EMAIL VARCHAR2 (100)  NOT NULL\n);\nALTER TABLE EMAIL_LIST\n    ADD CONSTRAINT PK_EMAIL_LIST PRIMARY KEY ( EMAIL ) ;\n</code></pre>\n\n<p><strong>Error</strong></p>\n\n<blockquote>\n  <p>Error report:</p>\n  \n  <p>SQL Error: ORA-00923: FROM keyword not found where expected\n  00923. 00000 -  \"FROM keyword not found where expected\"</p>\n</blockquote>\n"},{"tags":["oracle","null","sql-loader"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12580103,"title":"Avoiding skipped null columns when using terminated and optionally enclosed delimiters","body":"<p>I regularly upload various tab-delimited text data files with SQL Loader. The control files always specify <code>TERMINATED BY X'09'</code>. Certain \"cells\" in those data files may be null, i.e. there is no character between two subsequent tabs. It always works like a clock.</p>\n\n<p>Now, I have run into a specific case where I have to strip a data column of double quotes that may or may not enclose the actual data (side effect of a text export from Excel). </p>\n\n<p>I tried simply adding <code>OPTIONALLY ENCLOSED BY '\"'</code> behind the terminated delimiter and it did work for the file and column in question. Still, with this new option, files with null values are no longer decoded correctly. The loader seems to simply skip those values, which provokes column shifts and results in either a corrupt load, or a load failure.</p>\n\n<p>For now, I've got a workaround dropping the new option and executing an SQL script eliminating double quotes directly in the database, but that obviously cannot last.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["javascript","oracle","oracleforms","database-administration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12532964,"title":"How can I call Javascript inside formsweb.cfg?","body":"<p>In the <a href=\"https://forums.oracle.com/forums/thread.jspa?threadID=490429\" rel=\"nofollow\">Changing the Browser title</a> I read that it is possible to <strong>dynamically</strong> change the \"pageTitle\" of the \"formsweb.cfg\" with the help of Javascript. </p>\n\n<p>My aim is to <strong>dynamically</strong> show the name of the oracle forms (10g) in the browsers page title. How can I use a function like this</p>\n\n<pre><code># HTML page title\n  &lt;script&gt;\n     function setWindowTitle(x)\n       {\n         document.title=x;\n       }\n     &lt;/script&gt;\n    setWindowTitle(form);\n</code></pre>\n\n<p>in my formsweb.cfg to return the form name and set it in the browser title?!!!!</p>\n\n<p>Does anybody know how I can do it? </p>\n\n<p>I appreciate any kind of help</p>\n"},{"tags":["oracle","runtime","oracleforms","form-designer","form-generator"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12445021,"title":"What is Form Designer, Form Generator and Form Runtime in Oracle Forms?","body":"<p>I am little bit confused about the following topics which are related to Oracle Forms</p>\n\n<ol>\n<li>Form Designer</li>\n<li>Form Generator</li>\n<li>Form Runtime or Run Form </li>\n</ol>\n\n<p>Form Designer: A forms designer provides design-time services and a facility for developers to design forms. The designer host works with the design-time environment to manage designer state, activities (such as transactions), and components. In addition, there are several concepts relating to the components themselves that are important to comprehend. </p>\n\n<p>Now I am looking for the definition Form Generator &amp; Form Runtime.</p>\n"},{"tags":["c#","java","oracle","stored-procedures"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12595569,"title":"Generic Insert Stored Procedure","body":"<p>I have created generic insert code for database insert in C# (for datatype like text date number etc not for all datatypes)\nnow I m planning to write generic insert stored procedure in oracle\nMy question is that \"is there anything that we can do with programming languages like C# or JAVA that we cant do with stored procedures for generic insert statement\"\nalso please suggest if anybody has already done that. </p>\n"},{"tags":["oracle","metadata","dblink"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":3533,"score":2,"question_id":1636154,"title":"Copying metadata over a database link in Oracle 10g","body":"<p>Thanks in advance for your help experts.</p>\n\n<p>I want to be able to copy over database objects from database A into database B with a procedure created on database B.</p>\n\n<p>I created a database link between the two and have tweaked the get_ddl function of the dbms_metadata to look like this:</p>\n\n<pre><code>create or replace function GetDDL\n   (\n      p_name in MetaDataPkg.t_string\n      p_type in MetaDataPkg.t_string\n\n   )\n      return MetaDataPkg.t_longstring\n   is\n      -- clob\n      v_clob clob;\n\n      -- array of long strings\n      c_SYSPrefix        constant char(4)  := 'SYS_';\n      c_doublequote      constant char(1)  := '\"';   \n      v_longstrings metadatapkg.t_arraylongstring;\n      v_schema      metadatapkg.t_string;\n      v_fullength   pls_integer := 0;\n      v_offset      pls_integer := 0;\n      v_length      pls_integer := 0;\n\n   begin\n\n        SELECT DISTINCT OWNER\n        INTO v_schema\n        FROM all_objects@ENTORA\n        where object_name = upper(p_name);\n\n      -- get DDL\n      v_clob := dbms_metadata.get_ddl(p_type, upper(p_name), upper(v_schema));\n\n      -- get CLOB length\n      v_fullength := dbms_lob.GetLength(v_clob);\n\n      for nIndex in 1..ceil(v_fullength / 32767)\n      loop\n         v_offset := v_length + 1;\n         v_length := least(v_fullength - (nIndex - 1) * 32767, 32767);\n\n         dbms_lob.read(v_clob, v_length, v_offset, v_longstrings(nIndex));\n\n\n          -- Remove table’s owner from DDL string:\n\n         v_longstrings(nIndex) := replace(\n            v_longstrings(nIndex),\n            c_doublequote || user || c_doublequote || '.',\n            ''\n         );\n\n\n          -- Remove the following from DDL string:\n          -- 1) \"new line\" characters (chr(10))\n          -- 2) leading and trailing spaces\n\n         v_longstrings(nIndex) :=\n         ltrim(rtrim(replace(v_longstrings(nIndex), chr(10), '')));         \n      end loop;\n\n      -- close CLOB\n      if (dbms_lob.isOpen(v_clob) &gt; 0)\n      then\n         dbms_lob.close(v_clob);\n      end if;\n\n      return v_longstrings(1);\n\n   end GetDDL;\n</code></pre>\n\n<p>so as to remove the schema prefix that usually comes with metadata.\nI get a null value whenever I run this function over the database link with the following queries.</p>\n\n<p>select getddl( 'TABLE', 'TABLE1') \nfrom user_tables@ENTORA\nwhere table_name = 'TABLE1';</p>\n\n<p>select getddl( 'TABLE', 'TABLE1') \nfrom dual@ENTORA;</p>\n\n<p>t_string       is varchar2(30)\n t_longstring   is varchar2(32767) \nand  type t_ArrayLongString is table of t_longstring</p>\n\n<p>I would really appreciate it if any one could help. Many thanks.</p>\n"},{"tags":["sql","sql-server","oracle","ssis"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12595578,"title":"SP_HELPTEXT in Oracle","body":"<p>I am using SSIS to connect to ORACLE database and i want to view TEXT for some view. I followed this <a href=\"http://marikoonnet.blogspot.com/2010/03/sphelptext-in-oracle.html\" rel=\"nofollow\">link</a> but its giving me invalid syntax error.</p>\n\n<pre><code>SET LINESIZE 132\nSET LONG 4000\nSELECT TEXT FROM ALL_SOURCE WHERE NAME = 'YOUR_PROCEDURE_NAME'\n</code></pre>\n\n<p>Please suggest any other alternative.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Meanwhile i have checked for another option </p>\n\n<pre><code>select TEXT from ALL_VIEWS where view_name = 'YOUR_PROCEDURE_NAME'\n</code></pre>\n\n<p>This is getting sucessfully parsed but ORA -24374 define not done before error is coming</p>\n"},{"tags":["asp.net","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12568192,"title":"asp.net multiple ref cursors, but some are empty","body":"<p>I've Googled this extensively but haven't found anything that addresses my issue.  I have a program which executes a complex Oracle stored procedure that returns 5 ref cursors.  This all works fine, but I've run into some cases where one or the other of the cursors are empty, i.e. the select statements in the sp returned no rows.  When this happens, what was returned as <code>table4</code> in the dataset when all cursors returned some data now becomes <code>table3</code>, (when there was no data found for the third cursor) for example.  This was certainly not expected behavior - I would have thought that I would have received  all 5 tables, but one would have no rows.</p>\n\n<p>I'm using .Net 4.0 and Oracle 11g and the 11g ODP.NET drivers.  </p>\n\n<p>I can post code if necessary, but I wonder if someone could confirm that this is expected behavior and maybe post some suggestions as to the best way of handling it.</p>\n\n<p>Subsequent research reveals:</p>\n\n<p>I was following along with some of the Microsoft examples which had you do the following:</p>\n\n<ol>\n<li>Create db connection</li>\n<li>Create Command object(using connection)</li>\n<li>Add command parameters</li>\n<li>Create data adapter(passing command object)</li>\n<li>Create dataset</li>\n<li>Invoke data adapter fill method(with dataset as argument)</li>\n<li>Use dataset tables to access ref cursor data</li>\n</ol>\n\n<p>The way to do this if not all your cursors will return data is to:</p>\n\n<ol>\n<li>Follow steps 1-3 then</li>\n<li>Do a <code>command.ExecuteNonQuery</code></li>\n<li><p>For each ref cursor, </p>\n\n<p><code>Dim</code> a new table, say <code>tbl1</code></p>\n\n<p>create a variable, say <code>refc</code> as <code>OracleRefCursor = command.parameters(\"cursor1\").value</code></p>\n\n<p>if not <code>refc.isNull</code> then <code>tbl1.load(refc.GetDataReader)</code></p></li>\n</ol>\n\n<p>The result of this is that you have exactly as many tables as ref cursors, even though a table might not have any rows.</p>\n\n<p>Microsoft should warn you about this behavior, as it is certainly not what I expected.</p>\n"},{"tags":["vb.net","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":624,"score":0,"question_id":8117688,"title":"VB.net / Oracle select statement from textbox input into datagrid","body":"<p>I have a textbox and a datagrid.  I am trying to enter a last name into the textbox and have that return the entire record from that last name into the datagrid from an oracle database.  The code below currently returns all records in the table and is not searching by the last name.   </p>\n\n<pre><code>Public Class Form1\n\nPrivate Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click\n\n    Dim myString As String\n    Dim myArg As String\n    Dim mysql As String\n    Dim myConn As New OleDb.OleDbConnection()\n\n    ' Create new connection\n    myString = \"Provider=msdaora;Data Source=XXXX;User Id=XXXX;Password=XXXX;\"\n    myConn.ConnectionString = myString\n    myArg = TextBox1.Text\n    mysql = \"select * from table1 where lastname like '%'\"\n    Try\n        myConn.Open()\n    Catch ex As Exception\n        MessageBox.Show(ex.Message)\n    End Try\n\n    Dim myDataadapter As New OleDb.OleDbDataAdapter(mysql, myConn)\n\n    Dim myDs As New DataSet\n\n    myDataadapter.Fill(myDs, \"customer\")\n\n    Dim prmLName As New OleDb.OleDbParameter()\n    prmLName.Direction = ParameterDirection.Input\n    prmLName.Size = \"10\"\n    prmLName.Value = TextBox1.Text\n\n\n    DataGridView1.DataSource = myDs\n    DataGridView1.DataMember = \"customer\"\nEnd Sub\nEnd Class\n</code></pre>\n"},{"tags":["java","oracle","timestamp"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":12590128,"title":"Problems with Date manipulation","body":"<p>I am getting 2 timestamps from the Oracle database start and end dates. They come in this format<code>yyyy-MM-dd HH:mm:ss.SSS</code></p>\n\n<p>Now I am getting another timestamp for comparison from a text file. It's in String format. Below is the code that I have written to extract the required info.</p>\n\n<pre><code>    DateFormat f = new SimpleDateFormat(\"EEE MMM dd HH:mm:ss zz yyyy\");\n    Date date = f.parse(\"Tue Aug 23 20:00:03 PDT 2011\");\n    System.out.println(\"---date----\" + f.format(date));\n    String originalDate = f.format(date);\n    System.out.println(\"---originalDate----\" + originalDate);\n\n    DateFormat f2 = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss.SSS\");\n    String dateParse = f2.format(date);\n    System.out.println(\"---dateParse----\"+dateParse);\n</code></pre>\n\n<p>The output that I am getting is a little strange and is very inconsistent. Below is sample\n     ---date----Tue Aug 23 20:00:03 PDT 2011\n     ---originalDate----Tue Aug 23 20:00:03 PDT 2011\n     ---dateParse----2011-08-24 08:30:03.000</p>\n\n<p>In the above output I am interested in the ----dateparse--- value as I need this for comparison.\nNow if you see the values are varying in the ideal case both should be same value.</p>\n\n<p>The issue here is if the output varies with the timezone then how am I supposed to do comparison in the code from the data that is fetched from the database? </p>\n\n<p>I just need to see if --dateparse-- lies between the date ranges that I get from db.\nWill this code work properly independent of the timezone or there is some issue here.\nIf the date is varying then my comparison can go wrong or is it the correct way with the above 2 outputs.</p>\n\n<p>Can you please let me know how I can resolve this issue.</p>\n"},{"tags":["sql","oracle","ora-00054"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":133,"score":0,"question_id":12584303,"title":"SQL Developer - Delete 90,000 rows","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3075738/ora-00054-resource-busy-and-acquire-with-nowait-specified\">ORA-00054: resource busy and acquire with NOWAIT specified</a>  </p>\n</blockquote>\n\n\n\n<p>I have a table in sql dev that I want to clear all data from. There are about 90,000+ rows. I just want to delete data and not the table.</p>\n\n<p>Everything I've tried hasn't worked ie DELETE *, TRUNCATE. I keep running into</p>\n\n<blockquote>\n  <p>ORA-00054: resource busy and acquire with NOWAIT specified or timeout expired </p>\n</blockquote>\n\n<p>error</p>\n"},{"tags":[".net","sql","database","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12594755,"title":"Group by query - Not a single group by function?","body":"<p>I have a table like this </p>\n\n<pre><code>column1 column2 column3\n\nabc      xyz      4\ndef      ghi      3\nabc      xyz      6\nabc      xyz      1\njkl      mno      4\n</code></pre>\n\n<p>Expected Result after query</p>\n\n<pre><code>column1 column2 column3\n\nabc      xyz      11\ndef      ghi      3\njkl      mno      4\n</code></pre>\n\n<p>My Query is like below:</p>\n\n<pre><code>select column1, column2, count(column3)\nfrom\n    (select ......) as column1, \n    (select ......) as column2, \n    (select ......) as column3) \ngroup by column1, column2, count(column3)\n</code></pre>\n\n<p>I get this error \"not a single-group group function\"</p>\n"},{"tags":["linux","oracle","node.js"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12594879,"title":"node.js 0.8.9 oracle db driver not installing","body":"<p>I'm trying to install an oracle driver for node on Ubuntu 12.04 LTS and getting the following:</p>\n\n<blockquote>\n  <p>$ npm install oracle npm http GET <a href=\"http://registry.npmjs.org/oracle\" rel=\"nofollow\">http://registry.npmjs.org/oracle</a> npm\n  http 304 <a href=\"http://registry.npmjs.org/oracle\" rel=\"nofollow\">http://registry.npmjs.org/oracle</a> npm \n  http GET</p>\n</blockquote>\n\n<p>Snipped some URLs cause I'm a new poster</p>\n\n<blockquote>\n  <p>oracle@0.1.3 install /export/home/kjay/node_modules/oracle\n   node mnm.js build</p>\n  \n  <p>path.existsSync is now called <code>fs.existsSync</code>.\n  [1/5] cxx: src/outParam.cpp -> build/Release/src/outParam.o [2/5] cxx:\n  src/connection.cpp -> build/Release/src/connection.o\n  /export/home/kjay/node_modules/oracle/src/connection.cpp: In static\n  member function âstatic v8::Handle\n  Connection::Execute(const v8::Arguments&amp;)â:\n  /export/home/kjay/node_modules/oracle/src/connection.cpp:66:27: error:\n  cannot convert âuv_loop_t* {aka uv_loop_s*}â to âuv_handle_t* {aka\n  uv_handle_s*}â for argument â1â to âvoid uv_ref(uv_handle_t*)â</p>\n</blockquote>\n\n<p>And so on.</p>\n\n<blockquote>\n  <p>$ node --version v0.8.9 </p>\n  \n  <p>$ uname -a Linux whatevs 3.2.0-25-generic #40-Ubuntu SMP Wed May 23 20:30:51 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux</p>\n</blockquote>\n\n<p>I've install instantclient 11.2, set the OCI_INCLUDE_DIR and OCI_LIB_DIR to what I think are the appropriate values. \nI see some other people have experience very similar errors for other packages:</p>\n\n<pre><code>    https://github.com/schakko/node-usb/issues/15\n</code></pre>\n\n<p>Has anyone seen similar issues for this oracle driver, and/or know of a fix? \nIt seems surprising that the Oracle driver would be broken...</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":12593477,"title":"Oracle SQL- Getting \"Distinct\" values within a \"CASE\" query","body":"<p>I have the following query in ORACLE SQL:</p>\n\n<pre><code>Select\nTrunc(Cs.Create_Dtime),\nCount(Case When Cs.Cs_Listing_Id Like '99999999%' Then (Cs.Player_Id) End) As Sp_Dau, \nCount(Case When Cs.Cs_Listing_Id Not Like '99999999%' Then (Cs.Player_Id) End) As Cs_Dau\nFrom\nPlayer_Chkin_Cs Cs\nWhere\nTrunc(Cs.Create_Dtime) &gt;= To_Date('2012-Jan-01','yyyy-mon-dd')\nGroup By Trunc(Cs.Create_Dtime)\nOrder By 1 ASC\n</code></pre>\n\n<p>I added \"Distinct\" just before \"case\" for each count. I just want to make sure that this only returns all of the distinct player_Ids in each case. Can some one confirm? Thank you! Here is the final query:</p>\n\n<pre><code>Select\nTrunc(Cs.Create_Dtime),\nCount(Distinct Case When Cs.Cs_Listing_Id Like '99999999%' Then (Cs.Player_Id) End) As      Sp_Dau,\nCount(Distinct Case When Cs.Cs_Listing_Id Not Like '99999999%' Then (Cs.Player_Id) End)     As Cs_Dau\nFrom\nPlayer_Chkin_Cs Cs\nWhere\nTrunc(Cs.Create_Dtime) &gt;= To_Date('2012-Jan-01','yyyy-mon-dd')\nGroup By Trunc(Cs.Create_Dtime)\nOrder By 1 ASC;\n</code></pre>\n"},{"tags":["sql","oracle","oracle9i"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12593776,"title":"Oracle SQL: Joining another table with one missing tuple","body":"<p>I have the following two tables, one stores order information, one stores key|value information.</p>\n\n<p>There is no <code>CD = D</code> for key <code>COLOR_CD</code>. I would like to join both tables to get all orders irregardless of the key|value pair not found in the <code>MASS_DECODE</code> table.</p>\n\n<p>Can i get some help please :D</p>\n\n<p>ORDER_INFORMATION</p>\n\n<pre><code>ORDER_NUMBER    |COLOR_CD   |\n----------------|-----------|\n1               |A          |\n2               |B          |\n3               |C          |\n4               |D          |\n</code></pre>\n\n<p>MASS_DECODE</p>\n\n<pre><code>KEY         |CD             |VALUE      |\n------------|---------------|-----------|\nCOLOR_CD    |A              |Green      |\nCOLOR_CD    |B              |Blue       |\nCOLOR_CD    |C              |Red        |\nSIZE_CD     |A              |Large      |\nSIZE_CD     |B              |Medium     |\nSIZE_CD     |C              |Small      |\n</code></pre>\n\n<p>SQL:</p>\n\n<pre><code>select order_number, cd, value\nfrom order_information\nleft outer join mass_decode \non (color_cd = cd)\nand key = 'COLOR_CD';\n</code></pre>\n\n<p>Outcome:</p>\n\n<pre><code>ORDER_NUMBER    |CD         |VALUE      |\n----------------|-----------|-----------|\n1               |A          |Green      |\n2               |B          |Blue       |\n3               |C          |Red        |\n</code></pre>\n\n<p>Expected:</p>\n\n<pre><code>ORDER_NUMBER    |CD         |VALUE      |\n----------------|-----------|-----------|\n1               |A          |Green      |\n2               |B          |Blue       |\n3               |C          |Red        |\n4               |D          |NULL       |\n</code></pre>\n\n<p><strong>EDIT</strong>: I am sorry i have presented incorrect information for my tables. Since been corrected.</p>\n"},{"tags":["sql","oracle","plsql","oracle10g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12593243,"title":"Dummy Update(any DML) command for Oracle for testing","body":"<p>I would like to know if it is possible to write dummy update command for Oracle for sake of unit testing.</p>\n\n<p>Something similar to </p>\n\n<pre><code>        SELECT * FROM DUAL\n</code></pre>\n"},{"tags":["sql","oracle","view"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12593838,"title":"How to handle exception for creating the SQL View in Oracle ?","body":"<p>When I run the following SQL to create a View in a database of 3000 records,\nit can work,\nbut when I run this in a larger database for 9000 records , ORA 01256 and other exceptions mentioning not enough temp spaces and memory are generated after executing for a long time.</p>\n\n<p>If I just run the SQL query starting from the select , it works .. What is happening actually?</p>\n\n<pre><code>   CREATE OR REPLACE FORCE VIEW \"PM\".\"LOCATION_TEST\" (\"GROUPA_TYPE\",               \n   \"GROUPA_FOLDER_ID\", \"GROUPA_FOLDER_NAME\", \"GROUPB_TYPE\", \"GROUPB_FOLDER_ID\",  \n   \"GROUPB_FOLDER_NAME\", \"GROUPC_TYPE\", \"GROUPC_FOLDER_ID\", \"GROUPC_FOLDER_NAME\", \n   \"GROUPD_TYPE\", \"GROUPD_FOLDER_ID\", \"GROUPD_FOLDER_NAME\", \"GROUPE_TYPE\", \n    \"GROUPE_FOLDER_ID\", \"GROUPE_FOLDER_NAME\") AS \n      select distinct \"GROUPA_TYPE\",\"GROUPA_FOLDER_ID\",\"GROUPA_FOLDER_NAME\",\n    \"GROUPB_TYPE\",\"GROUPB_FOLDER_ID\",\"GROUPB_FOLDER_NAME\",\"GROUPC_TYPE\",\n    \"GROUPC_FOLDER_ID\",\"GROUPC_FOLDER_NAME\",\"GROUPD_TYPE\",\"GROUPD_FOLDER_ID\",\n    \"GROUPD_FOLDER_NAME\",\"GROUPE_TYPE\",\"GROUPE_FOLDER_ID\",\"GROUPE_FOLDER_NAME\"\n      from\n       (\n      select  parent_4.*,   product.ftype as groupe_type , customer_folder.customer_folder_id    \n     as groupe_folder_id  , customer_folder.folder_name  as groupe_folder_name\n      from \n     customer_folder\n     left join  product\n    on customer_folder.customer_folder_ID  = product.folder_id\n       right join \n     (\n     select parent_3.*,  product.ftype as groupd_type ,  customer_folder.customer_folder_id as       \n   groupd_folder_id  , customer_folder.folder_name  as groupd_folder_name\n   from \n    customer_folder\n    left join  product\n    on customer_folder.customer_folder_ID  = product.folder_id\n   right join \n    (\n    select parent_2.*,  product.ftype as groupc_type ,  customer_folder.customer_folder_id as         groupc_folder_id  , customer_folder.folder_name  as groupc_folder_name\n     from \n     customer_folder\n    left join  product\n     on customer_folder.customer_folder_ID  = product.folder_id\n     right join \n      (\n       select  parent_1.*,  product.ftype as groupb_type ,    \n        customer_folder.customer_folder_id           \n       as groupb_folder_id, customer_folder.folder_name as groupb_folder_name\n         from \n              customer_folder\n          left join  product\n           on customer_folder.customer_folder_ID  = product.folder_id\n               right join \n                  (\n                select  product.ftype as groupa_type ,  customer_folder_id as   \n                groupa_folder_id, folder_name as groupa_folder_name\n                     from customer_folder\n                left join  product\n                  on customer_folder.customer_folder_ID  = product.folder_id\n                  where parent_folder_id = 1\n\n                    ) parent_1\n                   on\n               customer_folder.parent_folder_id = parent_1.groupa_folder_id  ) parent_2\n                  on\n                customer_folder.parent_folder_id = parent_2.groupb_folder_id ) parent_3\n                   on\n                   customer_folder.parent_folder_id = parent_3.groupc_folder_id  ) parent_4\n                        on\n                         customer_folder.parent_folder_id = parent_4.groupd_folder_id );\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":12593642,"title":"SQL Oracle - Want to add another \"like\" condition to a case","body":"<pre><code>I have the following query:\n\nSelect \nCount(Distinct Case When Play.Uuid Like ('i~%') Then Tap.Player_Id End) As Tapjoy_Ios\nFrom\nPlayer_Tapjoy Tap\nInner Join \nPlayer Play \nOn \nTap.Player_Id = Play.Player_Id\nWhere \nTrunc(Tap.Create_Dtime) &gt;= To_Date('2012-Jan-01','yyyy-mon-dd')\n</code></pre>\n\n<p>I want to add another like constrain so that the result comes out where play.uuid like ('i~%' or 'ti~%')..but that doesn't seem to work. How could I implement this?</p>\n"},{"tags":["database","oracle","free","desktop-application"],"answer_count":7,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":8110,"score":9,"question_id":820077,"title":"Free desktop client for Oracle?","body":"<p>Which is the best <del>Open Source</del> free client for querying an Oracle database? \nIt may additionally support other databases (MySQL, Postgres etc), since our development environment often requires switching between different databases.</p>\n"},{"tags":["oracle","gui","ubuntu","oracle-xe","database-administration"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":4015,"score":0,"question_id":5265802,"title":"Oracle 10g express GUI client?","body":"<p>Are there any free Oracle 10g express GUI clients? I'd be looking for an app that has similar functionality to phpMyAdmin.</p>\n"},{"tags":["oracle","gui","osx","ssh","client"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1428,"score":2,"question_id":4348244,"title":"Oracle gui interface for mac","body":"<p>Let me preface with saying that I'm used to using Sequel Pro on a mac for doing my database administration (table creation and inline data editing). </p>\n\n<p>I have now been asked to do some oracle work as well and I'm looking for an Oracle client that has much the same feature set as Sequel Pro.</p>\n\n<p>I must be able to ssh first and log into the database second. Edit data in a table view and be able to run queries easily.</p>\n\n<p>The only product I've found on my own has been navicat.  However its workflow has been driving me up a wall.  :)</p>\n\n<p>Any recommendations?  keeping under 500 bucks would be nice... I know about Toad but it's wickedly expensive and I'd like to hold off on asking for that if there is an adequate substitute. :)</p>\n\n<p>Thank you,</p>\n\n<p>-=Bryan</p>\n"},{"tags":["mysql","sql-server","oracle","postgresql"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":388,"score":5,"question_id":11246548,"title":"Heterogeneous database connection","body":"<p>I am a student, major in database management. On my 5th semester, we are required to create a system using heterogeneous database. We must use at least 4 different database. My choice would be MySQL, MS SQL Server, Oracle and PostgreSQL since these are among the most popular and matured database. </p>\n\n<p>The problem is that so far, no group has ever manage to connect to 4 different database. I have heard that using Java hibernate spring could connect to different database, but I am trying to connect to different database on the database level, not on the application level. Using something like Oracle's database link. But as far as I know, MySQL does not have this feature.</p>\n\n<p>If in the industry, what are the common ways to deal with heterogeneous database? Or is there any standard library for me to do this? I hope to get some guide on how should I deal with heterogeneous database using the industry standard</p>\n"},{"tags":["oracle","sql-server-2008-r2","service-broker"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":12401628,"title":"Microsoft Service Broker like queuing System in Oracle?","body":"<p>We have implemented and used Service Broker in \"SQL Server 2008R2\". Now we are planning to migrate SQL Database to Oracle. <br>\n<strong>So do Oracle have queuing system like MSServiceBroker?</strong></p>\n"},{"tags":["sql","oracle","query","database-partitioning"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":148,"score":0,"question_id":9425421,"title":"How can I write a query for Partitioned SQL tables?","body":"<p>Here is my Create tabled and partition query:\nHow can I insert Data into my Partitioned tables? AND\nHow can I make a select statement that displays ROWID , ID, TITLE, PUBID and PUBDATE for all rows of data in my lab6_zl table I created.</p>\n\n<pre><code>create table lab6_zl (\nID number not null, \nTITLE varchar2(40), \nPUBID char(3), \nPUBDATE date,\nconstraint lab6_pk primary key(ID))\nPartition by range (pubdate)\n(\nPartition p1 values less than (to_date('01-JAN-2000','DD-MON-YYYY')),\nPartition p2 values less than (to_date('01-JAN-2010','DD-MON-YYYY')),\nPartition p3 values less than (MAXVALUE)\n)\n</code></pre>\n"},{"tags":["java","oracle","hibernate","jboss-4.2.x","dialect"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":227,"score":1,"question_id":12486722,"title":"JBOSS deployment having HibernateException on oracle major version 11","body":"<p>Trying to deploy application ear file with following settings in JBoss-4.2.3.GA</p>\n\n<p><strong>jboss-app.xml</strong></p>\n\n<pre><code>&lt;jboss-app&gt;\n    &lt;loader-repository&gt;\n        com.xxxx.xxx:loader=&lt;ear-name&gt;\n      &lt;loader-repository-config&gt;\n        java2ParentDelegation=false\n      &lt;/loader-repository-config&gt;  \n    &lt;/loader-repository&gt;\n&lt;/jboss-app&gt;\n</code></pre>\n\n<p><strong>persistence.xml</strong> (just a snippet)</p>\n\n<pre><code>&lt;property name=\"hibernate.dialect\" value=\"org.hibernate.dialect.Oracle10gDialect\"/&gt;\n&lt;property name=\"hibernate.hbm2ddl.auto\" value=\"validate\"/&gt;\n&lt;property name=\"hibernate.show_sql\" value=\"false\"/&gt;\n&lt;property name=\"hibernate.format_sql\" value=\"false\"/&gt;\n&lt;property name=\"jboss.entity.manager.factory.jndi.name\" value=\"java:/XXXXFactory\"/&gt;\n</code></pre>\n\n<p><strong>Got following logger info during deployment, I am not sure why an exception is listed in an INFO logger, can I not bother about this?</strong></p>\n\n<pre><code>16:30:07,239 INFO  [STDOUT] 16:30:07,238 INFO  [SettingsFactory] JDBC driver: Oracle JDBC driver, version: 11.2.0.3.0\njavax.ejb.EJBException: org.hibernate.HibernateException: unknown Oracle major version [11]\n    at org.jboss.ejb3.tx.Ejb3TxPolicy.handleExceptionInOurTx(Ejb3TxPolicy.java:63)\n    at org.jboss.aspects.tx.TxPolicy.invokeInOurTx(TxPolicy.java:83)\n\n\nCaused by: org.hibernate.HibernateException: unknown Oracle major version [11]\n    at org.hibernate.dialect.DialectFactory$1.getDialectClass(DialectFactory.java:135)\n    at org.hibernate.dialect.DialectFactory.determineDialect(DialectFactory.java:65)\n    at org.hibernate.dialect.DialectFactory.buildDialect(DialectFactory.java:39)\n    at org.hibernate.cfg.SettingsFactory.determineDialect(SettingsFactory.java:426)\n</code></pre>\n\n<p><strong>Note: We are using JBoss-Seam-2.2.0.GA</strong></p>\n\n<p><strong>Tried: <a href=\"http://stackoverflow.com/a/1158045/150371\">this</a>, <a href=\"http://jaitechwriteups.blogspot.com/2008/08/how-to-upgrade-hibernate-in-jboss.html\" rel=\"nofollow\">this</a> and <a href=\"http://smooth-java.blogspot.com/2011/08/fixing-problem-in-hibernate-unknown.html\" rel=\"nofollow\">that</a></strong></p>\n\n<p>Please let me know if any additional information is required, I am trying to pull back the libs available in jboss to the ear.</p>\n\n<p><strong>Update: Tries</strong></p>\n\n<ol>\n<li>Figured out that the application is using 2 different sessions and<br>\nthere is one hibernate.cfg.xml also for another legacy code, there\nis    no dialect specified in it. </li>\n<li>So added Oracle10g dialect to\ncfg.xml, it    stopped throwing above mentioned unknown oracle\nversion error, but it    exceptioned as it couldn't load the\n10gDialect.</li>\n<li>Beauty is both the sessions are pointing to the same datasource.</li>\n</ol>\n"},{"tags":["oracle","plsqldeveloper"],"answer_count":4,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":40981,"score":2,"question_id":852261,"title":"How to create a dump with Oracle PL/SQL Developer?","body":"<p>I need to take dump of a user (including tables, procedures ,etc.) as <code>FILENAME.dmp</code>.</p>\n\n<p>If I create a new user and import that <code>FILENAME.dmp</code>, then everything should be created.</p>\n\n<p>How can I create this dump file?</p>\n\n<p>Don't tel me to use the <code>Run &gt; EXP</code> or <code>Run &gt; IMP</code> functions because, due to some problem, that feature is not working for me.</p>\n"},{"tags":["asp.net","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":12590935,"title":"Linking DB to Website ASP.NET","body":"<p>Im looking for a little insight or maybe a guidance in the right direction to read up on linking my DB (Oracle) to an ASP.NET website. I've done some research but I can't make too much sense out of it. Any suggested ideas/reading suggestions for a beginner?</p>\n"},{"tags":["sql","database","oracle","query","manipulation"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":157,"score":2,"question_id":12392111,"title":"SQL mass string manipulation","body":"<p>I'm working with an oracle DB and need to manipulate a string column within it. The column contains multiple email addresses in this format:</p>\n\n<p>jgooooll@gmail.com;dhookep@gmail.com;amoore@outlook.com</p>\n\n<p>What I want to do is take out anything that does <strong>not</strong> have '@gmail.com' at the end (in this example amoore@outlook.com would be removed) however amoore@outlook.com may be the first email in the next row of the column so in this way there is no real fixed format, the only format being that each address is seperated by a semi-colon.</p>\n\n<p>Is there anyway of implementing this through one command to run through every row in the column and remove anything thats not @gmail.com?  I'm not really sure if this kind of processing is possible in SQL. Just looking for your thoughts!!</p>\n\n<p>Thanks a lot you guys. Look forward to hearing from you!</p>\n"},{"tags":["oracle","query"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":154,"score":0,"question_id":12589937,"title":"ORA-00932 inconsistent datatypes: expected - got BLOB","body":"<p>I have this query I am trying to run but I keep running into this error.  I am trying to do a <code>Where</code> clause that compares the data (BLOB column) to :var2 which is a blob object.</p>\n\n<p>Here is my code.</p>\n\n<pre><code>SELECT max(id) \nINTO :var1\nFROM table_name \nwhere data = :var2;\n</code></pre>\n\n<p>Any suggestions to why I would be getting this <code>ORA-00932</code> error?</p>\n\n<p>I am comparing a <code>blob</code> to a <code>blob column</code>, shouldn't that be fine?</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","oracle","select","clob"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12574341,"title":"Why Do I get OutOfRange Exception in GetOrdinal Function of this CLOB field?","body":"<p>This is the sample of my code.  The field FUNCTION_SCRIPT is a CLOB field (the only CLOB field) in my table IS_FUNCTION</p>\n\n<pre><code>public void ReadFunction(string FName, out string fContent) {\n    OracleCommand command = _connection.CreateCommand();\n    OracleTransaction transaction = _connection.BeginTransaction();\n    command.Transaction = transaction;\n    command.CommandText = \"SELECT TO_CLOB(TO_NCLOB(FUNCTION_SCRIPT)) FROM IS_FUNCTION where FNAME=:fName \";\n    command.Parameters.Add(\"FName\", OracleType.NVarChar).Value = FName;\n    OracleDataReader odr = command.ExecuteReader();\n    int temp = odr.GetOrdinal(\"FUNCTION_SCRIPT\");\n    OracleLob myLob = odr.GetOracleLob(temp);\n    fContent = (String)myLob.Value;\n    odr.close();\n}\n</code></pre>\n\n<p>I get an out of range exception when <code>temp = odr.GetOrdinal(\"FUNCTION_SCRIPT\")</code> statement is executed.  Have no idea why?  I have been trying to read this CLOB field for few hours now. This is the closest I have come. Your help would be highly appreciated.</p>\n\n<p>p.s. Could it be that my SELECT statement is problematic?  I have been taking code from different references.</p>\n"},{"tags":["oracle","plsql","temporary-tables"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12462735,"title":"ORA-14551 when inserting into GTT","body":"<p>I have the following code:</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION repeatable_rand_text(ftype    IN VARCHAR2\n                                              , in_val   IN VARCHAR2)\n    RETURN VARCHAR2 IS\n    workval         VARCHAR2(64);\n    insert_needed   BOOLEAN := FALSE;\nBEGIN\n    BEGIN\n        SELECT new_name\n        INTO   workval\n        FROM   ps_dt_mixnames_preserve\n        WHERE  name_type = ftype AND old_name = in_val;\n\n    EXCEPTION\n        WHEN NO_DATA_FOUND THEN\n            workval := rand_text(ftype);\n            insert_needed := TRUE;\n    END;\n\n    IF insert_needed THEN\n        INSERT INTO ps_dt_mixnames_preserve(name_type, old_name, new_name)\n        VALUES      (ftype, in_val, workval);\n    END IF;\n\n    RETURN workval;\nEND repeatable_rand_text;\n</code></pre>\n\n<p>The purpose of this routine, is to mask names in a database as part of the preparation to create a development database from Production.</p>\n\n<p>We want to mask the names, but we want them to be repeatable so that our result is something like:  (input on the left; output on the right)</p>\n\n<pre><code>JOHN JONES  -&gt; STEEL POTATO\nSAM JONES   -&gt; LARGE POTATO\nMARY JONES  -&gt; WHITE POTATO\nSUE SMITH   -&gt; LARGE CARROT\nFRED JONES  -&gt; RED POTATO\nJOHN SMITH  -&gt; GREEN CARROT\n</code></pre>\n\n<p>You probably get the idea: family name is changed to a random value, but repeats when it is again encountered.  Given name is simply random.  It is the family name that's a concern here.</p>\n\n<p>Arrays and other non-permanent solutions won't work well for us, because this will actually be executed as a large series of UPDATE statements all executed within the same session.  GTT seemed a perfect fit for this type of thing.</p>\n\n<p>Ultimately, we'll want to execute an Update similar to:</p>\n\n<pre><code>UPDATE MY_TABLE\nSET ORIG_NAME = repeatable_rand_text('last', ORIG_NAME)\n</code></pre>\n\n<p>But in an effort to \"prove the results of this routine, we execute the following SQL:</p>\n\n<pre><code>SELECT ORIG_NAME, repeatable_rand_text('last',ORIG_NAME)\nFROM MY_TABLE\n</code></pre>\n\n<p>Now, obviously the INSERT in that function will execute as a result of the SELECT, and that's a no-no.  (And without being able to do that, we're loathe to try the UPDATE that naturally follows.  For all we know, it may fail with a similar message.)  The question is, is there a reasonable way around this scenario?</p>\n"},{"tags":["sql","oracle","query"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":12588258,"title":"how does below query work","body":"<p>Can someone explain me how below query will work.. i have table called employee</p>\n\n<pre><code>id FirstName LastName   Email            Groupid\n1 Paula      Brown    pb@testdomain.org    12\n2 James      Smith    jim@test.co.uk       12\n3 James      Connor   jc@tes.co.uk         13\n\n\nselect * from employee where groupid=12 AND id NOT IN (1) OR id NOT IN (2)\n</code></pre>\n\n<p>how does this query works? Am trying to understand how AND clause works with OR. Any help would be appreciated...</p>\n"},{"tags":["oracle","vb6"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":461,"score":1,"question_id":346033,"title":"VB and Oracle connectivity","body":"<p>What are the steps to connect to Oracle 9i with VB6?  How can I use modules and stored procedures in VB6 and how can I call an SP?</p>\n\n<p>What is the method to use ADO which is helpful to insert, update, search and delete the items from the front end?</p>\n"},{"tags":["sql","oracle","stored-procedures","bulkinsert"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12587315,"title":"Verification of PL/SQL datatypes definition in BULK INSERT logic in procedure in Oracle","body":"<p>I have two tables, DUMMY_REK and DUMMY_REK_LOG. I have written a store procedure to do a BULK insert from DUMMY_REK into DUMMY_REK_LOG. The procedure is running fine but I need to add INDEX BY clause with proper datatype. I am getting errors with the current datatypes definition and hence commented out the same in below code. Can anybody advice me on the correct usage of datatypes?</p>\n\n<pre><code>    CREATE OR REPLACE PROCEDURE BULK_INSERT_REK_LOG \n\n as \n\n\n   TYPE tA IS TABLE OF DUMMY_REK.ID%TYPE;-- INDEX BY NUMBER;\n   TYPE tB IS TABLE OF DUMMY_REK.KEYWORD%TYPE;-- INDEX BY VARCHAR2(256);\n   TYPE tC IS TABLE OF DUMMY_REK.CATEGORY%TYPE;-- INDEX BY VARCHAR2(30);\n   TYPE tD IS TABLE OF DUMMY_REK.LIST_NAME%TYPE;-- INDEX BY VARCHAR2(30);\n   TYPE tE IS TABLE OF DUMMY_REK.EXPIRY_DATE%TYPE;-- INDEX BY DATE;\n   TYPE tF IS TABLE OF DUMMY_REK.SUBMITTED_BY%TYPE;-- INDEX BY NUMBER;\n   TYPE tG IS TABLE OF DUMMY_REK.SUBMITTER_COMMENTS%TYPE;-- INDEX BY VARCHAR2(4000);\n   TYPE tH IS TABLE OF DUMMY_REK.SUBMITTED_TIMESTAMP%TYPE;-- INDEX BY TIMESTAMP(6);   \n   TYPE tI IS TABLE OF DUMMY_REK.DECISIONED_BY%TYPE;-- INDEX BY NUMBER;\n   TYPE tJ IS TABLE OF DUMMY_REK.DECISIONED_COMMENT%TYPE;-- INDEX BY VARCHAR2(4000);\n   TYPE tK IS TABLE OF DUMMY_REK.DECISIONED_TIMESTAMP%TYPE;-- INDEX BY TIMESTAMP(6);\n   TYPE tL IS TABLE OF DUMMY_REK.STATUS_ID%TYPE;-- INDEX BY NUMBER;   \n   TYPE tM IS TABLE OF DUMMY_REK.LAST_UPDATED_TIMESTAMP%TYPE;-- INDEX BY TIMESTAMP(6);   \n   TYPE tN IS TABLE OF DUMMY_REK.IS_DISABLED%TYPE;-- INDEX BY NUMBER;\n   TYPE tP IS TABLE OF DUMMY_REK.KEYWORD2%TYPE;-- INDEX BY VARCHAR2(256);   \n   TYPE tQ IS TABLE OF DUMMY_REK.ACCOUNT_NUMBER%TYPE;-- INDEX BY NUMBER;  \n   TYPE tR IS TABLE OF DUMMY_REK.CUSTOMER_NAME%TYPE;-- INDEX BY VARCHAR2(256);   \n   TYPE tS IS TABLE OF DUMMY_REK.TYPE%TYPE;-- INDEX BY NUMBER;  \n\n    i_keyword_id tA;\n    i_keyword  tB;\n    i_category  tC;\n    i_list_name  tD;\n    i_expiry_date tE;\n    i_submitted_by  tF;\n    i_submitter_comments tG;\n    i_submittedtimestamp tH;\n    i_decisioned_by  tI;\n    i_decisioned_comment  tJ;\n    i_decisioned_timestamp  tK;\n    i_status_id  tL;\n    i_last_updated_timestamp  tM;\n    i_is_disabled  tN;\n    i_keyword2   tP;\n    i_account_number  tQ;\n    i_customer_name   tR;\n    i_type  tS;\n\nBEGIN\n\n\n  SELECT * BULK COLLECT INTO i_keyword_id,i_keyword,i_category,i_list_name,i_expiry_date,i_submitted_by,i_submitter_comments,i_submittedtimestamp,i_decisioned_by,i_decisioned_comment,i_decisioned_timestamp,i_status_id,i_last_updated_timestamp,i_is_disabled,i_keyword2,i_account_number,i_customer_name,i_type FROM DUMMY_REK;\n   FORALL i IN 1 .. 10 \n    INSERT INTO DUMMY_REK_LOG(ID,KEYWORD_ID,KEYWORD,CATEGORY,LIST_NAME,EXPIRY_DATE,USERID,COMMENTS,LOGTIMESTAMP,WORKFLOW_ACTION_ID,WORKFLOW_REASON_ID,FROMSTATUS_ID,TOSTATUS_ID,IS_DISABLED,KEYWORD2,ACCOUNT_NUMBER,CUSTOMER_NAME,TYPE)\n      VALUES(GET_NEXT_ID('DUMMY_REK_LOG'),i_keyword_id(i),i_keyword(i),i_category(i),i_list_name(i),i_expiry_date(i),i_decisioned_by(i),i_decisioned_comment(i),i_decisioned_timestamp(i),null,null,null,null,0,i_keyword2(i),i_account_number(i),i_customer_name(i),i_type(i));\ncommit;     \n\n-- Exception Handling\n            EXCEPTION\n               WHEN OTHERS THEN\n                  -- Rollback\n           ROLLBACK;\n     RAISE;\n\n\nEND BULK_INSERT_REK_LOG;\n</code></pre>\n"},{"tags":["sql","oracle","sorting","oracle10g","varchar2"],"answer_count":5,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":90,"score":5,"question_id":12570026,"title":"Oracle 10g SQL Sorting VARCHAR2","body":"<p>I am having a sorting issue with oracle 10g.  Not sure if it is specific to 10g or not.</p>\n\n<p>I have the following table:</p>\n\n<pre><code>ID  NAME\n 1  A.1\n 2  A.3\n 3  A.4\n 4  A.5\n 5  A.2\n 6  A.5.1\n 7  A.5.2\n 8  A.5.10\n 9  A.5.10.1\n10  A.5.3\n</code></pre>\n\n<p>Performing the generic <code>SELECT NAME FROM table_name ORDER BY 1</code> produces:</p>\n\n<pre><code>A.1\nA.2\nA.3\nA.4\nA.5\nA.5.1\nA.5.10\nA.5.10.1\nA.5.2\nA.5.3\n</code></pre>\n\n<p>I would like it to sort correctly when those sections have numbers greater than 9, like so:</p>\n\n<pre><code>A.1\nA.2\nA.3\nA.4\nA.5\nA.5.1\nA.5.2\nA.5.3\nA.5.10\nA.5.10.1\n</code></pre>\n\n<p>I have way more number entries than this with varying lengths and many sections with number segments greater than 10.  I was trying to mess around with regexp_replace() in the order by clause but have had no luck.  Any help would be greatly appreciated.</p>\n"},{"tags":["visual-studio-2010","oracle","server-explorer"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12587259,"title":"Unable to see Oracle view using Visual Studio Server Explorer","body":"<p>Recently, I attempted to port a web application from Visual Studio 2008 on Windows XP, to Visual Studio 2010 on Windows 7 Professional. This app uses the Oracle-provided <code>Oracle.DataAccess.Client</code> .NET data provider. I had to do this after the system disk on my old XP machine ate flaming death, and I was forced to upgrade both the operating system and the development system. As part of the upgrade, I also installed the latest Data Access Client from Oracle.</p>\n\n<p>I have discovered that Server Explorer on the new Visual Studio development system can connect to the Oracle data base, but will not show the data base view that I have been using in the past. Also, when I attempt to connect to the view from within the application, the connection works, but any attempt to read from the view fails with error ORA-00942: table or view does not exist. This application used to work correctly on the old system, but doesn't work on the new one. Also:</p>\n\n<ul>\n<li><p>Information in the <code>tnsnames.ora</code> file appears to be correct.</p></li>\n<li><p>An entry exists for \"Oracle Data Provider for .NET\" exists in  within the <code>machine.config</code> file.</p></li>\n<li><p>As part of the struggle to get Oracle access running, I installed and uninstalled a couple of different versions of the Oracle Data Provider. Could this have broken something?</p></li>\n<li><p>I have found a related problem discussed, in <a href=\"http://stackoverflow.com/questions/2745151/vs-2010-server-explorer-database-showing-no-tables\">VS 2010 Server Explorer Database Showing No Tables</a>, but none of the solutions discussed there seem to work in this case.</p></li>\n<li><p>Is there some sort of checklist or cheat sheet that completely describes how the Oracle Data Provider should be configured for use?</p></li>\n</ul>\n"},{"tags":["c#","sql","oracle","scripting"],"answer_count":5,"favorite_count":13,"up_vote_count":18,"down_vote_count":0,"view_count":30140,"score":18,"question_id":650098,"title":"How to execute an .SQL script file using c#","body":"<p>I'm sure this question has been answered already, however I was unable to find an answer using the search tool.</p>\n\n<p>Using c# I'd like to run a .sql file. The sql file contains multiple sql statements, some of which are broken over multiple lines. I tried reading in the file and tried executing the file using ODP.NET ... however I don't think ExecuteNonQuery is really designed to do this.</p>\n\n<p>So I tried using sqlplus via spawning a process ... however unless I spawned the process with UseShellExecute set to true sqlplus would hang and never exit. Here's the code that DOESN'T WORK.</p>\n\n<pre><code>Process p = new Process();\np.StartInfo.UseShellExecute = false;\np.StartInfo.RedirectStandardOutput = true;\np.StartInfo.FileName = \"sqlplus\";\np.StartInfo.Arguments = string.Format(\"xx/xx@{0} @{1}\", in_database, s);\np.StartInfo.CreateNoWindow = true;\n\nbool started = p.Start();\np.WaitForExit();\n</code></pre>\n\n<p>WaitForExit never returns .... Unless I set UseShellExecute to true. A side effect of UseShellExecute is that you can no capture the redirected output.</p>\n\n<p>This must be such a common thing to do, I'm hoping someone has a solution to this.</p>\n\n<p>Thanks\nRich</p>\n"},{"tags":["sql","regex","oracle","replace","matching"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":12584261,"title":"Oracle SQL Regexp_replace matching","body":"<p>Here is a funky matching that I need to accomplish.</p>\n\n<p><code>A5.1.9.11.2</code></p>\n\n<p>Needs to become:</p>\n\n<p><code>A05.01.09.11.02</code></p>\n\n<p>The amount of DOT sections will vary from none to many.  And the letter \"A\" will always be there and always be 1 character.</p>\n\n<p>I would like to use the regexp_replace() function in order to use this as a sorting mechanism.  Thanks.</p>\n"},{"tags":["sql","sql-server","oracle","tsql","plsql"],"answer_count":5,"favorite_count":4,"up_vote_count":15,"down_vote_count":0,"view_count":23872,"score":15,"question_id":1201358,"title":"How can I get the number of records affected by a stored procedure?","body":"<p>For <code>INSERT</code>, <code>UPDATE</code> and <code>DELETE</code> SQL statements executed directly against the database, most database providers return the count of rows affected. For stored procedures, the number of records affected is always <code>-1</code>.</p>\n\n<p>How do we get the number of records affected by a stored procedure?</p>\n"},{"tags":["oracle","index"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":12585016,"title":"How to optimize this SELECT with sub query Oracle","body":"<p>Here is my query,</p>\n\n<pre><code>   SELECT ID As Col1,\n   (\n         SELECT VID FROM TABLE2 t \n         WHERE (a.ID=t.ID or a.ID=t.ID2) \n         AND t.STARTDTE =\n         (\n               SELECT MAX(tt.STARTDTE) \n               FROM TABLE2 tt \n               WHERE (a.ID=tt.ID or a.ID=tt.ID2)  AND tt.STARTDTE &lt; SYSDATE\n         )\n   ) As Col2\n   FROM TABLE1 a\n</code></pre>\n\n<p>Table1 has 48850 records and Table2 has 15944098 records.</p>\n\n<p>I have separate indexes in TABLE2 on ID,ID &amp; STARTDTE, STARTDTE, ID, ID2 &amp; STARTDTE.</p>\n\n<p>The query is still too slow. How can this be improved? Please help.</p>\n"},{"tags":["oracle","backup","recovery"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":819,"score":1,"question_id":1428727,"title":"Oracle 10g Backup & Restore","body":"<p>Here is the scenario:</p>\n\n<ol>\n<li>Oracle 10g database running Windows Vista Business.  This is a production/live db.</li>\n<li>Nightly backups (Whole database, online backup, ARCHIVELOG mode) moved to different machine on the network.</li>\n<li>Hard disk dies.</li>\n<li>Setup OS and Oracle 10g on the new hard drive.  Oracle does not have any db instances yet.</li>\n</ol>\n\n<p>Is there an easy (or at least relatively easy) way to restore the database from the backup?\nI'm not an Oracle DBA and my Oracle knowledge is very limited.  I have seen some \"advanced RMAN commands\", but I have no clue what the doc is about.  Is there a 3rd party utility that simplifies the restore process?</p>\n\n<p>If the RMAN scripts are the only way to go, then do I have to create an empty database in Oracle before proceeding?</p>\n\n<p>thanks</p>\n"},{"tags":["xml","oracle"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":63,"score":2,"question_id":12575786,"title":"oracle xmlcast(xmlquery) in subselect","body":"<p>I have a table (Oracle 11.2.0.2) with an xmltype column and other non-xmltype columns. I want to do a select based on the value of some of the non-xmltype columns plus the contents of the xmltype column.</p>\n\n<p>I've tried doing this using xmlquery in my select, but I'm getting some funny results. Here's a reduced version my data: an order table with the username and the order details.</p>\n\n<pre><code>-- create order table\ncreate table orders(username varchar2(20), order_data xmltype);\n\n-- an order entered by jim\ninsert into orders values ('jim', xmltype('\n&lt;ord:order xmlns:ord=\"http://www.blah.com/order/1.0\"&gt;\n   &lt;ord:zip&gt;123&lt;/ord:zip&gt;\n   &lt;ord:date_time&gt;2012-09-24T00:27:00&lt;/ord:date_time&gt;\n   &lt;ord:item&gt;\n      &lt;ord:product&gt;A&lt;/ord:product&gt;\n      &lt;ord:quantity&gt;12&lt;/ord:quantity&gt;\n   &lt;/ord:item&gt;\n   &lt;ord:item&gt;\n      &lt;ord:product&gt;B&lt;/ord:product&gt;\n      &lt;ord:quantity&gt;34&lt;/ord:quantity&gt;\n   &lt;/ord:item&gt;\n&lt;/ord:order&gt;'));\n\n-- an order entered by bob\ninsert into orders values ('bob', xmltype('\n&lt;ord:order xmlns:ord=\"http://www.blah.com/order/1.0\"&gt;\n   &lt;ord:zip&gt;123&lt;/ord:zip&gt;\n   &lt;ord:date_time&gt;2012-09-24T00:27:00&lt;/ord:date_time&gt;\n   &lt;ord:item&gt;\n      &lt;ord:product&gt;A&lt;/ord:product&gt;\n      &lt;ord:quantity&gt;56&lt;/ord:quantity&gt;\n   &lt;/ord:item&gt;\n   &lt;ord:item&gt;\n      &lt;ord:product&gt;C&lt;/ord:product&gt;\n      &lt;ord:quantity&gt;78&lt;/ord:quantity&gt;\n   &lt;/ord:item&gt;\n&lt;/ord:order&gt;'));\n</code></pre>\n\n<p>As an example query, I tried to find all orders entered by Bob which have more than 1 item by doing this:</p>\n\n<pre><code>SELECT username, itemcount\nFROM\n  (SELECT username,\n    XMLCAST(XMLQUERY('count(/*:order/*:item)' PASSING order_data RETURNING CONTENT) AS  NUMBER) itemcount\n  FROM orders\n  )\nWHERE username = 'bob'\nAND itemcount &gt; 1\n</code></pre>\n\n<p>but it doesn't return any results, however if I comment out the last line (AND itemcount > 1) I get:</p>\n\n<pre><code>username | linecount\n--------------------\nbob      |         2\n</code></pre>\n\n<p>...I'm not sure why that is, I thought maybe it wasn't treating it as the correct type but I'm casting it as a number with the xmlcast.</p>\n\n<p>What's more puzzling is if I set the last line to be:</p>\n\n<pre><code>AND itemcount = 2\n</code></pre>\n\n<p>...it disappears again, but if I change it to:</p>\n\n<pre><code>AND itemcount != -7\n</code></pre>\n\n<p>...it reappears in the results, but with a value of zero:</p>\n\n<pre><code>username | linecount\n--------------------\nbob      |         0\n</code></pre>\n\n<p>So, I'm puzzled - I must be doing something wrong but I can't see what it is.</p>\n\n<p>I've found a workaround using xmltable which works fine, so that'll do me:</p>\n\n<pre><code>SELECT username, X.*\nFROM orders,\n  XMLTABLE ( \n      xmlnamespaces ('http://www.blah.com/order/1.0' AS \"ord\" ),\n      '/ord:order' PASSING order_data\n          COLUMNS \n              itemcount number PATH 'count(ord:item)' ) AS X\nWHERE username = 'bob'\nAND itemcount &gt; 1\n</code></pre>\n"},{"tags":["sql","oracle","stored-procedures","plsql","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12583477,"title":"stored functions execution issue","body":"<p>I have a table from where I want get next lowest priority DVDid, give me that as output and delete it from table. I'm doing this by creating a Package...code gets compiled but when I execute it give me error. Any suggestion?</p>\n\n<pre><code>table:\nRENTALQUEUE (MEMBERID, DVDID, DATEADDEDINQUEUE, PRIORITY)\n</code></pre>\n\n<p>Here is the package:</p>\n\n<pre><code>create or replace\nPACKAGE  pk_GET_TITLEID AS\nprocedure sp_GET_TITLEID(memberid_arg IN NUMBER,\ntitleid_arg out number) ;\nend pk_GET_TITLEID;\n\ncreate or replace\npackage body pk_GET_TITLEID as \nprocedure sp_GET_TITLEID \n(memberid_arg IN NUMBER,\ntitleid_arg out number)\n\nIS \nv_priority number;\nbegin\n\nSELECT  MIN(PRIORITY)into v_priority\nFROM RENTALQUEUE \nWHERE memberid = memberid_arg;\n\nDBMS_OUTPUT.PUT_LINE (titleid_arg);\n\nDELETE FROM RENTALQUEUE \nWHERE MEMBERID=memberid_arg AND dvdid=titleid_arg;\n\nEND sp_GET_TITLEID;\nEND PK_GET_TITLEID;\n</code></pre>\n\n<p>Here is how I call it:</p>\n\n<pre><code>execute pk_get_titleid.sp_get_titleid('1');\n</code></pre>\n\n<p>Here is the error:</p>\n\n<pre><code>Error:\n    Error starting at line 403 in command:\n    execute pk_get_titleid.sp_get_titleid('1')\n    Error report:\n    ORA-06550: line 1, column 7:\n    PLS-00306: wrong number or types of arguments in call to 'SP_GET_TITLEID'\n    ORA-06550: line 1, column 7:\n    PL/SQL: Statement ignored\n    06550. 00000 -  \"line %s, column %s:\\n%s\"\n    *Cause:    Usually a PL/SQL compilation error.\n</code></pre>\n"},{"tags":["c#","sql","oracle","select"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":12574508,"title":"How to read a CLOB field into a C# variable?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12574341/why-do-i-get-outofrange-exception-in-getordinal-function-of-this-clob-field\">Why Do I get OutOfRange Exception in GetOrdinal Function of this CLOB field?</a>  </p>\n</blockquote>\n\n\n\n<pre><code>I need to read a CLOB field from an ORACLE table int a C# variable of type String. Does anyone know how to accomplish this task? \n</code></pre>\n\n<p>This is what I have done but I am getting an IndexOutofRange when calculating the GetOrdinal of the field.  Thanks in advance.</p>\n\n<pre><code> public void ReadFunction(string FName, out string fContent) \n{ \n    OracleCommand command = _connection.CreateCommand(); \n    OracleTransaction transaction = _connection.BeginTransaction(); \n    command.Transaction = transaction; \n    command.CommandText = \"SELECT TO_CLOB(TO_NCLOB(FUNCTION_SCRIPT)) FROM IS_FUNCTION where   FNAME=:fName \"; \n    command.Parameters.Add(\"FName\", OracleType.NVarChar).Value = FName; \n    OracleDataReader odr = command.ExecuteReader(); \n    int temp = odr.GetOrdinal(\"FUNCTION_SCRIPT\"); \n    OracleLob myLob = odr.GetOracleLob(temp); \n    fContent = (String)myLob.Value; \n    odr.close(); \n} \n</code></pre>\n"},{"tags":["sql","oracle","plsql","data-modeling"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":75,"score":-1,"question_id":12580224,"title":"sql - table format for monthly wise","body":"<p>I have a data of 300 students monthly wise for an year please suggest me in which table format I have to store that data. I want to compare monthly wise data per each student.</p>\n"},{"tags":["sql","oracle","duplicates"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12581556,"title":"Find duplicated rows that are not exactly same","body":"<p>Can i select all rows that have same column value (for example SSN field) but display them all separably. ?</p>\n\n<p>I've searched for this answer but they all have \"count(*) and group by\" section that demands the rows to be exactly same.</p>\n"},{"tags":["c#","oracle","linqpad"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12576914,"title":"oracle insert / delete problems in linqpad","body":"<p>excuse me if this question already popped up, I haven't found it.</p>\n\n<p>I have a very simple oracle table (11g express if it matters):</p>\n\n<pre><code>desc exch_rate;\nName                           Null   Typ                                                                                                                                                                                           \n------------------------------ -------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \nFROM_CURRENCY                           VARCHAR2(3)                                                                                                                                                                                   \nTO_CURRENCY                             VARCHAR2(3)                                                                                                                                                                                   \nEXCH_DATE                               DATE                                                                                                                                                                                          \nEX_RATE                                 NUMBER(4)                                                                                                                                                                                         \nID                             NOT NULL NUMBER                                                                                                                                                                                        \n\n5 rows selected\n</code></pre>\n\n<p>I'm trying to delete contents of this table with linqpad, so the code is usual combination of <code>ExchRates.DeleteOnSubmit(row)</code> and <code>SubmitChanges();</code> at the end.</p>\n\n<p>but instead of getting empty table I'm getting an error:</p>\n\n<pre><code>InvalidOperationException  \nSequence contains no elements \n\n   at System.Linq.Enumerable.Aggregate[TSource](IEnumerable`1 source, Func`3 func)\n   at IQToolkit.Data.Common.BasicMapper.GetIdentityCheck(Expression root, MappingEntity entity, Expression instance)\n   at IQToolkit.Data.Common.BasicMapper.GetDeleteExpression(MappingEntity entity, Expression instance, LambdaExpression deleteCheck)\n   at IQToolkit.Data.Common.AdvancedMapper.GetDeleteExpression(MappingEntity entity, Expression instance, LambdaExpression deleteCheck)\n   at IQToolkit.Data.Common.QueryBinder.BindDelete(IEntityTable upd, Expression instance, LambdaExpression deleteCheck)\n   at IQToolkit.Data.Common.QueryBinder.VisitMethodCall(MethodCallExpression m)\n   at IQToolkit.ExpressionVisitor.Visit(Expression exp)\n   at IQToolkit.Data.Common.DbExpressionVisitor.Visit(Expression exp)\n   at IQToolkit.Data.Common.QueryBinder.Visit(Expression exp)\n   at IQToolkit.Data.Common.QueryBinder.Bind(QueryMapper mapper, Expression expression)\n   at IQToolkit.Data.Common.QueryMapper.Translate(Expression expression)\n   at IQToolkit.Data.Common.QueryTranslator.Translate(Expression expression)\n   at IQToolkit.Data.EntityProvider.GetExecutionPlan(Expression expression)\n   at IQToolkit.Data.EntityProvider.Execute(Expression expression)\n   at IQToolkit.Updatable.Delete[T](IUpdatable`1 collection, T instance, Expression`1 deleteCheck)\n   at IQToolkit.Updatable.Delete[T](IUpdatable`1 collection, T instance)\n   at IQToolkit.Data.EntityProvider.EntityTable`1.Delete(T instance)\n   at IQToolkit.Data.EntityProvider.EntityTable`1.IQToolkit.IEntityTable.Delete(Object instance)\n   at IQToolkit.Data.EntitySession.TrackedTable`1.SubmitChanges(TrackedItem item)\n   at IQToolkit.Data.EntitySession.TrackedTable`1.IQToolkit.Data.EntitySession.ITrackedTable.SubmitChanges(TrackedItem item)\n   at IQToolkit.Data.EntitySession.&lt;SubmitChanges&gt;b__0()\n   at IQToolkit.Data.DbEntityProvider.DoTransacted(Action action)\n   at IQToolkit.Data.EntitySession.SubmitChanges()\n   at IQDriver.IQContextBase.SubmitChanges()\n</code></pre>\n\n<p>I'm clueless here. I'm using the latest version of IQ driver (2.0.6.0) and version 4.42.01 of LinqPad. any idea what am I doing wrong? I would really like not to give up on LinqPad for the task ;)</p>\n\n<p>Thanks,\nMichal</p>\n"},{"tags":["sql","oracle","table","set-operations"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":12579393,"title":"Extract the different recored in two table","body":"<p>I have two tables - <code>table1</code> and <code>table2</code>.\nBoth tables have the same columns.</p>\n\n<p>I want to extract the record differences - meaning extract records in <code>table1</code> not in <code>table2</code>, and extract records in <code>table2</code> not in <code>table1</code>.</p>\n\n<p>How I can do that by using SQL in oracle Sys?</p>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12580644,"title":"single-row subquery returns more than one row error. Is it my script or my return data?","body":"<p>I need help on creating updating SQL script</p>\n\n<p><strong>TableA</strong></p>\n\n<pre><code>colA    colB    colC    colD    colE\n  a       b       x       g       z \n  b       c       d       g       h \n  c       d       f       g       v  \n  v       f       f       g       f\n  d       a       q       o       a\n</code></pre>\n\n<p><strong>TableB</strong></p>\n\n<pre><code>colA    colB    colC    colD    colE\n  a       b       x       y       a \n  b       c       d       g       b \n  c       d       f       g       c  \n  d       e       s       g       d\n  v       f       f       g       e \n</code></pre>\n\n<p>I need TableB.colE to update to TableA.colE where TableB.colD = TableA.colD\nResult shall be </p>\n\n<p><strong>TableA</strong></p>\n\n<pre><code>colA    colB    colC    colD    colE\n  a       b       x       g       b \n  b       c       d       g       c \n  c       d       f       g       d  \n  v       f       f       g       e\n  d       a       q       o       a\n</code></pre>\n\n<p>I have tried using  </p>\n\n<pre><code>UPDATE TABLEA SET(TABLEA.COLE=TABLEB.COLE) WHERE TABLEA.COLD =  TABLEB.COLD\n</code></pre>\n\n<p>it doesn't work.</p>\n"},{"tags":["oracle","query","schema"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12579767,"title":"Query which will bring table names according column name","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1953239/oracle-column-query-or-search\">Oracle column query or search</a>  </p>\n</blockquote>\n\n\n\n<p>I need a query which will bring name of the tables that contains that column name in oracle.</p>\n\n<p><strong>Example:</strong> Lets say that I have <code>table1</code> with columns <code>(a,b)</code>, <code>table2</code> with columns <code>(b,c)</code> and <code>table3</code> with columns <code>(a,b,c,d)</code> so I need a know which tables contain <code>C</code> column so I need a query which will bring table names, how I can do that ? </p>\n\n<p>Thanks</p>\n"},{"tags":["oracle","listener"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":154,"score":0,"question_id":12564623,"title":"oracle listener supports no service","body":"<p>I am having trouble with my Oracle instance.</p>\n\n<p>I get the following error when I run lsnrctl stat in command prompt. I even confirmed Oracle services running. </p>\n\n<p>The listener supports no services.</p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12580057,"title":"Connect two Oracle Databases","body":"<p>I am not good at English please help me</p>\n\n<p>I have two problems that I need help with.</p>\n\n<p>I have two databases in one Oracle Server at IP 10.10.10.92</p>\n\n<p>Table <code>One</code> has two columns <code>CustumerID</code> and <code>CustumerName</code> (Table One belongs to Database 1 named DB1).\nTable <code>Two</code> has two columns <code>CustumerID</code> and <code>Job</code> (Table Two belong to Database 2 named DB2)</p>\n\n<ol>\n<li><p>If I am using Oracle SQL Developer or TOAD for Oracle to query statements<br/> \nHow can I connect from two table above? </p></li>\n<li><p>If I am Using SQL Server 2005 to link two Oracle Database to query statements<br/>\nHow can I connect from two table above? </p></li>\n</ol>\n\n<p>Do I need to create two linked server or one linked server?</p>\n"},{"tags":["sql","oracle","case","statement","ora-00905"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":120,"score":0,"question_id":12580026,"title":"Missing Keyword (ORA-00905) - Oracle SQL Case Statement","body":"<p>Good morning,</p>\n\n<p>I was wondering if one of you could help me - should be fairly quick I'd imagine; I'm a newbie so prone to missing obvious things.</p>\n\n<p>I have the below statement which is returning the aforementioned 905 error...any ideas?</p>\n\n<p>Thanks in advance.</p>\n\n<pre><code>(CASE CONTACTS.TELEPHONE_NO_DAY\n    WHEN CONTACTS.TELEPHONE_NO_DAY LIKE '07%'\n    THEN CONTACTS.TELEPHONE_NO_DAY\n    ELSE NULL\n    END) TEL_DAY,\n   (CASE CONTACTS.TELEPHONE_NO_EVE\n    WHEN CONTACTS.TELEPHONE_NO_EVE LIKE '07%'\n    THEN CONTACTS.TELEPHONE_NO_EVE\n    ELSE NULL\n    END) TEL_EVE\n</code></pre>\n"},{"tags":["oracle","query","plsql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12577221,"title":"Copy entire values of 2 columns from one table to another ensuring the relationship","body":"<p>I have a table <code>STUDENT</code> with columns <code>st_id,name,age,dept_name</code>. Now I want to create a new table <code>STUDENT_DESC</code> with columns <code>st_id,dept_name,st_desc</code>. So I need to copy all the values of <code>st_id</code> and <code>dept_name</code> to the newly created table <code>STUDENT_DESC</code>. I need to ensure relationship while copying <code>st_id</code> and <code>dept_name</code> , the <code>dept_name</code> should be corresponding to <code>st_id</code>.So how can I do it in PL/SQL?</p>\n"},{"tags":["oracle","plsql","execute-immediate","pipelined-function"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":197,"score":1,"question_id":12578907,"title":"PL/SQL - execute immediate in pipelined function","body":"<p>I want to execute dynamic query in my pipelined function and return results of this query.\nIs it possible to do this?\nPipelined function is convenient for me to achieve good interface for my application cause it behaves like a table.</p>\n\n<p>The function:</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION MyFunction(p_schema VARCHAR2) RETURN MyTableType Pipelined IS\nv_query VARCHAR2(1000);\nBEGIN\n  v_query := 'SELECT * FROM TABLE ('||p_schema||'.somepackage.SomeFunction)'; --SomeFunction is another pipelined function\n  EXECUTE IMMEDIATE v_query;\n  --Results of the v_query are compatible with MyTableType's row type. But how to return them from pipelined function?\nEND;\n</code></pre>\n"},{"tags":["sql","oracle","query"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12578210,"title":"How to address column names with spaces in oracle, when the query is already inside double quotes?","body":"<p>I've a query like this, which is already in double quotes.</p>\n\n<pre><code>result = db.Query(\"SELECT ACTUAL_N_WELLS, TARGET_N_WELLS, YTD ACTUAL AS YTD_ACTUAL, \nYTD BUDGET AS YTD_BUDGET, (CONVERT(DATETIME,PERIOD,112)) AS DATES \nFROM DASH_GL_DRILLING_PERF\n WHERE ASSET_NAME='Bab &amp; Gas Asset' \nAND (  to_date(DASH_GL_DRILLING_PERF.PERIOD,'yyyy/mm/dd') &gt; \n(SELECT add_months(max(to_date(DASH_GL_DRILLING_PERF.PERIOD,'yyyy/mm/dd')),-3) \nfrom DASH_GL_DRILLING_PERF))\");\n</code></pre>\n\n<p>In this the column \"YTD ACTUAL\" and \"YTD BUDGET\" have spaces, but since the query is already inside double quotes, how do I write the column names? How can I escape the double quotes in this case?</p>\n"},{"tags":["database","oracle","index","contains"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":116,"score":2,"question_id":12033722,"title":"Oracle ctxcat.context contains exhibits strange behavior on certain search parameters","body":"<p>In Oracle Database 10g and Oracle Database Express Edition 11g I have encountered some strange behavior. I have a column that is indexed as a ctxsys.context type index. When I query the table for results with a contains function, it works except when the value I'm searching for is 'Still'. Then it returns no results. When I search for the same data with a column like 'Still' I get results normally. If I search for 'Jazz' using contains, then I get results normally.</p>\n\n<p>Below is sql I used for reproducing this behavior on a newly created test table.</p>\n\n<pre><code>-- Setup the table with an index and some data\ncreate table \"STILL_TEST\" (\n    \"ID\" number(22,0) primary key,\n    \"PROF_DATA_15\" varchar2(255 char),\n    \"OTHER\" varchar2(255 char),\n    \"SHORTER\" varchar2(100 char)\n);\ninsert into \"STILL_TEST\" values (1, 'Still', 'Still', 'Still');\ninsert into \"STILL_TEST\" values (3, 'Jazz', 'Jazz', 'Jazz');\nCREATE INDEX \"STILL_TEST_PROF_DATA_15\" ON \"STILL_TEST\" (\"PROF_DATA_15\")\n   INDEXTYPE IS \"CTXSYS\".\"CONTEXT\" PARAMETERS ('SYNC (ON COMMIT)');\ncommit;\n\n-- Now query it a bit. See how both types of queries work if the\n-- parameter is 'Jazz'\nselect * from \"STILL_TEST\" where prof_data_15 like 'Jazz';\nselect * from \"STILL_TEST\" where contains(prof_data_15, 'Jazz') &gt; 0;\nselect * from \"STILL_TEST\" where prof_data_15 like 'Still';\n-- So far so good, but why doesn't this next query return any results?\nselect * from \"STILL_TEST\" where contains(prof_data_15, 'Still') &gt; 0;\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":12578166,"title":"How to update one SQL reference from one column","body":"<p>I have the below table I need all value from colE to update to colA is it possible to do it with one SQL?</p>\n\n<p><strong>TableA</strong></p>\n\n<pre><code>colA    colB    colC    colD    colE\n a       b       x       y       z\n b       c       d       f       h\n c       d       f       w       v\n v       f       f       f       f\n</code></pre>\n\n<p>to update <code>colA</code> with value from <code>colE</code> </p>\n\n<p><strong>TableA</strong></p>\n\n<pre><code>colA    colB    colC    colD    colE\n z       b       x       y       z\n h       c       d       f       h\n v       d       f       w       v\n f       f       f       f       f\n</code></pre>\n"},{"tags":["oracle","oracle10g","oracle11g","oracle9i"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":40,"score":0,"question_id":12578077,"title":"Oracle Architecture","body":"<p>Would anyone please help me to let me know about oracle database architecture with details ? I am beginner of oracle world. Want to be a class PL/SQL coder. So i can't realize from where I have to start. So it is requested to all for proper guideline and resources.</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":81,"score":4,"question_id":12574094,"title":"Ad hoc queries against high cardinality columns","body":"<p>How to improve the performance of ad hoc queries against tables having hundreds of high cardinality columns and millions of records? </p>\n\n<p>In my case, I have a table with one indexed <code>DATE</code> column <code>SDATE</code>, one <code>VARCHAR2</code> column <code>NE</code> and 750 numeric columns most of them high cardinality columns with values in the range of <code>0 to 100</code>. The table is updated with almost <code>20000</code> new records every hour. The queries against this table look like:</p>\n\n<pre><code>SELECT * FROM TAB WHERE SDATE BETWEEN :SDATE AND :EDATE AND V1 &gt; :V1 AND V3 &lt; :V3\n</code></pre>\n\n<p>or </p>\n\n<pre><code>SELECT * FROM TAB WHERE SDATE BETWEEN :SDATE AND :EDATE AND NE = :NE AND V4 &gt; :V4\n</code></pre>\n\n<p>etc.</p>\n\n<p>So far, I have always advised users not to enter big interval dates so as to put a limit on the number of records resulted from the date index access path; however, from time to time it becomes necessary to specify bigger intervals. </p>\n\n<p>If <code>V1, V2, ..., V750</code> were all low cardinality columns, I would have been able to utilize bitmap indexes. Unfortunately they are not.</p>\n\n<p>What's the advice on this? How should I tackle this problem?</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","asp.net","database","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12570064,"title":"Connecting Database oracle with ASP.NET(C#)","body":"<p>Can someone please give me some idea how to connect database oracle with asp.net(C#)?\nDeveloper IDE I used are :</p>\n\n<blockquote>\n  <p><em>Oracle 11XE / Oracle 11gR2 <br />\n  Visual Studio 2012</em></p>\n</blockquote>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":12575922,"title":"Oracle get all dates in a month","body":"<p>I am trying to write an SQL statement that would allow me to retrieve all the orders created in the month of September without much luck.</p>\n\n<p>Not working:</p>\n\n<pre><code>select order_number, created_date\nfrom orders\nwhere created_date in to_date('2012-09', 'YYYY-MM');\n</code></pre>\n\n<p>Working but too long:</p>\n\n<pre><code>select order_number, created_date\nfrom orders\nwhere trunc(created_date) between to_date('2012-09-01', 'YYYY-MM-DD') and to_date('2012-09-30', 'YYYY-MM-DD');\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":12570616,"title":"Searching and displaying results by relevance in Oracle","body":"<p>I am very beginner to Oracle Database query development. I am developing a search functionality for my project to search for Stores by <strong>Zip</strong> or <strong>Name</strong> or <strong>City</strong>, where the user will be provided with \"One HTML input box\" to enter the search term. There is only table Called Stores</p>\n\n<p>The conditions for  displaying search results are</p>\n\n<ol>\n<li>If the search term matched to <code>ZIP</code> results should be <code>GROUP</code> and <code>SORT BY ZIP DESC</code></li>\n<li>If the search term matched to <code>NAME</code> results should be group and sort by <code>NAME IN ASC</code> and same as to <code>CITY</code></li>\n<li>If the search term matched to <code>ZIP</code>,<code>NAME</code> and <code>CITY</code> (to all), then first the results matched to the <code>ZIP</code> should be displayed in <code>DESC order</code>, next <code>CITY</code> followed by The <code>NAME</code></li>\n</ol>\n\n<p>I have tried Some thing like this </p>\n\n<pre><code>SELECT s.uuid AS uuid, COUNT(*) over() AS rowcount\nFROM Stores s\nWHERE s.postalcode LIKE '%87%'\n      OR s.city LIKE '%87%'\n      OR CONCAT(CONCAT(s.firstname, ' '),s.lastname) LIKE '%87%'            \nGROUP BY s.city, s.postalcode, \n      CONCAT(CONCAT(s.firstname, ' '),s.lastname), s.uuid\nORDER BY CASE WHEN s.postalcode LIKE '%87%'\n              THEN s.postalcode END DESC,\n         CASE WHEN CONCAT(CONCAT(s.firstname, ' '),s.lastname) LIKE '%87%'\n              THEN CONCAT(CONCAT(s.firstname, ' '),s.lastname) \n              ELSE s.postalcode END ASC,\n         CASE WHEN s.city LIKE '%87%'\n              THEN s.city END \n</code></pre>\n\n<p>This query is not displaying the results as expected (I mean it is displaying results without order, not Like First zip, next city followed by name). </p>\n\n<p>How can I do the query to meet the above requirements, do I need to use stored procedures to do that ? Any suggestions will be greatly appreciated.</p>\n"},{"tags":["php","sql","oracle","oci","ora-00904"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":324,"score":0,"question_id":2374528,"title":"Don't PHP strings like multiple variable insertions?","body":"<p>I'm using PHP 5.2 with <a href=\"http://en.wikipedia.org/wiki/Oracle_Database\" rel=\"nofollow\">Oracle Database</a> 11.1.</p>\n\n<p>The code</p>\n\n<pre><code>$query = oci_parse($conn, \"SELECT * FROM COMMENTS WHERE PINID=$pinID and COMMENTID=$commentID\");\n</code></pre>\n\n<p>results in this error:</p>\n\n<blockquote>\n  <p><b>Warning</b>:  oci_execute() [function.oci-execute]: ORA-00904: &quot;COMMENTS&quot;: invalid identifier in <b>C:\\IODwww\\hello.php</b> on line <b>159</b><br />\n  ^</p>\n</blockquote>\n\n<p>But running this works fine:</p>\n\n<pre><code>$query = oci_parse($conn, \"SELECT * FROM COMMENTS WHERE PINID=$pinID and COMMENTID=1\");\n</code></pre>\n\n<p>Is this a result of me injecting multiple variables into the query string, or am I making some other mistake?</p>\n"},{"tags":["sql","mysql","sql-server","database","oracle"],"answer_count":12,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":12866,"score":5,"question_id":1817985,"title":"How do I Create a Comma-Separated List using a SQL Query?","body":"<p>I have 3 tables called:</p>\n\n<ul>\n<li>Applications (id, name)</li>\n<li>Resources  (id, name)</li>\n<li>ApplicationsResources (id, app_id, resource_id)</li>\n</ul>\n\n<p>I want to show on a GUI a table of all resource names. In one cell in each row I would like to list out all of the applications (comma separated) of that resource.</p>\n\n<p>So the question is, what is the best way to do this in SQL as I need to get all resources and I also need to get all applications for each resource?</p>\n\n<p>Do I run a select * from resources first and then loop through each resource and do a separate query per resource to get the list of applications for that resource?</p>\n\n<p>Is there a way I can do this in one query?</p>\n"},{"tags":["python","oracle","odbc","pyodbc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12573741,"title":"Python-Oracle connection issue with Pyodbc","body":"<p>Tried to connect to the Oracle database using Pyodbc:</p>\n\n<pre><code>try:\n    db_connection = pyodbc.connect('DSN=OraDev; PWD=%s' % Key.dbKeys['password'])\nexcept pyodbc.Error, err:\n        print &gt;&gt; debug_file, \"Database connection failed: %s\" %err \n        sys.exit()\n</code></pre>\n\n<p>and it keeps giving me this error message: </p>\n\n<blockquote>\n  <p>'[IM014] [Microsoft][ODBC Driver Manager] The specified DSN\n  contains an architecture mismatch between the Driver and Application\n  (0) (SQLDriverConnect)</p>\n</blockquote>\n\n<p>So I am wondering if the culprit is that I am not having the \"matching\" components. Currently, I have:</p>\n\n<blockquote>\n  <ol>\n  <li>Python 2.7 32bit</li>\n  <li>Pyodbc 3.0.6 win32-py2.7</li>\n  <li>Oracle ODBC driver: 32bit</li>\n  <li>Windows server 2008 64bit</li>\n  <li>Oracle 11.2.0 64bit</li>\n  </ol>\n</blockquote>\n\n<p>Are there anything wrong with the versions here? Thanks.</p>\n"},{"tags":["oracle","import","export","partitioning","oracle-xe"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1960,"score":0,"question_id":2555942,"title":"Importing a dmp with partitioned tables into Oracle XE","body":"<p>I've got a schema containing partitioned tables. I can use exp to create a .dmp, but when I import that into Oracle XE, I get errors because Oracle XE doesn't support partitioned tables.</p>\n\n<p>How do I get the .dmp imported into Oracle XE? I think pre-creating the tables might do it, but how do I extract the DDL in some automated way to do this?</p>\n\n<p>Or can I create the exp somehow without partitions?</p>\n"},{"tags":["c#","oracle","oracle11g","database-connection","connection-string"],"answer_count":2,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":669,"score":5,"question_id":12571379,"title":"OracleConnection.Open is throwing ORA-12541 TNS no listener","body":"<p>So I am connecting to an external server through C#. I just installed <strong>Oracle 11g</strong> client on my machine from here: <a href=\"http://www.oracle.com/technetwork/database/windows/downloads/index-090165.html\">http://www.oracle.com/technetwork/database/windows/downloads/index-090165.html</a> (255MB one).</p>\n\n<p>After reading many blogs/questions I found this article to be useful:</p>\n\n<p><a href=\"http://dbaspot.com/oracle-faq/444787-ora-12541-tns-no-listener.html\">http://dbaspot.com/oracle-faq/444787-ora-12541-tns-no-listener.html</a></p>\n\n<p>So is this correct? I cannot do anything. The DBA has to edit the <strong>LISTENER.ORA</strong> file?</p>\n\n<p>My <strong>tnsnames.ora</strong> looks like this:</p>\n\n<pre><code>  TestingConnect=\n  (DESCRIPTION =\n    (ADDRESS = (PROTOCOL = TCP)(HOST = TestHostName.us.local)(PORT = 1523))\n    (CONNECT_DATA =\n      (SERVER = DEDICATED)\n      (SERVICE_NAME = TEST)\n    )\n  )\n</code></pre>\n\n<p>It is throwing me the err at:</p>\n\n<pre><code>Oracle.DataAccess.Client.OracleConnection connection = new Oracle.DataAccess.Client.OracleConnection();\n\nconnection.ConnectionString = \"Data Source=TestHostName.us.local;Persist Security Info=True;\" + \"User ID=tesName;Password=test\";\n\nconnection.Open() //Throwing ERR!!!\n</code></pre>\n\n<p>What should I do? I appreciate any comments. Thanks!</p>\n"},{"tags":["java","oracle","jdbc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":111,"score":0,"question_id":12574249,"title":"java.sql.SQLException: ORA-00933: SQL command not properly ended","body":"<p>What i want to accomplish, is to be able to write SQL statements and verify the results.\nThe SQL Statements would have variables in them, like :</p>\n\n<pre><code>String sql = \"Select  zoneid from zone where zonename = myZoneName\";\n</code></pre>\n\n<p>Where myZoneName is generated from count + </p>\n\n<p>Note: I use Apache POI to parse Excel Spreadsheet.</p>\n\n<p>here is the code:</p>\n\n<pre><code>import java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.Properties;\n\nimport org.apache.log4j.Logger;\nimport org.junit.Test;\n\npublic class VerifyDBSingleDomain {\n\n    static Logger log = Logger.getLogger(VerifyDBSingleDomain.class.getName());\n\n    String url = \"jdbc:oracle:thin:@a.b.c.d:1521:mname\";\n\n    @Test\n    public void VerifyDBSingleDomainTest() throws SQLException {\n\n        Properties props = new Properties();\n        props.setProperty(\"user\", \"user\");\n        props.setProperty(\"password\", \"password\");\n\n        String sql = \"Select  zoneid from zone where zonename = 99224356787.tv\";\n        //String sql = \"Select * from zone\";\n\n        Connection conn;\n        //try {\n            conn = DriverManager.getConnection(url, props);\n            PreparedStatement preStatement = conn.prepareStatement(sql);\n            ResultSet result = preStatement.executeQuery();\n            System.out.println(result);\n\n            /*while (result.next()) {\n                System.out.println(result.toString());\n            }\n        } catch (SQLException e) {\n\n            e.printStackTrace();\n        }*/\n\n    //  }\n    //}\n\n    }\n}\n</code></pre>\n\n<p>and i get error:</p>\n\n<pre><code>java.sql.SQLException: ORA-00933: SQL command not properly ended\n</code></pre>\n"},{"tags":["perl","oracle","dbi","dbd"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":275,"score":4,"question_id":4449637,"title":"How can I access two Oracle databases with different versions (8i and 9) using perl?","body":"<p>I'm currently accessing an Oracle database version 9i (9.2.0.8.0) using perl modules DBI (1.613) and DBD::Oracle (1.26). The current scope of the project now requires that I access a version 8i (8.1.7.4.0 ) Oracle database and, according to the <a href=\"http://search.cpan.org/~timb/DBD-Oracle-1.26/Oracle.pm\" rel=\"nofollow\">DBD::Oracle project</a>, I can only access this second database with a DBD::Oracle version 1.20 or below.</p>\n\n<p>I know I could possibly use the DBD version 1.20 to access both databases, but I was wondering if its possible to have installed the two versions of the DBD module and use the acceptable version for each database (less prone to errors).</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12573139,"title":"How to use ORDER BY for individual search result in oracle?","body":"<p>I have done a small query in oracle to display the search results in a way that first matched WHEN clause results at the beginning and last matched WHEN clause results at the end. Now i want to SORT the first matched results in DESC order and remaining results are in ascending order. </p>\n\n<p>Below are the sample data that is used.</p>\n\n<pre><code>CREATE table test(id int, title varchar(50), place varchar(20), \npostcode varchar(20));\ninsert into test values(1,'gatla51','hyd','31382');\ninsert into test values(2,'sekhar91','kanigiri','91982');\ninsert into test values(3,'ravi32','ongole','41482');\ninsert into test values(4,'reddy42','guntur','31281');\n</code></pre>\n\n<p>This is the query i have done(of course some one helped as i am very new to oracle):</p>\n\n<pre><code>select title, place, postcode\nfrom (select title, place, postcode,\n             (case when postcode like '%9%' then 1\n                   when place LIKE '%9%' then 2\n                   when title LIKE '%9%' then 3\n                   else 0\n              end) as matchresult\n      from test\n     ) d\nwhere matchresult &gt; 0\norder by CASE WHEN postcode LIKE %9% THEN ZIP END DESC\n</code></pre>\n\n<p>But this query is sorting all the results. How can i SORT individual result, suggestions will be greatly appreciated.</p>\n"},{"tags":["mysql","sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":54,"score":0,"question_id":12571656,"title":"What are the Oracle equalent Functions of MySql Match Against","body":"<p>I have been searching for Oracle functions that are equivalent to to MySql Match Against.</p>\n\n<p>Any help will be greatly appreciated </p>\n"},{"tags":["java","sql","oracle","dynamic-sql"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1558,"score":1,"question_id":2684994,"title":"Dynamically assembling SQL queries in Java","body":"<p>What is the best way to assemble an SQL query with join conditions dynamically? I don't want to hard code the query for each different condition on a webpage or a set of webpages. Is it even feasible?</p>\n\n<p>I got as far as being able to assemble simple queries but i got stumped when i needed to insert join conditions, i.e. how to figure out dependencies for joins etc.</p>\n"},{"tags":["sql","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12572423,"title":"Advice on Creating Materialized View","body":"<p>I need to potentially create a materialized view for a fairly large table.</p>\n\n<p>The MV will be accessed afterwards using a group by (this is a fact table to be used by an olap cube).</p>\n\n<p>In terms of size I am dealing with approximately 10 million records a month, 120 million a year and around 10 years.  My facts are currently partitioned based using a symbol key which captures around 3 months worth of data.</p>\n\n<p>That said, for my test load it takes around 30 minutes for 2 years of data. </p>\n\n<p>Realistically, I only need to do a full load once.  So the question is, do I need an MV or should I just use a long running query?</p>\n\n<p>If I create an MV should I use any of the prebuilt table options for the MV so that I can index or partition the MV or should I just start out with a simple MV?</p>\n\n<p>If I'm not being clear enough please ask and I will provide more detail.</p>\n\n<p>Thanks!</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12572307,"title":"How to dispaly the Oracle search results?","body":"<p>I am practicing some examples in Oracle as i am new to it. I want to display the rows that are matched to First WHERE clause at beginning and last matched WHERE clause rows at last of below table. </p>\n\n<pre><code>  CREATE table demo(id int, name varchar(50), city varchar(20), zip varchar(20));\n    insert into demo values(1,'oliver71','munich','85716');\n\n    insert into demo values(2,'markus71','munich','85716');\n    insert into demo values(3,'oliver81','stuttgart','70024');\n    insert into demo values(4,'peter82','hale','81978');\n    insert into demo values(5,'chinnarose71','rosenheim','80324');\n    insert into demo values(6,'guru11','berlin','81982');\n    insert into demo values(7,'sachin51','frankfurt','00712');\n\n    select name, city, zip from demo where zip like '%7%' OR city LIKE '%7%' \n     OR name LIKE '%7%';\n</code></pre>\n\n<p>How can i do that in Oracle. Any suggestions will be greatly appreciated.</p>\n"},{"tags":["oracle","plsql","plsqldeveloper","oracle-sqldeveloper"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":107,"score":2,"question_id":12534167,"title":"Oracle - creating table WITHOUT parallel option","body":"<p>for some reason when I'm trying to CTAS (create table as select) on a large table (40million~ records ) I see in the v$session <strong>18</strong> active sessions with my sql statement.</p>\n\n<p>when i'm trying to hint the optimizer to use less CPUs </p>\n\n<pre><code>create table table_name parallel (degree 2) as \n       select * from large_table;\n</code></pre>\n\n<p>I see 6 active sessions.</p>\n\n<p>with degree 3 I see <strong>8</strong> active sessions.\nI tryed <strong>degree default</strong> but it created 18 sessions as well.</p>\n\n<p>previously in the code , before executing the CREATE TABLE statement I changed few attributes in my session :</p>\n\n<pre><code>alter session set workarea_size_policy = manual;\nalter session set hash_area_size = 1048576000;\n</code></pre>\n\n<p>I want to create the table in 1 session , how to I do it ?</p>\n\n<p>Thanks !</p>\n"},{"tags":["oracle","oracle11g","bigint"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12571232,"title":"Bigint to date in Oracle Error","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/10554405/convert-unixtime-to-datetime-sql-oracle\">Convert Unixtime to Datetime SQL (Oracle)</a>  </p>\n</blockquote>\n\n\n\n<p>We have a table of type bigint. I try to run the following query:</p>\n\n<pre><code>select TO_CHAR(TO_TIMESTAMP(t.bigint_field / 1000), 'DD/MM/YYYY HH24:MI:SS') \n   from table t\n</code></pre>\n\n<p>and get this error</p>\n\n<pre><code>ORA-00932: inconsistent datatypes: expected - got NUMBER\n</code></pre>\n\n<p>I've looked at <a href=\"http://stackoverflow.com/questions/5485502/how-can-i-format-bigint-field-into-a-date\">this question</a> but still I am unnable to get rid of this error. Here is one value which I was using - 1340809355000.</p>\n"},{"tags":["sql","oracle","triggers","ora-00933","pls-00428"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":2366,"score":-1,"question_id":4710471,"title":"Error(2,7): PLS-00428: an INTO clause is expected in this SELECT statement","body":"<p>I'm trying to create this trigger and getting the following compiler errors:</p>\n\n<pre><code>create or replace\nTRIGGER RESTAR_PLAZAS\nAFTER INSERT ON PLAN_VUELO\nBEGIN\nSELECT F.NRO_VUELO, M.CAPACIDAD, M.CAPACIDAD - COALESCE((\nSELECT count(*) FROM PLAN_VUELO P\nWHERE P.NRO_VUELO = F.NRO_VUELO\n       ), 0) as PLAZAS_DISPONIBLES\nFROM VUELO F\n      INNER JOIN MODELO M ON M.ID = F.CODIGO_AVION; \nEND RESTAR_PLAZAS;\n\n\nError(2,7): PL/SQL: SQL Statement ignored\nError(8,5): PL/SQL: ORA-00933: SQL command not properly ended\nError(8,27): PLS-00103: Encountered the symbol \"end-of-file\" when expecting one of the following:     begin case declare end exception exit for goto if loop mod    null pragma raise return select update while with    &lt;an identifier&gt; &lt;a double-quoted delimited-identifier&gt;    &lt;a bind variable&gt; &lt;&lt; close current delete fetch lock insert    open rollback savepoint set sql execute commit forall merge    pipe \nError(2,1): PLS-00428: an INTO clause is expected in this SELECT statement\n</code></pre>\n\n<p>What's wrong with this trigger? </p>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":847,"score":2,"question_id":4152037,"title":"inserting multiple rows with one insert command","body":"<p>Is it possible to insert more than one row in a table with one insert statement?\nI know this will happen if I do:</p>\n\n<pre><code>insert into table ( fields ) select values from another_table\n</code></pre>\n\n<p>But what if I want to insert:</p>\n\n<pre><code>row 1 - ( a1, b1, c1 )\nrow 2 - ( a2, b2, c2 )\n...\nrow n - ( an, bn, cn )\n</code></pre>\n\n<p>with just one insert command?</p>\n"},{"tags":["oracle","sorting","ascii"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":12569966,"title":"Sorting results on Oracle as ASCII","body":"<p>I'm doing a query that returns a VARCHAR2 and some other fields. I'm ordering my results by this VARCHAR2 and having some problems related to the linguistic sort, as I discovered on Oracle documentation. For example:</p>\n\n<pre><code>SELECT id, my_varchar2 from my_table ORDER BY MY_VARCHAR2;\n</code></pre>\n\n<p>Will return:</p>\n\n<pre><code>ID     MY_VARCHAR2\n------ -----------\n 3648  A\n 3649  B\n 6504  C\n 7317  D\n 3647  0\n</code></pre>\n\n<p>I need it to return the string \"0\" as the first element on this sequence, as it would be comparing ASCII values. The string can have more than one character so I can't use the ascii function as it ignores any characters except for the first one.</p>\n\n<p>What's the best way to do this?</p>\n"},{"tags":["oracle","environment-variables","nls"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":150,"score":0,"question_id":10797438,"title":"NLS_SORT NLS_COMP read incorreclty","body":"<p>I set NLS_SORT and NLS_COMP in hibernate:</p>\n\n<pre><code>Hibernate: ALTER SESSION SET NLS_COMP=BINARY\nHibernate: ALTER SESSION SET NLS_SORT=BINARY\n</code></pre>\n\n<p>After that i try to read it back using:</p>\n\n<pre><code>select * from nls_session_parameters where parameter in('NLS_SORT','NLS_COMP');\nSELECT SYS_CONTEXT ('USERENV', 'NLS_SORT') FROM DUAL;\n</code></pre>\n\n<p>This queries return incorrect values:</p>\n\n<pre><code>PARAMETER                      VALUE                                   \n------------------------------ ----------------------------------------\nNLS_SORT                       RUSSIAN                                 \nNLS_COMP                       BINARY                                  \n\n2 rows selected.\n\nSYS_CONTEXT('USERENV','NLS_SORT')                                               \n--------------------------------------------------------------------------------\nRUSSIAN                                                                         \n1 row selected.\n</code></pre>\n\n<p>What am i doing wrong?</p>\n"},{"tags":["mysql","oracle","portability","date-math"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12568771,"title":"Portable way to add dates between Oracle and MySQL?","body":"<p>Is there any way to add dates/times that will be portable between Oracle and MySQL?</p>\n\n<p>For example, in Oracle, adding <code>col + 1</code> to a date column will add a day.</p>\n\n<p>In MySQL, adding <code>col + 1</code> to a <code>datetime</code> column will add a SECOND.</p>\n\n<p>Is there a function that would give the same results in both?</p>\n\n<p>(I'm trying to use this in an <code>order by</code>, for example, <code>order by col1 + col2/(60*24)</code> - if it were part of the SELECT or WHERE, there might be better options.)</p>\n\n<p>Thanks!</p>\n"},{"tags":["oracle","group-by","max","having"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12486811,"title":"Oracle query group by","body":"<p>I need to get 1 row back with sum of some values by max date. But these 2 rows were updated by different persons, but only need to show the latest updated by person id.</p>\n\n<p>My query is:</p>\n\n<pre><code>select v.code, sum(v.a_lines), sum(v.b_lines),\nv.updated_by, f.period, max(v.updated_on)\nfrom f_values v, f_file f where \nv.file_id = f.id\nand v.code= '100002'\nand \nto_char(f.period,'MM/DD/YYYY') = '03/31/2011'\ngroup by v.code, v.updated_by, f.period\n</code></pre>\n\n<p>This returns 2 rows:</p>\n\n<pre><code>102 30  100 xxx 31-MAR-11   10-AUG-11\n102 50  200 yyy 31-MAR-11   07-OCT-11\n</code></pre>\n\n<p>Now we need to return only 1 row. Something like this:</p>\n\n<pre><code>102   80   3000   yyy 31-Mar-11  07-Oct-11\n</code></pre>\n\n<p>I know that this can be achieved by removing \"updated_by\" from the column, but I need to have it populated, but it only needs to be the most recent updated_by row ('yyy'). Hope my question is clear</p>\n\n<p>Please let know if this is possible. Thanks in advance</p>\n\n<p>Harish</p>\n"},{"tags":["c++","oracle","odbc","database-connection","connection-string"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12567248,"title":"ODBC SQLDriverConnect not connecting","body":"<p>I am using ODBC API in c++ to connect to a database. I have made my connection function everything worked fine until i got to SQLDriverConnect . </p>\n\n<pre><code> _TUCHAR szConnectOutput[3000];\n         SWORD nResult;\n\n         retcode = SQLDriverConnect(hdbc, NULL,\n                    (SQLTCHAR *)szDNS, SQL_NTS,szConnectOutput, 3000,\n                    &amp;nResult, SQL_DRIVER_NOPROMPT);\n\n         if (retcode == SQL_SUCCESS || retcode == SQL_SUCCESS_WITH_INFO)\n</code></pre>\n\n<p>retcode is returned as -1 . I am not sure what the problem is ,it could be my DSN wrong format .\nMy DNS is DSN=\"DSN=Messe10_2;Uid=test;Pwd=test\"; .The datebase i am trying to connect is an Oracle database .Is my DSN format wrong ? Or i have some other problem ?</p>\n\n<p>Thanks .</p>\n"}]}
{"total":22203,"page":20,"pagesize":100,"questions":[{"tags":["sql","oracle","powerbuilder"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":128,"score":1,"question_id":12566201,"title":"Assign MAX(id) to Sequence","body":"<p>I want to make some inserts into a table,  using some data from powerbuilder.  I am a little lost when it comes to using SQL sequences to increment the last known ID.</p>\n\n<p>I know how to find the max ID, but how can I use a sequence to make sure that every new INSERT increments the ID by 1?</p>\n\n<p>So far all I have is how to find my max id:</p>\n\n<pre><code>SELECT MAX(id)\nFROM table_name;\n</code></pre>\n\n<p><strong>EDIT</strong>\nI am using Oracle for my database</p>\n\n<p>Thanks.</p>\n"},{"tags":["sql","oracle","plsql","oracle11g"],"answer_count":1,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":144,"score":8,"question_id":12304320,"title":"Is bind peeking disabled on distributed queries?","body":"<p>I'm having trouble optimizing an Oracle query after an upgrade to Oracle 11g and this problem is starting to drive me a little mad. </p>\n\n<p>Note, this question has been now fully edited because I have more information after creating a simple test case. The original question is available here: <a href=\"http://stackoverflow.com/revisions/12304320/1\">http://stackoverflow.com/revisions/12304320/1</a>. </p>\n\n<p>This issue is that when joining two tables, one of which has a <code>between</code> condition on a date column, if the query joins to a remote table, bind peeking doesn't happen. </p>\n\n<p>Here is a test case to help reproduce the problem. First set up two source tables. The first is a list of dates, being the first of the month, going back thirty years</p>\n\n<pre><code>create table mike_temp_etl_control\nas \nselect\n  add_months(trunc(sysdate, 'MM'), 1-row_count) as reporting_date\nfrom (\n  select level as row_count\n  from dual\n  connect by level &lt; 360\n);\n</code></pre>\n\n<p>Then some data sourced from <code>dba_objects</code>:</p>\n\n<pre><code>create table mike_temp_dba_objects as\nselect owner, object_name, subobject_name, object_id, created\nfrom dba_objects\nunion all\nselect owner, object_name, subobject_name, object_id, created\nfrom dba_objects;\n</code></pre>\n\n<p>Then create an empty table to run the data in to:</p>\n\n<pre><code>create table mike_temp_1\nas\nselect \n  a.OWNER,\n  a.OBJECT_NAME,\n  a.SUBOBJECT_NAME,\n  a.OBJECT_ID,\n  a.CREATED,\n  b.REPORTING_DATE\nfrom \n  mike_temp_dba_objects a\n  join mike_temp_etl_control b on (\n      b.reporting_date between add_months(a.created, -24) and a.created)\n  where 1=2;\n</code></pre>\n\n<p>Then run the code. You may need to create a larger version mike_temp_dba_objects to slow the query down (or use some other method to get the execution plan). While the query is running, I get an execution plan from the session by running <code>select *\nfrom table(dbms_xplan.display_cursor(sql_id =&gt; 'xxxxxxxxxxx'))</code> from a different session.</p>\n\n<pre><code>declare\n  pv_report_start_date date := date '2002-01-01';\n  v_report_end_date date := date '2012-07-01';\n\nbegin\n\n  INSERT /*+ APPEND */\n  INTO mike_temp_5\n  select \n    a.OWNER,\n    a.OBJECT_NAME,\n    a.SUBOBJECT_NAME,\n    a.OBJECT_ID,\n    a.CREATED,\n    b.REPORTING_DATE\nfrom \n  mike_temp_dba_objects a\n  join mike_temp_etl_control b on (\n    b.reporting_date between add_months(a.created, -24) and a.created)\n  cross join dual@emirrl -- This line causes problems...\nwhere \n  b.reporting_date between add_months(pv_report_start_date, -12) and v_report_end_date;\n\n  rollback;  \nend;\n</code></pre>\n\n<p>By having a remote table in the query, the cardinality estimate for the mike_temp_etl_control table is completely wrong and bind peeking doesn't seem to be happening. </p>\n\n<p>The execution plan for the query above is shown below:</p>\n\n<pre><code>---------------------------------------------------------------------------------------\n| Id  | Operation                | Name                  | Rows  | Bytes | Cost (%CPU)|\n---------------------------------------------------------------------------------------\n|   0 | INSERT STATEMENT         |                       |       |       |   373 (100)|\n|   1 |  LOAD AS SELECT          |                       |       |       |            |\n|*  2 |   FILTER                 |                       |       |       |            |\n|   3 |    MERGE JOIN            |                       |     5 |   655 |   373  (21)|\n|   4 |     SORT JOIN            |                       |  1096 |   130K|   370  (20)|\n|   5 |      MERGE JOIN CARTESIAN|                       |  1096 |   130K|   369  (20)|\n|   6 |       REMOTE             | DUAL                  |     1 |       |     2   (0)|\n|   7 |       BUFFER SORT        |                       |  1096 |   130K|   367  (20)|\n|*  8 |        TABLE ACCESS FULL | MIKE_TEMP_DBA_OBJECTS |  1096 |   130K|   367  (20)|\n|*  9 |     FILTER               |                       |       |       |            |\n|* 10 |      SORT JOIN           |                       |     2 |    18 |     3  (34)|\n|* 11 |       TABLE ACCESS FULL  | MIKE_TEMP_ETL_CONTROL |     2 |    18 |     2   (0)|\n---------------------------------------------------------------------------------------\n</code></pre>\n\n<p>If I then replace the remote <code>dual</code> with the local version I get the correct cardinality (139 instead of 2):</p>\n\n<pre><code>-------------------------------------------------------------------------------------\n| Id  | Operation              | Name                  | Rows  | Bytes | Cost (%CPU)|\n-------------------------------------------------------------------------------------\n|   0 | INSERT STATEMENT       |                       |       |       | 10682 (100)|\n|   1 |  LOAD AS SELECT        |                       |       |       |            |\n|*  2 |   FILTER               |                       |       |       |            |\n|   3 |    MERGE JOIN          |                       |   152K|    19M| 10682   (3)|\n|   4 |     SORT JOIN          |                       |   438K|    51M| 10632   (2)|\n|   5 |      NESTED LOOPS      |                       |   438K|    51M|   369  (20)|\n|   6 |       FAST DUAL        |                       |     1 |       |     2   (0)|\n|*  7 |       TABLE ACCESS FULL| MIKE_TEMP_DBA_OBJECTS |   438K|    51M|   367  (20)|\n|*  8 |     FILTER             |                       |       |       |            |\n|*  9 |      SORT JOIN         |                       |   139 |  1251 |     3  (34)|\n|* 10 |       TABLE ACCESS FULL| MIKE_TEMP_ETL_CONTROL |   139 |  1251 |     2   (0)|\n-------------------------------------------------------------------------------------\n</code></pre>\n\n<p>So, I guess the question is how can I get the correct cardinality to be estimated? Is this an Oracle bug or is this the expected behaviour?</p>\n"},{"tags":["sql","oracle","select","join","combine"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12568446,"title":"How to combine several oracle select sql into one view?","body":"<p>I would like to have the results of these selects into one view. The common column is the RUNID, however the results from the right table is not always present. So it should return empty. I am thinking that all of these selects can be combined into one select, passing the RUNID to each of the counts for different criteria. </p>\n\n<pre><code>--COUNT OF S16 ELIGIBLE ACCOUNTS\nSELECT    PDDETAIL.RUNID, COUNT(*) AS \"S16 ELIGIBLE ACCOUNTS\"\nFROM      PDDETAIL\nLEFT JOIN PDSTAGES ON (PDDETAIL.PDID = PDSTAGES.PDID AND PDDETAIL.CUST_ID = PDSTAGES.CUST_ID)\nWHERE     PDSTAGES.PDSTAGE = 'S16ELIGIBLE'\nGROUP BY  PDDETAIL.RUNID\nORDER BY  PDDETAIL.RUNID ASC\n;\n\n--COUNT OF S16 MTO SUBMITTED\nSELECT    PDDETAIL.RUNID,COUNT(*) AS \"S16 MTO SUBMITTED\"\nFROM      PDDETAIL\nLEFT JOIN PDSTAGES ON (PDDETAIL.PDID = PDSTAGES.PDID AND PDDETAIL.CUST_ID = PDSTAGES.CUST_ID)\nWHERE     PDSTAGES.PDSTAGE = 'S16MTOREFRESHSUBMITTED'\nGROUP BY  PDDETAIL.RUNID\nORDER BY  PDDETAIL.RUNID ASC\n;\n\n--COUNT OF S16 MTO RETURN FAILED\nSELECT    PDDETAIL.RUNID,COUNT(*) AS \"S16 MTO FAILED\"\nFROM      PDDETAIL\nLEFT JOIN PDSTAGES ON (PDDETAIL.PDID = PDSTAGES.PDID AND PDDETAIL.CUST_ID = PDSTAGES.CUST_ID)\nWHERE     PDSTAGES.PDSTAGE = 'S16MTORETURNFAILED'\nGROUP BY  PDDETAIL.RUNID\nORDER BY  PDDETAIL.RUNID ASC\n;\n</code></pre>\n"},{"tags":["oracle","jdbc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1435,"score":0,"question_id":7569446,"title":"Inactive session in Oracle by JDBC","body":"<p>We have a web service written in Java and is connecting to Oracle database for data extraction. Recently, we encountered too many inactive session in Oracle database from JDBC which is our web service.</p>\n\n<p>We are very sure that all the connection is being closed and set to null after every process.</p>\n\n<p>Can anyone help us in this? Why is it causing inactive session in the database and what can be the solution to this. </p>\n\n<p>Thank you. </p>\n"},{"tags":["sql-server","database","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12568105,"title":"ALTER TABLE with a default: SQL Server vs Oracle","body":"<p>We have some tables in an Oracle database with several million rows. When we alter one of these tables to add a new column, we specify a default. This is very slow to run as Oracle has to update all existing rows with the default. The solution is to ensure the column is defined as NOT NULL because then Oracle (recent versions only) will not update all existing rows with the default - the subsequent presence of a null in one of these columns tells Oracle that it requires a default and it will provide the default on the fly. </p>\n\n<p>My question is regarding SQL Server: does it exhibit similar behaviour when adding a column and providing a default? If not, are there any best practices in efficiently adding new columns with default values, and are there any advantages in defining a column as NOT NULL?</p>\n"},{"tags":["sql","ruby-on-rails","oracle","activerecord","legacy-database"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":155,"score":1,"question_id":10287404,"title":"Issues querying date column from legacy Oracle database and ActiveRecord","body":"<p>I'm new to rails and still learning how it all works. I'm trying retrieve a list of years from a date column in an legacy Oracle database so I can get a list of all the years an object has been entered. The Oracle database is 10g and I'm using rails 3.2 with ruby 1.9.2p290 and using the oracle enhanced adapter gem. </p>\n\n<p>Currently, I'm using the following code conduct my query (the .attribute is to help me determine what what is being returned from the query):</p>\n\n<pre><code>- License.select(\"distinct(to_char(application_date,'yyyy'))\").each do |lic|\n    %p= lic.attributes\n</code></pre>\n\n<p>The results I get back are a number of hashes containing all the distinct years found in the database column that I'm not sure how to access.</p>\n\n<pre><code>{\"(to_char(application_date,'yyyy'))\"=&gt;\"2002\"}\n</code></pre>\n\n<p>I've also tried to simply selecting all rows from the date column from the database table and outputing the results. However, I get an Oracle error that I don't quite understand how to resolve.</p>\n\n<pre><code>- License.select(\"application_date\").uniq.each do |lic|\n    %p= lic.year\n</code></pre>\n\n<p>Give me the following error:</p>\n\n<pre><code>OCIError: ORA-01878: specified field not found in datetime or interval: SELECT DISTINCT application_date FROM \"LICENSE\" \n</code></pre>\n\n<p>The Oracle Enhanced Adapter is configured to emulate dates by column name in the oracle initializer:</p>\n\n<pre><code>self.emulate_dates_by_column_name = true\n</code></pre>\n\n<p>I've also set the column in the License model to be a date column:</p>\n\n<pre><code>set_date_columns :application_date\n</code></pre>\n\n<p>Is there a way to retrieve the distinct years from all the rows in the date column in the database? I'm not quite sure on how to get the desired results of a dataset of unique years from that one column.</p>\n"},{"tags":["java","oracle","hibernate","jpa"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2800,"score":0,"question_id":8086555,"title":"ORA-01460: unimplemented or unreasonable conversion requested using Hibernate @Lob","body":"<p>I have a <code>byte[]</code> that I am persisting to a Lob as follows:</p>\n\n<pre><code>@Basic(fetch = FetchType.LAZY)\n@Column(name = \"ABF\", length = Integer.MAX_VALUE)\n@Lob\nprivate byte[] abf;\n</code></pre>\n\n<p>Seems simple enough, but when I attempt to store anything sizable in it (more than 4000 characters) I get the following exception when I try to commit:</p>\n\n<blockquote>\n  <p>java.sql.SQLException: ORA-01460: unimplemented or unreasonable conversion requested</p>\n</blockquote>\n\n<p>None of the files I am attempting to store are anywhere near 32,000 characters. Is there some other gotcha here?</p>\n"},{"tags":["java","oracle","glassfish","connection-pooling"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":119,"score":0,"question_id":12142844,"title":"cannot create a functioning connection pool with glassfish","body":"<p>I'm trying to create a connection pool from glassfish to Oracle.\nWhen I use command line, all seems to work during the creation, but the application crashed with this exception:</p>\n\n<p><code>\n    <code>Caused by: java.sql.SQLException: Protocol violation\n            at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:450)\n            at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186)\n            at oracle.jdbc.driver.T4C7Ocommoncall.doOROLLBACK(T4C7Ocommoncall.java:68)\n            at oracle.jdbc.driver.T4CConnection.doRollback(T4CConnection.java:642)\n            at oracle.jdbc.driver.PhysicalConnection.rollback(PhysicalConnection.java:3716)\n            at com.sun.gjc.spi.base.ConnectionHolder.rollback(ConnectionHolder.java:630)\n            at  org.hibernate.transaction.JDBCTransaction.rollbackAndResetAutoCommit(JDBCTransaction.java:217)\n            at org.hibernate.transaction.JDBCTransaction.rollback(JDBCTransaction.java:196)</code>\n</code><br></p>\n\n<p><strong>EDIT</strong>: This exception is trowed when the application try to do a rollback, using JPA. <strong>END EDIT</strong></p>\n\n<p>This is the command I used to create the CP:<br>\n<code>\n    <code>asadmin&gt; create-jdbc-connection-pool --restype javax.sql.DataSource\n    --datasourceclassname oracle.jdbc.pool.OracleDataSource\n    --property \"user=myUser:password=myPw:url=jdbc\\\\:oracle\\\\:thin\\\\:@dbHostName\\\\:1521\\\\:mySID\" My_CP</code>\n</code></p>\n\n<p>I tryed also to create the CP from the admin gui (that wuold be more user friendly), but even if I copied the ojdbc6.jar in /opt/glassfish3_old/glassfish/domains/domain1/lib, when I have to select the driver classname the corresponding selection list is empty!</p>\n\n<p><strong>EDIT</strong>: \nI'm using:\njava version \"1.7.0_06\"\nJava(TM) SE Runtime Environment (build 1.7.0_06-b24)\nJava HotSpot(TM) Server VM (build 23.2-b09, mixed mode)</p>\n\n<p>and glassfish 3.1.2.2 oracle version (but with the 3.1.2 open source version, it behaves the same)<bR>\n<strong>END EDIT</strong></p>\n\n<p>Probably I'm doing a stupid error somewhere.</p>\n\n<p>Can anyone have a suggestion?</p>\n\n<p>Thanks!!</p>\n"},{"tags":["oracle","oracle11g"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12565481,"title":"Oracle Server connection - Domain user","body":"<p>I am trying to connect oracle database with Domain User. I am facing weird behavior. </p>\n\n<p>When first time the domain user connects database, it is getting failed. Next time, It is connected.</p>\n\n<p>I followed below steps to connect database as domain user</p>\n\n<pre><code>1. Run cmd.exe\n2. runas /user:domainname\\username cmd\n3. SqlPlus /@instancename - at new cmd.exe\n4. ORA-01017: invalid username/password; logon denied.\n5. Again execute SqlPlus /@instancename\n6. Connected to:\nOracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production\nWith the Partitioning, OLAP, Data Mining and Real Application Testing options\n</code></pre>\n\n<blockquote>\n  <p>Oracle Version : 11g</p>\n</blockquote>\n\n<p>I have followed below steps to make oracle to authenticate OS user or domain user</p>\n\n<pre><code>1. os_authent_prefix = '' empty value\n2. set SQLNET.AUTHENTICATION_SERVICES=NTS in sqlnet.ora \n3. Added registry key OSAUTH_PREFIX_DOMAIN = TRUE\n</code></pre>\n\n<p>Have anyone faced this problem? What may be the cause?</p>\n"},{"tags":["oracle","xquery","xmltype"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":12565466,"title":"With Oracle XML Tables do XQuery selects use XmlIndexes?","body":"<p>I am trying to retrieve keys and parent keys from some structured xml stored as binary xml in oracle. I have tried created unstructured index and also an index with a structured component. The structured component works fine when doing a SELECT against XMLTABLE() but I cannot retrieve values of parent node using XMLTable. I am therefore trying the following Xquery to retrieve parent values but this is not using the index at all. Does this style of query support using XmlIndexes? I can't find anything in the docs that say either way.</p>\n\n<pre><code>SELECT y.*\nFROM xml_data x, XMLTABLE(xmlnamespaces( DEFAULT 'namespace'),\n'for $i in /foo/bar\n   return element r {\n      $i/someKey\n     ,element parentKey { $i/../someKey }   \n }'\nPASSING x.import_xml\nCOLUMNS\n   someKey VARCHAR2(100) PATH 'someKey'\n  ,parentKey VARCHAR2(100) PATH 'parentKey'\n) y\n</code></pre>\n\n<p>Thanks, Tom</p>\n"},{"tags":["oracle"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12564759,"title":"Where oracle Stores user defined exceptions?","body":"<p>Is there oracle table that stores user defined exceptions?</p>\n"},{"tags":["oracle","package","procedure"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":97,"score":1,"question_id":12563752,"title":"How to run a procedure in a package body","body":"<p>I am using oracle 11g . I am trying to run a procedure inside a package by using the command</p>\n\n<pre><code>execute package.procedure \n</code></pre>\n\n<p>but I keep getting the exception </p>\n\n<pre><code>ERROR at line 1:\nORA-06550: line 1, column 12:\nPLS-00302: component 'package' must be declared\nORA-06550: line 1, column 7:\nPL/SQL: Statement ignored\n</code></pre>\n\n<p>The package and package body i created is the following. What i am actually trying to do here is to create a package which is used to create tables each time its executed. so i wrote the following script.</p>\n\n<p>-----Package</p>\n\n<pre><code>create or replace package pack1 as\nend pack1 ;\n/\n</code></pre>\n\n<p>------Package Body</p>\n\n<pre><code>create or replace package body pack1 as\nprocedure proc1\nis \nbegin\nexecute immediate 'create table bcd(bc date)';\nend ;\nprocedure proc2\nis \nbegin\nexecute immediate 'create table bcde(bc number(12,0)) as select country_id from      countries';\nend ;\nend pack1;\n/\n</code></pre>\n\n<p>but when i ran </p>\n\n<pre><code>execute pack1.proc2 ;\n</code></pre>\n\n<p>It gave me the above exception.</p>\n\n<p>Can someone help me with what is wrong ?</p>\n\n<p>Thanks a ton in advance</p>\n"},{"tags":["java","oracle","linker","linker-error"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":10102,"score":2,"question_id":919921,"title":"no ocijdbc9 in java.library.path","body":"<p>When I try to run Java application, I receive the following error:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.UnsatisfiedLinkError: no ocijdbc9 in java.library.path\n</code></pre>\n\n<p>I don't have a file \"ocijdbc9.*\" on my PC, but I have \"ocijdbc10.dll\" in %ORACLE_HOME%\\bin.</p>\n\n<p>%ORACLE_HOME% is correctly specified, so I think the problem is that the application is searching for the wrong version (9 instead of 10).</p>\n\n<p>Both Oracle and Java Builder are freshly installed, so the problem may be in project preferences? Do you have any ideas on how to search for the place where the wrong version is specified?</p>\n"},{"tags":["java","sql","oracle","prepared-statement"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":86,"score":3,"question_id":12563063,"title":"What am I doing wrong with this preparedStatement?","body":"<pre><code>private Connection conn = DriverManager.getConnection(URL, info);\ntry {\nString sql = \"INSERT INTO \\\"STUD1582251\\\".\\\"ACCOUNTS\\\" VALUES USERNAME=?, PASSWORD=?, PORTFOLIONAME=?\";\n    PreparedStatement stm = conn.prepareStatement(sql);\n    stm.setString(1, user.getUsername());\n    stm.setString(2, user.getPassword());\n    stm.setString(3, user.getPortfolioName());\n    System.out.println(sql);\n    stm.executeUpdate();\n} catch (SQLException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>Exception</p>\n\n<blockquote>\n  <p>SELECT username FROM \"STUD1582251\".\"ACCOUNTS\" WHERE username=? INSERT\n  INTO \"STUD1582251\".\"ACCOUNTS\" VALUES USERNAME=?, PASSWORD=?,\n  PORTFOLIONAME=? java.sql.SQLSyntaxErrorException: ORA-00933: SQL\n  command not properly ended</p>\n</blockquote>\n"},{"tags":["java","sql","database","oracle","spring-mvc"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":105,"score":0,"question_id":12562762,"title":"oracle sql - to store 4000 characters in a column of my DB table","body":"<p>In my web application, I am saving some Text message in a COLUMN of a DB table(Oracle). Earlier the VARCHAR2 length(maximum length) is (500 BYTE). Now the client has asked me to increase the maximum length to 4000 characters.<br>\nIs it possible to save 4000 char in a column of a DB table or do we need to save it as BLOB.<br>\nWhich gives better performance?<br>\nCan anyone please clarify on this?</p>\n"},{"tags":["database","oracle"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12562330,"title":"Oracle: creating a Matrialized View","body":"<p>I have a certain query that i have to do every day once \nthis query creates a table that shows a certain sum qty for each day\ninstead i thought to do it in a materialized query in order not to create every day \nhere is the query: </p>\n\n<pre><code>create table close_qty\nas\nselect item_code,item_conc_code,tran_bran_code,sum(tran_qty) bal_qty\nfrom tranhist a,itemmast b\nwhere a.tran_item_code = b.item_code\ngroup by item_code,item_conc_code,tran_bran_code\n</code></pre>\n\n<p>I am Trying To create a materialized view but i am getting the following error </p>\n\n<pre><code>ERROR at line 1:\nORA-00901: invalid CREATE command\n</code></pre>\n\n<p>here is my query </p>\n\n<pre><code>CREATE MATERIALIZED VIEW vwCloseQty\nAS\nselect item_code,item_conc_code,tran_bran_code,sum(tran_qty) bal_qty\nfrom tranhist a,itemmast b\nwhere a.tran_item_code = b.item_code\ngroup by item_code,item_conc_code,tran_bran_code\n</code></pre>\n\n<p>kindly advice if it will affect the performance and how can i solve the error</p>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":2,"up_vote_count":1,"down_vote_count":1,"view_count":89,"score":0,"question_id":12562285,"title":"How to show 0 when no row found","body":"<p>I have a SQL query in which I am passing sysdate to the query problem is that when there is no matching date in table with sysdate then it don't shows the zero even if there is nvl applied\n here is my query </p>\n\n<pre><code>select * from molasses\nwhere trunc(trn_dte) = trunc(sysdate)\n</code></pre>\n\n<p>But it show data only when current date is present in table but I want to show zero if no data found in table.please help me to do this in oracle 10 g. Because some times the situation is like above and I have to display zero when no data found</p>\n"},{"tags":["c#","oracle","timestamp","compare"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12562487,"title":"How to compare OracleTimeStamps","body":"<p>I have two byte[] (like this { 0, 0, 0, 0, 52, 246, 141, 6 }) that represent two Oracle's timestamps.\nHow do I know which one is older?</p>\n"},{"tags":["java","oracle","swing","jdbc","jcombobox"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":65,"score":1,"question_id":12560489,"title":"Load database Field Values to A JCombobox","body":"<p>How to load values from an Oracle db to a JComboBox to make it easier for the user To Choose from I Have tried this: </p>\n\n<pre><code>    Connection dbcon = null;\n    try {\n        Class.forName(\"oracle.jdbc.driver.OracleDriver\");\n        dbcon = DriverManager.getConnection(\"\n             jdbc:oracle:thin:@localhost:1521:XE\", \"USERNAME\", \"PASSWORD\");\n        Statement st = dbcon.createStatement();\n        String combo = \"Select EMP_IDNUM from employees\";\n        ResultSet res = st.executeQuery(combo);\n        while(res.next()){\n            String ids = res.getString(\"EMP_IDNUM\");\n            String [] str = new String[]{ids};\n            cboId = new JComboBox(str);\n        }\n    } catch (Exception d) {\n        System.out.println(d);\n    }\n</code></pre>\n\n<p>This is Only getting me the first Value Into the JComboBox cboID. What Is the Best way to Load the entire Field Data (EMP_IDNUM) into the Jcombobox??</p>\n"},{"tags":["java","web-services","oracle","jdeveloper"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":194,"score":1,"question_id":12382166,"title":"How to test Webservice in JDeveloper that uses Basic Authentication?","body":"<p>I have created a web-service that uses basic authentication in JDeveloper 11.1.1.4.</p>\n\n<p>When i test my application using a client application is runs correctly so i know that the authentication mechanism has no problems. </p>\n\n<p>How can i pass authentication info into the HTTP Analyzer by right clicking on Webservices and selecting <code>Test Web Service</code>? </p>\n\n<p>I have tried to pass credentials through <code>SOAP Headers &gt; :WS-Security:Header</code> like below but is not working </p>\n\n<p><img src=\"http://i.stack.imgur.com/JjCC9.png\" alt=\"case1\"></p>\n\n<p>I have also tried to pass authentication through <code>Credentials</code> option like shown below</p>\n\n<p><img src=\"http://i.stack.imgur.com/18k1H.png\" alt=\"case2\"></p>\n\n<p>In both cases i get this error <code>500 HTTP Analyzer Server Error The server sent HTTP status code 401: Unauthorized: .....</code></p>\n\n<p>How can i get through this? \nThanks</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I also tried to pass <code>Authentication</code> option to <code>Request HTTP Headers</code> but get the error message :</p>\n\n<blockquote>\n  <p>Error 403--Forbidden\n  From RFC 2068 Hypertext Transfer Protocol -- HTTP/1.1:\n  10.4.4 403 Forbidden\n  The server understood the request, but is refusing to fulfill it. Authorization will not help and the request SHOULD NOT be repeated. If the request method was not HEAD and the server wishes to make public why the request has not been fulfilled, it SHOULD describe the reason for the refusal in the entity. This status code is commonly used when the server does not wish to reveal exactly why the request has been refused, or when no other response is applicable.</p>\n</blockquote>\n"},{"tags":["oracle","sqlplus"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":170,"score":0,"question_id":12559350,"title":"Run commandline command at remote Oracle server using SQLPlus","body":"<p>I have a machine running Oracle 10g server in windows server 2008. I want to take backup of the database. I also want to take backup of some files saved on hard disk by oracle server that users have uploaded using my website.</p>\n\n<p>I can connect to the Oracle server using sql developer and sqlplus. I can run sql queries on the server. </p>\n\n<p>In order to take backup of database I have to run the command \"exp\" (this is the only way of taking backup of databases that I know). There might be some other way but there is another problem because of which I must run dos command. That problem is to take backup of files. These files are stored in c:\\mydir. The folder mydir is not accessible anyway through web and is not a shared folder.</p>\n\n<p>I have tried running \"host \" in sqlplus after connecting to oracle server, that is at \"sql>\" prompt. The command ran successfuly but at local machine, not at oracle server.</p>\n\n<p>Edit: The \"host\" command is provided by sqlplus and is not an oracle command, means cannot be used in a query. Sqlplus even when connected to remote machine run the \"host\" command at local machine.</p>\n\n<p>The target is to either make sqlplus run the \"host\" command at remote machine, Or run the dos command from inside a pl/sql query (independent of sqlplus).</p>\n"},{"tags":["c#","oracle","entity-framework","odp.net"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":762,"score":0,"question_id":11544822,"title":"Cannot see Oracle Data Provider for .NET in Visual Studio 2012 RC","body":"<p>I am  porting a web application to Entity Framework 4.5. My main goal is to support both MSSQL and Oracle databases and be able to tell the ORM which data source to target programmatically (in the Global.asax). The SQL and Oracle schemas are obviously functionally identical; this is an approach we already use in production with another ORM we want to throw away.</p>\n\n<p>NOTE: The machine we are testing it on has Windows 8 Release Preview Build 8400 64 bit, Visual Studio Professional 2012 RC 11.0.50706.0 and .NET framework 4.5.50501. It is not a standard development machine (the others have XP and 7 w/Visual Studio 2010 and .NET 4), but a new one we are using to test these new technologies. I have no idea if any of this new technologies may be the problem, haven't tested it on a \"standard\" dev machine yet.</p>\n\n<p><strong>Short version</strong></p>\n\n<p>I'll explain the situation in detail right below, but the main questions are:</p>\n\n<ol>\n<li>In the \"Add new ADO.NET Entity Data Model\" wizard, I cannot see the ODP.NET data provider I installed (see below) and thus I cannot create a model from an Oracle database. Why? Furthermore, in the \"About Visual Studio\" pop-up I don't see listed Oracle Developer Tools for Visual Studio. My fear is that the Oracle Developer Tools aren't working somehow, but the Oracle Universal Installer said everything was correctly installed (and I rebooted several times).</li>\n<li>What is  the best practise to achieve this requirement?</li>\n</ol>\n\n<p><strong>Long version</strong></p>\n\n<p>First, we created the Entity Data Model from a SQL Server database. So far so good.</p>\n\n<p>Then, we installed ODAC 11.2 Release 4 and Oracle Developer Tools for Visual Studio (11.2.0.3.0) from <a href=\"http://www.oracle.com/technetwork/topics/dotnet/utilsoft-086879.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/topics/dotnet/utilsoft-086879.html</a></p>\n\n<p>I have managed to initialize our model, <code>SIAEntities</code> (which inherites from  <code>ObjectContext</code>), with:</p>\n\n<pre><code>            System.Data.EntityClient.EntityConnectionStringBuilder builder = new System.Data.EntityClient.EntityConnectionStringBuilder();\n        builder.Metadata = \"res://*/SIA.Models.SIAModelOracle.ssdl|res://*/Models.SIAModel.csdl|res://*/Models.SIAModel.msl\";\n        builder.ProviderConnectionString = \"data source=***;persist security info=True;user id=***;password=***\";\n        builder.Provider = \"Oracle.DataAccess.Client\"; \n        SIAEntities db2 = new SIAEntities(builder.ConnectionString);\n</code></pre>\n\n<p>where <code>SIA.Models.SIAModelOracle.ssdl</code> is a custom written file (embedded resource) which overrides the SSDL part of the .edmx and has the following modifications:</p>\n\n<ol>\n<li><code>Provider</code> attribute of the root <code>Schema</code> node set to <code>Oracle.DataAccess.Client</code></li>\n<li>All data type names converted to their Oracle equivalent (datetime > date, nvarchar > varchar2, image > blob, etc)</li>\n<li>An <code>oracle.dataaccess.client</code> node added in the <code>web.config</code> which maps <code>bool</code> to <code>number(1,0)</code> and <code>tinyint</code> to <code>number(3,0)</code></li>\n</ol>\n\n<p>The error arrived when executing the first query (a simple <code>SELECT</code>): I tracked it as being due to the double quotes in the query that gets executed against the db, forcing it to be case-sensitive.</p>\n\n<p>By manually editing the custom .ssdl file and uppercasing everything I can let EF \"see\" the table and recognize a column after the other, but I didn't push this solution too far (thus stopping before getting to read the whole table) because a) it didn't seem too clean b) I have difficulties understanding the links between the .ssdl and the .csdl/.msl parts so I wasn't sure where to uppercase and where not to!</p>\n\n<p>Another strategy I was contemplating to avoid this manual work could be to try and generate a separate model from the Oracle schema and wrap the two <code>ObjectContext</code>s with another class that handles the choice between either of them, but as question #2 says, I cannot do that. </p>\n"},{"tags":["c#","wpf","oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":143,"score":1,"question_id":12541119,"title":"Oracle.DataAccess version could not load","body":"<p>I am having trouble with <code>Oracle.DataAccess</code> in <code>WPF</code>. I used <code>Oracle.DataAccess v4.0</code>\nwithout any problems. But now it updated to version 4.112 and when I add reference to this version in <code>WPF</code> the designer could not be loaded. It gives me the following error:</p>\n\n<pre><code>System.BadImageFormatException\nCould not load file or assembly 'Oracle.DataAccess, \nVersion=4.112.3.0, Culture=neutral, \nPublicKeyToken=89b483f429c47342' or one of its dependencies. \nAn attempt was made to load a program with an incorrect format.\n</code></pre>\n\n<p>Please note that program runs without any problem. I read that it can be due to \"target cpu\" in properties. I tested both x64 and x86 but nothing changes. How can I solve this problem.\n Thanks in advance</p>\n"},{"tags":["oracle","oracle10g"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":50,"score":-2,"question_id":12556003,"title":"Oracle Traces Pros and Cons","body":"<p>Can anyone please tell me the pros and cons of oracle traces. If we enable the traces what will be the impact on the query execution. Will it effect the performance of DataBase.</p>\n"},{"tags":["sql","oracle","concatenation","grouping","group-concat"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":109,"score":0,"question_id":12558509,"title":"Concatenate and group multiple rows in Oracle","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12145379/how-to-retrieve-two-columns-data-in-a-b-format-in-oracle\">how to retrieve two columns data in A,B format in Oracle</a>  </p>\n</blockquote>\n\n\n\n<p>(sorry this is my first time posting on stackoverflow and I have trouble formatting the tables properly...)</p>\n\n<p>Suppose I have a table like this:</p>\n\n<pre><code>NAME          GROUP_NAME\nname1         groupA\nname2         groupB\nname5         groupC\nname4         groupA\nname3         groupC\n</code></pre>\n\n<p>I'd like to have a result like this:</p>\n\n<pre><code>GROUP_NAME     NAMES\ngroupA         name1,name4\ngroupB         name2\ngroupC         name3,name5\n</code></pre>\n\n<p>If there were only one column in the table, I could concatenate the records by doing the following, but with grouping in the context, I really don't have much idea. Any suggestion is welcome, thanks in advance!</p>\n\n<p>Concatatenating one column table:</p>\n\n<pre><code>SELECT names \nFROM (SELECT SYS_CONNECT_BY_PATH(names,' ') names, level\n      FROM name_table\n\n      START WITH names = (SELECT names FROM name_table WHERE rownum = 1)\n      CONNECT BY PRIOR names &lt; names\n      ORDER BY level DESC)\n      WHERE rownum = 1 \n</code></pre>\n\n<h2>Updated:</h2>\n\n<p>I now have a solution by using LISTAGG:</p>\n\n<pre><code>SELECT\ngroup_name,\nLISTAGG(name, ', ')\nWITHIN GROUP (ORDER BY GROUP) \"names\"\nFROM name_table\nGROUP BY group_name\n</code></pre>\n\n<p>Still interested in a more \"general\" solution for cases when LISTAGG is not available...</p>\n"},{"tags":["sql","oracle","oracle10g"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":67,"score":-1,"question_id":12556369,"title":"Using multiple subqueries in oracle 10g","body":"<p>I have these tables with some values. </p>\n\n<pre><code>ticket_detail\nticket_header\nroute_header\nroute_detail\nfleet_header\n</code></pre>\n\n<p>Now I have this question for which I have to write query. </p>\n\n<pre><code>Select common ticket numbers \nfrom ticket header and ticket detail \nwhere route ids are greater than route_id \nwhich belong to the place with id ‘04’.\n</code></pre>\n\n<p><em>edit</em>     I tried it using </p>\n\n<pre><code>select * from   \n   (select ticket_number \n    from ticket_header\n    union \n    select ticket_number from ticket_detail)     \nwhere route_id &gt; (select route_id from ticket_detail where id = 4) \n</code></pre>\n\n<p>I tried doing it using sub-queries but it is confusing me. How can we correlate these three queries in a single query ? </p>\n"},{"tags":["oracle","variables","plsql","oracle11g","dbms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":12558018,"title":"Oracle PL/SQL: How to format the output","body":"<p>This is what I want:</p>\n\n<pre><code>    variable1:                1\n    variable225:              ValueOfIt\n    variable234234323:        $SomeAmount\n    variable1234234:          Good\n    variable1w23423423423423: September 11, 2001\n</code></pre>\n\n<p>This is something I have (I do type in manually the names of the variables like 'variable1'). I want something similar to variable.toString :-) and plus the dollar character and plus the amount of spaces between variable and value pairs so that they look cool.</p>\n\n<pre><code>variable1: 1\nvariable225: ValueOfIt\nvariable234234323: SomeAmount\nvariable1234234: Good\nvariable1w23423423423423: September 11, 2001\n</code></pre>\n\n<p>how can I format the output of DBMS_OUTPUT.PUT_LINE() in the above way?</p>\n\n<p>I don't want to hardcode or type in manually the name of the variables and the distance separating the variable name and value of it? If a variable name is long, all values of variables should start positionally after the longest variable name. Also, I want to do dollar character in front of a numeric variable without hardcoding it like '$'. </p>\n"},{"tags":["database","oracle","shell","script","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":58,"score":-2,"question_id":12229314,"title":"SPOOL objects_log.log PROMPT SCRIPT: / /.sql @.sql","body":"<p>I am reviewing some code. It contains a .sql file which contains this </p>\n\n<pre><code>****SPOOL install_cg_objects_log.log\nPROMPT SCRIPT: /cg/synonyms/cretate_synonyms_for_cg.sql\n@cg/sy/cretate_synonyms_for_cg.sql\nPROMPT SCRIPT: /cg/packages/in.sql\n@cg/packages/in.sql\nPROMPT SCRIPT:/cg/triggers/tr.sql\n@cg/triggers/trg.sql\nSPOOL OFF****\n</code></pre>\n\n<p>Can anybody please explain me what this script is doing.</p>\n"},{"tags":["oracle","oracleclient"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":117,"score":0,"question_id":12227850,"title":"Connect Oracle using SqlPlus by Domain User","body":"<p>Client and Server machines are under Domain. I am trying to connect orace db using SqlPlus tool. I am getting </p>\n\n<pre><code>ERROR:\nORA-01017: invalid username/password; logon denied \n</code></pre>\n\n<p>though username and pwd is right.</p>\n\n<p>Connect Command : </p>\n\n<pre><code>SqlPlus DomainName\\UserName/passowrd@school\n</code></pre>\n\n<p>Database address in tnsnames.ora</p>\n\n<pre><code>school =\n  (DESCRIPTION =\n    (ADDRESS_LIST =\n      (ADDRESS = (PROTOCOL = TCP)(HOST = machinename)(PORT = 1521))\n    )\n    (CONNECT_DATA =\n      (SERVICE_NAME = PRD)\n    )\n  )\n</code></pre>\n\n<p>Is there any wrong in database address? Way of connect?</p>\n\n<p>Thanks in Advance</p>\n"},{"tags":["java","oracle","jpa","orm","jax-ws"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":41,"score":-1,"question_id":12556123,"title":"JAX-WS generated classes to Database tables mapping","body":"<p>What is the easiest way to put generated by <code>JAX-WS</code> classes to the oracle database (in other words i need to have set of insert statements per each Java object)? Only ORM like <code>jpa/hibernate</code>? any alternatives?</p>\n\n<p>roundabout way is to check each class fields by reflection to get their names (annotated with <code>@XMLElement</code> annotation and currently equal to column names) to obtain column names for <code>INSERT</code> statements.</p>\n\n<p>pros/cons?)</p>\n\n<p>thank you in advance.</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":1,"view_count":79,"score":0,"question_id":12555687,"title":"why oracle is saying invalid character?","body":"<p>I am very new to Oracle, While i am practicing some examples i encountered with the problem \"<em>invalid character (SQL-HY000)</em>\". </p>\n\n<p>Below are sample table and data that i used  for my practice</p>\n\n<pre><code>CREATE TABLE games (\n  id INT NOT NULL PRIMARY KEY ,\n  city VARCHAR(20),\n  name VARCHAR(20)\n);     \n\nINSERT INTO games(id,city,name) VALUES (2004,'Athens','football'); \nINSERT INTO games(id,city,name) VALUES (2008,'Beijing','cricket');\n\nSELECT id, COUNT(*) over() as rowcount \n  FROM games g \n where name='football' \n GROUP BY CASE \n            WHEN name='football' \n            THEN g.name \n          END;\n</code></pre>\n\n<p>What is the invalid character in the select statement ?</p>\n\n<p>Any help will be greatly appreciated </p>\n"},{"tags":["oracle","plsql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":11973487,"title":"VARCHAR2 Becomes Numeric by passing as parameter to a function","body":"<p>I'm working on a school work and I have an error in my code.\nI have created a PLSQL package:</p>\n\n<pre><code>create or replace \nPACKAGE GestionProjets AS\n\n  TYPE Signaletique IS TABLE OF EMPLOYES%ROWTYPE INDEX BY BINARY_INTEGER; \n  TYPE TableNomDep IS TABLE OF VARCHAR2(40);\n\n  PROCEDURE AjouterProjets(ProjetRecord IN PROJETS%ROWTYPE);\n  PROCEDURE SupprimerProjet(DelNumPro IN PROJETS.numpro%TYPE);\n  --PROCEDURE ModifierProjet(newRecord IN PROJETS%ROWTYPE, oldRecord IN PROJETS%ROWTYPE);\n  FUNCTION ListerEmployes(dep1 IN DEPARTEMENTS.Nomdep%TYPE, dep2 IN DEPARTEMENTS.Nomdep%TYPE) RETURN Signaletique;\n\nEND GestionProjets;\n</code></pre>\n\n<p>That's the body of the function where I have an error:</p>\n\n<pre><code>  FUNCTION ListerEmployes(dep1 IN DEPARTEMENTS.Nomdep%TYPE, dep2 IN DEPARTEMENTS.Nomdep%TYPE) RETURN Signaletique AS\n\n    nomDeps TableNomDep;\n    SigTable Signaletique;\n    EXWrongDep1 EXCEPTION;\n    EXWrongDep2 EXCEPTION;\n\n  BEGIN\n\n    SELECT Nomdep \n    BULK COLLECT INTO nomDeps\n    FROM DEPARTEMENTS;\n\n    -- test if dep 1 est un parametre valide\n    IF NOT nomDeps.exists(dep1) THEN\n      RAISE EXWrongDep1;\n    END IF;\n\n    -- test if dep 2 est un parametre valide\n    IF NOT nomDeps.exists(dep2) THEN\n      RAISE EXWrongDep2;\n    END IF;\n\n\n\n\n    EXCEPTION\n      WHEN EXWrongDep1 THEN\n        RAISE_APPLICATION_ERROR(-20008, 'MAUVAIS PARAMETRE: ' || dep1 || ' N EXISTE PAS!');\n      WHEN EXWrongDep2 THEN\n        RAISE_APPLICATION_ERROR(-20008, 'MAUVAIS PARAMETRE: ' || dep2 || ' N EXISTE PAS!');\n            WHEN OTHERS THEN\n                RAISE_APPLICATION_ERROR (-20007, 'ERREUR INCONNU: ' ||  SQLCODE || ' - ' || SQLERRM);\n\n  END ListerEmployes;\n</code></pre>\n\n<p>When I try to execute the function, i get this error message:</p>\n\n<pre><code>DECLARE\n  tabel gestionprojets.Signaletique;\nBEGIN\n  tabel := gestionprojets.listeremployes('sdsd','sdsd');\nEND;\n\n\nORA-20007: ERREUR INCONNU: -6502 - ORA-06502: PL/SQL: numeric or value error: character to number conversion error\nORA-06512: at \"EDGE.GESTIONPROJETS\", line 108\nORA-06512: at line 4\n</code></pre>\n\n<p>I don't understand why I get this error message. The type of the Nomdep column is VARCHAR2(40).</p>\n"},{"tags":["php","oracle","oci"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12544938,"title":"PHP with Oracle - Error 12537 (TNS:connection closed)","body":"<p>I am trying to use PHP with Oracle 11g. I have configured the php.ini file (enabled php_oci8.dll, php_oci8_11g.dll)</p>\n\n<p>This is the testing code I'm using:\n    \n\n<pre><code>if ($conn = oci_connect('system', 'pass', '//localhost:1158/em')) {\n    print 'Successfully connected to Oracle Database XE!';\n    oci_close($conn);\n} else {\n    $errmsg = oci_error();\n    print 'Oracle connect error: ' . $errmsg['message'];\n}\n?&gt;\n</code></pre>\n\n<p>But I'm getting this error:\nOracle connect error:</p>\n\n<pre><code>ORA-12537: TNS:connection closed\n</code></pre>\n\n<p>Any solution?</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":64,"score":1,"question_id":12553380,"title":"Error when executing Oracle query","body":"<p>I am very new to Oracle, i am developing a query to my project. For me it seems to be everything is OK but when executing the query oracle is giving the error \"ORA-00905: missing keyword\". </p>\n\n<p>Her is my query:: </p>\n\n<pre><code>SELECT DISTINCT ba.uuid AS uuid\n     , COUNT(*) over() AS rowcount \nFROM basicaddress ba \nWHERE ba.postalcode='143456' \n   OR ba.lastname LIKE '%143456%' \n   OR ba.city LIKE '%143456%'\nGROUP BY CASE WHEN ba.postalcode='143456' THEN ba.postalcode, ba.uuid END\n       , CASE WHEN ba.lastname LIKE '%143456%' THEN ba.lastname, ba.uuid END\n       , CASE WHEN ba.city LIKE '%143456%' THEN ba.city, ba.uuid \n                                           ELSE ba.postalcode,ba.uuid END \nORDER BY CASE WHEN ba.postalcode='143456' THEN ba.postalcode END DESC\n       , CASE WHEN ba.lastname LIKE '%143456%' THEN ba.lastname END ASC\n       , CASE WHEN ba.city LIKE '%143456%' THEN ba.city ASC \n                                           ELSE ba.postalcode END DESC\n</code></pre>\n\n<p>What Key word i am missing ? Any help will be greatly appreciated.</p>\n"},{"tags":["sql","database","oracle","sql-order-by","minus"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12553295,"title":"Minus and order by in Oracle db","body":"<p>I want to do a minus operation on two tables in an Oracle DB. The first table is Chart_Year that has trackPosition, trackArtist, trackName, previewLink in it. The other table is Recommendation that has just trackArtist, trackName, previewLink in it. I want the final table to be ordered by trackPosition. The way I do it is order by trackArtist:</p>\n\n<pre><code>SELECT trackartist, trackname, previewlink \nFROM \n    (\n        SELECT \n            trackposition, trackartist, trackname, previewlink \n        FROM \n            chart_year \n        WHERE \n            chartsYear between 2004 and 2008 \n        ORDER BY trackposition ASC\n    )\n\nMINUS \n\nSELECT \n    trackartist, trackname, previewlink \nFROM \n    recommendation \nWHERE \n    user = 'bla'\n</code></pre>\n\n<p>Maybe I can do something like</p>\n\n<pre><code>SELECT \n    1 as trackPosition, trackartist, trackname, previewlink \nFROM \n    recommendation...\n</code></pre>\n\n<p>?</p>\n"},{"tags":["sql","oracle","ms-access"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12526196,"title":"Convert a Oracle style join to ANSI SQL Join","body":"<p>I have this query for an oracle Database, I'm accessing it using MS Access via ODBC.</p>\n\n<p>This query does not work on access I need to convert it in a standard SQL,I have tried several time with no success. I would like to know if could help me out thanks!</p>\n\n<pre><code>   select t2.s_studentreference \"Ad No\"\n        , t1.p_surname \"Surname\"\n        , t1.p_forenames \"Forenames\"\n        , t3.e_reference \"Reference\"\n        , t3.e_name \"Name\" \n    from capd_a t2\n       , capd_b t1\n       , capd_c t3 \n   where t2.s_id(+)=t1.p_id \n     and (t3.e_student=t1.p_id) \n     and (t3.e_reference='D /YR2A2/12') \n</code></pre>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":2,"up_vote_count":10,"down_vote_count":0,"view_count":25214,"score":10,"question_id":2337271,"title":"ORA-30926: unable to get a stable set of rows in the source tables","body":"<p>I am getting </p>\n\n<blockquote>\n  <p>ORA-30926: unable to get a stable set of rows in the source tables</p>\n</blockquote>\n\n<p>in the following query:</p>\n\n<pre><code>  MERGE INTO table_1 a\n      USING \n      (SELECT a.ROWID row_id, 'Y'\n              FROM table_1 a ,table_2 b ,table_3 c\n              WHERE a.mbr = c.mbr\n              AND b.head = c.head\n              AND b.type_of_action &lt;&gt; '6') src\n              ON ( a.ROWID = src.row_id )\n  WHEN MATCHED THEN UPDATE SET in_correct = 'Y';\n</code></pre>\n\n<p>I've ran <code>table_1</code> it has data and also I've ran the inside query (<code>src</code>) which also has data. </p>\n\n<p>Why would this error come and how can it be resolved?</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":109,"score":1,"question_id":12549460,"title":"using pl/sql to update sequences","body":"<p>We have a sql script to update a set of sequences after seed data populated our tables. The code below would not work:</p>\n\n<pre><code>declare\ncursor c1 is \n    select\n      'select nvl(max(id),0) from '||uc.table_name sql_text,\n      uc.table_name||'_SEQ' sequence_name \n    from\n      user_constraints uc,\n      user_cons_columns ucc\n    where uc.constraint_type='P'\n      and ucc.constraint_name = uc.constraint_name\n      and ucc.column_name='ID'\n      and uc.owner='ME';\n\nalter_sequence_text varchar2(1024);\nTYPE generic_cursor_type IS REF CURSOR;\nmax_id number;\nc2 generic_cursor_type;\nbegin\nfor r1 in c1 loop\n    open c2 for r1.sql_text;\n    fetch c2 into max_id;\n    close c2;\n\n    if( max_id != 0 ) then\n        dbms_output.put_line( 'seq name = '||r1.sequence_name );\n        execute immediate 'alter sequence '||r1.sequence_name||' increment by '||to_char(max_id);\n        dbms_output.put_line( 'max_id = '||to_char(max_id) );\n        execute immediate 'select '||r1.sequence_name||'.nextval from dual';\n        dbms_output.put_line( 'sequence value = '||to_char(next_id) );\n        execute immediate 'alter sequence '||r1.sequence_name||' increment by 1';\n        dbms_output.put_line( 'sequence: '||r1.sequence_name||' is at '||to_char(max_id+1) );\n    end if;\nend loop;\nend;\n</code></pre>\n\n<p>After searching I found a reference that stated I needed to change the line:</p>\n\n<pre><code>execute immediate 'select '||r1.sequence_name||'.nextval from dual'\n</code></pre>\n\n<p>and add 'into next_id;' (of course declaring next_id appropriately) so the result would be:</p>\n\n<pre><code>execute immediate 'select '||r1.sequence_name||'.nextval from dual into next_id;\n</code></pre>\n\n<p>I've only dealt lightly with pl/sql and sql in general and am interested to know why this change was necessary to make the script work correctly.</p>\n\n<p>Thanks.</p>\n"},{"tags":["sql","oracle","query"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":79,"score":2,"question_id":12550500,"title":"Query for most frequent value or neither","body":"<p>I need to show the most frequent value between two groups on a selection, and it has to go along a message, so bear with me. I'm using Oracle XE and this is what I've got so far:</p>\n\n<pre><code>SELECT (\n    CASE type\n        WHEN 0 THEN 'heroes'\n        WHEN 1 THEN 'villains'\n        ELSE 'neither'\n    END\n) AS MostFrequent\nFROM (\n    SELECT type\n    FROM mutants\n    GROUP BY type\n    ORDER BY count(*) DESC\n) WHERE rownum &lt;= 1\n</code></pre>\n\n<p>So far if there are more Mutants with type 0 than type 1 it shows Heroes and then when there are more of type 1 than type 0, it shows villains, but when they're tied, it shows no data, and that doesn't work for me :( I need it to say 'neither', so any help will be widely appreciated.</p>\n"},{"tags":["oracle","plsql","oracle10g","oracle11g","plsqldeveloper"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":118,"score":1,"question_id":12463526,"title":"PLSQL CLOBS into variables","body":"<p>I'm trying to save a <code>CLOB</code> into a variable to perform operations like extract and such. I have this code:</p>\n\n<pre><code>DECLARE\n  clob_rec CLOB;\n  n_rec NUMBER:=100;\nBEGIN\n  SELECT LOB INTO clob_rec FROM table1 WHERE ID = 1234;\n  n_rec := clob_rec.EXTRACT('//XPTO/text()', 'xmlns:XPTO').getNumVal();\nEND;\n</code></pre>\n\n<p>I want to save multiple values from the <code>XML</code> to various variables like <code>n_rec</code>. How can get an \"instance of the object (CLOB)\" to perform functions or methods like <code>extract()</code>?</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":4,"view_count":291,"score":-1,"question_id":12549029,"title":"sql error \"ORA-01722: invalid number\"","body":"<p>A very easy one for someone, \nThe following insert is giving me the \"ORA-01722: invalid number\" error, why?</p>\n\n<pre><code>INSERT INTO CUSTOMER VALUES (1,'MALADY','Claire','27 Smith St Caulfield','0419 853 694');\nINSERT INTO CUSTOMER VALUES (2,'GIBSON','Jake','27 Smith St Caulfield','0415 713 598');\nINSERT INTO CUSTOMER VALUES (3,'LUU','Barry','5  Jones St Malvern','0413 591 341');\nINSERT INTO CUSTOMER VALUES (4,'JONES','Michael','7  Smith St Caulfield','0419 853 694');\nINSERT INTO CUSTOMER VALUES (5,'MALADY','Betty','27 Smith St Knox','0418 418 347');\n</code></pre>\n"},{"tags":["sql","oracle","views","oracle9i","ora-00932"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":774,"score":3,"question_id":9228812,"title":"Filter \"text\" column on all_views","body":"<p>Is there any way I could filter the <strong>text</strong> column on oracle's <strong>all_views</strong> table?</p>\n\n<p>For example:</p>\n\n<pre><code>SELECT * \n  FROM ALL_VIEWS \n  WHERE UPPER(TEXT) LIKE '%FOO%';\n</code></pre>\n\n<p>Exception:</p>\n\n<pre><code>ORA-00932: inconsistent datatypes: expected NUMBER got LONG\n00932. 00000 -  \"inconsistent datatypes: expected %s got %s\"\n</code></pre>\n\n<p>Edit:</p>\n\n<pre><code>DESC ALL_VIEWS\nName             Null     Type           \n---------------- -------- -------------- \nOWNER            NOT NULL VARCHAR2(30)   \nVIEW_NAME        NOT NULL VARCHAR2(30)   \nTEXT_LENGTH               NUMBER         \nTEXT                      LONG()         \nTYPE_TEXT_LENGTH          NUMBER         \nTYPE_TEXT                 VARCHAR2(4000) \nOID_TEXT_LENGTH           NUMBER         \nOID_TEXT                  VARCHAR2(4000) \nVIEW_TYPE_OWNER           VARCHAR2(30)   \nVIEW_TYPE                 VARCHAR2(30)   \nSUPERVIEW_NAME            VARCHAR2(30)   \n</code></pre>\n"},{"tags":["sql","oracle","ora-00904"],"answer_count":4,"favorite_count":0,"up_vote_count":6,"down_vote_count":1,"view_count":6191,"score":5,"question_id":7410627,"title":"Weird Oracle SQL \"Invalid Identifier\" error","body":"<p>Can anyone help me figure out why I get an error on <code>cms.CRIME_ID</code>:</p>\n\n<blockquote>\n  <p>invalid identifier  </p>\n</blockquote>\n\n<pre><code>select c.criminal_id, c.first, c.last, cms.CRIME_ID, cc.crime_code, cc.fine_amount\nfrom criminals c join crimes cms on c.criminal_id = cms.criminal_id\njoin crime_charges cc using (crime_id)\norder by c.first, c.last;\n</code></pre>\n\n<p>I know for an absolute fact that column exists and I can reference every other column in that table except for that. </p>\n\n<p>The only thing different about that column is that it is the primary key for that table.</p>\n\n<p>EDIT: Here is the error in full and the table creation script.</p>\n\n<pre><code>Error starting at line 1 in command:\nselect c.criminal_id, c.first, c.last, cms.CRIME_ID, cc.crime_code, cc.fine_amount\nfrom criminals c join crimes cms on c.criminal_id = cms.criminal_id\njoin crime_charges cc using (crime_id)\norder by c.first, c.last\nError at Command Line:1 Column:39\nError report:\nSQL Error: ORA-00904: \"CMS\".\"CRIME_ID\": invalid identifier\n00904. 00000 -  \"%s: invalid identifier\"\n*Cause:    \n*Action:\n</code></pre>\n\n<hr>\n\n<pre><code> CREATE TABLE crimes\n      (crime_id NUMBER(9),\n       criminal_id NUMBER(6),\n       classification CHAR(1),\n       date_charged DATE,\n       status CHAR(2),\n       hearing_date DATE,\n       appeal_cut_date DATE);\n\nALTER TABLE crimes\n  MODIFY (classification DEFAULT 'U');\nALTER TABLE crimes\n  ADD (date_recorded DATE DEFAULT SYSDATE);\nALTER TABLE crimes\n  MODIFY (criminal_id NOT NULL);\nALTER TABLE crimes\n  ADD CONSTRAINT crimes_id_pk PRIMARY KEY (crime_id);\nALTER TABLE crimes\n  ADD CONSTRAINT crimes_class_ck CHECK (classification IN('F','M','O','U'));\nALTER TABLE crimes\n  ADD CONSTRAINT crimes_status_ck CHECK (status IN('CL','CA','IA'));\nALTER TABLE crimes\n  ADD CONSTRAINT crimes_criminalid_fk FOREIGN KEY (criminal_id)\n             REFERENCES criminals(criminal_id);\nALTER TABLE crimes\n  MODIFY (criminal_id NOT NULL);\n</code></pre>\n\n<hr>\n\n<p>EDIT2: Also, I should probably mention that when not using joins and just regular select statements I can access the column just fine, as in the following code example:</p>\n\n<pre><code>select c.criminal_id, c.first, c.last, cms.crime_id, cc.crime_code, cc.fine_amount\nfrom criminals c, crime_charges cc, crimes cms\nwhere c.criminal_id = cms.criminal_id\nand cms.crime_id = cc.crime_id\norder by c.first, c.last;\n</code></pre>\n"},{"tags":["oracle","reference"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12512995,"title":"reference to table from another schema in oracle","body":"<p>I have 2 different schemas ( finn, hr ).<br>\nI have a table from hr whose name is ( hr_employee_info_tbl ) and another table from finn whose name is FINN_BUDGET_TBL.<br>\nI tried to make a reference from FINN_BUDGET_TBL to hr_employee_info_tbl but get ora-01031 insufficient privileges.</p>\n\n<p>which privilige i have to grant my user?</p>\n\n<p>-- Create/Recreate primary, unique and foreign key constraints </p>\n\n<pre><code>alter table FINN_BUDGET_TBL\n  add constraint employee_id_fk foreign key (EMPLOYEE_ID)\n  references hr.hr_employee_info_tbl (EMPLOYEE_INFO_ID);\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":12544953,"title":"how to write a database query to seach for the customers using address","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12538926/database-query-to-search-using-address\">Database query to search using address</a>  </p>\n</blockquote>\n\n\n\n<p>I am developing a search functionality to search for dealers by their address (i.e by postcode(zip) or by name or by city) for my project. User will be provided with only one html input field to enter the search term (users can enter only one search term at a time i.e either zip code or name or city (combinations are not allowed)).</p>\n\n<p>The conditions to develop a query are as below</p>\n\n<ul>\n<li>when user search by zip code, matched results should be displayed in descending order</li>\n<li>when user search by name matched results should be display alphabetically same as city name</li>\n</ul>\n\n<p>Some times there is a possibility that name can also contains zip code in that case results should be shorted by zip code.</p>\n\n<p>I tried like this</p>\n\n<pre><code>select city, postcode, name \nfrom dealers \nwhere name ='xyz' \n OR postcode ='xyz' \n OR city='XYZ' \nORDER BY postcode desc\n</code></pre>\n\n<p>But Ii want <code>ORDER BY</code> for every condition. for example 'xyz' matches to the firstname I want to sort the result in ascending order.</p>\n\n<p>How can i do that? Any suggestions will be greatly appriciated</p>\n"},{"tags":["sql","oracle","timestamp","date-arithmetic"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":12546812,"title":"SQL Oracle Timestamp - arithmetic between two columns","body":"<p>I use Oracle database.\nIn my table, I have one column of type <code>Timestamp</code>, and another <code>Int</code> column which holds amount of hours.\nHow I subtract those hours from the other <code>Timestamp</code> column?</p>\n\n<p>Meanwhile I have something like that: </p>\n\n<pre><code>SELECT (START_TIME - interval 'CLOSING_HOURS' HOUR) as CLOSING_TIME \n FROM APP.TRUMPS\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":96,"score":-1,"question_id":12538926,"title":"Database query to search using address","body":"<p>I am developing a search functionality to search for dealers by their <code>address</code> (i.e by <code>postcode</code>(zip) or by <code>name</code> or by <code>city</code>) for my project. User will be provided with only one html input field to enter the search term (users can enter only one search term at a time i.e either <code>zip code</code> or <code>name</code> or <code>city</code> (combinations are not allowed)).</p>\n\n<p>The conditions to develop a query are as below</p>\n\n<ol>\n<li><p>when user search by <code>zip code</code>, matched results should be displayed in descending order</p></li>\n<li><p>when user search by <code>name</code> matched results should be display alphabetically</p></li>\n<li><p>same as city name </p></li>\n</ol>\n\n<p>Some times there is a possibility that name can also contains <code>zip code</code> in that case results should be shorted by <code>zip code</code>.</p>\n\n<p>I tried like this </p>\n\n<pre><code>select city, postcode, name\n  from dealers\n  where name ='xyz' OR\n        postcode ='xyz' OR\n        city='XYZ'\n  ORDER BY postcode desc\n</code></pre>\n\n<p>But i want 'ORDER BY' for every condition. for example 'xyz' matches to the firstname i want to sort the result in ascending order. </p>\n\n<p>How can i do that ? Any suggestions will be greatly appriciated </p>\n"},{"tags":["sql","oracle","oracle11g"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":119,"score":2,"question_id":12539734,"title":"how to add more than 1000 values with NOT IN clause","body":"<p>I have comma delimited id's that I want to use in NOT IN clause.. \nI'm using oracle 11g. </p>\n\n<pre><code>select * from table where ID NOT IN (1,2,3,4,...,1001,1002,...)\n</code></pre>\n\n<p>results in</p>\n\n<pre><code>ORA-01795: maximum number of expressions in a list is 1000\n</code></pre>\n\n<p>I don't want to use temp table. am trying considering doing this</p>\n\n<pre><code>select * from table1 where ID NOT IN (1,2,3,4,…,1000) AND \nID NOT IN (1001,1002,…,2000)\n</code></pre>\n\n<p>Is there any other better workaround to this issue?</p>\n"},{"tags":["sql","oracle","database-design","intersection"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12544472,"title":"Create database in oracle linking/joining table","body":"<p>I'm creating a mock up database for the first time. I have created the Relational Model which consists of a many to many relationship. In the Relational Model it has a separate linking/joining table. When creating the database do I need to create this linking table as a separate table also? or can I just put each foreign keys in the many to many tables?\nIf I need a separate table how do I link these tables together via syntax?</p>\n\n<p>Thanks</p>\n"},{"tags":["php","oracle","curl"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":12493845,"title":"In my PHP code I use an API to connect to a database. I am getting Warning: simplexml_load_string():","body":"<p>I am new to php and need to query an oracle database using their API. I can send queries only as xml or json in the body. I am not sure if I am doing it right. Please find the code</p>\n\n<pre><code>&lt;?php\n    //HTTP Headers\n    $header = array('Content-Type = application/xml','Accept = application/xml');\n    $xmlquery =  &lt;&lt;&lt;XML\n    ---- query----\n    XML;\n    $body = simplexml_load_string($xmlquery);\n    //URL containing query parameters : appGUID, pagenumber, pagesize \n    $url='http://&lt;server name&gt;?appGUID=&lt;GUID&gt;&amp;pagenumber=1&amp;pagesize=50';\n    $ch = curl_init();\n    curl_setopt($ch,CURLOPT_URL,$url);\n    curl_setopt($ch, CURLOPT_HEADER, true);\n    curl_setopt($ch, CURLOPT_HTTPHEADER, $header);\n    curl_setopt($ch,CURLOPT_POST,true);\n    curl_setopt($ch, CURLOPT_POSTFIELDS,$body);\n    //CURLOPT_POSTFIELDS : The full data to post in a HTTP \"POST\" operation.\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n    $response = curl_exec($ch);\n    var_dump ($response);\n    curl_close($ch);\n    ?&gt;\n</code></pre>\n"},{"tags":["oracle","jboss","datasource"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":148,"score":1,"question_id":10978709,"title":"JBOSS 7.0 WebProfile configure Oracle 11g Driver","body":"<p>I've configured JBOSS datasource with a new module:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;module xmlns=\"urn:jboss:module:1.0\" name=\"com.oracle.jdbc\"&gt;\n  &lt;resources&gt;\n    &lt;resource-root path=\"ojdbc6.jar\"/&gt;\n  &lt;/resources&gt;\n  &lt;dependencies&gt;\n    &lt;module name=\"javax.api\"/&gt;\n  &lt;/dependencies&gt;\n&lt;/module&gt;\n</code></pre>\n\n<p>in the folder %JBOSS_HOME%\\modules\\com\\oracle\\jdbc\\main </p>\n\n<p>I put in the \"main\" folder also the driver itself: ojdbc6.jar</p>\n\n<p>Then i configure a datasource with driver:</p>\n\n<pre><code>&lt;datasource jndi-name=\"java:/jdbc/MyPool\" pool-name=\"MyPool\" enabled=\"true\" jta=\"true\" use-java-context=\"true\" use-ccm=\"true\"&gt;\n        &lt;connection-url&gt;jdbc:oracle:thin:@my.server.com:1521:mydbname&lt;/connection-url&gt;\n        &lt;driver&gt;oracle&lt;/driver&gt;\n        &lt;security&gt;\n            &lt;user-name&gt;myusername&lt;/user-name&gt;\n            &lt;password&gt;mypassword&lt;/password&gt;\n        &lt;/security&gt;\n    &lt;/datasource&gt;\n    &lt;drivers&gt;\n        &lt;driver name=\"oracle\" module=\"com.oracle.jdbc\"&gt;&lt;xa-datasource-class&gt;oracle.jdbc.OracleDriver&lt;/xa-datasource-class&gt;&lt;/driver&gt;\n    &lt;/drivers&gt;\n</code></pre>\n\n<p>When I start the application server i receive the error:</p>\n\n<p><strong>New missing/unsatisfied dependencies:\n   service jboss.jdbc-driver.oracle (missing)</strong></p>\n\n<p>The configuration seems to be good to the documentation, may be there is problem with the version of JBOSS or Oracle Driver?</p>\n\n<p>Thanks</p>\n"},{"tags":["oracle","persistence","datasource","jboss7.x","ojdbc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":367,"score":0,"question_id":12532024,"title":"Jboss 7 - Oracle Datasource not working","body":"<p>I'm working on a Web App with just one WAR project. It uses JPA and has a DataSource that I need to configure to run on <strong>JBOSS 7</strong>. The database is <strong>Oracle</strong>.</p>\n\n<p>I'm getting this error:</p>\n\n<pre><code>JBAS014775:    New missing/unsatisfied dependencies:\n      service jboss.naming.context.java.jboss.resources.jboss.jdbc.batchAdminDB\n</code></pre>\n\n<p>I've followed instructions for using dataSource on Jboss. So I have these configurations:</p>\n\n<p><strong>{JBOSS_HOME}/modules/com/oracle/ojdbc6/main/module.xml:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;module xmlns=\"urn:jboss:module:1.1\" name=\"com.oracle.ojdbc6\"&gt;\n    &lt;resources&gt;\n        &lt;resource-root path=\"ojdbc6.jar\"/&gt;\n    &lt;/resources&gt;\n    &lt;dependencies&gt;\n        &lt;module name=\"javax.api\" /&gt;\n        &lt;module name=\"javax.transaction.api\"/&gt;\n        &lt;module name=\"javax.servlet.api\" optional=\"true\"/&gt;\n    &lt;/dependencies&gt;\n&lt;/module&gt;\n</code></pre>\n\n<p>ojdbc6.jar exists and the name is correct.</p>\n\n<p><strong>standalone.xml</strong></p>\n\n<pre><code>&lt;datasources&gt;\n\n                &lt;datasource jndi-name=\"java:jboss/jdbc/batchAdminDB\" pool-name=\"batchAdminDB\" enabled=\"true\" use-java-context=\"true\"&gt;\n                    &lt;connection-url&gt;jdbc:oracle:thin:@HOST:PORT/xe&lt;/connection-url&gt;\n                    &lt;driver&gt;oracle&lt;/driver&gt;\n                    &lt;security&gt;\n                        &lt;user-name&gt;USER&lt;/user-name&gt;\n                        &lt;password&gt;PASSW&lt;/password&gt;\n                    &lt;/security&gt;\n                &lt;/datasource&gt;\n                &lt;drivers&gt;\n                    &lt;driver name=\"oracle\" module=\"com.oracle.ojdbc6\"&gt;\n                        &lt;driver-class&gt;oracle.jdbc.driver.OracleDriver&lt;/driver-class&gt;\n                        &lt;xa-datasource-class&gt;oracle.jdbc.xa.client.OracleXADataSource&lt;/xa-datasource-class&gt;\n                    &lt;/driver&gt;\n                &lt;/drivers&gt;\n            &lt;/datasources&gt;\n</code></pre>\n\n<p>On the application:\nMETA-INF/<strong>persistence.xml:</strong></p>\n\n<pre><code>&lt;persistence-unit name=\"batchAdminEM\" transaction-type=\"JTA\"&gt;\n    &lt;jta-data-source&gt;java:jboss/jdbc/batchAdminDB&lt;/jta-data-source&gt;\n\n    &lt;class&gt;...&lt;/class&gt;\n ...&lt;/persistence-unit&gt;\n</code></pre>\n\n<p>When Jboss starts (without the app) it get to read(bound) the datasource. The error comes when I try to deploy the app, it doesn't run.</p>\n\n<p>More of StackTrace to help:</p>\n\n<pre><code>15:57:46,888 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-1) JBAS010400: Bound data source [java:jboss/jdbc/batchAdminDB]\n...\n15:57:52,356 INFO  [org.hibernate.ejb.Ejb3Configuration] (MSC service thread 1-2) HHH000204: Processing PersistenceUnitInfo [\n    name: batchAdminEM\n    ...]\n15:57:53,649 ERROR [org.jboss.as] (MSC service thread 1-1) JBAS015875: JBoss AS 7.1.1.Final \"Brontes\" started (with errors) in 13255ms - Started 325 of 568 services (165 services failed or missing dependencies, 76 services are passive or on-demand)\n15:57:53,861 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment \"BatchAdmin.war\" was rolled back with failure message {\"JBAS014771: Services with missing/unavailable dependencies\" =&gt; [\"jboss.naming.context.java.module.BatchAdmin.BatchAdmin.env.jboss.jdbc.batchAdminDBjboss.naming.context.java.jboss.resources.jboss.jdbc.batchAdminDBMissing[jboss.naming.context.java.module.BatchAdmin.BatchAdmin.env.jboss.jdbc.batchAdminDBjboss.naming.context.java.jboss.resources.jboss.jdbc.batchAdminDB]\"]}\nJBAS014775:    New missing/unsatisfied dependencies:\n      service jboss.naming.context.java.jboss.resources.jboss.jdbc.batchAdminDB (missing) dependents: [service jboss.naming.context.java.module.BatchAdmin.BatchAdmin.env.jboss.jdbc.batchAdminDB] \n\n15:57:53,934 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {\"JBAS014653: Composite operation failed and was rolled back. Steps that failed:\" =&gt; {\"Operation step-2\" =&gt; {\"JBAS014771: Services with missing/unavailable dependencies\" =&gt; [\"jboss.naming.context.java.module.BatchAdmin.BatchAdmin.env.jboss.jdbc.batchAdminDBjboss.naming.context.java.jboss.resources.jboss.jdbc.batchAdminDBMissing[jboss.naming.context.java.module.BatchAdmin.BatchAdmin.env.jboss.jdbc.batchAdminDBjboss.naming.context.java.jboss.resources.jboss.jdbc.batchAdminDB]\"]}}}\n</code></pre>\n"},{"tags":["oracle"],"answer_count":8,"favorite_count":7,"up_vote_count":36,"down_vote_count":0,"view_count":12608,"score":36,"question_id":880230,"title":"difference between a User and a Schema in Oracle?","body":"<p>What is the difference between a User and a Schema in Oracle? </p>\n"},{"tags":["sql","oracle"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":137,"score":0,"question_id":12541991,"title":"delete records from tables (many-to-many relationship)","body":"<p>I have three tables:</p>\n\n<pre><code>PERSON\n-ID_PERSON\n-NAME\n-SURNAME\n\nPERSON_ADDRESS\n-ID_PERSON\n-ID_ADDRESS\n\nADDRESS\n-ID_ADDRESS\n-NR_LOCAL\n-NR_HOME\n-PLACE\n</code></pre>\n\n<p>I would like delete all records with ADRESS table where id_person=1</p>\n\n<p>My query ( in oracle )</p>\n\n<pre><code>DELETE * FROM address INNER JOIN person_addres ON\naddress.id_address=person_addres.id_address \nWHERE person_addres.id_person=1 ;\n</code></pre>\n"},{"tags":["database","oracle","java-ee","lan"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12521918,"title":"Accessing ORACLE database Server from multiple Java EE clients in a LAN network","body":"<p>I need to access a shared single Oracle database server from multiple clients using a Java EE application in a LAN network: any ideas, tutorials, or books?</p>\n"},{"tags":["sql","oracle"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12539788,"title":"Oracle SQL -- When a Case query becomes more useful than running two separate querys","body":"<p>I have the below query:</p>\n\n<pre><code>--Total DLs--\nselect sum(DLs) as DLs_Total\nFrom\n (\nSelect\nCount(T.Create_Dtime) As Dls\nFrom Player_Tapjoy T \nInner Join Player P On T.Player_Id=P.Player_Id\nWhere P.ReferredBy IS NULL\nUnion All\nSelect\nCount(Pt.Create_Dtime) As DLs\nFrom Player_Aux_Pt Pt\nInner Join Player P On Pt.Player_Id=P.Player_Id\nWhere\nPt.Site = 'AppCircle'\nAnd P.ReferredBy IS NULL\n)\n</code></pre>\n\n<p>I'm going to run this report twice, once for \"And P.ReferredBy is Null\", and once for \"And P.ReferredBy is NOT Null\".</p>\n\n<p>I feel like this may be a good time to switch over to case queries...so if in the case of null or not null, one query will produce two separate results?</p>\n"},{"tags":[".net","oracle","enterprise-library"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":451,"score":1,"question_id":7417771,"title":"What is Oracle RefCursor type equavalent in System.Data.DbType enum in C#?","body":"<p>I'm programming a DataAccess code using Microsoft Enterprise Library, and I'm connecting to Oracle Database. When I try to call a Stored Procedure which expecting an out parameter of type RefCursor I can't pass it this type since the only available types are these types in \"System.Data.DbType\".\nSo which type should I pickup for Oracle \"RefCursor\" DbType?</p>\n"},{"tags":["oracle","client","oracle9i"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":6663,"score":1,"question_id":2549231,"title":"Is an Oracle 9i Client compatible with an Oracle 11g Server?","body":"<p>We currently have an Oracle 9i Client running on an HPUX Itanium platform and are looking at upgrading the Server from an Oracle 9i Windows 2000 Server to an Oracle 11g W2K3 Server.</p>\n\n<p>Is an Oracle 9i Client compatible with an Oracle 11g Server?</p>\n\n<p>Are there any problems with this configuration or is it recommended to upgrade the Oracle 9i Client to 11g as well?</p>\n"},{"tags":["oracle","stored-procedures","oracle10g","informatica-powercenter","informatica"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":105,"score":0,"question_id":12537002,"title":"Importing a stored procedure from oracle to Informatica","body":"<p>I have to import a stored procedure from Oracle database into Informatica.\nBut when I try to use the Stored Procedure Transformation I cannot view the respective stored procedure. \nI am using the correct oracle driver since I don't have any trouble in importing target database tables.\nI tried viewing the stored procedures in the oracle database using \n<code>select * from all_objects where object_type='FUNCTION'</code> but could not find the\nfunction I am looking for.\nPlease advise me on these:</p>\n\n<ul>\n<li><p>Can we view the list and code of Stored procedure(s)/function(s) in Oracle</p></li>\n<li><p>What am I missing in Informatica stored procedure transformation?</p></li>\n</ul>\n"},{"tags":["java","oracle","jpa","eclipselink"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":493,"score":0,"question_id":5498895,"title":"Closing db session if a JPA query takes too long","body":"<p>We are using JPA to persist and merge entities into an Oracle 11g db, in an application running on glassfish v3.0.1</p>\n\n<p>We have been trying to close the session when a query is taking too long to finish or commit. But the session is still open in the database.</p>\n\n<p>This is the thread that executes the query and tries to close everything. </p>\n\n<pre><code>private class PRunnable implements Runnable {\n\n    MyEntity myEntity;\n\n    public PRunnable(MyEntity myEntity) {\n        this.myEntity = myEntity;\n    }\n\n    @Override\n    public void run() {\n\n        final EntityManager em = factory.createEntityManager();\n        em.getTransaction().begin();\n\n        Runnable r = new Runnable() {\n\n            @Override\n            public void run() {\n\n                try {\n\n                    //It can get stuck in the merge or committing\n                    em.merge(myEntity);\n                    em.flush();\n\n                    em.getTransaction().commit();\n\n                } catch (Exception e) {\n\n                    em.getTransaction().rollback();\n                } finally {\n\n                    em.clear();\n                    em.close();\n                }\n            }\n        };\n        Thread t = new Thread(r);\n\n        t.start();\n        try {\n            t.join(500);\n        } catch (Exception e) {\n            //It's never getting here\n        }\n\n        if (t.isAlive()) {\n            //If the query takes to long it successfully closes the em\n            em.clear();\n            em.close();\n        }\n    }\n}\n</code></pre>\n\n<p>We have also tried:\n(em.unwrap(JpaEntityManager.class).getServerSession()).disconnect();\n(em.unwrap(java.sql.Connection.class)).close();</p>\n\n<p>But the db session is always alive. </p>\n\n<p>Do you know any way of successfully close the session on the database?</p>\n"},{"tags":["oracle","oracle10g","oracle11g","sql-loader"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12536182,"title":"Whats wrong with this Oracle CTL File or data?","body":"<p>My data is this:</p>\n\n<pre><code>ID,SCORE_DATE,TYPE,SCORE,RAW_SCORE,RANK\nA1234,2012-09-05 23:59:59,FOOTBALL_TEAM_MIDDLE_AND_OLD_1234,10,0.123,1\nA5678,2012-09-05 23:59:59,FOOTBALL_TEAM_MIDDLE_AND_OLD_1234,20,0.456,2\n</code></pre>\n\n<p>CTL FILE:</p>\n\n<pre><code>load data           \ninfile 'E:\\Data\\Sample.csv'\nbadfile 'E:\\Data\\Sample.bad'\nAPPEND into table TABLE1    \nfields terminated by \",\" optionally enclosed by '\"'\nTRAILING NULLCOLS               \n(   \n DRIVER,\n STARTDTE \"to_date(SUBSTR(:STARTDTE,1,10),'YYYY-MM-DD') - 27\",\n TYPE  CONSTANT 'FOOTBALL',\n SCORE   ,\n RANKSCORE \":SCORE\",\n RANK    ,\n ENDDTE \"to_date(SUBSTR(:STARTDTE,1,10),'YYYY-MM-DD')\",\n LOADDT     \"sysdate\"\n)\n</code></pre>\n\n<p>Here is my table structure:</p>\n\n<pre><code>CREATE TABLE \"TABLE1\"\n  (\n    \"DRIVER\" VARCHAR2(50 BYTE),\n    \"STARTDTE\" DATE,\n    \"SCORE\"           NUMBER,\n    \"ENDDTE\" DATE,\n    \"TYPE\" VARCHAR2(20 BYTE),\n    \"RANK\"       NUMBER,\n    \"RANKSCORE\"  NUMBER,\n    \"LOADDT\"     VARCHAR2(20 BYTE)\n  );\n</code></pre>\n\n<p>I am getting an error message for every row loaded:\nRecord 3: Rejected - Error on table TABLE1, column SCORE.\nORA-01722: invalid number</p>\n\n<p>Whats wrong?</p>\n"},{"tags":["oracle","uml"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12524801,"title":"Generate PL/SQL from UML","body":"<p>Are there any tool (open source or freeware) to generate the PL/SQL code (with objects) from a UML Diagram?</p>\n\n<p>Thanks!</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12537817,"title":"Real time Oracle SQL analyzer tool","body":"<p>I guys i am looking for a tool which can analyze the sql quries at runtime.\nI want to capture all the quries that's executed during an invocation of a function in an web application during runtime.It would be great if you can help me with this.\nRegards</p>\n"},{"tags":["oracle","sas"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":91,"score":4,"question_id":11326807,"title":"SAS Oracle Data Issues","body":"<p>I'm having an issue regarding special characters. I use SAS to connect to an Oracle database and then download tables from Oracle to SAS datasets. </p>\n\n<p>Previously, special characters where downloaded correctly without a problem. I've recently received a new laptop at work and since then there has been some data issues. </p>\n\n<p>Basically, what is happening is that special characters are removed or completely replaced. For instance, é is being replaced by e. á replaced with a. Other special characters are just completely removed and replaced with '?'</p>\n\n<p>I've read a bunch of articles about encoding, transcoding and NLS_LANGUAGE, but I just can't figure out why this is happening and how to fix it. My other colleagues who are still using old laptops do not have this same issue!</p>\n\n<p>Please, any help would be GREATLY appreciated</p>\n"},{"tags":["sql","oracle","plsql"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":130,"score":1,"question_id":11956215,"title":"Oracle SQL: Why is my function outputting null?","body":"<pre><code>CREATE OR REPLACE FUNCTION get_status_by_member_id\n(p_member_id NUMBER) \nRETURN CHAR\nAS\n  v_status CHAR(1);\nBEGIN\n  select status\n  into v_status\n  from members\n  where member_id = p_member_id;\n  if v_status is null then\n    return v_status || 'N';\n  else\n     return v_status;\n  end if;\nEND get_status_by_member_id;\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":12532399,"title":"How can I retrieve rows in a given sequence in Oracle / SQL?","body":"<p>I have a table MY_TABLE with a primary key MY_PK. Then, I have a list of ordered primary keys, for example (17,13,35,2,9).</p>\n\n<p>Now I want to retrieve all rows with these primary keys, and keep the order of the rows in the same way as the given list of keys.</p>\n\n<p>What I was initally doing was:</p>\n\n<pre><code>SELECT * FROM MY_TABLE WHERE MY_PK IN (:my_list)\n</code></pre>\n\n<p>But then the order of the returned rows is random and does not correspond to the order of the given keys anymore. Is there a way to achieve that?\nThe only thing I thought of is making many SELECT statements and concatenate them with UNION, but my list of primary keys can be very long and contain hundreds or even thousands of keys. The alternative I thought of was to reorder the rows afterwards in the application, but I would prefer a solution where this is not necessary.</p>\n"},{"tags":["python","oracle","module","cx-oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12538238,"title":"Python module \"cx_Oracle\" module could not be found","body":"<p>I recently installed cx_Oracle module on my machine, in order to connect to a remote Oracle database server. (I have no Oracle client at my side). </p>\n\n<ul>\n<li>Python: Version 2.7 x86   </li>\n<li>Oracle: Verision 11.1.X x64 </li>\n<li>Cx_Oracle:Verion-5.1.2-11g.win32-py2.7</li>\n</ul>\n\n<p>Then everytime I run my script, it fails and print the following message: </p>\n\n<blockquote>\n  <p>ImportError: DLL load failed: The specified module could not be found.</p>\n</blockquote>\n\n<p>I found a related post at <a href=\"http://stackoverflow.com/questions/6788937/error-when-importing-cx-oracle-module-python\">Here</a>, so I am wondering if I anyway have to have an Oracle client at my side where the python script is invoked.</p>\n\n<p>Can anyone help me out? Thanks in advance.</p>\n"},{"tags":["sql","oracle","stored-procedures"],"answer_count":5,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":13743,"score":4,"question_id":3415232,"title":"Call a stored procedure with another in Oracle","body":"<p>does anyone know of a way, or even if its possible to call a stored procedure from within another?\nAnd if so how would you do it?\nHere is my test code:</p>\n\n<pre><code>SET SERVEROUTPUT ON;\n\nDROP PROCEDURE test_sp_1;\nDROP PROCEDURE test_sp;\n\nCREATE PROCEDURE test_sp\nAS\nBEGIN\n    DBMS_OUTPUT.PUT_LINE('Test works');\nEND;\n/\n\nCREATE PROCEDURE test_sp_1\nAS\nBEGIN\n    DBMS_OUTPUT.PUT_LINE('Testing');\n    test_sp;\nEND;\n/\n\nCALL test_sp_1;\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["database","oracle","plsqldeveloper","authentication"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":35516,"score":4,"question_id":1832908,"title":"How to connect to remote Oracle DB with PL/SQL Developer?","body":"<p>I have a database \"TEST\", to which I connect at address 123.45.67.89:1521.</p>\n\n<p>How do I connect to it using PL/SQL Developer?</p>\n"},{"tags":["java","oracle","java-ee"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":117,"score":0,"question_id":12500837,"title":"how to join two ResultSets from oracle queries in java","body":"<p>Is it possible to join two ResultSets like join two tables in Java-oracle programming?  I am writing a java program which querys two different oracle databases(the databases are physically in different locations). In the program, sql1 returns ResultSet ret1;sql2 returns ResultSet ret2.   Suppose ret1  has the following data:</p>\n\n<pre><code>Id   item\n------------\n1   item1\n2   item 2\n3   item 3\n.........\n</code></pre>\n\n<p>Ret2 has the following data</p>\n\n<pre><code>Id  info\n---------\n1  info1\n2  info2\n…\n</code></pre>\n\n<p>I need result like this</p>\n\n<pre><code>Id item info\n----------------------\n1   item1 info1\n2   item2  info2\n</code></pre>\n\n<p>Can I do something like this in java:</p>\n\n<pre><code>Select ret1.id,ret1.item,ret2,info from ret1, ret2 where ret1.id=ret2.id\n</code></pre>\n\n<p>I know I can loop from ret1 and get the id then get info from ret2; I am wondering if there is a fast way like join two tables to join two ResultSets without looping? Actually these two results both have half million rows. Thank you!</p>\n"},{"tags":["oracle","vm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12535840,"title":"Does deleting a snapshot in Oracle VM also delete subsequent snapshots?","body":"<p>Every time I take a snapshot in Oracle VM it hierarchically adds it below the previous.\nI would like to clean up this long list and remove some of the snapshots snap.\nBut the documentation is not clear if that will affect subsequent snapshots or not.\nThe documentation says that snapshots are \"differences\" suggesting that deleting one in the middle might very well cause me to lose the following ones. But it's hard to believe that might be true and they don't state it in the docs. \nI certainly do not want to lose all subsequent snapshots.</p>\n"},{"tags":["performance","oracle","ofbiz"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":7512,"score":1,"question_id":1051593,"title":"How to improve performance in Oracle using SELECT DISTINCT","body":"<p>I'm currently working in the deployment of an OFBiz based ERP\nThe database being used is Oracle 10g Enterprise</p>\n\n<p>One of the biggest issues is some oracle performance problems, analyzing the ofbiz logs, the following query:</p>\n\n<pre><code>SELECT DISTINCT ORDER_ID, ORDER_TYPE_ID, ORDER_NAME, EXTERNAL_ID,\n SALES_CHANNEL_ENUM_ID, ORDER_DATE, ENTRY_DATE, VISIT_ID, STATUS_ID, CREATED_BY, \n FIRST_ATTEMPT_ORDER_ID, CURRENCY_UOM, SYNC_STATUS_ID, BILLING_ACCOUNT_ID, \n ORIGIN_FACILITY_ID, WEB_SITE_ID, PRODUCT_STORE_ID, TERMINAL_ID, TRANSACTION_ID, \n AUTO_ORDER_SHOPPING_LIST_ID, NEEDS_INVENTORY_ISSUANCE, IS_RUSH_ORDER, INTERNAL_CODE, \n REMAINING_SUB_TOTAL, GRAND_TOTAL, LAST_UPDATED_STAMP, LAST_UPDATED_TX_STAMP, CREATED_STAMP, \nCREATED_TX_STAMP, RECIBIR_BODEGAL, RECEPCIONADA_BODEGAL, FECHA_RECEPCION_BODEGAL FROM \nERP.ORDER_HEADER WHERE ((STATUS_ID = :v0 OR STATUS_ID = :v1 OR STATUS_ID = :v2) AND \n(ORDER_TYPE_ID = :v3)) ORDER BY ORDER_DATE DESC\n</code></pre>\n\n<p>is very slow. We've tested executing the query without the DISTINCT and it takes about 30 seconds. There are 4.000.000+ registers in the table.\nThere are index for the PK field orderId and almost every other field</p>\n\n<p>The EXPLAIN PLAN with DISTINCT is:</p>\n\n<pre><code>SELECT STATEMENT () (null)\n SORT (ORDER BY)    (null)\n  HASH (UNIQUE) (null)\n   TABLE ACCESS (FULL)  ORDER_HEADER\n</code></pre>\n\n<p>and without the DISTINCT is:</p>\n\n<pre><code>SELECT STATEMENT () (null)\n SORT (ORDER BY)    (null)\n  TABLE ACCESS (FULL)   ORDER_HEADER\n</code></pre>\n\n<p>any ideas about tuning oracle to improve the performance of this kind of queries?\nIt's very difficult to rewrite the query because is automatically generated by ofbiz\nso I think the solution is about tuning oracle</p>\n\n<p>thanks in advance</p>\n\n<p>EDIT: I analyzed the query using tkprof ,as suggested by Rob van Wijk and haffax,and the result is the following</p>\n\n<pre><code>********************************************************************************\n\nSELECT DISTINCT ORDER_ID, ORDER_TYPE_ID, ORDER_NAME, EXTERNAL_ID,\n SALES_CHANNEL_ENUM_ID, ORDER_DATE, ENTRY_DATE, VISIT_ID, STATUS_ID, CREATED_BY, \n FIRST_ATTEMPT_ORDER_ID, CURRENCY_UOM, SYNC_STATUS_ID, BILLING_ACCOUNT_ID, \n ORIGIN_FACILITY_ID, WEB_SITE_ID, PRODUCT_STORE_ID, TERMINAL_ID, TRANSACTION_ID, \n AUTO_ORDER_SHOPPING_LIST_ID, NEEDS_INVENTORY_ISSUANCE, IS_RUSH_ORDER, INTERNAL_CODE, \n REMAINING_SUB_TOTAL, GRAND_TOTAL, LAST_UPDATED_STAMP, LAST_UPDATED_TX_STAMP, CREATED_STAMP, \nCREATED_TX_STAMP, RECIBIR_BODEGAL, RECEPCIONADA_BODEGAL, FECHA_RECEPCION_BODEGAL FROM \nERP.ORDER_HEADER WHERE STATUS_ID = 'ORDER_COMPLETED' ORDER BY ORDER_DATE DESC\n\ncall     count       cpu    elapsed       disk      query    current        rows\n------- ------  -------- ---------- ---------- ---------- ----------  ----------\nParse        1      0.03       0.01          0          0          0           0\nExecute      1      0.00       0.00          0          0          0           0\nFetch        1      9.10     160.81      66729      65203         37          50\n------- ------  -------- ---------- ---------- ---------- ----------  ----------\ntotal        3      9.14     160.83      66729      65203         37          50\n\nMisses in library cache during parse: 1\nOptimizer mode: ALL_ROWS\nParsing user id: 58  \n\nElapsed times include waiting on following events:\n  Event waited on                             Times   Max. Wait  Total Waited\n  ----------------------------------------   Waited  ----------  ------------\n  SQL*Net message to client                       1        0.00          0.00\n  db file scattered read                       8178        0.28        146.55\n  direct path write temp                       2200        0.04          4.22\n  direct path read temp                          36        0.14          2.01\n  SQL*Net more data to client                     3        0.00          0.00\n  SQL*Net message from client                     1        3.36          3.36\n********************************************************************************\n</code></pre>\n\n<p>So it seems the problem is the 'db file scattered read', any ideas to how to tune oracle in order to reduce the wait in this event?</p>\n\n<p>Follow up with the new tkprof result, this time closing the session:</p>\n\n<pre><code>********************************************************************************\n\nSELECT DISTINCT ORDER_ID, ORDER_TYPE_ID, ORDER_NAME, EXTERNAL_ID,\n SALES_CHANNEL_ENUM_ID, ORDER_DATE, ENTRY_DATE, VISIT_ID, STATUS_ID, CREATED_BY,\n FIRST_ATTEMPT_ORDER_ID, CURRENCY_UOM, SYNC_STATUS_ID, BILLING_ACCOUNT_ID,\n ORIGIN_FACILITY_ID, WEB_SITE_ID, PRODUCT_STORE_ID, TERMINAL_ID, TRANSACTION_ID,\n AUTO_ORDER_SHOPPING_LIST_ID, NEEDS_INVENTORY_ISSUANCE, IS_RUSH_ORDER, INTERNAL_CODE,\n REMAINING_SUB_TOTAL, GRAND_TOTAL, LAST_UPDATED_STAMP, LAST_UPDATED_TX_STAMP, CREATED_STAMP,\nCREATED_TX_STAMP, RECIBIR_BODEGAL, RECEPCIONADA_BODEGAL, FECHA_RECEPCION_BODEGAL FROM\nERP.ORDER_HEADER WHERE STATUS_ID = 'ORDER_COMPLETED' ORDER BY ORDER_DATE DESC\n\ncall     count       cpu    elapsed       disk      query    current        rows\n------- ------  -------- ---------- ---------- ---------- ----------  ----------\nParse        1      0.03       0.01          0          0          0           0\nExecute      2      0.00       0.00          0          0          0           0\nFetch        1      8.23      47.66      66576      65203         31          50\n------- ------  -------- ---------- ---------- ---------- ----------  ----------\ntotal        4      8.26      47.68      66576      65203         31          50\n\nMisses in library cache during parse: 1\nOptimizer mode: ALL_ROWS\nParsing user id: 58 \n\nRows     Row Source Operation\n-------  ---------------------------------------------------\n     50  SORT ORDER BY (cr=65203 pr=66576 pw=75025 time=47666679 us)\n3456659   TABLE ACCESS FULL ORDER_HEADER (cr=65203 pr=65188 pw=0 time=20757300 us)\n\n\nElapsed times include waiting on following events:\n  Event waited on                             Times   Max. Wait  Total Waited\n  ----------------------------------------   Waited  ----------  ------------\n  SQL*Net message to client                       1        0.00          0.00\n  db file scattered read                       8179        0.14         34.96\n  direct path write temp                       2230        0.00          3.91\n  direct path read temp                          52        0.14          0.84\n  SQL*Net more data to client                     3        0.00          0.00\n  SQL*Net message from client                     1     1510.62       1510.62\n********************************************************************************\n</code></pre>\n"},{"tags":["java","oracle","reference","sun"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":6,"view_count":61,"score":-4,"question_id":12536344,"title":"Could anyone help me find this page?","body":"<p>This following link is broken since Sun is acquired by Oracle. Does anyone know what this page is about and where I can find it? Thanks!</p>\n\n<p><a href=\"http://developer.java.sun.com/developer/technicalArticles/ALT/RefObj/\" rel=\"nofollow\">http://developer.java.sun.com/developer/technicalArticles/ALT/RefObj/</a></p>\n"},{"tags":["oracle","jdbc","clob","sqlbindparameter","ora-01461"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1602,"score":1,"question_id":678060,"title":"Execute sql statement via JDBC with CLOB binding","body":"<p>I have the following query (column log is of type CLOB):</p>\n\n<pre><code>UPDATE table SET log=? where id=?\n</code></pre>\n\n<p>The query above works fine when using the setAsciiStream method to put a value longer than 4000 characters into the log column.</p>\n\n<p>But instead of replacing the value, I want to append it, hence my query looks like this:</p>\n\n<pre><code>UPDATE table SET log=log||?||chr(10) where id=?\n</code></pre>\n\n<p>The above query DOES NOT work any more and I get the following error:</p>\n\n<pre><code>java.sql.SQLException: ORA-01461: can bind a LONG value only for insert into a LONG column\n</code></pre>\n"},{"tags":["oracle","jqgrid","dbd"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12535533,"title":"jqgrid ajax with perl cgi and dbd oracle","body":"<p>I have a jqgrid that calls a perl cgi to populate the grid. The cgi is using DBD::Oracle to get the data. The grid is not displaying the data. </p>\n\n<p>Debugging the script I have found there is a conflict when the statement is prepared. When I skip the prepare and just send the data it works fine; when I change from Oracle to PostgreSQL it works just fine. </p>\n\n<p>Anyone ever experience this? I know the CGI is working with the Oracle connection because it runs and prints to the screen when I run it interactively. When the CGI is called from the grid it does not. When the CGI is called with the Pg connection and prepare, the data loads to the grid - perfect</p>\n\n<p>The CGI:</p>\n\n<pre><code> #!/usr/bin/perl\n    use CGI;\n    use DBI;\n    use Connect::Oracle;\n    use Connect::PG;\n\n    $stat = new CGI(\"\");\n    print $stat-&gt;header;\n    $count = $stat-&gt;url_param('count');\n\n    #connecting to either db works fine\n    my $ORdbh = DBI-&gt;connect(Oracle-&gt;User, {PrintError=&gt;1,RaiseError=&gt;1}); \n    # my $ORdbh = DBI-&gt;connect(PG-&gt;User, {PrintError=&gt;1,RaiseError=&gt;0});\n\n    $select = qq/select * from db.table/;  \n\n    # preparing with Oracle connection works fine, but nothing returned to grid. \n    # Not even the hardcoded $rows below! \n    # Preparing with PG connection works also but $rows returns to grid\n\n    my $select_batch_status = $ORdbh-&gt;prepare($select);\n    #$select_batch_status-&gt;execute();\n    #$select_batch_status-&gt;bind_columns(\\$COLLECTID, \\$SYSTEM);\n\n    ....removed fetch()....irrelevant\n\n    #The JSON is fine\n\n    $rows = qq/[\"COLLECTID\",\"SYSTEM\"]/;\n\n    $data = qq/{\"page\":\"1\",\"total\": 1, \"records\": \"$row_count\", \"rows\": [/;\n    $data .= $rows;\n    $data .= qq/]}/;\n\n    print \"$data\";\n    exit;\n</code></pre>\n\n<p>I'm concluding there is a conflict between jqgrid and DBD::Oracle but I don't no how to debug any lower. The grid works great with Pg but I want to use Oracle. On Chrome Developers tools I don't see any warnings or errors, and the cgi is not sending any data</p>\n\n<p>The grid:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    var counter=0;\n    jQuery(function () {\n        jQuery(\"#list3\").jqGrid({\n            url:'./collect.cgi?count=' + counter,\n            datatype: \"json\",\n            ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },\n            colNames: ['COLLECT ID', 'SYSTEM'],\n            colModel: [\n                {name: 'collectid', index: 'collectid', width: 100},\n                {name: 'system', index: 'system', width: 50},\n            ],\n            rowNum: 20,\n            rowList: [15, 30, 45],\n            pager: '#pager3',\n            sortname: 'system',\n            sortable: true,\n            loadonce: true,\n            viewrecords: true,\n            sortorder: \"asc\",\n            rowTotal: 500,\n            jsonReader: {\n                cell: \"\",\n                id: \"0\"\n            },\n            gridview: true,\n            loadComplete: function() {\n            $(document).ready(function() {\n                    setTimeout (function() {\n                            counter++;\n                            $(\"#list3\").jqGrid().setGridParam({\n                                    url: './collect.cgi?count=' + counter,\n                                    datatype: 'json',\n                                    loadonce: true\n                            }).trigger(\"reloadGrid\",[{current:true}]);\n                    }, 10000);\n            });\n            },\n            loadError: function(xhr,st,err) {\n                    $(\"#jsonmapMessage\").html(\"Type: \" + st + \"; Response: \" + xhr.status + \" \" + xhr.statusText);\n            },\n            loadtext: \"updating...\",\n            caption: \"COLLECTION MONITOR CONTROL\",\n            width: 'auto',\n            height: '500'\n        });\n\n    $(\"#list3\").jqGrid('navGrid','#pager3',{edit:true,add:true,del:true,refresh:true});\n\n    });\n\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["oracle","reflection","sqlalchemy","metadata"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12515610,"title":"SQLAlchemy MetaData.reflect not finding tables in Oracle db","body":"<p>I'm attempting to reverse engineer an existing Oracle schema into some declarative SQLAlchemy models. My problem is that when I use <a href=\"http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html?highlight=metadata.reflect#sqlalchemy.schema.MetaData.reflect\" rel=\"nofollow\"><code>MetaData.reflect</code></a>, it doesn't find the tables in my schema, just a Global Temp Table. However, I can still query against the other tables.</p>\n\n<p>I'm using SQLAlchemy 0.7.8, CentOS 6.2 x86_64, python 2.6, cx_Oracle 5.1.2 and Oracle 11.2.0.2 Express Edition. Here's a quick sample of what I'm talking about:</p>\n\n<pre><code>&gt;&gt;&gt; import sqlalchemy\n&gt;&gt;&gt; engine = sqlalchemy.create_engine('oracle+cx_oracle://user:pass@localhost/xe')\n&gt;&gt;&gt; md = sqlalchemy.MetaData(bind=engine)\n&gt;&gt;&gt; md.reflect()\n&gt;&gt;&gt; md.tables\nimmutabledict({u'my_gtt': Table(u'my_gtt', MetaData(bind=Engine(oracle+cx_oracle://user:pass@localhost/xe)), Column(u'id', NUMBER(precision=15, scale=0, asdecimal=False), table=&lt;my_gtt&gt;), Column(u'parent_id', NUMBER(precision=15, scale=0, asdecimal=False), table=&lt;my_gtt&gt;), Column(u'query_id', NUMBER(precision=15, scale=0, asdecimal=False), table=&lt;my_gtt&gt;), schema=None)})\n&gt;&gt;&gt; len(engine.execute('select * from my_regular_table').fetchall())\n4\n</code></pre>\n"},{"tags":["sql","oracle","query","count","aggregate-functions"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":88,"score":4,"question_id":12534177,"title":"Using count distinct to find records with 2 or more different values in a field","body":"<p>I have a simple question: How can I use Count(Distinct) in SQL (Oracle to be exact) to return only the rows where there are two or more different values in a given field.</p>\n\n<p>This is easier understood by example:</p>\n\n<pre><code>ACCOUNT     SALESMAN\n123         Abc\n123         Abc\n\n246         Abc\n246         Def\n246         Def\n\n369         Hij\n\n456         Abc\n456         Def\n</code></pre>\n\n<p>In this example, the only Accounts with 2 <strong>different</strong> sales reps would be 246 and 456, and thus, I'd want the query's result to just show the the accounts shared by 2 or more salesmen:</p>\n\n<pre><code>ACCOUNT     SALESMAN\n246         Abc\n246         Def\n456         Abc\n456         Def\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["sql","database","oracle"],"answer_count":4,"favorite_count":1,"up_vote_count":5,"down_vote_count":2,"view_count":489,"score":3,"question_id":12003127,"title":"Oracle <> , != , ^= operators","body":"<p>I want to know the difference of those operators, mainly their performance difference.</p>\n\n<p>I have had a look at <a href=\"http://stackoverflow.com/questions/5856439/difference-between-and-in-sql\">Difference between &lt;&gt; and != in SQL</a>, it has no performance related information.</p>\n\n<p>Then I found this on <a href=\"http://www.dba-oracle.com/t_not_equal_operator.htm\" rel=\"nofollow\">dba-oracle.com</a>,\nit suggests that in 10.2 onwards the performance can be quite different.</p>\n\n<p>I wonder why? does <code>!=</code> always perform better then <code>&lt;&gt;</code>?</p>\n\n<p>NOTE: Our tests, and performance on the live system shows, changing from <code>&lt;&gt;</code> to <code>!=</code> has a big impact on the time the queries return in. I am here to ask WHY this is happening, not whether they are same or not. I know semantically they are, but in reality they are different.</p>\n"},{"tags":["c#","oracle","stored-procedures","plsql"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":132,"score":0,"question_id":12511835,"title":"ORA-06550:wrong number or types of arguments in call to 'CHECK_INFO_INS'","body":"<p>Here is my procedure and it works through PL/SQL Developer:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>create or replace procedure CHECK_INFO_INS\n(\n    p_id_aircraft IN VARCHAR2,           \n    p_id_check_type IN NUMBER,     \n    p_last_check   IN DATE,             \n    p_next_check   IN DATE,             \n    p_expectedcost IN NUMBER,                             \n    p_id_currency  IN NUMBER,\n    p_currency_rate IN NUMBER                         \n)             \nis\nRate number;\nCurrentDate Date;\ncatID Checkcategories.Id%type;\nbegin\nselect C.ID into catID from CHECKCATEGORIES C WHERE C.NAME='C' and C.CHECKTYPEID = p_id_check_type;\n\n  Rate:=round(p_expectedcost/MONTHS_BETWEEN(p_next_check, p_last_check),3)*p_currency_rate;\n  CurrentDate := SYSDATE;\n  INSERT INTO CHECK_INFO\n  (\n      id_check_info,            \n      id_aircraft,              \n      id_check_categories,      \n      last_check,               \n      next_check,              \n      expectedcost,             \n      is_accumulation_complited,\n      rate,                     \n      id_currency,              \n      current_date,             \n      monthes_between,\n      CURENCY_RATE             \n )\n  values\n  (\n    CHECKS_INFO_SEQ.NEXTVAL,\n    p_id_aircraft,\n    catID,\n    p_last_check,\n    p_next_check,\n    p_expectedcost,\n    0,\n    Rate,\n    p_id_currency,\n    CurrentDate,\n    round(MONTHS_BETWEEN(p_next_check, p_last_check),1),\n    p_currency_rate\n  );\n  commit;\n    EXCEPTION\n    WHEN OTHERS\n    THEN\n      DBMS_OUTPUT.PUT_LINE(SQLERRM);\n      ROLLBACK;\nend CHECK_INFO_INS;\n</code></pre>\n\n<p>Here is my C# code:</p>\n\n<pre><code>        decimal expectedCost = Decimal.Parse(ExpCostTextBox.Text);\n        DateTime lastCheck = DateTime.Parse(LastCheckdateTimePicker.Text);\n        DateTime nextCheck = DateTime.Parse(NextCheckdateTimePicker.Text);\n        int checkType = int.Parse(ChCmbx.SelectedValue.ToString());\n        string AirCraft = AirCraftCmbx.SelectedValue.ToString();\n        int curID = int.Parse(CurrComboBox.SelectedValue.ToString());\n        decimal curRate = decimal.Parse(CurRateTextBox.Text.Replace('.',','));\n\n\n        con = new OracleConnection(conStr);\n        con.Open();\n        cmd = con.CreateCommand();\n        cmd.BindByName = true;\n        cmd.CommandType = CommandType.StoredProcedure;\n        cmd.CommandText = schema_name + \".CHECK_INFO_INS\";\n\n        cmd.Parameters.Add(\"p_id_aircraft\", OracleDbType.NVarchar2, AirCraft, ParameterDirection.Input);\n        cmd.Parameters.Add(\"p_id_check_categories\", OracleDbType.Int32, checkType, ParameterDirection.Input);\n        cmd.Parameters.Add(\"lastCheck\", OracleDbType.Date, lastCheck, ParameterDirection.Input);\n        cmd.Parameters.Add(\"nextCheck\", OracleDbType.Date, nextCheck, ParameterDirection.Input);\n        cmd.Parameters.Add(\"p_expectedcost\", OracleDbType.Decimal, expectedCost, ParameterDirection.Input);\n        cmd.Parameters.Add(\"p_id_currency\", OracleDbType.Int32, curID, ParameterDirection.Input);\n        cmd.Parameters.Add(\"p_currency_rate\", OracleDbType.Decimal, curRate, ParameterDirection.Input);\n        cmd.ExecuteNonQuery();\n</code></pre>\n\n<p>It throws an exception on the executeNonQuery line:</p>\n\n<pre><code>ORA-06550: line 1, column 7:\nPLS-00306: wrong number or types of arguments in call to 'CHECK_INFO_INS'\nORA-06550: line 1, column 7:\nPL/SQL: Statement ignored\n</code></pre>\n\n<p>I tried to recreate the procedure, but it didn't work. What is wrong with my C# code?</p>\n"},{"tags":["sql","oracle","triggers"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":228,"score":1,"question_id":6221915,"title":"Testing For Primary Key Existence In Oracle SQL Trigger","body":"<p>I'm trying to write a trigger within SQL, and the code within needs to determine whether an entry exists in the table before either attempting to update, or insert.</p>\n\n<p>I have tried using both</p>\n\n<pre><code>IF EXISTS\nUPDATE\nELSE\nINSERT\n</code></pre>\n\n<p>And</p>\n\n<pre><code>UPDATE\nIF @@ROWCOUNT = 0\nINSERT\n</code></pre>\n\n<p>But neither of them work. I'm partial to using the latter because my employer is nuts about efficiency (well...duh...) For this reason I'm also reluctant to use </p>\n\n<pre><code>IF SELECT COUNT(*) = 0\nUPDATE\nELSE\nINSERT\n</code></pre>\n\n<p>Does anybody know any ways to get around this?</p>\n\n<p>--</p>\n\n<p>UPDATE: I am trying to use MERGE, but I am receiving several errors...</p>\n\n<pre><code>MERGE INTO [tableName] AS Target\nUSING (SELECT :NEW.PIDM) AS Source (PIDM)\nON (Target.PIDM = Source.PIDM)\nWHEN MATCHED THEN\n    [UPDATE STATEMENT]\nWHEN NOT MATCHED THEN\n    [INSERT STATEMENT]\n</code></pre>\n\n<p>This gives me an error complaining that I'm missing the 'USING' keyword, as well as another complaining about the WHEN statement...</p>\n"},{"tags":["oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":111,"score":-1,"question_id":1819658,"title":"Is an user can see only committed data in the same session?","body":"<p>Is there any way to see only committed data only in the same session.\nLike\nUser A updated table with 10 rows and committed.\nthen again updated 20 rows but not committed, so here User  A should only see committed data (10 Updated rows)</p>\n"},{"tags":["sql","sql-server","oracle","bulk-collect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12533802,"title":"SQL Server Equivalent of Bulk Collect in Oracle","body":"<p>I want to replicate the following code in SQL Server.  I've had a look around and it seems like the only option is to just use a straight cursor, but is there a better way:</p>\n\n<pre><code>DECLARE\n\n    CURSOR cursor1 IS\n    SELECT *\n    FROM table1;\n\n    TYPE cursor_aat IS TABLE OF cursor1%ROWTYPE;        \n\n    l_cursor cursor_aat;\nBEGIN        \n    OPEN cursor1;\n\n    LOOP\n\n        FETCH cursor1\n        BULK COLLECT INTO l_cursor LIMIT 200;\n\n        FOR INDX IN 1 .. l_cursor.COUNT LOOP\n            IF (CheckSomeData() = 0) THEN           \n                INSERT INTO new_table\n                (col1, col2)\n                values\n                (l_cursor(INDX).col1, l_cursor(INDX).col2);\n\n                INSERT INTO new_table2\n                ...\n\n            end if\n\n        END LOOP;\n\n        EXIT WHEN l_cursor.COUNT &lt; 200;\n...\n</code></pre>\n"},{"tags":["visual-studio-2010","oracle","stored-procedures","odt"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12532818,"title":"unable to execute a nested stored procedure","body":"<p>I'm facing to a problem with PL/SQL stored procedure. I have a single SP, named sp1, which i deployed to my oracle schema using ODT for VS2010 and i can execute with no problems. \nThe problem is pulled out when i try to execute sp1 from another stored procedure named sp2 already present in the schema before the deployment(i add the call to sp1 in the sp2's body and call sp2 directly from the same schema). In this way all i get is a <code>ORA-01031 insufficient privileges</code>exception.</p>\n\n<p>I googled and found that the problem is due to the lack of the clause <code>AUTHID CURRENT_USER</code> in the <code>CREATE PROCEDURE</code> statement. I created another stored procedure named sp3 in another package with that clause and inserted in it the call to sp1. With this modify the execution works. </p>\n\n<pre><code>create or replace procedure sp3(string param)\nauthid current_user\nas \nbegin\n  sp1(param);\nend;\n</code></pre>\n\n<p>Unfortunately i can't accept this solution becouse i must use the already present package (there are at least M applications that use sp2 procedure and adding sp3 or sp1 directly in every one is obviusly impossible). I use version 11 for both oracle server and client.</p>\n\n<p>Any ideas? </p>\n"},{"tags":["oracle","plsql","oracle10g"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":83,"score":1,"question_id":12532211,"title":"Is dbms_output.put() being buffered differently from dbms_output.put_line()?","body":"<p>Im using Aqua Data Studio to debug a stored proc by scattering output statments throughout.</p>\n\n<p>I have a delete statement in the package which violate an integrity constraint:</p>\n\n<pre><code>DELETE FROM x WHERE x.ID = an_x_with_children;\n</code></pre>\n\n<p>My proc fails with an ORA-02292 on this line, as expected.  I want to see the value of the <code>an_x_with_children</code> variable.  So I wrap the line with outputs like so:</p>\n\n<pre><code>dbms_output.put('Attempting to delete x: ' || an_x_with_children);\nDELETE FROM x WHERE x.ID = an_x_with_children;\ndbms_output.put(' Success');\n</code></pre>\n\n<p>And expect to see the message as the last thing in the messages console prior to the integrity constraint violated error message.  <strong>But it doesn't print!</strong></p>\n\n<p>Now if I change the output to use the <code>put_line()</code> procedure like this:</p>\n\n<pre><code>dbms_output.put_line('Attempting to delete x: ' || an_x_with_children);\nDELETE FROM x WHERE x.ID = an_x_with_children;\ndbms_output.put_line(' Success');\n</code></pre>\n\n<p>I see the message \"Attempting to delete x: 123\" immediately before the proc errors out.</p>\n\n<p>The <a href=\"http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_output.htm\" rel=\"nofollow\">docs</a> for the <code>dbms_output</code> package don't mention the <code>put</code> and <code>put_line</code> procedures behaving any differently in this respect.  For instance, it says</p>\n\n<blockquote>\n  <p>Output that you create using PUT or PUT_LINE is buffered.</p>\n</blockquote>\n\n<p>So I would expect either both or neither to show output when the proc errors.</p>\n\n<p>Can someone explain what's going on with this behaviour to me?</p>\n"},{"tags":["sql","oracle","ora-01733"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":193,"score":-1,"question_id":12528323,"title":"ORA-01733 - Virtual column not allowed here when updating with a function in update statement","body":"<p>This sql gives an error like </p>\n\n<blockquote>\n  <p>ORA-01733: virtual column not allowed here. </p>\n</blockquote>\n\n<p>Without <code>GET_PROPERTY</code> function, the SQL works. How to solve it?</p>\n\n<pre><code>UPDATE (SELECT VALUE, GET_PROPERTY (ORG.ID, 'BenefOperationCode') AS OPERATION_CODE\n      FROM ORGANIZATION ORG, PROPERTY P\n     WHERE ORG.EXTERNALKEY = '111' AND P.ID = ORG.ID AND P.IDX = 4)\nSET VALUE = 123, OPERATION_CODE = 234;\n</code></pre>\n"},{"tags":["oracle","query","date-arithmetic"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":1568,"score":3,"question_id":6926923,"title":"How to get a list of months between 2 given dates using a query?","body":"<p>I have 2 dates, say 28-Mar-2011 and 29-Jun-2011. I need an sql query that will display the months between these 2 dates including the months containing the dates, ie. June, May, April and March.</p>\n"},{"tags":["oracle","encoding","plsql","globalization","plsqldeveloper"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":133,"score":1,"question_id":12511881,"title":"How to read Chinese Characters from Oracle UTF8 Database using PLSQL Developer","body":"<p>I have an Oracle Database with character set AL32UTF8, but I am not able to read some information (ex. Chinese characters). How can I configure my PLSQL Developer to read these characters?</p>\n\n<p>By the way, when I read this information it appears such as ???</p>\n\n<p>I'm using Windows XP.</p>\n"},{"tags":["java","sql","oracle","spring","stored-procedures"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":88,"score":2,"question_id":12529600,"title":"Why string is not printing correctly?","body":"<p>I have created a user type in oracle</p>\n\n<pre><code>create or replace type my_friend_list \nis\ntable of \nvarchar2(100);\n</code></pre>\n\n<p>Now i have written a procedure which has a output parameter like this :</p>\n\n<pre><code>  PROCEDURE friends_diff_prc\n  (\n   my_name IN VARCHAR2,\n   friend_i   IN my_friend_list ,\n   good_friend_o   OUT my_friend_list ,\n   best_friend_o   OUT my_friend_list ,\n   isSuccess         OUT NUMBER \n  );\n</code></pre>\n\n<p>I run it on <code>SQLDeveloper</code> And it is running correctly .</p>\n\n<p>And it is giving me list both of my good friends and best friends.</p>\n\n<p>But when i am calling it through JAVA Class which is extending <code>StoredProcedure</code>.</p>\n\n<p><code>best_friend</code> list is correcly coming but for the <code>good_friend</code> list it is printing</p>\n\n<pre><code>Ljava.lang.Object;@24342434, \nLjava.lang.Object;@243a243a,\nLjava.lang.Object;@24402440,\nLjava.lang.Object;@24462446\n</code></pre>\n\n<p>My java code to fetch this output arraylist is like this:</p>\n\n<pre><code>List&lt;String&gt; goodfriends = Arrays.asList((String[]) results.get(\"good_friend_o\");\nList&lt;String&gt; bestfriends = Arrays.asList((String[]) results.get(\"best_friend_o\");\n</code></pre>\n\n<p>Why it is not giving correct result for good_friends ?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":[".net","oracle","vb6","character-encoding","fonts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":11666612,"title":"vb6 font charset oracle","body":"<p>here is the situation:</p>\n\n<p>I have string1 using charset 186 (BALTIC_CHARSET).\nI have string2 using charset 204 (RUSSIAN_CHARSET).\nI can save these strings in to oracle database. I can see those strings as they should only when I change to particular charset. That is no problem. Problem is how do I save string2 to .text file and see it as it should. Now when I save it I get nonsense.</p>\n\n<p>I am new to all the unicode or ansi or other.\nCan I get what I want using vb.net? How do I do that then?\nThanks.</p>\n"},{"tags":["sql","oracle","invalid","identifier"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":67,"score":-4,"question_id":12529845,"title":"Invalid Identifier in Oracle","body":"<p>We have a table like this: </p>\n\n<pre><code>number branch code\n1000 center XXCO\n1001 xyz XXER\n1002 zyx XXRE\n2000 center2 YYCO\n2001 xyz YYER\n2002 zyx YYRE\n</code></pre>\n\n<p>All the items that have \"CO\" in the end of their code are parents to the items that have the same first two symbols in the code.</p>\n\n<p>The task is to get a list of all the branches with their respective parents, like this:</p>\n\n<pre><code>center xyz XXER\ncenter zyx XXRE\ncenter2 xyz YYER\ncenter2 zyx YYRE\n</code></pre>\n\n<p>I try the following code:</p>\n\n<pre><code>SELECT b.branch, a.branch, a.code\nFROM tmp a JOIN tmp b ON\nleft(a.code,2) = left(b.code,2)\nAND a.code NOT LIKE '%CO' AND b.code LIKE '%CO';\n</code></pre>\n\n<p>But I get an error pointing at the \"= left\" position in the script.</p>\n\n<pre><code>ORA-00904: \"LEFT\": недопустимый идентификатор\n00904. 00000 -  \"%s: invalid identifier\"\n*Cause:    \n*Action:\nError at Line: 3 Column: 17\n</code></pre>\n\n<p>What can be the reason for this? Can anybody please help?</p>\n"},{"tags":["java","oracle","hibernate"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":109,"score":0,"question_id":12528934,"title":"How to do cascade using hql query in hibernate","body":"<p>How to do cascade save or update using hql query in hibernate? also how can i use cascade update for some specific fields instead of updating all child table fields?</p>\n\n<p>for example table User has<br>\n<strong>userName</strong> varchar(10)<br>\n<strong>Password</strong> varchar(10)<br></p>\n\n<p>table UserAccessRights has<br>\n<strong>username</strong> varchar(10) <strong>FK of User table</strong><br>\n<strong>password</strong> varchar(10) <strong>FK of User table</strong><br>\nAuthpassword varchar(10) <br></p>\n\n<p>cascade update should happen only for username not for password. how can i acheive this?</p>\n"},{"tags":["java","oracle","spring","stored-procedures"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12507072,"title":"Declare an OUT parameter through Java class","body":"<p>I have created a user type in oracle</p>\n\n<pre><code>create or replace type my_array_list \nis\ntable of \nvarchar2(100);\n</code></pre>\n\n<p>Now i have written a procedure which has a output parameter like this :</p>\n\n<pre><code>   type my_list_rec IS record\n   (\n      best_friends my_array_list,\n      good_friends my_array_list\n   );\n\n\n   type my_list_array is table of my_list_rec;\n\n  procedure friends_diff_prc(my_name in varchar2,\n                                     my_friend_list_o   out my_list_array ,\n                                     rc_o                  out number); \n</code></pre>\n\n<p>Now i am calling this proc through my JAVA Class which is extending <code>StoredProcedure</code>.</p>\n\n<pre><code>// Declare output parameter\n declareParameter(new SqlOutParameter(\n                PropertiesReader\n                        .getPropertyValue(FRIENDSConstants.GET_FRIEND_LIST_OUT),\n                OracleTypes.ARRAY,\"MYDB.MY_ARRAY_LIST\"));\n</code></pre>\n\n<p>But when i am calling a proc , i am getting </p>\n\n<pre><code>org.springframework.jdbc.BadSqlGrammarException:\n</code></pre>\n\n<p>Am i declaring an OUT Parameter correctly??\nAnd how i can parse the contents of that output parameter?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["sql","database","oracle","database-administration"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":12528114,"title":"Regular expression in Oracle","body":"<p>I want to fetch a string pattern in column of table. I am using a query like </p>\n\n<pre><code>select CALCULATION_DETAILS \n  from DS_ELEMENT_CALC_PROPERTY \n where REGEXP_LIKE(CALCULATION_DETAILS, 'fm.get');\n</code></pre>\n\n<p>I am not able to figure out the exact regexp for my requirement.</p>\n\n<p><code>CALCULATION_DETAILS</code> is <code>clob</code> and it contains a very lengthy string of JavaScript code.\nIt has a syntax like <code>fm.get('11abc') or fm.get('11') or fm.get('ab1c') or fm.get('abc')</code>t.</p>\n\n<p>I want to fetch the <code>CALCULATION_DETAILS</code> which has <code>fm.get('11abc') or fm.get('111')</code> means which starts with numbers inside to <code>fm.get()</code>.</p>\n"},{"tags":["sql","oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":113,"score":0,"question_id":12526349,"title":"\"Where not exists\" vs \"left outer join\" in oracle sql","body":"<p>I have a simple sql querry:</p>\n\n<pre><code>SELECT  \n       columnA, columnB, columnC...  \n FROM  \n       (SELECT    \n             columnA, columnB, columnC...  \n        FROM   \n              SomeTable) Table1  \n  WHERE NOT EXISTS  \n        (SELECT   \n               columnA  \n          FROM  \n               SomeOtherTable st  \n          WHERE  \n               st.columnB = Table1.columnB)\n</code></pre>\n\n<p>Can anyone give me a suggestion how to rewrite this querry for better performance? I mean to include the <code>WHERE NOT EXISTS</code> clause in Table1.</p>\n"},{"tags":["sql","database","oracle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12529026,"title":"Regular expression in Oracle for search Space","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12528114/regular-expression-in-oracle\">Regular expression in Oracle</a>  </p>\n</blockquote>\n\n\n\n<p>I want to fetch a string pattern in column of table. I am using a query like: </p>\n\n<pre><code> select CALCULATION_DETAILS \n from DS_ELEMENT_CALC_PROPERTY \n where REGEXP_LIKE(CALCULATION_DETAILS, 'fm.get\\(''[:space:]+''\\)');\n</code></pre>\n\n<p><code>CALCULATION_DETAILS</code>   is clob and it contains a very lengthy string of JavaScript code. It has a syntax like <code>fm.get('11a bc')</code> or <code>fm.get('1 1')</code> or <code>fm.get('ab1 c')</code> or <code>fm.get('abc ')t</code>.</p>\n\n<p>I need one pattern for which has one or more spaces inside to <code>fm.get()</code>. ex: <code>fm.get('ab d')</code> or <code>fm.get('ab d ed d')</code> could any one please help me out.</p>\n"},{"tags":["sql","oracle","query-optimization"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":76,"score":0,"question_id":12528589,"title":"SQL optimization : Inner join","body":"<p>Suppose I have got the SQL below</p>\n\n<p>How can I optimize the performance of the query ? </p>\n\n<pre><code>select product, address, quantity, \n    price, create_date, sum(no_of_photo) as no_of_photo\nfrom\n(\n    SELECT customer.PROJECT_ID as project_id ,\n        customer.ORDER_TYPE as order_type,  \n        customer.product_name as product, \n        customer.address_name as address ,    \n        customer.quantity_name as quantity,\n        user.first_name || ' ' || user.last_name AS price,\n        customer.create_date, customer.no_of_photo \n    FROM customer \n    INNER JOIN user \n        ON customer.creation_userid = user.userid\n) master_list \ngroup by project_id, order_type , \n    product, address, quantity, price, \n    create_date \nhaving project_id = 123456 \norder by product, address, quantity, price, create_date\n</code></pre>\n"},{"tags":["sql","oracle"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12522127,"title":"Oracle SQL - Easiest way to produce a row of answers in one query, so I don't have to run the query multiple times?","body":"<p>I have this simple query:</p>\n\n<pre><code>Select \nTo_Date('2012-sep-03','yyyy-mon-dd')as Date_Of_Concern,\nCount(Player_Id) as Retained\nFrom Player\nWhere\n(To_Date('2012-sep-03','yyyy-mon-dd')-Trunc(Init_Dtime))&lt;=7\n</code></pre>\n\n<p>Which Results In:</p>\n\n<pre><code>Date_Of_Concern         Retained\n 03-Sep-12               81319\n</code></pre>\n\n<p>This query counts all of the players in my database who have logged in(init_dtime) within 7 days of a specific date.</p>\n\n<p>As it stands, I will have to run this query multiple times, for every \"Day of Concern\" that I wish to know about. Is there a better solution?</p>\n"},{"tags":["sql","oracle","query-optimization"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":77,"score":-1,"question_id":12528048,"title":"SQL optimization : select distinct from one table","body":"<p>Suppose I have got a SQL like this </p>\n\n<pre><code>select  distinct CUSTOMER_PRODUCT_ORDER as ORDER\nfrom MASTER_LIST \nwhere PROJECT_ID     = \"ABCDD\"\n order by   ORDER ASC\n</code></pre>\n\n<p>how can I optimize the performance of running this sql ? </p>\n"},{"tags":["oracle","nhibernate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12527975,"title":"Oracle spatial query in nHibernate","body":"<p>I'm just getting to grips with nHibernate (using it with Oracle Spatial).</p>\n\n<p>I have a query which works in Oracle Sql Developer (simplified):</p>\n\n<pre><code>SELECT c.*\nFROM table1 c, table2 s\nwhere sdo_geom.sdo_distance(c.geometry, s.geometry, 0.005) &lt;= 10\nand c.name = 'DAVE'\n</code></pre>\n\n<p>I am wondering if there is any way to represent this kind of query - in particular the bit where sdo_geom.sdo_distance() is called - in nHibernate data access code?</p>\n\n<p>I have googled around and feel there may be something to do with projections and / or criteria which I could use. Up to now I have only used nHibernate's in built methods e.g. \"FindOne\", \"FindAll\", etc.</p>\n\n<p>Thanks</p>\n"},{"tags":["sql","oracle"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":8245,"score":2,"question_id":4627938,"title":"Oracle: Finding Columns with only null values","body":"<p>I have a table with a lot of columns and a type column.</p>\n\n<p>Some columns seem to be always empty for a specific type.</p>\n\n<p>I want to create a view for each type and only show the relevant columns for each type. Working under the assumption that if a column has ONLY null values for a specific type, then that columns should not be part of the view, how can you find that out with queries?</p>\n\n<p>Is there a \nSELECT [columnName] FROM [table] WHERE [columnValues] ARE ALL [null]</p>\n\n<p>I know I COMPLETELY made it all up above... I'm just trying to get the idea across.\nThanks in advance!</p>\n"}]}
